"use strict";
exports.id = 8857;
exports.ids = [8857,1976,7519,2470];
exports.modules = {

/***/ 17504:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ C),
/* harmony export */   b: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(56178);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function w(w){const C=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__/* .ShaderBuilder */ .N5,{vertex:j,fragment:y,attributes:L,varyings:O}=C;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .addProjViewLocalOrigin */ .NB)(j,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexColor */ .c,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .VisualVariables */ .A,w),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .ObjectAndLayerIdColor */ .g,w),L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.POSITION,"vec3"),w.vvColor&&L.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,"float"),O.add("vColor","vec4"),O.add("vpos","vec3");const A=w.multipassEnabled&&(w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color||w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha);A&&O.add("depth","float"),j.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float4PassUniform */ .E("eColor",(e=>e.color)));const T=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth;T&&(C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .OutputDepth */ .L,w),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addNearFar */ .xJ)(C),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addLinearDepth */ .Mu)(C)),j.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      forwardObjectAndLayerIdColor();

      ${w.hasVertexColors?"vColor *= eColor;":w.vvColor?"vColor = eColor * interpolateVVColor(colorFeatureAttribute);":"vColor = eColor;"}
      ${A?"depth = (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${T?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`transformPosition(proj, view, vpos);`}
    }
  `),C.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,w),A&&C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .multipassTerrainTest */ .Q,w),y.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .ColorConversion */ .a);const $=w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight;return $&&C.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .OutputHighlight */ .Qh,w),y.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
  void main() {
    discardBySlice(vpos);
    ${A?"terrainDepthTest(depth);":""}
    vec4 fColor = vColor;

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`fColor.a = 1.0;`:""}

    if (fColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_17__/* .symbolAlphaCutoff */ .y)}) {
      discard;
    }

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`fragColor = vec4(fColor.a);`:""}

    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`fragColor = highlightSlice(fColor, vpos); ${w.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}`:""}
    ${$?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputHighlight();`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputDepth(linearDepth);`:""};
    ${w.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputObjectAndLayerIdColor();`:""}
  }
  `),C}const C=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 90618:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ J),
/* harmony export */   b: () => (/* binding */ H)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Offset_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26163);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24682);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(81283);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99915);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_SymbolColor_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67691);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(26139);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(82089);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54009);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_default_DefaultMaterialAuxiliaryPasses_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(23399);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_ComputeNormalTexture_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(76080);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(56349);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(75988);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(696);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_Normals_glsl_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(46971);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(17666);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(39486);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(64062);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(25541);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(29724);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(60915);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function H(H){const J=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_32__/* .ShaderBuilder */ .N5,{vertex:K,fragment:Q,varyings:X}=J;if((0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_27__/* .addProjViewLocalOrigin */ .NB)(K,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .PositionAttribute */ .I),X.add("vpos","vec3"),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_24__/* .VisualVariables */ .A,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .InstancedDoublePrecision */ .BK,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .VerticalOffset */ .G,H),H.hasColorTextureTransform&&J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .colorTextureUV */ .q2),H.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color||H.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha){H.hasNormalTextureTransform&&J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .normalTextureUV */ .Sx),H.hasEmissionTextureTransform&&J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .emissiveTextureUV */ .MU),H.hasOcclusionTextureTransform&&J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .occlusionTextureUV */ .O1),H.hasMetallicRoughnessTextureTransform&&J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TextureTransformUV_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .metallicRoughnessTextureUV */ .QM),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_27__/* .addCameraPosition */ .yu)(K,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .NormalAttribute */ .Y,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .Transform */ .d,H);const o=H.normalType===_views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .NormalType */ .W.Attribute||H.normalType===_views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .NormalType */ .W.Compressed;o&&H.offsetBackfaces&&J.include(_views_3d_webgl_engine_core_shaderLibrary_Offset_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Offset */ .M),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ComputeNormalTexture_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .ComputeNormalTexture */ .W,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexNormal */ .Mh,H),H.instancedColor&&J.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_35__/* .VertexAttribute */ .r.INSTANCECOLOR,"vec4"),X.add("vPositionLocal","vec3"),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureCoordinateAttribute */ .U,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ForwardLinearDepth */ .oD,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_SymbolColor_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .SymbolColor */ .K,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexColor */ .c,H),K.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_29__/* .Float4PassUniform */ .E("externalColor",(e=>e.externalColor))),X.add("vcolorExt","vec4"),H.multipassEnabled&&X.add("depth","float"),K.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
      void main(void) {
        forwardNormalizedVertexColor();
        vcolorExt = externalColor;
        ${H.instancedColor?"vcolorExt *= instanceColor * 0.003921568627451;":""}
        vcolorExt *= vvColor();
        vcolorExt *= getSymbolColor();
        forwardColorMixMode();

        if (vcolorExt.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_36__/* .symbolAlphaCutoff */ .y)}) {
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        } else {
          vpos = getVertexInLocalOriginSpace();
          vPositionLocal = vpos - view[3].xyz;
          vpos = subtractOrigin(vpos);
          ${o?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:""}
          vpos = addVerticalOffset(vpos, localOrigin);
          ${H.hasVertexTangents?"vTangent = dpTransformVertexTangent(tangent);":""}
          gl_Position = transformPosition(proj, view, vpos);
          ${o&&H.offsetBackfaces?"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);":""}
        }

        ${H.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}
        forwardLinearDepth();
        forwardTextureCoordinates();
        ${H.hasColorTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`forwardColorUV();`:""}
        ${H.hasNormalTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`forwardNormalUV();`:""}
        ${H.hasEmissionTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`forwardEmissiveUV();`:""}
        ${H.hasOcclusionTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`forwardOcclusionUV();`:""}
        ${H.hasMetallicRoughnessTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`forwardMetallicRoughnessUV();`:""}
      }
    `)}switch(H.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha:J.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_25__/* .DiscardOrAdjustAlphaPass */ .S,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .multipassTerrainTest */ .Q,H),Q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_30__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_30__/* .FloatPassUniform */ .m("layerOpacity",(e=>e.layerOpacity))),H.hasColorTexture&&Q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_33__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),Q.include(_views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_26__/* .MixExternalColor */ .N),Q.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${H.multipassEnabled?"terrainDepthTest(depth);":""}
        ${H.hasColorTexture?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                vec4 texColor = texture(tex, ${H.hasColorTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`colorUV`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vuv0`});
                ${H.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vec4 texColor = vec4(1.0);`}
        ${H.hasVertexColors?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        fragColor = vec4(opacity_);
      }
    `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color:J.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .EvaluateSceneLighting */ .kA,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .EvaluateAmbientOcclusion */ .n,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_25__/* .DiscardOrAdjustAlphaPass */ .S,H),J.include(H.instancedDoublePrecision?_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_22__/* .ReadShadowMapPass */ .G:_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_22__/* .ReadShadowMapDraw */ .Bz,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .multipassTerrainTest */ .Q,H),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_27__/* .addCameraPosition */ .yu)(Q,H),Q.uniforms.add(K.uniforms.get("localOrigin"),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_28__/* .Float3PassUniform */ .t("ambient",(e=>e.ambient)),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_28__/* .Float3PassUniform */ .t("diffuse",(e=>e.diffuse)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_30__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_30__/* .FloatPassUniform */ .m("layerOpacity",(e=>e.layerOpacity))),H.hasColorTexture&&Q.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_33__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .PhysicallyBasedRenderingParameters */ ._Z,H),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_20__/* .PhysicallyBasedRendering */ .c,H),Q.include(_views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_26__/* .MixExternalColor */ .N),J.include(_views_3d_webgl_engine_core_shaderLibrary_shading_Normals_glsl_js__WEBPACK_IMPORTED_MODULE_19__/* .Normals */ .r,H),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .addAmbientBoostFactor */ .a8)(Q),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .addLightingGlobalFactor */ .eU)(Q),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_17__/* .addMainLightIntensity */ .O4)(Q),Q.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${H.multipassEnabled?"terrainDepthTest(depth);":""}
        ${H.hasColorTexture?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                vec4 texColor = texture(tex, ${H.hasColorTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`colorUV`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vuv0`});
                ${H.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vec4 texColor = vec4(1.0);`}
        shadingParams.viewDirection = normalize(vpos - cameraPosition);
        ${H.normalType===_views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .NormalType */ .W.ScreenDerivative?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                vec3 normal = screenDerivativeNormal(vPositionLocal);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                shadingParams.normalView = vNormalWorld;
                vec3 normal = shadingNormal(shadingParams);`}
        ${H.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .PBRMode */ .A9.Normal?"applyPBRFactors();":""}
        float ssao = evaluateAmbientOcclusionInverse();
        ssao *= getBakedOcclusion();

        vec3 posWorld = vpos + localOrigin;

        float additionalAmbientScale = additionalDirectedAmbientLight(posWorld);
        float shadow = ${H.receiveShadows?"readShadowMap(vpos, linearDepth)":H.spherical?"lightingGlobalFactor * (1.0 - additionalAmbientScale)":"0.0"};

        vec3 matColor = max(ambient, diffuse);
        ${H.hasVertexColors?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        ${H.hasNormalTexture?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                mat3 tangentSpace = ${H.hasVertexTangents?"computeTangentSpace(normal);":"computeTangentSpace(normal, vpos, vuv0);"}
                vec3 shadingNormal = computeTextureNormal(tangentSpace, ${H.hasNormalTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`normalUV`:"vuv0"});`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vec3 shadingNormal = normal;`}
        vec3 normalGround = ${H.spherical?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`normalize(posWorld);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vec3(0.0, 0.0, 1.0);`}

        ${H.snowCover?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                float snow = smoothstep(0.5, 0.55, dot(normal, normalGround));
                albedo = mix(albedo, vec3(1), snow);
                shadingNormal = mix(shadingNormal, normal, snow);
                ssao = mix(ssao, 1.0, snow);`:""}

        vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;

        ${H.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .PBRMode */ .A9.Normal||H.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .PBRMode */ .A9.Schematic?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];
                ${H.snowCover?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`
                        mrr = mix(mrr, vec3(0.0, 1.0, 0.04), snow);
                        emission = mix(emission, vec3(0.0), snow);`:""}

                vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
        fragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);
        ${H.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_34__/* .TransparencyPassType */ .y.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_31__/* .glsl */ .H)`fragColor = premultiplyAlpha(fragColor);`:""}
      }
    `)}return J.include(_views_3d_webgl_engine_core_shaderLibrary_default_DefaultMaterialAuxiliaryPasses_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .DefaultMaterialAuxiliaryPasses */ .E,H),J}const J=Object.freeze(Object.defineProperty({__proto__:null,build:H},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 69726:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ H),
/* harmony export */   b: () => (/* binding */ F),
/* harmony export */   c: () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78286);
/* harmony import */ var _vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52712);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16917);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97085);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(36985);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(3097);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(70224);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(6916);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function F(o){const i=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__/* .ShaderBuilder */ .N5,F=o.signedDistanceFieldEnabled;if(i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .HUD */ .Q,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .SliceDraw */ .HQ,o),o.occlusionPass)return i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .HUDOcclusionPass */ .I,o),i;const{vertex:B,fragment:H}=i;i.include(_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .ScreenSizePerspective */ .Y6),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .RgbaFloatEncoding */ .W),H.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .ColorConversion */ .a),i.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .VisualVariables */ .A,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .ObjectAndLayerIdColor */ .g,o),i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .HUDVisibility */ .y),i.varyings.add("vcolor","vec4"),i.varyings.add("vtc","vec2"),i.varyings.add("vsize","vec2"),i.varyings.add("voccluded","float"),B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float4PassUniform */ .E("viewport",((e,o)=>o.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float2PassUniform */ .G("screenOffset",((o,i)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(T,2*o.screenOffset[0]*i.camera.pixelRatio,2*o.screenOffset[1]*i.camera.pixelRatio))),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float2PassUniform */ .G("anchorPosition",(e=>D(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float4PassUniform */ .E("materialColor",(e=>e.color))),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addPixelRatio */ .Nz)(B),F&&(B.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float4PassUniform */ .E("outlineColor",(e=>e.outlineColor))),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float4PassUniform */ .E("outlineColor",(e=>L(e)?e.outlineColor:_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.Z)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_18__/* .FloatPassUniform */ .m("outlineSize",(e=>L(e)?e.outlineSize:0)))),o.pixelSnappingEnabled&&B.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .AlignPixel */ .K),o.hasScreenSizePerspective&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .addScreenSizePerspective */ .pM)(B),(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .addScreenSizePerspectiveAlignment */ .OH)(B)),o.debugDrawLabelBorder&&i.varyings.add("debugBorderCoords","vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__/* .VertexAttribute */ .r.UV0,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__/* .VertexAttribute */ .r.COLOR,"vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__/* .VertexAttribute */ .r.SIZE,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_23__/* .VertexAttribute */ .r.FEATUREATTRIBUTE,"vec4"),B.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      forwardObjectAndLayerIdColor();

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${o.hasScreenSizePerspective?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
            inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
            vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
            inputSize = size;
            vec2 screenOffsetScaled = screenOffset;`}

      ${o.vvSize?"inputSize *= vvScale(featureAttribute).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);
      bool visible = testHUDVisibility(posProj);
      voccluded = visible ? 0.0 : 1.0;
    `);const U=(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`vec2 uv01 = floor(uv0);
vec2 uv = uv0 - uv01;
quadOffset.xy = ((uv01 - anchorPosition) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;`,V=o.pixelSnappingEnabled?F?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`posProj += quadOffset;`;B.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
    ${o.occlusionTestEnabled?"if (visible) {":""}
    ${U}
    ${o.vvColor?"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    ${o.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`vcolor.a = 1.0;`:""}

    bool alphaDiscard = vcolor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__/* .symbolAlphaCutoff */ .y)};
    ${F?`alphaDiscard = alphaDiscard && outlineColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__/* .symbolAlphaCutoff */ .y)};`:""}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${V}
      gl_Position = posProj;
    }

    vtc = uv;

    ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(uv01, 1.5 / combinedSize);":""}
    vsize = inputSize;
    ${o.occlusionTestEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`} else { vtc = vec2(0.0);
      ${o.debugDrawLabelBorder?"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
  }
  `),H.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_21__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture)));const E=o.debugDrawLabelBorder?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`(isBorder > 0.0 ? 0.0 : ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__/* .defaultMaskAlphaCutoff */ .H)})`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__/* .defaultMaskAlphaCutoff */ .H),I=(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
    ${o.debugDrawLabelBorder?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${o.sampleSignedDistanceFieldTexelCenter?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      float txSize = float(textureSize(tex, 0).x);
      float texelSize = 1.0 / txSize;

      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;
      `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
      vec2 samplePos = vtc;
      `}

    ${F?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
      vec4 fillPixelColor = vcolor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${E} ||
          fillPixelColor.a + outlinePixelColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_24__/* .symbolAlphaCutoff */ .y)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        fragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${E}) {
          discard;
        }

        fragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
          vec4 texColor = texture(tex, vtc, -0.5);
          if (texColor.a < ${E}) {
            discard;
          }
          fragColor = texColor * premultiplyAlpha(vcolor);
          `}

    // Draw debug border with transparency, so that original texels along border are still partially visible
    ${o.debugDrawLabelBorder?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`:""}
  `;switch(o.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.Color:H.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
        void main() {
          ${I}
          ${o.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_22__/* .TransparencyPassType */ .y.FrontFace?"fragColor.rgb /= fragColor.a;":""}
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.Alpha:H.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
        void main() {
          ${I}
          fragColor = vec4(fragColor.a);
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.ObjectAndLayerIdColor:H.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
        void main() {
          ${I}
          outputObjectAndLayerIdColor();
        }`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.Highlight:H.constants.add("occludedHighlightFlag","vec4",_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .occludedHighlightFlag */ .U).add("unoccludedHighlightFlag","vec4",_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .unoccludedHighlightFlag */ .bO),H.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_19__/* .glsl */ .H)`
        void main() {
          ${I}
          if (voccluded == 1.0) {
            fragColor = occludedHighlightFlag;
          } else {
            fragColor = unoccludedHighlightFlag;
          }
        }`)}return i}function L(e){return e.outlineColor[3]>0&&e.outlineSize>0}function D(e,i=T){return e.textureIsSignedDistanceField?B(e.anchorPosition,e.distanceFieldBoundingBox,i):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.j)(i,e.anchorPosition),i}function B(o,i,r){null!=i?(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,o[0]*(i[2]-i[0])+i[0],o[1]*(i[3]-i[1])+i[1]):(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,0,0)}const T=(0,_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),H=Object.freeze(Object.defineProperty({__proto__:null,build:F,calculateAnchorPosForRendering:D},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 81808:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ b),
/* harmony export */   b: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78286);
/* harmony import */ var _vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52712);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16917);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(97085);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(3097);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(46823);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6916);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function S(i){const r=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_13__/* .ShaderBuilder */ .N5,{vertex:S,fragment:b}=r;return S.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .AlignPixel */ .K),r.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .HUD */ .Q,i),r.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,i),r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__/* .VertexAttribute */ .r.UV0,"vec2"),S.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Float4PassUniform */ .E("viewport",((e,i)=>i.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .FloatPassUniform */ .m("lineSize",((e,i)=>e.size>0?Math.max(1,e.size)*i.camera.pixelRatio:0)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float2PassUniform */ .G("pixelToNDC",((i,r)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(m,2/r.camera.fullViewport[2],2/r.camera.fullViewport[3]))),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .FloatPassUniform */ .m("borderSize",((e,i)=>null!=e.borderColor?i.camera.pixelRatio:0)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float2PassUniform */ .G("screenOffset",((i,r)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(m,i.horizontalScreenOffset*r.camera.pixelRatio,0)))),r.varyings.add("coverageSampling","vec4"),r.varyings.add("lineSizes","vec2"),i.multipassEnabled&&r.varyings.add("depth","float"),i.occlusionTestEnabled&&r.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .HUDVisibility */ .y),i.hasScreenSizePerspective&&(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addScreenSizePerspectiveAlignment */ .OH)(S),S.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 endPoint = projectPositionHUD(projectAux);

      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      }
    ${i.occlusionTestEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      if (!testHUDVisibility(endPoint)) {
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      }`:""}

    ${i.hasScreenSizePerspective?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
      vec2 screenOffsetScaled = applyScreenSizePerspectiveScaleFactorVec2(screenOffset, perspectiveFactor);
        `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`vec2 screenOffsetScaled = screenOffset;`}
      // Add view dependent polygon offset to get exact same original starting point. This is mostly used to get the
      // correct depth value
      vec3 posView = (view * vec4(position, 1.0)).xyz;
      ${i.multipassEnabled?"depth = posView.z;":""}

      applyHUDViewDependentPolygonOffset(auxpos1.w, projectAux.absCosAngle, posView);
      vec4 startPoint = proj * vec4(posView, 1.0);
      // Apply screen offset to both start and end point
      vec2 screenOffsetNorm = screenOffsetScaled * 2.0 / viewport.zw;
      startPoint.xy += screenOffsetNorm * startPoint.w;
      endPoint.xy += screenOffsetNorm * endPoint.w;
      // Align start and end to pixel origin
      vec4 startAligned = alignToPixelOrigin(startPoint, viewport.zw);
      vec4 endAligned = alignToPixelOrigin(endPoint, viewport.zw);
    ${i.depthHudEnabled?i.depthHudAlignStartEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`endAligned = vec4(endAligned.xy / endAligned.w * startAligned.w, startAligned.zw);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`startAligned = vec4(startAligned.xy / startAligned.w * endAligned.w, endAligned.zw);`:""}
      vec4 projectedPosition = mix(startAligned, endAligned, uv0.y);
      // The direction of the line in screen space
      vec2 screenSpaceDirection = normalize(endAligned.xy / endAligned.w - startAligned.xy / startAligned.w);
      vec2 perpendicularScreenSpaceDirection = vec2(screenSpaceDirection.y, -screenSpaceDirection.x);
    ${i.hasScreenSizePerspective?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      float lineSizeScaled = applyScreenSizePerspectiveScaleFactorFloat(lineSize, perspectiveFactor);
      float borderSizeScaled = applyScreenSizePerspectiveScaleFactorFloat(borderSize, perspectiveFactor);
        `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      float lineSizeScaled = lineSize;
      float borderSizeScaled = borderSize;
        `}
      float halfPixelSize = lineSizeScaled * 0.5;

      // Compute full ndc offset, adding 1px padding for doing anti-aliasing and the border size
      float padding = 1.0 + borderSizeScaled;
      vec2 ndcOffset = (-halfPixelSize - padding + uv0.x * (lineSizeScaled + padding + padding)) * pixelToNDC;

      // Offset x/y from the center of the line in screen space
      projectedPosition.xy += perpendicularScreenSpaceDirection * ndcOffset * projectedPosition.w;

      // Compute a coverage varying which we can use in the fragment shader to determine
      // how much a pixel is actually covered by the line (i.e. to anti alias the line).
      // This works by computing two coordinates that can be linearly interpolated and then
      // subtracted to find out how far away from the line edge we are.
      float edgeDirection = (uv0.x * 2.0 - 1.0);

      float halfBorderSize = 0.5 * borderSizeScaled;
      float halfPixelSizeAndBorder = halfPixelSize + halfBorderSize;
      float outerEdgeCoverageSampler = edgeDirection * (halfPixelSizeAndBorder + halfBorderSize + 1.0);

      float isOneSided = float(lineSizeScaled < 2.0 && borderSize < 2.0);

      coverageSampling = vec4(
        // Edge coordinate
        outerEdgeCoverageSampler,

        // Border edge coordinate
        outerEdgeCoverageSampler - halfPixelSizeAndBorder * isOneSided,

        // Line offset
        halfPixelSize - 0.5,

        // Border offset
        halfBorderSize - 0.5 + halfPixelSizeAndBorder * (1.0 - isOneSided)
      );

      lineSizes = vec2(lineSizeScaled, borderSizeScaled);

      gl_Position = projectedPosition;
    }
  `),b.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Float4PassUniform */ .E("uColor",(e=>u(e.color))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Float4PassUniform */ .E("borderColor",(e=>u(e.borderColor)))),i.multipassEnabled&&(b.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .multipassGeometryTest */ .H,i),b.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float2PassUniform */ .G("inverseViewport",((e,i)=>i.inverseViewport)))),b.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
    void main() {
      ${i.multipassEnabled?"if( geometryDepthTest(gl_FragCoord.xy * inverseViewport, depth) ){ discard; }":""}

      // Mix between line and border coverage offsets depending on whether we need
      // a border (based on the sidedness).
      vec2 coverage = min(1.0 - clamp(abs(coverageSampling.xy) - coverageSampling.zw, 0.0, 1.0), lineSizes);

      // Mix between border and line color based on the line coverage (conceptually the line blends on top of the
      // border background).
      //
      // Anti-alias by blending final result using the full (including optional border) coverage and the color alpha
      float borderAlpha = uColor.a * borderColor.a * coverage.y;
      float colorAlpha = uColor.a * coverage.x;

      float finalAlpha = mix(borderAlpha, 1.0, colorAlpha);

    ${i.depthHudEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      if (finalAlpha < 0.01) {
        discard;
      }
      `:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_12__/* .glsl */ .H)`
      vec3 finalRgb = mix(borderColor.rgb * borderAlpha, uColor.rgb, colorAlpha);
      fragColor = vec4(finalRgb, finalAlpha);
      `}
  }
  `),r}function u(e){return null!=e?e:_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.Z}const m=(0,_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),b=Object.freeze(Object.defineProperty({__proto__:null,build:S},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 7700:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ D),
/* harmony export */   b: () => (/* binding */ M)
/* harmony export */ });
/* harmony import */ var _views_3d_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50980);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56289);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(56178);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2119);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(70224);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(20778);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(58376);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function M(M){const D=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_16__/* .ShaderBuilder */ .N5,k=M.multipassEnabled&&(M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color||M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha),N=M.space===_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__/* .LineMarkerSpace */ .lM.World;D.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .RibbonVertexPosition */ .s,M),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .MarkerSizing */ .r,M),M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Depth&&D.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .OutputDepth */ .L,M);const{vertex:T,fragment:A}=D;return A.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .RgbaFloatEncoding */ .W),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .addProjViewLocalOrigin */ .NB)(T,M),D.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.POSITION,"vec3"),D.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.UV0,"vec2"),D.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.AUXPOS1,"vec3"),D.varyings.add("vColor","vec4"),D.varyings.add("vpos","vec3"),D.varyings.add("vUV","vec2"),D.varyings.add("vSize","float"),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addLinearDepth */ .Mu)(D),k&&D.varyings.add("depth","float"),M.hasTip&&D.varyings.add("vLineWidth","float"),T.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float4PassUniform */ .E("viewport",((e,r)=>r.camera.fullViewport))),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`void clip(vec4 pos, inout vec4 prev) {
float vnp = nearFar[0] * 0.99;
if (prev.z > -nearFar[0]) {
float interpolation = (-vnp - pos.z) / (prev.z - pos.z);
prev = mix(pos, prev, interpolation);
}
}`),N?(D.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.NORMAL,"vec3"),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .addViewNormal */ .S7)(T),T.constants.add("tiltThreshold","float",.7),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec3 perpendicular(vec3 v) {
vec3 n = (viewNormal * vec4(normal.xyz, 1.0)).xyz;
vec3 n2 = cross(v, n);
vec3 forward = vec3(0.0, 0.0, 1.0);
float tiltDot = dot(forward, n);
return abs(tiltDot) < tiltThreshold ? n : n2;
}`)):T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec2 perpendicular(vec2 v) {
return vec2(v.y, -v.x);
}`),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
      #define vecN ${N?"vec3":"vec2"}

      vecN normalizedSegment(vecN pos, vecN prev) {
        vecN segment = pos - prev;
        float segmentLen = length(segment);

        // normalize or zero if too short
        return (segmentLen > 0.001) ? segment / segmentLen : ${N?"vec3(0.0, 0.0, 0.0)":"vec2(0.0, 0.0)"};
      }

      vecN displace(vecN pos, vecN prev, float displacementLen) {
        vecN segment = normalizedSegment(pos, prev);

        vecN displacementDirU = perpendicular(segment);
        vecN displacementDirV = segment;

        ${M.anchor===_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__/* .LineMarkerAnchor */ .kJ.Tip?"pos -= 0.5 * displacementLen * displacementDirV;":""}

        return pos + displacementLen * (uv0.x * displacementDirU + uv0.y * displacementDirV);
      }
    `),M.space===_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__/* .LineMarkerSpace */ .lM.Screen&&(T.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Matrix4PassUniform */ .X("inverseProjectionMatrix",((e,r)=>r.camera.inverseProjectionMatrix))),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec3 inverseProject(vec4 posScreen) {
posScreen.xy = (posScreen.xy / viewport.zw) * posScreen.w;
return (inverseProjectionMatrix * posScreen).xyz;
}`),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`bool rayIntersectPlane(vec3 rayDir, vec3 planeOrigin, vec3 planeNormal, out vec3 intersection) {
float cos = dot(rayDir, planeNormal);
float t = dot(planeOrigin, planeNormal) / cos;
intersection = t * rayDir;
return abs(cos) > 0.001 && t > 0.0;
}`),T.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("perScreenPixelRatio",((e,r)=>r.camera.perScreenPixelRatio))),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
      vec4 toFront(vec4 displacedPosScreen, vec3 posLeft, vec3 posRight, vec3 prev, float lineWidth) {
        // Project displaced position back to camera space
        vec3 displacedPos = inverseProject(displacedPosScreen);

        // Calculate the plane that we want the marker to lie in. Note that this will always be an approximation since ribbon lines are generally
        // not planar and we do not know the actual position of the displaced prev vertices (they are offset in screen space, too).
        vec3 planeNormal = normalize(cross(posLeft - posRight, posLeft - prev));
        vec3 planeOrigin = posLeft;

        ${M.hasCap?"\n                if(prev.z > posLeft.z) {\n                  vec2 diff = posLeft.xy - posRight.xy;\n                  planeOrigin.xy += perpendicular(diff) / 2.0;\n                }\n              ":""};

        // Move the plane towards the camera by a margin dependent on the line width (approximated in world space). This tolerance corrects for the
        // non-planarity in most cases, but sharp joins can place the prev vertices at arbitrary positions so markers can still clip.
        float offset = lineWidth * perScreenPixelRatio;
        planeOrigin *= (1.0 - offset);

        // Intersect camera ray with the plane and make sure it is within clip space
        vec3 rayDir = normalize(displacedPos);
        vec3 intersection;
        if (rayIntersectPlane(rayDir, planeOrigin, planeNormal, intersection) && intersection.z < -nearFar[0] && intersection.z > -nearFar[1]) {
          return vec4(intersection.xyz, 1.0);
        }

        // Fallback: use depth of pos or prev, whichever is closer to the camera
        float minDepth = planeOrigin.z > prev.z ? length(planeOrigin) : length(prev);
        displacedPos *= minDepth / length(displacedPos);
        return vec4(displacedPos.xyz, 1.0);
      }
  `)),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .addPixelRatio */ .Nz)(T),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addCalculateLinearDepth */ .i$)(D),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`void main(void) {
if (uv0.y == 0.0) {
gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
}
else {
float lineWidth = getLineWidth();
float screenMarkerSize = getScreenMarkerSize();
vec4 pos  = view * vec4(position.xyz, 1.0);
vec4 prev = view * vec4(auxpos1.xyz, 1.0);
clip(pos, prev);`),N?(M.hideOnShortSegments&&T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`if (areWorldMarkersHidden(pos, prev)) {
gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
return;
}`),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`pos.xyz = displace(pos.xyz, prev.xyz, getWorldMarkerSize(pos));
vec4 displacedPosScreen = projectAndScale(pos);`)):(T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 posScreen = projectAndScale(pos);
vec4 prevScreen = projectAndScale(prev);
vec4 displacedPosScreen = posScreen;
displacedPosScreen.xy = displace(posScreen.xy, prevScreen.xy, screenMarkerSize);`),M.space===_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__/* .LineMarkerSpace */ .lM.Screen&&T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec2 displacementDirU = perpendicular(normalizedSegment(posScreen.xy, prevScreen.xy));
vec3 lineRight = inverseProject(posScreen + lineWidth * vec4(displacementDirU.xy, 0.0, 0.0));
vec3 lineLeft = pos.xyz + (pos.xyz - lineRight);
pos = toFront(displacedPosScreen, lineLeft, lineRight, prev.xyz, lineWidth);
displacedPosScreen = projectAndScale(pos);`)),T.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
        ${k?"depth = pos.z;":""}
        linearDepth = calculateLinearDepth(nearFar,pos.z);

        // Convert back into NDC
        displacedPosScreen.xy = (displacedPosScreen.xy / viewport.zw) * displacedPosScreen.w;

        // Convert texture coordinate into [0,1]
        vUV = (uv0 + 1.0) / 2.0;

        ${N?"":"vUV *= displacedPosScreen.w;"}

        ${M.hasTip?"vLineWidth = lineWidth;":""}

        vSize = screenMarkerSize;
        vColor = getColor();

        // Use camera space for slicing
        vpos = pos.xyz;

        gl_Position = displacedPosScreen;
      }
    }
  `),k&&D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .multipassTerrainTest */ .Q,M),D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,M),A.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float4PassUniform */ .E("intrinsicColor",(e=>e.color)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Texture2DPassUniform */ .N("tex",(e=>e.markerTexture))),A.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .ColorConversion */ .a),D.constants.add("texelSize","float",1/_views_3d_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerTextureSize */ .vO),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float markerAlpha(vec2 samplePos) {
samplePos += vec2(0.5, -0.5) * texelSize;
float sdf = rgba2float(texture(tex, samplePos)) - 0.5;
float distance = sdf * vSize;
distance -= 0.5;
return clamp(0.5 - distance, 0.0, 1.0);
}`),M.hasTip&&(D.constants.add("relativeMarkerSize","float",_views_3d_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerSymbolSize */ .Cz/_views_3d_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerTextureSize */ .vO),D.constants.add("relativeTipLineWidth","float",_views_3d_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerTipThicknessFactor */ .DZ),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
    float tipAlpha(vec2 samplePos) {
      // Convert coordinates s.t. they are in pixels and relative to the tip of an arrow marker
      samplePos -= vec2(0.5, 0.5 + 0.5 * relativeMarkerSize);
      samplePos *= vSize;

      float halfMarkerSize = 0.5 * relativeMarkerSize * vSize;
      float halfTipLineWidth = 0.5 * max(1.0, relativeTipLineWidth * vLineWidth);

      ${N?"halfTipLineWidth *= fwidth(samplePos.y);":""}

      float distance = max(abs(samplePos.x) - halfMarkerSize, abs(samplePos.y) - halfTipLineWidth);
      return clamp(0.5 - distance, 0.0, 1.0);
    }
  `)),D.constants.add("symbolAlphaCutoff","float",_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_21__/* .symbolAlphaCutoff */ .y),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
  void main() {
    discardBySlice(vpos);
    ${k?"terrainDepthTest(depth);":""}

    vec4 finalColor = intrinsicColor * vColor;

    ${N?"vec2 samplePos = vUV;":"vec2 samplePos = vUV * gl_FragCoord.w;"}

    ${M.hasTip?"finalColor.a *= max(markerAlpha(samplePos), tipAlpha(samplePos));":"finalColor.a *= markerAlpha(samplePos);"}

    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`finalColor.a = 1.0;`:""}

    if (finalColor.a < symbolAlphaCutoff) {
      discard;
    }

    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`fragColor = vec4(finalColor.a);`:""}
    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color&&M.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}
    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Highlight?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`fragColor = vec4(1.0);`:""}
    ${M.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Depth?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`outputDepth(linearDepth);`:""}
  }
  `),D}const D=Object.freeze(Object.defineProperty({__proto__:null,build:M},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 36987:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ m),
/* harmony export */   b: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u(u){const m=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__/* .ShaderBuilder */ .N5,{vertex:p,fragment:w}=m;return m.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Transform */ .d,u),m.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexColor */ .c,u),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .addProjViewLocalOrigin */ .NB)(p,u),m.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,"vec3"),m.varyings.add("vpos","vec3"),p.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`void main(void) {
vpos = position;
forwardNormalizedVertexColor();
gl_Position = transformPosition(proj, view, vpos);
}`),u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Highlight&&m.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .OutputHighlight */ .Qh,u),m.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .SliceDraw */ .HQ,u),w.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .FloatPassUniform */ .m("alphaCoverage",((e,o)=>Math.min(1,e.width*o.camera.pixelRatio)))),u.hasVertexColors||w.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("constantColor",(e=>e.color))),w.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`
  void main() {
    discardBySlice(vpos);

    vec4 color = ${u.hasVertexColors?"vColor":"constantColor"};

    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`color.a = 1.0;`:""}

    if (color.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_11__/* .symbolAlphaCutoff */ .y)}) {
      discard;
    }

    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`fragColor = highlightSlice(color, vpos);`:""}
    ${u.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Highlight?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`outputHighlight();`:""}
  }
  `),m}const m=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 36004:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ d),
/* harmony export */   a: () => (/* binding */ m),
/* harmony export */   b: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36572);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3445);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class d extends _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .NoParameters */ .Y{constructor(){super(...arguments),this.overlayIndex=_views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .OverlayIndex */ .vr.INNER,this.opacity=1}}function l(){const e=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__/* .ShaderBuilder */ .N5;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSpacePass */ .c),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .IntegerPassUniform */ .c("overlayIdx",(e=>e.overlayIndex))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity))),e.fragment.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`void main() {
vec2 overlayUV = overlayIdx == 0 ? vec2(uv.x * 0.5, uv.y) : vec2(uv.x * 0.5 + 0.5, uv.y);
fragColor = texture(tex, overlayUV) * opacity;
}`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,OverlayCompositingPassParameters:d,build:l},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 51305:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ D),
/* harmony export */   b: () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_PathVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10204);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(56178);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(56349);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(75988);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(696);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_Normals_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(46971);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22455);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(64062);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(81868);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function O(O){const D=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__/* .ShaderBuilder */ .N5,{vertex:A,fragment:F}=D;switch((0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addProjViewLocalOrigin */ .NB)(A,O),D.varyings.add("vpos","vec3"),D.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_PathVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .PathVertexPosition */ .H,O),O.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color&&O.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha||(D.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .ReadShadowMapDraw */ .Bz,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ForwardLinearDepth */ .oD,O),D.varyings.add("vnormal","vec3"),D.varyings.add("vcolor","vec4"),O.multipassEnabled&&D.varyings.add("depth","float"),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main() {
        vpos = calculateVPos();
        vnormal = normalize(localNormal());

        ${O.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}
        gl_Position = transformPosition(proj, view, vpos);

        ${O.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color?"forwardLinearDepth();":""}

        vcolor = getColor();
      }
    `)),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .multipassTerrainTest */ .Q,O),O.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha:D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,O),F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity))),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${O.multipassEnabled?"terrainDepthTest(depth);":""}
        float combinedOpacity = vcolor.a * opacity;
        fragColor = vec4(combinedOpacity);
      }
    `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color:D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .EvaluateSceneLighting */ .kA,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .EvaluateAmbientOcclusion */ .n,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .ReadShadowMapDraw */ .Bz,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_Normals_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .Normals */ .r,O),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addCameraPosition */ .yu)(F,O),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addAmbientBoostFactor */ .a8)(F),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addLightingGlobalFactor */ .eU)(F),F.uniforms.add(A.uniforms.get("localOrigin"),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float3PassUniform */ .t("ambient",(e=>e.ambient)),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float3PassUniform */ .t("diffuse",(e=>e.diffuse)),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float3PassUniform */ .t("specular",(e=>e.specular)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity))),F.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .ColorConversion */ .a),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .addMainLightIntensity */ .O4)(F),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
        void main() {
          discardBySlice(vpos);
          ${O.multipassEnabled?"terrainDepthTest(depth);":""}

          shadingParams.viewDirection = normalize(vpos - cameraPosition);
          shadingParams.normalView = vnormal;
          vec3 normal = shadingNormal(shadingParams);
          float ssao = evaluateAmbientOcclusionInverse();

          float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
          vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;
          ${O.receiveShadows?"float shadow = readShadowMap(vpos, linearDepth);":O.spherical?"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);":"float shadow = 0.0;"}
          vec3 albedo = vcolor.rgb * max(ambient, diffuse); // combine the old material parameters into a single one
          float combinedOpacity = vcolor.a * opacity;
          albedo += 0.25 * specular; // don't completely ignore specular for now

          vec3 shadedColor = evaluateSceneLighting(normal, albedo, shadow, 1.0 - ssao, additionalLight);
          fragColor = vec4(shadedColor, combinedOpacity);
          fragColor = highlightSlice(fragColor, vpos);
          ${O.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}
        }
      `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth:case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Shadow:case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ShadowHighlight:case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ShadowExcludeHighlight:D.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,O),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addNearFar */ .xJ)(D),D.varyings.add("depth","float"),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
vpos = calculateVPos();
gl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);
}`),D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .OutputDepth */ .L,O),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
outputDepth(depth);
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Normal:D.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .NormalUtils */ .n,O),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addViewNormal */ .S7)(A),D.varyings.add("vnormal","vec3"),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main(void) {
vpos = calculateVPos();
vnormal = normalize((viewNormal * vec4(localNormal(), 1.0)).xyz);
gl_Position = transformPosition(proj, view, vpos);
}`),D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,O),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
vec3 normal = normalize(vnormal);
if (gl_FrontFacing == false) normal = -normal;
fragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight:D.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .NormalUtils */ .n,O),D.varyings.add("vnormal","vec3"),A.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main(void) {
vpos = calculateVPos();
gl_Position = transformPosition(proj, view, vpos);
}`),D.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,O),D.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .OutputHighlight */ .Qh,O),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
outputHighlight();
}`)}return D}const D=Object.freeze(Object.defineProperty({__proto__:null,build:O},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 10068:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ P),
/* harmony export */   b: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(56178);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(1563);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const S=.70710678118,j=S,C=.08715574274;function x(x){const P=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_14__/* .ShaderBuilder */ .N5,R=x.multipassEnabled&&(x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color||x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha),{vertex:$,fragment:D,attributes:V,varyings:A}=P;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .addProjViewLocalOrigin */ .NB)($,x),P.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,x),P.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexColor */ .c,x),P.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .VisualVariables */ .A,x),x.draped?$.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .FloatPassUniform */ .m("worldToScreenRatio",((e,o)=>1/o.screenToPCSRatio))):V.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.BOUNDINGRECT,"mat3"),V.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.POSITION,"vec3"),V.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.UVMAPSPACE,"vec4"),x.vvColor&&V.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,"float"),A.add("vColor","vec4"),A.add("vpos","vec3"),A.add("vuv","vec2"),R&&A.add("depth","float"),$.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .Float4PassUniform */ .E("uColor",(e=>e.color)));const L=x.style===_views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.ForwardDiagonal||x.style===_views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.BackwardDiagonal||x.style===_views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.DiagonalCross;L&&$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
      const mat2 rotate45 = mat2(${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(S)}, ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(-j)},
                                 ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(j)}, ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(S)});
    `),x.draped||((0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .addCameraPosition */ .yu)($,x),$.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .FloatPassUniform */ .m("worldToScreenPerDistanceRatio",((e,o)=>1/o.camera.perScreenPixelRatio))),$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vec3 projectPointToLineSegment(vec3 center, vec3 halfVector, vec3 point) {
float projectedLength = dot(halfVector, point - center) / dot(halfVector, halfVector);
return center + halfVector * clamp(projectedLength, -1.0, 1.0);
}`),$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vec3 intersectRayPlane(vec3 rayDir, vec3 rayOrigin, vec3 planeNormal, vec3 planePoint) {
float d = dot(planeNormal, planePoint);
float t = (d - dot(planeNormal, rayOrigin)) / dot(planeNormal, rayDir);
return rayOrigin + t * rayDir;
}`),$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
      float boundingRectDistanceToCamera() {
        vec3 center = vec3(boundingRect[0][0], boundingRect[0][1], boundingRect[0][2]);
        vec3 halfU = vec3(boundingRect[1][0], boundingRect[1][1], boundingRect[1][2]);
        vec3 halfV = vec3(boundingRect[2][0], boundingRect[2][1], boundingRect[2][2]);
        vec3 n = normalize(cross(halfU, halfV));

        vec3 viewDir = - vec3(view[0][2], view[1][2], view[2][2]);

        float viewAngle = dot(viewDir, n);
        float minViewAngle = ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(C)};

        if (abs(viewAngle) < minViewAngle) {
          // view direction is (almost) parallel to plane -> clamp it to min angle
          float normalComponent = sign(viewAngle) * minViewAngle - viewAngle;
          viewDir = normalize(viewDir + normalComponent * n);
        }

        // intersect view direction with infinite plane that contains bounding rect
        vec3 planeProjected = intersectRayPlane(viewDir, cameraPosition, n, center);

        // clip to bounds by projecting to u and v line segments individually
        vec3 uProjected = projectPointToLineSegment(center, halfU, planeProjected);
        vec3 vProjected = projectPointToLineSegment(center, halfV, planeProjected);

        // use to calculate the closest point to camera on bounding rect
        vec3 closestPoint = uProjected + vProjected - center;

        return length(closestPoint - cameraPosition);
      }
    `)),$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
    vec2 scaledUV() {
      vec2 uv = uvMapSpace.xy ${L?" * rotate45":""};
      vec2 uvCellOrigin = uvMapSpace.zw ${L?" * rotate45":""};

      ${x.draped?"":(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
            float distanceToCamera = boundingRectDistanceToCamera();
            float worldToScreenRatio = worldToScreenPerDistanceRatio / distanceToCamera;
          `}

      // Logarithmically discretize ratio to avoid jittering
      float step = 0.1;
      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);

      vec2 uvOffset = mod(uvCellOrigin * discreteWorldToScreenRatio, ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(x.patternSpacing)});
      return uvOffset + (uv * discreteWorldToScreenRatio);
    }
  `);const O=x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth;return O&&(P.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .OutputDepth */ .L,x),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addNearFar */ .xJ)(P),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addLinearDepth */ .Mu)(P)),$.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
    void main(void) {
      vuv = scaledUV();
      vpos = position;
      ${R?"depth = (view * vec4(vpos, 1.0)).z;":""}
      forwardNormalizedVertexColor();
      ${x.hasVertexColors?"vColor *= uColor;":x.vvColor?"vColor = uColor * interpolateVVColor(colorFeatureAttribute);":"vColor = uColor;"}
      gl_Position = ${O?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`transformPositionWithDepth(proj, view, vpos, nearFar, linearDepth);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`transformPosition(proj, view, vpos);`}
    }
  `),P.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),D.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .ColorConversion */ .a),x.draped&&D.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .FloatPassUniform */ .m("texelSize",((e,o)=>1/o.camera.pixelRatio))),x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight&&P.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .OutputHighlight */ .Qh,x),R&&P.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .multipassTerrainTest */ .Q,x),x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight&&(D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
      const float lineWidth = ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(x.lineWidth)};
      const float spacing = ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(x.patternSpacing)};
      const float spacingINV = ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(1/x.patternSpacing)};

      float coverage(float p, float txlSize) {
        p = mod(p, spacing);

        float halfTxlSize = txlSize / 2.0;

        float start = p - halfTxlSize;
        float end = p + halfTxlSize;

        float coverage = (ceil(end * spacingINV) - floor(start * spacingINV)) * lineWidth;
        coverage -= min(lineWidth, mod(start, spacing));
        coverage -= max(lineWidth - mod(end, spacing), 0.0);

        return coverage / txlSize;
      }
    `),x.draped||D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`const int maxSamples = 5;
float sampleAA(float p) {
vec2 dxdy = abs(vec2(dFdx(p), dFdy(p)));
float fwidth = dxdy.x + dxdy.y;
ivec2 samples = 1 + ivec2(clamp(dxdy, 0.0, float(maxSamples - 1)));
vec2 invSamples = 1.0 / vec2(samples);
float accumulator = 0.0;
for (int j = 0; j < maxSamples; j++) {
if(j >= samples.y) {
break;
}
for (int i = 0; i < maxSamples; i++) {
if(i >= samples.x) {
break;
}
vec2 step = vec2(i,j) * invSamples - 0.5;
accumulator += coverage(p + step.x * dxdy.x + step.y * dxdy.y, fwidth);
}
}
accumulator /= float(samples.x * samples.y);
return accumulator;
}`)),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
    void main() {
      discardBySlice(vpos);
      ${R?"terrainDepthTest(depth);":""}
      vec4 color = vColor;
      color = highlightSlice(color, vpos);

      ${x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`color.a *= ${T(x)};`:""}

      ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`color.a = 1.0;`:""}

      if (color.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_18__/* .symbolAlphaCutoff */ .y)}) {
        discard;
      }

      ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`fragColor = vec4(color.a);`:""}

      ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`fragColor = color; ${x.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_15__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}`:""}
      ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputHighlight();`:""}
      ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputDepth(linearDepth);`:""};
    }
  `),P}function T(e){function o(o){return e.draped?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`coverage(vuv.${o}, texelSize)`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`sampleAA(vuv.${o})`}switch(e.style){case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.ForwardDiagonal:case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.Horizontal:return o("y");case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.BackwardDiagonal:case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.Vertical:return o("x");case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.DiagonalCross:case _views_3d_webgl_engine_materials_PatternStyle_js__WEBPACK_IMPORTED_MODULE_17__/* .Style */ .O.Cross:return (0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
        1.0 - (1.0 - ${o("x")}) * (1.0 - ${o("y")})
      `;default:return"0.0"}}const P=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 3458:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ R),
/* harmony export */   b: () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Offset_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26163);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24682);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(81283);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99915);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_SymbolColor_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(67691);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(26139);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(54009);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_default_DefaultMaterialAuxiliaryPasses_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(23399);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(56349);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(75988);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(696);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(17666);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(39486);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(64062);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(29724);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(60915);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function I(I){const R=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__/* .ShaderBuilder */ .N5,{vertex:z,fragment:k,varyings:U}=R;return (0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .addProjViewLocalOrigin */ .NB)(z,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .PositionAttribute */ .I),U.add("vpos","vec3"),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_20__/* .VisualVariables */ .A,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .InstancedDoublePrecision */ .BK,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .VerticalOffset */ .G,I),I.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color&&I.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha||((0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .addCameraPosition */ .yu)(R.vertex,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .NormalAttribute */ .Y,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .Transform */ .d,I),I.offsetBackfaces&&R.include(_views_3d_webgl_engine_core_shaderLibrary_Offset_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Offset */ .M),I.instancedColor&&R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_31__/* .VertexAttribute */ .r.INSTANCECOLOR,"vec4"),U.add("vNormalWorld","vec3"),U.add("localvpos","vec3"),I.multipassEnabled&&U.add("depth","float"),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureCoordinateAttribute */ .U,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ForwardLinearDepth */ .oD,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_SymbolColor_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .SymbolColor */ .K,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexColor */ .c,I),z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_25__/* .Float4PassUniform */ .E("externalColor",(e=>e.externalColor))),U.add("vcolorExt","vec4"),z.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
        void main(void) {
          forwardNormalizedVertexColor();
          vcolorExt = externalColor;
          ${I.instancedColor?"vcolorExt *= instanceColor * 0.003921568627451;":""}
          vcolorExt *= vvColor();
          vcolorExt *= getSymbolColor();
          forwardColorMixMode();

          if (vcolorExt.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_32__/* .symbolAlphaCutoff */ .y)}) {
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          } else {
            vpos = getVertexInLocalOriginSpace();
            localvpos = vpos - view[3].xyz;
            vpos = subtractOrigin(vpos);
            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));
            vpos = addVerticalOffset(vpos, localOrigin);
            gl_Position = transformPosition(proj, view, vpos);
            ${I.offsetBackfaces?"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, cameraPosition);":""}
          }
          ${I.multipassEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`depth = (view * vec4(vpos, 1.0)).z;`:""}
          forwardLinearDepth();
          forwardTextureCoordinates();
        }
      `)),I.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Alpha&&(R.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .DiscardOrAdjustAlphaPass */ .S,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .multipassTerrainTest */ .Q,I),k.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_26__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_26__/* .FloatPassUniform */ .m("layerOpacity",(e=>e.layerOpacity))),I.hasColorTexture&&k.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_29__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),k.include(_views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_22__/* .MixExternalColor */ .N),k.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${I.multipassEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`terrainDepthTest(depth);`:""}
        ${I.hasColorTexture?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                vec4 texColor = texture(tex, ${I.hasColorTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`colorUV`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vuv0`});
                ${I.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vec4 texColor = vec4(1.0);`}
        ${I.hasVertexColors?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}

        fragColor = vec4(opacity_);
      }
    `)),I.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_2__/* .ShaderOutput */ .V.Color&&(R.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .SliceDraw */ .HQ,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .EvaluateSceneLighting */ .kA,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .EvaluateAmbientOcclusion */ .n,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .DiscardOrAdjustAlphaPass */ .S,I),R.include(I.instancedDoublePrecision?_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_19__/* .ReadShadowMapPass */ .G:_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_19__/* .ReadShadowMapDraw */ .Bz,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .multipassTerrainTest */ .Q,I),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .addCameraPosition */ .yu)(R.fragment,I),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addMainLightDirection */ .Gc)(k),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .addAmbientBoostFactor */ .a8)(k),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateSceneLighting_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .addLightingGlobalFactor */ .eU)(k),k.uniforms.add(z.uniforms.get("localOrigin"),z.uniforms.get("view"),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_24__/* .Float3PassUniform */ .t("ambient",(e=>e.ambient)),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_24__/* .Float3PassUniform */ .t("diffuse",(e=>e.diffuse)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_26__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_26__/* .FloatPassUniform */ .m("layerOpacity",(e=>e.layerOpacity))),I.hasColorTexture&&k.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_29__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PhysicallyBasedRenderingParameters */ ._Z,I),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_17__/* .PhysicallyBasedRendering */ .c,I),k.include(_views_3d_webgl_engine_core_shaderLibrary_util_MixExternalColor_glsl_js__WEBPACK_IMPORTED_MODULE_22__/* .MixExternalColor */ .N),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addMainLightIntensity */ .O4)(k),k.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${I.multipassEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`terrainDepthTest(depth);`:""}
        ${I.hasColorTexture?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                vec4 texColor = texture(tex, ${I.hasColorTextureTransform?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`colorUV`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vuv0`});
                ${I.textureAlphaPremultiplied?"texColor.rgb /= texColor.a;":""}
                discardOrAdjustAlpha(texColor);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vec4 texColor = vec4(1.0);`}
        vec3 viewDirection = normalize(vpos - cameraPosition);
        ${I.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PBRMode */ .A9.Normal?"applyPBRFactors();":""}
        float ssao = evaluateAmbientOcclusionInverse();
        ssao *= getBakedOcclusion();

        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);
        vec3 additionalLight = ssao * mainLightIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;
        ${I.receiveShadows?"float shadow = readShadowMap(vpos, linearDepth);":I.spherical?"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);":"float shadow = 0.0;"}
        vec3 matColor = max(ambient, diffuse);
        ${I.hasVertexColors?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                vec3 albedo = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                vec3 albedo = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));
                float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));`}
        ${I.snowCover?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`albedo = mix(albedo, vec3(1), 0.9);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)``}
        ${(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
            vec3 shadingNormal = normalize(vNormalWorld);
            albedo *= 1.2;
            vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);
            float alignmentLightView = clamp(dot(viewForward, -mainLightDirection), 0.0, 1.0);
            float transmittance = 1.0 - clamp(dot(viewForward, shadingNormal), 0.0, 1.0);
            float treeRadialFalloff = vColor.r;
            float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);
            additionalLight += backLightFactor * mainLightIntensity;`}
        ${I.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PBRMode */ .A9.Normal||I.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PBRMode */ .A9.Schematic?I.spherical?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vec3 normalGround = normalize(vpos + localOrigin);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)``}
        ${I.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PBRMode */ .A9.Normal||I.pbrMode===_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .PBRMode */ .A9.Schematic?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * mainLightIntensity[2];
                ${I.snowCover?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`
                        mrr = vec3(0.0, 1.0, 0.04);
                        emission = vec3(0.0);`:""}

                vec3 shadedColor = evaluateSceneLightingPBR(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`vec3 shadedColor = evaluateSceneLighting(shadingNormal, albedo, shadow, 1.0 - ssao, additionalLight);`}
        fragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);
        ${I.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_30__/* .TransparencyPassType */ .y.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)`fragColor = premultiplyAlpha(fragColor);`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_27__/* .glsl */ .H)``}
      }
    `)),R.include(_views_3d_webgl_engine_core_shaderLibrary_default_DefaultMaterialAuxiliaryPasses_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .DefaultMaterialAuxiliaryPasses */ .E,I),R}const R=Object.freeze(Object.defineProperty({__proto__:null,build:I},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 50126:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ R),
/* harmony export */   b: () => (/* binding */ A),
/* harmony export */   r: () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56289);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(56178);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6821);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2119);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(66579);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(20778);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(58376);
/* harmony import */ var _views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(16906);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const j=1;function A(A){const R=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_17__/* .ShaderBuilder */ .N5,{vertex:P,fragment:F}=R,z=A.multipassEnabled&&(A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color||A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha);R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .PiUtils */ .p),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .RibbonVertexPosition */ .s,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .LineStipple */ .q,A);const E=A.applyMarkerOffset&&!A.draped;E&&(P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("markerScale",(e=>e.markerScale))),R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .MarkerSizing */ .r,{space:_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_20__/* .LineMarkerSpace */ .lM.World,draped:!1})),A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth&&R.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .OutputDepth */ .L,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .ObjectAndLayerIdColor */ .g,A),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .addProjViewLocalOrigin */ .NB)(P,A),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Matrix4PassUniform */ .X("inverseProjectionMatrix",((e,i)=>i.camera.inverseProjectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float2PassUniform */ .G("nearFar",((e,i)=>i.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .Float4PassUniform */ .E("viewport",((e,i)=>i.camera.fullViewport))),P.constants.add("LARGE_HALF_FLOAT","float",65500),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.POSITION,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.SUBDIVISIONFACTOR,"float"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.UV0,"vec2"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.AUXPOS1,"vec3"),R.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_19__/* .VertexAttribute */ .r.AUXPOS2,"vec3"),R.varyings.add("vColor","vec4"),R.varyings.add("vpos","vec3"),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addLinearDepth */ .Mu)(R),z&&R.varyings.add("depth","float");const T=A.stippleEnabled;T&&R.varyings.add("vLineSizeInv","float");const W=A.capType===_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__/* .CapType */ .x.ROUND,V=T||W;V&&R.varyings.add("vLineWidth","float");const O=A.innerColorEnabled||W;O&&R.varyings.add("vLineDistance","float");const N=A.stippleEnabled&&W,I=A.falloffEnabled||N;I&&R.varyings.add("vLineDistanceNorm","float"),W&&(R.varyings.add("vSegmentSDF","float"),R.varyings.add("vReverseSegmentSDF","float")),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),(0,_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addCalculateLinearDepth */ .i$)(R),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${z?"depth = pos.z;":""}
      linearDepth = calculateLinearDepth(nearFar,pos.z);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .addPixelRatio */ .Nz)(P),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${V?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vLineWidth = lineWidth;`:""}
      ${T?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);
  `),E&&P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`);(A.stippleEnabled||W)&&P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${W?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),A.roundJoins?P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${A.stippleEnabled?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`min(1.0, subdivisionFactor * ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H.float((j+2)/(j+1))})`:(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);const $=A.capType!==_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_21__/* .CapType */ .x.BUTT;return P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${$?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${I||O?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${O?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${I?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),W&&P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),A.stippleEnabled&&(A.draped?P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("worldToScreenRatio",((e,i)=>1/i.screenToPCSRatio))):P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),A.draped?P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),P.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .computePixelSize */ .h)(e)))),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`)),P.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${A.wireframe&&!A.draped?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }
  }
  `),z&&R.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .multipassTerrainTest */ .Q,A),R.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,A),F.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .ColorConversion */ .a),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
  void main() {
    discardBySlice(vpos);
    ${z?"terrainDepthTest(depth);":""}
  `),A.wireframe?F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(W&&F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
        discard;
      }
    `),N?F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}, stippleCoverage);
      `):F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float stippleAlpha = getStippleAlpha();`),A.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor&&F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);`),F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .Float4PassUniform */ .E("intrinsicColor",(e=>e.color))),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec4 color = intrinsicColor * vColor;`),A.innerColorEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .Float4PassUniform */ .E("innerColor",(e=>e.innerColor??e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("innerWidth",((e,i)=>e.innerWidth*i.camera.pixelRatio))),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`vec4 finalColor = blendStipple(color, stippleAlpha);`),A.falloffEnabled&&(F.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .FloatPassUniform */ .m("falloff",(e=>e.falloff))),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`))),F.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`finalColor.a = 1.0;`:""}

    if (finalColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
      discard;
    }

    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`fragColor = vec4(finalColor.a);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color&&A.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_18__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`fragColor = vec4(1.0);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`outputDepth(linearDepth);`:""}
    ${A.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .glsl */ .H)`outputObjectAndLayerIdColor();`:""}
  }
  `),R}const R=Object.freeze(Object.defineProperty({__proto__:null,build:A,ribbonlineNumRoundJoinSubdivisions:j},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 51522:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ p),
/* harmony export */   b: () => (/* binding */ f),
/* harmony export */   g: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78286);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67726);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_CameraSpace_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1062);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=16;function f(){const r=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_8__/* .ShaderBuilder */ .N5,f=r.fragment;return r.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ScreenSpacePass */ .c),f.include(_views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .ReadLinearDepth */ .D),r.include(_views_3d_webgl_engine_core_shaderLibrary_util_CameraSpace_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .CameraSpace */ .Ir),f.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .FloatPassUniform */ .m("radius",((e,r)=>d(r.camera)))),f.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 sphere[16];
void fillSphere() {
sphere[0] = vec3(0.186937, 0.0, 0.0);
sphere[1] = vec3(0.700542, 0.0, 0.0);
sphere[2] = vec3(-0.864858, -0.481795, -0.111713);
sphere[3] = vec3(-0.624773, 0.102853, -0.730153);
sphere[4] = vec3(-0.387172, 0.260319, 0.007229);
sphere[5] = vec3(-0.222367, -0.642631, -0.707697);
sphere[6] = vec3(-0.01336, -0.014956, 0.169662);
sphere[7] = vec3(0.122575, 0.1544, -0.456944);
sphere[8] = vec3(-0.177141, 0.85997, -0.42346);
sphere[9] = vec3(-0.131631, 0.814545, 0.524355);
sphere[10] = vec3(-0.779469, 0.007991, 0.624833);
sphere[11] = vec3(0.308092, 0.209288,0.35969);
sphere[12] = vec3(0.359331, -0.184533, -0.377458);
sphere[13] = vec3(0.192633, -0.482999, -0.065284);
sphere[14] = vec3(0.233538, 0.293706, -0.055139);
sphere[15] = vec3(0.417709, -0.386701, 0.442449);
}
float fallOffFunction(float vv, float vn, float bias) {
float f = max(radius * radius - vv, 0.0);
return f * f * f * max(vn - bias, 0.0);
}`),f.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {
vec3 v = Q - C;
float vv = dot(v, v);
float vn = dot(normalize(v), n_C);
return fallOffFunction(vv, vn, 0.1);
}`),f.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("normalMap",(e=>e.normalTexture)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("depthMap",(e=>e.depthTexture)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .FloatPassUniform */ .m("projScale",(e=>e.projScale)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("rnm",(e=>e.noiseTexture)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float2PassUniform */ .G("rnmScale",((r,t)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(m,t.camera.fullWidth/r.noiseTexture.descriptor.width,t.camera.fullHeight/r.noiseTexture.descriptor.height))),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .FloatPassUniform */ .m("intensity",(e=>e.intensity)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float2PassUniform */ .G("screenSize",((r,t)=>(0,_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(m,t.camera.fullWidth,t.camera.fullHeight)))),r.outputs.add("fragOcclusion","float"),f.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`
    void main(void) {
      fillSphere();
      vec3 fres = normalize(2.0 * texture(rnm, uv * rnmScale).xyz - 1.0);
      float currentPixelDepth = linearDepthFromTexture(depthMap, uv, nearFar);

      if (-currentPixelDepth > nearFar.y || -currentPixelDepth < nearFar.x) {
        fragOcclusion = 0.0;
        return;
      }

      vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy, currentPixelDepth);

      // get the normal of current fragment
      vec4 norm4 = texture(normalMap, uv);
      vec3 norm = vec3(-1.0) + 2.0 * norm4.xyz;
      bool isTerrain = norm4.w < 0.5;

      float sum = 0.0;
      vec3 tapPixelPos;

      // note: the factor 2.0 should not be necessary, but makes ssao much nicer.
      // bug or deviation from CE somewhere else?
      float ps = projScale / (2.0 * currentPixelPos.z * zScale.x + zScale.y);

      for(int i = 0; i < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H.int(u)}; ++i) {
        vec2 unitOffset = reflect(sphere[i], fres).xy;
        vec2 offset = vec2(-unitOffset * radius * ps);

        //don't use current or very nearby samples
        if( abs(offset.x) < 2.0 || abs(offset.y) < 2.0){
          continue;
        }

        vec2 tc = vec2(gl_FragCoord.xy + offset);
        if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;
        vec2 tcTap = tc / screenSize;
        float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap, nearFar);

        if (isTerrain) {
          if (texture(normalMap, tcTap).w < 0.5) {
            continue;
          }
        }

        tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);

        sum += aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);
      }

      // output the result
      float A = max(1.0 - sum * intensity / float(${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H.int(u)}), 0.0);

      // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4) / 2.2
      A = (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;

      fragOcclusion = A;
    }
  `),r}function d(e){return Math.max(10,20*e.computeScreenPixelSizeAtDist(Math.abs(4*e.relativeElevation)))}const m=(0,_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),p=Object.freeze(Object.defineProperty({__proto__:null,build:f,getRadius:d},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 45789:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ c),
/* harmony export */   b: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67726);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96320);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(52293);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f=4;function u(){const u=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_7__/* .ShaderBuilder */ .N5,c=u.fragment;u.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSpacePass */ .c);const m=(f+1)/2,p=1/(2*m*m);return c.include(_views_3d_webgl_engine_core_shaderLibrary_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ReadLinearDepth */ .D),c.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("depthMap",(e=>e.depthTexture)),new _views_3d_webgl_engine_core_shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture2DDrawUniform */ .o("tex",(e=>e.colorTexture)),new _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float2DrawUniform */ .t("blurSize",(e=>e.blurSize)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatPassUniform */ .m("projScale",((r,o)=>{const t=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(o.camera.eye,o.camera.center);return t>5e4?Math.max(0,r.projScale-(t-5e4)):r.projScale})),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar))),c.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {
      float c = texture(tex, uv).r;
      float d = linearDepthFromTexture(depthMap, uv, nearFar);

      float ddiff = d - center_d;

      float w = exp(-r * r * ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H.float(p)} - ddiff * ddiff * sharpness);
      wTotal += w;
      bTotal += w * c;
    }
  `),u.outputs.add("fragBlur","float"),c.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    void main(void) {
      float b = 0.0;
      float w_total = 0.0;

      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);

      float sharpness = -0.05 * projScale / center_d;
      for (int r = -${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H.int(f)}; r <= ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H.int(f)}; ++r) {
        float rf = float(r);
        vec2 uvOffset = uv + rf * blurSize;
        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);
      }

      fragBlur = b / w_total;
    }
  `),u}const c=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 52377:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ i),
/* harmony export */   a: () => (/* binding */ d),
/* harmony export */   b: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _vec4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52712);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .NoParameters */ .Y{constructor(){super(...arguments),this.color=(0,_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,1,1,1)}}function l(){const e=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderBuilder */ .N5;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSpacePass */ .c),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float4PassUniform */ .E("uColor",(e=>e.color))),e.fragment.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void main() {
vec4 texColor = texture(tex, uv);
fragColor = texColor * uColor;
}`),e}const d=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:i,build:l},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 33006:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ M),
/* harmony export */   b: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63269);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52636);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(696);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80600);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22455);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(39486);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(64062);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(65554);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(41679);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(33448);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(99152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(4274);
/* harmony import */ var _views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(81868);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function x(x){const M=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__/* .ShaderBuilder */ .N5,{vertex:D,fragment:N}=M;(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addProjViewLocalOrigin */ .NB)(D,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,x),M.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__/* .VertexAttribute */ .r.POSITION,"vec3"),M.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_21__/* .VertexAttribute */ .r.UV0,"vec2");const O=new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .Float4PassUniform */ .E("waterColor",(e=>e.color));if(x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color&&x.isDraped)return M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vpos = position;
          gl_Position = transformPosition(proj, view, vpos);
        }
    `),N.uniforms.add(O),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
fragColor = waterColor;
}`),M;switch(x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color&&x.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha||(M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .NormalUtils */ .n,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ForwardLinearDepth */ .oD,x),M.varyings.add("vuv","vec2"),M.varyings.add("vpos","vec3"),M.varyings.add("vnormal","vec3"),M.varyings.add("vtbnMatrix","mat3"),x.multipassEnabled&&M.varyings.add("depth","float"),D.uniforms.add(O),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vuv = uv0;
        vpos = position;

        vnormal = getLocalUp(vpos, localOrigin);
        vtbnMatrix = getTBNMatrix(vnormal);

        ${x.multipassEnabled?"depth = (view * vec4(vpos, 1.0)).z;":""}

        gl_Position = transformPosition(proj, view, vpos);
        ${x.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color?"forwardLinearDepth();":""}
      }
    `)),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .multipassTerrainTest */ .Q,x),x.output){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Alpha:M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),N.uniforms.add(O),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
        void main() {
          discardBySlice(vpos);
          ${x.multipassEnabled?"terrainDepthTest(depth);":""}

          fragColor = vec4(waterColor.a);
        }
      `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color:M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .MainLighting */ .qU),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .EvaluateAmbientLighting */ .W,{pbrMode:_views_3d_webgl_engine_core_shaderLibrary_shading_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .PBRMode */ .A9.Disabled,lightingSphericalHarmonicsOrder:2}),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .WaterDistortion */ .V),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .ReadShadowMapDraw */ .Bz,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_Water_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .Water */ .E,x),N.uniforms.add(O,new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("timeElapsed",(e=>e.timeElapsed)),D.uniforms.get("view"),D.uniforms.get("localOrigin")),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addCameraPosition */ .yu)(N,x),N.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .ColorConversion */ .a),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .addMainLightDirection */ .Gc)(N),(0,_views_3d_webgl_engine_core_shaderLibrary_shading_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .addMainLightIntensity */ .O4)(N),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main() {
        discardBySlice(vpos);
        ${x.multipassEnabled?"terrainDepthTest(depth);":""}
        vec3 localUp = vnormal;
        // the created normal is in tangent space
        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);

        // we rotate the normal according to the tangent-bitangent-normal-Matrix
        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);
        vec3 v = -normalize(vpos - cameraPosition);
        float shadow = ${x.receiveShadows?(0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`1.0 - readShadowMap(vpos, linearDepth)`:"1.0"};
        vec4 vPosView = view * vec4(vpos, 1.0);
        vec4 final = vec4(getSeaColor(n, v, mainLightDirection, waterColor.rgb, mainLightIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz, vpos + localOrigin), waterColor.w);

        // gamma correction
        fragColor = delinearizeGamma(final);
        fragColor = highlightSlice(fragColor, vpos);
        ${x.transparencyPassType===_views_3d_webgl_engine_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_20__/* .TransparencyPassType */ .y.Color?"fragColor = premultiplyAlpha(fragColor);":""}
      }
    `);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Normal:M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_NormalUtils_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .NormalUtils */ .n,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_shading_WaterDistortion_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .WaterDistortion */ .V,x),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),M.varyings.add("vpos","vec3"),M.varyings.add("vuv","vec2"),D.uniforms.add(O),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
        void main(void) {
          if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
            // Discard this vertex
            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
            return;
          }

          vuv = uv0;
          vpos = position;

          gl_Position = transformPosition(proj, view, vpos);
        }
    `),N.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("timeElapsed",(e=>e.timeElapsed))),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);
tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);
fragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight:M.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .OutputHighlight */ .Qh,x),M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
      }
    `),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
outputHighlight();
}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor:M.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .ObjectAndLayerIdColor */ .g,x),M.varyings.add("vpos","vec3"),D.uniforms.add(O),D.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      void main(void) {
        if (waterColor.a < ${_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H.float(_views_3d_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .symbolAlphaCutoff */ .y)}) {
          // Discard this vertex
          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
          return;
        }

        vpos = position;
        gl_Position = transformPosition(proj, view, vpos);
        forwardObjectAndLayerIdColor();
      }
    `),M.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),N.code.add((0,_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`void main() {
discardBySlice(vpos);
outputObjectAndLayerIdColor();
}`)}return M}const M=Object.freeze(Object.defineProperty({__proto__:null,build:x},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 28769:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ W),
/* harmony export */   c: () => (/* binding */ Z),
/* harmony export */   g: () => (/* binding */ $),
/* harmony export */   h: () => (/* binding */ as),
/* harmony export */   u: () => (/* binding */ J)
/* harmony export */ });
/* unused harmony exports A, B, C, b, d, e, f, i, j, k, l, m, n, o, p, q, r, s, t, v, w, x, y, z */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92504);
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(92114);
/* harmony import */ var _mat4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(37046);
/* harmony import */ var _mat4f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(56192);
/* harmony import */ var _vec3_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21839);
/* harmony import */ var _vec3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22279);
/* harmony import */ var _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58331);
/* harmony import */ var _geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(22759);
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(38774);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32532);
/* harmony import */ var _geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16597);
/* harmony import */ var _geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const U=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class z{constructor(){this.plane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt)(),this.origin=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.basis1=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.basis2=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)()}}const G=z;function W(s=Ns){return{plane:(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt)(s.plane),origin:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.g)(s.origin),basis1:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.g)(s.basis1),basis2:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.g)(s.basis2)}}function X(s,t,i){const n=Ts.get();return n.origin=s,n.basis1=t,n.basis2=i,n.plane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .wrap */ .LV)(0,0,0,0),J(n),n}function Z(s,t=W()){return H(s.origin,s.basis1,s.basis2,t)}function D(s,t){(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.origin,s.origin),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.basis1,s.basis1),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.basis2,s.basis2),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .copy */ .C)(t.plane,s.plane)}function H(s,t,i,n=W()){return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.origin,s),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.basis1,t),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.basis2,i),J(n),Ps(n,"fromValues()"),n}function J(s){(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .fromVectorsAndPoint */ .mR)(s.basis2,s.basis1,s.origin,s.plane)}function K(s,t,i){s!==i&&Z(s,i);const n=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),ds(s),t);return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(i.origin,i.origin,n),i.plane[3]-=t,i}function Q(s,t,i){return $(t,i),K(i,bs(s,s.origin),i),i}function $(s,t=W()){const i=(s[2]-s[0])/2,n=(s[3]-s[1])/2;return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.s)(t.origin,s[0]+i,s[1]+n,0),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.s)(t.basis1,i,0,0),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.s)(t.basis2,0,n,0),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .fromValues */ .fA)(0,0,1,0,t.plane),t}function ss(s,t,i){return!!(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .intersectRay */ .Ui)(s.plane,t,i)&&js(s,i)}function ts(s,t,i){if(ss(s,t,i))return i;const n=is(s,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get());return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(i,t.origin,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),t.direction,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.o)(t.origin,n)/(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.l)(t.direction))),i}function is(s,i,n){const o=ws.get();vs(s,i,o,ws.get());let r=Number.POSITIVE_INFINITY;for(const e of As){const c=ys(s,e,Ms.get()),u=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get();if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .intersectLineSegment */ .T7)(o,c,u)){const s=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.C)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),i.origin,u),o=Math.abs((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .acosClamped */ .XM)((0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(i.direction,s)));o<r&&(r=o,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(n,u))}}return r===Number.POSITIVE_INFINITY?ns(s,i,n):n}function ns(s,t,i){if(ss(s,t,i))return i;const n=ws.get(),o=ws.get();vs(s,t,n,o);let r=Number.POSITIVE_INFINITY;for(const e of As){const c=ys(s,e,Ms.get()),u=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get();if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .intersectLineSegmentClamp */ .gv)(n,c,u)){const s=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_10__/* .distance2 */ .kb)(t,u);if(!(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .isPointInside */ .Tj)(o,u))continue;s<r&&(r=s,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,u))}}return es(s,t.origin)<r&&os(s,t.origin,i),i}function os(s,t,i){const n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .projectPoint */ ._I)(s.plane,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get()),o=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_8__/* .projectPointClamp */ .H6)(Is(s,s.basis1),n,-1,1,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get()),r=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_8__/* .projectPointClamp */ .H6)(Is(s,s.basis2),n,-1,1,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get());return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.f)(i,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),o,r),s.origin),i}function rs(s,t,i){const{origin:n,basis1:o,basis2:r}=s,e=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.f)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),t,n),a=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_11__/* .projectPointSignedLength */ .gr)(o,e),c=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_11__/* .projectPointSignedLength */ .gr)(r,e),u=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_11__/* .projectPointSignedLength */ .gr)(ds(s),e);return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.s)(i,a,c,u)}function es(s,t){const i=rs(s,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get()),{basis1:n,basis2:o}=s,r=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.l)(n),e=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.l)(o),a=Math.max(Math.abs(i[0])-r,0),c=Math.max(Math.abs(i[1])-e,0),u=i[2];return a*a+c*c+u*u}function as(s,t){return Math.sqrt(es(s,t))}function cs(s,t){let i=Number.NEGATIVE_INFINITY;for(const n of As){const o=ys(s,n,Ms.get()),r=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_8__/* .distance2 */ .kb)(o,t);r>i&&(i=r)}return Math.sqrt(i)}function us(s,t){return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .isPointInside */ .Tj)(s.plane,t)&&js(s,t)}function gs(s,t,i,n){return hs(s,i,n)}function bs(s,t){const i=-s.plane[3];return (0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_11__/* .projectPointSignedLength */ .gr)(ds(s),t)-i}function fs(s,t,i,n){const o=bs(s,t),r=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(Ss,ds(s),i-o);return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(n,t,r),n}function ps(s,t){return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.h)(s.basis1,t.basis1)&&(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.h)(s.basis2,t.basis2)&&(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.h)(s.origin,t.origin)}function ls(s,t,i){return s!==i&&Z(s,i),(0,_mat4_js__WEBPACK_IMPORTED_MODULE_3__.i)(xs,t),(0,_mat4_js__WEBPACK_IMPORTED_MODULE_3__.t)(xs,xs),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)(i.basis1,s.basis1,xs),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)(i.basis2,s.basis2,xs),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .normal */ .qb)(i.plane),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .normal */ .qb)(s.plane),xs),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)(i.origin,s.origin,t),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .setOffsetFromPoint */ .mP)(i.plane,i.plane,i.origin),i}function ms(s,t,i,n){return s!==n&&Z(s,n),(0,_mat4_js__WEBPACK_IMPORTED_MODULE_3__.c)(Vs,t,i),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)(n.basis1,s.basis1,Vs),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.e)(n.basis2,s.basis2,Vs),J(n),n}function ds(s){return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .normal */ .qb)(s.plane)}function hs(s,t,i){switch(t){case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_7__/* .Axis */ ._.X:(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,s.basis1),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.n)(i,i);break;case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_7__/* .Axis */ ._.Y:(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,s.basis2),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.n)(i,i);break;case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_7__/* .Axis */ ._.Z:(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,ds(s))}return i}function js(s,t){const i=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.f)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),t,s.origin),n=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.m)(s.basis1),o=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.m)(s.basis2),r=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(s.basis1,i),e=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(s.basis2,i);return-r-n<0&&r-n<0&&-e-o<0&&e-o<0}function Is(s,t){const i=Ms.get();return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i.origin,s.origin),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.c)(i.vector,t),i}function ys(s,t,i){const{basis1:n,basis2:o,origin:r}=s,e=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),n,t.origin[0]),a=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),o,t.origin[1]);(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(i.origin,e,a),(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(i.origin,i.origin,r);const g=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),n,t.direction[0]),b=(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_12__/* .sv3d */ .rq.get(),o,t.direction[1]);return (0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.i)(i.vector,(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.g)(g,g,b),2),i}function Ps(s,t){Math.abs((0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(s.basis1,s.basis2)/((0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.l)(s.basis1)*(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.l)(s.basis2)))>1e-6&&U.warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(s.basis1,ds(s)))>1e-6&&U.warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,_vec3_js__WEBPACK_IMPORTED_MODULE_5__.j)(ds(s),s.origin)-s.plane[3])>1e-6&&U.warn(t,"Plane offset is not consistent with plane origin")}function vs(s,t,i,n){const o=ds(s);(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .fromVectorsAndPoint */ .mR)(o,t.direction,t.origin,i),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .fromVectorsAndPoint */ .mR)((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .normal */ .qb)(i),o,t.origin,n)}const Ns={plane:(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt)(),origin:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.f)(0,0,0),basis1:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.f)(1,0,0),basis2:(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.f)(0,1,0)},ws=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_13__/* .ObjectStack */ .I(_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt),Ms=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_13__/* .ObjectStack */ .I(_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_8__/* .create */ .vt),Ss=(0,_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),Ts=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_13__/* .ObjectStack */ .I((()=>W())),As=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],xs=(0,_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__.a)(),Vs=(0,_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__.a)(),_s=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:G,altitudeAt:bs,axisAt:gs,closestPoint:ns,closestPointOnSilhouette:is,copy:Z,copyWithoutVerify:D,create:W,distance:as,distance2:es,distanceToSilhouette:cs,elevate:K,equals:ps,extrusionContainsPoint:us,fromAABoundingRect:$,fromValues:H,intersectRay:ss,intersectRayClosestSilhouette:ts,normal:ds,projectPoint:os,projectPointLocal:rs,rotate:ms,setAltitudeAt:fs,setExtent:Q,transform:ls,up:Ns,updateUnboundedPlane:J,wrap:X},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 16528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(42784);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n,t,r,x={exports:{}};x.exports,n=x,t=function(){function e(e,t,x){x=x||2;var i,u,v,o,y,p,a,l=t&&t.length,h=l?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s||s.next===s.prev)return c;if(l&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=o=e[1];for(var Z=x;Z<h;Z+=x)(y=e[Z])<i&&(i=y),(p=e[Z+1])<u&&(u=p),y>v&&(v=y),p>o&&(o=p);a=0!==(a=Math.max(v-i,o-u))?1/a:0}return r(s,c,x,i,u,a),c}function n(e,n,t,r,x){var i,u;if(x===C(e,n,t,r)>0)for(i=n;i<t;i+=r)u=q(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=q(i,e[i],e[i+1],u);if(u&&m(u,u.next)){var v=u.next;A(u),u=v}return u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{var x=r.prev;if(A(r),(r=n=x)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,o,y,p,a){if(e){!a&&p&&h(e,o,y,p);for(var l,s,c=e;e.prev!==e.next;)if(l=e.prev,s=e.next,p?i(e,o,y,p):x(e))n.push(l.i/f),n.push(e.i/f),n.push(s.i/f),A(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(t(e),n,f),n,f,o,y,p,2):2===a&&v(e,n,f,o,y,p):r(t(e),n,f,o,y,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(w(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(g(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,o=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,y=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=c(v,f,n,t,r),a=c(o,y,n,t,r),l=e.prevZ,h=e.nextZ;l&&l.z>=p&&h&&h.z<=a;){if(l!==e.prev&&l!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&w(l.prev,l,l.next)>=0)return!1;if(l=l.prevZ,h!==e.prev&&h!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;l&&l.z>=p;){if(l!==e.prev&&l!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&w(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;h&&h.z<=a;){if(h!==e.prev&&h!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!m(i,u)&&M(i,x,x.next,u)&&j(i,u)&&j(u,i)&&(n.push(i.i/r),n.push(x.i/r),n.push(u.i/r),A(x),A(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var o=f.next.next;o!==f.prev;){if(f.i!==o.i&&d(f,o)){var y=_(f,o);return f=t(f,f.next),y=t(y,y.next),r(f,n,x,i,u,v),void r(y,n,x,i,u,v)}o=o.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,y=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),y.push(Z(f));for(y.sort(o),u=0;u<y.length;u++)x=t(x=p(y[u],x),x.next);return x}function o(e,n){return e.x-n.x}function y(e){if(e.next.prev===e)return e;let n=e;for(;;){const t=n.next;if(t.prev===n||t===n||t===e)break;n=t}return n}function p(e,n){var r=a(e,n);if(!r)return n;var x=_(r,e),i=t(r,r.next);let u=y(x);return t(u,u.next),i=y(i),y(n===r?i:n)}function a(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t;var f,o=t,y=t.x,p=t.y,a=1/0;r=t;do{x>=r.x&&r.x>=y&&x!==r.x&&g(i<p?x:u,i,y,p,i<p?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),j(r,e)&&(f<a||f===a&&(r.x>t.x||r.x===t.x&&l(t,r)))&&(t=r,a=f)),r=r.next}while(r!==o);return t}function l(e,n){return w(e.prev,e,n.prev)<0&&w(n.next,e,e.next)<0}function h(e,n,t,r){var x=e;do{null===x.z&&(x.z=c(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,s(x)}function s(e){var n,t,r,x,i,u,v,f,o=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<o&&(v++,r=r.nextZ);n++);for(f=o;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,o*=2}while(u>1);return e}function c(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Z(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function g(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!k(e,n)&&(j(e,n)&&j(n,e)&&H(e,n)&&(w(e.prev,e,n.prev)||w(e,n.prev,n))||m(e,n)&&w(e.prev,e,e.next)>0&&w(n.prev,n,n.next)>0)}function w(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function m(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=b(w(e,n,t)),i=b(w(e,n,r)),u=b(w(t,r,e)),v=b(w(t,r,n));return x!==i&&u!==v||!(0!==x||!z(e,t,n))||!(0!==i||!z(e,r,n))||!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function b(e){return e>0?1:e<0?-1:0}function k(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function j(e,n){return w(e.prev,e,e.next)<0?w(e,n,e.next)>=0&&w(e,e.prev,n)>=0:w(e,n,e.prev)<0||w(e,e.next,n)<0}function H(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function _(e,n){var t=new B(e.i,e.x,e.y),r=new B(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function q(e,n,t,r){var x=new B(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}return e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(C(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var o=n[v]*t,y=v<f-1?n[v+1]*t:e.length;u-=Math.abs(C(e,o,y,t))}var p=0;for(v=0;v<r.length;v+=3){var a=r[v]*t,l=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[a]-e[h])*(e[l+1]-e[a+1])-(e[a]-e[l])*(e[h+1]-e[a+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t},e},void 0!==(r=t())&&(n.exports=r);const i=(0,_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__.g)(x.exports);


/***/ }),

/***/ 3192:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony export s */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,t){const o=e.count;t||(t=new e.TypedArrayConstructor(o));for(let r=0;r<o;r++)t[r]=e.get(r);return t}const t=Object.freeze(Object.defineProperty({__proto__:null,makeDense:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 56016:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ o),
/* harmony export */   f: () => (/* binding */ l),
/* harmony export */   n: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony export v */
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(e,t){n(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function n(o,n,l=2,u=l){const i=n.length/2;let a=0,d=0;if((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(n)||(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isFloat */ .dk)(n)){for(let e=0;e<i;++e)o[a]=n[d],o[a+1]=n[d+1],a+=l,d+=u;return}const c=(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .maximumValue */ .a3)(n);if((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isSigned */ .JI)(n))for(let e=0;e<i;++e)o[a]=Math.max(n[d]/c,-1),o[a+1]=Math.max(n[d+1]/c,-1),a+=l,d+=u;else for(let e=0;e<i;++e)o[a]=n[d]/c,o[a+1]=n[d+1]/c,a+=l,d+=u}function l(e,t,r,f){const o=e.typedBuffer,n=e.typedBufferStride,l=f?.count??e.count;let u=(f?.dstIndex??0)*n;for(let i=0;i<l;++i)o[u]=t,o[u+1]=r,u+=n}const u=Object.freeze(Object.defineProperty({__proto__:null,fill:l,normalizeIntegerBuffer:n,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 24121:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ n),
/* harmony export */   b: () => (/* binding */ f),
/* harmony export */   c: () => (/* binding */ t),
/* harmony export */   d: () => (/* binding */ i),
/* harmony export */   e: () => (/* binding */ o),
/* harmony export */   n: () => (/* binding */ s),
/* harmony export */   s: () => (/* binding */ u),
/* harmony export */   t: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports f, v */
/* harmony import */ var _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64521);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(e,t,f){r(e.typedBuffer,t.typedBuffer,f,e.typedBufferStride,t.typedBufferStride)}function r(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__/* .mathLogger */ .J.error("source and destination buffers need to have the same number of elements"),t;const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[4],c=f[5],l=f[6],p=f[8],y=f[9],h=f[10],m=f[12],B=f[13],g=f[14];let S=0,M=0;for(let e=0;e<u;e++){const e=r[S],f=r[S+1],u=r[S+2];t[M]=i*e+d*f+p*u+m,t[M+1]=s*e+c*f+y*u+B,t[M+2]=a*e+l*f+h*u+g,S+=o,M+=n}return t}function f(e,t,r){n(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function n(t,r,f,n=3,o=n){if(t.length/n!==Math.ceil(r.length/o))return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__/* .mathLogger */ .J.error("source and destination buffers need to have the same number of elements");const u=t.length/n,i=f[0],s=f[1],a=f[2],d=f[3],c=f[4],l=f[5],p=f[6],y=f[7],h=f[8];let m=0,B=0;for(let e=0;e<u;e++){const e=r[m],f=r[m+1],u=r[m+2];t[B]=i*e+d*f+p*u,t[B+1]=s*e+c*f+y*u,t[B+2]=a*e+l*f+h*u,m+=o,B+=n}}function o(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r,f=3){const n=Math.min(e.length/f,t.count),o=t.typedBuffer,u=t.typedBufferStride;let i=0,s=0;for(let a=0;a<n;a++)e[s]=r*o[i],e[s+1]=r*o[i+1],e[s+2]=r*o[i+2],i+=u,s+=f}function i(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=3,f=r){const n=Math.min(e.length/r,t.length/f);let o=0,u=0;for(let i=0;i<n;i++){const n=t[o],i=t[o+1],s=t[o+2],a=n*n+i*i+s*s;if(a>0){const t=1/Math.sqrt(a);e[u]=t*n,e[u+1]=t*i,e[u+2]=t*s}o+=f,u+=r}}function a(e,t,r){const f=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,i=t.typedBufferStride;let s=0,a=0;for(let d=0;d<f;d++)n[a]=u[s]>>r,n[a+1]=u[s+1]>>r,n[a+2]=u[s+2]>>r,s+=i,a+=o}const d=Object.freeze(Object.defineProperty({__proto__:null,normalize:s,normalizeView:i,scale:u,scaleView:o,shiftRight:a,transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 53866:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ e),
/* harmony export */   c: () => (/* binding */ t),
/* harmony export */   f: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony export v */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,f){t(e.typedBuffer,f.typedBuffer,e.typedBufferStride,f.typedBufferStride)}function t(e,t,f=3,o=f){const r=t.length/o;let n=0,u=0;for(let c=0;c<r;++c)e[n]=t[u],e[n+1]=t[u+1],e[n+2]=t[u+2],n+=f,u+=o}function f(e,t,f,o,r){const n=e.typedBuffer,u=e.typedBufferStride,c=r?.count??e.count;let d=(r?.dstIndex??0)*u;for(let l=0;l<c;++l)n[d]=t,n[d+1]=f,n[d+2]=o,d+=u}const o=Object.freeze(Object.defineProperty({__proto__:null,copy:t,copyView:e,fill:f},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 80952:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ t),
/* harmony export */   c: () => (/* binding */ n),
/* harmony export */   f: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports O, U, Z, b, d, e, g, h, o, u, v, z */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function e(n,t){return new Float32Array(n,t,3)}function a(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function s(){return r(0,1,0)}function c(){return r(0,0,1)}const i=a(),f=o(),l=u(),_=s(),y=c(),w=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:_,UNIT_Z:y,ZEROS:i,clone:t,create:n,createView:e,fromValues:r,ones:o,unitX:u,unitY:s,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 2662:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ r),
/* harmony export */   b: () => (/* binding */ o),
/* harmony export */   n: () => (/* binding */ n),
/* harmony export */   s: () => (/* binding */ u),
/* harmony export */   t: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony exports c, v */
/* harmony import */ var _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64521);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,r,f){if(t.count!==r.count)return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__/* .mathLogger */ .J.error("source and destination buffers need to have the same number of elements");const n=t.count,o=f[0],u=f[1],s=f[2],d=f[3],a=f[4],i=f[5],c=f[6],p=f[7],l=f[8],m=f[9],y=f[10],B=f[11],h=f[12],S=f[13],b=f[14],g=f[15],M=t.typedBuffer,v=t.typedBufferStride,_=r.typedBuffer,j=r.typedBufferStride;for(let e=0;e<n;e++){const t=e*v,r=e*j,f=_[r],n=_[r+1],w=_[r+2],z=_[r+3];M[t]=o*f+a*n+l*w+h*z,M[t+1]=u*f+i*n+m*w+S*z,M[t+2]=s*f+c*n+y*w+b*z,M[t+3]=d*f+p*n+B*w+g*z}}function r(e,t,r){f(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function f(t,r,f,n=4,o=n){if(t.length/n!=r.length/o)return void _geometry_support_buffer_math_common_js__WEBPACK_IMPORTED_MODULE_0__/* .mathLogger */ .J.error("source and destination buffers need to have the same number of elements");const u=t.length/n,s=f[0],d=f[1],a=f[2],i=f[3],c=f[4],p=f[5],l=f[6],m=f[7],y=f[8];let B=0,h=0;for(let e=0;e<u;e++){const e=r[B],f=r[B+1],u=r[B+2],S=r[B+3];t[h]=s*e+i*f+l*u,t[h+1]=d*e+c*f+m*u,t[h+2]=a*e+p*f+y*u,t[h+3]=S,B+=o,h+=n}}function n(e,t){const r=Math.min(e.count,t.count),f=e.typedBuffer,n=e.typedBufferStride,o=t.typedBuffer,u=t.typedBufferStride;for(let s=0;s<r;s++){const e=s*n,t=s*u,r=o[t],d=o[t+1],a=o[t+2],i=r*r+d*d+a*a;if(i>0){const t=1/Math.sqrt(i);f[e]=t*r,f[e+1]=t*d,f[e+2]=t*a}}}function o(e,t,r){u(e.typedBuffer,t,r,e.typedBufferStride)}function u(e,t,r,f=4){const n=Math.min(e.length/f,t.count),o=t.typedBuffer,u=t.typedBufferStride;let s=0,d=0;for(let a=0;a<n;a++)e[d]=r*o[s],e[d+1]=r*o[s+1],e[d+2]=r*o[s+2],e[d+3]=r*o[s+3],s+=u,d+=f}const s=Object.freeze(Object.defineProperty({__proto__:null,normalize:n,scale:u,scaleView:o,transformMat3:f,transformMat3View:r,transformMat4:t},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 33381:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ e),
/* harmony export */   c: () => (/* binding */ t),
/* harmony export */   f: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony export v */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,f){t(e.typedBuffer,f,e.typedBufferStride)}function t(e,t,f=4){const o=t.typedBuffer,r=t.typedBufferStride,n=t.count;let u=0,c=0;for(let d=0;d<n;++d)e[u]=o[c],e[u+1]=o[c+1],e[u+2]=o[c+2],e[u+3]=o[c+3],u+=f,c+=r}function f(e,t,f,o,r,n){const u=e.typedBuffer,c=e.typedBufferStride,d=n?.count??e.count;let l=(n?.dstIndex??0)*c;for(let p=0;p<d;++p)u[l]=t,u[l+1]=f,u[l+2]=o,u[l+3]=r,l+=c}const o=Object.freeze(Object.defineProperty({__proto__:null,copy:t,copyView:e,fill:f},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 6660:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _MemCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40210);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class c{constructor(e,t){this._cache=e(t,((e,t)=>this._remove(e,t)))}hitrate(){return this._cache.hitRate}destroy(){this._cache.destroy()}clear(){this._cache.clear()}pop(e){const t=this._cache.peek(e);if(!t)return;const c=t.pop();if(t.length>0){const c=t.reduce(((e,t)=>e+t.usedMemory),0);this._cache.updateSize(e,t,c)}else this._cache.pop(e);return c}put(t,c,s=_MemCache_js__WEBPACK_IMPORTED_MODULE_0__/* .minPriority */ .Xs){const r=this._cache.peek(t);if(!r)return void this._cache.put(t,[c],c.usedMemory,s);r.push(c);const h=r.reduce(((e,t)=>e+t.usedMemory),0);this._cache.updateSize(t,r,h)}_remove(e,c){switch(c){case _MemCache_js__WEBPACK_IMPORTED_MODULE_0__/* .RemoveMode */ .k2.ALL:return e.forEach((e=>e.dispose())),0;case _MemCache_js__WEBPACK_IMPORTED_MODULE_0__/* .RemoveMode */ .k2.SOME:return e.shift()?.dispose(),e.reduce(((e,t)=>e+t.usedMemory),0)}}}


/***/ }),

/***/ 80912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(t,e){return this._outer.get(t)?.get(e)}set(t,e,r){const s=this._outer.get(t);s?s.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){const r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((e,r)=>t(e,r)))}}


/***/ }),

/***/ 51859:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ r),
/* harmony export */   U: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}


/***/ }),

/***/ 72777:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Al: () => (/* binding */ c),
/* harmony export */   NZ: () => (/* binding */ i),
/* harmony export */   Vb: () => (/* binding */ t),
/* harmony export */   af: () => (/* binding */ u),
/* harmony export */   rK: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony export clearFonts */
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21121);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t="arial-unicode-ms",n="woff2",r=new Map,s=new Set;class o{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(t){const c=f(t),a=r.get(c);if(a)return a.promise;const i=new FontFace(t.family,`url('${_config_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fontsUrl}/woff2/${c}.${n}') format('${n}')`,{style:t.style,weight:t.weight}),u=document.fonts;if(u.has(i)&&"loading"===i.status)return i.loaded;const l=i.load().then((()=>(u.add(i),i)));return r.set(c,new o(i,l)),s.add(i),l}function a(){const e=document.fonts;r.forEach((t=>{e.delete(t.fontFace)})),r.clear(),s.clear()}function i(e){return s.has(e)}function u(e){if(!e)return t;const n=e.toLowerCase().split(" ").join("-");switch(n){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return n}}function f(e){const t=l(e)+d(e);return u(e.family)+(t.length>0?t:"-regular")}function l(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function d(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}


/***/ }),

/***/ 4486:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   w: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony export BBox */
/* harmony import */ var _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63678);
/* harmony import */ var _chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(45973);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t=9,i){this._compareMinX=o,this._compareMinY=l,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),p.prune(),g.prune(),M.prune(),X.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(x(t,n))for(p.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;x(t,a)&&(n.leaf?i(h):_(t,a)?this._all(h,i):p.push(h))}n=p.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!x(t,i))return!1;for(p.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(x(t,h)){if(i.leaf||_(t,h))return!0;p.push(s)}}i=p.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(i){if(!i)return this;let n,e=this._data,s=null,h=0,a=!1;const r=this._toBBox(i);for(M.clear(),X.clear();e||M.length>0;){if(e||(e=M.pop(),s=M.data[M.length-1],h=X.pop()??0,a=!0),e.leaf&&(n=(0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .indexOf */ .qh)(e.children,i,e.children.length,e.indexHint),-1!==n))return e.children.splice(n,1),M.push(e),this._condense(M),this;a||e.leaf||!_(e,r)?s?(h++,e=s.children[h],a=!1):e=null:(M.push(e),X.push(h),h=0,s=e,e=e.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(g.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else g.pushArray(n.children);n=g.pop()??null}}_build(t,i,n,e){const s=n-i+1;let a=this._maxEntries;if(s<=a){const e=new w(t.slice(i,n+1));return h(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/a**(e-1)));const r=new b([]);r.height=e;const o=Math.ceil(s/a),l=o*Math.ceil(Math.sqrt(a));f(t,i,n,l,this._compareMinX);for(let h=i;h<=n;h+=l){const i=Math.min(h+l-1,n);f(t,h,i,o,this._compareMinY);for(let n=h;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return h(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=c(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);M.clear();const h=this._chooseSubtree(s,this._data,i,M);for(h.children.push(t),r(h,s);i>=0&&M.data[i].children.length>this._maxEntries;)this._split(M,i),i--;this._adjustParentBBoxes(s,M,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const a=this._chooseSplitIndex(n,s,e);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(a,n.children.length-a),o=n.leaf?new w(r):new b(r);o.height=n.height,h(n,this._toBBox),h(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new b([t,i]),this._data.height=t.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let r=i;r<=n-i;r++){const i=a(t,0,r,this._toBBox),o=a(t,r,n,this._toBBox),l=u(i,o),m=c(i)+c(o);l<e?(e=l,h=r,s=m<s?m:s):l===e&&m<s&&(s=m,h=r)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:o,s=t.leaf?this._compareMinY:l;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=a(t,0,i,s),o=a(t,n-i,n,s);let l=m(h)+m(o);for(let a=i;a<n-i;a++){const i=t.children[a];r(h,t.leaf?s(i):i),l+=m(h)}for(let a=n-i-1;a>=i;a--){const i=t.children[a];r(o,t.leaf?s(i):i),l+=m(o)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)r(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice((0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .indexOf */ .qh)(h,e,h.length,s.indexHint),1)}else this.clear();else h(e,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this._compareMinX=new Function("a","b",i.join(t[0])),this._compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function h(t,i){a(t,0,t.children.length,i,t)}function a(t,i,n,e,s){s||(s=new w([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],r(s,t.leaf?e(h):h);return s}function r(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function o(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function _(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function x(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function f(t,i,n,s,h){const a=[i,n];for(;a.length;){const i=a.pop(),n=a.pop();if(i-n<=s)continue;const r=n+Math.ceil((i-n)/s/2)*s;(0,_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,r,n,i,h),a.push(n,r,r,i)}}const p=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,g=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,M=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,X=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .PositionHint */ .vW}}class w extends B{constructor(t){super(),this.children=t,this.leaf=!0}}class b extends B{constructor(t){super(),this.children=t,this.leaf=!1}}


/***/ }),

/***/ 42609:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/* harmony import */ var _projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84119);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(o,e,c,f=0){t[0]=o.x,t[1]=o.y;const n=o.z;return t[2]=void 0!==n?n:f,(0,_projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__.projectBuffer)(t,o.spatialReference,0,e,c,0,1)}const t=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)();


/***/ }),

/***/ 80715:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/* harmony import */ var _projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84119);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(r,o,c){return (0,_projectBuffer_js__WEBPACK_IMPORTED_MODULE_1__.projectBuffer)(r,o,0,t,c.spatialReference,0,1)?(c.x=t[0],c.y=t[1],c.z=t[2],c):null}const t=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)();


/***/ }),

/***/ 90166:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ns: () => (/* binding */ y),
/* harmony export */   jh: () => (/* binding */ t),
/* harmony export */   l5: () => (/* binding */ a),
/* harmony export */   s: () => (/* binding */ o),
/* harmony export */   xm: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?t?new Array(n).fill(0):new Array(n):new Float64Array(n)}function e(t){return((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(t)?t.length:t.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?Array.from(t):new Float64Array(t)}function a(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}function o(r,n){for(let t=0;t<n.length;++t)r[t]=n[t];return r}function y(r){return Array.isArray(r)?new Float64Array(r):r}


/***/ }),

/***/ 50961:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AK: () => (/* binding */ o),
/* harmony export */   Wz: () => (/* binding */ a),
/* harmony export */   oe: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export compactFloatArray */
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?t?new Array(n).fill(0):new Array(n):new Float32Array(n)}function e(t){return n(t)?t.length<r?t:new Float32Array(t):t.length<r?Array.from(t):t}function a(t){return((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(t)?t.length:t.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?Array.from(t):new Float32Array(t)}function o(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}


/***/ }),

/***/ 42965:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dg: () => (/* binding */ t),
/* harmony export */   EH: () => (/* binding */ A),
/* harmony export */   JH: () => (/* binding */ f),
/* harmony export */   my: () => (/* binding */ i),
/* harmony export */   tM: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t){if((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(t)){if(t.length<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return t}else if(t.length<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return Array.from(t);let i=!0,f=!0;return t.some(((r,n)=>(i=i&&0===r,f=f&&r===n,!i&&!f))),i?A(t.length):f?l(t.length):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(t)||t.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?e(t):t}function e(n){let t=!0;for(const e of n){if(e>=65536)return (0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isArray */ .cy)(n)?new Uint32Array(n):n;e>=256&&(t=!1)}return t?new Uint8Array(n):new Uint16Array(n)}function i(r){return r<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?new Array(r):r<=65536?new Uint16Array(r):new Uint32Array(r)}function f(r){return r<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?new Array(r):new Uint32Array(r)}let a=(()=>{const r=new Uint32Array(131072);for(let n=0;n<r.length;++n)r[n]=n;return r})();const u=[0],o=(()=>{const r=new Uint16Array(65536);for(let n=0;n<r.length;++n)r[n]=n;return r})();function l(r){if(1===r)return u;if(r<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return Array.from(new Uint16Array(o.buffer,0,r));if(r<o.length)return new Uint16Array(o.buffer,0,r);if(r>a.length){const n=Math.max(2*a.length,r);a=new Uint32Array(n);for(let r=0;r<a.length;r++)a[r]=r}return new Uint32Array(a.buffer,0,r)}let y=new Uint8Array(65536);function A(r){if(1===r)return u;if(r<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return new Array(r).fill(0);if(r>y.length){const n=Math.max(2*y.length,r);y=new Uint8Array(n)}return new Uint8Array(y.buffer,0,r)}


/***/ }),

/***/ 21104:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4130);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73446);
/* harmony import */ var _MeshMaterial_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(78118);
/* harmony import */ var _MeshMaterialMetallicRoughness_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(93413);
/* harmony import */ var _MeshVertexAttributes_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29796);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var p;const u="esri.geometry.support.MeshComponent",h=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.getLogger(u);let f=p=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{static from(t){return (0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__/* .ensureClass */ .PZ)(p,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(t){return (0,_MeshVertexAttributes_js__WEBPACK_IMPORTED_MODULE_10__/* .castArray */ .b)(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},h)}castMaterial(t){return (0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__/* .ensureClass */ .PZ)(t&&"object"==typeof t&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?_MeshMaterialMetallicRoughness_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A:_MeshMaterial_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,t)}clone(){return new p({faces:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.faces),shading:this.shading,material:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,r){const s={faces:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,r):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new p(s)}get memoryUsage(){let t=0;return null!=this.faces&&(t+=this.faces.byteLength),null!=this.material&&(t+=this.material.memoryUsage),t}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:!0}})],f.prototype,"faces",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("faces")],f.prototype,"castFaces",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:_MeshMaterial_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],f.prototype,"material",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("material")],f.prototype,"castMaterial",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],f.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:String,json:{write:!0}})],f.prototype,"shading",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:Boolean})],f.prototype,"trustSourceNormals",void 0),f=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)(u)],f);const g=f;


/***/ }),

/***/ 29317:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22279);
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(78632);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let a=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* .ClonableMixin */ .O)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY)){constructor(e){super(e),this.type="georeferenced-relative",this.isRelative=!0,this.isGeoreferenced=!0,this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.c)()}getOriginPoint(e){const[r,o,t]=this.origin;return new _Point_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A({x:r,y:o,z:t,spatialReference:e})}setOriginFromPoint({x:e,y:r,z:o}){this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.f)(e,r,o??0)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__/* .enumeration */ .e)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],a.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"origin",void 0),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],a);const m=a;


/***/ }),

/***/ 97557:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(98849);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* .ClonableMixin */ .O)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY)){constructor(){super({}),this.type="georeferenced",this.isRelative=!1,this.isGeoreferenced=!0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_8__/* .enumeration */ .e)({georeferenced:"georeferenced"},{readOnly:!0})],c.prototype,"type",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__/* .subclass */ .$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],c);const p=c;


/***/ }),

/***/ 99218:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22279);
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(78632);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let n=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* .ClonableMixin */ .O)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY)){constructor(o){super(o),this.type="local",this.isRelative=!0,this.isGeoreferenced=!1,this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.c)()}getOriginPoint(o){const[r,e,s]=this.origin;return new _Point_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A({x:r,y:e,z:s,spatialReference:o})}setOriginFromPoint({x:o,y:r,z:e}){this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__.f)(o,r,e??0)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__/* .enumeration */ .e)({local:"local"},{readOnly:!0})],n.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],n.prototype,"origin",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.geometry.support.MeshLocalVertexSpace")],n);const m=n;


/***/ }),

/***/ 78118:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96220);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/* harmony import */ var _MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(34804);
/* harmony import */ var _MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(94578);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n;let u=n=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY{constructor(o){super(o),this.color=null,this.colorTexture=null,this.colorTextureTransform=null,this.normalTexture=void 0,this.normalTextureTransform=void 0,this.alphaMode="auto",this.alphaCutoff=.5,this.doubleSided=!0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(o,r){const e=null!=o?o.get(this):null;if(e)return e;const t=new n(this.clonePropertiesWithDeduplication(r));return null!=o&&o.set(this,t),t}clonePropertiesWithDeduplication(o){return{color:null!=this.color?this.color.clone():null,colorTexture:this.colorTexture?.cloneWithDeduplication(o),normalTexture:this.normalTexture?.cloneWithDeduplication(o),alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,doubleSided:this.doubleSided,colorTextureTransform:this.colorTextureTransform?.clone(),normalTextureTransform:this.normalTextureTransform?.clone()}}get memoryUsage(){return this.getMemoryUsage()}getMemoryUsage(){let o=0;return o+=null!=this.color?16:0,null!=this.colorTexture&&(o+=this.colorTexture.memoryUsage),o+=null!=this.colorTextureTransform?20:0,null!=this.normalTexture&&(o+=this.normalTexture.memoryUsage),o+=null!=this.normalTextureTransform?20:0,o}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"color",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"colorTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"colorTextureTransform",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"normalTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"normalTextureTransform",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({nonNullable:!0,json:{write:!0}})],u.prototype,"alphaMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({nonNullable:!0,json:{write:!0}})],u.prototype,"alphaCutoff",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({nonNullable:!0,json:{write:!0}})],u.prototype,"doubleSided",void 0),u=n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.geometry.support.MeshMaterial")],u);const a=u;


/***/ }),

/***/ 93413:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96220);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _MeshMaterial_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(78118);
/* harmony import */ var _MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(34804);
/* harmony import */ var _MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(94578);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n;let u=n=class extends _MeshMaterial_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A{constructor(e){super(e),this.emissiveColor=null,this.emissiveTexture=null,this.emissiveTextureTransform=void 0,this.occlusionTexture=null,this.occlusionTextureTransform=void 0,this.metallic=1,this.roughness=1,this.metallicRoughnessTexture=null,this.metallicRoughnessTextureTransform=void 0}clone(){return this.cloneWithDeduplication(null,new Map)}cloneWithDeduplication(e,s){const t=null!=e?e.get(this):null;if(t)return t;const o=new n(this.clonePropertiesWithDeduplication(s));return null!=e&&e.set(this,o),o}getMemoryUsage(){let e=super.getMemoryUsage();return e+=null!=this.emissiveColor?16:0,null!=this.emissiveTexture&&(e+=this.emissiveTexture.memoryUsage),e+=null!=this.emissiveTextureTransform?20:0,null!=this.occlusionTexture&&(e+=this.occlusionTexture.memoryUsage),e+=null!=this.occlusionTextureTransform?20:0,null!=this.metallicRoughnessTexture&&(e+=this.metallicRoughnessTexture.memoryUsage),e+=null!=this.metallicRoughnessTextureTransform?20:0,e}clonePropertiesWithDeduplication(e){return{...super.clonePropertiesWithDeduplication(e),emissiveColor:this.emissiveColor?.clone(),emissiveTexture:this.emissiveTexture?.cloneWithDeduplication(e),emissiveTextureTransform:this.emissiveTextureTransform?.clone(),occlusionTexture:this.occlusionTexture?.cloneWithDeduplication(e),occlusionTextureTransform:this.occlusionTextureTransform?.clone(),metallic:this.metallic,roughness:this.roughness,metallicRoughnessTexture:this.metallicRoughnessTexture?.cloneWithDeduplication(e),metallicRoughnessTextureTransform:this.metallicRoughnessTextureTransform?.clone()}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"emissiveColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"emissiveTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"emissiveTextureTransform",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"occlusionTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"occlusionTextureTransform",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],u.prototype,"metallic",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,nonNullable:!0,json:{write:!0},range:{min:0,max:1}})],u.prototype,"roughness",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTexture_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"metallicRoughnessTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:_MeshTextureTransform_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"metallicRoughnessTextureTransform",void 0),u=n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.geometry.support.MeshMaterialMetallicRoughness")],u);const c=u;


/***/ }),

/***/ 34804:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_imageUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25801);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(85569);
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(75094);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(77542);
/* harmony import */ var _chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63680);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var p;const h=new WeakMap;let d=0,u=p=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__/* .JSONSupport */ .oY{constructor(t){super(t),this.wrap="repeat"}get url(){return this._get("url")||null}set url(t){this._set("url",t),t&&this._set("data",null)}get data(){return this._get("data")||null}set data(t){this._set("data",t),t&&this._set("url",null)}writeData(t,e,a,r){if(t instanceof HTMLImageElement){const s={type:"image-element",src:(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_10__.t)(t.src,r),crossOrigin:t.crossOrigin};e[a]=s}else if(t instanceof HTMLCanvasElement){const r=t.getContext("2d").getImageData(0,0,t.width,t.height),s={type:"canvas-element",imageData:this._encodeImageData(r)};e[a]=s}else if(t instanceof HTMLVideoElement){const s={type:"video-element",src:(0,_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_10__.t)(t.src,r),autoplay:t.autoplay,loop:t.loop,muted:t.muted,crossOrigin:t.crossOrigin,preload:t.preload};e[a]=s}else if(t instanceof ImageData){const r={type:"image-data",imageData:this._encodeImageData(t)};e[a]=r}}readData(t){switch(t.type){case"image-element":{const e=new Image;return e.src=t.src,e.crossOrigin=t.crossOrigin,e}case"canvas-element":{const e=this._decodeImageData(t.imageData),a=document.createElement("canvas");return a.width=e.width,a.height=e.height,a.getContext("2d").putImageData(e,0,0),a}case"image-data":return this._decodeImageData(t.imageData);case"video-element":{const e=document.createElement("video");return e.src=t.src,e.crossOrigin=t.crossOrigin,e.autoplay=t.autoplay,e.loop=t.loop,e.muted=t.muted,e.preload=t.preload,e}default:return}}get transparent(){const t=this.data,e=this.url;if(t instanceof HTMLCanvasElement)return this._imageDataContainsTransparent(t.getContext("2d").getImageData(0,0,t.width,t.height));if(t instanceof ImageData)return this._imageDataContainsTransparent(t);if(e){const t=e.substr(e.length-4,4).toLowerCase(),a=e.substr(0,15).toLocaleLowerCase();if(".png"===t||"data:image/png;"===a)return!0}return!1}set transparent(t){this._overrideIfSome("transparent",t)}get contentHash(){const t="string"==typeof this.wrap?this.wrap:"object"==typeof this.wrap?`${this.wrap.horizontal}/${this.wrap.vertical}`:"",e=(e="")=>`d:${e},t:${this.transparent},w:${t}`;return null!=this.url?e(this.url):null!=this.data?this.data instanceof HTMLImageElement||this.data instanceof HTMLVideoElement?e(this.data.src):(h.has(this.data)||h.set(this.data,++d),e(h.get(this.data))):e()}get memoryUsage(){let t=0;if(t+=null!=this.url?this.url.length:0,null!=this.data){const e=this.data;"data"in e?t+=e.data.byteLength:e instanceof HTMLImageElement?t+=e.naturalWidth*e.naturalHeight*3:e instanceof HTMLCanvasElement&&(t+=e.width*e.height*3)}return t}clone(){const t={url:this.url,data:this.data,wrap:this._cloneWrap()};return new p(t)}cloneWithDeduplication(t){const e=t.get(this);if(e)return e;const a=this.clone();return t.set(this,a),a}_cloneWrap(){return"string"==typeof this.wrap?this.wrap:{horizontal:this.wrap.horizontal,vertical:this.wrap.vertical}}_encodeImageData(t){let e="";for(let a=0;a<t.data.length;a++)e+=String.fromCharCode(t.data[a]);return{data:btoa(e),width:t.width,height:t.height}}_decodeImageData(t){const a=atob(t.data),r=new Uint8ClampedArray(a.length);for(let e=0;e<a.length;e++)r[e]=a.charCodeAt(e);return (0,_core_imageUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .wrapImageData */ .eV)(r,t.width,t.height)}_imageDataContainsTransparent(t){for(let e=3;e<t.data.length;e+=4)if(255!==t.data[e])return!0;return!1}static from(t){return"string"==typeof t?new p({url:t}):t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData||t instanceof HTMLVideoElement?new p({data:t}):(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__/* .ensureClass */ .PZ)(p,t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:String,json:{write:_chunks_persistableUrlUtils_js__WEBPACK_IMPORTED_MODULE_10__.w}})],u.prototype,"url",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:{overridePolicy(){return{enabled:!this.url}}}}}),(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],u.prototype,"data",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_writer_js__WEBPACK_IMPORTED_MODULE_9__/* .writer */ .K)("data")],u.prototype,"writeData",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__/* .reader */ .w)("data")],u.prototype,"readData",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:Boolean,json:{write:{overridePolicy(){return{enabled:this._isOverridden("transparent")}}}}})],u.prototype,"transparent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:!0}})],u.prototype,"wrap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({readOnly:!0})],u.prototype,"contentHash",null),u=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.geometry.support.MeshTexture")],u);const m=u;


/***/ }),

/***/ 94578:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let p=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* .ClonableMixin */ .O)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY)){constructor(o){super(o),this.offset=[0,0],this.rotation=0,this.scale=[1,1]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],p.prototype,"offset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:Number,nonNullable:!0,json:{write:!0}})],p.prototype,"rotation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],p.prototype,"scale",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.geometry.support.MeshTextureTransform")],p);const c=p;


/***/ }),

/***/ 8695:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ N)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(56192);
/* harmony import */ var _chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(76743);
/* harmony import */ var _chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(46991);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22279);
/* harmony import */ var _axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(69175);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var v;let b=v=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(t){super(t),this.translation=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)(),this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.e)(_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__.up),this.rotationAngle=0,this.scale=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.f)(1,1,1)}get rotation(){return (0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__/* .fromAxisAndAngle */ .i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)((0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__/* .axis */ .yo)(t)),this.rotationAngle=(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__/* .angle */ .g7)(t)}get localMatrix(){const t=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)();return (0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_9__.s)(M,(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__/* .axis */ .yo)(this.rotation),(0,_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_13__/* .angleRad */ .$I)(this.rotation)),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.f)(t,M,this.translation,this.scale),t}get localMatrixInverse(){return (0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.i)((0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_8__.a)(),this.localMatrix)}applyLocal(t,o){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrix)}applyLocalInverse(t,o){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.e)(o,t,this.localMatrixInverse)}equals(t){return this===t||null!=t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_7__.e)(this.localMatrix,t.localMatrix)}clone(){const t={translation:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.translation),rotationAxis:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.rotationAxis),rotationAngle:this.rotationAngle,scale:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.g)(this.scale)};return new v(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"translation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAxis",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,nonNullable:!0,json:{write:!0}})],b.prototype,"rotationAngle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],b.prototype,"scale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],b.prototype,"rotation",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],b.prototype,"localMatrix",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],b.prototype,"localMatrixInverse",null),b=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.geometry.support.MeshTransform")],b);const M=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_10__.a)(),N=b;


/***/ }),

/***/ 29796:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ p),
/* harmony export */   b: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4130);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var i;const l="esri.geometry.support.MeshVertexAttributes",c=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.getLogger(l);let p=i=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return g(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},c)}castPosition(t){t&&t instanceof Float32Array&&c.warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return g(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},c)}castUv(t){return g(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},c)}castNormal(t){return g(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},c)}castTangent(t){return g(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},c)}clone(){const t={position:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.position),uv:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.uv),normal:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.normal),tangent:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.tangent),color:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.color)};return new i(t)}clonePositional(){const t={position:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.position),normal:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.normal),tangent:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.tangent),uv:this.uv,color:this.color};return new i(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,null!=this.uv&&(t+=this.uv.byteLength),null!=this.normal&&(t+=this.normal.byteLength),null!=this.tangent&&(t+=this.tangent.byteLength),null!=this.color&&(t+=this.color.byteLength),t}};function u(t,o,r,n){const{loggerTag:e,stride:s}=o;return t.length%s!=0?(n.error(e,`Invalid array length, expected a multiple of ${s}`),new r([])):t}function g(t,o,r,n,e){if(!t)return t;if(t instanceof o)return u(t,n,o,e);for(const s of r)if(t instanceof s)return u(new o(t),n,o,e);if(Array.isArray(t))return u(new o(t),n,o,e);{const n=r.map((t=>`'${t.name}'`));return e.error(`Failed to set property, expected one of ${n}, but got ${t.constructor.name}`),new o([])}}function y(t,o,r){o[r]=m(t)}function m(t){const o=new Array(t.length);for(let r=0;r<t.length;r++)o[r]=t[r];return o}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:y}})],p.prototype,"color",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("color")],p.prototype,"castColor",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({nonNullable:!0,json:{write:y}})],p.prototype,"position",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("position")],p.prototype,"castPosition",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:y}})],p.prototype,"uv",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("uv")],p.prototype,"castUv",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:y}})],p.prototype,"normal",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("normal")],p.prototype,"castNormal",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({json:{write:y}})],p.prototype,"tangent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("tangent")],p.prototype,"castTangent",null),p=i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)(l)],p);


/***/ }),

/***/ 69175:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $I: () => (/* binding */ w),
/* harmony export */   AU: () => (/* binding */ g),
/* harmony export */   Cr: () => (/* binding */ v),
/* harmony export */   Zz: () => (/* binding */ U),
/* harmony export */   g7: () => (/* binding */ x),
/* harmony export */   i4: () => (/* binding */ q),
/* harmony export */   up: () => (/* binding */ z),
/* harmony export */   vt: () => (/* binding */ h),
/* harmony export */   yo: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony exports copy, fromValues, setAngle, wrap, wrapAxisAngle */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76743);
/* harmony import */ var _chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46991);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22279);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function h(n=z){return[n[0],n[1],n[2],n[3]]}function j(n,r,t,u){return d(n,r,t,u,C)}function k(n,r){return d(n[0],n[1],n[2],r,C)}function b(n,r=h()){return d(n[0],n[1],n[2],n[3],r)}function d(n,r,t,u,o=h()){return o[0]=n,o[1]=r,o[2]=t,o[3]=u,o}function q(n,r,t=h()){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(l(t),n),t[3]=r,t}function v(n,r,t=h()){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,n,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(t,t),t[3]=-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.d)(n,r),t}function U(r,s,c=h()){return (0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(A,l(r),w(r)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.s)(B,l(s),w(s)),(0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.m)(A,B,A),y(c,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .rad2deg */ .KJ)((0,_chunks_quat_js__WEBPACK_IMPORTED_MODULE_1__.g)(l(c),A)))}function g(n,r,t,u=h()){return q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.U,n,D),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.b,r,E),q(_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.d,t,F),U(D,E,D),U(D,F,u),u}function l(n){return n}function x(n){return n[3]}function w(n){return (0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(n[3])}function y(n,r){return n[3]=r,n}const z=[0,0,1,0],A=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),B=(0,_chunks_quatf64_js__WEBPACK_IMPORTED_MODULE_2__.a)(),C=h(),D=h(),E=h(),F=h();


/***/ }),

/***/ 57813:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Y$: () => (/* binding */ y),
  qB: () => (/* binding */ o),
  Qt: () => (/* binding */ k),
  My: () => (/* binding */ C),
  bf: () => (/* binding */ j),
  jZ: () => (/* binding */ l),
  j0: () => (/* binding */ a),
  Sx: () => (/* binding */ p),
  E$: () => (/* binding */ b),
  h: () => (/* binding */ g),
  P: () => (/* binding */ B),
  SL: () => (/* binding */ d),
  gH: () => (/* binding */ u),
  si: () => (/* binding */ m),
  mJ: () => (/* binding */ q),
  UL: () => (/* binding */ D),
  D6: () => (/* binding */ V),
  Yi: () => (/* binding */ w),
  An: () => (/* binding */ F),
  LC: () => (/* binding */ A),
  xs: () => (/* binding */ i),
  Xm: () => (/* binding */ T),
  Vp: () => (/* binding */ v),
  zD: () => (/* binding */ G),
  m8: () => (/* binding */ M),
  nS: () => (/* binding */ E),
  H$: () => (/* binding */ I),
  eI: () => (/* binding */ O),
  Eq: () => (/* binding */ c),
  Aj: () => (/* binding */ h),
  E7: () => (/* binding */ z),
  Y4: () => (/* binding */ H),
  TX: () => (/* binding */ S),
  Uz: () => (/* binding */ L),
  ml: () => (/* binding */ U),
  XP: () => (/* binding */ x)
});

;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Mat3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=9;const i=this.TypedArrayConstructor;void 0===f&&(f=9*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;for(let u=0;u<9;++u)f[i++]=s[d++]}get buffer(){return this.typedBuffer.buffer}}t.ElementCount=9;

;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Mat4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Mat4_t{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=16;const i=this.TypedArrayConstructor;void 0===f&&(f=16*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;for(let u=0;u<16;++u)f[i++]=s[d++]}get buffer(){return this.typedBuffer.buffer}}Mat4_t.ElementCount=16;

;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Scalar.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Scalar_t{constructor(t,e,r=0,s,i){this.TypedArrayConstructor=t,this.elementCount=1;const f=this.TypedArrayConstructor;void 0===s&&(s=f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==i?new f(e,u):new f(e,u,(i-r)/f.BYTES_PER_ELEMENT),this.stride=s,this.typedBufferStride=s/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}Scalar_t.ElementCount=1;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec2.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=2;const i=this.TypedArrayConstructor;void 0===f&&(f=2*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec2.s)(r,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}e.ElementCount=2;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Vec3_e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=3;const i=this.TypedArrayConstructor;void 0===f&&(f=3*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec3.s)(r,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=f}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}Vec3_e.ElementCount=3;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4.js
var vec4 = __webpack_require__(25102);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Vec4_e{constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const i=this.TypedArrayConstructor;void 0===f&&(f=4*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec4.s)(r,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f,s){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=f,this.typedBuffer[t]=s}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}Vec4_e.ElementCount=4;

;// ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class y extends Scalar_t{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType="f32";class u extends e{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}slice(e,t){return this.sliceBuffer(u,e,t)}static fromTypedArray(e,t){return new u(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}u.ElementType="f32";class i extends Vec3_e{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}slice(e,t){return this.sliceBuffer(i,e,t)}static fromTypedArray(e,t){return new i(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}i.ElementType="f32";class c extends Vec4_e{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}slice(e,t){return this.sliceBuffer(c,e,t)}static fromTypedArray(e,t){return new c(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}c.ElementType="f32";class l extends t{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}slice(e,t){return this.sliceBuffer(l,e,t)}static fromTypedArray(e,t){return new l(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}l.ElementType="f32";class a extends t{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(a,e,t)}static fromTypedArray(e,t){return new a(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}a.ElementType="f64";class p extends Mat4_t{constructor(e,t=0,r,s){super(Float32Array,e,t,r,s),this.elementType="f32"}slice(e,t){return this.sliceBuffer(p,e,t)}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class b extends Mat4_t{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(b,e,t)}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f64";class o extends Scalar_t{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(o,e,t)}static fromTypedArray(e,t){return new o(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}o.ElementType="f64";class m extends e{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(m,e,t)}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f64";class T extends Vec3_e{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(T,e,t)}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="f64";class h extends Vec4_e{constructor(e,t=0,r,s){super(Float64Array,e,t,r,s),this.elementType="f64"}slice(e,t){return this.sliceBuffer(h,e,t)}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType="f64";class d extends Scalar_t{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType="u8"}slice(e,t){return this.sliceBuffer(d,e,t)}static fromTypedArray(e,t){return new d(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}d.ElementType="u8";class A extends e{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType="u8"}slice(e,t){return this.sliceBuffer(A,e,t)}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="u8";class O extends Vec3_e{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType="u8"}slice(e,t){return this.sliceBuffer(O,e,t)}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="u8";class x extends Vec4_e{constructor(e,t=0,r,s){super(Uint8Array,e,t,r,s),this.elementType="u8"}slice(e,t){return this.sliceBuffer(x,e,t)}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="u8";class g extends Scalar_t{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType="u16"}slice(e,t){return this.sliceBuffer(g,e,t)}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="u16";class w extends e{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType="u16"}slice(e,t){return this.sliceBuffer(w,e,t)}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="u16";class E extends Vec3_e{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType="u16"}slice(e,t){return this.sliceBuffer(E,e,t)}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="u16";class L extends Vec4_e{constructor(e,t=0,r,s){super(Uint16Array,e,t,r,s),this.elementType="u16"}slice(e,t){return this.sliceBuffer(L,e,t)}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="u16";class B extends Scalar_t{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType="u32"}slice(e,t){return this.sliceBuffer(B,e,t)}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="u32";class F extends e{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType="u32"}slice(e,t){return this.sliceBuffer(F,e,t)}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class I extends Vec3_e{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType="u32"}slice(e,t){return this.sliceBuffer(I,e,t)}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="u32";class U extends Vec4_e{constructor(e,t=0,r,s){super(Uint32Array,e,t,r,s),this.elementType="u32"}slice(e,t){return this.sliceBuffer(U,e,t)}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="u32";class j extends Scalar_t{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType="i8"}slice(e,t){return this.sliceBuffer(j,e,t)}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="i8";class V extends e{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType="i8"}slice(e,t){return this.sliceBuffer(V,e,t)}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i8";class M extends Vec3_e{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType="i8"}slice(e,t){return this.sliceBuffer(M,e,t)}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="i8";class S extends Vec4_e{constructor(e,t=0,r,s){super(Int8Array,e,t,r,s),this.elementType="i8"}slice(e,t){return this.sliceBuffer(S,e,t)}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="i8";class k extends Scalar_t{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType="i16"}slice(e,t){return this.sliceBuffer(k,e,t)}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="i16";class q extends e{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType="i16"}slice(e,t){return this.sliceBuffer(q,e,t)}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class v extends Vec3_e{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType="i16"}slice(e,t){return this.sliceBuffer(v,e,t)}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="i16";class z extends Vec4_e{constructor(e,t=0,r,s){super(Int16Array,e,t,r,s),this.elementType="i16"}slice(e,t){return this.sliceBuffer(z,e,t)}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i16";class C extends Scalar_t{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType="i32"}slice(e,t){return this.sliceBuffer(C,e,t)}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="i32";class D extends e{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType="i32"}slice(e,t){return this.sliceBuffer(D,e,t)}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="i32";class G extends Vec3_e{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType="i32"}slice(e,t){return this.sliceBuffer(G,e,t)}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i32";class H extends Vec4_e{constructor(e,t=0,r,s){super(Int32Array,e,t,r,s),this.elementType="i32"}slice(e,t){return this.sliceBuffer(H,e,t)}static fromTypedArray(e,t){return new H(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}H.ElementType="i32";


/***/ }),

/***/ 64521:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.3d.support.buffer.math");


/***/ }),

/***/ 32846:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GJ: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony exports isInteger, isSigned, maximumValue */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}function c(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1}}function r(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303}}


/***/ }),

/***/ 6214:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $e: () => (/* binding */ y),
/* harmony export */   j1: () => (/* binding */ p),
/* harmony export */   mO: () => (/* binding */ g),
/* harmony export */   vt: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony exports copy, fromLineSegmentAndDirection, fromValues, getAt, wrap */
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92114);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _ray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32532);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(r){return r?{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(r.ray),c0:r.c0,c1:r.c1}:{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),c0:0,c1:Number.MAX_VALUE}}function i(r,c,n){const t=A.get();return t.ray=r,t.c0=c,t.c1=n,t}function s(r,c=a()){return f(r.ray,r.c0,r.c1,c)}function f(r,c,n,t=a()){return e(r,t.ray),t.c0=c,t.c1=n,t}function y(r,c=a()){return (0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .copy */ .C)(r,c.ray),c.c0=0,c.c1=Number.MAX_VALUE,c}function m(r,n,t=a()){const o=c(r.vector);return u(r.origin,n,t.ray),t.c0=0,t.c1=o,t}function p(r,c){return j(r,r.c0,c)}function g(r,c){return j(r,r.c1,c)}function j(r,c,o){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,r.ray.origin,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(o,r.ray.direction,c))}const A=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__/* .ObjectStack */ .I((()=>a()));


/***/ }),

/***/ 94982:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ u),
/* harmony export */   FB: () => (/* binding */ l),
/* harmony export */   ig: () => (/* binding */ m),
/* harmony export */   m7: () => (/* binding */ P),
/* harmony export */   ui: () => (/* binding */ L),
/* harmony export */   vt: () => (/* binding */ I)
/* harmony export */ });
/* unused harmony exports NumPlanes, NumPoints, PointIndex, computePlanes, createPoints, intersectsLineSegment, intersectsPoint, intersectsRay, planePointIndices */
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92114);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52712);
/* harmony import */ var _clipRay_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6214);
/* harmony import */ var _plane_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(38774);
/* harmony import */ var _vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function I(T){return T?[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[0]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[1]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[2]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[3]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[4]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[5])]:[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()]}function N(){return[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()]}function u(T,_){for(let O=0;O<v;O++)(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(T[O],_[O]);return T}function L(T,t,E,F=S){const r=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__/* .sm4d */ .Rc.get(),t,T);(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.i)(r,r);for(let _=0;_<g;++_){const T=(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_3__.t)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__/* .sv4d */ .Km.get(),b[_],r);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(F[_],T[0]/T[3],T[1]/T[3],T[2]/T[3])}s(E,F)}function s(T,_){(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.FAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_TOP_LEFT],T[l.LEFT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.NEAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_RIGHT],_[k.FAR_TOP_RIGHT],T[l.RIGHT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.FAR_BOTTOM_LEFT],_[k.FAR_BOTTOM_RIGHT],_[k.NEAR_BOTTOM_RIGHT],T[l.BOTTOM]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.NEAR_TOP_LEFT],_[k.NEAR_TOP_RIGHT],_[k.FAR_TOP_RIGHT],T[l.TOP]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.NEAR_BOTTOM_LEFT],_[k.NEAR_BOTTOM_RIGHT],_[k.NEAR_TOP_RIGHT],T[l.NEAR]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[k.FAR_BOTTOM_RIGHT],_[k.FAR_BOTTOM_LEFT],_[k.FAR_TOP_LEFT],T[l.FAR])}function P(T,_){for(let O=0;O<v;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}function i(T,_){return j(T,r(_,y.get()))}function m(T,_){for(let O=0;O<v;O++){const R=T[O];if(!(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .clipInfinite */ .b6)(R,_))return!1}return!0}function a(T,_,O){return j(T,n(_,O,y.get()))}function p(T,_){for(let O=0;O<v;O++){if(B(T[O],_)>0)return!1}return!0}function j(T,_){for(let O=0;O<v;O++)if(!M(T[O],_))return!1;return!0}var l,k;!function(T){T[T.LEFT=0]="LEFT",T[T.RIGHT=1]="RIGHT",T[T.BOTTOM=2]="BOTTOM",T[T.TOP=3]="TOP",T[T.NEAR=4]="NEAR",T[T.FAR=5]="FAR"}(l||(l={})),function(T){T[T.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",T[T.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",T[T.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",T[T.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",T[T.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",T[T.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",T[T.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",T[T.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(k||(k={}));const h={bottom:[k.FAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_RIGHT,k.NEAR_BOTTOM_LEFT,k.FAR_BOTTOM_LEFT],near:[k.NEAR_BOTTOM_LEFT,k.NEAR_BOTTOM_RIGHT,k.NEAR_TOP_RIGHT,k.NEAR_TOP_LEFT],far:[k.FAR_BOTTOM_RIGHT,k.FAR_BOTTOM_LEFT,k.FAR_TOP_LEFT,k.FAR_TOP_RIGHT],right:[k.NEAR_BOTTOM_RIGHT,k.FAR_BOTTOM_RIGHT,k.FAR_TOP_RIGHT,k.NEAR_TOP_RIGHT],left:[k.FAR_BOTTOM_LEFT,k.NEAR_BOTTOM_LEFT,k.NEAR_TOP_LEFT,k.FAR_TOP_LEFT],top:[k.FAR_TOP_LEFT,k.NEAR_TOP_LEFT,k.NEAR_TOP_RIGHT,k.FAR_TOP_RIGHT]},v=6,g=8,b=[(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,-1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,-1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(1,1,1,1),(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(-1,1,1,1)],y=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__/* .ObjectStack */ .I(_clipRay_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt),S=N();


/***/ }),

/***/ 22759:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ p),
/* harmony export */   Cr: () => (/* binding */ b),
/* harmony export */   H6: () => (/* binding */ d),
/* harmony export */   _I: () => (/* binding */ l),
/* harmony export */   dz: () => (/* binding */ B),
/* harmony export */   fA: () => (/* binding */ h),
/* harmony export */   kb: () => (/* binding */ M),
/* harmony export */   ld: () => (/* binding */ k),
/* harmony export */   sd: () => (/* binding */ A),
/* harmony export */   vt: () => (/* binding */ v)
/* harmony export */ });
/* unused harmony exports closestLineSegmentDistance2, distance, wrap */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92114);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22279);
/* harmony import */ var _vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function v(t){return t?{origin:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.g)(t.origin),vector:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.g)(t.vector)}:{origin:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),vector:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}function m(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function p(t,r=v()){return h(t.origin,t.vector,r)}function h(t,r,o=v()){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.c)(o.origin,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.c)(o.vector,r),o}function b(t,r,i=v()){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.c)(i.origin,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.f)(i.vector,r,t),i}function M(r,n){const c=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.f)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),n,r.origin),s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.j)(r.vector,c),u=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.j)(r.vector,r.vector),a=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(s/u,0,1),g=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.f)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.i)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),r.vector,a),c);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.j)(g,g)}function j(t,r){return Math.sqrt(M(t,r))}function l(t,r,n){return d(t,r,0,1,n)}function A(t,r,n){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(n,t.origin,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.i)(n,t.vector,r))}function d(r,n,u,a,g){const{vector:v,origin:m}=r,p=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.f)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),n,m),h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.j)(v,p)/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.m)(v);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.i)(g,v,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(h,u,a)),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(g,g,r.origin)}function B(t,r){if(q(t,m(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.a)(t.origin,n);if(r>1)return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.a)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.c)(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,i){const e=1e-6,s=r.origin,a=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),s,r.vector),g=n.origin,v=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.g)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),g,n.vector),m=_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),p=_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get();if(m[0]=s[0]-g[0],m[1]=s[1]-g[1],m[2]=s[2]-g[2],p[0]=v[0]-g[0],p[1]=v[1]-g[1],p[2]=v[2]-g[2],Math.abs(p[0])<e&&Math.abs(p[1])<e&&Math.abs(p[2])<e)return!1;const h=_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get();if(h[0]=a[0]-s[0],h[1]=a[1]-s[1],h[2]=a[2]-s[2],Math.abs(h[0])<e&&Math.abs(h[1])<e&&Math.abs(h[2])<e)return!1;const b=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],M=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],j=m[0]*h[0]+m[1]*h[1]+m[2]*h[2],l=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],A=(h[0]*h[0]+h[1]*h[1]+h[2]*h[2])*l-M*M;if(Math.abs(A)<e)return!1;let d=(b*M-j*l)/A,B=(b+M*d)/l;o&&(d=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(d,0,1),B=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(B,0,1));const k=_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get(),S=_vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__/* .sv3d */ .rq.get();return k[0]=s[0]+d*h[0],k[1]=s[1]+d*h[1],k[2]=s[2]+d*h[2],S[0]=g[0]+B*p[0],S[1]=g[1]+B*p[1],S[2]=g[2]+B*p[2],i.tA=d,i.tB=B,i.pA=k,i.pB=S,i.distance2=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.a)(k,S),!0}const w={tA:0,tB:0,pA:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),pB:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),distance2:0},x=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__/* .ObjectStack */ .I((()=>v()));


/***/ }),

/***/ 52209:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _Indices_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42965);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .nextHighestPowerOfTwo */ .cU)(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .newIndexArray */ .my)(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .compactIndices */ .Dg)(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)if(M[t]===b){o(h,(d?A[t]:t)*s,C,b*s,s),b++}if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .compactIndices */ .Dg)(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;


/***/ }),

/***/ 87773:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ r),
/* harmony export */   O: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(e,r){return e.isGeographic||e.isWebMercator&&(r?.geographic??!0)}function o(r,o,g){const i=!r.isGeoreferenced;null!=g?.geographic&&g.geographic!==i&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger(o).warnOnce(`Specifying the 'geographic' parameter (${g.geographic}) for a Mesh vertex space of type "${r.type}" is not supported. This parameter will be ignored.`)}


/***/ }),

/***/ 97519:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $y: () => (/* binding */ U),
/* harmony export */   NW: () => (/* binding */ V),
/* harmony export */   YL: () => (/* binding */ D),
/* harmony export */   bA: () => (/* binding */ q),
/* harmony export */   h7: () => (/* binding */ E),
/* harmony export */   project: () => (/* binding */ I),
/* harmony export */   qD: () => (/* binding */ B)
/* harmony export */ });
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22279);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(46615);
/* harmony import */ var _projection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97303);
/* harmony import */ var _spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(32937);
/* harmony import */ var _projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(59538);
/* harmony import */ var _projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(84119);
/* harmony import */ var _DoubleArray_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(90166);
/* harmony import */ var _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(29317);
/* harmony import */ var _MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(97557);
/* harmony import */ var _MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(99218);
/* harmony import */ var _MeshTransform_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(8695);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(24121);
/* harmony import */ var _geographicUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(87773);
/* harmony import */ var _projection_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(72188);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function U(n,t,e){return (0,_geographicUtils_js__WEBPACK_IMPORTED_MODULE_17__/* .isGeographicMesh */ .D)(t.spatialReference,e)?W(n,t,e):L(n,t,e)}function V(n,t=_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I){const{position:e,normal:r,tangent:o}=n;return{position:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.t)(new Float64Array(e.length),e,t),normal:null!=r?(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .transformNormal */ .qs)(r,new Float32Array(r.length),t):null,tangent:null!=o?(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .transformTangent */ .KM)(o,new Float32Array(o.length),t):null}}function q(n,t,e,r){const{position:o,normal:i,tangent:a}=n;if(!t.isRelative)return{position:o,normal:i,tangent:a};return U(V(n,e?.localMatrix),t.getOriginPoint(r),{geographic:!t.isGeoreferenced})}function B(n,t,e){if(e?.useTransform){const{position:r,normal:o,tangent:i}=n,{x:a,y:s,z:l}=t,c=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.f)(a,s,l??0);return{vertexAttributes:{position:r,normal:o,tangent:i},vertexSpace:e.geographic??1?new _MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A({origin:c}):new _MeshGeoreferencedRelativeVertexSpace_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A({origin:c}),transform:new _MeshTransform_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A}}return{vertexAttributes:U(n,t,e),vertexSpace:new _MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A,transform:null}}function D(n,t,e){return (0,_geographicUtils_js__WEBPACK_IMPORTED_MODULE_17__/* .isGeographicMesh */ .D)(t.spatialReference,e)?K(n,t,e):J(n,t,e)}function E(n,t,e,r,o){if(!t.isRelative)return D(n,r,o);const{spatialReference:i}=r,a=q(n,t,e,i);return r.equals(t.getOriginPoint(i))?J(a,r,o):D(a,r,o)}function I({positions:n,transform:t,vertexSpace:e,inSpatialReference:i,outSpatialReference:a,outPositions:l,localMode:f}){const p=e.isRelative?e.origin:_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.Z,w=e.isRelative?t?.localMatrix??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I:_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I;if(e.isGeoreferenced){const t=l??(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_11__/* .newDoubleArray */ .jh)(n.length);if((0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.a)(w,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I)?(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_11__/* .copyInto */ .s)(t,n):(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.t)(t,n,w),!(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.h)(p,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.Z)){const[n,e,r]=p;for(let o=0;o<t.length;o+=3)t[o]+=n,t[o+1]+=e,t[o+2]+=r}return (0,_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_10__.projectBuffer)(t,i,0,t,a,0,t.length/3),t}let A=i;const x=(0,_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .getSphericalPCPF */ .lO)(i);A=a.isWebMercator&&f||!(0,_projection_js__WEBPACK_IMPORTED_MODULE_7__.canProjectWithoutEngine)(i,x)?A:x,(0,_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_9__/* .computeTranslationToOriginAndRotation */ .l)(i,p,_,A),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.m)(_,_,w);const v=l??(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_11__/* .newDoubleArray */ .jh)(n.length);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.t)(v,n,_),(0,_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_10__.projectBuffer)(v,A,0,v,a,0,v.length/3),v}function L(n,t,e){const r=new Float64Array(n.position.length),o=n.position,i=t.x,a=t.y,s=t.z??0,l=$(e?e.unit:null,t.spatialReference);for(let c=0;c<o.length;c+=3)r[c]=o[c]*l+i,r[c+1]=o[c+1]*l+a,r[c+2]=o[c+2]*l+s;return{position:r,normal:n.normal,tangent:n.tangent}}function W(n,t,e){const r=t.spatialReference,o=N(t,e,_),i=new Float64Array(n.position.length),a=Z(n.position,o,r,i),s=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_6__.n)(tn,o);return{position:a,normal:C(a,i,n.normal,s,r),tangent:H(a,i,n.tangent,s,r)}}function Z(n,t,e,r){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.t)(r,n,t);const o=new Float64Array(n.length);return (0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectFromPCPF */ .$5)(r,o,e)}function C(n,t,e,r,o){if(null==e)return null;const i=new Float32Array(e.length);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.a)(i,e,r),(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectNormalFromPCPF */ .si)(i,n,t,o,i),i}function H(n,t,e,r,o){if(null==e)return null;const i=new Float32Array(e.length);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.a)(i,e,r,4);for(let a=3;a<i.length;a+=4)i[a]=e[a];return (0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectTangentFromPCPF */ .Mv)(i,n,t,o,i),i}function J(n,t,e){const r=new Float64Array(n.position.length),o=n.position,i=t.x,a=t.y,s=t.z??0,l=$(e?e.unit:null,t.spatialReference);for(let c=0;c<o.length;c+=3)r[c]=(o[c]-i)/l,r[c+1]=(o[c+1]-a)/l,r[c+2]=(o[c+2]-s)/l;return{position:r,normal:n.normal,tangent:n.tangent}}function K(n,t,e){const r=t.spatialReference;N(t,e,_);const o=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.i)(nn,_),a=new Float64Array(n.position.length),s=Q(n.position,r,o,a),l=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_6__.n)(tn,o);return{position:s,normal:X(n.normal,n.position,a,r,l),tangent:Y(n.tangent,n.position,a,r,l)}}function N(n,t,e){(0,_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_9__/* .computeTranslationToOriginAndRotation */ .l)(n.spatialReference,[n.x,n.y,n.z??0],e,(0,_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .getSphericalPCPF */ .lO)(n.spatialReference));const r=$(t?t.unit:null,n.spatialReference);return (0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.b)(e,e,[r,r,r]),e}function Q(n,t,e,r){const o=(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectToPCPF */ .gr)(n,t,r),i=new Float64Array(o.length);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.t)(i,o,e),i}function X(n,t,e,r,o){if(null==n)return null;const i=(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectNormalToPCPF */ .X4)(n,t,e,r,new Float32Array(n.length));return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.a)(i,i,o),i}function Y(n,t,e,r,o){if(null==n)return null;const i=(0,_projection_js__WEBPACK_IMPORTED_MODULE_18__/* .projectTangentToPCPF */ .xA)(n,t,e,r,new Float32Array(n.length));return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_16__.a)(i,i,o,4),i}function $(e,r){if(null==e)return 1;const o=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerCartesianUnitForSR */ .KX)(r);return 1/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(o,"meters",e)}const _=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a)(),nn=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a)(),tn=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.a)();


/***/ }),

/***/ 72188:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $5: () => (/* binding */ O),
/* harmony export */   KM: () => (/* binding */ M),
/* harmony export */   Mv: () => (/* binding */ v),
/* harmony export */   X4: () => (/* binding */ j),
/* harmony export */   gr: () => (/* binding */ h),
/* harmony export */   qs: () => (/* binding */ E),
/* harmony export */   si: () => (/* binding */ _),
/* harmony export */   xA: () => (/* binding */ R)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46615);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22279);
/* harmony import */ var _spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32937);
/* harmony import */ var _projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(59538);
/* harmony import */ var _projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(84119);
/* harmony import */ var _spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(87926);
/* harmony import */ var _webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(96082);
/* harmony import */ var _buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(57813);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(24121);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const g=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.geometry.support.meshUtils.normalProjection");function j(r,e,o,t,n){return k(t)?(V(U.TO_PCPF,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(r),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(e),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(o),t,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(n)),n):(g.error("Cannot convert spatial reference to PCPF"),n)}function _(r,e,o,t,n){return k(t)?(V(U.FROM_PCPF,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(r),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(e),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(o),t,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(n)),n):(g.error("Cannot convert to spatial reference from PCPF"),n)}function h(r,e,o){return (0,_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_8__.projectBuffer)(r,e,0,o,(0,_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getSphericalPCPF */ .lO)(e),0,r.length/3),o}function O(r,e,o){return (0,_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_8__.projectBuffer)(r,(0,_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getSphericalPCPF */ .lO)(o),0,e,o,0,r.length/3),e}function E(r,t,n){return (0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.n)(N,n),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__.a)(t,r,N),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.i)(N)||(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__.n)(t,t),t}function M(r,t,n){if((0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.n)(N,n),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__.a)(t,r,N,4),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.i)(N)||(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_12__.n)(t,t,4),r!==t)for(let e=3;e<r.length;e+=4)t[e]=r[e];return t}function R(r,e,o,t,n){if(!k(t))return g.error("Cannot convert spatial reference to PCPF"),n;V(U.TO_PCPF,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(e),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(o),t,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function v(r,e,o,t,n){if(!k(t))return g.error("Cannot convert to spatial reference from PCPF"),n;V(U.FROM_PCPF,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(r,16),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(e),_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f64 */ .Xm.fromTypedArray(o),t,_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_11__/* .BufferViewVec3f */ .xs.fromTypedArray(n,16));for(let f=3;f<r.length;f+=4)n[f]=r[f];return n}function V(r,e,o,f,a,c){if(!e)return;const u=o.count,y=(0,_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getSphericalPCPF */ .lO)(a);if(B(a))for(let s=0;s<u;s++)f.getVec(s,b),e.getVec(s,S),(0,_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_7__/* .computeTranslationToOriginAndRotation */ .l)(y,b,w,y),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.f)(N,w),r===U.FROM_PCPF&&(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.t)(N,N),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.t)(S,S,N),c.setVec(s,S);else for(let m=0;m<u;m++){f.getVec(m,b),e.getVec(m,S),(0,_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_7__/* .computeTranslationToOriginAndRotation */ .l)(y,b,w,y),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.f)(N,w);const a=(0,_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .y2lat */ .jg)(o.get(m,1));let u=Math.cos(a);r===U.TO_PCPF&&(u=1/u),N[0]*=u,N[1]*=u,N[2]*=u,N[3]*=u,N[4]*=u,N[5]*=u,r===U.FROM_PCPF&&(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.t)(N,N),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.t)(S,S,N),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.n)(S,S),c.setVec(m,S)}return c}function k(r){return B(r)||L(r)}function B(r){return r.isWGS84||(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .isCGCS2000 */ .x1)(r)||(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .isMars */ .q8)(r)||(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .isMoon */ .KQ)(r)}function L(r){return r.isWebMercator}var U;!function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF"}(U||(U={}));const b=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),S=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),w=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a)(),N=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)();


/***/ }),

/***/ 20698:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $X: () => (/* binding */ q),
/* harmony export */   Gy: () => (/* binding */ L),
/* harmony export */   P5: () => (/* binding */ v),
/* harmony export */   SW: () => (/* binding */ U),
/* harmony export */   Tr: () => (/* binding */ k),
/* harmony export */   VV: () => (/* binding */ m),
/* harmony export */   qj: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports equals, getQuantizedBoundsCoordsArray, getQuantizedBoundsCoordsArrayArray, getQuantizedBoundsPaths, getQuantizedBoundsPoints, getQuantizedBoundsRings, quantizeBounds, quantizeExtent, quantizeMultipoint, quantizePaths, quantizePoints, quantizePolygon, quantizePolyline, quantizeRings, quantizeX, quantizeY, unquantizeBounds, unquantizeCoordsArray, unquantizeCoordsArrayArray, unquantizeExtent, unquantizePaths, unquantizePoints, unquantizeRings, unquantizeX, unquantizeY */
/* harmony import */ var _jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1171);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(n){return n&&"upperLeft"===n.originPosition}const i=(n,t,e)=>[t,e],o=(n,t,e)=>[t,e,n[2]],a=(n,t,e)=>[t,e,n[2],n[3]];function m(n){if(!n)return null;return{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:null!=n.extent?[n.extent.xmin,n.extent.ymax]:[0,0]}}function c(n,t){if(n===t||null==n&&null==t)return!0;if(null==n||null==t)return!1;let e,r,u,i,o,a;return l(n)?(e=n.translate[0],r=n.translate[1],u=n.scale[0]):(e=null!=n.extent?n.extent.xmin:0,r=null!=n.extent?n.extent.ymax:0,u=n.tolerance),l(t)?(i=t.translate[0],o=t.translate[1],a=t.scale[0]):(i=null!=t.extent?t.extent.xmin:0,o=null!=t.extent?t.extent.ymax:0,a=t.tolerance),e===i&&r===o&&u===a}function s({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function f({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function x(n,t,e){const r=[];let u,l,i,o;for(let a=0;a<e.length;a++){const m=e[a];a>0?(i=s(n,m[0]),o=f(n,m[1]),i===u&&o===l||(r.push(t(m,i-u,o-l)),u=i,l=o)):(u=s(n,m[0]),l=f(n,m[1]),r.push(t(m,u,l)))}return r.length>0?r:null}function h(n,t,e){return t[0]=s(n,e[0]),t[3]=f(n,e[1]),t[2]=s(n,e[2]),t[1]=f(n,e[3]),t}function I(n,t,e,r){return x(n,e?r?a:o:r?o:i,t)}function g(n,t,e,r){const u=[],l=e?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const e=x(n,l,t[i]);e&&e.length>=3&&u.push(e)}return u.length?u:null}function N(n,t,e,r){const u=[],l=e?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const e=x(n,l,t[i]);e&&e.length>=2&&u.push(e)}return u.length?u:null}function p({scale:n,translate:t},e){return e*n[0]+t[0]}function y({scale:n,translate:t},e){return t[1]-e*n[1]}function z(n,t,e){const r=new Array(e.length);if(!e.length)return r;const[u,l]=n.scale;let i=p(n,e[0][0]),o=y(n,e[0][1]);r[0]=t(e[0],i,o);for(let a=1;a<e.length;a++){const n=e[a];i+=n[0]*u,o-=n[1]*l,r[a]=t(n,i,o)}return r}function T(n,t,e){const r=new Array(e.length);for(let u=0;u<e.length;u++)r[u]=z(n,t,e[u]);return r}function M(n,t,e){return e?(t[0]=p(n,e[0]),t[1]=y(n,e[3]),t[2]=p(n,e[2]),t[3]=y(n,e[1]),t):[p(n,t[0]),y(n,t[3]),p(n,t[2]),y(n,t[1])]}function E(n,t,e,r){return z(n,e?r?a:o:r?o:i,t)}function P(n,t,e,r){return T(n,e?r?a:o:r?o:i,t)}function b(n,t,e,r){return T(n,e?r?a:o:r?o:i,t)}function F(n,t,e){let[r,u]=e[0],l=Math.min(r,t[0]),i=Math.min(u,t[1]),o=Math.max(r,t[2]),a=Math.max(u,t[3]);for(let m=1;m<e.length;m++){const[n,t]=e[m];r+=n,u+=t,n<0&&(l=Math.min(l,r)),n>0&&(o=Math.max(o,r)),t<0?i=Math.min(i,u):t>0&&(a=Math.max(a,u))}return n[0]=l,n[1]=i,n[2]=o,n[3]=a,n}function V(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)F(n,n,t[e]);return n}function Y(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(t,t,n)}function _(n){return V([0,0,0,0],n)}function A(n){return V([0,0,0,0],n)}function w(n,t,e,r,u){return t.xmin=s(n,e.xmin),t.ymin=f(n,e.ymin),t.xmax=s(n,e.xmax),t.ymax=f(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function G(n,t,e,r,u){return t.points=I(n,e.points,r,u)??[],t}function L(n,t,e,r,u){return t.x=s(n,e.x),t.y=f(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m)),t}function O(n,t,e,r,u){const l=g(n,e.rings,r,u);return l?(t.rings=l,t):null}function S(n,t,e,r,u){const l=N(n,e.paths,r,u);return l?(t.paths=l,t):null}function d(l,i){return l&&i?(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPoint */ .fT)(i)?L(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPolyline */ .Rg)(i)?S(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPolygon */ .Bi)(i)?O(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isMultipoint */ .U9)(i)?G(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isExtent */ .ZC)(i)?w(l,{},i,!1,!1):null:null}function j(n,t,e,r,u){return t.xmin=p(n,e.xmin),t.ymin=y(n,e.ymin),t.xmax=p(n,e.xmax),t.ymax=y(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function U(n,t,e,r,u){return null!=e&&(t.points=E(n,e.points,r,u)),t}function k(n,t,e,r,u){return null==e||(t.x=p(n,e.x),t.y=y(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m))),t}function q(n,t,e,r,u){return null!=e&&(t.rings=b(n,e.rings,r,u)),t}function v(n,t,e,r,u){return null!=e&&(t.paths=P(n,e.paths,r,u)),t}


/***/ }),

/***/ 50958:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fm: () => (/* binding */ S),
/* harmony export */   Q7: () => (/* binding */ w)
/* harmony export */ });
/* unused harmony exports area2d, copy, create, distance2, fromValues, intersectRay, wrap */
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(92114);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/* harmony import */ var _lineSegment_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22759);
/* harmony import */ var _vectorStacks_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function j(t){return t?{p0:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.g)(t.p0),p1:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.g)(t.p1),p2:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.g)(t.p2)}:{p0:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),p1:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),p2:(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)()}}function h(t,n,e){const r=x.get();return r.p0=t,r.p1=n,r.p2=e,r}function k(t,n=j()){return b(t.p0,t.p1,t.p2,n)}function b(t,e,r,o=j()){return n(o.p0,t),n(o.p1,e),n(o.p2,r),o}function l(t,n){const p=t.p0,c=t.p1,s=t.p2,i=e(m.get(),c,p),u=e(m.get(),s,c),f=e(m.get(),p,s),j=e(m.get(),n,p),h=e(m.get(),n,c),k=e(m.get(),n,s),b=r(i,i,f),l=o(r(m.get(),i,b),j),v=o(r(m.get(),u,b),h),S=o(r(m.get(),f,b),k);if(l>0&&v>0&&S>0){const t=o(b,j);return t*t/o(b,b)}const d=a(g(p,i,M.get()),n),w=a(g(c,u,M.get()),n),x=a(g(s,f,M.get()),n);return Math.min(d,w,x)}function v(t,n,e){const r=1e-5,{direction:o,origin:s}=n,{p0:i,p1:u,p2:f}=t,a=u[0]-i[0],g=u[1]-i[1],m=u[2]-i[2],j=f[0]-i[0],h=f[1]-i[1],k=f[2]-i[2],b=o[1]*k-h*o[2],l=o[2]*j-k*o[0],v=o[0]*h-j*o[1],S=a*b+g*l+m*v;if(S>-r&&S<r)return!1;const d=1/S,w=s[0]-i[0],M=s[1]-i[1],x=s[2]-i[2],O=d*(w*b+M*l+x*v);if(O<0||O>1)return!1;const V=M*m-g*x,q=x*a-m*w,y=w*g-a*M,z=d*(o[0]*V+o[1]*q+o[2]*y);if(z<0||O+z>1)return!1;if(e){p(e,o,d*(j*V+h*q+k*y)),c(e,s,e)}return!0}function S(t,n,e){const r=n[0]-t[0],o=n[1]-t[1],p=e[0]-t[0],c=e[1]-t[1];return.5*Math.abs(r*c-o*p)}function d(t){return S(t.p0,t.p1,t.p2)}function w(t,n,o){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(O,n,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(V,o,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.b)(O,O,V))/2}const M=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__/* .ObjectStack */ .I(_lineSegment_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt),x=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_4__/* .ObjectStack */ .I((()=>j())),O=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),V=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ 17566:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Wq: () => (/* binding */ u),
/* harmony export */   jp: () => (/* binding */ g),
/* harmony export */   lO: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony export isCounterClockwise */
/* harmony import */ var _chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16528);
/* harmony import */ var _Axis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58331);
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65319);
/* harmony import */ var _DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90166);
/* harmony import */ var _Indices_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42965);
/* harmony import */ var _meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52209);
/* harmony import */ var _views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92986);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function f(t){const e=g(t.rings,t.hasZ,u.CCW_IS_HOLE,t.spatialReference),s=new Array;let c=0,f=0;for(const r of e.polygons){const t=r.count,l=r.index,h=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .doubleSubArray */ .l5)(e.position,3*l,3*t),g=r.holeIndices.map((n=>n-l)),a=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__/* .compactIndices */ .Dg)((0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__.e)(h,g,3));s.push({position:h,faces:a}),c+=h.length,f+=a.length}const a=h(s,c,f),p=Array.isArray(a.position)?(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__/* .deduplicate */ .b)(a.position,3,{originalIndices:a.faces}):(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_5__/* .deduplicate */ .b)(a.position.buffer,6,{originalIndices:a.faces});return a.position=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .doubleArrayFrom */ .xm)(new Float64Array(p.buffer)),a.faces=p.indices,a}function h(n,t,e){if(1===n.length)return n[0];const o=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .newDoubleArray */ .jh)(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__/* .compactIndices */ .Dg)(r)}}function g(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0,h=0,g=0,d=0;for(let s=0;s<r;++s)d+=n[s].length;const m=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .newDoubleArray */ .jh)(3*d);let y=0;for(let s=r-1;s>=0;s--){const d=n[s],A=e===u.CCW_IS_HOLE&&p(d,t,o);if(A&&1!==r)i[f++]=d;else{let n=d.length;for(let t=0;t<f;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=d.length,d.length>0&&(c[g++]={index:y,count:d.length}),y=A?a(d,d.length-1,-1,m,y,d.length,t):a(d,0,1,m,y,d.length,t);for(let o=0;o<f;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}f=0,e.count>0&&(l[h++]=e)}}for(let s=0;s<f;++s){const n=i[s];n.length>0&&(c[g++]={index:y,count:n.length}),y=a(n,0,1,m,y,n.length,t)}return l.length=h,c.length=g,{position:m,polygons:l,outlines:c}}function a(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i?s[2]:0,t+=e}return r/3}function p(n,o,r){if(o){const o=n.length-1,s=(0,_views_3d_layers_graphics_polygonUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .leastSignificantAxis */ .zB)(n,o,r);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Z);if(s===_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Z)}return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y)}var u;!function(n){n[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE"}(u||(u={}));


/***/ }),

/***/ 27258:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ e),
/* harmony export */   k: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,e,r){return{objectId:t,target:e,distance:r,type:"vertex"}}function e(t,e,r,n,d,a=!1){return{objectId:t,target:e,distance:r,type:"edge",start:n,end:d,draped:a}}


/***/ }),

/***/ 62408:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  T: () => (/* binding */ optimizedFeatureQueryEngineAdapter_o)
});

;// ../node_modules/@arcgis/core/layers/graphics/centroid.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n){return t?n?4:3:n?3:2}function n(n,I,o,u,N){if(!I?.lengths.length)return null;const l="upperLeft"===N?.originPosition?-1:1;n.lengths.length&&(n.lengths.length=0),n.coords.length&&(n.coords.length=0);const s=n.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:i}=I,h=t(o,u);let g=0;for(const t of T){const n=e(f,i,g,t,o,u,l);n&&c.push(n),g+=t*h}if(c.sort(((t,n)=>{let e=l*t[2]-l*n[2];return 0===e&&o&&(e=t[4]-n[4]),e})),c.length){let t=6*c[0][2];s[0]=c[0][0]/t,s[1]=c[0][1]/t,o&&(t=6*c[0][4],s[2]=0!==t?c[0][3]/t:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const t=I.lengths[0]?r(i,0,T[0],o,u):null;if(!t)return null;s[0]=t[0],s[1]=t[1],o&&t.length>2&&(s[2]=t[2])}return n}function e(n,e,r,I,o,u,N=1){const l=t(o,u);let s=r,c=r+l,f=0,T=0,i=0,h=0,g=0;for(let t=0,b=I-1;t<b;t++,s+=l,c+=l){const t=e[s],r=e[s+1],I=e[s+2],u=e[c],N=e[c+1],l=e[c+2];let E=t*N-u*r;h+=E,f+=(t+u)*E,T+=(r+N)*E,o&&(E=t*l-u*I,i+=(I+l)*E,g+=E),t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t),r<n[2]&&(n[2]=r),r>n[3]&&(n[3]=r),o&&(I<n[4]&&(n[4]=I),I>n[5]&&(n[5]=I))}if(h*N>0&&(h*=-1),g*N>0&&(g*=-1),!h)return null;const E=[f,T,.5*h];return o&&(E[3]=i,E[4]=.5*g),E}function r(n,e,r,l,s){const c=t(l,s);let f=e,T=e+c,i=0,h=0,g=0,E=0;for(let t=0,b=r-1;t<b;t++,f+=c,T+=c){const t=n[f],e=n[f+1],r=n[f+2],s=n[T],c=n[T+1],b=n[T+2],m=l?o(t,e,r,s,c,b):I(t,e,s,c);if(m)if(i+=m,l){const n=N(t,e,r,s,c,b);h+=m*n[0],g+=m*n[1],E+=m*n[2]}else{const n=u(t,e,s,c);h+=m*n[0],g+=m*n[1]}}return i>0?l?[h/i,g/i,E/i]:[h/i,g/i]:r>0?l?[n[e],n[e+1],n[e+2]]:[n[e],n[e+1]]:null}function I(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function o(t,n,e,r,I,o){const u=r-t,N=I-n,l=o-e;return Math.sqrt(u*u+N*N+l*l)}function u(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js
var OptimizedFeature = __webpack_require__(32597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
;// ../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const optimizedFeatureQueryEngineAdapter_o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new OptimizedFeature/* OptimizedFeature */.Om(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(null==e.centroid&&(e.centroid=n(new OptimizedGeometry/* default */.A,e.geometry,o.hasZ,o.hasM)),e.centroid)};


/***/ }),

/***/ 9723:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony export equals */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],a=n[t];if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1}return!0}function t(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function r(n,t){return n===t||null!=n&&null!=t&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .equals */ .aI)(n.spatialReference,t.spatialReference)&&n.x===t.x&&n.y===t.y&&n.z===t.z&&n.m===t.m}function a(n,r){return n.hasZ===r.hasZ&&n.hasM===r.hasM&&(!!e(n.spatialReference,r.spatialReference)&&t(n.paths,r.paths))}function u(n,r){return n.hasZ===r.hasZ&&n.hasM===r.hasM&&(!!e(n.spatialReference,r.spatialReference)&&t(n.rings,r.rings))}function i(t,r){return t.hasZ===r.hasZ&&t.hasM===r.hasM&&(!!e(t.spatialReference,r.spatialReference)&&n(t.points,r.points))}function s(n,t){return n.hasZ===t.hasZ&&n.hasM===t.hasM&&(!!e(n.spatialReference,t.spatialReference)&&(n.xmin===t.xmin&&n.ymin===t.ymin&&n.zmin===t.zmin&&n.xmax===t.xmax&&n.ymax===t.ymax&&n.zmax===t.zmax))}function l(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.type!==n.type)return!1;switch(e.type){case"point":return r(e,n);case"extent":return s(e,n);case"polyline":return a(e,n);case"polygon":return u(e,n);case"multipoint":return i(e,n);case"mesh":return!1;default:return}}function f(e,n){if(e===n)return!0;if(!e||!n)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(e[a]!==n[a])return!1;return!0}function c(e,n){return e===n||null!=e&&null!=n&&e.objectId===n.objectId&&(!!l(e.geometry,n.geometry)&&!!f(e.attributes,n.attributes))}


/***/ }),

/***/ 80009:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t){return"point"===t.type}


/***/ }),

/***/ 28413:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HP: () => (/* binding */ y),
/* harmony export */   N3: () => (/* binding */ f),
/* harmony export */   RW: () => (/* binding */ z),
/* harmony export */   iQ: () => (/* binding */ F),
/* harmony export */   jy: () => (/* binding */ g),
/* harmony export */   w9: () => (/* binding */ N)
/* harmony export */ });
/* unused harmony exports estimateGeometryObjectSize, estimateSize, fromFeatureSetJSON, fromJSONGeometry, hasVertices, numVertices */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86942);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(78983);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(20698);
/* harmony import */ var _geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12433);
/* harmony import */ var _support_Field_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(24738);
/* harmony import */ var _dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(9723);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class y{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function f(e){return null!=e.geometry}class g{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function d(e){const t=c.fromJSON(e.geometryType),s=r.fromJSON(e.spatialReference),n=e.transform,a=e.features.map((r=>{const a=b(r,t,s,e.objectIdFieldName),o=a.geometry;if(null!=o&&n)switch(o.type){case"point":a.geometry=h(n,o,o,o.hasZ,o.hasM);break;case"multipoint":a.geometry=u(n,o,o,!!o.hasZ,!!o.hasM);break;case"polygon":a.geometry=p(n,o,o,!!o.hasZ,!!o.hasM);break;case"polyline":a.geometry=l(n,o,o,!!o.hasZ,!!o.hasM);break;case"extent":case"mesh":a.geometry=o}return a}));return{geometryType:t,features:a,spatialReference:s,fields:e.fields?.map((e=>m.fromJSON(e)))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}}function b(e,t,r,n){return{uid:s(),objectId:n&&e.attributes?e.attributes[n]:null,attributes:e.attributes,geometry:x(e.geometry,t,r),visible:!0}}function x(e,t,s){if(null==e)return null;switch(t){case"point":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:s}}case"polyline":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:s}}case"polygon":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:s}}case"multipoint":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:s}}}}function Z(e){if(null==e)return 0;let s=32;switch(e.type){case"point":s+=42;break;case"polyline":case"polygon":{let t=0;const r=2+(e.hasZ?1:0)+(e.hasM?1:0),n="polyline"===e.type?e.paths:e.rings;for(const e of n)t+=e.length;s+=8*t*r+64,s+=128*t,s+=34,s+=32*(n.length+1);break}case"multipoint":{const t=2+(e.hasZ?1:0)+(e.hasM?1:0),r=e.points.length;s+=8*r*t+64,s+=128*r,s+=34,s+=32;break}case"extent":s+=98,e.hasM&&(s+=32),e.hasZ&&(s+=32);break;case"mesh":s+=t(e.vertexAttributes.position,e.vertexAttributes.normal,e.vertexAttributes.uv,e.vertexAttributes.tangent)}return s}function j(t){let s=32;return s+=e(t.attributes),s+=3,s+=8+Z(t.geometry),s}function M(e){if(null==e)return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const s of e.paths)t+=s.length;return t}case"polygon":{let t=0;for(const s of e.rings)t+=s.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function k(e){if(null==e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(const t of e.paths)if(t.length>0)return!0;return!1;case"polygon":for(const t of e.rings)if(t.length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function N(e,t){switch((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .empty */ .Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let s=0;s<e.paths.length;s++)(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.paths[s],!!e.hasZ);break;case"polygon":for(let s=0;s<e.rings.length;s++)(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.rings[s],!!e.hasZ);break;case"multipoint":(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}}function F(e,t){switch((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .empty */ .Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let s=0;s<e.paths.length;s++)(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.paths[s]);break;case"polygon":for(let s=0;s<e.rings.length;s++)(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.rings[s]);break;case"multipoint":(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function z(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}


/***/ }),

/***/ 85174:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EL: () => (/* binding */ x),
/* harmony export */   RS: () => (/* binding */ k),
/* harmony export */   gr: () => (/* binding */ o),
/* harmony export */   wP: () => (/* binding */ c),
/* harmony export */   wZ: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony exports isHydratedGraphic, isHydratedPoint */
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17639);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25707);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19251);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86942);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1171);
/* harmony import */ var _dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(29394);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(78983);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(e){return"declaredClass"in e}function m(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function c(n,r){return n?l(n)?n:new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({layer:r,sourceLayer:r,visible:n.visible,symbol:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(n.symbol),attributes:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(n.attributes),geometry:u(n.geometry)}):null}function u(e){return null==e?null:o(e)?e:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromJSON */ .rS)(f(e))}function f(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:a}=e.spatialReference,s={wkid:t,wkt:n,wkt2:r,latestWkid:a};switch(e.type){case"point":{const{x:t,y:n,z:r,m:a}=e;return{x:t,y:n,z:r,m:a,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:r}=e;return{rings:p(t),hasZ:n,hasM:r,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:r}=e;return{paths:p(t),hasZ:n,hasM:r,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:r,ymax:a,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u}=e;return{xmin:t,xmax:n,ymin:r,ymax:a,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:r}=e;return{points:d(t)?h(t):t,hasZ:n,hasM:r,spatialReference:s}}default:return}}function p(e){return y(e)?e.map((e=>h(e))):e}function h(e){return e.map((e=>Array.from(e)))}function y(e){for(const t of e)if(0!==t.length)return d(t);return!1}function d(e){return e.length>0&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__/* .isFloat32Array */ .vZ)(e[0])||(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_4__/* .isFloat64Array */ .aI)(e[0]))}function x(e,t){if(!e)return null;let n;if(m(e)){if(null==t)return e.clone();if(m(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_7__/* .makeDehydratedPoint */ .T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function k(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:a}=e,s={wkid:t,wkt:n,wkt2:r,latestWkid:a};return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.fromJSON(s)}


/***/ }),

/***/ 12155:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var a;!function(a){a[a.EnableFastUpdates=0]="EnableFastUpdates",a[a.DisableFastUpdates=1]="DisableFastUpdates",a[a.UpdateFastLocalOrigin=2]="UpdateFastLocalOrigin"}(a||(a={}));


/***/ }),

/***/ 91976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getGeometryServiceURL: () => (/* binding */ n),
/* harmony export */   projectGeometry: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21121);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98849);
/* harmony import */ var _Portal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10282);
/* harmony import */ var _rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(70727);
/* harmony import */ var _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function n(o=null,i){if(_config_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.geometryServiceUrl)return _config_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.geometryServiceUrl;if(!o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("internal:geometry-service-url-not-configured");let n;n="portal"in o?o.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getDefault():o,await n.load({signal:i});const a=n.helperServices?.geometry?.url;if(!a)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("internal:geometry-service-url-not-configured");return a}async function a(r,t,a=null,l){const c=await n(a,l),s=new _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A;s.geometries=[r],s.outSpatialReference=t;const m=await (0,_rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_3__/* .project */ .C)(c,s,{signal:l});if(m&&Array.isArray(m)&&1===m.length)return m[0];throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("internal:geometry-service-projection-failed")}


/***/ }),

/***/ 34528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86394);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function t(t,r){const{data:a}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(t,{responseType:"image",...r});return a}


/***/ }),

/***/ 29986:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(e,t,o,n,a){if(null==e)return null;const s=e.referencesGeometry()&&a?i(t,n,a):t,u=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:u},e.services)}catch(c){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const u=new Map;function i(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;u.has(r)||u.set(r,c(r));const s=u.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const u={};switch(s){case"esriGeometryPoint":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePoint */ .Tr)(r,u,e,t,o);case"esriGeometryPolygon":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePolygon */ .$X)(r,u,e,t,o);case"esriGeometryPolyline":return(e,r,t,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePolyline */ .P5)(r,u,e,t,n);case"esriGeometryMultipoint":return(e,r,o,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizeMultipoint */ .SW)(r,u,e,o,n);default:return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-arcade",`Unable to handle geometryType: ${s}`)),e=>e}}


/***/ }),

/***/ 66386:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ u),
/* harmony export */   c2: () => (/* binding */ n),
/* harmony export */   pi: () => (/* binding */ N)
/* harmony export */ });
/* unused harmony export isReadyCloudsData */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n,u;function I(n){return null!=n?.cubeMap}function N(n){return null!=n&&!n.running}!function(n){n[n.RENDERING=0]="RENDERING",n[n.FADING=1]="FADING",n[n.FINISHED=2]="FINISHED"}(n||(n={})),function(n){n[n.RG=0]="RG",n[n.BA=1]="BA"}(u||(u={}));


/***/ }),

/***/ 58718:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OQ: () => (/* binding */ O),
/* harmony export */   ny: () => (/* binding */ A)
/* harmony export */ });
/* unused harmony exports crossFadeDistanceThreshold, fadeOutDistanceThreshold, hideDistanceThreshold */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22279);
/* harmony import */ var _geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69175);
/* harmony import */ var _geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99817);
/* harmony import */ var _CloudsData_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(66386);
/* harmony import */ var _weather_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(84323);
/* harmony import */ var _support_RenderState_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(40695);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class A{constructor(){this.readChannels=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .CloudsTextureChannels */ .c.RG,this.renderingStage=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .CloudsRenderingStages */ .c2.FINISHED,this.startTime=0,this.startTimeHeightFade=0,this.cameraPositionLastFrame=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.parallax=new C,this.parallaxNew=new C,this.pointOnGround=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.fadeMode=O.HIDE,this.fadeFactor=0,this.opacity=0}updateParallax(t){const s=this.parallax,o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.l)(t.eye);if(s.radiusCurvatureCorrectionFactor=.84*Math.sqrt(Math.max(o*o-_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__/* .earth */ .$O.radius*_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__/* .earth */ .$O.radius,0))/o,(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__/* .fromPoints */ .Cr)(S,s.anchorPointClouds,g),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.k)(s.transform,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.I,g[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__/* .axis */ .yo)(g)),this.fadeMode===O.CROSS_FADE){const t=this.parallaxNew;(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__/* .fromPoints */ .Cr)(S,t.anchorPointClouds,g),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.k)(t.transform,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.I,g[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__/* .axis */ .yo)(g))}}updateFading(t,a,i,s){this.isFading&&this._advanceFading(i,s),this._evaluateFading(t,a,i)}_evaluateFading(t,a,i){const s=t.relativeElevation,e=this._calculateDistanceToAnchorPoint(t);if((s>1.7*_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni||s<-_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni||e>v)&&this.opacity>0)this._setFade(O.HIDE,i);else if(!this.isFading)if((s>_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni||s<-.35*_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni||e>M)&&this.opacity>0)this._setFade(O.FADE_OUT,i);else if(s<=_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni&&s>=-.35*_weather_js__WEBPACK_IMPORTED_MODULE_8__/* .weatherHeightLimit */ .ni&&a===_support_RenderState_js__WEBPACK_IMPORTED_MODULE_9__/* .RenderState */ .M.IDLE&&(0,_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .ensureClouds */ .pi)(this.data)){if(0===this.opacity)return void this._setFade(O.FADE_IN,i);(e>y||this.renderingStage===_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .CloudsRenderingStages */ .c2.FADING)&&this._setFade(O.CROSS_FADE,i)}}_advanceFading(t,a){this._switchReadChannels(),this._updateAnchorPoint(),this._advanceFadingFactorAndOpacity(t,a)}_advanceFadingFactorAndOpacity(a,i){if(this.fadeFactor<1)return this.fadeFactor=i?(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)((a-this.startTime)/(I*i),0,1):1,this.fadeMode===O.FADE_OUT&&(this.opacity=1-this.fadeFactor),this.fadeMode===O.FADE_IN&&(this.opacity=this.fadeFactor),void(this.fadeMode===O.CROSS_FADE&&(this.opacity=1));this.fadeFactor=0,this.fadeMode===O.FADE_OUT&&(this.opacity=0),this.fadeMode===O.FADE_IN&&(this.opacity=1),this.fadeMode===O.CROSS_FADE&&(this.opacity=1),this.fadeMode=O.NONE}_switchReadChannels(){const t=this.fadeMode===O.CROSS_FADE&&1===this.fadeFactor,a=this.fadeMode===O.FADE_IN&&0===this.fadeFactor;this.renderingStage===_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .CloudsRenderingStages */ .c2.FADING&&(t||a)&&(this.readChannels=1-this.readChannels,this.renderingStage=_CloudsData_js__WEBPACK_IMPORTED_MODULE_7__/* .CloudsRenderingStages */ .c2.FINISHED)}_calculateDistanceToAnchorPoint(t){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.n)(this.pointOnGround,t.eye),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.i)(this.pointOnGround,this.pointOnGround,_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_6__/* .earth */ .$O.radius),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.l)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.f)(N,this.parallax.anchorPointClouds,this.pointOnGround))}_updateAnchorPoint(){this.fadeMode===O.CROSS_FADE&&(0===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallaxNew.anchorPointClouds,this.pointOnGround),1===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallax.anchorPointClouds,this.parallaxNew.anchorPointClouds)),this.fadeMode===O.FADE_IN&&0===this.fadeFactor&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.parallax.anchorPointClouds,this.pointOnGround)}_setFade(t,a){switch(t){case O.HIDE:this.opacity=0;break;case O.FADE_OUT:this.opacity=1;break;case O.FADE_IN:this.opacity=0;break;case O.CROSS_FADE:this.opacity=1}this.fadeMode=t,this.fadeFactor=0,this.startTime=a}get isFading(){return this.fadeMode===O.FADE_OUT||this.fadeMode===O.FADE_IN||this.fadeMode===O.CROSS_FADE}}var O;!function(t){t[t.NONE=0]="NONE",t[t.HIDE=1]="HIDE",t[t.FADE_OUT=2]="FADE_OUT",t[t.FADE_IN=3]="FADE_IN",t[t.CROSS_FADE=4]="CROSS_FADE"}(O||(O={}));class C{constructor(){this.anchorPointClouds=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),this.radiusCurvatureCorrectionFactor=0,this.transform=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.a)()}}const S=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.f)(0,0,1),g=(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__.c)(),I=1.25,y=34e3,M=64e3,v=2e5;


/***/ }),

/***/ 84323:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  k9: () => (/* binding */ weather_i),
  ni: () => (/* binding */ weather_p)
});

// UNUSED EXPORTS: validateWeatherType, weatherTypes, weatherTypesArray

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js
var enumeration = __webpack_require__(28902);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
;// ../node_modules/@arcgis/core/views/3d/environment/CloudyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var c;let p=c=class extends JSONSupport/* JSONSupport */.oY{constructor(o){super(o),this.type="cloudy",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({cloudy:"cloudy"})],p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,"cloudCover",void 0),p=c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.CloudyWeather")],p);const u=p;

;// ../node_modules/@arcgis/core/views/3d/environment/FoggyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var FoggyWeather_p;let FoggyWeather_c=FoggyWeather_p=class extends JSONSupport/* JSONSupport */.oY{constructor(r){super(r),this.type="foggy",this.fogStrength=.5}clone(){return new FoggyWeather_p({fogStrength:this.fogStrength})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({foggy:"foggy"})],FoggyWeather_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],FoggyWeather_c.prototype,"fogStrength",void 0),FoggyWeather_c=FoggyWeather_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.FoggyWeather")],FoggyWeather_c);const n=FoggyWeather_c;

;// ../node_modules/@arcgis/core/views/3d/environment/RainyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var i;let RainyWeather_p=i=class extends JSONSupport/* JSONSupport */.oY{constructor(r){super(r),this.type="rainy",this.cloudCover=.5,this.precipitation=.5}clone(){return new i({cloudCover:this.cloudCover,precipitation:this.precipitation})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({rainy:"rainy"})],RainyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"precipitation",void 0),RainyWeather_p=i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.RainyWeather")],RainyWeather_p);const RainyWeather_c=RainyWeather_p;

;// ../node_modules/@arcgis/core/views/3d/environment/SnowyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var SnowyWeather_i;let SnowyWeather_p=SnowyWeather_i=class extends JSONSupport/* JSONSupport */.oY{constructor(o){super(o),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled"}clone(){return new SnowyWeather_i({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({snowy:"snowy"})],SnowyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"precipitation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],SnowyWeather_p.prototype,"snowCover",void 0),SnowyWeather_p=SnowyWeather_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.SnowyWeather")],SnowyWeather_p);const SnowyWeather_n=SnowyWeather_p;

;// ../node_modules/@arcgis/core/views/3d/environment/SunnyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var SunnyWeather_p;let SunnyWeather_c=SunnyWeather_p=class extends JSONSupport/* JSONSupport */.oY{constructor(r){super(r),this.type="sunny",this.cloudCover=.5}clone(){return new SunnyWeather_p({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({sunny:"sunny"})],SunnyWeather_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SunnyWeather_c.prototype,"cloudCover",void 0),SunnyWeather_c=SunnyWeather_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.SunnyWeather")],SunnyWeather_c);const SunnyWeather_n=SunnyWeather_c;

;// ../node_modules/@arcgis/core/views/3d/environment/weather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const weather_n={key:"type",base:SunnyWeather_n,typeMap:{sunny:SunnyWeather_n,cloudy:u,rainy:RainyWeather_c,snowy:SnowyWeather_n,foggy:n}},a=Object.keys(weather_n.typeMap);function s(e,r){return!!a.includes(e)||(r.error(`"${e}" is not a valid weather type`),!1)}const weather_p=1e4,weather_i=1e5;


/***/ }),

/***/ 13298:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86394);
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(12690);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98849);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40189);
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20909);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n{constructor(r){this._streamDataRequester=r}async loadJSON(r,e){return this._load("json",r,e)}async loadBinary(r,e){return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isDataProtocol */ .DB)(r)?((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .throwIfAborted */ .Te)(e),(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .dataToArrayBuffer */ .lJ)(r)):this._load("binary",r,e)}async loadImage(r,e){return this._load("image",r,e)}async _load(a,o,i){if(null==this._streamDataRequester)return(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(o,{responseType:m[a]})).data;const n=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .result */ .Ke)(this._streamDataRequester.request(o,a,i));if(!0===n.ok)return n.value;throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .throwIfAbortError */ .QP)(n.error),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A("",`Request for resource failed: ${n.error}`)}}const m={image:"image",binary:"array-buffer",json:"json","image+type":void 0};


/***/ }),

/***/ 80954:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21360);
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48325);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46615);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(r){if(null==r)return null;const f=null!=r.offset?r.offset:_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_1__.Z,l=null!=r.rotation?r.rotation:0,c=null!=r.scale?r.scale:_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_1__.O,u=(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,0,0,0,1,0,f[0],f[1],1),i=(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.f)(Math.cos(l),-Math.sin(l),0,Math.sin(l),Math.cos(l),0,0,0,1),m=(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.f)(c[0],0,0,0,c[1],0,0,0,1),e=(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)();return (0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.m)(e,i,m),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.m)(e,u,e),e}


/***/ }),

/***/ 8823:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42965);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(r,t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLES:return f(r);case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_STRIP:return u(r);case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_FAN:return i(r)}}function f(e){return"number"==typeof e?(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .getContinuousIndexArray */ .tM)(e):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isUint8Array */ .mg)(e)?new Uint16Array(e):e}function u(r){const t="number"==typeof r?r:r.length;if(t<3)return[];const n=t-2,o=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .newIndexArray */ .my)(3*n);if("number"==typeof r){let r=0;for(let t=0;t<n;t+=1)t%2==0?(o[r++]=t,o[r++]=t+1,o[r++]=t+2):(o[r++]=t+1,o[r++]=t,o[r++]=t+2)}else{let t=0;for(let e=0;e<n;e+=1)e%2==0?(o[t++]=r[e],o[t++]=r[e+1],o[t++]=r[e+2]):(o[t++]=r[e+1],o[t++]=r[e],o[t++]=r[e+2])}return o}function i(r){const t="number"==typeof r?r:r.length;if(t<3)return new Uint16Array(0);const e=t-2,n=e<=65536?new Uint16Array(3*e):new Uint32Array(3*e);if("number"==typeof r){let r=0;for(let t=0;t<e;++t)n[r++]=0,n[r++]=t+1,n[r++]=t+2;return n}const o=r[0];let f=r[1],u=0;for(let i=0;i<e;++i){const t=r[i+2];n[u++]=o,n[u++]=f,n[u++]=t,f=t}return n}


/***/ }),

/***/ 46629:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KB: () => (/* binding */ n),
/* harmony export */   Xi: () => (/* binding */ t),
/* harmony export */   pn: () => (/* binding */ o),
/* harmony export */   x3: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t){this.data=t,this.type="encoded-mesh-texture",this.encoding=_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureEncodingMimeType */ .JS.KTX2_ENCODING}}function r(e){return"encoded-mesh-texture"===e?.type}async function n(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function o(r,n){if(n===_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureEncodingMimeType */ .JS.KTX2_ENCODING)return new t(r);const o=new Blob([r],{type:n}),c=URL.createObjectURL(o),s=new Image;if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-iPhone"))return new Promise(((e,t)=>{const r=()=>{o(),e(s)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(c),s.removeEventListener("load",r),s.removeEventListener("error",n)};s.addEventListener("load",r),s.addEventListener("error",n),s.src=c}));try{s.src=c,await s.decode()}catch(i){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(c),s}


/***/ }),

/***/ 31068:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  y: () => (/* binding */ loader_l)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/3d/glTF/LoaderResult.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function LoaderResult_r(e={}){return{color:[1,1,1],opacity:1,alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1,castShadows:!0,receiveShadows:!0,receiveAmbientOcclustion:!0,textureColor:null,textureNormal:null,textureOcclusion:null,textureEmissive:null,textureMetallicRoughness:null,colorTextureTransform:null,normalTextureTransform:null,occlusionTextureTransform:null,emissiveTextureTransform:null,metallicRoughnessTextureTransform:null,emissiveFactor:[0,0,0],metallicFactor:1,roughnessFactor:1,colorMixMode:"multiply",...e}}function l(r,l={}){return{data:r,parameters:{wrap:{s:enums/* TextureWrapMode */.pF.REPEAT,t:enums/* TextureWrapMode */.pF.REPEAT,...l.wrap},noUnpackFlip:!0,mipmap:!1,...l}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/urlUtils.js
var urlUtils = __webpack_require__(20909);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Version.js
var Version = __webpack_require__(50579);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/quat.js
var quat = __webpack_require__(76743);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/quatf64.js
var quatf64 = __webpack_require__(46991);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/scalar.js
var scalar = __webpack_require__(3192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
;// ../node_modules/@arcgis/core/views/3d/glTF/internal/BinaryStreamReader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BinaryStreamReader_t{constructor(t){this._data=t,this._offset4=0,this._dataUint32=new Uint32Array(this._data,0,Math.floor(this._data.byteLength/4))}readUint32(){const t=this._offset4;return this._offset4+=1,this._dataUint32[t]}readUint8Array(t){const s=4*this._offset4;return this._offset4+=t/4,new Uint8Array(this._data,s,t)}remainingBytes(){return this._data.byteLength-4*this._offset4}}

;// ../node_modules/@arcgis/core/views/3d/glTF/internal/enums.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var A,E;!function(A){A.SCALAR="SCALAR",A.VEC2="VEC2",A.VEC3="VEC3",A.VEC4="VEC4",A.MAT2="MAT2",A.MAT3="MAT3",A.MAT4="MAT4"}(A||(A={})),function(A){A[A.ARRAY_BUFFER=34962]="ARRAY_BUFFER",A[A.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(E||(E={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
;// ../node_modules/@arcgis/core/views/3d/glTF/internal/fillDefaults.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1},a={pbrMetallicRoughness:t,emissiveFactor:[0,0,0],alphaMode:"OPAQUE",alphaCutoff:.5,doubleSided:!1},fillDefaults_l={ESRI_externalColorMixMode:"tint"},fillDefaults_i=(e={})=>{const o={...t,...e.pbrMetallicRoughness},r=s({...fillDefaults_l,...e.extras});return{...a,...e,pbrMetallicRoughness:o,extras:r}};function s(o){switch(o.ESRI_externalColorMixMode){case"multiply":case"tint":case"ignore":case"replace":break;default:(0,compilerUtils/* neverReached */.Xb)(o.ESRI_externalColorMixMode),o.ESRI_externalColorMixMode="tint"}return o}const n={magFilter:enums/* TextureSamplingMode */.Cj.LINEAR,minFilter:enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR,wrapS:enums/* TextureWrapMode */.pF.REPEAT,wrapT:enums/* TextureWrapMode */.pF.REPEAT},c=e=>({...n,...e});

;// ../node_modules/@arcgis/core/views/3d/glTF/internal/pathUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function pathUtils_r(r){let e,t;return r.replace(/^(.*\/)?([^/]*)$/,((r,a,i)=>(e=a||"",t=i||"",""))),{dirPart:e,filePart:t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js
var resourceUtils = __webpack_require__(46629);
;// ../node_modules/@arcgis/core/views/3d/glTF/internal/Resource.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const K={MAGIC:1179937895,CHUNK_TYPE_JSON:1313821514,CHUNK_TYPE_BIN:5130562,MIN_HEADER_LENGTH:20};class Y{constructor(t,r,o,n){if(this._context=t,this.uri=r,this.json=o,this._glbBuffer=n,this._bufferLoaders=new Map,this._textureLoaders=new Map,this._textureCache=new Map,this._materialCache=new Map,this._nodeParentMap=new Map,this._nodeTransformCache=new Map,this._supportedExtensions=["KHR_texture_basisu"],this._baseUri=pathUtils_r(this.uri).dirPart,this._checkVersionSupported(),this._checkRequiredExtensionsSupported(),null==o.scenes)throw new Error/* default */.A("gltf-loader-unsupported-feature","Scenes must be defined.");if(null==o.meshes)throw new Error/* default */.A("gltf-loader-unsupported-feature","Meshes must be defined");if(null==o.nodes)throw new Error/* default */.A("gltf-loader-unsupported-feature","Nodes must be defined.");this._computeNodeParents()}static async load(t,r,o){if((0,urlUtils/* isDataProtocol */.DB)(r)){const e=(0,urlUtils/* dataComponents */.r$)(r);if(e&&"model/gltf-binary"!==e.mediaType)try{const o=JSON.parse(e.isBase64?atob(e.data):e.data);return new Y(t,r,o)}catch{}const o=(0,urlUtils/* dataToArrayBuffer */.lJ)(r);if(Y._isGLBData(o))return this._fromGLBData(t,r,o)}if(Q.test(r)||"gltf"===o?.expectedType){const e=await t.loadJSON(r,o);return new Y(t,r,e)}const i=await t.loadBinary(r,o);if(Y._isGLBData(i))return this._fromGLBData(t,r,i);if(Z.test(r)||"glb"===o?.expectedType)throw new Error/* default */.A("gltf-loader-invalid-glb","This is not a valid glb file.");const u=await t.loadJSON(r,o);return new Y(t,r,u)}static _isGLBData(e){if(null==e)return!1;const t=new BinaryStreamReader_t(e);return t.remainingBytes()>=4&&t.readUint32()===K.MAGIC}static async _fromGLBData(e,t,r){const o=await Y._parseGLBData(r);return new Y(e,t,o.json,o.binaryData)}static async _parseGLBData(r){const o=new BinaryStreamReader_t(r);if(o.remainingBytes()<12)throw new Error/* default */.A("gltf-loader-error","glb binary data is insufficiently large.");const n=o.readUint32(),s=o.readUint32(),a=o.readUint32();if(n!==K.MAGIC)throw new Error/* default */.A("gltf-loader-error","Magic first 4 bytes do not fit to expected glb value.");if(r.byteLength<a)throw new Error/* default */.A("gltf-loader-error","glb binary data is smaller than header specifies.");if(2!==s)throw new Error/* default */.A("gltf-loader-unsupported-feature","An unsupported glb container version was detected. Only version 2 is supported.");let i,u,f=0;for(;o.remainingBytes()>=8;){const r=o.readUint32(),n=o.readUint32();if(0===f){if(n!==K.CHUNK_TYPE_JSON)throw new Error/* default */.A("gltf-loader-error","First glb chunk must be JSON.");if(r<0)throw new Error/* default */.A("gltf-loader-error","No JSON data found.");i=await (0,resourceUtils/* jsonFromBinaryData */.KB)(o.readUint8Array(r))}else if(1===f){if(n!==K.CHUNK_TYPE_BIN)throw new Error/* default */.A("gltf-loader-unsupported-feature","Second glb chunk expected to be BIN.");u=o.readUint8Array(r)}else Logger/* default */.A.getLogger("esri.views.3d.glTF").warn("[Unsupported Feature] More than 2 glb chunks detected. Skipping.");f+=1}if(!i)throw new Error/* default */.A("gltf-loader-error","No glb JSON chunk detected.");return{json:i,binaryData:u}}async getBuffer(t,r){const o=this.json.buffers[t];if(null==o.uri){if(null==this._glbBuffer)throw new Error/* default */.A("gltf-loader-error","glb buffer not present");return this._glbBuffer}const n=await this._getBufferLoader(t,r);if(n.byteLength!==o.byteLength)throw new Error/* default */.A("gltf-loader-error","Buffer byte lengths should match.");return n}async _getBufferLoader(e,t){const r=this._bufferLoaders.get(e);if(r)return r;const o=this.json.buffers[e].uri,n=this._context.loadBinary(this._resolveUri(o),t).then((e=>new Uint8Array(e)));return this._bufferLoaders.set(e,n),n}async getAccessor(t,r){if(!this.json.accessors)throw new Error/* default */.A("gltf-loader-unsupported-feature","Accessors missing.");const o=this.json.accessors[t];if(null==o?.bufferView)throw new Error/* default */.A("gltf-loader-unsupported-feature","Some accessor does not specify a bufferView.");if(o.type in[A.MAT2,A.MAT3,A.MAT4])throw new Error/* default */.A("gltf-loader-unsupported-feature",`AttributeType ${o.type} is not supported`);const n=this.json.bufferViews[o.bufferView],s=await this.getBuffer(n.buffer,r),a=X[o.type],i=$[o.componentType],u=a*i,f=n.byteStride||u;return{raw:s.buffer,byteStride:f,byteOffset:s.byteOffset+(n.byteOffset||0)+(o.byteOffset||0),entryCount:o.count,isDenselyPacked:f===u,componentCount:a,componentByteSize:i,componentType:o.componentType,min:o.min,max:o.max,normalized:!!o.normalized}}async getIndexData(e,t){if(null==e.indices)return;const r=await this.getAccessor(e.indices,t);if(r.isDenselyPacked)switch(r.componentType){case enums/* DataType */.pe.UNSIGNED_BYTE:return new Uint8Array(r.raw,r.byteOffset,r.entryCount);case enums/* DataType */.pe.UNSIGNED_SHORT:return new Uint16Array(r.raw,r.byteOffset,r.entryCount);case enums/* DataType */.pe.UNSIGNED_INT:return new Uint32Array(r.raw,r.byteOffset,r.entryCount)}else switch(r.componentType){case enums/* DataType */.pe.UNSIGNED_BYTE:return (0,scalar.m)(this._wrapAccessor(BufferView/* BufferViewUint8 */.SL,r));case enums/* DataType */.pe.UNSIGNED_SHORT:return (0,scalar.m)(this._wrapAccessor(BufferView/* BufferViewUint16 */.h,r));case enums/* DataType */.pe.UNSIGNED_INT:return (0,scalar.m)(this._wrapAccessor(BufferView/* BufferViewUint32 */.P,r))}}async getPositionData(t,r){if(null==t.attributes.POSITION)throw new Error/* default */.A("gltf-loader-unsupported-feature","No POSITION vertex data found.");const o=await this.getAccessor(t.attributes.POSITION,r);if(o.componentType!==enums/* DataType */.pe.FLOAT)throw new Error/* default */.A("gltf-loader-unsupported-feature","Expected type FLOAT for POSITION vertex attribute, but found "+enums/* DataType */.pe[o.componentType]);if(3!==o.componentCount)throw new Error/* default */.A("gltf-loader-unsupported-feature","POSITION vertex attribute must have 3 components, but found "+o.componentCount.toFixed());return this._wrapAccessor(BufferView/* BufferViewVec3f */.xs,o)}async getNormalData(t,r){if(null==t.attributes.NORMAL)throw new Error/* default */.A("gltf-loader-error","No NORMAL vertex data found.");const o=await this.getAccessor(t.attributes.NORMAL,r);if(o.componentType!==enums/* DataType */.pe.FLOAT)throw new Error/* default */.A("gltf-loader-unsupported-feature","Expected type FLOAT for NORMAL vertex attribute, but found "+enums/* DataType */.pe[o.componentType]);if(3!==o.componentCount)throw new Error/* default */.A("gltf-loader-unsupported-feature","NORMAL vertex attribute must have 3 components, but found "+o.componentCount.toFixed());return this._wrapAccessor(BufferView/* BufferViewVec3f */.xs,o)}async getTangentData(t,r){if(null==t.attributes.TANGENT)throw new Error/* default */.A("gltf-loader-error","No TANGENT vertex data found.");const o=await this.getAccessor(t.attributes.TANGENT,r);if(o.componentType!==enums/* DataType */.pe.FLOAT)throw new Error/* default */.A("gltf-loader-unsupported-feature","Expected type FLOAT for TANGENT vertex attribute, but found "+enums/* DataType */.pe[o.componentType]);if(4!==o.componentCount)throw new Error/* default */.A("gltf-loader-unsupported-feature","TANGENT vertex attribute must have 4 components, but found "+o.componentCount.toFixed());return new BufferView/* BufferViewVec4f */.Eq(o.raw,o.byteOffset,o.byteStride,o.byteOffset+o.byteStride*o.entryCount)}async getTextureCoordinates(t,r){if(null==t.attributes.TEXCOORD_0)throw new Error/* default */.A("gltf-loader-error","No TEXCOORD_0 vertex data found.");const o=await this.getAccessor(t.attributes.TEXCOORD_0,r);if(2!==o.componentCount)throw new Error/* default */.A("gltf-loader-unsupported-feature","TEXCOORD_0 vertex attribute must have 2 components, but found "+o.componentCount.toFixed());if(o.componentType===enums/* DataType */.pe.FLOAT)return this._wrapAccessor(BufferView/* BufferViewVec2f */.gH,o);if(!o.normalized)throw new Error/* default */.A("gltf-loader-unsupported-feature","Integer component types are only supported for a normalized accessor for TEXCOORD_0.");return W(o)}async getVertexColors(t,r){if(null==t.attributes.COLOR_0)throw new Error/* default */.A("gltf-loader-error","No COLOR_0 vertex data found.");const o=await this.getAccessor(t.attributes.COLOR_0,r);if(4!==o.componentCount&&3!==o.componentCount)throw new Error/* default */.A("gltf-loader-unsupported-feature","COLOR_0 attribute must have 3 or 4 components, but found "+o.componentCount.toFixed());if(4===o.componentCount){if(o.componentType===enums/* DataType */.pe.FLOAT)return this._wrapAccessor(BufferView/* BufferViewVec4f */.Eq,o);if(o.componentType===enums/* DataType */.pe.UNSIGNED_BYTE)return this._wrapAccessor(BufferView/* BufferViewVec4u8 */.XP,o);if(o.componentType===enums/* DataType */.pe.UNSIGNED_SHORT)return this._wrapAccessor(BufferView/* BufferViewVec4u16 */.Uz,o)}else if(3===o.componentCount){if(o.componentType===enums/* DataType */.pe.FLOAT)return this._wrapAccessor(BufferView/* BufferViewVec3f */.xs,o);if(o.componentType===enums/* DataType */.pe.UNSIGNED_BYTE)return this._wrapAccessor(BufferView/* BufferViewVec3u8 */.eI,o);if(o.componentType===enums/* DataType */.pe.UNSIGNED_SHORT)return this._wrapAccessor(BufferView/* BufferViewVec3u16 */.nS,o)}throw new Error/* default */.A("gltf-loader-unsupported-feature","Unsupported component type for COLOR_0 attribute: "+enums/* DataType */.pe[o.componentType])}hasPositions(e){return void 0!==e.attributes.POSITION}hasNormals(e){return void 0!==e.attributes.NORMAL}hasVertexColors(e){return void 0!==e.attributes.COLOR_0}hasTextureCoordinates(e){return void 0!==e.attributes.TEXCOORD_0}hasTangents(e){return void 0!==e.attributes.TANGENT}async getMaterial(e,t,r){let o=e.material?this._materialCache.get(e.material):void 0;if(!o){const n=null!=e.material?fillDefaults_i(this.json.materials[e.material]):fillDefaults_i(),s=n.pbrMetallicRoughness,a=this.hasVertexColors(e),i=this.getTexture(s.baseColorTexture,t),u=this.getTexture(n.normalTexture,t),f=r?this.getTexture(n.occlusionTexture,t):void 0,c=r?this.getTexture(n.emissiveTexture,t):void 0,d=r?this.getTexture(s.metallicRoughnessTexture,t):void 0,l=null!=e.material?e.material:-1;o={alphaMode:n.alphaMode,alphaCutoff:n.alphaCutoff,color:s.baseColorFactor,doubleSided:!!n.doubleSided,colorTexture:await i,normalTexture:await u,name:n.name,id:l,occlusionTexture:await f,emissiveTexture:await c,emissiveFactor:n.emissiveFactor,metallicFactor:s.metallicFactor,roughnessFactor:s.roughnessFactor,metallicRoughnessTexture:await d,hasVertexColors:a,ESRI_externalColorMixMode:n.extras.ESRI_externalColorMixMode,colorTextureTransform:s?.baseColorTexture?.extensions?.KHR_texture_transform,normalTextureTransform:n.normalTexture?.extensions?.KHR_texture_transform,occlusionTextureTransform:n.occlusionTexture?.extensions?.KHR_texture_transform,emissiveTextureTransform:n.emissiveTexture?.extensions?.KHR_texture_transform,metallicRoughnessTextureTransform:s?.metallicRoughnessTexture?.extensions?.KHR_texture_transform}}return o}async getTexture(t,o){if(!t)return;if(0!==(t.texCoord||0))throw new Error/* default */.A("gltf-loader-unsupported-feature","Only TEXCOORD with index 0 is supported.");const n=t.index,s=this.json.textures[n],a=c(null!=s.sampler?this.json.samplers[s.sampler]:{}),i=this._getTextureSourceId(s),u=this.json.images[i],f=await this._loadTextureImageData(n,s,o);return (0,MapUtils/* getOrCreateMapValue */.tE)(this._textureCache,n,(()=>{const t=e=>33071===e||33648===e||10497===e,r=t=>{throw new Error/* default */.A("gltf-loader-error",`Unexpected TextureSampler WrapMode: ${t}`)};return{data:f,wrapS:t(a.wrapS)?a.wrapS:r(a.wrapS),wrapT:t(a.wrapT)?a.wrapT:r(a.wrapT),minFilter:a.minFilter,name:u.name,id:n}}))}getNodeTransform(e){if(void 0===e)return q;let t=this._nodeTransformCache.get(e);if(!t){const r=this.getNodeTransform(this._getNodeParent(e)),o=this.json.nodes[e];o.matrix?t=(0,mat4.m)((0,mat4f64.a)(),r,o.matrix):o.translation||o.rotation||o.scale?(t=(0,mat4f64.b)(r),o.translation&&(0,mat4.w)(t,t,o.translation),o.rotation&&(z[3]=(0,quat.g)(z,o.rotation),(0,mat4.k)(t,t,z[3],z)),o.scale&&(0,mat4.b)(t,t,o.scale)):t=(0,mat4f64.b)(r),this._nodeTransformCache.set(e,t)}return t}_wrapAccessor(e,t){return new e(t.raw,t.byteOffset,t.byteStride,t.byteOffset+t.byteStride*(t.entryCount-1)+t.componentByteSize*t.componentCount)}_resolveUri(e){return (0,urlUtils/* makeAbsolute */.s2)(e,this._baseUri)}_getNodeParent(e){return this._nodeParentMap.get(e)}_checkVersionSupported(){const e=Version/* Version */.R.parse(this.json.asset.version,"glTF");J.validate(e)}_checkRequiredExtensionsSupported(){const t=this.json;if(t.extensionsRequired){if(!t.extensionsRequired.every((e=>this._supportedExtensions.includes(e))))throw new Error/* default */.A("gltf-loader-unsupported-feature","gltf loader was not able to load unsupported feature. Required extensions: "+t.extensionsRequired.join(", "))}}_computeNodeParents(){this.json.nodes.forEach(((e,t)=>{e.children&&e.children.forEach((e=>{this._nodeParentMap.set(e,t)}))}))}async _loadTextureImageData(e,t,r){const o=this._textureLoaders.get(e);if(o)return o;const n=this._createTextureLoader(t,r);return this._textureLoaders.set(e,n),n}_getTextureSourceId(t){if(void 0!==t.extensions&&null!==t.extensions.KHR_texture_basisu)return t.extensions.KHR_texture_basisu.source;if(null!==t.source)return t.source;throw new Error/* default */.A("gltf-loader-unsupported-feature","Source is expected to be defined for a texture. It can also be omitted in favour of an KHR_texture_basisu extension tag.")}async _createTextureLoader(t,r){const o=this._getTextureSourceId(t),n=this.json.images[o];if(n.uri){if(n.uri.endsWith(".ktx2")){const e=await this._context.loadBinary(this._resolveUri(n.uri),r);return new resourceUtils/* EncodedMeshTexture */.Xi(new Uint8Array(e))}return this._context.loadImage(this._resolveUri(n.uri),r)}if(null==n.bufferView)throw new Error/* default */.A("gltf-loader-unsupported-feature","Image bufferView must be defined.");if(null==n.mimeType)throw new Error/* default */.A("gltf-loader-unsupported-feature","Image mimeType must be defined.");const s=this.json.bufferViews[n.bufferView],a=await this.getBuffer(s.buffer,r);if(null!=s.byteStride)throw new Error/* default */.A("gltf-loader-unsupported-feature","byteStride not supported for image buffer");const i=a.byteOffset+(s.byteOffset||0);return (0,resourceUtils/* imageFromBinaryData */.pn)(new Uint8Array(a.buffer,i,s.byteLength),n.mimeType)}async getLoadedBuffersSize(){if(this._glbBuffer)return this._glbBuffer.byteLength;const e=await (0,promiseUtils/* allSettledValues */.nA)(Array.from(this._bufferLoaders.values())),t=await (0,promiseUtils/* allSettledValues */.nA)(Array.from(this._textureLoaders.values()));return e.reduce(((e,t)=>e+(t?.byteLength??0)),0)+t.reduce(((e,t)=>e+(t?(0,resourceUtils/* isEncodedMeshTexture */.x3)(t)?t.data.byteLength:t.width*t.height*4:0)),0)}}const q=(0,mat4.A)((0,mat4f64.a)(),Math.PI/2),J=new Version/* Version */.R(2,0,"glTF"),z=(0,quatf64.a)(),X={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={[enums/* DataType */.pe.BYTE]:1,[enums/* DataType */.pe.UNSIGNED_BYTE]:1,[enums/* DataType */.pe.SHORT]:2,[enums/* DataType */.pe.UNSIGNED_SHORT]:2,[enums/* DataType */.pe.FLOAT]:4,[enums/* DataType */.pe.INT]:4,[enums/* DataType */.pe.UNSIGNED_INT]:4};function W(e){switch(e.componentType){case enums/* DataType */.pe.BYTE:return new BufferView/* BufferViewVec2i8 */.D6(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case enums/* DataType */.pe.UNSIGNED_BYTE:return new BufferView/* BufferViewVec2u8 */.LC(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case enums/* DataType */.pe.SHORT:return new BufferView/* BufferViewVec2i16 */.mJ(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case enums/* DataType */.pe.UNSIGNED_SHORT:return new BufferView/* BufferViewVec2u16 */.Yi(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case enums/* DataType */.pe.UNSIGNED_INT:return new BufferView/* BufferViewVec2u32 */.An(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount);case enums/* DataType */.pe.FLOAT:return new BufferView/* BufferViewVec2f */.gH(e.raw,e.byteOffset,e.byteStride,e.byteOffset+e.byteStride*e.entryCount)}}const Q=/\.gltf$/i,Z=/\.glb$/i;

;// ../node_modules/@arcgis/core/views/3d/glTF/loader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let i=0;async function loader_l(t,r,a={},l=!0){const m=await Y.load(t,r,a),p="gltf_"+i++,T={lods:[],materials:new Map,textures:new Map,meta:u(m)},f=!(!m.json.asset.extras||"symbolResource"!==m.json.asset.extras.ESRI_type),x=new Map;await loader_c(m,(async(t,r,s,i)=>{const u=x.get(s)??0;x.set(s,u+1);const c=void 0!==t.mode?t.mode:enums/* PrimitiveType */.WR.TRIANGLES,f=c===enums/* PrimitiveType */.WR.TRIANGLES||c===enums/* PrimitiveType */.WR.TRIANGLE_STRIP||c===enums/* PrimitiveType */.WR.TRIANGLE_FAN?c:null;if(null==f)return void Logger/* default */.A.getLogger("esri.views.3d.glTF").warn("[Unsupported Feature] Unsupported primitive mode ("+enums/* PrimitiveType */.WR[c]+"). Skipping primitive.");if(!m.hasPositions(t))return void Logger/* default */.A.getLogger("esri.views.3d.glTF").warn("Skipping primitive without POSITION vertex attribute.");const g=m.getPositionData(t,a),h=m.getMaterial(t,a,l),w=m.hasNormals(t)?m.getNormalData(t,a):null,v=m.hasTangents(t)?m.getTangentData(t,a):null,R=m.hasTextureCoordinates(t)?m.getTextureCoordinates(t,a):null,S=m.hasVertexColors(t)?m.getVertexColors(t,a):null,_=m.getIndexData(t,a),E={name:i,transform:(0,mat4f64.b)(r),attributes:{position:await g,normal:w?await w:null,texCoord0:R?await R:null,color:S?await S:null,tangent:v?await v:null},indices:await _,primitiveType:f,material:d(T,await h,p)};let I=null;null!=T.meta?.ESRI_lod&&"screenSpaceRadius"===T.meta.ESRI_lod.metric&&(I=T.meta.ESRI_lod.thresholds[s]),T.lods[s]=T.lods[s]||{parts:[],name:i,lodThreshold:I},T.lods[s].parts[u]=E}));for(const e of T.lods)e.parts=e.parts.filter((e=>!!e));const g=await m.getLoadedBuffersSize();return{model:T,meta:{isEsriSymbolResource:f,uri:m.uri},customMeta:{},size:g}}function u(e){const o=e.json;let t=null;return o.nodes.forEach((e=>{const o=e.extras;null!=o&&(o.ESRI_proxyEllipsoid||o.ESRI_lod)&&(t=o)})),t}async function loader_c(o,t){const r=o.json,s=r.scenes[r.scene||0].nodes,a=s.length>1,n=[];for(const e of s){const o=r.nodes[e];if(n.push(i(e,0)),m(o)&&!a){o.extensions.MSFT_lod.ids.forEach(((e,o)=>i(e,o+1)))}}async function i(s,a){const l=r.nodes[s],u=o.getNodeTransform(s);if(null!=l.weights&&Logger/* default */.A.getLogger("esri.views.3d.glTF").warn("[Unsupported Feature] Morph targets are not supported."),null!=l.mesh){const e=r.meshes[l.mesh];for(const o of e.primitives)n.push(t(o,u,a,e.name))}for(const e of l.children||[])n.push(i(e,a))}await Promise.all(n)}function m(e){return e.extensions?.MSFT_lod&&Array.isArray(e.extensions.MSFT_lod.ids)}function d(e,o,s){const a=o=>{const t=`${s}_tex_${o&&o.id}${o?.name?"_"+o.name:""}`;if(o&&!e.textures.has(t)){const s=l(o.data,{wrap:{s:o.wrapS,t:o.wrapT},mipmap:p.has(o.minFilter),noUnpackFlip:!0});e.textures.set(t,s)}return t},n=`${s}_mat_${o.id}_${o.name}`;if(!e.materials.has(n)){const r=LoaderResult_r({color:[o.color[0],o.color[1],o.color[2]],opacity:o.color[3],alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,colorMixMode:o.ESRI_externalColorMixMode,textureColor:o.colorTexture?a(o.colorTexture):void 0,textureNormal:o.normalTexture?a(o.normalTexture):void 0,textureOcclusion:o.occlusionTexture?a(o.occlusionTexture):void 0,textureEmissive:o.emissiveTexture?a(o.emissiveTexture):void 0,textureMetallicRoughness:o.metallicRoughnessTexture?a(o.metallicRoughnessTexture):void 0,emissiveFactor:[o.emissiveFactor[0],o.emissiveFactor[1],o.emissiveFactor[2]],colorTextureTransform:o.colorTextureTransform,normalTextureTransform:o.normalTextureTransform,occlusionTextureTransform:o.occlusionTextureTransform,emissiveTextureTransform:o.emissiveTextureTransform,metallicRoughnessTextureTransform:o.metallicRoughnessTextureTransform,metallicFactor:o.metallicFactor,roughnessFactor:o.roughnessFactor});e.materials.set(n,r)}return n}const p=new Set([enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR,enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_NEAREST]);


/***/ }),

/***/ 78857:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ GraphicsLayerView3D_m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/heightModelInfoUtils.js
var heightModelInfoUtils = __webpack_require__(1995);
;// ../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const LayerView3D_n=n=>{let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(e){super.postscript(e),(0,heightModelInfoUtils/* supportsHeightModelInfo */.jI)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const e=new AbortController,o=e.signal;this.addHandles((0,handleUtils/* makeHandle */.hA)((()=>e.abort()))),await (0,reactiveUtils/* whenOnce */.C_)((()=>this.view.defaultsFromMap?.heightModelInfoReady),o),(0,promiseUtils/* throwIfAborted */.Te)(o);const i=(0,heightModelInfoUtils/* rejectLayerError */.Hu)(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!e?.minScale||!e.maxScale||e.minScale>=e.maxScale)}getSuspendInfo(){const e=super.getSuspendInfo(),s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(e.outsideScaleRange=!0),e}};return (0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"slicePlaneEnabled",void 0),c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.LayerView3D")],c),c};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry.js
var geometry = __webpack_require__(17639);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection.js
var projection = __webpack_require__(97303);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectBuffer.js
var projectBuffer = __webpack_require__(84119);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js
var dehydratedPoint = __webpack_require__(29394);
;// ../node_modules/@arcgis/core/geometry/projection/projectPointToVectorWithEngine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function projectPointToVectorWithEngine_n(r,n,p,a,f){a??=0;const m=r.spatialReference;if((0,projection.canProjectWithoutEngine)(m,p)||null==m||null==p||(0,spatialReferenceUtils/* equals */.aI)(m,p))return projectPointToVectorWithEngine_c[0]=r.x,projectPointToVectorWithEngine_c[1]=r.y,projectPointToVectorWithEngine_c[2]=r.z??a,void (0,projectBuffer.projectBuffer)(projectPointToVectorWithEngine_c,r.spatialReference,0,n,p,0,1);const l=(0,dehydratedPoint/* makeDehydratedPoint */.T)(r.x,r.y,r.z??a,m),j=await (0,projection.projectWithZConversion)(l,p,f);n[0]=j.x,n[1]=j.y,n[2]=j.z??0}const projectPointToVectorWithEngine_c=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/elevationInfoUtils.js
var elevationInfoUtils = __webpack_require__(27451);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js
var elevationAlignmentUtils = __webpack_require__(27716);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js
var ElevationContext = __webpack_require__(58343);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js
var featureExpressionInfoUtils = __webpack_require__(9104);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignPointsInFeatures.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function elevationAlignPointsInFeatures_c(t,i,s,c,u){const{elevationProvider:g,renderCoordsHelper:v}=t,{elevationInfo:y}=i,{pointsInFeatures:I,spatialReference:h}=c,x=SpatialReference/* default */.A.fromJSON(h),w=(0,featureExpressionInfoUtils/* extractExpressionInfo */.MF)(y,!0),E=await (0,featureExpressionInfoUtils/* createContext */.q6)(w,x,u);(0,promiseUtils/* throwIfAborted */.Te)(u);const R=[],S=new Set,z=new Set;l.spatialReference=x;const P=t.elevationProvider.spatialReference??t.spatialReference;for(const{objectId:e,points:a}of I){const t=s(e);if(null==t){for(const e of a)R.push(e.z??0);S.add(e);continue}t.isDraped&&z.add(e);const p=t.graphic.geometry;elevationAlignPointsInFeatures_m.setFromElevationInfo((0,elevationInfoUtils/* getGeometryEffectiveElevationInfo */.ze)(p,y)),elevationAlignPointsInFeatures_m.updateFeatureExpressionInfoContext(E,t.graphic,i);for(const{x:e,y:r,z:i}of a)l.x=e,l.y=r,l.z=i??0,await projectPointToVectorWithEngine_n(l,j,P,0,{signal:u}),(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(j,g,elevationAlignPointsInFeatures_m,v,d),R.push(d.z)}return{elevations:R,drapedObjectIds:z,failedObjectIds:S}}const elevationAlignPointsInFeatures_m=new ElevationContext/* ElevationContext */.F,l=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,0,SpatialReference/* default */.A.WGS84),d=new elevationAlignmentUtils/* SampleElevationInfo */.Uk,j=[0,0,0];

// EXTERNAL MODULE: ../node_modules/@arcgis/core/Graphic.js
var Graphic = __webpack_require__(25707);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js
var diffUtils = __webpack_require__(64442);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/Layer.js + 1 modules
var Layer = __webpack_require__(68833);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js
var hydratedFeatures = __webpack_require__(85174);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Color.js
var Color = __webpack_require__(96220);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js
var visualVariableUtils = __webpack_require__(28479);
;// ../node_modules/@arcgis/core/renderers/support/renderingInfoUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function renderingInfoUtils_o(t,e){if(!t||t.symbol)return null;const o=e?.renderer;return t&&null!=o&&o.getObservationRenderer?o.getObservationRenderer(t):o}function renderingInfoUtils_r(t,e){if(null!=t.symbol)return t.symbol;const r=renderingInfoUtils_o(t,e);return null!=r&&"dot-density"!==r.type?r.getSymbol(t,e):null}function renderingInfoUtils_i(t,i){const n=renderingInfoUtils_o(t,i),l=renderingInfoUtils_r(t,i);if(null==l)return null;const a={renderer:n,symbol:l};if(null==n||!("visualVariables"in n)||!n.visualVariables)return a;const s=(0,visualVariableUtils.getVisualVariableValues)(n,t,i)??[],u=["proportional","proportional","proportional"];for(const{variable:e,value:o}of s)switch(e.type){case"color":a.color=o.toRgba();break;case"size":if("outline"===e.target)a.outlineSize=o;else{const t=e.axis,r=e.useSymbolValue?"symbol-value":o;switch(t){case"width":u[0]=r;break;case"depth":u[1]=r;break;case"height":u[2]=r;break;case"width-and-depth":u[0]=u[1]=r;break;default:u[0]=u[1]=u[2]=r}}break;case"opacity":a.opacity=o;break;case"rotation":switch(e.axis){case"tilt":a.tilt=o;break;case"roll":a.roll=o;break;default:a.heading=o}}return"proportional"===u[0]&&"proportional"===u[1]&&"proportional"===u[2]||(a.size=u),a}async function renderingInfoUtils_n(t,e){if(null!=t.symbol)return t.symbol;const r=renderingInfoUtils_o(t,e);return null!=r?r.getSymbolAsync(t,e):null}async function renderingInfoUtils_l(r,i){const l=renderingInfoUtils_o(r,i),a=await renderingInfoUtils_n(r,i);if(!a)return null;const s={renderer:l,symbol:a};if(!l||!("visualVariables"in l)||!l.visualVariables)return s;const u=(0,visualVariableUtils.getVisualVariableValues)(l,r,i)??[],c=["proportional","proportional","proportional"];for(const{variable:e,value:o}of u)if("color"===e.type)s.color=Color/* default */.A.toUnitRGBA(o);else if("size"===e.type)if("outline"===e.target)s.outlineSize=o;else{const t=e.axis,r=e.useSymbolValue?"symbol-value":o;"width"===t?c[0]=r:"depth"===t?c[1]=r:"height"===t?c[2]=r:c[0]=c[1]="width-and-depth"===t?r:c[2]=r}else"opacity"===e.type?s.opacity=o:"rotation"===e.type&&"tilt"===e.axis?s.tilt=o:"rotation"===e.type&&"roll"===e.axis?s.roll=o:"rotation"===e.type&&(s.heading=o);return(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))&&(s.size=c),s}function renderingInfoUtils_a(t,e=0){const o=t[e];return"number"==typeof o&&isFinite(o)?o:null}function renderingInfoUtils_s(t){for(let e=0;e<3;e++){const o=t[e];if("number"==typeof o)return isFinite(o)?o:0}return 0}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/Query.js
var Query = __webpack_require__(14474);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/interfaces.js
var interfaces = __webpack_require__(56867);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/constants.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const constants_s=1.2,constants_c=vec4f64.Z,constants_r=4;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/ClassBreaksRenderer.js
var ClassBreaksRenderer = __webpack_require__(17671);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/DictionaryRenderer.js
var DictionaryRenderer = __webpack_require__(84685);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/DotDensityRenderer.js + 1 modules
var DotDensityRenderer = __webpack_require__(20299);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/HeatmapRenderer.js + 1 modules
var HeatmapRenderer = __webpack_require__(25498);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/PieChartRenderer.js + 2 modules
var PieChartRenderer = __webpack_require__(79300);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/Renderer.js
var Renderer = __webpack_require__(76589);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/SimpleRenderer.js
var SimpleRenderer = __webpack_require__(47347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/UniqueValueRenderer.js + 3 modules
var UniqueValueRenderer = __webpack_require__(2692);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/jsonUtils.js
var jsonUtils = __webpack_require__(48887);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols.js + 1 modules
var symbols = __webpack_require__(30822);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/scheduling.js
var scheduling = __webpack_require__(61449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js
var projectVectorToVector = __webpack_require__(42120);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectXYZToVector.js
var projectXYZToVector = __webpack_require__(47092);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingBox.js
var aaBoundingBox = __webpack_require__(4675);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js
var dehydratedFeatures = __webpack_require__(28413);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/rendererConversion.js
var rendererConversion = __webpack_require__(72973);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/arcadeOnDemand.js
var arcadeOnDemand = __webpack_require__(28965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/basemapUtils.js
var basemapUtils = __webpack_require__(30405);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/FillSymbol3DLayer.js + 2 modules
var FillSymbol3DLayer = __webpack_require__(88506);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/LineSymbol3D.js
var LineSymbol3D = __webpack_require__(68324);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/MeshSymbol3D.js
var MeshSymbol3D = __webpack_require__(50151);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/PointSymbol3D.js
var PointSymbol3D = __webpack_require__(66960);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/PolygonSymbol3D.js
var PolygonSymbol3D = __webpack_require__(65216);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/edges/SolidEdges3D.js
var SolidEdges3D = __webpack_require__(38366);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaults.js
var defaults = __webpack_require__(26207);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaultsJSON.js
var defaultsJSON = __webpack_require__(23173);
;// ../node_modules/@arcgis/core/symbols/support/defaults3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const defaults3D_a=PointSymbol3D/* default */.A.fromSimpleMarkerSymbol(defaults/* defaultPointSymbol2D */.UK),defaults3D_c=LineSymbol3D/* default */.A.fromSimpleLineSymbol(defaults/* defaultPolylineSymbol2D */.A7),u=PolygonSymbol3D/* default */.A.fromSimpleFillSymbol(defaults/* defaultPolygonSymbol2D */.Cx),S=new MeshSymbol3D/* default */.A({symbolLayers:new Collection/* default */.A([new FillSymbol3DLayer/* default */.A({material:{color:defaultsJSON/* defaultColor */.fT},edges:new SolidEdges3D/* default */.A({size:"1px",color:defaultsJSON/* defaultOutlineColor */.JR})})])});function defaults3D_j(o){if(null==o)return null;switch(o.type){case"mesh":return S;case"point":case"multipoint":return defaults3D_a;case"polyline":return defaults3D_c;case"polygon":case"extent":return u}return null}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/symbolConversion.js
var symbolConversion = __webpack_require__(79689);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/ObjectSymbol3DLayerResource.js
var ObjectSymbol3DLayerResource = __webpack_require__(50124);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayerConstants.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DPathSymbolLayerConstants_o=3,Graphics3DPathSymbolLayerConstants_t=3,Graphics3DPathSymbolLayerConstants_c=10;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js + 1 modules
var GeometryUtil = __webpack_require__(94643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LodResources_s{constructor(e,t=null){this.geometry=e,this.textures=t}}class LodResources_r{constructor(e,s,r){this.components=e,this.minScreenSpaceRadius=s,this.pivotOffset=r;const n=this.geometries;this.numVertices=n.reduce(((e,s)=>e+s.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length),0)}get geometries(){return (0,arrayUtils/* unique */.Am)(this.components.map((e=>e.geometry)))}}class LodResources_n{constructor(e){this.levels=e,this.levels.sort(((e,t)=>e.minScreenSpaceRadius===t.minScreenSpaceRadius?e.numVertices-t.numVertices:e.minScreenSpaceRadius-t.minScreenSpaceRadius))}}function LodResources_c(t){const s=[];return t.levels.forEach((e=>e.components.forEach((e=>s.push(e.geometry.material))))),(0,arrayUtils/* unique */.Am)(s)}function LodResources_o(t){const s=new Array;return t.levels.forEach((e=>e.components.forEach((e=>{null!=e.textures&&s.push(...e.textures)})))),(0,arrayUtils/* unique */.Am)(s)}function LodResources_i(t){const s=new Array;return t.levels.forEach((e=>e.components.forEach((e=>s.push(e.geometry))))),(0,arrayUtils/* unique */.Am)(s)}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/primitiveObjectSymbolUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function primitiveObjectSymbolUtils_d(e){switch(e){case"sphere":case"cube":case"diamond":case"cylinder":case"cone":case"inverted-cone":case"tetrahedron":return!0}return!1}function primitiveObjectSymbolUtils_S(d,S){const m=(n,s,a=!1)=>new LodResources_n(n.map((n=>{const c=s(n.tesselation);return a&&(0,GeometryUtil/* cgToGIS */.zC)(c),new LodResources_r([new LodResources_s(c)],n.minScreenSpaceRadius)})));switch(d){case"sphere":return m([{tesselation:0,minScreenSpaceRadius:0},{tesselation:1,minScreenSpaceRadius:8},{tesselation:2,minScreenSpaceRadius:16},{tesselation:3,minScreenSpaceRadius:50},{tesselation:4,minScreenSpaceRadius:250}],(e=>(0,GeometryUtil/* createPolySphereGeometry */.uX)(S,.5,e,!0)));case"cube":return m([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,GeometryUtil/* createBoxGeometry */.C1)(S,1)));case"cone":return m(primitiveObjectSymbolUtils_l,(e=>(0,GeometryUtil/* createConeGeometry */.EE)(S,1,.5,e,!1)),!0);case"inverted-cone":return m(primitiveObjectSymbolUtils_l,(e=>(0,GeometryUtil/* createConeGeometry */.EE)(S,1,.5,e,!0)),!0);case"cylinder":return m(primitiveObjectSymbolUtils_l,(e=>(0,GeometryUtil/* createCylinderGeometry */.nW)(S,1,.5,e,[0,0,1],[0,0,.5])));case"tetrahedron":return m([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,GeometryUtil/* createTetrahedronGeometry */.Ho)(S,1)),!0);case"diamond":return m([{tesselation:0,minScreenSpaceRadius:0}],(()=>(0,GeometryUtil/* createDiamondGeometry */.td)(S,1)),!0);default:return}}const primitiveObjectSymbolUtils_l=[{tesselation:6,minScreenSpaceRadius:0},{tesselation:18,minScreenSpaceRadius:7},{tesselation:64,minScreenSpaceRadius:65}];

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/SymbolComplexity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class SymbolComplexity_e{constructor(e){this.estimated=!1,this.verticesPerFeature=e.verticesPerFeature??0,this.verticesPerCoordinate=e.verticesPerCoordinate??0,this.drawCallsPerFeature=e.drawCallsPerFeature??0,this.memory=e.memory??new SymbolComplexity_a}}class SymbolComplexity_t extends SymbolComplexity_e{constructor(e){super(e),this.estimated=!0}}class SymbolComplexity_s extends SymbolComplexity_e{constructor(e,t){super(t),this.numComplexities=e}}class SymbolComplexity_r extends SymbolComplexity_t{constructor(e,t){super(t),this.numComplexities=e}}class SymbolComplexity_a{constructor(){this.bytesPerFeature=0,this.bytesPerFeatureLabel=0,this.resourceBytes=0,this.draped={bytesPerFeature:0,bytesPerFeatureLabel:0}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/edgeUtils.js + 1 modules
var edgeUtils = __webpack_require__(14242);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js + 2 modules
var DefaultMaterial = __webpack_require__(54482);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/defaultSymbolComplexity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const P=new SymbolComplexity_t({});function defaultSymbolComplexity_m(e){if("web-style"===e.type)return P;return F(e.symbolLayers.toArray().map((r=>L(e,r))))}function F(e){let r=0,t=0,a=0,s=!1,u=0;const o=new SymbolComplexity_a;for(const b of e)null!=b&&(r+=b.verticesPerFeature,t+=b.verticesPerCoordinate,a+=b.drawCallsPerFeature,o.bytesPerFeature+=b.memory.bytesPerFeature,o.bytesPerFeatureLabel+=b.memory.bytesPerFeatureLabel,o.resourceBytes+=b.memory.resourceBytes,o.draped.bytesPerFeature+=b.memory.bytesPerFeature,o.draped.bytesPerFeatureLabel+=b.memory.bytesPerFeatureLabel,s=s||b.estimated,++u);return s?new SymbolComplexity_r(u,{verticesPerFeature:r,verticesPerCoordinate:t,drawCallsPerFeature:a,memory:o}):new SymbolComplexity_s(u,{verticesPerFeature:r,verticesPerCoordinate:t,drawCallsPerFeature:a,memory:o})}function defaultSymbolComplexity_d(e){const r=F(e);return r.numComplexities>0&&(r.verticesPerFeature/=r.numComplexities,r.verticesPerCoordinate/=r.numComplexities,r.drawCallsPerFeature/=r.numComplexities,r.memory.bytesPerFeature/=r.numComplexities,r.memory.bytesPerFeatureLabel/=r.numComplexities,r.memory.resourceBytes/=r.numComplexities,r.memory.draped.bytesPerFeature/=r.numComplexities,r.memory.draped.bytesPerFeatureLabel/=r.numComplexities),r}const p={};function L(u,b){const i=C(u,b),y=(0,edgeUtils/* hasEdges */.RF)(b)?2:0;switch(b.type){case"extrude":return new SymbolComplexity_e({verticesPerFeature:-12,verticesPerCoordinate:12,drawCallsPerFeature:y,memory:i});case"fill":if("mesh-3d"===u.type)return new SymbolComplexity_e({drawCallsPerFeature:y,memory:i});if(null!=b.outline&&b.outline.size>0)return new SymbolComplexity_e({verticesPerFeature:-12,verticesPerCoordinate:9,memory:i});case"water":return new SymbolComplexity_e({verticesPerFeature:-6,verticesPerCoordinate:3,memory:i});case"line":return new SymbolComplexity_e({verticesPerFeature:-6,verticesPerCoordinate:6,memory:i});case"object":return b.resource?.href?new SymbolComplexity_t({verticesPerFeature:100,memory:i}):{...f(b.resource?.primitive??ObjectSymbol3DLayerResource/* defaultPrimitive */.r),memory:i};case"path":{let r=0,u=0;switch(b.profile){case"circle":r=Graphics3DPathSymbolLayerConstants_c;break;case"quad":r=4;break;default:return void (0,compilerUtils/* neverReached */.Xb)(b.profile)}switch(b.join??"simple"){case"round":u=Graphics3DPathSymbolLayerConstants_o;break;case"miter":case"bevel":u=1;break;default:return}const o=2*r,y=r*u*2,n=y+o;let l=-2*y-o;switch(b.cap){case"none":break;case"butt":case"square":l+=2*(r-1);break;case"round":l+=2*(r*(Graphics3DPathSymbolLayerConstants_t-1)*2+r);break;default:return}return new SymbolComplexity_e({verticesPerFeature:l,verticesPerCoordinate:n,memory:i})}case"text":case"icon":return new SymbolComplexity_e({verticesPerFeature:6,memory:i});default:return}}function C(r,t){const a="point-3d"===r.type;switch(t.type){case"extrude":return t.edges&&t.edges.size>0?E.EXTRUDE_EDGES:E.EXTRUDE;case"fill":return null!=t.outline&&t.outline.size>0?E.FILL_OUTLINE:E.FILL;case"water":return E.FILL;case"line":return"round"===t.join?E.LINE_ROUND:E.LINE_MITER;case"path":switch(t.join){case"round":switch(t.profile){case"circle":return E.PATH_ROUND_CIRCLE;case"quad":return E.PATH_ROUND_QUAD;default:return void (0,compilerUtils/* neverReached */.Xb)(t.profile)}case"miter":case"bevel":switch(t.profile){case"circle":return E.PATH_MITER_CIRCLE;case"quad":return E.PATH_MITER_QUAD;default:return void (0,compilerUtils/* neverReached */.Xb)(t.profile)}default:return}case"object":return a?E.OBJECT_POINT:E.OBJECT_POLYGON;case"icon":case"text":return a?E.ICON_POINT:E.ICON_POLYGON;default:return}}function f(e){const r=p[e];if(r)return r;const t=w(primitiveObjectSymbolUtils_S(e,new DefaultMaterial/* DefaultMaterial */.$U({})).levels);return p[e]=new SymbolComplexity_e({verticesPerFeature:t}),p[e]}function w(e){return e.reduce(((e,r,t)=>e+r.numVertices*(1/10**t)),0)/e.reduce(((e,r,t)=>e+1/10**t),0)}const E={ICON_POINT:{bytesPerFeature:2111.586639736967,bytesPerFeatureLabel:870.520855,resourceBytes:0,draped:{bytesPerFeature:1799.2619971817762,bytesPerFeatureLabel:857.4890149999999}},ICON_POLYGON:{bytesPerFeature:2829.8183316810564,bytesPerFeatureLabel:858.0951816666667,resourceBytes:0,draped:{bytesPerFeature:2521.242008227286,bytesPerFeatureLabel:869.6919750000001}},OBJECT_POINT:{bytesPerFeature:607.8007336777831,bytesPerFeatureLabel:715.7017950000001,resourceBytes:0,draped:{bytesPerFeature:607.8007336777831,bytesPerFeatureLabel:715.7017950000001}},OBJECT_POLYGON:{bytesPerFeature:1111.4123028075749,bytesPerFeatureLabel:684.5498416666667,resourceBytes:0,draped:{bytesPerFeature:1111.4123028075749,bytesPerFeatureLabel:684.5498416666667}},LINE_MITER:{bytesPerFeature:3053.034748007272,bytesPerFeatureLabel:804.5473016666666,resourceBytes:0,draped:{bytesPerFeature:2649.5661560225844,bytesPerFeatureLabel:843.3404083333334}},LINE_ROUND:{bytesPerFeature:3225.35183564197,bytesPerFeatureLabel:807.296835,resourceBytes:0,draped:{bytesPerFeature:2650.9229994933276,bytesPerFeatureLabel:861.108335}},PATH_MITER_CIRCLE:{bytesPerFeature:38664.832646351235,bytesPerFeatureLabel:862.95665,resourceBytes:0,draped:{bytesPerFeature:38664.832646351235,bytesPerFeatureLabel:862.95665}},PATH_ROUND_CIRCLE:{bytesPerFeature:42462.97022293504,bytesPerFeatureLabel:851.35885,resourceBytes:0,draped:{bytesPerFeature:42462.97022293504,bytesPerFeatureLabel:851.35885}},PATH_MITER_QUAD:{bytesPerFeature:25558.22153327986,bytesPerFeatureLabel:838.56885,resourceBytes:0,draped:{bytesPerFeature:25558.22153327986,bytesPerFeatureLabel:838.56885}},PATH_ROUND_QUAD:{bytesPerFeature:42274.86801764233,bytesPerFeatureLabel:867.5658500000001,resourceBytes:0,draped:{bytesPerFeature:42274.86801764233,bytesPerFeatureLabel:867.5658500000001}},FILL:{bytesPerFeature:3124.272297197038,bytesPerFeatureLabel:850.6966816666666,resourceBytes:0,draped:{bytesPerFeature:2630.99580851019,bytesPerFeatureLabel:845.464495}},FILL_OUTLINE:{bytesPerFeature:4501.643043274039,bytesPerFeatureLabel:866.3982816666668,resourceBytes:0,draped:{bytesPerFeature:3841.8870233416183,bytesPerFeatureLabel:854.9969683333334}},EXTRUDE:{bytesPerFeature:7545.975968446941,bytesPerFeatureLabel:859.7106016666668,resourceBytes:0,draped:{bytesPerFeature:7545.975968446941,bytesPerFeatureLabel:859.7106016666668}},EXTRUDE_EDGES:{bytesPerFeature:2872.306473115409,bytesPerFeatureLabel:604.556581666667,resourceBytes:0,draped:{bytesPerFeature:2872.306473115409,bytesPerFeatureLabel:604.556581666667}}};

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/DisplayFeatureLimit.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class DisplayFeatureLimit_e{constructor(e,m,t){this.maximumTotalNumberOfVertices=e,this.maximumNumberOfFeatures=m,this.averageSymbolComplexity=t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/Scheduler.js + 1 modules
var Scheduler = __webpack_require__(93399);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Multipoint.js
var Multipoint = __webpack_require__(90067);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationQuery.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class ElevationQuery_l{constructor(e,t){this.spatialReference=e,this._view=t}getElevation(e,t,r){return this._view.elevationProvider.getElevation(e,t,0,this.spatialReference,r)}async queryElevation(e,t,r,s,i){return this._view.elevationProvider.queryElevation(e,t,0,this.spatialReference,i,r,s)}}class ElevationQuery_a{constructor(e,t,r,s){this.spatialReference=t,this._getElevationQueryProvider=r,this._queries=new Array,this._queryOptions={...s,ignoreInvisibleLayers:!0},this._frameTask=e.registerTask(i.ELEVATION_QUERY,this)}destroy({completeTasks:e}={completeTasks:!1}){if(this._frameTask.remove(),this.running)if(e)this.runTask(n);else for(const r of this._queries)r.result.reject(t())}queryElevation(i,n,o,l=0){const a=r(),u={x:i,y:n,minDemResolution:l,result:a,signal:o};return this._queries.push(u),s(o,(()=>{e(this._queries,u),a.reject(t())})),a.promise}get running(){return this._queries.length>0}runTask(e){const r=this._queries;this._queries=[];const i=this._getElevationQueryProvider();if(!i)return r.forEach((e=>e.result.reject())),void e.madeProgress();const n=r.map((e=>[e.x,e.y])),l=r.reduce(((e,t)=>Math.min(e,t.minDemResolution)),1/0),a=new o({points:n,spatialReference:this.spatialReference}),u=r.length>1&&r.some((e=>!!e.signal))?new AbortController:null,c=null!=u?u.signal:r[0].signal;if(null!=u){let e=0;r.forEach((i=>s(i.signal,(()=>{e++,i.result.reject(t()),e===r.length&&u.abort()}))))}const h={...this._queryOptions,minDemResolution:l,signal:c};i.queryElevation(a,h).then((e=>{r.forEach(((r,s)=>{null!=r.signal&&r.signal.aborted?r.result.reject(t()):r.result.resolve(e.geometry.points[s][2])}))})).catch((e=>{r.forEach((t=>t.result.reject(e)))})),e.madeProgress()}get test(){const e=this;return{update:()=>e._queries.length>0&&e.runTask(n)}}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/enums.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var enums_L,enums_A;!function(L){L[L.USER=1]="USER",L[L.SCALE_RANGE=2]="SCALE_RANGE",L[L.FILTER=4]="FILTER",L[L.DECONFLICTION=8]="DECONFLICTION",L[L.ALL_GRAPHIC=15]="ALL_GRAPHIC",L[L.ALL_LABEL=255]="ALL_LABEL"}(enums_L||(enums_L={})),function(L){L[L.GRAPHIC=1]="GRAPHIC",L[L.LABEL=16]="LABEL"}(enums_A||(enums_A={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js
var OptimizedFeature = __webpack_require__(32597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js + 1 modules
var optimizedFeatureQueryEngineAdapter = __webpack_require__(62408);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DFeatureStore_u=(0,aaBoundingBox/* create */.vt)();let Graphics3DFeatureStore_d=class extends Accessor/* default */.A{constructor(t){super(t),this.events=new Evented/* default */.A,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.featureAdapter={getAttribute:(t,e)=>"graphic"in t?t.graphic.attributes[e]:optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.getAttribute(t,e),getAttributes:t=>"graphic"in t?t.graphic.attributes:optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.getAttributes(t),getObjectId:t=>"graphic"in t?(0,dehydratedFeatures/* getObjectId */.RW)(t.graphic,this.objectIdField)??void 0:optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.getObjectId(t),getGeometry:t=>"graphic"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.getGeometry(t),getCentroid:(t,e)=>{if("graphic"in t){let r=null;null!=t.centroid?r=t.centroid:"point"===t.graphic.geometry.type&&(0,projection.projectPoint)(t.graphic.geometry,Graphics3DFeatureStore_l,this.viewSpatialReference)&&(r=Graphics3DFeatureStore_l);const o=new Array(2+(e.hasZ?1:0)+(e.hasM?1:0));return null==r?(o[0]=0,o[1]=0,o[2]=0,o[3]=0):(o[0]=r.x,o[1]=r.y,e.hasZ&&(o[2]=r.hasZ?r.z:0),e.hasM&&(o[e.hasZ?3:2]=r.hasM?r.m:0)),new OptimizedGeometry/* default */.A([],o)}return optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.getCentroid(t,e)},cloneWithGeometry:(t,e)=>"graphic"in t?new OptimizedFeature/* OptimizedFeature */.Om(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):optimizedFeatureQueryEngineAdapter/* optimizedFeatureQueryEngineAdapter */.T.cloneWithGeometry(t,e)}}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,e){const r=this.getSpatialIndex();for(const o of t){const t=this.featureAdapter.getObjectId(o);null!=r.getBounds(t,Graphics3DFeatureStore_u)&&e(Graphics3DFeatureStore_u)}}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"getSpatialIndex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"forEach",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"objectIdField",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"viewSpatialReference",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFeatureStore_d.prototype,"featureSpatialReference",void 0),Graphics3DFeatureStore_d=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.Graphics3DFeatureStore")],Graphics3DFeatureStore_d);const Graphics3DFeatureStore_l={type:"point",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicCreationContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DGraphicCreationContext_r{constructor(r,s,t){this.graphic=r,this.renderingInfo=s,this.layer=t}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DSymbolCreationContext_e{constructor(e,s){this.scheduler=e,this.schedule=s,this.sharedResources=null,this.streamDataRequester=null,this.elevationProvider=null,this.renderer=null,this.stage=null,this.clippingExtent=null,this.renderCoordsHelper=null,this.overlaySR=null,this.layer=null,this.drapeSourceRenderer=null,this.graphicsCoreOwner=null,this.localOriginFactory=null,this.featureExpressionInfoContext=null,this.screenSizePerspectiveEnabled=!0,this.slicePlaneEnabled=!1,this.physicalBasedRenderingEnabled=!1,this.skipHighSymbolLods=!1,this.isAsync=!1}}class Graphics3DSymbolCreationContext_s{constructor(){this.renderPriority=0,this.renderPriorityStep=1,this.ignoreDrivers=!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/callouts/calloutUtils.js
var calloutUtils = __webpack_require__(65834);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/computeTranslationToOriginAndRotation.js
var computeTranslationToOriginAndRotation = __webpack_require__(59538);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js
var graphicUtils = __webpack_require__(54096);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/debugFlags.js
var debugFlags = __webpack_require__(19620);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/ElevationProvider.js
var ElevationProvider = __webpack_require__(27054);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js + 3 modules
var Geometry = __webpack_require__(59568);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryWithMapPositions.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class GeometryWithMapPositions_t extends (/* unused pure expression or super */ null && (o)){}function GeometryWithMapPositions_e(o){return null!=o.mapPositions}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationAligners.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function ElevationAligners_u(t,e,o,n,a){const r=t.stageObject,s=r.geometries;let i=0;for(const l of s){if(!GeometryWithMapPositions_e(l))continue;const{update:t,averageGeometrySampledElevation:s}=ElevationAligners_j(l,e,o,n,a);i+=s,t&&r.geometryVertexAttributeUpdated(l,VertexAttribute/* VertexAttribute */.r.POSITION)}return i/s.length}function ElevationAligners_p(e,n,r,s,m,f){const c=e.stageObject,u=n.centerPointInElevationSR;let p=0;if(c.usesVerticalDistanceToGround)s(u,ElevationAligners_E),(0,graphicUtils/* updateVertexAttributeAuxpos1w */.Ig)(c,ElevationAligners_E.verticalDistanceToGround),p=ElevationAligners_E.sampledElevation;else{s(u,ElevationAligners_E);"absolute-height"!==n.mode&&(p=ElevationAligners_E.sampledElevation)}const I=(0,mat4.h)(g,f??c.transformation),d=(0,vec3.s)(v,I[12],I[13],I[14]);debugFlags/* debugFlags */.b.TESTS_DISABLE_OPTIMIZATIONS?(T[0]=u.x,T[1]=u.y,T[2]=ElevationAligners_E.z,(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(u.spatialReference,T,I,m.spatialReference)&&(f?(0,mat4.h)(f,I):c.transformation=I)):m.setAltitudeOfTransformation(ElevationAligners_E.z,I);const S=b/m.unitInMeters;return(Math.abs(I[12]-d[0])>=S||Math.abs(I[13]-d[1])>=S||Math.abs(I[14]-d[2])>=S)&&(f?(0,mat4.h)(f,I):c.transformation=I),p}const g=(0,mat4f64.a)();function I(t,e,n,r,s){const i=t.graphics3DSymbolLayer.lodRenderer;if(null==i)return 0;const m=e.centerPointInElevationSR;r(m,ElevationAligners_E);const f="absolute-height"!==e.mode?ElevationAligners_E.sampledElevation:0,c=i.instanceData,u=t.instanceIndex,p=O;c.getGlobalTransform(u,p);const g=(0,vec3.s)(v,p[12],p[13],p[14]);debugFlags/* debugFlags */.b.TESTS_DISABLE_OPTIMIZATIONS?(T[0]=m.x,T[1]=m.y,T[2]=ElevationAligners_E.z,(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(m.spatialReference,T,p,s.spatialReference)&&c.setGlobalTransform(u,p)):s.setAltitudeOfTransformation(ElevationAligners_E.z,p);const I=b/s.unitInMeters;return(debugFlags/* debugFlags */.b.TESTS_DISABLE_OPTIMIZATIONS||Math.abs(p[12]-g[0])>=I||Math.abs(p[13]-g[1])>=I||Math.abs(p[14]-g[2])>=I)&&c.setGlobalTransform(u,p),f}function ElevationAligners_d(t,e,o,n,a){const r=t.stageObject,s=r.geometries;if(0===s.length)return 0;let i=0,l=null,m=0,u=!1;for(const p of s){if(!GeometryWithMapPositions_e(p))continue;const t=p.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);if(t!==l){const{update:r,averageGeometrySampledElevation:s}=ElevationAligners_j(p,e,o,n,a);m=s,l=t,u=r}u&&r.geometryVertexAttributeUpdated(p,VertexAttribute/* VertexAttribute */.r.POSITION),i+=m}return i/s.length}const b=.01,T=(0,vec3f64.c)(),ElevationAligners_S=(0,vec3f64.c)(),h=(0,vec3f64.c)(),O=(0,mat4f64.a)(),v=(0,vec3f64.c)(),ElevationAligners_E=new elevationAlignmentUtils/* SampleElevationInfo */.Uk;function ElevationAligners_j(t,e,o,n,a){let s=!1;const i=t.transformation,f=e.requiresSampledElevationInfo;ElevationAligners_S[0]=i[12],ElevationAligners_S[1]=i[13],ElevationAligners_S[2]=i[14],t.invalidateBoundingInfo();const u=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION),p=u.data,g=u.size,I=p.length/g,d=new ElevationProvider/* SamplePosition */.aY(t.mapPositions,o);let O=0,v=0;for(let m=0;m<I;m++){if(h[0]=p[O],h[1]=p[O+1],h[2]=p[O+2],n(d,ElevationAligners_E),f&&(v+=ElevationAligners_E.sampledElevation),debugFlags/* debugFlags */.b.TESTS_DISABLE_OPTIMIZATIONS)p[O]=d.array[d.offset],p[O+1]=d.array[d.offset+1],p[O+2]=ElevationAligners_E.z,(0,projectBuffer.projectBuffer)(p,o,O,p,a.spatialReference,O,1),p[O]-=ElevationAligners_S[0],p[O+1]-=ElevationAligners_S[1],p[O+2]-=ElevationAligners_S[2],s=!0;else{T[0]=p[O]+ElevationAligners_S[0],T[1]=p[O+1]+ElevationAligners_S[1],T[2]=p[O+2]+ElevationAligners_S[2],a.setAltitude(T,ElevationAligners_E.z),p[O]=T[0]-ElevationAligners_S[0],p[O+1]=T[1]-ElevationAligners_S[1],p[O+2]=T[2]-ElevationAligners_S[2];const t=b/a.unitInMeters;(Math.abs(h[0]-p[O])>=t||Math.abs(h[1]-p[O+1])>=t||Math.abs(h[2]-p[O+2])>=t)&&(s=!0)}O+=g,d.offset+=3}return v/=I,{update:s,averageGeometrySampledElevation:v}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/sphere.js
var sphere = __webpack_require__(96245);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/interfaces.js
var edgeRendering_interfaces = __webpack_require__(34443);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObject3DGraphicLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DObject3DGraphicLayer_m{constructor(e,t,i){this.baseMaterial=e,this.edgeMaterials=t,this.properties=i}}class Graphics3DObject3DGraphicLayer_p{get isElevationSource(){return!!this.stageObject.lastValidElevationBB}constructor(e,t,i,s,a,n,r,o=null){this.graphics3DSymbolLayer=e,this.stageObject=t,this._uniqueGeometries=i,this._uniqueMaterials=s,this._sharedResource=a,this.elevationAligner=n,this.elevationContext=r,this._edgeState=o,this.type="object3d",this._stageLayer=null,this._visible=!1,this._addedToStage=!1,this.alignedSampledElevation=0,this.needsElevationUpdates=!1,this.useObjectOriginAsAttachmentOrigin=!1}initialize(e){this._stageLayer=e;const t=e.stage;t.addMany(this._uniqueMaterials),t.addMany(this._uniqueGeometries),t.add(this.stageObject)}destroy(){if(!this._stageLayer)return;const e=this._stageLayer.stage;e.removeMany(this._uniqueMaterials),e.removeMany(this._uniqueGeometries),e.remove(this.stageObject),this._addedToStage&&(this._stageLayer.remove(this.stageObject),this._addedToStage=!1);const t=e.renderer.edgeView;t?.hasObject(this.stageObject)&&t.removeObject(this.stageObject),this.stageObject.dispose(),this._sharedResource?.release(),this._visible=!1,this._stageLayer=null}layerOpacityChanged(e,t){if(null==this._edgeState)return;const i=Graphics3DObject3DGraphicLayer_v(this._edgeState.baseMaterial);let s=!1;for(const a of this._edgeState.edgeMaterials)a.objectTransparency!==i&&(a.objectTransparency=i,s=!0);s&&this.resetEdgeObject(t);this._stageLayer.stage.renderer.ensureEdgeView().updateAllComponentOpacities(this.stageObject,[e])}slicePlaneEnabledChanged(e,t){if(null==this._edgeState)return;this._stageLayer.stage.renderer.ensureEdgeView().updateAllComponentMaterials(this.stageObject,this._edgeState.edgeMaterials,{hasSlicePlane:e},!t),this._edgeState.properties.hasSlicePlane=e}setVisibility(e){if(null!=this._stageLayer&&this._visible!==e&&(this._visible=e,this.stageObject.visible=e,this._visible&&!this._addedToStage&&(this._stageLayer.add(this.stageObject),this._addedToStage=!0),this._edgeState)){const t=this._stageLayer.stage.renderer.ensureEdgeView();t.hasObject(this.stageObject)?t.updateObjectVisibility(this.stageObject,e):e&&this._addOrUpdateEdgeObject(t,!1)}}get visible(){return this._visible}alignWithElevation(e,t,i,s){if(null==this.elevationAligner)return;null!=i&&(0,featureExpressionInfoUtils/* setContextFeature */.gf)(this.elevationContext.featureExpressionInfoContext,i);const a=(i,s)=>(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(i,e,this.elevationContext,t,s);this.alignedSampledElevation=this.elevationAligner(this,this.elevationContext,e.spatialReference,a,t),this.resetEdgeObject(s)}alignWithAbsoluteElevation(e,t,i){const s=(t,i)=>{i.sampledElevation=e,i.verticalDistanceToGround=0,i.z=e};this.alignedSampledElevation=this.elevationAligner(this,this.elevationContext,null,s,t),this.resetEdgeObject(i)}getCenterObjectSpace(t=(0,vec3f64.c)()){return (0,vec3.c)(t,(0,sphere.g)(this.stageObject.boundingVolumeObjectSpace.bounds))}getBoundingBoxObjectSpace(e=(0,aaBoundingBox/* create */.vt)()){const t=this.stageObject.boundingVolumeObjectSpace;return (0,aaBoundingBox/* setMin */.Ne)(e,t.min),(0,aaBoundingBox/* setMax */.vI)(e,t.max),e}computeAttachmentOrigin(e){const s=this.stageObject.effectiveTransformation;if(this.useObjectOriginAsAttachmentOrigin)e.render.origin[0]+=s[12],e.render.origin[1]+=s[13],e.render.origin[2]+=s[14],e.render.num++;else for(const a of this.stageObject.geometries)a.computeAttachmentOrigin(Graphics3DObject3DGraphicLayer_S)&&((0,vec3.e)(Graphics3DObject3DGraphicLayer_S,Graphics3DObject3DGraphicLayer_S,s),(0,vec3.g)(e.render.origin,e.render.origin,Graphics3DObject3DGraphicLayer_S),e.render.num++)}async getProjectedBoundingBox(e,i,s,a,n){const r=this.getBoundingBoxObjectSpace(n),g=y,d=(0,aaBoundingBox/* isPoint */.fT)(r)?1:g.length;for(let o=0;o<d;o++){const e=g[o];Graphics3DObject3DGraphicLayer_f[0]=r[e[0]],Graphics3DObject3DGraphicLayer_f[1]=r[e[1]],Graphics3DObject3DGraphicLayer_f[2]=r[e[2]],(0,vec3.e)(Graphics3DObject3DGraphicLayer_f,Graphics3DObject3DGraphicLayer_f,this.stageObject.transformation),_[3*o]=Graphics3DObject3DGraphicLayer_f[0],_[3*o+1]=Graphics3DObject3DGraphicLayer_f[1],_[3*o+2]=Graphics3DObject3DGraphicLayer_f[2]}if(!e(_,0,d))return null;(0,aaBoundingBox/* empty */.Ie)(r);let u=null;this.calculateRelativeScreenBounds&&(u=this.calculateRelativeScreenBounds());for(let t=0;t<3*d;t+=3){for(let e=0;e<3;e++)r[e]=Math.min(r[e],_[t+e]),r[e+3]=Math.max(r[e+3],_[t+e]);u&&s.push({location:_.slice(t,t+3),screenSpaceBoundingRect:u})}if(i?.service&&"absolute-height"!==this.elevationContext.mode){(0,aaBoundingBox/* center */.gX)(r,Graphics3DObject3DGraphicLayer_S);const e="relative-to-scene"===this.elevationContext.mode?"scene":"ground";let t=0;if(i.useViewElevation)t=i.service.getElevation(Graphics3DObject3DGraphicLayer_S[0],Graphics3DObject3DGraphicLayer_S[1],e)??0;else try{const s=(0,graphicUtils/* demResolutionForBoundingBox */.vY)(r,i.service.spatialReference,i);t=await i.service.queryElevation(Graphics3DObject3DGraphicLayer_S[0],Graphics3DObject3DGraphicLayer_S[1],a,s,e)??0}catch(O){}(0,aaBoundingBox/* offset */.cY)(r,0,0,-this.alignedSampledElevation+t)}return r}addObjectState(e,t){e===basicInterfaces/* Object3DState */.Mg.Highlight&&t.addObject(this.stageObject,this.stageObject.highlight()),e===basicInterfaces/* Object3DState */.Mg.MaskOccludee&&t.addObject(this.stageObject,this.stageObject.maskOccludee())}removeObjectState(e){e.removeObject(this.stageObject)}resetEdgeObject(e){if(null==this._edgeState)return;const t=this._stageLayer.stage.renderer.ensureEdgeView();this._visible?this._addOrUpdateEdgeObject(t,e):t.removeObject(this.stageObject)}_addOrUpdateEdgeObject(e,t){const i=this._edgeState;if(null==i)return;const s=Graphics3DObject3DGraphicLayer_v(i.baseMaterial);for(const a of i.edgeMaterials)a.objectTransparency=s;e.addOrUpdateObject3D(this.stageObject,i.edgeMaterials,i.properties,!t).then((()=>this._stageLayer?.sync()))}}function Graphics3DObject3DGraphicLayer_v(e){return e.isVisible()?e.parameters.transparent?edgeRendering_interfaces/* Transparency */.x.TRANSPARENT:edgeRendering_interfaces/* Transparency */.x.OPAQUE:edgeRendering_interfaces/* Transparency */.x.INVISIBLE}const _=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Graphics3DObject3DGraphicLayer_f=(0,vec3f64.c)(),Graphics3DObject3DGraphicLayer_S=(0,vec3f64.c)(),y=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]];

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectMetadata.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DObjectMetadata_t{constructor(t,e=null){this.labelText=e,this.elevationOffset=t??0}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/interfaces.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var interfaces_e;!function(e){e[e.RecreateSymbol=0]="RecreateSymbol",e[e.RecreateGraphics=1]="RecreateGraphics",e[e.FastUpdate=2]="FastUpdate"}(interfaces_e||(interfaces_e={}));

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Loadable.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Loadable_r{constructor(t){this.schedule=t,this._abortController=null,this._loadStatus=Loadable_l.LOADING,this._loadError=null,this._loader=null,this.logger=null}destroy(){this.abortLoad()}get loadStatus(){return this._loadStatus}load(t,r){return this._loadStatus===Loadable_l.LOADED?(t&&t(),this._loader??Promise.resolve()):this._loadStatus===Loadable_l.FAILED?(r&&r(this._loadError),this._loader??Promise.resolve()):(null==this._loader&&(this._abortController=new AbortController,this._loader=this.doLoad(this._abortController.signal).then((()=>{this._abortController=null,this._loadStatus=Loadable_l.LOADED}),(t=>{throw this._loadError=t,this._abortController=null,this._loadStatus=Loadable_l.FAILED,!(0,promiseUtils/* isAbortError */.zf)(t)&&this.logger&&t.message&&this.logger.warn(t.message),t}))),this._loader.then(t,r).catch((()=>{})),this._loader)}abortLoad(){null!=this._abortController?this._abortController=(0,maybe/* abortMaybe */.DC)(this._abortController):this._loadStatus===Loadable_l.LOADING&&(this._loadStatus=Loadable_l.FAILED),this._loader=null}}var Loadable_l;!function(t){t[t.LOADING=0]="LOADING",t[t.LOADED=1]="LOADED",t[t.FAILED=2]="FAILED"}(Loadable_l||(Loadable_l={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js
var FastSymbolUpdates = __webpack_require__(69463);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DSymbolLayer_u=Logger/* default */.A.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayer");class Graphics3DSymbolLayer_h extends Loadable_r{constructor(e,t,i,r){super(i.schedule),this.symbol=e,this.symbolLayer=t,this._context=i,this.ignoreDrivers=!1,this._drivenProperties={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1},this._materials=[],this.usedMemory=0,this.logger=Graphics3DSymbolLayer_u,this._elevationOptions={supportsOffsetAdjustment:!1,supportsOnTheGround:!0},this.skipHighSymbolLodsChanged=!0,this._renderPriority=r.renderPriority,this._renderPriorityStep=r.renderPriorityStep,this._elevationContext=new ElevationContext/* ElevationContext */.F,this.complexity=this.computeComplexity(),this.ignoreDrivers=r.ignoreDrivers,this.ignoreDrivers||(this._drivenProperties=Graphics3DSymbolLayer_f(this._context.renderer)),this._updateElevationContext()}getCachedSize(){return null}get extentPadding(){return 0}get materials(){return this._materials}_drivenPropertiesChanged(e){if(this.ignoreDrivers)return!1;const t=this._drivenProperties,i=Graphics3DSymbolLayer_f(e);return i.color!==t.color||i.opacity!==t.opacity||i.opacityAlwaysOpaque!==t.opacityAlwaysOpaque||i.size!==t.size}get needsDrivenTransparentPass(){return this._drivenProperties.opacity&&!this._drivenProperties.opacityAlwaysOpaque}_logGeometryCreationWarnings(e,t,i,r){const o=e.projectionSuccess,n="polygons"in e?e.polygons:null,s=`${r} geometry failed to be created`;let a=null;o?!this._logGeometryValidationWarnings(t,i,r)&&n&&0===n.length&&"rings"===i&&t.length>0&&t[0].length>2&&(a=`${s} (filled rings should use clockwise winding - try reversing the order of vertices)`):a=`${s} (failed to project geometry to view spatial reference)`,a&&Graphics3DSymbolLayer_u.warnOncePerTick(a)}_logGeometryValidationWarnings(e,t,i){const r=`${i} geometry failed to be created`;return!e.length||1===e.length&&!e[0].length?(Graphics3DSymbolLayer_u.warnOncePerTick(`${r} (no ${t} were defined)`),!0):(!Array.isArray(e)||!Array.isArray(e[0]))&&(Graphics3DSymbolLayer_u.warnOncePerTick(`${r} (${t} should be defined as a 2D array)`),!0)}_validateGeometry(e,t=null,i=null){if(null!=t&&!t.includes(e.type))return this.logger.warn("unsupported geometry type for "+i+` symbol: ${e.type}`),!1;if("point"===e.type){const t=e;if(!isFinite(t.x)||!isFinite(t.y))return Graphics3DSymbolLayer_u.warn("point coordinate is not a valid number, graphic skipped"),!1}return!0}_defaultElevationInfoNoZ(){return Graphics3DSymbolLayer_y}_defaultElevationInfoZ(){return Graphics3DSymbolLayer_g}_updateElevationContext(){null!=this._elevationInfoOverride?(this._elevationContext.setFromElevationInfo(this._elevationInfoOverride),this._elevationContext.updateFeatureExpressionInfoContext(null)):this._context.layer.elevationInfo?(this._elevationContext.setFromElevationInfo(this._context.layer.elevationInfo),this._elevationContext.updateFeatureExpressionInfoContext(this._context.featureExpressionInfoContext)):this._elevationContext.reset()}getDefaultElevationInfo(e){return e.hasZ?this._defaultElevationInfoZ():this._defaultElevationInfoNoZ()}getGeometryElevationMode(e,t=this.getDefaultElevationInfo(e)){return this._elevationContext.mode||t.mode}setElevationInfoOverride(e){this._elevationInfoOverride=e,this._updateElevationContext()}setGraphicElevationContext(e,t=new ElevationContext/* ElevationContext */.F){const i=e.geometry,r=this.getDefaultElevationInfo(i);t.unit=null!=this._elevationContext.unit?this._elevationContext.unit:r.unit,t.mode=this.getGeometryElevationMode(i,r),t.offsetMeters=this._elevationContext.meterUnitOffset??r.offset??0;const o=!this._elevationOptions.supportsOnTheGround&&"on-the-ground"===t.mode;o&&(t.mode="relative-to-ground",t.offsetMeters=0);const n=o?featureExpressionInfoUtils/* zeroContext */.KF:this._elevationContext.featureExpressionInfoContext;return t.updateFeatureExpressionInfoContext(n,e,this._context.layer),t}prepareSymbolLayerPatch(e){}updateGeometry(e,t){return!1}updateTransform(e,t,i,r){return!1}onRemoveGraphic(e){}_getLayerOpacity(){if(this._context.graphicsCoreOwner&&"fullOpacity"in this._context.graphicsCoreOwner)return this._context.graphicsCoreOwner.fullOpacity??0;const e=this._context.layer.opacity;return e??1}_getCombinedOpacity(e,t=Graphics3DSymbolLayer_v){let i=1;return this.draped||(i*=this._getLayerOpacity()),this._drivenProperties.opacity||(null!=e?i*=e.a:t.hasIntrinsicColor||(i=0)),i}_getCombinedOpacityAndColor(t,r=Graphics3DSymbolLayer_v){const o=this._getCombinedOpacity(t,r);if(this._drivenProperties.color)return (0,graphicUtils/* mixinColorAndOpacity */.$C)(null,o);const n=null!=t?Color/* default */.A.toUnitRGB(t):vec3f64.O;return (0,graphicUtils/* mixinColorAndOpacity */.$C)(n,o)}_getVertexOpacityAndColor(e,t=null){const i=this._drivenProperties.color?e.color:null,r=this._drivenProperties.opacity?e.opacity:null,o=(0,graphicUtils/* mixinColorAndOpacity */.$C)(i,r);return t&&(o[0]*=t,o[1]*=t,o[2]*=t,o[3]*=t),o}isFastUpdatesEnabled(){return null!=this._fastUpdates}computeComplexity(){return L(this.symbol,this.symbolLayer)}globalPropertyChanged(e,t,i){switch(e){case"opacity":return this.layerOpacityChanged(t,i),!0;case"elevationInfo":{const e=this._elevationContext.mode;this._updateElevationContext();return this.layerElevationInfoChanged(t,i,e)!==elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE}case"slicePlaneEnabled":return this.slicePlaneEnabledChanged(t,i);case"physicalBasedRenderingEnabled":return this.physicalBasedRenderingChanged();case"pixelRatio":return this.pixelRatioChanged;case"skipHighSymbolLods":return this.skipHighSymbolLodsChanged;default:return!1}}get pixelRatioChanged(){return!0}updateGraphics3DGraphicElevationInfo(e,t,i){let r=elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE;return e.forEach((e=>{const o=t(e);if(null!=o){const t=e.graphic;this.setGraphicElevationContext(t,o.elevationContext),o.needsElevationUpdates=i(o.elevationContext.mode)}else r=elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE})),r}applyRendererDiff(e,t){return interfaces_e.RecreateSymbol}getFastUpdateAttrValues(e){if(!this._fastUpdates)return null;const t=this._fastUpdates.visualVariables,i=t.size?(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.size.field,e):0,o=t.color?(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.color.field,e):0,n=t.opacity?(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.opacity.field,e):0;return (0,vec4f64.f)(i,o,n,0)}get draped(){return this._draped}ensureDrapedStatus(e){return null==this._draped?(this._draped=e,!0):(e!==this.draped&&Graphics3DSymbolLayer_u.warnOnce("A symbol can only produce either draped or non-draped visualizations. Use two separate symbol instances for draped and non-draped graphics if necessary."),!1)}test(){const e=()=>({size:this._fastUpdates?.visualVariables.size?.field??null,color:this._fastUpdates?.visualVariables.color?.field??null,opacity:this._fastUpdates?.visualVariables.opacity?.field??null,rotation:this._fastUpdates?.visualVariables.rotation?.field??null});return{drivenProperties:this._drivenProperties,getVisVarFields:e}}}function Graphics3DSymbolLayer_f(e){const t={color:!1,opacity:!1,opacityAlwaysOpaque:!0,size:!1};return e&&"visualVariables"in e&&e.visualVariables&&e.visualVariables.forEach((e=>{switch(e.type){case"color":if(t.color=!0,e.stops)for(let i=0;i<e.stops.length;i++){const r=e.stops[i].color;r&&(t.opacity=!0,r.a<1&&(t.opacityAlwaysOpaque=!1))}break;case"opacity":t.opacity=!0,t.opacityAlwaysOpaque=!1;break;case"size":t.size=!0}})),t}const Graphics3DSymbolLayer_y={mode:"on-the-ground",offset:0,unit:"meters"},Graphics3DSymbolLayer_g={mode:"absolute-height",offset:0,unit:"meters"},Graphics3DSymbolLayer_v={hasIntrinsicColor:!1};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectPointToVector.js
var projectPointToVector = __webpack_require__(42609);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js
var Object3D = __webpack_require__(55103);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/pointUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function pointUtils_c(e,o,n,i,l){const c=e.clippingExtent;if((0,projectPointToVector/* projectPointToVector */.g)(o,pointUtils_m,e.elevationProvider.spatialReference),null!=c&&!(0,aaBoundingBox/* containsPoint */.Uc)(c,pointUtils_m))return null;(0,projectPointToVector/* projectPointToVector */.g)(o,pointUtils_m,e.renderCoordsHelper.spatialReference),n.localOrigin=e.localOriginFactory.getOrigin(pointUtils_m);const p=new Object3D/* Object3D */.B({geometries:[n],castShadow:!1,layerUid:e.layer.uid,graphicUid:l,usesVerticalDistanceToGround:!0});return{object:p,sampledElevation:(0,elevationAlignmentUtils/* applyElevationAlignmentForHUD */.fe)(p,o,e.elevationProvider,e.renderCoordsHelper,i)}}function pointUtils_p(e,t,o){const n=e.elevationContext,s=o.spatialReference;(0,projectPointToVector/* projectPointToVector */.g)(t,pointUtils_m,s),n.centerPointInElevationSR=(0,dehydratedPoint/* makeDehydratedPoint */.T)(pointUtils_m[0],pointUtils_m[1],t.hasZ?pointUtils_m[2]:0,null!=s?s:null)}function pointUtils_u(e){switch(e.type){case"point":return e;case"polygon":case"extent":return (0,graphicUtils/* computeCentroid */.W$)(e);case"polyline":{const r=e.paths[0];if(!r||0===r.length)return null;const t=(0,coordsUtils/* getPointOnPath */.$H)(r,(0,coordsUtils/* getPathLength */.Yl)(r)/2);return (0,dehydratedPoint/* makeDehydratedPoint */.T)(t[0],t[1],t[2],e.spatialReference)}case"mesh":return e.origin}return null}const pointUtils_m=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js
var Attribute = __webpack_require__(70807);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var ContentObjectType = __webpack_require__(52997);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f32.js
var vec2f32 = __webpack_require__(48325);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js
var bufferWriterUtils = __webpack_require__(81500);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/LineCallout.glsl.js
var LineCallout_glsl = __webpack_require__(81808);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineCalloutTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LineCalloutTechnique_h extends ShaderTechnique/* ShaderTechnique */.w{initializeConfiguration(i,t){t.spherical=i.viewingMode===ViewingMode/* ViewingMode */.RT.Global}initializeProgram(e){return new Program/* Program */.B(e.rctx,LineCalloutTechnique_h.shader.get().build(this.configuration),DefaultVertexAttributeLocations/* Default3D */.D)}setPipelineState(e){const i=e?enums/* CompareFunction */.MT.ALWAYS:enums/* CompareFunction */.MT.LESS;return this.configuration.depthHudEnabled?(0,renderState/* makePipelineState */.Ey)({depthTest:{func:i},depthWrite:renderState/* defaultDepthWriteParams */.kn}):(0,renderState/* makePipelineState */.Ey)({blending:(0,renderState/* separateBlendingParams */.p3)(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.SRC_ALPHA,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),depthTest:{func:i},colorWrite:renderState/* defaultColorWriteParams */.wE})}initializePipeline(){return this.setPipelineState(this.configuration.multipassEnabled)}}LineCalloutTechnique_h.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(LineCallout_glsl.L,(()=>__webpack_require__.e(/* import() */ 6492).then(__webpack_require__.bind(__webpack_require__, 76492))));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineCalloutTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LineCalloutTechniqueConfiguration_s extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.screenCenterOffsetUnitsEnabled=!1,this.spherical=!1,this.occlusionTestEnabled=!0,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.depthHudEnabled=!1,this.depthHudAlignStartEnabled=!1,this.hasSlicePlane=!1,this.multipassEnabled=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"depthHudEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"depthHudAlignStartEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LineCalloutTechniqueConfiguration_s.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],LineCalloutTechniqueConfiguration_s.prototype,"hasSliceInVertexProgram",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],LineCalloutTechniqueConfiguration_s.prototype,"draped",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/LineCalloutMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LineCalloutMaterial_d extends Material/* Material */.im{get uniqueMaterialIdentifier(){return this._uniqueMaterialIdentifier}constructor(e){super(e,new LineCalloutMaterial_m),this._configuration=new LineCalloutTechniqueConfiguration_s,this._uniqueMaterialIdentifier=LineCalloutMaterial_d.uniqueMaterialIdentifier(this.parameters)}getPassParameters(){return this.parameters}getConfiguration(e,t){const r=t?.slot!==RenderSlot/* RenderSlot */.N.LINE_CALLOUTS;return this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.hasVerticalOffset=null!=this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=null!=this.parameters.screenSizePerspective,this._configuration.depthHudEnabled=r,this._configuration.depthHudAlignStartEnabled=!!this.parameters.depthHUDAlignStart,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration}intersect(){}produces(e,t){if(t===ShaderOutput/* ShaderOutput */.V.Color)switch(e){case RenderSlot/* RenderSlot */.N.LINE_CALLOUTS:case RenderSlot/* RenderSlot */.N.LINE_CALLOUTS_HUD_DEPTH:return!0}return!1}createGLMaterial(e){return new LineCalloutMaterial_p(e)}createBufferWriter(){return new LineCalloutMaterial_S}validateParameters(e){const t=LineCalloutMaterial_d.uniqueMaterialIdentifier(e);t!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=t)}static uniqueMaterialIdentifier(e){return JSON.stringify({horizontalScreenOffset:e.horizontalScreenOffset??0,centerOffsetUnits:e.centerOffsetUnits||"world"})}}class LineCalloutMaterial_p extends GLMaterial/* default */.A{beginSlot(e){return this.ensureTechnique(LineCalloutTechnique_h,e)}}class LineCalloutMaterial_m extends Material/* MaterialParameters */.qA{constructor(){super(...arguments),this.horizontalScreenOffset=0,this.color=[0,0,0,1],this.size=1,this.occlusionTest=!1,this.shaderPolygonOffset=1e-5,this.depthHUDAlignStart=!1,this.centerOffsetUnits="world",this.hasSlicePlane=!1}}const LineCalloutMaterial_g=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL).vec2f(VertexAttribute/* VertexAttribute */.r.UV0).vec4f(VertexAttribute/* VertexAttribute */.r.AUXPOS1),LineCalloutMaterial_O=[(0,vec2f32.f)(0,0),(0,vec2f32.f)(1,0),(0,vec2f32.f)(0,1),(0,vec2f32.f)(1,0),(0,vec2f32.f)(1,1),(0,vec2f32.f)(0,1)];class LineCalloutMaterial_S{constructor(){this.vertexBufferLayout=LineCalloutMaterial_g}elementCount(e){return 6*e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length}write(e,t,r,i,s){(0,bufferWriterUtils/* writePosition */.Hk)(r.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),e,i.position,s,6),(0,bufferWriterUtils/* writeNormal */.p1)(r.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL),t,i.normal,s,6),(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(r.attributes.get(VertexAttribute/* VertexAttribute */.r.AUXPOS1),i.auxpos1,s,6);for(let n=0;n<LineCalloutMaterial_O.length;++n)i.uv0.setVec(s+n,LineCalloutMaterial_O[n])}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineCalloutSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DLineCalloutSymbolLayer_j extends Graphics3DSymbolLayer_h{constructor(e,t){super(e,null,t,U),this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1},this.ensureDrapedStatus(!1)}async doLoad(){this._materials[0]=new LineCalloutMaterial_d(this._materialParameters),this._context.stage.add(this._materials[0])}destroy(){super.destroy(),this._context.stage.remove(this._materials[0]),this._materials.length=0}_perInstanceMaterialParameters(e){const t=this._materialParameters;return t.horizontalScreenOffset=e.horizontalScreenOffset??0,t.centerOffsetUnits=e.centerOffsetUnits||"world",t}get _materialParameters(){const r=new LineCalloutMaterial_m,i=this.symbol,n=i.callout;if(r.color=null!=n.color?Color/* default */.A.toUnitRGBA(n.color):[0,0,0,0],r.color[3]*=this._getLayerOpacity(),r.size=(0,screenUtils/* pt2px */.Lz)(n.size||0),i.verticalOffset){const{screenLength:e,minWorldLength:n,maxWorldLength:a}=i.verticalOffset;r.verticalOffset={screenLength:(0,screenUtils/* pt2px */.Lz)(e),minWorldLength:n||0,maxWorldLength:null!=a?a:1/0}}r.borderColor=null!=n.border?.color?Color/* default */.A.toUnitRGBA(n.border.color):null;const a="object"===i.symbolLayers.at(0).type,s="label-3d"===i.type;return r.occlusionTest=!a,r.shaderPolygonOffset=a?0:void 0,r.depthHUDAlignStart=s,r.hasSlicePlane=this._context.slicePlaneEnabled,r.screenSizePerspective=this._context.screenSizePerspectiveEnabled?this._context.sharedResources.screenSizePerspectiveSettings:null,r}_defaultElevationInfoNoZ(){return Graphics3DLineCalloutSymbolLayer_E}createGraphics3DGraphic(e){const t=e.renderingInfo,r=e.graphic,i=this.setGraphicElevationContext(r,new ElevationContext/* ElevationContext */.F,t.elevationOffset||0),a=t.symbol,s="on-the-ground"===this._elevationContext.mode&&("cim"===a.type||!a.symbolLayers.some((e=>"object"===e.type||"text"===e.type)));if("label-3d"!==a.type&&s)return null;if("point-3d"===a.type&&a.symbolLayers.every((e=>"text"===e.type&&!(0,calloutUtils/* textSymbolLayerSupportsVerticalOffset */.Ie)(e))))return null;const o=(0,graphicUtils/* computeCentroid */.W$)(r.geometry);return null==o?null:this._createAs3DShape(o,i,t,r.uid)}layerOpacityChanged(){this._materials[0]?.setParameters(this._materialParameters)}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,n=(0,elevationAlignmentUtils/* elevationModeChangeUpdateType */.I2)(Graphics3DLineCalloutSymbolLayer_j.elevationModeChangeTypes,r,i);return n!==elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE||e.forEach((e=>{const r=t(e);null!=r&&this.updateGraphicElevationContext(e.graphic,r)})),n}slicePlaneEnabledChanged(){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}setGraphicElevationContext(e,t,r=0){return super.setGraphicElevationContext(e,t),t.addOffsetRenderUnits(r),t}updateGraphicElevationContext(e,t){this.setGraphicElevationContext(e,t.elevationContext,null!=t.metadata?t.metadata.elevationOffset:0),t.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(t.elevationContext.mode)}computeComplexity(){return new SymbolComplexity_e({verticesPerFeature:6})}_createVertexData(e){const{translation:t,centerOffset:r}=e,i=new Attribute/* Attribute */.n(t?[t[0],t[1],t[2]]:[0,0,0],Graphics3DLineCalloutSymbolLayer_P,3,!0),n=new Attribute/* Attribute */.n(r?[r[0],r[1],r[2],r[3]]:[0,0,0,1],Graphics3DLineCalloutSymbolLayer_P,4,!0);return[[VertexAttribute/* VertexAttribute */.r.POSITION,i],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n([0,0,1],Graphics3DLineCalloutSymbolLayer_P,3,!0)],[VertexAttribute/* VertexAttribute */.r.AUXPOS1,n]]}_getOrCreateMaterial(e){const t=this._perInstanceMaterialParameters(e),r=LineCalloutMaterial_d.uniqueMaterialIdentifier(t);if(r===this._materials[0]?.uniqueMaterialIdentifier)return{material:this._materials[0],isUnique:!1};if(null!=e.materialCollection){let i=e.materialCollection.get(r);return null==i&&(i=new LineCalloutMaterial_d(t),e.materialCollection.add(r,i)),{material:i,isUnique:!1}}return{material:new LineCalloutMaterial_d(t),isUnique:!0}}_createAs3DShape(e,t,r,i){const n=this._context.layer.uid,s=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:i,layerUid:n}),o=this._getOrCreateMaterial(r),c=new Geometry/* Geometry */.V(o.material,this._createVertexData(r),null,ContentObjectType/* ContentObjectType */.X.Point,s),m=pointUtils_c(this._context,e,c,t,i);if(null==m)return null;const p=new Graphics3DObject3DGraphicLayer_p(this,m.object,[c],o.isUnique?[o.material]:null,null,ElevationAligners_p,t);return p.metadata=new Graphics3DObjectMetadata_t(r.elevationOffset),p.alignedSampledElevation=m.sampledElevation,p.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(t.mode),pointUtils_p(p,e,this._context.elevationProvider),p}}Graphics3DLineCalloutSymbolLayer_j.elevationModeChangeTypes={definedChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE,staysOnTheGround:elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE,onTheGroundChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE};const Graphics3DLineCalloutSymbolLayer_P=[0],Graphics3DLineCalloutSymbolLayer_E={mode:"relative-to-ground",offset:0},U={ignoreDrivers:!0,renderPriority:0,renderPriorityStep:1};class Graphics3DLineCalloutSymbolLayer_w{constructor(e,t,n=(0,vec3f64.c)(),a=(0,vec4f64.c)(),s=0,o="world",l=0,c=null){this.renderer=e,this.symbol=t,this.translation=n,this.centerOffset=a,this.horizontalScreenOffset=s,this.centerOffsetUnits=o,this.elevationOffset=l,this.materialCollection=c}}class G extends (/* unused pure expression or super */ null && (m)){}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCalloutSymbolLayerFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DCalloutSymbolLayerFactory_t=Logger/* default */.A.getLogger("esri.views.3d.layers.graphics.Graphics3DCalloutSymbolLayerFactory");function Graphics3DCalloutSymbolLayerFactory_e(o,l){if(!(0,calloutUtils/* hasCalloutSupport */.YX)(o))return Graphics3DCalloutSymbolLayerFactory_t.error("Graphics3DCalloutSymbolLayerFactory#make",`symbol of type '${o.type}' does not support callouts`),null;if(!o.callout)return null;const e=Graphics3DCalloutSymbolLayerFactory_a[o.callout.type];return e?new e(o,l):(Graphics3DCalloutSymbolLayerFactory_t.error("Graphics3DCalloutSymbolLayerFactory#make",`unknown or unsupported callout type ${o.callout.type}`),null)}const Graphics3DCalloutSymbolLayerFactory_a={line:Graphics3DLineCalloutSymbolLayer_j};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/byteSizeEstimations.js
var byteSizeEstimations = __webpack_require__(13274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/ObjectPool.js
var ObjectPool = __webpack_require__(90086);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polygon.js
var Polygon = __webpack_require__(62802);
;// ../node_modules/@arcgis/core/geometry/projection/projectBoundingRect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function projectBoundingRect_s(r,s,f,n){return null!=r&&((0,spatialReferenceUtils/* equals */.aI)(s,n)?((0,aaBoundingRect/* copy */.C)(f,r),!0):(projectBoundingRect_e[0]=r[0],projectBoundingRect_e[1]=r[1],projectBoundingRect_e[2]=0,!!(0,projectBuffer.projectBuffer)(projectBoundingRect_e,s,0,projectBoundingRect_e,n,0,1)&&(f[0]=projectBoundingRect_e[0],f[1]=projectBoundingRect_e[1],projectBoundingRect_e[0]=r[2],projectBoundingRect_e[1]=r[3],projectBoundingRect_e[2]=0,!!(0,projectBuffer.projectBuffer)(projectBoundingRect_e,s,0,projectBoundingRect_e,n,0,1)&&(f[2]=projectBoundingRect_e[0],f[3]=projectBoundingRect_e[1],!0))))}const projectBoundingRect_e=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DGraphic_v=new ObjectPool/* default */.A(Array,(e=>(0,aaBoundingBox/* set */.hZ)(e,aaBoundingBox/* zero */.v_)),null,10,5),x=(0,aaBoundingRect/* create */.vt)();class A{get labelLayers(){return this._labelLayers||arrayUtils/* EmptyArray */.N9}get extent(){return this._extent}get isElevationSource(){return this.layers.some((e=>e?.isElevationSource))}constructor(e,t,i,r,s){this.graphic=e,this.graphics3DSymbol=t,this.layers=i,this._visibleFlags=enums_L.ALL_LABEL,this.deconflictionPriority=0,++t.referenced,this._featureExpressionFeature=s?(0,featureExpressionInfoUtils/* createFeature */.VG)(s,e,r):null}initialize(e){this._layer=e,this._forEachSymbolLayerGraphic((t=>{t.initialize(e),t.setVisibility(this.isVisible())}))}destroy(){this._forEachSymbolLayerGraphic((e=>e.destroy())),this._calloutLayer=null,--this.graphics3DSymbol.referenced,this.graphics3DSymbol=null}get destroyed(){return null==this.layers}clearLabelGraphics(){this._forEachLabelGraphic((e=>e.destroy())),this._labelLayers=null}addLabelGraphic(e,t){this._labelLayers||(this._labelLayers=new Array),this._labelLayers.push(e),e.initialize(t),e.setVisibility(this.isVisible(enums_A.LABEL))}setCalloutGraphic(e){this._calloutLayer=e,this._layer&&(e.initialize(this._layer),e.setVisibility(this.isVisible()))}get calloutLayer(){return this._calloutLayer}get isDraped(){let e=!1;return this._forEachSymbolLayerGraphic((t=>{"draped"===t.type&&(e=!0)})),e}isVisible(e=enums_A.GRAPHIC,t){const i=t?this._visibleFlags|t|enums_A.LABEL*t:this._visibleFlags;return e===enums_A.GRAPHIC?(i&enums_L.ALL_GRAPHIC)===enums_L.ALL_GRAPHIC:(i&enums_L.ALL_LABEL)===enums_L.ALL_LABEL}setVisibilityFlag(e,t,i){const r=this.isVisible(e);i?this._visibleFlags|=e*t:this._visibleFlags&=~(e*t);const s=this.isVisible(e);if(r===s)return!1;if(e===enums_A.LABEL)this._forEachLabelGraphic((e=>e.setVisibility(s)));else{this._forEachSymbolLayerGraphic((e=>e.setVisibility(s)));const e=this.isVisible(enums_A.LABEL);this._forEachLabelGraphic((t=>t.setVisibility(e)))}return!0}getVisibilityFlag(e,t){return 0!=(this._visibleFlags&e*t)}computeExtent(e){if(!this._extent){const t=this.graphic.geometry;if(null==t)return!1;this._extent=(0,aaBoundingRect/* create */.vt)(),(0,dehydratedFeatures/* computeAABR */.iQ)(t,this._extent);const i=t.spatialReference;if(!(0,spatialReferenceUtils/* equals */.aI)(i,e)&&!projectBoundingRect_s(this._extent,i,this._extent,e))return this._extent=null,!1}return!0}getAsOptimizedGeometry(e,t){return this._optimizedGeometry||(this._optimizedGeometry=this._convertGraphicToOptimizedGeometry(this.graphic,e,t)),this._optimizedGeometry}_convertGraphicToOptimizedGeometry(e,t,i){let r=e.geometry;return"mesh"!==r.type&&"extent"!==r.type||(r=Polygon/* default */.A.fromExtent("mesh"===r.type?r.extent:r)),(0,featureConversionUtils/* convertFromGeometry */.Ux)(r,t,i)}get usedMemory(){let e=(0,byteSizeEstimations/* estimateAttributesObjectSize */.eY)(this.graphic.attributes);return this._forEachSymbolLayerGraphic((t=>e+=t.graphics3DSymbolLayer.usedMemory)),e}computeAttachmentOrigin(){const e={render:{origin:(0,vec3f64.c)(),num:0},draped:{origin:(0,vec2f64.a)(),num:0}};for(const t of this.layers)null!=t&&t.computeAttachmentOrigin(e);return e.render.num>1&&(0,vec3.i)(e.render.origin,e.render.origin,1/e.render.num),e.draped.num>1&&(0,vec2.a)(e.draped.origin,e.draped.origin,1/e.draped.num),e}async getProjectedBoundingBox(e,i,r,s,a){return a||(a={boundingBox:null,requiresDrapedElevation:!1,screenSpaceObjects:[]}),a.boundingBox?(0,aaBoundingBox/* empty */.Ie)(a.boundingBox):a.boundingBox=(0,aaBoundingBox/* empty */.Ie)(),a.requiresDrapedElevation=!1,await (0,asyncUtils/* forEach */.jJ)(this.layers,(async t=>{if(null==t)return;const o="draped"===t.type?i:e,n=Graphics3DGraphic_v.acquire(),l=await t.getProjectedBoundingBox(o,r,a.screenSpaceObjects,s,n);isFinite(l[2])&&isFinite(l[5])||(a.requiresDrapedElevation=!0),l&&(0,aaBoundingBox/* expandWithAABB */.RF)(a.boundingBox,n),Graphics3DGraphic_v.release(n)})),(0,aaBoundingBox/* allFinite */.vQ)(a.boundingBox)||(0,aaBoundingRect/* allFinite */.vQ)((0,aaBoundingBox/* toRect */.ES)(a.boundingBox,x))?a:null}needsElevationUpdates(){for(const e of this.layers)if(null!=e&&("object3d"===e.type||"lod-instance"===e.type)&&e.needsElevationUpdates)return!0;return this._labelLayers?.some((e=>e?.needsElevationUpdates??!1))??!1}alignWithElevation(e,t,i){this._forEachRenderedGraphic((r=>{"object3d"!==r.type&&"lod-instance"!==r.type||r.alignWithElevation(e,t,this._featureExpressionFeature,i)}))}alignWithAbsoluteElevation(e,t,i){this._forEachRenderedGraphic((r=>{"object3d"===r.type&&r.alignWithAbsoluteElevation(e,t,i)}))}addObjectStateSet(e,t){this._forEachSymbolLayerGraphic((i=>i.addObjectState(e,t)))}removeObjectState(e){this._forEachSymbolLayerGraphic((t=>t.removeObjectState(e)))}_forEachGraphicList(e,t){e?.forEach((e=>e&&t(e)))}_forEachSymbolLayerGraphic(e){this._forEachGraphicList(this.layers,e),this._calloutLayer&&e(this._calloutLayer)}_forEachLabelGraphic(e){this._forEachGraphicList(this._labelLayers,e)}_forEachRenderedGraphic(e){this._forEachSymbolLayerGraphic(e),this._forEachLabelGraphic(e)}get test(){const e=this;return{addLabelLayer:t=>{e._labelLayers||(e._labelLayers=new Array),e._labelLayers.push(t)}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3.js
var mat3 = __webpack_require__(46615);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f64.js
var mat3f64 = __webpack_require__(76287);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/DoubleArray.js
var DoubleArray = __webpack_require__(90166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js
var SnappingCandidate = __webpack_require__(27258);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/polygonUtils.js
var polygonUtils = __webpack_require__(92986);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/triangulationUtils.js
var triangulationUtils = __webpack_require__(17566);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js + 30 modules
var OverlayRenderer = __webpack_require__(93471);
;// ../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/polygon.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function polygon_p(o,n,r,p){const c=(0,triangulationUtils/* pathsToTriangulationInfo */.jp)(o.rings,!!o.hasZ,triangulationUtils/* CounterClockwiseMode */.Wq.CCW_IS_HOLE,o.spatialReference),a=(0,DoubleArray/* newDoubleArray */.jh)(c.position.length),h=(0,elevationAlignmentUtils/* applyPerVertexElevationAlignment */.au)(c.position,o.spatialReference,0,a,0,c.position,0,c.position.length/3,n,r,p),f=null!=h;return new polygon_m(c.position,a,polygon_u(c.polygons,c.position,a),polygon_l(c.outlines,c.position,a),f,h)}function polygon_c(t,n){const e=(0,triangulationUtils/* pathsToTriangulationInfo */.jp)(t.rings,!1,triangulationUtils/* CounterClockwiseMode */.Wq.CCW_IS_HOLE),p=(0,projectBuffer.projectBuffer)(e.position,t.spatialReference,0,e.position,n,0,e.position.length/3);for(let o=2;o<e.position.length;o+=3)e.position[o]=OverlayRenderer/* drapedZ */.bi;return{position:e.position,polygons:polygon_u(e.polygons,e.position),outlines:polygon_l(e.outlines,e.position),projectionSuccess:p}}function polygon_l(o,t,s=null){return o.filter((({count:o})=>o>1)).map((({index:o,count:i})=>{const e=3*o,r=3*i;return null!=s?new polygon_h(o,i,(0,DoubleArray/* doubleSubArray */.l5)(t,e,r),(0,DoubleArray/* doubleSubArray */.l5)(s,e,r)):new polygon_a(o,i,(0,DoubleArray/* doubleSubArray */.l5)(t,e,r))}))}function polygon_u(o,t,s=null){const i=new Array;for(const{index:e,count:r,holeIndices:p,pathLengths:c}of o){if(r<=1)continue;const o=3*e,l=3*r,u=p.map((o=>o-e)),a=null!=s?new polygon_f(e,r,(0,DoubleArray/* doubleSubArray */.l5)(t,3*e,3*r),(0,DoubleArray/* doubleSubArray */.l5)(s,o,l),u,c):new polygon_g(e,r,(0,DoubleArray/* doubleSubArray */.l5)(t,3*e,3*r),u,c);i.push(a)}return i}class polygon_a{constructor(o,t,n){this.index=o,this.count=t,this.position=n}}class polygon_h extends polygon_a{constructor(o,t,n,s){super(o,t,n),this.mapPositions=s}}class polygon_f extends polygon_h{constructor(o,t,n,s,i,e){super(o,t,n,s),this.holeIndices=i,this.pathLengths=e}}class polygon_g extends polygon_a{constructor(o,t,n,s,i){super(o,t,n),this.holeIndices=s,this.pathLengths=i}}class polygon_m{constructor(o,t,n,s,i,e){this.position=o,this.mapPositions=t,this.polygons=n,this.outlines=s,this.projectionSuccess=i,this.sampledElevation=e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js
var NormalAttribute_glsl = __webpack_require__(81283);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Normals.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function Normals_n(t,a,n,s,o,h=2){const c=1/(Math.abs(n)+Math.abs(s)+Math.abs(o)),e=n*c,u=s*c,M=o<=0?(e>=0?1:-1)*(1-Math.abs(u)):e,b=o<=0?(u>=0?1:-1)*(1-Math.abs(e)):u,f=a*h;t[f]=Normals_r(M),t[f+1]=Normals_r(b)}function Normals_s(t){const a=t.length/3,s=new Int16Array(2*a);let o=0;for(let r=0;r<a;++r)Normals_n(s,r,t[o++],t[o++],t[o++]);return s}function Normals_o(t,n,s,o=2){const r=s*o,c=Normals_h(n[r]),e=Normals_h(n[r+1]),u=1-Math.abs(c)-Math.abs(e);t[2]=u,u<0?(t[0]=(c>=0?1:-1)*(1-Math.abs(e)),t[1]=(e>=0?1:-1)*(1-Math.abs(c))):(t[0]=c,t[1]=e),a(t,t)}function Normals_r(a){return (0,mathUtils/* clamp */.qE)(Math.round(32767*a),-32767,32767)}function Normals_h(a){return t(a/32767,-1,1)}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DExtrudeSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Y=["polygon","extent"];class $ extends Graphics3DSymbolLayer_h{constructor(e,t,s,r){super(e,t,s,r),this.ensureDrapedStatus(!1)}async doLoad(){if(!this._drivenProperties.size){const t=(0,graphicUtils/* validateSymbolLayerSize */.Hj)(this._getSymbolSize());if(t)throw new core_Error/* default */.A("graphics3dextrudesymbollayer:invalid-size",t)}const t=this.symbolLayer?.material?.color,s=this._getCombinedOpacityAndColor(t),r=(0,vec3f64.e)(s),n=s[3],i=n<1||this.needsDrivenTransparentPass,o={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,diffuse:r,ambient:r,opacity:n,transparent:i,cullFace:i?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back,hasVertexColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,offsetTransparentBackfaces:!0,normalType:NormalAttribute_glsl/* NormalType */.W.Compressed};this._materials[je.Main]=new DefaultMaterial/* DefaultMaterial */.$U(o),this._materials[je.Bottom]=new DefaultMaterial/* DefaultMaterial */.$U({...o,cullFace:basicInterfaces/* CullFaceOptions */.s2.Back}),this._context.stage.addMany(this._materials)}destroy(){super.destroy(),this._context.stage.removeMany(this._materials),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Y,this.symbolLayer.type))return null;const s=this._getVertexOpacityAndColor(e.renderingInfo,255),r=this.setGraphicElevationContext(t);return this._createAs3DShape(t,e.renderingInfo,s,r,t.uid)}layerOpacityChanged(e,t){const s=this.symbolLayer?.material?.color,r=this._getCombinedOpacity(s),n=r<1||this.needsDrivenTransparentPass;this._materials[je.Main]?.setParameters({opacity:r,transparent:n}),this._materials[je.Bottom]?.setParameters({opacity:r,transparent:n});const i=this._getLayerOpacity();e.forEach((e=>{const s=t(e);null!=s&&s.layerOpacityChanged(i,this._context.isAsync)}))}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)}slicePlaneEnabledChanged(e,t){return this._materials[je.Main]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._materials[je.Bottom]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),e.forEach((e=>{const s=t(e);null!=s&&s.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)})),!0}physicalBasedRenderingChanged(){const e={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0};return this._materials[je.Main]?.setParameters(e),this._materials[je.Bottom]?.setParameters(e),!0}_getExtrusionSize(e){let t;return t=e.size&&this._drivenProperties.size?renderingInfoUtils_a(e.size,2)??0:this._getSymbolSize(),t/=this._context.renderCoordsHelper.unitInMeters,t}applyRendererDiff(e,t){return this._drivenPropertiesChanged(t)?interfaces_e.RecreateSymbol:interfaces_e.RecreateGraphics}async queryForSnapping(e,r,n,i){const o=this._getExtrusionSize(n)*this._context.renderCoordsHelper.unitInMeters/(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(r),{objectId:a,target:l}=e,c=(0,lang/* clone */.o8)(l);switch(c.z=(c.z??0)+o,e.type){case"edge":{const{start:s,end:r}=e,n=(0,lang/* clone */.o8)(s),i=(0,lang/* clone */.o8)(r);return n.z=(n.z??0)+o,i.z=(i.z??0)+o,[(0,SnappingCandidate/* makeEdgeCandidate */.P)(a,c,1/0,n,i)]}case"vertex":return[(0,SnappingCandidate/* makeVertexCandidate */.k)(a,c,1/0),(0,SnappingCandidate/* makeEdgeCandidate */.P)(a,l,1/0,l,c)];default:return[]}}_getSymbolSize(){return this.symbolLayer.size??1}_createAs3DShape(e,t,s,a,c){const m=(0,polygonUtils/* geometryAsPolygon */.dE)(e.geometry);if(null==m)return null;if(0===m.rings.length||!m.rings.some((e=>e.length>0)))return this._logGeometryValidationWarnings(m.rings,"rings","ExtrudeSymbol3DLayer"),null;const h=polygon_p(m,this._context.elevationProvider,this._context.renderCoordsHelper,a);this._logGeometryCreationWarnings(h,m.rings,"rings","ExtrudeSymbol3DLayer");const p=(0,graphicUtils/* computeCentroid */.W$)(m);if(null==p)return null;const g=new Array,d=new Array,u=(0,aaBoundingBox/* create */.vt)(),w=(0,mat4f64.a)(),v=(0,vec3f64.c)(),I=this._context.renderCoordsHelper.viewingMode===ViewingMode/* ViewingMode */.RT.Global;I||this._context.renderCoordsHelper.worldUpAtPosition(null,v),(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(m.spatialReference,[p.x,p.y,0],w,this._context.renderCoordsHelper.spatialReference);const C=(0,mat4f64.a)();(0,mat4.i)(C,w);const O=(0,mat3f64.a)();(0,mat3.n)(O,C);const{polygons:z,mapPositions:B,position:G}=h;for(const n of z){const e=n.count;if(this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(u),(0,aaBoundingBox/* expandWithBuffer */.Hq)(u,n.mapPositions),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(u,this._context.clippingExtent)))continue;const i=(0,earcut.e)(n.mapPositions,n.holeIndices,3);if(0===i.length)continue;const o=i.length,a=6*e,l=(0,Indices/* newIndexArray */.my)(a+o),m=(0,Indices/* newIndexArray */.my)(o),h=(0,DoubleArray/* newDoubleArray */.jh)(3*a),p=(0,DoubleArray/* newDoubleArray */.jh)(3*a),f=(0,DoubleArray/* newDoubleArray */.jh)(3*a),y=(0,DoubleArray/* newDoubleArray */.jh)(a);te(G,B,i,n,h,f,p,y,l,m,this._getExtrusionSize(t),v,I),(0,vec32.t)(h,h,C);const b=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:c,layerUid:this._context.layer.uid}),w=new xe(h,f,Normals_s(p),y);g.push(ee(this._materials[je.Main],l,l.length-m.length,w,s,b),ee(this._materials[je.Bottom],m,0,w,s,b)),d.push(w.heights)}if(0===g.length)return null;const U=new Object3D/* Object3D */.B({geometries:g,layerUid:this._context.layer.uid,graphicUid:c,isElevationSource:!0});U.transformation=w;const k=(0,edgeUtils/* createMaterial */.Cc)(this.symbolLayer,{opacity:this._getLayerOpacity()}),V=null!=k?{baseMaterial:this._materials[je.Main],edgeMaterials:[k],properties:{mergeGeometries:!0,hasSlicePlane:this._context.slicePlaneEnabled}}:null,H=new Graphics3DObject3DGraphicLayer_p(this,U,g,null,null,((e,t,s,r,n)=>ge(e,t,s,r,n,d)),a,V);return H.alignedSampledElevation=h.sampledElevation,H.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)(a.mode),H}}function ee(e,t,s,r,n,i){const o=(0,Indices/* getZeroIndexArray */.EH)(t.length),a=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(r.positions,t,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMALCOMPRESSED,new Attribute/* Attribute */.n(r.normals,t,2,!0)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(n,o,4,!0)]];return new Geometry/* Geometry */.V(e,a,r.elevation,ContentObjectType/* ContentObjectType */.X.Mesh,i,s)}function te(e,t,s,r,n,i,o,a,l,c,m,h,p){const g=s.length/3;let d=0,u=2*r.count;se(e,t,r.index,r.count,s,0,g,n,i,o,a,l,c,u,m,h,p);let f=2*r.count;u=0,ie(n,i,a,o,d,r.pathLengths[0],r.count,f,l,u,m),f+=4*r.pathLengths[0],u+=2*r.pathLengths[0],d+=r.pathLengths[0];for(let y=1;y<r.pathLengths.length;++y)ie(n,i,a,o,d,r.pathLengths[y],r.count,f,l,u,m),f+=4*r.pathLengths[y],u+=2*r.pathLengths[y],d+=r.pathLengths[y]}function se(e,t,s,r,n,i,o,a,l,h,p,g,d,u,f,y,b){(0,vec3.c)(ue,y);const _=f>0?1:-1;let j=3*s,x=0,P=3*x,S=r,w=3*S;for(let c=0;c<r;++c)b&&(ue[0]=e[j],ue[1]=e[j+1],ue[2]=e[j+2],(0,vec3.n)(ue,ue)),a[P]=e[j],a[P+1]=e[j+1],a[P+2]=e[j+2],l[P]=t[j],l[P+1]=t[j+1],l[P+2]=t[j+2],h[P]=-_*ue[0],h[P+1]=-_*ue[1],h[P+2]=-_*ue[2],p[x]=0,a[w]=e[j]+f*ue[0],a[w+1]=e[j+1]+f*ue[1],a[w+2]=e[j+2]+f*ue[2],l[w]=t[j],l[w+1]=t[j+1],l[w+2]=t[j+2],h[w]=_*ue[0],h[w+1]=_*ue[1],h[w+2]=_*ue[2],p[S]=f,P+=3,w+=3,j+=3,x+=1,S+=1;j=3*i,P=0,w=3*u;const E=f<0?be:ye,v=f<0?ye:be;for(let c=0;c<o;++c)d[P]=n[j+E[0]],d[P+1]=n[j+E[1]],d[P+2]=n[j+E[2]],g[w]=n[j+v[0]]+r,g[w+1]=n[j+v[1]]+r,g[w+2]=n[j+v[2]]+r,P+=3,w+=3,j+=3}function re(e,t,s,r,n,i,o){r[i]=r[o],o*=3,e[i*=3]=e[o],e[i+1]=e[o+1],e[i+2]=e[o+2],t[i]=t[o],t[i+1]=t[o+1],t[i+2]=t[o+2],s[i]=n[0],s[i+1]=n[1],s[i+2]=n[2]}const ne=(0,vec3f64.c)();function ie(e,t,s,r,n,i,o,a,l,c,m){let h=n,p=n+1,g=n+o,d=n+o+1,u=a,f=a+1,y=a+2*i,b=a+2*i+1;m<0&&(h=n+o+1,d=n),c*=3;for(let _=0;_<i;++_)_===i-1&&(m>0?(p=n,d=n+o):(p=n,h=n+o)),he(e,h,p,g,ne),re(e,t,r,s,ne,u,h),re(e,t,r,s,ne,f,p),re(e,t,r,s,ne,y,g),re(e,t,r,s,ne,b,d),l[c++]=u,l[c++]=y,l[c++]=b,l[c++]=u,l[c++]=b,l[c++]=f,h++,p++,g++,d++,u+=2,f+=2,y+=2,b+=2}const oe=(0,vec3f64.c)(),ae=(0,vec3f64.c)(),le=(0,vec3f64.c)(),ce=(0,vec3f64.c)(),me=(0,vec3f64.c)();function he(e,t,s,r,n){t*=3,s*=3,r*=3,(0,vec3.s)(oe,e[t++],e[t++],e[t++]),(0,vec3.s)(ae,e[s++],e[s++],e[s++]),(0,vec3.s)(le,e[r++],e[r++],e[r++]),(0,vec3.f)(ce,ae,oe),(0,vec3.f)(me,le,oe),(0,vec3.b)(n,me,ce),(0,vec3.n)(n,n)}const pe=(0,vec3f64.c)();function ge(e,t,s,r,n,i){const o=e.stageObject,c=o.geometries,m=c.length,p="absolute-height"!==t.mode;let g=0;const u=o.transformation,f=(0,mat4.p)((0,mat4f64.a)(),u);for(let a=0;a<m;a+=2){const e=c[a];if(!GeometryWithMapPositions_e(e))continue;const t=e.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION).data,l=i[a/2],m=new ElevationProvider/* SamplePosition */.aY(e.mapPositions),y=t.length/3;let b=0,_=!1,j=0;for(let i=0;i<y;i++){pe[0]=t[b],pe[1]=t[b+1],pe[2]=t[b+2],r(m,fe),p&&(j+=fe.sampledElevation),debugFlags/* debugFlags */.b.TESTS_DISABLE_OPTIMIZATIONS?((0,vec3.s)(de,m.array[m.offset],m.array[m.offset+1],fe.z+l[b/3]),null!=s&&n.toRenderCoords(de,s,de),(0,vec3.e)(de,de,f)):((0,vec3.s)(de,t[b],t[b+1],t[b+2]),(0,vec3.e)(de,de,u),n.setAltitude(de,fe.z+l[b/3]),(0,vec3.e)(de,de,f)),t[b]=de[0],t[b+1]=de[1],t[b+2]=de[2];const e=_e/n.unitInMeters;(Math.abs(pe[0]-t[b])>=e||Math.abs(pe[1]-t[b+1])>=e||Math.abs(pe[2]-t[b+2])>=e)&&(_=!0),m.offset+=3,b+=3}_&&(e.invalidateBoundingInfo(),o.geometryVertexAttributeUpdated(c[a],VertexAttribute/* VertexAttribute */.r.POSITION),c[a+1].invalidateBoundingInfo(),o.geometryVertexAttributeUpdated(c[a+1],VertexAttribute/* VertexAttribute */.r.POSITION)),g+=j/y}return g/m}const de=(0,vec3f64.c)(),ue=(0,vec3f64.c)(),fe=new elevationAlignmentUtils/* SampleElevationInfo */.Uk,ye=[0,2,1],be=[0,1,2],_e=.01;var je;!function(e){e[e.Main=0]="Main",e[e.Bottom=1]="Bottom"}(je||(je={}));class xe{constructor(e,t,s,r){this.positions=e,this.elevation=t,this.normals=s,this.heights=r}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/urlUtils.js
var urlUtils = __webpack_require__(20909);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/IconSymbol3DLayerResource.js
var IconSymbol3DLayerResource = __webpack_require__(5666);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/utils.js
var utils = __webpack_require__(55056);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js
var callExpressionWithFeature = __webpack_require__(29986);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js
var ModelDirtyTypes = __webpack_require__(23183);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DDrapedGraphicLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DDrapedGraphicLayer_u{constructor(e,t,r,i){this.graphics3DSymbolLayer=e,this.renderGeometries=t,this.boundingBox=r,this._drapeSourceRenderer=i,this.type="draped",this.stage=null,this._visible=!1,this._addedToStage=!1,this.isElevationSource=!1}initialize(e){this.stage=e.stage}setVisibility(e){if(null!=this.stage&&this._visible!==e){if(this._visible=e,e&&!this._addedToStage)return this._addedToStage=!0,void this._drapeSourceRenderer.addGeometries(this.renderGeometries,ModelDirtyTypes/* DirtyOperation */.q.ADD);if(e||this._addedToStage){for(const e of this.renderGeometries)e.visible=this._visible;this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,ModelDirtyTypes/* DirtyState */.k.VISIBILITY)}}}destroy(){this.stage&&this._addedToStage&&this._drapeSourceRenderer.removeGeometries(this.renderGeometries,ModelDirtyTypes/* DirtyOperation */.q.REMOVE),this._addedToStage=!1,this._visible=!1,this.stage=null}getCenterObjectSpace(r=(0,vec3f64.c)()){return (0,vec3.s)(r,0,0,0)}getBoundingBoxObjectSpace(e=(0,aaBoundingBox/* create */.vt)()){return (0,aaBoundingBox/* empty */.Ie)(e)}addObjectState(e,t){e===basicInterfaces/* Object3DState */.Mg.Highlight&&(this.renderGeometries.forEach((e=>{const r=e.geometry.addHighlight();t.addRenderGeometry(e,r,this)})),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,ModelDirtyTypes/* DirtyState */.k.HIGHLIGHT))}removeObjectState(e){this.renderGeometries.forEach((t=>{e.removeRenderGeometry(t)}))}removeRenderGeometryObjectState(e,t){e.geometry.removeHighlight(t),this._addedToStage&&this._drapeSourceRenderer.modifyGeometries(this.renderGeometries,ModelDirtyTypes/* DirtyState */.k.HIGHLIGHT)}computeAttachmentOrigin(e){for(const t of this.renderGeometries)t.geometry.computeAttachmentOrigin(Graphics3DDrapedGraphicLayer_G)&&(e.draped.origin[0]+=Graphics3DDrapedGraphicLayer_G[0],e.draped.origin[1]+=Graphics3DDrapedGraphicLayer_G[1],e.draped.num++)}async getProjectedBoundingBox(e,t,r,d,n){(0,aaBoundingBox/* empty */.Ie)(n);for(let i=0;i<this.renderGeometries.length;i++){const t=this.renderGeometries[i];this._getRenderGeometryProjectedBoundingRect(t,e,Graphics3DDrapedGraphicLayer_l,r),(0,aaBoundingBox/* expandWithRect */.DC)(n,Graphics3DDrapedGraphicLayer_l)}if(t){let e;(0,aaBoundingBox/* center */.gX)(n,Graphics3DDrapedGraphicLayer_G);const r=(0,graphicUtils/* demResolutionForBoundingBox */.vY)(n,t.service.spatialReference,t);try{e=await t.service.queryElevation(Graphics3DDrapedGraphicLayer_G[0],Graphics3DDrapedGraphicLayer_G[1],d,r,"ground")}catch(a){}null!=e&&(n[2]=Math.min(n[2],e),n[5]=Math.max(n[5],e))}return n}_getRenderGeometryProjectedBoundingRect(e,t,r,i){if(this.boundingBox)(0,aaBoundingBox/* set */.hZ)(Graphics3DDrapedGraphicLayer_p,this.boundingBox);else{const t=e.boundingSphere,r=t[3];Graphics3DDrapedGraphicLayer_p[0]=t[0]-r,Graphics3DDrapedGraphicLayer_p[1]=t[1]-r,Graphics3DDrapedGraphicLayer_p[2]=t[2]-r,Graphics3DDrapedGraphicLayer_p[3]=t[0]+r,Graphics3DDrapedGraphicLayer_p[4]=t[1]+r,Graphics3DDrapedGraphicLayer_p[5]=t[2]+r}return t(Graphics3DDrapedGraphicLayer_p,0,2),this.calculateRelativeScreenBounds&&i.push({location:(0,aaBoundingBox/* center */.gX)(Graphics3DDrapedGraphicLayer_p),screenSpaceBoundingRect:this.calculateRelativeScreenBounds()}),(0,aaBoundingBox/* toRect */.ES)(Graphics3DDrapedGraphicLayer_p,r)}}const Graphics3DDrapedGraphicLayer_l=(0,aaBoundingRect/* create */.vt)(),Graphics3DDrapedGraphicLayer_p=(0,aaBoundingBox/* create */.vt)(),Graphics3DDrapedGraphicLayer_G=(0,vec3f64.c)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextHelperCanvas.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function TextHelperCanvas_a(a,n,c){return a.canvas||(a.canvas=document.createElement("canvas")),a.canvas.width=n,a.canvas.height=c,a.canvas}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/FontMetrics.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function FontMetrics_e(e){const{size:c}=e.definition,a=e.fontString(c);let i=FontMetrics_n.get(a);if(!i){const u=TextHelperCanvas_a(FontMetrics_o,0,0).getContext("2d");e.setFontProperties(u,c);const x=u.measureText(FontMetrics_r);i=new FontMetrics_s(x.actualBoundingBoxAscent,x.actualBoundingBoxDescent),FontMetrics_n.set(a,i)}return i}const FontMetrics_n=new Map;class FontMetrics_s{get maxHeight(){return this.maxAscent+this.maxDescent}constructor(t,e){this.maxAscent=t,this.maxDescent=e}}const FontMetrics_o={canvas:null},FontMetrics_r=(()=>{let t="";for(let e=32;e<127;e++)t+=String.fromCharCode(e);return t})();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const TextRenderer_s=1;class TextRenderer_r{constructor(t,e,i,n){this.text=t,this._alignment=e,this._parameters=i,this._maxSize=n,this._textWidths=[],this._lineWidths=[],this._renderPixelRatio=null,this._metricsCached=null,this.key=`TextRenderer-${this._parameters.key}-${this._alignment}--${t}`,this._lines=t.replaceAll(" ","").split(/\r?\n/)}get displayWidth(){return Math.ceil(this._displayWidth+2*this._horizontalPadding)}get displayHeight(){let t=this._metrics.firstLineAscent;for(let e=0;e<this._lines.length-1;e++)t+=this._lineSpacing;return t+=this._metrics.lastLineDescent,Math.ceil(t+2*this._haloSize+2*this._verticalPadding)}get renderedWidth(){return this._toRoundedRenderUnit(this.displayWidth)}get renderedHeight(){return this._toRoundedRenderUnit(this.displayHeight)}get firstRenderedBaselinePosition(){return this._toRenderUnit(this._firstLineYOffset+this._metrics.firstLineAscent)}get _firstLineYOffset(){return this._verticalPadding+this._haloSize}get _metrics(){if(null==this._metricsCached){const t=TextHelperCanvas_a(TextRenderer_a,TextRenderer_l,TextRenderer_l).getContext("2d");this._parameters.setFontProperties(t,this._fontSize);let e=2*this._haloSize;const s=this._parameters.definition.font;"italic"!==s.style&&"oblique"!==s.style&&"bold"!==s.weight&&"bolder"!==s.weight||(e+=.3*t.measureText("A").width),this._textWidths.length=0,this._lineWidths.length=0;let r,h,o=0,d=0,_=0;this._lines.forEach(((i,n)=>{const s=t.measureText(i),a=s.width,l=a+e;this._textWidths.push(a),this._lineWidths.push(l),o=Math.max(o,l),d=Math.max(d,s.actualBoundingBoxAscent),_=Math.max(_,s.actualBoundingBoxDescent),0===n&&(r=s),n===this._lines.length-1&&(h=s)}));const g=FontMetrics_e(this._parameters);d=Math.max(d,g.maxAscent),_=Math.max(_,g.maxDescent);const m=r.actualBoundingBoxAscent,f="underline"===this._parameters.definition.font.decoration?_:h.actualBoundingBoxDescent;this._metricsCached=new TextRenderer_c(m,f,d,_,o)}return this._metricsCached}get _lineSpacing(){return(this._midLineHeight+this._linePadding)*this._parameters.definition.lineSpacingFactor}get _midLineHeight(){return this._metrics.midLineHeight}get _linePadding(){return this._midLineHeight*TextRenderer_d}get _midLineAscent(){return this._metrics.maxLineAscent}get _renderedFontSize(){return this._toRenderUnit(this._fontSize)}get _fontSize(){return this._parameters.definition.size}get _renderedHaloSize(){return this._toRenderUnit(this._haloSize)}get _haloSize(){return this._parameters.haloSize}get _horizontalPadding(){return this._hasBackground?this._parameters.definition.background.padding[0]:0}get _verticalPadding(){return Math.max(this._hasBackground?this._parameters.definition.background.padding[1]:0,TextRenderer_s)}get _hasBackground(){return!!this._parameters.backgroundStyle}get renderPixelRatio(){if(null==this._renderPixelRatio){const t=this._parameters.definition.pixelRatio;this._renderPixelRatio=Math.min(t,Math.min(this._maxSize[0]/this.displayWidth,this._maxSize[1]/this.displayHeight))}return this._renderPixelRatio}_getLineXOffset(t){switch(this._alignment){case TextRenderer_o.Left:return this._horizontalPadding;case TextRenderer_o.Center:return(this.displayWidth-this._lineWidths[t])/2;case TextRenderer_o.Right:return this.displayWidth-this._horizontalPadding-this._lineWidths[t]}}render(t,i,n){t.save();const s=i/=this.renderPixelRatio,r=n/=this.renderPixelRatio,h=this._haloSize,o=this._firstLineYOffset+this._metrics.firstLineAscent;i+=h,n+=o;const a=this._haloSize>0;a&&this._renderHalo(t,s,r,h,o),this._parameters.setFontProperties(t,this._renderedFontSize);for(let e=0;e<this._lines.length;++e){const s=this._lines[e],r=this._getLineXOffset(e);a&&(t.globalCompositeOperation="destination-out",t.fillStyle="rgb(0, 0, 0)",this._fillText(t,s,i+r,n),this._renderLineDecoration(t,i+r,n,this._textWidths[e])),t.globalCompositeOperation="source-over",t.fillStyle=this._parameters.textStyle,this._fillText(t,s,i+this._getLineXOffset(e),n),this._renderLineDecoration(t,i+r,n,this._textWidths[e]),n+=this._lineSpacing}if(debugFlags/* debugFlags */.b.TEXT_SHOW_BASELINE){t.strokeStyle=TextRenderer_,t.setLineDash([2,2]),t.lineWidth=1;let e=r+o;for(let i=0;i<this._lines.length;++i)this._drawLine(t,[s,e],[s+this.displayWidth,e]),e+=this._lineSpacing}if(debugFlags/* debugFlags */.b.TEXT_SHOW_BORDER&&(t.strokeStyle=TextRenderer_,t.setLineDash([]),t.lineWidth=1,this._drawBox(t,[s,r],[this.displayWidth,this.displayHeight])),this._hasBackground){const e=this._parameters.definition.background.borderRadius*this.renderPixelRatio;this._roundedRect(t,s,r,e),t.globalCompositeOperation="destination-over",t.fillStyle=this._parameters.backgroundStyle,t.fill()}t.restore()}_renderLineDecoration(t,e,i,n,s=!1){if("none"===this._parameters.definition.font.decoration||0===n)return;const r=1,h=Math.max(this._parameters.definition.size/16,r);switch(this._parameters.definition.font.decoration){case"underline":i+=2*h;break;case"line-through":i-=.33*this._midLineAscent}const o=s?this._haloSize:0;t.strokeStyle=s?this._parameters.haloStyle:this._parameters.textStyle,t.lineWidth=this._toRenderUnit(h+2*o),t.beginPath(),t.moveTo(this._toRenderUnit(e-o),this._toRenderUnit(i)),t.lineTo(this._toRenderUnit(e+n+o),this._toRenderUnit(i)),t.stroke()}_roundedRect(e,i,n,s){i=this._toRenderUnit(i),n=this._toRenderUnit(n);const r=this.renderedWidth,h=this.renderedHeight;0!==s?(s=(0,mathUtils/* clamp */.qE)(s,0,Math.floor(h/2)),e.beginPath(),e.moveTo(i,n+s),e.arcTo(i,n,i+s,n,s),e.lineTo(i+r-s,n),e.arcTo(i+r,n,i+r,n+s,s),e.lineTo(i+r,n+h-s),e.arcTo(i+r,n+h,i+r-s,n+h,s),e.lineTo(i+s,n+h),e.arcTo(i,n+h,i,n+h-s,s),e.closePath()):e.rect(i,n,r,h)}_renderHalo(t,e,i,s,r){const h=this.renderedWidth,o=this.renderedHeight,d=TextHelperCanvas_a(TextRenderer_a,Math.max(h,TextRenderer_l),Math.max(o,TextRenderer_l)),_=d.getContext("2d");_.clearRect(0,0,h,o),this._parameters.setFontProperties(_,this._renderedFontSize),_.fillStyle=this._parameters.haloStyle,_.strokeStyle=this._parameters.haloStyle;const c=this._renderedHaloSize<3;_.lineJoin=c?"miter":"round",c?this._renderHaloEmulated(_,s,r):this._renderHaloNative(_,s,r);let g=r;for(let n=0;n<this._lines.length;++n){const t=this._getLineXOffset(n);this._renderLineDecoration(_,s+t,g,this._textWidths[n],!0),g+=this._lineSpacing}t.globalAlpha=this._parameters.definition.halo.color[3],t.drawImage(d,0,0,h,o,this._toRenderUnit(e),this._toRenderUnit(i),h,o),t.globalAlpha=1}_renderHaloEmulated(t,e,i){for(let n=0;n<this._lines.length;++n){const s=this._lines[n],r=this._getLineXOffset(n);for(const[n,o]of TextRenderer_h)this._fillText(t,s,e+r+this._haloSize*n,i+this._haloSize*o);i+=this._lineSpacing}}_renderHaloNative(t,e,i){const n=2*this._haloSize;for(let s=0;s<this._lines.length;++s){const r=this._lines[s],h=this._getLineXOffset(s),o=5,a=.1;for(let s=0;s<o;s++){const d=1-(o-1)*a+s*a;t.lineWidth=this._toRenderUnit(d*n),this._strokeText(t,r,e+h,i)}i+=this._lineSpacing}}get _displayWidth(){return this._metrics.displayWidth}_toRenderUnit(t){return t*this.renderPixelRatio}_toRoundedRenderUnit(t){return Math.round(t*this.renderPixelRatio)}_fillText(t,e,i,n){t.fillText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_strokeText(t,e,i,n){t.strokeText(e,this._toRenderUnit(i),this._toRenderUnit(n))}_drawLine(t,e,i){t.beginPath(),t.moveTo(this._toRoundedRenderUnit(e[0])+.5,this._toRoundedRenderUnit(e[1])+.5),t.lineTo(this._toRoundedRenderUnit(i[0])+.5,this._toRoundedRenderUnit(i[1])+.5),t.stroke()}_drawBox(t,e,i){const n=this._toRenderUnit(e[0]),s=this._toRenderUnit(e[1]),r=this._toRenderUnit(i[0]),h=this._toRenderUnit(i[1]),o=Math.floor(n)+.5,a=Math.ceil(n+r)-.5,d=Math.floor(s)+.5,l=Math.ceil(s+h)-.5;t.beginPath(),t.moveTo(o,d),t.lineTo(a,d),t.lineTo(a,l),t.lineTo(o,l),t.lineTo(o,d),t.stroke()}}const TextRenderer_h=[];{const t=16;for(let e=0;e<360;e+=360/t)TextRenderer_h.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}var TextRenderer_o;!function(t){t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right"}(TextRenderer_o||(TextRenderer_o={}));const TextRenderer_a={canvas:null},TextRenderer_d=.2,TextRenderer_l=512,TextRenderer_="rgb(255, 0, 255, 0.5)";class TextRenderer_c{get firstLineHeight(){return this.firstLineAscent+this.maxLineDescent}get midLineHeight(){return this.maxLineAscent+this.maxLineDescent}get lastLineHeight(){return this.maxLineAscent+this.lastLineDescent}constructor(t,e,i,n,s){this.firstLineAscent=t,this.lastLineDescent=e,this.maxLineAscent=i,this.maxLineDescent=n,this.displayWidth=s}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/placementUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const placementUtils_s=Object.freeze({left:0,center:.5,right:1}),placementUtils_i=Object.freeze({"bottom-left":(0,vec2f64.f)(0,0),bottom:(0,vec2f64.f)(.5,0),"bottom-right":(0,vec2f64.f)(1,0),left:(0,vec2f64.f)(0,.5),center:(0,vec2f64.f)(.5,.5),right:(0,vec2f64.f)(1,.5),"top-left":(0,vec2f64.f)(0,1),top:(0,vec2f64.f)(.5,1),"top-right":(0,vec2f64.f)(1,1)});function placementUtils_f(t){switch(t){case"left":return TextRenderer_o.Left;case"right":return TextRenderer_o.Right;default:return TextRenderer_o.Center}}function placementUtils_a(t){switch(t){case"bottom-left":case"left":case"top-left":return"left";case"bottom":case"center":case"top":return"center";case"bottom-right":case"right":case"top-right":return"right"}}function placementUtils_u(t){switch(t){case"bottom-left":case"bottom":case"bottom-right":return"bottom";case"left":case"center":case"right":return"center";case"top-left":case"top":case"top-right":return"top"}}function placementUtils_h(t,e){switch(e){case"bottom":return"left"===t?"bottom-left":"right"===t?"bottom-right":"bottom";case"center":return t;case"top":return"left"===t?"top-left":"right"===t?"top-right":"top"}}function placementUtils_m(t){return"middle"===t?"center":t}function placementUtils_l(r,c){switch(r){case"top":return (0,vec2.s)(c,0,TextRenderer_s);case"bottom":return (0,vec2.s)(c,0,-TextRenderer_s);default:return (0,vec2.j)(c,vec2f64.Z)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js
var sdfPrimitives = __webpack_require__(97213);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js
var RenderGeometry = __webpack_require__(2007);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js + 4 modules
var Texture = __webpack_require__(28443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js + 4 modules
var HUDMaterial = __webpack_require__(62331);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/CIMSymbol.js
var CIMSymbol = __webpack_require__(54394);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DIconSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Z=(0,vec3f64.f)(0,0,1),K=16,Q=1.5,X=sdfPrimitives/* defaultSymbolSizeRatio */.CN,Graphics3DIconSymbolLayer_Y=[X/2,X/2,1-X/2,1-X/2],Graphics3DIconSymbolLayer_ee=[sdfPrimitives/* defaultTexSize */.Q_*X,sdfPrimitives/* defaultTexSize */.Q_*X];class Graphics3DIconSymbolLayer_te extends Graphics3DSymbolLayer_h{getCachedSize(){return{size:this._getIconSize()}}constructor(e,t,r,i){super(e,t,r,i),this._cimLayers=null,this._cimSymbolMaterials=new Map,this._cimSymbolTextures=new Map,this._cimMaterialParametersInfo=null,this._cimRequiredFields=null,this._cimScaleFactorOrFunction=null,this._size=null,this._symbolTextureRatio=1,this._outlineSize=0,this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!0}}async doLoad(e){this._validateOrThrow();const t=this._prepareMaterialParameters(),r=this._getPrimitive();if(null!=r)this._prepareResourcesPrimitive(t,r);else{const r=(0,utils/* getIconHref */.N7)(this.symbolLayer),i=(0,urlUtils/* dataComponents */.r$)(r);i&&"application/json"===i.mediaType?await this._prepareResourcesCIM(t,JSON.parse(i.data),e):await this._prepareResourcesHref(t,r,e)}}_validateOrThrow(){if(this._drivenProperties.size)return;const e=(0,graphicUtils/* validateSymbolLayerSize */.Hj)(this._getIconSize());if(e)throw new core_Error/* default */.A("graphics3diconsymbollayer:invalid-size",e)}_getIconSize(){const e=this.symbolLayer,t=Math.round(null!=e.size?(0,screenUtils/* pt2px */.Lz)(e.size):K);return this._drivenProperties.size?Math.max(t,64):t}_generateTextureCIM(e){const t=this._getGraphicHash(e);let r=""===t?null:this._cimSymbolTextures.get(t);if(!r){const i={scaleFactor:this._cimScaleFactorOrFunction},s=this._context.sharedResources.cimSymbolRasterizer.rasterizeCIMSymbol3D(this._cimLayers,e,"esriGeometryPoint",i,void 0,void 0);this._cimMaterialParametersInfo.anchorPosition=this._getAnchorPos("relative",s.anchorPosition);const a={width:s.imageData.width,height:s.imageData.height};r=new Texture/* Texture */.g(s.imageData,a),this._cimSymbolTextures.set(t,r),this._context.stage.add(r)}return r}_prepareMaterialParameters(){const e={anchorPosition:this._getAnchorPos(this.symbolLayer.anchor,this.symbolLayer.anchorPosition)},t=this.symbol;if(Graphics3DIconSymbolLayer_re(t)){const{screenLength:r,minWorldLength:i,maxWorldLength:s}=t.verticalOffset;e.verticalOffset={screenLength:(0,screenUtils/* pt2px */.Lz)(r),minWorldLength:i||0,maxWorldLength:null!=s?s:1/0}}return this._context.screenSizePerspectiveEnabled&&(e.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),e.occlusionTest=!0,e.hasSlicePlane=this._context.slicePlaneEnabled,e}_prepareResourcesPrimitive(e,t){const r=this._getOutlineSize();if(Graphics3DIconSymbolLayer_ie(t)&&0===r)throw new Error("Nothing to render");if(this._outlineSize=r,e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,null!=this._context.sharedResources.textures){const r=this._context.sharedResources.textures.fromData(`${t}-icon`,(()=>(0,sdfPrimitives/* createTexture */.sZ)(t)));this._textureHandle=r,e.textureId=r.texture.id}e.textureIsSignedDistanceField=!0,e.sampleSignedDistanceFieldTexelCenter=(0,sdfPrimitives/* requiresHalfTexelOffset */.ny)(t),e.distanceFieldBoundingBox=Graphics3DIconSymbolLayer_Y;const i=this._getIconSize();this._size=[i,i],this._symbolTextureRatio=1/X,this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesHref(e,i,a){this._outlineSize=this._getOutlineSize(),e.color=this._getFillColor(),e.outlineColor=this._getOutlineColor(),e.outlineSize=this._outlineSize,e.textureIsSignedDistanceField=!1;const o=this._getIconSize(),n=o*this._context.graphicsCoreOwner.view.state.rasterPixelRatio;if(null!=this._context.sharedResources.textures){const l=await (0,asyncUtils/* result */.Ke)(this._context.sharedResources.textures.fromUrl(i,n,{signal:a}));if(!1===l.ok){(0,promiseUtils/* throwIfAbortError */.QP)(l.error);throw new core_Error/* default */.A("graphics3diconsymbollayer:request-failed",`Failed to load (Request for icon resource failed: ${i})`)}this._textureHandle=l.value;const c=l.value.texture,h=c.parameters.width/c.parameters.height;this._size=h>1?[o,Math.round(o/h)]:[Math.round(o*h),o],e.textureId=c.id}this._createMaterialAndAddToStage(e,this._context.stage)}async _prepareResourcesCIM(e,t,r){const i=new CIMSymbol/* default */.A({data:t});if(!this._context.sharedResources.cimSymbolRasterizer){const e=(await __webpack_require__.e(/* import() */ 9851).then(__webpack_require__.bind(__webpack_require__, 79851))).CIMSymbolRasterizer;(0,promiseUtils/* throwIfAborted */.Te)(r),this._context.sharedResources.cimSymbolRasterizer||(this._context.sharedResources.cimSymbolRasterizer=new e(this._context.renderCoordsHelper.spatialReference,!0))}const s=this._context.layer.fields?this._context.layer.fields.map((e=>e.toJSON())):null;let o,n;if(this._cimLayers=await this._context.sharedResources.cimSymbolRasterizer.analyzeCIMSymbol3D(i,s,this._context.renderer&&"dictionary"===this._context.renderer.type?this._context.renderer.fieldMap:null,"esriGeometryPoint",{signal:r}),this._context.renderer&&"dictionary"===this._context.renderer.type&&this._context.renderer.scaleExpression){const e=this._context.renderer;if(isNaN(e.scaleExpression)){const t=e.scaleExpression,r=await (0,arcadeOnDemand/* createRendererExpression */.Ad)(t,this._context.layer.spatialReference,s);n=(e,t,i)=>{const s=(0,callExpressionWithFeature/* default */.A)(r,e,{$view:i},"esriGeometryPoint",t);return null!==s?s:1}}else o=Number(e.scaleExpression)}this._cimScaleFactorOrFunction=o||n||1;const l=this._context.renderer?await this._context.renderer.getRequiredFields(this._context.layer.fieldsIndex):[];(0,promiseUtils/* throwIfAborted */.Te)(r);const c=this._context.layer.fieldsIndex;this._cimRequiredFields=l.map((e=>c.get(e).name)),this._cimMaterialParametersInfo=e,this._cimMaterialParametersInfo.color=this._getFillColor(),this._cimMaterialParametersInfo.outlineColor=[0,0,0,0],this._cimMaterialParametersInfo.outlineSize=0,this._cimMaterialParametersInfo.textureIsSignedDistanceField=!1}_getPrimitive(){return this.symbolLayer.resource&&this.symbolLayer.resource.href?null:this.symbolLayer.resource&&this.symbolLayer.resource.primitive||IconSymbol3DLayerResource/* defaultPrimitive */.r}_getOutlineSize(){let e=0;const t=this.symbolLayer;if(null!=t.outline?.size)return Math.max((0,screenUtils/* pt2px */.Lz)(t.outline.size),0);return e=Graphics3DIconSymbolLayer_ie(this._getPrimitive())?Q:0,Math.max(e,0)}_getOutlineColor(){const t=this._getLayerOpacity(),r=this.symbolLayer,i=r?.outline?.color;if(null!=i){const r=Color/* default */.A.toUnitRGB(i),s=i.a*t;return[r[0],r[1],r[2],s]}return[0,0,0,0]}_getFillColor(){if(Graphics3DIconSymbolLayer_ie(this._getPrimitive()))return constants_c;const e=null==this._getPrimitive(),t=this.symbolLayer?.material?.color;return this._getCombinedOpacityAndColor(t,{hasIntrinsicColor:e})}_getAnchorPos(e,t){return"relative"===e?(0,vec2f64.f)((t.x||0)+.5,.5-(t.y||0)):e in placementUtils_i?placementUtils_i[e]:placementUtils_i.center}_createMaterialAndAddToStage(e,t){if(this._cimLayers){this._fastUpdates=null;let r=e.textureId?this._cimSymbolMaterials.get(e.textureId):null;return r||(r=new HUDMaterial/* HUDMaterial */.R(e),this._cimSymbolMaterials.set(e.textureId??0,r),t.add(r)),r}return this._fastUpdates=(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,this._fastVisualVariableConvertOptions()),this._fastUpdates&&(e={...e,...this._fastUpdates.materialParameters}),this._materials[0]=new HUDMaterial/* HUDMaterial */.R(e),t.add(this._materials[0]),this._materials[0]}_setDrapingDependentMaterialParameters(){this.draped&&(this._forEachMaterial((e=>{e.setParameters({verticalOffset:null,screenSizePerspective:null,occlusionTest:!1,hasSlicePlane:!1,shaderPolygonOffset:0,isDraped:this.draped})})),this.layerOpacityChanged())}destroy(){super.destroy(),this._forEachMaterial((e=>this._context.stage.remove(e))),this._materials.length=0,this._cimSymbolMaterials.clear(),this._cimSymbolTextures.forEach((e=>this._context.stage.remove(e))),this._cimSymbolTextures.clear(),this._textureHandle=(0,maybe/* releaseMaybe */.Gz)(this._textureHandle)}_getScaleFactor(e,t){if(this._drivenProperties.size&&e.size){for(let t=0;t<3;t++){const r=e.size[t];r&&"symbol-value"!==r&&"proportional"!==r&&(e.size[t]=(0,screenUtils/* pt2px */.Lz)(r))}if("symbol-value"===e.size[0])return 1;if(isFinite(+e.size[0]))return+e.size[0]/t;if(isFinite(+e.size[2]))return+e.size[2]/t}return 1}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;let r,i=[0,0];if(this._cimLayers){if(!this._cimLayers.length)return null;const e=this._generateTextureCIM(t),s={textureId:e.id,...this._cimMaterialParametersInfo};r=this._createMaterialAndAddToStage(s,this._context.stage),i=[e.parameters.width,e.parameters.height]}else i=this._size,r=this._materials[0];const s=pointUtils_u(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`),null;const a=e.renderingInfo,o=this._getVertexOpacityAndColor(a);let n=1;if(!this._fastUpdates?.visualVariables.size){const e=i[0]>i[1]?i[0]:i[1];n=this._getScaleFactor(a,e)}n*=this._symbolTextureRatio;const l=(0,vec2f64.f)(i[0]*n,i[1]*n),h=this.setGraphicElevationContext(t);return this.ensureDrapedStatus("on-the-ground"===h.mode)&&this._setDrapingDependentMaterialParameters(),this.draped?this._createAsOverlay(t,s,r,o,l,e.layer.uid):this._createAs3DShape(t,s,r,o,l,h,t.uid)}layerOpacityChanged(){const e=this._getFillColor(),t=this._getOutlineColor();this._forEachMaterial((r=>{r.setParameters({color:e}),r.setParameters({outlineColor:t})}))}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,s=(0,elevationAlignmentUtils/* elevationModeChangeUpdateType */.I2)(Graphics3DIconSymbolLayer_te.elevationModeChangeTypes,r,i);if(s!==elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE)return s;const a=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(i)||"absolute-height"===i;return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>a))}slicePlaneEnabledChanged(){return this.draped||this._forEachMaterial((e=>{e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),!0}physicalBasedRenderingChanged(){return!0}get pixelRatioChanged(){return null!=this._getPrimitive()}applyRendererDiff(e,t){for(const r in e.diff){if("visualVariables"!==r)return interfaces_e.RecreateSymbol;if(!(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(this._fastUpdates,t,this._fastVisualVariableConvertOptions()))return interfaces_e.RecreateSymbol;this._materials[0]?.setParameters(this._fastUpdates.materialParameters)}return interfaces_e.FastUpdate}_defaultElevationInfoNoZ(){return Graphics3DIconSymbolLayer_se}_createAs3DShape(e,t,r,i,s,a,o){const n=this.getFastUpdateAttrValues(e),l=this._context.layer.uid,c=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:l}),h=(0,GeometryUtil/* createPointGeometry */.DJ)(r,Z,null,i,s,Graphics3DIconSymbolLayer_ae,null,n,c),m=pointUtils_c(this._context,t,h,a,o);if(null==m)return null;const u=new Graphics3DObject3DGraphicLayer_p(this,m.object,[h],null,null,ElevationAligners_p,a);return u.alignedSampledElevation=m.sampledElevation,u.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(a.mode)||"absolute-height"===a.mode,u.getScreenSize=this._createScreenSizeGetter(s,n),u.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(u.getScreenSize(),1,e),pointUtils_p(u,t,this._context.elevationProvider),u}_createAsOverlay(e,t,r,i,s,a){r.renderPriority=this._renderPriority;const o=(0,vec4f64.c)();(0,projectPointToVector/* projectPointToVector */.g)(t,o,this._context.overlaySR),o[2]=OverlayRenderer/* drapedZ */.bi;const n=this._context.clippingExtent;if(null!=n&&!(0,aaBoundingBox/* containsPoint */.Uc)(n,o))return null;const l=this.getFastUpdateAttrValues(e),c=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:e.uid,layerUid:this._context.layer.uid}),h=(0,GeometryUtil/* createPointGeometry */.DJ)(r,Z,o,i,s,null,null,l,c),m=new RenderGeometry/* RenderGeometry */.$(h,{layerUid:a,graphicUid:e.uid}),u=new Graphics3DDrapedGraphicLayer_u(this,[m],null,this._context.drapeSourceRenderer);return u.getScreenSize=this._createScreenSizeGetter(s,l),u.calculateRelativeScreenBounds=e=>r.calculateRelativeScreenBounds(u.getScreenSize(),1,e),u}_createScreenSizeGetter(e,t){const r=this._outlineSize+2;if(this._fastUpdates&&t){const i=e[0]/this._symbolTextureRatio,s=e[1]/this._symbolTextureRatio;return(e=(0,vec2f64.a)())=>{const[a,o]=(0,FastSymbolUpdates/* evaluateModelTransformScale */.VC)(Graphics3DIconSymbolLayer_oe,this._fastUpdates.materialParameters,t);return e[0]=a*i+r,e[1]=o*s+r,e}}const i=e[0]/this._symbolTextureRatio+r,s=e[1]/this._symbolTextureRatio+r;return(e=(0,vec2f64.a)())=>(e[0]=i,e[1]=s,e)}_fastVisualVariableConvertOptions(){const e=Math.max(this._size[0],this._size[1]),t=(0,vec3f64.f)(e,e,e),r=(0,screenUtils/* px2pt */.PN)(1),i=e*r,s=(0,vec3f64.f)(i,i,i);return new FastSymbolUpdates/* ConvertOptions */.wI({size:!0,color:!0,rotation:!0,opacity:!1},t,s,r)}_getGraphicHash(e){let t="";for(const r of this._cimRequiredFields)t+=r+e.attributes[r];return t}_forEachMaterial(e){this._materials.forEach(e),this._cimSymbolMaterials.forEach(e)}test(){return{...super.test(),material:this._materials[0]}}}function Graphics3DIconSymbolLayer_re(e){return e&&"point-3d"===e.type&&e.hasVisibleVerticalOffset()}function Graphics3DIconSymbolLayer_ie(e){return null!=e&&("cross"===e||"x"===e)}Graphics3DIconSymbolLayer_te.PRIMITIVE_SIZE=Graphics3DIconSymbolLayer_ee,Graphics3DIconSymbolLayer_te.elevationModeChangeTypes={definedChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE,staysOnTheGround:elevationAlignmentUtils/* SymbolUpdateType */.uw.NONE,onTheGroundChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE};const Graphics3DIconSymbolLayer_se={mode:"relative-to-ground",offset:0},Graphics3DIconSymbolLayer_ae=(0,vec4f64.f)(0,0,0,1),Graphics3DIconSymbolLayer_oe=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js
var RibbonLineTechniqueConfiguration = __webpack_require__(16906);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function lineUtils_n(n){switch(n){case"butt":return RibbonLineTechniqueConfiguration/* CapType */.x.BUTT;case"square":return RibbonLineTechniqueConfiguration/* CapType */.x.SQUARE;case"round":return RibbonLineTechniqueConfiguration/* CapType */.x.ROUND;default:return null}}function lineUtils_r(e){return"diamond"===e?"kite":e}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/engineContent/line.js
var line = __webpack_require__(46684);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/line.js
var renderInfoUtils_line = __webpack_require__(4062);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js
var GLTextureMaterial = __webpack_require__(89140);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var VisualVariablePassParameters = __webpack_require__(17745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/LineMarker.glsl.js
var LineMarker_glsl = __webpack_require__(7700);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const W=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.UV0,1],[VertexAttribute/* VertexAttribute */.r.AUXPOS1,2],[VertexAttribute/* VertexAttribute */.r.NORMAL,3],[VertexAttribute/* VertexAttribute */.r.COLOR,4],[VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE,4],[VertexAttribute/* VertexAttribute */.r.SIZE,5],[VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE,5],[VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE,6]]);class LineMarkerTechnique_E extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,LineMarkerTechnique_E.shader.get().build(this.configuration),W)}_makePipelineState(t,i){const o=this.configuration,u=t===TransparencyPassType/* TransparencyPassType */.y.NONE;return (0,renderState/* makePipelineState */.Ey)({blending:o.output===ShaderOutput/* ShaderOutput */.V.Color||o.output===ShaderOutput/* ShaderOutput */.V.Alpha?u?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(t):null,depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(t)},depthWrite:u?o.writeDepth?renderState/* defaultDepthWriteParams */.kn:null:(0,OrderIndependentTransparency/* oitDepthWrite */.XO)(t),colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:o.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:o.hasOccludees?i?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:{factor:0,units:-10}})}initializePipeline(){return this.configuration.occluder&&(this._occluderPipelineTransparent=(0,renderState/* makePipelineState */.Ey)({blending:OrderIndependentTransparency/* blendingDefault */.V0,depthTest:StencilUtils/* depthCompareAlways */.sf,depthWrite:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:null,stencilTest:StencilUtils/* stencilToolTransparentOccluderParams */.mK}),this._occluderPipelineOpaque=(0,renderState/* makePipelineState */.Ey)({blending:OrderIndependentTransparency/* blendingDefault */.V0,depthTest:StencilUtils/* depthCompareAlways */.sf,depthWrite:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:StencilUtils/* stencilWriteMaskOff */.r8,stencilTest:StencilUtils/* stencilToolMaskOccluderParams */.I$}),this._occluderPipelineMaskWrite=(0,renderState/* makePipelineState */.Ey)({blending:null,depthTest:StencilUtils/* depthCompareLess */.m,depthWrite:null,colorWrite:null,stencilWrite:StencilUtils/* stencilWriteMaskOn */.v0,stencilTest:StencilUtils/* stencilToolMaskBaseParams */.a9})),this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}getPipeline(e,t,i){return e?this._occludeePipelineState:this.configuration.occluder?i?this._occluderPipelineTransparent:t?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipeline()}}LineMarkerTechnique_E.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(LineMarker_glsl.L,(()=>__webpack_require__.e(/* import() */ 6240).then(__webpack_require__.bind(__webpack_require__, 46240))));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js
var LineMarkerTechniqueConfiguration = __webpack_require__(58376);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/LineMarkerMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LineMarkerMaterial_A extends Material/* Material */.im{constructor(t){super(t,new LineMarkerMaterial_v),this._vertexAttributeLocations=W,this._configuration=new LineMarkerTechniqueConfiguration/* LineMarkerTechniqueConfiguration */.Dt,this._layout=this.createLayout()}getConfiguration(t,e){return this._configuration.output=t,this._configuration.space=e.slot===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL?LineMarkerTechniqueConfiguration/* LineMarkerSpace */.lM.Draped:this.parameters.worldSpace?LineMarkerTechniqueConfiguration/* LineMarkerSpace */.lM.World:LineMarkerTechniqueConfiguration/* LineMarkerSpace */.lM.Screen,this._configuration.hideOnShortSegments=this.parameters.hideOnShortSegments,this._configuration.hasCap=this.parameters.cap!==RibbonLineTechniqueConfiguration/* CapType */.x.BUTT,this._configuration.anchor=this.parameters.anchor,this._configuration.hasTip=this.parameters.hasTip,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.occluder=this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,this._configuration.transparencyPassType=e.transparencyPassType,this._configuration.multipassEnabled=e.multipassEnabled,this._configuration.cullAboveGround=e.multipassTerrain.cullAboveGround,this._configuration}intersect(){}createLayout(){const t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec2f(VertexAttribute/* VertexAttribute */.r.UV0).vec3f(VertexAttribute/* VertexAttribute */.r.AUXPOS1);return this.parameters.worldSpace&&t.vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL),this.parameters.vvSize?t.f32(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE):t.f32(VertexAttribute/* VertexAttribute */.r.SIZE),this.parameters.vvColor?t.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):t.vec4f(VertexAttribute/* VertexAttribute */.r.COLOR),this.parameters.vvOpacity&&t.f32(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE),t}createBufferWriter(){return new LineMarkerMaterial_O(this._layout,this.parameters)}produces(t,e){if(e===ShaderOutput/* ShaderOutput */.V.Color||e===ShaderOutput/* ShaderOutput */.V.Alpha||e===ShaderOutput/* ShaderOutput */.V.Highlight||e===ShaderOutput/* ShaderOutput */.V.Depth){if(t===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil)return t===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL||t===RenderSlot/* RenderSlot */.N.OCCLUDER_MATERIAL||t===RenderSlot/* RenderSlot */.N.TRANSPARENT_OCCLUDER_MATERIAL;if(e===ShaderOutput/* ShaderOutput */.V.Color||e===ShaderOutput/* ShaderOutput */.V.Alpha){return t===(this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL)}return t===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL}return!1}createGLMaterial(t){return new LineMarkerMaterial_E(t)}}class LineMarkerMaterial_E extends GLTextureMaterial/* GLTextureMaterial */.m{constructor(){super(...arguments),this._markerPrimitive=null}dispose(){super.dispose(),this._markerTextureRepository.release(this._markerPrimitive),this._markerPrimitive=null}_updateParameters(t){const e=this._material.parameters.markerPrimitive;return e!==this._markerPrimitive&&(this._material.setParameters({markerTexture:this._markerTextureRepository.swap(e,this._markerPrimitive)}),this._markerPrimitive=e),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(LineMarkerTechnique_E,t)}_updateOccludeeState(t){t.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:t.hasOccludees})}beginSlot(t){return this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||this._updateOccludeeState(t),this._updateParameters(t)}}class LineMarkerMaterial_v extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.width=0,this.color=[1,1,1,1],this.markerPrimitive="arrow",this.placement="end",this.cap=RibbonLineTechniqueConfiguration/* CapType */.x.BUTT,this.anchor=LineMarkerTechniqueConfiguration/* LineMarkerAnchor */.kJ.Center,this.hasTip=!1,this.worldSpace=!1,this.hideOnShortSegments=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.hasOccludees=!1,this.markerTexture=null}}class LineMarkerMaterial_O{constructor(t,e){this.vertexBufferLayout=t,this._parameters=e}elementCount(){return"begin-end"===this._parameters.placement?12:6}write(a,i,s,o,n){const h=s.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,c=h.length/3;let p=[1,0,0];const l=s.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL);this._parameters.worldSpace&&null!=l&&(p=l.data);let m=1,d=0;this._parameters.vvSize?d=s.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0]:s.attributes.has(VertexAttribute/* VertexAttribute */.r.SIZE)&&(m=s.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE).data[0]);let T=[1,1,1,1],_=0;this._parameters.vvColor?_=s.attributes.get(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE).data[0]:s.attributes.has(VertexAttribute/* VertexAttribute */.r.COLOR)&&(T=s.attributes.get(VertexAttribute/* VertexAttribute */.r.COLOR).data);let f=0;this._parameters.vvOpacity&&(f=s.attributes.get(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE).data[0]);const A=new Float32Array(o.buffer);let E=n*(this.vertexBufferLayout.stride/4);const v=(t,e,r,a)=>{if(A[E++]=t[0],A[E++]=t[1],A[E++]=t[2],A[E++]=r[0],A[E++]=r[1],A[E++]=e[0],A[E++]=e[1],A[E++]=e[2],this._parameters.worldSpace&&(A[E++]=p[0],A[E++]=p[1],A[E++]=p[2]),this._parameters.vvSize?A[E++]=d:A[E++]=m,this._parameters.vvColor)A[E++]=_;else{const t=Math.min(4*a,T.length-4);A[E++]=T[t],A[E++]=T[t+1],A[E++]=T[t+2],A[E++]=T[t+3]}this._parameters.vvOpacity&&(A[E++]=f)};let O;!function(t){t[t.ASCENDING=1]="ASCENDING",t[t.DESCENDING=-1]="DESCENDING"}(O||(O={}));const g=(i,s)=>{const o=(0,vec3.s)(LineMarkerMaterial_S,h[3*i],h[3*i+1],h[3*i+2]),n=R;let u=i+s;do{(0,vec3.s)(n,h[3*u],h[3*u+1],h[3*u+2]),u+=s}while((0,vec3.G)(o,n)&&u>=0&&u<c);a&&((0,vec3.e)(o,o,a),(0,vec3.e)(n,n,a)),v(o,n,[-1,-1],i),v(o,n,[1,-1],i),v(o,n,[1,1],i),v(o,n,[-1,-1],i),v(o,n,[1,1],i),v(o,n,[-1,1],i)},I=this._parameters.placement;"begin"!==I&&"begin-end"!==I||g(0,O.ASCENDING),"end"!==I&&"begin-end"!==I||g(c-1,O.DESCENDING)}}const LineMarkerMaterial_S=(0,vec3f64.c)(),R=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js
var lineStippleUtils = __webpack_require__(86868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js + 1 modules
var RibbonLineMaterial = __webpack_require__(96824);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Extent.js
var Extent = __webpack_require__(84698);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const z=["polyline","polygon","extent"],Graphics3DLineSymbolLayer_W=new FastSymbolUpdates/* ConvertOptions */.wI({size:!0,color:!0,rotation:!1,opacity:!0});class Graphics3DLineSymbolLayer_O extends Graphics3DSymbolLayer_h{constructor(e,t,r,i){super(e,t,r,i)}async doLoad(){if(this._fastUpdates=(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,Graphics3DLineSymbolLayer_W),!this._drivenProperties.size){if((null!=this.symbolLayer.size?this.symbolLayer.size:(0,screenUtils/* px2pt */.PN)(1))<0)throw new core_Error/* default */.A("graphics3dlinesymbollayer:invalid-size","Symbol sizes may not be negative values")}}_getMaterialParameters(e,t=!1){const r=this._getCombinedOpacityAndColor(t&&this._markerColor||this._materialColor);this._patternHidesLine&&!t&&(r[3]=0);const i={width:this._computeMaterialWidth(this.symbolLayer?.size),color:r,hasPolygonOffset:!0,join:this.symbolLayer.join||"miter",cap:lineUtils_n(this.symbolLayer.cap||"butt"),hasSlicePlane:this._context.slicePlaneEnabled,isClosed:e,stipplePattern:(0,lineStippleUtils/* getStipplePatternForLinePattern */.Xq)(this.symbolLayer.pattern)};return this._fastUpdates?.visualVariables?{...i,...this._fastUpdates.materialParameters}:i}get _materialColor(){return this.symbolLayer.material?.color}get _markerColor(){return this.symbolLayer.marker?.color}get _lineMaterial(){return null==this._materials[Graphics3DLineSymbolLayer_I.Line]&&(this._materials[Graphics3DLineSymbolLayer_I.Line]=new RibbonLineMaterial/* RibbonLineMaterial */.W(this._getMaterialParameters(!1)),this._context.stage.add(this._materials[Graphics3DLineSymbolLayer_I.Line])),this._materials[Graphics3DLineSymbolLayer_I.Line]}get _ringMaterial(){return null==this._materials[Graphics3DLineSymbolLayer_I.Ring]&&(this._materials[Graphics3DLineSymbolLayer_I.Ring]=new RibbonLineMaterial/* RibbonLineMaterial */.W(this._getMaterialParameters(!0)),this._context.stage.add(this._materials[Graphics3DLineSymbolLayer_I.Ring])),this._materials[Graphics3DLineSymbolLayer_I.Ring]}get _wireframeLineMaterial(){return null==this._materials[Graphics3DLineSymbolLayer_I.LineWireframe]&&(this._materials[Graphics3DLineSymbolLayer_I.LineWireframe]=new RibbonLineMaterial/* RibbonLineMaterial */.W({...this._getMaterialParameters(!1),wireframe:!0}),this._context.stage.add(this._materials[Graphics3DLineSymbolLayer_I.LineWireframe])),this._materials[Graphics3DLineSymbolLayer_I.LineWireframe]}get _wireframeRingMaterial(){return null==this._materials[Graphics3DLineSymbolLayer_I.RingWireframe]&&(this._materials[Graphics3DLineSymbolLayer_I.RingWireframe]=new RibbonLineMaterial/* RibbonLineMaterial */.W({...this._getMaterialParameters(!0),wireframe:!0}),this._context.stage.add(this._materials[Graphics3DLineSymbolLayer_I.RingWireframe])),this._materials[Graphics3DLineSymbolLayer_I.RingWireframe]}get _markerMaterial(){return null==this._materials[Graphics3DLineSymbolLayer_I.Marker]&&null!=this.symbolLayer.marker&&(this._materials[Graphics3DLineSymbolLayer_I.Marker]=new LineMarkerMaterial_A({...this._getMaterialParameters(!1,!0),placement:this.symbolLayer.marker.placement,markerPrimitive:lineUtils_r(this.symbolLayer.marker.style)}),this._context.stage.add(this._materials[Graphics3DLineSymbolLayer_I.Marker])),this._materials[Graphics3DLineSymbolLayer_I.Marker]}destroy(){super.destroy(),this._forEachMaterial((e=>this._context.stage.remove(e))),this._materials.length=0}_getDrivenSize(e){return this._drivenProperties.size&&e.size?(0,screenUtils/* pt2px */.Lz)(renderingInfoUtils_s(e.size)):1}_getDrivenColor(e){const t=(0,vec4f64.f)(1,1,1,1);return this._drivenProperties.color&&e.color&&(t[0]=e.color[0],t[1]=e.color[1],t[2]=e.color[2],e.color.length>0&&(t[3]=e.color[3])),this._drivenProperties.opacity&&e.opacity&&(t[3]=e.opacity),t}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,z,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus("on-the-ground"===r.mode),this.draped?this._createAsOverlay(e,this._context.layer.uid):this._createAs3DShape(e,r,t.uid)}applyRendererDiff(e,t){for(const r in e.diff){if("visualVariables"!==r)return interfaces_e.RecreateSymbol;{const e=this._fastUpdates;if(!(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(e,t,Graphics3DLineSymbolLayer_W))return interfaces_e.RecreateSymbol;this._forEachMaterial((t=>t?.setParameters(e.materialParameters)))}}return interfaces_e.FastUpdate}prepareSymbolLayerPatch(e){if("partial"!==e.diff.type)return;const t=e.diff.diff,r={};"complete"===t.size?.type&&(r.width=this._computeMaterialWidth(t.size.newValue),delete t.size),"complete"===t.cap?.type&&(r.cap=lineUtils_n(t.cap.newValue??"butt"),delete t.cap);const i=this._prepareMarkerPatch(e,t);this._prepareMaterialPatch(e,t,i),e.symbolLayerStatePatches.push((()=>this._forEachMaterial((e=>e?.setParameters(r)))))}layerOpacityChanged(){this._forEachMaterial(((e,t)=>this._updateMaterialLayerOpacity(e,t===Graphics3DLineSymbolLayer_I.Marker)))}_forEachMaterial(e){this._materials.forEach(e)}_updateMaterialLayerOpacity(e,t=!1){if(null==e)return;const r=e.parameters.color,a=this.symbolLayer?.material?.color,s=this._patternHidesLine&&!t?0:this._getCombinedOpacity(a),o=(0,vec4f64.f)(r[0],r[1],r[2],s);e.setParameters({color:o})}layerElevationInfoChanged(e,t,r){const i=this._elevationContext.mode,a=(0,elevationAlignmentUtils/* elevationModeChangeUpdateType */.I2)(Graphics3DLineSymbolLayer_O.elevationModeChangeTypes,r,i);if(a!==elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE)return a;const s=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(i);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>s))}slicePlaneEnabledChanged(){const e={hasSlicePlane:this._context.slicePlaneEnabled};return this._forEachMaterial((t=>t?.setParameters(e))),!0}physicalBasedRenderingChanged(){return!0}_getGeometryAsPolygonOrPolyline(e){switch(e.type){case"extent":if(e instanceof Extent/* default */.A)return Polygon/* default */.A.fromExtent(e);break;case"polygon":case"polyline":return e}return null}_createAs3DShape(e,t,r){const i=e.graphic,a=this._getGeometryAsPolygonOrPolyline(i.geometry),h="polygon"===a.type?a.rings:a.paths,p=new Array,c=(0,aaBoundingBox/* create */.vt)(),y=(0,renderInfoUtils_line/* geometryToRenderInfo */.C)(a,this._context.elevationProvider,this._context.renderCoordsHelper,t),_="polygon"===a.type?"rings":"paths";this._logGeometryCreationWarnings(y,h,_,"LineSymbol3DLayer");for(let s=0;s<y.lines.length;s++){const t=y.lines[s],i=t.position,h=t.mapPositions;if(null!=this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(c),(0,aaBoundingBox/* expandWithBuffer */.Hq)(c,h),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(c,this._context.clippingExtent)))continue;const m=this._createGeometry("polygon"===a.type?this._ringMaterial:this._lineMaterial,e,i,h,a.type,V.ELEVATED,r);p.push(m),debugFlags/* debugFlags */.b.LINE_WIREFRAMES&&p.push(m.instantiate({material:"polygon"===a.type?this._wireframeRingMaterial:this._wireframeLineMaterial})),null!=this._markerMaterial&&p.push(m.instantiate({material:this._markerMaterial}))}if(0===p.length)return null;const u=new Object3D/* Object3D */.B({geometries:p,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:r}),f=new Graphics3DObject3DGraphicLayer_p(this,u,p,null,null,ElevationAligners_d,t);return f.alignedSampledElevation=y.sampledElevation,f.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(t.mode),f}_createGeometry(e,t,r,i,a,s,o){const n=s===V.DRAPED?{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper}:null,l="polygon"===a,h=this._fastUpdates?.visualVariables.color,p=this._fastUpdates?.visualVariables.size,m=this._fastUpdates?.visualVariables.opacity,c=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:this._context.layer.uid}),y={position:r,size:p?null:this._getDrivenSize(t.renderingInfo),color:h?null:this._getDrivenColor(t.renderingInfo),sizeFeature:p?(0,FastSymbolUpdates/* getAttributeValue */.ul)(p.field,t.graphic):null,colorFeature:h?(0,FastSymbolUpdates/* getAttributeValue */.ul)(h.field,t.graphic):null,opacityFeature:m?(0,FastSymbolUpdates/* getAttributeValue */.ul)(m.field,t.graphic):null};return (0,line/* createGeometry */.t)(e,{overlayInfo:n,removeDuplicateStartEnd:l,mapPositions:i,attributeData:y},c)}_createAsOverlay(e,t){const r=e.graphic,i=this._getGeometryAsPolygonOrPolyline(r.geometry),a="polygon"===i.type?i.rings:i.paths,p="polygon"===i.type?this._ringMaterial:this._lineMaterial;p.renderPriority=this._renderPriority;const m=debugFlags/* debugFlags */.b.LINE_WIREFRAMES?"polygon"===i.type?this._wireframeRingMaterial:this._wireframeLineMaterial:null,c=this._markerMaterial;null!=m&&(m.renderPriority=this._renderPriority-.001),null!=c&&(c.renderPriority=this._renderPriority-.002);const y=new Array,d=(0,aaBoundingBox/* create */.vt)(),g=(0,aaBoundingBox/* empty */.Ie)(),u=(0,renderInfoUtils_line/* geometryToRenderInfoDraped */.A)(i,this._context.overlaySR),f="polygon"===i.type?"rings":"paths";this._logGeometryCreationWarnings(u,a,f,"LineSymbol3DLayer");for(const s of u.lines){if((0,aaBoundingBox/* empty */.Ie)(d),(0,aaBoundingBox/* expandWithBuffer */.Hq)(d,s.position),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(d,this._context.clippingExtent))continue;(0,aaBoundingBox/* expandWithAABB */.RF)(g,d);const a=a=>{const o=this._createGeometry(a,e,s.position,void 0,i.type,V.DRAPED,r.uid),n=new RenderGeometry/* RenderGeometry */.$(o,{layerUid:t,graphicUid:r.uid});y.push(n)};if(null!=c){a(c);const e=this.symbolLayer.marker.placement;"begin"!==e&&"begin-end"!==e||(0,aaBoundingBox/* expandWithBuffer */.Hq)(d,s.position,0,1),"end"!==e&&"begin-end"!==e||(0,aaBoundingBox/* expandWithBuffer */.Hq)(d,s.position,s.position.length-3,1)}a(p),debugFlags/* debugFlags */.b.LINE_WIREFRAMES&&a(m)}return new Graphics3DDrapedGraphicLayer_u(this,y,g,this._context.drapeSourceRenderer)}get _patternHidesLine(){const e=this.symbolLayer.pattern;return null!=e&&"style"===e.type&&"none"===e.style}_computeMaterialWidth(e){return e=e??(0,screenUtils/* px2pt */.PN)(1),this._drivenProperties.size?this._fastUpdates?.visualVariables.size?(0,screenUtils/* pt2px */.Lz)(1):1:(0,screenUtils/* pt2px */.Lz)(e)}_prepareMaterialPatch(e,t,r){const i=t.material;if(null==i)return void(r.changed&&r.useMaterialColor&&this._patchMaterialColor(this._getCombinedOpacityAndColor(this._materialColor),this._materials[Graphics3DLineSymbolLayer_I.Marker],e));if("collection"===i.type)return;const s="complete"===i.type?i.newValue?.color:"complete"===i.diff.color?.type?i.diff.color.newValue:null,o=this._getCombinedOpacityAndColor(s);r.useMaterialColor&&this._patchMaterialColor((0,vec4f64.d)(o),this._materials[Graphics3DLineSymbolLayer_I.Marker],e),this._patternHidesLine&&(o[3]=0),this._patchMaterialColor(o,this._materials[Graphics3DLineSymbolLayer_I.Line],e),delete t.material}_prepareMarkerPatch(e,t){const r=t.marker,i=this._markerMaterial;if(null==r||"partial"!==r.type||null==r.diff||null!=r.diff.placement||null!=r.diff.style&&"complete"!==r.diff.style.type||null!=r.diff.color&&"complete"!==r.diff.color.type||null==i)return{changed:!1,useMaterialColor:null==this._markerColor};const a=r.diff.color,s=null!=a,o=s?a.newValue:null,n=null==o&&null==this._markerColor;o&&this._patchMaterialColor(this._getCombinedOpacityAndColor(o),i,e);const l=r.diff.style?.newValue;return l&&e.symbolLayerStatePatches.push((()=>i.setParameters({markerPrimitive:lineUtils_r(l)}))),delete t.marker,{changed:s,useMaterialColor:n}}_patchMaterialColor(e,t,r){null!=t&&r.symbolLayerStatePatches.push((()=>t.setParameters({color:e})))}}var V,Graphics3DLineSymbolLayer_I;Graphics3DLineSymbolLayer_O.elevationModeChangeTypes={definedChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE,staysOnTheGround:elevationAlignmentUtils/* SymbolUpdateType */.uw.NONE,onTheGroundChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE},function(e){e[e.DRAPED=0]="DRAPED",e[e.ELEVATED=1]="ELEVATED"}(V||(V={})),function(e){e[e.Line=0]="Line",e[e.Ring=1]="Ring",e[e.LineWireframe=2]="LineWireframe",e[e.RingWireframe=3]="RingWireframe",e[e.Marker=4]="Marker"}(Graphics3DLineSymbolLayer_I||(Graphics3DLineSymbolLayer_I={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectVectorToDehydratedPoint.js
var projectVectorToDehydratedPoint = __webpack_require__(80715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/FloatArray.js
var FloatArray = __webpack_require__(50961);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/MeshComponent.js
var MeshComponent = __webpack_require__(21104);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/MeshMaterialMetallicRoughness.js
var MeshMaterialMetallicRoughness = __webpack_require__(93413);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/MeshTextureTransform.js
var MeshTextureTransform = __webpack_require__(94578);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/meshUtils/georeference.js
var georeference = __webpack_require__(97519);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/meshUtils/projection.js
var meshUtils_projection = __webpack_require__(72188);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/sources/interfaces.js
var sources_interfaces = __webpack_require__(12155);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js
var resourceUtils = __webpack_require__(46629);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/TextureTransformUtils.js
var TextureTransformUtils = __webpack_require__(80954);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshObject3DGraphicLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DMeshObject3DGraphicLayer_g extends Graphics3DObject3DGraphicLayer_p{constructor(){super(...arguments),this._originalGeometries=[],this._fastTransformUpdatesEnabled=!1}get fastTransformUpdatesEnabled(){return this._fastTransformUpdatesEnabled}enableFastTransformUpdates(e,a){if(this._fastTransformUpdatesEnabled)return;this._fastTransformUpdatesEnabled=!0;const{stageObject:s}=this,r=s.geometries.slice();s.removeAllGeometries();const i=(0,mat4.B)(Graphics3DMeshObject3DGraphicLayer_h,s.transformation),o=a.getOrigin(i);for(const t of r){const a=e(t.material),r=t.instantiate({material:a});r.localOrigin=o,s.addGeometry(r)}this._originalGeometries=r}disableFastTransformUpdates(t){if(!this._fastTransformUpdatesEnabled)return;this._fastTransformUpdatesEnabled=!1;const{stageObject:e}=this,a=e.geometries.map((e=>t(e.material)));e.removeAllGeometries();for(let s=0;s<this._originalGeometries.length;s++){const t=this._originalGeometries[s],r=a[s];r.setParameters({modelTransformation:null}),r===t.material?e.addGeometry(t):e.addGeometry(t.instantiate({material:r}))}this._originalGeometries.length=0}updateFastLocalOrigin(e,a,s){if(!this._fastTransformUpdatesEnabled)return;const{stageObject:r}=this;if(0===r.geometries.length)return;const o=r.geometries[0].localOrigin,n=(0,mat4.B)(Graphics3DMeshObject3DGraphicLayer_h,e),m=s.getOrigin(n);if(m===o)return;const f=a?.localMatrix??mat4f64.I;r.shaderTransformation=null,r.transformation=e,r.geometries.forEach((t=>{t.transformation=f,t.localOrigin=m}))}updateTransform(t,s,r){const{stageObject:o}=this,n=s?.localMatrix??mat4f64.I;if(!this._fastTransformUpdatesEnabled)return o.shaderTransformation=null,o.transformation=t,o.geometries.forEach((t=>{t.transformation=n})),void(this._fastUpdateEdgeTransform()||this.resetEdgeObject(r));const m=o.transformation,f=o.geometries[0].transformation,l=t,d=n,c=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_p,m,f),g=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_T,l,d),h=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_E,g,(0,mat4.i)(Graphics3DMeshObject3DGraphicLayer_E,f));o.shaderTransformation=h,this._setFastMaterialTransformation({matA:c,matB:g}),this._fastUpdateEdgeTransform()||this.resetEdgeObject(r)}alignWithElevation(t,a,r,i){if(!this._fastTransformUpdatesEnabled)return void super.alignWithElevation(t,a,r,i);null!=r&&(0,featureExpressionInfoUtils/* setContextFeature */.gf)(this.elevationContext.featureExpressionInfoContext,r);const o=(e,s)=>(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(e,t,this.elevationContext,a,s),{stageObject:n}=this;if(!n.geometries[0].material.parameters.modelTransformation)return;const m=n.transformation,c=n.geometries[0].transformation,g=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_p,m,c),h=n.effectiveTransformation,E=(0,mat4.h)(Graphics3DMeshObject3DGraphicLayer_u,h);this.alignedSampledElevation=ElevationAligners_p(this,this.elevationContext,t.spatialReference,o,a,E),n.shaderTransformation=E;const b=n.geometries[0].transformation,_=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_T,E,b);this._setFastMaterialTransformation({matA:g,matB:_}),this._fastUpdateEdgeTransform()||this.resetEdgeObject(i)}_setFastMaterialTransformation({matA:t,matB:s}){const{stageObject:i}=this;if(0===i.geometries.length)return;const o=i.geometries[0].localOrigin,m=(0,mat4.d)(Graphics3DMeshObject3DGraphicLayer_j,(0,vec3.i)(Graphics3DMeshObject3DGraphicLayer_h,o.vec3,-1)),f=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_b,m,t),l=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_,m,s),d=(0,mat4.i)(Graphics3DMeshObject3DGraphicLayer_b,f),c=(0,mat4.m)(Graphics3DMeshObject3DGraphicLayer_,l,d);for(const e of i.geometries)e.material.setParameters({modelTransformation:c})}_fastUpdateEdgeTransform(){return this._stageLayer.stage.renderer.ensureEdgeView().fastUpdateObject3DEdgesTransform(this.stageObject)}}const Graphics3DMeshObject3DGraphicLayer_h=(0,vec3f64.c)(),Graphics3DMeshObject3DGraphicLayer_p=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_T=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_u=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_E=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_b=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_=(0,mat4f64.a)(),Graphics3DMeshObject3DGraphicLayer_j=(0,mat4f64.a)();

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/MeshFastUpdateProcessor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class MeshFastUpdateProcessor_r{constructor(){this._fastTransformOriginalMaterials=new Map,this._fastTransformClonedMaterials=new Map,this._graphicReferenceCount=0}enable(r,t,e){r.enableFastTransformUpdates((r=>{if(this._graphicReferenceCount<=1){if(this._fastTransformOriginalMaterials.has(r))return r;const a=t.byMaterial(r);return this._fastTransformOriginalMaterials.set(r,a),t.delete(r),r}const s=new DefaultMaterial/* DefaultMaterial */.$U(r.parameters);return e.stage.add(s),this._fastTransformClonedMaterials.set(s,r),s}),e.localOriginFactory)}disable(a,r,t){const e=new Set,s=new Set;a.disableFastTransformUpdates((a=>{if(!this._fastTransformClonedMaterials.has(a)){const t=a,i=this._fastTransformOriginalMaterials.get(t);return r.has(i.uid)?(e.add(t),r.byUid(i.uid).material):(s.add(t),i.material)}const i=a,n=this._fastTransformClonedMaterials.get(i);return this._fastTransformClonedMaterials.delete(i),t.stage.remove(i),n}));for(const i of e)this._fastTransformOriginalMaterials.delete(i),t.stage.remove(i);for(const i of s){const a=this._fastTransformOriginalMaterials.get(i);this._fastTransformOriginalMaterials.delete(i),r.set(a.uid,a)}}onAddGraphic(){this._graphicReferenceCount++}onRemoveGraphic(a,r,t){this._graphicReferenceCount--,this.disable(a,r,t)}forEachMaterialInfo(a){this._fastTransformOriginalMaterials.forEach(a)}forEachClonedMaterial(a){this._fastTransformClonedMaterials.forEach(a)}destroy(a){a.removeMany(Array.from(this._fastTransformClonedMaterials.keys())),a.removeMany(Array.from(this._fastTransformOriginalMaterials.values(),(({material:a})=>a))),this._fastTransformClonedMaterials.clear(),this._fastTransformOriginalMaterials.clear()}}class MeshFastUpdateProcessor_t{constructor(){this._byUid=new Map,this._byMaterial=new Map}get materials(){return Array.from(this._byUid.values(),(a=>a.material))}byUid(a){return this._byUid.get(a)}byMaterial(a){return this._byMaterial.get(a)}set(a,r){this._byUid.set(a,r),this._byMaterial.set(r.material,r)}delete(a){const r=this._byMaterial.get(a)?.uid;r&&(this._byUid.delete(r),this._byMaterial.delete(a))}has(a){return this._byUid.has(a)}forEachMaterialInfo(a){this._byUid.forEach(a)}clear(){this._byUid.clear(),this._byMaterial.clear()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js
var symbolColorUtils = __webpack_require__(55623);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/lineSegment.js
var lineSegment = __webpack_require__(22759);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js
var DefaultLayouts = __webpack_require__(27776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/NativeLine.glsl.js
var NativeLine_glsl = __webpack_require__(36987);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class NativeLineTechnique_S extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,NativeLineTechnique_S.shader.get().build(this.configuration),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){const t=this.configuration,r=(0,renderState/* separateBlendingParams */.p3)(enums/* BlendFactor */.dn.SRC_ALPHA,enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),i=(e,r=null,i=null)=>(0,renderState/* makePipelineState */.Ey)({blending:r,depthTest:StencilUtils/* depthCompareLess */.m,depthWrite:i,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:t.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:t.hasOccludees?e?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null});return t.output===ShaderOutput/* ShaderOutput */.V.Color?(this._occludeePipelineState=i(!0,t.transparent?r:null,renderState/* defaultDepthWriteParams */.kn),i(!1,t.transparent?r:null,renderState/* defaultDepthWriteParams */.kn)):i(!1)}get primitiveType(){return enums/* PrimitiveType */.WR.LINES}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}NativeLineTechnique_S.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(NativeLine_glsl.N,(()=>__webpack_require__.e(/* import() */ 6423).then(__webpack_require__.bind(__webpack_require__, 76423))));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/NativeLineTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class NativeLineTechniqueConfiguration_s extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.hasOccludees=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],NativeLineTechniqueConfiguration_s.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],NativeLineTechniqueConfiguration_s.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],NativeLineTechniqueConfiguration_s.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],NativeLineTechniqueConfiguration_s.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],NativeLineTechniqueConfiguration_s.prototype,"hasOccludees",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/NativeLineMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class NativeLineMaterial_I extends Material/* Material */.im{constructor(e){super(e,new NativeLineMaterial_U),this._configuration=new NativeLineTechniqueConfiguration_s}getConfiguration(e){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.transparent=this.parameters.color[3]<1||this.parameters.width<1,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration}intersect(t,r,f,h,d,b){if(!f.options.selectionMode||!t.visible)return;if(!(0,Util/* isTranslationMatrix */.zH)(r))return void Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.materials.NativeLineMaterial").error("intersection assumes a translation-only matrix");const L=t.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,R=f.camera,y=NativeLineMaterial_Z;(0,vec2.j)(y,f.point);const E=2;(0,vec3.s)(NativeLineMaterial_z[0],y[0]-E,y[1]+E,0),(0,vec3.s)(NativeLineMaterial_z[1],y[0]+E,y[1]+E,0),(0,vec3.s)(NativeLineMaterial_z[2],y[0]+E,y[1]-E,0),(0,vec3.s)(NativeLineMaterial_z[3],y[0]-E,y[1]-E,0);for(let e=0;e<4;e++)if(!R.unprojectFromRenderScreen(NativeLineMaterial_z[e],J[e]))return;(0,plane/* fromPoints */.Cr)(R.eye,J[0],J[1],NativeLineMaterial_K),(0,plane/* fromPoints */.Cr)(R.eye,J[1],J[2],NativeLineMaterial_Y),(0,plane/* fromPoints */.Cr)(R.eye,J[2],J[3],NativeLineMaterial_$),(0,plane/* fromPoints */.Cr)(R.eye,J[3],J[0],NativeLineMaterial_ee);let N=Number.MAX_VALUE,v=0;for(let e=0;e<L.length-5;e+=3){if(D[0]=L[e]+r[12],D[1]=L[e+1]+r[13],D[2]=L[e+2]+r[14],k[0]=L[e+3]+r[12],k[1]=L[e+4]+r[13],k[2]=L[e+5]+r[14],(0,plane/* signedDistance */.mN)(NativeLineMaterial_K,D)<0&&(0,plane/* signedDistance */.mN)(NativeLineMaterial_K,k)<0||(0,plane/* signedDistance */.mN)(NativeLineMaterial_Y,D)<0&&(0,plane/* signedDistance */.mN)(NativeLineMaterial_Y,k)<0||(0,plane/* signedDistance */.mN)(NativeLineMaterial_$,D)<0&&(0,plane/* signedDistance */.mN)(NativeLineMaterial_$,k)<0||(0,plane/* signedDistance */.mN)(NativeLineMaterial_ee,D)<0&&(0,plane/* signedDistance */.mN)(NativeLineMaterial_ee,k)<0)continue;if(R.projectToRenderScreen(D,NativeLineMaterial_W),R.projectToRenderScreen(k,NativeLineMaterial_X),NativeLineMaterial_W[2]<0&&NativeLineMaterial_X[2]>0){(0,vec3.f)(q,D,k);const e=R.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],D)/(0,vec3.j)(q,(0,plane/* normal */.qb)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec3.i)(q,q,t),(0,vec3.g)(D,D,q),R.projectToRenderScreen(D,NativeLineMaterial_W)}else if(NativeLineMaterial_W[2]>0&&NativeLineMaterial_X[2]<0){(0,vec3.f)(q,k,D);const e=R.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],k)/(0,vec3.j)(q,(0,plane/* normal */.qb)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec3.i)(q,q,t),(0,vec3.g)(k,k,q),R.projectToRenderScreen(k,NativeLineMaterial_X)}else if(NativeLineMaterial_W[2]<0&&NativeLineMaterial_X[2]<0)continue;NativeLineMaterial_W[2]=0,NativeLineMaterial_X[2]=0;const t=(0,lineSegment/* distance2 */.kb)((0,lineSegment/* fromPoints */.Cr)(NativeLineMaterial_W,NativeLineMaterial_X,H),y);t<N&&(N=t,(0,vec3.c)(NativeLineMaterial_G,D),(0,vec3.c)(NativeLineMaterial_F,k),v=e/3)}const x=f.rayBegin,C=f.rayEnd;if(N<E*E){let e=Number.MAX_VALUE;if((0,lineSegment/* closestLineSegmentPoint */.ld)((0,lineSegment/* fromPoints */.Cr)(NativeLineMaterial_G,NativeLineMaterial_F,H),(0,lineSegment/* fromPoints */.Cr)(x,C,NativeLineMaterial_Q),B)){(0,vec3.f)(B,B,x);const t=(0,vec3.l)(B);(0,vec3.i)(B,B,1/t),e=t/(0,vec3.o)(x,C)}b(e,B,v,!1)}}intersectDraped(e,r,s,o,i,a){if(!s.options.selectionMode)return;const n=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,c=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE),u=c?c.data[0]:0,l=o[0],m=o[1],f=((u+1)/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE,p=0;for(let d=0;d<n.length-5;d+=3){const e=n[d],r=n[d+1],s=l-e,o=m-r,i=n[d+3]-e,a=n[d+4]-r,c=(0,mathUtils/* clamp */.qE)((i*s+a*o)/(i*i+a*a),0,1),u=i*c-s,f=a*c-o,g=u*u+f*f;g<h&&(h=g,p=d/3)}h<f*f&&i(a.dist,a.normal,p,!1)}produces(e,t){return!(t!==ShaderOutput/* ShaderOutput */.V.Color&&t!==ShaderOutput/* ShaderOutput */.V.Highlight&&t!==ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor||e!==RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL&&e!==RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)}createGLMaterial(e){return new NativeLineMaterial_V(e)}createBufferWriter(){const e=this.parameters.hasVertexColors?DefaultLayouts/* PositionColorLayout */.dB:DefaultLayouts/* PositionLayout */.Ci;return new DefaultBufferWriter/* DefaultBufferWriter */.Z(e)}}class NativeLineMaterial_V extends GLMaterial/* default */.A{_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){return this._output===ShaderOutput/* ShaderOutput */.V.Color&&this._updateOccludeeState(e),this.ensureTechnique(NativeLineTechnique_S,e)}}class NativeLineMaterial_U extends Material/* MaterialParameters */.qA{constructor(){super(...arguments),this.color=vec4f64.O,this.hasVertexColors=!1,this.hasSlicePlane=!1,this.width=1,this.hasOccludees=!1}}const D=(0,vec3f64.c)(),k=(0,vec3f64.c)(),q=(0,vec3f64.c)(),B=(0,vec3f64.c)(),NativeLineMaterial_W=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),NativeLineMaterial_X=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),NativeLineMaterial_G=(0,vec3f64.c)(),NativeLineMaterial_F=(0,vec3f64.c)(),H=(0,lineSegment/* create */.vt)(),NativeLineMaterial_Q=(0,lineSegment/* create */.vt)(),NativeLineMaterial_Z=(0,vec3f64.c)(),NativeLineMaterial_z=[(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)()],J=[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()],NativeLineMaterial_K=(0,plane/* create */.vt)(),NativeLineMaterial_Y=(0,plane/* create */.vt)(),NativeLineMaterial_$=(0,plane/* create */.vt)(),NativeLineMaterial_ee=(0,plane/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js
var pbrUtils = __webpack_require__(12221);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DMeshFillSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DMeshFillSymbolLayer_be=["mesh"];class ve extends Graphics3DSymbolLayer_h{constructor(e,t,r,o){super(e,t,r,o),this._materialInfoCache=new MeshFastUpdateProcessor_t,this._fastUpdateProcessor=new MeshFastUpdateProcessor_r,this._textures=new Map,this.ensureDrapedStatus(!1)}async doLoad(){debugFlags/* debugFlags */.b.DRAW_MESH_GEOMETRY_NORMALS&&(this._debugVertexNormalMaterial=new NativeLineMaterial_I({color:[1,0,1,1]}),this._debugFaceNormalMaterial=new NativeLineMaterial_I({color:[0,1,1,1]}))}destroy(){super.destroy(),this._textures.forEach((e=>e.unload())),this._context.stage.removeMany(this._materialInfoCache.materials),this._context.stage.removeMany(Array.from(this._textures.values())),this._materialInfoCache.clear(),this._textures.clear(),this._fastUpdateProcessor.destroy(this._context.stage)}get materials(){return this._materialInfoCache.materials}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Graphics3DMeshFillSymbolLayer_be,"fill on mesh-3d"))return null;const r=this.setGraphicElevationContext(t),o=e.renderingInfo;return this._createAs3DShape(t,o,r,t.uid)}onRemoveGraphic(e){this._fastUpdateProcessor.onRemoveGraphic(e,this._materialInfoCache,this._context)}layerOpacityChanged(e,t){const r=this._getLayerOpacity();this._updateMaterialParameters((e=>{e.material.setParameters({layerOpacity:r});const t=e.material.parameters;this._setMaterialTransparentParameter(t,e),e.material.setParameters({transparent:t.transparent})})),e.forEach((e=>t(e)?.layerOpacityChanged(r,this._context.isAsync)))}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)}slicePlaneEnabledChanged(e,t){return this._updateMaterialParameters((({material:e})=>{e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),e.forEach((e=>t(e)?.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync))),!0}physicalBasedRenderingChanged(){const e=this._usePBR();return this._updateMaterialParameters((({material:t})=>t.setParameters({usePBR:e}))),!0}updateTransform(e,t,r,o){const a=this._context.renderCoordsHelper.spatialReference,s=Ee,{origin:n,transform:i}=r;switch((0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(t,(0,vec3.s)(Graphics3DMeshFillSymbolLayer_je,n.x,n.y,n.z??0),s,a),o){case sources_interfaces/* MeshTransformUpdateAction */.$.EnableFastUpdates:this._fastUpdateProcessor.enable(e,this._materialInfoCache,this._context);break;case sources_interfaces/* MeshTransformUpdateAction */.$.DisableFastUpdates:this._fastUpdateProcessor.disable(e,this._materialInfoCache,this._context);break;case sources_interfaces/* MeshTransformUpdateAction */.$.UpdateFastLocalOrigin:e.updateFastLocalOrigin(s,i,this._context.localOriginFactory)}const{elevationContext:l}=e;l.centerPointInElevationSR=this._getCenterPointInElevationSR(s);const{elevationProvider:c,renderCoordsHelper:u}=this._context,m=(e,t)=>(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(e,c,l,u,t);return e.alignedSampledElevation=ElevationAligners_p(e,l,c.spatialReference,m,u,s),e.updateTransform(s,i,this._context.isAsync),!0}_requiresSymbolVertexColors(){return this._drivenProperties.color||this._drivenProperties.opacity}_colorOrTextureUid(t){return null==t?"-":t instanceof Color/* default */.A?t.toHex():t.contentHash}_materialPropertiesDefault(e,t){const r=this._requiresSymbolVertexColors(),o=!!e.vertexAttributes.color,a=!!e.vertexAttributes.tangent;return{hasSymbolVertexColors:r,hasVertexColors:o,hasVertexTangents:a,uid:`vc:${o},vt:${a},vct${t},svc:${r}`}}_textureTransformUid(e){const{offset:t,scale:r,rotation:o}=e??Be;return`${t[0]},${t[1]},${o},${r[0]},${r[1]}`}_materialProperties(e,t,r){const o=this._materialPropertiesDefault(e,r);if(!t.material)return o;const{color:a,colorTexture:s,colorTextureTransform:n,normalTexture:i,normalTextureTransform:l,doubleSided:c,alphaCutoff:u,alphaMode:m}=t.material,h=this._colorOrTextureUid(a),f=this._colorOrTextureUid(s),p=this._textureTransformUid(n),d=this._colorOrTextureUid(i),g=this._textureTransformUid(l);if(o.color=a,o.colorTexture=s,o.normalTexture=i,o.uid=`${o.uid},cmuid:${h},ctmuid:${f},cttuid:${p},ntmuid:${d},nttuid:${g},ds:${c},ac:${u},am:${m}`,t.material instanceof MeshMaterialMetallicRoughness/* default */.A){const{metallic:e,roughness:r,metallicRoughnessTexture:a,metallicRoughnessTextureTransform:s,emissiveColor:i,emissiveTexture:c,emissiveTextureTransform:u,occlusionTexture:m,occlusionTextureTransform:h}=t.material,f=this._colorOrTextureUid(a),p=this._textureTransformUid(s),d=this._colorOrTextureUid(i),g=this._colorOrTextureUid(c),x=this._textureTransformUid(u),_=this._colorOrTextureUid(m),T=this._textureTransformUid(h);o.metallic=e,o.roughness=r,o.metallicRoughnessTexture=a,o.emissiveColor=i,o.emissiveTexture=c,o.occlusionTexture=m,o.colorTextureTransform=this._convertTextureTransform(n),o.normalTextureTransform=this._convertTextureTransform(l),o.emissiveTextureTransform=this._convertTextureTransform(u),o.occlusionTextureTransform=this._convertTextureTransform(h),o.metallicRoughnessTextureTransform=this._convertTextureTransform(s),o.uid=`${o.uid},mrm:${e},mrr:${r},mrt:${f},mrtt:${p},emuid:${d},etmuid:${g},ett:${x},otmuid:${_},ott:${T}`}return o}_convertTextureTransform(e){if(!e)return null;const{scale:r,offset:o,rotation:a}=e;return{scale:r,offset:o,rotation:(0,mathUtils/* deg2rad */.kU)(a)}}_setInternalColorValueParameters(t,r){r.diffuse=Color/* default */.A.toUnitRGB(t),r.opacity=t.a}_getLoadableTextureResource(e){return e.data??e.url}_getInternalTextureId(e){const t=this._getInternalTexture(e,basicInterfaces/* AlphaDiscardMode */.sf.Opaque);return t?.id}_getInternalTexture(e,t){const r=this._getLoadableTextureResource(e);if(!r)return null;const o=`${e.contentHash}/${t}`;let a=this._textures.get(o);if(!a){let s=null;const n=this._context.stage.renderView.renderingContext.parameters.maxMaxAnisotropy,i={wrap:this._castTextureWrap(e.wrap),noUnpackFlip:!0,maxAnisotropy:n,mipmap:n>1};(0,resourceUtils/* isEncodedMeshTexture */.x3)(r)?(s=r.data,i.preMultiplyAlpha=!1,i.encoding=r.encoding):(s=r,i.preMultiplyAlpha=t!==basicInterfaces/* AlphaDiscardMode */.sf.Opaque,i.downsampleUncompressed=this._context.graphicsCoreOwner.view.qualitySettings.graphics3D.uncompressedTextureDownsamplingEnabled),a=new Texture/* Texture */.g(s,i),this._textures.set(o,a),a.load(this._context.stage.renderView.renderingContext),this._context.stage.add(a)}return a}_castTextureWrap(e="repeat"){if("string"==typeof e){const t=this._castTextureWrapIndividual(e);return{s:t,t}}return{s:this._castTextureWrapIndividual(e.horizontal),t:this._castTextureWrapIndividual(e.vertical)}}_castTextureWrapIndividual(e){switch(e){case"clamp":return enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;case"mirror":return enums/* TextureWrapMode */.pF.MIRRORED_REPEAT;default:return enums/* TextureWrapMode */.pF.REPEAT}}_setInternalMaterialParameters(t,r){if(null!=t.color&&this._setInternalColorValueParameters(t.color,r),null!=t.colorTexture){const e=this._getInternalTexture(t.colorTexture,r.textureAlphaMode);e?(r.textureId=e.id,r.textureAlphaPremultiplied=!!e.parameters.preMultiplyAlpha):r.textureId=void 0}t.normalTexture&&(r.normalTextureId=this._getInternalTextureId(t.normalTexture)),t.emissiveColor&&(r.emissiveFactor=Color/* default */.A.toUnitRGB(t.emissiveColor)),t.emissiveTexture&&(r.emissiveTextureId=this._getInternalTextureId(t.emissiveTexture)),t.occlusionTexture&&(r.occlusionTextureId=this._getInternalTextureId(t.occlusionTexture)),t.metallicRoughnessTexture&&(r.metallicRoughnessTextureId=this._getInternalTextureId(t.metallicRoughnessTexture)),r.colorTextureTransformMatrix=(0,TextureTransformUtils/* getTransformMatrix */.G)(t.colorTextureTransform),r.normalTextureTransformMatrix=(0,TextureTransformUtils/* getTransformMatrix */.G)(t.normalTextureTransform),r.occlusionTextureTransformMatrix=(0,TextureTransformUtils/* getTransformMatrix */.G)(t.occlusionTextureTransform),r.emissiveTextureTransformMatrix=(0,TextureTransformUtils/* getTransformMatrix */.G)(t.emissiveTextureTransform),r.metallicRoughnessTextureTransformMatrix=(0,TextureTransformUtils/* getTransformMatrix */.G)(t.metallicRoughnessTextureTransform)}_setExternalMaterialParameters(t){const r=this._drivenProperties.color;let o=this.symbolLayer.material?.colorMixMode??null;if(r)t.externalColor=vec4f64.O;else{const r=this.symbolLayer.material?.color??null;r?t.externalColor=Color/* default */.A.toUnitRGBA(r):(o=null,t.externalColor=vec4f64.O)}o&&(t.colorMixMode=o),t.castShadows=!!this.symbolLayer.castShadows}_hasTransparentVertexColors(e){const t=e.vertexAttributes.color;if(null==t)return!1;for(let r=3;r<t.length;r+=4)if(255!==t[r])return!0;return!1}_getOrCreateMaterial(t,r){const o=r.material?.color,a=r.material?.colorTexture,s=r.material?.alphaMode,n="blend"===s,i=!("opaque"===s)&&(this._hasTransparentVertexColors(t)||null!=o&&o.a<1||a?.transparent||n),l=this._materialProperties(t,r,i),c=this._materialInfoCache.byUid(l.uid);if(c)return c.material;const u={uid:l.uid,material:null,isComponentTransparent:i,alphaMode:r.material?r.material.alphaMode:"opaque"},m=(0,pbrUtils/* useSchematicPBR */.Jr)({normalTexture:l.normalTexture,metallicRoughnessTexture:l.metallicRoughnessTexture,metallicFactor:l.metallic,roughnessFactor:l.roughness,emissiveTexture:l.emissiveTexture,emissiveFactor:Color/* default */.A.toUnitRGB(l.emissiveColor),occlusionTexture:l.occlusionTexture}),h={usePBR:this._usePBR(),isSchematic:m,hasVertexColors:l.hasVertexColors,hasSymbolColors:l.hasSymbolVertexColors,hasVertexTangents:l.hasVertexTangents,ambient:vec3f64.Z,diffuse:vec3f64.O,opacity:1,doubleSided:!0,doubleSidedType:"winding-order",cullFace:basicInterfaces/* CullFaceOptions */.s2.None,layerOpacity:this._getLayerOpacity(),hasSlicePlane:this._context.slicePlaneEnabled,initTextureTransparent:!0};h.mrrFactors=m?[...pbrUtils/* defaultSchematicMRRFactors */.mX]:[l.metallic,l.roughness,pbrUtils/* defaultAdvancedMRRFactors */.Rk[2]],r.material&&(h.doubleSided=r.material.doubleSided,h.cullFace=r.material.doubleSided?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back,h.textureAlphaCutoff=r.material.alphaCutoff),this._setExternalMaterialParameters(h),this._setMaterialTransparentParameter(h,u),this._setInternalMaterialParameters(l,h);const f=new DefaultMaterial/* DefaultMaterial */.$U(h);return u.material=f,this._materialInfoCache.set(l.uid,u),this._context.stage.add(f),f}_usePBR(){return this._context.physicalBasedRenderingEnabled}_setMaterialTransparentParameter(e,t){e.transparent=this.needsDrivenTransparentPass||t.isComponentTransparent||e.layerOpacity<1||e.opacity<1||e.externalColor&&e.externalColor[3]<1,"auto"===t.alphaMode?e.textureAlphaMode=e.transparent?basicInterfaces/* AlphaDiscardMode */.sf.MaskBlend:basicInterfaces/* AlphaDiscardMode */.sf.Opaque:e.textureAlphaMode="opaque"===t.alphaMode?basicInterfaces/* AlphaDiscardMode */.sf.Opaque:"mask"===t.alphaMode?basicInterfaces/* AlphaDiscardMode */.sf.Mask:basicInterfaces/* AlphaDiscardMode */.sf.Blend}_addDebugNormals(e,t){const r=t.length,o=e.spatialReference.isGeographic?20015077/180:1,a=.1*Math.max(e.extent.width*o,e.extent.height*o,e.extent.zmax-e.extent.zmin),s=[],n=[],i=[],l=[];for(let h=0;h<r;h++){const e=t[h],r=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),o=e.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL),c=r.data,u=r.indices,m=o.data,d=o.indices;for(let t=0;t<u.length;t++){const e=3*u[t],r=3*d[t];for(let t=0;t<3;t++)s.push(c[e+t]);for(let t=0;t<3;t++)s.push(c[e+t]+m[r+t]*a);if(n.push(n.length),n.push(n.length),t%3==0){this._calculateFaceNormal(c,u,t,Pe),this._getFaceVertices(c,u,t,Graphics3DMeshFillSymbolLayer_je,Me,Oe),(0,vec3.g)(Graphics3DMeshFillSymbolLayer_je,Graphics3DMeshFillSymbolLayer_je,Me),(0,vec3.g)(Graphics3DMeshFillSymbolLayer_je,Graphics3DMeshFillSymbolLayer_je,Oe),(0,vec3.i)(Graphics3DMeshFillSymbolLayer_je,Graphics3DMeshFillSymbolLayer_je,1/3);for(let e=0;e<3;e++)i.push(Graphics3DMeshFillSymbolLayer_je[e]);for(let e=0;e<3;e++)i.push(Graphics3DMeshFillSymbolLayer_je[e]+Pe[e]*a);l.push(l.length),l.push(l.length)}}}const c=t[0].transformation,u=new Geometry/* Geometry */.V(this._debugVertexNormalMaterial,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(s,n,3,!0)]],null,ContentObjectType/* ContentObjectType */.X.Line);t.push(u),u.transformation=c;const m=new Geometry/* Geometry */.V(this._debugFaceNormalMaterial,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(i,l,3,!0)]],null,ContentObjectType/* ContentObjectType */.X.Line);m.transformation=c,t.push(m)}_createAs3DShape(e,t,r,o){const a=e.geometry;if("mesh"!==a.type)return null;const s=this._createGeometryInfo(a,t,o);if(null==s)return null;const{geometries:n,objectTransformation:i}=s;debugFlags/* debugFlags */.b.DRAW_MESH_GEOMETRY_NORMALS&&this._addDebugNormals(a,n);const l=new Object3D/* Object3D */.B({geometries:n,layerUid:this._context.layer.uid,graphicUid:o});l.transformation=i;const c=(0,edgeUtils/* createMaterial */.Cc)(this.symbolLayer,{opacity:this._getLayerOpacity()}),u=c?new Graphics3DObject3DGraphicLayer_m(n[0].material,[c],{mergeGeometries:!0,hasSlicePlane:this._context.slicePlaneEnabled}):null,m=new Graphics3DMeshObject3DGraphicLayer_g(this,l,n,null,null,ElevationAligners_p,r,u);this._fastUpdateProcessor.onAddGraphic(),m.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)(r.mode),m.useObjectOriginAsAttachmentOrigin=!0,r.centerPointInElevationSR=this._getCenterPointInElevationSR(l.transformation);const{elevationProvider:h,renderCoordsHelper:f}=this._context,p=(e,t)=>(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(e,h,r,f,t);return m.alignedSampledElevation=ElevationAligners_p(m,r,h.spatialReference,p,f),m}_getCenterPointInElevationSR(e){const t=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,0,null!=this._context.elevationProvider.spatialReference?this._context.elevationProvider.spatialReference:null);return (0,projectVectorToDehydratedPoint/* projectVectorToDehydratedPoint */.O)([e[12],e[13],e[14]],this._context.renderCoordsHelper.spatialReference,t),t}_createComponentNormals(e,t,r,o){switch(r.shading||"flat"){default:case"source":return this._createComponentNormalsSource(e,t,r,o);case"flat":return this._createComponentNormalsFlat(e,o);case"smooth":return this._createComponentNormalsSmooth(e,o)}}_createComponentNormalsSource(e,t,r,o){if(null==t)return this._createComponentNormalsFlat(e,o);let a=!1;if(!r.trustSourceNormals)for(let s=0;s<o.length;s+=3){this._calculateFaceNormal(e,o,s,Pe);for(let e=0;e<3;e++){const r=3*o[s+e];Graphics3DMeshFillSymbolLayer_je[0]=t[r],Graphics3DMeshFillSymbolLayer_je[1]=t[r+1],Graphics3DMeshFillSymbolLayer_je[2]=t[r+2],(0,vec3.j)(Pe,Graphics3DMeshFillSymbolLayer_je)<0&&(t[r]=-t[r],t[r+1]=-t[r+1],t[r+2]=-t[r+2],a=!0)}}return new Ce(t,o,a)}_createComponentNormalsFlat(e,t){const r=(0,FloatArray/* newFloatArray */.oe)(t.length),o=new Array(3*t.length);for(let a=0;a<t.length;a+=3){const s=this._calculateFaceNormal(e,t,a,Pe);for(let e=0;e<3;e++)r[a+e]=s[e],o[a+e]=a/3}return new Ce(r,o,!1)}_createComponentNormalsSmooth(e,t){const r={};for(let s=0;s<t.length;s+=3){const o=this._calculateFaceNormal(e,t,s,Pe);for(let e=0;e<3;e++){const a=t[s+e];let n=r[a];n||(n={normal:(0,vec3f64.c)(),count:0},r[a]=n),(0,vec3.g)(n.normal,n.normal,o),n.count++}}const o=(0,FloatArray/* newFloatArray */.oe)(3*t.length),a=new Array(3*t.length);for(let s=0;s<t.length;s++){const e=r[t[s]];1!==e.count&&((0,vec3.n)(e.normal,e.normal),e.count=1);for(let t=0;t<3;t++)o[3*s+t]=e.normal[t];a[s]=s}return new Ce(o,a,!1)}_getFaceVertices(e,t,r,o,a,s){const n=3*t[r],i=3*t[r+1],l=3*t[r+2];o[0]=e[n],o[1]=e[n+1],o[2]=e[n+2],a[0]=e[i],a[1]=e[i+1],a[2]=e[i+2],s[0]=e[l],s[1]=e[l+1],s[2]=e[l+2]}_calculateFaceNormal(e,t,r,o){return this._getFaceVertices(e,t,r,Graphics3DMeshFillSymbolLayer_je,Me,Oe),(0,vec3.f)(Me,Me,Graphics3DMeshFillSymbolLayer_je),(0,vec3.f)(Oe,Oe,Graphics3DMeshFillSymbolLayer_je),(0,vec3.b)(Graphics3DMeshFillSymbolLayer_je,Me,Oe),(0,vec3.n)(o,Graphics3DMeshFillSymbolLayer_je),o}_getOrCreateComponents(e){return e.components??Ne}_createPositionBuffer(e,t){let r=e.vertexAttributes.position;const o=t.reprojection===Fe.ECEF?t.transformBeforeProject:null;if(o&&(r=(0,vec32.t)(new Float64Array(r.length),r,o)),t.reprojection===Fe.NONE)return t.needsBufferCopy?new Float64Array(r):r;const a=o?r:new Float64Array(r.length);return (0,projectBuffer.projectBuffer)(r,e.spatialReference,0,a,this._context.renderCoordsHelper.spatialReference,0,r.length/3),a}_createNormalBuffer(e,t,r){let o=e.vertexAttributes.normal;if(null==o)return null;const a=r.reprojection===Fe.ECEF?r.transformBeforeProject:null;a&&(o=(0,meshUtils_projection/* transformNormal */.qs)(o,new Float32Array(o.length),a));if("local"===this._context.graphicsCoreOwner.view.viewingMode||r.reprojection===Fe.NONE)return r.needsBufferCopy&&e.vertexAttributes.normal===o?new Float32Array(o):o;const s=e.vertexAttributes.position,n=a?o:new Float32Array(o.length);return (0,meshUtils_projection/* projectNormalToPCPF */.X4)(o,s,t,e.spatialReference,n)}_createTangentBuffer(e,t,r){let o=e.vertexAttributes.tangent;if(null==o)return null;const a=r.reprojection===Fe.ECEF?r.transformBeforeProject:null;a&&(o=(0,meshUtils_projection/* transformTangent */.KM)(o,new Float32Array(o.length),a));if("local"===this._context.graphicsCoreOwner.view.viewingMode||r.reprojection===Fe.NONE)return r.needsBufferCopy&&e.vertexAttributes.normal===o?new Float32Array(o):o;const s=e.vertexAttributes.position,n=a?o:new Float32Array(o.length);return (0,meshUtils_projection/* projectTangentToPCPF */.xA)(o,s,t,e.spatialReference,n)}_createColorBuffer(e){return e.vertexAttributes.color}_createSymbolColorBuffer(e){if(this._requiresSymbolVertexColors()){const t=this._getVertexOpacityAndColor(e),r=(0,symbolColorUtils/* parseColorMixMode */.Eb)(this.symbolLayer?.material?.colorMixMode),o=new Uint8Array(4);return (0,symbolColorUtils/* encodeSymbolColor */._j)(t,r,o),o}return null}_createBuffers(e,t){const r=e.vertexAttributes&&e.vertexAttributes.position;if(!r)return this.logger.warn("Mesh geometry must contain position vertex attributes"),null;const o=e.vertexAttributes.normal,a=e.vertexAttributes.uv,s=e.vertexAttributes.tangent;if(o&&o.length!==r.length)return this.logger.warn("Mesh normal vertex buffer must contain the same number of elements as the position buffer"),null;if(s&&s.length/4!=r.length/3)return this.logger.warn("Mesh tangent vertex buffer must contain the same number of elements as the position buffer"),null;if(a&&a.length/2!=r.length/3)return this.logger.warn("Mesh uv vertex buffer must contain the same number of elements as the position buffer"),null;const n=this._computeReprojectionInfo(e),i=this._createPositionBuffer(e,n),l=this._createColorBuffer(e),u=this._createSymbolColorBuffer(t),m=this._createNormalBuffer(e,i,n),h=this._createTangentBuffer(e,i,n);return{positionBuffer:i,normalBuffer:m,tangentBuffer:h,uvBuffer:a,colorBuffer:l,symbolColorBuffer:u,objectTransformation:n.reprojection===Fe.NONE&&n.objectTransformation?n.objectTransformation:this._transformOriginLocal(e,i,m,h),geometryTransformation:n.reprojection===Fe.NONE&&n.geometryTransformation?n.geometryTransformation:(0,mat4f64.a)()}}_computeReprojectionInfo(e){const{vertexSpace:t}=e,r=t.isRelative,o=t.isGeoreferenced?this._context.renderCoordsHelper.viewingMode===ViewingMode/* ViewingMode */.RT.Local?Fe.NONE:Fe.ECEF:Fe.NONE;if(r){const{origin:r}=t,a=(0,mat4f64.a)(),i=e.transform?.localMatrix??mat4f64.I;if(o===Fe.NONE){(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(e.spatialReference,r,a,this._context.renderCoordsHelper.spatialReference);return{reprojection:o,objectTransformation:a,geometryTransformation:(0,mat4f64.b)(i),needsBufferCopy:!1}}const l=(0,mat4.d)((0,mat4f64.a)(),r);return (0,mat4.m)(l,l,i),{reprojection:o,transformBeforeProject:l,needsBufferCopy:!0}}return{reprojection:o,needsBufferCopy:!0}}_transformOriginLocal(e,t,a,s){const n=this._context.renderCoordsHelper.spatialReference,l=e.anchor;we[0]=l.x,we[1]=l.y,we[2]=l.z??0;const u=(0,mat4f64.a)();return (0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(e.spatialReference,we,u,n),(0,mat4.i)(Re,u),(0,vec32.t)(t,t,Re),(a||s)&&((0,mat3.f)(Ae,u),(0,mat3.t)(Ae,Ae),a&&(0,vec32.a)(a,a,Ae),s&&(0,vec32.a)(s,s,Ae,4)),u}_validateFaces(e,t){const r=e.vertexAttributes.position.length/3,o=t.faces;if(o){let e=-1;for(let t=0;t<o.length;t++){const r=o[t];r>e&&(e=r)}if(r<=e)return this.logger.warn(`Vertex index ${e} is out of bounds of the mesh position buffer`),!1}else if(r%3!=0)return this.logger.warn("Mesh position buffer length must be a multiple of 9 if no component faces are defined (3 values per vertex * 3 vertices per triangle)"),!1;return!0}_getOrCreateFaces(e,t){return t.faces??(0,Indices/* getContinuousIndexArray */.tM)(e.vertexAttributes.position.length/3)}_isOutsideClippingArea(e){if(!this._context.clippingExtent)return!1;const t=e.vertexAttributes?.position;if(!t)return!1;const r=this._context.elevationProvider.spatialReference,o=(0,georeference.project)({positions:t,transform:e.transform,vertexSpace:e.vertexSpace,inSpatialReference:e.spatialReference,outSpatialReference:r??e.spatialReference,localMode:this._context.stage.viewingMode===ViewingMode/* ViewingMode */.RT.Local}),a=o.length/3;return (0,aaBoundingBox/* empty */.Ie)(Ie),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Ie,o,0,a),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Ie,this._context.clippingExtent)}_createGeometryInfo(e,t,r){if(!(0,projection.canProjectWithoutEngine)(e.spatialReference,this._context.graphicsCoreOwner.view.spatialReference))return this.logger.warn("Geometry spatial reference is not compatible with the view"),null;if(this._isOutsideClippingArea(e))return null;const o=this._createBuffers(e,t);if(null==o)return null;const{positionBuffer:a,uvBuffer:s,colorBuffer:n,symbolColorBuffer:i,normalBuffer:c,tangentBuffer:u,objectTransformation:m,geometryTransformation:h}=o,f=this._getOrCreateComponents(e),p=new Array;let d=!1;const g=(0,mat4.B)(Graphics3DMeshFillSymbolLayer_je,m),x=this._context.localOriginFactory.getOrigin(g);for(const l of f){if(!this._validateFaces(e,l))return null;const t=this._getOrCreateFaces(e,l);if(0===t.length)continue;const o=this._createComponentNormals(a,c,l,t);o.didFlipNormals&&(d=!0);const m=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(a,t,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(o.normals,o.indices,3,!0)]];n&&m.push([VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(n,t,4,!0)]),i&&m.push([VertexAttribute/* VertexAttribute */.r.SYMBOLCOLOR,new Attribute/* Attribute */.n(i,(0,Indices/* getZeroIndexArray */.EH)(t.length),4,!0)]),s&&m.push([VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(s,t,2,!0)]),u&&m.push([VertexAttribute/* VertexAttribute */.r.TANGENT,new Attribute/* Attribute */.n(u,t,4,!0)]);const f=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:r,layerUid:this._context.layer.uid}),g=this._getOrCreateMaterial(e,l),_=new Geometry/* Geometry */.V(g,m,null,ContentObjectType/* ContentObjectType */.X.Mesh,f);_.transformation=h,_.localOrigin=x,p.push(_)}return d&&this.logger.warn("Normals have been automatically flipped to be consistent with the counter clock wise face winding order. It is better to generate mesh geometries that have consistent normals."),{geometries:p,objectTransformation:m}}_updateMaterialParameters(e){this._materialInfoCache.forEachMaterialInfo(e),this._fastUpdateProcessor.forEachMaterialInfo(e),this._fastUpdateProcessor.forEachClonedMaterial(((e,t)=>{t.setParameters(e.parameters)}))}test(){return{...super.test(),materials:this._materialInfoCache.materials}}}class Ce{constructor(e,t,r){this.normals=e,this.indices=t,this.didFlipNormals=r}}const we=(0,vec3f64.c)(),Graphics3DMeshFillSymbolLayer_je=(0,vec3f64.c)(),Me=(0,vec3f64.c)(),Oe=(0,vec3f64.c)(),Pe=(0,vec3f64.c)(),Re=(0,mat4f64.a)(),Ae=(0,mat3f64.a)(),Ee=(0,mat4f64.a)(),Ie=(0,aaBoundingBox/* create */.vt)(),Ne=[new MeshComponent/* default */.A],Be=new MeshTextureTransform/* default */.A;var Fe;!function(e){e[e.NONE=0]="NONE",e[e.ECEF=1]="ECEF"}(Fe||(Fe={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/typedArrayUtil.js
var typedArrayUtil = __webpack_require__(86942);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/symbolLayerUtils3D.js
var symbolLayerUtils3D = __webpack_require__(97728);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js
var Object3DStateID = __webpack_require__(22775);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLodInstanceGraphicLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DLodInstanceGraphicLayer_p{constructor(e,t,i,n){this.graphics3DSymbolLayer=e,this.instanceIndex=t,this.elevationAligner=i,this.elevationContext=n,this.type="lod-instance",this._highlights=new Set,this.alignedSampledElevation=0,this.isElevationSource=!1,this.needsElevationUpdates=!1}initialize(){}setVisibility(e){const t=this._lodRenderer.instanceData;e!==t.getVisible(this.instanceIndex)&&t.setVisible(this.instanceIndex,e)}destroy(){null!=this.instanceIndex&&(this._lodRenderer.instanceData.removeInstance(this.instanceIndex),this.graphics3DSymbolLayer.notifyDestroyGraphicLayer(this))}alignWithElevation(e,t,i){if(this.elevationAligner){(0,featureExpressionInfoUtils/* setContextFeature */.gf)(this.elevationContext.featureExpressionInfoContext,i);const n=(i,n)=>(0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(i,e,this.elevationContext,t,n),s=this.elevationAligner(this,this.elevationContext,e.spatialReference,n,t);null!=s&&(this.alignedSampledElevation=s)}}getCenterObjectSpace(e=(0,vec3f64.c)()){return this._lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,Graphics3DLodInstanceGraphicLayer_I),(0,vec3.e)(e,this._lodRenderer.baseBoundingSphere.center,Graphics3DLodInstanceGraphicLayer_I)}getBoundingBoxObjectSpace(e=(0,aaBoundingBox/* create */.vt)()){this._lodRenderer.instanceData.getCombinedLocalTransform(this.instanceIndex,Graphics3DLodInstanceGraphicLayer_I);const n=this._lodRenderer.baseBoundingBox;(0,aaBoundingBox/* empty */.Ie)(e);for(let s=0;s<8;++s)(0,vec3.s)(Graphics3DLodInstanceGraphicLayer_v,0==(1&s)?n[0]:n[3],0==(2&s)?n[1]:n[4],0==(4&s)?n[2]:n[5]),(0,vec3.e)(Graphics3DLodInstanceGraphicLayer_v,Graphics3DLodInstanceGraphicLayer_v,Graphics3DLodInstanceGraphicLayer_I),(0,aaBoundingBox/* expandWithVec3 */.iT)(e,Graphics3DLodInstanceGraphicLayer_v);return e}computeAttachmentOrigin(e){this._lodRenderer.instanceData.getGlobalTransform(this.instanceIndex,Graphics3DLodInstanceGraphicLayer_I),e.render.origin[0]+=Graphics3DLodInstanceGraphicLayer_I[12],e.render.origin[1]+=Graphics3DLodInstanceGraphicLayer_I[13],e.render.origin[2]+=Graphics3DLodInstanceGraphicLayer_I[14],e.render.num++}async getProjectedBoundingBox(e,i,n,a,r){const c=this.getBoundingBoxObjectSpace(r),d=Graphics3DLodInstanceGraphicLayer_b,m=(0,aaBoundingBox/* isPoint */.fT)(c)?1:d.length;this._lodRenderer.instanceData.getGlobalTransform(this.instanceIndex,Graphics3DLodInstanceGraphicLayer_I);for(let s=0;s<m;s++){const e=d[s];Graphics3DLodInstanceGraphicLayer_v[0]=c[e[0]],Graphics3DLodInstanceGraphicLayer_v[1]=c[e[1]],Graphics3DLodInstanceGraphicLayer_v[2]=c[e[2]],(0,vec3.e)(Graphics3DLodInstanceGraphicLayer_v,Graphics3DLodInstanceGraphicLayer_v,Graphics3DLodInstanceGraphicLayer_I),Graphics3DLodInstanceGraphicLayer_f[3*s]=Graphics3DLodInstanceGraphicLayer_v[0],Graphics3DLodInstanceGraphicLayer_f[3*s+1]=Graphics3DLodInstanceGraphicLayer_v[1],Graphics3DLodInstanceGraphicLayer_f[3*s+2]=Graphics3DLodInstanceGraphicLayer_v[2]}if(!e(Graphics3DLodInstanceGraphicLayer_f,0,m))return null;(0,aaBoundingBox/* empty */.Ie)(c);let u=null;this.calculateRelativeScreenBounds&&(u=this.calculateRelativeScreenBounds());for(let t=0;t<3*m;t+=3){for(let e=0;e<3;e++)c[e]=Math.min(c[e],Graphics3DLodInstanceGraphicLayer_f[t+e]),c[e+3]=Math.max(c[e+3],Graphics3DLodInstanceGraphicLayer_f[t+e]);u&&n.push({location:Graphics3DLodInstanceGraphicLayer_f.slice(t,t+3),screenSpaceBoundingRect:u})}if(i&&((0,aaBoundingBox/* center */.gX)(c,Graphics3DLodInstanceGraphicLayer_x),"absolute-height"!==this.elevationContext.mode)){let e;const t=(0,graphicUtils/* demResolutionForBoundingBox */.vY)(c,i.service.spatialReference,i);try{e=await i.service.queryElevation(Graphics3DLodInstanceGraphicLayer_x[0],Graphics3DLodInstanceGraphicLayer_x[1],a,t,"ground")}catch(p){}null!=e&&(0,aaBoundingBox/* offset */.cY)(c,0,0,-this.alignedSampledElevation+e)}return c}addObjectState(e,t){if(e===basicInterfaces/* Object3DState */.Mg.Highlight){const i=new Object3DStateID/* Object3DStateID */.X(e);this._addHighlightId(i),t.addExternal((e=>{this._removeHighlightId(e)}),i)}}removeObjectState(e){this._highlights.forEach((t=>e.remove(t)))}_addHighlightId(e){this._highlights.add(e),this._lodRenderer.instanceData.setHighlight(this.instanceIndex,!0)}_removeHighlightId(e){this._highlights.delete(e),this._lodRenderer.instanceData.setHighlight(this.instanceIndex,this._highlights.size>0)}get _lodRenderer(){return this.graphics3DSymbolLayer.lodRenderer}}const Graphics3DLodInstanceGraphicLayer_f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Graphics3DLodInstanceGraphicLayer_v=(0,vec3f64.c)(),Graphics3DLodInstanceGraphicLayer_x=(0,vec3f64.c)(),Graphics3DLodInstanceGraphicLayer_b=[[0,1,2],[3,1,2],[0,4,2],[3,4,2],[0,1,5],[3,1,5],[0,4,5],[3,4,5]],Graphics3DLodInstanceGraphicLayer_I=(0,mat4f64.a)();

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/lodResourceUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function lodResourceUtils_n(e,n){const r=e.stageResources.geometries.map((t=>new LodResources_s(t,e.stageResources.textures))),u=null==e.lodThreshold||0===e.lodThreshold&&n>0?lodResourceUtils_s(r):e.lodThreshold;return new LodResources_r(r,u,e.pivotOffset)}function lodResourceUtils_r(o){return new LodResources_n(o.map(((e,o)=>lodResourceUtils_n(e,o))))}function lodResourceUtils_s(e){const o=e.reduce(((e,{geometry:o})=>e+o.indexCount/3),0);return Math.sqrt(o*lodResourceUtils_u/Math.PI)}const lodResourceUtils_u=20;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js + 2 modules
var objectResourceUtils = __webpack_require__(2470);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/styleUtils.js
var styleUtils = __webpack_require__(28051);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js
var webStyleSymbolUtils = __webpack_require__(19989);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/webStyleUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function webStyleUtils_r(r){if(null===r||null==r.styleName&&null==r.styleUrl)return null;const o=r.name;if(null==o)throw new core_Error/* default */.A("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference");const u={portal:r.portal},i=await (0,styleUtils/* fetchStyle */.cF)(r,u).catch((()=>null));if(null===i)return null;const m=(0,webStyleSymbolUtils/* getStyleItemFromStyle */.p)(o,i.data);if(m&&!m.formatInfos?.some((l=>"gltf_basisu"===l.type)))return null;const a=await (0,webStyleSymbolUtils/* fetchSymbolFromStyle */.I)(i,o,u,"webRef",((l,t)=>(0,styleUtils/* symbolUrlFromStyleItem */.o5)(l,t,["gltf_basisu","gltf"]))).catch((()=>null));if(null===a||"point-3d"!==a.type)return null;const y=a.symbolLayers.items[0];return"object"===y.type?y.resource:null}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js
var glUtil = __webpack_require__(15788);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js
var RenderPlugin = __webpack_require__(38931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js + 1 modules
var Camera = __webpack_require__(36549);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js
var IntersectorInterfaces = __webpack_require__(44912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js
var Octree = __webpack_require__(91337);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/mathUtils.js
var support_mathUtils = __webpack_require__(72699);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BackedBufferObject_r{constructor(r,i,s){this._elementSize=i,this._buffer=BufferObject/* BufferObject */.g.createVertex(r,enums/* Usage */._U.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.byteLength}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class RenderInstanceData_c{constructor(t){this.modelOriginHi=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELORIGINHI,BufferView/* BufferViewVec3f */.xs),this.modelOriginLo=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELORIGINLO,BufferView/* BufferViewVec3f */.xs),this.model=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODEL,BufferView/* BufferViewMat3f */.jZ),this.modelNormal=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELNORMAL,BufferView/* BufferViewMat3f */.jZ),this.featureAttribute=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEFEATUREATTRIBUTE,BufferView/* BufferViewVec4f */.Eq),this.color=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCECOLOR,BufferView/* BufferViewVec4u8 */.XP),this.objectAndLayerIdColor=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEOBJECTANDLAYERIDCOLOR,BufferView/* BufferViewVec4u8 */.XP)}}class RenderInstanceData_f{constructor(t,i){this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._rctx=t,this._instanceBufferLayout=i,this._elementSize=i.stride,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){(0,Util/* assert */.vA)(!this._updating,"already updating"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){(0,Util/* assert */.vA)(this._updating,"not updating"),this.size<arrayUtils/* ReallocShrinkTreshold */.ZH*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){(0,Util/* assert */.vA)(this._updating,"not updating"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),(0,Util/* assert */.vA)(this._headIndex!==this._tailIndex,"invalid pointers"),t}freeTail(){(0,Util/* assert */.vA)(this._updating,"not updating"),(0,Util/* assert */.vA)(this.size>0,"invalid size");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(RenderInstanceData_u,Math.floor(this._capacity*arrayUtils/* ReallocGrowthFactor */.Hl));this._resize(t)}_shrink(){const t=Math.max(RenderInstanceData_u,Math.floor(this._capacity*arrayUtils/* ReallocShrinkFactor */.BT));this._resize(t)}_resize(t){if((0,Util/* assert */.vA)(this._updating,"not updating"),t===this._capacity)return;const i=new BackedBufferObject_r(this._rctx,this._elementSize,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);(0,Util/* assert */.vA)(e===t,"invalid compaction"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new RenderInstanceData_c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const RenderInstanceData_u=64;

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var M;function InstanceData_C(t){let e=(0,InterleavedLayout/* newLayout */.BP)().mat4f64(VertexAttribute/* VertexAttribute */.r.LOCALTRANSFORM).mat4f64(VertexAttribute/* VertexAttribute */.r.GLOBALTRANSFORM).vec4f64(VertexAttribute/* VertexAttribute */.r.BOUNDINGSPHERE).vec3f64(VertexAttribute/* VertexAttribute */.r.MODELORIGIN).mat3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODEL).mat3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELNORMAL).vec2f(VertexAttribute/* VertexAttribute */.r.MODELSCALEFACTORS);return t.includes(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)&&(e=e.vec4f(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)),t.includes(VertexAttribute/* VertexAttribute */.r.COLOR)&&(e=e.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR)),t.includes(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR)&&(e=e.vec4u8(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR)),e=e.u8(VertexAttribute/* VertexAttribute */.r.STATE).u8(VertexAttribute/* VertexAttribute */.r.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]="ALLOCATED",t[t.DEFAULT_ACTIVE=2]="DEFAULT_ACTIVE",t[t.VISIBLE=4]="VISIBLE",t[t.HIGHLIGHT=8]="HIGHLIGHT",t[t.HIGHLIGHT_ACTIVE=16]="HIGHLIGHT_ACTIVE",t[t.REMOVE=32]="REMOVE",t[t.TRANSFORM_CHANGED=64]="TRANSFORM_CHANGED",t[t.ACTIVE=18]="ACTIVE"}(M||(M={}));class InstanceData_R{constructor(t){this.localTransform=t.getField(VertexAttribute/* VertexAttribute */.r.LOCALTRANSFORM,BufferView/* BufferViewMat4f64 */.E$),this.globalTransform=t.getField(VertexAttribute/* VertexAttribute */.r.GLOBALTRANSFORM,BufferView/* BufferViewMat4f64 */.E$),this.modelOrigin=t.getField(VertexAttribute/* VertexAttribute */.r.MODELORIGIN,BufferView/* BufferViewVec3f64 */.Xm),this.model=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODEL,BufferView/* BufferViewMat3f */.jZ),this.modelNormal=t.getField(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELNORMAL,BufferView/* BufferViewMat3f */.jZ),this.modelScaleFactors=t.getField(VertexAttribute/* VertexAttribute */.r.MODELSCALEFACTORS,BufferView/* BufferViewVec2f */.gH),this.boundingSphere=t.getField(VertexAttribute/* VertexAttribute */.r.BOUNDINGSPHERE,BufferView/* BufferViewVec4f64 */.Aj),this.featureAttribute=t.getField(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE,BufferView/* BufferViewVec4f */.Eq),this.color=t.getField(VertexAttribute/* VertexAttribute */.r.COLOR,BufferView/* BufferViewVec4u8 */.XP),this.objectAndLayerIdColor=t.getField(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR,BufferView/* BufferViewVec4u8 */.XP),this.state=t.getField(VertexAttribute/* VertexAttribute */.r.STATE,BufferView/* BufferViewUint8 */.SL),this.lodLevel=t.getField(VertexAttribute/* VertexAttribute */.r.LODLEVEL,BufferView/* BufferViewUint8 */.SL)}}let InstanceData_y=class extends Accessor/* default */.A{constructor(t,e){super(t),this.events=new Evented/* default */.A,this._capacity=0,this._size=0,this._next=0,this._layout=InstanceData_C(e),this._capacity=RenderInstanceData_u,this._buffer=this._layout.createBuffer(this._capacity),this._view=new InstanceData_R(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,M.ALLOCATED),this._size++,this.events.emit("instances-changed"),t}removeInstance(t){const e=this._view.state;(0,Util/* assert */.vA)(t>=0&&t<this._capacity&&0!=(e.get(t)&M.ALLOCATED),"invalid instance handle"),this._getStateFlag(t,M.ACTIVE)?this._setStateFlags(t,M.REMOVE):this.freeInstance(t),this.events.emit("instances-changed")}freeInstance(t){const e=this._view.state;(0,Util/* assert */.vA)(t>=0&&t<this._capacity&&0!=(e.get(t)&M.ALLOCATED),"invalid instance handle"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=InstanceData_w,i=InstanceData_D;e.localTransform.getMat(t,N),e.globalTransform.getMat(t,InstanceData_V);const a=(0,mat4.m)(InstanceData_V,InstanceData_V,N);(0,vec3.s)(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),(0,mat3.f)(i,a),e.model.setMat(t,i);const r=(0,support_mathUtils/* scaleFromMatrix */.wp)(InstanceData_w,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),(0,mat3.d)(i,i),(0,mat3.t)(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,M.TRANSFORM_CHANGED),this.events.emit("instance-transform-changed",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,InstanceData_D),s.modelOrigin.getVec(t,InstanceData_w),e[0]=InstanceData_D[0],e[1]=InstanceData_D[1],e[2]=InstanceData_D[2],e[3]=0,e[4]=InstanceData_D[3],e[5]=InstanceData_D[4],e[6]=InstanceData_D[5],e[7]=0,e[8]=InstanceData_D[6],e[9]=InstanceData_D[7],e[10]=InstanceData_D[8],e[11]=0,e[12]=InstanceData_w[0],e[13]=InstanceData_w[1],e[14]=InstanceData_w[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(InstanceData_w,this,t),e*=Math.max(InstanceData_w[0],InstanceData_w[1],InstanceData_w[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(InstanceData_w,this,t),e*=InstanceData_b(InstanceData_w[0],InstanceData_w[1],InstanceData_w[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,M.VISIBLE,e),this.events.emit("instance-visibility-changed",{index:t}))}getVisible(t){return this._getStateFlag(t,M.VISIBLE)}setHighlight(t,e){e!==this.getHighlight(t)&&(this._setStateFlag(t,M.HIGHLIGHT,e),this.events.emit("instance-highlight-changed"))}getHighlight(t){return this._getStateFlag(t,M.HIGHLIGHT)}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(RenderInstanceData_u,Math.floor(this._capacity*arrayUtils/* ReallocGrowthFactor */.Hl)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new InstanceData_R(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&M.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function InstanceData_b(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],InstanceData_y.prototype,"shaderTransformation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],InstanceData_y.prototype,"_size",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],InstanceData_y.prototype,"size",null),InstanceData_y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.lodRendering.InstanceData")],InstanceData_y);const InstanceData_w=(0,vec3f64.c)(),InstanceData_D=(0,mat3f64.a)(),N=(0,mat4f64.a)(),InstanceData_V=(0,mat4f64.a)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class InstanceOctree_n extends Octree/* default */.A{constructor(e,r){super((t=>(0,sphere.w)(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=(0,sphere.c)(),this._tmpMat4=(0,mat4f64.a)()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);(0,vec3.e)(this._tmpSphere,this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*(0,support_mathUtils/* maxScale */.hG)(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LevelSelector_e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js
var GLMaterials = __webpack_require__(72136);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js
var Intersector = __webpack_require__(74515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(11459);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js
var IntersectorTarget = __webpack_require__(9286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js
var intersectorUtils = __webpack_require__(99730);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/Intersector.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Intersector_s extends IntersectorTarget/* Graphic3DTarget */.R6{constructor(t,r,e,s,i,o){super(t,r),this.layerUid=t,this.graphicUid=r,this.geometryId=e,this.triangleNr=s,this.baseBoundingSphere=i,this.numLodLevels=o}}function Intersector_i(r){return e(r)&&r.intersector===t.LOD&&!!r.target}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LodComponentData_u{constructor(s,o){const i=s.renderContext.rctx,n=o.geometry;this._materialRepository=s.materialRepository,n.material.setParameters({instancedDoublePrecision:!0});const u=n.material.createBufferWriter(),f=u.vertexBufferLayout,d=u.elementCount(n),p=f.createBuffer(d);u.write(null,null,n,p,0),this.geometry=n,this.material=n.material,this.glMaterials=new GLMaterials/* GLMaterials */.c(n.material,this._materialRepository),this.vertexBufferLayout=f,this.vbo=BufferObject/* BufferObject */.g.createVertex(i,enums/* Usage */._U.STATIC_DRAW,p.buffer),this.vao=new VertexArrayObject/* VertexArrayObject */.Z(i,DefaultVertexAttributeLocations/* Default3D */.D,{geometry:(0,glUtil/* glLayout */.U)(f)},{geometry:this.vbo}),this.vertexCount=d}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}intersect(r,t,e,a,m,l,u,f){const d=this.geometry.id;this.material.intersect(this.geometry,r.transform.transform,r,e,a,((e,a,p,c,y)=>{if(e>=0){if(null!=t&&!t(r.rayBegin,r.rayEnd,e))return;const c=new Intersector_s(l.layerUid,l.graphicUid(m),d,p,u,f);if((null==r.results.min.drapedLayerOrder||y>=r.results.min.drapedLayerOrder)&&(null==r.results.min.dist||e<r.results.min.dist)&&r.results.min.set(IntersectorInterfaces/* IntersectorType */.dz.LOD,c,e,a,r.transform.transform,y),r.options.store!==IntersectorInterfaces/* StoreResults */.oH.MIN&&(null==r.results.max.drapedLayerOrder||y>=r.results.max.drapedLayerOrder)&&(null==r.results.max.dist||e>r.results.max.dist)&&r.results.max.set(IntersectorInterfaces/* IntersectorType */.dz.LOD,c,e,a,r.transform.transform,y),r.options.store===IntersectorInterfaces/* StoreResults */.oH.ALL){const t=(0,Intersector/* newIntersectorResult */.G7)(r.results.min.ray);t.set(IntersectorInterfaces/* IntersectorType */.dz.LOD,c,e,a,r.transform.transform,y),r.results.all.push(t)}}}))}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LodLevel_a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((n=>e.controller.schedule((()=>new LodComponentData_u(e,n)),i)))),c=s.map((n=>"fulfilled"===n.status?n.value:null)).filter(arrayUtils/* isSome */.Ru);if((0,promiseUtils/* isAborted */.G4)(i)||c.length!==s.length){c.forEach((n=>n.destroy())),(0,promiseUtils/* throwIfAborted */.Te)(i);for(const n of s)if("rejected"===n.status)throw n.reason}return new LodLevel_a(r.minScreenSpaceRadius,c)}constructor(n,o){this.minScreenSpaceRadius=n,this.components=o}destroy(){this.components.forEach((n=>n.destroy()))}intersect(n,o,t,e,r,i,s){this.components.forEach((c=>c.intersect(n,o,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const n=(0,aaBoundingBox/* empty */.Ie)();this.components.forEach((o=>{null!=o.boundingInfo&&((0,aaBoundingBox/* expandWithVec3 */.iT)(n,o.boundingInfo.bbMin),(0,aaBoundingBox/* expandWithVec3 */.iT)(n,o.boundingInfo.bbMax))})),this._boundingBox=n}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const n=this.boundingBox,o=(0,vec3f64.c)();(0,aaBoundingBox/* center */.gX)(n,o),this._boundingSphere={center:o,radius:.5*(0,aaBoundingBox/* diameter */._F)(n)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((n,o)=>n+o.triangleCount),0)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js
var renderers_utils = __webpack_require__(29688);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js
var DefaultMaterialTechnique = __webpack_require__(73418);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Util.js
var webgl_Util = __webpack_require__(19282);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const LodRenderer_V=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new LevelSelector_e(t,r)};let LodRenderer_B=class extends RenderPlugin/* ASyncPreparesRenderPlugin */.S{constructor(e,t){super(e),this.type=IntersectorInterfaces/* IntersectorType */.dz.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=[new Array],this._highlightRenderInstanceData=[new Array],this._allRenderInstanceData=[this._defaultRenderInstanceData[0],this._highlightRenderInstanceData[0]],this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new Camera/* Camera */.i,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,e=>this._produces(e)],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new InstanceData_y({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(Scheduler/* TaskPriority */.W6.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=LodRenderer_q(this.optionalFields),this._glInstanceBufferLayout=(0,glUtil/* glLayout */.U)(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on("instances-changed",(()=>this._requestUpdateCycle())),this._instanceData.events.on("instance-transform-changed",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on("instance-visibility-changed",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on("instance-highlight-changed",(()=>this._requestUpdateCycle(!0)))])}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerUid(){return this.metadata.layerUid}get instanceData(){return this._instanceData}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),0)}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const a=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,s=e.triangleCount;t.push({renderedInstances:a,renderedTriangles:a*s,trianglesPerInstance:s})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}async initializeRenderContext(e,r){this._context=e;const n=e.renderContext.rctx,i=await Promise.allSettled(this.symbol.levels.map((t=>(this._defaultRenderInstanceData[0].push(new RenderInstanceData_f(n,this._instanceBufferLayout)),this._highlightRenderInstanceData[0].push(new RenderInstanceData_f(n,this._instanceBufferLayout)),LodLevel_a.create(e,t,r))))),o=i.map((e=>"fulfilled"===e.status?e.value:null)).filter(arrayUtils/* isSome */.Ru);if((0,promiseUtils/* isAborted */.G4)(r)||o.length!==i.length){o.forEach((e=>e.destroy())),(0,promiseUtils/* throwIfAborted */.Te)(r);for(const e of i)if("rejected"===e.status)throw e.reason}this._levels=o,this._levelSelector=LodRenderer_V(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData[0].forEach((e=>e.destroy())),this._highlightRenderInstanceData[0].forEach((e=>e.destroy()))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>e.material.produces(RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,ShaderOutput/* ShaderOutput */.V.Color)))))}hasHighlights(){return this._highlightRenderInstanceData[0].some((e=>e.size>0))}_produces(e){return e!==ShaderOutput/* ShaderOutput */.V.Highlight&&e!==ShaderOutput/* ShaderOutput */.V.ShadowHighlight||this.hasHighlights()}prepareRender(e){if(!debugFlags/* debugFlags */.b.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bindParameters.contentCamera.equals(this._camera);this._camera.copyFrom(e.bindParameters.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(Scheduler/* noBudget */.Bb),this._needFullCycle=!1)}}prepareTechniques(e){if(!this.baseMaterial.isVisible()||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e.output);if(!t)return null;const r=new Array;return t.forEach((t=>this.levels.forEach(((a,s)=>{a.components.forEach((a=>r.push(this._beginComponent(e,t[s],a))))})))),r}renderNode(e,t){const r=this._getInstanceDatas(e.output);if(!r||null==t)return;let a=0;e.rctx.bindVAO(),r.forEach((r=>this.levels.forEach(((s,n)=>{s.components.forEach((s=>this._renderComponent(e,t[a++],r[n],s,n)))}))))}_getInstanceDatas(e){const t=e!==ShaderOutput/* ShaderOutput */.V.Highlight&&e!==ShaderOutput/* ShaderOutput */.V.ShadowHighlight,r=e!==ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight;return t&&r?this._allRenderInstanceData:t?this._defaultRenderInstanceData:r?this._highlightRenderInstanceData:null}intersect(e,t,r,a){if(!this.baseMaterial.isVisible()||null==this._octree)return;const s=(0,vec3f64.c)();(0,vec3.f)(s,a,r);const n=s=>{this._instanceData.getCombinedModelTransform(s,LodRenderer_W),e.transform.set(LodRenderer_W),(0,vec3.e)(LodRenderer_K,r,e.transform.inverse),(0,vec3.e)(LodRenderer_Y,a,e.transform.inverse);const n=this._instanceData.getState(s),i=this._instanceData.getLodLevel(s),o=this._levels.length;(0,Util/* assert */.vA)(0!=(n&M.ACTIVE),"invalid instance state"),(0,Util/* assert */.vA)(i>=0&&i<o,"invaid lod level"),this._levels[i].intersect(e,t,LodRenderer_K,LodRenderer_Y,s,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(n):this._octree.forEachAlongRay(r,s,n)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new InstanceOctree_n(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&M.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=(0,maybe/* destroyMaybe */.pR)(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return{near:1/0,far:-1/0};const t=e.viewForward,r=this._octree.findClosest(t,Octree/* default */.A.DepthOrder.FRONT_TO_BACK,e.frustum),a=this._octree.findClosest(t,Octree/* default */.A.DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==a)return{near:1/0,far:-1/0};const s=e.eye,n=this._instanceData.view;n.boundingSphere.getVec(r,LodRenderer_k),(0,vec3.f)(LodRenderer_k,LodRenderer_k,s);const i=(0,vec3.j)(LodRenderer_k,t)-LodRenderer_k[3];n.boundingSphere.getVec(a,LodRenderer_k),(0,vec3.f)(LodRenderer_k,LodRenderer_k,s);const o=(0,vec3.j)(LodRenderer_k,t)+LodRenderer_k[3];return{near:Math.max(e.near,i),far:Math.min(e.far,o)}}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:r,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const s=this._instanceData,n=s.view;let i=s.size;const o=s.capacity;let l=this._instanceIndex;const c=Math.ceil(o/500);for(let h=0;h<i&&!e.done;++h){l===this._cycleStartIndex&&this._startUpdateCycle();const h=n.state.get(l);let d=0;if(!(h&M.ALLOCATED)){l=l+1===o?0:l+1,i++;continue}const u=n.lodLevel.get(l);if(h&M.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[0][u].freeTail(),h&M.HIGHLIGHT_ACTIVE&&this._highlightRenderInstanceData[0][u].freeTail(),h&M.REMOVE)s.freeInstance(l);else if(h&M.VISIBLE){let e=0;t&&(n.modelOrigin.getVec(l,LodRenderer_z),e=a.selectLevel(LodRenderer_z,s.getCombinedMedianScaleFactor(l),r)),d=h&~(M.ACTIVE|M.TRANSFORM_CHANGED),e>=0&&(h&M.HIGHLIGHT?(LodRenderer_P(this._highlightRenderInstanceData[0][e],n,l),d|=M.HIGHLIGHT_ACTIVE):(LodRenderer_P(this._defaultRenderInstanceData[0][e],n,l),d|=M.DEFAULT_ACTIVE)),n.state.set(l,d),n.lodLevel.set(l,e)}else d=h&~(M.ACTIVE|M.TRANSFORM_CHANGED),n.state.set(l,d);if(null!=this._octreeCached){const e=!!(h&M.ACTIVE),t=!!(d&M.ACTIVE);!e&&t?this._octreeCached.addInstance(l):e&&!t?this._octreeCached.removeInstance(l):e&&t&&h&M.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(l),this._octreeCached.addInstance(l))}l=l+1===o?0:l+1,l%c==0&&e.madeProgress()}this._instanceIndex=l,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const a=r.glMaterials.load(e.rctx,e.bindParameters.slot,e.output);return null!=a?a.beginSlot(e.bindParameters):null}_renderComponent(e,t,r,a,s){if(!t)return;const{bindParameters:n,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,a.material.parameters,n);i.bindVAO(a.vao),t.ensureAttributeLocations(a.vao),o.bindDraw(LodRenderer_Q,n,a.material.parameters),debugFlags/* debugFlags */.b.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===ShaderOutput/* ShaderOutput */.V.Color&&(o.setUniform4fv("externalColor",LodRenderer_J[Math.min(s,LodRenderer_J.length-1)]),o.setUniform1i("colorMixMode",MaterialUtil/* colorMixModes */.Um.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,m=(e,s)=>{(0,webgl_Util/* bindVertexBufferLayout */.yu)(i,DefaultVertexAttributeLocations/* Default3D */.D,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,a.vertexCount,s-e),(0,webgl_Util/* unbindVertexBufferLayout */.Hi)(i,DefaultVertexAttributeLocations/* Default3D */.D,r.buffer,u)};a.material.parameters.transparent&&null!=d?c>h?((0,Util/* assert */.vA)(d>=h&&d<=c,"invalid firstIndex"),m(d,c),m(h,d)):c<h&&(d<=c?((0,Util/* assert */.vA)(d>=0&&d<=c,"invalid firstIndex"),m(d,c),m(h,l),m(0,d)):((0,Util/* assert */.vA)(d>=h&&d<=l,"invalid firstIndex"),m(d,l),m(0,c),m(h,d))):c>h?m(h,c):c<h&&(m(0,c),m(h,l)),i.bindVAO(null)}};function LodRenderer_P(e,t,r){const a=e.allocateHead();LodRenderer_G(t,r,e.view,a)}function LodRenderer_G(e,t,r,a){(0,renderers_utils/* encodeDoubleVec3 */.Vk)(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,a),r.model.copyFrom(a,e.model,t),r.modelNormal.copyFrom(a,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(a,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(a,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(a,e.featureAttribute,t)}function LodRenderer_q(e){let t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELORIGINHI).vec3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELORIGINLO).mat3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODEL).mat3f(VertexAttribute/* VertexAttribute */.r.INSTANCEMODELNORMAL);return null!=e&&e.includes("featureAttribute")&&(t=t.vec4f(VertexAttribute/* VertexAttribute */.r.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes("color")&&(t=t.vec4u8(VertexAttribute/* VertexAttribute */.r.INSTANCECOLOR)),null!=e&&e.includes("objectAndLayerIdColor")&&(t=t.vec4u8(VertexAttribute/* VertexAttribute */.r.INSTANCEOBJECTANDLAYERIDCOLOR)),t}(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],LodRenderer_B.prototype,"symbol",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],LodRenderer_B.prototype,"optionalFields",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],LodRenderer_B.prototype,"metadata",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],LodRenderer_B.prototype,"shaderTransformation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],LodRenderer_B.prototype,"_instanceData",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],LodRenderer_B.prototype,"_cycleStartIndex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],LodRenderer_B.prototype,"_enableLevelSelection",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],LodRenderer_B.prototype,"_updateCyclesWithStaticCamera",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],LodRenderer_B.prototype,"running",null),LodRenderer_B=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer")],LodRenderer_B);const LodRenderer_z=(0,vec3f64.c)(),LodRenderer_k=(0,vec4f64.c)(),LodRenderer_W=(0,mat4f64.a)(),LodRenderer_K=(0,vec3f64.c)(),LodRenderer_Y=(0,vec3f64.c)(),LodRenderer_J=[(0,vec4f64.f)(1,0,1,1),(0,vec4f64.f)(0,0,1,1),(0,vec4f64.f)(0,1,0,1),(0,vec4f64.f)(1,1,0,1),(0,vec4f64.f)(1,0,0,1)],LodRenderer_Q=new DefaultMaterialTechnique/* DefaultMaterialDrawParameters */.V;

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DObjectSymbolLayer_me{constructor(e,t,s,r,i,a,o,n,l,c,h,d){this.lodResources=e,this.lodRenderer=t,this.stageResources=s,this.originalMaterialParameters=r,this.resourceSize=i,this.isEsriSymbolResource=a,this.isWosr=o,this.resourceBoundingBox=n,this.symbolSize=l,this.extentPadding=c,this.physicalBasedRenderingEnabled=h,this.pivotOffset=d}}class Graphics3DObjectSymbolLayer_pe extends Graphics3DSymbolLayer_h{getCachedSize(){const[e,t,s]=null!=this._resources?this._resources.symbolSize:[1,1,1];return{width:e,depth:t,height:s}}constructor(e,t,s,r){super(e,t,s,r),this._resources=null,this._optionalFields=new Array,this._instanceIndexToGraphicUid=new Map,this._hasLoadedPBRTextures=!1,this._disposeResourceHandles=new Array,this.skipHighSymbolLodsChanged=!1,this.ensureDrapedStatus(!1),this._hasLoadedPBRTextures=s.physicalBasedRenderingEnabled}async doLoad(e){if(!this._drivenProperties.size){if((0,graphicUtils/* validateSymbolLayerSize */.Hj)(this.symbolLayer))throw new Error}if(this._isPrimitive){const t=this.symbolLayer.resource,s=t&&primitiveObjectSymbolUtils_d(t.primitive)?t.primitive:ObjectSymbol3DLayerResource/* defaultPrimitive */.r;this._resources=await this._createResourcesForPrimitive(s,e)}else{const t=await webStyleUtils_r(this.symbol.styleOrigin),s=t?.href??this.symbolLayer.resource.href;this._resources=await this._createResourcesForUrl(s,e)}this.layerOpacityChanged(),this.slicePlaneEnabledChanged(),this.physicalBasedRenderingChanged(),this.complexity=this.computeComplexity()}get extentPadding(){return null!=this._resources?this._resources.extentPadding:0}get _isPrimitive(){return!this.symbolLayer.resource?.href}get lodRenderer(){return this._resources?.lodRenderer}get materials(){return this._resources?.stageResources.materials??[]}_setMaterialTransparencyParameters(e,t=this.symbolLayer?.material?.color){const s=this._getCombinedOpacity(t),r=s<1||this.needsDrivenTransparentPass;return e.transparent=r,e.opacity=s,e.cullFace=r?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back,e}async _createResourcesForPrimitive(t,r){const i=this.symbolLayer,a=(0,aaBoundingBox/* create */.vt)((0,symbolLayerUtils3D/* objectSymbolLayerPrimitiveBoundingBox */.Fq)(t)),o=(0,vec3f64.e)((0,aaBoundingBox/* size */.Ej)(a)),n=(0,vec3f64.e)((0,symbolLayerUtils3D/* objectSymbolLayerSizeWithResourceSize */.Bb)(o,i)),l=(0,vec3.l)(n),h=!1,d=!1,m={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,mrrFactors:[...pbrUtils/* defaultSchematicMRRFactors */.mX],ambient:vec3f64.O,diffuse:vec3f64.O,hasSlicePlane:this._context.slicePlaneEnabled,hasSliceHighlight:!1,castShadows:this.symbolLayer.castShadows,offsetTransparentBackfaces:!this.symbolLayer.isPrimitive},p=!!m.usePBR;this._setMaterialTransparencyParameters(m);const u=this.symbol;if("point-3d"===u.type&&u.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:r}=u.verticalOffset;m.verticalOffset={screenLength:(0,screenUtils/* pt2px */.Lz)(e),minWorldLength:t||0,maxWorldLength:null!=r?r:1/0},m.castShadows=!1}if(this._context.screenSizePerspectiveEnabled&&(m.screenSizePerspective=this._context.sharedResources.screenSizePerspectiveSettings),this._drivenProperties.color)m.externalColor=vec4f64.O;else{const t=null!=i.material?i.material.color:null,s=null!=t?Color/* default */.A.toUnitRGBA(t):vec4f64.O;m.externalColor=s}this._fastUpdates=(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,this._fastVisualVariableConvertOptions(a,n,o,null)),m.isInstanced=!0,this._fastUpdates?(Object.assign(m,this._fastUpdates.materialParameters),this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)):this._hasPerInstanceColor()&&(m.hasInstancedColor=!0,this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.COLOR)),(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR);const _=new DefaultMaterial/* DefaultMaterial */.$U(m),g=primitiveObjectSymbolUtils_S(t,_);if(!g)throw new Error(`Unknown object symbol primitive: ${t}`);const b=LodResources_c(g).map((e=>({opacity:1,transparent:e.parameters.transparent}))),R=await this._createStageResources(g,p,r),x=await this._createLodRenderer(g,r);return new Graphics3DObjectSymbolLayer_me(g,x,R,b,o,h,d,a,n,l,p,null)}async _createResourcesForUrl(e,t){const r={materialParameters:{isInstanced:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows},streamDataRequester:this._context.streamDataRequester,cache:this._context.sharedResources.objectResourceCache};this._fastUpdates=(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,this._fastVisualVariableConvertOptions(null,null,null,null)),this._fastUpdates?(Object.assign(r.materialParameters,this._fastUpdates.materialParameters),this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)):this._hasPerInstanceColor()&&(r.materialParameters.hasInstancedColor=!0,this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.COLOR)),(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&this._optionalFields.push(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR);const i=this.symbol;if("point-3d"===i.type&&i.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:a}=i.verticalOffset;r.materialParameters.verticalOffset={screenLength:(0,screenUtils/* pt2px */.Lz)(e),minWorldLength:t||0,maxWorldLength:null!=a?a:1/0},r.materialParameters.castShadows=!1}const a=this._context.physicalBasedRenderingEnabled;r.signal=t,r.usePBR=a,r.skipHighLods=this._context.skipHighSymbolLods;const o=await (0,objectResourceUtils.fetch)(e,r),n=o.isEsriSymbolResource,l=o.isWosr,h=lodResourceUtils_r(o.lods),d=this._context,m=this.symbolLayer.material,p=this._getExternalColorParameters(m),u=this.symbolLayer?.material?.color,f=this._getCombinedOpacity(u,{hasIntrinsicColor:!0}),_=this.needsDrivenTransparentPass,g=LodResources_c(h),b=LodResources_c(h).map((e=>({opacity:e.parameters.opacity||1,transparent:e.parameters.transparent})));g.forEach((e=>{const t=e.parameters;e.setParameters(p);const s=t.opacity*f,r=s<1||_||t.transparent;e.setParameters({opacity:s,transparent:r}),d.screenSizePerspectiveEnabled&&e.setParameters({screenSizePerspective:d.sharedResources.screenSizePerspectiveSettings})}));const P=o.referenceBoundingBox,R=(0,vec3f64.e)((0,aaBoundingBox/* size */.Ej)(P)),x=(0,vec3f64.e)(h.levels[0].pivotOffset),v=(0,vec3f64.e)((0,symbolLayerUtils3D/* objectSymbolLayerSizeWithResourceSize */.Bb)(R,this.symbolLayer)),L=(0,vec3.l)(v),S=this._fastUpdates;(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(S,this._context.renderer,this._fastVisualVariableConvertOptions(P,v,R,x))&&g.forEach((e=>e.setParameters(S.materialParameters)));const j=await this._createStageResources(h,a,t),E=await this._createLodRenderer(h,t);return new Graphics3DObjectSymbolLayer_me(h,E,j,b,R,n,l,P,v,L,a,x)}_addDisposeResource(e){this._disposeResourceHandles.push(e)}async _createStageResources(e,s,r){const i=this._context.stage,a=LodResources_c(e);s!==this._context.physicalBasedRenderingEnabled&&this.physicalBasedRenderingChanged(),i.addMany(a),this._addDisposeResource((()=>i.removeMany(a)));const o=LodResources_o(e);i.addMany(o),this._addDisposeResource((()=>{o.forEach((e=>e.unload())),i.removeMany(o)})),await Promise.all(o.map((e=>this._context.stage.schedule((()=>e.load(i.renderView.renderingContext)),r)))),(0,promiseUtils/* throwIfAborted */.Te)(r);const n=LodResources_i(e);return i.addMany(n),this._addDisposeResource((()=>i.removeMany(n))),{materials:a,textures:o,geometries:n}}async _createLodRenderer(e,t){const s=this._context.stage,r={layerUid:this._context.layer.uid,graphicUid:e=>this._instanceIndexToGraphicUid.get(e),notifyGraphicGeometryChanged:e=>this._context.notifyGraphicGeometryChanged(this._instanceIndexToGraphicUid.get(e)),notifyGraphicVisibilityChanged:e=>this._context.notifyGraphicVisibilityChanged(this._instanceIndexToGraphicUid.get(e))},i=this._fastUpdates,a=i?{applyTransform:(e,t,s)=>{e.getFeatureAttribute(t,Graphics3DObjectSymbolLayer_e),(0,mat4.h)(s,(0,FastSymbolUpdates/* evaluateModelTransform */.b3)(i.materialParameters,Graphics3DObjectSymbolLayer_e,s))},scaleFactor:(e,t,s)=>{t.getFeatureAttribute(s,Graphics3DObjectSymbolLayer_e),(0,FastSymbolUpdates/* evaluateModelTransformScale */.VC)(e,i.materialParameters,Graphics3DObjectSymbolLayer_e)}}:null,o=new LodRenderer_B({symbol:e,optionalFields:this._optionalFields,metadata:r,shaderTransformation:a},this._context.scheduler);return o.slicePlaneEnabled=this._context.slicePlaneEnabled,this._addDisposeResource((()=>{s.removeRenderPlugin(o),o.destroy()})),await s.addRenderPlugin(o,t),o}_getExternalColorParameters(t){const s={};return this._drivenProperties.color?s.externalColor=vec4f64.O:null!=t?.color?s.externalColor=Color/* default */.A.toUnitRGBA(t.color):(s.externalColor=vec4f64.O,s.colorMixMode="ignore"),s}destroy(){super.destroy(),this._cleanupResources()}_cleanupResources(){this._disposeResourceHandles.forEach((e=>e())),this._disposeResourceHandles.length=0,this._resources=null}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry))return null;const s=pointUtils_u(t.geometry);if(null==s)return this.logger.warn(`unsupported geometry type for icon symbol: ${t.geometry.type}`),null;const r=this.setGraphicElevationContext(t),i=e.renderingInfo;return this._createAs3DShape(t,s,i,r,t.uid,e.layer.uid)}notifyDestroyGraphicLayer(e){this._instanceIndexToGraphicUid.delete(e.instanceIndex)}graphicLayerToGraphicId(){return 0}layerOpacityChanged(){if(null==this._resources)return;const e=this._drivenProperties.opacity,t=!this._isPrimitive,s=this._resources.stageResources.materials,r=this._resources.originalMaterialParameters;for(let i=0;i<s.length;i++){const a=s[i],o=this.symbolLayer?.material?.color,n=r[i],l=this._getCombinedOpacity(o,{hasIntrinsicColor:t})*n.opacity,c=l<1||e||n.transparent;a.setParameters({opacity:l,transparent:c}),this._isPrimitive&&a.setParameters({cullFace:c?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back})}}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)}slicePlaneEnabledChanged(){if(null==this._resources)return!0;this._resources.lodRenderer.slicePlaneEnabled=this._context.slicePlaneEnabled;for(const e of this._resources.stageResources.materials)e.setParameters({hasSlicePlane:this._context.slicePlaneEnabled});return!0}physicalBasedRenderingChanged(){if(null==this._resources)return!0;const{stageResources:e,isWosr:t}=this._resources;for(const s of e.materials)this._isPrimitive?s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}):t||s.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!1});return!1!==this._hasLoadedPBRTextures||!0!==this._context.physicalBasedRenderingEnabled||(this._hasLoadedPBRTextures=!0,!1)}applyRendererDiff(e,t){if(null==this._resources)return interfaces_e.RecreateSymbol;const{stageResources:{materials:s},lodRenderer:r,resourceBoundingBox:i,symbolSize:a,resourceSize:o,pivotOffset:n}=this._resources;for(const l in e.diff){if("visualVariables"!==l)return interfaces_e.RecreateSymbol;if(!(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(this._fastUpdates,t,this._fastVisualVariableConvertOptions(i,a,o,n)))return interfaces_e.RecreateSymbol;for(const e of s)e.setParameters(this._fastUpdates.materialParameters);r.notifyShaderTransformationChanged()}return interfaces_e.FastUpdate}computeComplexity(){if(null==this._resources)return super.computeComplexity();const e=this._resources.lodResources,t=w(e.levels),s=e=>Array.from(e.attributes.values()).reduce(((e,t)=>e+(0,typedArrayUtil/* estimateSize */.Ek)(t.data,t.indices)),0),i=LodResources_i(e).reduce(((e,t)=>e+s(t)),0),a=LodResources_o(e).reduce(((e,t)=>e+t.memoryEstimate),0)+i,o={...C(this.symbol,this.symbolLayer),resourceBytes:a};return new SymbolComplexity_e({verticesPerFeature:t,memory:o})}_hasLodRenderer(){return null!=this._resources}_createAs3DShape(e,t,s,r,i,a){if(!this._hasLodRenderer()||null==this._resources)return null;const o=this.getFastUpdateAttrValues(e),n=this._context.clippingExtent;if((0,projectPointToVector/* projectPointToVector */.g)(t,Graphics3DObjectSymbolLayer_ue,this._context.elevationProvider.spatialReference),null!=n&&!(0,aaBoundingBox/* containsPoint */.Uc)(n,Graphics3DObjectSymbolLayer_ue))return null;const l=this._requiresTerrainElevation(r),c=this._computeGlobalTransform(t,r,Graphics3DObjectSymbolLayer_fe,Graphics3DObjectSymbolLayer_ge),h=this._computeLocalTransform(this._resources,this.symbolLayer,s,Graphics3DObjectSymbolLayer_ye),d=this._resources.lodRenderer.instanceData,m=d.addInstance();this._instanceIndexToGraphicUid.set(m,i),d.setLocalTransform(m,h,!1),d.setGlobalTransform(m,c),o&&d.setFeatureAttribute(m,o),null==this._fastUpdates&&this._hasPerInstanceColor()&&d.setColor(m,(0,graphicUtils/* mixinColorAndOpacity */.$C)(s.color,s.opacity,255)),null!=this._context.stage.renderView.objectAndLayerIdRenderHelper&&d.setObjectAndLayerIdColor(m,this._context.stage.renderView.objectAndLayerIdRenderHelper.getObjectAndLayerIdColor({graphicUid:i,layerUid:a}));const p=new Graphics3DLodInstanceGraphicLayer_p(this,m,I,r);return l&&(p.alignedSampledElevation=Graphics3DObjectSymbolLayer_ge.sampledElevation),p.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)(r.mode),pointUtils_p(p,t,this._context.elevationProvider),p}_computeGlobalTransform(e,t,s,r){return (0,elevationAlignmentUtils/* evaluateElevationInfoAtPoint */.sE)(e,this._context.elevationProvider,t,this._context.renderCoordsHelper,r),Graphics3DObjectSymbolLayer_ue[0]=e.x,Graphics3DObjectSymbolLayer_ue[1]=e.y,Graphics3DObjectSymbolLayer_ue[2]=r.z,(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(e.spatialReference,Graphics3DObjectSymbolLayer_ue,s,this._context.renderCoordsHelper.spatialReference),s}_computeLocalTransform(e,t,s,r){return (0,mat4.g)(r),this._applyObjectRotation(s,!1,r),this._applyObjectRotation(t,!0,r),this._applyObjectScale(e,s,r),this._applyAnchor(e,t,r),r}_applyObjectScale(e,t,s){if(this._fastUpdates?.requiresShaderTransformation)return;const r=this._drivenProperties.size&&t.size?t.size:e.symbolSize,i=(0,graphicUtils/* computeObjectScale */.pW)(r,e.symbolSize,e.resourceSize,this._context.renderCoordsHelper.unitInMeters);1===i[0]&&1===i[1]&&1===i[2]||(0,mat4.b)(s,s,i)}prepareSymbolLayerPatch(e){if("partial"!==e.diff.type)return;const t=e.diff.diff;this._preparePatchTransform(e,t),this._preparePatchColor(e,t)}updateGeometry(e,t){if(null==this._resources)return!0;const s=t&&pointUtils_u(t);if(null==s)return!1;const r=this.getGeometryElevationMode(t);return e.elevationContext.mode===r&&(this._computeGlobalTransform(s,e.elevationContext,Graphics3DObjectSymbolLayer_fe,Graphics3DObjectSymbolLayer_ge),this._requiresTerrainElevation(e.elevationContext)&&(e.alignedSampledElevation=Graphics3DObjectSymbolLayer_ge.sampledElevation),this._resources.lodRenderer.instanceData.setGlobalTransform(e.instanceIndex,Graphics3DObjectSymbolLayer_fe,!0),pointUtils_p(e,s,this._context.elevationProvider),!0)}_preparePatchTransform(e,t){if(!(t.heading||t.tilt||t.roll||t.width||t.height||t.depth||t.anchor||t.anchorPosition))return;if(null==this._resources)return;const s=(e,t,s)=>(null!=e&&"complete"===e.type?e.newValue:t)??s,r=s(t.heading,this.symbolLayer.heading,0),i=s(t.tilt,this.symbolLayer.tilt,0),a=s(t.roll,this.symbolLayer.roll,0),o=s(t.width,this.symbolLayer.width,void 0),n=s(t.height,this.symbolLayer.height,void 0),l=s(t.depth,this.symbolLayer.depth,void 0),c=s(t.anchor,this.symbolLayer.anchor,void 0),h=s(t.anchorPosition,this.symbolLayer.anchorPosition,void 0);delete t.heading,delete t.tilt,delete t.roll,delete t.width,delete t.height,delete t.depth,delete t.anchor,delete t.anchorPosition;const d={heading:r,tilt:i,roll:a,anchor:c,anchorPosition:h},m=this._resources;this.loadStatus===Loadable_l.LOADED&&e.symbolLayerStatePatches.push((()=>{m.symbolSize=(0,vec3f64.e)((0,symbolLayerUtils3D/* objectSymbolLayerSizeWithResourceSize */.Bb)(m.resourceSize,{width:o,height:n,depth:l,isPrimitive:this.symbolLayer.isPrimitive}))})),e.graphics3DGraphicPatches.push(((e,t)=>{const s=this._computeLocalTransform(m,d,t,Graphics3DObjectSymbolLayer_ye),r=e.instanceIndex;m.lodRenderer.instanceData.setLocalTransform(r,s,!0)}))}_preparePatchColor(t,s){if(!s.material||"partial"!==s.material.type)return;const r=s.material.diff;if(!r.color||"complete"!==r.color.type||null==r.color.newValue||null==r.color.oldValue)return;const i=r.color.newValue,a=null!=i?Color/* default */.A.toUnitRGBA(i):vec4f64.O;delete r.color;const o=this._resources;null!=o&&t.graphics3DGraphicPatches.push((e=>{let t;this._hasPerInstanceColor()?(o.lodRenderer.instanceData.setColor(e.instanceIndex,a),t=this._setMaterialTransparencyParameters({},i)):t=this._setMaterialTransparencyParameters({externalColor:a},i);for(const s of o.stageResources.materials)s.setParameters(t)}))}_requiresTerrainElevation(e){return"absolute-height"!==e.mode}_applyObjectRotation(e,t,s){if(!this._fastUpdates?.requiresShaderTransformation||!t)return (0,graphicUtils/* computeObjectRotation */.$2)(e.heading,e.tilt,e.roll,s)}_computeAnchor(e,t,s){const r=(0,vec3f64.c)();switch(s.anchor){case"center":(0,vec3.c)(r,(0,aaBoundingBox/* center */.gX)(e)),(0,vec3.E)(r,r);break;case"top":{const t=(0,aaBoundingBox/* center */.gX)(e);(0,vec3.s)(r,-t[0],-t[1],-e[5]);break}case"bottom":{const t=(0,aaBoundingBox/* center */.gX)(e);(0,vec3.s)(r,-t[0],-t[1],-e[2]);break}case"relative":{const t=(0,aaBoundingBox/* center */.gX)(e),i=(0,aaBoundingBox/* size */.Ej)(e),a=s.anchorPosition,o=a?(0,vec3f64.f)(a.x,a.y,a.z):vec3f64.Z;(0,vec3.A)(r,i,o),(0,vec3.g)(r,r,t),(0,vec3.E)(r,r);break}default:null!=t?(0,vec3.E)(r,t):(0,vec3.c)(r,vec3f64.Z)}return r}_applyAnchor(e,t,s){if(this._fastUpdates?.requiresShaderTransformation)return;const r=this._computeAnchor(e.resourceBoundingBox,e.pivotOffset,t);r&&(0,mat4.w)(s,s,r)}_hasPerInstanceColor(){return this._drivenProperties.color||this._drivenProperties.opacity}_fastVisualVariableConvertOptions(e,t,s,r){const i=null!=e?(0,vec3f64.e)((0,aaBoundingBox/* size */.Ej)(e)):vec3f64.O,a=null!=e?this._computeAnchor(e,r,this.symbolLayer):vec3f64.Z,o=this._context.renderCoordsHelper.unitInMeters,n=(0,graphicUtils/* computeObjectScale */.pW)(null!=t?t:void 0,t,s,o),l=(0,vec3f64.f)(this.symbolLayer.tilt||0,this.symbolLayer.roll||0,this.symbolLayer.heading||0);return new FastSymbolUpdates/* ConvertOptions */.wI({size:!0,color:!0,rotation:!0,opacity:!1},i,t??vec3f64.O,o,a,n,l)}}const Graphics3DObjectSymbolLayer_ue=(0,vec3f64.c)(),Graphics3DObjectSymbolLayer_ye=(0,mat4f64.a)(),Graphics3DObjectSymbolLayer_fe=(0,mat4f64.a)(),Graphics3DObjectSymbolLayer_e=(0,vec4f64.c)(),Graphics3DObjectSymbolLayer_ge=new elevationAlignmentUtils/* SampleElevationInfo */.Uk;

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Path.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Path_n{constructor(t,i,s,o){this.vertices=t,this.positionsES=i,this.offset=o;const n=t.length,r=Math.floor(n/2),g=this.offset+3*r,v=s[g],f=s[g+1],c=s[g+2];this.origin=(0,vec3f64.f)(v,f,c),this.positions=(0,FloatArray/* newFloatArray */.oe)(3*n);const p=this.offset+3*n;for(let e=this.offset;e<p;e+=3)this.positions[e]=s[e]-v,this.positions[e+1]=s[e+1]-f,this.positions[e+2]=s[e+2]-c;this.updatePathVertexInformation()}get usedMemory(){return (0,typedArrayUtil/* estimateSize */.Ek)(this.positions)}updatePathVertexInformation(){const t=this.vertices.length,e=this.vertices[0];let h=this.offset;const n=this.positions;e.vRight[0]=n[h+3]-n[h],e.vRight[1]=n[h+4]-n[h+1],e.vRight[2]=n[h+5]-n[h+2],h+=3;let r=(0,vec3.l)(e.vRight);e.vMinSiblingLength=r,(0,vec3.n)(e.vRight,e.vRight);let g=e;for(let v=1;v<t;++v){const e=this.vertices[v];if(e.vLeft=g.vRight,v<t-1){e.vRight[0]=n[h+3]-n[h],e.vRight[1]=n[h+4]-n[h+1],e.vRight[2]=n[h+5]-n[h+2];const t=(0,vec3.l)(e.vRight);e.vMinSiblingLength=Math.min(r,t),r=t,(0,vec3.n)(e.vRight,e.vRight)}else (0,vec3.c)(e.vRight,e.vLeft),e.vMinSiblingLength=r;g=e,h+=3}}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathBuilder.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathBuilder_h{constructor(t,r,h,o,p,n={}){this.path=t,this.profile=r,this.extruder=h,this.startCap=o,this.endCap=p,this.options=n,this._extrusionVertexCount=0;const l=this.path.vertices.length-2;this.numExtrusionProfiles=h.numProfilesPerJoin()*l+2,this.numVerticesTotal=r.vertices.length*this.numExtrusionProfiles,this.startCap.vertexBufferStart=this.numVerticesTotal;const a=this.startCap.numVertices;this.numVerticesTotal+=a,this.endCap.vertexBufferStart=this.numVerticesTotal;const u=this.endCap.numVertices;this.numVerticesTotal+=u,this.pathVertexData=(0,Indices/* newIntArray */.JH)(1*this.numVerticesTotal),this.profileRightAxes=(0,FloatArray/* newFloatArray */.oe)(4*this.numVerticesTotal),this.profileUpAxes=(0,FloatArray/* newFloatArray */.oe)(4*this.numVerticesTotal),this.profileVertexAndNormals=(0,FloatArray/* newFloatArray */.oe)(4*this.numVerticesTotal),this.positions=(0,FloatArray/* floatSubArray */.AK)(t.positions,t.offset,3*t.vertices.length),this._rebuildGeometry(),this.buildTopology()}get usedMemory(){return (0,typedArrayUtil/* estimateSize */.Ek)(this.pathVertexData,this.profileRightAxes,this.profileUpAxes,this.profileVertexAndNormals)+this.path.usedMemory+this.profile.usedMemory}emitVertex(t,e,i,s,r){const h=4*this._extrusionVertexCount;if(this.profileRightAxes[h]=e.right[0],this.profileRightAxes[h+1]=e.right[1],this.profileRightAxes[h+2]=e.right[2],this.profileUpAxes[h]=e.up[0],this.profileUpAxes[h+1]=e.up[1],this.profileUpAxes[h+2]=e.up[2],this.profileVertexAndNormals[h]=i[0],this.profileVertexAndNormals[h+1]=i[1],this.profileVertexAndNormals[h+2]=s[0],this.profileVertexAndNormals[h+3]=s[1],this.pathVertexData[this._extrusionVertexCount]=t,r){const e=this.path.vertices[t],i=e.maxStretchDistance;this.profileRightAxes[h+3]=e.rotationRight[0]*i,this.profileUpAxes[h+3]=e.rotationRight[1]*i}else this.profileRightAxes[h+3]=0,this.profileUpAxes[h+3]=0;++this._extrusionVertexCount}emitCapVertex(t,e,i,s,r,h){const o=4*this._extrusionVertexCount;this.profileRightAxes[o]=e.right[0],this.profileRightAxes[o+1]=e.right[1],this.profileRightAxes[o+2]=e.right[2],this.profileRightAxes[o+3]=r,this.profileUpAxes[o]=e.up[0],this.profileUpAxes[o+1]=e.up[1],this.profileUpAxes[o+2]=e.up[2],this.profileUpAxes[o+3]=h,this.profileVertexAndNormals[o]=i[0],this.profileVertexAndNormals[o+1]=i[1],this.profileVertexAndNormals[o+2]=s[0],this.profileVertexAndNormals[o+3]=s[1],this.pathVertexData[this._extrusionVertexCount]=t,++this._extrusionVertexCount}_rebuildGeometry(){this._extrusionVertexCount=0;const{positions:t,offset:e,vertices:s}=this.path;this.positions=(0,FloatArray/* floatSubArray */.AK)(t,e,3*s.length);let r=0;const h=(t,e,i,s,h)=>this.emitCapVertex(r,t,e,i,s,h),o=(t,e,i,s)=>this.emitVertex(r,t,e,i,s);for(this.startCap.rebuildConnectingProfileGeometry(s[r],this.profile,h),r=1;r<s.length-1;++r)this.extruder.extrude(s[r],this.profile,o);this.endCap.rebuildConnectingProfileGeometry(s[r],this.profile,h),r=0,this.startCap.rebuildCapGeometry(s[r],h),r=s.length-1,this.endCap.rebuildCapGeometry(s[r],h)}buildTopology(){const t=this.profile.vertices.length,e=this.profile.numSegments,i=this.numExtrusionProfiles-1;let s=3*(2*(e*i));this.startCap.indexBufferStart=s,this.startCap.firstProfileVertexIndex=0,s+=this.startCap.numIndices,this.endCap.indexBufferStart=s,this.endCap.firstProfileVertexIndex=t*(this.numExtrusionProfiles-1);const h=new Array,o=new Array,p=new Array,n=(t,e,i)=>{h.push(t),h.push(e),h.push(i),o.push(t),o.push(e),o.push(i),p.push(this.pathVertexData[t]),p.push(this.pathVertexData[e]),p.push(this.pathVertexData[i])};for(let r=0;r<e;++r){const e=this.profile.indices[2*r],s=this.profile.indices[2*r+1];for(let r=0;r<i;++r){const i=r*t+e,h=(r+1)*t+s,o=r*t+s;n(i,(r+1)*t+e,h),n(i,h,o)}}this.startCap.buildTopology(this.path.vertices[0],n),this.endCap.buildTopology(this.path.vertices[this.path.vertices.length-1],n),this.vertexIndices=(0,Indices/* compactIndices */.Dg)(h),this.normalIndices=(0,Indices/* compactIndices */.Dg)(o),this.pathVertexIndices=(0,Indices/* compactIndices */.Dg)(p)}onPathChanged(){this._rebuildGeometry()}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathCapBuilder.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathCapBuilder_o{rebuildConnectingProfileGeometry(e,t,s){for(let i=0;i<t.vertices.length;++i)s(e.frame,t.vertices[i],t.normals[i],0,0)}}class PathCapBuilder_l extends PathCapBuilder_o{constructor(){super(),this.numVertices=0,this.numIndices=0}rebuildCapGeometry(){}buildTopology(){}}class PathCapBuilder_h extends PathCapBuilder_o{constructor(e,t=0,s=!1){super(),this.profile=e,this.profilePlaneOffset=t,this.flip=s}get numVertices(){return this.profile.vertices.length}get numIndices(){return 3*this.profile.numSegments}rebuildConnectingProfileGeometry(e,t,s){const i=this.profilePlaneOffset;for(let r=0;r<t.vertices.length;++r)s(e.frame,t.vertices[r],t.normals[r],i,0)}rebuildCapGeometry(t,s){const i=this.profile,r=this.flip?1:-1,n=this.profilePlaneOffset,o=PathCapBuilder_m;(0,vec2.s)(o,0,0);for(let e=0;e<i.vertices.length;++e)s(t.frame,i.vertices[e],o,n,r)}buildTopology(e,t){const s=this.profile,i=this.vertexBufferStart+s.indices[0];for(let r=1;r<s.numSegments;++r){const e=s.indices[2*r],n=s.indices[2*r+1],o=this.vertexBufferStart+e,l=this.vertexBufferStart+n;this.flip?t(l,o,i):t(i,o,l)}}}class PathCapBuilder_f extends PathCapBuilder_o{constructor(e){super(),this.flip=!1,this.sign=0,this.breakNormals=!1,this.numSegments=3,this.profile=e.profile,this.flip=e.flip,this.sign=this.flip?1:-1,this.breakNormals=e.breakNormals,this.numSegments=e.subdivisions}get numVertices(){let e=this.profile.vertices.length*(this.numSegments-1)+this.profile.poles.length;return this.breakNormals&&(e+=this.profile.vertices.length),e}get numIndices(){let e=0;const t=this.profile;e+=2*t.numSegments*(this.numSegments-1);for(let s=0;s<t.numSegments;++s){const i=t.indices[2*s],r=t.indices[2*s+1];t.poleIndices[i]===t.poleIndices[r]?e+=1:e+=2}return 3*e}rebuildCapGeometry(n,o){const l=this.profile,h=n.frame,f=.5*this.sign,a=PathCapBuilder_c,p=PathCapBuilder_m;(0,vec2.s)(p,0,0);for(const e of l.poles)e.normal?o(h,e.position,e.normal,f,0):o(h,e.position,p,f,this.sign);if(this.breakNormals)for(let e=0;e<l.vertices.length;++e)o(h,l.vertices[e],l.normals[e],0,0);for(let e=0;e<this.numSegments-1;++e){const n=(1-(e+1)/this.numSegments)*Math.PI*.5,c=Math.sin(n),m=Math.cos(n);for(let e=0;e<l.vertices.length;++e){const n=l.poles[l.poleIndices[e]];(0,vec2.c)(a,l.vertices[e],n.position),(0,vec2.a)(a,a,c),n.normal?((0,vec2.i)(a,a,n.position),o(h,a,n.normal,f*m,0)):((0,vec2.e)(p,a),(0,vec2.a)(p,p,c),(0,vec2.i)(a,a,n.position),o(h,a,p,f*m,this.sign*m))}}}buildTopology(e,t){const s=this.profile,i=this.breakNormals?this.vertexBufferStart+s.poles.length:this.firstProfileVertexIndex,r=this.breakNormals?this.vertexBufferStart+s.poles.length+s.vertices.length:this.vertexBufferStart+s.poles.length;for(let n=0;n<s.numSegments;++n){const e=s.indices[2*n],o=s.indices[2*n+1],l=this.vertexBufferStart+s.poleIndices[e],h=this.vertexBufferStart+s.poleIndices[o];let f=i+e,c=i+o;for(let i=0;i<this.numSegments-1;++i){const n=r+i*s.vertices.length+e,l=r+i*s.vertices.length+o;this.flip?(t(n,c,f),t(c,n,l)):(t(f,c,n),t(l,n,c)),f=n,c=l}this.flip?(t(l,c,f),l!==h&&t(l,h,c)):(t(f,c,l),l!==h&&t(c,h,l))}}}const PathCapBuilder_c=(0,vec2f64.a)(),PathCapBuilder_m=(0,vec2f64.a)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathExtruder.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathExtruder_o{}class PathExtruder_c{numProfilesPerJoin(){return 1}extrude(s,t,e){for(let r=0;r<t.vertices.length;++r)e(s.frame,t.vertices[r],t.normals[r],!1)}}class PathExtruder_u{constructor(s,t){this.cutoffAngle=s,this.numBendSubdivisions=t}numProfilesPerJoin(){return this.numBendSubdivisions+1}extrude(t,r,i){const n=PathExtruder_l,{rotationAngle:o,rotationRight:c,frame:u}=t;if(Math.abs(o)>=this.cutoffAngle){const a=t.rotationFrameUp;for(let l=0;l<this.numBendSubdivisions+1;++l){(0,mat4.c)(PathExtruder_h,.5*-o+l*o/this.numBendSubdivisions,a),PathExtruder_m(n,u,PathExtruder_h);for(let s=0;s<r.vertices.length;++s){if((0,vec2.g)(r.vertices[s],c)*o>=0)i(n,r.vertices[s],r.normals[s],!1);else{i(u,t.applyMiterStretch(PathExtruder_f,r.vertices[s]),r.normals[s],!0)}}}}else for(let s=0;s<this.numBendSubdivisions+1;++s)for(let n=0;n<r.vertices.length;++n){const s=(0,vec2.g)(r.vertices[n],c)*o>=0;i(u,t.applyMiterStretch(PathExtruder_f,r.vertices[n]),r.normals[n],!s)}}}class PathExtruder_a{constructor(){this.up=(0,vec3f64.c)(),this.right=(0,vec3f64.c)()}}function PathExtruder_m(s,t,e){(0,vec3.e)(s.up,t.up,e),(0,vec3.e)(s.right,t.right,e)}const PathExtruder_f=(0,vec2f64.a)(),PathExtruder_h=(0,mat4f64.a)(),PathExtruder_l=new PathExtruder_a;

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathGeometry_e extends Geometry/* Geometry */.V{constructor(r,e,o,n,s,i){super(r,e,null,ContentObjectType/* ContentObjectType */.X.Mesh,i),this.path=o,this.geometrySR=n,this.stencilWidth=s}}var PathGeometry_o;function PathGeometry_n(t){return"path"in t}!function(t){t[t.World=0]="World",t[t.Path=1]="Path"}(PathGeometry_o||(PathGeometry_o={}));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathGeometryData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathGeometryData_x{constructor(t){this.builder=t}onPathChanged(t){this.builder.onPathChanged()}}class PathGeometryData_f extends PathGeometryData_x{constructor(t){super(t),this.vertexAttributeColor=(0,vec4f64.f)(255,255,255,255),this.size=new Array,this.vertexAttributePosition=(0,FloatArray/* newFloatArray */.oe)(3*this.builder.numVerticesTotal),this.vertexAttributeNormal=new Int16Array(2*this.builder.numVerticesTotal)}bakeVertexColors(t){this.vertexAttributeColor[0]=255*t[0],this.vertexAttributeColor[1]=255*t[1],this.vertexAttributeColor[2]=255*t[2],this.vertexAttributeColor[3]=255*(t.length>3?t[3]:1)}bake(a){this.size=a;const{numVerticesTotal:l,pathVertexData:u,path:c,positions:v,profileRightAxes:b,profileUpAxes:p,profileVertexAndNormals:A}=this.builder;for(let d=0;d<l;++d){let l=u[d];const x=0===l||l===c.vertices.length-1;l*=3;const f=PathGeometryData_V;let g=0,N=0;const R=4*d,j=(0,vec3.s)(PathGeometryData_w,b[R],b[R+1],b[R+2]),E=(0,vec3.s)(PathGeometryData_D,p[R],p[R+1],p[R+2]),k=(0,vec2.s)(PathGeometryData_P,A[R]*a[0],A[R+1]*a[1]);if(x)(0,vec3.b)(f,E,j),g=b[R+3]*a[0],N=p[R+3];else{const a=PathGeometryData_I,h=PathGeometryData_C;(0,vec2.s)(a,b[R+3],p[R+3]);const l=(0,vec2.h)(a);(0,vec2.e)(a,a);const u=(0,vec2.g)(k,a);if(Math.abs(u)>l){(0,vec2.s)(h,-a[1],a[0]);const e=(0,vec2.g)(k,h);(0,vec2.a)(a,a,l*Math.sign(u)),(0,vec2.a)(h,h,e),(0,vec2.i)(k,a,h)}(0,vec3.s)(f,0,0,0)}const T=(0,vec3.s)(PathGeometryData_O,j[0]*k[0]+E[0]*k[1],j[1]*k[0]+E[1]*k[1],j[2]*k[0]+E[2]*k[1]),y=3*d;this.vertexAttributePosition[y]=v[l]+T[0]+f[0]*g,this.vertexAttributePosition[y+1]=v[l+1]+T[1]+f[1]*g,this.vertexAttributePosition[y+2]=v[l+2]+T[2]+f[2]*g;const L=(0,vec2.s)(PathGeometryData_P,A[R+2],A[R+3]);Normals_n(this.vertexAttributeNormal,d,j[0]*L[0]+E[0]*L[1]+f[0]*N,j[1]*L[0]+E[1]*L[1]+f[1]*N,j[2]*L[0]+E[2]*L[1]+f[2]*N)}}createGeometryData(){const t=this.builder.vertexIndices.length,{normalIndices:e,vertexIndices:s}=this.builder;return[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(this.vertexAttributePosition,s,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMALCOMPRESSED,new Attribute/* Attribute */.n(this.vertexAttributeNormal,e,2,!0)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(this.vertexAttributeColor,(0,Indices/* getZeroIndexArray */.EH)(t),4)]]}onPathChanged(t){super.onPathChanged(t),this.bake(this.size)}intersect(t,e,s){const i=this.builder.vertexIndices,r=new Attribute/* Vertices */.K(this.vertexAttributePosition,3),o=i.length/3;(0,MaterialUtil/* intersectTriangles */.Z$)(t,e,0,o,i,r,void 0,void 0,s)}}class PathGeometryData_g extends PathGeometryData_x{constructor(t,e,s,i){super(t),this.sizeAttributeValue=e,this.colorAttributeValue=s,this.opacityAttributeValue=i,this.vvData=null,this.baked=new PathGeometryData_f(t),this.vvData=(0,FloatArray/* newFloatArray */.oe)(4*this.builder.path.vertices.length);for(let r=0;r<this.builder.path.vertices.length;++r){this.vvData[4*r]=e,this.vvData[4*r+1]=s,this.vvData[4*r+2]=i;const t=0===r||r===this.builder.path.vertices.length-1;this.vvData[4*r+3]=t?1:0}}createGeometryData(){const{positions:t,profileRightAxes:e,profileUpAxes:s,profileVertexAndNormals:i,pathVertexIndices:r,vertexIndices:o}=this.builder;return[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(t,r,3,!0)],[VertexAttribute/* VertexAttribute */.r.PROFILERIGHT,new Attribute/* Attribute */.n(e,o,4,!0)],[VertexAttribute/* VertexAttribute */.r.PROFILEUP,new Attribute/* Attribute */.n(s,o,4,!0)],[VertexAttribute/* VertexAttribute */.r.PROFILEVERTEXANDNORMAL,new Attribute/* Attribute */.n(i,o,4,!0)],[VertexAttribute/* VertexAttribute */.r.FEATUREVALUE,new Attribute/* Attribute */.n(this.vvData,r,4,!0)]]}onPathChanged(t){super.onPathChanged(t);const e=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION);e&&(e.data=this.builder.positions)}}const PathGeometryData_P=(0,vec2f64.a)(),PathGeometryData_I=(0,vec2f64.a)(),PathGeometryData_C=(0,vec2f64.a)(),PathGeometryData_O=(0,vec3f64.c)(),PathGeometryData_V=(0,vec3f64.c)(),PathGeometryData_w=(0,vec3f64.c)(),PathGeometryData_D=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(32532);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/pathGeometryUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function pathGeometryUtils_g(t,r,e){t[0]=e[0]*r.right[0]+e[1]*r.up[0],t[1]=e[0]*r.right[1]+e[1]*r.up[1],t[2]=e[0]*r.right[2]+e[1]*r.up[2]}function pathGeometryUtils_v(e,s,o){t(e,r(o,s.right),r(o,s.up))}function pathGeometryUtils_l(t,r){let g=null;const v=t.vertices.length,l=.99619469809,R=(0,vec3f64.c)(),y=(0,vec3f64.c)(),k=(0,vec3f64.c)(),L=(0,vec3f64.c)(),b=(0,vec3f64.c)(),q=(0,vec3f64.c)(),x=(0,plane/* create */.vt)();let G=t.vertices[0];(0,vec3.c)(y,r),(0,vec3.s)(R,0,1,0),(0,GeometryUtil/* makeOrthoBasisDirUpFallback */.Xl)(G.vRight,y,R,R,k,y,l),(0,vec3.c)(G.frame.up,y),(0,vec3.c)(G.frame.right,k);const M=t.positions;let U=t.offset;g=G;for(let p=1;p<v;++p){G=t.vertices[p],(0,vec3.g)(b,G.vLeft,G.vRight);let r=(0,vec3.l)(b);r>0?(r=1/Math.sqrt(r),b[0]=b[0]*r,b[1]=b[1]*r,b[2]=b[2]*r):(b[0]=G.vRight[0],b[1]=G.vRight[1],b[2]=G.vRight[2]),q[0]=M[U]+g.frame.up[0],q[1]=M[U+1]+g.frame.up[1],q[2]=M[U+2]+g.frame.up[2],U+=3;const a=(0,vec3.s)(pathGeometryUtils_j,M[U],M[U+1],M[U+2]);(0,plane/* fromPositionAndNormal */.O_)(a,b,x);(0,plane/* intersectRay */.Ui)(x,(0,ray/* wrap */.LV)(q,G.vLeft),L)?(L[0]-=M[U],L[1]-=M[U+1],L[2]-=M[U+2],(0,vec3.n)(y,L),(0,vec3.b)(k,b,y),(0,vec3.n)(k,k)):(0,GeometryUtil/* makeOrthoBasisDirUpFallback */.Xl)(b,g.frame.up,g.frame.right,R,k,y,l),(0,vec3.c)(G.frame.up,y),(0,vec3.c)(G.frame.right,k),g=G}}const pathGeometryUtils_j=(0,vec3f64.c)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathProfile.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathProfile_r{constructor(){this.vertices=new Array,this.normals=new Array,this.indices=new Array,this.poles=new Array,this.poleIndices=new Array}addVertex(t,e){return this.vertices.push((0,vec2f64.d)(t)),this.normals.push((0,vec2f64.d)(e)),this.vertices.length-1}addPole(t,e=null){return this.poles.push({position:(0,vec2f64.d)(t),normal:e?(0,vec2f64.d)(e):null}),this.poles.length-1}addSegment(t,e=null){this.indices.push(t.v0),this.indices.push(t.v1),e&&(this.poleIndices.push(e.v0),this.poleIndices.push(e.v1))}get numSegments(){return this.indices.length/2}translate(t,e){for(const s of this.vertices)s[0]+=t,s[1]+=e;for(const s of this.poles)s.position[0]+=t,s.position[1]+=e}get usedMemory(){return this.vertices.length*(0,typedArrayUtil/* estimateSize */.Ek)(this.vertices[0])*2+(0,typedArrayUtil/* estimateSize */.Ek)(this.indices)}}const PathProfile_o={top:[0,-.5],bottom:[0,.5]};function PathProfile_d(t){const s=.5,d=Graphics3DPathSymbolLayerConstants_c,i=new PathProfile_r,a={v0:0,v1:0};i.addPole((0,vec2f64.f)(0,0));for(let n=0;n<d;++n){const t=2*n*Math.PI/d,r=Math.cos(t),o=Math.sin(t),a=(0,vec2f64.f)(r*s,o*s),c=(0,vec2f64.f)(r,o);i.addVertex(a,c)}for(let e=0;e<d-1;++e){const t={v0:e,v1:e+1};i.addSegment(t,a)}const c={v0:d-1,v1:0};if(i.addSegment(c,a),"center"!==t){const e=PathProfile_o[t];i.translate(e[0],e[1])}return i}const PathProfile_i={center:PathProfile_d("center"),top:PathProfile_d("top"),bottom:PathProfile_d("bottom")},PathProfile_a={center:PathProfile_c("center"),top:PathProfile_c("top"),bottom:PathProfile_c("bottom")};function PathProfile_c(t){const s=1,n=1,d=new PathProfile_r,i=(0,vec2f64.f)(.5*-s,.5*-n),a=(0,vec2f64.f)(.5*s,.5*-n),c=(0,vec2f64.f)(.5*s,.5*n),h=(0,vec2f64.f)(.5*-s,.5*n),l=(0,vec2f64.f)(0,-1),v=(0,vec2f64.f)(1,0),p=(0,vec2f64.f)(0,1),m=(0,vec2f64.f)(-1,0);if(d.addPole((0,vec2f64.f)(0,.5*n),p),d.addPole((0,vec2f64.f)(0,.5*n)),d.addPole((0,vec2f64.f)(0,.5*-n)),d.addPole((0,vec2f64.f)(0,.5*-n),l),d.addVertex(i,l),d.addVertex(a,l),d.addSegment({v0:0,v1:1},{v0:3,v1:3}),d.addVertex(a,v),d.addVertex(c,v),d.addSegment({v0:2,v1:3},{v0:2,v1:1}),d.addVertex(c,p),d.addVertex(h,p),d.addSegment({v0:4,v1:5},{v0:0,v1:0}),d.addVertex(h,m),d.addVertex(i,m),d.addSegment({v0:6,v1:7},{v0:1,v1:2}),"center"!==t){const e=PathProfile_o[t];d.translate(e[0],e[1])}return d}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/common.js
var common = __webpack_require__(57137);
;// ../node_modules/@arcgis/core/chunks/mat2.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function mat2_n(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function mat2_a(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function mat2_r(t,n,a,r,s){return t[0]=n,t[1]=a,t[2]=r,t[3]=s,t}function mat2_s(t,n){if(t===n){const a=n[1];t[1]=n[2],t[2]=a}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function mat2_u(t,n){const a=n[0],r=n[1],s=n[2],u=n[3];let o=a*u-s*r;return o?(o=1/o,t[0]=u*o,t[1]=-r*o,t[2]=-s*o,t[3]=a*o,t):null}function mat2_o(t,n){const a=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=a,t}function mat2_e(t){return t[0]*t[3]-t[2]*t[1]}function mat2_c(t,n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=a[0],c=a[1],i=a[2],f=a[3];return t[0]=r*e+u*c,t[1]=s*e+o*c,t[2]=r*i+u*f,t[3]=s*i+o*f,t}function mat2_i(t,n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=Math.sin(a),c=Math.cos(a);return t[0]=r*c+u*e,t[1]=s*c+o*e,t[2]=r*-e+u*c,t[3]=s*-e+o*c,t}function mat2_f(t,n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=a[0],c=a[1];return t[0]=r*e,t[1]=s*e,t[2]=u*c,t[3]=o*c,t}function mat2_l(t,n){const a=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=a,t[2]=-a,t[3]=r,t}function mat2_h(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function mat2_M(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function mat2_b(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2)}function mat2_m(t,n,a,r){return t[2]=r[2]/r[0],a[0]=r[0],a[1]=r[1],a[3]=r[3]-t[2]*a[1],[t,n,a]}function mat2_d(t,n,a){return t[0]=n[0]+a[0],t[1]=n[1]+a[1],t[2]=n[2]+a[2],t[3]=n[3]+a[3],t}function mat2_p(t,n,a){return t[0]=n[0]-a[0],t[1]=n[1]-a[1],t[2]=n[2]-a[2],t[3]=n[3]-a[3],t}function mat2_y(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function mat2_x(n,a){const r=n[0],s=n[1],u=n[2],o=n[3],e=a[0],c=a[1],i=a[2],f=a[3],l=(0,common.g)();return Math.abs(r-e)<=l*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(s-c)<=l*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(u-i)<=l*Math.max(1,Math.abs(u),Math.abs(i))&&Math.abs(o-f)<=l*Math.max(1,Math.abs(o),Math.abs(f))}function mat2_g(t,n,a){return t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t[3]=n[3]*a,t}function mat2_j(t,n,a,r){return t[0]=n[0]+a[0]*r,t[1]=n[1]+a[1]*r,t[2]=n[2]+a[2]*r,t[3]=n[3]+a[3]*r,t}const mat2_S=mat2_c,mat2_q=mat2_p,mat2_=Object.freeze(Object.defineProperty({__proto__:null,LDU:mat2_m,add:mat2_d,adjoint:mat2_o,copy:mat2_n,determinant:mat2_e,equals:mat2_x,exactEquals:mat2_y,frob:mat2_b,fromRotation:mat2_l,fromScaling:mat2_h,identity:mat2_a,invert:mat2_u,mul:mat2_S,multiply:mat2_c,multiplyScalar:mat2_g,multiplyScalarAndAdd:mat2_j,rotate:mat2_i,scale:mat2_f,set:mat2_r,str:mat2_M,sub:mat2_q,subtract:mat2_p,transpose:mat2_s},Symbol.toStringTag,{value:"Module"}));

;// ../node_modules/@arcgis/core/chunks/mat2f64.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function mat2f64_e(){return[1,0,0,1]}function mat2f64_r(e){return[e[0],e[1],e[2],e[3]]}function mat2f64_t(e,r,t,n){return[e,r,t,n]}function mat2f64_n(e,r){return new Float64Array(e,r,4)}const mat2f64_o=Object.freeze(Object.defineProperty({__proto__:null,clone:mat2f64_r,create:mat2f64_e,createView:mat2f64_n,fromValues:mat2f64_t},Symbol.toStringTag,{value:"Module"}));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/PathVertex.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathVertex_j{constructor(){this.vLeft=(0,vec3f64.c)(),this.vRight=(0,vec3f64.c)(),this.vMinSiblingLength=0,this.frame=new PathExtruder_a}setFrameFromUpVector(t){(0,vec3.c)(this.frame.up,t),(0,vec3.g)(PathVertex_I,this.vLeft,this.vRight),(0,vec3.n)(PathVertex_I,PathVertex_I),(0,vec3.i)(PathVertex_y,this.frame.up,(0,vec3.j)(PathVertex_I,this.frame.up)),(0,vec3.f)(PathVertex_D,PathVertex_I,PathVertex_y),(0,vec3.n)(PathVertex_D,PathVertex_D),(0,vec3.b)(this.frame.right,PathVertex_D,this.frame.up)}get foldingAngle(){return Math.PI-this.rotationAngle}}class PathVertex_L extends PathVertex_j{get rotationFrameUp(){return this.frame.up}get rotationRight(){return vec2f64.U}get rotationAngle(){(0,vec3.i)(PathVertex_P,this.frame.up,(0,vec3.j)(this.frame.up,this.vLeft)),(0,vec3.f)(PathVertex_P,this.vLeft,PathVertex_P),(0,vec3.E)(PathVertex_P,PathVertex_P),(0,vec3.n)(PathVertex_P,PathVertex_P),(0,vec3.i)(PathVertex_w,this.frame.up,(0,vec3.j)(this.frame.up,this.vRight)),(0,vec3.f)(PathVertex_w,this.vRight,PathVertex_w),(0,vec3.n)(PathVertex_w,PathVertex_w),(0,vec3.b)(PathVertex_F,this.rotationFrameUp,this.vLeft);return Math.sign((0,vec3.j)(PathVertex_F,this.vRight))*(Math.PI-(0,mathUtils/* acosClamped */.XM)((0,vec3.j)(PathVertex_P,PathVertex_w)))}get maxStretchDistance(){return Math.abs(this.vMinSiblingLength/Math.cos(.5*this.foldingAngle))}applyMiterStretch(t,i){const r=this.rotationAngle;if(Math.abs(r)<=0)return i;const e=(0,mathUtils/* reciprocalClamped */.J_)(Math.cos(.5*r));return (0,vec2.s)(t,(e-1+1)*i[0],i[1])}}class PathVertex_b extends PathVertex_j{get rotationFrameUp(){const t=Math.sign((0,vec3.j)(this.frame.right,this.vRight));return (0,vec3.b)(PathVertex_S,this.vRight,this.vLeft),(0,vec3.i)(PathVertex_S,PathVertex_S,t),(0,vec3.n)(PathVertex_S,PathVertex_S)}get rotationRight(){const t=this.rotationFrameUp,s=(0,vec3.j)(t,this.frame.up),i=(0,vec3.j)(t,this.frame.right);return (0,vec3.i)(PathVertex_k,this.frame.up,-i),(0,vec3.i)(PathVertex_x,this.frame.right,s),(0,vec3.g)(PathVertex_k,PathVertex_k,PathVertex_x),(0,vec3.n)(PathVertex_k,PathVertex_k),PathVertex_A(PathVertex_U,this.frame,PathVertex_k),PathVertex_U}get rotationAngle(){const s=Math.sign((0,vec3.j)(this.frame.right,this.vRight));return (0,vec3.E)(PathVertex_F,this.vLeft),-s*(Math.PI-(0,mathUtils/* acosClamped */.XM)((0,vec3.j)(PathVertex_F,this.vRight)))}get maxStretchDistance(){return Math.abs(this.vMinSiblingLength*(0,mathUtils/* reciprocalClamped */.J_)(Math.cos(.5*this.foldingAngle)))}applyMiterStretch(t,r){const h=this.rotationAngle;if(0===Math.abs(h))return r;const a=(0,mathUtils/* reciprocalClamped */.J_)(Math.cos(.5*h)),n=this.rotationRight,o=mat2_r(PathVertex_E,1+(a-1)*n[0]*n[0],(a-1)*n[0]*n[1],(a-1)*n[0]*n[1],1+(a-1)*n[1]*n[1]);return (0,vec2.q)(t,r,o)}}function PathVertex_A(t,s,i){(0,vec2.s)(t,(0,vec3.j)(i,s.right),(0,vec3.j)(i,s.up))}function PathVertex_d(t){switch(t){case PathGeometry_o.World:return new PathVertex_L;case PathGeometry_o.Path:return new PathVertex_b}}const PathVertex_S=(0,vec3f64.c)(),PathVertex_U=(0,vec2f64.a)(),PathVertex_k=(0,vec3f64.c)(),PathVertex_x=(0,vec3f64.c)(),PathVertex_F=(0,vec3f64.c)(),PathVertex_P=(0,vec3f64.c)(),PathVertex_w=(0,vec3f64.c)(),PathVertex_y=(0,vec3f64.c)(),PathVertex_I=(0,vec3f64.c)(),PathVertex_D=(0,vec3f64.c)(),PathVertex_E=mat2f64_e();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js
var Normals_glsl = __webpack_require__(46971);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PathVertexPosition.glsl.js
var PathVertexPosition_glsl = __webpack_require__(10204);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/Path.glsl.js
var Path_glsl = __webpack_require__(51305);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const PathTechnique_E=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.PROFILERIGHT,1],[VertexAttribute/* VertexAttribute */.r.PROFILEUP,2],[VertexAttribute/* VertexAttribute */.r.PROFILEVERTEXANDNORMAL,3],[VertexAttribute/* VertexAttribute */.r.FEATUREVALUE,4]]);class PathTechnique_N extends PathVertexPosition_glsl/* PathVertexPositionPassParameters */.W{constructor(){super(...arguments),this.ambient=(0,vec3f64.f)(.2,.2,.2),this.diffuse=(0,vec3f64.f)(.8,.8,.8),this.specular=(0,vec3f64.f)(0,0,0),this.opacity=1,this.origin=(0,vec3f64.c)(),this.modelTransformation=null}}class PathTechnique_C extends ShaderTechnique/* ShaderTechnique */.w{initializeConfiguration(e,o){o.spherical=e.viewingMode===ViewingMode/* ViewingMode */.RT.Global,o.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(e){return new Program/* Program */.B(e.rctx,PathTechnique_C.shader.get().build(this.configuration),PathTechnique_E)}initializePipeline(){const e=this.configuration.transparencyPassType,o=this.configuration,t=e===TransparencyPassType/* TransparencyPassType */.y.NONE,i=e===TransparencyPassType/* TransparencyPassType */.y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:o.output!==ShaderOutput/* ShaderOutput */.V.Color&&o.output!==ShaderOutput/* ShaderOutput */.V.Alpha||!o.transparent?null:t?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(e),culling:o.hasSlicePlane&&!o.transparent&&o.doubleSidedMode!==Normals_glsl/* NormalsDoubleSidedMode */.W.None?renderState/* frontFaceCullingParams */.hG:null,depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(e)},depthWrite:t||i?renderState/* defaultDepthWriteParams */.kn:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:o.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:o.hasOccludees?StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:t||i?null:OrderIndependentTransparency/* OITPolygonOffset */.SE})}}PathTechnique_C.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(Path_glsl.P,(()=>__webpack_require__.e(/* import() */ 8645).then(__webpack_require__.bind(__webpack_require__, 88645))));class PathTechnique_V extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.doubleSidedMode=Normals_glsl/* NormalsDoubleSidedMode */.W.None,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.spherical=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.doublePrecisionRequiresObfuscation=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],PathTechnique_V.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:Normals_glsl/* NormalsDoubleSidedMode */.W.COUNT})],PathTechnique_V.prototype,"doubleSidedMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],PathTechnique_V.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"receiveShadows",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"receiveAmbientOcclusion",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"vvOpacity",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PathTechnique_V.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PathTechnique_V.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Disabled})],PathTechnique_V.prototype,"pbrMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],PathTechnique_V.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PathTechnique_V.prototype,"useCustomDTRExponentForWater",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PathTechnique_V.prototype,"useFillLights",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PathTechnique_V.prototype,"hasColorTexture",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PathMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PathMaterial_b extends Material/* Material */.im{constructor(e){super(e,new PathMaterial_S),this.supportsEdges=!0,this._vertexAttributeLocations=PathTechnique_E,this._configuration=new PathTechnique_V,this._vertexBufferLayout=PathMaterial_b.getVertexBufferLayout()}getConfiguration(e,t){return this._configuration.output=e,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasOccludees=this.parameters.hasOccludees,e!==ShaderOutput/* ShaderOutput */.V.Color&&e!==ShaderOutput/* ShaderOutput */.V.Alpha||(this._configuration.doubleSidedMode=this.parameters.doubleSided&&"normal"===this.parameters.doubleSidedType?Normals_glsl/* NormalsDoubleSidedMode */.W.View:this.parameters.doubleSided&&"winding-order"===this.parameters.doubleSidedType?Normals_glsl/* NormalsDoubleSidedMode */.W.WindingOrder:Normals_glsl/* NormalsDoubleSidedMode */.W.None,this._configuration.receiveShadows=this.parameters.receiveShadows,this._configuration.receiveAmbientOcclusion=null!=t.ssao),this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}isVisibleForOutput(e){return e!==ShaderOutput/* ShaderOutput */.V.Shadow&&e!==ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight&&e!==ShaderOutput/* ShaderOutput */.V.ShadowHighlight||this.parameters.castShadows}isVisible(){return super.isVisible()&&this.parameters.opacity>0}intersect(r,i,a,s,o,h){const u=r;if(!PathGeometry_n(u))return;const c=u.path,l=[this.parameters.size[0],this.parameters.size[1]];if(this.parameters.vvSize){const{offset:t,factor:r,minSize:i,maxSize:a}=this.parameters.vvSize,s=c.sizeAttributeValue;l[0]*=(0,mathUtils/* clamp */.qE)(t[0]+s*r[0],i[0],a[0]),l[1]*=(0,mathUtils/* clamp */.qE)(t[2]+s*r[2],i[2],a[2])}const d=Math.max(l[0],l[1]),p=r.boundingInfo;if(null==p)return void this._intersectTriangles(c,l,s,o,h);const m=(0,aaBoundingBox/* fromValues */.fA)(p.bbMin[0]-d,p.bbMin[1]-d,p.bbMin[2]-d,p.bbMax[0]+d,p.bbMax[1]+d,p.bbMax[2]+d),b=[o[0]-s[0],o[1]-s[1],o[2]-s[2]],g=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]),S=[g/b[0],g/b[1],g/b[2]];(0,MaterialUtil/* intersectAabbInvDir */.Wb)(m,s,S,a.tolerance)&&this._intersectTriangles(c,l,s,o,h)}_intersectTriangles(e,t,r,i,a){e.baked.size&&e.baked.size[0]===t[0]&&e.baked.size[1]===t[1]||e.baked.bake(t),e.baked.intersect(r,i,a)}createBufferWriter(){return new DefaultBufferWriter/* DefaultBufferWriter */.Z(this._vertexBufferLayout)}produces(e,t){switch(t){case ShaderOutput/* ShaderOutput */.V.Shadow:case ShaderOutput/* ShaderOutput */.V.ShadowHighlight:case ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight:if(!this.parameters.castShadows)return!1;case ShaderOutput/* ShaderOutput */.V.Color:case ShaderOutput/* ShaderOutput */.V.Alpha:case ShaderOutput/* ShaderOutput */.V.Depth:case ShaderOutput/* ShaderOutput */.V.Normal:case ShaderOutput/* ShaderOutput */.V.Highlight:case ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor:return e===(this.parameters.transparent?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL)||e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;default:return!1}}createGLMaterial(e){return new PathMaterial_g(e)}static getVertexBufferLayout(){return (0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec4f(VertexAttribute/* VertexAttribute */.r.PROFILERIGHT).vec4f(VertexAttribute/* VertexAttribute */.r.PROFILEUP).vec4f(VertexAttribute/* VertexAttribute */.r.PROFILEVERTEXANDNORMAL).vec4f(VertexAttribute/* VertexAttribute */.r.FEATUREVALUE)}}class PathMaterial_g extends GLMaterial/* default */.A{_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}_updateShadowState(e){null!=this.technique&&e.shadowMap.enabled===this.technique.configuration.receiveShadows||this._material.setParameters({receiveShadows:e.shadowMap.enabled})}beginSlot(e){return this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||(this._updateShadowState(e),this._updateOccludeeState(e)),this.ensureTechnique(PathTechnique_C,e)}}class PathMaterial_S extends PathTechnique_N{constructor(){super(...arguments),this.doubleSided=!1,this.doubleSidedType="normal",this.receiveShadows=!1,this.castShadows=!0,this.hasSlicePlane=!1,this.transparent=!1,this.hasOccludees=!1}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPathSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DPathSymbolLayer_ee=["polyline"];class Graphics3DPathSymbolLayer_te extends Graphics3DSymbolLayer_h{constructor(e,t,s,i){super(e,t,s,i),this._intrinsicSize=(0,vec2f64.f)(1,1),this._upVectorAlignment=PathGeometry_o.Path,this._stencilWidth=.1,this.usedMemory=0,this.ensureDrapedStatus(!1)}async doLoad(){const t=null!=this.symbolLayer.width?this.symbolLayer.width:this.symbolLayer.height,s=null!=this.symbolLayer.height?this.symbolLayer.height:t;this._vvConvertOptions=new FastSymbolUpdates/* ConvertOptions */.wI({size:!0,color:!0,rotation:!1,opacity:!0},[1,1,1],[t,1,s],this._context.renderCoordsHelper.unitInMeters),this._fastUpdates=this._context.renderer?.visualVariables?.length>0?(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,this._vvConvertOptions):null;const i=this.symbolLayer.anchor||"center";this._upVectorAlignment="heading"===this.symbolLayer.profileRotation?PathGeometry_o.World:PathGeometry_o.Path;const o=this.symbolLayer.profile||"circle";switch(o){default:case"circle":this._profile=PathProfile_i[i];break;case"quad":this._profile=PathProfile_a[i]}switch(this.symbolLayer.join){case"round":this._extruder=new PathExtruder_u(0,Graphics3DPathSymbolLayerConstants_o);break;case"bevel":this._extruder=new PathExtruder_u(0,1);break;case"miter":this._extruder=new PathExtruder_u(.8*Math.PI,1);break;default:this._extruder=new PathExtruder_c}const l=this.symbolLayer.cap||"butt";switch(l){case"none":this._startCap=new PathCapBuilder_l,this._endCap=new PathCapBuilder_l;break;case"butt":default:this._startCap=new PathCapBuilder_h(this._profile,0),this._endCap=new PathCapBuilder_h(this._profile,0,!0);break;case"square":this._startCap=new PathCapBuilder_h(this._profile,-.5),this._endCap=new PathCapBuilder_h(this._profile,.5,!0);break;case"round":{const e="quad"===o;this._startCap=new PathCapBuilder_f({profile:this._profile,flip:!1,breakNormals:e,subdivisions:Graphics3DPathSymbolLayerConstants_t}),this._endCap=new PathCapBuilder_f({profile:this._profile,flip:!0,breakNormals:e,subdivisions:Graphics3DPathSymbolLayerConstants_t});break}}const c=this.symbolLayer?.material?.color,p=this._getCombinedOpacityAndColor(c),m=(0,vec3f64.e)(p),d=p[3],f=d<1||this.needsDrivenTransparentPass,u={diffuse:m,ambient:m,opacity:d,transparent:f,hasVertexColors:!1,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:this.symbolLayer.castShadows,cullFace:f||"none"===l?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back,offsetTransparentBackfaces:!0};if(!this._drivenProperties.size&&((0,vec2.s)(this._intrinsicSize,t,s),!(0,graphicUtils/* isValidSize */.Mh)(this._intrinsicSize[0])||!(0,graphicUtils/* isValidSize */.Mh)(this._intrinsicSize[1])))throw new core_Error/* default */.A("graphics3dpathsymbollayer:invalid-size","Symbol sizes may not be negative values");if(this._fastUpdates?.visualVariables.size||(0,vec2.a)(this._intrinsicSize,this._intrinsicSize,1/this._context.renderCoordsHelper.unitInMeters),this._fastUpdates){const e={...u,...this._fastUpdates.materialParameters,size:(0,vec2f64.b)(this._intrinsicSize)};this._materials[0]=new PathMaterial_b(e)}else u.hasVertexColors=this._drivenProperties.color||this._drivenProperties.opacity,u.normalType=NormalAttribute_glsl/* NormalType */.W.Compressed,this._materials[0]=new DefaultMaterial/* DefaultMaterial */.$U(u);this._materials[0].setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),this._context.stage.add(this._materials[0])}destroy(){super.destroy(),this._context.stage.remove(this._materials[0]),this._materials[0]=null,this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Graphics3DPathSymbolLayer_ee,this.symbolLayer.type))return null;const s=this.setGraphicElevationContext(t),i=e.renderingInfo;return this._createAs3DShape(t,i,s,t.uid)}layerOpacityChanged(){const e=this.symbolLayer?.material?.color,t=this._getCombinedOpacity(e),s=t<1||this.needsDrivenTransparentPass;this._materials[0]?.setParameters({opacity:t,transparent:s})}layerElevationInfoChanged(e,t){return this.updateGraphics3DGraphicElevationInfo(e,t,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)}slicePlaneEnabledChanged(){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return this._materials[0]?.setParameters({usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0}),!0}applyRendererDiff(e,t){for(const s in e.diff){if("visualVariables"!==s)return interfaces_e.RecreateSymbol;if(!(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(this._fastUpdates,t,this._vvConvertOptions))return interfaces_e.RecreateSymbol;this._materials[0]?.setParameters(this._fastUpdates.materialParameters)}return interfaces_e.FastUpdate}_getVertexData(e){let t=0;const s=e.paths,i=[],r=e.spatialReference,a=this._context.elevationProvider.spatialReference,o=this._context.renderCoordsHelper.spatialReference;for(const c of s)t+=c.length;const n=(0,DoubleArray/* newDoubleArray */.jh)(3*t);let l,h=0;for(const c of s){i.push({offset:h,numVertices:c.length});for(const t of c)n[h++]=t[0],n[h++]=t[1],n[h++]=e.hasZ?t[2]:0}return null==a||r.equals(a)||(0,projectBuffer.projectBuffer)(n,r,0,n,a,0,t)?(null==a||a.equals(o)?l=(0,DoubleArray/* doubleArrayFrom */.xm)(n):(l=(0,DoubleArray/* newDoubleArray */.jh)(3*t),(0,projectBuffer.projectBuffer)(n,a,0,l,o,0,t)),{pathVertexDataInfos:i,vertexDataES:n,vertexDataRS:l}):null}_createAs3DShape(e,r,a,o){this.usedMemory=0;const n=e.geometry,h=this._getVertexData(n);if(null==h)return this.logger.warn("PathSymbol3DLayer geometry failed to be created (failed to project geometry to view spatial reference)"),null;if(0===h.pathVertexDataInfos.length)return 0!==n.paths.length&&n.paths.some((e=>e.length>0))||this.logger.warn("PathSymbol3DLayer geometry failed to be created (no paths were defined)"),null;const c=new Array,p=n.spatialReference,y=(0,aaBoundingBox/* create */.vt)(),b=this._context.renderCoordsHelper,v=new ElevationProvider/* SamplePosition */.aY(h.vertexDataES);for(const m of h.pathVertexDataInfos){const n=m.numVertices;if(n<2)continue;const g=m.offset;if(null!=this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(y),(0,aaBoundingBox/* expandWithBuffer */.Hq)(y,h.vertexDataES,g,n),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(y,this._context.clippingExtent)))continue;const w=new Array,x=g+3*n;for(let e=g;e<x;e+=3){v.offset=e;const t=(0,elevationAlignmentUtils/* evaluateElevationAlignmentAtPoint */.nG)(v,this._context.elevationProvider,a,b);(0,vec3.s)(Graphics3DPathSymbolLayer_oe,h.vertexDataRS[e],h.vertexDataRS[e+1],h.vertexDataRS[e+2]),b.setAltitude(Graphics3DPathSymbolLayer_oe,t),h.vertexDataRS[e]=Graphics3DPathSymbolLayer_oe[0],h.vertexDataRS[e+1]=Graphics3DPathSymbolLayer_oe[1],h.vertexDataRS[e+2]=Graphics3DPathSymbolLayer_oe[2],w.push(PathVertex_d(this._upVectorAlignment))}const P=new Path_n(w,h.vertexDataES,h.vertexDataRS,g);Graphics3DPathSymbolLayer_se(P,this._upVectorAlignment,this._context.renderCoordsHelper);const j=new PathBuilder_h(P,this._profile,this._extruder,this._startCap,this._endCap);let S=null;if(this._fastUpdates){const t=this._fastUpdates.visualVariables,s=(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.size?.field,e)??0,i=(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.color?.field,e)??0,r=(0,FastSymbolUpdates/* getAttributeValue */.ul)(t.opacity?.field,e)??0;S=new PathGeometryData_g(j,s,i,r)}else{const e=[this._intrinsicSize[0],this._intrinsicSize[1]];if(this._drivenProperties.size){const t=r.size;e[0]*=Graphics3DPathSymbolLayer_ie(t[0],"symbol-value"===t[2]?this.symbolLayer.height||0:t[2],this.symbolLayer.width||0),e[1]*=Graphics3DPathSymbolLayer_ie(t[2],"symbol-value"===t[0]?this.symbolLayer.width||0:t[0],this.symbolLayer.height||0)}let t;this._drivenProperties.color&&(t=r.color),this._drivenProperties.opacity&&null!=r.opacity&&(t=t?[t[0],t[1],t[2],r.opacity]:[1,1,1,r.opacity]);const s=new PathGeometryData_f(j);s.bake(e),t&&s.bakeVertexColors(t),S=s}const D=S.createGeometryData(),C=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerUid:this._context.layer.uid}),L=new PathGeometry_e(this._materials[0],D,S,p,this._stencilWidth,C);L.transformation=(0,mat4.w)((0,mat4f64.a)(),mat4f64.I,j.path.origin),c.push(L),this.usedMemory+=j.usedMemory}if(0===c.length)return null;const x=new Object3D/* Object3D */.B({geometries:c,layerUid:this._context.layer.uid,graphicUid:o}),P=new Graphics3DObject3DGraphicLayer_p(this,x,c,null,null,((e,t,s,i,r)=>Graphics3DPathSymbolLayer_ae(e,t,i,r,this._upVectorAlignment)),a);return P.alignedSampledElevation=0,P.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates3D */.Kf)(a.mode),P}}function Graphics3DPathSymbolLayer_se(e,t,s){const{origin:i,positions:r}=e;let a=e.offset;switch(t){default:case PathGeometry_o.World:for(const t of e.vertices)Graphics3DPathSymbolLayer_oe[0]=r[a++]+i[0],Graphics3DPathSymbolLayer_oe[1]=r[a++]+i[1],Graphics3DPathSymbolLayer_oe[2]=r[a++]+i[2],s.worldUpAtPosition(Graphics3DPathSymbolLayer_oe,Graphics3DPathSymbolLayer_oe),t.setFrameFromUpVector(Graphics3DPathSymbolLayer_oe);break;case PathGeometry_o.Path:Graphics3DPathSymbolLayer_oe[0]=r[a]+i[0],Graphics3DPathSymbolLayer_oe[1]=r[a+1]+i[1],Graphics3DPathSymbolLayer_oe[2]=r[a+2]+i[2],s.worldUpAtPosition(Graphics3DPathSymbolLayer_oe,Graphics3DPathSymbolLayer_oe),pathGeometryUtils_l(e,Graphics3DPathSymbolLayer_oe)}}function Graphics3DPathSymbolLayer_ie(e,t,s){switch(e){case"symbol-value":return s;case"proportional":return t;default:return e}}function Graphics3DPathSymbolLayer_re(e,t,s,i){let r=0;const{origin:a,vertices:o,positions:n,positionsES:h}=e,c=e.offset+3*o.length;for(let p=e.offset;p<c;p+=3)(0,vec3.s)(Graphics3DPathSymbolLayer_oe,h[p],h[p+1],h[p+2]),s(Graphics3DPathSymbolLayer_oe,Graphics3DPathSymbolLayer_ne),r+=Graphics3DPathSymbolLayer_ne.sampledElevation,Graphics3DPathSymbolLayer_oe[0]=n[p]+a[0],Graphics3DPathSymbolLayer_oe[1]=n[p+1]+a[1],Graphics3DPathSymbolLayer_oe[2]=n[p+2]+a[2],i.setAltitude(Graphics3DPathSymbolLayer_oe,Graphics3DPathSymbolLayer_ne.z),n[p]=Graphics3DPathSymbolLayer_oe[0]-a[0],n[p+1]=Graphics3DPathSymbolLayer_oe[1]-a[1],n[p+2]=Graphics3DPathSymbolLayer_oe[2]-a[2];return e.updatePathVertexInformation(),r/o.length}function Graphics3DPathSymbolLayer_ae(e,t,s,i,r){const a=e.stageObject,o=a.geometries;let n=0;for(const l of o){if(!PathGeometry_n(l))continue;const e=l.path,o=e.builder.path;n+=Graphics3DPathSymbolLayer_re(o,t,s,i),r!==PathGeometry_o.World&&Graphics3DPathSymbolLayer_se(o,r,i),e.onPathChanged(l),l.invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(l,VertexAttribute/* VertexAttribute */.r.POSITION)}return n/o.length}const Graphics3DPathSymbolLayer_oe=(0,vec3f64.c)(),Graphics3DPathSymbolLayer_ne=new elevationAlignmentUtils/* SampleElevationInfo */.Uk;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/ellipsoidUtils.js
var ellipsoidUtils = __webpack_require__(47936);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectors.js
var projectors = __webpack_require__(12943);
;// ../node_modules/@arcgis/core/views/3d/layers/support/uvUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function uvUtils_T(t,s,r,n,e=1){if(r.isGeographic&&n===ViewingMode/* ViewingMode */.RT.Global){const t=(0,DoubleArray/* newDoubleArray */.jh)(s.length),o=s.length,n=(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(r);for(let r=0;r<o;r+=3)(0,projectors/* lonLatToWebMercatorComparable */.RC)(s,r,t,r,n);s=t}(0,vec2.s)(uvUtils_y,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);for(let o=0;o<s.length;o+=3)uvUtils_y[0]=Math.min(uvUtils_y[0],s[o]),uvUtils_y[1]=Math.min(uvUtils_y[1],s[o+1]);const m=uvUtils_y[0]%e,a=uvUtils_y[1]%e,i=uvUtils_y[0]-m,c=uvUtils_y[1]-a;for(let o=0;o<s.length;o+=3){const r=o/3*4;t[r]=(s[o]-i)/e,t[r+1]=(s[o+1]-c)/e,t[r+2]=i/e,t[r+3]=c/e}}function uvUtils_M(t,s,i,c,I=1){(0,vec3.s)(uvUtils_Y,1,0,0),(0,vec3.s)(uvUtils_,0,1,0),(0,vec3.s)(uvUtils_k,0,0,1),uvUtils_w(uvUtils_E,i),(0,plane/* fromArray */.ci)(uvUtils_F,i)&&uvUtils_G(uvUtils_F,uvUtils_Y,uvUtils_,uvUtils_k,c,uvUtils_E),(0,vec2.s)(uvUtils_y,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),(0,vec2.s)(uvUtils_P,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(let o=0;o<i.length;o+=3){(0,vec3.s)(uvUtils_V,i[o],i[o+1],i[o+2]);const t=(0,vec3.j)(uvUtils_Y,uvUtils_V),s=(0,vec3.j)(uvUtils_,uvUtils_V);uvUtils_y[0]=Math.min(uvUtils_y[0],t),uvUtils_y[1]=Math.min(uvUtils_y[1],s),uvUtils_P[0]=Math.max(uvUtils_P[0],t),uvUtils_P[1]=Math.max(uvUtils_P[1],s)}const f=(0,vec3.j)(uvUtils_k,uvUtils_E);uvUtils_U(uvUtils_v,uvUtils_y[0],uvUtils_y[1],f,uvUtils_Y,uvUtils_,uvUtils_k),uvUtils_U(uvUtils_x,uvUtils_P[0],uvUtils_y[1],f,uvUtils_Y,uvUtils_,uvUtils_k),uvUtils_U(uvUtils_A,uvUtils_y[0],uvUtils_P[1],f,uvUtils_Y,uvUtils_,uvUtils_k),(0,vec3.f)(uvUtils_x,uvUtils_x,uvUtils_v),(0,vec3.i)(uvUtils_x,uvUtils_x,.5),(0,vec3.f)(uvUtils_A,uvUtils_A,uvUtils_v),(0,vec3.i)(uvUtils_A,uvUtils_A,.5),(0,vec3.g)(uvUtils_v,uvUtils_v,uvUtils_x),(0,vec3.g)(uvUtils_v,uvUtils_v,uvUtils_A);const l=uvUtils_y[0]%I,h=uvUtils_y[1]%I,p=uvUtils_y[0]-l,u=uvUtils_y[1]-h;for(let o=0;o<i.length;o+=3){(0,vec3.s)(uvUtils_V,i[o],i[o+1],i[o+2]);const e=o/3,m=4*e;t[m]=((0,vec3.j)(uvUtils_Y,uvUtils_V)-p)/I,t[m+1]=((0,vec3.j)(uvUtils_,uvUtils_V)-u)/I,t[m+2]=p/I,t[m+3]=u/I;const a=9*e;for(let t=0;t<3;t++)s[a+t]=uvUtils_v[t],s[a+t+3]=uvUtils_x[t],s[a+t+6]=uvUtils_A[t]}}const uvUtils_E=(0,vec3f64.c)(),uvUtils_V=(0,vec3f64.c)(),uvUtils_F=(0,plane/* create */.vt)(),uvUtils_Y=(0,vec3f64.c)(),uvUtils_=(0,vec3f64.c)(),uvUtils_k=(0,vec3f64.c)(),uvUtils_y=(0,vec2f64.a)(),uvUtils_P=(0,vec2f64.a)(),uvUtils_v=(0,vec3f64.c)(),uvUtils_x=(0,vec3f64.c)(),uvUtils_A=(0,vec3f64.c)();function uvUtils_G(t,o,s,e,a,l){null!=a?(a.basisMatrixAtPosition(l,uvUtils_O),(0,vec3.s)(uvUtils_S,uvUtils_O[0],uvUtils_O[1],uvUtils_O[2]),(0,vec3.s)(uvUtils_d,uvUtils_O[4],uvUtils_O[5],uvUtils_O[6]),(0,vec3.s)(uvUtils_q,uvUtils_O[8],uvUtils_O[9],uvUtils_O[10])):((0,vec3.s)(uvUtils_S,1,0,0),(0,vec3.s)(uvUtils_d,0,1,0),(0,vec3.s)(uvUtils_q,0,0,1));const h=(0,plane/* normal */.qb)(t);(0,vec3.j)(h,uvUtils_q)<0&&(0,vec3.i)(h,h,-1),(0,vec3.c)(e,h);const p=(0,vec3.j)(h,uvUtils_d),u=(0,vec3.j)(h,uvUtils_S);Math.abs(p)>Math.abs(u)?((0,vec3.q)(o,uvUtils_S,h,-u),(0,vec3.n)(o,o),(0,vec3.b)(s,o,h),(0,vec3.n)(s,s),(0,vec3.i)(s,s,-1)):((0,vec3.q)(s,uvUtils_d,h,-p),(0,vec3.n)(s,s),(0,vec3.b)(o,s,h),(0,vec3.n)(o,o))}const uvUtils_O=(0,mat4f64.a)(),uvUtils_S=(0,vec3f64.c)(),uvUtils_d=(0,vec3f64.c)(),uvUtils_q=(0,vec3f64.c)();function uvUtils_w(t,o){(0,vec3.s)(uvUtils_D,0,0,0);for(let s=0;s<o.length-3;s+=3)uvUtils_D[0]+=o[s],uvUtils_D[1]+=o[s+1],uvUtils_D[2]+=o[s+2];(0,vec3.i)(t,uvUtils_D,1/(o.length/3-1))}const uvUtils_D=(0,vec3f64.c)();function uvUtils_U(t,o,s,n,e,m,a){(0,vec3.s)(t,o*e[0]+s*m[0]+n*a[0],o*e[1]+s*m[1]+n*a[1],o*e[2]+s*m[2]+n*a[2])}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js + 2 modules
var ColorMaterial = __webpack_require__(32504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PatternStyle.js
var PatternStyle = __webpack_require__(1563);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js
var TriangleMaterial = __webpack_require__(52873);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/Pattern.glsl.js
var Pattern_glsl = __webpack_require__(10068);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PatternTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PatternTechnique_j extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,PatternTechnique_j.shader.get().build(this.configuration),PatternTechnique_E)}_setPipelineState(e,o){const r=this.configuration,i=e===TransparencyPassType/* TransparencyPassType */.y.NONE,s=e===TransparencyPassType/* TransparencyPassType */.y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:r.output===ShaderOutput/* ShaderOutput */.V.Color||r.output===ShaderOutput/* ShaderOutput */.V.Alpha?i?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(e):null,culling:(0,renderState/* cullingParams */.Xt)(r.cullFace),depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(e)},depthWrite:i?r.writeDepth?renderState/* defaultDepthWriteParams */.kn:null:(0,OrderIndependentTransparency/* oitDepthWrite */.XO)(e),colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:r.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:r.hasOccludees?o?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:i||s?r.polygonOffset?PatternTechnique_C:null:(0,OrderIndependentTransparency/* getOITPolygonOffset */.aB)(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}PatternTechnique_j.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(Pattern_glsl.P,(()=>__webpack_require__.e(/* import() */ 4848).then(__webpack_require__.bind(__webpack_require__, 54848))));const PatternTechnique_C={factor:1,units:1};class PatternTechnique_N extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.writeDepth=!0,this.hasOccludees=!1,this.enableOffset=!0,this.multipassEnabled=!1,this.cullAboveGround=!1,this.vvColor=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],PatternTechnique_N.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],PatternTechnique_N.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:PatternStyle/* Style */.O.COUNT})],PatternTechnique_N.prototype,"style",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],PatternTechnique_N.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"polygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"patternSpacing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"lineWidth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],PatternTechnique_N.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PatternTechnique_N.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PatternTechnique_N.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PatternTechnique_N.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],PatternTechnique_N.prototype,"vvOpacity",void 0);const PatternTechnique_E=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.COLOR,3],[VertexAttribute/* VertexAttribute */.r.UVMAPSPACE,4],[VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE,5],[VertexAttribute/* VertexAttribute */.r.BOUNDINGRECT,6]]);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/PatternMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PatternMaterial_b extends TriangleMaterial/* TriangleMaterial */.W{constructor(t){super(t,new PatternMaterial_P),this.supportsEdges=!0,this._vertexAttributeLocations=PatternTechnique_E,this._configuration=new PatternTechnique_N}getConfiguration(t,e){return this._configuration.output=t,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.style=this.parameters.style,this._configuration.patternSpacing=this.parameters.patternSpacing,this._configuration.lineWidth=this.parameters.lineWidth,this._configuration.draped=this.parameters.draped,this._configuration.transparencyPassType=e.transparencyPassType,this._configuration.enableOffset=e.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.multipassEnabled=e.multipassEnabled,this._configuration.cullAboveGround=e.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration}produces(t,e){if(e===ShaderOutput/* ShaderOutput */.V.Color||e===ShaderOutput/* ShaderOutput */.V.Alpha||e===ShaderOutput/* ShaderOutput */.V.Highlight||e===ShaderOutput/* ShaderOutput */.V.Depth&&this.parameters.writeLinearDepth){if(t===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)return!0;if(e===ShaderOutput/* ShaderOutput */.V.Highlight)return t===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL;return t===(this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL)}return!1}createGLMaterial(t){return new PatternMaterial_E(t)}createBufferWriter(){const t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec4f(VertexAttribute/* VertexAttribute */.r.UVMAPSPACE);return this.parameters.draped||t.mat3f(VertexAttribute/* VertexAttribute */.r.BOUNDINGRECT),this.parameters.vvColor?t.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):t.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR),new PatternMaterial_O(t)}}class PatternMaterial_E extends GLMaterial/* default */.A{_updateParameters(t){return this.ensureTechnique(PatternTechnique_j,t)}_updateOccludeeState(t){t.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:t.hasOccludees})}beginSlot(t){return this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||this._updateOccludeeState(t),this._updateParameters(t)}}class PatternMaterial_O extends DefaultBufferWriter/* DefaultBufferWriter */.Z{write(t,i,s,a,o){for(const n of this.vertexBufferLayout.fields.keys()){const h=s.attributes.get(n),c=h?.indices;if(h&&c)switch(n){case VertexAttribute/* VertexAttribute */.r.UVMAPSPACE:{(0,Util/* assert */.vA)(4===h.size);const t=a.getField(n,BufferView/* BufferViewVec4f */.Eq);t&&(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(h,t,o);break}case VertexAttribute/* VertexAttribute */.r.BOUNDINGRECT:{(0,Util/* assert */.vA)(9===h.size);const r=a.getField(n,BufferView/* BufferViewMat3f */.jZ);r&&this.writeBoundingRect(h,t,r,o);break}default:(0,bufferWriterUtils/* writeDefaultAttribute */.zC)(n,h,t,i,a,o)}}}writeBoundingRect(t,e,r,i){const{data:s,indices:a}=t,o=e,n=r.typedBuffer,h=r.typedBufferStride,u=a.length;i*=h;for(let l=0;l<u;++l){const t=9*a[l],e=s[t],r=s[t+1],u=s[t+2];n[i]=o[0]*e+o[4]*r+o[8]*u+o[12],n[i+1]=o[1]*e+o[5]*r+o[9]*u+o[13],n[i+2]=o[2]*e+o[6]*r+o[10]*u+o[14];for(let a=3;a<9;++a)n[i+a]=s[t+a];i+=h}}}class PatternMaterial_P extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.color=(0,vec4f64.f)(1,1,1,1),this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.hasOccludees=!1,this.style=PatternStyle/* Style */.O.Cross,this.patternSpacing=10,this.lineWidth=1,this.draped=!0}}

;// ../node_modules/@arcgis/core/views/3d/layers/support/patternUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function patternUtils_s(e,r){const a=e?.pattern??null;return null==a?new ColorMaterial/* ColorMaterial */.v(r):"none"===a.style||"solid"===a.style?("none"===a.style&&(r.color=(0,vec4f64.f)(0,0,0,0),r.forceTransparentMode=!0),new ColorMaterial/* ColorMaterial */.v(r)):(r.style=patternUtils_l(a.style),new PatternMaterial_b(r))}function patternUtils_l(t){switch(t){case"horizontal":return PatternStyle/* Style */.O.Horizontal;case"vertical":return PatternStyle/* Style */.O.Vertical;case"cross":return PatternStyle/* Style */.O.Cross;case"forward-diagonal":return PatternStyle/* Style */.O.ForwardDiagonal;case"backward-diagonal":return PatternStyle/* Style */.O.BackwardDiagonal;case"diagonal-cross":return PatternStyle/* Style */.O.DiagonalCross;default:return}}function patternUtils_c(t){return t.material instanceof PatternMaterial_b&&!t.material.parameters.draped}function patternUtils_u(t,e){if(patternUtils_c(t)){const n=t.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,o=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.UVMAPSPACE).data,i=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.BOUNDINGRECT).data;uvUtils_M(o,i,n,e)}}function patternUtils_m(t,r,a,n,o){const i=ElevationAligners_u(t,r,a,n,o),s=t.stageObject.geometries;for(const e of s)patternUtils_u(e,o);return i}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPolygonFillSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DPolygonFillSymbolLayer_z=["polyline","polygon","extent"],Graphics3DPolygonFillSymbolLayer_H=new FastSymbolUpdates/* ConvertOptions */.wI({size:!1,color:!0,rotation:!1,opacity:!1});class Graphics3DPolygonFillSymbolLayer_N extends Graphics3DSymbolLayer_h{constructor(e,t,i,r){super(e,t,i,r),this._needsUV=!1}async doLoad(){this._fastUpdates=(0,FastSymbolUpdates/* initFastSymbolUpdatesState */.s_)(this._context.renderer,Graphics3DPolygonFillSymbolLayer_H)}_createMaterials(){if(this._materials.length>0)return;const e=this.symbolLayer?.material?.color,i=this._getCombinedOpacityAndColor(e);this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill]=patternUtils_s(this.symbolLayer,{color:i,forceTransparentMode:this.needsDrivenTransparentPass,polygonOffset:!1,hasVertexColors:!0,writeLinearDepth:!0,draped:this.draped,hasSlicePlane:this._context.slicePlaneEnabled,...this._fastUpdates?.materialParameters}),this._needsUV=this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill]instanceof PatternMaterial_b;const r=this.symbolLayer.outline;if(this._isValidOutline(r)){const e=(0,lineStippleUtils/* getStipplePatternForLinePattern */.Xq)(r.pattern);this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]=new RibbonLineMaterial/* RibbonLineMaterial */.W({width:(0,screenUtils/* pt2px */.Lz)(r.size),color:this._getOutlineColor(),hasPolygonOffset:!0,hasSlicePlane:this._context.slicePlaneEnabled,isClosed:!0,stipplePattern:e,cap:lineUtils_n(r.patternCap||"butt")})}this._context.stage.addMany(this._materials)}_isValidOutline(e){return null!=e?.size&&e.size>0&&null!=e.color&&(null==e.pattern||"style"!==e.pattern.type||"none"!==e.pattern.style)}destroy(){super.destroy(),this._context.stage.removeMany(this._materials),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Graphics3DPolygonFillSymbolLayer_z,this.symbolLayer.type))return null;const i=this._getVertexOpacityAndColor(e.renderingInfo,255),r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus("on-the-ground"===r.mode),this._createMaterials(),this.draped?this._createAsOverlay(t,i):this._createAs3DShape(t,i,r)}applyRendererDiff(e,t){for(const i in e.diff){if("visualVariables"!==i)return interfaces_e.RecreateSymbol;if(!(0,FastSymbolUpdates/* updateFastSymbolUpdatesState */.J_)(this._fastUpdates,t,Graphics3DPolygonFillSymbolLayer_H))return interfaces_e.RecreateSymbol;this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill]?.setParameters(this._fastUpdates.materialParameters)}return interfaces_e.FastUpdate}layerOpacityChanged(){if(null!=this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill]){const e=this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill].parameters.color,t=this.symbolLayer?.material?.color,i=this._getCombinedOpacity(t);this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill].setParameters({color:[e[0],e[1],e[2],i],forceTransparentMode:this.needsDrivenTransparentPass})}if(null!=this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]){const e=this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline].parameters.color;this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline].setParameters({color:[e[0],e[1],e[2],this._getOutlineOpacity()]})}}layerElevationInfoChanged(e,t,i){const r=this._elevationContext.mode,s=(0,elevationAlignmentUtils/* elevationModeChangeUpdateType */.I2)(Graphics3DPolygonFillSymbolLayer_N.elevationModeChangeTypes,i,r);if(s!==elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE)return s;const o=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(r);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>o))}slicePlaneEnabledChanged(){if(this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]){const e={hasSlicePlane:this._context.slicePlaneEnabled};this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline].setParameters(e)}return!0}physicalBasedRenderingChanged(){return!0}_createAs3DShape(e,t,i){const r=(0,polygonUtils/* geometryAsPolygon */.dE)(e.geometry);if(!r)return null;const s=polygon_p(r,this._context.elevationProvider,this._context.renderCoordsHelper,i),o=new Graphics3DPolygonFillSymbolLayer_k(s,t,this._context.layer.uid,e.uid),n=o.renderData.position.length/3;if(this._needsUV&&(o.uvMapSpace=(0,FloatArray/* newFloatArray */.oe)(4*n,!0),o.boundingRect=(0,DoubleArray/* newDoubleArray */.jh)(9*n,!0),uvUtils_M(o.uvMapSpace,o.boundingRect,o.renderData.position,this._context.renderCoordsHelper)),o.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(o),this._createAs3DShapeFill(e,o),this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]&&this._createAs3DShapeOutline(o),this._logGeometryCreationWarnings(o.renderData,r.rings,"rings","FillSymbol3DLayer"),0===o.outGeometries.length)return null;const a=new Object3D/* Object3D */.B({geometries:o.outGeometries,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:e.uid}),c=new Graphics3DObject3DGraphicLayer_p(this,a,o.outGeometries,null,null,patternUtils_m,i);return c.alignedSampledElevation=o.renderData.sampledElevation,c.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(i.mode),c}_createAs3DShapeFill(e,t){const i=t.renderData.polygons;for(const{position:r,mapPositions:a,holeIndices:l,index:p,count:u}of i){if(null!=this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(Graphics3DPolygonFillSymbolLayer_W),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Graphics3DPolygonFillSymbolLayer_W,a),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Graphics3DPolygonFillSymbolLayer_W,this._context.clippingExtent)))continue;const i=(0,polygonUtils/* createIndices3D */.v7)(a,l,this._context.elevationProvider.spatialReference);if(0===i.length)continue;const d=this._fastUpdates?.visualVariables.color,m=(0,polygonUtils/* createColorGeometry */.a4)({material:this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill],indices:i,mapPositions:a,attributeData:{position:r,color:d?null:t.color,colorFeature:d?(0,FastSymbolUpdates/* getAttributeValue */.ul)(d.field,e):null,uvMapSpace:this._needsUV?(0,FloatArray/* floatSubArray */.AK)(t.uvMapSpace,4*p,4*u):null,boundingRect:this._needsUV?(0,DoubleArray/* doubleSubArray */.l5)(t.boundingRect,9*p,9*u):null,objectAndLayerIdColor:t.objectAndLayerIdColor}});t.outGeometries.push(m)}}_createAs3DShapeOutline(e){if(null==this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline])return;const t=e.renderData.outlines;for(const{mapPositions:i,position:r}of t){if(null!=this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(Graphics3DPolygonFillSymbolLayer_W),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Graphics3DPolygonFillSymbolLayer_W,i),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Graphics3DPolygonFillSymbolLayer_W,this._context.clippingExtent)))continue;const t=(0,line/* createGeometry */.t)(this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline],{overlayInfo:null,removeDuplicateStartEnd:!0,mapPositions:i,attributeData:{position:r}},e.objectAndLayerIdColor);e.outGeometries.push(t)}}_createAsOverlay(e,t){const i=(0,polygonUtils/* geometryAsPolygon */.dE)(e.geometry);if(null==i)return null;this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill].renderPriority=this._renderPriority+this._renderPriorityStep/2,null!=this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]&&(this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline].renderPriority=this._renderPriority);const r=polygon_c(i,this._context.overlaySR),o=new Graphics3DPolygonFillSymbolLayer_q(r,t,this._context.layer.uid,e.uid),n=o.renderData.position.length/3;return this._needsUV&&(o.uvMapSpace=(0,FloatArray/* newFloatArray */.oe)(4*n,!0),uvUtils_T(o.uvMapSpace,o.renderData.position,this._context.overlaySR,this._context.graphicsCoreOwner.view.state.viewingMode)),o.outBoundingBox=(0,aaBoundingBox/* empty */.Ie)(),o.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(o),this._createAsOverlayFill(e,o),this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline]&&this._createAsOverlayOutline(o),this._logGeometryCreationWarnings(o.renderData,i.rings,"rings","FillSymbol3DLayer"),0===o.outGeometries.length?null:new Graphics3DDrapedGraphicLayer_u(this,o.outGeometries,o.outBoundingBox,this._context.drapeSourceRenderer)}_createAsOverlayFill(e,t){const r=t.renderData.polygons;for(const{position:l,holeIndices:c,index:p,count:u}of r){const r=(0,aaBoundingBox/* empty */.Ie)(Graphics3DPolygonFillSymbolLayer_W);if((0,aaBoundingBox/* expandWithBuffer */.Hq)(r,l),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(r,this._context.clippingExtent))continue;const d=(0,earcut.e)(l,c,3);if(0===d.length)continue;(0,aaBoundingBox/* expandWithAABB */.RF)(t.outBoundingBox,r);const m=this._fastUpdates?.visualVariables.color,y=(0,polygonUtils/* createColorGeometry */.a4)({material:this._materials[Graphics3DPolygonFillSymbolLayer_J.Fill],indices:d,attributeData:{position:l,color:m?null:t.color,colorFeature:m?(0,FastSymbolUpdates/* getAttributeValue */.ul)(m.field,e):null,uvMapSpace:this._needsUV?(0,FloatArray/* floatSubArray */.AK)(t.uvMapSpace,4*p,4*u):null,objectAndLayerIdColor:t.objectAndLayerIdColor}});t.outGeometries.push(new RenderGeometry/* RenderGeometry */.$(y,t))}}_createAsOverlayOutline(e){if(null==this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline])return;const t=e.renderData.outlines;for(let i=0;i<t.length;++i){const{position:r}=t[i];if((0,aaBoundingBox/* empty */.Ie)(Graphics3DPolygonFillSymbolLayer_W),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Graphics3DPolygonFillSymbolLayer_W,r),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Graphics3DPolygonFillSymbolLayer_W,this._context.clippingExtent))continue;(0,aaBoundingBox/* expandWithAABB */.RF)(e.outBoundingBox,Graphics3DPolygonFillSymbolLayer_W);const l=(0,line/* createGeometry */.t)(this._materials[Graphics3DPolygonFillSymbolLayer_J.Outline],{overlayInfo:{spatialReference:this._context.overlaySR,renderCoordsHelper:this._context.renderCoordsHelper},removeDuplicateStartEnd:!0,attributeData:{position:r}},e.objectAndLayerIdColor);e.outGeometries.push(new RenderGeometry/* RenderGeometry */.$(l,e))}}_getOutlineOpacity(){const e=this.symbolLayer?.outline?.color;return(this.draped?1:this._getLayerOpacity())*(null!=e?e.a:0)}_getOutlineColor(){const t=this.symbolLayer?.outline?.color,i=this._getOutlineOpacity();return (0,graphicUtils/* mixinColorAndOpacity */.$C)(null!=t?Color/* default */.A.toUnitRGB(t):null,i)}test(){return{...super.test(),createAsOverlay:(e,t)=>this._createAsOverlay(e,t),createAs3DShape:(e,t,i)=>this._createAs3DShape(e,t,i)}}}Graphics3DPolygonFillSymbolLayer_N.elevationModeChangeTypes={definedChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE,staysOnTheGround:elevationAlignmentUtils/* SymbolUpdateType */.uw.NONE,onTheGroundChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE};const Graphics3DPolygonFillSymbolLayer_W=(0,aaBoundingBox/* create */.vt)();class Graphics3DPolygonFillSymbolLayer_k extends polygonUtils/* PolygonCreationDataBase */.JQ{constructor(e,t,i,r){super(e,i,r),this.color=t}}class Graphics3DPolygonFillSymbolLayer_q extends polygonUtils/* PolygonCreationDataBase */.JQ{constructor(e,t,i,r){super(e,i,r),this.color=t}}var Graphics3DPolygonFillSymbolLayer_J;!function(e){e[e.Fill=0]="Fill",e[e.Outline=1]="Outline"}(Graphics3DPolygonFillSymbolLayer_J||(Graphics3DPolygonFillSymbolLayer_J={}));

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/LabelParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class LabelParameters_c{constructor(c,i="center",r=!1,n=(0,vec2f64.a)(),a=(0,vec4f64.f)(0,0,0,-1),f="world",h=(0,vec3f64.c)(),o=0){this.verticalOffset=c,this.anchor=i,this.hasLabelVerticalOffset=r,this.screenOffset=n,this.centerOffset=a,this.centerOffsetUnits=f,this.translation=h,this.elevationOffset=o}}class LabelParameters_i{constructor(s,e="center",c="center",i=null,r=(0,vec2f64.a)()){this.placement=s,this.horizontalPlacement=e,this.verticalPlacement=c,this.text=i,this.displaySize=r}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/fontUtils.js
var fontUtils = __webpack_require__(72777);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextRenderParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class TextRenderParameters_s{constructor(o){this.definition=o,this.key=JSON.stringify(o),this.haloSize=Math.round(o.halo.size),this.textStyle=this._colorToRGBA(o.color),this.haloStyle=this._colorToRGB(o.halo.color),this.backgroundStyle=0!==o.background.color[3]?this._colorToRGBA(o.background.color):null}fontString(o){const t=this.definition.font,e="sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji";return`${t.style} ${t.weight} ${o}px ${t.family}, ${e}`}setFontProperties(o,t){o.font=this.fontString(t),o.textAlign="left",o.textBaseline="alphabetic"}_colorToRGB(o){return`rgb(${o.slice(0,3).map((o=>Math.floor(255*o))).toString()})`}_colorToRGBA(o){return`rgba(${o.slice(0,3).map((o=>Math.floor(255*o))).toString()},${o[3]})`}static async fromSymbol(a,c){const f=a?.material?.color,m=Color/* default */.A.toUnitRGBA(f)??vec4f64.Z,g=null!=a.size?(0,screenUtils/* pt2px */.Lz)(a.size):12,u=a.lineHeight,h=null!=a.background?Color/* default */.A.toUnitRGBA(a.background.color):vec4f64.Z,d={family:a.font?.family??"sans-serif",decoration:a.font?.decoration??"none",weight:a.font?.weight??"normal",style:a.font?.style??"normal"},y=a.halo,b=null!=y?.color&&y.size>0?{size:(0,screenUtils/* pt2px */.Lz)(y.size),color:Color/* default */.A.toUnitRGBA(y.color)}:{size:0,color:vec4f64.Z},p=new TextRenderParameters_s({color:m,size:g,background:{color:h,padding:null!=a.background?[.65*g,.5*g]:[0,0],borderRadius:null!=a.background?g*(6/16):0},lineSpacingFactor:u,font:d,halo:b,pixelRatio:c});if(a.font){let o=!1;const i=p.fontString(g);try{o=(await document.fonts.load(i)).some((o=>!(0,fontUtils/* isCachedFontFace */.NZ)(o)))}catch(S){Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.TextRenderParameters").warnOnce(`Failed to preload font '${i}'. Some text symbology may be rendered using the default browser font.`)}if(!o&&!TextRenderParameters_l.has(a.font.family))try{await (0,fontUtils/* loadFont */.Al)(a.font)}catch(S){}}return p}}const TextRenderParameters_l=new Set(["Arial","Times New Roman","Courier New","serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/uid.js
var uid = __webpack_require__(65061);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4.js
var vec4 = __webpack_require__(25102);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js
var testUtils = __webpack_require__(53834);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js
var textureUtils = __webpack_require__(84147);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var webgl_Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureAtlas.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const TextTextureAtlas_b=4096;let TextTextureAtlas_j=class extends Accessor/* default */.A{constructor(t){super(t),this.type=ContentObjectType/* ContentObjectType */.X.Texture,this.id=(0,uid/* generateUID */.L)(),this.events=new Evented/* default */.A,this._glTexture=null,this._atlas=new TextTextureAtlas_k(256,256),this._needsRepack=!1,this._canRepack=!0,this._elementsToRender=new Map,this._elements=new Map,this._stageObjects=new Map,this.updating=!1}initialize(){this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","textAtlasCanvas"),this._canvas.setAttribute("style","display:none"),this._ctx=this._canvas.getContext("2d"),this._stage=this.view._stage,this._stage.add(this),this._updateCanvasElementSize(this._atlas),this._reset()}unload(){this._glTexture=(0,maybe/* disposeMaybe */.WD)(this._glTexture),this.updating=!1,this.events.emit("unloaded")}get glTexture(){return this._glTexture}static get maxSize(){return TextTextureAtlas_S=testUtils/* textTextureAtlas */.G.stableRendering?TextTextureAtlas_R:0,[TextTextureAtlas_b-TextTextureAtlas_R-TextTextureAtlas_S,TextTextureAtlas_b-TextTextureAtlas_R-TextTextureAtlas_S-TextTextureAtlas_A]}load(t){if(this._glTexture)return this._glTexture;const e=new TextureDescriptor/* TextureDescriptor */.R;return e.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.samplingMode=enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR,e.hasMipmap=!0,e.preMultiplyAlpha=!0,e.maxAnisotropy=t.parameters.maxMaxAnisotropy,this._glTexture=new webgl_Texture/* Texture */.g(t,e,this._canvas),this._frameWorker=this.view.resourceController.scheduler.registerTask(Scheduler/* TaskPriority */.W6.TEXT_TEXTURE_ATLAS,this),this.setDirty(),this._glTexture}dispose(){this._elements.clear(),this._elementsToRender.clear(),this._frameWorker=(0,maybe/* removeMaybe */.xt)(this._frameWorker),this._glTexture&&(this._stage.remove(this),this._glTexture=(0,maybe/* disposeMaybe */.WD)(this._glTexture)),this._canvas.width=0,this._canvas.height=0,this._canvas=null,this._ctx=null}_updateCanvasElementSize(t){this._canvas.setAttribute("width",t.width.toString()),this._canvas.setAttribute("height",t.height.toString())}_resizeAtlas(t,e){const{width:s,height:i}=this._atlas;s===t&&i===e||(this._atlas.width=t,this._atlas.height=e,this._glTexture?.resize(t,e),this._glTexture?.updateData(0,0,0,s,i,this._canvas),this._updateCanvasElementSize(this._atlas),this._elements.forEach((t=>{const e=this._stageObjects.get(t.textRenderer.key);e?.forEach((e=>TextTextureAtlas_y(e,t)))})),this._reset())}_reset(){this._elementsToRender.clear(),this._atlas.reset(),this._needsRepack=!0,this.setDirty()}_addAtlasElement(t,e,s,i){const r=this._atlas;if(r.width<s||r.height<i)return!1;let n=r.cursors.get(i);if(!n){if(r.height<r.nextY+i)return!1;n=[new TextTextureAtlas_E(r.nextY)],r.cursors.set(i,n),r.nextY+=i}let h=n.find((t=>r.width>=t.x+s));if(null==h){if(r.height<r.nextY+i)return!1;h=new TextTextureAtlas_E(r.nextY),r.nextY+=i,n.push(h)}return t.setNewPosition(h),this._elements.set(e,t),this._elementsToRender.set(e,t),h.x+=s,!0}_ensureStageObjects(t){const e=this._stageObjects.get(t);if(e)return e;const s=new Set;return this._stageObjects.set(t,s),s}_addStageObject(t,e){this._ensureStageObjects(t).add(e)}_removeStageObject(t,e){const s=this._stageObjects.get(t);s?.delete(e)&&(e.geometries[0].setAttributeData(VertexAttribute/* VertexAttribute */.r.SIZE,[0,0]),e.geometryVertexAttributeUpdated(e.geometries[0],VertexAttribute/* VertexAttribute */.r.SIZE),this._elementsToRender.delete(t))}_processAddition(t){const e=t.textRenderer.key;if(this._needsRepack)return void this._elements.set(e,t);const s=this._atlas,i=t.textRenderer.renderedWidth,r=t.textRenderer.renderedHeight,n=i+TextTextureAtlas_R,h=r+TextTextureAtlas_R+TextTextureAtlas_A;if(!this._addAtlasElement(t,e,n,h)){if(this._canRepack)this._reset();else if(s.width<n){const t=Math.min((0,textureUtils/* applyTextureResizeModulo */.Mv)(Math.max(n,1.5*s.width)),TextTextureAtlas_b);this._resizeAtlas(t,s.height)}else{const t=s.nextY+h,e=Math.min((0,textureUtils/* applyTextureResizeModulo */.Mv)(Math.max(t,1.5*s.height)),TextTextureAtlas_b);if(e>s.height)this._resizeAtlas(s.width,e);else if(s.width<TextTextureAtlas_b){const t=Math.min((0,textureUtils/* applyTextureResizeModulo */.Mv)(1.5*s.width),TextTextureAtlas_b);this._resizeAtlas(t,s.height)}}this._elements.set(e,t)}}_renderElement(t){const e=t.commitNewPosition();this._ctx.clearRect(e[0]-TextTextureAtlas_R,e[1]-TextTextureAtlas_R,t.textRenderer.renderedWidth+2*TextTextureAtlas_R,t.textRenderer.renderedHeight+2*TextTextureAtlas_R),t.textRenderer.render(this._ctx,e[0],e[1]);const s=this._stageObjects.get(t.textRenderer.key);s?.forEach((e=>TextTextureAtlas_y(e,t)))}get running(){return this.updating}runTask(t){if(null==this._glTexture)return Scheduler/* Task */.YZ.YIELD;for(;this._needsRepack&&(this._canRepack||this._atlas.height<TextTextureAtlas_b&&this._atlas.height<TextTextureAtlas_b);){this._canRepack=this._needsRepack=!1;const e=this._elements;this._elements=new Map,e.forEach((t=>this._processAddition(t))),t.madeProgress()}if(this._elementsToRender.size>0){for(const[e,s]of this._elementsToRender){if(t.done)break;this._renderElement(s),this._elementsToRender.delete(e),t.madeProgress()}this._glTexture.setData(this._canvas)}this.updating=this._elementsToRender.size>0}addTextTexture(t,e){const s=t.key;this._addStageObject(s,e);let i=this._elements.get(s);null==i&&(i=new TextTextureAtlas_O(this._atlas,t),this._processAddition(i),this.setDirty()),TextTextureAtlas_v(e,i),TextTextureAtlas_y(e,i)}removeTextTexture(t,e){const s=t.key;if(!this._elements.get(s))return;this._removeStageObject(s,e);const i=this._stageObjects.get(s);i&&0!==i.size||this._elements.delete(s),0===i?.size&&this._stageObjects.delete(s),this._canRepack=!0}setDirty(){this._glTexture&&(this.updating=!0)}get test(){const{_elements:t,_stageObjects:e,_atlas:s}=this,i=this;return{elements:t,stageObjects:e,atlas:s,resizeAtlas:(t,e)=>i._resizeAtlas(t,e),run:t=>i.runTask(t)}}};function TextTextureAtlas_v(t,e){t.geometries[0].setAttributeData(VertexAttribute/* VertexAttribute */.r.SIZE,[e.textRenderer.displayWidth,e.textRenderer.displayHeight]),t.geometryVertexAttributeUpdated(t.geometries[0],VertexAttribute/* VertexAttribute */.r.SIZE)}function TextTextureAtlas_y(t,e){t.geometries[0].setAttributeData(VertexAttribute/* VertexAttribute */.r.UV0,e.uv),t.geometryVertexAttributeUpdated(t.geometries[0],VertexAttribute/* VertexAttribute */.r.UV0,!0)}(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],TextTextureAtlas_j.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean})],TextTextureAtlas_j.prototype,"updating",void 0),TextTextureAtlas_j=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.TextTextureAtlas")],TextTextureAtlas_j);const TextTextureAtlas_R=2,TextTextureAtlas_A=2;class TextTextureAtlas_O{constructor(t,e){this._atlas=t,this.textRenderer=e,this._uv=(0,vec4f64.c)(),this._newPosition=[0,0]}get uv(){if(null==this._xOffset||null==this._yOffset)return vec4f64.Z;const{renderedWidth:t,renderedHeight:e}=this.textRenderer;return (0,vec4.s)(this._uv,this._xOffset/this._atlas.width,(this._yOffset+e)/this._atlas.height,(this._xOffset+t)/this._atlas.width,this._yOffset/this._atlas.height)}setNewPosition(t){this._newPosition[0]=t.x,this._newPosition[1]=t.y}commitNewPosition(){return this._xOffset=this._newPosition[0],this._yOffset=this._newPosition[1],this._newPosition}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}}class TextTextureAtlas_k{constructor(t,e){this.width=t,this.height=e,this.cursors=new Map,this.nextY=0}reset(){this.cursors.clear(),this.nextY=TextTextureAtlas_S}}class TextTextureAtlas_E{constructor(t){this.y=t,this.x=TextTextureAtlas_S}}let TextTextureAtlas_S=0;

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextTextureFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class TextTextureFactory_i{constructor(e,n,s){this._renderer=new TextRenderer_r(e,n,s,TextTextureAtlas_j.maxSize)}get key(){return this._renderer.key}get baselineAnchorY(){return 1-this._renderer.firstRenderedBaselinePosition/this._renderer.renderedHeight}get displayWidth(){return this._renderer.displayWidth}get displayHeight(){return this._renderer.displayHeight}create(){const r=TextHelperCanvas_a(TextTextureFactory_d,this._renderer.renderedWidth,this._renderer.renderedHeight),t=r.getContext("2d");return t.save(),this._renderer.render(t,0,0),t.restore(),new Texture/* Texture */.g(r,{wrap:{s:enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,t:enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE},noUnpackFlip:!1,mipmap:!0,preMultiplyAlpha:!0})}}const TextTextureFactory_d={canvas:null};

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DTextSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DTextSymbolLayer_U=[0,0,1];class Graphics3DTextSymbolLayer_R extends Graphics3DSymbolLayer_h{constructor(e,t,n,r){super(e,t,n,r),this._elevationOptions={supportsOffsetAdjustment:!0,supportsOnTheGround:!1},this.ensureDrapedStatus(!1)}async doLoad(){if(!this._drivenProperties.size){const t=(0,graphicUtils/* validateSymbolLayerSize */.Hj)(this.symbolLayer.size);if(t)throw new core_Error/* default */.A("graphics3dtextsymbollayer:invalid-size",t)}await this._createTextRenderParameters()}async _createTextRenderParameters(){const e=this._context.graphicsCoreOwner.view.state.rasterPixelRatio;this._textRenderParameters=await TextRenderParameters_s.fromSymbol(this.symbolLayer,e)}destroy(){super.destroy()}createGraphics3DGraphic(e){const t=e.graphic,n=pointUtils_u(t.geometry);if(null==n)return this.logger.warn(`unsupported geometry type for text symbol: ${t.geometry.type}`),null;const r=this.symbolLayer.text;if(null==r||""===r)return null;const s=(0,calloutUtils/* hasCalloutSupport */.YX)(this.symbol)&&this.symbol.hasVisibleVerticalOffset()?this.symbol.verticalOffset:null;if(null!=s&&!(0,calloutUtils/* textSymbolLayerSupportsVerticalOffset */.Ie)(this.symbolLayer))return this.logger.errorOncePerTick(`Callouts and vertical offset on text symbols are currently only supported with 'center' horizontal alignment (not with '${this.symbolLayer.horizontalAlignment}' alignment)`),null;const{verticalAlignment:i}=this.symbolLayer,a=new LabelParameters_c(s);placementUtils_l(i,a.screenOffset);const c=new LabelParameters_i(a,this.symbolLayer.horizontalAlignment,placementUtils_m(i));return this._createAs3DShape(t,n,r,c)}createLabel(e,t,n,r,s){const i=e.graphic,o=pointUtils_u(i.geometry);if(null==o)return this.logger.warn(`unsupported geometry type for label: ${i.geometry.type}`),null;const l=t.text;return!l||/^\s+$/.test(l)?null:this._createAs3DShape(i,o,l,t,n,r,s)}setGraphicElevationContext(e,t,n=0){return super.setGraphicElevationContext(e,t),t.addOffsetRenderUnits(n),t}layerOpacityChanged(){return this.logger.warn("layer opacity change not yet implemented in Graphics3DTextSymbolLayer"),!1}layerElevationInfoChanged(e,t){return Graphics3DTextSymbolLayer_D(e,t,((e,t)=>{this.updateGraphicElevationContext(t,e)})),elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE}slicePlaneEnabledChanged(e,t){return Graphics3DTextSymbolLayer_D(e,t,(e=>{for(const t of e.stageObject.geometries)t.material.setParameters({hasSlicePlane:this._context.slicePlaneEnabled})})),!0}physicalBasedRenderingChanged(){return!0}get pixelRatioChanged(){return!1}updateGraphicElevationContext(e,t){const n=t.elevationContext;this.setGraphicElevationContext(e,n,null!=t.metadata?t.metadata.elevationOffset:0),t.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(n.mode)||"absolute-height"===n.mode}_defaultElevationInfoNoZ(){return Graphics3DTextSymbolLayer_T}_createAs3DShape(e,o,l,c,f=null,d=null,g=(()=>c.placement.elevationOffset)){const y=this.setGraphicElevationContext(e,new ElevationContext/* ElevationContext */.F,c.placement.elevationOffset),x="polyline"===e.geometry?.type,v=e.uid;let P=null,O=null;if(null==d){const e=placementUtils_f(c.horizontalPlacement);P=new TextTextureFactory_i(l,e,this._textRenderParameters);let n=null;if(null!=this._context.sharedResources.textures){O=this._context.sharedResources.textures.fromData(P.key,(()=>P.create())),O.texture.events.on("unloaded",(()=>n?.release()));const e=this._context.stage.renderView.textureRepository.acquire(O.texture.id);if(null==e||(0,promiseUtils/* isPromiseLike */.$X)(e))return O.release(),null;n=e}}const w=Graphics3DTextSymbolLayer_A(P,c),j={occlusionTest:!0,screenOffset:c.placement.screenOffset,anchorPosition:w,polygonOffset:!0,color:[1,1,1,1],centerOffsetUnits:c.placement.centerOffsetUnits,drawInSecondSlot:!0};if(d?j.textureId=d.id:O&&(j.textureId=O.texture.id),null!=c.placement.verticalOffset){const{screenLength:e,minWorldLength:t,maxWorldLength:r}=c.placement.verticalOffset;j.verticalOffset={screenLength:(0,screenUtils/* pt2px */.Lz)(e),minWorldLength:t||0,maxWorldLength:null!=r?r:1/0}}if(this._context.screenSizePerspectiveEnabled){const{screenSizePerspectiveSettings:e,screenSizePerspectiveSettingsLabels:t}=this._context.sharedResources,n=FontMetrics_e(this._textRenderParameters);j.screenSizePerspective=t.overrideFontHeight(n.maxHeight),j.screenSizePerspectiveAlignment=e}x&&(j.shaderPolygonOffset=1e-4),j.hasSlicePlane=this._context.slicePlaneEnabled;const z=(e,t)=>{const n=JSON.stringify(t);let r=e.get(n);return null==r&&(r=new HUDMaterial/* HUDMaterial */.R(t),e.add(n,r)),r},R=f?z(f,j):new HUDMaterial/* HUDMaterial */.R(j),D=c.placement.translation,T=P?(0,vec2f64.f)(P.displayWidth,P.displayHeight):vec2f64.Z,W=c.placement.centerOffset,H=(0,GeometryUtil/* createPointGeometry */.DJ)(R,Graphics3DTextSymbolLayer_U,D,null,T,W,[0,0],null),I=pointUtils_c(this._context,o,H,y,v);if(null==I)return null;const $=(t,n,r,s,i,o)=>{const l=g()||c.placement.elevationOffset,m=this.setGraphicElevationContext(e,n,l);return ElevationAligners_p(t,m,r,s,i,o)},k=new Graphics3DObject3DGraphicLayer_p(this,I.object,[H],null==f?[R]:null,O,$,y);k.alignedSampledElevation=I.sampledElevation,k.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(y.mode)||"absolute-height"===y.mode,k.getScreenSize=(e=(0,vec2f64.a)())=>(e[0]=P?P.displayWidth:c.displaySize[0],e[1]=P?P.displayHeight:c.displaySize[1],e);const F=new Graphics3DObjectMetadata_t(c.placement.elevationOffset,l);return k.metadata=F,pointUtils_p(k,o,this._context.elevationProvider),k}}function Graphics3DTextSymbolLayer_D(e,t,n){e&&e.forEach((e=>{const r=t(e);null!=r&&n(r,e.graphic)}))}function Graphics3DTextSymbolLayer_A(e,t){if("baseline"===t.verticalPlacement){const n=placementUtils_s[t.horizontalPlacement],s=null!=e?e.baselineAnchorY:0;return (0,vec2f64.f)(n,s)}const n=placementUtils_h(t.horizontalPlacement,t.verticalPlacement);return placementUtils_i[n]}const Graphics3DTextSymbolLayer_T={mode:"relative-to-ground",offset:0};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js + 2 modules
var WaterMaterial = __webpack_require__(42649);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/waterMaterialUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const waterMaterialUtils_e={"calm-small":{waveStrength:.005,perturbationStrength:.02,textureRepeat:12,waveVelocity:.01},"rippled-small":{waveStrength:.02,perturbationStrength:.09,textureRepeat:32,waveVelocity:.07},"slight-small":{waveStrength:.05,perturbationStrength:.07,textureRepeat:28,waveVelocity:.1},"moderate-small":{waveStrength:.075,perturbationStrength:.07,textureRepeat:24,waveVelocity:.1},"calm-medium":{waveStrength:.003125,perturbationStrength:.01,textureRepeat:8,waveVelocity:.02},"rippled-medium":{waveStrength:.035,perturbationStrength:.015,textureRepeat:12,waveVelocity:.07},"slight-medium":{waveStrength:.06,perturbationStrength:.015,textureRepeat:8,waveVelocity:.12},"moderate-medium":{waveStrength:.09,perturbationStrength:.03,textureRepeat:4,waveVelocity:.12},"calm-large":{waveStrength:.01,perturbationStrength:0,textureRepeat:4,waveVelocity:.05},"rippled-large":{waveStrength:.025,perturbationStrength:.01,textureRepeat:8,waveVelocity:.11},"slight-large":{waveStrength:.06,perturbationStrength:.02,textureRepeat:3,waveVelocity:.13},"moderate-large":{waveStrength:.14,perturbationStrength:.03,textureRepeat:2,waveVelocity:.15}};

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWaterSymbolLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DWaterSymbolLayer_U=["polyline","polygon","extent"];class Graphics3DWaterSymbolLayer_I extends Graphics3DSymbolLayer_h{constructor(e,t,r,o){super(e,t,r,o)}async doLoad(){}destroy(){super.destroy(),this._context.stage.remove(this._materials[0]),this._materials.length=0}createGraphics3DGraphic(e){const t=e.graphic;if(!this._validateGeometry(t.geometry,Graphics3DWaterSymbolLayer_U,this.symbolLayer.type))return null;const r=this.setGraphicElevationContext(t);return this.ensureDrapedStatus("on-the-ground"===r.mode),this.ensureMaterial(),this.draped?this._createAsOverlay(t):this._createAs3DShape(t,r,t.uid)}ensureMaterial(){if(this._materials[0])return;const t=new WaterMaterial/* WaterMaterialParameters */.d,r=this.symbolLayer.color;null!=r&&(t.color=Color/* default */.A.toUnitRGBA(r));const o=this._getCombinedOpacity(r,{hasIntrinsicColor:!0});t.color=[t.color[0],t.color[1],t.color[2],o],t.transparent=o<1||this.needsDrivenTransparentPass,t.waveDirection=null!=this.symbolLayer.waveDirection?Graphics3DWaterSymbolLayer_I.headingVectorFromAngle(this.symbolLayer.waveDirection):(0,vec2f64.f)(0,0);const s=this.symbolLayer.waveStrength+"-"+this.symbolLayer.waterbodySize,n=waterMaterialUtils_e[s];t.waveStrength=n.waveStrength,t.waveTextureRepeat=n.textureRepeat,t.waveVelocity=n.waveVelocity,t.flowStrength=n.perturbationStrength,t.hasSlicePlane=this._context.slicePlaneEnabled,t.isDraped=this.draped,this._materials[0]=new WaterMaterial/* WaterMaterial */.Z(t),this._context.stage.add(this._materials[0])}layerOpacityChanged(){if(null==this._materials[0])return;const e=this._materials[0].parameters.color,t=this._getCombinedOpacity(this.symbolLayer.color,{hasIntrinsicColor:!0}),r=t<1||this.needsDrivenTransparentPass;this._materials[0].setParameters({color:[e[0],e[1],e[2],t],transparent:r})}layerElevationInfoChanged(e,t,r){const o=this._elevationContext.mode,i=(0,elevationAlignmentUtils/* elevationModeChangeUpdateType */.I2)(Graphics3DWaterSymbolLayer_I.elevationModeChangeTypes,r,o);if(i!==elevationAlignmentUtils/* SymbolUpdateType */.uw.UPDATE)return i;const s=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(o);return this.updateGraphics3DGraphicElevationInfo(e,t,(()=>s))}slicePlaneEnabledChanged(){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),!0}physicalBasedRenderingChanged(){return!0}_createAs3DShape(e,t,r){const o=(0,polygonUtils/* geometryAsPolygon */.dE)(e.geometry);if(null==o)return null;const i=polygon_p(o,this._context.elevationProvider,this._context.renderCoordsHelper,t),s=i.position.length/3,n=(0,DoubleArray/* newDoubleArray */.jh)(2*s);this._createUVCoordsFromVertices(n,i.mapPositions,s,this._context.elevationProvider.spatialReference);const a=new Graphics3DWaterSymbolLayer_z(i,n,this._context.layer.uid,e.uid);if(a.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(a),this._create3DShapeGeometries(a),this._logGeometryCreationWarnings(a.renderData,o.rings,"rings","WaterSymbol3DLayer"),0===a.outGeometries.length)return null;const l=new Object3D/* Object3D */.B({geometries:a.outGeometries,castShadow:!1,layerUid:this._context.layer.uid,graphicUid:r}),c=new Graphics3DObject3DGraphicLayer_p(this,l,a.outGeometries,null,null,ElevationAligners_u,t);return c.alignedSampledElevation=a.renderData.sampledElevation,c.needsElevationUpdates=(0,elevationAlignmentUtils/* needsElevationUpdates2D */.nu)(t.mode),c}_createUVCoordsFromVertices(e,r,i,s){const a=(0,unitUtils/* getMetersPerUnitForSR */.GA)(s);(0,aaBoundingRect/* empty */.Ie)(Graphics3DWaterSymbolLayer_B);for(let t=0;t<i;t++)(0,vec2.s)(Graphics3DWaterSymbolLayer_M,r[3*t],r[3*t+1]),(0,aaBoundingRect/* expandPointInPlace */.tK)(Graphics3DWaterSymbolLayer_B,Graphics3DWaterSymbolLayer_M);(0,vec4.b)(Graphics3DWaterSymbolLayer_B,Graphics3DWaterSymbolLayer_B,a);const l=Graphics3DWaterSymbolLayer_B[0]%Graphics3DWaterSymbolLayer_I.unitSizeOfTexture,c=Graphics3DWaterSymbolLayer_B[1]%Graphics3DWaterSymbolLayer_I.unitSizeOfTexture;Graphics3DWaterSymbolLayer_V[0]=Graphics3DWaterSymbolLayer_B[0]-l,Graphics3DWaterSymbolLayer_V[1]=Graphics3DWaterSymbolLayer_B[1]-c;for(let t=0;t<i;t++)e[2*t]=(r[3*t]*a-Graphics3DWaterSymbolLayer_V[0])/Graphics3DWaterSymbolLayer_I.unitSizeOfTexture,e[2*t+1]=(r[3*t+1]*a-Graphics3DWaterSymbolLayer_V[1])/Graphics3DWaterSymbolLayer_I.unitSizeOfTexture}_create3DShapeGeometries(e){const t=e.renderData.polygons,o=e.uvCoords;for(const{count:i,index:s,position:n,mapPositions:a,holeIndices:l}of t){if(null!=this._context.clippingExtent&&((0,aaBoundingBox/* empty */.Ie)(Graphics3DWaterSymbolLayer_W),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Graphics3DWaterSymbolLayer_W,a),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Graphics3DWaterSymbolLayer_W,this._context.clippingExtent)))continue;const t=(0,earcut.e)(a,l,3);if(0===t.length)continue;const u=(0,DoubleArray/* doubleSubArray */.l5)(o,2*s,2*i),d=(0,polygonUtils/* createWaterGeometry */.SY)({material:this._materials[0],indices:t,mapPositions:a,attributeData:{position:n,uv0:u}},e.objectAndLayerIdColor);e.outGeometries.push(d)}}_createAsOverlay(e){const t=(0,polygonUtils/* geometryAsPolygon */.dE)(e.geometry);if(null==t)return null;this._materials[0].renderPriority=this._renderPriority;const r=polygon_c(t,this._context.overlaySR),o=r.position.length/3,i=(0,DoubleArray/* newDoubleArray */.jh)(2*o);this._createUVCoordsFromVertices(i,r.position,o,this._context.overlaySR);const s=new Graphics3DWaterSymbolLayer_k(r,i,this._context.layer.uid,e.uid);return s.objectAndLayerIdColor=this._context.stage.renderView?.getObjectAndLayerIdColor(s),s.outBoundingBox=(0,aaBoundingBox/* empty */.Ie)(),this._createAsOverlayWater(s),this._logGeometryCreationWarnings(s.renderData,t.rings,"rings","WaterSymbol3DLayer"),0===s.outGeometries.length?null:new Graphics3DDrapedGraphicLayer_u(this,s.outGeometries,s.outBoundingBox,this._context.drapeSourceRenderer)}_createAsOverlayWater(e){const t=e.uvCoords,o=e.renderData.polygons;for(const{position:i,holeIndices:s,index:n,count:a}of o){if((0,aaBoundingBox/* empty */.Ie)(Graphics3DWaterSymbolLayer_W),(0,aaBoundingBox/* expandWithBuffer */.Hq)(Graphics3DWaterSymbolLayer_W,i),!(0,aaBoundingBox/* intersectsClippingArea */.KG)(Graphics3DWaterSymbolLayer_W,this._context.clippingExtent))continue;(0,aaBoundingBox/* expandWithAABB */.RF)(e.outBoundingBox,Graphics3DWaterSymbolLayer_W);const o=(0,earcut.e)(i,s,3);if(0===o.length)continue;const l=(0,DoubleArray/* doubleSubArray */.l5)(t,2*n,2*a),d=(0,polygonUtils/* createWaterGeometry */.SY)({material:this._materials[0],indices:o,attributeData:{position:i,uv0:l}},e.objectAndLayerIdColor);e.outGeometries.push(new RenderGeometry/* RenderGeometry */.$(d,e))}}static headingVectorFromAngle(e){const t=(0,vec2f64.a)(),r=(0,common.t)(e);return t[0]=Math.sin(r),t[1]=Math.cos(r),t}test(){return{...super.test(),create3DShape:e=>this._createAs3DShape(e.graphic,e.elevationContext,e.graphicUid),ensureMaterial:()=>this.ensureMaterial()}}}Graphics3DWaterSymbolLayer_I.unitSizeOfTexture=100,Graphics3DWaterSymbolLayer_I.elevationModeChangeTypes={definedChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE,staysOnTheGround:elevationAlignmentUtils/* SymbolUpdateType */.uw.NONE,onTheGroundChanged:elevationAlignmentUtils/* SymbolUpdateType */.uw.RECREATE};const Graphics3DWaterSymbolLayer_V=(0,vec2f64.a)(),Graphics3DWaterSymbolLayer_B=(0,aaBoundingRect/* create */.vt)(),Graphics3DWaterSymbolLayer_M=(0,vec2f64.a)(),Graphics3DWaterSymbolLayer_W=(0,aaBoundingBox/* create */.vt)();class Graphics3DWaterSymbolLayer_z extends polygonUtils/* PolygonCreationDataBase */.JQ{constructor(e,t,r,o){super(e,r,o),this.uvCoords=t}}class Graphics3DWaterSymbolLayer_k extends polygonUtils/* PolygonCreationDataBase */.JQ{constructor(e,t,r,o){super(e,r,o),this.uvCoords=t}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolLayerFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function Graphics3DSymbolLayerFactory_c(o,e,t,i){const m=Graphics3DSymbolLayerFactory_h[o.type]?.[e.type]||Graphics3DSymbolLayerFactory_l[e.type];return m?new m(o,e,t,i):(Logger/* default */.A.getLogger("esri.views.3d.layers.graphics.Graphics3DSymbolLayerFactory").error("GraphicsLayerFactory#make",`unknown symbol type ${e.type}`),null)}const Graphics3DSymbolLayerFactory_l={icon:Graphics3DIconSymbolLayer_te,object:Graphics3DObjectSymbolLayer_pe,line:Graphics3DLineSymbolLayer_O,path:Graphics3DPathSymbolLayer_te,fill:Graphics3DPolygonFillSymbolLayer_N,extrude:$,text:Graphics3DTextSymbolLayer_R,water:Graphics3DWaterSymbolLayer_I};function Graphics3DSymbolLayerFactory_n(r,o){Graphics3DSymbolLayerFactory_l[r]=o}const Graphics3DSymbolLayerFactory_h={"mesh-3d":{fill:ve}};

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DSymbol_m extends Loadable_r{set symbol(e){this._symbol=e,e.symbolLayers.forEach(((t,r)=>{const s=this.symbolLayers[r];null!=s&&(s.symbol=e,s.symbolLayer=t)}))}get symbol(){return this._symbol}constructor(e,t,r){super(t.schedule),this._symbol=e,this._context=t,this._backgroundLayers=r,this._destroyed=!1,this.symbolLayers=new Array,this.referenced=0,this._extentPadding=0}async doLoad(e){let o=this._symbol.symbolLayers;this._extentPadding=0,this._backgroundLayers&&(o=this._backgroundLayers.concat(o));const a=o.length;for(;this.symbolLayers.length<o.length;)this.symbolLayers.push(null);this.symbolLayers.length=o.length;const l=[];for(let t=0;t<a;t++){const s=o.at(t);if(!1===s.enabled)continue;Graphics3DSymbol_p.renderPriority=1-(1+t)/a,Graphics3DSymbol_p.renderPriorityStep=1/a,Graphics3DSymbol_p.ignoreDrivers=s.ignoreDrivers;const n=Graphics3DSymbolLayerFactory_c(this.symbol,s,this._context,Graphics3DSymbol_p),y=(0,promiseUtils/* onAbortOrThrow */.NY)(e,(()=>{this.symbolLayers[t]=null,n.destroy()}));y&&l.push(y),this.symbolLayers[t]=n}if(await (0,asyncUtils/* forEach */.jJ)(this.symbolLayers,(async(e,t)=>{if(null!=e)try{await e.load(),this._extentPadding+=Math.max(this._extentPadding,e.extentPadding)}catch{this.symbolLayers[t]=null}})),l.forEach((e=>e.remove())),(0,promiseUtils/* throwIfAborted */.Te)(e),this.symbolLayers.length&&!this.symbolLayers.some((e=>!!e)))throw new Error}getSymbolLayerSize(e){const t=this.symbolLayers[e];return null!=t?t.getCachedSize():null}get extentPadding(){return this._extentPadding}get symbologySnappingSupported(){return this.symbolLayers.some((e=>e?.queryForSnapping))}createGraphics3DGraphic(e,t){const r=e.graphic,s=this.symbolLayers.map((t=>t?.createGraphics3DGraphic(e)??null)),o=this._context.arcade||this._context.featureExpressionInfoContext?.arcade?.modules||null;return new A(r,t||this,s,e.layer,o)}get complexity(){return F(this.symbolLayers.map((e=>null!=e?e.complexity:null)))}globalPropertyChanged(e,t){const r=this.symbolLayers.length;for(let s=0;s<r;s++){const r=this.symbolLayers[s],o=e=>{const t=e.layers[s];return t instanceof Graphics3DObject3DGraphicLayer_p?t:null};if(null!=r&&!r.globalPropertyChanged(e,t,o))return!1}return!0}applyRendererDiff(e,t){return this.loadStatus!==Loadable_l.LOADED?interfaces_e.RecreateSymbol:this.symbolLayers.reduce(((r,s)=>r!==interfaces_e.RecreateSymbol&&null!=s?Math.min(r,s.applyRendererDiff(e,t)):r),interfaces_e.FastUpdate)}prepareSymbolPatch(e){if(this.loadStatus===Loadable_l.FAILED)return;if("partial"!==e.diff.type)return;const t=e.diff.diff;if(!t.symbolLayers||"partial"!==t.symbolLayers.type)return;const r=t.symbolLayers.diff;this.symbolLayers.forEach(((t,s)=>{if(null==t)return;const o=r[s];if(o){const r={diff:o,graphics3DGraphicPatches:[],symbolLayerStatePatches:[]};t.prepareSymbolLayerPatch(r),e.symbolStatePatches.push(...r.symbolLayerStatePatches),r.graphics3DGraphicPatches.length&&e.graphics3DGraphicPatches.push(((e,t)=>{const o=e.layers[s];null!=o&&r.graphics3DGraphicPatches.forEach((e=>e(o,t)))}))}}))}updateGeometry(e,t){return this._updateGeometryOrTransform(e,((e,r)=>e.updateGeometry(r,t)))}updateTransform(e,t,r,s){return this._updateGeometryOrTransform(e,((e,o)=>e.updateTransform(o,t,r,s)))}_updateGeometryOrTransform(e,t){for(let r=0;r<this.symbolLayers.length;r++){const s=this.symbolLayers[r];if(null==s)continue;const o=e.layers[r];if(!o||!t(s,o))return!1}return!0}onRemoveGraphic(e){for(let t=0;t<this.symbolLayers.length;t++){const r=this.symbolLayers[t];if(null==r)continue;const s=e.layers[t];null!=s&&r.onRemoveGraphic(s)}}getFastUpdateStatus(){let e=0,t=0,r=0;return this.symbolLayers.forEach((s=>{null!=s&&(s.loadStatus===Loadable_l.LOADING?e++:s.isFastUpdatesEnabled()?r++:t++)})),{loading:e,slow:t,fast:r}}async queryForSnapping(t,r,o,a){const l=this.symbolLayers.filter(arrayUtils/* isSome */.Ru).filter((e=>null!=e.queryForSnapping)).map((e=>e.queryForSnapping(t,r,o,a))),n=await Promise.all(l);return (0,promiseUtils/* throwIfAborted */.Te)(a),n.flat()}destroy(){if(this.destroyed)console.error("Graphics3DSymbol.destroy called when already destroyed!");else{super.destroy();for(const e of this.symbolLayers)null!=e&&e.destroy();this.symbolLayers.length=0,this._destroyed=!0}}get destroyed(){return this._destroyed}}const Graphics3DSymbol_p=new Graphics3DSymbolCreationContext_s;

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DPointSymbol_s extends Graphics3DSymbol_m{constructor(r,o,t){super(r,o,t),this._calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this._calloutSymbolLayer=Graphics3DCalloutSymbolLayerFactory_e(this.symbol,o))}async doLoad(o){const a=this._calloutSymbolLayer?(0,asyncUtils/* result */.Ke)(this._calloutSymbolLayer.load()):null;try{await super.doLoad(o),(0,promiseUtils/* throwIfAborted */.Te)(o)}catch(l){throw this._calloutSymbolLayer?.abortLoad(),l}a&&await a}destroy(){super.destroy(),this._calloutSymbolLayer=(0,maybe/* destroyMaybe */.pR)(this._calloutSymbolLayer)}createGraphics3DGraphic(r,o){const t=super.createGraphics3DGraphic(r,o);if(null!=this._calloutSymbolLayer&&null!=t){const o=this._createCalloutGraphic(r);o&&t.setCalloutGraphic(o)}return t}globalPropertyChanged(r,o){return!!super.globalPropertyChanged(r,o)&&(!this._calloutSymbolLayer||this._calloutSymbolLayer.globalPropertyChanged(r,o,(r=>r.calloutLayer)))}updateGeometry(r,o){const t=super.updateGeometry(r,o);if(t&&this._calloutSymbolLayer){const t=r.calloutLayer;if(t)return this._calloutSymbolLayer.updateGeometry(t,o)}return t}_createCalloutGraphic(r){const o=r.renderingInfo;return r.renderingInfo=new Graphics3DLineCalloutSymbolLayer_w(o.renderer,o.symbol),this._calloutSymbolLayer.createGraphics3DGraphic(r)}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function Graphics3DSymbolFactory_t(t,i,n){return"point-3d"===t.type?new Graphics3DPointSymbol_s(t,i,n):new Graphics3DSymbol_m(t,i,n)}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWebStyleSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DWebStyleSymbol_i extends Loadable_r{constructor(t,r,s){super(r),this.symbol=t,this._convert=s,this.symbologySnappingSupported=!1,this.graphics3DSymbol=null,this.referenced=0}getSymbolLayerSize(t){return null!=this.graphics3DSymbol?this.graphics3DSymbol.getSymbolLayerSize(t):null}get symbolLayers(){return null!=this.graphics3DSymbol?this.graphics3DSymbol.symbolLayers:[]}get extentPadding(){return null!=this.graphics3DSymbol?this.graphics3DSymbol.extentPadding:0}async doLoad(t){const r=await this.symbol.fetchSymbol({signal:t});r.id=this.symbol.id,this.graphics3DSymbol=this._convert(r),null!=this.graphics3DSymbol&&await this.graphics3DSymbol.load()}createGraphics3DGraphic(t){return null!=this.graphics3DSymbol?this.graphics3DSymbol.createGraphics3DGraphic(t,this):null}get complexity(){return null!=this.graphics3DSymbol?this.graphics3DSymbol.complexity:P}globalPropertyChanged(t,r){return null!=this.graphics3DSymbol&&this.graphics3DSymbol.globalPropertyChanged(t,r)}applyRendererDiff(t,s){return null!=this.graphics3DSymbol?this.graphics3DSymbol.applyRendererDiff(t,s):interfaces_e.RecreateSymbol}prepareSymbolPatch(t){null!=this.graphics3DSymbol&&this.graphics3DSymbol.prepareSymbolPatch(t)}updateGeometry(t,r){return null!=this.graphics3DSymbol&&this.graphics3DSymbol.updateGeometry(t,r)}updateTransform(t,r,s,i){return this.graphics3DSymbol?.updateTransform(t,r,s,i)??!1}onRemoveGraphic(){}getFastUpdateStatus(){return null!=this.graphics3DSymbol?this.graphics3DSymbol.getFastUpdateStatus():{loading:1,fast:0,slow:0}}destroy(){null!=this.graphics3DSymbol&&this.graphics3DSymbol.destroy(),this.graphics3DSymbol=void 0,super.destroy()}get destroyed(){return void 0===this.graphics3DSymbol}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class GraphicStateTracking_e{constructor(t){this._graphicsCore=t,this._idToState=new Map,this._states=new Set;const i=t.owner.layer?.objectIdField;i?(this._getGraphicId=t=>(0,dehydratedFeatures/* getObjectId */.RW)(t,i),this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicByObjectId(t)):(this._getGraphicId=t=>t.uid,this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicById(t))}destroy(){this._idToState.clear(),this._states.forEach(((t,i)=>this.remove(i)))}add(t){const s=(0,handleUtils/* makeHandle */.hA)((()=>this.remove(t)));if(this._states.has(t))return s;const e=this._getGraphicId(t.graphic),a=this._getGraphics3DGraphicById(e);this._states.has(t)||this._states.add(t);return this._ensureStateList(e).push(t),t.displaying=null!=a&&a.isVisible(),t.isDraped=null!=a&&a.isDraped,t.tracking=!0,null!=a&&t.emit("changed"),s}remove(i){if(this._states.has(i)){if(this._idToState.size){const s=this._getGraphicId(i.graphic),e=this._idToState.get(s);e&&((0,arrayUtils/* remove */.TF)(e,i),0===e.length&&this._idToState.delete(s))}this._states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this._forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit("changed")}))}removeGraphic(t){this._forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this._forEachState(t,(t=>t.emit("changed")))}updateGraphicVisibility(t){this._forEachState(t,(i=>i.displaying=t.isVisible()))}allGraphicsDeleted(){this._states.forEach((t=>{t.displaying=!1}))}_ensureStateList(t){const i=this._idToState.get(t);if(i)return i;const s=new Array;return this._idToState.set(t,s),s}_forEachState(t,i){if(0===this._states.size||0===this._idToState.size)return;const s=this._getGraphicId(t.graphic),e=this._idToState.get(s);null!=e&&e.forEach(i)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js
var PooledRBush = __webpack_require__(4486);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let SpatialIndex2D_d=class extends Accessor/* default */.A{constructor(t){super(t),this._index=new PooledRBush/* PooledRBush */.w(9,(0,has/* default */.A)("esri-csp-restrictions")?t=>({minX:t.extent[0],minY:t.extent[1],maxX:t.extent[2],maxY:t.extent[3]}):[".extent[0]",".extent[1]",".extent[2]",".extent[3]"]),this._missing=new Set,this._boundsByFeature=new Map,this.spatialReference=null,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.updating=!1}setup(t){this._addMany(t)}destroy(){this._missing.clear(),this._index=(0,maybe/* destroyMaybe */.pR)(this._index),this._boundsByFeature.clear(),this._boundsByFeature=null}update(){this._missing.size>0&&(this._addMany(Array.from(this._missing.values())),this.updating=!1,this._missing.clear())}get updatingRemaining(){return this._missing.size}queryGraphicUIDsInExtent(t,e,s){null!=e&&e.equals(this.spatialReference)&&(SpatialIndex2D_u.minX=t[0],SpatialIndex2D_u.minY=t[1],SpatialIndex2D_u.maxX=t[2],SpatialIndex2D_u.maxY=t[3],this.update(),this._index.search(SpatialIndex2D_u,(t=>s(t.graphic.uid))))}add(t){this._missing.add(t),this.updating=!0}remove(t){if(this._missing.delete(t))return void(this.updating=this._missing.size>0);this._index.remove(t);const e=(0,dehydratedFeatures/* getObjectId */.RW)(t.graphic,this._get("objectIdField"));null!=e&&this._boundsByFeature.delete(e)}_addMany(t){if(0===t.length)return;const e=this._get("objectIdField");for(const s of t){s.computeExtent(this.spatialReference);const t=(0,dehydratedFeatures/* getObjectId */.RW)(s.graphic,e);null!=t&&this._boundsByFeature.set(t,s.extent)}this._index.load(t)}clear(){this._index.clear(),this._missing.clear(),this._boundsByFeature.clear(),this.updating=!1}forEachInBounds(t,e){SpatialIndex2D_u.minX=t[0],SpatialIndex2D_u.minY=t[1],SpatialIndex2D_u.maxX=t[2],SpatialIndex2D_u.maxY=t[3],this.update(),this._index.search(SpatialIndex2D_u,(t=>{e(t)}))}getBounds(t,e){this.update();const s=this._boundsByFeature.get(t);return s?(0,aaBoundingBox/* fromRect */.Jt)(e,s):null}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SpatialIndex2D_d.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SpatialIndex2D_d.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SpatialIndex2D_d.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SpatialIndex2D_d.prototype,"objectIdField",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SpatialIndex2D_d.prototype,"updating",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],SpatialIndex2D_d.prototype,"updatingRemaining",null),SpatialIndex2D_d=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.SpatialIndex2D")],SpatialIndex2D_d);const SpatialIndex2D_u={minX:0,minY:0,maxX:0,maxY:0};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/unitConversionUtils.js
var unitConversionUtils = __webpack_require__(97046);
;// ../node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const StageLayerElevationProvider_=1;let StageLayerElevationProvider_y=class extends(Evented/* default */.A.EventedMixin(Accessor/* default */.A)){get spatialReference(){return this.view?.spatialReference}constructor(e){super(e),this._elevationOffset=0,this._layerHandlesKey="layerHandles"}initialize(){this._renderCoordsHelper=this.view.renderCoordsHelper,this._intersectLayers=[this.stageLayer],this._intersector=(0,Intersector/* newIntersector */.hz)(this.view.state.viewingMode),this._intersector.options.store=IntersectorInterfaces/* StoreResults */.oH.MIN;const e=this._computeLayerExtent(this.spatialReference,this.stageLayer);this._zmin=e[2],this._zmax=e[5];const t=this.stageLayer.events;this.addHandles([t.on("layerObjectAdded",(({object:e})=>this._objectChanged(e))),t.on("layerObjectRemoved",(({object:e})=>this._objectChanged(e))),t.on("geometryAdded",(({object:e})=>this._objectChanged(e))),t.on("geometryRemoved",(({object:e})=>this._objectChanged(e))),t.on("attributesChanged",(({attribute:e,object:t})=>(0,VertexAttribute/* affectsGeometry */.b)(e)&&this._objectChanged(t))),t.on("transformationChanged",(e=>this._objectChanged(e)))],this._layerHandlesKey)}dispose(){this.removeHandles(this._layerHandlesKey)}elevationInfoChanged(){const e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&"on-the-ground"!==e.mode){const t=(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(this.layer.spatialReference),r=(0,unitConversionUtils/* getMetersPerUnit */.Ao)(e.unit??"meters");this._elevationOffset=(e.offset??0)*r/t}else this._elevationOffset=0}getElevation(e,t,r,s){if(StageLayerElevationProvider_x[0]=e,StageLayerElevationProvider_x[1]=t,StageLayerElevationProvider_x[2]=r,!this._renderCoordsHelper.toRenderCoords(StageLayerElevationProvider_x,s,StageLayerElevationProvider_x))return Logger/* default */.A.getLogger(this).error("could not project point for elevation alignment"),null;const n=this._elevationOffset,i=this._zmin+n,a=this._zmax+n;this._renderCoordsHelper.setAltitude(StageLayerElevationProvider_C,a,StageLayerElevationProvider_x),this._renderCoordsHelper.setAltitude(StageLayerElevationProvider_E,i,StageLayerElevationProvider_x);const l=e=>!!e.lastValidElevationBB;return this._intersector.reset(StageLayerElevationProvider_C,StageLayerElevationProvider_E,null),this._intersector.intersect(this._intersectLayers,null,StageLayerElevationProvider_,null,l),this._intersector.results.min.getIntersectionPoint(StageLayerElevationProvider_x)?this._renderCoordsHelper.getAltitude(StageLayerElevationProvider_x):null}_objectChanged(e){const t=this.spatialReference;if(!e.lastValidElevationBB||!t)return;(0,aaBoundingBox/* empty */.Ie)(StageLayerElevationProvider_j);const r=e.lastValidElevationBB;r.isEmpty()||this._expandExtent(t,r.min,r.max,StageLayerElevationProvider_j);const{min:o,max:s}=e.boundingVolumeWorldSpace;this._expandExtent(t,o,s,StageLayerElevationProvider_j),(0,aaBoundingBox/* toRect */.ES)(StageLayerElevationProvider_j,StageLayerElevationProvider_v),this._zmin=Math.min(this._zmin,StageLayerElevationProvider_j[2]),this._zmax=Math.max(this._zmax,StageLayerElevationProvider_j[5]),StageLayerElevationProvider_b.extent=StageLayerElevationProvider_v,StageLayerElevationProvider_b.spatialReference=t,this.emit("elevation-change",StageLayerElevationProvider_b),(0,vec3.c)(r.min,o),(0,vec3.c)(r.max,s)}_computeLayerExtent(e,t){return (0,aaBoundingBox/* empty */.Ie)(StageLayerElevationProvider_j),null!=e&&t.objects.forAll((t=>this._expandExtent(e,t.boundingVolumeWorldSpace.min,t.boundingVolumeWorldSpace.max,StageLayerElevationProvider_j))),StageLayerElevationProvider_j}_expandExtent(e,t,r,o){for(let s=0;s<8;++s)StageLayerElevationProvider_x[0]=1&s?t[0]:r[0],StageLayerElevationProvider_x[1]=2&s?t[1]:r[1],StageLayerElevationProvider_x[2]=4&s?t[2]:r[2],this._renderCoordsHelper.fromRenderCoords(StageLayerElevationProvider_x,StageLayerElevationProvider_x,e),(0,aaBoundingBox/* expandWithVec3 */.iT)(o,StageLayerElevationProvider_x);return o}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],StageLayerElevationProvider_y.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],StageLayerElevationProvider_y.prototype,"stageLayer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],StageLayerElevationProvider_y.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],StageLayerElevationProvider_y.prototype,"spatialReference",null),StageLayerElevationProvider_y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.support.StageLayerElevationProvider")],StageLayerElevationProvider_y);const StageLayerElevationProvider_j=(0,aaBoundingBox/* empty */.Ie)(),StageLayerElevationProvider_v=(0,aaBoundingRect/* empty */.Ie)(),StageLayerElevationProvider_b={spatialReference:null,extent:StageLayerElevationProvider_v,context:"scene"},StageLayerElevationProvider_x=(0,vec3f64.c)(),StageLayerElevationProvider_C=(0,vec3f64.c)(),StageLayerElevationProvider_E=(0,vec3f64.c)();

;// ../node_modules/@arcgis/core/views/3d/support/extentUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function extentUtils_m(l,m,u){if(null==l||null==u)return!1;let e=!0;return extentUtils_x[0]=null!=l.xmin?l.xmin:0,extentUtils_x[1]=null!=l.ymin?l.ymin:0,extentUtils_x[2]=null!=l.zmin?l.zmin:0,e=e&&n(extentUtils_x,l.spatialReference,0,m,u,0,1),extentUtils_x[0]=null!=l.xmax?l.xmax:0,extentUtils_x[1]=null!=l.ymax?l.ymax:0,extentUtils_x[2]=null!=l.zmax?l.zmax:0,e=e&&n(extentUtils_x,l.spatialReference,0,m,u,3,1),null==l.xmin&&(m[0]=-1/0),null==l.ymin&&(m[1]=-1/0),null==l.zmin&&(m[2]=-1/0),null==l.xmax&&(m[3]=1/0),null==l.ymax&&(m[4]=1/0),null==l.zmax&&(m[5]=1/0),e}function extentUtils_u(l,m,u){if(null==l||null==u)return!1;let e=!0;return extentUtils_x[0]=null!=l.xmin?l.xmin:0,extentUtils_x[1]=null!=l.ymin?l.ymin:0,extentUtils_x[2]=null!=l.zmin?l.zmin:0,e=e&&(0,projectBuffer.projectBuffer)(extentUtils_x,l.spatialReference,0,extentUtils_x,u,0,1),m[0]=extentUtils_x[0],m[1]=extentUtils_x[1],extentUtils_x[0]=null!=l.xmax?l.xmax:0,extentUtils_x[1]=null!=l.ymax?l.ymax:0,extentUtils_x[2]=null!=l.zmax?l.zmax:0,e=e&&(0,projectBuffer.projectBuffer)(extentUtils_x,l.spatialReference,0,extentUtils_x,u,0,1),m[2]=extentUtils_x[0],m[3]=extentUtils_x[1],null==l.xmin&&(m[0]=-1/0),null==l.ymin&&(m[1]=-1/0),null==l.xmax&&(m[2]=1/0),null==l.ymax&&(m[3]=1/0),e}const extentUtils_x=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/PropertiesPool.js
var PropertiesPool = __webpack_require__(30537);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js
var GridLocalOriginFactory = __webpack_require__(24734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(91080);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js + 1 modules
var WebGLLayer = __webpack_require__(54671);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/support/popupUtils.js
var popupUtils = __webpack_require__(18846);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js + 1 modules
var Point = __webpack_require__(78632);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/LabelSymbol3D.js
var LabelSymbol3D = __webpack_require__(27372);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/TextSymbol.js
var TextSymbol = __webpack_require__(42602);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/WebStyleSymbol.js
var WebStyleSymbol = __webpack_require__(75162);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var Graphics3DCore_Ae;const Graphics3DCore_je=(0,vec3f64.c)(),Le=(0,aaBoundingBox/* create */.vt)(),Graphics3DCore_Oe="esri.views.3d.layers.graphics.Graphics3DCore",Ve=Logger/* default */.A.getLogger(Graphics3DCore_Oe);let Graphics3DCore_Fe=Graphics3DCore_Ae=class extends Accessor/* default */.A{get _viewSpatialReference(){return this.owner.view.spatialReference}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new SpatialIndex2D_d({objectIdField:this.owner.layer?.objectIdField,spatialReference:this._viewSpatialReference,hasZ:!!this.hasZ,hasM:!!this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get numberOfGraphics(){return this._numberOfGraphics}get effectiveUpdatePolicy(){return null!=this.currentRenderer&&"dictionary"===this.currentRenderer.type?UpdatePolicy/* UpdatePolicy */.q.ASYNC:this._forcedUpdatePolicy??this.preferredUpdatePolicy}get featureStore(){return this._featureStore}get initializePromise(){return this._initializePromise}get scaleVisibility(){return this._scaleVisibility}get elevationAlignment(){return this._elevationAlignment}get objectStates(){return this._objectStates}get filterVisibility(){return this._filterVisibility}get updating(){return!!(this._graphicsWaitingForSymbol.size>0||this.running||this._elevationAlignment?.updating||this._scaleVisibility?.updating||this._filterVisibility?.updating||this._rendererChangeAbortController||this._elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating||this._loadingSymbols>0)}get running(){return this._pendingUpdates.size>0||!!this._spatialIndex?.updating}get suspendedOrOutsideOfView(){return this.owner.suspended||!!this.owner.suspendInfo?.outsideOfView}get updatingRemaining(){return this.updating?this._pendingUpdates.size+.1*(this._spatialIndex?.updatingRemaining||0)+.1*(this._elevationAlignment?.updatingRemaining||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,t=e?.graphics3D.minTotalNumberOfFeatures??0,i=e?.graphics3D.maxTotalNumberOfFeatures??0,r=e?.graphics3D.maxNumberOfDrawCalls??0,s=e?.graphics3D.maxTotalNumberOfVertices??0,a=this.averageSymbolComplexity,n=Math.max(1,a?.verticesPerFeature??1),o=a&&a.drawCallsPerFeature>0&&r>0?r/a.drawCallsPerFeature:i,l=Math.ceil(s/n),h=Math.max(t,Math.min(i,l,o)),d=this._get("displayFeatureLimit");return d&&d.maximumTotalNumberOfVertices===s&&d.averageSymbolComplexity===a&&d.maximumNumberOfFeatures===h?d:new DisplayFeatureLimit_e(s,h,a)}get averageSymbolComplexity(){const e=defaultSymbolComplexity_d(this._symbolComplexities),t=this._get("averageSymbolComplexity");return 0===e.numComplexities||null!=t&&(e.estimated&&(t.verticesPerFeature>=e.verticesPerFeature||t.verticesPerCoordinate>=e.verticesPerCoordinate||t.drawCallsPerFeature>=e.drawCallsPerFeature)||t.verticesPerFeature===e.verticesPerFeature&&t.verticesPerCoordinate===e.verticesPerCoordinate&&t.drawCallsPerFeature===e.drawCallsPerFeature)?t:e}get usedMemory(){const e=null!=this.averageSymbolComplexity&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this._numberOfGraphics:0,t=this._getSymbolComplexitiesUsed().reduce(((e,t)=>e+t.memory.resourceBytes),0),i=this.owner.view._stage.renderer,r=this.owner.view.basemapTerrain.overlayManager.renderer,s=Array.from(this._symbols.values()).reduce(((e,t)=>e+(t?.symbolLayers.reduce(((e,t)=>e+(t?.materials.reduce(((e,t)=>e+i.getMemoryForMaterial(t)+r.getMemoryForMaterial(t)),0)??0)),0)??0)),0);return this._usedMemory+e+t+s}get usedMemoryPerGraphic(){if(this._usedMemory&&this._numberOfGraphics){const e=this._numberOfGraphics/(this._numberOfGraphics+Math.max(this._pendingAdds,this._pendingRemoves));return this._usedMemory/this._numberOfGraphics*e}if(null!=this.averageSymbolComplexity){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return(this._pendingAdds-this._pendingRemoves)*this.usedMemoryPerGraphic}get _symbolComplexities(){return this.currentRenderer?this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this._getSymbolComplexitiesUsed()}get visible(){return this._visible}_getConvertedSymbol(e){if("web-style"===e.type)return e.clone();const t=this._symbolConversionCache.get(e.id);if(null!=t)return t;const i=(0,symbolConversion/* to3D */.t)(e,{geometryType:this.layer?.geometryType??void 0,retainId:!0,hasLabelingContext:this._hasLabelingContext(e)}),r=i.symbol||null;return null==r&&i.error&&Ve.error(i.error.message),this._symbolConversionCache.set(e.id,r),r}_getSymbolComplexitiesUsedOrRenderer(e){if(null==e)return[];const t=e.getSymbols(),i="backgroundFillSymbol"in e?e.backgroundFillSymbol:null;if(!i&&!t?.length)return[];const r=[],s=this._getSymbolComplexityUsedOrRenderer(i);null!=s&&r.push(s);for(const a of t){const e=this._getSymbolComplexityUsedOrRenderer(a);null!=e&&r.push(e)}return r}_getSymbolComplexityUsedOrRenderer(e){if(null==e)return null;const t=this._symbols.get(e.id);if(null!=t)return t.complexity;const i=this._getConvertedSymbol(e);return null!=i?defaultSymbolComplexity_m(i):null}_getSymbolComplexitiesUsed(){const e=[];return this._symbols.forEach((t=>{null!=t&&e.push(t.complexity)})),e}get _objectIdField(){return this.layer.objectIdField}constructor(e){super(e),this._propertiesPool=new PropertiesPool/* PropertiesPool */.M({computedExtent:Extent/* default */.A},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this._graphicStateTracking=null,this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this._graphicsDrapedUids=new Set,this._graphicsBySymbol=new Map,this._symbolConversionCache=new Map,this._symbols=new Map,this._graphicsWithoutSymbol=new Map,this._graphicsWaitingForSymbol=new Map,this._graphicsUpdateId=0,this._frameTask=Scheduler/* ImmediateTask */.nu,this._suspendSymbolCleanup=!1,this._arcadeOnDemand=null,this._rendererChangeAbortController=null,this._elevationInfoChangeAbortController=null,this._initializeAbortController=null,this._scaleVisibility=null,this._filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this._featureStore=null,this._deconflictor=null,this._labeler=null,this._objectStates=null,this._viewElevationProvider=null,this._stageLayerElevationProvider=null,this._sharedSymbolResourcesOwnerHandle=null,this._whenGraphics3DGraphicRequests={},this._pendingUpdates=new Map,this._numberOfGraphics=0,this._numberOfGraphicsProvidingElevation=0,this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this._loadingSymbols=0,this._pendingUpdatesPool=new PooledArray/* default */.A({allocator:e=>e||new ke,deallocator:e=>(e.clear(),e)}),this._symbolWarningLogged=!1,this._geometryWarningLogged=!1,this._objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new PooledArray/* default */.A,this.preferredUpdatePolicy=UpdatePolicy/* UpdatePolicy */.q.SYNC,this._forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.setUidToIdOnAdd=!0,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=!1,this._startCreateGraphics=!1,this.symbolCreationContext=new Graphics3DSymbolCreationContext_e(e.owner.view.resourceController.scheduler,((e,t)=>this._frameTask.schedule(e,t)))}initialize(){this._featureStore=new Graphics3DFeatureStore_d({objectIdField:this.owner.layer?.objectIdField,hasZ:!!this.hasZ,hasM:!!this.hasM,viewSpatialReference:this._viewSpatialReference,featureSpatialReference:this.owner.featureSpatialReference,getSpatialIndex:()=>this.spatialIndex,forEach:e=>this.graphics3DGraphics.forEach(e)});const e=(e,t,i)=>this.spatialIndex.queryGraphicUIDsInExtent(e,t,i),{componentFactories:t}=this;if(null!=t.elevationAlignment){const i=t.elevationAlignment(this,e);this._elevationAlignment=i}if(null!=t.scaleVisibility){const i=t.scaleVisibility(this,e);this._scaleVisibility=i}if(null!=t.filterVisibility){const e=t.filterVisibility({featureStore:this._featureStore,getFeatureCount:()=>this.graphics3DGraphics.size,updateFeatureVisibilities:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(enums_A.GRAPHIC,enums_L.FILTER,e((0,dehydratedFeatures/* getObjectId */.RW)(t.graphic,this._objectIdField))))),setAllFeaturesVisibility:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(enums_A.GRAPHIC,enums_L.FILTER,e))),clearFeaturesVisibility:()=>this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(enums_A.GRAPHIC,enums_L.FILTER,!0)))});this._filterVisibility=e}if(null!=t.deconflictor){const e=t.deconflictor(this);this._deconflictor=e}if(null!=t.labeler&&null!=this._scaleVisibility){const e=t.labeler(this,this._scaleVisibility);this._labeler=e}if(null!=t.objectStates){const e=t.objectStates(this);this._objectStates=e}this._initializeAbortController=new AbortController,this._initializePromise=this._initializeAsync()}async _initializeAsync(){const e=this._initializeAbortController?.signal,t=this.owner.view;this._viewElevationProvider=new ElevationQuery_l(this._viewSpatialReference,t),this._initializeStage(t,this.layer.uid);const i=t.sharedSymbolResources;this.symbolCreationContext.sharedResources=i,this._sharedSymbolResourcesOwnerHandle=i.addGraphicsOwner(this.owner),null!=this.currentRenderer&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=i.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=t.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.graphicsCoreOwner=this.owner,this.symbolCreationContext.localOriginFactory=new GridLocalOriginFactory/* GridLocalOriginFactory */.g(t.renderSpatialReference),this.symbolCreationContext.elevationProvider=t.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=(0,featureExpressionInfoUtils/* extractExpressionInfo */.MF)(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);if(this.symbolCreationContext.featureExpressionInfoContext=await (0,featureExpressionInfoUtils/* createContext */.q6)(r,this._viewSpatialReference,e,Ve),(0,promiseUtils/* throwIfAborted */.Te)(e),this.symbolCreationContext.screenSizePerspectiveEnabled=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled,this.symbolCreationContext.skipHighSymbolLods=!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods,"drapeSourceType"in this.owner){const{owner:e}=this;this.symbolCreationContext.drapeSourceRenderer=t.basemapTerrain.overlayManager.registerGeometryDrapeSource(e),this.addHandles((0,handleUtils/* makeHandle */.hA)((()=>t.basemapTerrain.overlayManager.unregisterDrapeSource(e))))}this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.suspendedOrOutsideOfView),(()=>this._frameTask.reschedule((()=>this._updateLayerVisibility())))),(0,reactiveUtils/* watch */.wB)((()=>[this.layer?.screenSizePerspectiveEnabled,this.owner.view?.screenSizePerspectiveEnabled]),(()=>{const e=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,this._labeler?.reset(),this.recreateAllGraphicsAndSymbols())})),(0,reactiveUtils/* watch */.wB)((()=>this.owner.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(!!e))),(0,reactiveUtils/* watch */.wB)((()=>this.owner.view.state?.rasterPixelRatio),(()=>this._pixelRatioChange())),(0,reactiveUtils/* watch */.wB)((()=>!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled),(e=>this._physicalBasedRenderingChange(e))),(0,reactiveUtils/* watch */.wB)((()=>!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods),(e=>this._skipHighSymbolLoDsChange(e))),(0,reactiveUtils/* when */.z7)((()=>t.basemapTerrain?.tilingScheme),(e=>{if(e.spatialReference.equals(this.symbolCreationContext.overlaySR)||null==t.basemapTerrain.spatialReference||(this.symbolCreationContext.overlaySR=t.basemapTerrain.spatialReference),this.hasHandles("loaded-graphics"))this.recreateAllGraphics();else{const e=()=>this.owner?.loadedGraphics;this.addHandles([(0,reactiveUtils.on)(e,"change",(e=>{this._graphicsCollectionChanged(e),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}),{onListenerAdd:()=>{this.recreateAllGraphics(),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}})],"loaded-graphics")}}),{initial:!0}),(0,reactiveUtils/* watch */.wB)((()=>this.effectiveUpdatePolicy),(e=>{null!=this.stageLayer&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.ASYNC,e===UpdatePolicy/* UpdatePolicy */.q.SYNC&&this.runTask(Scheduler/* noBudget */.Bb)}),reactiveUtils/* syncAndInitial */.pc)]),this._frameTask=t.resourceController.scheduler.registerTask(Scheduler/* TaskPriority */.W6.GRAPHICS_CORE,this),this.layer&&"featureReduction"in this.layer&&this.addHandles((0,reactiveUtils/* watch */.wB)((()=>this.layer.featureReduction),(()=>this._deconflictor.featureReductionChange()))),this.notifyChange("averageSymbolComplexity"),this.rendererChange(this.owner.renderer).catch((()=>{})),this._initializeAbortController=null}_abortInitialize(){this._initializeAbortController&&(this._initializeAbortController.abort(),this._initializeAbortController=null)}destroy(){this._abortInitialize(),this._abortRendererChange(),this._abortElevationInfoChange(),this._frameTask.remove(),this._frameTask=Scheduler/* ImmediateTask */.nu,this.owner.view?.deconflictor?.removeGraphicsOwner(this),this.owner.view?.labeler?.removeGraphicsOwner(this),this._elevationAlignment=(0,maybe/* destroyMaybe */.pR)(this._elevationAlignment),this._scaleVisibility=(0,maybe/* destroyMaybe */.pR)(this._scaleVisibility),this._filterVisibility=(0,maybe/* destroyMaybe */.pR)(this._filterVisibility),this._deconflictor=null,this._labeler=null,this._objectStates=(0,maybe/* destroyMaybe */.pR)(this._objectStates),this.clear(),this._featureStore=(0,maybe/* destroyMaybe */.pR)(this._featureStore),this._updatingPendingLoadedGraphicsChange=(0,maybe/* removeMaybe */.xt)(this._updatingPendingLoadedGraphicsChange),this._graphicStateTracking=(0,maybe/* destroyMaybe */.pR)(this._graphicStateTracking),this.stage&&(this.stageLayer=(0,maybe/* destroyMaybe */.pR)(this.stageLayer),this.stage=null),this._set("owner",null);for(const e in this._whenGraphics3DGraphicRequests)this._whenGraphics3DGraphicRequests[e].reject(new core_Error/* default */.A("graphic:layer-destroyed","Layer has been destroyed"));this._whenGraphics3DGraphicRequests=null,this._sharedSymbolResourcesOwnerHandle=(0,maybe/* removeMaybe */.xt)(this._sharedSymbolResourcesOwnerHandle),this._propertiesPool=(0,maybe/* destroyMaybe */.pR)(this._propertiesPool),this._pendingUpdatesPool=null,this._symbolConversionCache.clear(),this._objectIdInvisibleSet.clear(),this._spatialIndex=(0,maybe/* destroyMaybe */.pR)(this._spatialIndex)}clear(){this._objectStates?.allGraphicsDeleted(),null!=this._graphicStateTracking&&this._graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),this._spatialIndex?.clear(),this.graphics3DGraphics.clear(),this._numberOfGraphics=0,this._usedMemory=0,this._updateLayerVisibility(),this._symbols.forEach(maybe/* destroyMaybe */.pR),this._symbols.clear(),this._graphicsBySymbol.clear(),this._graphicsWithoutSymbol.clear(),this._graphicsWaitingForSymbol.clear(),this._pendingUpdates.clear(),this._pendingUpdatesPool.clear(),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this.notifyChange("updating"),this.notifyChange("running"),this.notifyChange("updatingRemaining"),this._featureStore.events.emit("changed")}_initializeStage(e,t){this.stage=e._stage,this.stageLayer=new WebGLLayer/* WebGLLayer */.x(this.stage,{pickable:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},t);const i=this.stageLayer.events;i.on("transformationChanged",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on("shaderTransformationChanged",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on("visibilityChanged",(e=>this.notifyGraphicVisibilityChanged(e.graphicUid))),i.on("geometryAdded",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on("geometryRemoved",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on("attributesChanged",(e=>(0,VertexAttribute/* affectsGeometry */.b)(e.attribute)&&this.notifyGraphicGeometryChanged(e.object.graphicUid)))}notifyGraphicGeometryChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicVisibility(t)}_updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this._numberOfGraphics>e*ze,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,i?(this.stageLayer.pickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.pickable=!1,this._hideAllGraphics()),this._updateStageLayerVisibility())}_updateStageLayerVisibility(){this.stageLayer.visible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return null!=e?this.graphics3DGraphics.get(e):void 0}getGraphics3DGraphicByObjectId(e){return this.owner.layer?.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer?.objectIdField){return (0,dehydratedFeatures/* getObjectId */.RW)(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer?.objectIdField;if(!e)return;const t=new Map;return this.graphics3DGraphics.forEach((i=>{if(!i)return;const r=i.graphic,s=this._getGraphicObjectID(r,e);null!=s&&t.set(s,i)})),t}get labelsEnabled(){return!(!this._labeler||!this._labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const t=this._deconflictor&&this._deconflictor.labelingInfoChange(e),i=this._labeler&&this._labeler.labelingInfoChange(e);await Promise.allSettled([t,i])}updateVisibilityInfo(){this._deconflictor&&this._deconflictor.labelingInfoChange(),this._labeler&&this._labeler.visibilityInfoChange()}get symbolUpdateType(){if(this._pendingUpdates.size>0)return"unknown";let e=0,t=0;return (0,MapUtils/* someMap */.Bs)(this._symbols,((i,r)=>{if(null!=i){const s=i.getFastUpdateStatus();if(s.loading>0)return!0;this._graphicsBySymbol.has(r)&&(t+=s.fast,e+=s.slow)}return!1}))?"unknown":t>=0&&0===e?"fast":e>=0&&0===t?"slow":"mixed"}runTask(e){if(this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange("running"),this.running||this.notifyChange("updating"),this.notifyChange("updatingRemaining"),!e.hasProgressed)return Scheduler/* Task */.YZ.YIELD}setObjectIdVisibility(e,t){t?this._objectIdInvisibleSet.delete(e):this._objectIdInvisibleSet.add(e);const i=this._findGraphics3DGraphicByObjectId(e);null!=i&&this._updateUserVisibility(i)}_findGraphics3DGraphicByObjectId(e){return (0,MapUtils/* findInMap */.$n)(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(null==e)return!1;const t=e.graphic,i=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&(null==i||!this._objectIdInvisibleSet.has(i));return e.setVisibilityFlag(enums_A.GRAPHIC,enums_L.USER,r)}_whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this._whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const r=(0,promiseUtils/* createResolver */.Tw)();return this._whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async _boundsForGraphics3DGraphic(e,t){const i=this._viewSpatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,t,s)=>(0,projectBuffer.projectBuffer)(e,r,t,e,i,t,s),n=(e,t,r)=>(0,projectBuffer.projectBuffer)(e,s,t,e,i,t,r),o=this._viewElevationProvider?{service:this._viewElevationProvider,useViewElevation:null!=t&&!!t.useViewElevation,minDemResolution:null!=t?t.minDemResolution:null,minDemResolutionForPoints:this.owner.view.resolution}:null,l=await e.getProjectedBoundingBox(a,n,o,t?.signal);if(!l)return null;const h=l.boundingBox;if(l.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){(0,aaBoundingBox/* center */.gX)(h,Graphics3DCore_je);const t=e.getElevation(Graphics3DCore_je[0],Graphics3DCore_je[1],0,i,"ground")??0;h[2]=Math.min(h[2],t),h[5]=Math.max(h[5],t)}}return{boundingBox:h,screenSpaceObjects:l.screenSpaceObjects}}async whenGraphicBounds(e,t){await (0,reactiveUtils/* whenOnce */.C_)((()=>this.owner?.loadedGraphics));const i=this.owner.layer?.objectIdField,r=this.owner.loadedGraphics.find((t=>t===e||null!=i&&null!=t.attributes&&e.attributes&&t.attributes[i]===e.attributes[i]));if(!r)throw new core_Error/* default */.A("internal:graphic-not-part-of-view","Graphic is not part of this view");const s=await this._whenGraphics3DGraphic(r);return this._boundsForGraphics3DGraphic(s,t)}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const r=i.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;(0,vec3.s)(Graphics3DCore_Me,0,0,0);let s=0;if(r.render.num>0){if(!(0,projectVectorToVector/* projectVectorToVector */.F)(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,We,t))return null;(0,vec3.g)(Graphics3DCore_Me,Graphics3DCore_Me,We),s++}if(r.draped.num>0){const[e,i]=r.draped.origin,a=this._viewElevationProvider.getElevation(e,i,"ground")??0;if((0,vec3.s)(We,e,i,a),!(0,projectVectorToVector/* projectVectorToVector */.F)(We,this._viewElevationProvider.spatialReference,We,t))return null;(0,vec3.g)(Graphics3DCore_Me,Graphics3DCore_Me,We),s++}return s>1&&(0,vec3.i)(Graphics3DCore_Me,Graphics3DCore_Me,1/s),new Point/* default */.A({x:Graphics3DCore_Me[0],y:Graphics3DCore_Me[1],z:Graphics3DCore_Me[2],spatialReference:t})}getSymbolLayerSize(e,t){const i=this._symbols.get(e.id);if(null==i)throw new core_Error/* default */.A("internal:symbol-not-part-of-view","Symbol is not part of this view");const r=e.symbolLayers.indexOf(t);if(-1===r)throw new core_Error/* default */.A("internal:missing-symbol-layer","Symbol layer is not in symbol");const s=i.getSymbolLayerSize(r);if(null==s)throw new core_Error/* default */.A("internal:missing-size","Symbol layer has no valid size");return s}_graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t);if(null!=i||null!=this._graphicsWithoutSymbol.get(t))switch(e.property){case"visible":this._graphicUpdateVisibleHandler(i);break;case"geometry":this._graphicUpdateGeometryHandler(i,e);break;case"symbol":this._graphicUpdateSymbolHandler(i,e);break;case"attributes":break;case"origin-transform":this._graphicUpdateTransformHandler(i,e)}}_graphicUpdateGeometryHandler(e,t){this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>null!=t.newValue&&null!=e&&e.graphics3DSymbol.updateGeometry(e,t.newValue)));const i=t.graphic.geometry;null!=i&&this._expandComputedExtent(i)}_graphicUpdateTransformHandler(e,t){const i=t.graphic.geometry;this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>null!=t.newValue&&null!=e&&null!=i&&e.graphics3DSymbol.updateTransform(e,i.spatialReference,t.newValue,t.action)))}_graphicUpdateGeometryOrTransformHandler(e,t,i){if(null!=t.graphic.geometry)if(null!=e)i()||this._recreateGraphic(e.graphic);else{const e=t.graphic.symbol?.id;if(e){const t=this._symbols.get(e);if(null!=t&&t.loadStatus===Loadable_l.LOADING)return}this._recreateGraphic(t.graphic)}else this._recreateGraphic(t.graphic)}_graphicUpdateSymbolHandler(e,t){const i=t.graphic,r=null!=e?e.graphics3DSymbol:null!=t.oldValue?this._symbols.get(t.oldValue.id):null;if(null==r||null==t.newValue)return void this._recreateGraphic(i);const s=r.symbol,a=this._getConvertedSymbol(t.newValue);if(null!=a&&(a.type!==s.type||"web-style"===a.type)||"web-style"===s.type)return void this._recreateGraphic(i);const n=this._graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this._recreateGraphic(i);const o=(0,diffUtils/* diff */.Ui)(s,a);if(null==o)return void this._updateSymbolMapping(s.id,a);const l={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(l),!(0,diffUtils/* isEmpty */.Im)(l.diff))return void this._recreateGraphic(i);const h=this._getRenderingInfo(i);if(null==h)return void this._recreateGraphic(i);const d=r.extentPadding;for(const p of l.symbolStatePatches)p();if(d!==r.extentPadding&&this._recomputeExtentPadding(),null!=e)for(const p of l.graphics3DGraphicPatches)p(e,h);this._updateSymbolMapping(s.id,a)}_graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}recreateGraphics(e){this._suspendSymbolCleanup=!0,this.remove(e),this.add(e),this._suspendSymbolCleanup=!1,this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.SYNC&&this._cleanupSymbols()}_recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){const t=this._graphicsUpdateId;return this._graphicsUpdateId++,this._graphicsWaitingForSymbol.set(e.uid,t),1===this._graphicsWaitingForSymbol.size&&this.notifyChange("updating"),t}_endGraphicUpdate(e){e&&(this._graphicsWaitingForSymbol.delete(e.uid),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange("updating")))}_recomputeExtentPadding(){let e=0;this._symbols.forEach((t=>{null!=t&&(e=Math.max(e,t.extentPadding))})),this._set("extentPadding",e)}_expandComputedExtent(e){const t=Le,i=e.spatialReference;(0,dehydratedFeatures/* computeAABB */.w9)(e,t);const r=this._viewSpatialReference,s=Graphics3DCore_Ae.tmpVec;if((0,spatialReferenceUtils/* equals */.aI)(i,r)||(0,projectXYZToVector/* projectXYZToVector */.L)(t[0],t[1],0,i,s,r)&&(t[0]=s[0],t[1]=s[1],(0,projectXYZToVector/* projectXYZToVector */.L)(t[3],t[4],0,i,s,r),t[3]=s[0],t[4]=s[1]),!(isFinite(t[0])&&isFinite(t[3])&&isFinite(t[1])&&isFinite(t[4])))return;const a=this.computedExtent;let n=null;const o=isFinite(t[2])&&isFinite(t[5]),l=o&&(null==a?.zmin||t[2]<a.zmin),h=o&&(null==a?.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||l||h)&&(n=this._propertiesPool.get("computedExtent"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=r)}else n=this._propertiesPool.get("computedExtent"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=r;n&&(l&&(n.zmin=t[2]),h&&(n.zmax=t[5]),this._set("computedExtent",n))}_abortElevationInfoChange(){this._elevationInfoChangeAbortController&&(this._elevationInfoChangeAbortController.abort(),this._elevationInfoChangeAbortController=null)}async elevationInfoChange(){this._abortElevationInfoChange();const e=new AbortController;this._elevationInfoChangeAbortController=e;const t=(0,featureExpressionInfoUtils/* extractExpressionInfo */.MF)(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await (0,featureExpressionInfoUtils/* createContext */.q6)(t,this._viewSpatialReference,e.signal,Ve),(0,promiseUtils/* throwIfAborted */.Te)(e.signal),this._elevationInfoChangeAbortController=null,this._labeler?.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("elevationInfo",t)?t.forEach((e=>{const t=e.graphic,i=e.labelLayers;for(const r of i){r.graphics3DSymbolLayer.updateGraphicElevationContext(t,r)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),this._elevationAlignment?.elevationInfoChange()}updateStageLayerElevationProvider(){this._stageLayerElevationProvider?(this.layer.elevationInfo&&"relative-to-scene"===this.layer.elevationInfo.mode||0===this._numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=(0,maybe/* disposeMaybe */.WD)(this._stageLayerElevationProvider)):(!this.layer.elevationInfo||this.layer.elevationInfo&&"relative-to-scene"!==this.layer.elevationInfo.mode)&&this._numberOfGraphicsProvidingElevation>0&&(this._stageLayerElevationProvider=new StageLayerElevationProvider_y({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register("scene",this._stageLayerElevationProvider))}_clearSymbolsAndGraphics(){this.clear(),null!=this._filterVisibility&&this._filterVisibility.clear(),this._labeler?.reset(),this._deconflictor?.clear(),this._elevationAlignment?.clear(),this.stageLayer?.invalidateSpatialQueryAccelerator(),this._stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=(0,maybe/* disposeMaybe */.WD)(this._stageLayerElevationProvider))}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._recreateAllGraphics(!1)}recreateAllGraphicsAndSymbols(){this._recreateAllGraphics(!0)}_recreateAllGraphics(e=!1){if(!this._startCreateGraphics)return;const{loadedGraphics:t,view:i}=this.owner,r=i.basemapTerrain.tilingScheme&&t?.length?t.toArray():null;!e&&r||this._clearSymbolsAndGraphics(),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this._set("computedExtent",null),r&&(e?this.add(r):this.recreateGraphics(r))}_recreateSymbol(e){const t=this._graphicsBySymbol.get(e),i=[];t&&(t.forEach(((e,t)=>{const r=e.usedMemory;this._conditionalRemove(e,t),this._spatialIndex?.remove(e),i.push(e.graphic),e.destroy(),this._removeGraphics3DGraphic(t,r),this._updateLayerVisibility(),this._featureStore.events.emit("changed")})),this._graphicsBySymbol.set(e,new Map));const r=this._symbols.get(e);(0,maybe/* destroyMaybe */.pR)(r),this._symbols.delete(e),this.add(i)}_recreateGraphicsForSymbol(e){const t=this._graphicsBySymbol.get(e);if(t){const e=[];t.forEach((t=>e.push(t.graphic))),this.recreateGraphics(e)}}_conditionalRemove(e,t){this._graphicsDrapedUids.delete(t),this._objectStates?.removeGraphic(e),this._labeler?.removeGraphic(e),this._deconflictor?.removeGraphic(e),null!=this._graphicStateTracking&&this._graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain?.tilingScheme?(this._updatePolicyForGraphics(e)===UpdatePolicy/* UpdatePolicy */.q.ASYNC?this._addDelayed(e):this._addImmediate(e),this.notifyChange("updating")):Ve.error("#add()","Cannot add graphics before terrain surface has been initialized"))}_updatePolicyForGraphics(e){if(this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.SYNC&&("mesh"===this.layer.geometryType||null==this.layer.geometryType))for(const t of e)if(null!=t.geometry&&"mesh"===t.geometry.type&&!t.geometry.loaded)return UpdatePolicy/* UpdatePolicy */.q.ASYNC;return this.effectiveUpdatePolicy}_addImmediate(e){this._geometryWarningLogged=!1,this._symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,Ve),UpdatePolicy/* UpdatePolicy */.q.SYNC);this._cleanupSymbols(),this._labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this._pendingUpdates.get(e);i?i.add?i.state!==Te.NEW&&i.abortController?.abort():this._pendingAdds++:(i=this._pendingUpdatesPool.pushNew(),this._pendingAdds++,this._pendingUpdates.set(e,i)),i.add=t}this.notifyChange("running"),this.notifyChange("updatingRemaining")}remove(e){this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.ASYNC?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange("updating")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this._pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this._pendingUpdates.delete(e),i.state===Te.LOADING&&i.abortController?.abort(),this._pendingAdds--);else{const i=this._pendingUpdatesPool.pushNew();i.remove=t,this._pendingUpdates.set(e,i),this._pendingRemoves++,this._applyPendingRemovesFirst=!0}}0===this._pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange("running"),this.notifyChange("updatingRemaining")}_finishPendingUpdates(){this._pendingUpdatesPool.clear(),this._cleanupSymbols(),(this._pendingAdds||this._pendingRemoves)&&Ve.warn("pendingAdds/Removes in inconsistent state!"),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1}_applyPendingUpdates(e){if(this._geometryWarningLogged=!1,this._symbolWarningLogged=!1,0===this._pendingUpdates.size&&this._spatialIndex?.updating)return this._spatialIndex.update(),void e.madeProgress();if(this._applyPendingRemovesFirst){this._applyPendingRemovesFirst=!1;for(const[t,i]of this._pendingUpdates){if(e.done){this._applyPendingRemovesFirst=!0;break}if(i.remove&&!i.add&&(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,this._pendingUpdates.delete(t),0===this._pendingRemoves))break}}for(const[t,i]of this._pendingUpdates){if(e.done)break;i.add&&i.state===Te.NEW&&this._processPendingUpdateNew(i);let r=this.effectiveUpdatePolicy;if(!i.remove||i.add&&i.state!==Te.READY||(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,r=UpdatePolicy/* UpdatePolicy */.q.SYNC),i.add)switch(i.state){case Te.READY:this._addGraphic(i.add,i.renderingInfo,r),i.add=null,this._pendingAdds--,e.madeProgress();break;case Te.REJECTED:i.add=null,this._pendingAdds--;case Te.LOADING:}null==i.remove&&null==i.add&&this._pendingUpdates.delete(t)}0===this._pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange("running"))}_processPendingUpdateNew(e){if(!e.add)return void(e.state=Te.READY);const t=e.add.geometry;null==t||"mesh"!==t.type||t.loaded?this._processPendingUpdateNewRenderingInfo(e):this._processPendingUpdateNewMesh(e,t)}async _processPendingUpdateNewMesh(e,t){e.state=Te.LOADING,e.abortController=new AbortController;const i=e.abortController.signal;try{await t.load({signal:i})}catch(r){return this._processPendingUpdateNewError(e,r)}e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewError(e,t){e.abortController=null,(0,promiseUtils/* isAbortError */.zf)(t)?e.state=Te.NEW:e.state=Te.REJECTED}async _processPendingUpdateNewRenderingInfo(e){if(null==this.layer.renderer||"dictionary"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,Ve),void(e.state=Te.READY);e.state=Te.LOADING,e.abortController=new AbortController;let t=null;try{t=await this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal})}catch(i){return e.abortController=null,void((0,promiseUtils/* isAbortError */.zf)(i)?e.state=Te.NEW:e.state=Te.REJECTED)}null==t?.symbol?(Ve&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=Te.READY}_addGraphic(e,t,i){if(this._graphicsWithoutSymbol.set(e.uid,e),null==t?.symbol||!(0,dehydratedFeatures/* hasGeometry */.N3)(e))return;if(null!=this.stage.renderView.objectAndLayerIdRenderHelper&&this.setUidToIdOnAdd){const t=(0,basemapUtils/* isBasemapLayer */.ns)(this.owner.view.map,this.layer.uid);this.stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(e.objectId,e.uid,this.layer.id,this.layer.uid,!!this.layer.popupEnabled&&!t&&(0,popupUtils/* hasPopupTemplate */.d0)(this.layer,this.owner.view.popup?.defaultPopupTemplateEnabled))}const r=t.symbol,s=this.getOrCreateGraphics3DSymbol(r,t.renderer);if(null==s)return;this._expandComputedExtent(e.geometry);const a=this._beginGraphicUpdate(e),n=new Graphics3DGraphicCreationContext_r(e,t,this.layer);let o=!1;const l=e=>{e===s.symbol.id&&(o=!0)};this._whenSymbolRemoved.push(l);const h=()=>{if(--this._loadingSymbols,this.destroyed)return;this._whenSymbolRemoved.removeUnordered(l);if(this._graphicsWaitingForSymbol.get(e.uid)!==a||o||s.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==s.symbol.id)--s.referenced,this._cleanupSymbols();else{const t=this._createGraphics3DGraphic(s,n);this._spatialIndex&&null!=t&&this._spatialIndex.add(t),--s.referenced,this._endGraphicUpdate(e)}this._featureStore.events.emit("changed"),this._labeler&&this.owner.view.labeler.setDirty()},d=t=>{--this._loadingSymbols,this.destroyed||(this._whenSymbolRemoved.removeUnordered(l),o||((0,promiseUtils/* isAbortError */.zf)(t)?this.add([e]):s.destroyed||this._endGraphicUpdate(e)))};++this._loadingSymbols,i===UpdatePolicy/* UpdatePolicy */.q.ASYNC?s.load((()=>this._frameTask.schedule(h)),(e=>this._frameTask.schedule((()=>d(e))))):s.load(h,d)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,r=i.isElevationSource;this._conditionalRemove(i,t),this._spatialIndex?.remove(i);const s=i.graphics3DSymbol.symbol.id;this._graphicsBySymbol.get(s)?.delete(t),this._graphicsWithoutSymbol.delete(t),this._removeGraphics3DGraphic(t,e,r),i.destroy(),this._featureStore.events.emit("changed")}else this._graphicsWithoutSymbol.delete(t),this._graphicsWaitingForSymbol.delete(t),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange("updating"))}_hasLabelingContext(e){if(e instanceof LabelSymbol3D/* default */.A||e instanceof TextSymbol/* default */.A){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}_hasValidSymbolCreationContext(e){return!(e instanceof LabelSymbol3D/* default */.A&&!this._hasLabelingContext(e))||(Ve.error("LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported."),!1)}_getRenderingInfo(e,t){const i=e.geometry;if(null==i)return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!(0,projection.canProjectWithoutEngine)(i.spatialReference,this._viewSpatialReference))return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?(0,hydratedFeatures/* hydrateGraphic */.wP)(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||null!=this.currentRenderer))s=this.owner.getRenderingInfo(r,this.currentRenderer,this._arcadeOnDemand);else{s={symbol:r.symbol||defaults3D_j(r.geometry)}}return null==s?.symbol?(t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,t){if(null==e.geometry)return Ve&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return Ve&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const i=this.rendererHasGeometryOperations?(0,hydratedFeatures/* hydrateGraphic */.wP)(e,this.layer):e;return this.owner.getRenderingInfoAsync(i,this.currentRenderer,this._arcadeOnDemand,t)}_createGraphics3DSymbol(e,t){if(!this._hasValidSymbolCreationContext(e))return null;const i=this._getConvertedSymbol(e);if(!i)return null;let r;if(null!=t&&"backgroundFillSymbol"in t&&t.backgroundFillSymbol){const e=(0,symbolConversion/* to3D */.t)(t.backgroundFillSymbol,{ignoreDrivers:!0});null!=e.symbol&&"web-style"!==e.symbol.type&&"cim"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const s=Graphics3DSymbolFactory_t(i,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set("extentPadding",e),this.notifyChange("averageSymbolComplexity")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,t){let i=this._symbols.get(e.id);return void 0===i&&(i=e instanceof WebStyleSymbol/* default */.A?new Graphics3DWebStyleSymbol_i(e,(e=>this._frameTask.schedule(e)),(e=>this._createGraphics3DSymbol(e,t))):this._createGraphics3DSymbol(e,t),this._symbols.set(e.id,i)),null!=i&&++i.referenced,i}trackGraphicState(e){return null==this._graphicStateTracking&&(this._graphicStateTracking=new GraphicStateTracking_e(this)),this._graphicStateTracking.add(e)}_addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this._numberOfGraphics++,e.isElevationSource&&(this._numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this._numberOfGraphics--,i&&(this._numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_createGraphics3DGraphic(e,t){const i=t.graphic;if(this._graphicsWithoutSymbol.delete(i.uid),!this._symbols.has(e.symbol.id))return this.add([i]),null;if(this.graphics3DGraphics.has(i.uid))return null;const r=e.createGraphics3DGraphic(t);if(null==r)return null;this._addGraphics3DGraphic(r);const s=e.symbol.id;this._graphicsBySymbol.has(s)||this._graphicsBySymbol.set(s,new Map),this._graphicsBySymbol.get(s).set(i.uid,r);if(r.isDraped&&this._graphicsDrapedUids.add(i.uid),r.centroid=null,null!=i.geometry&&"point"!==i.geometry.type&&(r.centroid=(0,graphicUtils/* computeCentroid */.W$)(i.geometry,this._viewSpatialReference)),this._updateUserVisibility(r),null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(r),null!=this._filterVisibility){const{defaultVisibility:e}=this._filterVisibility;r.setVisibilityFlag(enums_A.GRAPHIC,enums_L.FILTER,e),e||this._filterVisibility.reapply()}this._deconflictor?.addGraphic(r),this._labeler?.addGraphic(r),this._objectStates?.addGraphic(r),this._deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,r),r.initialize(this.stageLayer,this.owner),null!=this._graphicStateTracking&&this._graphicStateTracking.addGraphic(r);const a=this._whenGraphics3DGraphicRequests[i.uid];return a&&(delete this._whenGraphics3DGraphicRequests[i.uid],a.resolve(r)),r}_abortRendererChange(){this._rendererChangeAbortController&&(this._rendererChangeAbortController.abort(),this._rendererChangeAbortController=null)}async rendererChange(e){if(this._abortRendererChange(),e!==this.currentRenderer)if(this._validateRenderer(e),null==e&&this._currentRendererChange(null,!1),(0,rendererConversion/* isSupportedRenderer3D */.l)(e))if(null!=e&&e.arcadeRequired){const t=new AbortController;this._rendererChangeAbortController=t;const{arcadeUtils:i}=await this._ensureArcade();(0,promiseUtils/* throwIfAborted */.Te)(t);const r=i.hasGeometryOperations(e);r&&(await i.enableGeometryOperations(),(0,promiseUtils/* throwIfAborted */.Te)(t)),this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.ASYNC?await this._frameTask.schedule((()=>this._currentRendererChange(e,r)),t.signal):this._currentRendererChange(e,r),this._rendererChangeAbortController=null}else if(this.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.ASYNC){const t=new AbortController;this._rendererChangeAbortController=t,await this._frameTask.schedule((()=>this._currentRendererChange(e,!1)),t.signal),this._rendererChangeAbortController=null}else this._currentRendererChange(e,!1);else this._currentRendererChange(e,!1)}async _ensureArcade(){return null==this._arcadeOnDemand?(this._arcadeOnDemand=await (0,arcadeOnDemand/* loadArcade */.lw)(),this._arcadeOnDemand):this._arcadeOnDemand}_currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=this._arcadeOnDemand;const i=this.symbolCreationContext.renderer;if(e===i)return;if(this._symbolConversionCache.clear(),null==e)return this.symbolCreationContext.renderer=null,void this.recreateAllGraphicsAndSymbols();const r=(0,diffUtils/* diff */.Ui)(i,e);this._updateUnchangedSymbolMappings(r,e,i),this.symbolCreationContext.renderer=e,null!=r&&("complete"===r.type?this.recreateAllGraphicsAndSymbols():"partial"===r.type&&(this._applyRendererDiff(r,e,i)?this._labeler?.reset():this.recreateAllGraphicsAndSymbols()),this.notifyChange("averageSymbolComplexity"))}_diffHasSymbolChange(e){for(const t in e.diff)switch(t){case"visualVariables":case"defaultSymbol":case"uniqueValueInfos":break;case"uniqueValueGroups":case"authoringInfo":case"fieldDelimiter":delete e.diff[t];break;default:return!0}return!1}_applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const r=[];for(const s of t){const t=this._graphicsBySymbol.get(s.id);t&&t.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof Layer/* default */.A?this.layer:null,h=this._arcadeOnDemand;if(s===i.defaultSymbol&&i.getSymbol((0,hydratedFeatures/* hydrateGraphic */.wP)(o,l),{arcade:h})===i.defaultSymbol)return;const d=a.usedMemory;e.length||i.defaultSymbol?r.push(o):this._graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),t.delete(n),this._removeGraphics3DGraphic(n,d),this._updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this._graphicsWithoutSymbol.forEach((e=>r.push(e))),this._graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_applyUniqueValueRendererDiff(e,t,i){const r=e.diff.defaultSymbol,a=e.diff.uniqueValueInfos;if(r||a){const n=a?a.added.map((e=>e.symbol)).filter(arrayUtils/* isSome */.Ru):[],o=a?a.removed.map((e=>e.symbol)).filter(arrayUtils/* isSome */.Ru):[];if(a)for(let e=0;e<a.changed.length;e++)n.push(a.changed[e].newValue.symbol),o.push(a.changed[e].oldValue.symbol);return r?(i.defaultSymbol&&o.push(i.defaultSymbol),t.defaultSymbol&&n.push(t.defaultSymbol)):i.defaultSymbol&&n.length&&o.push(t.defaultSymbol),this._applySymbolSetDiff(n,o,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}_calculateUnchangedSymbolMapping(e,t,i){if("unique-value"!==t?.type||"unique-value"!==i?.type||null!=e&&"partial"!==e.type)return[];const r=e=>null!=e?e.id:null,s=e&&e.diff,a=s?.defaultSymbol,n=s&&s.uniqueValueInfos;let o;if(n)o=n.unchanged.map((e=>({oldId:r(e.oldValue.symbol),newId:r(e.newValue.symbol)})));else{o=[];for(const e of i.uniqueValueInfos??[]){const i=r(e.symbol),s=t.uniqueValueInfos?.find((t=>t.value===e.value));s&&i!==r(s.symbol)&&o.push({oldId:i,newId:r(s.symbol)})}}return!a&&i.defaultSymbol&&o.push({oldId:r(i.defaultSymbol),newId:r(t.defaultSymbol)}),o}_updateSymbolMapping(e,t){const i=null!=t&&t?"string"==typeof t?t:t.id:null;if(null==e||e===i)return;const r=this._graphicsBySymbol.get(e);this._graphicsBySymbol.delete(e),void 0!==r&&this._graphicsBySymbol.set(i,r);const s=this._symbols.get(e);if(void 0!==s&&(this._symbols.delete(e),this._symbols.set(i,s),null!=s)){const e="string"==typeof t?null:t;null!=e?s.symbol=e:s.symbol.id=i}}_updateUnchangedSymbolMappings(e,t,i){const r=this._calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:s,newId:a}of r)this._updateSymbolMapping(s,a)}_applyRendererDiff(e,i,r){if(this._diffHasSymbolChange(e))return!1;if(i instanceof UniqueValueRenderer/* default */.A&&r instanceof UniqueValueRenderer/* default */.A&&this._applyUniqueValueRendererDiff(e,i,r)&&0===Object.keys(e.diff).length)return!0;for(const[t]of this._graphicsBySymbol){const r=this._symbols.get(t);if(null!=r)switch(r.applyRendererDiff(e,i)){case interfaces_e.RecreateSymbol:this._recreateSymbol(t);break;case interfaces_e.RecreateGraphics:this._recreateGraphicsForSymbol(t);case interfaces_e.FastUpdate:}}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged("opacity",t))),this._updateStageLayerVisibility()}_slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.sliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged("slicePlaneEnabled",t))),this._deconflictor&&this._deconflictor.slicePlaneEnabledChange(),this._labeler&&this._labeler.slicePlaneEnabledChange())}_physicalBasedRenderingChange(e){this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("physicalBasedRenderingEnabled",t)||this._recreateSymbol(i)}))}_skipHighSymbolLoDsChange(e){this.symbolCreationContext.skipHighSymbolLods=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("skipHighSymbolLods",t)||this._recreateSymbol(i)}))}_pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("pixelRatio",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=(0,scheduling/* schedule */._)((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,r=(0,aaBoundingRect/* create */.vt)();return extentUtils_u(e,r,t)?this.symbolCreationContext.clippingExtent=(0,aaBoundingBox/* fromRect */.Jt)((0,aaBoundingBox/* create */.vt)(),r):this.symbolCreationContext.clippingExtent=null,!(0,aaBoundingBox/* equals */.aI)(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){if(this.destroyed)return;let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this.owner.view.labeler?.setDirty(),this.owner.view.deconflictor?.setDirty())}forEachGraphics3DSymbol(e){for(const[t,i]of this._symbols){if(null==i)return;e(i,this._graphicsBySymbol.get(t)||He,t)}}updateAllGraphicsVisibility(){null!=this._filterVisibility&&this._filterVisibility.reapply(),this.modifyGraphics3DGraphicVisibilities((e=>{const t=this._updateUserVisibility(e),i=null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(e);return t||i}))}_hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(enums_A.GRAPHIC,enums_L.USER,!1)))}_validateRenderer(e){const t=(0,rendererConversion/* validateTo3D */.b)(e,{geometryType:this.layer?.geometryType});if(t){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:""}, id:${this.layer.id}' is not supported in a SceneView`;Ve.warn(e,t.message)}}_cleanupSymbols(){if(this._graphicsWaitingForSymbol.size>0||this._suspendSymbolCleanup)return;let e=!1;this._symbols.forEach(((t,i)=>{if(null==t||t.referenced>0)return;const r=this._graphicsBySymbol.get(i);r&&0!==r.size||(this._graphicsBySymbol.delete(i),this._symbols.delete(i),(0,maybe/* destroyMaybe */.pR)(t),e=!0)})),e&&(this._recomputeExtentPadding(),this.notifyChange("averageSymbolComplexity"))}get test(){return{snapshotInternals:()=>({graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this._symbols.keys()].sort(),graphicsBySymbol:[...this._graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this._graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this._graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this._graphicsDrapedUids].sort(),pendingUpdates:this._pendingUpdates}),symbols:this._symbols,filterVisibility:this._filterVisibility,numPending:this._pendingUpdates.size,forceUpdatePolicy:e=>{this._forcedUpdatePolicy=e}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this._graphicsWithoutSymbol.size,pending:this._pendingUpdates.size}}};var Te;Graphics3DCore_Fe.tmpVec=(0,vec3f64.c)(),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"computedExtent",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"currentRenderer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"rendererHasGeometryOperations",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_frameTask",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"_viewSpatialReference",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_rendererChangeAbortController",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_elevationInfoChangeAbortController",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_initializeAbortController",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_elevationAlignment",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_scaleVisibility",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_filterVisibility",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_initializePromise",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_spatialIndex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"extentPadding",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_updatingPendingLoadedGraphicsChange",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_featureStore",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_deconflictor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_labeler",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_objectStates",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_loadingSymbols",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"preferredUpdatePolicy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_forcedUpdatePolicy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"effectiveUpdatePolicy",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"elevationFeatureExpressionEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"owner",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"graphicSymbolSupported",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"getRenderingInfoWithoutRenderer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"componentFactories",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"setUidToIdOnAdd",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"featureStore",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"initializePromise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"scaleVisibility",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"elevationAlignment",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"objectStates",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"filterVisibility",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"running",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"suspendedOrOutsideOfView",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0,dependsOn:[]})],Graphics3DCore_Fe.prototype,"updatingRemaining",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DCore_Fe.prototype,"displayFeatureLimit",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0,dependsOn:[]})],Graphics3DCore_Fe.prototype,"averageSymbolComplexity",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DCore_Fe.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DCore_Fe.prototype,"_objectIdField",null),Graphics3DCore_Fe=Graphics3DCore_Ae=(0,tslib_es6._)([(0,subclass/* subclass */.$)(Graphics3DCore_Oe)],Graphics3DCore_Fe),function(e){e[e.NEW=0]="NEW",e[e.LOADING=1]="LOADING",e[e.READY=2]="READY",e[e.REJECTED=3]="REJECTED"}(Te||(Te={}));class ke{constructor(){this.add=null,this.renderingInfo=null,this.state=Te.NEW,this.abortController=null,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=Te.NEW,this.abortController=null,this.remove=null}}const ze=10,Graphics3DCore_Me=(0,vec3f64.c)(),We=(0,vec3f64.c)(),He=new Map;

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const ExtentSet_a=.05;class ExtentSet_l{constructor(){this._extents=new PooledArray/* default */.A({allocator:t=>t||(0,aaBoundingRect/* create */.vt)()}),this._tmpExtent=(0,aaBoundingRect/* create */.vt)(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this._contains(t)||(this._removeContained(t),(0,aaBoundingRect/* copy */.C)(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this._mergeTight(),this._extents.pop()}merge(t){return this._mergeTight(t),t.hasProgressed}_mergeTight(t=Scheduler/* noBudget */.Bb){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.at(i);if(h){for(let t=i+1;t<e.length;++t){const r=e.at(t);if(null==r||r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const l=(0,aaBoundingRect/* area */.Wc)(h),_=(0,aaBoundingRect/* area */.Wc)(i),c=this._tmpExtent;(0,aaBoundingRect/* expand */.fT)(h,i,c);const d=l+_;((0,aaBoundingRect/* area */.Wc)(c)-d)/d<ExtentSet_a&&((0,aaBoundingRect/* copy */.C)(h,c),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}}this._dirty=!1}_contains(t){return this._extents.some((e=>(0,aaBoundingRect/* contains */.gR)(e,t)))}_removeContained(t){this._extents.filterInPlace((e=>!(0,aaBoundingRect/* contains */.gR)(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>(0,aaBoundingRect/* containsPoint */.Uc)(t,e)))}}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let Graphics3DElevationAlignment_p=class extends Accessor/* default */.A{constructor(e){super(e),this._dirtyExtents=new ExtentSet_l,this._globalDirty=!1,this._averageExtentUpdateSize=0,this._dirtyGraphicsSet=new Set,this._updateElevation=!1,this.graphicsCoreOwner=null,this.graphicsCore=null,this.events=new Evented/* default */.A}initialize(){const e=this.elevationProvider,t=this.graphicsCoreOwner.view.resourceController.scheduler;this.addHandles([e.on("elevation-change",(e=>this._elevationChanged(e))),(0,reactiveUtils/* watch */.wB)((()=>this.graphicsCoreOwner.suspended),(()=>this._suspendedChange())),t.registerTask(Scheduler/* TaskPriority */.W6.ELEVATION_ALIGNMENT,this)])}destroy(){this._dirtyGraphicsSet.clear(),this.graphicsCoreOwner=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null,this.elevationProvider=null}clear(){this._dirtyGraphicsSet.clear(),this.notifyChange("updating")}_suspendedChange(){!0===this.graphicsCoreOwner.suspended?this._updateElevation=!1:!1===this.graphicsCoreOwner.suspended&&this._updateElevation&&(this._globalDirty=!0,this.notifyChange("updating"))}elevationInfoChange(){this._globalDirty=!0,this.notifyChange("updating")}get updating(){return this.running}get running(){return this._dirtyGraphicsSet.size>0||this._dirtyExtents&&!this._dirtyExtents.empty||this._globalDirty}get updatingRemaining(){return this._dirtyGraphicsSet.size+this._dirtyExtents.size*this._averageExtentUpdateSize}runTask(e){for(this._globalDirty&&(this._markAllGraphicsElevationDirty(),this._globalDirty=!1,e.madeProgress()),e.run((()=>this._dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.notifyChange("updating")}_updateDirtyGraphics(e){const t=this.graphicsCoreOwner.view.renderCoordsHelper,i=this.graphicsCore.effectiveUpdatePolicy===UpdatePolicy/* UpdatePolicy */.q.ASYNC;for(const r of this._dirtyGraphicsSet.keys()){const s=this.graphicsCore.getGraphics3DGraphicById(r);if(this._dirtyGraphicsSet.delete(r),null!=s&&(s.alignWithElevation(this.elevationProvider,t,i),this.graphicsCoreOwner.view.deconflictor.setDirty(),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this._dirtyExtents.empty&&!e.done;){const t=this._dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit("invalidate-elevation",{extent:t,spatialReference:i});const r=this._dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);null!=t&&t.needsElevationUpdates()&&this._dirtyGraphicsSet.add(e)})),this._averageExtentUpdateSize=.1*(this._dirtyGraphicsSet.size-r)+.9*this._averageExtentUpdateSize,e.madeProgress()}}_markAllGraphicsElevationDirty(){this._dirtyExtents.clear(),this._dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this._dirtyGraphicsSet.add(t)))}_elevationChanged(e){if("scene"===e.context&&(!this.graphicsCore.layer.elevationInfo||"relative-to-scene"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.graphicsCoreOwner.suspended){if(!this._updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this._updateElevation=!0)}this.events.emit("invalidate-elevation",{extent:t,spatialReference:i})}else t[0]===-1/0?this._globalDirty=!0:this._dirtyExtents.add(t),this.notifyChange("updating")}};(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DElevationAlignment_p.prototype,"graphicsCoreOwner",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DElevationAlignment_p.prototype,"graphicsCore",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DElevationAlignment_p.prototype,"queryGraphicUIDsInExtent",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DElevationAlignment_p.prototype,"elevationProvider",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DElevationAlignment_p.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DElevationAlignment_p.prototype,"updatingRemaining",null),Graphics3DElevationAlignment_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.Graphics3DElevationAlignment")],Graphics3DElevationAlignment_p);

;// ../node_modules/@arcgis/core/views/3d/support/intersectionUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function intersectionUtils_p(r,n,t){return r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]<t}function intersectionUtils_a(r,n,t){const i=n[0],c=n[1],e=n[2];return!(r[0][0]*i+r[0][1]*c+r[0][2]*e+r[0][3]>t)&&(!(r[1][0]*i+r[1][1]*c+r[1][2]*e+r[1][3]>t)&&(!(r[2][0]*i+r[2][1]*c+r[2][2]*e+r[2][3]>t)&&(!(r[3][0]*i+r[3][1]*c+r[3][2]*e+r[3][3]>t)&&(!(r[4][0]*i+r[4][1]*c+r[4][2]*e+r[4][3]>t)&&!(r[5][0]*i+r[5][1]*c+r[5][2]*e+r[5][3]>t)))))}function intersectionUtils_m(r,n,t,i){return intersectionUtils_A(r,n,null,intersectionUtils_k(i,n,t,!1))}function intersectionUtils_d(r,n){for(let t=0;t<6;t++){if(s(r[t],n)>0)return!1}return!0}function intersectionUtils_j(r,n,t,i){return intersectionUtils_A(r,n,t,intersectionUtils_k(i,n,t,!0))}function intersectionUtils_h(r,e,o,u){const f=n(o,t(r,u,e));return i(r,e,c(r,o,f))}const intersectionUtils_g={dir:(0,vec3f64.c)(),len:0,clip:(0,vec2f64.a)()};function intersectionUtils_k(r,n,i,f){const s=intersectionUtils_g;return r?(i&&f&&(s.len=(0,vec3.o)(n,i)),(0,vec3.c)(s.dir,r)):f?(s.len=(0,vec3.o)(n,i),(0,vec3.f)(s.dir,i,n),(0,vec3.i)(s.dir,s.dir,1/s.len)):((0,vec3.f)(s.dir,i,n),(0,vec3.n)(s.dir,s.dir)),s}function intersectionUtils_v(r,t,i){const c=(0,vec3.j)((0,plane/* normal */.qb)(r),i.dir),e=-(0,plane/* signedDistance */.mN)(r,t);if(e<0&&c>=0)return!1;if(c>-1e-6&&c<1e-6)return e>0;if((e<0||c<0)&&!(e<0&&c<0))return!0;const o=e/c;return c>0?o<i.clip[1]&&(i.clip[1]=o):o>i.clip[0]&&(i.clip[0]=o),i.clip[0]<=i.clip[1]}function intersectionUtils_A(r,n,t,i){i.clip[0]=0,i.clip[1]=t?i.len:Number.MAX_VALUE;for(let c=0;c<r.length;c++)if(!intersectionUtils_v(r[c],n,i))return!1;return!0}

;// ../node_modules/@arcgis/core/views/3d/support/FrustumExtentIntersection.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const FrustumExtentIntersection_M=.5*Math.PI,FrustumExtentIntersection_F=FrustumExtentIntersection_M/Math.PI*180;class FrustumExtentIntersection_N{constructor(t){this._renderCoordsHelper=t.renderCoordsHelper,this._extent=new Array(4),this._planes=new Array(6),this._maxSpan=0,this._center={origin:(0,vec3f64.c)(),direction:(0,vec3f64.c)()};for(let e=0;e<4;e++)this._extent[e]={origin:(0,vec3f64.c)(),direction:(0,vec3f64.c)(),cap:{next:null,direction:(0,vec3f64.c)()}},this._planes[e]=(0,plane/* create */.vt)();this._planes[frustum/* PlaneIndex */.FB.NEAR]=(0,plane/* create */.vt)(),this._planes[frustum/* PlaneIndex */.FB.FAR]=(0,plane/* create */.vt)(),this._planesWithoutFar=this._planes.slice(0,5)}update(t,e,i,r=!0){const a=this._extent;this._toRenderBoundingExtent(t,e,i),(0,vec3.g)(this._center.origin,a[0].origin,a[2].origin),(0,vec3.i)(this._center.origin,this._center.origin,.5),this._renderCoordsHelper.worldUpAtPosition(this._center.origin,this._center.direction),r||(0,vec3.i)(this._center.direction,this._center.direction,-1);for(let n=0;n<4;n++){const t=a[n];this._renderCoordsHelper.worldUpAtPosition(t.origin,t.direction);const e=a[3===n?0:n+1];t.cap.next=e.origin,(0,vec3.C)(t.cap.direction,t.origin,e.origin),(0,plane/* fromVectorsAndPoint */.mR)(t.direction,t.cap.direction,t.origin,this._planes[n]),r||(0,vec3.i)(t.direction,t.direction,-1)}(0,plane/* fromVectorsAndPoint */.mR)(a[0].cap.direction,a[1].cap.direction,a[0].origin,this._planes[frustum/* PlaneIndex */.FB.NEAR]),r?(0,plane/* negate */.ze)(this._planes[frustum/* PlaneIndex */.FB.NEAR],this._planes[frustum/* PlaneIndex */.FB.FAR]):((0,plane/* copy */.C)(this._planes[frustum/* PlaneIndex */.FB.FAR],this._planes[frustum/* PlaneIndex */.FB.NEAR]),(0,plane/* negate */.ze)(this._planes[frustum/* PlaneIndex */.FB.NEAR],this._planes[frustum/* PlaneIndex */.FB.NEAR])),this._maxSpan=Math.max(Math.abs(t[0]-t[2]),Math.abs(t[1]-t[3])),this._maxSpanSpatialReference=e,this._minGlobalAltitude=.9*(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(this._maxSpanSpatialReference).radius}isVisibleInFrustum(t,e,i=!1){if(null==t)return!1;if(this._renderCoordsHelper.viewingMode===ViewingMode/* ViewingMode */.RT.Global){const i=this._maxSpanSpatialReference.isGeographic?FrustumExtentIntersection_F:FrustumExtentIntersection_M*e;if(this._maxSpan>i)return!0;if(null!=t.altitude&&t.altitude>=this._minGlobalAltitude)return this._isVisibleInFrustumGlobal(t)}if(0===this._maxSpan){const e=this._extent[0];return!(i||!t.intersectsRay((0,ray/* wrap */.LV)(e.origin,e.direction)))}for(let n=0;n<this._extent.length;n++){const e=this._extent[n];if(!i&&t.intersectsRay((0,ray/* wrap */.LV)(e.origin,e.direction)))return!0;if(t.intersectsLineSegment((0,lineSegment/* fromPoints */.Cr)(e.origin,e.cap.next,FrustumExtentIntersection_P),e.cap.direction))return!0}const r=i?this._planes:this._planesWithoutFar;for(let n=0;n<t.lines.length;n++){const e=t.lines[n];if(intersectionUtils_j(r,e.origin,e.endpoint,e.direction))return!0}return!1}_toRenderBoundingExtentGlobal(t,r,n){const o=5;(0,aaBoundingRect/* center */.gX)(t,FrustumExtentIntersection_U),FrustumExtentIntersection_U[2]=n,(0,computeTranslationToOriginAndRotation/* computeTranslationToOriginAndRotation */.l)(r,FrustumExtentIntersection_U,FrustumExtentIntersection_V,this._renderCoordsHelper.spatialReference),(0,mat4.i)(FrustumExtentIntersection_v,FrustumExtentIntersection_V),(0,aaBoundingBox/* empty */.Ie)(FrustumExtentIntersection_I);for(const{x0:i,x1:s,y0:c,y1:p}of FrustumExtentIntersection_k)for(let l=0;l<o;l++){const h=l/(o-1);FrustumExtentIntersection_U[0]=(0,mathUtils/* lerp */.Cc)(t[i],t[s],h),FrustumExtentIntersection_U[1]=(0,mathUtils/* lerp */.Cc)(t[c],t[p],h),FrustumExtentIntersection_U[2]=n,(0,projectVectorToVector/* projectVectorToVector */.F)(FrustumExtentIntersection_U,r,FrustumExtentIntersection_U,this._renderCoordsHelper.spatialReference),(0,vec3.e)(FrustumExtentIntersection_U,FrustumExtentIntersection_U,FrustumExtentIntersection_v),(0,aaBoundingBox/* expandWithVec3 */.iT)(FrustumExtentIntersection_I,FrustumExtentIntersection_U)}(0,vec3.s)(this._extent[0].origin,FrustumExtentIntersection_I[0],FrustumExtentIntersection_I[1],FrustumExtentIntersection_I[2]),(0,vec3.s)(this._extent[1].origin,FrustumExtentIntersection_I[3],FrustumExtentIntersection_I[1],FrustumExtentIntersection_I[2]),(0,vec3.s)(this._extent[2].origin,FrustumExtentIntersection_I[3],FrustumExtentIntersection_I[4],FrustumExtentIntersection_I[2]),(0,vec3.s)(this._extent[3].origin,FrustumExtentIntersection_I[0],FrustumExtentIntersection_I[4],FrustumExtentIntersection_I[2]);for(let e=0;e<4;++e)(0,vec3.e)(this._extent[e].origin,this._extent[e].origin,FrustumExtentIntersection_V)}_toRenderBoundingExtentLocal(t,e,i){projectBoundingRect_s(t,e,FrustumExtentIntersection_L,this._renderCoordsHelper.spatialReference),(0,vec3.s)(this._extent[0].origin,FrustumExtentIntersection_L[0],FrustumExtentIntersection_L[1],i),(0,vec3.s)(this._extent[1].origin,FrustumExtentIntersection_L[2],FrustumExtentIntersection_L[1],i),(0,vec3.s)(this._extent[2].origin,FrustumExtentIntersection_L[2],FrustumExtentIntersection_L[3],i),(0,vec3.s)(this._extent[3].origin,FrustumExtentIntersection_L[0],FrustumExtentIntersection_L[3],i)}_toRenderBoundingExtent(e,i,r){switch(this._renderCoordsHelper.viewingMode){case ViewingMode/* ViewingMode */.RT.Global:this._toRenderBoundingExtentGlobal(e,i,r);break;case ViewingMode/* ViewingMode */.RT.Local:this._toRenderBoundingExtentLocal(e,i,r);break;default:(0,compilerUtils/* neverReached */.Xb)(this._renderCoordsHelper.viewingMode)}}_isVisibleInFrustumGlobal(t){if((0,plane/* signedDistance */.mN)(t.planes[frustum/* PlaneIndex */.FB.NEAR],this._center.origin)<0&&(0,vec3.j)(this._center.direction,t.direction)<0)return!0;for(let e=0;e<4;e++){const i=this._extent[e];if((0,plane/* signedDistance */.mN)(t.planes[frustum/* PlaneIndex */.FB.NEAR],i.origin)<0&&(0,vec3.j)(i.direction,t.direction)<0)return!0}return!1}}const FrustumExtentIntersection_k=[{x0:0,y0:1,x1:2,y1:1},{x0:0,y0:3,x1:2,y1:3},{x0:0,y0:1,x1:0,y1:3},{x0:2,y0:1,x1:2,y1:3}],FrustumExtentIntersection_U=(0,vec3f64.c)(),FrustumExtentIntersection_V=(0,mat4f64.a)(),FrustumExtentIntersection_v=(0,mat4f64.a)(),FrustumExtentIntersection_I=(0,aaBoundingBox/* create */.vt)(),FrustumExtentIntersection_L=(0,aaBoundingRect/* create */.vt)(),FrustumExtentIntersection_P=(0,lineSegment/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DFrustumVisibility_h=1.2;let Graphics3DFrustumVisibility_u=class extends Accessor/* default */.A{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new FrustumExtentIntersection_N({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,n=t.basemapTerrain,o=t.resourceController.scheduler;this.addHandles([t.on("resize",(()=>this._viewChange())),(0,reactiveUtils/* watch */.wB)((()=>t.state.camera),(()=>this._viewChange()),reactiveUtils/* sync */.OH),o.registerTask(Scheduler/* TaskPriority */.W6.FRUSTUM_VISIBILITY,this),(0,reactiveUtils/* watch */.wB)((()=>n.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),"local"===t.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>[n.baseOpacity,n.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),reactiveUtils/* initial */.Vh)])}destroy(){this._set("graphicsCoreOwner",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set("updating",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s="local"===e.viewingMode,i="none"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.visibleElevationBounds;t=s-Math.max(1,(i-s)*(Graphics3DFrustumVisibility_h-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set("updating",!1),!this._extent)return this._set("suspended",!1),Scheduler/* Task */.YZ.YIELD;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,s=(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(this.graphicsCoreOwner.view.spatialReference).radius;this._set("suspended",!this._extentIntersection.isVisibleInFrustum(t,s)),e.madeProgress()}};(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DFrustumVisibility_u.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DFrustumVisibility_u.prototype,"graphicsCoreOwner",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DFrustumVisibility_u.prototype,"updating",void 0),Graphics3DFrustumVisibility_u=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],Graphics3DFrustumVisibility_u);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var Object3DStateSet_t;!function(e){e[e.Object=0]="Object",e[e.RenderGeometry=1]="RenderGeometry",e[e.External=2]="External",e[e.COUNT=3]="COUNT"}(Object3DStateSet_t||(Object3DStateSet_t={}));class Object3DStateSet_r{constructor(){this._items=[]}addObject(e,r){this._items.push({type:Object3DStateSet_t.Object,objectStateId:r,object:e})}addRenderGeometry(e,r,o){this._items.push({type:Object3DStateSet_t.RenderGeometry,objectStateId:r,renderGeometry:e,owner:o})}addExternal(e,r){this._items.push({type:Object3DStateSet_t.External,objectStateId:r,remove:e})}remove(e){for(let t=this._items.length-1;t>=0;--t){const r=this._items[t];r.objectStateId===e&&(this._removeObjectStateItem(r),this._items.splice(t,1))}}removeObject(e){for(let r=this._items.length-1;r>=0;--r){const o=this._items[r];o.type===Object3DStateSet_t.Object&&o.object===e&&(this._removeObjectStateItem(o),this._items.splice(r,1))}}removeRenderGeometry(e){for(let r=this._items.length-1;r>=0;--r){const o=this._items[r];o.type===Object3DStateSet_t.RenderGeometry&&o.renderGeometry===e&&(this._removeObjectStateItem(o),this._items.splice(r,1))}}removeAll(){this._items.forEach((e=>{this._removeObjectStateItem(e)})),this._items=[]}_removeObjectStateItem(r){switch(r.type){case Object3DStateSet_t.Object:r.objectStateId.channel===basicInterfaces/* Object3DState */.Mg.Highlight?r.object.removeHighlight(r.objectStateId):r.objectStateId.channel===basicInterfaces/* Object3DState */.Mg.MaskOccludee&&r.object.removeOcclude(r.objectStateId);break;case Object3DStateSet_t.RenderGeometry:r.owner.removeRenderGeometryObjectState(r.renderGeometry,r.objectStateId);break;case Object3DStateSet_t.External:r.remove(r.objectStateId)}}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DObjectStateSet_e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new Object3DStateSet_r,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Graphics3DObjectStates_s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this.reset(),this._stateSets=null}reset(){this._stateSets&&(this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets.length=0)}acquireSet(s,a){const i=new Graphics3DObjectStateSet_e(s,a);this._stateSets.push(i);const h=(0,handleUtils/* makeHandle */.hA)((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}_initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/layerViewUtils.js
var layerViewUtils = __webpack_require__(38201);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Graphics3DScaleVisibility_u=Logger/* default */.A.getLogger("esri.views.3d.layers.graphics.Graphics3DScaleVisibility");let Graphics3DScaleVisibility_y=class extends Accessor/* default */.A{constructor(e){super(e),this._scaleRangeActive=!1,this._layerScaleRangeVisibilityQuery=!1,this._extent=null,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this.graphicsCoreOwner=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null,this.basemapTerrain=null,this.layerScaleEnabled=!0,this.suspended=!1,this._dirty=!0}initialize(){this.updateScaleRangeActive();const e=this.graphicsCoreOwner.view.resourceController.scheduler;this.addHandles(e.registerTask(Scheduler/* TaskPriority */.W6.SCALE_VISIBILITY,this)),this._updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.layerMinMaxScaleChangeHandler()))}destroy(){this._updatingHandles.destroy(),this.removeHandles(),this._dirty=!1,this._extent=null,this.graphicsCoreOwner=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null,this.basemapTerrain=null}get updating(){return this._dirty||this._updatingHandles.updating}_setDirty(){this._dirty=!0}setExtent(e){const i=this.graphicsCoreOwner.view.spatialReference,t=this.graphicsCoreOwner.view.basemapTerrain.spatialReference;if(i===t)this._extent=e??null;else{const r=(0,aaBoundingRect/* create */.vt)();projectBoundingRect_s(e,i,r,t)?this._extent=r:this._extent=null}this._setDirty()}scaleRangeActive(){return this._scaleRangeActive}updateScaleRangeActive(){const e=this.layer,i=e.effectiveScaleRange;let t=this.layerScaleEnabled&&null!=i&&Graphics3DScaleVisibility_g(i.minScale,i.maxScale);e.labelingInfo&&!t&&(t=e.labelingInfo.some((e=>e&&Graphics3DScaleVisibility_g(e.minScale??0,e.maxScale??0))));const r=this._scaleRangeActive!==t;return this._scaleRangeActive=t,t&&!this.hasHandles(Graphics3DScaleVisibility_b)&&this.basemapTerrain?(this.addHandles(this.basemapTerrain.on("scale-change",(e=>this._scaleUpdateHandler(e))),Graphics3DScaleVisibility_b),this.layerScaleEnabled&&this.addHandles(this.basemapTerrain.on("tiles-visibility-changed",(()=>this._setDirty())),Graphics3DScaleVisibility_b)):!t&&this.hasHandles(Graphics3DScaleVisibility_b)&&this.removeHandles(Graphics3DScaleVisibility_b),r}get running(){return!(!this.graphicsCoreOwner.view.basemapTerrain||!this.updating)}runTask(e){const i=this.graphicsCoreOwner.view.basemapTerrain;if(this._extent&&i&&i.ready&&this._scaleRangeActive&&this.layerScaleEnabled){if(this._layerScaleRangeVisibilityQuery)return Scheduler/* Task */.YZ.YIELD;{this._layerScaleRangeVisibilityQuery=!0;const{minScale:e,maxScale:t}=this.layer.effectiveScaleRange;i.queryVisibleScaleRange(this._extent,e,t,(e=>this._finishUpdate(e)))}}else this._finishUpdate(!0);e.madeProgress()}_finishUpdate(e){this._layerScaleRangeVisibilityQuery=!1,this._set("suspended",!e),this._dirty=!1}_visibleAtLayerScale(e){const i=this.layer.effectiveScaleRange;return!this.layerScaleEnabled||(0,layerViewUtils/* scaleBoundsPredicate */.JU)(e,i.minScale||0,i.maxScale||0)}_visibleAtLabelScale(e,i){return (0,layerViewUtils/* scaleBoundsPredicate */.JU)(e,i.minScale||0,i.maxScale||0)}_graphicScale(e){let i;if(null!=e.centroid?i=e.centroid:null!=e.graphic.geometry&&"point"===e.graphic.geometry.type&&(i=e.graphic.geometry),i){return this.graphicsCoreOwner.view.basemapTerrain?this.graphicsCoreOwner.view.basemapTerrain.getScale(i):1}return null}_graphicVisible(e){if(!this.layerScaleEnabled)return!0;const i=this._graphicScale(e);return this._visibleAtLayerScale(i)}updateVisibility(e){if(this._scaleRangeActive){const i=this._graphicVisible(e);return e.setVisibilityFlag(enums_A.GRAPHIC,enums_L.SCALE_RANGE,i)}return!1}updateGraphicLabelScaleVisibility(e){if(!this._scaleRangeActive)return!1;if(!e.labelLayers||0===e.labelLayers.length)return!1;const i=this._graphicScale(e),t=this._updateLabelScaleVisibility(e,i);return t&&(this.graphicsCoreOwner.view.deconflictor.setDirty(),this.graphicsCoreOwner.view.labeler.setDirty()),t}_updateLabelScaleVisibility(e,i){if(!e.labelLayers||0===e.labelLayers.length)return!1;const t=e.labelLayers[0]._labelClass;if(null!=t?.minScale&&null!=t.maxScale){const r=this._visibleAtLabelScale(i,t);if(e.setVisibilityFlag(enums_A.LABEL,enums_L.SCALE_RANGE,r))return!0}return!1}_scaleUpdateHandler(e){if(this._setDirty(),!this.graphicsCore.visible)return;const i=e.extent,t=e.scale,r=this._visibleAtLayerScale(t);let s=!1;const a=this.graphicsCoreOwner.view.spatialReference,n=e.spatialReference;if(null==n)return void Graphics3DScaleVisibility_u.error("scaleUpdate: Internal error, no SpatialReference given for tiles");const h=!n.equals(a);if(h){if(!projectBoundingRect_s(i,n,Graphics3DScaleVisibility_,a))return void Graphics3DScaleVisibility_u.error("scaleUpdate: Internal error, cannot project AABR from "+n+" to wkid "+a)}const p=h?Graphics3DScaleVisibility_:i;this.queryGraphicUIDsInExtent(p,a,(e=>{const a=this.graphicsCore.getGraphics3DGraphicById(e);if(null==a)return;const l=a.centroid;null!=l&&(i[0]>l.x||i[1]>l.y||i[2]<l.x||i[3]<l.y)||(a.setVisibilityFlag(enums_A.GRAPHIC,enums_L.SCALE_RANGE,r)&&(s=!0),this._updateLabelScaleVisibility(a,t)&&(s=!0))})),s&&(this.graphicsCoreOwner.view.deconflictor.setDirty(),this.graphicsCoreOwner.view.labeler.setDirty())}layerMinMaxScaleChangeHandler(){this.updateScaleRangeActive()&&!this._scaleRangeActive?this.graphicsCore.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(enums_A.GRAPHIC,enums_L.SCALE_RANGE,!0))):this._scaleRangeActive&&this.graphicsCore.updateAllGraphicsVisibility(),this._setDirty()}};function Graphics3DScaleVisibility_g(e,i){return e>0||i>0}(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"graphicsCoreOwner",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"queryGraphicUIDsInExtent",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"graphicsCore",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"basemapTerrain",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Graphics3DScaleVisibility_y.prototype,"layerScaleEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DScaleVisibility_y.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Graphics3DScaleVisibility_y.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Graphics3DScaleVisibility_y.prototype,"_dirty",void 0),Graphics3DScaleVisibility_y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.Graphics3DScaleVisibility")],Graphics3DScaleVisibility_y);const Graphics3DScaleVisibility_b="terrain-events",Graphics3DScaleVisibility_=(0,aaBoundingRect/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let GraphicsProcessor_O=class extends Accessor/* default */.A{constructor(t){super(t),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=interfaces/* DrapeSourceType */.Om.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U}initialize(){const{layer:t}=this,i="effectiveScaleRange"in t?t:null,e=this.scaleVisibilityEnabled&&null!=i,s=new Graphics3DCore_Fe({owner:this,layer:this.owner.layer,preferredUpdatePolicy:UpdatePolicy/* UpdatePolicy */.q.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(t,i)=>new Graphics3DElevationAlignment_p({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:i,elevationProvider:this.view.elevationProvider}),scaleVisibility:e?(t,e)=>new Graphics3DScaleVisibility_y({graphicsCoreOwner:this,layer:i,queryGraphicUIDsInExtent:e,graphicsCore:t,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:t=>new Graphics3DObjectStates_s(t)}});if(this._set("graphicsCore",s),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new Graphics3DFrustumVisibility_u({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const t=this.owner;this._updatingHandles.add((()=>t.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if("elevationInfo"in t){const i=t;this._updatingHandles.add((()=>i.elevationInfo),((t,i)=>{(0,diffUtils/* diff */.Ui)(t,i)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set("initializePromise",this._initializeAsync()),this._updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(t){if((0,promiseUtils/* isAbortError */.zf)(t))return;throw t}this.destroyed||(this.addHandles((0,reactiveUtils/* watch */.wB)((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),reactiveUtils/* sync */.OH)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this._updatingHandles.destroy(),this._set("frustumVisibility",(0,maybe/* destroyMaybe */.pR)(this.frustumVisibility)),this._set("graphicsCore",(0,maybe/* destroyMaybe */.pR)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get objectStates(){return this.graphicsCore?.objectStates}get scaleVisibilitySuspended(){return!(null==this.scaleVisibility||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return null!=this.frustumVisibility&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||null!=this.scaleVisibility&&this.scaleVisibility.updating||null!=this.frustumVisibility&&this.frustumVisibility.updating||this._updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(t){this.graphicsCore.notifyGraphicGeometryChanged(t)}notifyGraphicVisibilityChanged(t){this.graphicsCore.notifyGraphicVisibilityChanged(t)}getRenderingInfo(t,i,e){const s=renderingInfoUtils_i(t,{renderer:i,arcade:e});if(s?.color){const t=s.color;t[0]=t[0]/255,t[1]=t[1]/255,t[2]=t[2]/255}return s}getRenderingInfoAsync(t,i,e,s){return renderingInfoUtils_l(t,{renderer:i,arcade:e,...s})}getHit(t){if(this.owner.loadedGraphics){const i=this.owner.loadedGraphics.find((i=>i.uid===t));if(i){const t=this.layer instanceof Layer/* default */.A?this.layer:null,e=(0,hydratedFeatures/* hydrateGraphic */.wP)(i,t);return{type:"graphic",graphic:e,layer:e.layer}}}return null}whenGraphicBounds(t,i){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,i):Promise.reject()}computeAttachmentOrigin(t,i){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,i):null}getSymbolLayerSize(t,i){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,i):null}maskOccludee(t){const{set:i,handle:e}=this.objectStates.acquireSet(basicInterfaces/* Object3DState */.Mg.MaskOccludee,null);return this.objectStates.setUid(i,t.uid),e}highlight(t){if(t instanceof Query/* default */.A)return GraphicsProcessor_P;if("number"==typeof t)return this.highlight([t]);if(t instanceof Graphic/* default */.A)return this.highlight([t]);if(t instanceof Collection/* default */.A&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof Graphic/* default */.A){const i=t.map((t=>t.uid)),{set:e,handle:s}=this.objectStates.acquireSet(basicInterfaces/* Object3DState */.Mg.Highlight,null);return this.objectStates.setUids(e,i),s}if("number"==typeof t[0]){const i=t,{set:e,handle:s}=this.objectStates.acquireSet(basicInterfaces/* Object3DState */.Mg.Highlight,null);return this.objectStates.setObjectIds(e,i),s}}return GraphicsProcessor_P}_setupSuspendResumeExtent(){const{scaleVisibility:t,frustumVisibility:i}=this;if(null==t&&null==i)return;const e=({computedExtent:e,extentPadding:s})=>{this._suspendResumeExtent=(0,graphicUtils/* enlargeExtent */.t8)(e,this._suspendResumeExtent,constants_s,s),null!=t&&t.setExtent(this._suspendResumeExtent),null!=i&&i.setExtent(this._suspendResumeExtent)};this.addHandles((0,reactiveUtils/* watch */.wB)((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(t=>e(t)),reactiveUtils/* syncAndInitial */.pc))}_updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],GraphicsProcessor_O.prototype,"owner",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"layer",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"view",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],GraphicsProcessor_O.prototype,"graphicsCore",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"scaleVisibility",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],GraphicsProcessor_O.prototype,"frustumVisibility",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"elevationAlignment",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"objectStates",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"scaleVisibilitySuspended",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],GraphicsProcessor_O.prototype,"frustumVisibilitySuspended",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"suspended",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],GraphicsProcessor_O.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"loadedGraphics",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"fullOpacity",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"slicePlaneEnabled",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"drapeSourceType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"updatePolicy",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],GraphicsProcessor_O.prototype,"scaleVisibilityEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],GraphicsProcessor_O.prototype,"frustumVisibilityEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsProcessor_O.prototype,"initializePromise",void 0),GraphicsProcessor_O=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.graphics.GraphicsProcessor")],GraphicsProcessor_O);const GraphicsProcessor_P=(0,handleUtils/* makeHandle */.hA)();

;// ../node_modules/@arcgis/core/views/3d/layers/graphics/queryForSymbologySnapping.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function queryForSymbologySnapping_r(r,a,s){if(null==r||0===a.candidates.length)return queryForSymbologySnapping_t;const i=r.graphics3DGraphicsByObjectID??r.graphics3DGraphics,c=[],o=[],{renderer:d}=r,p=null!=d&&"arcadeRequired"in d&&d.arcadeRequired?(0,arcadeOnDemand/* loadArcade */.lw)():null,l=async(n,{graphic:e,graphics3DSymbol:t})=>{const a=await p,i=await r.getRenderingInfoAsync(e,d,a,{signal:s});return null==i?[]:t.queryForSnapping(n,g,i,s)},{candidates:u,spatialReference:g}=a;for(let n=0;n<u.length;++n){const e=u[n],{objectId:r}=e,t="number"==typeof r?i?.get(r):void 0;if(null==t)continue;const{graphics3DSymbol:a}=t;a.symbologySnappingSupported&&(c.push(l(e,t)),o.push(n))}if(0===c.length)return queryForSymbologySnapping_t;const h=await Promise.all(c);(0,promiseUtils/* throwIfAborted */.Te)(s);const f=[],m=[];for(let n=0;n<h.length;++n){const e=h[n],r=o[n];for(const n of e)f.push(n),m.push(r)}return{candidates:f,sourceCandidateIndices:m}}const queryForSymbologySnapping_t={candidates:[],sourceCandidateIndices:[]};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/webMercatorUtils.js
var webMercatorUtils = __webpack_require__(96082);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/portal/support/geometryServiceUtils.js
var geometryServiceUtils = __webpack_require__(91976);
;// ../node_modules/@arcgis/core/views/3d/layers/support/projectExtentUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function projectExtentUtils_l(l){const t=l.view.spatialReference,o=l.layer.fullExtent,s=null!=o&&o.spatialReference;if(null==o||!s)return Promise.resolve(null);if(s.equals(t))return Promise.resolve(o.clone());const n=(0,webMercatorUtils/* project */.Cv)(o,t);return null!=n?Promise.resolve(n):l.view.state.isLocal?(0,geometryServiceUtils.projectGeometry)(o,t,l.layer.portalItem).then((e=>!l.destroyed&&e?e:null)).catch((()=>null)):Promise.resolve(null)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/LayerView.js
var LayerView = __webpack_require__(9049);
;// ../node_modules/@arcgis/core/views/3d/layers/GraphicsLayerView3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let GraphicsLayerView3D_d=class extends(LayerView3D_n(LayerView/* default */.A)){constructor(){super(...arguments),this.type="graphics-3d",this.symbologySnappingSupported=!0,this._slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null,this.ignoresMemoryFactor=!0}initialize(){this._set("processor",new GraphicsProcessor_O({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.addHandles(this.layer.on("graphic-update",(e=>this.processor.graphicsCore.graphicUpdateHandler(e)))),this.addResolvingPromise(projectExtentUtils_l(this).then((e=>this.fullExtentInLocalViewSpatialReference=e))),this.layer.internal?this.notifyChange("updating"):this.addHandles((0,reactiveUtils/* when */.z7)((()=>this.view?.basemapTerrain?.ready),(()=>()=>this.notifyChange("updating")),{once:!0}))}destroy(){this._updatingHandles.removeAll(),this._set("processor",(0,maybe/* destroyMaybe */.pR)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){return this.canResume()&&!this.processor?.frustumVisibilitySuspended}get slicePlaneEnabled(){const e=this.layer.internal;return this._slicePlaneEnabled&&!e}set slicePlaneEnabled(e){this._slicePlaneEnabled=e}getSuspendInfo(){const e=super.getSuspendInfo();return e.outsideScaleRange=this.processor?.scaleVisibilitySuspended??!1,e.outsideOfView=this.processor?.frustumVisibilitySuspended??!1,e}async fetchPopupFeatures(e,r){return r?.clientGraphics??[]}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,r){return this.processor.whenGraphicBounds(e,r)}computeAttachmentOrigin(e,r){return this.processor?.computeAttachmentOrigin(e,r)}getSymbolLayerSize(e,r){return this.processor.getSymbolLayerSize(e,r)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return this.processor.highlight(e)}async elevationAlignPointsInFeatures(e,s){const{processor:i}=this;if(null==i?.graphics3DGraphics)throw new core_Error/* default */.A("graphicslayerview3d:missing-processor","A Graphics3D processor is needed to resolve graphics elevation.");const{graphics3DGraphics:t}=i,o=e=>"number"==typeof e?t.get(e):void 0;return elevationAlignPointsInFeatures_c(this.view,this.layer,o,e,s)}async queryForSymbologySnapping(e,r){return queryForSymbologySnapping_r(this.processor,e,r)}get updatePolicy(){return this.processor?.graphicsCore.effectiveUpdatePolicy||UpdatePolicy/* UpdatePolicy */.q.SYNC}canResume(){return super.canResume()&&!this.processor?.scaleVisibilitySuspended}isUpdating(){return this.view&&this.layer&&!(!this.processor?.updating&&(this.layer.internal||this.view.basemapTerrain?.ready))}get performanceInfo(){return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:this.processor?.elevationAlignment.updating??!1,visibilityFrustum:!this.processor?.frustumVisibilitySuspended}}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return this.processor?.graphicsCore?.unprocessedMemoryEstimate}};(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsLayerView3D_d.prototype,"loadedGraphics",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],GraphicsLayerView3D_d.prototype,"legendEnabled",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsLayerView3D_d.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],GraphicsLayerView3D_d.prototype,"processor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],GraphicsLayerView3D_d.prototype,"_slicePlaneEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean})],GraphicsLayerView3D_d.prototype,"slicePlaneEnabled",null),GraphicsLayerView3D_d=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.layers.GraphicsLayerView3D")],GraphicsLayerView3D_d);const GraphicsLayerView3D_m=GraphicsLayerView3D_d;


/***/ }),

/***/ 58343:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97046);
/* harmony import */ var _featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9104);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnit */ .Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .execute */ .g7)(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .supportsUnit */ .Tg)(t.unit)?t.unit:"meters",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t?.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clone */ .o8)(t),(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .setContextFeature */ .gf)(this._featureExpressionInfoContext,(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createFeature */ .VG)(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}


/***/ }),

/***/ 27716:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I2: () => (/* binding */ d),
/* harmony export */   Kf: () => (/* binding */ p),
/* harmony export */   Uk: () => (/* binding */ R),
/* harmony export */   au: () => (/* binding */ u),
/* harmony export */   fe: () => (/* binding */ g),
/* harmony export */   nG: () => (/* binding */ f),
/* harmony export */   nu: () => (/* binding */ m),
/* harmony export */   sE: () => (/* binding */ c),
/* harmony export */   uw: () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22279);
/* harmony import */ var _geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59538);
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84119);
/* harmony import */ var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80009);
/* harmony import */ var _graphicUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54096);
/* harmony import */ var _support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27054);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u(e,t,n,o,i,s,a,l,u,c,f){const d=j[f.mode];let m,p,g=0;if((0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(e,t,n,o,u.spatialReference,i,l))return d.requiresAlignment(f)?(g=d.applyElevationAlignmentBuffer(o,i,s,a,l,u,c,f),m=s,p=a):(m=o,p=i),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(m,u.spatialReference,p,s,c.spatialReference,a,l)?g:void 0}function c(e,t,n,o,r){const s=((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isDehydratedPoint */ .v)(e)?e.z:(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .isSamplePosition */ .cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"relative-to-scene":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"scene")??0,a=n.geometryZWithOffset(s,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"absolute-height":{const i=n.geometryZWithOffset(s,o),a=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,x),x.z}function d(e,t,n){return null==t||null==n?e.definedChanged:"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?T.UPDATE:e.onTheGroundChanged}function m(e){return"relative-to-ground"===e||"relative-to-scene"===e}function p(e){return"absolute-height"!==e}function g(t,n,r,i,a){c(n,r,a,i,x),(0,_graphicUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .updateVertexAttributeAuxpos1w */ .Ig)(t,x.verticalDistanceToGround);const l=x.sampledElevation,u=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(O,t.transformation);z[0]=n.x,z[1]=n.y,z[2]=x.z;return (0,_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__/* .computeTranslationToOriginAndRotation */ .l)(n.spatialReference,z,u,i.spatialReference)?t.transformation=u:console.warn("Could not locate symbol object properly, it might be misplaced"),l}function v(e,t,n,o,r,i){let s=0;const a=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,a,"ground")??0;s+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return s/r}function h(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"ground")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r}function E(e,t,n,o,r,i,s,a){let l=0;const u=a.calculateOffsetRenderUnits(s),c=a.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let d=0;d<r;++d){const r=e[t],s=e[t+1],a=e[t+2],d=i.getElevation(r,s,a,f,"scene")??0;l+=d,n[o]=r,n[o+1]=s,n[o+2]=null==c?a+d+u:d+u,t+=3,o+=3}return l/r}function y(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function A(e,t,n,o,r,i,s,a){const l=a.calculateOffsetRenderUnits(s),u=a.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],s=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?s+l:l,t+=3,o+=3}return 0}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}var T;!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(T||(T={}));const j={"absolute-height":{applyElevationAlignmentBuffer:A,requiresAlignment:y},"on-the-ground":{applyElevationAlignmentBuffer:v,requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:E,requiresAlignment:()=>!0}},O=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),x=new R,z=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)();


/***/ }),

/***/ 9104:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KF: () => (/* binding */ f),
/* harmony export */   MF: () => (/* binding */ d),
/* harmony export */   VG: () => (/* binding */ s),
/* harmony export */   g7: () => (/* binding */ i),
/* harmony export */   gf: () => (/* binding */ l),
/* harmony export */   o8: () => (/* binding */ o),
/* harmony export */   q6: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony export createContextWithoutExpressionSupport */
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40189);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85174);
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(28965);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function u(e){const t=e?.expression;if("string"==typeof t){const e=m(t);if(null!=e)return{cachedResult:e}}return null}async function a(e,r,c,o){const u=e?.expression;if("string"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__/* .loadArcade */ .lw)();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .throwIfAborted */ .Te)(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c.errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__/* .hydrateGeometry */ .wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||"0"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return"0"===e?0:null}


/***/ }),

/***/ 54096:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $2: () => (/* binding */ S),
/* harmony export */   $C: () => (/* binding */ F),
/* harmony export */   Hj: () => (/* binding */ D),
/* harmony export */   Ig: () => (/* binding */ k),
/* harmony export */   Mh: () => (/* binding */ I),
/* harmony export */   W$: () => (/* binding */ w),
/* harmony export */   pW: () => (/* binding */ O),
/* harmony export */   t8: () => (/* binding */ R),
/* harmony export */   vY: () => (/* binding */ V)
/* harmony export */ });
/* unused harmony export overrideColor */
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52712);
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97303);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(23806);
/* harmony import */ var _geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(65319);
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29394);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(85174);
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function w(t,e){if("point"===t.type)return M(t,e,!1);if((0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__/* .isHydratedGeometry */ .gr)(t))switch(t.type){case"extent":return M(t.center,e,!1);case"polygon":return M(t.centroid,e,!1);case"polyline":return M(A(t),e,!0);case"mesh":return M(t.origin,e,!1)}else switch(t.type){case"extent":return M(P(t),e,!0);case"polygon":return M(z(t),e,!0);case"polyline":return M(A(t),e,!0)}}function A(t){const e=t.paths[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .getPointOnPath */ .$H)(e,(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .getPathLength */ .Yl)(e)/2);return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(n[0],n[1],n[2],t.spatialReference)}function P(t){return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}function z(t){const e=t.rings[0];if(!e||0===e.length)return null;const n=(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__/* .ringsCentroid */ .S8)(t.rings,!!t.hasZ);return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(n[0],n[1],n[2],t.spatialReference)}function M(t,e,n){const r=n?t:(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_11__/* .clonePoint */ .EL)(t);return e&&t?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_6__.projectPoint)(t,r,e)?r:null:r}function R(t,e,n,r=0){if(t){e||(e=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__/* .create */ .vt)());const o=t;let i=.5*o.width*(n-1),s=.5*o.height*(n-1);return o.width<1e-7*o.height?i+=s/20:o.height<1e-7*o.width&&(s+=i/20),(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.s)(e,o.xmin-i-r,o.ymin-s-r,o.xmax+i+r,o.ymax+s+r),e}return null}function k(t,e){for(let n=0;n<t.geometries.length;++n){const r=t.geometries[n].getMutableAttribute(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__/* .VertexAttribute */ .r.AUXPOS1);r&&r.data[3]!==e&&(r.data[3]=e,t.geometryVertexAttributeUpdated(t.geometries[n],_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_12__/* .VertexAttribute */ .r.AUXPOS1))}}function F(t,e,n=null){const r=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.d)(_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.O);return null!=t&&(r[0]=t[0],r[1]=t[1],r[2]=t[2]),null!=e?r[3]=e:null!=t&&t.length>3&&(r[3]=t[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function U(t,e,n,r,o,i=[0,0,0,0]){for(let s=0;s<3;++s)i[s]=null!=t?.[s]?t[s]:null!=n?.[s]?n[s]:o[s];return i[3]=null!=e?e:null!=r?r:o[3],i}function O(t=_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.O,e,n,r=1){const o=new Array(3);if(null==e||null==n)o[0]=1,o[1]=1,o[2]=1;else{let r,i=0;for(let s=2;s>=0;s--){const u=t[s];let l;const a=null!=u,m=0===s&&!r&&!a,c=n[s];"symbol-value"===u||m?l=0!==c?e[s]/c:1:a&&"proportional"!==u&&isFinite(u)&&(l=0!==c?u/c:1),null!=l&&(o[s]=l,r=l,i=Math.max(i,Math.abs(l)))}for(let t=2;t>=0;t--)null==o[t]?o[t]=r:0===o[t]&&(o[t]=.001*i)}for(let i=2;i>=0;i--)o[i]/=r;return (0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.e)(o)}function B(t){return null!=t.isPrimitive}function D(t){return I(B(t)?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function I(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function S(t,i,s,u=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__.a)()){return t&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.o)(u,u,-t/180*Math.PI),i&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.r)(u,u,i/180*Math.PI),s&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_1__.n)(u,u,s/180*Math.PI),u}function V(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const o=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnitForSR */ .GA)(n),i=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .width */ .VL)(e)*o,s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .depth */ .yr)(e)*o,u=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .height */ .uJ)(e)*(n.isGeographic?1:o);return 0===i&&0===s&&0===u?r.minDemResolutionForPoints:.01*Math.max(i,s,u)}


/***/ }),

/***/ 2470:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  fetch: () => (/* binding */ X)
});

// UNUSED EXPORTS: gltfToEngineResources, parseUrl

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/devEnvironmentUtils.js
var devEnvironmentUtils = __webpack_require__(19382);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3.js
var mat3 = __webpack_require__(46615);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f64.js
var mat3f64 = __webpack_require__(76287);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingBox.js
var aaBoundingBox = __webpack_require__(4675);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/FloatArray.js
var FloatArray = __webpack_require__(50961);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec22.js
var vec22 = __webpack_require__(56016);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec33.js
var vec33 = __webpack_require__(53866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec43.js
var vec43 = __webpack_require__(33381);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/DefaultLoadingContext.js
var DefaultLoadingContext = __webpack_require__(13298);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/loader.js + 6 modules
var loader = __webpack_require__(31068);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/indexUtils.js
var indexUtils = __webpack_require__(8823);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js
var resourceUtils = __webpack_require__(46629);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/glTF/internal/TextureTransformUtils.js
var TextureTransformUtils = __webpack_require__(80954);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/ProcessedObjectResource.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class ProcessedObjectResource_t{constructor(t,e,r){this.name=t,this.lodThreshold=e,this.pivotOffset=r,this.stageResources=new s,this.numberOfVertices=0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/request.js
var request = __webpack_require__(86394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/byteSizeEstimations.js
var byteSizeEstimations = __webpack_require__(13274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/NestedMap.js
var NestedMap = __webpack_require__(80912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Version.js
var Version = __webpack_require__(50579);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestImageUtils.js
var requestImageUtils = __webpack_require__(34528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js
var Attribute = __webpack_require__(70807);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js + 3 modules
var Geometry = __webpack_require__(59568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js + 4 modules
var Texture = __webpack_require__(28443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js + 2 modules
var DefaultMaterial = __webpack_require__(54482);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const v=Logger/* default */.A.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");async function A(e,t){const n=await j(e,t),s=await E(n.textureDefinitions??{},t);let a=0;for(const r in s)if(s.hasOwnProperty(r)){const e=s[r];a+=e?.image?e.image.width*e.image.height*4:0}return{resource:n,textures:s,size:a+(0,byteSizeEstimations/* estimateNestedObjectSize */.iL)(n)}}async function j(r,n){const s=n?.streamDataRequester;if(s)return I(r,s,n);const a=await (0,asyncUtils/* result */.Ke)((0,request/* default */.A)(r,n));if(!0===a.ok)return a.value.data;(0,promiseUtils/* throwIfAbortError */.QP)(a.error),P(a.error)}async function I(e,r,n){const s=await (0,asyncUtils/* result */.Ke)(r.request(e,"json",n));if(!0===s.ok)return s.value;(0,promiseUtils/* throwIfAbortError */.QP)(s.error),P(s.error.details.url)}function P(e){throw new Error/* default */.A("",`Request for object resource failed: ${e}`)}function M(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(v.warn("Geometry must specify vertex attributes"),n=!1),t.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t?.values?(null!=t.valueType&&"UInt32"!==t.valueType&&(v.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(v.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(v.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else v.warn("Indexed geometries must specify faces"),n=!1;break}default:v.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(v.warn("Geometry requires material"),n=!1);const s=e.params.vertexAttributes;for(const a in s){s[a].values||(v.warn("Geometries with externally defined attributes are not yet supported"),n=!1)}return n}function T(e,t){const r=new Array,n=new Array,s=new Array,o=new NestedMap/* NestedMap */.O,u=e.resource,c=Version/* Version */.R.parse(u.version||"1.0","wosr");q.validate(c);const m=u.model.name,g=u.model.geometries,h=u.materialDefinitions??{},v=e.textures;let A=0;const j=new Map;for(let a=0;a<g.length;a++){const e=g[a];if(!M(e))continue;const i=k(e),u=e.params.vertexAttributes,c=[],m=t=>{if("PerAttributeArray"===e.params.topology)return null;const r=e.params.faces;for(const e in r)if(e===t)return r[e].values;return null},I=u[VertexAttribute/* VertexAttribute */.r.POSITION],P=I.values.length/I.valuesPerElement;for(const t in u){const e=u[t],r=e.values,n=m(t)??(0,Indices/* getContinuousIndexArray */.tM)(P);c.push([t,new Attribute/* Attribute */.n(r,n,e.valuesPerElement,!0)])}const T=i.texture,U=v&&v[T];if(U&&!j.has(T)){const{image:e,parameters:t}=U,r=new Texture/* Texture */.g(e,t);n.push(r),j.set(T,r)}const E=j.get(T),q=E?E.id:void 0,R=i.material;let B=o.get(R,T);if(null==B){const e=h[R.substring(R.lastIndexOf("/")+1)].params;1===e.transparency&&(e.transparency=0);const r=U&&U.alphaChannelUsage,n=e.transparency>0||"transparency"===r||"maskAndTransparency"===r,s=U?O(U.alphaChannelUsage):void 0,a={ambient:(0,vec3f64.e)(e.diffuse),diffuse:(0,vec3f64.e)(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:s,textureAlphaCutoff:.33,textureId:q,initTextureTransparent:!0,doubleSided:!0,cullFace:basicInterfaces/* CullFaceOptions */.s2.None,colorMixMode:e.externalColorMixMode||"tint",textureAlphaPremultiplied:U?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(a,t.materialParameters),B=new DefaultMaterial/* DefaultMaterial */.$U(a),o.set(R,T,B)}s.push(B);const C=new Geometry/* Geometry */.V(B,c);A+=c.find((e=>e[0]===VertexAttribute/* VertexAttribute */.r.POSITION))?.[1]?.indices.length??0,r.push(C)}return{engineResources:[{name:m,stageResources:{textures:n,materials:s,geometries:r},pivotOffset:u.model.pivotOffset,numberOfVertices:A,lodThreshold:null}],referenceBoundingBox:U(r)}}function U(e){const t=(0,aaBoundingBox/* empty */.Ie)();return e.forEach((e=>{const r=e.boundingInfo;null!=r&&((0,aaBoundingBox/* expandWithVec3 */.iT)(t,r.bbMin),(0,aaBoundingBox/* expandWithVec3 */.iT)(t,r.bbMax))})),t}async function E(e,t){const r=new Array;for(const a in e){const n=e[a],s=n.images[0].data;if(!s){v.warn("Externally referenced texture data is not yet supported");continue}const o=n.encoding+";base64,"+s,i="/textureDefinitions/"+a,l="rgba"===n.channels?n.alphaChannelUsage||"transparency":"none",u={noUnpackFlip:!0,wrap:{s:enums/* TextureWrapMode */.pF.REPEAT,t:enums/* TextureWrapMode */.pF.REPEAT},preMultiplyAlpha:O(l)!==basicInterfaces/* AlphaDiscardMode */.sf.Opaque},c=null!=t&&t.disableTextures?Promise.resolve(null):(0,requestImageUtils/* requestImage */.D)(o,t);r.push(c.then((e=>({refId:i,image:e,parameters:u,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function O(e){switch(e){case"mask":return basicInterfaces/* AlphaDiscardMode */.sf.Mask;case"maskAndTransparency":return basicInterfaces/* AlphaDiscardMode */.sf.MaskBlend;case"none":return basicInterfaces/* AlphaDiscardMode */.sf.Opaque;default:return basicInterfaces/* AlphaDiscardMode */.sf.Blend}}function k(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const q=new Version/* Version */.R(1,2,"wosr");

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js
var NormalAttribute_glsl = __webpack_require__(81283);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js
var DefaultMaterial_COLOR_GAMMA = __webpack_require__(42440);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js
var pbrUtils = __webpack_require__(12221);
;// ../node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function X(t,r){const o=Y((0,devEnvironmentUtils/* adjustStaticAGOUrl */.EM)(t));if("wosr"===o.fileType){const e=await(r.cache?r.cache.loadWOSR(o.url,r):A(o.url,r)),{engineResources:t,referenceBoundingBox:s}=T(e,r);return{lods:t,referenceBoundingBox:s,isEsriSymbolResource:!1,isWosr:!0}}const s=await(r.cache?r.cache.loadGLTF(o.url,r,!!r.usePBR):(0,loader/* loadGLTF */.y)(new DefaultLoadingContext/* DefaultLoadingContext */.R(r.streamDataRequester),o.url,r,r.usePBR)),i=s.model.meta?.ESRI_proxyEllipsoid,n=s.meta.isEsriSymbolResource&&null!=i&&s.meta.uri.includes("/RealisticTrees/");n&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,se(s,i));const l=!!r.usePBR,a=s.meta.isEsriSymbolResource?{usePBR:l,isSchematic:!1,treeRendering:n,mrrFactors:[...pbrUtils/* defaultEsriSymbologyMRRFactors */.d_]}:{usePBR:l,isSchematic:!1,treeRendering:!1,mrrFactors:[...pbrUtils/* defaultAdvancedMRRFactors */.Rk]},u={...r.materialParameters,treeRendering:n},{engineResources:c,referenceBoundingBox:m}=Z(s,a,u,r.skipHighLods&&null==o.specifiedLodIndex?{skipHighLods:!0}:{skipHighLods:!1,singleLodIndex:o.specifiedLodIndex});return{lods:c,referenceBoundingBox:m,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function Y(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);if(t)return{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}function Z(e,t,r,o){const s=e.model,i=new Array,n=new Map,l=new Map,a=s.lods.length,u=(0,aaBoundingBox/* empty */.Ie)();return s.lods.forEach(((e,c)=>{const m=!0===o.skipHighLods&&(a>1&&0===c||a>3&&1===c)||!1===o.skipHighLods&&null!=o.singleLodIndex&&c!==o.singleLodIndex;if(m&&0!==c)return;const f=new ProcessedObjectResource_t(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const o=m?new DefaultMaterial/* DefaultMaterial */.$U({}):ee(s,e,f,t,r,n,l),{geometry:i,vertexCount:a}=te(e,null!=o?o:new DefaultMaterial/* DefaultMaterial */.$U({})),p=i.boundingInfo;null!=p&&0===c&&((0,aaBoundingBox/* expandWithVec3 */.iT)(u,p.bbMin),(0,aaBoundingBox/* expandWithVec3 */.iT)(u,p.bbMax)),null!=o&&(f.stageResources.geometries.push(i),f.numberOfVertices+=a)})),m||i.push(f)})),{engineResources:i,referenceBoundingBox:u}}function ee(e,t,r,o,s,i,n){const l=t.material+(t.attributes.normal?"_normal":"")+(t.attributes.color?"_color":"")+(t.attributes.texCoord0?"_texCoord0":"")+(t.attributes.tangent?"_tangent":""),a=e.materials.get(t.material),u=null!=t.attributes.texCoord0,c=null!=t.attributes.normal;if(null==a)return null;const m=oe(a.alphaMode);if(!i.has(l)){if(u){const t=(t,r=!1)=>{if(null!=t&&!n.has(t)){const o=e.textures.get(t);if(null!=o){const e=o.data;n.set(t,new Texture/* Texture */.g((0,resourceUtils/* isEncodedMeshTexture */.x3)(e)?e.data:e,{...o.parameters,preMultiplyAlpha:!(0,resourceUtils/* isEncodedMeshTexture */.x3)(e)&&r,encoding:(0,resourceUtils/* isEncodedMeshTexture */.x3)(e)&&null!=e.encoding?e.encoding:void 0}))}}};t(a.textureColor,m!==basicInterfaces/* AlphaDiscardMode */.sf.Opaque),t(a.textureNormal),t(a.textureOcclusion),t(a.textureEmissive),t(a.textureMetallicRoughness)}const r=a.color[0]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),f=a.color[1]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),d=a.color[2]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),p=a.emissiveFactor[0]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),g=a.emissiveFactor[1]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),x=a.emissiveFactor[2]**(1/DefaultMaterial_COLOR_GAMMA/* colorGamma */.T),b=null!=a.textureColor&&u?n.get(a.textureColor):null,h=(0,pbrUtils/* useSchematicPBR */.Jr)({normalTexture:a.textureNormal,metallicRoughnessTexture:a.textureMetallicRoughness,metallicFactor:a.metallicFactor,roughnessFactor:a.roughnessFactor,emissiveTexture:a.textureEmissive,emissiveFactor:a.emissiveFactor,occlusionTexture:a.textureOcclusion});i.set(l,new DefaultMaterial/* DefaultMaterial */.$U({...o,transparent:m===basicInterfaces/* AlphaDiscardMode */.sf.Blend,customDepthTest:basicInterfaces/* DepthTestFunction */.it.Lequal,textureAlphaMode:m,textureAlphaCutoff:a.alphaCutoff,diffuse:[r,f,d],ambient:[r,f,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:"winding-order",cullFace:a.doubleSided?basicInterfaces/* CullFaceOptions */.s2.None:basicInterfaces/* CullFaceOptions */.s2.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:c?NormalAttribute_glsl/* NormalType */.W.Attribute:NormalAttribute_glsl/* NormalType */.W.ScreenDerivative,castShadows:!0,textureId:null!=b?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:null!=a.textureNormal&&u?n.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:null!=b&&!!b.parameters.preMultiplyAlpha,occlusionTextureId:null!=a.textureOcclusion&&u?n.get(a.textureOcclusion).id:void 0,emissiveTextureId:null!=a.textureEmissive&&u?n.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:null!=a.textureMetallicRoughness&&u?n.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[p,g,x],mrrFactors:h?[...pbrUtils/* defaultSchematicMRRFactors */.mX]:[a.metallicFactor,a.roughnessFactor,o.mrrFactors[2]],isSchematic:h,colorTextureTransformMatrix:(0,TextureTransformUtils/* getTransformMatrix */.G)(a.colorTextureTransform),normalTextureTransformMatrix:(0,TextureTransformUtils/* getTransformMatrix */.G)(a.normalTextureTransform),occlusionTextureTransformMatrix:(0,TextureTransformUtils/* getTransformMatrix */.G)(a.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,TextureTransformUtils/* getTransformMatrix */.G)(a.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,TextureTransformUtils/* getTransformMatrix */.G)(a.metallicRoughnessTextureTransform),...s}))}const f=i.get(l);if(r.stageResources.materials.push(f),u){const e=e=>{null!=e&&r.stageResources.textures.push(n.get(e))};e(a.textureColor),e(a.textureNormal),e(a.textureOcclusion),e(a.textureEmissive),e(a.textureMetallicRoughness)}return f}function te(e,r){const o=e.attributes.position.count,s=(0,indexUtils/* convertPrimitiveToTriangles */.x)(e.indices||o,e.primitiveType),i=(0,FloatArray/* newFloatArray */.oe)(3*o),{typedBuffer:n,typedBufferStride:l}=e.attributes.position;(0,vec32.t)(i,n,e.transform,3,l);const a=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(i,s,3,!0)]];if(null!=e.attributes.normal){const r=(0,FloatArray/* newFloatArray */.oe)(3*o),{typedBuffer:i,typedBufferStride:n}=e.attributes.normal;(0,mat3.n)(re,e.transform),(0,vec32.a)(r,i,re,3,n),a.push([VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(r,s,3,!0)])}if(null!=e.attributes.tangent){const r=(0,FloatArray/* newFloatArray */.oe)(4*o),{typedBuffer:i,typedBufferStride:n}=e.attributes.tangent;(0,mat3.n)(re,e.transform),(0,vec42.t)(r,i,re,4,n),a.push([VertexAttribute/* VertexAttribute */.r.TANGENT,new Attribute/* Attribute */.n(r,s,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,FloatArray/* newFloatArray */.oe)(2*o),{typedBuffer:r,typedBufferStride:i}=e.attributes.texCoord0;(0,vec22.n)(t,r,2,i),a.push([VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(t,s,2,!0)])}if(null!=e.attributes.color){const t=new Uint8Array(4*o);4===e.attributes.color.elementCount?e.attributes.color instanceof BufferView/* BufferViewVec4f */.Eq?(0,vec42.s)(t,e.attributes.color,255):e.attributes.color instanceof BufferView/* BufferViewVec4u8 */.XP?(0,vec43.c)(t,e.attributes.color):e.attributes.color instanceof BufferView/* BufferViewVec4u16 */.Uz&&(0,vec42.s)(t,e.attributes.color,1/256):(t.fill(255),e.attributes.color instanceof BufferView/* BufferViewVec3f */.xs?(0,vec32.s)(t,e.attributes.color,255,4):e.attributes.color instanceof BufferView/* BufferViewVec3u8 */.eI?(0,vec33.c)(t,e.attributes.color.typedBuffer,4,e.attributes.color.typedBufferStride):e.attributes.color instanceof BufferView/* BufferViewVec3u16 */.nS&&(0,vec32.s)(t,e.attributes.color,1/256,4)),a.push([VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(t,s,4,!0)])}return{geometry:new Geometry/* Geometry */.V(r,a),vertexCount:o}}const re=(0,mat3f64.a)();function oe(e){switch(e){case"BLEND":return basicInterfaces/* AlphaDiscardMode */.sf.Blend;case"MASK":return basicInterfaces/* AlphaDiscardMode */.sf.Mask;case"OPAQUE":case null:case void 0:return basicInterfaces/* AlphaDiscardMode */.sf.Opaque}}function se(e,t){for(let r=0;r<e.model.lods.length;++r){const f=e.model.lods[r];for(const d of f.parts){const f=d.attributes.normal;if(null==f)return;const p=d.attributes.position,g=p.count,b=(0,vec3f64.c)(),T=(0,vec3f64.c)(),y=(0,vec3f64.c)(),w=new Uint8Array(4*g),R=new Float64Array(3*g),v=(0,mat4.i)((0,mat4f64.a)(),d.transform);let j=0,B=0;for(let o=0;o<g;o++){p.getVec(o,T),f.getVec(o,b),(0,vec3.e)(T,T,d.transform),(0,vec3.f)(y,T,t.center),(0,vec3.B)(y,y,t.radius);const s=y[2],m=(0,vec3.l)(y),g=Math.min(.45+.55*m*m,1);(0,vec3.B)(y,y,t.radius),null!==v&&(0,vec3.e)(y,y,v),(0,vec3.n)(y,y),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,vec3.p)(y,y,b,s>-1?.2:Math.min(-4*s-3.8,1)),R[j]=y[0],R[j+1]=y[1],R[j+2]=y[2],j+=3,w[B]=255*g,w[B+1]=255*g,w[B+2]=255*g,w[B+3]=255,B+=4}d.attributes.normal=new BufferView/* BufferViewVec3f */.xs(R),d.attributes.color=new BufferView/* BufferViewVec4u8 */.XP(w)}}}


/***/ }),

/***/ 92986:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JQ: () => (/* binding */ O),
/* harmony export */   SY: () => (/* binding */ D),
/* harmony export */   a4: () => (/* binding */ d),
/* harmony export */   dE: () => (/* binding */ A),
/* harmony export */   v7: () => (/* binding */ w),
/* harmony export */   zB: () => (/* binding */ j)
/* harmony export */ });
/* unused harmony export fitPlane */
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17639);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92976);
/* harmony import */ var _chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16528);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21839);
/* harmony import */ var _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(58331);
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(42965);
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(38774);
/* harmony import */ var _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(70807);
/* harmony import */ var _webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(52997);
/* harmony import */ var _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(59568);
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(50645);
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(84698);
/* harmony import */ var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(62802);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function h(t,o,n,a){const s=(t=>!Array.isArray(t[0]))(o)?(t,e)=>o[3*t+e]:(t,e)=>o[t][e],c=a?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getMetersPerUnitForSR */ .GA)(a)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getMetersPerVerticalUnitForSR */ .G9)(a):1;return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__/* .fromManyPoints */ .lU)(t,((t,e)=>(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(t,s(e,0)*c,s(e,1)*c,s(e,2))),n)}function j(e,r,o){const i=h(y,e,r,o)?(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__/* .normal */ .qb)(y):[0,0,1];return Math.abs(i[2])>Math.cos((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .deg2rad */ .kU)(80))?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__/* .Axis */ ._.Z:Math.abs(i[1])>Math.abs(i[0])?_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__/* .Axis */ ._.Y:_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__/* .Axis */ ._.X}const y=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_7__/* .create */ .vt)();function w(t,e,r){const i=j(t,(e.length>0?e[0]:t.length/3)-1,r);if(i!==_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_5__/* .Axis */ ._.Z){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+i]=t[e+2]}return (0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_3__.e)(t,e,3)}function d(t){const e=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.position,t.indices,3,!0)]],r=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_6__/* .getZeroIndexArray */ .EH)(t.indices.length);return null!=t.attributeData.colorFeature?e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n([t.attributeData.colorFeature],r,1,!0)]):t.attributeData.color&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.color,r,4,!0)]),t.attributeData.uvMapSpace&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.UVMAPSPACE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.BOUNDINGRECT,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.boundingRect,t.indices,9,!0)]),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__/* .Geometry */ .V(t.material,e,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__/* .ContentObjectType */ .X.Mesh,t.attributeData.objectAndLayerIdColor)}function D(t,e=null){const r=[[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.position,t.indices,3,!0)],[_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.UV0,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_8__/* .Attribute */ .n(t.attributeData.uv0,t.indices,2,!0)]];return new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__/* .Geometry */ .V(t.material,r,t.mapPositions,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_9__/* .ContentObjectType */ .X.Mesh,e)}function A(t){switch(t.type){case"extent":if(t instanceof _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)return _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A.fromExtent(t);break;case"polygon":return t}return null}class O{constructor(t,e,r){this.renderData=t,this.layerUid=e,this.graphicUid=r,this.outGeometries=new Array}}


/***/ }),

/***/ 56867:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O7: () => (/* binding */ a),
/* harmony export */   Om: () => (/* binding */ e),
/* harmony export */   sv: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,a,t;!function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(e||(e={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(a||(a={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(t||(t={}));


/***/ }),

/***/ 69463:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gd: () => (/* binding */ J),
/* harmony export */   J_: () => (/* binding */ G),
/* harmony export */   VC: () => (/* binding */ W),
/* harmony export */   b3: () => (/* binding */ Q),
/* harmony export */   s_: () => (/* binding */ O),
/* harmony export */   ul: () => (/* binding */ X),
/* harmony export */   wI: () => (/* binding */ B)
/* harmony export */ });
/* unused harmony exports FastColorInfo, FastOpacityInfo, FastRotationInfo, FastRotationType, FastSizeInfo, FastSizeType, FastSymbolUpdatesState, FastVisualVariables, convertVisualVariables, getMaterialParameters */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46615);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22279);
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10301);
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(19620);
/* harmony import */ var _webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var S,y;!function(e){e[e.Undefined=0]="Undefined",e[e.DefinedSize=1]="DefinedSize",e[e.DefinedScale=2]="DefinedScale"}(S||(S={})),function(e){e[e.Undefined=0]="Undefined",e[e.DefinedAngle=1]="DefinedAngle"}(y||(y={}));class x{constructor(e){this.field=e}}class g extends x{constructor(e){super(e),this.minSize=[0,0,0],this.maxSize=[0,0,0],this.offset=[0,0,0],this.factor=[0,0,0],this.type=[S.Undefined,S.Undefined,S.Undefined]}}class b extends x{constructor(e){super(e),this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.values=[0,0,0,0,0,0,0,0]}}class C extends x{constructor(e){super(e),this.values=[0,0,0,0,0,0,0,0],this.opacityValues=[0,0,0,0,0,0,0,0]}}class D extends x{constructor(e){super(e),this.offset=[0,0,0],this.factor=[1,1,1],this.type=[0,0,0]}}class w{}function U(e){return null!=e}function V(e){return"number"==typeof e}function M(e){return"string"==typeof e}function j(e){return null==e||M(e)}function k(e,t){e&&e.push(t)}function A(e,t,o,i=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__.a)()){const n=e||0,s=t||0,r=o||0;return 0!==n&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.o)(i,i,-n/180*Math.PI),0!==s&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.r)(i,i,s/180*Math.PI),0!==r&&(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.n)(i,i,r/180*Math.PI),i}function I(e,t,o,i,n){const s=e.minSize,r=e.maxSize;if(e.expression)return k(n,"Could not convert size info: expression not supported"),!1;if(e.useSymbolValue){const e=i.symbolSize[o];return t.minSize[o]=e,t.maxSize[o]=e,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=S.DefinedSize,!0}if(U(e.field))return U(e.stops)?2===e.stops.length&&V(e.stops[0].size)&&V(e.stops[1].size)?(T(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,o),t.type[o]=S.DefinedSize,!0):(k(n,"Could not convert size info: stops only supported with 2 elements"),!1):V(s)&&V(r)&&U(e.minDataValue)&&U(e.maxDataValue)?(T(s,r,e.minDataValue,e.maxDataValue,t,o),t.type[o]=S.DefinedSize,!0):"unknown"===e.valueUnit?(k(n,"Could not convert size info: proportional size not supported"),!1):null!=_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .meterIn */ .j[e.valueUnit]?(t.minSize[o]=-1/0,t.maxSize[o]=1/0,t.offset[o]=0,t.factor[o]=1/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .meterIn */ .j[e.valueUnit],t.type[o]=S.DefinedSize,!0):(k(n,"Could not convert size info: scale-dependent size not supported"),!1);if(!U(e.field)){if(e.stops?.[0]&&V(e.stops[0].size))return t.minSize[o]=e.stops[0].size,t.maxSize[o]=e.stops[0].size,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=S.DefinedSize,!0;if(V(s))return t.minSize[o]=s,t.maxSize[o]=s,t.offset[o]=s,t.factor[o]=0,t.type[o]=S.DefinedSize,!0}return k(n,"Could not convert size info: unsupported variant of sizeInfo"),!1}function T(e,t,o,i,n,s){const r=Math.abs(i-o)>0?(t-e)/(i-o):0;n.minSize[s]=r>0?e:t,n.maxSize[s]=r>0?t:e,n.offset[s]=e-o*r,n.factor[s]=r}function F(e,t,o,i){if(e.normalizationField||e.valueRepresentation)return k(i,"Could not convert size info: unsupported property"),null;if(!j(e.field))return k(i,"Could not convert size info: field is not a string"),null;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return k(i,"Could not convert size info: multiple fields in use"),null}else t.size.field=e.field}else t.size=new g(e.field);let n;switch(e.axis){case"width":return n=I(e,t.size,0,o,i),n?t:null;case"height":return n=I(e,t.size,2,o,i),n?t:null;case"depth":return n=I(e,t.size,1,o,i),n?t:null;case"width-and-depth":return n=I(e,t.size,0,o,i),n&&I(e,t.size,1,o,i),n?t:null;case null:case void 0:case"all":return n=I(e,t.size,0,o,i),n=n&&I(e,t.size,1,o,i),n=n&&I(e,t.size,2,o,i),n?t:null;default:return k(i,`Could not convert size info: unknown axis "${e.axis}""`),null}}function P(e,t,o){for(let n=0;n<3;++n){let o=t.unitInMeters;e.type[n]===S.DefinedSize&&(o*=t.modelSize[n],e.type[n]=S.DefinedScale),e.minSize[n]=e.minSize[n]/o,e.maxSize[n]=e.maxSize[n]/o,e.offset[n]=e.offset[n]/o,e.factor[n]=e.factor[n]/o}let i;if(e.type[0]!==S.Undefined)i=0;else if(e.type[1]!==S.Undefined)i=1;else{if(e.type[2]===S.Undefined)return k(o,"No size axis contains a valid size or scale"),!1;i=2}for(let n=0;n<3;++n)e.type[n]===S.Undefined&&(e.minSize[n]=e.minSize[i],e.maxSize[n]=e.maxSize[i],e.offset[n]=e.offset[i],e.factor[n]=e.factor[i],e.type[n]=e.type[i]);return!0}function R(e,t,o){e[4*t]=o.r/255,e[4*t+1]=o.g/255,e[4*t+2]=o.b/255,e[4*t+3]=o.a}function E(e,t,o){if(e.normalizationField)return k(o,"Could not convert color info: unsupported property"),null;if(M(e.field)){if(!e.stops)return k(o,"Could not convert color info: missing stops or colors"),null;{if(e.stops.length>8)return k(o,"Could not convert color info: too many color stops"),null;t.color=new b(e.field);const i=e.stops;for(let e=0;e<8;++e){const o=i[Math.min(e,i.length-1)];t.color.values[e]=o.value,R(t.color.colors,e,o.color)}}}else{if(!(e.stops&&e.stops.length>=0))return k(o,"Could not convert color info: no field and no colors/stops"),null;{const o=e.stops&&e.stops.length>=0&&e.stops[0].color;t.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};for(let e=0;e<8;e++)t.color.values[e]=1/0,R(t.color.colors,e,o)}}return t}function _(e,t,o){if(e.normalizationField)return k(o,"Could not convert opacity info: unsupported property"),null;if(M(e.field)){if(!e.stops)return k(o,"Could not convert opacity info: missing stops or opacities"),null;{if(e.stops.length>8)return k(o,"Could not convert opacity info: too many opacity stops"),null;t.opacity=new C(e.field);const i=e.stops;for(let e=0;e<8;++e){const o=i[Math.min(e,i.length-1)];t.opacity.values[e]=o.value,t.opacity.opacityValues[e]=o.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return k(o,"Could not convert opacity info: no field and no opacities/stops"),null;{const o=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};for(let e=0;e<8;e++)t.opacity.values[e]=1/0,t.opacity.opacityValues[e]=o}}return t}function q(e,t,o){const i=2===o&&"arithmetic"===e.rotationType;t.offset[o]=i?90:0,t.factor[o]=i?-1:1,t.type[o]=1}function $(e,t,o){if(!M(e.field))return k(o,"Could not convert rotation info: field is not a string"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return k(o,"Could not convert rotation info: multiple fields in use"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case"tilt":return q(e,t.rotation,0),t;case"roll":return q(e,t.rotation,1),t;case null:case void 0:case"heading":return q(e,t.rotation,2),t;default:return k(o,`Could not convert rotation info: unknown axis "${e.axis}""`),null}}class B{constructor(e,t=[1,1,1],o=[1,1,1],i=1,n=[0,0,0],s=[1,1,1],r=[0,0,0]){this.supports=e,this.modelSize=t,this.symbolSize=o,this.unitInMeters=i,this.anchor=n,this.scale=s,this.rotation=r}}function L(e,t,o){if(!e)return null;const i=e.reduce(((e,i)=>{if(!e)return e;if(i.valueExpression)return k(o,"Could not convert visual variables: arcade expressions not supported"),null;switch(i.type){case"size":return t.supports.size?F(i,e,t,o):e;case"color":return t.supports.color?E(i,e,o):e;case"opacity":return t.supports.opacity?_(i,e,o):null;case"rotation":return t.supports.rotation?$(i,e,o):e;default:return null}}),new w);return!(e.length>0&&i)||i.size||i.color||i.opacity||i.rotation?i?.size&&!P(i.size,t,o)?null:i:null}class N{constructor(e,t,o){this.visualVariables=e,this.materialParameters=t,this.requiresShaderTransformation=o}}function O(e,t){if(!e)return null;if(_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_9__/* .debugFlags */ .b.TESTS_DISABLE_FAST_UPDATES)return null;const o=L(e.visualVariables,t);return o?new N(o,K(o,t),!!o.size):null}function G(e,t,o){if(!t||!e)return!1;const i=e.visualVariables,n=L(t.visualVariables,o);return!!n&&(!!(H(i.size,n.size,"size")&&H(i.color,n.color,"color")&&H(i.rotation,n.rotation,"rotation")&&H(i.opacity,n.opacity,"opacity"))&&(e.visualVariables=n,e.materialParameters=K(n,o),e.requiresShaderTransformation=!!n.size,!0))}function H(e,t,o){if(!!e!=!!t)return!1;if(e&&e.field!==t?.field)return!1;if(e&&"rotation"===o){const o=e,i=t;for(let e=0;e<3;e++)if(o.type[e]!==i.type[e]||o.offset[e]!==i.offset[e]||o.factor[e]!==i.factor[e])return!1}return!0}class J extends _webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .NoParameters */ .Y{constructor(e){super(),this.vvSize=e?.size??null,this.vvColor=e?.color??null,this.vvOpacity=e?.opacity??null}}function K(e,n){const s=new J(e);return s.vvSize&&(s.vvSymbolAnchor=n.anchor,(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.g)(ee),A(n.rotation[2],n.rotation[0],n.rotation[1],ee),s.vvSymbolRotationMatrix=s.vvSymbolRotationMatrix||(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_3__.a)(),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.f)(s.vvSymbolRotationMatrix,ee)),s}function Q(t,o,i){if(!t.vvSize)return i;(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.h)(Y,i);const u=t.vvSymbolRotationMatrix;(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.s)(ee,u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,0,0,0,1),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.m)(Y,Y,ee);for(let n=0;n<3;++n){const i=t.vvSize.offset[n]+o[0]*t.vvSize.factor[n];Z[n]=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)(i,t.vvSize.minSize[n],t.vvSize.maxSize[n])}return (0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.b)(Y,Y,Z),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_4__.w)(Y,Y,t.vvSymbolAnchor),Y}function W(t,o,i){if(!o.vvSize)return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_6__.s)(t,1,1,1),t;for(let n=0;n<3;++n){const s=o.vvSize.offset[n]+i[0]*o.vvSize.factor[n];t[n]=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)(s,o.vvSize.minSize[n],o.vvSize.maxSize[n])}return t}function X(e,t){const o=null==e?0:t.attributes[e];return"number"==typeof o&&isFinite(o)?o:0}const Y=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__.a)(),Z=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__.c)(),ee=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__.a)();


/***/ }),

/***/ 27054:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R1: () => (/* binding */ a),
/* harmony export */   aY: () => (/* binding */ r),
/* harmony export */   cN: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80009);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return"array"in e}function a(r,a,n="ground"){if((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isDehydratedPoint */ .v)(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}


/***/ }),

/***/ 11110:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BP: () => (/* binding */ H),
/* harmony export */   l5: () => (/* binding */ I),
/* harmony export */   q3: () => (/* binding */ G)
/* harmony export */ });
/* unused harmony export InterleavedBuffer */
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57813);
/* harmony import */ var _geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32846);
/* harmony import */ var _webgl_engine_lib_Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class D{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const s of e.fields.keys()){const t=e.fields.get(s);this[s]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const s=this[e];return s&&s.elementCount===t.ElementCount&&s.elementType===t.ElementType?s:null}slice(e,t){return new D(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,s=0,i=e.count){const r=this.stride;if(r%4==0){const n=new Uint32Array(e.buffer,t*r,i*r/4);new Uint32Array(this.buffer,s*r,i*r/4).set(n)}else{const n=new Uint8Array(e.buffer,t*r,i*r);new Uint8Array(this.buffer,s*r,i*r).set(n)}return this}get usedMemory(){return this.byteLength}dispose(){}}class G{constructor(e=null){this._stride=0,this._lastAligned=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:N(e[1].constructor)}))))}vec2f(t,s){return this._appendField(t,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2f */ .gH,s),this}vec2f64(e,s){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2f64 */ .si,s),this}vec3f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3f */ .xs,t),this}vec3f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3f64 */ .Xm,t),this}vec4f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4f */ .Eq,t),this}vec4f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4f64 */ .Aj,t),this}mat3f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat3f */ .jZ,t),this}mat3f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat3f64 */ .j0,t),this}mat4f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat4f */ .Sx,t),this}mat4f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat4f64 */ .E$,t),this}vec4u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4u8 */ .XP,t),this}f32(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewFloat */ .Y$,t),this}f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewFloat64 */ .qB,t),this}u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint8 */ .SL,t),this}u16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint16 */ .h,t),this}i8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewInt8 */ .bf,t),this}vec2i8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2i8 */ .D6,t),this}vec2i16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2i16 */ .mJ,t),this}vec2u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2u8 */ .LC,t),this}vec4u16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4u16 */ .Uz,t),this}u32(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint32 */ .P,t),this}_appendField(e,t,s){if(this._fields.has(e))return void (0,_webgl_engine_lib_Util_js__WEBPACK_IMPORTED_MODULE_1__/* .assert */ .vA)(!1,`${e} already added to vertex buffer layout`);const i=t.ElementCount*(0,_geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_2__/* .elementTypeSize */ .GJ)(t.ElementType),r=this._stride;this._stride+=i,this._fields.set(e,{size:i,constructor:t,offset:r,optional:s})}createBuffer(e){return new D(this,e)}createView(e){return new D(this,e)}clone(){const e=new G;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,s)=>e._fields.set(s,t))),e.BufferType=this.BufferType,e}get stride(){if(this._lastAligned!==this._fields.size){let e=1;this._fields.forEach((t=>e=Math.max(e,(0,_geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_2__/* .elementTypeSize */ .GJ)(t.constructor.ElementType)))),this._stride=Math.floor((this._stride+e-1)/e)*e,this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}function H(){return new G}class I{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const s={...e,constructor:K(e.constructor)};this.fields.push([t,s])})),this.stride=e.stride}}const J=[_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewFloat */ .Y$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2f */ .gH,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3f */ .xs,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4f */ .Eq,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat3f */ .jZ,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat4f */ .Sx,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewFloat64 */ .qB,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2f64 */ .si,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3f64 */ .Xm,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4f64 */ .Aj,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat3f64 */ .j0,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewMat4f64 */ .E$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint8 */ .SL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2u8 */ .LC,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3u8 */ .eI,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4u8 */ .XP,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint16 */ .h,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2u16 */ .Yi,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3u16 */ .nS,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4u16 */ .Uz,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewUint32 */ .P,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2u32 */ .An,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3u32 */ .H$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4u32 */ .ml,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewInt8 */ .bf,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2i8 */ .D6,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3i8 */ .m8,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4i8 */ .TX,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewInt16 */ .Qt,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2i16 */ .mJ,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3i16 */ .Vp,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4i16 */ .E7,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewInt32 */ .My,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec2i32 */ .UL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec3i32 */ .zD,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferViewVec4i32 */ .Y4];function K(e){return`${e.ElementType}_${e.ElementCount}`}function N(e){return O.get(e)}const O=new Map;J.forEach((e=>O.set(K(e),e)));


/***/ }),

/***/ 15788:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(e,r=0){const n=e.stride;return Array.from(e.fields.keys()).map((i=>{const s=e.fields.get(i),u=s.constructor.ElementCount,f=o(s.constructor.ElementType),c=s.offset,l=!(!s.optional||!s.optional.glNormalized);return new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._(i,u,f,c,n,l,r)}))}function o(e){const t=n[e];if(t)return t;throw new Error("BufferType not supported in WebGL")}const n={u8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_BYTE,u16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT,u32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_INT,i8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,i16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.SHORT,i32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.INT,f32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.FLOAT};


/***/ }),

/***/ 19620:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let T=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LABELS_SHOW_BORDER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TEXT_SHOW_BASELINE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TEXT_SHOW_BORDER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"SHOW_POI",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LINE_WIREFRAMES",void 0),T=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.3d.support.DebugFlags")],T);const t=new T;


/***/ }),

/***/ 46684:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ b),
/* harmony export */   z: () => (/* binding */ R)
/* harmony export */ });
/* harmony import */ var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52712);
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(47936);
/* harmony import */ var _geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12943);
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(90166);
/* harmony import */ var _geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50961);
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(42965);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(10714);
/* harmony import */ var _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(70807);
/* harmony import */ var _webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(52997);
/* harmony import */ var _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(59568);
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function b(t,e,r=null){const o=[],n=e.mapPositions;g(e,o);const i=o[0][1].data,a=o[0][1].indices.length,u=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_8__/* .getZeroIndexArray */ .EH)(a);return h(e,o,u),j(e,o,u),T(e,o,u),D(e,o,u),w(e,o,u),y(e,o,u),E(e,o,i),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_12__/* .Geometry */ .V(t,o,n,_webgl_engine_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_11__/* .ContentObjectType */ .X.Line,r)}function g(t,e){const{attributeData:{position:r},removeDuplicateStartEnd:o}=t,n=A(r)&&o,i=r.length/3-(n?1:0),a=new Array(2*(i-1)),u=n?r.slice(0,-3):r;let s=0;for(let l=0;l<i-1;l++)a[s++]=l,a[s++]=l+1;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n(u,a,3,n)])}function h(t,e,r){if(null!=t.attributeData.colorFeature)return;const n=t.attributeData.color;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n(n??_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.O,r,4)])}function T(t,e,r){t.attributeData.normal&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.NORMAL,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n(t.attributeData.normal,r,3)])}function D(t,e,r){null!=t.attributeData.colorFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n([t.attributeData.colorFeature],r,1,!0)])}function j(t,e,r){null==t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.SIZE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n([t.attributeData.size??1],r,1,!0)])}function w(t,e,r){null!=t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.SIZEFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n([t.attributeData.sizeFeature],r,1,!0)])}function y(t,e,r){null!=t.attributeData.opacityFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.OPACITYFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n([t.attributeData.opacityFeature],r,1,!0)])}function E(r,o,s){if(null==r.overlayInfo||r.overlayInfo.renderCoordsHelper.viewingMode!==_ViewingMode_js__WEBPACK_IMPORTED_MODULE_9__/* .ViewingMode */ .RT.Global||!r.overlayInfo.spatialReference.isGeographic)return;const p=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__/* .newDoubleArray */ .jh)(s.length),f=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .getReferenceEllipsoid */ .tO)(r.overlayInfo.spatialReference);for(let t=0;t<p.length;t+=3)(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_5__/* .lonLatToWebMercatorComparable */ .RC)(s,t,p,t,f);const b=s.length/3,g=(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_7__/* .newFloatArray */ .oe)(b+1);let h=I,T=F,D=0,j=0;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(h,p[j++],p[j++],p[j++]),g[0]=0;for(let n=1;n<b+1;++n)n===b&&(j=0),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_1__.s)(T,p[j++],p[j++],p[j++]),D+=(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.p)(h,T),g[n]=D,[h,T]=[T,h];o.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_13__/* .VertexAttribute */ .r.DISTANCETOSTART,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_10__/* .Attribute */ .n(g,o[0][1].indices,1,!0)])}function A(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}const I=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),F=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)();function R(t,e){if(null==t||0===t.length)return[];const r=[];return t.forEach((t=>{const o=t.length,n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_6__/* .newDoubleArray */ .jh)(3*o);t.forEach(((t,e)=>{n[3*e]=t[0],n[3*e+1]=t[1],n[3*e+2]=t[2]}));const i={attributeData:{position:n,normal:e},removeDuplicateStartEnd:!1};r.push(i)})),r}


/***/ }),

/***/ 50980:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cz: () => (/* binding */ s),
/* harmony export */   DZ: () => (/* binding */ w),
/* harmony export */   PV: () => (/* binding */ p),
/* harmony export */   vO: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony exports createMarkerTexture, markerThickness */
/* harmony import */ var _sdfPrimitives_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97213);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6940);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45758);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m=64,s=m/2,n=s/5,p=m/n,w=.25;function f(p,w){const f=r(p,m,s,n),u=new i;return u.internalFormat=e.RGBA,u.width=m,u.height=m,u.wrapMode=t.CLAMP_TO_EDGE,new o(w,u,f)}


/***/ }),

/***/ 97213:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CN: () => (/* binding */ o),
/* harmony export */   Q_: () => (/* binding */ e),
/* harmony export */   ny: () => (/* binding */ a),
/* harmony export */   sZ: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony exports createArrow, createCircle, createCross, createKite, createPrimitive, createSquare, createTriangle, createX */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51859);
/* harmony import */ var _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28443);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=128,o=.5;function a(t){return"cross"===t||"x"===t}function u(t,a=e,u=a*o,s=0){const i=c(t,a,u,s);return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_2__/* .Texture */ .g(i,{mipmap:!1,wrap:{s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE},width:a,height:a,components:4,noUnpackFlip:!0,reloadable:!0})}function c(t,r=e,n=r*o,a=0){switch(t){case"circle":default:return s(r,n);case"square":return i(r,n);case"cross":return h(r,n,a);case"x":return M(r,n,a);case"kite":return f(r,n);case"triangle":return l(r,n);case"arrow":return m(r,n)}}function s(t,r){const n=t/2-.5;return x(t,T(n,n,r/2))}function i(t,r){return p(t,r,!1)}function f(t,r){return p(t,r,!0)}function h(t,r,n=0){return b(t,r,!1,n)}function M(t,r,n=0){return b(t,r,!0,n)}function l(t,r){return x(t,w(t/2,r,r/2))}function m(t,r){const n=r,e=r/2,o=t/2,a=.8*n,u=T(o,(t-r)/2-a,Math.sqrt(a*a+e*e)),c=w(o,n,e);return x(t,((t,r)=>Math.max(c(t,r),-u(t,r))))}function p(t,r,n){return n&&(r/=Math.SQRT2),x(t,((e,o)=>{let a=e-.5*t+.25,u=.5*t-o-.75;if(n){const t=(a+u)/Math.SQRT2;u=(u-a)/Math.SQRT2,a=t}return Math.max(Math.abs(a),Math.abs(u))-.5*r}))}function b(t,r,n,e=0){r-=e,n&&(r*=Math.SQRT2);const o=.5*r;return x(t,((r,a)=>{let u,c=r-.5*t,s=.5*t-a-1;if(n){const t=(c+s)/Math.SQRT2;s=(s-c)/Math.SQRT2,c=t}return c=Math.abs(c),s=Math.abs(s),u=c>s?c>o?Math.sqrt((c-o)*(c-o)+s*s):s:s>o?Math.sqrt(c*c+(s-o)*(s-o)):c,u-=e/2,u}))}function T(t,r,n){return(e,o)=>{const a=e-t,u=o-r;return Math.sqrt(a*a+u*u)-n}}function w(t,r,n){const e=Math.sqrt(r*r+n*n);return(o,a)=>{const u=Math.abs(o-t)-n,c=a-t+r/2+.75,s=(r*u+n*c)/e,i=-c;return Math.max(s,i)}}function x(r,n){const e=new Uint8Array(4*r*r);for(let o=0;o<r;o++)for(let a=0;a<r;a++){const u=a+r*o;let c=n(a,o);c=c/r+.5,(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__/* .packFloatRGBA */ .U)(c,e,4*u)}return e}


/***/ }),

/***/ 4062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ l),
/* harmony export */   C: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84119);
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90166);
/* harmony import */ var _geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17566);
/* harmony import */ var _layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27716);
/* harmony import */ var _terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(93471);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function p(o,t,s,p){const l="polygon"===o.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.NONE,a="polygon"===o.type?o.rings:o.paths,{position:u,outlines:f}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .pathsToTriangulationInfo */ .jp)(a,!!o.hasZ,l,o.spatialReference),g=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .newDoubleArray */ .jh)(u.length),m=(0,_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .applyPerVertexElevationAlignment */ .au)(u,o.spatialReference,0,g,0,u,0,u.length/3,t,s,p),y=null!=m;return{lines:y?c(f,u,g):[],projectionSuccess:y,sampledElevation:m}}function l(e,t){const i="polygon"===e.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.NONE,p="polygon"===e.type?e.rings:e.paths,{position:l,outlines:a}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .pathsToTriangulationInfo */ .jp)(p,!1,i),u=(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__.projectBuffer)(l,e.spatialReference,0,l,t,0,l.length/3);for(let o=2;o<l.length;o+=3)l[o]=_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .drapedZ */ .bi;return{lines:u?c(a,l):[],projectionSuccess:u}}function c(o,e,n=null){const r=new Array;for(const{index:i,count:s}of o){if(s<=1)continue;const o=3*i,p=3*s;r.push({position:(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .doubleSubArray */ .l5)(e,3*i,3*s),mapPositions:null!=n?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .doubleSubArray */ .l5)(n,o,p):void 0})}return r}


/***/ }),

/***/ 93471:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  bi: () => (/* binding */ se)
});

// UNUSED EXPORTS: OverlayRenderer, overlayRenderOccludedFlag

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/SetUtils.js
var SetUtils = __webpack_require__(76286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/interfaces.js
var interfaces = __webpack_require__(56867);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/debugFlags.js
var debugFlags = __webpack_require__(19620);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/terrain/interfaces.js
var terrain_interfaces = __webpack_require__(36572);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js
var LocalOriginFactory = __webpack_require__(32926);
;// ../node_modules/@arcgis/core/views/3d/terrain/Overlay.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Overlay_n=1.3;class Overlay_r{constructor(){this._extent=(0,aaBoundingRect/* create */.vt)(),this.resolution=0,this.renderLocalOrigin=(0,LocalOriginFactory/* fromValues */.f)(0,0,0,"O"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new Overlay_o}get extent(){return this._extent}setupGeometryViewsCyclical(e){this.setupGeometryViewsDirect();const s=.001*e.range;if(this._extent[0]-s<=e.min){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect/* offset */.cY)(this._extent,e.range,0,s)}if(this._extent[2]+s>=e.max){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect/* offset */.cY)(this._extent,-e.range,0,s)}}setupGeometryViewsDirect(){this.canvasGeometries.numViews=1,(0,aaBoundingRect/* copy */.C)(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}}class Overlay_o{constructor(){this.extents=[(0,aaBoundingRect/* create */.vt)(),(0,aaBoundingRect/* create */.vt)(),(0,aaBoundingRect/* create */.vt)()],this.numViews=0}}

;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayContent.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var OverlayContent_o;!function(o){o[o.Color=0]="Color",o[o.ColorNoRasterImage=1]="ColorNoRasterImage",o[o.Highlight=2]="Highlight",o[o.WaterNormal=3]="WaterNormal",o[o.Occluded=4]="Occluded",o[o.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(OverlayContent_o||(OverlayContent_o={}));

;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayFramebufferObject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class OverlayFramebufferObject_t{constructor(e,t){this._fbos=e,this._format=t}get valid(){return null!=this._handle}dispose(){this._handle=(0,maybe/* releaseMaybe */.Gz)(this._handle)}get texture(){return this._handle?.colorTexture}bind(e,t,h){this._handle&&this._handle.fbo.width===t&&this._handle.fbo.height===h||(this._handle?.release(),this._handle=this._fbos.acquire(this._format,t,h)),e.bindFramebuffer(this._handle?.fbo)}generateMipMap(){this._handle?.colorTexture?.descriptor?.hasMipmap&&this._handle?.colorTexture?.generateMipmap()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOCache.js + 1 modules
var FBOCache = __webpack_require__(4588);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTargets.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class OverlayRenderTargets_s{constructor(e,o,s,a=FBOCache/* ColorFormat */.NV.RGBA_MIPMAP){this.output=o,this.content=s,this.fbo=new OverlayFramebufferObject_t(e,a)}get valid(){return this.fbo.valid}}class OverlayRenderTargets_a{constructor(r){this.targets=[new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.Color),new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.ColorNoRasterImage),new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.Highlight,OverlayContent_o.Highlight,FBOCache/* ColorFormat */.NV.RGBA4),new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.Normal,OverlayContent_o.WaterNormal),new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.Occluded)],(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&this.targets.push(new OverlayRenderTargets_s(r,ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor,OverlayContent_o.ObjectAndLayerIdColor))}getTexture(e){return this.targets[e]?.fbo.texture}dispose(){for(const e of this.targets)e.fbo.dispose()}computeValidity(){return this.targets.reduce(((e,r,t)=>r.valid?e|=1<<t:e),0)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js
var VertexNormal_glsl = __webpack_require__(82089);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/renderPasses/AllRenderPasses.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class AllRenderPasses_e extends VertexNormal_glsl/* VertexNormalPassParameters */.Zo{constructor(){super(...arguments),this.slicePlaneLocalOrigin=(0,vec3f64.c)(),this.origin=this.slicePlaneLocalOrigin,this.modelTransformation=null}}class AllRenderPasses_a extends (/* unused pure expression or super */ null && (i)){}var AllRenderPasses_o;!function(t){t[t.Material=0]="Material",t[t.ShadowMap=1]="ShadowMap",t[t.Highlight=2]="Highlight"}(AllRenderPasses_o||(AllRenderPasses_o={}));class AllRenderPasses_n extends AllRenderPasses_e{constructor(){super(...arguments),this.identifier=AllRenderPasses_o.Material,this.output=ShaderOutput/* ShaderOutput */.V.Color,this.transparent=!1}}class AllRenderPasses_l extends AllRenderPasses_e{constructor(){super(...arguments),this.identifier=AllRenderPasses_o.ShadowMap}}class h extends AllRenderPasses_e{constructor(){super(...arguments),this.identifier=AllRenderPasses_o.Highlight}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js
var MainLighting_glsl = __webpack_require__(696);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js + 4 modules
var Water_glsl = __webpack_require__(65554);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js
var Uniform = __webpack_require__(99198);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js
var BindType = __webpack_require__(57198);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Float4DrawUniform_o extends Uniform/* Uniform */.n{constructor(r,o){super(r,"vec4",BindType/* BindType */.c.Draw,((e,s,t)=>e.setUniform4fv(r,o(s,t))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var shaderModules_interfaces = __webpack_require__(99152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var Overlay_glsl_f;function C(e,o){const{vertex:r,fragment:t}=e;r.uniforms.add(new x("overlayTexOffset",((e,o)=>b(e,o))),new x("overlayTexScale",((e,o)=>M(e,o)))),t.constants.add("overlayOpacity","float",1),t.uniforms.add(new u("ovColorTex",((e,o)=>O(e,o)))),T(e,o)}function g(e,o){const{vertex:r,fragment:t}=e;r.uniforms.add(new Overlay_glsl_h("overlayTexOffset"),new Overlay_glsl_h("overlayTexScale")),t.uniforms.add(new p("overlayOpacity",(e=>e.overlayOpacity)),new u("ovColorTex",((e,o)=>o.overlay?.getTexture(e.overlayContent)))),T(e,o)}!function(e){e[e.Disabled=0]="Disabled",e[e.Enabled=1]="Enabled",e[e.EnabledWithWater=2]="EnabledWithWater",e[e.COUNT=3]="COUNT"}(Overlay_glsl_f||(Overlay_glsl_f={}));class Overlay_glsl_h extends Uniform/* Uniform */.n{constructor(e){super(e,"vec4")}}function T(e,o){o.pbrMode!==c.Water&&o.pbrMode!==c.WaterOnIntegratedMesh&&o.pbrMode!==c.TerrainWithWater||e.include(v,o);const{vertex:r,fragment:t}=e;e.varyings.add("vtcOverlay","vec4"),r.code.add(y`void setOverlayVTC(in vec2 uv) {
vtcOverlay = vec4(uv, uv) * overlayTexScale + overlayTexOffset;
}`),t.code.add(y`bool isValid(vec2 uv, vec2 dxdy) {
return (uv.x >= 0.0 + dxdy.x) && (uv.x <= 1.0 - dxdy.x) && (uv.y >= 0.0 + dxdy.y) && (uv.y <= 1.0 - dxdy.y);
}
vec4 getOverlayColor(sampler2D ov0Tex, vec4 texCoords) {
vec4 color0 = texture(ov0Tex, vec2(texCoords.x * 0.5, texCoords.y));
vec4 color1 = texture(ov0Tex, vec2(texCoords.z * 0.5 + 0.5, texCoords.w));
bool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));
bool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));
return mix(color1 * float(isValid1), color0, float(isValid0));
}`),t.code.add(y`vec4 getCombinedOverlayColor() {
return overlayOpacity * getOverlayColor(ovColorTex, vtcOverlay);
}`),t.code.add(y`vec4 getOverlayColorTexel(vec4 texCoords) {
vec2 texDim =  vec2(textureSize(ovColorTex, 0));
vec4 color0 = texelFetch(ovColorTex, ivec2(vec2(texCoords.x * 0.5, texCoords.y) * texDim), 0);
vec4 color1 = texelFetch(ovColorTex, ivec2(vec2(texCoords.z * 0.5 + 0.5, texCoords.w) * texDim), 0);
bool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));
bool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));
return mix(color1 * float(isValid1), color0, float(isValid0));
}`),o.pbrMode!==c.Water&&o.pbrMode!==c.WaterOnIntegratedMesh&&o.pbrMode!==c.TerrainWithWater||(n(t),d(t),t.code.add(y`vec4 getOverlayWaterColor(vec4 maskInput, vec4 colorInput, vec3 vposEyeDir,
float shadow, vec3 localUp, mat3 tbn, vec3 position, vec3 positionWorld) {
vec3 n = normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));
vec3 v = vposEyeDir;
vec3 final = getSeaColor(n, v, mainLightDirection, colorInput.rgb, mainLightIntensity, localUp, 1.0 - shadow, maskInput.w, position, positionWorld);
return vec4(final, colorInput.w);
}`))}function O(e,o){return e.identifier===i.Material&&e.output===s.Color?o.overlay?.getTexture(l.ColorNoRasterImage):e.identifier===i.Material&&e.output===s.ObjectAndLayerIdColor?o.overlay?.getTexture(l.ObjectAndLayerIdColor):e.identifier===i.Highlight?o.overlay?.getTexture(l.Highlight):null}function b(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(w[0]=e.toMapSpace[0]/r(i)-i[0]/r(i),w[1]=e.toMapSpace[1]/t(i)-i[1]/t(i));const s=l.overlay?.overlays[a.OUTER]?.extent;return o(s)&&(w[2]=e.toMapSpace[0]/r(s)-s[0]/r(s),w[3]=e.toMapSpace[1]/t(s)-s[1]/t(s)),w}function M(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(w[0]=e.toMapSpace[2]/r(i),w[1]=e.toMapSpace[3]/t(i));const s=l.overlay?.overlays[a.OUTER]?.extent;return o(s)&&(w[2]=e.toMapSpace[2]/r(s),w[3]=e.toMapSpace[3]/t(s)),w}const w=(0,vec4f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/TextureOnly.glsl.js
var TextureOnly_glsl = __webpack_require__(52377);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/NestedMap.js
var NestedMap = __webpack_require__(80912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class ShaderTechniqueRepository_r{constructor(t){this._context=t,this._perConstructorInstances=new NestedMap/* NestedMap */.O,this._frameCounter=0,this._keepAliveFrameCount=ShaderTechniqueRepository_n}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}destroy(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.destroy())))),this._perConstructorInstances.clear()}acquire(e,t=ShaderTechniqueRepository_o){const r=t.key;let n=this._perConstructorInstances.get(e,r);if(null==n){const o=new e(this._context,t,(()=>this.release(o)));n=new ShaderTechniqueRepository_s(o),this._perConstructorInstances.set(e,r,n)}return++n.refCount,n.technique}releaseAndAcquire(e,t,r){if(null!=r){if(t.key===r.key)return r;this.release(r)}return this.acquire(e,t)}release(e){if(null==e||this._perConstructorInstances.empty)return;const t=this._perConstructorInstances.get(e.constructor,e.key);null!=t&&(--t.refCount,0===t.refCount&&(t.refZeroFrame=this._frameCounter))}frameUpdate(){this._frameCounter++,this._keepAliveFrameCount!==ShaderTechniqueRepository_n&&this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((e,r)=>{0===e.refCount&&e.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(e.technique.destroy(),this._perConstructorInstances.delete(t,r))}))}))}async reloadAll(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{const s=async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>e.technique.reload(this._context))))};e.push(s(t,r))})),await Promise.all(e)}}class ShaderTechniqueRepository_s{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}const ShaderTechniqueRepository_n=-1,ShaderTechniqueRepository_o=new ShaderTechniqueConfiguration/* ShaderTechniqueConfiguration */.K;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js
var RenderPlugin = __webpack_require__(38931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js + 1 modules
var Camera = __webpack_require__(36549);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class GLMaterialRepository_s{constructor(e,t,i,s){this._textureRepository=e,this._techniqueRepository=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new NestedMap/* NestedMap */.O}dispose(){this._textureRepository.destroy()}acquire(e,t,r){if(this._ownMaterial(e),!e.produces(t,r))return null;let i=this._id2glMaterialRef.get(r,e.id);if(null==i){const t=e.createGLMaterial({material:e,techniqueRep:this._techniqueRepository,textureRepository:this._textureRepository,output:r});i=new GLMaterialRepository_o(t),this._id2glMaterialRef.set(r,e.id,i)}return i.ref(),i.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||((0,maybe/* disposeMaybe */.WD)(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){t.repository&&t.repository!==this&&Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.GLMaterialRepository").error("Material is already owned by a different material repository"),t.repository=this}}class GLMaterialRepository_o{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,(0,Util/* assert */.vA)(this._refCnt>=0)}get referenced(){return this._refCnt>0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js
var VertexElementDescriptor = __webpack_require__(69955);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const DefaultVertexBufferLayouts_n=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,3,enums/* DataType */.pe.FLOAT,0,12)],DefaultVertexBufferLayouts_w=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,3,enums/* DataType */.pe.FLOAT,0,20),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.UV0,2,enums/* DataType */.pe.FLOAT,12,20)],I=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,3,enums/* DataType */.pe.FLOAT,0,32),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.NORMAL,3,enums/* DataType */.pe.FLOAT,12,32),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.UV0,2,enums/* DataType */.pe.FLOAT,24,32)],DefaultVertexBufferLayouts_r=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,3,enums/* DataType */.pe.FLOAT,0,16),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.COLOR,4,enums/* DataType */.pe.UNSIGNED_BYTE,12,16)],DefaultVertexBufferLayouts_t=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,2,enums/* DataType */.pe.FLOAT,0,8)],A=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,2,enums/* DataType */.pe.FLOAT,0,16),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.UV0,2,enums/* DataType */.pe.FLOAT,8,16)];

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(11459);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/glUtil3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function glUtil3D_i(s,u=r,f=e,i=-1,a=1){let l=null;if(u===t)l=new Float32Array([i,i,0,0,a,i,1,0,i,a,0,1,a,a,1,1]);else l=new Float32Array([i,i,a,i,i,a,a,a]);return new o(s,f,{geometry:u},{geometry:n.createVertex(s,m.STATIC_DRAW,l)})}function glUtil3D_a(t,s=r,u=e){const f=new Float32Array([-1,-1,3,-1,-1,3]);return new o(t,u,{geometry:s},{geometry:n.createVertex(t,m.STATIC_DRAW,f)})}const glUtil3D_l=4;function glUtil3D_c(e){const r=new f(glUtil3D_l);return r.samplingMode=s.NEAREST,new u(e,r)}function glUtil3D_w(e){const r=new TextureDescriptor/* TextureDescriptor */.R(1);return r.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,new Texture/* Texture */.g(e,r,new Uint8Array([255,255,255,255]))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js
var GridLocalOriginFactory = __webpack_require__(24734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/time.js
var time = __webpack_require__(60882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js
var CloudsParameters = __webpack_require__(58718);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js
var HUDRenderStyle = __webpack_require__(15354);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl.js
var MultipassGeometryTest_glsl = __webpack_require__(46823);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js
var MultipassTerrainTest_glsl = __webpack_require__(80600);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js + 2 modules
var SceneLighting = __webpack_require__(9409);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BindParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BindParameters_m{constructor(i,m){this.shadowMap=i,this.slicePlane=m,this.slot=RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,this.hasOccludees=!1,this.enableFillLights=!0,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.alignPixelEnabled=!1,this.decorations=basicInterfaces/* Decorations */.ID.ON,this.overlayStretch=1,this._camera=new Camera/* Camera */.i,this._inverseViewport=(0,vec2f64.a)(),this.oldLighting=new SceneLighting/* SceneLighting */.T,this.newLighting=new SceneLighting/* SceneLighting */.T,this._fadedLighting=new SceneLighting/* SceneLighting */.T,this._lighting=this.newLighting,this.ssr=new BindParameters_c,this.multipassEnabled=!1,this.multipassTerrain=new MultipassTerrainTest_glsl/* MultipassTerrainUniforms */.h,this.multipassGeometry=new MultipassGeometryTest_glsl/* MultipassGeometryUniforms */.U,this.hudRenderStyle=HUDRenderStyle/* HUDRenderStyle */.D.Occluded,this.cloudsFade=new CloudsParameters/* CloudsParameters */.ny}get camera(){return this._camera}set camera(i){this._camera=i,this._inverseViewport[0]=1/i.fullViewport[2],this._inverseViewport[1]=1/i.fullViewport[3]}get inverseViewport(){return this._inverseViewport}get lighting(){return this._lighting}get weatherFading(){return this._lighting===this._fadedLighting}fadeLighting(i){const{oldLighting:t,newLighting:e}=this;i>=1?this._lighting=e:(this._fadedLighting.lerpLighting(t,e,i),this._lighting=this._fadedLighting)}}class BindParameters_c{constructor(){this.fadeFactor=1,this.reprojectionMatrix=(0,mat4f64.a)()}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class RenderContext_i{constructor(e,a,i=null){this.rctx=e,this.sliceHelper=i,this.lastFrameCamera=new Camera/* Camera */.i,this.output=ShaderOutput/* ShaderOutput */.V.Color,this.renderOccludedMask=RenderContext_l,this.bindParameters=new BindParameters_m(a,null!=i?i.plane:null),this.bindParameters.alignPixelEnabled=!0}resetRenderOccludedMask(){this.renderOccludedMask=RenderContext_l}}class RenderContext_n extends RenderContext_i{constructor(r,s,t,a){super(r,t,a),this.offscreenRenderingHelper=s,this.sliceHelper=a,this.time=(0,time/* Milliseconds */.l5)(0)}}const RenderContext_l=Material/* RenderOccludedFlag */.m$.Occlude|Material/* RenderOccludedFlag */.m$.OccludeAndTransparent|Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f64.js
var mat3f64 = __webpack_require__(76287);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4.js
var vec4 = __webpack_require__(25102);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/CascadeCamera.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let CascadeCamera_p=class extends Camera/* Camera */.i{constructor(){super(...arguments),this._projectionMatrix=(0,mat4f64.a)()}get projectionMatrix(){return this._projectionMatrix}};(0,tslib_es6._)([(0,property/* property */.MZ)()],CascadeCamera_p.prototype,"_projectionMatrix",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],CascadeCamera_p.prototype,"projectionMatrix",null),CascadeCamera_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.CascadeCamera")],CascadeCamera_p);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js
var textureUtils = __webpack_require__(84147);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowMap.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var W;!function(t){t[t.Highlight=0]="Highlight",t[t.Default=1]="Default"}(W||(W={}));class z{constructor(){this.camera=new CascadeCamera_p,this.lightMat=(0,mat4f64.a)()}}class P{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class q{get depthTexture(){return this._handle?.colorTexture}get _textureWidth(){return this._textureHeight*this._numCascades}get numCascades(){return this._numCascades}get cascadeDistances(){return (0,vec4.s)(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}constructor(t,s){this._fbos=t,this._viewingMode=s,this._enabled=!1,this._snapshots=new Array,this._textureHeight=0,this._numCascades=1,this.settings=new P,this._projectionView=(0,mat4f64.a)(),this._projectionViewInverse=(0,mat4f64.a)(),this._modelViewLight=(0,mat4f64.a)(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=(0,vec4f64.c)(),this._cascades=[new z,new z,new z,new z],this._lastOrigin=null,this._maxTextureWidth=Math.min((0,has/* default */.A)("esri-mobile")?4096:16384,t.rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}disposeOffscreenBuffers(){this._handle=(0,maybe/* releaseMaybe */.Gz)(this._handle),this._discardSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=(0,mathUtils/* clamp */.qE)(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}get cascades(){for(let t=0;t<this._numCascades;++t)et[t]=this._cascades[t];return et.length=this._numCascades,et}start(t,s,e,a,i){(0,Util/* assert */.vA)(this.enabled);const{near:r,far:h}=this._clampNearFar(e);this._computeCascadeDistances(r,h,a),this._textureHeight=this._computeTextureHeight(t,i,a),this._setupMatrices(t,s);const{viewMatrix:n,projectionMatrix:c}=t;for(let o=0;o<this._numCascades;++o)this._constructCascade(o,c,n,s);this._lastOrigin=null,this.clear()}finish(){(0,Util/* assert */.vA)(this.enabled),this._handle?.releaseDepth()}getShadowMapMatrices(t){if(!this._lastOrigin||!(0,vec3.h)(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||(0,vec3f64.c)(),(0,vec3.c)(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){(0,mat4.w)(at,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)it[16*s+t]=at[t]}}return it}moveSnapshot(t){(0,Util/* assert */.vA)(this.enabled),this._handle?.releaseDepth(),this._snapshots[t]?.release(),this._snapshots[t]=this._handle,this._handle=null}copySnapshot(t){const s=this._handle?.colorTexture?.descriptor;if(!this.enabled||!s)return;this._snapshots[t]?.release();const{width:e,height:a}=s;this._snapshots[t]=this._fbos.acquire(FBOCache/* ColorFormat */.NV.RGBA4,e,a);const i=this._fbos.rctx;this._bindFbo();const r=i.bindTexture(this._snapshots[t]?.colorTexture,Texture/* Texture */.g.TEXTURE_UNIT_FOR_UPDATES);i.gl.copyTexSubImage2D(enums/* TextureType */.Ap.TEXTURE_2D,0,0,0,0,0,e,a),i.bindTexture(r,Texture/* Texture */.g.TEXTURE_UNIT_FOR_UPDATES)}getSnapshot(t){return this.enabled?this._snapshots[t]?.colorTexture:null}clear(){const t=this._fbos.rctx;this._ensureFbo(),this._bindFbo(),t.setClearColor(1,1,1,1),t.clearSafe(enums/* ClearBufferBit */.hn.COLOR_BUFFER_BIT|enums/* ClearBufferBit */.hn.DEPTH_BUFFER_BIT)}_computeTextureHeight(t,s,e){const a=Math.min(window.devicePixelRatio,s)/t.pixelRatio,i=e?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality,r=(0,textureUtils/* applyTextureResizeModulo */.Mv)(Math.floor(Math.max(t.fullWidth,t.fullHeight)*a*i));return Math.min(this._maxTextureWidth,this._numCascades*r)/this._numCascades}_ensureFbo(){this._handle?.fbo.width===this._textureWidth&&this._handle?.fbo.height===this._textureHeight||(this._handle?.release(),this._handle=this._fbos.acquire(FBOCache/* ColorFormat */.NV.RGBA4,this._textureWidth,this._textureHeight)),this._handle.acquireDepth(FBOCache/* DepthFormat */.zd.DEPTH16_BUFFER)}_discardSnapshot(t){this._snapshots[t]=(0,maybe/* releaseMaybe */.Gz)(this._snapshots[t])}_discardSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}_bindFbo(){const t=this._fbos.rctx;t.unbindTexture(this.depthTexture),t.bindFramebuffer(this._handle?.fbo)}_constructCascade(t,s,e,a){const i=this._cascades[t],n=-this._cascadeDistances[t],c=-this._cascadeDistances[t+1],o=(s[10]*n+s[14])/Math.abs(s[11]*n+s[15]),u=(s[10]*c+s[14])/Math.abs(s[11]*c+s[15]);(0,Util/* assert */.vA)(o<u);for(let r=0;r<8;++r){(0,vec4.s)(X,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?o:u,1);const t=J[r];(0,vec4.t)(t,X,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}(0,vec3.E)(st,J[0]),i.camera.viewMatrix=(0,mat4.w)(G,this._modelViewLight,st);for(let r=0;r<8;++r)(0,vec3.e)(J[r],J[r],i.camera.viewMatrix);let l=J[0][2],_=J[0][2];for(let r=1;r<8;++r)l=Math.min(l,J[r][2]),_=Math.max(_,J[r][2]);l-=200,_+=200,i.camera.near=-_,i.camera.far=-l,Ct(e,a,l,_,i.camera),(0,mat4.m)(i.lightMat,i.camera.projectionMatrix,i.camera.viewMatrix);const d=this._textureHeight;i.camera.viewport=[t*d,0,d,d]}_setupMatrices(t,s){(0,mat4.m)(this._projectionView,t.projectionMatrix,t.viewMatrix),(0,mat4.i)(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===ViewingMode/* ViewingMode */.RT.Global?t.eye:(0,vec3.s)(st,0,0,1);(0,mat4.u)(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_clampNearFar(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}_computeCascadeDistances(t,e,a){const i=a?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor((0,Util/* logWithBase */.kL)(e/t,4)),i);const r=(e-t)/this._numCascades,h=(e/t)**(1/this._numCascades);let n=t,c=t;for(let o=0;o<this._numCascades+1;++o)this._cascadeDistances[o]=(0,mathUtils/* lerp */.Cc)(n,c,this.settings.splitSchemeLambda),n*=h,c+=r}get test(){return{cascades:this._cascades,textureHeight:this._textureHeight}}}const G=(0,mat4f64.a)(),X=(0,vec4f64.c)(),J=[];for(let jt=0;jt<8;++jt)J.push((0,vec4f64.c)());const K=(0,vec2f64.a)(),Y=(0,vec2f64.a)(),Z=(0,vec2f64.a)(),$=(0,vec2f64.a)(),tt=(0,vec2f64.a)(),st=(0,vec3f64.c)(),et=[],at=(0,mat4f64.a)(),it=mat4f64.I.concat(mat4f64.I,mat4f64.I,mat4f64.I,mat4f64.I),rt=(0,vec2f64.a)(),ht=(0,vec2f64.a)(),nt=[(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)(),(0,vec2f64.a)()],ct=(0,vec2f64.a)(),ot=(0,vec2f64.a)(),ut=(0,vec2f64.a)(),lt=(0,vec2f64.a)(),_t=(0,vec2f64.a)(),dt=(0,vec2f64.a)(),mt=(0,vec2f64.a)();function ft(t,s,e,a,i,r,h,n){(0,vec2.s)(rt,0,0);for(let l=0;l<4;++l)(0,vec2.i)(rt,rt,t[l]);(0,vec2.a)(rt,rt,.25),(0,vec2.s)(ht,0,0);for(let l=4;l<8;++l)(0,vec2.i)(ht,ht,t[l]);(0,vec2.a)(ht,ht,.25),(0,vec2.l)(nt[0],t[4],t[5],.5),(0,vec2.l)(nt[1],t[5],t[6],.5),(0,vec2.l)(nt[2],t[6],t[7],.5),(0,vec2.l)(nt[3],t[7],t[4],.5);let c=0,o=(0,vec2.k)(nt[0],rt);for(let l=1;l<4;++l){const t=(0,vec2.k)(nt[l],rt);t<o&&(o=t,c=l)}(0,vec2.c)(ct,nt[c],t[c+4]);const u=ct[0];let w,C;ct[0]=-ct[1],ct[1]=u,(0,vec2.c)(ot,ht,rt),(0,vec2.g)(ot,ct)<0&&(0,vec2.n)(ct,ct),(0,vec2.l)(ct,ct,ot,e),(0,vec2.e)(ct,ct),w=C=(0,vec2.g)((0,vec2.c)(ut,t[0],rt),ct);for(let l=1;l<8;++l){const s=(0,vec2.g)((0,vec2.c)(ut,t[l],rt),ct);s<w?w=s:s>C&&(C=s)}(0,vec2.j)(a,rt),(0,vec2.a)(ut,ct,w-s),(0,vec2.i)(a,a,ut);let j=-1,T=1,y=0,D=0;for(let l=0;l<8;++l){(0,vec2.c)(lt,t[l],a),(0,vec2.e)(lt,lt);const s=ct[0]*lt[1]-ct[1]*lt[0];s>0?s>j&&(j=s,y=l):s<T&&(T=s,D=l)}(0,Util/* verify */.MX)(j>0,"leftArea"),(0,Util/* verify */.MX)(T<0,"rightArea"),(0,vec2.a)(_t,ct,w),(0,vec2.i)(_t,_t,rt),(0,vec2.a)(dt,ct,C),(0,vec2.i)(dt,dt,rt),mt[0]=-ct[1],mt[1]=ct[0];const H=(0,Util/* rayRay2D */.L)(a,t[D],dt,(0,vec2.i)(ut,dt,mt),1,i),v=(0,Util/* rayRay2D */.L)(a,t[y],dt,ut,1,r),S=(0,Util/* rayRay2D */.L)(a,t[y],_t,(0,vec2.i)(ut,_t,mt),1,h),F=(0,Util/* rayRay2D */.L)(a,t[D],_t,ut,1,n);(0,Util/* verify */.MX)(H,"rayRay"),(0,Util/* verify */.MX)(v,"rayRay"),(0,Util/* verify */.MX)(S,"rayRay"),(0,Util/* verify */.MX)(F,"rayRay")}function pt(t,s){return 3*s+t}const gt=(0,vec2f64.a)();function xt(t,s){return (0,vec2.s)(gt,t[s],t[s+3]),gt}const bt=(0,vec2f64.a)(),Mt=(0,mat3f64.a)();function wt(t,s,e,a,i){(0,vec2.c)(bt,e,a),(0,vec2.a)(bt,bt,.5),Mt[0]=bt[0],Mt[1]=bt[1],Mt[2]=0,Mt[3]=bt[1],Mt[4]=-bt[0],Mt[5]=0,Mt[6]=bt[0]*bt[0]+bt[1]*bt[1],Mt[7]=bt[0]*bt[1]-bt[1]*bt[0],Mt[8]=1,Mt[pt(0,2)]=-(0,vec2.g)(xt(Mt,0),t),Mt[pt(1,2)]=-(0,vec2.g)(xt(Mt,1),t);let r=(0,vec2.g)(xt(Mt,0),e)+Mt[pt(0,2)],h=(0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)],n=(0,vec2.g)(xt(Mt,0),a)+Mt[pt(0,2)],c=(0,vec2.g)(xt(Mt,1),a)+Mt[pt(1,2)];r=-(r+n)/(h+c),Mt[pt(0,0)]+=Mt[pt(1,0)]*r,Mt[pt(0,1)]+=Mt[pt(1,1)]*r,Mt[pt(0,2)]+=Mt[pt(1,2)]*r,r=1/((0,vec2.g)(xt(Mt,0),e)+Mt[pt(0,2)]),h=1/((0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)]),Mt[pt(0,0)]*=r,Mt[pt(0,1)]*=r,Mt[pt(0,2)]*=r,Mt[pt(1,0)]*=h,Mt[pt(1,1)]*=h,Mt[pt(1,2)]*=h,Mt[pt(2,0)]=Mt[pt(1,0)],Mt[pt(2,1)]=Mt[pt(1,1)],Mt[pt(2,2)]=Mt[pt(1,2)],Mt[pt(1,2)]+=1,r=(0,vec2.g)(xt(Mt,1),s)+Mt[pt(1,2)],h=(0,vec2.g)(xt(Mt,2),s)+Mt[pt(2,2)],n=(0,vec2.g)(xt(Mt,1),e)+Mt[pt(1,2)],c=(0,vec2.g)(xt(Mt,2),e)+Mt[pt(2,2)],r=-.5*(r/h+n/c),Mt[pt(1,0)]+=Mt[pt(2,0)]*r,Mt[pt(1,1)]+=Mt[pt(2,1)]*r,Mt[pt(1,2)]+=Mt[pt(2,2)]*r,r=(0,vec2.g)(xt(Mt,1),s)+Mt[pt(1,2)],h=(0,vec2.g)(xt(Mt,2),s)+Mt[pt(2,2)],n=-h/r,Mt[pt(1,0)]*=n,Mt[pt(1,1)]*=n,Mt[pt(1,2)]*=n,i[0]=Mt[0],i[1]=Mt[1],i[2]=0,i[3]=Mt[2],i[4]=Mt[3],i[5]=Mt[4],i[6]=0,i[7]=Mt[5],i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=Mt[6],i[13]=Mt[7],i[14]=0,i[15]=Mt[8]}function Ct(t,s,a,i,r){const h=1/J[0][3],n=1/J[4][3];(0,Util/* assert */.vA)(h<n);let c=h+Math.sqrt(h*n);const o=Math.sin((0,mathUtils/* acosClamped */.XM)(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));c/=o,ft(J,c,o,K,Y,Z,$,tt),wt(K,Y,$,tt,r.projectionMatrix),r.projectionMatrix[10]=2/(a-i),r.projectionMatrix[14]=-(a+i)/(a-i)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js
var IntersectorInterfaces = __webpack_require__(44912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorTarget.js
var IntersectorTarget = __webpack_require__(9286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/intersectorUtils.js
var intersectorUtils = __webpack_require__(99730);
;// ../node_modules/@arcgis/core/views/3d/terrain/Intersector.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function Intersector_n(r){return t(r)&&r.intersector===e.TERRAIN&&!!r.target}class Intersector_i extends IntersectorTarget/* Graphic3DTarget */.R6{constructor(e,r,t){super(e,r),this.triangleNr=t}}function Intersector_o(r){return t(r)&&r.intersector===e.OVERLAY&&!!r.target}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ChangeSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class ChangeSet_s{constructor(){this.adds=new PooledArray/* default */.A,this.removes=new PooledArray/* default */.A,this.updates=new PooledArray/* default */.A({allocator:e=>e||new ChangeSet_r,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class ChangeSet_r{}class ChangeSet_t{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js
var Intersector = __webpack_require__(74515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js
var ModelDirtyTypes = __webpack_require__(23183);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function rendererUtils_r(r){const n=new Map,o=r=>{let t=n.get(r);return t||(t=new ChangeSet_t,n.set(r,t)),t};return r.removes.forAll((e=>{rendererUtils_t(e)&&o(e.material).removes.push(e)})),r.adds.forAll((e=>{rendererUtils_t(e)&&o(e.material).adds.push(e)})),r.updates.forAll((e=>{rendererUtils_t(e.renderGeometry)&&o(e.renderGeometry.material).updates.push(e)})),n}function rendererUtils_t(e){return e.geometry.indexCount>=1}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js
var glUtil = __webpack_require__(15788);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterials.js
var GLMaterials = __webpack_require__(72136);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DrawParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class DrawParameters_i extends VertexNormal_glsl/* VertexNormalDrawParameters */.gy{constructor(s=(0,vec3f64.c)()){super(),this.origin=s,this.slicePlaneLocalOrigin=this.origin}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js + 2 modules
var WaterMaterial = __webpack_require__(42649);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/BufferRange.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BufferRange_t{constructor(t=0,o=0){this.from=t,this.to=o}get numElements(){return this.to-this.from}}function BufferRange_o(t){const o=new Map;t.forAll((t=>o.set(t.from,t)));let e=!0;for(;e;)e=!1,t.forEach((r=>{const s=o.get(r.to);s&&(r.to=s.to,o.delete(s.from),t.removeUnordered(s),e=!0)}))}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Instance_s extends BufferRange_t{constructor(e,s,t){super(s,t),this.geometry=e}get isVisible(){return this.geometry.visible}get hasHighlights(){return null!=this.geometry.highlights&&this.isVisible}get hasOccludees(){return null!=this.geometry.occludees}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/DrawCommand.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class DrawCommand_t{constructor(){this.first=0,this.count=0}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerBufferData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PerBufferData_n{constructor(){this._numElements=0,this._instances=new Map,this.holes=new PooledArray/* default */.A({allocator:s=>s||new BufferRange_t,deallocator:null}),this.hasHiddenInstances=!1,this.hasHighlights=!1,this.hasOccludees=!1,this.drawCommandsDirty=!0,this.drawCommandsDefault=PerBufferData_o(),this.drawCommandsHighlight=PerBufferData_o(),this.drawCommandsOccludees=PerBufferData_o(),this.drawCommandsShadowHighlightRest=PerBufferData_o()}get numElements(){return this._numElements}get instances(){return this._instances}addInstance(s,t){this.deleteInstance(s),this._instances.set(s,t),this._numElements+=t.numElements}deleteInstance(s){const t=this._instances.get(s);t&&(this._numElements-=t.numElements,this._instances.delete(s))}updateInstance(s,t,e){const n=this._instances.get(s);n&&(this._numElements-=n.numElements,n.from=t,n.to=e,this._numElements+=n.numElements)}updateDrawState(s){s.isVisible?(s.hasHighlights&&(this.hasHighlights=!0),s.hasOccludees&&(this.hasOccludees=!0)):this.hasHiddenInstances=!0}updateDrawCommands(s){if(this.drawCommandsDefault.clear(),this.drawCommandsHighlight.clear(),this.drawCommandsOccludees.clear(),this.drawCommandsShadowHighlightRest.clear(),this.drawCommandsDirty=!1,0===this._instances.size)return;if(!this.needsMultipleCommands()){const t=this.drawCommandsDefault.pushNew(),e=this.holes.front();return null!=this.vao&&1===this.holes.length&&e.to===Math.floor(this.vao.byteSize/s)?(t.first=0,void(t.count=e.from)):(t.first=1/0,t.count=0,this._instances.forEach((s=>{t.first=Math.min(t.first,s.from),t.count=Math.max(t.count,s.to)})),void(t.count-=t.first))}const t=Array.from(this._instances.values()).sort(((s,t)=>s.from===t.from?s.to-t.to:s.from-t.from));for(const e of t)e.isVisible&&(PerBufferData_h(e.hasOccludees?this.drawCommandsOccludees:this.drawCommandsDefault,e),PerBufferData_h(e.hasHighlights?this.drawCommandsHighlight:this.drawCommandsShadowHighlightRest,e))}needsMultipleCommands(){return this.hasOccludees||this.hasHighlights||this.hasHiddenInstances}}class PerBufferData_i extends (/* unused pure expression or super */ null && (PerBufferData_n)){}function PerBufferData_a(s){return null!=s.vao}function PerBufferData_o(){return new PooledArray/* default */.A({allocator:s=>s||new DrawCommand_t,deallocator:s=>s})}function PerBufferData_h(s,t){const e=s.back();if(null==e){const e=s.pushNew();return e.first=t.from,void(e.count=t.numElements)}if(PerBufferData_r(e,t)){const s=t.from-e.first+t.numElements;e.count=s}else{const e=s.pushNew();e.first=t.from,e.count=t.numElements}}function PerBufferData_r(s,t){return s.first+s.count>=t.from}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/PerOriginData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PerOriginData_s{constructor(s){this.origin=s,this.buffers=new Array}dispose(){this.buffers.forEach((s=>s.vao.dispose())),this.buffers.length=0}findBuffer(s){return this.buffers.find((r=>r.instances.has(s)))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MemCache.js
var MemCache = __webpack_require__(40210);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MemCachePool.js
var MemCachePool = __webpack_require__(6660);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/VaoCache.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const VaoCache_c=MemCache/* minPriority */.Xs+1;class VaoCache_i{constructor(e,o,r){this._rctx=e,this._locations=o,this._layout=r,this._cache=new MemCachePool/* MemCachePool */.I(e.newCache,"VAOCache")}dispose(){this._cache.destroy()}newVao(e){const t=e.toString();let c=this._cache.pop(t);return c||(c=new VertexArrayObject/* VertexArrayObject */.Z(this._rctx,this._locations,{geometry:this._layout},{geometry:BufferObject/* BufferObject */.g.createVertex(this._rctx,enums/* Usage */._U.STATIC_DRAW)}),c.vertexBuffers.geometry.setSize(e),c)}deleteVao(e){if(null==e)return;const t=e.byteSize.toString();this._cache.put(t,e,VaoCache_c)}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let S=class extends RenderPlugin/* SyncPrepareRenderPlugin */.Ot{constructor(e){super(e),this._vaoCache=null,this._glMaterials=null,this._bufferWriter=null,this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this.priority=0,this.produces=new Map}dispose(){this._glMaterials=(0,maybe/* disposeMaybe */.WD)(this._glMaterials),this._dataByOrigin.forEach((e=>e.dispose())),this._dataByOrigin.clear(),this._vaoCache=(0,maybe/* disposeMaybe */.WD)(this._vaoCache)}initializeRenderContext(e,t){const{rctx:r}=e.renderContext;this._glMaterials=new GLMaterials/* GLMaterials */.c(this.material,t??e.materialRepository),this._bufferWriter=this.material.createBufferWriter(),this._vaoCache=new VaoCache_i(r,this.material.vertexAttributeLocations,(0,glUtil/* glLayout */.U)(this._bufferWriter.vertexBufferLayout))}uninitializeRenderContext(){}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&this.material instanceof WaterMaterial/* WaterMaterial */.Z}get isDecoration(){return this.material.parameters.isDecoration}get rendersOccluded(){return!this.isEmpty&&this.material.parameters.renderOccluded!==Material/* RenderOccludedFlag */.m$.Occlude}get numGeometries(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.instances.size),0))),e}get usedMemory(){let e=0;return this._dataByOrigin.forEach((t=>e+=t.buffers.reduce(((e,t)=>e+t.vao.usedMemory),0))),e}forEachGeometry(e){this._dataByOrigin.forEach((t=>t.buffers.forEach((t=>t.instances.forEach((t=>e(t.geometry)))))))}modify(e){this._updateGeometries(e.updates),this._addAndRemoveGeometries(e.adds,e.removes),this._updateDrawCommands()}_updateGeometries(e){const t=this._bufferWriter;if(null===t)return;const r=t.vertexBufferLayout.stride/4;for(const s of e){const e=s.renderGeometry,i=this._dataByOrigin.get(e.localOrigin.id),a=i?.findBuffer(e.id);if(null==a)return;const o=a.instances.get(e.id);if(s.updateType&(ModelDirtyTypes/* DirtyState */.k.GEOMETRY|ModelDirtyTypes/* DirtyState */.k.TRANSFORMATION)){const s=F(t.elementCount(o.geometry.geometry)*r),i=t.vertexBufferLayout.createView(s.buffer);this._writeGeometry(e,i,0),a.vao.vertexBuffers.geometry.setSubData(s,o.from*r,0,o.numElements*r)}s.updateType&(ModelDirtyTypes/* DirtyState */.k.HIGHLIGHT|ModelDirtyTypes/* DirtyState */.k.OCCLUDEE|ModelDirtyTypes/* DirtyState */.k.VISIBILITY)&&(a.drawCommandsDirty=!0)}}_computeDeltas(e,t){const r=new NestedMap/* NestedMap */.O;for(const s of e){const e=s.localOrigin;if(null==e)continue;let t=r.get(e.id,null);null==t&&(t=new MergedRenderer_x(e.vec3),r.set(e.id,null,t)),t.changes.push(s)}for(const s of t){const e=s.localOrigin;if(null==e)continue;const t=this._dataByOrigin.get(e.id),i=t?.findBuffer(s.id);if(null==i)continue;let a=r.get(e.id,i);null==a&&(a=new MergedRenderer_x(e.vec3),r.set(e.id,i,a)),a.changes.push(s)}return r}_addAndRemoveGeometries(e,r){if(null===this._bufferWriter||null===this._vaoCache)return;const{_bufferWriter:s,_dataByOrigin:i}=this,a=s.vertexBufferLayout.stride/4,o=this._computeDeltas(e,r);o.forEach(((e,r)=>{const n=e.get(null),l=null!=n?n.changes:[];o.delete(r,null);let u=i.get(r);if(e.forEach(((e,n)=>{if(o.delete(r,n),null==n)return void (0,Util/* assert */.vA)(!1,"No VAO for removed geometries");if(n.instances.size===e.changes.length)return this._vaoCache.deleteVao(n.vao),(0,arrayUtils/* removeUnordered */.Xy)(u.buffers,n),void(0===u.buffers.length&&0===l.length&&i.delete(r));const h=n.numElements,c=n.vao.byteSize/4,f=l.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),m=e.changes.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),d=Math.min((h+f-m)*a,U),g=d>c;d>MergedRenderer_P&&d<c/2?(e.changes.forEach((({id:e})=>n.deleteInstance(e))),n.instances.forEach((({geometry:e})=>l.push(e))),this._vaoCache.deleteVao(n.vao),(0,arrayUtils/* removeUnordered */.Xy)(u.buffers,n)):g?this._applyAndRebuild(n,l,e):this._applyRemoves(n,e)})),l.length>0)for(null==u&&(u=new PerOriginData_s(n.origin),i.set(r,u)),u.buffers.forEach((e=>this._applyAdds(e,l)));l.length>0;)u.buffers.push(this._applyAndRebuild(new PerBufferData_n,l,null))}))}_updateDrawCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.buffers.forEach((e=>{e.drawCommandsDirty&&(e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,(0,MapUtils/* someMap */.Bs)(e.instances,(t=>(e.updateDrawState(t),e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees))),e.updateDrawCommands(this._bufferWriter.vertexBufferLayout.stride)),this._hasHighlights=this._hasHighlights||e.hasHighlights,this._hasOccludees=this._hasOccludees||e.hasOccludees}))}))}_applyAndRebuild(e,t,r){if(null!=r)for(const m of r.changes)e.deleteInstance(m.id);const s=this._bufferWriter,i=s.vertexBufferLayout.stride,a=i/4,o=Math.floor(U/a);let n=e.numElements;for(;t.length>0;){const r=t.pop(),i=s.elementCount(r.geometry);if(n+i>o&&n>0){t.push(r);break}n+=i;const a=new Instance_s(r,0,0);(0,Util/* assert */.vA)(null==e.instances.get(r.id)),e.addInstance(r.id,a)}const l=n*a,u=F(l),h=s.vertexBufferLayout.createView(u.buffer);let c=0;e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,e.instances.forEach(((t,r)=>{this._writeGeometry(t.geometry,h,c);const i=c;c+=s.elementCount(t.geometry.geometry),e.updateInstance(r,i,c),e.updateDrawState(t)})),this._vaoCache.deleteVao(e.vao),e.vao=this._vaoCache.newVao(MergedRenderer_q(l)),e.vao.vertexBuffers.geometry.setSubData(u,0,0,c*a),e.holes.clear();const f=e.holes.pushNew();return f.from=c,f.to=Math.floor(e.vao.byteSize/i),e.updateDrawCommands(i),e}_applyRemoves(e,t){if(0===t.changes.length||null===this._bufferWriter)return;for(const o of t.changes){const t=o.id,r=e.instances.get(t);if(!r)continue;e.deleteInstance(t);const s=MergedRenderer_G.back();if(s){if(s.to===r.from){s.to=r.to;continue}if(s.from===r.to){s.from=r.from;continue}}const i=MergedRenderer_G.pushNew();i.from=r.from,i.to=r.to}BufferRange_o(MergedRenderer_G);const r=this._bufferWriter.vertexBufferLayout.stride/4,s=MergedRenderer_G.reduce(((e,t)=>Math.max(e,t.numElements)),0)*r,i=F(s);i.fill(0,0,s);const a=e.vao.vertexBuffers.geometry;MergedRenderer_G.forAll((e=>a.setSubData(i,e.from*r,0,e.numElements*r))),e.holes.pushArray(MergedRenderer_G.data,MergedRenderer_G.length),MergedRenderer_G.forAll(((e,t)=>MergedRenderer_G.data[t]=null)),MergedRenderer_G.clear(),e.drawCommandsDirty=!0}_applyAdds(e,t){if(0===t.length||null===this._bufferWriter)return;if(!PerBufferData_a(e))return void this._applyAndRebuild(e,t,null);const s=this._bufferWriter,i=s.vertexBufferLayout.stride/4,a=e.numElements,o=t.reduce(((e,t)=>e+s.elementCount(t.geometry)),0),n=Math.min((a+o)*i,U),l=4*n;if(e.vao.byteSize<MergedRenderer_q(U-MergedRenderer_P)&&l>e.vao.byteSize)return void this._applyAndRebuild(e,t,null);BufferRange_o(e.holes);const u=new Array;for(const r of t){const t=s.elementCount(r.geometry),i=L(e.holes,t);u.push(i)}const h=e.vao.vertexBuffers.geometry;let c=0,f=0,m=0;const d=F(n),g=s.vertexBufferLayout.createView(d.buffer);t.forEach(((t,r)=>{const a=u[r];if(null==a)return;if(!(m===a)){const e=m-f;e>0&&h.setSubData(d,f*i,0,e*i),f=a,c=0}const o=s.elementCount(t.geometry);this._writeGeometry(t,g,c),c+=o,m=a+o;const n=new Instance_s(t,a,a+o);(0,Util/* assert */.vA)(null==e.instances.get(t.id)),e.addInstance(t.id,n),e.drawCommandsDirty=!0}));const p=m-f;p>0&&h.setSubData(d,f*i,0,p*i),(0,arrayUtils/* filterInPlace */.$i)(t,((e,t)=>null==u[t]))}_writeGeometry(e,t,r){if(null===this._bufferWriter)return;const s=e.localOrigin.vec3;(0,Util/* setMatrixTranslation3 */.M_)(MergedRenderer_I,-s[0],-s[1],-s[2]);const i=(0,mat4.m)(MergedRenderer_T,MergedRenderer_I,e.transformation);(0,mat4.i)(MergedRenderer_W,i),(0,mat4.t)(MergedRenderer_W,MergedRenderer_W),this._bufferWriter.write(i,MergedRenderer_W,e.geometry,t,r)}updateAnimation(e){return this.material.update(e)}prepareTechnique(e){if(!this.material.shouldRender(e))return null;const{output:t,bindParameters:r}=e;if(!this.material.produces(r.slot,t))return null;const s=t===ShaderOutput/* ShaderOutput */.V.Highlight||t===ShaderOutput/* ShaderOutput */.V.ShadowHighlight;if(s&&!this._hasHighlights)return null;const i=t===ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight,a=!(s||i);for(const o of this._dataByOrigin.values())for(const n of o.buffers){if(s&&!n.hasHighlights)continue;const o=(s?n.drawCommandsHighlight:i&&n.needsMultipleCommands()?n.drawCommandsShadowHighlightRest:n.drawCommandsDefault)||null,l=a&&n.drawCommandsOccludees||null;if(o?.length||l?.length){const s=this._glMaterials.load(e.rctx,r.slot,t),i=null!=s?s.beginSlot(r):null;if(null!=i)return i}}return null}renderNode(e,t){const{output:r,bindParameters:s}=e,i=r===ShaderOutput/* ShaderOutput */.V.Highlight||r===ShaderOutput/* ShaderOutput */.V.ShadowHighlight,a=r===ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight,o=!(i||a),n=e.rctx,l=e.bindParameters.slot===RenderSlot/* RenderSlot */.N.OCCLUDER_MATERIAL,u=e.bindParameters.slot===RenderSlot/* RenderSlot */.N.TRANSPARENT_OCCLUDER_MATERIAL;n.runAppleAmdDriverHelper(),n.bindTechnique(t,this.material.parameters,s);for(const h of this._dataByOrigin.values())for(const e of h.buffers){if(i&&!e.hasHighlights)continue;const r=(i?e.drawCommandsHighlight:a&&e.needsMultipleCommands()?e.drawCommandsShadowHighlightRest:e.drawCommandsDefault)||null,c=o&&e.drawCommandsOccludees||null;if(r?.length||c?.length){t.program.bindDraw(new DrawParameters_i(h.origin),s,this.material.parameters),t.ensureAttributeLocations(e.vao),n.bindVAO(e.vao),r?.length&&(n.setPipelineState(t.getPipeline(!1,l,u)),r.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count)))),c?.length&&(n.setPipelineState(t.getPipeline(!0,l,u)),c.forAll((e=>n.drawArrays(t.primitiveType,e.first,e.count))))}}}get test(){return{material:this.material,glMaterials:this._glMaterials,dataByOrigin:this._dataByOrigin}}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],S.prototype,"material",void 0),S=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.materials.renderers.MergedRenderer")],S);class MergedRenderer_x{constructor(e){this.origin=e,this.changes=new Array}}function L(e,t){let r;if(!e.some((e=>!(e.numElements<t)&&(r=e,!0))))return null;const s=r.from;return r.from+=t,r.from>=r.to&&e.removeUnordered(r),s}const MergedRenderer_I=(0,mat4f64.a)(),MergedRenderer_T=(0,mat4f64.a)(),MergedRenderer_W=(0,mat4f64.a)(),MergedRenderer_G=new PooledArray/* default */.A({allocator:e=>e||new BufferRange_t,deallocator:null}),MergedRenderer_P=65536,V=4*MergedRenderer_P,MergedRenderer_z=1024,N=16777216,U=N/4;let k=new Float32Array(MergedRenderer_P);function F(e){return k.length<e&&(k=new Float32Array(e)),k}function MergedRenderer_q(e){const t=4*e;return t<=MergedRenderer_z?MergedRenderer_z:t<V?(0,mathUtils/* nextHighestPowerOfTwo */.cU)(t):Math.max(Math.min(Math.ceil(1.5*t/V)*V,N),t)}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SortedRenderGeometryRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let SortedRenderGeometryRenderer_u=class extends Accessor/* default */.A{constructor(e){super(e),this._pending=new SortedRenderGeometryRenderer_y,this._changes=new ChangeSet_s,this._materialRenderers=new PooledArray/* default */.A,this._sortedMaterialRenderers=new PooledArray/* default */.A,this._geometries=new Map,this._hasHighlights=!1,this._hasWater=!1}destroy(){this._changes.prune(),this._materialRenderers.forAll((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear(),this._geometries.clear(),this._pending.clear()}get updating(){return!this._pending.empty||this._changes.updates.length>0}get rctx(){return this.rendererContext.rctx}get _materialRepository(){return this.rendererContext.materialRepository}get _localOriginFactory(){return this.rendererContext.localOriginFactory}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._materialRenderers.some((e=>e.rendersOccluded))}get isEmpty(){return!this.updating&&0===this._materialRenderers.length&&0===this._geometries.size}getMemoryForMaterial(e){if(null==e)return 0;const r=this._materialRenderers.find((r=>r.material===e));return r?.usedMemory??0}commitChanges(){if(!this.updating)return!1;this._processAddsRemoves();const e=rendererUtils_r(this._changes);let r=!1,t=!1,s=!1;return e.forEach(((e,i)=>{let n=this._materialRenderers.find((e=>e.material===i));if(!n&&e.adds.length>0){const e=new S({material:i});e.initializeRenderContext(this.rendererContext.pluginContext,this._materialRepository),n=e,this._materialRenderers.push(n),r=!0,t=!0,s=!0}if(!n)return;const o=t||n.hasHighlights,a=s||n.hasWater;n.modify(e),t=t||o!==n.hasHighlights,s=s||a!==n.hasWater,n.isEmpty&&(this._materialRenderers.removeUnordered(n),n.dispose(),r=!0)})),this._changes.clear(),r&&this._updateSortedMaterialRenderers(),t&&(this._hasHighlights=this._materialRenderers.some((e=>e.hasHighlights))),s&&(this._hasWater=this._materialRenderers.some((e=>e.hasWater))),this.notifyChange("updating"),!0}addGeometries(e,r){if(0===e.length)return;const t=this._validateRenderGeometries(e);for(const i of t)this._geometries.set(i.id,i);const s=this._pending.empty;for(const i of t)this._pending.adds.add(i);s&&this.notifyChange("updating"),r===ModelDirtyTypes/* DirtyOperation */.q.UPDATE&&this._notifyGraphicGeometryChanged(e)}removeGeometries(e,r){const t=this._pending.empty,s=this._pending.adds;for(const i of e)s.has(i)?(this._pending.removed.add(i),s.delete(i)):this._pending.removed.has(i)||this._pending.removes.add(i),this._geometries.delete(i.id);t&&!this._pending.empty&&this.notifyChange("updating"),r===ModelDirtyTypes/* DirtyOperation */.q.UPDATE&&this._notifyGraphicGeometryChanged(e)}modifyGeometries(e,r){const t=0===this._changes.updates.length;for(const s of e){const e=this._changes.updates.pushNew();e.renderGeometry=this._validateRenderGeometry(s),e.updateType=r}switch(t&&this._changes.updates.length>0&&this.notifyChange("updating"),r){case ModelDirtyTypes/* DirtyState */.k.TRANSFORMATION:case ModelDirtyTypes/* DirtyState */.k.GEOMETRY:return this._notifyGraphicGeometryChanged(e);case ModelDirtyTypes/* DirtyState */.k.VISIBILITY:return this._notifyGraphicVisibilityChanged(e)}}updateAnimation(e){let r=!1;return this._sortedMaterialRenderers.forAll((t=>r=t.updateAnimation(e)||r)),r}shouldRender(e){return this._sortedMaterialRenderers.some((r=>r.prepareTechnique(e)))}render(e){this._sortedMaterialRenderers.forAll((r=>{const t=r.prepareTechnique(e);null!=t&&r.renderNode(e,t)}))}intersect(e,r,t,s,i){return this._geometries.forEach((n=>{if(s&&!s(n))return;this._intersectRenderGeometry(n,t,r,0,e,i);const o=this.rendererContext.longitudeCyclical;o&&(n.boundingSphere[0]-n.boundingSphere[3]<o.min&&this._intersectRenderGeometry(n,t,r,o.range,e,i),n.boundingSphere[0]+n.boundingSphere[3]>o.max&&this._intersectRenderGeometry(n,t,r,-o.range,e,i)),i++})),i}_updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear(),this._materialRenderers.forAll(((e,r)=>{e.priority=r,this._sortedMaterialRenderers.push(e)})),this._sortedMaterialRenderers.sort(((e,r)=>r.material.renderPriority===e.material.renderPriority?e.priority-r.priority:r.material.renderPriority-e.material.renderPriority))}_processAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._changes.adds.pushArray(Array.from(this._pending.adds)),this._changes.removes.pushArray(Array.from(this._pending.removes));for(let e=0;e<this._changes.updates.length;){const r=this._changes.updates.data[e];this._pending.has(r.renderGeometry)?this._changes.updates.removeUnorderedIndex(e):e++}this._pending.clear()}_intersectRenderGeometry(e,r,t,s,i,n){if(!e.visible)return;let o=0;s+=e.transformation[12],o=e.transformation[13],SortedRenderGeometryRenderer_f[0]=t[0]-s,SortedRenderGeometryRenderer_f[1]=t[1]-o,e.screenToWorldRatio=this.rendererContext.screenToWorldRatio,e.material.intersectDraped(e,null,i,SortedRenderGeometryRenderer_f,((t,s,o)=>{_(r,o,e.material.renderPriority,n,i,e.layerUid,e.graphicUid)}),r)}_notifyGraphicGeometryChanged(e){if(null==this.drapeSource.notifyGraphicGeometryChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicGeometryChanged(e),r=e)}}_notifyGraphicVisibilityChanged(e){if(null==this.drapeSource.notifyGraphicVisibilityChanged)return;let r;for(const t of e){const e=t.graphicUid;null!=e&&e!==r&&(this.drapeSource.notifyGraphicVisibilityChanged(e),r=e)}}_validateRenderGeometries(e){for(const r of e)this._validateRenderGeometry(r);return e}_validateRenderGeometry(e){return null==e.localOrigin&&(e.localOrigin=this._localOriginFactory.getOrigin(e.boundingSphere)),e}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"drapeSource",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"rctx",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SortedRenderGeometryRenderer_u.prototype,"rendererContext",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"_materialRepository",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"_localOriginFactory",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],SortedRenderGeometryRenderer_u.prototype,"isEmpty",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"_materialRenderers",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SortedRenderGeometryRenderer_u.prototype,"_geometries",void 0),SortedRenderGeometryRenderer_u=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer")],SortedRenderGeometryRenderer_u);class SortedRenderGeometryRenderer_y{constructor(){this.adds=new Set,this.removes=new Set,this.removed=new Set}get empty(){return 0===this.adds.size&&0===this.removes.size&&0===this.removed.size}has(e){return this.adds.has(e)||this.removes.has(e)||this.removed.has(e)}clear(){this.adds.clear(),this.removes.clear(),this.removed.clear()}}function _(e,r,t,s,i,n,a){const p=new Intersector_i(n,a,r),c=r=>{r.set(IntersectorInterfaces/* IntersectorType */.dz.OVERLAY,p,e.dist,e.normal,e.transformation,t,s)};if((null==i.results.min.drapedLayerOrder||t>=i.results.min.drapedLayerOrder)&&(null==i.results.min.dist||i.results.ground.dist<=i.results.min.dist)&&c(i.results.min),i.options.store!==IntersectorInterfaces/* StoreResults */.oH.MIN&&(null==i.results.max.drapedLayerOrder||t<i.results.max.drapedLayerOrder)&&(null==i.results.max.dist||i.results.ground.dist>i.results.max.dist)&&c(i.results.max),i.options.store===IntersectorInterfaces/* StoreResults */.oH.ALL){const e=(0,Intersector/* newIntersectorResult */.G7)(i.ray);c(e),i.results.all.push(e)}}const SortedRenderGeometryRenderer_f=(0,vec2f64.a)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class TextureTechnique_m extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,TextureTechnique_m.shader.get().build(),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){return this.configuration.hasAlpha?(0,renderState/* makePipelineState */.Ey)({blending:(0,renderState/* separateBlendingParams */.p3)(enums/* BlendFactor */.dn.SRC_ALPHA,enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),colorWrite:renderState/* defaultColorWriteParams */.wE}):(0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWriteParams */.wE})}}TextureTechnique_m.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(TextureOnly_glsl.a,(()=>__webpack_require__.e(/* import() */ 6792).then(__webpack_require__.bind(__webpack_require__, 76792))));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class TextureTechniqueConfiguration_r extends ShaderTechniqueConfiguration/* ShaderTechniqueConfiguration */.K{constructor(){super(...arguments),this.hasAlpha=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],TextureTechniqueConfiguration_r.prototype,"hasAlpha",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(91080);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js
var Lightsources = __webpack_require__(75268);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/OverlayCompositing.glsl.js
var OverlayCompositing_glsl = __webpack_require__(36004);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OverlayCompositingTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class OverlayCompositingTechnique_n extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,OverlayCompositingTechnique_n.shader.get().build(),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({blending:(0,renderState/* simpleBlendingParams */.ox)(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),colorWrite:renderState/* defaultColorWriteParams */.wE})}}OverlayCompositingTechnique_n.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(OverlayCompositing_glsl.a,(()=>__webpack_require__.e(/* import() */ 6008).then(__webpack_require__.bind(__webpack_require__, 26008))));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/Scheduler.js + 1 modules
var Scheduler = __webpack_require__(93399);
;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let ee=class extends RenderPlugin/* SyncRenderPlugin */.RW{get _bindParameters(){return this._renderContext.bindParameters}get _rctx(){return this.view._stage.renderView.renderingContext}get rctx(){return this._rctx}get materialRepository(){return this._materialRepository}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}constructor(e){super(e),this._overlays=null,this._renderTargets=null,this._overlayParameters=new OverlayCompositing_glsl.O,this.hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._renderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedRenderers=new PooledArray/* default */.A,this._passParameters=new TextureOnly_glsl.T,this._materialRepository=null,this._screenToWorldRatio=1,this._localOriginFactory=null,this.unloadedMemory=0,this.ignoresMemoryFactor=!1,this._camera=new Camera/* Camera */.i,this.worldToPCSRatio=1,this.events=new Evented/* default */.A,this.longitudeCyclical=null,this.produces=new Map([[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e=>e!==ShaderOutput/* ShaderOutput */.V.Highlight||this.hasHighlights],[RenderSlot/* RenderSlot */.N.DRAPED_WATER,()=>!0]]),this._hasTargetWithoutRasterImage=!1,this._hasDrapedFeatureSource=!1,this._hasDrapedRasterSource=!1}initialize(){const e=this.view._stage.renderer.fboCache,r=this.view._stage.renderView,{waterTextureRepository:t,stippleTextureRepository:s,markerTextureRepository:i}=r;this._shaderTechniqueRepository=new ShaderTechniqueRepository_r({rctx:this._rctx,viewingMode:ViewingMode/* ViewingMode */.RT.Local,stippleTextureRepository:s,markerTextureRepository:i,waterTextureRepository:t}),this._renderContext=new RenderContext_i(this._rctx,new q(e,this.view.state.viewingMode),null),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>t.updating),(()=>this.events.emit("content-changed")),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.spatialReference),(e=>this._localOriginFactory=new GridLocalOriginFactory/* GridLocalOriginFactory */.g(e)),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils.on)((()=>this.view.allLayerViews),"after-changes",(()=>this._sortedDrapeSourceRenderersDirty=!0))]),this._materialRepository=new GLMaterialRepository_s(r.textureRepository,this._shaderTechniqueRepository,(e=>{(e.parameters.renderOccluded&ie)>0!==this._rendersOccluded&&this._updateRendersOccluded(),this.events.emit("content-changed"),this.notifyChange("updating"),this.notifyChange("isEmpty")}),(()=>this.events.emit("content-changed"))),this._bindParameters.slot=RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,this._bindParameters.mainDepth=glUtil3D_w(this._rctx),this._camera.near=1,this._camera.far=1e4,this._camera.relativeElevation=null,this._bindParameters.camera=this._camera,this._bindParameters.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this._bindParameters.newLighting.noonFactor=0,this._bindParameters.newLighting.globalFactor=0,this._bindParameters.newLighting.set([new Lightsources/* AmbientLight */.$p((0,vec3f64.f)(1,1,1))]),this.addHandles(this.view.resourceController.scheduler.registerTask(Scheduler/* TaskPriority */.W6.STAGE,this))}destroy(){this._renderers.forEach((e=>e.destroy())),this._renderers.clear(),this._debugTextureTechnique=(0,maybe/* releaseMaybe */.Gz)(this._debugTextureTechnique),this._passParameters.texture=(0,maybe/* disposeMaybe */.WD)(this._passParameters.texture),this._bindParameters.mainDepth=(0,maybe/* disposeMaybe */.WD)(this._bindParameters.mainDepth),this._shaderTechniqueRepository=(0,maybe/* destroyMaybe */.pR)(this._shaderTechniqueRepository),this.disposeOverlays()}initializeRenderContext(e){this.pluginContext=e}uninitializeRenderContext(){}renderNode(){}get updating(){return this._sortedDrapeSourceRenderersDirty||(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.updating))}get hasOverlays(){return null!=this._overlays&&null!=this._renderTargets}getMemoryForMaterial(e){return Array.from(this._renderers.values()).reduce(((r,t)=>r+t.getMemoryForMaterial(e)),0)}createGeometryDrapeSourceRenderer(e){return this.createDrapeSourceRenderer(e,SortedRenderGeometryRenderer_u)}createDrapeSourceRenderer(e,r,t){const s=this._renderers.get(e);null!=s&&s.destroy();const i=new r({...t,rendererContext:this,drapeSource:e});return this._renderers.set(e,i),this._sortedDrapeSourceRenderersDirty=!0,"fullOpacity"in e&&this.addHandles((0,reactiveUtils/* watch */.wB)((()=>e.fullOpacity),(()=>this.events.emit("content-changed"))),e),i}removeDrapeSourceRenderer(e){if(null==e)return;const r=this._renderers.get(e);null!=r&&(this._sortedDrapeSourceRenderersDirty=!0,this._renderers.delete(e),this.removeHandles(e),r.destroy())}computeValidity(){return this._renderTargets?.computeValidity()??0}releaseRenderTargets(){this._renderTargets?.dispose()}get overlays(){return this._overlays??[]}ensureDrapeTargets(e){this._hasTargetWithoutRasterImage=!!this._overlays&&(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeTargetType===interfaces/* DrapeTargetType */.sv.WithoutRasterImage))}ensureDrapeSources(e){this._overlays?(this._hasDrapedFeatureSource=(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeSourceType===interfaces/* DrapeSourceType */.Om.Features)),this._hasDrapedRasterSource=(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeSourceType===interfaces/* DrapeSourceType */.Om.RasterImage))):this._hasDrapedFeatureSource=this._hasDrapedRasterSource=!1}get _needsColorWithoutRasterImage(){return this._hasDrapedRasterSource&&this._hasDrapedFeatureSource&&this._hasTargetWithoutRasterImage}ensureOverlays(e,r,t=this._bindParameters.overlayStretch){null==this._overlays&&(this._renderTargets=new OverlayRenderTargets_a(this.view._stage.renderer.fboCache),this._overlays=[new Overlay_r,new Overlay_r]),this.ensureDrapeTargets(e),this.ensureDrapeSources(r),this._bindParameters.overlayStretch=t}disposeOverlays(){this._overlays=null,this._renderTargets=(0,maybe/* disposeMaybe */.WD)(this._renderTargets),this.events.emit("textures-disposed")}getTexture(e){if(null!=e)return e===OverlayContent_o.ColorNoRasterImage&&!this._needsColorWithoutRasterImage&&this._hasDrapedFeatureSource?this._renderTargets?.getTexture(OverlayContent_o.Color):this._renderTargets?.getTexture(e)}get running(){return this.updating}runTask(e){this._processDrapeSources(e,(()=>!0))}_processDrapeSources(e,r){let s=!1;for(const[t,i]of this._renderers){if(e.done)break;(t.destroyed||r(t))&&(i.commitChanges()&&(s=!0,e.madeProgress()))}this._sortedDrapeSourceRenderersDirty&&(this._sortedDrapeSourceRenderersDirty=!1,s=!0,this._updateSortedDrapeSourceRenderers()),s&&(null!=this._overlays&&0===this._renderers.size&&this.disposeOverlays(),this.notifyChange("updating"),this.notifyChange("isEmpty"),this.events.emit("content-changed"),this.hasHighlights=(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.hasHighlights)),this._updateRendersOccluded(),this._updateHasWater())}processSyncDrapeSources(){this._processDrapeSources(Scheduler/* noBudget */.Bb,(e=>e.updatePolicy===UpdatePolicy/* UpdatePolicy */.q.SYNC))}get isEmpty(){return!debugFlags/* debugFlags */.b.OVERLAY_DRAW_DEBUG_TEXTURE&&!(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>!e.isEmpty))}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}get mode(){return this.isEmpty?Overlay_glsl_f.Disabled:this._renderTargets?.getTexture(OverlayContent_o.WaterNormal)?Overlay_glsl_f.EnabledWithWater:this._renderTargets?.getTexture(OverlayContent_o.Color)?Overlay_glsl_f.Enabled:Overlay_glsl_f.Disabled}updateAnimation(e){let r=!1;return this._renderers.forEach((t=>r=t.updateAnimation(e)||r)),r}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}drawOverlays(e){if(this._overlays&&this._renderTargets){for(const e of this._overlays)this.longitudeCyclical?e.setupGeometryViewsCyclical(this.longitudeCyclical):e.setupGeometryViewsDirect();for(const r of this._renderTargets.targets)(r.content!==OverlayContent_o.ColorNoRasterImage||this._needsColorWithoutRasterImage)&&(this._drawTarget(terrain_interfaces/* OverlayIndex */.vr.INNER,r,e),this._drawTarget(terrain_interfaces/* OverlayIndex */.vr.OUTER,r,e))}}_drawTarget(e,r,t){const s=this._overlays[e],i=s.canvasGeometries;if(0===i.numViews)return;const{alignPixelEnabled:o,contentPixelRatio:a}=t;this._screenToWorldRatio=a*s.mapUnitsPerPixel/this._bindParameters.overlayStretch;const n=r.output;if(this.isEmpty||n===ShaderOutput/* ShaderOutput */.V.Highlight&&!this.hasHighlights||n===ShaderOutput/* ShaderOutput */.V.Normal&&!this.hasWater||!s.hasSomeSizedView())return;const h=this._rctx;this._camera.pixelRatio=s.pixelRatio*a,this._renderContext.output=n,this._bindParameters.alignPixelEnabled=o,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToPCSRatio=this._screenToWorldRatio*this.worldToPCSRatio,this._bindParameters.slot=n===ShaderOutput/* ShaderOutput */.V.Normal?RenderSlot/* RenderSlot */.N.DRAPED_WATER:RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;const d=debugFlags/* debugFlags */.b.OVERLAY_DRAW_DEBUG_TEXTURE&&r.content!==OverlayContent_o.Occluded;if(!d&&!this._sortedRenderers.some((({renderer:e})=>e.shouldRender(this._renderContext))))return;const l=s.resolution;this._rctx.setViewport(e===terrain_interfaces/* OverlayIndex */.vr.INNER?0:l,0,l,l);const c=2*s.resolution,u=s.resolution,p=r.fbo;if(p.bind(h,c,u),e===terrain_interfaces/* OverlayIndex */.vr.INNER&&(h.setClearColor(0,0,0,0),h.clearSafe(enums/* ClearBufferBit */.hn.COLOR_BUFFER_BIT)),r.content===OverlayContent_o.Occluded&&(this._renderContext.renderOccludedMask=ie),d)for(let m=0;m<i.numViews;m++)this._setViewParameters(i.extents[m],s),this._ensureDebugPatternResources(s.resolution,te[e]),this._rctx.bindTechnique(this._debugTextureTechnique,this._passParameters,null),this._rctx.screen.draw();this._sortedRenderers.forAll((({drapeSource:t,renderer:o})=>{if(r.content===OverlayContent_o.ColorNoRasterImage&&t.drapeSourceType===interfaces/* DrapeSourceType */.Om.RasterImage)return;const{fullOpacity:a}=t,d=null!=a&&a<1&&n===ShaderOutput/* ShaderOutput */.V.Color?this.bindTemporaryFramebuffer(c,u):null;for(let e=0;e<i.numViews;e++)this._setViewParameters(i.extents[e],s),o.render(this._renderContext);if(d){p.bind(h,c,u),this._overlayParameters.texture=d.colorTexture,this._overlayParameters.opacity=a,this._overlayParameters.overlayIndex=e;const r=this.pluginContext.techniqueRepository.acquire(OverlayCompositingTechnique_n);this._rctx.bindTechnique(r,this._overlayParameters,this._renderContext.bindParameters),this._rctx.screen.draw(),r.release(),d.release()}})),h.bindFramebuffer(null),e===terrain_interfaces/* OverlayIndex */.vr.OUTER&&p.generateMipMap(),this._renderContext.resetRenderOccludedMask()}bindTemporaryFramebuffer(e,r){const t=this.view._stage.renderer.fboCache,s=t.acquire(FBOCache/* ColorFormat */.NV.RGBA,e,r);return t.rctx.bindFramebuffer(s.fbo),t.rctx.clearSafe(enums/* ClearBufferBit */.hn.COLOR_BUFFER_BIT),s}async reloadShaders(){await this._shaderTechniqueRepository.reloadAll()}notifyContentChanged(){this.events.emit("content-changed")}intersect(e,r,t,s){let i=0;for(const o of this._renderers.values())i=o.intersect?.(e,r,t,s,i)??i}_updateSortedDrapeSourceRenderers(){if(this._sortedRenderers.clear(),0===this._renderers.size)return;const e=this.view.map.allLayers;this._renderers.forEach(((r,t)=>{const s=e.indexOf(t.layer),i=s>=0,o=this._renderers.size*(t.renderGroup??(i?interfaces/* DrapedRenderGroup */.O7.MapLayer:interfaces/* DrapedRenderGroup */.O7.ViewLayer))+(i?s:0);this._sortedRenderers.push(new re(t,r,o))})),this._sortedRenderers.sort(((e,r)=>e.index-r.index))}_setViewParameters(e,r){const t=this._camera;t.viewport=[0,0,r.resolution,r.resolution],(0,mat4.x)(t.projectionMatrix,0,e[2]-e[0],0,e[3]-e[1],t.near,t.far),(0,mat4.d)(t.viewMatrix,[-e[0],-e[1],0])}_updateHasWater(){const e=(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e,this.events.emit("has-water",e))}_updateRendersOccluded(){const e=(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.events.emit("renders-occluded",e))}_ensureDebugPatternResources(e,r){if((0,vec3.s)(this._passParameters.color,r[0],r[1],r[2]),this._passParameters.texture)return;const t=new Uint8Array(e*e*4);let s=0;for(let a=0;a<e;a++)for(let r=0;r<e;r++){const i=Math.floor(r/10),o=Math.floor(a/10);i<2||o<2||10*i>e-20||10*o>e-20?(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=255):(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=1&i&&1&o?1&r^1&a?0:255:1&i^1&o?0:128)}const i=new TextureDescriptor/* TextureDescriptor */.R(e);i.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,this._passParameters.texture=new Texture/* Texture */.g(this._rctx,i,t);const o=new TextureTechniqueConfiguration_r;o.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquire(TextureTechnique_m,o)}get test(){return{drapedRenderers:Array.from(this._renderers.values()),getDrapeSourceRenderer:e=>this._renderers.get(e)}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ee.prototype,"hasHighlights",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ee.prototype,"_sortedDrapeSourceRenderersDirty",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({autoDestroy:!0})],ee.prototype,"_shaderTechniqueRepository",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ee.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ee.prototype,"worldToPCSRatio",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ee.prototype,"spatialReference",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,readOnly:!0})],ee.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ee.prototype,"isEmpty",null),ee=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.terrain.OverlayRenderer")],ee);class re{constructor(e,r,t){this.drapeSource=e,this.renderer=r,this.index=t}}const te=[[1,.5,.5],[.5,.5,1]],se=-2,ie=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent;


/***/ }),

/***/ 36572:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   vr: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony exports LODSnapping, PatchType, TextureUpdate */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var E,O,A,H;!function(E){E[E.INNER=0]="INNER",E[E.OUTER=1]="OUTER"}(E||(E={})),function(E){E[E.REGULAR=0]="REGULAR",E[E.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",E[E.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",E[E.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(O||(O={})),function(E){E[E.OFF=0]="OFF",E[E.ON=1]="ON"}(A||(A={})),function(E){E[E.FADING=0]="FADING",E[E.IMMEDIATE=1]="IMMEDIATE",E[E.UNFADED=2]="UNFADED"}(H||(H={}));


/***/ }),

/***/ 4588:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  NV: () => (/* binding */ R),
  zd: () => (/* binding */ g)
});

// UNUSED EXPORTS: FBOCache

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MemCachePool.js
var MemCachePool = __webpack_require__(6660);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOPool.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(i,e){this._last=new s,this._incarnation=0,this._cache=new t(i,e)}destroy(){this._last?.forAll((t=>t.dispose())),this._last=null,this._cache.destroy()}set interactive(t){t&&!this._last?this._last=new s:t||(this._last?.forAll((t=>t.dispose())),this._last=null)}clean(){this._last?.filterInPlace((t=>!(t.incarnation<this._incarnation)||(this._cache.put(t.key,t),!1)))}frame(){++this._incarnation}pop(t){if(this._last){const s=this._last.find((s=>s.key===t));if(s)return this._last.removeUnordered(s),s}return this._cache.pop(t)}put(t){t.incarnation=this._incarnation,this._last?this._last.push(t):this._cache.put(t.key,t)}get usedMemory(){return this._last?.reduce(((t,s)=>t+s.usedMemory),0)??0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(94669);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOCache.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class u{constructor(e){this.rctx=e,this._acquired=new Set,this._cache=new t(e.newCache,"FBOCache"),this._depthCache=new t(e.newCache,"DepthAttachmentCache"),this._colorCache=new t(e.newCache,"ColorAttachmentCache")}destroy(){this._cache.destroy(),this._depthCache.destroy(),this._colorCache.destroy()}clean(){this._cache.clean(),this._colorCache.clean(),this._depthCache.clean()}frame(){this._cache.frame(),this._colorCache.frame(),this._depthCache.frame()}get usedMemory(){return Array.from(this._acquired.values()).reduce(((e,t)=>e+("colorTexture"in t?t.colorTexture?.gpuMemoryUsage??0:t.usedMemory)),this._cache.usedMemory+this._colorCache.usedMemory+this._depthCache.usedMemory)}set interactive(e){this._cache.interactive=this._colorCache.interactive=this._depthCache.interactive=e}acquire(e,t,r){const h=D(e,t,r),s=this._cache.pop(h)||new E(h,new n(this.rctx,{...b[e],width:t,height:r}),(e=>(s.releaseDepth(),s.depth=this._acquireDepth(e,s.fbo.width,s.fbo.height),s.fbo.attachDepthStencil(s.depth.attachment),s)),((e,h)=>{const o=this._acquireColor(e,t,r);return s.colors??=new Map,s.colors.set(h,o),s.fbo.attachColorTexture(o.attachment,h),s}));return s.release=()=>{this._acquired.delete(s),s.releaseDepth(),this._cache.put(s),s.release=()=>console.log(`Double FBO release in ${(new Error).stack}`)},this.rctx.unbindTexture(s.fbo.colorTexture),this._trackHandle(s)}acquireDepth(e,t,r){return this._acquireDepth(e,t,r)}_acquireDepth(e,t,r){const h=D(e,t,r),s=this._depthCache.pop(h);if(s)return this._trackHandle(s);const o=e===g.DEPTH_STENCIL_TEXTURE?new m(h,new p(this.rctx,{...G[e],width:t,height:r}),(()=>{this._acquired.delete(o),this._depthCache.put(o)})):new m(h,new _(this.rctx,{...G[e],width:t,height:r}),(()=>{this._acquired.delete(o),this._depthCache.put(o)}));return this._trackHandle(o)}_acquireColor(e,t,r){const h=D(e,t,r),s=this._colorCache.pop(h);if(s)return this._trackHandle(s);const o=new C(h,new p(this.rctx,{...b[e],width:t,height:r}),(()=>{this._acquired.delete(o),this._colorCache.put(o)}));return this._trackHandle(o)}_trackHandle(e){return this._acquired.add(e),e}}class E{constructor(e,t,r,h){this.key=e,this.fbo=t,this.acquireDepth=r,this.acquireColor=h,this.release=()=>{},this.incarnation=0}dispose(){this.fbo.dispose()}releaseDepth(){this.fbo.detachDepthStencilTexture(),this.fbo.detachDepthStencilBuffer(),this.depth=e(this.depth)}detachDepth(){const e=this.depth;return this.depth=void 0,this.fbo.detachDepthStencilTexture(),this.fbo.detachDepthStencilBuffer(),e}attachDepth(e){return this.releaseDepth(),e&&(this.fbo.attachDepthStencil(e.attachment),this.depth=e),this}releaseColor(t){this.fbo.detachColorTexture(t);const r=this.colors?.get(t);this.colors?.delete(t),e(r)}get colorTexture(){return this.fbo?.colorTexture}getColorTexture(e=c.COLOR_ATTACHMENT0){return this.fbo?.getColorTexture(e)}get usedMemory(){return this.fbo.gpuMemoryUsage}}class T{constructor(e,t,r){this.key=e,this.attachment=t,this.release=r,this.incarnation=0}dispose(){this.attachment.dispose()}get usedMemory(){return this.attachment.gpuMemoryUsage}}class m extends (/* unused pure expression or super */ null && (T)){}class C extends T{constructor(e,t,r){super(e,t,r),this.attachment=t,this.release=r}}function D(e,t,r){return`${e}x${t}x${r}`}var R;!function(e){e[e.RED=0]="RED",e[e.RG=1]="RG",e[e.RGBA4=2]="RGBA4",e[e.RGBA=3]="RGBA",e[e.RGBA_MIPMAP=4]="RGBA_MIPMAP",e[e.R16F=5]="R16F",e[e.RGBA16F=6]="RGBA16F"}(R||(R={}));const w=new TextureDescriptor/* TextureDescriptor */.R;w.pixelFormat=enums/* PixelFormat */.Ab.RED,w.internalFormat=enums/* SizedPixelFormat */.H0.R8,w.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const f=new TextureDescriptor/* TextureDescriptor */.R;f.pixelFormat=enums/* PixelFormat */.Ab.RG,f.internalFormat=enums/* SizedPixelFormat */.H0.RG8,f.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const F=new TextureDescriptor/* TextureDescriptor */.R;F.internalFormat=enums/* SizedPixelFormat */.H0.RGBA4,F.dataType=enums/* PixelType */.ld.UNSIGNED_SHORT_4_4_4_4,F.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const A=new TextureDescriptor/* TextureDescriptor */.R;A.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const M=new TextureDescriptor/* TextureDescriptor */.R;M.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,M.samplingMode=enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR,M.hasMipmap=!0,M.maxAnisotropy=8;const P=new TextureDescriptor/* TextureDescriptor */.R;P.pixelFormat=enums/* PixelFormat */.Ab.RED,P.dataType=enums/* PixelType */.ld.HALF_FLOAT,P.internalFormat=enums/* SizedPixelFormat */.H0.R16F,P.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST;const x=new TextureDescriptor/* TextureDescriptor */.R;x.dataType=enums/* PixelType */.ld.HALF_FLOAT,x.internalFormat=enums/* SizedPixelFormat */.H0.RGBA16F,x.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST;const b={[R.RED]:w,[R.RG]:f,[R.RGBA4]:F,[R.RGBA]:A,[R.RGBA_MIPMAP]:M,[R.R16F]:P,[R.RGBA16F]:x};var g;!function(e){e[e.DEPTH_STENCIL_TEXTURE=0]="DEPTH_STENCIL_TEXTURE",e[e.DEPTH_STENCIL_BUFFER=1]="DEPTH_STENCIL_BUFFER",e[e.DEPTH24_BUFFER=2]="DEPTH24_BUFFER",e[e.DEPTH16_BUFFER=3]="DEPTH16_BUFFER"}(g||(g={}));const B=new TextureDescriptor/* TextureDescriptor */.R;B.pixelFormat=enums/* PixelFormat */.Ab.DEPTH_STENCIL,B.dataType=enums/* PixelType */.ld.UNSIGNED_INT_24_8,B.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,B.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const G={[g.DEPTH_STENCIL_TEXTURE]:B,[g.DEPTH_STENCIL_BUFFER]:new RenderbufferDescriptor/* RenderbufferDescriptor */.q(enums/* RenderbufferFormat */.yQ.DEPTH24_STENCIL8,4),[g.DEPTH24_BUFFER]:new RenderbufferDescriptor/* RenderbufferDescriptor */.q(enums/* RenderbufferFormat */.yQ.DEPTH_COMPONENT24,4),[g.DEPTH16_BUFFER]:new RenderbufferDescriptor/* RenderbufferDescriptor */.q(enums/* RenderbufferFormat */.yQ.DEPTH_COMPONENT16,4)};


/***/ }),

/***/ 40641:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Mu: () => (/* binding */ t),
/* harmony export */   i$: () => (/* binding */ n),
/* harmony export */   oD: () => (/* binding */ d),
/* harmony export */   xJ: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _attributes_VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16989);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(e){e.varyings.add("linearDepth","float")}function i(e){e.vertex.uniforms.add(new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar)))}function n(e){e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}function d(a,d){const{vertex:s}=a;switch(d.output){case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Color:if(d.receiveShadows)return t(a),void s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Depth:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Shadow:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowExcludeHighlight:return a.include(_attributes_VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexPosition */ .em,d),t(a),i(a),n(a),void s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`)}s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() {}`)}


/***/ }),

/***/ 26163:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   M: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {
vec3 camToVert = posWorld - camPosWorld;
bool isBackface = dot(camToVert, normalWorld) > 0.0;
if (isBackface) {
posClip.z += 0.0000003 * posClip.w;
}
return posClip;
}`)}


/***/ }),

/***/ 16961:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,t=!0){o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION,"vec2"),t&&o.varyings.add("uv","vec2"),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      ${t?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`uv = position * 0.5 + vec2(0.5);`:""}
    }
  `)}


/***/ }),

/***/ 55274:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var o;!function(o){o[o.Color=0]="Color",o[o.Depth=1]="Depth",o[o.Normal=2]="Normal",o[o.Shadow=3]="Shadow",o[o.ShadowHighlight=4]="ShadowHighlight",o[o.ShadowExcludeHighlight=5]="ShadowExcludeHighlight",o[o.Highlight=6]="Highlight",o[o.Alpha=7]="Alpha",o[o.ObjectAndLayerIdColor=8]="ObjectAndLayerIdColor",o[o.CompositeColor=9]="CompositeColor",o[o.COUNT=10]="COUNT"}(o||(o={}));


/***/ }),

/***/ 1110:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HQ: () => (/* binding */ P)
/* harmony export */ });
/* unused harmony exports SlicePass, SlicePlaneParameters */
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class u extends _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .NoParameters */ .Y{constructor(e){super(),this.slicePlaneLocalOrigin=e}}function _(e,s){h(e,s,new n("slicePlaneOrigin",((e,i)=>g(s,e,i))),new n("slicePlaneBasis1",((e,i)=>I(s,e,i,i.slicePlane?.basis1))),new n("slicePlaneBasis2",((e,i)=>I(s,e,i,i.slicePlane?.basis2))))}function P(e,s){h(e,s,new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneOrigin",((e,i)=>g(s,e,i))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis1",((e,i)=>I(s,e,i,i.slicePlane?.basis1))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis2",((e,i)=>I(s,e,i,i.slicePlane?.basis2))))}function h(e,s,...i){if(!s.hasSlicePlane){const i=(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;return s.hasSliceInVertexProgram&&e.vertex.code.add(i),void e.fragment.code.add(i)}s.hasSliceInVertexProgram&&e.vertex.uniforms.add(...i),e.fragment.uniforms.add(...i);const a=(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,l=(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`,c=s.hasSliceHighlight?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
        ${l}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`#define highlightSlice(_color_, _pos_) (_color_)`;s.hasSliceInVertexProgram&&e.vertex.code.add(a),e.fragment.code.add(a),e.fragment.code.add(c)}function p(e,s,i){return e.instancedDoublePrecision?(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(b,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]):s.slicePlaneLocalOrigin}function m(e,s){return null!=e?(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.f)(v,s.origin,e):s.origin}function H(s,i,a){return s.hasSliceTranslatedView?null!=i?(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.w)(S,a.camera.viewMatrix,i):a.camera.viewMatrix:null}function g(e,s,a){if(null==a.slicePlane)return _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.Z;const l=p(e,s,a),c=m(l,a.slicePlane),r=H(e,l,a);return null!=r?(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(v,c,r):c}function I(e,s,c,r){if(null==r||null==c.slicePlane)return _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.Z;const t=p(e,s,c),n=m(t,c.slicePlane),f=H(e,t,c);return null!=f?((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(B,r,n),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(v,n,f),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(B,B,f),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.f)(B,B,v)):r}const b=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),v=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),S=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)();


/***/ }),

/***/ 66012:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){(0,_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addCalculateLinearDepth */ .i$)(o),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = calculateLinearDepth(nearFar,eye.z);
return proj * eye;
}`),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}


/***/ }),

/***/ 24682:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BK: () => (/* binding */ N),
/* harmony export */   nW: () => (/* binding */ h)
/* harmony export */ });
/* unused harmony export InstancedDoublePassParameters */
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46615);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22279);
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(55274);
/* harmony import */ var _util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10470);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(6561);
/* harmony import */ var _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(20778);
/* harmony import */ var _shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(69948);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(50645);
/* harmony import */ var _webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(76698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class h extends _shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_13__/* .ShaderTechniqueConfiguration */ .K{constructor(){super(...arguments),this.instancedDoublePrecision=!1,this.hasModelTransformation=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_13__/* .parameter */ .W)()],h.prototype,"instancedDoublePrecision",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_13__/* .parameter */ .W)()],h.prototype,"hasModelTransformation",void 0);class O extends _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .NoParameters */ .Y{constructor(){super(...arguments),this.modelTransformation=null}}const w=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_2__.a)();function N(e,r){const i=r.hasModelTransformation,c=r.instancedDoublePrecision;i&&(e.vertex.uniforms.add(new _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Matrix4PassUniform */ .X("model",(e=>e.modelTransformation??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I))),e.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .Matrix3PassUniform */ .k("normalLocalOriginFromModel",(e=>((0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.n)(w,e.modelTransformation??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.I),w))))),r.instanced&&c&&(e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__/* .VertexAttribute */ .r.INSTANCEMODELORIGINHI,"vec3"),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__/* .VertexAttribute */ .r.INSTANCEMODELORIGINLO,"vec3"),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__/* .VertexAttribute */ .r.INSTANCEMODEL,"mat3"),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_14__/* .VertexAttribute */ .r.INSTANCEMODELNORMAL,"mat3"));const v=e.vertex;c&&(v.include(_util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .DoublePrecision */ .u,r),v.uniforms.add(new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float3DrawUniform */ .W("viewOriginHi",((e,o)=>(0,_webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_15__/* .encodeDoubleHi */ .Zo)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(T,o.camera.viewInverseTransposeMatrix[3],o.camera.viewInverseTransposeMatrix[7],o.camera.viewInverseTransposeMatrix[11]),T))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float3DrawUniform */ .W("viewOriginLo",((e,o)=>(0,_webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_15__/* .encodeDoubleLo */ .jA)((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(T,o.camera.viewInverseTransposeMatrix[3],o.camera.viewInverseTransposeMatrix[7],o.camera.viewInverseTransposeMatrix[11]),T))))),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .glsl */ .H)`
    vec3 getVertexInLocalOriginSpace() {
      return ${i?c?"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz":"(model * localPosition()).xyz":c?"instanceModel * localPosition().xyz":"localPosition().xyz"};
    }

    vec3 subtractOrigin(vec3 _pos) {
      ${c?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .glsl */ .H)`
          // Negated inputs are intentionally the first two arguments. The other way around the obfuscation in dpAdd() stopped
          // working for macOS 14+ and iOS 17+.
          // Issue: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280
          vec3 originDelta = dpAdd(-instanceModelOriginHi, -instanceModelOriginLo, viewOriginHi, viewOriginLo);
          return _pos - originDelta;`:"return vpos;"}
    }
    `),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .glsl */ .H)`
    vec3 dpNormal(vec4 _normal) {
      return normalize(${i?c?"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)":"normalLocalOriginFromModel * _normal.xyz":c?"instanceModelNormal * _normal.xyz":"_normal.xyz"});
    }
    `),r.output===_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_6__/* .ShaderOutput */ .V.Normal&&((0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addViewNormal */ .S7)(v),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .glsl */ .H)`
    vec3 dpNormalView(vec4 _normal) {
      return normalize((viewNormal * ${i?c?"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)":"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)":c?"vec4(instanceModelNormal * _normal.xyz, 1.0)":"_normal"}).xyz);
    }
    `)),r.hasVertexTangents&&v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_10__/* .glsl */ .H)`
    vec4 dpTransformVertexTangent(vec4 _tangent) {
      ${i?c?"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);":"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);":c?"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);":"return _tangent;"}
    }`)}const T=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)();


/***/ }),

/***/ 81283:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ a),
/* harmony export */   Y: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,s){switch(s.normalType){case a.Compressed:t.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.NORMALCOMPRESSED,"vec2"),t.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 normalModel() {
float z = 1.0 - abs(normalCompressed.x) - abs(normalCompressed.y);
return vec3(normalCompressed + sign(normalCompressed) * min(z, 0.0), z);
}`);break;case a.Attribute:t.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.NORMAL,"vec3"),t.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 normalModel() {
return normal;
}`);break;case a.ScreenDerivative:t.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 screenDerivativeNormal(vec3 positionView) {
return normalize(cross(dFdx(positionView), dFdy(positionView)));
}`);break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(s.normalType);case a.COUNT:case a.Ground:}}var a;!function(e){e[e.Attribute=0]="Attribute",e[e.Compressed=1]="Compressed",e[e.Ground=2]="Ground",e[e.ScreenDerivative=3]="ScreenDerivative",e[e.COUNT=4]="COUNT"}(a||(a={}));


/***/ }),

/***/ 33045:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(d,t){const a=t.output===_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor,n=t.objectAndLayerIdColorInstanced;a&&(d.varyings.add("objectAndLayerIdColorVarying","vec4"),n?d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.INSTANCEOBJECTANDLAYERIDCOLOR,"vec4"):d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR,"vec4")),d.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`
     void forwardObjectAndLayerIdColor() {
      ${a?n?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`objectAndLayerIdColorVarying = instanceObjectAndLayerIdColor * 0.003921568627451;`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`objectAndLayerIdColorVarying = objectAndLayerIdColor * 0.003921568627451;`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)``} }`),d.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`
      void outputObjectAndLayerIdColor() {
        ${a?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`fragColor = objectAndLayerIdColorVarying;`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)``} }`)}


/***/ }),

/***/ 10204:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ f),
/* harmony export */   W: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78286);
/* harmony import */ var _PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99915);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(54706);
/* harmony import */ var _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45160);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50645);
/* harmony import */ var _materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(17745);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const p=8;function f(e,c){const f=_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.FEATUREVALUE;e.attributes.add(f,"vec4");const n=e.vertex;n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
  bool isCapVertex() {
    return ${f}.w == 1.0;
  }
  `),n.uniforms.add(new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2PassUniform */ .G("size",(e=>e.size))),c.vvSize?(n.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float3PassUniform */ .t("vvSizeMinSize",(e=>e.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float3PassUniform */ .t("vvSizeMaxSize",(e=>e.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float3PassUniform */ .t("vvSizeOffset",(e=>e.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float3PassUniform */ .t("vvSizeFactor",(e=>e.vvSize.factor))),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    vec2 getSize() {
      return size * clamp(vvSizeOffset + ${f}.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).xz;
    }
    `)):n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec2 getSize(){
return size;
}`),c.vvOpacity?(n.constants.add("vvOpacityNumber","int",p),n.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatsPassUniform */ .x("vvOpacityValues",(e=>e.vvOpacity.values),p),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatsPassUniform */ .x("vvOpacityOpacities",(e=>e.vvOpacity.opacityValues),p)),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    vec4 applyOpacity(vec4 color) {
      float value = ${f}.z;
      if (value <= vvOpacityValues[0]) {
        return vec4( color.xyz, vvOpacityOpacities[0]);
      }

      for (int i = 1; i < vvOpacityNumber; ++i) {
        if (vvOpacityValues[i] >= value) {
          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
          return vec4( color.xyz, mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f));
        }
      }

      return vec4( color.xyz, vvOpacityOpacities[vvOpacityNumber - 1]);
    }
    `)):n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec4 applyOpacity(vec4 color){
return color;
}`),c.vvColor?(n.constants.add("vvColorNumber","int",_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .vvColorNumber */ .p),n.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatsPassUniform */ .x("vvColorValues",(e=>e.vvColor.values),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .vvColorNumber */ .p),new _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float4sPassUniform */ .F("vvColorColors",(e=>e.vvColor.colors),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .vvColorNumber */ .p)),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    vec4 getColor() {
      float value = ${f}.y;
      if (value <= vvColorValues[0]) {
        return applyOpacity(vvColorColors[0]);
      }

      for (int i = 1; i < vvColorNumber; ++i) {
        if (vvColorValues[i] >= value) {
          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
          return applyOpacity(mix(vvColorColors[i-1], vvColorColors[i], f));
        }
      }

      return applyOpacity(vvColorColors[vvColorNumber - 1]);
    }
    `)):n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec4 getColor(){
return applyOpacity(vec4(1, 1, 1, 1));
}`),e.include(_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .PositionAttribute */ .I),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.PROFILERIGHT,"vec4"),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.PROFILEUP,"vec4"),e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.PROFILEVERTEXANDNORMAL,"vec4"),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 calculateVPos() {
vec2 size = getSize();
vec3 origin = position;
vec3 right = profileRight.xyz;
vec3 up = profileUp.xyz;
vec3 forward = cross(up, right);
vec2 profileVertex = profileVertexAndNormal.xy * size;
vec2 profileNormal = profileVertexAndNormal.zw;
float positionOffsetAlongProfilePlaneNormal = 0.0;
float normalOffsetAlongProfilePlaneNormal = 0.0;`),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`if(!isCapVertex()) {
vec2 rotationRight = vec2(profileRight.w, profileUp.w);
float maxDistance = length(rotationRight);`),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`rotationRight = maxDistance > 0.0 ? normalize(rotationRight) : vec2(0, 0);
float rx = dot(profileVertex, rotationRight);
if (abs(rx) > maxDistance) {
vec2 rotationUp = vec2(-rotationRight.y, rotationRight.x);
float ry = dot(profileVertex, rotationUp);
profileVertex = rotationRight * maxDistance * sign(rx) + rotationUp * ry;
}
}else{
positionOffsetAlongProfilePlaneNormal = profileRight.w * size[0];
normalOffsetAlongProfilePlaneNormal = profileUp.w;
}
vec3 offset = right * profileVertex.x + up * profileVertex.y + forward * positionOffsetAlongProfilePlaneNormal;
return origin + offset;
}`),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 localNormal() {
vec3 right = profileRight.xyz;
vec3 up = profileUp.xyz;
vec3 forward = cross(up, right);
vec2 profileNormal = profileVertexAndNormal.zw;
vec3 normal = right * profileNormal.x + up * profileNormal.y;
if(isCapVertex()) {
normal += forward * profileUp.w;
}
return normal;
}`)}class n extends _materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .VisualVariablePassParameters */ .S{constructor(){super(...arguments),this.size=(0,_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,1)}}


/***/ }),

/***/ 99915:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION,"vec3"),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 positionModel() { return position; }`)}


/***/ }),

/***/ 56289:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   s: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34328);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45160);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("intrinsicWidth",(t=>t.width))),s.vvSize?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SIZEFEATUREATTRIBUTE,"float"),l.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeMinSize",(t=>t.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeMaxSize",(t=>t.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeOffset",(t=>t.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeFactor",(t=>t.vvSize.factor))),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SIZE,"float"),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float getSize(){
return intrinsicWidth * size;
}`)),s.vvOpacity?(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.OPACITYFEATUREATTRIBUTE,"float"),l.constants.add("vvOpacityNumber","int",8),l.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatsPassUniform */ .x("vvOpacityValues",(t=>t.vvOpacity.values),o),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatsPassUniform */ .x("vvOpacityOpacities",(t=>t.vvOpacity.opacityValues),o)),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 applyOpacity( vec4 color ){
return color;
}`),s.vvColor?(c.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .VisualVariables */ .A,s),c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,"float"),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(c.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLOR,"vec4"),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 getColor(){
return applyOpacity(color);
}`))}


/***/ }),

/***/ 67691:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/symbolColorUtils.js
var symbolColorUtils = __webpack_require__(55623);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){e.vertex.code.add((0,interfaces/* glsl */.H)`
    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {
      float symbolAlpha = 0.0;

      const float maxTint = 85.0;
      const float maxReplace = 170.0;
      const float scaleAlpha = 3.0;

      if (symbolColor.a > maxReplace) {
        colorMixMode = ${interfaces/* glsl */.H.int(symbolColorUtils/* ColorMixModeEnum */.k5.Multiply)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);
      } else if (symbolColor.a > maxTint) {
        colorMixMode = ${interfaces/* glsl */.H.int(symbolColorUtils/* ColorMixModeEnum */.k5.Replace)};
        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);
      } else if (symbolColor.a > 0.0) {
        colorMixMode = ${interfaces/* glsl */.H.int(symbolColorUtils/* ColorMixModeEnum */.k5.Tint)};
        symbolAlpha = scaleAlpha * symbolColor.a;
      } else {
        colorMixMode = ${interfaces/* glsl */.H.int(symbolColorUtils/* ColorMixModeEnum */.k5.Multiply)};
        symbolAlpha = 0.0;
      }

      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);
    }
  `)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js
var IntegerPassUniform = __webpack_require__(3445);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(i,t){t.hasSymbolColors?(i.include(e),i.attributes.add(VertexAttribute/* VertexAttribute */.r.SYMBOLCOLOR,"vec4"),i.varyings.add("colorMixMode","mediump float"),i.vertex.code.add((0,interfaces/* glsl */.H)`int symbolColorMixMode;
vec4 getSymbolColor() {
return decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;
}
void forwardColorMixMode() {
colorMixMode = float(symbolColorMixMode) + 0.5;
}`)):(i.fragment.uniforms.add(new IntegerPassUniform/* IntegerPassUniform */.c("colorMixMode",(o=>MaterialUtil/* colorMixModes */.Um[o.colorMixMode]))),i.vertex.code.add((0,interfaces/* glsl */.H)`vec4 getSymbolColor() { return vec4(1.0); }
void forwardColorMixMode() {}`))}


/***/ }),

/***/ 26139:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ o),
/* harmony export */   q: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var d;function o(o,v){switch(v.textureCoordinateType){case d.Default:return o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UV0,"vec2"),o.varyings.add("vuv0","vec2"),void o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() {
vuv0 = uv0;
}`);case d.Compressed:return o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UV0,"vec2"),o.varyings.add("vuv0","vec2"),void o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec2 getUV0() {
return uv0 / 16384.0;
}
void forwardTextureCoordinates() {
vuv0 = getUV0();
}`);case d.Atlas:return o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UV0,"vec2"),o.varyings.add("vuv0","vec2"),o.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UVREGION,"vec4"),o.varyings.add("vuvRegion","vec4"),void o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() {
vuv0 = uv0;
vuvRegion = uvRegion;
}`);default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(v.textureCoordinateType);case d.None:return void o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() {}`);case d.COUNT:return}}!function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Atlas=2]="Atlas",e[e.Compressed=3]="Compressed",e[e.COUNT=4]="COUNT"}(d||(d={}));


/***/ }),

/***/ 39739:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,d){d.hasVertexColors?(e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.COLOR,"vec4"),e.varyings.add("vColor","vec4"),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardVertexColor() { vColor = color; }`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}


/***/ }),

/***/ 82089:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Mh: () => (/* binding */ c),
/* harmony export */   Zo: () => (/* binding */ f),
/* harmony export */   gy: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76287);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52712);
/* harmony import */ var _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81283);
/* harmony import */ var _VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16989);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8376);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6561);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c(o,a){switch(a.normalType){case _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalType */ .W.Attribute:case _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalType */ .W.Compressed:o.include(_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalAttribute */ .Y,a),o.varyings.add("vNormalWorld","vec3"),o.varyings.add("vNormalView","vec3"),o.vertex.uniforms.add(new _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Matrix3DrawUniform */ .h("transformNormalGlobalFromModel",(r=>r.transformNormalGlobalFromModel)),new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Matrix3PassUniform */ .k("transformNormalViewFromGlobal",(r=>r.transformNormalViewFromGlobal))),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`void forwardNormal() {
vNormalWorld = transformNormalGlobalFromModel * normalModel();
vNormalView = transformNormalViewFromGlobal * vNormalWorld;
}`);break;case _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalType */ .W.Ground:o.include(_VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexPosition */ .em,a),o.varyings.add("vNormalWorld","vec3"),o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
        void forwardNormal() {
          vNormalWorld = ${a.spherical?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`normalize(vPositionWorldCameraRelative);`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3(0.0, 0.0, 1.0);`}
        }
        `);break;case _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalType */ .W.ScreenDerivative:o.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`void forwardNormal() {}`);break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(a.normalType);case _NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .NormalType */ .W.COUNT:}}class f extends _VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexPositionPassParameters */ .dO{constructor(){super(...arguments),this.transformNormalViewFromGlobal=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()}}class v extends _VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexPositionDrawParameters */ .EM{constructor(){super(...arguments),this.transformNormalGlobalFromModel=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),this.toMapSpace=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}


/***/ }),

/***/ 16989:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EM: () => (/* binding */ W),
/* harmony export */   dO: () => (/* binding */ F),
/* harmony export */   em: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22279);
/* harmony import */ var _PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99915);
/* harmony import */ var _util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10470);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8376);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6561);
/* harmony import */ var _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20778);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function v(r,o){r.include(_PositionAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .PositionAttribute */ .I);const e=r.vertex;e.include(_util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .DoublePrecision */ .u,o),r.varyings.add("vPositionWorldCameraRelative","vec3"),r.varyings.add("vPosition_view","vec3"),e.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float3PassUniform */ .t("transformWorldFromViewTH",(r=>r.transformWorldFromViewTH)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float3PassUniform */ .t("transformWorldFromViewTL",(r=>r.transformWorldFromViewTL)),new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Matrix3PassUniform */ .k("transformViewFromCameraRelativeRS",(r=>r.transformViewFromCameraRelativeRS)),new _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Matrix4PassUniform */ .X("transformProjFromView",(r=>r.transformProjFromView)),new _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Matrix3DrawUniform */ .h("transformWorldFromModelRS",(r=>r.transformWorldFromModelRS)),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3DrawUniform */ .W("transformWorldFromModelTH",(r=>r.transformWorldFromModelTH)),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3DrawUniform */ .W("transformWorldFromModelTL",(r=>r.transformWorldFromModelTL))),e.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),e.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${o.spherical?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),r.fragment.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float3PassUniform */ .t("transformWorldFromViewTL",(r=>r.transformWorldFromViewTL))),e.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),r.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class F extends _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .NoParameters */ .Y{constructor(){super(...arguments),this.transformWorldFromViewTH=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),this.transformWorldFromViewTL=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),this.transformViewFromCameraRelativeRS=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__.a)(),this.transformProjFromView=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()}}class W extends _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .NoParameters */ .Y{constructor(){super(...arguments),this.transformWorldFromModelRS=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__.a)(),this.transformWorldFromModelTH=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)(),this.transformWorldFromModelTL=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}


/***/ }),

/***/ 81783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  r: () => (/* binding */ s)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){e.fragment.code.add((0,interfaces/* glsl */.H)`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {
vec2 atlasScale = atlasRegion.zw - atlasRegion.xy;
vec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;
float maxdUV = 0.125;
vec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
vec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
return textureGrad(tex, uvAtlas, dUVdx, dUVdy);
}`)}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(s,a){switch(s.include(TextureCoordinateAttribute_glsl/* TextureCoordinateAttribute */.U,a),a.textureCoordinateType){case TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.Default:case TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.Compressed:return void s.fragment.code.add((0,interfaces/* glsl */.H)`vec4 textureLookup(sampler2D tex, vec2 uv) {
return texture(tex, uv);
}`);case TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.Atlas:return s.include(e),void s.fragment.code.add((0,interfaces/* glsl */.H)`vec4 textureLookup(sampler2D tex, vec2 uv) {
return textureAtlasLookup(tex, uv, vuvRegion);
}`);default:(0,compilerUtils/* neverReached */.Xb)(a.textureCoordinateType);case TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.None:case TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.COUNT:return}}


/***/ }),

/***/ 54009:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ a),
/* harmony export */   V: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52712);
/* harmony import */ var _util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6916);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(e,r){const c=e.vertex;r.hasVerticalOffset?(f(c),r.hasScreenSizePerspective&&(e.include(_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ScreenSizePerspective */ .Y6),(0,_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addScreenSizePerspectiveAlignment */ .OH)(c),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .addCameraPosition */ .yu)(e.vertex,r)),c.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${r.spherical?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 worldNormal = normalize(worldPos + localOrigin);`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${r.hasScreenSizePerspective?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):c.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const i=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();function f(r){r.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float4PassUniform */ .E("verticalOffset",((r,t)=>{const{minWorldLength:l,maxWorldLength:o,screenLength:c}=r.verticalOffset,s=Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),a=t.camera.pixelRatio||1;return (0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_0__.s)(i,c*a,s,l,o)})))}


/***/ }),

/***/ 23399:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(81283);
/* harmony import */ var _attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33045);
/* harmony import */ var _attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(26139);
/* harmony import */ var _attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82089);
/* harmony import */ var _output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(56178);
/* harmony import */ var _output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(63269);
/* harmony import */ var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(34328);
/* harmony import */ var _util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29724);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(79856);
/* harmony import */ var _lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function h(h,x){const{vertex:j,fragment:O}=h,w=x.hasColorTexture&&x.alphaDiscardMode!==_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_15__/* .AlphaDiscardMode */ .sf.Opaque;switch(x.output){case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Shadow:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ShadowHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ShadowExcludeHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor:(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .addProjViewLocalOrigin */ .NB)(j,x),h.include(_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,x),h.include(_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureCoordinateAttribute */ .U,x),h.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .VisualVariables */ .A,x),h.include(_output_OutputDepth_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .OutputDepth */ .L,x),h.include(_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),h.include(_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .ObjectAndLayerIdColor */ .g,x),(0,_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addNearFar */ .xJ)(h),h.varyings.add("depth","float"),w&&O.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Texture2DPassUniform */ .N("tex",(o=>o.texture))),j.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`void main(void) {
vpos = getVertexInLocalOriginSpace();
vpos = subtractOrigin(vpos);
vpos = addVerticalOffset(vpos, localOrigin);
gl_Position = transformPositionWithDepth(proj, view, vpos, nearFar, depth);
forwardTextureCoordinates();
forwardObjectAndLayerIdColor();
}`),h.include(_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .DiscardOrAdjustAlphaPass */ .S,x),O.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
          void main(void) {
            discardBySlice(vpos);
            ${w?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
                    vec4 texColor = texture(tex, ${x.hasColorTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`colorUV`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vuv0`});
                    discardOrAdjustAlpha(texColor);`:""}
            ${x.output===_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.ObjectAndLayerIdColor?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputObjectAndLayerIdColor();`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`outputDepth(depth);`}
          }
        `);break;case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Normal:{(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .addProjViewLocalOrigin */ .NB)(j,x),h.include(_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,x),h.include(_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalAttribute */ .Y,x),h.include(_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexNormal */ .Mh,x),h.include(_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureCoordinateAttribute */ .U,x),h.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .VisualVariables */ .A,x),w&&O.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Texture2DPassUniform */ .N("tex",(o=>o.texture))),x.normalType===_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalType */ .W.ScreenDerivative&&h.varyings.add("vPositionView","vec3");const o=x.normalType===_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalType */ .W.Attribute||x.normalType===_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalType */ .W.Compressed;j.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
          void main(void) {
            vpos = getVertexInLocalOriginSpace();

            ${o?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
                  // Get vertex position in camera space for screen-space derivative normals
                  vPositionView = (view * vec4(vpos, 1.0)).xyz;
                `}
            vpos = subtractOrigin(vpos);
            vpos = addVerticalOffset(vpos, localOrigin);
            gl_Position = transformPosition(proj, view, vpos);
            forwardTextureCoordinates();
          }
        `),h.include(_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),h.include(_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .DiscardOrAdjustAlphaPass */ .S,x),O.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
          void main() {
            discardBySlice(vpos);
            ${w?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
                    vec4 texColor = texture(tex, ${x.hasColorTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`colorUV`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vuv0`});
                    discardOrAdjustAlpha(texColor);`:""}

            ${x.normalType===_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalType */ .W.ScreenDerivative?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vec3 normal = screenDerivativeNormal(vPositionView);`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
                  vec3 normal = normalize(vNormalWorld);
                  if (gl_FrontFacing == false){
                    normal = -normal;
                  }`}
            fragColor = vec4(0.5 + 0.5 * normal, 1.0);
          }
        `);break}case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight:(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .addProjViewLocalOrigin */ .NB)(j,x),h.include(_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,x),h.include(_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureCoordinateAttribute */ .U,x),h.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .VisualVariables */ .A,x),w&&O.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Texture2DPassUniform */ .N("tex",(o=>o.texture))),j.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`void main(void) {
vpos = getVertexInLocalOriginSpace();
vpos = subtractOrigin(vpos);
vpos = addVerticalOffset(vpos, localOrigin);
gl_Position = transformPosition(proj, view, vpos);
forwardTextureCoordinates();
}`),h.include(_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,x),h.include(_util_AlphaDiscard_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .DiscardOrAdjustAlphaPass */ .S,x),h.include(_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .OutputHighlight */ .Qh,x),O.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
          void main() {
            discardBySlice(vpos);
            ${w?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`
                    vec4 texColor = texture(tex, ${x.hasColorTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`colorUV`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_13__/* .glsl */ .H)`vuv0`});
                    discardOrAdjustAlpha(texColor);`:""}
            outputHighlight();
          }
        `)}}


/***/ }),

/***/ 16917:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72563);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){o.uniforms.add(new _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .BooleanPassUniform */ .e("alignPixelEnabled",((e,i)=>i.alignPixelEnabled))),o.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),o.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}


/***/ }),

/***/ 97085:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ d),
/* harmony export */   R: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(54009);
/* harmony import */ var _util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6916);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99152);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const p=.5;function d(d,u){d.include(_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSizePerspective */ .Y6),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexAttribute */ .r.POSITION,"vec3"),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexAttribute */ .r.NORMAL,"vec3"),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexAttribute */ .r.AUXPOS1,"vec4");const v=d.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addProjViewLocalOrigin */ .NB)(v,u),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addCameraPosition */ .yu)(v,u),v.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float4PassUniform */ .E("viewport",((e,t)=>t.camera.fullViewport)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatPassUniform */ .m("polygonOffset",(e=>e.shaderPolygonOffset)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatPassUniform */ .m("cameraGroundRelative",((e,t)=>t.camera.aboveGround?1:-1))),u.hasVerticalOffset&&(0,_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addVerticalOffset */ .V)(v),v.constants.add("smallOffsetAngle","float",.984807753012208),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${u.multipassEnabled?_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H.float(0):(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),u.draped&&!u.hasVerticalOffset||(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addViewNormal */ .S7)(v),u.draped||(v.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatPassUniform */ .m("perDistancePixelRatio",((e,t)=>Math.tan(t.camera.fovY/2)/(t.camera.fullViewport[2]/2)))),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H.float(p)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),u.screenCenterOffsetUnitsEnabled&&(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addPixelRatio */ .Nz)(v),u.hasScreenSizePerspective&&(0,_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addScreenSizePerspectiveAlignment */ .OH)(v),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offset of labels with respect to objects.
      // It also pulls the label towards the viewer so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${u.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${u.hasScreenSizePerspective&&(u.hasVerticalOffset||u.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${u.hasVerticalOffset?u.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${u.hasVerticalOffset?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${u.screenCenterOffsetUnitsEnabled?"":(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${u.screenCenterOffsetUnitsEnabled?u.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${u.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}


/***/ }),

/***/ 36985:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16917);
/* harmony import */ var _shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46823);
/* harmony import */ var _shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80600);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(i,s){const{vertex:p,fragment:n}=i;p.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .AlignPixel */ .K),s.multipassEnabled&&(p.include(_shading_MultipassGeometryTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .multipassGeometryTest */ .H),i.varyings.add("depth","float")),p.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${s.multipassEnabled?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      ${s.multipassEnabled?"depth = projectAux.posView.z;":""}
      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    } else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `),i.include(_shading_MultipassTerrainTest_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .multipassTerrainTest */ .Q,s),n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
  void main() {
    fragColor = vec4(1);
    ${s.multipassEnabled?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
        if(terrainDepthTest(depth)) {
          fragColor.g = 0.5;
        }`:""}
  }
  `)}


/***/ }),

/***/ 15354:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ c)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var c;!function(c){c[c.Occluded=0]="Occluded",c[c.NotOccluded=1]="NotOccluded",c[c.Both=2]="Both",c[c.COUNT=3]="COUNT"}(c||(c={}));


/***/ }),

/***/ 3097:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16917);
/* harmony import */ var _HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15354);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t){t.vertex.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatPassUniform */ .m("renderTransparentlyOccludedHUD",((e,o)=>o.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__/* .HUDRenderStyle */ .D.Occluded?1:o.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__/* .HUDRenderStyle */ .D.NotOccluded?0:.75)),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float4PassUniform */ .E("viewport",((e,r)=>r.camera.fullViewport)),new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("hudVisibilityTexture",((e,r)=>r.hudVisibility?.colorTexture))),t.vertex.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .AlignPixel */ .K),t.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}


/***/ }),

/***/ 56178:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _util_RgbaFloat16Encoding_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4969);
/* harmony import */ var _util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70224);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(l,r){switch(r.output){case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Shadow:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowExcludeHighlight:l.fragment.include(_util_RgbaFloat16Encoding_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Rgba4FloatEncoding */ .U),l.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 20.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
return depth + SLOPE_SCALE * m + BIAS;
}
void outputDepth(float _linearDepth) {
fragColor = floatToRgba4(_calculateFragDepth(_linearDepth));
}`);break;case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Depth:l.fragment.include(_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .RgbaFloatEncoding */ .W),l.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void outputDepth(float _linearDepth) {
fragColor = float2rgba(_linearDepth);
}`)}}


/***/ }),

/***/ 63269:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Qh: () => (/* binding */ a),
/* harmony export */   U: () => (/* binding */ d),
/* harmony export */   bO: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52712);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,1,0,1),r=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,0,1,1);function a(e){e.fragment.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Texture2DPassUniform */ .N("depthTexture",((e,o)=>o.mainDepth))),e.fragment.constants.add("occludedHighlightFlag","vec4",d).add("unoccludedHighlightFlag","vec4",r),e.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void outputHighlight() {
float sceneDepth = float(texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x);
if (gl_FragCoord.z > sceneDepth + 5e-7) {
fragColor = occludedHighlightFlag;
} else {
fragColor = unoccludedHighlightFlag;
}
}`)}


/***/ }),

/***/ 67726:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(70224);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(a){a.include(_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .RgbaFloatEncoding */ .W),a.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromRGBA(vec4 depth, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(depth), nearFar);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
ivec2 iuv = ivec2(uv * vec2(textureSize(depthTex, 0)));
return linearDepthFromRGBA(texelFetch(depthTex, iuv, 0), nearFar);
}`)}


/***/ }),

/***/ 76080:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(26139);
/* harmony import */ var _attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(81783);
/* harmony import */ var _Normals_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46971);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52293);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57198);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function m(m,c){const i=m.fragment;c.hasVertexTangents?(m.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.TANGENT,"vec4"),m.varyings.add("vTangent","vec4"),c.doubleSidedMode===_Normals_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .NormalsDoubleSidedMode */ .W.WindingOrder?i.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;
vec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`):i.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`mat3 computeTangentSpace(vec3 normal) {
float tangentHeadedness = vTangent.w;
vec3 tangent = normalize(vTangent.xyz);
vec3 bitangent = cross(normal, tangent) * tangentHeadedness;
return mat3(tangent, bitangent, normal);
}`)):i.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {
vec3 Q1 = dFdx(pos);
vec3 Q2 = dFdy(pos);
vec2 stx = dFdx(st);
vec2 sty = dFdy(st);
float det = stx.t * sty.s - sty.t * stx.s;
vec3 T = stx.t * Q2 - sty.t * Q1;
T = T - normal * dot(normal, T);
T *= inversesqrt(max(dot(T,T), 1.e-10));
vec3 B = sign(det) * cross(normal, T);
return mat3(T, B, normal);
}`),c.textureCoordinateType!==_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureCoordinateAttributeType */ .q.None&&(m.include(_attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexTextureCoordinates */ .r,c),i.uniforms.add(c.pbrTextureBindType===_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("normalTexture",(e=>e.textureNormal)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("normalTexture",(e=>e.textureNormal))),i.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {
vec3 rawNormal = textureLookup(normalTexture, uv).rgb * 2.0 - 1.0;
return tangentSpace * rawNormal;
}`))}


/***/ }),

/***/ 52636:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52712);
/* harmony import */ var _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39486);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function m(n,g){const m=n.fragment,o=void 0!==g.lightingSphericalHarmonicsOrder?g.lightingSphericalHarmonicsOrder:2;0===o?(m.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3PassUniform */ .t("lightingAmbientSH0",((n,t)=>(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.s)(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0])))),m.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
return ambientLight * (1.0 - ambientOcclusion);
}`)):1===o?(m.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_R",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.r[0],n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_G",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.g[0],n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_B",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.b[0],n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3])))),m.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec4 sh0 = vec4(
0.282095,
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y
);
vec3 ambientLight = vec3(
dot(lightingAmbientSH_R, sh0),
dot(lightingAmbientSH_G, sh0),
dot(lightingAmbientSH_B, sh0)
);
return ambientLight * (1.0 - ambientOcclusion);
}`)):2===o&&(m.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3PassUniform */ .t("lightingAmbientSH0",((n,t)=>(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.s)(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_R1",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3],n.lighting.sh.r[4]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_G1",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3],n.lighting.sh.g[4]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_B1",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3],n.lighting.sh.b[4]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_R2",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.r[5],n.lighting.sh.r[6],n.lighting.sh.r[7],n.lighting.sh.r[8]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_G2",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.g[5],n.lighting.sh.g[6],n.lighting.sh.g[7],n.lighting.sh.g[8]))),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float4PassUniform */ .E("lightingAmbientSH_B2",((i,n)=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(r,n.lighting.sh.b[5],n.lighting.sh.b[6],n.lighting.sh.b[7],n.lighting.sh.b[8])))),m.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {
vec3 ambientLight = 0.282095 * lightingAmbientSH0;
vec4 sh1 = vec4(
0.488603 * normal.x,
0.488603 * normal.z,
0.488603 * normal.y,
1.092548 * normal.x * normal.y
);
vec4 sh2 = vec4(
1.092548 * normal.y * normal.z,
0.315392 * (3.0 * normal.z * normal.z - 1.0),
1.092548 * normal.x * normal.z,
0.546274 * (normal.x * normal.x - normal.y * normal.y)
);
ambientLight += vec3(
dot(lightingAmbientSH_R1, sh1),
dot(lightingAmbientSH_G1, sh1),
dot(lightingAmbientSH_B1, sh1)
);
ambientLight += vec3(
dot(lightingAmbientSH_R2, sh2),
dot(lightingAmbientSH_G2, sh2),
dot(lightingAmbientSH_B2, sh2)
);
return ambientLight * (1.0 - ambientOcclusion);
}`),g.pbrMode!==_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .PBRMode */ .A9.Normal&&g.pbrMode!==_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .PBRMode */ .A9.Schematic||m.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .glsl */ .H)`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);
vec3 calculateAmbientRadiance(float ambientOcclusion)
{
vec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;
return ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;
}`))}const a=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),r=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();


/***/ }),

/***/ 56349:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  n: () => (/* binding */ EvaluateAmbientOcclusion_glsl_t)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/time.js
var time = __webpack_require__(60882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var core_has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOCache.js + 1 modules
var FBOCache = __webpack_require__(4588);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js
var RenderPlugin = __webpack_require__(38931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js
var SSAOBlur_glsl = __webpack_require__(45789);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOBlurTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(r){return new Program/* Program */.B(r.rctx,a.shader.get().build(),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWriteParams */.wE})}}a.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(SSAOBlur_glsl.S,(()=>__webpack_require__.e(/* import() */ 3513).then(__webpack_require__.bind(__webpack_require__, 13513))));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAONoiseData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const SSAONoiseData_e="eXKEvZaUc66cjIKElE1jlJ6MjJ6Ufkl+jn2fcXp5jBx7c6KEflSGiXuXeW6OWs+tfqZ2Yot2Y7Zzfo2BhniEj3xoiXuXj4eGZpqEaHKDWjSMe7palFlzc3BziYOGlFVzg6Zzg7CUY5JrjFF7eYJ4jIKEcyyEonSXe7qUfqZ7j3xofqZ2c4R5lFZ5Y0WUbppoe1l2cIh2ezyUho+BcHN2cG6DbpqJhqp2e1GcezhrdldzjFGUcyxjc3aRjDyEc1h7Sl17c6aMjH92pb6Mjpd4dnqBjMOEhqZleIOBYzB7gYx+fnqGjJuEkWlwnCx7fGl+c4hjfGyRe5qMlNOMfnqGhIWHc6OMi4GDc6aMfqZuc6aMzqJzlKZ+lJ6Me3qRfoFue0WUhoR5UraEa6qMkXiPjMOMlJOGe7JrUqKMjK6MeYRzdod+Sl17boiPc6qEeYBlcIh2c1WEe7GDiWCDa0WMjEmMdod+Y0WcdntzhmN8WjyMjKJjiXtzgYxYaGd+a89zlEV7e2GJfnd+lF1rcK5zc4p5cHuBhL6EcXp5eYB7fnh8iX6HjIKEeaxuiYOGc66RfG2Ja5hzjlGMjEmMe9OEgXuPfHyGhPeEdl6JY02McGuMfnqGhFiMa3WJfnx2l4hwcG1uhmN8c0WMc39og1GBbrCEjE2EZY+JcIh2cIuGhIWHe0mEhIVrc09+gY5+eYBlnCyMhGCDl3drfmmMgX15aGd+gYx+fnuRfnhzY1SMsluJfnd+hm98WtNrcIuGh4SEj0qPdkqOjFF7jNNjdnqBgaqUjMt7boeBhnZ4jDR7c5pze4GGjEFrhLqMjHyMc0mUhKZze4WEa117kWlwbpqJjHZ2eX2Bc09zeId+e0V7WlF7jHJ2l72BfId8l3eBgXyBe897jGl7c66cgW+Xc76EjKNbgaSEjGx4fId8jFFjgZB8cG6DhlFziZhrcIh2fH6HgUqBgXiPY8dahGFzjEmMhEFre2dxhoBzc5SGfleGe6alc7aUeYBlhKqUdlp+cH5za4OEczxza0Gcc4J2jHZ5iXuXjH2Jh5yRjH2JcFx+hImBjH+MpddCl3dreZeJjIt8ZW18bm1zjoSEeIOBlF9oh3N7hlqBY4+UeYFwhLJjeYFwaGd+gUqBYxiEYot2fqZ2ondzhL6EYyiEY02Ea0VjgZB8doaGjHxoc66cjEGEiXuXiXWMiZhreHx8frGMe75rY02Ec5pzfnhzlEp4a3VzjM+EhFFza3mUY7Zza1V5e2iMfGyRcziEhDyEkXZ2Y4OBnCx7g5t2eyBjgV6EhEFrcIh2dod+c4Z+nJ5zjm15jEmUeYxijJp7nL6clIpjhoR5WrZraGd+fnuRa6pzlIiMg6ZzfHx5foh+eX1ufnB5eX1ufnB5aJt7UqKMjIh+e3aBfm5lbYSBhGFze6J4c39oc0mUc4Z+e0V7fKFVe0WEdoaGY02Ec4Z+Y02EZYWBfH6HgU1+gY5+hIWUgW+XjJ57ebWRhFVScHuBfJ6PhBx7WqJzlM+Ujpd4gHZziX6HjHmEgZN+lJt5boiPe2GJgX+GjIGJgHZzeaxufnB5hF2JtdN7jJ57hp57hK6ElFVzg6ZzbmiEbndzhIWHe3uJfoFue3qRhJd2j3xoc65zlE1jc3p8lE1jhniEgXJ7e657vZaUc3qBh52BhIF4aHKDa9drgY5+c52GWqZzbpqJe8tjnM+UhIeMfo2BfGl+hG1zSmmMjKJjZVaGgX15c1lze0mEp4OHa3mUhIWHhDyclJ6MeYOJkXiPc0VzhFiMlKaEboSJa5Jze41re3qRhn+HZYWBe0mEc4p5fnORbox5lEp4hGFjhGGEjJuEc1WEhLZjeHeGa7KlfHx2hLaMeX1ugY5+hIWHhKGPjMN7c1WEho1zhoBzZYx7fnhzlJt5exyUhFFziXtzfmmMa6qMYyiEiXxweV12kZSMeWqXSl17fnhzxmmMrVGEe1mcc4p5eHeGjK6MgY5+doaGa6pzlGV7g1qBh4KHkXiPeW6OaKqafqZ2eXZ5e1V7jGd7boSJc3BzhJd2e0mcYot2h1RoY8dahK6EQmWEWjx7e1l2lL6UgXyBdnR4eU9zc0VreX1umqaBhld7fo2Bc6KEc5Z+hDyEcIeBWtNrfHyGe5qMhMuMe5qMhEGEbVVupcNzg3aHhIF4boeBe0mEdlptc39ofFl5Y8uUlJOGiYt2UmGEcyxjjGx4jFF7a657ZYWBnElzhp57iXtrgZN+tfOEhIOBjE2HgU1+e8tjjKNbiWCDhE15gUqBgYN7fnqGc66ce9d7iYSBj0qPcG6DnGGcT3eGa6qMZY+JlIiMl4hwc3aRdnqBlGV7eHJ2hLZjfnuRhDyEeX6MSk17g6Z+c6aUjHmEhIF4gXyBc76EZW18fGl+fkl+jCxrhoVwhDyUhIqGlL2DlI6EhJd2tdN7eYORhEGMa2Faa6pzc3Bzc4R5lIRznM+UY9eMhDycc5Z+c4p5c4iGY117pb6MgXuPrbJafnx2eYOJeXZ5e657hDyEcziElKZjfoB5eHeGj4WRhGGEe6KGeX1utTStc76EhFGJnCyMa5hzfH6HnNeceYB7hmN8gYuMhIVrczSMgYF8h3N7c5pza5hzjJqEYIRdgYuMlL2DeYRzhGGEeX1uhLaEc4iGeZ1zdl6JhrVteX6Me2iMfm5lWqJzSpqEa6pzdnmchHx2c6OMhNdrhoR5g3aHczxzeW52gV6Ejm15frGMc0Vzc4Z+l3drfniJe+9rWq5rlF1rhGGEhoVwe9OEfoh+e7pac09+c3qBY0lrhDycdnp2lJ6MiYOGhGCDc3aRlL2DlJt5doaGdnp2gYF8gWeOjF2Uc4R5c5Z+jEmMe7KEc4mEeYJ4dmyBe0mcgXiPbqJ7eYB7fmGGiYSJjICGlF1reZ2PnElzbpqJfH6Hc39oe4WEc5eJhK6EhqyJc3qBgZB8c09+hEmEaHKDhFGJc5SGiXWMUpaEa89zc6OMnCyMiXtrho+Be5qMc7KEjJ57dmN+hKGPjICGbmiEe7prdod+hGCDdnmchBx7eX6MkXZ2hGGEa657hm98jFFjY5JreYOJgY2EjHZ2a295Y3FajJ6Mc1J+YzB7e4WBjF2Uc4R5eV12gYxzg1qBeId+c9OUc5pzjFFjgY5+hFiMlIaPhoR5lIpjjIKBlNdSe7KEeX2BfrGMhIqGc65zjE2UhK6EklZ+QmWEeziMWqZza3VzdnR4foh+gYF8n3iJiZhrnKp7gYF8eId+lJ6Me1lrcIuGjKJjhmN8c66MjFF7a6prjJ6UnJ5zezyUfruRWlF7nI5zfHyGe657h4SEe8tjhBx7jFFjc09+c39ojICMeZeJeXt+YzRzjHZ2c0WEcIeBeXZ5onSXkVR+gYJ+eYFwdldzgYF7eX2BjJ6UiXuXlE1jh4SEe1mchLJjc4Z+hqZ7eXZ5bm1zlL6Ue5p7iWeGhKqUY5pzjKJjcIeBe8t7gXyBYIRdlEp4a3mGnK6EfmmMZpqEfFl5gYxzjKZuhGFjhoKGhHx2fnx2eXuMe3aBiWeGvbKMe6KGa5hzYzB7gZOBlGV7hmN8hqZlYot2Y117a6pzc6KEfId8foB5rctrfneJfJ6PcHN2hFiMc5pzjH92c0VzgY2EcElzdmCBlFVzg1GBc65zY4OBboeBcHiBeYJ4ewxzfHx5lIRzlEmEnLKEbk1zfJ6PhmN8eYBljBiEnMOEiXxwezyUcIeBe76EdsKEeX2BdnR4jGWUrXWMjGd7fkl+j4WRlEGMa5Jzho+BhDyEfnqMeXt+g3aHlE1jczClhNN7ZW18eHx8hGFjZW18iXWMjKJjhH57gYuMcIuGWjyMe4ZtjJuExmmMj4WRdntzi4GDhFFzYIRdnGGcjJp7Y0F7e4WEkbCGiX57fnSHa657a6prhBCMe3Z+SmmMjH92eHJ2hK6EY1FzexhrvbKMnI5za4OEfnd+eXuMhImBe897hLaMjN+EfG+BeIOBhF1+eZeJi4GDkXZ2eXKEgZ6Ejpd4c2GHa1V5e5KUfqZuhCx7jKp7lLZrg11+hHx2hFWUoot2nI5zgbh5mo9zvZaUe3qRbqKMfqZ2kbCGhFiM";

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends interfaces/* NoParameters */.Y{constructor(){super(...arguments),this.projScale=1}}class t extends r{constructor(){super(...arguments),this.intensity=1}}class c extends interfaces/* NoParameters */.Y{}class o extends c{constructor(){super(...arguments),this.blurSize=(0,vec2f64.a)()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/SSAO.glsl.js
var SSAO_glsl = __webpack_require__(51522);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAOTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class l extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,l.shader.get().build(),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWriteParams */.wE})}}l.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(SSAO_glsl.S,(()=>__webpack_require__.e(/* import() */ 350).then(__webpack_require__.bind(__webpack_require__, 30350))));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/RenderState.js
var RenderState = __webpack_require__(40695);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderFeature.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var RenderFeature_o;function RenderFeature_t(t=!has("disable-feature:high-quality-idle"),s=null){const n=new e;return t?(n.set(i.IDLE,RenderFeature_o.Antialiasing,"low"!==s),n.set(i.IDLE,RenderFeature_o.HighResolutionAtmosphere,"low"!==s),n.set(i.IDLE,RenderFeature_o.HighQualityTransparency,!0),n.set(i.IDLE,RenderFeature_o.SSAO,!0),n.set(i.IDLE,RenderFeature_o.WaterReflection,!0),n.set(i.IDLE,RenderFeature_o.PhysicalPixelRendering,!0)):(n.set(i.ANIMATING,RenderFeature_o.HighResolutionShadows,!0),n.set(i.INTERACTING,RenderFeature_o.HighResolutionShadows,!0)),n.set(i.IDLE,RenderFeature_o.HighResolutionShadows,!0),n.set(i.IDLE,RenderFeature_o.HighResolutionVoxel,!0),n}!function(e){e[e.Antialiasing=0]="Antialiasing",e[e.HighQualityTransparency=1]="HighQualityTransparency",e[e.HighResolutionVoxel=2]="HighResolutionVoxel",e[e.HighResolutionAtmosphere=3]="HighResolutionAtmosphere",e[e.SSAO=4]="SSAO",e[e.WaterReflection=5]="WaterReflection",e[e.HighResolutionShadows=6]="HighResolutionShadows",e[e.PhysicalPixelRendering=7]="PhysicalPixelRendering"}(RenderFeature_o||(RenderFeature_o={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/ssao/SSAO.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const R=2;let y=class extends RenderPlugin/* SyncRenderPlugin */.RW{constructor(e){super(e),this._context=null,this._passParameters=new t,this._drawParameters=new o,this.produces=new Map([[RenderSlot/* RenderSlot */.N.SSAO,()=>this._produces()]])}_produces(){return null!=this._enableTime&&null!=this._context}consumes(){return this._produces()?RenderPlugin/* ConsumesDepthNormal */.A9:RenderPlugin/* ConsumesNone */.qo}initializeRenderContext(e){this._context=e,this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.view.qualitySettings.ambientOcclusion||this._context?.isFeatureEnabled(RenderFeature_o.SSAO)),(e=>e?this._enable():this._disable()),reactiveUtils/* syncAndInitial */.pc)])}uninitializeRenderContext(){this._disable(),this._context=null}_disable(){this._passParameters.noiseTexture=(0,maybe/* disposeMaybe */.WD)(this._passParameters.noiseTexture),this._enableTime=null}destroy(){this._disable()}_enable(){if(null!=this._enableTime||!this._context)return;const e=Uint8Array.from(atob(SSAONoiseData_e),(e=>e.charCodeAt(0))),t=new TextureDescriptor/* TextureDescriptor */.R;t.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,t.pixelFormat=enums/* PixelFormat */.Ab.RGB,t.wrapMode=enums/* TextureWrapMode */.pF.REPEAT,t.hasMipmap=!0,t.width=32,t.height=32,this._passParameters.noiseTexture=new Texture/* Texture */.g(this._context.renderContext.rctx,t,e),null==this._ssaoTechnique&&(this._ssaoTechnique=this._context.techniqueRepository.acquire(l)),null==this._blurTechnique&&(this._blurTechnique=this._context.techniqueRepository.acquire(a)),this._enableTime=(0,time/* Milliseconds */.l5)(0),this._context?.requestRender()}renderNode(e,t,r){const s=e.bindParameters,i=s.linearDepth?.colorTexture,o=r?.normal?.colorTexture;if(null==this._enableTime||null==this._context||null==i||!o)return;if(!this._ssaoTechnique.compiled||!this._blurTechnique.compiled)return this._enableTime=e.time,void this._context.requestRender();0===this._enableTime&&(this._enableTime=e.time);const a=e.rctx,m=s.camera,u=this.view.qualitySettings.fadeDuration,l=u>0?Math.min(u,e.time-this._enableTime)/u:1;this._passParameters.normalTexture=o,this._passParameters.depthTexture=i,this._passParameters.projScale=1/m.computeScreenPixelSizeAtDist(1),this._passParameters.intensity=4*O/(0,SSAO_glsl.g)(m)**6*l;const h=m.fullViewport[2],p=m.fullViewport[3],_=Math.round(h/R),d=Math.round(p/R),b=this._context.fbos,f=b.acquire(FBOCache/* ColorFormat */.NV.RED,h,p);a.bindFramebuffer(f.fbo),a.setViewport(0,0,h,p);a.bindTechnique(this._ssaoTechnique,this._passParameters,s).bindDraw(this._drawParameters,s,this._passParameters),a.screen.draw();const w=a.bindTechnique(this._blurTechnique,this._passParameters,s);a.setViewport(0,0,_,d);const x=b.acquire(FBOCache/* ColorFormat */.NV.RED,_,d);a.bindFramebuffer(x.fbo),this._drawParameters.colorTexture=f.colorTexture,(0,vec2.s)(this._drawParameters.blurSize,0,R/p),w.bindDraw(this._drawParameters,s,this._passParameters),a.setViewport(0,0,_,d),a.screen.draw(),f.release();const P=b.acquire(FBOCache/* ColorFormat */.NV.RED,_,d);return a.bindFramebuffer(P.fbo),a.setViewport(0,0,h,p),a.setClearColor(1,1,1,0),a.clear(enums/* ClearBufferBit */.hn.COLOR_BUFFER_BIT),a.setViewport(0,0,_,d),this._drawParameters.colorTexture=x.colorTexture,(0,vec2.s)(this._drawParameters.blurSize,R/h,0),w.bindDraw(this._drawParameters,s,this._passParameters),a.screen.draw(),a.setViewport4fv(m.fullViewport),x.release(),l<1&&this._context.requestRender(),P}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],y.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],y.prototype,"_context",void 0),y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.effects.ssao.SSAO")],y);const O=.5;

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function EvaluateAmbientOcclusion_glsl_t(t,o){const a=t.fragment;o.receiveAmbientOcclusion?(a.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("ssaoTex",((e,s)=>s.ssao?.colorTexture))),a.constants.add("blurSizePixelsInverse","float",1/R),a.code.add((0,interfaces/* glsl */.H)`float evaluateAmbientOcclusionInverse() {
vec2 ssaoTextureSizeInverse = 1.0 / vec2(textureSize(ssaoTex, 0));
return texture(ssaoTex, gl_FragCoord.xy * blurSizePixelsInverse * ssaoTextureSizeInverse).r;
}
float evaluateAmbientOcclusion() {
return 1.0 - evaluateAmbientOcclusionInverse();
}`)):a.code.add((0,interfaces/* glsl */.H)`float evaluateAmbientOcclusionInverse() { return 1.0; }
float evaluateAmbientOcclusion() { return 0.0; }`)}


/***/ }),

/***/ 75988:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a8: () => (/* binding */ u),
/* harmony export */   eU: () => (/* binding */ h),
/* harmony export */   kA: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52636);
/* harmony import */ var _EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(56349);
/* harmony import */ var _MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(696);
/* harmony import */ var _PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(17666);
/* harmony import */ var _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39486);
/* harmony import */ var _PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(66579);
/* harmony import */ var _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(72563);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(99152);
/* harmony import */ var _lighting_SceneLighting_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(9409);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u(i){i.constants.add("ambientBoostFactor","float",_lighting_SceneLighting_js__WEBPACK_IMPORTED_MODULE_10__/* .ambientBoost */ .u)}function h(i){i.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .FloatPassUniform */ .m("lightingGlobalFactor",((i,n)=>n.lighting.globalFactor)))}function p(g,p){const v=g.fragment;switch(g.include(_EvaluateAmbientOcclusion_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .EvaluateAmbientOcclusion */ .n,p),p.pbrMode!==_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Disabled&&g.include(_PhysicallyBasedRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .PhysicallyBasedRendering */ .c,p),g.include(_EvaluateAmbientLighting_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .EvaluateAmbientLighting */ .W,p),g.include(_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .PiUtils */ .p),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
    const float GAMMA_SRGB = 2.1;
    const float INV_GAMMA_SRGB = 0.4761904;
    ${p.pbrMode===_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Disabled?"":"const vec3 GROUND_REFLECTANCE = vec3(0.2);"}
  `),u(v),h(v),(0,_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .addMainLightDirection */ .Gc)(v),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
    float additionalDirectedAmbientLight(vec3 vPosWorld) {
      float vndl = dot(${p.spherical?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`normalize(vPosWorld)`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3(0.0, 0.0, 1.0)`}, mainLightDirection);
      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));
    }
  `),(0,_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .addMainLightIntensity */ .O4)(v),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {
float additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);
return (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * mainLightIntensity;
}`),p.pbrMode){case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Disabled:case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.WaterOnIntegratedMesh:case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Water:g.include(_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .MainLighting */ .qU),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)
{
vec3 mainLighting = evaluateMainLighting(normalWorld, shadow);
vec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);
vec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
vec3 totalLight = mainLighting + ambientLighting + additionalLight;
totalLight = min(totalLight, vec3(PI));
vec3 outColor = vec3((albedoLinear / PI) * totalLight);
return pow(outColor, vec3(INV_GAMMA_SRGB));
}`);break;case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Normal:case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Schematic:v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`const float fillLightIntensity = 0.25;
const float horizonLightDiffusion = 0.4;
const float additionalAmbientIrradianceFactor = 0.02;
vec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)
{
vec3 viewDirection = -viewDir;
vec3 h = normalize(viewDirection + mainLightDirection);
PBRShadingInfo inputs;
inputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);
inputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);
inputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);
inputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);
inputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);
vec3 reflectedView = normalize(reflect(viewDirection, normal));
inputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);
inputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));
inputs.ssao = ssao;
inputs.metalness = mrr[0];
inputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;
inputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));
inputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),p.useFillLights?v.uniforms.add(new _shaderModules_BooleanPassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .BooleanPassUniform */ .e("hasFillLights",((i,n)=>n.enableFillLights))):v.constants.add("hasFillLights","bool",!1),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);
ambientDir = ambientDir != vec3(0.0) ? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));
inputs.NdotAmbDir = hasFillLights ? abs(dot(normal, ambientDir)) : 1.0;
vec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * mainLightIntensity;
vec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * mainLightIntensity * fillLightIntensity;
vec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;
inputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;
inputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),v.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .FloatPassUniform */ .m("lightingSpecularStrength",((i,n)=>n.lighting.mainLight.specularStrength)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .FloatPassUniform */ .m("lightingEnvironmentStrength",((i,n)=>n.lighting.mainLight.environmentStrength))),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;
vec3 horizonRingH = normalize(viewDirection + horizonRingDir);
inputs.NdotH_Horizon = dot(normal, horizonRingH);
vec3 mainLightRadianceComponent = lightingSpecularStrength * normalDistribution(inputs.NdotH, inputs.roughness) * mainLightIntensity * (1.0 - shadow);
vec3 horizonLightRadianceComponent = lightingEnvironmentStrength * normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * mainLightIntensity * fillLightIntensity;
vec3 ambientLightRadianceComponent = lightingEnvironmentStrength * calculateAmbientRadiance(ssao) + additionalLight;
float normalDirectionModifier = mix(1., min(mix(0.1, 2.0, (inputs.NdotNG + 1.) * 0.5), 1.0), clamp(inputs.roughness * 5.0, 0.0 , 1.0));
inputs.skyRadianceToSurface = (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;
inputs.groundRadianceToSurface = 0.5 * GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) * normalDirectionModifier + mainLightRadianceComponent;
inputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);
        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;
        vec3 emissionComponent = _emission == vec3(0.0) ? _emission : pow(_emission, vec3(GAMMA_SRGB));
        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;
        ${p.pbrMode!==_PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Schematic||p.hasColorTexture?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`}
        return outColor;
      }
    `);break;case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.Terrain:case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.TerrainWithWater:g.include(_MainLighting_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .MainLighting */ .qU),v.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`const float roughnessTerrain = 0.5;
const float specularityTerrain = 0.5;
const vec3 fresnelReflectionTerrain = vec3(0.04);
vec3 evaluateTerrainLighting(vec3 n, vec3 c, float shadow, float ssao, vec3 al, vec3 vd, vec3 nup) {
vec3 viewDirection = -vd;
vec3 h = normalize(viewDirection + mainLightDirection);
float NdotL = clamp(dot(n, mainLightDirection), 0.001, 1.0);
float NdotV = clamp(abs(dot(n, viewDirection)), 0.001, 1.0);
float NdotH = clamp(dot(n, h), 0.0, 1.0);
float NdotNG = clamp(dot(n, nup), -1.0, 1.0);
vec3 albedoLinear = pow(c, vec3(GAMMA_SRGB));
float lightness = 0.3 * albedoLinear[0] + 0.5 * albedoLinear[1] + 0.2 * albedoLinear[2];
vec3 f0 = (0.85 * lightness + 0.15) * fresnelReflectionTerrain;
vec3 f90 =  vec3(clamp(dot(f0, vec3(50.0 * 0.33)), 0.0, 1.0));
vec3 mainLightIrradianceComponent = (1. - shadow) * NdotL * mainLightIntensity;
vec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(n, ssao) + al;
vec3 ambientSky = ambientLightIrradianceComponent + mainLightIrradianceComponent;
vec3 indirectDiffuse = ((1.0 - NdotNG) * mainLightIrradianceComponent + (1.0 + NdotNG ) * ambientSky) * 0.5;
vec3 outDiffColor = albedoLinear * (1.0 - f0) * indirectDiffuse / PI;
vec3 mainLightRadianceComponent = normalDistribution(NdotH, roughnessTerrain) * mainLightIntensity;
vec2 dfg = prefilteredDFGAnalytical(roughnessTerrain, NdotV);
vec3 specularColor = f0 * dfg.x + f90 * dfg.y;
vec3 specularComponent = specularityTerrain * specularColor * mainLightRadianceComponent;
vec3 outColorLinear = outDiffColor + specularComponent;
vec3 outColor = pow(outColorLinear, vec3(INV_GAMMA_SRGB));
return outColor;
}`);break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(p.pbrMode);case _PhysicallyBasedRenderingParameters_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .PBRMode */ .A9.COUNT:}}


/***/ }),

/***/ 79870:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ n),
/* harmony export */   z: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){o.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`float normals2FoamIntensity(vec3 n, float waveStrength){
float normalizationFactor =  max(0.015, waveStrength);
return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);
}`)}function n(o){o.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){
return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;
}`)}


/***/ }),

/***/ 6821:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  q: () => (/* binding */ d),
  h: () => (/* binding */ S)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js
var RgbaFloatEncoding_glsl = __webpack_require__(70224);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js + 1 modules
var View_glsl = __webpack_require__(63592);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js
var Float4PassUniform = __webpack_require__(1411);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/floatRGBA.js
var floatRGBA = __webpack_require__(51859);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/stippleTextureRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u(t,u){return new e((e=>{const{encodedData:u,textureSize:c}=a(e),f=new i;return f.internalFormat=r.RGBA,f.width=c,f.height=1,f.wrapMode=o.REPEAT,new n(t,f,u)}),(t=>`${t.pattern.join(",")}-r${t.pixelRatio}`),u)}function a(e){const r=c(e),o=1/e.pixelRatio,n=f(e),i=s(e),u=(Math.floor(.5*(i-1))+.5)*o,a=[];let l=1;for(const t of r){for(let e=0;e<t;e++){const r=l*(Math.min(e,t-1-e)+.5)*o/u*.5+.5;a.push(r)}l=-l}const p=Math.round(r[0]/2),m=[...a.slice(p),...a.slice(0,p)],d=new Uint8Array(4*n);let x=0;for(const c of m)t(c,d,x),x+=4;return{encodedData:d,textureSize:n}}function c(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(null==t)return 1;const e=c(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function s(t){return c(t).reduce(((t,e)=>Math.max(t,e)))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4.js
var vec4 = __webpack_require__(25102);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ensureColor4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function ensureColor4_o(c){return null==c?vec4f64.Z:4===c.length?c:(0,vec4.s)(ensureColor4_r,c[0],c[1],c[2],1)}const ensureColor4_r=(0,vec4f64.c)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(e,t){e.constants.add("stippleAlphaColorDiscard","float",.001),e.constants.add("stippleAlphaHighlightDiscard","float",.5),t.stippleEnabled?LineStipple_glsl_c(e,t):LineStipple_glsl_f(e)}function LineStipple_glsl_c(p,n){const d=!(n.draped&&n.stipplePreferContinuous),{vertex:c,fragment:f}=p;f.include(RgbaFloatEncoding_glsl/* RgbaFloatEncoding */.W),n.draped||((0,View_glsl/* addCameraPosition */.yu)(c,n),c.uniforms.add(new FloatPassUniform/* FloatPassUniform */.m("worldToScreenPerDistanceRatio",((e,t)=>1/t.camera.perScreenPixelRatio))),c.code.add((0,interfaces/* glsl */.H)`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),p.varyings.add("vStippleDistance","float"),p.varyings.add("vStippleDistanceLimits","vec2"),p.varyings.add("vStipplePatternStretch","float"),c.code.add((0,interfaces/* glsl */.H)`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${LineStipple_glsl_u};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),c.code.add((0,interfaces/* glsl */.H)`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),c.code.add((0,interfaces/* glsl */.H)`
    if (segmentLengthPseudoScreen >= ${d?"patternLength":"1e4"}) {
  `),(0,View_glsl/* addPixelRatio */.Nz)(c),c.code.add((0,interfaces/* glsl */.H)`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`),f.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("stipplePatternTexture",(e=>e.stippleTexture)),new FloatPassUniform/* FloatPassUniform */.m("stipplePatternSDFNormalizer",(e=>m(e.stipplePattern))),new FloatPassUniform/* FloatPassUniform */.m("stipplePatternPixelSizeInv",(e=>1/S(e)))),f.code.add((0,interfaces/* glsl */.H)`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgba2float(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`),n.stippleOffColorEnabled?(f.uniforms.add(new Float4PassUniform/* Float4PassUniform */.E("stippleOffColor",(e=>ensureColor4_o(e.stippleOffColor)))),f.code.add((0,interfaces/* glsl */.H)`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):f.code.add((0,interfaces/* glsl */.H)`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}function LineStipple_glsl_f(e){e.fragment.code.add((0,interfaces/* glsl */.H)`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)}function m(e){return e?(Math.floor(.5*(s(e)-1))+.5)/e.pixelRatio:1}function S(e){const t=e.stipplePattern;return t?f(e.stipplePattern)/t.pixelRatio:1}const LineStipple_glsl_u=interfaces/* glsl */.H.float(.4);


/***/ }),

/***/ 696:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gc: () => (/* binding */ t),
/* harmony export */   O4: () => (/* binding */ a),
/* harmony export */   qU: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(n){n.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("mainLightDirection",((i,n)=>n.lighting.mainLight.direction)))}function a(n){n.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("mainLightIntensity",((i,n)=>n.lighting.mainLight.intensity)))}function o(i){t(i.fragment),a(i.fragment),i.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {
float dotVal = clamp(dot(normal_global, mainLightDirection), 0.0, 1.0);
return mainLightIntensity * ((1.0 - shadowing) * dotVal);
}`)}


/***/ }),

/***/ 2119:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50980);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/* harmony import */ var _shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58376);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(n,i){const{vertex:d,constants:s}=n;s.add("markerSizePerLineWidth","float",_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerSizePerLineWidth */ .PV),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addPixelRatio */ .Nz)(d),null==d.uniforms.get("markerScale")&&d.constants.add("markerScale","float",1),d.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),i.space===_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .LineMarkerSpace */ .lM.World&&(d.constants.add("maxSegmentLengthFraction","float",.45),d.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("perRenderPixelRatio",((e,r)=>r.camera.perRenderPixelRatio))),d.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}


/***/ }),

/***/ 46823:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ a),
/* harmony export */   U: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67726);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(a){a.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ReadLinearDepth */ .D),a.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Texture2DPassUniform */ .N("geometryDepthTexture",((e,r)=>r.multipassGeometry.linearDepth?.colorTexture)),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar))),a.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`bool geometryDepthTest(vec2 pos, float elementDepth) {
float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, nearFar);
return (elementDepth < (geometryDepth - 1.0));
}`)}class s{}


/***/ }),

/***/ 80600:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ o),
/* harmony export */   h: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(67726);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,n){if(!n.multipassEnabled)return;o.fragment.include(_output_ReadLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ReadLinearDepth */ .D),o.fragment.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Texture2DPassUniform */ .N("terrainDepthTexture",((e,r)=>r.multipassTerrain.linearDepth?.colorTexture))),o.fragment.uniforms.add(new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float2PassUniform */ .G("nearFar",((e,r)=>r.camera.nearFar)));const s=n.occlusionPass;o.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`
   ${s?"bool":"void"} terrainDepthTest(float fragmentDepth) {
      vec4 data = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0);
      float linearDepth = linearDepthFromRGBA(data, nearFar);
      ${s?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`return fragmentDepth < linearDepth && data != vec4(0.0, 0.0, 0.0, 1.0);`:(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`
          if(fragmentDepth ${n.cullAboveGround?">":"<="} linearDepth){
            discard;
          }`}
    }`)}class n{constructor(){this.cullAboveGround=!1}}


/***/ }),

/***/ 22455:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(r,c){c.spherical?r.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return normalize(pos + origin);
}`):r.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 getLocalUp(in vec3 pos, in vec3 origin) {
return vec3(0.0, 0.0, 1.0);
}`),c.spherical?r.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`mat3 getTBNMatrix(in vec3 n) {
vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`):r.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`mat3 getTBNMatrix(in vec3 n) {
vec3 t = vec3(1.0, 0.0, 0.0);
vec3 b = normalize(cross(n, t));
return mat3(t, b, n);
}`)}


/***/ }),

/***/ 46971:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ i),
/* harmony export */   r: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,o){const n=e.fragment;switch(n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`struct ShadingNormalParameters {
vec3 normalView;
vec3 viewDirection;
} shadingParams;`),o.doubleSidedMode){case i.None:n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 shadingNormal(ShadingNormalParameters params) {
return normalize(params.normalView);
}`);break;case i.View:n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 shadingNormal(ShadingNormalParameters params) {
return dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);
}`);break;case i.WindingOrder:n.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 shadingNormal(ShadingNormalParameters params) {
return gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);
}`);break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(o.doubleSidedMode);case i.COUNT:}}var i;!function(a){a[a.None=0]="None",a[a.View=1]="View",a[a.WindingOrder=2]="WindingOrder",a[a.COUNT=3]="COUNT"}(i||(i={}));


/***/ }),

/***/ 17666:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  c: () => (/* binding */ n),
  f: () => (/* binding */ r)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t){const a=t.fragment.code;a.add((0,interfaces/* glsl */.H)`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)
{
return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;
}`),a.add((0,interfaces/* glsl */.H)`float integratedRadiance(float cosTheta2, float roughness)
{
return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);
}`),a.add((0,interfaces/* glsl */.H)`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)
{
float cosTheta2 = 1.0 - RdotNG * RdotNG;
float intRadTheta = integratedRadiance(cosTheta2, roughness);
float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;
float sky = 2.0 - ground;
return (ground * ambientGround + sky * ambientSky) * 0.5;
}`)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js
var PiUtils_glsl = __webpack_require__(66579);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(n,r){const l=n.fragment.code;n.include(PiUtils_glsl/* PiUtils */.p),r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Normal&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Schematic&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Terrain&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.TerrainWithWater||(l.add((0,interfaces/* glsl */.H)`float normalDistribution(float NdotH, float roughness)
{
float a = NdotH * roughness;
float b = roughness / (1.0 - NdotH * NdotH + a * a);
return b * b * INV_PI;
}`),l.add((0,interfaces/* glsl */.H)`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);
const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);
const vec2 c2 = vec2(-1.04, 1.04);
vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {
vec4 r = roughness * c0 + c1;
float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;
return c2 * a004 + r.zw;
}`)),r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Normal&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Schematic||(n.include(t),l.add((0,interfaces/* glsl */.H)`struct PBRShadingInfo
{
float NdotL;
float NdotV;
float NdotH;
float VdotH;
float LdotH;
float NdotNG;
float RdotNG;
float NdotAmbDir;
float NdotH_Horizon;
vec3 skyRadianceToSurface;
vec3 groundRadianceToSurface;
vec3 skyIrradianceToSurface;
vec3 groundIrradianceToSurface;
float averageAmbientRadiance;
float ssao;
vec3 albedoLinear;
vec3 f0;
vec3 f90;
vec3 diffuseColor;
float metalness;
float roughness;
};`),l.add((0,interfaces/* glsl */.H)`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {
vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);
vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);
vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;
vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);
vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;
vec3 specularComponent = specularColor * indirectSpecular;
return (diffuseComponent + specularComponent);
}`),l.add((0,interfaces/* glsl */.H)`float gamutMapChanel(float x, vec2 p){
return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );
}`),l.add((0,interfaces/* glsl */.H)`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){
vec3 outColor;
vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));
outColor.x = gamutMapChanel(inColor.x, p) ;
outColor.y = gamutMapChanel(inColor.y, p) ;
outColor.z = gamutMapChanel(inColor.z, p) ;
return outColor;
}`))}function r(e,o){const n=e.fragment.code;e.include(PiUtils_glsl/* PiUtils */.p),n.add((0,interfaces/* glsl */.H)`
  struct PBRShadingWater
  {
      float NdotL;   // cos angle between normal and light direction
      float NdotV;   // cos angle between normal and view direction
      float NdotH;   // cos angle between normal and half vector
      float VdotH;   // cos angle between view direction and half vector
      float LdotH;   // cos angle between light direction and half vector
      float VdotN;   // cos angle between view direction and normal vector
  };

  float dtrExponent = ${o.useCustomDTRExponentForWater?"2.2":"2.0"};
  `),n.add((0,interfaces/* glsl */.H)`vec3 fresnelReflection(float angle, vec3 f0, float f90) {
return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);
}`),n.add((0,interfaces/* glsl */.H)`float normalDistributionWater(float NdotH, float roughness)
{
float r2 = roughness * roughness;
float NdotH2 = NdotH * NdotH;
float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;
return r2 / denom;
}`),n.add((0,interfaces/* glsl */.H)`float geometricOcclusionKelemen(float LoH)
{
return 0.25 / (LoH * LoH);
}`),n.add((0,interfaces/* glsl */.H)`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)
{
vec3  F = fresnelReflection(props.VdotH, F0, F0Max);
float dSun = normalDistributionWater(props.NdotH, roughness);
float V = geometricOcclusionKelemen(props.LdotH);
float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);
float strengthSunHaze  = 1.2;
float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;
return ((dSun + dSunHaze) * V) * F;
}
vec3 tonemapACES(const vec3 x) {
return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);
}`)}


/***/ }),

/***/ 39486:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A9: () => (/* binding */ c),
/* harmony export */   _Z: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony export PBRBindParameters */
/* harmony import */ var _attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(81783);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52293);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(57198);
/* harmony import */ var _lib_GLTextureMaterial_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89140);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var c;!function(e){e[e.Disabled=0]="Disabled",e[e.Normal=1]="Normal",e[e.Schematic=2]="Schematic",e[e.Water=3]="Water",e[e.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh",e[e.Terrain=5]="Terrain",e[e.TerrainWithWater=6]="TerrainWithWater",e[e.COUNT=7]="COUNT"}(c||(c={}));class u extends (/* unused pure expression or super */ null && (n)){}function l(n,u){const l=n.fragment,m=u.hasMetallicRoughnessTexture||u.hasEmissionTexture||u.hasOcclusionTexture;if(u.pbrMode===c.Normal&&m&&n.include(_attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexTextureCoordinates */ .r,u),u.pbrMode!==c.Schematic)if(u.pbrMode!==c.Disabled){if(u.pbrMode===c.Normal){l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 mrr;
vec3 emission;
float occlusion;`);const e=u.pbrTextureBindType;u.hasMetallicRoughnessTexture&&(l.uniforms.add(e===_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("texMetallicRoughness",(e=>e.textureMetallicRoughness)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("texMetallicRoughness",(e=>e.textureMetallicRoughness))),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyMetallnessAndRoughness(vec2 uv) {
vec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;
mrr[0] *= metallicRoughness.b;
mrr[1] *= metallicRoughness.g;
}`)),u.hasEmissionTexture&&(l.uniforms.add(e===_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("texEmission",(e=>e.textureEmissive)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("texEmission",(e=>e.textureEmissive))),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyEmission(vec2 uv) {
emission *= textureLookup(texEmission, uv).rgb;
}`)),u.hasOcclusionTexture?(l.uniforms.add(e===_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("texOcclusion",(e=>e.textureOcclusion)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("texOcclusion",(e=>e.textureOcclusion))),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyOcclusion(vec2 uv) {
occlusion *= textureLookup(texOcclusion, uv).r;
}
float getBakedOcclusion() {
return occlusion;
}`)):l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float getBakedOcclusion() { return 1.0; }`),e===_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_6__/* .BindType */ .c.Pass?l.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("emissionFactor",(e=>e.emissiveFactor)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("mrrFactors",(e=>e.mrrFactors))):l.uniforms.add(new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3DrawUniform */ .W("emissionFactor",(e=>e.emissiveFactor)),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3DrawUniform */ .W("mrrFactors",(e=>e.mrrFactors))),l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
    void applyPBRFactors() {
      mrr = mrrFactors;
      emission = emissionFactor;
      occlusion = 1.0;

      ${u.hasMetallicRoughnessTexture?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`applyMetallnessAndRoughness(${u.hasMetallicRoughnessTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`metallicRoughnessUV`:"vuv0"});`:""}

      ${u.hasEmissionTexture?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`applyEmission(${u.hasEmissiveTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`emissiveUV`:"vuv0"});`:""}

      ${u.hasOcclusionTexture?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`applyOcclusion(${u.hasOcclusionTextureTransform?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`occlusionUV`:"vuv0"});`:""}
    }
  `)}}else l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float getBakedOcclusion() { return 1.0; }`);else l.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 mrr = vec3(0.0, 0.6, 0.2);
vec3 emission = vec3(0.0);
float occlusion = 1.0;
void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`)}


/***/ }),

/***/ 66579:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t){t.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`const float PI = 3.141592653589793;`),t.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)}


/***/ }),

/***/ 64062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Bz: () => (/* binding */ m),
  G: () => (/* binding */ x)
});

// UNUSED EXPORTS: ReadShadowMapDrawParameters, ReadShadowMapParameters, ReadShadowMapPassParameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloat16Encoding.glsl.js
var RgbaFloat16Encoding_glsl = __webpack_require__(4969);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js
var Float4PassUniform = __webpack_require__(1411);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js
var IntegerPassUniform = __webpack_require__(3445);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js
var Uniform = __webpack_require__(99198);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js
var BindType = __webpack_require__(57198);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sDrawUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends Uniform/* Uniform */.n{constructor(r,o,s){super(r,"mat4",BindType/* BindType */.c.Draw,((e,s,t,i)=>e.setUniformMatrix4fv(r,o(s,t,i))),s)}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Matrix4sPassUniform_e extends Uniform/* Uniform */.n{constructor(r,e,o){super(r,"mat4",BindType/* BindType */.c.Pass,((s,o,t)=>s.setUniformMatrix4fv(r,e(o,t))),o)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n extends interfaces/* NoParameters */.Y{constructor(){super(...arguments),this.origin=(0,vec3f64.c)()}}class v extends (/* unused pure expression or super */ null && (n)){}class l extends interfaces/* NoParameters */.Y{constructor(){super(...arguments),this.modelTransformation=mat4f64.I}}class h extends l{constructor(){super(...arguments),this.origin=(0,vec3f64.c)()}}function x(e,s){s.receiveShadows&&(e.fragment.uniforms.add(new Matrix4sPassUniform_e("shadowMapMatrix",((e,s)=>s.shadowMap.getShadowMapMatrices(e.origin)),4)),u(e))}function m(e,s){s.receiveShadows&&(e.fragment.uniforms.add(new o("shadowMapMatrix",((e,s)=>s.shadowMap.getShadowMapMatrices(e.origin)),4)),u(e))}function u(e){const s=e.fragment;s.include(RgbaFloat16Encoding_glsl/* Rgba4FloatEncoding */.U),s.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("shadowMapTex",((e,s)=>s.shadowMap.depthTexture)),new IntegerPassUniform/* IntegerPassUniform */.c("numCascades",((e,s)=>s.shadowMap.numCascades)),new Float4PassUniform/* Float4PassUniform */.E("cascadeDistances",((e,s)=>s.shadowMap.cascadeDistances))),s.code.add((0,interfaces/* glsl */.H)`int chooseCascade(float depth, out mat4 mat) {
vec4 distance = cascadeDistances;
int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;
mat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];
return i;
}
vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {
vec4 lv = mat * vec4(_vpos, 1.0);
lv.xy /= lv.w;
return 0.5 * lv.xyz + vec3(0.5);
}
vec2 cascadeCoordinates(int i, ivec2 textureSize, vec3 lvpos) {
float xScale = float(textureSize.y) / float(textureSize.x);
return vec2((float(i) + lvpos.x) * xScale, lvpos.y);
}
float readShadowMapDepth(ivec2 uv, sampler2D _depthTex) {
return rgba4ToFloat(texelFetch(_depthTex, uv, 0));
}
float posIsInShadow(ivec2 uv, vec3 lvpos, sampler2D _depthTex) {
return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;
}
float filterShadow(vec2 uv, vec3 lvpos, ivec2 texSize, sampler2D _depthTex) {
vec2 st = fract(uv * vec2(texSize) + vec2(0.5));
ivec2 base = ivec2(uv * vec2(texSize) - vec2(0.5));
float s00 = posIsInShadow(ivec2(base.x, base.y), lvpos, _depthTex);
float s10 = posIsInShadow(ivec2(base.x + 1, base.y), lvpos, _depthTex);
float s11 = posIsInShadow(ivec2(base.x + 1, base.y + 1), lvpos, _depthTex);
float s01 = posIsInShadow(ivec2(base.x, base.y + 1), lvpos, _depthTex);
return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);
}
float readShadowMap(const in vec3 _vpos, float _linearDepth) {
mat4 mat;
int i = chooseCascade(_linearDepth, mat);
if (i >= numCascades) { return 0.0; }
vec3 lvpos = lightSpacePosition(_vpos, mat);
if (lvpos.z >= 1.0) { return 0.0; }
if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }
ivec2 size = textureSize(shadowMapTex, 0);
vec2 uv = cascadeCoordinates(i, size, lvpos);
return filterShadow(uv, lvpos, size, shadowMapTex);
}`)}


/***/ }),

/***/ 25541:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MU: () => (/* binding */ i),
/* harmony export */   O1: () => (/* binding */ n),
/* harmony export */   QM: () => (/* binding */ t),
/* harmony export */   Sx: () => (/* binding */ s),
/* harmony export */   q2: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21360);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6561);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(a){a.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Matrix3PassUniform */ .k("colorTextureTransformMatrix",(e=>null!=e.colorTextureTransformMatrix?e.colorTextureTransformMatrix:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()))),a.varyings.add("colorUV","vec2"),a.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardColorUV(){
colorUV = (colorTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)}function s(a){a.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Matrix3PassUniform */ .k("normalTextureTransformMatrix",(e=>null!=e.normalTextureTransformMatrix?e.normalTextureTransformMatrix:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()))),a.varyings.add("normalUV","vec2"),a.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardNormalUV(){
normalUV = (normalTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)}function i(a){a.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Matrix3PassUniform */ .k("emissiveTextureTransformMatrix",(e=>null!=e.emissiveTextureTransformMatrix?e.emissiveTextureTransformMatrix:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()))),a.varyings.add("emissiveUV","vec2"),a.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardEmissiveUV(){
emissiveUV = (emissiveTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)}function n(a){a.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Matrix3PassUniform */ .k("occlusionTextureTransformMatrix",(e=>null!=e.occlusionTextureTransformMatrix?e.occlusionTextureTransformMatrix:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()))),a.varyings.add("occlusionUV","vec2"),a.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardOcclusionUV(){
occlusionUV = (occlusionTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)}function t(a){a.vertex.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Matrix3PassUniform */ .k("metallicRoughnessTextureTransformMatrix",(e=>null!=e.metallicRoughnessTextureTransformMatrix?e.metallicRoughnessTextureTransformMatrix:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()))),a.varyings.add("metallicRoughnessUV","vec2"),a.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardMetallicRoughnessUV(){
metallicRoughnessUV = (metallicRoughnessTextureTransformMatrix * vec3(vuv0, 1.0)).xy;
}`)}


/***/ }),

/***/ 34328:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(54706);
/* harmony import */ var _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(45160);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6561);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/* harmony import */ var _materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17745);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(l,n){const{vertex:s,attributes:u}=l;n.hasVvInstancing&&(n.vvSize||n.vvColor)&&u.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.INSTANCEFEATUREATTRIBUTE,"vec4"),n.vvSize?(s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeMinSize",(e=>e.vvSize.minSize))),s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeMaxSize",(e=>e.vvSize.maxSize))),s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeOffset",(e=>e.vvSize.offset))),s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeFactor",(e=>e.vvSize.factor))),s.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Matrix3PassUniform */ .k("vvSymbolRotationMatrix",(e=>e.vvSymbolRotationMatrix))),s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSymbolAnchor",(e=>e.vvSymbolAnchor))),s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${n.hasVvInstancing?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),n.vvColor?(s.constants.add("vvColorNumber","int",_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_6__/* .vvColorNumber */ .p),s.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatsPassUniform */ .x("vvColorValues",(e=>e.vvColor.values),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_6__/* .vvColorNumber */ .p),new _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float4sPassUniform */ .F("vvColorColors",(e=>e.vvColor.colors),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_6__/* .vvColorNumber */ .p)),s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
      vec4 interpolateVVColor(float value) {
        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${n.hasVvInstancing?(0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }`:"vec4 vvColor() { return vec4(1.0); }"}
    `)):s.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec4 vvColor() { return vec4(1.0); }`)}


/***/ }),

/***/ 65554:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  E: () => (/* binding */ c)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js
var FoamRendering_glsl = __webpack_require__(79870);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){e.fragment.code.add((0,interfaces/* glsl */.H)`const float GAMMA = 2.2;
const float INV_GAMMA = 0.4545454545;
vec4 delinearizeGamma(vec4 color) {
return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);
}
vec3 linearizeGamma(vec3 color) {
return pow(color, vec3(GAMMA));
}`)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js + 1 modules
var PhysicallyBasedRendering_glsl = __webpack_require__(17666);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js
var ReadLinearDepth_glsl = __webpack_require__(67726);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js
var Float2PassUniform = __webpack_require__(54473);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js
var Matrix4PassUniform = __webpack_require__(20778);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(d,n){const c=d.fragment;c.include(ReadLinearDepth_glsl/* ReadLinearDepth */.D),c.uniforms.add(new Float2PassUniform/* Float2PassUniform */.G("nearFar",((e,o)=>o.camera.nearFar))),c.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("depthMap",((e,o)=>o.linearDepth?.colorTexture))),c.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("proj",((e,o)=>o.camera.projectionMatrix))),c.uniforms.add(new FloatPassUniform/* FloatPassUniform */.m("invResolutionHeight",((e,o)=>1/o.camera.height))),c.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("reprojectionMatrix",((e,o)=>o.ssr.reprojectionMatrix))),c.code.add((0,interfaces/* glsl */.H)`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy * 0.5 + 0.5;
  }

  const int maxSteps = ${n.highStepCount?"150":"75"};

  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)
  {
    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);
    projectedCoord.xy /= projectedCoord.w;
    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;
    return projectedCoord;
  }

  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)
  {
    vec3 viewPos = startPosition;
    vec3 viewPosEnd = startPosition;

    // Project the start position to the screen
    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);
    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space
    float k0 = 1.0/ projectedCoordStart.w;

    // advance the position in the direction of the reflection
    viewPos += dir;

    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);

    // Project the advanced position to the screen
    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);
    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space
    float k1 = 1.0/ projectedCoordEnd.w;

    // calculate the reflection direction in the screen space
    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);
    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);

    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);

    float projectedCoordDirLength = length(projectedCoordDir);
    float maxSt = float(maxSteps);

    // normalize the projection direction depending on maximum steps
    // this determines how blocky the reflection looks
    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);

    // Normalize the homogeneous camera space coordinates
    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);
    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);

    // initialize the variables for ray marching
    vec2 P = projectedCoordStart.xy;
    vec3 Q = Q0;
    float k = k0;
    float rayStartZ = -startPosition.z; // estimated ray start depth value
    float rayEndZ = -startPosition.z;   // estimated ray end depth value
    float prevEstimateZ = -startPosition.z;
    float rayDiffZ = 0.0;
    float dDepth;
    float depth;
    float rayDiffZOld = 0.0;

    // early outs
    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)
      return vec3(P, 0.0);

    for(int i = 0; i < maxSteps-1; i++)
    {
      depth = -linearDepthFromTexture(depthMap, P, nearFar); // get linear depth from the depth buffer

      // estimate depth of the marching ray
      rayStartZ = prevEstimateZ;
      dDepth = -rayStartZ - depth;
      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));
      rayDiffZ = rayEndZ- rayStartZ;
      prevEstimateZ = rayEndZ;

      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )
      {
        return vec3(P, 0.);
      }

      // If we detect a hit - return the intersection point, two conditions:
      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth
      //  - if difference between dDepth and rayDiffZOld is not too large
      //  - if difference between dDepth and 0.025/abs(k) is not too large
      //  - if the sampled depth is not behind far plane or in front of near plane

      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)
      {
        return vec3(P, depth);
      }

      // continue with ray marching
      P = clamp(P + dP, vec2(0.0), vec2(0.999));
      Q.z += dQ.z;
      k += dk;
      rayDiffZOld = rayDiffZ;
    }
    return vec3(P, 0.0);
  }
  `)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Ellipsoid.js
var Ellipsoid = __webpack_require__(99817);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/CloudsData.js
var CloudsData = __webpack_require__(66386);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js
var CloudsParameters = __webpack_require__(58718);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/weather.js + 5 modules
var weather = __webpack_require__(84323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js
var MainLighting_glsl = __webpack_require__(696);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js
var BooleanPassUniform = __webpack_require__(72563);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js
var Float3PassUniform = __webpack_require__(60840);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js
var Uniform = __webpack_require__(99198);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js
var BindType = __webpack_require__(57198);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/TextureCubePassUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends Uniform/* Uniform */.n{constructor(e,s){super(e,"samplerCube",BindType/* BindType */.c.Pass,((r,o,t)=>r.bindTexture(e,s(o,t))))}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CloudsParallaxShading.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function v(v){const R=v.fragment;R.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("rotationMatrixClouds",((o,a)=>a.cloudsFade.parallax.transform)),new Matrix4PassUniform/* Matrix4PassUniform */.X("rotationMatrixCloudsCrossFade",((o,a)=>a.cloudsFade.parallaxNew.transform)),new Float3PassUniform/* Float3PassUniform */.t("anchorPosition",((o,a)=>a.cloudsFade.parallax.anchorPointClouds)),new Float3PassUniform/* Float3PassUniform */.t("anchorPositionCrossFade",((o,a)=>a.cloudsFade.parallaxNew.anchorPointClouds)),new FloatPassUniform/* FloatPassUniform */.m("cloudsHeight",(()=>weather/* cloudsHeight */.k9)),new FloatPassUniform/* FloatPassUniform */.m("radiusCurvatureCorrectionFactor",((o,a)=>a.cloudsFade.parallax.radiusCurvatureCorrectionFactor)),new FloatPassUniform/* FloatPassUniform */.m("totalFadeInOut",((o,a)=>1-a.cloudsFade.opacity)),new FloatPassUniform/* FloatPassUniform */.m("crossFadeAnchorFactor",((a,t)=>(0,mathUtils/* clamp */.qE)(t.cloudsFade.fadeFactor,0,1))),new s("cubeMap",((o,a)=>a.cloudsFade.data?.cubeMap?.colorTexture??null)),new BooleanPassUniform/* BooleanPassUniform */.e("crossFade",((o,a)=>a.cloudsFade.fadeMode===CloudsParameters/* FadeMode */.OQ.CROSS_FADE)),new BooleanPassUniform/* BooleanPassUniform */.e("readChannelsRG",((o,a)=>a.cloudsFade.readChannels===CloudsData/* CloudsTextureChannels */.c.RG)),new BooleanPassUniform/* BooleanPassUniform */.e("fadeTextureChannels",((o,a)=>a.cloudsFade.renderingStage===CloudsData/* CloudsRenderingStages */.c2.FADING))),R.constants.add("planetRadius","float",Ellipsoid/* earth */.$O.radius),R.code.add((0,interfaces/* glsl */.H)`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos)
{
float radiusClouds = planetRadius + cloudsHeight;
float B = 2.0 * dot(cameraPosition, dir);
float C = dot(cameraPosition, cameraPosition) - radiusClouds * radiusClouds;
float det = B * B - 4.0 * C;
float pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));
vec3 intersectionPont = cameraPosition + dir * pointIntDist;
intersectionPont =  intersectionPont - spherePos;
return intersectionPont;
}`),R.code.add((0,interfaces/* glsl */.H)`vec3 correctForPlanetCurvature(vec3 dir)
{
dir.z = dir.z*(1.-radiusCurvatureCorrectionFactor) + radiusCurvatureCorrectionFactor;
return dir;
}`),R.code.add((0,interfaces/* glsl */.H)`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec)
{
return (rotMat * vec4(inVec, 0.0)).xyz;
}`),(0,MainLighting_glsl/* addMainLightDirection */.Gc)(R),(0,MainLighting_glsl/* addMainLightIntensity */.O4)(R),R.code.add((0,interfaces/* glsl */.H)`const float SUNSET_TRANSITION_FACTOR = 0.3;
const vec3 RIM_COLOR = vec3(0.28, 0.175, 0.035);
const float RIM_SCATTERING_FACTOR = 140.0;
const float BACKLIGHT_FACTOR = 0.2;
const float BACKLIGHT_SCATTERING_FACTOR = 10.0;
const float BACKLIGHT_TRANSITION_FACTOR = 0.3;
vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds)
{
float upDotLight = dot(normalize(cameraPosition), normalize(mainLightDirection));
float dirDotLight = max(dot(normalize(-worldSpaceRay), normalize(mainLightDirection)), 0.0);
float sunsetTransition = clamp(pow(max(upDotLight, 0.0), SUNSET_TRANSITION_FACTOR), 0.0, 1.0);
vec3 ambientLight = calculateAmbientIrradiance(normalize(cameraPosition),  0.0);
vec3 mainLight = evaluateMainLighting(normalize(cameraPosition),  0.0);
vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));
vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));
float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);
float rimLightIntensity = 0.5 + 0.5 *pow(max(upDotLight, 0.0), 0.35);
vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, RIM_SCATTERING_FACTOR)) * scatteringMod;
float additionalLight = BACKLIGHT_FACTOR * pow(dirDotLight, BACKLIGHT_SCATTERING_FACTOR) * (1. - pow(sunsetTransition, BACKLIGHT_TRANSITION_FACTOR)) ;
return vec3(baseCloudColor * (1. + additionalLight) + directSunScattering);
}`),R.code.add((0,interfaces/* glsl */.H)`vec4 getCloudData(vec3 rayDir, bool readOtherChannel)
{
vec4 cloudData = texture(cubeMap, rayDir);
float mu = dot(rayDir, vec3(0, 0, 1));
bool readChannels = readChannelsRG ^^ readOtherChannel;
if (readChannels) {
cloudData = vec4(vec3(cloudData.r), cloudData.g);
} else {
cloudData = vec4(vec3(cloudData.b), cloudData.a);
}
if (length(cloudData) == 0.0) {
return vec4(cloudData.rgb, 1.0);
}
return cloudData;
}`),R.code.add((0,interfaces/* glsl */.H)`vec4 renderCloudsNoFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
float totalTransmittance = clamp(cloudData.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudData.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), totalTransmittance);
}`),R.code.add((0,interfaces/* glsl */.H)`vec4 renderCloudsCrossFade(vec3 worldRay, vec3 cameraPosition)
{
vec3 intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPosition);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = getCloudData(worldRayRotatedCorrected, false);
vec4 cloudColor = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
intersectionPoint = intersectWithCloudLayer(normalize(worldRay), cameraPosition, anchorPositionCrossFade);
worldRayRotated = rotateDirectionToAnchorPoint(rotationMatrixCloudsCrossFade, normalize(intersectionPoint));
worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
cloudData = getCloudData(worldRayRotatedCorrected, fadeTextureChannels);
vec4 cloudColorCrossFade = vec4(calculateCloudColor(cameraPosition, normalize(-worldRay), cloudData), cloudData.a);
cloudColor = mix(cloudColor, cloudColorCrossFade, crossFadeAnchorFactor);
float totalTransmittance = clamp(cloudColor.a * (1.0 - totalFadeInOut) + totalFadeInOut, 0.0 , 1.0);
if (length(cloudColor.rgb) == 0.0) {
totalTransmittance = 1.0;
}
return vec4(cloudColor.rgb, totalTransmittance);
}`),R.code.add((0,interfaces/* glsl */.H)`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition)
{
return crossFade ? renderCloudsCrossFade(worldRay, cameraPosition) : renderCloudsNoFade(worldRay, cameraPosition);
}`)}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c(c,s){c.include(PhysicallyBasedRendering_glsl/* PhysicallyBasedRenderingWater */.f,s),c.include(e),c.include(FoamRendering_glsl/* FoamColor */.v),s.hasCloudsReflections&&c.include(v,s),s.hasScreenSpaceReflections&&c.include(d,s);const f=c.fragment;f.constants.add("fresnelSky","vec3",[.02,1,15]).add("fresnelMaterial","vec2",[.02,.1]).add("roughness","float",.015).add("foamIntensityExternal","float",1.7).add("ssrIntensity","float",.65).add("ssrHeightFadeStart","float",3e5).add("ssrHeightFadeEnd","float",5e5).add("waterDiffusion","float",.92).add("waterSeaColorMod","float",.8).add("correctionViewingPowerFactor","float",.4).add("skyZenitColor","vec3",[.52,.68,.9]).add("skyColor","vec3",[.67,.79,.9]).add("cloudFresnelModifier","vec2",[1.2,.01]),f.code.add((0,interfaces/* glsl */.H)`PBRShadingWater shadingInfo;
vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {
float exponent = pow((1.0 - cosTheta), fresnelSky[2]);
return mix(zenit, horizon, exponent);
}`),f.uniforms.add(new FloatPassUniform/* FloatPassUniform */.m("lightingSpecularStrength",((e,o)=>o.lighting.mainLight.specularStrength)),new FloatPassUniform/* FloatPassUniform */.m("lightingEnvironmentStrength",((e,o)=>o.lighting.mainLight.environmentStrength))),f.code.add((0,interfaces/* glsl */.H)`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {
float reflectionHit = 0.0;
float reflectionHitDiffused = 0.0;
vec3 seaWaterColor = linearizeGamma(color);
vec3 h = normalize(l + v);
shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);
shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);
shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);
shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);
shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);
shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);
float upDotV = max(dot(localUp,v), 0.0);
vec3 skyHorizon = linearizeGamma(skyColor);
vec3 skyZenit = linearizeGamma(skyZenitColor);
vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );
float upDotL = max(dot(localUp,l),0.0);
float daytimeMod = 0.1 + upDotL * 0.9;
skyColor *= daytimeMod;
float shadowModifier = clamp(shadow, 0.8, 1.0);
vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);
vec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;
vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;
vec3 specular = vec3(0.0);
if(upDotV > 0.0 && upDotL > 0.0) {
vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);
vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;
specular = lightingSpecularStrength * shadingInfo.NdotL * incidentLight * specularSun;
}
vec3 foam = vec3(0.0);
if(upDotV > 0.0) {
foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);
}
float correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);
vec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);
vec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),s.hasCloudsReflections&&f.code.add((0,interfaces/* glsl */.H)`vec4 cloudsColor = renderClouds(reflectedWorld, position);
cloudsColor.a = 1.0 - cloudsColor.a;
cloudsColor = pow(cloudsColor, vec4(GAMMA));
cloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * clamp((1.0 - totalFadeInOut), 0.0, 1.0);`),s.hasScreenSpaceReflections?(f.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("view",((e,o)=>o.camera.viewMatrix)),new Texture2DPassUniform/* Texture2DPassUniform */.N("lastFrameColorTexture",((e,o)=>o.ssr.lastFrameColor?.colorTexture)),new FloatPassUniform/* FloatPassUniform */.m("fadeFactorSSR",((e,o)=>o.ssr.fadeFactor))),f.code.add((0,interfaces/* glsl */.H)`vec3 viewDir = normalize(viewPosition);
vec4 viewNormalVectorCoordinate = view *vec4(n, 0.0);
vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);
vec4 viewUp = view * vec4(localUp, 0.0);
vec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);
vec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));
vec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);
vec3 reflectedColor = vec3(0.0);
if (hitCoordinate.z > 0.0)
{
vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);
vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));
float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);
reflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;
reflectionHitDiffused = waterDiffusion * reflectionHit;
reflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *
reflectionHitDiffused * fresnelModifier.y * ssrIntensity;
}
float seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);
vec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +
reflSea * seaColorMod + specular + foam);`)):f.code.add((0,interfaces/* glsl */.H)`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),s.hasCloudsReflections?s.hasScreenSpaceReflections?f.code.add((0,interfaces/* glsl */.H)`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;
}`):f.code.add((0,interfaces/* glsl */.H)`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;
}`):f.code.add((0,interfaces/* glsl */.H)`return waterRenderedColor;
}`)}


/***/ }),

/***/ 41679:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony export WaterDistortionPassParameters */
/* harmony import */ var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78286);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52712);
/* harmony import */ var _FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(79870);
/* harmony import */ var _ReadShadowMap_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(64062);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99152);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(79856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(t){t.fragment.uniforms.add(new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("texWaveNormal",(e=>e.waveNormal)),new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("texWavePerturbation",(e=>e.wavePerturbation)),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Float4PassUniform */ .E("waveParams",(e=>(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(f,e.waveStrength,e.waveTextureRepeat,e.flowStrength,e.flowOffset))),new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Float2PassUniform */ .G("waveDirection",(t=>(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(c,t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)))),t.include(_FoamRendering_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .FoamIntensity */ .z),t.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);
vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rg - 1.0;
}
float sampleNoiseTexture(vec2 _uv) {
return texture(texWavePerturbation, _uv).b;
}
vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {
return 2.0 * texture(_tex, _uv).rgb - 1.0;
}
float computeProgress(vec2 uv, float time) {
return fract(time);
}
float computeWeight(vec2 uv, float time) {
float progress = computeProgress(uv, time);
return 1.0 - abs(1.0 - 2.0 * progress);
}
vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {
float flowStrength = waveParams[2];
float flowOffset = waveParams[3];
vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;
float progress = computeProgress(uv, time + phaseOffset);
float weight = computeWeight(uv, time + phaseOffset);
vec2 result = uv;
result -= flowVector * (progress + flowOffset);
result += phaseOffset;
result += (time - progress) * FLOW_JUMP;
return vec3(result, weight);
}
const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;
const float TIME_NOISE_STRENGTH = 7.77;
vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {
float waveStrength = waveParams[0];
vec2 waveMovement = time * -_waveDir;
float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;
vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);
vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);
vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;
vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;
vec3 mixNormal = normalize(normal_A + normal_B);
mixNormal.xy *= waveStrength;
mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));
return mixNormal;
}
vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {
float waveTextureRepeat = waveParams[1];
vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);
float foam  = normals2FoamIntensity(normal, waveParams[0]);
return vec4(normal, foam);
}`)}class n extends (/* unused pure expression or super */ null && (m)){}const f=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),c=(0,_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)();


/***/ }),

/***/ 33448:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ o),
/* harmony export */   y: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=.1,t=.001;


/***/ }),

/***/ 29724:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  S: () => (/* binding */ s)
});

// UNUSED EXPORTS: DiscardOrAdjustAlphaDraw

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js
var AlphaCutoff = __webpack_require__(33448);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js
var interfaces = __webpack_require__(99152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DiscardOrAdjustAlphaBlend.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(d){d.fragment.code.add((0,interfaces/* glsl */.H)`
    #define discardOrAdjustAlpha(color) { if (color.a < ${interfaces/* glsl */.H.float(AlphaCutoff/* symbolAlphaCutoff */.y)}) { discard; } }
  `)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js
var Uniform = __webpack_require__(99198);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js
var BindType = __webpack_require__(57198);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatDrawUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class FloatDrawUniform_e extends Uniform/* Uniform */.n{constructor(r,e){super(r,"float",BindType/* BindType */.c.Draw,((o,s,t)=>o.setUniform1f(r,e(s,t))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(a,e){l(a,e,new FloatPassUniform/* FloatPassUniform */.m("textureAlphaCutoff",(a=>a.textureAlphaCutoff)))}function t(a,r){l(a,r,new e("textureAlphaCutoff",(a=>a.textureAlphaCutoff)))}function l(e,r,s){const t=e.fragment;switch(r.alphaDiscardMode!==basicInterfaces/* AlphaDiscardMode */.sf.Mask&&r.alphaDiscardMode!==basicInterfaces/* AlphaDiscardMode */.sf.MaskBlend||t.uniforms.add(s),r.alphaDiscardMode){case basicInterfaces/* AlphaDiscardMode */.sf.Blend:return e.include(d);case basicInterfaces/* AlphaDiscardMode */.sf.Opaque:t.code.add((0,interfaces/* glsl */.H)`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case basicInterfaces/* AlphaDiscardMode */.sf.Mask:t.code.add((0,interfaces/* glsl */.H)`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case basicInterfaces/* AlphaDiscardMode */.sf.MaskBlend:e.fragment.code.add((0,interfaces/* glsl */.H)`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}


/***/ }),

/***/ 1062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ir: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports getProjectionInfo, getZScale */
/* harmony import */ var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58680);
/* harmony import */ var _chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78286);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52712);
/* harmony import */ var _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(54473);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(r){r.fragment.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float4PassUniform */ .E("projInfo",((r,o)=>f(o)))),r.fragment.uniforms.add(new _shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float2PassUniform */ .G("zScale",((r,o)=>i(o)))),r.fragment.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}function f(r){const o=r.camera.projectionMatrix;return 0===o[11]?(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(m,2/(r.camera.fullWidth*o[0]),2/(r.camera.fullHeight*o[5]),(1+o[12])/o[0],(1+o[13])/o[5]):(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.s)(m,-2/(r.camera.fullWidth*o[0]),-2/(r.camera.fullHeight*o[5]),(1-o[8])/o[0],(1-o[9])/o[5])}const m=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();function i(o){return 0===o.camera.projectionMatrix[11]?(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(d,0,1):(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_0__.s)(d,1,0)}const d=(0,_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__.a)();


/***/ }),

/***/ 89002:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){e.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}


/***/ }),

/***/ 10470:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c({code:c},i){i.doublePrecisionRequiresObfuscation?c.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):c.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)}


/***/ }),

/***/ 60915:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55623);
/* harmony import */ var _ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89002);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(i){i.include(_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ColorConversion */ .a),i.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`
    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {
      // workaround for artifacts in OSX using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      vec3 internalMixed = internalColor * textureColor;
      vec3 allMixed = internalMixed * externalColor;

      if (mode == ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H.int(_layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ColorMixModeEnum */ .k5.Multiply)}) {
        return allMixed;
      }
      if (mode == ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H.int(_layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ColorMixModeEnum */ .k5.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H.int(_layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ColorMixModeEnum */ .k5.Replace)}) {
        return externalColor;
      }

      // tint (or something invalid)
      float vIn = rgb2v(internalMixed);
      vec3 hsvTint = rgb2hsv(externalColor);
      vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);
      return hsv2rgb(hsvOut);
    }

    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {
      // workaround for artifacts in OSX using Intel Iris Pro
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475
      float internalMixed = internalOpacity * textureOpacity;
      float allMixed = internalMixed * externalOpacity;

      if (mode == ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H.int(_layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ColorMixModeEnum */ .k5.Ignore)}) {
        return internalMixed;
      }
      if (mode == ${_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H.int(_layers_support_symbolColorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ColorMixModeEnum */ .k5.Replace)}) {
        return externalOpacity;
      }

      // multiply or tint (or something invalid)
      return allMixed;
    }
  `)}


/***/ }),

/***/ 4969:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(a){a.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`const float MAX_RGBA4_FLOAT =
15.0 / 16.0 +
15.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 / 16.0;
const vec4 FIXED_POINT_FACTORS_RGBA4 = vec4(1.0, 16.0, 16.0 * 16.0, 16.0 * 16.0 * 16.0);
vec4 floatToRgba4(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA4_FLOAT);
vec4 fixedPointU4 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS_RGBA4) * 16.0);
const float toU4AsFloat = 1.0 / 15.0;
return fixedPointU4 * toU4AsFloat;
}
const vec4 RGBA4_2_FLOAT_FACTORS = vec4(
15.0 / (16.0),
15.0 / (16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0 * 16.0)
);
float rgba4ToFloat(vec4 rgba) {
return dot(rgba, RGBA4_2_FLOAT_FACTORS);
}`)}


/***/ }),

/***/ 70224:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(a){a.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}


/***/ }),

/***/ 6916:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OH: () => (/* binding */ o),
/* harmony export */   Y6: () => (/* binding */ s),
/* harmony export */   pM: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(e){e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add((0,_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function t(e){e.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("screenSizePerspective",(e=>i(e.screenSizePerspective))))}function o(e){e.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("screenSizePerspectiveAlignment",(e=>i(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function i(a){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.s)(n,a.parameters.divisor,a.parameters.offset,a.minScaleFactor)}const n=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ 63592:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  yu: () => (/* binding */ f),
  Nz: () => (/* binding */ u),
  NB: () => (/* binding */ d),
  S7: () => (/* binding */ p)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform.js
var Float3DrawUniform = __webpack_require__(13501);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js
var Float3PassUniform = __webpack_require__(60840);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Uniform.js
var Uniform = __webpack_require__(99198);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/BindType.js
var BindType = __webpack_require__(57198);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Matrix4DrawUniform_o extends Uniform/* Uniform */.n{constructor(r,o){super(r,"mat4",BindType/* BindType */.c.Draw,((e,s,t)=>e.setUniformMatrix4fv(r,o(s,t))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js
var Matrix4PassUniform = __webpack_require__(20778);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function f(r,a){a.instancedDoublePrecision?r.constants.add("cameraPosition","vec3",vec3f64.Z):r.uniforms.add(new Float3DrawUniform/* Float3DrawUniform */.W("cameraPosition",((r,a)=>(0,vec3.s)(w,a.camera.viewInverseTransposeMatrix[3]-r.origin[0],a.camera.viewInverseTransposeMatrix[7]-r.origin[1],a.camera.viewInverseTransposeMatrix[11]-r.origin[2]))))}function d(a,i){if(!i.instancedDoublePrecision)return void a.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("proj",((r,a)=>a.camera.projectionMatrix)),new Matrix4DrawUniform_o("view",((a,e)=>(0,mat4.w)(v,e.camera.viewMatrix,a.origin))),new Float3DrawUniform/* Float3DrawUniform */.W("localOrigin",(r=>r.origin)));const o=r=>(0,vec3.s)(w,r.camera.viewInverseTransposeMatrix[3],r.camera.viewInverseTransposeMatrix[7],r.camera.viewInverseTransposeMatrix[11]);a.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("proj",((r,a)=>a.camera.projectionMatrix)),new Matrix4PassUniform/* Matrix4PassUniform */.X("view",((a,e)=>(0,mat4.w)(v,e.camera.viewMatrix,o(e)))),new Float3PassUniform/* Float3PassUniform */.t("localOrigin",((r,a)=>o(a))))}const v=(0,mat4f64.a)(),w=(0,vec3f64.c)();function p(r){r.uniforms.add(new Matrix4PassUniform/* Matrix4PassUniform */.X("viewNormal",((r,a)=>a.camera.viewInverseTransposeMatrix)))}function u(r){r.uniforms.add(new FloatPassUniform/* FloatPassUniform */.m("pixelRatio",((r,a)=>a.camera.pixelRatio/a.overlayStretch)))}


/***/ }),

/***/ 72563:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(o,s){super(o,"bool",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((r,e,t)=>r.setUniform1b(o,s(e,t))))}}


/***/ }),

/***/ 96320:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,o){super(r,"vec2",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Draw,((e,s,t,i)=>e.setUniform2fv(r,o(s,t,i))))}}


/***/ }),

/***/ 54473:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"vec2",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniform2fv(r,e(o,t))))}}


/***/ }),

/***/ 13501:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,o){super(r,"vec3",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Draw,((e,s,t,i)=>e.setUniform3fv(r,o(s,t,i))))}}


/***/ }),

/***/ 60840:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"vec3",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniform3fv(r,e(o,t))))}}


/***/ }),

/***/ 1411:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"vec4",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniform4fv(r,e(o,t))))}}


/***/ }),

/***/ 54706:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e,o){super(r,"vec4",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniform4fv(r,e(o,t))),o)}}


/***/ }),

/***/ 35449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,o){super(r,"float",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,e,t)=>s.setUniform1f(r,o(e,t))))}}


/***/ }),

/***/ 45160:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,o,e){super(r,"float",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,e,t)=>s.setUniform1fv(r,o(e,t))),e)}}


/***/ }),

/***/ 3445:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"int",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,i)=>s.setUniform1i(r,e(o,i))))}}


/***/ }),

/***/ 8376:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,o){super(r,"mat3",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Draw,((e,s,t)=>e.setUniformMatrix3fv(r,o(s,t))))}}


/***/ }),

/***/ 6561:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"mat3",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniformMatrix3fv(r,e(o,t))))}}


/***/ }),

/***/ 20778:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,e){super(r,"mat4",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((s,o,t)=>s.setUniformMatrix4fv(r,e(o,t))))}}


/***/ }),

/***/ 4274:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N5: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports Code, Includes, Stage, Uniforms */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57198);
/* harmony import */ var _lib_Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class i{constructor(){this._includedModules=new Map}include(e,t){if(this._includedModules.has(e)){const r=this._includedModules.get(e);if(r!==t){s.error("Trying to include shader module multiple times with different sets of options.");const t=new Set;for(const n of Object.keys(r))r[n]!==e[n]&&t.add(n);for(const n of Object.keys(e))r[n]!==e[n]&&t.add(n);t.forEach((t=>console.error(`  ${t}: current ${r[t]} new ${e[t]}`)))}}else this._includedModules.set(e,t),e(this.builder,t)}}class o extends i{constructor(){super(...arguments),this.vertex=new u,this.fragment=new u,this.attributes=new h,this.varyings=new m,this.extensions=new l,this.constants=new _,this.outputs=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e){const t=this.extensions.generateSource(e),r=this.attributes.generateSource(e),n=this.varyings.generateSource(e),s="vertex"===e?this.vertex:this.fragment,i=s.uniforms.generateSource(),o=s.code.generateSource(),a="vertex"===e?g:f,c=this.constants.generateSource().concat(s.constants.generateSource()),u=this.outputs.generateSource(e);return`#version 300 es\n${t.join("\n")}\n\n${a}\n\n${c.join("\n")}\n\n${i.join("\n")}\n\n${r.join("\n")}\n\n${n.join("\n")}\n\n${u.join("\n")}\n\n${o.join("\n")}`}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__/* .BindType */ .c.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__/* .BindType */ .c.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__/* .BindType */ .c.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__/* .BindType */ .c.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,t,r,i)}}}class a{constructor(){this._entries=new Map}add(...e){for(const t of e)this._add(t)}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else s.error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((e=>null!=e.arraySize?`uniform ${e.type} ${e.name}[${e.arraySize}];`:`uniform ${e.type} ${e.name};`))}get entries(){return Array.from(this._entries.values())}}class c{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class u extends i{constructor(){super(...arguments),this.uniforms=new a,this.code=new c,this.constants=new _}get builder(){return this}}class h{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Map}add(e,t){this._entries.has(e)&&(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(this._entries.get(e)===t),this._entries.set(e,t)}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push("vertex"===e?`out ${r} ${n};`:`in ${r} ${n};`))),t}}class l{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?l.ALLOWLIST_VERTEX:l.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}l.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],l.ALLOWLIST_VERTEX=[];class d{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(s.name===e&&s.type===t,`Fragment shader output location ${r} occupied`):this._entries.set(r,{name:e,type:t})}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:d.DEFAULT_NAME,type:d.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}d.DEFAULT_TYPE="vec4",d.DEFAULT_NAME="fragColor";class _{constructor(){this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=_._numberToFloatStr(r);break;case"int":n=_._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${_._numberToFloatStr(r[0])},                            ${_._numberToFloatStr(r[1])},                            ${_._numberToFloatStr(r[2])},                            ${_._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${_._numberToIntStr(r[0])},                             ${_._numberToIntStr(r[1])},                             ${_._numberToIntStr(r[2])},                             ${_._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>_._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const f="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",g="precision highp float;\nprecision highp sampler2D;";


/***/ }),

/***/ 52293:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,s){super(r,"sampler2D",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Draw,((e,o,t)=>e.bindTexture(r,s(o,t))))}}


/***/ }),

/***/ 79856:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _Uniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99198);
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _Uniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Uniform */ .n{constructor(r,s){super(r,"sampler2D",_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_1__/* .BindType */ .c.Pass,((e,o,t)=>e.bindTexture(r,s(o,t))))}}


/***/ }),

/***/ 99198:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(57198);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a{constructor(a,i,e,r,t=null){if(this.name=a,this.type=i,this.arraySize=t,this.bind={[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass]:null,[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Draw]:null},r)switch(e){case _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass:this.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass]=r;break;case _shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Draw:this.bind[_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Draw]=r}}equals(s){return this.type===s.type&&this.name===s.name&&this.arraySize===s.arraySize}}


/***/ }),

/***/ 99152:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ o),
/* harmony export */   Y: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{}const n=t;function o(t,...n){let o="";for(let r=0;r<n.length;r++)o+=t[r]+n[r];return o+=t[t.length-1],o}!function(t){function n(t){return Math.round(t).toString()}function o(t){return t.toPrecision(8)}t.int=n,t.float=o}(o||(o={}));


/***/ }),

/***/ 57198:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var a;!function(a){a[a.Pass=0]="Pass",a[a.Draw=1]="Draw"}(a||(a={}));


/***/ }),

/***/ 47705:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t,o){this._module=t,this._loadModule=o}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}


/***/ }),

/***/ 33444:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   w: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6267);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(i,t,r){this.release=r,this.initializeConfiguration(i,t),this._configuration=t.snapshot(),this._program=this.initializeProgram(i),this._pipeline=this.initializePipeline(i.rctx.capabilities)}destroy(){this._program=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .disposeMaybe */ .WD)(this._program),this._pipeline=this._configuration=null}reload(t){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__/* .disposeMaybe */ .WD)(this._program),this._program=this.initializeProgram(t),this._pipeline=this.initializePipeline(t.rctx.capabilities)}get program(){return this._program}get compiled(){return this.program.compiled}get key(){return this._configuration.key}get configuration(){return this._configuration}ensureAttributeLocations(i){this.program.assertCompatibleVertexAttributeLocations(i)}get primitiveType(){return _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PrimitiveType */ .WR.TRIANGLES}getPipeline(i,t,r){return this._pipeline}initializeConfiguration(i,t){}}


/***/ }),

/***/ 69948:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ t),
/* harmony export */   W: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t extends _shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .NoParameters */ .Y{constructor(){super(),this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits?this._parameterBits.map((()=>0)):[],this._parameterNames||(this._parameterNames=[])}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const e=this._parameterNames,t={key:this.key};for(const r of e)t[r]=this[r];return t}}function r(e={}){return(t,r)=>{if(t._parameterNames=t._parameterNames??[],t._parameterNames.push(r),null!=e.constValue)Object.defineProperty(t,r,{get:()=>e.constValue});else{const s=t._parameterNames.length-1,a=e.count||2,i=Math.ceil(Math.log2(a)),o=t._parameterBits??[0];let h=0;for(;o[h]+i>16;)h++,h>=o.length&&o.push(0);t._parameterBits=o;const n=o[h],m=(1<<i)-1<<n;o[h]+=i,Object.defineProperty(t,r,{get(){return this[s]},set(e){if(this[s]!==e&&(this[s]=e,this._keyDirty=!0,this._parameterBits[h]=this._parameterBits[h]&~m|+e<<n&m,"number"!=typeof e&&"boolean"!=typeof e))throw new Error("Configuration value for "+r+" must be boolean or number, got "+typeof e)}})}}}


/***/ }),

/***/ 38931:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A9: () => (/* binding */ d),
/* harmony export */   B7: () => (/* binding */ t),
/* harmony export */   Ot: () => (/* binding */ c),
/* harmony export */   RW: () => (/* binding */ u),
/* harmony export */   S: () => (/* binding */ m),
/* harmony export */   qo: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony exports AsyncRenderPlugin, ConsumesCompositeColor, ConsumesHighlight, SyncPreparesRenderPlugin */
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52495);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s={required:[]},t={required:[_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth]},o={required:[_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.CompositeColor]},n={required:[_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Highlight]},d={required:[_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth,_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Normal]};class i extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{consumes(){return s}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}}class u extends i{}class c extends i{}class a extends (/* unused pure expression or super */ null && (i)){}class l extends (/* unused pure expression or super */ null && (i)){}class m extends i{}


/***/ }),

/***/ 46068:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ i),
/* harmony export */   a: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_time_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60882);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(){this.enabled=!0,this._time=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_0__/* .Milliseconds */ .l5)(0)}get time(){return this._time}advance({deltaTime:e,fixedTime:i}){return null!=i?this._time!==i&&(this._time=i,!0):(this._time=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_0__/* .Milliseconds */ .l5)(this._time+e),0!==e)}}class i{constructor(t,e){this.deltaTime=t,this.fixedTime=e}}


/***/ }),

/***/ 36549:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  i: () => (/* binding */ $)
});

// UNUSED EXPORTS: PaddingSide

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4.js
var vec4 = __webpack_require__(25102);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(32532);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vector.js
var vector = __webpack_require__(16597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/fov.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function fov_t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Camera.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var Z;let $=Z=class extends Accessor/* default */.A{constructor(t={}){super(t),this._center=(0,vec3f64.c)(),this._up=(0,vec3f64.c)(),this._viewUp=(0,vec3f64.c)(),this._viewForward=(0,vec3f64.c)(),this._viewRight=(0,vec3f64.c)(),this._ray=(0,ray/* create */.vt)(),this._viewport=(0,vec4f64.f)(0,0,1,1),this._padding=(0,vec4f64.f)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,vec2f64.f)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,mat4f64.a)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,mat4f64.a)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,mat4f64.a)(),this._frustumDirty=!0,this._frustum=(0,frustum/* create */.vt)(),this._fullViewport=(0,vec4f64.c)(),this._pixelRatio=1,this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return (0,vec3.f)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,mat4.h)(this._viewMatrix,t),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),this._viewForward}get viewUp(){return this._ensureViewClean(),this._viewUp}get viewRight(){return this._ensureViewClean(),this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,vec4.b)((0,vec4f64.c)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,vec4.e)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,vec4.b)((0,vec4f64.c)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,vec4.e)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[ht.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[ht.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[ht.RIGHT]+this._padding[ht.LEFT]}set fullWidth(t){this.width=t-(this._padding[ht.RIGHT]+this._padding[ht.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[ht.TOP]+this._padding[ht.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[ht.TOP]+this._padding[ht.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[ht.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[ht.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,vec4.h)(this._padding,t)||(this._viewport[0]+=t[ht.LEFT]-this._padding[ht.LEFT],this._viewport[1]+=t[ht.BOTTOM]-this._padding[ht.BOTTOM],this._viewport[2]-=t[ht.RIGHT]+t[ht.LEFT]-(this._padding[ht.RIGHT]+this._padding[ht.LEFT]),this._viewport[3]-=t[ht.TOP]+t[ht.BOTTOM]-(this._padding[ht.TOP]+this._padding[ht.BOTTOM]),(0,vec4.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,mat4.m)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2),r=e*this._aspect,s=(0,mat4.q)((0,mat4f64.a)(),-r*(1+2*this._padding[ht.LEFT]/t),r*(1+2*this._padding[ht.RIGHT]/t),-e*(1+2*this._padding[ht.BOTTOM]/i),e*(1+2*this._padding[ht.TOP]/i),this.near,this.far),h=this._get("projectionMatrix");return h&&(0,mat4.a)(h,s)?h:s}get inverseProjectionMatrix(){return (0,mat4.i)((0,mat4f64.a)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,mat4f64.a)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return n(this._fov,this.width,this.height)}set fovX(t){this._fov=fov_t(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return r(this._fov,this.width,this.height)}set fovY(t){this._fov=a(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return (0,vec3.o)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,mat4.i)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,mat4.t)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const i=2*t-1;return 2*this.near*this.far/(this.far+this.near-i*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}copyFrom(t){(0,vec3.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,vec4.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,vec4.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,vec2.j)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,mat4.h)(this._viewMatrix,t.viewMatrix),(0,vec3.c)(this._viewRight,t.viewRight),(0,vec3.c)(this._viewUp,t.viewUp),(0,vec3.c)(this._viewForward,t.viewForward)),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,frustum/* copy */.C)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,mat4.h)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,vec4.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up}clone(){return(new Z).copyFrom(this)}equals(t){return (0,vec3.h)(this.eye,t.eye)&&(0,vec3.h)(this.center,t.center)&&(0,vec3.h)(this.up,t.up)&&(0,vec4.h)(this._viewport,t.viewport)&&(0,vec4.h)(this._padding,t.padding)&&(0,vec2.m)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||(0,vec4.i)(t.screenPadding,this.screenPadding)>=i||(0,vec4.i)(this.screenViewport,t.screenViewport)>=i)return!1;(0,vec3.u)(et,t.eye,t.center),(0,vec3.u)(rt,this.eye,this.center);const e=(0,vec3.j)(et,rt),r=(0,vec3.F)(et),s=(0,vec3.F)(rt),h=5e-4;return e*e>=(1-1e-10)*r*s&&(0,vec3.y)(t.eye,this.eye)<Math.max(r,s)*h*h}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,vector/* projectPointSignedLength */.gr)(this.viewForward,(0,vec3.f)(et,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=(0,screenUtils/* createScreenPointArray */.gs)()){return t[0]=(this.padding[ht.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[ht.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[ht.LEFT]+this.width*i,t[1]=this.padding[ht.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==tt&&(0,vec3.c)(tt,t),tt[3]=1,(0,vec4.t)(tt,tt,this.projectionMatrix);const e=Math.abs(tt[3]);(0,vec3.i)(tt,tt,1/e);const s=this.fullViewport;i[0]=(0,mathUtils/* lerp */.Cc)(0,s[0]+s[2],.5+.5*tt[0]),i[1]=(0,mathUtils/* lerp */.Cc)(0,s[1]+s[3],.5+.5*tt[1]),i[2]=.5*(tt[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;tt[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],tt[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],tt[2]=(2*t[2]-1)*t[3],tt[3]=t[3],null!=this.inverseProjectionMatrix&&((0,vec4.t)(tt,tt,this.inverseProjectionMatrix),i[0]=tt[0],i[1]=tt[1],i[2]=tt[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,st),this.renderToScreen(st,i),i}projectToRenderScreen(t,i){if(tt[0]=t[0],tt[1]=t[1],tt[2]=t[2],tt[3]=1,(0,vec4.t)(tt,tt,this.viewProjectionMatrix),0===tt[3])return null;(0,vec3.i)(tt,tt,1/Math.abs(tt[3]));const e=this.fullViewport;return"x"in i?(i.x=(0,mathUtils/* lerp */.Cc)(0,e[0]+e[2],.5+.5*tt[0]),i.y=(0,mathUtils/* lerp */.Cc)(0,e[1]+e[3],.5+.5*tt[1])):(i[0]=(0,mathUtils/* lerp */.Cc)(0,e[0]+e[2],.5+.5*tt[0]),i[1]=(0,mathUtils/* lerp */.Cc)(0,e[1]+e[3],.5+.5*tt[1]),i.length>2&&(i[2]=.5*(tt[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,st),i)}unprojectFromRenderScreen(t,i){if((0,mat4.m)(it,this.projectionMatrix,this.viewMatrix),!(0,mat4.i)(it,it))return null;const e=this.fullViewport;return tt[0]=2*(t[0]-e[0])/e[2]-1,tt[1]=2*(t[1]-e[1])/e[3]-1,tt[2]=2*t[2]-1,tt[3]=1,(0,vec4.t)(tt,tt,it),0===tt[3]?null:(i[0]=tt[0]/tt[3],i[1]=tt[1]/tt[3],i[2]=tt[2]/tt[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,h=i*this.pixelRatio,o=Math.max(s-e/2,0),n=Math.max(this.fullHeight-h-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-h-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),_=r-p- -Math.min(h-r/2,0);return[Math.round(o),Math.round(n),Math.round(u),Math.round(_)]}computeUp(t){t===ViewingMode/* ViewingMode */.RT.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,vec3.f)(et,this.center,this.eye);const t=(0,vec3.l)(this.center);t<1?((0,vec3.s)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,vec3.j)(et,this.center))>.9999*(0,vec3.l)(et)*t||((0,vec3.b)(this._up,et,this.center),(0,vec3.b)(this._up,this._up,et),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,vec3.C)(et,this.eye,this.center),Math.abs(et[2])<=.9999&&((0,vec3.i)(et,et,et[2]),(0,vec3.s)(this._up,-et[0],-et[1],1-et[2]),(0,vec3.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i,r=""){"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,vec3.h)(t,i)||((0,vec3.c)(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.Camera").warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,frustum/* fromMatrix */.ui)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,mat4.u)(this._viewMatrix,this.eye,this.center,this.up),(0,vec3.s)(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),(0,vec3.s)(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),(0,vec3.s)(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_center",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_up",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_viewport",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_padding",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_fov",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_nearFar",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"_pixelRatio",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"eye",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"center",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"up",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"nearFar",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"near",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"far",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"viewport",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"screenViewport",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"screenPadding",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"x",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"y",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"width",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"height",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"fullWidth",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"fullHeight",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"_aspect",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"padding",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"projectionMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],$.prototype,"inverseProjectionMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"fov",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"fovX",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],$.prototype,"fovY",null),$=Z=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.Camera")],$);const tt=(0,vec4f64.c)(),it=(0,mat4f64.a)(),et=(0,vec3f64.c)(),rt=(0,vec3f64.c)(),st=(0,screenUtils/* createRenderScreenPointArray3 */.r_)();var ht;!function(t){t[t.TOP=0]="TOP",t[t.RIGHT=1]="RIGHT",t[t.BOTTOM=2]="BOTTOM",t[t.LEFT=3]="LEFT"}(ht||(ht={}));


/***/ }),

/***/ 71077:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65061);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(){this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_0__/* .generateUID */ .L)()}}


/***/ }),

/***/ 52997:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e;!function(e){e[e.Layer=0]="Layer",e[e.Object=1]="Object",e[e.Mesh=2]="Mesh",e[e.Line=3]="Line",e[e.Point=4]="Point",e[e.Material=5]="Material",e[e.Texture=6]="Texture",e[e.COUNT=7]="COUNT"}(e||(e={}));


/***/ }),

/***/ 13148:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const E=new Map([[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.POSITION,0],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.NORMAL,1],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.NORMALCOMPRESSED,1],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.UV0,2],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.COLOR,3],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,3],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.SIZE,4],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.TANGENT,4],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.AUXPOS1,5],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.SYMBOLCOLOR,5],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.AUXPOS2,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.FEATUREATTRIBUTE,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEFEATUREATTRIBUTE,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCECOLOR,7],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR,7],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEOBJECTANDLAYERIDCOLOR,7],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODEL,8],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELNORMAL,12],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELORIGINHI,11],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELORIGINLO,15]]);


/***/ }),

/***/ 67341:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(e){this._material=e.material,this._techniqueRepository=e.techniqueRep,this._output=e.output}dispose(){this._techniqueRepository.release(this._technique)}get technique(){return this._technique}get _stippleTextureRepository(){return this._techniqueRepository.constructionContext.stippleTextureRepository}get _markerTextureRepository(){return this._techniqueRepository.constructionContext.markerTextureRepository}ensureTechnique(e,t){return this._technique=this._techniqueRepository.releaseAndAcquire(e,this._material.getConfiguration(this._output,t),this._technique),this._technique}ensureResources(t){return _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceState */ .Am.LOADED}}


/***/ }),

/***/ 72136:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(s,t){this._material=s,this._repository=t,this._map=new Map}dispose(){this._map.forEach(((s,t)=>{null!=s&&this._repository.release(this._material,t)}))}load(t,r,e){if(!this._material.produces(r,e))return null;this._map.has(e)||this._map.set(e,this._repository.acquire(this._material,r,e));const i=this._map.get(e);if(null!=i){if(i.ensureResources(t)===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceState */ .Am.LOADED)return i;this._repository.requestRender()}return null}}


/***/ }),

/***/ 89140:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ l),
/* harmony export */   m: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40189);
/* harmony import */ var _core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(91013);
/* harmony import */ var _GLMaterial_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(67341);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _GLMaterial_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textureRepository=t.textureRepository,this._textureId=t.textureId,this._acquire(t.textureId,(t=>this._texture=t)),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){this._texture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._texture),this._textureNormal=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureNormal),this._textureEmissive=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureEmissive),this._textureOcclusion=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureOcclusion),this._textureMetallicRoughness=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceState */ .Am.LOADED:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceState */ .Am.LOADING}get textureBindParameters(){return new l(null!=this._texture?this._texture.glTexture:null,null!=this._textureNormal?this._textureNormal.glTexture:null,null!=this._textureEmissive?this._textureEmissive.glTexture:null,null!=this._textureOcclusion?this._textureOcclusion.glTexture:null,null!=this._textureMetallicRoughness?this._textureMetallicRoughness.glTexture:null)}updateTexture(e){null!=this._texture&&e===this._texture.id||(this._texture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._texture),this._textureId=e,this._acquire(this._textureId,(t=>this._texture=t)))}_acquire(s,i){if(null==s)return void i(null);const u=this._textureRepository.acquire(s);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPromiseLike */ .$X)(u))return++this._numLoading,void u.then((e=>{if(this._disposed)return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(e),void i(null);i(e)})).finally((()=>--this._numLoading));i(u)}}class l extends _core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .NoParameters */ .Y{constructor(t=null,e=null,s=null,i=null,u=null){super(),this.texture=t,this.textureNormal=e,this.textureEmissive=s,this.textureOcclusion=i,this.textureMetallicRoughness=u}}


/***/ }),

/***/ 59568:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  V: () => (/* binding */ I)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/typedArrayUtil.js
var typedArrayUtil = __webpack_require__(86942);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/AttributeArray.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){if(o.length<typedArrayUtil/* nativeArrayMaxSize */.y9)return Array.from(o);if((0,typedArrayUtil/* isArray */.cy)(o))return Float64Array.from(o);if(!("BYTES_PER_ELEMENT"in o))return Array.from(o);switch(o.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(o);case 2:return (0,typedArrayUtil/* isUint16Array */.jq)(o)?Uint16Array.from(o):Int16Array.from(o);case 4:return Float32Array.from(o);default:return Float64Array.from(o)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BoundingInfo_o{constructor(i,e,o){this.primitiveIndices=i,this._numIndexPerPrimitive=e,this.position=o,this._children=void 0,(0,Util/* assert */.vA)(i.length>=1),(0,Util/* assert */.vA)(3===o.size||4===o.size);const{data:c,size:l,indices:m}=o;(0,Util/* assert */.vA)(m.length%this._numIndexPerPrimitive==0),(0,Util/* assert */.vA)(m.length>=i.length*this._numIndexPerPrimitive);const d=i.length;let u=l*m[this._numIndexPerPrimitive*i[0]];a.clear(),a.push(u);const f=(0,vec3f64.f)(c[u],c[u+1],c[u+2]),x=(0,vec3f64.g)(f);for(let t=0;t<d;++t){const e=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){u=l*m[e+i],a.push(u);let t=c[u];f[0]=Math.min(t,f[0]),x[0]=Math.max(t,x[0]),t=c[u+1],f[1]=Math.min(t,f[1]),x[1]=Math.max(t,x[1]),t=c[u+2],f[2]=Math.min(t,f[2]),x[2]=Math.max(t,x[2])}}this.bbMin=f,this.bbMax=x;const P=(0,vec3.p)((0,vec3f64.c)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(x[0]-f[0],x[1]-f[1]),x[2]-f[2]);let p=this.radius*this.radius;for(let t=0;t<a.length;++t){u=a.at(t);const i=c[u]-P[0],e=c[u+1]-P[1],s=c[u+2]-P[2],r=i*i+e*e+s*s;if(r<=p)continue;const n=Math.sqrt(r),h=.5*(n-this.radius);this.radius=this.radius+h,p=this.radius*this.radius;const o=h/n;P[0]+=i*o,P[1]+=e*o,P[2]+=s*o}this.center=P,a.clear()}getChildren(){if(this._children||(0,vec3.a)(this.bbMin,this.bbMax)<=1)return this._children;const i=(0,vec3.p)((0,vec3f64.c)(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,r=new Uint8Array(s),h=new Array(8);for(let t=0;t<8;++t)h[t]=0;const{data:a,size:c,indices:l}=this.position;for(let t=0;t<s;++t){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[t];let n=c*l[s],o=a[n],m=a[n+1],d=a[n+2];for(let i=1;i<this._numIndexPerPrimitive;++i){n=c*l[s+i];const t=a[n],e=a[n+1],r=a[n+2];t<o&&(o=t),e<m&&(m=e),r<d&&(d=r)}o<i[0]&&(e|=1),m<i[1]&&(e|=2),d<i[2]&&(e|=4),r[t]=e,++h[e]}let m=0;for(let t=0;t<8;++t)h[t]>0&&++m;if(m<2)return;const d=new Array(8);for(let t=0;t<8;++t)d[t]=h[t]>0?new Uint32Array(h[t]):void 0;for(let t=0;t<8;++t)h[t]=0;for(let t=0;t<s;++t){const i=r[t];d[i][h[i]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==d[t]&&this._children.push(new BoundingInfo_o(d[t],this._numIndexPerPrimitive,this.position));return this._children}static prune(){a.prune()}}const a=new PooledArray/* default */.A({deallocator:null});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js
var ContentObject = __webpack_require__(71077);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var ContentObjectType = __webpack_require__(52997);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/triangle.js
var triangle = __webpack_require__(50958);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/geometryDataUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c(s,r){if(!s)return!1;const{size:c,data:i,indices:f}=s;(0,vec3.s)(r,0,0,0),(0,vec3.s)(m,0,0,0);let d=0,g=0;for(let p=0;p<f.length-2;p+=3){const s=f[p]*c,h=f[p+1]*c,j=f[p+2]*c;(0,vec3.s)(geometryDataUtils_a,i[s],i[s+1],i[s+2]),(0,vec3.s)(u,i[h],i[h+1],i[h+2]),(0,vec3.s)(l,i[j],i[j+1],i[j+2]);const z=(0,triangle/* areaPoints3d */.Q7)(geometryDataUtils_a,u,l);z?((0,vec3.g)(geometryDataUtils_a,geometryDataUtils_a,u),(0,vec3.g)(geometryDataUtils_a,geometryDataUtils_a,l),(0,vec3.i)(geometryDataUtils_a,geometryDataUtils_a,1/3*z),(0,vec3.g)(r,r,geometryDataUtils_a),d+=z):((0,vec3.g)(m,m,geometryDataUtils_a),(0,vec3.g)(m,m,u),(0,vec3.g)(m,m,l),g+=3)}return(0!==g||0!==d)&&(0!==d?((0,vec3.i)(r,r,1/d),!0):0!==g&&((0,vec3.i)(r,m,1/g),!0))}function geometryDataUtils_i(n,s){if(!n)return!1;const{size:r,data:o,indices:c}=n;(0,vec3.s)(s,0,0,0);let i=-1,f=0;for(let t=0;t<c.length;t++){const n=c[t]*r;i!==n&&(s[0]+=o[n],s[1]+=o[n+1],s[2]+=o[n+2],f++),i=n}return f>1&&(0,vec3.i)(s,s,1/f),f>0}function f(r,o,c){if(!r)return!1;(0,vec3.s)(c,0,0,0),(0,vec3.s)(m,0,0,0);let i=0,f=0;const{size:l,data:d,indices:g}=r,p=g.length-1,h=p+(o?2:0);for(let t=0;t<h;t+=2){const r=t<p?t+1:0,o=g[t<p?t:p]*l,h=g[r]*l;geometryDataUtils_a[0]=d[o],geometryDataUtils_a[1]=d[o+1],geometryDataUtils_a[2]=d[o+2],u[0]=d[h],u[1]=d[h+1],u[2]=d[h+2],(0,vec3.i)(geometryDataUtils_a,(0,vec3.g)(geometryDataUtils_a,geometryDataUtils_a,u),.5);const j=(0,vec3.r)(geometryDataUtils_a,u);j>0?((0,vec3.g)(c,c,(0,vec3.i)(geometryDataUtils_a,geometryDataUtils_a,j)),i+=j):0===i&&((0,vec3.g)(m,m,geometryDataUtils_a),f++)}return 0!==i?((0,vec3.i)(c,c,1/i),!0):0!==f&&((0,vec3.i)(c,m,1/f),!0)}const geometryDataUtils_a=(0,vec3f64.c)(),u=(0,vec3f64.c)(),l=(0,vec3f64.c)(),m=(0,vec3f64.c)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js
var Object3DStateID = __webpack_require__(22775);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/utils.js
var utils = __webpack_require__(29688);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class I extends ContentObject/* ContentObject */.J{constructor(t,i,e=null,s=ContentObjectType/* ContentObjectType */.X.Mesh,r=null,o=-1){super(),this.material=t,this.mapPositions=e,this.type=s,this.objectAndLayerIdColor=r,this.edgeIndicesLength=o,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[h,a]of i)this._attributes.set(h,{...a,indices:(0,Indices/* compactIndices */.Dg)(a.indices)}),h===VertexAttribute/* VertexAttribute */.r.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(h).indices.length:this.edgeIndicesLength)}instantiate(t={}){const i=new I(t.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((t,e)=>{t.exclusive=!1,i._attributes.set(e,t)})),i._boundingInfo=this._boundingInfo,i.transformation=t.transformation||this.transformation,i}get attributes(){return this._attributes}getMutableAttribute(t){let i=this._attributes.get(t);return i&&!i.exclusive&&(i={...i,exclusive:!0,data:o(i.data)},this._attributes.set(t,i)),i}setAttributeData(t,i){const e=this._attributes.get(t);e&&this._attributes.set(t,{...e,exclusive:!0,data:i})}get indexCount(){const t=this._attributes.values().next().value.indices;return t?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return!!(this.type===ContentObjectType/* ContentObjectType */.X.Mesh?this._computeAttachmentOriginTriangles(t):this.type===ContentObjectType/* ContentObjectType */.X.Line?this._computeAttachmentOriginLines(t):this._computeAttachmentOriginPoints(t))&&(null!=this._transformation&&(0,vec3.e)(t,t,this._transformation),!0)}_computeAttachmentOriginTriangles(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return c(i,t)}_computeAttachmentOriginLines(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return f(i,_(this.material.parameters,i),t)}_computeAttachmentOriginPoints(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return geometryDataUtils_i(i,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);if(!t||0===t.indices.length)return null;const i=this.type===ContentObjectType/* ContentObjectType */.X.Mesh?3:1;(0,Util/* assert */.vA)(t.indices.length%i==0,"Indexing error: "+t.indices.length+" not divisible by "+i);const e=(0,Indices/* getContinuousIndexArray */.tM)(t.indices.length/i);return new BoundingInfo_o(e,i,t)}get transformation(){return this._transformation??mat4f64.I}set transformation(e){this._transformation=e&&e!==mat4f64.I?(0,mat4f64.b)(e):null}addHighlight(){const t=new Object3DStateID/* Object3DStateID */.X(basicInterfaces/* Object3DState */.Mg.Highlight);return this.highlights=(0,utils/* addObject3DStateID */.Ci)(this.highlights,t),t}removeHighlight(t){this.highlights=(0,utils/* removeObject3DStateID */.PC)(this.highlights,t)}}function _(t,i){return!(!("isClosed"in t)||!t.isClosed)&&i.indices.length>2}


/***/ }),

/***/ 94643:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  zC: () => (/* binding */ wt),
  C1: () => (/* binding */ E),
  EE: () => (/* binding */ lt),
  nW: () => (/* binding */ ut),
  td: () => (/* binding */ q),
  _B: () => (/* binding */ pt),
  Nq: () => (/* binding */ at),
  DJ: () => (/* binding */ ot),
  uX: () => (/* binding */ et),
  Z8: () => (/* binding */ ft),
  CM: () => (/* binding */ nt),
  Gj: () => (/* binding */ ht),
  Ho: () => (/* binding */ tt),
  Nb: () => (/* binding */ ct),
  Xl: () => (/* binding */ Ot),
  xh: () => (/* binding */ it)
});

// UNUSED EXPORTS: createPolySphereData

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f32.js
var vec3f32 = __webpack_require__(80952);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/DoubleArray.js
var DoubleArray = __webpack_require__(90166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/FloatArray.js
var FloatArray = __webpack_require__(50961);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(32532);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js
var Attribute = __webpack_require__(70807);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BufferVectorMath.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n;!function(n){function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)}function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u}function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c}function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]}function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}n.length=t,n.normalize=c,n.scale=o,n.add=r,n.subtract=u}(n||(n={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var ContentObjectType = __webpack_require__(52997);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js + 3 modules
var Geometry = __webpack_require__(59568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const b=n,j=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],d=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],U=[0,0,1,0,1,1,0,1],V=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],v=new Array(36);for(let At=0;At<6;At++)for(let t=0;t<6;t++)v[6*At+t]=At;const x=new Array(36);for(let At=0;At<6;At++)x[6*At]=0,x[6*At+1]=1,x[6*At+2]=2,x[6*At+3]=2,x[6*At+4]=3,x[6*At+5]=0;function E(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let s=0;s<8;s++)e[3*s]=j[s][0]*n[0],e[3*s+1]=j[s][1]*n[1],e[3*s+2]=j[s][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,V,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(d,v,3)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(U,x,2)]])}const F=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],G=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],C=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],k=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function q(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let s=0;s<6;s++)e[3*s]=F[s][0]*n[0],e[3*s+1]=F[s][1]*n[1],e[3*s+2]=F[s][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,C,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(G,k,3)]])}const B=(0,vec3f32.f)(-.5,0,-.5),z=(0,vec3f32.f)(.5,0,-.5),D=(0,vec3f32.f)(0,0,.5),X=(0,vec3f32.f)(0,.5,0),Z=(0,vec3f32.c)(),H=(0,vec3f32.c)(),J=(0,vec3f32.c)(),K=(0,vec3f32.c)(),Q=(0,vec3f32.c)();(0,vec3.f)(Z,B,X),(0,vec3.f)(H,B,z),(0,vec3.b)(J,Z,H),(0,vec3.n)(J,J),(0,vec3.f)(Z,z,X),(0,vec3.f)(H,z,D),(0,vec3.b)(K,Z,H),(0,vec3.n)(K,K),(0,vec3.f)(Z,D,X),(0,vec3.f)(H,D,B),(0,vec3.b)(Q,Z,H),(0,vec3.n)(Q,Q);const W=[B,z,D,X],Y=[0,-1,0,J[0],J[1],J[2],K[0],K[1],K[2],Q[0],Q[1],Q[2]],$=[0,1,2,3,1,0,3,2,1,3,0,2],_=[0,0,0,1,1,1,2,2,2,3,3,3];function tt(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let s=0;s<4;s++)e[3*s]=W[s][0]*n[0],e[3*s+1]=W[s][1]*n[1],e[3*s+2]=W[s][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,$,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(Y,_,3)]])}function nt(t,n,e,s,o={uv:!0}){const r=-Math.PI,h=2*Math.PI,l=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(s)),f=(c+1)*(a+1),p=(0,FloatArray/* newFloatArray */.oe)(3*f),i=(0,FloatArray/* newFloatArray */.oe)(3*f),g=(0,FloatArray/* newFloatArray */.oe)(2*f),m=[];let M=0;for(let w=0;w<=a;w++){const t=[],e=w/a,s=l+e*u,o=Math.cos(s);for(let l=0;l<=c;l++){const u=l/c,a=r+u*h,f=Math.cos(a)*o,w=Math.sin(s),O=-Math.sin(a)*o;p[3*M]=f*n,p[3*M+1]=w*n,p[3*M+2]=O*n,i[3*M]=f,i[3*M+1]=w,i[3*M+2]=O,g[2*M]=u,g[2*M+1]=e,t.push(M),++M}m.push(t)}const A=new Array;for(let w=0;w<a;w++)for(let t=0;t<c;t++){const n=m[w][t],e=m[w][t+1],s=m[w+1][t+1],o=m[w+1][t];0===w?(A.push(n),A.push(s),A.push(o)):w===a-1?(A.push(n),A.push(e),A.push(s)):(A.push(n),A.push(e),A.push(s),A.push(s),A.push(o),A.push(n))}const I=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(p,A,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(i,A,3,!0)]];return o.uv&&I.push([VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(g,A,2,!0)]),o.offset&&(I[0][0]=VertexAttribute/* VertexAttribute */.r.OFFSET,I.push([VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(Float64Array.from(o.offset),(0,Indices/* getZeroIndexArray */.EH)(A.length),3,!0)])),new Geometry/* Geometry */.V(t,I)}function et(t,n,e,s){const o=st(n,e,s);return new Geometry/* Geometry */.V(t,o)}function st(t,n,e){const s=t;let o,r;if(e)o=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=s*(1+Math.sqrt(5))/2;o=[-s,t,0,s,t,0,-s,-t,0,s,-t,0,0,-s,t,0,s,t,0,-s,-t,0,s,-t,t,0,-s,t,0,s,-t,0,-s,-t,0,s],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let c=0;c<o.length;c+=3)b.scale(o,c,t/b.length(o,c));let h={};function l(n,e){n>e&&([n,e]=[e,n]);const s=n.toString()+"."+e.toString();if(h[s])return h[s];let r=o.length;return o.length+=3,b.add(o,3*n,o,3*e,o,r),b.scale(o,r,t/b.length(o,r)),r/=3,h[s]=r,r}for(let c=0;c<n;c++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],s=r[e+1],o=r[e+2],h=l(t,s),u=l(s,o),c=l(o,t),a=4*e;n[a]=t,n[a+1]=h,n[a+2]=c,n[a+3]=s,n[a+4]=u,n[a+5]=h,n[a+6]=o,n[a+7]=c,n[a+8]=u,n[a+9]=h,n[a+10]=u,n[a+11]=c}r=n,h={}}const u=(0,FloatArray/* floatArrayFrom */.Wz)(o);for(let c=0;c<u.length;c+=3)b.normalize(u,c);return[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n((0,FloatArray/* floatArrayFrom */.Wz)(o),r,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(u,r,3,!0)]]}function ot(t,n,e,s,o,r,h,l,u=null){const c=e?[e[0],e[1],e[2]]:[0,0,0],a=n?[n[0],n[1],n[2]]:[0,0,1];h=h||[0,0];const f=s?[255*s[0],255*s[1],255*s[2],s.length>3?255*s[3]:255]:[255,255,255,255],p=null!=o&&2===o.length?o:[1,1],i=(0,Indices/* getZeroIndexArray */.EH)(1),w=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(c,i,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(a,i,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(h,i,h.length)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(f,i,4,!0)],[VertexAttribute/* VertexAttribute */.r.SIZE,new Attribute/* Attribute */.n(p,i,2)]];if(null!=r){const t=[r[0],r[1],r[2],r[3]];w.push([VertexAttribute/* VertexAttribute */.r.AUXPOS1,new Attribute/* Attribute */.n(t,i,4)])}if(null!=l){const t=[l[0],l[1],l[2],l[3]];w.push([VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE,new Attribute/* Attribute */.n(t,i,4)])}return new Geometry/* Geometry */.V(t,w,null,ContentObjectType/* ContentObjectType */.X.Point,u)}const rt=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function ht(t,n=rt){const e=new Array(12);for(let c=0;c<4;c++)for(let t=0;t<3;t++)e[3*c+t]=n[c][t];const s=[0,1,2,2,3,0],o=[0,0,1],r=[0,0,0,0,0,0],h=[0,0,1,0,1,1,0,1],l=[255,255,255,255],u=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,s,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(o,r,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(h,s,2,!0)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(l,r,4,!0)]];return new Geometry/* Geometry */.V(t,u)}function lt(t,n,e,s,o,r=!0,h=!0){let l=0;const u=e,a=n;let f=(0,vec3f32.f)(0,l,0),p=(0,vec3f32.f)(0,l+a,0),i=(0,vec3f32.f)(0,-1,0),g=(0,vec3f32.f)(0,1,0);o&&(l=a,p=(0,vec3f32.f)(0,0,0),f=(0,vec3f32.f)(0,l,0),i=(0,vec3f32.f)(0,1,0),g=(0,vec3f32.f)(0,-1,0));const O=[p,f],m=[i,g],M=s+2,A=Math.sqrt(a*a+u*u);if(o)for(let w=s-1;w>=0;w--){const t=w*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);O.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,-u/A,a*Math.sin(t)/A);m.push(e)}else for(let w=0;w<s;w++){const t=w*(2*Math.PI/s),n=(0,vec3f32.f)(Math.cos(t)*u,l,Math.sin(t)*u);O.push(n);const e=(0,vec3f32.f)(a*Math.cos(t)/A,u/A,a*Math.sin(t)/A);m.push(e)}const I=new Array,y=new Array;if(r){for(let t=3;t<O.length;t++)I.push(1),I.push(t-1),I.push(t),y.push(0),y.push(0),y.push(0);I.push(O.length-1),I.push(2),I.push(1),y.push(0),y.push(0),y.push(0)}if(h){for(let t=3;t<O.length;t++)I.push(t),I.push(t-1),I.push(0),y.push(t),y.push(t-1),y.push(1);I.push(0),I.push(2),I.push(O.length-1),y.push(1),y.push(2),y.push(m.length-1)}const N=(0,FloatArray/* newFloatArray */.oe)(3*M);for(let c=0;c<M;c++)N[3*c]=O[c][0],N[3*c+1]=O[c][1],N[3*c+2]=O[c][2];const T=(0,FloatArray/* newFloatArray */.oe)(3*M);for(let c=0;c<M;c++)T[3*c]=m[c][0],T[3*c+1]=m[c][1],T[3*c+2]=m[c][2];const R=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(N,I,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(T,y,3,!0)]];return new Geometry/* Geometry */.V(t,R)}function ut(t,l,u,p,i,g,O){const m=i?(0,vec3f32.a)(i):(0,vec3f32.f)(1,0,0),M=g?(0,vec3f32.a)(g):(0,vec3f32.f)(0,0,0);O??=!0;const A=(0,vec3f32.c)();(0,vec3.n)(A,m);const I=(0,vec3f32.c)();(0,vec3.i)(I,A,Math.abs(l));const y=(0,vec3f32.c)();(0,vec3.i)(y,I,-.5),(0,vec3.g)(y,y,M);const N=(0,vec3f32.f)(0,1,0);Math.abs(1-(0,vec3.j)(A,N))<.2&&(0,vec3.s)(N,0,0,1);const T=(0,vec3f32.c)();(0,vec3.b)(T,A,N),(0,vec3.n)(T,T),(0,vec3.b)(N,T,A);const R=2*p+(O?2:0),b=p+(O?2:0),j=(0,FloatArray/* newFloatArray */.oe)(3*R),d=(0,FloatArray/* newFloatArray */.oe)(3*b),U=(0,FloatArray/* newFloatArray */.oe)(2*R),V=new Array(3*p*(O?4:2)),v=new Array(3*p*(O?4:2));O&&(j[3*(R-2)]=y[0],j[3*(R-2)+1]=y[1],j[3*(R-2)+2]=y[2],U[2*(R-2)]=0,U[2*(R-2)+1]=0,j[3*(R-1)]=j[3*(R-2)]+I[0],j[3*(R-1)+1]=j[3*(R-2)+1]+I[1],j[3*(R-1)+2]=j[3*(R-2)+2]+I[2],U[2*(R-1)]=1,U[2*(R-1)+1]=1,d[3*(b-2)]=-A[0],d[3*(b-2)+1]=-A[1],d[3*(b-2)+2]=-A[2],d[3*(b-1)]=A[0],d[3*(b-1)+1]=A[1],d[3*(b-1)+2]=A[2]);const x=(t,n,e)=>{V[t]=n,v[t]=e};let E=0;const F=(0,vec3f32.c)(),G=(0,vec3f32.c)();for(let n=0;n<p;n++){const t=n*(2*Math.PI/p);(0,vec3.i)(F,N,Math.sin(t)),(0,vec3.i)(G,T,Math.cos(t)),(0,vec3.g)(F,F,G),d[3*n]=F[0],d[3*n+1]=F[1],d[3*n+2]=F[2],(0,vec3.i)(F,F,u),(0,vec3.g)(F,F,y),j[3*n]=F[0],j[3*n+1]=F[1],j[3*n+2]=F[2],U[2*n]=n/p,U[2*n+1]=0,j[3*(n+p)]=j[3*n]+I[0],j[3*(n+p)+1]=j[3*n+1]+I[1],j[3*(n+p)+2]=j[3*n+2]+I[2],U[2*(n+p)]=n/p,U[2*n+1]=1;const e=(n+1)%p;x(E++,n,n),x(E++,n+p,n),x(E++,e,e),x(E++,e,e),x(E++,n+p,n),x(E++,e+p,e)}if(O){for(let t=0;t<p;t++){const n=(t+1)%p;x(E++,R-2,b-2),x(E++,t,b-2),x(E++,n,b-2)}for(let t=0;t<p;t++){const n=(t+1)%p;x(E++,t+p,b-1),x(E++,R-1,b-1),x(E++,n+p,b-1)}}const C=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(j,V,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(d,v,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(U,V,2,!0)]];return new Geometry/* Geometry */.V(t,C)}function ct(t,n,e,s,o,r){s=s||10,o=null==o||o,(0,Util/* assert */.vA)(n.length>1);const h=[[0,0,0]],l=[],u=[];for(let c=0;c<s;c++){l.push([0,-c-1,-(c+1)%s-1]);const t=c/s*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return at(t,u,n,h,l,o,r)}function at(r,u,f,i,g,O,m=(0,vec3f32.f)(0,0,0)){const N=u.length,T=(0,FloatArray/* newFloatArray */.oe)(f.length*N*3+(6*i.length||0)),R=(0,FloatArray/* newFloatArray */.oe)(f.length*N*3+(i?6:0)),b=new Array,j=new Array;let d=0,U=0;const V=(0,vec3f32.c)(),v=(0,vec3f32.c)(),x=(0,vec3f32.c)(),E=(0,vec3f32.c)(),F=(0,vec3f32.c)(),G=(0,vec3f32.c)(),C=(0,vec3f32.c)(),k=(0,vec3f64.c)(),q=(0,vec3f32.c)(),B=(0,vec3f32.c)(),z=(0,vec3f32.c)(),D=(0,vec3f32.c)(),X=(0,vec3f32.c)(),Z=(0,plane/* create */.vt)();(0,vec3.s)(q,0,1,0),(0,vec3.f)(v,f[1],f[0]),(0,vec3.n)(v,v),O?((0,vec3.g)(k,f[0],m),(0,vec3.n)(x,k)):(0,vec3.s)(x,0,0,1),Ot(v,x,q,q,F,x,mt),(0,vec3.c)(E,x),(0,vec3.c)(D,F);for(let t=0;t<i.length;t++)(0,vec3.i)(G,F,i[t][0]),(0,vec3.i)(k,x,i[t][2]),(0,vec3.g)(G,G,k),(0,vec3.g)(G,G,f[0]),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2];R[U++]=-v[0],R[U++]=-v[1],R[U++]=-v[2];for(let t=0;t<g.length;t++)b.push(g[t][0]>0?g[t][0]:-g[t][0]-1+i.length),b.push(g[t][1]>0?g[t][1]:-g[t][1]-1+i.length),b.push(g[t][2]>0?g[t][2]:-g[t][2]-1+i.length),j.push(0),j.push(0),j.push(0);let H=i.length;const J=i.length-1;for(let h=0;h<f.length;h++){let r=!1;if(h>0){(0,vec3.c)(V,v),h<f.length-1?((0,vec3.f)(v,f[h+1],f[h]),(0,vec3.n)(v,v)):r=!0,(0,vec3.g)(B,V,v),(0,vec3.n)(B,B),(0,vec3.g)(z,f[h-1],E),(0,plane/* fromPositionAndNormal */.O_)(f[h],B,Z);(0,plane/* intersectRay */.Ui)(Z,(0,ray/* wrap */.LV)(z,V),k)?((0,vec3.f)(k,k,f[h]),(0,vec3.n)(x,k),(0,vec3.b)(F,B,x),(0,vec3.n)(F,F)):Ot(B,E,D,q,F,x,mt),(0,vec3.c)(E,x),(0,vec3.c)(D,F)}O&&((0,vec3.g)(k,f[h],m),(0,vec3.n)(X,k));for(let t=0;t<N;t++)if((0,vec3.i)(G,F,u[t][0]),(0,vec3.i)(k,x,u[t][1]),(0,vec3.g)(G,G,k),(0,vec3.n)(C,G),R[U++]=C[0],R[U++]=C[1],R[U++]=C[2],(0,vec3.g)(G,G,f[h]),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2],!r){const n=(t+1)%N;b.push(H+t),b.push(H+N+t),b.push(H+n),b.push(H+n),b.push(H+N+t),b.push(H+N+n);for(let t=0;t<6;t++){const n=b.length-6;j.push(b[n+t]-J)}}H+=N}const K=f[f.length-1];for(let t=0;t<i.length;t++)(0,vec3.i)(G,F,i[t][0]),(0,vec3.i)(k,x,i[t][1]),(0,vec3.g)(G,G,k),(0,vec3.g)(G,G,K),T[d++]=G[0],T[d++]=G[1],T[d++]=G[2];const Q=U/3;R[U++]=v[0],R[U++]=v[1],R[U++]=v[2];const W=H-N;for(let t=0;t<g.length;t++)b.push(g[t][0]>=0?H+g[t][0]:-g[t][0]-1+W),b.push(g[t][2]>=0?H+g[t][2]:-g[t][2]-1+W),b.push(g[t][1]>=0?H+g[t][1]:-g[t][1]-1+W),j.push(Q),j.push(Q),j.push(Q);const Y=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(T,b,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(R,j,3,!0)]];return new Geometry/* Geometry */.V(r,Y)}function ft(t,n,e,s){(0,Util/* assert */.vA)(n.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,Util/* assert */.vA)(3===n[0].length,"createPolylineGeometry(): malformed vertex"),(0,Util/* assert */.vA)(null==e||e.length===n.length,"createPolylineGeometry: need same number of points and normals"),(0,Util/* assert */.vA)(null==e||3===e[0].length,"createPolylineGeometry(): malformed normal");const o=(0,DoubleArray/* newDoubleArray */.jh)(3*n.length),r=new Array(2*(n.length-1));let h=0,l=0;for(let c=0;c<n.length;c++){for(let t=0;t<3;t++)o[h++]=n[c][t];c>0&&(r[l++]=c-1,r[l++]=c)}const u=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(o,r,3,!0)]];if(e){const t=(0,FloatArray/* newFloatArray */.oe)(3*e.length);let s=0;for(let o=0;o<n.length;o++)for(let n=0;n<3;n++)t[s++]=e[o][n];u.push([VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(t,r,3,!0)])}return s&&u.push([VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(s,(0,Indices/* getContinuousIndexArray */.tM)(s.length/4),4)]),new Geometry/* Geometry */.V(t,u,null,ContentObjectType/* ContentObjectType */.X.Line)}function pt(t,n,e,s,o,r=0){const h=new Array(18),l=[[-e,r,o/2],[s,r,o/2],[0,n+r,o/2],[-e,r,-o/2],[s,r,-o/2],[0,n+r,-o/2]],u=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let c=0;c<6;c++)h[3*c]=l[c][0],h[3*c+1]=l[c][1],h[3*c+2]=l[c][2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(h,u,3,!0)]])}function it(t,n){const e=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION).data;for(let s=0;s<e.length;s+=3){const t=e[s],o=e[s+1],r=e[s+2];(0,vec3.s)(Mt,t,o,r),(0,vec3.e)(Mt,Mt,n),e[s]=Mt[0],e[s+1]=Mt[1],e[s+2]=Mt[2]}}function wt(t,n=t){const e=t.attributes,s=e.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,o=e.get(VertexAttribute/* VertexAttribute */.r.NORMAL).data;if(o){const t=n.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.NORMAL).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}if(s){const t=n.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}}function gt(t,s,o,h,l){return!(Math.abs((0,vec3.j)(s,t))>l)&&((0,vec3.b)(o,t,s),(0,vec3.n)(o,o),(0,vec3.b)(h,o,t),(0,vec3.n)(h,h),!0)}function Ot(t,n,e,s,o,r,h){return gt(t,n,o,r,h)||gt(t,e,o,r,h)||gt(t,s,o,r,h)}const mt=.99619469809,Mt=(0,vec3f32.c)();


/***/ }),

/***/ 24734:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(65061);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52712);
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84119);
/* harmony import */ var _Attribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(70807);
/* harmony import */ var _ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52997);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59568);
/* harmony import */ var _LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(32926);
/* harmony import */ var _Object3D_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(55103);
/* harmony import */ var _testUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(53834);
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(54671);
/* harmony import */ var _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96824);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class _{constructor(i){this._originSR=i,this._rootOriginId="root/"+(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_13__/* .generateUID */ .L)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=_testUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .gridLocalOriginFactory */ .Q.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(p,t,r.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]),p[0]<g&&p[1]<g&&p[2]<g){if(m){const r=Math.max(...p);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(p,t,m.vec3),p[0]=Math.abs(p[0]),p[1]=Math.abs(p[1]),p[2]=Math.abs(p[2]);if(Math.max(...p)<r)return m}return r}return m||(m=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.f)(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__/* .RibbonLineMaterial */ .W({width:2,color:i}),h.add(this._material);const t=new _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__/* .WebGLLayer */ .x(h,{pickable:!1}),r=new _Object3D_js__WEBPACK_IMPORTED_MODULE_8__/* .Object3D */ .B({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),p=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],j=p.length,u=new Array(3*j),l=new Array,b=.5*this._gridSize;for(let o=0;o<j;o++)u[3*o]=t[0]+(1&p[o]?b:-b),u[3*o+1]=t[1]+(2&p[o]?b:-b),u[3*o+2]=t[2]+(4&p[o]?b:-b),o>0&&l.push(o-1,o);(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_3__.projectBuffer)(u,this._originSR,0,u,r.renderSpatialReference,0,j);const M=new _Geometry_js__WEBPACK_IMPORTED_MODULE_6__/* .Geometry */ .V(this._material,[[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,new _Attribute_js__WEBPACK_IMPORTED_MODULE_4__/* .Attribute */ .n(u,l,3,!0)]],null,_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__/* .ContentObjectType */ .X.Line);h.add(M),_.addGeometry(M)}get test(){const t=this;return{set gridSize(i){t._gridSize=i}}}}const p=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ 74515:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G7: () => (/* binding */ M),
/* harmony export */   hz: () => (/* binding */ b)
/* harmony export */ });
/* unused harmony export defaultTolerance */
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52712);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32532);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10714);
/* harmony import */ var _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(44912);
/* harmony import */ var _IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(9286);
/* harmony import */ var _intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(99730);
/* harmony import */ var _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(689);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const w=1e-5;class T{constructor(t){this.options=new _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorOptions */ .H6,this._results=new A,this.transform=new _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .IntersectorTransform */ .dg,this.tolerance=w,this.verticalOffset=null,this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this._rayEnd=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayBeginTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this._rayEndTransformed=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.viewingMode=t??_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__/* .ViewingMode */ .RT.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,s){this.resetWithRay((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(t,r,this._ray),s)}resetWithRay(t,r){this.camera=r,t!==this._ray&&(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(t,this._ray),0!==this.options.verticalOffset?this.viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__/* .ViewingMode */ .RT.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,s,i,e){this.point=r,this.filterPredicate=i,this.tolerance=s??w;const n=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .getVerticalOffsetObject3D */ .ou)(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const s of t){const t=s.getSpatialQueryAccelerator?.();null!=t?(null!=n?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,n):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):s.objects.forAll((t=>r(t)))}}this.sortResults()}intersectObject(t){const r=t.geometries;if(!r)return;const i=t.effectiveTransformation,n=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .getVerticalOffsetObject3D */ .ou)(this.verticalOffset);for(const a of r){if(!a.visible)continue;const{material:r,id:o}=a;this.transform.setAndInvalidateLazyTransforms(i,a.transformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const h=this.transform.transform;null!=n&&(n.objectTransform=this.transform),r.intersect(a,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,i,e,n,a,d)=>{if(r>=0){if(null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const l=n?this._results.hud:this._results,c=n?n=>{const h=new _IntersectorTarget_js__WEBPACK_IMPORTED_MODULE_9__/* .HudTarget */ .B$(t,o,e,d);n.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .dz.HUD,h,r,i,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I,a)}:s=>s.set(_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .dz.OBJECT,{object:t,geometryId:o,triangleNr:e},r,i,h,a);if((null==l.min.drapedLayerOrder||a>=l.min.drapedLayerOrder)&&(null==l.min.dist||r<l.min.dist)&&c(l.min),this.options.store!==_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .StoreResults */ .oH.MIN&&(null==l.max.drapedLayerOrder||a<l.max.drapedLayerOrder)&&(null==l.max.dist||r>l.max.dist)&&c(l.max),this.options.store===_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .StoreResults */ .oH.ALL)if(n){const t=new I(this._ray);c(t),this._results.hud.all.push(t)}else{const t=new x(this._ray);c(t),this._results.all.push(t)}}}))}}sortResults(t=this._results.all){t.sort(((t,r)=>t.dist!==r.dist?(t.dist??0)-(r.dist??0):t.drapedLayerOrder!==r.drapedLayerOrder?(t.drapedLayerOrder??Number.MAX_VALUE)-(r.drapedLayerOrder??Number.MAX_VALUE):(r.drapedLayerGraphicOrder??Number.MIN_VALUE)-(t.drapedLayerGraphicOrder??Number.MIN_VALUE)))}}function b(t){return new T(t)}class A{constructor(){this.min=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()),this.max=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()),this.hud={min:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()),max:new I((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()),all:new Array},this.ground=new x((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}class x{get ray(){return this._ray}get distanceInRenderSpace(){return null!=this.dist?((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(N)):null}getIntersectionPoint(t){return!!(0,_intersectorUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .isValidIntersectorResult */ .i3)(this)&&((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(N,this.ray.direction,this.dist),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(t,this.ray.origin,N),!0)}getTransformedNormal(t){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(B,this.normal),B[3]=0,(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_4__.t)(B,B,this.transformation),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,B),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.n)(t,t)}constructor(t){this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .dz.OBJECT,this.normal=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.init(t)}init(t){this.dist=null,this.target=null,this.drapedLayerOrder=null,this.drapedLayerGraphicOrder=null,this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .dz.OBJECT,(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(t,this._ray)}set(r,i,e,n,a,h,d){this.intersector=r,this.dist=e,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,n??_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.d),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.transformation,a??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I),this.target=i,this.drapedLayerOrder=h,this.drapedLayerGraphicOrder=d}copy(r){(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(r.ray,this._ray),this.intersector=r.intersector,this.dist=r.dist,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.drapedLayerGraphicOrder=r.drapedLayerGraphicOrder,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,r.normal),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.transformation,r.transformation)}}class I extends x{constructor(){super(...arguments),this.intersector=_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .dz.HUD}}function M(t){return new x(t)}const N=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__.c)();


/***/ }),

/***/ 44912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H6: () => (/* binding */ e),
/* harmony export */   dz: () => (/* binding */ i),
/* harmony export */   oH: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var i,t;!function(i){i[i.OBJECT=0]="OBJECT",i[i.HUD=1]="HUD",i[i.TERRAIN=2]="TERRAIN",i[i.OVERLAY=3]="OVERLAY",i[i.I3S=4]="I3S",i[i.PCL=5]="PCL",i[i.LOD=6]="LOD",i[i.VOXEL=7]="VOXEL"}(i||(i={}));class e{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerUids=[],this.store=t.ALL}}!function(i){i[i.MIN=0]="MIN",i[i.MINMAX=1]="MINMAX",i[i.ALL=2]="ALL"}(t||(t={}));


/***/ }),

/***/ 9286:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B$: () => (/* binding */ r),
/* harmony export */   R6: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports LayerTarget, ObjectTarget, ValidHudTarget */
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(s,t,r){this.object=s,this.geometryId=t,this.triangleNr=r}}class r extends t{constructor(t,r,c,e){super(t,r,c),this.center=null!=e?(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.g)(e):null}}class c extends (/* unused pure expression or super */ null && (r)){}class e{constructor(s){this.layerUid=s}}class o extends e{constructor(s,t){super(s),this.graphicUid=t}}


/***/ }),

/***/ 32926:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony export LocalOrigin */
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(s,t){this.vec3=s,this.id=t}}function c(c,r,n,o){return new t((0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(c,r,n),o)}


/***/ }),

/***/ 45722:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   im: () => (/* binding */ c),
/* harmony export */   m$: () => (/* binding */ d),
/* harmony export */   qA: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony export UpdateParameters */
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/* harmony import */ var _core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99152);
/* harmony import */ var _AnimationTimer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(46068);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(91013);
/* harmony import */ var _ContentObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71077);
/* harmony import */ var _ContentObjectType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(52997);
/* harmony import */ var _DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13148);
/* harmony import */ var _materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29117);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class c extends _ContentObject_js__WEBPACK_IMPORTED_MODULE_6__/* .ContentObject */ .J{constructor(t,r){super(),this.type=_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_3__/* .ContentObjectType */ .X.Material,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._vertexAttributeLocations=_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_4__/* .Default3D */ .D,this._pp0=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(0,0,1),this._pp1=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(0,0,0),this._parameters=(0,_materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_5__/* .copyParameters */ .qu)(t,r),this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(e){return!1}setParameters(e,t=!0){(0,_materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_5__/* .updateParameters */ .MB)(this._parameters,e)&&(this.validateParameters(this._parameters),t&&this.parametersChanged())}validateParameters(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}shouldRender(e){return this.isVisible()&&this.isVisibleForOutput(e.output)&&(!this.parameters.isDecoration||e.bindParameters.decorations===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__/* .Decorations */ .ID.ON)&&0!=(this.parameters.renderOccluded&e.renderOccludedMask)}isVisibleForOutput(e){return!0}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){this.repository?.materialChanged(this)}intersectDraped(e,t,r,s,i,a){return this._pp0[0]=this._pp1[0]=s[0],this._pp0[1]=this._pp1[1]=s[1],this.intersect(e,t,r,this._pp0,this._pp1,i)}}class h extends _AnimationTimer_js__WEBPACK_IMPORTED_MODULE_7__/* .Parameters */ .H{constructor(e,t,r){super(t,r),this.camera=e}}var d;!function(e){e[e.None=0]="None",e[e.Occlude=1]="Occlude",e[e.Transparent=2]="Transparent",e[e.OccludeAndTransparent=4]="OccludeAndTransparent",e[e.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil",e[e.Opaque=16]="Opaque"}(d||(d={}));class u extends _core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .NoParameters */ .Y{constructor(){super(...arguments),this.renderOccluded=d.Occlude,this.isDecoration=!1}}


/***/ }),

/***/ 23183:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ I),
/* harmony export */   q: () => (/* binding */ E)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var E,I;!function(E){E[E.ADD=0]="ADD",E[E.UPDATE=1]="UPDATE",E[E.REMOVE=2]="REMOVE"}(E||(E={})),function(E){E[E.NONE=0]="NONE",E[E.VISIBILITY=1]="VISIBILITY",E[E.GEOMETRY=2]="GEOMETRY",E[E.TRANSFORMATION=4]="TRANSFORMATION",E[E.HIGHLIGHT=8]="HIGHLIGHT",E[E.OCCLUDEE=16]="OCCLUDEE"}(I||(I={}));


/***/ }),

/***/ 55103:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ V)
/* harmony export */ });
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(96245);
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72699);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(91013);
/* harmony import */ var _ContentObject_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(71077);
/* harmony import */ var _ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(52997);
/* harmony import */ var _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22775);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(58947);
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(50645);
/* harmony import */ var _materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29688);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class V extends _ContentObject_js__WEBPACK_IMPORTED_MODULE_11__/* .ContentObject */ .J{get geometries(){return this._geometries}get transformation(){return this._transformation??_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.I}set transformation(e){this._transformation=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._transformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),e),this._invalidateBoundingVolume(),this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(e){this._shaderTransformation=e?(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._shaderTransformation??(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),e):null,this._invalidateBoundingVolume(),this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}constructor(t={}){super(),this.type=_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_7__/* .ContentObjectType */ .X.Object,this._shaderTransformation=null,this._parentLayer=null,this._visible=!0,this.castShadow=t.castShadow??!0,this.usesVerticalDistanceToGround=t.usesVerticalDistanceToGround??!1,this.graphicUid=t.graphicUid,this.layerUid=t.layerUid,t.isElevationSource&&(this.lastValidElevationBB=new O),this._geometries=t.geometries?Array.from(t.geometries):new Array}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){(0,_Util_js__WEBPACK_IMPORTED_MODULE_8__/* .assert */ .vA)(null==this._parentLayer||null==t,"Object3D can only be added to a single Layer"),this._parentLayer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t),this._emit("geometryAdded",{object:this,geometry:t}),this._invalidateBoundingVolume()}removeGeometry(t){const e=this._geometries.splice(t,1)[0];e&&(this._emit("geometryRemoved",{object:this,geometry:e}),this._invalidateBoundingVolume())}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,e,i=!1){this._emit("attributesChanged",{object:this,geometry:t,attribute:e,sync:i}),(0,_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_9__/* .affectsGeometry */ .b)(e)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__/* .Object3DStateID */ .X(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .Object3DState */ .Mg.MaskOccludee);for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__/* .addObject3DStateID */ .Ci)(e.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const e of this._geometries)e.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__/* .removeObject3DStateID */ .PC)(e.occludees,t);this._emit("occlusionChanged",this)}highlight(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_12__/* .Object3DStateID */ .X(_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .Object3DState */ .Mg.Highlight);for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__/* .addObject3DStateID */ .Ci)(e.highlights,t);return this._emit("highlightChanged",this),t}removeHighlight(t){for(const e of this._geometries)e.highlights=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_10__/* .removeObject3DStateID */ .PC)(e.highlights,t);this._emit("highlightChanged",this)}getCombinedStaticTransformation(t,i){return (0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.transformation,t.transformation)}getCombinedShaderTransformation(t,i=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)()){return (0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(i,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new A,this._validateBoundingVolume(this._bvWorldSpace,U.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new A,this._validateBoundingVolume(this._bvObjectSpace,U.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,e){const i=e===U.ObjectSpace;for(const s of this._geometries){const e=s.boundingInfo;e&&M(e,t,i?s.transformation:this.getCombinedShaderTransformation(s))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.p)(t.bounds,t.min,t.max,.5);for(const s of this._geometries){const e=s.boundingInfo;if(null==e)continue;const r=i?s.transformation:this.getCombinedShaderTransformation(s),o=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .maxScale */ .hG)(r);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(B,e.center,r);const h=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.o)(B,t.bounds),m=e.radius*o;t.bounds[3]=Math.max(t.bounds[3],h+m)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this._parentLayer&&t&&this._parentLayer.notifyObjectBBChanged(this,t)}_emit(t,e){this._parentLayer&&this._parentLayer.events.emit(t,e)}get test(){const t=this;return{hasGeometry:e=>t._geometries.includes(e),getGeometryIndex:e=>t._geometries.indexOf(e)}}}class O{constructor(){this.min=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class A extends O{constructor(){super(...arguments),this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)()}}function M(t,e,s){const r=t.bbMin,o=t.bbMax;if((0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.y)(s)){const t=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(L,s[12],s[13],s[14]);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(T,r,t),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(C,o,t);for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],T[i]),e.max[i]=Math.max(e.max[i],C[i])}else if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(T,r,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.h)(r,o))for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],T[i]),e.max[i]=Math.max(e.max[i],T[i]);else{(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(C,o,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],T[t],C[t]),e.max[t]=Math.max(e.max[t],T[t],C[t]);for(let t=0;t<3;++t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(T,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(C,o),T[t]=o[t],C[t]=r[t],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(T,T,s),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(C,C,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],T[t],C[t]),e.max[t]=Math.max(e.max[t],T[t],C[t])}}}const L=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),T=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),B=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();var U;!function(t){t[t.WorldSpace=0]="WorldSpace",t[t.ObjectSpace=1]="ObjectSpace"}(U||(U={}));


/***/ }),

/***/ 22775:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65061);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(r){this.channel=r,this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_0__/* .generateUID */ .L)()}}


/***/ }),

/***/ 91337:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ W)
/* harmony export */ });
/* harmony import */ var _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90086);
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63678);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(94982);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32532);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96245);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class b{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(e,t){this.objectToBoundingSphere=e,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,t&&(void 0!==t.maximumObjectsPerNode&&(this._maximumObjectsPerNode=t.maximumObjectsPerNode),void 0!==t.maximumDepth&&(this._maximumDepth=t.maximumDepth))}destroy(){this._degenerateObjects.clear(),g.clearPool(),B[0]=null,P.prune(),H.prune()}add(e,t=e.length){this._objectCount+=t,this._grow(e,t);const o=g.acquire();for(let n=0;n<t;n++){const t=e[n];this._isDegenerate(t)?this._degenerateObjects.add(t):(o.init(this._root),this._add(t,o))}g.release(o)}remove(e,t=null){this._objectCount-=e.length;const o=g.acquire();for(const n of e){const e=null!=t?t:(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(this.objectToBoundingSphere(n),w);E(e[3])?(o.init(this._root),this._remove(n,e,o)):this._degenerateObjects.delete(n)}g.release(o),this._shrink()}update(e,t){if(!E(t[3])&&this._isDegenerate(e))return;const o=R(e);this.remove(o,t),this.add(o)}forEachAlongRay(e,t,o){const n=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__/* .wrap */ .LV)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNode(n,e))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObject(n,e)&&o(e)})),!0}))}forEachAlongRayWithVerticalOffset(e,t,o,n){const i=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__/* .wrap */ .LV)(e,t);this._forEachNode(this._root,(e=>{if(!this._intersectsNodeWithOffset(i,e,n))return!1;const t=e.node;return t.terminals.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),null!==t.residents&&t.residents.forAll((e=>{this._intersectsObjectWithOffset(i,e,n)&&o(e)})),!0}))}forEach(e){this._forEachNode(this._root,(t=>{const o=t.node;return o.terminals.forAll(e),null!==o.residents&&o.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}forEachDegenerateObject(e){this._degenerateObjects.forEach(e)}findClosest(e,t,i,s=(()=>!0),r=1/0){let h=1/0,a=1/0,l=null;const u=T(e,t),c=o=>{if(--r,!s(o))return;const n=this.objectToBoundingSphere(o);if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(i,n))return;const u=z(e,t,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(n)),c=u-n[3],m=u+n[3];c<h&&(h=c,a=m,l=o)};return this._forEachNodeDepthOrdered(this._root,(s=>{if(r<=0||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(i,s.bounds))return!1;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,u,s.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,s.bounds);if(z(e,t,v)>a)return!1;const h=s.node;return h.terminals.forAll((e=>c(e))),null!==h.residents&&h.residents.forAll((e=>c(e))),!0}),e,t),l}forEachInDepthRange(e,t,i,s,r,h,a){let l=-1/0,u=1/0;const c={setRange:e=>{i===b.DepthOrder.FRONT_TO_BACK?(l=Math.max(l,e.near),u=Math.min(u,e.far)):(l=Math.max(l,-e.far),u=Math.min(u,-e.near))}};c.setRange(s);const m=z(t,i,e),_=T(t,i),p=T(t,-i),g=e=>{if(!a(e))return;const o=this.objectToBoundingSphere(e),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(o),s=z(t,i,n)-m,_=s-o[3],p=s+o[3];_>u||p<l||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(h,o)||r(e,c)};this._forEachNodeDepthOrdered(this._root,(e=>{if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(h,e.bounds))return!1;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,_,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,e.bounds);if(z(t,i,v)-m>u)return!1;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.i)(v,p,e.halfSize),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.g)(v,v,e.bounds);if(z(t,i,v)-m<l)return!1;const s=e.node;return s.terminals.forAll((e=>g(e))),null!==s.residents&&s.residents.forAll((e=>g(e))),!0}),t,i)}forEachNode(e){this._forEachNode(this._root,(t=>e(t.node,t.bounds,t.halfSize,t.depth)))}forEachNeighbor(e,t){const o=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(t),s=t=>{const s=this.objectToBoundingSphere(t),r=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(s),h=o+r;return!((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(s),n)-h*h<=0)||e(t)};let r=!0;const h=e=>{r&&(r=s(e))};this._forEachNode(this._root,(e=>{const t=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),s=o+t;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.a)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(e.bounds),n)-s*s>0)return!1;const a=e.node;return a.terminals.forAll(h),r&&null!==a.residents&&a.residents.forAll(h),r})),r&&this.forEachDegenerateObject(h)}_intersectsNode(e,t){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__/* .rayBoxTest */ .O_)(e.origin,e.direction,C,y)}_intersectsNodeWithOffset(e,t,o){return j(t.bounds,2*-t.halfSize,C),j(t.bounds,2*t.halfSize,y),o.applyToMinMax(C,y),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__/* .rayBoxTest */ .O_)(e.origin,e.direction,C,y)}_intersectsObject(e,t){const o=this.objectToBoundingSphere(t);return!(o[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o,e)}_intersectsObjectWithOffset(e,t,o){const n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.j)(o.applyToBoundingSphere(n),e)}_forEachNode(e,t){let o=g.acquire().init(e);const n=[o];for(;0!==n.length;){if(o=n.pop(),t(o)&&!o.isLeaf())for(let e=0;e<o.node.children.length;e++){o.node.children[e]&&n.push(g.acquire().init(o).advance(e))}g.release(o)}}_forEachNodeDepthOrdered(e,t,o,n=b.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(e);const s=[i];for(N(o,n,K);0!==s.length;){if(i=s.pop(),t(i)&&!i.isLeaf())for(let e=7;e>=0;--e){const t=K[e];i.node.children[t]&&s.push(g.acquire().init(i).advance(t))}g.release(i)}}_remove(e,t,o){P.clear();const n=o.advanceTo(t,((e,t)=>{P.push(e.node),P.push(t)}))?o.node.terminals:o.node.residents;if(n.removeUnordered(e),0===n.length)for(let i=P.length-2;i>=0;i-=2){const e=P.data[i],t=P.data[i+1];if(!this._purge(e,t))break}}_nodeIsEmpty(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(let t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}_purge(e,o){return o>=0&&(e.children[o]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0})),!0)}_add(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}_split(e){const t=e.node.residents;e.node.residents=null;for(let o=0;o<t.length;o++){const n=g.acquire().init(e);this._add(t.at(o),n),g.release(n)}}_grow(e,t){if(0!==t&&(x(e,t,(e=>this.objectToBoundingSphere(e)),k),E(k[3])&&!this._fitsInsideTree(k)))if(this._nodeIsEmpty(this._root.node))(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(k,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const e=this._rootBoundsForRootAsSubNode(k);this._placingRootViolatesMaxDepth(e)?this._rebuildTree(k,e):this._growRootAsSubNode(e),g.release(e)}}_rebuildTree(e,t){(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(q,t.bounds),q[3]=t.halfSize,x([e,q],2,(e=>e),I);const o=g.acquire().init(this._root);this._root.initFrom(null,I,I[3]),this._root.increaseHalfSize(1.25),this._forEachNode(o,(e=>(this.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&this.add(e.node.residents.data,e.node.residents.length),!0))),g.release(o)}_placingRootViolatesMaxDepth(e){const t=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E;let o=0;return this._forEachNode(this._root,(e=>(o=Math.max(o,e.depth),o+t<=this._maximumDepth))),o+t>this._maximumDepth}_rootBoundsForRootAsSubNode(e){const t=e[3],o=e;let n=-1/0;const i=this._root.bounds,s=this._root.halfSize;for(let h=0;h<3;h++){const e=i[h]-s-(o[h]-t),r=o[h]+t-(i[h]+s),a=Math.max(0,Math.ceil(e/(2*s))),d=Math.max(0,Math.ceil(r/(2*s)))+1,l=2**Math.ceil(Math.log(a+d)*Math.LOG2E);n=Math.max(n,l),L[h].min=a,L[h].max=d}for(let h=0;h<3;h++){let e=L[h].min,t=L[h].max;const o=(n-(e+t))/2;e+=Math.ceil(o),t+=Math.floor(o);const r=i[h]-s-e*s*2;F[h]=r+(t+e)*s}const r=n*s;return F[3]=r*A,g.acquire().initFrom(null,F,r,0)}_growRootAsSubNode(e){const t=this._root.node;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.c)(k,this._root.bounds),k[3]=this._root.halfSize,this._root.init(e),e.advanceTo(k,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}_shrink(){for(;;){const e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let e=null;const t=this._root.node.children;let o=0,n=0;for(;n<t.length&&null==e;)o=n++,e=t[o];for(;n<t.length;)if(t[n++])return-1;return o}_isDegenerate(e){return!E(this.objectToBoundingSphere(e)[3])}_fitsInsideTree(e){const t=this._root.bounds,o=this._root.halfSize;return e[3]<=o&&e[0]>=t[0]-o&&e[0]<=t[0]+o&&e[1]>=t[1]-o&&e[1]<=t[1]+o&&e[2]>=t[2]-o&&e[2]<=t[2]+o}toJSON(){const{maximumDepth:e,maximumObjectsPerNode:t,_objectCount:o}=this,n=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:o,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:n}}}_nodeToJSON(e){const t=e.children.map((e=>e?this._nodeToJSON(e):null)),o=e.residents?.map((e=>this.objectToBoundingSphere(e))),n=e.terminals?.map((e=>this.objectToBoundingSphere(e)));return{children:t,residents:o,terminals:n}}static fromJSON(e){const t=new b((e=>e),{maximumDepth:e.maximumDepth,maximumObjectsPerNode:e.maximumObjectsPerNode});return t._objectCount=e.objectCount,t._root.initFrom(e.root.node,e.root.bounds,e.root.halfSize,e.root.depth),t}}class g{constructor(){this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}initFrom(e,t,o,n=this.depth){return this.node=null!=e?e:g.createEmptyNode(),null!=t&&(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,this.bounds),this.halfSize=o,this.depth=n,this}increaseHalfSize(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*A}advance(e){let t=this.node.children[e];t||(t=g.createEmptyNode(),this.node.children[e]=t),this.node=t,this.halfSize/=2,this.depth++;const o=M[e];return this.bounds[0]+=o[0]*this.halfSize,this.bounds[1]+=o[1]*this.halfSize,this.bounds[2]+=o[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(e,t,o=!1){for(;;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!o)return t&&t(this,-1),!1;this.node.residents=null}const n=this._childIndex(e);t&&t(this,n),this.advance(n)}}isLeaf(){return null!=this.node.residents}isTerminalFor(e){return e[3]>this.halfSize/2}_childIndex(e){const t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0}),residents:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0})}}static acquire(){return g._pool.acquire()}static release(e){g._pool.release(e)}static clearPool(){g._pool.prune()}}function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function O(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function j(e,t,o){o[0]=e[0]+t,o[1]=e[1]+t,o[2]=e[2]+t}function x(e,t,o,n){if(1===t){const t=o(e[0]);(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.h)(t,n)}else{C[0]=1/0,C[1]=1/0,C[2]=1/0,y[0]=-1/0,y[1]=-1/0,y[2]=-1/0;for(let n=0;n<t;n++){const t=o(e[n]);E(t[3])&&(S(C,t),O(y,t))}(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.p)(n,C,y,.5),n[3]=Math.max(y[0]-C[0],y[1]-C[1],y[2]-C[2])/2}}function N(e,t,o){if(!H.length)for(let n=0;n<8;++n)H.push({index:0,distance:0});for(let n=0;n<8;++n){const o=M[n];H.data[n].index=n,H.data[n].distance=z(e,t,o)}H.sort(((e,t)=>e.distance-t.distance));for(let n=0;n<8;++n)o[n]=H.data[n].index}function T(e,t){let o,n=1/0;for(let i=0;i<8;++i){const s=z(e,t,D[i]);s<n&&(n=s,o=D[i])}return o}function z(e,t,o){return t*(e[0]*o[0]+e[1]*o[1]+e[2]*o[2])}function E(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}g._pool=new _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(g),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(b||(b={}));const M=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],D=[(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(-1,1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,-1,1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,-1),(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.f)(1,1,1)],A=Math.sqrt(3),B=[null];function R(e){return B[0]=e,B}const F=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),v=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),y=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),P=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,w=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),k=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),q=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),I=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),L=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],H=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,K=[0,0,0,0,0,0,0,0],W=b;


/***/ }),

/***/ 1931:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AJ: () => (/* binding */ s),
/* harmony export */   K_: () => (/* binding */ l),
/* harmony export */   SE: () => (/* binding */ _),
/* harmony export */   V0: () => (/* binding */ c),
/* harmony export */   XO: () => (/* binding */ E),
/* harmony export */   aB: () => (/* binding */ a),
/* harmony export */   ez: () => (/* binding */ A),
/* harmony export */   xt: () => (/* binding */ S)
/* harmony export */ });
/* unused harmony export blendingColor */
/* harmony import */ var _TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(81868);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .separateBlendingParams */ .p3)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),N=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .simpleBlendingParams */ .ox)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE),s=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .simpleBlendingParams */ .ox)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ZERO,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA);function A(r){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType */ .y.FrontFace?null:r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType */ .y.Alpha?s:N}function E(r){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType */ .y.FrontFace?_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultDepthWriteParams */ .kn:null}const S=5e5,_={factor:-1,units:-2};function a(n){return n?_:null}function l(r,e=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.LESS){return r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType */ .y.NONE||r===_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_0__/* .TransparencyPassType */ .y.FrontFace?e:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.LEQUAL}


/***/ }),

/***/ 58123:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63678);
/* harmony import */ var _webgl_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16541);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(r,i,s){this._context=r,this._locations=s,this._textures=new Map,this._freeTextureUnits=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A({deallocator:null}),this._glProgram=r.programCache.acquire(i.generate("vertex"),i.generate("fragment"),s),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bindPass=i.generateBindPass(this),this.bindDraw=i.generateBindDraw(this),this._fragmentUniforms=(0,_webgl_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_1__/* .webglDebugEnabled */ .en)()?i.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get compiled(){return this._glProgram.compiled}setUniform1b(t,e){this._glProgram.setUniform1i(t,e?1:0)}setUniform1i(t,e){this._glProgram.setUniform1i(t,e)}setUniform1f(t,e){this._glProgram.setUniform1f(t,e)}setUniform2fv(t,e){this._glProgram.setUniform2fv(t,e)}setUniform3fv(t,e){this._glProgram.setUniform3fv(t,e)}setUniform4fv(t,e){this._glProgram.setUniform4fv(t,e)}setUniformMatrix3fv(t,e){this._glProgram.setUniformMatrix3fv(t,e)}setUniformMatrix4fv(t,e){this._glProgram.setUniformMatrix4fv(t,e)}setUniform1fv(t,e){this._glProgram.setUniform1fv(t,e)}setUniform1iv(t,e){this._glProgram.setUniform1iv(t,e)}setUniform2iv(t,e){this._glProgram.setUniform3iv(t,e)}setUniform3iv(t,e){this._glProgram.setUniform3iv(t,e)}setUniform4iv(t,e){this._glProgram.setUniform4iv(t,e)}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(t,e){if(null==e?.glName){const e=this._textures.get(t);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(t)),null}let r=this._textures.get(t);return null==r?(r=this._allocTextureUnit(e),this._textures.set(t,r)):r.texture=e,this._context.useProgram(this),this.setUniform1i(t,r.unit),this._context.bindTexture(e,r.unit),r.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((t,e)=>{this._context.bindTexture(t.texture,t.unit),this.setUniform1i(e,t.unit)})),null!=this._fragmentUniforms&&this._fragmentUniforms.forEach((t=>{"sampler2D"!==t.type&&"samplerCube"!==t.type||this._textures.has(t.name)||console.error(`Texture sampler ${t.name} has no bound texture`)}))}_allocTextureUnit(t){return{texture:t,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(t){this._freeTextureUnits.push(t.unit)}}


/***/ }),

/***/ 2007:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ h)
/* harmony export */ });
/* unused harmony export ValidatedRenderGeometry */
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(65061);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(96245);
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72699);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class h{constructor(r,s={}){this.geometry=r,this.screenToWorldRatio=1,this._transformation=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),this._shaderTransformation=null,this._boundingSphere=null,this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_5__/* .generateUID */ .L)(),this.layerUid=s.layerUid,this.graphicUid=s.graphicUid,this.castShadow=s.castShadow??!1,null!=s.objectShaderTransformation&&this.objectShaderTransformationChanged(s.objectShaderTransformation)}get transformation(){return this._transformation}set transformation(t){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.h)(this._transformation,t),this._boundingSphere=null}get boundingInfo(){return this.geometry.boundingInfo}objectShaderTransformationChanged(t){null==t?this._shaderTransformation=null:(this._shaderTransformation??=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__.a)(),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.m)(this._shaderTransformation,t,this.geometry.transformation)),this._boundingSphere=null}get boundingSphere(){return this.boundingInfo?(null==this._boundingSphere&&(this._boundingSphere??=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.c)(),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.e)(this._boundingSphere,this.boundingInfo.center,this.shaderTransformation),this._boundingSphere[3]=this.boundingInfo.radius*(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .maxScale */ .hG)(this.shaderTransformation)),this._boundingSphere):_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.N}get material(){return this.geometry.material}get type(){return this.geometry.type}get shaderTransformation(){return null==this._shaderTransformation?this.transformation:this._shaderTransformation}get attributes(){return this.geometry.attributes}get highlights(){return this.geometry.highlights}get occludees(){return this.geometry.occludees}get visible(){return this.geometry.visible}set visible(t){this.geometry.visible=t}}class m extends (/* unused pure expression or super */ null && (h)){}


/***/ }),

/***/ 38323:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ A)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var A;!function(A){A[A.INTEGRATED_MESH=0]="INTEGRATED_MESH",A[A.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",A[A.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",A[A.TRANSPARENT_MATERIAL=3]="TRANSPARENT_MATERIAL",A[A.TRANSPARENT_TERRAIN=4]="TRANSPARENT_TERRAIN",A[A.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=5]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",A[A.OCCLUDED_TERRAIN=6]="OCCLUDED_TERRAIN",A[A.OCCLUDER_MATERIAL=7]="OCCLUDER_MATERIAL",A[A.TRANSPARENT_OCCLUDER_MATERIAL=8]="TRANSPARENT_OCCLUDER_MATERIAL",A[A.OCCLUSION_PIXELS=9]="OCCLUSION_PIXELS",A[A.ANTIALIASING=10]="ANTIALIASING",A[A.COMPOSITE=11]="COMPOSITE",A[A.BLIT=12]="BLIT",A[A.SSAO=13]="SSAO",A[A.HIGHLIGHT=14]="HIGHLIGHT",A[A.SHADOW_HIGHLIGHT=15]="SHADOW_HIGHLIGHT",A[A.ENVIRONMENT_OPAQUE=16]="ENVIRONMENT_OPAQUE",A[A.ENVIRONMENT_TRANSPARENT=17]="ENVIRONMENT_TRANSPARENT",A[A.LASERLINES=18]="LASERLINES",A[A.LASERLINES_CONTRAST_CONTROL=19]="LASERLINES_CONTRAST_CONTROL",A[A.HUD_MATERIAL=20]="HUD_MATERIAL",A[A.LABEL_MATERIAL=21]="LABEL_MATERIAL",A[A.LINE_CALLOUTS=22]="LINE_CALLOUTS",A[A.LINE_CALLOUTS_HUD_DEPTH=23]="LINE_CALLOUTS_HUD_DEPTH",A[A.DRAPED_MATERIAL=24]="DRAPED_MATERIAL",A[A.DRAPED_WATER=25]="DRAPED_WATER",A[A.VOXEL=26]="VOXEL",A[A.MAX_SLOTS=27]="MAX_SLOTS"}(A||(A={}));


/***/ }),

/***/ 98546:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I$: () => (/* binding */ P),
/* harmony export */   a9: () => (/* binding */ o),
/* harmony export */   m: () => (/* binding */ i),
/* harmony export */   mK: () => (/* binding */ m),
/* harmony export */   qh: () => (/* binding */ f),
/* harmony export */   r8: () => (/* binding */ l),
/* harmony export */   sf: () => (/* binding */ s),
/* harmony export */   v0: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony exports renderWhenBitIsNotSet, replaceBitWhenDepthTestPasses */
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i={func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.LESS},s={func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS},e={mask:255},l={mask:0},t=a=>({function:{func:E.NOTEQUAL,ref:a,mask:a},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.KEEP}}),u=a=>({function:{func:E.ALWAYS,ref:a,mask:a},operation:{fail:n.KEEP,zFail:n.KEEP,zPass:n.REPLACE}}),f={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.ZERO}},o={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.REPLACE}},P={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.EQUAL,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP}},m={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.NOTEQUAL,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP}};


/***/ }),

/***/ 28443:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  g: () => (/* binding */ N)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/typedArrayUtil.js
var typedArrayUtil = __webpack_require__(86942);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/urlUtils.js
var urlUtils = __webpack_require__(20909);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestImageUtils.js
var requestImageUtils = __webpack_require__(34528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestUtils.js
var requestUtils = __webpack_require__(89125);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/assets.js
var assets = __webpack_require__(99050);
;// ../node_modules/@arcgis/core/libs/basisu/BasisU.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(){if(null==s){const t=t=>(0,assets/* getAssetUrl */.s)(`esri/libs/basisu/${t}`);s=__webpack_require__.e(/* import() */ 3964).then(__webpack_require__.bind(__webpack_require__, 63964)).then((e=>e.b)).then((({default:e})=>e({locateFile:t}).then((e=>(e.initializeBasis(),delete e.then,e)))))}return s}let s;

;// ../node_modules/@arcgis/core/libs/basisu/TextureFormat.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var TextureFormat_;!function(_){_[_.ETC1_RGB=0]="ETC1_RGB",_[_.ETC2_RGBA=1]="ETC2_RGBA",_[_.BC1_RGB=2]="BC1_RGB",_[_.BC3_RGBA=3]="BC3_RGBA",_[_.BC4_R=4]="BC4_R",_[_.BC5_RG=5]="BC5_RG",_[_.BC7_M6_RGB=6]="BC7_M6_RGB",_[_.BC7_M5_RGBA=7]="BC7_M5_RGBA",_[_.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",_[_.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",_[_.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",_[_.ATC_RGB=11]="ATC_RGB",_[_.ATC_RGBA=12]="ATC_RGBA",_[_.FXT1_RGB=17]="FXT1_RGB",_[_.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",_[_.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",_[_.ETC2_EAC_R11=20]="ETC2_EAC_R11",_[_.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",_[_.RGBA32=13]="RGBA32",_[_.RGB565=14]="RGB565",_[_.BGR565=15]="BGR565",_[_.RGBA4444=16]="RGBA4444"}(TextureFormat_||(TextureFormat_={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Util.js
var Util = __webpack_require__(19282);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let l=null,o=null;async function g(){return null==o&&(o=t(),l=await o),o}function u(e,t){if(null==l)return e.byteLength;const n=new l.BasisFile(new Uint8Array(e)),s=E(n)?m(n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),t):0;return n.close(),n.delete(),s}function c(e,t){if(null==l)return e.byteLength;const n=new l.KTX2File(new Uint8Array(e)),s=T(n)?m(n.getLevels(),n.getHasAlpha(),n.getWidth(),n.getHeight(),t):0;return n.close(),n.delete(),s}function m(e,t,s,r,i){const l=(0,Util/* getBytesPerElementFormat */.IB)(t?enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA8_ETC2_EAC:enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB8_ETC2),o=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(s*r*l*o)}function E(e){return e.getNumImages()>=1&&!e.isUASTC()}function T(e){return e.getFaces()>=1&&e.isETC1S()}async function h(e,t,n){null==l&&(l=await g());const s=new l.BasisFile(new Uint8Array(n));if(!E(s))return null;s.startTranscoding();const r=p(e,t,s.getNumLevels(0),s.getHasAlpha(),s.getImageWidth(0,0),s.getImageHeight(0,0),((e,t)=>s.getImageTranscodedSizeInBytes(0,e,t)),((e,t,n)=>s.transcodeImage(n,0,e,t,0,0)));return s.close(),s.delete(),r}async function _(e,t,n){null==l&&(l=await g());const s=new l.KTX2File(new Uint8Array(n));if(!T(s))return null;s.startTranscoding();const r=p(e,t,s.getLevels(),s.getHasAlpha(),s.getWidth(),s.getHeight(),((e,t)=>s.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,n)=>s.transcodeImage(n,e,0,0,t,0,-1,-1)));return s.close(),s.delete(),r}function p(e,a,l,o,g,u,c,m){const{compressedTextureETC:E,compressedTextureS3TC:T}=e.capabilities,[h,_]=E?o?[TextureFormat_.ETC2_RGBA,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA8_ETC2_EAC]:[TextureFormat_.ETC1_RGB,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB8_ETC2]:T?o?[TextureFormat_.BC3_RGBA,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[TextureFormat_.BC1_RGB,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT]:[TextureFormat_.RGBA32,enums/* PixelFormat */.Ab.RGBA],p=a.hasMipmap?l:Math.min(1,l),A=[];for(let t=0;t<p;t++)A.push(new Uint8Array(c(t,h))),m(t,h,A[t]);return a.internalFormat=_,a.hasMipmap=A.length>1,a.samplingMode=a.hasMipmap?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,a.width=g,a.height=u,new Texture/* Texture */.g(e,a,{type:"compressed",levels:A})}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js
var ContentObject = __webpack_require__(71077);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var ContentObjectType = __webpack_require__(52997);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const DDSUtil_o=Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),a=542327876,i=131072,DDSUtil_l=4;function DDSUtil_s(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function DDSUtil_u(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const DDSUtil_c=DDSUtil_s("DXT1"),DDSUtil_h=DDSUtil_s("DXT3"),DDSUtil_m=DDSUtil_s("DXT5"),d=31,DDSUtil_p=0,DDSUtil_g=1,D=2,C=3,f=4,w=7,DDSUtil_T=20,DDSUtil_=21;function DDSUtil_E(e,r,o){const a=S(o,r.hasMipmap??!1);if(null==a)throw new Error("DDS texture data is null");const{textureData:i,internalFormat:l,width:s,height:u}=a;return r.samplingMode=i.levels.length>1?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=l,r.width=s,r.height=u,new Texture/* Texture */.g(e,r,i)}function S(e,t){const n=new Int32Array(e,0,d);if(n[DDSUtil_p]!==a)return DDSUtil_o.error("Invalid magic number in DDS header"),null;if(!(n[DDSUtil_T]&DDSUtil_l))return DDSUtil_o.error("Unsupported format, must contain a FourCC code"),null;const s=n[DDSUtil_];let E,S;switch(s){case DDSUtil_c:E=8,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case DDSUtil_h:E=16,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case DDSUtil_m:E=16,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return DDSUtil_o.error("Unsupported FourCC code:",DDSUtil_u(s)),null}let A=1,M=n[f],x=n[C];0==(3&M)&&0==(3&x)||(DDSUtil_o.warn("Rounding up compressed texture size to nearest multiple of 4."),M=M+3&-4,x=x+3&-4);const R=M,X=x;let b,I;n[D]&i&&!1!==t&&(A=Math.max(1,n[w]));let v=n[DDSUtil_g]+4;const F=[];for(let r=0;r<A;++r)I=(M+3>>2)*(x+3>>2)*E,b=new Uint8Array(e,v,I),F.push(b),v+=I,M=Math.max(1,M>>1),x=Math.max(1,x>>1);return{textureData:{type:"compressed",levels:F},internalFormat:S,width:R,height:X}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js
var textureUtils = __webpack_require__(84147);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var lib_Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class N extends ContentObject/* ContentObject */.J{get parameters(){return this._parameters}constructor(e,r){super(),this._data=e,this.type=ContentObjectType/* ContentObjectType */.X.Texture,this._glTexture=null,this._loadingPromise=null,this._loadingController=null,this.events=new Evented/* default */.A,this._parameters={...M,...r},this._startPreload(e)}dispose(){this.unload(),this._data=this.frameUpdate=void 0}_startPreload(e){null!=e&&(e instanceof HTMLVideoElement?(this.frameUpdate=t=>this._frameUpdate(e,t),this._startPreloadVideoElement(e)):e instanceof HTMLImageElement&&this._startPreloadImageElement(e))}_startPreloadVideoElement(e){if(!((0,urlUtils/* isBlobProtocol */.w8)(e.src)||"auto"===e.preload&&e.crossOrigin)){e.preload="auto",e.crossOrigin="anonymous";const t=!e.paused;if(e.src=e.src,t&&e.autoplay){const t=()=>{e.removeEventListener("canplay",t),e.play()};e.addEventListener("canplay",t)}}}_startPreloadImageElement(e){(0,urlUtils/* isDataProtocol */.DB)(e.src)||(0,urlUtils/* isBlobProtocol */.w8)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}_createDescriptor(e){const t=new TextureDescriptor/* TextureDescriptor */.R;return t.wrapMode=this._parameters.wrap??enums/* TextureWrapMode */.pF.REPEAT,t.flipped=!this._parameters.noUnpackFlip,t.samplingMode=this._parameters.mipmap?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,t.hasMipmap=!!this._parameters.mipmap,t.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,t.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?e.parameters.maxMaxAnisotropy:1),t}get glTexture(){return this._glTexture}get memoryEstimate(){return this._glTexture?.gpuMemoryUsage||Texture_C(this._data,this._parameters)}load(e){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;const t=this._data;return null==t?(this._glTexture=new Texture/* Texture */.g(e,this._createDescriptor(e),null),this._glTexture):(this._parameters.reloadable||(this._data=void 0),"string"==typeof t?this._loadFromURL(e,t):t instanceof Image?this._loadFromImageElement(e,t):t instanceof HTMLVideoElement?this._loadFromVideoElement(e,t):t instanceof ImageData||t instanceof HTMLCanvasElement?this._loadFromImage(e,t):((0,typedArrayUtil/* isArrayBuffer */.mw)(t)||(0,typedArrayUtil/* isUint8Array */.mg)(t))&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.DDS_ENCODING?this._loadFromDDSData(e,t):((0,typedArrayUtil/* isArrayBuffer */.mw)(t)||(0,typedArrayUtil/* isUint8Array */.mg)(t))&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.KTX2_ENCODING?this._loadFromKTX2(e,t):((0,typedArrayUtil/* isArrayBuffer */.mw)(t)||(0,typedArrayUtil/* isUint8Array */.mg)(t))&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.BASIS_ENCODING?this._loadFromBasis(e,t):(0,typedArrayUtil/* isUint8Array */.mg)(t)?this._loadFromPixelData(e,t):(0,typedArrayUtil/* isArrayBuffer */.mw)(t)?this._loadFromPixelData(e,new Uint8Array(t)):null)}_frameUpdate(e,t){return null==this._glTexture||e.readyState<V.HAVE_CURRENT_DATA||t===e.currentTime?t:(this._glTexture.setData(e),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),e.currentTime)}_loadFromDDSData(e,t){return this._glTexture=DDSUtil_E(e,this._createDescriptor(e),t),this._glTexture}_loadFromKTX2(e,t){return this._loadAsync((()=>_(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromBasis(e,t){return this._loadAsync((()=>h(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromPixelData(e,t){(0,lib_Util/* assert */.vA)(this._parameters.width>0&&this._parameters.height>0);const r=this._createDescriptor(e);return r.pixelFormat=1===this._parameters.components?enums/* PixelFormat */.Ab.LUMINANCE:3===this._parameters.components?enums/* PixelFormat */.Ab.RGB:enums/* PixelFormat */.Ab.RGBA,r.width=this._parameters.width??0,r.height=this._parameters.height??0,this._glTexture=new Texture/* Texture */.g(e,r,t),this._glTexture}_loadFromURL(e,t){return this._loadAsync((async r=>{const s=await (0,requestImageUtils/* requestImage */.D)(t,{signal:r});return (0,promiseUtils/* throwIfAborted */.Te)(r),this._loadFromImage(e,s)}))}_loadFromImageElement(e,t){return t.complete?this._loadFromImage(e,t):this._loadAsync((async r=>{const s=await (0,requestUtils/* loadImageAsync */.Sx)(t,t.src,!1,r);return (0,promiseUtils/* throwIfAborted */.Te)(r),this._loadFromImage(e,s)}))}_loadFromVideoElement(e,t){return t.readyState>=V.HAVE_CURRENT_DATA?this._loadFromImage(e,t):this._loadFromVideoElementAsync(e,t)}_loadFromVideoElementAsync(t,r){return this._loadAsync((a=>new Promise(((n,l)=>{const m=()=>{r.removeEventListener("loadeddata",h),r.removeEventListener("error",_),(0,maybe/* removeMaybe */.xt)(p)},h=()=>{r.readyState>=V.HAVE_CURRENT_DATA&&(m(),n(this._loadFromImage(t,r)))},_=t=>{m(),l(t||new core_Error/* default */.A("Failed to load video"))};r.addEventListener("loadeddata",h),r.addEventListener("error",_);const p=(0,promiseUtils/* onAbort */.u7)(a,(()=>_((0,promiseUtils/* createAbortError */.NK)())))}))))}_loadFromImage(e,t){let r=t;if(!(r instanceof HTMLVideoElement)){const{maxTextureSize:t}=e.parameters;r=this._parameters.downsampleUncompressed?(0,textureUtils/* downsampleImage */.IR)(r,t):(0,textureUtils/* ensureImageMaxSize */.vM)(r,t)}const s=R(r);this._parameters.width=s.width,this._parameters.height=s.height;const a=this._createDescriptor(e);return a.pixelFormat=3===this._parameters.components?enums/* PixelFormat */.Ab.RGB:enums/* PixelFormat */.Ab.RGBA,a.width=s.width,a.height=s.height,this._glTexture=new Texture/* Texture */.g(e,a,r),this._glTexture}_loadAsync(e){const t=new AbortController;this._loadingController=t;const r=e(t.signal);this._loadingPromise=r;const s=()=>{this._loadingController===t&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null)};return r.then(s,s),r}unload(){if(this._glTexture=(0,maybe/* disposeMaybe */.WD)(this._glTexture),null!=this._loadingController){const e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit("unloaded")}}function Texture_C(e,t){if(null==e)return 0;if((0,typedArrayUtil/* isArrayBuffer */.mw)(e)||(0,typedArrayUtil/* isUint8Array */.mg)(e))return t.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.KTX2_ENCODING?c(e,!!t.mipmap):t.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.BASIS_ENCODING?u(e,!!t.mipmap):e.byteLength;const{width:r,height:s}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?R(e):t;return(t.mipmap?4/3:1)*r*s*(t.components||4)||0}function R(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}var V;!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(V||(V={}));const M={wrap:{s:enums/* TextureWrapMode */.pF.REPEAT,t:enums/* TextureWrapMode */.pF.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1};


/***/ }),

/***/ 81868:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var o;!function(o){o[o.Color=0]="Color",o[o.Alpha=1]="Alpha",o[o.FrontFace=2]="FrontFace",o[o.NONE=3]="NONE",o[o.COUNT=4]="COUNT"}(o||(o={}));


/***/ }),

/***/ 91080:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ C)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var C;!function(C){C[C.ASYNC=0]="ASYNC",C[C.SYNC=1]="SYNC"}(C||(C={}));


/***/ }),

/***/ 11459:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexArrayObject */ .Z{}


/***/ }),

/***/ 54671:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  x: () => (/* binding */ a)
});

// UNUSED EXPORTS: isWebGLLayer

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Handles.js
var Handles = __webpack_require__(1436);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObject.js
var ContentObject = __webpack_require__(71077);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ContentObjectType.js
var ContentObjectType = __webpack_require__(52997);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DirtyEvents.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const DirtyEvents_e=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","transformationChanged","shaderTransformationChanged","visibilityChanged","occlusionChanged","highlightChanged","geometryAdded","geometryRemoved","attributesChanged"];

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js
var Octree = __webpack_require__(91337);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(91080);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends ContentObject/* ContentObject */.J{get objects(){return this._objects}constructor(s,r,h=""){super(),this.stage=s,this.apiLayerUid=h,this.type=ContentObjectType/* ContentObjectType */.X.Layer,this.events=new Evented/* default */.A,this.visible=!0,this.pickable=!0,this.sliceable=!1,this._objects=new PooledArray/* default */.A,this._objectsAdded=new PooledArray/* default */.A,this._handles=new Handles/* default */.A,this.apiLayerUid=h,this.visible=r?.visible??!0,this.pickable=r?.pickable??!0,this.updatePolicy=r?.updatePolicy??UpdatePolicy/* UpdatePolicy */.q.ASYNC,this._disableOctree=r?.disableOctree??!1,s.add(this);for(const e of DirtyEvents_e)this._handles.add(this.events.on(e,(t=>s.handleEvent(e,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit("layerObjectAdded",{layer:this,object:e}),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:e}),null!=this._octree&&(this._objectsAdded.removeUnordered(e)||this._octree.remove([e])))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:e}),null!=this._octree&&this._objectsAdded.pushArray(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;if(this.events.emit("layerObjectsRemoved",{layer:this,objects:t}),null!=this._octree){for(let e=0;e<t.length;)this._objectsAdded.removeUnordered(t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}}sync(){this.updatePolicy!==UpdatePolicy/* UpdatePolicy */.q.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.length>50&&!this._disableOctree?(this._octree=new Octree/* default */.A((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear()),this._octree}invalidateSpatialQueryAccelerator(){this._octree=(0,maybe/* destroyMaybe */.pR)(this._octree),this._objectsAdded.clear()}}function n(e){return null!=e&&e.type===o.Layer}


/***/ }),

/***/ 91013:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Am: () => (/* binding */ a),
/* harmony export */   ID: () => (/* binding */ i),
/* harmony export */   JS: () => (/* binding */ u),
/* harmony export */   Mg: () => (/* binding */ t),
/* harmony export */   dd: () => (/* binding */ N),
/* harmony export */   it: () => (/* binding */ n),
/* harmony export */   s2: () => (/* binding */ e),
/* harmony export */   sf: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony export RenderRequestType */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,n,O,a,N,t,s,i,u;!function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"}(e||(e={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(n||(n={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(O||(O={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(a||(a={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(N||(N={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee",e[e.COUNT=2]="COUNT"}(t||(t={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(s||(s={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(i||(i={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(u||(u={}));


/***/ }),

/***/ 99730:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i3: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports isHudIntersectorResult, isObjectIntersectorResult, sliceFilterPredicate */
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/* harmony import */ var _chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28769);
/* harmony import */ var _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(44912);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(t){return null!=t?.dist}function c(r){return(e,o,c)=>(t(i,e,o,c),!n(r,i))}function s(t){return o(t)&&t.intersector===e.OBJECT&&!!t.target}function u(t){return o(t)&&t.intersector===e.HUD&&!!t.target&&"center"in t.target&&null!=t.target.center}const i=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)();


/***/ }),

/***/ 28953:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MD: () => (/* binding */ f),
/* harmony export */   cJ: () => (/* binding */ u),
/* harmony export */   hs: () => (/* binding */ m),
/* harmony export */   m0: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony exports getLabelSettings, getSettings */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(10714);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(e,t){return new h(e,v,t)}function i(e,t){const{curvatureDependent:a,scaleStart:r,scaleFallOffRange:n}=v;return new h(e,{curvatureDependent:{min:{curvature:a.min.curvature,tiltAngle:a.min.tiltAngle,scaleFallOffFactor:d.curvatureDependent.min.scaleFallOffFactor},max:{curvature:a.max.curvature,tiltAngle:a.max.tiltAngle,scaleFallOffFactor:d.curvatureDependent.max.scaleFallOffFactor}},scaleStart:r,scaleFallOffRange:n,minPixelSize:d.minPixelSize},t)}function c(e){return Math.abs(e*e*e)}function l(e,t,a){const r=a.parameters;return F.scale=Math.min(r.divisor/(t-r.offset),1),F.factor=c(e),F}function s(t,a){return (0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .lerp */ .Cc)(t*Math.max(a.scale,a.minScaleFactor),t,a.factor)}function o(e,t,a){const r=l(e,t,a);return r.minScaleFactor=0,s(1,r)}function u(e,t,a,r){r.scale=o(e,t,a),r.factor=0,r.minScaleFactor=a.minScaleFactor}function f(e,t,a=[0,0]){const r=Math.min(Math.max(t.scale,t.minScaleFactor),1);return a[0]=e[0]*r,a[1]=e[1]*r,a}function m(e,t,a,r){return s(e,l(t,a,r))}class h{get minScaleFactor(){return null!=this._fontHeight?Math.min(this._description.minPixelSize/this._fontHeight,1):0}constructor(e,t,a,n=p(),i){this._viewingMode=e,this._description=t,this._ellipsoidRadius=a,this.parameters=n,this._fontHeight=i,this._viewingMode===r.Local?(this._coverageCompensation=this._surfaceCoverageCompensationLocal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this._coverageCompensation=this._surfaceCoverageCompensationGlobal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}update(e){return(!this.parameters||this.parameters.camera.fovY!==e.fovY||this.parameters.camera.distance!==e.distance)&&(this._calculateParameters(e,this._ellipsoidRadius,this.parameters),!0)}overrideFontHeight(e){return e!==this._fontHeight?new h(this._viewingMode,this._description,this._ellipsoidRadius,this.parameters,e):this}_calculateParameters(e,t,a){const{scaleStart:r,scaleFallOffRange:n}=this._description,{fovY:i,distance:c}=e,l=this._calculateCurvatureDependentParameters(e,t),s=this._coverageCompensation(e,t,l),{tiltAngle:o,scaleFallOffFactor:u}=l,f=Math.sin(o)*c,m=.5*Math.PI-o-i*(.5-r*s),h=f/Math.cos(m),v=m+i*n*s,d=(h-u*(f/Math.cos(v)))/(1-u);return a.camera.fovY=e.fovY,a.camera.distance=e.distance,a.offset=d,a.divisor=h-d,a}_calculateCurvatureDependentParametersLocal(e,t,a=g){return a.tiltAngle=this._description.curvatureDependent.min.tiltAngle,a.scaleFallOffFactor=this._description.curvatureDependent.min.scaleFallOffFactor,a}_calculateCurvatureDependentParametersGlobal(t,r,n=g){const i=this._description.curvatureDependent,c=1+t.distance/r,l=Math.sqrt(c*c-1),[s,o]=[i.min.curvature,i.max.curvature],u=a((l-s)/(o-s),0,1),[f,m]=[i.min,i.max];return n.tiltAngle=e(f.tiltAngle,m.tiltAngle,u),n.scaleFallOffFactor=e(f.scaleFallOffFactor,m.scaleFallOffFactor,u),n}_surfaceCoverageCompensationLocal(e,t,a){return(e.fovY-a.tiltAngle)/e.fovY}_surfaceCoverageCompensationGlobal(e,t,a){const r=t*t,n=a.tiltAngle+.5*Math.PI,{fovY:i,distance:c}=e,l=c*c+r-2*Math.cos(n)*c*t,s=Math.sqrt(l),o=Math.sqrt(l-r);return(Math.acos(o/s)-Math.asin(t/(s/Math.sin(n)))+.5*i)/i}}const v={curvatureDependent:{min:{curvature:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(10),tiltAngle:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(12),scaleFallOffFactor:.5},max:{curvature:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(70),tiltAngle:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},d={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};function p(){return{camera:{distance:0,fovY:0},divisor:0,offset:0}}const F={scale:0,factor:0,minScaleFactor:0},g={tiltAngle:0,scaleFallOffFactor:0};


/***/ }),

/***/ 53834:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ n),
/* harmony export */   Q: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n={stableRendering:!1},e={rootOrigin:null};


/***/ }),

/***/ 84147:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IR: () => (/* binding */ i),
/* harmony export */   Mv: () => (/* binding */ n),
/* harmony export */   vM: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=16;function n(t){return Math.ceil(t/e)*e}function i(t,e){const n=1048576,i=4096,h=2;let o=t.width*t.height;if(o<i)return t instanceof ImageData?a(t):t;let c=t.width,u=t.height;do{c=Math.ceil(c/h),u=Math.ceil(u/h),o=c*u}while(o>n||null!=e&&(c>e||u>e));return r(t,c,u)}function h(t,e){const n=Math.max(t.width,t.height);if(n<=e)return t;const i=e/n;return r(t,Math.round(t.width*i),Math.round(t.height*i))}function r(t,e,n){if(t instanceof ImageData)return r(a(t),e,n);const i=document.createElement("canvas");i.width=e,i.height=n;return i.getContext("2d").drawImage(t,0,0,i.width,i.height),i}function a(e){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");if(null==i)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("Failed to create 2d context from HTMLCanvasElement");return i.putImageData(e,0,0),n}


/***/ }),

/***/ 689:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dg: () => (/* binding */ y),
/* harmony export */   ou: () => (/* binding */ I)
/* harmony export */ });
/* unused harmony exports I3SVerticalOffsetGlobalViewingMode, Object3DVerticalOffsetGlobalViewingMode, TerrainVerticalOffsetGlobalViewingMode, getVerticalOffsetI3S, getVerticalOffsetTerrain, terrainId */
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(46615);
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76287);
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37046);
/* harmony import */ var _chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56192);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22279);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96245);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10714);
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(29709);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class y{constructor(){this._transform=(0,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a)(),this._transformInverse=new x({value:this._transform},_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.i,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a),this._transformInverseTranspose=new x(this._transformInverse,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.t,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a),this._transformTranspose=new x({value:this._transform},_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.t,_chunks_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__.a),this._transformInverseRotation=new x({value:this._transform},_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.e,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__.a)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.h)(this._transform,t)}multiplyTransform(t){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.m)(this._transform,this._transform,t)}set(t){(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.h)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this._invalidateLazyTransforms()}}class x{constructor(t,s,r){this._original=t,this._update=s,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}class d{constructor(t=0){this.offset=t,this.tmpVertex=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)()}applyToVertex(t,s,r){const e=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(R,t,s,r),o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.g)(q,e,this.localOrigin),i=this.offset/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(o);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(this.tmpVertex,e,o,i),this.tmpVertex}applyToAabb(t){const s=B,r=D,e=G;for(let a=0;a<3;++a)s[a]=t[0+a]+this.localOrigin[a],r[a]=t[3+a]+this.localOrigin[a],e[a]=s[a];const o=this.applyToVertex(s[0],s[1],s[2]);for(let a=0;a<3;++a)t[a]=o[a],t[a+3]=o[a];const i=s=>{const r=this.applyToVertex(s[0],s[1],s[2]);for(let e=0;e<3;++e)t[e]=Math.min(t[e],r[e]),t[e+3]=Math.max(t[e+3],r[e])};for(let a=1;a<8;++a){for(let t=0;t<3;++t)e[t]=0==(a&1<<t)?s[t]:r[t];i(e)}let n=0;for(let a=0;a<3;++a){s[a]*r[a]<0&&(n|=1<<a)}if(0!==n&&7!==n)for(let a=0;a<8;++a)if(0==(n&a)){for(let t=0;t<3;++t)e[t]=0!=(n&1<<t)?0:0!=(a&1<<t)?s[t]:r[t];i(e)}for(let a=0;a<3;++a)t[a]-=this.localOrigin[a],t[a+3]-=this.localOrigin[a];return t}}class V{constructor(t=0){this.componentLocalOriginLength=0,this._tmpVertex=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),this._mbs=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this._obb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__/* .create */ .vt)(),this._totalOffset=0,this._offset=0,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(t)}applyToVertex(t,s,r){const e=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(R,t,s,r),o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(q,t,s,r+this.componentLocalOriginLength),i=this._totalOffset/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(o);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(this._tmpVertex,e,o,i),this._tmpVertex}applyToAabb(t){const s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(R,t[0],t[1],t[2]+this.componentLocalOriginLength),r=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(q,t[3],t[4],t[5]+this.componentLocalOriginLength),e=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.z)(B,s),o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.z)(D,r),i=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.w)(G,s),n=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.w)(S,r),f=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.x)(C,i,n);f[0]=e[0]*o[0]<0?0:f[0],f[1]=e[1]*o[1]<0?0:f[1],f[2]=e[2]*o[2]<0?0:f[2];const l=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(f);if(l<this._totalOffset)return t[0]-=s[0]<0?this._totalOffset:0,t[1]-=s[1]<0?this._totalOffset:0,t[2]-=s[2]<0?this._totalOffset:0,t[3]+=r[0]>0?this._totalOffset:0,t[4]+=r[1]>0?this._totalOffset:0,t[5]+=r[2]>0?this._totalOffset:0,t;const u=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.D)(C,i,n),v=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(u),O=this._totalOffset/v,g=this._totalOffset/l;return t[0]+=s[0]*(s[0]>0?O:g),t[1]+=s[1]*(s[1]>0?O:g),t[2]+=s[2]*(s[2]>0?O:g),t[3]+=r[0]*(r[0]<0?O:g),t[4]+=r[1]*(r[1]<0?O:g),t[5]+=r[2]*(r[2]<0?O:g),t}applyToMbs(t){const s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(t),r=this._totalOffset/s;return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(this._mbs,t,t,r),this._mbs[3]=t[3]+t[3]*this._totalOffset/s,this._mbs}applyToObb(t){return (0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__/* .computeOffsetObb */ .gm)(t,this._totalOffset,this._totalOffset,_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__/* .ViewingMode */ .RT.Global,this._obb),this._obb}}class L{constructor(t=0){this.offset=t,this.sphere=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.tmpVertex=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)()}applyToVertex(t,s,r){const e=this.objectTransform.transform,o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(R,t,s,r),i=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.e)(o,o,e),n=this.offset/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(i);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(i,i,i,n);const f=this.objectTransform.inverse;return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.e)(this.tmpVertex,i,f),this.tmpVertex}applyToMinMax(t,s){const r=this.offset/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(t);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(t,t,t,r);const e=this.offset/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(s);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(s,s,s,e)}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(t),r=this.offset/s;return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.q)(this.sphere,t,t,r),this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const j=new L;function I(t){return null!=t?(j.offset=t,j):null}const M=new V;function w(t){return null!=t?(M.offset=t,M):null}const k=new d;function z(t){return null!=t?(k.offset=t,k):null}const A="terrain",R=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),q=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),B=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),D=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),G=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),S=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__.c)();


/***/ }),

/***/ 75268:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $p: () => (/* binding */ i),
/* harmony export */   Qx: () => (/* binding */ n),
/* harmony export */   _y: () => (/* binding */ c),
/* harmony export */   e_: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(s=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)()){this.intensity=s}}class c{constructor(i=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)(),c=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(.57735,.57735,.57735)){this.intensity=i,this.direction=c}}class n{constructor(i=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)(),c=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(.57735,.57735,.57735),n=!0,r=1,h=1){this.intensity=i,this.direction=c,this.castShadows=n,this.specularStrength=r,this.environmentStrength=h}}class r{constructor(){this.r=[0],this.g=[0],this.b=[0]}}


/***/ }),

/***/ 9409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  T: () => (/* binding */ _),
  u: () => (/* binding */ SceneLighting_l)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js
var Lightsources = __webpack_require__(75268);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function LongVectorMath_e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function LongVectorMath_l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u(t){return(t+1)*(t+1)}function l(n){return (0,mathUtils/* clamp */.qE)(Math.floor(Math.sqrt(n)-1),0,2)}function m(t,n,o){const r=t[0],e=t[1],s=t[2],i=o||[];return i.length=u(n),n>=0&&(i[0]=.28209479177),n>=1&&(i[1]=.4886025119*r,i[2]=.4886025119*s,i[3]=.4886025119*e),n>=2&&(i[4]=1.09254843059*r*e,i[5]=1.09254843059*e*s,i[6]=.31539156525*(3*s*s-1),i[7]=1.09254843059*r*s,i[8]=.54627421529*(r*r-e*e)),i}function p(t,n){const o=u(t),r=n||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=o;for(let e=0;e<o;e++)r.r[e]=r.g[e]=r.b[e]=0;return r}function y(t,o){const r=l(o.r.length);for(const e of t)(0,vec3.E)(P,e.direction),m(P,r,v),n(v,k),LongVectorMath_e(v,e.intensity[0],I),LongVectorMath_l(o.r,I),LongVectorMath_e(v,e.intensity[1],I),LongVectorMath_l(o.g,I),LongVectorMath_e(v,e.intensity[2],I),LongVectorMath_l(o.b,I);return o}function b(t,n){m(P,0,v);for(const o of t)n.r[0]+=v[0]*k[0]*o.intensity[0]*4*Math.PI,n.g[0]+=v[0]*k[0]*o.intensity[1]*4*Math.PI,n.b[0]+=v[0]*k[0]*o.intensity[2]*4*Math.PI;return n}function M(t,n,e,s){p(n,s),(0,vec3.s)(e.intensity,0,0,0);let i=!1;const u=S,l=d,m=j;u.length=0,l.length=0,m.length=0;for(const o of t)o instanceof Lightsources/* MainLight */.Qx&&!i?((0,vec3.c)(e.direction,o.direction),(0,vec3.c)(e.intensity,o.intensity),e.specularStrength=o.specularStrength,e.environmentStrength=o.environmentStrength,e.castShadows=o.castShadows,i=!0):o instanceof Lightsources/* MainLight */.Qx||o instanceof Lightsources/* FillLight */._y?u.push(o):o instanceof Lightsources/* AmbientLight */.$p?l.push(o):o instanceof Lightsources/* SphericalHarmonicsAmbientLight */.e_&&m.push(o);y(u,s),b(l,s);for(const o of m)LongVectorMath_l(s.r,o.r),LongVectorMath_l(s.g,o.g),LongVectorMath_l(s.b,o.b)}const S=[],d=[],j=[],v=[0],I=[0],P=(0,vec3f64.c)(),k=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class g{constructor(){this.color=(0,vec3f64.c)(),this.intensity=1}}class SceneLighting_m{constructor(){this.direction=(0,vec3f64.c)(),this.ambient=new g,this.diffuse=new g}}const SceneLighting_l=.4;class _{constructor(){this._shOrder=2,this._legacy=new SceneLighting_m,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new Lightsources/* SphericalHarmonicsAmbientLight */.e_,this._mainLight=new Lightsources/* MainLight */.Qx((0,vec3f64.c)(),(0,vec3f64.f)(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){M(i,this._shOrder,this._mainLight,this._sphericalHarmonics),(0,vec3.c)(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,(0,vec3.i)(this._legacy.diffuse.color,this._mainLight.intensity,r),(0,vec3.c)(SceneLighting_p,this._legacy.diffuse.color),(0,vec3.i)(SceneLighting_p,SceneLighting_p,SceneLighting_l*this.globalFactor),(0,vec3.g)(this._legacy.ambient.color,this._legacy.ambient.color,SceneLighting_p)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),(0,vec3.c)(this._mainLight.direction,i.mainLight.direction),(0,vec3.c)(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if((0,vec3.p)(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=(0,mathUtils/* lerp */.Cc)(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=(0,mathUtils/* lerp */.Cc)(s.mainLight.specularStrength,h.mainLight.specularStrength,n),(0,vec3.c)(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=(0,mathUtils/* lerp */.Cc)(s.globalFactor,h.globalFactor,n),this.noonFactor=(0,mathUtils/* lerp */.Cc)(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=(0,mathUtils/* lerp */.Cc)(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=(0,mathUtils/* lerp */.Cc)(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=(0,mathUtils/* lerp */.Cc)(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const SceneLighting_p=(0,vec3f64.c)();


/***/ }),

/***/ 32504:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  v: () => (/* binding */ f)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js
var TriangleMaterial = __webpack_require__(52873);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var VisualVariablePassParameters = __webpack_require__(17745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js
var ColorMaterial_glsl = __webpack_require__(17504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class y extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.color=vec4f64.Z}}class T extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,T.shader.get().build(this.configuration),DefaultVertexAttributeLocations/* Default3D */.D)}_createPipeline(e,t){const i=this.configuration,s=e===TransparencyPassType/* TransparencyPassType */.y.NONE,c=e===TransparencyPassType/* TransparencyPassType */.y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:i.output!==ShaderOutput/* ShaderOutput */.V.Color&&i.output!==ShaderOutput/* ShaderOutput */.V.Alpha||!i.transparent?null:s?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(e),culling:(0,renderState/* cullingParams */.Xt)(i.cullFace),depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(e)},depthWrite:(s||c)&&i.writeDepth?renderState/* defaultDepthWriteParams */.kn:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:i.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:i.hasOccludees?t?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:s||c?i.polygonOffset?O:null:(0,OrderIndependentTransparency/* getOITPolygonOffset */.aB)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._createPipeline(this.configuration.transparencyPassType,!0),this._createPipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}T.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(ColorMaterial_glsl.C,(()=>__webpack_require__.e(/* import() */ 4788).then(__webpack_require__.bind(__webpack_require__, 34788))));const O={factor:1,units:1};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.hasSlicePlane=!1,this.hasVertexColors=!1,this.transparent=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.objectAndLayerIdColorInstanced=!1,this.vvColor=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],i.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],i.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],i.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"polygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],i.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],i.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],i.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],i.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],i.prototype,"vvOpacity",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class f extends TriangleMaterial/* TriangleMaterial */.W{constructor(e){super(e,new d),this.supportsEdges=!0,this._configuration=new i}getConfiguration(e,r){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this._isTransparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=r.transparencyPassType,this._configuration.enableOffset=r.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.multipassEnabled=r.multipassEnabled,this._configuration.cullAboveGround=r.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration}produces(e,r){if(r===ShaderOutput/* ShaderOutput */.V.Color||r===ShaderOutput/* ShaderOutput */.V.Alpha||r===ShaderOutput/* ShaderOutput */.V.Highlight||r===ShaderOutput/* ShaderOutput */.V.Depth&&this.parameters.writeLinearDepth||r===ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor){if(e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)return!0;if(r===ShaderOutput/* ShaderOutput */.V.Highlight)return e===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL;return e===(this._isTransparent?this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL)}return!1}createGLMaterial(e){return new m(e)}createBufferWriter(){const e=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION);return (0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?e.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):e.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR),new DefaultBufferWriter/* DefaultBufferWriter */.Z(e)}get _isTransparent(){return this.parameters.color[3]<1||this.parameters.forceTransparentMode}}class m extends GLMaterial/* default */.A{_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){return this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||this._updateOccludeeState(e),this.ensureTechnique(T,e)}}class d extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.color=vec4f64.Z,this.forceTransparentMode=!1,this.writeDepth=!0,this.writeLinearDepth=!1,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.hasOccludees=!1}}


/***/ }),

/***/ 25146:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50645);
/* harmony import */ var _internal_bufferWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(81500);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(t){this.vertexBufferLayout=t}elementCount(e){return e.attributes.get(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.POSITION).indices.length}write(t,r,i,o,s){(0,_internal_bufferWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .writeDefaultAttributes */ .SA)(i,this.vertexBufferLayout,t,r,o,s)}}


/***/ }),

/***/ 27776:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ci: () => (/* binding */ I),
/* harmony export */   Dq: () => (/* binding */ t),
/* harmony export */   dB: () => (/* binding */ v),
/* harmony export */   zK: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports PositionColorLayoutObjectAndLayerId, PositionLayoutObjectAndLayerId */
/* harmony import */ var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11110);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const I=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION),c=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0),v=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.COLOR),f=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR),t=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR),r=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.COLOR).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR);


/***/ }),

/***/ 54482:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  $U: () => (/* binding */ I)
});

// UNUSED EXPORTS: DefaultGLMaterial, DefaultMaterialParameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js
var NormalAttribute_glsl = __webpack_require__(81283);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js
var Normals_glsl = __webpack_require__(46971);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js
var GLTextureMaterial = __webpack_require__(89140);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js
var verticalOffsetUtils = __webpack_require__(689);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js
var DefaultMaterialTechnique = __webpack_require__(73418);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class c extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.alphaDiscardMode=basicInterfaces/* AlphaDiscardMode */.sf.Opaque,this.doubleSidedMode=Normals_glsl/* NormalsDoubleSidedMode */.W.None,this.pbrMode=PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Disabled,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.normalType=NormalAttribute_glsl/* NormalType */.W.Attribute,this.textureCoordinateType=TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.None,this.customDepthTest=basicInterfaces/* DepthTestFunction */.it.Less,this.spherical=!1,this.hasVertexColors=!1,this.hasSymbolColors=!1,this.hasVerticalOffset=!1,this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.hasColorTexture=!1,this.hasMetallicRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.hasScreenSizePerspective=!1,this.hasVertexTangents=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.hasModelTransformation=!1,this.offsetBackfaces=!1,this.vvSize=!1,this.vvColor=!1,this.receiveShadows=!1,this.receiveAmbientOcclusion=!1,this.textureAlphaPremultiplied=!1,this.instanced=!1,this.instancedColor=!1,this.objectAndLayerIdColorInstanced=!1,this.instancedDoublePrecision=!1,this.doublePrecisionRequiresObfuscation=!1,this.writeDepth=!0,this.transparent=!1,this.enableOffset=!0,this.cullAboveGround=!1,this.snowCover=!1,this.hasColorTextureTransform=!1,this.hasEmissionTextureTransform=!1,this.hasNormalTextureTransform=!1,this.hasOcclusionTextureTransform=!1,this.hasMetallicRoughnessTextureTransform=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],c.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* AlphaDiscardMode */.sf.COUNT})],c.prototype,"alphaDiscardMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:Normals_glsl/* NormalsDoubleSidedMode */.W.COUNT})],c.prototype,"doubleSidedMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.COUNT})],c.prototype,"pbrMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],c.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],c.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:NormalAttribute_glsl/* NormalType */.W.COUNT})],c.prototype,"normalType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TextureCoordinateAttribute_glsl/* TextureCoordinateAttributeType */.q.COUNT})],c.prototype,"textureCoordinateType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* DepthTestFunction */.it.COUNT})],c.prototype,"customDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasSymbolColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasSliceHighlight",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasColorTexture",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasMetallicRoughnessTexture",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasEmissionTexture",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasOcclusionTexture",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasNormalTexture",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasVertexTangents",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasModelTransformation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"offsetBackfaces",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"receiveShadows",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"receiveAmbientOcclusion",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"textureAlphaPremultiplied",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"instanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"instancedColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"instancedDoublePrecision",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"snowCover",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasColorTextureTransform",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasEmissionTextureTransform",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasNormalTextureTransform",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasOcclusionTextureTransform",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],c.prototype,"hasMetallicRoughnessTextureTransform",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],c.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],c.prototype,"hasVvInstancing",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],c.prototype,"useCustomDTRExponentForWater",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],c.prototype,"supportsTextureAtlas",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],c.prototype,"useFillLights",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/RealisticTree.glsl.js
var RealisticTree_glsl = __webpack_require__(3458);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class RealisticTreeTechnique_t extends DefaultMaterialTechnique/* DefaultMaterialTechnique */.R5{initializeConfiguration(i,a){super.initializeConfiguration(i,a),a.hasMetallicRoughnessTexture=!1,a.hasEmissionTexture=!1,a.hasOcclusionTexture=!1,a.hasNormalTexture=!1,a.hasModelTransformation=!1,a.normalType=NormalAttribute_glsl/* NormalType */.W.Attribute,a.doubleSidedMode=Normals_glsl/* NormalsDoubleSidedMode */.W.WindingOrder,a.hasVertexTangents=!1}initializeProgram(e){return this._initializeProgram(e,RealisticTreeTechnique_t.shader)}}RealisticTreeTechnique_t.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(RealisticTree_glsl.R,(()=>__webpack_require__.e(/* import() */ 1198).then(__webpack_require__.bind(__webpack_require__, 91198))));

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class I extends Material/* Material */.im{constructor(e){super(e,j),this.supportsEdges=!0,this._configuration=new c,this._vertexBufferLayout=L(this.parameters)}isVisibleForOutput(e){return e!==ShaderOutput/* ShaderOutput */.V.Shadow&&e!==ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight&&e!==ShaderOutput/* ShaderOutput */.V.ShadowHighlight||this.parameters.castShadows}isVisible(){const e=this.parameters;if(!super.isVisible()||0===e.layerOpacity)return!1;const{hasInstancedColor:t,hasVertexColors:r,hasSymbolColors:s,vvColor:a}=e,i="replace"===e.colorMixMode,o=e.opacity>0,n=e.externalColor&&e.externalColor[3]>0,h=t||a||s;return r&&h?i||o:r?i?n:o:h?i||o:i?n:o}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasNormalTexture=!!this.parameters.normalTextureId,this._configuration.hasColorTexture=!!this.parameters.textureId,this._configuration.hasVertexTangents=this.parameters.hasVertexTangents,this._configuration.instanced=this.parameters.isInstanced,this._configuration.instancedDoublePrecision=this.parameters.instancedDoublePrecision,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.hasVerticalOffset=null!=this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=null!=this.parameters.screenSizePerspective,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasSliceHighlight=this.parameters.hasSliceHighlight,this._configuration.alphaDiscardMode=this.parameters.textureAlphaMode,this._configuration.normalType=this.parameters.normalType,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,null!=this.parameters.customDepthTest&&(this._configuration.customDepthTest=this.parameters.customDepthTest),this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.cullFace=this.parameters.hasSlicePlane?basicInterfaces/* CullFaceOptions */.s2.None:this.parameters.cullFace,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.hasModelTransformation=null!=this.parameters.modelTransformation,e!==ShaderOutput/* ShaderOutput */.V.Color&&e!==ShaderOutput/* ShaderOutput */.V.Alpha||(this._configuration.hasVertexColors=this.parameters.hasVertexColors,this._configuration.hasSymbolColors=this.parameters.hasSymbolColors,this.parameters.treeRendering?this._configuration.doubleSidedMode=Normals_glsl/* NormalsDoubleSidedMode */.W.WindingOrder:this._configuration.doubleSidedMode=this.parameters.doubleSided&&"normal"===this.parameters.doubleSidedType?Normals_glsl/* NormalsDoubleSidedMode */.W.View:this.parameters.doubleSided&&"winding-order"===this.parameters.doubleSidedType?Normals_glsl/* NormalsDoubleSidedMode */.W.WindingOrder:Normals_glsl/* NormalsDoubleSidedMode */.W.None,this._configuration.instancedColor=this.parameters.hasInstancedColor,this._configuration.receiveShadows=this.parameters.receiveShadows&&this.parameters.shadowMappingEnabled,this._configuration.receiveAmbientOcclusion=null!=t.ssao,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.textureAlphaPremultiplied=!!this.parameters.textureAlphaPremultiplied,this._configuration.pbrMode=this.parameters.usePBR?this.parameters.isSchematic?PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Schematic:PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Normal:PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Disabled,this._configuration.hasMetallicRoughnessTexture=!!this.parameters.metallicRoughnessTextureId,this._configuration.hasEmissionTexture=!!this.parameters.emissiveTextureId,this._configuration.hasOcclusionTexture=!!this.parameters.occlusionTextureId,this._configuration.offsetBackfaces=!(!this.parameters.transparent||!this.parameters.offsetTransparentBackfaces),this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.snowCover=this.hasSnowCover(t),this._configuration.hasColorTextureTransform=!!this.parameters.colorTextureTransformMatrix,this._configuration.hasNormalTextureTransform=!!this.parameters.normalTextureTransformMatrix,this._configuration.hasEmissionTextureTransform=!!this.parameters.emissiveTextureTransformMatrix,this._configuration.hasOcclusionTextureTransform=!!this.parameters.occlusionTextureTransformMatrix,this._configuration.hasMetallicRoughnessTextureTransform=!!this.parameters.metallicRoughnessTextureTransformMatrix),this._configuration}hasSnowCover(e){return null!=e.weather&&e.weatherVisible&&"snowy"===e.weather.type&&"enabled"===e.weather.snowCover}intersect(h,l,u,m,p,d){if(null!=this.parameters.verticalOffset){const h=u.camera;(0,vec3.s)(z,l[12],l[13],l[14]);let d=null;switch(u.viewingMode){case ViewingMode/* ViewingMode */.RT.Global:d=(0,vec3.n)(B,z);break;case ViewingMode/* ViewingMode */.RT.Local:d=(0,vec3.c)(B,V)}let f=0;const g=(0,vec3.f)(G,z,h.eye),T=(0,vec3.l)(g),_=(0,vec3.i)(g,g,1/T);let x=null;this.parameters.screenSizePerspective&&(x=(0,vec3.j)(d,_)),f+=(0,MaterialUtil/* verticalOffsetAtDistance */.kE)(h,T,this.parameters.verticalOffset,x??0,this.parameters.screenSizePerspective),(0,vec3.i)(d,d,f),(0,vec3.t)(H,d,u.transform.inverseRotation),m=(0,vec3.f)(D,m,H),p=(0,vec3.f)(N,p,H)}(0,MaterialUtil/* intersectTriangleGeometry */.Uy)(h,u,m,p,(0,verticalOffsetUtils/* getVerticalOffsetObject3D */.ou)(u.verticalOffset),d)}produces(e,t){if(t===ShaderOutput/* ShaderOutput */.V.Color||t===ShaderOutput/* ShaderOutput */.V.Alpha||t===ShaderOutput/* ShaderOutput */.V.Depth||t===ShaderOutput/* ShaderOutput */.V.Normal||t===ShaderOutput/* ShaderOutput */.V.Shadow||t===ShaderOutput/* ShaderOutput */.V.ShadowHighlight||t===ShaderOutput/* ShaderOutput */.V.ShadowExcludeHighlight||t===ShaderOutput/* ShaderOutput */.V.Highlight||t===ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor){return e===(this.parameters.transparent?this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL)||e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL}return!1}createGLMaterial(e){return new E(e)}createBufferWriter(){return new DefaultBufferWriter/* DefaultBufferWriter */.Z(this._vertexBufferLayout)}}class E extends GLTextureMaterial/* GLTextureMaterial */.m{constructor(e){super({...e,...e.material.parameters})}_updateShadowState(e){e.shadowMap.enabled!==this._material.parameters.shadowMappingEnabled&&this._material.setParameters({shadowMappingEnabled:e.shadowMap.enabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(t){this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||(this._updateShadowState(t),this._updateOccludeeState(t));const r=this._material.parameters;this.updateTexture(r.textureId);const s=t.camera.viewInverseTransposeMatrix;return (0,vec3.s)(r.origin,s[3],s[7],s[11]),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(r.treeRendering?RealisticTreeTechnique_t:DefaultMaterialTechnique/* DefaultMaterialTechnique */.R5,t)}}class P extends DefaultMaterialTechnique/* DefaultMaterialPassParameters */.uD{constructor(){super(...arguments),this.initTextureTransparent=!1,this.treeRendering=!1,this.hasVertexTangents=!1}}const j=new P;function L(e){const t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION);e.normalType===NormalAttribute_glsl/* NormalType */.W.Compressed?t.vec2i16(VertexAttribute/* VertexAttribute */.r.NORMALCOMPRESSED,{glNormalized:!0}):t.vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL),e.hasVertexTangents&&t.vec4f(VertexAttribute/* VertexAttribute */.r.TANGENT);return(e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId)&&t.vec2f(VertexAttribute/* VertexAttribute */.r.UV0),e.hasVertexColors&&t.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR),e.hasSymbolColors&&t.vec4u8(VertexAttribute/* VertexAttribute */.r.SYMBOLCOLOR),(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&t.vec4u8(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR),t}const D=(0,vec3f64.c)(),N=(0,vec3f64.c)(),V=(0,vec3f64.f)(0,0,1),B=(0,vec3f64.c)(),H=(0,vec3f64.c)(),z=(0,vec3f64.c)(),G=(0,vec3f64.c)();


/***/ }),

/***/ 42440:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=2.1;


/***/ }),

/***/ 9319:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24682);
/* harmony import */ var _core_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57198);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69948);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t extends _core_shaderLibrary_attributes_InstancedDoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .InstancedDoubleConfiguration */ .nW{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({constValue:!0})],t.prototype,"hasSliceHighlight",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({constValue:!1})],t.prototype,"hasSliceInVertexProgram",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({constValue:_core_shaderTechnique_BindType_js__WEBPACK_IMPORTED_MODULE_2__/* .BindType */ .c.Pass})],t.prototype,"pbrTextureBindType",void 0);


/***/ }),

/***/ 62331:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  R: () => (/* binding */ $)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3.js
var mat3 = __webpack_require__(46615);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f64.js
var mat3f64 = __webpack_require__(76287);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4.js
var mat4 = __webpack_require__(37046);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat4f64.js
var mat4f64 = __webpack_require__(56192);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
;// ../node_modules/@arcgis/core/core/libs/gl-matrix-2/types/mat4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(n){return n instanceof Float32Array&&n.length>=16}function r(n){return Array.isArray(n)&&n.length>=16}function t(t){return n(t)||r(t)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js
var FastSymbolUpdates = __webpack_require__(69463);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/debugFlags.js
var debugFlags = __webpack_require__(19620);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js
var HUD_glsl = __webpack_require__(97085);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js
var GLTextureMaterial = __webpack_require__(89140);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js
var screenSizePerspectiveUtils = __webpack_require__(28953);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ScaleInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class ScaleInfo_t{constructor(){this.factor=new c,this.factorAlignment=new c}}class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js
var bufferWriterUtils = __webpack_require__(81500);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js
var HUDMaterial_glsl = __webpack_require__(69726);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class g extends ShaderTechnique/* ShaderTechnique */.w{initializeConfiguration(e,i){i.spherical=e.viewingMode===ViewingMode/* ViewingMode */.RT.Global}initializeProgram(r){return new Program/* Program */.B(r.rctx,g.shader.get().build(this.configuration),DefaultVertexAttributeLocations/* Default3D */.D)}initializePipeline(){const r=this.configuration.transparencyPassType,i=this.configuration,t=r===TransparencyPassType/* TransparencyPassType */.y.NONE,o=r===TransparencyPassType/* TransparencyPassType */.y.FrontFace,s=this.configuration.hasPolygonOffset?b:null,l=(t||o)&&i.output!==ShaderOutput/* ShaderOutput */.V.Highlight&&(i.depthEnabled||i.occlusionPass)?renderState/* defaultDepthWriteParams */.kn:null;return (0,renderState/* makePipelineState */.Ey)({blending:i.output===ShaderOutput/* ShaderOutput */.V.Color||i.output===ShaderOutput/* ShaderOutput */.V.Alpha||i.output===ShaderOutput/* ShaderOutput */.V.Highlight?t?j:(0,OrderIndependentTransparency/* oitBlending */.ez)(r):null,depthTest:{func:enums/* CompareFunction */.MT.LEQUAL},depthWrite:l,colorWrite:renderState/* defaultColorWriteParams */.wE,polygonOffset:s})}get primitiveType(){return this.configuration.occlusionPass?enums/* PrimitiveType */.WR.POINTS:enums/* PrimitiveType */.WR.TRIANGLES}}g.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(HUDMaterial_glsl.H,(()=>__webpack_require__.e(/* import() */ 5466).then(__webpack_require__.bind(__webpack_require__, 35466))));const b={factor:0,units:-4},j=(0,renderState/* simpleBlendingParams */.ox)(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class HUDMaterialTechniqueConfiguration_r extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.screenCenterOffsetUnitsEnabled=!1,this.spherical=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.debugDrawLabelBorder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.depthEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],HUDMaterialTechniqueConfiguration_r.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],HUDMaterialTechniqueConfiguration_r.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"signedDistanceFieldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"sampleSignedDistanceFieldTexelCenter",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"debugDrawLabelBorder",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasPolygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"depthEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"pixelSnappingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],HUDMaterialTechniqueConfiguration_r.prototype,"hasSliceInVertexProgram",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],HUDMaterialTechniqueConfiguration_r.prototype,"hasVvInstancing",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class $ extends Material/* Material */.im{constructor(e){super(e,new Te),this._configuration=new HUDMaterialTechniqueConfiguration_r}getConfiguration(e,t){return this._configuration.output=e,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=this.parameters.isDraped,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===RenderSlot/* RenderSlot */.N.OCCLUSION_PIXELS&&this.parameters.occlusionTest&&(e===ShaderOutput/* ShaderOutput */.V.Color||e===ShaderOutput/* ShaderOutput */.V.Alpha),e===ShaderOutput/* ShaderOutput */.V.Color&&(this._configuration.debugDrawLabelBorder=!!debugFlags/* debugFlags */.b.LABELS_SHOW_BORDER),this._configuration.depthEnabled=this.parameters.depthEnabled,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}intersect(e,s,i,a,n,o){if(!(i.options.selectionMode&&i.options.hud&&e.visible&&i.point))return;const g=this.parameters,S=i.point,O=i.camera;let{scaleX:A,scaleY:v}=this._getScreenScale(e);A*=O.pixelRatio,v*=O.pixelRatio,(0,mat3.f)(ue,s),e.attributes.has(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)&&se(ue);const T=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),_=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE),I=e.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL),y=e.attributes.get(VertexAttribute/* VertexAttribute */.r.AUXPOS1);(0,Util/* assert */.vA)(T.size>=3);const P=(0,HUDMaterial_glsl.c)(g),E="screen"===this.parameters.centerOffsetUnits;for(let t=0;t<T.data.length/T.size;t++){const e=t*T.size;(0,vec3.s)(ne,T.data[e],T.data[e+1],T.data[e+2]),(0,vec3.e)(ne,ne,s);const a=t*_.size;Ae[0]=_.data[a]*A,Ae[1]=_.data[a+1]*v,(0,vec3.e)(ne,ne,O.viewMatrix);const n=t*y.size;if((0,vec3.s)(me,y.data[n],y.data[n+1],y.data[n+2]),!E&&(ne[0]+=me[0],ne[1]+=me[1],0!==me[2])){const e=me[2];(0,vec3.n)(me,ne),(0,vec3.f)(ne,ne,(0,vec3.i)(me,me,e))}const R=t*I.size;if((0,vec3.s)(oe,I.data[R],I.data[R+1],I.data[R+2]),this._normalAndViewAngle(oe,ue,O,Se),this._applyVerticalOffsetTransformationView(ne,Se,O,ie),O.applyProjection(ne,ce),ce[0]>-1){E&&(me[0]||me[1])&&(ce[0]+=me[0]*O.pixelRatio,0!==me[1]&&(ce[1]+=(0,screenSizePerspectiveUtils/* applyScaleFactor */.m0)(me[1],ie.factorAlignment)*O.pixelRatio),O.unapplyProjection(ce,ne)),ce[0]+=this.parameters.screenOffset[0]*O.pixelRatio,ce[1]+=this.parameters.screenOffset[1]*O.pixelRatio,ce[0]=Math.floor(ce[0]),ce[1]=Math.floor(ce[1]),(0,screenSizePerspectiveUtils/* applyPrecomputedScaleFactor */.MD)(Ae,ie.factor,Ae);const e=Oe*O.pixelRatio;let t=0;if(g.textureIsSignedDistanceField&&(t=g.outlineSize*O.pixelRatio/2),re(S,ce[0],ce[1],Ae,e,t,g,P)){const e=i.ray;if((0,vec3.e)(fe,ne,(0,mat4.i)(he,O.viewMatrix)),ce[0]=S[0],ce[1]=S[1],O.unprojectFromRenderScreen(ce,ne)){const t=(0,vec3f64.c)();(0,vec3.c)(t,e.direction);const s=1/(0,vec3.l)(t);(0,vec3.i)(t,t,s);o((0,vec3.o)(e.origin,ne)*s,t,-1,!0,1,fe)}}}}}intersectDraped(e,t,s,r,i,a){const n=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),o=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE),c=this.parameters,l=(0,HUDMaterial_glsl.c)(c);let{scaleX:f,scaleY:u}=this._getScreenScale(e);f*=e.screenToWorldRatio,u*=e.screenToWorldRatio;const p=be*e.screenToWorldRatio;for(let h=0;h<n.data.length/n.size;h++){const t=h*n.size,s=n.data[t],m=n.data[t+1],d=h*o.size;Ae[0]=o.data[d]*f,Ae[1]=o.data[d+1]*u;let g=0;c.textureIsSignedDistanceField&&(g=c.outlineSize*e.screenToWorldRatio/2),re(r,s,m,Ae,p,g,c,l)&&i(a.dist,a.normal,-1,!1)}}createBufferWriter(){return new ye(this)}_normalAndViewAngle(e,s,r,i){return t(s)&&(s=(0,mat3.f)(pe,s)),(0,vec3.t)(i.normal,e,s),(0,vec3.e)(i.normal,i.normal,r.viewInverseTransposeMatrix),i.cosAngle=(0,vec3.j)(le,ve),i}_updateScaleInfo(e,t,s){const r=this.parameters;null!=r.screenSizePerspective?(0,screenSizePerspectiveUtils/* precomputeScaleFactor */.cJ)(s,t,r.screenSizePerspective,e.factor):(e.factor.scale=1,e.factor.factor=0,e.factor.minScaleFactor=0),null!=r.screenSizePerspectiveAlignment?(0,screenSizePerspectiveUtils/* precomputeScaleFactor */.cJ)(s,t,r.screenSizePerspectiveAlignment,e.factorAlignment):(e.factorAlignment.factor=e.factor.factor,e.factorAlignment.scale=e.factor.scale,e.factorAlignment.minScaleFactor=e.factor.minScaleFactor)}applyShaderOffsetsView(e,t,s,r,i,a,n){const o=this._normalAndViewAngle(t,s,i,Se);return this._applyVerticalGroundOffsetView(e,o,i,n),this._applyVerticalOffsetTransformationView(n,o,i,a),this._applyPolygonOffsetView(n,o,r[3],i,n),this._applyCenterOffsetView(n,r,n),n}applyShaderOffsetsNDC(e,t,s,r,i){return this._applyCenterOffsetNDC(e,t,s,r),null!=i&&(0,vec3.c)(i,r),this._applyPolygonOffsetNDC(r,t,s,r),r}_applyPolygonOffsetView(t,s,r,i,a){const n=i.aboveGround?1:-1;let o=Math.sign(r);0===o&&(o=n);const c=n*o;if(this.parameters.shaderPolygonOffset<=0)return (0,vec3.c)(a,t);const l=(0,mathUtils/* clamp */.qE)(Math.abs(s.cosAngle),.01,1),f=1-Math.sqrt(1-l*l)/l/i.viewport[2];return (0,vec3.i)(a,t,c>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,s,r){const i=(0,vec3.l)(e),a=s.aboveGround?1:-1,n=s.computeRenderPixelSizeAtDist(i)*HUD_glsl/* HUDVerticalPixelOffset */.R,o=(0,vec3.i)(ne,t.normal,a*n);return (0,vec3.g)(r,e,o),r}_applyVerticalOffsetTransformationView(e,t,s,r){const i=this.parameters;if(!i.verticalOffset?.screenLength){if(i.screenSizePerspective||i.screenSizePerspectiveAlignment){const s=(0,vec3.l)(e);this._updateScaleInfo(r,s,t.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return e}const a=(0,vec3.l)(e),n=i.screenSizePerspectiveAlignment??i.screenSizePerspective,o=(0,MaterialUtil/* verticalOffsetAtDistance */.kE)(s,a,i.verticalOffset,t.cosAngle,n);return this._updateScaleInfo(r,a,t.cosAngle),(0,vec3.i)(t.normal,t.normal,o),(0,vec3.g)(e,e,t.normal)}_applyCenterOffsetView(e,t,s){const r="screen"!==this.parameters.centerOffsetUnits;return s!==e&&(0,vec3.c)(s,e),r&&(s[0]+=t[0],s[1]+=t[1],t[2]&&((0,vec3.n)(oe,s),(0,vec3.g)(s,s,(0,vec3.i)(oe,oe,t[2])))),s}_applyCenterOffsetNDC(e,t,s,r){const i="screen"!==this.parameters.centerOffsetUnits;return r!==e&&(0,vec3.c)(r,e),i||(r[0]+=t[0]/s.fullWidth*2,r[1]+=t[1]/s.fullHeight*2),r}_applyPolygonOffsetNDC(e,t,s,r){const i=this.parameters.shaderPolygonOffset;if(e!==r&&(0,vec3.c)(r,e),i){const e=s.aboveGround?1:-1,a=e*Math.sign(t[3]);r[2]-=(a||e)*i}return r}produces(e,t){if(t===ShaderOutput/* ShaderOutput */.V.Color||t===ShaderOutput/* ShaderOutput */.V.Alpha||t===ShaderOutput/* ShaderOutput */.V.Highlight||t===ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor){if(e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)return!0;const{drawInSecondSlot:t,occlusionTest:s}=this.parameters;return e===(t?RenderSlot/* RenderSlot */.N.LABEL_MATERIAL:RenderSlot/* RenderSlot */.N.HUD_MATERIAL)||s&&e===RenderSlot/* RenderSlot */.N.OCCLUSION_PIXELS}return!1}createGLMaterial(e){return new ee(e)}calculateRelativeScreenBounds(e,t,s=(0,aaBoundingRect/* create */.vt)()){return te(this.parameters,e,t,s),s[2]=s[0]+e[0],s[3]=s[1]+e[1],s}_getScreenScale(e){const t=e.attributes.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE);if(null==t)return{scaleX:1,scaleY:1};const s=(0,vec4f64.b)(t.data,ge),[r,i]=(0,FastSymbolUpdates/* evaluateModelTransformScale */.VC)(de,this.parameters,s);return{scaleX:r,scaleY:i}}}class ee extends GLTextureMaterial/* GLTextureMaterial */.m{constructor(e){super({...e,...e.material.parameters})}selectProgram(e){return this.ensureTechnique(g,e)}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.selectProgram(e)}}function te(e,t,s,r=ae){return (0,vec2.j)(r,e.anchorPosition),r[0]*=-t[0],r[1]*=-t[1],r[0]+=e.screenOffset[0]*s,r[1]+=e.screenOffset[1]*s,r}function se(e){const t=e[0],s=e[1],r=e[2],i=e[3],a=e[4],n=e[5],o=e[6],c=e[7],l=e[8],f=1/Math.sqrt(t*t+s*s+r*r),u=1/Math.sqrt(i*i+a*a+n*n),p=1/Math.sqrt(o*o+c*c+l*l);return e[0]=t*f,e[1]=s*f,e[2]=r*f,e[3]=i*u,e[4]=a*u,e[5]=n*u,e[6]=o*p,e[7]=c*p,e[8]=l*p,e}function re(e,t,s,r,i,a,n,o){let c=t-i-(o[0]>0?r[0]*o[0]:0),l=c+r[0]+2*i,f=s-i-(o[1]>0?r[1]*o[1]:0),u=f+r[1]+2*i;const p=n.distanceFieldBoundingBox;return n.textureIsSignedDistanceField&&null!=p&&(c+=r[0]*p[0],f+=r[1]*p[1],l-=r[0]*(1-p[2]),u-=r[1]*(1-p[3]),c-=a,l+=a,f-=a,u+=a),e[0]>c&&e[0]<l&&e[1]>f&&e[1]<u}const ie=new ScaleInfo_t,ae=(0,vec2f64.a)(),ne=(0,vec3f64.c)(),oe=(0,vec3f64.c)(),ce=(0,vec4f64.c)(),le=(0,vec3f64.c)(),fe=(0,vec3f64.c)(),ue=(0,mat3f64.a)(),pe=(0,mat3f64.a)(),he=(0,mat4f64.a)(),me=(0,vec3f64.c)(),de=(0,vec4f64.c)(),ge=(0,vec4f64.c)(),Se={normal:le,cosAngle:0},Oe=1,be=2,Ae=[0,0],ve=(0,vec3f64.f)(0,0,1);class Te extends GLTextureMaterial/* GLTextureMaterialBindParameters */.N{constructor(){super(...arguments),this.renderOccluded=Material/* RenderOccludedFlag */.m$.Occlude,this.isDecoration=!1,this.color=(0,vec4f64.f)(1,1,1,1),this.texCoordScale=[1,1],this.polygonOffset=!1,this.anchorPosition=(0,vec2f64.f)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=(0,vec4f64.f)(1,1,1,1),this.outlineSize=0,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.centerOffsetUnits="world",this.drawInSecondSlot=!1,this.depthEnabled=!0,this.isDraped=!1}}const _e=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL).vec2f(VertexAttribute/* VertexAttribute */.r.UV0).vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR).vec2f(VertexAttribute/* VertexAttribute */.r.SIZE).vec4f(VertexAttribute/* VertexAttribute */.r.AUXPOS1).vec4f(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),Ie=_e.clone().vec4u8(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR);class ye{constructor(e){this._material=e,this.vertexBufferLayout=(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")?Ie:_e}elementCount(e){return 6*e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length}write(e,t,s,r,i){(0,bufferWriterUtils/* writePosition */.Hk)(s.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),e,r.position,i,6),(0,bufferWriterUtils/* writeNormal */.p1)(s.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL),t,r.normal,i,6);const a=s.attributes.get(VertexAttribute/* VertexAttribute */.r.UV0).data;let n,o,c,l;if(null==a||a.length<4){const e=this._material.parameters;n=0,o=0,c=e.texCoordScale[0],l=e.texCoordScale[1]}else n=a[0],o=a[1],c=a[2],l=a[3];c=Math.min(1.99999,c+1),l=Math.min(1.99999,l+1);let f=s.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length,u=i;const p=r.uv0;for(let g=0;g<f;++g)p.set(u,0,n),p.set(u,1,o),u++,p.set(u,0,c),p.set(u,1,o),u++,p.set(u,0,c),p.set(u,1,l),u++,p.set(u,0,c),p.set(u,1,l),u++,p.set(u,0,n),p.set(u,1,l),u++,p.set(u,0,n),p.set(u,1,o),u++;(0,bufferWriterUtils/* writeColor */.tb)(s.attributes.get(VertexAttribute/* VertexAttribute */.r.COLOR),4,r.color,i,6);const{data:h,indices:m}=s.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE);f=m.length;const d=r.size;u=i;for(let g=0;g<f;++g){const e=h[2*m[g]],t=h[2*m[g]+1];for(let s=0;s<6;++s)d.set(u,0,e),d.set(u,1,t),u++}if(s.attributes.get(VertexAttribute/* VertexAttribute */.r.AUXPOS1)?(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(s.attributes.get(VertexAttribute/* VertexAttribute */.r.AUXPOS1),r.auxpos1,i,6):(0,bufferWriterUtils/* writeBufferVec4Zeros */.Pq)(r.auxpos1,i,6*f),s.attributes.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)?(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(s.attributes.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),r.featureAttribute,i,6):(0,bufferWriterUtils/* writeBufferVec4Zeros */.Pq)(r.featureAttribute,i,6*f),null!=s.objectAndLayerIdColor){const e=s.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION)?.indices;if(e){const t=e.length,a=r.getField(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR,BufferView/* BufferViewVec4u8 */.XP);(0,bufferWriterUtils/* writeObjectAndLayerIdColor */.tH)(s.objectAndLayerIdColor,a,t,i,6)}}}}


/***/ }),

/***/ 1563:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var a;!function(a){a[a.Horizontal=0]="Horizontal",a[a.Vertical=1]="Vertical",a[a.Cross=2]="Cross",a[a.ForwardDiagonal=3]="ForwardDiagonal",a[a.BackwardDiagonal=4]="BackwardDiagonal",a[a.DiagonalCross=5]="DiagonalCross",a[a.COUNT=6]="COUNT"}(a||(a={}));


/***/ }),

/***/ 96824:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  W: () => (/* binding */ x)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3.js
var vec3 = __webpack_require__(21839);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/lineSegment.js
var lineSegment = __webpack_require__(22759);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var VisualVariablePassParameters = __webpack_require__(17745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js
var LineMarkerTechniqueConfiguration = __webpack_require__(58376);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/RibbonLine.glsl.js
var RibbonLine_glsl = __webpack_require__(50126);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const I=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.SUBDIVISIONFACTOR,1],[VertexAttribute/* VertexAttribute */.r.UV0,2],[VertexAttribute/* VertexAttribute */.r.AUXPOS1,3],[VertexAttribute/* VertexAttribute */.r.AUXPOS2,4],[VertexAttribute/* VertexAttribute */.r.COLOR,5],[VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE,5],[VertexAttribute/* VertexAttribute */.r.SIZE,6],[VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE,6],[VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE,7],[VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR,8]]);class y extends ShaderTechnique/* ShaderTechnique */.w{initializeProgram(e){return new Program/* Program */.B(e.rctx,y.shader.get().build(this.configuration),I)}_makePipelineState(t,i){const c=this.configuration,h=t===TransparencyPassType/* TransparencyPassType */.y.NONE,d=t===TransparencyPassType/* TransparencyPassType */.y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:c.output===ShaderOutput/* ShaderOutput */.V.Color||c.output===ShaderOutput/* ShaderOutput */.V.Alpha?h?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(t):null,depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(t)},depthWrite:h?c.writeDepth?renderState/* defaultDepthWriteParams */.kn:null:(0,OrderIndependentTransparency/* oitDepthWrite */.XO)(t),colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:c.hasOccludees?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:c.hasOccludees?i?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:h||d?c.hasPolygonOffset?A:null:OrderIndependentTransparency/* OITPolygonOffset */.SE})}initializePipeline(){const e=this.configuration;if(e.occluder){const t=e.hasPolygonOffset?A:null;this._occluderPipelineTransparent=(0,renderState/* makePipelineState */.Ey)({blending:OrderIndependentTransparency/* blendingDefault */.V0,polygonOffset:t,depthTest:StencilUtils/* depthCompareAlways */.sf,depthWrite:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:null,stencilTest:StencilUtils/* stencilToolTransparentOccluderParams */.mK}),this._occluderPipelineOpaque=(0,renderState/* makePipelineState */.Ey)({blending:OrderIndependentTransparency/* blendingDefault */.V0,polygonOffset:t,depthTest:StencilUtils/* depthCompareAlways */.sf,depthWrite:null,colorWrite:renderState/* defaultColorWriteParams */.wE,stencilWrite:StencilUtils/* stencilWriteMaskOff */.r8,stencilTest:StencilUtils/* stencilToolMaskOccluderParams */.I$}),this._occluderPipelineMaskWrite=(0,renderState/* makePipelineState */.Ey)({blending:null,polygonOffset:t,depthTest:StencilUtils/* depthCompareLess */.m,depthWrite:null,colorWrite:null,stencilWrite:StencilUtils/* stencilWriteMaskOn */.v0,stencilTest:StencilUtils/* stencilToolMaskBaseParams */.a9})}return this._occludeePipelineState=this._makePipelineState(this.configuration.transparencyPassType,!0),this._makePipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return this.configuration.wireframe?enums/* PrimitiveType */.WR.LINES:enums/* PrimitiveType */.WR.TRIANGLE_STRIP}getPipeline(e,t,i){return e?this._occludeePipelineState:this.configuration.occluder?i?this._occluderPipelineTransparent:t?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipeline()}}y.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(RibbonLine_glsl.R,(()=>__webpack_require__.e(/* import() */ 7274).then(__webpack_require__.bind(__webpack_require__, 97274))));const A={factor:0,units:-4};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js
var RibbonLineTechniqueConfiguration = __webpack_require__(16906);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var M;!function(e){e[e.LEFT_JOIN_START=-2]="LEFT_JOIN_START",e[e.LEFT_JOIN_END=-1]="LEFT_JOIN_END",e[e.LEFT_CAP_START=-4]="LEFT_CAP_START",e[e.LEFT_CAP_END=-5]="LEFT_CAP_END",e[e.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",e[e.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",e[e.RIGHT_CAP_START=4]="RIGHT_CAP_START",e[e.RIGHT_CAP_END=5]="RIGHT_CAP_END"}(M||(M={}));class x extends Material/* Material */.im{constructor(e){super(e,new z),this._configuration=new RibbonLineTechniqueConfiguration/* RibbonLineTechniqueConfiguration */.Q,this._vertexAttributeLocations=I}getConfiguration(e,t){this._configuration.output=e,this._configuration.draped=t.slot===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==ShaderOutput/* ShaderOutput */.V.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&V(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.occluder=this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.wireframe=this.parameters.wireframe,this._configuration}intersectDraped(e,r,s,i,a,n){if(!s.options.selectionMode)return;const o=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,l=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE);let u=this.parameters.width;if(this.parameters.vvSize){const r=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0];u*=(0,mathUtils/* clamp */.qE)(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else l&&(u*=l.data[0]);const c=i[0],h=i[1],p=(u/2+4)*e.screenToWorldRatio;let f=Number.MAX_VALUE,m=0;for(let T=0;T<o.length-5;T+=3){const e=o[T],r=o[T+1],s=c-e,i=h-r,a=o[T+3]-e,n=o[T+4]-r,l=(0,mathUtils/* clamp */.qE)((a*s+n*i)/(a*a+n*n),0,1),u=a*l-s,p=n*l-i,d=u*u+p*p;d<f&&(f=d,m=T/3)}f<p*p&&a(n.dist,n.normal,m,!1)}intersect(r,p,f,m,d,R){if(!f.options.selectionMode||!r.visible)return;if(!(0,Util/* isTranslationMatrix */.zH)(p))return void Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const O=r.attributes,b=O.get(VertexAttribute/* VertexAttribute */.r.POSITION).data;let v=this.parameters.width;if(this.parameters.vvSize){const e=O.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0];v*=(0,mathUtils/* clamp */.qE)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else O.has(VertexAttribute/* VertexAttribute */.r.SIZE)&&(v*=O.get(VertexAttribute/* VertexAttribute */.r.SIZE).data[0]);const L=f.camera,P=Q;(0,vec2.j)(P,f.point);const N=v*L.pixelRatio/2+4*L.pixelRatio;(0,vec3.s)(oe[0],P[0]-N,P[1]+N,0),(0,vec3.s)(oe[1],P[0]+N,P[1]+N,0),(0,vec3.s)(oe[2],P[0]+N,P[1]-N,0),(0,vec3.s)(oe[3],P[0]-N,P[1]-N,0);for(let e=0;e<4;e++)if(!L.unprojectFromRenderScreen(oe[e],le[e]))return;(0,plane/* fromPoints */.Cr)(L.eye,le[0],le[1],ue),(0,plane/* fromPoints */.Cr)(L.eye,le[1],le[2],ce),(0,plane/* fromPoints */.Cr)(L.eye,le[2],le[3],he),(0,plane/* fromPoints */.Cr)(L.eye,le[3],le[0],pe);let j=Number.MAX_VALUE,U=0;const D=Z(this.parameters,O)?b.length-2:b.length-5;for(let e=0;e<D;e+=3){W[0]=b[e]+p[12],W[1]=b[e+1]+p[13],W[2]=b[e+2]+p[14];const t=(e+3)%b.length;if(Y[0]=b[t]+p[12],Y[1]=b[t+1]+p[13],Y[2]=b[t+2]+p[14],(0,plane/* signedDistance */.mN)(ue,W)<0&&(0,plane/* signedDistance */.mN)(ue,Y)<0||(0,plane/* signedDistance */.mN)(ce,W)<0&&(0,plane/* signedDistance */.mN)(ce,Y)<0||(0,plane/* signedDistance */.mN)(he,W)<0&&(0,plane/* signedDistance */.mN)(he,Y)<0||(0,plane/* signedDistance */.mN)(pe,W)<0&&(0,plane/* signedDistance */.mN)(pe,Y)<0)continue;if(L.projectToRenderScreen(W,K),L.projectToRenderScreen(Y,$),K[2]<0&&$[2]>0){(0,vec3.f)(X,W,Y);const e=L.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],W)/(0,vec3.j)(X,(0,plane/* normal */.qb)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec3.i)(X,X,t),(0,vec3.g)(W,W,X),L.projectToRenderScreen(W,K)}else if(K[2]>0&&$[2]<0){(0,vec3.f)(X,Y,W);const e=L.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],Y)/(0,vec3.j)(X,(0,plane/* normal */.qb)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec3.i)(X,X,t),(0,vec3.g)(Y,Y,X),L.projectToRenderScreen(Y,$)}else if(K[2]<0&&$[2]<0)continue;K[2]=0,$[2]=0;const r=(0,lineSegment/* distance2 */.kb)((0,lineSegment/* fromPoints */.Cr)(K,$,re),P);r<j&&(j=r,(0,vec3.c)(ee,W),(0,vec3.c)(te,Y),U=e/3)}const F=f.rayBegin,w=f.rayEnd;if(j<N*N){let e=Number.MAX_VALUE;if((0,lineSegment/* closestLineSegmentPoint */.ld)((0,lineSegment/* fromPoints */.Cr)(ee,te,re),(0,lineSegment/* fromPoints */.Cr)(F,w,se),q)){(0,vec3.f)(q,q,F);const t=(0,vec3.l)(q);(0,vec3.i)(q,q,1/t),e=t/(0,vec3.o)(F,w)}R(e,q,U,!1)}}get _layout(){const e=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).f32(VertexAttribute/* VertexAttribute */.r.SUBDIVISIONFACTOR).vec2f(VertexAttribute/* VertexAttribute */.r.UV0).vec3f(VertexAttribute/* VertexAttribute */.r.AUXPOS1).vec3f(VertexAttribute/* VertexAttribute */.r.AUXPOS2);return this.parameters.vvSize?e.f32(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE):e.f32(VertexAttribute/* VertexAttribute */.r.SIZE),this.parameters.vvColor?e.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):e.vec4f(VertexAttribute/* VertexAttribute */.r.COLOR),this.parameters.vvOpacity&&e.f32(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE),(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(VertexAttribute/* VertexAttribute */.r.OBJECTANDLAYERIDCOLOR),e}createBufferWriter(){return new H(this._layout,this.parameters)}produces(e,t){if(t===ShaderOutput/* ShaderOutput */.V.Color||t===ShaderOutput/* ShaderOutput */.V.Alpha||t===ShaderOutput/* ShaderOutput */.V.Highlight||t===ShaderOutput/* ShaderOutput */.V.Depth||t===ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor){if(e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL)return!0;if(this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil)return e===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL||e===RenderSlot/* RenderSlot */.N.OCCLUDER_MATERIAL||e===RenderSlot/* RenderSlot */.N.TRANSPARENT_OCCLUDER_MATERIAL;if(t===ShaderOutput/* ShaderOutput */.V.Color||t===ShaderOutput/* ShaderOutput */.V.Alpha){return e===(this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL)}return e===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL}return!1}createGLMaterial(e){return new G(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class G extends GLMaterial/* default */.A{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextureRepository.release(this._stipplePattern),this._stipplePattern=null}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})}beginSlot(e){this._output!==ShaderOutput/* ShaderOutput */.V.Color&&this._output!==ShaderOutput/* ShaderOutput */.V.Alpha||this._updateOccludeeState(e);const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextureRepository.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.ensureTechnique(y,e)}}class z extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.width=0,this.color=vec4f64.O,this.join="miter",this.cap=RibbonLineTechniqueConfiguration/* CapType */.x.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.hasOccludees=!1,this.wireframe=!1}}class H{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t,this.numJoinSubdivisions=0;const r=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=r;break;case"round":this.numJoinSubdivisions=RibbonLine_glsl.r+r}}_isClosed(e){return Z(this._parameters,e.attributes)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2,r=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length/2+1,s=this._isClosed(e);let i=s?2:2*t;return i+=((s?r:r-1)-(s?0:1))*(2*this.numJoinSubdivisions+4),i+=2,this._parameters.wireframe&&(i=2+4*(i-2)),i}write(e,t,r,s,a){const n=ie,o=ae,l=ne,c=r.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),f=c.indices,m=c.data.length/3,T=r.attributes.get(VertexAttribute/* VertexAttribute */.r.DISTANCETOSTART)?.data;f&&f.length!==2*(m-1)&&console.warn("RibbonLineMaterial does not support indices");let d=1,_=0;const E=this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE);E?_=r.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0]:r.attributes.has(VertexAttribute/* VertexAttribute */.r.SIZE)&&(d=r.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE).data[0]);let A=[1,1,1,1],R=0;const I=this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE);I?R=r.attributes.get(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE).data[0]:r.attributes.has(VertexAttribute/* VertexAttribute */.r.COLOR)&&(A=r.attributes.get(VertexAttribute/* VertexAttribute */.r.COLOR).data);const S=(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")?r.objectAndLayerIdColor:null;let g=0;const O=this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE);O&&(g=r.attributes.get(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE).data[0]);const b=new Float32Array(s.buffer),v=(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")?new Uint8Array(s.buffer):null,L=this.vertexBufferLayout.stride/4;let P=a*L;const N=P;let C=0;const j=T?(e,t,r)=>C=T[r]:(e,t,r)=>C+=(0,vec3.o)(e,t),U=(0,has/* default */.A)("enable-feature:objectAndLayerId-rendering"),D=(e,t,r,s,i,a,n)=>{if(b[P++]=t[0],b[P++]=t[1],b[P++]=t[2],b[P++]=s,b[P++]=n,b[P++]=i,b[P++]=e[0],b[P++]=e[1],b[P++]=e[2],b[P++]=r[0],b[P++]=r[1],b[P++]=r[2],b[P++]=E?_:d,I)b[P++]=R;else{const e=Math.min(4*a,A.length-4);b[P++]=A[e],b[P++]=A[e+1],b[P++]=A[e+2],b[P++]=A[e+3]}O&&(b[P++]=g),U&&(null!=S&&(v[4*P]=S[0],v[4*P+1]=S[1],v[4*P+2]=S[2],v[4*P+3]=S[3]),P++)};P+=L,(0,vec3.s)(o,c.data[0],c.data[1],c.data[2]),e&&(0,vec3.e)(o,o,e);const F=this._isClosed(r);if(F){const t=c.data.length-3;(0,vec3.s)(n,c.data[t],c.data[t+1],c.data[t+2]),e&&(0,vec3.e)(n,n,e)}else (0,vec3.s)(l,c.data[3],c.data[4],c.data[5]),e&&(0,vec3.e)(l,l,e),D(o,o,l,1,M.LEFT_CAP_START,0,0),D(o,o,l,1,M.RIGHT_CAP_START,0,0),(0,vec3.c)(n,o),(0,vec3.c)(o,l);const w=F?0:1,B=F?m:m-1;for(let h=w;h<B;h++){const t=(h+1)%m*3;(0,vec3.s)(l,c.data[t],c.data[t+1],c.data[t+2]),e&&(0,vec3.e)(l,l,e),j(n,o,h),D(n,o,l,0,M.LEFT_JOIN_END,h,C),D(n,o,l,0,M.RIGHT_JOIN_END,h,C);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);D(n,o,l,t,M.LEFT_JOIN_END,h,C),D(n,o,l,t,M.RIGHT_JOIN_END,h,C)}D(n,o,l,1,M.LEFT_JOIN_START,h,C),D(n,o,l,1,M.RIGHT_JOIN_START,h,C),(0,vec3.c)(n,o),(0,vec3.c)(o,l)}F?((0,vec3.s)(l,c.data[3],c.data[4],c.data[5]),e&&(0,vec3.e)(l,l,e),C=j(n,o,B),D(n,o,l,0,M.LEFT_JOIN_END,w,C),D(n,o,l,0,M.RIGHT_JOIN_END,w,C)):(C=j(n,o,B),D(n,o,o,0,M.LEFT_CAP_END,B,C),D(n,o,o,0,M.RIGHT_CAP_END,B,C)),k(b,N+L,b,N,L);P=k(b,P-L,b,P,L),this._parameters.wireframe&&this._addWireframeVertices(s,N,P,L)}_addWireframeVertices(e,t,r,s){const i=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=k(a,e,i,n,s);for(let l=0;l<a.length-1;l+=2*s)o(l),o(l+2*s),o(l+1*s),o(l+2*s),o(l+1*s),o(l+3*s)}}function k(e,t,r,s,i){for(let a=0;a<i;a++)r[s++]=e[t++];return s}function Z(e,t){if(!e.isClosed)return!1;return t.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length>2}function V(e){return e.anchor===LineMarkerTechniqueConfiguration/* LineMarkerAnchor */.kJ.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}const W=(0,vec3f64.c)(),Y=(0,vec3f64.c)(),X=(0,vec3f64.c)(),q=(0,vec3f64.c)(),Q=(0,vec3f64.c)(),K=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),$=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),ee=(0,vec3f64.c)(),te=(0,vec3f64.c)(),re=(0,lineSegment/* create */.vt)(),se=(0,lineSegment/* create */.vt)(),ie=(0,vec3f64.c)(),ae=(0,vec3f64.c)(),ne=(0,vec3f64.c)(),oe=[(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)()],le=[(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)(),(0,vec3f64.c)()],ue=(0,plane/* create */.vt)(),ce=(0,plane/* create */.vt)(),he=(0,plane/* create */.vt)(),pe=(0,plane/* create */.vt)();


/***/ }),

/***/ 52873:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(45722);
/* harmony import */ var _internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(29117);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e extends _lib_Material_js__WEBPACK_IMPORTED_MODULE_0__/* .Material */ .im{intersect(r,e,i,a,l,o){return (0,_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_1__/* .intersectTriangleGeometry */ .Uy)(r,i,a,l,void 0,o)}}


/***/ }),

/***/ 17745:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ t),
/* harmony export */   p: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _layers_support_FastSymbolUpdates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(69463);
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(45722);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t extends _layers_support_FastSymbolUpdates_js__WEBPACK_IMPORTED_MODULE_0__/* .VisualVariablesParameters */ .Gd{constructor(){super(...arguments),this.renderOccluded=_lib_Material_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderOccludedFlag */ .m$.Occlude,this.isDecoration=!1}}const e=8;


/***/ }),

/***/ 42649:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Z: () => (/* binding */ d),
  d: () => (/* binding */ _)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/time.js
var time = __webpack_require__(60882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f64.js
var vec3f64 = __webpack_require__(22279);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f64.js
var vec4f64 = __webpack_require__(52712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/AnimationTimer.js
var AnimationTimer = __webpack_require__(46068);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js
var DefaultLayouts = __webpack_require__(27776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js
var TriangleMaterial = __webpack_require__(52873);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js
var WaterDistortion_glsl = __webpack_require__(41679);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
var ShaderTechnique = __webpack_require__(33444);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
var ShaderTechniqueConfiguration = __webpack_require__(69948);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
var Program = __webpack_require__(58123);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TransparencyPassType.js
var TransparencyPassType = __webpack_require__(81868);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/WaterSurface.glsl.js
var WaterSurface_glsl = __webpack_require__(33006);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class P extends (/* unused pure expression or super */ null && (i)){}class S extends ShaderTechnique/* ShaderTechnique */.w{initializeConfiguration(e,o){o.spherical=e.viewingMode===ViewingMode/* ViewingMode */.RT.Global,o.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result}initializeProgram(e){return new Program/* Program */.B(e.rctx,S.shader.get().build(this.configuration),DefaultVertexAttributeLocations/* Default3D */.D)}_setPipelineState(e){const t=this.configuration,r=e===TransparencyPassType/* TransparencyPassType */.y.NONE,i=e===TransparencyPassType/* TransparencyPassType */.y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:t.output!==ShaderOutput/* ShaderOutput */.V.Normal&&t.output!==ShaderOutput/* ShaderOutput */.V.Highlight&&t.output!==ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor&&t.transparent?r?OrderIndependentTransparency/* blendingDefault */.V0:(0,OrderIndependentTransparency/* oitBlending */.ez)(e):null,depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(e)},depthWrite:r?t.writeDepth?renderState/* defaultDepthWriteParams */.kn:null:(0,OrderIndependentTransparency/* oitDepthWrite */.XO)(e),colorWrite:renderState/* defaultColorWriteParams */.wE,polygonOffset:r||i?null:(0,OrderIndependentTransparency/* getOITPolygonOffset */.aB)(t.enableOffset)})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}S.shader=new ReloadableShaderModule/* ReloadableShaderModule */.$(WaterSurface_glsl.W,(()=>__webpack_require__.e(/* import() */ 114).then(__webpack_require__.bind(__webpack_require__, 40114))));class T extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.output=ShaderOutput/* ShaderOutput */.V.Color,this.transparencyPassType=TransparencyPassType/* TransparencyPassType */.y.NONE,this.spherical=!1,this.receiveShadows=!1,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.hasScreenSpaceReflections=!1,this.doublePrecisionRequiresObfuscation=!1,this.hasCloudsReflections=!1,this.objectAndLayerIdColorInstanced=!1,this.isDraped=!1,this.multipassEnabled=!1,this.cullAboveGround=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:ShaderOutput/* ShaderOutput */.V.COUNT})],T.prototype,"output",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:TransparencyPassType/* TransparencyPassType */.y.COUNT})],T.prototype,"transparencyPassType",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"spherical",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"receiveShadows",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"hasSlicePlane",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"hasScreenSpaceReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"doublePrecisionRequiresObfuscation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"hasCloudsReflections",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"multipassEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],T.prototype,"cullAboveGround",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],T.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Water})],T.prototype,"pbrMode",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],T.prototype,"useCustomDTRExponentForWater",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!0})],T.prototype,"highStepCount",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({constValue:!1})],T.prototype,"useFillLights",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends GLMaterial/* default */.A{_updateShadowState(e){e.shadowMap.enabled!==this._material.parameters.receiveShadows&&this._material.setParameters({receiveShadows:e.shadowMap.enabled})}_updateSSRState(e){const t=null!=e.ssr.lastFrameColor;t!==this._material.parameters.hasScreenSpaceReflections&&this._material.setParameters({hasScreenSpaceReflections:t})}_updateCloudsReflectionState(e){const t=null!=e.cloudsFade.data;t!==this._material.parameters.hasCloudsReflections&&this._material.setParameters({hasCloudsReflections:t})}ensureResources(e){return this._techniqueRepository.constructionContext.waterTextureRepository.ensureResources(e)}beginSlot(t){return this._output===ShaderOutput/* ShaderOutput */.V.Color&&(this._updateShadowState(t),this._updateSSRState(t),this._updateCloudsReflectionState(t)),this._material.setParameters(this._techniqueRepository.constructionContext.waterTextureRepository.passParameters),this.ensureTechnique(S,t)}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class d extends TriangleMaterial/* TriangleMaterial */.W{constructor(e){super(e,new _),this._configuration=new T,this._animation=new AnimationTimer/* AnimationTimer */.a}getConfiguration(e,t){return this._configuration.output=e,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.receiveShadows=this.parameters.receiveShadows,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.hasScreenSpaceReflections=this.parameters.hasScreenSpaceReflections,this._configuration.hasCloudsReflections=this.parameters.hasCloudsReflections,this._configuration.isDraped=this.parameters.isDraped,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.multipassEnabled=t.multipassEnabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration}update(t){const r=Math.min(t.camera.relativeElevation,t.camera.distance);this._animation.enabled=Math.sqrt(this.parameters.waveTextureRepeat/this.parameters.waveStrength)*r<A;const a=this._animation.advance(t);return this.setParameters({timeElapsed:(0,time/* secondsFromMilliseconds */.y)(this._animation.time)*this.parameters.animationSpeed},!1),this._animation.enabled&&a}produces(e,t){switch(t){case ShaderOutput/* ShaderOutput */.V.Normal:return e===RenderSlot/* RenderSlot */.N.DRAPED_WATER;case ShaderOutput/* ShaderOutput */.V.Color:if(this.parameters.isDraped)return e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;break;case ShaderOutput/* ShaderOutput */.V.Alpha:break;case ShaderOutput/* ShaderOutput */.V.Highlight:case ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor:return e===RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL||e===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;default:return!1}let r=RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL;return this.parameters.transparent&&(r=this.parameters.writeDepth?RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL:RenderSlot/* RenderSlot */.N.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===r}createGLMaterial(e){return new s(e)}createBufferWriter(){return new DefaultBufferWriter/* DefaultBufferWriter */.Z((0,has/* default */.A)("enable-feature:objectAndLayerId-rendering")?DefaultLayouts/* PositionUVLayoutObjectAndLayerId */.Dq:DefaultLayouts/* PositionUVLayout */.zK)}get test(){return{animationEnabled:this._animation.enabled}}}class _ extends Material/* MaterialParameters */.qA{constructor(){super(...arguments),this.waveStrength=.06,this.waveTextureRepeat=32,this.waveDirection=(0,vec2f64.f)(1,0),this.waveVelocity=.05,this.flowStrength=.015,this.flowOffset=-.5,this.animationSpeed=.35,this.timeElapsed=0,this.color=(0,vec4f64.f)(0,0,0,0),this.transparent=!0,this.writeDepth=!0,this.hasSlicePlane=!1,this.isDraped=!1,this.receiveShadows=!0,this.hasScreenSpaceReflections=!1,this.hasCloudsReflections=!1,this.origin=(0,vec3f64.c)(),this.modelTransformation=null}}const A=35e3;


/***/ }),

/***/ 29117:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MB: () => (/* binding */ O),
/* harmony export */   Um: () => (/* binding */ E),
/* harmony export */   Uy: () => (/* binding */ h),
/* harmony export */   Wb: () => (/* binding */ I),
/* harmony export */   Z$: () => (/* binding */ M),
/* harmony export */   kE: () => (/* binding */ L),
/* harmony export */   qu: () => (/* binding */ N)
/* harmony export */ });
/* unused harmony exports computeInvDir, computeNormal, intersectAabbInvDirBefore */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22279);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4675);
/* harmony import */ var _lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52997);
/* harmony import */ var _lib_screenSizePerspectiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28953);
/* harmony import */ var _lib_Util_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58947);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const p=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)();function h(t,n,e,o,i,r){if(t.visible)if(t.boundingInfo){(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_7__/* .assert */ .vA)(t.type===_lib_ContentObjectType_js__WEBPACK_IMPORTED_MODULE_5__/* .ContentObjectType */ .X.Mesh);const s=n.tolerance;d(t.boundingInfo,e,o,s,i,r)}else{const n=t.attributes.get(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_8__/* .VertexAttribute */ .r.POSITION),s=n.indices;M(e,o,0,s.length/3,s,n,void 0,i,r)}}const b=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();function d(t,n,e,o,i,r){if(null==t)return;const s=T(n,e,b);if((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__/* .setMin */ .Ne)(p,t.bbMin),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__/* .setMax */ .vI)(p,t.bbMax),null!=i&&i.applyToAabb(p),I(p,n,s,o)){const{primitiveIndices:s,position:c}=t,l=s?s.length:c.indices.length/3;if(l>P){const s=t.getChildren();if(void 0!==s){for(const t of s)d(t,n,e,o,i,r);return}}M(n,e,0,l,c.indices,c,s,i,r)}}const x=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();function M(t,n,e,o,i,r,s,c,l){if(s)return g(t,n,e,o,i,r,s,c,l);const{data:f,stride:u}=r,a=t[0],m=t[1],p=t[2],h=n[0]-a,b=n[1]-m,d=n[2]-p;for(let M=e,g=3*e;M<o;++M){let t=u*i[g++],n=f[t++],e=f[t++],o=f[t];t=u*i[g++];let r=f[t++],s=f[t++],y=f[t];t=u*i[g++];let j=f[t++],T=f[t++],I=f[t];null!=c&&([n,e,o]=c.applyToVertex(n,e,o,M),[r,s,y]=c.applyToVertex(r,s,y,M),[j,T,I]=c.applyToVertex(j,T,I,M));const V=r-n,L=s-e,N=y-o,O=j-n,A=T-e,E=I-o,P=b*E-A*d,S=d*O-E*h,U=h*A-O*b,W=V*P+L*S+N*U;if(Math.abs(W)<=Number.EPSILON)continue;const k=a-n,B=m-e,C=p-o,z=k*P+B*S+C*U;if(W>0){if(z<0||z>W)continue}else if(z>0||z<W)continue;const H=B*N-L*C,R=C*V-N*k,Y=k*L-V*B,q=h*H+b*R+d*Y;if(W>0){if(q<0||z+q>W)continue}else if(q>0||z+q<W)continue;const w=(O*H+A*R+E*Y)/W;if(w>=0){l(w,v(V,L,N,O,A,E,x),M,!1)}}}function g(t,n,e,o,i,r,s,c,l){const{data:f,stride:u}=r,a=t[0],m=t[1],p=t[2],h=n[0]-a,b=n[1]-m,d=n[2]-p;for(let M=e;M<o;++M){const t=s[M];let n=3*t,e=u*i[n++],o=f[e++],r=f[e++],g=f[e];e=u*i[n++];let y=f[e++],j=f[e++],T=f[e];e=u*i[n];let I=f[e++],V=f[e++],L=f[e];null!=c&&([o,r,g]=c.applyToVertex(o,r,g,M),[y,j,T]=c.applyToVertex(y,j,T,M),[I,V,L]=c.applyToVertex(I,V,L,M));const N=y-o,O=j-r,A=T-g,E=I-o,P=V-r,S=L-g,U=b*S-P*d,W=d*E-S*h,k=h*P-E*b,B=N*U+O*W+A*k;if(Math.abs(B)<=Number.EPSILON)continue;const C=a-o,z=m-r,H=p-g,R=C*U+z*W+H*k;if(B>0){if(R<0||R>B)continue}else if(R>0||R<B)continue;const Y=z*A-O*H,q=H*N-A*C,w=C*O-N*z,D=h*Y+b*q+d*w;if(B>0){if(D<0||R+D>B)continue}else if(D>0||R+D<B)continue;const F=(E*Y+P*q+S*w)/B;if(F>=0){l(F,v(N,O,A,E,P,S,x),t,!1)}}}const y=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)(),j=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__.c)();function v(t,n,r,s,c,l,f){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(y,t,n,r),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(j,s,c,l),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.b)(f,y,j),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.n)(f,f),f}function T(t,n,o){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,1/(n[0]-t[0]),1/(n[1]-t[1]),1/(n[2]-t[2]))}function I(t,n,e,o){return V(t,n,e,o,1/0)}function V(t,n,e,o,i){const r=(t[0]-o-n[0])*e[0],s=(t[3]+o-n[0])*e[0];let c=Math.min(r,s),l=Math.max(r,s);const f=(t[1]-o-n[1])*e[1],u=(t[4]+o-n[1])*e[1];if(l=Math.min(l,Math.max(f,u)),l<0)return!1;if(c=Math.max(c,Math.min(f,u)),c>l)return!1;const a=(t[2]-o-n[2])*e[2],m=(t[5]+o-n[2])*e[2];return l=Math.min(l,Math.max(a,m)),!(l<0)&&(c=Math.max(c,Math.min(a,m)),!(c>l)&&c<i)}function L(t,e,o,i,r){let s=(o.screenLength||0)*t.pixelRatio;null!=r&&(s=(0,_lib_screenSizePerspectiveUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .scale */ .hs)(s,i,e,r));const c=s*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return (0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)(c*e,o.minWorldLength||0,null!=o.maxWorldLength?o.maxWorldLength:1/0)}function N(t,n){const e=n?N(n):{};for(const o in t){let n=t[o];n?.forEach&&(n=A(n)),null==n&&o in e||(e[o]=n)}return e}function O(n,e){let o=!1;for(const i in e){const r=e[i];void 0!==r&&(Array.isArray(r)?null===n[i]?(n[i]=r.slice(),o=!0):(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .update */ .yo)(n[i],r)&&(o=!0):n[i]!==r&&(o=!0,n[i]=r))}return o}function A(t){const n=[];return t.forEach((t=>n.push(t))),n}const E={multiply:1,ignore:2,replace:3,tint:4},P=1e3;


/***/ }),

/***/ 81500:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hk: () => (/* binding */ b),
/* harmony export */   Pq: () => (/* binding */ y),
/* harmony export */   SA: () => (/* binding */ E),
/* harmony export */   Ut: () => (/* binding */ p),
/* harmony export */   p1: () => (/* binding */ O),
/* harmony export */   tH: () => (/* binding */ R),
/* harmony export */   tb: () => (/* binding */ S),
/* harmony export */   uO: () => (/* binding */ d),
/* harmony export */   zC: () => (/* binding */ A)
/* harmony export */ });
/* unused harmony exports writeBufferMat3f, writeBufferMat4f, writeBufferVec2, writeBufferVec3, writeColorFeatureAttribute, writeTangent */
/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(37046);
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57813);
/* harmony import */ var _lib_Util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58947);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(e,t,f,o=1){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===o)for(let l=0;l<c;++l)s[f]=r[i[l]],f+=n;else for(let l=0;l<c;++l){const e=r[i[l]];for(let t=0;t<o;t++)s[f]=e,f+=n}}function u(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=2*r[c];i[f]=o[e],i[f+1]=o[e+1],f+=s}}function a(e,t,f,o){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,null==o||1===o)for(let l=0;l<c;++l){const e=3*i[l];s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],f+=n}else for(let l=0;l<c;++l){const e=3*i[l];for(let t=0;t<o;++t)s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],f+=n}}function p(e,t,f,o=1){const{data:r,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===o)for(let l=0;l<c;++l){const e=4*i[l];s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],s[f+3]=r[e+3],f+=n}else for(let l=0;l<c;++l){const e=4*i[l];for(let t=0;t<o;++t)s[f]=r[e],s[f+1]=r[e+1],s[f+2]=r[e+2],s[f+3]=r[e+3],f+=n}}function y(e,t,f){const o=e.typedBuffer,r=e.typedBufferStride;t*=r;for(let i=0;i<f;++i)o[t]=0,o[t+1]=0,o[t+2]=0,o[t+3]=0,t+=r}function B(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=9*r[c];for(let t=0;t<9;++t)i[f+t]=o[e+t];f+=s}}function g(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length;f*=s;for(let c=0;c<n;++c){const e=16*r[c];for(let t=0;t<16;++t)i[f+t]=o[e+t];f+=s}}function b(t,f,o,r,i=1){if(!f)return void a(t,o,r,i);const{data:s,indices:n}=t,c=o.typedBuffer,l=o.typedBufferStride,d=n.length,u=f[0],p=f[1],y=f[2],B=f[4],g=f[5],b=f[6],O=f[8],h=f[9],S=f[10],N=f[12],R=f[13],E=f[14];r*=l;let A=0,L=0,z=0;const F=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.y)(f)?e=>{A=s[e]+N,L=s[e+1]+R,z=s[e+2]+E}:e=>{const t=s[e],f=s[e+1],o=s[e+2];A=u*t+B*f+O*o+N,L=p*t+g*f+h*o+R,z=y*t+b*f+S*o+E};if(1===i)for(let e=0;e<d;++e)F(3*n[e]),c[r]=A,c[r+1]=L,c[r+2]=z,r+=l;else for(let e=0;e<d;++e){F(3*n[e]);for(let e=0;e<i;++e)c[r]=A,c[r+1]=L,c[r+2]=z,r+=l}}function O(f,o,r,i,s=1){if(!o)return void a(f,r,i,s);const{data:n,indices:c}=f,l=o,d=r.typedBuffer,u=r.typedBufferStride,p=c.length,y=l[0],B=l[1],g=l[2],b=l[4],O=l[5],h=l[6],S=l[8],N=l[9],R=l[10],E=!(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.z)(l),A=1e-6,L=1-A;i*=u;let z=0,F=0,I=0;const T=(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.y)(l)?e=>{z=n[e],F=n[e+1],I=n[e+2]}:e=>{const t=n[e],f=n[e+1],o=n[e+2];z=y*t+b*f+S*o,F=B*t+O*f+N*o,I=g*t+h*f+R*o};if(1===s)if(E)for(let e=0;e<p;++e){T(3*c[e]);const t=z*z+F*F+I*I;if(t<L&&t>A){const e=1/Math.sqrt(t);d[i]=z*e,d[i+1]=F*e,d[i+2]=I*e}else d[i]=z,d[i+1]=F,d[i+2]=I;i+=u}else for(let e=0;e<p;++e)T(3*c[e]),d[i]=z,d[i+1]=F,d[i+2]=I,i+=u;else for(let e=0;e<p;++e){if(T(3*c[e]),E){const e=z*z+F*F+I*I;if(e<L&&e>A){const t=1/Math.sqrt(e);z*=t,F*=t,I*=t}}for(let e=0;e<s;++e)d[i]=z,d[i+1]=F,d[i+2]=I,i+=u}}function h(e,f,o,r,i=1){if(!f)return void p(e,o,r,i);const{data:s,indices:n}=e,c=f,l=o.typedBuffer,d=o.typedBufferStride,u=n.length,a=c[0],y=c[1],B=c[2],g=c[4],b=c[5],O=c[6],h=c[8],S=c[9],N=c[10],R=!(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_0__.z)(c),E=1e-6,A=1-E;if(r*=d,1===i)for(let t=0;t<u;++t){const e=4*n[t],f=s[e],o=s[e+1],i=s[e+2],c=s[e+3];let u=a*f+g*o+h*i,p=y*f+b*o+S*i,L=B*f+O*o+N*i;if(R){const e=u*u+p*p+L*L;if(e<A&&e>E){const t=1/Math.sqrt(e);u*=t,p*=t,L*=t}}l[r]=u,l[r+1]=p,l[r+2]=L,l[r+3]=c,r+=d}else for(let t=0;t<u;++t){const e=4*n[t],f=s[e],o=s[e+1],c=s[e+2],u=s[e+3];let p=a*f+g*o+h*c,L=y*f+b*o+S*c,z=B*f+O*o+N*c;if(R){const e=p*p+L*L+z*z;if(e<A&&e>E){const t=1/Math.sqrt(e);p*=t,L*=t,z*=t}}for(let t=0;t<i;++t)l[r]=p,l[r+1]=L,l[r+2]=z,l[r+3]=u,r+=d}}function S(e,t,f,o,r=1){const{data:i,indices:s}=e,n=f.typedBuffer,c=f.typedBufferStride,l=s.length;if(o*=c,t!==i.length||4!==t)if(1!==r)if(4!==t)for(let d=0;d<l;++d){const e=3*s[d];for(let t=0;t<r;++t)n[o]=i[e],n[o+1]=i[e+1],n[o+2]=i[e+2],n[o+3]=255,o+=c}else for(let d=0;d<l;++d){const e=4*s[d];for(let t=0;t<r;++t)n[o]=i[e],n[o+1]=i[e+1],n[o+2]=i[e+2],n[o+3]=i[e+3],o+=c}else{if(4===t){for(let e=0;e<l;++e){const t=4*s[e];n[o]=i[t],n[o+1]=i[t+1],n[o+2]=i[t+2],n[o+3]=i[t+3],o+=c}return}for(let e=0;e<l;++e){const t=3*s[e];n[o]=i[t],n[o+1]=i[t+1],n[o+2]=i[t+2],n[o+3]=255,o+=c}}else{n[o]=i[0],n[o+1]=i[1],n[o+2]=i[2],n[o+3]=i[3];const e=new Uint32Array(f.typedBuffer.buffer,f.start),t=c/4,s=e[o/=4];o+=t;const d=l*r;for(let f=1;f<d;++f)e[o]=s,o+=t}}function N(e,t,f){const{data:o,indices:r}=e,i=t.typedBuffer,s=t.typedBufferStride,n=r.length,c=o[0];f*=s;for(let l=0;l<n;++l)i[f]=c,f+=s}function R(e,t,f,o,r=1){const i=t.typedBuffer,s=t.typedBufferStride;if(o*=s,1===r)for(let n=0;n<f;++n)i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2],i[o+3]=e[3],o+=s;else for(let n=0;n<f;++n)for(let t=0;t<r;++t)i[o]=e[0],i[o+1]=e[1],i[o+2]=e[2],i[o+3]=e[3],o+=s}function E(e,t,o,r,i,s){for(const n of t.fields.keys()){const t=e.attributes.get(n),c=t?.indices;if(t&&c)A(n,t,o,r,i,s);else if(n===_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.OBJECTANDLAYERIDCOLOR&&null!=e.objectAndLayerIdColor){const t=e.attributes.get(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.POSITION)?.indices;if(t){const o=t.length,r=i.getField(n,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u8 */ .XP);R(e.objectAndLayerIdColor,r,o,s)}}}}function A(e,t,d,a,y,B){switch(e){case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.POSITION:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(3===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f */ .xs);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&b(t,d,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.NORMAL:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(3===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f */ .xs);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&O(t,a,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.NORMALCOMPRESSED:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(2===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i16 */ .mJ);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&u(t,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.UV0:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(2===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f */ .gH);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&u(t,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.COLOR:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.SYMBOLCOLOR:{const o=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u8 */ .XP);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!o,`No buffer view for ${e}`),(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(3===t.size||4===t.size),!o||3!==t.size&&4!==t.size||S(t,t.size,o,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE:{const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat */ .Y$);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(1===t.size),f&&1===t.size&&N(t,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.TANGENT:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(4===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f */ .Eq);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&h(t,a,f,B);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.PROFILERIGHT:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.PROFILEUP:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.PROFILEVERTEXANDNORMAL:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexAttribute */ .r.FEATUREVALUE:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(4===t.size);const f=y.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f */ .Eq);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),f&&p(t,f,B)}}}


/***/ }),

/***/ 86868:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Xq: () => (/* binding */ n),
/* harmony export */   wk: () => (/* binding */ h)
/* harmony export */ });
/* unused harmony export getStipplePatternForPatternStyle */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},o={dash:t.dash,"dash-dot":[...t.dash,...t.dot],dot:t.dot,"long-dash":t["long-dash"],"long-dash-dot":[...t["long-dash"],...t.dot],"long-dash-dot-dot":[...t["long-dash"],...t.dot,...t.dot],none:null,"short-dash":t["short-dash"],"short-dash-dot":[...t["short-dash"],...t["short-dot"]],"short-dash-dot-dot":[...t["short-dash"],...t["short-dot"],...t["short-dot"]],"short-dot":t["short-dot"],solid:null},d=8;function s(t,o){return null==t?t:{pattern:t.slice(),pixelRatio:o}}function h(t){return{pattern:[t,t],pixelRatio:2}}function n(t){return null!=t&&"style"===t.type?l(t.style):null}function l(t){return null!=t?s(o[t],d):null}


/***/ }),

/***/ 12221:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Jr: () => (/* binding */ u),
/* harmony export */   Rk: () => (/* binding */ n),
/* harmony export */   d_: () => (/* binding */ s),
/* harmony export */   mX: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21839);
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22279);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function u({normalTexture:u,metallicRoughnessTexture:n,metallicFactor:r,roughnessFactor:s,emissiveTexture:o,emissiveFactor:t,occlusionTexture:c}){return null==u&&null==n&&null==o&&(null==t||(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.h)(t,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.Z))&&null==c&&(null==s||1===s)&&(null==r||1===r||0===r)}const n=[1,1,.5],r=[0,.6,.2],s=[0,1,.2];


/***/ }),

/***/ 29688:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ci: () => (/* binding */ n),
/* harmony export */   PC: () => (/* binding */ r),
/* harmony export */   Vk: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/* harmony import */ var _webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t,e){return null==t&&(t=[]),t.push(e),t}function r(t,e){if(null==t)return null;const n=t.filter((t=>t!==e));return 0===n.length?null:n}function s(t,n,r,s,u){l[0]=t.get(n,0),l[1]=t.get(n,1),l[2]=t.get(n,2),(0,_webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .encodeDoubleArray */ .jS)(l,o,3),r.set(u,0,o[0]),s.set(u,0,o[1]),r.set(u,1,o[2]),s.set(u,1,o[3]),r.set(u,2,o[4]),s.set(u,2,o[5])}const l=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)(),o=new Float32Array(6);


/***/ }),

/***/ 73418:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R5: () => (/* binding */ q),
/* harmony export */   V: () => (/* binding */ N),
/* harmony export */   uD: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22279);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52712);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10714);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(55274);
/* harmony import */ var _core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(81283);
/* harmony import */ var _core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(26139);
/* harmony import */ var _core_shaderLibrary_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(82089);
/* harmony import */ var _core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(33448);
/* harmony import */ var _core_shaderTechnique_ReloadableShaderModule_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(47705);
/* harmony import */ var _core_shaderTechnique_ShaderTechnique_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33444);
/* harmony import */ var _lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(91013);
/* harmony import */ var _lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(13148);
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(45722);
/* harmony import */ var _lib_OrderIndependentTransparency_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1931);
/* harmony import */ var _lib_Program_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(58123);
/* harmony import */ var _lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(98546);
/* harmony import */ var _lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(81868);
/* harmony import */ var _materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(12221);
/* harmony import */ var _chunks_DefaultMaterial_glsl_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(90618);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(41746);
/* harmony import */ var _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(2449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class k extends _core_shaderLibrary_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexNormalPassParameters */ .Zo{constructor(){super(...arguments),this.isSchematic=!1,this.usePBR=!1,this.mrrFactors=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.e)(_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_15__/* .defaultAdvancedMRRFactors */ .Rk),this.hasVertexColors=!1,this.hasSymbolColors=!1,this.doubleSided=!1,this.doubleSidedType="normal",this.cullFace=_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .CullFaceOptions */ .s2.Back,this.isInstanced=!1,this.hasInstancedColor=!1,this.emissiveFactor=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(0,0,0),this.instancedDoublePrecision=!1,this.normalType=_core_shaderLibrary_attributes_NormalAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .NormalType */ .W.Attribute,this.receiveShadows=!0,this.castShadows=!0,this.shadowMappingEnabled=!1,this.ambient=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(.2,.2,.2),this.diffuse=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.f)(.8,.8,.8),this.externalColor=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__.f)(1,1,1,1),this.colorMixMode="multiply",this.opacity=1,this.layerOpacity=1,this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)(),this.hasSlicePlane=!1,this.hasSliceHighlight=!0,this.offsetTransparentBackfaces=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.modelTransformation=null,this.transparent=!1,this.writeDepth=!0,this.customDepthTest=_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .DepthTestFunction */ .it.Less,this.textureAlphaMode=_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .AlphaDiscardMode */ .sf.Blend,this.textureAlphaCutoff=_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_19__/* .defaultMaskAlphaCutoff */ .H,this.textureAlphaPremultiplied=!1,this.hasOccludees=!1,this.renderOccluded=_lib_Material_js__WEBPACK_IMPORTED_MODULE_10__/* .RenderOccludedFlag */ .m$.Occlude,this.isDecoration=!1}}class N extends _core_shaderLibrary_attributes_VertexNormal_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexNormalDrawParameters */ .gy{constructor(){super(...arguments),this.origin=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__.c)(),this.slicePlaneLocalOrigin=this.origin}}class q extends _core_shaderTechnique_ShaderTechnique_js__WEBPACK_IMPORTED_MODULE_7__/* .ShaderTechnique */ .w{initializeConfiguration(e,t){t.spherical=e.viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_2__/* .ViewingMode */ .RT.Global,t.doublePrecisionRequiresObfuscation=e.rctx.driverTest.doublePrecisionRequiresObfuscation.result,t.textureCoordinateType=t.hasColorTexture||t.hasMetallicRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture||t.hasNormalTexture?_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureCoordinateAttributeType */ .q.Default:_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureCoordinateAttributeType */ .q.None,t.objectAndLayerIdColorInstanced=t.instanced}initializeProgram(e){return this._initializeProgram(e,q.shader)}_initializeProgram(e,t){return new _lib_Program_js__WEBPACK_IMPORTED_MODULE_12__/* .Program */ .B(e.rctx,t.get().build(this.configuration),_lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_9__/* .Default3D */ .D)}_convertDepthTestFunction(e){return e===_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .DepthTestFunction */ .it.Lequal?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_17__/* .CompareFunction */ .MT.LEQUAL:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_17__/* .CompareFunction */ .MT.LESS}_makePipeline(e,t){const i=this.configuration,r=e===_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_14__/* .TransparencyPassType */ .y.NONE,s=e===_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_14__/* .TransparencyPassType */ .y.FrontFace;return (0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_18__/* .makePipelineState */ .Ey)({blending:i.output!==_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.Color&&i.output!==_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_3__/* .ShaderOutput */ .V.Alpha||!i.transparent?null:r?_lib_OrderIndependentTransparency_js__WEBPACK_IMPORTED_MODULE_11__/* .blendingDefault */ .V0:(0,_lib_OrderIndependentTransparency_js__WEBPACK_IMPORTED_MODULE_11__/* .oitBlending */ .ez)(e),culling:z(i)?(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_18__/* .cullingParams */ .Xt)(i.cullFace):null,depthTest:{func:(0,_lib_OrderIndependentTransparency_js__WEBPACK_IMPORTED_MODULE_11__/* .oitDepthTest */ .K_)(e,this._convertDepthTestFunction(i.customDepthTest))},depthWrite:(r||s)&&i.writeDepth?_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_18__/* .defaultDepthWriteParams */ .kn:null,colorWrite:_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_18__/* .defaultColorWriteParams */ .wE,stencilWrite:i.hasOccludees?_lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .stencilWriteMaskOn */ .v0:null,stencilTest:i.hasOccludees?t?_lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .stencilToolMaskBaseParams */ .a9:_lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .stencilBaseAllZerosParams */ .qh:null,polygonOffset:r||s?null:(0,_lib_OrderIndependentTransparency_js__WEBPACK_IMPORTED_MODULE_11__/* .getOITPolygonOffset */ .aB)(i.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._makePipeline(this.configuration.transparencyPassType,!0),this._makePipeline(this.configuration.transparencyPassType,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}function z(e){return e.cullFace!==_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_8__/* .CullFaceOptions */ .s2.None||!e.hasSlicePlane&&(!e.transparent&&!e.doubleSidedMode)}q.shader=new _core_shaderTechnique_ReloadableShaderModule_js__WEBPACK_IMPORTED_MODULE_20__/* .ReloadableShaderModule */ .$(_chunks_DefaultMaterial_glsl_js__WEBPACK_IMPORTED_MODULE_16__.D,(()=>__webpack_require__.e(/* import() */ 1318).then(__webpack_require__.bind(__webpack_require__, 71318))));


/***/ }),

/***/ 58376:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dt: () => (/* binding */ a),
/* harmony export */   kJ: () => (/* binding */ s),
/* harmony export */   lM: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69948);
/* harmony import */ var _lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81868);
/* harmony import */ var _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9319);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var p,s;!function(o){o[o.Draped=0]="Draped",o[o.Screen=1]="Screen",o[o.World=2]="World",o[o.COUNT=3]="COUNT"}(p||(p={})),function(o){o[o.Center=0]="Center",o[o.Tip=1]="Tip",o[o.COUNT=2]="COUNT"}(s||(s={}));class a extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .DefaultTechniqueConfiguration */ .E{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__/* .TransparencyPassType */ .y.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.writeDepth=!1,this.space=p.Screen,this.hideOnShortSegments=!1,this.hasCap=!1,this.anchor=s.Center,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1}get draped(){return this.space===p.Draped}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.COUNT})],a.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__/* .TransparencyPassType */ .y.COUNT})],a.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:p.COUNT})],a.prototype,"space",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"hideOnShortSegments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"hasCap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:s.COUNT})],a.prototype,"anchor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"hasTip",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"multipassEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],a.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!1})],a.prototype,"occlusionPass",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!0})],a.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!0})],a.prototype,"hasSliceTranslatedView",void 0);


/***/ }),

/***/ 16906:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ s),
/* harmony export */   x: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(69948);
/* harmony import */ var _lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(81868);
/* harmony import */ var _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9319);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var r;!function(o){o[o.BUTT=0]="BUTT",o[o.SQUARE=1]="SQUARE",o[o.ROUND=2]="ROUND",o[o.COUNT=3]="COUNT"}(r||(r={}));class s extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .DefaultTechniqueConfiguration */ .E{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color,this.capType=r.BUTT,this.transparencyPassType=_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__/* .TransparencyPassType */ .y.NONE,this.occluder=!1,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.multipassEnabled=!1,this.cullAboveGround=!1,this.wireframe=!1,this.objectAndLayerIdColorInstanced=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.COUNT})],s.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:r.COUNT})],s.prototype,"capType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({count:_lib_TransparencyPassType_js__WEBPACK_IMPORTED_MODULE_3__/* .TransparencyPassType */ .y.COUNT})],s.prototype,"transparencyPassType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"hasPolygonOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"draped",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"stippleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"stippleOffColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"stipplePreferContinuous",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"roundJoins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"applyMarkerOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"falloffEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"innerColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"multipassEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"cullAboveGround",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"wireframe",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)()],s.prototype,"objectAndLayerIdColorInstanced",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!1})],s.prototype,"occlusionPass",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!0})],s.prototype,"hasVvInstancing",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .parameter */ .W)({constValue:!0})],s.prototype,"hasSliceTranslatedView",void 0);


/***/ }),

/***/ 9049:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17306);
/* harmony import */ var _core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65667);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(6267);
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84410);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(4238);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let d=class extends((0,_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__/* .IdentifiableMixin */ .sA)((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__/* .EsriPromiseMixin */ .g)(_core_Evented_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)))){constructor(e){super(e),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__/* .UpdatingHandles */ .U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_12__/* .destroyMaybe */ .pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;return t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"visible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"view",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__/* .subclass */ .$)("esri.views.layers.LayerView")],d);const u=d;


/***/ }),

/***/ 89423:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86942);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const _=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.BufferObject");class h{static createIndex(e,t,r){return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER,t,r)}static createVertex(e,t,r){return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER,t,r)}static createUniform(e,t,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Uniform buffers are supported in WebGL2 only!");return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.UNIFORM_BUFFER,t,r)}static createPixelPack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Pixel pack buffers are supported in WebGL2 only!");const i=new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER,t);return r&&i.setSize(r),i}static createPixelUnpack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_DRAW,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Pixel unpack buffers are supported in WebGL2 only!");return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_UNPACK_BUFFER,t,r)}constructor(e,t,r,i){this._context=e,this.bufferType=t,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(this._context.gl),i&&this.setData(i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteLength(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER?this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._context=null}else this._glName&&_.warn("Leaked WebGL buffer object")}setSize(e,t=null){if(e<=0&&_.error("Buffer size needs to be positive!"),this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT:e*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__/* .isUint16Array */ .jq)(e)&&(t/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT),(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__/* .isUint32Array */ .XJ)(e)&&(t/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e,t=null){this._size=e;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const i=this._context.gl;null!=t?i.bufferData(this.bufferType,t,this.usage):i.bufferData(this.bufferType,e,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(i),this._isVAOAware&&this._context.bindVAO(r)}setSubData(e,t,r,i){if(!e)return;(t<0||t*e.BYTES_PER_ELEMENT>=this.byteLength)&&_.error("offset is out of range!"),r>=i&&_.error("end must be bigger than start!"),(t+(i-r))*e.BYTES_PER_ELEMENT>this.byteLength&&_.error("An attempt to write beyond the end of the buffer!");const o=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const a=this._context.gl;if(this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,r,i-r);else{const s=0===r&&i===e.length?e:e.subarray(r,i);a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,s)}(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(a),this._isVAOAware&&this._context.bindVAO(o)}getSubData(e,t=0,r,i){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)return void _.error("Get buffer subdata is supported in WebGL2 only!");if(r<0||i<0)return void _.error("Problem getting subdata: offset and length were less than zero!");const s=E(e)?e.BYTES_PER_ELEMENT:1;if(s*((r??0)+(i??0))>e.byteLength)return void _.error("Problem getting subdata: offset and length exceeded destination size!");t+s*(i??0)>this.byteLength&&_.warn("Potential problem getting subdata: requested data exceeds buffer size!");const a=this._context.gl;this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER),a.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER,t,e,r,i),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER)}async getSubDataAsync(e,t=0,r,i){this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2?(await this._context.clientWaitAsync(),this.getSubData(e,t,r,i)):_.error("Get buffer subdata is supported in WebGL2 only!")}}function E(t){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isArrayLike */ .Xj)(t)}


/***/ }),

/***/ 84852:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony export ensureAttachmentMaxSize */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6267);
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89423);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12966);
/* harmony import */ var _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(74416);
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6940);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const x=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FramebufferObject");class E{constructor(t,e,i=null){this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.FramebufferObject,this);const r=g(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(this._context,e);if(this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0),null!=i)if(b(i))this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),this._depthStencilTexture=g(i)?i:new _Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(this._context,i),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const t=A(i)?i:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_7__/* .Renderbuffer */ .l(this._context,i);this._depthStencilBuffer=t,this._validateRenderBufferDescriptor(t.descriptor)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const t=this._context.getBoundFramebufferObject();if(this._colorAttachments.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0);return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0);return t?.descriptor?.height??0}get gpuMemoryUsage(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+i.gpuMemoryUsage),this.depthStencil?.gpuMemoryUsage??0)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&g(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDescriptor(i),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(e){if(this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t),this._context.bindFramebuffer(e)}return this._colorAttachments.delete(t),e}}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);i&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencil(t){if(t)switch(t.type){case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.Texture:return this._attachDepthStencilTexture(t);case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.RenderBuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const e=t.descriptor;e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelFormat */ .Ab.DEPTH_STENCIL&&e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelFormat */ .Ab.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),e.dataType!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelType */ .ld.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DepthStencilAttachment */ .nI)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DepthStencilAttachment */ .nI)),this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderBufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(e);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,r,i.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=this._getGLAttachmentPoint(t.descriptor);e.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,i,e.RENDERBUFFER,null)}return this._depthStencilBuffer=null,t}copyToTexture(t,e,i,r,s,h,n){(t<0||e<0||s<0||h<0)&&console.error("Offsets cannot be negative!"),(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");const o=n.descriptor;n.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==o?.width||null==o?.height||t+i>this.width||e+r>this.height||s+i>o.width||h+r>o.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const c=this._context,a=c.bindTexture(n,_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES);c.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D,0,s,h,t,e,i,r),c.bindTexture(a,_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,h,n){(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),n||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,i,r,s,h,n)}async readPixelsAsync(t,e,h,n,o,c,a){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)return (0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),void this.readPixels(t,e,h,n,o,c,a);const u=this._context.gl,_=_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__/* .BufferObject */ .g.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,a.byteLength);this._context.bindBuffer(_),this._context.bindFramebuffer(this),u.readPixels(t,e,h,n,o,c,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER),await _.getSubDataAsync(a),_.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const i={width:t,height:e};S(i,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(i.width,i.height))),this._depthStencilTexture?.resize(i.width,i.height),this._initialized&&(S(i,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(i.width,i.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=e.createFramebuffer();if(e.bindFramebuffer(t,i),this._colorAttachments.forEach(((e,i)=>this._framebufferTexture2D(e.glName,i,R(e),t))),this._depthStencilBuffer){const i=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,i,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,R(this._depthStencilTexture),t);if((0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!")}this._glName=i,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0,i=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D,r=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(r,e,i,t,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__/* .disposeMaybe */ .WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__/* .disposeMaybe */ .WD)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),S(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderBufferDescriptor(t){S(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH32F_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===E._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;E._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else E._MAX_COLOR_ATTACHMENTS=1}const i=e-_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0;i+1>E._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${E._MAX_COLOR_ATTACHMENTS} color attachments`)}}function g(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.Texture}function A(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.RenderBuffer}function b(t){return g(t)||null!=t&&"pixelFormat"in t}function S(t,e){const i=Math.max(t.width,t.height);if(i>e){x.warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const r=e/i;return t.width=Math.round(t.width*r),t.height=Math.round(t.height*r),!1}return!0}function R(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP_POSITIVE_X:_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D}E._MAX_COLOR_ATTACHMENTS=-1;


/***/ }),

/***/ 12966:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e;!function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"}(e||(e={}));


/***/ }),

/***/ 74416:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12966);
/* harmony import */ var _RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(94669);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(s,i){this._context=s,this._descriptor=i,this.type=_GLObjectType_js__WEBPACK_IMPORTED_MODULE_2__/* .GLObjectType */ .p.RenderBuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceType */ .vt.Renderbuffer,this);const n=this._context.gl;this.glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:o,height:h,internalFormat:c,multisampled:f}=i;if(f){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ContextType */ .EL.WEBGL2)throw new Error("Multisampled renderbuffers are not supported in WebGL1!");n.renderbufferStorageMultisample(n.RENDERBUFFER,this.samples,c,o,h)}else n.renderbufferStorage(n.RENDERBUFFER,c,o,h)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get gpuMemoryUsage(){return (0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* .estimateMemory */ .e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;if(this._context.bindRenderbuffer(this),r.multisampled){s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height)}else s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceType */ .vt.Renderbuffer,this),this._context=null)}}


/***/ }),

/***/ 94669:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ h),
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(t,i,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__/* .getBytesPerElementFormat */ .IB)(i.internalFormat)}


/***/ }),

/***/ 6940:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  g: () => (/* binding */ T)
});

// UNUSED EXPORTS: clearUnestimatedTextures

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/contextUtils.js
var contextUtils = __webpack_require__(21946);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/GLObjectType.js
var GLObjectType = __webpack_require__(12966);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/webgl/ValidatedTextureDescriptor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends TextureDescriptor/* TextureDescriptor */.R{constructor(t,a){switch(super(),this.context=t,Object.assign(this,a),this.internalFormat){case enums/* SizedPixelFormat */.H0.R16F:case enums/* SizedPixelFormat */.H0.R16I:case enums/* SizedPixelFormat */.H0.R16UI:case enums/* SizedPixelFormat */.H0.R32F:case enums/* SizedPixelFormat */.H0.R32I:case enums/* SizedPixelFormat */.H0.R32UI:case enums/* SizedPixelFormat */.H0.R8_SNORM:case enums/* SizedPixelFormat */.H0.R8:case enums/* SizedPixelFormat */.H0.R8I:case enums/* SizedPixelFormat */.H0.R8UI:this.pixelFormat=enums/* PixelFormat */.Ab.RED}}static validate(s,e){return new a(s,e)}}

;// ../node_modules/@arcgis/core/views/webgl/Texture.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=4;let T=class{constructor(e,i=null,o=null){if(this.type=GLObjectType/* GLObjectType */.p.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,o=i;else{const r=a.validate(e,i);if(!r)throw new Error/* default */.A("Texture descriptor invalid");this._descriptor=r}if(this._descriptor.context.type!==contextUtils/* ContextType */.EL.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),R(this._descriptor.target)))throw new Error/* default */.A("3D and array textures are not supported in WebGL1");this._descriptor.target===enums/* TextureType */.Ap.TEXTURE_CUBE_MAP?this._setDataCubeMap(o):this.setData(o)}get glName(){return this._glName}get descriptor(){return this._descriptor}get gpuMemoryUsage(){return P.delete(this),(0,TextureDescriptor/* estimateMemory */.e)(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(enums/* ResourceType */.vt.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new Error/* default */.A("Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===enums/* TextureType */.Ap.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let e=enums/* TextureType */.Ap.TEXTURE_CUBE_MAP_POSITIVE_X;e<=enums/* TextureType */.Ap.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(t,e)}setData(t){this._setData(t)}_setData(e,r){if(!this._descriptor.context?.gl)return;const s=this._descriptor.context.gl;(0,checkWebGLError/* checkWebGLError */.Y2)(s),this._glName||(this._glName=s.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(enums/* ResourceType */.vt.Texture,this)),void 0===e&&(e=null);const a=this._descriptor,n=r??a.target,h=R(n);null===e&&(a.width=a.width||u,a.height=a.height||u,h&&(a.depth=a.depth??1));const p=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES),g(this._descriptor.context,a),this._configurePixelStorage(),(0,checkWebGLError/* checkWebGLError */.Y2)(s);const l=this._deriveInternalFormat();if(D(e)){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;const o=1;e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),a.width&&a.height,h&&a.depth,a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,a.hasMipmap,t,r,o),this._texImage(n,0,l,t,r,o,e),(0,checkWebGLError/* checkWebGLError */.Y2)(s),a.hasMipmap&&this.generateMipmap(),a.width||(a.width=t),a.height||(a.height=r),h&&!a.depth&&(a.depth=o)}else{const{width:r,height:o,depth:p}=a;if(null==r||null==o)throw new Error/* default */.A("Width and height must be specified!");if(h&&null==p)throw new Error/* default */.A("Depth must be specified!");if(a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,a.hasMipmap,r,o,p),A(e)){const i=e.levels,h=b(n,r,o,p),d=Math.min(h-1,i.length-1);null!=this._descriptor.context.gl2?s.texParameteri(a.target,this._descriptor.context.gl2.TEXTURE_MAX_LEVEL,d):a.hasMipmap=a.hasMipmap&&h===i.length;const c=l;if(!w(c))throw new Error/* default */.A("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel(((t,e,r,s)=>{const o=i[Math.min(t,i.length-1)];this._compressedTexImage(n,t,c,e,r,s,o)}),d)}else this._texImage(n,0,l,r,o,p,e),(0,checkWebGLError/* checkWebGLError */.Y2)(s),a.hasMipmap&&this.generateMipmap()}x(s,this._descriptor),E(s,this._descriptor),f(this._descriptor.context,this._descriptor),(0,checkWebGLError/* checkWebGLError */.Y2)(s),this._descriptor.context.bindTexture(p,T.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,i,r,s,o,a,n=0){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const h=this._descriptor.context.gl,p=this._descriptor.context.gl2,l=this._descriptor,d=this._deriveInternalFormat(),{pixelFormat:c,dataType:_,target:m,isImmutable:u}=l;if(u&&!this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot update immutable texture before allocation!");const g=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES,!0);if((i<0||r<0||s>l.width||o>l.height||i+s>l.width||r+o>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),n){if(!p)return void console.error("Webgl2 must be enabled to use dataRowOffset!");h.pixelStorei(p.UNPACK_SKIP_ROWS,n)}if(D(a)?p?p.texSubImage2D(m,e,i,r,s,o,c,_,a):h.texSubImage2D(m,e,i,r,c,_,a):A(a)?h.compressedTexSubImage2D(m,e,i,r,s,o,d,a.levels[e]):h.texSubImage2D(m,e,i,r,s,o,c,_,a),n){if(!p)return void console.error("Webgl2 must be enabled to use dataRowOffset!");h.pixelStorei(p.UNPACK_SKIP_ROWS,0)}this._descriptor.context.bindTexture(g,T.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,o,a,n,h){h||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const p=this._descriptor.context.gl2;if(null==p)throw new Error/* default */.A("3D textures are not supported in WebGL1");const l=this._descriptor,d=this._deriveInternalFormat(),{pixelFormat:c,dataType:_,isImmutable:m,target:u}=l;if(m&&!this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot update immutable texture before allocation!");R(u)||console.warn("Attempting to set 3D texture data on a non-3D texture");const g=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);if(this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||o>l.width||a>l.height||n>l.depth||i+o>l.width||r+a>l.height||s+n>l.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),A(h))h=h.levels[e],p.compressedTexSubImage3D(u,e,i,r,s,o,a,n,d,h);else{const t=h;p.texSubImage3D(u,e,i,r,s,o,a,n,c,_,t)}this._descriptor.context.bindTexture(g,T.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,g(this._descriptor.context,e)}e.samplingMode===enums/* TextureSamplingMode */.Cj.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_NEAREST):e.samplingMode===enums/* TextureSamplingMode */.Cj.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,T.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,g(this._descriptor.context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor.context.gl,e=this._descriptor;this._samplingModeDirty&&(x(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(E(t,e),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.context.type===contextUtils/* ContextType */.EL.WEBGL1)return this._descriptor.internalFormat=this._descriptor.pixelFormat;if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===enums/* PixelFormat */.Ab.DEPTH_STENCIL&&(this._descriptor.internalFormat=enums/* PixelFormat */.Ab.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case enums/* PixelType */.ld.FLOAT:switch(this._descriptor.pixelFormat){case enums/* PixelFormat */.Ab.RGBA:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGBA32F;case enums/* PixelFormat */.Ab.RGB:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGB32F;default:throw new Error/* default */.A("Unable to derive format")}case enums/* PixelType */.ld.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case enums/* PixelFormat */.Ab.RGBA:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGBA8;case enums/* PixelFormat */.Ab.RGB:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===enums/* PixelFormat */.Ab.DEPTH_STENCIL?enums/* PixelFormat */.Ab.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_texStorage(e,i,r,s,o,a){const n=this._descriptor.context.gl2;if(null==n)throw new Error/* default */.A("Immutable textures are not supported in WebGL1");if(!M(i))throw new Error/* default */.A("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const h=r?b(e,s,o,a):1;if(R(e)){if(null==a)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");n.texStorage3D(e,h,i,s,o,a)}else n.texStorage2D(e,h,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,s,o,a,n,h){const p=this._descriptor.context.gl,l=R(e),{isImmutable:d,pixelFormat:c,dataType:_}=this._descriptor,m=this._descriptor.context.type===contextUtils/* ContextType */.EL.WEBGL2,u=m?p:null;if(m||!D(h))if(d){if(null!=h){const r=h;if(l){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");u.texSubImage3D(e,i,0,0,0,o,a,n,c,_,r)}else p.texSubImage2D(e,i,0,0,o,a,c,_,r)}}else{const r=h;if(l){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");u.texImage3D(e,i,s,o,a,n,0,c,_,r)}else p.texImage2D(e,i,s,o,a,0,c,_,r)}else p.texImage2D(e,0,s,c,_,h)}_compressedTexImage(e,i,s,o,a,n,h){const p=this._descriptor.context.gl;let l=null;const d=R(e),c=this._descriptor.isImmutable;if(d){if(this._descriptor.context.type!==contextUtils/* ContextType */.EL.WEBGL2)throw new Error/* default */.A("3D textures are not supported in WebGL1");l=p}if(c){if(null!=h)if(d){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,o,a,n,s,h)}else p.compressedTexSubImage2D(e,i,0,0,o,a,s,h)}else if(d){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,s,o,a,n,0,h)}else p.compressedTexImage2D(e,i,s,o,a,0,h)}_forEachMipmapLevel(e,i=1/0){let{width:r,height:o,depth:a,hasMipmap:n,target:h}=this._descriptor;const p=h===enums/* TextureType */.Ap.TEXTURE_3D;if(null==r||null==o||p&&null==a)throw new Error/* default */.A("Missing texture dimensions for mipmap calculation");for(let t=0;e(t,r,o,a),n&&(1!==r||1!==o||p&&1!==a)&&!(t>=i);++t)r=Math.max(1,r>>1),o=Math.max(1,o>>1),p&&(a=Math.max(1,a>>1))}};function g(t,i){(null!=i.width&&i.width<0||null!=i.height&&i.height<0||null!=i.depth&&i.depth<0)&&console.error("Negative dimension parameters are not allowed!");const s=t.type===contextUtils/* ContextType */.EL.WEBGL2;if(s||!i.isImmutable&&!R(i.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!"),s)return;null!=i.width&&(0,mathUtils/* isPowerOfTwo */.r6)(i.width)&&null!=i.height&&(0,mathUtils/* isPowerOfTwo */.r6)(i.height)||("number"==typeof i.wrapMode?i.wrapMode!==enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):i.wrapMode.s===enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE&&i.wrapMode.t===enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),i.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}function x(t,e){let i=e.samplingMode,r=e.samplingMode;i===enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_NEAREST||i===enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR?(i=enums/* TextureSamplingMode */.Cj.LINEAR,e.hasMipmap||(r=enums/* TextureSamplingMode */.Cj.LINEAR)):i!==enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_NEAREST&&i!==enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_LINEAR||(i=enums/* TextureSamplingMode */.Cj.NEAREST,e.hasMipmap||(r=enums/* TextureSamplingMode */.Cj.NEAREST)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,r)}function E(t,e){"number"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}function f(t,e){const i=t.capabilities.textureFilterAnisotropic;if(!i)return;t.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}function M(t){return t in enums/* SizedPixelFormat */.H0}function w(t){return t in enums/* CompressedTextureFormat */.CQ}function A(t){return null!=t&&"type"in t&&"compressed"===t.type}function I(t){return null!=t&&"byteLength"in t}function D(t){return null!=t&&!A(t)&&!I(t)}function R(t){return t===enums/* TextureType */.Ap.TEXTURE_3D||t===enums/* TextureType */.Ap.TEXTURE_2D_ARRAY}function b(t,e,i,r=1){let o=Math.max(e,i);return t===enums/* TextureType */.Ap.TEXTURE_3D&&(o=Math.max(o,r)),Math.round(Math.log(o)/Math.LN2)+1}function U(){if(0===P.size)return;const t=new Array;return P.forEach(((e,i)=>t.push([i.gpuMemoryUsage,e]))),P.clear(),t.sort(((t,e)=>e[0]-t[0])),t.reduce(((t,e)=>`${t}\n\n${Math.round(e[0]/1024)}KB: ${e[1]}`),`Total unestimated texture memory: ${Math.round(t.reduce(((t,e)=>t+e[0]),0)/1024)}KB`)}T.TEXTURE_UNIT_FOR_UPDATES=0;const P=new Map;


/***/ }),

/***/ 45758:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ e),
/* harmony export */   e: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(p=0,e=p){this.width=p,this.height=e,this.target=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureType */ .Ap.TEXTURE_2D,this.pixelFormat=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RGBA,this.dataType=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_BYTE,this.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.LINEAR,this.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}}function r(t){return t.width<=0||t.height<=0?0:t.width*t.height*(t.hasMipmap?4/3:1)*(null==t.internalFormat?4:(0,_Util_js__WEBPACK_IMPORTED_MODULE_1__/* .getBytesPerElementFormat */ .IB)(t.internalFormat))}


/***/ }),

/***/ 19282:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hi: () => (/* binding */ o),
/* harmony export */   IB: () => (/* binding */ E),
/* harmony export */   WH: () => (/* binding */ a),
/* harmony export */   yu: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports getStride, vertexCount */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case r.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case r.INVALID_OPERATION:return"The specified command is not allowed for the current state";case r.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case r.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case r.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function n(e,r){return e.vertexBuffers[r].byteLength/R(e.layout[r])}function R(e){return e[0].stride}function i(e,r,t,s,c=0){const a=e.gl;e.bindBuffer(t);for(const n of s){const t=r.get(n.name);void 0===t&&console.error(`There is no location for vertex attribute '${n.name}' defined.`);const s=c*n.stride;if(n.count<=4)a.vertexAttribPointer(t,n.count,n.type,n.normalized,n.stride,n.offset+s),a.enableVertexAttribArray(t),n.divisor>0&&e.gl2?.vertexAttribDivisor(t,n.divisor);else if(9===n.count)for(let r=0;r<3;r++)a.vertexAttribPointer(t+r,3,n.type,n.normalized,n.stride,n.offset+12*r+s),a.enableVertexAttribArray(t+r),n.divisor>0&&e.gl2?.vertexAttribDivisor(t+r,n.divisor);else if(16===n.count)for(let r=0;r<4;r++)a.vertexAttribPointer(t+r,4,n.type,n.normalized,n.stride,n.offset+16*r+s),a.enableVertexAttribArray(t+r),n.divisor>0&&e.gl2?.vertexAttribDivisor(t+r,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count)}}function o(r,t,s,c){const a=r.gl;r.bindBuffer(s);for(const e of c){const s=t.get(e.name);if(e.count<=4)a.disableVertexAttribArray(s),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s,0);else if(9===e.count)for(let t=0;t<3;t++)a.disableVertexAttribArray(s+t),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s+t,0);else if(16===e.count)for(let t=0;t<4;t++)a.disableVertexAttribArray(s+t),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s+t,0);else console.error("Unsupported vertex attribute element count: "+e.count)}r.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferType */ .NZ.ARRAY_BUFFER)}function E(e){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.ALPHA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.LUMINANCE:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RED:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RED_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.STENCIL_INDEX8:return 1;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.LUMINANCE_ALPHA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RG:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RG_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA4:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB565:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB5_A1:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT16:return 2;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH_COMPONENT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGB:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGB_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.SRGB8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT24:return 3;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH_STENCIL:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGBA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGBA_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R11F_G11F_B10F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.SRGB8_ALPHA8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB9_E5:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB10_A2UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB10_A2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_STENCIL:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH24_STENCIL8:return 4;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH32F_STENCIL8:return 5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16UI:return 6;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16UI:return 8;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32UI:return 12;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32UI:return 16;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB_S3TC_DXT1_EXT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_R11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SIGNED_R11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB8_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RG11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SIGNED_RG11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA8_ETC2_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}


/***/ }),

/***/ 80976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86942);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.webgl.VertexArrayObject");let f=class{constructor(t,e,i,r,s=null){this._context=t,this._locations=e,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].byteLength),null!=this._indexBuffer?this._indexBuffer.byteLength:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__/* .typedArrayStaticSize */ .zQ}dispose(){if(this._context){this._context.getBoundVAO()===this&&this._context.bindVAO(null);for(const t in this._buffers)this._buffers[t]?.dispose(),delete this._buffers[t];this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .disposeMaybe */ .WD)(this._indexBuffer),this.disposeVAOOnly()}else(this._glName||Object.getOwnPropertyNames(this._buffers).length>0)&&o.warn("Leaked WebGL VAO")}disposeVAOOnly(){if(this._glName){const t=this._context?.capabilities?.vao;t.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)}this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:t,_layout:e,_indexBuffer:i}=this;t||o.error("Vertex buffer dictionary is empty!");const r=this._context.gl;for(const n in t){const i=t[n];i||o.error("Vertex buffer is uninitialized!");const r=e[n];r||o.error("Vertex element descriptor is empty!"),(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .bindVertexBufferLayout */ .yu)(this._context,this._locations,i,r)}if(null!=i){!!this._context.capabilities.vao?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName):this._context.bindBuffer(i)}}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:t,_layout:e}=this;t||o.error("Vertex buffer dictionary is empty!");for(const i in t){const r=t[i];r||o.error("Vertex buffer is uninitialized!");const s=e[i];(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .unbindVertexBufferLayout */ .Hi)(this._context,this._locations,r,s)}null!=this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}};


/***/ }),

/***/ 16541:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Xc: () => (/* binding */ c),
/* harmony export */   Y2: () => (/* binding */ u),
/* harmony export */   en: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony export hasFeatureFlagWebGLDebug */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.webgl.checkWebGLError");function t(e,r){switch(r){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const n=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("enable-feature:webgl-debug");function a(){return n}function c(){return n}function u(r){if(a()){const n=r.getError();if(n){const a=t(r,n),c=(new Error).stack;o.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-error","WebGL error occurred",{message:a,stack:c}))}}}


/***/ }),

/***/ 76698:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Zo: () => (/* binding */ o),
/* harmony export */   jA: () => (/* binding */ r),
/* harmony export */   jS: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export decodeDoubleArray */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n,o){for(let r=0;r<o;++r)n[2*r]=t[r],n[2*r+1]=t[r]-n[2*r]}function n(t,n,o){for(let r=0;r<o;++r)n[r]=t[2*r]+t[2*r+1]}function o(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],n[r]=e[0];return n}function r(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],e[1]=t[r]-e[0],n[r]=e[1];return n}const e=new Float32Array(2);


/***/ }),

/***/ 2449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ey: () => (/* binding */ S),
/* harmony export */   Ms: () => (/* binding */ G),
/* harmony export */   Xt: () => (/* binding */ h),
/* harmony export */   hG: () => (/* binding */ a),
/* harmony export */   kn: () => (/* binding */ o),
/* harmony export */   ox: () => (/* binding */ s),
/* harmony export */   p3: () => (/* binding */ l),
/* harmony export */   wE: () => (/* binding */ _)
/* harmony export */ });
/* unused harmony exports backFaceCullingParams, makeBlending, makeColorWrite, makeCulling, makeDepthTest, makeDepthWrite, makeDrawBuffers, makePolygonOffset, makeStencilTest, makeStencilWrite */
/* harmony import */ var _3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(t,e,i=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,s=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:s[0],g:s[1],b:s[2],a:s[3]}}}function l(t,e,i,s,l=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,r=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,a=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:s,opRgb:l,opAlpha:r,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}const r={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.BACK,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},a={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.FRONT,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},h=e=>e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Back?r:e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Front?a:null,o={zNear:0,zFar:1},_={r:!0,g:!0,b:!0,a:!0};function c(t){return w.intern(t)}function d(t){return D.intern(t)}function u(t){return O.intern(t)}function f(t){return m.intern(t)}function p(t){return R.intern(t)}function g(t){return P.intern(t)}function v(t){return F.intern(t)}function I(t){return K.intern(t)}function W(t){return x.intern(t)}function S(t){return q.intern(t)}class b{constructor(t,e){this._makeKey=t,this._makeRef=e,this._interns=new Map}intern(t){if(!t)return null;const e=this._makeKey(t),i=this._interns;return i.has(e)||i.set(e,this._makeRef(t)),i.get(e)??null}}function T(t){return"["+t.join(",")+"]"}const w=new b(B,(t=>({__tag:"Blending",...t})));function B(t){return t?T([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const D=new b(y,(t=>({__tag:"Culling",...t})));function y(t){return t?T([t.face,t.mode]):null}const O=new b(C,(t=>({__tag:"PolygonOffset",...t})));function C(t){return t?T([t.factor,t.units]):null}const m=new b(A,(t=>({__tag:"DepthTest",...t})));function A(t){return t?T([t.func]):null}const R=new b(k,(t=>({__tag:"StencilTest",...t})));function k(t){return t?T([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const P=new b(z,(t=>({__tag:"DepthWrite",...t})));function z(t){return t?T([t.zNear,t.zFar]):null}const F=new b(j,(t=>({__tag:"ColorWrite",...t})));function j(t){return t?T([t.r,t.g,t.b,t.a]):null}const K=new b(N,(t=>({__tag:"StencilWrite",...t})));function N(t){return t?T([t.mask]):null}const x=new b(M,(t=>({__tag:"DrawBuffers",...t})));function M(t){return t?T(t.buffers):null}const q=new b(E,(t=>({blending:c(t.blending),culling:d(t.culling),polygonOffset:u(t.polygonOffset),depthTest:f(t.depthTest),stencilTest:p(t.stencilTest),depthWrite:g(t.depthWrite),colorWrite:v(t.colorWrite),stencilWrite:I(t.stencilWrite),drawBuffers:W(t.drawBuffers)})));function E(t){return t?T([B(t.blending),y(t.culling),C(t.polygonOffset),A(t.depthTest),k(t.stencilTest),z(t.depthWrite),j(t.colorWrite),N(t.stencilWrite),M(t.drawBuffers)]):null}class G{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._setDrawBuffers(t.drawBuffers),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(t){this._drawBuffers=this._setSubState(t,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}


/***/ })

};
;