"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[11868,78367,15878],{31828:(e,t,i)=>{i.d(t,{A:()=>u});var r=i(66866),o=i(21564),a=(i(39831),i(539),i(9272),i(63863)),l=i(8651),n=i(68833),s=i(15305),p=i(25389),y=i(91394),d=i(60973);let u=class extends((0,s.dM)((0,p.j)(n.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new y.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,o.MZ)({type:d.A})],u.prototype,"elevationInfo",void 0),(0,r._)([(0,o.MZ)((0,l.C)(y.Y,"graphics"))],u.prototype,"graphics",void 0),(0,r._)([(0,o.MZ)({type:["show","hide"]})],u.prototype,"listMode",void 0),(0,r._)([(0,o.MZ)()],u.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,o.MZ)({readOnly:!0})],u.prototype,"type",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],u.prototype,"internal",void 0),u=(0,r._)([(0,a.$)("esri.layers.GraphicsLayer")],u)},60266:(e,t,i)=>{i.r(t),i.d(t,{default:()=>$});var r=i(66866),o=i(25707),a=i(48982),l=i(98849),n=i(19251),s=i(35775),p=i(76724),y=i(68659),d=i(21564),u=(i(39831),i(539),i(75094)),c=i(63863),f=i(77542),h=i(84698),m=i(68490),g=i(78983),b=i(80510),_=i(65231),M=i(87926),v=i(83780),w=i(31828),S=i(68833),T=i(93317),I=i(15305),O=i(41506),x=i(34722),Z=i(25389),N=i(24738),A=i(68882),F=i(40241),L=i(23369),j=i(42602);function C(e){return"markup"===e.featureCollectionType||e.layers.some((e=>null!=e.layerDefinition.visibilityField||!J(e)))}function J({layerDefinition:e,featureSet:t}){const i=e.geometryType??t.geometryType;return D.find((t=>i===t.geometryTypeJSON&&e.drawingInfo?.renderer?.symbol?.type===t.identifyingSymbol.type))}function k(){return new h.A({xmin:-180,ymin:-90,xmax:180,ymax:90})}const E=new N.A({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),P=new N.A({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0,length:255});let R=class extends w.A{constructor(e){super(e),this.visibilityMode="inherited"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on("after-add",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on("after-remove",(e=>{e.item.sourceLayer=null}))}get fullExtent(){const e=this.layer?.spatialReference,t=this.fullBounds;return e?null==t?(0,m.projectOrLoad)(k(),e).geometry:(0,b.w1)(t,e):null}get fullBounds(){const e=this.layer?.spatialReference;if(!e)return null;const t=(0,b.Ie)();return this.graphics.forEach((i=>{const r=null!=i.geometry?(0,m.projectOrLoad)(i.geometry,e).geometry:null;null!=r&&(0,b.fT)(t,"point"===r.type?r:r.extent,t)})),(0,b.aI)(t,b.qv)?null:t}get sublayers(){return this.graphics}};(0,r._)([(0,d.MZ)({readOnly:!0})],R.prototype,"fullExtent",null),(0,r._)([(0,d.MZ)({readOnly:!0})],R.prototype,"fullBounds",null),(0,r._)([(0,d.MZ)({readOnly:!0})],R.prototype,"sublayers",null),(0,r._)([(0,d.MZ)()],R.prototype,"layer",void 0),(0,r._)([(0,d.MZ)()],R.prototype,"layerId",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],R.prototype,"visibilityMode",void 0),R=(0,r._)([(0,c.$)("esri.layers.MapNotesLayer.MapNotesSublayer")],R);const D=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",id:"polygonLayer",layerId:0,title:"Polygons",identifyingSymbol:(new A.A).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",id:"polylineLayer",layerId:1,title:"Polylines",identifyingSymbol:(new F.A).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",id:"multipointLayer",layerId:2,title:"Multipoints",identifyingSymbol:(new L.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"pointLayer",layerId:3,title:"Points",identifyingSymbol:(new L.A).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"textLayer",layerId:4,title:"Text",identifyingSymbol:(new j.A).toJSON()}];let U=class extends((0,I.dM)((0,Z.j)((0,O.q)((0,x.A)((0,s.P)(S.A)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType="notes",this.legendEnabled=!1,this.listMode="hide-children",this.minScale=0,this.maxScale=0,this.spatialReference=g.A.WGS84,this.sublayers=new a.A(D.map((e=>new R({id:e.id,layerId:e.layerId,title:e.title,layer:this})))),this.title="Map Notes",this.type="map-notes",this.visibilityMode="inherited"}readCapabilities(e,t,i){return{operations:{supportsMapNotesEditing:!C(t)&&"portal-item"!==i?.origin}}}readFeatureCollections(e,t,i){if(!C(t))return null;const r=t.layers.map((e=>{const t=new v.default;return t.read(e,i),t}));return new a.A({items:r})}readLegacyfeatureCollectionJSON(e,t){return C(t)?(0,n.o8)(t.featureCollection):null}get fullExtent(){const e=this.spatialReference,t=(0,b.Ie)();return null!=this.sublayers?this.sublayers.forEach((({fullBounds:e})=>null!=e?(0,b.fT)(t,e,t):t),t):this.featureCollectionJSON?.layers.some((e=>e.layerDefinition.extent))&&this.featureCollectionJSON.layers.forEach((i=>{const r=(0,m.projectOrLoad)(i.layerDefinition.extent,e).geometry;null!=r&&(0,b.fT)(t,r,t)})),(0,b.aI)(t,b.qv)?(0,m.projectOrLoad)(k(),e).geometry:(0,b.w1)(t,e)}readMinScale(e,t){for(const i of t.layers)if(null!=i.layerDefinition.minScale)return i.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const i of t.layers)if(null!=i.layerDefinition.maxScale)return i.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer("multipointLayer")}get pointLayer(){return this._findSublayer("pointLayer")}get polygonLayer(){return this._findSublayer("polygonLayer")}get polylineLayer(){return this._findSublayer("polylineLayer")}readSpatialReference(e,t){return t.layers.length?g.A.fromJSON(t.layers[0].layerDefinition.spatialReference):g.A.WGS84}readSublayers(e,t,i){if(C(t))return null;const r=[];let l=t.layers.reduce(((e,t)=>Math.max(e,t.layerDefinition.id??-1)),-1)+1;for(const a of t.layers){const{layerDefinition:e,featureSet:t}=a,i=e.id??l++,n=J(a);if(null!=n){const a=new R({id:n.id,title:e.name,layerId:i,layer:this,graphics:t.features.map((({geometry:e,symbol:t,attributes:i,popupInfo:r})=>o.A.fromJSON({attributes:i,geometry:e,symbol:t,popupTemplate:r})))});r.push(a)}}return new a.A(r)}writeSublayers(e,t,i,r){const{minScale:o,maxScale:a}=this;if(null==e)return;const n=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing)return void(n&&r?.messages?.push(new l.A("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")));const s=[];let y=this.spatialReference.toJSON();e:for(const l of e)for(const e of l.graphics)if(null!=e.geometry){y=e.geometry.spatialReference.toJSON();break e}for(const l of D){const t=e.find((e=>l.id===e.id));this._writeMapNoteSublayer(s,t,l,o,a,y,r)}(0,p.sM)("featureCollection.layers",s,t)}get textLayer(){return this._findSublayer("textLayer")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}read(e,t){"featureCollection"in e&&(e=(0,n.o8)(e),Object.assign(e,e.featureCollection)),super.read(e,t)}async beforeSave(){if(null==this.sublayers)return;let e=null;const t=[];for(const r of this.sublayers)for(const i of r.graphics)if(null!=i.geometry){const r=i.geometry;e?(0,M.aI)(r.spatialReference,e)||((0,m.canProjectWithoutEngine)(r.spatialReference,e)||(0,m.isLoaded)()||await(0,m.load)(),i.geometry=(0,m.project)(r,e)):e=r.spatialReference,t.push(i)}const i=await(0,_.el)(t.map((e=>e.geometry)));t.forEach(((e,t)=>e.geometry=i[t]))}_findSublayer(e){return null==this.sublayers?null:this.sublayers?.find((t=>t.id===e))??null}_writeMapNoteSublayer(e,t,i,r,o,a,l){const s=[];if(null!=t){for(const e of t.graphics)this._writeMapNote(s,e,i.geometryType,l);this._normalizeObjectIds(s,E),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:(0,n.o8)(i.identifyingSymbol)}},id:t.layerId,geometryType:i.geometryTypeJSON,minScale:r,maxScale:o,objectIdField:"OBJECTID",fields:[E.toJSON(),P.toJSON()],spatialReference:a},featureSet:{features:s,geometryType:i.geometryTypeJSON}})}}_writeMapNote(e,t,i,r){if(null==t)return;const{geometry:o,symbol:a,popupTemplate:l}=t;if(null==o)return;if(o.type!==i)return void r?.messages?.push(new y.A("map-notes-layer:invalid-geometry-type",`Geometry "${o.type}" cannot be saved in "${i}" layer`,{graphic:t}));if(null==a)return void r?.messages?.push(new y.A("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));const n={attributes:{...t.attributes},geometry:o.toJSON(),symbol:a.toJSON()};null!=l&&(n.popupInfo=l.toJSON()),e.push(n)}_normalizeObjectIds(e,t){const i=t.name;let r=(0,T.H)(i,e)+1;const o=new Set;for(const a of e){a.attributes||(a.attributes={});const{attributes:e}=a;(null==e[i]||o.has(e[i]))&&(e[i]=r++),o.add(e[i])}}};(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"capabilities",void 0),(0,r._)([(0,u.w)(["portal-item","web-map"],"capabilities",["layers"])],U.prototype,"readCapabilities",null),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"featureCollections",void 0),(0,r._)([(0,u.w)(["web-map","portal-item"],"featureCollections",["layers"])],U.prototype,"readFeatureCollections",null),(0,r._)([(0,d.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],U.prototype,"featureCollectionJSON",void 0),(0,r._)([(0,u.w)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],U.prototype,"readLegacyfeatureCollectionJSON",null),(0,r._)([(0,d.MZ)({readOnly:!0,json:{read:!0,write:{enabled:!0,ignoreOrigin:!0}}})],U.prototype,"featureCollectionType",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"fullExtent",null),(0,r._)([(0,d.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],U.prototype,"legendEnabled",void 0),(0,r._)([(0,d.MZ)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),(0,r._)([(0,d.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],U.prototype,"minScale",void 0),(0,r._)([(0,u.w)(["web-map","portal-item"],"minScale",["layers"])],U.prototype,"readMinScale",null),(0,r._)([(0,d.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],U.prototype,"maxScale",void 0),(0,r._)([(0,u.w)(["web-map","portal-item"],"maxScale",["layers"])],U.prototype,"readMaxScale",null),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"multipointLayer",null),(0,r._)([(0,d.MZ)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],U.prototype,"operationalLayerType",void 0),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"pointLayer",null),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"polygonLayer",null),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"polylineLayer",null),(0,r._)([(0,d.MZ)({type:g.A})],U.prototype,"spatialReference",void 0),(0,r._)([(0,u.w)(["web-map","portal-item"],"spatialReference",["layers"])],U.prototype,"readSpatialReference",null),(0,r._)([(0,d.MZ)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],U.prototype,"sublayers",void 0),(0,r._)([(0,u.w)("web-map","sublayers",["layers"])],U.prototype,"readSublayers",null),(0,r._)([(0,f.K)("web-map","sublayers")],U.prototype,"writeSublayers",null),(0,r._)([(0,d.MZ)({readOnly:!0})],U.prototype,"textLayer",null),(0,r._)([(0,d.MZ)()],U.prototype,"title",void 0),(0,r._)([(0,d.MZ)({readOnly:!0,json:{read:!1}})],U.prototype,"type",void 0),U=(0,r._)([(0,c.$)("esri.layers.MapNotesLayer")],U);const $=U},93317:(e,t,i)=>{i.d(t,{H:()=>o,L:()=>r});const r=1;function o(e,t){let i=0;for(const r of t){const t=r.attributes?.[e];"number"==typeof t&&isFinite(t)&&(i=Math.max(i,t))}return i}},98350:(e,t,i)=>{i.d(t,{A:()=>d});var r=i(66866),o=i(24793),a=i(59851),l=i(21877),n=i(21564),s=(i(39831),i(539),i(9272),i(63863));const p=new a.J({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),y=new a.J({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let d=class extends(o.A.ClonableMixin(l.A)){constructor(e){super(e),this.cardinality=null,this.catalogId=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};(0,r._)([(0,n.MZ)({json:{read:p.read,write:p.write}})],d.prototype,"cardinality",void 0),(0,r._)([(0,n.MZ)({json:{name:"catalogID"}})],d.prototype,"catalogId",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"composite",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"id",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"keyField",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"keyFieldInRelationshipTable",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"name",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"relatedTableId",void 0),(0,r._)([(0,n.MZ)({json:{read:!0,write:!0}})],d.prototype,"relationshipTableId",void 0),(0,r._)([(0,n.MZ)({json:{read:y.read,write:y.write}})],d.prototype,"role",void 0),d=(0,r._)([(0,s.$)("esri.layers.support.Relationship")],d)},15878:(e,t,i)=>{i.d(t,{A:()=>u});var r=i(66866),o=i(52495),a=i(85569),l=i(12690),n=i(48982),s=i(21564),p=(i(39831),i(539),i(63863)),y=i(42453),d=i(35387);let u=class extends o.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,l.UT)((()=>(0,d.l)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Promise.all([i.e(72076),i.e(3769)]).then(i.bind(i,3769)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new n.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const i=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(i.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:i,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(i,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const i of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(i.syntax);for(const i of t){const t=i.split("."),r=this.fieldsIndex.get(t.at(-1)??"");r&&e.add(r.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const i of t){const t=this.fieldsIndex.get(i);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,i){const r=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],i)).get(r)??""}async getTitles(e,t,i){const r=new Map,o=i?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:a}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);i?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:l,workingTitle:n}=this,s=n&&l;t.forEach((t=>{const i=t.getObjectId()??t.attributes[e.objectIdField],p=s?a({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:l,globalAttributes:this._createFormattedAttributes(e,t,o).global,layer:e,text:n}):"";r.set(i,p)}))}catch{}return r}async _checkAndReQueryGraphics(e,t){const i=t.map((t=>t.getObjectId()??t.attributes[e.objectIdField])).filter(a.Ru);if(i.length!==t.length)return t;if(t.some((e=>!(0,y.Kl)(e,this.requiredFields)))){const r=e.createQuery();r.where="1=1",r.outFields=[...this.requiredFields],r.objectIds=i;const o=await e.queryFeatures(r);if(o?.features.length===t.length)return o.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const i of e){if(!i.fieldName)continue;const e=this.fieldsIndex.get(i.fieldName),r=e?.name??i.fieldName;i.fieldName=r,t.set(r.toLowerCase(),i)}return t}_createFormattedAttributes(e,t,i="system"){const r=this.effectivePopupTemplate?.fieldInfos??[],o={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const i=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{o[`expression/${e.name}`]=e.func({vars:{$feature:i}})}catch{}}const a={...t.attributes,...o};return{global:this._featureUtils.formatAttributes({fieldInfos:r,attributes:a,graphic:t,timeZone:i,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,y.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,r._)([(0,s.MZ)({readOnly:!0})],u.prototype,"_arcadeTask",null),(0,r._)([(0,s.MZ)()],u.prototype,"_featureUtils",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],u.prototype,"featureUtilsPromise",null),(0,r._)([(0,s.MZ)({readOnly:!0})],u.prototype,"calculatedExpressions",null),(0,r._)([(0,s.MZ)()],u.prototype,"displayField",void 0),(0,r._)([(0,s.MZ)()],u.prototype,"effectivePopupTemplate",void 0),(0,r._)([(0,s.MZ)()],u.prototype,"expressionsUsedInTitle",null),(0,r._)([(0,s.MZ)()],u.prototype,"fieldsIndex",void 0),(0,r._)([(0,s.MZ)()],u.prototype,"fieldInfoMap",null),(0,r._)([(0,s.MZ)()],u.prototype,"fields",void 0),(0,r._)([(0,s.MZ)()],u.prototype,"objectIdField",void 0),(0,r._)([(0,s.MZ)()],u.prototype,"requiredFields",null),u=(0,r._)([(0,p.$)("esri.layers.support.TitleCreator")],u)}}]);