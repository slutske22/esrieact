"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4217],{28769:(t,e,i)=>{i.d(e,{a:()=>w,b:()=>Q,d:()=>_,f:()=>b,h:()=>O,j:()=>T,u:()=>k});i(39831);var n=i(539),o=i(92504),r=i(92114),s=i(21742),a=i(86128),l=i(24121),c=i(58359),u=i(80510),p=i(58331),d=i(22759),h=i(38774),g=i(10151),f=i(16597),m=i(45573);const y=()=>n.A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");const v=class{constructor(){this.plane=(0,h.vt)(),this.origin=(0,c.vt)(),this.basis1=(0,c.vt)(),this.basis2=(0,c.vt)()}};function _(t=F){return{plane:(0,h.vt)(t.plane),origin:(0,c.o8)(t.origin),basis1:(0,c.o8)(t.basis1),basis2:(0,c.o8)(t.basis2)}}function w(t,e=_()){return b(t.origin,t.basis1,t.basis2,e)}function b(t,e,i,n=_()){return(0,l.c)(n.origin,t),(0,l.c)(n.basis1,e),(0,l.c)(n.basis2,i),k(n),function(t,e){Math.abs((0,l.e)(t.basis1,t.basis2)/((0,l.l)(t.basis1)*(0,l.l)(t.basis2)))>1e-6&&y().warn(e,"Provided basis vectors are not perpendicular"),Math.abs((0,l.e)(t.basis1,R(t)))>1e-6&&y().warn(e,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,l.e)(R(t),t.origin)-t.plane[3])>1e-6&&y().warn(e,"Plane offset is not consistent with plane origin")}(n,"fromValues()"),n}function k(t){(0,h.mR)(t.basis2,t.basis1,t.origin,t.plane)}function M(t,e,i){t!==i&&w(t,i);const n=(0,l.g)(m.rq.get(),R(t),e);return(0,l.f)(i.origin,i.origin,n),i.plane[3]-=e,i}function O(t,e=_()){const i=(t[2]-t[0])/2,n=(t[3]-t[1])/2;return(0,l.i)(e.origin,t[0]+i,t[1]+n,0),(0,l.i)(e.basis1,i,0,0),(0,l.i)(e.basis2,0,n,0),(0,h.fA)(0,0,1,0,e.plane),e}function x(t,e,i){return!!(0,h.Ui)(t.plane,e,i)&&C(t,i)}function I(t,e,i){const n=E.get();G(t,e,n,E.get());let r=Number.POSITIVE_INFINITY;for(const s of D){const a=S(t,s,z.get()),c=m.rq.get();if((0,h.T7)(n,a,c)){const t=(0,l.E)(m.rq.get(),e.origin,c),n=Math.abs((0,o.XM)((0,l.e)(e.direction,t)));n<r&&(r=n,(0,l.c)(i,c))}}return r===Number.POSITIVE_INFINITY?Z(t,e,i):i}function Z(t,e,i){if(x(t,e,i))return i;const n=E.get(),o=E.get();G(t,e,n,o);let r=Number.POSITIVE_INFINITY;for(const s of D){const a=S(t,s,z.get()),c=m.rq.get();if((0,h.gv)(n,a,c)){const t=(0,g.kb)(e,c);if(!(0,h.Tj)(o,c))continue;t<r&&(r=t,(0,l.c)(i,c))}}return U(t,e.origin)<r&&A(t,e.origin,i),i}function A(t,e,i){const n=(0,h._I)(t.plane,e,m.rq.get()),o=(0,d.H6)(L(t,t.basis1),n,-1,1,m.rq.get()),r=(0,d.H6)(L(t,t.basis2),n,-1,1,m.rq.get());return(0,l.d)(i,(0,l.f)(m.rq.get(),o,r),t.origin),i}function V(t,e,i){const{origin:n,basis1:o,basis2:r}=t,s=(0,l.d)(m.rq.get(),e,n),a=(0,f.gr)(o,s),c=(0,f.gr)(r,s),u=(0,f.gr)(R(t),s);return(0,l.i)(i,a,c,u)}function U(t,e){const i=V(t,e,m.rq.get()),{basis1:n,basis2:o}=t,r=(0,l.l)(n),s=(0,l.l)(o),a=Math.max(Math.abs(i[0])-r,0),c=Math.max(Math.abs(i[1])-s,0),u=i[2];return a*a+c*c+u*u}function T(t,e){return Math.sqrt(U(t,e))}function P(t,e){const i=-t.plane[3];return(0,f.gr)(R(t),e)-i}function R(t){return(0,h.Qj)(t.plane)}function C(t,e){const i=(0,l.d)(m.rq.get(),e,t.origin),n=(0,l.k)(t.basis1),o=(0,l.k)(t.basis2),r=(0,l.e)(t.basis1,i),s=(0,l.e)(t.basis2,i);return-r-n<0&&r-n<0&&-s-o<0&&s-o<0}function L(t,e){const i=z.get();return(0,l.c)(i.origin,t.origin),(0,l.c)(i.vector,e),i}function S(t,e,i){const{basis1:n,basis2:o,origin:r}=t,s=(0,l.g)(m.rq.get(),n,e.origin[0]),a=(0,l.g)(m.rq.get(),o,e.origin[1]);(0,l.f)(i.origin,s,a),(0,l.f)(i.origin,i.origin,r);const c=(0,l.g)(m.rq.get(),n,e.direction[0]),u=(0,l.g)(m.rq.get(),o,e.direction[1]);return(0,l.g)(i.vector,(0,l.f)(c,c,u),2),i}function G(t,e,i,n){const o=R(t);(0,h.mR)(o,e.direction,e.origin,i),(0,h.mR)((0,h.Qj)(i),o,e.origin,n)}const F={plane:(0,h.vt)(),origin:(0,c.fA)(0,0,0),basis1:(0,c.fA)(1,0,0),basis2:(0,c.fA)(0,1,0)},E=new r.I(h.vt),z=new r.I(d.vt),H=(0,c.vt)(),N=new r.I((()=>_())),D=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],q=(0,a.vt)(),j=(0,a.vt)(),Q=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:v,altitudeAt:P,axisAt:function(t,e,i,n){return function(t,e,i){switch(e){case p._.X:(0,l.c)(i,t.basis1),(0,l.n)(i,i);break;case p._.Y:(0,l.c)(i,t.basis2),(0,l.n)(i,i);break;case p._.Z:(0,l.c)(i,R(t))}return i}(t,i,n)},cameraFrustumCoverage:function(t,e){return(e-t)/e},closestPoint:Z,closestPointOnSilhouette:I,copy:w,copyWithoutVerify:function(t,e){(0,l.c)(e.origin,t.origin),(0,l.c)(e.basis1,t.basis1),(0,l.c)(e.basis2,t.basis2),(0,h.C)(e.plane,t.plane)},create:_,distance:T,distance2:U,distanceToSilhouette:function(t,e){let i=Number.NEGATIVE_INFINITY;for(const n of D){const o=S(t,n,z.get()),r=(0,d.kb)(o,e);r>i&&(i=r)}return Math.sqrt(i)},elevate:M,equals:function(t,e){return(0,l.q)(t.basis1,e.basis1)&&(0,l.q)(t.basis2,e.basis2)&&(0,l.q)(t.origin,e.origin)},extrusionContainsPoint:function(t,e){return(0,h.Tj)(t.plane,e)&&C(t,e)},fromAABoundingRect:O,fromValues:b,getExtent:function(t,e){const i=t.basis1[0],n=t.basis2[1],[o,r]=t.origin;return(0,u.fA)(o-i,r-n,o+i,r+n,e)},intersectRay:x,intersectRayClosestSilhouette:function(t,e,i){if(x(t,e,i))return i;const n=I(t,e,m.rq.get());return(0,l.f)(i,e.origin,(0,l.g)(m.rq.get(),e.direction,(0,l.j)(e.origin,n)/(0,l.l)(e.direction))),i},normal:R,projectPoint:A,projectPointLocal:V,rotate:function(t,e,i,n){return t!==n&&w(t,n),(0,s.$0)(j,e,i),(0,l.t)(n.basis1,t.basis1,j),(0,l.t)(n.basis2,t.basis2,j),k(n),n},setAltitudeAt:function(t,e,i,n){const o=P(t,e),r=(0,l.g)(H,R(t),i-o);return(0,l.f)(n,e,r),n},setExtent:function(t,e,i){return O(e,i),M(i,P(t,t.origin),i),i},transform:function(t,e,i){return t!==i&&w(t,i),(0,s.B8)(q,e),(0,s.mg)(q,q),(0,l.t)(i.basis1,t.basis1,q),(0,l.t)(i.basis2,t.basis2,q),(0,l.t)((0,h.Qj)(i.plane),(0,h.Qj)(t.plane),q),(0,l.t)(i.origin,t.origin,e),(0,h.mP)(i.plane,i.plane,i.origin),i},up:F,updateUnboundedPlane:k,wrap:function(t,e,i){const n=N.get();return n.origin=t,n.basis1=e,n.basis2=i,n.plane=(0,h.LV)(0,0,0,0),k(n),n}},Symbol.toStringTag,{value:"Module"}))},11294:(t,e,i)=>{i.d(e,{N:()=>Mt,l:()=>It});var n,o,r=i(66866),s=i(25707),a=i(52495),l=i(48982),c=i(85251),u=i(21564),p=(i(39831),i(539),i(9272),i(63863)),d=i(4238);!function(t){t[t.NeverApplied=0]="NeverApplied",t[t.Applied=1]="Applied",t[t.Undone=2]="Undone"}(n||(n={})),function(t){t.UndoRedoUpdating="UndoRedoUpdating",t.UndoInvalidError="UndoInvalidError",t.RedoInvalidError="RedoInvalidError",t.ApplyInvalidError="ApplyInvalidError"}(o||(o={}));const h={[o.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[o.UndoInvalidError]:"There are no items to Undo",[o.RedoInvalidError]:"There are no items to Redo",[o.ApplyInvalidError]:"Cannot apply an item that is already applied"};class g extends Error{constructor(){super(h[o.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class f extends Error{constructor(){super(h[o.UndoInvalidError]),this.type="undo-redo-undo-error"}}class m extends Error{constructor(){super(h[o.RedoInvalidError]),this.type="undo-redo-redo-error"}}class y extends Error{constructor(){super(h[o.ApplyInvalidError]),this.type="undo-redo-apply-error"}}var v;!function(t){t[t.Apply=0]="Apply",t[t.Undo=1]="Undo",t[t.Redo=2]="Redo"}(v||(v={}));let _=class extends a.A{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=n.NeverApplied}get canUndo(){return this.status===n.Applied}get canRedo(){return this.status===n.Undone}async executeUndoRedoOperation(t){switch(t){case v.Apply:if(this.status!==n.NeverApplied)throw new y;return await this.apply(),void(this.status=n.Applied);case v.Undo:if(this.status!==n.Applied)throw new f;return await this.undo(),void(this.status=n.Undone);case v.Redo:if(this.status!==n.Undone)throw new f;return await this.redo(),void(this.status=n.Applied)}}};(0,r._)([(0,u.MZ)()],_.prototype,"name",void 0),(0,r._)([(0,u.MZ)()],_.prototype,"tag",void 0),_=(0,r._)([(0,p.$)("esri.undoredo.UndoableOperation")],_);let w=class extends a.A{constructor(){super(...arguments),this._stack=new l.A,this._stackPosition=-1,this._updatingHandles=new d.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((t=>t.destroy()))}_drainStack(){this._stack.drain((t=>t.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new f;if(this.updating)throw new g;const t=this._stack.getItemAt(this._stackPosition);t&&await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Undo),--this._stackPosition,t.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new m;if(this.updating)throw new g;const t=this._stack.getItemAt(this._stackPosition+1);if(!t)throw new m;await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(v.Redo),++this._stackPosition})())}peekUndo(){if(this.canUndo)return this._stack.getItemAt(this._stackPosition)}peekRedo(){if(this.canRedo)return this._stack.getItemAt(this._stackPosition+1)}async inject(t){if(this.updating)throw new g;await this._updatingHandles.addPromise((async()=>{t.status===n.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),t.canUndo?(this._stack.splice(this._stackPosition+1,0,t),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((t=>t.destroy())),this._stackPosition=-1)})())}async add(t){if(this.updating)throw new g;await this._updatingHandles.addPromise((async()=>{t.status===n.NeverApplied&&await t.executeUndoRedoOperation(v.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),t.canUndo?(this._stack.push(t),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(t,e=!1){if(this.updating&&!e)return;await(0,c.C_)((()=>!this.updating));const i=new l.A;for(let n=0;n<this._stack.length;n++){const e=this._stack.getItemAt(n);e&&(e.tag===t?(e.destroy(),n===this._stackPosition&&(this._stackPosition=i.length-1)):i.push(e))}this._stack=i,this._stackPosition>i.length-1&&(this._stackPosition=i.length-1)}async clear(t=!1){if(this.updating&&!t)throw new g;await(0,c.C_)((()=>!this.updating)),this._drainStack()}};(0,r._)([(0,u.MZ)()],w.prototype,"_stack",void 0),(0,r._)([(0,u.MZ)()],w.prototype,"_stackPosition",void 0),(0,r._)([(0,u.MZ)()],w.prototype,"updating",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"canUndo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"hasUndo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"canRedo",null),(0,r._)([(0,u.MZ)({readOnly:!0})],w.prototype,"hasRedo",null),w=(0,r._)([(0,p.$)("esri.UndoRedo")],w);var b=i(12690),k=i(17306),M=i(20464),O=i(6267),x=i(88204),I=i(31828),Z=i(9723);class A{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}var V=i(83372),U=i(7388),T=i(73569),P=i(92976),R=i(73446),C=i(97066),L=i(27451);function S(t,e,i){if(null==t)return"noTool";switch(t){case"point":return"point";case"multipoint":return"multipoint";case"polyline":return function(t,e){const i=null!=t&&"polyline"===t.type&&t.paths.length?t.paths[0].length:0;return"freehand"===e?i<2?"freehandStart":"freehandEnd":i<2?"polylineZeroVertices":"polylineOneVertex"}(e,i);case"polygon":return function(t,e){const i=null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0;if(i<3)switch(e){case"freehand":return"freehandStart";case"hybrid":return"polygonZeroVerticesHybrid";default:return"polygonZeroVertices"}else if(i<4)return"freehand"===e?"freehandEnd":"polygonOneVertex";return"polygonTwoVertices"}(e,i);case"rectangle":case"circle":return function(t,e){if((null!=t&&"polygon"===t.type&&t.rings.length?t.rings[0].length:0)<3)switch(e){case"freehand":return"freehandStart";case"click":return"shapeStartClick";default:return"shapeStartHybrid"}switch(e){case"freehand":return"freehandEnd";case"click":return"shapeEndClick";default:return"shapeEndHybrid"}}(e,i);default:return}}var G=i(24121),F=i(58359);const E=20,z=1,H=.1,N=(0,F.vt)();var D=i(7086),q=i(45565),j=i(83856);let Q=class extends j.w{constructor(t){super(t),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=T.iT}get allFields(){return[]}};(0,r._)([(0,u.MZ)()],Q.prototype,"type",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"radius",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"xSize",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"ySize",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"area",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],Q.prototype,"allFields",null),Q=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],Q);var B=i(69733),Y=i(38153);let $=class extends((0,Y.B)(j.w)){constructor(t){super(t),this.type="draw-mesh",this.orientation=(0,B.LJ)({lockable:!1}),this.scale=(0,B.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,r._)([(0,u.MZ)()],$.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],$.prototype,"allFields",null),$=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],$);let X=class extends((0,Y.B)(j.w)){constructor(t){super(t),this.type="draw-multipoint"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,u.MZ)()],X.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],X.prototype,"allFields",null),X=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawMultipointTooltipInfo")],X);let K=class extends((0,Y.B)(j.w)){constructor(t){super(t),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,r._)([(0,u.MZ)()],K.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],K.prototype,"allFields",null),K=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],K);let W=class extends((0,Y.B)(j.w)){constructor(t){super(t),this.type="draw-polygon",this.direction=(0,B.Gk)(),this.distance=(0,B.Ku)(),this.area=(0,B.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,r._)([(0,u.MZ)()],W.prototype,"xyMode",void 0),(0,r._)([(0,u.MZ)()],W.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],W.prototype,"allFields",null),W=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],W);let J=class extends((0,Y.B)(j.w)){constructor(t){super(t),this.type="draw-polyline",this.direction=(0,B.Gk)(),this.distance=(0,B.Ku)(),this.totalLength=(0,B.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,r._)([(0,u.MZ)()],J.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],J.prototype,"xyMode",void 0),(0,r._)([(0,u.MZ)()],J.prototype,"allFields",null),J=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],J);let tt=class extends j.w{constructor(t){super(t),this.type="draw-rectangle",this.xSize=T.r7,this.ySize=T.r7,this.area=T.iT}get allFields(){return[]}};(0,r._)([(0,u.MZ)()],tt.prototype,"type",void 0),(0,r._)([(0,u.MZ)()],tt.prototype,"xSize",void 0),(0,r._)([(0,u.MZ)()],tt.prototype,"ySize",void 0),(0,r._)([(0,u.MZ)()],tt.prototype,"area",void 0),(0,r._)([(0,u.MZ)()],tt.prototype,"helpMessage",void 0),(0,r._)([(0,u.MZ)()],tt.prototype,"allFields",null),tt=(0,r._)([(0,p.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],tt);var et=i(52857),it=i(91199);function nt(t){const{directionOptions:e,geometryType:i,sketchOptions:n,tooltipInfos:o}=t,r=e=>{const i=mt(t).mode,n=o[e].elevation;"relative-to-ground"===i||"relative-to-scene"===i||"on-the-ground"===i?n.lock(vt(t)):n.unlock()};switch(i){case"polygon":case"polyline":r(i),(t=>{if(e){const i=o[t].direction;i.committed=e.angle,i.unlockOnVertexPlacement=!1,n.values.directionMode=e.mode}})(i);break;case"point":case"mesh":r(i)}}function ot(t,e){const{drawOperation:i,view:n}=e,o=st(e),r=mt(e);if("2d"===n.type||!t||"absolute-height"!==r.mode||1!==i?.numCommittedVertices||!o||"draw-polyline"!==o.type&&"draw-polygon"!==o.type||o.elevation.locked)return;const[s,a,l]=t,c=function(t,e,i,n,o){const{view:r,drawOperation:s}=o;if("3d"!==r.type||!s)return;i??=0;const a=yt(o),l=mt(o),c=(0,L.Fo)(r,t,e,i,a,l,n);return(0,it.Qc)(c,a)??vt(o)}(s,a,l,r,e);null!=c&&o.elevation.lock(c)}function rt(t){st(t)?.allFields.forEach((t=>{t.unlockOnVertexPlacement&&t.unlock()}))}function st({geometryType:t,graphic:e,tooltipInfos:i}){return e?.geometry?.type!==at[t]?"circle"===t||"rectangle"===t?i[t]:null:i[t]}const at={point:"point",multipoint:"multipoint",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon",freehandPolygon:"polygon",freehandPolyline:"polyline"};function lt(t,e){switch(t?.type){case"draw-point":!function(t,e){const i=e.graphic?.geometry;"point"===i?.type&&(ct(t,i,e),t.helpMessage=S("point",i,e.drawOperation.drawingMode))}(t,e);break;case"draw-multipoint":!function(t,e){const i=e.graphic?.geometry;"multipoint"===i?.type&&(ct(t,i,e),t.helpMessage=S("multipoint",i,e.drawOperation.drawingMode))}(t,e);break;case"draw-polyline":!function(t,e){const{createOperationGeometry:i,drawOperation:n,automaticLengthMeasurementUtils:o}=e,r=null!=i?i.full:null;r&&"polyline"!==r.type||(pt(t,e),t.totalLength.actual=n.lastVertex?(r?o.autoLength2D(r):null)??T.r7:null,t.helpMessage=S("polyline",r,e.drawOperation.drawingMode))}(t,e);break;case"draw-polygon":!function(t,e){const{createOperationGeometry:i,drawOperation:n}=e,o=null!=i?i.full:null;o&&"polygon"!==o.type||(pt(t,e),t.area.actual=n.lastVertex?(o?e.automaticAreaMeasurementUtils.autoArea2D(o):null)??T.iT:null,t.helpMessage=S("polygon",o,e.drawOperation.drawingMode))}(t,e);break;case"draw-rectangle":!function(t,e){t.sketchOptions=e.sketchOptions,t.xSize=gt(e),t.ySize=ft(e),t.area=ht(e),t.helpMessage=S("rectangle",e.graphic?.geometry,e.drawOperation.drawingMode)}(t,e);break;case"draw-circle":!function(t,e){const{forceUniformSize:i,sketchOptions:n}=e;t.sketchOptions=n,t.radius=i?function({createOperationGeometry:t,automaticLengthMeasurementUtils:e}){return(null!=t?.circle?.center&&null!=t.circle.edge?e.autoDistanceBetweenPoints2D(t.circle.center,t.circle.edge):null)??T.r7}(e):null,t.xSize=i?null:gt(e),t.ySize=i?null:ft(e),t.area=ht(e),t.helpMessage=S("circle",e.graphic?.geometry,e.drawOperation.drawingMode)}(t,e);break;case"draw-mesh":!function(t,e){const{graphic:i,view:n}=e,o=i?.geometry;"3d"!==n.type||o&&"mesh"!==o.type||(ct(t,o?.origin,e),o&&(0,q.Ue)(t,o),t.helpMessage=function(t,e){const i=t?.geometry;if(!t||"mesh"!==i?.type||!e)return;const{renderCoordsHelper:n,elevationProvider:o}=e,{camera:r}=e.state,{extent:s}=i,{center:a,spatialReference:l}=s,c=(0,P.GA)(l),u=(0,P.G9)(l),p=(0,P.GA)(n.spatialReference),d=s.width*c,h=s.height*u,g=(s.zmax??0)*u,f=g-(s.zmin??0)*u,m=Math.max(d,h,f)/p,{x:y,y:v}=a,_=a.z??0;(0,G.i)(N,y,v,_),n.toRenderCoords(N,l,N);const w=m/r.computeScreenPixelSizeAt(N);if(w>r.width*z)return"meshTooClose";if(w<E)return"meshTooFar";const b=(0,L.bh)(t),{absoluteZ:k}=(0,L.Q5)(y,v,g,l,e,b);return k<(o.getElevation(y,v,_,l,"ground")??0)*u+f*H?"meshUnderground":"mesh"}(i,n))}(t,e)}}function ct(t,e,i){const{drawOperation:n,view:o,sketchOptions:r}=i,{cursorVertex:s}=n;t.sketchOptions=r,t.viewType=o.type;const a="multipoint"===e?.type?e.getPoint(e.points.length-1):e;if(t.setLocationFromPoint(a,yt(i)),dt(t.elevation,i),!s)return void(n.constraints=void 0);const l=s;n.constraints={context:_t(l,i),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:null,direction:null}}const ut=(0,R.dp)(C.A);function pt(t,e){const{drawOperation:i,sketchOptions:n,view:o,automaticLengthMeasurementUtils:r}=e,{cursorVertex:s,lastVertex:a,secondToLastVertex:l}=i,c=n.values.effectiveDirectionMode;t.sketchOptions=n,t.viewType=o.type;const u=a&&s?r.autoDistanceBetweenPoints2D(ut(a),ut(s))??T.r7:null;if(t.distance.actual=u,t.distance.readOnly=null==a,t.direction.actual=null,t.direction.readOnly=!0,a&&s&&("absolute"===c||l)){const e=(0,et.uR)(l,a,s,c);t.direction.actual=e??T.n0,t.direction.readOnly=!1}t.setLocationFromPoint(s,yt(e)),dt(t.elevation,e);const p=function(t,{sketchOptions:e}){const i=e.tooltips.xyMode;return"auto"===i?t?"direction-distance":"coordinates":i}(a,e);t.xyMode=p,t.direction.visible="direction-distance"===p,t.distance.visible="direction-distance"===p,t.effectiveX.visible="coordinates"===p,t.effectiveY.visible="coordinates"===p;const d=s??a;i.constraints=d?{context:_t(d,e),x:t.x.committed,y:t.y.committed,longitude:t.longitude.committed,latitude:t.latitude.committed,elevation:t.elevation.committed,distance:t.distance.committed,direction:t.direction.committed}:void 0}function dt(t,e){const{drawOperation:i}=e,n=i?.cursorVertex??i?.lastVertex;t.actual=(0,it.Of)(n)??vt(e),t.visible=i.hasZ,t.readOnly=!1,t.showAsZ=!0}function ht(t){const e=t.createOperationGeometry?.full;return"polygon"!==e?.type?T.iT:t.automaticAreaMeasurementUtils.autoArea2D(e)??T.iT}function gt({createOperationGeometry:t,automaticLengthMeasurementUtils:e}){const i=t?.rectangle?.midpoints;return(null!=i?e.autoDistanceBetweenPoints2D(i.left,i.right):null)??T.r7}function ft({createOperationGeometry:t,automaticLengthMeasurementUtils:e}){const i=t?.rectangle?.midpoints;return(null!=i?e.autoDistanceBetweenPoints2D(i.top,i.bottom):null)??T.r7}function mt(t){return t.drawOperation.elevationInfo??L.qt}function yt(t){return t.drawOperation.coordinateHelper.spatialReference}function vt(t){const e=(0,P.G9)(yt(t));return(0,T.d_)(t.defaultZ*e,"meters")}function _t(t,e){return(0,D.hj)(t,e.view,yt(e),mt(e),e.drawOperation.coordinateHelper.hasZ(),e.sketchOptions.values.effectiveDirectionMode)}var wt=i(37413),bt=i(76748),kt=i(97996);let Mt=class extends(k.A.EventedMixin(wt.g)){constructor(t){super(t),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.elevationLockOnVertexAddDisabled=!1,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new bt.A}initialize(){const{view:t}=this;this.internalGraphicsLayer=new I.A({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const e=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=function(t,e){return{point:new K({sketchOptions:e,viewType:t}),multipoint:new X({sketchOptions:e,viewType:t}),polyline:new J({sketchOptions:e,viewType:t}),polygon:new W({sketchOptions:e,viewType:t}),mesh:new $({sketchOptions:e,viewType:t}),rectangle:new tt({sketchOptions:e}),circle:new Q({sketchOptions:e})}}(t.type,this.sketchOptions);const i=(0,q.A)((()=>({view:t,options:this.sketchOptions.tooltips})));this.tooltip=i,nt(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,b.UT)((()=>(0,x.Hh)())),this.addHandles([e.on("vertex-add",(t=>this.onVertexAdd(t))),e.on("vertex-remove",(t=>this.onVertexRemove(t))),e.on("vertex-update",(t=>this.onVertexUpdate(t))),e.on("cursor-update",(t=>this.onCursorUpdate(t))),e.on("cursor-remove",(()=>this._updateGraphic())),e.on("complete",(t=>this.onComplete(t))),this._coordinateFormatterLoadTask,i.on("paste",(t=>(0,q.HA)(t,this.activeTooltipInfo))),(0,c.wB)((()=>this.cursor),(t=>{e.cursor=t}),c.pc),(0,kt.fm)((()=>{const{activeTooltipInfo:t,sketchOptions:e}=this;lt(t,this._tooltipsContext),i.info=e.tooltips.effectiveEnabled?t:null})),(0,kt.fm)((()=>{e.constraintZ=function(t){const{geometryType:e,tooltipInfos:i}=t;switch(e){case"point":case"multipoint":case"mesh":case"polyline":case"polygon":{const n=i[e].elevation.committed;if(!n)return;return(0,T.l3)(n,"meters")/(0,P.G9)(yt(t))}default:return}}(this._tooltipsContext)}),c.OH)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,O.pR)(this.drawOperation),this.tooltip=(0,O.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,O.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){const{defaultZ:t,directionOptions:e,drawOperation:i,forceUniformSize:n,geometryType:o,graphic:r,sketchOptions:s,tooltipInfos:a,view:l,automaticAreaMeasurementUtils:c,automaticLengthMeasurementUtils:u}=this;return{createOperationGeometry:this._createOperationGeometry,defaultZ:t,directionOptions:e,drawOperation:i,forceUniformSize:n,geometryType:o,graphic:r,sketchOptions:s,tooltipInfos:a,view:l,automaticAreaMeasurementUtils:c,automaticLengthMeasurementUtils:u}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}set mode(t){const e=this.drawOperation;e&&(e.drawingMode=t),this._set("mode",t)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:t,map:e}}=this;return"2d"===t&&e&&"undoRedo"in e&&e.undoRedo instanceof w?e.undoRedo:null}set undoRedo(t){this._override("undoRedo",t)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.destroyed||(0,q.wG)(t,this.tooltip)||this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&nt(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(xt.outline),this.removeHandles(xt.regularVertices),this.removeHandles(xt.activeVertex),this.removeHandles(xt.activeEdge),this.removeHandles(Ot)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const e=new s.A({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=e,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(e),this.addHandles(this.initializeGraphic(e)),this.notifyChange("graphic"),this.addHandles((0,M.hA)((()=>{this.internalGraphicsLayer.remove(e),this._graphic===e&&(this._graphic=null)})),Ot),e}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:e,view:i,visualizationCursorVertex:n,lastVertex:o,committedVertices:r,geometryIncludingUncommittedVertices:s,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=n))return;const l=t.operationComplete?r:s,c=l.length,u=null!=n?e.pointToArray(n):null,p=this._drawSpatialReference,d="3d"===i.type&&"global"===i.viewingMode,h=new A;h.committedVertices=r,h.cursorVertex=u;const{geometryType:g}=this;switch(g){case"point":case"mesh":h.full=e.arrayToPoint(l[0]);break;case"multipoint":h.full=c>0?(0,V.eq)(l,p):null;break;case"polyline":case"polygon":c>0&&(h.full="polygon"===g?(0,V.N6)([l],p,d,!0):(0,V.LZ)([l],p,d),h.cursorEdge=null!=u&&o&&!(0,Z.CI)(n,o)?(0,V.LZ)([[u,e.pointToArray(o)]],p,d):null,h.outline=c>1?h.full:null);break;case"circle":case"rectangle":{if(h.committedVertices=h.cursorVertex=null,!c)break;const e=(0,U.ZP)(i,l[0]),n=l[0],o=e.makeMapPoint(n[0]+Zt*i.resolution,n[1]);"circle"===g?1===c&&t.operationComplete?h.circle=(0,V.zV)([n,o],e,!0):2===c&&(this.forceUniformSize?h.circle=(0,V.zV)(l,e,this.centered):h.rectangle=(0,V.zd)(l,e,this.centered)):1===c&&t.operationComplete?h.rectangle=(0,V.GF)([n,o],e,!0):2===c&&(h.rectangle=this.forceUniformSize?(0,V.GF)(l,e,this.centered):(0,V._T)(l,e,this.centered)),h.full=null!=h.circle?h.circle.geometry:h.rectangle?.geometry,h.outline="polygon"===h.full?.type?h.full:null;break}default:return null}return h}initializeGraphic(t){return(0,M.hA)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return(0,M.hA)()}onCursorEdgeChanged(t){return(0,M.hA)()}onVertexAdd(t){rt(this._tooltipsContext),this._updateGraphic(),this.elevationLockOnVertexAddDisabled||ot(t.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",t)}onVertexRemove(t){rt(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),xt.activeEdge):this.removeHandles(xt.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),xt.outline):this.removeHandles(xt.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),xt.regularVertices):this.removeHandles(xt.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),xt.activeVertex):this.removeHandles(xt.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(Ot)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?st(this._tooltipsContext):null}};(0,r._)([(0,u.MZ)()],Mt.prototype,"_coordinateFormatterLoadTask",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"_createOperationGeometry",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"_tooltipsContext",null),(0,r._)([(0,u.MZ)({value:!0})],Mt.prototype,"centered",null),(0,r._)([(0,u.MZ)()],Mt.prototype,"cursor",null),(0,r._)([(0,u.MZ)({nonNullable:!0})],Mt.prototype,"defaultZ",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"directionOptions",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"drawOperation",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"elevationLockOnVertexAddDisabled",void 0),(0,r._)([(0,u.MZ)({value:!0})],Mt.prototype,"enabled",null),(0,r._)([(0,u.MZ)({value:!0})],Mt.prototype,"forceUniformSize",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"geometryType",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"graphic",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"graphicProperties",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"graphicSymbol",null),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"hasZ",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"geometryToPlace",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"mode",null),(0,r._)([(0,u.MZ)()],Mt.prototype,"snappingManager",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"snapToScene",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"tooltip",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"tooltipInfos",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0,type:bt.A})],Mt.prototype,"sketchOptions",void 0),(0,r._)([(0,u.MZ)()],Mt.prototype,"updating",null),(0,r._)([(0,u.MZ)({constructOnly:!0,nonNullable:!0})],Mt.prototype,"view",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"automaticAreaMeasurementUtils",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"automaticLengthMeasurementUtils",void 0),(0,r._)([(0,u.MZ)({constructOnly:!0})],Mt.prototype,"undoRedo",null),(0,r._)([(0,u.MZ)()],Mt.prototype,"activeTooltipInfo",null),Mt=(0,r._)([(0,p.$)("esri.views.draw.DrawGraphicTool")],Mt);const Ot=Symbol("create-operation-graphic"),xt={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function It(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const Zt=48},3183:(t,e,i)=>{i.d(e,{Bb:()=>d,G3:()=>f,fJ:()=>h});var n=i(60704),o=i(24121),r=i(58359),s=i(28769),a=i(45573),l=i(61434),c=i(36504),u=i(37673),p=i(63387);function d(t,e){return g(t,e,!1)}function h(t,e){return g(t,e,!0)}function g(t,e,i){if(t instanceof p.D){if(t.operation instanceof l.a)return function(t,e,i=!1){const n=i?-1:1,a=(0,r.fA)(n*t.dx,n*t.dy,n*t.dz);(0,o.f)(e.origin,e.origin,a),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof c.m)return function(t,e,i=!1){const n=i?-t.angle:t.angle;(0,o.K)(e.basis1,e.basis1,r.uY,n),(0,o.K)(e.basis2,e.basis2,r.uY,n),(0,s.u)(e)}(t.operation,e,i),!0;if(t.operation instanceof u.j)return function(t,e,i=!1){const r=i?1/t.factor1:t.factor1,a=i?1/t.factor2:t.factor2;(0,o.g)(e.basis1,e.basis1,r),(0,o.g)(e.basis2,e.basis2,a),(0,n.Vj)(e.origin,e.origin,t.origin,t.axis1,r),(0,n.Vj)(e.origin,e.origin,t.origin,t.axis2,a),(0,s.u)(e)}(t.operation,e,i),!0}return!1}function f(t,e,i,r,l=!1){r||(r=(0,s.d)());const c=(0,n.hZ)(a.oG.get(),t[1],-t[0]),u=(0,n.hZ)(a.oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),p=(0,n.hZ)(a.oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),d=a.oG.get(),h=e.allVertices;h.forEach((({pos:e})=>{(0,n.hZ)(d,(0,n.Om)(t,e),(0,n.Om)(c,e)),(0,n.jk)(u,u,d),(0,n.T9)(p,p,d)}));const g=1e-6,f=(0,n.hZ)(a.oG.get(),p[0]-u[0]<g?i/2:0,p[1]-u[1]<g?i/2:0);(0,n.Re)(u,u,f),(0,n.WQ)(p,p,f);const m=l?h.reduce(((t,e)=>t+(e.pos[2]??0)),0)/h.length:0;return(0,n.hs)(r.basis1,t,(p[0]-u[0])/2),(0,n.hs)(r.basis2,c,(p[1]-u[1])/2),(0,o.i)(r.origin,u[0]*t[0]+u[1]*c[0],u[0]*t[1]+u[1]*c[1],m),(0,o.f)(r.origin,r.origin,r.basis1),(0,o.f)(r.origin,r.origin,r.basis2),(0,s.u)(r),r}},86548:(t,e,i)=>{i.d(e,{b:()=>c});var n=i(20464),o=i(13795),r=i(4368),s=i(74989),a=i(75796),l=i(23495);class c{draw(t,e){const i=function(t){const e=[];for(const i of t){let t=!0;for(const n of e)if(i.equals(n)){t=!1;break}t&&e.push(i)}return e}(t),c=this.sortUniqueHints(i),u=[];for(const n of c)n instanceof o.v&&u.push(this.visualizeIntersectionPoint(n,e)),n instanceof r.c&&u.push(this.visualizeLine(n,e)),n instanceof s.r&&u.push(this.visualizeParallelSign(n,e)),n instanceof l.l&&u.push(this.visualizeRightAngleQuad(n,e)),n instanceof a._&&u.push(this.visualizePoint(n,e));return(0,n.vE)(u)}sortUniqueHints(t){return t}}},75796:(t,e,i)=>{i.d(e,{_:()=>r});var n=i(24121),o=i(53830);class r extends o.m{constructor(t,e,i){super(e,i),this.point=t}equals(t){return t instanceof r&&(0,n.q)(this.point,t.point)}}},69733:(t,e,i)=>{i.d(e,{Am:()=>I,Gk:()=>y,Ku:()=>w,S3:()=>k,fL:()=>A,em:()=>Z,LJ:()=>M,Y3:()=>b,dy:()=>x,qP:()=>O,fr:()=>_,Hw:()=>V,uf:()=>U});var n=i(73569),o=i(86568),r=i(66866),s=i(52495),a=i(33880),l=i(21564),c=(i(39831),i(539),i(9272),i(63863));let u=class extends s.A{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=(0,a.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(t){this.inputValue=t,this.invalid=!1}onCommit(t,e,i){this.lockable?this._onCommitLockable(t,i):this._onCommitNonLockable(i),this.invalid&&"commit-and-exit"===t||i.onCommit(e,t)}_onCommitLockable(t,e){const{inputValue:i,locked:n}=this;n&&p(i)?this.unlock():("commit-and-exit"===t&&!n||null!=i)&&this._parseInputAndLock(e)}_onCommitNonLockable(t){const{inputValue:e}=this;p(e)?this.lockable?this.setActual(null):this.clearInputValue():null!=e&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){const{suffix:e}=this;return"function"==typeof e?e(t):e}getFormattedValue(t){const{actual:e,committed:i,format:n}=this;return null!=i?n(i,t):null!=e?n(e,t):null}getRawDisplayValue(t){const{actual:e,committed:i,inputValue:n}=this;return null!=n?n:this.lockable&&null!=i?this.formatForInputMode(i,t):null!=e?this.formatForInputMode(e,t):null}_parseInputAndSetActual(t){const{inputValue:e}=this;if(null==e||p(e))return this.setActual(null);const i=this.parse(e,t);null!=i?this.setActual(i):this.invalid=!0}_parseInputAndLock(t){const{inputValue:e,actual:i}=this;if(p(e))return this.unlock();if(null==e)return this.lock(i);const n=this.parse(e,t);null!=n?this.lock(n):this.invalid=!0}};function p(t){return null!=t&&""===t.trim()}(0,r._)([(0,l.MZ)()],u.prototype,"actual",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"committed",null),(0,r._)([(0,l.MZ)()],u.prototype,"dirty",null),(0,r._)([(0,l.MZ)()],u.prototype,"format",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"formatForInputMode",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"lockable",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"locked",null),(0,r._)([(0,l.MZ)()],u.prototype,"id",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"inputValue",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"name",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"parse",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"readOnly",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"suffix",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"title",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"visible",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"invalid",void 0),(0,r._)([(0,l.MZ)()],u.prototype,"unlockOnVertexPlacement",void 0),u=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipField")],u);let d=class extends u{constructor(t){super(t),this.showAsZ=!1}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:n.r7,parse:(0,o.hw)({createQuantity:(t,i)=>(0,n.d_)(t,e(i))}),format:(t,e)=>e.formatters.verticalLength(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,n.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...t}}};(0,r._)([(0,l.MZ)()],d.prototype,"showAsZ",void 0),d=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],d);var h=i(33604),g=i(52857);let f=class extends u{constructor(t){super(t),this.precision=1}normalizeCtorArgs(t){return{name:"orientation",actual:null,parse:(0,o.hw)({createQuantity:(t,e)=>(0,n.Wq)(t,(t=>t.inputUnitInfos.angle.unit)(e),"geographic"),sanitize:o.D5}),format:t=>{const e=(0,g.P1)(t);return(0,h.Nk)(e,"geographic",this.precision)},formatForInputMode:(t,e)=>{const i=(0,g.P1)(t);return e.formatters.scalar(i)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...t}}};(0,r._)([(0,l.MZ)()],f.prototype,"precision",void 0),f=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],f);let m=class extends u{constructor(t){super(t),this.precision=null}normalizeCtorArgs(t){const e=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:(0,o.hw)({createQuantity:(t,i)=>(0,n.d_)(t,e(i))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,n.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...t}}};function y(t){const e=t=>t.inputUnitInfos.angle.unit,i=t=>t.sketchOptions.values.effectiveDirectionMode;return new u({name:"direction",actual:n.IV,parse:(0,o.hw)({createQuantity:(t,i)=>(0,n.Wq)(t,e(i),"geographic"),sanitize:o.D5}),format:(t,e)=>{const n=i(e),o=(0,g.jQ)(t,n);switch(n){case g.rZ.Absolute:return e.formatters.direction(o);case g.rZ.Relative:return e.formatters.directionRelative(o);case g.rZ.RelativeBilateral:return e.formatters.directionRelativeBilateral(o)}},formatForInputMode:(t,o)=>{const r=(0,g.jQ)(t,i(o));return o.formatters.scalar((0,n.kM)(r,e(o)))},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>{const e=i(t),{absolute:n,relative:o}=t.messages.sketch.direction;switch(e){case g.rZ.Absolute:return n;case g.rZ.Relative:case g.rZ.RelativeBilateral:return o}},...t})}function v(t){const e=t=>t.inputUnitInfos.length.unit;return new u({name:"distance",actual:n.r7,parse:(0,o.hw)({createQuantity:(t,i)=>(0,n.d_)(Math.max(t,0),e(i))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,n.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})}function _(t){return v({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0,...t})}function w(t){return v({...t})}function b(t){return v({...t,parse:(0,o.hw)({createQuantity:(t,e)=>(0,n.d_)(t,(t=>t.inputUnitInfos.length.unit)(e))}),format:(t,e)=>e.formatters.lengthRelative(t)})}function k(t){return new d(t)}function M(t){return new f(t)}function O(t){return new m(t)}function x(t){return T("scale",{name:"scale",actual:null,parse:(0,o.hw)({createQuantity:t=>(0,n.LF)(Math.abs(t))}),...t})}function I(t){const e=t=>t.inputUnitInfos.area.unit;return new u({name:"area",actual:n.iT,parse:(0,o.hw)({createQuantity:(t,i)=>(0,n.gT)(t,e(i))}),format:(t,e)=>e.formatters.area(t),formatForInputMode:(t,i)=>i.formatters.scalar((0,n.kM)(t,e(i))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...t})}function Z(t){return new u({name:"x",actual:n.IV,parse:o.L5,format:(t,e)=>e.formatters.longitudeDecimalDegrees(t),formatForInputMode:t=>(0,o.zX)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.longitude,...t})}function A(t){return new u({name:"y",actual:n.IV,parse:o.A3,format:(t,e)=>e.formatters.latitudeDecimalDegrees(t),formatForInputMode:t=>(0,o.oZ)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.latitude,...t})}function V(t){return T("x",{name:"x",...t})}function U(t){return T("y",{name:"y",...t})}function T(t,e){return new u({actual:(0,n.LF)(0),parse:(0,o.hw)({createQuantity:t=>(0,n.LF)(t)}),format:(t,e)=>e.formatters.scalar(t),formatForInputMode:(t,e)=>e.formatters.scalar(t),title:e=>e.messages.sketch[t],...e})}(0,r._)([(0,l.MZ)()],m.prototype,"precision",void 0),m=(0,r._)([(0,c.$)("esri.views.interactive.tooltip.fields.TooltipFieldSize")],m)},38153:(t,e,i)=>{i.d(e,{B:()=>p});var n=i(66866),o=i(73569),r=i(21564),s=(i(39831),i(539),i(9272),i(63863)),a=i(76557),l=i(69733),c=i(86568),u=i(25358);const p=t=>{let e=class extends t{constructor(){super(...arguments),this.longitude=(0,l.em)(),this.latitude=(0,l.fL)(),this.x=(0,l.Hw)(),this.y=(0,l.uf)(),this.elevation=(0,l.S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,e=t?.spatialReference){if(this.geographic=!!e&&(0,u.yF)(e),null==t)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const e=(0,a.QP)(t,d);this._setActualLonLat((0,c.m6)(e?.[0]),(0,c.m6)(e?.[1]))}else this._setActualXY((0,o.LF)(t.x),(0,o.LF)(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return(0,n._)([(0,r.MZ)()],e.prototype,"geographic",void 0),(0,n._)([(0,r.MZ)()],e.prototype,"effectiveX",null),(0,n._)([(0,r.MZ)()],e.prototype,"effectiveY",null),(0,n._)([(0,r.MZ)()],e.prototype,"key",null),e=(0,n._)([(0,s.$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],e),e},d=[0,0]}}]);