"use strict";
exports.id = 23590;
exports.ids = [23590,59034];
exports.modules = {

/***/ 50256:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ t),
/* harmony export */   S: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony export O */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{*[Symbol.iterator](){let t=this.next();for(;t;)yield t,t=this.next()}}class e extends (/* unused pure expression or super */ null && (t)){}class s extends t{constructor(t){super(),this.m_iGeom=-1,this.m_aGeoms=t?t.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const t=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,t}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}


/***/ }),

/***/ 38561:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}


/***/ }),

/***/ 80912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get outerSize(){return this._outer.size}get(t,e){return this._outer.get(t)?.get(e)}getInner(t){return this._outer.get(t)}set(t,e,r){const o=this._outer.get(t);o?o.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){const r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((e,r)=>t(e,r)))}forAll(t){this._outer.forEach(((e,r)=>e.forEach(((e,o)=>t(e,r,o)))))}}


/***/ }),

/***/ 3912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fA: () => (/* binding */ r),
/* harmony export */   o8: () => (/* binding */ t),
/* harmony export */   vt: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports ONES, UNIT_X, UNIT_Y, UNIT_Z, ZEROS, ones, unitX, unitY, unitZ, v, zeros */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function e(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function c(){return r(0,1,0)}function i(){return r(0,0,1)}const a=e(),f=o(),l=u(),s=c(),_=i(),y=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:s,UNIT_Z:_,ZEROS:a,clone:t,create:n,fromValues:r,ones:o,unitX:u,unitY:c,unitZ:i,zeros:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 40275:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fA: () => (/* binding */ r),
/* harmony export */   vt: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports ONES, UNIT_W, UNIT_X, UNIT_Y, UNIT_Z, ZEROS, clone, ones, unitW, unitX, unitY, unitZ, v, zeros */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return new Float32Array(4)}function t(n){const t=new Float32Array(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r(n,t,r,e){const o=new Float32Array(4);return o[0]=n,o[1]=t,o[2]=r,o[3]=e,o}function e(){return n()}function o(){return r(1,1,1,1)}function u(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function i(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const a=e(),l=o(),_=u(),s=c(),y=i(),N=f(),T=Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_W:N,UNIT_X:_,UNIT_Y:s,UNIT_Z:y,ZEROS:a,clone:t,create:n,fromValues:r,ones:o,unitW:f,unitX:u,unitY:c,unitZ:i,zeros:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 27243:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t={convertToGEGeometry:s,exportPoint:n,exportPolygon:o,exportPolyline:a,exportMultipoint:c,exportExtent:m};function s(t,s){return null==s?null:t.convertJSONToGeometry(s)}class i{constructor(t,s,i){this.x=t,this.y=s,this.spatialReference=i,this.z=void 0,this.m=void 0}}function n(t,s,n){const e=new i(t.getPointX(s),t.getPointY(s),n),o=t.hasZ(s),h=t.hasM(s);return o&&(e.z=t.getPointZ(s)),h&&(e.m=t.getPointM(s)),e}class e{constructor(t,s,i,n){this.rings=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function o(t,s,i){return new e(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class h{constructor(t,s,i,n){this.paths=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function a(t,s,i){return new h(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class r{constructor(t,s,i,n){this.points=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function c(t,s,i){return new r(t.exportPoints(s),i,t.hasZ(s),t.hasM(s))}class x{constructor(t,s,i,n,e){this.xmin=t,this.ymin=s,this.xmax=i,this.ymax=n,this.spatialReference=e,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function m(t,s,i){const n=t.hasZ(s),e=t.hasM(s),o=new x(t.getXMin(s),t.getYMin(s),t.getXMax(s),t.getYMax(s),i);if(n){const i=t.getZExtent(s);o.zmin=i.vmin,o.zmax=i.vmax}if(e){const i=t.getMExtent(s);o.mmin=i.vmin,o.mmax=i.vmax}return o}


/***/ }),

/***/ 1918:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ i),
/* harmony export */   l: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99050);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=128e3;let n=null,e=null;async function i(){return n||(n=r()),n}async function r(){const s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-csp-restrictions")?await __webpack_require__.e(/* import() */ 19022).then(__webpack_require__.bind(__webpack_require__, 19022)).then((t=>t.l)):await __webpack_require__.e(/* import() */ 82012).then(__webpack_require__.bind(__webpack_require__, 82012)).then((t=>t.l));e=await s.default({locateFile:s=>(0,_assets_js__WEBPACK_IMPORTED_MODULE_0__/* .getAssetUrl */ .s)(`esri/core/libs/libtess/${s}`)})}function a(t,n){const i=Math.max(t.length,s);return e.triangulate(t,n,i)}


/***/ }),

/***/ 59034:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  execute: () => (/* binding */ E),
  executeMany: () => (/* binding */ g),
  isLoaded: () => (/* binding */ T),
  load: () => (/* binding */ d),
  supportsCurves: () => (/* binding */ projectOperator_j)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/SimpleGeometryCursor.js
var SimpleGeometryCursor = __webpack_require__(50256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/pe.js
var pe = __webpack_require__(47063);
;// ../node_modules/@arcgis/core/geometry/operators/gx/operatorProject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let o;function u(){return!!o&&(0,pe.i)()}async function i(){if(!u()){const[n,e]=await Promise.all([__webpack_require__.e(/* import() */ 35211).then(__webpack_require__.bind(__webpack_require__, 57592)).then((n=>n.aH)),__webpack_require__.e(/* import() */ 35211).then(__webpack_require__.bind(__webpack_require__, 57592)).then((n=>n.aG)).then((({injectPe:n})=>n)),(0,pe.l)()]);o=new n.OperatorProject,e(pe.p)}}function c(n,r,t){return o.clipToSpatialReference(n,r,null,t)}function operatorProject_a(n,r){return o.execute(n,r,null)}function s(r,t){const e=o.executeMany(new SimpleGeometryCursor.S(r),t,null);return Array.from(e)}function f(n,r){return o.foldInto360Range(n,r)}function l(n,r,t){return o.foldInto360RangeGeodetic(n,r,t)}function m(n,r,t){return o.normalizeGeometry(n,r,t)}function p(){return o.supportsCurves()}function j(n,r,t,e,u){return o.transform(n,r,t,e,u)}

;// ../node_modules/@arcgis/core/geometry/operators/projectOperator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n,projectOperator_s,projectOperator_c,projectOperator_i,projectOperator_m,projectOperator_f,projectOperator_p,projectOperator_u,h,projectOperator_l,x,projectOperator_j;function T(){return!!projectOperator_s&&u()}async function d(){if(!T()){const[t,o,a,T]=await Promise.all([__webpack_require__.e(/* import() */ 40519).then(__webpack_require__.bind(__webpack_require__, 62900)),__webpack_require__.e(/* import() */ 35211).then(__webpack_require__.bind(__webpack_require__, 57592)).then((e=>e.aI)).then((({CompositeGeographicTransformationEditor:e})=>e)),__webpack_require__.e(/* import() */ 35211).then(__webpack_require__.bind(__webpack_require__, 57592)).then((e=>e.aJ)).then((({create:e,createFromWKT:t})=>({create:e,createFromWKT:t}))),__webpack_require__.e(/* import() */ 35211).then(__webpack_require__.bind(__webpack_require__, 57592)).then((e=>e.aK)).then((({create:e,createEx:t,createFromAoi:r})=>({create:e,createEx:t,createFromAoi:r}))),i()]);n=t.fromExtent,projectOperator_s=t.fromGeometry,projectOperator_c=t.fromSpatialReference,projectOperator_i=t.getSpatialReference,projectOperator_m=t.toGeometry,projectOperator_f=o,projectOperator_p=a.create,projectOperator_u=a.createFromWKT,h=T.createEx,projectOperator_l=T.createFromAoi,x=T.create,projectOperator_j=p()}}function E(e,t,r={}){const a=k(projectOperator_i(e),t,r);return projectOperator_m(operatorProject_a(projectOperator_s(e),a),t)}function g(e,t,r={}){const o=e.map(projectOperator_s),n=k(projectOperator_i(e),t,r);return s(o,n).map((e=>projectOperator_m(e,t)))}function k(e,t,r={}){let o;const a=projectOperator_c(e),s=projectOperator_c(t);if(r?.geographicTransformation){const e=new projectOperator_f;e.setInputSpatialReference(a),e.setOutputSpatialReference(s);for(const t of r.geographicTransformation.steps){let r;r=t.wkid?projectOperator_p(t.wkid,t.isInverse):projectOperator_u(t.wkt,t.isInverse),e.add(r)}o=e.create()}else if(r?.areaOfInterestExtent)return projectOperator_l(a,s,n(r.areaOfInterestExtent).asEnvelope2D());return o?h(a,s,o):x(a,s)}


/***/ }),

/***/ 14537:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b3: () => (/* binding */ a),
/* harmony export */   jZ: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export CutVertical */
/* harmony import */ var _core_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59372);
/* harmony import */ var _aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80510);
/* harmony import */ var _boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36358);
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65319);
/* harmony import */ var _jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1171);
/* harmony import */ var _normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(54599);
/* harmony import */ var _spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(t){return f(t,!0)}function a(t){return f(t,!1)}function f(i,n){if(null==i)return null;const p=i.spatialReference,a=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .getInfo */ .Vp)(p),f=(0,_core_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isSerializable */ .W)(i)?i.toJSON():i;if(!a)return f;const I=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isWebMercator */ .K8)(p)?102100:4326,g=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .cutParams */ .j7[I].maxX,v=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .cutParams */ .j7[I].minX;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isPoint */ .fT)(f))return y(f,g,v);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isMultipoint */ .U9)(f))return f.points=f.points.map((t=>y(t,g,v))),f;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isExtent */ .ZC)(f))return d(f,a);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isPolygon */ .Bi)(f)||(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isPolyline */ .Rg)(f)){const t=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getBoundsXY */ .Rg)(T,f),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},e=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .offsetMagnitude */ .kd)(i.xmin,v)*(2*g),h=0===e?f:(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .updatePolyGeometry */ .kS)(f,e);return i.xmin+=e,i.xmax+=e,i.xmax>g?C(h,g,n):i.xmin<v?C(h,v,n):h}return f}function d(t,i){if(!i)return t;const s=I(t,i).map((t=>t.extent));return s.length<2?s[0]||t:s.length>2?(t.xmin=i.valid[0],t.xmax=i.valid[1],t):{rings:s.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function y(t,i,s){if(Array.isArray(t)){const n=t[0];if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .offsetMagnitude */ .kd)(n,i);t[0]=n+s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .offsetMagnitude */ .kd)(n,s);t[0]=n+i*(-2*s)}}else{const n=t.x;if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .offsetMagnitude */ .kd)(n,i);t.x+=s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_4__/* .offsetMagnitude */ .kd)(n,s);t.x+=i*(-2*s)}}return t}function I(t,i){const s=[],{ymin:n,ymax:e,xmin:h,xmax:o}=t,u=t.xmax-t.xmin,[r,m]=i.valid,{x,frameId:l}=g(t.xmin,i),{x:_,frameId:c}=g(t.xmax,i),p=x===_&&u>0;if(u>2*m){const t={xmin:h<o?x:_,ymin:n,xmax:m,ymax:e},i={xmin:r,ymin:n,xmax:h<o?_:x,ymax:e},u={xmin:0,ymin:n,xmax:m,ymax:e},p={xmin:r,ymin:n,xmax:0,ymax:e},a=[],f=[];v(t,u)&&a.push(l),v(t,p)&&f.push(l),v(i,u)&&a.push(c),v(i,p)&&f.push(c);for(let s=l+1;s<c;s++)a.push(s),f.push(s);s.push(new P(t,[l]),new P(i,[c]),new P(u,a),new P(p,f))}else x>_||p?s.push(new P({xmin:x,ymin:n,xmax:m,ymax:e},[l]),new P({xmin:r,ymin:n,xmax:_,ymax:e},[c])):s.push(new P({xmin:x,ymin:n,xmax:_,ymax:e},[l]));return s}function g(t,i){const[s,n]=i.valid,e=2*n;let h,o=0;return t>n?(h=Math.ceil(Math.abs(t-n)/e),t-=h*e,o=h):t<s&&(h=Math.ceil(Math.abs(t-s)/e),t+=h*e,o=-h),{x:t,frameId:o}}function v(t,i){const{xmin:s,ymin:n,xmax:e,ymax:h}=i;return O(t,s,n)&&O(t,s,h)&&O(t,e,h)&&O(t,e,n)}function O(t,i,s){return i>=t.xmin&&i<=t.xmax&&s>=t.ymin&&s<=t.ymax}function C(t,i,s=!0){const e=!(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .isPolyline */ .Rg)(t);if(e&&(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .closeRings */ .m3)(t),s){return(new S).cut(t,i)}const h=e?t.rings:t.paths,o=e?4:2,u=h.length,m=-2*i;for(let n=0;n<u;n++){const t=h[n];if(t&&t.length>=o){const i=[];for(const s of t)i.push([s[0]+m,s[1]]);h.push(i)}}return e?t.rings=h:t.paths=h,t}class P{constructor(t,i){this.extent=t,this.frameIds=i}}const T=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)();class S{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,i){let s;if(this._xCut=i,t.rings)this._closed=!0,s=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,s=t.paths,this._minPts=2}for(const e of s){if(!e||e.length<this._minPts)continue;let t=!0;for(const i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),s=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&s.push(e);const n=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=n;s.push(e)}return this._closed?t.rings=s:t.paths=s,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const i=this._side(t[0]);if(i*this._prevSide===-1){const s=this._intersect(this._prevPt,t);this._lineTo(this._xCut,s,0),this._prevSide=0,this._lineTo(t[0],t[1],i)}else this._lineTo(t[0],t[1],i);this._prevSide=i,this._prevPt=t}close(){const t=this._firstPt,i=this._prevPt;t[0]===i[0]&&t[1]===i[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,i,s){this._closed?(this._lineIn.push([s<=0?t:this._xCut,i]),this._lineOut.push([s>=0?t:this._xCut,i])):(s<=0&&this._lineIn.push([t,i]),s>=0&&this._lineOut.push([t,i]))}_lineTo(t,i,s){this._closed?(j(this._lineIn,s<=0?t:this._xCut,i),j(this._lineOut,s>=0?t:this._xCut,i)):s<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,i])):s>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,i])):this._prevSide<0?(this._lineIn.push([t,i]),this._lineOut.push([t,i])):this._prevSide>0&&(this._lineOut.push([t,i]),this._lineIn.push([t,i]))}_checkClosingPt(t){const i=t.length;i>3&&t[0][0]===this._xCut&&t[i-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[i-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,i){const s=(this._xCut-t[0])/(i[0]-t[0]);return t[1]+s*(i[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}function j(t,i,s){const n=t.length;n>1&&t[n-1][0]===i&&t[n-2][0]===i?t[n-1][1]=s:t.push([i,s])}


/***/ }),

/***/ 95694:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LQ: () => (/* binding */ y),
/* harmony export */   ag: () => (/* binding */ h),
/* harmony export */   pL: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21355);
/* harmony import */ var _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(88443);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const u=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,f=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,m=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,c={esriGeometryPoint:_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToPoint */ .DF,esriGeometryPolyline:_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToPolyline */ .BW,esriGeometryPolygon:_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToPolygon */ .z5,esriGeometryMultipoint:_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToMultipoint */ .qK};function y(n,r,t,o=n.hasZ,s=n.hasM){if(null==r)return null;const l=n.hasZ&&o,u=n.hasM&&s;if(t){const f=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .quantizeOptimizedGeometry */ .Nl)(m,r,n.hasZ,n.hasM,"esriGeometryPoint",t,o,s);return (0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToPoint */ .DF)(f,l,u)}return (0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToPoint */ .DF)(r,l,u)}function a(r,t,o,i,l,y,a=t,h=o){const p=t&&a,G=o&&h,g=null!=i?"coords"in i?i:i.geometry:null;if(null==g)return null;if(l){let i=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .generalizeOptimizedGeometry */ .kz)(f,g,t,o,r,l,a,h);return y&&(i=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .quantizeOptimizedGeometry */ .Nl)(m,i,p,G,r,y)),c[r]?.(i,p,G)??null}if(y){const n=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .quantizeOptimizedGeometry */ .Nl)(m,g,t,o,r,y,a,h);return c[r]?.(n,p,G)??null}return (0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .removeZMValues */ .Q4)(u,g,t,o,a,h),c[r]?.(u,p,G)??null}function h(n){return n&&p in n?JSON.parse(JSON.stringify(n,G)):n}const p="_geVersion",G=(n,e)=>n===p?void 0:e;


/***/ }),

/***/ 23783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cv: () => (/* binding */ j),
/* harmony export */   Nk: () => (/* binding */ x),
/* harmony export */   lK: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40189);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68490);
/* harmony import */ var _geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27243);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87926);
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96082);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const p=[0,0];function c(s,t){if(!t)return null;if("x"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,p),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if("xmin"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,p),[e.xmax,e.ymax]=s(t.xmax,t.ymax,p),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return"rings"in t?{rings:h(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:h(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function h(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru):[t];await (0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.initializeProjection)(r.map((s=>({source:s,dest:n}))))}const y=c.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .lngLatToXY */ .je),g=c.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .xyToLngLat */ .tD);function j(s,t,e,u){if(!s)return null;if(e||(e=t,t=s.spatialReference),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(t)||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(e)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(t,e))return s;if((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(t,e)){const t=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(e)?y(s):g(s);return t.spatialReference=e,t}return (0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,[s],t,e,null,u)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createResolver */ .Tw)()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:u}=s;(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(e,i)?(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(i)?o(t.map(y)):o(t.map(g)):o((0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,t,e,i,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}


/***/ }),

/***/ 35746:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GC: () => (/* binding */ x),
/* harmony export */   T2: () => (/* binding */ B),
/* harmony export */   VY: () => (/* binding */ g),
/* harmony export */   dO: () => (/* binding */ h),
/* harmony export */   iJ: () => (/* binding */ w),
/* harmony export */   v8: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59851);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92976);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(68490);
/* harmony import */ var _geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90557);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1171);
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65231);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87926);
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(23783);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONMap */ .J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),S=Object.freeze({}),R="frequency";async function w(t,e,i){const r=t.bin;return r.onField&&(r.onField=r.onField.trim()),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),"normalizationField"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),t.outStatistics?.length||(t.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:R}]),x(t,e,i)}async function x(t,e,i){const{outFields:r,orderByFields:n,groupByFieldsForStatistics:a,outStatistics:o}=t;if(r)for(let s=0;s<r.length;s++)r[s]=r[s].trim();if(n)for(let s=0;s<n.length;s++)n[s]=n[s].trim();if(a)for(let s=0;s<a.length;s++)a[s]=a[s].trim();if(o)for(let s=0;s<o.length;s++)o[s].onStatisticField&&(o[s].onStatisticField=o[s].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),B(t,e,i)}async function B(t,e,i){if(!t)return null;let{where:r}=t;if(t.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||e&&e===r)&&(t.where=null),!t.geometry)return t;let o=await v(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:e}=t.geometry;o=(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .getGeometryExtent */ .HA)(o),o.spatialReference=e}if(o){await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .checkProjectionSupport */ .Nk)(o.spatialReference,i),o=j(o,i);const e=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .normalizeCentralMeridian */ .el)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromJSON */ .rS)(o)))[0];if(null==e)throw S;const r="quantizationParameters"in t&&t.quantizationParameters?.tolerance||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,n=r&&F(o,i)?{densificationStep:8*r}:void 0,s=e.toJSON(),l=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .project */ .Cv)(s,s.spatialReference,i,n);if(!l)throw S;l.spatialReference=i,t.geometry=l}return t}function F(t,e){if(!t)return!1;const i=t.spatialReference;return((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isExtent */ .ZC)(t)||(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolygon */ .Bi)(t)||(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolyline */ .Rg)(t))&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .equals */ .aI)(i,e)&&!(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_3__.canProjectWithoutEngine)(i,e)}function j(t,e){const i=t.spatialReference;return F(t,e)&&(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isExtent */ .ZC)(t)?{spatialReference:i,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function v(e){const{distance:r,units:n}=e,a=e.geometry;if(null==r||"vertexAttributes"in a)return a;const s=a.spatialReference,l=n?g.fromJSON(n):(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getUnitString */ .Ij)(s),m=s&&((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isGeographic */ .EA)(s)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isWebMercator */ .K8)(s))?a:await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .checkProjectionSupport */ .Nk)(s,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .wgs84 */ .KK).then((()=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .project */ .Cv)(a,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .wgs84 */ .KK))),f=await __webpack_require__.e(/* import() */ 31600).then(__webpack_require__.bind(__webpack_require__, 31600));await f.load();const S=f.execute(m,r||1,{unit:l})??void 0;if(!S||!(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolygon */ .Bi)(S)||0===S.rings.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return S}function h(t,e){return null==t?null:"string"==typeof t?e?new Date(`1970-01-01T${t}Z`).getTime():new Date(t).getTime():t instanceof Date?t.getTime():t}


/***/ }),

/***/ 70759:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  tC: () => (/* binding */ d),
  c0: () => (/* binding */ w),
  xt: () => (/* binding */ I)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/contains.js
var contains = __webpack_require__(1364);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/intersectsBase.js
var intersectsBase = __webpack_require__(43525);
;// ../node_modules/@arcgis/core/geometry/support/intersects.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(s){return"mesh"===s?intersectsBase/* extentIntersectsExtent */.xB:(0,intersectsBase/* getFeatureExtentIntersector */.xK)(s)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
;// ../node_modules/@arcgis/core/layers/graphics/contains.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,t){return n?t?4:3:t?3:2}function t(n,t,r,e){return o(n,t,r,e.coords[0],e.coords[1])}function contains_r(t,r,e,c,u,f){const s=n(u,f),{coords:i,lengths:l}=c;if(!l)return!1;for(let n=0,d=0;n<l.length;n++,d+=s)if(!o(t,r,e,i[d],i[d+1]))return!1;return!0}function o(t,r,o,c,u){if(!t)return!1;const f=n(r,o),{coords:s,lengths:i}=t;let l=!1,d=0;for(const n of i)l=e(l,s,f,d,n,c,u),d+=n*f;return l}function e(n,t,r,o,e,c,u){let f=n,s=o;for(let i=o,l=o+e*r;i<l;i+=r){s=i+r,s===l&&(s=o);const n=t[i],e=t[i+1],d=t[s],g=t[s+1];(e<u&&g>=u||g<u&&e>=u)&&n+(u-e)/(g-e)*(d-n)<c&&(f=!f)}return f}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js
var geometryUtils = __webpack_require__(95694);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js
var projectionSupport = __webpack_require__(23783);
;// ../node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const f="unsupported-query",R={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!1,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultiPatch:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function S(e){return null!=e&&!0===R.spatialRelationship[e]}function j(e){return null!=e&&!0===R.queryGeometry[(0,jsonUtils/* getJsonType */.$B)(e)]}function G(e){return null!=e&&!0===R.layerGeometry[e]}const g={esriSpatialRelIntersects:()=>__webpack_require__.e(/* import() */ 4619).then(__webpack_require__.bind(__webpack_require__, 4619)),esriSpatialRelContains:()=>__webpack_require__.e(/* import() */ 80720).then(__webpack_require__.bind(__webpack_require__, 80720)),esriSpatialRelCrosses:()=>__webpack_require__.e(/* import() */ 22569).then(__webpack_require__.bind(__webpack_require__, 22569)),esriSpatialRelDisjoint:()=>__webpack_require__.e(/* import() */ 8537).then(__webpack_require__.bind(__webpack_require__, 8537)),esriSpatialRelEnvelopeIntersects:null,esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:()=>__webpack_require__.e(/* import() */ 50561).then(__webpack_require__.bind(__webpack_require__, 50561)),esriSpatialRelTouches:()=>__webpack_require__.e(/* import() */ 23294).then(__webpack_require__.bind(__webpack_require__, 23294)),esriSpatialRelWithin:()=>__webpack_require__.e(/* import() */ 80102).then(__webpack_require__.bind(__webpack_require__, 80102)),esriSpatialRelRelation:null};function h(e){const r=g[e];if(null==r)throw new Error(`Cannot load unsupported spatial operator: ${e}`);return r()}async function I(e,n,a,c,f){if((0,jsonUtils/* isPolygon */.Bi)(n)){if("esriGeometryPoint"===a&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){const e=(0,featureConversionUtils/* convertFromPolygon */.Ye)(new OptimizedGeometry/* default */.A,n,!1,!1);return r=>t(e,!1,!1,r)}if("esriGeometryMultipoint"===a){const r=(0,featureConversionUtils/* convertFromPolygon */.Ye)(new OptimizedGeometry/* default */.A,n,!1,!1);if("esriSpatialRelContains"===e)return e=>contains_r(r,!1,!1,e,c,f)}}if((0,jsonUtils/* isExtent */.ZC)(n)){if("esriGeometryPoint"===a&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return e=>(0,contains/* extentContainsPoint */.qz)(n,(0,geometryUtils/* getGeometry */.pL)(a,c,f,e));if("esriGeometryMultipoint"===a&&"esriSpatialRelContains"===e)return e=>(0,contains/* extentContainsMultipoint */.rL)(n,(0,geometryUtils/* getGeometry */.pL)(a,c,f,e));if("esriSpatialRelIntersects"===e){const e=s(a);return r=>e(n,(0,geometryUtils/* getGeometry */.pL)(a,c,f,r))}}"esriSpatialRelEnvelopeIntersects"===e&&(e="esriSpatialRelIntersects");const R=await h(e);return e=>R.execute(n,(0,geometryUtils/* getGeometry */.pL)(a,c,f,e))}async function w(r,t,i){const{spatialRel:o,geometry:s}=r;if(s){if(!S(o))throw new core_Error/* default */.A(f,"Unsupported query spatial relationship",{query:r});if((0,spatialReferenceUtils/* isValid */.fn)(s.spatialReference)&&(0,spatialReferenceUtils/* isValid */.fn)(i)){if(!j(s))throw new core_Error/* default */.A(f,"Unsupported query geometry type",{query:r});if(!G(t))throw new core_Error/* default */.A(f,"Unsupported layer geometry type",{query:r});if(r.outSR)return (0,projectionSupport/* checkProjectionSupport */.Nk)(r.geometry?.spatialReference,r.outSR)}}}function d(e){if((0,jsonUtils/* isExtent */.ZC)(e))return!0;if((0,jsonUtils/* isPolygon */.Bi)(e)){for(const r of e.rings){if(5!==r.length)return!1;if(r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==r[4][1]||r[1][1]!==r[2][1])return!1}return!0}return!1}


/***/ }),

/***/ 71339:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ l),
/* harmony export */   W: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function n(n,l){if(!n)return null;const u=l.featureAdapter,{startTimeField:r,endTimeField:e}=n;let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;if(r&&e)await l.forEach((n=>{const l=u.getAttribute((0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .toConst */ .zI)(n),r),s=u.getAttribute((0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .toConst */ .zI)(n),e);null==l||isNaN(l)||(i=Math.min(i,l)),null==s||isNaN(s)||(o=Math.max(o,s))}));else{const n=r||e;await l.forEach((l=>{const r=u.getAttribute((0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .toConst */ .zI)(l),n);null==r||isNaN(r)||(i=Math.min(i,r),o=Math.max(o,r))}))}return{start:i,end:o}}function l(t,n,l){if(!n||!t)return null;const{startTimeField:i,endTimeField:o}=t;if(!i&&!o)return null;const{start:s,end:a}=n;if(null===s&&null===a)return null;if(void 0===s&&void 0===a)return e();const c=l.getAttributeAsTimestamp?.bind(l)??l.getAttribute.bind(l);return i&&o?u(c,i,o,s,a):r(c,i||o,s,a)}function u(t,n,l,u,r){return null!=u&&null!=r?e=>{const i=t(e,n),o=t(e,l);return(null==i||i<=r)&&(null==o||o>=u)}:null!=u?n=>{const r=t(n,l);return null==r||r>=u}:null!=r?l=>{const u=t(l,n);return null==u||u<=r}:void 0}function r(t,n,l,u){return null!=l&&null!=u&&l===u?u=>t(u,n)===l:null!=l&&null!=u?r=>{const e=t(r,n);return null!=e&&e>=l&&e<=u}:null!=l?u=>{const r=t(u,n);return null!=r&&r>=l}:null!=u?l=>{const r=t(l,n);return null!=r&&r<=u}:void 0}function e(){return()=>!1}


/***/ }),

/***/ 9723:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CI: () => (/* binding */ a),
/* harmony export */   fk: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony export equals */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],a=n[t];if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1}return!0}function r(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}function a(e,t){return e===t||null!=e&&null!=t&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .equals */ .aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function i(t,r,a){return t===r||null!=t&&null!=r&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .equals */ .aI)(t.spatialReference,r.spatialReference)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.x,r.x,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.y,r.y,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.z??0,r.z??0,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.m??0,r.m??0,a)}function u(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&r(e.paths,t.paths))}function l(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&r(e.rings,t.rings))}function s(e,r){return e.hasZ===r.hasZ&&e.hasM===r.hasM&&(!!n(e.spatialReference,r.spatialReference)&&t(e.points,r.points))}function f(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&(e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax))}function c(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.type!==n.type)return!1;switch(e.type){case"point":return a(e,n);case"extent":return f(e,n);case"polyline":return u(e,n);case"polygon":return l(e,n);case"multipoint":return s(e,n);case"mesh":return!1;default:return}}function o(e,n){if(e===n)return!0;if(!e||!n)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(e[a]!==n[a])return!1;return!0}function h(e,n){return e===n||null!=e&&null!=n&&e.objectId===n.objectId&&(!!c(e.geometry,n.geometry)&&!!o(e.attributes,n.attributes))}


/***/ }),

/***/ 28413:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HP: () => (/* binding */ d),
/* harmony export */   N3: () => (/* binding */ b),
/* harmony export */   RW: () => (/* binding */ R),
/* harmony export */   Uz: () => (/* binding */ w),
/* harmony export */   gR: () => (/* binding */ F),
/* harmony export */   iQ: () => (/* binding */ z),
/* harmony export */   jy: () => (/* binding */ x),
/* harmony export */   w9: () => (/* binding */ v)
/* harmony export */ });
/* unused harmony exports estimateSize, fromFeatureSetJSON, fromJSONGeometry, hasVertices, numVertices */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4754);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(78983);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(20698);
/* harmony import */ var _geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12433);
/* harmony import */ var _support_Field_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(24738);
/* harmony import */ var _views_2d_layers_graphics_densificationConstants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(31328);
/* harmony import */ var _dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(9723);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d{constructor(e,t,s){this.uid=e,this.geometry=t,this.attributes=s,this.visible=!0,this.objectId=null,this.centroid=null}}function b(e){return null!=e.geometry}class x{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function j(e,t){const s=f.fromJSON(e.geometryType),n=i.fromJSON(e.spatialReference),r=e.transform,o=e.objectIdFieldName,a=t?.maxStringAttributeLength,l=t?.maxStringAttributeFields;let u;const g=e.features.map((t=>{const i=N(t,s,n,e.objectIdFieldName),f=i.geometry;if(w(i.attributes,l,a,(e=>{u??=[];const t=R(i,o);null!=t&&u.push({objectId:t,attribute:e})})),null!=f&&r)switch(f.type){case"point":i.geometry=h(r,f,f);break;case"multipoint":i.geometry=m(r,f,f);break;case"polygon":i.geometry=p(r,f,f);break;case"polyline":i.geometry=c(r,f,f);break;case"extent":case"mesh":i.geometry=f}return i}));return{geometryType:s,features:g,spatialReference:n,fields:e.fields?.map((e=>y.fromJSON(e)))??[],objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null,missingAttributes:u}}function N(e,t,s,n){return{uid:r(),objectId:n&&e.attributes?e.attributes[n]:null,attributes:e.attributes,geometry:Z(e.geometry,t,s),visible:!0}}function Z(e,t,s){if(null==e)return null;switch(t){case"point":{const t=e;return{x:t.x,y:t.y,z:t.z,m:t.m,hasZ:null!=t.z,hasM:null!=t.m,type:"point",spatialReference:s}}case"polyline":{const t=e;return{paths:t.paths,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polyline",spatialReference:s}}case"polygon":{const t=e;return{rings:t.rings,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"polygon",spatialReference:s}}case"multipoint":{const t=e;return{points:t.points,hasZ:!!t.hasZ,hasM:!!t.hasM,type:"multipoint",spatialReference:s}}}}function F(n){if(null==n)return 0;switch(n.type){case"point":return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK+10+8+24;case"polyline":case"polygon":{let t=0;const r=2+(n.hasZ?1:0)+(n.hasM?1:0),i="polyline"===n.type?n.paths:n.rings,o="polyline"===n.type?n.curvePaths:n.curveRings;if(o?.length){const e=3*(0,_views_2d_layers_graphics_densificationConstants_js__WEBPACK_IMPORTED_MODULE_8__/* .getApproximateMaxDensificationSegments */ .B1)()*128;t=8*e*r+128*e+32*(i.length+1)}else t=(0,_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .estimateNestedObjectMemory */ .Qh)(i);return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK+64+t+34}case"multipoint":{const t=(0,_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .estimateNestedObjectMemory */ .Qh)(n.points);return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK+t+64+34+32}case"extent":return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK+10+64+34;case"mesh":{const s=n.vertexAttributes;return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK+(0,_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .estimateNumberArrayMemory */ .Qf)(s.position,s.normal,s.uv,s.tangent)}default:return _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseObjectMemory */ .qK}}function I(e){let t=32;return t+=n(e.attributes),t+=3,t+=8+F(e.geometry),t}function k(e){if(null==e)return 0;switch(e.type){case"point":return 1;case"polyline":{let t=0;for(const s of e.paths)t+=s.length;return t}case"polygon":{let t=0;for(const s of e.rings)t+=s.length;return t}case"multipoint":return e.points.length;case"extent":return 2;case"mesh":{const t=e.vertexAttributes&&e.vertexAttributes.position;return t?t.length/3:0}default:return}}function M(e){if(null==e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":for(const t of e.paths)if(t.length>0)return!0;return!1;case"polygon":for(const t of e.rings)if(t.length>0)return!0;return!1;case"multipoint":return e.points.length>0;case"mesh":return!e.loaded||e.vertexAttributes.position.length>0}}function v(e,t){switch((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .empty */ .Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(let s=0;s<e.paths.length;s++)(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.paths[s],!!e.hasZ);break;case"polygon":for(let s=0;s<e.rings.length;s++)(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.rings[s],!!e.hasZ);break;case"multipoint":(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_3__/* .expandWithNestedArray */ .Jf)(t,e.points,!!e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax)}return t}function z(e,t){switch((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .empty */ .Ie)(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(let s=0;s<e.paths.length;s++)(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.paths[s]);break;case"polygon":for(let s=0;s<e.rings.length;s++)(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.rings[s]);break;case"multipoint":(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__/* .expandWithNestedArray */ .Jf)(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax}}function R(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null}function w(e,t,s,n){if(t?.size&&null!=s&&e)for(const r in e){if(!t.has(r))continue;const i=e[r];"string"==typeof i&&i.length>s&&(n(r),e[r]="")}}


/***/ }),

/***/ 34528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86394);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function t(t,r){const{data:a}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(t,{responseType:"image",...r});return a}


/***/ }),

/***/ 21422:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fj: () => (/* binding */ h),
/* harmony export */   Z7: () => (/* binding */ m),
/* harmony export */   ce: () => (/* binding */ u),
/* harmony export */   eR: () => (/* binding */ a),
/* harmony export */   xt: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51859);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1171);
/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(76715);
/* harmony import */ var _views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=.45;function a(t,o=.5){switch(t.type){case"CIMPointSymbol":{const o=t.symbolLayers;if(!o||1!==o.length)return null;const n=o[0];return"CIMVectorMarker"!==n.type?null:a(n)}case"CIMVectorMarker":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const r=n[0];if(!r)return null;const i=r.geometry;if(!i)return null;const e=r.symbol;return!e||"CIMPolygonSymbol"!==e.type&&"CIMLineSymbol"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:"sdf",geom:i,sdfPaddingRatio:o,asFill:"CIMPolygonSymbol"===e.type}}}}function l(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function s(t){let o=1/0,r=-1/0,i=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<i&&(i=t[1]),t[1]>e&&(e=t[1]);return new _Rect_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A(o,i,r-o,e-i)}function f(t){let o=1/0,n=-1/0,r=1/0,i=-1/0;for(const e of t)for(const t of e)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>i&&(i=t[1]);return[o,r,n,i]}function m(t){return t?t.rings?f(t.rings):t.paths?f(t.paths):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isExtent */ .ZC)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function c(t,o){const[n,e,a,l]=m(t),s=a-n,f=l-e,c=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,h=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,u=Math.floor(.5*(c*o-h)),y=(c-2*(u+h))/Math.max(s,f),d=Math.round(s*y),x=Math.round(f*y);return{pixelDimensions:[s,f],texelDimensions:[Math.round((d+2*u)/y),Math.round((x+2*u)/y)]}}function h(t,o,n,a,l,s,f){const[m,c,h,u]=t;if(h<m||u<c)return{frameSizeRatio:0,anchorX:0,anchorY:0,widthRatio:1,sdfPaddingRatio:.5};const y=h-m,d=u-c,x=Math.max(y,d);let M=.5;if(null!=s&&null!=n){if(!f&&null!=o){s*=(o.ymax-o.ymin)/n}const t=s/(s+x),r=.1;t>e&&t<1&&(M=Math.min(t+r,.99))}const g=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,p=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,R=Math.floor(.5*(g*M-p)),w=(g-2*(R+p))/x,P=Math.round(y*w)+2*R,b=Math.round(d*w)+2*R;let C=1;if(o){C=b*(1-M)/((o.ymax-o.ymin)*w)}let I=0,S=0,j=1;a&&(l?o&&n&&o.ymax-o.ymin>0&&(j=(o.xmax-o.xmin)/(o.ymax-o.ymin),I=a.x/(n*j),S=a.y/n):(I=a.x,S=a.y)),o&&(I=.5*(o.xmax+o.xmin)+I*(o.xmax-o.xmin),S=.5*(o.ymax+o.ymin)+S*(o.ymax-o.ymin)),I-=m,S-=c,I*=w,S*=w,I+=R,S+=R;let v=I/P-.5,F=S/b-.5;return l&&n&&(v*=n*j,F*=n),{frameSizeRatio:C,anchorX:v,anchorY:F,widthRatio:j,sdfPaddingRatio:M}}function u(t){const o=l(t.geom),n=s(o),e=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,a=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,f=Math.floor(.5*(e*t.sdfPaddingRatio-a)),m=e-2*(f+a),c=m/Math.max(n.width,n.height),h=Math.round(n.width*c)+2*f,u=Math.round(n.height*c)+2*f,M=[];for(const r of o)if(r&&r.length>1){const o=[];for(const i of r){let[r,e]=i;r-=n.x,e-=n.y,r*=c,e*=c,r+=f-.5,e+=f-.5,t.asFill?o.push([r,e]):o.push([Math.round(r),Math.round(e)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}M.push(o)}const g=y(M,h,u,f);return t.asFill&&d(M,h,u,f,g),{data:x(g,f),width:h,height:u,sdfPaddingRatio:t.sdfPaddingRatio,sdfDecodeCoeff:2*f/m}}function y(t,o,n,r){const i=o*n,e=new Array(i),a=r*r+1;for(let l=0;l<i;++l)e[l]=a;for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],a=l[i];let s,f,m,c;t[0]<a[0]?(s=t[0],f=a[0]):(s=a[0],f=t[0]),t[1]<a[1]?(m=t[1],c=a[1]):(m=a[1],c=t[1]);let h=Math.floor(s)-r,u=Math.floor(f)+r,y=Math.floor(m)-r,d=Math.floor(c)+r;h<0&&(h=0),u>o&&(u=o),y<0&&(y=0),d>n&&(d=n);const x=a[0]-t[0],M=a[1]-t[1],g=x*x+M*M;for(let r=h;r<u;r++)for(let i=y;i<d;i++){const l=r+.5,s=i+.5;let f,m,c=(l-t[0])*x+(s-t[1])*M;c<0?(f=t[0],m=t[1]):c>g?(f=a[0],m=a[1]):(c/=g,f=t[0]+c*x,m=t[1]+c*M);const h=(l-f)*(l-f)+(s-m)*(s-m),u=(n-i-1)*o+r;h<e[u]&&(e[u]=h)}}}for(let l=0;l<i;++l)e[l]=Math.sqrt(e[l]);return e}function d(t,o,n,r,i){for(const e of t){const t=e.length;for(let a=1;a<t;++a){const t=e[a-1],l=e[a];let s,f,m,c;t[0]<l[0]?(s=t[0],f=l[0]):(s=l[0],f=t[0]),t[1]<l[1]?(m=t[1],c=l[1]):(m=l[1],c=t[1]);let h=Math.floor(s),u=Math.floor(f)+1,y=Math.floor(m),d=Math.floor(c)+1;h<r&&(h=r),u>o-r&&(u=o-r),y<r&&(y=r),d>n-r&&(d=n-r);for(let e=y;e<d;++e){if(t[1]>e==l[1]>e)continue;const a=e+.5,s=(n-e-1)*o;for(let o=h;o<u;++o){o+.5<(l[0]-t[0])*(a-t[1])/(l[1]-t[1])+t[0]&&(i[s+o]=-i[s+o])}for(let t=r;t<h;++t)i[s+t]=-i[s+t]}}}}function x(o,n){const r=2*n,i=o.length,e=new Uint8Array(4*i);for(let a=0;a<i;++a){const n=.5-o[a]/r;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__/* .packFloatRGBA */ .U)(n,e,4*a)}return e}


/***/ }),

/***/ 4293:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{get forceStaticPath(){return"disabled"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-enable-status")}get forceAnimatedPath(){return"forced"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-enable-status")}get freezeGlobalTime(){const e=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-freeze-time");return e??!1}get spotlightAnimatedSymbols(){return!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-spotlight")}get forceGlobalTimeOrigin(){return!1!==(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-freeze-time")}}const t=new e;


/***/ }),

/***/ 78006:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _geometry_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(18159);
/* harmony import */ var _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13022);
/* harmony import */ var _CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90157);
/* harmony import */ var _CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48002);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=96/72;class l{static executeEffects(t,e,l,c,f){const m=n,p=(0,_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__/* .getEffectsInflateSize */ .ll)(t);let u=new _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleEffectCursor */ .k(e);for(const o of t){const t=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__/* .getEffectOperator */ .A)(o);t&&(u=t.execute(u,o,m,l,c,p,f))}return u}static applyEffects(n,l,c){if(!n)return l;const f=(0,_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__/* .getEffectsInflateSize */ .ll)(n);let m,p=new _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleEffectCursor */ .k(_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromJSONCIM(l));for(const t of n){const e=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__/* .getEffectOperator */ .A)(t);e&&(p=e.execute(p,t,1,null,c,f,!1))}const u=[];let i=null;for(;m=p.next();)u.push(...(0,_geometry_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .collectMultipath */ .x)(m)),i=m.geometryType;return 0===u.length||null===i?null:"esriGeometryPolygon"===i?{rings:u}:{paths:u}}}


/***/ }),

/***/ 73048:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _CIMOperators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90157);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{static getPlacement(e,r,n,s,c,o){const a=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_0__/* .getPlacementOperator */ .c)(n);if(!a)return null;-1===r&&e.invertY();return a.execute(e,n,s,c,o)}}


/***/ }),

/***/ 64208:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export LabelClassStyleRepository */
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _engine_vectorTiles_decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(99590);
/* harmony import */ var _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(31541);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=7e6;class c{constructor(){this.styles=new Map,this.layerContexts=new Map}get cachedStyles(){return this.styles}setLabelClassStyle(e,t,s){this.layerContexts.set(e,t),this.styles.set(e,s)}}let p=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(e){super(e),this._faderWorkingSet=[],this._styleRepository=new c,this.lastUpdateId=-1,this.updateRequested=!1,this.view=null;const t=(e,t)=>{e.updateLabelVisibility(),e.requestRender(),e.isReady&&(e.decluttered=!0)};this.symbolFader=new _engine_vectorTiles_decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_7__/* .SymbolFader */ .J("feature-tile",this._styleRepository,t,this._faderWorkingSet,_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__/* .tileSize */ .CQ,n)}get updating(){return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("esri-2d-log-updating")&&console.log(`Updating LabelManager ${this.updateRequested}:\n-> updateRequested: ${this.updateRequested}`),this.updateRequested}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view?.requestUpdate())}processUpdate(e){this.doUpdate(e)?this.updateRequested=!1:(this.updateRequested=!0,this.view?.requestUpdate())}setLabelSchemaStyles(e,t){let s;switch(e.type){case"label":s=e.classes;break;case"subtype":s=Array.from(Object.values(e.renderers).flatMap((e=>e.classes)));break;case"cluster":s=[...e.cluster.classes,...e.feature.classes];break;case"track":s=[...e.latestObservation.classes,...e.previousObservation.classes,...e.trackLine.classes]}for(const r of s){const e=d(r);this._styleRepository.setLabelClassStyle(r.labelClassId,t,e)}}doUpdate(e){const t=this.view;if(!t)return!1;const s=t.allLayerViews.map((e=>e.featureContainer)).filter((e=>!!e&&e?.hasLabels));if(s.length>0){this._faderWorkingSet.length=0;for(const t of s)for(const s of t.tiles||[])s.setTransform(e.state),this._faderWorkingSet.push(s);const r=e.state.scale,o=t.featuresTilingScheme.scaleToZoom(r);return this.symbolFader.update(o,e.state)}return!0}};function d(e){const t="esriGeometryPolyline"===e.geometryType?_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_8__/* .RotationAlignment */ .I5.MAP:_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_8__/* .RotationAlignment */ .I5.VIEWPORT,s="esriGeometryPolyline"===e.geometryType?_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_8__/* .TranslateAnchor */ .Cq.MAP:_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_8__/* .TranslateAnchor */ .Cq.VIEWPORT;return{geometryType:e.geometryType,iconAllowOverlap:!e.deconflictionEnabled,iconIgnorePlacement:!1,textAllowOverlap:!e.deconflictionEnabled,textIgnorePlacement:!1,iconRotationAlignment:t,textRotationAlignment:t,iconTranslateAnchor:s,iconTranslate:[0,0],textTranslateAnchor:s,textTranslate:[0,0]}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)()],p.prototype,"updateRequested",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)()],p.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)()],p.prototype,"view",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.2d.LabelManager")],p);


/***/ }),

/***/ 64048:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OP: () => (/* binding */ t),
/* harmony export */   V4: () => (/* binding */ n),
/* harmony export */   rZ: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,r,t){if(null==n)return null;const u=r.readArcadeFeature();r.contextTimeZone=t.$view?.timeZone;try{return n.evaluate(u,t)}catch(a){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}function r(e){return null==e||e===1/0||e===-1/0||"number"==typeof e&&isNaN(e)}function t(e,n,t,u){if(null==e)return null!=u?u:null;const a=n.readArcadeFeature();n.contextTimeZone=t.$view?.timeZone;const o=e.evaluate(a,t);return r(o)?null!=u?u:null:o}


/***/ }),

/***/ 31091:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  j: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const T=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.AttributeStoreView");class m{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:a}=t,n=(0,Utils/* getPixelArrayCtor */.Qz)(r);this.blockIndex=i,this.pixelType=r,this.size=e,this.textureOnly=a,a||(this.data=new n(s)),this._resetRange()}destroy(){this._texture?.dispose();for(const t in this._fbos){const e=this._fbos[t];e&&("0"===t&&e.detachColorTexture(),e.dispose()),this._fbos[t]=null}this._texture=null}get _textureDesc(){const t=new TextureDescriptor/* TextureDescriptor */.R;return t.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,t.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}setData(t,e,i){const s=(0,DisplayId/* getDisplayIdTexel */.Q4)(t),r=this.data,a=s*this.texelSize+e;!r||a>=r.length||(r[a]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,e){if(null==this.data)return null;const i=(0,DisplayId/* getDisplayIdTexel */.Q4)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}getTexture(t){return this._texture??this._initTexture(t)}getFBO(t,e=0){if(!this._fbos[e]){const i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new FramebufferObject/* FramebufferObject */.H(t,i)}return this._fbos[e]}get hasDirty(){const t=this.dirtyStart;return this.dirtyEnd>=t}updateTexture(e,i){try{const s=this.dirtyStart,r=this.dirtyEnd;if(!this.hasDirty)return;(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${i}] AttributeStoreView.updateTexture`,{start:s,end:r,firstBytes:new Uint8Array(this.data.buffer.slice(0,16)),block:this}),this._resetRange();const a=this.data.buffer,n=this.getTexture(e),u=4,h=(s-s%this.size)/this.size,o=(r-r%this.size)/this.size,l=h,d=this.size,p=o,_=h*this.size*u,c=(d+p*this.size)*u-_,x=(0,Utils/* getPixelArrayCtor */.Qz)(this.pixelType),f=new x(a,_*x.BYTES_PER_ELEMENT,c),b=this.size,m=p-l+1;if(m>this.size)return void T().error(new core_Error/* default */.A("mapview-webgl","Out-of-bounds index when updating AttributeData"));n.updateData(0,0,l,b,m,f)}catch(s){}}update(t){const{data:e,start:i,end:s}=t;if(null!=e&&null!=this.data){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,s)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=(0,Utils/* getPixelArrayCtor */.Qz)(this.pixelType);this.destroy(),this.data=new s(t.buffer)}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new Texture/* Texture */.g(t,this._textureDesc,this.data??void 0);if(null!=this._lastTexture&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(t),u=(0,Utils/* getPixelBytes */.AV)(r),h=new((0,Utils/* getPixelArrayCtor */.Qz)(r))(new ArrayBuffer(i*s*u*this.texelSize)),o=t.getBoundFramebufferObject(),{x:l,y:d,width:_,height:c}=t.getViewport();t.bindFramebuffer(n),n.readPixels(0,0,i,s,a,r,h),e.updateData(0,0,0,2*i,s/2,h),t.setViewport(l,d,_,c),t.bindFramebuffer(o)}return this.destroy(),this._texture=e,this._texture}}class y{constructor(){this.size=0,this._pendingAttributeUpdates=[],this._version=0,this._epoch=0,this._locked=!1}get locked(){return this._locked}_initialize(t){if(!t)throw new Error("InternalError: initArgs must be defined");const e=t.blockDescriptors;if(this.size=t.blockSize,(0,has/* default */.A)("esri-2d-update-debug")&&console.debug("AttributeStoreView.initialize",{message:t}),null==this._data)this._data=e.map(((t,e)=>null!=t?new m(t,this.size,e):null));else for(let i=0;i<this._data.length;i++){const t=this._data[i],s=e[i];null!=s&&(null==t?this._data[i]=new m(s,this.size,i):t.resize(s,this.size))}}destroy(){for(const t of this._data??[])t?.destroy();this._defaultTexture?.dispose(),this._defaultTexture=null,this._pendingAttributeUpdates=[]}isEmpty(){return null==this._data}getBlock(t){if(null==this._data)return null;return this._data[t]}setLabelMinZoom(t,e){this.setData(t,definitions/* AttributeDataType */.dV.FilterFlags,1,e)}setLocalTimeOrigin(t,e){this.setData(t,definitions/* AttributeDataType */.dV.LocalTimeOrigin,0,e)}getLabelMinZoom(t){return this.getData(t,definitions/* AttributeDataType */.dV.FilterFlags,1,255)}getFilterFlags(t){return this.getData(t,definitions/* AttributeDataType */.dV.FilterFlags,0,0)}getVisualVariableData(t,e){return this.getData(t,definitions/* AttributeDataType */.dV.VV,e,0)}getData(t,e,i,s){if(!this._data)return 0;const r=this._data[e];if(null==r)return 0;const a=r.getData(t,i);return null!=a?a:s}setData(t,e,i,s){this._data[e].setData(t,i,s)}lockTextureUploads(){this._locked=!0}unlockTextureUploads(){this._locked=!1,this.update()}requestUpdate(t){this._version=t.version,this._pendingAttributeUpdates.push(t),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] AttributeStoreView.requestUpdate`,{message:t})}get currentEpoch(){return this._epoch}get hasPendingUpdates(){return this._pendingAttributeUpdates.length>0}update(){if(this._locked)return;const t=this._pendingAttributeUpdates;this._pendingAttributeUpdates=[];for(const e of t){const{blockData:t,initArgs:i,sendUpdateEpoch:s,version:r}=e;(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] Epoch[${s}] AttributeStoreView.applyUpdate`),this._version=r,this._epoch=s,null!=i&&this._initialize(i);const a=this._data;for(let e=0;e<t.length;e++){const i=t[e],s=a[e];null!=s&&null!=i&&((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] CpuBlock[${e}] AttributeStoreView.update`,{block:i}),s.update(i))}}}getUniforms(t){return{filterFlags:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.FilterFlags),unit:definitions/* filterFlagsUnit */.uM},animation:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.Animation),unit:definitions/* animationUnit */.z2},gpgpu:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.GPGPU),unit:definitions/* gpgpuUnit */.Sr},localTimeOrigin:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.LocalTimeOrigin),unit:definitions/* localTimeOriginUnit */.zt},visualVariableData:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.VV),unit:definitions/* visualVariableUnit */.nM},dataDriven0:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD0),unit:definitions/* dataDrivenUnit0 */.lL},dataDriven1:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD1),unit:definitions/* dataDrivenUnit1 */.sn},dataDriven2:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD2),unit:definitions/* dataDrivenUnit2 */.n9},size:this.size}}_getTexture(t,e){const i=this._data?.[e];return i?(i.updateTexture(t,this._version),i.getTexture(t)):this._getDefaultTexture(t)}_getDefaultTexture(t){if(null==this._defaultTexture){const e=new TextureDescriptor/* TextureDescriptor */.R;e.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,e.width=1,e.height=1,this._defaultTexture=new Texture/* Texture */.g(t,e,new Uint8Array(4))}return this._defaultTexture}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js
var TileContainer = __webpack_require__(33613);
;// ../node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=60;class n extends TileContainer/* default */.A{constructor(e){super(e),this._statisticsByLevel=new Map,this._entityIndex=new Map,this.attributeView=new y}destroy(){this.children.forEach((t=>t.destroy())),this.removeAllChildren(),this.attributeView.destroy()}doRender(t){t.context.capabilities.enable("textureFloatLinear"),super.doRender(t)}get hasAnimations(){for(const t of this.children)if(t.hasAnimations)return!0;return!1}_reindexAndUpdateFeaturesIfNeeded(){if(this.hasAnimations&&(this._reindexFeatures(),0!==this.attributeView.size))for(const t of this._entityIndex.values())t.dirty&&(this.attributeView.setData(t.displayId,definitions/* AttributeDataType */.dV.LocalTimeOrigin,0,t.firstIndexed),t.dirty=!1)}restartAnimation(t){const e=this._entityIndex.get(t);if(!e)return;const i=performance.now()/1e3;e.firstIndexed=i,e.dirty=!0}restartAllAnimations(){const t=performance.now()/1e3;for(const[e,i]of this._entityIndex)i.firstIndexed=t,i.dirty=!0}_reindexFeatures(){const t=performance.now()/1e3;for(const e of this.children)for(const i of e.entityIds){const{objectId:e}=i;let s=this._entityIndex.get(e);s||(s={objectId:e,displayId:0,firstIndexed:t,lastIndexed:0,dirty:!0},this._entityIndex.set(e,s)),s.lastIndexed=t,s.displayId=i.displayId}for(const[e,i]of this._entityIndex)t-i.lastIndexed>s&&this._entityIndex.delete(e)}_updateAttributeView(){this.attributeView.update(),this._reindexAndUpdateFeaturesIfNeeded()}createRenderParams(t){const e=super.createRenderParams(t);return e.attributeView=this.attributeView,e.instanceStore=this._instanceStore,e.statisticsByLevel=this._statisticsByLevel,e}}


/***/ }),

/***/ 7715:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41573);
/* harmony import */ var _core_accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62879);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99776);
/* harmony import */ var _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57079);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37353);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__/* .DisplayObject */ .q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._childrenObservable=new _core_accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleObservable */ .I,this._effectView=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return (0,_core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._childrenObservable),this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_3__/* .EffectView */ .$B,this.addTransitionable(this._effectView)),this._effectView.effect=e,this.requestRender())}get highlightGradient(){return this._highlightGradient}set highlightGradient(e){this._highlightGradient=e,this.requestRender()}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}get isReady(){return this.children.every((e=>e.isReady))}get sortFunction(){return this._sortFunction}set sortFunction(e){this._sortFunction=e,e&&(this._needsSort=!0)}doRender(e){const t=this.createRenderParams(e),{painter:i}=t;i.beforeRenderLayer(t,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(t),i.afterRenderLayer(t,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),this._childrenObservable.notify(),e}contains(t){return (0,_core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._childrenObservable),this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0,this._childrenObservable.notify()}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,this._childrenObservable.notify(),t}beforeRender(e){super.beforeRender(e),this.sortFunction&&this._needsSort&&(this.children.sort(this.sortFunction),this._needsSort=!1,this._childrenObservable.notify());for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}isTransitioning(){return super.isTransitioning()||this.children.some((e=>e.transitioning))}}


/***/ }),

/***/ 37353:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17306);
/* harmony import */ var _transitions_FadeTransition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87430);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(){super(...arguments),this._transitionables=null,this._clips=null,this._fadeTransition=null,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get computedOpacity(){return this._fadeTransition?.computedOpacity??this.opacity}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get fadeTransitionEnabled(){return null!==this._fadeTransition}set fadeTransitionEnabled(t){!this._fadeTransition&&t?(this._fadeTransition=new _transitions_FadeTransition_js__WEBPACK_IMPORTED_MODULE_2__/* .FadeTransition */ .A({opacity:this.opacity,visible:this.visible}),this.addTransitionable(this._fadeTransition)):this._fadeTransition&&!t&&(this.removeTransitionable(this._fadeTransition),this._fadeTransition=null)}get inFadeTransition(){return this._fadeTransition?.transitioning??!1}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this._fadeTransition&&(this._fadeTransition.opacity=this._opacity),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const i=this._stage;this._stage=t,t?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):i?.trashDisplayObject(this)}get transforms(){return null==this._transforms&&(this._transforms=this._createTransforms()),this._transforms}get transitioning(){return this.isTransitioning()}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this._fadeTransition&&(this._fadeTransition.visible=this._visible),this.requestRender())}get hasLabels(){return!1}get hasHighlight(){return!1}get hasBlending(){return!1}addTransitionable(t){this._transitionables??=[],this._transitionables.push(t),this.requestRender()}removeTransitionable(i){i.endTransition(),this._transitionables&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .remove */ .TF)(this._transitionables,i),this.requestRender()}fadeIn(){this.fadeTransitionEnabled=!0;const t=this._fadeTransition.fadeIn();return this.opacity=1,this.requestRender(),t}fadeOut(){this.fadeTransitionEnabled=!0;const t=this._fadeTransition.fadeOut();return this.opacity=0,this.requestRender(),t}endTransitions(){if(this._transitionables){for(const t of this._transitionables)t.endTransition();this.requestRender()}}beforeRender(t){this.transitionStep(t.deltaTime,t.state.scale),this.setTransform(t.state)}afterRender(t){this.transitioning&&this.requestRender()}remove(){this.parent?.removeChild(this)}setTransform(t){}processRender(t){this.stage&&(this._fadeTransition?.computedVisible??this.visible)&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.endTransitions(),this.onDetach(),this.emit("detach")}isTransitioning(){return this._transitionables?.some((t=>t.transitioning))??!1}transitionStep(t,i){if(this._transitionables)for(const s of this._transitionables)s.transitionStep(t,i)}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}


/***/ }),

/***/ 54185:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  d: () => (/* binding */ brushes_m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f32.js
var vec4f32 = __webpack_require__(40275);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrush.js
var WGLBrush = __webpack_require__(95031);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BackgroundPrograms.js
var BackgroundPrograms = __webpack_require__(97394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ProgramTemplate.js
var ProgramTemplate = __webpack_require__(50122);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushClip.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m=()=>(0,Utils/* createProgramDescriptor */.ES)("clip",{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT}]});class p extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32/* fromValues */.fA)(0,1,0,1)}dispose(){this._program&&this._program.dispose()}prepareState({context:r}){r.setStencilTestEnabled(!0),r.setBlendingEnabled(!1),r.setFaceCullingEnabled(!1),r.setColorMask(!1,!1,!1,!1),r.setStencilOp(enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.REPLACE),r.setStencilWriteMask(255),r.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,0,255)}draw(r,e){const{context:t,state:o,requestRender:i,allowDelayedRender:p}=r,c=m(),d=e.getVAO(t,o,c.attributes,c.bufferLayouts);null!=d.indexBuffer&&(this._program||(this._program=(0,ProgramTemplate/* createProgram */.r)(t,BackgroundPrograms/* background */.T)),!p||null==i||this._program.compiled?(t.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",o.displayMat3),t.bindVAO(d),t.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,d.indexBuffer.size,enums/* DataType */.pe.UNSIGNED_INT,0),t.bindVAO()):i())}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js
var WGLBrushStencil = __webpack_require__(46419);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushTileDebugInfo.js
var WGLBrushTileDebugInfo = __webpack_require__(29588);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLBackground.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32/* fromValues */.fA)(1,0,0,1),this._patternMatrix=(0,mat3f32/* create */.vt)(),this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(e,r){const{context:s,painter:a,requestRender:f,allowDelayedRender:m}=e;this._loadWGLResources(e);const u=e.displayLevel,p=e.styleLayer,_=p.backgroundMaterial,d=a.vectorTilesMaterialManager,g=p.getPaintValue("background-color",u),h=p.getPaintValue("background-opacity",u),x=p.getPaintValue("background-pattern",u),M=void 0!==x,b=1|window.devicePixelRatio,v=e.spriteMosaic;let y,w;const j=b>definitions/* vtlHighResCutoff */.C_?2:1,A=this._programOptions;A.pattern=M;const L=d.getMaterialProgram(s,_,A);if(!m||null==f||L.compiled){if(s.bindVAO(this._vao),s.useProgram(L),M){const t=v.getMosaicItemPosition(x,!0);if(null!=t){const{tl:e,br:r,page:i}=t;y=r[0]-e[0],w=r[1]-e[1];const a=v.getPageSize(i);null!=a&&(v.bind(s,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),L.setUniform4f("u_tlbr",e[0],e[1],r[0],r[1]),L.setUniform2fv("u_mosaicSize",a),L.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}L.setUniform1f("u_opacity",h)}else{const t=g[3]*h;this._color[0]=t*g[0],this._color[1]=t*g[1],this._color[2]=t*g[2],this._color[3]=t,L.setUniform4fv("u_color",this._color)}L.setUniform1f("u_depth",p.z||0);for(const e of r){if(L.setUniform1f("u_coord_range",e.rangeX),L.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),M){const r=Math.max(2**(Math.round(u)-e.key.level),1),o=j*e.width*r,i=o/(0,mathUtils/* nextPowerOfTwo */.yR)(y),s=o/(0,mathUtils/* nextPowerOfTwo */.yR)(w);this._patternMatrix[0]=i,this._patternMatrix[4]=s,L.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}s.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,0,255),s.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4)}}else f()}_loadWGLResources(t){if(this._vao)return;const{context:e,styleLayer:r}=t,o=r.backgroundMaterial,i=new Int8Array([0,0,1,0,0,1,1,1]),s=BufferObject/* BufferObject */.g.createVertex(e,enums/* Usage */._U.STATIC_DRAW,i),n=new VertexArrayObject/* VertexArrayObject */.Z(e,o.getAttributeLocations(),o.getLayoutInfo(),new Map([["geometry",s]]));this._vao=n}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js
var StyleDefinition = __webpack_require__(31541);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLCircle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(t,n){const{context:l,displayLevel:s,requiredLevel:o,state:c,painter:u,spriteMosaic:d,styleLayerUID:f,requestRender:m,allowDelayedRender:p}=t;if(!n.some((e=>e.layerData.get(f)?.circleIndexCount??!1)))return;const y=t.styleLayer,g=y.circleMaterial,M=u.vectorTilesMaterialManager,v=1.2,E=y.getPaintValue("circle-translate",s),x=y.getPaintValue("circle-translate-anchor",s),I=this._programOptions,U=M.getMaterialProgram(l,g,I);if(p&&null!=m&&!U.compiled)return void m();l.useProgram(U),U.setUniformMatrix3fv("u_displayMat3",x===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?c.displayMat3:c.displayViewMat3),U.setUniform2fv("u_circleTranslation",E),U.setUniform1f("u_depth",y.z),U.setUniform1f("u_antialiasingWidth",v);let _=-1;for(const e of n){if(!e.layerData.has(f))continue;e.key.level!==_&&(_=e.key.level,g.setDataUniforms(U,s,y,_,d));const t=e.layerData.get(f);if(!t.circleIndexCount)continue;t.prepareForRendering(l);const n=t.vao;null!=n&&(l.bindVAO(n),U.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),o!==e.key.level?l.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255):l.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255),l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t.circleIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t.circleIndexStart),e.triangleCount+=t.circleIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLFill.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=1/65536;class f extends WGLBrush/* default */.A{constructor(){super(...arguments),this._fillProgramOptions={id:!1,pattern:!1},this._outlineProgramOptions={id:!1}}dispose(){}drawMany(t,e){const{displayLevel:i,renderPass:n,spriteMosaic:a,styleLayerUID:l}=t;let r=!1;for(const _ of e)if(_.layerData.has(l)){const t=_.layerData.get(l);if(t.fillIndexCount>0||t.outlineIndexCount>0){r=!0;break}}if(!r)return;const o=t.styleLayer,s=o.getPaintProperty("fill-pattern"),f=void 0!==s,u=f&&s.isDataDriven;let c;if(f&&!u){const t=s.getValue(i);c=a.getMosaicItemPosition(t,!0)}const d=!f&&o.getPaintValue("fill-antialias",i);let p=!0,m=1;if(!f){const t=o.getPaintProperty("fill-color"),e=o.getPaintProperty("fill-opacity");if(!t?.isDataDriven&&!e?.isDataDriven){const t=o.getPaintValue("fill-color",i);m=o.getPaintValue("fill-opacity",i)*t[3],m>=1&&(p=!1)}}if(p&&"opaque"===n)return;const y=o.getPaintValue("fill-translate",i),g=o.getPaintValue("fill-translate-anchor",i);(p||"translucent"!==n)&&this._drawFill(t,l,o,e,y,g,f,c,u);const M=!o.hasDataDrivenOutlineColor&&o.outlineUsesFillColor&&m<1;d&&"opaque"!==n&&!M&&this._drawOutline(t,l,o,e,y,g)}_drawFill(n,f,u,c,d,p,m,y,g){if(m&&!g&&null==y)return;const{context:M,displayLevel:_,state:E,painter:v,pixelRatio:P,spriteMosaic:U,requestRender:I,allowDelayedRender:x}=n,D=u.fillMaterial,R=v.vectorTilesMaterialManager,S=P>definitions/* vtlHighResCutoff */.C_?2:1,T=this._fillProgramOptions;T.pattern=m;const h=R.getMaterialProgram(M,D,T);if(x&&null!=I&&!h.compiled)return void I();if(M.useProgram(h),null!=y){const{page:t}=y,i=U.getPageSize(t);null!=i&&(U.bind(M,enums/* TextureSamplingMode */.Cj.LINEAR,t,definitions/* vtlTextureBindingUnitSprites */.$U),h.setUniform2fv("u_mosaicSize",i),h.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}h.setUniformMatrix3fv("u_displayMat3",p===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?E.displayMat3:E.displayViewMat3),h.setUniform2fv("u_fillTranslation",d),h.setUniform1f("u_depth",u.z+s);let w=-1;for(const t of c){if(!t.layerData.has(f))continue;t.key.level!==w&&(w=t.key.level,D.setDataUniforms(h,_,u,w,U));const i=t.layerData.get(f);if(!i.fillIndexCount)continue;i.prepareForRendering(M);const n=i.fillVAO;if(null!=n){if(M.bindVAO(n),h.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),M.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),m){const e=Math.max(2**(Math.round(_)-t.key.level),1),i=t.rangeX/(S*t.width*e);h.setUniform1f("u_patternFactor",i)}if(g){const t=i.patternMap;if(!t)continue;for(const[i,n]of t){const t=U.getPageSize(i);null!=t&&(U.bind(M,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),h.setUniform2fv("u_mosaicSize",t),h.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),M.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,n[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n[0]))}}else M.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i.fillIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i.fillIndexStart);t.triangleCount+=i.fillIndexCount/3}}}_drawOutline(e,i,n,a,f,u){const{context:c,displayLevel:d,state:p,painter:m,pixelRatio:y,spriteMosaic:g,requestRender:M,allowDelayedRender:_}=e,E=n.outlineMaterial,v=m.vectorTilesMaterialManager,P=.75/y,U=this._outlineProgramOptions,I=v.getMaterialProgram(c,E,U);if(_&&null!=M&&!I.compiled)return void M();c.useProgram(I),I.setUniformMatrix3fv("u_displayMat3",u===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?p.displayMat3:p.displayViewMat3),I.setUniform2fv("u_fillTranslation",f),I.setUniform1f("u_depth",n.z+s),I.setUniform1f("u_outline_width",P);let x=-1;for(const t of a){if(!t.layerData.has(i))continue;t.key.level!==x&&(x=t.key.level,E.setDataUniforms(I,d,n,x,g));const e=t.layerData.get(i);if(e.prepareForRendering(c),!e.outlineIndexCount)continue;const a=e.outlineVAO;null!=a&&(c.bindVAO(a),I.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),c.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),c.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,e.outlineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.outlineIndexStart),t.triangleCount+=e.outlineIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class WGLBrushVTLLine_s extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(i,s){const{context:l,displayLevel:f,state:u,painter:c,pixelRatio:d,spriteMosaic:m,styleLayerUID:p,requestRender:g,allowDelayedRender:y}=i;if(!s.some((e=>e.layerData.get(p)?.lineIndexCount??!1)))return;const M=i.styleLayer,E=M.lineMaterial,_=c.vectorTilesMaterialManager,v=M.getPaintValue("line-translate",f),U=M.getPaintValue("line-translate-anchor",f),I=M.getPaintProperty("line-pattern"),P=void 0!==I,x=P&&I.isDataDriven;let D,S;if(P&&!x){const e=I.getValue(f);D=m.getMosaicItemPosition(e)}let L=!1;if(!P){const e=M.getPaintProperty("line-dasharray");if(S=void 0!==e,L=S&&e.isDataDriven,S&&!L){const t=e.getValue(f),i=M.getDashKey(t,M.getLayoutValue("line-cap",f));D=m.getMosaicItemPosition(i)}}const N=1/d,R=this._programOptions;R.pattern=P,R.sdf=S;const T=_.getMaterialProgram(l,E,R);if(y&&null!=g&&!T.compiled)return void g();if(l.useProgram(T),T.setUniformMatrix3fv("u_displayViewMat3",u.displayViewMat3),T.setUniformMatrix3fv("u_displayMat3",U===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?u.displayMat3:u.displayViewMat3),T.setUniform2fv("u_lineTranslation",v),T.setUniform1f("u_depth",M.z),T.setUniform1f("u_antialiasing",N),D&&null!=D){const{page:e}=D,i=m.getPageSize(e);null!=i&&(m.bind(l,enums/* TextureSamplingMode */.Cj.LINEAR,e,definitions/* vtlTextureBindingUnitSprites */.$U),T.setUniform2fv("u_mosaicSize",i),T.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}let V=-1;for(const e of s){if(!e.layerData.has(p))continue;e.key.level!==V&&(V=e.key.level,E.setDataUniforms(T,f,M,V,m));const i=2**(f-V)/d;T.setUniform1f("u_zoomFactor",i);const s=e.layerData.get(p);if(!s.lineIndexCount)continue;s.prepareForRendering(l);const u=s.vao;if(null!=u){if(l.bindVAO(u),T.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),l.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255),x||L){const e=s.patternMap;if(!e)continue;for(const[i,a]of e){const e=m.getPageSize(i);null!=e&&(m.bind(l,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),T.setUniform2fv("u_mosaicSize",e),T.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,a[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*a[0]))}}else l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,s.lineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*s.lineIndexStart);e.triangleCount+=s.lineIndexCount/3}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js
var vec2f32 = __webpack_require__(17845);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js
var config = __webpack_require__(59992);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js
var GeometryUtils = __webpack_require__(59339);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=1/65536;class d extends WGLBrush/* default */.A{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=(0,vec2f32/* create */.vt)()}dispose(){}drawMany(e,t){const i=e.styleLayer;this._drawIcons(e,i,t),this._drawText(e,i,t)}_drawIcons(e,t,o){const{context:f,displayLevel:c,painter:u,spriteMosaic:p,state:m,styleLayerUID:g,requestRender:d,allowDelayedRender:y}=e,_=t.iconMaterial,M=u.vectorTilesMaterialManager;let h,P=!1;for(const i of o)if(i.layerData.has(g)&&(h=i.layerData.get(g),h.iconPerPageElementsMap.size>0)){P=!0;break}if(!P)return;const U=t.getPaintValue("icon-translate",c),E=t.getPaintValue("icon-translate-anchor",c);let T=t.getLayoutValue("icon-rotation-alignment",c);T===StyleDefinition/* RotationAlignment */.I5.AUTO&&(T=t.getLayoutValue("symbol-placement",c)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const x=T===StyleDefinition/* RotationAlignment */.I5.MAP,S=t.getLayoutValue("icon-keep-upright",c)&&x,v=h.isIconSDF,D=this._iconProgramOptions;D.sdf=v;const V=M.getMaterialProgram(f,_,D);if(y&&null!=d&&!V.compiled)return void d();f.useProgram(V),V.setUniformMatrix3fv("u_displayViewMat3",T===StyleDefinition/* RotationAlignment */.I5.MAP?m.displayViewMat3:m.displayMat3),V.setUniformMatrix3fv("u_displayMat3",E===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?m.displayMat3:m.displayViewMat3),V.setUniform2fv("u_iconTranslation",U),V.setUniform1f("u_depth",t.z),V.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(m.rotation)),V.setUniform1f("u_keepUpright",S?1:0),V.setUniform1f("u_level",10*c),V.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),V.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3);let R=-1;for(const i of o){if(!i.layerData.has(g))continue;if(i.key.level!==R&&(R=i.key.level,_.setDataUniforms(V,c,t,R,p)),h=i.layerData.get(g),0===h.iconPerPageElementsMap.size)continue;h.prepareForRendering(f),h.updateOpacityInfo();const a=h.iconVAO;if(null!=a){f.bindVAO(a),V.setUniformMatrix3fv("u_dvsMat3",i.transforms.displayViewScreenMat3),V.setUniform1f("u_time",(performance.now()-h.lastOpacityUpdate)/1e3);for(const[t,a]of h.iconPerPageElementsMap)this._renderIconRange(e,V,a,t,i)}}}_renderIconRange(e,t,i,a,r){const{context:n,spriteMosaic:o}=e;this._spritesTextureSize[0]=o.getWidth(a)/4,this._spritesTextureSize[1]=o.getHeight(a)/4,t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),o.bind(n,enums/* TextureSamplingMode */.Cj.LINEAR,a,definitions/* vtlTextureBindingUnitSprites */.$U),this._setStencilState(e,r),n.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]),r.triangleCount+=i[1]/3}_drawText(e,s,f){const{context:c,displayLevel:u,glyphMosaic:p,painter:m,pixelRatio:d,spriteMosaic:y,state:_,styleLayerUID:M,requestRender:h,allowDelayedRender:P}=e,U=s.textMaterial,E=m.vectorTilesMaterialManager;let T,x=!1;for(const t of f)if(t.layerData.has(M)&&(T=t.layerData.get(M),T.glyphPerPageElementsMap.size>0)){x=!0;break}if(!x)return;const S=s.getPaintProperty("text-opacity");if(S&&!S.isDataDriven&&0===S.getValue(u))return;const v=s.getPaintProperty("text-color"),D=!v||v.isDataDriven||v.getValue(u)[3]>0,V=s.getPaintProperty("text-halo-width"),R=s.getPaintProperty("text-halo-color"),I=(!V||V.isDataDriven||V.getValue(u)>0)&&(!R||R.isDataDriven||R.getValue(u)[3]>0);if(!D&&!I)return;const A=24/8;let w=s.getLayoutValue("text-rotation-alignment",u);w===StyleDefinition/* RotationAlignment */.I5.AUTO&&(w=s.getLayoutValue("symbol-placement",u)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const L=w===StyleDefinition/* RotationAlignment */.I5.MAP,O=s.getLayoutValue("text-keep-upright",u)&&L,N=.8*A/d;this._glyphTextureSize||(this._glyphTextureSize=(0,vec2f32/* fromValues */.fA)(p.width/4,p.height/4));const z=s.getPaintValue("text-translate",u),b=s.getPaintValue("text-translate-anchor",u),k=this._sdfProgramOptions,G=E.getMaterialProgram(c,U,k);if(P&&null!=h&&!G.compiled)return void h();c.useProgram(G),G.setUniformMatrix3fv("u_displayViewMat3",w===StyleDefinition/* RotationAlignment */.I5.MAP?_.displayViewMat3:_.displayMat3),G.setUniformMatrix3fv("u_displayMat3",b===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?_.displayMat3:_.displayViewMat3),G.setUniform2fv("u_textTranslation",z),G.setUniform1f("u_depth",s.z+g),G.setUniform2fv("u_mosaicSize",this._glyphTextureSize),G.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(_.rotation)),G.setUniform1f("u_keepUpright",O?1:0),G.setUniform1f("u_level",10*u),G.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitGlyphs */.mg),G.setUniform1f("u_antialiasingWidth",N),G.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3);let W=-1;for(const t of f){if(!t.layerData.has(M))continue;if(t.key.level!==W&&(W=t.key.level,U.setDataUniforms(G,u,s,W,y)),T=t.layerData.get(M),0===T.glyphPerPageElementsMap.size)continue;T.prepareForRendering(c),T.updateOpacityInfo();const i=T.textVAO;if(null==i)continue;c.bindVAO(i),G.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._setStencilState(e,t);const a=(performance.now()-T.lastOpacityUpdate)/1e3;G.setUniform1f("u_time",a),T.glyphPerPageElementsMap.forEach(((e,i)=>{this._renderGlyphRange(c,e,i,p,G,I,D,t)}))}}_renderGlyphRange(e,t,i,a,r,n,s,l){a.bind(e,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitGlyphs */.mg),n&&(r.setUniform1f("u_halo",1),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3),s&&(r.setUniform1f("u_halo",0),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3)}_setStencilState(e,t){const{context:i,is3D:a,stencilSymbols:r}=e;if(i.setStencilTestEnabled(!0),r)return i.setStencilWriteMask(255),void i.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,t.stencilRef,255);i.setStencilWriteMask(0),a?i.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255):i.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255)}}

;// ../node_modules/@arcgis/core/views/2d/engine/brushes.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const brushes_m={clip:p,stencil:WGLBrushStencil/* default */.A,tileDebugInfo:WGLBrushTileDebugInfo/* default */.A,vtlBackground:u,vtlFill:f,vtlLine:WGLBrushVTLLine_s,vtlCircle:n,vtlSymbol:d};


/***/ }),

/***/ 87430:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40189);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let r=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(t){super(t),this.computedOpacity=1,this.computedVisible=!0,this.opacity=1,this.visible=!0,this._fadeOutResolver=null,this._fadeInResolver=null}get transitioning(){return(this._fadeOutResolver||!this.visible?0:this.opacity)!==this.computedOpacity}endTransition(){this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeInResolver=this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0}fadeIn(){return this._fadeInResolver||(this.opacity=1,this.computedOpacity=0,this._fadeOutResolver?.(),this._fadeOutResolver=null,this._fadeInResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createResolver */ .Tw)()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createResolver */ .Tw)()),this._fadeOutResolver.promise}transitionStep(t,e){const i=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("mapview-transitions-duration"),s=i?1/i:0;if(0===s)this.computedOpacity=this.opacity,this.computedVisible=this.visible;else{const e=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===e)this.computedVisible=this.visible;else{const o=t*s;this.computedOpacity=i>e?Math.max(e,i-o):Math.min(e,i+o),this.computedVisible=this.computedOpacity>0}}this.transitioning||(this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeOutResolver=this._fadeInResolver=null)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"computedOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"computedVisible",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"opacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"visible",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"transitioning",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"_fadeOutResolver",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"_fadeInResolver",void 0),r=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.views.2d.engine.transitions.FadeTransition")],r);


/***/ }),

/***/ 55727:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  c: () => (/* binding */ m)
});

// UNUSED EXPORTS: tracer

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/constants.js
var constants = __webpack_require__(62146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js
var enums = __webpack_require__(46729);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/memoryEstimations.js
var memoryEstimations = __webpack_require__(4754);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js + 2 modules
var TileInfoView = __webpack_require__(75976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileKey.js
var TileKey = __webpack_require__(42482);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileQueue.js + 1 modules
var TileQueue = __webpack_require__(36791);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js + 1 modules
var TileStrategy = __webpack_require__(62540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js
var util = __webpack_require__(73318);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/RenderBucket.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h{constructor(t,e){this.layerUIDs=[],this.isDestroyed=!1,this._data=t;let r=1;const n=new Uint32Array(t);this.layerUIDs=[];const i=n[r++];for(let s=0;s<i;s++)this.layerUIDs[s]=n[r++];this.bufferDataOffset=r,e&&(this.layer=e.getStyleLayerByUID(this.layerUIDs[0]))}get isPreparedForRendering(){return null==this._data}get offset(){return this.bufferDataOffset}get data(){return this._data}destroy(){this.isDestroyed||(this.doDestroy(),this._data=null,this.isDestroyed=!0)}prepareForRendering(t){null!=this._data&&(this.doPrepareForRendering(t,this._data,this.bufferDataOffset),this._data=null)}}class c extends h{constructor(t,e){super(t,e),this.type=enums/* BucketType */.NP.LINE,this.lineIndexStart=0,this.lineIndexCount=0;const r=new Uint32Array(t);let i=this.bufferDataOffset;this.lineIndexStart=r[i++],this.lineIndexCount=r[i++];const s=r[i++];if(s>0){this.patternMap=new Map;for(let t=0;t<s;t++){const t=r[i++],e=r[i++],n=r[i++];this.patternMap.set(t,[e,n])}}this.bufferDataOffset=i}get usedMemory(){return(this.data?.byteLength??0)+(this.vao?.cachedMemory??0)}hasData(){return this.lineIndexCount>0}triangleCount(){return this.lineIndexCount/3}doDestroy(){this.vao=(0,maybe/* disposeMaybe */.WD)(this.vao)}doPrepareForRendering(t,e,r){const n=new Uint32Array(e),i=new Int32Array(n.buffer),h=n[r++],c=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,h));r+=h;const f=n[r++],l=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,f));r+=f;const u=this.layer.lineMaterial;this.vao=new VertexArrayObject/* VertexArrayObject */.Z(t,u.getAttributeLocations(),u.getLayoutInfo(),new Map([["geometry",c]]),l)}}class f extends h{constructor(t,e){super(t,e),this.type=enums/* BucketType */.NP.FILL,this.fillIndexStart=0,this.fillIndexCount=0,this.outlineIndexStart=0,this.outlineIndexCount=0;const r=new Uint32Array(t);let i=this.bufferDataOffset;this.fillIndexStart=r[i++],this.fillIndexCount=r[i++],this.outlineIndexStart=r[i++],this.outlineIndexCount=r[i++];const s=r[i++];if(s>0){this.patternMap=new Map;for(let t=0;t<s;t++){const t=r[i++],e=r[i++],n=r[i++];this.patternMap.set(t,[e,n])}}this.bufferDataOffset=i}get usedMemory(){return(this.data?.byteLength??0)+(this.fillVAO?.cachedMemory??0)+(this.outlineVAO?.cachedMemory??0)}hasData(){return this.fillIndexCount>0||this.outlineIndexCount>0}triangleCount(){return(this.fillIndexCount+this.outlineIndexCount)/3}doDestroy(){this.fillVAO=(0,maybe/* disposeMaybe */.WD)(this.fillVAO),this.outlineVAO=(0,maybe/* disposeMaybe */.WD)(this.outlineVAO)}doPrepareForRendering(t,e,r){const n=new Uint32Array(e),i=new Int32Array(n.buffer),h=n[r++],c=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,h));r+=h;const f=n[r++],l=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,f));r+=f;const u=n[r++],y=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,u));r+=u;const d=n[r++],A=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,d));r+=d;const p=this.layer,I=p.fillMaterial,g=p.outlineMaterial;this.fillVAO=new VertexArrayObject/* VertexArrayObject */.Z(t,I.getAttributeLocations(),I.getLayoutInfo(),new Map([["geometry",c]]),l),this.outlineVAO=new VertexArrayObject/* VertexArrayObject */.Z(t,g.getAttributeLocations(),g.getLayoutInfo(),new Map([["geometry",y]]),A)}}class l extends h{constructor(t,e,s){super(t,e),this.type=enums/* BucketType */.NP.SYMBOL,this.iconPerPageElementsMap=new Map,this.glyphPerPageElementsMap=new Map,this.symbolInstances=[],this.isIconSDF=!1,this.opacityChanged=!1,this.lastOpacityUpdate=0,this.symbols=[];const a=new Uint32Array(t),o=new Int32Array(t),h=new Float32Array(t);let c=this.bufferDataOffset;this.isIconSDF=!!a[c++];const f=a[c++],l=a[c++],u=a[c++],y=new TileKey/* default */.A(f,l,u,0),d=a[c++];for(let r=0;r<d;r++){const t=a[c++],e=a[c++],r=a[c++];this.iconPerPageElementsMap.set(t,[e,r])}const A=a[c++];for(let r=0;r<A;r++){const t=a[c++],e=a[c++],r=a[c++];this.glyphPerPageElementsMap.set(t,[e,r])}const p=a[c++],I=a[c++];this.iconOpacity=new Int32Array(p),this.textOpacity=new Int32Array(I),c=(0,util/* deserializeSymbols */.X1)(a,o,h,c,this.symbols,s,y),this.bufferDataOffset=c}get usedMemory(){return(this.data?.byteLength??0)+(this.iconVAO?.cachedMemory??0)+(this.textVAO?.cachedMemory??0)+(0,memoryEstimations/* estimateNumberArrayMemory */.Qf)(this.iconOpacity)+(0,memoryEstimations/* estimateNumberArrayMemory */.Qf)(this.textOpacity)}hasData(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}triangleCount(){let t=0;for(const e of this.iconPerPageElementsMap.values())t+=e[1];for(const e of this.glyphPerPageElementsMap.values())t+=e[1];return t/3}doDestroy(){this.iconVAO=(0,maybe/* disposeMaybe */.WD)(this.iconVAO),this.textVAO=(0,maybe/* disposeMaybe */.WD)(this.textVAO)}updateOpacityInfo(){if(!this.opacityChanged)return;this.opacityChanged=!1;const t=this.iconOpacity,e=this.iconVAO.vertexBuffers.get("opacity");t.length>0&&t.byteLength===e.usedMemory&&e.setSubData(t,0,0,t.length);const r=this.textOpacity,n=this.textVAO.vertexBuffers.get("opacity");r.length>0&&r.byteLength===n.usedMemory&&n.setSubData(r,0,0,r.length)}doPrepareForRendering(t,e,r){const n=new Uint32Array(e),i=new Int32Array(n.buffer),h=n[r++],c=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,h));r+=h;const f=n[r++],l=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,f));r+=f;const u=n[r++],y=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,u));r+=u;const d=n[r++],A=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,d));r+=d;const p=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,this.iconOpacity.buffer),I=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,this.textOpacity.buffer),g=this.layer,x=g.iconMaterial,m=g.textMaterial;this.iconVAO=new VertexArrayObject/* VertexArrayObject */.Z(t,x.getAttributeLocations(),x.getLayoutInfo(),new Map([["geometry",c],["opacity",p]]),l),this.textVAO=new VertexArrayObject/* VertexArrayObject */.Z(t,m.getAttributeLocations(),m.getLayoutInfo(),new Map([["geometry",y],["opacity",I]]),A)}}class u extends h{constructor(t,e){super(t,e),this.type=enums/* BucketType */.NP.CIRCLE,this.circleIndexStart=0,this.circleIndexCount=0;const r=new Uint32Array(t);let i=this.bufferDataOffset;this.circleIndexStart=r[i++],this.circleIndexCount=r[i++],this.bufferDataOffset=i}get usedMemory(){return(this.data?.byteLength??0)+(this.vao?.cachedMemory??0)}hasData(){return this.circleIndexCount>0}triangleCount(){return this.circleIndexCount/3}doDestroy(){this.vao=(0,maybe/* disposeMaybe */.WD)(this.vao)}doPrepareForRendering(t,e,r){const n=new Uint32Array(e),i=new Int32Array(n.buffer),h=n[r++],c=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Int32Array(i.buffer,4*r,h));r+=h;const f=n[r++],l=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.STATIC_DRAW,new Uint32Array(n.buffer,4*r,f));r+=f;const u=this.layer.circleMaterial;this.vao=new VertexArrayObject/* VertexArrayObject */.Z(t,u.getAttributeLocations(),u.getLayoutInfo(),new Map([["geometry",c]]),l)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js
var config = __webpack_require__(59992);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js
var TiledDisplayObject = __webpack_require__(61409);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTile.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const y=null;class m extends TiledDisplayObject/* TiledDisplayObject */.Y{constructor(e,t,s,r,a,o,h,n=null){super(e,t,s,r,a,o,constants/* tileCoordSize */.vA,constants/* tileCoordSize */.vA),this.styleRepository=h,this._memCache=n,this.type="vector-tile",this._referenced=1,this._hasSymbolBuckets=!1,this._usedMemory=256,this.layerData=new Map,this.status="loading",this.allSymbolsFadingOut=!1,this.lastOpacityUpdate=0,this.symbols=new Map,this.isCoverage=!1,this.neededForCoverage=!1,this.decluttered=!1,this.parentTile=null,this.childrenTiles=new Set,this.featureIndex=null,this.triangleCount=0,this._processed=!1,this.id=e.id}get styleLayerUIDs(){return Array.from(this.layerData.keys())}get hasSymbolBuckets(){return this._hasSymbolBuckets}get isFading(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<config/* fadeDuration */.zk}get isHoldingForFade(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<config/* fadeDuration */.zk)}get wasRequested(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}setData(e){this.changeDataImpl(e),this.requestRender(),this.ready(),this._processed=!0}deleteLayerData(e){let t=!1;for(const s of e){const e=this.layerData.get(s);e&&(this._usedMemory-=e.usedMemory,e.type===enums/* BucketType */.NP.SYMBOL&&this.symbols.delete(s)&&(t=!0),e.destroy(),this.layerData.delete(s))}this._memCache?.updateSize(this.key.id,this),t&&(this.featureIndex?.clear(),this.emit("symbols-changed")),this.requestRender()}processed(){return this._processed}hasData(){return this.layerData.size>0}hasFeatures(){const e=this.layerData.values();for(const t of e)if(t.hasData())return!0;return!1}dispose(){"unloaded"!==this.status&&(m._destroyRenderBuckets(this.layerData),this.layerData.clear(),this.featureIndex=null,this._usedMemory=0,this.destroy(),this.status="unloaded")}release(){0===--this._referenced&&(this.dispose(),this.stage=null)}retain(){++this._referenced}get cachedMemory(){return this._usedMemory}get usedMemory(){return this._usedMemory}get usedMemoryPerReference(){return this._usedMemory/(this._referenced||1)}changeDataImpl(e){this.featureIndex?.clear();let t=!1;if(e){const{bucketsWithData:s,emptyBuckets:r}=e,a=this._createRenderBuckets(s);if(r&&r.byteLength>0){const e=new Uint32Array(r);for(const t of e)this._deleteLayerData(t)}for(const[e,i]of a)this._deleteLayerData(e),i.type===enums/* BucketType */.NP.SYMBOL&&(this.symbols.set(e,i.symbols),t=!0),this._usedMemory+=i.usedMemory,this.layerData.set(e,i);this._memCache?.updateSize(this.key.id,this)}this._hasSymbolBuckets=!1;for(const s of this.layerData.values())s.type===enums/* BucketType */.NP.SYMBOL&&(this._hasSymbolBuckets=!0);t&&this.emit("symbols-changed")}attachWithContext(e){this.stage={context:e,trashDisplayObject(e){e.processDetach()},untrashDisplayObject:()=>!1}}setTransform(a){super.setTransform(a);const i=this.resolution/(a.resolution*a.pixelRatio),o=this.width/this.rangeX*i,h=this.height/this.rangeY*i,n=[0,0];a.toScreen(n,[this.x,this.y]);const l=this.transforms.tileUnitsToPixels;(0,mat3/* identity */.D_)(l),(0,mat3/* translate */.Tl)(l,l,n),(0,mat3/* rotate */.e$)(l,l,Math.PI*a.rotation/180),(0,mat3/* scale */.hs)(l,l,[o,h,1])}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)(),tileMat3:(0,mat3f32/* create */.vt)(),tileUnitsToPixels:(0,mat3f32/* create */.vt)()}}static _destroyRenderBuckets(e){if(!e)return;const t=new Set;for(const s of e.values())t.has(s)||(s.destroy(),t.add(s));e.clear()}_createRenderBuckets(e){const t=new Map,s=new Map;for(const r of e){const e=this._deserializeBucket(r,s);for(const s of e.layerUIDs)t.set(s,e)}return t}_deserializeBucket(e,t){let s=t.get(e);if(s)return s;switch(new Uint32Array(e)[0]){case enums/* BucketType */.NP.FILL:s=new f(e,this.styleRepository);break;case enums/* BucketType */.NP.LINE:s=new c(e,this.styleRepository);break;case enums/* BucketType */.NP.SYMBOL:s=new l(e,this.styleRepository,this);break;case enums/* BucketType */.NP.CIRCLE:s=new u(e,this.styleRepository)}return t.set(e,s),s}_deleteLayerData(e){if(!this.layerData.has(e))return;const t=this.layerData.get(e);this._usedMemory-=t.usedMemory,t.destroy(),this.layerData.delete(e)}}


/***/ }),

/***/ 99590:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  J: () => (/* binding */ SymbolFader_c)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/signal.js
var signal = __webpack_require__(40315);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js
var config = __webpack_require__(59992);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js
var util = __webpack_require__(73318);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js
var StyleDefinition = __webpack_require__(31541);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/CollisionJob.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{constructor(s,o,n,i,l,c){this._symbols=s,this._styleRepository=i,this._zoom=l,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new util/* GridIndex */.xT(o,n,config/* collisionGridCellSize */.o2),this._si=Math.sin(Math.PI*c/180),this._co=Math.cos(Math.PI*c/180),i.cachedStyles&&(this._styleProps=i.cachedStyles);for(const t of s)for(const r of t.symbols)this._allNeededMatrices.has(r.tile)||this._allNeededMatrices.set(r.tile,(0,mat3f32/* clone */.o8)(r.tile.transforms.tileUnitsToPixels))}work(e){const t=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const r=this._symbols[this._currentLayerCursor],s=this._getProperties(r.styleLayerUID),o=this._styleRepository.layerContexts?.get(r.styleLayerUID);for(;this._currentSymbolCursor<r.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-t>e)return!1;const n=r.symbols[this._currentSymbolCursor];if(!n.uniqueSymbol?.show)continue;const i=this._computeCoordinates(n,s,o),l=n.uniqueSymbol;if(!l.show)continue;const{iconAllowOverlap:c,textAllowOverlap:h}=s;for(const e of i){if(!e.enabled)continue;const t=l.parts[e.partIndex];if(!t.show)continue;!(e.partIndex?h:c)&&this._doesCollide(e)&&(e.hard?l.show=!1:t.show=!1)}l.show&&this._insertColliders(l.parts,i,s)}}return!0}_insertColliders(e,t,r){const{iconIgnorePlacement:s,textIgnorePlacement:o}=r;for(const n of t){if(!n.enabled)continue;if(n.partIndex?o:s)continue;if(!e[n.partIndex].show)continue;const t=n.xScreen+n.dxScreen,r=n.yScreen+n.dyScreen,i=t+n.width,l=r+n.height,[c,h,a,d]=this._gridIndex.getCellSpan(t,r,i,l);for(let e=h;e<=d;e++)for(let t=c;t<=a;t++){this._gridIndex.cells[e][t].push(n)}}}_computeCoordinates(e,t,r){const{iconRotationAlignment:n,textRotationAlignment:i,iconTranslate:l,iconTranslateAnchor:c,textTranslate:h,textTranslateAnchor:a}=t,d=this._si,y=this._co,u=this._zoom,x=this._allNeededMatrices.get(e.tile),_=e.uniqueSymbol,f=e.colliders(r);let m=0;for(const S of f){const[e,t]=0===S.partIndex?l:h,r=0===S.partIndex?c:a,_=S.minLod<=u&&u<=S.maxLod;m+=_?0:1,S.enabled=_,S.xScreen=S.xTile*x[0]+S.yTile*x[3]+x[6],S.yScreen=S.xTile*x[1]+S.yTile*x[4]+x[7],r===StyleDefinition/* TranslateAnchor */.Cq.MAP?(S.xScreen+=y*e-d*t,S.yScreen+=d*e+y*t):(S.xScreen+=e,S.yScreen+=t),StyleDefinition/* RotationAlignment */.I5.VIEWPORT===(0===S.partIndex?n:i)?(S.dxScreen=S.dxPixels,S.dyScreen=S.dyPixels):(S.dxScreen=y*(S.dxPixels+S.width/2)-d*(S.dyPixels+S.height/2)-S.width/2,S.dyScreen=d*(S.dxPixels+S.width/2)+y*(S.dyPixels+S.height/2)-S.height/2)}return f.length>0&&m===f.length&&_&&(_.show=!1),f}_getProperties(e){const t=this._styleProps.get(e);if(t)return t;const r=this._styleRepository.getLayerStyleProperties?.(e,this._zoom);return this._styleProps.set(e,r),r}_doesCollide(e){const t=e.xScreen+e.dxScreen,r=e.yScreen+e.dyScreen,s=t+e.width,o=r+e.height,[n,i,l,c]=this._gridIndex.getCellSpan(t,r,s,o);for(let h=i;h<=c;h++)for(let e=n;e<=l;e++){const n=this._gridIndex.cells[h][e];for(const e of n){const n=e.xScreen+e.dxScreen,i=e.yScreen+e.dyScreen,l=n+e.width,c=i+e.height;if(!(s<n||t>l||o<i||r>c))return!0}}return!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTile.js + 1 modules
var VectorTile = __webpack_require__(55727);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e){return(e.uniqueSymbol?.show&&e.uniqueSymbol?.lastShow)??!1}function r(e,t){if(e.priority-t.priority)return e.priority-t.priority;if(s(e)&&!s(t))return-1;if(s(t)&&!s(e))return 1;const o=e.tile.key,i=t.tile.key;return o.world-i.world?o.world-i.world:o.level-i.level?o.level-i.level:o.row-i.row?o.row-i.row:o.col-i.col?o.col-i.col:e.xTile-t.xTile?e.xTile-t.xTile:e.yTile-t.yTile}class SymbolDeclutterer_n{get running(){return this._running}constructor(e,t,o,i,s,r,n,l){this.selectionMode=e,this._visibleTiles=t,this._symbolRepository=o,this._styleRepository=i,this._createCollisionJob=s,this._assignTileSymbolsOpacity=r,this._symbolLayerSorter=n,this._isLayerVisible=l,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}setScreenSize(e,t){this._screenWidth===e&&this._screenHeight===t||this.restart(),this._screenWidth=e,this._screenHeight=t}restart(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}continue(e){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){const t=performance.now();if(!this._selectionJob.work(e))return!1;if(this._selectionJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-t))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){const t=performance.now();if(!this._collisionJob.work(e))return!1;if(this._collisionJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-t))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){const t=performance.now();if(!this._opacityJob.work(e))return!1;if(this._opacityJobCompleted=!0,0===(e=Math.max(0,e-(performance.now()-t))))return!1}return this._running=!1,!0}_isFeatureFiltered(e,t,s){const r=t.getFilterFlags(e),n=r&definitions/* filterFlag0 */.LY,l=null==s.featureEffect||s.featureEffect.excludedLabelsVisible||r&definitions/* effectFlag0 */.g0;return!(n&&l)}_getFilteredByLayer(){let e;if(this._styleRepository?.layerContexts)for(const t of this._symbolRepository.uniqueSymbols){const o=this._styleRepository.layerContexts?.get(t.styleLayerUID);if(o?.attributeView)for(const i of t.uniqueSymbols){e??=new Map,e.get(t.styleLayerUID)||e.set(t.styleLayerUID,new Set);const s=e.get(t.styleLayerUID),r=o.attributeView,n=o.layerView;this._isFeatureFiltered(i.id,r,n)&&s.add(i.id)}}return e}_resetSelection(){for(let e=0;e<this._symbolRepository.uniqueSymbols.length;e++){const t=this._symbolRepository.uniqueSymbols[e];for(let e=0;e<t.uniqueSymbols.length;e++){const o=t.uniqueSymbols[e];for(const e of o.tileSymbols)e.selectedForRendering=!1}}}_createSelectionJob(){const e="feature-tile"===this.selectionMode?c:a,t=this._symbolRepository.uniqueSymbols;this._resetSelection();const o=[];let i=0,s=0;const n=this._isLayerVisible,l=this._getFilteredByLayer(),y=this._styleRepository?.layerContexts;function h(c){let a;const h=performance.now();for(;s<t.length;s++,i=0){const r=t[s],u=r.styleLayerUID,f=l?.get(u);let b=0;if(y){const e=y.get(u).layerView;b=e.view.allLayerViews.items.indexOf(e)}if(!n(u)){o[s]||(o[s]={styleLayerUID:u,layerOrder:b,symbols:[]});continue}o[s]||={styleLayerUID:u,symbols:[],layerOrder:b};const m=o[s];for(;i<r.uniqueSymbols.length;i++){if(a=r.uniqueSymbols[i],i%100==99&&performance.now()-h>c)return!1;if(a.lastShow=a.show,a.id&&f?.has(a.id)){a.show=!1,a.parts[0].show=!1,a.parts[1].show=!1;continue}const t=e(a);if(t){t.selectedForRendering=!0,m.symbols.push(t),a.show=!0;for(const e of a.parts)e.show=!0}else a.show=!1}}for(const e of o)e.symbols.sort(r);return o.sort(((e,t)=>t.layerOrder-e.layerOrder)),!0}const u=this._symbolLayerSorter;return{work:h,get sortedSymbols(){return o.sort(u)}}}_createOpacityJob(){const t=this._assignTileSymbolsOpacity,o=this._visibleTiles;let i=0;function s(e,o){for(const t of e.symbols.values())l(t,o);t(e,o);for(const t of e.childrenTiles)s(t,o)}return{work(r){const n=performance.now();for(;i<o.length;i++){if(performance.now()-n>r)return!1;const l=o[i];if(null!=l.parentTile)continue;const c=performance.now();l instanceof VectorTile/* VectorTile */.c?s(l,c):t(l,c)}return!0}}}}function l(e,o){for(const i of e){const e=i.uniqueSymbol;for(const i of e.parts){const s=i.targetOpacity>.5?1:-1;i.startOpacity+=s*((o-i.startTime)/config/* fadeDuration */.zk),i.startOpacity=Math.min(Math.max(i.startOpacity,0),1),i.startTime=o,i.targetOpacity=e.show&&i.show?1:0}}}function c(e){let t=null,o=null,i=null;for(const s of e.tileSymbols){const e=s.tile;e.isReady&&e.isCoverage?t=s:e.isReady?o=s:e.rendering&&(i=s)}return t??o??i}function a(e){let t=null,o=!1,i=!1;for(const s of e.tileSymbols)if(!i||!o){const e=s.tile;(!t||e.isCoverage||e.neededForCoverage&&!o)&&(t=s,(e.neededForCoverage||e.isCoverage)&&(i=!0),e.isCoverage&&(o=!0))}return i?t:null}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/core.js
var core = __webpack_require__(9533);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{static fromSymbols(e,t){let s=e.length;if(s>=SymbolRepository_n){let i=t;do{i/=2,s/=4}while(s>SymbolRepository_r&&i>y);const n=new util/* GridIndex */.xT(t,t,i);for(const t of e)n.getCell(t.xTile,t.yTile).push(t);return new o(t,e,n)}return new o(t,e,null)}constructor(e,t,s){this.tileCoordRange=e,this._symbols=t,this._index=s}addSymbols(e){for(const t of e)this._symbols.push(t);if(this._index)for(const t of e)this._index.getCell(t.xTile,t.yTile).push(t)}removeSymbols(e){const t=new Set(e);if(this._symbols=this._symbols.filter((e=>!t.has(e))),this._index)for(const s of this._index.cells)for(let e=0;e<s.length;e++)s[e]=s[e].filter((e=>!t.has(e)))}getSymbols(){return this._symbols}getCandidate(e,t,s,i){if(!this._index){for(const l of this._symbols)if(s===l.hash&&Math.abs(e-l.xTile)<=i&&Math.abs(t-l.yTile)<=i)return l;return null}const l=this._index.getCellSpan(e-i,t-i,e+i,t+i),[o,n,r,y]=l;for(let a=n;a<=y;a++)for(let l=o;l<=r;l++){const o=this._index.cells[a][l];for(const l of o)if(s===l.hash&&Math.abs(e-l.xTile)<=i&&Math.abs(t-l.yTile)<=i)return l}return null}}const SymbolRepository_n=32,SymbolRepository_r=8,y=64,SymbolRepository_a=20;class SymbolRepository_u{constructor(e,t){this.tileCoordRange=e,this._visibleTiles=t,this._indexMapByTile=new Map,this._uniqueSymbolsByStyleLayerId=new Map}get uniqueSymbols(){return null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}registerVectorTile(e,t){const s=this._ensureIndexMap(e),i=t?.values()??s.keys();for(const l of i){const e=s.get(l);e&&(this._removeSymbols(l,e.getSymbols()),s.delete(l))}this._addSymbols(e.key,s,e.symbols),this._invalidate()}unregisterVectorTile(e){this._removeTile(e),this._invalidate()}registerFeatureTile(e){this._ensureIndexMap(e),this._invalidate()}unregisterFeatureTile(e){this._removeTile(e),this._invalidate()}insertFeatureTileMetrics(e,t){const s=this._indexMapByTile.get(e);if(!s)throw new Error(`tile ${e.id} not registered!`);this._addSymbols(e.key,s,h(t)),this._invalidate()}removeFeatureTileMetrics(e,t){const s=this._indexMapByTile.get(e);if(!s)return;const i=h(t);for(const[l,o]of s.entries()){const e=i.get(l);e&&(o.removeSymbols(e),this._removeSymbols(l,e))}this._invalidate()}deleteStyleLayers(e){for(const t of this._indexMapByTile.values())for(const s of e){const e=t.get(s);e&&(this._removeSymbols(s,e.getSymbols()),t.delete(s))}this._invalidate()}querySymbols(e,s,i,l){const o=[];for(const[n,r]of this._uniqueSymbolsByStyleLayerId.entries())for(const l of r){const r=l.tileSymbols.find((e=>e.selectedForRendering));r&&(0,util/* isSearchCircleOverlapingSymbol */.OI)(r,e,s*(window.devicePixelRatio||1),i)&&o.push({vtlSymbol:r,styleLayerUID:n,tileKey:r.tile.key})}return o}_ensureIndexMap(e){let t=this._indexMapByTile.get(e);return t||(t=new Map,this._indexMapByTile.set(e,t)),t}_invalidate(){this._uniqueSymbolLayerArray=null}_addSymbols(e,t,s){for(const[i,l]of s){let e=t.get(i);e?e.addSymbols(l):(e=o.fromSymbols(l,this.tileCoordRange),t.set(i,e))}this._updateUniqueSymbols(e,s)}_removeTile(e){const t=this._indexMapByTile.get(e);if(t){for(const[e,s]of t.entries())this._removeSymbols(e,s.getSymbols());this._indexMapByTile.delete(e),this._invalidate()}}_removeSymbols(e,t){for(const s of t){const t=s.uniqueSymbol;if(t){if(t.tileSymbols=t.tileSymbols.filter((e=>e!==s)),0===t.tileSymbols.length){const s=this._uniqueSymbolsByStyleLayerId.get(e);s.delete(t),0===s.size&&this._uniqueSymbolsByStyleLayerId.delete(e)}s.uniqueSymbol=null}}}_updateUniqueSymbols(t,s){if(0!==s.size){for(const e of this._visibleTiles)e.parentTile||e.key.world!==t.world||e.key.level===t.level&&!e.key.equals(t)||this._matchSymbols(e,t,s);for(const[t,i]of s)for(const s of i)if(!s.uniqueSymbol){s.uniqueSymbol=new core/* UniqueSymbol */.w(s);let i=this._uniqueSymbolsByStyleLayerId.get(t);i||(i=new Set,this._uniqueSymbolsByStyleLayerId.set(t,i)),i.add(s.uniqueSymbol)}}}_matchSymbols(e,t,l){if(e.key.level>t.level){const s=e.key.level-t.level;if(e.key.row>>s!==t.row||e.key.col>>s!==t.col)return}if(t.level>e.key.level){const s=t.level-e.key.level;if(t.row>>s!==e.key.row||t.col>>s!==e.key.col)return}const o=new Map;for(const[n,r]of l){const l=[],y=(e.key.level<t.level?1:1<<e.key.level-t.level)+SymbolRepository_a,u=this._indexMapByTile.get(e),h=u?.get(n);if(h)for(const o of r){if(o.uniqueSymbol)continue;const n=(0,util/* tileCoordChangeX */.Ag)(this.tileCoordRange,o.xTile,t,e.key),r=(0,util/* tileCoordChangeY */.tE)(this.tileCoordRange,o.yTile,t,e.key),u=-20,c=this.tileCoordRange+SymbolRepository_a;if(!(n>=u&&n<c&&r>=u&&r<c)){l.push(o);continue}const f=h.getCandidate(n,r,o.hash,y),m=f?.uniqueSymbol;m?(o.uniqueSymbol=m,m.tileSymbols.push(o)):l.push(o)}l.length>0&&o.set(n,l)}for(const s of e.childrenTiles||[])this._matchSymbols(s,t,o)}_createUniqueSymbolLayerArray(){const e=this._uniqueSymbolsByStyleLayerId,t=new Array(e.size);let s,i=0;for(const[l,o]of e){const e=new Array(o.size);s=0;for(const t of o)e[s++]=t;t[i]={styleLayerUID:l,uniqueSymbols:e},i++}return t}}function h(e){const t=new Map;for(const s of e){const e=s.labelClassId;let i=t.get(e);i||(i=[],t.set(e,i)),i.push(s)}return t}

;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const SymbolFader_a=.5,SymbolFader_n=1e-6;class SymbolFader_c{constructor(e,s,a,c,h,y=config/* declutterBudget */.av){this.styleRepository=s,this._declutterBudget=y,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._offsetFromScreenCenter=[0,0],this._completed=!1,this._fading=(0,signal/* signal */.v)(!1);const _=(t,e,i)=>this._createCollisionJob(t,e,i),u=t=>{const e=this.styleRepository.getStyleLayerByUID?.(t);if(e){if(this._zoom+SymbolFader_n<e.minzoom||this._zoom-SymbolFader_n>=e.maxzoom)return!1;const t=e.getLayoutProperty?.("visibility");if(t&&t.getValue()===StyleDefinition/* Visibility */.bv.NONE)return!1}return!0},m=(t,e)=>(this.styleRepository.getStyleLayerByUID?.(t.styleLayerUID)?.z??0)-(this.styleRepository.getStyleLayerByUID?.(e.styleLayerUID)?.z??0);this._symbolRepository=new SymbolRepository_u(h,c),this._symbolDeclutterer=new SymbolDeclutterer_n(e,c,this._symbolRepository,this.styleRepository,_,a,m,u)}get symbolRepository(){return this._symbolRepository}_createCollisionJob(t,i,s){return this.updateDecluttererViewState(),new n(t,i,s,this.styleRepository,this._zoom,this._viewState.rotation)}get fading(){return this._fading.value}get decluttererOffset(){return this._offsetFromScreenCenter}registerFeatureTile(t){this.symbolRepository?(this.symbolRepository.registerFeatureTile(t),this.restartDeclutter()):console.error("InternalError: Symbol repository not yet initialized")}unregisterFeatureTile(t){this.symbolRepository?(this._symbolRepository.unregisterFeatureTile(t),this.restartDeclutter()):console.error("InternalError: Symbol repository not yet initialized")}insertFeatureTileMetrics(t,e){this.symbolRepository?(this.symbolRepository.insertFeatureTileMetrics(t,e),this.restartDeclutter()):console.error("InternalError: Symbol repository not yet initialized")}removeFeatureTileMetrics(t,e){this.symbolRepository?(this.symbolRepository.removeFeatureTileMetrics(t,e),this.restartDeclutter()):console.error("InternalError: Symbol repository not yet initialized")}addTile(t){t.decluttered=!1,this._tileToHandle.set(t,t.on("symbols-changed",(()=>{this._symbolRepository.registerVectorTile(t),this.restartDeclutter()}))),this._symbolRepository.registerVectorTile(t),this.restartDeclutter()}removeTile(t){const e=this._tileToHandle.get(t);e&&(this._symbolRepository.unregisterVectorTile(t),this.restartDeclutter(),e.remove(),this._tileToHandle.delete(t))}update(t,e){this._zoom=t,this._viewState={scale:e.scale,rotation:e.rotation,center:[e.center[0],e.center[1]],size:[e.size[0],e.size[1]]};const i=[0,0];e.toScreen(i,e.center);const s=[0,0];return e.toScreen(s,this._declutterViewState.center),this._offsetFromScreenCenter[0]=i[0]-s[0],this._offsetFromScreenCenter[1]=i[1]-s[1],this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((t=>t.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(t){this._symbolRepository.deleteStyleLayers(t)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this.updateDecluttererViewState(),this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(this._declutterBudget),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){null!=this._stableNotificationHandle&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this._fading.value=!1}),(1+SymbolFader_a)*config/* fadeDuration */.zk)}_notifyUnstable(){null!=this._stableNotificationHandle&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this._fading.value=!0}updateDecluttererViewState(){this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._offsetFromScreenCenter[0]=0,this._offsetFromScreenCenter[1]=0}}


/***/ }),

/***/ 59992:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IT: () => (/* binding */ o),
/* harmony export */   av: () => (/* binding */ c),
/* harmony export */   o2: () => (/* binding */ t),
/* harmony export */   zk: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=!0,t=32,c=1.5,e=200;


/***/ }),

/***/ 9533:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ t),
/* harmony export */   w: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t,s){this.sourceTile=s,this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.featureIndex=0,this.uniqueSymbol=null,this._colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=t}colliders(){return this._colliders}}class s{constructor(t){this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1,this.lastShow=!1,this.tileSymbols=[t],this.id=t.id}}


/***/ }),

/***/ 73318:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ag: () => (/* binding */ s),
/* harmony export */   OI: () => (/* binding */ h),
/* harmony export */   X1: () => (/* binding */ n),
/* harmony export */   jy: () => (/* binding */ c),
/* harmony export */   tE: () => (/* binding */ l),
/* harmony export */   xT: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(46729);
/* harmony import */ var _GeometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15946);
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9533);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(t,e,o,s){return r(t,e,o.level,o.col,s.key.level,s.key.col)}function l(t,e,o,s){return r(t,e,o.level,o.row,s.level,s.row)}function r(t,e,o,s,l,r){const i=o-l;if(i>=0)return(e>>i)+(s-(r<<i))*(t>>i);const n=-i;return e-(r-(s<<n))*(t>>n)<<n}class i{constructor(t,e,o){this._rows=Math.ceil(e/o),this._columns=Math.ceil(t/o),this._cellSize=o,this.cells=new Array(this._rows);for(let s=0;s<this._rows;s++){this.cells[s]=new Array(this._columns);for(let t=0;t<this._columns;t++)this.cells[s][t]=[]}}getCell(t,e){const o=Math.min(Math.max(Math.floor(e/this._cellSize),0),this._rows-1),s=Math.min(Math.max(Math.floor(t/this._cellSize),0),this._columns-1);return this.cells[o]&&this.cells[o][s]||null}getCellSpan(t,e,o,s){return[Math.min(Math.max(Math.floor(t/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(e/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(o/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(s/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function n(t,e,s,l,r,i,n){const c=e[l++];for(let a=0;a<c;a++){const c=new _core_js__WEBPACK_IMPORTED_MODULE_2__/* .VTLSymbol */ .D(i,n);c.xTile=e[l++],c.yTile=e[l++],c.hash=e[l++],c.priority=e[l++],c.featureIndex=e[l++];const a=e[l++],h=c.colliders();for(let t=0;t<a;t++){const t=e[l++],o=e[l++],r=e[l++],i=e[l++],n=!!e[l++],c=e[l++],a=s[l++],u=s[l++],f=e[l++],m=e[l++];h.push({xTile:t,yTile:o,dxPixels:r,dyPixels:i,hard:n,partIndex:c,width:f,height:m,minLod:a,maxLod:u})}const u=t[l++];for(let e=0;e<u;e++)c.textVertexRanges.push([t[l++],t[l++]]);const f=t[l++];for(let e=0;e<f;e++)c.iconVertexRanges.push([t[l++],t[l++]]);r.push(c)}return l}function c(t,e,o){for(const[s,l]of t.symbols)a(t,e,o,l,s)}function a(e,o,s,l,r){const i=e.layerData.get(r);if(i.type===_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .BucketType */ .NP.SYMBOL){for(const t of l){const o=t.uniqueSymbol;let l;if(t.selectedForRendering){const t=o.parts[0],r=t.startOpacity,i=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===i;const n=s?Math.floor(127*r)|i<<7:i?255:0;l=n<<24|n<<16|n<<8|n}else l=0;for(const[e,s]of t.iconVertexRanges)for(let t=e;t<e+s;t+=4)i.iconOpacity[t/4]=l;if(t.selectedForRendering){const t=o.parts[1],r=t.startOpacity,i=t.targetOpacity;e.allSymbolsFadingOut=e.allSymbolsFadingOut&&0===i;const n=s?Math.floor(127*r)|i<<7:i?255:0;l=n<<24|n<<16|n<<8|n}else l=0;for(const[e,s]of t.textVertexRanges)for(let t=e;t<e+s;t+=4)i.textOpacity[t/4]=l}i.lastOpacityUpdate=o,i.opacityChanged=!0}}function h(t,o,s,l){const r=t.colliders();let i,n,c,a;for(const h of r){if(t.uniqueSymbol?.show&&t.uniqueSymbol.parts[h.partIndex].show&&(i=h.xScreen-l[0]+h.dxScreen,n=h.yScreen-l[1]+h.dyScreen,c=i+h.width,a=n+h.height,(0,_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isCircleOverlapingRect */ .w4)(s,o.x,o.y,i,n,c,a)))return!0}return!1}


/***/ }),

/***/ 92947:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79190);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78835);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25423);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99776);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3912);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(43556);
/* harmony import */ var _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(61409);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const x=(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),M=(0,_core_libs_gl_matrix_2_factories_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)();class g extends _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_7__/* .TiledDisplayObject */ .Y{constructor(t,s,i,r){super(t,s,i,r,_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .tileSize */ .CQ,_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .tileSize */ .CQ)}destroy(){super.destroy()}setTransform(m){const c=this.resolution/m.resolution,h=this.transforms.tileMat3,[f,p]=m.toScreenNoRotation([0,0],[this.x,this.y]),d=this.width/this.rangeX*c,u=this.height/this.rangeY*c;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .set */ .hZ)(h,d,0,0,0,u,0,f,p,1),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)(this.transforms.displayViewScreenMat3,m.displayViewMat3,h);const x=(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)((0,_core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),d,0,0,u,f,p);(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(this.transforms.labelMat2d,m.viewMat2d,x);const M=[0,0];m.toScreen(M,[this.x,this.y]);const g=this.transforms.tileUnitsToPixels;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .identity */ .D_)(g),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .translate */ .Tl)(g,g,M),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .rotate */ .e$)(g,g,Math.PI*m.rotation/180),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .scale */ .hs)(g,g,[d,u,1])}_createTransforms(){return{labelMat2d:(0,_core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),tileMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),displayViewScreenMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),tileUnitsToPixels:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()}}containsScreenPoint(t,s,i){const r=(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)(x,t.viewMat3,this.transforms.tileMat3),e=(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .invert */ .B8)(x,r);if(null==e)return!0;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(M,...s,1);const a=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.o)(M,M,e),n=i*(this.resolution/t.resolution);return a[0]>=-n&&a[0]<this.width+n&&a[1]>=-n&&a[1]<this.height+n}}


/***/ }),

/***/ 7370:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Pd: () => (/* binding */ r),
/* harmony export */   VS: () => (/* binding */ n),
/* harmony export */   oI: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,2)]]]),t=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,4),new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_tex",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,2,4)]]]),n=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT,0,4)]]]);


/***/ }),

/***/ 18507:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20053);
/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1314);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{static{this.byteSizeHint=2*Uint32Array.BYTES_PER_ELEMENT+_DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.byteSizeHint}constructor(t,i){this.id=t,this.sortKey=i,this.records=[]}serialize(t){return t.push(this.id),t.writeF32(this.sortKey),(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .serializeList */ .j)(t,this.records),t}static deserialize(i){const e=i.readInt32(),o=i.readF32(),a=new s(e,o);return a.records=(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .deserializeList */ ._)(i,_DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)??[],a}}


/***/ }),

/***/ 65065:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KQ: () => (/* binding */ n),
/* harmony export */   Q4: () => (/* binding */ f),
/* harmony export */   Ss: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony exports aggregateValidFiltersMask, displayIdTypeAggregate, displayIdTypeFeature, displayIdTypeMask, getDisplayIdFilterMask, getDisplayIdType, isAggregateId, nonAggregateValidFiltersMask */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=8388607,t=8388608,r=254,o=255,u=0,c=1,e=n=>(n&t)>>>23,f=t=>t&n,i=n=>e(n)===c?r:o;function p(n){return e(n)===c}function s(n,r){return((r?t:0)|n)>>>0}


/***/ }),

/***/ 20053:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{static{this.byteSizeHint=7*Uint32Array.BYTES_PER_ELEMENT}constructor(t,e,s,i,r,h,n){this.instanceId=t,this.textureKey=e,this.indexStart=s,this.indexCount=i,this.vertexStart=r,this.vertexCount=h,this.overlaps=n}updateBaseOffsets(t){this.vertexStart+=t.vertexFrom,this.indexStart+=t.indexFrom}clone(){return new t(this.instanceId,this.textureKey,this.indexStart,this.indexCount,this.vertexStart,this.vertexCount,this.overlaps)}static write(t,e,s,i,r,h,n,a){t.push(e),t.push(s),t.push(i),t.push(r),t.push(h),t.push(n),t.push(a)}serialize(t){return t.push(this.instanceId),t.push(this.textureKey),t.push(this.indexStart),t.push(this.indexCount),t.push(this.vertexStart),t.push(this.vertexCount),t.push(this.overlaps),t}static deserialize(e){const s=e.readInt32(),i=e.readInt32(),r=e.readInt32(),h=e.readInt32(),n=e.readInt32(),a=e.readInt32(),u=e.readInt32();return new t(s,i,r,h,n,a,u)}}


/***/ }),

/***/ 90819:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  R: () => (/* binding */ I)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df32.js
var mat2df32 = __webpack_require__(78835);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/AFeatureTile.js
var AFeatureTile = __webpack_require__(92947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayEntity.js
var DisplayEntity = __webpack_require__(18507);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js
var FreeList = __webpack_require__(93540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js
var featureTechniqueUtils = __webpack_require__(43901);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function r(t,e){return t<<16|255&e}function d(t){return 255&t}class h{constructor(t,e,n,i,a){this.instance=t,this.materialKey=e,this.target=n,this.start=i,this.count=a}get textureKey(){return d(this.materialKey)}get indexEnd(){return this.start+this.count}extend(t){this.count+=t}render(t){this.instance.techniqueRef.render(t,this)}get key(){return this.target.key}getStencilReference(){return this.target.stencilRef}getAttributePrecisionPackFactors(){const t=this.instance.instanceId;return this.target.getMesh(t).getAttributePrecisionPackFactors()}draw(t,e){(0,featureTechniqueUtils/* isHittest */.Eq)(t)?this.drawCompute(t.context,e):this.drawGeometry(t.context,e)}drawCompute(t,e){const n=this.instance.instanceId,i=this.target.getMesh(n).getComputeVAO(t,e),r=this.start*Uint32Array.BYTES_PER_ELEMENT/3;t.bindVAO(i),t.drawElements(webgl_enums/* PrimitiveType */.WR.POINTS,this.count/3,webgl_enums/* DataType */.pe.UNSIGNED_INT,r),t.bindVAO(null)}drawGeometry(t,e){const n=this.instance.instanceId,i=this.target.getMesh(n).getGeometryVAO(t,e),r=this.start*Uint32Array.BYTES_PER_ELEMENT;t.bindVAO(i),t.drawElements(webgl_enums/* PrimitiveType */.WR.TRIANGLES,this.count,webgl_enums/* DataType */.pe.UNSIGNED_INT,r),t.bindVAO(null)}}class l{constructor(){this._length=0,this._minOrderedLength=0,this._materialKeys=new Set}static fromDisplayEntities(t,e,n,i){const a=new l;for(const s of t.values())for(const t of s.records){const s=n.getInstance(t.instanceId),d=r(s.instanceId,t.textureKey);a.addRecord(s,d,t.indexStart,t.indexCount,t.vertexStart,t.vertexCount,e,i)}return a}get length(){return this._length}get minOrderedLength(){return this._minOrderedLength}get minUnorderedLength(){return this._materialKeys.size}render(t,e){const{drawPhase:n}=t;for(const i of this.infos()){const a=i.instance.techniqueRef;a.drawPhase&n&&(null==e||a.type===e)&&i.render(t)}}addRecord(i,a,s,r,d,l,o,c){let u=s,_=r;if(_||(u=d,_=l),!_)return;if(null==this._head){const t=new h(i,a,o,u,_);return this._head=new FreeList/* List */.B(t),this._tail=this._head,this._length++,void this._minOrderedLength++}if(c===enums/* FeatureBatchingStrategy */.ch.STRICT_ORDER)return this._insert(i,a,o,u,_,this._tail,null);let g=null,m=this._head;const f=i.instanceId,y=i.techniqueRef.symbologyPlane;if(c===enums/* FeatureBatchingStrategy */.ch.STRICT_MARKERS_AND_TEXT&&(y===enums/* FeatureSymbologyDrawOrder */.uC.MARKER||y===enums/* FeatureSymbologyDrawOrder */.uC.TEXT))return this._insert(i,a,o,u,_,this._tail,null);for(;m;){const t=m.data.instance,e=t.instanceId,n=t.techniqueRef.symbologyPlane,s=g?.data.instance.instanceId;if(y<n||f===s&&f!==e)return this._insert(i,a,o,u,_,g,m);g=m,m=m.next}this._insert(i,a,o,u,_,g,null)}*infos(){if(null!=this._head)for(const t of this._head.values())yield t}_insert(t,e,i,a,s,r,d){if(null==r&&null==d){const r=new h(t,e,i,a,s);return this._head=new FreeList/* List */.B(r),this._tail=this._head,this._length++,void this._minOrderedLength++}return e!==this._tail.data.materialKey&&this._minOrderedLength++,this._materialKeys.add(e),null==r&&null!=d?this._insertAtHead(t,e,i,a,s,d):null!=r&&null==d?this._insertAtEnd(t,e,i,a,s,r):null!=r&&null!=d?this._insertAtMiddle(t,e,i,a,s,r,d):void 0}_insertAtHead(t,e,i,a,s,r){const d=a+s;if(e===r.data.materialKey&&i===r.data.target&&d===r.data.start)r.data.start=a,r.data.count+=s;else{const d=new h(t,e,i,a,s);this._head=new FreeList/* List */.B(d),this._head.next=r,this._length++}}_insertAtEnd(t,e,i,a,s,r){if(r.data.materialKey===e&&r.data.indexEnd===a)r.data.count+=s;else{const d=new h(t,e,i,a,s);this._tail=new FreeList/* List */.B(d),r.next=this._tail,this._length++}}_insertAtMiddle(t,e,i,a,s,r,d){const l=a+s;if(r.data.materialKey===e&&r.data.target===i&&r.data.indexEnd===a)r.data.count+=s,r.data.materialKey===d.data.materialKey&&r.data.target===d.data.target&&r.data.indexEnd===d.data.start&&(r.data.count+=d.data.count,r.next=d.next,this._length--);else if(e===d.data.materialKey&&i===d.data.target&&l===d.data.start)d.data.start=a,d.data.count+=s;else{const l=new h(t,e,i,a,s),o=new FreeList/* List */.B(l);r.next=o,o.next=d,this._length++}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/ReshufflePlan.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ReshufflePlan_t{constructor(t){this._indexOnly=t,this.vertex={count:0,operations:[]},this.index={count:0,operations:[]}}copyRecord(t){let e=0;this._indexOnly||(e=this.vertex.count-t.vertexStart,this.vertex.operations.push({srcFrom:t.vertexStart,dstFrom:this.vertex.count,count:t.vertexCount,mutate:0}),t.vertexStart=this.vertex.count,this.vertex.count+=t.vertexCount);let n=!1;if(this._indexOnly&&this.index.operations.length>=1){const e=this.index.operations[this.index.operations.length-1];e.srcFrom+e.count===t.indexStart&&(e.count+=t.indexCount,n=!0)}n||this.index.operations.push({srcFrom:t.indexStart,dstFrom:this.index.count,count:t.indexCount,mutate:e}),t.indexStart=this.index.count,this.index.count+=t.indexCount}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/LabelMetric.js
var LabelMetric = __webpack_require__(51688);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/MappedMesh.js + 1 modules
var MappedMesh = __webpack_require__(56670);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/dataViewUtils.js
var dataViewUtils = __webpack_require__(17906);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Reader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Reader_t{constructor(t){this._pos=0,this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js
var serializationUtils = __webpack_require__(1314);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/meshDebugUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function meshDebugUtils_s(e){if(!e)return null;return{entities:(0,serializationUtils/* deserializeList */._)(new Reader_t(e.entities),DisplayEntity/* default */.A),vertexData:e.data.map(a)}}function a(t){const s=t.layout.stride,a=new DataView(t.vertices),n=[],c=t.vertices.byteLength/s;let l=0;for(let e=0;e<c;e++){const e={};for(const r of t.layout.attributes){let t=`${r.offset} ${r.name}`,o=(0,dataViewUtils/* unpackDataView */.q)(a,r,l);if(r.packPrecisionFactor)if(t+=` (precision: ${r.packPrecisionFactor})`,"number"==typeof o)o/=r.packPrecisionFactor;else for(let e=0;e<o.length;e++)o[e]/=r.packPrecisionFactor;e[t]=o}l+=s,n.push(e)}const f=t.metrics?(0,serializationUtils/* deserializeList */._)(new Reader_t(t.metrics),LabelMetric/* LabelMetric */.f)??[]:[];return{vertices:n,layout:t.layout,metrics:f}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const b=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.FeatureTile");let g=0;class I extends AFeatureTile/* AFeatureTile */.u{constructor(e,i,r,o,d,n,h=!1){super(e,i,r,o),this._fader=d,this._labelInstanceId=n,this._meshes=new Map,this._entities=[],this._entityIndex=new Map,this._invalidated=!1,this._nextUploadAllowed=!1,this.tileAge=g++,this._metrics=[],this._metricsVisibility=new Set,this._entityIds=new Set,this._entityIdsFromBuffer=new Set,this._attributeEpoch=0,this._encounteredEnd=!1,this.neededForCoverage=!1,this.isCoverage=!1,this.rendering=!1,this._decluttered=!1,this._objectIdMap=null,this.visible=!0,this.transforms.labelMat2d=(0,mat2df32/* create */.vt)(),this.transforms.tileUnitsToPixels=(0,mat3f32/* create */.vt)(),this.enableDeferredUploads=h}destroy(){super.destroy(),this.clear()}clear(){for(const e of this._meshes.values())e.destroy();this._meshes.clear(),this._entities=[],this._fader?.removeFeatureTileMetrics(this,this._metrics),this._metrics=[],this._displayList=null,this._invalidated=!0,this._entityIds.clear(),this._nextUploadAllowed=!0}beforeRender(e){super.beforeRender(e),this._needsReshuffle&&e.reshuffleManager.schedule(this)}tryReady(e){const t=this._invalidated&&!this._uploadAllowed;return!(this.isReady||t||!this._encounteredEnd||!(e>=this._attributeEpoch))&&((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.ready [epoch=${e}]`),this.ready(),this.requestRender(),this.decluttered=!1,!0)}get symbols(){const e=new Map;for(const t of this._metrics)e.get(t.labelClassId)||e.set(t.labelClassId,[]),e.get(t.labelClassId).push(t);return e}get decluttered(){return this._decluttered}set decluttered(e){this._decluttered=e,this.requestRender()}get id(){return this.key.id}get hasData(){return!!this._meshes.size}get hasAnimations(){return!!this._objectIdMap}get needsUpload(){return this._invalidated}get _uploadAllowed(){return!this.enableDeferredUploads||this._nextUploadAllowed}get _hasMetrics(){return this._metrics.length>0}upload(){this._nextUploadAllowed=!0}getDisplayList(e,t){if(this._uploadAllowed&&this._invalidated){this._entities.sort(((e,t)=>{const s=t.sortKey,i=e.sortKey;return i===s?e.id-t.id:i-s})),t===enums/* FeatureBatchingStrategy */.ch.BATCHING&&this.reshuffle(!0),this._displayList=l.fromDisplayEntities(this._entities,this,e,t);for(const e of this._meshes.values())e.upload();this.debugInfo.display.length=this._displayList.length,this.debugInfo.display.minOrderedLength=this._displayList.minOrderedLength,this.debugInfo.display.minUnorderedLength=this._displayList.minUnorderedLength,this.requestRender(),this._invalidated=!1,this._nextUploadAllowed=!1}return this._displayList}getMesh(e){if(!this._meshes.has(e))throw new Error(`InternalError: Unable to find VAO for instance: ${e}`);return this._meshes.get(e)}getSortKeys(e){const t=new Map;for(const{id:s,sortKey:i}of this._entities)if(e.has(s)&&t.set(s,i),t.size===e.size)break;return t}onMessage(e){if(e.objectIdMap)for(const t in e.objectIdMap)this._objectIdMap||(this._objectIdMap={}),this._objectIdMap[t]=e.objectIdMap[t];switch(e.type){case"append":this._onAppendMessage(e);break;case"update":this._onUpdateMessage(e)}if(this._aggregateMemoryStats(),this.requestRender(),e.end){if((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.end [epoch=${e.attributeEpoch}]`),!e.attributeEpoch)throw new Error("InternalError: Attribute epoch not defined.");this._attributeEpoch=e.attributeEpoch,this._encounteredEnd=!0}this._writeLabelVisibilityToMesh()}_onAppendMessage(e){if((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.append`,{append:meshDebugUtils_s(e?.append)}),e.clear&&this.clear(),!e.append)return;const t=(0,serializationUtils/* deserializeList */._)(new Reader_t(e.append.entities),DisplayEntity/* default */.A);this._insert(t,e.append.data,!1)}_onUpdateMessage(e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.update`,{isPixelBuffer:e.isPixelBuffer,modify:meshDebugUtils_s(e.modify),remove:e.remove});const t=(0,serializationUtils/* deserializeList */._)(new Reader_t(e.modify.entities),DisplayEntity/* default */.A),s=t.map((e=>e.id)),i=e.isPixelBuffer??!1,r=[...e.remove,...s];i?this._removeByIdsFromBuffer(r):this._removeByIds(r),this._insert(t,e.modify.data,i)}reshuffle(e=!1){if(this.destroyed)return;const t=new Map;for(const s of this._entities)for(const i of s.records){const s=this._meshes.get(i.instanceId);let r=t.get(s);r||(r=new ReshufflePlan_t(e),t.set(s,r)),r.copyRecord(i)}for(const[s,i]of t)s.reshuffle(i);this._invalidated=!0,this._aggregateMemoryStats(),(0,has/* default */.A)("esri-2d-update-debug")&&b().info(`Tile ${this.key.id} was reshuffled.`)}copyPixelBufferedEntitesFrom(e,t,s,i){const r=s*definitions/* tileSize */.CQ,o=i*definitions/* tileSize */.CQ;for(const d of e._entities){let s=null;for(const i of d.records)if(i.overlaps&t){const t=e.getMesh(i.instanceId),n=this._ensureMesh(i.instanceId,t.layout,t.useVisibility).copyRecordFrom(t,i,r,o);s||(s=new DisplayEntity/* default */.A(d.id,d.sortKey),this._entityIdsFromBuffer.add(d.id),this._entityIndex.set(s.id,s),this._entities.push(s)),s.records.push(n)}}this._invalidated=!0}get metricsVisibility(){return this._metricsVisibility}copyMetricsVisibility(e){for(const t of e)this._metricsVisibility.add(t);this._writeLabelVisibilityToMesh()}updateLabelVisibility(){this._metricsVisibility.clear();for(const e of this._metrics){e.uniqueSymbol.show&&e.selectedForRendering&&this._metricsVisibility.add(e.hash)}this._writeLabelVisibilityToMesh()}_writeLabelVisibilityToMesh(){const e=this._meshes.get(this._labelInstanceId);if(e&&this._hasMetrics){for(const t of this._metrics){const s=this._entityIndex.get(t.id);if(!s)continue;const i=this._metricsVisibility.has(t.hash);e.setEntityRecordRangeVisibility(s.records,t.recordStart,t.recordCount,i?0:255)}this._invalidated=!0}}_ensureMesh(e,t,s){return this._meshes.has(e)||this._meshes.set(e,new MappedMesh/* MappedMesh */.X(this._stage.bufferPool,t,s)),this._meshes.get(e)}_insert(e,t,s){if(!e.length)return;this._removeDuplicatedBufferedEntites(e);const i=this._insertVertexData(t);for(const r of e){for(const e of r.records)e.updateBaseOffsets(i.get(e.instanceId));s?this._tryInsertBufferedEntity(r):this._insertEntity(r)}this._invalidated=!0}_insertMetrics(e){for(const t of e)t.tile=this;this._metrics.push(...e),this._fader?.insertFeatureTileMetrics(this,e)}_insertVertexData(e){const t=new Map;for(const s of e){const{instanceId:e,layout:i}=s,r=i.attributes.some((e=>"visibility"===e.name)),o=this._ensureMesh(e,i,r).append(s);if(s.metrics){const e=(0,serializationUtils/* deserializeList */._)(new Reader_t(s.metrics),LabelMetric/* LabelMetric */.f)??[];this._insertMetrics(e)}t.set(e,o)}return t}_insertEntity(e){(0,has/* default */.A)("esri-2d-update-debug")&&this._entityIds.has(e.id)&&console.error(`Tile ${this.key.id} insertEntity: Already have entityId ${e.id}`),this._entityIds.add(e.id),this._entityIndex.set(e.id,e),this._entities.push(e)}_tryInsertBufferedEntity(e){this._entityIds.has(e.id)?this._removeRecordsFromMesh(e.records):(this._entityIdsFromBuffer.add(e.id),this._entityIndex.set(e.id,e),this._entities.push(e))}_removeDuplicatedBufferedEntites(e){if(!this._entityIdsFromBuffer.size)return;const t=[];for(const s of e)this._entityIdsFromBuffer.has(s.id)&&t.push(s.id);this._removeByIds(t)}_removeByIdsFromBuffer(e){this._removeByIds(e.filter((e=>this._entityIdsFromBuffer.has(e))))}_removeByIds(e){if(0===e.length)return;const t=new Set(e),s=[];for(const r of this._entities)t.has(r.id)?(this._remove(r),this._entityIndex.delete(r.id)):s.push(r);this._entities=s;const i=this._metrics.filter((e=>t.has(e.displayId)));this._metrics=this._metrics.filter((e=>!t.has(e.displayId))),this._fader?.removeFeatureTileMetrics(this,i),this._invalidated=!0}_remove(e){this._removeRecordsFromMesh(e.records),this._entityIds.delete(e.id),this._entityIdsFromBuffer.delete(e.id)}_removeRecordsFromMesh(e){for(const t of e){const{instanceId:e,indexStart:s,indexCount:i,vertexStart:r,vertexCount:o}=t;this._meshes.get(e)?.remove(s,i,r,o)}}_aggregateMemoryStats(){this.debugInfo.memory.bytesUsed=0,this.debugInfo.memory.bytesReserved=0;for(const e of this._meshes.values())this.debugInfo.memory.bytesUsed+=e.memoryStats.bytesUsed,this.debugInfo.memory.bytesReserved+=e.memoryStats.bytesReserved}get _needsReshuffle(){if(this.destroyed)return!1;const{bytesUsed:e,bytesReserved:t}=this.debugInfo.memory,s=e/t,{minOrderedLength:i,length:h}=this.debugInfo.display;return t>definitions/* RESHUFFLING_EXEMPT_MEMORY_BYTES */._x&&s<definitions/* RESHUFFLING_TARGET_MEMORY_EFFICIENCY */.eI||h>definitions/* RESHUFFLING_EXEMPT_DRAW_CALLS */.Xh&&i/h<definitions/* RESHUFFLING_TARGET_DRAW_EFFICIENCY */.Vl}get entityIds(){return this._objectIdMap?this._entities.map((({id:e})=>({objectId:this._objectIdMap[e],displayId:e}))):[]}}


/***/ }),

/***/ 59339:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p6: () => (/* binding */ e),
/* harmony export */   wV: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports between, interpolate, positiveMod, radToByte */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=128/Math.PI,t=256/360,r=1/Math.LN2;function u(n,t){return(n%=t)>=0?n:n+t}function o(t){return u(t*n,256)}function c(n){return u(n*t,256)}function e(n){return Math.log(n)*r}function f(n,t,r){return n*(1-r)+t*r}function i(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}


/***/ }),

/***/ 49357:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ s),
/* harmony export */   o: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6267);
/* harmony import */ var _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93540);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-2d-log-allocations");class s{static create(t,e){const r=e.acquireUint32Array(t);return new s(r,e)}constructor(t,e){this._array=t,this._pool=e}get array(){return this._array}get length(){return this._array.length}getUint32View(t,e){return new Uint32Array(this._array.buffer,t+this._array.byteOffset,e)}expand(t){if(t<=this._array.byteLength)return;const e=this._pool.acquireUint32Array(t);e.set(this._array),this._pool.releaseUint32Array(this._array),this._array=e}destroy(){this._pool.releaseUint32Array(this._array)}}class a{constructor(){this._data=new ArrayBuffer(a.BYTE_LENGTH),this._freeList=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__/* .FreeList */ .P({start:0,end:this._data.byteLength})}static get BYTE_LENGTH(){return 16e6}get buffer(){return this._data}acquireUint32Array(t){const e=this._freeList.firstFit(t);return null==e?null:new Uint32Array(this._data,e,t/Uint32Array.BYTES_PER_ELEMENT)}releaseUint32Array(t){this._freeList.free(t.byteOffset,t.byteLength)}}class i{constructor(){this._pages=[],this._pagesByBuffer=new Map,this._bytesAllocated=0}destroy(){this._pages=[],this._pagesByBuffer=null}get _bytesTotal(){return this._pages.length*a.BYTE_LENGTH}acquireUint32Array(e){if(this._bytesAllocated+=e,r&&console.log(`Allocating ${e}, (${this._bytesAllocated} / ${this._bytesTotal})`),e>=a.BYTE_LENGTH)return new Uint32Array(e/Uint32Array.BYTES_PER_ELEMENT);for(const t of this._pages){const r=t.acquireUint32Array(e);if(null!=r)return r}const s=this._addPage().acquireUint32Array(e);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__/* .assertIsSome */ .Lw)(s,"Expected to allocate page"),s}releaseUint32Array(t){this._bytesAllocated-=t.byteLength,r&&console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);const e=this._pagesByBuffer.get(t.buffer);e&&e.releaseUint32Array(t)}_addPage(){const t=new a;return this._pages.push(t),this._pagesByBuffer.set(t.buffer,t),t}}


/***/ }),

/***/ 14125:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(38561);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17306);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _webgl_capabilities_DisjointTimerQuery_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99756);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-profiler");class n{constructor(n,i){if(this._events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A,this._entries=new Map,this._timings=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(10),this._currentContainer=null,this._currentPass=null,this._currentBrush=null,this._currentSummary=null,!r)return;this._ext=(0,_webgl_capabilities_DisjointTimerQuery_js__WEBPACK_IMPORTED_MODULE_3__/* .createDisjointTimerQuery */ ._R)(n.gl,{}),this._debugOutput=i;const o=n.gl;if(!this.enableCommandLogging)return;let a;for(a in o)if("function"==typeof o[a]){const e=o[a],t=a.includes("draw");o[a]=(...s)=>(this._events.emit("command",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:a,args:s,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),e.apply(o,s))}}get enableCommandLogging(){return!("object"==typeof r&&r.disableCommands)}recordContainerStart(e){r&&(this._currentContainer=e)}recordContainerEnd(){r&&(this._currentContainer=null)}recordPassStart(e){r&&(this._currentPass=e,this._initSummary())}recordPassEnd(){r&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){r&&(this._currentBrush=e)}recordBrushEnd(){r&&(this._currentBrush=null)}recordStart(e){if(r&&null!=this._ext){if(this._entries.has(e)){const t=this._entries.get(e),s=this._ext.resultAvailable(t.query),r=this._ext.disjoint();if(s&&!r){const s=this._ext.getResult(t.query)/1e6;let r=0;if(null!=this._timings.enqueue(s)){const e=this._timings.entries,t=e.length;let s=0;for(const r of e)s+=r;r=s/t}const n=s.toFixed(2),i=r?r.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${n} ms (${i} last 10 avg)\n${t.commandsLen} Commands (${t.drawCommands} draw)`),console.log("RenderPass breakdown: "),console.table(t.summaries),console.log("Commands: ",t.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${n} ms (${i} last 10 avg)`),this._debugOutput.innerHTML=`${n} (${i})`}for(const e of t.handles)e.remove();this._ext.deleteQuery(t.query),this._entries.delete(e)}const t={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(t.handles.push(this._events.on("command",(e=>{t.commandsLen++,t.commands.push(e),e.isDrawCommand&&t.drawCommands++}))),t.handles.push(this._events.on("summary",(e=>{t.summaries.push(e)})))),this._ext.beginTimeElapsed(t.query),this._entries.set(e,t)}}recordEnd(e){r&&null!=this._ext&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._currentSummary&&this._events.emit("summary",this._currentSummary)}}


/***/ }),

/***/ 33613:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(49195);
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46419);
/* harmony import */ var _brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29588);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!==0?e.key.level-r.key.level:e.key.row-r.key.row!==0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A{constructor(e){super(),this.tileInfoView=e,this.sortFunction=n}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.LABEL,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ 61409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25423);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(37353);
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42482);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__/* .DisplayObject */ .q{constructor(t,e,i,r,n,o,h=n,l=o){super(),this.tileDebugInfoTexture=null,this.debugInfo={display:{length:0,minOrderedLength:0,minUnorderedLength:0,triangleCount:0},memory:{bytesUsed:0,bytesReserved:0}},this._destroyed=!1,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(t),this.resolution=e,this.x=i,this.y=r,this.width=n,this.height=o,this.rangeX=h,this.rangeY=l}destroy(){this.tileDebugInfoTexture&&(this.tileDebugInfoTexture.dispose(),this.tileDebugInfoTexture=null),this._destroyed=!0}get debugSlot(){let t=this;for(;t.parent!==this._stage;){if(!t.parent)return 0;t=t.parent}return this._stage.children.indexOf(t)}setTransform(i){const s=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[n,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),h=this.width/this.rangeX*s,l=this.height/this.rangeY*s;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(r,h,0,0,0,l,0,n,o,1),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(this.transforms.displayViewScreenMat3,i.displayViewMat3,r)}get destroyed(){return this._destroyed}}


/***/ }),

/***/ 95200:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63643);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function x(t,e){return t.x===e.x&&t.y===e.y}function r(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let r=1;r<e;r++)x(t[r],t[i])||++i===r||(t[i]=t[r]);t.length=i+1}function n(t,e){return t.x=e.y,t.y=-e.x,t}function s(t,e){return t.x=-e.y,t.y=e.x,t}function y(t,e){return t.x=e.x,t.y=e.y,t}function o(t,e){return t.x=-e.x,t.y=-e.y,t}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function l(t,e){return t.x*e.y-t.y*e.x}function _(t,e){return t.x*e.x+t.y*e.y}function a(t,e,i,x){return t.x=e.x*i+e.y*x,t.y=e.x*x-e.y*i,t}class c{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e,x=this._canUseThinTessellation){r(t),x&&e.halfWidth<_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .thinLineHalfWidthThreshold */ .Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let x=e.initialDistance||0,r=!1,n=t[0].x,s=t[0].y;const y=t.length;for(let o=1;o<y;++o){r&&(r=!1,x=0);let e=t[o].x,y=t[o].y,h=e-n,l=y-s,_=Math.sqrt(h*h+l*l);if(h/=_,l/=_,x+_>i){r=!0;const t=(i-x)/_;_=i-x,e=(1-t)*n+t*e,y=(1-t)*s+t*y,--o}const a=this._writeVertex(n,s,0,0,h,l,l,-h,0,-1,x),c=this._writeVertex(n,s,0,0,h,l,-l,h,0,1,x);x+=_;const d=this._writeVertex(e,y,0,0,h,l,l,-h,0,-1,x),u=this._writeVertex(e,y,0,0,h,l,-l,h,0,1,x);this._writeTriangle(a,c,d),this._writeTriangle(c,d,u),n=e,s=y}}_tessellate(i,r){const c=i[0],d=i[i.length-1],u=x(c,d),v=u?3:2;if(i.length<v)return;const f=r.pixelCoordRatio,w=null!=r.capType?r.capType:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT,T=null!=r.joinType?r.joinType:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER,g=null!=r.miterLimit?Math.min(r.miterLimit,4):2,m=null!=r.roundLimit?Math.min(r.roundLimit,1.05):1.05,V=null!=r.halfWidth?r.halfWidth:2,N=!!r.textured;let E,b,R,U=null;const k=this._prevNormal,p=this._nextNormal;let M=-1,B=-1;const L=this._joinNormal;let D,S;const j=this._textureNormalLeft,A=this._textureNormalRight,O=this._textureNormal;let I=-1,P=-1;const W=r.wrapDistance||65535;let q=r.initialDistance||0;const Q=this._writeVertex,X=this._writeTriangle,C=(t,e,i,x,r,n)=>{const s=Q(b,R,D,S,i,x,t,e,r,n,q);return I>=0&&P>=0&&s>=0&&X(I,P,s),I=P,P=s,s};u&&(E=i[i.length-2],p.x=d.x-E.x,p.y=d.y-E.y,B=h(p),p.x/=B,p.y/=B);let z=!1;for(let x=0;x<i.length;++x){if(z&&(z=!1,q=0),E&&(k.x=-p.x,k.y=-p.y,M=B,q+M>W&&(z=!0)),z){const t=(W-q)/M;M=W-q,E={x:(1-t)*E.x+t*i[x].x,y:(1-t)*E.y+t*i[x].y},--x}else E=i[x];b=E.x,R=E.y;const r=x<=0&&!z,c=x===i.length-1;if(r||(q+=M),U=c?u?i[1]:null:i[x+1],U?(p.x=U.x-b,p.y=U.y-R,B=h(p),p.x/=B,p.y/=B):(p.x=void 0,p.y=void 0),!u){if(r){s(L,p),D=L.x,S=L.y,w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.SQUARE&&(C(-p.y-p.x,p.x-p.y,p.x,p.y,0,-1),C(p.y-p.x,-p.x-p.y,p.x,p.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&(C(-p.y-p.x,p.x-p.y,p.x,p.y,-1,-1),C(p.y-p.x,-p.x-p.y,p.x,p.y,-1,1)),w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT||(C(-p.y,p.x,p.x,p.y,0,-1),C(p.y,-p.x,p.x,p.y,0,1));continue}if(c){n(L,k),D=L.x,S=L.y,w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT||(C(k.y,-k.x,-k.x,-k.y,0,-1),C(-k.y,k.x,-k.x,-k.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.SQUARE&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,0,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,1,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,1,1));continue}}let d,v,Q=-l(k,p);if(Math.abs(Q)<.01)_(k,p)>0?(L.x=k.x,L.y=k.y,Q=1,d=Number.MAX_VALUE,v=!0):(s(L,p),Q=1,d=1,v=!1);else{L.x=(k.x+p.x)/Q,L.y=(k.y+p.y)/Q,d=h(L);const t=(d-1)*V*f;v=d>4||t>M&&t>B}D=L.x,S=L.y;let X=T;switch(T){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL:d<1.05&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER);break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.ROUND:d<m&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER);break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER:d>g&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL)}switch(X){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER:if(C(L.x,L.y,-k.x,-k.y,0,-1),C(-L.x,-L.y,-k.x,-k.y,0,1),c)break;if(N){const t=z?0:q;I=this._writeVertex(b,R,D,S,p.x,p.y,L.x,L.y,0,-1,t),P=this._writeVertex(b,R,D,S,p.x,p.y,-L.x,-L.y,0,1,t)}break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL:{const t=Q<0;let e,i,x,r;if(t){const t=I;I=P,P=t,e=j,i=A}else e=A,i=j;if(v)x=t?s(this._innerPrev,k):n(this._innerPrev,k),r=t?n(this._innerNext,p):s(this._innerNext,p);else{const e=t?o(this._inner,L):y(this._inner,L);x=e,r=e}const h=t?n(this._bevelStart,k):s(this._bevelStart,k);C(x.x,x.y,-k.x,-k.y,e.x,e.y);const l=C(h.x,h.y,-k.x,-k.y,i.x,i.y);if(c)break;const _=t?s(this._bevelEnd,p):n(this._bevelEnd,p);if(v){const t=this._writeVertex(b,R,D,S,-k.x,-k.y,0,0,0,0,q);I=this._writeVertex(b,R,D,S,p.x,p.y,r.x,r.y,e.x,e.y,q),P=this._writeVertex(b,R,D,S,p.x,p.y,_.x,_.y,i.x,i.y,q),this._writeTriangle(l,t,P)}else{if(N){const t=this._bevelMiddle;t.x=(h.x+_.x)/2,t.y=(h.y+_.y)/2,a(O,t,-k.x,-k.y),C(t.x,t.y,-k.x,-k.y,O.x,O.y),a(O,t,p.x,p.y),I=this._writeVertex(b,R,D,S,p.x,p.y,t.x,t.y,O.x,O.y,q),P=this._writeVertex(b,R,D,S,p.x,p.y,r.x,r.y,e.x,e.y,q)}else{const t=I;I=P,P=t}C(_.x,_.y,p.x,p.y,i.x,i.y)}if(t){const t=I;I=P,P=t}break}case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.ROUND:{const t=Q<0;let e,i;if(t){const t=I;I=P,P=t,e=j,i=A}else e=A,i=j;const x=t?o(this._inner,L):y(this._inner,L);let r,h;v?(r=t?s(this._innerPrev,k):n(this._innerPrev,k),h=t?n(this._innerNext,p):s(this._innerNext,p)):(r=x,h=x);const l=t?n(this._roundStart,k):s(this._roundStart,k),u=t?s(this._roundEnd,p):n(this._roundEnd,p),f=C(r.x,r.y,-k.x,-k.y,e.x,e.y),w=C(l.x,l.y,-k.x,-k.y,i.x,i.y);if(c)break;const T=this._writeVertex(b,R,D,S,-k.x,-k.y,0,0,0,0,q);v||this._writeTriangle(I,P,T);const g=o(this._outer,x),m=this._writeVertex(b,R,D,S,p.x,p.y,u.x,u.y,i.x,i.y,q);let V,E;const U=d>2;if(U){let e;d!==Number.MAX_VALUE?(g.x/=d,g.y/=d,e=_(k,g),e=(d*(e*e-1)+1)/e):e=-1,V=t?n(this._startBreak,k):s(this._startBreak,k),V.x+=k.x*e,V.y+=k.y*e,E=t?s(this._endBreak,p):n(this._endBreak,p),E.x+=p.x*e,E.y+=p.y*e}a(O,g,-k.x,-k.y);const M=this._writeVertex(b,R,D,S,-k.x,-k.y,g.x,g.y,O.x,O.y,q);a(O,g,p.x,p.y);const B=N?this._writeVertex(b,R,D,S,p.x,p.y,g.x,g.y,O.x,O.y,q):M,W=T,X=N?this._writeVertex(b,R,D,S,p.x,p.y,0,0,0,0,q):T;let z=-1,F=-1;if(U&&(a(O,V,-k.x,-k.y),z=this._writeVertex(b,R,D,S,-k.x,-k.y,V.x,V.y,O.x,O.y,q),a(O,E,p.x,p.y),F=this._writeVertex(b,R,D,S,p.x,p.y,E.x,E.y,O.x,O.y,q)),N?U?(this._writeTriangle(W,w,z),this._writeTriangle(W,z,M),this._writeTriangle(X,B,F),this._writeTriangle(X,F,m)):(this._writeTriangle(W,w,M),this._writeTriangle(X,B,m)):U?(this._writeTriangle(T,w,z),this._writeTriangle(T,z,F),this._writeTriangle(T,F,m)):(this._writeTriangle(T,w,M),this._writeTriangle(T,B,m)),v?(I=this._writeVertex(b,R,D,S,p.x,p.y,h.x,h.y,e.x,e.y,q),P=m):(I=N?this._writeVertex(b,R,D,S,p.x,p.y,h.x,h.y,e.x,e.y,q):f,this._writeTriangle(I,X,m),P=m),t){const t=I;I=P,P=t}break}}}}}


/***/ }),

/***/ 38403:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Y: () => (/* binding */ p),
/* harmony export */   AV: () => (/* binding */ o),
/* harmony export */   ES: () => (/* binding */ $),
/* harmony export */   Qz: () => (/* binding */ i),
/* harmony export */   UE: () => (/* binding */ f),
/* harmony export */   bX: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports createAttributeLayout, isValidSVG */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_getDataTypeBytes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60501);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.Utils");function o(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_BYTE:return 1;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return 2;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.FLOAT:return 4;default:return void a().error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function i(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_BYTE:return Uint8Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.FLOAT:return Float32Array;default:return void a().error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function c(e){const t=new Map;for(const r in e){const a=e[r];let o=0;t.set(r,a.map((e=>{const t=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexElementDescriptor */ ._(e.name,e.count,e.type,o,0,e.normalized||!1);return o+=e.count*(0,_webgl_getDataTypeBytes_js__WEBPACK_IMPORTED_MODULE_3__/* .getDataTypeBytes */ ._)(e.type),t}))),t.get(r).forEach((e=>e.stride=o))}return t}const l=e=>{const t=new Map;for(const r in e)for(const n of e[r])t.set(n.name,n.location);return t},u=e=>{const t={};return e.forEach(((e,r)=>t[r]=e?.length?e[0].stride:0)),t},m=new Map,$=(e,t)=>{if(!m.has(e)){const r=c(t),n={strides:u(r),bufferLayouts:r,attributes:l(t)};m.set(e,n)}return m.get(e)},f=e=>e.includes("data:image/svg+xml");function d(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}const g=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4));function p(e){if(null==e)return"";const{type:t}=e;switch(t){case"CIMMarkerPlacementAlongLineRandomSize":return`${t}-${e.seed}-${e.randomization}`;case"CIMMarkerPlacementAlongLineVariableSize":return`${t}-${e.maxRandomOffset}-${e.numberOfSizes}-${e.seed}-${e.variationMethod}`;case"CIMMarkerPlacementAtExtremities":return`${t}-${e.extremityPlacement}-${e.offsetAlongLine}`;case"CIMMarkerPlacementAtRatioPositions":return`${t}-${e.beginPosition}-${e.endPosition}-${e.flipFirst}-${JSON.stringify(e.positionArray)}`;case"CIMMarkerPlacementAtMeasuredUnits":return`${t}-${e.interval}-${e.skipMarkerRate}-${e.placeAtExtremities}`;case"CIMMarkerPlacementInsidePolygon":return`${t}-${e.stepX}-${e.stepY}-${e.randomness}-${e.gridType}-${e.seed}-${e.shiftOddRows}`;case"CIMMarkerPlacementOnLine":return`${t}-${e.relativeTo}-${e.startPointOffset}`;case"CIMMarkerPlacementOnVertices":return`${t}-${e.placeOnControlPoints}-${e.placeOnEndPoints}-${e.placeOnRegularVertices}`;case"CIMMarkerPlacementPolygonCenter":return`${t}-${e.method}`;default:return`${t}`}}


/***/ }),

/***/ 43438:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _shaderGraph_techniques_mesh_utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12453);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(80976);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{constructor(i,n){this._rctx=i,this._attributes=[{name:"position",offset:0,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2}],this.layout={hash:(0,_shaderGraph_techniques_mesh_utils_js__WEBPACK_IMPORTED_MODULE_0__/* .vertexLayoutHash */ .hU)(this._attributes),attributes:this._attributes,stride:4},this._vertexBuffer=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferObject */ .g.createVertex(i,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Usage */ ._U.STATIC_DRAW,new Uint16Array(n)),this._vao=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexArrayObject */ .Z(i,new Map([["a_position",0]]),new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexElementDescriptor */ ._("a_position",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,0,4)]]]),new Map([["geometry",this._vertexBuffer]])),this._count=n.length/2}bind(){this._rctx.bindVAO(this._vao)}unbind(){this._rctx.bindVAO(null)}dispose(){this._vao.dispose()}draw(){this._rctx.bindVAO(this._vao),this._rctx.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,this._count)}}


/***/ }),

/***/ 49195:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/brushes.js + 6 modules
var brushes = __webpack_require__(54185);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l=(e,r,t,o)=>{let n=0;for(let s=1;s<t;s++){const t=e[2*(r+s-1)],o=e[2*(r+s-1)+1];n+=(e[2*(r+s)]-t)*(e[2*(r+s)+1]+o)}return o?n>0:n<0},u=({coords:e,lengths:r},o)=>{const n=[];for(let s=0,i=0;s<r.length;i+=r[s],s+=1){const c=i,a=[];for(;s<r.length-1&&l(e,i+r[s],r[s+1],o);s+=1,i+=r[s])a.push(i+r[s]-c);const f=e.slice(2*c,2*(i+r[s])),m=(0,earcut.e)(f,a,2);for(const e of m)n.push(e+c)}return n};class y{constructor(e,r,t,o=!1){this._cache={},this.vertices=e,this.indices=r,this.primitiveType=t,this.isMapSpace=o}static fromPath(e){const r=(0,featureConversionUtils/* convertFromNestedArray */.eU)(new OptimizedGeometry/* default */.A,e.path,!1,!1),t=r.coords,o=new Uint32Array(u(r,!0)),n=new Uint32Array(t.length/2);for(let s=0;s<n.length;s++)n[s]=(0,number/* i1616to32 */.M9)(Math.floor(t[2*s]),Math.floor(t[2*s+1]));return new y({geometry:n},o,enums/* PrimitiveType */.WR.TRIANGLES)}static fromGeometry(t,o){const n=o.geometry?.type;switch(n){case"polygon":return y.fromPolygon(t,o.geometry);case"extent":return y.fromMapExtent(t,o.geometry);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.Mesh2D").error(new Error/* default */.A("mapview-bad-type",`Unable to create a mesh from type ${n}`,o)),y.fromScreenExtent({xmin:0,ymin:0,xmax:1,ymax:1})}}static fromPolygon(e,r){const t=(0,featureConversionUtils/* convertFromPolygon */.Ye)(new OptimizedGeometry/* default */.A,r,!1,!1),s=t.coords,f=new Uint32Array(u(t,!1)),h=new Uint32Array(s.length/2),l=(0,vec2f64/* create */.vt)(),x=(0,vec2f64/* create */.vt)();for(let n=0;n<h.length;n++)(0,vec2/* set */.hZ)(l,s[2*n],s[2*n+1]),e.toScreen(x,l),h[n]=(0,number/* i1616to32 */.M9)(Math.floor(x[0]),Math.floor(x[1]));return new y({geometry:h},f,enums/* PrimitiveType */.WR.TRIANGLES,!0)}static fromScreenExtent({xmin:e,xmax:r,ymin:t,ymax:o}){const n={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(e,t),(0,number/* i1616to32 */.M9)(r,t),(0,number/* i1616to32 */.M9)(e,o),(0,number/* i1616to32 */.M9)(e,o),(0,number/* i1616to32 */.M9)(r,t),(0,number/* i1616to32 */.M9)(r,o)])},s=new Uint32Array([0,1,2,3,4,5]);return new y(n,s,enums/* PrimitiveType */.WR.TRIANGLES)}static fromMapExtent(e,r){const[t,o]=e.toScreen([0,0],[r.xmin,r.ymin]),[n,s]=e.toScreen([0,0],[r.xmax,r.ymax]),i={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(t,o),(0,number/* i1616to32 */.M9)(n,o),(0,number/* i1616to32 */.M9)(t,s),(0,number/* i1616to32 */.M9)(t,s),(0,number/* i1616to32 */.M9)(n,o),(0,number/* i1616to32 */.M9)(n,s)])},c=new Uint32Array([0,1,2,3,4,5]);return new y(i,c,enums/* PrimitiveType */.WR.TRIANGLES)}destroy(){null!=this._cache.indexBuffer&&this._cache.indexBuffer.dispose(),this._cache.vertexBuffers?.forEach((e=>e?.dispose())),this._cache.indexBuffer=this._cache.vertexBuffers=null}getIndexBuffer(e,r=enums/* Usage */._U.STATIC_DRAW){return this._cache.indexBuffer??=BufferObject/* BufferObject */.g.createIndex(e,r,this.indices),this._cache.indexBuffer}getVertexBuffers(e,r=enums/* Usage */._U.STATIC_DRAW){return this._cache.vertexBuffers??=new Map(Object.keys(this.vertices).reduce(((t,o)=>(t.push([o,BufferObject/* BufferObject */.g.createVertex(e,r,this.vertices[o])]),t)),new Array)),this._cache.vertexBuffers}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/support/clippingUtils.js
var clippingUtils = __webpack_require__(6166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c extends DisplayObject/* DisplayObject */.q{constructor(e,t){super(),this._clip=t,this._cache={},this.stage=e,this._handle=(0,reactiveUtils/* watch */.wB)((()=>t.version),(()=>this._invalidate())),this.ready()}static fromClipArea(e,t){return new c(e,t)}_destroyGL(){null!=this._cache.mesh&&(this._cache.mesh.destroy(),this._cache.mesh=null),null!=this._cache.vao&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(e,t,r,s){const[i,a]=t.size;if("geometry"!==this._clip.type&&this._lastWidth===i&&this._lastHeight===a||(this._lastWidth=i,this._lastHeight=a,this._destroyGL()),null==this._cache.vao){const i=this._createMesh(t,this._clip),a=i.getIndexBuffer(e),o=i.getVertexBuffers(e);this._cache.mesh=i,this._cache.vao=new VertexArrayObject/* VertexArrayObject */.Z(e,r,s,o,a)}return this._cache.vao}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}_invalidate(){this._destroyGL(),this.requestRender()}_createMesh(r,s){switch(s.type){case"rect":return y.fromScreenExtent((0,clippingUtils/* createScreenExtent */.p)(s,r.size[0],r.size[1]));case"path":return y.fromPath(s);case"geometry":return y.fromGeometry(r,s);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.ClippingInfo").error(new Error/* default */.A("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),y.fromScreenExtent({xmin:0,ymin:0,xmax:1,ymax:1})}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends Container/* Container */.m{set clips(s){super.clips=s,this._updateClippingInfo(s)}renderChildren(s){s.painter.setPipelineState(null),null==this._renderPasses&&(this._renderPasses=this.prepareRenderPasses(s.painter));for(const r of this._renderPasses)try{r.render(s)}catch(e){}}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[brushes/* brushes */.d.clip],target:()=>this._clippingInfos,drawPhase:webgl_enums/* WGLDrawPhase */.S5.MAP|webgl_enums/* WGLDrawPhase */.S5.LABEL|webgl_enums/* WGLDrawPhase */.S5.LABEL_ALPHA|webgl_enums/* WGLDrawPhase */.S5.DEBUG|webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT})]}_updateClippingInfo(s){null!=this._clippingInfos&&(this._clippingInfos.forEach((s=>s.destroy())),this._clippingInfos=null),null!=s&&s.length&&(this._clippingInfos=s.items.map((s=>c.fromClipArea(this.stage,s)))),this.requestRender()}}


/***/ }),

/***/ 68775:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ZH: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports Player, adjustDuration, appendDelay, createPlayer, getDuration, prependDelay, reverse */
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20464);
/* harmony import */ var _core_time_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60882);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63643);
/* harmony import */ var _grouping_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(75625);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(t){return (0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(t.frameDurations.reduce(((t,e)=>t+e),0))}function n(t){const{width:e,height:r}=t,i=t.frameDurations.reverse(),a=e=>{const r=t.frameDurations.length-1-e;return t.getFrame(r)};return{frameCount:t.frameCount,duration:t.duration,frameDurations:i,getFrame:a,width:e,height:r}}function o(t,r){const{width:i,height:a,getFrame:n}=t,o=r/t.duration,s=t.frameDurations.map((t=>(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(t*o)));return{frameCount:t.frameCount,duration:t.duration,frameDurations:s,getFrame:n,width:i,height:a}}function s(t,r){const{width:i,height:a,getFrame:n}=t,o=t.frameDurations.slice(),s=o.shift();return o.unshift((0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(s+r)),{frameCount:t.frameCount,duration:t.duration+r,frameDurations:o,getFrame:n,width:i,height:a}}function m(t,r){const{width:i,height:a,getFrame:n}=t,o=t.frameDurations.slice(),s=o.pop();return o.push((0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(s+r)),{frameCount:t.frameCount,duration:t.duration+r,frameDurations:o,getFrame:n,width:i,height:a}}class u{constructor(t,e,r,i){this._animation=t,this._repeatType=r,this._onFrameData=i,this._direction=1,this._currentFrame=0,this.timeToFrame=this._animation.frameDurations[this._currentFrame];let a=0;for(;e>a;)a+=this.timeToFrame,this.nextFrame();const n=this._animation.getFrame(this._currentFrame);this._onFrameData(n)}nextFrame(){if(this._currentFrame+=this._direction,this._direction>0){if(this._currentFrame===this._animation.frameDurations.length)switch(this._repeatType){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.None:this._currentFrame-=this._direction;break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Loop:this._currentFrame=0;break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Oscillate:this._currentFrame-=this._direction,this._direction=-1}}else if(-1===this._currentFrame)switch(this._repeatType){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.None:this._currentFrame-=this._direction;break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Loop:this._currentFrame=this._animation.frameDurations.length-1;break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Oscillate:this._currentFrame-=this._direction,this._direction=1}this.timeToFrame=this._animation.frameDurations[this._currentFrame];const t=this._animation.getFrame(this._currentFrame);this._onFrameData(t)}}function h(t,h,c,f){let l,{repeatType:d}=h;if(null==d&&(d=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Loop),!0===h.reverseAnimation&&(t=n(t)),null!=h.duration&&(t=o(t,(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(1e3*h.duration))),null!=h.repeatDelay){const i=1e3*h.repeatDelay;d===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Loop?t=m(t,(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(i)):d===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .AnimatedSymbolRepeatType */ .fu.Oscillate&&(t=s(m(t,(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(i/2)),(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(i/2)))}if(null!=h.startTimeOffset)l=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(1e3*h.startTimeOffset);else if(null!=h.randomizeStartTime){const r=82749913,n=null!=h.randomizeStartSeed?h.randomizeStartSeed:r,o=(0,_grouping_js__WEBPACK_IMPORTED_MODULE_2__/* .getRandomValue */ .J)(c,n);l=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(o*a(t))}else l=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__/* .Milliseconds */ .l5)(0);return new u(t,l,d,f)}function c(e,r,i,a){const n=null==r.playAnimation||r.playAnimation,o=h(e,r,i,a);let s,m=o.timeToFrame;function u(){s=n?setTimeout((()=>{o.nextFrame(),m=o.timeToFrame,u()}),m):void 0}return u(),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .makeHandle */ .hA)((()=>n&&clearTimeout(s)))}


/***/ }),

/***/ 1341:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Qv: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports AAnimationInfo, AnimatedColor, AnimatedShift, AnimatedTransform, Constant */
/* harmony import */ var _instructions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(45987);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(t){return t instanceof i?t:"object"==typeof t&&"type"in t?c[t.type].hydrate(t):new o(t)}class i{constructor(t){this.inputs=t}encode(){const t=[];for(const n of this.inputs)t.push(...n.encode());return t.push(...this.instructions),t}}class o extends i{constructor(t){super([]),this.value=t}simplify(){return this}get instructions(){if(Array.isArray(this.value)){const[n,i,o,s]=this.value;return null!=s?_instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.vector4.encode([n,i||0,o||0,s]):_instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.vector3.encode([n,i||0,o||0])}return _instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.scalar.encode(this.value)}}class s extends i{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new s(t,n(t.parent))}simplify(){if(this._config.relativeTranslation||this._config.absoluteScale)return this;const t=this._parent.simplify();if(!(t instanceof o))return this;const[n,i,r,e]=t.value,c=this._config.translation.from[0],a=this._config.translation.from[1],f=this._config.rotation.from,h=this._config.scale.from;if(c===this._config.translation.to[0]&&a===this._config.translation.to[1]&&f===this._config.rotation.to&&h===this._config.scale.to){const t=r+f,s=e*h,u=Math.sin(r),l=Math.cos(r);return new o([l*e*c-u*e*a+n,u*e*c+l*e*a+i,t,s])}return new s(this._config,t)}get instructions(){return _instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.animatedTransform.encode(this._config)}}class r extends i{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new r(t,n(t.parent))}simplify(){const t=this._parent.simplify();if(!(t instanceof o))return this;const[n,i,s,e]=t.value,c=this._config.color.from[0],a=this._config.color.from[1],f=this._config.color.from[2];let h=this._config.color.from[3];const u=this._config.opacity.from;return c===this._config.color.to[0]&&a===this._config.color.to[1]&&f===this._config.color.to[2]&&h===this._config.color.to[3]&&u===this._config.opacity.to?(h*=u,new o([n*c,i*a,s*f,e*h])):new r(this._config,t)}get instructions(){return _instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.animatedColor.encode(this._config)}}class e extends i{constructor(t,n){super([n]),this._config=t,this._parent=n}static hydrate(t){return new e(t,n(t.parent))}simplify(){const t=this._parent.simplify();return t instanceof o?new e(this._config,t):this}get instructions(){return _instructions_js__WEBPACK_IMPORTED_MODULE_0__/* .instructions */ .GA.animatedShift.encode(this._config)}}const c={AnimatedTransform:s,AnimatedColor:r,AnimatedShift:e};


/***/ }),

/***/ 45987:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DW: () => (/* binding */ g),
/* harmony export */   GA: () => (/* binding */ y),
/* harmony export */   mv: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony exports AAnimationInstruction, AnimatedColorInstruction, AnimatedShiftInstruction, AnimatedTransformInstruction, RetInstruction, ScalarInstruction, Vector3Instruction, Vector4Instruction, easingCodes, generateGetValueSource, getTweenFactor, repeatTypeCodes, timeOriginSelectorCodes */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var t;!function(t){t.Local="Local",t.Global="Global"}(t||(t={}));class o{generateSource(t){const o=[];for(let a=1;a<this.length;a++)o.push(`vec4 atom${a} = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;");for(let a=0;a<this.ins;a++)o.push("top--;"),o.push(`vec4 in${this.ins-a-1} = stack[top];`);for(let a=0;a<this.outs;a++)o.push(`vec4 out${a};`);const{microcode:e}=this;for(const a of e)o.push(a);for(let a=0;a<this.outs;a++)o.push(`stack[top] = out${a};`),o.push("top++;"),o.push(`if (top >= ${x}) { top = ${x-1}; }`);return o}}let e=128;class a extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=0,this.microcode=["break;"]}encode(){return[[this.opcode,0,0,0]]}}class i extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.y, atom0.y, atom0.y, atom0.y);"]}encode(t){return[[this.opcode,t,0,0]]}}class n extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.yzw, 0.0);"]}encode(t){return[[this.opcode,t[0]||0,t[1]||0,t[2]||0]]}}class r extends o{constructor(){super(...arguments),this.opcode=++e,this.length=2,this.ins=0,this.outs=1,this.microcode=["out0 = atom1;"]}encode(t){return[[this.opcode,0,0,0],t]}}function s(t){return[`float duration = clamp(${t.duration}, 0.05, 3600.0);`,`float startTimeOffset = ${t.startTimeOffset};`,`float repeatDelay = ${t.repeatDelay};`,`float timeOriginSelector = ${t.timeOriginSelector};`,`float repeatType = ${t.repeatType};`,`float easing = ${t.easing};`,`float playAnimation = ${t.playAnimation} * (1.0 - step(0.0, -${t.duration}));`,`float reverseAnimation = ${t.reverseAnimation};`,"float time = globalTime - (timeOriginSelector == 1.0 ? localTimeOrigin : 0.0);","time *= playAnimation;","time *= 1.0 - reverseAnimation * 2.0;","float period = duration + repeatDelay;","time += reverseAnimation == 1.0 ? (period - startTimeOffset - 0.001) : startTimeOffset + 0.001;","float omega = time / period;","float oi = floor(omega);","omega = repeatType == 1.0 || repeatType == 3.0 ? omega - oi : omega;","float of = omega * period;","of = (clamp(of, reverseAnimation * repeatDelay, period - (1.0 - reverseAnimation) * repeatDelay) - reverseAnimation * repeatDelay) / duration;","of = easing == 2.0 ? pow(of, 3.0) : of;","of = easing == 3.0 ? 1.0 - pow(1.0 - of, 3.0) : of;","of = easing == 4.0 ? of < 0.5 ? 4.0 * pow(of, 3.0) : 1.0 - pow(-2.0 * of + 2.0, 3.0) / 2.0 : of;","bool oscillate = repeatType == 3.0 && mod(oi, 2.0) == 1.0;",`${t.out} = oscillate ? 1.0 - of : of;`]}const l={Linear:1,EaseIn:2,EaseOut:3,EaseInOut:4},m={Loop:1,None:2,Oscillate:3},c={Local:1,Global:2};function f(t){const o=l[t.easing],e=m[t.repeatType],a=c[t.timeOriginSelector];return[[t.duration,t.startTimeOffset,t.repeatDelay,a],[e,o,t.playAnimation,t.reverseAnimation]]}class p extends o{constructor(){super(...arguments),this.opcode=++e,this.length=10,this.ins=1,this.outs=1,this.microcode=["vec2 fromTranslation = atom1.xy;","vec2 toTranslation = atom1.zw;","float fromRotation = atom2.x;","float toRotation = atom2.y;","float fromScale = atom2.z;","float toScale = atom2.w;","bool relativeTranslation = atom9.x == 1.0;","bool absoluteScale = atom9.y == 1.0;","vec2 translationMultiplier = relativeTranslation ? pixelDimensions : vec2(1.0, 1.0);","float scaleDivisor = absoluteScale ? pixelDimensions.y : 1.0;","float fTranslation;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fTranslation"}),"}","float fRotation;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fRotation"}),"}","float fScale;","{",...s({duration:"atom7.x",startTimeOffset:"atom7.y",repeatDelay:"atom7.z",timeOriginSelector:"atom7.w",repeatType:"atom8.x",easing:"atom8.y",playAnimation:"atom8.z",reverseAnimation:"atom8.w",out:"fScale"}),"}","vec2 aTranslation = mix(fromTranslation, toTranslation, fTranslation);","float aRotation = mix(fromRotation, toRotation, fRotation);","float aScale = mix(fromScale, toScale, fScale);","vec2 pTranslation = in0.xy;","float pRotation = in0.z;","float pScale = in0.w;","aTranslation *= translationMultiplier;","aScale /= scaleDivisor;","float rotation = pRotation + aRotation;","float scale = pScale * aScale;","float sin1 = sin(pRotation);","float cos1 = cos(pRotation);","float s1 = pScale;","float x1 = pTranslation.x;","float y1 = pTranslation.y;","float x2 = aTranslation.x;","float y2 = aTranslation.y;","\n    vec2 translation = vec2(\n      cos1 * s1 * x2 - sin1 * s1 * y2 + x1,\n      sin1 * s1 * x2 + cos1 * s1 * y2 + y1\n    );\n    ","out0 = vec4(translation, rotation, scale);"]}encode(t){return[[this.opcode,0,0,0],[t.translation.from[0],t.translation.from[1],t.translation.to[0],t.translation.to[1]],[t.rotation.from,t.rotation.to,t.scale.from,t.scale.to],...f(t.translation.timing),...f(t.rotation.timing),...f(t.scale.timing),[t.relativeTranslation?1:0,t.absoluteScale?1:0,0,0]]}}class u extends o{constructor(){super(...arguments),this.opcode=++e,this.length=7,this.ins=1,this.outs=1,this.microcode=["float fromOpacity = atom0.y;","float toOpacity = atom0.z;","vec4 fromColor = atom1;","vec4 toColor = atom2;","float fColor;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fColor"}),"}","float fOpacity;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fOpacity"}),"}","vec4 aColor = mix(fromColor, toColor, fColor);","aColor.a *= mix(fromOpacity, toOpacity, fOpacity);","vec4 pColor = in0;","out0 = aColor * pColor;"]}encode(t){return[[this.opcode,t.opacity.from,t.opacity.to,0],[t.color.from[0],t.color.from[1],t.color.from[2],t.color.from[3]],[t.color.to[0],t.color.to[1],t.color.to[2],t.color.to[3]],...f(t.color.timing),...f(t.opacity.timing)]}}class h extends o{constructor(){super(...arguments),this.opcode=++e,this.length=4,this.ins=1,this.outs=1,this.microcode=["float fromShift = atom0.y;","float toShift = atom0.z;","float duration = atom1.x;","bool multiplyByLineLength = atom3.x == 1.0;","float fShift;","{",...s({duration:"duration",startTimeOffset:"atom1.y",repeatDelay:"atom1.z",timeOriginSelector:"atom1.w",repeatType:"atom2.x",easing:"atom2.y",playAnimation:"atom2.z",reverseAnimation:"atom2.w",out:"fShift"}),"}","toShift *= multiplyByLineLength ? lineLength : 1.0;","float aShift = mix(fromShift, toShift, fShift);","vec4 pShift = in0;","out0 = mod(aShift + pShift, lineLength);"]}encode(t){return[[this.opcode,t.shift.from,t.shift.to,0],...f(t.shift.timing),[t.multiplyByLineLength?1:0,0,0,0]]}}const y={scalar:new i,vector3:new n,vector4:new r,animatedTransform:new p,animatedColor:new u,animatedShift:new h,ret:new a},d=40,x=4;function g(t){const o=[];o.push(`float globalTime = ${t.globalTime};`),o.push(`float localTimeOrigin = ${t.localTimeOrigin};`),o.push(`float lineLength = ${t.lineLength};`),o.push(`vec2 pointer = ${t.animationPointer};`),o.push(`vec2 size = ${t.animationTextureSize};`),o.push("int top = 0;"),o.push(`vec4 stack[${x}];`),o.push(`for (int counter = 0; counter < ${d}; counter++) {`),o.push(`vec4 atom0 = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;"),o.push(`vec2 pixelDimensions = ${t.pixelDimensions};`),o.push("if (false) {");for(const e in y){const a=y[e];o.push(`} else if (int(atom0.x) == ${a.opcode}) {`);for(const e of a.generateSource(t))o.push(e)}return o.push("} // End if-else."),o.push("} // End for."),o.push(`${t.out} = top > 0 ? stack[top - 1] : vec4(0.0);`),o.join("\n")}function v(t,o){return`\n    vec4 ${t}(int valueIndex) {\n      vec2 thePointer = ${o.animationPointer};\n      float jump = texture(${o.animationTexture}, (0.5 + vec2(thePointer.x + float(valueIndex), thePointer.y)) / ${o.animationTextureSize}).x;\n      thePointer = vec2(thePointer.x + jump, thePointer.y);\n      vec4 theResult;\n      ${g({...o,out:"theResult",animationPointer:"thePointer"})}\n      return theResult;\n    }\n  `}


/***/ }),

/***/ 76849:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ c),
/* harmony export */   SM: () => (/* binding */ l),
/* harmony export */   aM: () => (/* binding */ a),
/* harmony export */   ci: () => (/* binding */ f),
/* harmony export */   oo: () => (/* binding */ r),
/* harmony export */   rS: () => (/* binding */ s),
/* harmony export */   vA: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96220);
/* harmony import */ var _grouping_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75625);
/* harmony import */ var _infos_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1341);
/* harmony import */ var _instructions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45987);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e){return a(e.map((e=>l(e))).map((e=>(0,_infos_js__WEBPACK_IMPORTED_MODULE_2__/* .hydrate */ .Qv)(e).simplify())))}function r(e){const t=[];return t.push(e.transform),t.push(e.fromColor),t.push(e.toColor),t.push(e.colorMix),t.push(e.toOpacity),t.push(e.opacityMix),e?.shift?t.push(e?.shift):t.push([1,1,1,1]),t}function a(e){const t=[],o=[];let i=0;for(const s of e){const r=[...s.encode(),..._instructions_js__WEBPACK_IMPORTED_MODULE_3__/* .instructions */ .GA.ret.encode()];t.push([i+e.length,0,0,0]),o.push(...r),i+=r.length}return[...t,...o]}async function c(e,t){const o=e;let i;if("number"==typeof o||"string"==typeof o||"boolean"==typeof o)i=o;else if(Array.isArray(o))i=await Promise.all(o.map((e=>c(e,t))));else if("object"==typeof o)if("valueExpressionInfo"in o){const{valueExpressionInfo:e}=o,{expression:n}=e;i={...o,computed:await t.createComputedField({expression:n})}}else{i={};for(const e in o)i[e]=await c(o[e],t)}return i}function l(i,n,s){function r(t){if(!("computed"in t))return t;let o=t.computed.readWithDefault(n,s,[255*t.defaultValue[0],255*t.defaultValue[1],255*t.defaultValue[2],t.defaultValue[3]]);if("string"==typeof o){const t=_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fromString(o);t&&(o=[t.r,t.g,t.b,t.a])}return o}const a=i;let c;if("number"==typeof a||"string"==typeof a||"boolean"==typeof a)c=a;else if(Array.isArray(a))c=a.map((e=>l(e,n,s)));else if("object"==typeof a)if("type"in a&&null!=a.type&&"Process"===a.type)switch(a.op){case"ArcadeColor":{const e=l(a.value,n,s);p(Array.isArray(e)&&4===e.length);c=[e[0]/255,e[1]/255,e[2]/255,e[3]]}break;case"Transparency":{const e=l(a.value,n,s);p("number"==typeof e),c=1-e/100}break;case"Divide":case"Multiply":case"Add":{const e=l(a.left,n,s);p("number"==typeof e);const t=l(a.right,n,s);switch(p("number"==typeof t),a.op){case"Divide":c=e/t;break;case"Multiply":c=e*t;break;case"Add":c=e+t}}break;case"Random":{const e=l(a.seed,n,s),i=l(a.min,n,s),r=l(a.max,n,s),f=n.getObjectId(),p=(0,_grouping_js__WEBPACK_IMPORTED_MODULE_1__/* .getStartGroup */ .A)(f||0);c=i+(0,_grouping_js__WEBPACK_IMPORTED_MODULE_1__/* .getRandomValue */ .J)(p,e)*(r-i)}break;case"Cond":{const e=l(a.condition,n,s),t=l(a.ifTrue,n,s),o=l(a.ifFalse,n,s);c=e?t:o}break;case"MatchWinding":{const e=l(a.sign,n,s);let t=l(a.angle,n,s);if(e>0)for(;t<0;)t+=2*Math.PI;else for(;t>0;)t-=2*Math.PI;c=t}}else if("computed"in a)c=r(a);else{c={};for(const e in a)c[e]=l(a[e],n,s)}return c}function*f(e){const t=e;if(Array.isArray(t))for(const o of t)yield*f(o);else if("object"==typeof t)if("type"in t&&null!=t.type&&"Process"===t.type)switch(t.op){case"ArcadeColor":case"Transparency":yield*f(t.value);break;case"Divide":case"Multiply":case"Add":yield*f(t.left),yield*f(t.right);break;case"Random":yield*f(t.seed),yield*f(t.min),yield*f(t.max);break;case"Cond":yield*f(t.condition),yield*f(t.ifTrue),yield*f(t.ifFalse);break;case"MatchWinding":yield*f(t.sign),yield*f(t.angle)}else if("computed"in t)yield t.computed;else for(const o in t)yield*f(t[o])}function p(e){if(!e)throw new Error("Assertion failed.")}


/***/ }),

/***/ 95031:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}prepareState(t,r){}draw(t,r,s){}drawMany(t,r,s){for(const a of r)a.visible&&this.draw(t,a,s)}}


/***/ }),

/***/ 46419:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40275);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97394);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50122);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class _ extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(1,0,0,1),this._initialized=!1}dispose(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}prepareState({context:e}){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.REPLACE),e.setStencilWriteMask(255)}draw(e,r){const{context:t,requestRender:i,allowDelayedRender:s}=e;this._initialized||this._initialize(t),!s||null==i||this._solidProgram.compiled?(t.setStencilFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Face */ .Y7.FRONT_AND_BACK,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .CompareFunction */ .MT.GREATER,r.stencilRef,255),t.bindVAO(this._solidVertexArrayObject),t.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",r.transforms.displayViewScreenMat3),this._solidProgram.setUniform2fv("u_coord_range",[r.rangeX,r.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),t.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),t.bindVAO()):i()}_initialize(e){if(this._initialized)return!0;const t=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__/* .createProgram */ .r)(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T);if(!t)return!1;const o=new Int8Array([0,0,1,0,0,1,1,1]),a=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,o),l=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexArrayObject */ .Z(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",a]]));return this._solidProgram=t,this._solidVertexArrayObject=l,this._initialized=!0,!0}}


/***/ }),

/***/ 29588:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40275);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _FeatureTile_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90819);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97394);
/* harmony import */ var _shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13294);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50122);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8595);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(45758);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const _=512,x=512,b=16,p=8,T=(x-2*p)/5;class y extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(1,0,0,1)}dispose(){this._outlineProgram?.dispose(),this._outlineProgram=null,this._tileInfoProgram?.dispose(),this._tileInfoProgram=null,this._outlineVertexArrayObject?.dispose(),this._outlineVertexArrayObject=null,this._tileInfoVertexArrayObject?.dispose(),this._tileInfoVertexArrayObject=null,this._ctx=null}prepareState({context:e}){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1)}draw(e,t){const{context:o,requestRender:i,allowDelayedRender:s}=e;if(!t.isReady&&t instanceof _FeatureTile_js__WEBPACK_IMPORTED_MODULE_2__/* .FeatureTile */ .R&&t.hasData)return;if(this._loadWGLResources(o),s&&null!=i&&(!this._outlineProgram.compiled||!this._tileInfoProgram.compiled))return void i();o.bindVAO(this._outlineVertexArrayObject),o.useProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._outlineProgram.setUniform2f("u_coord_range",t.rangeX,t.rangeY),this._outlineProgram.setUniform1f("u_depth",0),this._outlineProgram.setUniform4fv("u_color",this._color),o.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .PrimitiveType */ .WR.LINE_STRIP,0,4);const n=this._getTexture(o,t);n?(o.bindVAO(this._tileInfoVertexArrayObject),o.useProgram(this._tileInfoProgram),o.bindTexture(n,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform2f("u_coord_ratio",t.rangeX/t.width,t.rangeY/t.height),this._tileInfoProgram.setUniform2f("u_delta",0,0),this._tileInfoProgram.setUniform2f("u_dimensions",n.descriptor.width,n.descriptor.height),o.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),o.bindVAO()):o.bindVAO()}_loadWGLResources(e){if(this._outlineProgram&&this._tileInfoProgram)return;const r=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__/* .createProgram */ .r)(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .background */ .T),o=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__/* .createProgram */ .r)(e,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__/* .tileInfo */ .H),a=new Int8Array([0,0,1,0,1,1,0,1]),l=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .Usage */ ._U.STATIC_DRAW,a),m=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexArrayObject */ .Z(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",l]])),u=new Int8Array([0,0,1,0,0,1,1,1]),d=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .Usage */ ._U.STATIC_DRAW,u),h=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexArrayObject */ .Z(e,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__/* .tileInfo */ .H.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",d]]));this._outlineProgram=r,this._tileInfoProgram=o,this._outlineVertexArrayObject=m,this._tileInfoVertexArrayObject=h}_getTexture(e,t){if(!this._ctx){const e=document.createElement("canvas");e.width=_,e.height=x,this._ctx=e.getContext("2d")}if(!t.tileDebugInfoTexture){const r=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureDescriptor */ .R;r.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,r.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureSamplingMode */ .Cj.LINEAR,r.isImmutable=!0,r.width=_,r.height=x,t.tileDebugInfoTexture=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(e,r)}const r=this._ctx;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.textAlign="left",r.textBaseline="top",r.font=b-2+"px sans-serif",r.lineWidth=2,r.fillStyle="white",r.strokeStyle="black";const{debugSlot:o}=t;let i=p+T*o;const s=`${o}) ${t.key.id} (${t.constructor.name})`;r.strokeText(s,p,i),r.fillText(s,p,i),i+=b;const{debugInfo:n}=t;if(n){const{length:e,minOrderedLength:t,minUnorderedLength:o,triangleCount:s}=n.display;if(e>0){const t=`Length: ${e}`;r.strokeText(t,p,i),r.fillText(t,p,i),i+=b}if(t){const e=`Min ordered length: ${t}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}if(o){const e=`Min unordered length: ${o}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}if(s>0){s>1e5&&(r.fillStyle="red",r.strokeStyle="white");const e=`Triangle count: ${s}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}const{bytesUsed:a,bytesReserved:l}=n.memory;if(r.fillStyle="white",r.strokeStyle="black",a>0||l>0){const e=`Memory usage: ${a} of ${l} bytes`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}}return t.tileDebugInfoTexture.setData(r.canvas),t.tileDebugInfoTexture}}


/***/ }),

/***/ 51688:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _BoundingBox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1339);
/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1314);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=2;class n{constructor(e,i,t,s,r,h,n,a,o,l,d=[],c=0,u=0){this.displayId=e,this.labelClassId=i,this.hash=t,this.anchorX=s,this.anchorY=r,this.directionX=h,this.directionY=n,this.maxScale=a,this.minScale=o,this.referenceBounds=l,this.bounds=d,this.recordStart=c,this.recordCount=u,this.priority=0,this._colliders=null,this.uniqueSymbol=null,this.selectedForRendering=!1}get xTile(){return this.anchorX}get yTile(){return this.anchorY}colliders(t){if(!this._colliders){const s=t.attributeView,r=_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .labelPlacementOffsetPadding */ .C2;let n=this.referenceBounds?.size??0;const a=t.layerView.labelingCollisionInfos[0].vvEvaluators[0];if(null!=a){const e=a(s.getVisualVariableData(this.displayId,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .VVBinding */ .Gn.SIZE));n=isNaN(e)||null==e||e===1/0?n:e}const o=this.minScale?t.layerView.view.featuresTilingScheme.scaleToZoom(this.minScale):0,l=this.maxScale?t.layerView.view.featuresTilingScheme.scaleToZoom(this.maxScale):25,d=this.directionX*(r+n/2),c=this.directionY*(r+n/2);this._colliders=this.bounds.map((e=>({xTile:this.anchorX,yTile:this.anchorY,dxPixels:e.x-e.halfWidth+d,dyPixels:e.y-e.halfHeight+c,hard:!0,partIndex:1,width:e.width+h,height:e.height+h,angle:0,xScreen:0,yScreen:0,dxScreen:0,dyScreen:0,enabled:!0,minLod:o,maxLod:l})))}return this._colliders}get id(){return this.displayId}serialize(e){e.push(this.displayId),e.push(this.labelClassId),e.push(this.hash),e.push(this.recordStart),e.push(this.recordCount),e.writeF32(this.anchorX),e.writeF32(this.anchorY),e.writeF32(this.directionX),e.writeF32(this.directionY),e.writeF32(this.maxScale),e.writeF32(this.minScale),this.referenceBounds?(e.writeF32(this.referenceBounds.size),e.writeF32(this.referenceBounds.offsetX),e.writeF32(this.referenceBounds.offsetY)):(e.writeF32(0),e.writeF32(0),e.writeF32(0)),(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .serializeList */ .j)(e,this.bounds)}static deserialize(e){const i=e.readInt32(),s=e.readInt32(),h=e.readInt32(),a=e.readInt32(),o=e.readInt32(),l=e.readF32(),d=e.readF32(),c=e.readF32(),u=e.readF32(),f=e.readF32(),m=e.readF32(),F=e.readF32(),w=e.readF32(),S=e.readF32(),p=(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .deserializeList */ ._)(e,_BoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)??[];return new n(i,s,h,l,d,c,u,f,m,{size:F,offsetX:w,offsetY:S},p,a,o)}}


/***/ }),

/***/ 93540:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ t),
/* harmony export */   P: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(a){if(this.next=null,!Array.isArray(a))return void(this.data=a);this.data=a[0];let e=this;for(let n=1;n<a.length;n++)e.next=new t([a[n]]),e=e.next}*values(){let t=this;for(;t;)yield t.data,t=t.next}forEach(t){let a=this;for(;a;)t(a.data),a=a.next}get last(){return this.next?this.next.last:this}}class a{constructor(a){this._head=null,null!=a&&(this._head=new t(a))}get head(){return this._head}maxAvailableSpace(){if(null==this._head)return 0;let t=0;return this._head.forEach((a=>{const e=a.end-a.start;t=Math.max(t,e)})),t}firstFit(t){if(null==this._head)return null;let a=null,e=this._head;for(;e;){const n=e.data.end-e.data.start;if(n===t)return a?a.next=e.next:this._head=e.next,e.data.start;if(n>t){const a=e.data.start;return e.data.start+=t,a}a=e,e=e.next}return null}free(a,e){const n=a+e;if(null==this._head){const e=new t({start:a,end:n});return void(this._head=e)}if(n<=this._head.data.start){if(n===this._head.data.start)return void(this._head.data.start-=e);const r=new t({start:a,end:n});return r.next=this._head,void(this._head=r)}let r=this._head,d=r.next;for(;d;){if(d.data.start>=n){if(r.data.end===a){if(r.data.end+=e,r.data.end===d.data.start){const t=d.data.end-d.data.start;return r.data.end+=t,void(r.next=d.next)}return}if(d.data.start===n)return void(d.data.start-=e);const s=new t({start:a,end:n});return s.next=r.next,void(r.next=s)}r=d,d=d.next}if(a===r.data.end)return void(r.data.end+=e);const s=new t({start:a,end:n});r.next=s}clear(){this._head=null}}


/***/ }),

/***/ 56670:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  X: () => (/* binding */ y)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/PooledUint32Array.js
var PooledUint32Array = __webpack_require__(49357);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js
var FreeList = __webpack_require__(93540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Buffer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=1.25,d=32767,u=d<<16|d;class o{constructor(t,i,r,s){this._pool=s;const n=PooledUint32Array/* PooledUint32Array */.W.create(i*r*Uint32Array.BYTES_PER_ELEMENT,this._pool);this.size=i,this.strideInt=r,this.bufferType=t,this.dirty={start:1/0,end:0},this.memoryStats={bytesUsed:0,bytesReserved:i*r*Uint32Array.BYTES_PER_ELEMENT},this._gpu=null,this._cpu=n,this.clear()}get elementSize(){return this._cpu.length/this.strideInt}get intSize(){return this.fillPointer*this.strideInt}get byteSize(){return this.intSize*Uint32Array.BYTES_PER_ELEMENT}get invalidated(){return this.bufferSize>0&&!this._gpu}get invalidatedComputeBuffer(){return this.bufferSize>0&&!this._gpuComputeTriangles}invalidate(){this._invalidateTriangleBuffer(),this._gpu?.dispose(),this._gpu=null}_invalidateTriangleBuffer(){this._gpuComputeTriangles?.dispose(),this._gpuComputeTriangles=null}destroy(){this._gpu?.dispose(),this._gpuComputeTriangles?.dispose(),this._cpu?.destroy()}clear(){this.dirty.start=1/0,this.dirty.end=0,this.freeList=new FreeList/* FreeList */.P({start:0,end:this._cpu.length/this.strideInt}),this.fillPointer=0}ensure(t){if(this.maxAvailableSpace()>=t)return;if(t*this.strideInt>this._cpu.length-this.fillPointer){this.invalidate();const i=this._cpu.length/this.strideInt,r=Math.round((i+t)*a),e=r*this.strideInt;this._cpu.expand(e*Uint32Array.BYTES_PER_ELEMENT),this.freeList.free(i,r-i),this.memoryStats.bytesReserved+=(r-i)*this.strideInt*Uint32Array.BYTES_PER_ELEMENT}}setU32(t,i){this._cpu.array[t]!==i&&(this._cpu.array[t]=i,this.dirty.start=Math.min(t,this.dirty.start),this.dirty.end=Math.max(t+1,this.dirty.end))}setF32(t,r){this.setU32(t,(0,number/* toUint32 */.jT)(r))}setF32Range(t,r,e){const s=(0,number/* toUint32 */.jT)(e);this._cpu.array.fill(s,t,r),this.dirty.start=Math.min(t,this.dirty.start),this.dirty.end=Math.max(r,this.dirty.end)}getF32(t){return (0,number/* toFloat32 */.fG)(this._cpu.array[t])}getGPUBuffer(t,i=!1){if(!this.bufferSize)return null;if(i){if("index"!==this.bufferType)throw new Error("Tired to get triangle buffer, but target is not an index buffer");return null==this._gpuComputeTriangles&&(this._gpuComputeTriangles=this._createComputeBuffer(t)),this._gpuComputeTriangles}return null==this._gpu&&(this._gpu=this._createBuffer(t)),this._gpu}getView(t,i){return this._cpu.getUint32View(t,i/Uint32Array.BYTES_PER_ELEMENT)}get bufferSize(){return this._cpu.length/this.strideInt}maxAvailableSpace(){return this.freeList.maxAvailableSpace()}insert(i,r,e,s){const n=e*this.strideInt;if(!n)return 0;const h=r*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,a=new Uint32Array(i,h,n),d=this.freeList.firstFit(e);(0,maybe/* assertIsSome */.Lw)(d,"First fit region must be defined");const u=d*this.strideInt,o=n;if(this._cpu.array.set(a,u),0!==s)for(let t=0;t<a.length;t++)this._cpu.array[t+u]+=s;return this.dirty.start=Math.min(this.dirty.start,u),this.dirty.end=Math.max(this.dirty.end,u+o),this.fillPointer=Math.max(this.fillPointer,u+o),this.memoryStats.bytesUsed+=e*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,d}copyFrom(i,r,e,s,n){const h=e*this.strideInt;if(!h)return 0;const a=r*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,d=i._cpu.getUint32View(a,h),u=this.freeList.firstFit(e);(0,maybe/* assertIsSome */.Lw)(u,"First fit region must be defined");const o=u*this.strideInt,f=h;if(this._cpu.array.set(d,o),0!==s)for(let t=0;t<h;t++)this._cpu.array[o+t*this.strideInt+n]+=s;return this.dirty.start=Math.min(this.dirty.start,o),this.dirty.end=Math.max(this.dirty.end,o+f),this.fillPointer=Math.max(this.fillPointer,o+f),this.memoryStats.bytesUsed+=e*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,u}free(t,i,r){const e=t*this.strideInt,s=(t+i)*this.strideInt;if(!0===r)for(let n=t;n!==t+i;n++)this._cpu.array[n*this.strideInt]=u;this.dirty.start=Math.min(this.dirty.start,e),this.dirty.end=Math.max(this.dirty.end,s),this.freeList.free(t,i),this.memoryStats.bytesUsed-=i*this.strideInt*Uint32Array.BYTES_PER_ELEMENT}upload(){if(this.dirty.end){if(this._invalidateTriangleBuffer(),null==this._gpu)return this.dirty.start=1/0,void(this.dirty.end=0);this._gpu.setSubData(this._cpu.array,this.dirty.start,this.dirty.start,this.dirty.end),this.dirty.start=1/0,this.dirty.end=0}}reshuffle(t,i){if(0===i.length)return;const r=this.byteSize,s=t*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,n=r>s,h=this._cpu,a=PooledUint32Array/* PooledUint32Array */.W.create(s,this._pool);n||a.array.set(this._cpu.getUint32View(0,this.intSize));for(const e of i)if(n||e.srcFrom!==e.dstFrom||0!==e.mutate){this.dirty.start=Math.min(this.dirty.start,e.dstFrom*this.strideInt),this.dirty.end=Math.max(this.dirty.end,(e.dstFrom+e.count)*this.strideInt);for(let t=0;t<e.count;t++){const i=(e.dstFrom+t)*this.strideInt,r=(e.srcFrom+t)*this.strideInt;for(let t=0;t<this.strideInt;t++)a.array[i+t]=h.array[r+t]+e.mutate}}this._cpu.destroy(),this._cpu=a,n&&this.invalidate(),this.freeList.clear(),this.memoryStats.bytesUsed=this.memoryStats.bytesReserved=s}_createBuffer(t){const i=enums/* Usage */._U.DYNAMIC_DRAW;return"index"===this.bufferType?BufferObject/* BufferObject */.g.createIndex(t,i,this._cpu.array):BufferObject/* BufferObject */.g.createVertex(t,i,this._cpu.array)}_createComputeBuffer(t){const i=enums/* Usage */._U.DYNAMIC_DRAW,r=new Uint32Array(this.fillPointer/3);for(let e=0;e<this.fillPointer;e+=3)r[e/3]=this._cpu.array[e];return BufferObject/* BufferObject */.g.createIndex(t,i,r)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/dataViewUtils.js
var dataViewUtils = __webpack_require__(17906);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/utils.js
var utils = __webpack_require__(12453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/MappedMesh.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const MappedMesh_u=1e3,MappedMesh_a=4,h=[{name:"visibility",offset:0,type:enums/* DataType */.pe.FLOAT,count:1}],l={hash:(0,utils/* vertexLayoutHash */.hU)(h),attributes:h,stride:MappedMesh_a};function _(e,t){const i=e.attributes.filter((e=>t.locations.has(e.name))).map((t=>({name:t.name,type:t.type,count:t.count,divisor:0,normalized:t.normalized??!1,offset:t.offset,stride:e.stride})));return new Map([["geometry",i]])}function MappedMesh_d(e,t){const i=[],r=e.attributes.filter((e=>t.locations.has(e.name)));for(const s of r){i.push({name:s.name,type:s.type,count:s.count,divisor:0,normalized:s.normalized??!1,offset:s.offset,stride:e.stride});const r=t.computeAttributeMap[s.name];null!=r&&2===r.length&&(i.push({name:r[0],count:s.count,divisor:0,type:s.type,normalized:s.normalized??!1,offset:s.offset+e.stride,stride:e.stride}),i.push({name:r[1],count:s.count,divisor:0,type:s.type,normalized:s.normalized??!1,offset:s.offset+2*e.stride,stride:e.stride}))}return new Map([["geometry",i]])}class y{constructor(e,t,i){if(this._bufferPool=e,this._layout=t,this.useVisibility=i,this._invalidatedGeometry=!1,this._invalidatedCompute=!1,this._position=this._layout.attributes.find((e=>"pos"===e.name||"position"===e.name)),!this._position)throw new Error("InternalError: Unable to find position attribute")}destroy(){this._indexBuffer=(0,maybe/* destroyMaybe */.pR)(this._indexBuffer),this._vertexBuffer=(0,maybe/* destroyMaybe */.pR)(this._vertexBuffer),this._visibilityBuffer=(0,maybe/* destroyMaybe */.pR)(this._visibilityBuffer),this._computeVAO?.disposeVAOOnly(),this._geometryVAO?.disposeVAOOnly()}get layout(){return this._layout}getDrawArgs(e,t,i,r){return r?{primitive:enums/* PrimitiveType */.WR.POINTS,count:t/3,offset:i/3}:{primitive:e,count:t,offset:i}}getAttributePrecisionPackFactors(){const e={};for(const t of this.layout.attributes)t.packPrecisionFactor&&(e[t.name]=t.packPrecisionFactor);return e}getDebugVertexInfo(e=!1,t){if(!this._vertexBuffer)return null;const i=this._layout,s=i.stride,f=this._vertexBuffer.getView(0,this._vertexBuffer.byteSize),o=[];if(e)if(null==t)console.log("must provide location info to see compute attributes");else for(const r of i.attributes){const e=t.computeAttributeMap[r.name];null!=e&&2===e.length&&(o.push({...r,name:e[0],offset:r.offset+s}),o.push({...r,name:e[1],offset:r.offset+2*s}))}const n=new DataView(f.slice().buffer);let u=f.byteLength/s;e&&(u=this._indexBuffer.fillPointer/3);const a=this._indexBuffer.getView(0,this._indexBuffer.byteSize);let h=0;const l=[];for(let _=0;_<u;_++){if(e){h=a[3*_]*s}const t={};for(const e of[...i.attributes,...o]){let i=`${e.offset} ${e.name}`,s=(0,dataViewUtils/* unpackDataView */.q)(n,e,h);if(e.packPrecisionFactor)if(i+=` (precision: ${e.packPrecisionFactor})`,"number"==typeof s)s/=e.packPrecisionFactor;else for(let t=0;t<s.length;t++)s[t]/=e.packPrecisionFactor;t[i]=s}h+=s,l.push(t)}return{vertices:l,layout:i}}_ensure(e,t){if(this._vertexBuffer&&this._indexBuffer)this._indexBuffer.ensure(Math.max(e,MappedMesh_u)),this._vertexBuffer.ensure(Math.max(t,MappedMesh_u)),this._visibilityBuffer&&this._visibilityBuffer.ensure(Math.max(t,MappedMesh_u));else{const r=this._layout.stride/Uint32Array.BYTES_PER_ELEMENT;this._indexBuffer=new o("index",Math.max(e,MappedMesh_u),1,this._bufferPool),this._vertexBuffer=new o("vertex",Math.max(t,MappedMesh_u),r,this._bufferPool),this.useVisibility&&(this._visibilityBuffer=new o("vertex",Math.max(t,MappedMesh_u),MappedMesh_a/Uint32Array.BYTES_PER_ELEMENT,this._bufferPool))}}append(e){const t=e.layout.stride,i=e.indices.byteLength/Uint32Array.BYTES_PER_ELEMENT,r=e.vertices.byteLength/t;this._ensure(i,r);const{vertices:s,indices:f}=e,o=this._vertexBuffer.insert(s,0,s.byteLength/t,0),n=new Uint32Array(r);new Float32Array(n.buffer).fill(255),this._visibilityBuffer&&this._visibilityBuffer.insert(n,0,n.byteLength/MappedMesh_a,0);return{vertexFrom:o,indexFrom:this._indexBuffer.insert(f,0,f.byteLength/4,o)}}setEntityRecordRangeVisibility(e,t,i,r){for(let s=t;s<t+i;s++){const{vertexStart:t,vertexCount:i}=e[s];this._visibilityBuffer.setF32Range(t,t+i,r)}}getEntityRecordVisibility(e,t){const i=e.records[t];return this._visibilityBuffer.getF32(i.vertexStart)}copyRecordFrom(e,i,r,s){const{indexStart:f,indexCount:o,vertexStart:n,vertexCount:u}=i;this._ensure(o,u);const a=e._position,h=r*(a.packPrecisionFactor??1),l=s*(a.packPrecisionFactor??1),_=a.offset,d=(0,number/* i1616to32 */.M9)(h,l),y=this._vertexBuffer.copyFrom(e._vertexBuffer,n,u,d,_);this._visibilityBuffer&&e._visibilityBuffer&&this._visibilityBuffer.copyFrom(e._visibilityBuffer,n,u,0,0);const v=this._indexBuffer.copyFrom(e._indexBuffer,f,o,y-n,0),c=i.clone();return c.vertexStart=y,c.indexStart=v,c.overlaps=0,c}remove(e,t,i,r){this._indexBuffer.free(e,t),this._vertexBuffer.free(i,r),this._visibilityBuffer&&this._visibilityBuffer.free(i,r)}upload(){this._invalidatedGeometry=!0,this._invalidatedCompute=!0}getGeometryVAO(e,t){if(!this._vertexBuffer||!this._indexBuffer||!this._vertexBuffer.bufferSize)return null;if(this._invalidatedGeometry){(this._vertexBuffer.invalidated||this._indexBuffer.invalidated||this._visibilityBuffer?.invalidated)&&(this._vertexBuffer.invalidate(),this._indexBuffer.invalidate(),this._visibilityBuffer&&this._visibilityBuffer.invalidate(),this._geometryVAO?.disposeVAOOnly(),this._geometryVAO=null),this._vertexBuffer.upload(),this._indexBuffer.upload(),this._visibilityBuffer&&this._visibilityBuffer.upload();const i=this._indexBuffer.getGPUBuffer(e,!1),r=new Map([["geometry",this._vertexBuffer.getGPUBuffer(e)]]);if(this._visibilityBuffer&&r.set("visibility",this._visibilityBuffer.getGPUBuffer(e)),!this._geometryVAO){const s=_(this.layout,t);s.set("visibility",_(l,t).get("geometry")),this._geometryVAO=new VertexArrayObject/* VertexArrayObject */.Z(e,t.locations,s,r,i)}this._invalidatedGeometry=!1}return this._geometryVAO}getComputeVAO(e,t){if(!this._vertexBuffer||!this._indexBuffer||!this._vertexBuffer.bufferSize)return null;if(this._invalidatedCompute){(this._vertexBuffer.invalidated||this._indexBuffer.invalidatedComputeBuffer)&&(this._vertexBuffer.invalidate(),this._indexBuffer.invalidate(),this._visibilityBuffer&&this._visibilityBuffer.invalidate(),this._computeVAO?.disposeVAOOnly(),this._computeVAO=null),this._vertexBuffer.upload(),this._indexBuffer.upload(),this._visibilityBuffer&&this._visibilityBuffer.upload();const i=this._indexBuffer.getGPUBuffer(e,!0),r=new Map([["geometry",this._vertexBuffer.getGPUBuffer(e)]]);if(this._visibilityBuffer&&r.set("visibility",this._visibilityBuffer.getGPUBuffer(e)),!this._computeVAO){const s=MappedMesh_d(this.layout,t);s.set("visibility",_(l,t).get("geometry")),this._computeVAO=new VertexArrayObject/* VertexArrayObject */.Z(e,t.locations,s,r,i),this._invalidatedCompute=!1}}return this._computeVAO}get memoryStats(){return{bytesUsed:this._vertexBuffer.memoryStats.bytesUsed+this._indexBuffer.memoryStats.bytesUsed,bytesReserved:this._vertexBuffer.memoryStats.bytesReserved+this._indexBuffer.memoryStats.bytesReserved,vertex:this._vertexBuffer.memoryStats,index:this._indexBuffer.memoryStats}}reshuffle(e){this._vertexBuffer&&this._vertexBuffer.reshuffle(e.vertex.count,e.vertex.operations),this._indexBuffer&&this._indexBuffer.reshuffle(e.index.count,e.index.operations),this._visibilityBuffer&&this._visibilityBuffer.reshuffle(e.vertex.count,e.vertex.operations)}}


/***/ }),

/***/ 75625:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ o),
/* harmony export */   J: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,o){let r;if("string"==typeof e)r=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .numericHash */ .Wm)(e+`-seed(${o})`);else{let t=12;r=e^o;do{r=107*(r>>8^r)+t|0}while(0!==--t)}return(1+r/(1<<31))/2}function o(t){return Math.floor(e(t,r)*n)}const r=53290320,n=10;


/***/ }),

/***/ 25936:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  U: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayEntity.js
var DisplayEntity = __webpack_require__(18507);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayRecord.js
var DisplayRecord = __webpack_require__(20053);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t=1.25;class Writer_r{get length(){return this._pos}constructor(t,r){this._pos=0;const e=r?this._roundToNearest(r,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(e),this._buffer=new t(this._array),this._ctor=t,this._i16View=new Int16Array(this._array)}_roundToNearest(t,r){const e=Math.round(t);return 1===r?e:e+(r-e%r)}_ensureSize(r){if(this._pos+r>=this._buffer.length){const e=this._roundToNearest((this._array.byteLength+r*this._buffer.BYTES_PER_ELEMENT)*t,this._buffer.BYTES_PER_ELEMENT),s=new ArrayBuffer(e),i=new this._ctor(s);i.set(this._buffer,0),this._array=s,this._buffer=i,this._i16View=new Int16Array(this._array)}}ensureSize(t){this._ensureSize(t)}writeF32(t){this._ensureSize(1);const r=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=t,this._pos++,r}push(t){this._ensureSize(1);const r=this._pos;return this._buffer[this._pos++]=t,r}writeFixed(t){this._buffer[this._pos++]=t}setValue(t,r){this._buffer[t]=r}i1616Add(t,r,e){this._i16View[2*t]+=r,this._i16View[2*t+1]+=e}getValue(t){return this._buffer[t]}getValueF32(t){return new Float32Array(this._array,4*t,1)[0]}incr(t){if(this._buffer.length<t)throw new Error("Increment index overflows the target buffer");this._buffer[t]++}decr(t){this._buffer[t]--}writeRegion(t){this._ensureSize(t.length);const r=this._pos;return this._buffer.set(t,this._pos),this._pos+=t.length,r}writeManyFrom(t,r,e){this._ensureSize(e-r);for(let s=r;s!==e;s++)this.writeFixed(t._buffer[s])}buffer(){const t=this._array.slice(0,4*this._pos);return this.destroy(),t}toArray(){return[...this._buffer]}seek(t){this._pos=t}destroy(){this._array=null,this._buffer=null}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexDataWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=6,i=4;class r{constructor(r,s,n=0){const c=e*n*Uint32Array.BYTES_PER_ELEMENT,h=i*n*s.stride,u=s.stride/4,_=s.attributes.find((t=>"pos"===t.name||"position"===t.name));if(!_)throw new Error("InternalError: Unable to find position attribute");this.layout={...s,position:_},this._indices=new Writer_r(Uint32Array,c),this._vertices=new Writer_r(Uint32Array,h),this._metrics=new Writer_r(Uint32Array,0),this._metricCountOffset=this._metrics.push(0),this._strideInt=u,this._instanceId=r}serialize(t){const e=this._indices.buffer(),i=this._vertices.buffer(),r=this._metrics.length?this._metrics.buffer():null;return t.push(e,i),{instanceId:this._instanceId,layout:this.layout,indices:e,vertices:i,metrics:r}}get strideInt(){return this._strideInt}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(t){this._vertices.ensureSize(t)}indexEnsureSize(t){this._indices.ensureSize(t)}writeIndex(t){this._indices.push(t)}writeVertex(t){this._vertices.push(t)}writeVertexRegion(t){this._vertices.writeRegion(t)}writeVertexF32(t){this._vertices.writeF32(t)}writeMetric(t){this._metrics.incr(this._metricCountOffset),t.serialize(this._metrics)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{constructor(e,r=0){this._id=e,this._sizeHint=r,this._entityRecordCountOffset=0,this._entityCountOffset=0,this._entityIdIndex=0,this._entitySortKeyIndex=0,this._didEntityStart=!1,this._instanceIdToVertexData=new Map,this._recordIndexStart=0,this._recordIndexCount=0,this._recordVertexStart=0,this._recordVertexCount=0,this._current={metric:null,writer:null,start:0,sortKey:0,instanceId:0,layoutHash:0,indexStart:0,vertexStart:0,textureKey:0,metricBoxLenPointer:0},this._entities=new Writer_r(Uint32Array,this._sizeHint*DisplayEntity/* default */.A.byteSizeHint),this._entityCountOffset=this._entities.push(0)}get id(){return this._id}serialize(){const t=new Array,e=[],r=this._entities.buffer();for(const i of this._instanceIdToVertexData.values())e.push(i.serialize(t));return{message:{data:e,entities:r},transferList:t}}vertexStart(){return this._current.vertexStart??0}vertexCount(){return this._current.writer?.vertexCount??0}indexCount(){return this._current.writer?.indexCount??0}vertexEnsureSize(t){this._current.writer.vertexEnsureSize(t)}indexEnsureSize(t){this._current.writer.indexEnsureSize(t)}vertexWrite(t){this._current.writer.writeVertex(t)}vertexWriteRegion(t){this._current.writer.writeVertexRegion(t)}vertexWriteF32(t){this._current.writer.writeVertexF32(t)}recordBounds(t,e,r,i){}indexWrite(t){this._current.writer.writeIndex(t)}metricStart(t){this._current.metric=t,this._current.metric.recordStart=this.recordCount()}metricEnd(){const t=this._current.writer;this._current.metric&&(this._current.metric.recordCount=this.recordCount()-this._current.metric.recordStart),this._current.metric?.bounds.length&&this._current.metric?.recordCount?(t.writeMetric(this._current.metric),this._current.metric=null):this._current.metric=null}metricBoxWrite(t){this._current.metric.bounds.push(t)}entityStart(t,e=t){this._entityIdIndex=this._entities.push(t),this._entitySortKeyIndex=this._entities.writeF32(e),this._entityRecordCountOffset=this._entities.push(0),this._didEntityStart=!0}entityRecordCount(){return this._entities.getValue(this._entityRecordCountOffset)}entityEnd(){if(!this._didEntityStart)return;0===this.entityRecordCount()?this._entities.seek(this._entityIdIndex):this._entities.incr(this._entityCountOffset),this._didEntityStart=!1}recordCount(){return this._entities.getValue(this._entityRecordCountOffset)}recordStart(t,e,r=0){this._current.writer=this._getVertexWriter(t,e),this._current.indexStart=this._current.writer.indexCount,this._current.vertexStart=this._current.writer.vertexCount,this._current.instanceId=t,this._current.layoutHash=e.hash,this._current.textureKey=r}recordEnd(t=0){const r=this._current.vertexStart,i=this._current.writer.vertexCount-r;if(!i)return!1;const n=this._current.indexStart,s=this._current.writer.indexCount-n;return this._recordIndexStart=n,this._recordIndexCount=s,this._recordVertexStart=r,this._recordVertexCount=i,this._entities.incr(this._entityRecordCountOffset),DisplayRecord/* default */.A.write(this._entities,this._current.instanceId,this._current.textureKey,n,s,r,i,t),!0}copyLast(t,r){const i=this._recordVertexStart+this._recordVertexCount;this._entities.incr(this._entityRecordCountOffset),DisplayRecord/* default */.A.write(this._entities,this._current.instanceId,this._current.textureKey,this._recordIndexStart+this._recordIndexCount,this._recordIndexCount,i,this._recordVertexCount,0);const n=this._current.writer.indexWriter,s=this._current.writer.vertexWriter,c=this._recordIndexStart+this._recordIndexCount,o=this._recordVertexCount;for(let e=this._recordIndexStart;e!==c;e++){const t=n.getValue(e);n.push(t+o)}const u=this._current.writer.layout.stride/Uint32Array.BYTES_PER_ELEMENT,h=this._recordVertexStart*u,_=(this._recordVertexStart+this._recordVertexCount)*u;for(let e=h;e!==_;e++){const t=s.getValue(e);s.push(t)}const d=this._current.writer.layout.position,a=d.packPrecisionFactor??1,x=d.offset/Uint32Array.BYTES_PER_ELEMENT,y=t*a,S=r*a;for(let e=i*u;e<=s.length;e+=u)s.i1616Add(e+x,y,S)}copyLastFrom(t,e,r){const i=t._entities.getValue(t._entityIdIndex);if(i!==this._entities.getValue(this._entityIdIndex)){const e=t._entities.getValueF32(t._entitySortKeyIndex);this.entityStart(i,e)}this.recordStart(t._current.instanceId,t._current.writer.layout,t._current.textureKey);const n=this._current.writer.layout.stride/Uint32Array.BYTES_PER_ELEMENT,s=this._current.vertexStart,c=t._current.vertexStart-s,o=this._current.writer.indexWriter,u=this._current.writer.vertexWriter,h=t._current.writer.indexWriter,_=t._current.writer.vertexWriter;for(let l=t._current.indexStart;l!==h.length;l++){const t=h.getValue(l);o.push(t-c)}for(let l=t._current.vertexStart*n;l!==_.length;l++){const t=_.getValue(l);u.push(t)}const d=this._current.writer.layout.position,a=d.packPrecisionFactor??1,x=d.offset/Uint32Array.BYTES_PER_ELEMENT,y=e*a,S=r*a;for(let l=s*n;l<=u.length;l+=n)u.i1616Add(l+x,y,S);this.recordEnd()}_getVertexWriter(t,e){const i=this._instanceIdToVertexData;return i.has(t)||i.set(t,new r(t,e,this._sizeHint)),i.get(t)}}


/***/ }),

/***/ 55929:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  J: () => (/* binding */ s)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/urlUtils.js
var urlUtils = __webpack_require__(84194);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/AResourceProxy.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AResourceProxy_s{}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/ResourceProxy.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends AResourceProxy_s{constructor(e){super(),this._fetcher=e,this._controller=new AbortController,this._pendingIds=new Set,this._pendingRequests=[],this._resourceIdToResource=new Map}destroy(){this._controller.abort()}get _abortOptions(){return{signal:this._controller.signal}}enqueueRequest(r){const s=(0,urlUtils/* discardUrlIfHasUrlHash */.I)(r.resource),o=(0,string/* numericHash */.Wm)(JSON.stringify(s));return this._pendingIds.has(o)||(this._pendingIds.add(o),this._pendingRequests.push({...r,resourceId:o})),o}async fetchEnqueuedResources(){const e=this._pendingRequests;if(this._pendingIds.clear(),this._pendingRequests=[],0===e.length)return;const t=await this._fetcher.fetch(e,this._abortOptions);for(let r=0;r<t.length;r++){const s=e[r].resourceId;this._resourceIdToResource.set(s,t[r])}}async fetchResourceImmediate(e){const t=await this._fetcher.fetch([e]);if(1!==t.length)throw new Error("FeaturePipelineResourceProxy: failed to fetch resources");return t[0]}async fetchDictionaryResourceImmediate(e){const t=await this._fetcher.fetchDictionary([e]);if(1!==t.length)throw new Error("FeaturePipelineResourceProxy: failed to fetch dictionary resources");return t[0]}getResource(e){return this._resourceIdToResource.get(e)}}


/***/ }),

/***/ 62823:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  uS: () => (/* binding */ templateUtils_d),
  FE: () => (/* binding */ templateUtils_x),
  lO: () => (/* binding */ templateUtils_a),
  XZ: () => (/* binding */ templateUtils_p)
});

// UNUSED EXPORTS: area, triangleAreaArray, triangulateEarcut

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/libtess.js
var libtess = __webpack_require__(1918);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/TileClipper.js
var TileClipper = __webpack_require__(87569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/bufcut.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function bufcut_e(e,t,r,i,u,o,l){D=0;const y=(i-r)*o,p=u&&u.length,c=p?(u[0]-r)*o:y;let v,s,h,d,Z,a=n(t,r,i,0,c,o,!0);if(a&&a.next!==a.prev){if(p&&(a=f(t,r,i,u,a,o)),y>80*o){v=h=t[0+r*o],s=d=t[1+r*o];for(let e=o;e<c;e+=o){const n=t[e+r*o],x=t[e+1+r*o];v=Math.min(v,n),s=Math.min(s,x),h=Math.max(h,n),d=Math.max(d,x)}Z=Math.max(h-v,d-s),Z=0!==Z?1/Z:0}x(a,e,o,v,s,Z,l,0)}}function n(e,n,t,x,r,i,l){let f;if(l===Z(e,n,t,x,r,i)>0)for(let o=x;o<r;o+=i)f=u(o+n*i,e[o+n*i],e[o+1+n*i],f);else for(let o=r-i;o>=x;o-=i)f=u(o+n*i,e[o+n*i],e[o+1+n*i],f);return f&&m(f,f.next)&&(o(f),f=f.next),f}function bufcut_t(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!m(x,x.next)&&0!==s(x.prev,x,x.next))x=x.next;else{if(o(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function x(e,n,u,l,f,y,p,v){if(!e)return;!v&&y&&(e=c(e,l,f,y));let s=e;for(;e.prev!==e.next;){const c=e.prev,h=e.next;if(y?i(e,l,f,y):r(e))n.push(c.index/u+p),n.push(e.index/u+p),n.push(h.index/u+p),o(e),e=h.next,s=h.next;else if((e=h)===s){v?1===v?x(e=b(e,n,u,p),n,u,l,f,y,p,2):2===v&&g(e,n,u,l,f,y,p):x(bufcut_t(e),n,u,l,f,y,p,1);break}}}function r(e){const n=e.prev,t=e,x=e.next;if(s(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,a(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&s(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function i(e,n,t,x){const r=e.prev,i=e,u=e.next;if(s(r,i,u)>=0)return!1;const o=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,l=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,f=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,y=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=z(o,l,n,t,x),c=z(f,y,n,t,x);let v=e.prevZ,h=e.nextZ;for(;v&&v.z>=p&&h&&h.z<=c;){if(v!==e.prev&&v!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&s(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,h!==e.prev&&h!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&s(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;v&&v.z>=p;){if(v!==e.prev&&v!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&s(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&s(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,t,x){const r=q.create(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function l(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function f(e,t,x,r,i,u){const o=new Array;for(let f=0,y=r.length;f<y;f++){const i=n(e,t,x,r[f]*u,f<y-1?r[f+1]*u:x*u,u,!1);i===i.next&&(i.steiner=!0),o.push(l(i))}o.sort(M);for(const n of o)i=y(n,i);return i}function y(e,n){const x=p(e,n);if(!x)return n;const r=A(x,e);return bufcut_t(r,r.next),bufcut_t(x,x.next)}function p(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const o=i,l=i.x,f=i.y;let y,p=1/0;for(t=i.next;t!==o;)x>=t.x&&t.x>=l&&x!==t.x&&a(r<f?x:u,r,l,f,r<f?u:x,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(x-t.x),(y<p||y===p&&t.x>i.x)&&w(t,e)&&(i=t,p=y)),t=t.next;return i}function c(e,n,t,x){let r;for(;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=z(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,c(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,v(e)}function v(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let o=t;for(;u>0||o>0&&x;){let t;0===u?(t=x,x=x.nextZ,o--):0!==o&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,o--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}function s(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function h(e,n,t,x){return!!(m(e,n)&&m(t,x)||m(e,x)&&m(t,n))||s(e,n,t)>0!=s(e,n,x)>0&&s(t,x,e)>0!=s(t,x,n)>0}function d(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&h(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function Z(e,n,t,x,r,i){let u=0;for(let o=x,l=r-i;o<r;o+=i)u+=(e[l+n*i]-e[o+n*i])*(e[o+1+n*i]+e[l+1+n*i]),l=o;return u}function a(e,n,t,x,r,i,u,o){return(r-u)*(n-o)-(e-u)*(i-o)>=0&&(e-u)*(x-o)-(t-u)*(n-o)>=0&&(t-u)*(i-o)-(r-u)*(x-o)>=0}function w(e,n){return s(e.prev,e,e.next)<0?s(e,n,e.next)>=0&&s(e,e.prev,n)>=0:s(e,n,e.prev)<0||s(e,e.next,n)<0}function z(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function m(e,n){return e.x===n.x&&e.y===n.y}function M(e,n){return e.x-n.x}function b(e,n,t,x){let r=e;do{const i=r.prev,u=r.next.next;!m(i,u)&&h(i,r,r.next,u)&&w(i,u)&&w(u,i)&&(n.push(i.index/t+x),n.push(r.index/t+x),n.push(u.index/t+x),o(r),o(r.next),r=e=u),r=r.next}while(r!==e);return r}function g(e,n,r,i,u,o,l){let f=e;do{let e=f.next.next;for(;e!==f.prev;){if(f.index!==e.index&&k(f,e)){let y=A(f,e);return f=bufcut_t(f,f.next),y=bufcut_t(y,y.next),x(f,n,r,i,u,o,l,0),void x(y,n,r,i,u,o,l,0)}e=e.next}f=f.next}while(f!==e)}function k(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!d(e,n)&&w(e,n)&&w(n,e)&&j(e,n)}function j(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}function A(e,n){const t=q.create(e.index,e.x,e.y),x=q.create(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}class q{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(e,n,t){const x=D<B.length?B[D++]:new q;return x.index=e,x.x=n,x.y=t,x.prev=null,x.next=null,x.z=null,x.prevZ=null,x.nextZ=null,x.steiner=!1,x}}const B=[],C=8096;let D=0;for(let E=0;E<C;E++)B.push(new q);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/templateUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const templateUtils_i=1e-5,templateUtils_f=new TileClipper/* TileClipper */.O3(0,0,0,1,0),templateUtils_c=new TileClipper/* TileClipper */.O3(0,0,0,1,0);function templateUtils_u(t,e,n){let o=0;for(let r=1;r<n;r++){const n=t[2*(e+r-1)],s=t[2*(e+r-1)+1];o+=(t[2*(e+r)]-n)*(t[2*(e+r)+1]+s)}return o}function templateUtils_h(t,e,n,o,r){let s=0;const l=2;for(let i=n;i<o;i+=3){const n=(t[i]-r)*l,o=(t[i+1]-r)*l,f=(t[i+2]-r)*l;s+=Math.abs((e[n]-e[f])*(e[o+1]-e[n+1])-(e[n]-e[o])*(e[f+1]-e[n+1]))}return s}function templateUtils_a(t,e){const{coords:n,lengths:o}=e,r=0,s=t;let f=0;for(let c=0;c<o.length;){let t=c,e=o[c],a=templateUtils_u(n,f,e);const g=[];for(;++t<o.length;){const r=o[t],s=templateUtils_u(n,f+e,r);if(!(s>0))break;a+=s,g.push(f+e),e+=r}const p=s.length;bufcut_e(s,n,f,f+e,g,2,r);const m=templateUtils_h(s,n,p,s.length,r),x=Math.abs(a);if(Math.abs((m-x)/Math.max(1e-7,x))>templateUtils_i)return s.length=0,!1;c=t,f+=e}return!0}function templateUtils_g(e,n,o){const{coords:r,lengths:s}=n;let l=0;for(let i=0;i<s.length;){let f=i,c=s[i];const h=[];for(;++f<s.length;){const t=s[f];if(!(templateUtils_u(r,l+c,t)>0))break;h.push(l+c-l),c+=t}const a=l+c,g=n.coords.slice(2*l,2*a),p=t(g,h,2);for(const t of p)e.push(t+o+l);i=f,l+=c}return!0}function templateUtils_p(t){const{coords:n,lengths:o}=t,{buffer:r}=(0,libtess/* triangulate */.l)(n,o);return r}function templateUtils_m(t,e,n){let o=0;for(let r=0;r<t.lengths.length;r++){const s=t.lengths[r];for(let r=0;r<s;r++){const s=t.coords[2*(r+o)],l=t.coords[2*(r+o)+1];if(s<e||s>n||l<e||l>n)return!0}o+=s}return!1}function templateUtils_x(t,e){if(null==t)return null;if(!templateUtils_m(t,-128,definitions/* tileSize */.CQ+128))return t;templateUtils_f.setPixelMargin(e),templateUtils_f.reset(TileClipper/* GeometryType */.dC.Polygon);let n=0;for(let o=0;o<t.lengths.length;o++){const e=t.lengths[o];let r=t.coords[2*(0+n)],s=t.coords[2*(0+n)+1];templateUtils_f.moveTo(r,s);for(let o=1;o<e;o++)r=t.coords[2*(o+n)],s=t.coords[2*(o+n)+1],templateUtils_f.lineTo(r,s);templateUtils_f.close(),n+=e}const l=templateUtils_f.result(!1);if(!l)return null;const i=[],c=[];for(const o of l){let t=0;for(const e of o)c.push(e.x),c.push(e.y),t++;i.push(t)}return new OptimizedGeometry/* default */.A(i,c)}function templateUtils_d(t,e){templateUtils_c.setPixelMargin(e);const n=templateUtils_c,r=-e,l=definitions/* tileSize */.CQ+e;let i=[],f=!1;if(!t.nextPath())return null;let u=t.pathLength(),h=!0;for(;h;){t.seekPathStart();const e=[];if(!t.pathSize)return null;n.reset(TileClipper/* GeometryType */.dC.LineString),t.nextPoint();let s=t.x,c=t.y;if(f)n.moveTo(s,c);else{if(s<r||s>l||c<r||c>l){f=!0;continue}e.push({x:s,y:c})}let a=!1;for(;t.nextPoint();)if(s=t.x,c=t.y,f)n.lineTo(s,c);else{if(s<r||s>l||c<r||c>l){a=!0;break}e.push({x:s,y:c})}if(a)f=!0;else{if(f){const t=n.resultWithStarts();if(t)for(const e of t)i.push({...e,pathLength:u})}else i.push({line:e,start:0,pathLength:u});h=t.nextPath(),u=h?t.pathLength():0,f=!1}}return i=i.filter((t=>t.line.length>1)),0===i.length?null:i}templateUtils_f.setExtent(definitions/* tileSize */.CQ),templateUtils_c.setExtent(definitions/* tileSize */.CQ);


/***/ }),

/***/ 40317:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89423);
/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84852);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _webgl_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35644);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8595);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80976);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(33056);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(t,s){this._boundPart=null,this.vertexBuffers=new Map,this.indexBuffers=new Map,this.groups=[];for(const o in s.vertex){const{data:i,attributes:n}=s.vertex[o],f=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferObject */ .g.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,i);this.vertexBuffers.set(o,{buffer:f,attributes:n})}for(const o in s.index){const{data:i}=s.index[o],n=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferObject */ .g.createIndex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,i);this.indexBuffers.set(o,{buffer:n})}for(const e of s.groups)this.groups.push({...e,vertexArrays:new Map});this.parts=s.parts}bind(e,r,s){this._boundPart=s;const{group:o}=this.parts[this._boundPart],i=this.groups[o];if(!i)throw new Error(`Missing group ${o}.`);let n=i.vertexArrays.get(r.stringHash);if(!n){const s=new Set(r.locations.keys()),o=i.index?this.indexBuffers.get(i.index)?.buffer:null,f=new Map,a=new Map;for(const[e,{buffer:r,attributes:t}]of this.vertexBuffers){const o=t.filter((e=>s.has(e.name)));o.length>0&&(f.set(e,o),a.set(e,r))}n=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexArrayObject */ .Z(e,r.locations,f,a,o),i.vertexArrays.set(r.stringHash,n)}e.bindVAO(n)}draw(e){if(null==this._boundPart)throw new Error("Mesh.bind() has not been called.");const{start:r,count:t}=this.parts[this._boundPart],{group:o}=this.parts[this._boundPart],{primitive:i,index:n}=this.groups[o];if(n){const o=this.indexBuffers.get(n);if(!o)throw new Error(`Missing index buffer "${n}".`);const{indexType:f}=o.buffer;if(!f)throw new Error("Buffer type error.");e.drawElements(i,t,f,r*_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .dataSizeInBytes */ .I[f])}else e.drawArrays(i,r,t)}unbind(e){this._boundPart=null,e.bindVAO(null)}destroy(){for(const{vertexArrays:e}of this.groups)for(const[r,t]of e)t.disposeVAOOnly();for(const{buffer:e}of this.vertexBuffers.values())e.dispose();for(const{buffer:e}of this.indexBuffers.values())e.dispose()}}


/***/ }),

/***/ 2019:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33056);
/* harmony import */ var _Mesh_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40317);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o={position:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2}};class s extends _Mesh_js__WEBPACK_IMPORTED_MODULE_1__/* .Mesh */ .e{static create(e,r){const i=[];let{stride:o}=r;if(null==o){o=0;for(const[e,{count:i,type:n,offset:s}]of Object.entries(r.layout)){if(null!=s)throw new Error("Stride cannot be computed automatically when attribute offsets are supplied explicitly.");o+=i*_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .dataSizeInBytes */ .I[n]}}let a=0;for(const[s,{count:d,offset:f,type:m,normalized:x}]of Object.entries(r.layout)){null!=f&&(a=f);const e=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexElementDescriptor */ ._(s,d,m,a,o,null!=x&&x,0);i.push(e),a+=d*_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .dataSizeInBytes */ .I[m]}const l={primitive:r.primitive};null!=r.index&&(l.index="indexData");let{count:u}=r;if(null==u&&(u=r.index?r.index.length:r.vertex.byteLength/o,Math.floor(u)!==u))throw new Error(`The byte length of vertex data must be an exact multiple of the stride, which is ${o}.`);const c={start:0,count:u,group:0,primitive:r.primitive},p={vertex:{vertexData:{data:r.vertex,attributes:i}},parts:[c],groups:[l]};return null!=r.index&&(p.index={indexData:{data:r.index}}),new s(e,p,r.layout)}static fromVertexStream(t,e){return s.create(t,{primitive:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,vertex:new Uint16Array(e),layout:o})}constructor(t,e,r){super(t,e),this._spec=r}bind(t,e,r=0){super.bind(t,e,r)}}


/***/ }),

/***/ 33056:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const T={[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.HALF_FLOAT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.FLOAT]:4};


/***/ }),

/***/ 55429:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Kl: () => (/* binding */ b),
/* harmony export */   M9: () => (/* binding */ s),
/* harmony export */   fG: () => (/* binding */ h),
/* harmony export */   fw: () => (/* binding */ y),
/* harmony export */   jT: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony exports i16, i32, i8, i8816to32, i8888to32, numTo32, u16, u32, u32to4Xu8, u4u4to8, u8 */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=new Float32Array(1),t=new Uint32Array(n.buffer);function r(n,t,r){return Math.round(Math.max(Math.min(n,r),t))}function u(n){return r(n,-128,127)}function o(n){return r(n,-32768,32767)}function e(n){return r(n,-2147483648,2147483647)}function c(n){return r(n,0,255)}function f(n){return r(n,0,65535)}function i(n){return r(n,0,4294967295)}function a(r){return n[0]=r,t[0]}function h(r){return t[0]=r,n[0]}function l(n){return[255&n,(65280&n)>>>8,(16711680&n)>>>16,(4278190080&n)>>>24]}function M(n,t){return 15&n|(15&t)<<4}function s(n,t){return 65535&n|t<<16}function m(n,t,r,u){return 255&n|(255&t)<<8|(255&r)<<16|u<<24}function w(n,t,r){return 255&n|(255&t)<<8|r<<16}function x(n){return 0|n}function y(n){const t=a(n),r=t>>>31;let u=t>>>23&255,o=8388607&t;return u-=127,u>15?r<<15|31744:u<-25?0:(u<-14&&(o+=8388608,o/=2**(-14-u),u=-15),u+=15,o/=8192,o=A(o,1023),r<<15|u<<10|o)}function A(n,t){const r=Math.floor(n),u=n-r;return r<t&&(u>.5||.5===u&&r%2==1)?r+1:r}function b(n){let t=n>>>15,r=n>>10&31,u=1023&n;return t=t?-1:1,r-=15,u/=1024,r>-15?u+=1:r=-14,t*2**r*u}


/***/ }),

/***/ 47381:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Y7: () => (/* binding */ I),
  HS: () => (/* binding */ v),
  mm: () => (/* binding */ w),
  A: () => (/* binding */ j),
  k2: () => (/* binding */ P),
  ZA: () => (/* binding */ C),
  E8: () => (/* binding */ K),
  hF: () => (/* binding */ m),
  C5: () => (/* binding */ f),
  uK: () => (/* binding */ _),
  Pi: () => (/* binding */ g)
});

// UNUSED EXPORTS: builtin, transformFeedback

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js
var glsl = __webpack_require__(39689);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/GlslGraphWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=5;function t(e,t,r){const i=t.split("\n");for(const n of i)if(n.trim().length){{let t="";null!=r&&(t+=`/*id:${r??"000"}*/   `),e.body+=t.padEnd(14)}e.body+=" ".repeat(e.indent)+n+"\n"}}class GlslGraphWriter_r{write(e){for(const t of e.rootOutputNodes())e.shouldPruneOutputNode(t)||(t.variableName=this._write(e,t.node));return e}_createVarName(e,t){let r="";return"boolean"!=typeof t&&"number"!=typeof t&&t.debugInfo.name&&(r=`${t.debugInfo.name}_`),`${r}v${e.varCount++}`}_write(e,t,r=!1){if("number"==typeof t)return t.toString();if("boolean"==typeof t)return t.toString();let i=e.getEmit(t);if(i)return i;switch(t.shaderType){case"scope-node":i=this._writeScopeNode(e,t);break;case"primitive-node":i=this._writePrimitiveNode(e,t,r);break;case"function-node":i=this._writeFunctionNode(e,t);break;case"property-access-node":i=this._writePropertyAccessNode(e,t);break;case"property-access-2d-node":i=this._writePropertyAccess2DNode(e,t);break;case"text-node":i=t.text;break;case"block-node":i=this._writeBlockNode(e,t);break;case"condition-node":i=this._writeConditionNode(e,t)}return e.setEmit(t,i),i}_writeScopeNode(e,r){const i=new r.child.constructor;i.setDebugName(r.debugInfo.name);const n=this._write(e,i,!0);t(e,`{ /*ScopeStart: ${r.uid} ${r.debugInfo.name}*/`),e.indent+=2;return t(e,`${n} = ${this._write(e,r.child)};`),e.indent-=2,t(e,`} /*ScopeEnd: ${r.uid} ${r.debugInfo.name}*/`),n}_writeConditionNode(e,r){const i=new r.ifTrue.constructor,n=this._write(e,i,!0);t(e,`if (${this._write(e,r.condition)}) {`),e.indent+=2;const o=e.createSubgraphContext(),s=this._write(o,r.ifTrue);if(e.body+=o.body,s&&t(e,`${n} = ${s};`),e.indent-=2,t(e,"}"),r.ifFalse){t(e,"else {"),e.indent+=2;const i=e.createSubgraphContext(),o=this._write(i,r.ifFalse);e.body+=i.body,o&&t(e,`${n} = ${o};`),e.indent-=2,t(e,"}")}return n}_writeBlockNode(e,r){const{captureList:i,generator:n,returnType:o}=r,s={};for(const t in i){if(!i[t])continue;const r=this._write(e,i[t]);s[t]=r}const d=new o,c=this._write(e,d,!0);if(s.out=c,r.subgraph){const t=e.createSubgraphContext(),i=this._write(t,r.subgraph.child),n=t.body;s.subgraph={varName:i,body:n}}const a=n(s);return t(e,"{\n"),e.indent+=2,t(e,a),e.indent-=2,t(e,"}\n"),c}_writePropertyAccessNode(e,t){const r=this._write(e,t.target);if("string"==typeof t.property&&t.property.includes("["))return`${r}${t.property}`;if("string"!=typeof t.property){return`${r}[${this._write(e,t.property)}]`}return`${r}.${t.property}`}_writePropertyAccess2DNode(e,t){return`${this._write(e,t.target)}[${this._write(e,t.x)}][${this._write(e,t.y)}]`}_writeFunctionNode(r,i){const n=i.returnType.type;if(i.isInfix){const[o,s]=i.children.map((e=>this._write(r,e))),d=this._createVarName(r,i);return t(r,`${n.padEnd(e)} ${d} = ${o} ${i.token} ${s};`,i.uid),d}const o=i.children.map((e=>this._write(r,e))).join(", "),s=this._createVarName(r,i);return t(r,`${n.padEnd(e)} ${s} = ${i.token}(${o});`,i.uid),s}_writePrimitiveNode(r,i,n=!1){const o=r.getInput(i);if(o)return o.isUsed=!0,o.variableName;const s=1===i.children.length&&i.children[0]?.type===i.type;if(!i.isMutable&&(i.isImplicit||s))return this._write(r,i.children[0]);const d=this._createVarName(r,i);if(n)return t(r,`${i.type.padEnd(e)} ${d};`,i.uid),d;const c=!i.debugInfo.name&&!i.isMutable;if(c&&"float"===i.type&&"number"==typeof i.children[0])return Number.isInteger(i.children[0])?i.children[0].toFixed(1):i.children[0].toString();if(c&&"int"===i.type&&"number"==typeof i.children[0]&&Number.isInteger(i.children[0]))return i.children[0].toString();const a=i.children.map((e=>this._write(r,e))).join(", ");return"array"===i.type?(t(r,`${i.type.padEnd(e)} ${d} = [${a}];`,i.uid),d):c?`${i.type}(${a})`:(t(r,`${i.type.padEnd(e)} ${d} = ${i.type}(${a});`,i.uid),d)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphNode.js
var ShaderGraphNode = __webpack_require__(52954);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShaderGraphContext_t{constructor(e,t,d){this.variableName=e,this.variableInputType=t,this.node=d,this.type="shader-input",this.isUsed=!1}clone(){return new ShaderGraphContext_t(this.variableName,this.variableInputType,(0,ShaderGraphNode/* cloneShaderNode */.vA)(this.node))}}class d{constructor(e,t,d){this.outVariableName=e,this.outVariableType=t,this.node=d,this.type="shader-output"}clone(){const t=new d(this.outVariableName,this.outVariableType,(0,ShaderGraphNode/* cloneShaderNode */.vA)(this.node));return t.variableName=this.variableName,t}}class ShaderGraphContext_o{static createVertex(e,a,n,i,r,s){const u=[];for(const d in e){const o=e[d],a=n.get(d);a?u.push(new ShaderGraphContext_t(a,"builtin",o)):u.push(new ShaderGraphContext_t("a_"+d,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const p=[];for(const t in a){const e=a[t];"glPosition"===t?p.push(new d("gl_Position","builtin",e)):"glPointSize"===t?p.push(new d("gl_PointSize","builtin",e)):p.push(new d("v_"+t,"out",e))}return new ShaderGraphContext_o(u,p,r,s)}static createFragment(e,a,n,i,r,s){const u=[],p=Array.from(r.rootOutputNodes());for(const d in e){const o=e[d],a=n.get(d);if(a){u.push(new ShaderGraphContext_t(a,"builtin",o));continue}const i=p.find((e=>e.node===o));i&&u.push(new ShaderGraphContext_t(i.outVariableName,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const h=[];for(const t in a){const e=a[t],o=n.get(t);"discard"===t?h.push(new d(null,"discard",e)):o?h.push(new d(o,"builtin",e)):h.push(new d(t,"out",e))}return new ShaderGraphContext_o(u,h,s)}constructor(e,t,d,o){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const a of e)this._inputShaderTypesByNodeUid.set(a.node.uid,a);this._outputShaderTypes=t,this._transformFeedbackBindings=d,this._transformFeedbackNames=new Set(d.map((e=>"v_"+e.propertyKey))),this._usedInFragmentShader=o}shouldPruneOutputNode(e){return!!this._usedInFragmentShader&&("builtin"!==e.outVariableType&&(!this._transformFeedbackNames.has(e.outVariableName)&&!this._usedInFragmentShader.has(e.node.uid)))}setEmit(e,t){this._nodeEmitMap.set(e.uid,t)}getEmit(e){return this._nodeEmitMap.get(e.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(e){return this._inputShaderTypesByNodeUid.get(e.uid)}*rootOutputNodes(){for(const e of this._outputShaderTypes)yield e}*nodes(){const e=[];for(const t of this._outputShaderTypes.values())e.push(t.node);for(;e.length;){const t=e.pop();"number"!=typeof t&&"boolean"!=typeof t&&e.push(...t.children.filter(Boolean)),yield t}}*nodesOfTypeOrFunction(){for(const e of this.nodes())"number"!=typeof e&&"boolean"!=typeof e&&(yield e)}createSubgraphContext(){const e=this.clone();return e.body="",e.indent=this.indent+2,e._nodeEmitMap=new Map(this._nodeEmitMap),e}clone(){const e=new ShaderGraphContext_o([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return e._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,e.indent=this.indent,e.body=this.body,e.varCount=this.varCount,e._nodeEmitMap=this._nodeEmitMap,e}insertVertexShader(e){e.vertex.code.add(""),this._insertInputs(e,"vertex"),e.vertex.code.add(""),e.vertex.code.add("// OUTPUTS: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this.rootOutputNodes()){const d="builtin"===t.outVariableType;this.shouldPruneOutputNode(t)||(d?e.vertex.code.add(`// ${t.outVariableType.padEnd(7)} ${t.node.type.padEnd(9)} ${t.outVariableName};`):e.vertex.code.add(`${t.outVariableType.padEnd(10)} ${t.node.type.padEnd(9)} ${t.outVariableName};`))}e.vertex.code.add(""),e.vertex.code.add("void main() {"),e.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const t of this.rootOutputNodes())this.shouldPruneOutputNode(t)||e.vertex.code.add(`  ${t.outVariableName} = ${t.variableName};`);e.vertex.code.add("}")}insertFragmentShader(e){this._insertInputs(e,"fragment"),e.fragment.code.add(""),e.fragment.code.add("// OUTPUTS: "),e.fragment.code.add("// --------------------------------------------------------- ");let t=0;for(const d of this.rootOutputNodes()){"builtin"===d.outVariableType?e.fragment.code.add(`// ${d.outVariableType.padEnd(7)} ${d.node.type.padEnd(9)} ${d.outVariableName};`):e.outputs.add(d.outVariableName,d.node.type,t++)}e.fragment.code.add(""),e.fragment.code.add("void main() {"),e.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const d of this.rootOutputNodes())"discard"===d.outVariableType?(e.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),e.fragment.code.add(`  if (${d.variableName}) {`),e.fragment.code.add("    discard;"),e.fragment.code.add("  }"),e.fragment.code.add("  ")):e.fragment.code.add(`  ${d.outVariableName} = ${d.variableName};`);e.fragment.code.add("}")}_insertInputs(e,t){e[t].code.add("// INPUTS: "),e[t].code.add("// --------------------------------------------------------- ");for(const d of this.inputs())d.isUsed&&"builtin"!==d.variableInputType&&("array"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}];`):"array-2d"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}]; // Emulated 2D Array. Not supported by ES3.0`):e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.type.padEnd(9)} ${d.variableName};`))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js + 1 modules
var TypedShaderProgram = __webpack_require__(51487);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderBuilder.js
var ShaderBuilder = __webpack_require__(96028);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function GraphShaderModule_d(t){return new t}function h(t,e,r){const o=t.constructor[e]??[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:o.slice()}),t.constructor[e].push(r)}function f(t,e){return(r,o)=>{h(r,"locations",{typeCtor:e,propertyKey:o,parameterIndex:null,index:t})}}const l=t=>(e,r)=>{h(e,"builtins",{builtin:t,propertyKey:r})},m=t=>(e,r,o)=>{h(e,"inputs",{inputCtor:t,propertyKey:r,parameterIndex:o})},g=t=>(e,r)=>{h(e,"uniforms",{typeCtor:t,propertyKey:r})},_=t=>(e,r)=>{h(e,"options",{typeCtor:t,propertyKey:r})},K=(t,e)=>{h(t,"defines",{propertyKey:e})};function x(t){return(e,r)=>{h(e,"transformFeedbackBindings",{propertyKey:r,parameterIndex:null,index:t})}}const b=(t,e)=>(r,o)=>{r.constructor.builtins.push({builtin:t,propertyKey:o,typeCtor:e})};class C{static{this.builtins=[]}}(0,tslib_es6._)([b("gl_VertexID",glsl/* Int */.Ai)],C.prototype,"glVertexID",void 0);class I{}class v{static{this.builtins=[]}}(0,tslib_es6._)([b("gl_FragCoord",glsl/* Vec4 */.Zb)],v.prototype,"glFragCoord",void 0),(0,tslib_es6._)([b("gl_PointCoord",glsl/* Vec2 */.ZY)],v.prototype,"glPointCoord",void 0);class w{}(0,tslib_es6._)([l("gl_FragDepth")],w.prototype,"glFragDepth",void 0);class P{constructor(){this.type="uniform-group"}get _uniforms(){return this.constructor.uniforms??[]}}class j{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){return this.fragmentInput.inputCtor.transformFeedbackBindings??[]}get locations(){return[...this.vertexInput.inputCtor.locations,...this.computeInput?.inputCtor.locations??[]]}get locationsMap(){const t=new Map,r=new Set;for(const o of this.locations)r.has(o.index)?Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering",`Unable to assigned attribute ${o.propertyKey} to ${o.index}. Index already in use`,{locationsMap:t}):(t.set(o.propertyKey,o.index),r.add(o.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((([t,e])=>`${t}.${e}`)).join("."),o=(0,string/* numericHash */.Wm)(e),n=this.computeAttributes;this._locationInfo={hash:o,stringHash:e,locations:t,computeAttributeMap:n}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){return this._shaderModuleClass.defines??[]}get _options(){return this._shaderModuleClass.options??[]}get _uniforms(){return this._shaderModuleClass.uniforms??[]}getProgram(t,e,r,o){try{const{vertex:n,fragment:s,uniformBindings:i}=this._generateShaders(t,e,r,o);return new TypedShaderProgram/* TypedShaderProgram */.K(n,s,this.renamedLocationsMap,this.locationInfo,i,this.transformFeedbackBindings)}catch(n){return new TypedShaderProgram/* TypedShaderProgram */.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const r=this._uniforms.find((e=>e.propertyKey===t));if(!r)throw new Error(`Unable to find uniform class type for property: ${t}`);return{type:"required",className:r.typeCtor}}getShaderKey(t,e,r,o){const n=Object.keys(t).map((e=>`${e}.${t[e]}`)).join("."),s=Object.keys(r).map((t=>`${t}.${r[t]}`)).join("."),i=Object.keys(o).map((t=>`${t}.${o[t]}`)).join("."),p=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return`${this.type}.${n}.${s}.${i}.${p}`}_generateShaders(t,e,r,o){const n=[];this._setDefines(r),this._setOptionalUniforms(n,e),this._setRequiredUniforms(n);const s=this._hydrateVertexInput(o),i=this._injectPackPrecisionFactor(s,t),c=this._hydrateComputeInput(),y=c&&this._injectComputePackPrecisionFactor(c,t),d=this.vertex(i,y),h=this._hydrateFragmentInput(d),f=this.fragment(h),l=new Set;for(const p in f){const t=f[p];(0,ShaderGraphNode/* setReachableUids */.rz)(l,t)}const m=this._getVertexInputBuiltins(),g=ShaderGraphContext_o.createVertex({...s,...c},d,m,n,this.transformFeedbackBindings,l);(new GlslGraphWriter_r).write(g);const _=this._getFragmentInputBuiltins(f);_.set("glPointCoord","gl_PointCoord");const K=ShaderGraphContext_o.createFragment(h,f,_,n,g,this.transformFeedbackBindings);(new GlslGraphWriter_r).write(K);const x=this._createShaderBuilder(g,K),b=x.generate("vertex"),C=x.generate("fragment");return this.logShader&&(console.log(b),console.log(C)),{vertex:b,fragment:C,uniformBindings:n}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const r of this._options){e[r.propertyKey]?this[r.propertyKey]=this._hydrateUniformGroup(t,r):this[r.propertyKey]=null}}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const r=new(0,e.typeCtor);for(const o of r._uniforms??[]){const n=GraphShaderModule_d(o.typeCtor),s=`u_${e.propertyKey}_${o.propertyKey}`,i=n.type,p=[e.propertyKey,o.propertyKey].join(".");if("type"in o.typeCtor&&"array"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else if("type"in o.typeCtor&&"array-2d"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformHydrated:n});r[o.propertyKey]=n}return r}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,r=e.locations.reduce(((e,r)=>!1===t[r.propertyKey]?e:{...e,[r.propertyKey]:GraphShaderModule_d(r.typeCtor)}),{});for(const{propertyKey:o,typeCtor:n}of e.builtins){const t=GraphShaderModule_d(n);r[o]=t}return r}_hydrateComputeInput(){if(null==this.computeInput)return null;return this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:GraphShaderModule_d(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const r={};for(const n in t){const s=t[n],i=e[n];if(i){if("float"!==s.type&&"vec2"!==s.type&&"vec3"!==s.type&&"vec4"!==s.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${s.type}`);r[n]=s.divide(new glsl/* Float */.nt(i))}else r[n]=s}return r}_injectComputePackPrecisionFactor(t,e){const r={},n=new Map;for(const o in this.computeAttributes)for(const t of this.computeAttributes[o]??[])n.set(t,o);for(const s in t){const i=t[s],p=n.get(s);if(!p)continue;const a=e[p];if(a){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${i.type}`);r[s]=i.divide(new glsl/* Float */.nt(a))}else r[s]=i}return r}_hydrateFragmentInput(t){const e={};for(const r in t)e[r]=t[r];for(const{propertyKey:r,typeCtor:o}of v.builtins){const t=GraphShaderModule_d(o);e[r]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:r,propertyKey:o}of t.builtins)e.set(o,r);return e}_getFragmentInputBuiltins(t){const e=t.constructor,r=new Map;for(const o of e.builtins??[])r.set(o.propertyKey,o.builtin);return r}_createShaderBuilder(t,e){const r=new ShaderBuilder/* ShaderBuilder */.N5;return this._insertDebugInfo(r),t.insertVertexShader(r),e.insertFragmentShader(r),r}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`);t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`)}}


/***/ }),

/***/ 52954:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XL: () => (/* binding */ u),
/* harmony export */   aw: () => (/* binding */ a),
/* harmony export */   ff: () => (/* binding */ o),
/* harmony export */   rR: () => (/* binding */ p),
/* harmony export */   rz: () => (/* binding */ e),
/* harmony export */   vA: () => (/* binding */ i),
/* harmony export */   vL: () => (/* binding */ r),
/* harmony export */   zg: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports ShaderNode, ShaderScopeNode, ShaderTextNode */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}function e(t,e){const s=[];for(s.push(e);s.length;){const e=s.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)s.push(t)}}}class s{constructor(){this.uid=s.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}static{this.NodeCount=0}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(e){return e=t(e),this._debugName=e,this.isImplicit&&this.children[0]instanceof s&&this.children[0].setDebugName(e),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function i(t){return"object"==typeof t?t.clone():t}class r extends s{constructor(){super(...arguments),this.shaderType="primitive-node"}}class n extends s{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new n(i(this.child));return this.cloneInto(t),t}}class h extends s{constructor(t){super(),this.text=t,this.shaderType="text-node"}get children(){return[]}clone(){const t=new h(this.text);return this.cloneInto(t),t}}class c extends s{constructor(t,e,s){super(),this.property=t,this.target=e,this.returnType=s,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new c(this.property,i(this.target),this.returnType);return this.cloneInto(t),t}}class o extends s{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.target=s,this.returnType=i,this.shaderType="property-access-2d-node"}get children(){return[this.target,this.x,this.y]}clone(){const t=new o(this.x,this.y,i(this.target),this.returnType);return this.cloneInto(t),t}}class u extends s{constructor(t,e,s){super(),this.condition=t,this.ifTrue=e,this.ifFalse=s,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=i(this.ifTrue),e=this.ifFalse?i(this.ifFalse):null,s=new u(this.condition,t,e);return this.cloneInto(s),s}}class p extends s{constructor(t,e,s,i){super(),this.captureList=t,this.returnType=e,this.generator=i,this.shaderType="block-node",s&&(this.subgraph=new n(s))}get children(){return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(this.subgraph??[])}clone(){const t={};for(const s in this.captureList)t[s]=i(this.captureList[s]);const e=new p(t,this.returnType,this.subgraph?i(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class a extends s{constructor(t,e,s,i,r,n=!1){super(),this.token=t,this._children=e,this.isInfix=s,this.isPropertyAccess=i,this.returnType=r,this.isTernary=n,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new a(this.token,this._children.map(i),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}


/***/ }),

/***/ 39689:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $5: () => (/* binding */ Yt),
/* harmony export */   $I: () => (/* binding */ ct),
/* harmony export */   $T: () => (/* binding */ Rn),
/* harmony export */   AU: () => (/* binding */ Ve),
/* harmony export */   Ai: () => (/* binding */ W),
/* harmony export */   Bw: () => (/* binding */ Re),
/* harmony export */   Cq: () => (/* binding */ Z),
/* harmony export */   Ec: () => (/* binding */ Ct),
/* harmony export */   F8: () => (/* binding */ sn),
/* harmony export */   FM: () => (/* binding */ Ut),
/* harmony export */   Gb: () => (/* binding */ St),
/* harmony export */   HQ: () => (/* binding */ Wt),
/* harmony export */   I8: () => (/* binding */ Jt),
/* harmony export */   Io: () => (/* binding */ we),
/* harmony export */   L0: () => (/* binding */ un),
/* harmony export */   LC: () => (/* binding */ _t),
/* harmony export */   LI: () => (/* binding */ nn),
/* harmony export */   MM: () => (/* binding */ Gt),
/* harmony export */   Ml: () => (/* binding */ an),
/* harmony export */   My: () => (/* binding */ B),
/* harmony export */   Ny: () => (/* binding */ nt),
/* harmony export */   Om: () => (/* binding */ ye),
/* harmony export */   PM: () => (/* binding */ ln),
/* harmony export */   RI: () => (/* binding */ ze),
/* harmony export */   RZ: () => (/* binding */ hn),
/* harmony export */   Rm: () => (/* binding */ qe),
/* harmony export */   S8: () => (/* binding */ Ae),
/* harmony export */   Sj: () => (/* binding */ Rt),
/* harmony export */   T9: () => (/* binding */ Ce),
/* harmony export */   TF: () => (/* binding */ on),
/* harmony export */   Tk: () => (/* binding */ zt),
/* harmony export */   U: () => (/* binding */ rt),
/* harmony export */   US: () => (/* binding */ yn),
/* harmony export */   Uo: () => (/* binding */ Lt),
/* harmony export */   Wh: () => (/* binding */ st),
/* harmony export */   Xe: () => (/* binding */ Xt),
/* harmony export */   YN: () => (/* binding */ Zt),
/* harmony export */   ZY: () => (/* binding */ C),
/* harmony export */   Zb: () => (/* binding */ Y),
/* harmony export */   Zc: () => (/* binding */ ot),
/* harmony export */   _S: () => (/* binding */ cn),
/* harmony export */   _i: () => (/* binding */ q),
/* harmony export */   aX: () => (/* binding */ Ht),
/* harmony export */   eB: () => (/* binding */ X),
/* harmony export */   eR: () => (/* binding */ ht),
/* harmony export */   fV: () => (/* binding */ ut),
/* harmony export */   gn: () => (/* binding */ oe),
/* harmony export */   hC: () => (/* binding */ qt),
/* harmony export */   j1: () => (/* binding */ Tt),
/* harmony export */   jc: () => (/* binding */ Te),
/* harmony export */   jh: () => (/* binding */ Ye),
/* harmony export */   jk: () => (/* binding */ Xe),
/* harmony export */   ln: () => (/* binding */ lt),
/* harmony export */   lw: () => (/* binding */ Dt),
/* harmony export */   mk: () => (/* binding */ se),
/* harmony export */   n7: () => (/* binding */ We),
/* harmony export */   nP: () => (/* binding */ pn),
/* harmony export */   nf: () => (/* binding */ Pt),
/* harmony export */   nt: () => (/* binding */ _),
/* harmony export */   oN: () => (/* binding */ xe),
/* harmony export */   om: () => (/* binding */ It),
/* harmony export */   or: () => (/* binding */ At),
/* harmony export */   p6: () => (/* binding */ Ue),
/* harmony export */   pu: () => (/* binding */ Bt),
/* harmony export */   qE: () => (/* binding */ ue),
/* harmony export */   qR: () => (/* binding */ ne),
/* harmony export */   rY: () => (/* binding */ ce),
/* harmony export */   rf: () => (/* binding */ ie),
/* harmony export */   tn: () => (/* binding */ Qt),
/* harmony export */   w0: () => (/* binding */ ft),
/* harmony export */   wH: () => (/* binding */ jt),
/* harmony export */   x: () => (/* binding */ J),
/* harmony export */   yH: () => (/* binding */ re),
/* harmony export */   yI: () => (/* binding */ he),
/* harmony export */   ym: () => (/* binding */ fn),
/* harmony export */   z7: () => (/* binding */ U),
/* harmony export */   ze: () => (/* binding */ xt),
/* harmony export */   zi: () => (/* binding */ Ge)
/* harmony export */ });
/* unused harmony exports BVec2, BVec3, BVec4, IVec3, IVec4, UInt, UVec2, UVec3, UVec4, _or, _xor, add, all, any, cross, dFdx, dFdy, definePropertyAccess, definePropertyAccess2D, degrees, determinant, divide, equalComponent, exp2, faceforward, findIndex, floatBitsToInt, floatBitsToUint, fwidth, getTypeElementLengthForType, glslFindIndex, greaterThanComponent, greaterThanEqualComponent, intBitsToFloat, inverse, inversesqrt, isinf, isnan, lessThanComponent, lessThanEqualComponent, mat2, mat4, matrixCompMult, modf, namedScope, notEqualComponent, outerProduct, packHalf2x16, packSnorm2x16, packUnorm2x16, radians, reflect, refract, roundEven, subtract, texelFetchOffset, texture, textureGrad, textureGradOffset, textureLod, textureLodOffset, textureOffset, textureProj, textureProjGrad, textureProjGradOffset, textureProjLod, textureProjLodOffset, textureProjOffset, textureSize, transformFloatToInt, transformFloatToUInt, transformIntToFloat, transformTypeToBooleanType, transformUIntToFloat, transpose, trunc, uintBitsToFloat, unpackHalf2x16, unpackSnorm2x16, unpackUnorm2x16, when */
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52954);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var h,l,a,f,p,d,w,y,m,v,b,x,I,g;function E(t){switch(t.type){case"uint":return _;case"uvec2":return C;case"uvec3":return X;case"uvec4":return Y;default:throw new Error("Found unexpected type")}}function $(t){switch(t.type){case"float":return G;case"vec2":return H;case"vec3":return A;case"vec4":return V;default:throw new Error("Found unexpected type")}}function z(t){switch(t.type){case"int":return _;case"ivec2":return C;case"ivec3":return X;case"ivec4":return Y;default:throw new Error("Found unexpected type")}}function T(t){switch(t.type){case"float":return W;case"vec2":return Z;case"vec3":return tt;case"vec4":return et;default:throw new Error("Found unexpected type")}}function N(t){switch(t.type){case"bool":case"float":case"int":case"uint":return J;case"bvec2":case"vec2":case"ivec2":case"uvec2":return K;case"bvec3":case"vec3":case"ivec3":case"uvec3":return L;case"bvec4":case"vec4":case"ivec4":case"uvec4":return Q;default:throw new Error("Unable to handle type")}}function D(t){switch(t.type){case"bool":case"bvec2":case"bvec3":case"bvec4":return J;case"float":case"vec2":case"vec3":case"vec4":return _;case"int":case"ivec2":case"ivec3":case"ivec4":return W;case"uint":case"uvec2":case"uvec3":case"uvec4":return G;default:throw new Error("Unable to handle type")}}function F(t){switch(t.type){case"float":case"int":case"uint":case"bool":case"sampler2D":return 1;case"vec2":case"ivec2":case"uvec2":case"bvec2":return 2;case"vec3":case"ivec3":case"uvec3":case"bvec3":return 3;case"vec4":case"ivec4":case"uvec4":case"bvec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;case"array":case"array-2d":return t.size*F(t.elementType)}}function k(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>it[t]));throw new Error("Unable to find type family")}function M(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>M(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=k(t.type);return dt(t,n,e[n.length-1])}}})}function S(t){return new Proxy(t,{construct:(t,e,n)=>M(new t(...e))})}function j(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return dt(t,`[${e}]`,t.elementType.constructor)}}})}function R(t){return new Proxy(t,{construct:(t,e,n)=>j(new t(...e))})}class P extends Error{}let B=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{h=this}static{this.type="array"}constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new h(this.elementType,this.size);return super.cloneInto(t),t}get(t,e){const n=new W(t),r=null!=e?new W(e):null;if(null!=r){return wt(this,n,r,D(this.elementType.constructor))}return dt(this,n,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return Et(this,t,e,n)}glslFindIndex(t,e,n){return $t(this,t,e,n)}static ofType(t,e){const n={construct:(n,r)=>new h(new t,e)};return new Proxy(h,n)}};B=h=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([R],B);class q extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="array-2d"}constructor(t,e,n,r=!1){super(),this.elementType=t,this.xSize=e,this.ySize=n,this.isRowMajor=r,this.children=[],this.type="array-2d"}clone(){const t=new q(this.elementType,this.xSize,this.ySize,this.isRowMajor);return super.cloneInto(t),t}get size(){return this.xSize*this.ySize}get(t,e){return this.isRowMajor?this._getRowMajor(t,e):this._getColumnMajor(t,e)}_getColumnMajor(t,e){const n=new W(t);return dt(this,new W(e).add(n.multiply(this.xSize)),this.elementType.constructor)}_getRowMajor(t,e){const n=new W(t),r=new W(e);return dt(this,n.add(r.multiply(this.ySize)),this.elementType.constructor)}static ofType(t,e,n,r=!1){return new Proxy(B,{construct:(c,i)=>new q(new t,e,n,r)})}}class U extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}static{this.type="sampler2D"}clone(){const t=new U;return t.children=this.children.map(_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA),super.cloneInto(t),t}}class _ extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="float"}constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new _((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}}let C=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{l=this}static{this.type="vec2"}constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new l((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){throw new P}get 3(){throw new P}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};C=l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],C);let X=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{a=this}static{this.type="vec3"}constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){throw new P}clone(){const t=new a((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};X=a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],X);let Y=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{f=this}static{this.type="vec4"}constructor(t,e,n,r){super(),this.type="vec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new f((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){return dt(this,"[3]",_)}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};Y=f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Y);let G=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{p=this}static{this.type="uint"}constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new p((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}};G=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],G);let H=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{d=this}static{this.type="uvec2"}constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new d((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};H=d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],H);let A=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{w=this}static{this.type="uvec3"}constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new w((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};A=w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],A);let V=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{y=this}static{this.type="uvec4"}constructor(t,e,n,r){super(),this.type="uvec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new y((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};V=y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],V);class J extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="bool"}constructor(t){super(),this.type="bool",this.children=[t]}and(t){return Lt(this,t)}or(t){return At(this,t)}xor(t){return Jt(this,t)}clone(){const t=new J((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}}let K=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{m=this}static{this.type="bvec2"}constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new m((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};K=m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],K);let L=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{v=this}static{this.type="bvec3"}constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new v((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};function O(t,e){if("number"==typeof t){return new e(t)}return t}L=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],L);let Q=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{b=this}static{this.type="bvec4"}constructor(t,e,n,r){super(),this.type="bvec4",this.children=[t,e,n,r].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new b((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};Q=b=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Q);class W extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="int"}constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return Dt(this,O(t,W))}add(t){return kt(this,O(t,W))}subtract(t){return Mt(this,O(t,W))}divide(t){return Ft(this,O(t,W))}clone(){const t=new W((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}}let Z=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{x=this}static{this.type="ivec2"}constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new x((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};Z=x=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Z);let tt=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{I=this}static{this.type="ivec3"}constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new I((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};tt=I=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],tt);let et=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{g=this}static{this.type="ivec4"}constructor(t,e,n,r){super(),this.type="ivec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new g((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};et=g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],et);class nt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat2"}constructor(t,e,n,r){super(),this.type="mat2",this.children=[t,e,n,r]}clone(){const t=new nt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}get(t,e){return wt(this,new W(t),new W(e),_)}multiply(t){return Dt(this,t)}}class rt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat3"}static identity(){return new rt(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=sn(t),n=oe(t);return new rt(n,e,0,xt(e),n,0,0,0,1)}constructor(t,e,n,r,c,i,s,u,o){super(),this.type="mat3",this.children=[t,e,n,r,c,i,s,u,o]}add(t){return kt(this,t)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new rt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[8]));return super.cloneInto(t),t}}class ct extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat4"}static identity(){return new ct(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,r,c,i,s,u,o,h,l,a,f,p,d,w){super(),this.type="mat4",this.children=[t,e,n,r,c,i,s,u,o,h,l,a,f,p,d,w]}static fromColumns(t,e,n,r){return new ct(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new ct((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[8]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[9]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[10]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[11]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[12]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[13]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[14]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[15]));return super.cloneInto(t),t}}const it={float:_,vec2:C,vec3:X,vec4:Y,int:W,ivec2:Z,ivec3:tt,ivec4:et,uint:G,uvec2:H,uvec3:A,uvec4:V,bool:J,bvec2:K,bvec3:L,bvec4:Q},st=(...t)=>new W(...t),ut=(...t)=>new _(...t),ot=(...t)=>new C(...t),ht=(...t)=>new X(...t),lt=(...t)=>new Y(...t),at=(...t)=>new nt(...t),ft=(...t)=>new rt(...t),pt=(...t)=>new ct(...t);function dt(t,e,n){const r=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPropertyAccessNode */ .zg(e,t,n));return r.isImplicit=!0,r}function wt(t,e,n,r){const c=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPropertyAccess2DNode */ .ff(e,n,t,r));return c.isImplicit=!0,c}function yt(t,e,n,r=null){if(r){const c=new r,s=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,c));return s.isImplicit=!0,s}if("float"===e.type||"int"===e.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}const c=new e.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,e.constructor));return c.isImplicit=!0,c}function mt(t,e,n=e.constructor){const r=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e],!1,!1,n));return r.isImplicit=!0,r}function vt(t,e,n,r=e.constructor){const c=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!1,!1,r));return c.isImplicit=!0,c}function bt(t,e,n,r,c=e.constructor){const s=new c(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n,r],!1,!1,c));return s.isImplicit=!0,s}function xt(t){return Dt(t,ut(-1))}function It(t,e,n,r){return new e(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderBlockNode */ .rR(t,e,n,r))}function gt(t,e){const n="function"==typeof t?t():t,r=new n.constructor(new o(n).setDebugName(e));return r.isImplicit=!0,r}function Et(t,e,n=0,r=t.size){const c=new W(n).setMutable().setDebugName("FindIndexIterator"),i=e(t.get(c)).setDebugName("FindIndexPredicate"),s=It({iter:c},W,i,(({out:t,iter:e,subgraph:n})=>`\n${t} = -1;\n\nfor (; ${e} < ${r}; ${e}++) {\n\n${n.body}\n\n  if (${n.varName}) {\n    ${t} = ${e};\n    break;\n  }\n\n}\n`)).setDebugName("FindIndexBlock");return s}function $t(t,e,n=0,r=t.size){const c=It({array:t},W,null,(({out:t,array:c})=>`\n${t} = -1;\nfor (int i = ${n}; i < ${r}; i++) {\n  bool condition;\n  ${e({array:c,i:"i",out:"condition"})}\n  if (condition) {\n    ${t} = i;\n    break;\n  }\n}\n`)).setDebugName("GlslFindIndexBlock");return c}function zt(t,e,n){const c="function"==typeof e?e():e,i="function"==typeof n?n():n,s=new c.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderConditionNode */ .XL(t,c,i));return s.isImplicit=!0,s}function Tt(...t){const e=t.map((([t,e])=>"function"==typeof e?[t,e()]:[t,e])),n=e[0][1].constructor,r=e.findIndex((t=>!0===t[0]));if(-1===r)throw new Error("A cond must have a fallthrough case with `true`/; ");const c=e.slice(0,r),i=e[r][1],s=new n(c.reduceRight(((t,e)=>zt(e[0],e[1],t)),i));return s.isImplicit=!0,s}function Nt(t,e){const n=new e.constructor(new r(t,e,null));return n.isImplicit=!0,n}function Dt(t,e){return yt("*",t,e)}function Ft(t,e){return yt("/",t,e)}function kt(t,e){return yt("+",t,e)}function Mt(t,e){return yt("-",t,e)}function St(t,e){return yt("%",t,e)}function jt(t,e){return yt("<<",t,e)}function Rt(t,e){return yt(">>",t,e)}function Pt(t,e){return yt("&",t,e)}function Bt(t,e){return yt("|",t,e)}function qt(t,e){return yt("^",t,e)}function Ut(t){return mt("~",t)}function _t(t,e){return yt("==",t,e,J)}function Ct(t,e){return yt("!=",t,e,J)}function Xt(t,e){return yt("<",t,e,J)}function Yt(t,e){return yt("<=",t,e,J)}function Gt(t,e){return yt(">",t,e,J)}function Ht(t,e){return yt(">=",t,e,J)}function At(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Vt(t,e)),t[0])}function Vt(t,e){return yt("||",t,e,J)}function Jt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Kt(t,e)),t[0])}function Kt(t,e){return yt("^^",t,e,J)}function Lt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Ot(t,e)),t[0])}function Ot(t,e){return yt("&&",t,e,J)}function Qt(t){return mt("abs",t)}function Wt(t){return mt("acos",t)}function Zt(t){return mt("acosh",t)}function te(t){return mt("all",t,J)}function ee(t){return mt("any",t,J)}function ne(t){return mt("asin",t)}function re(t){return mt("asinh",t)}function ce(t,e){return null==e?mt("atan",t):vt("atan",t,e,t.constructor)}function ie(t){return mt("atanh",t)}function se(t){return mt("ceil",t)}function ue(t,e,n){return bt("clamp",t,e,n,t.constructor)}function oe(t){return mt("cos",t)}function he(t){return mt("cosh",t)}function le(t,e){return vt("cross",t,e,t.constructor)}function ae(t){return mt("dFdX",t)}function fe(t){return mt("dFdY",t)}function pe(t){return mt("degrees",t)}function de(t){return mt("determinant",t,_)}function we(t,e){return vt("distance",t,e,_)}function ye(t,e){return vt("dot",t,e,_)}function me(t,e){return vt("equal",t,e,N(t))}function ve(t,e){return vt("greaterThan",t,e,N(t))}function be(t,e){return vt("greaterThanEqual",t,e,N(t))}function xe(t){return mt("exp",t)}function Ie(t){return mt("exp2",t)}function ge(t,e,n){return bt("faceforward",t,e,n)}function Ee(t){return mt("floatBitsToInt",t,T(t))}function $e(t){return mt("floatBitsToUint",t,$(t))}function ze(t){return mt("floor",t)}function Te(t){return mt("fract",t)}function Ne(t){return mt("fwidth",t)}function De(t){return mt("intBitsToFloat",t,z(t))}function Fe(t){return mt("uintBitsToFloat",t,E(t))}function ke(t){return mt("inverse",t,_)}function Me(t){return mt("inversesqrt",t)}function Se(t){return mt("isinf",t,N(t))}function je(t){return mt("isnan",t,N(t))}function Re(t){return mt("length",t,_)}function Pe(t,e){return vt("lessThan",t,e,N(t))}function Be(t,e){return vt("lessThanEqual",t,e,N(t))}function qe(t){return mt("log",t)}function Ue(t){return mt("log2",t)}function _e(t,e){return vt("matrixCompMult",t,e)}function Ce(t,e){return vt("max",t,e)}function Xe(t,e){return vt("min",t,e)}function Ye(t,e,n){return bt("mix",t,e,n)}function Ge(t,e){return vt("mod",t,e)}function He(t,e){throw new Error("modf not implemented")}function Ae(t){return mt("normalize",t)}function Ve(t){return"bool"===t.type?mt("!",t):mt("not",t)}function Je(t,e){return vt("notEqual",t,e,N(t))}function Ke(t,e){throw new Error("Impl type?")}function Le(t){return mt("packHalf2x16",t,G)}function Oe(t){return mt("packUnorm2x16",t,G)}function Qe(t){return mt("packSnorm2x16",t,G)}function We(t,e){return vt("pow",t,e)}function Ze(t){return mt("radians",t)}function tn(t,e){return vt("reflect",t,e)}function en(t,e,n){return bt("refract",t,e,n)}function nn(t){return mt("round",t)}function rn(t){return mt("roundEven",t)}function cn(t){return mt("sign",t)}function sn(t){return mt("sin",t)}function un(t){return mt("sinh",t)}function on(t,e,n){return bt("smoothstep",t,e,n)}function hn(t){return mt("sqrt",t)}function ln(t,e){return vt("step",t,e,e.constructor)}function an(t){return mt("tan",t)}function fn(t){return mt("tanh",t)}function pn(t,e,n){return bt("texelFetch",t,e,n,Y)}function dn(t,e,n,r){throw new Error("Impl type")}function wn(t,e,n){throw new Error("Impl type")}function yn(t,e){return vt("texture",t,e,Y)}function mn(t,e,n,r){throw new Error("Impl type")}function vn(t,e,n,r,c){throw new Error("Impl type")}function bn(t,e,n){throw new Error("Impl type")}function xn(t,e,n,r){throw new Error("Impl type")}function In(t,e,n,r){throw new Error("Impl type")}function gn(t,e,n){throw new Error("Impl type")}function En(t,e,n,r){throw new Error("Impl type")}function $n(t,e,n,r,c){throw new Error("Impl type")}function zn(t,e,n){throw new Error("Impl type")}function Tn(t,e,n,r){throw new Error("Impl type")}function Nn(t,e,n,r){throw new Error("Impl type")}function Dn(t,e){throw new Error("Impl type")}function Fn(t){return mt("transpose",t)}function kn(t){return mt("trunc",t)}function Mn(t){return mt("unpackHalf2x16",t,C)}function Sn(t){return mt("unpackUnorm2x16",t,C)}function jn(t){return mt("unpackSnorm2x16",t,C)}function Rn(t,e){const{initialValue:n,xRange:r,yRange:c,callback:i}=e,[s,u]=r,[o,h]=c,l=new W(0).setMutable().setDebugName("iterX"),a=new W(0).setMutable().setDebugName("iterY"),f=n.setMutable().setDebugName("accumulator"),p=i(f,t.get(l,a),l,a).setDebugName("callback"),d=It({iterX:l,iterY:a,accumulator:f},n.constructor,p,(({out:t,iterX:e,iterY:n,accumulator:r,subgraph:c})=>`\nfor (${n} = ${o}; ${n} < ${h}; ${n}++) {\n  for (${e} = ${s}; ${e} < ${u}; ${e}++) {\n\n  ${c.body}\n\n  ${r} = ${c.varName};\n  }\n}\n${t} = ${r};\n`)).setDebugName("reduce2DBody");return d}


/***/ }),

/***/ 17730:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79432);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.drawPhase=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HITTEST|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.DEBUG}startup(){}shutdown(s){}}


/***/ }),

/***/ 28177:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98003);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(t,i,e){this._instanceId=t,this.techniqueRef=i,this._input=e}get instanceId(){return (0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .castStrictInstanceId */ .P)(this._instanceId)}createMeshInfo(i){return{id:(0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .castStrictInstanceId */ .P)(this._instanceId),techniqueType:this.techniqueRef.type,inputParams:i,optionalAttributes:this._input.optionalAttributes}}getInput(){return this._input}setInput(t){this._input=t}}


/***/ }),

/***/ 84022:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  YS: () => (/* binding */ TechniqueRegistry_F),
  n_: () => (/* binding */ TechniqueRegistry_k),
  Wn: () => (/* binding */ TechniqueRegistry_x)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js
var TechniqueType = __webpack_require__(98826);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js + 2 modules
var GraphShaderModule = __webpack_require__(47381);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js
var glsl = __webpack_require__(39689);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/animationDebugFlags.js
var animationDebugFlags = __webpack_require__(4293);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/instructions.js
var instructions = __webpack_require__(45987);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimationUniformInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"globalTime",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],d.prototype,"animationTextureSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],d.prototype,"animationTexture",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],d.prototype,"toScreen",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],d.prototype,"toNdc",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"mapRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"pixelRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/enums.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var enums_o;!function(o){o[o.transform=0]="transform",o[o.fromColor=1]="fromColor",o[o.toColor=2]="toColor",o[o.colorMix=3]="colorMix",o[o.toOpacity=4]="toOpacity",o[o.opacityMix=5]="opacityMix",o[o.shift=6]="shift"}(enums_o||(enums_o={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/markerConstants.js
var markerConstants = __webpack_require__(64723);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/utils.js
var utils = __webpack_require__(43212);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/EntityStorage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class p extends GraphShaderModule/* UniformGroup */.k2{getVisualVariableData(t){if(!this._vvData){const a=this.getAttributeDataCoords(t);this._vvData=(0,glsl/* texture2D */.US)(this.visualVariableData,a).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const a=(0,utils/* unpackDisplayIdTexel */.Kt)(t),e=this.size,i=(0,glsl/* int */.Wh)(a.x),r=(0,glsl/* int */.Wh)(a.y).multiply((0,glsl/* int */.Wh)(256)),s=(0,glsl/* int */.Wh)(a.z).multiply((0,glsl/* int */.Wh)(256)).multiply((0,glsl/* int */.Wh)(256)),n=(0,glsl/* float */.fV)(i.add(r).add(s)),p=(0,glsl/* mod */.zi)(n,e),d=n.subtract(p).divide(e);this._uv=new glsl/* Vec2 */.ZY(p,d).add(.5).divide(e)}return this._uv}getFilterData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.filterFlags,a).setDebugName("storage0")}getAnimationData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.animation,a).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven0,a).setDebugName("storage30")}getDataDrivenData1(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven1,a).setDebugName("storage31")}getDataDrivenData2(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven2,a).setDebugName("storage32")}getGPGPUData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.gpgpu,a).setDebugName("storage4")}getLocalTimeOrigin(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.localTimeOrigin,a).x.setDebugName("storage5")}getFilterFlags(t){return (0,has/* default */.A)("webgl-ignores-sampler-precision")?(0,glsl/* ceil */.mk)(this.getFilterData(t).x.multiply((0,glsl/* float */.fV)(255))):this.getFilterData(t).x.multiply((0,glsl/* float */.fV)(255))}getLabelVisibility(t){const a=this.getFilterData(t).y.multiply(255);return new glsl/* Float */.nt(1).subtract(a)}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"filterFlags",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"animation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"gpgpu",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"localTimeOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"visualVariableData",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven0",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],p.prototype,"size",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ShaderHighlight.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],e.prototype,"activeReasons",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],e.prototype,"highlightAll",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ShaderHittest.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShaderHittest_e extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],ShaderHittest_e.prototype,"position",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"distance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"smallSymbolDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"smallSymbolSizeThreshold",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ViewInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ViewInfo_d extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayViewScreenMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayViewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"viewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"tileMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"displayZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"requiredZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],ViewInfo_d.prototype,"tileOffset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"currentScale",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"currentZoom",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"metersPerSRUnit",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"rotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"pixelRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/AFeatureShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class S extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec3 */.eB)],S.prototype,"id",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(1,glsl/* Float */.nt)],S.prototype,"bitset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(2,glsl/* Vec2 */.ZY)],S.prototype,"pos",void 0);class q extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],q.prototype,"nextPos1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(15,glsl/* Vec2 */.ZY)],q.prototype,"nextPos2",void 0);class AFeatureShader_P extends GraphShaderModule/* FragmentInput */.HS{}class B extends GraphShaderModule/* GraphShaderModule */.A{clip(t,i){let e=new glsl/* Float */.nt(0);const o=this.storage.getFilterFlags(t);if(e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract((0,utils/* getFilterBit */.i6)(o,0)))),this.inside?e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract((0,utils/* getFilterBit */.i6)(o,1)))):this.outside?e=e.add((0,glsl/* float */.fV)(2).multiply((0,utils/* getFilterBit */.i6)(o,1))):this.highlight&&(e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract(this._checkHighlight(o))))),null!=i){const t=new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(i.x,this.view.currentZoom)),o=(0,glsl/* step */.PM)(i.y,this.view.currentZoom);e=e.add(new glsl/* Float */.nt(2).multiply(t.add(o)))}return e}getFragmentOutput(t,i,e=new glsl/* Float */.nt(1/255)){const s=new GraphShaderModule/* FragmentOutput */.mm;return s.fragColor=this._maybeWriteHittest(i)??this._maybeHighlight(t,e)??t,s}_maybeHighlight(t,i){return this.highlight?new glsl/* Vec4 */.Zb(t.rgb,(0,glsl/* step */.PM)(i,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let o=1;o<definitions/* maxHighlightReasons */.U5;o++)e=e.add(this._checkHighlightBit(t,o));return (0,glsl/* step */.PM)(new glsl/* Float */.nt(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,i){return (0,utils/* getHighlightBit */.yS)(t,i).multiply((0,utils/* getBit */.mh)(this.highlight.activeReasons,i))}maybeRunHittest(t,i,e){if(null==this.hittestRequest)return null;const o=this.hittest(t,i,e);let s=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(o,this.hittestRequest.distance),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0));const r=this.storage.getAttributeDataCoords(t.id),h=(0,utils/* uvToClip */.nb)(r);s=s.add(this.clip(t.id,t.zoomRange));const l=new glsl/* Vec4 */.Zb(new glsl/* Float */.nt(1/255),0,0,0);return{glPointSize:new glsl/* Float */.nt(1),glPosition:new glsl/* Vec4 */.Zb(h,s,1),color:l}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],B.prototype,"inside",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],B.prototype,"outside",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(e)],B.prototype,"highlight",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(p)],B.prototype,"storage",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(ViewInfo_d)],B.prototype,"view",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(ShaderHittest_e)],B.prototype,"hittestRequest",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js
var constants = __webpack_require__(32520);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/LocalTileOffset.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends GraphShaderModule/* UniformGroup */.k2{getPatternOffsetAtTileOrigin(t,i=new glsl/* Float */.nt(0),l=new glsl/* Float */.nt(1)){const n=new glsl/* Vec2 */.ZY(constants/* maxRepresentableInt */.YV).divide(t);let p=t.multiply((0,glsl/* fract */.jc)(this.maxIntsToLocalOrigin.multiply(n))).add(this.tileOffsetFromLocalOrigin).subtract(new glsl/* Float */.nt(.5).multiply(t));return p=new glsl/* Vec2 */.ZY(p.x.multiply(l).subtract(p.y.multiply(i)),p.x.multiply(i).add(p.y.multiply(l))),(0,glsl/* mod */.zi)(p,t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],n.prototype,"tileOffsetFromLocalOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],n.prototype,"maxIntsToLocalOrigin",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/MosaicInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MosaicInfo_p extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],MosaicInfo_p.prototype,"size",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],MosaicInfo_p.prototype,"texture",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableColor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends GraphShaderModule/* UniformGroup */.k2{getColor(s,t,o){return (0,glsl/* cond */.j1)([(0,glsl.or)((0,utils/* isNan */.M8)(s),o),t],[(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.colors.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.colors.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),o=this.values.get(t),r=t.subtract(1),e=this.values.get(r),i=s.subtract(e).divide(o.subtract(e));return (0,glsl/* mix */.jh)(this.colors.get(r),this.colors.get(t),i)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,8))],f.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],f.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableOpacity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h extends GraphShaderModule/* UniformGroup */.k2{getOpacity(t){return (0,glsl/* cond */.j1)([(0,utils/* isNan */.M8)(t),new glsl/* Float */.nt(1)],[(0,glsl/* lessThanEqual */.$5)(t,this.opacityValues.first()),this.opacities.first()],[(0,glsl/* greaterThanEqual */.aX)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const s=this.opacityValues.findIndex((s=>(0,glsl/* greaterThan */.MM)(s,t))),i=this.opacityValues.get(s),e=s.subtract(1),o=this.opacityValues.get(e),a=t.subtract(o).divide(i.subtract(o));return (0,glsl/* mix */.jh)(this.opacities.get(e),this.opacities.get(s),a)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],h.prototype,"opacities",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],h.prototype,"opacityValues",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableRotation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableRotation_d extends GraphShaderModule/* UniformGroup */.k2{getVVRotationMat4(t){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),glsl/* Mat4 */.$I.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants/* cDegToRad */.os),r=(0,glsl/* sin */.F8)(e),i=(0,glsl/* cos */.gn)(e);return new glsl/* Mat4 */.$I(i,r,0,0,r.multiply(new glsl/* Float */.nt(-1)),i,0,0,0,0,1,0,0,0,0,1)}))}getVVRotationMat3(t){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),glsl/* Mat3 */.U.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants/* cDegToRad */.os),r=(0,glsl/* sin */.F8)(e),i=(0,glsl/* cos */.gn)(e);return new glsl/* Mat3 */.U(i,r,0,r.multiply(new glsl/* Float */.nt(-1)),i,0,0,0,1)}))}getNormalizedAngle(t){const e=(0,glsl/* equal */.LC)(this.rotationType,new glsl/* Float */.nt(constants/* RotationType */.H_.Arithmatic));return (0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(90).subtract(t),t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],VisualVariableRotation_d.prototype,"rotationType",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeMinMaxValue.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class m extends GraphShaderModule/* UniformGroup */.k2{getSize(t,e){const r=this.minMaxValueAndSize.xy,s=this.minMaxValueAndSize.zw;return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),e,(()=>{const e=t.subtract(r.x).divide(r.y.subtract(r.x)),i=(0,glsl/* clamp */.qE)(e,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return s.x.add(i.multiply(s.y.subtract(s.x)))}))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec4 */.Zb)],m.prototype,"minMaxValueAndSize",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeScaleStops.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableSizeScaleStops_p extends GraphShaderModule/* UniformGroup */.k2{getSizeForViewScale(s){return (0,glsl/* cond */.j1)([(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return (0,glsl/* mix */.jh)(this.sizes.get(i),this.sizes.get(t),o)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeScaleStops_p.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeScaleStops_p.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeStops.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableSizeStops_f extends GraphShaderModule/* UniformGroup */.k2{getSize(s,t){const e=(0,glsl/* cond */.j1)([(0,utils/* isNan */.M8)(s),t],[(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return (0,glsl/* mix */.jh)(this.sizes.get(i),this.sizes.get(t),o)}]);return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(e),t,e)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeStops_f.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeStops_f.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeUnitValue.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class l extends GraphShaderModule/* UniformGroup */.k2{getSize(t,o){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),o,t.multiply(this.unitValueToPixelsRatio))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],l.prototype,"unitValueToPixelsRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/vvUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function vvUtils_t(a){return null!=a.visualVariableSizeMinMaxValue||null!=a.visualVariableSizeScaleStops||null!=a.visualVariableSizeStops||null!=a.visualVariableSizeUnitValue}function vvUtils_l(a,e,i){if(vvUtils_t(a)){const t=a.storage.getSizeValue(e);return a.visualVariableSizeMinMaxValue?.getSize(t,i)??a.visualVariableSizeScaleStops?.getSizeForViewScale(a.view.currentScale)??a.visualVariableSizeStops?.getSize(t,i)??a.visualVariableSizeUnitValue?.getSize(t,i)}return i}function vvUtils_r(e,i,t,l=new glsl/* Bool */.x(!1)){if(null==e.visualVariableColor)return t;const r=e.storage.getColorValue(i);return e.visualVariableColor.getColor(r,t,l)}function vvUtils_n(a,i){if(null==a.visualVariableOpacity)return new glsl/* Float */.nt(1);const t=a.storage.getOpacityValue(i);return a.visualVariableOpacity.getOpacity(t)}function vvUtils_u(a,e){if(null==a.visualVariableRotation)return glsl/* Mat3 */.U.identity();const t=a.storage.getRotationValue(e);return a.visualVariableRotation.getVVRotationMat3(t)}function vvUtils_o(a,i){if(null==a.visualVariableRotation)return new glsl/* Float */.nt(0);const t=a.storage.getRotationValue(i);return a.visualVariableRotation.getNormalizedAngle(t)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AAnimatedShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AAnimatedShader_q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec2 */.ZY)],AAnimatedShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"value1Position2Value2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"animationPointerAndBaseSizeAndReferenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec2 */.ZY)],AAnimatedShader_q.prototype,"zoomRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Float */.nt)],AAnimatedShader_q.prototype,"lineLength",void 0);class H extends AFeatureShader_P{}class J extends B{_vertexPreamble(i,t,e){const{id:o,offset:a,animationPointerAndBaseSizeAndReferenceSize:s,sizing:r}=i,l=s.xy,n=s.z,b=s.w,S=r.xy,h=this._getEvalParams(i,S,e);let w,g;if(i.value1Position2Value2){const t=K(l,enums_o.shift,h).a,e=i.pos,o=i.value1Position2Value2.yz,a=i.value1Position2Value2.x,s=i.value1Position2Value2.w,r=t.subtract(a).divide(s.subtract(a));g=e.add(o.subtract(e).multiply(r)),w=(0,glsl/* step */.PM)(new glsl/* Float */.nt(1),r).add((0,glsl/* step */.PM)(new glsl/* Float */.nt(0),(0,glsl/* negate */.ze)(r)))}else g=i.pos,w=new glsl/* Float */.nt(0);const V=r.z,x=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isStroke),z=r.w,T=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.scaleSymbolsProportionally),_=K(l,enums_o.transform,h),I=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)((0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isMapAligned),new glsl/* Float */.nt(1)),this.view.rotation.divide(180).multiply(Math.PI)],[!0,new glsl/* Float */.nt(0)]),C=new glsl/* Mat2 */.Ny((0,glsl/* cos */.gn)(I),(0,glsl/* sin */.F8)(I.multiply(-1)),(0,glsl/* sin */.F8)(I),(0,glsl/* cos */.gn)(I)).multiply(_.xy),M=_.z.subtract(I).subtract(t.multiply(constants/* c256ToRad */.rp)),D=_.w,F=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isSDF),L=vvUtils_l(this,o,new glsl/* Float */.nt(b)).divide(new glsl/* Float */.nt(b));return{baseSize:n,animationPointer:l,strokeWidth:V,isOutline:x,unscaledDistanceToPx:z,scaleSymbolsProportionally:T,isSDF:F,position:this._getScreenPosition({id:o,pos:g,offset:a,referenceSize:b,translation:C,rotation:M,scale:D,vvScale:L}),evalParams:h,vvScale:L,scale:D,clip:w}}_getScreenPosition(i){const{pos:t,translation:e,rotation:o,scale:a,offset:s,id:r,vvScale:l}=i,n=vvUtils_o(this,r).multiply(Math.PI/180),p=e.x.multiply(4/3),d=e.y.multiply(-1).multiply(4/3),c=(0,glsl/* sin */.F8)(n),y=(0,glsl/* cos */.gn)(n),h=y.multiply(p).add((0,glsl/* negate */.ze)(c).multiply(d)),w=c.multiply(p).add(y.multiply(d)),g=(0,glsl/* sin */.F8)(o.subtract(n)),V=(0,glsl/* cos */.gn)(o.subtract(n)),x=new glsl/* Float */.nt(0),z=new glsl/* Float */.nt(1),{pixelRatio:j}=this.animationInfo,P=new glsl/* Mat3 */.U(z,x,x,x,z,x,h.multiply(j),w.multiply(j),z),T=new glsl/* Mat3 */.U(V,g.multiply(-1),x,g,V,x,0,0,z),_=a.multiply(l).multiply(j).multiply(4/3),I=T.multiply(_),O=this.animationInfo.toScreen.multiply(new glsl/* Vec3 */.eB(t,1)),C=P.multiply(O).xy,M=I.multiply(new glsl/* Vec3 */.eB(s,0)).xy;return C.add(M)}_clip(i,e){let o=super.clip(i,e);const a=(0,glsl/* lessThanEqual */.$5)(this._getLocalTimeOrigin(i),new glsl/* Float */.nt(0));return animationDebugFlags/* animationDebugFlags */.H.forceGlobalTimeOrigin||(o=o.add((0,glsl/* cond */.j1)([a,()=>new glsl/* Float */.nt(2)],[!0,()=>new glsl/* Float */.nt(0)]))),o}_getLocalTimeOrigin(i){return this.storage.getLocalTimeOrigin(i)}_toNdc(i){return this.animationInfo.toNdc.multiply(new glsl/* Vec3 */.eB(i,1)).xy}_getEvalParams(i,t,e){const{globalTime:o,animationTextureSize:a,animationTexture:s}=this.animationInfo;return{globalTime:o,localTimeOrigin:this._getLocalTimeOrigin(i.id),animationTextureSize:a,animationTexture:s,pixelDimensions:t,lineLength:e}}_getColor(i,t){return (0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(t.isSDF,new glsl/* Float */.nt(1)),this._getSDFColor(i,t),this._getSpriteColor(i,t))}_getSpriteColor(i,t){return (0,glsl/* texture2D */.US)(this.mosaicInfo.texture,i).multiply(t.color)}_getSDFColor(i,t){const e=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,i),o=new glsl/* Float */.nt(.5).subtract((0,utils/* rgba2float */.Rj)(e)).multiply(t.distanceToPx).multiply(constants/* softEdgeRatio */.V5),a=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(o),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),s=t.color.multiply(a),r=t.outlineSize.multiply(.5),n=(0,glsl/* abs */.tn)(o).subtract(r),p=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(n),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),u=t.outlineColor.multiply(p);return new glsl/* Float */.nt(1).subtract(u.a).multiply(s).add(u)}}function K(i,t,o){const a=i.add(new glsl/* Vec2 */.ZY(t,0)),s=(0,glsl/* texture2D */.US)(o.animationTexture,a.add(.5).divide(o.animationTextureSize)).xy;return i=i.add(s),(0,glsl/* block */.om)({animationPointer:i,...o},glsl/* Vec4 */.Zb,null,(i=>{const{out:t}=i;if(!t)throw new Error("out is null");return (0,instructions/* generateVirtualMachineSource */.DW)({...i,out:t})}))}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],J.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(d)],J.prototype,"animationInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],J.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],J.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],J.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],J.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],J.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],J.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],J.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],J.prototype,"visualVariableRotation",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AAnimatedPolyShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class v extends AAnimatedShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec4 */.Zb)],v.prototype,"tlbr",void 0);class AAnimatedPolyShader_S extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],AAnimatedPolyShader_S.prototype,"nextPos1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],AAnimatedPolyShader_S.prototype,"nextPos2",void 0);class AAnimatedPolyShader_f extends H{}class g extends J{_fragmentPoly(o){const t=(0,glsl/* mod */.zi)(o.uv,new glsl/* Float */.nt(1)),e=(0,glsl/* mix */.jh)(o.tlbr.xy,o.tlbr.zw,t);return this._getColor(e,{color:o.color,distanceToPx:o.distanceToPx,isSDF:o.isSDF,outlineColor:o.outlineColor,outlineSize:o.strokeWidth})}_vertexPoly(o){const{position:t,animationPointer:e,evalParams:s,isOutline:m,unscaledDistanceToPx:c,vvScale:d,strokeWidth:u,scaleSymbolsProportionally:v,scale:S,isSDF:f,baseSize:g,clip:j}=this._vertexPreamble(o,new glsl/* Float */.nt(0),o.lineLength||new glsl/* Float */.nt(0)),w=this._toNdc(t);let k=K(e,enums_o.fromColor,s);k=new glsl/* Vec4 */.Zb(k.rgb.multiply(k.a),k.a);let z=K(e,enums_o.toColor,s);z=new glsl/* Vec4 */.Zb(z.rgb.multiply(z.a),z.a);let C=K(e,enums_o.colorMix,s);C=new glsl/* Vec4 */.Zb(C.rgb.multiply(C.a),C.a);const D=K(e,enums_o.toOpacity,s).a,_=K(e,enums_o.opacityMix,s).a,T=vvUtils_r(this,o.id,k,(0,glsl.or)((0,utils/* getBitBool */.K5)(o.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),new glsl/* Bool */.x(m))),F=(0,glsl/* mix */.jh)(T,z,C),M=vvUtils_n(this,o.id),O=(0,glsl/* mix */.jh)(M,D,_),W=F.multiply(O),A=this.clip(o.id,o.zoomRange).add(j.multiply(2)),L=c.multiply(d);return{unscaledDistanceToPx:c,vvScale:d,strokeWidth:u,scaleSymbolsProportionally:v,scale:S,isSDF:f,baseSize:g,ndc:w,color:W,z:A,isOutline:m,evalParams:s,distanceToPx:L}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/hittestUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function hittestUtils_v(t,u){return (0,glsl/* dot */.Om)(t,(0,glsl/* normalize */.S8)(u))}function j(i,y,s){const l=s.subtract(y),c=hittestUtils_v(i.subtract(y),l),e=(0,glsl/* clamp */.qE)(c.divide((0,glsl/* length */.Bw)(l)),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return (0,glsl/* distance */.Io)(i,y.add(e.multiply(s.subtract(y))))}function hittestUtils_g(t){const n=(0,glsl/* abs */.tn)(t);return (0,glsl/* step */.PM)(n.x.add(n.y).add(n.z),new glsl/* Float */.nt(1.05))}function hittestUtils_h(t,n,r,y){const s=new glsl/* Mat3 */.U(r.x.multiply(y.y).subtract(y.x.multiply(r.y)),y.x.multiply(n.y).subtract(n.x.multiply(y.y)),n.x.multiply(r.y).subtract(r.x.multiply(n.y)),r.y.subtract(y.y),y.y.subtract(n.y),n.y.subtract(r.y),y.x.subtract(r.x),n.x.subtract(y.x),r.x.subtract(n.x)),l=n.x.multiply(r.y.subtract(y.y)),c=r.x.multiply(y.y.subtract(n.y)),e=y.x.multiply(n.y.subtract(r.y)),o=l.add(c).add(e);return new glsl/* Float */.nt(1).divide(o).multiply(s.multiply(new glsl/* Vec3 */.eB(1,t)))}function M(t,n,r,i){return (0,glsl/* equal */.LC)(hittestUtils_g(hittestUtils_h(t,n,r,i)),new glsl/* Float */.nt(1))}function P(t,n,r,i){const a=r.subtract(n),o=i.subtract(n),p=(0,utils/* cross2 */.tL)(a,o),x=(0,glsl/* and */.Uo)((0,glsl/* lessThan */.Xe)(p,new glsl/* Float */.nt(constants/* epsilonHitTest */.M)),(0,glsl/* greaterThan */.MM)(p,new glsl/* Float */.nt(-.05)));return (0,glsl/* cond */.j1)([(0,glsl/* and */.Uo)((0,glsl/* not */.AU)(x),M(t.xy,n,r,i)),new glsl/* Float */.nt(-1)],[!0,()=>{const u=j(t,n,r),y=j(t,r,i),s=j(t,i,n);return (0,glsl/* min */.jk)((0,glsl/* min */.jk)(u,y),s)}])}function hittestUtils_q(t){return t.distance.add(1)}function z(t,u,n){const{viewMat3:r,tileMat3:y}=t.view,s=r.multiply(y),l=s.multiply(new glsl/* Vec3 */.eB(u.pos,1)),c=s.multiply(new glsl/* Vec3 */.eB(n.nextPos1,1)),e=s.multiply(new glsl/* Vec3 */.eB(n.nextPos2,1));return P(t.hittestRequest.position,l.xy,c.xy,e.xy)}function R(t,u,n){return (0,glsl/* distance */.Io)(t,n).subtract(u)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/FillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FillShader_g extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],FillShader_g.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],FillShader_g.prototype,"zoomRange",void 0);class x extends B{constructor(){super(...arguments),this.type="FillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,o){const r=vvUtils_n(this,t.id),e=vvUtils_r(this,t.id,t.color).multiply(r),i=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.xy,1)),p=this.clip(t.id,t.zoomRange);return{glPosition:new glsl/* Vec4 */.Zb(i.xy,p,1),color:e,...this.maybeRunHittest(t,o,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new glsl/* Float */.nt(0))}hittest(t,o){return z(this,t,o)}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],x.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],x.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(FillShader_g)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AFeatureShader_P))],x.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ComplexFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexFillShader_q extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],ComplexFillShader_q.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"width",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"height",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],ComplexFillShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],ComplexFillShader_q.prototype,"scale",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"angle",void 0);class G extends AFeatureShader_P{}function ComplexFillShader_L(t,e,o,i,r){const l=(0,glsl/* equal */.LC)((0,utils/* getBit */.mh)(r,constants/* bitsetFillRandomPatternOffset */.Fz),(0,glsl/* float */.fV)(1)),f=(0,utils/* rgba2float */.Rj)(new glsl/* Vec4 */.Zb(t,0));return (0,glsl/* ifElse */.Tk)(l,(0,glsl/* mat3 */.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl/* negate */.ze)(o.divide(e.x)),i.divide(e.y),0,(0,utils/* rand */._9)((0,glsl/* vec2 */.Zc)(f,0)),(0,utils/* rand */._9)((0,glsl/* vec2 */.Zc)(0,f)),1),(0,glsl/* mat3 */.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl/* negate */.ze)(o.divide(e.x)),i.divide(e.y),0,0,0,1))}function ComplexFillShader_P(t,e){const o=t.view.requiredZoomFactor,i=new glsl/* Vec2 */.ZY(e.width,e.height),r=i.multiply(e.scale).multiply(o),s=e.angle.multiply(constants/* c256ToRad */.rp),p=(0,glsl/* sin */.F8)(s),a=(0,glsl/* cos */.gn)(s),d=ComplexFillShader_L(e.id,r,p,a,e.bitset),m=t.localTileOffset.getPatternOffsetAtTileOrigin(i,p,a),u=o.multiply(e.scale).multiply(e.offset.subtract(m)).divide(r),h=new glsl/* Vec3 */.eB(e.pos,1),x=d.multiply(h).xy.subtract(u),g=e.tlbr.divide(t.mosaicInfo.size.xyxy);let b=(0,utils/* getBit */.mh)(e.bitset,constants/* bitsetGenericConsiderAlphaOnly */.cn);return null!=t.visualVariableColor&&(b=(0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t.storage.getColorValue(e.id)),new glsl/* Float */.nt(0),b)),{tileTextureCoord:x,tlbr:g,sampleAlphaOnly:b}}function Z(t,e){const o=(0,glsl/* mod */.zi)(e.tileTextureCoord,new glsl/* Float */.nt(1)),i=(0,glsl/* mix */.jh)(e.tlbr.xy,e.tlbr.zw,o);let r=(0,glsl/* texture2D */.US)(t.mosaicInfo.texture,i);return r=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(e.sampleAlphaOnly,new glsl/* Float */.nt(.5)),r.aaaa,r),e.color.multiply(r)}class _ extends x{constructor(){super(...arguments),this.type="ComplexFillShader"}vertex(t,e){return{...super.vertex(t,e),...ComplexFillShader_P(this,t)}}fragment(t){const e=Z(this,t);return this.getFragmentOutput(e,t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],_.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],_.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexFillShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(G))],_.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedFillShader_f extends g{constructor(){super(...arguments),this.type="AnimatedFillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const{distanceToPx:i,ndc:p,z:u,color:c,isOutline:d,strokeWidth:y,isSDF:f,baseSize:x,scale:g,scaleSymbolsProportionally:b}=this._vertexPoly(t),w=this.view.requiredZoomFactor,P=t.sizing.xy,S=P.multiply(w),v=new glsl/* Float */.nt(0),z=(0,glsl/* sin */.F8)(v),F=(0,glsl/* cos */.gn)(v),j=ComplexFillShader_L(t.id,S,z,F,t.bitset),A=this.localTileOffset.getPatternOffsetAtTileOrigin(P,z,F),O=w.multiply(t.offset.subtract(A)).divide(S),T=new glsl/* Vec3 */.eB(t.pos,1),M=j.multiply(T).xy.subtract(O),k=t.tlbr.divide(this.mosaicInfo.size.xyxy);return{glPosition:new glsl/* Vec4 */.Zb(p,u,1),tlbr:k,uv:M,color:c.multiply(new glsl/* Float */.nt(1).subtract(d)),outlineColor:c.multiply(d),distanceToPx:i,strokeWidth:y.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),g,b)),isOutline:d,isSDF:f,...this.maybeRunHittest(t,e,{pos:t.pos,size:x,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:i,isSDF:f})}}fragment(t){const e=this._fragmentPoly(t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return z(this,t,e)}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(v)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_S))],AnimatedFillShader_f.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_f))],AnimatedFillShader_f.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/LineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LineShader_q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],LineShader_q.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],LineShader_q.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],LineShader_q.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"zoomRange",void 0);class LineShader_A extends AFeatureShader_P{}class F extends GraphShaderModule/* UniformGroup */.k2{}function k(t){return (0,glsl/* max */.T9)(new glsl/* Float */.nt(constants/* thinLineWidthFactor */.Fb).multiply((0,glsl/* step */.PM)(t,new glsl/* Float */.nt(constants/* thinLineHalfWidth */.J5))),new glsl/* Float */.nt(1))}function LineShader_D(t,i){const{halfWidth:e,normal:o}=t,l=k(e),a=(0,glsl/* length */.Bw)(o).multiply(e);return (0,glsl/* clamp */.qE)(l.multiply(e.subtract(a)).divide(i.add(l).subtract(new glsl/* Float */.nt(1))),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1))}function LineShader_G(t,i){const{id:e,halfWidth:o,referenceHalfWidth:l}=i;if(vvUtils_t(t)){const i=new glsl/* Float */.nt(2).multiply(l),a=vvUtils_l(t,e,i);return new glsl/* Float */.nt(.5).multiply(o.divide((0,glsl/* max */.T9)(l,new glsl/* Float */.nt(constants/* epsilon */.Ni)))).multiply(a)}return o}function LineShader_L(t,i){const{id:e,offset:o,pos:l,normal:a,zoomRange:r}=i,{displayViewScreenMat3:p,displayViewMat3:y}=t.view,c=vvUtils_r(t,e,i.color),f=vvUtils_n(t,e),h=LineShader_G(t,i),v=new glsl/* Float */.nt(.5).multiply(t.antialiasingControls.antialiasing),w=(0,glsl/* max */.T9)(h.add(v),new glsl/* Float */.nt(.45)).add(new glsl/* Float */.nt(.1).multiply(v)),V=k(w).multiply(w).multiply(o),b=y.multiply(new glsl/* Vec3 */.eB(V,new glsl/* Float */.nt(0))),S=p.multiply(new glsl/* Vec3 */.eB(l,new glsl/* Float */.nt(1))).add(b),x=new glsl/* Float */.nt(2).multiply((0,glsl/* step */.PM)(h,new glsl/* Float */.nt(0))).add(t.clip(e,r)),g=new glsl/* Vec4 */.Zb(S.xy,x,1);return{color:c,opacity:f,halfWidth:w,normal:a,scaledOffset:V,scaledHalfWidth:h,glPosition:new glsl/* Vec4 */.Zb(g.xy,x,1)}}function T(t,i){const{opacity:e,color:o}=t,l=LineShader_D(t,i);return e.multiply(o).multiply(l)}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],F.prototype,"antialiasing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],F.prototype,"blur",void 0);class LineShader_ extends B{constructor(){super(...arguments),this.type="LineShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,i){const e=LineShader_L(this,t);return{...e,...this.maybeRunHittest(t,i,e.halfWidth)}}fragment(t){const i=T(t,this.antialiasingControls.blur);return this.getFragmentOutput(i,t)}hittest(t,i,e){const{viewMat3:o,tileMat3:l}=this.view,a=o.multiply(l),r=a.multiply(new glsl/* Vec3 */.eB(t.pos,1)),u=a.multiply(new glsl/* Vec3 */.eB(i.nextPos1,1)),m=a.multiply(new glsl/* Vec3 */.eB(i.nextPos2,1)),{distance:d,smallSymbolDistance:y,smallSymbolSizeThreshold:c}=this.hittestRequest,f=(0,glsl/* step */.PM)(e,c.multiply(.5)).multiply(d.subtract(y)),h=this.hittestRequest.position;return (0,glsl/* min */.jk)(j(h,r.xy,u.xy),j(h,r.xy,m.xy)).subtract(e).add(f)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(F)],LineShader_.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],LineShader_.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],LineShader_.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],LineShader_.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],LineShader_.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],LineShader_.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],LineShader_.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(LineShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],LineShader_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(LineShader_A))],LineShader_.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedLineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedLineShader_g extends v{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],AnimatedLineShader_g.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],AnimatedLineShader_g.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],AnimatedLineShader_g.prototype,"segmentDirection",void 0);class AnimatedLineShader_z extends AAnimatedPolyShader_f{}class AnimatedLineShader_A extends g{constructor(){super(...arguments),this.type="AnimatedLineShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const{animationPointerAndBaseSizeAndReferenceSize:i}=t,s=i.xy,{distanceToPx:d,ndc:p,z:u,color:c,isOutline:y,strokeWidth:h,isSDF:x,baseSize:v,scale:f,scaleSymbolsProportionally:b,evalParams:P}=this._vertexPoly(t),g=t.sizing.xy,z=g.x.multiply(v).divide(g.y),A=K(s,enums_o.shift,P).a,j=t.accumulatedDistance.subtract(A),{normal:D}=t,M=t.normal.y,F=j.divide(this.view.displayZoomFactor).add((0,glsl/* dot */.Om)(t.segmentDirection,t.offset)).divide(z),R=M.add(1).divide(2),T=new glsl/* Vec2 */.ZY(F,R),W=t.tlbr.divide(this.mosaicInfo.size.xyxy);return{glPosition:new glsl/* Vec4 */.Zb(p,u,1),tlbr:W,uv:T,color:c.multiply(new glsl/* Float */.nt(1).subtract(y)),outlineColor:c.multiply(y),distanceToPx:d,strokeWidth:h.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),f,b)),isOutline:y,isSDF:x,halfWidth:v.divide(2),normal:D,...this.maybeRunHittest(t,e,{pos:t.pos,size:v,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:d,isSDF:x})}}fragment(t){const e=this._fragmentPoly(t),{halfWidth:i,normal:s}=t,o=k(i),n=(0,glsl/* length */.Bw)(s).multiply(i),l=(0,glsl/* clamp */.qE)(o.multiply(i.subtract(n)).divide(o.subtract(new glsl/* Float */.nt(1))),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return this.getFragmentOutput(e.multiply(l),t)}hittest(t,e,i){const{viewMat3:s,tileMat3:o}=this.view,n=s.multiply(o),l=n.multiply(new glsl/* Vec3 */.eB(t.pos,1)),r=n.multiply(new glsl/* Vec3 */.eB(e.nextPos1,1)),a=n.multiply(new glsl/* Vec3 */.eB(e.nextPos2,1)),{distance:m,smallSymbolDistance:d,smallSymbolSizeThreshold:p}=this.hittestRequest,h=(0,glsl/* step */.PM)(i,p.multiply(.5)).multiply(m.subtract(d)),x=this.hittestRequest.position;return (0,glsl/* min */.jk)(j(x,l.xy,r.xy),j(x,l.xy,a.xy)).subtract(i).add(h)}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedLineShader_g)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_S))],AnimatedLineShader_A.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedLineShader_z))],AnimatedLineShader_A.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedMarkerShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedMarkerShader_R extends AAnimatedShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_R.prototype,"uv",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],AnimatedMarkerShader_R.prototype,"angle",void 0);class AnimatedMarkerShader_F extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"textureUVNextVertex2",void 0);class AnimatedMarkerShader_T extends H{}function U(t,e,i,s){return e.multiply(t.x).add(i.multiply(t.y)).add(s.multiply(t.z))}class AnimatedMarkerShader_q extends J{constructor(){super(...arguments),this.type="AnimatedMarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],uv:["textureUVNextVertex1","textureUVNextVertex2"]}}vertex(t,e){const i=t.uv.divide(this.mosaicInfo.size),{position:s,animationPointer:o,evalParams:l,isOutline:p,unscaledDistanceToPx:h,vvScale:x,strokeWidth:c,scaleSymbolsProportionally:y,scale:f,isSDF:w,baseSize:g,clip:v}=this._vertexPreamble(t,t.angle,t.lineLength||new glsl/* Float */.nt(0)),b=this._toNdc(s);let _=K(o,enums_o.fromColor,l);_=new glsl/* Vec4 */.Zb(_.rgb.multiply(_.a),_.a);let z=K(o,enums_o.toColor,l);z=new glsl/* Vec4 */.Zb(z.rgb.multiply(z.a),z.a);let P=K(o,enums_o.colorMix,l);P=new glsl/* Vec4 */.Zb(P.rgb.multiply(P.a),P.a);const M=K(o,enums_o.toOpacity,l).a,N=K(o,enums_o.opacityMix,l).a,R=vvUtils_r(this,t.id,_,(0,glsl.or)((0,utils/* getBitBool */.K5)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),new glsl/* Bool */.x(p))),F=(0,glsl/* mix */.jh)(R,z,P),T=vvUtils_n(this,t.id),U=(0,glsl/* mix */.jh)(T,M,N),q=F.multiply(U),A=this.clip(t.id,t.zoomRange).add(v.multiply(2)),I=h.multiply(x);return{glPosition:new glsl/* Vec4 */.Zb(b,A,1),uv:i,color:q.multiply(new glsl/* Float */.nt(1).subtract(p)),outlineColor:q.multiply(p),distanceToPx:I,strokeWidth:c.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),f,y)),isOutline:p,isSDF:w,...this.maybeRunHittest(t,e,{pos:t.pos,size:g,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:I,isSDF:w})}}fragment(t){let e=this._getColor(t.uv,{color:t.color,distanceToPx:t.distanceToPx,isSDF:t.isSDF,outlineColor:t.outlineColor,outlineSize:t.strokeWidth});return animationDebugFlags/* animationDebugFlags */.H.spotlightAnimatedSymbols&&(e=e.add(new glsl/* Vec4 */.Zb(0,.3,0,.3))),this.getFragmentOutput(e,t)}hittest(t,e,i){return (0,glsl/* ifElse */.Tk)((0,glsl/* lessThan */.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_hittestSmallMarker(t,e,i){const{position:s,distance:o,smallSymbolDistance:l}=this.hittestRequest,r=o.subtract(l),{viewMat3:a,tileMat3:n}=this.view,d=a.multiply(n).multiply(new glsl/* Vec3 */.eB(i.pos,1)).xy,m=i.size.multiply(.5);return (0,glsl/* distance */.Io)(d,s).subtract(m).add(r)}_hittestMarker(t,e,i){const s=this._vertexPreamble({...t},t.angle,new glsl/* Float */.nt(0)).position,o=this._vertexPreamble({...t,offset:e.offsetNextVertex1},t.angle,new glsl/* Float */.nt(0)).position,l=this._vertexPreamble({...t,offset:e.offsetNextVertex2},t.angle,new glsl/* Float */.nt(0)).position,a=this.hittestRequest.position,n=this.hittestRequest.distance,d=P(a,s,o,l);return (0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(d,n),d,this._hittestSamples(s,o,l,t,e,i))}_hittestSamples(t,e,i,s,o,l){const{outlineSize:n,isSDF:d,distanceToPx:m}=l,u=this.hittestRequest.position,p=this.hittestRequest.distance,h=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),(0,glsl/* negate */.ze)(p))),t,e,i),x=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(0,(0,glsl/* negate */.ze)(p))),t,e,i),c=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,(0,glsl/* negate */.ze)(p))),t,e,i),y=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),0)),t,e,i),v=hittestUtils_h(u,t,e,i),S=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,0)),t,e,i),b=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),p)),t,e,i),_=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(0,p)),t,e,i),C=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,p)),t,e,i),V=s.uv.divide(this.mosaicInfo.size),z=o.textureUVNextVertex1.divide(this.mosaicInfo.size),k=o.textureUVNextVertex2.divide(this.mosaicInfo.size),j={color:new glsl/* Vec4 */.Zb(1,1,1,1),outlineSize:n,outlineColor:new glsl/* Vec4 */.Zb(1,1,1,1),isSDF:d,distanceToPx:m};let D=new glsl/* Float */.nt(0);return D=D.add(hittestUtils_g(h).multiply(this._getColor(U(h,V,z,k),j).a)),D=D.add(hittestUtils_g(x).multiply(this._getColor(U(x,V,z,k),j).a)),D=D.add(hittestUtils_g(c).multiply(this._getColor(U(c,V,z,k),j).a)),D=D.add(hittestUtils_g(y).multiply(this._getColor(U(y,V,z,k),j).a)),D=D.add(hittestUtils_g(v).multiply(this._getColor(U(v,V,z,k),j).a)),D=D.add(hittestUtils_g(S).multiply(this._getColor(U(S,V,z,k),j).a)),D=D.add(hittestUtils_g(b).multiply(this._getColor(U(b,V,z,k),j).a)),D=D.add(hittestUtils_g(_).multiply(this._getColor(U(_,V,z,k),j).a)),D=D.add(hittestUtils_g(C).multiply(this._getColor(U(C,V,z,k),j).a)),(0,glsl/* step */.PM)(D,new glsl/* Float */.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_R)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_F))],AnimatedMarkerShader_q.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_T))],AnimatedMarkerShader_q.prototype,"fragment",null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js
var Technique = __webpack_require__(17730);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t extends Technique/* Technique */.j{constructor(){super(...arguments),this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL,this._input=null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js
var featureTechniqueUtils = __webpack_require__(43901);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedTechnique_l extends t{render(r,l){const{context:c,painter:f}=r,{target:g}=l,{freezeGlobalTime:p}=animationDebugFlags/* animationDebugFlags */.H,d=0,x=f.textureManager.animationStore.getTexture(c,d),h=[2/r.state.size[0],0,0,0,-2/r.state.size[1],0,-1,1,1],b=Array.from((0,mat3/* invert */.B8)((0,mat3f32/* create */.vt)(),h)),D=Array.from((0,mat3/* multiply */.lw)((0,mat3f32/* create */.vt)(),b,g.transforms.displayViewScreenMat3)),T=l.instance.getInput(),y=f.textureManager.getMosaicInfo(c,l.textureKey,!1),{optionalAttributes:z}=T,R=z.zoomRange,S=z.value1Position2Value2,j="accumulatedDistance"in z&&z.accumulatedDistance,A="segmentDirection"in z&&z.segmentDirection,I="normal"in z&&z.normal;f.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(r,l.target,T.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(r,l.target),mosaicInfo:y,animationInfo:{globalTime:!1===p?r.time/1e3:p,animationTextureSize:[x.descriptor.width,x.descriptor.height],animationTexture:{unit:6,texture:x},toScreen:D,toNdc:h,mapRotation:r.state.rotation,pixelRatio:r.state.pixelRatio},localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(l.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(r)},optionalAttributes:{zoomRange:R,value1Position2Value2:S,accumulatedDistance:j,segmentDirection:A,normal:I},useComputeBuffer:!0}),f.setPipelineState({...(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(r)}),f.submitDraw(r,l),!1===p&&g.requestRender()}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedTechniques.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedTechniques_m extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedMarker,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER,this.shaders={geometry:new AnimatedMarkerShader_q}}}class AnimatedTechniques_n extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedMarkerShift,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER,this.shaders={geometry:new AnimatedMarkerShader_q}}}class a extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedFill,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL,this.shaders={geometry:new AnimatedFillShader_f}}}class AnimatedTechniques_h extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedLine,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE,this.shaders={geometry:new AnimatedLineShader_A}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityPointShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DotDensityPointShader_z extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec2 */.ZY)],DotDensityPointShader_z.prototype,"pos",void 0);class DotDensityPointShader_P extends AFeatureShader_P{}class DotDensityPointShader_R extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPointShader_R.prototype,"dotSize",void 0);class b extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],b.prototype,"locations",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],b.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],b.prototype,"tileZoomFactor",void 0);const DotDensityPointShader_F=1e-6;class C extends GraphShaderModule/* GraphShaderModule */.A{constructor(){super(...arguments),this.type="DotDensityPointShader"}vertex(t){const o=new glsl/* Mat3 */.U(1,0,0,0,-1,0,0,1,1).multiply(new glsl/* Vec3 */.eB(t.pos.xy.divide(definitions/* tileSize */.CQ),1)),i=(0,glsl/* texture2D */.US)(this.draw.locations,o.xy),s=(0,glsl/* max */.T9)(this.instance.dotSize.divide(2),new glsl/* Float */.nt(1));let r=new glsl/* Float */.nt(0);r=r.add((0,glsl/* step */.PM)(i.a,new glsl/* Float */.nt(DotDensityPointShader_F)).multiply(2));let d=s.add(this.instance.dotSize);const n=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.add(.5),1)),a=new glsl/* Vec4 */.Zb(n.xy,r,1),p=this.instance.dotSize.divide(d),h=new glsl/* Float */.nt(-1).divide(s.divide(d));return d=d.multiply(this.draw.pixelRatio.multiply(this.draw.tileZoomFactor)),{glPosition:a,glPointSize:d,color:i,ratio:p,invEdgeRatio:h}}fragment(t){const o=(0,glsl/* length */.Bw)(t.glPointCoord.subtract(.5)).multiply(2),e=(0,glsl/* smoothstep */.TF)(new glsl/* Float */.nt(0),new glsl/* Float */.nt(1),t.invEdgeRatio.multiply(o.subtract(t.ratio)).add(1)),i=new GraphShaderModule/* FragmentOutput */.mm;return i.fragColor=t.color.multiply(e),i}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(DotDensityPointShader_R)],C.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(b)],C.prototype,"draw",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(ViewInfo_d)],C.prototype,"view",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPointShader_z))],C.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPointShader_P))],C.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityPolygonShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DotDensityPolygonShader_j extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Float */.nt)],DotDensityPolygonShader_j.prototype,"inverseArea",void 0);class DotDensityPolygonShader_C extends (/* unused pure expression or super */ null && (A)){}class V extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,2))],V.prototype,"isActive",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,8))],V.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],V.prototype,"dotValue",void 0);class DotDensityPolygonShader_ extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],DotDensityPolygonShader_.prototype,"dotTexture0",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],DotDensityPolygonShader_.prototype,"dotTexture1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"tileZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"tileDotsOverArea",void 0);class DotDensityPolygonShader_F extends B{constructor(){super(...arguments),this.type="DotDensityPolygonShader"}_dotThreshold(t,e,o){return t.divide(e).divide(o)}vertex(t){const e=new glsl/* Mat3 */.U(2/definitions/* tileSize */.CQ,0,0,0,-2/definitions/* tileSize */.CQ,0,-1,1,1).multiply(new glsl/* Vec3 */.eB(t.pos,1)),s=this.clip(t.id),i=new glsl/* Vec4 */.Zb(e.xy,s,1),r=this.storage.getVVData(t.id).multiply(this.instance.isActive.get(0)).multiply(t.inverseArea),l=this.storage.getDataDrivenData0(t.id).multiply(this.instance.isActive.get(1)).multiply(t.inverseArea),d=this.draw.tileZoomFactor.multiply(definitions/* tileSize */.CQ).divide(this.draw.pixelRatio),n=this._dotThreshold(r,this.instance.dotValue,this.draw.tileDotsOverArea),c=this._dotThreshold(l,this.instance.dotValue,this.draw.tileDotsOverArea),u=t.pos.add(.5).divide(d);return{glPosition:i,color:new glsl/* Vec4 */.Zb(0,0,0,0),textureCoords:u,thresholds0:n,thresholds1:c}}fragment(t){const e=new GraphShaderModule/* FragmentOutput */.mm,o=(0,glsl/* texture2D */.US)(this.draw.dotTexture0,t.textureCoords),i=(0,glsl/* texture2D */.US)(this.draw.dotTexture1,t.textureCoords),r=t.thresholds0.subtract(o),l=t.thresholds1.subtract(i);let d;const n=glsl/* Mat4 */.$I.fromColumns(this.instance.colors[0],this.instance.colors[1],this.instance.colors[2],this.instance.colors[3]),a=glsl/* Mat4 */.$I.fromColumns(this.instance.colors[4],this.instance.colors[5],this.instance.colors[6],this.instance.colors[7]);if(this.blending){const t=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),r),e=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),l),o=(0,glsl/* dot */.Om)(t,r).add((0,glsl/* dot */.Om)(e,l)),s=(0,glsl/* step */.PM)(o,new glsl/* Float */.nt(0)),i=new glsl/* Float */.nt(1).subtract(s),p=o.add(s),h=r.multiply(t).divide(p),c=l.multiply(e).divide(p),u=n.multiply(h).add(a.multiply(c));d=i.multiply(u)}else{const t=(0,glsl/* max */.T9)((0,utils/* max4 */.xf)(r),(0,utils/* max4 */.xf)(l)),e=(0,glsl/* step */.PM)(t,new glsl/* Float */.nt(0)),o=new glsl/* Float */.nt(1).subtract(e),s=(0,glsl/* step */.PM)(t,r),i=(0,glsl/* step */.PM)(t,l),p=n.multiply(s).add(a.multiply(i));d=o.multiply(p)}return e.fragColor=d,e}hittest(t){return hittestUtils_q(this.hittestRequest)}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],DotDensityPolygonShader_F.prototype,"blending",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(V)],DotDensityPolygonShader_F.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(DotDensityPolygonShader_)],DotDensityPolygonShader_F.prototype,"draw",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPolygonShader_j))],DotDensityPolygonShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AFeatureShader_P))],DotDensityPolygonShader_F.prototype,"fragment",null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/meshing/SimpleMesh.js
var SimpleMesh = __webpack_require__(2019);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(17050);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DotDensityResources_p={pos:{count:2,type:webgl_enums/* DataType */.pe.UNSIGNED_SHORT}};class DotDensityResources_f{constructor(){this._dotTextureSize=0,this._dotTextures=null,this._dotMesh=null}destroy(){this._disposeTextures(),this._dotFBO&&this._dotFBO.dispose(),this._dotMesh&&this._dotMesh.destroy()}getFBO(t){if(null==this._dotFBO){const s=definitions/* tileSize */.CQ,n=definitions/* tileSize */.CQ,h=new TextureDescriptor/* TextureDescriptor */.R(s,n);h.samplingMode=webgl_enums/* TextureSamplingMode */.Cj.NEAREST,h.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const d=new Renderbuffer/* Renderbuffer */.l(t,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,s,n));this._dotFBO=new FramebufferObject/* FramebufferObject */.H(t,h,d)}return this._dotFBO}getDotDensityMesh(t){if(null==this._dotMesh){const o=definitions/* tileSize */.CQ,r=o*o,i=2,n=new Int16Array(r*i);for(let t=0;t<o;t++)for(let e=0;e<o;e++)n[i*(e+t*o)]=e,n[i*(e+t*o)+1]=t;this._dotMesh=SimpleMesh/* SimpleMesh */.g.create(t,{primitive:webgl_enums/* PrimitiveType */.WR.POINTS,vertex:n,count:r,layout:DotDensityResources_p})}return this._dotMesh}getDotDensityTextures(e,s,o){if(this._dotTextureSize===s&&this._seed===o||(this._disposeTextures(),this._dotTextureSize=s,this._seed=o),null===this._dotTextures){const r=new RandomLCG/* default */.A(o);this._dotTextures=[this._allocDotDensityTexture(e,s,r),this._allocDotDensityTexture(e,s,r)]}return this._dotTextures}_disposeTextures(){if(this._dotTextures){for(let t=0;t<this._dotTextures.length;t++)this._dotTextures[t].dispose();this._dotTextures=null}}_allocDotDensityTexture(t,e,s){const r=new Float32Array(e*e*4);for(let o=0;o<r.length;o++)r[o]=s.getFloat();const i=new TextureDescriptor/* TextureDescriptor */.R;return i.dataType=webgl_enums/* PixelType */.ld.FLOAT,i.samplingMode=webgl_enums/* TextureSamplingMode */.Cj.NEAREST,i.width=e,i.height=e,new Texture/* Texture */.g(t,i,r)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class w extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.DotDensity,this.shaders={polygon:new DotDensityPolygonShader_F,point:new C,fill:new x},this._resources=new Map}render(e,t){(0,featureTechniqueUtils/* isHighlight */.dJ)(e)||(0,featureTechniqueUtils/* isHittest */.Eq)(e)?this._renderPolygons(e,t):this._renderDotDensity(e,t)}_renderPolygons(e,t){const{painter:i}=e;i.setShader({shader:this.shaders.fill,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),visualVariableColor:null,visualVariableOpacity:null},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:{zoomRange:!1},useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),i.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),i.submitDraw(e,t)}_renderDotDensity(o,r){const{context:s,painter:u,requiredLevel:c}=o,p=r.instance.getInput().uniforms,h=this._getOrCreateResourcesRecord(s),m=h.getDotDensityTextures(s,definitions/* tileSize */.CQ,p.seed),w=1/2**(c-r.target.key.level),g=definitions/* tileSize */.CQ,x=g*window.devicePixelRatio*g*window.devicePixelRatio,D=1/w*(1/w),y=p.dotScale?o.state.scale/p.dotScale:1,b=p.dotValue*y*D;u.setShader({shader:this.shaders.polygon,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(o,r.target),instance:{isActive:p.isActive,colors:p.colors,dotValue:Math.max(1,b)},draw:{dotTexture0:{unit:definitions/* textureBindingRenderer0 */.Cp,texture:m[0]},dotTexture1:{unit:definitions/* textureBindingRenderer1 */.vN,texture:m[1]},tileZoomFactor:w,pixelRatio:window.devicePixelRatio,tileDotsOverArea:x/(definitions/* tileSize */.CQ*window.devicePixelRatio*definitions/* tileSize */.CQ*window.devicePixelRatio)}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(o),blending:p.blending},optionalAttributes:{},useComputeBuffer:!1});const R=s.getViewport();s.setViewport(0,0,definitions/* tileSize */.CQ,definitions/* tileSize */.CQ);const v=s.getBoundFramebufferObject(),P=h.getFBO(s);s.bindFramebuffer(P),s.setClearColor(0,0,0,0),s.clear(webgl_enums/* FramebufferBit */.NV.COLOR),u.setPipelineState({color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}),u.updatePipelineState(s),u.submitDraw(o,r),s.bindFramebuffer(v),s.setViewport(R.x,R.y,R.width,R.height);const S=h.getFBO(s).colorTexture,_={shader:this.shaders.point,uniforms:{view:(0,featureTechniqueUtils/* getViewUniforms */.L4)(o,r.target),instance:{dotSize:p.dotSize},draw:{locations:{unit:definitions/* textureBindingRenderer0 */.Cp,texture:S},tileZoomFactor:1,pixelRatio:window.devicePixelRatio}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(o)},optionalAttributes:{},useComputeBuffer:!1};u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(o)),u.submitDrawMesh(s,_,h.getDotDensityMesh(s))}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e)}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new DotDensityResources_f,this._resources.set(e,t)),t}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.ComplexFill,this.shaders={geometry:new _}}render(e,n){const{context:u,painter:m}=e,p=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(n.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/utils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function utils_n(n){const t=1/n;return{antialiasing:t,blur:0+t}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/OutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OutlineFillShader_R extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],OutlineFillShader_R.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],OutlineFillShader_R.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],OutlineFillShader_R.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"zoomRange",void 0);class OutlineFillShader_A extends LineShader_A{}function OutlineFillShader_H(t,o,i){const{id:e,bitset:r}=o,s=(0,utils/* getBit */.mh)(r,constants/* bitsetTypeFillOutline */.Xx),m=(0,glsl/* greaterThan */.MM)(s,new glsl/* Float */.nt(.5)),d=LineShader_L(t,o),c=(0,glsl/* ifElse */.Tk)(m,d.halfWidth,new glsl/* Float */.nt(0)),f=vvUtils_n(t,e),v=vvUtils_r(t,e,o.color),V=(0,glsl/* ifElse */.Tk)(m,(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(r,constants/* bitsetOutlineUsesColorVV */.bB),v,o.color),v.multiply(f)),S=t.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(o.pos.xy,1)),j=t.clip(o.id),x=new glsl/* Vec4 */.Zb(S.xy,j,1),z=(0,glsl/* ifElse */.Tk)(m,d.glPosition,x),M=i&&t.maybeRunHittest(o,i,m);return{isOutline:s,color:V,opacity:new glsl/* Float */.nt(1),halfWidth:c,normal:d.normal,glPosition:z,...M}}class OutlineFillShader_k extends B{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(F)],OutlineFillShader_k.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],OutlineFillShader_k.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],OutlineFillShader_k.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],OutlineFillShader_k.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],OutlineFillShader_k.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],OutlineFillShader_k.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],OutlineFillShader_k.prototype,"visualVariableSizeUnitValue",void 0);class OutlineFillShader_q extends OutlineFillShader_k{constructor(){super(...arguments),this.type="OutlineFillShader"}vertex(t,o){return OutlineFillShader_H(this,t,o)}fragment(t){const{color:o,isOutline:i}=t,e=(0,glsl/* greaterThan */.MM)(i,new glsl/* Float */.nt(.5)),r=T(t,this.antialiasingControls.blur),s=(0,glsl/* ifElse */.Tk)(e,r,o),n=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(s,t,n)}hittest(t,o,i){return (0,glsl/* ifElse */.Tk)(i,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(OutlineFillShader_R)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],OutlineFillShader_q.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(OutlineFillShader_A))],OutlineFillShader_q.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/PatternFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternFillShader_w extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],PatternFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],PatternFillShader_w.prototype,"inverseRasterizationScale",void 0);class PatternFillShader_g extends AFeatureShader_P{}function PatternFillShader_j(t){const e=new glsl/* Float */.nt(1),r=new glsl/* Float */.nt(0);return new glsl/* Mat3 */.U(e.divide(t.x),r.divide(t.y),0,(0,glsl/* negate */.ze)(r.divide(t.x)),e.divide(t.y),0,0,0,1)}function O(t,e){const r=e.tlbr.xy,o=e.tlbr.zw,i=o.x.subtract(r.x),s=r.y.subtract(o.y),a=new glsl/* Vec2 */.ZY(i,s).multiply(e.inverseRasterizationScale),p=a.multiply(t.view.requiredZoomFactor),u=PatternFillShader_j(p),c=t.localTileOffset.getPatternOffsetAtTileOrigin(a).divide(p),d=new glsl/* Vec3 */.eB(e.pos,1);return{tileTextureCoord:u.multiply(d).xy.subtract(c),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function PatternFillShader_S(t,e){const r=(0,glsl/* mod */.zi)(t.tileTextureCoord,new glsl/* Float */.nt(1)),o=(0,glsl/* mix */.jh)(t.tlbr.xy,t.tlbr.zw,r),i=(0,glsl/* texture2D */.US)(e.texture,o);return t.color.multiply(i)}class PatternFillShader_T extends x{constructor(){super(...arguments),this.type="PatternFillShader"}vertex(t,e){return{...super.vertex(t,e),...O(this,t)}}fragment(t){const e=PatternFillShader_S(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],PatternFillShader_T.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],PatternFillShader_T.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],PatternFillShader_T.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternFillShader_g))],PatternFillShader_T.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/PatternOutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class y extends OutlineFillShader_R{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec4 */.Zb)],y.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],y.prototype,"inverseRasterizationScale",void 0);class PatternOutlineFillShader_S extends OutlineFillShader_A{}class PatternOutlineFillShader_x extends OutlineFillShader_q{constructor(){super(...arguments),this.type="PatternOutlineFillShader"}vertex(t,r){return{...OutlineFillShader_H(this,t,r),...O(this,t)}}fragment(t){const{isOutline:r}=t,e=(0,glsl/* greaterThan */.MM)(r,new glsl/* Float */.nt(.5)),o=T(t,this.antialiasingControls.blur),s=PatternFillShader_S(t,this.mosaicInfo),n=(0,glsl/* ifElse */.Tk)(e,o,s),p=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(n,t,p)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],PatternOutlineFillShader_x.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],PatternOutlineFillShader_x.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(y)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],PatternOutlineFillShader_x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternOutlineFillShader_S))],PatternOutlineFillShader_x.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ComplexOutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const ComplexOutlineFillShader_b=1/constants/* packPrecision */.cZ;class ComplexOutlineFillShader_w extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],ComplexOutlineFillShader_w.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],ComplexOutlineFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"angle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"aux1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"aux2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"aux3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"aux4",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"zoomRange",void 0);class ComplexOutlineFillShader_C extends PatternOutlineFillShader_S{}class ComplexOutlineFillShader_R extends OutlineFillShader_k{constructor(){super(...arguments),this.type="ComplexOutlineFillShader"}vertex(t,o){const{aux1:e,aux2:r,aux3:i,aux4:p}=t,a={...t,width:e,height:r,offset:i,scale:p.multiply(ComplexOutlineFillShader_b)},n={...t,halfWidth:e,referenceHalfWidth:r,offset:i,normal:p.subtract(constants/* signedToUnsignedByte */.v9).multiply(ComplexOutlineFillShader_b)},m=OutlineFillShader_H(this,n),u=ComplexFillShader_P(this,a),f=(0,glsl/* greaterThan */.MM)(m.isOutline,new glsl/* Float */.nt(.5));return{...m,...u,...this.maybeRunHittest(t,o,f)}}fragment(t){const{isOutline:o}=t,e=(0,glsl/* greaterThan */.MM)(o,new glsl/* Float */.nt(.5)),r=T(t,this.antialiasingControls.blur),i=Z(this,t),a=(0,glsl/* ifElse */.Tk)(e,r,i),n=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(a,t,n)}hittest(t,o,e){return (0,glsl/* ifElse */.Tk)(e,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],ComplexOutlineFillShader_R.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],ComplexOutlineFillShader_R.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexOutlineFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],ComplexOutlineFillShader_R.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexOutlineFillShader_C))],ComplexOutlineFillShader_R.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.ComplexOutlineFill,this.shaders={geometry:new ComplexOutlineFillShader_R}}render(e,a){const{context:u,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(u,a.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(a.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,a)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/FillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Fill,this.shaders={geometry:new x}}render(e,n){const{painter:a}=e,u=n.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target)},defines:(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),a.submitDraw(e,n)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/gradientFillConstants.js
var gradientFillConstants = __webpack_require__(5062);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GradientFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientFillShader_P extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],GradientFillShader_P.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],GradientFillShader_P.prototype,"relativePosition",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],GradientFillShader_P.prototype,"gradientMethod",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],GradientFillShader_P.prototype,"relativeGradientSize",void 0);class D extends AFeatureShader_P{}class GradientFillShader_A extends x{constructor(){super(...arguments),this.type="GradientFillShader"}vertex(t,e){const{tlbr:i,relativePosition:r,gradientMethod:o,relativeGradientSize:n}=t,d=(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(t.bitset,gradientFillConstants/* bitset */.Q.isAbsolute),this.view.displayZoomFactor,new glsl/* Float */.nt(1));return{...super.vertex(t,e),tlbr:i,relativePosition:r,gradientMethod:o,gradientSize:n.multiply(d),isDiscrete:(0,utils/* getBit */.mh)(t.bitset,gradientFillConstants/* bitset */.Q.isDiscrete)}}fragment(t){const{tlbr:e,relativePosition:i,gradientMethod:r,gradientSize:o,isDiscrete:g}=t,w=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(g,new glsl/* Float */.nt(.5)),o.subtract(1),new glsl/* Vec2 */.ZY(0)),b=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)(r,new glsl/* Float */.nt(gradientFillConstants/* gradientFillMethods */.m.rectangular)),()=>{const t=(0,glsl/* abs */.tn)(i).add(w).divide(o);return (0,utils/* oneMinus */.zb)((0,glsl/* max */.T9)(t.x,t.y))}],[(0,glsl/* equal */.LC)(r,new glsl/* Float */.nt(gradientFillConstants/* gradientFillMethods */.m.circular)),(0,utils/* oneMinus */.zb)((0,glsl/* sqrt */.RZ)((0,glsl/* dot */.Om)(i,i)).add(w.x).divide(o.x))],[!0,(0,utils/* oneMinus */.zb)(i.x.add(w.x).divide(o.x))]),j=new glsl/* Vec2 */.ZY((0,glsl/* clamp */.qE)(b,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),.5),S=(0,glsl/* mix */.jh)(e.xy,e.zw,j).divide(this.mosaicInfo.size),z=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,S),F=t.color.a;return this.getFragmentOutput(z.multiply(F),t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],GradientFillShader_A.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(GradientFillShader_P)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],GradientFillShader_A.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(D))],GradientFillShader_A.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/GradientFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientFillTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.GradientFill,this.shaders={geometry:new GradientFillShader_A},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/OutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OutlineFillTechnique_l extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.OutlineFill,this.shaders={geometry:new OutlineFillShader_q}}render(e,n){const{painter:u,pixelRatio:l}=e,m=n.instance.getInput();u.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,m.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),antialiasingControls:utils_n(l)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:m.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),u.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PatternFill,this.shaders={geometry:new PatternFillShader_T}}render(e,n){const{context:u,painter:m}=e,f=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(n.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PatternOutlineFill,this.shaders={geometry:new PatternOutlineFillShader_x}}render(e,a){const{context:l,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(l,a.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(a.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,a)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
;// ../node_modules/@arcgis/core/views/webgl/heatmapTextureUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class heatmapTextureUtils_l{constructor(e,t,r,o){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=o}}function heatmapTextureUtils_n(n,i){const{textureFloatLinear:s,colorBufferFloat:f}=n.capabilities,u=f?.textureFloat,_=f?.textureHalfFloat,c=f?.floatBlend,m=n.driverTest.floatBufferBlend.result;if(!u&&!_)throw new core_Error/* default */.A("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(c&&m||_))throw new core_Error/* default */.A("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(m?"":" This device claims support for EXT_float_blend, but does not actually support it."));const p=u&&c&&m,d=_,R=s,h=!!f?.R32F,b=!!f?.R16F;if(p&&R)return R||i.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.FLOAT,R?webgl_enums/* TextureSamplingMode */.Cj.LINEAR:webgl_enums/* TextureSamplingMode */.Cj.NEAREST,h?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,h?webgl_enums/* SizedPixelFormat */.H0.R32F:webgl_enums/* PixelFormat */.Ab.RGBA);if(d)return new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.HALF_FLOAT,webgl_enums/* TextureSamplingMode */.Cj.LINEAR,b?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,b?webgl_enums/* SizedPixelFormat */.H0.R16F:webgl_enums/* PixelFormat */.Ab.RGBA);throw new core_Error/* default */.A("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}const i=new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.HALF_FLOAT,webgl_enums/* TextureSamplingMode */.Cj.NEAREST,webgl_enums/* PixelFormat */.Ab.RGBA,webgl_enums/* PixelFormat */.Ab.RGBA);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const HeatmapResources_m=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources");class HeatmapResources_f{destroy(){this._accumulateFramebuffer=(0,maybe/* disposeMaybe */.WD)(this._accumulateFramebuffer),this._resolveGradientTexture=(0,maybe/* disposeMaybe */.WD)(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(e){if(null==this._qualityProfile){const r=heatmapTextureUtils_n(e,HeatmapResources_m());this._qualityProfile={...r,defines:{usesHalfFloatPrecision:r.dataType!==webgl_enums/* PixelType */.ld.FLOAT}}}return this._qualityProfile}ensureAccumulateFBO(e,r,t){if(null==this._accumulateFramebuffer){const{dataType:u,samplingMode:o,pixelFormat:m,internalFormat:f}=this.loadQualityProfile(e),h=new TextureDescriptor/* TextureDescriptor */.R(r,t);h.pixelFormat=m,h.internalFormat=f,h.dataType=u,h.samplingMode=o,h.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const c=new RenderbufferDescriptor/* RenderbufferDescriptor */.q(webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,r,t);this._accumulateFramebuffer=new FramebufferObject/* FramebufferObject */.H(e,h,c)}else{const{width:e,height:a}=this._accumulateFramebuffer;e===r&&a===t||this._accumulateFramebuffer.resize(r,t)}return this._accumulateFramebuffer}ensureResolveGradientTexture(e,r,t){if(null==this._resolveGradientTexture){const r=new TextureDescriptor/* TextureDescriptor */.R;r.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._resolveGradientTexture=new Texture/* Texture */.g(e,r),this._prevGradientHash=null}return this._prevGradientHash!==r&&(this._resolveGradientTexture.resize(t.length/4,1),this._resolveGradientTexture.setData(t),this._prevGradientHash=r),this._resolveGradientTexture}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/heatmapUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function heatmapUtils_n(n){return n?.25:1}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/HeatmapAccumulateShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapAccumulateShader_v extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],HeatmapAccumulateShader_v.prototype,"offset",void 0);class HeatmapAccumulateShader_x extends AFeatureShader_P{}class HeatmapAccumulateShader_g extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapAccumulateShader_g.prototype,"radius",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapAccumulateShader_g.prototype,"isFieldActive",void 0);class HeatmapAccumulateShader_F extends B{constructor(){super(...arguments),this.type="HeatmapAccumulateShader",this.usesHalfFloatPrecision=!1}vertex(t){const{radius:e,isFieldActive:s}=this.kernelControls,i=t.offset,l=s.multiply(this.storage.getVVData(t.id).x).add(new glsl/* Float */.nt(1).subtract(s)),o=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos,1)).add(this.view.displayViewMat3.multiply(new glsl/* Vec3 */.eB(i,0)).multiply(e)),r=this.clip(t.id);return{glPosition:new glsl/* Vec4 */.Zb(o.xy,r,1),offset:i,fieldValue:l,color:new glsl/* Vec4 */.Zb(0),...this.maybeRunHittest(t,{},null)}}fragment(t){const{offset:e,fieldValue:s}=t,i=(0,glsl/* length */.Bw)(e),l=(0,glsl/* step */.PM)(i,new glsl/* Float */.nt(1)),o=new glsl/* Float */.nt(1).subtract(i.multiply(i)),r=o.multiply(o),p=l.multiply(r).multiply(s).multiply(new glsl/* Float */.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new glsl/* Vec4 */.Zb(p),t)}hittest(t){const{viewMat3:e,tileMat3:s}=this.view,i=e.multiply(s).multiply(new glsl/* Vec3 */.eB(t.pos,1));return R(i.xy,this.kernelControls.radius,this.hittestRequest.position)}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],HeatmapAccumulateShader_F.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapAccumulateShader_g)],HeatmapAccumulateShader_F.prototype,"kernelControls",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapAccumulateShader_v))],HeatmapAccumulateShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapAccumulateShader_x))],HeatmapAccumulateShader_F.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/HeatmapResolveShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapResolveShader_g extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec2 */.ZY)],HeatmapResolveShader_g.prototype,"position",void 0);class HeatmapResolveShader_f extends GraphShaderModule/* FragmentInput */.HS{}class HeatmapResolveShader_h extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],HeatmapResolveShader_h.prototype,"texture",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],HeatmapResolveShader_h.prototype,"minAndInvRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapResolveShader_h.prototype,"normalization",void 0);class HeatmapResolveShader_w extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],HeatmapResolveShader_w.prototype,"texture",void 0);class HeatmapResolveShader_b extends GraphShaderModule/* GraphShaderModule */.A{constructor(){super(...arguments),this.type="HeatmapResolveShader",this.usesHalfFloatPrecision=!1}vertex(t){return{glPosition:new glsl/* Vec4 */.Zb(t.position.multiply(2).subtract(1),1,1),uv:t.position}}fragment(t){const{accumulatedDensity:e,gradient:o}=this;let r=(0,glsl/* texture2D */.US)(e.texture,t.uv).r.divide(new glsl/* Float */.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));r=r.multiply(e.normalization),r=r.subtract(e.minAndInvRange.x).multiply(e.minAndInvRange.y);const i=(0,glsl/* texture2D */.US)(o.texture,new glsl/* Vec2 */.ZY(r,.5)),n=new GraphShaderModule/* FragmentOutput */.mm;return n.fragColor=new glsl/* Vec4 */.Zb(i.rgb.multiply(i.a),i.a),n}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],HeatmapResolveShader_b.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapResolveShader_h)],HeatmapResolveShader_b.prototype,"accumulatedDensity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapResolveShader_w)],HeatmapResolveShader_b.prototype,"gradient",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapResolveShader_g))],HeatmapResolveShader_b.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapResolveShader_f))],HeatmapResolveShader_b.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapTechnique_h extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Heatmap,this.drawPhase=enums/* WGLDrawPhase */.S5.MAP|enums/* WGLDrawPhase */.S5.HITTEST|enums/* WGLDrawPhase */.S5.DEBUG,this.shaders={accumulate:new HeatmapAccumulateShader_F,resolve:new HeatmapResolveShader_b},this._isBound=!1,this._resources=new Map}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e),this._prevFBO=null,this._unbind()}render(e,t){const{context:n,painter:o,state:u}=e,a=t.instance.getInput(),{isFieldActive:l}=a.uniforms,d=this._getOrCreateResourcesRecord(n),c=d.loadQualityProfile(n);(0,featureTechniqueUtils/* isHittest */.Eq)(e)||this._bind(e,d,a),o.setShader({shader:this.shaders.accumulate,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),kernelControls:{radius:HeatmapTechnique_b(a,u),isFieldActive:l?1:0}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),...c.defines},optionalAttributes:{},useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)});const h=(0,featureTechniqueUtils/* isHittest */.Eq)(e)?HeatmapTechnique_:HeatmapTechnique_f;o.setPipelineState(h),o.submitDraw(e,t)}getStencilReference(e){return HeatmapTechnique_m(e)}renderResolvePass(e,t){if((0,featureTechniqueUtils/* isHittest */.Eq)(e))return;const{context:s,painter:i}=e,n=this._resources.get(s);if(null==this._prevFBO||null==this._prevViewport||!n?.initialized)return;const{defines:o}=n.loadQualityProfile(s),{minDensity:u,maxDensity:a,radius:l}=t.getInput().uniforms,d=8,c=9,h=n.accumulateFramebuffer,p=n.resolveGradientTexture,m={shader:this.shaders.resolve,uniforms:{accumulatedDensity:{texture:{unit:d,texture:h.colorTexture},minAndInvRange:[u,1/(a-u)],normalization:3/(l*l*Math.PI)},gradient:{texture:{unit:c,texture:p}}},defines:o,optionalAttributes:{},useComputeBuffer:!1};s.bindFramebuffer(this._prevFBO),s.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),s.bindTexture(h.colorTexture,d),s.bindTexture(p,c),i.setPipelineState(HeatmapTechnique_w),i.submitDrawMesh(s,m,i.quadMesh),this._unbind()}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new HeatmapResources_f,this._resources.set(e,t)),t}_unbind(){this._prevFBO=null,this._prevViewport=null,this._isBound=!1}_bind(e,t,r){if(this._isBound)return;const{context:s,state:i,pixelRatio:n}=e,o=s.getBoundFramebufferObject(),u=s.getViewport();this._prevFBO=o,this._prevViewport=u;const{gradient:a,gradientHash:l}=r.uniforms;t.ensureResolveGradientTexture(s,l,a);const{width:d,height:h}=u,m=HeatmapTechnique_p(HeatmapTechnique_b(r,i),n),f=d*m,_=h*m,w=t.ensureAccumulateFBO(s,f,_);s.blitFramebuffer(o,w,webgl_enums/* FramebufferBit */.NV.STENCIL),s.bindFramebuffer(w),s.setViewport(0,0,w.width,w.height),s.setColorMask(!0,!0,!0,!0),s.setClearColor(0,0,0,0),s.clear(webgl_enums/* FramebufferBit */.NV.COLOR),this._isBound=!0}}function HeatmapTechnique_p(e,t){const r=t>1.5?.25:.5;return e<1/(2*r)?1:r}function HeatmapTechnique_m(e){return e.key.level+1}const HeatmapTechnique_f={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:{write:!1,test:{ref:HeatmapTechnique_m,compare:webgl_enums/* CompareFunction */.MT.GEQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.REPLACE}}}},HeatmapTechnique_={...HeatmapTechnique_f,stencil:!1},HeatmapTechnique_w={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1};function HeatmapTechnique_b(e,t){const{referenceScale:r,radius:s}=e.uniforms;return s*(0!==r?r/t.scale:1)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TextShader_J=360/254;var TextShader_K;!function(t){t[t.Color=0]="Color",t[t.Outline=1]="Outline",t[t.Halo=2]="Halo"}(TextShader_K||(TextShader_K={}));class Q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],Q.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],Q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],Q.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],Q.prototype,"fontAndReferenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec4 */.Zb)],Q.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec4 */.Zb)],Q.prototype,"haloColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],Q.prototype,"outlineAndHaloSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],Q.prototype,"zoomRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],Q.prototype,"clipAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec4 */.Zb)],Q.prototype,"referenceSymbol",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(15,glsl/* Float */.nt)],Q.prototype,"visibility",void 0);class X extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],X.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],X.prototype,"offsetNextVertex2",void 0);class Y extends AFeatureShader_P{}class $ extends B{constructor(){super(...arguments),this.type="TextShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"]},this.textRenderPassType=TextShader_K.Color,this.isBackgroundPass=!1,this.isLabel=!1}clipLabel(t,e){const{clipAngle:o,zoomRange:s,visibility:l}=t,a=o.multiply(TextShader_J),r=(0,glsl/* abs */.tn)(this.view.rotation.subtract(a)),n=(0,glsl/* min */.jk)(new glsl/* Float */.nt(360).subtract(r),r);let d=new glsl/* Float */.nt(0);const f=(0,glsl/* floor */.RI)(this.view.currentZoom.multiply(definitions/* minMaxZoomPrecisionFactor */.fq)).divide(definitions/* minMaxZoomPrecisionFactor */.fq),h=s.x,v=s.y,w=new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(h,f)).multiply(2),x=(0,glsl/* step */.PM)(new glsl/* Float */.nt(90),n).multiply(2),b=new glsl/* Float */.nt(2).multiply(new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(f,v)));return d=d.add(e.multiply(w)),d=d.add(e.multiply(x)),d=d.add(b),l&&(d=d.add(l)),d}vertex(t,e){const i=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetTextIsBackground */.bg),s=new glsl/* Float */.nt(1).subtract(i);let l=t.fontAndReferenceSize[0];const a=t.fontAndReferenceSize[1];let r=l.divide(constants/* sdfFontSize */.au);const n=this.textRenderPassType===TextShader_K.Outline?t.outlineColor:this.textRenderPassType===TextShader_K.Halo?t.haloColor:this._getVertexColor(t),d=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos,1));let p=t.offset,u=new glsl/* Float */.nt(1),m=glsl/* Mat3 */.U.identity(),c=new glsl/* Vec2 */.ZY(0);if(this.isLabel){if(!t.referenceSymbol)throw new Error("InternalError: Optional attribute 'referenceSymbol' expected for labels");const e=t.referenceSymbol,i=e.xy,s=e.z,l=this._unpackDirection(e.w),a=vvUtils_l(this,t.id,s).divide(2),r=l.multiply(a.add(definitions/* labelPlacementOffsetPadding */.C2));c=i.add(r),p=p.add(c)}else{u=vvUtils_l(this,t.id,a).divide(a),l=l.multiply(u),r=r.multiply(u),p=p.multiply(u),m=vvUtils_u(this,t.id),p=m.multiply(new glsl/* Vec3 */.eB(p,0)).xy}const g=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetTextIsMapAligned */.ti),z=this._getViewRotationMatrix(g).multiply(new glsl/* Vec3 */.eB(p,0));let R=this.isLabel?this.clipLabel(t,g):this.clip(t.id,t.zoomRange);R=this.isBackgroundPass?R.add(s.multiply(2)):R.add(i.multiply(2));let j=new glsl/* Float */.nt(0);if(this.textRenderPassType===TextShader_K.Outline){R=R.add((0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(t.outlineAndHaloSize.x,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0)));j=new glsl/* Float */.nt(t.outlineAndHaloSize.x).divide(r).divide(constants/* maxSdfDistance */.$w)}if(this.textRenderPassType===TextShader_K.Halo){const e=t.outlineAndHaloSize.x,i=new glsl/* Float */.nt(t.outlineAndHaloSize.y);R=R.add((0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(i,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0)));j=i.add(e).divide(r).divide(constants/* maxSdfDistance */.$w)}const C=this.isLabel?(0,glsl/* greaterThan */.MM)(R,new glsl/* Float */.nt(1)):new glsl/* Bool */.x(!1);return{glPosition:new glsl/* Vec4 */.Zb(d.xy.add(z.xy),R,1),color:n,size:r,textureUV:t.textureUV.divide(this.mosaicInfo.size),antialiasingWidth:new glsl/* Float */.nt(.105*constants/* sdfFontSize */.au).divide(l).divide(this.view.pixelRatio),outlineDistanceOffset:j,...this.maybeRunHittest(t,e,{vvSizeAdjustment:u,vvRotation:m,labelOffset:c,labelClipped:C})}}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}fragment(t){const e=new glsl/* Float */.nt(2/8),i=new glsl/* Float */.nt(1).subtract(e),o=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t.textureUV).a;let s=i.subtract(t.outlineDistanceOffset);this.highlight&&(s=s.divide(2));const l=t.antialiasingWidth,a=(0,glsl/* smoothstep */.TF)(s.subtract(l),s.add(l),o);return this.getFragmentOutput(t.color.multiply(a),t)}hittest(t,e,{vvSizeAdjustment:i,vvRotation:o,labelOffset:s,labelClipped:l}){let a,r,n;this.isLabel?(a=new glsl/* Vec3 */.eB(t.offset.add(s),0),r=new glsl/* Vec3 */.eB(e.offsetNextVertex1.add(s),0),n=new glsl/* Vec3 */.eB(e.offsetNextVertex2.add(s),0)):(a=o.multiply(new glsl/* Vec3 */.eB(t.offset.multiply(i),0)),r=o.multiply(new glsl/* Vec3 */.eB(e.offsetNextVertex1.multiply(i),0)),n=o.multiply(new glsl/* Vec3 */.eB(e.offsetNextVertex2.multiply(i),0)));const{viewMat3:d,tileMat3:p}=this.view,u=d.multiply(p).multiply(new glsl/* Vec3 */.eB(t.pos,1)),y=u.add(p.multiply(a)).xy,m=u.add(p.multiply(r)).xy,c=u.add(p.multiply(n)).xy,h=P(this.hittestRequest.position,y.xy,m.xy,c.xy);return this.isLabel?(0,glsl/* ifElse */.Tk)(l,hittestUtils_q(this.hittestRequest),h):h}_unpackDirection(t){const e=new glsl/* Int */.Ai(t),i=(0,glsl/* bitRShift */.Sj)(e,new glsl/* Int */.Ai(2)),o=(0,glsl/* bitAnd */.nf)(e,new glsl/* Int */.Ai(3));return new glsl/* Vec2 */.ZY(new glsl/* Float */.nt(i).subtract(1),new glsl/* Float */.nt(o).subtract(1))}_getVertexColor(t){let e=t.color;if(this.visualVariableColor){const i=this.storage.getColorValue(t.id);e=this.visualVariableColor.getColor(i,t.color,new glsl/* Bool */.x(!1))}if(this.visualVariableOpacity){const i=this.storage.getOpacityValue(t.id),o=this.visualVariableOpacity.getOpacity(i);e=e.multiply(o)}return e}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],$.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],$.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],$.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],$.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],$.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],$.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],$.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],$.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"textRenderPassType",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"isBackgroundPass",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"isLabel",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(Q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(X))],$.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(Y))],$.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/labels/LabelTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LabelTechnique_l extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Label,this.shaders={geometry:new $},this.drawPhase=enums/* WGLDrawPhase */.S5.LABEL|enums/* WGLDrawPhase */.S5.LABEL_ALPHA|enums/* WGLDrawPhase */.S5.HITTEST,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.TEXT}render(e,s){const{context:t,painter:m}=e,u=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),l={...(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e),stencil:{write:!1,test:{ref:()=>255,compare:webgl_enums/* CompareFunction */.MT.GREATER,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}},c=s.instance.getInput(),h={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,s.target,c.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,s.target),mosaicInfo:m.textureManager.getMosaicInfo(t,s.textureKey)},defines:{...u,textRenderPassType:TextShader_K.Color,isBackgroundPass:!0,isLabel:!0},optionalAttributes:c.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)};m.setPipelineState(l),m.setShader(h),m.submitDraw(e,s),m.setShader({...h,defines:{...u,textRenderPassType:TextShader_K.Halo,isBackgroundPass:!1,isLabel:!0}}),m.submitDraw(e,s),m.setShader({...h,defines:{...u,textRenderPassType:TextShader_K.Color,isBackgroundPass:!1,isLabel:!0}}),m.submitDraw(e,s)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/gradientStrokeConstants.js
var gradientStrokeConstants = __webpack_require__(3322);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GradientStrokeShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function GradientStrokeShader_F(t){return (0,glsl/* step */.PM)(new glsl/* Float */.nt(0),t).multiply(2).subtract(1)}class GradientStrokeShader_G extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"gradientSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],GradientStrokeShader_G.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec4 */.Zb)],GradientStrokeShader_G.prototype,"tlbr",void 0);class GradientStrokeShader_I extends (/* unused pure expression or super */ null && (L)){}class GradientStrokeShader_P extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],GradientStrokeShader_P.prototype,"isColorPass",void 0);class GradientStrokeShader_k extends LineShader_{constructor(){super(...arguments),this.type="GradientStrokeShader"}vertex(t,e){const{totalLength:i,gradientSize:o,segmentDirection:s,tlbr:r}=t,p=LineShader_L(this,t),m=(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAlongLine),c=i.divide(this.view.displayZoomFactor),u=(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAbsoluteSize),(()=>{const t=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(m,new glsl/* Float */.nt(.5)),c,p.halfWidth);return o.divide(t)}),o),h=t.accumulatedDistance.add((0,glsl/* dot */.Om)(s,p.scaledOffset).divide(c)),y=r.divide(this.mosaicInfo.size.xyxy);return{...p,tlbr:y,relativePositionAlongLine:h,relativeGradientSize:u,isAlongLine:(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAlongLine),isDiscrete:(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isDiscrete),...this.maybeRunHittest(t,e,p.halfWidth)}}fragment(t){const{isAlongLine:e,isDiscrete:i,relativePositionAlongLine:o,relativeGradientSize:s,normal:r,tlbr:d}=t,v=LineShader_D(t,this.antialiasingControls.blur),f=GradientStrokeShader_F(r.y).multiply((0,glsl/* min */.jk)((0,glsl/* length */.Bw)(r),new glsl/* Float */.nt(1))),w=new glsl/* Float */.nt(.5).multiply(f).add(new glsl/* Float */.nt(.5)),b=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(e,new glsl/* Float */.nt(.5)),o,w),x=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(i,new glsl/* Float */.nt(.5)),s.subtract(1),new glsl/* Float */.nt(0)),j=(0,utils/* oneMinus */.zb)(b.add(x).divide(s)),L=(0,glsl/* mix */.jh)(d.xy,d.zw,new glsl/* Vec2 */.ZY((0,glsl/* clamp */.qE)(j,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),.5)),A=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,L),D=t.opacity.multiply(v),z=this.getFragmentOutput(A.multiply(D),t),G=(0,glsl/* step */.PM)(new glsl/* Float */.nt(.5),this.technique.isColorPass).multiply((0,has/* default */.A)("gradient-depth-epsilon")),I=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),r.y).multiply(new glsl/* Float */.nt((0,has/* default */.A)("gradient-depth-bias")).subtract(G));return z.glFragDepth=(0,glsl/* clamp */.qE)((0,glsl/* length */.Bw)(r).add(I),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),z}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],GradientStrokeShader_k.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(GradientStrokeShader_P)],GradientStrokeShader_k.prototype,"technique",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(GradientStrokeShader_G)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],GradientStrokeShader_k.prototype,"vertex",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/GradientStrokeTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientStrokeTechnique_d extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.GradientStroke,this.shaders={geometry:new GradientStrokeShader_k},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}_getShaderOptions(e,t,a){const{context:n,painter:p,pixelRatio:c}=e,l=t.instance.getInput();return{shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,l.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(c),mosaicInfo:p.textureManager.getMosaicInfo(n,t.textureKey),technique:{isColorPass:a}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:l.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}}render(e,t){const{painter:r}=e;if((0,featureTechniqueUtils/* isHittest */.Eq)(e)||(0,featureTechniqueUtils/* isHighlight */.dJ)(e)){const s=(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e);return r.setPipelineState(s),r.setShader(this._getShaderOptions(e,t,1)),void r.submitDraw(e,t)}e.context.setClearDepth(1),e.context.clear(webgl_enums/* FramebufferBit */.NV.DEPTH);const i={color:!1,depth:{write:{zNear:0,zFar:1},test:webgl_enums/* CompareFunction */.MT.LESS},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums/* CompareFunction */.MT.EQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}};r.setShader(this._getShaderOptions(e,t,0)),r.setPipelineState(i),r.submitDraw(e,t);const o={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:{write:!1,test:webgl_enums/* CompareFunction */.MT.LEQUAL},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums/* CompareFunction */.MT.EQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}};r.setShader(this._getShaderOptions(e,t,1)),r.setPipelineState(o),r.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/LineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Line,this.shaders={geometry:new LineShader_},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}render(e,t){const{painter:a,pixelRatio:u}=e,p=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(u)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),a.submitDraw(e,t)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/constants.js
var cim_constants = __webpack_require__(6276);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/TexturedLineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class W extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],W.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],W.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],W.prototype,"offsetAlongLine",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Float */.nt)],W.prototype,"capType",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec4 */.Zb)],W.prototype,"tlbr",void 0);class TexturedLineShader_R extends (/* unused pure expression or super */ null && (I)){}class TexturedLineShader_H extends LineShader_{constructor(){super(...arguments),this.type="TexturedLineShader"}_getDistanceRatio(t,e){const s=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetLineScaleDash */.kx);return s.multiply((0,glsl/* max */.T9)(e,new glsl/* Float */.nt(.25)).multiply(new glsl/* Float */.nt(2))).add(new glsl/* Float */.nt(1).subtract(s).multiply((0,screenUtils/* pt2px */.Lz)(1)))}_getSDFAlpha(t){const{halfWidth:e,normal:i,tlbr:a,patternSize:r,accumulatedDistance:l,offsetAlongLine:x,dashToPx:v,capType:D}=t,S=r.x.divide(cim_constants/* dashSdfRasterizationScale */.zA).multiply(v),j=(0,glsl/* fract */.jc)(l.add(x).divide(S)),A=(0,glsl/* mix */.jh)(a.xy,a.zw,new glsl/* Vec2 */.ZY(j,.5)),z=(0,utils/* rgba2float */.Rj)((0,glsl/* texture2D */.US)(this.mosaicInfo.texture,A)).multiply(2).subtract(1).multiply(cim_constants/* dashSdfDistanceNormalization */.gR).multiply(v),F=i.y.multiply(e),T=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)(D,new glsl/* Float */.nt(1)),z.subtract(e)],[(0,glsl/* equal */.LC)(D,new glsl/* Float */.nt(2)),(0,glsl/* sqrt */.RZ)((0,glsl/* pow */.n7)((0,glsl/* max */.T9)(z,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2)).add(F.multiply(F))).subtract(e)],[!0,z]),_=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.25).subtract(T),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return new glsl/* Vec4 */.Zb(_)}_getPatternColor(t){const{halfWidth:e,normal:i,color:s,accumulatedDistance:o,patternSize:a,sampleAlphaOnly:r,tlbr:l}=t,n=a.y.multiply(new glsl/* Float */.nt(2).multiply(e).divide(a.x)),y=(0,glsl/* fract */.jc)(o.divide(n)),h=new glsl/* Float */.nt(.5).multiply(i.y).add(new glsl/* Float */.nt(.5)),f=(0,glsl/* mix */.jh)(l.xy,l.zw,new glsl/* Vec2 */.ZY(h,y));let w=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,f);return null!=this.visualVariableColor&&(w=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(r,new glsl/* Float */.nt(.5)),new glsl/* Vec4 */.Zb(s.a),s)),w}vertex(t,e){const{segmentDirection:i,tlbr:s,bitset:o}=t,a=LineShader_L(this,t),r=t.accumulatedDistance.divide(this.view.displayZoomFactor).add((0,glsl/* dot */.Om)(i,a.scaledOffset)),l=new glsl/* Vec2 */.ZY(s.z.subtract(s.x),s.w.subtract(s.y)),n=s.divide(this.mosaicInfo.size.xyxy),c=(0,utils/* getBit */.mh)(o,constants/* bitsetLineIsSdf */.b5),m=(0,utils/* getBit */.mh)(o,constants/* bitsetGenericConsiderAlphaOnly */.cn),d=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(c,new glsl/* Float */.nt(.5)),this._getDistanceRatio(t,a.scaledHalfWidth),new glsl/* Float */.nt(1));return{...a,tlbr:n,patternSize:l,accumulatedDistance:r,isSDF:c,sampleAlphaOnly:m,dashToPx:d,offsetAlongLine:t.offsetAlongLine,capType:t.capType,...this.maybeRunHittest(t,e,a.halfWidth)}}fragment(t){const{color:e,opacity:i,isSDF:s}=t,o=LineShader_D(t,this.antialiasingControls.blur),a=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(s,new glsl/* Float */.nt(.5)),this._getSDFAlpha(t),this._getPatternColor(t)),r=e.multiply(i).multiply(o).multiply(a);return this.getFragmentOutput(r,t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],TexturedLineShader_H.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(W)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],TexturedLineShader_H.prototype,"vertex",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/TexturedLineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TexturedLineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.TexturedLine,this.shaders={geometry:new TexturedLineShader_H},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}render(e,t){const{context:a,painter:m,pixelRatio:p}=e,f=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MarkerShader_X extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Float */.nt)],MarkerShader_X.prototype,"placementAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],MarkerShader_X.prototype,"sdfDecodeCoeff",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"zoomRange",void 0);class MarkerShader_Y extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex2",void 0);class MarkerShader_Z extends AFeatureShader_P{}function MarkerShader_$(t,e,i,o){return e.multiply(t.x).add(i.multiply(t.y)).add(o.multiply(t.z))}function tt(t){return t.multiply(t).divide(128)}class et extends B{constructor(){super(...arguments),this.type="MarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],textureUV:["textureUVNextVertex1","textureUVNextVertex2"]}}vertex(t,e){const i=tt(t.sizing.x),o=tt(t.sizing.y),s=tt(t.sizing.z),l=t.placementAngle,r=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.isSDF),y=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.isMapAligned),h=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.scaleSymbolsProportionally),c=(0,utils/* getBitBool */.K5)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),x=vvUtils_n(this,t.id),v=vvUtils_r(this,t.id,t.color,c).multiply(x),f=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.xy,1)),V=vvUtils_l(this,t.id,s).divide(s),w=i.multiply(V),S=t.offset.xy.multiply(V);let b=o.multiply(h.multiply(V.subtract(1)).add(1));b=(0,glsl/* min */.jk)(b,(0,glsl/* max */.T9)(w.subtract(.99),new glsl/* Float */.nt(0)));const g=(0,glsl/* max */.T9)(b,new glsl/* Float */.nt(1)),C=(0,glsl/* min */.jk)(b,new glsl/* Float */.nt(1)),z=glsl/* Mat3 */.U.fromRotation(l.multiply(constants/* c256ToRad */.rp)),_=vvUtils_u(this,t.id),j=this._getViewRotationMatrix(y).multiply(_).multiply(z).multiply(new glsl/* Vec3 */.eB(S.xy,0)),U=this.clip(t.id,t.zoomRange),N=new glsl/* Vec4 */.Zb(f.xy.add(j.xy),U,1),D=t.textureUV.divide(this.mosaicInfo.size),F=t.outlineColor.multiply(C),k=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.overrideOutlineColor),I=t.sdfDecodeCoeff.multiply(w);return{glPosition:N,color:v,textureUV:D,outlineColor:F,outlineSize:g,distanceToPx:I,isSDF:r,overrideOutlineColor:k,...this.maybeRunHittest(t,e,{pos:t.pos,size:w,sizeCorrection:V,isMapAligned:y,vvRotationMat3:_,placementMat3:z,outlineSize:g,distanceToPx:I,isSDF:r})}}fragment(t){const e=this._getColor(t.textureUV,t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return (0,glsl/* ifElse */.Tk)((0,glsl/* lessThan */.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getViewScreenMatrix(t){const e=this.view.viewMat3.multiply(this.view.tileMat3),i=this.view.tileMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getColor(t,e){return (0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(e.isSDF,new glsl/* Float */.nt(1)),this._getSDFColor(t,e),this._getSpriteColor(t,e))}_getSpriteColor(t,e){return (0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t).multiply(e.color)}_getSDFColor(t,e){const i=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t),o=new glsl/* Float */.nt(.5).subtract((0,utils/* rgba2float */.Rj)(i)).multiply(e.distanceToPx).multiply(constants/* softEdgeRatio */.V5),s=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(o),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),l=e.color.multiply(s);let r=e.outlineSize;this.highlight&&(r=(0,glsl/* max */.T9)(r,e.overrideOutlineColor.multiply(4)));const a=r.multiply(.5),p=(0,glsl/* abs */.tn)(o).subtract(a),d=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(p),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),m=(0,glsl/* mix */.jh)(e.outlineColor,e.color,e.overrideOutlineColor).multiply(d);return new glsl/* Float */.nt(1).subtract(m.a).multiply(l).add(m)}_hittestSmallMarker(t,e,i){const{position:o,distance:s,smallSymbolDistance:l}=this.hittestRequest,r=s.subtract(l),{viewMat3:p,tileMat3:n}=this.view,u=p.multiply(n).multiply(new glsl/* Vec3 */.eB(i.pos,1)).xy,d=i.size.multiply(.5);return (0,glsl/* distance */.Io)(u,o).subtract(d).add(r)}_hittestMarker(t,e,i){const{pos:o,sizeCorrection:s,isMapAligned:l}=i,r=new glsl/* Vec3 */.eB(t.offset.multiply(s),0),p=new glsl/* Vec3 */.eB(e.offsetNextVertex1.multiply(s),0),n=new glsl/* Vec3 */.eB(e.offsetNextVertex2.multiply(s),0),{viewMat3:u,tileMat3:d}=this.view,m=u.multiply(d).multiply(new glsl/* Vec3 */.eB(o,1)),h=this._getViewScreenMatrix(l).multiply(i.vvRotationMat3).multiply(i.placementMat3),c=m.add(h.multiply(r)).xy,x=m.add(h.multiply(p)).xy,v=m.add(h.multiply(n)).xy,f=this.hittestRequest.position,V=this.hittestRequest.distance,w=P(f,c,x,v);return (0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(w,V),w,this._hittestSamples(c,x,v,t,e,i))}_hittestSamples(t,e,i,o,s,l){const{outlineSize:r,isSDF:a,distanceToPx:p}=l,n=this.hittestRequest.position,d=this.hittestRequest.distance,y=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),(0,glsl/* negate */.ze)(d))),t,e,i),h=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(0,(0,glsl/* negate */.ze)(d))),t,e,i),c=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,(0,glsl/* negate */.ze)(d))),t,e,i),x=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),0)),t,e,i),v=hittestUtils_h(n,t,e,i),f=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,0)),t,e,i),V=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),d)),t,e,i),w=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(0,d)),t,e,i),S=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,d)),t,e,i),M=o.textureUV.divide(this.mosaicInfo.size),z=s.textureUVNextVertex1.divide(this.mosaicInfo.size),_=s.textureUVNextVertex2.divide(this.mosaicInfo.size),j={color:new glsl/* Vec4 */.Zb(1),outlineColor:new glsl/* Vec4 */.Zb(1),overrideOutlineColor:new glsl/* Float */.nt(1),outlineSize:r,distanceToPx:p,isSDF:a};let R=new glsl/* Float */.nt(0);return R=R.add(hittestUtils_g(y).multiply(this._getColor(MarkerShader_$(y,M,z,_),j).a)),R=R.add(hittestUtils_g(h).multiply(this._getColor(MarkerShader_$(h,M,z,_),j).a)),R=R.add(hittestUtils_g(c).multiply(this._getColor(MarkerShader_$(c,M,z,_),j).a)),R=R.add(hittestUtils_g(x).multiply(this._getColor(MarkerShader_$(x,M,z,_),j).a)),R=R.add(hittestUtils_g(v).multiply(this._getColor(MarkerShader_$(v,M,z,_),j).a)),R=R.add(hittestUtils_g(f).multiply(this._getColor(MarkerShader_$(f,M,z,_),j).a)),R=R.add(hittestUtils_g(V).multiply(this._getColor(MarkerShader_$(V,M,z,_),j).a)),R=R.add(hittestUtils_g(w).multiply(this._getColor(MarkerShader_$(w,M,z,_),j).a)),R=R.add(hittestUtils_g(S).multiply(this._getColor(MarkerShader_$(S,M,z,_),j).a)),(0,glsl/* step */.PM)(R,new glsl/* Float */.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],et.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],et.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],et.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],et.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],et.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],et.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],et.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],et.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(MarkerShader_X)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(MarkerShader_Y))],et.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(MarkerShader_Z))],et.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MarkerTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Marker,this.shaders={geometry:new et},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey,!0)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js + 1 modules
var TypedShaderProgram = __webpack_require__(51487);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GLSLShaderModule.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(){this.computeAttributes={}}get locationsMap(){const t=new Map;for(const e in this.locations)t.set(e,this.locations[e].index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set(Object.keys(this.options));this._optionPropertyKeys=t}return this._optionPropertyKeys}get _transformFeedbackBindings(){return[]}get locationInfo(){if(!this._locationInfo){const e=this.locationsMap,o=Array.from(e.entries()).map((([t,e])=>`${t}.${e}`)).join("."),n=(0,string/* numericHash */.Wm)(o);this._locationInfo={hash:n,stringHash:o,locations:e,computeAttributeMap:this.computeAttributes}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const[e,o]of this.locationsMap.entries())t.set("a_"+e,o);return t}getShaderKey(t,e,o){return`${Object.keys(t).map((e=>`${e}.${t[e]}`)).join(".")}.${Object.keys(o).filter((t=>o[t])).map((t=>`${t}_${o[t].toString()}`)).join(".")}.${Object.keys(e).filter((t=>this.optionPropertyKeys.has(t))).join(".")}`}getProgram(t,o,n,r){let i="",s="";for(const e in n)if(n[e]){const t="boolean"==typeof n[e]?`#define ${e}\n`:`#define ${e} ${n[e]}\n`;i+=t,s+=t}return i+=this.vertexShader,s+=this.fragmentShader,new TypedShaderProgram/* TypedShaderProgram */.K(i,s,this.renamedLocationsMap,this.locationInfo,this._getUniformBindings(o),this._transformFeedbackBindings)}_getUniformBindings(t){const e=[];for(const o in this.required){const t=this.required[o];e.push({uniformHydrated:null,shaderModulePath:o,uniformName:o,uniformType:t.type,uniformArrayElementType:GLSLShaderModule_n(t),uniformArrayLength:r(t)})}for(const o in t){const i=this.options[o];if(t[o])for(const t in i){const s=i[t];e.push({uniformHydrated:null,shaderModulePath:`${o}.${t}`,uniformName:t,uniformType:s.type,uniformArrayElementType:GLSLShaderModule_n(s),uniformArrayLength:r(s)})}}return e}}const GLSLShaderModule_n=t=>"array"===t.type?t.elementType?.type:void 0,r=t=>"array"===t.type?t.size:void 0;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js + 1 modules
var resolver = __webpack_require__(75472);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/pieChart/PieChartShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const PieChartShader_p={hittestDist:glsl/* Float */.nt,hittestPos:glsl/* Vec2 */.ZY},PieChartShader_y={filterFlags:glsl/* Sampler2D */.z7,animation:glsl/* Sampler2D */.z7,visualVariableData:glsl/* Sampler2D */.z7,dataDriven0:glsl/* Sampler2D */.z7,dataDriven1:glsl/* Sampler2D */.z7,dataDriven2:glsl/* Sampler2D */.z7,gpgpu:glsl/* Sampler2D */.z7,size:glsl/* Float */.nt},PieChartShader_d={displayViewScreenMat3:glsl/* Mat3 */.U,displayViewMat3:glsl/* Mat3 */.U,displayMat3:glsl/* Mat3 */.U,viewMat3:glsl/* Mat3 */.U,tileMat3:glsl/* Mat3 */.U,displayZoomFactor:glsl/* Float */.nt,requiredZoomFactor:glsl/* Float */.nt,tileOffset:glsl/* Vec2 */.ZY,currentScale:glsl/* Float */.nt,currentZoom:glsl/* Float */.nt,metersPerSRUnit:glsl/* Float */.nt};class PieChartShader_u extends o{constructor(){super(...arguments),this.vertexShader=(0,resolver/* resolveIncludes */.Q)("materials/pie/pie.vert"),this.fragmentShader=(0,resolver/* resolveIncludes */.Q)("materials/pie/pie.frag"),this.required={...PieChartShader_y,...PieChartShader_d,outlineWidth:glsl/* Float */.nt,colors:glsl/* FixedArray */.My,defaultColor:glsl/* Vec4 */.Zb,othersColor:glsl/* Vec4 */.Zb,outlineColor:glsl/* Vec4 */.Zb,donutRatio:glsl/* Float */.nt,sectorThreshold:glsl/* Float */.nt},this.options={hittestUniforms:PieChartShader_p,visualVariableSizeMinMaxValue:{minMaxValueAndSize:glsl/* Vec4 */.Zb},visualVariableSizeScaleStops:{sizes:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},values:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},visualVariableSizeStops:{sizes:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},values:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},visualVariableSizeUnitValue:{unitValueToPixelsRatio:glsl/* Float */.nt},visualVariableOpacity:{opacities:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},opacityValues:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},highlightUniforms:{highlightAll:glsl/* Float */.nt,activeReasons:glsl/* Float */.nt}},this.locations={pos:{index:0,type:glsl/* Vec2 */.ZY},id:{index:1,type:glsl/* Vec3 */.eB},bitset:{index:2,type:glsl/* Float */.nt},offset:{index:3,type:glsl/* Vec2 */.ZY},texCoords:{index:4,type:glsl/* Vec2 */.ZY},size:{index:5,type:glsl/* Vec2 */.ZY},referenceSize:{index:6,type:glsl/* Float */.nt},zoomRange:{index:7,type:glsl/* Vec2 */.ZY}},this.defines={VV_SIZE_MIN_MAX_VALUE:"boolean",VV_SIZE_SCALE_STOPS:"boolean",VV_SIZE_FIELD_STOPS:"boolean",VV_SIZE_UNIT_VALUE:"boolean",VV_OPACITY:"boolean",HITTEST:"boolean",numberOfFields:"number",highlight:"boolean",inside:"boolean",outside:"boolean"}}setNumberOfFields(e){this.required.colors={...glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,e),type:"array",elementType:glsl/* Vec4 */.Zb,size:e}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/pieChart/PieChartTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PieChartTechnique_n extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PieChart,this.shaders={geometry:new PieChartShader_u},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER}render(e,t){const{painter:o}=e,{instance:u,target:n}=t,l=this.shaders.geometry,m=u.getInput(),f=m.uniforms.numberOfFields,S=(0,featureTechniqueUtils/* isHittest */.Eq)(e),V=(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n),d=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e);l.setNumberOfFields(f),o.setShader({shader:l,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,m.uniforms.shader),...V.storage,...V.view,...V.highlight,highlightUniforms:V.highlight,hittestUniforms:V.hittestRequest?{hittestDist:V.hittestRequest?.distance,hittestPos:V.hittestRequest?.position}:null},defines:{VV_SIZE_MIN_MAX_VALUE:!!m.uniforms.shader.visualVariableSizeMinMaxValue,VV_SIZE_SCALE_STOPS:!!m.uniforms.shader.visualVariableSizeScaleStops,VV_SIZE_FIELD_STOPS:!!m.uniforms.shader.visualVariableSizeStops,VV_SIZE_UNIT_VALUE:!!m.uniforms.shader.visualVariableSizeUnitValue,VV_OPACITY:!!m.uniforms.shader.visualVariableOpacity,HITTEST:S,highlight:V.highlight?1:0,...d,numberOfFields:f},optionalAttributes:{},useComputeBuffer:S}),o.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),o.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TextTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Text,this.shaders={geometry:new $},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.TEXT}render(e,s){const{context:n,painter:u}=e,m=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),p=s.instance.getInput(),f={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,s.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,s.target),mosaicInfo:u.textureManager.getMosaicInfo(n,s.textureKey)},defines:{...m,isBackgroundPass:!0,isLabel:!1,textRenderPassType:TextShader_K.Color},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)};u.setShader(f),u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Halo}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Outline}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Color}}),u.submitDraw(e,s)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TechniqueRegistry_F={fill:new u,patternFill:new PatternFillTechnique_m,complexFill:new ComplexFillTechnique_m,gradientFill:new GradientFillTechnique_u,outlineFill:new OutlineFillTechnique_l,patternOutlineFill:new PatternOutlineFillTechnique_m,complexOutlineFill:new ComplexOutlineFillTechnique_m,marker:new MarkerTechnique_u,pieChart:new PieChartTechnique_n,line:new LineTechnique_p,texturedLine:new TexturedLineTechnique_p,gradientStroke:new GradientStrokeTechnique_d,text:new TextTechnique_m,label:new LabelTechnique_l,heatmap:new HeatmapTechnique_h,dotDensity:new w,animatedMarker:new AnimatedTechniques_m,animatedMarkerShift:new AnimatedTechniques_n,animatedFill:new a,animatedLine:new AnimatedTechniques_h};function TechniqueRegistry_x(){for(const e in TechniqueRegistry_F){TechniqueRegistry_F[e].startup()}}function TechniqueRegistry_k(e){for(const i in TechniqueRegistry_F){TechniqueRegistry_F[i].shutdown(e)}}


/***/ }),

/***/ 98826:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ e),
/* harmony export */   Y: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,t;!function(e){e[e.AnimatedFill=0]="AnimatedFill",e[e.AnimatedLine=1]="AnimatedLine",e[e.AnimatedMarker=2]="AnimatedMarker",e[e.AnimatedMarkerShift=3]="AnimatedMarkerShift",e[e.Bitmap=4]="Bitmap",e[e.Blend=5]="Blend",e[e.ComplexFill=6]="ComplexFill",e[e.ComplexOutlineFill=7]="ComplexOutlineFill",e[e.DotDensity=8]="DotDensity",e[e.Fill=9]="Fill",e[e.GradientFill=10]="GradientFill",e[e.GradientStroke=11]="GradientStroke",e[e.Grid=12]="Grid",e[e.Heatmap=13]="Heatmap",e[e.Label=14]="Label",e[e.Line=15]="Line",e[e.Magnifier=16]="Magnifier",e[e.Marker=17]="Marker",e[e.OutlineFill=18]="OutlineFill",e[e.Overlay=19]="Overlay",e[e.PatternFill=20]="PatternFill",e[e.PatternOutlineFill=21]="PatternOutlineFill",e[e.PieChart=22]="PieChart",e[e.Test=23]="Test",e[e.Text=24]="Text",e[e.TexturedLine=25]="TexturedLine",e[e.VideoScreen=26]="VideoScreen"}(e||(e={})),function(e){e[e.RasterColorizer=0]="RasterColorizer",e[e.RasterProcessor=1]="RasterProcessor",e[e.Aspect=2]="Aspect",e[e.BandArithmetic=3]="BandArithmetic",e[e.ColormapToRGB=4]="ColormapToRGB",e[e.CompositeBand=5]="CompositeBand",e[e.ComputeChange=6]="ComputeChange",e[e.ContrastBrightness=7]="ContrastBrightness",e[e.Convolution=8]="Convolution",e[e.Curvature=9]="Curvature",e[e.ExtractBand=10]="ExtractBand",e[e.Grayscale=11]="Grayscale",e[e.Hillshade=12]="Hillshade",e[e.Local=13]="Local",e[e.Mask=14]="Mask",e[e.NDVI=15]="NDVI",e[e.Remap=16]="Remap",e[e.Reproject=17]="Reproject",e[e.ShadedRelief=18]="ShadedRelief",e[e.Slope=19]="Slope",e[e.Statistics=20]="Statistics",e[e.Stretch=21]="Stretch"}(t||(t={}));


/***/ }),

/***/ 21485:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ o),
/* harmony export */   U: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59515);
/* harmony import */ var _markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64723);
/* harmony import */ var _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(71858);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .MeshWriter */ .r{}function r(e){const{sprite:o,isMapAligned:r,colorLocked:i,scaleSymbolsProportionally:l,isStroke:m}=e;let n=0;return r&&(n|=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getBitMask */ .mR)(_markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__/* .MarkerConstants */ .c.bitset.isMapAligned)),i&&(n|=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getBitMask */ .mR)(_markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__/* .MarkerConstants */ .c.bitset.colorLocked)),o.sdf&&(n|=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getBitMask */ .mR)(_markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__/* .MarkerConstants */ .c.bitset.isSDF)),l&&(n|=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getBitMask */ .mR)(_markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__/* .MarkerConstants */ .c.bitset.scaleSymbolsProportionally)),m&&(n|=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getBitMask */ .mR)(_markers_markerConstants_js__WEBPACK_IMPORTED_MODULE_1__/* .MarkerConstants */ .c.bitset.isStroke)),n}


/***/ }),

/***/ 83455:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GE: () => (/* binding */ d),
/* harmony export */   Q5: () => (/* binding */ y),
/* harmony export */   Sy: () => (/* binding */ r),
/* harmony export */   Tx: () => (/* binding */ S),
/* harmony export */   YE: () => (/* binding */ k),
/* harmony export */   Z6: () => (/* binding */ s),
/* harmony export */   bU: () => (/* binding */ l),
/* harmony export */   cY: () => (/* binding */ f),
/* harmony export */   g7: () => (/* binding */ N),
/* harmony export */   id: () => (/* binding */ m),
/* harmony export */   jo: () => (/* binding */ a),
/* harmony export */   k3: () => (/* binding */ p),
/* harmony export */   n1: () => (/* binding */ F),
/* harmony export */   qb: () => (/* binding */ T),
/* harmony export */   uv: () => (/* binding */ O),
/* harmony export */   ve: () => (/* binding */ x),
/* harmony export */   zK: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _animations_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76849);
/* harmony import */ var _AnimatedMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21485);
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59515);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .minMaxZoomPrecisionFactor */ .fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getMinMaxZoom */ .My)(t,e)},s={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:({value1Position2Value2:t})=>((0,_animations_utils_js__WEBPACK_IMPORTED_MODULE_1__/* .assert */ .vA)(t),t)},p={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:()=>[0,0,0,1]},r={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:1,packPrecisionFactor:1,pack:()=>0},l={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:1,packPrecisionFactor:1,packTessellation:({lineLength:t})=>t},k={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},u={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]},T={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[t,e]},m={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},y={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:_AnimatedMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .packAnimatedBitset */ .U},F={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT,count:2,pack:"position",packPrecisionFactor:1},f={marker:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:2,packAlternating:{count:4,pack:({texelDimensions:t})=>[[-.5*t[0],-.5*t[1]],[.5*t[0],-.5*t[1]],[-.5*t[0],.5*t[1]],[.5*t[0],.5*t[1]]]}},line:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:2,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e},{baseSize:o})=>[t*o/2,e*o/2]},fill:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT,count:2,packTessellation:()=>[0,0]}},O={marker:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:1,packAlternating:{count:4,packTessellation:({texXmax:t,texXmin:e,texYmax:o,texYmin:i})=>[[e,i],[t,i],[e,o],[t,o]]}}},S={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:o,width:i,height:c}=t,n=o.x+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .spritePadding */ .hM,a=o.y+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .spritePadding */ .hM;return[n+1,a+1,n+i-1,a+c-1]}},d={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:4,pack:({animations:t,baseSize:e,referenceSize:o})=>[t.dataColumn,t.dataRow,e,o]},x={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:8,pack:({strokeWidth:t,pixelDimensions:e,baseSize:o,sprite:i,sizeRatio:c})=>{const n=Math.max(o*i.width/i.height,o),a=i.sdfDecodeCoeff*n*c;return[e[0],e[1],t,a]}},N={type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.BYTE,count:1,packTessellation:({angle:t})=>t};


/***/ }),

/***/ 72189:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony export dotDensityVertexSpec */
/* harmony import */ var _fill_AFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(46336);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={createComputedParams:e=>e,optionalAttributes:{},attributes:{id:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE,count:1},pos:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.FLOAT,count:1,packTessellation:({inverseArea:e})=>e}}};class s extends _fill_AFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .AFillMeshWriter */ .N{constructor(){super(...arguments),this.vertexSpec=r}createTesselationParams(e){return{inverseArea:1/e.readGeometryArea()}}}


/***/ }),

/***/ 46336:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _geometry_libtess_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1918);
/* harmony import */ var _mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62823);
/* harmony import */ var _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71858);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=100,n=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("featurelayer-fast-triangulation-enabled");class a extends _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_3__/* .MeshWriter */ .r{async loadDependencies(){await Promise.all([super.loadDependencies(),(0,_geometry_libtess_js__WEBPACK_IMPORTED_MODULE_1__/* .loadLibtess */ .F)()])}_write(e,t,r){const s=r?.asOptimized()??t.readGeometryForDisplay(),i=this._clip(s);i&&(e.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(e,t,i),e.recordEnd())}_clip(e){if(!e)return null;const r=this.hasEffects;return (0,_mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .clipMarshall */ .FE)(e,r?256:8)}_writeGeometry(e,t,i){const a=i.maxLength>o,c=[],l=this.createTesselationParams(t);if(!a&&n&&(0,_mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .triangulate */ .lO)(c,i))return void(c.length&&this._writeVertices(e,t,i.coords,l,c));const d=(0,_mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .triangulateLibtess */ .XZ)(i);this._writeVertices(e,t,d,l)}_writeVertices(e,t,r,s,i){const o=t.getDisplayId(),n=e.vertexCount(),a=this.hasEffects;let c=0;if(i)for(const l of i){const t=r[2*l],i=r[2*l+1];a&&e.recordBounds(t,i,0,0),this._writeVertex(e,o,t,i,s),c++}else for(let l=0;l<r.length;l+=2){const t=Math.round(r[l]),i=Math.round(r[l+1]);a&&e.recordBounds(t,i,0,0),this._writeVertex(e,o,t,i,s),c++}e.indexEnsureSize(c);for(let l=0;l<c;l++)e.indexWrite(l+n)}}


/***/ }),

/***/ 1831:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KE: () => (/* binding */ h),
/* harmony export */   KI: () => (/* binding */ n),
/* harmony export */   lB: () => (/* binding */ l),
/* harmony export */   oI: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89882);
/* harmony import */ var _vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(15946);
/* harmony import */ var _meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59515);
/* harmony import */ var _PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24737);
/* harmony import */ var _shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32520);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(e){const{sprite:o,aspectRatio:s,scaleProportionally:r}=e,i=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(e.height),c=i>0?i:o.height;let a=i*s;return a<=0?a=o.width:r&&(a*=o.width/o.height),{width:a,height:c}}function n(t){const{applyRandomOffset:e,sampleAlphaOnly:s}=t;return (0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .packBitset */ .xo)([[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .bitsetFillRandomPatternOffset */ .Fz,e],[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .bitsetGenericConsiderAlphaOnly */ .cn,s]])}const l={createComputedParams:t=>t,optionalAttributes:_PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .patternFillVertexSpec */ .l.optionalAttributes,attributes:{..._PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .patternFillVertexSpec */ .l.attributes,bitset:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,pack:n},width:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:t=>p(t).width},height:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:t=>p(t).height},offset:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:({offsetX:e,offsetY:o})=>[(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(e),-(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(o)]},scale:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,packPrecisionFactor:16,pack:({scaleX:t,scaleY:e})=>[t,e]},angle:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,pack:({angle:t})=>(0,_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .degToByte */ .wV)(t)}}};class h extends _PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .PatternFillMeshWriter */ .m{constructor(){super(...arguments),this.vertexSpec=l}}


/***/ }),

/***/ 96595:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89882);
/* harmony import */ var _ComplexFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1831);
/* harmony import */ var _meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59515);
/* harmony import */ var _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68765);
/* harmony import */ var _shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32520);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const d=_ComplexFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .complexFillVertexSpec */ .lB,h=_OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .outlineFillVertexSpec_Outline */ .e4,m={createComputedParams:e=>e,optionalAttributes:d.optionalAttributes,attributes:{...d.attributes,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:e=>(0,_ComplexFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .packComplexFillBitset */ .KI)(e)},aux1:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:e=>(0,_ComplexFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .getPatternSize */ .oI)(e).width},aux2:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:e=>(0,_ComplexFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .getPatternSize */ .oI)(e).height},aux3:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:({offsetX:t,offsetY:s})=>[(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(t),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(s)]},aux4:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,pack:({scaleX:e,scaleY:t})=>[e*_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .packPrecision */ .cZ,t*_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .packPrecision */ .cZ]}}},x={createComputedParams:e=>e,optionalAttributes:d.optionalAttributes,attributes:{...d.attributes,color:h.attributes.color,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:e=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .packBitset */ .xo)([[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .bitsetTypeFillOutline */ .Xx,!0]])},aux1:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:t=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(.5*t.width)},aux2:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,pack:t=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(.5*t.referenceWidth)},aux3:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.HALF_FLOAT,packTessellation:({extrusionOffsetX:e,extrusionOffsetY:t})=>[e,t]},aux4:{count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,packTessellation:({normalX:e,normalY:t})=>[e*_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .packPrecision */ .cZ+_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .signedToUnsignedByte */ .v9,t*_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .packPrecision */ .cZ+_shaders_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .signedToUnsignedByte */ .v9]}}};class A extends _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .OutlineFillOutlineMeshWriter */ .eY{constructor(){super(...arguments),this.vertexSpec=x}}class f extends _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .OutlineFillMeshWriter */ .w0{constructor(){super(...arguments),this.vertexSpec=m}_createOutlineWriter(e,t,s,r){return new A(e,t,s,r)}write(e,t,s,r,i){this.ensurePacked(t,s,r);const a=this.evaluatedMeshParams.sprite?.textureBinding;e.recordStart(this.instanceId,this.attributeLayout,a),this._write(e,s),e.recordEnd()}ensurePacked(e,t,s){super.ensurePacked(e,t,s),this._lineMeshWriter.ensurePacked(e,t,s)}enqueueRequest(e,t,s){super.enqueueRequest(e,t,s),this._lineMeshWriter.enqueueRequest(e,t,s)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}


/***/ }),

/***/ 21117:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ c),
/* harmony export */   v: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _AFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46336);
/* harmony import */ var _meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59515);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const i={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .minMaxZoomPrecisionFactor */ .fq,pack:({scaleInfo:t},{tileInfo:o})=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getMinMaxZoom */ .My)(t,o)}},attributes:{id:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.UNSIGNED_BYTE,count:1},pos:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .processColorInput */ .Jb)(t)}}};class c extends _AFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .AFillMeshWriter */ .N{constructor(){super(...arguments),this.vertexSpec=i}createTesselationParams(t){return null}}


/***/ }),

/***/ 26858:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  S: () => (/* binding */ u)
});

// UNUSED EXPORTS: gradientFillVertexSpec

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/AFillMeshWriter.js
var AFillMeshWriter = __webpack_require__(46336);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js
var FillMeshWriter = __webpack_require__(21117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/gradientFillConstants.js
var gradientFillConstants = __webpack_require__(5062);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/GradientSizeHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper");class n{constructor(t,i){this._size=t,this._sizeUnits=i,this._relativeSize=null}get relativeSize(){return this._relativeSize??=this.calculateRelativeSize(),this._relativeSize}calculateRelativeSize(){if(this._sizeUnits===enums/* SymbolUnits */.OW.Relative){const t=Math.min(this._size/100,1);return[t,t]}return this.calculateRelativeSizeFromAbsolute()}}class s extends n{constructor(t,i,e,r){super(i,e),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(r),this.rotationMatrix01=-Math.sin(r),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:a,rotationMatrix00:n,rotationMatrix01:s,rotationMatrix10:o,rotationMatrix11:c}=this;t.forEachVertex(((t,i)=>{const e=t*n+i*s,r=t*o+i*c;a.xmin=Math.min(a.xmin,e),a.ymin=Math.min(a.ymin,r),a.xmax=Math.max(a.xmax,e),a.ymax=Math.max(a.ymax,r)})),this.center=[(a.xmin+a.xmax)/2,(a.ymin+a.ymax)/2]}}class o extends s{constructor(t,i,e,r){super(t,i,e,r),this.method="linear"}getRelativePosition(t,i){const{rotationMatrix00:e,rotationMatrix01:r,bounds:a}=this,{xmin:n,xmax:s}=a;return[(t*e+i*r-n)/(s-n),0]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:i}=this,{xmin:r,xmax:a}=i;return[(0,screenUtils/* pt2px */.Lz)(t)/(a-r),0]}}class c extends s{constructor(t,i,e,r){super(t,i,e,r),this.method="rectangular"}getRelativePosition(t,i){const{bounds:e,center:r,rotationMatrix00:a,rotationMatrix01:n,rotationMatrix10:s,rotationMatrix11:o}=this,c=t*s+i*o,x=t*a+i*n-r[0],l=c-r[1];return[x*(2/(e.xmax-e.xmin)),-l*(2/(e.ymax-e.ymin))]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:i}=this,{xmin:r,ymin:a,xmax:n,ymax:s}=i;return[(0,screenUtils/* pt2px */.Lz)(2*t)/(n-r),(0,screenUtils/* pt2px */.Lz)(2*t)/(s-a)]}}class x extends s{constructor(t,i,e){super(t,i,e,0),this.method="circular";const{xmin:r,xmax:a,ymin:n,ymax:s}=this.bounds,o=a-r,c=s-n;this.radius=Math.sqrt(o*o+c*c)/2}getRelativePosition(t,i){const{center:e,radius:r}=this;return[(t-e[0])/r,-((i-e[1])/r)]}calculateRelativeSizeFromAbsolute(){const{_size:t}=this;return[(0,screenUtils/* pt2px */.Lz)(t)/this.radius,0]}}function l(t,e){if(null==t)return null;const r=(0,mathUtils/* deg2rad */.kU)(e.angle),n=e.gradientSize,s=e.gradientSizeUnits;switch(e.gradientMethod.toLowerCase()){case"linear":return new o(t,n,s,r);case"rectangular":return new c(t,n,s,r);case"circular":return new x(t,n,s);default:return a().errorOnce(`Gradient fill method "${e.gradientMethod}" currently unsupported.`),null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/meshWriterUtils.js
var meshWriterUtils = __webpack_require__(59515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const p={createComputedParams:t=>t,optionalAttributes:FillMeshWriter/* fillVertexSpec */.v.optionalAttributes,attributes:{...FillMeshWriter/* fillVertexSpec */.v.attributes,bitset:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:1,pack:({gradientSizeUnits:e,gradientType:r})=>{let i=0;return e===enums/* SymbolUnits */.OW.Absolute&&(i|=(0,meshWriterUtils/* getBitMask */.mR)(gradientFillConstants/* bitset */.Q.isAbsolute)),"discrete"===r.toLowerCase()&&(i|=(0,meshWriterUtils/* getBitMask */.mR)(gradientFillConstants/* bitset */.Q.isDiscrete)),i}},tlbr:{count:4,type:webgl_enums/* DataType */.pe.UNSIGNED_SHORT,pack:({sprite:t})=>{const{rect:i,width:s,height:a}=t,o=i.x+definitions/* spritePadding */.hM+definitions/* gradientTextureExternalPadding */.MZ,n=i.y+definitions/* spritePadding */.hM;return[o,n,o+s-2*definitions/* gradientTextureExternalPadding */.MZ,n+a]}},relativePosition:{count:2,type:webgl_enums/* DataType */.pe.HALF_FLOAT,packTessellation:({gradientStats:t},e,r,i)=>t?.getRelativePosition(r,i)??[0,0]},relativeGradientSize:{count:2,type:webgl_enums/* DataType */.pe.HALF_FLOAT,packTessellation:({gradientStats:t})=>t?.relativeSize??[1,1]},gradientMethod:{count:1,type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,pack:({gradientMethod:t})=>{switch(t.toLowerCase()){case"rectangular":return gradientFillConstants/* gradientFillMethods */.m.rectangular;case"circular":return gradientFillConstants/* gradientFillMethods */.m.circular;default:return gradientFillConstants/* gradientFillMethods */.m.linear}}}}};class u extends AFillMeshWriter/* AFillMeshWriter */.N{constructor(){super(...arguments),this.vertexSpec=p}get _preventEffectClipping(){return!0}createTesselationParams(t){return{gradientStats:l(this._unclippedGeometry,this.evaluatedMeshParams)}}_write(t,e,r){const i=r?.asOptimized()??e.readGeometryForDisplay();this._unclippedGeometry=i;const s=this._clip(i);if(!s)return void(this._unclippedGeometry=null);const a=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,a),this._writeGeometry(t,e,s),this._unclippedGeometry=null,t.recordEnd()}}


/***/ }),

/***/ 68765:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Lm: () => (/* binding */ h),
/* harmony export */   e4: () => (/* binding */ m),
/* harmony export */   eY: () => (/* binding */ p),
/* harmony export */   w0: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62823);
/* harmony import */ var _FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21117);
/* harmony import */ var _meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59515);
/* harmony import */ var _line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25299);
/* harmony import */ var _mesh_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12453);
/* harmony import */ var _shaders_constants_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32520);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h={createComputedParams:e=>e,optionalAttributes:_line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.optionalAttributes,attributes:{..._line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.attributes,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:e=>0},color:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:e})=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .processColorInput */ .Jb)(e)}}},m={createComputedParams:e=>e,optionalAttributes:_line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.optionalAttributes,attributes:{..._line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.attributes,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:e=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .packBitset */ .xo)([[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_6__/* .bitsetTypeFillOutline */ .Xx,!0],[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_6__/* .bitsetOutlineUsesColorVV */ .bB,e.outlineUsesColorVV]])},color:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:e})=>(0,_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .processColorInput */ .Jb)(e)}}};class p extends _line_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineMeshWriter */ .Bw{constructor(){super(...arguments),this.vertexSpec=m}}class f extends _FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_2__/* .FillMeshWriter */ .Y{constructor(e,t,i,r){super(e,t,i,r),this.vertexSpec=h,this._lineMeshWriter=this._createOutlineWriter(e,t,i,r)}_createOutlineWriter(e,t,i,r){return new p(e,t,i,r)}_write(e,t){const i=this.evaluatedMeshParams.effects,r=this.evaluatedMeshParams.outlineEffects;if(i?.length||r?.length){if(i?.length){const r=this.getEffectCursor(e,t,i);if(r){let i;for(;i=r?.next();)i.invertY(),this._writeFill(e,t,i)}}else this._writeFill(e,t);if(r?.length){const i=this.getEffectCursor(e,t,r);if(i){let r;for(;r=i?.next();)r.invertY(),this._writeOutline(e,t,r)}}else this._writeOutline(e,t)}else this._writeSimpleOutlineFill(e,t)}_writeSimpleOutlineFill(t,i){const r=i.readGeometryForDisplay(),s=this._clip(r);s&&(this._writeGeometry(t,i,s),this._lineMeshWriter.writeLineVertices(t,_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromOptimizedCIM(s,"esriGeometryPolyline"),i))}_writeFill(e,t,i){const r=i?.asOptimized()??t.readGeometryForDisplay(),s=this._clip(r);s&&this._writeGeometry(e,t,s)}_writeOutline(t,i,r){const s=r?.asOptimized()??i.readGeometryForDisplay(),o=this._clip(s);o&&this._lineMeshWriter.writeLineVertices(t,_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromOptimizedCIM(o,"esriGeometryPolyline"),i)}_clip(e){return e?(0,_mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clipMarshall */ .FE)(e,(0,_mesh_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getLineClippingMargin */ .Z0)(this.evaluatedMeshParams)):null}get effectInfos(){return[...this._evaluator.inputMeshParams.effects?.effectInfos??[],...this._evaluator.inputMeshParams.outlineEffects?.effectInfos??[]]}write(e,t,i,r,s){this.ensurePacked(t,i,r),e.recordStart(this.instanceId,this.attributeLayout),this._write(e,i),e.recordEnd()}ensurePacked(e,t,i){super.ensurePacked(e,t,i),this._lineMeshWriter.ensurePacked(e,t,i)}enqueueRequest(e,t,i){super.enqueueRequest(e,t,i),this._lineMeshWriter.enqueueRequest(e,t,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}get hasEffects(){return!!this.evaluatedMeshParams.outlineEffects}}


/***/ }),

/***/ 24737:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ s),
/* harmony export */   m: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21117);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s={createComputedParams:t=>t,optionalAttributes:_FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .fillVertexSpec */ .v.optionalAttributes,attributes:{..._FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .fillVertexSpec */ .v.attributes,tlbr:{count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_SHORT,pack:({sprite:e})=>{const{rect:r,width:i,height:s}=e,o=r.x+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .spritePadding */ .hM,a=r.y+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .spritePadding */ .hM;return[o,a,o+i,a+s]}},inverseRasterizationScale:{count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.BYTE,packPrecisionFactor:16,pack:({sprite:t})=>1/t.rasterizationScale}}};class o extends _FillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .FillMeshWriter */ .Y{constructor(){super(...arguments),this.vertexSpec=s}_write(t,e,r){const i=r?.asOptimized()??e.readGeometryForDisplay(),s=this._clip(i);if(!s)return;const o=this.evaluatedMeshParams.sprite?.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._writeGeometry(t,e,s),t.recordEnd()}}


/***/ }),

/***/ 91065:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68765);
/* harmony import */ var _PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24737);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a={optionalAttributes:_PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .patternFillVertexSpec */ .l.optionalAttributes,createComputedParams:e=>e,attributes:{..._PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .patternFillVertexSpec */ .l.attributes,..._OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .outlineFillVertexSpec_Fill */ .Lm.attributes}},u={optionalAttributes:_PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .patternFillVertexSpec */ .l.optionalAttributes,createComputedParams:e=>e,attributes:{..._PatternFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .patternFillVertexSpec */ .l.attributes,..._OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .outlineFillVertexSpec_Outline */ .e4.attributes}};class n extends _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .OutlineFillOutlineMeshWriter */ .eY{constructor(){super(...arguments),this.vertexSpec=u}}class o extends _OutlineFillMeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .OutlineFillMeshWriter */ .w0{constructor(){super(...arguments),this.vertexSpec=a}_createOutlineWriter(e,t,r,s){return new n(e,t,r,s)}write(e,t,r,s,i){this.ensurePacked(t,r,s);const a=this.evaluatedMeshParams.sprite?.textureBinding;e.recordStart(this.instanceId,this.attributeLayout,a),this._write(e,r),e.recordEnd()}ensurePacked(e,t,r){super.ensurePacked(e,t,r),this._lineMeshWriter.ensurePacked(e,t,r)}enqueueRequest(e,t,r){super.enqueueRequest(e,t,r),this._lineMeshWriter.enqueueRequest(e,t,r)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}


/***/ }),

/***/ 5062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ e),
/* harmony export */   m: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={linear:0,rectangular:1,circular:2},e={isAbsolute:0,isDiscrete:1};


/***/ }),

/***/ 59515:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   By: () => (/* binding */ S),
/* harmony export */   Jb: () => (/* binding */ g),
/* harmony export */   My: () => (/* binding */ m),
/* harmony export */   i8: () => (/* binding */ d),
/* harmony export */   mR: () => (/* binding */ f),
/* harmony export */   qE: () => (/* binding */ p),
/* harmony export */   ue: () => (/* binding */ h),
/* harmony export */   xo: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96220);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63643);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const i=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils"),u=0,a=100;function m(r,e){return[!!r?.minScale&&e.scaleToZoom(r.minScale)||u,!!r?.maxScale&&e.scaleToZoom(r.maxScale)||a]}function f(r){return 1<<r}function l(r){let e=0;for(const[t,n]of r)n&&(e|=1<<t);return e}function g(t){let n;if(!t)return[0,0,0,0];if("string"==typeof t){const o=_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fromString(t);if(!o)return i().errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("mapview:mesh-processing","Unable to parse string into color",{color:t})),[0,0,0,0];n=o.toArray()}else n=t;const[o,s,c,u]=n;return[o*(u/255),s*(u/255),c*(u/255),u]}function h(r){switch(r){case"butt":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineCapStyle */ .uT.Butt:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .CapType */ .xR.BUTT;case"round":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineCapStyle */ .uT.Round:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .CapType */ .xR.ROUND;case"square":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineCapStyle */ .uT.Square:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .CapType */ .xR.SQUARE}}function p(r){switch(r){case"bevel":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineJoinStyle */ .wd.Bevel:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .JoinType */ .JO.BEVEL;case"miter":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineJoinStyle */ .wd.Miter:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .JoinType */ .JO.MITER;case"round":case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .LineJoinStyle */ .wd.Round:return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .JoinType */ .JO.ROUND}}function d(r,e){return Math.round(Math.min(Math.sqrt(r*e),255))}function S(r,e){return Math.round(r*e)/e}


/***/ }),

/***/ 97253:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony export heatmapVertexSpec */
/* harmony import */ var _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(71858);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE,count:1},offset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class i extends _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_0__/* .MeshWriter */ .r{constructor(){super(...arguments),this.vertexSpec=r}_write(t,e){t.recordStart(this.instanceId,this.attributeLayout);const r=e.getDisplayId();if("esriGeometryPoint"===e.geometryType){const i=e.readXForDisplay(),o=e.readYForDisplay();this._writeQuad(t,r,i,o)}else if("esriGeometryMultipoint"===e.geometryType){const i=e.readGeometryForDisplay();i?.forEachVertex(((e,i)=>{e>=0&&e<=512&&i>=0&&i<=512&&this._writeQuad(t,r,e,i)}))}t.recordEnd()}_writeQuad(t,e,r,i){const o=t.vertexCount();this._writeVertex(t,e,r,i),t.indexWrite(o+0),t.indexWrite(o+1),t.indexWrite(o+2),t.indexWrite(o+1),t.indexWrite(o+3),t.indexWrite(o+2)}}


/***/ }),

/***/ 19425:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony export GradientStrokeVertexSpec */
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63643);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59515);
/* harmony import */ var _gradientStrokeConstants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3322);
/* harmony import */ var _LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(25299);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m={createComputedParams:t=>t,optionalAttributes:_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_5__/* .LineVertexSpec */ .Eq.optionalAttributes,attributes:{..._LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_5__/* .LineVertexSpec */ .Eq.attributes,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:({gradientMethod:t,gradientSizeUnits:e,gradientType:r})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .packBitset */ .xo)([[_gradientStrokeConstants_js__WEBPACK_IMPORTED_MODULE_4__/* .bitset */ .Q.isAlongLine,"alongline"===t.toLowerCase()],[_gradientStrokeConstants_js__WEBPACK_IMPORTED_MODULE_4__/* .bitset */ .Q.isAbsoluteSize,e===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SymbolUnits */ .OW.Absolute],[_gradientStrokeConstants_js__WEBPACK_IMPORTED_MODULE_4__/* .bitset */ .Q.isDiscrete,"discrete"===r.toLowerCase()]])},tlbr:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:i,height:o}=t,n=e.x+_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM+_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .gradientTextureExternalPadding */ .MZ,a=e.y+_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM;return[n,a,n+i-2*_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .gradientTextureExternalPadding */ .MZ,a+o]}},accumulatedDistance:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.HALF_FLOAT,count:1,packTessellation:({distance:t,pathLength:e,distanceOffset:i})=>(i+t)/e},gradientSize:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.HALF_FLOAT,count:1,pack:({gradientSize:e,gradientSizeUnits:r})=>r===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SymbolUnits */ .OW.Relative?e/100:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(e)},totalLength:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.HALF_FLOAT,count:1,packTessellation:({pathLength:t})=>t},segmentDirection:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]}}};class l extends _LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_5__/* .LineMeshWriter */ .Bw{get _preventEffectClipping(){return!0}constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=m,this._tessellationOptions.textured=!0}_write(t,i,r){const s=r??_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(i);if(!s)return;const{sprite:o}=this.evaluatedMeshParams;this._writeGeometry(t,i,s,o?.textureBinding)}}


/***/ }),

/***/ 25299:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bw: () => (/* binding */ T),
/* harmony export */   Eq: () => (/* binding */ f),
/* harmony export */   sp: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(89882);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/* harmony import */ var _TurboLine_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(95200);
/* harmony import */ var _mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62823);
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(59515);
/* harmony import */ var _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(71858);
/* harmony import */ var _mesh_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12453);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0,this.pathLength=0,this.distanceOffset=0,this.lineLength=0}}const f={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .minMaxZoomPrecisionFactor */ .fq,pack:({scaleInfo:t},{tileInfo:e})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .getMinMaxZoom */ .My)(t,e)}},attributes:{id:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:1},color:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:t})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .processColorInput */ .Jb)(t)},offset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({extrusionOffsetX:t,extrusionOffsetY:e})=>[(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .packRounded */ .By)(t,16),(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .packRounded */ .By)(e,16)]},normal:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({normalX:t,normalY:e})=>[(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .packRounded */ .By)(t,16),(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .packRounded */ .By)(e,16)]},halfWidth:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.HALF_FLOAT,count:1,pack:({width:e})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .pt2px */ .Lz)(.5*e)},referenceHalfWidth:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .DataType */ .pe.HALF_FLOAT,count:1,pack:({referenceWidth:e})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .pt2px */ .Lz)(.5*e)}}};class _{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0,this.distanceOffset=0}}const x=65535;class T extends _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_5__/* .MeshWriter */ .r{constructor(t,e,s,i){super(t,e,s,i),this.vertexSpec=f,this._currentWrite=new _,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:x,textured:!1},this._tessParams=new d,this._initializeTessellator()}writeLineVertices(t,e,s){const i=this._getLines(e);null!=i&&this._writeVertices(t,s,i)}_initializeTessellator(){this._lineTessellator=new _TurboLine_js__WEBPACK_IMPORTED_MODULE_2__/* .LineTessellation */ .i(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(t,s,i){const r=i??_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(s);r&&this._writeGeometry(t,s,r)}_writeGeometry(t,e,s,i){t.recordStart(this.instanceId,this.attributeLayout,i),this.writeLineVertices(t,s,e),t.recordEnd()}_getLines(t){return (0,_mesh_templates_templateUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .clipLinesMarshall */ .uS)(t,(0,_mesh_utils_js__WEBPACK_IMPORTED_MODULE_6__/* .getLineClippingMargin */ .Z0)(this.evaluatedMeshParams))}_writeVertices(e,s,r){const{_currentWrite:o,_tessellationOptions:n,evaluatedMeshParams:a}=this,{width:c,capType:m,joinType:u,miterLimit:p,hasSizeVV:d}=a,f=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .pt2px */ .Lz)(.5*c);n.halfWidth=f,n.capType=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .processLineCapInput */ .ue)(m),n.joinType=(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .processLineJoinInput */ .qE)(u),n.miterLimit=p;const _=!d;o.out=e,o.id=s.getDisplayId(),o.vertexCount=0,o.indexCount=0,o.vertexFrom=e.vertexCount(),o.vertexBounds=_&&f<_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .thinLineHalfWidthThreshold */ .Gh?0:1;for(const{line:t,start:i,pathLength:h}of r)n.initialDistance=i%x,o.pathLength=h,o.distanceOffset=Math.floor(i/x)*x,this._lineTessellator.tessellate(t,n,_)}_writeTesselatedVertex(t,e,s,i,r,o,n,a,c,h,l){const{out:m,id:u,vertexBounds:p,pathLength:d,distanceOffset:f}=this._currentWrite;return this.hasEffects&&m.recordBounds(t,e,p,p),this._tessParams.extrusionOffsetX=n,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=c,this._tessParams.normalY=h,this._tessParams.directionX=r,this._tessParams.directionY=o,this._tessParams.distance=l,this._tessParams.pathLength=d,this._tessParams.distanceOffset=f,this._writeVertex(m,u,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,s){const{out:i}=this._currentWrite;i.indexEnsureSize(3),i.indexWrite(t),i.indexWrite(e),i.indexWrite(s),this._currentWrite.indexCount+=3}}


/***/ }),

/***/ 35822:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony export texturedLineVertexSpec */
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63643);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59515);
/* harmony import */ var _LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(25299);
/* harmony import */ var _shaders_constants_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(32520);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m={createComputedParams:t=>t,optionalAttributes:_LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.optionalAttributes,attributes:{..._LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineVertexSpec */ .Eq.attributes,bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:({shouldSampleAlphaOnly:t,shouldScaleDash:e,isSDF:r})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .packBitset */ .xo)([[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_5__/* .bitsetGenericConsiderAlphaOnly */ .cn,t],[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_5__/* .bitsetLineScaleDash */ .kx,e],[_shaders_constants_js__WEBPACK_IMPORTED_MODULE_5__/* .bitsetLineIsSdf */ .b5,r]])},tlbr:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_SHORT,count:4,pack:({sprite:t})=>{const{rect:e,width:r,height:o}=t,i=e.x+_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,n=e.y+_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM;return[i,n,i+r,n+o]}},accumulatedDistance:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_SHORT,count:1,packTessellation:({distance:t})=>t},segmentDirection:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:({directionX:t,directionY:e})=>[t,e]},offsetAlongLine:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.HALF_FLOAT,count:1,pack:({offsetAlongLine:e})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(e)},capType:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:({capType:t})=>{switch(t){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .LineCapStyle */ .uT.Butt:case"butt":return 0;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .LineCapStyle */ .uT.Square:case"square":return 1;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .LineCapStyle */ .uT.Round:case"round":return 2;default:return 0}}}}};class l extends _LineMeshWriter_js__WEBPACK_IMPORTED_MODULE_4__/* .LineMeshWriter */ .Bw{constructor(t,e,r,s){super(t,e,r,s),this.vertexSpec=m,this._tessellationOptions.textured=!0}_write(t,r,s){const o=s??_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(r);if(!o)return;const{sprite:i}=this.evaluatedMeshParams;this._writeGeometry(t,r,o,i?.textureBinding)}}


/***/ }),

/***/ 3322:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={isAlongLine:0,isAbsoluteSize:1,isDiscrete:2};


/***/ }),

/***/ 25416:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  H: () => (/* binding */ E)
});

// UNUSED EXPORTS: MarkerVertexSpec

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2d.js
var mat2d = __webpack_require__(79190);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df32.js
var mat2df32 = __webpack_require__(78835);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMEffects.js
var CIMEffects = __webpack_require__(13022);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/constants.js
var constants = __webpack_require__(6276);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/placements/CIMMarkerPlacementHelper.js
var CIMMarkerPlacementHelper = __webpack_require__(73048);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/meshWriterUtils.js
var meshWriterUtils = __webpack_require__(59515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/ComputedMarkerParams.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{static from(t){return"width"in t?this.fromSimpleMeshParams(t):this.fromComplexMeshParams(t)}static fromSimpleMeshParams(e){const i=new s(e.sprite,e.color,e.outlineColor,e.minPixelBuffer,e.placement,e.scaleInfo,e.effects),{type:o,width:h,height:r,angle:n,alignment:c,outlineSize:a,referenceSize:f,sprite:l,overrideOutlineColor:m}=e;return i.rawWidth=(0,screenUtils/* pt2px */.Lz)(h),i.rawHeight=(0,screenUtils/* pt2px */.Lz)(r),i.angle=n,i.alignment=c,i.outlineSize=(0,screenUtils/* pt2px */.Lz)(a),i.referenceSize=(0,screenUtils/* pt2px */.Lz)(f),i.overrideOutlineColor=m,i.offsetX=(0,screenUtils/* pt2px */.Lz)(e.offsetX),i.offsetY=(0,screenUtils/* pt2px */.Lz)(e.offsetY),"simple"!==o||l.sdf||(i.rawWidth=l.width,i.rawHeight=l.height),i._computeSize(e,!1),i}static fromComplexMeshParams(e){const o=new s(e.sprite,e.color,e.outlineColor,e.minPixelBuffer,e.placement,e.scaleInfo,e.effects);let{alignment:h,transforms:r,size:n,scaleX:c,anchorX:a,anchorY:f,angle:l,colorLocked:m,frameHeight:d,widthRatio:u,offsetX:p,offsetY:g,outlineSize:x,referenceSize:w,scaleFactor:z,sizeRatio:S,isAbsoluteAnchorPoint:X,rotateClockwise:Y,scaleSymbolsProportionally:C,sprite:H}=e;if(r&&r.infos.length>0){const t=(0,utils/* applyParentTransform */.zb)(n,l,Y,p,g,r);n=t.size,l=t.rotation,p=t.offsetX,g=t.offsetY,Y=!1}z&&(n*=z,p*=z,g*=z);const M=c*(H.width/H.height);o.alignment=h,o.rawHeight=(0,screenUtils/* pt2px */.Lz)(n),o.rawWidth=o.rawHeight*M,o.referenceSize=(0,screenUtils/* pt2px */.Lz)(w),o.sizeRatio=S,o.sdfDecodeCoeff=(H.sdfDecodeCoeff??1)*S,o.angle=l,o.rotateClockwise=Y,o.anchorX=a,o.anchorY=f,o.offsetX=(0,screenUtils/* pt2px */.Lz)(p),o.offsetY=(0,screenUtils/* pt2px */.Lz)(g),X&&n&&(H.sdf?o.anchorX=a/(n*u):o.anchorX=a/(n*M),o.anchorY=f/n);const W=C&&d?n/d:1;return o.outlineSize=0===x||isNaN(x)?0:(0,screenUtils/* pt2px */.Lz)(x)*W,o.scaleSymbolsProportionally=C,o.colorLocked=m,o._computeSize(e,!0),o}constructor(t,i,o,s,h,r,n){this.sprite=t,this.color=i,this.outlineColor=o,this.minPixelBuffer=s,this.placement=h,this.scaleInfo=r,this.effects=n,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.sdfDecodeCoeff=1,this.alignment=enums/* Alignment */.C1.SCREEN,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(t,e){const{sprite:i,hasSizeVV:s}=t,n=!!i.sdf,c=i.sdfPaddingRatio??.5,{rawWidth:a,rawHeight:f,sizeRatio:l,outlineSize:m}=this,d=i.rect;let u=a*l,p=f*l,g=0,x=0;if(n){const t=1/(1-c);if(u*=t,p*=t,s)this.computedWidth=u,this.computedHeight=p;else{const t=e&&a>f?u:a,o=f,s=m+2*1;this.computedWidth=Math.min(t+s,u),this.computedHeight=Math.min(o+s,p);const h=Math.max(i.width,i.height)/Math.max(u,p);g=(this.computedWidth-u)*h,x=(this.computedHeight-p)*h}}else this.computedWidth=u*(d.width/i.width),this.computedHeight=p*(d.height/i.height),g=2*definitions/* spritePadding */.hM,x=2*definitions/* spritePadding */.hM;const w=d.x+definitions/* spritePadding */.hM-g/2,z=d.y+definitions/* spritePadding */.hM-x/2,S=w+i.width+g,X=z+i.height+x;this.texXmin=h(w),this.texYmin=h(z),this.texXmax=r(S),this.texYmax=r(X),this.computedWidth*=(this.texXmax-this.texXmin)/(S-w),this.computedHeight*=(this.texYmax-this.texYmin)/(X-z),this.anchorX*=u/this.computedWidth,this.anchorY*=p/this.computedHeight}}function h(t,e=1e-7){const i=Math.ceil(t);return i-t<e?i:Math.floor(t)}function r(t,e=1e-7){const i=Math.floor(t);return t-i<e?i:Math.ceil(t)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/markerConstants.js
var markerConstants = __webpack_require__(64723);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/loadGeometryEngine.js
var loadGeometryEngine = __webpack_require__(80972);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriter.js + 2 modules
var MeshWriter = __webpack_require__(71858);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const b=3.14159265359/180,k=128/Math.PI;function v(e,t){return e%=t,Math.abs(e>=0?e:e+t)}function S(e){return v(e*k,256)}function I(e,a,i,n,c=!1){const m=(0,mat2df32/* create */.vt)(),l=c?1:-1;return (0,mat2d/* identity */.D_)(m),(a||i)&&(0,mat2d/* translate */.Tl)(m,m,[a,-i]),n&&(0,mat2d/* rotate */.e$)(m,m,l*b*-n),m}const _={createComputedParams:e=>s.from(e),optionalAttributes:{zoomRange:{type:webgl_enums/* DataType */.pe.SHORT,count:2,packPrecisionFactor:definitions/* minMaxZoomPrecisionFactor */.fq,pack:({scaleInfo:e},{tileInfo:t})=>(0,meshWriterUtils/* getMinMaxZoom */.My)(e,t)}},attributes:{pos:{type:webgl_enums/* DataType */.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:1,pack:({sprite:e,alignment:t,scaleSymbolsProportionally:r,overrideOutlineColor:o,colorLocked:s})=>{let a=0;return e.sdf&&(a|=(0,meshWriterUtils/* getBitMask */.mR)(markerConstants/* MarkerConstants */.c.bitset.isSDF)),t===enums/* Alignment */.C1.MAP&&(a|=(0,meshWriterUtils/* getBitMask */.mR)(markerConstants/* MarkerConstants */.c.bitset.isMapAligned)),r&&(a|=(0,meshWriterUtils/* getBitMask */.mR)(markerConstants/* MarkerConstants */.c.bitset.scaleSymbolsProportionally)),o&&(a|=(0,meshWriterUtils/* getBitMask */.mR)(markerConstants/* MarkerConstants */.c.bitset.overrideOutlineColor)),s&&(a|=(0,meshWriterUtils/* getBitMask */.mR)(markerConstants/* MarkerConstants */.c.bitset.colorLocked)),a}},offset:{type:webgl_enums/* DataType */.pe.HALF_FLOAT,count:2,packAlternating:{count:4,pack:({angle:e,computedWidth:t,computedHeight:r,anchorX:o,anchorY:s,offsetX:i,offsetY:n,rotateClockwise:c})=>{const m=I(0,i,n,-e,c),l=-(.5+o)*t,u=-(.5-s)*r,d=[l,u],p=[l+t,u],h=[l,u+r],f=[l+t,u+r];return (0,vec2/* transformMat2d */.l0)(d,d,m),(0,vec2/* transformMat2d */.l0)(p,p,m),(0,vec2/* transformMat2d */.l0)(h,h,m),(0,vec2/* transformMat2d */.l0)(f,f,m),[d,p,h,f]}}},textureUV:{type:webgl_enums/* DataType */.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:({texXmax:e,texXmin:t,texYmax:r,texYmin:o})=>[[t,o],[e,o],[t,r],[e,r]]}},color:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({color:e})=>(0,meshWriterUtils/* processColorInput */.Jb)(e)},outlineColor:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:e})=>(0,meshWriterUtils/* processColorInput */.Jb)(e)},sizing:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:4,pack:({rawWidth:e,rawHeight:t,outlineSize:r,referenceSize:o})=>{const s=Math.max(e,t);return[(0,meshWriterUtils/* packByteSqrt */.i8)(s,128),(0,meshWriterUtils/* packByteSqrt */.i8)(r,128),(0,meshWriterUtils/* packByteSqrt */.i8)(o,128),0]}},placementAngle:{type:webgl_enums/* DataType */.pe.UNSIGNED_BYTE,count:1,packTessellation:({placementAngle:e})=>S(e)},sdfDecodeCoeff:{type:webgl_enums/* DataType */.pe.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:({sdfDecodeCoeff:e})=>e}}};class E extends MeshWriter/* MeshWriter */.r{constructor(){super(...arguments),this.vertexSpec=_}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(e,t,r){const o=this.evaluatedMeshParams.sprite?.textureBinding,s=t.getDisplayId();e.recordStart(this.instanceId,this.attributeLayout,o);const a=this.evaluatedMeshParams.minPixelBuffer,i=Math.max(this.evaluatedMeshParams.computedWidth,a),m=Math.max(this.evaluatedMeshParams.computedHeight,a),l=-this.evaluatedMeshParams.anchorX*this.evaluatedMeshParams.computedWidth,u=this.evaluatedMeshParams.anchorY*this.evaluatedMeshParams.computedHeight,d=this.evaluatedMeshParams.offsetX+l,p=-this.evaluatedMeshParams.offsetY+u;if(null!=this.evaluatedMeshParams.placement){let o=null;if(null!=r){const e=Math.max(this.evaluatedMeshParams.computedWidth,this.evaluatedMeshParams.computedHeight);if(o=(0,CIMEffects/* clipCursorToTileExtent */.q)(r,2*e,!1),null===o)return}this._writePlacedMarkers(e,t,o,i,m)}else if(r?.nextPath()){r.nextPoint();const t=r.x,o=r.y;e.recordBounds(t+d,o+p,i,m),this._writeQuad(e,s,t,o)}else if("esriGeometryPolygon"===t.geometryType){const r=t.readCentroidForDisplay();if(!r)return;const[o,a]=r.coords;e.recordBounds(o+d,a+p,i,m),this._writeQuad(e,s,o,a)}else if("esriGeometryPoint"===t.geometryType){const r=t.readXForDisplay(),o=t.readYForDisplay();e.recordBounds(r+d,o+p,i,m),this._writeQuad(e,s,r,o)}else{const r=t.readGeometryForDisplay();r?.forEachVertex(((t,r)=>{e.recordBounds(t+d,r+p,i,m),Math.abs(t)>constants/* maxTileCoordValue */.$u||Math.abs(r)>constants/* maxTileCoordValue */.$u||this._writeQuad(e,s,t,r)}))}e.recordEnd()}_writePlacedMarkers(t,r,o,s,a){const n=o??GeometryCursor/* GeometryCursor */.z.fromFeatureSetReaderCIM(r);if(!n)return;const m=-1,u=CIMMarkerPlacementHelper/* CIMMarkerPlacementHelper */.l.getPlacement(n,m,this.evaluatedMeshParams.placement,(0,screenUtils/* pt2px */.Lz)(1),t.id,(0,loadGeometryEngine/* getGeometryEngine */.z)());if(!u)return;const d=r.getDisplayId();let p=u.next();const h=this.evaluatedMeshParams.offsetX,f=-this.evaluatedMeshParams.offsetY;for(;null!=p;){const e=p.tx,r=-p.ty;if(Math.abs(e)>constants/* maxTileCoordValue */.$u||Math.abs(r)>constants/* maxTileCoordValue */.$u){p=u.next();continue}const o=-p.getAngle();t.recordBounds(e+h,r+f,s,a),this._writeQuad(t,d,e,r,o),p=u.next()}}_writeQuad(e,t,r,o,s){const a=e.vertexCount(),i=null==s?null:{placementAngle:s};this._writeVertex(e,t,r,o,i),e.indexWrite(a+0),e.indexWrite(a+1),e.indexWrite(a+2),e.indexWrite(a+1),e.indexWrite(a+3),e.indexWrite(a+2)}}


/***/ }),

/***/ 64723:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4,isStroke:5}};


/***/ }),

/***/ 71858:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  r: () => (/* binding */ c)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/effects/CIMEffectHelper.js
var CIMEffectHelper = __webpack_require__(78006);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/loadGeometryEngine.js
var loadGeometryEngine = __webpack_require__(80972);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/utils.js
var utils = __webpack_require__(12453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/AlignedVertexSpec.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(t){switch(t){case enums/* DataType */.pe.BYTE:case enums/* DataType */.pe.UNSIGNED_BYTE:return 1;case enums/* DataType */.pe.SHORT:case enums/* DataType */.pe.UNSIGNED_SHORT:case enums/* DataType */.pe.HALF_FLOAT:return 2;case enums/* DataType */.pe.FLOAT:case enums/* DataType */.pe.INT:case enums/* DataType */.pe.UNSIGNED_INT:return 4}}function o(t){const e=[],o=[],n=[];for(const i of t){const t=s(i.type)*i.count;switch(t%2||t%4||4){case 4:e.push(i);continue;case 2:o.push(i);continue;case 1:n.push(i);continue;default:throw new Error("Found unexpected dataType byte count")}}return e.push(...o),e.push(...n),e}class n{static fromVertexSpec(t,e){const{attributes:i,optionalAttributes:r}=t;let a,c,u;const p=[];for(const s in i){if(i[s].otherSource)continue;const t=i[s];"position"===t.pack?a={...t,name:s,offset:0}:"id"===t.pack?c={...t,name:s,offset:4}:"bitset"===s?u={...t,name:s,offset:7}:p.push({...t,name:s})}for(const s in r)if(!0===e[s]){const t=r[s];p.push({...t,name:s})}const h=o(p),f=[];let m=8,b=1;for(const o of h)f.push({...o,offset:m}),m+=s(o.type)*o.count,o.packAlternating&&(b=Math.max(o.packAlternating.count,b));const d=Uint32Array.BYTES_PER_ELEMENT,_=m%d;return new n(a,c,u,f,m+(_?d-_:0),b)}constructor(t,e,s,o,n,i){this.position=t,this.id=e,this.bitset=s,this.standardAttributes=o,this.stride=n,this.packVertexCount=i,o.push(s),this._attributes=[t,e,s,...o]}get attributeLayout(){if(!this._attributeLayout){const e=(0,utils/* vertexLayoutHash */.hU)(this._attributes),s=this._attributes.map((t=>({name:t.name,count:t.count,offset:t.offset,type:t.type,packPrecisionFactor:t.packPrecisionFactor,normalized:t.normalized??!1})));this._attributeLayout={attributes:s,hash:e,stride:this.stride}}return this._attributeLayout}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/dataViewUtils.js
var dataViewUtils = __webpack_require__(17906);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterVertexPack.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{static fromVertexSpec(t,s){const c=n.fromVertexSpec(t,s);return new i(c)}constructor(t){this._spec=t,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(t,e,s,i,c,a){for(let p=0;p<this._spec.packVertexCount;p++){const t=p*this._spec.stride;this._packPosition(s,i,t),this._packId(e,t);const r=this._spec.bitset;if(a){if(r.packTessellation){const e=r.packTessellation(a,c,s,i);this._pack(e,r,t)}for(const e of this._spec.standardAttributes)if(null!=e.packTessellation){const p=e.packTessellation(a,c,s,i);this._pack(p,e,t)}else if(e.packAlternating?.packTessellation){const t=e.packAlternating.packTessellation(a,c,s,i);for(let s=0;s<this._spec.packVertexCount;s++){const i=t[s];this._pack(i,e,s*this._spec.stride)}}}}t.vertexWriteRegion(this._packedU32View)}pack(t,e){for(const s of this._spec.standardAttributes)if(s.pack&&"string"!=typeof s.pack){const i=s.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++)this._pack(i,s,t*this._spec.stride)}else if(s.packAlternating?.pack){const i=s.packAlternating.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++){const e=i[t];this._pack(e,s,t*this._spec.stride)}}}_packPosition(e,s,i){const{offset:c}=this._spec.position,a=this._spec.position.packPrecisionFactor??1,p=(0,number/* i1616to32 */.M9)(e*a,s*a);this._dataView.setUint32(i+c,p,!0)}_packId(t,e){const s=t*(this._spec.id.packPrecisionFactor??1),i=4278190080&this._dataView.getUint32(e+this._spec.id.offset,!0);this._dataView.setUint32(e+this._spec.id.offset,s|i,!0)}_pack(t,e,i){(0,dataViewUtils/* packDataView */.F)(this._dataView,t,e,i)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function MeshWriter_i(e){if(!e)return!1;for(const t of e)switch(t.effect.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectDonut":case"CIMGeometricEffectOffset":case"CIMGeometricEffectTaperedPolygon":case"CIMGeometricEffectEnclosingPolygon":return!0}return!1}class c{constructor(e,t,r,s){this._instanceId=e,this._evaluator=t,this._enabledOptionalAttributes=r,this._viewParams=s,this._evaluator.evaluator=e=>this.vertexSpec.createComputedParams(e)}get _vertexPack(){if(!this._cachedVertexPack){const e=i.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||e.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=e}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get effectInfos(){return this._evaluator.inputMeshParams.effects?.effectInfos}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(e){this._references=e}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){MeshWriter_i(this.effectInfos)&&await (0,loadGeometryEngine/* loadGeometryEngine */.R)()}enqueueRequest(e,t,r){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(e,t,r)}write(e,t,r,s,a){this.ensurePacked(t,r,s);const i=this.evaluatedMeshParams.effects;if(!i||0===i.length)return void this._write(e,r,void 0,a);const c=this.getEffectCursor(e,r,i);if(!c)return;let n;for(;n=c.next();)n.invertY(),this._write(e,r,n,a)}ensurePacked(e,t,r){if(!this._evaluator.hasDynamicProperties)return;const s=this._evaluator.evaluateMeshParams(e,t,r);this._vertexPack.pack(s,this._viewParams)}hasArcadeDependency(e){return this._evaluator.hasArcadeDependency(e)}_writeVertex(e,t,r,s,a){const i=this.evaluatedMeshParams;this._vertexPack.writeVertex(e,t,r,s,i,a)}getEffectCursor(r,a,i){const c=a.readGeometryForDisplay()?.clone();if(!c)return;const n=GeometryCursor/* GeometryCursor */.z.fromOptimizedCIM(c,a.geometryType),o=(0,loadGeometryEngine/* getGeometryEngine */.z)();n.invertY();const f=r.id||"";return CIMEffectHelper/* CIMEffectHelper */.V.executeEffects(i,n,f,o,this._preventEffectClipping)}}


/***/ }),

/***/ 45357:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  o: () => (/* binding */ MeshWriterRegistry_y)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js
var TechniqueType = __webpack_require__(98826);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/constants.js
var constants = __webpack_require__(6276);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/placements/CIMMarkerPlacementHelper.js
var CIMMarkerPlacementHelper = __webpack_require__(73048);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedMeshWriter.js
var AnimatedMeshWriter = __webpack_require__(21485);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/attributes.js
var attributes = __webpack_require__(83455);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/ComputedAnimatedParams.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(i){let{pixelDimensions:t,texelDimensions:s,baseSize:r,referenceSize:n,strokeWidth:o,sizeRatio:f}=i;if(t||(t=i.sprite.sdf?[0,0]:[i.sprite.width,i.sprite.height]),s||(s=i.sprite.sdf?[0,0]:t),null!=i.patternHeight){const e=i.patternHeight/t[1];t[1]*=e,t[0]*=e}-1===r&&(r=t[1]),r=(0,screenUtils/* pt2px */.Lz)(r),n=(0,screenUtils/* pt2px */.Lz)(n),o=(0,screenUtils/* pt2px */.Lz)(o);const p=(i.sprite.sdfDecodeCoeff??1)*f;return{...i,pixelDimensions:t,texelDimensions:s,baseSize:r,referenceSize:n,strokeWidth:o,sdfDecodeCoeff:p}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/loadGeometryEngine.js
var loadGeometryEngine = __webpack_require__(80972);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js
var shaders_constants = __webpack_require__(32520);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedMarkerMeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const w=64,b=64,v=2;class _ extends AnimatedMeshWriter/* AAnimatedMeshWriter */.${get vertexSpec(){return{createComputedParams:i,optionalAttributes:{zoomRange:attributes/* zoomRange */.jo,value1Position2Value2:attributes/* value1Position2Value2 */.Z6,lineLength:attributes/* lineLength */.bU},attributes:{id:attributes.id,bitset:attributes/* bitset */.Q5,pos:attributes/* pos */.n1,offset:attributes/* offset */.cY.marker,uv:attributes.uv.marker,animationPointerAndBaseSizeAndReferenceSize:attributes/* animationPointerAndBaseSizeAndReferenceSize */.GE,sizing:attributes/* sizing */.ve,angle:attributes/* angle */.g7}}}_write(e,t){const i=this.evaluatedMeshParams.sprite,{textureBinding:r}=i;e.recordStart(this.instanceId,this.attributeLayout,r);const s=t.getDisplayId();if(this.shift&&"esriGeometryPolyline"===t.geometryType)this._writeParticles(e,t);else if(null!=this.evaluatedMeshParams.placement)this._writePlacedMarkers(e,t);else if("esriGeometryPolygon"===t.geometryType){const i=t.readCentroidForDisplay();if(!i)return;const[r,o]=i.coords;this._writeQuad(e,s,r,o)}else if("esriGeometryPoint"===t.geometryType){const i=t.readXForDisplay(),r=t.readYForDisplay();this._writeQuad(e,s,i,r)}else{const i=t.readGeometryForDisplay();i&&i.forEachVertex(((t,i)=>{this._writeQuad(e,s,t,i)}))}e.recordEnd()}_writePlacedMarkers(r,o){const n=GeometryCursor/* GeometryCursor */.z.fromFeatureSetReaderCIM(o)?.clone();if(!n)return;const a=-1,c=CIMMarkerPlacementHelper/* CIMMarkerPlacementHelper */.l.getPlacement(n,a,this.evaluatedMeshParams.placement,(0,screenUtils/* pt2px */.Lz)(1),r.id,(0,loadGeometryEngine/* getGeometryEngine */.z)());if(!c)return;const m=o.getDisplayId();let l=c.next(),d=null;for(;null!=l;){const e=l.tx,t=-l.ty;if(Math.abs(e)>constants/* maxTileCoordValue */.$u||Math.abs(t)>constants/* maxTileCoordValue */.$u){l=c.next();continue}const s=-l.getAngle();r.recordBounds(e,t,w,b),this.shift?d&&this._writeQuad(r,m,d[0],d[1],void 0,s):this._writeQuad(r,m,e,t,void 0,s),d=[e,t],l=c.next()}}_writeParticles(e,t){const i=t.getDisplayId(),s=t.readGeometryForDisplay();if(!s)return;const o=[];s.forEachVertex(((e,t)=>{o.push([e,t])}));const n=j(o);let a=0;for(let r=1;r<o.length;r++){const e=o[r][0]-o[r-1][0],t=o[r][1]-o[r-1][1],i=Math.sqrt(e*e+t*t);a+=i}const c=t=>{for(const r of n){const{a:s,b:o}=r;this._writeQuad(e,i,s.position[0],s.position[1],[s.distance-t,o.position[0],o.position[1],o.distance-t],this.evaluatedMeshParams.angleToLine?Math.atan2(s.direction[1],s.direction[0]):0,a,!0)}},{placement:m}=this.evaluatedMeshParams;if(!m||"placementTemplate"in m||"CIMMarkerPlacementOnVertices"===m.type){let e;if(m&&"CIMMarkerPlacementOnVertices"!==m.type)e=m.placementTemplate;else{e=[0];for(const t of n){const{a:i,b:r}=t,s=i.position[0]-r.position[0],o=i.position[1]-r.position[1],n=Math.sqrt(s*s+o*o);e.push(n)}}let t=-1*a;for(;t<(1+v/2)*a;)for(const i of e)t+=i,c(t)}else"CIMMarkerPlacementAtExtremities"===m.type?m.extremityPlacement===enums/* ExtremityPlacement */.$2.JustBegin?c(1):m.extremityPlacement===enums/* ExtremityPlacement */.$2.JustEnd?(c(a-1),c(-1)):m.extremityPlacement===enums/* ExtremityPlacement */.$2.Both&&(c(1),c(a-1)):"CIMMarkerPlacementOnLine"===m.type&&c(a/2)}_writeQuad(e,t,i,r,s,n=0,a=0,c=!1){const m=this.evaluatedMeshParams.sprite,{rect:l}=m,d=l.x+definitions/* spritePadding */.hM,p=l.y+definitions/* spritePadding */.hM,h=l.x+l.width-definitions/* spritePadding */.hM,u=l.y+l.height-definitions/* spritePadding */.hM,f=e.vertexCount();c||e.recordBounds(i,r,w,w);const y={texXmin:d,texYmin:p,texXmax:h,texYmax:u,value1Position2Value2:s,angle:n/shaders_constants/* c256ToRad */.rp,lineLength:a};for(let o=0;o<4;o++)this._writeVertex(e,t,i,r,y);e.indexEnsureSize(6),e.indexWrite(f),e.indexWrite(f+1),e.indexWrite(f+2),e.indexWrite(f+1),e.indexWrite(f+3),e.indexWrite(f+2)}}function j(e){const t=[];let i=0;for(let r=1;r<e.length;r++){const s=e[r-1],o=e[r],n=o[0]-s[0],a=o[1]-s[1],c=Math.sqrt(n*n+a*a),m=n/c,l=a/c;t.push({a:{position:s,distance:i,direction:[m,l]},b:{position:o,distance:i+c,direction:[m,l]}}),i+=c}return t}class C extends _{constructor(){super(...arguments),this.shift=!1}}class I extends _{constructor(){super(...arguments),this.shift=!0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TurboLine.js
var TurboLine = __webpack_require__(95200);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/templateUtils.js + 1 modules
var templateUtils = __webpack_require__(62823);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/meshWriterUtils.js
var meshWriterUtils = __webpack_require__(59515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/LineMeshWriter.js
var LineMeshWriter = __webpack_require__(25299);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedPolyMeshWriters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedPolyMeshWriters_C extends AnimatedMeshWriter/* AAnimatedMeshWriter */.${_write(t,i,s){const r=s??GeometryCursor/* GeometryCursor */.z.fromFeatureSetReaderCIM(i);if(!r)return;const n=this.evaluatedMeshParams.sprite,{textureBinding:o}=n;t.recordStart(this.instanceId,this.attributeLayout,o);const a=i.getDisplayId();this._writePoly(t,a,r.asOptimized()),t.recordEnd()}}class AnimatedPolyMeshWriters_j extends AnimatedPolyMeshWriters_C{constructor(){super(...arguments),this.vertexSpec={createComputedParams:i,attributes:{id:attributes.id,bitset:attributes/* bitset */.Q5,pos:attributes/* pos */.n1,offset:attributes/* offset */.cY.fill,tlbr:attributes/* tlbr */.Tx,animationPointerAndBaseSizeAndReferenceSize:attributes/* animationPointerAndBaseSizeAndReferenceSize */.GE,sizing:attributes/* sizing */.ve},optionalAttributes:{zoomRange:attributes/* zoomRange */.jo,value1Position2Value2:attributes/* noTiming */.k3,lineLength:attributes/* noLineLength */.Sy}}}_writePoly(t,e,i){const s=[];if(!(0,templateUtils/* triangulate */.lO)(s,i))return;const r=t.vertexCount();i.forEachVertex(((i,s)=>{this._writeVertex(t,e,i,s)})),t.indexEnsureSize(s.length);for(const n of s)t.indexWrite(r+n)}}class z{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0}}const S=65535;class T extends AnimatedPolyMeshWriters_C{constructor(){super(...arguments),this.vertexSpec={createComputedParams:i,attributes:{id:attributes.id,bitset:attributes/* bitset */.Q5,pos:attributes/* pos */.n1,offset:attributes/* offset */.cY.line,tlbr:attributes/* tlbr */.Tx,animationPointerAndBaseSizeAndReferenceSize:attributes/* animationPointerAndBaseSizeAndReferenceSize */.GE,sizing:attributes/* sizing */.ve,accumulatedDistance:attributes/* accumulatedDistance */.YE,normal:attributes/* normal */.qb,segmentDirection:attributes/* segmentDirection */.zK},optionalAttributes:{zoomRange:attributes/* zoomRange */.jo,value1Position2Value2:attributes/* noTiming */.k3,lineLength:attributes/* lineLength */.bU}},this._tessParams=new LineMeshWriter/* LineTessellationParams */.sp,this._currentWrite=new z,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:S,textured:!1},this._lineLength=0,this._lineTessellator=new TurboLine/* LineTessellation */.i(((t,e,i,s,r,n,o,a,h,m,l)=>this._writeTesselatedVertex(t,e,i,s,r,n,o,a,h,m,l,this._lineLength)),this._writeTriangle.bind(this),!1)}_writePoly(r,o,a){const h=64,m=!1,l=(0,templateUtils/* clipLinesMarshall */.uS)(GeometryCursor/* GeometryCursor */.z.fromOptimized(a,"esriGeometryPolyline"),h);if(null==l)return;const{_currentWrite:u,_tessellationOptions:c}=this,{baseSize:d,capType:p,joinType:f,miterLimit:x}=this.evaluatedMeshParams,_=(0,screenUtils/* pt2px */.Lz)(.5*d);c.halfWidth=_,c.capType=(0,meshWriterUtils/* processLineCapInput */.ue)(p||enums/* LineCapStyle */.uT.Round),c.joinType=(0,meshWriterUtils/* processLineJoinInput */.qE)(f||enums/* LineJoinStyle */.wd.Round),c.miterLimit=x||2,u.out=r,u.id=o,u.vertexCount=0,u.indexCount=0,u.vertexFrom=r.vertexCount(),u.vertexBounds=1;for(const{line:t,start:e,pathLength:i}of l){c.initialDistance=e%S,u.pathLength=i,this._lineLength=0;for(let e=1;e<t.length;e++){const i=t[e].x-t[e-1].x,s=t[e].y-t[e-1].y;this._lineLength+=Math.sqrt(i*i+s*s)}this._lineTessellator.tessellate(t,c,m)}}_writeTesselatedVertex(t,e,i,s,r,n,o,a,h,m,l,u){const{out:c,id:d,vertexBounds:p,pathLength:f}=this._currentWrite;return this.hasEffects&&c.recordBounds(t,e,p,p),this._tessParams.extrusionOffsetX=o,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=h,this._tessParams.normalY=m,this._tessParams.directionX=r,this._tessParams.directionY=n,this._tessParams.distance=l,this._tessParams.pathLength=f,this._tessParams.lineLength=u,this._writeVertex(c,d,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,i){const{out:s}=this._currentWrite;s.indexEnsureSize(3),s.indexWrite(t),s.indexWrite(e),s.indexWrite(i),this._currentWrite.indexCount+=3}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityMeshWriter.js
var DotDensityMeshWriter = __webpack_require__(72189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexFillMeshWriter.js
var ComplexFillMeshWriter = __webpack_require__(1831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillMeshWriter.js
var ComplexOutlineFillMeshWriter = __webpack_require__(96595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/FillMeshWriter.js
var FillMeshWriter = __webpack_require__(21117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/GradientFillMeshWriter.js + 1 modules
var GradientFillMeshWriter = __webpack_require__(26858);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/OutlineFillMeshWriter.js
var OutlineFillMeshWriter = __webpack_require__(68765);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternFillMeshWriter.js
var PatternFillMeshWriter = __webpack_require__(24737);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillMeshWriter.js
var PatternOutlineFillMeshWriter = __webpack_require__(91065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapMeshWriter.js
var HeatmapMeshWriter = __webpack_require__(97253);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat2d.js
var mat2d = __webpack_require__(79190);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df32.js
var mat2df32 = __webpack_require__(78835);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js
var vec2f32 = __webpack_require__(17845);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/BoundingBox.js
var BoundingBox = __webpack_require__(1339);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/LabelMetric.js
var LabelMetric = __webpack_require__(51688);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/segmentUtils.js
var segmentUtils = __webpack_require__(71474);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js + 1 modules
var TextMeshWriter = __webpack_require__(35867);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/labels/LabelMeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const LabelMeshWriter_S=1,LabelMeshWriter_z=0,A=128;function D(e,t,r){return (0,string/* numericHash */.Wm)(`${e}${t}${r}`)}function LabelMeshWriter_j(e,t,r,s,o){return (0,string/* numericHash */.Wm)(`${e}${o}${t}${r*2**(TextMeshWriter/* maxLabelZoom */.GJ-s)}`)}const G=(0,MapUtils/* memoize */.Bj)((e=>{let t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t}));class Z extends TextMeshWriter/* TextMeshWriter */.G8{constructor(){super(...arguments),this._zoomLevel=0}_write(e,t,i,r){if(this._zoomLevel=r||0,null!=i)throw new Error("InternalError: EffectGeometry not support for LabelMeshWriter");switch(t.geometryType){case"esriGeometryPoint":{const i=t.readXForDisplay(),r=t.readYForDisplay();this._writePoint(e,i,r,0,t);break}case"esriGeometryEnvelope":case"esriGeometryPolygon":{const i=t.readCentroidForDisplay();if(!i)return;const[r,s]=i.coords;this._writePoint(e,r,s,0,t);break}case"esriGeometryMultipoint":{let i=0;const r=GeometryCursor/* GeometryCursor */.z.fromFeatureSetReader(t);if(r?.nextPath())for(;r.nextPoint();)this._writePoint(e,r.x,r.y,i++,t);break}case"esriGeometryPolyline":this._writeLines(e,t)}}_getMetricDir(){const{horizontalAlignment:e,verticalAlignment:t}=this.evaluatedMeshParams;return["center"===e?0:"right"===e?-1:1,"middle"===t?0:"bottom"===t?-1:1]}_createLineLabelMetric(e,t,i,r,s){const[o,n]=this._getMetricDir(),a=this.evaluatedMeshParams.scaleInfo?.maxScale??0,l=this.evaluatedMeshParams.scaleInfo?.minScale??0,h=this.evaluatedMeshParams.labelClassId;return new LabelMetric/* LabelMetric */.f(e,h,t,i,r,o,n,a,l,s)}_writePoint(e,t,i,r,s){if(t<0||t>definitions/* tileSize */.CQ||i<0||i>definitions/* tileSize */.CQ)return;const o=this._getShaping();if(!o)return;const n=s.getDisplayId(),a=this.evaluatedMeshParams.labelClassId,l=D(s.getObjectId(),a,r),[h,c]=this._getMetricDir(),m=this.evaluatedMeshParams.scaleInfo?.maxScale??0,d=this.evaluatedMeshParams.scaleInfo?.minScale??0,u=this._getPointReferenceBounds()||{offsetX:0,offsetY:0,size:0};e.metricStart(new LabelMetric/* LabelMetric */.f(n,a,l,t,i,h,c,m,d,u)),this._writeGlyphs(e,n,t,i,o,0,u,void 0,!1),e.metricBoxWrite(o.boundsT),e.metricEnd()}_getPointReferenceBounds(){if(!this._references)return null;for(const e of this._references){const t=e.getBoundsInfo();if(t)return t}return null}_writeLines(e,t){const{scaleInfo:i,verticalAlignment:r}=this.evaluatedMeshParams,s=this.evaluatedMeshParams.repeatLabelDistance||128,o=this._getShaping("middle");if(!o)return;const n=(e,t,i,r)=>this._placeSubdivGlyphs(e,t,i,r),a=(o.bounds.width+s)/(1<<LabelMeshWriter_S);this._current={out:e,id:t.getDisplayId(),objId:t.getObjectId(),shaping:o,zoomRange:(0,meshWriterUtils/* getMinMaxZoom */.My)(i,this.getTileInfo()),referenceBounds:this._getPointReferenceBounds()||{offsetX:0,offsetY:0,size:0},offsetDirection:null,pathIndex:0},this._verticalPlacement="bottom"===r?"above":"top"===r?"below":null,this._verticalPlacement?this._writeAboveAndBelowAlong(t,n,a):this._writeCenterAlong(t,n,a)}_writeAboveAndBelowAlong(e,t,i){const{repeatLabel:r}=this.evaluatedMeshParams,{shaping:s}=this._current,o=s.bounds.halfHeight,n=e.readGeometryForDisplay();if(!n)return;const a=new OptimizedGeometry/* default */.A;(0,featureConversionUtils/* generalizeOptimizedGeometry */.kz)(a,n,!1,!1,"esriGeometryPolyline",1);const l=k(new OptimizedGeometry/* default */.A,a,o),h=k(new OptimizedGeometry/* default */.A,a,-o),c=(0,featureConversionUtils/* convertToGeometry */.zv)(h,"esriGeometryPolyline",!1,!1),m=(0,featureConversionUtils/* convertToGeometry */.zv)(l,"esriGeometryPolyline",!1,!1),d=(0,segmentUtils/* smoothPaths */.Zy)(m.paths,s.bounds.width),u=(0,segmentUtils/* smoothPaths */.Zy)(c.paths,s.bounds.width);this._current.offsetDirection="above";for(let f=0;f<d.length;f++)this._current.pathIndex=f,(0,segmentUtils/* pathDivide */.Nd)(d[f],i,t,!!r);this._current.offsetDirection="below";for(let f=0;f<u.length;f++)this._current.pathIndex=f,(0,segmentUtils/* pathDivide */.Nd)(u[f],i,t,!!r)}_writeCenterAlong(e,t,i){const{repeatLabel:r}=this.evaluatedMeshParams,{shaping:s}=this._current,o=(0,segmentUtils/* smoothPaths */.Zy)(e.readLegacyGeometryForDisplay().paths,s.bounds.width);for(let n=0;n<o.length;n++)this._current.pathIndex=n,(0,segmentUtils/* pathDivide */.Nd)(o[n],i,t,!!r)}_placeSubdivGlyphs(e,t,i,r){const{allowOverrun:s,labelPosition:o,repeatLabelDistance:n}=this.evaluatedMeshParams,a=this._current.zoomRange[0],l=G(t),h=this._current.shaping.bounds.width/(1<<LabelMeshWriter_S),c=Math.sqrt(n||A)/(1<<LabelMeshWriter_S),m=Math.min(i,r-i),d=this._current.shaping.isMultiline?TextMeshWriter/* maxLabelZoom */.GJ:Math.log2(m/(c+h/2)),u=0===t?d:Math.min(l,d),f=Math.max(a,this._zoomLevel+LabelMeshWriter_S-u),g=this._zoomLevel-f,_=this._current.shaping.bounds.width/2*2**g,p=LabelMeshWriter_j(this._current.objId,this._current.pathIndex,t,this._zoomLevel,this.evaluatedMeshParams.labelClassId);this._current.shaping.isMultiline?0===t&&this._placeStraight(e,f,p):s&&g<0?this._placeStraightAlong(e,a,p):"parallel"===o?this._placeStraightAlong(e,f,p):"curved"===o&&this._placeCurved(e,f,_,p)}_placeStraight(e,t,i){const{out:r,id:s,shaping:o,referenceBounds:n}=this._current,{x:a,y:l}=e;r.metricStart(this._createLineLabelMetric(s,i,a,l)),r.metricBoxWrite(o.boundsT);const h=e.angle*(180/Math.PI)%360,c=(e.angle*(180/Math.PI)+180)%360,m={clipAngle:h,mapAligned:!0,isLineLabel:!0,minZoom:t};this._writeGlyphs(r,s,a,l,o,0,n,m,!1);const d={clipAngle:c,mapAligned:!0,isLineLabel:!0,minZoom:t};this._writeGlyphs(r,s,a,l,o,0,n,d,!1),r.metricEnd()}_placeCurved(e,t,i,r){const{out:s,id:o}=this._current;s.metricStart(this._createLineLabelMetric(o,r,e.x,e.y));const n=e.clone(),a=e.angle*(180/Math.PI)%360,l=(e.angle*(180/Math.PI)+180)%360;this._verticalPlacement&&this._verticalPlacement!==this._current.offsetDirection||(this._placeFirst(n,t,1,a),this._placeBack(e,n,t,i,1,a),this._placeForward(e,n,t,i,1,a)),this._verticalPlacement&&this._verticalPlacement===this._current.offsetDirection||(this._placeFirst(n,t,0,l),this._placeBack(e,n,t,i,0,l),this._placeForward(e,n,t,i,0,l)),s.metricEnd()}_placeStraightAlong(e,i,n){const{out:a,id:l,shaping:h,zoomRange:c,referenceBounds:m}=this._current,{boxBorderLineColor:u,boxBackgroundColor:f}=this.evaluatedMeshParams,g=e.clone(),_=e.angle*(180/Math.PI)%360,p=(e.angle*(180/Math.PI)+180)%360,b=h.glyphs.length>0&&!(!u&&!f);if(a.metricStart(this._createLineLabelMetric(l,n,e.x,e.y)),b){const n=Math.max(i,c[0],0),u=Math.min(TextMeshWriter/* maxLabelZoom */.GJ,c[1]),f=(0,mat2d/* fromRotation */.$0)((0,mat2df32/* create */.vt)(),-e.angle),g={minZoom:n,maxZoom:u,clipAngle:_,mapAligned:!0,isLineLabel:!0},b=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetX),x=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetY);if(!this._verticalPlacement||this._verticalPlacement===this._current.offsetDirection){const t=(0,vec2f32/* fromValues */.fA)(b,-1*x),[i,r]=h.shapeBackground((0,mat2d/* translate */.Tl)((0,mat2df32/* create */.vt)(),f,t));a.recordStart(this.instanceId,this.attributeLayout,h.glyphs[0].textureBinding),this._writeTextBox(a,l,e.x,e.y,r,m,g),a.recordEnd()}if(!this._verticalPlacement||this._verticalPlacement!==this._current.offsetDirection){const t=(0,vec2f32/* fromValues */.fA)(b,x),[i,r]=h.shapeBackground((0,mat2d/* translate */.Tl)((0,mat2df32/* create */.vt)(),f,t));g.clipAngle=p,a.recordStart(this.instanceId,this.attributeLayout,h.glyphs[0].textureBinding),this._writeTextBox(a,l,e.x,e.y,r,m,g),a.recordEnd()}}this._verticalPlacement&&this._verticalPlacement!==this._current.offsetDirection||this._placeFirst(g,i,1,_,!0),this._verticalPlacement&&this._verticalPlacement===this._current.offsetDirection||this._placeFirst(g,i,0,p,!0),a.metricEnd()}_placeBack(e,t,i,r,s,o){const n=e.clone();let a=e.backwardLength+LabelMeshWriter_z;for(;n.prev()&&!(a>=r);)this._placeOnSegment(n,t,a,i,-1,s,o),a+=n.length+LabelMeshWriter_z}_placeForward(e,t,i,r,s,o){const n=e.clone();let a=e.remainingLength+LabelMeshWriter_z;for(;n.next()&&!(a>=r);)this._placeOnSegment(n,t,a,i,1,s,o),a+=n.length+LabelMeshWriter_z}_placeFirst(e,i,s,a,l=!1){const{out:h,id:c,shaping:m,zoomRange:u,referenceBounds:f}=this._current,g=m.glyphs,_=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetX),p=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetY),b=(0,vec2f32/* fromValues */.fA)(_,p),x=(0,mat2d/* fromRotation */.$0)((0,mat2df32/* create */.vt)(),-e.angle);(0,vec2/* transformMat2d */.l0)(b,b,x);for(const t of g){const r=t.x>m.bounds.x?s:1-s,o=r*e.remainingLength+(1-r)*e.backwardLength,n=Math.abs(t.x+t.width/2-m.bounds.x),d=Math.max(0,this._zoomLevel+Math.log2(n/(o+LabelMeshWriter_z))),g=Math.max(i,l?0:d);if(t.maxZoom=Math.min(u[1],TextMeshWriter/* maxLabelZoom */.GJ),t.angle=e.angle+(1-s)*Math.PI,t.minZoom=Math.max(u[0],g),this._writeLineGlyph(h,c,e.x,e.y,t,a,f,!0),(s||this._current.offsetDirection)&&this._isVisible(t.minZoom,t.maxZoom)){const e=new BoundingBox/* default */.A(t.bounds.x+b[0],t.bounds.y+b[1],t.bounds.width,t.bounds.height);h.metricBoxWrite(e)}}}_placeOnSegment(e,i,s,a,l,h,c){const{out:m,id:u,shaping:f,referenceBounds:g}=this._current,_=f.glyphs,p=e.dx/e.length,b=e.dy/e.length,x={x:e.x+s*-l*p,y:e.y+s*-l*b},v=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetX),y=(0,screenUtils/* pt2px */.Lz)(this.evaluatedMeshParams.offsetY),P=(0,vec2f32/* fromValues */.fA)(v,y),w=(0,mat2d/* fromRotation */.$0)((0,mat2df32/* create */.vt)(),-e.angle);(0,vec2/* transformMat2d */.l0)(P,P,w);for(const t of _){const i=t.x>f.bounds.x?h:1-h;if(!(i&&1===l||!i&&-1===l))continue;const r=Math.abs(t.x+t.width/2-f.bounds.x),o=Math.max(0,this._zoomLevel+Math.log2(r/s)-.1),n=Math.max(a,this._zoomLevel+Math.log2(r/(s+e.length+LabelMeshWriter_z)));if(0!==o&&(t.angle=e.angle+(1-h)*Math.PI,t.minZoom=n,t.maxZoom=o,this._writeLineGlyph(m,u,x.x,x.y,t,c,g,!0),(h||this._current.offsetDirection)&&this._isVisible(t.minZoom,t.maxZoom))){const e=new BoundingBox/* default */.A(t.bounds.x+P[0],t.bounds.y+P[1],t.bounds.width,t.bounds.height);m.metricBoxWrite(e)}}}_writeLineGlyph(e,t,i,r,s,o,n,a){if(i<0||i>definitions/* tileSize */.CQ||r<0||r>definitions/* tileSize */.CQ)return;e.recordStart(this.instanceId,this.attributeLayout,s.textureBinding);const{texcoords:l,offsets:h}=s,{fontSize:c,haloSize:m,outlineSize:d}=this._textMeshTransformProps;this._writeQuad(e,t,i,r,{texcoords:l,offsets:h,fontSize:c,haloSize:m,outlineSize:d,color:(0,meshWriterUtils/* processColorInput */.Jb)(this.evaluatedMeshParams.color),isBackground:!1,referenceBounds:n,minZoom:Math.max(this._current.zoomRange[0],s.minZoom),maxZoom:Math.min(this._current.zoomRange[1],s.maxZoom),clipAngle:o,mapAligned:a,isLineLabel:!0}),e.recordEnd()}_packedZoom(e){return Math.floor(e*definitions/* minMaxZoomPrecisionFactor */.fq)/definitions/* minMaxZoomPrecisionFactor */.fq}_isVisible(e,t){let i=Math.max(this._current.zoomRange[0],e),r=Math.min(this._current.zoomRange[1],t);i=this._packedZoom(i),r=this._packedZoom(r);const s=this._packedZoom(this._zoomLevel);return i<=s&&s<=r}}function k(e,t,i){const{coords:r,lengths:s}=t,o=(0,vec2f64/* create */.vt)(),n=(0,vec2f64/* create */.vt)(),d=(0,vec2f64/* create */.vt)(),f=(0,vec2f64/* create */.vt)(),g=(0,vec2f64/* create */.vt)(),_=(0,vec2f64/* create */.vt)(),p=2;let b=0;for(let u=0;u<s.length;u++){const t=s[u];for(let s=0;s<t;s++){const u=p*(s+b-1),x=p*(s+b),M=p*(s+b+1);s>0?(0,vec2/* set */.hZ)(o,r[u],r[u+1]):(0,vec2/* set */.hZ)(o,0,0),(0,vec2/* set */.hZ)(n,r[x],r[x+1]),s<t-1?(0,vec2/* set */.hZ)(d,r[M],r[M+1]):(0,vec2/* set */.hZ)(d,0,0),0===s?(0,vec2/* set */.hZ)(f,0,0):((0,vec2/* sub */.jb)(f,n,o),(0,vec2/* normalize */.S8)(f,f),(0,vec2/* set */.hZ)(f,f[1],-f[0])),s===t-1?(0,vec2/* set */.hZ)(g,0,0):((0,vec2/* sub */.jb)(g,d,n),(0,vec2/* normalize */.S8)(g,g),(0,vec2/* set */.hZ)(g,g[1],-g[0])),(0,vec2/* add */.WQ)(_,f,g),(0,vec2/* normalize */.S8)(_,_);const v=_[0]*g[0]+_[1]*g[1];0!==v&&(0,vec2/* scale */.hs)(_,_,v),(0,vec2/* scale */.hs)(_,_,i),e.coords.push(n[0]+_[0],n[1]+_[1])}e.lengths.push(t),b+=t}return e}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/GradientStrokeMeshWriter.js
var GradientStrokeMeshWriter = __webpack_require__(19425);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/TexturedLineMeshWriter.js
var TexturedLineMeshWriter = __webpack_require__(35822);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerMeshWriter.js + 1 modules
var MarkerMeshWriter = __webpack_require__(25416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/ArcadeExpression.js
var ArcadeExpression = __webpack_require__(46709);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/grouping.js
var grouping = __webpack_require__(75625);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/infos.js
var infos = __webpack_require__(1341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/utils.js
var utils = __webpack_require__(76849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/utils.js
var mesh_utils = __webpack_require__(12453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/DictionaryValue.js
var DictionaryValue = __webpack_require__(29491);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterInputEvaluator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const y=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.mesh.MeshWriterInputEvaluator");async function h(e,r,t,s){const{defaultValue:o,valueExpressionInfo:a,value:i}=r;if(a){if("dictionary-template"===a.type)return{...r,computed:e.createDictionaryTemplateField(a,t),defaultValue:o};const{expression:i}=a,n=await e.createComputedField({expression:i},s);return n?{...r,computed:n,defaultValue:o}:null}return{...r,computed:new DictionaryValue/* DictionaryValue */.G(i),defaultValue:o}}async function MeshWriterInputEvaluator_v(e,r,t){const{valueExpressionInfo:s}=r,o="dictionary-template"===s.type?e.createDictionaryTemplateField(s,t):await e.createComputedField({expression:s.expression});return o?{...r,computed:o}:null}function P(e){return"object"==typeof e&&null!=e&&(!(!("valueExpressionInfo"in e)||!e.valueExpressionInfo)||"type"in e&&"Process"===e.type&&"op"in e&&"Random"===e.op)}function MeshWriterInputEvaluator_(e){if(Array.isArray(e))for(const r of e)if(MeshWriterInputEvaluator_(r))return!0;if("object"==typeof e){if(P(e))return!0;for(const r in e){if(MeshWriterInputEvaluator_(e[r]))return!0}}return!1}class MeshWriterInputEvaluator_I{static async create(r,t,s,o){const a={},i=new Map,m=new Map,f=new Map,l=new Map,d=new Map,u=new Map;for(const y in s){const I=s[y];if(null!=I&&"object"==typeof I)if(Array.isArray(I)){if("object"==typeof I[0])throw new Error(`InternalError: Cannot handle ${y}. Nested array params are not supported`);a[y]=I}else if("valueExpressionInfo"in I){if(I.value){a[y]=I.value;continue}const e=await MeshWriterInputEvaluator_v(r,I,o);if(!e){a[y]=I.defaultValue;continue}i.set(y,e),a[y]=null}else switch(I.type){case"cim-effect-infos":if(I.effectInfos.some((e=>e.overrides.length))){m.set(y,{effects:await Promise.all(I.effectInfos.map((async t=>{const s=t.overrides.map((e=>h(r,e,o,!1)));return{effect:t.effect,compiledOverrides:(await Promise.all(s)).filter(arrayUtils/* isSome */.Ru)}})))});break}a[y]=I.effectInfos.map((e=>e.effect));break;case"cim-marker-placement-param":I.overrides.length&&f.set(y,{placementInfo:I,compiledOverrides:(await Promise.all(I.overrides.map((e=>h(r,e,o,!1))))).filter(arrayUtils/* isSome */.Ru)}),a[y]=I.placement;break;case"text-rasterization-param":{if(I.overrides.length){const t=I.overrides.map((e=>h(r,e,o,I.useLegacyLabelEvaluationRules??!1)));l.set(y,{compiledOverrides:(await Promise.all(t)).filter(arrayUtils/* isSome */.Ru),rasterizationParam:I,objectIdToResourceId:new Map});continue}const s={type:"cim-rasterization-info",resource:I.resource};a[y]=await t.fetchResourceImmediate(s)??null;break}case"sprite-rasterization-param":{if(I.overrides.length){const t=I.overrides.map((e=>h(r,e,o,!1)));l.set(y,{compiledOverrides:(await Promise.all(t)).filter(arrayUtils/* isSome */.Ru),rasterizationParam:I,objectIdToResourceId:new Map});continue}if("animated"===I.resource.type){l.set(y,{compiledOverrides:[],rasterizationParam:I,objectIdToResourceId:new Map});continue}const s={type:"cim-rasterization-info",resource:I.resource};a[y]=await t.fetchResourceImmediate(s)??null;break}case"cim-marker-transform-param":{const{params:e}=I;if(MeshWriterInputEvaluator_(e)){const t={compiledMarkerInfos:[]};await Promise.all(e.map((async e=>{const s={props:{}};for(const t in e)if(P(e[t])){const a=await MeshWriterInputEvaluator_v(r,e[t],o);s.compiledExpressionMap||(s.compiledExpressionMap=new Map);const i=s.compiledExpressionMap;a&&i.set(t,a)}else s.props[t]=e[t];t.compiledMarkerInfos.push(s)}))),d.set(y,t)}else a[y]={type:"cim-marker-transform-info",infos:e};break}case"animation-params":{const{params:e}=I,s=(0,utils/* createParamList */.oo)(e);if(MeshWriterInputEvaluator_(s)){const e=await Promise.all(s.map((e=>(0,utils/* compileAnimationParam */.N)(e,r))));u.set(y,{params:e,propertyIdToResourceId:new Map,key:y})}else{const e=(0,utils/* fromJSON */.rS)(s),r=await t.fetchResourceImmediate({type:"animation-info",resource:e});null!=r&&"sprite"===r.type&&(a[y]={dataRow:r.rect.y,dataColumn:r.rect.x})}break}default:a[y]=I}else a[y]=I}return new MeshWriterInputEvaluator_I(s,a,i,m,f,l,d,u)}constructor(e,r,t,s,a,i,n,c){this.inputMeshParams=e,this._resolvedMeshParams=r,this._dynamicProperties=t,this._dynamicEffectProperties=s,this._dynamicPlacementProperties=a,this._dynamicAsyncProperties=i,this._dynamicTransformProperties=n,this._dynamicAsyncAnimations=c,this.evaluator=e=>e,this._arcadeDependencies=new Set;for(const p of this._expressions())(0,ArcadeExpression/* collectExpressionDependencies */.QY)(this._arcadeDependencies,p)}get hasDynamicProperties(){return!!(this._dynamicProperties.size||this._dynamicAsyncProperties.size||this._dynamicEffectProperties.size||this._dynamicTransformProperties.size||this._dynamicPlacementProperties.size||this._dynamicAsyncAnimations.size)}get evaluatedMeshParams(){return this._evaluatedMeshParams||(this._evaluatedMeshParams=this.evaluator(this._resolvedMeshParams)),this._evaluatedMeshParams}enqueueRequest(e,s,o){for(const i of this._dynamicAsyncProperties.values()){const c=(0,lang/* clone */.o8)(i.rasterizationParam.resource);"animated"===i.rasterizationParam.resource.type&&i.rasterizationParam.resource.randomizeStartTime&&(c.primitiveName="__RESERVED__PRIMITIVE__NAME__",c.startGroup=(0,grouping/* getStartGroup */.A)(s.getObjectId()||0));for(const{primitiveName:e,propertyName:t,computed:a,defaultValue:m,valueExpressionInfo:f}of i.compiledOverrides)try{const r="animated"===i.rasterizationParam.resource.type?c.primitiveName:e;(0,mesh_utils/* applyComputedValue */.Ph)(c,r,t,a,s,o,m)}catch(n){y().errorOnce(new core_Error/* default */.A("invalid-arcade-expression","Encountered an error when evaluating the arcade expression",{error:n,valueExpressionInfo:f}))}const p=e.enqueueRequest({type:"cim-rasterization-info",resource:c});i.objectIdToResourceId.set(s.getObjectId(),p)}for(const r of this._dynamicAsyncAnimations.values()){const t=r.params.map((e=>(0,utils/* resolveToAnimationInfo */.SM)(e,s,o))).map(infos/* hydrate */.Qv).map((e=>e.simplify())),a=(0,utils/* encodeParamList */.aM)(t),n=e.enqueueRequest({type:"animation-info",resource:a});r.propertyIdToResourceId.set(s.getObjectId()+"."+r.key,n)}}evaluateMeshParams(e,r,t){for(const[s,o]of this._dynamicProperties.entries())this._resolvedMeshParams[s]=o.computed.readWithDefault(r,t,o.defaultValue);for(const[s,o]of this._dynamicPlacementProperties.entries())for(const{computed:e,defaultValue:a,propertyName:i}of o.compiledOverrides){const n=e.readWithDefault(r,t,a);o.placementInfo.placement[i]=n,this._resolvedMeshParams[s]=o.placementInfo.placement}for(const[s,o]of this._dynamicEffectProperties.entries())for(const e of o.effects){for(const{computed:s,defaultValue:o,propertyName:a}of e.compiledOverrides){const i=s.readWithDefault(r,t,o);e.effect[a]=i}this._resolvedMeshParams[s]=o.effects.map((e=>e.effect))}for(const[s,o]of this._dynamicTransformProperties.entries()){const e={type:"cim-marker-transform-info",infos:[]};for(const s of o.compiledMarkerInfos){const o={...s.props};if(s.compiledExpressionMap)for(const[e,a]of s.compiledExpressionMap){const s=a.computed.readWithDefault(r,t,a.defaultValue);o[e]="number"==typeof s||"boolean"==typeof s?s:a.defaultValue}e.infos.push(o)}this._resolvedMeshParams[s]=e}for(const[s,o]of this._dynamicAsyncProperties.entries()){const t=o.objectIdToResourceId.get(r.getObjectId());if(null==t)continue;const a=e.getResource(t);this._resolvedMeshParams[s]=a}for(const[s,o]of this._dynamicAsyncAnimations.entries()){const t=o.propertyIdToResourceId.get(r.getObjectId()+"."+s);if(null==t)continue;const a=e.getResource(t);this._resolvedMeshParams[s]={dataRow:a.rect.y,dataColumn:a.rect.x}}return this._evaluatedMeshParams=this.evaluator(this._resolvedMeshParams),this.evaluatedMeshParams}hasArcadeDependency(e){return this._arcadeDependencies.has(e)}*_expressions(){for(const e of this._dynamicProperties.values())yield e.computed;for(const e of this._dynamicEffectProperties.values())for(const r of e.effects)for(const e of r.compiledOverrides)yield e.computed;for(const e of this._dynamicPlacementProperties.values())for(const r of e.compiledOverrides)yield r.computed;for(const e of this._dynamicAsyncProperties.values())for(const r of e.compiledOverrides)yield r.computed;for(const e of this._dynamicTransformProperties.values())for(const r of e.compiledMarkerInfos)if(null!=r.compiledExpressionMap)for(const e of r.compiledExpressionMap.values())yield e.computed;for(const e of this._dynamicAsyncAnimations.values())for(const r of e.params)yield*(0,utils/* getAnimationExpressions */.ci)(r)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/pieChart/PieChartMeshWriter.js
var PieChartMeshWriter = __webpack_require__(48075);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterRegistry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MeshWriterRegistry_y{async createMeshWriter(e,r,t,i,s){const a=this._getMeshWriter(i.techniqueType),n=await MeshWriterInputEvaluator_I.create(e,r,i.inputParams,s),l=new a(i.id,n,i.optionalAttributes,t);return await l.loadDependencies(),l}_getMeshWriter(F){switch(F){case TechniqueType/* TechniqueType */.N.Fill:return FillMeshWriter/* FillMeshWriter */.Y;case TechniqueType/* TechniqueType */.N.DotDensity:return DotDensityMeshWriter/* DotDensityMeshWriter */.k;case TechniqueType/* TechniqueType */.N.ComplexFill:return ComplexFillMeshWriter/* ComplexFillMeshWriter */.KE;case TechniqueType/* TechniqueType */.N.PatternFill:return PatternFillMeshWriter/* PatternFillMeshWriter */.m;case TechniqueType/* TechniqueType */.N.GradientFill:return GradientFillMeshWriter/* GradientFillMeshWriter */.S;case TechniqueType/* TechniqueType */.N.OutlineFill:return OutlineFillMeshWriter/* OutlineFillMeshWriter */.w0;case TechniqueType/* TechniqueType */.N.PatternOutlineFill:return PatternOutlineFillMeshWriter/* PatternOutlineFillMeshWriter */.Q;case TechniqueType/* TechniqueType */.N.ComplexOutlineFill:return ComplexOutlineFillMeshWriter/* ComplexOutlineFillMeshWriter */.O;case TechniqueType/* TechniqueType */.N.Marker:return MarkerMeshWriter/* MarkerMeshWriter */.H;case TechniqueType/* TechniqueType */.N.PieChart:return PieChartMeshWriter/* PieChartMeshWriter */.v;case TechniqueType/* TechniqueType */.N.Text:return TextMeshWriter/* TextMeshWriter */.G8;case TechniqueType/* TechniqueType */.N.Line:return LineMeshWriter/* LineMeshWriter */.Bw;case TechniqueType/* TechniqueType */.N.TexturedLine:return TexturedLineMeshWriter/* TexturedLineMeshWriter */.K;case TechniqueType/* TechniqueType */.N.GradientStroke:return GradientStrokeMeshWriter/* GradientStrokeMeshWriter */.F;case TechniqueType/* TechniqueType */.N.Heatmap:return HeatmapMeshWriter/* HeatmapMeshWriter */.h;case TechniqueType/* TechniqueType */.N.Label:return Z;case TechniqueType/* TechniqueType */.N.AnimatedMarker:return C;case TechniqueType/* TechniqueType */.N.AnimatedMarkerShift:return I;case TechniqueType/* TechniqueType */.N.AnimatedFill:return AnimatedPolyMeshWriters_j;case TechniqueType/* TechniqueType */.N.AnimatedLine:return T;default:throw new Error("Internal Error: Mesh writer not in the registry")}}}


/***/ }),

/***/ 17906:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ o),
/* harmony export */   q: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55429);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e,o,s,f){const r=s.packPrecisionFactor??1;switch(s.type){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.BYTE:if(1===s.count)e.setInt8(f+s.offset,o*r);else for(let t=0;t<s.count;t++){const n=t*Int8Array.BYTES_PER_ELEMENT;e.setInt8(f+s.offset+n,o[t]*r)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE:if(1===s.count)e.setUint8(f+s.offset,o*r);else for(let t=0;t<s.count;t++){const n=t*Uint8Array.BYTES_PER_ELEMENT;e.setUint8(f+s.offset+n,o[t]*r)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT:if(1===s.count)e.setInt16(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Int16Array.BYTES_PER_ELEMENT;e.setInt16(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_SHORT:if(1===s.count)e.setUint16(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Uint16Array.BYTES_PER_ELEMENT;e.setUint16(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.INT:if(1===s.count)e.setInt32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Int32Array.BYTES_PER_ELEMENT;e.setInt32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_INT:if(1===s.count)e.setUint32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Uint32Array.BYTES_PER_ELEMENT;e.setUint32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.FLOAT:if(1===s.count)e.setFloat32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Float32Array.BYTES_PER_ELEMENT;e.setFloat32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.HALF_FLOAT:if(1===s.count)e.setUint16(f+s.offset,(0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint16 */ .fw)(o*r),!0);else for(let n=0;n<s.count;n++){const E=n*Uint16Array.BYTES_PER_ELEMENT;e.setUint16(f+s.offset+E,(0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint16 */ .fw)(o[n]*r),!0)}}}function s(t,o,s){switch(o.type){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.BYTE:{if(1===o.count)return t.getInt8(s+o.offset);const e=[];for(let n=0;n<o.count;n++){const f=n*Int8Array.BYTES_PER_ELEMENT;e.push(t.getInt8(s+o.offset+f))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE:{if(1===o.count)return t.getUint8(s+o.offset);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint8Array.BYTES_PER_ELEMENT;e.push(t.getUint8(s+o.offset+f))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT:{if(1===o.count)return t.getInt16(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Int16Array.BYTES_PER_ELEMENT;e.push(t.getInt16(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_SHORT:{if(1===o.count)return t.getUint16(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint16Array.BYTES_PER_ELEMENT;e.push(t.getUint16(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.INT:{if(1===o.count)return t.getInt32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Int32Array.BYTES_PER_ELEMENT;e.push(t.getInt32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_INT:{if(1===o.count)return t.getUint32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint32Array.BYTES_PER_ELEMENT;e.push(t.getUint32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.FLOAT:{if(1===o.count)return t.getFloat32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Float32Array.BYTES_PER_ELEMENT;e.push(t.getFloat32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.HALF_FLOAT:{if(1===o.count)return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .fromUint16 */ .Kl)(t.getUint16(s+o.offset,!0));const n=[];for(let f=0;f<o.count;f++){const r=f*Uint16Array.BYTES_PER_ELEMENT;n.push((0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .fromUint16 */ .Kl)(t.getUint16(s+o.offset+r,!0)))}return n}}}


/***/ }),

/***/ 98003:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ n),
/* harmony export */   U: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n){return n}function r(n){return n}


/***/ }),

/***/ 80972:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ e),
/* harmony export */   z: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=null;function t(){return n}async function e(){n=await __webpack_require__.e(/* import() */ 30985).then(__webpack_require__.bind(__webpack_require__, 53366))}


/***/ }),

/***/ 12453:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ph: () => (/* binding */ r),
/* harmony export */   Z0: () => (/* binding */ a),
/* harmony export */   hU: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){const r=t.map((({name:e,count:t,type:r})=>`${e}.${t}.${r}`)).join(",");return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .numericHash */ .Wm)(r)}function r(e,t,o,a,c,n,s){if(e.primitiveName===t){let t=a?.readWithDefault(c,n,e[o]&&s);return"text"===e.type&&(t=t.toString()),void(e[o]=t)}if("type"in e&&null!=e.type){if(e.effects)for(const i of e.effects)r(i,t,o,a,c,n,s);switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.symbolLayers)for(const i of e.symbolLayers)r(i,t,o,a,c,n,s);break;case"CIMTextSymbol":e.symbol&&r(e.symbol,t,o,a,c,n,s);break;case"CIMHatchFill":e.lineSymbol&&r(e.lineSymbol,t,o,a,c,n,s);break;case"CIMPictureMarker":case"CIMCharacterMarker":case"CIMVectorMarker":if(e.markerPlacement&&r(e.markerPlacement,t,o,a,c,n,s),"CIMVectorMarker"===e.type&&e.markerGraphics)for(const i of e.markerGraphics)r(i,t,o,a,c,n,s),r(i.symbol,t,o,a,c,n,s)}}}const o=400;function a(e){const t=Math.max(1.25*e.width,20);return null!=e.effects&&e.effects.length>0?o:t}


/***/ }),

/***/ 48075:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89882);
/* harmony import */ var _fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59515);
/* harmony import */ var _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71858);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o={createComputedParams:e=>e,optionalAttributes:{},attributes:{pos:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:e=>0},offset:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:({size:t})=>{const r=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(t),i=-r/2,o=-r/2;return[[i,o],[i+r,o],[i,o+r],[i+r,o+r]]}}},texCoords:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE,count:2,pack:({size:e})=>[e,e]},referenceSize:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE,count:1,pack:({size:t})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(t)},zoomRange:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE,count:2,pack:({scaleInfo:e},{tileInfo:r})=>(0,_fill_meshWriterUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMinMaxZoom */ .My)(e,r)}}};class s extends _mesh_MeshWriter_js__WEBPACK_IMPORTED_MODULE_1__/* .MeshWriter */ .r{constructor(){super(...arguments),this.vertexSpec=o}_write(t,r){const i=r.getDisplayId(),o=this.evaluatedMeshParams.minPixelBuffer,s=Math.max((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(this.evaluatedMeshParams.size),o);let c,n;if("esriGeometryPoint"===r.geometryType)c=r.readXForDisplay(),n=r.readYForDisplay();else{const e=r.readCentroidForDisplay();if(!e)return;c=e?.coords[0],n=e?.coords[1]}t.recordStart(this.instanceId,this.attributeLayout),t.recordBounds(c,n,s,s);const a=t.vertexCount();this._writeVertex(t,i,c,n),t.indexWrite(a+0),t.indexWrite(a+1),t.indexWrite(a+2),t.indexWrite(a+1),t.indexWrite(a+3),t.indexWrite(a+2),t.recordEnd()}}


/***/ }),

/***/ 24331:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47381);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39689);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43212);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class q extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexInput */ .ZA{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],q.prototype,"position",void 0);class z extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentInput */ .HS{}class A extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],A.prototype,"layerTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],A.prototype,"backbufferTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],A.prototype,"opacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],A.prototype,"inFadeOpacity",void 0);class D extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .GraphShaderModule */ .A{constructor(){super(...arguments),this.type="BlendShader"}vertex(t){return{uv:t.position,glPosition:new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .uvToClip */ .nb)(t.position),0,1)}}fragment(t){const l=new _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentOutput */ .mm,e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.layerTexture,t.uv),n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.backbufferTexture,t.uv),i=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(e.a,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),e.rgb,e.rgb.divide(e.a)),a=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(n.a,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),n.rgb,n.rgb.divide(n.a)),o=this.config.opacity.multiply(e.a),u=n.a;switch(this.blendMode){case"destination-over":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u)).add(a.multiply(u)),o.add(u).subtract(o.multiply(u)));break;case"source-in":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).multiply(u),o.multiply(u)),e=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(a.multiply(u),u).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(this.config.opacity)).multiply(this.config.inFadeOpacity);l.fragColor=t.add(e)}break;case"destination-in":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(a.multiply(u).multiply(o),u.multiply(o)),e=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(a.multiply(u),u).multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(this.config.opacity).multiply(this.config.inFadeOpacity)));l.fragColor=t.add(e)}break;case"source-out":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u)),o.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u)));break;case"destination-out":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(a.multiply(u).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o)),u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o)));break;case"source-atop":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).multiply(u).add(a.multiply(u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o)))),u);break;case"destination-atop":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u))).add(a.multiply(u).multiply(o)),o);break;case"xor":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u))).add(a.multiply(u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o)))),o.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u)).add(u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))));break;case"multiply":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).multiply(a.multiply(u)).add(i.multiply(o).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u))).add(a.multiply(u).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))),o.add(u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))));break;case"screen":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.add(a).subtract(i.multiply(a)).multiply(o.multiply(u)).add(i.multiply(o).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(u))).add(a.multiply(u).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))),o.add(u.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))));break;case"overlay":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(H(a.r,i.r),H(a.g,i.g),H(a.b,i.b));l.fragColor=E(t,i,a,o,u)}break;case"darken":{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(i,a);l.fragColor=E(t,i,a,o,u)}break;case"lighter":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(i.multiply(o).add(a.multiply(u)),o.add(u));break;case"lighten":{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .max */ .T9)(i,a);l.fragColor=E(t,i,a,o,u)}break;case"color-dodge":{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(I(a.r,i.r),I(a.g,i.g),I(a.b,i.b)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(1));l.fragColor=E(t,i,a,o,u)}break;case"color-burn":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(J(a.r,i.r),J(a.g,i.g),J(a.b,i.b));l.fragColor=E(t,i,a,o,u)}break;case"hard-light":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(K(a.r,i.r),K(a.g,i.g),K(a.b,i.b));l.fragColor=E(t,i,a,o,u)}break;case"soft-light":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(L(a.r,i.r),L(a.g,i.g),L(a.b,i.b));l.fragColor=E(t,i,a,o,u)}break;case"difference":{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .abs */ .tn)(a.subtract(i));l.fragColor=E(t,i,a,o,u)}break;case"exclusion":{const t=i.add(a).subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(i).multiply(a));l.fragColor=E(t,i,a,o,u)}break;case"invert":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(1).subtract(a).multiply(o).multiply(u).add(a.multiply(u).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(o))),u);break;case"vivid-light":{const t=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(N(a.r,i.r),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(N(a.g,i.g),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(N(a.b,i.b),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)));l.fragColor=E(t,i,a,o,u)}break;case"hue":{const t=Y(i,a,a);l.fragColor=E(t,i,a,o,u)}break;case"saturation":{const t=Y(a,i,a);l.fragColor=E(t,i,a,o,u)}break;case"color":{const t=X(i,a);l.fragColor=E(t,i,a,o,u)}break;case"luminosity":{const t=X(a,i);l.fragColor=E(t,i,a,o,u)}break;case"plus":l.fragColor=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(e.r.add(a.r),e.g.add(a.g),e.b.add(a.b),o.add(u)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(1));break;case"minus":l.fragColor=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(a.r.subtract(e.r),a.g.subtract(e.g),a.b.subtract(e.b)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(1)),u.multiply(o));break;case"average":{const t=a.add(i).divide(2);l.fragColor=E(t,i,a,o,u)}break;case"reflect":{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(Z(a.r,i.r),Z(a.g,i.g),Z(a.b,i.b)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(0),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(1));l.fragColor=E(t,i,a,o,u)}break;default:l.fragColor=e.multiply(this.config.opacity)}return l}}function E(t,l,e,r,n){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(t.multiply(r).multiply(n).add(l.multiply(r).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(n))).add(e.multiply(n).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(r))),r.add(n.multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(r))))}function H(t,l){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l)).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(l).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(t))))).add((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l).multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l).multiply(t)))}function I(t,l){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(l,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1),t.divide(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract(l)))))}function J(t,l){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(l,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1),(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(t).divide(l)))))}function K(t,l){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l)).multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l).multiply(t)).add((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(l).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(t))))))}function L(t,l){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .cond */ .j1)([(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .lessThanEqual */ .$5)(l,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5)),()=>{const e=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l),r=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(e),n=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(t);return t.subtract(r.multiply(t).multiply(n))}],[(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .lessThanEqual */ .$5)(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.25)),()=>{const e=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l),r=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .minusOne */ .p8)(e).multiply(t),n=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(16).multiply(t).subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(12)).multiply(t).add(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(3));return t.add(r.multiply(n))}],[!0,()=>{const e=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l),r=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .minusOne */ .p8)(e),n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .sqrt */ .RZ)(t).subtract(t);return t.add(r.multiply(n))}])}function N(t,l){const e=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l)).multiply(J(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply(l))),r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5),l).multiply(I(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(2).multiply((0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .minusScalar */ .zy)(l,.5))));return e.add(r)}function Q(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(t.r,t.g),t.b)}function R(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .max */ .T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .max */ .T9)(t.r,t.g),t.b)}function U(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .dot */ .Om)(t,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(.3,.59,.11))}function V(t){return R(t).subtract(Q(t))}function W(t){const l=U(t),e=Q(t),r=R(t);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .cond */ .j1)([(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .lessThan */ .Xe)(e,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),()=>{const r=t.subtract(l).multiply(l),n=l.subtract(e);return l.add(r.divide(n))}],[(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .greaterThan */ .MM)(r,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),()=>{const e=t.subtract(l),n=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(l),i=e.multiply(n),a=r.subtract(l);return l.add(i.divide(a))}],[!0,t])}function X(t,l){const e=U(t),r=U(l).subtract(e);return W(t.add(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(r)))}function Y(t,l,e){const r=Q(t),n=V(t),i=V(l);return X((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .greaterThan */ .MM)(n,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)),(()=>t.subtract(r).multiply(i).divide(n)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(0)),e)}function Z(t,l){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(l,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),l,(()=>{const e=(0,_utils_js__WEBPACK_IMPORTED_MODULE_3__/* .oneMinus */ .zb)(l),r=t.multiply(t).divide(e);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(r,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1))}))}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .define */ .E8],D.prototype,"blendMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(A)],D.prototype,"config",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(q))],D.prototype,"vertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(z))],D.prototype,"fragment",null);


/***/ }),

/***/ 44104:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47381);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39689);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class G extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexInput */ .ZA{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],G.prototype,"position",void 0);class S extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentInput */ .HS{}class k extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Mat3 */ .U)],k.prototype,"dvs",void 0);class M extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],M.prototype,"halfWidth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],M.prototype,"aaWidth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],M.prototype,"pxPerCell",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb)],M.prototype,"minorLineColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb)],M.prototype,"majorLineColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Int */ .Ai)],M.prototype,"majorLineInterval",void 0);class _ extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .GraphShaderModule */ .A{constructor(){super(...arguments),this.type="GridShader"}vertex(t){const o=t.position.multiply(2).subtract(1);return{gridPos:this.transform.dvs.multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec3 */ .eB(o,1)).xy,glPosition:new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(o,0,1)}}fragment(t){const o=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .abs */ .tn)(t.gridPos),e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .fract */ .jc)(o),i=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(e.x,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract(e.x)),n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(e.y,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract(e.y)),s=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(i,n).multiply(this.config.pxPerCell).subtract(this.config.halfWidth),a=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(s.x,s.y),p=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .smoothstep */ .TF)(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0),this.config.aaWidth,a)),l=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Int */ .Ai((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .round */ .LI)(o.x)),d=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Int */ .Ai((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .round */ .LI)(o.y)),c=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .intMod */ .Gb)(l,this.config.majorLineInterval)),I=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .intMod */ .Gb)(d,this.config.majorLineInterval)),G=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .lessThan */ .Xe)(s.x,s.y),c,I),S=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .greaterThan */ .MM)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(s.x,this.config.aaWidth),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .step */ .PM)(s.y,this.config.aaWidth)),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5)),k=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(c,I),M=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)(S,k,G),_=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .mix */ .jh)(this.config.majorLineColor,this.config.minorLineColor,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .min */ .jk)(M,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1))),q=new _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentOutput */ .mm;return q.fragColor=_.multiply(p),q}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(k)],_.prototype,"transform",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(M)],_.prototype,"config",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(G))],_.prototype,"vertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(S))],_.prototype,"fragment",null);


/***/ }),

/***/ 94196:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47381);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39689);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32520);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class T extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexInput */ .ZA{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],T.prototype,"position",void 0);class C extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentInput */ .HS{}class j extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],j.prototype,"readbackTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],j.prototype,"maskTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],j.prototype,"overlayTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb)],j.prototype,"background",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb)],j.prototype,"drawPos",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],j.prototype,"maskEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],j.prototype,"overlayEnabled",void 0);class E extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .GraphShaderModule */ .A{constructor(){super(...arguments),this.type="MagnifierShader"}vertex(t){const o=t.position,e=t.position.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(.5)).multiply(this.config.drawPos.zw),r=this.config.drawPos.xy.add(e);return{glPosition:new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(r,0,1),texCoord:o}}fragment(t){let o=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.readbackTexture,P(t.texCoord));o=o.add(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract(o.a)).multiply(this.config.background);const e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(this.config.maskEnabled,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.maskTexture,t.texCoord).a,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1));o=o.multiply(e);const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(this.config.overlayEnabled,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.overlayTexture,t.texCoord),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(0)),s=new _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentOutput */ .mm;return s.fragColor=n.add(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(1).subtract(n.a).multiply(o)),s}}function P(t){const o=t.multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(2)).subtract(1);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ifElse */ .Tk)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(o.x,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0)).and((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .equal */ .LC)(o.y,new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(0))),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(.5),(()=>{const t=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .atan */ .rY)(o.y,o.x),e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .pow */ .n7)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .length */ .Bw)(o),new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(_constants_js__WEBPACK_IMPORTED_MODULE_3__/* .magnifierBarrelFactor */ .eo)),r=new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .cos */ .gn)(t),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .sin */ .F8)(t));return e.multiply(r).multiply(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(.5)).add(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt(.5))}))}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(j)],E.prototype,"config",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(T))],E.prototype,"vertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(C))],E.prototype,"fragment",null);


/***/ }),

/***/ 56561:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47381);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39689);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexInput */ .ZA{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],f.prototype,"position",void 0);class g extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentInput */ .HS{}class x extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],x.prototype,"layerTexture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],x.prototype,"opacity",void 0);class h extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .GraphShaderModule */ .A{constructor(){super(...arguments),this.type="OpacityShader"}vertex(t){return{uv:t.position,glPosition:new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(t.position.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY(.5)).multiply(2),0,1)}}fragment(t){const o=new _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentOutput */ .mm;return o.fragColor=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.layerTexture,t.uv).multiply(this.config.opacity),o}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(x)],h.prototype,"config",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(f))],h.prototype,"vertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(g))],h.prototype,"fragment",null);


/***/ }),

/***/ 58207:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47381);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39689);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexInput */ .ZA{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],f.prototype,"position",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(1,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec2 */ .ZY)],f.prototype,"texcoord",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .location */ .C5)(2,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],f.prototype,"w",void 0);class g extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentInput */ .HS{}class m extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .UniformGroup */ .k2{}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Sampler2D */ .z7)],m.prototype,"texture",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Float */ .nt)],m.prototype,"opacity",void 0);class h extends _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .GraphShaderModule */ .A{constructor(){super(...arguments),this.type="VideoScreenShader"}vertex(o){const{position:t,texcoord:e,w:r}=o;return{glPosition:new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Vec4 */ .Zb(t,0,r),texcoord:e}}fragment(o){const t=new _GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .FragmentOutput */ .mm;return t.fragColor=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .texture2D */ .US)(this.config.texture,o.texcoord).multiply(this.config.opacity),t}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .uniform */ .Pi)(m)],h.prototype,"config",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(f))],h.prototype,"vertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.a)(0,(0,_GraphShaderModule_js__WEBPACK_IMPORTED_MODULE_1__/* .input */ .hF)(g))],h.prototype,"fragment",null);


/***/ }),

/***/ 32520:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $w: () => (/* binding */ G),
/* harmony export */   Fb: () => (/* binding */ h),
/* harmony export */   Fz: () => (/* binding */ C),
/* harmony export */   H_: () => (/* binding */ i),
/* harmony export */   J5: () => (/* binding */ n),
/* harmony export */   M: () => (/* binding */ u),
/* harmony export */   Ni: () => (/* binding */ s),
/* harmony export */   V5: () => (/* binding */ o),
/* harmony export */   Xx: () => (/* binding */ B),
/* harmony export */   YV: () => (/* binding */ I),
/* harmony export */   au: () => (/* binding */ A),
/* harmony export */   b5: () => (/* binding */ E),
/* harmony export */   bB: () => (/* binding */ M),
/* harmony export */   bg: () => (/* binding */ F),
/* harmony export */   cZ: () => (/* binding */ K),
/* harmony export */   cn: () => (/* binding */ q),
/* harmony export */   eo: () => (/* binding */ J),
/* harmony export */   kx: () => (/* binding */ D),
/* harmony export */   os: () => (/* binding */ t),
/* harmony export */   qM: () => (/* binding */ k),
/* harmony export */   rp: () => (/* binding */ c),
/* harmony export */   ti: () => (/* binding */ H),
/* harmony export */   v9: () => (/* binding */ L)
/* harmony export */ });
/* unused harmony exports attrVvColor, attrVvOpacity, attrVvRotation, attrVvSize, bitsetGenericLockColor, bitsetMarkerAlignmentMap, bitsetMarkerOutlineAllowColorOverride, bitsetMarkerScaleSymbolsProportionally, cRadToDeg, extrudeScalePlacementPadding, fillPositionPrecision, maxFilterCount, offsetPrecision, outlineScale, placementPadding, positionPrecision */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var i;!function(i){i[i.Geographic=0]="Geographic",i[i.Arithmatic=1]="Arithmatic"}(i||(i={}));const t=3.14159265359/180,c=3.14159265359/128,r=(/* unused pure expression or super */ null && (180/3.141592654)),a=(/* unused pure expression or super */ null && (1/8)),e=1,o=1,h=1.1,n=1,p=(/* unused pure expression or super */ null && (1/4)),g=(/* unused pure expression or super */ null && (1/8)),m=.2,A=24,G=8,f=8,s=1e-5,u=.05,v=2,x=0,b=1,d=2,j=3,k=1e-30,l=1,q=4,w=0,y=2,z=3,B=0,C=2,D=2,E=3,F=0,H=3,I=16777216,J=1.1,K=16,L=128,M=1;


/***/ }),

/***/ 43212:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K5: () => (/* binding */ h),
/* harmony export */   Kt: () => (/* binding */ A),
/* harmony export */   M8: () => (/* binding */ w),
/* harmony export */   Rj: () => (/* binding */ B),
/* harmony export */   _9: () => (/* binding */ b),
/* harmony export */   i6: () => (/* binding */ k),
/* harmony export */   mh: () => (/* binding */ v),
/* harmony export */   nb: () => (/* binding */ z),
/* harmony export */   p8: () => (/* binding */ E),
/* harmony export */   tL: () => (/* binding */ j),
/* harmony export */   xf: () => (/* binding */ C),
/* harmony export */   yS: () => (/* binding */ q),
/* harmony export */   zb: () => (/* binding */ D),
/* harmony export */   zy: () => (/* binding */ H)
/* harmony export */ });
/* unused harmony exports clipToUv, norm, oneOver, scalarMinus */
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39689);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32520);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(t){const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(12.9898),r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(78.233),i=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(43758.5453),o=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .dot */ .Om)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec2 */ .Zc)(n,r)),e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .mod */ .zi)(o,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(3.14));return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .fract */ .jc)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .sin */ .F8)(e).multiply(i))}function w(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .equal */ .LC)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(_constants_js__WEBPACK_IMPORTED_MODULE_2__/* .nanMagicNumber */ .qM))}function x(t){return y(t,u(255))}function j(t,n){return t.x.multiply(n.y).subtract(n.x.multiply(t.y))}function z(t){return t.multiply(2).subtract(1)}function g(t){return t.multiply(.5).add(.5)}function v(t,n){const r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(2**n);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .mod */ .zi)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .floor */ .RI)(t.divide(r)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(2))}function h(t,n){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .greaterThan */ .MM)(v(t,n),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(.5))}function k(n,r){return v(n,r+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .maxHighlightReasons */ .U5)}function q(t,n){return v(t,n)}function A(t){const n=v(t.z,7),r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(1).subtract(n),i=t.xyz.subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec3 */ .eR)(0,0,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(128)));return r.multiply(t).add(n.multiply(i))}function B(t){const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec4 */ .ln)(255/256,255/65536,255/16777216,255/4294967296);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .dot */ .Om)(t,n)}function C(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)(t.x,t.y),t.z),t.w)}function D(t){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(1).subtract(t)}function E(t){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(1))}function F(t){return new n(1).divide(t)}function G(t,r){return new n(t).subtract(r)}function H(t,r){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(r))}


/***/ }),

/***/ 35867:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  G8: () => (/* binding */ A),
  GJ: () => (/* binding */ P)
});

// UNUSED EXPORTS: TextVertexSpec

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/placements/CIMMarkerPlacementHelper.js
var CIMMarkerPlacementHelper = __webpack_require__(73048);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/shapingUtils.js
var shapingUtils = __webpack_require__(42695);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/meshWriterUtils.js
var meshWriterUtils = __webpack_require__(59515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/loadGeometryEngine.js
var loadGeometryEngine = __webpack_require__(80972);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriter.js + 2 modules
var MeshWriter = __webpack_require__(71858);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js
var constants = __webpack_require__(32520);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextParams.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=96;class i{constructor(i){const{offsetX:o,offsetY:e,postAngle:f,fontSize:h,haloSize:n,outlineSize:l,scaleFactor:z,transforms:a}=i;if(this.offsetX=o,this.offsetY=e,this.postAngle=f,this.fontSize=Math.min(h,s),this.haloSize=n??0,this.outlineSize=l??0,this.transforms=a,a&&a.infos.length>1){const i=(0,utils/* applyParentTransform */.zb)(h,f,!1,o,e,a,!1);this.fontSize=Math.min(i.size,s);const n=i.size/h;this.haloSize*=n,this.outlineSize*=n,this.postAngle=i.rotation,this.offsetX=i.offsetX,this.offsetY=i.offsetY}z&&(this.fontSize*=z,this.offsetX*=z,this.offsetY*=z)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextMeshWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const P=28,b=[4,4],T=[16,4],k={topLeft:T,topRight:T,bottomLeft:T,bottomRight:T},z=[4,2],B=[4,6],R={topLeft:z,topRight:z,bottomLeft:B,bottomRight:B},M={topLeft:z,topRight:B,bottomLeft:z,bottomRight:B},L={topLeft:B,topRight:B,bottomLeft:b,bottomRight:b},w={topLeft:b,topRight:b,bottomLeft:B,bottomRight:B},I={topLeft:B,topRight:b,bottomLeft:B,bottomRight:b},E={topLeft:b,topRight:B,bottomLeft:b,bottomRight:B},G={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:enums/* DataType */.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:definitions/* minMaxZoomPrecisionFactor */.fq,packTessellation:({minZoom:t,maxZoom:e})=>[t||0,e||P]},clipAngle:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:1,packTessellation:({clipAngle:t})=>N(t||0)},referenceSymbol:{type:enums/* DataType */.pe.BYTE,count:4,packPrecisionFactor:1,packTessellation:(t,o)=>{const r=t.isLineLabel||!t.referenceBounds,n=(0,alignmentUtils/* getXDirection */.iT)(r?"center":o.horizontalAlignment),a=(0,alignmentUtils/* getYDirection */.Dy)(r?"middle":o.verticalAlignment),{offsetX:c,offsetY:l,size:h}=r?{offsetX:0,offsetY:0,size:0}:t.referenceBounds;return[(0,screenUtils/* pt2px */.Lz)(c),-(0,screenUtils/* pt2px */.Lz)(l),Math.round((0,screenUtils/* pt2px */.Lz)(h)),n+1<<2|a+1]}},visibility:{type:enums/* DataType */.pe.FLOAT,count:1,otherSource:!0}},attributes:{pos:{type:enums/* DataType */.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:1,packTessellation:({isBackground:t,mapAligned:e})=>(0,meshWriterUtils/* packBitset */.xo)([[constants/* bitsetTextIsBackground */.bg,t],[constants/* bitsetTextIsMapAligned */.ti,!!e]])},offset:{type:enums/* DataType */.pe.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:({offsets:t})=>{const{bottomLeft:e,bottomRight:o,topLeft:r,topRight:i}=t;return[r,i,e,o]}}},textureUV:{type:enums/* DataType */.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:({texcoords:t})=>{const{bottomLeft:e,bottomRight:o,topLeft:r,topRight:i}=t;return[r,i,e,o]}}},color:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:({color:t})=>t},fontAndReferenceSize:{type:enums/* DataType */.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({fontSize:t},{referenceSize:o})=>[Math.round((0,screenUtils/* pt2px */.Lz)(t)),Math.round((0,screenUtils/* pt2px */.Lz)(o??t))]},outlineColor:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({outlineColor:t})=>(0,meshWriterUtils/* processColorInput */.Jb)(t)},haloColor:{type:enums/* DataType */.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:({haloColor:t})=>(0,meshWriterUtils/* processColorInput */.Jb)(t)},outlineAndHaloSize:{type:enums/* DataType */.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:({outlineSize:t,haloSize:o})=>[Math.round((0,screenUtils/* pt2px */.Lz)(t)),Math.round((0,screenUtils/* pt2px */.Lz)(o))]}}};class A extends MeshWriter/* MeshWriter */.r{constructor(){super(...arguments),this.vertexSpec=G,this._textMeshParamsPropsInitialized=!1}ensurePacked(t,e,o){super.ensurePacked(t,e,o),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new i(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(t,e,o){const r=this._getShaping();if(!r)return;const i=e.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(t,e,r,o);if(o?.nextPath())return o.nextPoint(),this._writeGlyphs(t,i,o.x,o.y,r,0);if("esriGeometryPolygon"===e.geometryType){const o=e.readCentroidForDisplay();if(!o)return;const[s,n]=o.coords;return this._writeGlyphs(t,i,s,n,r,0)}if("esriGeometryMultipoint"===e.geometryType){const o=e.readGeometryForDisplay();return void o?.forEachVertex(((e,o)=>this._writeGlyphs(t,i,e,o,r,0)))}const s=e.readXForDisplay(),n=e.readYForDisplay();return this._writeGlyphs(t,i,s,n,r,0)}_writePlacedTextMarkers(t,i,s,n){const a=n??GeometryCursor/* GeometryCursor */.z.fromFeatureSetReaderCIM(i);if(!a)return;const c=-1,l=CIMMarkerPlacementHelper/* CIMMarkerPlacementHelper */.l.getPlacement(a,c,this.evaluatedMeshParams.placement,(0,screenUtils/* pt2px */.Lz)(1),t.id,(0,loadGeometryEngine/* getGeometryEngine */.z)());if(!l)return;const h=i.getDisplayId();let f=l.next();for(;null!=f;){const e=f.tx,o=-f.ty,r=-f.getAngle();this._writeGlyphs(t,h,e,o,s,r),f=l.next()}}_getShaping(o){const r=this._textMeshTransformProps,i=this.evaluatedMeshParams;if(!i.glyphs?.glyphs.length)return null;const s=(0,screenUtils/* pt2px */.Lz)(r.fontSize),n=(0,screenUtils/* pt2px */.Lz)(r.offsetX),p=(0,screenUtils/* pt2px */.Lz)(r.offsetY),m=(0,mathUtils/* clamp */.qE)((0,screenUtils/* pt2px */.Lz)(i.lineWidth),definitions/* minTextLineWidth */.GR,definitions/* maxTextLineWidth */.cp),d=definitions/* magicLabelLineHeight */.DY*(0,mathUtils/* clamp */.qE)(i.lineHeightRatio,.25,4);return (0,shapingUtils/* shapeGlyphs */.Tl)(i.glyphs,{scale:s/definitions/* glyphSize */.eG,angle:r.postAngle,xOffset:n,yOffset:p,horizontalAlignment:i.horizontalAlignment,verticalAlignment:o||i.verticalAlignment,maxLineWidth:m,lineHeight:d,decoration:i.decoration,borderLineSizePx:(0,screenUtils/* pt2px */.Lz)(i.boxBorderLineSize),hasBackground:!!i.boxBackgroundColor,useCIMAngleBehavior:i.useCIMAngleBehavior})}_writeGlyphs(t,o,r,i,s,n,a,c,l=!0){const h=this.evaluatedMeshParams,f=this._textMeshTransformProps,m=(0,screenUtils/* pt2px */.Lz)(f.fontSize),u=f.haloSize,g=f.outlineSize,x=(0,screenUtils/* pt2px */.Lz)(f.offsetX),y=(0,screenUtils/* pt2px */.Lz)(f.offsetY),[S,_]=(0,meshWriterUtils/* getMinMaxZoom */.My)(h.scaleInfo,this.getTileInfo());0!==n&&s.setRotation(n);const P=s.bounds,b=r+P.x+x,T=i+P.y-y,k=2*(h.minPixelBuffer?h.minPixelBuffer/m:1),z=Math.max(P.width,P.height)*k;s.textBox&&(t.recordStart(this.instanceId,this.attributeLayout,s.glyphs[0].textureBinding),l&&t.recordBounds(b,T,z,z),this._writeTextBox(t,o,r,i,s.textBox,a,c),t.recordEnd());for(const e of s.glyphs){t.recordStart(this.instanceId,this.attributeLayout,e.textureBinding),l&&t.recordBounds(b,T,z,z);const{texcoords:s,offsets:n}=e;this._writeQuad(t,o,r,i,{texcoords:s,offsets:n,fontSize:m,haloSize:u,outlineSize:g,color:(0,meshWriterUtils/* processColorInput */.Jb)(h.color),isBackground:!1,referenceBounds:a,minZoom:S,maxZoom:_,...c}),t.recordEnd()}0!==n&&s.setRotation(-n)}_writeTextBox(t,e,o,r,i,s,n){const a=this.evaluatedMeshParams,{fontSize:c,haloSize:l,outlineSize:h}=this._textMeshTransformProps,{boxBackgroundColor:f,boxBorderLineColor:m}=a,d={isBackground:!0,fontSize:c,haloSize:l,outlineSize:h,referenceBounds:s,...n};f&&(this._writeQuad(t,e,o,r,{texcoords:k,offsets:i.main,color:(0,meshWriterUtils/* processColorInput */.Jb)(f),...d}),m||(this._writeQuad(t,e,o,r,{texcoords:L,offsets:i.top,color:(0,meshWriterUtils/* processColorInput */.Jb)(f),...d}),this._writeQuad(t,e,o,r,{texcoords:w,offsets:i.bot,color:(0,meshWriterUtils/* processColorInput */.Jb)(f),...d}),this._writeQuad(t,e,o,r,{texcoords:I,offsets:i.left,color:(0,meshWriterUtils/* processColorInput */.Jb)(f),...d}),this._writeQuad(t,e,o,r,{texcoords:E,offsets:i.right,color:(0,meshWriterUtils/* processColorInput */.Jb)(f),...d}))),m&&(this._writeQuad(t,e,o,r,{texcoords:R,offsets:i.top,color:(0,meshWriterUtils/* processColorInput */.Jb)(m),...d}),this._writeQuad(t,e,o,r,{texcoords:R,offsets:i.bot,color:(0,meshWriterUtils/* processColorInput */.Jb)(m),...d}),this._writeQuad(t,e,o,r,{texcoords:M,offsets:i.left,color:(0,meshWriterUtils/* processColorInput */.Jb)(m),...d}),this._writeQuad(t,e,o,r,{texcoords:M,offsets:i.right,color:(0,meshWriterUtils/* processColorInput */.Jb)(m),...d}))}_writeQuad(t,e,o,r,i){const s=t.vertexCount();this._writeVertex(t,e,o,r,i),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}const N=t=>Math.round(t*(254/360));


/***/ }),

/***/ 51487:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ a)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/object.js
var object = __webpack_require__(76724);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Program.js + 3 modules
var Program = __webpack_require__(68449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FBOAttachmentType.js
var FBOAttachmentType = __webpack_require__(35644);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/textureUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function textureUtils_t(t,r,a){const i=new TextureDescriptor/* TextureDescriptor */.R(r.width,r.height);return i.dataType=r.dataType,r.depth&&(i.depth=r.depth),r.flipped&&(i.flipped=r.flipped),r.hasMipmap&&(i.hasMipmap=r.hasMipmap),i.internalFormat=r.internalFormat,r.isImmutable&&(i.isImmutable=r.isImmutable),r.isOpaque&&(i.isOpaque=r.isOpaque),r.maxAnisotropy&&(i.maxAnisotropy=r.maxAnisotropy),i.pixelFormat=r.pixelFormat,r.preMultiplyAlpha&&(i.preMultiplyAlpha=r.preMultiplyAlpha),r.samplingMode&&(i.samplingMode=r.samplingMode),r.target&&(i.target=r.target),i.uniform=r.uniform,r.unpackAlignment&&(i.unpackAlignment=r.unpackAlignment),r.wrapMode&&(i.wrapMode=r.wrapMode),new Texture/* Texture */.g(t,i,a)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram");function n(e,t,o){const i=t.length;if(i!==o){const n=new core_Error/* default */.A("Invalid Uniform",`Invalid length, expected ${o} but got ${i}`,{uniformName:e,values:t});s().errorOnce(n)}}class a{constructor(r,e,t,o,i,s){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=r,this.fragmentShader=e,this._locations=t,this._locationInfo=o,this._uniformBindings=i,this._transformFeedbackBindings=s}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(r){this._uniforms=r}cleanupTemporaryTextures(){for(const r of this._temporaryTextures)r.dispose();this._temporaryTextures=[]}bind(r){const e=this._uniforms;if(!this._program){const e=new Map;for(const[r,o]of this._locations)e.set(r,o);const t=[];for(const r of this._transformFeedbackBindings??[]){const{index:e,propertyKey:o}=r;t[e]=`v_${o}`}this._program=new Program/* Program */.B(r,this.vertexShader,this.fragmentShader,e,new Map,t)}const s=this._program;r.useProgram(s);for(const o of this._uniformBindings){const{shaderModulePath:a,uniformName:f,uniformType:m,uniformArrayLength:c}=o,u=(0,object/* getDeepValue */.wc)(a,e);if(null==u){if("sampler2D"===m)continue;throw new Error(`Failed to find uniform value for ${a}`)}switch("array"===m||"array-2d"===m?o.uniformArrayElementType:m){case"sampler2D":{const{unit:e,texture:t}=u;if(s.setUniform1i(f,e),"type"in t)r.bindTexture(t,e);else{const o=textureUtils_t(r,t.descriptor,t.data);r.bindTexture(o,e)}break}case"int":if(!c){s.setUniform1i(f,u);break}n(o.uniformName,u,c),s.setUniform1iv(f,u);break;case"float":if(!c){s.setUniform1f(f,u);break}n(o.uniformName,u,c),s.setUniform1fv(f,u);break;case"vec2":if(!c){s.setUniform2f(f,u[0],u[1]);break}n(o.uniformName,u,c),s.setUniform2fv(f,u.flat());break;case"vec3":if(!c){s.setUniform3f(f,u[0],u[1],u[2]);break}n(o.uniformName,u,c),s.setUniform3fv(f,u.flat());break;case"vec4":if(!c){s.setUniform4f(f,u[0],u[1],u[2],u[3]);break}n(o.uniformName,u,c),s.setUniform4fv(f,u.flat());break;case"mat3":s.setUniformMatrix3fv(f,u);break;case"mat4":s.setUniformMatrix4fv(f,u);break;default:throw new Error(`Unable to set uniform for type ${m}`)}}}}


/***/ }),

/***/ 65019:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export getLocations */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(o){return o.locationsMap}const t={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1};


/***/ }),

/***/ 97394:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 79286:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("bitBlit/bitBlit.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])};


/***/ }),

/***/ 23934:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ r),
/* harmony export */   Z: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("highlight/textured.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])},r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("highlight/textured.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])};


/***/ }),

/***/ 98035:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/* harmony import */ var _webgl_programUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9747);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t=e=>{let r="";r+=e[0].toUpperCase();for(let t=1;t<e.length;t++){const s=e[t];s===s.toUpperCase()?(r+="_",r+=s):r+=s.toUpperCase()}return r},s=e=>{const s={};for(const r in e){s[t(r)]=e[r]}return (0,_webgl_programUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .glslifyDefineMap */ .I)(s)},o=(r,t,o,a)=>{const n=r+r.slice(Math.max(0,r.lastIndexOf("/"))),l=t+t.slice(Math.max(0,t.lastIndexOf("/"))),p=s(a);return{attributes:o,shaders:{vertexShader:p+(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)(`${n}.vert`),fragmentShader:p+(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)(`${l}.frag`)}}};


/***/ }),

/***/ 79194:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("stencil/stencil.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("stencil/stencil.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 13294:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 75472:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Q: () => (/* binding */ n)
});

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/shaderRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\ngl_FragColor = u_color;\n}","background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\nvec3 v_pos = u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nlowp vec4 color = texture2D(u_tex, v_uv);\ngl_FragColor = color * u_opacity;\n}","bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_pos , 0.0, 1.0);\nv_uv = a_tex;\n}"},debug:{overlay:{"overlay.frag":"precision mediump float;\nvarying vec4 v_color;\nvoid main(void) {\ngl_FragColor = v_color;\n}","overlay.vert":"attribute vec3 a_PositionAndFlags;\nuniform mat3 u_dvsMat3;\nuniform vec4 u_colors[4];\nuniform float u_opacities[4];\nvarying vec4 v_color;\nvoid main(void) {\nvec2 position = a_PositionAndFlags.xy;\nfloat flags = a_PositionAndFlags.z;\nint colorIndex = int(mod(flags, 4.0));\nvec4 color;\nfor (int i = 0; i < 4; i++) {\ncolor = u_colors[i];\nif (i == colorIndex) {\nbreak;\n}\n}\nint opacityIndex = int(mod(floor(flags / 4.0), 4.0));\nfloat opacity;\nfor (int i = 0; i < 4; i++) {\nopacity = u_opacities[i];\nif (i == opacityIndex) {\nbreak;\n}\n}\nv_color = color * opacity;\ngl_Position = vec4((u_dvsMat3 * vec3(position, 1.0)).xy, 0.0, 1.0);\n}"}},dot:{dot:{"dot.frag":"precision mediump float;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nuniform highp float u_tileZoomFactor;\nvoid main()\n{\nfloat dist = length(gl_PointCoord - vec2(.5, .5)) * 2.;\nfloat alpha = smoothstep(0., 1., v_invEdgeRatio * (dist - v_dotRatio) + 1.);\ngl_FragColor = v_color * alpha;\n}","dot.vert":"precision highp float;\nattribute vec2 a_pos;\nuniform sampler2D u_texture;\nuniform highp mat3 u_dvsMat3;\nuniform highp float u_tileZoomFactor;\nuniform highp float u_dotSize;\nuniform highp float u_pixelRatio;\nvarying vec2 v_pos;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nconst float EPSILON = 0.000001;\nvoid main()\n{\nmat3 tileToTileTexture = mat3(  1., 0., 0.,\n0., -1., 0.,\n0., 1., 1.  );\nvec3 texCoords = tileToTileTexture * vec3(a_pos.xy / 512., 1.);\nv_color = texture2D(u_texture, texCoords.xy);\nfloat smoothEdgeWidth = max(u_dotSize / 2., 1.) ;\nfloat z = 0.;\nz += 2.0 * step(v_color.a, EPSILON);\ngl_PointSize = (smoothEdgeWidth + u_dotSize);\ngl_Position = vec4((u_dvsMat3 * vec3(a_pos + .5, 1.)).xy, z, 1.);\nv_dotRatio = u_dotSize / gl_PointSize;\nv_invEdgeRatio = -1. / ( smoothEdgeWidth / gl_PointSize );\ngl_PointSize  *= (u_pixelRatio * u_tileZoomFactor);\n}"}},filtering:{"bicubic.glsl":"vec4 computeWeights(float v) {\nfloat b = 1.0 / 6.0;\nfloat v2 = v * v;\nfloat v3 = v2 * v;\nfloat w0 = b * (-v3 + 3.0 * v2 - 3.0 * v + 1.0);\nfloat w1 = b * (3.0 * v3  - 6.0 * v2 + 4.0);\nfloat w2 = b * (-3.0 * v3 + 3.0 * v2 + 3.0 * v + 1.0);\nfloat w3 = b * v3;\nreturn vec4(w0, w1, w2, w3);\n}\nvec4 bicubicOffsetsAndWeights(float v) {\nvec4 w = computeWeights(v);\nfloat g0 = w.x + w.y;\nfloat g1 = w.z + w.w;\nfloat h0 = 1.0 - (w.y / g0) + v;\nfloat h1 = 1.0 + (w.w / g1) - v;\nreturn vec4(h0, h1, g0, g1);\n}\nvec4 sampleBicubicBSpline(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 eX = vec2(1.0 / texSize.x, 0.0);\nvec2 eY = vec2(0.0, 1.0 / texSize.y);\nvec2 texel = coords * texSize - 0.5;\nvec3 hgX = bicubicOffsetsAndWeights(fract(texel).x).xyz;\nvec3 hgY = bicubicOffsetsAndWeights(fract(texel).y).xyz;\nvec2 coords10 = coords + hgX.x * eX;\nvec2 coords00 = coords - hgX.y * eX;\nvec2 coords11 = coords10 + hgY.x * eY;\nvec2 coords01 = coords00 + hgY.x * eY;\ncoords10 = coords10 - hgY.y * eY;\ncoords00 = coords00 - hgY.y * eY;\nvec4 color00 = texture2D(sampler, coords00);\nvec4 color10 = texture2D(sampler, coords10);\nvec4 color01 = texture2D(sampler, coords01);\nvec4 color11 = texture2D(sampler, coords11);\ncolor00 = mix(color00, color01, hgY.z);\ncolor10 = mix(color10, color11, hgY.z);\ncolor00 = mix(color00, color10, hgX.z);\nreturn color00;\n}","bilinear.glsl":"vec4 sampleBilinear(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 texelStart = floor(coords * texSize);\nvec2 coord0 = texelStart / texSize;\nvec2 coord1 = (texelStart +  vec2(1.0, 0.0)) / texSize;\nvec2 coord2 = (texelStart +  vec2(0.0, 1.0)) / texSize;\nvec2 coord3 = (texelStart +  vec2(1.0, 1.0)) / texSize;\nvec4 color0 = texture2D(sampler, coord0);\nvec4 color1 = texture2D(sampler, coord1);\nvec4 color2 = texture2D(sampler, coord2);\nvec4 color3 = texture2D(sampler, coord3);\nvec2 blend = fract(coords * texSize);\nvec4 color01 = mix(color0, color1, blend.x);\nvec4 color23 = mix(color2, color3, blend.x);\nvec4 color = mix(color01, color23, blend.y);\n#ifdef NNEDGE\nfloat alpha = floor(color0.a * color1.a * color2.a * color3.a + 0.5);\ncolor = color * alpha + (1.0 - alpha) * texture2D(sampler, coords);\n#endif\nreturn color;\n}","epx.glsl":"vec4 sampleEPX(sampler2D sampler, float size, vec2 coords, vec2 texSize) {\nvec2 invSize = 1.0 / texSize;\nvec2 texel = coords * texSize;\nvec2 texel_i = floor(texel);\nvec2 texel_frac = fract(texel);\nvec4 colorP = texture2D(sampler, texel_i * invSize);\nvec4 colorP1 = vec4(colorP);\nvec4 colorP2 = vec4(colorP);\nvec4 colorP3 = vec4(colorP);\nvec4 colorP4 = vec4(colorP);\nvec4 colorA = texture2D(sampler, (texel_i - vec2(0.0, 1.0)) * invSize);\nvec4 colorB = texture2D(sampler, (texel_i + vec2(1.0, 0.0)) * invSize);\nvec4 colorC = texture2D(sampler, (texel_i - vec2(1.0, 0.0)) * invSize);\nvec4 colorD = texture2D(sampler, (texel_i + vec2(0.0, 1.0)) * invSize);\nif (colorC == colorA && colorC != colorD && colorA != colorB) {\ncolorP1 = colorA;\n}\nif (colorA == colorB && colorA != colorC && colorB != colorD) {\ncolorP2 = colorB;\n}\nif (colorD == colorC && colorD != colorB && colorC != colorA) {\ncolorP3 = colorC;\n}\nif (colorB == colorD && colorB != colorA && colorD != colorC) {\ncolorP4 = colorD;\n}\nvec4 colorP12 = mix(colorP1, colorP2, texel_frac.x);\nvec4 colorP34 = mix(colorP1, colorP2, texel_frac.x);\nreturn mix(colorP12, colorP34, texel_frac.y);\n}"},heatmap:{heatmapResolve:{"heatmapResolve.frag":"precision highp float;\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 4.0\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform sampler2D u_texture;\nuniform sampler2D u_gradient;\nuniform vec2 u_densityMinAndInvRange;\nuniform float u_densityNormalization;\nvarying vec2 v_uv;\nvoid main() {\nvec4 data = texture2D(u_texture, v_uv);\nfloat density = data.r * COMPRESSION_FACTOR;\ndensity *= u_densityNormalization;\ndensity = (density - u_densityMinAndInvRange.x) * u_densityMinAndInvRange.y;\nvec4 color = texture2D(u_gradient, vec2(density, 0.5));\ngl_FragColor = vec4(color.rgb * color.a, color.a);\n}","heatmapResolve.vert":"precision highp float;\nattribute vec2 a_pos;\nvarying vec2 v_uv;\nvoid main() {\nv_uv = a_pos;\ngl_Position = vec4(a_pos * 2.0 - 1.0, 1., 1.);\n}"}},highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump float u_sigma;\nuniform sampler2D u_texture;\nmediump float gauss1(mediump vec2 dir) {\nreturn exp(-dot(dir, dir) / (2.0 * u_sigma * u_sigma));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\nreturn u_channelSelector * sample;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\nmediump float w = gauss1(i * u_direction.xy);\ntot += selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\nweight += w;\n}\nvoid main(void) {\nmediump float tot = 0.0;\nmediump float weight = 0.0;\naccumGauss1(-5.0, tot, weight);\naccumGauss1(-4.0, tot, weight);\naccumGauss1(-3.0, tot, weight);\naccumGauss1(-2.0, tot, weight);\naccumGauss1(-1.0, tot, weight);\naccumGauss1(0.0, tot, weight);\naccumGauss1(1.0, tot, weight);\naccumGauss1(2.0, tot, weight);\naccumGauss1(3.0, tot, weight);\naccumGauss1(4.0, tot, weight);\naccumGauss1(5.0, tot, weight);\ngl_FragColor = vec4(0.0, 0.0, 0.0, tot / weight);\n}","highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump float u_sigma;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\nmediump float y = texture2D(u_texture, v_texcoord)[3];\nconst mediump float y0 = 0.5;\nmediump float m0 = 1.0 / (sqrt(2.0 * 3.1415) * u_sigma);\nmediump float d = (y - y0) / m0;\nreturn d;\n}\nmediump vec4 shade(mediump float d) {\nmediump float mappedDistance = (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\nmappedDistance = clamp(mappedDistance, 0.0, 1.0);\nreturn texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\nmediump float d = estimateDistance();\ngl_FragColor = shade(d);\n}","textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D filterFlags;\nuniform highp sampler2D animation;\nuniform highp sampler2D gpgpu;\nuniform highp sampler2D visualVariableData;\nuniform highp sampler2D dataDriven0;\nuniform highp sampler2D dataDriven1;\nuniform highp sampler2D dataDriven2;\nuniform float size;\nhighp vec2 getAttributeDataCoords(in highp vec3 id) {\nhighp vec3  texel = unpackDisplayIdTexel(id);\nhighp float u32 = float(int(texel.r) + int(texel.g) * 256 + int(texel.b) * 256 * 256);\nhighp float col = mod(u32, size);\nhighp float row = (u32 - col) / size;\nhighp float u = col / size;\nhighp float v = row / size;\nreturn vec2(u, v);\n}\nhighp vec2 getAttributeDataTextureCoords(in highp vec3 id) {\nreturn (getAttributeDataCoords(id) * 2.0) - 1.0 + (.5 / vec2(size));\n}\nhighp vec4 getFilterData(in highp vec3 id) {\nvec2 coords = getAttributeDataCoords(id);\nreturn texture2D(filterFlags, coords);\n}\nhighp vec4 getAnimation(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(animation, coords);\n}\nhighp vec4 getVisualVariableData(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(visualVariableData, coords);\n}\nhighp vec4 getDataDriven0(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven0, coords);\n}\nhighp vec4 getDataDriven1(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven1, coords);\n}\nhighp vec4 getGPGPU(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(gpgpu, coords);\n}\nhighp vec4 getDataDriven2(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven2, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\nbool isMagic = v.x == 255.0 && v.y == 255.0;\nif (isMagic) {\nreturn NAN_MAGIC_NUMBER;\n}\nreturn (v.x + v.y * float(0x100)) - 32768.0;\n}","barycentric.glsl":"float inTriangle(vec3 bary) {\nvec3 absBary = abs(bary);\nreturn step((absBary.x + absBary.y + absBary.z), 1.05);\n}\nvec3 xyToBarycentric(in vec2 pos, in vec2 v0,  in vec2 v1, in vec2 v2) {\nmat3 xyToBarycentricMat3 = mat3(\nv1.x * v2.y - v2.x * v1.y, v2.x * v0.y - v0.x * v2.y, v0.x * v1.y - v1.x * v0.y,\nv1.y - v2.y, v2.y - v0.y, v0.y - v1.y,\nv2.x - v1.x, v0.x - v2.x, v1.x - v0.x\n);\nfloat A2 = v0.x * (v1.y - v2.y) + v1.x * (v2.y - v0.y) + v2.x * (v0.y - v1.y);\nreturn (1. / A2) * xyToBarycentricMat3 * vec3(1., pos);\n}","constants.glsl":"const float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_RAD_TO_DEG = 180.0 / 3.141592654;\nconst float POSITION_PRECISION = 1.0 / 8.0;\nconst float FILL_POSITION_PRECISION = 1.0 / 1.0;\nconst float SOFT_EDGE_RATIO = 1.0;\nconst float THIN_LINE_WIDTH_FACTOR = 1.1;\nconst float THIN_LINE_HALF_WIDTH = 1.0;\nconst float EXTRUDE_SCALE_PLACEMENT_PADDING = 1.0 / 4.0;\nconst float OFFSET_PRECISION = 1.0 / 8.0;\nconst float OUTLINE_SCALE = 1.0 / 5.0;\nconst float SDF_FONT_SIZE = 24.0;\nconst float MAX_SDF_DISTANCE = 8.0;\nconst float PLACEMENT_PADDING = 8.0;\nconst float EPSILON = 0.00001;\nconst float EPSILON_HITTEST = 0.05;\nconst int MAX_FILTER_COUNT = 2;\nconst int ATTR_VV_SIZE = 0;\nconst int ATTR_VV_COLOR = 1;\nconst int ATTR_VV_OPACITY = 2;\nconst int ATTR_VV_ROTATION = 3;\nconst highp float NAN_MAGIC_NUMBER = 1e-30;\nconst int BITSET_GENERIC_LOCK_COLOR = 1;\nconst int BITSET_GENERIC_CONSIDER_ALPHA_ONLY = 4;\nconst int BITSET_MARKER_ALIGNMENT_MAP = 0;\nconst int BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE = 2;\nconst int BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY = 3;\nconst int BITSET_TYPE_FILL_OUTLINE = 0;\nconst int BITSET_FILL_RANDOM_PATTERN_OFFSET = 2;\nconst int BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR = 3;\nconst int BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR = 5;\nconst int BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR = 6;\nconst int BITSET_LINE_SCALE_DASH = 2;",fill:{"common.glsl":"#include <materials/symbologyTypeUtils.glsl>\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform lowp vec4 u_isActive[ 2 ];\nuniform highp float u_dotValue;\nuniform highp float u_tileDotsOverArea;\nuniform highp float u_dotTextureDotCount;\nuniform mediump float u_tileZoomFactor;\n#endif\nvarying highp vec3 v_id;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying mediump vec4 v_aux1;\n#ifdef PATTERN\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvarying lowp float v_isOutline;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvarying highp vec2 v_dotTextureCoords;\nvarying highp vec4 v_dotThresholds[ 2 ];\n#endif","fill.frag":"precision highp float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/fill/common.glsl>\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\nlowp vec4 drawLine() {\nfloat v_lineWidth = v_aux1.x;\nvec2  v_normal    = v_aux1.yz;\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineWidth,\nv_opacity,\nv_id\n);\nreturn shadeLine(inputs);\n}\n#endif\nlowp vec4 drawFill() {\nlowp vec4 out_color = vec4(0.);\n#ifdef HITTEST\nout_color = v_color;\n#elif defined(PATTERN)\nmediump vec4 v_tlbr = v_aux1;\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\nout_color = v_opacity * v_color * color;\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY && !defined(HIGHLIGHT)\nvec4 textureThresholds0 = texture2D(u_dotTextures[0], v_dotTextureCoords);\nvec4 textureThresholds1 = texture2D(u_dotTextures[1], v_dotTextureCoords);\nvec4 difference0 = v_dotThresholds[0] - textureThresholds0;\nvec4 difference1 = v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\nvec4 isPositive0 = step(0.0, difference0);\nvec4 isPositive1 = step(0.0, difference1);\nfloat weightSum = dot(isPositive0, difference0) + dot(isPositive1, difference1);\nfloat lessThanEqZero = step(weightSum, 0.0);\nfloat greaterThanZero = 1.0 - lessThanEqZero ;\nfloat divisor = (weightSum + lessThanEqZero);\nvec4 weights0 = difference0 * isPositive0 / divisor;\nvec4 weights1 = difference1 * isPositive1 / divisor;\nvec4 dotColor = u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\nvec4 preEffectColor = greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\nfloat diffMax = max(max4(difference0), max4(difference1));\nfloat lessThanZero = step(diffMax, 0.0);\nfloat greaterOrEqZero = 1.0 - lessThanZero;\nvec4 isMax0 = step(diffMax, difference0);\nvec4 isMax1 = step(diffMax, difference1);\nvec4 dotColor = u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\nvec4 preEffectColor = greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\nout_color = preEffectColor;\n#else\nout_color = v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\nout_color.a = 1.0;\n#endif\nreturn out_color;\n}\nvoid main() {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (v_isOutline > 0.5) {\ngl_FragColor = drawLine();\n} else {\ngl_FragColor = drawFill();\n}\n#else\ngl_FragColor = drawFill();\n#endif\n}","fill.vert":"#include <materials/symbologyTypeUtils.glsl>\n#define PACKED_LINE\nprecision highp float;\nattribute float a_bitset;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color = vec4(0.0, 0.0, 0.0, 1.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_aux2;\nattribute vec4 a_aux3;\n#ifndef SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\nattribute vec4 a_aux1;\nattribute vec2 a_zoomRange;\n#else\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#endif\n#endif\nuniform vec2 u_tileOffset;\nuniform vec2 u_maxIntNumOfCrossing;\n#include <util/encoding.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/fill/common.glsl>\n#include <materials/fill/hittest.glsl>\nconst float INV_SCALE_COMPRESSION_FACTOR = 1.0 / 128.0;\nconst float MAX_REPRESENTABLE_INT = 16777216.0;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\nreturn featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\nvoid drawLine(out lowp vec4 out_color, out highp vec3 out_pos) {\nLineData outputs = buildLine(\nout_pos,\na_id,\na_pos,\na_color,\n(a_aux3.xy - 128.) / 16.,\n(a_aux3.zw - 128.) / 16.,\n0.,\na_aux2.z / 16.,\na_bitset,\nvec4(0.),\nvec2(0.),\na_aux2.w / 16.\n);\nv_id      = outputs.id;\nv_opacity = outputs.opacity;\nv_aux1    = vec4(outputs.lineHalfWidth, outputs.normal, 0.);\nout_color = outputs.color;\n}\n#endif\nvoid drawFill(out lowp vec4 out_color, out highp vec3 out_pos) {\nfloat a_bitSet = a_bitset;\nout_color = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity = getOpacity();\nv_id      = norm(a_id);\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nmat3 tileToTileNormalized = mat3(  2. / 512.,  0.,  0.,\n0., -2. / 512.,  0.,\n-1.,  1.,  1.  );\nout_pos   = tileToTileNormalized * vec3((a_pos * FILL_POSITION_PRECISION), 1.);\n#else\nout_pos   = u_dvsMat3 * vec3(a_pos * FILL_POSITION_PRECISION, 1.);\n#endif\n#ifdef PATTERN\nvec4  a_tlbr   = a_aux1;\nfloat a_width  = a_aux2.x;\nfloat a_height = a_aux2.y;\nvec2  a_offset = a_aux2.zw;\nvec2  a_scale  = a_aux3.xy;\nfloat a_angle  = a_aux3.z;\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR) > 0.5) {\na_width *= INV_SCALE_COMPRESSION_FACTOR;\n}\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR) > 0.5) {\na_height *= INV_SCALE_COMPRESSION_FACTOR;\n}\nvec2 scale = INV_SCALE_COMPRESSION_FACTOR * a_scale;\nfloat width = u_zoomFactor * a_width * scale.x;\nfloat height = u_zoomFactor * a_height * scale.y;\nfloat angle = C_256_TO_RAD * a_angle;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nfloat dx = 0.0;\nfloat dy = 0.0;\nif (getBit(a_bitset, BITSET_FILL_RANDOM_PATTERN_OFFSET) > 0.5) {\nfloat id = rgba2float(vec4(a_id, 0.0));\ndx = rand(vec2(id, 0.0));\ndy = rand(vec2(0.0, id));\n}\nmat3 patternMatrix = mat3(cosA / width, sinA / height, 0,\n-sinA / width, cosA / height, 0,\ndx,            dy,           1);\nvec2 patternSize = vec2(a_width, a_height);\nvec2 numPatternsPerMaxInt = vec2(MAX_REPRESENTABLE_INT) / patternSize;\nvec2 maxIntCrossingOffsetCorrection = patternSize * fract(u_maxIntNumOfCrossing * numPatternsPerMaxInt);\nvec2 tileOffset = u_tileOffset + maxIntCrossingOffsetCorrection - 0.5 * patternSize;\ntileOffset = vec2(tileOffset.x * cosA - tileOffset.y * sinA, tileOffset.x * sinA + tileOffset.y * cosA);\ntileOffset = mod(tileOffset, patternSize);\nvec2 symbolOffset = u_zoomFactor * scale * vec2(a_offset - tileOffset) / vec2(width, height);\nv_tileTextureCoord = (patternMatrix * vec3(a_pos * FILL_POSITION_PRECISION, 1.0)).xy - symbolOffset;\nv_aux1 = a_tlbr / u_mosaicSize.xyxy;\nv_sampleAlphaOnly = getBit(a_bitset, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\nif (getBit(a_bitSet, BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR) > 0.5) {\n#ifdef VV_COLOR\nv_sampleAlphaOnly *= (1.0 - float(isNan(VV_ADATA[ATTR_VV_COLOR]))) * (1.0 - getBit(a_bitSet, BITSET_GENERIC_LOCK_COLOR));\n#else\nv_sampleAlphaOnly = 0.0;\n#endif\n}\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 ddAttributeData0 = getAttributeData2(a_id) * u_isActive[0] * a_inverseArea;\nvec4 ddAttributeData1 = getAttributeData3(a_id) * u_isActive[1] * a_inverseArea;\nfloat size = u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\nv_dotThresholds[0] = dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\nv_dotThresholds[1] = dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\nv_dotTextureCoords = (a_pos * FILL_POSITION_PRECISION + 0.5) / size;\n#endif\n}\n#ifdef HITTEST\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE) > 0.5) {\nout_pos = vec3(0., 0., 2.);\nreturn;\n}\n#endif\nhittestFill(out_color, out_pos);\ngl_PointSize = 1.0;\n}\n#elif defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\nv_isOutline = getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE);\nif (v_isOutline > 0.5) {\ndrawLine(out_color, out_pos);\n} else {\ndrawFill(out_color, out_pos);\n}\n}\n#else\n#define draw drawFill\n#endif\nvoid main()\n{\nINIT;\nhighp vec3 pos  = vec3(0.);\nhighp vec4 color  = vec4(0.);\ndraw(color, pos);\nv_color = color;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}","hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestFill(\nout lowp vec4 out_color,\nout highp vec3 out_pos\n) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * FILL_POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * FILL_POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * FILL_POSITION_PRECISION, 1.);\nfloat hittestDist = u_hittestDist;\nfloat dist = distPointTriangle(u_hittestPos, pos.xy, pos1.xy, pos2.xy);\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist < 0. || dist >= hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist == 0. ? (1. / 255.) : 0.);\n}\n#endif"},hittest:{"common.glsl":"#ifdef HITTEST\nuniform float hittestDist;\nuniform highp vec2 hittestPos;\nfloat projectScalar(vec2 a, vec2 b) {\nreturn dot(a, normalize(b));\n}\nfloat distPointSegment(vec2 p0, vec2 p1, vec2 p2) {\nvec2 L = p2 - p1;\nvec2 A = p0 - p1;\nfloat projAL = projectScalar(A, L);\nfloat t = clamp(projAL / length(L), 0., 1.);\nreturn distance(p0, p1 + t * (p2 - p1));\n}\nvoid hittestMarker(out lowp vec4 out_color, out highp vec3 out_pos, in highp vec3 pos, float size) {\nfloat dist = distance(pos, vec3(hittestPos, 1.));\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif ((dist - size) > hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, (dist - size) < 0. ? (1. / 255.) : 0.);\n}\nfloat intersectPointTriangleBary(vec2 p, vec2 a, vec2 b, vec2 c) {\nreturn inTriangle(xyToBarycentric(p, a, b, c));\n}\nfloat distPointTriangle(vec2 p, vec2 a, vec2 b, vec2 c) {\nvec2 ba = b - a;\nvec2 ca = c - a;\nfloat crossProduct = ba.x * ca.y - ca.x * ba.y;\nbool isParallel = crossProduct < EPSILON_HITTEST && crossProduct > -EPSILON_HITTEST;\nif (isParallel) {\nreturn -1.;\n}\nif (intersectPointTriangleBary(p.xy, a, b, c) == 1.) {\nreturn 0.;\n}\nfloat distAB = distPointSegment(p, a, b);\nfloat distBC = distPointSegment(p, b, c);\nfloat distCA = distPointSegment(p, c, a);\nreturn min(min(distAB, distBC), distCA);\n}\n#endif"},icon:{"common.glsl":"#include <util/encoding.glsl>\nuniform lowp vec2 u_mosaicSize;\nvarying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying highp vec4 v_sizeTex;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\nvarying mediump float v_overridingOutlineColor;\nvarying mediump float v_isThin;\n#endif\n#ifdef SDF\nvec4 getColor(vec2 v_size, vec2 v_tex) {\n#ifdef HITTEST\nlowp vec4 fillPixelColor = vec4(1.0);\n#else\nlowp vec4 fillPixelColor = v_color;\n#endif\nfloat d = 0.5 - rgba2float(texture2D(u_texture, v_tex));\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * size * SOFT_EDGE_RATIO * v_distRatio;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nfloat outlineWidth = v_outlineWidth;\n#ifdef HIGHLIGHT\noutlineWidth = max(outlineWidth, 4.0 * v_isThin);\n#endif\nif (outlineWidth > 0.25) {\nlowp vec4 outlinePixelColor = v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\nfloat clampedOutlineSize = min(outlineWidth, size);\noutlinePixelColor *= clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\nreturn v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n}\nreturn v_opacity * fillPixelColor;\n}\n#else\nvec4 getColor(vec2 _v_size, vec2 v_tex) {\nlowp vec4 texColor = texture2D(u_texture, v_tex);\nreturn v_opacity * texColor * v_color;\n}\n#endif",heatmapAccumulate:{"common.glsl":"varying lowp vec4 v_hittestResult;\nvarying mediump vec2 v_offsetFromCenter;\nvarying highp float v_fieldValue;","heatmapAccumulate.frag":"precision mediump float;\n#include <materials/icon/heatmapAccumulate/common.glsl>\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 0.25\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform lowp sampler2D u_texture;\nvoid main() {\n#ifdef HITTEST\ngl_FragColor = v_hittestResult;\n#else\nfloat radius = length(v_offsetFromCenter);\nfloat shapeWeight = step(radius, 1.0);\nfloat oneMinusRadiusSquared = 1.0 - radius * radius;\nfloat kernelWeight = oneMinusRadiusSquared * oneMinusRadiusSquared;\ngl_FragColor = vec4(shapeWeight * kernelWeight * v_fieldValue * COMPRESSION_FACTOR);\n#endif\n}","heatmapAccumulate.vert":"precision highp float;\nattribute vec2 a_vertexOffset;\nvec4 a_color = vec4(0.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\nuniform float u_radius;\nuniform float u_isFieldActive;\n#include <materials/vcommon.glsl>\n#include <materials/hittest/common.glsl>\n#include <materials/icon/heatmapAccumulate/common.glsl>\nvoid main() {\nfloat filterFlags = getFilterFlags();\n#ifdef HITTEST\nhighp vec4 out_hittestResult = vec4(0.);\nhighp vec3 out_pos = vec3(0.);\nvec3 pos = u_viewMat3 * u_tileMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nhittestMarker(out_hittestResult, out_pos, pos, u_radius);\nv_hittestResult = out_hittestResult;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(a_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\nv_offsetFromCenter = sign(a_vertexOffset);\nv_fieldValue = getAttributeData2(a_id).x * u_isFieldActive + 1.0 - u_isFieldActive;\nvec3 centerPos = u_dvsMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nvec3 vertexPos = centerPos + u_displayViewMat3 * vec3(v_offsetFromCenter, 0.0) * u_radius;\ngl_Position = vec4(clip(a_color, vertexPos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},"hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_vertexOffset1;\nattribute vec2 a_vertexOffset2;\nattribute vec2 a_texCoords1;\nattribute vec2 a_texCoords2;\nvec2 getTextureCoords(in vec3 bary, in vec2 texCoords0, in vec2 texCoords1, in vec2 texCoords2) {\nreturn texCoords0 * bary.x + texCoords1 * bary.y + texCoords2 * bary.z;\n}\nvoid hittestIcon(\ninout lowp vec4 out_color,\nout highp vec3 out_pos,\nin vec3 pos,\nin vec3 offset,\nin vec2 size,\nin float scaleFactor,\nin float isMapAligned\n) {\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nvec3 posBase = u_viewMat3 * u_tileMat3  * pos;\nvec3 offset1 = scaleFactor * vec3(a_vertexOffset1 / 16.0, 0.);\nvec3 offset2 = scaleFactor * vec3(a_vertexOffset2 / 16.0, 0.);\nvec2 pos0    = (posBase + getMatrixNoDisplay(isMapAligned) * offset).xy;\nvec2 pos1    = (posBase + getMatrixNoDisplay(isMapAligned) * offset1).xy;\nvec2 pos2    = (posBase + getMatrixNoDisplay(isMapAligned) * offset2).xy;\nvec3 bary0 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary1 = xyToBarycentric(u_hittestPos + vec2(0., -u_hittestDist), pos0, pos1, pos2);\nvec3 bary2 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary3 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary4 = xyToBarycentric(u_hittestPos, pos0, pos1, pos2);\nvec3 bary5 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary6 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec3 bary7 = xyToBarycentric(u_hittestPos + vec2(0., u_hittestDist), pos0, pos1, pos2);\nvec3 bary8 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec2 tex0 = a_texCoords  / u_mosaicSize;\nvec2 tex1 = a_texCoords1 / u_mosaicSize;\nvec2 tex2 = a_texCoords2 / u_mosaicSize;\nfloat alphaSum = 0.;\nalphaSum += inTriangle(bary0) * getColor(size, getTextureCoords(bary0, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary1) * getColor(size, getTextureCoords(bary1, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary2) * getColor(size, getTextureCoords(bary2, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary3) * getColor(size, getTextureCoords(bary3, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary4) * getColor(size, getTextureCoords(bary4, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary5) * getColor(size, getTextureCoords(bary5, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary6) * getColor(size, getTextureCoords(bary6, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary7) * getColor(size, getTextureCoords(bary7, tex0, tex1, tex2)).a;\nout_pos.z += step(alphaSum, .05) * 2.0;\nout_color = vec4(1. / 255., 0., 0., alphaSum / 255.);\n}\n#endif","icon.frag":"precision mediump float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/icon/common.glsl>\nvoid main()\n{\n#ifdef HITTEST\nvec4 color = v_color;\n#else\nvec4 color = getColor(v_sizeTex.xy, v_sizeTex.zw);\n#endif\n#ifdef HIGHLIGHT\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","icon.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/icon/common.glsl>\n#include <materials/icon/hittest.glsl>\nfloat getMarkerScaleFactor(inout vec2 size, in float referenceSize) {\n#ifdef VV_SIZE\nfloat f = getSize(size.y) / size.y;\nfloat sizeFactor = size.y / referenceSize;\nreturn getSize(referenceSize) / referenceSize;\n#else\nreturn 1.;\n#endif\n}\nvoid main()\n{\nINIT;\nfloat a_bitSet = a_bitSetAndDistRatio.x;\nvec3  pos           = vec3(a_pos * POSITION_PRECISION, 1.0);\nvec2  size          = a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec3  offset        = vec3(a_vertexOffset / 16.0, 0.);\nfloat outlineSize   = a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 128.0;\nfloat isMapAligned  = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nfloat referenceSize = a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0;\nfloat scaleSymbolProportionally = getBit(a_bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\nfloat scaleFactor               = getMarkerScaleFactor(size, referenceSize);\nsize.xy     *= scaleFactor;\noffset.xy   *= scaleFactor;\noutlineSize *= scaleSymbolProportionally * (scaleFactor - 1.0) + 1.0;\nvec2 v_tex   = a_texCoords / u_mosaicSize;\nfloat filterFlags = getFilterFlags();\nv_color    = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity  = getOpacity();\nv_id       = norm(a_id);\nv_pos      = u_dvsMat3 * pos + getMatrix(isMapAligned) * getRotation()  * offset;\nv_sizeTex  = vec4(size.xy, v_tex.xy);\n#ifdef SDF\nv_isThin   = getBit(a_bitSet, BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE);\n#ifdef VV_COLOR\nv_overridingOutlineColor = v_isThin;\n#else\nv_overridingOutlineColor = 0.0;\n#endif\nv_outlineWidth = min(outlineSize, max(max(size.x, size.y) - 0.99, 0.0));\nv_outlineColor = a_outlineColor;\nv_distRatio = a_bitSetAndDistRatio.y / 128.0;\n#endif\n#ifdef HITTEST\nhighp vec4 out_color = vec4(0.);\nhighp vec3 out_pos   = vec3(0.);\nhittestIcon(out_color, out_pos, pos, offset, size, scaleFactor, isMapAligned);\nv_color = out_color;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform mediump float u_mapRotation;\nuniform mediump float u_mapAligned;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\nvarying lowp vec4 v_animation;","label.frag":"#include <materials/text/text.frag>","label.vert":"precision highp float;\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_glyphData;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\nfloat glyphAngle = angle * 360.0 / 254.0;\nfloat mapAngle = u_mapRotation * 360.0 / 254.0;\nfloat diffAngle = min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\nfloat z = 0.0;\nz += u_mapAligned * (2.0 * (1.0 - step(minZoom, u_currentZoom)));\nz += u_mapAligned * 2.0 * step(90.0, diffAngle);\nz += 2.0 * (1.0 - step(u_currentZoom, maxZoom));\nreturn z;\n}\nvoid main()\n{\nINIT;\nfloat groupMinZoom    = getMinZoom();\nfloat glyphMinZoom    = a_glyphData.x;\nfloat glyphMaxZoom    = a_glyphData.y;\nfloat glyphAngle      = a_glyphData.z;\nfloat a_isBackground  = a_glyphData.w;\nfloat a_minZoom          = max(groupMinZoom, glyphMinZoom);\nfloat a_placementPadding = a_refSymbolAndPlacementOffset.x * EXTRUDE_SCALE_PLACEMENT_PADDING;\nvec2  a_placementDir     = unpack_u8_nf32(a_refSymbolAndPlacementOffset.zw);\nfloat a_refSymbolSize    = a_refSymbolAndPlacementOffset.y;\nfloat fontSize           = a_texAndSize.z;\nfloat haloSize           = a_texAndSize.w * OUTLINE_SCALE;\nvec2  vertexOffset = a_vertexOffset * OFFSET_PRECISION;\nvec3  pos          = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat z            = getZ(a_minZoom, glyphMaxZoom, glyphAngle);\nfloat fontScale    = fontSize / SDF_FONT_SIZE;\nfloat halfSize     = getSize(a_refSymbolSize) / 2.0;\nfloat animation    = pow(getAnimationState(), vec4(2.0)).r;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor = (isBackground + isText) * a_color;\nv_color     = animation * ((1.0 - u_isHaloPass) * nonHaloColor + (u_isHaloPass * a_haloColor));\nv_opacity   = 1.0;\nv_tex       = a_texCoords / u_mosaicSize;\nv_edgeDistanceOffset = u_isHaloPass * haloSize / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\nvec2 placementOffset = a_placementDir * (halfSize + a_placementPadding);\nvec3 glyphOffset     = u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\nvec3 v_pos           = vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\ngl_Position = vec4(v_pos, 1.0);\n#ifdef DEBUG\nv_color = vec4(a_color.rgb, z == 0.0 ? 1.0 : 0.645);\n#endif\n}"},line:{"common.glsl":"varying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp float v_opacity;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif\n#ifdef SDF\nvarying mediump float v_lineWidthRatio;\n#endif","hittest.glsl":"#include <materials/hittest/common.glsl>\n#ifdef HITTEST\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestLine(out lowp vec4 out_color, out highp vec3 out_pos, float halfWidth) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * POSITION_PRECISION, 1.);\nvec3 outTextureCoords = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nfloat dist = min(distPointSegment(u_hittestPos, pos.xy, pos1.xy),\ndistPointSegment(u_hittestPos, pos.xy, pos2.xy)) - halfWidth;\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist >= u_hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist <= 0. ? (1. / 255.) : 0.);\n}\n#endif","line.frag":"precision lowp float;\n#include <util/encoding.glsl>\n#include <materials/constants.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\n#ifdef HITTEST\nvoid main() {\ngl_FragColor = v_color;\n}\n#else\nvoid main() {\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineHalfWidth,\nv_opacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr,\nv_patternSize,\n#endif\n#ifdef SDF\nv_lineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance,\n#endif\n#endif\nv_id\n);\ngl_FragColor = shadeLine(inputs);\n}\n#endif","line.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/line/hittest.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\n#ifdef HITTEST\nvoid draw() {\nfloat aa        = 0.5 * u_antialiasing;\nfloat a_halfWidth = a_accumulatedDistanceAndHalfWidth.y / 16.;\nfloat a_cimHalfWidth = a_aux.x / 16. ;\nvec2  a_offset = a_offsetAndNormal.xy / 16.;\nfloat baseWidth = getBaseLineHalfWidth(a_halfWidth, a_cimHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nhighp vec3 pos  = vec3(0.);\nv_color = vec4(0.);\nhittestLine(v_color, pos, halfWidth);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#else\nvoid draw()\n{\nhighp vec3 pos = vec3(0.);\nLineData outputs = buildLine(\npos,\na_id,\na_pos,\na_color,\na_offsetAndNormal.xy / 16.,\na_offsetAndNormal.zw / 16.,\na_accumulatedDistanceAndHalfWidth.x,\na_accumulatedDistanceAndHalfWidth.y / 16.,\na_segmentDirection.w,\na_tlbr,\na_segmentDirection.xy / 16.,\na_aux.x / 16.\n);\nv_id              = outputs.id;\nv_color           = outputs.color;\nv_normal          = outputs.normal;\nv_lineHalfWidth   = outputs.lineHalfWidth;\nv_opacity         = outputs.opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr          = outputs.tlbr;\nv_patternSize   = outputs.patternSize;\n#endif\n#ifdef SDF\nv_lineWidthRatio = outputs.lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance = outputs.accumulatedDistance;\n#endif\n#endif\ngl_Position = vec4(clip(outputs.color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#endif\nvoid main() {\nINIT;\ndraw();\n}"},pie:{"pie.common.glsl":"uniform float outlineWidth;\nuniform mediump float sectorThreshold;\nvarying vec3  v_id;\nvarying vec3  v_pos;\nvarying vec2  v_offset;\nvarying vec4  v_color;\nvarying float v_size;\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nvarying vec2  v_filteredSectorToColorId[numberOfFields];\nvarying vec2  v_texCoords;\nvarying float v_outlineWidth;\nvarying float v_opacity;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};","pie.frag":"precision highp float;\n#include <util/atan2.glsl>\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/pie/pie.common.glsl>\nuniform lowp vec4 colors[numberOfFields];\nuniform lowp vec4 defaultColor;\nuniform lowp vec4 othersColor;\nuniform lowp vec4 outlineColor;\nuniform float donutRatio;\nlowp vec4 getSectorColor(in int index, in vec2 filteredSectorToColorId[numberOfFields]) {\nmediump int colorIndex = int(filteredSectorToColorId[index].y);\nreturn colors[colorIndex];\n}\nconst int OTHER_SECTOR_ID = 255;\n#ifdef HITTEST\nvec4 getColor() {\nfloat distanceSize = length(v_offset) * v_size;\nfloat donutSize = donutRatio * v_size;\nfloat alpha = step(donutSize, distanceSize) * (1.0 - step(v_size, distanceSize));\nreturn v_color;\n}\n#else\nvec4 getColor() {\nfloat angle = 90.0 - C_RAD_TO_DEG * atan2(v_offset.y, v_offset.x);\nif (angle < 0.0) {\nangle += 360.0;\n} else if (angle > 360.0) {\nangle = mod(angle, 360.0);\n}\nint numOfEntries = int(v_numOfEntries);\nfloat maxSectorAngle = v_maxSectorAngle;\nlowp vec4 fillColor = (maxSectorAngle > 0.0 || sectorThreshold > 0.0) ? othersColor : defaultColor;\nlowp vec4 prevColor = vec4(0.0);\nlowp vec4 nextColor = vec4(0.0);\nfloat startSectorAngle = 0.0;\nfloat endSectorAngle = 0.0;\nif (angle < maxSectorAngle) {\nfor (int index = 0; index < numberOfFields; ++index) {\nstartSectorAngle = endSectorAngle;\nendSectorAngle = v_filteredSectorToColorId[index].x;\nif (endSectorAngle > angle) {\nfillColor = getSectorColor(index, v_filteredSectorToColorId);\nprevColor = sectorThreshold != 0.0 && index == 0 && abs(360.0 - maxSectorAngle) < EPSILON ? othersColor :\ngetSectorColor(index > 0 ? index - 1 : numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = sectorThreshold != 0.0 && abs(endSectorAngle - maxSectorAngle) < EPSILON ? othersColor :\ngetSectorColor(index < numOfEntries - 1 ? index + 1 : 0, v_filteredSectorToColorId);\nbreak;\n}\nif (index == numOfEntries - 1) {\nbreak;\n}\n}\n} else {\nprevColor = getSectorColor(numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = getSectorColor(0, v_filteredSectorToColorId);\nstartSectorAngle = maxSectorAngle;\nendSectorAngle = 360.0;\n}\nlowp vec4 outlineColor = outlineColor;\nfloat offset = length(v_offset);\nfloat distanceSize = offset * v_size;\nif (startSectorAngle != 0.0 || endSectorAngle != 360.0) {\nfloat distanceToStartSector = (angle - startSectorAngle);\nfloat distanceToEndSector = (endSectorAngle - angle);\nfloat sectorThreshold = 0.6;\nfloat beginSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToStartSector * offset);\nfloat endSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToEndSector * offset);\nif (endSectorAlpha > 0.0) {\nfillColor = mix(nextColor, fillColor, endSectorAlpha);\n} else if (beginSectorAlpha > 0.0) {\nfillColor = mix(prevColor, fillColor, beginSectorAlpha);\n}\n}\nfloat donutSize = donutRatio * (v_size - v_outlineWidth);\nfloat endOfDonut = donutSize - v_outlineWidth;\nfloat aaThreshold = 0.75;\nfloat innerCircleAlpha = endOfDonut - aaThreshold > 0.0 ? smoothstep(endOfDonut - aaThreshold, endOfDonut + aaThreshold, distanceSize) : 1.0;\nfloat outerCircleAlpha = 1.0 - smoothstep(v_size - aaThreshold, v_size + aaThreshold , distanceSize);\nfloat circleAlpha = innerCircleAlpha * outerCircleAlpha;\nfloat startOfOutline = v_size - v_outlineWidth;\nif (startOfOutline > 0.0 && v_outlineWidth > 0.25) {\nfloat outlineFactor = smoothstep(startOfOutline - aaThreshold, startOfOutline + aaThreshold, distanceSize);\nfloat innerLineFactor = donutSize - aaThreshold > 0.0 ? 1.0 - smoothstep(donutSize - aaThreshold, donutSize + aaThreshold , distanceSize) : 0.0;\nfillColor = mix(fillColor, outlineColor, innerLineFactor + outlineFactor);\n}\nreturn v_opacity * circleAlpha * fillColor;\n}\n#endif\nvoid main()\n{\nvec4 color = getColor();\n#ifdef highlight\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","pie.vert":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/barycentric.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/vv.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/pie/pie.common.glsl>\n#include <materials/hittest/common.glsl>\nattribute float a_bitSet;\nattribute vec2  a_offset;\nattribute vec2  a_texCoords;\nattribute vec2  a_size;\nattribute float a_referenceSize;\nattribute vec2  a_zoomRange;\nint filterValue(in float sectorAngle,\nin int currentIndex,\ninout FilteredChartInfo filteredInfo,\ninout vec2 filteredSectorToColorId[numberOfFields]) {\nif (sectorAngle > sectorThreshold * 360.0) {\nfilteredInfo.endSectorAngle += sectorAngle;\nfilteredSectorToColorId[filteredInfo.colorId] = vec2(filteredInfo.endSectorAngle, currentIndex);\n++filteredInfo.colorId;\n}\nreturn 0;\n}\nint filterValues(inout vec2 filteredSectorToColorId[numberOfFields],\ninout FilteredChartInfo filteredInfo,\nin float sectorAngles[numberOfFields]) {\nfor (int index = 0; index < numberOfFields; ++index) {\nfloat sectorValue = sectorAngles[index];\nfilterValue(sectorValue, index, filteredInfo, filteredSectorToColorId);\n}\nreturn filteredInfo.colorId;\n}\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float a_referenceSize, in float bitSet) {\nvec2 outSize = baseSize;\n#ifdef VV_SIZE\nfloat r = getSize(a_referenceSize, currentScale) / a_referenceSize;\noutSize.xy *= r;\noffset.xy *= r;\nfloat scaleSymbolProportionally = getBit(bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\noutlineSize *= scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\nreturn outSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\nfloat isMapAligned = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nvec3  offset       = vec3(in_offset, 0.0);\nreturn getMatrix(isMapAligned) * offset;\n}\nfloat filterNaNValues(in float value) {\nreturn value != NAN_MAGIC_NUMBER && value > 0.0 ? value : 0.0;\n}\nvoid main()\n{\nINIT;\nvec2  a_size   = a_size;\nvec2  a_offset = a_offset / 16.0;\nfloat outlineSize = outlineWidth;\nfloat a_bitSet = a_bitSet;\nfloat a_referenceSize = a_referenceSize;\nvec2 a_texCoords = a_texCoords / 4.0;\nvec2 markerSize = getMarkerSize(a_offset, a_size, outlineSize, a_referenceSize, a_bitSet);\nfloat filterFlags = getFilterFlags();\nvec3  pos         = vec3(a_pos / 10.0, 1.0);\nv_opacity      = getOpacity();\nv_id           = norm(a_id);\nv_pos          = displayViewScreenMat3 * pos + getOffset(a_offset, a_bitSet);\nv_offset       = sign(a_texCoords - 0.5);\nv_size         = max(markerSize.x, markerSize.y);\nv_outlineWidth = outlineSize;\nfloat attributeData[10];\nvec4 attributeData3 = getDataDriven0(a_id);\nattributeData[0] = filterNaNValues(attributeData3.x);\nattributeData[1] = filterNaNValues(attributeData3.y);\nattributeData[2] = filterNaNValues(attributeData3.z);\nattributeData[3] = filterNaNValues(attributeData3.w);\n#if (numberOfFields > 4)\nvec4 attributeData4 = getDataDriven1(a_id);\nattributeData[4] = filterNaNValues(attributeData4.x);\nattributeData[5] = filterNaNValues(attributeData4.y);\nattributeData[6] = filterNaNValues(attributeData4.z);\nattributeData[7] = filterNaNValues(attributeData4.w);\n#endif\n#if (numberOfFields > 8)\nvec4 attributeData5 = getDataDriven2(a_id);\nattributeData[8] = filterNaNValues(attributeData5.x);\nattributeData[9] = filterNaNValues(attributeData5.y);\n#endif\nfloat sum = 0.0;\nfor (int i = 0; i < numberOfFields; ++i) {\nsum += attributeData[i];\n}\nfloat sectorAngles[numberOfFields];\nfor (int i = 0; i < numberOfFields; ++i) {\nsectorAngles[i] = 360.0 * attributeData[i] / sum;\n}\nvec2 filteredSectorToColorId[numberOfFields];\nFilteredChartInfo filteredInfo = FilteredChartInfo(0.0, 0);\nint numOfEntries = filterValues(filteredSectorToColorId, filteredInfo, sectorAngles);\nv_numOfEntries = float(numOfEntries);\nv_maxSectorAngle = filteredInfo.endSectorAngle;\nv_filteredSectorToColorId = filteredSectorToColorId;\n#ifdef HITTEST\nhighp vec3 out_pos = vec3(0.0);\nv_color            = vec4(0.0);\nhittestMarker(v_color, out_pos, viewMat3 * tileMat3 *  pos, v_size);\ngl_PointSize = 1.0;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},shared:{line:{"common.glsl":"#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\nstruct LineData {\nlowp vec4 color;\nmediump vec2 normal;\nmediump float lineHalfWidth;\nlowp float opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nmediump vec4 tlbr;\nmediump vec2 patternSize;\n#endif\n#ifdef SDF\nmediump float lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nhighp float accumulatedDistance;\n#endif\n#endif\nhighp vec3 id;\n};","line.frag":"uniform lowp float u_blur;\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && !defined(HIGHLIGHT)\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\nuniform highp float u_pixelRatio;\n#endif\n#endif\n#if defined(SDF) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float adjustedPatternWidth = line.patternSize.x * 2.0 * line.lineWidthRatio;\nmediump float relativeTexX = fract(line.accumulatedDistance / adjustedPatternWidth);\nmediump float relativeTexY = 0.5 + 0.25 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * line.lineHalfWidth;\nreturn line.opacity * clamp(0.5 - dist, 0.0, 1.0) * line.color;\n}\n#elif defined(PATTERN) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float lineHalfWidth = line.lineHalfWidth;\nmediump float adjustedPatternHeight = line.patternSize.y * 2.0 * lineHalfWidth / line.patternSize.x;\nmediump float relativeTexY = fract(line.accumulatedDistance / adjustedPatternHeight);\nmediump float relativeTexX = 0.5 + 0.5 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color = texture2D(u_texture, texCoord);\n#ifdef VV_COLOR\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\n#endif\nreturn line.opacity * line.color * color;\n}\n#else\nlowp vec4 getLineColor(LineData line) {\nreturn line.opacity * line.color;\n}\n#endif\nvec4 shadeLine(LineData line)\n{\nmediump float thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(line.lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nmediump float fragDist = length(line.normal) * line.lineHalfWidth;\nlowp float alpha = clamp(thinLineFactor * (line.lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\nlowp vec4 out_color = getLineColor(line) * alpha;\n#ifdef HIGHLIGHT\nout_color.a = step(1.0 / 255.0, out_color.a);\n#endif\n#ifdef ID\nif (out_color.a < 1.0 / 255.0) {\ndiscard;\n}\nout_color = vec4(line.id, 0.0);\n#endif\nreturn out_color;\n}","line.vert":"float getBaseLineHalfWidth(in float lineHalfWidth, in float referenceHalfWidth) {\n#ifdef VV_SIZE\nfloat refLineWidth = 2.0 * referenceHalfWidth;\nreturn 0.5 * (lineHalfWidth / max(referenceHalfWidth, EPSILON)) * getSize(refLineWidth);\n#else\nreturn lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\nfloat halfWidth = max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\nhalfWidth = max(halfWidth, 2.0);\n#endif\nreturn halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\nfloat thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nreturn thinLineFactor * halfWidth * offset;\n}\nLineData buildLine(\nout vec3 out_pos,\nin vec3 in_id,\nin vec2 in_pos,\nin vec4 in_color,\nin vec2 in_offset,\nin vec2 in_normal,\nin float in_accumulatedDist,\nin float in_lineHalfWidth,\nin float in_bitSet,\nin vec4 in_tlbr,\nin vec2 in_segmentDirection,\nin float in_referenceHalfWidth\n)\n{\nfloat aa        = 0.5 * u_antialiasing;\nfloat baseWidth = getBaseLineHalfWidth(in_lineHalfWidth, in_referenceHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nfloat z         = 2.0 * step(baseWidth, 0.0);\nvec2  dist      = getDist(in_offset, halfWidth);\nvec3  offset    = u_displayViewMat3 * vec3(dist, 0.0);\nvec3  pos       = u_dvsMat3 * vec3(in_pos * POSITION_PRECISION, 1.0) + offset;\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvec4  color     = in_color;\nfloat opacity   = 1.0;\n#else\nvec4  color     = getColor(in_color, in_bitSet, BITSET_GENERIC_LOCK_COLOR);\nfloat opacity   = getOpacity();\n#ifdef SDF\nconst float SDF_PATTERN_HALF_WIDTH = 15.5;\nfloat scaleDash = getBit(in_bitSet, BITSET_LINE_SCALE_DASH);\nfloat lineWidthRatio = (scaleDash * max(halfWidth - 0.55 * u_antialiasing, 0.25) + (1.0 - scaleDash)) / SDF_PATTERN_HALF_WIDTH;\n#endif\n#endif\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nv_sampleAlphaOnly = getBit(in_bitSet, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\n#endif\nout_pos = vec3(pos.xy, z);\nreturn LineData(\ncolor,\nin_normal,\nhalfWidth,\nopacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nin_tlbr / u_mosaicSize.xyxy,\nvec2(in_tlbr.z - in_tlbr.x, in_tlbr.w - in_tlbr.y),\n#endif\n#ifdef SDF\nlineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nin_accumulatedDist * u_zoomFactor + dot(in_segmentDirection, dist),\n#endif\n#endif\nnorm(in_id)\n);\n}"}},"symbologyTypeUtils.glsl":"#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_SIMPLE || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\n#endif",text:{"common.glsl":"uniform highp vec2 u_mosaicSize;\nvarying highp vec3 v_id;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec2 v_tex;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying lowp float v_transparency;","hittest.glsl":"#include <materials/hittest/common.glsl>","text.frag":"precision mediump float;\n#include <materials/text/common.glsl>\nuniform lowp sampler2D u_texture;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor()\n{\nfloat SDF_CUTOFF = (2.0 / 8.0);\nfloat SDF_BASE_EDGE_DIST = 1.0 - SDF_CUTOFF;\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float edge = SDF_BASE_EDGE_DIST - v_edgeDistanceOffset;\n#ifdef HIGHLIGHT\nedge /= 2.0;\n#endif\nlowp float aa = v_antialiasingWidth;\nlowp float alpha = smoothstep(edge - aa, edge + aa, dist);\nreturn alpha * v_color * v_opacity;\n}\n#endif\nvoid main()\n{\ngl_FragColor = getColor();\n}","text.vert":"precision highp float;\n#include <materials/utils.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\n#include <materials/text/hittest.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nattribute vec2 a_zoomRange;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nfloat getTextSize(inout vec2 offset, inout float baseSize, in float referenceSize) {\n#ifdef VV_SIZE\nfloat r = getSize(referenceSize) / referenceSize;\nbaseSize *= r;\noffset.xy *= r;\nreturn baseSize;\n#endif\nreturn baseSize;\n}\nvoid main()\n{\nINIT;\nfloat a_isBackground  = a_aux.y;\nfloat a_referenceSize = a_aux.z * a_aux.z / 256.0;\nfloat a_bitSet        = a_aux.w;\nfloat a_fontSize      = a_texFontSize.z;\nvec2  a_offset        = a_vertexOffset * OFFSET_PRECISION;\nvec3  in_pos        = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat fontSize      = getTextSize(a_offset, a_fontSize, a_referenceSize);\nfloat fontScale     = fontSize / SDF_FONT_SIZE;\nvec3  offset        = getRotation() * vec3(a_offset, 0.0);\nmat3  extrudeMatrix = getBit(a_bitSet, 0) == 1.0 ? u_displayViewMat3 : u_displayMat3;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor  = (isBackground * a_color) + (isText * getColor(a_color, a_bitSet, 1));\nv_color   = u_isHaloPass * a_haloColor + (1.0 - u_isHaloPass) * nonHaloColor;\nv_opacity = getOpacity();\nv_id      = norm(a_id);\nv_tex     = a_texCoords / u_mosaicSize;\nv_pos     = u_dvsMat3 * in_pos + extrudeMatrix * offset;\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\nv_edgeDistanceOffset = u_isHaloPass * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n#ifdef HITTEST\nhighp vec3 out_pos  = vec3(0.);\nv_color = vec4(0.);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  vec3(a_pos * POSITION_PRECISION, 1.0)\n+ u_tileMat3 * offset, fontSize / 2.);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, getFilterFlags(), a_zoomRange), 1.0);\n#else\ngl_Position =  vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n#endif\n}"},"utils.glsl":"float rshift(in float u32, in int amount) {\nreturn floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\nfloat offset = pow(2.0, float(bitIndex));\nreturn mod(floor(bitset / offset), 2.0);\n}\nconst int maxHighlightReasons = 6;\nfloat getFilterBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex + maxHighlightReasons);\n}\nfloat getHighlightBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex);\n}\nhighp vec3 unpackDisplayIdTexel(in highp vec3 bitset) {\nfloat isAggregate = getBit(bitset.b, 7);\nreturn (1.0 - isAggregate) * bitset + isAggregate * (vec3(bitset.rgb) - vec3(0.0, 0.0, float(0x80)));\n}\nvec4 unpack(in float u32) {\nfloat r = mod(rshift(u32, 0), 255.0);\nfloat g = mod(rshift(u32, 8), 255.0);\nfloat b = mod(rshift(u32, 16), 255.0);\nfloat a = mod(rshift(u32, 24), 255.0);\nreturn vec4(r, g, b, a);\n}\nvec3 norm(in vec3 v) {\nreturn v /= 255.0;\n}\nvec4 norm(in vec4 v) {\nreturn v /= 255.0;\n}\nfloat max4(vec4 target) {\nreturn max(max(max(target.x, target.y), target.z), target.w);\n}\nvec2 unpack_u8_nf32(vec2 bytes) {\nreturn (bytes - 127.0) / 127.0;\n}\nhighp float rand(in vec2 co) {\nhighp float a = 12.9898;\nhighp float b = 78.233;\nhighp float c = 43758.5453;\nhighp float dt = dot(co, vec2(a,b));\nhighp float sn = mod(dt, 3.14);\nreturn fract(sin(sn) * c);\n}","vcommon.glsl":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/vv.glsl>\n#include <materials/barycentric.glsl>\nattribute vec2 a_pos;\nattribute highp vec3 a_id;\nuniform highp mat3 displayViewScreenMat3;\nuniform highp mat3 displayViewMat3;\nuniform highp mat3 displayMat3;\nuniform highp mat3 tileMat3;\nuniform highp mat3 viewMat3;\nuniform highp float pixelRatio;\nuniform mediump float zoomFactor;\nuniform mediump float antialiasing;\nuniform mediump float currentScale;\nuniform mediump float currentZoom;\nuniform mediump float metersPerSRUnit;\nuniform mediump float activeReasons;\nuniform mediump float highlightAll;\nvec4 VV_ADATA = vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target) {\ntarget.rgba = getVisualVariableData(a_id);\n}\n#ifdef VV\n#define INIT loadVisualVariableData(VV_ADATA)\n#else\n#define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\nfloat isColorLocked   = getBit(a_bitSet, index);\nreturn getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\nreturn a_color;\n#endif\n}\nfloat getOpacity() {\n#ifdef VV_OPACITY\nreturn getVVOpacity(VV_ADATA[ATTR_VV_OPACITY]);\n#else\nreturn 1.0;\n#endif\n}\nfloat getSize(in float in_size, in float currentScale) {\n#ifdef VV_SIZE\nreturn getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE], currentScale);\n#else\nreturn in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\nreturn getVVRotationMat3(mod(VV_ADATA[ATTR_VV_ROTATION], 360.0));\n#else\nreturn mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n#ifdef IGNORES_SAMPLER_PRECISION\nreturn ceil(getFilterData(a_id).x * 255.0);\n#else\nreturn getFilterData(a_id).x * 255.0;\n#endif\n}\nvec4 getAnimationState() {\nreturn getAnimation(a_id);\n}\nfloat getMinZoom() {\nvec4 data0 = getFilterData(a_id) * 255.0;\nreturn data0.g;\n}\nmat3 getMatrixNoDisplay(float isMapAligned) {\nreturn isMapAligned * viewMat3 * tileMat3 + (1.0 - isMapAligned) * tileMat3;\n}\nmat3 getMatrix(float isMapAligned) {\nreturn isMapAligned * displayViewMat3 + (1.0 - isMapAligned) * displayMat3;\n}\nfloat checkHighlightBit(float filterFlags, int index) {\nreturn getHighlightBit(filterFlags, index) * getBit(activeReasons, index);\n}\nfloat checkHighlight(float filterFlags) {\nfloat result = checkHighlightBit(filterFlags, 0);\nfor (int i = 1; i < maxHighlightReasons; i++) {\nresult = result + checkHighlightBit(filterFlags, i);\n}\nreturn step(0.1, result + highlightAll);\n}\nvec3 clip(inout vec4 color, inout vec3 pos, in float filterFlags, in vec2 minMaxZoom) {\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifdef inside\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#elif defined(outside)\npos.z += 2.0 * getFilterBit(filterFlags, 1);\n#elif defined(highlight)\npos.z += 2.0 * (1.0 - checkHighlight(filterFlags));\n#endif\npos.z += 2.0 * (step(minMaxZoom.y, currentZoom) + (1.0 - step(minMaxZoom.x, currentZoom)));\nreturn pos;\n}","vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n#define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n#define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float colorValues[8];\nuniform vec4 colors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 minMaxValueAndSize;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float values[8];\nuniform float sizes[8];\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float values[8];\nuniform float sizes[8];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float unitMeterRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float opacityValues[8];\nuniform float opacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float rotationType;\n#endif\nbool isNan(float val) {\nreturn (val == NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nfloat interpolationRatio = (sizeValue  - minMaxValueAndSize.x) / (minMaxValueAndSize.y - minMaxValueAndSize.x);\ninterpolationRatio = clamp(interpolationRatio, 0.0, 1.0);\nreturn minMaxValueAndSize.z + interpolationRatio * (minMaxValueAndSize.w - minMaxValueAndSize.z);\n}\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nfloat getVVScaleStopsSize(float currentScale) {\nfloat outSize;\nif (currentScale <= values[0]) {\noutSize = sizes[0];\n} else {\nif (currentScale >= values[7]) {\noutSize = sizes[7];\n} else {\nint index;\nindex = -1;\nfor (int i = 0; i < 8; i++) {\nif (values[i] > currentScale) {\nindex = i;\nbreak;\n}\n}\nint prevIndex = index - 1;\nfloat a = currentScale - values[prevIndex];\nfloat b = values[index] - values[prevIndex];\noutSize = mix(sizes[prevIndex], sizes[index], a / b);\n}\n}\nreturn outSize;\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N = 8;\nfloat getVVStopsSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nif (sizeValue <= values[0]) {\nreturn sizes[0];\n}\nif (sizeValue >= values[VV_SIZE_N - 1]) {\nreturn sizes[VV_SIZE_N - 1];\n}\nfor (int i = 1; i < VV_SIZE_N; ++i) {\nif (values[i] >= sizeValue) {\nfloat f = (sizeValue - values[i-1]) / (values[i] - values[i-1]);\nreturn mix(sizes[i-1], sizes[i], f);\n}\n}\nreturn sizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nreturn sizeValue * (metersPerSRUnit / unitMeterRatio);\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N = 8;\nfloat getVVOpacity(float opacityValue) {\nif (isNan(opacityValue)) {\nreturn 1.0;\n}\nif (opacityValue <= opacityValues[0]) {\nreturn opacities[0];\n}\nfor (int i = 1; i < VV_OPACITY_N; ++i) {\nif (opacityValues[i] >= opacityValue) {\nfloat f = (opacityValue - opacityValues[i-1]) / (opacityValues[i] - opacityValues[i-1]);\nreturn mix(opacities[i-1], opacities[i], f);\n}\n}\nreturn opacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat4(1, 0, 0, 0,\n0, 1, 0, 0,\n0, 0, 1, 0,\n0, 0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (rotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat4(cosA, sinA, 0, 0,\n-sinA,  cosA, 0, 0,\n0,     0, 1, 0,\n0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat3(1, 0, 0,\n0, 1, 0,\n0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (rotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * -rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat3(cosA, -sinA, 0,\nsinA, cosA, 0,\n0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N = 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\nif (isNan(colorValue) || isColorLocked == 1.0) {\nreturn fallback;\n}\nif (colorValue <= colorValues[0]) {\nreturn colors[0];\n}\nfor (int i = 1; i < VV_COLOR_N; ++i) {\nif (colorValues[i] >= colorValue) {\nfloat f = (colorValue - colorValues[i-1]) / (colorValues[i] - colorValues[i-1]);\nreturn mix(colors[i-1], colors[i], f);\n}\n}\nreturn colors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize, in float currentScale)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\nreturn getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\nfloat outSize = getVVScaleStopsSize(currentScale);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_FIELD_STOPS)\nfloat outSize = getVVStopsSize(vvSize, size);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_UNIT_VALUE)\nreturn getVVUnitValue(vvSize, size);\n#else\nreturn size;\n#endif\n}"},"post-processing":{blit:{"blit.frag":"precision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\ngl_FragColor = texture2D(u_texture, v_uv);\n}"},bloom:{composite:{"composite.frag":"precision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D u_blurTexture1;\nuniform sampler2D u_blurTexture2;\nuniform sampler2D u_blurTexture3;\nuniform sampler2D u_blurTexture4;\nuniform sampler2D u_blurTexture5;\nuniform float u_bloomStrength;\nuniform float u_bloomRadius;\nuniform float u_bloomFactors[NUMMIPS];\nuniform vec3 u_bloomTintColors[NUMMIPS];\nfloat lerpBloomFactor(const in float factor) {\nfloat mirrorFactor = 1.2 - factor;\nreturn mix(factor, mirrorFactor, u_bloomRadius);\n}\nvoid main() {\nvec4 color = u_bloomStrength * (\nlerpBloomFactor(u_bloomFactors[0]) * vec4(u_bloomTintColors[0], 1.0) * texture2D(u_blurTexture1, v_uv) +\nlerpBloomFactor(u_bloomFactors[1]) * vec4(u_bloomTintColors[1], 1.0) * texture2D(u_blurTexture2, v_uv) +\nlerpBloomFactor(u_bloomFactors[2]) * vec4(u_bloomTintColors[2], 1.0) * texture2D(u_blurTexture3, v_uv) +\nlerpBloomFactor(u_bloomFactors[3]) * vec4(u_bloomTintColors[3], 1.0) * texture2D(u_blurTexture4, v_uv) +\nlerpBloomFactor(u_bloomFactors[4]) * vec4(u_bloomTintColors[4], 1.0) * texture2D(u_blurTexture5, v_uv)\n);\ngl_FragColor = clamp(color, 0.0, 1.0);\n}"},gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\n#define SIGMA RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = float(SIGMA);\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},luminosityHighPass:{"luminosityHighPass.frag":"precision mediump float;\nuniform sampler2D u_texture;\nuniform vec3 u_defaultColor;\nuniform float u_defaultOpacity;\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\nvarying vec2 v_uv;\nvoid main() {\nvec4 texel = texture2D(u_texture, v_uv);\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat v = dot(texel.xyz, luma);\nvec4 outputColor = vec4(u_defaultColor.rgb, u_defaultOpacity);\nfloat alpha = smoothstep(u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v);\ngl_FragColor = mix(outputColor, texel, alpha);\n}"}},blur:{gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nuniform float u_sigma;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = u_sigma;\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},"radial-blur":{"radial-blur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nconst float sampleDist = 1.0;\nconst float sampleStrength = 2.2;\nvoid main(void) {\nfloat samples[10];\nsamples[0] = -0.08;\nsamples[1] = -0.05;\nsamples[2] = -0.03;\nsamples[3] = -0.02;\nsamples[4] = -0.01;\nsamples[5] =  0.01;\nsamples[6] =  0.02;\nsamples[7] =  0.03;\nsamples[8] =  0.05;\nsamples[9] =  0.08;\nvec2 dir = 0.5 - v_uv;\nfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\ndir = dir / dist;\nvec4 color = texture2D(u_colorTexture,v_uv);\nvec4 sum = color;\nfor (int i = 0; i < 10; i++) {\nsum += texture2D(u_colorTexture, v_uv + dir * samples[i] * sampleDist);\n}\nsum *= 1.0 / 11.0;\nfloat t = dist * sampleStrength;\nt = clamp(t, 0.0, 1.0);\ngl_FragColor = mix(color, sum, t);\n}"}},dra:{"dra.frag":"precision mediump float;\nuniform sampler2D u_minColor;\nuniform sampler2D u_maxColor;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\nvec4 minColor = texture2D(u_minColor, vec2(0.5));\nvec4 maxColor = texture2D(u_maxColor, vec2(0.5));\nvec4 color = texture2D(u_texture, v_uv);\nvec3 minColorUnpremultiply = minColor.rgb / minColor.a;\nvec3 maxColorUnpremultiply = maxColor.rgb / maxColor.a;\nvec3 colorUnpremultiply = color.rgb / color.a;\nvec3 range = maxColorUnpremultiply - minColorUnpremultiply;\ngl_FragColor = vec4(color.a * (colorUnpremultiply - minColorUnpremultiply) / range, color.a);\n}","min-max":{"min-max.frag":"#extension GL_EXT_draw_buffers : require\nprecision mediump float;\n#define CELL_SIZE 2\nuniform sampler2D u_minTexture;\nuniform sampler2D u_maxTexture;\nuniform vec2 u_srcResolution;\nuniform vec2 u_dstResolution;\nvarying vec2 v_uv;\nvoid main() {\nvec2 srcPixel = floor(gl_FragCoord.xy) * float(CELL_SIZE);\nvec2 onePixel = vec2(1.0) / u_srcResolution;\nvec2 uv = (srcPixel + 0.5) / u_srcResolution;\nvec4 minColor = vec4(1.0);\nvec4 maxColor = vec4(0.0);\nfor (int y = 0; y < CELL_SIZE; ++y) {\nfor (int x = 0; x < CELL_SIZE; ++x) {\nvec2 offset = uv + vec2(x, y) * onePixel;\nminColor = min(minColor, texture2D(u_minTexture, offset));\nmaxColor = max(maxColor, texture2D(u_maxTexture, offset));\n}\n}\ngl_FragData[0] = minColor;\ngl_FragData[1] = maxColor;\n}"}},"drop-shadow":{composite:{"composite.frag":"precision mediump float;\nuniform sampler2D u_layerFBOTexture;\nuniform sampler2D u_blurTexture;\nuniform vec4 u_shadowColor;\nuniform vec2 u_shadowOffset;\nuniform highp mat3 u_displayViewMat3;\nvarying vec2 v_uv;\nvoid main() {\nvec3 offset = u_displayViewMat3 * vec3(u_shadowOffset, 0.0);\nvec4 layerColor = texture2D(u_layerFBOTexture, v_uv);\nvec4 blurColor = texture2D(u_blurTexture, v_uv - offset.xy / 2.0);\ngl_FragColor = ((1.0 - layerColor.a) * blurColor.a * u_shadowColor + layerColor);\n}"}},"edge-detect":{"frei-chen":{"frei-chen.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nvarying vec2 v_uv;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[9];\nconst mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\nconst mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\nconst mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\nconst mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\nconst mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\nconst mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\nconst mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\nconst mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\nconst mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\nvoid main() {\nG[0] = g0,\nG[1] = g1,\nG[2] = g2,\nG[3] = g3,\nG[4] = g4,\nG[5] = g5,\nG[6] = g6,\nG[7] = g7,\nG[8] = g8;\nmat3 I;\nfloat cnv[9];\nvec3 sample;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D(u_colorTexture, v_uv + texel * vec2(i - 1.0,j - 1.0)).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 9; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\nfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\ngl_FragColor = vec4(vec3(sqrt(M / S)), texture2D(u_colorTexture, v_uv).a);\n}"},sobel:{"sobel.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\ngl_FragColor = vec4(vec3(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1])), texture2D(u_colorTexture, v_uv).a);\n}"}},"edge-enhance":{"edge-enhance.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 0.0, -1.0, 1.0, 0.0, -1.0, 1.0, 0.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nvec4 color = texture2D(u_colorTexture, v_uv);\ngl_FragColor = vec4(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1]) * color);\n}"},filterEffect:{"filterEffect.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform mat4 u_coefficients;\nvarying vec2 v_uv;\nvoid main() {\nvec4 color = texture2D(u_colorTexture, v_uv);\nvec4 rgbw = u_coefficients * vec4(color.a > 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\nfloat a = color.a;\ngl_FragColor = vec4(a * rgbw.rgb, a);\n}"},pp:{"pp.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying vec2 v_uv;\nvoid main() {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"}},raster:{common:{"common.glsl":"uniform sampler2D u_image;\nuniform int u_bandCount;\nuniform bool u_flipY;\nuniform float u_opacity;\nuniform int u_resampling;\nuniform vec2 u_srcImageSize;\n#ifdef APPLY_PROJECTION\n#include <raster/common/projection.glsl>\n#endif\n#ifdef BICUBIC\n#include <filtering/bicubic.glsl>\n#endif\n#ifdef BILINEAR\n#include <filtering/bilinear.glsl>\n#endif\nvec2 getPixelLocation(vec2 coords) {\nvec2 targetLocation = u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;\n#ifdef APPLY_PROJECTION\ntargetLocation = projectPixelLocation(targetLocation);\n#endif\nreturn targetLocation;\n}\nbool isOutside(vec2 coords){\nif (coords.t>1.00001 ||coords.t<-0.00001 || coords.s>1.00001 ||coords.s<-0.00001) {\nreturn true;\n} else {\nreturn false;\n}\n}\nvec4 getPixel(vec2 pixelLocation) {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_image, pixelLocation, u_srcImageSize);\n#elif defined(BILINEAR)\nvec4 color = sampleBilinear(u_image, pixelLocation, u_srcImageSize);\n#else\nvec4 color = texture2D(u_image, pixelLocation);\n#endif\nreturn color;\n}","projection.glsl":"uniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nvec2 projectPixelLocation(vec2 coords) {\n#ifdef LOOKUP_PROJECTION\nvec4 pv = texture2D(u_transformGrid, coords);\nreturn vec2(pv.r, pv.g);\n#endif\nvec2 index_image = floor(coords * u_targetImageSize);\nvec2 oneTransformPixel = vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform = floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos = fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location = index_transform + oneTransformPixel * 0.5;\nif (pos.s <= pos.t) {\nvec4 ll_abc = texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def = texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc = texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def = texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;\n}"},flow:{"getFadeOpacity.glsl":"uniform float u_decayRate;\nuniform float u_fadeToZero;\nfloat getFadeOpacity(float x) {\nfloat cutOff = mix(0.0, exp(-u_decayRate), u_fadeToZero);\nreturn (exp(-u_decayRate * x) - cutOff) / (1.0 - cutOff);\n}","getFragmentColor.glsl":"vec4 getFragmentColor(vec4 color, float dist, float size, float featheringSize) {\nfloat featheringStart = clamp(0.5 - featheringSize / size, 0.0, 0.5);\nif (dist > featheringStart) {\ncolor *= 1.0 - (dist - featheringStart) / (0.5 - featheringStart);\n}\nreturn color;\n}",imagery:{"imagery.frag":"precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform float u_Min;\nuniform float u_Max;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nfloat getIntensity(float v) {\nreturn u_Min + v * (u_Max - u_Min);\n}\nvoid main(void) {\nvec4 sampled = texture2D(u_texture, v_texcoord);\nfloat intensity = getIntensity(sampled.r);\ngl_FragColor = getColor(intensity);\ngl_FragColor.a *= getOpacity(sampled.r);\ngl_FragColor.a *= sampled.a;\ngl_FragColor.rgb *= gl_FragColor.a;\n}","imagery.vert":"attribute vec2 a_position;\nattribute vec2 a_texcoord;\nuniform mat3 u_dvsMat3;\nvarying vec2 v_texcoord;\nvoid main(void) {\nvec2 xy = (u_dvsMat3 * vec3(a_position, 1.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},particles:{"particles.frag":"precision highp float;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/getFragmentColor.glsl>\nvoid main(void) {\ngl_FragColor = getFragmentColor(v_color, length(v_texcoord - 0.5), v_size, u_featheringSize);\n}","particles.vert":"attribute vec4 a_xyts0;\nattribute vec4 a_xyts1;\nattribute vec4 a_typeIdDurationSeed;\nattribute vec4 a_extrudeInfo;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/vv.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nvec2 position0 = a_xyts0.xy;\nfloat t0 = a_xyts0.z;\nfloat speed0 = a_xyts0.w;\nvec2 position1 = a_xyts1.xy;\nfloat t1 = a_xyts1.z;\nfloat speed1 = a_xyts1.w;\nfloat type = a_typeIdDurationSeed.x;\nfloat id = a_typeIdDurationSeed.y;\nfloat duration = a_typeIdDurationSeed.z;\nfloat seed = a_typeIdDurationSeed.w;\nvec2 e0 = a_extrudeInfo.xy;\nvec2 e1 = a_extrudeInfo.zw;\nfloat animationPeriod = duration + u_trailLength;\nfloat scaledTime = u_time * u_flowSpeed;\nfloat randomizedTime = scaledTime + seed * animationPeriod;\nfloat t = mod(randomizedTime, animationPeriod);\nfloat fUnclamped = (t - t0) / (t1 - t0);\nfloat f = clamp(fUnclamped, 0.0, 1.0);\nfloat clampedTime = mix(t0, t1, f);\nfloat speed = mix(speed0, speed1, f);\nvec2 extrude;\nvec2 position;\nfloat fadeOpacity;\nfloat introOpacity;\nif (type == 2.0) {\nif (fUnclamped < 0.0 || (fUnclamped > 1.0 && t1 != duration)) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nvec2 ortho = mix(e0, e1, f);\nvec2 parallel;\nparallel = normalize(position1 - position0) * 0.5;\nif (id == 1.0) {\nextrude = ortho;\nv_texcoord = vec2(0.5, 0.0);\n} else if (id == 2.0) {\nextrude = -ortho;\nv_texcoord = vec2(0.5, 1.0);\n} else if (id == 3.0) {\nextrude = ortho + parallel;\nv_texcoord = vec2(1.0, 0.0);\n} else if (id == 4.0) {\nextrude = -ortho + parallel;\nv_texcoord = vec2(1.0, 1.0);\n}\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else {\nif (fUnclamped < 0.0) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nif (id == 1.0) {\nextrude = e0;\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 2.0) {\nextrude = -e0;\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 3.0) {\nextrude = mix(e0, e1, f);\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else if (id == 4.0) {\nextrude = -mix(e0, e1, f);\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n}\n}\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(extrude * v_size, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_color.a *= fadeOpacity;\nv_color.a *= mix(1.0, introOpacity, u_introFade);\nv_color.rgb *= v_color.a;\n}"},streamlines:{"streamlines.frag":"precision highp float;\nvarying float v_side;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_size;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/getFragmentColor.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nfloat t = mod(v_timeSeed * (v_totalTime + u_trailLength) + u_time * u_flowSpeed, v_totalTime + u_trailLength) - v_time;\nvec4 color = v_color * step(0.0, t) * getFadeOpacity(t / u_trailLength);\ncolor *= mix(1.0, 1.0 - exp(-v_time), u_introFade);\ngl_FragColor = getFragmentColor(color, length((v_side + 1.0) / 2.0 - 0.5), v_size, u_featheringSize);\n}","streamlines.vert":"attribute vec3 a_positionAndSide;\nattribute vec3 a_timeInfo;\nattribute vec2 a_extrude;\nattribute float a_speed;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_side;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nvoid main(void) {\nvec4 lineColor = getColor(a_speed);\nfloat lineOpacity = getOpacity(a_speed);\nfloat lineSize = getSize(a_speed);\nvec2 position = a_positionAndSide.xy;\nv_side = a_positionAndSide.z;\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(a_extrude * lineSize, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_time = a_timeInfo.x;\nv_totalTime = a_timeInfo.y;\nv_timeSeed = a_timeInfo.z;\nv_color = lineColor;\nv_color.a *= lineOpacity;\nv_color.rgb *= v_color.a;\nv_size = lineSize;\n}"},"vv.glsl":"#define MAX_STOPS 8\n#ifdef VV_COLOR\nuniform float u_color_stops[MAX_STOPS];\nuniform vec4 u_color_values[MAX_STOPS];\nuniform int u_color_count;\n#else\nuniform vec4 u_color;\n#endif\n#ifdef VV_OPACITY\nuniform float u_opacity_stops[MAX_STOPS];\nuniform float u_opacity_values[MAX_STOPS];\nuniform int u_opacity_count;\n#else\nuniform float u_opacity;\n#endif\n#ifdef VV_SIZE\nuniform float u_size_stops[MAX_STOPS];\nuniform float u_size_values[MAX_STOPS];\nuniform int u_size_count;\n#else\nuniform float u_size;\n#endif\nuniform float u_featheringOffset;\nvec4 getColor(float x) {\n#ifdef VV_COLOR\nvec4 color = u_color_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_color_count) {\nbreak;\n}\nfloat x1 = u_color_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_color_stops[i];\nvec4 y2 = u_color_values[i];\nif (x < x2) {\nvec4 y1 = u_color_values[i - 1];\ncolor = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\ncolor = y2;\n}\n}\n}\n#else\nvec4 color = u_color;\n#endif\nreturn color;\n}\nfloat getOpacity(float x) {\n#ifdef VV_OPACITY\nfloat opacity = u_opacity_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_opacity_count) {\nbreak;\n}\nfloat x1 = u_opacity_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_opacity_stops[i];\nfloat y2 = u_opacity_values[i];\nif (x < x2) {\nfloat y1 = u_opacity_values[i - 1];\nopacity = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nopacity = y2;\n}\n}\n}\n#else\nfloat opacity = u_opacity;\n#endif\nreturn opacity;\n}\nfloat getSize(float x) {\n#ifdef VV_SIZE\nfloat size = u_size_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_size_count) {\nbreak;\n}\nfloat x1 = u_size_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_size_stops[i];\nfloat y2 = u_size_values[i];\nif (x < x2) {\nfloat y1 = u_size_values[i - 1];\nsize = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nsize = y2;\n}\n}\n}\n#else\nfloat size = u_size;\n#endif\nreturn size + 2.0 * u_featheringSize * u_featheringOffset;\n}"},magdir:{"magdir.frag":"precision mediump float;\nvarying vec4 v_color;\nuniform lowp float u_opacity;\nvoid main() {\ngl_FragColor = v_color * u_opacity;\n}","magdir.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nuniform float u_rotation;\nuniform vec4 u_colors[12];\nvarying vec4 v_color;\nvoid main()\n{\nfloat angle = a_offset.y + u_rotation;\n#ifndef ROTATION_GEOGRAPHIC\nangle = 3.14159265359 * 2.0 - angle - 3.14159265359 / 2.0;\n#endif\nvec2 offset = vec2(cos(angle), sin(angle)) * a_offset.x;\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 pos = a_pos + offset * sizePercentage * u_symbolSize;\nv_color = u_colors[int(a_vv.x)];\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},reproject:{"reproject.frag":"precision mediump float;\nvarying vec2 v_texcoord;\n#include <raster/common/common.glsl>\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\ngl_FragColor = vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\n}","reproject.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_position;\ngl_Position = vec4(2.0 * (a_position - 0.5), 0.0, 1.0);\n}"},scalar:{"scalar.frag":"precision mediump float;\nuniform lowp float u_opacity;\nvarying vec2 v_pos;\nconst vec4 outlineColor = vec4(0.2, 0.2, 0.2, 1.0);\nconst float outlineSize = 0.02;\nconst float innerRadius = 0.25;\nconst float outerRadius = 0.42;\nconst float innerSquareLength = 0.15;\nvoid main() {\nmediump float dist = length(v_pos);\nmediump float fillalpha1 = smoothstep(outerRadius, outerRadius + outlineSize, dist);\nfillalpha1 *= (1.0-smoothstep(outerRadius + outlineSize, outerRadius + 0.1 + outlineSize, dist));\n#ifdef INNER_CIRCLE\nmediump float fillalpha2 = smoothstep(innerRadius, innerRadius + outlineSize, dist);\nfillalpha2 *= (1.0-smoothstep(innerRadius + outlineSize, innerRadius + 0.1 + outlineSize, dist));\n#else\nmediump float fillalpha2 = (abs(v_pos.x) < innerSquareLength ? 1.0 : 0.0) * (abs(v_pos.y) < innerSquareLength ? 1.0 : 0.0);\n#endif\ngl_FragColor = (fillalpha2 + fillalpha1) * outlineColor * u_opacity;\n}","scalar.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nvarying vec2 v_pos;\nvoid main()\n{\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 size = u_symbolSize * sizePercentage;\nvec2 pos = a_pos + a_offset * size;\nv_pos = a_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"}},stencil:{"stencil.frag":"void main() {\ngl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nuniform mat3 u_worldExtent;\nvoid main() {\ngl_Position = vec4(u_worldExtent * vec3(a_pos, 1.0), 1.0);\n}"},test:{"TestShader.common.glsl":"#ifndef RETURN_RED\nvarying    vec4      v_color;\n#endif\nvarying    vec2      v_offset;","TestShader.frag":"precision highp float;\n#include <test/TestShader.common.glsl>\nvoid main() {\nif (v_offset.x > -.5 && v_offset.y > -.5 && v_offset.x < .5 && v_offset.y < .5) {\ndiscard;\n}\n#ifdef RETURN_RED\ngl_FragColor = vec4(1., 0., 0., 1.);\n#else\ngl_FragColor = v_color;\n#endif\n}","TestShader.vert":"const float POS_PRECISION_FACTOR = 10.;\nconst float OFFSET_PRECISION_FACTOR = 10.;\nconst float SIZE_PRECISION_FACTOR = 10.;\nattribute  vec2      a_pos_packed;\nattribute  vec2      a_offset_packed;\nattribute  float     a_size_packed;\n#ifdef DATA_DRIVEN_COLOR\nconst float u_dataDrivenColor_validValues[4] = float[4](0., 0., 1., 0.);\nuniform    vec4      u_dataDrivenColor_colorFallback;\nuniform    vec4      u_dataDrivenColor_color;\n#endif\nuniform    float     u_view_zoomLevel;\n#include <test/TestShader.common.glsl>\n#ifdef DATA_DRIVEN_COLOR\nvec4 getColor(float value) {\nint index = -1;\nfor (int i = 0; i < 4; i++) {\nif (u_dataDrivenColor_validValues[i] == value) {\nindex = i;\nbreak;\n}\n}\nif (index == -1) {\nreturn u_dataDrivenColor_colorFallback;\n}\nreturn u_dataDrivenColor_color;\n}\n#endif\nvoid main() {\nvec2  a_pos = a_pos_packed / POS_PRECISION_FACTOR;\nvec2  a_offset = a_offset_packed / OFFSET_PRECISION_FACTOR;\nfloat a_size = a_size_packed / SIZE_PRECISION_FACTOR;\nvec4 color = vec4(1., 0., 0., 1.);\n#ifdef DATA_DRIVEN_COLOR\ncolor = getColor(1.);\n#endif\nvec2 offsetScaled = a_offset * a_size;\nvec4 pos = vec4(a_pos.xy + offsetScaled, 0., 1.);\ngl_Position = pos;\n#ifndef RETURN_RED\nv_color = color;\n#endif\nv_offset = a_offset;\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\nlowp vec4 color = texture2D(u_texture, v_tex);\ncolor.rgb *= color.a;\ngl_FragColor = color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\nmediump vec2 offset = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\nvec3 v_pos = u_dvsMat3 * vec3(offset, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\nv_tex = a_pos;\n}"},util:{"atan2.glsl":"float atan2(in float y, in float x) {\nfloat t0, t1, t2, t3, t4;\nt3 = abs(x);\nt1 = abs(y);\nt0 = max(t3, t1);\nt1 = min(t3, t1);\nt3 = 1.0 / t0;\nt3 = t1 * t3;\nt4 = t3 * t3;\nt0 =         - 0.013480470;\nt0 = t0 * t4 + 0.057477314;\nt0 = t0 * t4 - 0.121239071;\nt0 = t0 * t4 + 0.195635925;\nt0 = t0 * t4 - 0.332994597;\nt0 = t0 * t4 + 0.999995630;\nt3 = t0 * t3;\nt3 = (abs(y) > abs(x)) ? 1.570796327 - t3 : t3;\nt3 = x < 0.0 ?  3.141592654 - t3 : t3;\nt3 = y < 0.0 ? -t3 : t3;\nreturn t3;\n}","encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}"}};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js
var ShaderCompiler = __webpack_require__(29638);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(r){return function(e){let o=r;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}}const t=new ShaderCompiler/* ShaderCompiler */.Z(o(e));function n(r){return t.resolveIncludes(r)}


/***/ }),

/***/ 84194:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function r(r){return"url"in r&&"urlHash"in r?{...r,url:""}:r}


/***/ }),

/***/ 1314:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ n),
/* harmony export */   j: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let i=0;i<o.length;i++)o[i]=n.deserialize(e,r);return o}


/***/ }),

/***/ 70835:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ o),
/* harmony export */   b: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=50,t=5;


/***/ }),

/***/ 60143:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ge: () => (/* binding */ l),
/* harmony export */   WT: () => (/* binding */ u),
/* harmony export */   XV: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97066);
/* harmony import */ var _geometry_Polyline_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42238);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78983);
/* harmony import */ var _geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22256);
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(65231);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87926);
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96082);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(70835);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(e,t){return Math.log(e)/Math.log(t)}function l(e,t,r){const o=1===e?10:e;return o**(r?Math.round(a(_constants_js__WEBPACK_IMPORTED_MODULE_8__/* .pixelsPerCell */ .X/t,o)):0)}function f(e){const{isGeographic:t,isWebMercator:r}=e;return!t&&!r}function u(c,a,l){const u="number"==typeof c?null:c,y=l??u?.spatialReference;if(null==y||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isValid */ .fn)(y)||f(y))return (0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnitForSR */ .GA)(y);let g=u?.x??c,j=u?.y??a;const h=1/Math.sqrt(2);let M=g+h,x=j+h;const{isWebMercator:R,isGeographic:U}=y;let b=U&&!(0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isSupported */ .TT)(y)?_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84:y;if(R){let e=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({x:g,y:j,spatialReference:y});(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .webMercatorToGeographic */ .ci)(e,!0,e),g=e.x,j=e.y,e=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({x:M,y:x,spatialReference:y}),(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .webMercatorToGeographic */ .ci)(e,!0,e),M=e.x,x=e.y,b=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84}const w=new _geometry_Polyline_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A({paths:[[[g,j],[M,x]]],spatialReference:b}),G=(0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .straightLineDensify */ .XX)(w,10);let W;try{[W]=(0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .geodesicLengths */ .l1)([G],"meters")}catch{return (0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnitForSR */ .GA)(y)}return W}


/***/ }),

/***/ 14844:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(32597);
/* harmony import */ var _support_FeatureSetReaderJSON_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51747);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{static{this.Shared=new r}getObjectId(t){return t.getObjectId()}getAttributes(t){return t.readAttributes()}getAttribute(t,e){return t.readAttribute(e)}getAttributeAsTimestamp(t,e){return t.readAttributeAsTimestamp(e)}cloneWithGeometry(r,a){const i=r.readAttributes(),s=new _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_0__/* .OptimizedFeature */ .Om(a,i,null,r.getObjectId(),r.getDisplayId()),d=_support_FeatureSetReaderJSON_js__WEBPACK_IMPORTED_MODULE_1__/* .FeatureSetReaderJSON */ .K.fromOptimizedFeatures([s],r.metadata);return d.setIndex(0),d}getGeometry(t){return t.readGeometryWorldSpace()}getCentroid(t,e){return t.readCentroidForDisplay()}}


/***/ }),

/***/ 77013:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Jz: () => (/* binding */ d),
/* harmony export */   T9: () => (/* binding */ a),
/* harmony export */   uH: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports createDotDensityBindings, createHeatmapBindings, createPieChartBindings */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21822);
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79432);
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63838);
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75228);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(e,i){return{type:"simple",filters:i,capabilities:{maxTextureSize:(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__/* .getWebGLCapabilities */ .C)().maxTextureSize},bindings:u(e)}}function o(e,n){const t=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__/* .getWebGLCapabilities */ .C)();return{type:"multi",target:"feature",keyField:_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .internalTrackPartField */ .EA,filters:n,capabilities:{maxTextureSize:t.maxTextureSize},bindings:{[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.TrackLine]:u(e.trackLines.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.LatestObservation]:u(e.latestObservations.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.PreviousObservation]:u(e.previousObservations.renderer)}}}function l(e){switch(e){case"opacity":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.OPACITY;case"color":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.COLOR;case"rotation":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.ROTATION;case"size":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.SIZE;default:return null}}function u(e){if(!e)return[];switch(e.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":return d(e);case"dot-density":return c(e);case"pie-chart":return p(e);case"heatmap":return f(e)}}function c(e){const i=[];for(const r of e.attributes)i.push({binding:i.length,expression:r.valueExpression,field:r.field});return i}function p(e){const i=d(e);let r=4;for(const n of e.attributes)i.push({binding:r++,expression:n.valueExpression,field:n.field});return i}function f({valueExpression:e,field:i}){return e||i?[{binding:0,expression:e,field:i}]:[]}function d(i){if(!("visualVariables"in i)||!i.visualVariables?.length)return[];return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .simplifyVisualVariables */ .R)(i.visualVariables).map((e=>y(e))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru)}function m(e){return"$view.scale"===e.valueExpression?null:{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression,valueRepresentation:e.valueRepresentation}}function b(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}function x(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}function v(e){return{binding:l(e.type),expression:e.valueExpression,field:e.field}}function y(e){switch(e.type){case"size":return m(e);case"color":return b(e);case"opacity":return x(e);case"rotation":return v(e)}}


/***/ }),

/***/ 21857:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dk: () => (/* binding */ z),
/* harmony export */   K4: () => (/* binding */ y),
/* harmony export */   j0: () => (/* binding */ x)
/* harmony export */ });
/* unused harmony exports createVisualVariableColor, createVisualVariableOpacity, createVisualVariableRotation, createVisualVariableSizeMinMaxValue, createVisualVariableSizeStops, createVisualVariableSizeUnitValue */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92976);
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10301);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43556);
/* harmony import */ var _engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32520);
/* harmony import */ var _schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21059);
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63838);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=1.25,o=128,c=128;function p(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(a,8),l=i.map((({value:e})=>e)),s=i.map((({color:e})=>(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .premultiplyColor */ .p)(e)));return{values:l,colors:s}}function v(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(a,8);return{opacityValues:i.map((({value:e})=>e)),opacities:i.map((({opacity:e})=>e))}}function V(e){return{rotationType:"geographic"===e.rotationType?_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__/* .RotationType */ .H_.Geographic:_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__/* .RotationType */ .H_.Arithmatic}}function f(a){if(!a.stops?.length)return null;if(a.stops.some((e=>e.useMaxValue||e.useMinValue)))return(i,s)=>{const r=i.statisticsByLevel.get(s.key.level),u=a.stops.map((i=>({value:i.useMaxValue?r?.get(a.field)?.maxValue??0:i.useMinValue?r?.get(a.field)?.minValue??0:i.value,size:i.size?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(i.size):_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__/* .nanMagicNumber */ .qM}))).sort(((e,a)=>e.value-a.value)),n=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(u,8);return{values:n.map((({value:e})=>e)),sizes:n.map((({size:e})=>e))}};const i=a.stops.sort(((e,a)=>e.value-a.value)),s=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(i,8);return{values:s.map((({value:e})=>e)),sizes:s.map((({size:a})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(a)))}}function m(e){return l=>{const{state:s}=l;return{unitValueToPixelsRatio:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerUnitForSR */ .GA)(s.spatialReference)/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .meterIn */ .j[e.valueUnit??"meters"]/s.resolution}}}function S(e,a){const i=a.length;if(e<a[0].value||1===i)return a[0].size;for(let l=1;l<i;l++)if(e<a[l].value){const i=(e-a[l-1].value)/(a[l].value-a[l-1].value);return a[l-1].size+i*(a[l].size-a[l-1].size)}return a[i-1].size}function b(a){const{minDataValue:i,maxDataValue:l,minSize:s,maxSize:t}=a;if("object"==typeof s&&"object"==typeof t)return(a,r)=>{const u=a.state.scale,n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(S(u,s.stops)),o=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(S(u,t.stops));return{minMaxValueAndSize:[i,l,n,o]}};if("object"==typeof s||"object"==typeof t)throw new Error("InternalError: Found a partial VisualVariableSizeMinMaxValue");return{minMaxValueAndSize:[i,l,(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(s),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(t)]}}const z={visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:null,visualVariableSizeStops:null,visualVariableSizeScaleStops:null,visualVariableSizeOutlineScaleStops:null,visualVariableSizeUnitValue:null,visualVariableSizeMinMaxValue:null};function x(e,a=c,i=n){if(e.visualVariableSizeMinMaxValue)return"function"==typeof e.visualVariableSizeMinMaxValue?o:Math.max(e.visualVariableSizeMinMaxValue.minMaxValueAndSize[3]*i,a);if(e.visualVariableSizeScaleStops){if("function"==typeof e.visualVariableSizeScaleStops)return o;const l=e.visualVariableSizeScaleStops.sizes;return Math.max(l[l.length-1]*i,a)}if(e.visualVariableSizeStops){if("function"==typeof e.visualVariableSizeStops)return o;const l=e.visualVariableSizeStops.sizes;return Math.max(l[l.length-1]*i,a)}return e.visualVariableSizeUnitValue?2*o:0}function y(e){const a={...z};if(!e||!("visualVariables"in e)||!e.visualVariables)return a;for(const i of (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .simplifyVisualVariables */ .R)(e.visualVariables))switch(i.type){case"color":a.visualVariableColor=p(i);break;case"opacity":a.visualVariableOpacity=v(i);break;case"rotation":a.visualVariableRotation=V(i);break;case"size":switch(h(i)){case"field-stops":a.visualVariableSizeStops=f(i);break;case"scale-stops":"outline"===i.target?a.visualVariableSizeOutlineScaleStops=f(i):a.visualVariableSizeScaleStops=f(i);break;case"min-max":a.visualVariableSizeMinMaxValue=b(i);break;case"unit-value":a.visualVariableSizeUnitValue=m(i)}break}return a}function h(e){return"number"==typeof e.minDataValue&&"number"==typeof e.maxDataValue&&null!=e.minSize&&null!=e.maxSize?"min-max":"$view.scale"===e?.valueExpression&&Array.isArray(e.stops)?"scale-stops":null==e.field&&"$view.scale"===e?.valueExpression||!(Array.isArray(e.stops)||"levels"in e&&e.levels)?null!=e.field||"$view.scale"!==e?.valueExpression?"unit-value":null:"field-stops"}


/***/ }),

/***/ 21059:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ t),
/* harmony export */   r: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,t){const r=n.slice(0,t),e=t-r.length;for(let o=0;o<e;o++){const n=r[r.length-1];r.push(n)}return r}function t(n){if(!n)return[0,0,0,0];const{r:t,g:r,b:e,a:o}=n;return[t*(o/255),r*(o/255),e*(o/255),o]}


/***/ }),

/***/ 83810:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dr: () => (/* binding */ C),
/* harmony export */   EM: () => (/* binding */ R),
/* harmony export */   Gn: () => (/* binding */ h),
/* harmony export */   IQ: () => (/* binding */ L),
/* harmony export */   Jk: () => (/* binding */ u),
/* harmony export */   KK: () => (/* binding */ p),
/* harmony export */   NZ: () => (/* binding */ P),
/* harmony export */   TY: () => (/* binding */ s),
/* harmony export */   Yg: () => (/* binding */ z),
/* harmony export */   Zi: () => (/* binding */ S),
/* harmony export */   gF: () => (/* binding */ m),
/* harmony export */   mp: () => (/* binding */ g),
/* harmony export */   oF: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48002);
/* harmony import */ var _symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7591);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63643);
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84022);
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21857);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54232);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e){return e.minScale||e.maxScale?{minScale:e.minScale??0,maxScale:e.maxScale??0}:null}function c(e){if(null==e)return null;if(Array.isArray(e)){const[a,i,l,t]=e;return[a,i,l,255*t]}return"string"==typeof e?e:{...e,defaultValue:c(e?.defaultValue)}}async function u(a,i){const{cimResourceManager:l,cimAnalyzer:t,scaleExpression:n}=i.schemaOptions;await Promise.all(_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper */ .wp.fetchResources(a.symbol,l,[]));const o=t.analyzeSymbolReference(a,!1),r={scaleInfo:s(a),scaleExpression:n},c=[];for(const e of o)switch(e.type){case"marker":c.push(...f(e,i,r));break;case"fill":c.push(...v(e,i,r));break;case"outlineFill":c.push(...V(e,i,r));break;case"gradientFill":c.push(...y(e,i,r));break;case"line":c.push(...I(e,i,r));break;case"gradientStroke":c.push(...k(e,i,r));break;case"text":c.push(...A(e,i,r))}return c}function f(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue,visualVariableRotation:t.visualVariableRotation};if(e.animationParams){const{hasShiftAnimation:a}=e.animationParams.params,t=a?_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedMarkerShift:_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedMarker;return m(r.ensureInstance(t,{uniforms:s,optionalAttributes:{zoomRange:!0,value1Position2Value2:e.animationParams.params.hasShiftAnimation,lineLength:a}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return S(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.marker,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,t,i)}function m(e,a,l,t){if(!a.animationParams)return[];return[e.createMeshInfo({pixelDimensions:a.pixelDimensions,texelDimensions:a.texelDimensions,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,sprite:(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getAnimatedTechniqueSprite */ .xi)(a),animations:a.animationParams,scaleInfo:t.scaleInfo,scaleSymbolsProportionally:a.scaleSymbolsProportionally,strokeWidth:a.outlineWidth,isMapAligned:a.alignment===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.MAP,colorLocked:a.colorLocked,isStroke:a.isStroke,baseSize:a.baseSize,placement:a.markerPlacement,referenceSize:a.referenceSize,angleToLine:!!a.markerPlacement&&(a.markerPlacement.placement&&"angleToLine"in a.markerPlacement.placement&&a.markerPlacement.placement.angleToLine),sizeRatio:a.sizeRatio,patternHeight:null})]}function p(e,a,i,l){if(!a.animationParams)return[];return[e.createMeshInfo({effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,sprite:(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getAnimatedTechniqueSprite */ .xi)(a),animations:a.animationParams,scaleInfo:l.scaleInfo,scaleSymbolsProportionally:!1,strokeWidth:1,isMapAligned:!0,colorLocked:a.colorLocked||!1,isStroke:!1,baseSize:"width"in a?a.width:-1,placement:null,referenceSize:2,angleToLine:!1,sizeRatio:1,patternHeight:"fill"===a.type&&a.spriteRasterizationParam?a.height:null,joinType:"join"in a?a.join:"round",capType:"cap"in a?a.cap:"round",miterLimit:"miterLimit"in a&&a.miterLimit||2})]}function S(e,i,l,{scaleInfo:n,scaleExpression:o}){const s=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .hasSizeVVUniform */ .IY)(l);return[e.createMeshInfo({size:i.size,scaleX:i.scaleX,anchorX:i.anchorPoint.x,anchorY:i.anchorPoint.y,angle:i.rotation,color:c(i.color)??[0,0,0,0],colorLocked:i.colorLocked,frameHeight:i.frameHeight,widthRatio:i.widthRatio,scaleInfo:n,offsetX:i.offsetX,offsetY:i.offsetY,outlineColor:c(i.outlineColor)??[0,0,0,0],outlineSize:i.outlineWidth,referenceSize:i.referenceSize||_symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__/* .defaultCIMValues */ .D.CIMVectorMarker.size,rotateClockwise:i.rotateClockwise,scaleFactor:o??1,sizeRatio:i.sizeRatio,alignment:i.alignment,isAbsoluteAnchorPoint:i.isAbsoluteAnchorPoint,scaleSymbolsProportionally:i.scaleSymbolsProportionally,sprite:i.spriteRasterizationParam,hasSizeVV:s,placement:i.markerPlacement,effects:i.effects?{type:"cim-effect-infos",effectInfos:i.effects}:null,transforms:i.transform,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .getMaxSizeVVSize */ .j0)(l)})]}function b(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s={visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity};if(e.animationParams){const a=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedFill;return p(r.ensureInstance(a,{uniforms:{...s,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableSizeScaleStops:null,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return h(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.fill,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function V(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return z(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.outlineFill,{uniforms:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function z(e,a,i){const l=c(a.color)??[0,0,0,0],t=c(a.outlineColor)??[0,0,0,0];return[e.createMeshInfo({color:l,outlineColor:t,width:a.outlineWidth,referenceWidth:a.referenceWidth,capType:a.cap,joinType:a.join,miterLimit:a.miterLimit,outlineUsesColorVV:!a.outlineColorLocked,hasSizeVV:!1,scaleInfo:i.scaleInfo,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,outlineEffects:a.outlineEffects?{type:"cim-effect-infos",effectInfos:a.outlineEffects}:null})]}function h(e,a,{scaleInfo:i}){return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function v(e,a,i){if(!e.spriteRasterizationParam)return b(e,a,i);const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s={visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity};if(e.animationParams){const a=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedFill;return p(r.ensureInstance(a,{uniforms:{...s,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableSizeScaleStops:null,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return d(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.complexFill,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,null!=t.visualVariableColor,i)}function d(e,a,i,{scaleInfo:l}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const t=!!a.hasUnresolvedReplacementColor&&(!i||a.colorLocked),n=a.sampleAlphaOnly&&!t,o=a.spriteRasterizationParam;return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],height:a.height,aspectRatio:a.scaleX,offsetX:a.offsetX,offsetY:a.offsetY,scaleX:1,scaleY:1,angle:a.angle,applyRandomOffset:a.applyRandomOffset,sampleAlphaOnly:n,scaleProportionally:"CIMHatchFill"===o.resource.type,sprite:o,scaleInfo:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function y(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return g(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.gradientFill,{uniforms:{visualVariableColor:null,visualVariableOpacity:t.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function g(e,a,{scaleInfo:i}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const l=a.spriteRasterizationParam;return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],angle:a.angle,gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:l,scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function I(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue};if(e.animationParams){const{hasShiftAnimation:a}=e.animationParams.params,t=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedLine;return p(r.ensureInstance(t,{uniforms:{...s,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:a}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}const c={uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}},u=!!(s.visualVariableSizeMinMaxValue||s.visualVariableSizeScaleStops||s.visualVariableSizeStops||s.visualVariableSizeUnitValue);if(!e.spriteRasterizationParam){return P(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.line,c),e,u,i)}return R(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.texturedLine,c),e,u,i)}function M(e,a,{scaleInfo:i}){return{color:c(e.color)??[0,0,0,0],width:e.width,referenceWidth:e.referenceWidth,capType:e.cap,joinType:e.join,miterLimit:e.miterLimit,scaleInfo:i,hasSizeVV:a,effects:e.effects?{type:"cim-effect-infos",effectInfos:e.effects}:null}}function P(e,a,i,l){if(a.spriteRasterizationParam)throw new Error("InternalError: Sprite should not be defined");const t=M(a,i,l);return[e.createMeshInfo(t)]}function R(e,a,i,l){const{spriteRasterizationParam:t,scaleDash:n,sampleAlphaOnly:o}=a;if(!t)throw new Error("InternalError: Sprite should be defined");return[e.createMeshInfo({...M(a,i,l),offsetAlongLine:a.offsetAlongLine??0,shouldScaleDash:n??!1,shouldSampleAlphaOnly:o,isSDF:"CIMPictureStroke"!==t.resource.type&&"CIMGradientStroke"!==t.resource.type,sprite:t})]}function k(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o;return C(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.gradientStroke,{uniforms:e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:null,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function C(e,a,i){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const l=a.spriteRasterizationParam;return[e.createMeshInfo({...M(a,!1,i),gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function A(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return L(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.text,{uniforms:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableRotation:t.visualVariableRotation,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo,referenceSymbol:!1,clipAngle:!1,visibility:!1}}),e,t,i)}function L(e,a,i,{scaleInfo:l,scaleExpression:n}){return[e.createMeshInfo({boxBackgroundColor:c(a.backgroundColor),boxBorderLineColor:c(a.borderLineColor),boxBorderLineSize:a.borderLineWidth??0,color:c(a.color)??[0,0,0,0],offsetX:a.offsetX,offsetY:a.offsetY,postAngle:a.angle,fontSize:a.size,referenceSize:a.referenceSize,decoration:a.decoration,haloColor:c(a.haloColor)??[0,0,0,0],haloSize:a.haloSize??0,outlineColor:c(a.outlineColor)??[0,0,0,0],outlineSize:a.outlineSize,lineWidth:a.lineWidth||512,lineHeightRatio:1,horizontalAlignment:a.horizontalAlignment??"center",verticalAlignment:a.verticalAlignment??"baseline",useCIMAngleBehavior:!1,glyphs:a.textRasterizationParam,scaleInfo:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,placement:a.markerPlacement,transforms:a.transform,scaleFactor:n??1,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .getMaxSizeVVSize */ .j0)(i),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null,labelClassId:-1})]}


/***/ }),

/***/ 54232:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IY: () => (/* binding */ e),
/* harmony export */   N7: () => (/* binding */ a),
/* harmony export */   xi: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63643);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(A){return!!(A.visualVariableSizeMinMaxValue||A.visualVariableSizeScaleStops||A.visualVariableSizeStops||A.visualVariableSizeUnitValue||A.visualVariableSizeOutlineScaleStops)}function a(A){return!!A.visualVariableRotation}function i(e){return e.spriteRasterizationParam?e.spriteRasterizationParam:{type:"sprite-rasterization-param",resource:{type:"CIMPictureMarker",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAJOgAACToAYJjBRwAAAAsSURBVEhL7c0xAQAwDASh+jf9lcCU7TDA27ECKqACKqACKqACKqACKqDjYPuLVfSmMPfafQAAAABJRU5ErkJggg==",size:16,invertBackfaceTexture:!1,scaleX:1,textureFilter:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureFilter */ .O$.Picture},overrides:[]}}


/***/ }),

/***/ 21528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{destroy(){}}


/***/ }),

/***/ 46882:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ x)
});

// UNUSED EXPORTS: getVisualVariableSizeValueRepresentationRatio

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js
var diffUtils = __webpack_require__(64442);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/ArcadeExpression.js
var ArcadeExpression = __webpack_require__(46709);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js
var constants = __webpack_require__(32520);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/debug.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=(n,l)=>n&&((...n)=>l.warn("DEBUG:",...n))||(()=>null),l=!1;

;// ../node_modules/@arcgis/core/views/2d/layers/features/support/DisplayIdGenerator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(e){this.data=e,this._referenceCount=0}increment(){this._referenceCount+=1}decrement(){this._referenceCount-=1}empty(){return 0===this._referenceCount}}class s{constructor(){this._freeIdsGenerationA=[],this._freeIdsGenerationB=[],this._idCounter=1,this._freeIds=this._freeIdsGenerationA,this._objectIdToDisplayId=new Map}createIdForObjectId(s){let r=this._objectIdToDisplayId.get(s);return r?r.increment():(r=new t((0,DisplayId/* createDisplayId */.Ss)(this._getFreeId(),!1)),r.increment(),this._objectIdToDisplayId.set(s,r)),r.data}releaseIdForObjectId(e){const t=this._objectIdToDisplayId.get(e);t&&(t.decrement(),t.empty()&&(this._objectIdToDisplayId.delete(e),this._freeIds.push(t.data)))}getDisplayIdForObjectId(e){const t=this._objectIdToDisplayId.get(e);return null!=t?t.data:null}releaseAll(){for(const e of this._objectIdToDisplayId.values())this._freeIds.push(e.data);this._objectIdToDisplayId.clear()}incrementGeneration(){this._freeIds=this._freeIds===this._freeIdsGenerationA?this._freeIdsGenerationB:this._freeIdsGenerationA}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilterEvaluator.js
var FeatureFilterEvaluator = __webpack_require__(44277);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function _(t,e){if(!t||!e)return t;switch(e){case"radius":case"distance":return 2*t;case"diameter":case"width":return t;case"area":return Math.sqrt(t)}return t}const y=()=>Logger/* default */.A.getLogger("esri.views.layers.2d.features.support.AttributeStore"),m=n(l,y()),f={sharedArrayBuffer:(0,has/* default */.A)("esri-shared-array-buffer"),atomics:(0,has/* default */.A)("esri-atomics")};class b{constructor(t,e,i){this.size=0,this.texelSize=4,this.dirtyStart=0,this.dirtyEnd=0;const{pixelType:s,layout:r,textureOnly:a}=e;this.textureOnly=a||!1,this.pixelType=s,this.layout=r,this._resetRange(),this.size=t,this.isLocal=i,a||(this.data=this._initData(s,t))}get buffer(){return this.data?.buffer}unsetComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=this.data;for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){this.data[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){this.data[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=(0,DisplayId/* getDisplayIdTexel */.Q4)(t);return this.data[i*this.texelSize+e]}setData(t,e,i){const s=(0,DisplayId/* getDisplayIdTexel */.Q4)(t),r=1<<e;0!==(this.layout&r)?null!=this.data&&(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):y().error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t),i=this.data;e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!this.isLocal,r=this.pixelType,a=this.layout,n=this.data;return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e){const i=ArrayBuffer,s=(0,Utils/* getPixelArrayCtor */.Qz)(t),r=new s(new i(e*e*4*s.BYTES_PER_ELEMENT));for(let a=0;a<r.length;a+=4)r[a+1]=255;return r}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}class x{constructor(t){this._client=t,this._filters=[],this._blocks=new Array,this._attributeComputeInfo=null,this._abortController=new AbortController,this._size=definitions/* attributeStoreInitialSize */.TB,this._idsToHighlight=new Map,this._arcadeDependencies=new Set,this._initialized=!1,this.version=0,this._idGenerator=new s,this._epoch=1}destroy(){this._abortController.abort()}_initialize(){if(null!=this._blockDescriptors)return;const t=enums/* PixelType */.ld.FLOAT;m(`Creating AttributeStore ${f.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:enums/* PixelType */.ld.UNSIGNED_BYTE,layout:1},{pixelType:enums/* PixelType */.ld.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:enums/* PixelType */.ld.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:t,layout:15},{pixelType:enums/* PixelType */.ld.FLOAT,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}get hasHighlight(){return this._idsToHighlight.size>0}createDisplayIdForObjectId(t){return this._idGenerator.createIdForObjectId(t)}releaseDisplayIdForObjectId(t){return this._idGenerator.releaseIdForObjectId(t)}getDisplayIdForObjectId(t){return this._idGenerator.getDisplayIdForObjectId(t)}incrementDisplayIdGeneration(){this._idGenerator.incrementGeneration()}hasArcadeDependency(t){return this._arcadeDependencies.has(t)}releaseAllIds(){this._idGenerator.releaseAll()}async update(t,e,s,r=0){const a=(0,diffUtils/* diff */.Ui)(this._schema,t);if(this.version=r,a&&((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${r}] AttributeStore.update`,{changed:a}),this._schema=t,this._attributeComputeInfo=null,this._initialize(),null!=t))if(s&&(this._filters=await Promise.all(t.filters.map((t=>t?FeatureFilterEvaluator/* default */.A.create({geometryType:s.geometryType,hasM:!1,hasZ:!1,timeInfo:s.timeInfo,fieldsIndex:s.fieldsIndex,spatialReference:s.outSpatialReference,filterJSON:t}):null)))),"multi"!==t.type)this._attributeComputeInfo={type:"feature",map:new Map},await Promise.all(t.bindings.map((async t=>{const i=await this._bind(e,t);this._updateReferences(i)})));else{this._attributeComputeInfo={type:"multi",keyField:t.keyField,map:new Map};for(const i in t.bindings){const s=t.bindings[i];await Promise.all(s.map((async t=>{const s=await this._bind(e,t,parseInt(i,10));this._updateReferences(s)})))}}}setHighlight(t,e){let i=null;0===t.length&&0===e.length&&(i=this._getBlock(0),i.unsetComponentAllTexels(0,(1<<definitions/* maxHighlightReasons */.U5)-1));for(const{displayId:s,highlightFlags:r}of t){if(null==s||-1===s)continue;i||(i=this._getBlock(0),i.unsetComponentAllTexels(0,(1<<definitions/* maxHighlightReasons */.U5)-1));const t=(0,DisplayId/* getDisplayIdTexel */.Q4)(s);i.setComponent(0,r,[t])}this._idsToHighlight.clear();for(const{objectId:s,highlightFlags:r}of t)this._idsToHighlight.set(s,r);for(const{objectId:s,highlightFlags:r}of e)this._idsToHighlight.set(s,r)}setData(t,e,i,s){const r=(0,DisplayId/* getDisplayIdTexel */.Q4)(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlags(t){return this._idsToHighlight.get(t)||0}unsetAttributeData(t){const e=(0,DisplayId/* getDisplayIdTexel */.Q4)(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e,i,s){const r=(0,DisplayId/* getDisplayIdTexel */.Q4)(t);this._ensureSizeForTexel(r),this._getBlock(0).setData(r,0,this.getFilterFlags(e,s));const a=this._attributeComputeInfo,l=1,d=4;let c=null;a&&(c="multi"===a.type?a.map.get(e.readAttribute(a.keyField)):a.map,c?.size&&c.forEach(((t,s)=>{const a=s*l%d,o=Math.floor(s*l/d),c=this._getBlock(o+definitions/* AttributeDataType */.dV.VV);let u=t.field?.read(e,i);t.valueRepresentation&&(u=_(u,t.valueRepresentation));(null===u||isNaN(u)||u===1/0||u===-1/0)&&(u=constants/* nanMagicNumber */.qM),c.setData(r,a,u)})))}get epoch(){return this._epoch}sendUpdates(){const t=this._blocks.map((t=>null!=t?t.toMessage():null)),e=this._getInitArgs();(0,has/* default */.A)("esri-2d-log-updating")&&console.log("AttributeStore: _doSendUpdate.start"),this._client.update({initArgs:e,blockData:t,version:this.version,sendUpdateEpoch:this._epoch}),this._epoch+=1,(0,has/* default */.A)("esri-2d-log-updating")&&console.log("AttributeStore: _doSendUpdate.end")}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}async _bind(t,e,i){const s=await t.createComputedField(e),{valueRepresentation:r}=e,a=this._attributeComputeInfo;if("multi"===a.type){const t=a.map.get(i)??new Map;t.set(e.binding,{field:s,valueRepresentation:r}),a.map.set(i,t)}else a.map.set(e.binding,{field:s,valueRepresentation:r});return s}_getInitArgs(){return this._initialized?null:(this._initialized=!0,this._getBlock(definitions/* AttributeDataType */.dV.Animation),this._getBlock(definitions/* AttributeDataType */.dV.GPGPU),this._getBlock(definitions/* AttributeDataType */.dV.LocalTimeOrigin),{blockSize:this._size,blockDescriptors:this._blocks.map((t=>null!=t?{textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType}:null))})}_getBlock(t){const e=this._blocks[t];if(null!=e)return e;m(`Initializing AttributeBlock at index ${t}`);const i=new b(this._size,this._blockDescriptors[t],this._client.isLocal);return this._blocks[t]=i,this._initialized=!1,i}_expand(){if(this._size<this._schema.capabilities.maxTextureSize){const t=this._size<<=1;m("Expanding block size to",t,this._blocks);for(const e of this._blocks)e?.expand(t);return this._initialized=!1,this._size=t,0}return y().error(new Error/* default */.A("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}_updateReferences(t){(0,ArcadeExpression/* collectExpressionDependencies */.QY)(this._arcadeDependencies,t)}isVisible(t){return!!(this._getBlock(0).getData(t,0)&1<<definitions/* maxHighlightReasons */.U5)}getFilterFlags(t,e){let i=0;for(let r=0;r<this._filters.length;r++){const s=!!(1<<r),a=this._filters[r];i|=(!s||null==a||a.check(t,e)?1:0)<<r}let s=0;if(this._idsToHighlight.size){const e=t.getObjectId();s=this.getHighlightFlags(e)}return i<<definitions/* maxHighlightReasons */.U5|s}}


/***/ }),

/***/ 78832:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  l: () => (/* binding */ l)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingBox.js
var aaBoundingBox = __webpack_require__(4675);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/AComputedField.js
var AComputedField = __webpack_require__(21528);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/CachedField.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class CachedField_r extends AComputedField/* AComputedField */.L{constructor(e){super(),this._field=e}resize(e){throw new Error("Method not implemented.")}read(e,r){return e.readAttribute(this._field)}readWithDefault(e,r){return e.readAttribute(this._field)}hasArcadeDependency(e){return!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/ArcadeExpression.js
var ArcadeExpression = __webpack_require__(46709);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithCursor.js
var callExpressionWithCursor = __webpack_require__(64048);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedExpression.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ComputedExpression_c(e,t){const r=43758.5453*Math.sin(12.9898*e+78.233*t);return r-Math.floor(r)}class ComputedExpression_i extends AComputedField/* AComputedField */.L{static async create(r,s){const a=await (0,ArcadeExpression/* createRendererExpression */.Ad)(r,s.spatialReference),c=(0,string/* numericHash */.Wm)(r);return new ComputedExpression_i(a,c)}constructor(e,t){super(),this._compiled=e,this._cacheKey=t}resize(e){}read(e,t){return this.hasArcadeDependency("scale")||"system"!==t.$view.timeZone?(0,callExpressionWithCursor/* callExpressionWithCursor */.V4)(this._compiled,e,t):this._readCached(e,t)}readWithDefault(e,t,r){return this.hasArcadeDependency("scale")||"system"!==t.$view.timeZone?(0,callExpressionWithCursor/* callExpressionWithCursorWithDefault */.OP)(this._compiled,e,t,r):this._readWithDefaultCached(e,t,r)}hasArcadeDependency(e){return this._compiled?.references(e)??!1}_getCacheKey(e){if(!this._compiled?.references("timeProperties"))return this._cacheKey;const{currentStart:t,currentEnd:r}=e.$view.timeProperties;return this._cacheKey+ComputedExpression_c(t??1,r??1)}_readCached(e,t){if(e.setCache(this._getCacheKey(t)),e.hasCachedValue())return e.getCachedValue();const s=(0,callExpressionWithCursor/* callExpressionWithCursor */.V4)(this._compiled,e,t);return e.setCachedValue(s),s}_readWithDefaultCached(e,t,r){if(e.setCache(this._getCacheKey(t)),e.hasCachedValue())return e.getCachedValue();const a=(0,callExpressionWithCursor/* callExpressionWithCursorWithDefault */.OP)(this._compiled,e,t,r);return e.setCachedValue(a),a}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/intl/date.js
var date = __webpack_require__(76459);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/intl/number.js
var number = __webpack_require__(46930);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/domainUtils.js
var domainUtils = __webpack_require__(86003);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/fieldUtils.js
var fieldUtils = __webpack_require__(42453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/labelUtils.js
var labelUtils = __webpack_require__(74639);
;// ../node_modules/@arcgis/core/layers/support/labelFormatUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=()=>r.getLogger("esri.layers.support.labelFormatUtils"),w={type:"simple",evaluate:()=>null},y={getAttribute:(e,r)=>e.field(r)};async function b(r,n,o){if(!r||!r.symbol||!n)return w;const a=r.where,i=p(r);let l;if("arcade"===i.type){const r=d(i.expression),t=n.get(r);if(t&&(u(t)||s(t)||c(t)))l={type:"simple",evaluate(e){const r="attributes"in e?e.attributes?.[t.name]:e.field(t.name);return null==r?"":r.toString()}};else{const r=await m(i.expression,o);if(null==r)return w;l={type:"arcade",evaluate(t,o){try{const e="attributes"in t?r.repurposeFeature(t,n):t;e.contextTimeZone=o??null;const a=r.evaluate(e,{$view:{timeZone:o}});if(null!=a)return a.toString()}catch(a){g().error(new e("arcade-expression-error","Encountered an error when evaluating label expression for feature",{error:a,feature:t,expression:i}))}return null},needsHydrationToEvaluate:()=>null==f(i.expression)}}}else l={type:"simple",evaluate:e=>i.expression.replaceAll(/{[^}]*}/g,(r=>{const t=r.slice(1,-1),o=n.get(t);if(!o)return r;let a=null;return a="attributes"in e?e?.attributes?.[o.name]:e.field(o.name),null==a?"":h(a,o)}))};if(a){let r;try{r=await t(a,n)}catch(b){return g().error(new e("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:a,error:b})),w}const o=l.evaluate;l.evaluate=(t,n)=>{const i="attributes"in t?void 0:y;try{if(r.testFeature(t,i))return o(t,n)}catch(b){g().error(new e("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:a,feature:t,error:b}))}return null}}return l}function h(e,r){if(null==e)return"";const t=r.domain;if(t)if("codedValue"===t.type||"coded-value"===t.type){const r=e;for(const e of t.codedValues)if(e.code===r)return e.name}else if("range"===t.type){const{max:n,min:o}=(0,domainUtils/* getDomainRange */.A5)(r),a=+e;if(null!=o&&null!=n&&o<=a&&a<=n)return t.name}let u=e;return (0,fieldUtils/* isDateField */.vE)(r)?u=(0,date/* formatDate */.Yq)(u,(0,date/* convertDateFormatToIntlOptions */.J2)("short-date")):(0,fieldUtils/* isNumericField */.WA)(r)&&(u=(0,number/* formatNumber */.ZV)(+u)),u||""}

;// ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedLegacyLabelExpression.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends AComputedField/* AComputedField */.L{static async create(t,s){const l=(0,labelUtils/* sqlToTemplateString */.lc)(t);return new a((e=>l.replaceAll(/{[^}]*}/g,(t=>{const s=t.slice(1,-1),a=e.metadata.fieldsIndex.get(s);if(null==a)return t;const l=e.readAttribute(s);return null==l?"":h(l,a)}))))}constructor(r){super(),this._evaluator=r}resize(r){}read(r,e){return this._evaluator(r)}readWithDefault(r,e,s){const a=this._evaluator(r);return (0,callExpressionWithCursor/* isBadArcadeResult */.rZ)(a)?s:a}hasArcadeDependency(r){return!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/DictionaryTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DictionaryTemplate_r extends AComputedField/* AComputedField */.L{constructor(e,s){super(),this._template=e,this._parts=(0,utils/* analyzeTextParts */.gQ)(e.template,s)}resize(t){}read(t,s){return (0,utils/* getTextValuesFromFeatureHandle */._h)(t,this._parts,this._template.textCase)}readWithDefault(t,s,r){return (0,utils/* getTextValuesFromFeatureHandle */._h)(t,this._parts,this._template.textCase)}hasArcadeDependency(t){return!1}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/support/NormalizedField.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class NormalizedField_r extends AComputedField/* AComputedField */.L{constructor(e,r){super(),this._field=e,this._normalizationInfo=r}resize(e){throw new Error("Method not implemented.")}read(e,r){return this._readNormalized(e)}readWithDefault(e,r){return this._readNormalized(e)}hasArcadeDependency(e){return!1}_readNormalized(e){const r=e.readAttribute(this._field);if(null==r)return null;const{normalizationField:t,normalizationTotal:i,normalizationType:o}=this._normalizationInfo,a=e.readAttribute(t);switch(o??"esriNormalizeByField"){case"esriNormalizeByField":return a?a?r/a:void 0:null;case"esriNormalizeByLog":return Math.log(r)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return i?r/i*100:null}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js
var StaticBitSet = __webpack_require__(43871);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js
var whereUtils = __webpack_require__(35936);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const ComputedAttributeStorage_c=()=>Logger/* default */.A.getLogger("esri.views.2d.layers.features.support.ComputedAttributeStorage"),ComputedAttributeStorage_m=4294967295;function ComputedAttributeStorage_p(t,e,s){if(!(t.length>e))for(;t.length<=e;)t.push(s)}class l{constructor(t){this._numerics=[],this._strings=[],this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[],this._dirtyBitset=this.getBitset(this.createBitset()),this.compilationOptions=t}createBitset(){const t=this._bitsets.length;return this._bitsets.push(StaticBitSet/* StaticBitSet */.y.create(this._allocatedSize,DisplayId/* displayIdTexelMask */.KQ)),t+1}createDictionaryTemplateField(t,e){return new DictionaryTemplate_r(t,e)}async createComputedField(e,s=!1){if(e.expression)try{if(!this.compilationOptions)throw new Error("InternalError: Compilation options not defined");if(s)return await a.create(e.expression,this.compilationOptions);return await ComputedExpression_i.create(e.expression,this.compilationOptions)}catch(u){const s=new core_Error/* default */.A("featurelayer","Failed to compile arcade expression",{error:u,expression:e.expression});return ComputedAttributeStorage_c().error(s),null}if(e.normalizationType||e.normalizationField)return new NormalizedField_r(e.field,e);if(e.field)return new CachedField_r(e.field);const i=new core_Error/* default */.A("featurelayer","Unable to create computed field. No expression or field found",{info:e});return ComputedAttributeStorage_c().error(i),null}async createWhereClause(t){return t?(0,whereUtils/* createWhereClause */.$)(t,this.compilationOptions.fields):null}getBitset(t){return this._bitsets[t-1]}getComputedNumeric(t,e){return this.getComputedNumericAtIndex(t&DisplayId/* displayIdTexelMask */.KQ,0)}setComputedNumeric(t,e,s){return this.setComputedNumericAtIndex(t&DisplayId/* displayIdTexelMask */.KQ,s,0)}getComputedString(t,e){return this.getComputedStringAtIndex(t&DisplayId/* displayIdTexelMask */.KQ,0)}setComputedString(t,e,s){return this.setComputedStringAtIndex(t&DisplayId/* displayIdTexelMask */.KQ,0,s)}getComputedNumericAtIndex(t,e){const s=t&DisplayId/* displayIdTexelMask */.KQ;return this._ensureNumeric(e,s),this._numerics[e][s]}setComputedNumericAtIndex(t,e,s){const r=t&DisplayId/* displayIdTexelMask */.KQ;this._ensureNumeric(e,r),this._numerics[e][r]=s}getPackedChunkId(t){const e=t&DisplayId/* displayIdTexelMask */.KQ;return this._ensureInstanceId(e),this._instanceIds[e]}setPackedChunkId(t,e){const s=t&DisplayId/* displayIdTexelMask */.KQ;this._ensureInstanceId(s),this._instanceIds[s]=e}getComputedStringAtIndex(t,e){const s=t&DisplayId/* displayIdTexelMask */.KQ;return this._ensureString(e,s),this._strings[e][s]}setComputedStringAtIndex(t,e,s){const r=t&DisplayId/* displayIdTexelMask */.KQ;this._ensureString(e,r),this._strings[e][r]=s}getXMin(t){return this._bounds[4*(t&DisplayId/* displayIdTexelMask */.KQ)]}getYMin(t){return this._bounds[4*(t&DisplayId/* displayIdTexelMask */.KQ)+1]}getXMax(t){return this._bounds[4*(t&DisplayId/* displayIdTexelMask */.KQ)+2]}getYMax(t){return this._bounds[4*(t&DisplayId/* displayIdTexelMask */.KQ)+3]}setBounds(t,e,s=!1){const r=t&DisplayId/* displayIdTexelMask */.KQ;if(!s&&!this._dirtyBitset.has(t))return this._bounds[4*r]!==ComputedAttributeStorage_m;this._dirtyBitset.unset(t);const n=e.readGeometryWorldSpace();if(ComputedAttributeStorage_p(this._bounds,4*r+4,0),!n||!n.coords.length)return this._bounds[4*r]=ComputedAttributeStorage_m,this._bounds[4*r+1]=ComputedAttributeStorage_m,this._bounds[4*r+2]=ComputedAttributeStorage_m,this._bounds[4*r+3]=ComputedAttributeStorage_m,!1;let o=1/0,u=1/0,d=-1/0,h=-1/0;return n.forEachVertex(((t,e)=>{o=Math.min(o,t),u=Math.min(u,e),d=Math.max(d,t),h=Math.max(h,e)})),this._bounds[4*r]=o,this._bounds[4*r+1]=u,this._bounds[4*r+2]=d,this._bounds[4*r+3]=h,!0}getBounds(t,e){const i=this.getXMin(e),r=this.getYMin(e),n=this.getXMax(e),o=this.getYMax(e);return (0,aaBoundingBox/* fromRectValues */.BI)(t,i,r,n,o),i!==ComputedAttributeStorage_m}_ensureNumeric(t,e){this._numerics[t]||(this._numerics[t]=[]);ComputedAttributeStorage_p(this._numerics[t],e,0)}_ensureInstanceId(t){ComputedAttributeStorage_p(this._instanceIds,t,0)}_ensureString(t,e){this._strings[t]||(this._strings[t]=[]);ComputedAttributeStorage_p(this._strings[t],e,null)}}


/***/ }),

/***/ 29491:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _AComputedField_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21528);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends _AComputedField_js__WEBPACK_IMPORTED_MODULE_0__/* .AComputedField */ .L{constructor(e){super(),this._value=e}resize(e){}read(e,r){return this._value}readWithDefault(e,r,t){return this._value}hasArcadeDependency(e){return!1}}


/***/ }),

/***/ 44277:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(36358);
/* harmony import */ var _layers_graphics_data_queryUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(35746);
/* harmony import */ var _layers_graphics_data_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(70759);
/* harmony import */ var _layers_graphics_data_timeSupport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(71339);
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(14474);
/* harmony import */ var _FeatureStoreQueryAdapter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(14844);
/* harmony import */ var _whereUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(35936);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m=1,d=2;class p{constructor(t){this._geometryBounds=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this._idToVisibility=new Map,this._serviceInfo=t}static async create(t){const e=new p(t);return await e.update(t.filterJSON,t.spatialReference),e}get hash(){return this._hash}check(t,e){return this._applyFilter(t,e)}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,m)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&m),a=s.has(r);!o&&a?e.push(r):o&&!a&&i.push(r),this._idToVisibility.set(r,a?m|d:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await (0,_layers_graphics_data_queryUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .normalizeQueryLike */ .T2)(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t?.where)return this._clause=null,void(this.where=null);this._clause=await (0,_whereUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .createWhereClause */ .$)(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t?.objectIds&&new Set(t.objectIds),this._idsToHide=t?.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t?.objectIds}async _setGeometryFilter(t){if(!t?.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel??"esriSpatialRelIntersects",r=await (0,_layers_graphics_data_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_5__/* .getSpatialQueryOperator */ .xt)(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getBoundsXY */ .Rg)(this._geometryBounds,e),this._spatialQueryOperator=r,this.geometry=e,this.spatialRel=i}_setTimeFilter(i){if(this.timeExtent=this._timeOperator=null,i?.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=i.timeExtent,this._timeOperator=(0,_layers_graphics_data_timeSupport_js__WEBPACK_IMPORTED_MODULE_6__/* .getTimeOperator */ .I)(this._serviceInfo.timeInfo,i.timeExtent,_FeatureStoreQueryAdapter_js__WEBPACK_IMPORTED_MODULE_8__/* .FeatureStoreQueryAdapter */ .Z.Shared);else{const s=new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("feature-layer-view:time-filter-not-available","Unable to apply time filter, as layer doesn't have time metadata.",i.timeExtent);_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.layers.features.controllers.FeatureFilter").error(s)}}_applyFilter(t,e){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t,e)}_filterByExpression(t,e){return!this.where||this._clause(t,e)}_filterById(t){return(!this._idsToHide?.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow?.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readGeometryWorldSpace();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return null==this._timeOperator||this._timeOperator(t)}}


/***/ }),

/***/ 62649:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ n),
/* harmony export */   i: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78983);
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{static minimal(e,n,l=[]){return new i({geometryType:e,fieldsIndex:new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A(l).toJSON(),featureIdInfo:{type:"object-id",fieldName:n},subtypes:null,subtypeField:null,types:null,globalIdField:null,spatialReference:null,outSpatialReference:null,timeInfo:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null})}static createFeature(e){return new i(e)}constructor(i){let n;this._options=i,this._fieldsIndex=_layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.fromJSON(i.fieldsIndex),i.spatialReference&&(this._spatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fromJSON(i.spatialReference)),i.outSpatialReference&&(this._outSpatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fromJSON(i.outSpatialReference)),"object-id"===i.featureIdInfo.type&&(n=i.featureIdInfo.fieldName),this._arcadeSchema={fields:this.fieldsIndex.fields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,objectIdField:n,globalIdField:this._options.globalIdField,spatialReference:this._spatialReference,timeInfo:this._options.timeInfo,typeIdField:this._options.typeIdField??void 0,types:this._options.types??void 0,subtypeField:this._options.subtypeField,subtypes:this._options.subtypes??void 0,datesInUnknownTimezone:this._options.timeReferenceUnknownClient??void 0,dateFieldsTimeZone:this._options.dateFieldsTimeZone??void 0}}get fieldsIndex(){return this._fieldsIndex}get geometryType(){return"esriGeometryMultiPatch"===this._options.geometryType?"esriGeometryPolygon":this._options.geometryType}get serviceGeometryType(){return this._options.geometryType}get subtypeField(){return this._options.subtypeField}get timeInfo(){return this._options.timeInfo}get featureIdInfo(){return this._options.featureIdInfo}get globalIdField(){return this._options.globalIdField}get arcadeSchema(){return this._arcadeSchema}get spatialReference(){return this._spatialReference}get outSpatialReference(){return this._outSpatialReference}get timeReferenceUnknownClient(){return this._options.timeReferenceUnknownClient}weakCloneWithAdditionalFields(e){return new i({fieldsIndex:{fields:[...this._fieldsIndex.fields,...e],timeZoneByFieldName:null},geometryType:this.geometryType,globalIdField:this.globalIdField,featureIdInfo:this.featureIdInfo,spatialReference:this.spatialReference,outSpatialReference:this.outSpatialReference,subtypeField:this.subtypeField,subtypes:this._options.subtypes,timeInfo:this.timeInfo,timeReferenceUnknownClient:this.timeReferenceUnknownClient,dateFieldsTimeZone:this._options.dateFieldsTimeZone,typeIdField:this._options.typeIdField,types:this._options.types})}}class n extends i{static createGraphics(e){return new n({fieldsIndex:(new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A).toJSON(),featureIdInfo:{type:"object-id",fieldName:"uid"},geometryType:null,spatialReference:e,outSpatialReference:e,globalIdField:null,subtypeField:null,subtypes:null,timeInfo:null,typeIdField:null,types:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null})}}


/***/ }),

/***/ 85754:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _StaticBitSet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43871);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a{constructor(a){this._valid=_StaticBitSet_js__WEBPACK_IMPORTED_MODULE_0__/* .StaticBitSet */ .y.create(a),this._data=new Array(a)}has(t){return this._valid.has(t)}set(t,a){this._valid.set(t),this._data[t]=a}get(t){return this._data[t]}}


/***/ }),

/***/ 42549:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98918);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(45132);
/* harmony import */ var _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40845);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14816);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1171);
/* harmony import */ var _geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73138);
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(20698);
/* harmony import */ var _layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(8964);
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(21355);
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(32597);
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(88443);
/* harmony import */ var _time_constants_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54088);
/* harmony import */ var _FeatureSetCache_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(85754);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const b=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("featurelayer-simplify-thresholds")??[.5,.5,.5,.5],x=b[0],D=b[1],T=b[2],F=b[3],A=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("featurelayer-simplify-payload-size-factors")??[1,2,4],S=A[0],I=A[1],B=A[2],j=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("featurelayer-simplify-mobile-factor")??2,G=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-mobile"),M=4294967295;function C(e,t,r){if(!(e.length>t))for(;e.length<=t;)e.push(r)}class v{constructor(e){this.metadata=e,this.type="FeatureSetReader",this._overrides=null,this._joined=[],this._objectIdToIndex=null,this._boundsBuffer=[],this._caches=new Map,this.arcadeDeclaredClass="esri.arcade.Feature",this._contextTimeZone=null}destroy(){}[Symbol.dispose](){this.destroy()}getAreaSimplificationThreshold(e,t){let r=1;const s=G?j:1;t>4e6?r=B*s:t>1e6?r=I*s:t>5e5?r=S*s:t>1e5&&(r=s);let i=0;return e>4e3?i=F*r:e>2e3?i=T*r:e>100?i=D:e>15&&(i=x),i}getBounds(e){if(C(this._boundsBuffer,4*this.getIndex()+4,0),this.getBoundsXMin()===M)return!1;if(0===this.getBoundsXMin()){const t=this.readGeometryWorldSpace();if(!t)return this.setBoundsXMin(M),!1;let r=1/0,s=1/0,a=-1/0,o=-1/0;return t.forEachVertex(((e,t)=>{r=Math.min(r,e),s=Math.min(s,t),a=Math.max(a,e),o=Math.max(o,t)})),this.setBoundsXMin(r),this.setBoundsYMin(s),this.setBoundsXMax(a),this.setBoundsYMax(o),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__/* .fromRectValues */ .BI)(e,r,s,a,o),!0}const t=this.getBoundsXMin(),r=this.getBoundsYMin(),s=this.getBoundsXMax(),a=this.getBoundsYMax();return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_5__/* .fromRectValues */ .BI)(e,t,r,s,a),!0}getBoundsXMin(){return this._boundsBuffer[4*this.getIndex()]}setBoundsXMin(e){this._boundsBuffer[4*this.getIndex()]=e}getBoundsYMin(){return this._boundsBuffer[4*this.getIndex()+1]}setBoundsYMin(e){this._boundsBuffer[4*this.getIndex()+1]=e}getBoundsXMax(){return this._boundsBuffer[4*this.getIndex()+2]}setBoundsXMax(e){this._boundsBuffer[4*this.getIndex()+2]=e}getBoundsYMax(){return this._boundsBuffer[4*this.getIndex()+3]}setBoundsYMax(e){this._boundsBuffer[4*this.getIndex()+3]=e}readAttributeAsTimestamp(e){const t=this.readAttribute(e);return"string"==typeof t?new Date(t).getTime():"number"==typeof t||null==t?t:null}readAttribute(e,t=!1){const r=this._readAttribute(e,t);if(void 0!==r)return r;for(const s of this._joined){s.setIndex(this.getIndex());const r=s._readAttribute(e,t);if(void 0!==r)return r}}readAttributes(){const e=this._readAttributes();for(const t of this._joined){t.setIndex(this.getIndex());const r=t._readAttributes();for(const t of Object.keys(r))e[t]=r[t]}return e}joinAttributes(e){this._joined.push(e)}registerOverrides(e){this._overrides=e}withoutOverrides(){const e=this.copy();return e._overrides=null,e}readOptimizedFeatureWorldSpace(){const e=this.readGeometryWorldSpace(),t=this.readAttributes(),r=this.readCentroidWorldSpace();return new _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_10__/* .OptimizedFeature */ .Om(e,t,r,this.getObjectId(),this.getDisplayId())}readLegacyFeatureForDisplay(){const e=this.readCentroidForDisplay();return{attributes:this.readAttributes(),geometry:this.readLegacyGeometryForDisplay(),centroid:(e&&{x:e.coords[0],y:e.coords[1]})??null}}readLegacyFeatureWorldSpace(){const e=this.readCentroidWorldSpace();return{attributes:this.readAttributes(),geometry:this._readLegacyGeometryWorldSpace(),centroid:(e&&{x:e.coords[0],y:e.coords[1]})??null}}readLegacyGeometryForDisplay(){const e=this.readGeometryForDisplay();return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .convertToGeometry */ .zv)(e,this.geometryType,!1,!1)}readXForDisplay(){return this._readX()}readYForDisplay(){return this._readY()}readXWorldSpace(){const e=this._readX(),t=this.getInTransform();return null==t?e:e*t.scale[0]+t.translate[0]}readYWorldSpace(){const e=this._readY(),t=this.getInTransform();return null==t?e:t.translate[1]-e*t.scale[1]}readGeometryForDisplay(){const e=this._readGeometryDeltaDecoded(!0);if(!e){const e=this._createDeltaQuantizedGeometryFromServerCentroid();return e?e.deltaDecode():null}return e}readGeometryForDisplayTransformed(e){let t=this.readGeometryForDisplay();if(t&&"esriGeometryPolyline"===this.metadata.geometryType&&(t=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .generalizeOptimizedGeometry */ .kz)(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,t,this.hasZ,this.hasM,this.metadata.geometryType,e.scale[0])),t&&(t=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .quantizeForDisplay */ .hK)(t,e,this.metadata.geometryType,this.hasZ,this.hasM)),!t){const t=this.readCentroidForDisplay();if(!t)return null;const r=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .quantizeX */ .IE)(e,t.coords[0]),s=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .quantizeY */ .B2)(e,t.coords[1]);return this._createDeltaQuantizedExtrudedGeometry(r,s).deltaDecode()}return t}readGeometryWorldSpace(){let e=this._readGeometry();if(e||(e=this._createDeltaQuantizedGeometryFromServerCentroid()),!e)return null;const t=e.clone(),r=this.getInTransform();return null!=r&&(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .unquantizeOptimizedGeometry */ .Ch)(t,t,this.hasZ,this.hasM,r),t}readCentroidForDisplay(){const e=this.readGeometryForDisplay();return e?this._computeDisplayCentroid(e):this._readServerCentroid()}readCentroidWorldSpace(){const e=this.readGeometryForDisplay(),t=e?this._computeDisplayCentroid(e):this._readServerCentroid();if(!t)return null;const r=t.clone(),s=this.getInTransform();return null!=s&&(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .unquantizeOptimizedGeometry */ .Ch)(r,r,this.hasZ,this.hasM,s),r}setCache(e){let t=this._caches.get(e);null==t&&(t=new _FeatureSetCache_js__WEBPACK_IMPORTED_MODULE_13__/* .FeatureSetCache */ .P(this.getSize()),this._caches.set(e,t)),this._activeCache=t}setCachedValue(e){this._activeCache.set(this.getIndex(),e)}hasCachedValue(){return this._activeCache.has(this.getIndex())}getCachedValue(){return this._activeCache.get(this.getIndex())}_readGeometryDeltaDecoded(e){const t=this._readGeometry(e);return"esriGeometryPoint"!==this.geometryType&&t&&this.getInTransform()?t.deltaDecode():t}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}readArcadeFeature(){return this}hasField(e){return this.fields.has(e)||this._joined.some((t=>t.hasField(e)))}geometry(){const e=this.readGeometryWorldSpace(),t=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .convertToGeometry */ .zv)(e,this.geometryType,this.hasZ,this.hasM),r=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .fromJSON */ .rS)(t);if(r){if(!this.metadata.outSpatialReference)throw new Error("InternalError: Expected spatial reference to be defined");r.spatialReference=this.metadata.outSpatialReference}return r}autocastArcadeDate(t,r){return r&&r instanceof Date?this.isUnknownDateTimeField(t)?_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.unknownDateJSToArcadeDate(r):_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.dateJSAndZoneToArcadeDate(r,this.contextTimeZone??_time_constants_js__WEBPACK_IMPORTED_MODULE_12__/* .system */ .qU):r}isUnknownDateTimeField(e){return this.metadata.fieldsIndex.getTimeZone(e)===_time_constants_js__WEBPACK_IMPORTED_MODULE_12__/* .unknown */ .L5}field(s){let i=this.fields.get(s);if(i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_2__/* .DateOnly */ .n.fromReader(this.readAttribute(s,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_3__/* .TimeOnly */ .k.fromReader(this.readAttribute(s,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.fromReaderAsTimeStampOffset(this.readAttribute(s,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(s,this.readAttribute(s,!0));default:return this.readAttribute(s,!1)}for(const a of this._joined)if(a.setIndex(this.getIndex()),i=a.fields.get(s),i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_2__/* .DateOnly */ .n.fromReader(a._readAttribute(s,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_3__/* .TimeOnly */ .k.fromReader(a._readAttribute(s,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.fromReaderAsTimeStampOffset(a._readAttribute(s,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(s,a._readAttribute(s,!0));default:return this.readAttribute(s,!1)}throw new Error(`Field ${s} does not exist`)}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this.fields.fields.map((e=>e.name))}castToText(e=!1){if(!e)return JSON.stringify(this.readLegacyFeatureForDisplay());const t=this.readLegacyFeatureForDisplay();if(!t)return JSON.stringify(null);const r={geometry:t.geometry,attributes:{...t.attributes??{}}};for(const s in r.attributes){const e=r.attributes[s];e instanceof Date&&(r.attributes[s]=e.getTime())}return JSON.stringify(r)}gdbVersion(){return null}fullSchema(){return this.metadata.arcadeSchema}castAsJson(e=null){return{attributes:this._readAttributes(),geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}_getExists(){if(this._overrides){const e=this.getObjectId();return!this._overrides.hasOverride(e)}return!0}_computeDisplayCentroid(e){if(null==this.getInTransform())return (0,_layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_14__/* .getCentroidOptimizedGeometry */ .Q)(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,e,this.hasM,this.hasZ);const t=_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_4__/* .GeometryCursor */ .z.fromOptimized(e,this.geometryType);t.yFactor*=-1;const r=(0,_geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_7__/* .getLabelPoint */ .d)(t);return r?(r[1]*=-1,new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A([],r)):null}copyInto(e){e._joined=this._joined,e._overrides=this._overrides,e._objectIdToIndex=this._objectIdToIndex,e._boundsBuffer=this._boundsBuffer,e._activeCache=this._activeCache,e._caches=this._caches,e._contextTimeZone=this._contextTimeZone}_readLegacyGeometryWorldSpace(){const e=this.readGeometryWorldSpace();return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .convertToGeometry */ .zv)(e,this.geometryType,!1,!1)}_createDeltaQuantizedGeometryFromServerCentroid(){const e=this._readServerCentroid();if(!e)return null;const[t,r]=e.coords;return this._createDeltaQuantizedExtrudedGeometry(t,r)}_createDeltaQuantizedExtrudedGeometry(e,t){return"esriGeometryPolyline"===this.geometryType?this._createDeltaQuantizedExtrudedLine(e,t):this._createDeltaQuantizedExtrudedQuad(e,t)}_createDeltaQuantizedExtrudedQuad(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A([5],[e-1,t,1,-1,1,1,-1,1,-1,-1])}_createDeltaQuantizedExtrudedLine(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A([2],[e-1,t+1,1,-1])}}


/***/ }),

/***/ 51747:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21355);
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(32597);
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79005);
/* harmony import */ var _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(42549);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_3__/* .FeatureSetReader */ .Y{static fromFeatures(t,r){const{geometryType:s}=r,n=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertFromFeatures */ .Di)([],t,s,!1,!1,r.featureIdInfo);for(let e=0;e<n.length;e++)n[e].displayId=t[e].displayId;return u.fromOptimizedFeatures(n,r)}static fromFeatureSet(e,r){const s=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertFromFeatureSet */ .q3)(e,r.featureIdInfo);return u.fromOptimizedFeatureSet(s,r)}static fromOptimizedFeatureSet(e,t){const r=u.fromOptimizedFeatures(e.features,t);return r._exceededTransferLimit=e.exceededTransferLimit,r._transform=e.transform,r._fieldsIndex=new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(e.fields),r}static fromOptimizedFeatures(e,t,r){const s=new u(e,t);return s._fieldsIndex=t.fieldsIndex,s._transform=r,s}static empty(e){return new u([],e)}constructor(e,t){super(t),this._exceededTransferLimit=!1,this._featureIndex=-1,this._fieldsIndex=null,this._geometryType=t.geometryType,this._features=e}get fields(){return this._fieldsIndex}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}get _current(){return this._features[this._featureIndex]}get usedMemory(){return this._current.usedMemory}getSize(){return this._features.length}getCursor(){return this.copy()}getInTransform(){return this._transform}getAttributeHash(){let e="";for(const t in this._current.attributes)e+=this._current.attributes[t];return e}getIndex(){return this._featureIndex}setIndex(e){this._featureIndex=e}getObjectId(){return this._current?.objectId}getDisplayId(){return this._current.displayId}setDisplayId(e){this._current.displayId=e}copy(){const e=new u(this._features,this.metadata);return this.copyInto(e),e}next(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length}readGeometryArea(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__/* .hasGeometry */ .N3)(this._current)?(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getQuantizedArea */ .Rk)(this._current.geometry,2):0}_readX(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__/* .hasGeometry */ .N3)(this._current)?this._current.geometry.coords[0]:0}_readY(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__/* .hasGeometry */ .N3)(this._current)?this._current.geometry.coords[1]:0}_readGeometry(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__/* .hasGeometry */ .N3)(this._current)?this._current.geometry??null:null}_readServerCentroid(){return this._current.centroid}_readAttribute(e,t){if(!this._fieldsIndex){const t=this._current.attributes[e];if(void 0!==t)return t;const r=e.toLowerCase();for(const e in this._current.attributes)if(e.toLowerCase()===r)return this._current.attributes[e];return}const r=this._fieldsIndex.get(e);if(!r)return;const s=this._current.attributes[r.name];return null==s?s:t&&this.fields.isDateField(e)?new Date(s):s}_readAttributes(){return this._current.attributes}copyInto(e){super.copyInto(e),e._featureIndex=this._featureIndex,e._transform=this._transform,e._fieldsIndex=this._fieldsIndex}}


/***/ }),

/***/ 43871:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{static fromBuffer(e,s){return new t(e,s)}static create(e,s=4294967295){const r=new Uint32Array(Math.ceil(e/32));return new t(r,s)}constructor(t,e){this._mask=0,this._buf=t,this._mask=e}_getIndex(t){return Math.floor(t/32)}has(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}hasRange(t,e){let s=t,r=e;for(;s%32&&s!==r;){if(this.has(s))return!0;s++}for(;r%32&&s!==r;){if(this.has(s))return!0;r--}if(s===r)return!1;for(let h=s/32;h!==r/32;h++){if(this._buf[h])return!0}return!1}set(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]|=r}setRange(t,e){let s=t,r=e;for(;s%32&&s!==r;)this.set(s++);for(;r%32&&s!==r;)this.set(r--);if(s!==r)for(let h=s/32;h!==r/32;h++)this._buf[h]=4294967295}unset(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]&=4294967295^r}resize(t){const e=this._buf,s=new Uint32Array(Math.ceil(t/32));s.set(e),this._buf=s}or(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}and(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}xor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}ior(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}iand(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}ixor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}any(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}copy(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}clone(){return new t(this._buf.slice(),this._mask)}clear(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0;return this}forEachSet(t){for(let e=0;e<this._buf.length;e++){let s=this._buf[e],r=32*e;if(s)for(;s;){1&s&&t(r),s>>>=1,r++}}}countSet(){let t=0;return this.forEachSet((e=>{t++})),t}}


/***/ }),

/***/ 63838:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ u),
/* harmony export */   e: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89882);
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75228);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l=8,s=l-2,n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.layers.features.support.rendererUtils");function u(e){return e.map((e=>a(e)?i(e.clone()):e))}function a(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function i(e){return e.stops=b(e.type,e.stops??[]),e}function p(e,o,r){return(1-r)*e+r*o}function c(e,o){const[t,...l]=o,n=l.pop(),u=l[0].value,a=l[l.length-1].value,i=(a-u)/s,c=[];for(let s=u;s<a;s+=i){let t=0;for(;s>=l[t].value;)t++;const n=l[t],u=o[t-1],a=s-u.value,i=n.value===u.value?1:a/(n.value-u.value);if("color"===e){const e=l[t],r=o[t-1],n=e.color.clone();n.r=p(r.color.r,n.r,i),n.g=p(r.color.g,n.g,i),n.b=p(r.color.b,n.b,i),n.a=p(r.color.a,n.a,i),c.push({value:s,color:n,label:e.label})}else if("size"===e){const e=l[t],n=o[t-1],u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toPt */ .cr)(e.size),a=p((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toPt */ .cr)(n.size),u,i);c.push({value:s,size:a,label:e.label})}else{const e=l[t],r=p(o[t-1].opacity,e.opacity,i);c.push({value:s,opacity:r,label:e.label})}}return[t,...c,n]}function f(e){const[o,...r]=e,t=r.pop();for(;r.length>s;){let e=0,o=0;for(let t=1;t<r.length;t++){const l=r[t-1],s=r[t],n=Math.abs(s.value-l.value);n>o&&(o=n,e=t)}r.splice(e,1)}return[o,...r,t]}function b(e,o){return o.length<=l?o:(n().warn(`Found ${o.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`),o.length>2*l?c(e,o):f(o))}function g(){const{supportsColorBufferFloat:e,supportsColorBufferFloatBlend:o,supportsColorBufferHalfFloat:r}=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .C)();return e&&o||r}function m(o){if(!o)return!0;switch(o.type){case"dot-density":break;case"heatmap":if(!g()){const o=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .C)(),r=["supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((e=>!o[e])).join(", ");return n().errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-missing-extension",`Missing WebGL2 requirements for Heatmap: ${r}`)),!1}}return!0}


/***/ }),

/***/ 35936:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(76859);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.layers.FeatureLayerView2D"),o={getAttribute:(r,e)=>r.readAttribute(e)};async function a(e,a){try{const s=await (0,_core_sql_js__WEBPACK_IMPORTED_MODULE_2__/* .parseWhereClause */ .GP)(e,a);return s.isStandardized||n().error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("sql-parse-error","expression is not standardized",{where:e})),(t,a)=>{const i=t.readArcadeFeature();try{return s.testFeatureCompiled(i,o,a.currentUser)}catch(u){return n().warn(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("sql-runtime-error","Encountered an error when evaluating where clause",{where:e,error:u})),!0}}}catch(s){return n().warn(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("sql-runtime-error","Encountered an error when evaluating where clause",{where:e,error:s})),r=>!0}}


/***/ }),

/***/ 68709:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  f: () => (/* binding */ i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js + 1 modules
var AFeatureContainer = __webpack_require__(31091);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueInstance.js
var TechniqueInstance = __webpack_require__(28177);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js + 65 modules
var TechniqueRegistry = __webpack_require__(84022);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js
var instanceIdUtils = __webpack_require__(98003);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/GraphicInstanceStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=0;function a(i,a){return new TechniqueInstance/* FeatureTechniqueInstance */.c((0,instanceIdUtils/* castInstanceId */.U)(n++),i,a)}const o={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null};class l{constructor(){this.instances={fill:a(TechniqueRegistry/* Techniques */.YS.fill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),marker:a(TechniqueRegistry/* Techniques */.YS.marker,{uniforms:o,optionalAttributes:{zoomRange:!0}}),line:a(TechniqueRegistry/* Techniques */.YS.line,{uniforms:o,optionalAttributes:{zoomRange:!0}}),text:a(TechniqueRegistry/* Techniques */.YS.text,{uniforms:o,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1,visibility:!1}}),outlineFill:a(TechniqueRegistry/* Techniques */.YS.outlineFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),complexFill:a(TechniqueRegistry/* Techniques */.YS.complexFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),gradientFill:a(TechniqueRegistry/* Techniques */.YS.gradientFill,{uniforms:o,optionalAttributes:{zoomRange:!0}}),texturedLine:a(TechniqueRegistry/* Techniques */.YS.texturedLine,{uniforms:o,optionalAttributes:{zoomRange:!0}}),gradientStroke:a(TechniqueRegistry/* Techniques */.YS.gradientStroke,{uniforms:o,optionalAttributes:{zoomRange:!0}}),animatedMarker:a(TechniqueRegistry/* Techniques */.YS.animatedMarker,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),animatedMarkerShift:a(TechniqueRegistry/* Techniques */.YS.animatedMarkerShift,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!0,lineLength:!0}}),animatedPolygon:a(TechniqueRegistry/* Techniques */.YS.animatedFill,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),animatedPolyline:a(TechniqueRegistry/* Techniques */.YS.animatedLine,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:!1}}),animatedPolylineShift:a(TechniqueRegistry/* Techniques */.YS.animatedLine,{uniforms:o,optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:!0}})},this._instancesById=Object.values(this.instances).reduce(((e,i)=>(e.set(i.instanceId,i),e)),new Map)}getInstance(e){return this._instancesById.get(e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js
var vec2f32 = __webpack_require__(17845);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f32.js
var vec3f32 = __webpack_require__(3912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules
var normalizeUtils = __webpack_require__(65231);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicBoundsRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const v=Math.PI/180,x=4;class b extends DisplayObject/* DisplayObject */.q{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,mat3f32/* create */.vt)(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,maybe/* disposeMaybe */.WD)(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(webgl_enums/* BlendFactor */.dn.ONE,webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const i=this._program;e.bindVAO(this._vao),e.useProgram(i),i.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(webgl_enums/* PrimitiveType */.WR.LINES,8*r.length,webgl_enums/* DataType */.pe.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}_createShaderProgram(t){if(this._program)return;const e="precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }",r="precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }";this._program=t.programCache.acquire(e,r,y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:m,size:c,resolution:u,pixelRatio:_,rotation:h,viewpoint:p}=a,d=v*h,{x:g,y:x}=p.targetGeometry,b=(0,normalizeUtils/* normalizeMapX */.mT)(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=_*c[0],B=_*c[1],M=u*y,j=u*B,A=(0,mat3/* identity */.D_)(this._dvsMat3);(0,mat3/* multiply */.lw)(A,A,m),(0,mat3/* translate */.Tl)(A,A,(0,vec2f32/* fromValues */.fA)(y/2,B/2)),(0,mat3/* scale */.hs)(A,A,(0,vec3f32/* fromValues */.fA)(c[0]/M,-B/j,1)),(0,mat3/* rotate */.e$)(A,A,-d)}_updateBufferData(t,e){const{x:r,y:i}=this._localOrigin,s=2*x*e.length,o=new Float32Array(s),a=new Uint32Array(8*e.length);let n=0,l=0;for(const f of e)f&&(o[2*n]=f[0]-r,o[2*n+1]=f[1]-i,o[2*n+2]=f[0]-r,o[2*n+3]=f[3]-i,o[2*n+4]=f[2]-r,o[2*n+5]=f[3]-i,o[2*n+6]=f[2]-r,o[2*n+7]=f[1]-i,a[l]=n+0,a[l+1]=n+3,a[l+2]=n+3,a[l+3]=n+2,a[l+4]=n+2,a[l+5]=n+1,a[l+6]=n+1,a[l+7]=n+0,n+=4,l+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=BufferObject/* BufferObject */.g.createVertex(t,webgl_enums/* Usage */._U.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=BufferObject/* BufferObject */.g.createIndex(t,webgl_enums/* Usage */._U.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new VertexArrayObject/* VertexArrayObject */.Z(t,e.attributes,e.bufferLayouts,new Map([["geometry",this._vertexBuffer]]),this._indexBuffer)}}}const y=()=>(0,Utils/* createProgramDescriptor */.ES)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:webgl_enums/* DataType */.pe.FLOAT}]});

;// ../node_modules/@arcgis/core/views/2d/layers/graphics/AGraphicContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i extends AFeatureContainer/* AFeatureContainer */.j{constructor(e){super(e),this._instanceStore=new l,this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,maybe/* destroyMaybe */.pR)(this._boundsRenderer)}get instanceStore(){return this._instanceStore}enableRenderingBounds(e){this._boundsRenderer=new b(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}_renderChildren(e,t){e.selection=t;for(const r of this.children){if(!r.visible)continue;const t=r.getDisplayList(this._instanceStore,enums/* FeatureBatchingStrategy */.ch.STRICT_ORDER);t?.render(e)}}}


/***/ }),

/***/ 13737:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79432);
/* harmony import */ var _AGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68709);
/* harmony import */ var _support_util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19257);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t extends _AGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__/* .AGraphicContainer */ .f{renderChildren(i){for(const e of this.children)e.setTransform(i.state);if(super.renderChildren(i),this._updateAttributeView(),this.children.some((e=>e.hasData))){switch(i.drawPhase){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.MAP:this._renderChildren(i,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .FeatureSelection */ .RI.All);break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(i)}this._boundsRenderer&&this._boundsRenderer.doRender(i)}}_renderHighlight(e){(0,_support_util_js__WEBPACK_IMPORTED_MODULE_2__/* .renderHighlight */ .lB)(e,!1,(e=>{this._renderChildren(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .FeatureSelection */ .RI.Highlight)}))}}


/***/ }),

/***/ 90598:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ O)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Identifiable.js
var Identifiable = __webpack_require__(65667);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/FieldsIndex.js
var FieldsIndex = __webpack_require__(79005);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/OverrideHelper.js
var OverrideHelper = __webpack_require__(17125);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaults.js
var defaults = __webpack_require__(26207);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js + 4 modules
var FeatureTile = __webpack_require__(90819);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js + 2 modules
var MeshData = __webpack_require__(25936);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/ResourceProxy.js + 1 modules
var ResourceProxy = __webpack_require__(55929);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js
var VisualVariablesSchema = __webpack_require__(21857);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/ComplexSymbolSchema.js
var ComplexSymbolSchema = __webpack_require__(83810);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/createGraphicSymbolMeshSchemas.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function u(u,f,k){const b=[],d={scaleInfo:(0,ComplexSymbolSchema/* getScaleInfo */.TY)(u),scaleExpression:null};for(const s of f)switch(s.type){case"marker":if(s.animationParams){if(s.animationParams.params.hasShiftAnimation){b.push(...(0,ComplexSymbolSchema/* createAnimatedMarkerMeshInfos */.gF)(k.instances.animatedMarkerShift,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break}b.push(...(0,ComplexSymbolSchema/* createAnimatedMarkerMeshInfos */.gF)(k.instances.animatedMarker,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break}b.push(...(0,ComplexSymbolSchema/* createComplexMarkerMeshInfos */.Zi)(k.instances.marker,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break;case"fill":if(s.animationParams){b.push(...(0,ComplexSymbolSchema/* createAnimatedPolyMeshInfos */.KK)(k.instances.animatedPolygon,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break}null==s.spriteRasterizationParam?b.push(...(0,ComplexSymbolSchema/* createComplexSimpleFillMeshInfos */.Gn)(k.instances.fill,s,d)):b.push(...(0,ComplexSymbolSchema/* createComplexFillMeshInfos */.oF)(k.instances.complexFill,s,!1,d));break;case"line":if(s.animationParams){if(s.animationParams.params.hasShiftAnimation){b.push(...(0,ComplexSymbolSchema/* createAnimatedPolyMeshInfos */.KK)(k.instances.animatedPolylineShift,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break}b.push(...(0,ComplexSymbolSchema/* createAnimatedPolyMeshInfos */.KK)(k.instances.animatedPolyline,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break}s.spriteRasterizationParam?b.push(...(0,ComplexSymbolSchema/* createComplexTexturedLineMeshInfos */.EM)(k.instances.texturedLine,s,!1,d)):b.push(...(0,ComplexSymbolSchema/* createComplexSimpleLineMeshInfos */.NZ)(k.instances.line,s,!1,d));break;case"text":b.push(...(0,ComplexSymbolSchema/* createComplexTextMeshInfos */.IQ)(k.instances.text,s,VisualVariablesSchema/* noVisualVariables */.Dk,d));break;case"gradientFill":b.push(...(0,ComplexSymbolSchema/* createGradientFillMeshInfos */.mp)(k.instances.gradientFill,s,d));break;case"gradientStroke":b.push(...(0,ComplexSymbolSchema/* createGradientStrokeMeshInfos */.Dr)(k.instances.gradientStroke,s,d));break;case"outlineFill":b.push(...(0,ComplexSymbolSchema/* createComplexSimpleOutlineFillMeshInfos */.Yg)(k.instances.outlineFill,s,d))}return b}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/StorageSchema.js
var StorageSchema = __webpack_require__(77013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js + 2 modules
var AttributeStore = __webpack_require__(46882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js + 6 modules
var ComputedAttributeStorage = __webpack_require__(78832);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureMetadata.js
var FeatureMetadata = __webpack_require__(62649);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/centroid.js
var centroid = __webpack_require__(23806);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js
var FeatureSetReader = __webpack_require__(42549);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/GraphicsReader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GraphicsReader_a extends FeatureSetReader/* FeatureSetReader */.Y{static from(t,e,r){return new GraphicsReader_a(t,e,r)}constructor(t,e,r){super(r),this._items=t,this._tile=e,this._index=-1,this._cachedGeometry=null;const s=e.lod;s.wrap&&(this._wrappingInfo={worldSizeX:s.worldSize[0]})}get _current(){return this._items[this._index]}getItem(){return this._current}getZOrder(){return this._current.zOrder}getMeshWriters(){return this._current.symbolResource?.symbolInfo.meshWriters??[]}hasField(t){return null!=this._current.attributes[t]}field(t){return this.readAttribute(t)}get geometryType(){const t=(0,jsonUtils/* getJsonType */.$B)(this._current.geometry);return"esriGeometryPoint"===t?"esriGeometryMultipoint":t}getCursor(){return this.copy()}copy(){const t=new GraphicsReader_a(this._items,this._tile,this.metadata);return this.copyInto(t),t}copyInto(t){super.copyInto(t),t._cachedGeometry=this._cachedGeometry,t._index=this._index}get fields(){throw new Error("Fields reading not supported to graphics.")}get hasFeatures(){return!!this._items.length}get hasNext(){return this._index+1<this._items.length}get exceededTransferLimit(){throw new Error("InternalError: exceededTransferLimit not implemented for graphics.")}get hasZ(){return!1}get hasM(){return!1}get usedMemory(){return this._current.usedMemory}getInTransform(){return this._tile.transform}getSize(){return this._items.length}getAttributeHash(){let t="";for(const e in this._current.attributes)t+=this._current.attributes[e];return t}getObjectId(){return this._items[this._index].objectId}getDisplayId(){return this._current.displayId}setDisplayId(t){throw new Error("InternalError: Setting displayId not supported for graphics.")}setIndex(t){this._index=t}getIndex(){return this._index}next(){for(this._cachedGeometry=null;++this._index<this._items.length&&!this._getExists(););return this._index<this._items.length}readGeometryArea(){throw new Error("InternalError: readGeometryArea not supported for graphics.")}_readGeometry(){if(!this._cachedGeometry){let t=(0,featureConversionUtils/* convertFromGeometry */.Ux)(this._current.projectedGeometry,this.hasZ,this.hasM);if("esriGeometryPolyline"===this.geometryType&&(t=(0,featureConversionUtils/* generalizeOptimizedGeometry */.kz)(new OptimizedGeometry/* default */.A,t,this.hasZ,this.hasM,this.geometryType,this._tile.transform.scale[0])),this._cachedGeometry=(0,featureConversionUtils/* quantizeOptimizedGeometry */.Nl)(new OptimizedGeometry/* default */.A,t,this.hasZ,this.hasM,this.geometryType,this._tile.transform),!this._cachedGeometry)return null;this._wrapGeometry(this._cachedGeometry)}return this._cachedGeometry}_wrapGeometry(t){if(!this._wrappingInfo)return;const{worldSizeX:e}=this._wrappingInfo;if(t.isPoint)return 1===e?(t.coords.push(definitions/* tileSize */.CQ,0),t.coords.push(-1024,0),void t.lengths.push(3)):2===e?(t.coords.push(2*definitions/* tileSize */.CQ,0),t.coords.push(-2048,0),void t.lengths.push(3)):void this._wrapVertex(t.coords,0,2,e);if("esriGeometryMultipoint"!==this.geometryType);else{if(1===e){const e=t.coords.slice();e[0]-=512;const r=t.coords.slice();r[0]+=512,t.coords.push(...e,...r);const s=t.lengths[0];return void t.lengths.push(s,s)}this._wrapVertex(t.coords,0,2,e)}}_wrapVertex(t,e,r,s){const i=e*r,o=t[i];o<-definitions/* tileSize */.CQ*(s-2)?t[i]=o+definitions/* tileSize */.CQ*s:o>definitions/* tileSize */.CQ*(s-1)&&(t[i]=o-definitions/* tileSize */.CQ*s)}_readX(){const t=this._readGeometry();return null!=t?t.coords[0]:0}_readY(){const t=this._readGeometry();return null!=t?t.coords[1]:0}_readServerCentroid(){switch(this.geometryType){case"esriGeometryPolygon":{const t=(0,centroid/* polygonCentroid */.l8)(this._current.projectedGeometry),r=new OptimizedGeometry/* default */.A([],t);return (0,featureConversionUtils/* quantizeOptimizedGeometry */.Nl)(new OptimizedGeometry/* default */.A,r,this.hasZ,this.hasM,this.geometryType,this._tile.transform)}case"esriGeometryPolyline":{const e=this._current.projectedGeometry,r=(0,centroid/* ringsCentroid */.S8)(e.paths,this.hasZ),s=new OptimizedGeometry/* default */.A([],r);return (0,featureConversionUtils/* quantizeOptimizedGeometry */.Nl)(new OptimizedGeometry/* default */.A,s,this.hasZ,this.hasM,this.geometryType,this._tile.transform)}}return null}_readAttribute(t,e){const r=this._current.attributes[t];if(void 0!==r)return r;const s=t.toLowerCase();for(const i in this._current.attributes)if(i.toLowerCase()===s)return this._current.attributes[i]}_readAttributes(){return this._current.attributes}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/rbush.js
var rbush = __webpack_require__(73030);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules
var normalizeUtils = __webpack_require__(65231);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolDrawHelper.js + 4 modules
var CIMSymbolDrawHelper = __webpack_require__(26502);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/memoryEstimations.js
var memoryEstimations = __webpack_require__(4754);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/boundsUtils.js
var boundsUtils = __webpack_require__(36358);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js
var normalizeUtilsSync = __webpack_require__(14537);
;// ../node_modules/@arcgis/core/geometry/support/curves/curveUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function curveUtils_n(n){return"curveRings"in n&&!!n.curveRings?.length||"curvePaths"in n&&!!n.curvePaths?.length}function curveUtils_r(n){return"curveRings"in n?n.curveRings:n.curvePaths}function curveUtils_t(n){return"b"in n}function curveUtils_u(n){return"c"in n}function curveUtils_e(n){return Array.isArray(n)}function curveUtils_i(n){return"a"in n}function curveUtils_c(n){return 4===n.a.length}function curveUtils_f(n){return 7===n.a.length}function curveUtils_o(n){return curveUtils_t(n)?n.b[0]:curveUtils_u(n)?n.c[0]:curveUtils_i(n)?n.a[0]:n}function curveUtils_a(n){if(curveUtils_t(n)){const[r,t,u]=n.b;return{b:[[...r],[...t],[...u]]}}if(curveUtils_u(n)){const[r,t]=n.c;return{c:[[...r],[...t]]}}if(curveUtils_e(n))return[...n];if(curveUtils_c(n)){const[r,t,u,e]=n.a;return{a:[[...r],[...t],u,e]}}if(curveUtils_f(n)){const[r,t,u,e,i,c,f]=n.a;return{a:[[...r],[...t],u,e,i,c,f]}}return n}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
;// ../node_modules/@arcgis/core/geometry/support/curves/mathUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function mathUtils_r(t,n,r,o){return t[0]=n[0]*(1-o)+r[0]*o,t[1]=n[1]*(1-o)+r[1]*o,t}function mathUtils_o(t,r){return (0,vec2/* squaredDistance */.hG)(t,r)}function mathUtils_u(t,n,r){const u=mathUtils_o(n,r);if(0===u)return mathUtils_o(n,t);const c=(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0]);return c*c/u}function mathUtils_c(t,n,r,o,u){const[c,a]=n,[e,i]=r,[s,h]=o,[f,M]=u,m=(c-e)*(h-M)-(a-i)*(s-f);if(0===m)return null;const l=(c*i-a*e)*(s-f)-(c-e)*(s*M-h*f),I=(c*i-a*e)*(h-M)-(a-i)*(s*M-h*f);return t[0]=l/m,t[1]=I/m,t}function mathUtils_a(t,n){const r=Math.atan2(t,n);return r<0?r+2*Math.PI:r}function mathUtils_e(n,r,o){const[u,c,a,e]=o.a,i=Math.abs(n-r),s=i>Math.PI,h=i<Math.PI,f=(0,mathUtils/* floatEqualAbsolute */.Sp)(i,Math.PI);return(!f&&(s&&a||h&&!a)||f&&(n>r&&e||n<r&&!e))&&(n+=2*(Math.sign(r-n)||1)*Math.PI),n}function mathUtils_i(t,n,r){const o=2*Math.PI,u=t-n;return(r-n)*u<0?t-=(Math.trunc(u/o)+Math.sign(u))*o:u>=o&&(t-=Math.trunc(u/o)*o),t}function mathUtils_s(t,n,r,o=10){return n.map((n=>{let u=n;for(let c=0;c<o;c++){const[n,o,c,a,e,i]=r(u),s=t[0]-n,h=t[1]-o,f=-c,M=-a;u+=-(2*s*f+2*h*M)/(2*f*f+2*s*-e+2*M*M+2*h*-i||1e-6)}return u}))}

;// ../node_modules/@arcgis/core/geometry/support/curves/bezierCurveUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const bezierCurveUtils_e=(/* unused pure expression or super */ null && ([0,0]));function bezierCurveUtils_u(t,n,o,r,s){const c=1-s,e=c*c,u=s*s,i=e*c,a=3*s*e,f=3*u*c,m=u*s;return[t[0]*i+n[0]*a+o[0]*f+r[0]*m,t[1]*i+n[1]*a+o[1]*f+r[1]*m]}function bezierCurveUtils_i(t,n,o){const r=t,[s,c,e]=n.b;return bezierCurveUtils_u(r,c,e,s,o)}function bezierCurveUtils_a(t,n,o){const s=t,[c,u,i]=n.b,a=r([0,0],s,u,o),f=r(bezierCurveUtils_e,u,i,o),m=r([0,0],i,c,o),h=r([0,0],a,f,o),p=r([0,0],f,m,o);return[{b:[r([],h,p,o),a,h]},{b:[[...c],p,m]}]}function bezierCurveUtils_f(o,r,c){const e=o,[i,a,f]=r.b,m=s(c,[.1,.5,.9],(t=>{const n=1-t,[o,r]=bezierCurveUtils_u(e,a,f,i,t);return[o,r,3*n*n*(a[0]-e[0])+6*n*t*(f[0]-a[0])+3*t*t*(i[0]-f[0]),3*n*n*(a[1]-e[1])+6*n*t*(f[1]-a[1])+3*t*t*(i[1]-f[1]),6*n*(f[0]-2*a[0]+e[0])+6*t*(i[0]-2*f[0]+a[0]),6*n*(f[1]-2*a[1]+e[1])+6*t*(i[1]-2*f[1]+a[1])]})).map((t=>Math.min(1,Math.max(0,t))));m.push(0,1);let h=1/0;const p=m.map((t=>{const n=bezierCurveUtils_u(e,a,f,i,t),[o,r]=n,s=c[0]-o,m=c[1]-r,p=Math.sqrt(s*s+m*m);return h=Math.min(p,h),{t,curvePoint:n,distance:p}})),b=[];for(const s of p){const{t:o,distance:r}=s;t(r,h)&&!b.some((({t})=>n(t,o)))&&b.push(s)}return b}function m(t,n,r){const s=n,[c,e,u]=r.b;return o(t,s),o(t,e),o(t,u),o(t,c),t}function bezierCurveUtils_h(t,n,o){const r=16;let s=0,e=[n];for(let u=0;u<r;u++){let n=t;const r=[];for(const t of e)r.push(...bezierCurveUtils_a(n,t,.5)),n=t.b[0];e=r,n=t,s=0;let u=0;for(const t of e){const[o,r,e]=t.b,i=Math.sqrt(c(n,o));s+=(i+(Math.sqrt(c(n,r))+Math.sqrt(c(r,e))+Math.sqrt(c(e,o))))/2,u+=i,n=o}if(s-u<o)return s}return s}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js
var mat3f64 = __webpack_require__(78607);
;// ../node_modules/@arcgis/core/geometry/support/curves/circleUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const circleUtils_c=2*Math.PI;class circleUtils_r{constructor(t,n,a,s,c,r){this.cx=t,this.cy=n,this.radius=a,this.thetaStart=s,this.thetaEnd=c,this.isInvalid=r}}function circleUtils_h(t,n){const{cx:a,cy:s,radius:c}=t;return[a+c*Math.cos(n),s+c*Math.sin(n)]}function circleUtils_i(t,n){const{thetaStart:a,thetaEnd:s}=t;return circleUtils_h(t,a*(1-n)+s*n)}function circleUtils_o(t,r){const{cx:h,cy:o,thetaStart:e,thetaEnd:u}=t,[d,M]=r;let f=a(M-o,d-h);f=s(f,e,u);const l=f-e;let m=l/(u-e);if(m<0||m>1){const t=Math.abs(l)%circleUtils_c,n=Math.abs(f-u)%circleUtils_c;m=Math.min(n,circleUtils_c-n)<Math.min(t,circleUtils_c-t)?1:0}const E=circleUtils_i(t,m);return{t:m,curvePoint:E,distance:Math.sqrt(n(r,E))}}function circleUtils_e(n,a){const{thetaStart:c,thetaEnd:r}=a,i=r-c;t(n,circleUtils_h(a,c)),t(n,circleUtils_h(a,r));for(let o=0;o<4;o++){let e=o*(Math.PI/2);e=s(e,c,r);const u=(e-c)/i;u>0&&u<1&&t(n,circleUtils_h(a,e))}return n}function circleUtils_u(t){const{radius:n,thetaStart:a,thetaEnd:s}=t;return n*Math.abs(s-a)}

;// ../node_modules/@arcgis/core/geometry/support/curves/circularArcUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const circularArcUtils_m=(0,mat3f64/* create */.vt)();function circularArcUtils_l(o,n,c){const[i,s]=o,[l,e]=n,[a,f]=c,u=i*i+s*s,h=l*l+e*e,p=a*a+f*f;(0,mat3/* set */.hZ)(circularArcUtils_m,i,l,a,s,e,f,1,1,1);const j=(0,mat3/* determinant */.a4)(circularArcUtils_m);if(0===j)return null;(0,mat3/* set */.hZ)(circularArcUtils_m,u,h,p,s,e,f,1,1,1);const g=(0,mat3/* determinant */.a4)(circularArcUtils_m);(0,mat3/* set */.hZ)(circularArcUtils_m,u,h,p,i,l,a,1,1,1);return[g/j*.5,(0,mat3/* determinant */.a4)(circularArcUtils_m)/j*-.5]}function circularArcUtils_e(t,r){const[o,c]=r.c,m=circularArcUtils_l(t,c,o),e=null==m,a=m??mathUtils_r([],t,o,.5),[f,u]=t,[h,p]=c,[j,g]=o,[x,M]=a,b=f-x,U=u-M,q=Math.sqrt(b*b+U*U),w=mathUtils_a(u-M,f-x),I=mathUtils_a(p-M,h-x);let P=mathUtils_a(g-M,j-x);return(I-w)*(P-I)<0&&(P+=2*Math.sign(w-P)*Math.PI),new circleUtils_r(x,M,q,w,P,e)}function circularArcUtils_a(t,r,o){const n=c(t,o/2),i=c(t,o),s=c(t,(o+1)/2);return[{c:[i,n]},{c:[[...r.c[0]],s]}]}

;// ../node_modules/@arcgis/core/geometry/support/curves/ellipticArc4Utils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ellipticArc4Utils_h(r,h){const[n,c]=h.a,[i,e]=r,[m,M]=n,[f,l]=c,p=i-f,u=e-l,j=Math.sqrt(p*p+u*u),U=m-f,b=M-l,q=Math.sqrt(U*U+b*b),x=0===j||0===q||!(0,mathUtils/* floatEqualRelative */.b6)(j,q),I=j,P=mathUtils_a(e-l,i-f),d=mathUtils_e(mathUtils_a(M-l,m-f),P,h);return new circleUtils_r(f,l,I,P,d,x)}function ellipticArc4Utils_n(t,a,o){const{cx:s,cy:h,thetaStart:n,thetaEnd:c}=t,[i,e,m,M]=a.a,f=n*(1-o)+c*o;return[{a:[r(t,o),[s,h],Math.abs(f-n)<Math.PI?1:0,M]},{a:[[...i],[s,h],Math.abs(c-f)<Math.PI?1:0,M]}]}

;// ../node_modules/@arcgis/core/geometry/support/curves/ellipticArc7Utils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ellipticArc7Utils_m{constructor(t,s,n,o,r,a,c,i,u){this.cx=t,this.cy=s,this.a=n,this.b=o,this.cosR=r,this.sinR=a,this.u1=c,this.u2=i,this.isInvalid=u}}function b(t,s){const[n,o,r,a,c,i,e]=s.a,[f,M]=t,[l,b]=n,[p,R]=o,q=i*e,I=Math.cos(c),g=Math.sin(c),x=mathUtils_a(1/q*(M-R)*I-1/q*(f-p)*g,1/i*(M-R)*g+1/i*(f-p)*I),j=mathUtils_e(mathUtils_a(1/q*(b-R)*I-1/q*(l-p)*g,1/i*(b-R)*g+1/i*(l-p)*I),x,s);return new ellipticArc7Utils_m(p,R,i,q,I,g,x,j,0===i||0===q)}function p(t,s){const{a:n,b:o,cosR:r,sinR:a,cx:c,cy:i}=t,u=Math.cos(s),h=Math.sin(s);return[n*u*r-o*h*a+c,n*u*a+o*h*r+i]}function R(t,s){const{u1:n,u2:o}=t;return p(t,n*(1-s)+o*s)}function q(t,s,n){if(n<0||n>1)return[];if(0===n||1===n)return[i(s)];const[o,[r,a],c,u,h,e,f]=s.a,{u1:M,u2:l}=t,m=M*(1-n)+l*n;return[{a:[[...R(t,n)],[r,a],Math.abs(m-M)<Math.PI?1:0,u,h,e,f]},{a:[[...o],[r,a],Math.abs(l-m)<Math.PI?1:0,u,h,e,f]}]}function I(t,s){const{a:n,b:o,cosR:r,sinR:a,u1:c,u2:i}=t,u=Math.PI/6,h=e(s,[1*u,2*u,4*u,5*u,7*u,8*u,10*u,11*u],(s=>{const c=Math.cos(s),i=Math.sin(s),[u,h]=p(t,s);return[u,h,-n*r*i-o*a*c,-n*a*i+o*r*c,-n*r*c+o*a*i,-n*a*c-o*r*i]})).map((t=>f(t,c,i)));h.push(c,i);let M,l,m=1/0;for(const e of h){const n=(e-c)/(i-c);if(n<0||n>1)continue;const o=p(t,e),[r,a]=o,u=s[0]-r,h=s[1]-a,f=u*u+h*h;f<m&&(M=n,l=o,m=f)}return{t:M,curvePoint:l,distance:Math.sqrt(m)}}function g(t,s,n){const o=b(s,n),{a:r,b:a,u1:i,u2:u,cosR:h,sinR:e,isInvalid:M}=o,l=u-i,m=n.a[0];if(c(t,s),c(t,m),M)return t;const R=Math.atan2(-a*e,r*h),q=R+Math.PI,I=Math.atan2(a*h,r*e),g=I+Math.PI;for(const b of[R,q,I,g]){const s=f(b,i,u),n=(s-i)/l;n>0&&n<1&&c(t,p(o,s))}return t}function x(t,s,n){const[o,r,a,c,i,u,h]=s.a,e=b(t,s),{u1:f,u2:m,isInvalid:q}=e,I=m-f;if(q)return Math.sqrt(M(t,o));const g=14,x=[0,0];let j=0,v=[R(e,0),R(e,.25),R(e,.5),R(e,.75),R(e,1)];for(let b=0;b<g;b++){const t=v.length-1,s=I/(2*t),o=[];for(let n=0;n<t;n++)o.push(v[n]),o.push(p(e,f+(2*n+1)*s));o.push(v[v.length-1]),v=o,j=0;let a=0;for(let n=1;n<v.length;n++){const t=v[n-1],s=v[n];if(j+=Math.sqrt(M(t,s)),n>1){const o=v[n-2],c=l(x,o,t,r,s);a+=c?Math.sqrt(M(t,c)):Math.abs(s[0]-t[0])+Math.abs(s[1]-t[1])}else a+=j}if(a-j<n)return j}return j}const j=(0,mat3f64/* create */.vt)(),v=(0,mat3f64/* create */.vt)(),P=(0,mat3f64/* create */.vt)(),d=(0,mat3f64/* create */.vt)();function y(r,c,i){const[u,e,f,l,m,p,R]=c.a,q=b(r,c),{cosR:I,sinR:g,a:x,b:y,cx:U,cy:w}=q,B=a([0,0],u,i),k=a([0,0],e,i),z=i[0]*i[4]<0?1-l:l;{const s=x*x*g*g+y*y*I*I,n=2*(y*y-x*x)*g*I,o=x*x*I*I+y*y*g*g,r=-2*s*U-n*w,a=-n*U-2*o*w;t(j,s,n/2,r/2,n/2,o,a/2,r/2,a/2,s*U*U+n*U*w+o*w*w-x*x*y*y)}if(s(v,i),null==v){const t=a([0,0],r,i);return{a:[B,k,f,l,h(B[1],B[0]),Math.sqrt(M(B,t))/2,0]}}n(P,v),o(d,o(d,P,j),v);{const t=d[0],s=2*d[1],n=d[4],o=2*d[2],r=2*d[5],a=s*s-4*t*n,c=2*(t*r*r+n*o*o-s*o*r+a*d[8]),i=Math.sqrt((t-n)**2+s*s),u=-Math.sqrt(c*(t+n+i))/a,e=-Math.sqrt(c*(t+n-i))/a;return{a:[B,k,f,z,.5*h(-s,n-t),u,e/u]}}}

;// ../node_modules/@arcgis/core/geometry/support/curves/densifyCurvedGeometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const densifyCurvedGeometry_f={maxSegmentLength:1/0,maxDeviation:1/0,maxSegmentsPerCurve:12e3,minSegmentsPerCurve:1},densifyCurvedGeometry_v=1e-6,densifyCurvedGeometry_g=[0,0];class densifyCurvedGeometry_P{constructor(t,s){this.curveStart=t,this.curveEnd=s,this.tStart=0,this.tEnd=0,this.tEndStack=[],this.arcEndStack=[]}get stackSize(){return this.tEndStack.length}initialize(t,s){this.tStart=0,this.arcStart=t,this.tEndStack.push(1),this.arcEndStack.push(s)}splitAt(t){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(t),this.arcEndStack.push(this.interpolate(t))}splitInHalf(){return this.splitAt((this.tStart+this.tEnd)/2)}pop(){this.tEnd=this.tEndStack.pop(),this.arcEnd=this.arcEndStack.pop()}next(){this.tStart=this.tEnd,this.arcStart=this.arcEnd}densify(t,{maxDeviation:s,maxSegmentLength:i,maxSegmentsPerCurve:n,minSegmentsPerCurve:r}){const e=i*i,a=s*s,h=1/n,c=this.interpolate(0),o=this.interpolate(1);mathUtils_o(this.curveStart,c)>densifyCurvedGeometry_v&&t.push(c),this.initialize(c,o);const u=1/r;for(let p=r-1;p>0;p--){const t=p*u;this.pop(),this.splitAt(t)}for(;this.stackSize>0;)this.pop(),this.tStart===this.tEnd||this.tEnd-this.tStart<h||(0===e||!isFinite(e)||mathUtils_o(this.arcStart,this.arcEnd)<e)&&(0===a||!isFinite(a)||this.getDeviation2()<a)?(t.push(this.arcEnd),this.next()):this.splitInHalf();return mathUtils_o(this.curveEnd,o)>densifyCurvedGeometry_v&&t.push([...this.curveEnd]),t}}class densifyCurvedGeometry_x extends densifyCurvedGeometry_P{constructor(t,s){const[i,n,r]=s.b;super(t,i),this._controlPointsStack=[],this._curveControlPoints=[n,r],this._arcControlPoints=[n,r],this._controlPointsStack.push(this._arcControlPoints)}splitAt(t){const{arcStart:s,arcEnd:i,tStart:n,tEnd:r}=this,[e,a]=this._arcControlPoints,h=(t-n)/(r-n),c=mathUtils_r([],s,e,h),o=mathUtils_r(densifyCurvedGeometry_g,e,a,h),u=mathUtils_r([],a,i,h),p=mathUtils_r([],c,o,h),d=mathUtils_r([],o,u,h),l=mathUtils_r([],p,d,h);this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this._controlPointsStack.push([d,u]),this.tEndStack.push(t),this.arcEndStack.push(l),this._arcControlPoints[0]=c,this._arcControlPoints[1]=p,this._controlPointsStack.push(this._arcControlPoints)}pop(){super.pop(),this._arcControlPoints=this._controlPointsStack.pop()}interpolate(s){const{curveStart:i,curveEnd:n}=this,[r,e]=this._curveControlPoints;return bezierCurveUtils_u(i,r,e,n,s)}getDeviation2(){const{arcStart:t,arcEnd:s}=this,[i,n]=this._arcControlPoints;return Math.max(mathUtils_u(i,t,s),mathUtils_u(n,t,s))}}class k extends densifyCurvedGeometry_P{constructor(t,s){const[i]=s.a;super(t,i),this._derivedEllipse=b(t,s)}pop(){super.pop(),this._tMid=(this.tStart+this.tEnd)/2,this._arcMid=this.interpolate(this._tMid)}splitInHalf(){this.tEndStack.push(this.tEnd),this.arcEndStack.push(this.arcEnd),this.tEndStack.push(this._tMid),this.arcEndStack.push(this._arcMid)}interpolate(t){return R(this._derivedEllipse,t)}getDeviation2(){return mathUtils_u(this._arcMid,this.arcStart,this.arcEnd)}}function C(t,s,i,{cx:n,cy:r,radius:e,thetaStart:a,thetaEnd:h,isInvalid:c},{maxDeviation:o,maxSegmentLength:u,maxSegmentsPerCurve:p,minSegmentsPerCurve:d}){if(c)return t.push([...i]),t;const l=2*e,S=[n+e*Math.cos(a),r+e*Math.sin(a)],m=[n+e*Math.cos(h),r+e*Math.sin(h)];mathUtils_o(s,S)>densifyCurvedGeometry_v&&t.push(S);const f=Math.abs(h-a),g=u<l?2*Math.asin(u/l):f,P=o<=e?2*Math.acos(1-o/e):f,x=Math.min(g,P),k=Math.min(p,Math.max(d,Math.ceil(Math.abs(f/x)))),C=1/k;for(let E=1;E<k;E++){const s=E*C,i=a*(1-s)+h*s;t.push([n+e*Math.cos(i),r+e*Math.sin(i)])}return t.push(m),mathUtils_o(i,m)>densifyCurvedGeometry_v&&t.push([...i]),t}function _(t,s,i,n){return new densifyCurvedGeometry_x(s,i).densify(t,n)}function densifyCurvedGeometry_M(t,i,n,r){const e=circularArcUtils_e(i,n),[a]=n.c;return C(t,i,a,e,r)}function D(t,s,i,n){const r=ellipticArc4Utils_h(s,i),[e]=i.a;return C(t,s,e,r,n)}function A(t,s,i,n){const[r,e,a,h,c,o,u]=i.a;return 0===o||0===u?(t.push([...r]),t):new k(s,i).densify(t,n)}function densifyCurvedGeometry_j(t,s,i,n){if(curveUtils_e(i))return t.push([...i]),t;if(curveUtils_t(i))return _(t,s,i,n);if(curveUtils_u(i))return densifyCurvedGeometry_M(t,s,i,n);if(curveUtils_i(i)){if(curveUtils_c(i))return D(t,s,i,n);if(curveUtils_f(i))return A(t,s,i,n)}return t}function L(t,s){if(!curveUtils_n(t))return t;const e=curveUtils_r(t),a=[];for(const i of e){const t=[];for(let n=0,e=1;e<i.length;n=e++){const a=curveUtils_o(i[n]);0===n&&t.push(a);densifyCurvedGeometry_j(t,a,i[e],{maxSegmentLength:s.maxSegmentLength??densifyCurvedGeometry_f.maxSegmentLength,maxDeviation:s.maxDeviation??densifyCurvedGeometry_f.maxDeviation,maxSegmentsPerCurve:s.maxSegmentsPerCurve??densifyCurvedGeometry_f.maxSegmentsPerCurve,minSegmentsPerCurve:Math.max(s.minSegmentsPerCurve??densifyCurvedGeometry_f.minSegmentsPerCurve,1)})}a.push(t)}return"curvePaths"in t?{paths:a,spatialReference:t.spatialReference}:{rings:a,spatialReference:t.spatialReference}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js
var dehydratedFeatures = __webpack_require__(28413);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js
var projectionSupport = __webpack_require__(23783);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/densificationConstants.js
var densificationConstants = __webpack_require__(31328);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js
var graphicsUtils = __webpack_require__(98502);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStoreItem.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GraphicStoreItem_v{static fromGraphic(t,e,i,s){return new GraphicStoreItem_v(t.geometry,e,t.attributes,t.visible,t.uid,t.version,i,s)}constructor(t,i,s,r,o,n,m,a){this.geometry=t,this.symbol=i,this.attributes=s,this.visible=r,this.objectId=o,this._version=n,this.zOrder=m,this.displayId=a,this.symbolBounds=(0,aaBoundingRect/* empty */.Ie)(),this.prevSymbolBounds=(0,aaBoundingRect/* empty */.Ie)(),this.size=[0,0,0,0],this.geometryBounds=(0,aaBoundingRect/* empty */.Ie)(),this._isDensificationDirty=!1,this._densificationDeviation=1/0}get projectedGeometry(){return this._projectedGeometry}get linearCIM(){return this.symbolResource?.symbolInfo.linearCIM}get usedMemory(){return 128+(0,memoryEstimations/* estimateAttributesMemory */.lM)(this.attributes)+(0,dehydratedFeatures/* estimateGeometryMemory */.gR)(this.geometry)}get hasAnimations(){const{linearCIM:t}=this;return!!t&&t.some((t=>"animationParams"in t&&!!t.animationParams))}get hasCurvedGeoemtry(){return null!=this.geometry&&"mesh"!==this.geometry.type&&curveUtils_n(this.geometry)}update(t,i,s){return(this._version!==t.version||this.zOrder!==s||this.symbol!==i)&&(this.prevSymbolBounds=this.symbolBounds,this.symbolBounds=(0,aaBoundingRect/* empty */.Ie)(),this.zOrder=s,this.geometry=t.geometry,this.attributes=t.attributes,this.symbol=i,this.visible=t.visible,this._version=t.version,this.symbolResource=null,this._projectedGeometry=null,(0,aaBoundingRect/* empty */.Ie)(this.geometryBounds),this._minDensificationDeviation=null,this._isDensificationDirty=!0,!0)}updateDensificationResolution(t){if(!this.hasCurvedGeoemtry)return!1;const e=Math.max(GraphicStoreItem_D(t),this._minDensificationDeviation??0);return e!==this._densificationDeviation&&(this._densificationDeviation=e,this._isDensificationDirty=!0,!0)}async projectAndNormalize(t){let e,o=this.geometry;if(o&&o.spatialReference&&"mesh"!==o.type&&("extent"===o.type&&(o=(0,graphicsUtils/* polygonFromExtent */.DF)(o)),e=curveUtils_n(o)?L(o,{maxSegmentLength:1/0,minSegmentsPerCurve:(0,densificationConstants/* getCoarseSegmentsPerCurve */.an)()}):o.toJSON(),this._projectedGeometry=await GraphicStoreItem_j(e,o.spatialReference,t),(0,boundsUtils/* getBoundsXY */.Rg)(this.geometryBounds,this._projectedGeometry),this.hasCurvedGeoemtry&&null!=this._projectedGeometry)){const t=(0,aaBoundingRect/* width */.VL)(this.geometryBounds),e=(0,aaBoundingRect/* height */.uJ)(this.geometryBounds);this._minDensificationDeviation=GraphicStoreItem_b(t,e)}}async densifyCurvedGeometryForDisplay(t){if(!this.hasCurvedGeoemtry||!this._isDensificationDirty)return;this._isDensificationDirty=!1;const e=this.geometry;if(!e||!e.spatialReference||"mesh"===e.type)return;const i=t.metersPerUnit/e.spatialReference.metersPerUnit,s=this._densificationDeviation*i,r=L(e,{maxDeviation:s,minSegmentsPerCurve:(0,densificationConstants/* getMinSegmentsPerCurve */.VS)()});this._projectedGeometry=await GraphicStoreItem_j(r,e.spatialReference,t)}}async function GraphicStoreItem_j(t,e,i){await (0,projectionSupport/* checkProjectionSupport */.Nk)(t.spatialReference,i);const s=(0,normalizeUtilsSync/* normalizeCentralMeridianForDisplay */.b3)(t);if(!s)return;const r=(0,projectionSupport/* project */.Cv)(s,e,i);return r&&(0,coordsUtils/* closeRingsAndFixWinding */.uC)(r),(0,jsonUtils/* isExtent */.ZC)(r)?(0,graphicsUtils/* polygonFromExtent */.DF)(r):r}function GraphicStoreItem_D(t){return 2**Math.round(Math.log2(t))*(0,densificationConstants/* getMaxDeviationInPixels */.iW)()}function GraphicStoreItem_b(t,e){if(t>0&&e>0){const i=Math.min(t,e)/2,s=2*Math.PI/(0,densificationConstants/* getApproximateMaxDensificationSegments */.B1)();return i*(1-Math.cos(s/2))}return null}

;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicUpdateMessage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GraphicUpdateMessage_t{constructor(t,e,d){this.added=t,this.updated=e,this.removed=d}hasAnyUpdate(){return!!(this.added.length||this.updated.length||this.removed.length)}}

;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const GraphicStore_p=1e-5;function GraphicStore_(e,t){return t.zOrder-e.zOrder}class GraphicStore_y{constructor(e,t,s,o,i){this._items=new Map,this._boundsDirty=!1,this._outSpatialReference=e,this._cimResourceManager=t,this._hittestDrawHelper=new CIMSymbolDrawHelper/* HittestDrawHelper */.CK(t),this._tileInfoView=s,this._store=i;const r=s.getClosestInfoForScale(o);this._resolution=this._tileInfoView.getTileResolution(r.level)}destroy(){this._hittestDrawHelper.destroy()}items(){return this._items.values()}getItem(e){return this._items.get(e)}async update(e,t,s){const o=[],i=[],r=[],n=new Set,m=[];let l=0;for(const a of e.items){l++;const e=a.uid,r=this._items.get(e),u=t(a);if(n.add(e),r){const e=r.update(a,u,l),t=r.updateDensificationResolution(this._resolution);e&&m.push(this._updateItem(r,s)),(e||t)&&i.push(r);continue}const h=this._store.createDisplayIdForObjectId(e),d=GraphicStoreItem_v.fromGraphic(a,u,l,h);d.updateDensificationResolution(this._resolution),m.push(this._updateItem(d,s)),this._items.set(d.objectId,d),o.push(d)}for(const[a,u]of this._items.entries())n.has(a)||(this._store.releaseDisplayIdForObjectId(a),this._items.delete(a),r.push(u));return await Promise.all(m),this._index=null,new GraphicUpdateMessage_t(o,i,r)}updateLevel(e){if(this._resolution===e)return!1;this._index=null,this._boundsDirty=!0,this._resolution=e;for(const t of this.items())if(t.hasCurvedGeoemtry)return!0;return!1}hitTest(e,t,i,n,m){const l=(0,has/* default */.A)("esri-mobile"),c=l?definitions/* hittestToleranceMobile */.fy:definitions/* hittestToleranceDesktop */.V3,f=c+(l?0:definitions/* hittestToleranceSmallSymbol */._M);e=(0,normalizeUtils/* normalizeMapX */.mT)(e,this._tileInfoView.spatialReference);const p=n*window.devicePixelRatio*f,y=(0,aaBoundingRect/* create */.vt)();y[0]=e-p,y[1]=t-p,y[2]=e+p,y[3]=t+p;const b=n*window.devicePixelRatio*c,I=(0,aaBoundingRect/* create */.vt)();I[0]=e-b,I[1]=t-b,I[2]=e+b,I[3]=t+b;const g=.5*n*(f+graphicsUtils/* pixelBuffer */.RA),w=this._searchIndex(e-g,t-g,e+g,t+g);if(!w||0===w.length)return[];const x=[],j=(0,aaBoundingRect/* create */.vt)(),R=(0,aaBoundingRect/* create */.vt)();for(const s of w){if(!s.visible)continue;const{geometryBounds:e,symbolResource:t}=s;this._getSymbolBounds(j,t,e,R,m),R[3]=R[2]=R[1]=R[0]=0,(0,aaBoundingRect/* intersects */.HY)(j,y)&&x.push(s)}if(0===x.length)return[];const S=this._hittestDrawHelper,B=[];for(const s of x){const{projectedGeometry:e,symbolResource:t}=s;if(!t)continue;const{textInfo:o,symbolInfo:i}=t,r=i.cimSymbol;S.hitTest(I,r.symbol,e,o,m,n)&&B.push(s)}return B.sort(GraphicStore_),B.map((e=>e.objectId))}queryItems(e){return 0===this._items.size?[]:this._searchForItems(e)}clear(){this._items.clear(),this._index=null}async _updateItem(e,t){await e.projectAndNormalize(this._outSpatialReference),await t(e);const{size:s}=e;s[0]=s[1]=s[2]=s[3]=0,this._getSymbolBounds(e.symbolBounds,e.symbolResource,e.geometryBounds,e.size,0)}_searchIndex(e,s,o,i){return this._boundsDirty&&(this._items.forEach((e=>this._getSymbolBounds(e.symbolBounds,e.symbolResource,e.geometryBounds,e.size,0))),this._boundsDirty=!1),this._index||(this._index=(0,rbush.r)(9,(e=>({minX:e.symbolBounds[0],minY:e.symbolBounds[1],maxX:e.symbolBounds[2],maxY:e.symbolBounds[3]}))),this._index.load(Array.from(this._items.values()))),this._index.search({minX:e,minY:s,maxX:o,maxY:i})}_searchForItems(e){const t=this._tileInfoView.spatialReference,o=e.bounds,i=(0,spatialReferenceUtils/* getInfo */.Vp)(t);if(i&&t.isWrappable){const[t,r]=i.valid,n=Math.abs(o[2]-r)<GraphicStore_p,m=Math.abs(o[0]-t)<GraphicStore_p;if((!n||!m)&&(n||m)){const i=e.resolution;let m;m=(0,aaBoundingRect/* create */.vt)(n?[t,o[1],t+i*graphicsUtils/* pixelBuffer */.RA,o[3]]:[r-i*graphicsUtils/* pixelBuffer */.RA,o[1],r,o[3]]);const l=this._searchIndex(o[0],o[1],o[2],o[3]),a=this._searchIndex(m[0],m[1],m[2],m[3]);return[...new Set([...l,...a])]}}return this._searchIndex(o[0],o[1],o[2],o[3])}_getSymbolBounds(t,o,r,n,m){if(!o||!o.symbolInfo.linearCIM)return null;if(t||(t=(0,aaBoundingRect/* create */.vt)()),(0,aaBoundingRect/* copy */.C)(t,r),!n||0===n[0]&&0===n[1]&&0===n[2]&&0===n[3]){const{textInfo:t,symbolInfo:s}=o,i=s.cimSymbol;n||(n=[0,0,0,0]);const r=CIMSymbolHelper/* CIMSymbolInflatedSizeHelper */.Sc.getSymbolInflateSize(n,i.symbol,this._cimResourceManager,m,t);n[0]=(0,screenUtils/* pt2px */.Lz)(r[0]),n[1]=(0,screenUtils/* pt2px */.Lz)(r[1]),n[2]=(0,screenUtils/* pt2px */.Lz)(r[2]),n[3]=(0,screenUtils/* pt2px */.Lz)(r[3])}const a=this._resolution,u=CIMSymbolHelper/* CIMSymbolInflatedSizeHelper */.Sc.safeSize(n);return t[0]-=u*a,t[1]-=u*a,t[2]+=u*a,t[3]+=u*a,t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js
var FeatureCommandQueue = __webpack_require__(46934);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/UpdateTracking2D.js
var UpdateTracking2D = __webpack_require__(64496);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class F{static getOrCreate(e,t,s){let r=t.get(e.id);return r||(r=new F(e,s),t.set(e.id,r)),r}static fromItems(e,t,s){const r=new F(e,s);for(const i of t)r.append(i);return r}constructor(e,t){this.tile=e,this.metadata=t,this.addedOrModified=[],this.removed=[],this.objectIdMap=null}get reader(){return this._reader||(this._reader=GraphicsReader_a.from(this.addedOrModified,this.tile,this.metadata)),this._reader}append(e){this.addedOrModified.push(e),e.hasAnimations&&(this.objectIdMap=this.objectIdMap||{},this.objectIdMap[e.displayId]=e.objectId)}}let O=class extends(Identifiable/* default */.A.IdentifiableMixin(Accessor/* default */.A)){constructor(e){super(e),this._attached=!1,this._tiles=new Map,this._controller=new AbortController,this._hashToSymbolInfo=new Map,this._lastCleanup=performance.now(),this._cleanupRequired=!0,this.lastUpdateId=-1,this.renderer=null,this._updateTracking=new UpdateTracking2D/* UpdateTracking2D */.F({debugName:"GraphicsView2D"}),this.updateRequested=!1,this.defaultPointSymbolEnabled=!0,this._commandQueue=new FeatureCommandQueue/* FeatureCommandQueue */.j({process:e=>{if("update"===e.type)return this._update();throw new Error("InternalError: Unsupported command")}}),this.graphicUpdateHandler=this.graphicUpdateHandler.bind(this)}destroy(){this.container.destroy(),this.view=null,this.renderer=null,this._set("graphics",null),this._controller.abort(),this._graphicStore.clear(),this._graphicStore.destroy(),this._attributeStore=null,this._hashToSymbolInfo.clear(),this._updateTracking.destroy(),this._commandQueue.destroy()}_initAttributeStore(){this._storage=new ComputedAttributeStorage/* ComputedAttributeStorage */.l({spatialReference:this.view.spatialReference,fields:new FieldsIndex/* default */.A}),this._attributeStore=new AttributeStore/* AttributeStore */.K({isLocal:!0,update:e=>{(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView2D.AttributeStoreView.updateStart`,{message:e}),this.container.attributeView.requestUpdate(e),this.container.requestRender(),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView2D.AttributeStoreView.updateEnd`,{message:e})}});const e=(0,StorageSchema/* createStorageSchema */.T9)(null,[]);this._attributeStore.update(e,this._storage,null),this.container.checkHighlight=()=>this._attributeStore.hasHighlight}initialize(){this._initAttributeStore(),this._metadata=FeatureMetadata/* GraphicsMetadata */.h.createGraphics(this.view.spatialReference),this._resourceProxy=new ResourceProxy/* ResourceProxy */.J({fetch:e=>Promise.all(e.map((e=>this.view.stage.textureManager.rasterizeItem(e)))),fetchDictionary:e=>{throw new Error("InternalError: Graphics do not support Dictionary requests")}}),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this._effectiveRenderer),(()=>this._pushUpdate())),this.view.graphicsTileStore.on("update",this._onTileUpdate.bind(this)),this.container.on("attach",(()=>{this.addHandles([this.graphics.on("change",(()=>this._pushUpdate()))]),this._graphicStore?.destroy(),this._graphicStore=new GraphicStore_y(this.view.spatialReference,this._cimResourceManager,this.view.featuresTilingScheme,this.view.state.scale,this._attributeStore),this._attached=!0,this.requestUpdate(),this._pushUpdate()}))]),this._updateTracking.addUpdateTracking("CommandQueue",this._commandQueue.updateTracking);const e=this.view.graphicsTileStore.tiles;this._onTileUpdate({added:e,removed:[]})}get _effectiveRenderer(){return"function"==typeof this.renderer?this.renderer():this.renderer}get _cimResourceManager(){return this.view.stage.textureManager.resourceManager}get updating(){const e=!this._attached||this._updateTracking.updating;return (0,has/* default */.A)("esri-2d-log-updating")&&console.log(`Updating GraphicsView2D: ${e}\n  -> attaching ${!this._attached}\n  -> updateTracking ${this._updateTracking.updating}`),e}hitTest(e){if(!this.view||this.view.suspended)return[];const{resolution:t,rotation:r}=this.view.state,i=this._graphicStore.hitTest(e.x,e.y,2,t,r),o=new Set(i),a=this.graphics.items.reduce(((e,t)=>(o.has(t.uid)&&e.set(t.uid,t),e)),new Map);return i.map((e=>a.get(e))).filter(arrayUtils/* isSome */.Ru)}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback()),this.notifyChange("updating")}processUpdate(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))}viewChange(){this.requestUpdate()}setHighlight(e){const t=[];for(const{objectId:s,highlightFlags:r}of e){const e=this._graphicStore.getItem(s)?.displayId;t.push({objectId:s,highlightFlags:r,displayId:e})}this._attributeStore.setHighlight(t,e),this._pushUpdate()}graphicUpdateHandler(e){this._pushUpdate()}update(e){this.updateRequested=!1,this._attached&&this._graphicStore.updateLevel(e.state.resolution)&&this.pushUpdate()}pushUpdate(){this._pushUpdate()}_pushUpdate(){(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._commandQueue.push({type:"update"}))}async _update(){try{(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView._update start`);const e=await this._graphicStore.update(this.graphics,(e=>this._getSymbolForGraphic(e)),(e=>this._ensureSymbolResource(e)));for(const s of e.updated)this.container.restartAnimation(s.objectId);if(!e.hasAnyUpdate())return void this._attributeStore.sendUpdates();e.removed.length&&(this._cleanupRequired=!0),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView updateMessage`,e);const t=this._createTileMessages(e);await this._densifyItemsForDisplay(t),await this._fetchResources(t),this._write(t);for(const s of e.added)this._setFilterState(s);for(const s of e.updated)this._setFilterState(s);(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView sendUpdate`,e),this._attributeStore.sendUpdates(),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`[Id: ${this.layerId}] GraphicsView sendUpdate.await`,e)}catch(e){}this._cleanupSharedResources()}_createTileMessages(e){const t=new Map;for(const s of e.added){const e=this.view.graphicsTileStore.getIntersectingTiles(s.symbolBounds);for(const r of e){F.getOrCreate(r,t,this._metadata).append(s)}}for(const s of e.updated){const e=this.view.graphicsTileStore.getIntersectingTiles(s.prevSymbolBounds),r=this.view.graphicsTileStore.getIntersectingTiles(s.symbolBounds);for(const i of e){F.getOrCreate(i,t,this._metadata).removed.push(s.displayId)}for(const i of r){F.getOrCreate(i,t,this._metadata).append(s)}}for(const s of e.removed){const e=this.view.graphicsTileStore.getIntersectingTiles(s.symbolBounds);for(const r of e){F.getOrCreate(r,t,this._metadata).removed.push(s.displayId)}}return Array.from(t.values())}async _densifyItemsForDisplay(e){const t=new Map;for(const s of e)for(const e of s.addedOrModified)t.has(e)||t.set(e,e.densifyCurvedGeometryForDisplay(this.view.spatialReference));await Promise.all(t.values())}async _fetchResources(e){const t={timeZone:null,timeExtent:null};for(const{tile:s,reader:r}of e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Id[${this.layerId}] Tile[${s.id}] GraphicsView fetchResources`,e);const i=r.getCursor();for(;i.next();)for(const e of i.getMeshWriters())e.enqueueRequest(this._resourceProxy,i,s.createArcadeEvaluationOptions(t))}await this._resourceProxy.fetchEnqueuedResources()}_write(e){for(const t of e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Id[${this.layerId}] Tile[${t.tile.id}] GraphicsView write`,t);const e=this._writeMeshes(t);let s=this._tiles.get(t.tile.key);s||(s=this._createFeatureTile(t.tile.key)),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Id[${this.layerId}] Tile[${t.tile.id}] GraphicsView onTileData`,t),this.container.onTileData(s,{type:"update",modify:e,remove:t.removed,end:!1,attributeEpoch:this._attributeStore.epoch,objectIdMap:t.objectIdMap}),this.container.requestRender()}}_writeMeshes(e){const t={timeZone:null,timeExtent:null},s=new MeshData/* MeshData */.U(e.tile.id),r=e.reader.getCursor();for(;r.next();){s.entityStart(r.getDisplayId(),r.getZOrder());for(const i of r.getMeshWriters())i.write(s,this._resourceProxy,r,e.tile.createArcadeEvaluationOptions(t),e.tile.level);s.entityEnd()}return{...s.serialize().message,tileId:e.tile.id}}_setFilterState(e){const t=e.displayId,s=this._attributeStore.getHighlightFlags(e.objectId);this._attributeStore.setData(t,0,0,s|(e.visible?definitions/* filterFlag0 */.LY:0))}_getSymbolForGraphic(e){return null!=e.symbol?e.symbol:null!=this._effectiveRenderer?this._effectiveRenderer.getSymbol(e):this._getNullSymbol(e)}async _ensureSymbolResource(e){if(!e.symbol)return;const t=await this._getSymbolInfo(e.symbol);if(!t)return;const s=t.linearCIM.filter((e=>"text"===e.type));if(s.length>0){const r=await this._getTextResources(e,s);e.symbolResource={symbolInfo:t,textInfo:r}}else e.symbolResource={symbolInfo:t}}_getSymbolInfo(e){const t=e.hash();return this._hashToSymbolInfo.has(t)||this._hashToSymbolInfo.set(t,this._createSymbolInfo(t,e).catch((e=>null))),this._hashToSymbolInfo.get(t)}async _createSymbolInfo(e,t){const s=await this._convertToCIMSymbol(t),r=await this._createLinearCIM(s);return{hash:e,cimSymbol:s,linearCIM:r,meshWriters:await this._createMeshWriters(s,r)}}async _convertToCIMSymbol(e){const t=(0,CIMSymbolHelper/* symbolToCIM */.Vb)(e);return"web-style"===t.type?this._convertToCIMSymbol(await t.fetchSymbol({acceptedFormats:["cim","web"]})):t}async _createLinearCIM(e){return await Promise.all(CIMSymbolHelper/* CIMSymbolHelper */.wp.fetchResources(e.symbol,this._cimResourceManager,[])),this.view.stage.cimAnalyzer.analyzeSymbolReference(e,!1)}async _createMeshWriters(e,t){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const s=this.container.instanceStore,r=this.view.stage.meshWriterRegistry,i=await u(e,t,s);return Promise.all(i.map((e=>r.createMeshWriter(this._storage,this._resourceProxy,{tileInfo:this.view.featuresTilingScheme.tileInfo},e,null))))}_onTileUpdate(e){if(e.added&&e.added.length>0)for(const t of e.added)this._updateTracking.addPromise(this._addTile(t));if(e.removed&&e.removed.length>0)for(const t of e.removed)this._removeTile(t.key)}_createFeatureTile(e){const t=this.view.featuresTilingScheme.getTileBounds((0,aaBoundingRect/* create */.vt)(),e),s=this.view.featuresTilingScheme.getTileResolution(e.level),r=new FeatureTile/* FeatureTile */.R(e,s,t[0],t[3]);return this._tiles.set(e,r),this.container.addChild(r),r}async _addTile(e){if(!this._attached)return;const t=this._graphicStore.queryItems(e);if(!t.length)return;const s=this._createFeatureTile(e.key),r=F.fromItems(e,t,this._metadata);await this._densifyItemsForDisplay([r]),await this._fetchResources([r]);const i=this._writeMeshes(r);s.onMessage({type:"append",append:i,clear:!1,end:!0,attributeEpoch:this._attributeStore.epoch,objectIdMap:r.objectIdMap})}_removeTile(e){if(!this._tiles.has(e))return;const t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}_getNullSymbol(e){const t=e.geometry;return t?(0,jsonUtils/* isPolyline */.Rg)(t)?defaults/* errorPolylineSymbol2D */.x3:(0,jsonUtils/* isPolygon */.Bi)(t)||(0,jsonUtils/* isExtent */.ZC)(t)?defaults/* errorPolygonSymbol2D */.JJ:this.defaultPointSymbolEnabled?defaults/* errorPointSymbol2D */.jM:null:this.defaultPointSymbolEnabled?defaults/* errorPointSymbol2D */.jM:null}async _getTextResources(e,t){const s=new Array,r=new Array;for(let i=0;i<t.length;i++){const o=t[i],{resource:a,overrides:n}=o.textRasterizationParam;if(n?.length>0){const t=OverrideHelper.OverrideHelper.resolveSymbolOverrides({type:"CIMSymbolReference",primitiveOverrides:n,symbol:{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,size:a.symbol.height,anchorPointUnits:"Relative",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:a.symbol,textString:a.textString}],scaleSymbolsProportionally:!0,respectFrame:!0}]}},e,this.view.spatialReference,null,(0,jsonUtils/* getJsonType */.$B)(e.projectedGeometry),null,null);t.then((e=>{const t=e.symbolLayers[0],{textString:s}=t.markerGraphics[0];r.push({type:"cim-rasterization-info",resource:{type:"text",textString:s||"",font:a.font}}),o.text=a.textString=s||""})),s.push(t)}else r.push({type:"cim-rasterization-info",resource:a})}s.length>0&&await Promise.all(s);const o=r.map((e=>this.view.stage.textureManager.rasterizeItem(e))),a=await Promise.all(o);(0,maybe/* assertIsSome */.Lw)(a);const n=new Map;for(let i=0;i<t.length;i++){const e=t[i];n.set(e.textRasterizationParam.resource.symbol,{text:e.text,glyphMosaicItems:a[i]})}return n}_cleanupSharedResources(){if(!this._cleanupRequired)return;const e=performance.now();if(e-this._lastCleanup<5e3)return;this._cleanupRequired=!1,this._lastCleanup=e;const t=new Set;for(const r of this._graphicStore.items()){const e=r.symbolResource?.symbolInfo.hash;t.add(e)}const s=new Set(this._hashToSymbolInfo.keys());for(const r of s.values())t.has(r)||this._hashToSymbolInfo.delete(r)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"_effectiveRenderer",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],O.prototype,"layerId",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],O.prototype,"requestUpdateCallback",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],O.prototype,"graphics",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"renderer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"_updateTracking",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],O.prototype,"defaultPointSymbolEnabled",void 0),O=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.graphics.GraphicsView2D")],O);


/***/ }),

/***/ 31328:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B1: () => (/* binding */ e),
/* harmony export */   VS: () => (/* binding */ i),
/* harmony export */   an: () => (/* binding */ n),
/* harmony export */   iW: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("curve-densification-coarse-segments")}function e(){return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("curve-densification-max-segments")}function i(){return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("curve-densification-min-segments")}function t(){return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("curve-densification-pixel-deviation")}


/***/ }),

/***/ 46934:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony export OverrideBatch */
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40189);
/* harmony import */ var _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92746);
/* harmony import */ var _UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(64496);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(){this.type="override-batch",this.messages=[],this._resovler=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .createResolver */ .Tw)()}get promise(){return this._resovler.promise}resolve(){this._resovler.resolve()}add(e){this.messages.push(e)}}class o{constructor(e){this.updateTracking=new _UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__/* .UpdateTracking2D */ .F({debugName:"FeatureCommandQueue"}),this.process=e.process,this._queueProcessor=new _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__.QueueProcessor({concurrency:1,process:async e=>{if("override-batch"===e.type){const e=this._nextOverrideBatch;if(null==e)throw new Error("InternalError: Override should be defined");return this._nextOverrideBatch=null,await this.process(e),void e.resolve()}return this.process(e)}})}destroy(){this.updateTracking.destroy(),this._queueProcessor.destroy(),this.clear()}clear(){this._queueProcessor.clear()}async push(r){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ignoreAbortErrors */ .QZ)(this.updateTracking.addPromise(this._doPush(r)))}async _doPush(e){const r=this._queueProcessor,s=r.last();switch(e.type){case"update":case"highlight":if(s?.type===e.type)return;return r.push(e);case"override":case"edit":return this._pushOverride(e)}}_pushOverride(e){return null==this._nextOverrideBatch&&(this._nextOverrideBatch=new i,this._queueProcessor.push(this._nextOverrideBatch)),this._nextOverrideBatch.add(e),this._nextOverrideBatch.promise}}


/***/ }),

/***/ 64496:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71416);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21564);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4238);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(t){super(t),this.debugName="",this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__/* .UpdatingHandles */ .U,this._idToUpdatingState=new _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("esri-2d-log-updating")){const r=Array.from(this._idToUpdatingState.entries()).map((([t,r])=>`-> ${t}: ${r}`)).join("\n");console.log(`${this.debugName}: Updating: ${t}\n-> Handles: ${this._updatingHandles.updating}\n${r}`)}return t}addUpdateTracking(t,r){const s=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .watch */ .wB)((()=>r.updating),(r=>this._idToUpdatingState.set(t,r)),{sync:!0});this.addHandles(s)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({readOnly:!0})],d.prototype,"updating",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.views.2d.layers.support.UpdateTracking2D")],d);


/***/ }),

/***/ 23590:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  ChildStage: () => (/* reexport */ ParentChildStage_n),
  GraphicContainer: () => (/* reexport */ GraphicContainer/* default */.A),
  GraphicsView2D: () => (/* reexport */ GraphicsView2D/* default */.A),
  GridView2D: () => (/* reexport */ GridView2D_w),
  LabelManager: () => (/* reexport */ LabelManager/* LabelManager */.C),
  MagnifierView2D: () => (/* reexport */ MagnifierView2D_c),
  MapViewNavigation: () => (/* reexport */ MapViewNavigation/* default */.A),
  ParentStage: () => (/* reexport */ ParentChildStage_i),
  Stage: () => (/* reexport */ Stage_v)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/scheduling.js
var scheduling = __webpack_require__(61449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/signal.js
var signal = __webpack_require__(40315);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/colorUtils.js
var colorUtils = __webpack_require__(775);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/fontUtils.js
var fontUtils = __webpack_require__(72777);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/animationDebugFlags.js
var animationDebugFlags = __webpack_require__(4293);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/defaultCIMValues.js
var defaultCIMValues = __webpack_require__(7591);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/SDFHelper.js
var SDFHelper = __webpack_require__(21422);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/instructions.js
var instructions = __webpack_require__(45987);
;// ../node_modules/@arcgis/core/symbols/cim/animationUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function animationUtils_f(t,e,n){return{transform:k(t,e,n.transform),fromColor:v(t,e,n.fromColor),toColor:O(t,e,n.toColor),colorMix:x(t,e,n.colorMix),toOpacity:D(t,e,n.toOpacity),opacityMix:L(t,e,n.opacityMix),shift:R(t,e,n.shift),hasAnimations:n.hasAnimations||p(e),hasShiftAnimation:n.hasShiftAnimation||u(e),hasMotionAnimations:n.hasMotionAnimations||S(e)}}function p(t){return!!t.animations&&t.animations.length>0}function u(t){return!!t.animations&&t.animations.some((t=>"CIMSymbolAnimationMoveAlongLine"===t.type))}const y=new Set(["CIMSymbolAnimationOffset","CIMSymbolAnimationRotation","CIMSymbolAnimationSize","CIMSymbolAnimationScale"]);function S(t){return!!t.animations&&t.animations.some((t=>y.has(t.type)))}function d(t){return!animationDebugFlags/* animationDebugFlags */.H.forceStaticPath&&(animationDebugFlags/* animationDebugFlags */.H.forceAnimatedPath||t.hasAnimations)}function animationUtils_M(e,n,o){if("CIMCharacterMarker"===n.type)return Logger/* default */.A.getLogger("animationUtils").error("#handleMarker()","CIM character markers do not support animations"),o;const i=(0,utils/* getProcessParam */.dI)(e,n,"OffsetX"),r=(0,utils/* getProcessParam */.dI)(e,n,"OffsetY");if("CIMPictureMarker"===n.type)return{...o,transform:{type:"AnimatedTransform",relativeTranslation:!1,absoluteScale:!0,translation:V([i,r]),rotation:V(0),scale:V((0,utils/* getProcessParam */.dI)(e,n,"Size")),parent:o.transform}};const s=n.frame,m=s.ymax-s.ymin;return{...o,transform:{type:"AnimatedTransform",relativeTranslation:!1,absoluteScale:!1,translation:V([i,r]),rotation:V(0),scale:V({type:"Process",op:"Divide",left:(0,utils/* getProcessParam */.dI)(e,n,"Size"),right:m}),parent:o.transform}}}function A(t,e){let n=0,o=0;const i="Absolute"!==t.anchorPointUnits;return t.anchorPoint&&(n=-t.anchorPoint.x,o=-t.anchorPoint.y),{...e,transform:{type:"AnimatedTransform",relativeTranslation:i,absoluteScale:!1,translation:V([n,o]),rotation:V(0),scale:V(1),parent:e.transform}}}function animationUtils_C(t,e){return"Absolute"===t.anchorPointUnits?e:A(t,e)}function animationUtils_g(t,e){return"Absolute"!==t.anchorPointUnits?e:A(t,e)}function h(t,e,n){return{...t,transform:{type:"AnimatedTransform",relativeTranslation:!1,absoluteScale:!1,translation:V([e,n]),rotation:V(0),scale:V(1),parent:t.transform}}}function P(t,e){const n=e?.5*-(e.xmin+e.xmax):0,o=e?.5*-(e.ymin+e.ymax):0;let i=0,a=0;if("x"in t&&"y"in t)i=t.x+n,a=t.y+o;else{const e=(0,SDFHelper/* getExtent */.Z7)(t);if(e){i=(e[0]+e[2])/2+n,a=(e[1]+e[3])/2+o}}return[i,a]}function b(t,e){switch(e.type){case"CIMPictureMarker":case"CIMVectorMarker":return (0,utils/* getProcessParam */.dI)(t,e,"Rotation")}return 0}function I(t,e){switch(e.type){case"CIMPictureMarker":case"CIMVectorMarker":return (0,utils/* getProcessParam */.dI)(t,e,"RotateClockwise")}return 0}function T(t,e){switch(e.type){case"CIMPointSymbol":case"CIMVectorMarker":return[1,1,1,1];case"CIMSolidStroke":case"CIMSolidFill":return (0,utils/* getProcessParam */.dI)(t,e,"Color");case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":return (0,utils/* getProcessParam */.dI)(t,e,"TintColor")}return[1,1,1,1]}function k(t,e,n){return{type:"AnimatedTransform",relativeTranslation:!1,absoluteScale:!1,translation:z(t,e),rotation:F(t,e),scale:j(t,e),parent:n}}function v(t,e,n){return{type:"AnimatedColor",color:V(T(t,e)),opacity:V(1),parent:n}}function O(t,e,n){const{animations:o}=e;let i=T(t,e);const r=o?.filter((t=>"CIMSymbolAnimationColor"===t.type))[0];return r&&(i=(0,utils/* getProcessParam */.dI)(t,r,"ToColor")),{type:"AnimatedColor",color:V(i),opacity:V(1),parent:n}}function x(t,e,n){const{animations:o}=e,i=o?.filter((t=>"CIMSymbolAnimationColor"===t.type))[0];return i?{type:"AnimatedColor",color:V([1,1,1,1]),opacity:{from:0,to:1,timing:w(t,i?.animatedSymbolProperties)},parent:[1,1,1,1]}:n}function D(t,e,n){const{animations:o}=e;let i=V(1);const r=o?.filter((t=>"CIMSymbolAnimationTransparency"===t.type))[0];if(r){i=V({type:"Process",op:"Transparency",value:(0,utils/* getProcessParam */.dI)(t,r,"ToTransparency")})}return{type:"AnimatedColor",color:V([1,1,1,1]),opacity:i,parent:n}}function L(t,e,n){const{animations:o}=e,i=o?.filter((t=>"CIMSymbolAnimationTransparency"===t.type))[0];return i?{type:"AnimatedColor",color:V([1,1,1,1]),opacity:{from:0,to:1,timing:w(t,i?.animatedSymbolProperties)},parent:[1,1,1,1]}:n}function R(t,e,n){const{animations:o}=e,i=o?.filter((t=>"CIMSymbolAnimationMoveAlongLine"===t.type))[0];if(!i)return n;let r,m;const l=w(t,i.animatedSymbolProperties),c=(0,utils/* hasProcessParam */.Je)(t,i,"DistanceAlong"),f=(0,utils/* hasProcessParam */.Je)(t,i,"Speed"),p=c&&(0,utils/* getProcessParam */.dI)(t,i,"DistanceAlong"),u=f&&(0,utils/* getProcessParam */.dI)(t,i,"Speed"),y=!0===i.continuous;if(!1!==p)r={type:"Process",op:"Divide",left:p,right:100},m=!0;else if(!1!==u)r={type:"Process",op:"Multiply",left:u,right:l.duration},m=!1;else{if(!y)throw new Error("Either distanceAlong, speed or continuous must be specified.");r=1,m=!0}return{type:"AnimatedShift",multiplyByLineLength:m,shift:{from:0,to:r,timing:l},parent:n}}function w(t,e){if(!e)return{duration:1,startTimeOffset:0,repeatDelay:0,timeOriginSelector:instructions/* TimeOrigin */.mv.Local,repeatType:enums/* AnimatedSymbolRepeatType */.fu.Loop,easing:enums/* AnimatedSymbolEasingType */.Hz.Linear,playAnimation:1,reverseAnimation:0};const r=(0,utils/* getProcessParam */.dI)(t,e,"Duration");let s;if((0,utils/* getProcessParam */.dI)(t,e,"RandomizeStartTime")){s={type:"Process",op:"Random",min:0,max:r,seed:(0,utils/* getProcessParam */.dI)(t,e,"RandomizeStartSeed")}}else s=(0,utils/* getProcessParam */.dI)(t,e,"StartTimeOffset");const m=(0,utils/* getProcessParam */.dI)(t,e,"RepeatDelay"),f=(0,utils/* getProcessParam */.dI)(t,e,"PlayAnimation"),p=(0,utils/* getProcessParam */.dI)(t,e,"ReverseAnimation"),u=(0,utils/* getValue */._W)(e.repeatType,defaultCIMValues/* defaultCIMValues */.D.CIMAnimatedSymbolProperties.repeattype);return{duration:r,startTimeOffset:s,repeatDelay:m,timeOriginSelector:u===enums/* AnimatedSymbolRepeatType */.fu.None?instructions/* TimeOrigin */.mv.Local:instructions/* TimeOrigin */.mv.Global,repeatType:u,easing:(0,utils/* getValue */._W)(e.easing,defaultCIMValues/* defaultCIMValues */.D.CIMAnimatedSymbolProperties.easing),playAnimation:f,reverseAnimation:p}}function j(t,e){const{animations:n}=e;let o;o="CIMPictureMarker"===e.type||"CIMVectorMarker"===e.type?(0,utils/* getProcessParam */.dI)(t,e,"Size"):"CIMSolidStroke"===e.type||"CIMPictureStroke"===e.type?(0,utils/* getProcessParam */.dI)(t,e,"Width"):(0,utils/* getSize */.YC)(e)||10;const i=n?.filter((t=>"CIMSymbolAnimationScale"===t.type))[0];if(!i){const e=n?.filter((t=>"CIMSymbolAnimationSize"===t.type))[0];if(!e)return V(1);return{from:1,to:{type:"Process",op:"Divide",left:(0,utils/* getProcessParam */.dI)(t,e,"ToSize"),right:o},timing:w(t,e.animatedSymbolProperties)}}return{from:1,to:(0,utils/* getProcessParam */.dI)(t,i,"ScaleFactor"),timing:w(t,i.animatedSymbolProperties)}}function z(t,e){const{animations:n}=e,o=n?.filter((t=>"CIMSymbolAnimationOffset"===t.type))[0];if(!o)return V([0,0]);return{from:[0,0],to:[(0,utils/* getProcessParam */.dI)(t,o,"OffsetX"),(0,utils/* getProcessParam */.dI)(t,o,"OffsetY")],timing:w(t,o.animatedSymbolProperties)}}function F(t,e){const{animations:n}=e,o=I(t,e),i={type:"Process",op:"Divide",left:b(t,e),right:{type:"Process",op:"Cond",condition:o,ifTrue:-1,ifFalse:1}},r=n?.filter((t=>"CIMSymbolAnimationRotation"===t.type))[0];if(!r)return V(i);const s={type:"Process",op:"Add",left:(0,utils/* getProcessParam */.dI)(t,r,"ToRotation"),right:{type:"Process",op:"Divide",left:i,right:-1}};return{from:i,to:{type:"Process",op:"Add",left:i,right:{type:"Process",op:"Cond",condition:(0,utils/* getProcessParam */.dI)(t,r,"RotateClockwise"),ifTrue:{type:"Process",op:"MatchWinding",sign:-1,angle:s},ifFalse:{type:"Process",op:"MatchWinding",sign:1,angle:s}}},timing:w(t,r.animatedSymbolProperties)}}function V(t){return{from:t,to:t,timing:{duration:1,startTimeOffset:0,repeatDelay:0,timeOriginSelector:instructions/* TimeOrigin */.mv.Local,repeatType:enums/* AnimatedSymbolRepeatType */.fu.Loop,easing:enums/* AnimatedSymbolEasingType */.Hz.Linear,playAnimation:1,reverseAnimation:0}}}function U(t){if(null==t)return!1;if("object"!=typeof t)return!1;if(t.animations&&Array.isArray(t.animations)&&t.animations.length>0)return!0;for(const e in t)if(U(t[e]))return!0;return!1}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/constants.js
var constants = __webpack_require__(6276);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/effects/CIMEffectHelper.js
var CIMEffectHelper = __webpack_require__(78006);
;// ../node_modules/@arcgis/core/symbols/cim/fitVectorMarker.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=.01;function fitVectorMarker_t(t,f){if(!t.frame)return t;const{markerGraphics:n}=t;if(!n||0===n.length)return t;let o=0,s=0,i=0,c=0;for(const m of n){const{geometry:a,symbol:t}=m;if(!a||!t||!("symbolLayers"in t))continue;const{symbolLayers:n}=t;if(n)for(const m of n){const{effects:t}=m,n=CIMEffectHelper/* CIMEffectHelper */.V.applyEffects(t,a,f),x=(0,SDFHelper/* getExtent */.Z7)(n);x&&(o=Math.min(o,x[0]),s=Math.min(s,x[1]),i=Math.max(i,x[2]),c=Math.max(c,x[3]))}}const{xmin:x,ymin:y,xmax:p,ymax:h}=t.frame,l=(p-x)/2,M=(h-y)/2,u=(p+x)/2,b=(h+y)/2;if(l<=0||M<=0)return t;const g=(u-o)/l,j=(i-u)/l,E=(b-s)/M,F=(c-b)/M,H=Math.max(Math.max(g,j),Math.max(E,F));return H<=1+a?t:(t=(0,lang/* clone */.o8)(t)).frame?(t.frame.xmin=(t.frame.xmin-u)*H+u,t.frame.ymin=(t.frame.ymin-b)*H+b,t.frame.xmax=(t.frame.xmax-u)*H+u,t.frame.ymax=(t.frame.ymax-b)*H+b,!1!==t.respectFrame&&(t.size*=H),t):t}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/OverrideHelper.js
var OverrideHelper = __webpack_require__(17125);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
;// ../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const q=()=>Logger/* default */.A.getLogger("esri.symbols.cim.cimAnalyzer");function K(e){const t=e.markerPlacement;return t&&t.angleToLine?enums/* Alignment */.C1.MAP:enums/* Alignment */.C1.SCREEN}class Q{constructor(e){this._cimLayers=[],this._poMap={},this._primitiveOverrides=[],this._hasTextStringTemplates=!1,e&&(this._resourceManager=e)}analyzeSymbolReference(t,r,i){if(this._cimLayers=i??[],!t)return this._cimLayers;if(this._reset(),this._hasTextStringTemplates=t.hasTextStringTemplates??!1,t.primitiveOverrides){this._primitiveOverrides=t.primitiveOverrides;for(const t of this._primitiveOverrides){const r=t.valueExpressionInfo;if(r)this._setPoMap(t.primitiveName,t.propertyName,r);else if(null!=t.value){let r=t.value;t.propertyName.includes("Color")&&((0,colorUtils/* isRGB */.IB)(r)&&(r=(0,utils/* colorToArray */.G9)(r)),r=(0,utils/* normalizeAlpha */.e6)(r)),this._setPoMap(t.primitiveName,t.propertyName,r)}}}return this._analyzeSymbol(t.symbol,r),this._cimLayers}_reset(){this._cimLayers=[],this._poMap={},this._primitiveOverrides=[]}_analyzeSymbol(e,t){switch(e?.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this._analyzeMultiLayerSymbol(e,t)}}_analyzeMultiLayerSymbol(e,t){const r=e?.symbolLayers;if(!r)return;for(let l=0;l<r.length;l++){const e=r[l];"CIMVectorMarker"===e.type&&(r[l]=fitVectorMarker_t(e,this._resourceManager.geometryEngine))}const i=e.effects;let o=enums/* Alignment */.C1.SCREEN;const a=(0,utils/* getSize */.YC)(e)??0;if("CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(o=enums/* Alignment */.C1.MAP),oe(r,i))return this._analyzeCompositeOutlineFill(r,i,a);let s={transform:[0,0,0,1],fromColor:[1,1,1,1],toColor:[1,1,1,1],colorMix:[0,0,0,0],toOpacity:[1,1,1,1],opacityMix:[0,0,0,0],shift:[1,1,1,1],hasAnimations:U(e),hasShiftAnimation:!1,hasMotionAnimations:!1};s=animationUtils_f(this._poMap,e,s);const p="CIMPolygonSymbol"===e.type;let c=r.length;for(;c--;){const l=r[c];if(!l||!1===l.enable)continue;let n;i?.length&&(n=[...i]);const m=l.effects;m?.length&&(i?n.push(...m):n=[...m]);let y=null;if(n){y=[];for(const e of n){const t=OverrideHelper.OverrideHelper.findEffectOverrides(e,this._primitiveOverrides);t&&y.push(t)}}const d=[];switch(OverrideHelper.OverrideHelper.findApplicableOverrides(l,this._primitiveOverrides,d),l.type){case"CIMSolidFill":this._analyzeSolidFill(l,y,s,(0,utils/* hasStrokeLayer */.Ke)(r));break;case"CIMPictureFill":this._analyzePictureFill(l,y,s);break;case"CIMHatchFill":this._analyzeHatchFill(l,y);break;case"CIMGradientFill":this._analyzeGradientFill(l,y);break;case"CIMSolidStroke":this._analyzeSolidStroke(l,y,p,a,s);break;case"CIMPictureStroke":this._analyzePictureStroke(l,y,p,a,s);break;case"CIMGradientStroke":this._analyzeGradientStroke(l,y,p,a);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":{"CIMLineSymbol"!==e.type&&"CIMPolygonSymbol"!==e.type||(o=K(l));const r=[],i=l.primitiveName;i&&r.push(i);const n=p&&(0,utils/* isCIMMarkerStrokePlacement */.zr)(l.markerPlacement);this._analyzeMarker(l,y,null,r,o,a,t,[],s,!1,n);break}default:q().error("Cannot analyze CIM layer",l.type)}}}_analyzeSolidFill(e,t,r,i){const{primitiveName:o,type:a}=e,s=(0,utils/* normalizeAlpha */.e6)(e.color),l=animationUtils_f(this._poMap,e,r);if(i||!t?.some((e=>"CIMGeometricEffectTaperedPolygon"===e.effect.type)))this._cimLayers.push({type:"fill",spriteRasterizationParam:null,colorLocked:!!e.colorLocked,color:this._getValueOrOverrideExpression(a,o,"Color",s),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t,applyRandomOffset:!1,sampleAlphaOnly:!0,hasUnresolvedReplacementColor:!1,animationParams:se(l)});else{const r=this._getValueOrOverrideExpression(a,o,"Color",s);this._cimLayers.push({type:"outlineFill",colorLocked:!!e.colorLocked,color:r,effects:t,outlineColor:r,outlineColorLocked:!!e.colorLocked,...constants/* antialiasingOutlineFillSettings */.Nw,outlineEffects:t})}}_analyzePictureFill(e,t,r){const{primitiveName:i,type:o}=e,a=(0,utils/* getTintColor */.Ny)(e),s=(0,utils/* getNumericValue */.$w)(e.height,defaultCIMValues/* defaultCIMValues */.D.CIMPictureFill.height);let l=(0,utils/* getNumericValue */.$w)(e.scaleX,1);if("width"in e&&"number"==typeof e.width){const t=e.width;let r=1;const i=this._resourceManager.getResource(e.url);null!=i&&(r=i.width/i.height),l/=r*(s/t)}const p={type:"sprite-rasterization-param",resource:e,overrides:this._getPrimitiveMaterialOverrides(i,o)},c=animationUtils_f(this._poMap,e,r);this._cimLayers.push({type:"fill",spriteRasterizationParam:p,colorLocked:!!e.colorLocked,effects:t,color:this._getValueOrOverrideExpression(o,i,"TintColor",a),height:this._getValueOrOverrideExpression(o,i,"Height",s),scaleX:this._getValueOrOverrideExpression(o,i,"ScaleX",l),angle:this._getValueOrOverrideExpression(o,i,"Rotation",(0,utils/* getNumericValue */.$w)(e.rotation)),offsetX:this._getValueOrOverrideExpression(o,i,"OffsetX",(0,utils/* getNumericValue */.$w)(e.offsetX)),offsetY:this._getValueOrOverrideExpression(o,i,"OffsetY",(0,utils/* getNumericValue */.$w)(e.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!1,hasUnresolvedReplacementColor:!1,animationParams:se(c)})}_analyzeHatchFill(e,t){const{primitiveName:r,type:i}=e,o=this._analyzeMaterialOverrides(r,["Rotation","OffsetX","OffsetY"]),a=(0,utils/* normalizePrimitiveOverrideProps */.pk)(o);let s=[255,255,255,1],l=!1;if(e.lineSymbol?.symbolLayers)for(const p of e.lineSymbol.symbolLayers){if("CIMSolidStroke"!==p.type)continue;const e=p.primitiveName??r;l||!e||p.colorLocked||null==this._poMap[e]?.Color&&null==this._poMap[e]?.StrokeColor||(s=(0,utils/* normalizeAlpha */.e6)(p.color),s=this._maybeGetValueOrOverrideExpression(e,"StrokeColor")??this._getValueOrOverrideExpression(i,e,"Color",s),l=!0);const t=this._maybeGetValueOrOverrideExpression(e,"StrokeWidth");if(t){let r=null,o=null;"number"==typeof t?r=t:o=t.valueExpressionInfo;let s=a.find((e=>"strokeWidth"===e.propertyName));s?s.propertyName="width":(s={type:"CIMPrimitiveOverride",primitiveName:e,propertyName:"width",valueExpressionInfo:o,value:r,defaultValue:(0,utils/* getDefaultCIMValue */.iA)(i,"width")},a.push(s))}}const n={type:"sprite-rasterization-param",resource:e,overrides:a};this._cimLayers.push({type:"fill",spriteRasterizationParam:n,colorLocked:!!e.colorLocked,effects:t,color:s,height:this._getValueOrOverrideExpression(i,r,"Separation",(0,utils/* getNumericValue */.$w)(e.separation,defaultCIMValues/* defaultCIMValues */.D.CIMHatchFill.separation)),scaleX:1,angle:this._getValueOrOverrideExpression(i,r,"Rotation",(0,utils/* getNumericValue */.$w)(e.rotation)),offsetX:this._getValueOrOverrideExpression(i,r,"OffsetX",(0,utils/* getNumericValue */.$w)(e.offsetX)),offsetY:this._getValueOrOverrideExpression(i,r,"OffsetY",(0,utils/* getNumericValue */.$w)(e.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0,hasUnresolvedReplacementColor:!l})}_analyzeGradientFill(e,t){const{angle:r,gradientMethod:i,gradientSize:o,gradientSizeUnits:a,gradientType:s,interval:l,primitiveName:n,type:p}=e,c=defaultCIMValues/* defaultCIMValues */.D.CIMGradientFill,m=e.colorRamp;this._cimLayers.push({type:"gradientFill",spriteRasterizationParam:{type:"sprite-rasterization-param",resource:e,overrides:this._getPrimitiveMaterialOverrides(n,p)},colorLocked:!1,effects:t,color:[255,255,255,1],gradientMethod:this._getValueOrOverrideExpression(p,n,"GradientMethod",i??"Linear"),angle:this._getValueOrOverrideExpression(p,n,"Angle",(0,utils/* getNumericValue */.$w)(r,c.angle)),gradientType:this._getValueOrOverrideExpression(p,n,"GradientType",s??c.gradientType),interval:this._getValueOrOverrideExpression(p,n,"Interval",(0,utils/* getNumericValue */.$w)(l,"CIMFixedColorRamp"===m.type?m.colors.length:c.interval)),gradientSize:this._getValueOrOverrideExpression(p,n,"GradientSize",(0,utils/* getNumericValue */.$w)(o,c.gradientSize)),gradientSizeUnits:"Absolute"===a?enums/* SymbolUnits */.OW.Absolute:"Relative"===a?enums/* SymbolUnits */.OW.Relative:c.gradientSizeUnits})}_analyzeCompositeOutlineFill(e,t,r){const i=e.find((e=>"CIMSolidFill"===e.type)),o=e.find((e=>"CIMSolidStroke"===e.type));if(null==i||null==o)return;const a=[...t??[],...i.effects??[]].map((e=>OverrideHelper.OverrideHelper.findEffectOverrides(e,this._primitiveOverrides))).filter((e=>null!=e)),s=[...t??[],...o.effects??[]].map((e=>OverrideHelper.OverrideHelper.findEffectOverrides(e,this._primitiveOverrides))).filter((e=>null!=e)),l=(0,utils/* getNumericValue */.$w)(o.width,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.width),n=(0,utils/* getEnum */.GV)(o.capStyle,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.capstyle),p=(0,utils/* getEnum */.GV)(o.joinStyle,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.joinstyle),c=o.miterLimit;this._cimLayers.push({type:"outlineFill",colorLocked:!!i.colorLocked,color:this._getValueOrOverrideExpression(i.type,i.primitiveName,"Color",(0,utils/* normalizeAlpha */.e6)(i.color)),effects:a,outlineColorLocked:!!o.colorLocked,outlineColor:this._getValueOrOverrideExpression(o.type,o.primitiveName,"Color",(0,utils/* normalizeAlpha */.e6)(o.color)),outlineWidth:this._getValueOrOverrideExpression(o.type,o.primitiveName,"Width",l),cap:this._getValueOrOverrideExpression(o.type,o.primitiveName,"CapStyle",n),join:this._getValueOrOverrideExpression(o.type,o.primitiveName,"JoinStyle",p),miterLimit:c&&this._getValueOrOverrideExpression(o.type,o.primitiveName,"MiterLimit",c),referenceWidth:r,outlineEffects:s})}_analyzeSolidStroke(e,t,r,i,o){const{primitiveName:a,type:s}=e,l=(0,utils/* normalizeAlpha */.e6)(e.color),p=(0,utils/* getNumericValue */.$w)(e.width,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.width),c=(0,utils/* getEnum */.GV)(e.capStyle,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.capstyle),m=(0,utils/* getEnum */.GV)(e.joinStyle,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.joinstyle),y=e.miterLimit;let d,h,f,u,v=[];if(this._analyzePrimitiveOverrides(a,t,null,null)&&(v=this._getPrimitiveMaterialOverrides(a,s)),t&&Array.isArray(t)&&t.length>0){const e=t[t.length-1].effect;e&&"CIMGeometricEffectDashes"===e.type&&"NoConstraint"===e.lineDashEnding&&(d=e.dashTemplate,h=e.scaleDash,f=e.offsetAlongLine,u=e.primitiveName,(t=[...t]).pop())}null!=u&&v.push(...this._getPrimitiveMaterialOverrides(u,s).filter((e=>"dashTemplate"===e.propertyName)));const g=void 0!==d?{type:"sprite-rasterization-param",resource:{type:"dash",dashTemplate:d,primitiveName:u},overrides:v}:null,_=animationUtils_f(this._poMap,e,o);this._cimLayers.push({type:"line",spriteRasterizationParam:g,isOutline:r,colorLocked:!!e.colorLocked,effects:t,color:this._getValueOrOverrideExpression(s,a,"Color",l),width:this._getValueOrOverrideExpression(s,a,"Width",p),cap:this._getValueOrOverrideExpression(s,a,"CapStyle",c),join:this._getValueOrOverrideExpression(s,a,"JoinStyle",m),miterLimit:y&&this._getValueOrOverrideExpression(s,a,"MiterLimit",y),referenceWidth:i,zOrder:$(e.name),dashTemplate:this._maybeGetValueOrOverrideExpression(u,"DashTemplate")??d,offsetAlongLine:this._getValueOrOverrideExpression(s,u,"OffsetAlongLine",f??0),scaleDash:h,sampleAlphaOnly:!0,animationParams:se(_)})}_analyzePictureStroke(e,t,r,i,o){const{primitiveName:a,type:s}=e,l=(0,utils/* getTintColor */.Ny)(e),p=(0,utils/* getNumericValue */.$w)(e.width,defaultCIMValues/* defaultCIMValues */.D.CIMPictureStroke.width),c=(0,utils/* getEnum */.GV)(e.capStyle,defaultCIMValues/* defaultCIMValues */.D.CIMPictureStroke.capstyle),m=(0,utils/* getEnum */.GV)(e.joinStyle,defaultCIMValues/* defaultCIMValues */.D.CIMPictureStroke.joinstyle),y=e.miterLimit,d={type:"sprite-rasterization-param",resource:e,overrides:this._getPrimitiveMaterialOverrides(a,s)},h=animationUtils_f(this._poMap,e,o);this._cimLayers.push({type:"line",spriteRasterizationParam:d,isOutline:r,colorLocked:!!e.colorLocked,effects:t,color:this._getValueOrOverrideExpression(s,a,"TintColor",l),width:this._getValueOrOverrideExpression(s,a,"Width",p),cap:this._getValueOrOverrideExpression(s,a,"CapStyle",c),join:this._getValueOrOverrideExpression(s,a,"JoinStyle",m),miterLimit:y&&this._getValueOrOverrideExpression(s,a,"MiterLimit",y),referenceWidth:i,zOrder:$(e.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1,animationParams:se(h)})}_analyzeGradientStroke(e,t,r,i){const{gradientMethod:o,gradientSize:a,gradientSizeUnits:s,gradientType:l,interval:n,primitiveName:p,type:c}=e,m=defaultCIMValues/* defaultCIMValues */.D.CIMGradientStroke,y=(0,utils/* getNumericValue */.$w)(e.width,m.width),d=(0,utils/* getEnum */.GV)(e.capStyle,m.capstyle),h=(0,utils/* getEnum */.GV)(e.joinStyle,m.joinstyle),f=e.miterLimit,u=e.colorRamp;this._cimLayers.push({type:"gradientStroke",spriteRasterizationParam:{type:"sprite-rasterization-param",resource:e,overrides:this._getPrimitiveMaterialOverrides(p,c)},colorLocked:!!e.colorLocked,effects:t,color:[255,255,255,1],width:this._getValueOrOverrideExpression(c,p,"Width",y),cap:this._getValueOrOverrideExpression(c,p,"CapStyle",d),join:this._getValueOrOverrideExpression(c,p,"JoinStyle",h),miterLimit:f&&this._getValueOrOverrideExpression(c,p,"MiterLimit",f),referenceWidth:i,isOutline:r,gradientMethod:this._getValueOrOverrideExpression(c,p,"GradientMethod",o??m.gradientMethod),gradientType:this._getValueOrOverrideExpression(c,p,"GradientType",l??m.gradientType),interval:this._getValueOrOverrideExpression(c,p,"Interval",(0,utils/* getNumericValue */.$w)(n,"CIMFixedColorRamp"===u.type?u.colors.length:m.interval)),gradientSize:this._getValueOrOverrideExpression(c,p,"GradientSize",(0,utils/* getNumericValue */.$w)(a,m.gradientSize)),gradientSizeUnits:"Absolute"===s?enums/* SymbolUnits */.OW.Absolute:"Relative"===s?enums/* SymbolUnits */.OW.Relative:m.gradientSizeUnits})}_analyzeMarker(e,t,r,i,o,a,s,l,y,d=!1,h=!1){d||=!!e.colorLocked;let f=y;if(f=animationUtils_g(e,f),f=animationUtils_M(this._poMap,e,f),f=animationUtils_C(e,f),f=animationUtils_f(this._poMap,e,f),this._analyzeMarkerInsidePolygon(e,t,d,f))return;const u=(0,utils/* getNumericValue */.$w)(e.size,defaultCIMValues/* defaultCIMValues */.D.CIMVectorMarker.size),v=(0,utils/* getNumericValue */.$w)(e.rotation),g=(0,utils/* getNumericValue */.$w)(e.offsetX),_=(0,utils/* getNumericValue */.$w)(e.offsetY),{primitiveName:S,type:M}=e,k=this._getValueOrOverrideExpression(M,S,"Size",u),C=this._getValueOrOverrideExpression(M,S,"Rotation",v),b=this._getValueOrOverrideExpression(M,S,"OffsetX",g),x=this._getValueOrOverrideExpression(M,S,"OffsetY",_);switch(e.type){case"CIMPictureMarker":this._analyzePictureMarker(e,t,r,i,o,a,k,C,b,x,l,f,d,h);break;case"CIMVectorMarker":this._analyzeVectorMarker(e,t,r,i,o,a,k,C,b,x,l,f,s,d,h)}}_analyzeMarkerInsidePolygon(e,t,r,i){const{markerPlacement:o,type:s}=e;if(!o||"CIMMarkerPlacementInsidePolygon"!==o.type||i.hasMotionAnimations)return!1;if("CIMVectorMarker"===s||"CIMPictureMarker"===s){const r=e.primitiveName;if(r&&this._analyzePrimitiveOverrides([r],t,null,null))return!1;const i=o.primitiveName;if(i&&this._analyzePrimitiveOverrides([i],t,null,null))return!1;if("CIMVectorMarker"===s){const{markerGraphics:t}=e;if(t)for(const e of t){const{symbol:t}=e;if("CIMPolygonSymbol"===t?.type&&t.symbolLayers){const{symbolLayers:e}=t;for(const t of e)if("CIMSolidStroke"===t.type)return!1}}}else{const{animatedSymbolProperties:t}=e;if(t)return!1}}const l=Math.abs(o.stepX),n=Math.abs(o.stepY);if(0===l||0===n)return!0;let p,c;if("Random"===o.gridType){const e=(0,screenUtils/* px2pt */.PN)(definitions/* randomInsidePolygonTextureSize */.yv),t=Math.max(Math.floor(e/l),1);p=n*Math.max(Math.floor(e/n),1);c=t*l/p}else o.shiftOddRows?(p=2*n,c=l/n*.5):(p=n,c=l/n);const m=(0,utils/* getTintColor */.Ny)(e),y="CIMCharacterMarker"===e.type?null:{type:"sprite-rasterization-param",resource:e,overrides:[]};return this._cimLayers.push({type:"fill",spriteRasterizationParam:y,colorLocked:r,effects:t,color:m,height:p,scaleX:c,angle:o.gridAngle,offsetX:(0,utils/* getNumericValue */.$w)(o.offsetX),offsetY:(0,utils/* getNumericValue */.$w)(o.offsetY),applyRandomOffset:"Random"===o.gridType,sampleAlphaOnly:"CIMPictureMarker"!==e.type,hasUnresolvedReplacementColor:!0}),!0}_analyzePictureMarker(e,t,i,o,a,l,n,p,c,m,y,d,h,f){const{animatedSymbolProperties:u,primitiveName:v,type:O}=e;let g=(0,utils/* getNumericValue */.$w)(e.scaleX,1);const _=(0,utils/* getTintColor */.Ny)(e);i||(i=this._createMarkerPlacementOverrideExpression(e.markerPlacement));const S=this._createGIFAnimatedSymbolPropertiesOverrideExpression(u),M=e.anchorPoint??{x:0,y:0};if("width"in e&&"number"==typeof e.width){const t=e.width;let r=1;const i=this._resourceManager.getResource(e.url);null!=i&&(r=i.width/i.height);g/=r*((0,utils/* getNumericValue */.$w)(e.size)/t)}const k=[...o];let C;e.primitiveName&&k.push(e.primitiveName),u||S?C={type:"animated",url:e.url,urlHash:"H"+(0,string/* numericHash */.Wm)(e.url),playAnimation:e.animatedSymbolProperties?.playAnimation,reverseAnimation:e.animatedSymbolProperties?.reverseAnimation,randomizeStartTime:e.animatedSymbolProperties?.randomizeStartTime,randomizeStartSeed:e.animatedSymbolProperties?.randomizeStartSeed,startTimeOffset:e.animatedSymbolProperties?.startTimeOffset,duration:e.animatedSymbolProperties?.duration,repeatType:e.animatedSymbolProperties?.repeatType,repeatDelay:e.animatedSymbolProperties?.repeatDelay}:(C=(0,lang/* clone */.o8)(e),C.markerPlacement=null);const b={type:"sprite-rasterization-param",resource:C,overrides:this._getMaterialOverrides(k,O)};S&&b.overrides.push(...S.overrides);const x=n;this._cimLayers.push({type:"marker",spriteRasterizationParam:b,colorLocked:h,effects:t,scaleSymbolsProportionally:!1,alignment:a,size:n,scaleX:this._getValueOrOverrideExpression(O,v,"ScaleX",g),rotation:p,offsetX:c,offsetY:m,transform:{type:"cim-marker-transform-param",params:y},color:this._getValueOrOverrideExpression(O,v,"TintColor",_),anchorPoint:{x:M.x,y:M.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:[0,0,0,0],outlineWidth:0,frameHeight:0,widthRatio:1,rotateClockwise:!!e.rotateClockwise,referenceSize:l,sizeRatio:1,isOutline:f,markerPlacement:i,animationParams:se(d),baseSize:x})}_analyzeVectorMarker(e,t,r,i,o,a,s,l,p,c,m,f,u,v,O){const g=e.markerGraphics;if(!g)return;const _=e.frame;let S=0;S=_?_.ymax-_.ymin:a;const M=!!e.scaleSymbolsProportionally;if(S){const t={offsetX:p,offsetY:c,rotation:l,size:s,frameHeight:S,rotateClockWise:!!e.rotateClockwise,absoluteAnchorPoint:!1,scaleSymbolsProportionally:M};m=[...m,t]}r||(r=this._createMarkerPlacementOverrideExpression(e.markerPlacement));for(const k of g)if(k){const s=k.symbol;if(!s)continue;const l=k.primitiveName;l&&i.push(l);let p,c=f;if(("CIMPointSymbol"===s.type||"CIMTextSymbol"===s.type)&&_){let t=0,r=0;const i=k.geometry;"x"in i&&"y"in i&&(t+=i.x-.5*(_.xmin+_.xmax),r+=i.y-.5*(_.ymin+_.ymax));const o=e.anchorPoint;let a=!1;o&&("Absolute"===e.anchorPointUnits?(t-=o.x,r-=o.y,a=!0):_&&(t-=(_.xmax-_.xmin)*o.x,r-=(_.ymax-_.ymin)*o.y));const s={offsetX:t,offsetY:r,rotation:0,size:0,frameHeight:0,rotateClockWise:!1,absoluteAnchorPoint:a,scaleSymbolsProportionally:M};p=[...m,s]}const g=k.geometry,[C,b]=P(g,_);switch(0===C&&0===b||(c=h(c,C,b)),"CIMPointSymbol"===s.type&&(c=animationUtils_f(this._poMap,s,c)),s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":u||re(s)?(c={...c,transform:{type:"AnimatedTransform",relativeTranslation:!1,absoluteScale:!0,translation:V([0,0]),rotation:V(0),scale:V(S),parent:f.transform}},this._analyzeMultiLayerGraphicNonSDF(e,t,r,k,i,o,a,p??m,c,S,v,O)):this._analyzeMultiLayerGraphic(e,t,r,k,i,o,a,p??m,c,S,v,O);break;case"CIMTextSymbol":this._analyzeTextGraphic(t,r,k,i,o,a,p??m,v)}l&&i.pop()}}_analyzeMultiLayerGraphic(e,t,r,i,o,a,s,l,n,p,c,m){const y=i.symbol.symbolLayers;y&&(!te(y)||d(n)?ie(y)?this._analyzeMultiLayerGraphicNonSDF(e,t,r,i,o,a,s,l,n,p,!!c,m):this._analyzeMarkerGraphicSymbolLayers(e,t,r,i,o,a,s,l,n,p,c,m):this._analyzeCompositeMarkerGraphic(e,t,r,i,y,a,s,l,p,c,m))}_analyzeMarkerGraphicSymbolLayers(e,t,r,i,o,a,s,l,p,c,m,y){const d=i.symbol,h=d.symbolLayers;if(!h)return;const f=this._resourceManager.geometryEngine,u=CIMEffectHelper/* CIMEffectHelper */.V.applyEffects(d.effects,i.geometry,f);if(!u)return;let v=h.length;for(;v--;){const d=h[v];if(!d||!1===d.enable)continue;const g=d.primitiveName;switch(g&&o.push(g),d.type){case"CIMSolidFill":case"CIMSolidStroke":{const o=CIMEffectHelper/* CIMEffectHelper */.V.applyEffects(d.effects,u,f),h=(0,SDFHelper/* getExtent */.Z7)(o);if(!h)continue;const v="Relative"!==e.anchorPointUnits,_=(0,utils/* getStrokeWidth */.xo)(d)??0,{frameSizeRatio:S,anchorX:M,anchorY:x,widthRatio:z,sdfPaddingRatio:E}=(0,SDFHelper/* getSDFMetrics */.Fj)(h,e.frame,e.size,e.anchorPoint,v,_,e.scaleSymbolsProportionally),I="CIMSolidFill"===d.type,L={type:"sdf",geom:o,sdfPaddingRatio:E,asFill:I},{path:N}=d,R=I?(0,utils/* normalizeAlpha */.e6)((0,utils/* getFillColor */.pM)(d)):null==N?(0,utils/* normalizeAlpha */.e6)((0,utils/* getStrokeColor */._1)(d)):[0,0,0,0],A=I?[0,0,0,0]:(0,utils/* normalizeAlpha */.e6)((0,utils/* getStrokeColor */._1)(d));if(!I&&!_)break;const F=i.primitiveName;let X=null;I&&!d.colorLocked&&(X=this._maybeGetValueOrOverrideExpression(F,"FillColor"));let j=null;I||d.colorLocked||(j=this._maybeGetValueOrOverrideExpression(F,"StrokeColor"));const Y=X??this._getValueOrOverrideExpression(d.type,g,"Color",R),W=j??this._getValueOrOverrideExpression(d.type,g,"Color",A),D=this._maybeGetValueOrOverrideExpression(F,"StrokeWidth")??this._getValueOrOverrideExpression(d.type,g,"Width",_),U=N?{type:"sprite-rasterization-param",resource:{type:"path",path:N,asFill:I},overrides:[]}:{type:"sprite-rasterization-param",resource:L,overrides:[]},J=animationUtils_f(this._poMap,d,p),B=(0,utils/* getNumericValue */.$w)(e.size,defaultCIMValues/* defaultCIMValues */.D.CIMVectorMarker.size),q=this._getValueOrOverrideExpression(e.type,e.primitiveName,"Size",B);this._cimLayers.push({type:"marker",spriteRasterizationParam:U,colorLocked:!!d.colorLocked||!!m,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:a,anchorPoint:{x:M,y:x},isAbsoluteAnchorPoint:v,size:c,rotation:0,offsetX:0,offsetY:0,scaleX:1,transform:{type:"cim-marker-transform-param",params:l},frameHeight:c,widthRatio:z,rotateClockwise:!1,referenceSize:s,sizeRatio:S,color:Y,outlineColor:W,outlineWidth:D,isOutline:y,markerPlacement:r,animationParams:se(J),isStroke:"CIMSolidFill"!==d.type,baseSize:q,...(0,SDFHelper/* getSDFDimensions */.xt)(o,E)});break}case"CIMPictureMarker":case"CIMVectorMarker":if(d.markerPlacement){q().error("Error analyzing CIM, got unexpected marker placement");break}this._analyzeMarker(d,t,r,o,a,s,!1,l,p,m,y)}g&&o.pop()}}_analyzeTextGraphic(e,r,i,o,a,s,l,n){const p=[];OverrideHelper.OverrideHelper.findApplicableOverrides(i,this._primitiveOverrides,p);const c=i.geometry;if(!("x"in c)||!("y"in c))return;const m=i.symbol,y=(0,utils/* fromCIMFontDecoration */.DW)(m),d=(0,utils/* fromCIMFontStyle */._d)(m.fontStyleName),h=(0,fontUtils/* getFontFamily */.af)(m.fontFamilyName);m.font={family:h,decoration:y,...d};const f=(0,utils/* getNumericValue */.$w)(m.height,defaultCIMValues/* defaultCIMValues */.D.CIMTextSymbol.height),u=(0,utils/* getNumericValue */.$w)(m.angle),v=(0,utils/* getNumericValue */.$w)(m.offsetX),g=(0,utils/* getNumericValue */.$w)(m.offsetY),{haloSymbol:_}=m,S=(0,utils/* getNumericValue */.$w)(m.haloSize,0);let k=[0,0,0,0];if(_?.symbolLayers?.length){const e=_.symbolLayers;for(const t of e)if(t.color){k=this._getValueOrOverrideExpression(m?.haloSymbol?.type??"CIMPolygonSymbol",t.primitiveName,"Color",(0,utils/* normalizeAlpha */.e6)(t.color));break}}const C=i.primitiveName;let b=[0,0,0,1],x=[0,0,0,0],z=0,E=!1;if(m.symbol?.symbolLayers)for(const t of m.symbol.symbolLayers){const e=t.primitiveName;if("CIMSolidStroke"===t.type)x=this._getValueOrOverrideExpression("CIMSolidStroke",e,"Color",(0,utils/* normalizeAlpha */.e6)(t.color)),z=this._getValueOrOverrideExpression("CIMSolidStroke",e,"Width",(0,utils/* getStrokeWidth */.xo)(t)??0);else if("CIMSolidFill"===t.type){const r=(0,utils/* normalizeAlpha */.e6)(t.color);E=E??!!t.colorLocked,b=this._getValueOrOverrideExpression("CIMSolidFill",e??C,"Color",r)}}let I=null,L=null,N=null,R=null,A=null;C&&(I=this._maybeGetValueOrOverrideExpression(C,"TextSize"),L=this._maybeGetValueOrOverrideExpression(C,"TextAngle"),N=this._maybeGetValueOrOverrideExpression(C,"TextOffsetX"),R=this._maybeGetValueOrOverrideExpression(C,"TextOffsetY"),E||(A=this._maybeGetValueOrOverrideExpression(C,"FillColor")));const G=A??b;let T=null,W=null,D=0;if(m.callout&&"CIMBackgroundCallout"===m.callout.type){const e=m.callout;if(e.backgroundSymbol){const t=e.backgroundSymbol.symbolLayers;if(t)for(const e of t)"CIMSolidFill"===e.type?T=(0,utils/* normalizeAlpha */.e6)(e.color):"CIMSolidStroke"===e.type&&(W=(0,utils/* normalizeAlpha */.e6)(e.color),D=(0,utils/* getNumericValue */.$w)(e.width,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.width))}}const U=this._getValueOrOverrideExpression(m.type,i.primitiveName,"TextString",i.textString??"");if(null==U)return;const{fontStyleName:H}=m,J=h+(H?"-"+H.toLowerCase():"-regular"),B=this._getMaterialOverrides(o,m.type);B.push(...this._getPrimitiveMaterialOverrides(i.primitiveName,m.type)),this._collectDictionaryTemplateOverrides(B,i);const q={type:"text-rasterization-param",resource:{type:"text",textString:i.textString??"",font:m.font,symbol:m,primitiveName:i.primitiveName},overrides:B};this._cimLayers.push({type:"text",lineWidth:m.lineWidth,textRasterizationParam:q,colorLocked:!!n||!!E,effects:e,alignment:a,anchorPoint:{x:0,y:0},isAbsoluteAnchorPoint:!1,fontName:J,decoration:y,haloSize:S,haloColor:k,weight:d.weight,style:d.style,size:I??f,angle:L??u,offsetX:N??v,offsetY:R??g,transform:{type:"cim-marker-transform-param",params:l},horizontalAlignment:(0,utils/* fromCIMHorizontalAlignment */.Bu)(m.horizontalAlignment),verticalAlignment:(0,utils/* fromCIMVerticalAlignment */.Nl)(m.verticalAlignment),text:U,color:G,outlineColor:x,outlineSize:z,backgroundColor:T,borderLineColor:W,borderLineWidth:D,referenceSize:s,sizeRatio:1,markerPlacement:r})}_collectDictionaryTemplateOverrides(e,t){if(t.textString&&this._hasTextStringTemplates){const r=(0,utils/* getTextCasing */.bs)(t.symbol);e.push({propertyName:"textString",defaultValue:"",valueExpressionInfo:{type:"dictionary-template",textCase:r,template:t.textString},primitiveName:t.primitiveName})}}_analyzeMultiLayerGraphicNonSDF(e,t,r,i,a,s,l,n,p,c,m,y){const d=Z(e,i),h=e.primitiveName,f=this._analyzeMaterialOverrides(h,["Rotation","OffsetX","OffsetY"]),v=(0,utils/* normalizePrimitiveOverrideProps */.pk)(f),[g,_,S]=CIMSymbolHelper/* CIMSymbolHelper */.wp.getTextureAnchor(d,this._resourceManager,definitions/* rasterizedVectorMarkerMinSize */.oj),M=this._getMaterialOverrides(a,e.type);M.push(...v);const k={type:"sprite-rasterization-param",resource:{...d,avoidSDFRasterization:!0},overrides:M},C=(0,utils/* getNumericValue */.$w)(e.size,defaultCIMValues/* defaultCIMValues */.D.CIMVectorMarker.size),b=this._getValueOrOverrideExpression(e.type,h,"Size",C);this._cimLayers.push({type:"marker",spriteRasterizationParam:k,colorLocked:m,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:g,y:_},isAbsoluteAnchorPoint:!1,size:c,rotation:0,offsetX:0,offsetY:0,transform:{type:"cim-marker-transform-param",params:n},color:[255,255,255,1],outlineColor:[0,0,0,0],outlineWidth:0,scaleX:1,frameHeight:c,widthRatio:1,rotateClockwise:!!e.rotateClockwise,referenceSize:l,sizeRatio:S/(0,screenUtils/* pt2px */.Lz)(e.size),isOutline:y,markerPlacement:r,animationParams:se(p),baseSize:b})}_createMarkerPlacementOverrideExpression(e){if(!e)return null;const t=[];return OverrideHelper.OverrideHelper.findApplicableOverrides(e,this._primitiveOverrides,t),{type:"cim-marker-placement-param",placement:e,overrides:ae(t)}}_createGIFAnimatedSymbolPropertiesOverrideExpression(e){if(!e)return null;const t=[];return OverrideHelper.OverrideHelper.findApplicableOverrides(e,this._primitiveOverrides,t),{type:"cim-gif-animation-params",animation:e,overrides:ae(t)}}_analyzeCompositeMarkerGraphic(e,t,r,i,o,a,s,l,n,p,c){const m=i.geometry,y=o[0],d=o[1],h=(0,SDFHelper/* getExtent */.Z7)(m);if(!h)return;const f="Relative"!==e.anchorPointUnits,u=(0,utils/* getNumericValue */.$w)(y.width,defaultCIMValues/* defaultCIMValues */.D.CIMSolidStroke.width),{frameSizeRatio:v,anchorX:g,anchorY:_,widthRatio:S,sdfPaddingRatio:M}=(0,SDFHelper/* getSDFMetrics */.Fj)(h,e.frame,e.size,e.anchorPoint,f,u,e.scaleSymbolsProportionally),{path:b}=d,x=d.primitiveName,z=y.primitiveName,E=i.primitiveName;let I=null;d.colorLocked||p||(I=this._maybeGetValueOrOverrideExpression(E,"FillColor"));const L=I??this._getValueOrOverrideExpression(d.type,x,"Color",(0,utils/* normalizeAlpha */.e6)(d.color));let N=null;y.colorLocked||p||(N=this._maybeGetValueOrOverrideExpression(E,"StrokeColor"));const R=N??this._getValueOrOverrideExpression(y.type,z,"Color",(0,utils/* normalizeAlpha */.e6)(y.color)),A=this._maybeGetValueOrOverrideExpression(E,"StrokeWidth")??this._getValueOrOverrideExpression(y.type,z,"Width",u),w={type:"sprite-rasterization-param",resource:b?{type:"path",path:b,asFill:!0}:{type:"sdf",geom:m,sdfPaddingRatio:M,asFill:!0},overrides:[]};this._cimLayers.push({type:"marker",spriteRasterizationParam:w,colorLocked:p,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:a,anchorPoint:{x:g,y:_},isAbsoluteAnchorPoint:f,size:n,rotation:0,offsetX:0,offsetY:0,scaleX:1,transform:{type:"cim-marker-transform-param",params:l},frameHeight:n,widthRatio:S,rotateClockwise:!1,referenceSize:s,sizeRatio:v,color:L,outlineColor:R,outlineWidth:A,isOutline:c,markerPlacement:r})}_setPoMap(e,t,r){let i;this._poMap[e]?i=this._poMap[e]:(i={},this._poMap[e]=i),i[t]=r}_maybeGetValueOrOverrideExpression(e,t,r){return this._getValueOrOverrideExpression("",e,t,r,!1)}_getValueOrOverrideExpression(e,t,r,i,o=!0){if(o&&!(0,utils/* isValidCIMValue */.ZO)(i)&&(i=(0,utils/* getDefaultCIMValue */.iA)(e,r.toLowerCase())),null==t)return i;const a=this._poMap[t];if(null==a)return i;const s=a[r];return"string"==typeof s||"number"==typeof s||Array.isArray(s)?s:s?{valueExpressionInfo:s,defaultValue:i}:i}_analyzePrimitiveOverrides(e,t,r,i){if(null==e)return!1;"string"==typeof e&&(e=[e]);for(const o of this._primitiveOverrides)if(e.includes(o.primitiveName)&&o.valueExpressionInfo)return!0;if(null!=t)for(const o of t)if(o?.overrides.length>0)return!0;if(null!=r)for(const o of r)if(o?.overrides.length>0)return!0;if(null!=i)for(const o of i)if(o?.overrides.length>0)return!0;return!1}_getMaterialOverrides(e,t){if(!e)return[];const r=[];for(const i of e)r.push(...this._getPrimitiveMaterialOverrides(i,t));return r}_getPrimitiveMaterialOverrides(e,t){if(!e)return[];const r=(0,utils/* normalizePrimitiveOverrideProps */.pk)(this._primitiveOverrides.filter((t=>t.primitiveName===e)));return r.forEach((e=>e.defaultValue=(0,utils/* getDefaultCIMValue */.iA)(t,e.propertyName.toLowerCase()))),r}_analyzeMaterialOverrides(e,t){return this._primitiveOverrides.filter((r=>r.primitiveName!==e||!t.includes(r.propertyName)))}}function Z(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function $(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.slice(6),10);if(!isNaN(t))return t}return 0}function ee(e,t){if(!t||0===t.length)return e;const i=r(e);return M.applyOverrides(i,t),i}const te=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&null==e[0].path&&null==e[1].path&&!e[0].effects&&!e[1].effects&&!e[0].animations&&!e[1].animations;function re(e){const t=e.symbolLayers;if(!t)return!1;const r=t.find((e=>e.effects?.find((e=>"CIMGeometricEffectDashes"===e.type&&null!=e.dashTemplate)))),i=t.find((e=>e.effects?.find((e=>"CIMGeometricEffectAddControlPoints"===e.type))));return!!r||!!i}function ie(e){return e.some((e=>"CIMSolidFill"!==e.type&&"CIMSolidStroke"!==e.type&&("CIMVectorMarker"!==e.type&&"CIMPictureMarker"!==e.type||null!=e.markerPlacement)))}function oe(e,t){if(t?.some((e=>"CIMGeometricEffectRadial"===e.type))&&t?.some((e=>"CIMGeometricEffectTaperedPolygon"===e.type))&&2===e.length){const t=e.find((e=>"CIMSolidFill"===e.type)),r=e.find((e=>"CIMSolidStroke"===e.type)),i=r?.effects?.some((e=>"CIMGeometricEffectDashes"===e.type));if(null!=t&&null!=r&&!i)return!0}return!1}function ae(e){return (0,lang/* clone */.o8)(e).map((e=>({...e,propertyName:(0,utils/* uncapitalize */.YF)(e.propertyName)})))}function se(e){return d(e)?{type:"animation-params",params:e}:null}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/brushes.js + 6 modules
var brushes = __webpack_require__(54185);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js
var vectorTiles_enums = __webpack_require__(46729);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/shaderRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const shaderRepository_e={background:{"background.frag":"#ifdef PATTERN\nuniform lowp float u_opacity;\nuniform lowp sampler2D u_texture;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_tileTextureCoord;\n#else\nuniform lowp vec4 u_color;\n#endif\nvoid main() {\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\ngl_FragColor = u_opacity * color;\n#else\ngl_FragColor = u_color;\n#endif\n}","background.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_coord_range;\nuniform mediump float u_depth;\n#ifdef PATTERN\nuniform mediump mat3 u_pattern_matrix;\nvarying mediump vec2 v_tileTextureCoord;\nuniform mediump vec4 u_tlbr;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\n#endif\nvoid main() {\ngl_Position = vec4((u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0)).xy, u_depth, 1.0);\n#ifdef PATTERN\nv_tileTextureCoord = (u_pattern_matrix * vec3(a_pos, 1.0)).xy;\nv_tlbr             = u_tlbr / u_mosaicSize.xyxy;\n#endif\n}"},circle:{"circle.frag":"precision lowp float;\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\nvoid main()\n{\nmediump float dist = length(v_offset);\nmediump float alpha = smoothstep(0.0, -v_blur, dist - 1.0);\nlowp float color_mix_ratio = v_stroke_width < 0.01 ? 0.0 : smoothstep(-v_blur, 0.0, dist - v_radius / (v_radius + v_stroke_width));\ngl_FragColor = alpha * mix(v_color, v_stroke_color, color_mix_ratio);\n}","circle.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nvarying lowp vec4 v_color;\nvarying lowp vec4 v_stroke_color;\nvarying mediump float v_blur;\nvarying mediump float v_stroke_width;\nvarying mediump float v_radius;\nvarying mediump vec2 v_offset;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_circleTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_antialiasingWidth;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\nv_stroke_color = stroke_color * stroke_opacity;\nv_stroke_width = stroke_width;\nv_radius = radius;\nv_blur = max(blur, u_antialiasingWidth / (radius + stroke_width));\nmediump vec2 offset = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\nv_offset = offset;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos * 0.5, 1.0) + u_displayMat3 * vec3((v_radius + v_stroke_width) * offset + u_circleTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},fill:{"fill.frag":"precision lowp float;\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\nvarying lowp vec4 v_color;\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef PATTERN\nmediump vec2 normalizedTextureCoord = fract(v_tileTextureCoord);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\ngl_FragColor = v_color[3] * color;\n#else\ngl_FragColor = v_color;\n#endif\n}","fill.vert":"precision mediump float;\nattribute vec2 a_pos;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_fillTranslation;\n#ifdef PATTERN\n#include <util/util.glsl>\nuniform mediump vec2 u_mosaicSize;\nuniform mediump float u_patternFactor;\nvarying mediump vec2 v_tileTextureCoord;\nvarying mediump vec4 v_tlbr;\n#endif\nvarying lowp vec4 v_color;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\n#ifdef PATTERN\nfloat patternWidth = nextPOT(tlbr.z - tlbr.x);\nfloat patternHeight = nextPOT(tlbr.w - tlbr.y);\nfloat scaleX = 1.0 / (patternWidth * u_patternFactor);\nfloat scaleY = 1.0 / (patternHeight * u_patternFactor);\nmat3 patterMat = mat3(scaleX, 0.0,    0.0,\n0.0,    -scaleY, 0.0,\n0.0,    0.0,    1.0);\nv_tileTextureCoord = (patterMat * vec3(a_pos, 1.0)).xy;\nv_tlbr             = tlbr / u_mosaicSize.xyxy;\n#endif\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(u_fillTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},icon:{"icon.frag":"precision mediump float;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nuniform lowp vec4 u_color;\nuniform lowp vec4 u_outlineColor;\n#endif\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump flaot v_halo_width;\n#endif\n#include <util/encoding.glsl>\nvec4 mixColors(vec4 color1, vec4 color2) {\nfloat compositeAlpha = color2.a + color1.a * (1.0 - color2.a);\nvec3 compositeColor = color2.rgb + color1.rgb * (1.0 - color2.a);\nreturn vec4(compositeColor, compositeAlpha);\n}\nvoid main()\n{\n#ifdef SDF\nlowp vec4 fillPixelColor = v_color;\nfloat d = rgba2float(texture2D(u_texture, v_tex)) - 0.5;\nconst float softEdgeRatio = 0.248062016;\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * softEdgeRatio * size;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nif (v_halo_width > 0.25) {\nlowp vec4 outlinePixelColor = u_outlineColor;\nconst float outlineLimitRatio = (16.0 / 86.0);\nfloat clampedOutlineSize = softEdgeRatio * min(v_halo_width, outlineLimitRatio * max(v_size.x, v_size.y));\noutlinePixelColor *= clamp(0.5 - (abs(dist) - clampedOutlineSize), 0.0, 1.0);\ngl_FragColor = v_opacity * mixColors(fillPixelColor, outlinePixelColor);\n}\nelse {\ngl_FragColor = v_opacity * fillPixelColor;\n}\n#else\nlowp vec4 texColor = texture2D(u_texture, v_tex);\ngl_FragColor = v_opacity * texColor;\n#endif\n}","icon.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\n#ifdef SDF\nvarying mediump float v_halo_width;\n#endif\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_iconTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying mediump vec2 v_tex;\nvarying lowp float v_opacity;\nvarying mediump vec2 v_size;\nconst float C_OFFSET_PRECISION = 1.0 / 8.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float tileCoordRatio = 1.0 / 8.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nv_color = color;\nv_opacity = opacity;\n#ifdef SDF\nv_halo_width = halo_width;\n#endif\nfloat modded = mod(a_opacityInfo, 128.0);\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\nfloat startOpacity = modded / 127.0;\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_opacity *= interpolatedOpacity;\nmediump float a_angle         = a_levelInfo[1];\nmediump float a_minLevel      = a_levelInfo[2];\nmediump float a_maxLevel      = a_levelInfo[3];\nmediump vec2 a_tex            = a_texAngleRange.xy;\nmediump float delta_z = 0.0;\nmediump float rotated = mod(a_angle + u_mapRotation, 256.0);\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * step(64.0, rotated) * (1.0 - step(192.0, rotated));\ndelta_z += 1.0 - step(a_minLevel, u_level);\ndelta_z += step(a_maxLevel, u_level);\ndelta_z += step(v_opacity, 0.0);\nvec2 offset = C_OFFSET_PRECISION * a_vertexOffset;\nv_size = abs(offset);\n#ifdef SDF\noffset = (120.0 / 86.0) * offset;\n#endif\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayViewMat3 * vec3(size * offset, 0.0) + u_displayMat3 * vec3(u_iconTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\nv_tex = a_tex.xy / u_mosaicSize;\n}"},line:{"line.frag":"precision lowp float;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nvarying mediump float v_lineHalfWidth;\nvarying lowp vec4 v_color;\nvarying mediump float v_blur;\n#if defined (PATTERN) || defined(SDF)\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\nuniform sampler2D u_texture;\nuniform mediump float u_antialiasing;\n#endif\n#ifdef SDF\n#include <util/encoding.glsl>\n#endif\nvoid main()\n{\nmediump float fragDist = length(v_normal) * v_lineHalfWidth;\nlowp float alpha = clamp((v_lineHalfWidth - fragDist) / v_blur, 0.0, 1.0);\n#ifdef PATTERN\nmediump float relativeTexX = fract(v_accumulatedDistance / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY = 0.5 + v_normal.y * v_lineHalfWidth / (v_patternSize.y * v_widthRatio);\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color = texture2D(u_texture, texCoord);\ngl_FragColor = alpha * v_color[3] * color;\n#elif defined(SDF)\nmediump float relativeTexX = fract((v_accumulatedDistance * 0.5) / (v_patternSize.x * v_widthRatio));\nmediump float relativeTexY =  0.5 + 0.25 * v_normal.y;\nmediump vec2 texCoord = mix(v_tlbr.xy, v_tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * (v_lineHalfWidth + u_antialiasing / 2.0);\ngl_FragColor = alpha * clamp(0.5 - dist, 0.0, 1.0) * v_color;\n#else\ngl_FragColor = alpha * v_color;\n#endif\n}","line.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec4 a_extrude_offset;\nattribute vec4 a_dir_normal;\nattribute vec2 a_accumulatedDistance;\n#pragma header\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump float u_zoomFactor;\nuniform mediump vec2 u_lineTranslation;\nuniform mediump float u_antialiasing;\nuniform mediump float u_depth;\nvarying mediump vec2 v_normal;\nvarying highp float v_accumulatedDistance;\nconst float scale = 1.0 / 31.0;\nconst mediump float tileCoordRatio = 8.0;\n#if defined (SDF)\nconst mediump float sdfPatternHalfWidth = 15.5;\n#endif\n#if defined (PATTERN) || defined(SDF)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\nvarying mediump float v_widthRatio;\n#endif\nvarying lowp vec4 v_color;\nvarying mediump float v_lineHalfWidth;\nvarying mediump float v_blur;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\nv_blur = blur + u_antialiasing;\nv_normal = a_dir_normal.zw * scale;\n#if defined (PATTERN) || defined(SDF)\nv_tlbr          = tlbr / u_mosaicSize.xyxy;\nv_patternSize   = vec2(tlbr.z - tlbr.x, tlbr.y - tlbr.w);\n#if defined (PATTERN)\nv_widthRatio = width / v_patternSize.y;\n#else\nv_widthRatio = width / sdfPatternHalfWidth / 2.0;\n#endif\n#endif\nv_lineHalfWidth = (width + u_antialiasing) * 0.5;\nmediump vec2 dir = a_dir_normal.xy * scale;\nmediump vec2 offset_ = a_extrude_offset.zw * scale * offset;\nmediump vec2 dist = v_lineHalfWidth * scale * a_extrude_offset.xy;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos + offset_ * tileCoordRatio / u_zoomFactor, 1.0) + u_displayViewMat3 * vec3(dist, 0.0) + u_displayMat3 * vec3(u_lineTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n#if defined (PATTERN) || defined(SDF)\nv_accumulatedDistance = a_accumulatedDistance.x * u_zoomFactor / tileCoordRatio + dot(dir, dist + offset_);\n#endif\n}"},outline:{"outline.frag":"varying lowp vec4 v_color;\nvarying mediump vec2 v_normal;\nvoid main()\n{\nlowp float dist = abs(v_normal.y);\nlowp float alpha = smoothstep(1.0, 0.0, dist);\ngl_FragColor = alpha * v_color;\n}","outline.vert":"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_xnormal;\n#pragma header\nvarying lowp vec4 v_color;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform mediump vec2 u_fillTranslation;\nuniform mediump float u_depth;\nuniform mediump float u_outline_width;\nvarying lowp vec2 v_normal;\nconst float scale = 1.0 / 15.0;\nvoid main()\n{\n#pragma main\nv_color = color * opacity;\nv_normal = a_xnormal;\nmediump vec2 dist = u_outline_width * scale * a_offset;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + u_displayMat3 * vec3(dist + u_fillTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth, 1.0);\n}"},text:{"text.frag":"uniform lowp sampler2D u_texture;\nvarying lowp vec2 v_tex;\nvarying lowp vec4 v_color;\nvarying mediump float v_edgeWidth;\nvarying mediump float v_edgeDistance;\nvoid main()\n{\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float alpha = smoothstep(v_edgeDistance - v_edgeWidth, v_edgeDistance + v_edgeWidth, dist);\ngl_FragColor = alpha * v_color;\n}","text.vert":"attribute vec2 a_pos;\nattribute vec2 a_vertexOffset;\nattribute vec4 a_texAngleRange;\nattribute vec4 a_levelInfo;\nattribute float a_opacityInfo;\n#pragma header\nvarying lowp vec4 v_color;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform mediump vec2 u_textTranslation;\nuniform vec2 u_mosaicSize;\nuniform mediump float u_depth;\nuniform mediump float u_mapRotation;\nuniform mediump float u_level;\nuniform lowp float u_keepUpright;\nuniform mediump float u_fadeDuration;\nvarying lowp vec2 v_tex;\nconst float offsetPrecision = 1.0 / 8.0;\nconst mediump float edgePos = 0.75;\nuniform mediump float u_antialiasingWidth;\nvarying mediump float v_edgeDistance;\nvarying mediump float v_edgeWidth;\nuniform lowp float u_halo;\nconst float sdfFontScale = 1.0 / 24.0;\nconst float sdfPixel = 3.0;\nuniform highp float u_time;\nvoid main()\n{\n#pragma main\nif (u_halo > 0.5)\n{\nv_color = halo_color * opacity;\nhalo_width *= sdfPixel;\nhalo_blur *= sdfPixel;\n}\nelse\n{\nv_color = color * opacity;\nhalo_width = 0.0;\nhalo_blur = 0.0;\n}\nfloat modded = mod(a_opacityInfo, 128.0);\nfloat targetOpacity = (a_opacityInfo - modded) / 128.0;\nfloat startOpacity = modded / 127.0;\nfloat interpolatedOpacity = clamp(startOpacity + 2.0 * (targetOpacity - 0.5) * u_time / u_fadeDuration, 0.0, 1.0);\nv_color *= interpolatedOpacity;\nmediump float a_angle       = a_levelInfo[1];\nmediump float a_minLevel    = a_levelInfo[2];\nmediump float a_maxLevel    = a_levelInfo[3];\nmediump vec2 a_tex          = a_texAngleRange.xy;\nmediump float a_visMinAngle    = a_texAngleRange.z;\nmediump float a_visMaxAngle    = a_texAngleRange.w;\nmediump float delta_z = 0.0;\nmediump float angle = mod(a_angle + u_mapRotation, 256.0);\nif (a_visMinAngle < a_visMaxAngle)\n{\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) + (1.0 - step(a_visMinAngle, angle)));\n}\nelse\n{\ndelta_z += (1.0 - step(u_keepUpright, 0.0)) * (step(a_visMaxAngle, angle) * (1.0 - step(a_visMinAngle, angle)));\n}\ndelta_z += 1.0 - step(a_minLevel, u_level);\ndelta_z += step(a_maxLevel, u_level);\ndelta_z += step(v_color[3], 0.0);\nv_tex = a_tex.xy / u_mosaicSize;\nv_edgeDistance = edgePos - halo_width / size;\nv_edgeWidth = (u_antialiasingWidth + halo_blur) / size;\nmediump vec3 pos = u_dvsMat3 * vec3(a_pos, 1.0) + sdfFontScale * u_displayViewMat3 * vec3(offsetPrecision * size * a_vertexOffset, 0.0) + u_displayMat3 * vec3(u_textTranslation, 0.0);\ngl_Position = vec4(pos.xy, u_depth + delta_z, 1.0);\n}"},util:{"encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}","util.glsl":"float nextPOT(in float x) {\nreturn pow(2.0, ceil(log2(abs(x))));\n}"}};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js
var ShaderCompiler = __webpack_require__(29638);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/sources/resolver.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e){let o=shaderRepository_e;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}const t=new ShaderCompiler/* ShaderCompiler */.Z(o);function n(r){return t.resolveIncludes(r)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/programUtils.js
var programUtils = __webpack_require__(9747);
;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/Programs.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Programs_t=e=>(0,programUtils/* glslifyDefineMap */.I)({PATTERN:e.pattern}),Programs_a={shaders:r=>({vertexShader:Programs_t(r)+n("background/background.vert"),fragmentShader:Programs_t(r)+n("background/background.frag")})},Programs_d={shaders:r=>({vertexShader:n("circle/circle.vert"),fragmentShader:n("circle/circle.frag")})},Programs_n=e=>(0,programUtils/* glslifyDefineMap */.I)({PATTERN:e.pattern}),i={shaders:r=>({vertexShader:Programs_n(r)+n("fill/fill.vert"),fragmentShader:Programs_n(r)+n("fill/fill.frag")})},l={shaders:r=>({vertexShader:n("outline/outline.vert"),fragmentShader:n("outline/outline.frag")})},s=e=>(0,programUtils/* glslifyDefineMap */.I)({SDF:e.sdf}),f={shaders:r=>({vertexShader:s(r)+n("icon/icon.vert"),fragmentShader:s(r)+n("icon/icon.frag")})},Programs_h=e=>(0,programUtils/* glslifyDefineMap */.I)({PATTERN:e.pattern,SDF:e.sdf}),Programs_o={shaders:r=>({vertexShader:Programs_h(r)+n("line/line.vert"),fragmentShader:Programs_h(r)+n("line/line.frag")})},g={shaders:r=>({vertexShader:n("text/text.vert"),fragmentShader:n("text/text.frag")})};

;// ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VTLMaterialManager_p{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(e,r,t){const a=r.key<<3|this._getMaterialOptionsValue(r.type,t);if(this._programByKey.has(a))return this._programByKey.get(a);const s=this._getProgramTemplate(r.type),{shaders:n}=s,{vertexShader:c,fragmentShader:o}=n(t),p=r.getShaderHeader(),u=r.getShaderMain(),i=c.replace("#pragma header",p).replace("#pragma main",u),g=e.programCache.acquire(i,o,r.getAttributeLocations());return this._programByKey.set(a,g),g}_getMaterialOptionsValue(r,t){switch(r){case vectorTiles_enums/* ShaderProgramType */.kh.BACKGROUND:return(t.pattern?1:0)<<1;case vectorTiles_enums/* ShaderProgramType */.kh.FILL:return(t.pattern?1:0)<<1;case vectorTiles_enums/* ShaderProgramType */.kh.OUTLINE:return 0;case vectorTiles_enums/* ShaderProgramType */.kh.LINE:{const e=t;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1}case vectorTiles_enums/* ShaderProgramType */.kh.ICON:return(t.sdf?1:0)<<1;case vectorTiles_enums/* ShaderProgramType */.kh.CIRCLE:case vectorTiles_enums/* ShaderProgramType */.kh.TEXT:default:return 0}}_getProgramTemplate(p){switch(p){case vectorTiles_enums/* ShaderProgramType */.kh.BACKGROUND:return Programs_a;case vectorTiles_enums/* ShaderProgramType */.kh.CIRCLE:return Programs_d;case vectorTiles_enums/* ShaderProgramType */.kh.FILL:return i;case vectorTiles_enums/* ShaderProgramType */.kh.ICON:return f;case vectorTiles_enums/* ShaderProgramType */.kh.LINE:return Programs_o;case vectorTiles_enums/* ShaderProgramType */.kh.OUTLINE:return l;case vectorTiles_enums/* ShaderProgramType */.kh.TEXT:return g;default:return null}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DefaultVertexAttributeLayouts.js
var DefaultVertexAttributeLayouts = __webpack_require__(7370);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BitBlitPrograms.js
var BitBlitPrograms = __webpack_require__(79286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var views_webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ProgramTemplate.js
var ProgramTemplate = __webpack_require__(50122);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/BitBlitRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class _{constructor(){this._initialized=!1}dispose(){this._program=(0,maybe/* disposeMaybe */.WD)(this._program),this._vertexArrayObject=(0,maybe/* disposeMaybe */.WD)(this._vertexArrayObject)}render(r,t,e,i){r&&(this._initialized||this._initialize(r),r.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),r.bindVAO(this._vertexArrayObject),r.useProgram(this._program),t.setSamplingMode(e),r.bindTexture(t,0),this._program.setUniform1i("u_tex",0),this._program.setUniform1f("u_opacity",i),r.drawArrays(views_webgl_enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4),r.bindTexture(null,0),r.bindVAO())}_initialize(r){if(this._initialized)return!0;const s=(0,ProgramTemplate/* createProgram */.r)(r,BitBlitPrograms/* bitBlit */.J);if(!s)return!1;const a=new Int8Array(16);a[0]=-1,a[1]=-1,a[2]=0,a[3]=0,a[4]=1,a[5]=-1,a[6]=1,a[7]=0,a[8]=-1,a[9]=1,a[10]=0,a[11]=1,a[12]=1,a[13]=1,a[14]=1,a[15]=1;const _=BitBlitPrograms/* bitBlit */.J.attributes,p=new VertexArrayObject/* VertexArrayObject */.Z(r,_,DefaultVertexAttributeLayouts/* PosTex2b */.oI,new Map([["geometry",BufferObject/* BufferObject */.g.createVertex(r,views_webgl_enums/* Usage */._U.STATIC_DRAW,a)]]));return this._program=s,this._vertexArrayObject=p,this._initialized=!0,!0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js
var MaterialPrograms = __webpack_require__(98035);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/MaterialManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MaterialManager_e{constructor(r){this._rctx=r,this._programByKey=new Map}dispose(){this._programByKey.forEach((r=>r.dispose())),this._programByKey.clear()}getProgram(e,t=[]){const a=e.vsPath+"."+e.fsPath+JSON.stringify(t);if(this._programByKey.has(a))return this._programByKey.get(a);const s={...t.map((r=>"string"==typeof r?{name:r,value:!0}:r)).reduce(((r,e)=>({...r,[e.name]:e.value})),{})},{vsPath:o,fsPath:h,attributes:i}=e,g=(0,MaterialPrograms/* createProgramTemplate */.p)(o,h,i,s),m=this._rctx.programCache.acquire(g.shaders.vertexShader,g.shaders.fragmentShader,g.attributes);if(!m)throw new Error("Unable to get program for key: ${key}");return this._programByKey.set(a,m),m}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/config.js
var config = __webpack_require__(21121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/request.js
var request = __webpack_require__(86394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/BidiText.js
var BidiText = __webpack_require__(21870);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/QueueProcessor.js
var QueueProcessor = __webpack_require__(92746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMResourceManager.js
var CIMResourceManager = __webpack_require__(74339);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js
var rasterizingUtils = __webpack_require__(79126);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/Rect.js
var Rect = __webpack_require__(76715);
;// ../node_modules/@arcgis/core/symbols/cim/Rasterizer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Rasterizer_f=512;class Rasterizer_d{constructor(e){this._resourceManager=e,this._cachedRasterizationCanvas=null}dispose(){this._cachedRasterizationCanvas=null}get _canvas(){return this._cachedRasterizationCanvas||(this._cachedRasterizationCanvas=document.createElement("canvas")),this._cachedRasterizationCanvas}rasterizeJSONResource(e){switch(e.type){case"dash":{const r=(0,utils/* normalizeDashTemplate */.K3)(e.dashTemplate),[a,n,s]=(0,rasterizingUtils/* rasterizeDash1D */.f0)(r);return{size:[n,s],image:new Uint32Array(a.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}case"fill-style":{const[t,a,n,s]=(0,rasterizingUtils/* rasterizeFillStyle */.c5)(this._canvas,e,definitions/* patternFillRasterizationScale */.nW);return{size:[a,n],image:new Uint32Array(t.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0,rasterizationScale:s}}case"sdf":return Rasterizer_u(e);case"CIMGradientFill":case"CIMGradientStroke":case"CIMHatchFill":case"CIMPictureMarker":case"CIMVectorMarker":return this._rasterizeCIMJSONResource(e)}}_rasterizeCIMJSONResource(r){switch(r.type){case"CIMGradientFill":case"CIMGradientStroke":{const[e,t,n]=(0,rasterizingUtils/* rasterizeGradient */.Kj)(this._canvas,r);return{size:[t,n],image:new Uint32Array(e.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,samplingMode:"Discrete"===r.gradientType||"CIMFixedColorRamp"===r.colorRamp.type?"Nearest":"Linear"}}case"CIMHatchFill":{const t=CIMSymbolHelper/* CIMSymbolHelper */.wp.fromCIMHatchFill(r,definitions/* patternFillRasterizationScale */.nW);return this._rasterizeCIMVectorMarker(t)}case"CIMPictureMarker":{const t=CIMSymbolHelper/* CIMSymbolHelper */.wp.fromCIMInsidePolygon(r);return this._rasterizeCIMVectorMarker(t)}case"CIMVectorMarker":{if("CIMMarkerPlacementInsidePolygon"===r.markerPlacement?.type){const t=CIMSymbolHelper/* CIMSymbolHelper */.wp.fromCIMInsidePolygon(r);return this._rasterizeCIMVectorMarker(t)}const t=(0,SDFHelper/* getSDFInfo */.eR)(r);return t&&!r.avoidSDFRasterization?Rasterizer_u(t):this._rasterizeCIMVectorMarker(r,!1,definitions/* rasterizedVectorMarkerMinSize */.oj)}}}_rasterizeCIMVectorMarker(r,t=!0,a){const s=t?Rect/* default */.A.fromExtent(r.frame):null,[i,o,c,l,h]=CIMSymbolHelper/* CIMSymbolHelper */.wp.rasterize(this._canvas,r,s,this._resourceManager,!0,a);return i?{size:[o,c],image:new Uint32Array(i.buffer),sdf:!1,simplePattern:!1,anchorX:l,anchorY:h}:null}rasterizeImageResource(e,r,t,a){this._canvas.width=e,this._canvas.height=r;const n=this._canvas.getContext("2d",{willReadFrequently:!0});t instanceof ImageData?n.putImageData(t,0,0):(t.setAttribute("width",`${e}px`),t.setAttribute("height",`${r}px`),n.drawImage(t,0,0,e,r));const s=n.getImageData(0,0,e,r),i=new Uint8Array(s.data);if(a)for(const c of a)if(c&&c.oldColor&&4===c.oldColor.length&&c.newColor&&4===c.newColor.length){const[e,r,t,a]=c.oldColor,[n,s,o,l]=c.newColor;if(e===n&&r===s&&t===o&&a===l)continue;for(let c=0;c<i.length;c+=4)e===i[c]&&r===i[c+1]&&t===i[c+2]&&a===i[c+3]&&(i[c]=n,i[c+1]=s,i[c+2]=o,i[c+3]=l)}let o;for(let c=0;c<i.length;c+=4)o=i[c+3]/255,i[c]=i[c]*o,i[c+1]=i[c+1]*o,i[c+2]=i[c+2]*o;let l=i,h=e,d=r;const u=Rasterizer_f;if(h>=u||d>=u){const t=h/d;t>1?(h=u,d=Math.round(u/t)):(d=u,h=Math.round(u*t)),l=new Uint8Array(4*h*d);const a=new Uint8ClampedArray(l.buffer);(0,utils/* resampleHermite */.Go)(i,e,r,a,h,d,!1)}return{size:[h,d],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}function Rasterizer_u(e){if(!e)return null;const{data:r,width:t,height:a,sdfPaddingRatio:n,sdfDecodeCoeff:s}=(0,SDFHelper/* buildSDF */.ce)(e);return r?{size:[t,a],image:new Uint32Array(r.buffer),sdf:!0,simplePattern:!0,sdfPaddingRatio:n,sdfDecodeCoeff:s,anchorX:0,anchorY:0}:null}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js
var webgl_Rect = __webpack_require__(60470);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/RectangleBinPack.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RectangleBinPack_t{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new webgl_Rect/* default */.A(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new webgl_Rect/* default */.A;let i=null,s=-1;for(let h=0;h<this._free.length;++h){const r=this._free[h];t<=r.width&&e<=r.height&&(null===i||r.y<=i.y&&r.x<=i.x)&&(i=r,s=h)}return null===i?new webgl_Rect/* default */.A:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new webgl_Rect/* default */.A(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new webgl_Rect/* default */.A(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new webgl_Rect/* default */.A(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new webgl_Rect/* default */.A(i.x,i.y+e,t,i.height-e))),new webgl_Rect/* default */.A(i.x,i.y,t,e))}release(h){for(let t=0;t<this._free.length;++t){const e=this._free[t];if(e.y===h.y&&e.height===h.height&&e.x+e.width===h.x)e.width+=h.width;else if(e.x===h.x&&e.width===h.width&&e.y+e.height===h.y)e.height+=h.height;else if(h.y===e.y&&h.height===e.height&&h.x+h.width===e.x)e.x=h.x,e.width+=h.width;else{if(h.x!==e.x||h.width!==e.width||h.y+h.height!==e.y)continue;e.y=h.y,e.height+=h.height}this._free.splice(t,1),this.release(h)}this._free.push(h)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/GlyphMosaic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const GlyphMosaic_n=256,GlyphMosaic_o=t=>Math.floor(t/256);function c(t){const e=new Set;for(const i of t)e.add(GlyphMosaic_o(i));return e}function GlyphMosaic_l(e,i,h){return e.has(i)||e.set(i,h().then((()=>{e.delete(i)})).catch((h=>{e.delete(i),(0,promiseUtils/* throwIfNotAbortError */.jH)(h)}))),e.get(i)}const GlyphMosaic_g=t=>({rect:new webgl_Rect/* default */.A(0,0,0,0),page:0,metrics:{left:0,width:0,height:0,advance:0,top:0},code:t,sdf:!0});class GlyphMosaic_p{constructor(t,e,h){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphCache={},this._textures=[],this._rangePromises=new Map,this._preloadCache={},this.width=t,this.height=e,this._glyphSource=h,this._binPack=new RectangleBinPack_t(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyphs()}dispose(){this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0,this._glyphData.length=0}_initDecorationGlyphs(){const t=[117,149,181,207,207,181,149,117],e=[],i=[];for(let r=0;r<t.length;r++){const h=t[r];for(let t=0;t<11;t++){const s=r>=3&&r<5&&t>=3&&t<8?255:0;e.push(h),i.push(s)}}const h={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(e)},s={metrics:{width:5,height:2,left:0,top:0,advance:0},bitmap:new Uint8Array(i)};this._recordGlyph(h),this._recordGlyph(s)}getTexture(t,e){if(!this._textures[e]){const i=new TextureDescriptor/* TextureDescriptor */.R;i.pixelFormat=views_webgl_enums/* PixelFormat */.Ab.ALPHA,i.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,i.width=this.width,i.height=this.height,this._textures[e]=new Texture/* Texture */.g(t,i,new Uint8Array(this.width*this.height))}return this._dirties[e]&&(this._textures[e].setData(this._glyphData[e]),this._dirties[e]=!1),this._textures[e]}async getGlyphItems(t,e,i){const h=this._getGlyphCache(t);return await this._fetchRanges(t,e,i),e.map((e=>this._getMosaicItem(h,t,e)))}bind(t,e,i,h){const s=this.getTexture(t,i);s.setSamplingMode(e),t.bindTexture(s,h)}preloadASCIIGlyphCache(t){const e=this._preloadCache[t];if(null!=e)return e;const i=this._glyphSource.preloadASCIIRange(t).then((()=>{const e=this._getGlyphCache(t);for(let i=0;i<256;i++)this._getMosaicItem(e,t,i)}));return this._preloadCache[t]=i,i}_getGlyphCache(t){return this._glyphCache[t]||(this._glyphCache[t]={}),this._glyphCache[t]}_invalidate(){this._dirties[this._currentPage]=!0}async _fetchRanges(t,e,i){const h=c(e),s=[];h.forEach((e=>{s.push(this._fetchRange(t,e,i))})),await Promise.all(s)}async _fetchRange(t,e,i){if(e>GlyphMosaic_n)return;const h=t+e;return GlyphMosaic_l(this._rangePromises,h,(()=>this._glyphSource.getRange(t,e,i)))}_getMosaicItem(t,e,i){if(!t[i]){const h=this._glyphSource.getGlyph(e,i);if(!h?.metrics)return GlyphMosaic_g(i);const s=this._recordGlyph(h),r=this._currentPage,a=h.metrics;t[i]={rect:s,page:r,metrics:a,code:i,sdf:!0},this._invalidate()}return t[i]}_recordGlyph(t){const h=t.metrics;let s;if(0===h.width)s=new webgl_Rect/* default */.A(0,0,0,0);else{const e=3,r=h.width+2*e,a=h.height+2*e;s=this._binPack.allocate(r,a),s.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(null),this._initDecorationGlyphs(),this._binPack=new RectangleBinPack_t(this.width-4,this.height-4),s=this._binPack.allocate(r,a));const n=this._glyphData[this._currentPage],o=t.bitmap;let c,l;if(o)for(let t=0;t<a;t++){c=r*t,l=this.width*(s.y+t)+s.x;for(let t=0;t<r;t++)n[l+t]=o[c+t]}(0,has/* default */.A)("esri-glyph-debug")&&this._showDebugPage(n)}return s}_showDebugPage(t){const e=document.createElement("canvas"),i=e.getContext("2d"),h=new ImageData(this.width,this.height),s=h.data;e.width=this.width,e.height=this.height,e.style.border="1px solid black";for(let r=0;r<t.length;++r)s[4*r]=t[r],s[4*r+1]=0,s[4*r+2]=0,s[4*r+3]=255;i.putImageData(h,0,0),document.body.appendChild(e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/pbf.js
var pbf = __webpack_require__(66471);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/GlyphSource.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GlyphSource_a{constructor(e){for(this._metrics=[],this._bitmaps=[];e.next();)switch(e.tag()){case 1:{const t=e.getMessage();for(;t.next();)switch(t.tag()){case 3:{const e=t.getMessage();let a,s,r,n,i,c,g;for(;e.next();)switch(e.tag()){case 1:a=e.getUInt32();break;case 2:s=e.getBytes();break;case 3:r=e.getUInt32();break;case 4:n=e.getUInt32();break;case 5:i=e.getSInt32();break;case 6:c=e.getSInt32();break;case 7:g=e.getUInt32();break;default:e.skip()}e.release(),a&&(this._metrics[a]={width:r,height:n,left:i,top:c,advance:g},this._bitmaps[a]=s);break}default:t.skip()}t.release();break}default:e.skip()}}getMetrics(e){return this._metrics[e]}getBitmap(e){return this._bitmaps[e]}}class GlyphSource_s{constructor(){this._ranges=[]}getRange(e){return this._ranges[e]}addRange(e,t){this._ranges[e]=t}}class GlyphSource_r{constructor(e){this._glyphInfo={},this._baseURL=e}getRange(s,r,n){const i=this._getFontStack(s);if(i.getRange(r))return Promise.resolve();const c=256*r,g=c+255,o=this._baseURL.replace("{fontstack}",s).replace("{range}",c+"-"+g);return (0,request/* default */.A)(o,{responseType:"array-buffer",...n}).then((e=>{i.addRange(r,new GlyphSource_a(new pbf/* default */.A(new Uint8Array(e.data),new DataView(e.data))))}))}async preloadASCIIRange(s){const r=this._getFontStack(s),n=0,i=255,c=this._baseURL.replace("{fontstack}",s).replace("{range}",n+"-"+i),g=await (0,request/* default */.A)(c,{responseType:"array-buffer"}),o=new GlyphSource_a(new pbf/* default */.A(new Uint8Array(g.data),new DataView(g.data)));for(let e=n;e<=i;e++)r.getRange(e)||r.addRange(e,o)}getGlyph(e,t){const a=this._getFontStack(e);if(!a)return;const s=Math.floor(t/256),r=a.getRange(s);return r?{metrics:r.getMetrics(t),bitmap:r.getBitmap(t)}:void 0}_getFontStack(e){let t=this._glyphInfo[e];return t||(t=this._glyphInfo[e]=new GlyphSource_s),t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/floatRGBA.js
var floatRGBA = __webpack_require__(51859);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/svgUtils.js
var svgUtils = __webpack_require__(77545);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const SDFConverter_o=1e20;class SDFConverter_a{constructor(t,e=2){this._textureSize=t,this._rasterizationScale=e,this._canvasSize=this._textureSize*this._rasterizationScale,this._svg=null;const{_canvasSize:s}=this,i=document.createElement("canvas");i.width=i.height=s,this._context=i.getContext("2d",{willReadFrequently:!1}),this._gridOuter=new Float64Array(s*s),this._gridInner=new Float64Array(s*s),this._f=new Float64Array(s),this._d=new Float64Array(s),this._z=new Float64Array(s+1),this._v=new Int16Array(s)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg=(0,svgUtils/* destroyHiddenSvg */.pK)(this._svg)}draw(i,r,n){const{_canvasSize:a,_textureSize:h,_rasterizationScale:_}=this,l=h/4;this._initSVG();const c=this.createSVGString(i,r);return new Promise(((i,r)=>{const d=new Image;d.src="data:image/svg+xml; charset=utf8, "+encodeURIComponent(c),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,a,a),this._context.drawImage(d,0,0,a,a);const e=this._context.getImageData(0,0,a,a),s=new Uint8Array(h*h*4);for(let t=0;t<a*a;t++){const s=e.data[4*t+3]/255;this._gridOuter[t]=1===s?0:0===s?SDFConverter_o:Math.max(0,.5-s)**2,this._gridInner[t]=1===s?SDFConverter_o:0===s?0:Math.max(0,s-.5)**2}this._edt(this._gridOuter,a,a),this._edt(this._gridInner,a,a);for(let i=0;i<h*h;i++){let e=0;for(let t=0;t<_;t++){const s=Math.floor(i/h)*_+t;for(let t=0;t<_;t++){const r=s*a+(i%h*_+t);e+=this._gridOuter[r]-this._gridInner[r]}}e/=_*_,e/=_;(0,floatRGBA/* packFloatRGBA */.U)(.5-e/(2*l),s,4*i)}i(s)};const g=n?.signal;g&&(0,promiseUtils/* onAbort */.u7)(g,(()=>r((0,promiseUtils/* createAbortError */.NK)())))}))}_initSVG(){return this._svg||(this._svg=(0,svgUtils/* createHiddenSvg */.p)()),this._svg}createSVGString(t,e){const s=this._initSVG(),i=(0,svgUtils/* createSvgElement */.FJ)("path");i.setAttribute("d",t),s.appendChild(i);const r=i.getBBox(),o=r.width/r.height,a=this._canvasSize/2;let h,_,l;if(o>1){h=a/r.width;const t=a*(1/o);_=this._canvasSize/4,l=a-t/2}else{h=a/r.height;_=a-a*o/2,l=this._canvasSize/4}const c=-r.x*h+_,d=-r.y*h+l;i.setAttribute("style",`transform: matrix(${h}, 0, 0, ${h}, ${c}, ${d})`),i.setAttribute("stroke-width",""+.5/h);const g=`<svg style="fill:${e?"red":"none"}; stroke:${e?"none":"red"}" height="${this._canvasSize}" width="${this._canvasSize}" xmlns="http://www.w3.org/2000/svg">${s.innerHTML}</svg>`;return s.removeChild(i),g}_edt(t,e,s){const i=this._f,r=this._d,n=this._v,o=this._z;for(let a=0;a<e;a++){for(let r=0;r<s;r++)i[r]=t[r*e+a];this._edt1d(i,r,n,o,s);for(let i=0;i<s;i++)t[i*e+a]=r[i]}for(let a=0;a<s;a++){for(let s=0;s<e;s++)i[s]=t[a*e+s];this._edt1d(i,r,n,o,e);for(let s=0;s<e;s++)t[a*e+s]=Math.sqrt(r[s])}}_edt1d(t,e,s,i,r){s[0]=0,i[0]=-1e20,i[1]=1e20;for(let n=1,o=0;n<r;n++){let e=(t[n]+n*n-(t[s[o]]+s[o]*s[o]))/(2*n-2*s[o]);for(;e<=i[o];)o--,e=(t[n]+n*n-(t[s[o]]+s[o]*s[o]))/(2*n-2*s[o]);o++,s[o]=n,i[o]=e,i[o+1]=1e20}for(let n=0,o=0;n<r;n++){for(;i[o+1]<n;)o++;e[n]=(n-s[o])*(n-s[o])+t[s[o]]}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js
var GeometryUtils = __webpack_require__(59339);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/SpriteMosaic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function SpriteMosaic_c(t){return t&&"static"===t.type}class SpriteMosaic_n{constructor(t,e,i=0){this._mosaicPages=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects=new Map,this._spriteCopyQueue=[],this.pixelRatio=1,this._pageWidth=t,this._pageHeight=e,i>0&&(this._maxItemSize=i),this.pixelRatio=window.devicePixelRatio||1,this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight);const s=Math.floor(this._pageWidth),r=Math.floor(this._pageHeight);this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(s*r)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0})}getWidth(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[0]}getHeight(t){return t>=this._mosaicPages.length?-1:this._mosaicPages[t].size[1]}getPageTexture(t){return t<this._mosaicPages.length?this._mosaicPages[t].texture:null}has(t){return this._mosaicRects.has(t)}get itemCount(){return this._mosaicRects.size}getSpriteItem(t){return this._mosaicRects.get(t)}addSpriteItem(t,i,a,r,o,h,n=1,g="Linear",p=.5,m=1){if(this._mosaicRects.has(t))return this._mosaicRects.get(t);let d,u,l;if(SpriteMosaic_c(a))[d,u,l]=this._allocateImage(i[0],i[1]);else{d=new webgl_Rect/* default */.A(0,0,i[0],i[1]),u=this._mosaicPages.length;const t=void 0;this._mosaicPages.push({mosaicsData:a,size:[i[0]+2*definitions/* spritePadding */.hM,i[1]+2*definitions/* spritePadding */.hM],dirty:!0,texture:t})}if(d.width<=0||d.height<=0)return null;const _={type:"sprite",rect:d,width:i[0],height:i[1],sdf:o,simplePattern:h,rasterizationScale:n,samplingMode:g,sdfPaddingRatio:p,sdfDecodeCoeff:m,page:u};return this._mosaicRects.set(t,_),SpriteMosaic_c(a)&&((0,has/* default */.A)("esri-mosaic-debug")&&this._showDebugSprite(i,a.data),this._copy({rect:d,spriteSize:i,spriteData:a.data,page:u,pageSize:l,repeat:r,sdf:o})),_}hasItemsToProcess(){return 0!==this._spriteCopyQueue.length}processNextItem(){const t=this._spriteCopyQueue.pop();t&&this._copy(t)}getMosaicItemPosition(t){const i=this.getSpriteItem(t),s=i?.rect;if(!s)return null;s.width=i.width,s.height=i.height;const a=i.width,r=i.height,o=definitions/* spritePadding */.hM,h=this._mosaicPages[i.page].size;return{size:[i.width,i.height],tl:[(s.x+o)/h[0],(s.y+o)/h[1]],br:[(s.x+o+a)/h[0],(s.y+o+r)/h[1]],page:i.page}}bind(t,e,i=0,s=0){const a=this._mosaicPages[i],r=a.mosaicsData;let o=a.texture;if(o||(o=SpriteMosaic_p(t,a.size),a.texture=o),o.setSamplingMode(e),SpriteMosaic_c(r))t.bindTexture(o,s),a.dirty&&(o.setData(new Uint8Array(r.data.buffer)),o.generateMipmap(),(0,has/* default */.A)("esri-mosaic-debug")&&this._showDebugPage(i));else{r.data.loadFrame(o),t.bindTexture(o,s),o.generateMipmap()}a.dirty=!1}getTexture(t,e=0){const i=this._mosaicPages[e],s=i.mosaicsData;let a=i.texture;if(a||(a=SpriteMosaic_p(t,i.size),i.texture=a),SpriteMosaic_c(s))i.dirty&&(a.setData(new Uint8Array(s.data.buffer)),a.generateMipmap(),(0,has/* default */.A)("esri-mosaic-debug")&&this._showDebugPage(e));else{s.data.loadFrame(a),a.generateMipmap()}return i.dirty=!1,a}dispose(){this._binPack=null;for(const t of this._mosaicPages){const e=t.texture;e&&e.dispose();const i=t.mosaicsData;if(!SpriteMosaic_c(i)){i.data.destroy()}}this._mosaicPages=null,this._mosaicRects.clear()}static _copyBits(t,e,i,s,a,r,o,h,c,n,g){let p=s*e+i,m=h*r+o;if(g){m-=r;for(let o=-1;o<=n;o++,p=((o+n)%n+s)*e+i,m+=r)for(let e=-1;e<=c;e++)a[m+e]=t[p+(e+c)%c]}else for(let d=0;d<n;d++){for(let e=0;e<c;e++)a[m+e]=t[p+e];p+=e,m+=r}}_copy(i){if(i.page>=this._mosaicPages.length)return;const s=this._mosaicPages[i.page],a=s.mosaicsData;if(!SpriteMosaic_c(s.mosaicsData))throw new core_Error/* default */.A("mapview-invalid-resource","unsuitable data type!");const r=i.spriteData,o=a.data;SpriteMosaic_n._copyBits(r,i.spriteSize[0],0,0,o,i.pageSize[0],i.rect.x+definitions/* spritePadding */.hM,i.rect.y+definitions/* spritePadding */.hM,i.spriteSize[0],i.spriteSize[1],i.repeat),s.dirty=!0}_allocateImage(t,r){t+=2*definitions/* spritePadding */.hM,r+=2*definitions/* spritePadding */.hM;const o=Math.max(t,r);if(this._maxItemSize&&this._maxItemSize<o){const e=2**Math.ceil((0,GeometryUtils/* log2 */.p6)(t)),a=2**Math.ceil((0,GeometryUtils/* log2 */.p6)(r)),o=new webgl_Rect/* default */.A(0,0,t,r);return this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(e*a)},size:[e,a],dirty:!0,texture:void 0}),[o,this._mosaicPages.length-1,[e,a]]}const h=this._binPack.allocate(t,r);if(h.width<=0){const e=this._mosaicPages[this._currentPage];return!e.dirty&&SpriteMosaic_c(e.mosaicsData)&&(e.mosaicsData.data=null),this._currentPage=this._mosaicPages.length,this._mosaicPages.push({mosaicsData:{type:"static",data:new Uint32Array(this._pageWidth*this._pageHeight)},size:[this._pageWidth,this._pageHeight],dirty:!0,texture:void 0}),this._binPack=new RectangleBinPack_t(this._pageWidth,this._pageHeight),this._allocateImage(t,r)}return[h,this._currentPage,[this._pageWidth,this._pageHeight]]}_showDebugSprite([t,e],i){const s=document.createElement("canvas");s.width=t,s.height=e,s.setAttribute("style",`position: absolute; top: ${4+204*SpriteMosaic_g++}px; right: 208px; width: 200px; height: 200px; border: 1px solid black;`);const a=s.getContext("2d"),r=new ImageData(t,e);r.data.set(new Uint8Array(i.buffer)),a.putImageData(r,0,0),document.body.appendChild(s)}_showDebugPage(t){const e=this._mosaicPages[t],{size:[i,s],mosaicsData:a}=e;if(!SpriteMosaic_c(a))return;const r=`mosaicDebugPage${t}`,o=document.getElementById(r)??document.createElement("canvas");o.id=r,o.width=i,o.height=s,o.setAttribute("style",`position: absolute; top: ${4+204*t}px; right: 4px; width: 200px; height: 200px; border: 1px solid black;`);const h=o.getContext("2d"),n=new ImageData(i,s);n.data.set(new Uint8Array(a.data.buffer)),h.putImageData(n,0,0),document.body.appendChild(o)}}let SpriteMosaic_g=0;function SpriteMosaic_p(t,e){const i=new TextureDescriptor/* TextureDescriptor */.R;return i.width=e[0],i.height=e[1],i.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,new Texture/* Texture */.g(t,i,null)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/urlUtils.js
var urlUtils = __webpack_require__(84194);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/utils.js
var animatedFormats_utils = __webpack_require__(68775);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/AnimatableTextureResource.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatableTextureResource_a{constructor(t,a,h,e){this._animation=t,this._frameData=null;const n=t=>{this._frameData=t,a.requestRender()};this.frameCount=this._animation.frameDurations.length,this.width=this._animation.width,this.height=this._animation.height,this._playHandle=(0,animatedFormats_utils/* play */.ZH)(this._animation,h,e,n)}destroy(){this._playHandle.remove()}loadFrame(i){const a=this._frameData;if(null==a)return;const h="width"in a?a.width:a.codedWidth,e="height"in a?a.height:a.codedHeight;i.updateData(0,definitions/* spritePadding */.hM,definitions/* spritePadding */.hM,h,e,a),this._frameData=null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ValidatedTextureDescriptor.js
var ValidatedTextureDescriptor = __webpack_require__(78654);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/store/AnimationStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimationStore_h{constructor(){this._entries=new AnimationStore_l,this._nodes=new Map,this._book=new AnimationStore_a}add(t){let e=this._entries.get(t);if(!e){const s=this._book.add(t),r=new Object;e={location:s,references:0,handle:r};const o=this._entries.set(t,e);this._nodes.set(r,o)}return e.references++,e}remove(t){const e=this._nodes.get(t.handle);e&&e.payload&&(e.payload.references--,0===e.payload.references&&(this._book.remove(e.payload.location),this._entries.delete(e),this._nodes.delete(t.handle)))}getTexture(t,e){return this._book.getTexture(t,e)}destroy(){this._book.destroy()}}class AnimationStore_u{constructor(t,e){this.parent=t,this.key=e,this.payload=null,this._children=new Map}get(t){return this._children.get(t)}ensure(t){let e=this._children.get(t);return e||(e=new AnimationStore_u(this,t),this._children.set(t,e)),e}delete(t){this._children.delete(t)}}class AnimationStore_l{constructor(){this._root=new AnimationStore_u(null,NaN)}set(t,e){let s=this._root;for(const r of t)for(const t of r)s=s.ensure(t);return s.payload=e,s}delete(t){t.parent?.delete(t.key)}get(t){let e=this._root;for(const s of t)for(const t of s){const s=e.get(t);if(!s)return;e=s}return e.payload||void 0}}class AnimationStore_a{constructor(){this._pages=[]}add(t){0===this._pages.length&&this._pages.push(new AnimationStore_);let e=this._pages.length-1,s=this._pages[e].add(t);if(s||(this._pages.push(new AnimationStore_),e=this._pages.length-1,s=this._pages[e].add(t)),!s)throw new Error("Data allocation failed.");return{...s,page:e}}remove(t){this._pages[t.page].remove(t)}getTexture(t,e){return this._pages[e].getTexture(t)}destroy(){}}class AnimationStore_{constructor(){this._cursor={row:0,column:0},this._columns=1024,this._rows=1024,this._data=new Float32Array(this._columns*this._rows*4),this._texture=null,this._textureCursor={row:0,column:0}}add(t){if(t.length>this._columns)throw new Error(`The maximum allocation size is ${this._columns} texels.`);const e={...this._cursor};if(e.column+=t.length,e.column>=this._columns&&(e.column=t.length,e.row++),e.row>=this._rows)return null;this._cursor=e;const s={...this._cursor};s.column-=t.length;let r=4*(s.row*this._columns+s.column);for(let o=0;o<t.length;o++)this._data[r++]=t[o][0],this._data[r++]=t[o][1],this._data[r++]=t[o][2],this._data[r++]=t[o][3];return s}remove(t){}getTexture(h){if(!this._texture){const u=new TextureDescriptor/* TextureDescriptor */.R(this._columns,this._rows);u.pixelFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,u.dataType=views_webgl_enums/* PixelType */.ld.FLOAT,u.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,u.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,u.hasMipmap=!1;const l=new ValidatedTextureDescriptor/* ValidatedTextureDescriptor */.z(h,u);this._texture=new Texture/* Texture */.g(h,l)}if(this._cursor.row===this._textureCursor.row&&this._cursor.column===this._textureCursor.column)return this._texture;const u=this._textureCursor.row,l=this._cursor.row-u+1;return this._texture.updateData(0,0,u,this._columns,l,this._data,u),this._textureCursor.row=this._cursor.row,this._textureCursor.column=this._cursor.column,this._texture}destroy(){this._texture?.dispose()}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TextureManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TextureManager_$="arial-unicode-ms-regular",TextureManager_v=()=>Logger/* default */.A.getLogger("esri.views.MapView"),TextureManager_k=(e,t,i)=>TextureManager_v().error(new core_Error/* default */.A(e,t,i)),TextureManager_A=(e,t="")=>TextureManager_v().warnOnce(e,t);class TextureManager_F{static fromMosaic(e,t){return new TextureManager_F(e,t.page,t.sdf,t.samplingMode)}constructor(e,t,i,s){this.mosaicType=e,this.page=t,this.sdf=i,this.samplingMode=s}}class G{constructor(i){this._requestRender=i,this._resourceManager=new CIMResourceManager/* default */.A,this._invalidFontsMap=new Map,this._sdfConverter=new SDFConverter_a(definitions/* svgSdfTextureInnerSize */.yA),this._bindingInfos=new Array,this._hashToBindingIndex=new Map,this._ongoingRasterizations=new Map,this._imageRequestQueue=new QueueProcessor.QueueProcessor({concurrency:10,process:async(e,i)=>{(0,promiseUtils/* throwIfAborted */.Te)(i);try{return await (0,request/* default */.A)(e,{responseType:"image",signal:i})}catch(r){if(!(0,promiseUtils/* isAbortError */.zf)(r))throw new core_Error/* default */.A("mapview-invalid-resource",`Could not fetch requested resource at ${e}`,r);throw r}}}),this.animationStore=new AnimationStore_h,this._spriteMosaic=new SpriteMosaic_n(2048,2048,500),this._glyphSource=new GlyphSource_r(`${config/* default */.A.fontsUrl}/{fontstack}/{range}.pbf`),this._glyphMosaic=new GlyphMosaic_p(1024,1024,this._glyphSource),this._rasterizer=new Rasterizer_d(this.resourceManager)}dispose(){this._spriteMosaic.dispose(),this._glyphMosaic.dispose(),this._rasterizer.dispose(),this._sdfConverter.dispose(),this._spriteMosaic=null,this._glyphMosaic=null,this._sdfConverter=null,this._hashToBindingIndex.clear(),this._hashToBindingIndex=null,this._bindingInfos=null,this._ongoingRasterizations.clear(),this._ongoingRasterizations=null,this._imageRequestQueue.clear(),this._imageRequestQueue=null,this._resourceManager.destroy(),this.animationStore.destroy()}get sprites(){return this._spriteMosaic}get glyphs(){return this._glyphMosaic}get resourceManager(){return this._resourceManager}async rasterizeItem(e,t){if(null==e)return TextureManager_k("mapview-null-resource","Unable to rasterize null resource"),null;if("animation-info"===e.type){const{resource:t}=e,i=this.animationStore.add(t),{location:s}=i;return{rect:new webgl_Rect/* default */.A(s.column,s.row,t.length,1),page:s.page,type:"sprite",width:t.length,height:1,rasterizationScale:1,sdfPaddingRatio:.5,samplingMode:"Linear",sdfDecodeCoeff:1,simplePattern:!1}}if("cim-rasterization-info"!==e.type)return TextureManager_k("mapview-unexpected-resource","Unable to rasterize resource"),null;const{resource:i}=e;if("text"===i.type){const e=await this._rasterizeText(i,t);for(const t of e.glyphs)this._setTextureBinding(webgl_enums/* MosaicType */.Be.GLYPH,t);return e}const s=await this._rasterizeSprite(i,t);return s&&this._setTextureBinding(webgl_enums/* MosaicType */.Be.SPRITE,s),s}getMosaicInfo(e,t,i=!1){const s=this._getTextureBindingInfo(e,t,i);return s?{size:s.size,texture:{texture:s.texture,unit:"sprite"===s.type?definitions/* textureBindingSpriteAtlas */.Pq:definitions/* textureBindingGlyphAtlas */.ue}}:(TextureManager_k("mapview-invalid-resource",`Unable to find resource for ${t}`),{size:[0,0],texture:{texture:null,unit:0}})}_getTextureBindingInfo(e,t,i){const s=this._bindingInfos[t-1],r=s.page,a="Nearest"===s.samplingMode?views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST:i?views_webgl_enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:views_webgl_enums/* TextureSamplingMode */.Cj.LINEAR;switch(s.mosaicType){case webgl_enums/* MosaicType */.Be.SPRITE:{const t=[this.sprites.getWidth(r),this.sprites.getHeight(r)],i=this._spriteMosaic.getTexture(e,r);return i.setSamplingMode(a),{type:"sprite",texture:i,size:t}}case webgl_enums/* MosaicType */.Be.GLYPH:{const t=[this.glyphs.width,this.glyphs.height],i=this._glyphMosaic.getTexture(e,r);return this._glyphMosaic.bind(e,a,r,definitions/* textureBindingGlyphAtlas */.ue),i.setSamplingMode(a),{type:"glyph",texture:i,size:t}}default:return TextureManager_k("mapview-texture-manager",`Cannot handle unknown type ${s.mosaicType}`),null}}_hashMosaic(e,t){return 1|e<<1|(t.sdf?1:0)<<2|("Nearest"===t.samplingMode?1:0)<<3|t.page<<4}_setTextureBinding(e,t){const i=this._hashMosaic(e,t);if(!this._hashToBindingIndex.has(i)){const s=TextureManager_F.fromMosaic(e,t),r=this._bindingInfos.length+1;this._hashToBindingIndex.set(i,r),this._bindingInfos.push(s)}t.textureBinding=this._hashToBindingIndex.get(i)}async _rasterizeText(e,t){const{font:s,textString:a}=e,n=(0,fontUtils/* getFullyQualifiedFontName */.rK)(s),o=this._invalidFontsMap.has(n),[c,h]=(0,BidiText/* bidiText */.y)(a),l=(0,Utils/* charCodes */.bX)(c);try{const e=o?TextureManager_$:n;(0,has/* default */.A)("esri-2d-stabilize-glyphs")&&await this._glyphMosaic.preloadASCIIGlyphCache(e);return{type:"glyphs",glyphs:await this._glyphMosaic.getGlyphItems(e,l,t),isRightToLeft:h}}catch(u){TextureManager_A(`Font ${n} is not available on the web, using "Arial Unicode MS Regular"`),this._invalidFontsMap.set(n,!0);return{type:"glyphs",glyphs:await this._glyphMosaic.getGlyphItems(TextureManager_$,l,t),isRightToLeft:h}}}_hashSpriteResource(e){switch(e.type){case"path":return`path:${e.path}.${e.asFill?1:0}`;case"CIMPictureMarker":return`${e.type}:${e.url}:${e.size}:${(0,Utils/* getCIMMarkerPlacementHash */.$Y)(e.markerPlacement)}`;case"CIMPictureFill":return`${e.type}:${e.url}:${e.height}`;case"CIMPictureStroke":return`${e.type}:${e.url}:${e.width}`;case"dash":return`dash:${e.capStyle}.${(0,utils/* normalizeDashTemplate */.K3)(e.dashTemplate).join("")}`;case"sdf":return`sdf:${JSON.stringify(e.geom)}.${e.asFill?1:0}`;case"fill-style":return`fill_style:${e.style}`;case"animated":return JSON.stringify((0,urlUtils/* discardUrlIfHasUrlHash */.I)(e));case"CIMGradientFill":case"CIMGradientStroke":return`gradient:${JSON.stringify(e.colorRamp)}.${e.gradientType}.${e.interval}`;case"CIMHatchFill":case"CIMVectorMarker":return JSON.stringify(e)}}async _rasterizeSprite(e,t){if(!e)return null;const i=(0,string/* numericHash */.Wm)(this._hashSpriteResource(e));if(this._spriteMosaic.has(i))return this._spriteMosaic.getSpriteItem(i);if("url"in e&&e.url||"CIMPictureFill"===e.type||"CIMPictureStroke"===e.type||"CIMPictureMarker"===e.type||"CIMVectorMarker"===e.type){const t=[];CIMSymbolHelper/* CIMSymbolHelper */.wp.fetchResources({type:"CIMPointSymbol",symbolLayers:[e]},this._resourceManager,t),t.length>0&&await Promise.all(t)}switch(e.type){case"CIMPictureMarker":return"CIMMarkerPlacementInsidePolygon"===e.markerPlacement?.type?this._rasterizeJSONResource(i,e):this._handleAsyncResource(i,e,t);case"animated":case"CIMPictureFill":case"CIMPictureStroke":case"path":return this._handleAsyncResource(i,e,t);case"CIMGradientFill":case"CIMGradientStroke":case"CIMHatchFill":case"CIMVectorMarker":case"dash":case"fill-style":case"sdf":return this._rasterizeJSONResource(i,e)}}_rasterizeJSONResource(e,t){const i=this._rasterizer.rasterizeJSONResource(t);if(i){const{size:s,image:r,sdf:a,simplePattern:n,rasterizationScale:o,samplingMode:c,sdfPaddingRatio:h,sdfDecodeCoeff:l}=i;return this._addItemToMosaic(e,s,{type:"static",data:r},N(t),a,n,o,c,h,l)}return null}async _handleAsyncResource(e,t,i){if(this._ongoingRasterizations.has(e))return this._ongoingRasterizations.get(e);let s;return s="path"===t.type?this._handleSVG(t,e,i):this._handleImage(t,e,i),this._ongoingRasterizations.set(e,s),s.finally((()=>this._ongoingRasterizations.delete(e))),s}async _handleSVG(e,t,i){const s=[definitions/* svgSdfTextureInnerSize */.yA,definitions/* svgSdfTextureInnerSize */.yA],{asFill:r}=e,a=await this._sdfConverter.draw(e.path,r,i);return this._addItemToMosaic(t,s,{type:"static",data:new Uint32Array(a.buffer)},!1,!0,!0)}async _handleGIFOrPNG(e,t,i){const s=e.url,r=this.resourceManager.getResource(s);if(null==r)return null;const{width:a,height:n}=r;if(r instanceof HTMLImageElement){if("animated"===e.type)return TextureManager_k("mapview-unexpected-resource","Attempt to configure animations for a non-animated image."),null;const i="colorSubstitutions"in e?e.colorSubstitutions:void 0,{size:s,sdf:o,image:c}=this._rasterizer.rasterizeImageResource(a,n,r,i);return this._addItemToMosaic(t,s,{type:"static",data:c},N(e),o,!1)}let o,c,h;"animated"===e.type?(o=!1,c={type:"CIMAnimatedSymbolProperties",playAnimation:e.playAnimation,reverseAnimation:e.reverseAnimation,randomizeStartTime:e.randomizeStartTime,randomizeStartSeed:e.randomizeStartSeed,startTimeOffset:e.startTimeOffset,duration:e.duration,repeatType:e.repeatType,repeatDelay:e.repeatDelay},h=e.startGroup||0):(o=N(e),c={type:"CIMAnimatedSymbolProperties"},h=0);const l=new AnimatableTextureResource_a(r,this._requestRender,c,h);return this._addItemToMosaic(t,[l.width,l.height],{type:"animated",data:l},o,!1,!1)}async _handleImage(e,t,i){const r=e.url;if(TextureManager_L(r)||TextureManager_U(r))return this._handleGIFOrPNG(e,t,i);if("animated"===e.type)return TextureManager_k("mapview-unexpected-resource","Attempt to configure animations for a non-animated image."),null;try{let s;const a=this.resourceManager.getResource(r);if(null!=a&&a instanceof HTMLImageElement)s=a;else{const{data:e}=await this._imageRequestQueue.push(r,{...i});s=e}if((0,Utils/* isSVGImage */.UE)(r))if("width"in e&&"height"in e)s.width=(0,screenUtils/* pt2px */.Lz)(e.width),s.height=(0,screenUtils/* pt2px */.Lz)(e.height);else if("cim"in e){const t=e;s.width=(0,screenUtils/* pt2px */.Lz)(t.width??t.scaleX*t.size),s.height=(0,screenUtils/* pt2px */.Lz)(t.size)}if(!s.width||!s.height)return null;const n=s.width,o=s.height,c="colorSubstitutions"in e?e.colorSubstitutions:void 0,{size:l,sdf:u,image:p}=this._rasterizer.rasterizeImageResource(n,o,s,c);return this._addItemToMosaic(t,l,{type:"static",data:p},N(e),u,!1)}catch(k){if(!(0,promiseUtils/* isAbortError */.zf)(k))throw new core_Error/* default */.A("mapview-invalid-resource",`Could not fetch requested resource at ${r}. ${k.message}`);throw k}}_addItemToMosaic(e,t,i,s,r,a,n,o,c,h){return this._spriteMosaic.addSpriteItem(e,t,i,s,r,a,n,o,c,h)}}function N(e){switch(e.type){case"CIMVectorMarker":case"CIMPictureMarker":return E(e);default:return!0}}const B=e=>null!=e&&e.startsWith("data:image/gif"),TextureManager_L=e=>e&&(e.includes(".gif")||B(e)),TextureManager_O=e=>null!=e&&e.startsWith("data:image/png"),TextureManager_U=e=>e&&(e.includes(".png")||TextureManager_O(e)),E=e=>e&&"markerPlacement"in e&&e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type;

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TextureUploadManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TextureUploadManager_u{constructor(e){this._queue=[],this._refreshable=e}destroy(){this._queue=[]}enqueueTextureUpdate(r,u){const n=(0,promiseUtils/* createResolver */.Tw)(),h=r,i=definitions/* textureUploadManagerChunkSize */.Qb,a=Math.ceil(h.height/i);(0,promiseUtils/* throwIfAborted */.Te)(u);for(let e=0;e<a;e++){const t=e*i,s=e===a-1,o=s?h.height-i*e:i;this._queue.push({type:"chunk",request:r,resolver:n,chunk:e,chunkOffset:t,destHeight:o,chunkIsLast:s,options:u})}return (0,promiseUtils/* onAbortOrThrow */.NY)(u,(e=>n.reject(e))),n.promise}upload(){const e=performance.now();let t=0;for(;this._queue.length;){const s=this._queue.shift();if(s){if(null!=s.options.signal&&s.options.signal.aborted)continue;switch(s.type){case"chunk":this._uploadChunk(s);break;case"no-chunk":this._uploadNoChunk(s)}++t;const o=performance.now()-e;if(o+o/t>=definitions/* textureUploadManagerBudget */.r1)break}}this._queue.length&&this._refreshable.requestRender()}_uploadChunk(e){const{request:t,resolver:s,chunkOffset:o,chunkIsLast:r,destHeight:u}=e,{data:n,texture:h,width:i}=t;null!=n&&(h.updateData(0,0,o,i,u,n,o),r&&s.resolve())}_uploadNoChunk(e){const{request:t,resolver:s}=e,{data:o,texture:r}=t;r.setData(o),s.resolve()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/common.js
var common = __webpack_require__(65257);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js
var VertexStream = __webpack_require__(43438);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/StencilPrograms.js
var StencilPrograms = __webpack_require__(79194);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WorldExtentClipRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const WorldExtentClipRenderer_g=(0,vec2f64/* fromValues */.fA)(-.5,-.5);class WorldExtentClipRenderer_x{constructor(){this._centerNdc=(0,vec3f64/* create */.vt)(),this._pxToNdc=(0,vec3f64/* create */.vt)(),this._worldDimensionsPx=(0,vec3f64/* create */.vt)(),this._mat3=(0,mat3f32/* create */.vt)(),this._initialized=!1}dispose(){this._program=(0,maybe/* disposeMaybe */.WD)(this._program),this._quad=(0,maybe/* disposeMaybe */.WD)(this._quad)}render(t,i,e){const{context:r}=t,s=this._updateGeometry(t,e);if(null!=i){const{r:t,g:e,b:s,a:o}=i;r.setClearColor(o*t/255,o*e/255,o*s/255,o)}else r.setClearColor(0,0,0,0);if(r.setStencilFunction(views_webgl_enums/* CompareFunction */.MT.ALWAYS,0,255),r.setStencilWriteMask(255),!s)return r.setClearStencil(definitions/* backbufferStencilVisible */.Qs),void r.clear(views_webgl_enums/* FramebufferBit */.NV.STENCIL|views_webgl_enums/* FramebufferBit */.NV.COLOR);r.setClearStencil(definitions/* backbufferStencilClipped */.tP),r.clear(views_webgl_enums/* FramebufferBit */.NV.STENCIL|views_webgl_enums/* FramebufferBit */.NV.COLOR),this._initialized||this._initialize(r),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setColorMask(!1,!1,!1,!1),r.setBlendingEnabled(!1),r.setStencilOp(views_webgl_enums/* StencilOperation */.eA.KEEP,views_webgl_enums/* StencilOperation */.eA.KEEP,views_webgl_enums/* StencilOperation */.eA.REPLACE),r.setStencilFunction(views_webgl_enums/* CompareFunction */.MT.ALWAYS,definitions/* backbufferStencilVisible */.Qs,255),r.setStencilTestEnabled(!0),r.useProgram(this._program),this._program.setUniformMatrix3fv("u_worldExtent",this._mat3),this._quad.bind(),this._quad.draw(),this._quad.unbind()}_initialize(t){if(this._initialized)return;const i=(0,ProgramTemplate/* createProgram */.r)(t,StencilPrograms/* stencil */.P);i&&(this._program=i,this._quad=new VertexStream/* default */.A(t,[0,0,1,0,0,1,1,1]),this._initialized=!0)}_updateGeometry(t,a){const{state:n,pixelRatio:l}=t,{size:c,rotation:h}=n,d=Math.round(c[0]*l),p=Math.round(c[1]*l);if(!n.spatialReference.isWrappable)return!1;const _=(0,common/* toRadian */.DF)(h),f=Math.abs(Math.cos(_)),u=Math.abs(Math.sin(_)),b=Math.round(d*f+p*u),x=Math.round(l*n.worldScreenWidth);if(b<=x)return!1;const S=d*u+p*f,E=(a.left-a.right)*l/d,j=(a.bottom-a.top)*l/p;(0,vec32.i)(this._worldDimensionsPx,x,S,1),(0,vec32.i)(this._pxToNdc,2/d,-2/p,1),(0,vec32.i)(this._centerNdc,E,j,1);const C=this._mat3;return (0,mat3/* fromTranslation */.kN)(C,this._centerNdc),(0,mat3/* scale */.hs)(C,C,this._pxToNdc),0!==h&&(0,mat3/* rotate */.e$)(C,C,_),(0,mat3/* scale */.hs)(C,C,this._worldDimensionsPx),(0,mat3/* translate */.Tl)(C,C,WorldExtentClipRenderer_g),!0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/utils.js
var shaderGraph_utils = __webpack_require__(65019);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js
var Technique = __webpack_require__(17730);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js
var TechniqueType = __webpack_require__(98826);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/BlendShader.js
var BlendShader = __webpack_require__(24331);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/OpacityShader.js
var OpacityShader = __webpack_require__(56561);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/blend/BlendTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class BlendTechnique_f extends Technique/* Technique */.j{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Blend,this._backBufferTexture=null,this.shaders={blend:new BlendShader/* BlendShader */.L,opacity:new OpacityShader/* OpacityShader */.x}}shutdown(){super.shutdown(),null!==this._backBufferTexture&&(this._backBufferTexture.dispose(),this._backBufferTexture=null)}render(t,r){const{context:s,state:i,pixelRatio:o,inFadeTransition:n,painter:a}=t,{size:c}=i,f=s.getBoundFramebufferObject();let h,l;null!=f?(h=f.width,l=f.height):(h=Math.round(o*c[0]),l=Math.round(o*c[1]));const{blendMode:d}=r;if("normal"===d){const t={shader:this.shaders.opacity,uniforms:{config:{layerTexture:{texture:r.colorTexture,unit:0},opacity:r.config.opacity}},defines:null,optionalAttributes:null,useComputeBuffer:!1};return a.setPipelineState(shaderGraph_utils/* simplePipelineState */.i),void a.submitDrawMesh(s,t,a.quadMesh)}const p=this._createOrResizeTexture(t,h,l);f.copyToTexture(0,0,h,l,0,0,p);const x={color:{write:[!0,!0,!0,!0],blendMode:"custom",blendParameters:{srcRGB:views_webgl_enums/* BlendFactor */.dn.ONE,dstRGB:views_webgl_enums/* BlendFactor */.dn.ZERO,srcAlpha:views_webgl_enums/* BlendFactor */.dn.ONE,dstAlpha:views_webgl_enums/* BlendFactor */.dn.ZERO}},depth:!1,stencil:!1};a.setPipelineState(x);const b={backbufferTexture:{texture:p,unit:0},layerTexture:{texture:r.colorTexture,unit:1},inFadeOpacity:n?1:0,...r.config},T={shader:this.shaders.blend,uniforms:{config:b},defines:{blendMode:d},optionalAttributes:null,useComputeBuffer:!1};a.submitDrawMesh(s,T,a.quadMesh)}_createOrResizeTexture(e,t,r){const{context:s}=e;if(null!==this._backBufferTexture&&this._backBufferTexture.descriptor?.width===t&&this._backBufferTexture.descriptor?.height===r)return this._backBufferTexture;if(null===this._backBufferTexture){const e=new TextureDescriptor/* TextureDescriptor */.R;e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.width=t,e.height=r,this._backBufferTexture=new Texture/* Texture */.g(s,e)}else this._backBufferTexture.resize(t,r);return this._backBufferTexture}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/BlendEffect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class BlendEffect_n{constructor(){this._blendTechnique=new BlendTechnique_f}dispose(e){this._blendTechnique?.shutdown()}draw(e,n,d,i,o){this._blendTechnique.render(e,{colorTexture:n,config:{opacity:o,samplingMode:d},blendMode:i})}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Effect_t{constructor(){this.name=this.constructor.name}createOptions(t,r){return null}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/FeatureEffect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FeatureEffect_r extends Effect_t{constructor(e){super(),this.name=this.constructor.name,this.defines=[e]}dispose(){}bind({context:e,painter:s}){this._prev=e.getBoundFramebufferObject();const r=s.getFbos().effect0;e.bindFramebuffer(r),e.setColorMask(!0,!0,!0,!0),e.setClearColor(0,0,0,0),e.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR)}unbind(){}draw(e,t){const{context:r,painter:o}=e,n=o.getPostProcessingEffects(t),c=r.getBoundFramebufferObject();for(const{postProcessingEffect:s,effect:f}of n)s.draw(e,c,f);r.bindFramebuffer(this._prev),r.setStencilTestEnabled(!1),o.blitTexture(r,c.colorTexture,views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST),r.setStencilTestEnabled(!0)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/parameters.js
var parameters = __webpack_require__(17746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/HighlightPrograms.js
var HighlightPrograms = __webpack_require__(23934);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js
var VertexElementDescriptor = __webpack_require__(69955);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HighlightRenderer_c{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.quadGeometry.dispose(),this._resources.quadVAO.dispose(),this._resources.highlightProgram.dispose(),this._resources.blurProgram.dispose(),this._resources=null)}preBlur(e,i){e.bindTexture(i,definitions/* textureBindingHighlight0 */.vd),e.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[1,0,1/this._width,0]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",parameters/* alphaToRgbaChannelSelectorMatrix */.HQ),e.bindVAO(this._resources.quadVAO),e.drawArrays(views_webgl_enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4),e.bindVAO()}finalBlur(e,s){e.bindTexture(s,definitions/* textureBindingHighlight0 */.vd),e.useProgram(this._resources.blurProgram),this._resources.blurProgram.setUniform4fv("u_direction",[0,1,0,1/this._height]),this._resources.blurProgram.setUniformMatrix4fv("u_channelSelector",parameters/* rgbaToRgbaChannelSelectorMatrix */.XK),e.bindVAO(this._resources.quadVAO),e.drawArrays(views_webgl_enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4),e.bindVAO()}renderHighlight(e,s,i){e.bindTexture(s,definitions/* textureBindingHighlight0 */.vd),e.useProgram(this._resources.highlightProgram),i.applyHighlightOptions(e,this._resources.highlightProgram),e.bindVAO(this._resources.quadVAO),e.setBlendingEnabled(!0),e.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),e.drawArrays(views_webgl_enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4),e.bindVAO()}_initialize(s,i,h){this._width=i,this._height=h;const m=BufferObject/* BufferObject */.g.createVertex(s,views_webgl_enums/* Usage */._U.STATIC_DRAW,new Int8Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]).buffer),c=new VertexArrayObject/* VertexArrayObject */.Z(s,new Map([["a_position",0],["a_texcoord",1]]),new Map([["geometry",[new VertexElementDescriptor/* VertexElementDescriptor */._("a_position",2,views_webgl_enums/* DataType */.pe.BYTE,0,4),new VertexElementDescriptor/* VertexElementDescriptor */._("a_texcoord",2,views_webgl_enums/* DataType */.pe.UNSIGNED_BYTE,2,4)]]]),new Map([["geometry",m]])),f=(0,ProgramTemplate/* createProgram */.r)(s,HighlightPrograms/* highlight */.Z),b=(0,ProgramTemplate/* createProgram */.r)(s,HighlightPrograms/* blur */.G);s.useProgram(f),f.setUniform1i("u_texture",definitions/* textureBindingHighlight0 */.vd),f.setUniform1i("u_shade",definitions/* textureBindingHighlight1 */.CR),f.setUniform1f("u_sigma",parameters/* sigma */.aY),s.useProgram(b),b.setUniform1i("u_texture",definitions/* textureBindingHighlight0 */.vd),b.setUniform1f("u_sigma",parameters/* sigma */.aY),this._resources={quadGeometry:m,quadVAO:c,highlightProgram:f,blurProgram:b}}setup(r,e,s){this._resources?(this._width=e,this._height=s):this._initialize(r,e,s)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(17050);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/highlight/HighlightSurfaces.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function HighlightSurfaces_i(i,h,u){const l=new TextureDescriptor/* TextureDescriptor */.R(h,u);return l.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,new FramebufferObject/* FramebufferObject */.H(i,l,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(views_webgl_enums/* SizedStencilFormat */.Xo.STENCIL_INDEX8,h,u))}class HighlightSurfaces_h{constructor(){this._width=void 0,this._height=void 0,this._resources=null}dispose(){this._resources&&(this._resources.sharedBlur1Fbo.dispose(),this._resources.sharedBlur2Fbo.dispose(),this._resources=null)}_initialize(r,e,s){this._width=e,this._height=s;const t=HighlightSurfaces_i(r,e,s),o=HighlightSurfaces_i(r,e,s);this._resources={sharedBlur1Fbo:t,sharedBlur2Fbo:o}}setup(r,e,s){!this._resources||this._width===e&&this._height===s||this.dispose(),this._resources||this._initialize(r,e,s)}get sharedBlur1Tex(){return this._resources.sharedBlur1Fbo.colorTexture}get sharedBlur1Fbo(){return this._resources.sharedBlur1Fbo}get sharedBlur2Tex(){return this._resources.sharedBlur2Fbo.colorTexture}get sharedBlur2Fbo(){return this._resources.sharedBlur2Fbo}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const HighlightEffect_d=4,HighlightEffect_l=4/HighlightEffect_d;class HighlightEffect_o extends Effect_t{constructor(){super(...arguments),this.defines=["highlight"],this._hlRenderer=new HighlightRenderer_c,this._width=void 0,this._height=void 0,this._boundFBO=null,this._hlSurfaces=new HighlightSurfaces_h,this._adjustedWidth=void 0,this._adjustedHeight=void 0,this._blitRenderer=new _}dispose(){this._hlSurfaces?.dispose(),this._hlRenderer?.dispose(),this._boundFBO=null}bind(e){const{context:t,painter:s}=e,{width:r,height:h}=t.getViewport(),d=s.getFbos().effect0;this.setup(e,r,h),t.bindFramebuffer(d),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR)}unbind(){}setup({context:e},t,s){this._width=t,this._height=s;const r=t%HighlightEffect_d,i=s%HighlightEffect_d;t+=r<HighlightEffect_d/2?-r:HighlightEffect_d-r,s+=i<HighlightEffect_d/2?-i:HighlightEffect_d-i,this._adjustedWidth=t,this._adjustedHeight=s,this._boundFBO=e.getBoundFramebufferObject();const h=Math.round(t*HighlightEffect_l),o=Math.round(s*HighlightEffect_l);this._hlRenderer.setup(e,h,o),this._hlSurfaces.setup(e,h,o)}draw(e){const{context:t,passOptions:s}=e,r=s.activeGradient,d=t.getBoundFramebufferObject();t.setViewport(0,0,this._adjustedWidth*HighlightEffect_l,this._adjustedHeight*HighlightEffect_l),t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),t.setStencilTestEnabled(!1),t.setClearColor(0,0,0,0),t.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR),this._blitRenderer.render(t,d.colorTexture,views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,1),t.setStencilTestEnabled(!1),t.setBlendingEnabled(!1),t.setColorMask(!1,!1,!1,!0),t.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),t.setClearColor(0,0,0,0),t.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR),this._hlRenderer.preBlur(t,this._hlSurfaces.sharedBlur1Tex),t.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),t.setClearColor(0,0,0,0),t.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR),this._hlRenderer.finalBlur(t,this._hlSurfaces.sharedBlur2Tex),t.bindFramebuffer(this._boundFBO),t.setBlendingEnabled(!0),t.setColorMask(!0,!0,!0,!0),t.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(t,this._hlSurfaces.sharedBlur1Tex,r),this._boundFBO=null}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/HittestEffect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HittestEffect_a extends Effect_t{constructor(){super(...arguments),this.name=this.constructor.name,this.defines=["hittest"]}dispose(){null!=this._fbo&&this._fbo.dispose()}createOptions({pixelRatio:e},r){if(!r.length)return null;const n=r.shift(),l=n.x,c=n.y;this._outstanding=n;const a=(0,has/* default */.A)("esri-mobile");return{type:"hittest",distance:(a?definitions/* hittestToleranceMobile */.fy:definitions/* hittestToleranceDesktop */.V3)*e,smallSymbolDistance:(a?definitions/* hittestToleranceMobile */.fy:definitions/* hittestToleranceSmallSymbol */._M)*e,smallSymbolSizeThreshold:definitions/* hittestSmallSymbolThreshold */.ie,position:[l,c]}}bind(t){const{context:s,attributeView:i}=t;if(!i.size)return;const o=i.getBlock(definitions/* AttributeDataType */.dV.GPGPU);if(null==o)return;const r=o.getFBO(s);s.setViewport(0,0,i.size,i.size),s.bindFramebuffer(r),s.setColorMask(!0,!0,!0,!0),s.setClearColor(0,0,0,0),s.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR|views_webgl_enums/* FramebufferBit */.NV.DEPTH)}unbind(){}draw(t){if(null==this._outstanding)return;const e=this._outstanding;this._outstanding=null,this._resolve(t,e.resolvers)}async _resolve(t,s){const{context:i,attributeView:o}=t,r=o.getBlock(definitions/* AttributeDataType */.dV.GPGPU);if(null==r)return void s.forEach((t=>t.resolve([])));const n=r.getFBO(i),a=new Uint8Array(n.width*n.height*4);try{await n.readPixelsAsync(0,0,n.width,n.height,views_webgl_enums/* PixelFormat */.Ab.RGBA,views_webgl_enums/* PixelType */.ld.UNSIGNED_BYTE,a)}catch(u){return void s.forEach((t=>t.resolve([])))}const h=[];for(let e=0;e<a.length;e+=4){const t=e/4;a[e]&&h.push(t)}s.forEach((t=>t.resolve(h)))}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Bloom.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Bloom_a=5,Bloom_u=[1,0],Bloom_l=[0,1],m=[1,.8,.6,.4,.2],Bloom_=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];class Bloom_h{constructor(){this._intensityFBO=null,this._compositeFBO=null,this._mipsFBOs=new Array(Bloom_a),this._nMips=Bloom_a,this._kernelSizeArray=[3,5,7,9,11],this._size=[0,0],this._programDesc={luminosityHighPass:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/luminosityHighPass",attributes:new Map([["a_position",0]])},gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",fsPath:"post-processing/bloom/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){if(this._quad=(0,maybe/* disposeMaybe */.WD)(this._quad),this._intensityFBO=(0,maybe/* disposeMaybe */.WD)(this._intensityFBO),this._compositeFBO=(0,maybe/* disposeMaybe */.WD)(this._compositeFBO),this._mipsFBOs){for(let t=0;t<this._nMips;t++)this._mipsFBOs[t]&&(this._mipsFBOs[t].horizontal.dispose(),this._mipsFBOs[t].vertical.dispose());this._mipsFBOs=null}}draw(t,i,r){const{width:o,height:n}=i,{context:h,painter:p}=t,{materialManager:c}=p,d=h.gl,f=this._programDesc,{strength:b,radius:F,threshold:O}=r;this._quad||(this._quad=new VertexStream/* default */.A(h,[-1,-1,1,-1,-1,1,1,1])),this._createOrResizeResources(t,o,n),h.setStencilTestEnabled(!1),h.setBlendingEnabled(!0),h.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),h.setStencilWriteMask(0);const B=this._quad;B.bind(),h.bindFramebuffer(this._intensityFBO);const g=c.getProgram(f.luminosityHighPass);h.useProgram(g),h.bindTexture(i.colorTexture,0),g.setUniform1i("u_texture",0),g.setUniform3fv("u_defaultColor",[0,0,0]),g.setUniform1f("u_defaultOpacity",0),g.setUniform1f("u_luminosityThreshold",O),g.setUniform1f("u_smoothWidth",.01);const T=[Math.round(o/2),Math.round(n/2)];h.setViewport(0,0,T[0],T[1]),h.setClearColor(0,0,0,0),h.clear(d.COLOR_BUFFER_BIT),B.draw(),h.setBlendingEnabled(!1);let x=this._intensityFBO.colorTexture;for(let e=0;e<this._nMips;e++){const t=c.getProgram(f.gaussianBlur,[{name:"radius",value:this._kernelSizeArray[e]}]);h.useProgram(t),h.bindTexture(x,e+1),t.setUniform1i("u_colorTexture",e+1),t.setUniform2fv("u_texSize",T),t.setUniform2fv("u_direction",Bloom_u),h.setViewport(0,0,T[0],T[1]);const s=this._mipsFBOs[e];h.bindFramebuffer(s.horizontal),B.draw(),x=s.horizontal.colorTexture,h.bindFramebuffer(s.vertical),h.bindTexture(x,e+1),t.setUniform2fv("u_direction",Bloom_l),B.draw(),x=s.vertical.colorTexture,T[0]=Math.round(T[0]/2),T[1]=Math.round(T[1]/2)}h.setViewport(0,0,o,n);const w=c.getProgram(f.composite,[{name:"nummips",value:Bloom_a}]);h.bindFramebuffer(this._compositeFBO),h.useProgram(w),w.setUniform1f("u_bloomStrength",b),w.setUniform1f("u_bloomRadius",F),w.setUniform1fv("u_bloomFactors",m),w.setUniform3fv("u_bloomTintColors",Bloom_),h.bindTexture(this._mipsFBOs[0].vertical.colorTexture,1),w.setUniform1i("u_blurTexture1",1),h.bindTexture(this._mipsFBOs[1].vertical.colorTexture,2),w.setUniform1i("u_blurTexture2",2),h.bindTexture(this._mipsFBOs[2].vertical.colorTexture,3),w.setUniform1i("u_blurTexture3",3),h.bindTexture(this._mipsFBOs[3].vertical.colorTexture,4),w.setUniform1i("u_blurTexture4",4),h.bindTexture(this._mipsFBOs[4].vertical.colorTexture,5),w.setUniform1i("u_blurTexture5",5),B.draw(),h.bindFramebuffer(i),h.setBlendingEnabled(!0);const M=c.getProgram(f.blit);h.useProgram(M),h.bindTexture(this._compositeFBO.colorTexture,6),M.setUniform1i("u_texture",6),h.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE),B.draw(),B.unbind(),h.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),h.setStencilTestEnabled(!0)}_createOrResizeResources(t,e,s){const{context:a}=t;if(this._compositeFBO&&this._size[0]===e&&this._size[1]===s)return;this._size[0]=e,this._size[1]=s;const u=[Math.round(e/2),Math.round(s/2)];if(this._compositeFBO)this._compositeFBO.resize(e,s);else{const t=new TextureDescriptor/* TextureDescriptor */.R(e,s);t.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,t.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._compositeFBO=new FramebufferObject/* FramebufferObject */.H(a,t)}if(this._intensityFBO)this._intensityFBO.resize(u[0],u[1]);else{const t=new TextureDescriptor/* TextureDescriptor */.R(u[0],u[1]);t.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,t.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._intensityFBO=new FramebufferObject/* FramebufferObject */.H(a,t)}for(let l=0;l<this._nMips;l++){if(this._mipsFBOs[l])this._mipsFBOs[l].horizontal.resize(u[0],u[1]),this._mipsFBOs[l].vertical.resize(u[0],u[1]);else{const t=new TextureDescriptor/* TextureDescriptor */.R(u[0],u[1]);t.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,t.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._mipsFBOs[l]={horizontal:new FramebufferObject/* FramebufferObject */.H(a,t),vertical:new FramebufferObject/* FramebufferObject */.H(a,t)}}u[0]=Math.round(u[0]/2),u[1]=Math.round(u[1]/2)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Blur_n=[1,0],Blur_o=[0,1];class Blur_u{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},radialBlur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/radial-blur",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(t,s,r){const{context:i}=t,{type:a,radius:n}=r;if(0===n)return;this._createOrResizeResources(t),this._quad||(this._quad=new VertexStream/* default */.A(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),"blur"===a?this._gaussianBlur(t,s,n):this._radialBlur(t,s),o.unbind()}_gaussianBlur(e,s,r){const{context:i,state:a,painter:u,pixelRatio:l}=e,{size:d}=a,{materialManager:b}=u,c=this._programDesc,_=this._quad,p=[Math.round(l*d[0]),Math.round(l*d[1])],h=this._blurFBO,m=b.getProgram(c.gaussianBlur,[{name:"radius",value:Math.ceil(r)}]);i.useProgram(m),i.setBlendingEnabled(!1),i.bindFramebuffer(h),i.bindTexture(s.colorTexture,4),m.setUniform1i("u_colorTexture",4),m.setUniform2fv("u_texSize",p),m.setUniform2fv("u_direction",Blur_n),m.setUniform1f("u_sigma",r),_.draw(),i.bindFramebuffer(s),i.setStencilWriteMask(0),i.setStencilTestEnabled(!1),i.setDepthWriteEnabled(!1),i.setDepthTestEnabled(!1),i.bindTexture(h?.colorTexture,5),m.setUniform1i("u_colorTexture",5),m.setUniform2fv("u_direction",Blur_o),_.draw(),i.setBlendingEnabled(!0),i.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),i.setStencilTestEnabled(!0)}_radialBlur(e,s){const{context:r,painter:i}=e,{materialManager:a}=i,n=this._programDesc,o=this._quad,u=this._blurFBO;r.bindFramebuffer(u);const l=a.getProgram(n.radialBlur);r.useProgram(l),r.setBlendingEnabled(!1),r.bindTexture(s.colorTexture,4),l.setUniform1i("u_colorTexture",4),o.draw(),r.bindFramebuffer(s),r.setStencilWriteMask(0),r.setStencilTestEnabled(!1),r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setBlendingEnabled(!0);const d=a.getProgram(n.blit);r.useProgram(d),r.bindTexture(u?.colorTexture,5),d.setUniform1i("u_texture",5),r.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),o.draw()}_createOrResizeResources(e){const{context:t,state:n,pixelRatio:o}=e,{size:u}=n,l=Math.round(o*u[0]),d=Math.round(o*u[1]);if(!this._blurFBO||this._size[0]!==l||this._size[1]!==d)if(this._size[0]=l,this._size[1]=d,this._blurFBO)this._blurFBO.resize(l,d);else{const e=new TextureDescriptor/* TextureDescriptor */.R(l,d);e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._blurFBO=new FramebufferObject/* FramebufferObject */.H(t,e)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Colorize.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Colorize_n{constructor(){this._layerFBOTexture=null,this._size=[0,0],this._programDesc={vsPath:"post-processing/pp",fsPath:"post-processing/filterEffect",attributes:new Map([["a_position",0]])}}dispose(){this._layerFBOTexture=(0,maybe/* disposeMaybe */.WD)(this._layerFBOTexture)}draw(e,t,s){const{width:i,height:o}=t;this._createOrResizeResources(e,i,o);const{context:a,painter:n}=e,{materialManager:c}=n,l=this._programDesc,u=this._quad,_=s.colorMatrix;u.bind();const h=this._layerFBOTexture;a.bindFramebuffer(t),t.copyToTexture(0,0,i,o,0,0,h),a.setBlendingEnabled(!1),a.setStencilTestEnabled(!1);const m=c.getProgram(l);a.useProgram(m),a.bindTexture(h,2),m.setUniformMatrix4fv("u_coefficients",_),m.setUniform1i("u_colorTexture",2),u.draw(),a.setBlendingEnabled(!0),a.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),a.setStencilTestEnabled(!0),u.unbind()}_createOrResizeResources(e,r,n){const{context:c}=e;if(!this._layerFBOTexture||this._size[0]!==r||this._size[1]!==n){if(this._size[0]=r,this._size[1]=n,this._layerFBOTexture)this._layerFBOTexture.resize(r,n);else{const e=new TextureDescriptor/* TextureDescriptor */.R;e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.width=r,e.height=n,this._layerFBOTexture=new Texture/* Texture */.g(c,e)}this._quad||(this._quad=new VertexStream/* default */.A(c,[-1,-1,1,-1,-1,1,1,1]))}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/DropShadow.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DropShadow_u=[1,0],DropShadow_h=[0,1];class DropShadow_{constructor(){this._layerFBOTexture=null,this._horizontalBlurFBO=null,this._verticalBlurFBO=null,this._size=[0,0],this._quad=null,this._programDesc={blur:{vsPath:"post-processing/pp",fsPath:"post-processing/blur/gaussianBlur",attributes:new Map([["a_position",0]])},composite:{vsPath:"post-processing/pp",fsPath:"post-processing/drop-shadow/composite",attributes:new Map([["a_position",0]])},blit:{vsPath:"post-processing/pp",fsPath:"post-processing/blit",attributes:new Map([["a_position",0]])}}}dispose(){this._layerFBOTexture=(0,maybe/* disposeMaybe */.WD)(this._layerFBOTexture),this._horizontalBlurFBO=(0,maybe/* disposeMaybe */.WD)(this._horizontalBlurFBO),this._verticalBlurFBO=(0,maybe/* disposeMaybe */.WD)(this._verticalBlurFBO)}draw(e,i,o){const{context:a,state:n,painter:l}=e,{materialManager:_}=l,c=this._programDesc,p=i.width,m=i.height,f=[Math.round(p),Math.round(m)],{blurRadius:B,offsetX:d,offsetY:b,color:O}=o,F=[(0,screenUtils/* pt2px */.Lz)(d),(0,screenUtils/* pt2px */.Lz)(b)];this._createOrResizeResources(e,p,m,f);const w=this._horizontalBlurFBO,T=this._verticalBlurFBO;a.setStencilWriteMask(0),a.setStencilTestEnabled(!1),a.setDepthWriteEnabled(!1),a.setDepthTestEnabled(!1);const x=this._layerFBOTexture;i.copyToTexture(0,0,p,m,0,0,x),this._quad||(this._quad=new VertexStream/* default */.A(a,[-1,-1,1,-1,-1,1,1,1])),a.setViewport(0,0,f[0],f[1]);const g=this._quad;g.bind(),a.setBlendingEnabled(!1);const z=_.getProgram(c.blur,[{name:"radius",value:Math.ceil(B)}]);a.useProgram(z),a.bindFramebuffer(w),a.bindTexture(i.colorTexture,4),z.setUniform1i("u_colorTexture",4),z.setUniform2fv("u_texSize",f),z.setUniform2fv("u_direction",DropShadow_u),z.setUniform1f("u_sigma",B),g.draw(),a.bindFramebuffer(T),a.bindTexture(w?.colorTexture,5),z.setUniform1i("u_colorTexture",5),z.setUniform2fv("u_direction",DropShadow_h),g.draw(),a.bindFramebuffer(i),a.setViewport(0,0,p,m);const M=_.getProgram(c.composite);a.useProgram(M),a.bindTexture(T?.colorTexture,2),M.setUniform1i("u_blurTexture",2),a.bindTexture(x,3),M.setUniform1i("u_layerFBOTexture",3),M.setUniform4fv("u_shadowColor",[O[3]*(O[0]/255),O[3]*(O[1]/255),O[3]*(O[2]/255),O[3]]),M.setUniformMatrix3fv("u_displayViewMat3",n.displayMat3),M.setUniform2fv("u_shadowOffset",F),g.draw(),a.setBlendingEnabled(!0),a.setStencilTestEnabled(!0),a.setBlendFunction(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),g.unbind()}_createOrResizeResources(e,t,r,s){const{context:u}=e;if(!this._horizontalBlurFBO||this._size[0]!==t||this._size[1]!==r){if(this._size[0]=t,this._size[1]=r,this._horizontalBlurFBO)this._horizontalBlurFBO.resize(s[0],s[1]);else{const e=new TextureDescriptor/* TextureDescriptor */.R(s[0],s[1]);e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._horizontalBlurFBO=new FramebufferObject/* FramebufferObject */.H(u,e)}if(this._verticalBlurFBO)this._verticalBlurFBO.resize(s[0],s[1]);else{const e=new TextureDescriptor/* TextureDescriptor */.R(s[0],s[1]);e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._verticalBlurFBO=new FramebufferObject/* FramebufferObject */.H(u,e)}if(this._layerFBOTexture)this._layerFBOTexture.resize(t,r);else{const e=new TextureDescriptor/* TextureDescriptor */.R;e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.width=t,e.height=r,this._layerFBOTexture=new Texture/* Texture */.g(u,e)}}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Opacity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Opacity_l{constructor(){this._size=[0,0],this._layerFBOTexture=null}dispose(){this._layerFBOTexture=(0,maybe/* disposeMaybe */.WD)(this._layerFBOTexture)}draw(e,r,s){const{width:i,height:o}=r;this._createOrResizeResources(e,i,o);const{context:l,painter:a}=e,{amount:n}=s,h=l.gl,u=this._layerFBOTexture;l.bindFramebuffer(r),r.copyToTexture(0,0,i,o,0,0,u),l.setBlendingEnabled(!0),l.setStencilTestEnabled(!1),l.setDepthTestEnabled(!1),l.setClearColor(0,0,0,0),l.clear(h.COLOR_BUFFER_BIT),a.blitTexture(l,u,views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,n)}_createOrResizeResources(e,l,a){const{context:n}=e;if(!this._layerFBOTexture||this._size[0]!==l||this._size[1]!==a)if(this._size[0]=l,this._size[1]=a,this._layerFBOTexture)this._layerFBOTexture.resize(l,a);else{const e=new TextureDescriptor/* TextureDescriptor */.R;e.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,e.width=l,e.height=a,this._layerFBOTexture=new Texture/* Texture */.g(n,e)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/EffectManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function EffectManager_c(o){switch(o){case"bloom":case"blur":case"opacity":case"drop-shadow":return o;default:return"colorize"}}const EffectManager_f={colorize:()=>new Colorize_n,blur:()=>new Blur_u,bloom:()=>new Bloom_h,opacity:()=>new Opacity_l,"drop-shadow":()=>new DropShadow_};class EffectManager_i{constructor(){this._effectMap=new Map}dispose(){this._effectMap.forEach((o=>o.dispose())),this._effectMap.clear()}getPostProcessingEffects(o){if(!o||0===o.length)return[];const e=[];for(const t of o){const o=EffectManager_c(t.type);let s=this._effectMap.get(o);s||(s=EffectManager_f[o](),this._effectMap.set(o,s)),e.push({postProcessingEffect:s,effect:t})}return e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/meshing/SimpleMesh.js
var SimpleMesh = __webpack_require__(2019);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/painter/RenderPass.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RenderPass_t{constructor(e,t){this.brushes=e,this.name=t.name,this.drawPhase=t.drawPhase||webgl_enums/* WGLDrawPhase */.S5.MAP,this._targetFn=t.target,this.effects=t.effects||[],this.enableDefaultDraw=t.enableDefaultDraw??(()=>!0),this.forceDrawByDisplayOrder=!!t.forceDrawByDisplayOrder}render(e){const{context:r,profiler:t}=e,s=this._targetFn(),a=this.drawPhase&e.drawPhase;if(t.recordPassStart(this.name),a){this.enableDefaultDraw()&&this._doRender(e,s),t.recordPassEnd();for(const t of this.effects){if(!t.enable())continue;const a=t.apply,n=t.args?.(),i=r.getViewport(),o=r.getBoundFramebufferObject(),d=e.passOptions;this._bindEffect(e,a,n),this._doRender(e,s,a.defines),this._drawAndUnbindEffect(e,a,i,o,d,n)}}}_doRender(e,r,t){if(null==r)return;const{profiler:s,context:a}=e;for(const n of this.brushes){if(s.recordBrushStart(n.name),null!=n.brushEffect){const s=a.getViewport(),i=a.getBoundFramebufferObject(),o=e.passOptions;this._bindEffect(e,n.brushEffect),this._drawWithBrush(n,e,r,t),this._drawAndUnbindEffect(e,n.brushEffect,s,i,o)}else this._drawWithBrush(n,e,r,t);s.recordBrushEnd()}}_drawWithBrush(r,t,s,a){(0,arrayUtils/* isArrayLike */.Xj)(s)?(r.prepareState(t,a),r.drawMany(t,s,a)):s.visible&&(r.prepareState(t,a),r.draw(t,s,a))}_bindEffect(e,r,t){const{profiler:s}=e;s.recordPassStart(this.name+"."+r.name),r.bind(e,t);const a=r.createOptions(e,t);e.passOptions=a}_drawAndUnbindEffect(e,r,t,s,a,n){const{profiler:i,context:o}=e;e.passOptions=a,i.recordBrushStart(r.name),r.draw(e,n),r.unbind(e,n),o.bindFramebuffer(s);const{x:d,y:f,width:h,height:c}=t;o.setViewport(d,f,h,c),i.recordBrushEnd(),i.recordPassEnd()}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueProgramCache.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TechniqueProgramCache_r{constructor(){this._programCache=new Map}destroy(){for(const r of this._programCache.values())r.destroy();this._programCache.clear()}getProgram(r,e,t,a,o){const s=r.getShaderKey(e,t,a,o);let c=this._programCache.get(s);return c||(c=r.getProgram(e,t,a,o),this._programCache.set(s,c)),c}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/Painter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Painter_F{constructor(e,t){this.context=e,this._currentPipelineStateNeedsUpdate=!1,this._blitRenderer=new _,this._worldExtentRenderer=new WorldExtentClipRenderer_x,this._brushCache=new Map,this._lastWidth=null,this._lastHeight=null,this._vtlMaterialManager=new VTLMaterialManager_p,this._blendEffect=new BlendEffect_n,this._stencilBuf=null,this._prevBeforeLayerFBOStack=[],this._fboPool=[],this.effects={highlight:new HighlightEffect_o,hittest:new HittestEffect_a,insideEffect:new FeatureEffect_r("inside"),outsideEffect:new FeatureEffect_r("outside")},this._programCache=new TechniqueProgramCache_r,this._shaderState={shader:null,uniforms:null,defines:null,optionalAttributes:null,useComputeBuffer:!1},this.materialManager=new MaterialManager_e(e),this.textureManager=new G(t),this.textureUploadManager=new TextureUploadManager_u(t),this._effectsManager=new EffectManager_i,this._quadMesh=SimpleMesh/* SimpleMesh */.g.fromVertexStream(e,[0,0,1,0,0,1,1,1])}dispose(){if(this._programCache.destroy(),this.materialManager.dispose(),this.textureManager.dispose(),this.textureUploadManager.destroy(),this._blitRenderer=(0,maybe/* disposeMaybe */.WD)(this._blitRenderer),this._worldExtentRenderer=(0,maybe/* disposeMaybe */.WD)(this._worldExtentRenderer),this._quadMesh=(0,maybe/* destroyMaybe */.pR)(this._quadMesh),this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache.clear(),this._brushCache=null),this._fbos){let e;for(e in this._fbos)this._fbos[e]&&this._fbos[e].dispose()}for(const e of this._fboPool)e.dispose();if(this._fboPool.length=0,this.effects){let e;for(e in this.effects)this.effects[e]&&this.effects[e].dispose()}this._effectsManager.dispose(),this._blendEffect.dispose(this.context),this._vtlMaterialManager=(0,maybe/* disposeMaybe */.WD)(this._vtlMaterialManager)}clearShaderCache(){this._programCache.destroy(),this._programCache=new TechniqueProgramCache_r}get blitRenderer(){return this._blitRenderer}get vectorTilesMaterialManager(){return this._vtlMaterialManager}get quadMesh(){return this._quadMesh}getFbos(){if(!this._fbos)throw new Error("InternalError: Painter FBOs not initialized");return this._fbos}acquireFbo(e,t){let s;if(this._fboPool.length>0)s=this._fboPool.pop();else{const r=new TextureDescriptor/* TextureDescriptor */.R(e,t);r.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,r.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,s=new FramebufferObject/* FramebufferObject */.H(this.context,r,this._stencilBuf)}return s.width===e&&s.height===t||s.resize(e,t),s}releaseFbo(e){this._fboPool.push(e)}getSharedStencilBuffer(){return this._stencilBuf}beforeRenderPhases(e,t,s){const{context:r}=e;this._worldExtentRenderer.render(e,t,s);const{width:i,height:n}=r.getViewport();if(this.updateFBOs(i,n),this._prevFBO=r.getBoundFramebufferObject(),r.bindFramebuffer(this.getFbos().output),r.setColorMask(!0,!0,!0,!0),null!=t){const{r:e,g:s,b:i,a:n}=t;r.setClearColor(n*e/255,n*s/255,n*i/255,n)}else r.setClearColor(0,0,0,0);r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR|views_webgl_enums/* FramebufferBit */.NV.DEPTH),r.setDepthWriteEnabled(!1)}afterRenderPhases(e){const{context:t}=e;t.bindFramebuffer(this._prevFBO),t.setStencilFunction(views_webgl_enums/* CompareFunction */.MT.EQUAL,definitions/* backbufferStencilVisible */.Qs,255),t.setStencilTestEnabled(!0),t.setDepthTestEnabled(!1),this.blitTexture(t,this.getFbos().output.colorTexture,views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST)}beforeRenderLayer(e,t,s){const{context:r,blendMode:i,effects:n,drawPhase:a,requireFBO:o}=e;if(r.setClearColor(0,0,0,0),o||Painter_x(a,i,n,s)){const e=r.getBoundFramebufferObject();this._prevBeforeLayerFBOStack.push(e);const{width:t,height:s}=r.getViewport(),i=this.acquireFbo(t,s);r.bindFramebuffer(i),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setDepthWriteEnabled(!0),r.setClearDepth(1),r.clear(views_webgl_enums/* FramebufferBit */.NV.COLOR|views_webgl_enums/* FramebufferBit */.NV.DEPTH),r.setDepthWriteEnabled(!1)}r.setDepthWriteEnabled(!1),r.setDepthTestEnabled(!1),r.setStencilTestEnabled(!0),r.setClearStencil(t),r.setStencilWriteMask(255),r.clear(views_webgl_enums/* FramebufferBit */.NV.STENCIL)}afterRenderLayer(e,t){const{context:s,blendMode:r,effects:i,requireFBO:n,drawPhase:o}=e;if(n||Painter_x(o,r,i,t)){const n=s.getBoundFramebufferObject();null!=i&&i.length>0&&o===webgl_enums/* WGLDrawPhase */.S5.MAP&&(s.setColorMask(!0,!0,!0,!0),this._applyEffects(e,i,n)),s.bindFramebuffer(this._prevBeforeLayerFBOStack.pop()),s.setStencilTestEnabled(!1),s.setStencilWriteMask(0),s.setBlendingEnabled(!0),s.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),s.setColorMask(!0,!0,!0,!0);const l=null==r||o===webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT||o===webgl_enums/* WGLDrawPhase */.S5.LABEL?"normal":r;this._blendEffect.draw(e,n.colorTexture,views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,l,t),this.releaseFbo(n)}}renderObject(e,t,r,i){const n=brushes/* brushes */.d[r];if(!n)return;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.prepareState(e),a.draw(e,t,i)}renderObjects(e,t,r,i){const n=brushes/* brushes */.d[r];if(!n)return;let a=this._brushCache.get(n);void 0===a&&(a=new n,this._brushCache.set(n,a)),a.drawMany(e,t,i)}registerRenderPass(e){const t=e.brushes.map((e=>(this._brushCache.has(e)||this._brushCache.set(e,new e),this._brushCache.get(e))));return new RenderPass_t(t,e)}blitTexture(e,t,s,r=1){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),this._blitRenderer.render(e,t,s,r),this._currentPipelineStateNeedsUpdate=!0}getPostProcessingEffects(e){return this._effectsManager.getPostProcessingEffects(e)}updateFBOs(e,t){if(e!==this._lastWidth||t!==this._lastHeight){if(this._lastWidth=e,this._lastHeight=t,this._fbos){let s;for(s in this._fbos)this._fbos[s].resize(e,t);return}const s=new TextureDescriptor/* TextureDescriptor */.R(e,t);s.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,s.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const r=new RenderbufferDescriptor/* RenderbufferDescriptor */.q(views_webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,e,t);this._stencilBuf=new Renderbuffer/* Renderbuffer */.l(this.context,r),this._fbos={output:new FramebufferObject/* FramebufferObject */.H(this.context,s,this._stencilBuf),effect0:new FramebufferObject/* FramebufferObject */.H(this.context,s,this._stencilBuf)}}}_applyEffects(e,t,s){const{context:r}=e,i=this._effectsManager.getPostProcessingEffects(t);for(const{postProcessingEffect:n,effect:a}of i)r.bindFramebuffer(s),n.draw(e,s,a);this._currentPipelineStateNeedsUpdate=!0}setShader(e){this._shaderState.shader=e.shader,this._shaderState.uniforms=e.uniforms,this._shaderState.defines=e.defines,this._shaderState.optionalAttributes=e.optionalAttributes,this._shaderState.useComputeBuffer=e.useComputeBuffer??!1}setPipelineState(e){e!==this._currentPipelineState&&(this._currentPipelineState=e,this._currentPipelineStateNeedsUpdate=!0)}submitDraw(e,t){const{shader:s,uniforms:r,defines:i,optionalAttributes:n}=this._shaderState,a=e.context,o=t.getAttributePrecisionPackFactors(),l=this._programCache.getProgram(s,o,r,i??{},n??{});return l.setUniforms(r),l.bind(a),this.updatePipelineState(a),this.setStencilRef(a,t),t.draw(e,s.locationInfo),l.cleanupTemporaryTextures(),{vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}submitDrawMesh(e,t,s,r){this.submitDrawMeshUntyped(e,t,s,r)}submitDrawMeshUntyped(e,t,s,r){this.setShader(t);const{shader:i,uniforms:n,defines:a,optionalAttributes:o}=this._shaderState,l=this._programCache.getProgram(i,{},n,a??{},o??{});if(l.setUniforms(n),l.bind(e),this.updatePipelineState(e),r)for(const h of r)s.bind(e,t.shader.locationInfo,h),s.draw(e);else for(let h=0;h<s.parts.length;h++)s.bind(e,t.shader.locationInfo,h),s.draw(e);s.unbind(e),l.cleanupTemporaryTextures()}updatePipelineState(e){this._currentPipelineStateNeedsUpdate&&(this._currentPipelineStateNeedsUpdate=!1,this._updatePipelineState(e))}_updatePipelineState(e){if(null==this._currentPipelineState)throw new Error("Pipeline state not defined. Call setPipelineState before calling submitDraw ");const{color:t,depth:s,stencil:r}=this._currentPipelineState;if(t){const{blendMode:s,write:r}=t;switch(e.setColorMask(...r),e.setBlendingEnabled(!0),e.setBlendEquation(views_webgl_enums/* BlendOperation */.Tb.ADD),s){case"composite":e.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA);break;case"additive":e.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE);break;case"custom":{const{blendParameters:s}=t,{dstAlpha:r,dstRGB:i,srcAlpha:n,srcRGB:a}=s;e.setBlendFunctionSeparate(a,i,n,r);break}case"delete":e.setBlendEquation(views_webgl_enums/* BlendOperation */.Tb.REVERSE_SUBTRACT),e.setBlendFunctionSeparate(views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,views_webgl_enums/* BlendFactor */.dn.ONE,views_webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA)}}else e.setColorMask(!1,!1,!1,!1);if(s){const{test:t,write:r}=s;r?(e.setDepthWriteEnabled(!0),e.setDepthRange(r.zNear,r.zFar)):e.setDepthWriteEnabled(!1),t?(e.setDepthTestEnabled(!0),e.setDepthFunction(t)):e.setDepthTestEnabled(!1)}else e.setDepthTestEnabled(!1),e.setDepthWriteEnabled(!1);if(r){const{test:t,write:s}=r;if(t){const{compare:s,mask:r,op:i,ref:n}=t;e.setStencilTestEnabled(!0),"function"!=typeof n&&e.setStencilFunctionSeparate(views_webgl_enums/* Face */.Y7.FRONT_AND_BACK,s,n,r),e.setStencilOpSeparate(views_webgl_enums/* Face */.Y7.FRONT_AND_BACK,i.fail,i.zFail,i.zPass)}else e.setStencilTestEnabled(!1);if(s){const{mask:t}=s;e.setStencilWriteMask(t)}else e.setStencilWriteMask(0)}else e.setStencilTestEnabled(!1),e.setStencilWriteMask(0)}setStencilRef(e,t){if(null==this._currentPipelineState)throw new Error("Pipeline state not defined. Call setPipelineState before calling submitDraw ");const{stencil:s}=this._currentPipelineState;if(s){const{test:r}=s;if(r){const{compare:s,mask:i,ref:n}=r;let a=null;if("function"==typeof n?a=n(t):"number"==typeof n&&(a=n),null==a&&(a=t.getStencilReference()),null==a)throw new Error("InternalError: Stencil reference expected for target but not defined");e.setStencilFunctionSeparate(views_webgl_enums/* Face */.Y7.FRONT_AND_BACK,s,a,i)}}}}function Painter_x(e,t,s,r){return e!==webgl_enums/* WGLDrawPhase */.S5.LABEL_ALPHA&&e!==webgl_enums/* WGLDrawPhase */.S5.LABEL&&e!==webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT&&(1!==r||null!=t&&"normal"!==t||null!=s&&s.length>0)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/PooledUint32Array.js
var PooledUint32Array = __webpack_require__(49357);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js
var Profiler = __webpack_require__(14125);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TileReshuffleManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TileReshuffleManager_s{constructor(){this._candidateTiles=[]}schedule(s){this._candidateTiles.includes(s)||this._candidateTiles.push(s)}reshuffle(s){const e=[];for(const i of this._candidateTiles)s>0?(i.reshuffle(),s--):e.push(i);this._candidateTiles=e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js + 65 modules
var TechniqueRegistry = __webpack_require__(84022);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/MeshWriterRegistry.js + 5 modules
var MeshWriterRegistry = __webpack_require__(45357);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/support/Timeline.js
var Timeline = __webpack_require__(36998);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderingContext.js + 11 modules
var RenderingContext = __webpack_require__(86493);
;// ../node_modules/@arcgis/core/views/2d/engine/Stage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Stage_T=2e3;class Stage_v extends Container/* Container */.m{constructor(t,i,n){super(),this.meshWriterRegistry=new MeshWriterRegistry/* MeshWriterRegistry */.o,this._trash=new Set,this._renderRemainingTime=0,this._lastFrameRenderTime=0,this._renderRequested=(0,signal/* signal */.v)(!1),this.stage=this,this._stationary=!0,this._reshuffleManager=new TileReshuffleManager_s,this._managedCanvas=n,this.context=new RenderingContext/* RenderingContext */.e(this._managedCanvas.gl,i.contextOptions??{}),this.painter=new Painter_F(this.context,this),this._cimAnalyzer=new Q(this.painter.textureManager.resourceManager),(0,has/* default */.A)("esri-2d-profiler")&&null!=t&&(this._debugOutput=document.createElement("div"),this._debugOutput.setAttribute("style","margin: 24px 64px; position: absolute; color: red;"),t.appendChild(this._debugOutput));const o=()=>this.highlightGradient;this._renderParameters={drawPhase:0,state:this.state,pixelRatio:window.devicePixelRatio,stationary:!1,globalOpacity:1,blendMode:null,deltaTime:-1,time:0,inFadeTransition:!1,effects:null,context:this.context,painter:this.painter,timeline:i.timeline||new Timeline/* Timeline */.K,renderingOptions:i.renderingOptions,requestRender:()=>this.requestRender(),allowDelayedRender:!1,requireFBO:!1,profiler:new Profiler/* Profiler */.U(this.context,this._debugOutput),dataUploadCounter:0,get highlightGradient(){return o()},reshuffleManager:this._reshuffleManager,backgroundColor:i.backgroundColor};let h=e=>this.renderFrame(e);null!=i.renderFrame&&(h=i.renderFrame),this._taskHandle=(0,scheduling/* addFrameTask */.mg)({render:e=>h(e)}),this._taskHandle.pause(),this._lostWebGLContextHandle=this._managedCanvas.events.on("webgl-context-lost",(t=>this.emit("webgl-error",{error:new core_Error/* default */.A("webgl-context-lost",t.statusMessage)}))),this._bufferPool=new PooledUint32Array/* ArrayBufferPool */.o,(0,TechniqueRegistry/* startup */.Wn)()}destroy(){(0,TechniqueRegistry/* shutdown */.n_)(this.context),this.removeAllChildren(),this._emptyTrash(),this._taskHandle=(0,maybe/* removeMaybe */.xt)(this._taskHandle),this._lostWebGLContextHandle=(0,maybe/* removeMaybe */.xt)(this._lostWebGLContextHandle),this._managedCanvas.destroy(),this._debugOutput?.parentNode?.removeChild(this._debugOutput),this._bufferPool.destroy(),this.painter.dispose(),this.context.dispose(),this._managedCanvas=null}get textureManager(){return this.painter.textureManager}get backgroundColor(){return this._renderParameters.backgroundColor}set backgroundColor(e){this._renderParameters.backgroundColor=e,this.requestRender()}get canvas(){return this._managedCanvas.canvas}get bufferPool(){return this._bufferPool}get cimAnalyzer(){return this._cimAnalyzer}get renderingOptions(){return this._renderingOptions}set renderingOptions(e){this._renderingOptions=e,this.requestRender()}get renderRequested(){return this._renderRequested.value}get state(){return this._state}set state(e){this._state=e,this.requestRender()}get stationary(){return this._stationary}set stationary(e){this._stationary!==e&&(this._stationary=e,this.requestRender())}trashDisplayObject(e){this._trash.add(e),this.requestRender()}untrashDisplayObject(e){return this._trash.delete(e)}requestRender(){this._renderRemainingTime=Stage_T,this.renderRequested||(this._renderRequested.value=!0,this._taskHandle.resume())}renderFrame(e){const t=this._lastFrameRenderTime?e.time-this._lastFrameRenderTime:0;this._renderRemainingTime-=t,this._renderRemainingTime<=0&&this._taskHandle.pause(),this._lastFrameRenderTime=e.time,this._renderRequested.value=!1,this._renderParameters.state=this._state,this._renderParameters.stationary=this.stationary,this._renderParameters.pixelRatio=window.devicePixelRatio,this._renderParameters.globalOpacity=1,this._renderParameters.time=e.time,this._renderParameters.deltaTime=e.deltaTime,this._renderParameters.effects=null,this.processRender(this._renderParameters),this._emptyTrash()}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}renderChildren(e){for(const t of this.children)t.beforeRender(e);this._reshuffleManager.reshuffle(definitions/* MAX_TILE_RESHUFFLES_PER_FRAME */.O5),this._managedCanvas.render(e,(()=>this._renderChildren(this.children,e)));for(const t of this.children)t.afterRender(e)}_renderChildren(e,t){const r=this.context;this.painter.textureUploadManager.upload(),r.resetInfo(),t.profiler.recordStart("drawLayers"),t.dataUploadCounter=0,this.painter.beforeRenderPhases(t,t.backgroundColor,this.state.padding),t.drawPhase=webgl_enums/* WGLDrawPhase */.S5.MAP;for(const s of e)s.processRender(t);if(this.children.some((e=>e.hasHighlight))){t.drawPhase=webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT;for(const r of e)r.processRender(t)}if(this.children.some((e=>e.hasLabels))){t.drawPhase=webgl_enums/* WGLDrawPhase */.S5.LABEL;for(const r of e)r.processRender(t)}if((0,has/* default */.A)("esri-tiles-debug")){t.drawPhase=webgl_enums/* WGLDrawPhase */.S5.DEBUG;for(const r of e)r.processRender(t)}this.painter.afterRenderPhases(t),t.profiler.recordEnd("drawLayers"),r.logInfo()}doRender(e){const t=this.context,{state:r,pixelRatio:s}=e;this._managedCanvas.resize(e),t.setViewport(0,0,s*r.size[0],s*r.size[1]),t.setDepthWriteEnabled(!0),t.setStencilWriteMask(255),this.renderChildren(e)}async takeScreenshot(e,t,r,s){const i=Math.round(this.state.size[0]*e.resolutionScale),a=Math.round(this.state.size[1]*e.resolutionScale),n=e.resolutionScale,o=this.context,h=this._state.clone();if(null!=s){const e=h.viewpoint;h.viewpoint.rotation=s,h.viewpoint=e}const d={...this._renderParameters,drawPhase:null,globalOpacity:1,stationary:!0,state:h,pixelRatio:n,time:performance.now(),deltaTime:0,blendMode:null,effects:null,inFadeTransition:!1,backgroundColor:r},l=new TextureDescriptor/* TextureDescriptor */.R(i,a);l.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,l.internalFormat=views_webgl_enums/* SizedPixelFormat */.H0.RGBA8,l.isImmutable=!0;const m=new FramebufferObject/* FramebufferObject */.H(o,l,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(views_webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,i,a)),u=o.getBoundFramebufferObject(),c=o.getViewport();o.bindFramebuffer(m),o.setViewport(0,0,i,a),this._renderChildren(t??this.children,d);const p=this._readbackScreenshot(m,{...e.cropArea,y:a-(e.cropArea.y+e.cropArea.height)});o.bindFramebuffer(u),o.setViewport(c.x,c.y,c.width,c.height),this.requestRender();const g=await p;let f;return 1===e.outputScale?f=g:(f=new ImageData(Math.round(g.width*e.outputScale),Math.round(g.height*e.outputScale)),(await Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 23391))).resampleHermite(g,f,!0)),m.dispose(),f}async _readbackScreenshot(e,t){const r=(await Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 23391))).createEmptyImageData(t.width,t.height,document.createElement("canvas"));return await e.readPixelsAsync(t.x,t.y,t.width,t.height,views_webgl_enums/* PixelFormat */.Ab.RGBA,views_webgl_enums/* PixelType */.ld.UNSIGNED_BYTE,new Uint8Array(r.data.buffer)),r}_emptyTrash(){for(;this._trash.size>0;){const e=Array.from(this._trash);this._trash.clear();for(const t of e)t.processDetach()}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/Color.js
var Color = __webpack_require__(96220);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/ManagedCanvas.js
var ManagedCanvas = __webpack_require__(21769);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f32.js
var vec4f32 = __webpack_require__(40275);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js
var Point = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/operators/projectOperator.js + 1 modules
var projectOperator = __webpack_require__(59034);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/meshing/Mesh.js
var Mesh = __webpack_require__(40317);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VideoScreenShader.js
var VideoScreenShader = __webpack_require__(58207);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/videoScreenRenderer/VideoScreenTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VideoScreenTechnique_h extends Technique/* Technique */.j{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.VideoScreen,this._mesh=null,this.shaders={geometry:new VideoScreenShader/* VideoScreenShader */.H}}render(e,t){const{context:s,painter:o}=e,{texture:n,textureCoords:i}=t,m=this._getMesh(e),c=t.ndcRect[2],h=t.ndcRect[3],u=t.ndcRect[0],a=t.ndcRect[1],p=new Float32Array(180);for(let r=0;r<6;r++){const e=h*r/5;for(let t=0;t<6;t++){const s=c*t/5,{u:o,v:n}=i[6*r+t];p[5*(6*r+t)]=u+s,p[5*(6*r+t)+1]=a-e,p[5*(6*r+t)+2]=o,p[5*(6*r+t)+3]=n,p[5*(6*r+t)+4]=1}}m.vertexBuffers.get("geometry")?.buffer.setData(p);const d={texture:{texture:n,unit:0},opacity:t.opacity},f={shader:this.shaders.geometry,uniforms:{config:d},defines:{},optionalAttributes:null,useComputeBuffer:!1};o.setPipelineState(shaderGraph_utils/* simplePipelineState */.i),o.submitDrawMeshUntyped(s,f,m)}shutdown(){(0,maybe/* destroyMaybe */.pR)(this._mesh)}_getMesh(e){const{context:r}=e,s=new Uint32Array(150);for(let t=0;t<5;t++)for(let e=0;e<5;e++){const r=6*(5*t+e),o=6*(t+1)+e+1,n=o-1,i=o-6,m=o-7;s[r]=o,s[r+1]=n,s[r+2]=i,s[r+3]=n,s[r+4]=m,s[r+5]=i}return this._mesh||(this._mesh=new Mesh/* Mesh */.e(r,{vertex:{geometry:{data:new Float32Array(180),attributes:[new VertexElementDescriptor/* VertexElementDescriptor */._("position",2,views_webgl_enums/* DataType */.pe.FLOAT,0,20),new VertexElementDescriptor/* VertexElementDescriptor */._("texcoord",2,views_webgl_enums/* DataType */.pe.FLOAT,8,20),new VertexElementDescriptor/* VertexElementDescriptor */._("w",1,views_webgl_enums/* DataType */.pe.FLOAT,16,20)]}},index:{index:{data:s}},groups:[{primitive:views_webgl_enums/* PrimitiveType */.WR.TRIANGLES,index:"index"}],parts:[{group:0,start:0,count:s.length}]})),this._mesh}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/VideoScreenRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VideoScreenRenderer_x extends DisplayObject/* DisplayObject */.q{constructor(e,t){super(),this._controlPointsOwner=t,this.readbackScreenCoords=(0,vec4f32/* create */.vt)(),this.videoTextureCoords=new Array(36),this.overlayTextureCoords=new Array(36),this._prevFBO=null,this._acquiredFBO=null,this._isBound=!1,this._hasCoordinates=!1,this._geIsLoaded=!1,this._ndcRect=[0,0,2,2],this._technique=new VideoScreenTechnique_h,this.visible=!1,this.stage=e;for(let r=0;r<6;r++){const e=r/5;for(let t=0;t<6;t++){const o=t/5;this.videoTextureCoords[6*r+t]={u:o,v:e}}}}getMesh(e){throw new Error("Method not implemented.")}destroy(){(0,maybe/* disposeMaybe */.WD)(this._readbackTexture)}bind(e){const{context:t,pixelRatio:r,state:o}=e;if(this._update(e),!this.ready||0===this.readbackScreenCoords[2]||0===this.readbackScreenCoords[3])return this.requestRender(),!1;const{size:s}=o,i=Math.round(r*s[0]),a=Math.round(r*s[1]),n=new TextureDescriptor/* TextureDescriptor */.R(i,a);return n.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.LINEAR,n.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._acquiredFBO||(this._acquiredFBO=new FramebufferObject/* FramebufferObject */.H(t,n)),this._acquiredFBO.resize(i,a),t.bindFramebuffer(this._acquiredFBO),this._isBound=!0,!0}unbind(e){if(!this._isBound)return;const{context:t,pixelRatio:r,state:o}=e,{size:s}=o,i=this._acquiredFBO;if(!i.getColorTexture(views_webgl_enums/* ColorAttachment0 */.r6))throw new Error("Failed to get color texture from FBO.");const a=this._getReadbackTexture(e),n=this.readbackScreenCoords,c=Math.round(r*n[0]),h=Math.round(r*(s[1]-n[1]))-a.descriptor.height,u=c+a.descriptor.width,l=h+a.descriptor.height,m=Math.max(c,0),_=Math.max(h,0),x=Math.min(u,i.width)-m,b=Math.min(l,i.height)-_;x>0&&b>0&&i.copyToTexture(m,_,x,b,m-c,_-h,a),t.bindFramebuffer(this._prevFBO)}_update(e){const{state:r}=e,a=this._controlPointsOwner,n=a.groundControlPoints(),c=a.getSize(),h=r.size,d=n?.length;if(!d)return;if((0,projectOperator.load)().then((()=>{this._geIsLoaded=!0})),!this._geIsLoaded)return void this.requestRender();const u=c[0],l=c[1],m=h[0],_=l/h[1],x=u/m;if(_>x){const e=x/_*2,t=(2-e)/2;this._ndcRect[0]=-1+t,this._ndcRect[1]=1,this._ndcRect[2]=e,this._ndcRect[3]=2}else{const e=_/x*2,t=(2-e)/2;this._ndcRect[0]=-1,this._ndcRect[1]=1-t,this._ndcRect[2]=2,this._ndcRect[3]=e}const b=new Array(d),f=r.spatialReference;for(let t=0;t<d;t++){const{lat:e,lon:r}=n[t],s=new Point/* default */.A(r,e);b[t]=(0,projectOperator.execute)(s,f)}const p=[];let M=1/0,g=1/0,C=-1/0,R=-1/0;for(const o of b){const e=(0,vec2f64/* create */.vt)();r.toScreen(e,o.x,o.y),p.push({x:e[0],y:e[1]}),M=Math.min(M,e[0]),g=Math.min(g,e[1]),C=Math.max(C,e[0]),R=Math.max(R,e[1])}const T=[M,R],w=[C,g];this.readbackScreenCoords[0]=Math.max(Math.floor(T[0]),0),this.readbackScreenCoords[1]=Math.max(Math.floor(w[1]),0),this.readbackScreenCoords[2]=Math.ceil(w[0]),this.readbackScreenCoords[3]=Math.ceil(T[1]);for(let t=0;t<p.length;t++){const e=p[t],r=(e.x-M)/(C-M),o=(R-e.y)/(R-g);this.overlayTextureCoords[t]={u:r,v:o}}this._hasCoordinates=!0}_createTransforms(){return null}doRender(e){this._readbackTexture&&this._hasCoordinates?this._technique.render(e,{texture:this._readbackTexture,textureCoords:this.overlayTextureCoords,opacity:1,ndcRect:this._ndcRect}):this.requestRender()}_getReadbackTexture(e){const{context:t,pixelRatio:r}=e,o=Math.round(r*Math.abs(this.readbackScreenCoords[2]-this.readbackScreenCoords[0])),s=Math.round(r*Math.abs(this.readbackScreenCoords[3]-this.readbackScreenCoords[1]));if(this._readbackTexture)this._readbackTexture.resize(o,s);else{const e=new TextureDescriptor/* TextureDescriptor */.R(o,s);e.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.internalFormat=views_webgl_enums/* SizedPixelFormat */.H0.RGBA8,this._readbackTexture=new Texture/* Texture */.g(t,e)}return this._readbackTexture}}

;// ../node_modules/@arcgis/core/views/2d/engine/ParentChildStage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ParentChildStage_n extends Stage_v{constructor(e,s,n){super(null,s={...s,renderFrame:e=>{}},new ManagedCanvas/* ManagedCanvas */.W(null,{canvas:e})),this._requestRender=n,this.viewIsReady=!1,this.videoScreenRenderer=new VideoScreenRenderer_x(this,s),this.videoScreenRenderer.visible=!0}requestRender(){this._requestRender()}processRender(r){this.videoScreenRenderer.bind(r),r.backgroundColor=Color/* default */.A.fromArray([0,0,0,0]),super.processRender(r),this.videoScreenRenderer.unbind(r)}}class ParentChildStage_i extends Stage_v{constructor(e,r,s){super(e,r={...r,renderFrame:e=>{this.render(e)}},s),this._childStage=new ParentChildStage_n(s.canvas,r,(()=>this.requestRender()))}get childStage(){return this._childStage}render(e){this._childStage.viewIsReady?(this._childStage.context.enforceState(),this._childStage.renderFrame(e)):this.requestRender(),this.context.enforceState(),super.renderFrame(e)}processRender(e){super.processRender(e),this._childStage.viewIsReady&&this._childStage.visible&&this._childStage.videoScreenRenderer.processRender(e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/LabelManager.js
var LabelManager = __webpack_require__(64208);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js + 13 modules
var GraphicsView2D = __webpack_require__(90598);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js
var GraphicContainer = __webpack_require__(13737);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js + 10 modules
var MapViewNavigation = __webpack_require__(92595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Handles.js
var Handles = __webpack_require__(1436);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/urlUtils.js
var core_urlUtils = __webpack_require__(20909);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/MagnifierShader.js
var MagnifierShader = __webpack_require__(94196);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/magnifier/MagnifierTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MagnifierTechnique_p extends Technique/* Technique */.j{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Magnifier,this._resourcePixelRatio=1,this._position=[0,0,0,0],this.shaders={magnifier:new MagnifierShader/* MagnifierShader */.u}}updateResources(t,i,r,s){t.pixelRatio!==this._resourcePixelRatio&&this._destroyResources(),this._readbackTexture||this._initializeResources(t,i,r,s);const{context:o,pixelRatio:a}=t,{factor:n,offset:u,position:h}=s,{size:l}=t.state,c=s.size*a,p=1/n,x=Math.ceil(p*c);this._readbackTexture.resize(x,x);const m=a*l[0],d=a*l[1],_=.5*x,T=.5*x,f=(0,mathUtils/* clamp */.qE)(a*h.x,_,m-_-1),g=(0,mathUtils/* clamp */.qE)(d-a*h.y,T,d-T-1),R=f-_,b=g-T,w=this._readbackTexture;o.bindTexture(w,0),o.gl.copyTexImage2D(w.descriptor.target,0,w.descriptor.pixelFormat,R,b,x,x,0);const y=(f+u.x*a)/m*2-1,k=(g-u.y*a)/d*2-1,M=c/m*2,j=c/d*2;this._position[0]=y,this._position[1]=k,this._position[2]=M,this._position[3]=j}render(e,t){const{context:i,painter:s}=e;s.setPipelineState(shaderGraph_utils/* simplePipelineState */.i);const o={readbackTexture:{texture:this._readbackTexture,unit:0},maskTexture:{texture:this._maskTexture,unit:7},overlayTexture:{texture:this._overlayTexture,unit:6},drawPos:this._position,...t};s.submitDrawMesh(i,{shader:this.shaders.magnifier,uniforms:{config:o},defines:null,optionalAttributes:null,useComputeBuffer:!1},s.quadMesh)}shutdown(){this._destroyResources()}_initializeResources(e,t,r,s){const o=e.context;this._resourcePixelRatio=e.pixelRatio;const a=Math.ceil(s.size*e.pixelRatio);r.width=a,r.height=a;const p=new TextureDescriptor/* TextureDescriptor */.R;p.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,p.wrapMode=views_webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,p.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.NEAREST,p.flipped=!0,p.preMultiplyAlpha=!(0,core_urlUtils/* isSVG */.XJ)(r.src)||!e.context.driverTest.svgPremultipliesAlpha.result,this._overlayTexture=new Texture/* Texture */.g(o,p,r),t.width=a,t.height=a,p.pixelFormat=p.internalFormat=views_webgl_enums/* PixelFormat */.Ab.ALPHA,this._maskTexture=new Texture/* Texture */.g(o,p,t);const x=1/s.factor;p.pixelFormat=p.internalFormat=views_webgl_enums/* PixelFormat */.Ab.RGBA,p.width=p.height=Math.ceil(x*a),p.samplingMode=views_webgl_enums/* TextureSamplingMode */.Cj.LINEAR,p.flipped=!1,this._readbackTexture=new Texture/* Texture */.g(o,p)}_destroyResources(){(0,maybe/* disposeMaybe */.WD)(this._maskTexture),(0,maybe/* disposeMaybe */.WD)(this._overlayTexture),(0,maybe/* disposeMaybe */.WD)(this._readbackTexture),this._maskTexture=null,this._overlayTexture=null,this._readbackTexture=null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestImageUtils.js
var requestImageUtils = __webpack_require__(34528);
;// ../node_modules/@arcgis/core/views/magnifier/resources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function resources_s(s){const r=__webpack_require__.e(/* import() */ 1162).then(__webpack_require__.bind(__webpack_require__, 1162)),i=__webpack_require__.e(/* import() */ 79922).then(__webpack_require__.bind(__webpack_require__, 79922)),o=(0,requestImageUtils/* requestImage */.D)((await r).default,{signal:s}),e=(0,requestImageUtils/* requestImage */.D)((await i).default,{signal:s}),m={mask:await o,overlay:await e};return (0,promiseUtils/* throwIfAborted */.Te)(s),m}

;// ../node_modules/@arcgis/core/views/2d/magnifier/MagnifierView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MagnifierView2D_c extends DisplayObject/* DisplayObject */.q{constructor(){super(),this._handles=new Handles/* default */.A,this._magnifierTechnique=new MagnifierTechnique_p,this.updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this.visible=!1}destroy(){this._handles=(0,maybe/* destroyMaybe */.pR)(this._handles),this._magnifierTechnique.shutdown(),this._resourcesTask=(0,maybe/* abortMaybe */.DC)(this._resourcesTask)}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e,this.requestRender()}get magnifier(){return this._magnifier}set magnifier(e){this._magnifier=e,this._handles.removeAll(),this._handles.add([(0,reactiveUtils/* watch */.wB)((()=>e.version),(()=>{this.visible=e.visible&&null!=e.position&&e.size>0,this.requestRender()}),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>[e.maskUrl,e.overlayUrl]),(()=>this._reloadResources())),(0,reactiveUtils/* watch */.wB)((()=>e.size),(()=>{this._magnifierTechnique.shutdown(),this.requestRender()}))])}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}doRender(e){if(!this._resourcesTask)return void this._reloadResources();if(e.drawPhase!==webgl_enums/* WGLDrawPhase */.S5.MAP||!this._canRender())return;const s=this._magnifier;if(null==s.position)return;this._magnifierTechnique.updateResources(e,this._mask,this._overlay,s);const r=this.backgroundColor,i=r?[r.a*r.r/255,r.a*r.g/255,r.a*r.b/255,r.a]:[1,1,1,1];this._magnifierTechnique.render(e,{background:i,maskEnabled:s.maskEnabled?1:0,overlayEnabled:s.overlayEnabled?1:0})}_canRender(){return this._mask&&this._overlay&&null!=this._magnifier}_reloadResources(){this._resourcesTask&&this._resourcesTask.abort();const r=null!=this._magnifier?this._magnifier.maskUrl:null,i=null!=this._magnifier?this._magnifier.overlayUrl:null;this._resourcesTask=(0,asyncUtils/* createTask */.UT)((async s=>{const n=null==r||null==i?resources_s(s):null,t=null!=r?(0,request/* default */.A)(r,{responseType:"image",signal:s}).then((e=>e.data)):n.then((e=>e.mask)),a=null!=i?(0,request/* default */.A)(i,{responseType:"image",signal:s}).then((e=>e.data)):n.then((e=>e.overlay)),[o,l]=await Promise.all([t,a]);this._mask=o,this._overlay=l,this._magnifierTechnique.shutdown(),this.requestRender()})),this.updatingHandles.addPromise(this._resourcesTask.promise)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js
var vec2f32 = __webpack_require__(17845);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projectionUtils.js + 2 modules
var projectionUtils = __webpack_require__(68490);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules
var normalizeUtils = __webpack_require__(65231);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/scaleUtils.js
var scaleUtils = __webpack_require__(61781);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GridShader.js
var GridShader = __webpack_require__(44104);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/grid/GridTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GridTechnique_i extends Technique/* Technique */.j{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Grid,this.shaders={grid:new GridShader/* GridShader */.K}}render(s,r){const{context:t,painter:i}=s;i.setPipelineState(shaderGraph_utils/* simplePipelineState */.i),i.submitDrawMesh(t,{shader:this.shaders.grid,uniforms:r,defines:null,optionalAttributes:null,useComputeBuffer:!1},i.quadMesh)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/grid/constants.js
var grid_constants = __webpack_require__(70835);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/grid/gridUtils.js
var gridUtils = __webpack_require__(60143);
;// ../node_modules/@arcgis/core/views/2d/grid/GridView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const GridView2D_x=(0,vec2f64/* create */.vt)();class GridView2D_w extends DisplayObject/* DisplayObject */.q{constructor(){super(),this._handles=new Handles/* default */.A,this._projectedCenter=null,this._metersPerSRUnit=null,this._technique=new GridTechnique_i,this._grid=null,this.visible=!0}destroy(){this._handles=(0,maybe/* destroyMaybe */.pR)(this._handles),this._technique.shutdown()}get grid(){return this._grid}set grid(e){this._grid=e,this._handles.removeAll(),this._handles.add([(0,reactiveUtils/* watch */.wB)((()=>e?.center),(()=>{this._projectedCenter=null}),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>[e?.center,e?.dynamicScaling,e?.majorLineColor,e?.majorLineInterval,e?.minorLineColor,e?.rotateWithMap,e?.rotation,e?.spacing,e?.units]),(()=>this.requestRender()),reactiveUtils/* initial */.Vh)])}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}doRender(e){if(e.drawPhase!==webgl_enums/* WGLDrawPhase */.S5.MAP||null==this.grid||!this.visible)return;const{spacing:t,units:r,majorLineInterval:i,dynamicScaling:s,majorLineColor:o,minorLineColor:a}=this.grid;if(0===t)return;if(this._updateDerivedValues(e),null==this._projectedCenter||null==this._metersPerSRUnit)return;const{scale:l,spatialReference:m}=e.state,c=(0,unitUtils/* convertUnit */.oU)(t,r,"meters"),h=this._metersPerSRUnit*(0,scaleUtils/* getResolutionForScale */.i1)(l,m),p=c/h;if(!s&&p<grid_constants/* minimumPixelsPerStrideForDisplayWhenScalingOff */.b)return;const d=c*(0,gridUtils/* getScaleFactor */.Ge)(i,p,s);this._updateTransform(e,h,d),this._technique.render(e,{transform:{dvs:this.transforms.displayViewScreenMat3},config:{pxPerCell:d/h,minorLineColor:GridView2D_q(a),majorLineColor:GridView2D_q(o),majorLineInterval:i,halfWidth:.25,aaWidth:.5}})}_updateDerivedValues(e){if(!this.grid)return;const{center:t}=this.grid,{spatialReference:r}=e.state;this._projectedCenter&&(0,spatialReferenceUtils/* equals */.aI)(this._projectedCenter.spatialReference,r)||(this._metersPerSRUnit=null,(0,spatialReferenceUtils/* equals */.aI)(t.spatialReference,r)?this._projectedCenter=t:(0,projectionUtils.isLoadedOrLoadFor)(t.spatialReference,r)?this._projectedCenter=(0,projectionUtils.project)(t,r):this.requestRender()),null==this._metersPerSRUnit&&null!=this._projectedCenter&&(this._metersPerSRUnit=(0,gridUtils/* measureMetersPerUnitAtReferencePoint */.WT)(this._projectedCenter))}_updateTransform(e,r,i){const{grid:s}=this,{center:n,rotation:c,size:j,spatialReference:_}=e.state;if(null==s||null==this._projectedCenter||null==this._metersPerSRUnit)return;const g=r*(j[0]/2),R=r*(j[1]/2),U=this._metersPerSRUnit/i,v=this._projectedCenter,y=(0,mathUtils/* deg2rad */.kU)(s.rotation),S=(0,mathUtils/* deg2rad */.kU)(c),b=this.transforms.displayViewScreenMat3;(0,mat3/* fromRotation */.$0)(b,-y);const L=_.isWrappable?(0,normalizeUtils/* getClosestDenormalizedXToReference */.O7)(v.x,n[0],_):v.x,P=(0,vec2/* set */.hZ)(GridView2D_x,L,v.y),w=(0,vec2/* sub */.jb)(GridView2D_x,n,P);(0,vec2/* scale */.hs)(w,w,U),s.rotateWithMap||(0,vec2/* rotate */.e$)(w,w,vec2f32/* ZEROS */.uY,-S),(0,vec2/* rotate */.e$)(w,w,vec2f32/* ZEROS */.uY,-y),(0,vec2/* scale */.hs)(w,w,1/s.majorLineInterval),GridView2D_M(w,w),(0,vec2/* scale */.hs)(w,w,s.majorLineInterval),(0,vec2/* rotate */.e$)(w,w,vec2f32/* ZEROS */.uY,y),(0,mat3/* translate */.Tl)(b,b,w),s.rotateWithMap&&(0,mat3/* rotate */.e$)(b,b,S);const q=(0,vec2/* set */.hZ)(GridView2D_x,g/i,R/i);(0,mat3/* scaleByVec2 */.Oe)(b,b,q)}}function GridView2D_M(e,t){return e[0]=t[0]-Math.trunc(t[0]),e[1]=t[1]-Math.trunc(t[1]),e}function GridView2D_q(e){const[t,r,i,s]=e.toArray().map((e=>e/255));return[t*s,r*s,i*s,s]}

;// ../node_modules/@arcgis/core/views/2d/mapViewDeps.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/



/***/ }),

/***/ 92595:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ y)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Viewpoint.js + 2 modules
var Viewpoint = __webpack_require__(29107);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js
var Point = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/viewpointUtils.js
var viewpointUtils = __webpack_require__(25887);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/navigation/duration.js
var duration = __webpack_require__(57626);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/input/InputManager.js + 2 modules
var InputManager = __webpack_require__(54874);
;// ../node_modules/@arcgis/core/views/2d/navigation/ZoomBox.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n="esri-zoom-box",h={container:`${n}__container`,overlay:`${n}__overlay`,background:`${n}__overlay-background`,box:`${n}__outline`},l={zoom:"Shift",counter:"Control"};let d=class extends Accessor/* default */.A{constructor(t){super(t),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._rafId=null,this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(t){this.removeAllHandles(),this._destroyOverlay(),this._set("view",t),t&&this.addHandles([t.on("drag",[l.zoom],(t=>this._handleDrag(t,1)),InputManager/* ViewEventPriorities */.o.INTERNAL),t.on("drag",[l.zoom,l.counter],(t=>this._handleDrag(t,-1)),InputManager/* ViewEventPriorities */.o.INTERNAL)])}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(t,e,i,r){this._box.x=t,this._box.y=e,this._box.width=i,this._box.height=r,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(t,e,r,o,a){const n=this.view,h=n.toMap((0,screenUtils/* createScreenPoint */.tc)(t+.5*r,e+.5*o));let l=Math.max(r/n.width,o/n.height);-1===a&&(l=1/l),this._destroyOverlay(),this.navigation.end(),n.goTo({center:h,scale:n.scale*l},{animationMode:"always",duration:(0,duration/* getGoToDuration */.s)()})}_updateBox(t,e,i,r){const o=this._boxShape;o.setAttributeNS(null,"x",""+t),o.setAttributeNS(null,"y",""+e),o.setAttributeNS(null,"width",""+i),o.setAttributeNS(null,"height",""+r),o.setAttributeNS(null,"class",h.box)}_updateBackground(t,e,i,r){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(t,e,i,r,this.view.width,this.view.height))}_createContainer(){const t=document.createElement("div");t.className=h.container,this.view.root.appendChild(t),this._container=t}_createOverlay(){const t=this.view.width,e=this.view.height,i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttributeNS(null,"d","M 0 0 L "+t+" 0 L "+t+" "+e+" L 0 "+e+" Z"),i.setAttributeNS(null,"class",h.background);const r=document.createElementNS("http://www.w3.org/2000/svg","rect"),o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),o.setAttributeNS(null,"class",h.overlay),o.appendChild(i),o.appendChild(r),this._container.appendChild(o),this._backgroundShape=i,this._boxShape=r,this._overlay=o}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(t,e,i,r,o,s){const a=t+i,n=e+r;return"M 0 0 L "+o+" 0 L "+o+" "+s+" L 0 "+s+" ZM "+t+" "+e+" L "+t+" "+n+" L "+a+" "+n+" L "+a+" "+e+" Z"}_handleDrag(t,e){const i=t.x,r=t.y,o=t.origin.x,s=t.origin.y;let a,n,h,l;switch(i>o?(a=o,h=i-o):(a=i,h=o-i),r>s?(n=s,l=r-s):(n=r,l=s-r),t.action){case"start":this._start();break;case"update":this._update(a,n,h,l);break;case"end":this._end(a,n,h,l,e)}t.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:t,y:e,width:i,height:r}=this._box;this._updateBox(t,e,i,r),this._updateBackground(t,e,i,r),this._rafId=requestAnimationFrame(this._redraw)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"navigation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"view",null),d=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.navigation.ZoomBox")],d);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
;// ../node_modules/@arcgis/core/views/navigation/FilteredFiniteDifference.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FilteredFiniteDifference_t{constructor(t){this._gain=t,this.lastValue=void 0,this.filteredDelta=void 0}update(t){if(this.hasLastValue()){const e=this.computeDelta(t);this._updateDelta(e)}this.lastValue=t}reset(){this.lastValue=void 0,this.filteredDelta=void 0}hasLastValue(){return void 0!==this.lastValue}hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(t){return void 0===this.lastValue?NaN:t-this.lastValue}_updateDelta(t){void 0!==this.filteredDelta?this.filteredDelta=(1-this._gain)*this.filteredDelta+this._gain*t:this.filteredDelta=t}}

;// ../node_modules/@arcgis/core/views/navigation/Momentum.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Momentum_t{constructor(t,i,o){this._initialVelocity=t,this._stopVelocity=i,this._friction=o,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(t){return t>this.duration}get friction(){return this._friction}value(t){return this.valueFromInitialVelocity(this._initialVelocity,t)}valueDelta(t,i){const o=this.value(t);return this.value(t+i)-o}valueFromInitialVelocity(t,i){i=Math.min(i,this.duration);const o=1-this.friction;return t*(o**i-1)/Math.log(o)}}

;// ../node_modules/@arcgis/core/views/navigation/PanPlanarMomentumEstimator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PanPlanarMomentumEstimator_l extends Momentum_t{constructor(e,t,i,s,n){super(e,t,i),this._sceneVelocity=s,this.direction=n}value(e){return super.valueFromInitialVelocity(this._sceneVelocity,e)}}class c{constructor(e=300,t=12,i=.84){this._minimumInitialVelocity=e,this._stopVelocity=t,this._friction=i,this.enabled=!0,this._time=new FilteredFiniteDifference_t(.6),this._screen=[new FilteredFiniteDifference_t(.4),new FilteredFiniteDifference_t(.4)],this._scene=[new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6)],this._tmpDirection=(0,vec3f64/* create */.vt)()}add(e,t,i){if(this.enabled){if(this._time.hasLastValue()){if(this._time.computeDelta(i)<.015)return}this._screen[0].update(e[0]),this._screen[1].update(e[1]),this._scene[0].update(t[0]),this._scene[1].update(t[1]),this._scene[2].update(t[2]),this._time.update(i)}}reset(){this._screen[0].reset(),this._screen[1].reset(),this._scene[0].reset(),this._scene[1].reset(),this._scene[2].reset(),this._time.reset()}evaluateMomentum(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;const e=this._screen[0].filteredDelta,t=this._screen[1].filteredDelta,i=null==e||null==t?0:Math.sqrt(e*e+t*t),s=this._time.filteredDelta,n=null==s||null==i?0:i/s;return Math.abs(n)<this._minimumInitialVelocity?null:this.createMomentum(n,this._stopVelocity,this._friction)}createMomentum(s,n,r){(0,vec32.i)(this._tmpDirection,this._scene[0].filteredDelta??0,this._scene[1].filteredDelta??0,this._scene[2].filteredDelta??0);const c=(0,vec32.l)(this._tmpDirection);c>0&&(0,vec32.g)(this._tmpDirection,this._tmpDirection,1/c);const h=this._time.filteredDelta;return new PanPlanarMomentumEstimator_l(s,n,r,null==h?0:c/h,this._tmpDirection)}}

;// ../node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let v=class extends Accessor/* default */.A{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new c(500,6,.92),this.momentum=null,this.tmpMomentum=(0,vec3f64/* create */.vt)(),this.momentumFinished=!1,this.viewpoint=new Viewpoint/* default */.A({targetGeometry:new Point/* default */.A,scale:0,rotation:0}),this._previousDrag=null,(0,reactiveUtils/* when */.z7)((()=>this.momentumFinished),(()=>this.navigation.stop()))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this._previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,e=i.center.y;const s=this._previousDrag;o=s?s.center.x-o:-o,e=s?e-s.center.y:e,t.viewpoint=(0,viewpointUtils/* translateBy */.aA)(this.viewpoint,t.viewpoint,[o||0,e||0]),this._previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.effectiveMomentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this._previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,e=(0,screenUtils/* createScreenPointArray */.gs)(-i,o),m=(0,vec3f64/* fromValues */.fA)(-i,o,0);this.momentumEstimator.add(e,m,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager?.animateContinuous(t.viewpoint,((i,o)=>{const{momentum:e,animationTime:s,tmpMomentum:m}=this,n=.001*o;if(!(this.momentumFinished=!e||e.isFinished(s))){const o=e.valueDelta(s,n);(0,vec32.g)(m,e.direction,o),(0,viewpointUtils/* translateBy */.aA)(i,i,m),t.constraints.constrainByGeometry(i)}this.animationTime+=n}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};(0,tslib_es6._)([(0,property/* property */.MZ)()],v.prototype,"momentumFinished",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],v.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],v.prototype,"navigation",void 0),v=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.navigation.actions.Pan")],v);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
;// ../node_modules/@arcgis/core/views/navigation/MomentumEstimator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MomentumEstimator_s{constructor(t=2.5,i=.01,s=.95,l=12){this._minimumInitialVelocity=t,this._stopVelocity=i,this._friction=s,this._maxVelocity=l,this.enabled=!0,this.value=new FilteredFiniteDifference_t(.8),this.time=new FilteredFiniteDifference_t(.3)}add(t,e){if(this.enabled&&null!=e){if(this.time.hasLastValue()){if(this.time.computeDelta(e)<.01)return;if(this.value.hasFilteredDelta()){const e=this.value.computeDelta(t);this.value.filteredDelta*e<0&&this.value.reset()}}this.time.update(e),this.value.update(t)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta()||!this.time.hasFilteredDelta())return null;let e=this.value.filteredDelta/this.time.filteredDelta;return e=(0,mathUtils/* clamp */.qE)(e,-this._maxVelocity,this._maxVelocity),Math.abs(e)<this._minimumInitialVelocity?null:this.createMomentum(e,this._stopVelocity,this._friction)}createMomentum(t,e,s){return new Momentum_t(t,e,s)}}

;// ../node_modules/@arcgis/core/views/navigation/RotationMomentumEstimator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends MomentumEstimator_s{constructor(t=3,a=.01,s=.95,o=12){super(t,a,s,o)}add(t,a){const s=this.value.lastValue;if(null!=s){let a=t-s;for(;a>Math.PI;)a-=2*Math.PI;for(;a<-Math.PI;)a+=2*Math.PI;t=s+a}super.add(t,a)}}

;// ../node_modules/@arcgis/core/views/navigation/ZoomMomentumEstimator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends Momentum_t{constructor(e,t,r){super(e,t,r)}value(e){const t=super.value(e);return Math.exp(t)}valueDelta(e,t){const r=super.value(e),s=super.value(e+t)-r;return Math.exp(s)}}class s extends MomentumEstimator_s{constructor(e=2.5,t=.01,r=.95,s=12){super(e,t,r,s)}add(e,t){super.add(Math.log(e),t)}createMomentum(e,t,s){return new r(e,t,s)}}

;// ../node_modules/@arcgis/core/views/2d/navigation/actions/Pinch.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let _=class extends Accessor/* default */.A{constructor(t){super(t),this._animationTime=0,this._momentumFinished=!1,this._previousAngle=0,this._previousRadius=0,this._previousCenter=null,this._rotationMomentumEstimator=new a(.6,.15,.95),this._rotationDirection=1,this._startAngle=0,this._startRadius=0,this._updateTimestamp=null,this._zoomDirection=1,this._zoomMomentumEstimator=new s,this._zoomOnly=null,this.viewpoint=new Viewpoint/* default */.A({targetGeometry:new Point/* default */.A,scale:0,rotation:0}),this.zoomMomentum=null,this.rotateMomentum=null,this.addHandles((0,reactiveUtils/* when */.z7)((()=>this._momentumFinished),(()=>this.navigation.stop())))}begin(t,o){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=o.angle,this._previousRadius=this._startRadius=o.radius,this._previousCenter=o.center,this._updateTimestamp=null,t.constraints.rotationEnabled&&this.addToRotateEstimator(0,o.timestamp),this.addToZoomEstimator(o,1)}update(t,o){null===this._updateTimestamp&&(this._updateTimestamp=o.timestamp);const i=o.angle,s=o.radius,e=o.center,n=Math.abs(180*(i-this._startAngle)/Math.PI),m=Math.abs(s-this._startRadius),a=this._startRadius/s;if(this._previousRadius&&this._previousCenter){const r=s/this._previousRadius;let h=180*(i-this._previousAngle)/Math.PI;this._rotationDirection=h>=0?1:-1,this._zoomDirection=r>=1?1:-1,t.constraints.rotationEnabled?(null===this._zoomOnly&&o.timestamp-this._updateTimestamp>200&&(this._zoomOnly=m-n>0),null===this._zoomOnly||this._zoomOnly?h=0:this.addToRotateEstimator(i-this._startAngle,o.timestamp)):h=0,this.addToZoomEstimator(o,a),this.navigation.setViewpoint([e.x,e.y],1/r,h,[this._previousCenter.x-e.x,e.y-this._previousCenter.y])}this._previousAngle=i,this._previousRadius=s,this._previousCenter=e}end(t){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(t),this.navigation.end()}addToRotateEstimator(t,o){this._rotationMomentumEstimator.add(t,.001*o)}addToZoomEstimator(t,o){this._zoomMomentumEstimator.add(o,.001*t.timestamp)}canZoomIn(t){const o=t.scale,i=t.constraints.effectiveMaxScale;return 0===i||o>i}canZoomOut(t){const o=t.scale,i=t.constraints.effectiveMinScale;return 0===i||o<i}onAnimationUpdate(t){this.navigation.animationManager?.animateContinuous(t.viewpoint,((o,i)=>{const s=!this.canZoomIn(t)&&this._zoomDirection>1||!this.canZoomOut(t)&&this._zoomDirection<1,e=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),n=s||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),h=.001*i;if(this._momentumFinished=e&&n,!this._momentumFinished){const i=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,h))*this._rotationDirection*180/Math.PI:0;let s=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,h)):1;const e=(0,vec2f64/* create */.vt)(),n=(0,vec2f64/* create */.vt)();if(this._previousCenter){(0,vec2/* set */.hZ)(e,this._previousCenter.x,this._previousCenter.y),(0,viewpointUtils/* getPaddingScreenTranslation */.b8)(n,t.size,t.padding),(0,vec2/* add */.WQ)(e,e,n);const{constraints:r,scale:h}=t,p=h*s;s<1&&!r.canZoomInTo(p)?(s=h/r.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):s>1&&!r.canZoomOutTo(p)&&(s=h/r.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),(0,viewpointUtils/* scaleAndRotateBy */.WK)(o,t.viewpoint,s,i,e,t.size),t.constraints.constrainByGeometry(o)}}this._animationTime+=h}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};(0,tslib_es6._)([(0,property/* property */.MZ)()],_.prototype,"_momentumFinished",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],_.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],_.prototype,"navigation",void 0),_=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.navigation.actions.Pinch")],_);

;// ../node_modules/@arcgis/core/views/2d/navigation/actions/Rotate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Rotate_d=(0,vec2f64/* create */.vt)(),g=(0,vec2f64/* create */.vt)();let f=class extends Accessor/* default */.A{constructor(t){super(t),this._previousCenter=(0,vec2f64/* create */.vt)(),this.viewpoint=new Viewpoint/* default */.A({targetGeometry:new Point/* default */.A,scale:0,rotation:0})}begin(t,e){this.navigation.begin(),(0,vec2/* set */.hZ)(this._previousCenter,e.center.x,e.center.y)}update(t,e){const{state:{size:o,padding:r}}=t;(0,vec2/* set */.hZ)(Rotate_d,e.center.x,e.center.y),(0,viewpointUtils/* getAnchor */.iB)(g,o,r),t.viewpoint=(0,viewpointUtils/* rotateBy */.tj)(this.viewpoint,t.state.paddedViewState.viewpoint,(0,viewpointUtils/* angleBetween */.s5)(g,this._previousCenter,Rotate_d)),(0,vec2/* copy */.C)(this._previousCenter,Rotate_d)}end(){this.navigation.end()}};(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"viewpoint",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"navigation",void 0),f=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.navigation.actions.Rotate")],f);

;// ../node_modules/@arcgis/core/views/2d/navigation/MapViewNavigation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const MapViewNavigation_v=10,MapViewNavigation_g=1,MapViewNavigation_d=new Viewpoint/* default */.A({targetGeometry:new Point/* default */.A}),MapViewNavigation_=[0,0],T=250;let MapViewNavigation_f=class extends Accessor/* default */.A{constructor(t){super(t),this._endTimer=null,this._lastEventTimestamp=null,this.animationManager=null,this.interacting=!1}initialize(){this.pan=new v({navigation:this}),this.rotate=new f({navigation:this}),this.pinch=new _({navigation:this}),this.zoomBox=new d({view:this.view,navigation:this})}destroy(){this.pan=(0,maybe/* destroyMaybe */.pR)(this.pan),this.rotate=(0,maybe/* destroyMaybe */.pR)(this.rotate),this.pinch=(0,maybe/* destroyMaybe */.pR)(this.pinch),this.zoomBox=(0,maybe/* destroyMaybe */.pR)(this.zoomBox),this.animationManager=null}begin(){this.stop(),this._set("interacting",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(T)}async zoom(t,i=this._getDefaultAnchor()){if(this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return t<1?this.zoomIn(i):this.zoomOut(i);this.setViewpoint(i,t,0,[0,0])}async zoomIn(t){const i=this.view,o=i.constraints.snapToNextScale(i.scale);return this._zoomToScale(o,t)}async zoomOut(t){const i=this.view,o=i.constraints.snapToPreviousScale(i.scale);return this._zoomToScale(o,t)}setViewpoint(t,i,o,n){this.begin(),this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,t,i,o,n),this.end()}setViewpointImmediate(t,i=0,o=[0,0],n=this._getDefaultAnchor()){this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,n,t,i,o)}continuousRotateClockwise(){const t=this.view.viewpoint;this.animationManager?.animateContinuous(t,(t=>{(0,viewpointUtils/* rotateBy */.tj)(t,t,-1)}))}continuousRotateCounterclockwise(){const t=this.view.viewpoint;this.animationManager?.animateContinuous(t,(t=>{(0,viewpointUtils/* rotateBy */.tj)(t,t,MapViewNavigation_g)}))}resetRotation(){this.view.constraints.rotationEnabled&&(this.view.rotation=0)}continuousPanLeft(){this._continuousPan([-10,0])}continuousPanRight(){this._continuousPan([MapViewNavigation_v,0])}continuousPanUp(){this._continuousPan([0,MapViewNavigation_v])}continuousPanDown(){this._continuousPan([0,-10])}continuousPanVector({x:t,y:i}){this._continuousPan([t*MapViewNavigation_v,i*MapViewNavigation_v])}stop(){this.pan.stopMomentumNavigation(),this.animationManager?.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))}_continuousPan(t){const i=this.view.viewpoint;this.animationManager?.animateContinuous(i,(i=>{(0,viewpointUtils/* translateBy */.aA)(i,i,t),this.view.constraints.constrainByGeometry(i)}))}_startTimer(t){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{this._endTimer=null;const t=performance.now()-(this._lastEventTimestamp??0);t<T?this._endTimer=this._startTimer(t):this._set("interacting",!1)}),t)),this._endTimer}_getDefaultAnchor(){const{size:t,padding:{left:i,right:o,top:n,bottom:e}}=this.view;return MapViewNavigation_[0]=.5*(t[0]-o+i),MapViewNavigation_[1]=.5*(t[1]-e+n),MapViewNavigation_}async _zoomToScale(t,i=this._getDefaultAnchor()){const{view:o}=this,{constraints:n,scale:e,viewpoint:s,size:a,padding:r}=o,c=n.canZoomInTo(t),p=n.canZoomOutTo(t);if(!(t<e&&!c||t>e&&!p))return (0,viewpointUtils/* padAndScaleAndRotateBy */.qV)(MapViewNavigation_d,s,t/e,0,i,a,r),n.constrainByGeometry(MapViewNavigation_d),o.goTo(MapViewNavigation_d,{animate:!0,animationMode:"always",duration:(0,duration/* getGoToDuration */.s)(),pickClosestTarget:!1})}_scaleRotateTranslateViewpoint(t,i,o,n,e){const{view:s}=this,{size:a,padding:r,constraints:h,scale:p,viewpoint:u}=s,l=p*o,w=h.canZoomInTo(l),v=h.canZoomOutTo(l);return(o<1&&!w||o>1&&!v)&&(o=1),(0,viewpointUtils/* translateBy */.aA)(u,u,e),(0,viewpointUtils/* padAndScaleAndRotateBy */.qV)(t,u,o,n,i,a,r),h.constrainByGeometry(t)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"animationManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,readOnly:!0})],MapViewNavigation_f.prototype,"interacting",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"pan",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"pinch",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"rotate",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MapViewNavigation_f.prototype,"zoomBox",void 0),MapViewNavigation_f=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.navigation.MapViewNavigation")],MapViewNavigation_f);const y=MapViewNavigation_f;


/***/ }),

/***/ 91013:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Am: () => (/* binding */ O),
/* harmony export */   C7: () => (/* binding */ a),
/* harmony export */   JS: () => (/* binding */ u),
/* harmony export */   Mg: () => (/* binding */ t),
/* harmony export */   dd: () => (/* binding */ s),
/* harmony export */   it: () => (/* binding */ n),
/* harmony export */   s2: () => (/* binding */ e),
/* harmony export */   sf: () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,n,a,O,s,t,i,u;!function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"}(e||(e={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(n||(n={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(a||(a={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(O||(O={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(s||(s={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee"}(t||(t={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(i||(i={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(u||(u={}));


/***/ }),

/***/ 89423:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony export tracer */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86942);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16541);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.webgl.BufferObject"),c=null;class E{static createIndex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER,e,i)}static createVertex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER,e,i)}static createUniform(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.UNIFORM_BUFFER,e,i)}static createPixelPack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER,e);return i&&s.setSize(i),s}static createPixelUnpack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_DRAW,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_UNPACK_BUFFER,e,i)}static createTransformFeedback(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STATIC_DRAW,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e);return s.setSize(i),s}constructor(t,e,i,s){this._context=t,this.bufferType=e,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(this._context.gl),s&&this.setData(s)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._context=null}else this._glName&&h().warn("Leaked WebGL buffer object")}setSize(t,e=null){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&null!=e)switch(this._indexType=e,e){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT:t*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT:t*=4}this._setBufferData(t)}setData(t){if(!t)return;let e=t.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint8Array */ .mg)(t)?this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE:(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint16Array */ .jq)(t)?(e/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint32Array */ .XJ)(t)&&(e/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)),this._setBufferData(e,t)}_setBufferData(t,e=null){this._size=t;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;null!=e?s.bufferData(this.bufferType,e,this.usage):s.bufferData(this.bufferType,t,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}setSubData(t,e,i,s){if(!t)return;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:_}=this._context;_.bufferSubData(this.bufferType,e*t.BYTES_PER_ELEMENT,t,i,s-i),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(_),this._isVAOAware&&this._context.bindVAO(r)}getSubData(t,e=0,i,s){if(i<0||s<0)return;const r=o(t)?t.BYTES_PER_ELEMENT:1;if(r*((i??0)+(s??0))>t.byteLength)return;e+r*(s??0)>this.usedMemory&&h().warn("Potential problem getting subdata: requested data exceeds buffer size!");const n=this._context.gl;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER))}async getSubDataAsync(t,e=0,i,s){await this._context.clientWaitAsync(),this.getSubData(t,e,i,s)}}function o(e){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isArrayLike */ .Xj)(e)}


/***/ }),

/***/ 84852:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ R)
/* harmony export */ });
/* unused harmony export ensureAttachmentMaxSize */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6267);
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89423);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35644);
/* harmony import */ var _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(74416);
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8595);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FramebufferObject");class R{constructor(t,e,r){if(this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceType */ .vt.FramebufferObject,this),null!=e){const r=S(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g(t,e);this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)}if(null!=r)if(A(r))this._depthStencilTexture=S(r)?r:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g(t,r),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const e=F(r)?r:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__/* .Renderbuffer */ .l(t,r);this._depthStencilBuffer=e,this._validateRenderbufferDescriptor(e.descriptor)}}dispose(){const{_colorAttachments:t,_glName:e}=this;if(0===t.size&&!this._depthStencilBuffer&&!this._depthStencilTexture&&!e)return;const{_context:r}=this,i=r.getBoundFramebufferObject();t.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),r.gl.deleteFramebuffer(e),this._glName=null,r.bindFramebuffer(i===this?null:i),r.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceType */ .vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)??this._depthStencilTexture??this._depthStencilBuffer;return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)??this._depthStencilTexture??this._depthStencilBuffer;return t?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce(((t,[e,r])=>t+r.usedMemory),this.depthStencil?.usedMemory??0)}static{this._MAX_COLOR_ATTACHMENTS=-1}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&S(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6){if(!t)return;this._validateColorAttachmentPoint(e);const{descriptor:r}=t;this._validateTextureDescriptor(r),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6){const e=this._colorAttachments.get(t);if(e)return this._initialized&&this._context.temporaryBindFramebufferObject(this,(()=>{this._framebufferTexture2D(null,t)})),this._colorAttachments.delete(t),e}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=0){const i=this._colorAttachments.get(e);i&&(t===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?this._framebufferTextureLayer(i.glName,e,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,0,r):this._framebufferTexture2D(i.glName,e,t,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,0))}attachDepthStencil(t){if(t)switch(t.type){case _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Texture:return this._attachDepthStencilTexture(t);case _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Renderbuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const{descriptor:e}=t,{pixelFormat:r,dataType:i}=e;r===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_STENCIL||r===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT?r!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_STENCIL||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_INT_24_8?r!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_INT||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_SHORT?(this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,O(r))),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t):console.error("Depth texture must have data type of UNSIGNED_INT or UNSIGNED_SHORT!"):console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"):console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!")}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&this._context.temporaryBindFramebufferObject(this,(()=>{this._framebufferTexture2D(null,O(t.descriptor.pixelFormat))})),this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderbufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const{gl:r}=this._context,i=this._getGLAttachmentPoint(e);r.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,i,r.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){const{_context:e}=this,r=e.getBoundFramebufferObject();e.bindFramebuffer(this);const{gl:i}=e,s=this._getGLAttachmentPoint(t.descriptor);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,s,i.RENDERBUFFER,null),e.bindFramebuffer(r)}return this._depthStencilBuffer=null,t}invalidateAttachments(t){const{_context:e}=this;e.temporaryBindFramebufferObject(this,(()=>e.gl.invalidateFramebuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,t)),!0)}copyToTexture(t,e,r,i,s,n,o){(t<0||e<0||s<0||n<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");const c=o.descriptor;o.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==c?.width||null==c?.height||t+r>this.width||e+i>this.height||s+r>c.width||n+i>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const a=this._context,u=a.bindTexture(o,_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES);a.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES),a.bindFramebuffer(this),a.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D,0,s,n,t,e,r,i),a.bindTexture(u,_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,r,i,s,n,h){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),h||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,r,i,s,n,h)}async readPixelsAsync(t,e,i,s,n,h,o){const{gl:c}=this._context,a=_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__/* .BufferObject */ .g.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STREAM_READ,o.byteLength);this._context.bindBuffer(a);const l=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),c.readPixels(t,e,i,s,n,h,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER),this._context.bindFramebuffer(l),await a.getSubDataAsync(o),a.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const r={width:t,height:e};B(r,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(r.width,r.height))),this._depthStencilTexture?.resize(r.width,r.height),this._initialized&&(B(r,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(r.width,r.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER){const{gl:e}=this._context;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const r=e.createFramebuffer();if(e.bindFramebuffer(t,r),this._colorAttachments.forEach(((e,r)=>{const i=U(e);i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?this._framebufferTextureLayer(e.glName,r,t,0,0):this._framebufferTexture2D(e.glName,r,i,t)})),this._depthStencilBuffer){const r=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,r,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else if(this._depthStencilTexture){const e=O(this._depthStencilTexture.descriptor.pixelFormat);this._framebufferTexture2D(this._depthStencilTexture.glName,e,U(this._depthStencilTexture),t)}if((0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!")}this._glName=r,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D,i=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(i,e,r,t,s)}_framebufferTextureLayer(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,i=0,s=0){this._context.gl.framebufferTextureLayer(r,e,t,i,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .disposeMaybe */ .WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,O(this._depthStencilTexture.descriptor.pixelFormat))),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .disposeMaybe */ .WD)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY&&console.error("Texture type must be TEXTURE_2D, TEXTURE_2D_ARRAY or TEXTURE_CUBE_MAP!"),B(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderbufferDescriptor(t){B(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT32F:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthAttachment */ .xL;case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthStencilFormat */ .iE.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthStencilFormat */ .iE.DEPTH32F_STENCIL8:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthStencilAttachment */ .nI;case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedStencilFormat */ .Xo.STENCIL_INDEX8:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilAttachment */ .uH}}_validateColorAttachmentPoint(e){if(-1===R._MAX_COLOR_ATTACHMENTS){const{gl:t}=this._context;R._MAX_COLOR_ATTACHMENTS=t.getParameter(t.MAX_COLOR_ATTACHMENTS)}const r=e-_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6;r+1>R._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${r+1}. Implementation supports up to ${R._MAX_COLOR_ATTACHMENTS} color attachments`)}}function S(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Texture}function F(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Renderbuffer}function A(t){return S(t)||D(t)}function D(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.TextureDescriptor}function N(t){return null!=t&&"type"in t?t.type:null}function B(t,e){const r=Math.max(t.width,t.height);if(r>e){g().warnOnce(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const i=e/r;return t.width=Math.round(t.width*i),t.height=Math.round(t.height*i),!1}return!0}function U(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP_POSITIVE_X:t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY:_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D}function O(t){return t===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthAttachment */ .xL:_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthStencilAttachment */ .nI}


/***/ }),

/***/ 68449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  B: () => (/* binding */ Program_a)
});

// UNUSED EXPORTS: test

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/webgl/reservedWordsGLSL3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"];

;// ../node_modules/@arcgis/core/views/webgl/testUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const testUtils_e={enableCache:!1};

;// ../node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","uvec2","uvec3","uvec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","usampler1D","usampler2D","usampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],o=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],n=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT","textureSize","texelFetch"];var i=999,l=9999,s=0,c=1,u=2,d=3,g=4,p=5,f=6,_=7,h=8,x=9,m=10,y=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function M(){var e,t,r,M=0,v=0,T=i,b=[],P=[],E=1,C=0,D=0,k=!1,j=!1,F="";return function(e){return P=[],null!==e?S(e.replace?e.replace(/\r\n/g,"\n"):e):R()};function L(e){e.length&&P.push({type:w[T],data:e,position:D,line:E,column:C})}function S(t){var a;for(M=0,r=(F+=t).length;e=F[M],M<r;){switch(a=M,T){case s:M=I();break;case c:M=G();break;case u:M=A();break;case d:M=O();break;case g:M=B();break;case y:M=q();break;case p:M=H();break;case l:M=N();break;case x:M=X();break;case i:M=V()}if(a!==M)if("\n"===F[a])C=0,++E;else++C}return v+=M,F=F.slice(M),P}function R(e){return b.length&&L(b.join("")),T=m,L("(eof)"),P}function V(){return b=b.length?[]:b,"/"===t&&"*"===e?(D=v+M-1,T=s,t=e,M+1):"/"===t&&"/"===e?(D=v+M-1,T=c,t=e,M+1):"#"===e?(T=u,D=v+M,M):/\s/.test(e)?(T=x,D=v+M,M):(k=/\d/.test(e),j=/[^\w_]/.test(e),D=v+M,T=k?g:j?d:l,M)}function X(){return/[^\s]/g.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function A(){return"\r"!==e&&"\n"!==e||"\\"===t?(b.push(e),t=e,M+1):(L(b.join("")),T=i,M)}function G(){return A()}function I(){return"/"===e&&"*"===t?(b.push(e),L(b.join("")),T=i,M+1):(b.push(e),t=e,M+1)}function O(){if("."===t&&/\d/.test(e))return T=p,M;if("/"===t&&"*"===e)return T=s,M;if("/"===t&&"/"===e)return T=c,M;if("."===e&&b.length){for(;U(b););return T=p,M}if(";"===e||")"===e||"("===e){if(b.length)for(;U(b););return L(e),T=i,M+1}var r=2===b.length&&"="!==e;if(/[\w_\d\s]/.test(e)||r){for(;U(b););return T=i,M}return b.push(e),t=e,M+1}function U(e){for(var t,r,a=0;;){if(t=o.indexOf(e.slice(0,e.length+a).join("")),r=o[t],-1===t){if(a--+e.length>0)continue;r=e.slice(0,1).join("")}return L(r),D+=r.length,(b=b.slice(r.length)).length}}function q(){return/[^a-fA-F0-9]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function B(){return"."===e||/[eE]/.test(e)?(b.push(e),T=p,t=e,M+1):"x"===e&&1===b.length&&"0"===b[0]?(T=y,b.push(e),t=e,M+1):/[^\d]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function H(){return"f"===e&&(b.push(e),t=e,M+=1),/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(b.push(e),t=e,M+1):/[^\d]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function N(){if(/[^\d\w_]/.test(e)){var r=b.join("");return T=a.indexOf(r)>-1?h:n.indexOf(r)>-1?_:f,L(b.join("")),T=i,M}return b.push(e),t=e,M+1}}function v(e){var t=M(),r=[];return r=(r=r.concat(t(e))).concat(t(null))}function T(e){return v(e)}function b(e){return e.map((e=>"eof"!==e.type?e.data:"")).join("")}const P=new Set(["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"]);function E(e,t="100",r="300 es"){const a=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const o of e)if("preprocessor"===o.type){const e=a.exec(o.data);if(e){const a=e[1].replaceAll(/\s{2,}/g," ");if(a===r)return a;if(a===t)return o.data="#version "+r,t;throw new Error("unknown glsl version: "+a)}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}function C(e,t){for(let r=t-1;r>=0;r--){const t=e[r];if("whitespace"!==t.type&&"block-comment"!==t.type){if("keyword"!==t.type)break;if("attribute"===t.data||"in"===t.data)return!0}}return!1}function D(e,t,r,a){a=a||r;for(const o of e)if("ident"===o.type&&o.data===r){a in t?t[a]++:t[a]=0;return D(e,t,a+"_"+t[a],a)}return r}function k(e,t,r="afterVersion"){function a(e,t){for(let r=t;r<e.length;r++){const t=e[r];if("operator"===t.type&&";"===t.data)return r}return null}function o(e){let t=-1,o=0,n=-1;for(let i=0;i<e.length;i++){const l=e[i];if("preprocessor"===l.type&&(/#(if|ifdef|ifndef)\s+.+/.test(l.data)?++o:/#endif\s*.*/.test(l.data)&&--o),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===l.type&&l.data.startsWith("#version")&&(n=Math.max(n,i)),"afterPrecision"===r&&"keyword"===l.type&&"precision"===l.data){const t=a(e,i);if(null===t)throw new Error("precision statement not followed by any semicolons!");n=Math.max(n,t)}t<n&&0===o&&(t=i)}return t+1}const n={data:"\n",type:"whitespace"},i=t=>t<e.length&&/[^\r\n]$/.test(e[t].data);let l=o(e);i(l-1)&&e.splice(l++,0,n);for(const s of t)e.splice(l++,0,s);i(l-1)&&i(l)&&e.splice(l,0,n)}function j(e,t,r,a="lowp"){k(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:a},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function F(e,t,r,a,o="lowp"){k(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:a.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:o},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function L(e,t){let r,a,o=-1;for(let n=t;n<e.length;n++){const t=e[n];if("operator"===t.type&&("["===t.data&&(r=n),"]"===t.data)){a=n;break}"integer"===t.type&&(o=parseInt(t.data,10))}return r&&a&&e.splice(r,a-r+1),o}function S(r,a){if(r.startsWith("#version 300"))return r;const o=V(r);if(null!=o)return o;const n=T(r);if("300 es"===E(n,"100","300 es"))return r;let i=null,l=null;const s={},c={};for(let u=0;u<n.length;++u){const r=n[u];switch(r.type){case"keyword":a===enums/* ShaderType */.Co.VERTEX_SHADER&&"attribute"===r.data?r.data="in":"varying"===r.data&&(r.data=a===enums/* ShaderType */.Co.VERTEX_SHADER?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(r.data.trim())&&(r.data=r.data.replaceAll(/(2D|Cube|EXT)/g,"")),a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragColor"===r.data&&(i||(i=D(n,s,"fragColor"),j(n,i,"vec4")),r.data=i),a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragData"===r.data){const e=L(n,u+1),t=D(n,s,"fragData");F(n,t,"vec4",e,"mediump"),r.data=t}else a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragDepthEXT"===r.data&&(l||(l=D(n,s,"gl_FragDepth")),r.data=l);break;case"ident":if(e.includes(r.data)){if(a===enums/* ShaderType */.Co.VERTEX_SHADER&&C(n,u))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");r.data in c||(c[r.data]=D(n,s,r.data)),r.data=c[r.data]}}}for(let e=n.length-1;e>=0;--e){const t=n[e];if("preprocessor"===t.type){const r=t.data.match(/#extension\s+(.*):/);if(r?.[1]&&P.has(r[1].trim())){const t=n[e+1];n.splice(e,t&&"whitespace"===t.type?2:1)}const a=t.data.match(/#ifdef\s+(.*)/);a?.[1]&&P.has(a[1].trim())&&(t.data="#if 1");const o=t.data.match(/#ifndef\s+(.*)/);o?.[1]&&P.has(o[1].trim())&&(t.data="#if 0")}}return X(r,b(n))}const R=new Map;function V(e){return testUtils_e.enableCache?R.get(e):null}function X(e,t){return testUtils_e.enableCache&&R.set(e,t),t}

;// ../node_modules/@arcgis/core/views/webgl/Program.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Program_s=4294967295;class Program_a{constructor(e,n,a,m,f=new Map,c=[]){this._context=e,this._locations=m,this._uniformBlockBindings=f,this._transformFeedbackVaryings=c,this._refCount=1,this._compiled=!1,this._linesOfCode=0,this._nameToUniformLocation=new Map,this._nameToUniform1=new Map,this._nameToUniform1v=new Map,this._nameToUniform2=new Map,this._nameToUniform3=new Map,this._nameToUniform4=new Map,this._nameToUniformMatrix3=new Map,this._nameToUniformMatrix4=new Map,e||console.error("RenderingContext isn't initialized!"),0===n.length&&console.error("Shaders source should not be empty!"),n=S(n,enums/* ShaderType */.Co.VERTEX_SHADER),a=S(a,enums/* ShaderType */.Co.FRAGMENT_SHADER),this._vShader=Program_h(this._context,enums/* ShaderType */.Co.VERTEX_SHADER,n),this._fShader=Program_h(this._context,enums/* ShaderType */.Co.FRAGMENT_SHADER,a),Program_.enabled&&(this._linesOfCode=n.match(/\n/g).length+a.match(/\n/g).length+2,this._context.instanceCounter.increment(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode)),this._vShader&&this._fShader||console.error("Error loading shaders!"),this._context.instanceCounter.increment(enums/* ResourceType */.vt.Shader,this),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&(this.vertexShader=n,this.fragmentShader=a),this.usedMemory=n.length+a.length;const l=this._context.gl,g=l.createProgram();l.attachShader(g,this._vShader),l.attachShader(g,this._fShader),this._locations.forEach(((t,e)=>l.bindAttribLocation(g,t,e))),this._transformFeedbackVaryings?.length&&l.transformFeedbackVaryings(g,this._transformFeedbackVaryings,l.SEPARATE_ATTRIBS),l.linkProgram(g),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!l.getProgramParameter(g,l.LINK_STATUS)&&console.error(`Could not link shader\nvalidated: ${l.getProgramParameter(g,l.VALIDATE_STATUS)}, gl error ${l.getError()}, vertex: ${l.getShaderParameter(this._vShader,l.COMPILE_STATUS)}, fragment: ${l.getShaderParameter(this._fShader,l.COMPILE_STATUS)}, info log: ${l.getProgramInfoLog(g)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`);for(const[t,o]of this._uniformBlockBindings){const e=l.getUniformBlockIndex(g,t);e<Program_s&&l.uniformBlockBinding(g,e,o)}this._glName=g,this._context.instanceCounter.increment(enums/* ResourceType */.vt.Program,this)}get glName(){return this._glName}get hasGLName(){return null!=this._glName}get hasTransformFeedbackVaryings(){return!!this._transformFeedbackVaryings?.length}get compiled(){return!!this._compiled||(this._context.capabilities.parallelShaderCompile&&null!=this.glName?(this._compiled=!!this._context.gl.getProgramParameter(this.glName,enums/* Extension */.YY.COMPLETION_STATUS_KHR),this._compiled):(this._compiled=!0,!0))}dispose(){if(--this._refCount>0)return;const t=this._context.gl,e=this._context.instanceCounter;this._nameToUniformLocation.forEach((t=>t&&e.decrement(enums/* ResourceType */.vt.Uniform,t))),this._nameToUniformLocation.clear(),this._vShader&&(this._linesOfCode>0&&(e.decrement(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),t.deleteShader(this._vShader),this._vShader=null,e.decrement(enums/* ResourceType */.vt.Shader,this)),this._fShader&&(t.deleteShader(this._fShader),this._fShader=null),this._glName&&(t.deleteProgram(this._glName),this._glName=null,e.decrement(enums/* ResourceType */.vt.Program,this))}ref(){++this._refCount}_getUniformLocation(t){const e=this._nameToUniformLocation.get(t);if(void 0!==e)return e;if(this.glName){const e=this._context.gl.getUniformLocation(this.glName,t);return this._nameToUniformLocation.set(t,e),e&&this._context.instanceCounter.increment(enums/* ResourceType */.vt.Uniform,e),e}return null}hasUniform(t){return null!=this._getUniformLocation(t)}setUniform1i(t,e){Program_l(e);const o=this._nameToUniform1.get(t);void 0!==o&&e===o||(this._context.gl.uniform1i(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1iv(t,e){Program_g(e),Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1iv(this._getUniformLocation(t),e)}setUniform2iv(t,e){Program_g(e),Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2iv(this._getUniformLocation(t),e)}setUniform3iv(t,e){Program_g(e),Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3iv(this._getUniformLocation(t),e)}setUniform4iv(t,e){Program_g(e),Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4iv(this._getUniformLocation(t),e)}setUniform1f(t,e){Program_l(e);const o=this._nameToUniform1.get(t);void 0!==o&&e===o||(this._context.gl.uniform1f(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1fv(t,e){Program_g(e),Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1fv(this._getUniformLocation(t),e)}setUniform2f(t,e,o){Program_l(e,o);const i=this._nameToUniform2.get(t);void 0===i?(this._context.gl.uniform2f(this._getUniformLocation(t),e,o),this._nameToUniform2.set(t,[e,o])):e===i[0]&&o===i[1]||(this._context.gl.uniform2f(this._getUniformLocation(t),e,o),i[0]=e,i[1]=o)}setUniform2fv(t,e){Program_g(e),Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2fv(this._getUniformLocation(t),e)}setUniform3f(t,e,o,i){Program_l(e,o,i);const n=this._nameToUniform3.get(t);void 0===n?(this._context.gl.uniform3f(this._getUniformLocation(t),e,o,i),this._nameToUniform3.set(t,[e,o,i])):e===n[0]&&o===n[1]&&i===n[2]||(this._context.gl.uniform3f(this._getUniformLocation(t),e,o,i),n[0]=e,n[1]=o,n[2]=i)}setUniform3fv(t,e){Program_g(e);const o=this._getUniformLocation(t);null!=o&&Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3fv(o,e)}setUniform4f(t,e,o,i,n){Program_l(e,o,i,n);const r=this._nameToUniform4.get(t);void 0===r?(this._context.gl.uniform4f(this._getUniformLocation(t),e,o,i,n),this._nameToUniform4.set(t,[e,o,i,n])):void 0!==r&&e===r[0]&&o===r[1]&&i===r[2]&&n===r[3]||(this._context.gl.uniform4f(this._getUniformLocation(t),e,o,i,n),r[0]=e,r[1]=o,r[2]=i,r[3]=n)}setUniform4fv(t,e){Program_g(e);const o=this._getUniformLocation(t);null!=o&&Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4fv(o,e)}setUniformMatrix3fv(t,e,o=!1){Program_g(e);const i=this._getUniformLocation(t);null!=i&&Program_c(this._nameToUniformMatrix3,t,e)&&this._context.gl.uniformMatrix3fv(i,o,e)}setUniformMatrix4fv(t,e,o=!1){Program_g(e);const i=this._getUniformLocation(t);null!=i&&Program_c(this._nameToUniformMatrix4,t,e)&&this._context.gl.uniformMatrix4fv(i,o,e)}stop(){}}function Program_h(e,i,n){const r=e.gl,s=r.createShader(i);return r.shaderSource(s,n),r.compileShader(s),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!r.getShaderParameter(s,r.COMPILE_STATUS)&&(console.error("Compile error in ".concat(i===enums/* ShaderType */.Co.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(r.getShaderInfoLog(s)),console.error(Program_m(n))),s}function Program_m(t){let e=2;return t.replaceAll("\n",(()=>"\n"+Program_f(e++)+":"))}function Program_f(t){return t>=1e3?t.toString():("  "+t).slice(-3)}function Program_c(t,e,o){const i=t.get(e);if(!i)return t.set(e,Array.from(o)),!0;const n=o.length;if(i.length!==n)return t.set(e,Array.from(o)),!0;for(let r=0;r<n;++r){const t=o[r];if(i[r]!==t){for(i[r]=t;r<n;++r)i[r]=o[r];return!0}}return!1}const Program_={enabled:!1},Program_l=(0,checkWebGLError/* webglDebugEnabled */.en)()?(...t)=>Program_g(t):()=>{},Program_g=(0,checkWebGLError/* webglDebugEnabled */.en)()?t=>{const e=t.length;for(let o=0;o<e;++o){const e=t[o];Number.isNaN(e)&&console.error(`Got ${e} as uniform value from ${(new Error).stack}`)}}:()=>{};


/***/ }),

/***/ 47476:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_NestedMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80912);
/* harmony import */ var _Program_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(r){this._rctx=r,this._store=new _core_NestedMap_js__WEBPACK_IMPORTED_MODULE_2__/* .NestedMap */ .O}dispose(){this._store.forAll((t=>t.dispose())),this._store.clear()}acquire(t,s,e,o){const i=this._store.get(t,s);if(null!=i)return i.ref(),i;const c=new _Program_js__WEBPACK_IMPORTED_MODULE_1__/* .Program */ .B(this._rctx,t,s,e,o);return c.ref(),this._store.set(t,s,c),c}get test(){}}


/***/ }),

/***/ 50122:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Program_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,t,a=""){return new _Program_js__WEBPACK_IMPORTED_MODULE_0__/* .Program */ .B(e,a+t.shaders.vertexShader,a+t.shaders.fragmentShader,t.attributes)}


/***/ }),

/***/ 74416:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(35644);
/* harmony import */ var _RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17050);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(r,s){this._context=r,this._descriptor=s,this.type=_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_1__/* .FBOAttachmentType */ .d.Renderbuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceType */ .vt.Renderbuffer,this);const i=this._context.gl;this.glName=i.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:n,height:o,internalFormat:h,multisampled:d}=s;d?i.renderbufferStorageMultisample(i.RENDERBUFFER,this.samples,h,n,o):i.renderbufferStorage(i.RENDERBUFFER,h,n,o),this._context.bindRenderbuffer(null)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get usedMemory(){return (0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__/* .estimateMemory */ .e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;this._context.bindRenderbuffer(this),r.multisampled?s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height):s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height),this._context.bindRenderbuffer(null)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceType */ .vt.Renderbuffer,this),this._context=null)}}


/***/ }),

/***/ 17050:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ h),
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(t,i=0,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__/* .getBytesPerElementFormat */ .IB)(i.internalFormat)}


/***/ }),

/***/ 86493:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  e: () => (/* binding */ v)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/time.js
var time = __webpack_require__(60882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/webgl/ContextState.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h{constructor(){this.blend=!1,this.blendColor={r:0,g:0,b:0,a:0},this.blendFunction={srcRGB:enums/* BlendFactor */.dn.ONE,dstRGB:enums/* BlendFactor */.dn.ZERO,srcAlpha:enums/* BlendFactor */.dn.ONE,dstAlpha:enums/* BlendFactor */.dn.ZERO},this.blendEquation={mode:enums/* BlendOperation */.Tb.ADD,modeAlpha:enums/* BlendOperation */.Tb.ADD},this.colorMask={r:!0,g:!0,b:!0,a:!0},this.faceCulling=!1,this.cullFace=enums/* Face */.Y7.BACK,this.frontFace=enums/* CullMode */.Ac.CCW,this.scissorTest=!1,this.scissorRect={x:0,y:0,width:0,height:0},this.depthTest=!1,this.depthFunction=enums/* CompareFunction */.MT.LESS,this.clearDepth=1,this.depthWrite=!0,this.depthRange={zNear:0,zFar:1},this.viewport=null,this.stencilTest=!1,this.polygonOffsetFill=!1,this.polygonOffset=[0,0],this.stencilFunction={face:enums/* Face */.Y7.FRONT_AND_BACK,func:enums/* CompareFunction */.MT.ALWAYS,ref:0,mask:1},this.clearStencil=0,this.stencilWriteMask=1,this.stencilOperation={face:enums/* Face */.Y7.FRONT_AND_BACK,fail:enums/* StencilOperation */.eA.KEEP,zFail:enums/* StencilOperation */.eA.KEEP,zPass:enums/* StencilOperation */.eA.KEEP},this.clearColor={r:0,g:0,b:0,a:0},this.program=null,this.vertexBuffer=null,this.indexBuffer=null,this.uniformBuffer=null,this.pixelPackBuffer=null,this.pixelUnpackBuffer=null,this.copyReadBuffer=null,this.copyWriteBuffer=null,this.transformFeedbackBuffer=null,this.uniformBufferBindingPoints=new Array,this.transformBufferBindingPoints=new Array,this.readFramebuffer=null,this.drawFramebuffer=null,this.drawBuffers={defaultFramebuffer:[enums/* SpecialDrawBuffers */.Hr.BACK],fbos:new WeakMap},this.renderbuffer=null,this.activeTexture=0,this.textureUnitMap=new Array,this.vertexArrayObject=null}}

;// ../node_modules/@arcgis/core/views/webgl/AllocationTracer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e){this._objectType=e,this._active=new Map}get _stack(){const e=(new Error).stack.split("\n");return e.shift(),e.shift(),e.shift(),e.join("\n")}add(e){this._active.set(e,new t(this._stack))}remove(e){this._active.delete(e)}addReference(e){const t=this._active.get(e);t&&t.retains.push(this._stack)}removeReference(e){const t=this._active.get(e);t&&t.releases.push(this._stack)}resetLog(){const e=new Map;let t="";this._active.forEach(((s,{usedMemory:r})=>{e.has(s.from)||(e.set(s.from,new Map),s.retains.length>0&&(t+=`  First reference count mismatch:\n  Retain:\n    ${s.retains.join("\n\n    ")}\n\n  Release:    ${s.releases.join("\n\n    ")}\n`));const n=e.get(s.from);n.set(r??0,n.get(r??0)??1)})),this._active.clear();let s=0;const r=new Array;return e.forEach(((e,t)=>{let n=0;e.forEach(((e,t)=>n+=e*t)),e.set(-1,n),s+=n,r.push([t,e])})),e.clear(),r.sort(((e,t)=>t[1].get(-1)-e[1].get(-1))),r.reduce(((e,[t,s])=>{const r=Math.round(s.get(-1)/1024);s.delete(-1);return e+=`  ${r}KB from ${Array.from(s.values()).reduce(((e,t)=>e+t),0)} allocations at ${t}\n`}),`Total ${this._objectType} memory: ${Math.round(s/1024)}KB\n${t}`)}}class t{constructor(e){this.from=e,this.retains=new Array,this.releases=new Array}}

;// ../node_modules/@arcgis/core/views/webgl/InstanceCounter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const InstanceCounter_e={RECORD_ALLOCATIONS:!1};class n{constructor(){for(this._current=new Array,this._allocations=InstanceCounter_e.RECORD_ALLOCATIONS?new e("WebGLObject"):null;this._current.length<enums/* ResourceType */.vt.COUNT;)this._current.push(0)}increment(t,r,e=1){this._current[t]+=e,this._allocations?.add(r)}decrement(t,r,e=1){this._current[t]-=e,this._allocations?.remove(r)}get current(){return this._current}get total(){return this.current.reduce(((t,e,n)=>t+(n<enums/* ResourceType */.vt.UNCOUNTED?e:0)),0)}get resourceInformation(){let t="";if(this.total>0){t+="Live objects:\n";for(let e=0;e<enums/* ResourceType */.vt.COUNT;++e){const n=this._current[e];n>0&&(t+=`${enums/* ResourceType */.vt[e]}: ${n}\n`)}}return t+=this._allocations?.resetLog(),t}}

;// ../node_modules/@arcgis/core/views/webgl/Parameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Parameters_e{constructor(e,t,r){const a=t.textureFilterAnisotropic;this.versionString=e.getParameter(e.VERSION),this.maxVertexTextureImageUnits=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxVertexAttributes=e.getParameter(e.MAX_VERTEX_ATTRIBS);const m=r.maxAnisotropy??1/0;this.maxMaxAnisotropy=a?Math.min(e.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY),m):1,this.maxTextureImageUnits=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxPreferredTexturePixels=r.maxPreferredTexturePixels??1/0,this.maxRenderbufferSize=e.getParameter(e.MAX_RENDERBUFFER_SIZE),this.maxViewportDims=e.getParameter(e.MAX_VIEWPORT_DIMS),this.maxUniformBufferBindings=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS),this.maxVertexUniformBlocks=e.getParameter(e.MAX_VERTEX_UNIFORM_BLOCKS),this.maxFragmentUniformBlocks=e.getParameter(e.MAX_FRAGMENT_UNIFORM_BLOCKS),this.maxUniformBlockSize=e.getParameter(e.MAX_UNIFORM_BLOCK_SIZE),this.uniformBufferOffsetAlignment=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT),this.maxArrayTextureLayers=e.getParameter(e.MAX_ARRAY_TEXTURE_LAYERS),this.maxSamples=e.getParameter(e.MAX_SAMPLES),this.maxDrawBuffers=e.getParameter(e.MAX_DRAW_BUFFERS)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ProgramCache.js
var ProgramCache = __webpack_require__(47476);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Util.js
var Util = __webpack_require__(19282);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
;// ../node_modules/@arcgis/core/views/webgl/AppleAmdDriverHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AppleAmdDriverHelper_n{constructor(r){this._rctx=r,this._indexBuffer=this._createIndexbuffer(),this._program=this._createHelperProgram()}static getShaderSources(){return{vertex:"#version 300 es\n    precision highp float;\n\n    void main(void) {\n      gl_Position = vec4(0.0, 0.0, float(gl_VertexID)-2.0, 1.0);\n    }",fragment:"#version 300 es\n    precision highp float;\n\n    out vec4 fragColor;\n\n    void main(void) {\n      fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    }"}}_createHelperProgram(){const r=AppleAmdDriverHelper_n.getShaderSources();return this._rctx.programCache.acquire(r.vertex,r.fragment,new Map([]))}_createIndexbuffer(){return BufferObject/* BufferObject */.g.createIndex(this._rctx,enums/* Usage */._U.STATIC_DRAW,new Uint32Array([0]))}run(){this._program.compiled&&this._indexBuffer&&(this._rctx.bindVAO(null),this._rctx.useProgram(this._program),this._rctx.bindBuffer(this._indexBuffer,enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER),this._rctx.drawElements(enums/* PrimitiveType */.WR.POINTS,1,enums/* DataType */.pe.UNSIGNED_INT,0))}dispose(){this._program.dispose(),this._indexBuffer.dispose()}get test(){}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/WebGLDriverTestModule.js
var WebGLDriverTestModule = __webpack_require__(68455);
;// ../node_modules/@arcgis/core/views/webgl/testAppleAmdDrawArrays.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d extends WebGLDriverTestModule/* WebGLDriverTestModule */._{constructor(e){super(),this._rctx=e,this._helperProgram=null,(0,has/* default */.A)("mac")&&(0,has/* default */.A)("chrome")&&(this._program=this._prepareProgram(),this._helperProgram=this._prepareHelperProgram())}dispose(){super.dispose(),this._helperProgram?.dispose(),this._helperProgram=null}_test(e){const r=this._rctx,f=r.getBoundFramebufferObject(),{x:d,y:h,width:u,height:_}=r.getViewport();r.resetState();const v=new TextureDescriptor/* TextureDescriptor */.R(1);v.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,v.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST;const P=new FramebufferObject/* FramebufferObject */.H(r,v),w=BufferObject/* BufferObject */.g.createIndex(this._rctx,enums/* Usage */._U.STATIC_DRAW,new Uint8Array([0]));r.bindFramebuffer(P),r.setViewport(0,0,1,1),r.useProgram(this._helperProgram),r.bindBuffer(w,enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER),r.drawElements(enums/* PrimitiveType */.WR.POINTS,1,enums/* DataType */.pe.UNSIGNED_BYTE,0),r.useProgram(e),r.bindVAO(null),r.drawArrays(enums/* PrimitiveType */.WR.TRIANGLES,0,258);const x=new Uint8Array(4);return P.readPixels(0,0,1,1,enums/* PixelFormat */.Ab.RGBA,enums/* PixelType */.ld.UNSIGNED_BYTE,x),r.setViewport(d,h,u,_),r.bindFramebuffer(f),P.dispose(),w.dispose(),255===x[0]}_prepareProgram(){const r=85,t=`#version 300 es\n    precision highp float;\n\n    out float triangleId;\n\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\n\n    void main(void) {\n      triangleId = floor(float(gl_VertexID)/3.0);\n\n      vec3 position = triangleVertices[gl_VertexID % 3];\n      float offset = triangleId / ${glsl/* glsl */.H.float(r)};\n      position.z = 0.5 - offset;\n\n      gl_Position = vec4(position, 1.0);\n    }\n    `,o=`#version 300 es\n    precision highp float;\n\n    in float triangleId;\n\n    out vec4 fragColor;\n\n    void main(void) {\n      fragColor = triangleId == ${glsl/* glsl */.H.float(r)} ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\n    }\n    `;return this._rctx.programCache.acquire(t,o,new Map([]))}_prepareHelperProgram(){const e=AppleAmdDriverHelper_n.getShaderSources();return this._rctx.programCache.acquire(e.vertex,e.fragment,new Map([]))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js
var VertexElementDescriptor = __webpack_require__(69955);
;// ../node_modules/@arcgis/core/views/webgl/testFloatBufferBlend.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class g extends WebGLDriverTestModule/* WebGLDriverTestModule */._{constructor(e){if(super(),this._rctx=e,!e.gl)return;if(!(e.capabilities.colorBufferFloat?.textureFloat&&e.capabilities.colorBufferFloat?.floatBlend))return;const r="\n    precision highp float;\n    attribute vec2 a_pos;\n\n    void main() {\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ",t="\n     precision highp float;\n\n     void main() {\n      gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\n     }\n    ";this._program=e.programCache.acquire(r,t,new Map([["a_pos",0]]))}_test(d){const g=this._rctx,_=new TextureDescriptor/* TextureDescriptor */.R(1);_.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,_.dataType=enums/* PixelType */.ld.FLOAT,_.internalFormat=enums/* SizedPixelFormat */.H0.RGBA32F,_.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST;const w=new FramebufferObject/* FramebufferObject */.H(g,_),A=BufferObject/* BufferObject */.g.createVertex(g,enums/* Usage */._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),T=new VertexArrayObject/* VertexArrayObject */.Z(g,new Map([["a_pos",0]]),new Map([["geometry",[new VertexElementDescriptor/* VertexElementDescriptor */._("a_pos",2,enums/* DataType */.pe.UNSIGNED_SHORT,0,4)]]]),new Map([["geometry",A]]));g.gl.getError(),g.useProgram(d);const j=g.getBoundFramebufferObject(),{x,y:E,width:h,height:F}=g.getViewport();g.bindFramebuffer(w),g.setViewport(0,0,1,1),g.bindVAO(T),g.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4);const O=(0,renderState/* makePipelineState */.Ey)({blending:renderState/* destinationTimesOneMinusSourceAlpha */.iD});g.setPipelineState(O),g.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4);const y=g.gl.getError();return g.setViewport(x,E,h,F),g.bindFramebuffer(j),T.dispose(),w.dispose(),y!==enums/* ErrorConstant */.bh.INVALID_OPERATION||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/testSVGPremultipliedAlpha.js
var testSVGPremultipliedAlpha = __webpack_require__(38646);
;// ../node_modules/@arcgis/core/views/webgl/WebGLDriverTest.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(r){this.rctx=r,this.floatBufferBlend=new g(r),this.svgPremultipliesAlpha=new testSVGPremultipliedAlpha/* SVGPremultipliedAlpha */.H(r),this.drawArraysRequiresIndicesTypeReset=new d(r)}dispose(){this.svgPremultipliesAlpha.dispose(),this.floatBufferBlend.dispose(),this.drawArraysRequiresIndicesTypeReset.dispose()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/capabilities/DebugRendererInfo.js
var DebugRendererInfo = __webpack_require__(33155);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/capabilities/DisjointTimerQuery.js
var DisjointTimerQuery = __webpack_require__(99756);
;// ../node_modules/@arcgis/core/views/webgl/capabilities/load.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function load_(_,E){if(E.compressedTextureETC)return null;const R=_.getExtension("WEBGL_compressed_texture_etc");return R?{COMPRESSED_R11_EAC:R.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:R.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:R.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:R.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:R.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:R.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:R.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:R.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:R.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:R.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}function E(_,E){if(E.compressedTextureS3TC)return null;const R=_.getExtension("WEBGL_compressed_texture_s3tc");return R?{COMPRESSED_RGB_S3TC_DXT1:R.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:R.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:R.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:R.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}function R(_,E){if(E.textureFilterAnisotropic)return null;const R=_.getExtension("EXT_texture_filter_anisotropic")||_.getExtension("MOZ_EXT_texture_filter_anisotropic")||_.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return R?{MAX_TEXTURE_MAX_ANISOTROPY:R.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:R.TEXTURE_MAX_ANISOTROPY_EXT}:null}function load_t(_,E){const R=!E.colorBufferHalfFloat&&_.getExtension("EXT_color_buffer_half_float")||!E.colorBufferFloat&&_.getExtension("EXT_color_buffer_float"),t=!E.colorBufferFloat&&_.getExtension("EXT_color_buffer_float"),S=!E.floatBlend&&!E.colorBufferFloat&&_.getExtension("EXT_float_blend");return R||t||S?{textureFloat:!!t,textureHalfFloat:!!R,floatBlend:!!S,R16F:_.R16F,RG16F:_.RG16F,RGBA16F:_.RGBA16F,R32F:_.R32F,RG32F:_.RG32F,RGBA32F:_.RGBA32F,R11F_G11F_B10F:_.R11F_G11F_B10F,RGB16F:_.RGB16F}:null}function S(_,E,R,t,S){if(t)return!0;if(E[R])return!1;for(const e of S)if(_.getExtension(e))return!0;return!1}function load_e(_,E){if(E.textureNorm16)return null;const R=_.getExtension("EXT_texture_norm16");return R?{R16:R.R16_EXT,RG16:R.RG16_EXT,RGB16:R.RGB16_EXT,RGBA16:R.RGBA16_EXT,R16_SNORM:R.R16_SNORM_EXT,RG16_SNORM:R.RG16_SNORM_EXT,RGB16_SNORM:R.RGB16_SNORM_EXT,RGBA16_SNORM:R.RGBA16_SNORM_EXT}:null}

;// ../node_modules/@arcgis/core/views/webgl/capabilities/LoseContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function LoseContext_e(e,t){const n=t.loseContext&&e.getExtension("WEBGL_lose_context");return n?{loseRenderingContext:()=>n.loseContext()}:null}

;// ../node_modules/@arcgis/core/views/webgl/capabilities/Capabilities.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class _{constructor(e,t){this._gl=e,this._compressedTextureETC=null,this._compressedTextureS3TC=null,this._textureFilterAnisotropic=null,this._colorBufferFloat=null,this._loseContext=null,this._textureNorm16=null,this._textureFloatLinear=null,this._parallelShaderCompile=null,this._rendererInfo=null,this._disabledExtensions=t.disabledExtensions||{},this._debugWebGLExtensions=t.debugWebGLExtensions||{}}get compressedTextureETC(){return this._compressedTextureETC??=load_(this._gl,this._disabledExtensions),this._compressedTextureETC}get compressedTextureS3TC(){return this._compressedTextureS3TC??=E(this._gl,this._disabledExtensions),this._compressedTextureS3TC}get textureFilterAnisotropic(){return this._textureFilterAnisotropic??=R(this._gl,this._disabledExtensions),this._textureFilterAnisotropic}get disjointTimerQuery(){return this._disjointTimerQuery??=(0,DisjointTimerQuery/* createDisjointTimerQuery */._R)(this._gl,this._disabledExtensions),this._disjointTimerQuery}get colorBufferFloat(){return this._colorBufferFloat??=load_t(this._gl,this._disabledExtensions),this._colorBufferFloat}get textureNorm16(){return this._textureNorm16??=load_e(this._gl,this._disabledExtensions),this._textureNorm16}get textureFloatLinear(){return this._textureFloatLinear??=S(this._gl,this._disabledExtensions,"textureFloatLinear",!1,["OES_texture_float_linear"]),this._textureFloatLinear}get parallelShaderCompile(){return this._parallelShaderCompile??=S(this._gl,this._disabledExtensions,"parallelShaderCompile",!1,["KHR_parallel_shader_compile"]),this._parallelShaderCompile}get loseContext(){return this._loseContext??=LoseContext_e(this._gl,this._debugWebGLExtensions),this._loseContext}get rendererInfo(){return this._rendererInfo??=(0,DebugRendererInfo/* loadRendererInfo */.M)(this._gl),this._rendererInfo}enable(e){return this[e]}}

;// ../node_modules/@arcgis/core/views/webgl/RenderingContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let v=class{constructor(t,e){this.gl=t,this.instanceCounter=new n,this.programCache=new ProgramCache/* ProgramCache */.J(this),this._transformFeedbackRequestInfo=null,this._state=new h,this._numOfDrawCalls=0,this._numOfTriangles=0,this.configure(e)}configure(e){this._capabilities=new _(this.gl,e),this._parameters=new Parameters_e(this.gl,this._capabilities,e),Texture/* Texture */.g.TEXTURE_UNIT_FOR_UPDATES=this._parameters.maxTextureImageUnits-1;const s=this.gl.getParameter(this.gl.VIEWPORT);this._state=new h,this._state.viewport={x:s[0],y:s[1],width:s[2],height:s[3]},this._stateTracker=new renderState/* StateTracker */.Ms({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const s=t.operation;this.setStencilOp(s.fail,s.zFail,s.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)},setDrawBuffers:t=>{if(t)this.setDrawBuffers(t.buffers);else{const{drawFramebuffer:t}=this._state;null===t?this.setDrawBuffers([enums/* SpecialDrawBuffers */.Hr.BACK]):0===t.colorAttachments.length?this.setDrawBuffers([enums/* SpecialDrawBuffers */.Hr.NONE]):this.setDrawBuffers([enums/* ColorAttachment0 */.r6])}}}),this.enforceState(),(0,maybe/* disposeMaybe */.WD)(this._driverTest),this._driverTest=new r(this)}updateOptions(t){this._parameters=new Parameters_e(this.gl,this._capabilities,t)}dispose(){(0,maybe/* disposeMaybe */.WD)(this._driverTest),this.programCache.dispose(),this.bindVAO(null),this.unbindBuffer(enums/* BufferType */.NZ.ARRAY_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(enums/* BufferType */.NZ.PIXEL_PACK_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.PIXEL_UNPACK_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.COPY_READ_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.COPY_WRITE_BUFFER),this._state.textureUnitMap.length=0,(0,checkWebGLError/* webglDebugEnabled */.en)()&&console.log(this.instanceCounter.resourceInformation)}get driverTest(){return this._driverTest}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._state.blend!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=t,this._stateTracker.invalidateBlending())}externalProgramUpdate(){this._state.program?.stop(),this._state.program=null}externalTextureUnitUpdate(t,e){for(let s=0;s<t.length;++s)this._state.textureUnitMap[t[s]]=null;e>=0&&(this._state.activeTexture=e)}externalVertexArrayObjectUpdate(){this.gl.bindVertexArray(null),this._state.vertexArrayObject=null,this._state.vertexBuffer=null,this._state.indexBuffer=null}externalVertexBufferUpdate(){this._state.vertexBuffer=null}externalIndexBufferUpdate(){this._state.indexBuffer=null}setBlendColor(t,e,s,i){t===this._state.blendColor.r&&e===this._state.blendColor.g&&s===this._state.blendColor.b&&i===this._state.blendColor.a||(this.gl.blendColor(t,e,s,i),this._state.blendColor.r=t,this._state.blendColor.g=e,this._state.blendColor.b=s,this._state.blendColor.a=i,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._state.blendFunction.srcRGB&&e===this._state.blendFunction.dstRGB||(this.gl.blendFunc(t,e),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=t,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,s,i){this._state.blendFunction.srcRGB===t&&this._state.blendFunction.srcAlpha===s&&this._state.blendFunction.dstRGB===e&&this._state.blendFunction.dstAlpha===i||(this.gl.blendFuncSeparate(t,e,s,i),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=s,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=i,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._state.blendEquation.mode!==t&&(this.gl.blendEquation(t),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._state.blendEquation.mode===t&&this._state.blendEquation.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,s,i){this._state.colorMask.r===t&&this._state.colorMask.g===e&&this._state.colorMask.b===s&&this._state.colorMask.a===i||(this.gl.colorMask(t,e,s,i),this._state.colorMask.r=t,this._state.colorMask.g=e,this._state.colorMask.b=s,this._state.colorMask.a=i,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,s,i){this._state.clearColor.r===t&&this._state.clearColor.g===e&&this._state.clearColor.b===s&&this._state.clearColor.a===i||(this.gl.clearColor(t,e,s,i),this._state.clearColor.r=t,this._state.clearColor.g=e,this._state.clearColor.b=s,this._state.clearColor.a=i)}setFaceCullingEnabled(t){this._state.faceCulling!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._state.polygonOffsetFill!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._state.polygonOffset[0]===t&&this._state.polygonOffset[1]===e||(this._state.polygonOffset[0]=t,this._state.polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._state.cullFace!==t&&(this.gl.cullFace(t),this._state.cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._state.frontFace!==t&&(this.gl.frontFace(t),this._state.frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._state.scissorTest!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=t)}setScissorRect(t,e,s,i){this._state.scissorRect.x===t&&this._state.scissorRect.y===e&&this._state.scissorRect.width===s&&this._state.scissorRect.height===i||(this.gl.scissor(t,e,s,i),this._state.scissorRect.x=t,this._state.scissorRect.y=e,this._state.scissorRect.width=s,this._state.scissorRect.height=i)}setDepthTestEnabled(t){this._state.depthTest!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._state.clearDepth!==t&&(this.gl.clearDepth(t),this._state.clearDepth=t)}setDepthFunction(t){this._state.depthFunction!==t&&(this.gl.depthFunc(t),this._state.depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._state.depthWrite!==t&&(this.gl.depthMask(t),this._state.depthWrite=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._state.depthRange.zNear===t&&this._state.depthRange.zFar===e||(this.gl.depthRange(t,e),this._state.depthRange.zNear=t,this._state.depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._state.stencilTest!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._state.clearStencil&&(this.gl.clearStencil(t),this._state.clearStencil=t)}setStencilFunction(t,e,s){this._state.stencilFunction.func===t&&this._state.stencilFunction.ref===e&&this._state.stencilFunction.mask===s||(this.gl.stencilFunc(t,e,s),this._state.stencilFunction.face=enums/* Face */.Y7.FRONT_AND_BACK,this._state.stencilFunction.func=t,this._state.stencilFunction.ref=e,this._state.stencilFunction.mask=s,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,s,i){this._state.stencilFunction.face===t&&this._state.stencilFunction.func===e&&this._state.stencilFunction.ref===s&&this._state.stencilFunction.mask===i||(this.gl.stencilFuncSeparate(t,e,s,i),this._state.stencilFunction.face=t,this._state.stencilFunction.func=e,this._state.stencilFunction.ref=s,this._state.stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._state.stencilWriteMask!==t&&(this.gl.stencilMask(t),this._state.stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,s){this._state.stencilOperation.face===enums/* Face */.Y7.FRONT_AND_BACK&&this._state.stencilOperation.fail===t&&this._state.stencilOperation.zFail===e&&this._state.stencilOperation.zPass===s||(this.gl.stencilOp(t,e,s),this._state.stencilOperation.face=enums/* Face */.Y7.FRONT_AND_BACK,this._state.stencilOperation.fail=t,this._state.stencilOperation.zFail=e,this._state.stencilOperation.zPass=s,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,s,i){this._state.stencilOperation.face===t&&this._state.stencilOperation.fail===e&&this._state.stencilOperation.zFail===s&&this._state.stencilOperation.zPass===i||(this.gl.stencilOpSeparate(t,e,s,i),this._state.stencilOperation.face=t,this._state.stencilOperation.fail=e,this._state.stencilOperation.zFail=s,this._state.stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setActiveTexture(t,e=!1){const s=this._state.activeTexture;return t>=0&&(e||t!==this._state.activeTexture)&&(this.gl.activeTexture(enums/* baseTextureUnit */.xM+t),this._state.activeTexture=t),s}setDrawBuffers(t){const{drawFramebuffer:e}=this._state,s=null===e,i=s?this._state.drawBuffers.defaultFramebuffer:this._state.drawBuffers.fbos.get(e);if(i?.length!==t.length||!i.every(((e,s)=>e===t[s])))if(t.length>this.parameters.maxDrawBuffers)console.error("Setting more active draw buffers than GL.MAX_DRAW_BUFFERS allows.");else{if(s){if(t.length>1)return void console.error("The default framebuffer can only have one active draw buffer.");if(t[0]!==enums/* SpecialDrawBuffers */.Hr.BACK&&t[0]!==enums/* SpecialDrawBuffers */.Hr.NONE)return void console.error("The default framebuffer can only use the constants GL.BACK or GL.NONE as draw buffers.")}s||!t.includes(enums/* SpecialDrawBuffers */.Hr.BACK)?(this.gl.drawBuffers(t),s?this._state.drawBuffers.defaultFramebuffer=t:this._state.drawBuffers.fbos.set(e,t),this._stateTracker.invalidateDrawBuffers()):console.error("A framebuffer object can only use the constants GL.COLOR_ATTACHMENTi or GL.NONE as draw buffers.")}}clear(t,e=255){if(t){if(t&enums/* FramebufferBit */.NV.COLOR){const t=this._state.drawFramebuffer?.colorAttachments;t&&this.setDrawBuffers(t),this.setColorMask(!0,!0,!0,!0)}t&enums/* FramebufferBit */.NV.DEPTH&&this.setDepthWriteEnabled(!0),t&enums/* FramebufferBit */.NV.STENCIL&&this.setStencilWriteMask(e),this.gl.clear(t)}}clearFramebuffer(t,e=!1,s=!1){let i=0;if(t){const e=1e-13,s=Math.max(e,t[3]);this.setClearColor(t[0],t[1],t[2],s),i|=enums/* FramebufferBit */.NV.COLOR}e&&(i|=enums/* FramebufferBit */.NV.DEPTH),!1===s?s=0:(!0===s&&(s=255),i|=enums/* FramebufferBit */.NV.STENCIL),i&&this.clear(i,s)}clearBuffer(t,e,s=enums/* BufferContent */.ui.COLOR,i=void 0){this.gl.clearBufferfv(s,t,e,i)}clearBufferInteger(t,e,s=enums/* BufferContent */.ui.COLOR,i=void 0){this.gl.clearBufferiv(s,t,e,i)}clearBufferUnsignedInteger(t,e,s=enums/* BufferContent */.ui.COLOR,i=void 0){this.gl.clearBufferuiv(s,t,e,i)}drawArrays(t,e,s){if(this._transformFeedbackRequestInfo){if(t!==this._transformFeedbackRequestInfo.primitiveType)throw new Error("DrawArrays called during transform feedback, but primitiveType does not match that of the current transform feedback request");if(null==this._state.program?.hasTransformFeedbackVaryings)throw new Error("DrawArrays called during transform feedback, but the shader program was not linked with a transform feedback varying")}if((0,checkWebGLError/* webglDebugEnabled */.en)()&&(this._numOfDrawCalls++,this._numOfTriangles+=D(t,s),(0,has/* default */.A)("enable-feature:webgl-debug:textureReadWrite"))){const t=this._state.textureUnitMap;for(let e=0;e<t.length;e++){const s=t[e];if(null!=s&&s===this._state.drawFramebuffer?.colorTexture)throw new Error(`Detected readWrite. Texture already bound at index ${e}`)}}this.gl.drawArrays(t,e,s),(0,checkWebGLError/* checkWebGLError */.Y2)(this.gl)}drawArraysInstanced(t,e,s,i){this.gl.drawArraysInstanced(t,e,s,i),(0,checkWebGLError/* checkWebGLError */.Y2)(this.gl)}drawElements(t,e,s,a){if(this._transformFeedbackRequestInfo)throw new Error("Cannot called drawElements during a transform feedback request");if((0,checkWebGLError/* webglDebugEnabled */.en)()&&(this._numOfDrawCalls++,this._numOfTriangles+=D(t,e)),this.gl.drawElements(t,e,s,a),(0,checkWebGLError/* webglDebugEnabled */.en)()){const i=(0,Util/* getErrorString */.WH)(this);if(i){const r=this.getBoundVAO(),n=r?.indexBuffer,l=r?.vertexBuffers,h={indexBuffer:n,vertexBuffers:l},f={mode:t,count:e,type:s,offset:a},o=n?.size??0,u=a+e,c=o<u?`. Buffer is too small. Attempted to draw index ${u} of ${o}`:"";console.error(`drawElements: ${i}${c}`,{args:f,vao:h})}}}drawElementsInstanced(t,e,s,i,r){this.gl.drawElementsInstanced(t,e,s,i,r),(0,checkWebGLError/* checkWebGLError */.Y2)(this.gl)}logInfo(){(0,checkWebGLError/* webglDebugEnabled */.en)()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}resetInfo(){(0,checkWebGLError/* webglDebugEnabled */.en)()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}get capabilities(){return this._capabilities}setViewport(t,e,s,i){s=Math.max(Math.round(s),1),i=Math.max(Math.round(i),1);const a=this._state.viewport;a.x===t&&a.y===e&&a.width===s&&a.height===i||(a.x=t,a.y=e,a.width=s,a.height=i,this.gl.viewport(t,e,s,i))}setViewport4fv(t){this.setViewport(t[0],t[1],t[2],t[3])}restoreViewport({x:t,y:e,width:s,height:i}){this.setViewport(t,e,s,i)}getViewport(){const t=this._state.viewport;return{x:t.x,y:t.y,width:t.width,height:t.height}}useProgram(t){this._state.program!==t&&(this._state.program?.stop(),this._state.program=t,this.gl.useProgram(t?.glName??null))}bindTexture(t,e,s=!1){(e>=this.parameters.maxTextureImageUnits||e<0)&&console.error("Input texture unit is out of range of available units!");const i=this._state.textureUnitMap[e];return null==t?.glName?(null!=i&&(this.setActiveTexture(e,s),this.gl.bindTexture(i.descriptor.target,null)),this._state.textureUnitMap[e]=null,i):s||i!==t?(this.setActiveTexture(e,s),this.gl.bindTexture(t.descriptor.target,t.glName),t.applyChanges(),this._state.textureUnitMap[e]=t,i):(t.isDirty&&(this.setActiveTexture(e,s),t.applyChanges()),i)}unbindTexture(t){if(null!=t)for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this._state.textureUnitMap[e]===t&&(this.bindTexture(null,e),this._state.textureUnitMap[e]=null)}bindFramebuffer(t,e=!1){if(e||this._state.readFramebuffer!==t||this._state.drawFramebuffer!==t){if(this._stateTracker.invalidateDrawBuffers(),null==t)return this.gl.bindFramebuffer(enums/* FramebufferTarget */.R.FRAMEBUFFER,null),void(this._state.readFramebuffer=this._state.drawFramebuffer=null);t.initializeAndBind(enums/* FramebufferTarget */.R.FRAMEBUFFER),this._state.readFramebuffer=t,this._state.drawFramebuffer=t}}bindFramebufferSeparate(t,e,s=!1){const i=e===enums/* FramebufferTarget */.R.READ_FRAMEBUFFER,a=i?this._state.readFramebuffer:this._state.drawFramebuffer;(s||a!==t)&&(null==t?this.gl.bindFramebuffer(e,null):t.initializeAndBind(e),i?this._state.readFramebuffer=t??null:(this._stateTracker.invalidateDrawBuffers(),this._state.drawFramebuffer=t??null))}blitFramebuffer(t,e,s=enums/* FramebufferBit */.NV.COLOR,i=enums/* TextureSamplingMode */.Cj.NEAREST,a=0,r=0,n=t.width,l=t.height,h=0,f=0,o=e.width,c=e.height){this.bindFramebufferSeparate(t,enums/* FramebufferTarget */.R.READ_FRAMEBUFFER,!0),this.bindFramebufferSeparate(e,enums/* FramebufferTarget */.R.DRAW_FRAMEBUFFER,!0),this.gl.blitFramebuffer(a,r,n,l,h,f,o,c,s,i)}bindBuffer(t,e){if(t)switch(e??=t.bufferType,e){case enums/* BufferType */.NZ.ARRAY_BUFFER:this._state.vertexBuffer=N(this.gl,t,e,this._state.vertexBuffer);break;case enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=N(this.gl,t,e,this._state.indexBuffer);break;case enums/* BufferType */.NZ.UNIFORM_BUFFER:this._state.uniformBuffer=N(this.gl,t,e,this._state.uniformBuffer);break;case enums/* BufferType */.NZ.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=N(this.gl,t,e,this._state.pixelPackBuffer);break;case enums/* BufferType */.NZ.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=N(this.gl,t,e,this._state.pixelUnpackBuffer);break;case enums/* BufferType */.NZ.COPY_READ_BUFFER:this._state.copyReadBuffer=N(this.gl,t,e,this._state.copyReadBuffer);break;case enums/* BufferType */.NZ.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=N(this.gl,t,e,this._state.copyWriteBuffer);break;case enums/* BufferType */.NZ.TRANSFORM_FEEDBACK_BUFFER:this._state.transformFeedbackBuffer=N(this.gl,t,e,this._state.transformFeedbackBuffer)}}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._state.renderbuffer=null),this._state.renderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._state.renderbuffer=t)}_getBufferBinding(t,e){if(e>=this.parameters.maxUniformBufferBindings||e<0)return console.error("Uniform buffer binding point is out of range!"),null;const s=t===enums/* BufferType */.NZ.UNIFORM_BUFFER?this._state.uniformBufferBindingPoints:this._state.transformBufferBindingPoints;let i=s[e];return null==i&&(i={buffer:null,offset:0,size:0},s[e]=i),i}bindBufferBase(t,e,s){const i=this._getBufferBinding(t,e);null!=i&&(i.buffer===s&&0===i.offset&&0===i.size||(this.gl.bindBufferBase(t,e,s?s.glName:null),i.buffer=s,i.offset=0,i.size=0))}bindBufferRange(t,e,s,i,a){const r=this._getBufferBinding(t,e);null!=r&&(r.buffer===s&&r.offset===i&&r.size===a||(i%this._parameters.uniformBufferOffsetAlignment===0?(this.gl.bindBufferRange(t,e,s.glName,i,a),r.buffer=s,r.offset=i,r.size=a):console.error("Uniform buffer binding offset is not a multiple of the context offset alignment")))}bindUBO(t,e,s,a){null!=e?((0,checkWebGLError/* webglDebugEnabled */.en)()&&(a??e.byteLength)>this._parameters.maxUniformBlockSize&&console.error("Attempting to bind more data than the maximum uniform block size"),e.initialize(),void 0!==s&&void 0!==a?this.bindBufferRange(enums/* BufferType */.NZ.UNIFORM_BUFFER,t,e.buffer,s,a):this.bindBufferBase(enums/* BufferType */.NZ.UNIFORM_BUFFER,t,e.buffer)):this.bindBufferBase(enums/* BufferType */.NZ.UNIFORM_BUFFER,t,null)}unbindUBO(t){for(let e=0,s=this._state.uniformBufferBindingPoints.length;e<s;e++){const s=this._state.uniformBufferBindingPoints[e];null!=s&&s.buffer===t.buffer&&this.bindBufferBase(enums/* BufferType */.NZ.UNIFORM_BUFFER,e,null)}}unbindBuffer(t){switch(t){case enums/* BufferType */.NZ.ARRAY_BUFFER:this._state.vertexBuffer=N(this.gl,null,t,this._state.vertexBuffer);break;case enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=N(this.gl,null,t,this._state.indexBuffer);break;case enums/* BufferType */.NZ.UNIFORM_BUFFER:this._state.uniformBuffer=N(this.gl,null,t,this._state.uniformBuffer);break;case enums/* BufferType */.NZ.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=N(this.gl,null,t,this._state.pixelPackBuffer);break;case enums/* BufferType */.NZ.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=N(this.gl,null,t,this._state.pixelUnpackBuffer);break;case enums/* BufferType */.NZ.COPY_READ_BUFFER:this._state.copyReadBuffer=N(this.gl,null,t,this._state.copyReadBuffer);break;case enums/* BufferType */.NZ.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=N(this.gl,null,t,this._state.copyWriteBuffer)}}bindVAO(t=null){null!=t?this._state.vertexArrayObject!==t&&(t.bind(),this._state.vertexArrayObject=t):this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null)}bindTransformFeedback(t){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,t.glName)}beginTransformFeedback(t,e){if(this._transformFeedbackRequestInfo)throw new Error("Already in a transform feedback request");const{gl:s}=this;s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,t.glName),s.beginTransformFeedback(e),this._transformFeedbackRequestInfo={primitiveType:e}}endTransformFeedback(){if(!this._transformFeedbackRequestInfo)throw new Error("Not in a transform feedback request");const{gl:t}=this;t.endTransformFeedback(),t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),this._transformFeedbackRequestInfo=null}async clientWaitAsync(t=(0,time/* Milliseconds */.l5)(10)){const{gl:i}=this,a=i.fenceSync(enums/* SyncCondition */.tx.SYNC_GPU_COMMANDS_COMPLETE,0);if(!a)throw new Error("Client wait failed, could not create sync object");let r;this.instanceCounter.increment(enums/* ResourceType */.vt.Sync,a),i.flush();do{await (0,promiseUtils/* after */.Pl)(t),r=i.clientWaitSync(a,0,0)}while(r===enums/* ClientWaitSyncStatus */.sS.TIMEOUT_EXPIRED);if(this.instanceCounter.decrement(enums/* ResourceType */.vt.Sync,a),i.deleteSync(a),r===enums/* ClientWaitSyncStatus */.sS.WAIT_FAILED)throw new Error("Client wait failed")}getBoundFramebufferObject(t=enums/* FramebufferTarget */.R.FRAMEBUFFER){return t===enums/* FramebufferTarget */.R.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer}temporaryBindFramebufferObject(t,e,s=!1){const i=this.getBoundFramebufferObject();try{this.bindFramebuffer(t,s),e()}finally{this.bindFramebuffer(i,s)}}getBoundVAO(){return this._state.vertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null,!0),this.unbindBuffer(enums/* BufferType */.NZ.ARRAY_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(enums/* BufferType */.NZ.PIXEL_PACK_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.PIXEL_UNPACK_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.COPY_READ_BUFFER),this.unbindBuffer(enums/* BufferType */.NZ.COPY_WRITE_BUFFER);for(let t=0;t<this.parameters.maxTextureImageUnits;++t)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ZERO),this.setBlendEquation(enums/* BlendOperation */.Tb.ADD),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(enums/* Face */.Y7.BACK),this.setFrontFace(enums/* CullMode */.Ac.CCW),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(enums/* CompareFunction */.MT.LESS),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,0,0),this.setStencilOp(enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.KEEP),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setDrawBuffers([enums/* SpecialDrawBuffers */.Hr.BACK]),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){const{gl:t}=this;t.bindVertexArray(null);for(let s=0;s<this.parameters.maxVertexAttributes;s++)t.disableVertexAttribArray(s);this._state.vertexBuffer?t.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.ARRAY_BUFFER,null),this._state.indexBuffer?t.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.ELEMENT_ARRAY_BUFFER,null),this._state.uniformBuffer?t.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.UNIFORM_BUFFER,null);for(let s=0;s<this._parameters.maxUniformBufferBindings;s++){const e=this._state.uniformBufferBindingPoints[s];if(null!=e){const{buffer:i,offset:a,size:r}=e;null!==i?0===a&&0===r?t.bindBufferBase(enums/* BufferType */.NZ.UNIFORM_BUFFER,s,i.glName):t.bindBufferRange(enums/* BufferType */.NZ.UNIFORM_BUFFER,s,i.glName,a,r):t.bindBufferBase(enums/* BufferType */.NZ.UNIFORM_BUFFER,s,null)}}if(this._state.pixelPackBuffer?t.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.PIXEL_PACK_BUFFER,null),this._state.pixelUnpackBuffer?t.bindBuffer(this._state.pixelUnpackBuffer.bufferType,this._state.pixelUnpackBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.PIXEL_UNPACK_BUFFER,null),this._state.copyReadBuffer?t.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.COPY_READ_BUFFER,null),this._state.copyWriteBuffer?t.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):t.bindBuffer(enums/* BufferType */.NZ.COPY_WRITE_BUFFER,null),t.bindFramebuffer(enums/* FramebufferTarget */.R.READ_FRAMEBUFFER,null),t.readBuffer(t.BACK),this._state.readFramebuffer&&(t.bindFramebuffer(enums/* FramebufferTarget */.R.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),t.readBuffer(enums/* ColorAttachment0 */.r6)),t.bindFramebuffer(enums/* FramebufferTarget */.R.DRAW_FRAMEBUFFER,this._state.drawFramebuffer?.glName??null),null===this._state.drawFramebuffer){const e=this._state.drawBuffers.defaultFramebuffer;t.drawBuffers(e??[enums/* SpecialDrawBuffers */.Hr.BACK])}else{const e=this._state.drawBuffers.fbos.get(this._state.drawFramebuffer);t.drawBuffers(e??[enums/* ColorAttachment0 */.r6])}if(this._state.vertexArrayObject){const t=this._state.vertexArrayObject;this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null),this.bindVAO(t)}t.useProgram(this._state.program?.glName??null),t.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a),t.bindRenderbuffer(t.RENDERBUFFER,this._state.renderbuffer?.glName??null),!0===this._state.blend?t.enable(this.gl.BLEND):t.disable(this.gl.BLEND),t.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha),t.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha),t.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a),t.clearDepth(this._state.clearDepth),t.clearStencil(this._state.clearStencil),t.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a),t.cullFace(this._state.cullFace),t.depthFunc(this._state.depthFunction),t.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar),!0===this._state.depthTest?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),t.depthMask(this._state.depthWrite),t.frontFace(this._state.frontFace),t.lineWidth(1),!0===this._state.faceCulling?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),t.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]),!0===this._state.polygonOffsetFill?t.enable(t.POLYGON_OFFSET_FILL):t.disable(t.POLYGON_OFFSET_FILL),t.scissor(this._state.scissorRect.x,this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height),!0===this._state.scissorTest?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),t.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask),t.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass),!0===this._state.stencilTest?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),t.stencilMask(this._state.stencilWriteMask);for(let s=0;s<this.parameters.maxTextureImageUnits;s++){t.activeTexture(enums/* baseTextureUnit */.xM+s),t.bindTexture(enums/* TextureType */.Ap.TEXTURE_2D,null),t.bindTexture(enums/* TextureType */.Ap.TEXTURE_CUBE_MAP,null),t.bindTexture(enums/* TextureType */.Ap.TEXTURE_3D,null),t.bindTexture(enums/* TextureType */.Ap.TEXTURE_2D_ARRAY,null);const e=this._state.textureUnitMap[s];null!=e&&t.bindTexture(e.descriptor.target,e.glName)}t.activeTexture(enums/* baseTextureUnit */.xM+this._state.activeTexture);const e=this._state.viewport;t.viewport(e.x,e.y,e.width,e.height),this.resetInfo()}};function N(t,e,s,i){return e?i!==e&&t.bindBuffer(s,e.glName):t.bindBuffer(s,null),e}function D(t,e){switch(t){case enums/* PrimitiveType */.WR.POINTS:return 2*e;case enums/* PrimitiveType */.WR.TRIANGLES:return e/3;case enums/* PrimitiveType */.WR.TRIANGLE_STRIP:case enums/* PrimitiveType */.WR.TRIANGLE_FAN:return e-2;default:return 0}}


/***/ }),

/***/ 96028:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N5: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports Code, Includes, Main, Stage, Uniforms */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _BindType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11809);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class i extends s{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new h,this.varyings=new m,this.extensions=new _,this.outputs=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e,t=!1){const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),s=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,o=i.uniforms.generateSource(),a=i.code.generateSource(),u=i.main.generateSource(t),c="vertex"===e?g:p,h=i.constants.generateSource(),m=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${h.join("\n")}\n${o.join("\n")}\n${n.join("\n")}\n${s.join("\n")}\n${m.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return t=>{for(let r=0;r<s;++r)n[r](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,i,t,r)}}}class o{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const t of e)this._add(t);return this._stage}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:duplicate-uniform",`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else n().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((({name:e,arraySize:t,type:r})=>null!=t?`uniform ${r} ${e}[${t}];`:`uniform ${r} ${e};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:missing-main","Shader does not contain main function body.");return[]}}class u{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class c extends s{constructor(){super(...arguments),this.uniforms=new o(this),this.main=new a(this),this.code=new u(this),this.constants=new l(this)}get builder(){return this}}class h{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Map}add(e,t,r){this._entries.has(e)?n().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,{type:t,invariant:r?.invariant??!1})}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push((r.invariant&&"vertex"===e?"invariant ":"")+("vertex"===e?"out":"in")+` ${r.type} ${n};`))),t}}class _{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}static{this.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"]}static{this.ALLOWLIST_VERTEX=[]}}class d{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?.name!==e||s?.type!==t?this._entries.set(r,{name:e,type:t}):n().warn(`Fragment shader output location ${r} occupied`)}static{this.DEFAULT_TYPE="vec4"}static{this.DEFAULT_NAME="fragColor"}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:d.DEFAULT_NAME,type:d.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}class l{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=l._numberToFloatStr(r);break;case"int":n=l._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])},                            ${l._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"uvec2":n=`uvec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"uvec3":n=`uvec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"uvec4":n=`uvec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>l._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const p="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n  precision highp usampler2D;\n  precision highp sampler2DArray;\n  precision highp sampler2DShadow;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n  precision mediump usampler2D;\n  precision mediump sampler2DArray;\n  precision mediump sampler2DShadow;\n#endif",g="precision highp float;\n precision highp sampler2D;\n precision highp usampler2D;\n precision highp sampler2DArray;\n precision highp sampler2DShadow;\n\n\n invariant gl_Position;\n ";


/***/ }),

/***/ 29638:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e){this._readFile=e}resolveIncludes(e){return this._resolve(e)}_resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this._read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h="";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?"":this._resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}_read(e){return this._readFile(e)}}


/***/ }),

/***/ 80976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4754);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.webgl.VertexArrayObject");let o=class{constructor(e,t,i,r,s=null){this._context=e,this._locations=t,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}getByteLength(e){return this._buffers.get(e)?.usedMemory??0}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),this._indexBuffer?.usedMemory??0+(this._buffers.size+(this._indexBuffer?1:0))*_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseTypedArrayMemory */ .i5)}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .disposeMaybe */ .WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&n().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||n().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,i)=>{const r=t.get(i);r?(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .bindVertexBufferLayout */ .yu)(this._context,this._locations,e,r):n().error("Vertex element descriptor is empty!")})),null!=i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}};


/***/ }),

/***/ 68455:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6267);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this._result=!1}dispose(){this._program=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__/* .disposeMaybe */ .WD)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}


/***/ }),

/***/ 99756:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _R: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony exports DisjointTimerQuery, hasRunningElapsedTimer */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e,E,t,T,r,_,i,u,n){this.createQuery=e,this.deleteQuery=E,this.resultAvailable=t,this.getResult=T,this.disjoint=r,this.beginTimeElapsed=_,this.endTimeElapsed=i,this.createTimestamp=u,this.timestampBits=n}}let E=!1;function t(t,T){if(T.disjointTimerQuery)return null;let r=t.getExtension("EXT_disjoint_timer_query_webgl2");return r?new e((()=>t.createQuery()),(e=>{t.deleteQuery(e),E=!1}),(e=>t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE)),(e=>t.getQueryParameter(e,t.QUERY_RESULT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,t.beginQuery(r.TIME_ELAPSED_EXT,e))}),(()=>{t.endQuery(r.TIME_ELAPSED_EXT),E=!1}),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>t.getQuery(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):(r=t.getExtension("EXT_disjoint_timer_query"),r?new e((()=>r.createQueryEXT()),(e=>{r.deleteQueryEXT(e),E=!1}),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT)),(e=>r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)),(()=>t.getParameter(r.GPU_DISJOINT_EXT)),(e=>{E||(E=!0,r.beginQueryEXT(r.TIME_ELAPSED_EXT,e))}),(()=>{r.endQueryEXT(r.TIME_ELAPSED_EXT),E=!1}),(e=>r.queryCounterEXT(e,r.TIMESTAMP_EXT)),(()=>r.getQueryEXT(r.TIMESTAMP_EXT,r.QUERY_COUNTER_BITS_EXT))):null)}


/***/ }),

/***/ 9747:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){const{options:n,value:o}=e;return"number"==typeof n[o]}function n(n){let o="";for(const t in n){const i=n[t];if("boolean"==typeof i)i&&(o+=`#define ${t}\n`);else if("number"==typeof i)o+=`#define ${t} ${i.toFixed()}\n`;else if("object"==typeof i)if(e(i)){const{value:e,options:n,namespace:f}=i,s=f?`${f}_`:"";for(const t in n)o+=`#define ${s}${t} ${n[t].toFixed()}\n`;o+=`#define ${t} ${s}${e}\n`}else{const e=i.options;let n=0;for(const t in e)o+=`#define ${e[t]} ${(n++).toFixed()}\n`;o+=`#define ${t} ${e[i.value]}\n`}}return o}


/***/ }),

/***/ 2449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ey: () => (/* binding */ B),
/* harmony export */   Ms: () => (/* binding */ Q),
/* harmony export */   RC: () => (/* binding */ o),
/* harmony export */   T8: () => (/* binding */ c),
/* harmony export */   Uy: () => (/* binding */ p),
/* harmony export */   Xt: () => (/* binding */ f),
/* harmony export */   hG: () => (/* binding */ u),
/* harmony export */   iD: () => (/* binding */ a),
/* harmony export */   kn: () => (/* binding */ g),
/* harmony export */   p3: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports add, backFaceCullingParams, copySource, makeBlending, makeColorWrite, makeCulling, makeDepthTest, makeDepthWrite, makeDrawBuffers, makePolygonOffset, makeStencilTest, makeStencilWrite, simpleBlendingParams */
/* harmony import */ var _3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function l(t,e,i=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,s=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:s[0],g:s[1],b:s[2],a:s[3]}}}function r(t,e,i,s,l=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,r=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,a=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:s,opRgb:l,opAlpha:r,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}const a=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ZERO,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),_=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ZERO),h=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE),o=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),c=r(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.SRC_ALPHA,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),d={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.BACK,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},u={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.FRONT,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},f=e=>e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Back?d:e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Front?u:null,p={zNear:0,zFar:1},g={r:!0,g:!0,b:!0,a:!0};function v(t){return R.intern(t)}function I(t){return N.intern(t)}function S(t){return P.intern(t)}function W(t){return k.intern(t)}function b(t){return F.intern(t)}function T(t){return L.intern(t)}function w(t){return U.intern(t)}function O(t){return K.intern(t)}function A(t){return x.intern(t)}function B(t){return G.intern(t)}class D{constructor(t,e){this._makeKey=t,this._makeRef=e,this._interns=new Map}intern(t){if(!t)return null;const e=this._makeKey(t),i=this._interns;return i.has(e)||i.set(e,this._makeRef(t)),i.get(e)??null}}function C(t){return"["+t.join(",")+"]"}const R=new D(y,(t=>({__tag:"Blending",...t})));function y(t){return t?C([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const N=new D(m,(t=>({__tag:"Culling",...t})));function m(t){return t?C([t.face,t.mode]):null}const P=new D(E,(t=>({__tag:"PolygonOffset",...t})));function E(t){return t?C([t.factor,t.units]):null}const k=new D(z,(t=>({__tag:"DepthTest",...t})));function z(t){return t?C([t.func]):null}const F=new D(H,(t=>({__tag:"StencilTest",...t})));function H(t){return t?C([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const L=new D(M,(t=>({__tag:"DepthWrite",...t})));function M(t){return t?C([t.zNear,t.zFar]):null}const U=new D(j,(t=>({__tag:"ColorWrite",...t})));function j(t){return t?C([t.r,t.g,t.b,t.a]):null}const K=new D(Z,(t=>({__tag:"StencilWrite",...t})));function Z(t){return t?C([t.mask]):null}const x=new D(q,(t=>({__tag:"DrawBuffers",...t})));function q(t){return t?C(t.buffers):null}const G=new D(J,(t=>({blending:v(t.blending),culling:I(t.culling),polygonOffset:S(t.polygonOffset),depthTest:W(t.depthTest),stencilTest:b(t.stencilTest),depthWrite:T(t.depthWrite),colorWrite:w(t.colorWrite),stencilWrite:O(t.stencilWrite),drawBuffers:A(t.drawBuffers)})));function J(t){return t?C([y(t.blending),m(t.culling),E(t.polygonOffset),z(t.depthTest),H(t.stencilTest),M(t.depthWrite),j(t.colorWrite),Z(t.stencilWrite),q(t.drawBuffers)]):null}class Q{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._setDrawBuffers(t.drawBuffers),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(t){this._drawBuffers=this._setSubState(t,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}


/***/ }),

/***/ 38646:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _2d_engine_webgl_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7370);
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89423);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _FramebufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84852);
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(8595);
/* harmony import */ var _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45758);
/* harmony import */ var _VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80976);
/* harmony import */ var _WebGLDriverTestModule_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(68455);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends _WebGLDriverTestModule_js__WEBPACK_IMPORTED_MODULE_7__/* .WebGLDriverTestModule */ ._{constructor(e){super(),this._rctx=e;const r="\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ",t="\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ";this._program=e.programCache.acquire(r,t,new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(g){const f=this._rctx;if(!f.gl)return g.dispose(),!0;const l=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureDescriptor */ .R(1);l.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,l.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.NEAREST;const _=new _FramebufferObject_js__WEBPACK_IMPORTED_MODULE_3__/* .FramebufferObject */ .H(f,l),v=_BufferObject_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferObject */ .g.createVertex(f,_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Usage */ ._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),x=new _VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexArrayObject */ .Z(f,new Map([["a_pos",0]]),_2d_engine_webgl_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_0__/* .Pos2us */ .VS,new Map([["geometry",v]])),h=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureDescriptor */ .R;h.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.LINEAR,h.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const b=new _Texture_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture */ .g(f,h,w);f.useProgram(g),f.bindTexture(b,0),g.setUniform1i("u_texture",0);const A=f.getBoundFramebufferObject(),{x:E,y:T,width:j,height:C}=f.getViewport();f.bindFramebuffer(_),f.setViewport(0,0,1,1),f.setClearColor(0,0,0,0),f.setBlendingEnabled(!1),f.clear(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .FramebufferBit */ .NV.COLOR),f.bindVAO(x),f.drawArrays(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4);const y=new Uint8Array(4);return _.readPixels(0,0,1,1,_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelFormat */ .Ab.RGBA,_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_BYTE,y),x.dispose(),_.dispose(),b.dispose(),f.setViewport(E,T,j,C),f.bindFramebuffer(A),255!==y[0]}}const w=new Image;w.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",w.width=5,w.height=5,w.decode();


/***/ })

};
;