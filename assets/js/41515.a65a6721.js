"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[41515,15878,26943,29934],{33645:(e,t,n)=>{n.d(t,{DN:()=>o,Sv:()=>r,ZY:()=>s,z8:()=>l});var i=n(84698),a=n(61781);function l(e){switch(e?.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return e.extent?.center;default:return null}}async function r(e,t){if(e.hasZ||"2d"===t.type)return e;const n=t.map?.ground;if(!n?.layers.length)return e;const{geometry:i}=await n.queryElevation(e,{cache:t.basemapTerrain?.elevationQueryCache});return i}function o(e,t,n){return u(e.center,t,n)}function s(e,t,n){switch(e?.type){case"extent":return e;case"multipoint":case"polygon":case"polyline":return e.extent;case"point":return u(e,t,n);default:return null}}function u(e,t,n){const l=e.hasZ?e.z:void 0;if(t?.map)return(null!=n?(0,a.eU)(t,n):t.extent).clone().centerAt(e).set({zmax:l,zmin:l});const{x:r,y:o,spatialReference:s}=e;return new i.A({xmin:r-.25,ymin:o-.25,xmax:r+.25,ymax:o+.25,spatialReference:s,zmin:l,zmax:l})}},15878:(e,t,n)=>{n.d(t,{A:()=>d});var i=n(66866),a=n(52495),l=n(85569),r=n(12690),o=n(48982),s=n(21564),u=(n(39831),n(539),n(63863)),c=n(42453),f=n(35387);let d=class extends a.A{constructor(e){super(e),this._featureUtils=null,this.effectivePopupTemplate=null}get _arcadeTask(){return this.expressionsUsedInTitle.length>0?this._get("_arcadeTask")||(0,r.UT)((()=>(0,f.l)())):null}get featureUtilsPromise(){return this._get("featureUtilsPromise")??Promise.all([n.e(72076),n.e(3769)]).then(n.bind(n,3769)).then((e=>this._featureUtils=e))}get calculatedExpressions(){const e=new o.A;if(!this.expressionsUsedInTitle.length)return e;if(!this._arcadeTask?.value){for(const t of this.expressionsUsedInTitle??[])e.push({name:t.name,invalid:!0});return e}for(const t of this.expressionsUsedInTitle)try{const n=this._arcadeTask.value.arcade.parseScript(t.expression,["$layer","$map","$datastore"]);if(n.isAsync){e.push({name:t.name,invalid:!0});break}e.push({name:t.name,syntax:n,invalid:!1,func:this._arcadeTask.value.arcade.compileScript(n,{vars:{$feature:"any"}})})}catch{e.push({name:t.name,invalid:!0});break}return e}get expressionsUsedInTitle(){let e=this.effectivePopupTemplate?.title??"";return"string"!=typeof e?[]:(e=e.toLowerCase(),this.effectivePopupTemplate?.expressionInfos?.filter((t=>e.includes(`{expression/${t.name.toLowerCase()}}`)))??[])}get fieldInfoMap(){return this._featureUtils?this._createFieldInfoMap(this._featureUtils.getAllFieldInfos(this.effectivePopupTemplate)):null}get hasBadExpressions(){return this.calculatedExpressions.some((e=>!0===e.invalid))}get requiredFields(){const e=new Set;if(this._arcadeTask?.value&&!this.hasBadExpressions)for(const n of this.calculatedExpressions?.toArray()??[])try{const t=this._arcadeTask.value.arcade.extractFieldLiterals(n.syntax);for(const n of t){const t=n.split("."),i=this.fieldsIndex.get(t.at(-1)??"");i&&e.add(i.name)}}catch{}const t=this._extractFieldNames(this.workingTitle);for(const n of t){const t=this.fieldsIndex.get(n);t&&e.add(t.name)}return null!=this.objectIdField&&e.add(this.objectIdField),e}get titleFromDisplayField(){let e="";return this.displayField&&(e=this.fieldsIndex.get(this.displayField)?.name??""),e||(e=this.fieldsIndex.get(this.objectIdField)?.name??""),e?`{${e}}`:""}get workingTitle(){const e=this.effectivePopupTemplate?this.effectivePopupTemplate.title:"";return""===e||null==e||this.hasBadExpressions||"string"!=typeof e?this.titleFromDisplayField:e}async getTitle(e,t,n){const i=t.getObjectId()??t.attributes[e.objectIdField];return(await this.getTitles(e,[t],n)).get(i)??""}async getTitles(e,t,n){const i=new Map,a=n?.timeZone??"system";try{const[{substituteFieldsInLinksAndAttributes:l}]=await Promise.all([this.featureUtilsPromise,this._arcadeTask?.promise]);n?.fetchMissingFields&&(t=await this._checkAndReQueryGraphics(e,t));const{fieldInfoMap:r,workingTitle:o}=this,s=o&&r;t.forEach((t=>{const n=t.getObjectId()??t.attributes[e.objectIdField],u=s?l({attributes:t.attributes,expressionAttributes:null,fieldInfoMap:r,globalAttributes:this._createFormattedAttributes(e,t,a).global,layer:e,text:o}):"";i.set(n,u)}))}catch{}return i}async _checkAndReQueryGraphics(e,t){const n=t.map((t=>t.getObjectId()??t.attributes[e.objectIdField])).filter(l.Ru);if(n.length!==t.length)return t;if(t.some((e=>!(0,c.Kl)(e,this.requiredFields)))){const i=e.createQuery();i.where="1=1",i.outFields=[...this.requiredFields],i.objectIds=n;const a=await e.queryFeatures(i);if(a?.features.length===t.length)return a.features}return t}_createFieldInfoMap(e){const t=new Map;if(!e)return t;for(const n of e){if(!n.fieldName)continue;const e=this.fieldsIndex.get(n.fieldName),i=e?.name??n.fieldName;n.fieldName=i,t.set(i.toLowerCase(),n)}return t}_createFormattedAttributes(e,t,n="system"){const i=this.effectivePopupTemplate?.fieldInfos??[],a={};if(!this._featureUtils)return{};if(!this.hasBadExpressions&&this.calculatedExpressions.length>0&&this._arcadeTask?.value){const n=this._arcadeTask.value.Feature.createFromGraphicLikeObject(t.geometry,t.attributes,e,null);for(const e of this.calculatedExpressions)try{a[`expression/${e.name}`]=e.func({vars:{$feature:n}})}catch{}}const l={...t.attributes,...a};return{global:this._featureUtils.formatAttributes({fieldInfos:i,attributes:l,graphic:t,timeZone:n,layer:e,fieldInfoMap:this.fieldInfoMap}),content:[]}}_extractFieldNames(e){return(0,c.nw)(e).filter((e=>!(0===e.indexOf("relationships/")||0===e.indexOf("expression/"))))}};(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"_arcadeTask",null),(0,i._)([(0,s.MZ)()],d.prototype,"_featureUtils",void 0),(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"featureUtilsPromise",null),(0,i._)([(0,s.MZ)({readOnly:!0})],d.prototype,"calculatedExpressions",null),(0,i._)([(0,s.MZ)()],d.prototype,"displayField",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"effectivePopupTemplate",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"expressionsUsedInTitle",null),(0,i._)([(0,s.MZ)()],d.prototype,"fieldsIndex",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"fieldInfoMap",null),(0,i._)([(0,s.MZ)()],d.prototype,"fields",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"objectIdField",void 0),(0,i._)([(0,s.MZ)()],d.prototype,"requiredFields",null),d=(0,i._)([(0,u.$)("esri.layers.support.TitleCreator")],d)},82178:(e,t,n)=>{n.d(t,{GP:()=>d,LI:()=>c,lc:()=>s,u5:()=>u});n(17791);var i=n(46930);const a=/^-?(\d+)(\.(\d+))?$/i;function l(e,t){return e-t}function r(e,t){let n,i;return n=Number(e.toFixed(t)),n<e?i=n+1/10**t:(i=n,n-=1/10**t),n=Number(n.toFixed(t)),i=Number(i.toFixed(t)),[n,i]}function o(e,t,n,i,a){const l=u(e,t,n,i),r=null==l.previous||l.previous<=a,o=null==l.next||l.next<=a;return r&&o||l.previous+l.next<=2*a}function s(e){const t=String(e),n=t.match(a);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(t.toLowerCase().includes("e")){const e=t.split("e"),n=e[0],i=e[1];if(n&&i){const e=Number(n);let t=Number(i);const a=t>0;a||(t=Math.abs(t));const l=s(e);return a?(l.integer+=t,t>l.fractional?l.fractional=0:l.fractional-=t):(l.fractional+=t,t>l.integer?l.integer=1:l.integer-=t),l}}return{integer:0,fractional:0}}function u(e,t,n,i){const a={previous:null,next:null};if(null!=n){const i=e-n,l=t-n-i;a.previous=Math.floor(Math.abs(100*l/i))}if(null!=i){const n=i-e,l=i-t-n;a.next=Math.floor(Math.abs(100*l/n))}return a}function c(e,t={}){const n=e.slice(),{tolerance:i=2,strictBounds:a=!1,indexes:u=n.map(((e,t)=>t))}=t;u.sort(l);for(let l=0;l<u.length;l++){const e=u[l],t=n[e],c=0===e?null:n[e-1],f=e===n.length-1?null:n[e+1],d=s(t).fractional;if(d){let s,u=0,p=!1;for(;u<=d&&!p;){const e=r(t,u);s=a&&0===l?e[1]:e[0],p=o(t,s,c,f,i),u++}p&&(n[e]=s)}}return n}const f={maximumFractionDigits:20};function d(e){return(0,i.ZV)(e,f)}},79581:(e,t,n)=>{n.d(t,{iA:()=>c});var i=n(85569),a=(n(539),n(82256)),l=n(76459),r=(n(42453),n(82178),n(5001),n(99340),n(55056)),o=n(26943),s=n(70218);(0,l.J2)("short-date");async function u(e,t,n){(0,a.tE)(e,t,(()=>[])).push(...n)}async function c(e){const t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables)for(const n of e.visualVariables)if(f(n)){const e=(await(0,o.getRampStops)(n)??[]).map((e=>e.color));await u(t,n.field||n.valueExpression,e)}if("heatmap"===e.type){const n=(0,s.Y)(e).map((e=>e.color));await u(t,e.field||e.valueExpression,n)}else if("pie-chart"===e.type){for(const n of e.attributes)await u(t,n.field||n.valueExpression,[n.color]);await u(t,"default",[e?.othersCategory?.color,(0,r.Sx)(e.backgroundFillSymbol,null)])}else if("dot-density"===e.type){for(const n of e.attributes)await u(t,n.field||n.valueExpression,[n.color]);await u(t,"default",[e.backgroundColor])}else if("unique-value"===e.type)if("predominance"===e.authoringInfo?.type)for(const n of e.uniqueValueInfos??[])await u(t,n.value.toString(),[(0,r.Sx)(n.symbol,null)]);else{const n=(e.uniqueValueInfos??[]).map((e=>(0,r.Sx)(e.symbol,null))),{field:i,field2:a,field3:l,valueExpression:o}=e;(i||o)&&await u(t,i||o,n),a&&await u(t,a,n),l&&await u(t,l,n)}else if("class-breaks"===e.type){const n=e.classBreakInfos.map((e=>(0,r.Sx)(e.symbol,null))),{field:i,valueExpression:a}=e;await u(t,i??a,n)}else"simple"===e.type&&await u(t,"default",[(0,r.Sx)(e.symbol,null)]);return"defaultSymbol"in e&&e.defaultSymbol&&await u(t,"default",[(0,r.Sx)(e.defaultSymbol,null)]),t.forEach(((e,n)=>{const a=(0,i.Am)(e.filter(Boolean),((e,t)=>JSON.stringify(e)===JSON.stringify(t)));t.set(n,a)})),t}function f(e){return"color"===e.type}},14872:(e,t,n)=>{n.d(t,{CA:()=>c,Yb:()=>s,Yn:()=>r,nK:()=>o,p5:()=>u});n(17791);var i=n(17199),a=(n(99484),n(96704)),l=n(48187);const r=()=>(0,i.W)({action:()=>n.e(72076).then(n.bind(n,13847))});function o(e,t,n){const{title:i,textEnabled:l}=t,{type:r,active:o,uid:u,disabled:c,indicator:f}=e;return e.visible?(0,a.K)("calcite-action",{...t,active:"toggle"===r&&e.value,appearance:"solid","data-action-id":e.id,"data-action-uid":u,disabled:c,icon:s(e),indicator:f,loading:o,scale:"s",text:i??"",title:l?void 0:i},n):null}function s(e){return e.icon?e.icon:"image"in e&&e.image||e.className?void 0:"question"}function u(e){return e?{backgroundImage:`url(${e})`}:{}}function c({action:e,feature:t}){const n=t?.attributes,i="image"in e?e.image:void 0;return i&&n?(0,l.V)(i,n):i??""}},26943:(e,t,n)=>{n.d(t,{G9:()=>f,getRampStops:()=>s,vt:()=>d,y0:()=>c});var i=n(96220),a=n(85569),l=n(29934);const r=new i.A([64,64,64]);function o(e,t){const n=[],i=e.length-1;return 5===e.length?n.push(0,2,4):n.push(0,i),e.map(((e,a)=>n.includes(a)?(0,l.Dd)(e,a,i,t):null))}async function s(e,t,i){let l=!1,r=[],s=[];if(e.stops){const t=e.stops;r=t.map((e=>e.value)),l=t.some((e=>!!e.label)),l&&(s=t.map((e=>e.label)))}const c=r[0],f=r[r.length-1];if(null==c&&null==f)return null;const d=l?null:o(r,i);return(await Promise.all(r.map((async(i,a)=>{const r="opacity"===e.type?await u(i,e,t):(await n.e(72076).then(n.bind(n,28479))).getColor(e,i),o=l?s[a]:d?.[a]??"";return null==r?null:{value:i,color:r,label:o}})))).filter(a.Ru).reverse()}async function u(e,t,a){const l=new i.A(a??r),o=(await n.e(72076).then(n.bind(n,28479))).getOpacity(t,e);return null!=o&&(l.a=o),l}function c(e){let t=!1,n=[],i=[];n=e.map((e=>e.value)),t=e.some((e=>!!e.label)),t&&(i=e.map((e=>e.label??"")));const a=n[0],l=n[n.length-1];if(null==a&&null==l)return null;const r=t?null:o(n);return n.map(((n,a)=>({value:n,color:f(n,e),label:t?i[a]:r?.[a]??""}))).reverse()}function f(e,t){const{startIndex:n,endIndex:a,weight:l}=function(e,t){let n=0,i=t.length-1;return t.some(((t,a)=>e<t.value?(i=a,!0):(n=a,!1))),{startIndex:n,endIndex:i,weight:(e-t[n].value)/(t[i].value-t[n].value)}}(e,t);if(n===a)return t[n].color;const r=i.A.blendColors(t[n].color,t[a].color,l);return new i.A(r)}function d(e,t){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach(((a,l)=>{0===l?n.push({value:t.max,color:new i.A(a.toColor),label:"high"}):n.push({value:null,color:new i.A(a.toColor),label:""}),l===e.colorRamps.length-1?n.push({value:t.min,color:new i.A(a.fromColor),label:"low"}):n.push({value:null,color:new i.A(a.fromColor),label:""})}));else{let a,l;e&&"algorithmic"===e.type?(a=e.fromColor,l=e.toColor):(a=[0,0,0,1],l=[255,255,255,1]),n=[{value:t.max,color:new i.A(l),label:"high"},{value:t.min,color:new i.A(a),label:"low"}]}return n}},70218:(e,t,n)=>{n.d(t,{Y:()=>a});var i=n(50769);function a(e){if(!e.colorStops)return[];const t=[...e.colorStops].filter((e=>e.color?.a>0));let n=t.length-1;if(t&&t[0]){const e=t[n];e&&1!==e.ratio&&(t.push(new i.A({ratio:1,color:e.color})),n++)}return t.map(((t,i)=>{let a="";return 0===i?a=e.legendOptions?.minLabel||"low":i===n&&(a=e.legendOptions?.maxLabel||"high"),{color:t.color,label:a,ratio:t.ratio}})).reverse()}},29934:(e,t,n)=>{n.d(t,{Dd:()=>c,E2:()=>f,Zo:()=>p,getDateFormatOptions:()=>h,iz:()=>A,kC:()=>u,l5:()=>s,uM:()=>d});var i=n(46437),a=n(42453),l=n(82178),r=n(99340),o=n(40241);const s="<",u=">";function c(e,t,n,i){let a="";return 0===t?a=`${s} `:t===n&&(a=`${u} `),a+(i?(0,r.i0)(e,i):(0,l.GP)(e))}const f=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function d(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let i=null,a=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;i=t.stops[0].value,a=t.stops[t.stops.length-1].value}const l=null!=i&&null!=a?i+(a-i)/2:0,{getColor:r}=await n.e(72076).then(n.bind(n,28479));return r(t,l)??null}async function p(e,t){const n=e.trailCap,i=e.trailWidth||1,a=t||await d(e)||e.color;return new o.A({cap:n,color:a,width:i})}function h(e,t,n){const l=function(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{const n=e.featureReduction.fields.find((({name:e})=>e.toLowerCase()===t.field.toLowerCase()));return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}(e,t);if(!l||!(0,r.fs)(l)&&!(0,a.OH)(l))return null;let o=function(e,t){const n="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(n?.length&&t)return n.find((e=>e.fieldName?.toLowerCase()===t.toLowerCase()))?.format?.dateFormat}(e,l.name);if(!o&&"date"===l.type){let e=0,n=0;t.stops?(e=t.stops?.at(0)?.value??e,n=t.stops?.at(-1)?.value??n):"minDataValue"in t&&"maxDataValue"in t&&(e=t.minDataValue??e,n=t.maxDataValue??n),o=n-e>2*i.vf.days?"short-date":"short-date-short-time"}return{fieldType:l.type,format:o,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function A(e,t){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find((({theme:e})=>e===t))}},76943:(e,t,n)=>{n.d(t,{D:()=>o,S:()=>u});var i=n(92504),a=n(35251),l=n(99484),r=n(96704);function o({level:e,class:t,...n},i){const o=s(e);return(0,r.K)(`h${o}`,{...n,"aria-level":String(o),class:(0,l.Ly)(a.D.heading,t),role:"heading"},i)}function s(e){return(0,i.qE)(Math.ceil(e),1,6)}function u(e,t=1){return s(e+t)}},24611:(e,t,n)=>{function i(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const n=t._delegatedEventNames,i=Array.isArray(e)?e:function(e){return e.split(",").map((e=>e.trim()))}(e);n.push(...i)}}n.d(t,{U:()=>i})},58357:(e,t,n)=>{n.d(t,{p4:()=>i,xk:()=>a});n(60682),n(96704),n(99484);function i(e){return e&&"function"==typeof e.render}function a(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}}}]);