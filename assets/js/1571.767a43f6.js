"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1571,7461],{46602:(e,t,r)=>{r.d(t,{Mk:()=>h,Zk:()=>c,w6:()=>m});var n=r(66866),i=r(17306),s=r(19251),o=r(40189),a=(r(539),r(73446),r(98849),r(39831),r(63863)),u=r(96023);const l=new i.A.EventEmitter;function c(e,t,r=null,n=!1){const i=(0,o.Tw)();return n=null==t||n,l.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:n,result:i.promise}),i}const d="esri.layers.mixins.EditBusLayer",p=Symbol(d);function h(e){return null!=e&&"object"==typeof e&&p in e}function y(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function f(e,t,r){const n=new URL(e).host,i=u.Z3.get(n),s=e=>!e||e===i;return s(t)&&s(r)||t===r}const m=e=>{var t;let r=class extends e{constructor(...e){super(...e),this[t]=!0,this._applyEditsHandler=e=>{const{serviceUrl:t,layerId:r,gdbVersion:n,mayReceiveServiceEdits:i,result:o}=e,a=t===this.url,l=null!=r&&null!=this.layerId&&r===this.layerId,c=y(this),d=y(this)&&f(t,n,this.gdbVersion);if(!a||c&&!d||!l&&!i)return;const p=o.then((e=>{if(l&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,s.o8)(e)),e;const t=e.editedFeatures?.find((({layerId:e})=>e===this.layerId));if(t){const{adds:r,updates:n,deletes:i}=t.editedFeatures,o={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:r?r.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],deletedFeatures:i?i.map((({attributes:e})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],updatedFeatures:n?n.map((({current:{attributes:e}})=>({objectId:this.objectIdField&&e[this.objectIdField],globalId:this.globalIdField&&e[this.globalIdField]}))):[],editedFeatures:(0,s.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,s.o8)(e.historicMoment)};return this.emit("edits",o),o}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,s.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,s.o8)(e.historicMoment)}})).then((e=>("historicMoment"in this&&this.historicMoment!==e.historicMoment&&(0,u.w5)(t,n)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:p})},this._updateMomentHandler=e=>{const{serviceUrl:t,gdbVersion:r,moment:n}=e,i=t===this.url,s=y(this),o=y(this)&&f(t,r,this.gdbVersion),a=y(this)&&!f(t,this.gdbVersion,null);i&&s&&o&&a&&"historicMoment"in this&&this.historicMoment!==n&&(this.historicMoment=n)},this.when().then((()=>{this.addHandles(function(e){return l.on("apply-edits",new WeakRef(e))}(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(function(e){return l.on("update-moment",new WeakRef(e))}(this._updateMomentHandler))}),(()=>{}))}};return t=p,r=(0,n._)([(0,a.$)(d)],r),r}},18475:(e,t,r)=>{r.d(t,{c:()=>a});var n=r(66866),i=r(21877),s=r(21564),o=(r(73446),r(85569),r(39831),r(63863));let a=class extends i.oY{constructor(){super(...arguments),this.type=null}};(0,n._)([(0,s.MZ)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],a.prototype,"type",void 0),a=(0,n._)([(0,o.$)("esri.layers.support.FeatureReduction")],a)},99989:(e,t,r)=>{r.d(t,{A:()=>l});var n,i=r(66866),s=r(21564),o=(r(73446),r(85569),r(39831),r(63863)),a=r(18475);let u=n=class extends a.c{constructor(e){super(e),this.type="selection"}clone(){return new n}};(0,i._)([(0,s.MZ)({type:["selection"]})],u.prototype,"type",void 0),u=n=(0,i._)([(0,o.$)("esri.layers.support.FeatureReductionSelection")],u);const l=u},8585:(e,t,r)=>{r.d(t,{A:()=>c});var n,i=r(66866),s=r(48982),o=r(21877),a=r(21564),u=(r(73446),r(85569),r(39831),r(63863));let l=n=class extends o.oY{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new s.A}clone(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,i._)([(0,a.MZ)({type:String,json:{write:!0}})],l.prototype,"floorField",void 0),(0,i._)([(0,a.MZ)({json:{read:!1,write:!1}})],l.prototype,"viewAllMode",void 0),(0,i._)([(0,a.MZ)({json:{read:!1,write:!1}})],l.prototype,"viewAllLevelIds",void 0),l=n=(0,i._)([(0,u.$)("esri.layers.support.LayerFloorInfo")],l);const c=l},97461:(e,t,r)=>{r.d(t,{Xl:()=>A,ct:()=>v,C$:()=>G,PD:()=>D,VZ:()=>C,mm:()=>j,VA:()=>k,WP:()=>q,iX:()=>g,GA:()=>H,jp:()=>P,tG:()=>U,lV:()=>x,B5:()=>R,Ye:()=>E,sg:()=>O,hM:()=>S,S2:()=>L,jD:()=>T,Zm:()=>V,$4:()=>_,bt:()=>I,rn:()=>M});var n=r(28830),i=r(30822),s=r(12690),o=r(98849),a=r(59851),u=r(76859),l=r(61985),c=r(14474);async function d(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=h(e));const n=p(e),i=e.capabilities.query.supportsPagination;t.start=0,t.num=n;let s=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(null==s?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!i||!o.exceededTransferLimit)break;t.start+=n}return s}function p(e){return h(e)*function(e){return e.capabilities.query.maxRecordCount||2e3}(e)}function h(e){return e.capabilities.query.supportsMaxRecordCountFactor?c.A.MAX_MAX_RECORD_COUNT_FACTOR:1}var y=r(40454),f=r(47347),m=r(2692),w=r(27973),b=r(97724);const g=new a.J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function A(e,t,r,n){const i=await Z(e);if(await F(e,t,n),!i.addAttachment)throw new o.A(n,"Layer source does not support addAttachment capability");return i.addAttachment(t,r)}function F(e,t,r){const{attributes:n}=t,{objectIdField:i}=e;return e.capabilities?.data?.supportsAttachment?t?n?i&&n[i]?Promise.resolve():Promise.reject(new o.A(r,`feature is missing the identifying attribute ${i}`)):Promise.reject(new o.A(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new o.A(r,"A feature is required to add/delete/update attachments")):Promise.reject(new o.A(r,"this layer doesn't support attachments"))}async function I(e,t,r,n,i){const s=await Z(e);if(await F(e,t,i),!s.updateAttachment)throw new o.A(i,"Layer source does not support updateAttachment capability");return s.updateAttachment(t,r,n)}async function v(e,t,n){const{applyEdits:i}=await r.e(5903).then(r.bind(r,75903)),s=await e.load(),{source:o,globalIdField:a}=s;let u=n;return("feature"===s.type?s.infoFor3D:null)&&null!=t.deleteFeatures&&null!=a&&(u={...u,globalIdToObjectId:await H(e,t.deleteFeatures,a)}),i(s,o,t,n)}async function M(e,t,n){const{uploadAssets:i}=await r.e(5903).then(r.bind(r,75903)),s=await e.load();return i(s,s.source,t,n)}async function j(e,t,r,n){const i=await Z(e);if(await F(e,t,n),!i.deleteAttachments)throw new o.A(n,"Layer source does not support deleteAttachments capability");return i.deleteAttachments(t,r)}async function q(e,t,r){const n=(await e.load({signal:t?.signal})).source;if(!n.fetchRecomputedExtents)throw new o.A(r,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(t)}async function x(e,t,r,n){t=w.A.from(t),await e.load();const i=e.source,s=e.capabilities;if(!s?.data?.supportsAttachment)throw new o.A(n,"this layer doesn't support attachments");const{attachmentTypes:a,objectIds:u,globalIds:l,num:c,size:d,start:p,where:h}=t;if(!s?.operations?.supportsQueryAttachments&&(a?.length>0||l?.length>0||d?.length>0||c||p||h))throw new o.A(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(u?.length||l?.length||h))throw new o.A(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!i.queryAttachments)throw new o.A(n,"Layer source does not support queryAttachments capability",t);return i.queryAttachments(t)}async function O(e,t,r,n){const i=await Z(e);if(!i.queryObjectIds)throw new o.A(n,"Layer source does not support queryObjectIds capability");return i.queryObjectIds(c.A.from(t)??e.createQuery(),r)}async function E(e,t,r,n){const i=await Z(e);if(!i.queryFeatureCount)throw new o.A(n,"Layer source does not support queryFeatureCount capability");return i.queryFeatureCount(c.A.from(t)??e.createQuery(),r)}async function R(e,t,r,n){const i=await Z(e);if(!i.queryExtent)throw new o.A(n,"Layer source does not support queryExtent capability");return i.queryExtent(c.A.from(t)??e.createQuery(),r)}async function S(e,t,r,n){const i=await Z(e);if(!i.queryRelatedFeatures)throw new o.A(n,"Layer source does not support queryRelatedFeatures capability");return i.queryRelatedFeatures(b.default.from(t),r)}async function L(e,t,r,n){const i=await Z(e);if(!i.queryRelatedFeaturesCount)throw new o.A(n,"Layer source does not support queryRelatedFeaturesCount capability");return i.queryRelatedFeaturesCount(b.default.from(t),r)}async function P(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:n}=await t.refresh();if(null!=n&&(e.sourceJSON={...e.sourceJSON,...n},e.read(n,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await(0,u.G)(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function C(e){const t=new c.A,r=e.capabilities?.data,n=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,n&&(t.compactGeometryEnabled=n.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),r&&(r.supportsZ&&null!=e.returnZ&&(t.returnZ=e.returnZ),r.supportsM&&null!=e.returnM&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:i,timeExtent:s}=e;return t.timeExtent=null!=i&&null!=s?s.offset(-i.value,i.unit):s||null,t.multipatchOption="multipatch"===e.geometryType?"xyFootprint":null,t}function T(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r)for(const n of r)if("esriFieldTypeGlobalID"===n.type)return n.name}function V(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r)for(const n of r)if("esriFieldTypeOID"===n.type)return n.name}function _(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}async function Z(e){return(await e.load()).source}async function k(e,t,r){const i=e.parsedUrl?.path;i&&e.authenticationTriggerEvent===t&&await async function(e,t){if(!n.id)return;if(n.id.findCredential(e))return;let r;try{const i=await(0,y.wI)(e,t);i&&(r=await n.id.checkSignInStatus(`${i}/sharing`))}catch(i){}if(r)try{const r=null!=t?t.signal:null;await n.id.getCredential(e,{signal:r})}catch(i){}}(i,r)}function G(e){return!e.sourceJSON?.isMultiServicesView&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const $=(0,l.C)({types:i.xK});function D(e,t){if(e.defaultSymbol)return e.types?.length?new m.A({defaultSymbol:$(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map((e=>({id:e.id,symbol:$(e.symbol,e,t)})))}):new f.A({symbol:$(e.defaultSymbol,e,t)})}function U(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const r=e.editingInfo?.lastEditDate?.getTime();return null==r||(t*=1e3,Date.now()-r<t)}async function H(e,t,r){if(null==t)return null;const n=[],{objectIdField:i}=e;if(t.forEach((e=>{let t=null;if("attributes"in e){const{attributes:n}=e;t={globalId:n[r],objectId:null!=n[i]&&-1!==n[i]?n[i]:null}}else t={globalId:e.globalId,objectId:null!=e.objectId&&-1!==e.objectId?e.objectId:null};null!=t.globalId&&(null!=t.objectId&&-1!==t.objectId||n.push(t.globalId))})),0===n.length)return null;const o=e.createQuery();o.where=n.map((e=>`${r}='${e}'`)).join(" OR "),o.returnGeometry=!1,o.outFields=[i,r],o.cacheHint=!1;const a=await(0,s.DZ)(d(e,o));if(!a.ok)return null;const u=new Map,l=a.value.features;for(const s of l){const e=s.attributes[r],t=s.attributes[i];null!=e&&null!=t&&-1!==t&&u.set(e,t)}return u}},21484:(e,t,r)=>{r.d(t,{L:()=>o});var n=r(12690),i=r(40189),s=r(68659);async function o(e,t,r){const o=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(o&&"unique-value"===o.type&&o.styleOrigin){const a=await(0,n.Ke)(o.populateFromStyle());if((0,i.Te)(r),!1===a.ok){const r=a.error;t?.messages&&t.messages.push(new s.A("renderer:style-reference",`Failed to create unique value renderer from style reference: ${r.message}`,{error:r,context:t})),e.clear("renderer",t?.origin)}}}},96023:(e,t,r)=>{r.d(t,{TA:()=>n,Z3:()=>i,ZJ:()=>o,w5:()=>a});const n=(0,r(33880).vD)(),i=new Map,s=new Map;new Map;async function o(e,t,i=!1){if(!e||!t)return!0;const o=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),a=s.get(o)?.entries();if(a)for(const[s,u]of a)if(u.name===t){const e=!u.stack?.hasForwardEdits();if(!e&&i){const[{deleteForwardEdits:e},{default:t}]=await Promise.all([r.e(3093).then(r.bind(r,43093)),r.e(741).then(r.bind(r,80741))]);return e(o,s,new t({sessionId:n,moment:u.moment}))}return e}return!0}function a(e,t){if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),n=s.get(r)?.entries();if(n)for(const[i,s]of n)if(s.name===t)return"edit"===s.lockType;return!1}}}]);