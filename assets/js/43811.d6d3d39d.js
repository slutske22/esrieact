"use strict";
exports.id = 43811;
exports.ids = [43811,62900,57592,77536,40519,60628,35211,21566];
exports.modules = {

/***/ 17504:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ m),
/* harmony export */   b: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39739);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(23233);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19274);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function c(c){const m=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__/* .ShaderBuilder */ .N5,{vertex:u,fragment:w,attributes:p,varyings:f}=m,{vvColor:C,hasVertexColors:h}=c;return (0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .addProjViewLocalOrigin */ .NB)(u,c),m.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Transform */ .d,c),m.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_VertexColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexColor */ .c,c),m.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .VisualVariables */ .A,c),m.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ObjectAndLayerIdColor */ .g,c),w.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .SliceDraw */ .HQ,c),m.include(_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .outputColorHighlightOID */ .z,c),m.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .terrainDepthTest */ .Z,c),p.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,"vec3"),C&&p.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,"float"),h||f.add("vColor","vec4"),f.add("vpos","vec3",{invariant:!0}),u.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Float4PassUniform */ .E("uColor",(e=>e.color))),u.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
      vpos = position;
      forwardNormalizedVertexColor();
      forwardObjectAndLayerIdColor();

      ${h?"vColor *= uColor;":C?"vColor = uColor * interpolateVVColor(colorFeatureAttribute);":"vColor = uColor;"}
      forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
      gl_Position = transformPosition(proj, view, vpos);`),w.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .ColorConversion */ .a),w.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`discardBySlice(vpos);
discardByTerrainDepth();
outputColorHighlightOID(vColor, vpos, vColor.rgb);`),m}const m=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 33790:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ m),
/* harmony export */   a: () => (/* binding */ c),
/* harmony export */   b: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_ReadDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(65743);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(70224);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(74767);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_shaders_CompositingTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(17706);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class m extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .NoParameters */ .Y{constructor(){super(...arguments),this.opacity=1}}function g(l){const m=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__/* .ShaderBuilder */ .N5;m.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ScreenSpacePass */ .c),m.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),l.hasOpacityFactor&&m.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)));const g=l.blitMode===_views_3d_webgl_engine_shaders_CompositingTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_7__/* .BlitMode */ .d.Depth;return g&&(m.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float2BindUniform */ .E("nearFar",(e=>e.camera.nearFar))),m.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_output_ReadDepth_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ReadDepth */ .E),m.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .RgbaFloatEncoding */ .W)),m.fragment.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
    ${g?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
          float normalizedLinearDepth = (-linearDepthFromTexture(tex, uv) - nearFar[0]) / (nearFar[1] - nearFar[0]);
          fragColor = float2rgba(normalizedLinearDepth);`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
          fragColor = texture(tex, uv) ${l.hasOpacityFactor?"* opacity":""};`}`),m}const c=Object.freeze(Object.defineProperty({__proto__:null,CompositingPassParameters:m,build:g},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 71943:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ b),
/* harmony export */   m: () => (/* binding */ v),
/* harmony export */   s: () => (/* binding */ M),
/* harmony export */   w: () => (/* binding */ q)
/* harmony export */ });
/* harmony import */ var _tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74642);
/* harmony import */ var _ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57592);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86330);
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21566);
/* harmony import */ var _Envelope_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(75992);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function v(){return{outPoint:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,index:-1,t:Number.NaN}}function N(e,t,n){return{outPoint:e.clone(),index:t,t:n}}function f(e,t,n,i){e.outPoint.assign(t),e.index=n,e.t=i}function P(e,t){e.outPoint.assign(t.outPoint),e.index=t.index,e.t=t.t}function I(e,t,n,i){e.index=n,e.t=i,t.queryCoord2D(e.t,e.outPoint)}function d(e,t){const n=v();P(n,e),P(e,t),P(t,n)}function q(e,t,i,r,s,o){if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){for(;r.nextPath();)if(r.hasNextSegment()){const t=r.nextSegment();if(0!==(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h)(e,t.getEndXY(),0))return f(s,t.getEndXY(),-1,Number.NaN),f(o,t.getEndXY(),-1,Number.NaN),!0}r.resetToFirstPath()}if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){for(;i.nextPath();)if(i.hasNextSegment()){const e=i.nextSegment();if(0!==(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h)(t,e.getEndXY(),0))return f(s,e.getEndXY(),-1,Number.NaN),f(o,e.getEndXY(),-1,Number.NaN),!0}i.resetToFirstPath()}return!1}function M(e){const t=e.getPathCount(),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(e.getSegmentCount(),0);let i=0;for(let r=0;r<t;++r){const t=i+e.getSegmentCountPath(r);for(let s=i,o=e.getPathStart(r);s<t;++s,++o)n[s]=o;i=t}return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.s)(e.getPointCount(),n),n}function x(e,t){return!!Number.isNaN(t)||e<=t}function E(e){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return t.addEnvelope(e,!1),t}class b{constructor(e,t){if(this.m_env2DgeometryA=null,this.m_env2DgeometryB=null,this.m_progressCounter=0,this.m_progressTracker=t,this.m_maxSqrDistance=e*e,this.m_maxDistance=e,this.m_bIsNearCalc=!1,Number.isNaN(this.m_maxDistance)?this.m_maxDistance=Number.POSITIVE_INFINITY:this.m_maxDistance=e,this.m_maxSqrDistance=this.m_maxDistance*this.m_maxDistance,Number.isFinite(this.m_maxSqrDistance)){let e=Math.sqrt(this.m_maxSqrDistance);for(;e<this.m_maxDistance;)this.m_maxSqrDistance*=1+Number.EPSILON,e=Math.sqrt(this.m_maxSqrDistance)}}calculate(e,t,n,i){if(e.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P.type||t.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P.type){this.m_env2DgeometryA=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,this.m_env2DgeometryB=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB);if(!x(this.m_env2DgeometryA.distanceFromEnvelope(this.m_env2DgeometryB),this.m_maxDistance))return Number.POSITIVE_INFINITY}const r=N(new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)(),Number.NaN),s=N(new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)(),Number.NaN),o=this._ExecuteBruteForce(e,t,r,s);return x(o,this.m_maxDistance)?(null!==n&&P(n,r),null!==i&&P(i,s),o):Number.POSITIVE_INFINITY}isNear(e,t){if(this.m_bIsNearCalc=!0,e.isEmpty()||t.isEmpty())return!1;if(e===t)return!0;let n=!0;if(e.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P.type&&e.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.E.type||t.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.P.type&&t.getGeometryType()!==_Envelope_js__WEBPACK_IMPORTED_MODULE_6__.E.type||(n=!1),n){if(this.m_env2DgeometryA=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,this.m_env2DgeometryB=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!(this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)>this.m_maxSqrDistance))return!0;if(this.m_env2DgeometryA.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>this.m_maxSqrDistance)return!1}const i=N(new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)(),Number.NaN),r=N(new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)(),Number.NaN);return this._ExecuteBruteForce(e,t,i,r)<=this.m_maxDistance}progress_(e=!1){}_ExecuteBruteForce(e,t,i,r){switch(e.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:return this.distancePointGeometry(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return this.distanceMultipointGeometry(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.distanceEnvelopeGeometry(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.distanceMultipathGeometry(e,t,i,r);default:return Number.NaN}}distancePointGeometry(e,t,i,r){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:return this.distancePointPoint(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return this.distancePointMultipoint(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.distancePointMultipath(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.distancePointEnvelope(e,t,i,r);default:return Number.NaN}}distancePointPoint(e,t,n,i){const r=e.getXY(),s=t.getXY();return f(n,r,0,0),f(i,s,0,0),Math.sqrt(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(r,s))}distancePointMultipoint(e,t,n,i){const r=e.getXY();let s=this.m_maxSqrDistance,o=s,m=!1;const u=t.getPointCount(),c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let h=0;h<u;++h)if(t.queryXY(h,c),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(r,c),this.m_bIsNearCalc){if(o<=s)return 0}else if(!(o>s)&&(!m&&o===s||o<s)&&(s=o,f(n,r,0,0),f(i,c,h,0),m=!0,0===s))return 0;return m?Math.sqrt(s):Number.POSITIVE_INFINITY}distancePointMultipath(e,t,i,r){const s=!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB),o=e.getXY();if(!s&&t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&0!==(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h)(t,o,0))return f(i,o,0,0),f(r,o,-1,Number.NaN),0;t.getImpl().getAccelerators();let u=this.m_maxSqrDistance,c=u,h=-1;const l=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,g=t.querySegmentIterator();let y=!1;for(;g.nextPath();)for(;g.hasNextSegment();){const e=g.nextSegment();e.queryEnvelope(l);const t=l.sqrDistance(o);if(t>u)continue;if(!this.m_bIsNearCalc&&y&&t===u)continue;h=e.getClosestCoordinate(o,!1);const n=e.getCoord2D(h);if(c=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(o,n),this.m_bIsNearCalc){if(c<=u)return 0}else if(!(c>u)&&(!y||c<u)&&(u=c,f(i,o,0,0),f(r,n,g.getStartPointIndex(),h),y=!0,0===u))return 0}return y?Math.sqrt(u):Number.POSITIVE_INFINITY}distancePointEnvelope(e,t,n,i){const r=e.getXY();f(n,r,0,0),f(i,r,-1,Number.NaN);const s=t.asEnvelope2D();return!s.contains(r)?Math.sqrt(s.sqrDistance(r,i.outPoint)):0}distanceMultipointGeometry(e,t,i,r){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:{this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const n=this.distancePointMultipoint(t,e,r,i);return this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),n}case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return this.distanceMultipointMultipoint(e,t,i,r,1,1);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.distanceMultipointMultipath(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.distanceMultipointMultipath(e,E(t),i,r);default:return Number.NaN}}distanceMultipointMultipoint(n,i,r,s,o,m){const g={stack:[],error:void 0,hasError:!1};try{if(this.m_bIsNearCalc&&1===o&&1===m){const e=Math.trunc((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(Math.sqrt(n.getPointCount())+1,1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)())),t=Math.trunc((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(Math.sqrt(i.getPointCount())+1,1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()));if((e>=4||t>=4)&&this.distanceMultipointMultipoint(n,i,r,s,e,t)<=this.m_maxSqrDistance)return 0}let t=this.m_maxSqrDistance;const y=[n],_=[i],D=this.swapGeometriesIfBGtA(y,_);D&&(this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(o,o=m),d(r,s)),(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.b)(g,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.h)((()=>{d(r,s),this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!D),!1);const p=y[0].getImpl(),v=_[0].getImpl(),N=p.getPointCount(),P=v.getPointCount(),I=P>1;let q=!1;const M=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0;e<N;e+=o){if(p.queryXY(e,M),I){const e=this.m_env2DgeometryB.sqrDistance(M);if(this.m_bIsNearCalc){if(e>t)continue;if(this.m_env2DgeometryB.sqrMaxMinDistance(M)<=t)return 0}else if(e>=t)continue}for(let n=0;n<P;n+=m){v.queryXY(n,x);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(M,x);if(this.m_bIsNearCalc){if(i<=t)return 0}else if(!(i>t||q&&i===t)&&(!q||i<t)&&(f(r,M,e,0),f(s,x,n,0),q=!0,t=i,0===t))return q?Math.sqrt(t):Number.POSITIVE_INFINITY}}return q?Math.sqrt(t):Number.POSITIVE_INFINITY}catch(y){g.error=y,g.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.c)(g)}}distanceMultipointMultipath(e,t,i,r){let s=!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)&&t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon;const o=t.querySegmentIterator();o.stripAttributes();const u=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let h=this.m_maxSqrDistance;const l=e.getImpl(),g=l.getPointCount(),y=g>1;let D=!1;for(;o.nextPath();)for(;o.hasNextSegment();){const e=o.nextSegment();if(e.queryLooseEnvelope(u),y){const e=u.sqrDistanceEnvelope(this.m_env2DgeometryA,null,null);if(this.m_bIsNearCalc){if(e>h)continue}else if(e>h||D&&e===h)continue}for(let n=0;n<g;n++){if(l.queryXY(n,c),s&&0!==(0,_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.h)(t,c,0))return f(i,c,-1,Number.NaN),f(r,c,n,0),0;{const e=u.sqrDistance(c);if(this.m_bIsNearCalc){if(e>h)continue}else if(e>h)continue}const a=e.getClosestCoordinate(c,!1),g=e.getCoord2D(a);c.subThis(g);const y=c.sqrLength();if(this.m_bIsNearCalc){if(y<=h)return 0}else if(!(y>h)&&(!D||y<h)&&(h=y,f(i,l.getXY(n),n,0),f(r,g,o.getStartPointIndex(),a),D=!0,0===h))return 0}s=!1}return D?Math.sqrt(h):Number.POSITIVE_INFINITY}distanceEnvelopeGeometry(e,t,i,r){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:return this.distancePointEnvelope(t,e,r,i);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:{this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const n=this.distanceMultipointMultipath(t,E(e),r,i);return this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),n}case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.distanceMultipathMultipath(E(e),t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.distanceEnvelopeEnvelope(e,t,i,r);default:return Number.NaN}}distanceEnvelopeEnvelope(e,t,n,i){n.t=Number.NaN,n.index=-1,i.t=Number.NaN,i.index=-1;const r=e.asEnvelope2D(),s=t.asEnvelope2D();return Math.sqrt(r.sqrDistanceEnvelope(s,n.outPoint,i.outPoint))}distanceMultipathGeometry(e,t,i,r){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:{this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const n=this.distancePointMultipath(t,e,r,i);return this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),n}case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:{this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const n=this.distanceMultipointMultipath(t,e,r,i);return this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),n}case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.distanceMultipathMultipath(e,t,i,r);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.distanceMultipathMultipath(e,E(t),i,r);default:return Number.NaN}}distanceMultipathMultipath(n,i,s,o){const m={stack:[],error:void 0,hasError:!1};try{const t=[n],a=[i],g=this.swapGeometriesIfAGtB(t,a);g&&(this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),d(s,o)),(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.b)(m,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.h)((()=>{d(s,o),this.m_env2DgeometryB=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)}),!g),!1);const y=t[0],D=a[0],p=y.querySegmentIterator();p.stripAttributes();const N=D.querySegmentIterator();if(N.stripAttributes(),this.m_bIsNearCalc&&this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)<=this.m_maxSqrDistance)return 0;if(this.m_bIsNearCalc){const e=Math.trunc((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(Math.sqrt(y.getPointCount())+1,1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)())),t=Math.trunc((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(Math.sqrt(y.getPointCount())+1,1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()));if(this.distanceMultipointMultipoint(y,D,s,o,e,t)<=this.m_maxSqrDistance)return 0}if(!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)){const e=v(),t=v();if(q(y,D,p,N,e,t))return P(s,e),P(o,t),0}const f=M(y),x=[],E=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,b=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,S=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D,B=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_5__.Envelope2D;let A=this.m_maxSqrDistance,T=!0,C=!1;for(let e=0,n=f.length;e<n;++e){y.querySegment(f[e],E,!0);const t=E.get();if(t.queryEnvelope(b),!(b.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>A)){if(this.m_bIsNearCalc&&b.sqrMaxDistanceEnvelope(this.m_env2DgeometryB)<=A)return 0;for(;N.nextPath();){if(this.progress_(),T)D.queryPathEnvelope(N.getPathIndex(),B),x[N.getPathIndex()]=B.clone();else if(b.sqrDistanceEnvelope(x[N.getPathIndex()],null,null)>A)continue;for(;N.hasNextSegment();){const n=N.nextSegment();if(n.queryEnvelope(S),b.sqrDistanceEnvelope(S,null,null)<=A){const i=!b.isIntersecting(S),r=[0],m=[0];let a=t.distance(n,i,r,m);if(a*=a,this.m_bIsNearCalc&&a<=this.m_maxSqrDistance)return 0;if(a<A||a===A&&f[e]<s.index){if(C=!0,I(s,t,f[e],r[0]),I(o,n,N.getStartPointIndex(),m[0]),0===a)return 0;A=a}}}}N.resetToFirstPath(),T=!1}}return C?Math.sqrt(A):Number.POSITIVE_INFINITY}catch(a){m.error=a,m.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__.c)(m)}}swapGeometriesIfAGtB(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(e[0])>(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(t[0])&&(t[0]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(e[0],e[0]=t[0]),!0)}swapGeometriesIfBGtA(e,t){return this.swapGeometriesIfAGtB(t,e)}}


/***/ }),

/***/ 75992:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ Ut),
/* harmony export */   A: () => (/* binding */ st),
/* harmony export */   B: () => (/* binding */ ot),
/* harmony export */   C: () => (/* binding */ Et),
/* harmony export */   D: () => (/* binding */ $),
/* harmony export */   E: () => (/* binding */ re),
/* harmony export */   F: () => (/* binding */ Wt),
/* harmony export */   G: () => (/* binding */ Qt),
/* harmony export */   H: () => (/* binding */ Rt),
/* harmony export */   I: () => (/* binding */ Ct),
/* harmony export */   J: () => (/* binding */ Tt),
/* harmony export */   K: () => (/* binding */ Q),
/* harmony export */   L: () => (/* binding */ Lt),
/* harmony export */   M: () => (/* binding */ Yt),
/* harmony export */   N: () => (/* binding */ pt),
/* harmony export */   O: () => (/* binding */ w),
/* harmony export */   P: () => (/* binding */ ee),
/* harmony export */   Q: () => (/* binding */ Pt),
/* harmony export */   R: () => (/* binding */ wt),
/* harmony export */   S: () => (/* binding */ at),
/* harmony export */   T: () => (/* binding */ ct),
/* harmony export */   U: () => (/* binding */ et),
/* harmony export */   V: () => (/* binding */ z),
/* harmony export */   W: () => (/* binding */ Mt),
/* harmony export */   X: () => (/* binding */ Ht),
/* harmony export */   Y: () => (/* binding */ qt),
/* harmony export */   Z: () => (/* binding */ Jt),
/* harmony export */   _: () => (/* binding */ Xt),
/* harmony export */   a: () => (/* binding */ zt),
/* harmony export */   a0: () => (/* binding */ Zt),
/* harmony export */   a1: () => (/* binding */ Gt),
/* harmony export */   a2: () => (/* binding */ yt),
/* harmony export */   a3: () => (/* binding */ dt),
/* harmony export */   a4: () => (/* binding */ bt),
/* harmony export */   a5: () => (/* binding */ $t),
/* harmony export */   a6: () => (/* binding */ U),
/* harmony export */   b: () => (/* binding */ Bt),
/* harmony export */   c: () => (/* binding */ At),
/* harmony export */   d: () => (/* binding */ X),
/* harmony export */   e: () => (/* binding */ Ft),
/* harmony export */   f: () => (/* binding */ Dt),
/* harmony export */   g: () => (/* binding */ It),
/* harmony export */   h: () => (/* binding */ Vt),
/* harmony export */   i: () => (/* binding */ Ot),
/* harmony export */   j: () => (/* binding */ M),
/* harmony export */   k: () => (/* binding */ ne),
/* harmony export */   l: () => (/* binding */ H),
/* harmony export */   m: () => (/* binding */ V),
/* harmony export */   n: () => (/* binding */ G),
/* harmony export */   o: () => (/* binding */ B),
/* harmony export */   p: () => (/* binding */ S),
/* harmony export */   q: () => (/* binding */ Y),
/* harmony export */   r: () => (/* binding */ k),
/* harmony export */   s: () => (/* binding */ kt),
/* harmony export */   t: () => (/* binding */ j),
/* harmony export */   u: () => (/* binding */ W),
/* harmony export */   v: () => (/* binding */ Nt),
/* harmony export */   w: () => (/* binding */ O),
/* harmony export */   x: () => (/* binding */ nt),
/* harmony export */   y: () => (/* binding */ J),
/* harmony export */   z: () => (/* binding */ K)
/* harmony export */ });
/* unused harmony export a7 */
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86330);
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21566);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62188);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const C=[0,0,Number.NaN,0,0,0,0,0,-1,-1,0,0,0,0],T=[2,1,1,1,3,1,2,3,2,4,1,1,2,1],R=[1,1,1,0,2,1,1,1,0,0,0,0,0,1],A=[1,1,1,2,0,0,0,0,2,2,4,2,2,1],q=[4,8,4,8,1],w=25;function B(){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(w,Number.NaN)}let z=class s{getAttributeCount(){return this.m_attributeCount}getSemantics(t){return this.m_indexToSemantics[t]}getSemanticsBitArray(){return this.m_semanticsBitArray}getAttributeIndex(t){return this.m_semanticsToIndexMap[t]}static getInterpolation(t){return R[t]}static getPersistence(t){return A[t]}static getPersistenceSize(t){return q[t]}static getPersistenceSizeFromSemantics(t){return s.getPersistenceSize(s.getPersistence(t))*s.getComponentCount(t)}static getComponentCount(t){return T[t]}static maxComponentCount(){return 4}static isInteger(t){return 2===t||3===t||4===t}static isIntegerSemantics(t){return s.isInteger(s.getPersistence(t))}static isTexture(t){return 5===t||6===t||7===t}hasAttribute(t){return!!(this.m_semanticsBitArray&1<<t)}hasAttributesFrom(t){return(this.m_semanticsBitArray&t.m_semanticsBitArray)===t.m_semanticsBitArray}hasZ(){return this.hasAttribute(1)}hasM(){return this.hasAttribute(2)}hasID(){return this.hasAttribute(3)}getTotalComponentCount(){return this.m_totalComponentCount}static getDefaultValue(t){return C[t]}static isDefaultValue(e,s){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.Q)(C[e],s)}equals(t){return this===t}getDefaultPointAttributes(){return this.m_defaultPointAttributes}getPointAttributeOffset(t){return this.m_pointAttributeOffsets[t]}constructor(t){this.m_semanticsBitArray=t,this.m_attributeCount=0,this.m_totalComponentCount=0,this.m_semanticsToIndexMap=new Int32Array(14),this.m_indexToSemantics=new Int32Array(14),this.m_pointAttributeOffsets=new Int32Array(14),this.m_defaultPointAttributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(w,Number.NaN),this.m_semanticsToIndexMap.fill(-1),this.m_indexToSemantics.fill(-1);let i=0,n=1,r=14;for(;i<r;i++)t&n&&(this.m_semanticsToIndexMap[i]=this.m_attributeCount,this.m_indexToSemantics[this.m_attributeCount]=i,this.m_attributeCount++,this.m_totalComponentCount+=s.getComponentCount(i)),n<<=1;let h=0;for(i=0,r=this.getAttributeCount();i<r;i++){const t=this.getSemantics(i),e=s.getComponentCount(t),n=s.getDefaultValue(t);this.m_pointAttributeOffsets[i]=h;for(let s=0;s<e;s++)this.m_defaultPointAttributes[h]=n,h++}}};var L=z;function S(){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(14,0)}class F{static getInstance(){return F.s_thisInstance}constructor(){this.m_map=new Map,this.m_vd2D=new L(1),this.m_map.set(1,this.m_vd2D),this.m_vd3D=new L(3),this.m_map.set(3,this.m_vd2D)}GetVD2D(){return this.m_vd2D}GetVD3D(){return this.m_vd3D}FindOrAdd(t){if(1===t)return this.GetVD2D();if(3===t)return this.GetVD3D();const e=this.m_map.get(t);if(e)return e;const s=new L(t);return this.m_map.set(t,s),s}}function P(t){return F.getInstance().FindOrAdd(t)}function H(t,e){if(!t||!e)return e||t;const s=t.getSemanticsBitArray()|e.getSemanticsBitArray();return(s&t.getSemanticsBitArray())===s?t:(s&e.getSemanticsBitArray())===s?e:P(s)}function V(t,e){const s=t.getSemanticsBitArray()|1<<e;return(s&t.getSemanticsBitArray())===s?t:P(s)}function k(t,e){const s=(t.getSemanticsBitArray()|1<<e)-(1<<e);return s===t.getSemanticsBitArray()?t:P(s)}function M(){return F.getInstance().GetVD2D()}function O(){return F.getInstance().GetVD3D()}function Y(t,e,s){if(s.fill(-1),null!==t&&null!==e)for(let i=0,n=t.getAttributeCount();i<n;i++)s[i]=e.getAttributeIndex(t.getSemantics(i))}F.s_thisInstance=new F;class X{static construct(t,e,s){return new X(t,e,s)}constructor(t,e,s){void 0!==t?(this.x=t,this.y=e,this.z=s):this.x=this.y=this.z=Number.NaN}get 0(){return this.x}get 1(){return this.y}get 2(){return this.z}set 0(t){this.x=t}set 1(t){this.y=t}set 2(t){this.z=t}clone(){return new X(this.x,this.y,this.z)}assign(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}setCoords(t,e,s){return this.x=t,this.y=e,this.z=s,this}setCoordsPoint2DZ(t,e){return this.setCoords(t.x,t.y,e)}setCoordsPoint3D(t){this.x=t.x,this.y=t.y,this.z=t.z}setZero(){this.x=0,this.y=0,this.z=0}setNormalized(t){this.assign(t),this.normalizeThis()}normalizeThis(){const t=this.length();return t?(this.x/=t,this.y/=t,this.z/=t):(this.x=1,this.y=0,this.z=0),this}getUnitVector(){const t=new X;return t.setNormalized(this),t}sqrLength(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthXY(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}static sqrDistance(t,e){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(t.x-e.x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(t.y-e.y)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(t.z-e.z)}static sqrDistanceCoords(t,e,i,n,r,h){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(t-n)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(e-r)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(i-h)}static distance(t,e){return Math.sqrt(X.sqrDistance(t,e))}isEqual(t,e){return void 0===e&&(e=0),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.G)(this.z,t.z,e)}static compareByLength(t,e,s,i){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}isEqualCoords(t,e,s,i){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),this.x===t&&this.y===e&&this.z===s}isEqualsTols(t,e,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}isEqualCoordsTols(t,e,s,i,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}static st_isEqual(t,e,s,i){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}equals(t,e){return this.isEqual(t,e)}equalsTols(t,e,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}divThis(t){return this.x/=t,this.y/=t,this.z/=t,this}subThis(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}setSub(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}sub(t){return X.construct(this.x-t.x,this.y-t.y,this.z-t.z)}addThis(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}add(t){return this.clone().addThis(t)}setAdd(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}mul(t){return X.construct(this.x*t,this.y*t,this.z*t)}dotProduct(t){return this.x*t.x+this.y*t.y+this.z*t.z}crossProductVector(t){const e=this.y*t.z-t.y*this.z,s=t.x*this.z-this.x*t.z,i=this.x*t.y-t.x*this.y;return new X(e,s,i)}setCrossProductVector(t,e){const s=t.y*e.z-e.y*t.z,i=e.x*t.z-t.x*e.z,n=t.x*e.y-e.x*t.y;return this.x=s,this.y=i,this.z=n,this}setScaled(t,e){return this.x=t*e.x,this.y=t*e.y,this.z=t*e.z,this}scaleThis(t){return this.x*=t,this.y*=t,this.z*=t,this}scaleZThis(t){return this.z*=t,this}setNAN(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),this}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)||Number.isNaN(this.z)}static getNAN(){return X.construct(Number.NaN,Number.NaN,Number.NaN)}isFinite(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}isZero(){return 0===this.x&&0===this.y&&0===this.z}norm(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}sqrDistanceFromCenterToSpheroidSurface(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}distanceFromCenterToSpheroidSurface(t,e){return Math.sqrt(this.sqrDistanceFromCenterToSpheroidSurface(t,e))}static getClosestCoordinate(t,e,s,i=!1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}compare(t){return this.y<t.y?-1:this.y>t.y?1:this.x<t.x?-1:this.x>t.x?1:this.z<t.z?-1:this.z>t.z?1:0}compareXYZ(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}negateThis(){this.x=-this.x,this.y=-this.y,this.z=-this.z}static averageFast(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}static average(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}static size(){return X.dimensions}static lerp(t,e,s){const i=new X;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.x)(t,e,s,i),i}static slerp(t,e,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}static compareVectors(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}static selectRightHandedBasisFromNormal(t,e,s){const i=t.getUnitVector(),n=i.createAPerpendicular(),r=new X;r.setCrossProductVector(i,n),r.normalizeThis(),e.setCoordsPoint3D(n),s.setCoordsPoint3D(r)}createAPerpendicular(){const t=[this.crossProductVector(new X(0,0,1)),this.crossProductVector(new X(1,0,0)),this.crossProductVector(new X(0,1,0))],e=[t[0].sqrLength(),t[1].sqrLength(),t[2].sqrLength()],s=t[e.reduce(((t,s,i)=>e[t]>e[i]?t:i),0)];return s.normalizeThis(),s}calculateAngle(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}static crossDotSign(t,e,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}static isBisectorRobust(t,e,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}static compareZOrder(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}}X.dimensions=3;class G{static constructEmpty(){return new G(Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN,Number.NaN)}constructor(t,e,s,i,n,r){this.m_EnvelopeType=3,this.xmin=t,this.ymin=e,this.zmin=s,this.xmax=i,this.ymax=n,this.zmax=r,this.normalize()}inflate(t){this.inflateCoords(t,t,t)}inflateCoords(t,e,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}getEnvelope2D(){return new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(this.xmin,this.ymin,this.xmax,this.ymax)}getEnvelopeZs(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E(this.zmin,this.zmax)}setEmptyZ(){this.zmin=Number.NaN,this.zmax=Number.NaN}normalize(){let t=!1;this.xmin<=this.xmax||(this.xmax=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.xmin,this.xmin=this.xmax),t=!0),this.ymin<=this.ymax||(this.ymax=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.ymin,this.ymin=this.ymax),t=!0),!t||this.xmin<=this.xmax&&this.ymin<=this.ymax?this.zmin<=this.zmax||(this.zmax=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.zmin,this.zmin=this.zmax),this.zmin<=this.zmax||this.setEmptyZ()):this.setEmpty()}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}isEmptyZ(){return Number.isNaN(this.zmin)||Number.isNaN(this.zmax)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.zmin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN,this.zmax=Number.NaN}mergeEnv3D(t){t.isEmpty()||(this.mergeCoords(t.xmin,t.ymin,t.zmin),this.mergeCoords(t.xmax,t.ymax,t.zmax))}mergeNe(t){this.mergeNeCoords(t.x,t.y,t.z)}mergeNeCoords(t,e,s){this.xmin>t?this.xmin=t:this.xmax<t&&(this.xmax=t),this.ymin>e?this.ymin=e:this.ymax<e&&(this.ymax=e),this.zmin>s?this.zmin=s:this.zmax<s&&(this.zmax=s)}mergeCoords(t,e,s){this.isEmpty()?(this.xmin=t,this.xmax=t,this.ymin=e,this.ymax=e,this.zmin=s,this.zmax=s):(this.isEmptyZ()&&(this.zmin=s,this.zmax=s),this.mergeNeCoords(t,e,s))}setCoords(t,e,s,i,n,r){this.xmin=t,this.ymin=e,this.zmin=s,this.xmax=i,this.ymax=n,this.zmax=r,this.normalize()}sqrDistanceEnvelope3DAndPoints(t,e,s,i=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}sqrMaxDistance(t,e=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}}const U=-559038737;var Z=z;function Q(t,e,s){switch(t){case 0:return new it(e,s);case 1:return new nt(e,s);case 2:return new st(e,s);case 3:throw new Error("64 bit int attribute stream not implemented");case 4:return new et(e,s);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("")}}function j(t,e){const s=Z.getComponentCount(t);return Q(Z.getPersistence(t),e*s,Z.getDefaultValue(t))}function W(t,e){const s=Z.getComponentCount(t);return Q(Z.getPersistence(t),e*s)}function J(t,e){return new st(t,e)}function K(t,e){return new et(t,e)}function $(t,e){return new nt(t,e)}class tt{size(){return this.m_size}checkResize(t,e){t>this.m_size&&this.resize(t,e)}resize(t,e){if((t=Math.trunc(t))===this.m_size)return;const s=!!e||Number.isNaN(e);if(t<this.m_a.length)this.m_a.length>tt.s_resizeMin&&1.25*t<this.m_a.length&&(this.m_a=this.m_a.slice(0,t)),s&&t>this.m_size&&this.m_a.fill(e,this.m_size,t);else if(t>=this.m_a.length){const i=1.25*t,n=new this.m_a.constructor(i);n.set(this.m_a),this.m_a=n,s&&this.m_a.fill(e,this.m_size,t)}this.m_size=t}resizeRounded(t,e){return this.resize(t,e)}reserve(t){}read(t){return this.m_a[t]}readAsDbl(t){return this.read(t)}write(t,e){this.m_a[t]=e}writeAsDbl(t,e){this.write(t,e)}setRange(t,e,s){(e<0||s<0||s+e>this.size())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),this.m_a.fill(t,e,e+s)}add(t){this.resize(this.m_size+1),this.m_a[this.m_size-1]=t}addArray(t,e){const s=this.m_size;void 0===e?(this.resize(this.m_size+t.length),this.m_a.set(t,s)):(this.resize(this.m_size+e),this.m_a.set(t.slice(0,e),s))}equals(t,e,s,i){if(this.getPersistence()!==t.getPersistence())return!1;return rt(this,t,e,s,i)}insertRange(t,e,s,i){const n=this.m_size;this.checkResize(Math.max(0,i)+s),this.m_a.copyWithin(t+s,t,i>=0?i:n),this.m_a.fill(e,t,t+s)}readRange(t,e){return this.m_a.slice(t,t+e)}insertRangeFromStream(t,e,s,i,n,r,h){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.getPersistence()===e.getPersistence());const o=e,a=this.m_size;i&&this.checkResize(Math.max(0,h)+i),this.m_a.copyWithin(t+i,t,h>=0?h:a),this.m_a.set(o.readRange(s,i),t),n||this.reverseRange(t,i,r)}writeRange(t,e,s,i,n,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.getPersistence()===s.getPersistence());const h=s;if((t<0||e<0||i<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),h.size()<i+e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),0===e)return;this.size()<e+t&&this.resize(e+t);const o=h.m_a.subarray(i,i+e);ht(this.m_a,t,e,o)}insertAttributes(t,e,s,i){const n=Z.getComponentCount(s);this.m_a.copyWithin(t+n,t,i>=0?i:this.m_size);for(let r=0;r<n;r++)this.m_a[t+r]=e.getAttributeAsDbl(s,r)}insertAttributesFromPoints(t,e,s,i,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(Z.getPersistence(i)===this.getPersistence());const r=Z.getComponentCount(i),h=this.m_size;if(this.checkResize(Math.max(0,n)+r*s),this.m_a.copyWithin(t+r*s,t,n>=0?n:h),0===i){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P;for(let n=t,r=0;r<s;r++,n+=2)e[r].queryXY(i),this.m_a[n]=i.x,this.m_a[n+1]=i.y}else if(1===r)for(let o=t,a=0;a<s;a++,o++)this.m_a[o]=e[a].getAttributeAsDbl(i,0);else for(let o=t,a=0;a<s;a++,o+=r)for(let t=0;t<r;t++)this.m_a[o+t]=e[a].getAttributeAsDbl(i,t)}eraseRange(t,e,s){this.m_size<t+e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),this.m_a.copyWithin(t,t+e),this.m_size-=e}reverseRange(t,e,s){if((s<1||e%s!==0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),this.m_a.subarray(t,t+e).reverse(),s>1)for(let i=t,n=t+e;i<n;i+=s){let t=i,e=i+s-1;for(;t<e;){const s=this.m_a[t];this.m_a[t]=this.m_a[e],this.m_a[e]=s,t++,e--}}}rotate(t,e,s){(e<t||e>s||t>s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("rotate"),e!==t&&e!==s&&(this.reverseRange(t,e-t,1),this.reverseRange(e,s-e,1),this.reverseRange(t,s-t,1))}sort(t,e,s){this.m_a.subarray(t,e).sort(s)}constructor(t){if(t.move)this.m_a=t.move.m_a,this.m_size=t.move.m_size,t.move.m_a=t.move.m_a.slice(0,0),t.move.m_size=0;else if(t.copy)this.m_size=t.copy.m_size,t.maxSize&&(this.m_size=Math.min(t.maxSize,this.m_size)),this.m_a=t.copy.m_a.slice(0,this.m_size);else{const e=Math.max(t.size,tt.s_constructMin);this.m_a=new t.ctor(e),(t.defaultValue||Number.isNaN(t.defaultValue))&&this.m_a.fill(t.defaultValue),this.m_size=t.size}}}tt.s_constructMin=2,tt.s_resizeMin=30;class et extends tt{setBits(t,e){this.m_a[t]|=e}clearBits(t,e){this.m_a[t]&=~e}getPersistence(){return 4}clone(){return new et({ctor:Int8Array,copy:this})}restrictedClone(t){return new et({ctor:Int8Array,copy:this,maxSize:t})}constructor(t,e){super("number"==typeof t?{ctor:Int8Array,size:t,defaultValue:e}:t)}}class st extends tt{getPersistence(){return 2}clone(){return new st({ctor:Int32Array,copy:this})}restrictedClone(t){return new st({ctor:Int32Array,copy:this,maxSize:t})}write(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(e<=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.i)()),super.write(t,e)}constructor(t,e){super("number"==typeof t?{ctor:Int32Array,size:t,defaultValue:e}:t)}}class it extends tt{getPersistence(){return 0}clone(){return new it({ctor:Float32Array,copy:this})}restrictedClone(t){return new it({ctor:Float32Array,copy:this,maxSize:t})}constructor(t,e){super("number"==typeof t?{ctor:Float32Array,size:t,defaultValue:e}:t)}}class nt extends tt{getPersistence(){return 1}getArray(){return this.m_a}applyTransformation(t,e,s){(1&e||e+2*s>this.size())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)();const i=0===e?this.m_a:this.m_a.subarray(e);t.transformInterleavedPoints(i,s,i)}readPoint2D(t){const e=this.m_a[t],s=this.m_a[t+1];return new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P(e,s)}queryPoint2D(t,e){return e.x=this.m_a[t],e.y=this.m_a[t+1],e}writePoint2D(t,e){this.write(t,e.x),this.write(t+1,e.y)}insert(t,e,s){this.checkResize(s+2),this.m_a.copyWithin(t+2,t,s),this.m_a[t]=e.x,this.m_a[t+1]=e.y}insertRangeFromPoints(t,e,s,i,n,r){const h=this.m_size;if(this.checkResize(Math.max(r,0)+2*i),this.m_a.copyWithin(t+2*i,t,r>=0?r:h),n)for(let o=s,a=t,m=0;m<i;++m,++o){const t=e[o];this.m_a[a++]=t.x,this.m_a[a++]=t.y}else for(let o=s+i-1,a=t,m=0;m<i;++m,--o){const t=e[o];this.m_a[a++]=t.x,this.m_a[a++]=t.y}}queryRange(t,e,s,i,n){if((t<0||e<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),!i&&(n<=0||e%n!==0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),0===e)return;if(1===e)return void(s[0]=this.m_a[t]);const r=this.m_a.subarray(t,t+e);s.set(r)}writeRangeFromArray(t,e,s,i,n){if((t<0||e<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),0===e)return;if(1===e)return void(this.m_a[t]=s[0]);let r=s;e<s.length&&(r=s.subarray(0,e)),this.m_a.set(r,t)}clone(){return new nt({ctor:Float64Array,copy:this})}restrictedClone(t){return new nt({ctor:Float64Array,copy:this,maxSize:t})}constructor(t,e){super("number"==typeof t?{ctor:Float64Array,size:t,defaultValue:e}:t)}}function rt(t,e,s,n,r){if(t.getPersistence()!==e.getPersistence())return!1;const h=t.getPersistence()<=1,o=t.size(),a=e.size();if(n>o||n>a)return!1;if(r)if(h){for(let m=s;m<n;m++)if(!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.G)(t.read(m),e.read(m),r))return!1}else for(let i=s;i<n;i++){let s=t.read(i)-e.read(i);if(s<0&&(s=-s),s>r)return!1}else for(let i=s;i<n;i++){const s=t.read(i),n=e.read(i);if(s!==n){if(h&&Number.isNaN(s)&&Number.isNaN(n))continue;return!1}}return!0}function ht(t,e,s,i,n,r){if((e<0||s<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(),0===s)return;if(1===s)return void(t[e]=i[0]);let h=i;s<i.length&&(h=i.subarray(0,s)),t.set(h,e)}class ot{constructor(){this.m_minValue=-1,this.m_maxValue=-1,this.m_dy=Number.NaN,this.m_buckets=new st(0),this.m_bucketedIndices=new st(0)}static sortEx(t,e,s,i,n=32){if(s-e<=n)return void i.userSort(e,s,t);(new ot).sort(t,e,s,i,n)}sort(t,e,s,i,n=32){if(s-e<=n)return void i.userSort(e,s,t);let r=!0,h=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let m=e;m<s;m++){const e=i.getValue(t.read(m));e<h&&(h=e),e>o&&(o=e)}if(this.reset(s-e,h,o,s-e)){for(let r=e;r<s;r++){const s=t.read(r),n=i.getValue(s),h=this.getBucket(n);this.m_buckets.write(h,this.m_buckets.read(h)+1),this.m_bucketedIndices.write(r-e,s)}let n=this.m_buckets.read(0);this.m_buckets.write(0,0);for(let t=1,e=this.m_buckets.size();t<e;t++){const e=this.m_buckets.read(t);this.m_buckets.write(t,n),n+=e}for(let r=e;r<s;r++){const s=this.m_bucketedIndices.read(r-e),n=i.getValue(s),h=this.getBucket(n),o=this.m_buckets.read(h);t.write(o+e,s),this.m_buckets.write(h,o+1)}r=!1}if(r)return void i.userSort(e,s,t);let a=0;for(let m=0,_=this.m_buckets.size();m<_;m++){const s=a;a=this.m_buckets.read(m),a>s&&i.userSort(e+s,e+a,t)}this.m_buckets.size()>100&&(this.m_buckets.resize(0),this.m_bucketedIndices.resize(0))}reset(t,e,s,i){if(t<2||s===e)return!1;const n=Math.min(ot.c_maxBuckets,t);return this.m_buckets.resize(n),this.m_buckets.setRange(0,0,this.m_buckets.size()),this.m_minValue=e,this.m_maxValue=s,this.m_bucketedIndices.resize(i),this.m_dy=(s-e)/(n-1),!0}getBucket(t){return Math.trunc((t-this.m_minValue)/this.m_dy)}getBucketCount(){return this.m_buckets.size()}}ot.c_maxBuckets=65536;class at{capacity(){return this.capacity_}constructor(t){this.m_buffer=new Int32Array(0),this.m_firstFree=-1,this.m_last=0,this.size_=0,this.capacity_=0,this.stride=t}size(){return this.size_}deleteElement(t){t<this.m_last?(this.m_buffer[t*this.stride]=this.m_firstFree,this.m_firstFree=t):this.m_last--,this.size_--}getField(t,e){return this.m_buffer[t*this.stride+e]}setField(t,e,s){this.m_buffer[t*this.stride+e]=s}elementToIndex(t){return t}newElement(){let t=this.m_firstFree;if(-1===t){if(this.m_last===this.capacity_){let t=0!==this.capacity_?Math.trunc(3*(this.capacity_+1)/2):1;if(t>Number.MAX_SAFE_INTEGER&&(t=Number.MAX_SAFE_INTEGER),t===this.capacity_)throw new Error("index out of bounds");this.grow_(t)}t=this.m_last,this.m_last++}else this.m_firstFree=this.m_buffer[t*this.stride];this.size_++;for(let e=t*this.stride;e<t*this.stride+this.stride;e++)this.m_buffer[e]=-1;return t}newElementPset(t){let e=this.m_firstFree;if(-1===e){if(this.m_last===this.capacity_){let t=0!==this.capacity_?Math.trunc(3*(this.capacity_+1)/2):1;if(t>Number.MAX_SAFE_INTEGER&&(t=Number.MAX_SAFE_INTEGER),t===this.capacity_)throw new Error("index out of bounds");this.grow_(t)}e=this.m_last,this.m_last++}else this.m_firstFree=this.m_buffer[e*this.stride];this.size_++;const s=e*this.stride;for(let i=0;i<t.length;i++)this.m_buffer[s+i]=t[i];return e}deleteAll(t){this.m_firstFree=-1,this.m_last=0,this.size_=0,t&&(this.m_buffer=new Int32Array(0),this.capacity_=0)}setCapacity(t){t>this.capacity_&&this.grow_(t)}swap(t,e){const s=t*this.stride,i=e*this.stride;for(let n=0;n<this.stride;n++){const t=this.m_buffer[i+n];this.m_buffer[i+n]=this.m_buffer[s+n],this.m_buffer[s+n]=t}}swapField(t,e,s){const i=this.m_buffer[this.stride*e+s];this.m_buffer[this.stride*e+s]=this.m_buffer[this.stride*t+s],this.m_buffer[this.stride*t+s]=i}static impossibleIndex2(){return-2}static impossibleIndex3(){return-3}static isValidElement(t){return t>=0}grow_(t){null==this.m_buffer&&(this.m_buffer=new Int32Array(0));const e=this.stride*t,s=new Int32Array(e);s.set(this.m_buffer,0),this.m_buffer=s,this.capacity_=t}}function mt(t,e){return{element:t,box:e.clone()}}class _t{constructor(t,e,s){this.m_extent=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,this.m_dataExtent=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,this.m_childExtents=[new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D],this.m_elementNodes=new at(4),this.m_data=[],this.m_freeData=[],this.m_root=-1,this.m_height=8,void 0===s&&(s=!1),this.m_quadTreeNodes=new at(s?11:10),this.m_bStoreDuplicates=s,this.reset_(t,e)}reset(t,e){this.m_quadTreeNodes.deleteAll(!1),this.m_elementNodes.deleteAll(!1),this.m_data.length=0,this.m_freeData.length=0,this.reset_(t,e)}insert(t,e){if(-1===this.m_root&&this.createRoot_(),this.m_bStoreDuplicates){const s=this.insertDuplicates_(t,e,0,this.m_extent,this.m_root,!1,-1);return-1!==s&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:e}):this.m_dataExtent.mergeEnvelope2D(e)),s}const s=this.insert_(t,e,0,this.m_extent,this.m_root,!1,-1);return-1!==s&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:e}):this.m_dataExtent.mergeEnvelope2D(e)),s}insertEx(t,e,s){if(-1===this.m_root&&this.createRoot_(),this.m_bStoreDuplicates){const s=this.insertDuplicates_(t,e,0,this.m_extent,this.m_root,!1,-1);return-1!==s&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:e}):this.m_dataExtent.mergeEnvelope2D(e)),s}let i;i=-1===s?this.m_root:this.getQuad_(s);const n=this.getHeight(i),r=this.getExtent(i),h=this.insert_(t,e,n,r,i,!1,-1);return-1!==h&&(this.m_dataExtent.isEmpty()?this.m_dataExtent.setCoords({env2D:e}):this.m_dataExtent.mergeEnvelope2D(e)),h}removeElement(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}getElement(t){return this.getElementValue_(this.getData_(t))}getElementAtIndex(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}getElementExtent(t){const e=this.getData_(t);return this.getBoundingBoxValue_(e).clone()}getElementExtentAtIndex(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}getDataExtent(){return this.m_dataExtent.clone()}getQuadTreeExtent(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}getHeight(t){return this.m_quadTreeNodes.getField(t,6)>>_t.m_heightBitShift}getMaxHeight(){return this.m_height}getExtent(t){const e=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;if(e.setCoords({env2D:this.m_extent}),t===this.m_root)return e;const s=[];let i=t;do{s.push(this.getQuadrant_(i)),i=this.getParent_(i)}while(i!==this.m_root);const n=s.length;for(let r=0;r<n;r++){const t=s.at(-1);s.pop(),0===t?(e.xmin=.5*(e.xmin+e.xmax),e.ymin=.5*(e.ymin+e.ymax)):1===t?(e.xmax=.5*(e.xmin+e.xmax),e.ymin=.5*(e.ymin+e.ymax)):2===t?(e.xmax=.5*(e.xmin+e.xmax),e.ymax=.5*(e.ymin+e.ymax)):(e.xmin=.5*(e.xmin+e.xmax),e.ymax=.5*(e.ymin+e.ymax))}return e}getQuad(t){return this.getQuad_(t)}getElementCount(){return-1===this.m_root?0:this.getSubTreeElementCount_(this.m_root)}getSubTreeElementCount(t){return this.getSubTreeElementCount_(t)}getContainedSubTreeElementCount(t){return this.m_bStoreDuplicates?this.getContainedSubTreeElementCount_(t):this.getSubTreeElementCount_(t)}getIntersectionCount(t,e,s){if(-1===this.m_root)return 0;const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;i.setCoords({env2D:t}),i.inflateCoords(e,e);const n=[],r=[];n.push(this.m_root),r.push(this.m_extent.clone());const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.m)(_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,4);let o=0;for(;n.length>0;){let t=!1;const e=n.at(-1),a=r.at(-1);if(n.pop(),r.pop(),i.containsEnvelope(a)){if(o+=this.getSubTreeElementCount(e),s>0&&o>=s)return s}else if(i.isIntersecting(a)){for(let t=this.getFirstElement_(e);-1!==t;t=this.getNextElement_(t)){const e=this.getData_(t);if(this.getBoundingBoxValue_(e).isIntersecting(i)&&(o++,s>0&&o>=s))return s}t=this.getHeight(e)+1<=this.m_height}if(t){_t.setChildExtents_(a,h);for(let t=0;t<4;t++){const s=this.getChild_(e,t);if(-1!==s&&this.getSubTreeElementCount_(s)>0){i.isIntersecting(h[t])&&(n.push(s),r.push(h[t].clone()))}}}}return o}hasData(t,e){return this.getIntersectionCount(t,e,1)>=1}getIterator(t,e){return new lt(this,t,e)}getIteratorForQT(){return new lt(this)}getSortedIterator(t,e){return new ut(this.getIterator(t,e))}getSortedIteratorForQT(){return new ut(this.getIteratorForQT())}visitLeavesNearest(t,e,s,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}reset_(t,e){(e<0||e>127)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("invalid height"),this.m_height=e,this.m_extent.setCoords({env2D:t}),this.m_dataExtent.setEmpty(),this.m_root=-1}insert_(t,e,s,i,n,r,h){if(!i.containsEnvelope(e))return 0===s?-1:this.insert_(t,e,0,this.m_extent,this.m_root,r,h);if(!r)for(let _=n;-1!==_;_=this.getParent_(_))this.setSubTreeElementCount_(_,this.getSubTreeElementCount_(_)+1);const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;o.setCoords({env2D:i});let a,m=n;for(a=s;a<this.m_height&&this.canPushDown_(m);a++){_t.setChildExtents_(o,this.m_childExtents);let t=!1;for(let s=0;s<4;s++)if(this.m_childExtents[s].containsEnvelope(e)){t=!0;let e=this.getChild_(m,s);-1===e&&(e=this.createChild_(m,s)),this.setSubTreeElementCount_(e,this.getSubTreeElementCount_(e)+1),m=e,o.setCoords({env2D:this.m_childExtents[s]});break}if(!t)break}return this.insertAtQuad_(t,e,a,o,m,r,n,h,-1)}insertDuplicates_(t,e,s,i,n,r,h){if(!r){if(!i.containsEnvelope(e))return-1;this.setSubTreeElementCount_(n,this.getSubTreeElementCount_(n)+1),this.setContainedSubTreeElementCount_(n,this.getContainedSubTreeElementCount_(n)+1)}const o=Math.max(e.width(),e.height());let a=-1;const m=[],_=[],l=[];m.push(n),_.push(i.clone()),l.push(s);const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.m)(_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,4);for(;m.length>0;){let s=!1;const i=m.at(-1),d=_.at(-1),c=l.at(-1);if(m.pop(),_.pop(),l.pop(),c+1<this.m_height&&this.canPushDown_(i)){o<=Math.max(d.width(),d.height())/2&&(s=!0)}if(s){_t.setChildExtents_(d,u);let t=!1;for(let s=0;s<4;s++)if(t=u[s].containsEnvelope(e),t){let t=this.getChild_(i,s);-1===t&&(t=this.createChild_(i,s)),m.push(t),_.push(u[s].clone()),l.push(c+1),this.setSubTreeElementCount_(t,this.getSubTreeElementCount_(t)+1),this.setContainedSubTreeElementCount_(t,this.getContainedSubTreeElementCount_(t)+1);break}if(!t)for(let s=0;s<4;s++){if(u[s].isIntersecting(e)){let t=this.getChild_(i,s);-1===t&&(t=this.createChild_(i,s)),m.push(t),_.push(u[s].clone()),l.push(c+1),this.setSubTreeElementCount_(t,this.getSubTreeElementCount_(t)+1)}}}else a=this.insertAtQuad_(t,e,c,d,i,r,n,h,a),r=!1}return 0}insertAtQuad_(t,e,s,i,n,r,h,o,a){this.getFirstElement_(n);const m=this.getLastElement_(n);let _=-1;if(r){if(n===h)return o;this.disconnectElementHandle_(o),_=o}else-1===a?(_=this.createElement_(),this.setDataValues_(this.getData_(_),t,e)):_=this.createElementFromDuplicate_(a);return this.setQuad_(_,n),-1!==m?(this.setPrevElement_(_,m),this.setNextElement_(m,_)):this.setFirstElement_(n,_),this.setLastElement_(n,_),this.setLocalElementCount_(n,this.getLocalElementCount_(n)+1),this.canFlush_(n)&&this.flush_(s,i,n),_}static setChildExtents_(t,e){const s=.5*(t.xmin+t.xmax),i=.5*(t.ymin+t.ymax);e[0].setCoords({xmin:s,ymin:i,xmax:t.xmax,ymax:t.ymax}),e[1].setCoords({xmin:t.xmin,ymin:i,xmax:s,ymax:t.ymax}),e[2].setCoords({xmin:t.xmin,ymin:t.ymin,xmax:s,ymax:i}),e[3].setCoords({xmin:s,ymin:t.ymin,xmax:t.xmax,ymax:i})}disconnectElementHandle_(t){const e=this.getQuad_(t),s=this.getFirstElement_(e),i=this.getLastElement_(e),n=this.getPrevElement_(t),r=this.getNextElement_(t);s===t?(-1!==r?this.setPrevElement_(r,-1):this.setLastElement_(e,-1),this.setFirstElement_(e,r)):i===t?(this.setNextElement_(n,-1),this.setLastElement_(e,n)):(this.setPrevElement_(r,n),this.setNextElement_(n,r)),this.setPrevElement_(t,-1),this.setNextElement_(t,-1),this.setLocalElementCount_(e,this.getLocalElementCount_(e)-1)}canFlush_(t){return this.getLocalElementCount_(t)===_t.m_flushingCount&&!this.hasChildren_(t)}flush_(t,e,s){let i;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;let r=this.getFirstElement_(s),h=-1,o=-1;do{o=this.getData_(r),i=this.getElementValue_(o),n.setCoords({env2D:this.getBoundingBoxValue_(o)}),h=this.getNextElement_(r),this.m_bStoreDuplicates?this.insertDuplicates_(i,n,t,e,s,!0,r):this.insert_(i,n,t,e,s,!0,r),r=h}while(-1!==r)}canPushDown_(t){return this.getLocalElementCount_(t)>=_t.m_flushingCount||this.hasChildren_(t)}hasChildren_(t){return-1!==this.getChild_(t,0)||-1!==this.getChild_(t,1)||-1!==this.getChild_(t,2)||-1!==this.getChild_(t,3)}createChild_(t,e){const s=this.m_quadTreeNodes.newElement();return this.setChild_(t,e,s),this.setSubTreeElementCount_(s,0),this.setLocalElementCount_(s,0),this.setParent_(s,t),this.setHeightAndQuadrant_(s,this.getHeight_(t)+1,e),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(s,0),s}createRoot_(){this.m_root=this.m_quadTreeNodes.newElement(),this.setSubTreeElementCount_(this.m_root,0),this.setLocalElementCount_(this.m_root,0),this.setHeightAndQuadrant_(this.m_root,0,0),this.m_bStoreDuplicates&&this.setContainedSubTreeElementCount_(this.m_root,0)}createElement_(){const t=this.m_elementNodes.newElement();let e;return this.m_freeData.length>0?(e=this.m_freeData.at(-1),this.m_freeData.pop()):(e=this.m_data.length,this.m_data.length=e+1),this.setData_(t,e),t}createElementFromDuplicate_(t){const e=this.m_elementNodes.newElement(),s=this.getData_(t);return this.setData_(e,s),e}freeElementAndBoxNode_(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}getChild_(t,e){return this.m_quadTreeNodes.getField(t,e)}setChild_(t,e,s){this.m_quadTreeNodes.setField(t,e,s)}getFirstElement_(t){return this.m_quadTreeNodes.getField(t,4)}setFirstElement_(t,e){this.m_quadTreeNodes.setField(t,4,e)}getLastElement_(t){return this.m_quadTreeNodes.getField(t,5)}setLastElement_(t,e){this.m_quadTreeNodes.setField(t,5,e)}getQuadrant_(t){return this.m_quadTreeNodes.getField(t,6)&_t.m_quadrantMask}getHeight_(t){return this.m_quadTreeNodes.getField(t,6)>>_t.m_heightBitShift}setHeightAndQuadrant_(t,e,s){const i=e<<_t.m_heightBitShift|s;this.m_quadTreeNodes.setField(t,6,i)}getLocalElementCount_(t){return this.m_quadTreeNodes.getField(t,7)}setLocalElementCount_(t,e){this.m_quadTreeNodes.setField(t,7,e)}getSubTreeElementCount_(t){return this.m_quadTreeNodes.getField(t,8)}setSubTreeElementCount_(t,e){this.m_quadTreeNodes.setField(t,8,e)}getParent_(t){return this.m_quadTreeNodes.getField(t,9)}setParent_(t,e){this.m_quadTreeNodes.setField(t,9,e)}getContainedSubTreeElementCount_(t){return this.m_quadTreeNodes.getField(t,10)}setContainedSubTreeElementCount_(t,e){this.m_quadTreeNodes.setField(t,10,e)}getData_(t){return this.m_elementNodes.getField(t,0)}setData_(t,e){this.m_elementNodes.setField(t,0,e)}getPrevElement_(t){return this.m_elementNodes.getField(t,1)}getNextElement_(t){return this.m_elementNodes.getField(t,2)}setPrevElement_(t,e){this.m_elementNodes.setField(t,1,e)}setNextElement_(t,e){this.m_elementNodes.setField(t,2,e)}getQuad_(t){return this.m_elementNodes.getField(t,3)}setQuad_(t,e){this.m_elementNodes.setField(t,3,e)}getElementValue_(t){return this.m_data[t].element}getBoundingBoxValue_(t){return this.m_data[t].box}setDataValues_(t,e,s){this.m_data[t]=mt(e,s)}}_t.m_quadrantMask=3,_t.m_heightBitShift=2,_t.m_flushingCount=5;class lt{constructor(t,e,s){this.m_bLinear=!1,this.m_queryStart=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P,this.m_queryEnd=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P,this.m_queryBox=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,this.m_tolerance=0,this.m_currentElementHandle=-1,this.m_nextElementHandle=-1,this.m_quadsStack=[],this.m_extentsStack=[],this.m_childExtents=[new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D],this.m_quadTree=t,e&&this.resetIterator(e,s)}resetIterator(t,e){if(void 0===e&&(e=0),t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D)return this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,this.m_queryBox.setCoords({env2D:t}),this.m_queryBox.inflateCoords(e,e),this.m_tolerance=Number.NaN,void(-1!==this.m_quadTree.m_root&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)?(this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root),this.m_bLinear=!1):this.m_nextElementHandle=-1);if(this.m_quadsStack.length=0,this.m_extentsStack.length=0,this.m_currentElementHandle=-1,t.queryLooseEnvelope(this.m_queryBox),this.m_queryBox.inflateCoords(e,e),-1!==this.m_quadTree.m_root&&this.m_queryBox.isIntersecting(this.m_quadTree.m_extent)){const s=t.getGeometryType();if(this.m_bLinear=s===_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumLine,this.m_bLinear){const s=t;this.m_queryStart.assign(s.getStartXY()),this.m_queryEnd.assign(s.getEndXY()),this.m_tolerance=e}else this.m_tolerance=Number.NaN;this.m_quadsStack.push(this.m_quadTree.m_root),this.m_extentsStack.push(this.m_quadTree.m_extent.clone()),this.m_nextElementHandle=this.m_quadTree.getFirstElement_(this.m_quadTree.m_root)}else this.m_nextElementHandle=-1}next(){if(0===this.m_quadsStack.length)return-1;this.m_currentElementHandle=this.m_nextElementHandle;const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P,e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P,s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;let i=!1;for(;!i;){for(;-1!==this.m_currentElementHandle;){const n=this.m_quadTree.getData_(this.m_currentElementHandle);if(s.setCoords({env2D:this.m_quadTree.getBoundingBoxValue_(n)}),s.isIntersecting(this.m_queryBox)){if(!this.m_bLinear){i=!0;break}if(t.setCoordsPoint2D(this.m_queryStart),e.setCoordsPoint2D(this.m_queryEnd),s.inflateCoords(this.m_tolerance,this.m_tolerance),s.clipLine(t,e)>0){i=!0;break}}this.m_currentElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle)}if(-1===this.m_currentElementHandle){const s=this.m_quadsStack.at(-1),i=this.m_extentsStack.at(-1);_t.setChildExtents_(i,this.m_childExtents),this.m_quadsStack.pop(),this.m_extentsStack.pop();for(let n=0;n<4;n++){const i=this.m_quadTree.getChild_(s,n);if(-1!==i&&this.m_quadTree.getSubTreeElementCount(i)>0&&this.m_childExtents[n].isIntersecting(this.m_queryBox))if(this.m_bLinear){t.setCoordsPoint2D(this.m_queryStart),e.setCoordsPoint2D(this.m_queryEnd);const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;s.setCoords({env2D:this.m_childExtents[n]}),s.inflateCoords(this.m_tolerance,this.m_tolerance),s.clipLine(t,e)>0&&(this.m_quadsStack.push(i),this.m_extentsStack.push(this.m_childExtents[n].clone()))}else this.m_quadsStack.push(i),this.m_extentsStack.push(this.m_childExtents[n].clone())}if(0===this.m_quadsStack.length)return-1;this.m_currentElementHandle=this.m_quadTree.getFirstElement_(this.m_quadsStack.at(-1))}}return this.m_nextElementHandle=this.m_quadTree.getNextElement_(this.m_currentElementHandle),this.m_currentElementHandle}clone(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}}class ut{constructor(t){this.m_bucketSort=new ot,this.m_sortedHandles=new st(0),this.m_index=-1,this.m_quadTreeIteratorImpl=t}resetIterator(t,e){this.m_quadTreeIteratorImpl.resetIterator(t,e),this.m_sortedHandles.resize(0),this.m_index=-1}next(){if(-1===this.m_index){let t=-1;for(;-1!==(t=this.m_quadTreeIteratorImpl.next());)this.m_sortedHandles.add(t);const e=this,s={userSort(t,s,i){i.sort(t,s,((t,s)=>e.m_quadTreeIteratorImpl.m_quadTree.getElement(t)-e.m_quadTreeIteratorImpl.m_quadTree.getElement(s)))},getValue:t=>e.m_quadTreeIteratorImpl.m_quadTree.getElement(t)};this.m_bucketSort.sort(this.m_sortedHandles,0,this.m_sortedHandles.size(),s)}return this.m_index===this.m_sortedHandles.size()-1?-1:(this.m_index++,this.m_sortedHandles.read(this.m_index))}clone(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{}}}class dt{constructor(t=!1){this.m_bNotifyOnActions=t}onDelete(t){}onSet(t){}onEndSearch(t){}onAddUniqueElementFailed(t){}onDeleteImpl(t,e){this.m_bNotifyOnActions&&this.onDelete(t.getElement(e))}onSetImpl(t,e){this.m_bNotifyOnActions&&this.onSet(t.getElement(e))}onAddUniqueElementFailedImpl(t){this.m_bNotifyOnActions&&this.onAddUniqueElementFailed(t)}onEndSearchImpl(t){this.m_bNotifyOnActions&&this.onEndSearch(t)}}class ct{static st_nullNode(){return-1}constructor(){this.m_defaultTreap=-1,this.m_random=124234251,this.m_comparator=null,this.m_treapData=new at(7),this.m_treapCount=0,this.m_maxDepthEver=0,this.m_bBalancing=!0}setComparator(t){this.m_comparator=t}getComparator(){return this.m_comparator}disableBalancing(){this.m_bBalancing=!1}enableBalancing(){this.m_bBalancing||((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.m_treapCount<=1),this.rebalance(-1),this.m_bBalancing=!0)}isAutoBalancing(){return this.m_bBalancing}rebalance(t){if(this.m_bBalancing)return;if(-1===t&&(t=this.m_defaultTreap),0===this.size(t))return;const e=[];for(let s=this.getFirst(t);-1!==s;s=this.getNext(s))e.push(s),this.setParent_(s,-1),this.setRight_(s,-1),this.setLeft_(s,-1);this.setRoot_(-1,t),this.setFirst_(-1,t),this.setLast_(-1,t),this.setSize_(0,t),this.m_bBalancing=!0;for(const s of e)this.addBiggestElement_(s,t);this.m_bBalancing=!1}setCapacity(t){this.m_treapData.setCapacity(t)}createTreap(t){const e=this.m_treapData.newElement();return this.setSize_(0,e),this.setTreapData_(t,e),this.m_treapCount++,e}deleteTreap(t){this.m_treapData.deleteElement(t),this.m_treapCount--}addElement(t,e=-1){return-1===e&&(this.m_defaultTreap===ct.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),e=this.m_defaultTreap),this.addElement_(t,0,e)}addUniqueElement(t,e=-1){return-1===e&&(this.m_defaultTreap===ct.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),e=this.m_defaultTreap),this.addElement_(t,1,e)}addBiggestElement(t,e=-1){-1===e&&(this.m_defaultTreap===ct.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),e=this.m_defaultTreap);const s=this.newNode_(t);return this.addBiggestElement_(s,e),s}addElementAtPosition(t,e,s,i,n,r=-1){if(-1===r&&(this.m_defaultTreap===ct.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),r=this.m_defaultTreap),this.getRoot_(r)===ct.st_nullNode()){const t=this.newNode_(s);return this.setRoot_(t,r),this.addToList_(-1,t,r),t}let h,o,a,m,_;if(n?(h=e!==ct.st_nullNode()?this.m_comparator.compare(this,s,e):-1,o=t!==ct.st_nullNode()?this.m_comparator.compare(this,s,t):1):(h=-1,o=1),i&&(0===h||0===o)){this.m_comparator.onAddUniqueElementFailedImpl(s);const i=0===h?e:t;return this.setDuplicateElement_(i,r),-1}_=e!==ct.st_nullNode()&&t!==ct.st_nullNode()?this.m_random>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.B)(this.m_random)>>1:e!==ct.st_nullNode(),_?(m=h,a=e):(m=o,a=t);let u=-1,d=-1,c=!0;for(;;){if(m<0){const t=this.getLeft(a);if(t===ct.st_nullNode()){d=a,u=this.newNode_(s),this.setLeft_(a,u),this.setParent_(u,a);break}a=t}else{const t=this.getRight(a);if(t===ct.st_nullNode()){d=this.getNext(a),u=this.newNode_(s),this.setRight_(a,u),this.setParent_(u,a);break}a=t}c&&(m*=-1,c=!1)}return this.bubbleUp_(u),this.getParent(u)===ct.st_nullNode()&&this.setRoot_(u,r),this.addToList_(d,u,r),u}replaceElementAtPosition(t,e,s,i,n=-1){if(i){const i=this.getNext(t);let r=-1;i!==ct.st_nullNode()&&(r=this.m_comparator.compare(this,e,i));const h=this.getPrev(t);let o=-1;if(h!==ct.st_nullNode()&&(o=this.m_comparator.compare(this,e,h)),s&&(0===r||0===o)){this.m_comparator.onAddUniqueElementFailedImpl(e);const t=0===r?i:h;return n===ct.st_nullNode()&&(this.m_defaultTreap===ct.st_nullNode()&&(this.m_defaultTreap=this.createTreap(-1)),n=this.m_defaultTreap),this.setDuplicateElement_(t,n),-1}}return this.setElement_(t,e),t}getDuplicateElement(t=-1){return-1===t?this.getDuplicateElement_(this.m_defaultTreap):this.getDuplicateElement_(t)}deleteNode(t,e=-1){this.m_comparator&&this.m_comparator.onDeleteImpl(this,t),-1===e&&(e=this.m_defaultTreap),this.m_bBalancing?this.deleteNode_(t,e):this.unbalancedDelete_(t,e)}search(t,e=-1){let s=this.getRoot(e);for(;s!==ct.st_nullNode();){const e=this.m_comparator.compare(this,t,s);if(!e)return s;s=e<0?this.getLeft(s):this.getRight(s)}return this.m_comparator.onEndSearchImpl(t),ct.st_nullNode()}searchLowerBound(t,e=-1){let s=this.getRoot(e),i=-1;for(;s!==ct.st_nullNode();){const e=t.compare(this,s);if(!e)return s;e<0?s=this.getLeft(s):(i=s,s=this.getRight(s))}return i}searchUpperBound(t,e=-1){let s=this.getRoot(e),i=-1;for(;s!==ct.st_nullNode();){const e=t.compare(this,s);if(!e)return s;e<0?(i=s,s=this.getLeft(s)):s=this.getRight(s)}return i}getElement(t){return this.m_treapData.getField(t,3)}getLeft(t){return this.m_treapData.getField(t,0)}getRight(t){return this.m_treapData.getField(t,1)}getParent(t){return this.m_treapData.getField(t,2)}getNext(t){return this.m_treapData.getField(t,6)}getPrev(t){return this.m_treapData.getField(t,5)}getFirst(t=-1){return-1===t?this.getFirst_(this.m_defaultTreap):this.getFirst_(t)}getLast(t=-1){return-1===t?this.getLast_(this.m_defaultTreap):this.getLast_(t)}getTreapData(t=-1){return-1===t?this.getTreapData_(this.m_defaultTreap):this.getTreapData_(t)}setElement(t,e){null!==this.m_comparator&&this.m_comparator.onSetImpl(this,t),this.setElement_(t,e)}getRoot(t=-1){return-1===t?this.getRoot_(this.m_defaultTreap):this.getRoot_(t)}clear(){this.m_treapData.deleteAll(!1),this.m_defaultTreap=ct.st_nullNode(),this.m_treapCount=0,this.m_maxDepthEver=0}addToList_(t,e,s){let i;-1!==t?(i=this.getPrev(t),this.setPrev_(t,e)):i=this.getLast_(s),this.setPrev_(e,i),-1!==i&&this.setNext_(i,e),this.setNext_(e,t),t===this.getFirst_(s)&&this.setFirst_(e,s),-1===t&&this.setLast_(e,s),this.setSize_(this.getSize_(s)+1,s)}size(t=-1){return-1===t?this.getSize_(this.m_defaultTreap):this.getSize_(t)}getMaxDepth(t=-1){return this.getMaxDepthHelper_(this.getRoot(t))}getMaxDepthEver(){return this.m_maxDepthEver}static st_isValidNode(t){return at.isValidElement(t)}dbgCheck_(t){}getPriority_(t){return this.m_treapData.getField(t,4)}bubbleDown_(t){let e=this.getLeft(t),s=this.getRight(t);const i=this.getPriority_(t);for(;e!==ct.st_nullNode()||s!==ct.st_nullNode();){const n=e!==ct.st_nullNode()?this.getPriority_(e):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.j)(),r=s!==ct.st_nullNode()?this.getPriority_(s):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.j)();if(i<=Math.min(n,r))return;n<=r?this.rotateRight_(e):this.rotateLeft_(t),e=this.getLeft(t),s=this.getRight(t)}}bubbleUp_(t){if(!this.m_bBalancing)return;const e=this.getPriority_(t);let s=this.getParent(t);for(;s!==ct.st_nullNode()&&this.getPriority_(s)>e;)this.getLeft(s)===t?this.rotateRight_(t):this.rotateLeft_(s),s=this.getParent(t)}rotateLeft_(t){const e=t,s=this.getRight(t);let i;this.setParent_(s,this.getParent(e)),this.setParent_(e,s),i=this.getLeft(s),this.setRight_(e,i),i!==ct.st_nullNode()&&this.setParent_(i,e),this.setLeft_(s,e),i=this.getParent(s),i!==ct.st_nullNode()&&(this.getLeft(i)===e?this.setLeft_(i,s):this.setRight_(i,s))}rotateRight_(t){const e=this.getParent(t),s=t;let i;this.setParent_(s,this.getParent(e)),this.setParent_(e,s),i=this.getRight(s),this.setLeft_(e,i),i!==ct.st_nullNode()&&this.setParent_(i,e),this.setRight_(s,e),i=this.getParent(s),i!==ct.st_nullNode()&&(this.getLeft(i)===e?this.setLeft_(i,s):this.setRight_(i,s))}setParent_(t,e){this.m_treapData.setField(t,2,e)}setLeft_(t,e){this.m_treapData.setField(t,0,e)}setRight_(t,e){this.m_treapData.setField(t,1,e)}setPriority_(t,e){this.m_treapData.setField(t,4,e)}setPrev_(t,e){this.m_treapData.setField(t,5,e)}setNext_(t,e){this.m_treapData.setField(t,6,e)}setRoot_(t,e){this.m_treapData.setField(e,0,t)}setFirst_(t,e){this.m_treapData.setField(e,1,t)}setLast_(t,e){this.m_treapData.setField(e,2,t)}setDuplicateElement_(t,e){this.m_treapData.setField(e,3,t)}setSize_(t,e){this.m_treapData.setField(e,4,t)}setTreapData_(t,e){this.m_treapData.setField(e,5,t)}getRoot_(t){return-1===t?ct.st_nullNode():this.m_treapData.getField(t,0)}getFirst_(t){return-1===t?ct.st_nullNode():this.m_treapData.getField(t,1)}getLast_(t){return-1===t?ct.st_nullNode():this.m_treapData.getField(t,2)}getDuplicateElement_(t){return-1===t?ct.st_nullNode():this.m_treapData.getField(t,3)}getSize_(t){return-1===t?0:this.m_treapData.getField(t,4)}getTreapData_(t){return this.m_treapData.getField(t,5)}newNode_(t){const e=this.m_treapData.newElement();return this.setPriority_(e,this.generatePriority_()),this.setElement_(e,t),e}freeNode_(t,e){t!==ct.st_nullNode()&&this.m_treapData.deleteElement(t)}generatePriority_(){return this.m_random=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.B)(this.m_random),this.m_random&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.j)()>>1}maxPriority(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}getMaxDepthHelper_(t){return t===ct.st_nullNode()?0:1+Math.max(this.getMaxDepthHelper_(this.getLeft(t)),this.getMaxDepthHelper_(this.getRight(t)))}addElement_(t,e,s){if(this.getRoot(s)===ct.st_nullNode()){const e=this.newNode_(t);return this.setRoot_(e,s),this.addToList_(-1,e,s),this.m_maxDepthEver=Math.max(this.m_maxDepthEver,1),e}let i=this.getRoot_(s),n=-1,r=-1,h=1;for(;;){const o=-1===e?1:this.m_comparator.compare(this,t,i);if(o<0){const e=this.getLeft(i);if(e===ct.st_nullNode()){r=i,n=this.newNode_(t),this.setLeft_(i,n),this.setParent_(n,i);break}i=e}else{if(1===e&&0===o)return this.m_comparator.onAddUniqueElementFailedImpl(t),this.setDuplicateElement_(i,s),-1;const h=this.getRight(i);if(h===ct.st_nullNode()){r=this.getNext(i),n=this.newNode_(t),this.setRight_(i,n),this.setParent_(n,i);break}i=h}h++}return this.bubbleUp_(n),this.getParent(n)===ct.st_nullNode()&&this.setRoot_(n,s),this.addToList_(r,n,s),this.m_maxDepthEver=Math.max(h,this.m_maxDepthEver),n}removeFromList_(t,e){const s=this.getPrev(t),i=this.getNext(t);-1!==s?this.setNext_(s,i):this.setFirst_(i,e),-1!==i?this.setPrev_(i,s):this.setLast_(s,e),this.setSize_(this.getSize_(e)-1,e)}unbalancedDelete_(t,e){this.removeFromList_(t,e);let s=this.getLeft(t),i=this.getRight(t),n=this.getParent(t),r=t;if(-1!==s&&-1!==i){let h;this.m_random=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.B)(this.m_random),h=this.m_random>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.j)()>>1?this.getNext(t):this.getPrev(t);const o=this.getParent(h)===t;this.m_treapData.swapField(t,h,0),this.m_treapData.swapField(t,h,1),this.m_treapData.swapField(t,h,2),-1!==n?this.getLeft(n)===t?this.setLeft_(n,h):this.setRight_(n,h):this.setRoot_(h,e),o?(s===h?(this.setLeft_(h,t),this.setParent_(i,h)):i===h&&(this.setRight_(h,t),this.setParent_(s,h)),this.setParent_(t,h),n=h):(this.setParent_(s,h),this.setParent_(i,h),n=this.getParent(t),r=h),s=this.getLeft(t),i=this.getRight(t),-1!==s&&this.setParent_(s,t),-1!==i&&this.setParent_(i,t)}const h=-1!==s?s:i;-1===n?this.setRoot_(h,e):this.getLeft(n)===r?this.setLeft_(n,h):this.setRight_(n,h),-1!==h&&this.setParent_(h,n),this.freeNode_(t,e)}deleteNode_(t,e){this.setPriority_(t,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.j)());let s=ct.st_nullNode(),i=ct.st_nullNode();const n=this.getRoot_(e),r=n===t;if(r&&(s=this.getLeft(n),i=this.getRight(n),s===ct.st_nullNode()&&i===ct.st_nullNode()))return this.removeFromList_(n,e),this.freeNode_(n,e),void this.setRoot_(ct.st_nullNode(),e);this.bubbleDown_(t);const h=this.getParent(t);h!==ct.st_nullNode()&&(this.getLeft(h)===t?this.setLeft_(h,ct.st_nullNode()):this.setRight_(h,ct.st_nullNode())),this.removeFromList_(t,e),this.freeNode_(t,e),r&&this.setRoot_(s===ct.st_nullNode()||this.getParent(s)!==ct.st_nullNode()?i:s,e)}setElement_(t,e){this.m_treapData.setField(t,3,e)}addBiggestElement_(t,e){if(this.getRoot_(e)===ct.st_nullNode())return this.setRoot_(t,e),void this.addToList_(-1,t,e);const s=this.getLast_(e);this.setRight_(s,t),this.setParent_(t,s),this.bubbleUp_(t),this.getParent(t)===ct.st_nullNode()&&this.setRoot_(t,e),this.addToList_(-1,t,e)}}class pt{constructor(t){this.m_lists=new at(6),this.m_listOfLists=pt.st_nullNode(),void 0===t?(this.m_listNodes=new at(3),this.m_bStoreListIndexWithNode=!1):(this.m_listNodes=new at(t?4:3),this.m_bStoreListIndexWithNode=t)}freeNode_(t){this.m_listNodes.deleteElement(t)}newNode_(){return this.m_listNodes.newElement()}freeList_(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}newList_(){return this.m_lists.newElement()}setPrev_(t,e){this.m_listNodes.setField(t,1,e)}setNext_(t,e){this.m_listNodes.setField(t,2,e)}setData_(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}setList_(t,e){return this.m_listNodes.setField(t,3,e)}setListSize_(t,e){this.m_lists.setField(t,4,e)}setNextList_(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}setPrevList_(t,e){this.m_lists.setField(t,2,e)}createList(t){const e=this.newList_();return this.m_lists.setField(e,3,this.m_listOfLists),this.m_lists.setField(e,4,0),this.m_lists.setField(e,5,t),this.m_listOfLists!==pt.st_nullNode()&&this.setPrevList_(this.m_listOfLists,e),this.m_listOfLists=e,e}deleteList(t){this.clear(t);const e=this.m_lists.getField(t,2),s=this.m_lists.getField(t,3);return e!==pt.st_nullNode()?this.setNextList_(e,s):this.m_listOfLists=s,s!==pt.st_nullNode()&&this.setPrevList_(s,e),this.freeList_(t),s}reserveLists(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}getListData(t){return this.m_lists.getField(t,5)}getList(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}setListData(t,e){this.m_lists.setField(t,5,e)}addElement(t,e){return this.insertElement(t,-1,e)}insertElement(t,e,s){const i=this.newNode_();let n=-1;e!==pt.st_nullNode()&&(n=this.getPrev(e),this.setPrev_(e,i)),this.setNext_(i,e),n!==pt.st_nullNode()&&this.setNext_(n,i);if(e===this.m_lists.getField(t,0)&&this.m_lists.setField(t,0,i),e===pt.st_nullNode()){const e=this.m_lists.getField(t,1);this.setPrev_(i,e),-1!==e&&this.setNext_(e,i),this.m_lists.setField(t,1,i)}return this.setData(i,s),this.setListSize_(t,this.getListSize(t)+1),this.m_bStoreListIndexWithNode&&this.setList_(i,t),i}deleteElement(t,e){const s=this.getPrev(e),i=this.getNext(e);return s!==pt.st_nullNode()?this.setNext_(s,i):this.m_lists.setField(t,0,i),i!==pt.st_nullNode()?this.setPrev_(i,s):this.m_lists.setField(t,1,s),this.freeNode_(e),this.setListSize_(t,this.getListSize(t)-1),i}reserveNodes(t){this.m_listNodes.setCapacity(t)}getData(t){return this.m_listNodes.getField(t,0)}getElement(t){return this.getData(t)}setData(t,e){this.m_listNodes.setField(t,0,e)}getNext(t){return this.m_listNodes.getField(t,2)}getPrev(t){return this.m_listNodes.getField(t,1)}getFirst(t){return this.m_lists.getField(t,0)}getLast(t){return this.m_lists.getField(t,1)}static st_nullNode(){return-1}clear(t){if(void 0!==t){let e=this.getLast(t);for(;e!==pt.st_nullNode();){const t=e;e=this.getPrev(t),this.freeNode_(t)}return this.m_lists.setField(t,0,-1),this.m_lists.setField(t,1,-1),void this.setListSize_(t,0)}for(let e=this.getFirstList();-1!==e;)e=this.deleteList(e)}isEmpty(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getListSize(t){return this.m_lists.getField(t,4)}getFirstList(){return this.m_listOfLists}getNextList(t){return this.m_lists.getField(t,3)}}class gt extends dt{constructor(t){super(),this.m_intervalTree=t}compare(t,e,s){const i=t.getElement(s),n=this.m_intervalTree.getValue_(e),r=this.m_intervalTree.getValue_(i);return n<r?-1:n===r?ft.isLeft_(e)&&ft.isRight_(i)?-1:ft.isLeft_(i)&&ft.isRight_(e)?1:0:1}}class ft{constructor(t){this.m_bEnvelopesRef=!1,this.m_intervals=[],this.m_envelopesRef=null,this.m_intervalNodes=new at(3),this.m_intervalHandles=[],this.m_endIndicesUnique=[],this.m_cCount=-1,this.m_root=-1,this.m_bSortIntervals=!1,this.m_bConstructing=!1,this.m_bConstructionEnded=!1,this.m_bOfflineDynamic=t,this.m_tertiaryNodes=new at(this.m_bOfflineDynamic?5:4),this.m_secondaryTreaps=new ct,this.m_secondaryTreaps.setComparator(new gt(this)),this.m_secondaryLists=new pt}addEnvelopesRef(t){this.reset_(!0,!0),this.m_bEnvelopesRef=!0,this.m_envelopesRef=t,this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_envelopesRef.length)}startConstruction(){this.reset_(!0,!1)}addInterval(t){this.m_bConstructing||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_intervals.push(t.clone())}addIntervalCoords(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}endConstruction(){this.m_bConstructing||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_bConstructing=!1,this.m_bConstructionEnded=!0,this.m_bOfflineDynamic||(this.insertIntervalsStatic_(),this.m_cCount=this.m_intervals.length)}insert(t){if(this.m_bOfflineDynamic&&this.m_bConstructionEnded||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),-1===this.m_root){const t=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;if(this.m_bSortIntervals){const e=new st(0);this.querySortedEndPointIndices_(e),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(e),this.m_intervalHandles.length=t,this.m_intervalHandles.fill(-1),this.m_bSortIntervals=!1}else this.m_intervalHandles.fill(-1,0,t);this.m_root=this.createRoot_()}const e=this.insertIntervalEnd_(t<<1,this.m_root),s=this.getSecondaryFromInterval_(e),i=this.m_secondaryTreaps.addElement(1+(t<<1),s);this.setRightEnd_(e,i),this.m_intervalHandles[t]=e,this.m_cCount++}remove(t){this.m_bOfflineDynamic&&this.m_bConstructionEnded||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)("");const e=this.m_intervalHandles[t];let s;-1===e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("the interval does not exist in the interval tree"),this.m_intervalHandles[t]=-1,this.m_cCount--;let i=this.getSecondaryFromInterval_(e),n=-1;n=this.m_secondaryTreaps.getTreapData(i),this.m_secondaryTreaps.deleteNode(this.getLeftEnd_(e),i),this.m_secondaryTreaps.deleteNode(this.getRightEnd_(e),i),s=this.m_secondaryTreaps.size(i),0===s&&(this.m_secondaryTreaps.deleteTreap(i),this.setSecondaryToTertiary_(n,-1)),this.m_intervalNodes.deleteElement(e);let r=this.getPptr_(n),h=this.getLptr_(n),o=this.getRptr_(n);for(;!(s>0||n===this.m_root||-1!==h&&-1!==o);)n===this.getLptr_(r)?-1!==h?(this.setLptr_(r,h),this.setPptr_(h,r),this.setLptr_(n,-1),this.setPptr_(n,-1)):-1!==o?(this.setLptr_(r,o),this.setPptr_(o,r),this.setRptr_(n,-1),this.setPptr_(n,-1)):(this.setLptr_(r,-1),this.setPptr_(n,-1)):-1!==h?(this.setRptr_(r,h),this.setPptr_(h,r),this.setLptr_(n,-1),this.setPptr_(n,-1)):-1!==o?(this.setRptr_(r,o),this.setPptr_(o,r),this.setRptr_(n,-1),this.setPptr_(n,-1)):(this.setRptr_(r,-1),this.setPptr_(n,-1)),this.m_tertiaryNodes.deleteElement(n),n=r,i=this.getSecondaryFromTertiary_(n),s=-1!==i?this.m_secondaryTreaps.size(i):0,h=this.getLptr_(n),o=this.getRptr_(n),r=this.getPptr_(n)}size(){return this.m_cCount}getIteratorQuery(t,e){return t instanceof _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E?new vt(this,t,e):((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),{})}getIterator(){return new vt(this)}querySortedEndPointIndices_(t){const e=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length;for(let s=0;s<2*e;s++)t.add(s);this.sortEndIndices_(t,0,2*e)}querySortedDuplicatesRemoved_(t){let e=Number.NaN;for(let s=0;s<t.size();s++){const i=t.read(s),n=this.getValue_(i);n!==e&&(this.m_endIndicesUnique.push(i),e=n)}}insertIntervalsStatic_(){const t=this.m_bEnvelopesRef?this.m_envelopesRef.length:this.m_intervals.length,s=new st(0);this.querySortedEndPointIndices_(s),this.m_endIndicesUnique.length=0,this.querySortedDuplicatesRemoved_(s),this.m_intervalNodes.setCapacity(t),this.m_secondaryLists.reserveNodes(2*t);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(t,-1);this.m_root=this.createRoot_();for(let e=0;e<s.size();e++){const t=s.read(e);let n=i[t>>1];if(-1!==n){const e=this.getSecondaryFromInterval_(n);this.setRightEnd_(n,this.m_secondaryLists.addElement(e,t))}else n=this.insertIntervalEnd_(t,this.m_root),i[t>>1]=n}}createRoot_(){const t=this.calculateDiscriminantIndex1_(0,this.m_endIndicesUnique.length-1);return this.createTertiaryNode_(t)}insertIntervalEnd_(t,e){let s=-1,i=e,n=-1,r=-1,h=0,o=this.m_endIndicesUnique.length-1,a=0;const m=t>>1;let _=Number.NaN,l=Number.NaN,u=!0;const d=this.getMin_(m),c=this.getMax_(m);let p=-1;for(;u;){a=h+(o-h>>1),p=this.calculateDiscriminantIndex1_(h,o);const e=this.getDiscriminantFromIndex1_(p);if(c<e){if(-1!==i)if(p===this.getDiscriminantIndex1_(i))s=i,_=e,i=this.getLptr_(i),l=-1!==i?this.getDiscriminant_(i):Number.NaN;else if(l>e){const t=this.createTertiaryNode_(p);e<_?this.setLptr_(s,t):this.setRptr_(s,t),this.setRptr_(t,i),this.m_bOfflineDynamic&&(this.setPptr_(t,s),this.setPptr_(i,t)),s=t,_=e,i=-1,l=Number.NaN}o=a;continue}if(d>e){if(-1!==i)if(p===this.getDiscriminantIndex1_(i))s=i,_=e,i=this.getRptr_(i),l=-1!==i?this.getDiscriminant_(i):Number.NaN;else if(l<e){const t=this.createTertiaryNode_(p);e<_?this.setLptr_(s,t):this.setRptr_(s,t),this.setLptr_(t,i),this.m_bOfflineDynamic&&(this.setPptr_(t,s),this.setPptr_(i,t)),s=t,_=e,i=-1,l=Number.NaN}h=a+1;continue}let m=-1;m=-1===i||p!==this.getDiscriminantIndex1_(i)?this.createTertiaryNode_(p):i,n=this.getSecondaryFromTertiary_(m),-1===n&&(n=this.createSecondary_(m),this.setSecondaryToTertiary_(m,n));const g=this.addEndIndex_(n,t);r=this.createIntervalNode_(),this.setSecondaryToInterval_(r,n),this.setLeftEnd_(r,g),-1!==i&&p===this.getDiscriminantIndex1_(i)||(e<_?this.setLptr_(s,m):this.setRptr_(s,m),this.m_bOfflineDynamic&&this.setPptr_(m,s),-1!==i&&(l<e?this.setLptr_(m,i):this.setRptr_(m,i),this.m_bOfflineDynamic&&this.setPptr_(i,m))),u=!1;break}return r}createTertiaryNode_(t){const e=this.m_tertiaryNodes.newElement();return this.setDiscriminantIndex1_(e,t),e}createSecondary_(t){return this.m_bOfflineDynamic?this.m_secondaryTreaps.createTreap(t):this.m_secondaryLists.createList(t)}createIntervalNode_(){return this.m_intervalNodes.newElement()}reset(){this.m_bOfflineDynamic&&this.m_bConstructionEnded||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.reset_(!1,this.m_bEnvelopesRef)}reset_(t,e){t?(this.m_bEnvelopesRef=!1,this.m_envelopesRef=null,this.m_bSortIntervals=!0,this.m_bConstructing=!0,this.m_bConstructionEnded=!1,this.m_endIndicesUnique.length=0,e?(this.m_intervals.length=0,this.m_bEnvelopesRef=!0):this.m_intervals.length=0):this.m_bSortIntervals=!1,this.m_bOfflineDynamic?this.m_secondaryTreaps.clear():this.m_secondaryLists.clear(),this.m_intervalNodes.deleteAll(!1),this.m_tertiaryNodes.deleteAll(!1),this.m_root=-1,this.m_cCount=0}getDiscriminant_(t){const e=this.getDiscriminantIndex1_(t);return this.getDiscriminantFromIndex1_(e)}getDiscriminantFromIndex1_(t){if(-1===t)return Number.NaN;if(t>0){const e=t-2,s=this.m_endIndicesUnique[e],i=this.m_endIndicesUnique[e+1];return.5*(this.getValue_(s)+this.getValue_(i))}const e=-t-2,s=this.m_endIndicesUnique[e];return this.getValue_(s)}calculateDiscriminantIndex1_(t,e){let s;if(t<e){s=t+(e-t>>1)+2}else s=-(t+2);return s}setDiscriminantIndex1_(t,e){this.m_tertiaryNodes.setField(t,0,e)}setSecondaryToTertiary_(t,e){this.m_tertiaryNodes.setField(t,1,e)}setLptr_(t,e){this.m_tertiaryNodes.setField(t,2,e)}setRptr_(t,e){this.m_tertiaryNodes.setField(t,3,e)}setPptr_(t,e){this.m_tertiaryNodes.setField(t,4,e)}setSecondaryToInterval_(t,e){this.m_intervalNodes.setField(t,0,e)}addEndIndex_(t,e){let s=-1;return s=this.m_bOfflineDynamic?this.m_secondaryTreaps.addElement(e,t):this.m_secondaryLists.addElement(t,e),s}setLeftEnd_(t,e){this.m_intervalNodes.setField(t,1,e)}setRightEnd_(t,e){this.m_intervalNodes.setField(t,2,e)}getFirst_(t){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getFirst(t):this.m_secondaryLists.getFirst(t)}getLast_(t){return this.m_bOfflineDynamic?this.m_secondaryTreaps.getLast(t):this.m_secondaryLists.getLast(t)}static isLeft_(t){return!(1&t)}static isRight_(t){return!(1&~t)}getDiscriminantIndex1_(t){return this.m_tertiaryNodes.getField(t,0)}getSecondaryFromTertiary_(t){return this.m_tertiaryNodes.getField(t,1)}getLptr_(t){return this.m_tertiaryNodes.getField(t,2)}getRptr_(t){return this.m_tertiaryNodes.getField(t,3)}getPptr_(t){return this.m_tertiaryNodes.getField(t,4)}getSecondaryFromInterval_(t){return this.m_intervalNodes.getField(t,0)}getLeftEnd_(t){return this.m_intervalNodes.getField(t,1)}getRightEnd_(t){return this.m_intervalNodes.getField(t,2)}getMin_(t){return this.m_bEnvelopesRef?this.m_envelopesRef[t].xmin:this.m_intervals[t].vmin}getMax_(t){return this.m_bEnvelopesRef?this.m_envelopesRef[t].xmax:this.m_intervals[t].vmax}sortEndIndices_(t,e,s){const i=this,n={userSort(t,e,s){i.sortEndIndicesHelper_(s,t,e)},getValue:t=>i.getValue_(t)};(new ot).sort(t,e,s,n)}sortEndIndicesHelper_(t,e,s){t.sort(e,s,((t,e)=>{const s=this.getValue_(t),i=this.getValue_(e);return s<i||s===i&&ft.isLeft_(t)&&ft.isRight_(e)?-1:1}))}getValue_(t){if(!this.m_bEnvelopesRef){const e=this.m_intervals[t>>1];return ft.isLeft_(t)?e.vmin:e.vmax}const e=this.m_envelopesRef[t>>1];return ft.isLeft_(t)?e.xmin:e.xmax}}class vt{constructor(t,e,s){this.m_query=_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E.constructEmpty(),this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_nextEndHandle=-1,this.m_tertiaryStack=[],this.m_functionIndex=0,this.m_intervalTree=t,this.m_functionStack=new Array(2),this.m_functionStack[0]=this.nullFunc_,this.m_functionStack[1]=this.nullFunc_,void 0!==e&&this.resetIterator(e,s)}nullFunc_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)("should not be called"),!1}resetIterator(t,e){if("number"==typeof t){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E;s.setCoords(t,t),this.resetIterator(s,e)}else void 0===e&&(e=0),this.m_query.vmin=t.vmin-e,this.m_query.vmax=t.vmax+e,this.m_tertiaryStack.length=0,this.m_functionIndex=0,this.m_functionStack[0]=this.initialize_}next(){if(this.m_intervalTree.m_bConstructionEnded||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_functionIndex<0)return-1;for(;this.m_fi=this.m_functionStack[this.m_functionIndex],this.m_fi(););return-1!==this.m_currentEndHandle?this.getCurrentEndIndex_()>>1:-1}initialize_(){return this.m_tertiaryHandle=-1,this.m_nextTertiaryHandle=-1,this.m_forkedHandle=-1,this.m_currentEndHandle=-1,this.m_intervalTree.m_tertiaryNodes.size()>0?(this.m_functionStack[0]=this.pIn_,this.m_nextTertiaryHandle=this.m_intervalTree.m_root,!0):(this.m_functionIndex=-1,!1)}pIn_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,-1===this.m_tertiaryHandle)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;const t=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<t){const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(t),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}if(t<this.m_query.vmin){const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(t),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}this.m_functionStack[this.m_functionIndex]=this.pL_,this.m_forkedHandle=this.m_tertiaryHandle;const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),-1!==e&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_),!0}pL_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,-1===this.m_tertiaryHandle)return this.m_functionStack[this.m_functionIndex]=this.pR_,this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_forkedHandle),!0;if(this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle)<this.m_query.vmin){const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getLast_(t),this.m_functionStack[++this.m_functionIndex]=this.right_),!0}const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(t),this.m_functionStack[++this.m_functionIndex]=this.all_);const e=this.m_intervalTree.getRptr_(this.m_tertiaryHandle);return-1!==e&&this.m_tertiaryStack.push(e),!0}pR_(){if(this.m_tertiaryHandle=this.m_nextTertiaryHandle,-1===this.m_tertiaryHandle)return this.m_functionStack[this.m_functionIndex]=this.pT_,!0;const t=this.m_intervalTree.getDiscriminant_(this.m_tertiaryHandle);if(this.m_query.vmax<t){const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return this.m_nextTertiaryHandle=this.m_intervalTree.getLptr_(this.m_tertiaryHandle),-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(t),this.m_functionStack[++this.m_functionIndex]=this.left_),!0}const e=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);this.m_nextTertiaryHandle=this.m_intervalTree.getRptr_(this.m_tertiaryHandle),-1!==e&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(e),this.m_functionStack[++this.m_functionIndex]=this.all_);const s=this.m_intervalTree.getLptr_(this.m_tertiaryHandle);return-1!==s&&this.m_tertiaryStack.push(s),!0}pT_(){if(0===this.m_tertiaryStack.length)return this.m_functionIndex=-1,this.m_currentEndHandle=-1,!1;this.m_tertiaryHandle=this.m_tertiaryStack.at(-1),this.m_tertiaryStack.pop();const t=this.m_intervalTree.getSecondaryFromTertiary_(this.m_tertiaryHandle);return-1!==t&&(this.m_nextEndHandle=this.m_intervalTree.getFirst_(t),this.m_functionStack[++this.m_functionIndex]=this.all_),-1!==this.m_intervalTree.getLptr_(this.m_tertiaryHandle)&&this.m_tertiaryStack.push(this.m_intervalTree.getLptr_(this.m_tertiaryHandle)),-1!==this.m_intervalTree.getRptr_(this.m_tertiaryHandle)&&this.m_tertiaryStack.push(this.m_intervalTree.getRptr_(this.m_tertiaryHandle)),!0}left_(){return this.m_currentEndHandle=this.m_nextEndHandle,-1!==this.m_currentEndHandle&&ft.isLeft_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())<=this.m_query.vmax?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}right_(){return this.m_currentEndHandle=this.m_nextEndHandle,-1!==this.m_currentEndHandle&&ft.isRight_(this.getCurrentEndIndex_())&&this.m_intervalTree.getValue_(this.getCurrentEndIndex_())>=this.m_query.vmin?(this.m_nextEndHandle=this.getPrev_(),!1):(this.m_functionIndex--,!0)}all_(){return this.m_currentEndHandle=this.m_nextEndHandle,-1!==this.m_currentEndHandle&&ft.isLeft_(this.getCurrentEndIndex_())?(this.m_nextEndHandle=this.getNext_(),!1):(this.m_functionIndex--,!0)}getNext_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getNext(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getNext(this.m_currentEndHandle)}getPrev_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getPrev(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getPrev(this.m_currentEndHandle)}getCurrentEndIndex_(){return this.m_intervalTree.m_bOfflineDynamic?this.m_intervalTree.m_secondaryTreaps.getElement(this.m_currentEndHandle):this.m_intervalTree.m_secondaryLists.getData(this.m_currentEndHandle)}}class yt{constructor(){this.m_tolerance=0,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_intervalTreeRed=null,this.m_intervalTreeBlue=null,this.m_iteratorRed=null,this.m_iteratorBlue=null,this.m_envelopesRed=[],this.m_envelopesBlue=[],this.m_elementsRed=[],this.m_elementsBlue=[],this.m_sortedEndIndicesRed=new st(0),this.m_sortedEndIndicesBlue=new st(0),this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_queuedEnvelopes=new pt,this.m_queuedIndicesRed=[],this.m_queuedIndicesBlue=[],this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_bDone=!0,this.m_function=this.nullFunc_,this.reset_()}startConstruction(){this.reset_(),this.m_bAddRedRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addEnvelope(t,e){this.m_bAddRedRed||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_elementsRed.push(t),this.m_envelopesRed.push(new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(e))}endConstruction(){this.m_bAddRedRed||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_bAddRedRed=!1,this.m_envelopesRed.length>0&&(this.m_function=this.initialize_,this.m_bDone=!1)}startRedConstruction(){this.reset_(),this.m_bAddRed=!0,this.m_elementsRed.length=0,this.m_envelopesRed.length=0}addRedEnvelope(t,e){this.m_bAddRed||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_elementsRed.push(t),this.m_envelopesRed.push(e.clone())}endRedConstruction(){this.m_bAddRed||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_bAddRed=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeBlue_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeRed_),this.m_bDone=!1)}startBlueConstruction(){this.reset_(),this.m_bAddBlue=!0,this.m_elementsBlue.length=0,this.m_envelopesBlue.length=0}addBlueEnvelope(t,e){this.m_bAddBlue||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_elementsBlue.push(t),this.m_envelopesBlue.push(e.clone())}endBlueConstruction(){this.m_bAddBlue||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.p)(""),this.m_bAddBlue=!1,this.m_envelopesRed.length>0&&this.m_envelopesBlue.length>0&&(this.m_function===this.nullFunc_||this.m_function===this.initializeRed_?this.m_function=this.initializeRedBlue_:this.m_function!==this.initializeRedBlue_&&(this.m_function=this.initializeBlue_),this.m_bDone=!1)}next(){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}getHandleA(){return this.m_envelopeHandleA}getHandleB(){return this.m_envelopeHandleB}setTolerance(t){this.m_tolerance=t}getElement(t){return this.m_elementsRed[t]}getRedEnvelope(t){return this.m_envelopesRed[t]}getBlueEnvelope(t){return this.m_envelopesBlue[t]}getRedElement(t){return this.m_elementsRed[t]}getBlueElement(t){return this.m_elementsBlue[t]}isTop_(t){return!(1&~t)}isBottom_(t){return!(1&t)}reset_(){this.m_bAddRed=!1,this.m_bAddBlue=!1,this.m_bAddRedRed=!1,this.m_sweepIndexRed=-1,this.m_sweepIndexBlue=-1,this.m_queuedListRed=-1,this.m_queuedListBlue=-1,this.m_bDone=!0}initialize_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ft(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),null===this.m_iteratorRed&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let t=0;t<2*this.m_envelopesRed.length;t++)this.m_sortedEndIndicesRed.add(t);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,2*this.m_envelopesRed.length,!0),this.m_sweepIndexRed=2*this.m_envelopesRed.length,this.m_function=this.sweep_,!0}initializeRed_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ft(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),null===this.m_iteratorRed&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),this.m_sortedEndIndicesRed.resize(0);for(let t=0;t<2*this.m_envelopesRed.length;t++)this.m_sortedEndIndicesRed.add(t);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),-1!==this.m_queuedListRed&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_function=this.sweepRedBlue_,this.resetBlue_()}initializeBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new ft(!0)),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),null==this.m_iteratorBlue&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesBlue.resize(0);for(let t=0;t<2*this.m_envelopesBlue.length;t++)this.m_sortedEndIndicesBlue.add(t);return this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),-1!==this.m_queuedListBlue&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,this.resetRed_()}initializeRedBlue_(){if(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_envelopesRed.length<10||this.m_envelopesBlue.length<10)return this.m_sweepIndexRed=this.m_envelopesRed.length,this.m_function=this.sweepRedBlueBruteForce_,!0;this.m_intervalTreeRed||(this.m_intervalTreeRed=new ft(!0)),this.m_intervalTreeBlue||(this.m_intervalTreeBlue=new ft(!0)),this.m_intervalTreeRed.addEnvelopesRef(this.m_envelopesRed),this.m_intervalTreeBlue.addEnvelopesRef(this.m_envelopesBlue),null===this.m_iteratorRed&&(this.m_iteratorRed=this.m_intervalTreeRed.getIterator()),null===this.m_iteratorBlue&&(this.m_iteratorBlue=this.m_intervalTreeBlue.getIterator()),this.m_sortedEndIndicesRed.resize(0),this.m_sortedEndIndicesBlue.resize(0);for(let t=0;t<2*this.m_envelopesRed.length;t++)this.m_sortedEndIndicesRed.add(t);for(let t=0;t<2*this.m_envelopesBlue.length;t++)this.m_sortedEndIndicesBlue.add(t);return this.sortYEndIndices_(this.m_sortedEndIndicesRed,0,this.m_sortedEndIndicesRed.size(),!0),this.sortYEndIndices_(this.m_sortedEndIndicesBlue,0,this.m_sortedEndIndicesBlue.size(),!1),this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),-1!==this.m_queuedListRed&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),-1!==this.m_queuedListBlue&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_function=this.sweepRedBlue_,!0}sweep_(){const t=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),e=t>>1;if(this.isBottom_(t))return this.m_intervalTreeRed.remove(e),0!==this.m_sweepIndexRed||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E.construct(this.m_envelopesRed[e].xmin,this.m_envelopesRed[e].xmax);return this.m_iteratorRed.resetIterator(s,this.m_tolerance),this.m_envelopeHandleA=e,this.m_function=this.iterate_,!0}sweepBruteForce_(){return-1===--this.m_sweepIndexRed?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_sweepIndexRed,this.m_function=this.iterateBruteForce_,!0)}sweepRedBlueBruteForce_(){return-1===--this.m_sweepIndexRed?(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1):(this.m_envelopeHandleA=this.m_sweepIndexRed,this.m_sweepIndexBlue=this.m_envelopesBlue.length,this.m_function=this.iterateRedBlueBruteForce_,!0)}sweepRedBlue_(){const t=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed-1),e=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue-1),s=this.getAdjustedValue_(t,!0),i=this.getAdjustedValue_(e,!1);return s>i?this.sweepRed_():s<i?this.sweepBlue_():this.isTop_(t)?this.sweepRed_():this.isTop_(e)?this.sweepBlue_():this.sweepRed_()}sweepRed_(){const t=this.m_sortedEndIndicesRed.read(--this.m_sweepIndexRed),e=t>>1;if(this.isBottom_(t))return-1!==this.m_queuedListRed&&-1!==this.m_queuedIndicesRed[e]?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,this.m_queuedIndicesRed[e]),this.m_queuedIndicesRed[e]=-1):this.m_intervalTreeRed.remove(e),0!==this.m_sweepIndexRed||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(-1!==this.m_queuedListBlue&&this.m_queuedEnvelopes.getListSize(this.m_queuedListBlue)>0){let t=this.m_queuedEnvelopes.getFirst(this.m_queuedListBlue);for(;-1!==t;){const e=this.m_queuedEnvelopes.getData(t);this.m_intervalTreeBlue.insert(e),this.m_queuedIndicesBlue[e]=-1;const s=this.m_queuedEnvelopes.getNext(t);this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,t),t=s}}if(this.m_intervalTreeBlue.size()>0){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E.construct(this.m_envelopesRed[e].xmin,this.m_envelopesRed[e].xmax);this.m_iteratorBlue.resetIterator(t,this.m_tolerance),this.m_envelopeHandleA=e,this.m_function=this.iterateBlue_}else-1===this.m_queuedListRed&&((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.m_queuedIndicesRed,this.m_envelopesRed.length,-1),this.m_queuedListRed=this.m_queuedEnvelopes.createList(1)),this.m_queuedIndicesRed[e]=this.m_queuedEnvelopes.addElement(this.m_queuedListRed,e),this.m_function=this.sweepRedBlue_;return!0}sweepBlue_(){const t=this.m_sortedEndIndicesBlue.read(--this.m_sweepIndexBlue),e=t>>1;if(this.isBottom_(t))return-1!==this.m_queuedListBlue&&-1!==this.m_queuedIndicesBlue[e]?(this.m_queuedEnvelopes.deleteElement(this.m_queuedListBlue,this.m_queuedIndicesBlue[e]),this.m_queuedIndicesBlue[e]=-1):this.m_intervalTreeBlue.remove(e),0!==this.m_sweepIndexBlue||(this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1,this.m_bDone=!0,!1);if(-1!==this.m_queuedListRed&&this.m_queuedEnvelopes.getListSize(this.m_queuedListRed)>0){let t=this.m_queuedEnvelopes.getFirst(this.m_queuedListRed);for(;-1!==t;){const e=this.m_queuedEnvelopes.getData(t);this.m_intervalTreeRed.insert(e),this.m_queuedIndicesRed[e]=-1;const s=this.m_queuedEnvelopes.getNext(t);this.m_queuedEnvelopes.deleteElement(this.m_queuedListRed,t),t=s}}if(this.m_intervalTreeRed.size()>0){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E.construct(this.m_envelopesBlue[e].xmin,this.m_envelopesBlue[e].xmax);this.m_iteratorRed.resetIterator(t,this.m_tolerance),this.m_envelopeHandleB=e,this.m_function=this.iterateRed_}else-1===this.m_queuedListBlue&&((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.w)(this.m_queuedIndicesBlue,this.m_envelopesBlue.length,-1),this.m_queuedListBlue=this.m_queuedEnvelopes.createList(0)),this.m_queuedIndicesBlue[e]=this.m_queuedEnvelopes.addElement(this.m_queuedListBlue,e),this.m_function=this.sweepRedBlue_;return!0}iterate_(){if(this.m_envelopeHandleB=this.m_iteratorRed.next(),-1!==this.m_envelopeHandleB)return!1;const t=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(t),this.m_function=this.sweep_,!0}iterateRed_(){if(this.m_envelopeHandleA=this.m_iteratorRed.next(),-1!==this.m_envelopeHandleA)return!1;this.m_envelopeHandleA=-1,this.m_envelopeHandleB=-1;const t=this.m_sortedEndIndicesBlue.read(this.m_sweepIndexBlue)>>1;return this.m_intervalTreeBlue.insert(t),this.m_function=this.sweepRedBlue_,!0}iterateBlue_(){if(this.m_envelopeHandleB=this.m_iteratorBlue.next(),-1!==this.m_envelopeHandleB)return!1;const t=this.m_sortedEndIndicesRed.read(this.m_sweepIndexRed)>>1;return this.m_intervalTreeRed.insert(t),this.m_function=this.sweepRedBlue_,!0}iterateBruteForce_(){if(-1===--this.m_sweepIndexBlue)return this.m_function=this.sweepBruteForce_,!0;const t=this.m_envelopesRed[this.m_sweepIndexRed].clone(),e=this.m_envelopesRed[this.m_sweepIndexBlue];return t.inflateCoords(this.m_tolerance,this.m_tolerance),!t.isIntersecting(e)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}iterateRedBlueBruteForce_(){if(-1===--this.m_sweepIndexBlue)return this.m_function=this.sweepRedBlueBruteForce_,!0;const t=this.m_envelopesRed[this.m_sweepIndexRed].clone(),e=this.m_envelopesBlue[this.m_sweepIndexBlue];return t.inflateCoords(this.m_tolerance,this.m_tolerance),!t.isIntersecting(e)||(this.m_envelopeHandleB=this.m_sweepIndexBlue,!1)}resetRed_(){return this.m_sweepIndexRed=this.m_sortedEndIndicesRed.size(),this.m_intervalTreeRed.size()>0&&this.m_intervalTreeRed.reset(),-1!==this.m_queuedListRed&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListRed),this.m_queuedIndicesRed.length=0,this.m_queuedListRed=-1),this.m_bDone=!1,!0}resetBlue_(){return this.m_sweepIndexBlue=this.m_sortedEndIndicesBlue.size(),this.m_intervalTreeBlue.size()>0&&this.m_intervalTreeBlue.reset(),-1!==this.m_queuedListBlue&&(this.m_queuedEnvelopes.deleteList(this.m_queuedListBlue),this.m_queuedIndicesBlue.length=0,this.m_queuedListBlue=-1),this.m_bDone=!1,!0}nullFunc_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)("should not be called"),!1}sortYEndIndices_(t,e,s,i){const n=this,r={userSort(t,e,s){n.sortYEndIndicesHelper_(s,t,e,i)},getValue:t=>n.getAdjustedValue_(t,i)};(new ot).sort(t,e,s,r)}sortYEndIndicesHelper_(t,e,s,i){t.sort(e,s,((t,e)=>{const s=this.getAdjustedValue_(t,i),n=this.getAdjustedValue_(e,i);return s<n||s===n&&this.isBottom_(t)&&this.isTop_(e)?-1:1}))}getAdjustedValue_(t,e){const s=.5*this.m_tolerance;if(e){const e=this.m_envelopesRed[t>>1];return this.isBottom_(t)?e.ymin-s:e.ymax+s}const i=this.m_envelopesBlue[t>>1];return this.isBottom_(t)?i.ymin-s:i.ymax+s}}var xt=z;class Et{constructor(t,e){this.tolerance=void 0!==t?t:Number.NaN,this.resolution=void 0!==e?e:Number.NaN}add(t){return new Et(this.tolerance+t,this.resolution)}scale(t){return new Et(this.tolerance*t,this.resolution*t)}total(){return this.tolerance+this.resolution}}function bt(t,e,i,n,r){const h=n*n,o=t.sub(e),a=i.sub(e),m=o.sqrLength(),_=a.sqrLength();if(m<=h||_<=h)return!0;const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(o.crossProduct(a));if(l<=h*m||l<=h*_){return o.dotProduct(a)>=0}return!1}function Nt(t,e,s){return i=>0===s?(i+t)*e:1*(i-t*e)/e}function Dt(t,e){const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;return t.queryLooseEnvelope(s),s.mergeEnvelope2D(e),s}function It(t,e){const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();t.queryLooseEnvelope(s);const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();return e.queryLooseEnvelope(i),s.mergeEnvelope2D(i),s}function Ct(t,e){return(Number.isFinite(t)||Number.isNaN(t))&&(Number.isFinite(e)||Number.isNaN(e))}function Tt(t,e){return Number.isFinite(t)&&Number.isFinite(e)}function Rt(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();i.setFromPoints(t,e);return St(0,null,i.calculateToleranceFromEnvelope(),s,!1)}function At(t,e,s){return St(0,t,e.calculateToleranceFromEnvelope(),s,!1)}function qt(t,e,s){return St(1,t,e.calculateToleranceFromEnvelope(),s,!1)}function wt(t,e,s){return qt(t,e.queryInterval(1,0),s)}function Bt(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();return e.queryEnvelope(i),At(t,i,s)}function zt(t,e,s=!1){return St(0,t,e.calculateToleranceFromEnvelope(),s,!0).total()}function Lt(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();return e.queryEnvelope(i),zt(t,i,s)}function St(t,e,s,i,n){const r=new Et(0,0);if(null!==e&&(r.tolerance=e.getTolerance(t),(!n||i)&&null!==e)){const s=e.getResolution(t);r.resolution=s,i&&(r.resolution*=2)}i&&(s*=4,r.tolerance*=1.01,r.resolution*=1.01);return r.total()<s?new Et(s,0):r}function Ft(t){return Math.sqrt(2)*(2*t.tolerance+t.resolution)}function Pt(t){return Math.sqrt(2)*(t.tolerance+t.resolution)}function Ht(t){return t>=3}function Vt(t,e){const s=[0];return t.getImpl().getIsSimple(e,s)>=3}function kt(t,e){t.getImpl().setIsSimple(3,e)}function Mt(t,e,n,r){if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(e.x-t.x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.a)(e.y-t.y)<=n*n){const s=t.z,n=e.z;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.G)(s,n,r)}return!1}function Ot(t){return t>=4}function Yt(t,e){return t===_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPolygon?Ht(e):e>=1}function Xt(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();t.queryLooseEnvelope(i),e.queryLooseEnvelope(n),i.inflateCoords(s,s),n.inflateCoords(s,s);const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();r.setCoords({env2D:i}),r.intersect(n);const h=t.querySegmentIterator(),o=e.querySegmentIterator(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),_=new yt;_.setTolerance(s);let l=!1;for(_.startRedConstruction();h.nextPath();)for(;h.hasNextSegment();){h.nextSegment().queryLooseEnvelope(a),a.isIntersecting(r)&&(l=!0,_.addRedEnvelope(h.getStartPointIndex(),a))}if(_.endRedConstruction(),!l)return null;let u=!1;for(_.startBlueConstruction();o.nextPath();)for(;o.hasNextSegment();){o.nextSegment().queryLooseEnvelope(m),m.isIntersecting(r)&&(u=!0,_.addBlueEnvelope(o.getStartPointIndex(),m))}return _.endBlueConstruction(),u?_:null}function Gt(t,e,s,i,n){t.getGeometryType(),e.getGeometryType();const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();t.queryLooseEnvelope(r),e.queryLooseEnvelope(h),r.inflateCoords(s,s),h.inflateCoords(s,s);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();o.setCoords({env2D:r}),o.intersect(h);const a=new yt;a.setTolerance(s);let m=!1;a.startRedConstruction();for(let l=0,u=t.getPathCount();l<u;l++)t.queryLoosePathEnvelope(l,r),r.isIntersecting(o)&&(m=!0,a.addRedEnvelope(l,r));if(a.endRedConstruction(),!m)return null;let _=!1;a.startBlueConstruction();for(let l=0,u=e.getPathCount();l<u;l++)e.queryLoosePathEnvelope(l,h),h.isIntersecting(o)&&(_=!0,a.addBlueEnvelope(l,h));return a.endBlueConstruction(),_?a:null}function Ut(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();t.queryLooseEnvelope(i),e.queryEnvelope(n),i.inflateCoords(s,s),n.inflateCoords(s,s);const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();r.setCoords({env2D:i}),r.intersect(n);const h=t.querySegmentIterator(),o=new yt;o.setTolerance(s);let a=!1;for(o.startRedConstruction();h.nextPath();)for(;h.hasNextSegment();){h.nextSegment().queryLooseEnvelope(i),i.isIntersecting(r)&&(a=!0,o.addRedEnvelope(h.getStartPointIndex(),i))}if(o.endRedConstruction(),!a)return null;let m=!1;o.startBlueConstruction();for(let _=0,l=e.getPointCount();_<l;_++){const t=e.getXY(_);r.contains(t)&&(m=!0,o.addBlueEnvelope(_,_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.construct(t.x,t.y,t.x,t.y)))}return o.endBlueConstruction(),m?o:null}function Zt(t,e,s){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty(),n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();t.queryEnvelope(i),e.queryEnvelope(n),i.inflateCoords(s,s),n.inflateCoords(s,s);const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty();r.setCoords({env2D:i}),r.intersect(n);const h=new yt;h.setTolerance(s);let a=!1;h.startRedConstruction();const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P;for(let o=0,u=t.getPointCount();o<u;o++)t.queryXY(o,m),r.contains(m)&&(a=!0,h.addRedEnvelope(o,_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.construct(m.x,m.y,m.x,m.y)));if(h.endRedConstruction(),!a)return null;let _=!1;h.startBlueConstruction();const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P;for(let o=0,u=e.getPointCount();o<u;o++)e.queryXY(o,l),r.contains(l)&&(_=!0,h.addBlueEnvelope(o,_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.construct(l.x,l.y,l.x,l.y)));return h.endBlueConstruction(),_?h:null}function Qt(t){const e=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;return t.queryLooseEnvelope(e),e.inflateCoords(1,1),jt(t,e)}function jt(t,e,s){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;if(t.queryLooseEnvelope(i),i.isEmpty())return null;t.getGeometryType();const n=new _t(i,8);let r=-1;const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;let o=!1;do{for(let s=0,a=t.getPathCount();s<a;s++)if(t.queryLoosePathEnvelope(s,h),h.isIntersecting(e)){if(r=n.insertEx(s,h,r),-1===r){o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)("build_quad_tree_for_paths"),i.assign(t.calculateEnvelope2D(!1)),o=!0,n.reset(i,8);break}o=!1}}while(o);return n}function Wt(t,e){if(!e){const e=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;t.queryLooseEnvelope(e);const s=new _t(e,8);let i=-1;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,r=t.querySegmentIterator();let h=!1;for(;r.nextPath();)for(;r.hasNextSegment();){const o=r.nextSegment(),a=r.getStartPointIndex();if(o.queryLooseEnvelope(n),i=s.insertEx(a,n,i),-1===i){h&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)(""),e.assign(t.calculateEnvelope2D(!1)),h=!0,s.reset(e,8),r.resetToFirstPath();break}}return s}const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;t.queryLooseEnvelope(s);const i=new _t(s,8);let n=-1;const r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D,h=t.querySegmentIterator();let o=!1;for(;h.nextPath();)for(;h.hasNextSegment();){const a=h.nextSegment(),m=h.getStartPointIndex();if(a.queryLooseEnvelope(r),r.isIntersecting(e)&&(n=i.insertEx(m,r,n),-1===n)){o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)(""),s.assign(t.calculateEnvelope2D(!1)),o=!0,i.reset(s,8),h.resetToFirstPath();break}}return i}function Jt(t,e){if(e){const s=new _t(e,8),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P,n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D;let r=!1;for(let h=0;h<t.getPointCount();h++){if(i.setCoordsPoint2D(t.getXY(h)),!e.contains(i))continue;n.setCoords({pt:i});-1!==s.insert(h,n)||(r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)(""),r=!0,s.reset(t.calculateEnvelope2D(),8),h=-1)}return s}return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.t)("no-extent version not yet impl"),null}function Kt(t,e,s,i,n){let r=!1;const h=n.vmin,o=n.vmax;for(let a=s;a<e;a+=i){const e=t.read(a);e<h?(r=!0,t.write(a,h)):e>o&&(r=!0,t.write(a,o))}return r}function $t(t,e,s,i){if(!t.hasAttribute(s))return!1;const n=t.getGeometryType();if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumGeometryCollection){const n=t,r=n.getGeometryCount();let h=0;for(let t=0;t<r;++t){h|=$t(n.getGeometry(t),e,s,i)?1:0}return!!h}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.i)(n)){const n=t,r=xt.getPersistence(s),h=xt.getComponentCount(s),o=n.getPointCount();if(1===r){const t=Kt(n.getAttributeStreamRef(s),o*h,i,h,e);return t&&n.notifyModified(),t}if(2===r){const t=Kt(n.getAttributeStreamRef(s),o*h,i,h,e);return t&&n.notifyModified(),t}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)("snap_coordinate not implemented")}if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumEnvelope){const n=t,r=n.queryInterval(s,i);let h=!1;return r.vmin<e.vmin&&(h=!0,r.vmin=e.vmin),r.vmax>e.vmax&&(h=!0,r.vmax=e.vmax),h&&n.setIntervalEnvelope(s,i,r),h}if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint){const n=t;let r=n.getAttributeAsDbl(s,i),h=!1;return r<e.vmin&&(h=!0,r=e.vmin),r>e.vmax&&(h=!0,r=e.vmax),h&&n.setAttributeBasic(s,i,r),h}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.f)(n)){const n=t;let r=n.getStartAttributeAsDbl(s,i),h=!1;return r<e.vmin&&(h=!0,r=e.vmin),r>e.vmax&&(h=!0,r=e.vmax),h&&n.setStartAttribute(s,i,r),r=n.getEndAttributeAsDbl(s,i),r<e.vmin&&(h=!0,r=e.vmin),r>e.vmax&&(h=!0,r=e.vmax),h&&n.setEndAttribute(s,i,r),h}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.d)("snap_coordinate not implemented")}var te=z;class ee{constructor(t){if(this.m_description=null,this.x=Number.NaN,this.y=Number.NaN,this.m_attribs=null,t){if(!t.copy)return t.move?(this.m_description=t.move.m_description,t.move.m_description=null,this.m_attribs=t.move.m_attribs,t.move.m_attribs=null,this.x=t.move.x,void(this.y=t.move.y)):t.vd?(this.m_description=t.vd,void(t.attribBuffer?(this.m_attribs=t.attribBuffer,t.initDefaultValues&&this.setDefaultAttributeValues()):this.ensureAttributes())):t.pt?(this.m_description=M(),void this.setXY(t.pt)):void("x"in t&&("z"in t?(this.m_description=O(),this.ensureAttributes(),this.setXYZ(new X(t.x,t.y,t.z))):(this.m_description=M(),this.setXYCoords(t.x,t.y))));t.copy.copyTo(this)}else this.m_description=M()}assignCopy(t){return this.m_attribs=null,t.copyTo(this),this}assignMove(t){return this.m_attribs=null,t.copyTo(this),t.setEmpty(),this}getXY(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P(this.x,this.y)}queryXY(t){t.x=this.x,t.y=this.y}setXY(t){this.x=t.x,this.y=t.y}setXYCoords(t,e){this.x=t,this.y=e}getXYZ(){const t=new X;return t.x=this.x,t.y=this.y,t.z=this.getZ(),t}setXYZ(t){this.addAttribute(1),this.x=t.x,this.y=t.y,this.m_attribs[0]=t.z}getX(){return this.x}setX(t){this.x=t}getY(){return this.y}setY(t){this.y=t}getZ(){return this.m_description.hasZ()?this.m_attribs[0]:te.getDefaultValue(1)}setZ(t){this.addAttribute(1),this.m_attribs[0]=t}getM(){return this.getAttributeAsDbl(2,0)}setM(t){this.addAttribute(2),this.m_description.hasZ()?this.m_attribs[1]=t:this.m_attribs[0]=t}getID(){return this.getAttributeAsInt(3,0)}setID(t){this.setAttributeBasic(3,0,t)}isEqualXY(t,e){return void 0===e&&(e=0),Math.abs(t.x-this.x)<=e&&Math.abs(t.y-this.y)<=e}isEqualXYCoords(t,e,s){return void 0===s&&(s=0),Math.abs(t-this.x)<=s&&Math.abs(e-this.y)<=s}getAttributeAsDbl(t,e){if(0===t){if(0===e)return this.x;if(1===e)return this.y;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("")}const s=te.getComponentCount(t);(e<0||e>=s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("");const i=this.m_description.getAttributeIndex(t);return i>=0?this.m_attribs[this.m_description.getPointAttributeOffset(i)-2+e]:te.getDefaultValue(t)}getAttributeAsInt(t,e){return Math.trunc(this.getAttributeAsDbl(t,e))}setAttributeBasic(t,e,s){if(0===t)return void(0===e?this.x=s:1===e?this.y=s:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""));const i=te.getComponentCount(t);(e<0||e>=i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("");let n=this.m_description.getAttributeIndex(t);n<0&&(this.addAttribute(t),n=this.m_description.getAttributeIndex(t)),this.m_attribs[this.m_description.getPointAttributeOffset(n)-2+e]=s}copyAttributesFrom(t,e){if(this===t)return;const s=t.getDescription();for(let i=e&&s.hasZ()?2:1,n=s.getAttributeCount();i<n;++i){const e=s.getSemantics(i),n=te.getComponentCount(e);for(let s=0;s<n;++s){const i=t.getAttributeAsDbl(e,s);this.setAttributeBasic(e,s,i)}}}getAttributeArray(){return this.m_attribs}getDescription(){return this.m_description}assignVertexDescription(t){this.m_description!==t&&this.assignVertexDescriptionImpl(t)}mergeVertexDescription(t){this.m_description!==t&&(this.m_description.hasAttributesFrom(t)||this.mergeVertexDescriptionImpl(t))}hasAttribute(t){return this.m_description.hasAttribute(t)}addAttribute(t){if(this.m_description.hasAttribute(t))return;const e=V(this.m_description,t);this.assignVertexDescription(e)}dropAttribute(t){if(!this.m_description.hasAttribute(t))return;const e=k(this.m_description,t);this.assignVertexDescription(e)}dropAllAttributes(){const t=M();t!==this.m_description&&this.assignVertexDescription(t)}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint}getDimension(){return 0}queryEnvelope(t){if(t instanceof re)return t.setEmpty(),t.assignVertexDescription(this.m_description),void t.merge(this);if(t instanceof G){if(this.isEmpty())return void t.setEmpty();const e=this.getXYZ();return t.xmin=e.x,t.ymin=e.y,t.zmin=e.z,t.xmax=e.x,t.ymax=e.y,void(t.zmax=e.z)}this.isEmpty()?t.setEmpty():(t.xmin=this.x,t.ymin=this.y,t.xmax=this.x,t.ymax=this.y)}queryLooseEnvelope(t){this.queryEnvelope(t)}queryInterval(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E;if(this.isEmpty())return s.setEmpty(),s;const i=this.getAttributeAsDbl(t,e);return s.vmin=i,s.vmax=i,s}applyTransformation(t){if(!this.isEmpty()){if(1===t.m_TransformationType){const e=this.getXY();return t.transformInPlace(e),void this.setXY(e)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.t)("3d not impl")}}transformAttribute(t,e,s,i,n){if(this.isEmpty())return;this.addAttribute(t);const r=this.getAttributeAsDbl(t,e),h=Nt(s,i,n);this.setAttributeBasic(t,e,h(r))}createInstance(){return new ee({vd:this.m_description})}copyTo(t){if(this===t)return;t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)();const e=t;e.x=this.x,e.y=this.y,this.m_attribs?(e.assignVertexDescription(this.m_description),e.m_attribs=this.m_attribs.slice()):(e.releaseAttributes(),e.assignVertexDescription(this.m_description))}isEmpty(){return Number.isNaN(this.x)||Number.isNaN(this.y)}setEmpty(){this.m_description||(this.m_description=M(),this.releaseAttributes()),this.x=Number.NaN,this.y=Number.NaN,this.m_attribs&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,this.m_description.getTotalComponentCount()-2)}calculateArea2D(){return 0}calculateLength2D(){return 0}calculateLength3D(t){return 0}equals(t,e){if(t===this)return!0;if(t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint)return!1;const s=t;if(this.m_description!==s.m_description)return!1;if(this.isEmpty()!==s.isEmpty())return!1;if(this.isEmpty())return!0;if(void 0===e&&(e=0),Math.abs(this.x-s.x)>e)return!1;if(Math.abs(this.y-s.y)>e)return!1;for(let n=0,r=this.m_description.getTotalComponentCount()-2;n<r;n++)if(!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.G)(this.m_attribs[n],s.m_attribs[n],e))return!1;return!0}getBoundary(){return null}clone(){const t=new ee({vd:this.m_description});return this.copyTo(t),t}swap(t){if(this===t)return;t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("wrong geometry type");const e=t;e.m_description=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.m_description,this.m_description=e.m_description),e.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.x,this.x=e.x),e.y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.y,this.y=e.y),e.m_attribs=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.m_attribs,this.m_attribs=e.m_attribs)}replaceNaNs(t,e){if(this.addAttribute(t),this.isEmpty())return;const s=te.getComponentCount(t);for(let i=0;i<s;i++){const s=this.getAttributeAsDbl(t,i);Number.isNaN(s)&&this.setAttributeBasic(t,i,e)}}lerp(t,e,s){if(t.getDescription()!==e.getDescription()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("Point.lerp"),this.assignVertexDescription(t.getDescription()),t.isEmpty()||e.isEmpty())return this.setEmpty(),this;this.ensureAttributes();const i=B();t.queryValues(i,i.length);const n=B();e.queryValues(n,n.length);const r=B();let h=i,o=n;const a=r;let m=0;for(let l=0,u=this.m_description.getAttributeCount();l<u;l++){const t=this.m_description.getSemantics(l),e=te.getInterpolation(t),i=te.getComponentCount(t),n=te.getDefaultValue(t);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.A)(e,h,o,a,m,i,s,n),h=h.slice(i),o=o.slice(i),m+=i}return this.setValues(r,m),this}static lerp(t,e,s,i){i.lerp(t,e,s)}setDefaultAttributeValues(){const t=this.m_description.getTotalComponentCount()-2;t>0&&(this.m_attribs?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(this.m_attribs,this.m_description.getDefaultPointAttributes(),0,2,t):this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}static sqrDistance2D(t,e){return _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P.sqrDistanceCoords(t.x,t.y,e.x,e.y)}getImpl(){return this}mergeVertexDescriptionImpl(t){const e=H(this.getDescription(),t);this.assignVertexDescription(e)}releaseAttributes(){this.m_attribs=null}assignVertexDescriptionImpl(t){this.m_description||(this.m_description=M());const e=S();Y(t,this.m_description,e);let s=null;t.getTotalComponentCount()-2>0&&(s=t.getDefaultPointAttributes().slice(2));for(let i=1,n=t.getAttributeCount();i<n;i++){const n=e[i];if(-1!==n){const e=this.m_description.getPointAttributeOffset(n)-2,r=t.getPointAttributeOffset(i)-2,h=te.getComponentCount(t.getSemantics(i));for(let t=0;t<h;t++)s[r+t]=this.m_attribs[e+t]}}this.m_attribs=s,this.m_description=t}ensureAttributes(){this.m_description.getTotalComponentCount()-2>0&&null===this.m_attribs&&(this.m_attribs=this.m_description.getDefaultPointAttributes().slice(2))}queryValues(t,e){const s=this.m_description.getTotalComponentCount();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(s<=e),t[0]=this.x,t[1]=this.y,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(t,this.m_attribs,2,0,s-2)}copyCommonAttributesTo(t){t.x=this.x,t.y=this.y;const e=t.getDescription();if(e===this.m_description)this.m_attribs&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(t.m_attribs,this.m_attribs,0,0,this.m_description.getTotalComponentCount()-2);else{let s=0;for(let i=1,n=e.getAttributeCount();i<n;i++){const n=e.getSemantics(i);let r=te.getComponentCount(n);if(this.m_description.hasAttribute(n)){let e=this.m_description.getPointAttributeOffset(this.m_description.getAttributeIndex(n))-2;for(;0!==r;)t.m_attribs[s++]=this.m_attribs[e++],r--}else{const e=te.getDefaultValue(n);for(;0!==r;)t.m_attribs[s++]=e,r--}}}}setValues(t,e){const s=this.m_description.getTotalComponentCount();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(s<=e),this.x=t[0],this.y=t[1],(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(this.m_attribs,t,0,2,s-2)}dbgDefaultAttribs(){}}ee.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint;var se=z;function ie(t,e){return e*(t.getTotalComponentCount()-2)}class ne{constructor(t){if(this.m_attributes=null,t)if(void 0!==t.xmin)this.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(t.xmin,t.ymin,t.xmax,t.ymax);else if(void 0!==t.env2D)this.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(t.env2D);else if(t.move)this.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(t.move.m_envelope2D),this.m_attributes=t.move.m_attributes,t.move.m_attributes=null;else{if(!t.moveEnv)throw new Error("unrecognized EnvelopeData constructor options");{const e=t.moveEnv.accessEnvelopeData();this.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(e.m_envelope2D),this.m_attributes=e.m_attributes,e.m_attributes=null}}else this.m_envelope2D=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D.constructEmpty()}ensureAttributes(t){const s=t.getTotalComponentCount()-2;!this.m_attributes&&s&&(this.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(2*s,Number.NaN),this.m_attributes.fill(Number.NaN))}copyTo(t,s){const i=s,n=t.getTotalComponentCount()-2;if(i.m_description!==t&&(i.releaseAttributes_(),i.m_description=t,n&&(i.m_data.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(2*n,Number.NaN))),n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.m_attributes&&i.m_data.m_attributes);const t=2*n;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(i.m_data.m_attributes,this.m_attributes,0,0,t)}i.m_data.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(this.m_envelope2D)}copyToIfNotNull(t,e){e.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(this.m_envelope2D),e.releaseAttributes();t.getTotalComponentCount()-2&&this.m_attributes&&(e.m_attributes=this.m_attributes.slice())}releaseAttributes(){this.m_attributes=null}isEmpty(){return this.m_envelope2D.isEmpty()}transformAttribute(t,e,s,i,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}queryInterval(t,e,s,i){if(this.isEmpty())return void i.setEmpty();if(0===e)return void(0===s?this.m_envelope2D.queryIntervalX(i):1===s?this.m_envelope2D.queryIntervalY(i):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""));const n=se.getComponentCount(e);(s<0||s>=n)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("");const r=t.getAttributeIndex(e);if(r>=0)return i.vmin=this.m_attributes[ie(t,0)+t.getPointAttributeOffset(r)-2+s],void(i.vmax=this.m_attributes[ie(t,1)+t.getPointAttributeOffset(r)-2+s]);{const t=se.getDefaultValue(e);return void i.setCoords(t,t)}}queryEnvelope3D(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E;this.queryInterval(t,1,0,s),e.setCoords(this.m_envelope2D.xmin,this.m_envelope2D.ymin,s.vmin,this.m_envelope2D.xmax,this.m_envelope2D.ymax,s.vmax)}setEmpty(t){this.m_envelope2D.setEmpty();const s=t.getTotalComponentCount()-2;s&&(this.m_attributes?this.dbgAssertSize(s):this.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(2*s,Number.NaN),this.m_attributes.fill(Number.NaN))}dbgAssertSize(t){}}let re=class t{constructor(t){if(this.m_EnvelopeType=4,this.m_description=M(),void 0===t)this.m_data=new ne;else if(void 0!==t.vd)this.m_description=t.vd,this.m_data=new ne,this.ensureAttributes_();else if(t?.env2D)this.m_data=new ne({env2D:t.env2D});else if(void 0!==t.xmin)this.m_data=new ne({xmin:t.xmin,ymin:t.ymin,xmax:t.xmax,ymax:t.ymax});else if(t.copy)this.m_data=new ne,t.copy.copyTo(this);else if(t.move)this.m_description=t.move.m_description,t.move.m_description=null,this.m_data=new ne({move:t.move.m_data});else{if(!t.centerPoint)throw new Error("unrecognized Envelope constructor options");this.m_description=t.centerPoint.getDescription(),this.m_data=new ne,this.ensureAttributes_(),this.setFromPoint(t.centerPoint,t.width,t.height)}}accessEnvelopeData(){return this.m_description=null,this.m_data}assignMove(t){return this===t||(this.m_description=t.m_description,t.m_description=null,this.m_data=new ne({move:t.m_data})),this}assignCopy(t){return this===t||t.copyTo(this),this}transformAttribute(t,e,s,i,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0)}setAttributeBasic(t,e,s){if(this.addAttribute(t),this.m_data.isEmpty())return;const i=this.queryInterval(t,e);i.vmin=s,i.vmax=s,this.setIntervalEnvelope(t,e,i)}mergeVertexDescriptionImpl(t){const e=H(this.getDescription(),t);this.assignVertexDescription(e)}asEnvelope2D(){return new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(this.m_data.m_envelope2D)}assignVertexDescription(t){this.m_description!==t&&this.assignVertexDescriptionImpl(t)}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumEnvelope}getDimension(){return 2}getXMin(){return this.m_data.m_envelope2D.xmin}getYMin(){return this.m_data.m_envelope2D.ymin}getXMax(){return this.m_data.m_envelope2D.xmax}getYMax(){return this.m_data.m_envelope2D.ymax}width(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.width()}height(){return this.m_data.isEmpty()?Number.NaN:this.m_data.m_envelope2D.height()}getCenterXY(){return this.m_data.isEmpty()?new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P:this.m_data.m_envelope2D.getCenter()}getCenter(t){if(t.assignVertexDescription(this.m_description),this.m_data.isEmpty())return void t.setEmpty();const e=this.m_description.getAttributeCount();for(let s=1;s<e;s++){const e=this.m_description.getSemantics(s),i=se.getComponentCount(e);for(let s=0;s<i;s++){const i=.5*(this.getAttributeAsDblImpl(0,e,s)+this.getAttributeAsDblImpl(1,e,s));t.setAttributeBasic(e,s,i)}}t.setXY(this.m_data.m_envelope2D.getCenter())}setCoords(t,e,s,i){this.m_data.m_envelope2D.setCoords({xmin:t,ymin:e,xmax:s,ymax:i})}setEnvelope(t){if(t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D)this.m_data.m_envelope2D=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D(t),this.m_data.m_envelope2D.normalize();else{this.addAttribute(1),this.m_data.m_envelope2D=t.getEnvelope2D(),this.m_data.m_envelope2D.normalize();const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E.constructEmpty();e.setCoords(t.zmin,t.zmax),this.setInterval(1,0,e.vmin,e.vmax)}}merge(e){if(e instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__.Envelope2D)return e.isValid()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(""),void this.m_data.m_envelope2D.mergeEnvelope2D(e);if(e instanceof t){if(e.m_data.isEmpty())return;const t=e.getDescription();this.mergeVertexDescription(t),this.m_data.m_envelope2D.mergeEnvelope2D(e.m_data.m_envelope2D);for(let s=1,i=t.getAttributeCount();s<i;s++){const i=t.getSemantics(s),n=se.getComponentCount(i);for(let t=0;t<n;t++){const s=e.queryInterval(i,t),n=this.queryInterval(i,t);n.merge(s),this.setIntervalEnvelope(i,t,n)}}}else if(e instanceof ee){const t=e;if(t.isEmpty())return;const s=t.getDescription();if(this.mergeVertexDescription(s),this.m_data.isEmpty())return void this.setFromPoint(t);this.m_data.m_envelope2D.merge(t.getXY());for(let e=1,i=s.getAttributeCount();e<i;e++){const i=s.getSemantics(e),n=se.getComponentCount(i);for(let e=0;e<n;e++){const s=t.getAttributeAsDbl(i,e),n=this.queryInterval(i,e);n.mergeCoordinate(s),this.setIntervalEnvelope(i,e,n)}}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.t)("unrecognized type for envelope.merge")}intersect(t){if(!this.m_data.m_envelope2D.intersect(t.m_data.m_envelope2D))return this.setEmpty(),!1;const e=t.getDescription();this.mergeVertexDescription(e);for(let s=1,i=this.m_description.getAttributeCount();s<i;s++){const e=this.m_description.getSemantics(s),i=se.getComponentCount(e);for(let s=0;s<i;s++){const i=t.queryInterval(e,s),n=this.queryInterval(e,s);n.intersect(i),this.setIntervalEnvelope(e,s,n)}}return!0}intersectCommonAttributes(t){if(!this.m_data.m_envelope2D.intersect(t.m_data.m_envelope2D))return this.setEmpty(),!1;const e=t.getDescription();for(let s=1,i=this.m_description.getAttributeCount();s<i;s++){const i=this.m_description.getSemantics(s);if(!e.hasAttribute(i))continue;const n=se.getComponentCount(i);for(let e=0;e<n;e++){const s=t.queryInterval(i,e),n=this.queryInterval(i,e);n.intersect(s),this.setIntervalEnvelope(i,e,n)}}return!0}move(t,e){this.m_data.m_envelope2D.move(t,e)}centerAt(t,e){this.m_data.m_envelope2D.centerAtCoords(t,e)}centerAtPoint(t){this.m_data.m_envelope2D.centerAt(t)}reaspect(t,e){this.m_data.m_envelope2D.reaspect(t,e)}inflateCoords(t,e){this.m_data.m_envelope2D.inflateCoords(t,e)}containsCoords(t,e){return this.m_data.m_envelope2D.containsCoords(t,e)}contains(t){return this.m_data.m_envelope2D.contains(t)}containsPoint(t){return!t.isEmpty()&&this.m_data.m_envelope2D.contains(t.getXY())}containsEnvelope(t){return this.m_data.m_envelope2D.containsEnvelope(t.m_data.m_envelope2D)}setIntervalEnvelope(t,e,s){if(this.addAttribute(t),this.m_data.isEmpty())return;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E(s);if(i.normalize(),0===t){if(i.isEmpty())return void this.setEmpty();0===e?(this.m_data.m_envelope2D.xmin=i.vmin,this.m_data.m_envelope2D.xmax=i.vmax):1===e?(this.m_data.m_envelope2D.ymin=i.vmin,this.m_data.m_envelope2D.ymax=i.vmax):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("")}else this.setAttributeAsDblImpl(0,t,e,i.vmin),this.setAttributeAsDblImpl(1,t,e,i.vmax)}setInterval(t,e,s,i){this.setIntervalEnvelope(t,e,new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E(s,i))}queryInterval(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_0__.E;return this.m_data.queryInterval(this.m_description,t,e,s),s}queryEnvelope(t){2!==t.m_EnvelopeType?3!==t.m_EnvelopeType?4!==t.m_EnvelopeType?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.t)("unrecognized type for queryEnveloper"):this.copyTo(t):this.m_data.queryEnvelope3D(this.m_description,t):t.setCoords({env2D:this.m_data.m_envelope2D})}applyTransformation(t){1!==t.m_TransformationType?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0):t.transformEnvInPlace(this.m_data.m_envelope2D)}createInstance(){return new t({vd:this.m_description})}copyTo(t){t!==this&&this.m_data.copyTo(this.m_description,t)}isEmpty(){return this.m_data.isEmpty()}setEmpty(){this.m_description||(this.m_description=M()),this.m_data.setEmpty(this.m_description)}calculateArea2D(){return this.m_data.m_envelope2D.getArea()}calculateLength2D(){return this.m_data.m_envelope2D.getLength()}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.g)(0),0}equals(t,e){if(t===this)return!0;const s=t;if(this.m_description!==s.m_description)return!1;if(this.m_data.isEmpty()!==s.m_data.isEmpty())return!1;if(this.m_data.isEmpty())return!0;if(void 0===e&&(e=0),Math.abs(this.m_data.m_envelope2D.xmin-s.m_data.m_envelope2D.xmin)>e)return!1;if(Math.abs(this.m_data.m_envelope2D.ymin-s.m_data.m_envelope2D.ymin)>e)return!1;if(Math.abs(this.m_data.m_envelope2D.xmax-s.m_data.m_envelope2D.xmax)>e)return!1;if(Math.abs(this.m_data.m_envelope2D.ymax-s.m_data.m_envelope2D.ymax)>e)return!1;for(let n=0,r=2*(this.m_description.getTotalComponentCount()-2);n<r;n++)if(!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.G)(this.m_data.m_attributes[n],s.m_data.m_attributes[n],e))return!1;return!0}getBoundary(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.t)("getBoundary not available in this context. Use the boundary operator with an envelope parameter"),null}clone(){return new t({copy:this})}swap(t){if(this===t)return;t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumEnvelope&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)("wrong geometry type");const e=t;e.m_description=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.m_description,this.m_description=e.m_description),e.m_data.m_envelope2D=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.m_data.m_envelope2D,this.m_data.m_envelope2D=e.m_data.m_envelope2D),e.m_data.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.c)(this.m_data.m_attributes,this.m_data.m_attributes=e.m_data.m_attributes)}queryCoordinates(t){this.m_data.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.a)(""),this.m_data.m_envelope2D.queryCorners(t)}queryCornerByVal(t,e){(t<0||t>3)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""),e.assignVertexDescription(this.m_description);const s=this.getDescription().getAttributeCount();for(let i=1;i<s;i++){const s=this.m_description.getSemantics(i),n=se.getComponentCount(s);for(let i=0;i<n;i++)e.setAttributeBasic(s,i,this.getAttributeAsDblImpl(t%2,s,i))}e.setXY(this.m_data.m_envelope2D.queryCorner(t))}queryCorner(t,e){e.assign(this.m_data.m_envelope2D.queryCorner(t))}getDescription(){return this.m_description}mergeVertexDescription(t){this.m_description!==t&&(this.m_description&&this.m_description.hasAttributesFrom(t)||this.mergeVertexDescriptionImpl(t))}hasAttribute(t){return this.m_description.hasAttribute(t)}addAttribute(t){if(this.m_description.hasAttribute(t))return;const e=V(this.m_description,t);this.assignVertexDescription(e)}dropAttribute(t){if(!this.m_description.hasAttribute(t))return;const e=k(this.m_description,t);this.assignVertexDescription(e)}dropAllAttributes(){const t=M();t!==this.m_description&&this.assignVertexDescription(t)}queryLooseEnvelope(t){this.queryEnvelope(t)}replaceNaNs(t,e){if(this.addAttribute(t),this.m_data.isEmpty())return;const s=se.getComponentCount(t);for(let i=0;i<s;i++){const s=this.queryInterval(t,i);s.isEmpty()&&(s.vmin=e,s.vmax=e,this.setIntervalEnvelope(t,i,s))}}getImpl(){return this}setFromPoint(t,e,s){this.m_data.m_envelope2D.setCoords({center:t.getXY(),width:e??0,height:s??0});const i=t.getDescription();for(let n=1,r=i.getAttributeCount();n<r;n++){const e=i.getSemantics(n),s=se.getComponentCount(e);for(let i=0;i<s;i++){const s=t.getAttributeAsDbl(e,i);this.setInterval(e,i,s,s)}}}assignVertexDescriptionImpl(t){const s=S();Y(t,this.m_description,s);let i=null;const n=t.getTotalComponentCount()-2,r=this.m_description?this.m_description.getTotalComponentCount()-2:0;n>0&&(i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.d)(2*n,Number.NaN));for(let e=1;e<t.getAttributeCount();e++){const h=s[e];if(-1!==h){const s=t.getPointAttributeOffset(e)-2,o=se.getComponentCount(t.getSemantics(e)),a=this.m_description.getPointAttributeOffset(h)-2;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(i,this.m_data.m_attributes,s,a,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.b)(i,this.m_data.m_attributes,n+s,r+a,o)}}this.releaseAttributes_(),this.m_data.m_attributes=i,this.m_description=t}getAttributeAsDblImpl(t,e,s){if(this.m_data.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.u)(""),0===e)return t?s?this.m_data.m_envelope2D.ymax:this.m_data.m_envelope2D.xmax:s?this.m_data.m_envelope2D.ymin:this.m_data.m_envelope2D.xmin;s>=se.getComponentCount(e)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)("");const i=this.m_description.getAttributeIndex(e);return i>=0?this.m_data.m_attributes[ie(this.m_description,t)+this.m_description.getPointAttributeOffset(i)-2+s]:z.getDefaultValue(e)}setAttributeAsDblImpl(t,e,s,i){0===e&&(t?1===s?this.m_data.m_envelope2D.ymax=i:0===s?this.m_data.m_envelope2D.xmax=i:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""):1===s?this.m_data.m_envelope2D.ymin=i:0===s?this.m_data.m_envelope2D.xmin=i:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""));const n=se.getComponentCount(e);(s<0||s>=n)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.q)(""),this.addAttribute(e);const r=this.m_description.getAttributeIndex(e);this.m_data.m_attributes[ie(this.m_description,t)+this.m_description.getPointAttributeOffset(r)-2+s]=i}releaseAttributes_(){this.m_data.releaseAttributes()}ensureAttributes_(){this.m_data.ensureAttributes(this.m_description)}};re.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumEnvelope;const he=Object.freeze(Object.defineProperty({__proto__:null,Envelope:re,EnvelopeData:ne},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 21566:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Envelope2D: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86330);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{static construct(i,t,s,m){return new n(i,t,s,m)}constructor(i,t,s,m){this.m_EnvelopeType=2,void 0===i?(this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN):"number"==typeof i?(this.xmin=i,this.ymin=t,this.xmax=s,this.ymax=m):(this.xmin=i.xmin,this.ymin=i.ymin,this.xmax=i.xmax,this.ymax=i.ymax),this.normalize()}static constructEmpty(){return new n(Number.NaN,Number.NaN,Number.NaN,Number.NaN)}clone(){return new n(this)}assign(i){return this.xmin=i.xmin,this.xmax=i.xmax,this.ymin=i.ymin,this.ymax=i.ymax,this}width(){return this.xmax-this.xmin}height(){return this.ymax-this.ymin}maxDimension(){return Math.max(this.width(),this.height())}minDimension(){return Math.min(this.width(),this.height())}sqrDiagonal(){const i=this.width(),t=this.height();return i*i+t*t}diagonal(){return Math.sqrt(this.sqrDiagonal())}getCenterX(){return.5*(this.xmin+this.xmax)}getCenterY(){return.5*(this.ymin+this.ymax)}getCenter(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.construct(this.getCenterX(),this.getCenterY())}queryCenter(i){i.x=.5*(this.xmin+this.xmax),i.y=.5*(this.ymin+this.ymax)}setEmpty(){this.xmin=Number.NaN,this.ymin=Number.NaN,this.xmax=Number.NaN,this.ymax=Number.NaN}setInfinite(){this.xmin=Number.NEGATIVE_INFINITY,this.xmax=Number.POSITIVE_INFINITY,this.ymin=Number.NEGATIVE_INFINITY,this.ymax=Number.POSITIVE_INFINITY}isDegenerate(i){return!this.isEmpty()&&(this.width()<=i||this.height()<=i)}isZero(){return!(this.isEmpty()||this.width()&&this.height())}isEmpty(){return Number.isNaN(this.xmin)||Number.isNaN(this.ymin)||Number.isNaN(this.xmax)||Number.isNaN(this.ymax)}mergeNeCoords(i,t){this.xmin>i?this.xmin=i:this.xmax<i&&(this.xmax=i),this.ymin>t?this.ymin=t:this.ymax<t&&(this.ymax=t)}mergeNe(i){this.mergeNeCoords(i.x,i.y)}mergeCoords(i,t){this.isEmpty()?(this.xmin=i,this.ymin=t,this.xmax=i,this.ymax=t):(this.xmin>i?this.xmin=i:this.xmax<i&&(this.xmax=i),this.ymin>t?this.ymin=t:this.ymax<t&&(this.ymax=t))}merge(i){this.mergeCoords(i.x,i.y)}mergeEnvelope2D(i){i.isEmpty()||(this.mergeCoords(i.xmin,i.ymin),this.mergeNeCoords(i.xmax,i.ymax))}mergePoints(i,t){for(let s=0;s<t;){if(!this.isEmpty()){for(let m=s;m<t;m++)this.mergeNe(i[m]);break}this.setCoords(i[s]),s++}}mergePointsInterleaved(i,t,s){for(let m=2*t,h=m+2*s;m<h;m+=2)this.mergeCoords(i.read(m),i.read(m+1))}inflateCoords(i,t){this.isEmpty()||(this.xmin-=i,this.xmax+=i,this.ymin-=t,this.ymax+=t,(this.xmin>this.xmax||this.ymin>this.ymax)&&this.setEmpty())}getInflatedCoords(i,t){const s=this.clone();return s.inflateCoords(i,t),s}inflate(i){this.inflateCoords(i,i)}getInflated(i){const t=this.clone();return t.inflateCoords(i,i),t}zoom(i,t){this.isEmpty()||this.setCoords({center:this.getCenter(),width:i*this.width(),height:t*this.height()})}scale(i){i<0&&this.setEmpty(),this.xmin*=i,this.xmax*=i,this.ymin*=i,this.ymax*=i}equals(i,t){return!(!this.isEmpty()||!i.isEmpty())||(t?Math.abs(this.xmin-i.xmin)<=t&&Math.abs(this.ymin-i.ymin)<=t&&Math.abs(this.xmax-i.xmax)<=t&&Math.abs(this.ymax-i.ymax)<=t:this.xmin===i.xmin&&this.ymin===i.ymin&&this.xmax===i.xmax&&this.ymax===i.ymax)}setCoords(t){void 0!==t.xmin?(this.xmin=t.xmin,this.xmax=t.xmax,this.ymin=t.ymin,this.ymax=t.ymax):void 0!==t.x?(this.xmin=t.x,this.xmax=t.x,this.ymin=t.y,this.ymax=t.y):void 0!==t.pt1?(this.xmin=t.pt1.x,this.ymin=t.pt1.y,this.xmax=t.pt2.x,this.ymax=t.pt2.y,this.normalize()):void 0!==t.env2D?(this.xmin=t.env2D.xmin,this.xmax=t.env2D.xmax,this.ymin=t.env2D.ymin,this.ymax=t.env2D.ymax,this.normalize()):void 0!==t.pt?(this.xmin=t.pt.x,this.xmax=t.pt.x,this.ymin=t.pt.y,this.ymax=t.pt.y):void 0!==t.center?(this.xmin=t.center.x-.5*t.width,this.xmax=this.xmin+t.width,this.ymin=t.center.y-.5*t.height,this.ymax=this.ymin+t.height,this.normalize()):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("unrecognized input type for setCoords"),this.normalize()}queryIntervalX(i){this.isEmpty()?i.setEmpty():i.setCoords(this.xmin,this.xmax)}queryIntervalY(i){this.isEmpty()?i.setEmpty():i.setCoords(this.ymin,this.ymax)}setFromPoints(i,t){if(0===t)return void this.setEmpty();if(Array.isArray(i)){const s=i;this.setCoords(s[0]);for(let i=1;i<t;){if(!this.isEmpty()){for(let m=i;m<t;m++)this.mergeNe(s[m]);return}this.setCoords(s[i]),i++}return}const s=i;this.setCoords({x:s[0],y:s[1]});for(let m=1,h=2*t;m<h;m+=2){if(!this.isEmpty()){for(let i=m,h=2*t;i<h;i+=2)this.mergeNeCoords(s[i],s[i+1]);return}this.setCoords({x:s[m],y:s[m+1]}),m+=2}}normalize(){let i=!1;this.xmin<=this.xmax||([this.xmin,this.xmax]=[this.xmax,this.xmin],i=!0),this.ymin<=this.ymax||([this.ymin,this.ymax]=[this.ymax,this.ymin],i=!0),!i||this.xmin<=this.xmax&&this.ymin<=this.ymax||this.setEmpty()}isValid(){return this.isEmpty()||this.xmin<=this.xmax&&this.ymin<=this.ymax}getLowerLeft(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmin,this.ymin)}getLowerRight(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmax,this.ymin)}getUpperLeft(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmin,this.ymax)}getUpperRight(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmax,this.ymax)}move(i,t){this.isEmpty()||(this.xmin+=i,this.ymin+=t,this.xmax+=i,this.ymax+=t)}centerAtCoords(i,t){this.move(i-this.getCenterX(),t-this.getCenterY())}centerAt(i){this.centerAtCoords(i.x,i.y)}containsCoords(i,t){return i>=this.xmin&&i<=this.xmax&&t>=this.ymin&&t<=this.ymax}contains(i){return this.containsCoords(i.x,i.y)}containsEnvelope(i){return i.xmin>=this.xmin&&i.xmax<=this.xmax&&i.ymin>=this.ymin&&i.ymax<=this.ymax}containsExclusiveCoords(i,t){return i>this.xmin&&i<this.xmax&&t>this.ymin&&t<this.ymax}containsExclusive(i){return this.containsExclusiveCoords(i.x,i.y)}containsExclusiveEnvelope(i){return i.xmin>this.xmin&&i.xmax<this.xmax&&i.ymin>this.ymin&&i.ymax<this.ymax}isIntersecting(i){return(this.xmin<=i.xmin?this.xmax>=i.xmin:i.xmax>=this.xmin)&&(this.ymin<=i.ymin?this.ymax>=i.ymin:i.ymax>=this.ymin)}isIntersectingNe(i){return(this.xmin<=i.xmin?this.xmax>=i.xmin:i.xmax>=this.xmin)&&(this.ymin<=i.ymin?this.ymax>=i.ymin:i.ymax>=this.ymin)}intersect(i){if(this.isEmpty())return!1;if(i.isEmpty())return this.setEmpty(),!1;i.xmin>this.xmin&&(this.xmin=i.xmin),i.xmax<this.xmax&&(this.xmax=i.xmax),i.ymin>this.ymin&&(this.ymin=i.ymin),i.ymax<this.ymax&&(this.ymax=i.ymax);const t=this.xmin<=this.xmax&&this.ymin<=this.ymax;return t||this.setEmpty(),t}queryCorner(i){switch(3&i){case 0:return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmin,this.ymin);case 1:return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmin,this.ymax);case 2:return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmax,this.ymax);default:return new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P(this.xmax,this.ymin)}}queryCorners(i){i[0].setCoords(this.xmin,this.ymin),i[1].setCoords(this.xmin,this.ymax),i[2].setCoords(this.xmax,this.ymax),i[3].setCoords(this.xmax,this.ymin)}queryCornersReversed(i){i[0].setCoords(this.xmin,this.ymin),i[1].setCoords(this.xmax,this.ymin),i[2].setCoords(this.xmax,this.ymax),i[3].setCoords(this.xmin,this.ymax)}reaspect(i,t){if(this.isEmpty())return;const s=i/t,m=.5*this.width(),h=.5*this.height()*s;if(m<=h){const i=this.getCenterX();this.xmin=i-h,this.xmax=i+h}else{const i=m/s,t=this.getCenterY();this.ymin=t-i,this.ymax=t+i}this.normalize()}getArea(){return this.isEmpty()?0:this.width()*this.height()}getLength(){return this.isEmpty()?0:2*(this.width()+this.height())}clipCode(i){return(i.x<this.xmin?1:0)|(i.x>this.xmax?1:0)<<1|(i.y<this.ymin?1:0)<<2|(i.y>this.ymax?1:0)<<3}clipLine(i,t){let s=this.clipCode(i),m=this.clipCode(t);if(s&m)return 0;if(!(s|m))return 4;const h=(s?1:0)|(m?2:0);do{const h=t.x-i.x,x=t.y-i.y;if(Math.abs(h)>Math.abs(x)?s&n.XMASK?(s&n.XLESSXMIN?(i.y+=x*(this.xmin-i.x)/h,i.x=this.xmin):(i.y+=x*(this.xmax-i.x)/h,i.x=this.xmax),s=this.clipCode(i)):m&n.XMASK?(m&n.XLESSXMIN?(t.y+=x*(this.xmin-t.x)/h,t.x=this.xmin):(t.y+=x*(this.xmax-t.x)/h,t.x=this.xmax),m=this.clipCode(t)):s?(s&n.YLESSYMIN?(i.x+=h*(this.ymin-i.y)/x,i.y=this.ymin):(i.x+=h*(this.ymax-i.y)/x,i.y=this.ymax),s=this.clipCode(i)):(m&n.YLESSYMIN?(t.x+=h*(this.ymin-t.y)/x,t.y=this.ymin):(t.x+=h*(this.ymax-t.y)/x,t.y=this.ymax),m=this.clipCode(t)):s&n.YMASK?(s&n.YLESSYMIN?(i.x+=h*(this.ymin-i.y)/x,i.y=this.ymin):(i.x+=h*(this.ymax-i.y)/x,i.y=this.ymax),s=this.clipCode(i)):m&n.YMASK?(m&n.YLESSYMIN?(t.x+=h*(this.ymin-t.y)/x,t.y=this.ymin):(t.x+=h*(this.ymax-t.y)/x,t.y=this.ymax),m=this.clipCode(t)):s?(s&n.XLESSXMIN?(i.y+=x*(this.xmin-i.x)/h,i.x=this.xmin):(i.y+=x*(this.xmax-i.x)/h,i.x=this.xmax),s=this.clipCode(i)):(m&n.XLESSXMIN?(t.y+=x*(this.xmin-t.x)/h,t.x=this.xmin):(t.y+=x*(this.xmax-t.x)/h,t.x=this.xmax),m=this.clipCode(t)),s&m)return 0}while(s|m);return h}distanceFromEnvelope(i){return Math.sqrt(this.sqrDistanceEnvelope(i,null,null))}distance(i){return Math.sqrt(this.sqrDistance(i))}sqrDistanceEnvelope(i,t,s){if(!t&&!s){if(this.isEmpty()||i.isEmpty())return Number.NaN;let t,s=0,m=0;return t=this.xmin-i.xmax,t>s&&(s=t),t=this.ymin-i.ymax,t>m&&(m=t),t=i.xmin-this.xmax,t>s&&(s=t),t=i.ymin-this.ymax,t>m&&(m=t),s*s+m*m}if(this.isEmpty()||i.isEmpty())return t&&t.setNAN(),s&&s.setNAN(),Number.NaN;let m,h=0,x=0;const n=Math.max(this.xmin,i.xmin),e=Math.max(this.ymin,i.ymin);return t&&t.setCoords(n,e),s&&s.setCoords(n,e),m=this.xmin-i.xmax,m>h&&(h=m,t&&(t.x=this.xmin),s&&(s.x=i.xmax)),m=this.ymin-i.ymax,m>x&&(x=m,t&&(t.y=this.ymin),s&&(s.y=i.ymax)),m=i.xmin-this.xmax,m>h&&(h=m,t&&(t.x=this.xmax),s&&(s.x=i.xmin)),m=i.ymin-this.ymax,m>x&&(x=m,t&&(t.y=this.ymax),s&&(s.y=i.ymin)),h*h+x*x}sqrDistance(i,t){if(void 0===t){if(this.isEmpty()||i.isNAN())return Number.NaN;let t,s=0,m=0;return t=this.xmin-i.x,t>s&&(s=t),t=this.ymin-i.y,t>m&&(m=t),t=i.x-this.xmax,t>s&&(s=t),t=i.y-this.ymax,t>m&&(m=t),s*s+m*m}if(this.isEmpty()||i.isNAN())return t.setNAN(),Number.NaN;t.assign(i);let s,m=0,h=0;return s=this.xmin-i.x,s>m&&(m=s,t.x=this.xmin),s=this.ymin-i.y,s>h&&(h=s,t.y=this.ymin),s=i.x-this.xmax,s>m&&(m=s,t.x=this.xmax),s=i.y-this.ymax,s>h&&(h=s,t.y=this.ymax),m*m+h*h}sqrMaxMinDistanceEnvelope(i){if(this.isEmpty()||i.isEmpty())return Number.NaN;let t=Number.MAX_VALUE;{const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymin,i.xmax,i.ymin),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymin,i.xmax,i.ymax),x=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymax,i.xmax,i.ymin),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymax,i.xmax,i.ymax),e=Math.max(m,h),a=Math.max(x,n),r=Math.max(e,a);t=Math.min(r,t)}{const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymin,i.xmin,i.ymax),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymin,i.xmax,i.ymax),x=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymin,i.xmin,i.ymax),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymin,i.xmax,i.ymax),e=Math.max(m,h),a=Math.max(x,n),r=Math.max(e,a);t=Math.min(r,t)}{const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymin,i.xmin,i.ymin),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymin,i.xmin,i.ymax),x=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymax,i.xmin,i.ymin),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymax,i.xmin,i.ymax),e=Math.max(m,h),a=Math.max(x,n),r=Math.max(e,a);t=Math.min(r,t)}{const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymax,i.xmin,i.ymin),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmin,this.ymax,i.xmax,i.ymin),x=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymax,i.xmin,i.ymin),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistanceCoords(this.xmax,this.ymax,i.xmax,i.ymin),e=Math.max(m,h),a=Math.max(x,n),r=Math.max(e,a);t=Math.min(r,t)}return t}sqrMaxDistanceEnvelope(i){if(this.isEmpty()||i.isEmpty())return Number.NaN;let t=0;const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P,4);this.queryCorners(h);const x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P,4);i.queryCorners(x);for(let m=0;m<4;m++)for(let i=0;i<4;i++){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(h[m],x[i]);n>t&&(t=n)}return t}sqrMaxMinDistance(i){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getLowerLeft()),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getUpperLeft()),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getLowerRight()),x=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getUpperRight());let n,e=Math.max(t,m);return n=Math.max(t,h),e>n&&(e=n),n=Math.max(m,x),e>n&&(e=n),n=Math.max(h,x),e>n&&(e=n),e}sqrMinDistance(i){if(this.contains(i))return 0;return this.sqrDistance(i)}sqrMaxDistance(i){let t=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getLowerLeft());return t=Math.max(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getUpperLeft()),t),t=Math.max(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getUpperRight()),t),t=Math.max(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i,this.getLowerRight()),t),t}snapToBoundary(i){if(i.isNAN())return!1;if(this.isEmpty())return i.setNAN(),!0;let t=!0;if(i.x<this.xmin?i.x=this.xmin:i.x>this.xmax?i.x=this.xmax:t=!1,i.y<this.ymin?i.y=this.ymin:i.y>this.ymax?i.y=this.ymax:t=!1,t)return!0;if(i.x===this.xmin||i.x===this.xmax||i.y===this.ymin||i.y===this.ymax)return!1;const s=this.xmax-i.x,m=i.x-this.xmin,h=this.ymax-i.y,x=i.y-this.ymin;return Math.max(s,m)>Math.max(h,x)?i.y=x<h?this.ymin:this.ymax:i.x=m<s?this.xmin:this.xmax,!0}snapClip(i){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.s)(i.x,this.xmin,this.xmax),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.s)(i.y,this.ymin,this.ymax);return _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.construct(t,m)}boundaryDistance(i){if(this.isEmpty()||i.isNAN())return Number.NaN;if(i.x===this.xmin)return i.y-this.ymin;const t=this.ymax-this.ymin,m=this.xmax-this.xmin;if(i.y===this.ymax)return t+i.x-this.xmin;if(i.x===this.xmax)return t+m+this.ymax-i.y;if(i.y===this.ymin)return 2*t+m+this.xmax-i.x;const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;return h.setCoordsPoint2D(i),this.snapToBoundary(h),this.boundaryDistance(h)}envelopeSide(i){if(this.isEmpty())return-1;let t=this.boundaryDistance(i);const s=this.ymax-this.ymin,m=this.xmax-this.xmin;return t<s?0:(t-=s)<m?1:t-m<s?2:3}querySide(i,s){switch(i){case 0:s.constructFromCoords(this.xmin,this.ymin,this.xmin,this.ymax);break;case 1:s.constructFromCoords(this.xmin,this.ymax,this.xmax,this.ymax);break;case 2:s.constructFromCoords(this.xmax,this.ymax,this.xmax,this.ymin);break;case 3:s.constructFromCoords(this.xmax,this.ymin,this.xmin,this.ymin);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("query_side")}return s}isPointOnBoundary(i,t){return Math.abs(i.x-this.xmin)<=t||Math.abs(i.x-this.xmax)<=t||Math.abs(i.y-this.ymin)<=t||Math.abs(i.y-this.ymax)<=t}calculateToleranceFromEnvelope(){if(this.isEmpty())return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.g)();return(Math.abs(this.xmin)+Math.abs(this.xmax)+Math.abs(this.ymin)+Math.abs(this.ymax)+1)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.g)()}toString(){return`[${this.xmin}, ${this.ymin}, ${this.xmax}, ${this.ymax}]`}}n.XLESSXMIN=1,n.YLESSYMIN=4,n.XMASK=3,n.YMASK=12;


/***/ }),

/***/ 62188:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ B),
/* harmony export */   B: () => (/* binding */ I),
/* harmony export */   C: () => (/* binding */ R),
/* harmony export */   D: () => (/* binding */ U),
/* harmony export */   G: () => (/* binding */ a),
/* harmony export */   a: () => (/* binding */ P),
/* harmony export */   b: () => (/* binding */ M),
/* harmony export */   c: () => (/* binding */ j),
/* harmony export */   d: () => (/* binding */ b),
/* harmony export */   e: () => (/* binding */ l),
/* harmony export */   f: () => (/* binding */ f),
/* harmony export */   g: () => (/* binding */ n),
/* harmony export */   h: () => (/* binding */ h),
/* harmony export */   i: () => (/* binding */ y),
/* harmony export */   j: () => (/* binding */ g),
/* harmony export */   k: () => (/* binding */ d),
/* harmony export */   l: () => (/* binding */ p),
/* harmony export */   m: () => (/* binding */ E),
/* harmony export */   n: () => (/* binding */ v),
/* harmony export */   o: () => (/* binding */ N),
/* harmony export */   p: () => (/* binding */ C),
/* harmony export */   q: () => (/* binding */ A),
/* harmony export */   r: () => (/* binding */ G),
/* harmony export */   s: () => (/* binding */ T),
/* harmony export */   t: () => (/* binding */ z),
/* harmony export */   u: () => (/* binding */ x),
/* harmony export */   v: () => (/* binding */ w),
/* harmony export */   w: () => (/* binding */ k),
/* harmony export */   x: () => (/* binding */ D),
/* harmony export */   y: () => (/* binding */ L),
/* harmony export */   z: () => (/* binding */ m)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){switch(e){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 22:return"Operation is canceled by the user";case 21:return"The operation, such as projection or geodetic computation, cannot be performed without pe-wasm loaded";default:return"unknown error"}}function n(e,n){try{if(!e)throw new Error(n)}catch(t){throw t}}class t extends Error{constructor(e,n){super(n),this.m_AdditionalMessage=n,this.m_ErrorType=e,this.name="GeometryError"}what(){return e(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}}class r extends t{constructor(e){super(2,e),this.name="CorruptedGeometryError"}}class o extends t{constructor(e){super(3,e),this.name="EmptyGeometryError"}}class i extends t{constructor(e){super(4,e),this.name="MathSingularityError"}}class u extends t{constructor(e){super(21,e),this.name="ProjectionEngineNotLoadedError"}}class s extends t{constructor(e){super(8,e),this.name="NonSimpleGeometryError"}}var a;!function(e){e[e.enumUnknown=0]="enumUnknown",e[e.enumPoint=513]="enumPoint",e[e.enumLine=5122]="enumLine",e[e.enumBezier=5123]="enumBezier",e[e.enumEllipticArc=5124]="enumEllipticArc",e[e.enumEnvelope=3077]="enumEnvelope",e[e.enumMultiPoint=8710]="enumMultiPoint",e[e.enumPolyline=25607]="enumPolyline",e[e.enumPolygon=27656]="enumPolygon",e[e.enumMultipatch=40969]="enumMultipatch",e[e.enumGeometryCollection=3594]="enumGeometryCollection",e[e.enumRationalBezier2=5134]="enumRationalBezier2",e[e.enumBezier2=5135]="enumBezier2",e[e.enumRationalBezier23d=5392]="enumRationalBezier23d",e[e.enumGreatArc3d=5393]="enumGreatArc3d"}(a||(a={}));const c=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function m(e){return c[15&e]}function l(e){return!!(512&e)}function p(e){return!!(1024&e)}function d(e){return!!(2048&e)}function f(e){return!!(4096&e)}function y(e){return!!(8192&e)}function h(e){return!!(16384&e)}function g(e){return!!(32768&e)}function w(e){const n=e.getGeometryType();return y(n)?e.getPointCount():e.isEmpty()?0:n===a.enumEnvelope?4:n===a.enumPoint?1:f(n)?2:void b("missing type")}function E(e){const n=e.getGeometryType();if(h(n))return e.hasNonLinearSegments();if(n===a.enumGeometryCollection){const n=e;for(let e=0,t=n.getGeometryCount();e<t;e++)if(E(n.getGeometry(e)))return!0;return!1}return!!f(n)&&n!==a.enumLine}function G(e){throw new u(e)}function v(e){throw new r(e)}function P(e){throw new Error(e)}function M(e){throw new i(e)}function B(){P("Geometry type is not supported for 3D operations.")}function C(e){throw new t(12,e)}function x(e){throw new o(e)}function z(e){throw new t(14,e)}function A(e){throw new Error(e)}function b(e){throw new t(13,e)}function T(e){throw new Error(e)}function k(e){throw new s(e)}function _(){z("Operation does not support curves.")}function N(e){e&&E(e)&&_()}function j(e){e&&g(e.getGeometryType())&&z("Unsupported geometry type.")}function I(e){e===a.enumGeometryCollection&&P("Geometry_collection instances are not supported in this operation")}function L(e){I(e.getGeometryType())}function R(e){P(`bad wkid: ${e}`)}function U(e){let n="bad wkt: ";n+=e,n+="...",P(n)}function D(e,n){e||P(n)}


/***/ }),

/***/ 69726:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ _),
/* harmony export */   b: () => (/* binding */ B),
/* harmony export */   c: () => (/* binding */ M),
/* harmony export */   f: () => (/* binding */ V)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28152);
/* harmony import */ var _geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99817);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(16917);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97085);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(36985);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(3097);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1361);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(34328);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(70224);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(6916);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(45393);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4DrawUniform_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(84674);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(17983);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(96390);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(69338);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(50645);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(96028);
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(63199);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function B(e){const i=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_28__/* .ShaderBuilder */ .N5,{signedDistanceFieldEnabled:B,occlusionTestEnabled:H,horizonCullingEnabled:V,pixelSnappingEnabled:_,hasScreenSizePerspective:q,debugDrawLabelBorder:k,vvSize:G,vvColor:N,hasRotation:Z,occludedFragmentFade:J,sampleSignedDistanceFieldTexelCenter:K}=e;i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUD_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .HUD */ .Q,e),i.vertex.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .RejectBySlice */ .rA,e);const{occlusionPass:Q,output:W,oitPass:X}=e;if(Q)return i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDOcclusionPass_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .HUDOcclusionPass */ .I,e),i;const{vertex:Y,fragment:ee}=i;i.include(_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .ScreenSizePerspective */ .Y6),i.include(_views_3d_webgl_engine_core_shaderLibrary_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_12__/* .VisualVariables */ .A,e),i.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .ObjectAndLayerIdColor */ .g,e),H&&i.include(_views_3d_webgl_engine_core_shaderLibrary_hud_HUDVisibility_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .HUDVisibility */ .y),ee.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .RgbaFloatEncoding */ .W),ee.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_13__/* .ColorConversion */ .a),i.varyings.add("vcolor","vec4"),i.varyings.add("vtc","vec2"),i.varyings.add("vsize","vec2");const oe=W===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.Highlight,ie=oe&&H;ie&&i.varyings.add("voccluded","float"),Y.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_18__/* .Float4BindUniform */ .I("viewport",(e=>e.camera.fullViewport)),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float2PassUniform */ .G("screenOffset",((e,i)=>(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(R,2*e.screenOffset[0]*i.camera.pixelRatio,2*e.screenOffset[1]*i.camera.pixelRatio))),new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .Float2PassUniform */ .G("anchorPosition",(e=>M(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__/* .Float4PassUniform */ .E("materialColor",(e=>e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__/* .FloatPassUniform */ .m("materialRotation",(e=>e.rotation)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_25__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_16__/* .addPixelRatio */ .Nz)(Y),B&&(Y.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__/* .Float4PassUniform */ .E("outlineColor",(e=>e.outlineColor))),ee.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_20__/* .Float4PassUniform */ .E("outlineColor",(e=>U(e)?e.outlineColor:_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .ZEROS */ .uY)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_22__/* .FloatPassUniform */ .m("outlineSize",(e=>U(e)?e.outlineSize:0)))),V&&Y.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4DrawUniform_js__WEBPACK_IMPORTED_MODULE_19__/* .Float4DrawUniform */ .V("pointDistanceSphere",((e,o)=>{const i=o.camera.eye,r=e.origin;return (0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .fromValues */ .fA)(r[0]-i[0],r[1]-i[1],r[2]-i[2],_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__/* .earth */ .$O.radius)}))),_&&Y.include(_views_3d_webgl_engine_core_shaderLibrary_hud_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .AlignPixel */ .K),q&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addScreenSizePerspective */ .pM)(Y),(0,_views_3d_webgl_engine_core_shaderLibrary_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_15__/* .addScreenSizePerspectiveAlignment */ .OH)(Y)),k&&i.varyings.add("debugBorderCoords","vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__/* .VertexAttribute */ .r.UVI,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__/* .VertexAttribute */ .r.COLOR,"vec4"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__/* .VertexAttribute */ .r.SIZE,"vec2"),i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__/* .VertexAttribute */ .r.ROTATION,"float"),(G||N)&&i.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_27__/* .VertexAttribute */ .r.FEATUREATTRIBUTE,"vec4"),Y.code.add(V?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`bool behindHorizon(vec3 posModel) {
vec3 camToEarthCenter = pointDistanceSphere.xyz - localOrigin;
vec3 camToPos = pointDistanceSphere.xyz + posModel;
float earthRadius = pointDistanceSphere.w;
float a = dot(camToPos, camToPos);
float b = dot(camToPos, camToEarthCenter);
float c = dot(camToEarthCenter, camToEarthCenter) - earthRadius * earthRadius;
return b > 0.0 && b < a && b * b  > a * c;
}`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`bool behindHorizon(vec3 posModel) { return false; }`),Y.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
    ProjectHUDAux projectAux;
    vec4 posProj = projectPositionHUD(projectAux);
    forwardObjectAndLayerIdColor();

    if (rejectBySlice(projectAux.posModel)) {
      // Project outside of clip plane
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
      return;
    }

    if (behindHorizon(projectAux.posModel)) {
      // Project outside of clip plane
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
      return;
    }

    vec2 inputSize;
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(q,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
        vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);`,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        inputSize = size;
        vec2 screenOffsetScaled = screenOffset;`)}
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(G,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`inputSize *= vvScale(featureAttribute).xx;`)}

    vec2 combinedSize = inputSize * pixelRatio;
    vec4 quadOffset = vec4(0.0);

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(H,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
    bool visible = testHUDVisibility(posProj);
    if (!visible) {
      vtc = vec2(0.0);
      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(k,"debugBorderCoords = vec4(0.5, 0.5, 1.5 / combinedSize);")}
      return;
    }`)}
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(ie,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`voccluded = visible ? 0.0 : 1.0;`)}
  `);const re=(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
      vec2 uvi1 = vec2(uvi.x < 0.0 ? 1.0 : 0.0, uvi.y < 0.0 ? 1.0 : 0.0);
      vec2 uv = abs(uvi + uvi1);
      vec2 texSize = vec2(textureSize(tex, 0));
      uv.x = uv.x >= ${I} ? 1.0 : uv.x / texSize.x;
      uv.y = uv.y >= ${I} ? 1.0 : uv.y / texSize.y;
      quadOffset.xy = (uvi1 - anchorPosition) * 2.0 * combinedSize;

      ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(Z,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
          float angle = radians(materialRotation + rotation);
          float cosAngle = cos(angle);
          float sinAngle = sin(angle);
          mat2 rotate = mat2(cosAngle, -sinAngle, sinAngle,  cosAngle);

          quadOffset.xy = rotate * quadOffset.xy;
        `)}

      quadOffset.xy = (quadOffset.xy + screenOffsetScaled) / viewport.zw * posProj.w;
  `,te=_?B?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`posProj += quadOffset;
if (inputSize.x == size.x) {
posProj = alignToPixelOrigin(posProj, viewport.zw);
}`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`posProj += quadOffset;`;Y.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
    ${re}
    ${N?"vcolor = interpolateVVColor(featureAttribute.y) * materialColor;":"vcolor = color / 255.0 * materialColor;"}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(W===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ObjectAndLayerIdColor,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`vcolor.a = 1.0;`)}

    bool alphaDiscard = vcolor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__/* .alphaCutoff */ .Q)};
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(B,`alphaDiscard = alphaDiscard && outlineColor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__/* .alphaCutoff */ .Q)};`)}
    if (alphaDiscard) {
      // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
      gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
      return;
    } else {
      ${te}
      gl_Position = posProj;
    }

    vtc = uv;

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(k,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`debugBorderCoords = vec4(uv01, 1.5 / combinedSize);`)}
    vsize = inputSize;
  `),ee.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_25__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),J&&!oe&&ee.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_24__/* .Texture2DBindUniform */ .x("depthMap",(e=>e.mainDepth)),new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_21__/* .FloatBindUniform */ .U("occludedOpacity",(e=>e.hudOccludedFragmentOpacity)));const le=k?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`(isBorder > 0.0 ? 0.0 : ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__/* .alphaCutoff */ .Q)})`:_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__/* .alphaCutoff */ .Q),ae=(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(k,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`)}

    vec2 samplePos = vtc;

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(K,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
      float txSize = float(textureSize(tex, 0).x);
      float texelSize = 1.0 / txSize;

      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      samplePos += (vec2(1.0, -1.0) * texelSize) * scaleFactor;`)}

    ${B?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
      vec4 fillPixelColor = vcolor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgbaTofloat(texture(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${le} ||
          fillPixelColor.a + outlinePixelColor.a < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_29__/* .alphaCutoff */ .Q)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!oe,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragColor = vec4(compositeColor, compositeAlpha);`)}
      } else {
        if (fillAlphaFactor < ${le}) {
          discard;
        }

        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!oe,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragColor = premultiplyAlpha(fillPixelColor);`)}
      }

      // visualize SDF:
      // fragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
          vec4 texColor = texture(tex, samplePos, -0.5);
          if (texColor.a < ${le}) {
            discard;
          }
          ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!oe,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragColor = texColor * premultiplyAlpha(vcolor);`)}
          `}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(J&&!oe,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        float zSample = texelFetch(depthMap, ivec2(gl_FragCoord.xy), 0).x;
        if (zSample < gl_FragCoord.z) {
          fragColor *= occludedOpacity;
        }
        `)}

    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(!oe&&k,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragColor = mix(fragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder * 0.5);`)}
  `;switch(W){case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.Color:case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ColorEmission:i.outputs.add("fragColor","vec4",0),W===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ColorEmission&&i.outputs.add("fragEmission","vec4",1),X===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__/* .OITPass */ .Y.ColorAlpha&&i.outputs.add("fragAlpha","float",W===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ColorEmission?2:1),ee.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        ${ae}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(X===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__/* .OITPass */ .Y.FrontFace,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragColor.rgb /= fragColor.a;`)}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(W===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ColorEmission,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragEmission = vec4(0.0);`)}
        ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(X===_views_3d_webgl_engine_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_26__/* .OITPass */ .Y.ColorAlpha,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`fragAlpha = fragColor.a;`)}`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.ObjectAndLayerIdColor:ee.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        ${ae}
        outputObjectAndLayerIdColor();`);break;case _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderOutput */ .V.Highlight:i.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .OutputHighlight */ .Q,e),ee.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`
        ${ae}
        outputHighlight(${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__.If)(ie,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`voccluded == 1.0`,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H)`false`)});`)}return i}function U(e){return e.outlineColor[3]>0&&e.outlineSize>0}function M(o){return o.textureIsSignedDistanceField?H(o.anchorPosition,o.distanceFieldBoundingBox,R):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(R,o.anchorPosition),R}function H(e,i,r){(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(r,e[0]*(i[2]-i[0])+i[0],e[1]*(i[3]-i[1])+i[1])}const R=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),V=32e3,I=_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_23__/* .glsl */ .H.float(V),_=Object.freeze(Object.defineProperty({__proto__:null,build:B,calculateAnchorPosition:M,fullUV:V},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 20072:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ a),
/* harmony export */   b: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82007);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_HighlightReadBitmap_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46653);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96320);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3445);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7568);
/* harmony import */ var _HighlightDownsample_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61068);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function c(){const c=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_9__/* .ShaderBuilder */ .N5;c.include(_views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .HighlightCellGridScreenSpacePass */ .Q);const{fragment:a}=c;return a.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Texture2DPassUniform */ .N("blurInput",(e=>e.highlightBlurTexture)),new _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2DrawUniform */ .t("blurSize",(e=>e.blurSize)),new _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture2DUintPassUniform */ .R("highlightTexture",(e=>e.highlightTexture)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .Texture2DPassUniform */ .N("highlightOptionsTexture",(e=>e.highlightOptionsTexture)),new _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .IntegerPassUniform */ .c("highlightLevel",(e=>e.highlightLevel)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatPassUniform */ .m("occludedIntensityFactor",(e=>e.occludedFactor))),a.constants.add("inner","float",1-(_HighlightDownsample_glsl_js__WEBPACK_IMPORTED_MODULE_8__.o-_HighlightDownsample_glsl_js__WEBPACK_IMPORTED_MODULE_8__.b)/_HighlightDownsample_glsl_js__WEBPACK_IMPORTED_MODULE_8__.o),c.include(_views_3d_webgl_engine_core_shaderLibrary_HighlightReadBitmap_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .HighlightReadBitmap */ .y),a.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec2 highlightTextureSize = vec2(textureSize(highlightTexture,0));
vec2 uv = sUV;
vec2 center = texture(blurInput, uv).rg;
vec2 blurredHighlightValue = (vOutlinePossible == 0.0)
? center
: center * 0.204164
+ texture(blurInput, uv + blurSize * 1.407333).rg * 0.304005
+ texture(blurInput, uv - blurSize * 1.407333).rg * 0.304005
+ texture(blurInput, uv + blurSize * 3.294215).rg * 0.093913
+ texture(blurInput, uv - blurSize * 3.294215).rg * 0.093913;
float highlightIntensity = blurredHighlightValue.r;
float occlusionWeight = blurredHighlightValue.g;
if (highlightIntensity <= 0.01) {
discard;
}
vec4 fillColor    = texelFetch(highlightOptionsTexture, ivec2(highlightLevel, 0), 0);
vec4 outlineColor = texelFetch(highlightOptionsTexture, ivec2(highlightLevel, 1), 0);
uvec2 centerTexel = texelFetch(highlightTexture, ivec2(uv * highlightTextureSize), 0).rg;
uint centerBits = readLevelBits(centerTexel, highlightLevel);
bool centerFilled = (centerBits & 1u) == 1u;
bool centerOccluded = (centerBits & 3u) == 3u;
bool occluded = centerOccluded || (0.5 * highlightIntensity < occlusionWeight);
float occlusionFactor = occluded ? occludedIntensityFactor : 1.0;
float outlineFactor = centerFilled ? 1.0 : smoothstep(0.0, inner, highlightIntensity);
float fillFactor = centerFilled ? 1.0 : 0.0;
vec4 baseColor = mix(outlineColor, fillColor, fillFactor);
float intensity = baseColor.a * occlusionFactor * outlineFactor;
fragColor = vec4(baseColor.rgb, intensity);`),c}const a=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 63601:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ o),
/* harmony export */   a: () => (/* binding */ g),
/* harmony export */   b: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59646);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(82007);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96320);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52293);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_5__/* .NoParameters */ .Y{constructor(){super(...arguments),this.blurSize=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)()}}function n(){const e=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_6__/* .ShaderBuilder */ .N5;return e.include(_views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .HighlightCellGridScreenSpacePass */ .Q),e.outputs.add("fragHighlight","vec2",0),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2DrawUniform */ .t("blurSize",(e=>e.blurSize)),new _views_3d_webgl_engine_core_shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("blurInput",(e=>e.blurInput))).main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 highlightTextureSize = vec2(textureSize(blurInput,0));
vec2 center = texture(blurInput, sUV).rg;
if (vOutlinePossible == 0.0) {
fragHighlight = center;
} else {
vec2 sum = center * 0.204164;
sum += texture(blurInput, sUV + blurSize * 1.407333).rg * 0.304005;
sum += texture(blurInput, sUV - blurSize * 1.407333).rg * 0.304005;
sum += texture(blurInput, sUV + blurSize * 3.294215).rg * 0.093913;
sum += texture(blurInput, sUV - blurSize * 3.294215).rg * 0.093913;
fragHighlight = sum;
}`),e}const g=Object.freeze(Object.defineProperty({__proto__:null,HighlightBlurDrawParameters:o,build:n},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 61068:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ o),
/* harmony export */   a: () => (/* binding */ a),
/* harmony export */   b: () => (/* binding */ s),
/* harmony export */   c: () => (/* binding */ c),
/* harmony export */   g: () => (/* binding */ u),
/* harmony export */   o: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7568);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_3__/* .NoParameters */ .Y{}function c(){const l=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_4__/* .ShaderBuilder */ .N5,{outputs:o,fragment:c}=l;return l.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ScreenSpacePass */ .c),c.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Texture2DUintPassUniform */ .R("highlightTexture",(e=>e.highlightTexture))),c.constants.add("outlineWidth","int",Math.ceil(n)),c.constants.add("cellSize","int",u),o.add("fragGrid","uvec2"),c.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`ivec2 inputTextureSize = textureSize(highlightTexture, 0);
ivec2 cellBottomLeftCornerInput = ivec2(ivec2(floor(gl_FragCoord.xy) * vec2(cellSize)));
ivec2 coordMid =  cellBottomLeftCornerInput + ivec2(cellSize >> 1);
uvec2 centreTexel = texelFetch(highlightTexture, coordMid, 0).rg & uvec2(0x55u);
float marginSquare = float(outlineWidth*outlineWidth);
uvec2 outputValue = centreTexel & uvec2(0x55u);
for(int y = -outlineWidth; y <= cellSize + outlineWidth; y+=2) {
int dy = y < 0 ? -y : y > cellSize ? y-cellSize : 0;
int xMargin = dy > 0 ? int(ceil(sqrt(marginSquare - float(dy*dy)))) : outlineWidth;
for(int x = -xMargin; x <= cellSize + xMargin; x+=2) {
ivec2 coord = cellBottomLeftCornerInput + ivec2(x, y);
uvec2[4] texels = uvec2[4] (
texelFetch(highlightTexture,coord+ivec2(0,0),0).rg & uvec2(0x55u),
texelFetch(highlightTexture,coord+ivec2(1,0),0).rg & uvec2(0x55u),
texelFetch(highlightTexture,coord+ivec2(0,1),0).rg & uvec2(0x55u),
texelFetch(highlightTexture,coord+ivec2(1,1),0).rg & uvec2(0x55u)
);
if (texels[0] == texels[1] && texels[1] == texels[2] && texels[2] == texels[3] && texels[3] ==  centreTexel) {
continue;
}
for (int i=0; i<4; ++i){
outputValue |= ((texels[i] ^ centreTexel) << 1);
outputValue |= texels[i];
}
}
}
fragGrid = outputValue;`),l}const u=32,n=9,s=.4,a=Object.freeze(Object.defineProperty({__proto__:null,HighlightDownsampleDrawParameters:o,blurSize:s,build:c,gridCellPixelSize:u,outlineSize:n},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 24633:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ h),
/* harmony export */   b: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(82007);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_HighlightReadBitmap_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(46653);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3445);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7568);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(){const s=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__/* .ShaderBuilder */ .N5;s.include(_views_3d_webgl_engine_core_shaderLibrary_HighlightCellGridScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .HighlightCellGridScreenSpacePass */ .Q),s.include(_views_3d_webgl_engine_core_shaderLibrary_HighlightReadBitmap_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .HighlightReadBitmap */ .y);const{fragment:h}=s;return s.outputs.add("fragSingleHighlight","vec2",0),h.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DUintPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DUintPassUniform */ .R("highlightTexture",(e=>e.highlightTexture)),new _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .IntegerPassUniform */ .c("highlightLevel",(e=>e.highlightLevel))),h.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`ivec2 iuv = ivec2(gl_FragCoord.xy);
uvec2 inputTexel = texelFetch(highlightTexture, iuv, 0).rg;
uint bits = readLevelBits(inputTexel, highlightLevel);
bool hasHighlight = (bits & 1u) == 1u;
bool hasOccluded  = (bits & 2u) == 2u;
fragSingleHighlight = vec2(hasHighlight ? 1.0 : 0.0, hasOccluded ? 1.0 : 0.0);`),s}const h=Object.freeze(Object.defineProperty({__proto__:null,build:s},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 44350:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ b),
/* harmony export */   a: () => (/* binding */ u),
/* harmony export */   b: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(23233);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(79856);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19274);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_12__/* .NoParameters */ .Y{}function w(c){const u=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_13__/* .ShaderBuilder */ .N5,{vertex:w,fragment:b,varyings:f}=u,{output:h,perspectiveInterpolation:j}=c;return (0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .addProjViewLocalOrigin */ .NB)(w,c),u.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .Transform */ .d,c),u.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .terrainDepthTest */ .Z,c),u.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .SliceDraw */ .HQ,c),u.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .ObjectAndLayerIdColor */ .g,c),u.include(_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .outputColorHighlightOID */ .z,c),u.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,"vec3"),u.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.UV0,"vec2"),j&&u.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.PERSPECTIVEDIVIDE,"float"),w.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__.If)(j,"gl_Position *= perspectiveDivide;")}`),f.add("vpos","vec3",{invariant:!0}),f.add("vTexCoord","vec2"),b.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorConversion */ .a),b.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity)),new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Texture2DPassUniform */ .N("tex",(e=>e.glTexture))).main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__.If)(h===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),u}const b=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:u,build:w},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 14628:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ u),
/* harmony export */   b: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59646);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Laserline_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(68981);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(74767);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(17983);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(82088);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(20778);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(50645);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function w(t){const r=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__/* .ShaderBuilder */ .N5;r.include(_views_3d_webgl_engine_core_shaderLibrary_Laserline_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .Laserline */ .K,t);const{vertex:w,fragment:u}=r;w.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Matrix4PassUniform */ .X("modelView",((t,{camera:o})=>(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .translate */ .Tl)(f,o.viewMatrix,t.origin))),new _views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Matrix4BindUniform */ .F("proj",(({camera:e})=>e.projectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .FloatPassUniform */ .m("glowWidth",((e,{camera:t})=>e.glowWidth*t.pixelRatio)),new _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float2BindUniform */ .E("pixelToNDC",(({camera:e})=>(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__/* .set */ .hZ)(g,2/e.fullViewport[2],2/e.fullViewport[3])))),r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.START,"vec3"),r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.END,"vec3"),t.spherical&&(r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.START_UP,"vec3"),r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.END_UP,"vec3")),r.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.EXTRUDE,"vec2"),r.varyings.add("uv","vec2"),r.varyings.add("vViewStart","vec3"),r.varyings.add("vViewEnd","vec3"),r.varyings.add("vViewSegmentNormal","vec3"),r.varyings.add("vViewStartNormal","vec3"),r.varyings.add("vViewEndNormal","vec3");const h=!t.spherical;return w.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`
    vec3 pos = mix(start, end, extrude.x);

    vec4 viewPos = modelView * vec4(pos, 1);
    vec4 projPos = proj * viewPos;
    vec2 ndcPos = projPos.xy / projPos.w;

    // in planar we hardcode the up vectors to be Z-up */
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__.If)(h,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`vec3 startUp = vec3(0, 0, 1);`)}
    ${(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__.If)(h,(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`vec3 endUp = vec3(0, 0, 1);`)}

    // up vector corresponding to the location of the vertex, selecting either startUp or endUp */
    vec3 up = extrude.y * mix(startUp, endUp, extrude.x);
    vec3 viewUp = (modelView * vec4(up, 0)).xyz;

    vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);
    vec2 projUp = normalize(projPosUp.xy / projPosUp.w - ndcPos);

    // extrude ndcPos along projUp to the edge of the screen
    vec2 lxy = abs(sign(projUp) - ndcPos);
    ndcPos += length(lxy) * projUp;

    vViewStart = (modelView * vec4(start, 1)).xyz;
    vViewEnd = (modelView * vec4(end, 1)).xyz;

    vec3 viewStartEndDir = vViewEnd - vViewStart;

    vec3 viewStartUp = (modelView * vec4(startUp, 0)).xyz;

    // the normal of the plane that aligns with the segment and the up vector
    vViewSegmentNormal = normalize(cross(viewStartUp, viewStartEndDir));

    // the normal orthogonal to the segment normal and the start up vector
    vViewStartNormal = -normalize(cross(vViewSegmentNormal, viewStartUp));

    // the normal orthogonal to the segment normal and the end up vector
    vec3 viewEndUp = (modelView * vec4(endUp, 0)).xyz;
    vViewEndNormal = normalize(cross(vViewSegmentNormal, viewEndUp));

    // Add enough padding in the X screen space direction for "glow"
    float xPaddingPixels = sign(dot(vViewSegmentNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
    ndcPos.x += xPaddingPixels * pixelToNDC.x;

    // uv is used to read back depth to reconstruct the position at the fragment
    uv = ndcPos * 0.5 + 0.5;

    gl_Position = vec4(ndcPos, 0, 1);
  `),u.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_6__/* .FloatBindUniform */ .U("perScreenPixelRatio",(e=>e.camera.perScreenPixelRatio))),u.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`float planeDistance(vec3 planeNormal, vec3 planeOrigin, vec3 pos) {
return dot(planeNormal, pos - planeOrigin);
}
float segmentDistancePixels(vec3 segmentNormal, vec3 startNormal, vec3 endNormal, vec3 pos, vec3 start, vec3 end) {
float distSegmentPlane = planeDistance(segmentNormal, start, pos);
float distStartPlane = planeDistance(startNormal, start, pos);
float distEndPlane = planeDistance(endNormal, end, pos);
float dist = max(max(distStartPlane, distEndPlane), abs(distSegmentPlane));
float width = fwidth(distSegmentPlane);
float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
float pixelDist = dist / min(width, maxPixelDistance);
return abs(pixelDist);
}`),u.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .glsl */ .H)`fragColor = vec4(0.0);
vec3 dEndStart = vViewEnd - vViewStart;
if (dot(dEndStart, dEndStart) < 1e-5) {
return;
}
vec3 pos;
vec3 normal;
float angleCutoffAdjust;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {
return;
}
float distance = segmentDistancePixels(
vViewSegmentNormal,
vViewStartNormal,
vViewEndNormal,
pos,
vViewStart,
vViewEnd
);
vec4 color = laserlineProfile(distance);
float alpha = (1.0 - smoothstep(0.995 - angleCutoffAdjust, 0.999 - angleCutoffAdjust, abs(dot(normal, vViewSegmentNormal))));
fragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);`),r}const g=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),f=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),u=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 250:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ $),
/* harmony export */   b: () => (/* binding */ y),
/* harmony export */   d: () => (/* binding */ V)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59646);
/* harmony import */ var _vec32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58359);
/* harmony import */ var _vec42_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28152);
/* harmony import */ var _geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22759);
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(38774);
/* harmony import */ var _sphere_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(31803);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Laserline_glsl_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(68981);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(54473);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3BindUniform_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(81598);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(17983);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(72196);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const V=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(6);function y(e){const i=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_19__/* .ShaderBuilder */ .N5;i.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .ScreenSpacePass */ .c),i.include(_views_3d_webgl_engine_core_shaderLibrary_Laserline_glsl_js__WEBPACK_IMPORTED_MODULE_10__/* .Laserline */ .K,e);const t=i.fragment;if(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)if(t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("maxPixelDistance",((i,t)=>e.heightManifoldEnabled?2*t.camera.computeScreenPixelSizeAt(i.heightManifoldTarget):2*t.camera.computeScreenPixelSizeAt(i.lineVerticalPlaneSegment.origin)))),t.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float planeDistancePixels(vec4 plane, vec3 pos) {
float dist = dot(plane.xyz, pos) + plane.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`),e.spherical){const e=(e,i,t)=>(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(e,i.heightManifoldTarget,t.camera.viewMatrix),i=(e,i)=>(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(e,[0,0,0],i.camera.viewMatrix);t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Float4PassUniform */ .E("heightManifoldOrigin",((t,n)=>(e(F,t,n),i(H,n),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.d)(H,H,F),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(G,H),G[3]=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.l)(H),G))),new _views_3d_webgl_engine_core_shaderModules_Float3BindUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .Float3BindUniform */ .d("globalOrigin",(e=>i(F,e))),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("cosSphericalAngleThreshold",((e,i)=>1-Math.max(2,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.j)(i.camera.eye,e.heightManifoldTarget)*i.camera.perRenderPixelRatio)/(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.l)(e.heightManifoldTarget)))),t.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float globeDistancePixels(float posInGlobalOriginLength) {
float dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}
float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
vec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);
float cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);
vec3 posInGlobalOrigin = globalOrigin - pos;
float posInGlobalOriginLength = length(posInGlobalOrigin);
float sphericalDistance = globeDistancePixels(posInGlobalOriginLength);
float planarDistance = planeDistancePixels(heightPlane, pos);
return cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;
}`)}else t.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {
return planeDistancePixels(heightPlane, pos);
}`);if(e.pointDistanceEnabled&&(t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("maxPixelDistance",((e,i)=>2*i.camera.computeScreenPixelSizeAt(e.pointDistanceTarget)))),t.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float sphereDistancePixels(vec4 sphere, vec3 pos) {
float dist = distance(sphere.xyz, pos) - sphere.w;
float width = fwidth(dist);
dist /= min(width, maxPixelDistance);
return abs(dist);
}`)),e.intersectsLineEnabled&&t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_16__/* .FloatBindUniform */ .U("perScreenPixelRatio",(e=>e.camera.perScreenPixelRatio))).code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
return abs(dist) - radius;
}`),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
vec3 dir = end - start;
float t2 = dot(dir, pos - start);
float l2 = dot(dir, dir);
return t2 >= 0.0 && t2 <= l2;
}`),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`vec3 pos;
vec3 normal;
float angleCutoffAdjust;
float depthDiscontinuityAlpha;
if (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {
fragColor = vec4(0.0);
return;
}
vec4 color = vec4(0.0);`),e.heightManifoldEnabled){t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float2PassUniform */ .G("angleCutoff",(e=>O(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Float4PassUniform */ .E("heightPlane",((e,i)=>R(e.heightManifoldTarget,e.renderCoordsHelper.worldUpAtPosition(e.heightManifoldTarget,F),i.camera.viewMatrix))));const i=e.spherical?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`normalize(globalOrigin - pos)`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`heightPlane.xyz`;t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`
      vec2 angleCutoffAdjusted = angleCutoff - angleCutoffAdjust;
      // Fade out laserlines on flat surfaces
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoffAdjusted.x, angleCutoffAdjusted.y, abs(dot(normal, ${i})));
      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);`)}return e.pointDistanceEnabled&&(t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float2PassUniform */ .G("angleCutoff",(e=>O(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Float4PassUniform */ .E("pointDistanceSphere",((e,i)=>E(e,i)))),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));
color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);`)),e.lineVerticalPlaneEnabled&&(t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float2PassUniform */ .G("angleCutoff",(e=>O(e))),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Float4PassUniform */ .E("lineVerticalPlane",((e,i)=>z(e,i))),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Float3PassUniform */ .t("lineVerticalStart",((e,i)=>I(e,i))),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Float3PassUniform */ .t("lineVerticalEnd",((e,i)=>T(e,i)))),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);
vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));
color = max(color, lineVerticalColor * lineVerticalAlpha);
}`)),e.intersectsLineEnabled&&(t.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float2PassUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .Float2PassUniform */ .G("angleCutoff",(e=>O(e))),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Float3PassUniform */ .t("intersectsLineStart",((e,i)=>(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(F,e.lineStartWorld,i.camera.viewMatrix))),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Float3PassUniform */ .t("intersectsLineEnd",((e,i)=>(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(F,e.lineEndWorld,i.camera.viewMatrix))),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_14__/* .Float3PassUniform */ .t("intersectsLineDirection",((e,i)=>((0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(G,e.intersectsLineSegment.vector),G[3]=0,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(F,(0,_vec42_js__WEBPACK_IMPORTED_MODULE_5__.t)(G,G,i.camera.viewMatrix))))),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_17__/* .FloatPassUniform */ .m("intersectsLineRadius",(e=>e.intersectsLineRadius))),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));
color = max(color, intersectsLineColor * intersectsLineAlpha);
}`)),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .glsl */ .H)`fragColor = laserlineOutput(color * depthDiscontinuityAlpha);`),i}function O(t){return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .set */ .hZ)(U,Math.cos(t.angleCutoff),Math.cos(Math.max(0,t.angleCutoff-(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(2))))}function E(e,i){return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)((0,_sphere_js__WEBPACK_IMPORTED_MODULE_9__.a)(N),e.pointDistanceOrigin,i.camera.viewMatrix),N[3]=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.j)(e.pointDistanceOrigin,e.pointDistanceTarget),N}function z(e,i){const t=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_7__/* .pointAt */ .sd)(e.lineVerticalPlaneSegment,.5,F),n=e.renderCoordsHelper.worldUpAtPosition(t,W),a=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(H,e.lineVerticalPlaneSegment.vector),r=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)(F,n,a);return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(r,r),R(e.lineVerticalPlaneSegment.origin,r,i.camera.viewMatrix)}function I(e,i){const t=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(F,e.lineVerticalPlaneSegment.origin);return e.renderCoordsHelper.setAltitude(t,0),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(t,t,i.camera.viewMatrix)}function T(e,i){const t=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)(F,e.lineVerticalPlaneSegment.origin,e.lineVerticalPlaneSegment.vector);return e.renderCoordsHelper.setAltitude(t,0),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(t,t,i.camera.viewMatrix)}function R(e,i,t){return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(_,e,t),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(G,i),G[3]=0,(0,_vec42_js__WEBPACK_IMPORTED_MODULE_5__.t)(G,G,t),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_8__/* .fromPositionAndNormal */ .O_)(_,G,B)}const U=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),F=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),G=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),W=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),H=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),_=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),B=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_8__/* .create */ .vt)(),N=(0,_sphere_js__WEBPACK_IMPORTED_MODULE_9__.c)(),$=Object.freeze(Object.defineProperty({__proto__:null,build:y,defaultAngleCutoff:V},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 74642:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ Ss),
/* harmony export */   A: () => (/* binding */ Ru),
/* harmony export */   B: () => (/* binding */ Tu),
/* harmony export */   C: () => (/* binding */ wr),
/* harmony export */   D: () => (/* binding */ jh),
/* harmony export */   E: () => (/* binding */ Pr),
/* harmony export */   F: () => (/* binding */ ou),
/* harmony export */   H: () => (/* binding */ ks),
/* harmony export */   I: () => (/* binding */ Ls),
/* harmony export */   J: () => (/* binding */ Rs),
/* harmony export */   K: () => (/* binding */ Js),
/* harmony export */   L: () => (/* binding */ pm),
/* harmony export */   M: () => (/* binding */ Ee),
/* harmony export */   N: () => (/* binding */ kh),
/* harmony export */   O: () => (/* binding */ Wh),
/* harmony export */   P: () => (/* binding */ Os),
/* harmony export */   Q: () => (/* binding */ rm),
/* harmony export */   R: () => (/* binding */ ze),
/* harmony export */   S: () => (/* binding */ fm),
/* harmony export */   T: () => (/* binding */ En),
/* harmony export */   U: () => (/* binding */ fh),
/* harmony export */   V: () => (/* binding */ Gu),
/* harmony export */   W: () => (/* binding */ us),
/* harmony export */   X: () => (/* binding */ pr),
/* harmony export */   Y: () => (/* binding */ om),
/* harmony export */   Z: () => (/* binding */ um),
/* harmony export */   _: () => (/* binding */ is),
/* harmony export */   a: () => (/* binding */ ur),
/* harmony export */   a0: () => (/* binding */ Ye),
/* harmony export */   a1: () => (/* binding */ am),
/* harmony export */   a2: () => (/* binding */ hm),
/* harmony export */   a3: () => (/* binding */ gm),
/* harmony export */   a4: () => (/* binding */ Xe),
/* harmony export */   a5: () => (/* binding */ cu),
/* harmony export */   a6: () => (/* binding */ fr),
/* harmony export */   a7: () => (/* binding */ Yh),
/* harmony export */   a8: () => (/* binding */ _e),
/* harmony export */   a9: () => (/* binding */ Th),
/* harmony export */   b: () => (/* binding */ Ah),
/* harmony export */   c: () => (/* binding */ Ks),
/* harmony export */   d: () => (/* binding */ zh),
/* harmony export */   e: () => (/* binding */ Sr),
/* harmony export */   f: () => (/* binding */ yr),
/* harmony export */   g: () => (/* binding */ cs),
/* harmony export */   i: () => (/* binding */ vr),
/* harmony export */   l: () => (/* binding */ Xh),
/* harmony export */   n: () => (/* binding */ cr),
/* harmony export */   s: () => (/* binding */ pe),
/* harmony export */   x: () => (/* binding */ Jn),
/* harmony export */   y: () => (/* binding */ ia),
/* harmony export */   z: () => (/* binding */ Lu)
/* harmony export */ });
/* unused harmony exports G, h, j, k, m, o, p, q, r, t, u, v, w */
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/* harmony import */ var _Envelope_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(75992);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86330);
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21566);
/* harmony import */ var _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(33147);
/* harmony import */ var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50256);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ge{constructor(){this.posStream=null,this.streams=null}get(t){return t>0?this.streams[t-1]:this.posStream}set(t,e){t>0?this.streams[t-1]=e:this.posStream=e}destroyAndSetSize(t){if(this.streams=null,t>1){this.streams=new Array(t-1);for(let e=0;e<t-1;++e)this.streams[e]=null}this.posStream=null}swap(t){[this.streams,t.streams]=[t.streams,this.streams],[this.posStream,t.posStream]=[t.posStream,this.posStream]}empty(){return null===this.posStream&&null===this.streams}}function de(t,s,n,i,r){(s<0||n<0||i<1||s+i*(n-1)+1>t.size())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Index out of bound");for(let e=s,o=s+i*(n-1)+1;e<o;e+=i)t.writeAsDbl(e,r(t.readAsDbl(e)))}function _e(t,e,s){if(t)for(let n=e.length-1;n>=0;--n)s(e[n]);else e.forEach(s)}function pe(t,e){let s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.B)(t);const n=e.length/(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)();for(let i=0;i<e.length;++i){const t=Math.trunc(s*n);s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.B)(s);const i=Math.trunc(s*n),r=e[t];e[t]=e[i],e[i]=r}}function fe(t,e,s){if(0===t.length)return;let n=0,i=0;for(++i;i!==t.length;++i)e(t[n],t[i])||(s(n,i),n=i);s(n,i)}function Pe(t,e,s,n,i){tt(t,e,n-e,((t,e)=>i(t,e)?-1:1))}function ye(t,e,s){if(!(s<=e))for(;e<s;)t[s]=et(t[e],t[e]=t[s]),e++,s--}function xe(t,e,s,n){ye(t,e,s-1),ye(t,s,n-1),t.reverse()}function Ce(t,e,s){const n=t.getDescription().getTotalComponentCount();t.setX(e[0]),t.setY(e[1]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(t.getAttributeArray(),e,0,2,n-2)}var ve=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;const be="can not assign an empty point to a vertex";class Se{constructor(t){if(this.m_accelerators=null,void 0!==t&&t.move)this.m_description=t.move.m_description,t.move.m_description=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)(),this.m_vertexAttributes=t.move.m_vertexAttributes,t.move.m_vertexAttributes=new ge,this.m_envelopeData=t.move.m_envelopeData,t.move.m_envelopeData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.k,this.m_pointCount=t.move.m_pointCount,this.m_reservedPointCount=t.move.m_reservedPointCount,this.m_flags=t.move.m_flags,this.m_bFillRule=t.move.m_bFillRule,this.m_bPathStarted=t.move.m_bPathStarted,this.m_bPolygon=t.move.m_bPolygon,this.m_simpleTolerance=t.move.m_simpleTolerance;else{const e=void 0!==t&&t.vd?t.vd:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)();this.m_description=e,this.m_vertexAttributes=new ge,this.m_envelopeData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.k,this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_flags=4063,this.m_bFillRule=this.m_bPathStarted=this.m_bPolygon=!1,this.m_simpleTolerance=0,void 0!==t&&t.copy&&t.copy.copyTo(this)}}equalsBase(e,s){if(!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.i)(e.getGeometryType()))return!1;const n=e;if(this===n)return!0;if(!this.m_description.equals(n.getDescription()))return!1;if(this.isEmptyImpl()!==n.isEmptyImpl())return!1;if(this.isEmptyImpl())return!0;const i=this.getPointCount();if(i!==n.getPointCount())return!1;for(let t=0;t<this.m_description.getAttributeCount();t++){const e=this.m_description.getSemantics(t),r=this.getAttributeStreamRef(e),o=n.getAttributeStreamRef(e),a=ve.getComponentCount(e);if(!r.equals(o,0,i*a,s))return!1}if(s){if(!this.equalsImplTol(e,s))return!1}else if(!this.equalsImpl(e))return!1;return!0}transformAttribute(t,s,n,i,r){if(this.addAttribute(t),!this.isEmpty()&&(0!==n||1!==i)){if(0===t){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;return 0===r?0===s?(t.setShiftCoords(n,0),t.scale(i,1)):1===s?(t.setShiftCoords(0,n),t.scale(1,i)):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""):0===s?(t.setScaleCoords(1/i,1),t.shiftCoords(-n,0)):1===s?(t.setScaleCoords(1,1/i),t.shiftCoords(0,-n)):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),void this.applyTransformation(t)}de(this.getAttributeStreamRef(t),s,this.getPointCount(),ve.getComponentCount(t),(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.v)(n,i,r)),this.notifyModified()}}getDescription(){return this.m_description}assignVertexDescription(t){this.m_description!==t&&this.assignVertexDescriptionImpl(t)}mergeVertexDescriptionImpl(t){const e=this.getDescription(),s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.l)(e,t);this.assignVertexDescription(s)}mergeVertexDescription(t){this.m_description!==t&&(this.m_description.hasAttributesFrom(t)||this.mergeVertexDescriptionImpl(t))}hasAttribute(t){return this.m_description.hasAttribute(t)}addAttribute(t){if(this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.m_description,t);this.assignVertexDescription(e)}dropAttribute(t){if(!this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.r)(this.m_description,t);this.assignVertexDescription(e)}dropAllAttributes(){const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)();t!==this.m_description&&this.assignVertexDescription(t)}getAttributeStreamRef(t){this.throwIfEmpty(),this.m_description.hasAttribute(t)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("AttributeStream : Geometry does not have the attribute");const s=this.m_description.getAttributeIndex(t);return this.m_vertexAttributes.get(s)}setAttributeStreamRef(t,s){s||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("stream"),s&&ve.getPersistence(t)!==s.getPersistence()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.addAttribute(t);const n=this.m_description.getAttributeIndex(t);this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_vertexAttributes.set(n,s),this.notifyModifiedFlags(2001)}notifyModifiedFlags(t){65535===t&&(this.m_reservedPointCount=-1,this.notifyModifiedAllImpl()),this.setDirtyFlagProtected(t,!0),this.clearAccelerators(),32&t&&this.verifyAllStreamsAfterSizeChange()}notifyModified(){this.notifyModifiedFlags(2001)}getPointCount(){return this.m_pointCount}getPointByVal(t,e){const s=e;s.assignVertexDescription(this.m_description);for(let n=0;n<this.m_description.getAttributeCount();n++){const e=this.m_description.getSemantics(n);for(let i=0,r=ve.getComponentCount(e);i<r;i++){const o=this.m_vertexAttributes.get(n).readAsDbl(r*t+i);s.setAttributeBasic(e,i,o)}}}setPointByValNoCurves(t,s){const n=s;n.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(be);const i=n.getDescription();i!==this.m_description&&this.mergeVertexDescription(i);const r=this.m_vertexAttributes.get(0);r.write(2*t,n.getX()),r.write(2*t+1,n.getY());for(let e=1,o=this.m_description.getAttributeCount();e<o;e++){const s=this.m_description.getSemantics(e),i=ve.getComponentCount(s);for(let r=0;r<i;r++){const o=n.getAttributeAsDbl(s,r);this.m_vertexAttributes.get(e).writeAsDbl(t*i+r,o)}}this.notifyModifiedFlags(2001)}setPointByValFromArrayNoCurves(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getPointByValAsArray(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}isEmpty(){return this.isEmptyImpl()}isEmptyImpl(){return 0===this.m_pointCount}getAttributeAsDbl(t,e,s){const i=ve.getComponentCount(t);s>=i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const r=this.m_description.getAttributeIndex(t);return r>=0?this.m_vertexAttributes.get(r).readAsDbl(e*i+s):ve.getDefaultValue(t)}queryAttributeAsDbl(t,e,s,i){const r=ve.getComponentCount(t);i<r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const o=this.m_description.getAttributeIndex(t);if(o>=0){const t=e*r,n=this.m_vertexAttributes.get(o);for(let e=0;e<r;e++)s[e]=n.readAsDbl(t+e)}else{const e=ve.getDefaultValue(t);for(let t=0;t<r;t++)s[t]=e}}getAttributeAsInt(t,e,s){return Math.trunc(this.getAttributeAsDbl(t,e,s))}queryAttributeAsInt(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setAttributeNoCurves(t,e,s,i){const r=ve.getComponentCount(t);s>=r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.addAttribute(t);const o=this.m_description.getAttributeIndex(t);this.notifyModifiedFlags(2001),this.m_vertexAttributes.get(o).writeAsDbl(e*r+s,i)}setAttributeFromArrayNoCurves(t,e,s,i){(e<0||e>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const r=ve.getComponentCount(t);i<r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.addAttribute(t);const o=this.m_description.getAttributeIndex(t);this.notifyModifiedFlags(2001);const a=this.m_vertexAttributes.get(o);for(let n=0;n<r;++n)a.writeAsDbl(e*r+n,s[n])}getXY(t){return this.m_vertexAttributes.get(0).readPoint2D(2*t)}queryXY(t,e){return this.m_vertexAttributes.get(0).queryPoint2D(2*t,e)}setXYNoCurves(t,e){this.m_vertexAttributes.get(0).writePoint2D(2*t,e),this.notifyModifiedFlags(2001)}setXYCoordsNoCurves(t,e,s){const n=this.m_vertexAttributes.get(0);n.write(2*t,e),n.write(2*t+1,s),this.notifyModifiedFlags(2001)}getXYZ(t){const e=this.m_vertexAttributes.get(0),s=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d.getNAN();return s.x=e.read(2*t),s.y=e.read(2*t+1),this.m_description.hasAttribute(1)?s.z=this.m_vertexAttributes.get(1).read(t):s.z=ve.getDefaultValue(1),s}setXYZNoCurves(t,e){this.addAttribute(1),this.notifyModifiedFlags(2001);const s=this.m_vertexAttributes.get(0);s.write(2*t,e.x),s.write(2*t+1,e.y);this.m_vertexAttributes.get(1).write(t,e.z)}queryEnvelope(t){t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D||t instanceof _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.n?this.updateEnvelope(t):(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,t))}queryLooseEnvelope(t){this.updateLooseEnvelope(t)}queryInterval(t,e){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();return this.isEmptyImpl()||(this.updateAllDirtyIntervals(!0),this.m_envelopeData.queryInterval(this.m_description,t,e,s)),s}setAttributeBasic(t,e,s){this.setAttributeImpl(t,e,s)}setAttributeImpl(t,e,s){if(this.addAttribute(t),this.isEmpty())return;let n=!1;const i=ve.getComponentCount(t),r=this.getAttributeStreamRef(t),o=Number.isNaN(s);if(1===r.getPersistence()){const t=r;for(let r=e,a=this.m_pointCount*i;r<a;r+=i){const e=t.read(r);(o||e===s)&&Number.isNaN(e)||(t.write(r,s),n=!0)}}else for(let a=e,h=this.m_pointCount*i;a<h;a+=i){r.readAsDbl(a)!==s&&(r.writeAsDbl(a,s),n=!0)}n&&this.notifyModifiedFlags(2001)}replaceNaNs(t,e){if(this.addAttribute(t),this.isEmpty())return;let s=!1;const n=ve.getComponentCount(t),i=this.getAttributeStreamRef(t);for(let r=0;r<n;r++)if(1===i.getPersistence()){const t=i;for(let i=0,r=this.m_pointCount*n;i<r;i++){const n=t.read(i);Number.isNaN(n)&&(t.write(i,e),s=!0)}}else for(let t=0,o=this.m_pointCount*n;t<o;t++){const n=i.readAsDbl(t);Number.isNaN(n)&&(i.writeAsDbl(t,e),s=!0)}s&&this.notifyModifiedFlags(2001)}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}setEnvelopeForImport(t){this.m_description.equals(t.getDescription())||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.m_envelopeData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.k({moveEnv:t}),this.setDirtyFlagProtected(192,!1)}copyTo(t){t.getGeometryType()!==this.getGeometryType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this!==t&&this.copyToUnchecked(t,!1)}queryCoordinates(t,s,n,i){let r=i<0?this.m_pointCount:i;if(r=Math.min(r,n+s),(n<0||r<n||this.m_pointCount>0&&n>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),0===this.m_pointCount)return r;const o=this.getAttributeStreamRef(0);for(let e=2*n,a=2*r,h=0;e<a;e+=2,h++)o.queryPoint2D(e,t[h]);return r}queryCoordinates3D(t,s,n,i){let r=i<0?this.m_pointCount:i;if(r=Math.min(r,n+s),(n<0||r<n||this.m_pointCount>0&&n>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),0===this.m_pointCount)return r;const o=this.getAttributeStreamRef(0);let a=null;const h=ve.getDefaultValue(1),u=this.m_description.hasAttribute(1);u&&(a=this.getAttributeStreamRef(1));let m=0;for(let e=n;e<r;e++,m++)t[m].x=o.read(2*e),t[m].y=o.read(2*e+1),t[m].z=u?a.read(e):h;return r}clearAndSetDirtyFlagProtected(t,e){let s=0;const n=t&~e,i=e|n;s=this.m_flags,(s&i)!==e&&(this.m_flags=s&~n|e)}getIsSimple(t,e){e[0]=0;let s=-1;const n=this.m_flags,i=this.m_simpleTolerance;if(!(1&n)){s=(14&n)>>1,e[0]=i,i<t&&(s=-1)}return s}setIsSimple(t,e,n=!1){if(2===t?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline):1===t?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint||this.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline):3===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon),-1===t)this.setDirtyFlagProtected(17,!0);else{let s=t<<1;n||(s|=16);const i=31;this.clearAndSetDirtyFlagProtected(i,s),this.m_simpleTolerance!==e&&(this.m_simpleTolerance=e)}}attributeStreamIsAllocated(t){this.throwIfEmpty();const e=this.m_description.getAttributeIndex(t);return e>=0&&null!==this.m_vertexAttributes.get(e)}capacity(){return-1===this.m_reservedPointCount&&0===this.m_pointCount?0:this.m_reservedPointCount}getDescriptionImpl(){return this.m_description}copyToUnchecked(t,e=!1){e&&this.hasDirtyFlag(32)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.s)("Cannot do shallow clone on unprepared geometry");const n=t,o=this.getGeometryType(),a=n.getGeometryType();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(o===a||o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon&&a===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline,"failure in copyToUnchcked"),n.clearAccelerators(),n.m_description=this.m_description,n.m_vertexAttributes.destroyAndSetSize(0),n.m_envelopeData.releaseAttributes();const h=this.m_description.getAttributeCount(),u=new ge;if(!this.m_vertexAttributes.empty()){u.destroyAndSetSize(h);for(let t=0;t<h;t++)if(this.m_vertexAttributes.get(t))if(e)u.set(t,this.m_vertexAttributes.get(t));else{const e=ve.getComponentCount(this.m_description.getSemantics(t));u.set(t,this.m_vertexAttributes.get(t).restrictedClone(this.getPointCount()*e))}}if(this.m_envelopeData.copyToIfNotNull(this.m_description,n.m_envelopeData),n.m_flags=this.m_flags,n.m_simpleTolerance=this.m_simpleTolerance,o!==a){const t=[Number.NaN];n.getIsSimple(0,t)>=3?n.setIsSimple(1,t[0]):n.setIsSimple(-1,0)}n.m_vertexAttributes.swap(u),u.destroyAndSetSize(0),n.m_pointCount=this.m_pointCount,n.hasDirtyFlag(32)||n.m_vertexAttributes.empty()?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!e||0===n.m_pointCount),n.m_reservedPointCount=-1):n.m_reservedPointCount=n.m_pointCount;try{this.copyToImpl(n,e)}catch(m){throw n.setEmpty(),m}n.verifyAllStreamsAfterSizeChange()}buildRasterizedGeometryAccelerator(t,e){return!1}getAccelerators(){return this.m_accelerators}clearAccelerators(){this.m_accelerators&&this.m_accelerators.release(),this.m_accelerators=null}ensureUniqueAccelerators(){if(this.m_accelerators&&!this.m_accelerators.uniqueUse()){const t=this.m_accelerators.clone();this.m_accelerators.release(),this.m_accelerators=t}}interpolateTwoVertices(t,e,i,r){(t<0||t>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),(e<0||e>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),r.assignVertexDescription(this.m_description);const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(ve.maxComponentCount(),Number.NaN),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(ve.maxComponentCount(),Number.NaN),h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)();let u=0;for(let n=0;n<this.m_description.getAttributeCount();n++){const r=this.m_description.getSemantics(n),m=ve.getInterpolation(r),l=ve.getComponentCount(r),c=ve.getDefaultValue(r);this.queryAttributeAsDbl(r,t,o,l),this.queryAttributeAsDbl(r,e,a,l),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(u+l<=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.O),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.A)(m,o,a,h,u,l,i,c),u+=l}Ce(r,h)}getShortestDistance(t,e){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getXY(t),this.getXY(e))}getShortestSqrDistance(t,e){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(this.getXY(t),this.getXY(e))}resizeImpl(t){if(t<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(),(t=Math.ceil(t))===this.m_pointCount)return;this.m_pointCount=t;const s=this.m_pointCount<=this.m_reservedPointCount?2001:4095;this.notifyModifiedFlags(s)}assignVertexDescriptionImpl(t){if(!this.m_vertexAttributes.empty()){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.p)();(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.q)(t,this.m_description,e);const s=new ge;s.destroyAndSetSize(t.getAttributeCount());for(let n=0;n<t.getAttributeCount();n++){const t=e[n];-1!==t?s.set(n,this.m_vertexAttributes.get(t)):this.m_reservedPointCount=-1}s.swap(this.m_vertexAttributes)}this.m_description=t,this.m_envelopeData.releaseAttributes(),this.notifyModifiedFlags(4095)}hasDirtyFlag(t){return 0!==(this.m_flags&t)}setDirtyFlagProtected(t,e){e?this.m_flags|=t:this.m_flags&=~t}notifyModifiedAllImpl(){}verifyAllStreamsAfterSizeChange(){this.hasDirtyFlag(32)&&this.verifyAllStreamsAfterSizeChangeImpl()}verifyAllStreamsAfterSizeChangeImpl(){if(this.hasDirtyFlag(32)){if(this.m_reservedPointCount<this.m_pointCount){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),this.m_reservedPointCount=-1;let t=Number.MAX_SAFE_INTEGER,e=0;e=this.m_pointCount<4?3:this.m_pointCount<=128?2*this.m_pointCount:Math.trunc((4*this.m_pointCount+2)/3);for(let s=0;s<this.m_description.getAttributeCount();s++){const n=this.m_description.getSemantics(s);let i=0;if(null!==this.m_vertexAttributes.get(s)){const t=ve.getComponentCount(n);i=this.m_vertexAttributes.get(s).size()/t,i<this.m_pointCount&&(this.m_vertexAttributes.get(s).resize(e*t,ve.getDefaultValue(n)),i=e)}else this.m_vertexAttributes.set(s,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.t)(n,e)),i=e;i<t&&(t=i)}this.m_reservedPointCount=t}this.verifyStreamsAfterSizeChangeExtraImpl(),this.setDirtyFlagProtected(32,!1)}}verifyStreamsAfterSizeChangeExtraImpl(){}updateAllDirtyIntervals(t){if(t?this.hasDirtyFlag(192):this.hasDirtyFlag(128)){if(this.isEmpty())return this.hasDirtyFlag(192)&&this.m_envelopeData.setEmpty(this.m_description),void this.setDirtyFlagProtected(192,!1);const e=this.updateXYImpl(t),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.E({vd:this.m_description});s.setEnvelope(e);for(let t=1;t<this.m_description.getAttributeCount();t++){const e=this.m_description.getSemantics(t),n=ve.getComponentCount(e),i=this.m_vertexAttributes.get(t);for(let t=0;t<n;t++){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;r.setEmpty();for(let e=0;e<this.m_pointCount;e++){const s=i.readAsDbl(e*n+t);r.mergeCoordinate(s)}s.setIntervalEnvelope(e,t,r)}}(t?this.hasDirtyFlag(192):this.hasDirtyFlag(128))&&(this.m_envelopeData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.k({moveEnv:s}),this.clearDirtyIntervalsFlag(t))}}updateXYImpl(t){const e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),s=this.m_vertexAttributes.get(0);return e.mergePointsInterleaved(s,0,this.m_pointCount),e}updateEnvelope3D(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}updateLooseEnvelope(t){this.updateAllDirtyIntervals(!1),t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D?t.assign(this.m_envelopeData.m_envelope2D):this.m_envelopeData.queryEnvelope3D(this.m_description,t)}updateEnvelope(t){this.updateAllDirtyIntervals(!0),t.assign(this.m_envelopeData.m_envelope2D)}setEmptyImpl(){this.m_pointCount=0,this.m_reservedPointCount=-1,this.m_vertexAttributes.destroyAndSetSize(0),this.notifyModifiedFlags(4095)}clearDirtyIntervalsFlag(t){this.setDirtyFlagProtected(192,!1)}reserveImpl(t,s){if(t<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),0===t)return;let n=t=Math.ceil(t);if(this.m_reservedPointCount<n){this.m_vertexAttributes.empty()&&this.m_vertexAttributes.destroyAndSetSize(this.m_description.getAttributeCount()),s?(null===this.m_vertexAttributes.get(0)&&this.m_vertexAttributes.set(0,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.u)(0,0)),this.m_vertexAttributes.get(0).resizeRounded(2*n),n=this.m_vertexAttributes.get(0).size()>>1):null===this.m_vertexAttributes.get(0)?this.m_vertexAttributes.set(0,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.u)(0,n)):this.m_vertexAttributes.get(0).resize(2*n);for(let t=1;t<this.m_description.getAttributeCount();t++){const e=this.m_description.getSemantics(t),s=ve.getComponentCount(e);null!==this.m_vertexAttributes.get(t)?this.m_vertexAttributes.get(t).resize(n*s):this.m_vertexAttributes.set(t,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.u)(e,n))}this.reserveImplImpl(n,s),this.m_reservedPointCount=n}}reserveRounded(t){t<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(),t=Math.ceil(t),this.reserveImpl(t,!0)}reserveImplImpl(t,e){}throwIfEmpty(){this.isEmptyImpl()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.u)("")}}class Ee extends Se{constructor(t){super(t),t&&(t.points?this.addPoints2D(t.points,t.pointsSize,0,-1):t.point&&this.add(t.point))}assignCopy(t){return t.copyTo(this),this}assignMove(t){return t.copyTo(this),t.setEmpty(),this}insertPoint2D(t,s){t>this.getPointCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid point index"),t<0&&(t=this.getPointCount());const n=this.m_pointCount;this.resizeNoInit(this.m_pointCount+1);for(let e=0,i=this.m_description.getAttributeCount();e<i;e++){const i=this.m_description.getSemantics(e),r=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(i);if(0===i)this.m_vertexAttributes.get(e).insert(r*t,s,r*n);else{const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(i);this.m_vertexAttributes.get(e).insertRange(r*t,s,r,r*n)}}this.notifyModifiedFlags(2001)}insertPoint(t,s){s.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(be),t<0&&(t=this.getPointCount()),this.mergeVertexDescription(s.getDescription());const n=this.m_pointCount;this.resizeNoInit(this.m_pointCount+1);for(let e=0,i=this.m_description.getAttributeCount();e<i;e++){const i=this.m_description.getSemantics(e),r=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(i);if(s.hasAttribute(i))this.m_vertexAttributes.get(e).insertAttributes(r*t,s,i,r*n);else{const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(i);this.m_vertexAttributes.get(e).insertRange(r*t,s,r,r*n)}}this.notifyModifiedFlags(2001)}insertPoints(t,e,s){if((t>this.getPointCount()||s<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),t<0&&(t=this.getPointCount()),0===s)return;const i=e[0].getDescription();this.mergeVertexDescription(i);const r=this.m_pointCount;this.resizeNoInit(this.m_pointCount+s);for(let n=0,o=this.m_description.getAttributeCount();n<o;n++){const o=this.m_description.getSemantics(n),a=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(o);if(this.m_vertexAttributes.get(n))if(i.hasAttribute(o))this.m_vertexAttributes.get(n).insertAttributesFromPoints(t*a,e,s,o,r*a);else{const e=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(o);this.m_vertexAttributes.get(n).insertRange(a*t,e,a*s,a*r)}}this.notifyModifiedFlags(2001)}insertPoints2D(t,s,n){if((t>this.getPointCount()||n<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid point index"),t<0&&(t=this.getPointCount()),0===n)return;const i=this.m_pointCount;this.resizeNoInit(this.m_pointCount+n);for(let e=0,r=this.m_description.getAttributeCount();e<r;e++){const r=this.m_description.getSemantics(e),o=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(r);if(this.m_vertexAttributes.get(e))if(0===r)this.m_vertexAttributes.get(e).insertRangeFromPoints(o*t,s,0,n,!0,o*i);else{const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(r);this.m_vertexAttributes.get(e).insertRange(o*t,s,o,o*i)}}this.notifyModifiedFlags(2001)}removePoints(t,e){if((t<0||e<0||t+e>this.getPointCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("remove_points"),0!==e){for(let s=0,n=this.m_description.getAttributeCount();s<n;s++)if(this.m_vertexAttributes.get(s)){const n=this.m_description.getSemantics(s),i=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(n);this.m_vertexAttributes.get(s).eraseRange(i*t,i*e,i*this.m_pointCount)}this.m_pointCount-=e,this.m_reservedPointCount>0&&(this.m_reservedPointCount-=e),this.notifyModifiedFlags(2001)}}removePoint(t){for(let e=0,s=this.m_description.getAttributeCount();e<s;e++)if(this.m_vertexAttributes.get(e)){const s=this.m_description.getSemantics(e),n=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(s);this.m_vertexAttributes.get(e).eraseRange(n*t,n,n*this.m_pointCount)}this.m_pointCount--,this.m_reservedPointCount>0&&this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}calculateEnvelope2D(){return this.updateXYImpl(!0)}resizeNoInit(t){this.resizeImpl(t)}resizeAndInitNonPositionAttributes(t){const e=this.m_pointCount;if(this.resizeImpl(t),this.m_pointCount>e)for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const t=this.m_description.getSemantics(s),n=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(t),i=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(t);this.m_vertexAttributes.get(s).insertRange(i*e,n,i*(this.m_pointCount-e),i*e)}}queryCoordinates3D(t,s,n,i){let r=i<0?this.m_pointCount:i;if(r=Math.min(r,n+s),(n<0||r<n||this.m_pointCount>0&&n>=this.m_pointCount)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),0===this.m_pointCount)return r;const o=this.getAttributeStreamRef(0);let a=null;const h=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(1),u=this.m_description.hasAttribute(1);u&&(a=this.getAttributeStreamRef(1));let m=0;for(let e=n;e<r;e++,m++)t[m].x=o.read(2*e),t[m].y=o.read(2*e+1),t[m].z=u?a.read(e):h;return r}queryAttributeAsInt(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}add(t){t.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(be),this.resizeAndInitNonPositionAttributes(this.m_pointCount+1),this.setPointByValNoCurves(this.m_pointCount-1,t)}addXY(t,e){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t,e);this.setXYNoCurves(this.m_pointCount-1,s)}addXYZ(t,e,s){this.resizeAndInitNonPositionAttributes(this.m_pointCount+1);const n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d;n.setCoords(t,e,s),this.setXYZNoCurves(this.m_pointCount-1,n)}addPoint2D(t){this.addXY(t.x,t.y)}addPoint3D(t){this.addXYZ(t.x,t.y,t.z)}addPoints(t,s,n){this===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_point_impl.add");const i=n<0?t.getPointCount():n;if((s<0||s>t.getPointCount()||i<s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),s===i)return;const r=t.getDescription();this.mergeVertexDescription(r);const o=i-s,a=this.m_pointCount;this.resizeNoInit(this.m_pointCount+o);for(let e=0,h=this.m_description.getAttributeCount();e<h;e++){const n=this.m_description.getSemantics(e),i=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getComponentCount(n),h=this.getAttributeStreamRef(n);if(r.hasAttribute(n)){const e=t.getAttributeStreamRef(n);h.insertRangeFromStream(a*i,e,s*i,o*i,!0,1,a*i)}else{const t=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V.getDefaultValue(n);h.insertRange(a*i,t,o*i,a*i)}}}addPoints2D(t,s,n,i){let r=s;const o=i<0?r:i;if((r<0||n<0||n>r||o<n)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),n===o)return;r=o-n;const a=this.m_pointCount;this.resizeAndInitNonPositionAttributes(this.m_pointCount+r);const h=this.getAttributeStreamRef(0);for(let e=0;e<r;++e)h.writePoint2D(2*(a+e),t[n+e]);this.notifyModifiedFlags(2001)}addPoints3D(t,s,n,i){let r=s;const o=i<0?r:i;if((r<0||n<0||n>r||o<n)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.addAttribute(1),n===o)return;r=o-n;const a=this.m_pointCount;this.resizeAndInitNonPositionAttributes(this.m_pointCount+r);const h=this.getAttributeStreamRef(0),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let e=0;e<r;e++)u.x=t[n+e].x,u.y=t[n+e].y,h.writePoint2D(2*(a+e),u);const m=this.getAttributeStreamRef(1);for(let e=0;e<r;e++)m.write(a+e,t[n+e].z);this.notifyModifiedFlags(2001)}setPointByVal(t,e){this.setPointByValNoCurves(t,e)}setXY(t,e){this.setXYNoCurves(t,e)}setXYCoords(t,e,s){this.setXYCoordsNoCurves(t,e,s)}setXYZ(t,e){this.setXYZNoCurves(t,e)}setAttribute(t,e,s,n){this.setAttributeNoCurves(t,e,s,n)}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint}getDimension(){return 0}createInstance(){return new Ee({vd:this.getDescription()})}setEmpty(){this.setEmptyImpl()}applyTransformation(t){if(this.isEmpty())return;if(t.isIdentity())return;const e=this.m_vertexAttributes.get(0);1===t.m_TransformationType?e.applyTransformation(t,0,this.m_pointCount):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d xform not impl"),this.notifyModifiedFlags(2001)}calculateArea2D(){return 0}calculateLength2D(){return 0}calculateLength3D(t){return 0}equals(t,e){return t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint&&this.equalsBase(t,e)}queryEnvelope(t){4===t.m_EnvelopeType?(this.updateAllDirtyIntervals(!0),this.m_envelopeData.copyTo(this.m_description,t)):2===t.m_EnvelopeType?this.updateEnvelope(t):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}getImpl(){return this}getBoundary(){return null}reserve(t){this.reserveImpl(t)}clone(){const t=this.createInstance();return this.copyTo(t),t}swap(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}buildQuadTreeAccelerator(t){return!1}getHashCodeImpl(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}equalsImpl(t){return!0}equalsImplTol(t,e){return!0}copyToImpl(t,e){}}Ee.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint;class De{constructor(){this.m_EnvelopeType=5,this.envAabb=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),this.envRot=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty()}static constructEmpty(){return new De}width(){return this.envAabb.width()}height(){return this.envAabb.height()}maxDim(){return Math.max(this.width(),this.height())}setEmpty(){this.envAabb.setEmpty(),this.envRot.setEmpty()}setCoords(t){this.envAabb.setCoords(t),this.envRot.setCoords({x:Te(t),y:Ie(t)})}setFromPoints(t,e){this.setEmpty(),this.mergePoints(t,e)}mergeNe(t){this.envAabb.mergeNe(t),this.envRot.mergeNeCoords(Te(t),Ie(t))}mergePoints(t,e){this.envAabb.mergePoints(t,e);for(let s=0;s<e;){if(!this.envRot.isEmpty()){for(let n=s;n<e;n++){const e=Te(t[n]),s=Ie(t[n]);this.envRot.mergeNeCoords(e,s)}break}{const e=Te(t[s]),n=Ie(t[s]);this.envRot.setCoords({x:e,y:n}),s++}}}isIntersectingPoint2D(t){return!(!this.envAabb.contains(t)||!this.envRot.containsCoords(Te(t),Ie(t)))}isIntersectingW(t){return this.envAabb.isIntersecting(t.envAabb)&&this.envRot.isIntersecting(t.envRot)}containsW(t){return!(!this.envAabb.containsEnvelope(t.envAabb)||!this.envRot.containsEnvelope(t.envRot))}containsPoint2D(t){return this.isIntersectingPoint2D(t)}intersectW(t){const e=this.envAabb.intersect(t.envAabb),s=this.envRot.intersect(t.envRot);return e&&!s&&this.envAabb.setEmpty(),s&&!e&&this.envRot.setEmpty(),e&&s}inflate(t){this.envAabb.inflateCoords(t,t);const e=t*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.D)();this.envRot.inflateCoords(e,e),e<0&&De.st_reduceEmpty(this)}static st_reduceEmpty(t){const e=t.envAabb.isEmpty(),s=t.envRot.isEmpty();e&&!s?t.envRot.setEmpty():s&&!e&&t.envAabb.setEmpty()}sqrMaxMinDistance(t){const e=this.envAabb.sqrMaxMinDistance(t),s=this.envRot.sqrMaxMinDistance(Me(t))/2;return Math.max(e,s)}sqrMinDistance(t){const e=this.envAabb.sqrMinDistance(t),s=this.envRot.sqrMinDistance(Me(t))/2;return Math.max(e,s)}sqrMaxDistance(t){const e=this.envAabb.sqrMaxDistance(t),s=this.envRot.sqrMaxDistance(Me(t))/2;return Math.max(e,s)}getEnvelope2D(){return this.envAabb}getRotatedEnvelope2D(){return this.envRot}xyRot(t,e){const s=we(t.x,t.y),n=Ae(t.x,t.y);e.setCoords(s,n)}}function we(t,e){return t-e}function Ae(t,e){return t+e}function Te(t){return t.x-t.y}function Ie(t){return t.x+t.y}function Me(t){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(Te(t),Ie(t))}class Ye{constructor(){this.x=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.getNAN(),this.y=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.getNAN()}static getNAN(){return new Ye}static constructPoint2D(t){const e=new Ye;return e.x.set(t.x),e.y.set(t.y),e}static constructCoords(t,e){const s=new Ye;return s.x.set(t),s.y.set(e),s}static constructCoordsE(t,e){const s=new Ye;return s.setCoordsE(t,e),s}get 0(){return this.x.clone()}set 0(t){this.x.setE(t)}get 1(){return this.y.clone()}set 1(t){this.y.setE(t)}clone(){return(new Ye).setE(this)}scaleThis(t){return this.x.mulThisE(t),this.y.mulThisE(t),this}setCoords(t,e){return this.x.set(t),this.y.set(e),this}setCoordsE(t,e){return this.x.setE(t),this.y.setE(e),this}set(t){return this.x.set(t.x),this.y.set(t.y),this}setE(t){return this.x.setE(t.x),this.y.setE(t.y),this}setWithEps(t,e){return this.x.setWithEps(t.x,e),this.y.setWithEps(t.y,e),this}getUnitVector(){const t=this.clone();return t.normalize(),t}sqrLength(){return this.x.sqr().addE(this.y.sqr())}length(){return this.sqrLength().sqrt()}mulE(t){const e=new Ye;return e.setCoordsE(this.x.mulE(t),this.y.mulE(t)),e}mul(t){const e=new Ye;return e.setCoordsE(this.x.mul(t),this.y.mul(t)),e}mulThis(t){return this.x.mulThis(t),this.y.mulThis(t),this}mulThisE(t){return this.x.mulThisE(t),this.y.mulThisE(t),this}divE(t){return this.clone().divThisE(t)}divThisE(t){return this.x.divThisE(t),this.y.divThisE(t),this}normalize(){const t=this.length();0===t.value()?(this.x=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.I.clone(),this.y=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.J.clone()):(this.x.divThisE(t),this.y.divThisE(t))}addE(t){return this.clone().addThisE(t)}addThisE(t){return this.x.addThisE(t.x),this.y.addThisE(t.y),this}subE(t){return this.clone().subThisE(t)}subThisE(t){return this.x.subThisE(t.x),this.y.subThisE(t.y),this}static distance(t,e){return t.subE(e).length()}negateThis(){return this.x.negateThis(),this.y.negateThis(),this}eq(t){return this.x.eq(t.x)&&this.y.eq(t.y)}isZero(){return this.x.isZero()&&this.y.isZero()}isTrueZero(){return!this.x.value()&&!this.y.value()}rotateDirect(t,e){const s=this.x.mulE(t).subThisE(this.y.mulE(e)),n=this.x.mulE(e).addThisE(this.y.mulE(t));return this.x.setE(s),this.y.setE(n),this}rotateReverse(t,e){const s=this.x.mulE(t).addThisE(this.y.mulE(e)),n=this.x.negate().mulThisE(e).addThisE(this.y.mulE(t));return this.x.setE(s),this.y.setE(n),this}dotProduct(t){return this.x.mulE(t.x).addE(this.y.mulE(t.y))}crossProduct(t){return this.x.mulE(t.y).subE(this.y.mulE(t.x))}value(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.construct(this.x.value(),this.y.value())}}class Ne{constructor(){this.a11=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1),this.a12=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0),this.a21=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0),this.a22=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1)}clone(){const t=new Ne;return t.a11.setE(this.a11),t.a12.setE(this.a12),t.a21.setE(this.a21),t.a22.setE(this.a22),t}assign(t){return this.a11.setE(t.a11),this.a12.setE(t.a12),this.a21.setE(t.a21),this.a22.setE(t.a22),this}mulThis(t){const e=this.a11.mulE(t.a11).addThisE(this.a12.mulE(t.a21)),s=this.a11.mulE(t.a12).addThisE(this.a12.mulE(t.a22)),n=this.a21.mulE(t.a11).addThisE(this.a22.mulE(t.a21)),i=this.a21.mulE(t.a12).addThisE(this.a22.mulE(t.a22));return this.a11=e,this.a12=s,this.a21=n,this.a22=i,this}mulLeftThis(t){const e=t.clone();return this.assign(e.mulThis(this)),this}det(){return this.a11.mulE(this.a22).subThisE(this.a12.mulE(this.a21))}invertThis(){const t=this.det();if(0!==t.value()){const e=this.a22.divE(t),s=this.a12.negate().divThisE(t),n=this.a21.negate().divThisE(t),i=this.a11.divE(t);this.a11=e,this.a12=s,this.a21=n,this.a22=i}else this.setZero();return!t.isZero()}transposeThis(){return this.a21=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.a12,this.a12=this.a21),this}eigenSymmetric(t,e){const s=this.a12.clone();s.addThisE(this.a21),s.mulThisByPower2(.5);let n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0);if(s.isZero())t[0].setE(this.a11),t[1].setE(this.a22);else{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1);if(this.a11.ne(this.a22)){const r=this.a11.subE(this.a22).divE(s);r.mulThisByPower2(.5);const o=r.sqr();e.setE(r),e.absThis(),e.subThisE(o.add(1).sqrtThis()),r.gt(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.J)&&e.negateThis();const a=e.sqr().addThis(1).sqrtThis().invThis();i=e.mulE(a),n.setE(a);const h=e.mulE(s);t[0]=this.a11.addE(h),t[1]=this.a22.subE(h)}else n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1/Math.sqrt(2)),i=n.clone(),t[0]=this.a11.addE(s),t[1]=this.a22.subE(s)}e[0].x=n.toDouble(),e[0].y=i.toDouble(),e[1].x=i.negate().toDouble(),e[1].y=n.toDouble(),Math.abs(t[0].toDouble())>Math.abs(t[1].toDouble())&&(t[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t[0],t[0]=t[1]),e[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[0],e[0]=e[1]))}setZero(){this.a11.set(0),this.a21.set(0),this.a12.set(0),this.a22.set(0)}}class Xe{static constructPoint2D(t){return new Xe(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(t.x),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(t.y))}constructor(t,e){if(void 0===t)return this.x=(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M).setNAN(),void(this.y=(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M).setNAN());this.x=t.clone(),this.y=e.clone()}assignPoint2D(t){return this.x.setDouble(t.x),this.y.setDouble(t.y),this}setCoords(t,e){return this.x.setThis(t),this.y.setThis(e),this}asPoint2D(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(this.x.value(),this.y.value())}crossProduct(t){return this.x.mul(t.y).sub(this.y.mul(t.x))}leftPerpendicularThis(){const t=this.x.clone();this.x=this.y.clone().negate(),this.y=t}clone(){return new Xe(this.x,this.y)}dotProduct(t){return this.x.mul(t.x).add(this.y.mul(t.y))}add(t){return new Xe(this.x.add(t.x),this.y.add(t.y))}sub(t){return new Xe(this.x.sub(t.x),this.y.sub(t.y))}sqrLength(){return this.x.sqr().addThis(this.y.sqr())}mulThis(t){return this.x.mulThis(t),this.y.mulThis(t),this}mul(t){return this.clone().mulThis(t)}subThis(t){return this.x.subThis(t.x),this.y.subThis(t.y),this}addThis(t){return this.x.addThis(t.x),this.y.addThis(t.y),this}}var qe=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;function Fe(t){let e=!1;for(let s=0;s<2;s++){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[3][s]);n>0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])<0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[3][s])<0&&(t[1][s]=t[3][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[2][s])<0&&(t[2][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[2][s],t[3][s])<0&&(t[2][s]=t[3][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])<0&&(t[2][s]=t[1][s],e=!0)):n<0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])>0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[3][s])>0&&(t[1][s]=t[3][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[2][s])>0&&(t[2][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[2][s],t[3][s])>0&&(t[2][s]=t[3][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])>0&&(t[2][s]=t[1][s],e=!0)):t[1][s]===t[0][s]&&t[2][s]===t[0][s]||(t[1][s]=t[0][s],t[2][s]=t[0][s],e=!0)}return e}function Ve(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0].y,t[1].y),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1].y,t[2].y),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[2].y,t[3].y);if(e>=0&&s>=0&&n>=0||e<=0&&s<=0&&n<=0){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0].x,t[1].x),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1].x,t[2].x),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[2].x,t[3].x);if(e>=0&&s>=0&&n>=0||e<=0&&s<=0&&n<=0)return!0}return!1}function Le(t,e){const s=t.getStartXY();if(s.equals(e.getStartXY()))return!0;if(s.equals(e.getEndXY()))return!0;const n=t.getEndXY();return!!n.equals(e.getStartXY())||!!n.equals(e.getEndXY())}function Re(t,e){let s=t.calculateLowerLength2D();return!(s>e)&&(!!t.isLine()||(s=t.calculateUpperLength2D(),s<=e||0!==e&&t.calculateLength2D()<=e))}function ze(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);let r=t.queryControlPointsHelper(n);const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);let a=e.queryControlPointsHelper(o);n[0].equals(o[0])||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.w)("");const h=t.getGeometryType();if(h===e.getGeometryType()&&n.map(((t,e)=>o[e].equals(t))).reduce(((t,e)=>t&&e))){if(h!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2)return 0;{const s=e,n=[0,0,0],i=[0,0,0];if(t.queryWeights(n),s.queryWeights(i),n.map(((t,e)=>i[e]===t)).reduce(((t,e)=>t&&e)))return 0}}for(;r>2&&n[1].equals(n[0]);)n.splice(1,1),r--;for(;a>2&&o[1].equals(o[0]);)o.splice(1,1),a--;(n[1].equals(n[0])||o[1].equals(n[0]))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.w)("");const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.compareVectorsOrigin(n[0],n[1],o[1]);if(0===m){const s=Xe.constructPoint2D(n[0]),i=new Xe;t.queryCoord2DMP(1e-16,i),i.sub(s);const r=new Xe;e.queryCoord2DMP(1e-16,r),r.sub(s);return r.crossProduct(i).sign()}return m}function Be(t,e,n,i,r,o,a,h){let u=t.calculateUpperLength2D(),m=e.calculateUpperLength2D(),l=t,c=e,g=!1;u>m&&(c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(l,l=c),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n,n=i),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(u,u=m),g=!0);const d=0===n;{a[0]=d?1:0;const t=l.getCoord2D(a[0]);h[0]=c.getClosestCoordinate(t,!1);const e=c.getCoord2D(h[0]);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e)<=r){const e=[.5,.75,.25,.1,.9];let s=!0;for(let n=0;n<e.length;n++)if(t.assign(l.getCoord2D(e[n])),!c.isCloserThanDistance(t,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),r)){s=!1;break}if(s)return g&&(h[0]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a[0],a[0]=h[0])),1}}if(u<=3*r)return 0;let _=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(Math.max(r/u,.1),0,.5),p=.01*r,f=0,P=0,y=_,x=-1,C=0,v=1/32;for(let b=0;;b++){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(b<4095);const t=d?_:1-_,e=l.getCoord2D(t),n=c.getClosestCoordinate(e,!1);if(n===i)return C;const u=c.getCoord2D(n),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,u);if(0===b&&(x=m),m<=p?(v=.5,P=m,f=_):(y=_,x=m),Math.abs(P-x)>.1*p&&y-f>1e-16)_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(f,y,v);else{if(a[C]=t,h[C]=n,g&&(h[C]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a[C],a[C]=h[C])),1===o||1===C)return 1===C&&a[0]>a[1]&&(a[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a[0],a[0]=a[1]),h[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(h[0],h[0]=h[1])),C+1;C++,f=y,P=x,y=.8,x=-1,_=.8,v=1/32,p=10*r,b=0}}}function ke(t,e,s,n,i,r,o,a,h){if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(s,0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n,0,1)){if(0===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getCoord2D(s),e.getCoord2D(n))){const h=1e-12,u=new Ye,m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)();if(t.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s,m),u),u.isTrueZero()){const e=1===s?-1e-12:h;t.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s,m).add(e),u)}1===s&&u.negateThis();const l=new Ye;if(e.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(n,m),l),l.isTrueZero()){const t=1===s?-1e-12:h;e.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(n,m).add(t),l)}1===n&&l.negateThis(),u.isZero()||u.normalize(),l.isZero()||l.normalize();const c=u.dotProduct(l),g=u.crossProduct(l);g.scaleError(3);const d=()=>{{const s=t.calculateUpperLength2D(),n=e.calculateUpperLength2D();return Math.min(.01*i/Math.min(s,n),1e-10)}};if(c.ge(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.J)&&(g.isZero()||Math.abs(g.value())<d())){return Be(t,e,s,n,i,r,o,a)}}}return 0}function Ge(t,e,n){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.isCurve()||e.isCurve()),t.getStartXY().equals(e.getStartXY())){if(ke(t,e,0,0,n,2,[0,0],[0,0]))return!0}if(t.getEndXY().equals(e.getEndXY())){if(ke(t,e,1,1,n,2,[0,0],[0,0]))return!0}if(t.getStartXY().equals(e.getEndXY())){if(ke(t,e,0,1,n,2,[0,0],[0,0]))return!0}if(t.getEndXY().equals(e.getStartXY())){if(ke(t,e,1,0,n,2,[0,0],[0,0]))return!0}return!1}function We(t,e){t.m_XStart=e.x,t.m_YStart=e.y}function je(t,e,s){t.m_XStart=e,t.m_YStart=s}function Ze(t,e){t.m_XEnd=e.x,t.m_YEnd=e.y}function He(t,e,s){t.m_XEnd=e,t.m_YEnd=s}function Ue(t,e,s){e?t.m_XEnd===s.x&&t.m_YEnd===s.y||(t.m_XEnd=s.x,t.m_YEnd=s.y,t.endPointModified()):t.m_XStart===s.x&&t.m_YStart===s.y||(t.m_XStart=s.x,t.m_YStart=s.y,t.endPointModified())}function Oe(t,e){const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d;return e?(s.x=t.m_XEnd,s.y=t.m_YEnd):(s.x=t.m_XStart,s.y=t.m_YStart),s.z=Qe(t,e),s}function Qe(t,e){return t.m_description.hasZ()?t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)]:qe.getDefaultValue(1)}function Je(t,e,s){t.m_description.hasZ()||t.addAttribute(1),e?t.m_XEnd===s.x&&t.m_YEnd===s.y||(t.m_XEnd=s.x,t.m_YEnd=s.y,t.endPointModified()):t.m_XStart===s.x&&t.m_YStart===s.y||(t.m_XStart=s.x,t.m_YStart=s.y,t.endPointModified()),t.m_attributes[(t.m_description.getTotalComponentCount()-2)*e]=s.z}function Ke(t,e,s){s.assignVertexDescription(t.m_description);const n=0===e?t.m_XStart:t.m_XEnd,i=0===e?t.m_YStart:t.m_YEnd;s.setXYCoords(n,i);for(let r=1;r<t.m_description.getAttributeCount();r++){const n=t.m_description.getSemantics(r);for(let i=0,r=qe.getComponentCount(n);i<r;i++){const r=ts(t,e,n,i);s.setAttributeBasic(n,i,r)}}}function $e(t,e,s){s.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.u)(""),Ue(t,e,s.getXY());const n=s.getDescription();n!==t.m_description&&t.mergeVertexDescription(n);for(let i=1,r=n.getAttributeCount();i<r;i++){const r=n.getSemantics(i),o=qe.getComponentCount(r);for(let n=0;n<o;n++){es(t,e,r,n,s.getAttributeAsDbl(r,n))}}}function ts(t,e,s,i){if((e<0||e>1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),0===s)return(i<0||i>=2)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),0===e?0===i?t.m_XStart:t.m_YStart:0===i?t.m_XEnd:t.m_YEnd;const r=qe.getComponentCount(s);(i<0||i>=r)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const o=t.m_description.getAttributeIndex(s);return o>=0?t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(o)-2+i]:qe.getDefaultValue(s)}function es(t,e,s,i,r){if((e<0||e>1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),0===s)return 0===e?0===i?t.m_XStart=r:1===i?t.m_YStart=r:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""):1===e?0===i?t.m_XEnd=r:1===i?t.m_YEnd=r:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),void t.endPointModified();const o=qe.getComponentCount(s);(i<0||i>=o)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");let a=t.m_description.getAttributeIndex(s);a<0&&(t.addAttribute(s),a=t.m_description.getAttributeIndex(s)),t.m_attributes[e*(t.m_description.getTotalComponentCount()-2)+t.m_description.getPointAttributeOffset(a)-2+i]=r}function ss(t,e){if(t===e)return;e.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.u)("");const s=e.getDescription();s!==t.m_description&&t.mergeVertexDescription(s);for(let n=1,i=s.getAttributeCount();n<i;n++){const i=s.getSemantics(n),r=qe.getComponentCount(i);for(let s=0;s<r;s++){let n=ts(e,0,i,s);es(t,0,i,s,n),n=ts(e,1,i,s),es(t,1,i,s,n)}}}function ns(t,e){const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.p)();(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.q)(e,t.m_description,s);let n=null;const i=e.getTotalComponentCount()-2,r=t.m_description?t.m_description.getTotalComponentCount()-2:0;if(i>0&&(n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(2*i,Number.NaN),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(n,e.getDefaultPointAttributes(),0,2,i),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(n,e.getDefaultPointAttributes(),i,2,i),null!==t.m_description))for(let o=1;o<e.getAttributeCount();o++){const a=s[o];if(-1!==a){const s=t.m_description.getPointAttributeOffset(a)-2,h=e.getPointAttributeOffset(o)-2,u=qe.getComponentCount(e.getSemantics(o));for(let e=0;e<u;++e)n[h]=t.m_attributes[s],n[i+h]=t.m_attributes[r+s]}}t.m_attributes=n,t.m_description=e}function is(t){return t.absNorm()*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.g)()}function rs(t,e){return Math.max(t.absNorm(),e.absNorm())*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.g)()}function os(t,e,s){const n=new De;t.queryEnvelopeW(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),n);const i=new De;return e.queryEnvelopeW(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),i),i.inflate(s),!n.isIntersectingW(i)}function as(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.L)(t,s),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.L)(e,s);n.sort(((t,e)=>t.compare(e))),i.sort(((t,e)=>t.compare(e)));for(let r=0;r<3;r++){if(n[r].compare(i[r])<0)return-1;if(0!==n[r].compare(i[r]))return 1}return 0}var hs=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class us{constructor(t){if(t.copy){if(this.m_XStart=t.copy.m_XStart,this.m_YStart=t.copy.m_YStart,this.m_XEnd=t.copy.m_XEnd,this.m_YEnd=t.copy.m_YEnd,this.m_description=t.copy.m_description,this.m_attributes=null,this.m_description){this.m_description.getTotalComponentCount()-2&&(this.m_attributes=t.copy.m_attributes.slice())}}else{if(t.move)return this.m_description=t.move.m_description,t.move.m_description=null,this.m_attributes=t.move.m_attributes,t.move.m_attributes=null,this.m_XStart=t.move.m_XStart,this.m_YStart=t.move.m_YStart,this.m_XEnd=t.move.m_XEnd,void(this.m_YEnd=t.move.m_YEnd);if(void 0!==t.XStart)return this.m_XStart=t.XStart,this.m_YStart=t.YStart,this.m_XEnd=t.XEnd,this.m_YEnd=t.YEnd,this.m_attributes=null,this.m_description=t.vd?t.vd:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)(),void(t.vd&&this.setDefaultAttributeValues());if(void 0!==t.ZStart)return this.m_XStart=t.XStart,this.m_YStart=t.YStart,this.m_XEnd=t.XEnd,this.m_YEnd=t.YEnd,this.m_description=t.vd?t.vd:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.w)(),void(t.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=t.ZStart,this.m_attributes[this.m_description.getTotalComponentCount()-2]=t.ZEnd):this.m_attributes=[t.ZStart,t.ZEnd]);if(t.start)return this.m_XStart=t.start.x,this.m_YStart=t.start.y,this.m_XEnd=t.end.x,this.m_YEnd=t.end.y,this.m_attributes=null,void(this.m_description=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)());if(t.start3D)return this.m_XStart=t.start3D.x,this.m_YStart=t.start3D.y,this.m_XEnd=t.end3D.x,this.m_YEnd=t.end3D.y,this.m_description=t.vd?t.vd:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.w)(),void(t.vd?(this.setDefaultAttributeValues(),this.addAttribute(1),this.m_attributes[0]=t.start3D.z,this.m_attributes[this.m_description.getTotalComponentCount()-2]=t.end3D.z):this.m_attributes=[t.start3D.z,t.end3D.z]);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("bad constructor params"),this.m_XStart=this.m_YStart=this.m_XEnd=this.m_YEnd=Number.NaN}}setDefaultAttributeValues(){const t=this.m_description.getTotalComponentCount()-2;t>0&&(null===this.m_attributes&&(this.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(2*t,Number.NaN)),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(this.m_attributes,this.m_description.getDefaultPointAttributes(),0,2,t),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(this.m_attributes,this.m_description.getDefaultPointAttributes(),t,2,t))}absNormXYZ(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("not implemented"),0}queryWeights(t){}snapControlPoints3D(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("not implemented"),!1}setCoordsForIntersector3D(t,e,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("not implemented")}transformAttribute(t,e,s,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}mergeVertexDescriptionImpl(t){const e=this.getDescription(),s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.l)(e,t);this.assignVertexDescription(s)}changeEndPoints(t,e){const s=t.getXY(),n=e.getXY();this.changeEndPoints2D(s,n);let i=t.getDescription();i!==this.getDescription()&&this.mergeVertexDescription(i),i=e.getDescription(),i!==this.getDescription()&&this.mergeVertexDescription(i);for(let r=1,o=i.getAttributeCount();r<o;r++){const s=i.getSemantics(r),n=hs.getComponentCount(s);for(let i=0;i<n;i++){es(this,0,s,i,t.getAttributeAsDbl(s,i));es(this,1,s,i,e.getAttributeAsDbl(s,i))}}}getStartXY(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(this.m_XStart,this.m_YStart)}setStartXY(t){this.m_XStart=t.x,this.m_YStart=t.y,this.endPointModified()}setStartXYCoords(t,e){this.m_XStart=t,this.m_YStart=e,this.endPointModified()}getStartXYZ(){return Oe(this,0)}setStartXYZ(t){Je(this,0,t)}setStartXYZCoords(t,e,s){Je(this,0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d.construct(t,e,s))}queryStart(t){Ke(this,0,t)}setStart(t){$e(this,0,t)}setStart2D(t){this.setStartXY(t)}getStartAttributeAsDbl(t,e){return ts(this,0,t,e)}getStartAttributeAsInt(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}setStartAttribute(t,e,s){es(this,0,t,e,s)}setStartAttributesFromPoint(t,e){const s=t.getDescription();for(let n=e&&s.hasZ()?2:1,i=s.getAttributeCount();n<i;++n){const e=s.getSemantics(n),i=hs.getComponentCount(e);for(let s=0;s<i;++s){const n=t.getAttributeAsDbl(e,s);this.setStartAttribute(e,s,n)}}}setEndAttributesFromPoint(t,e){const s=t.getDescription();for(let n=e&&s.hasZ()?2:1,i=s.getAttributeCount();n<i;++n){const e=s.getSemantics(n),i=hs.getComponentCount(e);for(let s=0;s<i;++s){const n=t.getAttributeAsDbl(e,s);this.setEndAttribute(e,s,n)}}}getStartX(){return this.m_XStart}getStartY(){return this.m_YStart}getStartZ(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getEndX(){return this.m_XEnd}getEndY(){return this.m_YEnd}getEndZ(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getEndXY(){return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(this.m_XEnd,this.m_YEnd)}setEndXY(t){this.m_XEnd=t.x,this.m_YEnd=t.y,this.endPointModified()}setEndXYCoords(t,e){this.m_XEnd=t,this.m_YEnd=e,this.endPointModified()}getEndXYZ(){return Oe(this,1)}setEndXYZ(t){Je(this,1,t)}setEndXYZCoords(t,e,s){Je(this,1,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d.construct(t,e,s))}queryEnd(t){Ke(this,1,t)}setEnd(t){$e(this,1,t)}setEnd2D(t){this.setEndXY(t)}getEndAttributeAsDbl(t,e){return ts(this,1,t,e)}getEndAttributeAsInt(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),Math.trunc(0)}setEndAttribute(t,e,s){es(this,1,t,e,s)}getDimension(){return 1}copyTo(t){if(this===t)return;t.getGeometryType()!==this.getGeometryType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const s=t;s.assignVertexDescription(this.m_description),s.m_attributes&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(s.m_attributes,this.m_attributes,0,0,2*(this.m_description.getTotalComponentCount()-2)),s.m_XStart=this.m_XStart,s.m_YStart=this.m_YStart,s.m_XEnd=this.m_XEnd,s.m_YEnd=this.m_YEnd,this.copyToImpl(s)}isEmpty(){return this.isEmptyImpl()}isClosed(){return this.m_XStart===this.m_XEnd&&this.m_YStart===this.m_YEnd}setEmpty(){}calculateArea2D(){return 0}queryInterval(t,e){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();return s.vmin=ts(this,0,t,e),s.vmax=s.vmin,s.mergeNeCoordinate(ts(this,1,t,e)),s}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getCoord3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),{}}getCoord2D(t){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();return this.queryCoord2D(t,e),e}queryCoord3D(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getCoordZ(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}queryCoord(t,e){e.assignVertexDescription(this.m_description),e.setXY(this.getCoord2D(t));for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const n=this.m_description.getSemantics(s),i=hs.getComponentCount(n);for(let s=0;s<i;s++){const i=this.getAttributeAsDbl(t,n,s);e.setAttributeBasic(n,s,i)}}}isCloserThanDistance(t,e,s){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();this.queryLooseEnvelopeOnInterval(e,n);if(n.distance(t)>s)return!1;const i=this.getClosestCoordinateOnInterval(t,e,s);return!Number.isNaN(i)&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,this.getCoord2D(i))<=s}isMonotoneQuickAndDirty(){return!1}isTrue3D(){return!1}getReversed(){const t=this.clone();return t.reverse(),t}reverse(){this.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=this.m_YEnd),this.reverseImpl();for(let t=1,e=this.m_description.getAttributeCount();t<e;t++){const e=this.m_description.getSemantics(t);for(let t=0,s=hs.getComponentCount(e);t<s;t++){const s=ts(this,0,e,t);es(this,0,e,t,ts(this,1,e,t)),es(this,1,e,t,s)}}return this.afterCompletedModification(),this}isEmptyImpl(){return!1}isCircular(){return!1}distance(t,e,n,i){if(!e&&this.isIntersecting(t,0,!1)){if(null!==n||null!==i){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(9,Number.NaN),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(9,Number.NaN),o=this.intersect(t,null,e,r,0);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(o<=9),0===o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),null!==n&&(n[0]=e[0]),null!==i&&(i[0]=r[0])}return 0}let r,o=Number.MAX_VALUE,a=-1,u=o;return r=this.getStartXY(),a=t.getClosestCoordinate(r,!1),r.subThis(t.getCoord2D(a)),u=r.length(),u<o&&(o=u,null!==i&&(i[0]=a),null!==n&&(n[0]=0)),r=this.getEndXY(),a=t.getClosestCoordinate(r,!1),r.subThis(t.getCoord2D(a)),u=r.length(),u<o&&(o=u,null!==i&&(i[0]=a),null!==n&&(n[0]=1)),r=t.getStartXY(),a=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(a)),u=r.length(),u<o&&(o=u,null!==n&&(n[0]=a),null!==i&&(i[0]=0)),r=t.getEndXY(),a=this.getClosestCoordinate(r,!1),r.subThis(this.getCoord2D(a)),u=r.length(),u<o&&(o=u,null!==n&&(n[0]=a),null!==i&&(i[0]=1)),o}calculateSubLengthFromStart(t){return this.tToLength(t)}calculateSubLength(t,e){return e===t?0:this.tToLength(e)-this.tToLength(t)}static recalculateParentT(t,e,s){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,e,s)}moveTo(t){const e=this.isClosed(),s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;s.setShift(t.sub(this.getStartXY())),this.applyTransformation(s),e?this.changeEndPoints2D(t,t):this.changeEndPoints2D(t,this.getEndXY())}moveTo3D(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getDescription(){return this.m_description}assignVertexDescription(t){ns(this,t)}mergeVertexDescription(t){this.m_description!==t&&(this.m_description.hasAttributesFrom(t)||this.mergeVertexDescriptionImpl(t))}hasAttribute(t){return this.m_description.hasAttribute(t)}addAttribute(t){if(this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.m_description,t);this.assignVertexDescription(e)}dropAttribute(t){if(!this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.r)(this.m_description,t);this.assignVertexDescription(e)}dropAllAttributes(){const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)();t!==this.m_description&&this.assignVertexDescription(t)}swap(t){if(this===t)return;t.getGeometryType()!==this.getGeometryType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("wrong geometry type");const s=t;s.m_description=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_description,this.m_description=s.m_description),s.m_XStart=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=s.m_XStart),s.m_YStart=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=s.m_YStart),s.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XEnd,this.m_XEnd=s.m_XEnd),s.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YEnd,this.m_YEnd=s.m_YEnd),s.m_attributes=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_attributes,this.m_attributes=s.m_attributes),this.swapImpl(s)}equals(t,e){if(this.getGeometryType()!==t.getGeometryType())return!1;const s=void 0===e;s&&(e=0);const n=t;if(this===n)return!0;if(this.m_description!==n.m_description)return!1;if(Math.abs(this.m_XStart-n.m_XStart)>e||Math.abs(this.m_XEnd-n.m_XEnd)>e||Math.abs(this.m_YStart-n.m_YStart)>e||Math.abs(this.m_YEnd-n.m_YEnd)>e)return!1;for(let i=0,r=2*(this.m_description.getTotalComponentCount()-2);i<r;i++)if(!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.G)(this.m_attributes[i],n.m_attributes[i],e))return!1;return s?this.equalsImpl(n):this.equalsImplTol(n,e)}getImpl(){return this}setAttributeBasic(t,s,n){if(this.addAttribute(t),0===t&&this.isCurve()){(s<0||s>1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T,i=0===s?n:0,r=1===s?n:0;t.setShiftCoords(i,r),0===s?t.xx=0:t.yy=0,this.applyTransformation(t)}else this.setStartAttribute(t,s,n),this.setEndAttribute(t,s,n)}replaceNaNs(t,e){if(this.addAttribute(t),this.isEmpty())return;const s=hs.getComponentCount(t);for(let n=0;n<s;n++){const s=this.getStartAttributeAsDbl(t,n);Number.isNaN(s)&&this.setStartAttribute(t,n,e);const i=this.getEndAttributeAsDbl(t,n);Number.isNaN(i)&&this.setEndAttribute(t,n,e)}}}us.s_maxMonotonicPartParams=8;class ms extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_5__.G{constructor(t,e){super(),this.m_index=-1,this.gc=t,this.dim=e}next(){for(;;){if(this.m_index>=this.gc.getGeometryCount())return null;if(this.m_index++,this.m_index===this.gc.getGeometryCount())return null;const t=this.gc.getGeometry(this.m_index);if(-1===this.dim||1<<t.getDimension()&this.dim)return t}return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}class ls{constructor(t){this.m_geoms=[],this.m_description=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)(),t&&(t.vd?this.m_description=t.vd:t.copy?t.copy.copyTo(this):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("constructor argument not recognized"))}getGeometryCount(){return this.m_geoms.length}reserve(t){}addGeometry(t){if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection){const e=t;for(let t=0,s=e.getGeometryCount();t<s;t++)this.addGeometry(e.getGeometry(t))}else this.m_geoms.push(t.clone()),this.mergeVertexDescription(t.getDescription())}addCursor(t){for(let e=t.next();null!==e;e=t.next())this.addGeometry(e)}getGeometry(t){return(t<0||t>=this.m_geoms.length)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Geometry_collection.get_geometry"),this.m_geoms[t]}modifiedElementIndex(t){this.mergeVertexDescription(this.getGeometry(t).getDescription())}modifiedElement(t){this.mergeVertexDescription(t.getDescription())}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection}getDimension(){let t=0;for(const e of this.m_geoms)t=Math.max(t,e.getDimension());return t}getDescription(){return this.m_description}assignVertexDescription(t){this.m_description!==t&&this.assignVertexDescriptionImpl(t)}assignVertexDescriptionImpl(t){for(const e of this.m_geoms)e.assignVertexDescription(t);this.m_description=t}mergeVertexDescription(t){this.m_description!==t&&(this.m_description.hasAttributesFrom(t)||this.mergeVertexDescriptionImpl(t))}hasAttribute(t){return this.m_description.hasAttribute(t)}addAttribute(t){if(this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.m_description,t);this.assignVertexDescription(e)}dropAttribute(t){if(!this.m_description.hasAttribute(t))return;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.r)(this.m_description,t);this.assignVertexDescription(e)}dropAllAttributes(){const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)();t!==this.m_description&&this.assignVertexDescription(t)}queryInterval(t,e){let s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;n.setEmpty();for(const i of this.m_geoms)s=i.queryInterval(t,e),n.merge(s);return n}queryEnvelope(t){if(4===t.m_EnvelopeType){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.E;t.setEmpty(),t.assignVertexDescription(this.m_description);for(const s of this.m_geoms)s.queryEnvelope(e),t.merge(e)}else if(2===t.m_EnvelopeType){const e=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;t.setEmpty();for(const s of this.m_geoms)s.queryEnvelope(e),t.mergeEnvelope2D(e)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d envelope case not implemented")}queryLooseEnvelope(t){if(2===t.m_EnvelopeType){const e=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;t.setEmpty();for(const s of this.m_geoms)s.queryLooseEnvelope(e),t.mergeEnvelope2D(e)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d not impl")}isEmpty(){return 0===this.m_geoms.length}setEmpty(){this.m_geoms.length=0}applyTransformation(t){if(1===t.m_TransformationType)for(const e of this.m_geoms)e.applyTransformation(t);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d xform not impl")}transformAttribute(t,e,s,n,i){for(const r of this.m_geoms)r.transformAttribute(t,e,s,n,i)}createInstance(){return new ls({vd:this.getDescription()})}copyTo(t){t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const s=t;if(s!==this){s.m_geoms.length=0,s.assignVertexDescription(this.m_description);for(const t of this.m_geoms)s.m_geoms.push(t.clone())}}calculateArea2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(const e of this.m_geoms)t.pe(e.calculateArea2D());return t.getResult()}calculateLength2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(const e of this.m_geoms)t.pe(e.calculateLength2D());return t.getResult()}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getBoundary(){const t=this.createInstance(),e=t;for(const s of this.m_geoms){const t=s.getBoundary();t&&e.m_geoms.push(t)}return t}clone(){return new ls({copy:this})}equals(t,e){if(t===this)return!0;if(t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection)return!1;const s=t;if(this.m_description!==s.m_description)return!1;if(this.m_geoms.length!==s.m_geoms.length)return!1;for(let n=0;n<this.m_geoms.length;++n)if(!this.m_geoms[n].equals(s.m_geoms[n],e))return!1;return!0}swap(t){t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const s=t;s!==this&&(this.m_geoms=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s.m_geoms,s.m_geoms=this.m_geoms))}setAttributeBasic(t,e,s){for(const n of this.m_geoms)n.setAttributeBasic(t,e,s)}replaceNaNs(t,e){for(const s of this.m_geoms)s.replaceNaNs(t,e)}getImpl(){return this}mergeVertexDescriptionImpl(t){const e=this.getDescription(),s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.l)(e,t);this.assignVertexDescription(s)}}function cs(t,e=-1){return new ms(t,e)}ls.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection;class gs extends us{constructor(t){super(t)}}class ds extends gs{isTrue3D(){return!0}constructor(t){super(t)}}function _s(t,e,s){ps(e,t.getStartXY(),t.getEndXY(),s)}function ps(t,e,s,n){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e,s,t,n)}function fs(t,e){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t.m_XStart,t.m_XEnd,e)}function Ps(t,e){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t.m_YStart,t.m_YEnd,e)}function ys(t,e){const s=t.getStartZ(),n=t.getEndZ();return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,n,e)}function xs(t,e,s){const n=Ye.constructPoint2D(t.getStartXY()),i=Ye.constructPoint2D(t.getEndXY());s.setCoordsE(i.x.subE(n.x),i.y.subE(n.y))}function Cs(t,e,s){e.value()<=.5?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,Ye.constructPoint2D(t.getStartXY()),Ye.constructPoint2D(t.getEndXY()),e,s):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,Ye.constructPoint2D(t.getStartXY()),Ye.constructPoint2D(t.getEndXY()),e,s)}function vs(t,e,s){t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=s.x,t.m_YEnd=s.y,t.afterCompletedModification()}function bs(t,e){const s=t.getStartXYZ();s.z*=e;const n=t.getEndXYZ();return n.z*=e,s.norm(1)+n.norm(1)}function Ss(t){if(t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart){t.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_XStart,t.m_XStart=t.m_XEnd),t.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_YStart,t.m_YStart=t.m_YEnd);for(let e=0,s=t.m_description.getTotalComponentCount()-2;e<s;e++)t.m_attributes[e+s]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_attributes[e],t.m_attributes[e]=t.m_attributes[e+s])}}function Es(t,e,s,n){let i=0;if((t.m_XStart===e.m_XStart&&t.m_YStart===e.m_YStart||t.m_XStart===e.m_XEnd&&t.m_YStart===e.m_YEnd)&&(i++,!n))return 1;if(t.m_XEnd===e.m_XStart&&t.m_YEnd===e.m_YStart||t.m_XEnd===e.m_XEnd&&t.m_YEnd===e.m_YEnd){if(i++,2===i)return 2;if(!n)return 1}return e.isIntersectingPoint(t.getStartXY(),s,!0)||e.isIntersectingPoint(t.getEndXY(),s,!0)||t.isIntersectingPoint(e.getStartXY(),s,!0)||t.isIntersectingPoint(e.getEndXY(),s,!0)?4:n&&i?0:As(t,e)?4:0}function Ds(t,e,s,n,i,r,o,a){null!==n&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.w)(n,2,Number.NaN),null!==i&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.w)(i,2,Number.NaN),null!==s&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ac)(s,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2);const h=ws(t,e,2,s,n,i,r,o,a);return n&&(n.length=h),i&&(i.length=h),s&&(s.length=h),h}function ws(t,e,s,n,i,r,o,a,h){const u=Is(t,e.getStartXY(),o,!1),m=Is(t,e.getEndXY(),o,!1),l=Is(e,t.getStartXY(),o,!1),c=Is(e,t.getEndXY(),o,!1);let g=0,d=0;if(!Number.isNaN(u)){let s=!1;a&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(u,0,1)&&t.getCoord2D(u).isEqualPoint2D(e.getStartXY())&&(g++,s=!0),s||(i&&(i[d]=u),r&&(r[d]=0),n&&n[d].setCoords(e.m_XStart,e.m_YStart),d++)}if(!Number.isNaN(m)){let o=!1;a&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(m,0,1)&&t.getCoord2D(m).isEqualPoint2D(e.getEndXY())&&(g++,o=!0),o||(s>d&&(i&&(i[d]=m),r&&(r[d]=1),n&&n[d].setCoords(e.m_XEnd,e.m_YEnd)),d++)}if(2!==d&&!Number.isNaN(l)&&!(0===u&&0===l||0===m&&1===l)){let o=!1;a&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(l,0,1)&&e.getCoord2D(l).isEqualPoint2D(t.getStartXY())&&(g++,o=!0),o||(s>d&&(i&&(i[d]=0),r&&(r[d]=l),n&&n[d].setCoords(t.m_XStart,t.m_YStart)),d++)}if(2!==d&&!Number.isNaN(c)&&!(1===u&&0===c||1===m&&1===c)){let o=!1;a&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(c,0,1)&&e.getCoord2D(c).isEqualPoint2D(t.getEndXY())&&(g++,o=!0),o||(s>d&&(i&&(i[d]=1),r&&(r[d]=c),n&&n[d].setCoords(e.m_XEnd,e.m_YEnd)),d++)}if(d>0)return h&&(r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(i,i=r)),2===d&&s>=2&&i&&i[0]>i[1]&&(i[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(i[0],i[0]=i[1]),r&&(r[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(r[0],r[0]=r[1])),n&&(n[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[1]))),d;if(g>0)return 0;const _=qs(t,e,o);return Number.isNaN(_.x)?0:(n&&(n[0]=t.getCoord2D(_.x)),i&&(i[0]=_.x),r&&(r[0]=_.y),1)}function As(t,e){const s=Ms(t,e.m_XStart,e.m_YStart),n=Ms(t,e.m_XEnd,e.m_YEnd);if(s<0&&n<0||s>0&&n>0)return!1;const i=Ms(e,t.m_XStart,t.m_YStart),r=Ms(e,t.m_XEnd,t.m_YEnd);if(i<0&&r<0||i>0&&r>0)return!1;return Xs(t)>Xs(e)?Ns(t,e):Ns(e,t)}function Ts(t,e){const s={bIntersect:!1,t1:Number.NaN,t2:Number.NaN},n=t.m_XEnd-t.m_XStart,i=t.m_YEnd-t.m_YStart,r=e.m_XEnd-e.m_XStart,o=e.m_YEnd-e.m_YStart,a=r*i-n*o;if(0===a)return s;const h=e.m_XStart-t.m_XStart,u=e.m_YStart-t.m_YStart,m=r*u-h*o,l=n*u-h*i,c=1/a;return s.t1=m*c,s.t2=l*c,s.bIntersect=!0,s}function Is(t,e,s,n){const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();let o=!1;t.m_YEnd<t.m_YStart||t.m_YEnd===t.m_YStart&&t.m_XEnd<t.m_XStart?(i.setCoords(t.m_XEnd,t.m_YEnd),r.setCoords(t.m_XStart,t.m_YStart),o=!0):(i.setCoords(t.m_XStart,t.m_YStart),r.setCoords(t.m_XEnd,t.m_YEnd));const a=o?1:0,h=o?0:1,u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();u.setSub(e,i);let m=u.length(),l=3*m*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)();if(m<=Math.max(s,l))return n&&0===m?Number.NaN:a;if(u.setSub(e,r),m=u.length(),l=3*m*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)(),m<=Math.max(s,l))return n&&0===m?Number.NaN:h;u.setCoords(r.x-i.x,r.y-i.y);const c=u.length();if(c>0){const t=1/c;u.scale(t);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();n.setSub(e,i);const m=n.dotProduct(u),l=8*n.dotProductAbs(u)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)();u.leftPerpendicularThis();const g=n.dotProduct(u),d=8*n.dotProductAbs(u)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)(),_=Math.max(s,l);if(m<-_||m>c+_)return Number.NaN;const p=Math.max(s,d);if(Math.abs(g)<=p){let n=m*t;n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(n,0,1);const u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(ps(n,i,r,u),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e)<=s){if(n<.5){if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,i)<=s&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,i)<=s)return a}else if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,r)<=s&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,r)<=s)return h;return o?1-n:n}}}return Number.NaN}function Ms(t,e,s){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();n.setCoords(e,s),n.subThis(t.getStartXY());const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();i.setSub(t.getEndXY(),t.getStartXY());const r=i.crossProduct(n),o=4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*(Math.abs(i.x*n.y)+Math.abs(i.y*n.x));return r>o?-1:r<-o?1:0}function Ys(t,e,s,n){const i=n?t.m_XStart:t.m_XEnd,r=n?t.m_YStart:t.m_YEnd,o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();o.x=e.getEndX()-i,o.y=e.getEndY()-r;if(s.dotProduct(o)>3*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*s.dotProductAbs(o)){o.x=e.getStartX()-i,o.y=e.getStartY()-r;return s.dotProduct(o)<=3*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*s.dotProductAbs(o)}return!0}function Ns(t,e){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();return s.x=t.m_XEnd-t.m_XStart,s.y=t.m_YEnd-t.m_YStart,!!Ys(t,e,s,!1)&&(s.negateThis(),!!Ys(t,e,s,!0))}function Xs(t){const e=t.m_XStart-t.m_XEnd,s=t.m_YStart-t.m_YEnd;return e*e+s*s}function qs(t,e,s){const n=t.m_XEnd-t.m_XStart,i=t.m_YEnd-t.m_YStart,r=e.m_XEnd-e.m_XStart,o=e.m_YEnd-e.m_YStart,a=r*i-n*o;if(0===a)return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();const h=4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*(Math.abs(r*i)+Math.abs(n*o)),u=e.m_XStart-t.m_XStart,m=e.m_YStart-t.m_YStart,l=r*m-u*o,c=4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*(Math.abs(r*m)+Math.abs(u*o)),g=l/a,d=Math.abs(a),_=(c*d+h*Math.abs(l))/(a*a)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*Math.abs(g);if(g<-_||g>1+_)return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();const p=n*m-u*i,f=p/a,P=(4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*(Math.abs(n*m)+Math.abs(u*i))*d+h*Math.abs(p))/(a*a)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*Math.abs(f);if(f<-P||f>1+P)return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();let y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(g,0,1),x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(f,0,1);const C=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();_s(t,y,C);const v=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(_s(e,x,v),!s||_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(C,v)>s){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(C,v,.5,n),y=t.getClosestCoordinate(n,!1),x=e.getClosestCoordinate(n,!1);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();_s(t,y,i);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();_s(e,x,r),i.subThis(r);const o=i.length(),a=(t.absNorm()+e.absNorm())*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.g)();if(o>Math.max(s,a))return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()}return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(y,x)}class Fs{constructor(t){if(this.m_segFlagStream=null,this.m_xyStream=null,this.m_bCirculator=!1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_parent=t.parent,this.m_buffer=new this.m_parent.m_segmentBufferCTor,this.m_description=t.parent.getDescription(),this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),void 0!==t.pointIndex){(t.pointIndex<0||t.pointIndex>=t.parent.getPointCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const e=t.parent.getPathIndexFromPointIndex(t.pointIndex);this.m_currentPathIndex=e,this.m_nextPathIndex=e+1,this.m_nextSegmentIndex=t.pointIndex-t.parent.getPathStart(e),this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex)}else if(void 0!==t.pathIndex){(t.pathIndex<0||t.pathIndex>=t.parent.getPathCount()||t.segmentIndex<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const e=t.parent.isClosedPath(t.pathIndex)?0:1;t.segmentIndex>=t.parent.getPathSize(t.pathIndex)-e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.m_nextSegmentIndex=t.segmentIndex,this.m_currentPathIndex=t.pathIndex,this.m_nextPathIndex=this.m_nextSegmentIndex+1,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex)}this.prepare(),this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1,this.m_bStripAttributes=!1,this.m_prevPathIndex=-1,this.m_prevSegmentIndex=-1,this.m_bNeedsUpdate=!1,this.m_currentPathIndex>-1&&(this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex))}stripAttributes(){this.m_bStripAttributes=!0}prepare(){this.m_bCirculator=!1,this.m_parent.isEmptyImpl()?(this.m_segFlagStream=null,this.m_xyStream=null):(this.m_segFlagStream=this.m_parent.getSegmentFlagsStreamRef(),this.m_xyStream=this.m_parent.getAttributeStreamRef(0))}nextPath(){return this.m_currentPathIndex=this.m_nextPathIndex,!(this.m_currentPathIndex>=this.m_parent.getPathCount())&&(this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_currentPathIndex),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.m_nextPathIndex++,!0)}previousPath(){return 0!==this.m_nextPathIndex&&(this.m_nextPathIndex--,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0,this.m_segmentCount=this.getSegmentCount(this.m_nextPathIndex),this.m_currentPathIndex=this.m_nextPathIndex,this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex),this.resetToLastSegment(),!0)}getSegmentCount(t){return this.m_parent.isEmptyImpl()?0:this.m_parent.getSegmentCountPath(t)}resetToFirstPath(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_nextPathIndex=0,this.m_currentPathIndex=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}resetToLastPath(){this.m_nextPathIndex=this.m_parent.getPathCount(),this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1}resetToPath(t){(t<0||t>this.m_parent.getPathCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.m_nextPathIndex=t,this.m_currentPathIndex=-1,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=-1,this.m_segmentCount=-1,this.m_pathBegin=-1,this.m_bCurrentPathClosed=!1}isLastPath(){return this.m_currentPathIndex===this.m_parent.getPathCount()-1}isFirstSegmentInPath(){return 0===this.m_currentSegmentIndex}isLastSegmentInPath(){return this.m_currentSegmentIndex===this.m_segmentCount-1}resetToFirstSegment(){this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=0}resetToLastSegment(){this.m_nextSegmentIndex=this.m_segmentCount,this.m_currentSegmentIndex=-1}resetTo(t){this.m_parent!==t.m_parent&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.p)(""),this.m_currentSegmentIndex=t.m_currentSegmentIndex,this.m_nextSegmentIndex=t.m_nextSegmentIndex,this.m_currentPathIndex=t.m_currentPathIndex,this.m_nextPathIndex=t.m_nextPathIndex,this.m_segmentCount=t.m_segmentCount,this.m_bCirculator=t.m_bCirculator,this.m_pathBegin=t.m_pathBegin,this.m_bCurrentPathClosed=t.m_bCurrentPathClosed,this.m_bStripAttributes=t.m_bStripAttributes,this.m_description=t.m_description}resetToVertex(t,e){if(this.m_currentPathIndex>=0&&this.m_currentPathIndex<this.m_parent.getPathCount()){const e=this.getPathBegin();if(t>=e&&t<this.m_parent.getPathEnd(this.m_currentPathIndex))return this.m_currentSegmentIndex=-1,void(this.m_nextSegmentIndex=t-e)}let s;s=e>=0&&e<this.m_parent.getPathCount()&&t>=this.m_parent.getPathStart(e)&&t<this.m_parent.getPathEnd(e)?e:this.m_parent.getPathIndexFromPointIndex(t),this.m_nextPathIndex=s+1,this.m_currentPathIndex=s,this.m_currentSegmentIndex=-1,this.m_nextSegmentIndex=t-this.m_parent.getPathStart(s),this.m_segmentCount=this.getSegmentCount(s),this.m_pathBegin=this.m_parent.getPathStart(this.m_currentPathIndex),this.m_bCurrentPathClosed=this.m_parent.isClosedPath(this.m_currentPathIndex)}hasNextSegment(){return this.m_nextSegmentIndex<this.m_segmentCount}hasPreviousSegment(){return this.m_nextSegmentIndex>0}nextSegment(){return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("Segment_iterator_impl::next_segment"),this.m_nextSegmentIndex++),this.m_buffer.get()}previousSegment(){return this.m_bCirculator?this.m_nextSegmentIndex=(this.m_segmentCount+this.m_nextSegmentIndex-1)%this.m_segmentCount:(0===this.m_nextSegmentIndex&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.m_nextSegmentIndex--),this.m_nextSegmentIndex!==this.m_currentSegmentIndex&&this.updateSegment(),this.m_buffer.get()}nextCurve(){if(!this.m_parent.hasNonLinearSegments())return this.resetToLastSegment(),null;let t=0;for(;;){if(this.m_nextSegmentIndex===this.m_segmentCount||t===this.m_segmentCount)return null;const e=this.getPathBegin()+this.m_nextSegmentIndex;if(1!==(31&this.m_segFlagStream.read(e))){this.updateSegment();break}this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:this.m_nextSegmentIndex++,t++}return this.m_currentSegmentIndex!==this.m_nextSegmentIndex&&this.updateSegment(),this.m_bCirculator?this.m_nextSegmentIndex=(this.m_nextSegmentIndex+1)%this.m_segmentCount:(this.m_nextSegmentIndex===this.m_segmentCount&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.m_nextSegmentIndex++),this.m_buffer.get()}getPathBegin(){return this.m_pathBegin}getPathIndex(){return this.m_currentPathIndex}getStartPointIndex(){return this.getPathBegin()+this.m_currentSegmentIndex}getEndPointIndex(){return this.isClosingSegment()?this.getPathBegin():this.getStartPointIndex()+1}updateSegment(){(this.m_nextSegmentIndex<0||this.m_nextSegmentIndex>=this.m_segmentCount||this.m_currentPathIndex<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),this.m_currentSegmentIndex=this.m_nextSegmentIndex,this.m_parent.getSegmentFromPath(this.m_currentPathIndex,this.m_currentSegmentIndex,this.m_buffer,this.m_bStripAttributes)}isClosingSegment(){return this.m_bCurrentPathClosed&&this.m_currentSegmentIndex===this.m_segmentCount-1}isCurve(){if(null!==this.m_segFlagStream){return 1!==(31&this.m_segFlagStream.read(this.m_currentSegmentIndex))}return!1}isPathClosed(){return this.m_bCurrentPathClosed}setCirculator(t){this.m_bCirculator=t}getImpl(){return this}}class Vs{constructor(t){this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null,this.m_refCount=1,t&&t.copyTo(this)}getRasterizedGeometry(){return this.m_rasterizedGeometry}copyTo(t){t!==this&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.uniqueUse()),t.m_quadTree=this.m_quadTree,t.m_quadTreeForPaths=this.m_quadTreeForPaths,t.m_rasterizedGeometry=this.m_rasterizedGeometry)}clone(){const t=new Vs;return this.copyTo(t),t}uniqueUse(){return 1===this.m_refCount}addRef(){++this.m_refCount}release(){0===--this.m_refCount&&(this.m_rasterizedGeometry=null,this.m_quadTree=null,this.m_quadTreeForPaths=null)}setRasterizedGeometry(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.uniqueUse())}setQuadTree(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.uniqueUse()),this.m_quadTree=t}setQuadTreeForPaths(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.uniqueUse()),this.m_quadTreeForPaths=t}getQuadTree(){return this.m_quadTree}getQuadTreeForPaths(){return this.m_quadTreeForPaths}}function Ls(t){return!(t.isEmpty()||t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline&&t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon)&&!(t.getPointCount()<20)}function Rs(t){return!(t.isEmpty()||t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline&&t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon)&&!(t.getPointCount()<20)}function zs(t,e){return t.readPoint2D(e+4)}function Bs(t){const e=t.getGeometryType();return e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc?10:e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier?4:e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2?5:e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2?2:void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}function ks(t){const e=31&t;return 4===e?10:2===e?4:8===e?5:16===e?2:0}function Gs(t,e,s,n){const i=t.getPathStart(e),r=t.getPathEnd(e);if(r-i<3)return;const o=2*i,a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();s.queryPoint2D(o,a);const h=a.x,u=a.y,m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();s.queryPoint2D(o+2,m);const l=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();for(let c=o+4,g=2*r;c<g;c+=2)s.queryPoint2D(c,l),n.pe((l.x-a.x)*(m.y-u)),a.setCoordsPoint2D(m),m.setCoordsPoint2D(l);n.pe((h-a.x)*(m.y-u))}function Ws(t,e,s){for(;e.hasNextSegment();){const t=e.nextCurve();if(null===t)break;s.pe(2*t.calculateArea2DHelper())}}var js=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class Zs{static toSegType(t){let e=0;switch(t){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:e=1;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:e=2;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:e=4;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:e=8;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:e=16;break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}return e}constructor(){this.m_segmentFlags=null,this.m_segmentParamIndex=null,this.m_segmentParams=null,this.m_curveCount=0,this.m_bezierCount=0,this.m_arcCount=0,this.m_rbezier2Count=0,this.m_bezier2Count=0,this.m_curveParamWritePoint=0}assignCopy(t){return this.m_segmentFlags=t.m_segmentFlags,this.m_segmentParamIndex=t.m_segmentParamIndex,this.m_segmentParams=t.m_segmentParams,this.m_curveCount=t.m_curveCount,this.m_bezierCount=t.m_bezierCount,this.m_arcCount=t.m_arcCount,this.m_rbezier2Count=t.m_rbezier2Count,this.m_bezier2Count=t.m_bezier2Count,this.m_curveParamWritePoint=t.m_curveParamWritePoint,this}}class Hs extends Se{constructor(t){super(t),this.m_cachedRingAreas2D=null,this.m_paths=null,this.m_pathFlags=null,this.m_curveData=null,t.move?(this.m_bPolygon=t.move.m_bPolygon,this.m_cachedLength2D=t.move.m_cachedLength2D,this.m_cachedArea2D=t.move.m_cachedArea2D,this.m_currentPathIndex=t.move.m_currentPathIndex,this.m_cachedRingAreas2D=t.move.m_cachedRingAreas2D,this.m_paths=t.move.m_paths,this.m_pathFlags=t.move.m_pathFlags,this.m_curveData=t.move.m_curveData,t.move.m_curveData=null,t.move.setEmpty()):(this.m_bPolygon=t.bPolygon,this.m_cachedLength2D=0,this.m_cachedArea2D=0,this.m_currentPathIndex=0)}getGeometryType(){return this.m_bPolygon?_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon:_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline}getDimension(){return this.m_bPolygon?2:1}changeRingStartPoint(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.m_bPolygon);const n=this.getPathIndexFromPointIndex(t),i=this.getPathStart(n);if(i===t)return;const r=this.getPathEnd(n);(t>=r||t<i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("change_ring_start_point");for(let e=0,s=this.m_description.getAttributeCount();e<s;e++){const s=this.m_description.getSemantics(e),n=js.getComponentCount(s);this.m_vertexAttributes.get(e).rotate(i*n,t*n,r*n)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.rotate(i,t,r),this.m_curveData.m_segmentParamIndex.rotate(i,t,r))}setFillRule(t){this.m_bFillRule=1===t}getFillRule(){return this.m_bFillRule?1:0}isExteriorRingOGC(t){return!!this.m_bPolygon&&(this.updateOGCFlagsProtected(),!!(8&this.m_pathFlags.read(t)))}isExteriorRing(t){return this.calculateRingArea2D(t)>0}calculateRingArea2D(t){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedRingAreas2D.read(t)):0}updateRingAreas2DProtected(){if(!this.hasDirtyFlag(1024))return;const t=this.getPathCount();if(0===t)return this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=0),void this.setDirtyFlagProtected(1024,!1);const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.x(t),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);if(0!==this.m_pointCount){const i=this.getAttributeStreamRef(0);if(this.hasNonLinearSegments()){const t=new Fs({parent:this});for(t.stripAttributes();t.nextPath();){n.reset();const r=t.getPathIndex();Gs(this,r,i,n),Ws(this,t,n);const o=.5*n.getResult();s.add(o),e.write(r,o)}}else for(let r=0;r<t;r++){n.reset(),Gs(this,r,i,n);const t=.5*n.getResult();s.add(t),e.write(r,t)}}this.hasDirtyFlag(1024)&&(this.m_cachedArea2D=s.getResult(),this.m_cachedRingAreas2D=e,this.setDirtyFlagProtected(1024,!1))}getOGCPolygonCount(){if(!this.m_bPolygon)return 0;this.updateOGCFlagsProtected();let t=0;const e=this.getPathCount();for(let s=0;s<e;s++)8&this.m_pathFlags.read(s)&&t++;return t}getHashCodeImpl(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}equalsImpl(t){const e=t,s=this.getPathCount();if(s!==e.getPathCount())return!1;const n=this.hasNonLinearSegments();if(n!==e.hasNonLinearSegments())return!1;if(n){if(this.m_curveData.m_curveCount!==e.m_curveData.m_curveCount)return!1;if(this.m_curveData.m_bezierCount!==e.m_curveData.m_bezierCount)return!1}if(this.m_paths&&!this.m_paths.equals(e.m_paths,0,s+1))return!1;if(this.m_bFillRule!==e.m_bFillRule)return!1;if(!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(e.m_pathFlags,0,s))return!1;if(this.hasNonLinearSegments()){if(!this.m_curveData.m_segmentFlags.equals(e.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;for(let t=0,s=this.getPointCount();t<s;t++){const s=this.m_curveData.m_segmentFlags.read(t);if(!Hs.isNonLinearSegmentFlag(s))continue;const n=this.m_curveData.m_segmentParamIndex.read(t),i=e.m_curveData.m_segmentParamIndex.read(t),r=ks(s);for(let t=0;t<r;t++){const s=this.m_curveData.m_segmentParams.read(n+t),r=e.m_curveData.m_segmentParams.read(i+t);if(!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Q)(s,r))return!1}}}return!0}equalsImplTol(t,e){const s=t,n=this.getPathCount();if(n!==s.getPathCount())return!1;const i=this.hasNonLinearSegments();if(i!==s.hasNonLinearSegments())return!1;if(i){if(this.m_curveData.m_curveCount!==s.m_curveData.m_curveCount)return!1;if(this.m_curveData.m_bezierCount!==s.m_curveData.m_bezierCount)return!1}if(this.m_paths&&!this.m_paths.equals(s.m_paths,0,n+1))return!1;if(this.m_bFillRule!==s.m_bFillRule)return!1;if(!this.m_bPolygon&&this.m_pathFlags&&!this.m_pathFlags.equals(s.m_pathFlags,0,n))return!1;if(!i)return!0;if(!this.m_curveData.m_segmentFlags.equals(s.m_curveData.m_segmentFlags,0,this.getPointCount()))return!1;const r=this.querySegmentIterator(),o=s.querySegmentIterator();for(;r.nextPath();){if(!o.nextPath())return!1;for(;r.hasNextSegment();){const t=r.nextCurve(),s=o.nextCurve();if(!(t&&s&&t.equals(s,e))){if(!t&&!s)break;return!1}}}return!0}reserveImplImpl(t,e){this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(t,1),this.m_curveData.m_segmentParamIndex.resize(t,-1),this.checkCompactSegmentParams())}verifyStreamsAfterSizeChangeExtraImpl(){this.m_paths||(this.m_paths=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(1,0),this.m_pathFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(1,0)),this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.resize(this.m_reservedPointCount,1),this.m_curveData.m_segmentParamIndex.resize(this.m_reservedPointCount,-1),this.checkCompactSegmentParams())}copyToImpl(t,e){const s=t;s.m_bPathStarted=!1,s.m_bFillRule=this.m_bFillRule,this.m_paths?s.m_paths=e?this.m_paths:this.m_paths.clone():s.m_paths=null,this.m_pathFlags?s.m_pathFlags=e?this.m_pathFlags:this.m_pathFlags.clone():s.m_pathFlags=null,this.m_curveData&&(s.m_curveData||(s.m_curveData=new Zs),s.m_curveData.assignCopy(this.m_curveData),s.m_curveData.m_curveCount=0,s.updateCurveCounter(this.m_curveData.m_curveCount),e||(this.m_curveData.m_segmentParamIndex?s.m_curveData.m_segmentParamIndex=this.m_curveData.m_segmentParamIndex.clone():s.m_curveData.m_segmentParamIndex=null,this.m_curveData.m_segmentFlags?s.m_curveData.m_segmentFlags=this.m_curveData.m_segmentFlags.clone():s.m_curveData.m_segmentFlags=null,this.m_curveData.m_segmentParams?s.m_curveData.m_segmentParams=this.m_curveData.m_segmentParams.clone():s.m_curveData.m_segmentParams=null)),s.hasDirtyFlag(512)||(s.m_cachedLength2D=this.m_cachedLength2D),s.m_cachedRingAreas2D=null,s.hasDirtyFlag(1024)||(s.m_cachedArea2D=this.m_cachedArea2D,null!==this.m_cachedRingAreas2D&&(s.m_cachedRingAreas2D=e?this.m_cachedRingAreas2D:this.m_cachedRingAreas2D.clone()))}calculateArea2D(){return this.m_bPolygon?(this.updateRingAreas2DProtected(),this.m_cachedArea2D):0}calculateLength2D(){if(!this.hasDirtyFlag(512))return this.m_cachedLength2D;const t=this.querySegmentIterator(),e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(;t.nextPath();)for(;t.hasNextSegment();)e.add(t.nextSegment().calculateLength2D());return this.hasDirtyFlag(512)&&(this.m_cachedLength2D=e.getResult()),this.setDirtyFlagProtected(512,!1),e.getResult()}calculatePathLength2D(t){const e=this.querySegmentIteratorAtVertex(this.getPathStart(t)),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(;e.hasNextSegment();)s.add(e.nextSegment().calculateLength2D());return s.getResult()}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}calculatePathLength3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}copyTo(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(t.getGeometryType())||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this!==t&&super.copyTo(t)}swap(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setPointByVal(t,e){this.setPointByValWithCurves(t,e)}setPointByValWithCurves(t,e){if(this.hasNonLinearSegments()){const s=e.getXY();if(this.setXYCoordsWithCurves(t,s.x,s.y),1===this.m_description.getAttributeCount())return}this.setPointByValNoCurves(t,e)}setXYCoordsWithCurves(t,e,s){if(this.hasNonLinearSegments()){const n=Hs.getPathIndexFromPointIndexImpl(this.m_paths,this.getPathCount(),t,this.m_currentPathIndex);this.m_currentPathIndex=n;const i=this.getPrevSegmentTypeFromPath(n,t),r=this.getNextSegmentType(t);if(1!==i||1!==r){let o=t-1;const a=new fm;if(1!==i){if(this.isClosedPath(n)&&t===this.getPathStart(n)){o=this.getPathEnd(n)-1}this.getSegmentBuffer(o,a,!0)}const h=new fm;1!==r&&this.getSegmentBuffer(t,h,!0);const u=t+1;this.setXYCoordsNoCurves(t,e,s);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(e,s);return 1!==i&&(a.get().changeEndPoints2D(a.get().getStartXY(),m),this.replaceSegmentImpl(o,t,a.get(),!0)),void(1!==r&&(h.get().changeEndPoints2D(m,h.get().getEndXY()),this.replaceSegmentImpl(t,u,h.get(),!0)))}}this.setXYCoordsNoCurves(t,e,s)}setXYZWithCurves(t,e){this.hasNonLinearSegments()?(this.setXYCoordsWithCurves(t,e.x,e.y),this.setAttributeNoCurves(1,t,0,e.z)):this.setXYZNoCurves(t,e)}setAttributeWithCurves(t,e,s,n){if(0===t&&this.hasNonLinearSegments()){const t=this.getXY(e);0===s?t.x=n:t.y=n,this.setXYCoordsWithCurves(e,t.x,t.y)}else this.setAttributeNoCurves(t,e,s,n)}setXY(t,e){this.setXYCoordsWithCurves(t,e.x,e.y)}setXYCoords(t,e,s){this.setXYCoordsWithCurves(t,e,s)}setXYZ(t,e){this.setXYZWithCurves(t,e)}setAttribute(t,e,s,n){this.setAttributeWithCurves(t,e,s,n)}setAttributeWithCurvesFromArray(t,e,s,i){if(0===t&&this.hasNonLinearSegments()){i<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const t=this.getXY(e);t.x=s[0],t.y=s[1],this.setXYCoordsWithCurves(e,t.x,t.y)}else this.setAttributeFromArrayNoCurves(t,e,s,i)}setAttributeFromArray(t,e,s,n){this.setAttributeWithCurvesFromArray(t,e,s,n)}hasNonLinearSegments(){return 0!==this.getCurveCount()}getSegmentCount(){let t=this.getPointCount();if(!this.m_bPolygon){t-=this.getPathCount();for(let e=0,s=this.getPathCount();e<s;e++)this.isClosedPath(e)&&t++}return t}getSegmentCountPath(t){let e=this.getPathSize(t);return!this.isClosedPath(t)&&e>0&&e--,e}add(t,s){this===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl::add");for(let e=0,n=t.getPathCount();e<n;e++)this.addPath(t,e,!s)}addPath(t,e,s){this.insertPath(-1,t,e,s)}addPathPoint2D(t,e,s){this.insertPath2D(-1,t,0,e,s)}addPathMultiPoint(t,e,s,n){s<0&&(s=t.getPointCount()-e),this.insertPointsFromMultipoint(-1,0,t,e,s,n)}addSegmentsFromPath(t,s,i,r,o){if(this===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl.add_segments_from_path"),o||0!==this.getPathCount()||(o=!0),s<0&&(s=t.getPathCount()-1),(s>=t.getPathCount()||i<0||r<0||i+r>t.getSegmentCountPath(s))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("add_segments_from_path"),0===r)return;const a=t.getPathStart(s),h=t.isClosedPath(s)&&i+r===t.getSegmentCountPath(s);this.m_bPathStarted=!1,this.mergeVertexDescription(t.getDescription());let u=r;const m=a+i;let l=m+1;o&&(u++,l--),!o&&t.hasNonLinearSegments()&&1!==t.m_curveData.m_segmentFlags.read(m)&&(t.getXY(m).equals(this.getXY(this.m_pointCount-1))||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("add_segments_from_path: start point mismatch"));const c=this.m_pointCount;if(this.resizeImpl(this.m_pointCount+u),this.verifyAllStreamsAfterSizeChange(),o){if(0===u)return;this.m_paths.add(this.m_pointCount);let e=t.m_pathFlags.read(s);this.m_bPolygon&&(e|=1),this.m_pathFlags.write(this.m_pathFlags.size()-1,e),this.m_pathFlags.add(0)}else this.m_paths.write(this.m_pathFlags.size()-1,this.m_pointCount);const g=h?u-1:u;for(let e=0,n=this.m_description.getAttributeCount();e<n;e++){const s=this.m_description.getSemantics(e),n=js.getComponentCount(s),i=t.m_description.getAttributeIndex(s);if(g>0){if(i<0||!t.m_vertexAttributes.get(i)){const t=js.getDefaultValue(s);this.m_vertexAttributes.get(e).insertRange(n*c,t,g*n,n*c),h&&this.m_vertexAttributes.get(e).insertRange(n*c+g*n,t,n,n*c);continue}this.m_vertexAttributes.get(e).insertRangeFromStream(n*c,t.m_vertexAttributes.get(i),n*l,g*n,!0,n,n*c)}h&&this.m_vertexAttributes.get(e).insertRangeFromStream(n*(c+g),t.m_vertexAttributes.get(i),n*a,n,!0,n,n*(c+g))}if(this.hasNonLinearSegments()&&this.initSegmentData(0),t.hasNonLinearSegments()){let e=0;for(let s=0,n=m;s<r;s++){e+=ks(t.m_curveData.m_segmentFlags.read(n)),n++}if(e>0){this.initSegmentData(e);let s=m,n=c-(o?0:1),i=0;for(let e=0;e<r;e++){const e=t.m_curveData.m_segmentFlags.read(s);if(this.m_curveData.m_segmentFlags.write(n,e),Hs.isNonLinearSegmentFlag(e)){i++;let r=t.m_curveData.m_segmentParamIndex.read(s);const o=ks(e);this.m_curveData.m_segmentParamIndex.write(n,this.m_curveData.m_curveParamWritePoint);for(let e=0;e<o;e++){const e=t.m_curveData.m_segmentParams.read(r);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,e),this.m_curveData.m_curveParamWritePoint++,r++}this.incCurveType(e,1)}else this.m_curveData.m_segmentParamIndex.write(n,-1);n++,s++}this.modifyCurveCounter(i)}}if(h){const t=this.getPathCount()-1,e=this.getPathStart(t),s=this.getPathEnd(t)-1,n=this.getXY(e),i=this.getXY(s);n.isEqualPoint2D(i)&&(--this.m_pointCount,this.m_paths.write(t+1,this.m_pointCount))}this.notifyModifiedFlags(2001)}reverseAllPaths(){for(let t=0,e=this.getPathCount();t<e;t++)this.reversePath(t)}reversePath(t){t>=this.getPathCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const s=this.getPathSize(t);if(0===s)return;const n=this.getPathStart(t),i=this.isClosedPath(t);if(this.hasNonLinearSegments()){let t=n;const e=new this.m_segmentBufferCTor;let r=!1;for(let n=0;n<s;n++,t++){const s=this.m_curveData.m_segmentFlags.read(t);if(!Hs.isNonLinearSegmentFlag(s))continue;r=!0,this.querySegment(t,e,!0),e.get().reverse();const n=this.m_curveData.m_segmentParamIndex.read(t);e.get().writeInBufferStream(this.m_curveData.m_segmentParams,n)}if(r){const t=i?0:1;this.m_curveData.m_segmentFlags.reverseRange(n,s-t,1),this.m_curveData.m_segmentParamIndex.reverseRange(n,s-t,1)}}const r=i?1:0;for(let e=0,a=this.m_description.getAttributeCount();e<a;e++)if(this.m_vertexAttributes.get(e)){const t=this.m_description.getSemantics(e),i=js.getComponentCount(t);this.m_vertexAttributes.get(e).reverseRange(i*(n+r),i*(s-r),i)}const o=6&this.m_pathFlags.read(t);if(o){let e=0;4&o&&(e|=2),2&o&&(e|=4),this.m_pathFlags.clearBits(t,6),this.m_pathFlags.setBits(t,e)}this.notifyModifiedFlags(1233)}removePath(t){const s=this.getPathCount();t<0&&(t=s-1),t>=s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const n=this.getPathStart(t),i=this.getPathSize(t);for(let e=0,r=this.m_description.getAttributeCount();e<r;e++)if(this.m_vertexAttributes.get(e)){const t=this.m_description.getSemantics(e),s=js.getComponentCount(t);this.m_vertexAttributes.get(e).eraseRange(s*n,s*i,s*this.m_pointCount)}if(this.hasNonLinearSegments()){let t=0;for(let e=n,s=n+i;e<s;e++){const s=this.m_curveData.m_segmentFlags.read(e);Hs.isNonLinearSegmentFlag(s)&&(this.incCurveType(s,-1),t++)}this.modifyCurveCounter(-t),this.m_curveData.m_segmentFlags.eraseRange(n,i,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(n,i,this.m_pointCount)}for(let e=t+1;e<=s;e++){const t=this.m_paths.read(e);this.m_paths.write(e-1,t-i)}if(this.m_pathFlags)for(let e=t+1;e<=s;e++){const t=this.m_pathFlags.read(e);this.m_pathFlags.write(e-1,t)}this.m_paths.resize(s),this.m_pathFlags.resize(s),this.m_pointCount-=i,this.m_reservedPointCount-=i,t===s-1&&(this.m_bPathStarted=!1),this.notifyModifiedFlags(2001),this.checkCompactSegmentParams(),this.dbgVerifyCurves()}dbgVerifyCurves(){}insertPath(t,s,n,i){this===s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl::insert_path");const r=this.getPathCount();if(!i&&s.hasNonLinearSegmentsPath(n))return t=this.insertPath(t,s,n,!0),this.reversePath(t),t;n>=s.getPathCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),t>r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),t<0&&(t=r),n<0&&(n=s.getPathCount()-1),this.m_bPathStarted=!1,this.mergeVertexDescription(s.getDescription());const o=s.getPathStart(n),a=s.getPathSize(n);if(0===a)return this.insertPath2D(t,null,0,0,!0);const h=this.m_pointCount,u=s.isClosedPath(n)&&!i?1:0;this.resizeImpl(this.m_pointCount+a),this.verifyAllStreamsAfterSizeChange();const m=t<r?this.getPathStart(t):h;for(let e=0,g=this.m_description.getAttributeCount();e<g;e++){const t=this.m_description.getSemantics(e),n=s.getDescription().getAttributeIndex(t),r=js.getComponentCount(t);if(n>=0&&s.m_vertexAttributes.get(n))0!==u&&this.m_vertexAttributes.get(e).insertRangeFromStream(m*r,s.m_vertexAttributes.get(n),r*o,r,!0,r,r*h),this.m_vertexAttributes.get(e).insertRangeFromStream((m+u)*r,s.m_vertexAttributes.get(n),r*(o+u),r*(a-u),i,r,r*(h+u));else{const s=js.getDefaultValue(t);this.m_vertexAttributes.get(e).insertRange(m*r,s,r*a,r*h)}}const l=h+a;this.m_paths.add(l);for(let e=r;e>=t+1;e--){const t=this.m_paths.read(e-1);this.m_paths.write(e,t+a)}this.m_pathFlags.add(0);for(let e=r-1;e>=t+1;e--){let t=this.m_pathFlags.read(e);t&=-9,this.m_pathFlags.write(e+1,t)}let c=s.getPathFlagsStreamRef().read(n);if(c&=-9,this.m_bPolygon&&(c|=1),this.m_pathFlags.write(t,c),s.hasNonLinearSegments()){this.initSegmentData(0);let t=o,e=0;for(let n=0;n<a;n++){e+=ks(s.m_curveData.m_segmentFlags.read(t)),t++}if(e>0){null===this.m_curveData.m_segmentFlags?(this.m_curveData.m_segmentFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(this.m_pointCount,1),this.m_curveData.m_segmentParamIndex=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(this.m_pointCount,-1)):(this.m_curveData.m_segmentFlags.insertRange(m,1,a,h),this.m_curveData.m_segmentParamIndex.insertRange(m,-1,a,h)),this.m_curveData.m_segmentParams?this.m_curveData.m_segmentParams.resize(this.m_curveData.m_curveParamWritePoint+e):this.m_curveData.m_segmentParams=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(e),t=o;let n=m,i=0;for(let e=0;e<a;e++){const e=s.m_curveData.m_segmentFlags.read(t);if(Hs.isNonLinearSegmentFlag(e)){this.m_curveData.m_segmentFlags.write(n,e),this.m_curveData.m_segmentParamIndex.write(n,this.m_curveData.m_curveParamWritePoint);const r=ks(e);let o=s.m_curveData.m_segmentParamIndex.read(t);for(let t=0;t<r;t++){const t=s.m_curveData.m_segmentParams.read(o);this.m_curveData.m_segmentParams.write(this.m_curveData.m_curveParamWritePoint,t),this.m_curveData.m_curveParamWritePoint++,o++}i++,this.incCurveType(e,1)}t++,n++}this.modifyCurveCounter(i)}}return this.notifyModifiedFlags(2001),t}insertPath2D(t,s,n,i,r){const o=this.getPathCount();(t>o||n<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),t<0&&(t=o),this.m_bPathStarted=!1;const a=this.m_pointCount;this.resizeImpl(this.m_pointCount+i),0===i&&this.notifyModifiedFlags(32),this.verifyAllStreamsAfterSizeChange();const h=t<o?this.getPathStart(t):a;if(s)this.m_vertexAttributes.get(0).insertRangeFromPoints(2*h,s,n,i,r,2*a);else{const t=js.getDefaultValue(0);this.m_vertexAttributes.get(0).insertRange(2*h,t,2*i,2*a)}for(let e=1,u=this.m_description.getAttributeCount();e<u;e++){const t=this.m_description.getSemantics(e),s=js.getComponentCount(t),n=js.getDefaultValue(t);this.m_vertexAttributes.get(e).insertRange(h*s,n,s*i,s*a)}this.m_paths.add(this.m_pointCount);for(let e=o;e>=t+1;e--){const t=this.m_paths.read(e-1);this.m_paths.write(e,t+i)}this.m_pathFlags.add(0);for(let e=o-1;e>=t+1;e--){let t=this.m_pathFlags.read(e);t&=-9,this.m_pathFlags.write(e+1,t)}return this.m_bPolygon&&this.m_pathFlags.write(t,1),this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(h,1,i,a),this.m_curveData.m_segmentParamIndex.insertRange(h,-1,i,a)),this.notifyModifiedFlags(2001),t}insertPathFromMultipoint(t,s,n,i,r){const o=s.getImpl(),a=this.getPathCount();(t>a||n<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const h=i<0?o.getPointCount()-n:i;if(h>o.getPointCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),n>=o.getPointCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("pointsOffset"),t<0&&(t=a),this.m_bPathStarted=!1,this.mergeVertexDescription(o.getDescription()),0===h)return void this.insertPath2D(t,null,0,0,!0);const u=this.m_pointCount,m=n;this.resizeImpl(this.m_pointCount+h),this.verifyAllStreamsAfterSizeChange();const l=t<a?this.getPathStart(t):u;for(let e=0,d=this.m_description.getAttributeCount();e<d;e++){const t=this.m_description.getSemantics(e),s=o.getDescription().getAttributeIndex(t),n=js.getComponentCount(t);if(s>=0){const s=o.getAttributeStreamRef(t);this.m_vertexAttributes.get(e).insertRangeFromStream(l*n,s,n*m,n*h,r,n,n*u)}else{const s=js.getDefaultValue(t);this.m_vertexAttributes.get(e).insertRange(l*n,s,n*h,n*u)}}const c=u+h;this.m_paths.add(c);for(let e=a;e>=t+1;e--){const t=this.m_paths.read(e-1);this.m_paths.write(e,t+h)}this.m_pathFlags.add(0);for(let e=a-1;e>=t+1;e--){let t=this.m_pathFlags.read(e);t&=-9,this.m_pathFlags.write(e+1,t)}let g=0;this.m_bPolygon&&(g|=1),this.m_pathFlags.write(t,g),this.notifyModifiedFlags(2001)}insertPoints(t,s,i,r,o,a,h){if(this===i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl.insert_points"),t<0&&(t=this.getPathCount()),r<0&&(r=i.getPathCount()-1),(t>this.getPathCount()||s>=0&&s>this.getPathSize(t)||r>=i.getPathCount()||a>i.getPathSize(r))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),!a)return;if(this.mergeVertexDescription(i.m_description),t===this.getPathCount()){this.m_paths.add(this.m_pointCount);let t=i.m_pathFlags.read(r);t&=-9,this.m_bPolygon?this.m_pathFlags.add(1|t):this.m_pathFlags.add(t)}s<0&&(s=this.getPathSize(t));const u=this.m_pointCount;this.resizeImpl(this.m_pointCount+a),this.verifyAllStreamsAfterSizeChange();const m=this.getPathStart(t),l=m+s;a<0&&(a=i.getPathSize(r));const c=i.getPathStart(r),g=c+a;for(let e=0,n=this.m_description.getAttributeCount();e<n;e++){const t=this.m_description.getSemantics(e),n=js.getComponentCount(t),r=i.m_description.getAttributeIndex(t);if(r<0||!i.m_vertexAttributes.get(r)){const s=js.getDefaultValue(t);this.m_vertexAttributes.get(e).insertRange(n*l,s,g*n,n*u)}else this.m_vertexAttributes.get(e)?.insertRangeFromStream(n*(m+s),i.m_vertexAttributes.get(r),n*(c+o),a*n,h,n,n*u)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(m+s,1,a,u),this.m_curveData.m_segmentParamIndex.insertRange(m+s,-1,a,u),s>0&&this.isNonLinearSegment(m+s-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(m+s-1),-1),this.m_curveData.m_segmentFlags.write(m+s-1,1),this.m_curveData.m_segmentParamIndex.write(m+s-1,-1),this.modifyCurveCounter(-1)));for(let e=t+1,n=this.getPathCount();e<=n;e++){const t=this.m_paths.read(e);this.m_paths.write(e,t+a)}this.notifyModifiedFlags(2001)}insertPointsFromPoints(t,e,s,i,r,o){if(t<0&&(t=this.getPathCount()),(t>this.getPathCount()||e>this.getPathSize(t)||i<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),!r)return;t===this.getPathCount()&&(this.m_paths.add(this.m_pointCount),this.m_bPolygon?this.m_pathFlags.add(1):this.m_pathFlags.add(0)),e<0&&(e=this.getPathSize(t));const a=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const h=this.getPathStart(t);this.m_vertexAttributes.get(0).insertRangeFromPoints(2*(h+e),s,i,r,o,2*a);for(let n=1,u=this.m_description.getAttributeCount();n<u;n++){const t=this.m_description.getSemantics(n),s=js.getComponentCount(t),i=js.getDefaultValue(t);this.m_vertexAttributes.get(n).insertRange((h+e)*s,i,s*r,s*a)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(h+e,1,r,a),this.m_curveData.m_segmentParamIndex.insertRange(h+e,-1,r,a),e>0&&this.isNonLinearSegment(h+e-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(h+e-1),-1),this.m_curveData.m_segmentFlags.write(h+e-1,1),this.m_curveData.m_segmentParamIndex.write(h+e-1,-1),this.modifyCurveCounter(-1)));for(let n=t+1,u=this.getPathCount();n<=u;n++)this.m_paths.write(n,this.m_paths.read(n)+r);this.notifyModifiedFlags(2001)}insertPointsFromMultipoint(t,e,s,i,r,o){const a=s.getImpl(),h=this.getPathCount();t<0&&(t=this.getPathCount());const u=a.getPointCount();if((i<0||i>u)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),(r<0||i+r>u)&&(r=u-i),e<0&&(e=t<h?this.getPathSize(t):0),(t>h||t<h&&e>this.getPathSize(t)||t===h&&e>0||r<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),!r)return;if(this.mergeVertexDescription(a.getDescription()),t===h){this.m_paths.add(this.m_pointCount);const t=0;this.m_bPolygon?this.m_pathFlags.add(1|t):this.m_pathFlags.add(t)}e<0&&(e=this.getPathSize(t));const m=this.m_pointCount;this.resizeImpl(this.m_pointCount+r),this.verifyAllStreamsAfterSizeChange();const l=this.getPathStart(t),c=l+e,g=0,d=g+r;for(let n=0,_=this.m_description.getAttributeCount();n<_;n++){const t=this.m_description.getSemantics(n),s=js.getComponentCount(t);if(a.getDescription().getAttributeIndex(t)<0){const e=js.getDefaultValue(t);this.m_vertexAttributes.get(n).insertRange(s*c,e,d*s,s*m);continue}const h=a.getAttributeStreamRef(t);this.m_vertexAttributes.get(n).insertRangeFromStream(s*(l+e),h,s*(g+i),r*s,o,s,s*m)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(l+e,1,r,m),this.m_curveData.m_segmentParamIndex.insertRange(l+e,-1,r,m),e>0&&this.isNonLinearSegment(l+e-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(l+e-1),-1),this.m_curveData.m_segmentFlags.write(l+e-1,1),this.m_curveData.m_segmentParamIndex.write(l+e-1,-1),this.modifyCurveCounter(-1)));for(let n=t+1,_=this.getPathCount();n<=_;n++){const t=this.m_paths.read(n);this.m_paths.write(n,t+r)}this.notifyModifiedFlags(2001)}insertPoint2D(t,e,s){const i=this.getPathCount();t<0&&(t=i),(t>i||t<i&&e>this.getPathSize(t))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),t===i&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(t),a=e<0?this.getPathSize(t)+o:e+o,h=this.m_vertexAttributes.get(0);if(a===r)this.m_paths.write(t+1,r+1),h.writePoint2D(2*a,s);else{h.insert(2*a,s,2*r);for(let t=1,e=this.m_description.getAttributeCount();t<e;t++){const e=this.m_description.getSemantics(t),s=js.getComponentCount(e),n=js.getDefaultValue(e);this.m_vertexAttributes.get(t).insertRange(s*a,n,s,s*r)}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(a,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(a,-1,1,r));for(let e=t+1,s=i;e<=s;e++)this.m_paths.write(e,this.m_paths.read(e)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&a>o&&this.isNonLinearSegment(a-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(a-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(a-1,1),this.m_curveData.m_segmentParamIndex.write(a-1,-1)),this.notifyModifiedFlags(2001)}insertPoint(t,e,s){const i=this.getPathCount();t<0&&(t=i),(t>i||t<i&&e>this.getPathSize(t))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),t===i&&this.addPathPoint2D(null,0,!0);const r=this.m_pointCount;this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();const o=this.getPathStart(t),a=e<0?this.getPathSize(t)+o:e+o;if(a===r)this.m_paths.write(t+1,r+1),this.setPointByValNoCurves(a,s);else{const e=s.getDescription();this.m_description!==e&&this.mergeVertexDescription(e);for(let t=0,n=this.m_description.getAttributeCount();t<n;t++){const n=this.m_description.getSemantics(t),i=js.getComponentCount(n);if(e.hasAttribute(n))this.m_vertexAttributes.get(t).insertAttributes(i*a,s,n,i*r);else{const e=js.getDefaultValue(n);this.m_vertexAttributes.get(t).insertRange(i*a,e,i,i*r)}}this.m_curveData&&this.m_curveData.m_segmentFlags&&(this.m_curveData.m_segmentFlags.insertRange(a,1,1,r),this.m_curveData.m_segmentParamIndex.insertRange(a,-1,1,r));for(let s=t+1,n=i;s<=n;s++)this.m_paths.write(s,this.m_paths.read(s)+1)}this.m_curveData&&this.m_curveData.m_segmentFlags&&a>o&&this.isNonLinearSegment(a-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(a-1),-1),this.modifyCurveCounter(-1),this.m_curveData.m_segmentFlags.write(a-1,1),this.m_curveData.m_segmentParamIndex.write(a-1,-1)),this.notifyModifiedFlags(2001)}removePointFromPath(t,e){const s=this.getPathCount();t<0&&(t=s-1),(t>=s||e>=this.getPathSize(t))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("Multi_path.remove_point");const i=this.getPathStart(t),r=this.isClosedPath(t);e<0&&(e=this.getPathSize(t)-1),e<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("Multi_path.remove_point");const o=i+e;for(let n=0,a=this.m_description.getAttributeCount();n<a;n++)if(this.m_vertexAttributes.get(n)){const t=this.m_description.getSemantics(n),e=js.getComponentCount(t);this.m_vertexAttributes.get(n).eraseRange(e*o,e,e*this.m_pointCount)}if(this.m_curveData&&this.m_curveData.m_segmentFlags){this.checkCompactSegmentParams();let e=0;if(o>i&&this.isNonLinearSegment(o-1))e+=1,this.incCurveType(this.m_curveData.m_segmentFlags.read(o-1),-1),this.m_curveData.m_segmentFlags.write(o-1,1),this.m_curveData.m_segmentParamIndex.write(o-1,-1);else{const s=this.getPathEnd(t);r&&i+1<s&&this.isNonLinearSegment(s-1)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(s-1),-1),this.m_curveData.m_segmentFlags.write(s-1,1),this.m_curveData.m_segmentParamIndex.write(s-1,-1),e+=1)}this.isNonLinearSegment(o)&&(this.incCurveType(this.m_curveData.m_segmentFlags.read(o),-1),e+=1),e>0&&this.modifyCurveCounter(-e),this.m_curveData.m_segmentFlags.eraseRange(o,1,this.m_pointCount),this.m_curveData.m_segmentParamIndex.eraseRange(o,1,this.m_pointCount)}for(let n=s;n>=t+1;n--){const t=this.m_paths.read(n);this.m_paths.write(n,t-1)}this.m_pointCount--,this.m_reservedPointCount--,this.notifyModifiedFlags(2001)}removePoint(t){let e;e=t<0?this.getPathCount()-1:this.getPathIndexFromPointIndex(t),this.removePointFromPath(e,t-this.getPathStart(e))}getNextSegmentType(t){return this.hasNonLinearSegments()?this.m_curveData.m_segmentFlags.read(t):1}getPrevSegmentTypeFromPath(t,e){if(!this.hasNonLinearSegments())return 1;const s=this.getPathStart(t);if(e>s)return this.m_curveData.m_segmentFlags.read(e-1);if(e===s){if(this.isClosedPath(t)){const e=this.getPathEnd(t);return this.m_curveData.m_segmentFlags.read(e-1)}return 1}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}getNumberOfCurves(t){if(!this.hasNonLinearSegments())return 0;let e=0;for(let s=this.getPathStart(t),n=this.getPathEnd(t);s<n;s++)Hs.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(s))&&++e;return e}getPathCount(){return this.m_paths?this.m_paths.size()-1:0}getPathSize(t){return this.m_paths.read(t+1)-this.m_paths.read(t)}getPathStart(t){return this.m_paths.read(t)}getPathEnd(t){return this.m_paths.read(t+1)}getPathIndexFromPointIndex(t,e=-1){-1===e&&(e=this.m_currentPathIndex);const s=this.getPathCount(),n=Hs.getPathIndexFromPointIndexImpl(this.m_paths,s,t,e);return this.m_currentPathIndex=n,n}startPathCoords(t,e){this.startPathPoint(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({x:t,y:e}))}startPath(t){this.startPathPoint(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({pt:t}))}startPath3D(t){this.startPathPoint(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({x:t.x,y:t.y,z:t.z}))}startPath3DCoords(t,e,s){this.startPathPoint(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({x:t,y:e,z:s}))}startPathPoint(t){t.isEmpty()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const s=t.getDescription();let n;if(this.m_description!==s){this.mergeVertexDescription(s);const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.m_description});t.copyCommonAttributesTo(e),n=e}else n=t;this.m_bPathStarted?this.setPointByValNoCurves(this.m_pointCount-1,n):(this.insertPoint(-1,-1,n),this.m_bPathStarted=!0)}beforeNewSegmentHelper2(){this.m_paths=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(2),this.m_paths.write(0,0),this.m_pathFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(2,0),this.m_bPolygon&&this.m_pathFlags.write(0,1)}beforeNewSegmentHelper1(){null!==this.m_paths?(this.m_paths.add(0),this.m_pathFlags.add(0),this.m_bPolygon&&this.m_pathFlags.write(this.m_pathFlags.size()-2,1)):this.beforeNewSegmentHelper2()}beforeNewSegment(t){0!==this.m_pointCount||this.m_bPathStarted||this.startPathCoords(0,0);const e=this.m_pointCount,s=this.m_paths.size()-1,n=e+t;this.m_paths.write(s,n),this.resizeImpl(n),this.m_bPathStarted&&(this.m_bPathStarted=!1)}finishLineTo(){if(this.hasNonLinearSegments()){const t=this.m_curveData.m_segmentFlags.read(this.m_pointCount-1);1!==t&&(this.m_curveData.m_segmentFlags.write(this.m_pointCount-1,1),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-1,-1),this.modifyCurveCounter(-1),this.incCurveType(t,-1))}}lineToCoords(t,e){if(this.beforeNewSegment(1),1===this.m_description.getAttributeCount())this.setXYCoordsNoCurves(this.m_pointCount-1,t,e);else{const s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.m_description,attribBuffer:s,initDefaultValues:!0});n.setXYCoords(t,e),this.setPointByValNoCurves(this.m_pointCount-1,n)}this.finishLineTo()}lineTo(t){this.lineToCoords(t.x,t.y)}lineTo3D(t){this.beforeNewSegment(1);const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.l)(this.m_description,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.w)()),s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:e,attribBuffer:s,initDefaultValues:!0});n.setXYZ(t),this.setPointByValNoCurves(this.m_pointCount-1,n),this.finishLineTo()}lineTo3DCoords(t,e,s){this.lineTo3D(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d(t,e,s))}lineToPoint(t){if(this.beforeNewSegment(1),this.m_description===t.getDescription())this.setPointByValNoCurves(this.m_pointCount-1,t);else{this.mergeVertexDescription(t.getDescription());const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.m_description,attribBuffer:e,initDefaultValues:!1});t.copyCommonAttributesTo(s),this.setPointByValNoCurves(this.m_pointCount-1,s)}this.finishLineTo()}openPathAndDuplicateStartVertex(t){this.m_bPolygon&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("");const s=this.getPathCount();if(t>s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),!this.isClosedPath(t))return;this.m_pathFlags||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("");const n=this.m_pointCount,i=this.getPathStart(t),r=this.getPathEnd(t);if(r-i!==0){this.resizeImpl(this.m_pointCount+1),this.verifyAllStreamsAfterSizeChange();for(let t=0,e=this.m_description.getAttributeCount();t<e;t++)if(this.m_vertexAttributes.get(t)){const e=this.m_description.getSemantics(t),s=js.getComponentCount(e);this.m_vertexAttributes.get(t).insertRangeFromStream(s*r,this.m_vertexAttributes.get(t),s*i,s,!0,1,s*n)}for(let e=s;e>t;e--){const t=this.m_paths.read(e);this.m_paths.write(e,t+1)}this.hasNonLinearSegments()&&(this.m_curveData.m_segmentFlags.insertRange(r,1,1,n),this.m_curveData.m_segmentParamIndex.insertRange(r,-1,1,n)),this.m_pathFlags.clearBits(t,1)}}openPath(t){this.m_bPolygon&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),t>this.getPathCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.m_pathFlags||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),this.m_pathFlags.clearBits(t,1)}isStrongPathStart(t){return!!(2&this.m_pathFlags.read(t))}setStrongPathStart(t,e){e?this.m_pathFlags.setBits(t,2):this.m_pathFlags.clearBits(t,2)}isStrongPathEnd(t){return!!(4&this.m_pathFlags.read(t))}setStrongPathEnd(t,e){e?this.m_pathFlags.setBits(t,4):this.m_pathFlags.clearBits(t,4)}clearStrongPathEnds(){for(let t=0,e=this.getPathCount();t<e;++t)this.m_pathFlags.clearBits(t,6)}openAllPathsAndDuplicateStartVertex(){if(this.m_bPolygon&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),this.isEmpty())return;this.m_pathFlags||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("");let t=0;const e=this.getPathCount();for(let h=0;h<e;h++)this.isClosedPath(h)&&(this.getPathSize(h)>0?t++:this.m_pathFlags.clearBits(h,1));if(0===t)return;const s=this.hasNonLinearSegments();let n=0;const i=this.getPathCount(),r=this.m_description.getAttributeCount(),o=new Array(r);let a=null,u=null;for(let h=0;h<i;++h){const e=this.getPathStart(h),i=this.getPathSize(h),m=this.isClosedPath(h);if(i>0){const h=e+n;for(let s=0;s<r;s++)if(this.m_vertexAttributes.get(s)){const n=this.m_description.getSemantics(s),r=js.getComponentCount(n);if(!o[s]){const e=r*(this.m_pointCount+t),i=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.u)(n,e);o[s]=i}o[s].writeRange(h*r,i*r,this.m_vertexAttributes.get(s),e*r,!0,1),m&&o[s].writeRange((h+i)*r,r,this.m_vertexAttributes.get(s),e*r,!0,1)}if(s){if(null===a){const e=this.m_pointCount+t;a=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(e),u=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(e)}a.writeRange(h,i,this.m_curveData.m_segmentFlags,e,!0,1),u.writeRange(h,i,this.m_curveData.m_segmentParamIndex,e,!0,1),m&&(a.write(h+i,1),u.write(h+i,-1))}}this.m_paths.write(h,e+n),m&&(this.m_pathFlags.clearBits(h,1),++n)}this.m_paths.write(i,this.m_pointCount+t),this.m_pathFlags.clearBits(i,1);for(let h=0;h<r;h++)this.m_vertexAttributes.get(h)&&this.m_vertexAttributes.set(h,o[h]);s&&(this.m_curveData.m_segmentFlags=a,this.m_curveData.m_segmentParamIndex=u),this.m_pointCount+=t,this.m_reservedPointCount>0&&(this.m_reservedPointCount=this.m_pointCount)}closePathWithLine(t){void 0===t&&(t=this.getPathCount()-1),this.throwIfEmpty(),(t<0||t>=this.getPathCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("close_path_with_line"),t===this.getPathCount()-1&&(this.m_bPathStarted=!1);const s=this.m_pathFlags.read(t);if(1&s||this.m_pathFlags.write(t,1|s),this.m_curveData&&this.m_curveData.m_segmentFlags){const e=this.getPathEnd(t)-1,s=this.m_curveData.m_segmentFlags.read(e);1!==s&&(this.m_curveData.m_segmentFlags.write(e,1),this.m_curveData.m_segmentParamIndex.write(e,-1),this.incCurveType(s,-1),this.modifyCurveCounter(-1))}this.notifyModifiedFlags(2001)}closeLastPathWithSegment(t){this.closePathWithSegment(this.getPathCount()-1,t)}closePathWithSegment(t,s){if(this.throwIfEmpty(),(t<0||t>=this.getPathCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("close_path_with_line"),s.getEndXY().equals(this.getXY(this.getPathStart(t)))||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("close_path_with_segment: end point mismatch"),t===this.getPathCount()-1)this.m_bPathStarted=!1,this.addSegment(s,!1),--this.m_pointCount,this.m_paths.write(t+1,this.m_pointCount);else{this.mergeVertexDescription(s.getDescription());const n=s.getStartXY(),r=this.getPathEnd(t)-1;n.equals(this.getXY(r))||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("close_path_with_segment: start point mismatch");const o=s.getGeometryType();if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return void this.closePathWithLine(t);{const t=Bs(s);this.initSegmentData(t);const e=Zs.toSegType(o),n=this.m_curveData.m_segmentFlags.read(r);if(n!==e)this.m_curveData.m_segmentParamIndex.write(r,this.m_curveData.m_curveParamWritePoint),s.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=t,this.incCurveType(e,1),1!==n?this.incCurveType(n,-1):this.modifyCurveCounter(1);else{const t=this.m_curveData.m_segmentParamIndex.read(r);s.writeInBufferStream(this.m_curveData.m_segmentParams,t)}this.m_curveData.m_segmentFlags.write(r,e)}}const n=this.m_pathFlags.read(t);1&n||this.m_pathFlags.write(t,1|n),this.notifyModifiedFlags(2001)}closeAllPaths(){if(this.m_bPolygon||this.isEmptyImpl())return;this.m_bPathStarted=!1;let t=!1;for(let e=0,s=this.m_paths.size()-1;e<s;e++){if(this.isClosedPath(e))continue;const s=this.m_pathFlags.read(e);this.m_pathFlags.write(e,1|s),t=!0}t&&this.notifyModifiedFlags(512)}isClosedPath(t){return!!(1&this.m_pathFlags.read(t))}isClosedPathInXYPlane(t){if(this.isClosedPath(t))return!0;const e=this.getPathStart(t),s=this.getPathEnd(t)-1;if(e>s)return!1;const n=this.getXY(e),i=this.getXY(s);return n.isEqualPoint2D(i)}isClosedPathIn3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}hasNonLinearSegmentsPath(t){if(!this.hasNonLinearSegments())return!1;for(let e=this.getPathStart(t),s=this.getPathEnd(t);e<s;e++)if(Hs.isNonLinearSegmentFlag(this.m_curveData.m_segmentFlags.read(e)))return!0;return!1}isNonLinearSegment(t){return!(1&this.getSegmentFlags(t))}addEnvelope(t,e){if(t.isEmpty())return;const s=0===this.m_pointCount;if(t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D)this.startPathCoords(t.xmin,t.ymin),e?(this.lineToCoords(t.xmax,t.ymin),this.lineToCoords(t.xmax,t.ymax),this.lineToCoords(t.xmin,t.ymax)):(this.lineToCoords(t.xmin,t.ymax),this.lineToCoords(t.xmax,t.ymax),this.lineToCoords(t.xmax,t.ymin));else{const s=t.getDescription(),n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:s,attribBuffer:n,initDefaultValues:!1});for(let r=0,o=4;r<o;r++){const s=e?o-r-1:r;t.queryCornerByVal(s,i),0===r?this.startPathPoint(i):this.lineToPoint(i)}}this.closePathWithLine(),this.m_bPathStarted=!1,s&&!e&&(this.setDirtyFlagProtected(256,!1),this.m_bPolygon&&Math.min(t.width(),t.height())>0&&this.setIsSimple(3,0))}addPathFromClosedSegment(t,s){if(t.isClosed()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("add_path_from_closedSegment: segment must be closed"),s){const e=t.getReversed(),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;e.queryStart(s),this.startPathPoint(s),this.closeLastPathWithSegment(e)}else{const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;t.queryStart(e),this.startPathPoint(e),this.closeLastPathWithSegment(t)}}addSegment_(t,s){const n=t.getDescription();this.mergeVertexDescription(n);const r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:n,attribBuffer:r,initDefaultValues:!1}),a=t.getGeometryType();if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)(s||this.isEmptyImpl())&&(t.queryStart(o),this.startPathPoint(o)),t.queryEnd(o),this.lineToPoint(o);else{let n=!1;if((s||this.isEmptyImpl())&&(n=!0),!n){t.getStartXY().equals(this.getXY(this.m_pointCount-1))||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("add_segment: start point mismatch")}if(n&&(t.queryStart(o),this.startPathPoint(o)),this.beforeNewSegment(1),t.queryEnd(o),o.getDescription()===this.m_description)this.setPointByVal(this.m_pointCount-1,o);else{const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.o)(),e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.m_description,attribBuffer:t,initDefaultValues:!1});o.copyCommonAttributesTo(e),this.setPointByVal(this.m_pointCount-1,e)}const i=Bs(t);this.initSegmentData(i),this.m_curveData.m_segmentParamIndex.write(this.m_pointCount-2,this.m_curveData.m_curveParamWritePoint),t.writeInBufferStream(this.m_curveData.m_segmentParams,this.m_curveData.m_curveParamWritePoint),this.m_curveData.m_curveParamWritePoint+=i;const r=Zs.toSegType(a);this.incCurveType(r,1),this.modifyCurveCounter(1),this.m_curveData.m_segmentFlags.write(this.m_pointCount-2,r)}}addSegment(t,e,s){s?e?this.addPathFromClosedSegment(t,!1):this.closeLastPathWithSegment(t):this.addSegment_(t,e)}interpolateAttributesRange(t,s,n,i){for(let a=t;a<n-1;a++)this.isClosedPath(a)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("cannot interpolate across closed paths");const r=this.m_description.getAttributeCount();if(1===r)return;const o=this.calculateSubLength2D(t,s,n,i);if(0!==o)for(let e=1;e<r;e++){const r=this.m_description.getSemantics(e);this.interpolateAttributesSemanticsImpl(r,t,s,n,i,o)}}interpolateAttributesSemantics(t,s,n,i,r){if(0===t)return;this.hasAttribute(t)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("does not have the given attribute");2===js.getInterpolation(t)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("angular interpolation");for(let a=s;a<i-1;a++)this.isClosedPath(a)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("cannot interpolate across closed paths");const o=this.calculateSubLength2D(s,n,i,r);0!==o&&this.interpolateAttributesSemanticsImpl(t,s,n,i,r,o)}interpolateAttributesPath(t,e,s){const n=this.m_description.getAttributeCount();if(1===n)return;if(e===s)return;const i=this.calculatePathSubLength2D(t,e,s);for(let r=1;r<n;r++){const n=this.m_description.getSemantics(r);this.interpolateAttributesSemanticsPathImpl(n,t,e,s,i)}}interpolateAttributesSemanticsPath(t,s,n,i){if(0===t)return;this.hasAttribute(t)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("does not have the given attribute");2===js.getInterpolation(t)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("angular interpolation");const r=this.calculatePathSubLength2D(s,n,i);0!==r&&this.interpolateAttributesSemanticsPathImpl(t,s,n,i,r)}interpolateAttributesSemanticsImpl(t,e,s,n,i,r){const o=this.querySegmentIterator(),a=this.getPathStart(e)+s,h=this.getPathStart(n)+i,u=js.getComponentCount(t),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);this.queryAttributeAsDbl(t,a,m,u);const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);this.queryAttributeAsDbl(t,h,l,u);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(c,m,0,0,u);let g=0;const d=js.getDefaultValue(t),_=js.getInterpolation(t);o.resetToVertex(a,e);do{if(o.hasNextSegment()){if(o.nextSegment(),o.getStartPointIndex()===h)return;this.setAttributeFromArray(t,o.getStartPointIndex(),c,u),o.previousSegment();do{const e=o.nextSegment();if(o.getEndPointIndex()===h)return;g+=e.calculateLength2D();(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.A)(_,m,l,c,0,u,g/r,d),o.isClosingSegment()||this.setAttributeFromArray(t,o.getEndPointIndex(),c,u)}while(o.hasNextSegment())}}while(o.nextPath())}interpolateAttributesSemanticsPathImpl(t,e,n,i,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0!==t);const o=this.querySegmentIterator(),a=js.getInterpolation(t),h=this.getPathStart(e)+n,u=this.getPathStart(e)+i;if(u===h)return;const m=js.getComponentCount(t),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);this.queryAttributeAsDbl(t,h,l,m);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);this.queryAttributeAsDbl(t,u,c,m);const g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);o.resetToVertex(h,e),o.setCirculator(this.isClosedPath(e));const d=js.getDefaultValue(t),_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(js.maxComponentCount(),Number.NaN);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(_,l,0,0,m);const p=0===r;let f=.5;do{const e=o.nextSegment();if(this.setAttributeFromArrayNoCurves(t,o.getStartPointIndex(),_,m),!p){const t=e.calculateLength2D();g.pe(t),f=g.getResult()/r}(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.A)(a,l,c,_,0,m,f,d)}while(o.getEndPointIndex()!==u)}querySegment(t,s,n){const i=this.getPathIndexFromPointIndex(t),r=t-this.getPathStart(i);r>=this.getSegmentCountPath(i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("get_segment"),this.getSegmentFromPath(i,r,s,n)}getSegment(t,e){const s=new this.m_segmentBufferCTor;return this.getSegmentBuffer(t,s,e),s.releaseSegment()}getSegmentType(t){const s=this.getPathIndexFromPointIndex(t),n=t-this.getPathStart(s);return n>=this.getSegmentCountPath(s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("get_segment"),this.getSegmentTypeFromPath(s,n)}getSegmentFromPath(t,e,s,n){const i=this.getPathStart(t)+e,r=this.getSegmentFlagsStreamRef();let o=1;switch(r&&(o=31&r.read(i)),o){case 1:s.createLine();break;case 2:s.createCubicBezier();break;case 4:s.createEllipticArc();break;case 8:s.createQuadraticRationalBezier();break;case 16:s.createQuadraticBezier();break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}const a=s.get();let u,m=null;n?(m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)(),a.assignVertexDescription(m)):a.assignVertexDescription(this.m_description),u=i===this.getPathEnd(t)-1&&this.isClosedPath(t)?this.getPathStart(t):i+1;We(a,this.getXY(i));if(Ze(a,this.getXY(u)),!n)for(let h=1,l=this.m_description.getAttributeCount();h<l;h++){const t=this.m_description.getSemantics(h),e=js.getComponentCount(t);for(let s=0;s<e;s++){const e=this.getAttributeAsDbl(t,i,s);a.setStartAttribute(t,s,e);const n=this.getAttributeAsDbl(t,u,s);a.setEndAttribute(t,s,n)}}if(Hs.isNonLinearSegmentFlag(o)){const t=this.m_curveData.m_segmentParamIndex.read(i);a.readFromBufferStream(this.m_curveData.m_segmentParams,t)}}replaceLinearEllipticalArcsWithTrueLines(){if(!this.hasNonLinearSegments())return!1;if(0===this.m_curveData.m_arcCount)return!1;let t=!1;for(let e=0,s=this.getPointCount();e<s;e++){if(4===this.m_curveData.m_segmentFlags.read(e)){const s=this.m_curveData.m_segmentParamIndex.read(e);zs(this.m_curveData.m_segmentParams,s).isNAN()&&(this.m_curveData.m_segmentFlags.write(e,1),this.m_curveData.m_segmentParamIndex.write(e,-1),this.incCurveType(4,-1),this.modifyCurveCounter(-1),t=!0)}}return t&&this.checkCompactSegmentParams(),t}queryPointAlongPath(t,s,n,i=!1){const r={iSegment:-1},o=i?r:{tSegment:0};if(n.setEmpty(),this.isEmpty())return r;if((t<0||t>=this.getPathCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("query_point_along_path"),s<0)return r;const a=this.getPathSize(t);if(0===a)return r;if(1===a)return this.getPointByVal(this.getPathStart(t),n),o.tSegment=0,r.iSegment=this.getPathStart(t),r;const h=this.querySegmentIteratorAtVertex(this.getPathStart(t)),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(;h.hasNextSegment();){const t=h.nextSegment(),e=t.calculateLength2D(),i=u.getResult();if(u.add(e),u.getResult()>=s){let a=s-i;a>e&&(a=e);const u=t.lengthToT(a);return t.queryCoord(u,n),o.tSegment=u,r.iSegment=h.getStartPointIndex(),r}}if(this.isClosedPath(t)){const e=this.getPathStart(t);return this.getPointByVal(e,n),o.tSegment=1,r.iSegment=this.getPathEnd(t)-1,r}{const e=this.getPathEnd(t)-1;return this.getPointByVal(e,n),this.getPathSize(t)>1?(o.tSegment=1,r.iSegment=this.getPathEnd(t)-2,r):(o.tSegment=0,r.iSegment=this.getPathStart(t),r)}}queryPointsAlongPath(t,s,n,i,r,o){{let t=0;for(let a=0;a<s;++a)i&&i[a].setEmpty(),r&&(r[a]=-1),o&&(o[a]=0),t>n[a]&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("query_points_along"),t=n[a]}const a=this.getPathSize(t);if(0===s||0===a)return 0;if(1===a){const e=this.getPathStart(t);return i&&this.getPointByVal(e,i[0]),o&&(o[0]=0),r&&(r[0]=e),1}const h=this.getPathStart(t),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0),m=this.querySegmentIteratorAtVertex(h);let l=0,c=0,g=n[l];for(;m.hasNextSegment();){const t=m.nextSegment(),e=t.calculateLength2D(),a=u.getResult();for(u.add(e);u.getResult()>=g;){let h=g-a;h>e&&(h=e);const u=t.lengthToT(h);if(i&&t.queryCoord(u,i[c]),o&&(o[c]=u),r&&(r[c]=m.getStartPointIndex()),c++,l++,g=n[l],l===s)return c}}if(this.isClosedPath(t)){const e=this.getPathStart(t),s=0;i&&this.getPointByVal(e,i[c]),o&&(o[c]=s),r&&(r[c]=e),c++}else if(this.getPathSize(t)>1){const e=this.getPathEnd(t)-2,s=1;i&&this.getPointByVal(e+1,i[c]),o&&(o[c]=s),r&&(r[c]=e),c++}return c}queryPointsAlong(t,s,n,i,r){{let o=0;for(let a=0;a<t;++a)n&&n[a].setEmpty(),i&&(i[a]=-1),r&&(r[a]=0),o>s[a]&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("query_points_along"),o=s[a]}if(0===t)return 0;const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0),a=this.querySegmentIterator();let h=-1,u=0,m=0,l=s[u];for(;a.nextPath();)for(;a.hasNextSegment();){h=a.getPathIndex();const e=a.nextSegment(),c=e.calculateLength2D(),g=o.getResult();for(o.add(c);o.getResult()>=l;){let o=l-g;o>c&&(o=c);const h=e.lengthToT(o);if(n&&e.queryCoord(h,n[m]),r&&(r[m]=h),i&&(i[m]=a.getStartPointIndex()),m++,u++,l=s[u],u===t)return m}}if(h<0)return 0;if(this.isClosedPath(h)){const t=this.getPathStart(h),e=0;n&&this.getPointByVal(t,n[m]),r&&(r[m]=e),i&&(i[m]=t),m++}else if(this.getPathSize(h)>1){const t=this.getPathEnd(h)-2,e=1;n&&this.getPointByVal(t+1,n[m]),r&&(r[m]=e),i&&(i[m]=t),m++}return m}querySegmentIterator(){return new Fs({parent:this})}querySegmentIteratorAtVertex(t){return new Fs({parent:this,pointIndex:t})}queryPathEnvelope(t,e){this.queryPathEnvelopeImpl(t,e,!0)}queryLoosePathEnvelope(t,e){this.queryPathEnvelopeImpl(t,e,!1)}queryPathEnvelopeImpl(t,n,i){if(n instanceof _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.E&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0,"not implemented for Envelope"),n instanceof _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0,"not implemented for Envelope3D"),(t>=this.getPathCount()||t<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.isEmpty())return void n.setEmpty();const r=this.getAttributeStreamRef(0),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();o.setEmpty();for(let e=2*this.getPathStart(t),a=2*this.getPathEnd(t);e<a;){const t=a-e;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!(1&t)),o.mergePointsInterleaved(r,e/2,t/2),e+=t}if(n.setCoords({env2D:o}),this.hasNonLinearSegmentsPath(t)){const e=this.querySegmentIterator();if(e.resetToPath(t),e.nextPath())for(;e.hasNextSegment();){const t=e.nextCurve();if(!t)break;{const e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();i?t.queryEnvelope(e):t.queryLooseEnvelope(e),n.mergeEnvelope2D(e)}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}}checkCompactSegmentParams(){if(!this.m_curveData||null===this.m_curveData.m_segmentParams)return!1;if(this.m_curveData.m_segmentParams.size()<=this.m_vertexAttributes.get(0).size())return!1;const t=10,e=ks(4)*this.m_curveData.m_arcCount+ks(2)*this.m_curveData.m_bezierCount+ks(8)*this.m_curveData.m_rbezier2Count+ks(16)*this.m_curveData.m_bezier2Count;return this.m_curveData.m_segmentParams.size()>Math.max(3*e>>1,t)?(this.forceCompactSegmentParams(),!0):(0===this.m_pointCount&&(this.m_curveData.m_curveParamWritePoint=0),!1)}forceCompactSegmentParams(){let t=0;for(let n=0,i=this.getPointCount();n<i;n++){const e=this.m_curveData.m_segmentFlags.read(n);if(Hs.isNonLinearSegmentFlag(e)){t+=ks(e)}}const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(t);let s=0;for(let n=0,i=this.getPointCount();n<i;n++){const t=this.m_curveData.m_segmentFlags.read(n);if(Hs.isNonLinearSegmentFlag(t)){let i=this.m_curveData.m_segmentParamIndex.read(n);this.m_curveData.m_segmentParamIndex.write(n,s);const r=ks(t);for(let t=0;t<r;t++)e.write(s,this.m_curveData.m_segmentParams.read(i)),s++,i++}}this.m_curveData.m_segmentParams=e,this.m_curveData.m_curveParamWritePoint=s}setEmpty(){this.m_curveData&&(this.removeAllCurvesFromGlobalCounter(),this.m_curveData=null),this.m_bPathStarted=!1,this.m_paths=null,this.m_pathFlags=null,this.setEmptyImpl()}applyTransformation(t){this.applyTransformationToPath(t,-1)}applyTransformation3D(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getImpl(){return this}reserve(t){this.reserveImpl(t),t>0&&!this.m_paths&&(this.m_paths=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0),this.m_pathFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(0),this.m_paths.reserve(2),this.m_pathFlags.reserve(2),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,this.m_bPolygon?1:0))}reserveParts(t,e){this.reserveImpl(t),e>0&&(this.m_paths?(this.m_paths.reserve(e+1),this.m_pathFlags.reserve(e+1)):(this.m_paths=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0),this.m_pathFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(0),this.m_paths.reserve(e+1),this.m_pathFlags.reserve(e+1),this.m_paths.resize(1,0),this.m_pathFlags.resize(1,this.m_bPolygon?1:0)))}clone(){const t=this.createInstance();return this.copyTo(t),t}queryLimitedSegmentIterator(t){return new Us(this,t)}getPathStreamRef(){return this.throwIfEmpty(),this.m_paths}setPathStreamRef(t){this.m_paths=t}getSegmentFlagsStreamRef(){return this.throwIfEmpty(),null!=this.m_curveData?this.m_curveData.m_segmentFlags:null}getPathFlagsStreamRef(){return this.throwIfEmpty(),this.m_pathFlags}setPathFlagsStreamRef(t){this.m_pathFlags=t}getSegmentIndexStreamRef(){return this.throwIfEmpty(),null!==this.m_curveData?this.m_curveData.m_segmentParamIndex:null}getSegmentDataStreamRef(){return this.throwIfEmpty(),null!==this.m_curveData?this.m_curveData.m_segmentParams:null}setSegmentData(t,e,s,n){this.m_curveData||(this.m_curveData=new Zs),this.m_curveData.m_segmentFlags=s,this.m_curveData.m_segmentParams=e,this.m_curveData.m_segmentParamIndex=t,this.m_curveData.m_curveParamWritePoint=n}static getPathIndexFromPointIndexImpl(t,e,s,n){if(n>=0&&n<e){if(s>=t.read(n)){if(s<t.read(n+1))return n;n++}else n--;if(n>=0&&n<e&&s>=t.read(n)&&s<t.read(n+1))return n}if(e<5){for(let n=0;n<e;n++)if(s<t.read(n+1))return n;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.n)("")}let i=0,r=e-1;for(;r>i;){const e=i+(r-i>>1);if(s<t.read(e))r=e-1;else{if(!(s>=t.read(e+1)))return e;i=e+1}}return i}getHighestPointIndex(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<this.getPathCount());const e=this.getAttributeStreamRef(0),n=this.getPathEnd(t),i=this.getPathStart(t);let r=-1;const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;o.y=Number.NEGATIVE_INFINITY,o.x=Number.NEGATIVE_INFINITY;for(let s=i+0;s<n;s++){const t=e.readPoint2D(2*s);-1===o.compare(t)&&(r=s,o.setCoordsPoint2D(t))}return r}applyTransformationToPath(t,s){if(s>=this.getPathCount()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("apply_transformation"),this.isEmpty())return;if(t.isIdentity())return;const n=this.m_vertexAttributes.get(0);if(!(s<0?this.hasNonLinearSegments():this.hasNonLinearSegmentsPath(s))){let e,i;return s<0?(e=0,i=this.m_pointCount):(e=this.getPathStart(s),i=this.getPathEnd(s)),n.applyTransformation(t,2*e,i-e),void this.notifyModifiedFlags(2001)}const i=new this.m_segmentBufferCTor,r=this.getPathCount();let o=s<0?0:s;do{const e=this.getPathStart(o),r=this.getPathEnd(o),a=this.isClosedPath(o),h=n.readPoint2D(2*e);if(!this.hasNonLinearSegmentsPath(o)){n.applyTransformation(t,2*e,r-e);continue}const u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();for(let s=e;s<r;++s){if(1!==(31&this.m_curveData.m_segmentFlags.read(s))){const o=a&&s+1===r;o&&n.writePoint2D(2*e,h),this.getSegmentBuffer(s,i,!0),i.get().applyTransformation(t);const u=this.m_curveData.m_segmentParamIndex.read(s);i.get().writeInBufferStream(this.m_curveData.m_segmentParams,u),n.writePoint2D(2*s,i.get().getStartXY()),o&&n.writePoint2D(2*e,i.get().getEndXY());continue}const o=2*s;n.queryPoint2D(o,u),t.transformInPlace(u),n.writePoint2D(o,u)}if(o===s)break}while(++o<r);this.notifyModifiedFlags(2001)}calculateSubLength2D(t,e,s,n){const i=this.getPathStart(t)+e,r=this.getPathStart(s)+n;(r<i||i<0||r>this.getPointCount()-1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.p)("");const o=this.querySegmentIterator();let a=0;o.resetToVertex(i,t);do{for(;o.hasNextSegment();){const t=o.nextSegment();if(o.getStartPointIndex()===r)break;a+=t.calculateLength2D()}if(o.getStartPointIndex()===r)break}while(o.nextPath());return a}calculatePathSubLength2D(t,s,n){const i=this.getPathStart(t)+s,r=this.getPathStart(t)+n;(i<0||r>this.getPointCount()-1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.p)("");const o=this.querySegmentIterator();if(i>r&&(this.isClosedPath(t)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("cannot iterate across an open path"),o.setCirculator(!0)),i===r)return 0;let a=0,h=0;o.resetToVertex(i,t);do{h+=a;a=o.nextSegment().calculateLength2D()}while(o.getStartPointIndex()!==r);return h}calculateEnvelope2D(t){return this.updateXYImpl(t)}updateXYImpl(t){const e=super.updateXYImpl(t);if(this.hasNonLinearSegments()){const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),n=this.querySegmentIterator();for(;n.nextPath();)for(;n.hasNextSegment();){const i=n.nextCurve();if(!i)break;t?i.queryEnvelope(s):i.queryLooseEnvelope(s),e.mergeEnvelope2D(s)}}return e}notifyModifiedAllImpl(){null!==this.m_paths&&this.m_paths.size()?this.m_pointCount=this.m_paths.read(this.m_paths.size()-1):this.m_pointCount=0}setDirtyOGCFlags(t){this.setDirtyFlagProtected(16,t)}hasDirtyOGCStartFlags(){return this.hasDirtyFlag(16)}setDirtyRingAreas2D(t){this.setDirtyFlagProtected(1024,t)}hasDirtyRingAreas2D(){return this.hasDirtyFlag(1024)}static isNonLinearSegmentFlag(t){return!(1&t)}addAndExplicitlyOpenAllPaths(t,s){this===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl::add");let n=this.getPathCount();for(let e=0,i=t.getPathCount();e<i;e++)this.addPath(t,e,!s),this.openPathAndDuplicateStartVertex(n),n++}getSegmentFlags(t){return null!==this.m_curveData&&null!==this.m_curveData.m_segmentFlags?this.m_curveData.m_segmentFlags.read(t):1}getSegmentBuffer(t,s,n){const i=this.getPathIndexFromPointIndex(t),r=t-this.getPathStart(i);r>=this.getSegmentCountPath(i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("getSegmentBuffer"),this.getSegmentFromPath(i,r,s,n)}getSegmentTypeFromPath(t,e){const s=this.getPathStart(t)+e,n=this.getSegmentFlagsStreamRef();let r=1;switch(n&&(r=31&n.read(s)),r){case 1:return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine;case 2:return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier;case 4:return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc;case 8:return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2;case 16:return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}}ensureXYMonotoneSegments(){if(!this.m_curveData)return!1;let t=!1;for(let e=0,s=this.getPathCount();e<s;e++){const s=this.getPathStart(e),n=this.getPathEnd(e),i=n-s;for(let e=s;e<n;e++){const n=31&this.m_curveData.m_segmentFlags.read(e);if(1===n)continue;2!==n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("ensure_xy_monotone_segments");const r=(e-s+1)%i+s,o=this.m_curveData.m_segmentParamIndex.read(e),h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);h[0]=this.getXY(e),h[3]=this.getXY(r),h[1].x=this.m_curveData.m_segmentParams.read(o),h[1].y=this.m_curveData.m_segmentParams.read(o+1),h[2].x=this.m_curveData.m_segmentParams.read(o+2),h[2].y=this.m_curveData.m_segmentParams.read(o+3),Fe(h)&&(t=!0,this.m_curveData.m_segmentParams.write(o,h[1].x),this.m_curveData.m_segmentParams.write(o+1,h[1].y),this.m_curveData.m_segmentParams.write(o+2,h[2].x),this.m_curveData.m_segmentParams.write(o+3,h[2].y))}}return t&&this.notifyModifiedFlags(2001),t}buildRasterizedGeometryAccelerator(t,e){return!1}buildQuadTreeAccelerator(t){if(this.m_accelerators||(this.m_accelerators=new Vs),null!==this.m_accelerators.getQuadTree())return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTree(null);const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.F)(this);return this.m_accelerators.setQuadTree(e),!0}buildQuadTreeForPathsAccelerator(t){if(this.m_accelerators||(this.m_accelerators=new Vs),null!==this.m_accelerators.getQuadTreeForPaths())return!0;this.ensureUniqueAccelerators(),this.m_accelerators.setQuadTreeForPaths(null);const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.G)(this);return this.m_accelerators.setQuadTreeForPaths(e),!0}updateCurveCounter(t){this.modifyCurveCounter(t-this.getCurveCount())}removeAllCurvesFromGlobalCounter(){this.m_curveData&&(Hs.st_totalCurveCount-=this.m_curveData.m_curveCount,this.m_curveData.m_curveCount=0,this.m_curveData.m_bezierCount=0,this.m_curveData.m_arcCount=0,this.m_curveData.m_bezier2Count=0,this.m_curveData.m_rbezier2Count=0,this.m_curveData.m_curveParamWritePoint=0)}modifyCurveCounter(t){t&&(this.m_curveData||(this.m_curveData=new Zs),Hs.st_totalCurveCount+=t,this.m_curveData.m_curveCount+=t)}getCurveCount(){return this.m_curveData?this.m_curveData.m_curveCount:0}incCurveType(t,e){this.m_curveData||(this.m_curveData=new Zs),2&t?this.m_curveData.m_bezierCount+=e:4&t?this.m_curveData.m_arcCount+=e:8&t?this.m_curveData.m_rbezier2Count+=e:16&t&&(this.m_curveData.m_bezier2Count+=e)}getCurveWritePoint(){return null!==this.m_curveData?this.m_curveData.m_curveParamWritePoint:0}initSegmentData(t){null===this.m_curveData&&(this.m_curveData=new Zs);const e=this.m_reservedPointCount>0?this.m_reservedPointCount:this.m_pointCount;null===this.m_curveData.m_segmentParamIndex&&(this.m_curveData.m_segmentFlags=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(e,1),this.m_curveData.m_segmentParamIndex=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(e,-1));const s=this.m_curveData.m_curveParamWritePoint+t;null===this.m_curveData.m_segmentParams?this.m_curveData.m_segmentParams=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(s):s!==this.m_curveData.m_segmentParams.size()&&this.m_curveData.m_segmentParams.resize(s,0),this.m_curveData.m_segmentFlags.size()<e&&(this.m_curveData.m_segmentFlags.resize(e,1),this.m_curveData.m_segmentParamIndex.resize(e,-1))}updateCurveWritePoint(t){null===this.m_curveData&&(this.m_curveData=new Zs),this.m_curveData.m_curveParamWritePoint=t}updateOGCFlagsHelper(){const t=this.getPathCount();if(0===t)return;const e=this.m_pathFlags;let s=0;for(let n=0;n<t;n++){const t=this.m_cachedRingAreas2D.read(n);0===s&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(t)),t*s>0||0===s?e.setBits(n,8):e.clearBits(n,8)}}updateOGCFlagsProtected(){this.hasDirtyFlag(16)&&(this.updateRingAreas2DProtected(),this.updateOGCFlagsHelper(),this.setDirtyFlagProtected(16,!1))}replaceSegment(t,n,i){(t<0||t>=this.getPointCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Multi_path_impl.replace_segment"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n.isCurve());const r=this.getPathIndexFromPointIndex(t),o=this.getPathStart(r),a=(t-o+1)%this.getPathSize(r)+o;{const e=this.getXY(t),i=this.getXY(a),r=!e.isEqualPoint2D(n.getStartXY())||!i.isEqualPoint2D(n.getEndXY());(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!r)}this.replaceSegmentImpl(t,a,n,i)}replaceSegmentImpl(t,e,n,i){const r=n.getDescription();this.mergeVertexDescription(r);const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(32,Number.NaN),a=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:r,attribBuffer:o,initDefaultValues:!1}),h=null===this.m_curveData?1:31&this.m_curveData.m_segmentFlags.read(t),u=ks(h),m=Bs(n);let l,c=!1;u>=m?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(null!==this.m_curveData),c=!0,l=this.m_curveData.m_segmentParamIndex.read(t)):(this.initSegmentData(m),c=!1,l=this.m_curveData.m_curveParamWritePoint);const g=n.getGeometryType(),d=Zs.toSegType(g);i||(n.queryStart(a),this.setPointByValNoCurves(t,a),n.queryEnd(a),this.setPointByValNoCurves(e,a)),this.m_curveData.m_segmentParamIndex.write(t,1!==d?l:-1),this.m_curveData.m_segmentFlags.write(t,d),1!==d&&n.writeInBufferStream(this.m_curveData.m_segmentParams,l),c||(this.m_curveData.m_curveParamWritePoint+=m),h!==d&&(this.incCurveType(h,-1),this.incCurveType(d,1),this.modifyCurveCounter(1===h?1:-1))}setAttributeImpl(t,s,n){if(this.addAttribute(t),!this.isEmpty())if(this.hasNonLinearSegments()&&0===t){(s<0||s>1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T,i=0===s?n:0,r=0===s?0:1;t.setShiftCoords(i,r),0===s?t.xx=0:t.yy=0,this.applyTransformation(t)}else super.setAttributeImpl(t,s,n)}}Hs.st_totalCurveCount=0;class Us{constructor(t,e){this.m_segIter=null,this.m_quadTree=null,this.m_qtIter=null,this.m_extentOfInterest=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D(e),this.m_bfirst=!0,this.m_prevIndex=-100,this.m_parent=t}nextSegment(){return this.m_bfirst&&this.prepare_(),this.m_quadTree?this.nextSegmentQt():this.nextSegmentNoQt()}getPathIndex(){return this.m_segIter.getPathIndex()}getStartPointIndex(){return this.m_segIter.getStartPointIndex()}getEndPointIndex(){return this.m_segIter.getEndPointIndex()}isClosingSegment(){return this.m_segIter.isClosingSegment()}isPathClosed(){return this.m_segIter.isPathClosed()}prepare_(){const t=this.m_parent.getAccelerators();t&&(this.m_quadTree=t.getQuadTree(),this.m_quadTree&&(this.m_qtIter=this.m_quadTree.getSortedIterator(this.m_extentOfInterest,0))),this.m_segIter=this.m_parent.querySegmentIterator()}nextSegmentQt(){this.m_bfirst=!1;const t=this.m_qtIter.next();if(-1===t)return null;const e=this.m_quadTree.getElement(t);(e!==this.m_prevIndex+1||this.m_segIter.isLastSegmentInPath())&&(this.m_segIter.resetToVertex(e,this.m_segIter.getPathIndex()),this.m_prevIndex=e);return this.m_segIter.nextSegment()}nextSegmentNoQt(){for(;;){if(!this.m_bfirst&&this.m_segIter.hasNextSegment()){const t=this.m_segIter.nextSegment(),e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();if(t.queryLooseEnvelope(e),!e.isIntersecting(this.m_extentOfInterest))continue;return t}if(this.m_bfirst=!1,!this.m_segIter.nextPath())return null}}}class Os extends Hs{constructor(t){t?t.vd?(super({vd:t.vd,bPolygon:!1}),this.m_segmentBufferCTor=fm):t.copy?(super({vd:t.copy.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=fm,t.copy.copyTo(this)):t.move?(super({move:t.move}),this.m_segmentBufferCTor=fm):t.start?(super({vd:t.start.getDescription(),bPolygon:!1}),this.m_segmentBufferCTor=fm,this.startPathPoint(t.start),this.lineToPoint(t.end)):t.path?(super({bPolygon:!1}),this.m_segmentBufferCTor=fm,this.addPathPoint2D(t.path,t.pointCount,t.bForward)):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("bad constructor arg"):(super({bPolygon:!1}),this.m_segmentBufferCTor=fm)}getBoundary(){return Ks(this)}assignCopy(t){return this!==t&&t.copyTo(this),this}assignMove(t){return t.copyTo(this),this}getGeometryType(){return Os.type}getDimension(){return 1}createInstance(){return new Os({vd:this.getDescription()})}equals(t,e){return this.equalsBase(t,e)}}Os.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline;var Qs=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G;function Js(t,e){if(t.isEmpty())return!1;const s=t.getGeometryType();if(s===Qs.enumPolygon)return 0!==t.calculateArea2D();if(s===Qs.enumPolyline)return $s(t.getImpl(),e,!0).bNotEmpty;if(s===Qs.enumEnvelope)return!0;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.f)(s))return!!t.isClosed();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.e)(s))return!1;if(s===Qs.enumGeometryCollection){const s=t;for(let t=0,n=s.getGeometryCount();t<n;t++)if(Js(s.getGeometry(t),e))return!0;return!1}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}function Ks(t,e){const s=t.getGeometryType();if(s===Qs.enumPolygon){const e=new Os({vd:t.getDescription()});return t.isEmpty()||t.copyToUnchecked(e),e}if(s===Qs.enumPolyline)return $s(t.getImpl(),e,!1).boundary;if(s===Qs.enumEnvelope){const e=new Os({vd:t.getDescription()});return t.isEmpty()||e.addEnvelope(t,!1),e}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.f)(s)){const e=new Ee({vd:t.getDescription()});if(!t.isEmpty()&&!t.isClosed()){const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;e.reserve(2),t.queryStart(s),e.add(s),t.queryEnd(s),e.add(s)}return e}if(s===Qs.enumGeometryCollection){const s=t;let n=null;for(let i=0,r=s.getGeometryCount();i<r;i++){const r=Ks(s.getGeometry(i),e);if(null!==r){null===n&&(n=t.createInstance());const e=r;n.addGeometry(e)}}return n}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.e)(s))return new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:t.getDescription()});(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}function $s(t,e,s){const n=!1,i=t;let r=null;if(s||(r=new Ee({vd:i.getDescription()})),!i.isEmpty()){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.A(0);for(let e=0,s=i.getPathCount();e<s;e++){if(i.getPathSize(e)>0&&!i.isClosedPathInXYPlane(e)){const s=i.getPathStart(e);t.add(s);const n=i.getPathEnd(e)-1;t.add(n)}}if(t.size()>0){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.B,n=i.getAttributeStreamRef(0),o={userSort(t,e,s){const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();s.sort(t,e,((t,e)=>(n.queryPoint2D(2*t,i),n.queryPoint2D(2*e,r),i.compare(r))))},getValue:t=>n.read(2*t+1)};e.sort(t,0,t.size(),o);let a=n.readPoint2D(2*t.read(0)),h=0,u=1;const m=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;for(let i=1,r=t.size();i<r;i++){const e=n.readPoint2D(2*t.read(i));if(e.isEqualPoint2D(a))t.read(h)>t.read(i)?(t.write(h,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)()),h=i):t.write(i,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)()),u++;else{if(1&u){if(s)return{bNotEmpty:!0,boundary:new Ee({})}}else t.write(h,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)());a=e,h=i,u=1}}if(1&u){if(s)return{bNotEmpty:!0,boundary:new Ee({})}}else t.write(h,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)());if(!s){t.sort(0,t.size());for(let e=0,s=t.size();e<s&&t.read(e)!==(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)();e++)i.getPointByVal(t.read(e),m),r.add(m)}}}return s?{bNotEmpty:n,boundary:new Ee({})}:{bNotEmpty:n,boundary:r}}function tn(t,e,n,i){const r=4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*(Math.abs(e.vmin)+Math.abs(e.vmax)),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)();if(1===t.getMaxDerivative()){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0);const o=hn(t,0,e,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)(),r);return i[0]=o.root,o.cRoots}let a,h=[];const u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(e.vmin-r,e.vmax+r);h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(u.vmin,u.vmax));let m=0;for(let s=t.getMaxDerivative()-1;s>=0;s--){a=h,h=[];for(let u=0,l=a.length;u<l;u++){if(a[u][0]<a[u][1]){let l,c,g;if(s===t.getMaxDerivative()-1?({root:l,funcAtRoot:c,cRoots:g}=hn(t,s,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(a[u][0],a[u][1]),o,.5*r)):({root:l,funcAtRoot:c,cRoots:g}=un(t,s,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(a[u][0],a[u][1]),o,.5*r)),1===g){if(0===s){if(m<n){if(a[u][0]<=e.vmin&&a[u][1]>=e.vmin&&l!==e.vmin){0===t.getValue(0,e.vmin)&&(l=e.vmin)}if(a[u][0]<=e.vmax&&a[u][1]>=e.vmax&&l!==e.vmax){0===t.getValue(0,e.vmax)&&(l=e.vmax)}i[m]=e.snapClip(l),m>0?i[m]-i[m-1]>r&&m++:m++}}else{const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();t[0]=a[u][0],t[1]=l,h.push(t);const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();e[0]=l,e[1]=a[u][1],h.push(e)}continue}}h.push(a[u])}}return m}function en(t,e,s,n){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,r=cn(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e),s,i);return n[0]=i.value(),r}function sn(t,e,s,n,i,r){const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),a=gn(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s),n,i,o);return r[0]=o[0].value(),r[1]=o[1].value(),a}function nn(t,e,s,n,i,r,o){const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3),h=dn(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(n),i,r,a);return o[0]=a[0].value(),o[1]=a[1].value(),o[2]=a[2].value(),h}function rn(t,e,s,n,i,r,o,a){return an(t,e,s,n,i,r,o,a)}function on(t,e,s,n,i,r){return ln(t,e,s,n,i,r)}function an(t,e,s,n,i,r,o,a){const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(s*s,Number.NaN);h.fill(0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(a,n,0,0,s);const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(s,Number.NaN),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(s,Number.NaN),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(s,Number.NaN);let c=t(a,s,e);const g=100;let d=0;for(d=0;d<g;d++){const n=c;for(let t=0;t<s;++t)m[t]=a[t];if(d%s===0){h.fill(0);for(let t=0;t<s;t++)h[t*s+t]=1}let o=0,g=0;for(let m=0;m<s;++m){for(let t=0;t<s;++t)u[t]=h[m*s+t];const n=c;c=mn(t,e,a,u,i,r,s);const l=n-c;l>o&&(g=m,o=l)}for(let t=0;t<s;t++)u[t]=a[t]-m[t],l[t]=a[t]+(a[t]-m[t]);const _=t(l,s,e);if(_<n){if(2*(n-2*c+_)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(n-c-o)<(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(n-_)*o){c=mn(t,e,a,u,i,r,s);for(let t=0;t<s;++t)h[g*s+t]=h[(s-1)*s+t],h[(s-1)*s+t]=u[t]}}if(n<=c)return t(a,s,e)}return c}function hn(t,e,s,n,i){const r={root:0,funcAtRoot:0,cRoots:0};let o=s.vmin,a=s.vmax,u=0,m=Number.MAX_VALUE,l=t.getValue(e,o),c=t.getValue(e,a),g=0,d=0,_=0;if(l>=0&&c>=0||l<=0&&c<=0)return Math.abs(l)<Math.abs(c)?(r.funcAtRoot=l,r.root=o,r.cRoots=0===l?1:0,r):(r.funcAtRoot=c,r.root=a,r.cRoots=0===c?1:0,r);Math.abs(l)<Math.abs(c)&&(a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,o=a),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(l,l=c)),u=o,g=l;let p=!0,f=0;for(;0!==c&&Math.abs(o-a)>n*Math.abs(a)+i;f++){let s=f>64;if(!s){d=l!==g&&c!==g?o*c*g/((l-c)*(l-g))+a*l*g/((c-l)*(c-g))+u*l*c/((g-l)*(g-c)):a-c*(a-o)/(c-l);const t=(3*o+a)/4;if(s=!(d>t&&d<a||d>a&&d<t),!s){const t=n*Math.abs(a)+i;if(p){const e=Math.abs(a-u);s=Math.abs(d-a)>=.5*e||e<t}else{const e=Math.abs(u-m);s=Math.abs(d-a)>=.5*e||e<t}}}if(s?(d=(o+a)/2,p=!0):p=!1,_=t.getValue(e,d),0===_)return r.root=d,r.funcAtRoot=_,r.cRoots=1,r;if(!s){const s=o-d,n=d-a;if(Math.abs(s)>10*Math.abs(n)){let s=a+3*n;for(let n=0;n<2;n++){const n=t.getValue(e,s);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(l)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(n)>0?(o=s,l=n):s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(o,a,.75)}}else if(Math.abs(n)>10*Math.abs(s)){let n=o-3*s;for(let s=0;s<2;++s){const s=t.getValue(e,n);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(c)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(s)>0?(a=n,c=s):n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(o,a,.25)}}}m=u,u=a,g=c,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(l)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(_)<0?(a=d,c=_):(o=d,l=_),Math.abs(l)<Math.abs(c)&&(a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,o=a),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(l,l=c)),128===f&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("Root_finder iterations exceeded")}return r.root=a,r.funcAtRoot=c,r.cRoots=1,r}function un(t,e,s,n,i){const r={root:0,funcAtRoot:0,cRoots:0};let o=s.vmin,a=t.getValue(e,o),u=s.vmax,m=t.getValue(e,u);if(a>=0&&m>=0||a<=0&&m<=0)return Math.abs(a)<Math.abs(m)?(r.funcAtRoot=a,r.root=o,r.cRoots=0===a?1:0,r):(r.funcAtRoot=m,r.root=u,r.cRoots=0===m?1:0,r);m<0&&(m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a,a=m),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,o=u));let l=.5*(o+u),c=Math.abs(u-o),g=c,d=t.getValue(e,l),_=t.getValue(e+1,l);const p=1,f=4;let P=f;const y=2;let x=1,C=0,v=0,b=p;const S=32;let E=0;for(;++E<100;){let s;E>S||0===_||b===y&&C>1||b===p&&P<f?(b=p,x>1&&x--):(b=y,v>1&&Math.abs(2*d)>Math.abs(c*_)&&x++),c=g;let n=!1;if(b===p)do{if(v>2){const t=16*Math.abs(c);if(.5*Math.abs(o-u)>t){const e=Math.min(o,u),n=Math.max(o,u);if(l===e){s=l,l=e+t,g=l-s;break}if(l===n){s=l,l=n-t,g=l-s;break}}}g=.5*(u-o),s=l,l=o+g,n=o===l||u===l}while(0);else for(;;){g=x*d/_,s=l,l-=g,n=l===s;const t=Math.min(o,u),e=Math.max(o,u);if(l<t){if(x>1){l=s,x--;continue}g=s-t,l=t}else if(l>e){if(x>1){l=s,x--;continue}g=s-e,l=e}break}if(n||Math.abs(g)<i){s!==l&&(d=t.getValue(e,l));break}d=t.getValue(e,l),_=t.getValue(e+1,l);const r=o,h=u;d<0?(a=d,o=l):(m=d,u=l),b===y&&(o===r&&u===h||v>1&&Math.abs(g)>=.5001*Math.abs(c))?C++:C=0,b===p?(P++,v=0):(P=0,v++)}return 100===E&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("Root_finder iterations exceeded"),r.root=l,r.funcAtRoot=d,r.cRoots=1,r}function mn(t,e,s,n,i,r,o){const a=n.slice(0,o);let h=0;for(let f=0;f<o;f++)h+=n[f]*n[f];if(h=Math.sqrt(h),h>0)for(let f=0;f<o;f++)a[f]/=h;let u=Number.NEGATIVE_INFINITY,m=Number.POSITIVE_INFINITY;{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(o,0);for(let e=0;e<o;e++)t[e]=e;t.sort(((t,e)=>{const s=Math.abs(a[t]),n=Math.abs(a[e]);return s<n?-1:s>n?1:0}));for(let e=0;e<o;e++){const n=t[e];if(0===a[n])continue;let o=(i[n]-s[n])/a[n],h=(r[n]-s[n])/a[n];h<o&&(h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,o=h)),o>u&&(u=o),h<m&&(m=h)}}let l=0;const c=(Math.abs(u)+Math.abs(m))*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*100,g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(o,Number.NaN),d=a.slice();function _(n,i){for(let t=0,e=o;t<e;t++)g[t]=s[t]+n*d[t];return t(g,o,e)}c>0&&(l=on(_,null,u,0,m,c));const p=_(l);for(let f=0,P=o;f<P;f++)s[f]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(g[f],i[f],r[f]);return p}function ln(t,e,s,n,i,r){const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.aq)();let a=n,h=t(a,e),u=s,m=i,l=t(u,e),c=t(m,e);h>l&&(h=l,a=u),h>c&&(h=c,a=m);let g=u,d=m,_=l,p=c;_>p&&(_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(p,p=_),d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(g,g=d));let f=a-g,P=g-d;const y=.5*Math.min(r,m-u),x=2*y,C=100;let v,b=0;for(v=0;v<C&&!(m-u<=x);++v){const s=u+.5*(m-u);let n=b>0;if(!n&&Math.abs(P)<=y&&(n=!0,b=3),!n){const t=a-g,e=a-d,s=t*(h-p);let i=e*(h-_),r=e*i-t*s;i=2*(i-s),i>0&&(r=-r),i=Math.abs(i),0===i||Math.abs(r)>=Math.abs(i*P/2)||r<=i*(u-a)||r>=i*(m-a)?(n=!0,b=3):(P=f,f=r/i)}n&&(P=a>=s?u-a:m-a,f=o*P,b--);let i=a+f;i<u+y?i=u+y:i>m-y&&(i=m-y);const r=t(i,e);r<h?(i>=a?(u=a,l=h):(m=a,c=h),d=g,g=a,a=i,p=_,_=h,h=r):(i<a?(u=i,l=r):(m=i,c=r),r<=_||g===a?(d=g,g=i,p=_,_=r):(r<=p||d===a||d===g)&&(d=i,p=r))}return a}function cn(t,e,s,n){return t.isZero()?e.isZero()?-1:0:(n.setE(e.clone().negateThis().divThisE(t)),s.containsCoordinate(n.value())?1:0)}function gn(t,e,s,n,i,r){if(0===t.value()){if(i)return r[0].set(1),n.containsCoordinate(r[0].value())?1:0;return cn(e,s,n,r[0])}if(i){let e=2;return r[0].set(1),r[1].setE(s).divThisE(t),r[1].eq(r[0])&&(r[1].set(1),e=1),n.containsCoordinate(r[1].value())||(e=1),n.containsCoordinate(r[0].value())||(e--,r[0].setE(r[1])),2===e&&r[0].value()>r[1].value()&&(r[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(r[0],r[0]=r[1])),e}const o=e.clone().sqrThis().subThisE(t.clone().mulThisE(s).mulThisE(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a6));if(o.lt(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.J))return 0;const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.value()>=0?1:-1),h=o.clone().sqrtThis(),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(-.5).mulThisE(e.clone().addThisE(a.clone().mulThisE(h)));let m=0;r[0].setE(u.divE(t));const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(r[0].value()),c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.value()).mulE(l).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.value()).mulE(l).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s.value())));return c.isZero()||Cn(r[0],t,e,s,r[0]),n.containsCoordinate(r[0].value())&&m++,0!==h.value()&&0!==u.value()?(r[m].assign(s.divE(u)),l.set(r[m].value()),c.assign(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.value()).mulE(l).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.value()).mulE(l).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s.value())))),c.isZero()||Cn(r[m],t,e,s,r[m]),n.containsCoordinate(r[m].value())&&m++,2===m&&r[0].value()>r[1].value()&&(r[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(r[0],r[0]=r[1])),m):m}function dn(t,e,s,n,i,r,o){if(0===t.value()){return gn(e,s,n,i,r,o)}if(r){let s=1;o[0].set(1);const r=o.slice(s),a=gn(t,e.addE(t),n.negate(),i,!1,r);if(a>0){s+=a;for(let t=1;t<s;t++)o[t].eq(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.I)&&(o[s-1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[t],o[t]=o[s-1]),s--)}const h=o.slice(0,s);h.sort(((t,e)=>t.value()<e.value()?-1:t.value()>e.value()?1:0));for(let t=0;t<s;++t)o[t]=h[t];return s}return vn(t,e,s,n,i,o)}function _n(t,s,n,i,r,o){return(o<s||s<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("nth_degree_real_roots"),bn(t,s,n,i,r)}function pn(t,e,s,n){return{coef0:t.clone(),coef1:e.clone(),coef2:s.clone(),coef3:n.clone(),calcF(t){return this.coef0.clone().mulThis(t).addThisE(this.coef1).mulThis(t).addThisE(this.coef2).mulThis(t).addThisE(this.coef3)},calcDF(t){return this.coef0.clone().mulThis(3).mulThis(t).addThisE(this.coef1.clone().mulThisByPower2(2)).mulThis(t).addThisE(this.coef2)},estimateError(t){const e=Math.abs(t),s=((this.coef0.eps()*e+this.coef1.eps())*e+this.coef2.eps())*e+this.coef3.eps()+this.calcF(t).eps(),n=this.coef0.clone().mulThis(t).mulThis(3).addThisE(this.coef1.clone().mulThis(2)).mulThis(t).addThisE(this.coef2);if(n.isZero()){const e=this.coef0.clone().mulThis(t).mulThis(6).addThisE(this.coef1.clone().mulThis(2));if(e.isZero()){const t=this.coef0.clone().mulThis(6);return Math.pow(6*s/Math.abs(t.value()),1/3)}return Math.sqrt(2*s/Math.abs(e.value()))}return s/Math.abs(n.value())}}}class fn{updateCoefs(t){if(this.lastDeriv1===t)return this.curCoefs=this.derivCoefs1,void(this.lastUsed=1);if(this.lastDeriv2===t)return this.curCoefs=this.derivCoefs2,void(this.lastUsed=2);let e;1===this.lastUsed?(e=this.derivCoefs2,this.lastDeriv2=t,this.lastUsed=2):(e=this.derivCoefs1,this.lastDeriv1=t,this.lastUsed=1),e.length=0;for(let s=0,n=this.truePower-t;s<=n;++s){e.push(this.coefs[s+t].clone());let n=s+t,i=n--;for(let e=1;e<t;e++)i*=n--;e[s].mulThis(i)}this.curCoefs=e}constructor(t,e,s,n){this.derivCoefs1=[],this.derivCoefs2=[],this.lastDeriv1=-1,this.lastDeriv2=-1,this.lastUsed=-1,this.curCoefs=null,this.coefs=t,this.power=e,this.truePower=0;for(let i=e;i>=1;i--)if(0!==this.coefs[i].value()){this.truePower=i;break}}getMaxDerivative(){return this.truePower+1}getValue(t,e){let s=this.coefs;0===t?s=this.coefs:(this.updateCoefs(t),s=this.curCoefs);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);let i=1;for(let r=0,o=this.truePower-t;r<=o;++r)n.pe(i*s[r].value()),i*=e;return n.getResult()}getError(t){const e=Math.abs(t),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0);for(let o=0,a=this.power;o<=a;++o)i.addThisE(this.coefs[o].mulE(n)),s.pe(n.value()*this.coefs[o].eps()),n.mulThis(e);s.pe(i.eps());let r=1;for(let o=1;o<=this.truePower;++o){r*=o,this.updateCoefs(o);const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0);for(let s=0,i=this.truePower-o;s<=i;++s)n.addThisE(this.curCoefs[s].mulE(e)),e.mulThis(t);if(!n.isZero())return Math.pow(r*s.getResult()/Math.abs(n.value()),1/o)}return 0}}function Pn(t,e,s,n,i,r){let o=t,a=e,h=a-o;if(!r){let s=n.calcF(t).value(),i=n.calcF(e).value();if((s>0||s>i)&&(a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,o=a),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s,s=i)),s>=0||i<=0)return!1}let u,m=!1,l=s,c=0;for(;c<100;c++){const t=n.calcF(l);if(u=n.calcDF(l),u.isZero())return!1;if(!t.value()||c>3&&t.isZero()){m=!0;break}r||(t.value()<0?o=l:a=l);const e=t.value()/u.value(),s=l-e;r||(s>=o&&s<=a||s>=a&&s<=o)&&Math.abs(e)<=.5*h?(l=s,h=Math.abs(e)):(h=Math.abs(.5*(a-o)),l=.5*(o+a))}return!!m&&(i.set(l,n.estimateError(l)),!0)}function yn(t,e,s,n,i,r,o,a){return Pn(t,e,s.value(),pn(n,i,r,o),a,!1)}class xn{constructor(t,e,s){this.coefs=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3),this.coefs[0].setE(t),this.coefs[1].setE(e),this.coefs[2].setE(s)}calcF(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t);return this.coefs[0].mulE(e).addE(this.coefs[1]).mulE(e).addE(this.coefs[2])}calcDF(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.st_mulByPower2(this.coefs[0],2).mulE(e).addE(this.coefs[1])}estimateError(t){const e=Math.abs(t),s=(this.coefs[0].eps()*e+this.coefs[1].eps())*e+this.coefs[2].eps()+this.calcF(t).eps(),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(2).mulE(this.coefs[0]).mul(t).addE(this.coefs[1]);if(n.isZero()){const t=this.coefs[0].value();return Math.sqrt(s/Math.abs(t))}return s/Math.abs(n.value())}}function Cn(t,e,s,n,i){return Pn(0,0,t.value(),new xn(e,s,n),i,!0)}function vn(t,e,s,n,i,r){const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3);let a=0;const u=e.negate().divThisE(t.clone().mulThis(3));i.containsCoordinate(u.value())&&(o[0].setE(u),a=1);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),l=gn(t.mul(3),e.mul(2),s,i,!1,m);if(l<0)return n.isZero()?-1:0;for(let h=0;h<l;h++)i.containsCoordinate(m[h].value())&&o[a++].setE(m[h]);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(o,0,a,((t,e)=>t.value()<e.value()?-1:t.value()>e.value()?1:0));const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,5);c[0].set(i.vmin);for(let h=0;h<a;h++)c[1+h].setE(o[h]);c[1+a].set(i.vmax);const g=a+2;let d=1,_=0;{const i=c[0].clone();if(t.clone().mulThisE(i).addThisE(e).mulThisE(i).addThisE(s).mulThisE(i).addThisE(n).isZero()){const o=pn(t,e,s,n);i.setError(o.estimateError(i.value())),r[_]=i,_++,d++}}for(let p=d;p<g;p++){const o=c[p].clone(),a=t.clone().mulThisE(o).addThisE(e).mulThisE(o).addThisE(s).mulThisE(o).addThisE(n).isZero();if(a||!c[p].eq(c[p-1])){if(a||yn(c[p-1].value(),c[p].value(),c[p-1].clone().addThisE(c[p]).divThisByPower2(2),t,e,s,n,o)){if(_>0&&o.eq(r[_-1]))continue;if(_>=3&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("cubic_polynomial_solver_too_many_roots"),a){const i=pn(t,e,s,n);o.setError(i.estimateError(o.value()))}r[_]=o,_++}if(c[p].value()===i.vmax)break;a&&p++}}return _}function bn(t,e,s,n,i,r){const o=new fn(t,e,s,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)());let a=0;if(2===o.truePower)a=gn(t[2],t[1],t[0],s,n,i);else if(1===o.truePower)a=cn(t[1],t[0],s,i[0]);else{if(0===o.truePower)return t[0].value()?0:-1;{const t=[];t.length=e,a=tn(o,s,e,t);for(let e=0;e<a;e++)i[e].set(t[e])}}for(let h=0;h<a;h++)i[h].setError(o.getError(i[h].value()));return a}var Sn=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class En extends gs{constructor(t){return void 0===t||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.W)(t,"vd")?(super({vd:t?.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),void(this.m_weights=[1,0,1])):(t.fromPoint&&t.weight?t={fromPoint:t.fromPoint,controlPoint1:t.controlPoint1,toPoint:t.toPoint,weight0:1,weight1:t.weight,weight2:1}:t.points&&t.weight?t={fromPoint:t.points[0],controlPoint1:t.points[1],toPoint:t.points[2],weight0:1,weight1:t.weight,weight2:1}:t.points&&t.weights&&(t={fromPoint:t.points[0],controlPoint1:t.points[1],toPoint:t.points[2],weight0:t.weights[0],weight1:t.weights[1],weight2:t.weights[2]}),t.fromPoint&&t.weight0?(super({start:t.fromPoint,end:t.toPoint}),(t.weight0<=0||t.weight1<0||t.weight2<=0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("weights"),this.m_cp=t.controlPoint1.clone(),void(this.m_weights=[t.weight0,t.weight1,t.weight2])):t.copy?(super(t),this.m_cp=t.copy.m_cp.clone(),void(this.m_weights=t.copy.m_weights.slice())):t.move?(super(t),this.m_cp=t.move.m_cp.clone(),void(this.m_weights=t.move.m_weights.slice())):void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("unexpected constructor param"))}getBoundary(){return Ks(this)}assignMove(t){return this}assignCopy(t){return t.copyTo(this),this}construct(t,e,s,n){this.dropAllAttributes(),this.setCpsAndWeights(t,e,s,1,n,1),la(this)}constructWeights(t,e,s,n,i,r){this.dropAllAttributes(),this.setCpsAndWeights(t,e,s,n,i,r),la(this)}constructArray(t,e){this.construct(t[0],t[1],t[2],e)}constructArrayWeights(t,e){this.dropAllAttributes(),this.setCpsAndWeightsArray(t,e),la(this)}convertToStandardForm(){}getStandardFormWeight(){return this.m_weights[1]/Math.sqrt(this.m_weights[0]*this.m_weights[2])}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2}queryEnvelope(t){if(t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D){if(t.setCoords(this.getStartXY()),t.mergeNe(this.getEndXY()),t.contains(this.m_cp))return;const e=Va(this);if(null!==e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(const n of e.specialPoints)this.queryCoord2D(n,s),t.mergeNe(s)}else{const e=[],s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(s),da(s,this.m_weights,e);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(const i of e)this.queryCoord2D(i,n),t.mergeNe(n)}}}applyTransformation(t){if(t instanceof _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return this.queryControlPoints(e),t.transformPoints2D(e,3,e),this.setStartXY(e[0]),this.m_cp.assign(e[1]),this.setEndXY(e[2]),void this.afterCompletedModification()}}createInstance(){return new En({vd:this.m_description})}calculateLength2D(){return _a(this,1,!1)}calculateLowerLength2D(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){if(this.m_weights[1]>0){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.m_cp)+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getEndXY(),this.m_cp)}return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY())}queryCoord2D(t,e){return this.queryCoord2DExtension(t,e,!0)}queryCoord2DE(t,e){lh(this,t,e)}queryCoord2DExtension(t,e,s){if(s){if(t<0){return void _s(new pm({start:this.getStartXY(),end:this.getStartXY().add(this.getTangent(0).getUnitVector())}),t,e)}if(t>1){return void _s(new pm({start:this.getEndXY(),end:this.getEndXY().add(this.getTangent(1).getUnitVector())}),t-1,e)}}const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(n),_h(n,this.m_weights,t,e)}getCoordX(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtension(t,e,!0),e.x}getCoordY(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtension(t,e,!0),e.y}cut(t,e,s){const n=new fm;return this.queryCut(t,e,n,s),n.releaseSegment()}queryCut(t,e,s,n){const i=s.createQuadraticRationalBezier();if(this.cutBezierIgnoreAttributes(t,e,i),n)return;i.assignVertexDescription(this.m_description);const r=this.m_description.getAttributeCount();if(r>1){for(let e=1;e<r;e++){const s=this.m_description.getSemantics(e),n=Sn.getComponentCount(s);for(let e=0;e<n;e++){const n=this.getAttributeAsDbl(t,s,e);i.setStartAttribute(s,e,n)}}for(let t=1;t<r;t++){const s=this.m_description.getSemantics(t),n=Sn.getComponentCount(s);for(let t=0;t<n;t++){const n=this.getAttributeAsDbl(e,s,t);i.setEndAttribute(s,t,n)}}}}queryDerivative(t,e){Ea(this,t,e)}cutBezierIgnoreAttributes(t,s,n){(t<0||s>1||t>s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Quadratic_rational_bezier.cut_bezier_ignore_attributes");const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(i);const r=[0,0,0];Qa(i,this.m_weights,t,s,i,r),n.setControlPointsAndWeights(i,r)}splitBezierIgnoreAttributes(t,e,s){}getAttributeAsDbl(t,e,s){if(0===e)return 0===s?this.getCoordX(t):this.getCoordY(t);const n=this.calculateLength2D(),i=n>0?this.tToLength(t)/n:0,r=Sn.getInterpolation(e),o=this.getStartAttributeAsDbl(e,s),a=this.getEndAttributeAsDbl(e,s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.V)(r,o,a,i,Sn.getDefaultValue(e))}getClosestCoordinate(t,e){return Ra(this,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),e,-1)}getClosestCoordinateOnInterval(t,e,s=-1){return Ra(this,t,e,!1,s)}getYMonotonicParts(t,e){return this.getMonotonicParts(t,e)}getMonotonicParts(t,n){t.length<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const i=ga(this);let r=0;if(2===i.specialPointsCount())return 0;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=i.specialPointsCount()-1);for(let e=1,s=i.specialPointsCount();e<s;++e)this.queryCut(i.specialPoints[e-1],i.specialPoints[e],t[r],n),r++;for(let e=0;e<r;++e){Za(t[e].get())}return r}intersectionWithAxis2D(t,e,s,n){s&&(s.length=9),n&&(n.length=9);const i=new Array(3),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);let a=0;const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);if(this.queryControlPoints(h),t){if(i[0]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[0].y).sub(e).mul(this.m_weights[0]),i[1]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[1].y).sub(e).mul(this.m_weights[1]),i[2]=i[0].subE(i[1].mul(2)).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[2].y).sub(e).mul(this.m_weights[2])),i[1]=i[1].subE(i[0]).mulThisByPower2(2),a=gn(i[2],i[1],i[0],o,!1,r),s)for(let u=0;u<a;u++)s[u]=this.getCoordX(r[u].value())}else if(i[0]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[0].x).sub(e).mul(this.m_weights[0]),i[1]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[1].x).sub(e).mul(this.m_weights[1]),i[2]=i[0].subE(i[1].mul(2)).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(h[2].x).sub(e).mul(this.m_weights[2])),i[1]=i[1].subE(i[0]).mulThisByPower2(2),a=gn(i[2],i[1],i[0],o,!1,r),s)for(let u=0;u<a;u++)s[u]=this.getCoordY(r[u].value());if(n)for(let u=0;u<a;u++)n[u]=r[u].value();else s&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(s,0,a,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8);return a}intersectionOfYMonotonicWithAxisX(t,e){if(this.m_YStart===this.m_YEnd)return t===this.m_YStart?e:Number.NaN;if(t===this.m_YStart)return this.m_XStart;if(t===this.m_YEnd)return this.m_XEnd;const n=[Number.NaN,Number.NaN],i=this.intersectionWithAxis2D(!0,t,n,null);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(2!==i),-1===i?e:n[0]}isCurve(){return!0}isDegenerate(t){return Re(this,t)}isDegenerate3D(t,e){return!1}queryLooseEnvelope(t){if(t instanceof _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D)return t.setCoords({pt:this.getStartXY()}),t.mergeNe(this.m_cp),void t.mergeNe(this.getEndXY())}clone(t){const e=this.createInstance();return this.copyTo(e),e}queryInterval(t,e){if(0===t){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();this.queryEnvelope(t);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();return 0===e?t.queryIntervalX(s):t.queryIntervalY(s),s}return super.queryInterval(t,e)}queryLooseEnvelopeOnInterval(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(s);const n=[0,0,0];Qa(s,this.m_weights,t.vmin,t.vmax,s,n),e.setFromPoints(s,3)}changeEndPoints2D(t,e){if(t.isEqual(this.m_XStart,this.m_YStart)&&e.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(t),this.setEndXY(e),s?this.m_cp.setCoordsPoint2D(t):n&&this.m_cp.setCoordsPoint2D(e),this.normalizeAfterEndpointChange()}tToLength(t){return _a(this,t,!0)}lengthToT(t){return Ta(this,t)}calculateWeightedAreaCentroid2D(t){const e=Na(this),s=Ia(this);return e.x+=(this.getStartX()-t.x)*s,e.y+=(this.getStartY()-t.y)*s,e}calculateWeightedCentroid2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.isDegenerate(0)?(t.setCoords(0,0),t):Fa(this)?(t.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),t):(t.assign(Ua(this,1)),t)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(t){this.m_cp.setCoordsPoint2D(t),this.afterCompletedModification()}queryWeights(t){for(let e=0;e<3;++e)t[e]=this.m_weights[e]}queryCoord2DMP(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return this.queryControlPoints(s),gh(s.map((t=>Xe.constructPoint2D(t))),this.m_weights.map((t=>_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(t))),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(t),e)}setWeights(t){}queryControlPoints(t){t[0].assign(this.getStartXY()),t[1].assign(this.m_cp),t[2].assign(this.getEndXY())}queryControlPointsHelper(t){return this.queryControlPoints(t),3}setControlPointsAndWeights(t,e){this.setCpsAndWeightsArray(t,e),this.afterCompletedModification()}getTangent(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return this.queryControlPoints(e),wa(e,this.m_weights,t)}getDerivative(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(t,0,1),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return pa(this,1,e,s),s[1]}getCurvature(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);pa(this,2,t,e);const s=e[1].sqrLength();if(0===s)return Number.NaN;e[1].divThis(Math.sqrt(s));return e[1].crossProduct(e[2])/s}isIntersecting(t,e,s){return!1}isIntersectingPoint(t,e,s){return!1}isIntersectingPoint3D(t,e,s,n,i=1){return!1}isMonotoneQuickAndDirty(){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return this.queryControlPoints(t),ja(t)}getMonotonicPartParams(t,s){const n=ga(this),i=n.specialPointsCount();if(!s)return n.specialPointsCount();t<i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");for(let e=0;e<i;e++)s[e]=n.specialPoints[e];return i}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=this.m_YEnd),this.m_weights[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_weights[0],this.m_weights[0]=this.m_weights[2]);for(let t=0,e=this.m_description.getTotalComponentCount()-2;t<e;t++)this.m_attributes[t+e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_attributes[t],this.m_attributes[t]=this.m_attributes[t+e]);this.m_cachedValues=null}}isLine(){return!1}isDegenerateToLineHelper(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e);const s=e[2].sub(e[0]),n=s.length();if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[2],e[1])-n>t)return!1;const i=t,r=e[1].clone();r.subThis(e[0]);return!(Math.abs(r.crossProduct(s))/n>i)}copyIgnoreAttributes(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e);const s=[0,0,0];this.queryWeights(s),t.setControlPointsAndWeights(e,s)}calculateArea2DHelper(){return Ia(this)}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)+this.m_cp.norm(1)}absNormXYZ(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}queryEnvelopeW(t,e){Ga(this,t,e)}setSegmentFromCoordsForStitcher(t,e){const s=[0,0,0];this.queryWeights(s),this.constructWeights(t[0],this.getControlPoint1(),t[e-1],s[0],s[1],s[2])}writeInBufferStream(t,e){const s=new Float64Array(5);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,s[2]=this.m_weights[0],s[3]=this.m_weights[1],s[4]=this.m_weights[2],t.writeRangeFromArray(e,s.length,s,!0,1),e+s.length}readFromBufferStream(t,e){const s=new Float64Array(5);t.queryRange(e,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_weights[0]=s[2],this.m_weights[1]=s[3],this.m_weights[2]=s[4],this.m_cachedValues=null}snapControlPoints(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e[1],e[0]),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e[1],e[2]);let i=e[0].clone(),r=s;s>n&&(i=e[2].clone(),r=n);let o=!1;return r<=t&&0!==r&&(o=!0,this.setControlPoint1(i)),o}needsSnapControlPoints(t){if(!t)return!1;const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e[1],e[0]),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e[1],e[2]);e[0].clone();let i=s;return s>n&&(e[2].clone(),i=n),i<=t&&0!==i}calculateSpecialPointsForCracking(t,e){return 0}ensureXYMonotone(){return Za(this)}setCoordsForIntersector(t,e,s){Ka(this,t,e,s)}copyToImpl(t){const e=t;e.m_cp.setCoordsPoint2D(this.m_cp),e.m_weights[0]=this.m_weights[0],e.m_weights[1]=this.m_weights[1],e.m_weights[2]=this.m_weights[2],La(e,Va(this))}reverseImpl(){this.m_weights[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_weights[0],this.m_weights[0]=this.m_weights[2])}equalsImpl(t){const e=t;if(!this.m_cp.equals(e.m_cp))return!1;for(let s=0;s<3;s++)if(this.m_weights[s]!==e.m_weights[s])return!1;return!0}equalsImplTol(t,e){const s=t;if(!this.m_cp.isEqualPoint2D(s.m_cp,e))return!1;const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(n);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);s.queryControlPoints(i);const r=[s.m_weights[0],s.m_weights[1],s.m_weights[2]];for(let o=0;o<3;o++){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d;t.setCoordsPoint2DZ(n[o].mul(this.m_weights[o]),this.m_weights[o]);const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d;if(s.setCoordsPoint2DZ(i[o].mul(r[o]),r[o]),!t.isEqual(s,e))return!1}return!0}swapImpl(t){const e=t;e.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp,this.m_cp=e.m_cp),e.m_weights=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_weights,this.m_weights=e.m_weights),ca(this,e)}afterCompletedModification(){la(this)}intersect(t,e,s,n,i){return um(!1,this,t,e,s,n,i)}intersectPoint(t,e,s){return ka(this,t,e,s)}endPointModified(){la(this)}clearEndPointModified(){}setCpsAndWeights(t,s,n,i,r,o){(i<=0||o<=0||r<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("weights"),(t.isNAN()||s.isNAN()||n.isNAN())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("NAN control points in bezier are not supported"),this.setStartXY(t),this.m_cp.assign(s),this.m_weights[0]=i,this.m_weights[1]=r,this.m_weights[2]=o,this.setEndXY(n)}setCpsAndWeightsArray(t,e){this.setCpsAndWeights(t[0],t[1],t[2],e[0],e[1],e[2])}}En.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2;var Dn=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class wn extends gs{constructor(t){void 0===t||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.W)(t,"vd")?(super({vd:t?.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0)):t.from?(super({XStart:t.from.x,YStart:t.from.y,XEnd:t.to.x,YEnd:t.to.y,...t.vd}),this.m_cp=t.cp.clone()):t.points?(super({XStart:t.points[0].x,YStart:t.points[0].y,XEnd:t.points[2].x,YEnd:t.points[2].y,...t.vd}),this.m_cp=t.points[1].clone()):t.copy?(super(t),this.m_cp=t.copy.m_cp.clone()):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unexpected constructor args")}getBoundary(){return Ks(this)}assignCopy(t){return this!==t&&t.copyTo(this),this}construct(t,e,s){this.setStartXY(t),this.m_cp.assign(e),this.setEndXY(s),ii(this)}constructPoints(t){this.setStartXY(t[0]),this.m_cp.assign(t[1]),this.setEndXY(t[2]),ii(this)}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2}queryEnvelope(t){if(2!==t.m_EnvelopeType)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("env type not impl");else{if(t.setCoords(this.getStartXY()),t.mergeNe(this.getEndXY()),t.contains(this.m_cp))return;const e=yi(this);if(null!==e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(const n of e.specialPoints)this.queryCoord2D(n,s),t.mergeNe(s)}else{const e=[];ai(this,e);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(const n of e)this.queryCoord2D(n,s),t.mergeNe(s)}}}applyTransformation(t){if(1===t.m_TransformationType){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return this.queryControlPoints(e),t.transformPoints2D(e,3,e),this.setStartXY(e[0]),this.m_cp.assign(e[1]),this.setEndXY(e[2]),void this.afterCompletedModification()}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}createInstance(){return new wn({vd:this.m_description})}calculateLength2D(){return hi(this,1,!1)}calculateLowerLength2D(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return this.calculateUpperLength2D_()}calculateUpperLength2D_(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.m_cp)+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getEndXY(),this.m_cp)}queryCoord2D(t,e){this.queryCoord2DExtended(t,e,!1)}queryCoord2DExtended(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(n),ji(n,t,e,s)}queryCoord2DE(t,e){Zi(this,t,e)}queryCoord2DMP(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!1,"bernstein polynomials not ported")}getCoordX(t){if(t<0||t>1){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtended(t,e,!0),e.x}if(t<=.5){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(this.getStartX(),this.m_cp.x,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(this.m_cp.x,this.getEndX(),t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(e,s,t)}{const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(this.getStartX(),this.m_cp.x,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(this.m_cp.x,this.getEndX(),t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(e,s,t)}}getCoordY(t){if(t<0||t>1){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtended(t,e,!0),e.y}if(t<=.5){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(this.getStartX(),this.m_cp.x,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(this.m_cp.x,this.getEndX(),t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(e,s,t)}{const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(this.getStartY(),this.m_cp.y,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(this.m_cp.y,this.getEndY(),t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(e,s,t)}}cut(t,e,s){const n=new fm;return this.queryCut(t,e,n,s),n.releaseSegment()}queryCut(t,e,s,n){const i=s.createQuadraticBezier();if(this.cutBezierIgnoreAttributes(t,e,i),n)return;i.assignVertexDescription(this.m_description);const r=this.m_description.getAttributeCount();if(r>1){for(let e=1;e<r;e++){const s=this.m_description.getSemantics(e),n=Dn.getComponentCount(s);for(let e=0;e<n;e++){const n=this.getAttributeAsDbl(t,s,e);i.setStartAttribute(s,e,n)}}for(let t=1;t<r;t++){const s=this.m_description.getSemantics(t),n=Dn.getComponentCount(s);for(let t=0;t<n;t++){const n=this.getAttributeAsDbl(e,s,t);i.setEndAttribute(s,t,n)}}}}queryDerivative(t,e){Ui(this,t,e)}cutBezierIgnoreAttributes(t,s,n){if((t<0||s>1||t>s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Quadratic_bezier.cut_bezier_ignore_attributes"),0===t&&1===s)return n.setStartXY(this.getStartXY()),n.m_cp.assign(this.m_cp),void n.setEndXY(this.getEndXY());const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(i),Mi(i,t,s,i),n.constructPoints(i)}splitBezierIgnoreAttributes(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getAttributeAsDbl(t,e,s){if(0===e)return 0===s?this.getCoordX(t):this.getCoordY(t);const n=this.calculateLength2D(),i=n>0?this.tToLength(t)/n:0,r=Dn.getInterpolation(e),o=this.getStartAttributeAsDbl(e,s),a=this.getEndAttributeAsDbl(e,s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.V)(r,o,a,i,Dn.getDefaultValue(e))}getClosestCoordinate(t,e){return Ci(this,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),e)}getClosestCoordinateOnInterval(t,e,s=-1){return Ci(this,t,e,!1)}getYMonotonicParts(t,e){return this.getMonotonicParts(t,e)}getMonotonicParts(t,n){t.length<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const i=oi(this);let r=0;if(2===i.specialPointsCount())return 0;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=i.specialPointsCount()-1);for(let e=1,s=i.specialPointsCount();e<s;++e)this.queryCut(i.specialPoints[e-1],i.specialPoints[e],t[r],n),r++;for(let e=0;e<r;++e){wi(t[e].get())}return r}intersectionWithAxis2D(t,e,s,n){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);let a=0;if(t){if(i[0]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartY()).sub(e),i[1]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.m_cp.y).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartY())).mulThisByPower2(2),i[2]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartY()).add(this.getEndY()).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.m_cp.y).mulThisByPower2(2)),a=gn(i[2],i[1],i[0],o,!1,r),s)for(let h=0;h<a;h++)s[h]=this.getCoordX(r[h].value())}else if(i[0]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartX()).sub(e),i[1]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.m_cp.x).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartX())).mulThisByPower2(2),i[2]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.getStartX()).add(this.getEndX()).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(this.m_cp.x).mulThisByPower2(2)),a=gn(i[2],i[1],i[0],o,!1,r),s)for(let h=0;h<a;h++)s[h]=this.getCoordY(r[h].value());if(n)for(let h=0;h<a;h++)n[h]=r[h].value();else s&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Z)(s,a);return a}intersectionOfYMonotonicWithAxisX(t,e){if(this.m_YStart===this.m_YEnd)return t===this.m_YStart?e:Number.NaN;if(t===this.m_YStart)return this.m_XStart;if(t===this.m_YEnd)return this.m_XEnd;const n=[0,0],i=this.intersectionWithAxis2D(!0,t,n,null);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(2!==i),-1===i?e:n[0]}isCurve(){return!0}isLine(){return!1}isDegenerate(t){return Re(this,t)}isDegenerate3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}queryLooseEnvelope(t){if(2===t.m_EnvelopeType)return t.setCoords(this.getStartXY()),t.mergeNe(this.m_cp),void t.mergeNe(this.getEndXY());(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}clone(t){const e=this.createInstance();return this.copyTo(e),e}queryInterval(t,e){if(0===t){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;this.queryEnvelope(t);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;return 0===e?t.queryIntervalX(s):t.queryIntervalY(s),s}return super.queryInterval(t,e)}queryLooseEnvelopeOnInterval(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(s),Mi(s,t.vmin,t.vmax,s),e.setFromPoints(s,4)}changeEndPoints2D(t,e){if(t.isEqual(this.m_XStart,this.m_YStart)&&e.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp.isEqual(this.m_XStart,this.m_YStart),n=this.m_cp.isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(t),this.setEndXY(e),s?this.m_cp.setCoordsPoint2D(t):n&&this.m_cp.setCoordsPoint2D(e),this.normalizeAfterEndpointChange()}tToLength(t){return hi(this,t,!0)}lengthToT(t){return _i(this,t)}calculateWeightedAreaCentroid2D(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Bi(this,e);const s=e[2],n=e[1],i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,r=s.y*n.x-s.x*n.y;i.x=-(4*s.x+5*n.x)*r/60,i.y=-(4*s.y+5*n.y)*r/60;const o=pi(this);return i.x+=(e[0].x-t.x)*o,i.y+=(e[0].y-t.y)*o,i}calculateWeightedCentroid2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.isDegenerate(0)?(t.setCoords(0,0),t):Pi(this)?(t.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),t):(t.assign(Ti(this,1)),t)}getControlPoint1(){return this.m_cp.clone()}setControlPoint1(t){this.m_cp.setCoordsPoint2D(t),this.afterCompletedModification()}queryControlPoints(t){t[0].assign(this.getStartXY()),t[1].assign(this.m_cp),t[2].assign(this.getEndXY())}queryControlPointsHelper(t){return this.queryControlPoints(t),3}setControlPoints(t){for(let s=0;s<3;s++)t[s].isNAN()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("NaN control points in bezier are not supported");this.m_XStart=t[0].x,this.m_YStart=t[0].y,this.m_cp.setCoordsPoint2D(t[1]),this.m_XEnd=t[2].x,this.m_YEnd=t[2].y,this.afterCompletedModification()}getTangent(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(t,0,1);let s=ci(this,1,e);return s.isZero()&&(s=ci(this,2,e),1===e&&s.negateThis()),s}getDerivative(t){return ci(this,1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(t,0,1))}getCurvature(t){const e=ci(this,1,t),s=ci(this,2,t),n=e.sqrLength();if(0===n)return Number.NaN;e.divThis(Math.sqrt(n));return e.crossProduct(s)/n}isIntersecting(t,e,s){return 0!==rm(!1,this,t,e,s)}isIntersectingPoint(t,e,s){if(s&&(t.isEqualPoint2D(this.getStartXY())||t.isEqualPoint2D(this.getEndXY())))return!1;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;if(this.queryLooseEnvelope(n),n.inflateCoords(e,e),!n.contains(t))return!1;const i=this.getClosestCoordinate(t,!1),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(i,r);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(r,t)<=e}isIntersectingPoint3D(t,e,n,i,r=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}isMonotoneQuickAndDirty(){return!1}getMonotonicPartParams(t,s){const n=oi(this),i=n.specialPointsCount();if(!s)return n.specialPointsCount();t<i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");for(let e=0;e<i;e++)s[e]=n.specialPoints[e];return i}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=this.m_XEnd),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=this.m_YEnd);for(let t=0,e=this.m_description.getTotalComponentCount()-2;t<e;t++)this.m_attributes[t+e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_attributes[t],this.m_attributes[t]=this.m_attributes[t+e]);this.m_cachedValues=null}}isDegenerateToLineHelper(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e);const s=e[2].sub(e[0]),n=s.length();if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[2],e[1])-n>t)return!1;const i=t,r=e[1].clone();r.subThis(e[0]);return!(Math.abs(r.crossProduct(s))/n>i)}copyIgnoreAttributes(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(e),t.setControlPoints(e)}calculateArea2DHelper(){return pi(this)}absNorm(){return Ni(this)}queryEnvelopeW(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);this.queryControlPoints(s),Ei(s,t,e)}setSegmentFromCoordsForStitcher(t,e){this.construct(t[0],this.getControlPoint1(),t[e-1])}snapControlPoints(t){return $i(this,t)}writeInBufferStream(t,e){const s=new Float64Array(2);return s[0]=this.m_cp.x,s[1]=this.m_cp.y,t.writeRangeFromArray(e,s.length,s,!0,1),e+s.length}readFromBufferStream(t,e){const s=new Float64Array(2);t.queryRange(e,s.length,s,!0,1),this.m_cp.x=s[0],this.m_cp.y=s[1],this.m_cachedValues=null}needsSnapControlPoints(t){return tr(this,t)}calculateSpecialPointsForCracking(t,e){return 0}ensureXYMonotone(){return wi(this)}setCoordsForIntersector(t,e,s){Yi(this,t,e,s)}copyToImpl(t){const e=t;e.m_cp.setCoordsPoint2D(this.m_cp),xi(e,yi(this))}reverseImpl(){}equalsImplTol(t,e){const s=t;return!!this.m_cp.isEqualPoint2D(s.m_cp,e)}equalsImpl(t){const e=t;return!!this.m_cp.equals(e.m_cp)}swapImpl(t){const e=t;e.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp,this.m_cp=e.m_cp),ri(this,e)}afterCompletedModification(){ii(this)}intersect(t,e,s,n,i){return um(!1,this,t,e,s,n,i)}intersectPoint(t,e,s){return bi(this,t,e.length,e,s)}endPointModified(){ii(this)}clearEndPointModified(){}}wn.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2;class An{constructor(t){return t.coefsT?(this.m_zeroCtor=t.zeroCtor,this.m_elements=t.coefsT.map((t=>t.clone())),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.m_elements.length===t.power+1),void this.updatePower()):t.coef0?(this.m_zeroCtor=t.zeroCtor,void(this.m_elements=[t.coef0.clone()])):t.copy?(this.m_zeroCtor=t.copy.m_zeroCtor,void(this.m_elements=t.copy.m_elements.map((t=>t.clone())))):(this.m_zeroCtor=t.zeroCtor,void(this.m_elements=[new this.m_zeroCtor]))}construct(t,e){return this.m_elements=t.map((t=>t.clone())),this.updatePower(),this}construct0(t){return this.m_elements.length=0,this.m_elements.push(t.clone()),this.updatePower(),this}assignCopy(t){return this.m_elements=t.m_elements.map((t=>t.clone())),this.updatePower(),this}assignMove(t){return this.m_elements=t.m_elements,t.m_elements=[],this.updatePower(),this}power(){return this.m_elements.length-1}addElement(t){this.m_elements.push(t.clone())}scaleRangeToUnitInterval(t,e){const s=e;s.subThis(t);const n=this.power();for(let i=0;i<=n;i++){const e=new this.m_zeroCtor;for(let s=i;s<=n;s++){const n=this.m_elements[s];n.mulDoubleThis((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ao)(s,i));const r=t.pow(s-i);n.mulThis(r),e.addThis(n)}const r=s.pow(i);e.mulThis(r),this.m_elements[i]=e}}fmSubThis(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}addThis(t){const e=Math.min(this.power(),t.power());for(let n=0;n<=e;++n)this.m_elements[n].addThis(t.m_elements[n]);const s=t.power();this.m_elements.length=Math.max(this.power(),t.power())+1;for(let n=e+1;n<=s;++n)this.m_elements[n]=t.m_elements[n];return this.updatePower(),this}add0(t){return this.m_elements[0].addThis(t),this.updatePower(),this}addNumber0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}sub(t){const e=Math.min(this.power(),t.power());for(let n=0;n<=e;++n)this.m_elements[n].subThis(t.m_elements[n]);const s=t.power();this.m_elements.length=Math.max(this.power(),t.power())+1;for(let n=e+1;n<=s;++n)this.m_elements[n]=t.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}subNumber0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}subShifted(t,e){const s=this.power(),n=t.power()+e,i=Math.min(this.power(),n);let r=0;for(let o=e;o<=i;++o)this.m_elements[o].subThis(t.m_elements[r]),r++;if(n<=s)return this.updatePower(),this;this.m_elements.length=n+1;for(let o=s+1;o<this.m_elements.length;++o)this.m_elements[o]=new this.m_zeroCtor;for(let o=i+1;o<=n;++o)this.m_elements[o].subThis(t.m_elements[r++]);return this.updatePower(),this}subShiftedWithCoef(t,e,s){const n=this.power(),i=t.power()+s,r=Math.min(this.power(),i);let o=0;for(let a=s;a<=r;++a)this.m_elements[a].fmSubThis(t.m_elements[o],e),o++;if(i<=n)return this.updatePower(),this;this.m_elements.length=i+1;for(let a=n+1;a<this.m_elements.length;++a)this.m_elements[a]=new this.m_zeroCtor;for(let a=r+1;a<=i;++a)this.m_elements[a].fmSubThis(t.m_elements[o++],e);return this.updatePower(),this}mulThis(t){if(this.constructor===t.constructor){const e=t,s=[];for(let t=0,n=this.power();t<=n;t++)for(let i=0,r=e.power();i<=r;i++){const n=this.m_elements[t].clone();n.mulThis(e.m_elements[i]),t+i<s.length?s[t+i].addThis(n):s.push(n)}this.m_elements=s}else for(let e=0,s=this.power();e<=s;e++)this.m_elements[e].mulThis(t);return this.updatePower(),this}mulElementThis(t){for(let e=0,s=this.power();e<=s;e++)this.m_elements[e].mulThis(t);return this.updatePower(),this}mulDoubleThis(t){for(let e=0,s=this.power();e<=s;e++)this.m_elements[e].mulDoubleThis(t);return this.updatePower(),this}mulNumber0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}mulBigint0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}mulBigIntThis(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}mulInt320(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}div0(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}absThis(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}div(t,e,s){if(this.power()<t.power())return s.assignCopy(this),void e.setZero();s.setZero(),e.setZero();const n=t.getElement(t.power()),i=this.clone();let r=i.power();const o=i.power()-t.power();let a=o;for(e.m_elements=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(e.m_zeroCtor,o+1);;){if(r<t.power()){s.assignMove(i);break}if(r===i.power()){const s=i.getElement(i.power());s.divThis(n),i.subShiftedWithCoef(t,s,i.power()-t.power()),e.m_elements[a]=s.clone()}a--,r--}s.updatePower(),e.updatePower()}divThis(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}subThis(t){const e=Math.min(this.power(),t.power());for(let n=0;n<=e;++n)this.m_elements[n].subThis(t.m_elements[n]);const s=t.power();this.m_elements.length=Math.max(this.power(),t.power())+1;for(let n=e+1;n<=s;++n)this.m_elements[n]=t.m_elements[n].clone(),this.m_elements[n].negateThis();return this.updatePower(),this}sub0This(t){return this.m_elements[0].subThis(t),this.updatePower(),this}subFrom(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}isZero(){return 0===this.power()&&this.m_elements[0].isZero()}negateThis(){for(let t=this.m_elements.length-1;t>=0;t--)this.m_elements[t].negateThis();return this}getElement(t){return this.m_elements[t].clone()}setElement(t,e){return this.m_elements[t]=e.clone(),this}evaluate(t){const e=this.power(),s=this.m_elements[e].clone();for(let n=e-1;n>=0;--n)s.mulThis(t),s.addThis(this.m_elements[n]);return s}equals(t){if(this===t)return!0;if(this.power()!==t.power())return!1;for(let e=this.m_elements.length-1;e>=0;e--)if(!this.m_elements[e].equals(t.m_elements[e]))return!1;return!0}updatePower(){for(let t=this.m_elements.length-1;t>0&&this.m_elements[t].isZero();t--)this.m_elements.pop();return this}setZero(){return this.m_elements.length=1,this.m_elements[0]=new this.m_zeroCtor,this.updatePower(),this}derivative(t){if(this.power()<t)return this.clone().setZero();if(0===t)return this.clone();const e=new this.constructor({coefsT:this.m_elements.slice(t),power:this.power()-t});for(let s=t,n=this.power();s<=n;s++){let n=BigInt(s);for(let e=s-1,i=s-t;e>i;--e)n*=BigInt(e);e.m_elements[s-t].mulBigIntThis(n)}return e.updatePower(),e}derivative1This(){if(this.m_elements.length>1){this.m_elements=this.m_elements.slice(1);for(let t=1,e=this.power();t<=e;t++)this.m_elements[t].mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(t+1))}else this.m_elements.length=0,this.m_elements.push(new this.m_zeroCtor);return this}limitPrecisionThis(t){for(let e=this.power();e>=0;--e)this.m_elements[e].limitPrecisionThis(t);return this.updatePower(),this}hiBitIndex(){return this.m_elements.reduce(((t,e)=>{const s=e.hiBitIndex();return t<s?s:t}),0)}shiftRight(t){return this.m_elements.splice(0,t),this.updatePower(),this}evaluateDerivative(t){const e=this.power(),s=this.m_elements[e];s.mulDoubleThis(e);for(let n=e-1;n>=1;--n){s.mulThis(t);const e=this.m_elements[n];e.mulDoubleThis(n),s.addThis(e)}return s}static evaluateCoefs(t,e,s){const n=t.power();s.construct0(t.getElement(0).evaluate(e));for(let i=1;i<=n;++i)s.addElement(t.getElement(i).evaluate(e));s.updatePower()}}class Tn extends An{constructor(t){super(void 0===t?{zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M}:{...t,zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M})}clone(){return new Tn({copy:this})}absEvaluate(t){const e=this.power(),s=this.m_elements[e].clone();s.absThis();const n=t.clone();n.absThis();for(let i=e-1;i>=0;--i)s.mulThis(n),s.addThis(this.m_elements[i].abs());return s}}class In extends An{constructor(t){super(void 0===t?{zeroCtor:Tn}:{...t,zeroCtor:Tn})}clone(){return new In({copy:this})}constructFromMPValues(t,e){this.m_elements.length=0;for(let s=0;s<=e;++s)this.m_elements.push(new Tn({coef0:t[s]}));return this.updatePower(),this}}function Mn(){return{polypoly1:new In,polypoly2:new In,polyX2:new Tn,polyY2:new Tn,polyX2Deriv:new Tn,polyY2Deriv:new Tn,polypolyX1:new In,polypolyY1:new In,polypolyX1Deriv:new In,polypolyY1Deriv:new In,lazyPolypolyD1:new In,lazyPolypolyD1Deriv:new In,lazyPolyD2:new Tn,lazyPolyD2Deriv:null,polypoly11:new In,polypoly12:new In,tempPp:new In,tempPp1:new In,tempPp2:new In,tempP:new Tn,tempP1:new Tn,tempP2:new Tn}}function Yn(t,e,n,i,r,o,a,u,m,l,c,g,d,_,p,f,P,y,x,C=!1){const v=Mn();v.polyX2.construct(a,u),v.polyY2.construct(m,l),v.polypolyX1.constructFromMPValues(t,e),v.polypolyY1.constructFromMPValues(n,i),v.polypoly11.assignCopy(v.polypolyX1),v.polypoly12.assignCopy(v.polypolyY1),c&&(v.lazyPolyD2.construct(c,g),v.polypoly11.mulElementThis(v.lazyPolyD2),v.polypoly12.mulElementThis(v.lazyPolyD2)),r?(v.lazyPolypolyD1.constructFromMPValues(r,o),v.lazyPolypolyD1Deriv=new In({copy:v.lazyPolypolyD1}),v.lazyPolypolyD1Deriv.derivative1This(),v.tempPp.assignCopy(v.lazyPolypolyD1),v.tempPp.mulElementThis(v.polyX2),v.polypoly11.subThis(v.tempPp),v.tempPp.assignCopy(v.lazyPolypolyD1),v.tempPp.mulElementThis(v.polyY2),v.polypoly12.subThis(v.tempPp)):(v.polypoly11.sub0This(v.polyX2),v.polypoly12.sub0This(v.polyY2)),v.polypolyX1Deriv.assignCopy(v.polypolyX1),v.polypolyX1Deriv.derivative1This(),v.polypolyY1Deriv.assignCopy(v.polypolyY1),v.polypolyY1Deriv.derivative1This(),r&&(v.polypolyX1Deriv.mulThis(v.lazyPolypolyD1),v.tempPp2.assignCopy(v.lazyPolypolyD1Deriv),v.tempPp2.mulThis(v.polypolyX1),v.polypolyX1Deriv.subThis(v.tempPp2),v.polypolyY1Deriv.mulThis(v.lazyPolypolyD1),v.tempPp2.assignCopy(v.lazyPolypolyD1Deriv),v.tempPp2.mulThis(v.polypolyY1),v.polypolyY1Deriv.subThis(v.tempPp2)),v.polyX2Deriv.assignCopy(v.polyX2),v.polyX2Deriv.derivative1This(),v.polyY2Deriv.assignCopy(v.polyY2),v.polyY2Deriv.derivative1This(),c&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(null===v.lazyPolyD2Deriv),v.lazyPolyD2Deriv=new Tn({copy:v.lazyPolyD2}),v.lazyPolyD2Deriv.derivative1This(),v.polyX2Deriv.mulThis(v.lazyPolyD2),v.tempP1.assignCopy(v.lazyPolyD2Deriv),v.tempP1.mulThis(v.polyX2),v.polyX2Deriv.subThis(v.tempP1),v.polyY2Deriv.mulThis(v.lazyPolyD2),v.tempP1.assignCopy(v.lazyPolyD2Deriv),v.tempP1.mulThis(v.polyY2),v.polyY2Deriv.subThis(v.tempP1)),v.polypoly1.assignCopy(v.polypoly11),v.polypoly1.mulElementThis(v.polyX2Deriv),v.tempPp.assignCopy(v.polypoly12),v.tempPp.mulElementThis(v.polyY2Deriv),v.polypoly1.addThis(v.tempPp),v.polypoly2.assignCopy(v.polypolyX1Deriv),v.polypoly2.mulElementThis(v.polyY2Deriv),v.tempPp.assignCopy(v.polypolyY1Deriv),v.tempPp.mulElementThis(v.polyX2Deriv),v.polypoly2.subThis(v.tempPp);let b=[];const S=[];P||(P=[]),f||(f=[]),kn(v.polypoly11,v.polypoly12,v.tempP);const E=64,D=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai.ldexp(-59).toDouble(),w=[];let A=Gn(v.tempP,d,p,D,E,w,y,y);if(A<0)return-1;for(let Y=0;Y<A;Y++){const t=v.tempP1,e=v.tempP2;Tn.evaluateCoefs(v.polypoly11,w[Y],t);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.aj)(t.m_elements,t.power()+1);n.sort(((t,e)=>t.compare(e))),Tn.evaluateCoefs(v.polypoly12,w[Y],e);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.aj)(e.m_elements,e.power()+1);i.sort(((t,e)=>t.compare(e)));const r=n[0],o=n.at(-1),a=i[0],u=i.at(-1);o.subThis(r),u.subThis(a);const m=o.subThis(u).GEZ(),l=58,c=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai.ldexp(-59).toDouble(),g=[];let p;if(p=Gn(m?t:e,d,_,c,l,g,y,y),p<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("mp_curve_proximity"),p>0){const n=m?e:t;for(let t=0;t<p;t++){let e;if(m){const s=v.tempP;Tn.evaluateCoefs(v.polypoly12,w[Y].addDouble(Number.EPSILON),s),e=s.evaluate(g[t])}else{const s=v.tempP;Tn.evaluateCoefs(v.polypoly11,w[Y].addDouble(Number.EPSILON),s),e=s.evaluate(g[t])}const i=n.evaluateDerivative(g[t]).abs().mulDoubleThis(Number.EPSILON),r=n.evaluate(g[t]);i.addThis(e.sub(r).absThis()),i.ldexpThis(3),r.absThis(),r.lt(i)?S.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(g[t].toDouble(),w[Y].toDouble())):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(r.gte(i))}}}A=S.length,kn(v.polypoly1,v.polypoly2,v.tempP);const T=[];let I=Gn(v.tempP,d,p,D,E,T);I<0&&(I=0);for(let s=0;s<I;s++){Tn.evaluateCoefs(v.polypoly1,T[s],v.tempP1);const t=[];let e=Gn(v.tempP1,d,_,D,E,t);if(0!==e)if(Tn.evaluateCoefs(v.polypoly2,T[s],v.tempP2),e<0){if(e=Gn(v.tempP2,d,_,D,E,t),e<0)continue;for(let n=0;n<e;n++)b.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(t[n].toDouble(),T[s].toDouble()))}else{const n=v.tempP2.absEvaluate(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai);n.mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(1e-12));for(let i=0;i<e;i++){const e=v.tempP2.evaluate(t[i]);e.absThis(),e.lt(n)&&b.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(t[i].toDouble(),T[s].toDouble()))}}}if(I=b.length,0===A&&0===I)return 0;b=b.concat(S),b.sort(((t,e)=>C?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t.second,e.second):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t.first,e.first)));const M=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.u)(b,((t,e)=>t.first===e.first&&t.second===e.second));b=b.slice(0,M),f.length=0,P.length=0;for(const s of b)f.push(s.first),P.push(s.second);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(f.length===P.length),P.length}function Nn(t,e,s,n,i,r,o){if(0===t.power())return t.isZero()?-1:0;const a=t.evaluate(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(1)).isZero();if(1===t.power()){const s=Fn(t.getElement(1),t.getElement(0),e,r.at(0));return r[0].limitPrecisionThis(n),1!==s?0:(r[0].limitPrecisionThis(n),1)}if(2===t.power()){return Vn(t.getElement(2),t.getElement(1),t.getElement(0),n,e,a,r)}if(3===t.power()){return Ln(t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),n,e,a,r)}if(4===t.power()){return Rn(t.getElement(4),t.getElement(3),t.getElement(2),t.getElement(1),t.getElement(0),n,e,a,r)}return Un(t,e,s,n,a,i,r,o)}function Xn(){return{polyIntersect:new Tn,polyX1:new Tn,polyY1:new Tn,polyX1Deriv:new Tn,polyY1Deriv:new Tn,lazyPolyD1:new Tn,lazyPolyD1Deriv:new Tn,tempP:new Tn,tempP1:new Tn,tempP2:new Tn,polypoly1Proximity:new In,polypoly2Proximity:new In}}function qn(t,e,s,n,i,r,o,a,h,u,m,l,c){const g=Xn();g.polyX1.construct(t,e),g.polyY1.construct(s,n),g.polyX1Deriv.assignCopy(g.polyX1),g.polyX1Deriv.derivative1This(),g.polyY1Deriv.assignCopy(g.polyY1),g.polyY1Deriv.derivative1This(),g.polyIntersect.assignCopy(g.polyX1),g.polyIntersect.mulThis(g.polyX1),g.polyIntersect.mulElementThis(o[0]),g.tempP.assignCopy(g.polyY1),g.tempP.mulThis(g.polyY1),g.tempP.mulElementThis(o[1]),g.polyIntersect.addThis(g.tempP),i?(g.lazyPolyD1.construct(i,r),g.tempP.assignCopy(g.lazyPolyD1),g.tempP.mulThis(g.lazyPolyD1),g.tempP.mulElementThis(o[2]),g.polyIntersect.addThis(g.tempP)):g.polyIntersect.add0(o[2]);{const i=o[0].clone(),r=i.clone();r.sqrThis();const a=o[1].clone(),h=a.clone();h.sqrThis();const u=o[2].clone(),m=i.clone();m.subThis(a),g.polyX1.construct(t,e),g.polyX1Deriv.assignCopy(g.polyX1),g.polyX1Deriv.derivative1This(),g.polyY1.construct(s,n),g.polyY1Deriv.assignCopy(g.polyY1),g.polyY1Deriv.derivative1This(),g.tempP.assignCopy(g.polyX1),g.tempP.mulThis(g.polyX1),g.tempP.mulElementThis(h),g.tempP.mulElementThis(u),g.polypoly1Proximity.construct0(g.tempP),g.tempP.assignCopy(g.polyX1),g.tempP.mulThis(a.mul(m).mul(u).ldexpThis(1)),g.polypoly1Proximity.addElement(g.tempP),g.tempP.assignCopy(g.polyX1),g.tempP.mulThis(g.polyX1),g.tempP.mulElementThis(i.mul(h)),g.tempP1.assignCopy(g.polyY1),g.tempP1.mulThis(g.polyY1),g.tempP1.mulElementThis(r.mul(a)),g.tempP.addThis(g.tempP1),g.tempP.add0(m.mul(m).mul(u)),g.polypoly1Proximity.addElement(g.tempP),g.tempP.assignCopy(g.polyX1),g.tempP.mulElementThis(m.mul(i).mul(a).ldexpThis(1)),g.polypoly1Proximity.addElement(g.tempP),g.tempP.construct0(i.mul(m).mul(m)),g.polypoly1Proximity.addElement(g.tempP),g.polypoly1Proximity.updatePower(),g.tempP.construct0(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah),g.polypoly2Proximity.construct0(g.tempP),g.tempP.assignCopy(g.polyX1),g.tempP.mulThis(g.polyX1Deriv),g.tempP1.assignCopy(g.polyY1),g.tempP1.mulThis(g.polyY1Deriv),g.tempP.addThis(g.tempP1),g.tempP.mulElementThis(i.mul(a)),g.polypoly2Proximity.addElement(g.tempP),g.tempP.assignCopy(g.polyX1Deriv),g.tempP.mulElementThis(m.mul(i)),g.polypoly2Proximity.addElement(g.tempP),g.polypoly2Proximity.updatePower()}const d=[],_=[];null===m&&(m=[]);let p=2*g.polyIntersect.power()+58;const f=.5*Number.EPSILON,P=[],y=Gn(g.polyIntersect,a,h,f,p,P,l,l);if(y<0)return-1;for(const b of P)_.push(b.toDouble());kn(g.polypoly1Proximity,g.polypoly2Proximity,g.tempP),p=2*g.tempP.power()+58,P.length=0;let x=Gn(g.tempP,a,h,f,p,P);if(x<0&&(x=0),0===y&&0===x)return 0;for(const b of P)d.push(b.toDouble());const C=d.concat(_);m.length=C.length,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(m,C,0,0,C.length),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.v)(m);const v=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.u)(m,((t,e)=>0===(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t,e)));return m.length=v,m.length}function Fn(t,e,s,n){return t.isZero()?e.isZero()?-1:0:(n.setThis(e),n.negateThis(),n.divThis(t),s.isEmpty()||s.containsCoordinate(n.value())?1:0)}function Vn(t,e,s,n,i,r,o){if(t.isZero()){if(r)return o[0].setInt32(1),i.containsCoordinate(1)?1:0;return Fn(e,s,i,o[0])}if(r){let e=2;return o[0].setInt32(1),s.equals(t)?(o[1].setInt32(1),e=1):o[1].setThis(s.div(t)),i.containsCoordinate(o[1].value())||(e=1),i.containsCoordinate(o[0].value())||(e--,o[0].setThis(o[1])),2===e&&o[0].value()>o[1].value()&&(o[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[0],o[0]=o[1])),e}const a=e.clone();a.sqrThis();const h=t.clone();if(h.mulThis(s).ldexpThis(2).negateThis().addThis(a),h.LZ())return 0;const u=n+2,m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.sqrt(h,u),l=m.clone();e.LZ()&&l.negateThis(),l.addThis(e).limitPrecisionThis(u).ldexpThis(-1).negateThis();let c=0;return o[0].setThis(l).divThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructAssign(t,u)).limitPrecisionThis(n),(i.isEmpty()||i.containsCoordinate(o[0].value()))&&c++,m.isZero()||l.isZero()||(o[c].setThis(s).divThis(l).limitPrecisionThis(n),(i.isEmpty()||i.containsCoordinate(o[c].value()))&&c++,2===c&&o[0].gt(o[1])&&(o[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[0],o[0]=o[1]))),c}function Ln(t,e,n,i,r,o,a,h){if(t.isZero()){return Vn(e,n,i,r,o,a,h)}const u=(t,e)=>{if(t>0){let s=e+t;for(let t=1;t<s;t++)h[t].equals(h[0])&&(h[s-1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(h[t],h[t]=h[s-1]),s--);e=s}return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(h,0,e,((t,e)=>t.compare(e))),e};if(i.isZero()){let s=0;o.containsCoordinate(0)&&(h[0].setInt32(0),s=1);return u(Vn(t,e,n,r,o,a,h.slice(1)),s)}if(a){let s=0;o.containsCoordinate(1)&&(h[0].setInt32(1),s=1);const n=e.add(t),a=i.negate(),m=t.add(n).add(a).isZero();return u(Vn(t,n,a,r,o,m,h.slice(s)),s)}const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,g=e.clone();if(g.isZero())l.setThis(n),l.divThis(t),c.setThis(i),c.divThis(t);else{g.divThis(t).divDoubleThis(3).negateThis();const s=e.clone();s.sqrThis();const r=t.clone();r.sqrThis(),l.setThis(t),l.mulThis(n).mulDoubleThis(3).subThis(s).divThis(r).divDoubleThis(3),c.setThis(s),c.mulThis(e),c.ldexpThis(1),m.setThis(t),m.mulThis(e).mulThis(n).mulDoubleThis(9),c.subThis(m),m.setThis(r),m.mulThis(i).mulDoubleThis(27),c.addThis(m),c.divThis(r).divThis(t).divDoubleThis(27)}if(l.isZero()){const t=c.clone();return t.negateThis(),t.isZero()?(h[0].setThis(g),Qn(o,r,h,1)):(h[0].setThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.cubicRoot(t,r).add(g)),Qn(o,r,h,1))}const d=c.clone();if(d.sqrThis().ldexpThis(-2),m.setThis(l.clone()),m.sqrThis().mulThis(l).divDoubleThis(27),d.addThis(m),d.isZero())return h[0].setThis(c),h[0].mulDoubleThis(3).divThis(l),h[1].setThis(h[0]),h[1].negateThis(),h[1].ldexpThis(-1),h[0].addThis(g),h[1].addThis(g),Qn(o,r,h,2);if(d.GZ())return d.setThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.sqrt(d,r+8)),m.setThis(c),m.ldexpThis(-1).negateThis(),m.addThis(d),h[0].setThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.cubicRoot(m,r+8)),m.setThis(c),m.ldexpThis(-1).negateThis(),m.subThis(d),h[0].addThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.cubicRoot(m,r+8)),h[0].addThis(g),Qn(o,r,h,1);m.setThis(l),m.divDoubleThis(3).negateThis(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(m.GEZ());const _=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.sqrt(m,r+8),p=_.clone();p.negateThis(),p.addThis(g),_.addThis(g);const f=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(o.isEmpty()?-Number.MAX_VALUE:o.vmin),P=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(o.isEmpty()?Number.MAX_VALUE:o.vmax),y=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M});y.construct0(i),y.addElement(n),y.addElement(e),y.addElement(t);const x=new Tn({copy:y});x.derivative1This();let C=0;const v=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,4);v[C++].setThis(f),p.gt(f)&&p.lt(P)&&v[C++].setThis(p),_.gt(f)&&_.lt(P)&&v[C++].setThis(_),v[C++].setThis(P);const b=3*r;let S=52,E=Number.EPSILON;for(;S<b;)2*S<=b?(E*=E,S*=2):(E*=Number.EPSILON,S+=52);S+=2;let D=0,w=!1;for(let s=1;s<C;s++){if(Zn(y,x,v[s-1],v[s],E,S,h[0])){D=1,w=s+1<C;break}}if(!D)return 0;if(w){const t=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,coef0:h[0]});t.negateThis(),t.addElement(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai);const e=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M}),n=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M});y.div(t,e,n),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(2===e.power()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0===n.power());const i=Vn(e.getElement(2),e.getElement(1),e.getElement(0),r,o,!1,h.slice(1));(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(i>=0&&i<=2),D+=i}return Qn(o,r,h,D)}function Rn(t,e,s,n,i,r,o,a,h){if(t.isZero())return Ln(e,s,n,i,r,o,a,h);const u=(t,e)=>{if(t>0){let s=e+t;for(let t=1;t<s;t++)h[t].equals(h[0])&&(h[s-1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(h[t],h[t]=h[s-1]),s--);e=s}return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(h,0,e,((t,e)=>t.compare(e))),e};if(i.isZero()){let i=0;o.containsCoordinate(0)&&(h[0].setInt32(0),i=1);return u(Ln(t,e,s,n,r,o,a,h.slice(i)),i)}const m=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,coef0:i});if(m.addElement(n),m.addElement(s),m.addElement(e),m.addElement(t),a){let t=0;o.containsCoordinate(1)&&(h[0].setInt32(1),t=1);const e=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,coef0:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(-1)});e.addElement(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(1));const s=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M}),n=new Tn({zeroCtor:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M});m.div(e,s,n);return u(Ln(3===s.power()?s.getElement(3):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),s.power()>=2?s.getElement(2):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),s.power()>=1?s.getElement(1):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),s.getElement(0),r,o,s.evaluate(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai).isZero(),h.slice(t)),t)}if(m.getElement(0).isZero()){let t=0;for(o.containsCoordinate(0)&&(t=1,h[0].setDouble(0));m.getElement(0).isZero()&&m.power()>0;)m.shiftRight(1);const e=Ln(3===m.power()?m.getElement(3):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),m.power()>=2?m.getElement(2):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),m.power()>=1?m.getElement(1):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone(),m.getElement(0),r,o,!1,h.slice(t));return e>0&&(t+=e),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(h,0,t,((t,e)=>t.compare(e))),t}let l=52,c=Number.EPSILON;for(;l<r;)2*l<=r?(c*=c,l*=2):(c*=Number.EPSILON,l+=52);l+=2;const g=On(m),d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(Math.max(Math.abs(o.vmax),Math.abs(o.vmin)));return c=(g.lt(d)?g:d).mul(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(c)).toDouble(),Un(m,o,c,l,a,!1,h,4)}function zn(t,e){let s=t,n=e;n.power()>s.power()&&(n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s,s=n));const i=s.power()-n.power(),r=new Tn({copy:s.getElement(s.power())});s.mulThis(n.getElement(n.power()));for(let o=0,a=s.power();o<a;o++)if(o>=i){const t=new Tn({copy:n.getElement(o-i)});t.mulThis(r);const e=s.getElement(o).sub(t);s.setElement(o,e)}s.setElement(s.power(),s.getElement(s.power()).setZero()),s.updatePower(),Bn(s)}function Bn(t){let e=0;for(;e<t.power()&&t.getElement(e).isZero();)e++;return e>0&&(t.shiftRight(e),!0)}function kn(t,e,s){const n=t.clone(),i=e.clone();for(Bn(n),Bn(i);0!==n.power()||0!==i.power();)zn(n,i);s.assignMove(n.getElement(0))}function Gn(t,e,s,n,i,r,o=!1,a=!1){r.length=0;const h=t.power(),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,2*h+4),m=Nn(t,s||_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),n,i,!1,u,u.length);if(m>0){r.length=0;for(let t=0;t<m;t++){const e=u[t];t>0&&e.lte(r.at(-1))||r.push(e.clone())}return r.length}return m}function Wn(t,e,n){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>=1),0===t.power())return t.isZero()?-1:0;const i=t.getElement(0);return i.negateThis(),i.divThis(t.getElement(1)),e[0].setThis(i),1}function jn(t,e,n,i){if(t.power()<2)return Wn(t,n,i);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(i>=1);let r=t.getElement(1);r.mulThis(t.getElement(1));const o=t.getElement(0);if(o.mulThis(t.getElement(2)),o.ldexpThis(2),r.subThis(o),r.LZ())return 0;if(r.isZero()){const s=t.getElement(1);return s.negateThis(),s.divThis(t.getElement(2)),s.ldexpThis(-1),s.limitPrecisionThis(e),n[0].setThis(s),1}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(i>=2),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.sqrt(r,e+8);const a=t.getElement(1);a.negateThis();const h=a.clone();h.subThis(r),h.divThis(t.getElement(2)),h.ldexpThis(-1),h.limitPrecisionThis(e);const u=a.clone();return u.addThis(r),u.divThis(t.getElement(2)),u.ldexpThis(-1),u.limitPrecisionThis(e),h.lt(u)?(n[0].setThis(h),n[1].setThis(u)):(n[1].setThis(h),n[0].setThis(u)),2}function Zn(t,e,s,n,i,r,o){let a=s.clone(),u=n.clone();a.limitPrecisionThis(r),u.limitPrecisionThis(r);let m=t.evaluate(a);m.limitPrecisionThis(r+2);let l=t.evaluate(u);if(l.limitPrecisionThis(r+2),m.GEZ()&&l.GEZ()||m.LEZ()&&l.LEZ())return m.absLessAbs(l)?(o=a,m.isZero()):(o=u,l.isZero());const c=l.LZ();c&&(l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(m,m=l),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a,a=u));const g=c?u:a,d=c?a:u,_=a.add(u).ldexpThis(-1);_.limitPrecisionThis(r);const p=u.sub(a);p.limitPrecisionThis(r),p.absThis();const f=p.clone();let P=t.evaluate(_),y=e.evaluate(_);const x=new Tn({copy:t}),C=new Tn({copy:e});{const s=Math.max(t.hiBitIndex(),e.hiBitIndex()),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai.clone();n.ldexpThis(-(r+2));for(let i=64;i<s;){x.limitPrecisionThis(i),C.limitPrecisionThis(i);const r=x.evaluate(_),o=C.evaluate(_),a=r.sub(P),h=o.sub(y);if(a.divThis(P).absThis().lt(n)&&(y.isZero()||h.divThis(y).absThis().lt(n)))break;x.assignCopy(t),C.assignCopy(e),i=Math.min(i+64,s)}P.limitPrecisionThis(r+2),y.limitPrecisionThis(r+2)}const v=1,b=4;let S=b;const E=2;let D=1,w=0,A=0,T=v;const I=32,M=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(.25*i),Y=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(.5001);let N=0;const X=300;for(;++N<X;){if(N>I&&w>0||y.isZero()||T===E&&w>1||T===v&&S<b)T=v,D>1&&D--;else if(T=E,A>1){const t=p.mul(y);t.absThis(),t.ldexpThis(-3),t.absLessAbs(P)&&D++}p.setThis(f);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M;let e=!1;if(T===v)do{if(A>2){const e=p.clone();if(e.absThis(),e.ldexpThis(4),d.sub(g).ldexpThis(-1).gt(e)){if(_.equals(g)){t.setThis(_),_.setThis(g.add(e)),_.limitPrecisionThis(r),f.setThis(_.sub(t));break}if(_.equals(d)){t.setThis(_),_.setThis(d.sub(e)),_.limitPrecisionThis(r),f.setThis(_.sub(t));break}}}f.setThis(u.sub(a)),f.ldexpThis(-1),f.limitPrecisionThis(r),t.setThis(_),_.setThis(a.add(f)),_.limitPrecisionThis(r),_.lt(g)?_.setThis(g):_.gt(d)&&_.setThis(d),e=a.equals(_)||u.equals(_)}while(0);else for(;;){if(f.setThis(P.div(y)),f.limitPrecisionThis(r),1!==D&&f.mulDoubleThis(D),t.setThis(_),_.subThis(f),_.limitPrecisionThis(r),e=_.equals(t),_.lt(g)){if(D>1){_.setThis(t),D--;continue}f.setThis(t.sub(g)),_.setThis(g)}else if(_.gt(d)){if(D>1){_.setThis(t),D--;continue}f.setThis(t.sub(d)),_.setThis(d)}break}if(e||f.absLessAbs(M)){t.equals(_)||(P=x.evaluate(_),P.limitPrecisionThis(r+2));break}P=x.evaluate(_),P.limitPrecisionThis(r+2),y=C.evaluate(_),y.limitPrecisionThis(r+2);const s=a.clone(),n=u.clone();P.LZ()?(m.setThis(P),a.setThis(_)):(l.setThis(P),u.setThis(_)),T===E&&(a.equals(s)&&u.equals(n)||A>1&&!f.absLessAbs(Y.mul(p)))?w++:w=0,T===v?(S++,A=0):(S=0,A++)}return N>=X&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("Root_finder iterations exceeded"),o.setThis(_),!0}function Hn(t,e,s,n,i){const r=t.evaluate(s);if(r.isZero())return!0;const o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(.5*n),a=s.clone();a.subThis(o);const h=t.evaluate(a),u=s.clone();u.addThis(o);const m=t.evaluate(u);if(h.LZ()&&m.GZ()||h.GZ()&&m.LZ())return!0;if(r.GZ()?h.LEZ()||m.LEZ():h.GEZ()||m.GEZ())return!0;const l=h.LEZ()&&m.LEZ(),c=h.GEZ()&&m.GEZ();let g=!1;return l?r.gt(h)&&r.gt(m)&&(g=!0):c&&r.lt(h)&&r.lt(m)&&(g=!0),!!g&&r.absThis().lt(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(1e-17))}function Un(t,e,n,i,r,o,a,h){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(h>=t.power());const u=a,m=[];let l=[];const c=new Tn({zeroCtor:t.m_zeroCtor}),g=new Tn({zeroCtor:t.m_zeroCtor}),d=new Tn({zeroCtor:t.m_zeroCtor}),_=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(n),p=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(e.vmin),f=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(e.vmax),P=p.sub(_),y=f.add(_),x=On(t),C=x.clone();if(C.negateThis(),P.lt(C))P.setThis(C.sub(_));else if(P.gt(x))return 0;if(y.gt(x))y.setThis(x.add(_));else if(y.lt(C))return 0;let v=t,b=null;if(r){const e=new Tn({coef0:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(-1)});e.addElement(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai),b=new Tn,v=b;const s=new Tn,n=new Tn;for(t.div(e,s,n),b.assignCopy(s);v.evaluate(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai).isZero();)v.div(e,s,n),b.assignCopy(s)}let S=!1;if(v.power()>0&&v.getElement(0).isZero())for(S=!0,b||(b=new Tn({copy:v}),v=b);v.getElement(0).isZero();)b.shiftRight(1);let E=i+2*v.power()+2,D=n/Math.pow(2,v.power()+2),w=E;if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.gt(P)&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.lt(y))for(let s=0,Y=v.power();s<Y;s++)if(v.getElement(s).isZero()){m.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone());break}for(let Y=v.power()-1;Y>0;Y--)if(D*=2,E-=2,w-=2,v.power()-Y!==1)if(v.power()-Y!==2){g.assignMove(d),d.assignMove(v.derivative(Y-1));let t=[];for(let e=0,s=l.length;e<s;++e)if(l[e].first.lte(l[e].second)){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M;if(Zn(g,c,l[e].first,l[e].second,D,E,s)){m.push(s);let n=s.sub(_);n.limitPrecisionThis(w),t.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(l[e].first,n)),n=s.add(_),n.limitPrecisionThis(w),t.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(n,l[e].second))}else t.push(l[e])}l=t,t=[],c.assignMove(g)}else{g.assignMove(v.derivative(Y));const t=jn(g,E,u,h);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<=2);for(let e=0;e<t;e++)u[e].gt(P)&&u[e].lt(y)&&!u[e].isZero()&&m.push(u[e].clone());if(m.length>1&&m.sort(((t,e)=>t.compare(e))),m.length>0){let t=m[0].sub(_);t.limitPrecisionThis(w),l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(P.clone(),t));let e=1===m.length?y.clone():m[1].sub(_);t=m[0].add(_),t.limitPrecisionThis(w),e.limitPrecisionThis(w),l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(t,e)),m.length>1&&(e=2===m.length?y.clone():m[2].sub(_),e.limitPrecisionThis(w),t=m[1].add(_),t.limitPrecisionThis(w),l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(t,e)),m.length>2&&(t=m[2].add(_),t.limitPrecisionThis(w),l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(t,y.clone()))))}else l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(P.clone(),y.clone()));c.assignCopy(g),d.assignMove(v.derivative(Y-1))}else{g.assignMove(v.derivative(Y));1===Wn(g,u,h)&&(u[0].gt(P)&&u[0].lt(y)&&!u[0].isZero()&&m.push(u[0].clone()),c.assignMove(g),d.assignMove(v.derivative(Y-1)))}m.sort(((t,e)=>t.compare(e))),0===l.length&&(c.assignMove(v.derivative(v.power())),c.isZero()||l.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(P.clone(),y.clone())));let A=0,T=0,I=0;const M=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M;for(;;){if(T<l.length){if(l[T].first.gt(l[T].second)){T++;continue}let t=!1;if(I<m.length&&m[I].lt(l[T].first)&&(t=!0),!t){Zn(v,c,l[T].first,l[T].second,n,i,M)&&(M.lt(p)?u[A++].setThis(p):M.gt(f)?u[A++].setThis(f):u[A++].setThis(M)),T++;continue}}if(!(I<m.length))break;0!==I&&m[I-1].equals(m[I])||Hn(v,c,m[I],n)&&(M.setThis(m[I]),M.lt(p)?M.setThis(p):M.gt(f)&&M.setThis(f),0!==A&&u[A].equals(M)||u[A++].setThis(M)),I++}return S&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.gt(P)&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.lt(y)&&(u[A++].setThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(u,0,A,((t,e)=>t.compare(e)))),r&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai.gt(P)&&_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai.lt(y)&&(u[A++].setThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(u,0,A,((t,e)=>t.compare(e)))),A}function On(t){const e=t.getElement(t.power());e.limitPrecisionThis(53),e.absThis();const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah.clone();for(let n=0,i=t.power();n<i;n++){const e=t.getElement(n);e.limitPrecisionThis(53),e.gt(s)&&s.setThis(e)}return s.divThis(e),s.addThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ai),s.mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(1+100*Number.EPSILON)),s}function Qn(t,e,s,n){let i=n;if(!t.isEmpty()){i=0;for(let e=0;e<n;++e)t.containsCoordinate(s[e].value())&&(i!==e&&s[i].setThis(s[e]),i++)}i>1&&(s[0].gt(s[1])&&(s[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[1])),i>2&&(s[0].gt(s[2])&&(s[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[2])),s[1].gt(s[2])&&(s[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[1],s[1]=s[2]))));for(let r=0;r<i;++r)s[r].limitPrecisionThis(e);return i}function Jn(t,e,s,n,i,r){return ti(t,e,s,r,n,i)}function Kn(t,e,s,n,i,r){let o=i;if(n)return r[0]=1,o=.5*(e-t)*(s(t)+s(e)),o;const a=r[0],h=(e-t)/a,u=t,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(let l=1;l<=r[0];++l){const t=(l-.5)*h;m.add(s(u+t))}return o=.5*(o+(e-t)*m.getResult()/a),r[0]*=2,o}function $n(t,e,s,n,i,r,o){let a=0,h=Math.abs(i-s[t]);const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(e,Number.NaN),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(e,Number.NaN);for(let d=0;d<e;++d){const e=Math.abs(i-s[t+d]);e<h&&(a=d,h=e),u[d]=n[t+d],m[d]=n[t+d]}let l=0,c=0,g=0;r[0]=n[t+a],a--;for(let d=1;d<e;d++){for(let n=0;n<e-d;n++){if(c=s[t+n]-i,g=s[t+n+d]-i,l=c-g,0===l)return!1;const e=(u[n+1]-m[n])/l;u[n]=c*e,m[n]=g*e}if(2*(a+1)<e-d){const t=a+1;o[0]=u[t]}else{const t=a;o[0]=m[t],a--}r[0]+=o[0]}return!0}function ti(t,s,n,i,r,o){if(n<s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("xTo < xFrom"),n===s)return 0;const a=[0];let u=Number.MAX_VALUE;const m=[Number.MAX_VALUE];let l=0;const c=32,g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(c+1,Number.NaN),d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(c+1,Number.NaN),_=[0];g[0]=1;let p=0,f=0;for(let e=0;e<c;e++){if(l=Kn(s,n,i,0===e,l,_),d[e]=l,e+1>=t){$n(e+1-t,t,g,d,0,a,m)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("polynomial_interpolation");const s=r*Math.abs(a[0])+o,n=Math.abs(u-a[0]);if(n<=s&&Math.abs(m[0])<=s){if(p++,p>1&&(n<=.1*f||0===f||p>2))return a[0]}else p=0;f=n,u=a[0]}d[e+1]=d[e],g[e+1]=.25*g[e]}return a[0]}class ei{constructor(){this.area=Number.NaN,this.centroid_x=Number.NaN,this.centroid_y=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}let si=class{constructor(t,e){this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return 0===t?this.len-hi(this.b,e,!1):0}getError(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}};function ni(t,e,s,n,i){let r=!0;const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(o);let a=r?0:1,h=o[1][a]-o[0][a],u=o[2][a]-o[0][a];const m=Jn(5,e,s,n,i,(t=>{let e;if(t<=.5){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(0,h,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(h,u,t);e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(s,n,t)}else{const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(0,h,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(h,u,t);e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(s,n,t)}return e*gi(o,1,t).length()}));r=!1,a=r?0:1,h=o[1][a]-o[0][a],u=o[2][a]-o[0][a];const l=Jn(5,e,s,n,i,(t=>{let e;if(t<=.5){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(0,h,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(h,u,t);e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(s,n,t)}else{const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(0,h,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(h,u,t);e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(s,n,t)}return e*gi(o,1,t).length()}));return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(m,l)}function ii(t){t.m_cachedValues=null}function ri(t,e){e.m_cachedValues=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_cachedValues,t.m_cachedValues=e.m_cachedValues)}function oi(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new ei;return ai(t,e.specialPoints),xi(t,e),e}function ai(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(s);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,8);n[0].set(0);let i=1;{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3);ki(s,t,!1);const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);let o=cn(t[2].mul(2),t[1],r,e[0]);o<0&&(o=0);for(let s=0;s<o;s++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(e[s].value(),0,1)||(n[i]=e[s],i++)}{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3);Gi(s,t,!1);const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);let o=cn(t[2].mul(2),t[1],r,e[0]);o<0&&(o=0);for(let s=0;s<o;s++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(e[s].value(),0,1)||(n[i]=e[s],i++)}if(n[i].set(1),i++,i>2){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(n,0,i,((t,e)=>t.value()-e.value()));let t=0,e=n[0].value(),s=1;for(let r=1;r<i;r++)n[r].eq(n[r-1])?(e+=n[r].value(),s++):(s>1&&(e/=s,n[t].set(e)),t++,n[t]=n[r],e=n[r].value(),s=1);t++,i=t}n[0].set(0),n[i-1].set(1),e.length=i;for(let r=0;r<i;r++)e[r]=n[r].value()}function hi(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return t.queryControlPoints(n),ui(n,e,s)}function ui(t,e,s){if(s){if(e<0)return e;if(e>1)return e-1+ui(t,1,!1)}if(1===e)return mi(t);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return Ii(t,e,n,null),mi(n)}function mi(t){if(t[0].equals(t[1]))return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[2],t[0]);if(t[1].equals(t[2]))return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[0],t[2]);const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[0],t[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[2],t[1]),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[0],t[2]);if(e-s<=e*Number.EPSILON)return s;const n=1,i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);zi(t,i,!0);const r=4*((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[2].x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[2].y)),o=2*(i[2].x*i[1].x+i[2].y*i[1].y),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[1].x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(i[1].y);if(1e-14*(Math.abs(o)+Math.abs(a))>=Math.abs(r)){if(1e-14*Math.abs(a)>=Math.abs(o)){return Math.sqrt(a)*n}return 2/(3*o)*(Math.pow(o*n+a,1.5)-Math.pow(a,1.5))}const h=o/r,u=a/r,m=u-h*h,l=n+h;if(0===m){if(h>=0&&l>=0||h<=0&&l<=0){return Math.abs(.5*Math.sqrt(r)*(l*l-h*h))}return.5*Math.sqrt(r)*(l*l+h*h)}const c=Math.sqrt(m+l*l),g=Math.sqrt(u);return.5*Math.sqrt(r)*(l*c-h*g+m*Math.log(Math.abs((l+c)/(h+g))))}function li(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e,0,1);let n=gi(t,1,s);return n.isZero()&&(n=gi(t,2,s)),n}function ci(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return t.queryControlPoints(n),gi(n,e,s)}function gi(t,e,s){if(1===e){const e=t[1].sub(t[0]).mul(1-s).add(t[2].sub(t[1]).mul(s));return e.mulThis(2),e}return 2===e?t[2].sub(t[1]).sub(t[1].sub(t[0]).mul(2)):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.construct(0,0)}function di(t,e,s){{const e=Ye.constructPoint2D(t[1]).subE(Ye.constructPoint2D(t[0])),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1).subE(s),i=Ye.constructPoint2D(t[2]).subE(Ye.constructPoint2D(t[1])),r=e.mulE(n).addE(i.mulE(s));return r.mulThisE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(2)),r}}function _i(t,e,s){const n=hi(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const i=[0];return 1!==tn(new si(t,e),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),1,i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),i[0]}function pi(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return t.queryControlPoints(e),fi(e)}function fi(t){return-t[1].sub(t[0]).crossProduct(t[2].sub(t[0]))/3}function Pi(t){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),t.getEndXY()),s=t.calculateUpperLength2D();return s-e<=8*Number.EPSILON*s}function yi(t){return t.m_cachedValues}function xi(t,e){t.m_cachedValues=e}function Ci(t,e,s,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.x)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit().contains(s),"QuadraticBezierHelper::getClosestCoordinateSegment");const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(r);let o=Number.MAX_VALUE;const a=[0],h=vi(r,e,a);if(s.containsCoordinate(a[0]))o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,h);else{a[0]=s.vmin,ji(r,a[0],h),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(h,e);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;ji(r,s.vmax,t);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e);o>n&&(h.setCoordsPoint2D(t),a[0]=s.vmax,o=n)}if(!n)return a[0];if(s.vmin<=0){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2DExtended(-1,n,!0);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2D(s.vmin,i);const r=new pm({start:n,end:i}),u=r.getClosestCoordinate(e,!0);if(u<1){const t=r.getCoord2D(u),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e);s<o&&(o=s,a[0]=u-1,h.assign(t))}}if(s.vmin>=1){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2DExtended(2,n,!0);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2D(s.vmax,i);const r=new pm({start:i,end:n}),u=r.getClosestCoordinate(e,!0);if(u>0){const t=r.getCoord2D(u),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e);s<o&&(o=s,a[0]=1+u,h.assign(t))}}return a[0]}function vi(t,e,s){const n=t[2].sub(t[1]).sub(t[1].sub(t[0])),i=t[1].sub(t[0]),r=t[0].sub(e),o=r.dotProduct(i),a=r.dotProduct(n)+2*i.dotProduct(i),h=3*i.dotProduct(n),u=n.dotProduct(n),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(3,Number.NaN),l=nn(u,h,a,o,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,m),c=t[0].clone();let g=0,d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(t[0],e),_=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(t[2],e);_<d&&(g=1,c.assign(t[2]),d=_);for(let p=0;p<l;p++){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;ji(t,m[p],s),_=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s,e),_<d&&(d=_,c.assign(s),g=m[p])}return s&&(s[0]=g),c}function bi(t,e,s,n,i,r){const o=new De;if(Si(t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),o),o.inflate(i),!o.isIntersectingPoint2D(e))return 0;const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,h=Ci(t,e,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1);t.queryCoord2D(h,a);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(a,e)<=i?(n&&(n[0]=h),1):0}function Si(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n),Ei(n,e,s)}function Ei(t,e,s){if(e.equalsRange(0,1))return void s.setFromPoints(t,3);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Mi(t,e.vmin,e.vmax,n),s.setFromPoints(n,3)}function Di(t,e,s){s.setEmpty();const n=[];n.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1));const i=.5*Math.max(e.width(),e.height());for(;n.length;){const r=n.at(-1);n.pop();const o=new De;if(Ei(t,r,o),o.isIntersectingW(e)){const t=Math.max(o.width(),o.height());if(e.containsW(o)||t<=i||r.width()<1e-12)s.merge(r);else{const t=r.getCenter();n.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(r.vmin,t)),n.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(t,r.vmax))}}}}function wi(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(e);const s=Ai(e);return s&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),s}function Ai(t){let e=!1;for(let s=0;s<2;s++){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[2][s]);n>0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])<0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])<0&&(t[1][s]=t[2][s],e=!0)):n<0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])>0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])>0&&(t[1][s]=t[2][s],e=!0)):t[1][s]!==t[0][s]&&(t[1][s]=t[0][s],e=!0)}return e}function Ti(t,s,n){void 0===n&&(n=s,s=0);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(s<0||n>1)return i.setNAN(),i;if(s>n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("calculate_sub_weighted_centroid"),s===n||t.isDegenerate(0))return i.setCoords(0,0),i;const r=oi(t),o=is(t),a=Math.min(o/t.calculateUpperLength2D(),1e-7);let h=s,u=0;for(let e=1,m=r.specialPointsCount();e<m;e++)if(s<r.specialPoints[e]){u=e-1;break}i.setCoords(0,0);for(let e=u+1,m=r.specialPointsCount();e<m;e++){const s=Math.min(r.specialPoints[e],n),u=ni(t,h,s,a,o);if(i.addThis(u),h=s,n<=r.specialPoints[e])break}return i.add(t.getStartXY().mul(t.calculateLength2D()))}function Ii(t,e,s,n){(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P).setCoordsPoint2D(t[0]);(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P).setCoordsPoint2D(t[1]);(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P).setCoordsPoint2D(t[2]);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[0],t[1],e,i),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[1],t[2],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(i,r,e,o),s&&(s[0].assign(t[0]),s[1].assign(i),s[2].assign(o)),n){const e=t[2];n[0].assign(o),n[1].assign(r),n[2].assign(e)}}function Mi(t,e,s,n){if(e===s){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return ji(t,e,s),n[0]=s,n[1]=s,void(n[2]=s)}const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Ii(t,s,i,null),Ii(i,e/s,null,i),ji(t,e,i[0]),ji(t,s,i[2]),n[0].setCoordsPoint2D(i[0]),n[1].setCoordsPoint2D(i[1]),n[2].setCoordsPoint2D(i[2])}function Yi(t,e,s,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&s.isEqual(t.m_XEnd,t.m_YEnd))return;const i=!!n&&t.isMonotoneQuickAndDirty(),r=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T,o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;a.setSub(o[2],o[0]),a.leftPerpendicularThis(),o[1].setAdd(o[0],a);const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);h[0].setCoordsPoint2D(e),h[2].setCoordsPoint2D(s),a.setSub(h[2],h[0]),a.leftPerpendicularThis(),h[1].setAdd(h[0],a),r.setFromTwoTriangles(o,h)?r.transformInPlace(t.m_cp):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e,s,.5,t.m_cp),t.changeEndPoints2D(e,s),i&&wi(t)}function Ni(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp.norm(1)}function Xi(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==Vi(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function qi(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==Li(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function Fi(t,e,s,n,i){if(i){if(0!==am(e,s))return 2}else if(Le(e,s))return 1;return 0!==Ri(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function Vi(t,e,n,i,r,o,a,h,u,m){if(null!=r&&(r.length=0),null!==o&&(o.length=0),null!==i&&(i.length=0),n.isDegenerate(0)){const t=[0,0],s=e.intersectPoint(n.getStartXY(),t,a);if(s>0){if(null!==r)for(let e=0;e<s;e++)r.push(t[e]);if(null!==o)for(let t=0;t<s;t++)o.push(0);if(null!==i)for(let n=0;n<s;n++){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(t[n],s),i.push(s)}}return s}const l=rs(e,n);if(a=Math.max(a,l),e.isDegenerateToLineHelper(l)){const t=new pm({start:e.getStartXY(),end:e.getEndXY()}),s=Ds(t,n,i,r,o,a,h,m);if(r)for(let n=0;n<s;++n){const s=t.getCoord2D(r[n]);r[n]=e.getClosestCoordinate(s,!1)}return s}if(os(e,n,a))return 0;const c=Xe.constructPoint2D(n.getStartXY()),g=Xe.constructPoint2D(n.getEndXY()).sub(c),d=g.clone();d.leftPerpendicularThis();const _=Xe.constructPoint2D(e.m_cp).sub(Xe.constructPoint2D(e.getStartXY())),p=Xe.constructPoint2D(e.getEndXY()).sub(Xe.constructPoint2D(e.m_cp));let f=_.dotProduct(d).toDouble(),P=p.sub(_).dotProduct(d).toDouble();const y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(12,Number.NaN),x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(12,Number.NaN);let C=en(P,f,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),y);C<0&&(y[0]=0,y[1]=1,C=2);let v,b=0;for(let s=0,w=b;s<C;++s){const t=e.getCoord2D(y[s+w]);x[b]=n.getClosestCoordinate(t,!1),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n.getCoord2D(x[b]))<=a&&(y[b]=y[s+w],b++)}const S=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(S);{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);if(Wi(S,t,!1),t[0]=t[0].sub(c),g.x.abs().gte(g.y.abs())){const e=g.y.div(g.x);P=t[2].y.sub(t[2].x.mul(e)).toDouble(),f=t[1].y.sub(t[1].x.mul(e)).toDouble(),v=t[0].y.sub(t[0].x.mul(e)).toDouble()}else{const e=g.x.div(g.y);P=t[2].x.sub(t[2].y.mul(e)).toDouble(),f=t[1].x.sub(t[1].y.mul(e)).toDouble(),v=t[0].x.sub(t[0].y.mul(e)).toDouble()}}const E=e.getEndXY().equals(n.getStartXY())||e.getEndXY().equals(n.getEndXY()),D=[0,0];C=sn(P,f,v,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),E,D);for(let s=0,w=b;s<C;++s){y[s+w]=D[s];const t=e.getCoord2D(y[s+w]);x[b]=n.getClosestCoordinate(t,!1),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n.getCoord2D(x[b]))<=a&&(y[b]=y[s+w],b++)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(b<y.length+4),C=e.intersectPoint(n.getStartXY(),D,a);for(let s=0;s<C;s++)y[b]=D[s],x[b++]=0;C=e.intersectPoint(n.getEndXY(),D,a);for(let s=0;s<C;s++)y[b]=D[s],x[b++]=1;C=n.intersectPoint(e.getStartXY(),D,a);for(let s=0;s<C;s++)x[b]=D[s],y[b++]=0;C=n.intersectPoint(e.getEndXY(),D,a);for(let s=0;s<C;s++)x[b]=D[s],y[b++]=0;return 0===b?0:cm(t,e,n,y,x,b,i,r,o,a,h,u,m)}function Li(t,e,s,n,i,r,o,a,h,u){if(Su(s)){return Vi(t,e,new pm({start:s.getStartXY(),end:s.getEndXY()}),n,i,r,o,a,h,u)}const m=rs(e,s);if(os(e,s,o=Math.max(o,m)))return 0;const l=[],c=[],g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);{e.queryControlPoints(g);const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;s.canonicToWorldTransformation(n);const i=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;i.setInvert(n),i.transformPoints2D(g,3,t);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);Wi(t,r);const h=[r[0].x,r[1].x,r[2].x],u=[r[0].y,r[1].y,r[2].y],m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);m[0].setDouble(s.getSemiMinorAxis()),m[0].sqrThis(),m[1].setDouble(s.getSemiMajorAxis()),m[1].sqrThis(),m[2]=m[0],m[2].mul(m[1]),m[2].negate();const d=qn(h,2,u,2,null,0,m,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),l,a);if(d>0){let t=0;for(let n=0;n<d;n++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(l[n],i);const r=s.getClosestCoordinate(i,!1),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(r,a),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,a)<=o&&(l[t]=l[n],c.push(r),t++)}l.length=t}}const d=[0,1];for(let _=0;_<2;_++){const t=0===_?s.getStartXY():s.getEndXY(),e=[0];vi(g,t,e);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;ji(g,e[0],n),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n)<=o&&(l.push(e[0]),c.push(d[_]))}for(let _=0;_<2;_++){const t=[0,2];{const e=s.getClosestCoordinate(g[t[_]],!1),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(e,n),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(g[t[_]],n)<=o&&(l.push(d[_]),c.push(e))}}return cm(t,e,s,l,c,l.length,n,i,r,o,a,h,u)}function Ri(t,e,s,n,i,r,o,a,h,u){const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(m);const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);if(s.queryControlPoints(l),as(m,l,3)<0)return Ri(t,s,e,n,r,i,o,a,h,!u);const c=rs(e,s);if(os(e,s,o=Math.max(o,c)))return 0;if(er(e,s,n,i,r,o,a,h,u))return 2;const g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);{const t=new De;Ei(m,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),t);const e=new De;Ei(l,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),e);const s=Math.max(t.maxDim(),e.maxDim());if(t.inflate(3*o),e.inflate(3*o),!t.intersectW(e))return 0;if(t.maxDim()<.1*s){if(Di(m,t,g),Di(l,t,d),g.isEmpty()||d.isEmpty())return 0;Mi(m,g.vmin,g.vmax,m),Mi(l,d.vmin,d.vmax,l)}}const _=dm(m,2,l,2,o);if(0===_)return 0;const p=[],f=[];if(-1===_){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);Wi(m,t);const e=[t[0].x,t[1].x,t[2].x],s=[t[0].y,t[1].y,t[2].y],n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);Wi(l,n);const i=Yn(e,2,s,2,null,0,[n[0].x,n[1].x,n[2].x],2,[n[0].y,n[1].y,n[2].y],2,null,0,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),p,f,u,a,u);if(i>0){let t=0;for(let e=0;e<i;e++){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;ji(l,f[e],n),ji(m,p[e],s),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,n)<=o&&(p[t]=p[e],f[t]=f[e],t++)}p.length=t,f.length=t}}for(let P=0;P<2;P++){const t=0===P?m:l,e=0===P?l:m;for(let s=0;s<2;s++){const n=0===s?0:2,i=[0];vi(e,t[n],i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;ji(e,i[0],r),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[n],r)<=o&&(0===P?(p.push(0===n?0:1),f.push(i[0])):(f.push(0===n?0:1),p.push(i[0])))}}if(0===p.length)return 0;if(!g.equalsRange(0,1))for(let P=0;P<p.length;++P)p[P]=wn.recalculateParentT(g.vmin,g.vmax,p[P]);if(!d.equalsRange(0,1))for(let P=0;P<f.length;++P)f[P]=wn.recalculateParentT(d.vmin,d.vmax,f[P]);return cm(t,e,s,p,f,p.length,n,i,r,o,a,h,u)}function zi(t,e,s=!1){const n=t[1].sub(t[0]);e[1].assign(n.mul(2)),e[2].assign(t[2].sub(t[1]).sub(n)),s?e[0].setCoords(0,0):e[0].assign(t[0])}function Bi(t,e,s=!1){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n),zi(n,e,s)}function ki(t,e,s=!1){const n=0,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1][n]).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[0][n]));e[1]=i.mul(2),e[2]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2][n]).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1][n])).subE(i),s?e[0].set(0):e[0].set(t[0][n])}function Gi(t,e,s=!1){const n=1,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1][n]).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[0][n]));e[1]=i.mul(2),e[2]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2][n]).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1][n])).subE(i),s?e[0].set(0):e[0].set(t[0][n])}function Wi(t,e,s=!1){const n=Xe.constructPoint2D(t[1]),i=n.sub(Xe.constructPoint2D(t[0]));e[1]=i.mul(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(2)),e[2]=Xe.constructPoint2D(t[2]).sub(n).sub(i),e[0]=s?new Xe(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah):Xe.constructPoint2D(t[0])}function ji(t,e,s,n){if(n){if(e<0){return void _s(new pm({start:t[0],end:t[0].add(li(t,0).getUnitVector())}),e,s)}if(e>1){return void _s(new pm({start:t[2],end:t[2].add(li(t,1).getUnitVector())}),e-1,s)}}if(e<=.5){const n=t[1].clone(),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[0],n,e,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,n,t[2],e,r);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,i,r,e,o),s.assign(o)}else{const n=t[1].clone(),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[0],n,e,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,n,t[2],e,r);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,i,r,e,o),s.assign(o)}}function Zi(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n),Hi(n,e,s)}function Hi(t,e,s){if(e.value()<=.5){const n=Ye.constructPoint2D(t[1]),i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,Ye.constructPoint2D(t[0]),n,e,i);const r=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,n,Ye.constructPoint2D(t[2]),e,r);const o=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,i,r,e,o),s.setE(o)}else{const n=Ye.constructPoint2D(t[1]),i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,Ye.constructPoint2D(t[0]),n,e,i);const r=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,n,Ye.constructPoint2D(t[2]),e,r);const o=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,i,r,e,o),s.setE(o)}}function Ui(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),Oi(n,e,s)}function Oi(t,e,s){e.value()<0&&e.set(0,e.eps()),e.value()>1&&e.set(1,e.eps()),s.setE(di(t,1,e))}function Qi(t,e){let s=1;t[1].isEqualPoint2D(t[0])&&(s=2,t[2].isEqualPoint2D(t[0])&&(s=3));let n=2;t[2].isEqualPoint2D(t[3])&&(n=1,t[1].isEqualPoint2D(t[3])&&(n=0)),e[0].assign(t[0]),e[2].assign(t[3]);const i=Q.intersectLinesAtOnePoint(t[0],t[s],t[n],t[3]),r=new Q;xt(t[0],t[3],.5,r);const o=new Q;Po(t,.5,o);const a=new Q;e[1].assign(i),ji(e,.5,a);const h=new Q;e[1].assign(r),ji(e,.5,h);const u=Q.sqrDistance(o,a),m=Q.sqrDistance(o,h);return u<m?(e[1].setCoordsPoint2D(i),Math.sqrt(u)):(e[1].setCoordsPoint2D(r),Math.sqrt(m))}function Ji(t,e,s){s[0].assign(t[0]),s[1].assign(t[1]),s[2].assign(t[2]);const n=new Q;_h(t,e,.5,n);const i=new Q;ji(s,.5,i);const r=Q.sqrDistance(n,i);return Math.sqrt(r)}function Ki(t,e){e[0].assign(t[0]),e[3].assign(t[2]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[0],t[1],2/3,e[1]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[1],t[2],1/3,e[2])}function $i(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(s);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s[1],s[0]),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s[1],s[2]);let r=s[0].clone(),o=n;n>i&&(r=s[2].clone(),o=i);let a=!1;return o<=e&&0!==o&&(a=!0,t.setControlPoint1(r)),a}function tr(t,e){if(!e)return!1;const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(s);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s[1],s[0]),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s[1],s[2]);s[0].clone();let r=n;return n>i&&(s[2].clone(),r=i),r<=e&&0!==r}function er(t,e,s,n,i,r,o,a,h){const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(u);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);if(e.queryControlPoints(m),u[0].equals(m[0])){if(u[1].equals(m[1])&&u[2].equals(m[2]))return s&&(s.length=0,s.push(u[0]),s.push(u[2])),n&&(n.length=0,n.push(0),n.push(1)),i&&(i.length=0,i.push(0),i.push(1)),!0;if(!u[0].equals(m[2]))return!1}return!!(u[0].equals(m[2])&&u[1].equals(m[1])&&u[2].equals(m[0]))&&(n&&(n.length=0,n.push(0),n.push(1),h&&(n[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(1),i.push(0),h&&(i[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(i[0],i[0]=i[1]))),s&&(s.length=0,s.push(u[0]),s.push(u[2]),h&&(s[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[1]))),!0)}const sr=[[.33998104358485626,.6521451548625461],[.8611363115940526,.34785484513745385]],nr=[[.1834346424956498,.362683783378362],[.525532409916329,.31370664587788727],[.7966664774136267,.22238103445337448],[.9602898564975363,.10122853629037626]],ir=[[.09501250983763744,.1894506104550685],[.2816035507792589,.18260341504492358],[.45801677765722737,.16915651939500254],[.6178762444026438,.14959598881657674],[.755404408355003,.12462897125553388],[.8656312023878318,.09515851168249279],[.9445750230732326,.062253523938647894],[.9894009349916499,.027152459411754096]],rr=[[.04830766568773832,.0965400885147278],[.1444719615827965,.09563872007927486],[.23928736225213706,.09384439908080457],[.33186860228212767,.09117387869576389],[.42135127613063533,.08765209300440381],[.5068999089322294,.08331192422694675],[.5877157572407623,.07819389578707031],[.6630442669302152,.0723457941088485],[.7321821187402897,.06582222277636185],[.7944837959679424,.058684093478535544],[.84936761373257,.050998059262376175],[.8963211557660521,.04283589802222668],[.9349060759377397,.03427386291302143],[.9647622555875064,.02539206530926206],[.9856115115452684,.01627439473090567],[.9972638618494816,.007018610009470096]],or=[[.024350292663424433,.048690957009139724],[.07299312178779904,.04857546744150343],[.12146281929612056,.048344762234802954],[.16964442042399283,.04799938859645831],[.21742364374000708,.04754016571483031],[.2646871622087674,.04696818281621002],[.31132287199021097,.046284796581314416],[.3572201583376681,.04549162792741814],[.4022701579639916,.044590558163756566],[.4463660172534641,.04358372452932345],[.48940314570705296,.04247351512365359],[.5312794640198946,.04126256324262353],[.571895646202634,.03995374113272034],[.6111553551723933,.038550153178615626],[.6489654712546573,.03705512854024005],[.6852363130542333,.035472213256882386],[.7198818501716109,.033805161837141606],[.7528199072605319,.03205792835485155],[.7839723589433414,.030234657072402478],[.8132653151227975,.028339672614259483],[.8406292962525803,.02637746971505466],[.8659993981540928,.024352702568710874],[.8893154459951141,.022270173808383253],[.9105221370785028,.02013482315353021],[.9295691721319396,.017951715775697343],[.9464113748584028,.015726030476024718],[.9610087996520538,.013463047896718643],[.973326827789911,.011168139460131128],[.983336253884626,.008846759826363947],[.9910133714767443,.006504457968978363],[.9963401167719553,.004147033260562468],[.9993050417357722,.001783280721696433]],ar=[[.012223698960615764,.024446180196262518],[.03666379096873349,.024431569097850044],[.06108196960413957,.02440235563384958],[.08546364050451549,.024358557264690626],[.10979423112764375,.024300200167971867],[.13405919946118777,.02422731922281525],[.15824404271422493,.024139957989019287],[.18233430598533718,.024038168681024052],[.2063155909020792,.023922012136703457],[.23017356422666,.023791557781003402],[.2538939664226943,.023646883584447616],[.2774626201779044,.02348807601653591],[.3008654388776772,.02331522999406276],[.32408843502441337,.023128448824387027],[.3471177285976355,.022927844143686846],[.369939555349859,.02271353585023646],[.39254027503326744,.022485652032744968],[.414906379552275,.022244328893799764],[.43702450103710416,.02198971066846049],[.4588814198335522,.021721949538052076],[.48046407240417205,.02144120553920846],[.5017595591361445,.02114764646822135],[.5227551520511755,.02084144778075115],[.5434383024128103,.02052279248696007],[.5637966482266181,.020191871042130043],[.5838180216287631,.01984888123283086],[.6034904561585486,.019494028058706602],[.6228021939105849,.019127523609950944],[.6417416925623075,.01874958694054471],[.660297632272646,.01836044393733134],[.6784589224477192,.017960327185008687],[.6962147083695144,.017549475827117706],[.7135543776835874,.01712813542311138],[.7304675667419088,.016696557801589205],[.746944166797062,.016255000909785187],[.7629743300440948,.015803728659399347],[.7785484755064119,.015343010768865144],[.7936572947621933,.014873122602147314],[.8082917575079137,.014394345004166847],[.8224431169556439,.013906964132951985],[.8361029150609068,.013411271288616333],[.8492629875779689,.012907562739267348],[.8619154689395485,.012396139543950923],[.8740527969580318,.01187730737274028],[.8856677173453972,.011351376324080417],[.8967532880491582,.010818660739503076],[.9073028834017568,.010279479015832158],[.9173101980809605,.009734153415006806],[.9267692508789478,.009183009871660874],[.9356743882779164,.00862637779861675],[.9440202878302202,.008064589890486059],[.9518019613412644,.0074979819256347285],[.9590147578536999,.006926892566898814],[.9656543664319652,.006351663161707189],[.9717168187471366,.005772637542865698],[.9771984914639074,.00519016183267633],[.9820961084357185,.004604584256702955],[.9864067427245862,.004016254983738642],[.9901278184917344,.0034255260409102157],[.9932571129002129,.0028327514714579912],[.9957927585349812,.0022382884309626186],[.997733248625514,.0016425030186690294],[.9990774599773758,.0010458126793403489],[.9998248879471319,.00044938096029209035]];function hr(t,e,s,n){const i=.5*(n-s),r=s+i,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0);for(let a=0,h=Math.trunc(t/2);a<h;++a){let s,n;switch(t){case 4:s=sr[a][0],n=sr[a][1];break;case 8:s=nr[a][0],n=nr[a][1];break;case 16:s=ir[a][0],n=ir[a][1];break;case 32:s=rr[a][0],n=rr[a][1];break;case 64:s=or[a][0],n=or[a][1];break;case 128:s=ar[a][0],n=ar[a][1];break;default:throw new Error("Quadrature_integral: invalid n")}const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.am)(-.5,s,r),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.am)(i,s,r);o.pe(e(h)*n),o.pe(e(u)*n)}return o.getResult()*i}class ur extends Hs{constructor(t){t?t.vd?(super({vd:t.vd,bPolygon:!0}),this.m_segmentBufferCTor=fm):t.copy?(super({vd:t.copy.getDescription(),bPolygon:!0}),this.m_segmentBufferCTor=fm,t.copy.copyTo(this)):t.move?(super({move:t.move}),this.m_segmentBufferCTor=fm):t.envelope?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("envelope constructor not impl"):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("bad arg to polygon constructor"):(super({bPolygon:!0}),this.m_segmentBufferCTor=fm)}assignMove(t){return t.copyTo(this),this}assignCopy(t){return t.copyTo(this),this}getBoundary(){return Ks(this)}getExteriorRingCount(){return this.getOGCPolygonCount()}getGeometryType(){return ur.type}getDimension(){return 2}createInstance(){return new ur({vd:this.getDescription()})}equals(t,e){return this.equalsBase(t,e)}}function mr(t,s){let n,r=s,o=null;switch(r||(o=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.j)(t)?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.w)():(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)(),r=o),t){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint:n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:n=new pm({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:n=new ia({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:n=new Xh({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:n=new En({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:n=new wn({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope:n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.E({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint:n=new Ee({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline:n=new Os({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon:n=new ur({vd:r});break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultipatch:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("multipatch not impl");break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection:n=new ls({vd:r});break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Geometry.create")}return n}ur.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon;var lr=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;const cr=-1,gr=1;class dr{constructor(t){this.m_shape=t}userSort(t,e,s){this.m_shape.sortVerticesSimpleByYHelper(s,t,e)}getValue(t){return this.m_shape.getY(t)}}function _r(t){return void 0!==t.parent}class pr{constructor(t){_r(t)?(this.m_parent=t.parent,this.m_geometry=t.geometry,this.m_path=t.path,this.m_vertex=t.vertex,this.m_firstVertex=t.firstVertex,this.m_index=t.selection?0:t.index,this.m_bSkipMultiPoints=t.bSkipMultiPoints,this.m_selection=t.selection,this.m_bOneGeom=t.bOneGeom,this.m_bFirst=!0):(this.m_parent=t.copy.m_parent,this.m_geometry=t.copy.m_geometry,this.m_path=t.copy.m_path,this.m_vertex=t.copy.m_vertex,this.m_index=t.copy.m_index,this.m_bSkipMultiPoints=t.copy.m_bSkipMultiPoints,this.m_firstVertex=t.copy.m_firstVertex,this.m_bFirst=!0,this.m_selection=t.copy.m_selection,this.m_bOneGeom=t.copy.m_bOneGeom)}moveToNextHelper(){for(this.m_path=this.m_parent.getNextPath(this.m_path),this.m_index=0;this.m_geometry!==cr;){for(;this.m_path!==cr;this.m_path=this.m_parent.getNextPath(this.m_path))if(this.m_vertex=this.m_parent.getFirstVertex(this.m_path),this.m_firstVertex=this.m_vertex,this.m_vertex!==cr)return this.m_vertex;if(this.m_bOneGeom)return cr;if(this.m_geometry=this.m_parent.getNextGeometry(this.m_geometry),this.m_geometry===cr)break;this.m_bSkipMultiPoints&&!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.m_parent.getGeometryType(this.m_geometry))||(this.m_path=this.m_parent.getFirstPath(this.m_geometry))}return cr}nextSelection(){for(;this.m_index<this.m_parent.m_selectedVertices.length;){const t=this.m_parent.m_selectedVertices[this.m_index++];if(t!==cr&&(this.m_path=this.m_parent.getPathFromVertex(t),!this.m_bOneGeom||this.m_geometry===this.m_parent.getGeometryFromPath(this.m_path)))return this.m_geometry=this.m_parent.getGeometryFromPath(this.m_path),t}return cr}next(){return this.m_selection?this.nextSelection():this.m_bFirst?(this.m_bFirst=!1,this.m_vertex):this.m_vertex!==cr?(this.m_vertex=this.m_parent.getNextVertex(this.m_vertex),this.m_index++,this.m_vertex!==cr&&this.m_vertex!==this.m_firstVertex?this.m_vertex:this.moveToNextHelper()):cr}currentGeometry(){return this.m_geometry}currentPath(){return this.m_path}static create_(t,e,s,n,i,r,o,a,h){return new pr({parent:t,geometry:e,path:s,vertex:n,firstVertex:i,index:r,bSkipMultiPoints:o,selection:a,bOneGeom:h})}}class fr{constructor(t){this.parentage=t}equals(t){return this.parentage===t.parentage}}class Pr{setPrevPath(t,e){this.m_pathIndexList.setField(t,1,e)}setNextPath(t,e){this.m_pathIndexList.setField(t,2,e)}setPathFlags(t,e){this.m_pathIndexList.setField(t,6,e)}getPathFlags(t){return this.m_pathIndexList.getField(t,6)}setPathGeometry(t,e){this.m_pathIndexList.setField(t,7,e)}getPathIndex(t){return this.m_pathIndexList.getField(t,0)}setNextGeometry(t,e){this.m_geometryIndexList.setField(t,1,e)}setPrevGeometry(t,e){this.m_geometryIndexList.setField(t,0,e)}getGeometryIndex(t){return this.m_geometryIndexList.getField(t,7)}setFirstPath(t,e){this.m_geometryIndexList.setField(t,3,e)}setLastPath(t,e){this.m_geometryIndexList.setField(t,4,e)}newGeometry(t){const e=this.m_geometryIndexList.newElement();return this.m_geometryIndexList.setField(e,2,t),this.m_geometryIndexList.setField(e,5,0),this.m_geometryIndexList.setField(e,6,0),this.m_geometryIndexList.setField(e,7,this.m_geometryIndexList.elementToIndex(e)),e}freeGeometry(t){this.m_geometryIndexList.deleteElement(t)}newPath(t){const e=this.m_pathIndexList.newElement(),s=this.m_pathIndexList.elementToIndex(e);if(this.m_pathIndexList.setField(e,0,s),this.m_pathIndexList.setField(e,3,0),this.m_pathIndexList.setField(e,6,0),this.setPathGeometry(e,t),s>=this.m_pathAreas.length){const t=Math.trunc(s<16?16:3*s/2);this.m_pathAreas.length=t,this.m_pathLengths.length=t}return this.m_pathAreas[s]=0,this.m_pathLengths[s]=0,this.m_pathCount++,e}freePath(t){this.m_pathIndexList.deleteElement(t),this.m_pathCount--}newVertex(t){const e=this.m_vertexIndexList.newElement(),s=t>=0?t:this.m_vertexIndexList.elementToIndex(e);if(this.m_vertexIndexList.setField(e,0,s),t<0){if(s>=this.m_vertices.getPointCount()){const t=Math.trunc(s<16?16:3*s/2);this.m_vertices.reserveRounded(t),this.m_vertices.resizeNoInit(t),null!==this.m_segments&&(this.m_segments.length=t),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0)}this.m_segments&&(this.m_segments[s]=null)}return this.m_pointCount++,e}freeVertex(t){this.unselect(t);const e=this.getVertexIndex(t);this.m_vertexIndexList.deleteElement(t),this.m_pointCount--;for(let s=0,n=this.m_indices.length;s<n;s++){if(s===this.m_selectionIndex)continue;const t=this.m_indices[s];null!==t&&t.size()>e&&t.write(e,-1)}this.m_weights&&this.m_weights.size()>e&&this.m_weights.write(e,1),this.m_ranks&&this.m_ranks.size()>e&&this.m_ranks.write(e,gr),this.m_segmentWeights&&this.m_segmentWeights.size()>e&&this.m_segmentWeights.write(e,1),this.m_segmentRanks&&this.m_segmentRanks.size()>e&&this.m_segmentRanks.write(e,gr),this.m_segments&&this.setSegmentToIndex(e,null)}insertVertex_(t,e,s,n){this.m_hasForceSetEnvelope=0;const i=e!==cr?this.getPrevVertex(e):this.getLastVertex(t),r=i!==cr?this.getNextVertex(i):cr,o=this.newVertex(null===s?this.m_pointCount:-1),a=this.getVertexIndex(o);null!==s&&this.m_vertices.setPointByValNoCurves(a,s),this.setPathToVertex(o,t),this.setNextVertex(o,r),this.setPrevVertex(o,i),r!==cr&&this.setPrevVertex(r,o),i!==cr&&this.setNextVertex(i,o);const h=this.isClosedPath(t),u=this.getFirstVertex(t);e===cr&&this.setLastVertex(t,o),e===u&&(h&&n&&u!==cr||this.setFirstVertex(t,o)),h&&r===cr&&(this.setNextVertex(o,o),this.setPrevVertex(o,o)),this.setPathSize(t,this.getPathSize(t)+1);const m=this.getGeometryFromPath(t);return this.setGeometryVertexCount(m,this.getPointCount(m)+1),o}getHelperPoint(){return this.m_helperPoint||(this.m_helperPoint=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.m_vertices.getDescription()}),this.m_helperPoint.setXYCoords(0,0)),this.m_helperPoint}addMultiPoint(t,e){const s=this.createGeometry(t.getGeometryType(),t.getDescription());return this.appendMultiPoint(s,t,e),s}addPoint_(t,e){const s=this.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint,t.getDescription());return this.appendPoint(s,t,e),s}appendMultiPath_(t,e){if(e.isEmpty())return;const s=e.getImpl();this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+s.getPointCount()),this.m_verticesMp.addPoints(e,0,s.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const n=null!==this.m_segments||null!==s.getSegmentFlagsStreamRef();this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+s.getPointCount()),this.m_pathIndexList.setCapacity(this.m_pathIndexList.size()+s.getPathCount());for(let i=0,r=s.getPathCount();i<r;i++){if(0===s.getPathSize(i))continue;const e=this.insertPath(t,cr);this.setClosedPath(e,s.isClosedPath(i));for(let t=s.getPathStart(i),r=s.getPathEnd(i);t<r;t++){const i=this.insertVertex_(e,cr,null,!1);if(n){const e=this.getVertexIndex(i);if(1&s.getSegmentFlags(t))this.setSegmentToIndex(e,null);else{const n=new fm;s.querySegment(t,n,!0),this.setSegmentToIndex(e,n.releaseSegment())}}}s.isStrongPathStart(i)&&this.setStrongPathStart(e,!0),s.isStrongPathEnd(i)&&this.setStrongPathEnd(e,!0)}}addMultiPath(t,e){const s=this.createGeometry(t.getGeometryType(),t.getDescription());return t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon&&this.setFillRule(s,t.getFillRule()),this.appendMultiPath(s,t,e),s}appendMultiPathPolyline(t,e,s){const n=e.getImpl(),i=null!==this.m_segments||null!==n.getSegmentFlagsStreamRef(),r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;e.queryEnvelope(r);{const r=s.clone();let o=n.getPointCount();const a=n.getAccelerators();if(a&&a.getQuadTree()){o=a.getQuadTree().getIntersectionCount(r,0,n.getPointCount()+1)}if(o<e.getPointCount()){if(0===o)return;const s=n.queryLimitedSegmentIterator(r);let a=-1,h=-100,u=-1,m=0,l=-1,c=cr,g=!1,d=s.nextSegment();if(null!==d)for(;;d=s.nextSegment()){let r=null===d;const o=null!==d?s.getPathIndex():a,_=null!==d?s.getStartPointIndex():h;if(r||(a===o&&h+1===_?m++:r=!0),r){if(-1!==l){let t=-1,s=-1;if(m===u){this.setClosedPath(c,g);const i=n.getPathEnd(a);this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+i-l),this.m_verticesMp.addPoints(e,l,i),s=n.getPathSize(a),t=i-1}else if(!g||h+1<n.getPathEnd(a))this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+h+2-l),this.m_verticesMp.addPoints(e,l,h+2),s=h-l+2,t=h;else{this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+h+2-l),this.m_verticesMp?.addPoints(e,l,h+1),t=h,s=h-l+1;const i=n.getPathStart(a);this.m_verticesMp.addPoints(e,i,i+1),s+=1}this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);for(let e=0,r=l;e<s;e++,r++){const e=this.insertVertex_(c,cr,null,!1);if(i){const s=this.getVertexIndex(e);if(1&n.getSegmentFlags(r)||r>t)this.setSegmentToIndex(s,null);else{const t=new fm;n.getSegmentBuffer(r,t,!0),this.setSegmentToIndex(s,t.releaseSegment())}}}}if(null===d)break;m=1,l=_,a!==o?(c=this.insertPath(t,cr),this.setClosedPath(c,!1),u=n.getSegmentCountPath(o),g=n.isClosedPath(o),a=o):c=this.insertPath(t,cr)}h=_}return}}this.appendMultiPath_(t,e)}appendMultiPathPolygon(t,e,n){const i=e.getImpl(),r=null!==this.m_segments||null!==i.getSegmentFlagsStreamRef(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();e.queryEnvelope(o),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n.isIntersecting(o)&&!n.containsEnvelope(o));let a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.construct(Number.NEGATIVE_INFINITY,n.ymin,Number.POSITIVE_INFINITY,n.ymax),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.construct(n.xmin,Number.NEGATIVE_INFINITY,n.xmax,Number.POSITIVE_INFINITY);const u=i.getAccelerators();if(u&&u.getQuadTree()){const t=u.getQuadTree(),e=t.getIntersectionCount(a,0,0);e>t.getIntersectionCount(h,0,e+1)&&(h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a,a=h))}else a.height()>h.width()&&(h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(a,a=h));const m=[],l=i.queryLimitedSegmentIterator(a);let c=-1,g=-100,d=-1,_=0,p=-1,f=-1,P=cr,y=!0,x=l.nextSegment();if(null!==x)for(;;x=l.nextSegment()){let n=null===x;const o=null!==x?l.getPathIndex():c,a=null!==x?l.getStartPointIndex():g;if(n||(o===c?g+1===a?_++:n=!0:(n=c>=0,c<0&&(c=o,d=i.getSegmentCountPath(c),p=a,P=cr,_=1))),n){if(!(0===m.length&&d===_)){0!==m.length&&m[0].first===p||(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(e,p,p+1),-1===f&&(f=p),P===cr&&(P=this.insertPath(t,cr),this.setClosedPath(P,!0)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.insertVertex_(P,cr,null,!1));for(const{first:n,second:o}of m){-1===f&&(f=n);let a=-1,h=-1;const u=n+o-1;if(o===d){const t=u+1;h=t-n,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+h),this.m_verticesMp.addPoints(e,n,t),a=u,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===m.length)}else if(u+1<i.getPathEnd(c)){const t=u+2;h=t-n,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+h),this.m_verticesMp.addPoints(e,n,t),a=u}else{const t=i.getPathStart(c),s=t!==f?1:0,r=u+1;h=r-n+s,this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+(r-n)+s),this.m_verticesMp.addPoints(e,n,r),a=u,s>0&&this.m_verticesMp?.addPoints(e,t,t+1)}this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),P===cr&&(P=this.insertPath(t,cr),this.setClosedPath(P,!0));for(let t=0,e=n;t<h;t++,e++){const t=this.insertVertex_(P,cr,null,!1);if(r){const s=this.getVertexIndex(t);if(1&i.getSegmentFlags(e)||e>a)this.setSegmentToIndex(s,null);else{const t=new fm;i.getSegmentBuffer(e,t,!0),this.setSegmentToIndex(s,t.releaseSegment())}}}}if(0===m.length||m.at(-1).first+m.at(-1).second!==p+_){let t=p+_;t===e.getPathEnd(c)&&(t=e.getPathStart(c)),f!==t&&(this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.addPoints(e,t,t+1),this.insertVertex_(P,cr,null,!1))}}m.length=0,y=!0,o!==c&&(c=o,d=i.getSegmentCountPath(c),P=cr,f=-1),p=a,_=1}if(!x)break;{const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();x.queryLooseEnvelope(t),h.isIntersecting(t)?(y?m.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(a,1)):m.at(-1).second++,y=!1):y=!0}g=a}}appendMultiPath(t,e,s){if(void 0===s)return void this.appendMultiPath_(t,e);if(e.isEmpty())return;const n=e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon,r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();e.queryEnvelope(r),s.isIntersecting(r)&&(!s.containsEnvelope(r)&&e.getPointCount()>10?n?this.appendMultiPathPolygon(t,e,s):this.appendMultiPathPolyline(t,e,s):this.appendMultiPath_(t,e))}appendPoint(t,e,s){if(e.isEmpty())return;if(void 0!==s&&!s.contains(e.getXY()))return;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+1),this.m_verticesMp.add(e),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+1);const n=this.insertPath(t,cr);this.insertVertex_(n,cr,null,!1)}appendMultiPoint_(t,e){this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+e.getPointCount()),this.m_verticesMp.addPoints(e,0,e.getPointCount()),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+e.getPointCount());const s=this.insertPath(t,cr);for(let n=0,i=e.getPointCount();n<i;n++)this.insertVertex_(s,cr,null,!1)}appendMultiPoint(t,e,s){if(void 0===s)return void this.appendMultiPoint_(t,e);const n=e.getAttributeStreamRef(0);let i=0;for(let u=0,m=e.getPointCount();u<m;u++){const t=n.readPoint2D(2*u);s.contains(t)&&i++}this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+i);let r=-1,o=-1,a=0;for(let u=0,m=e.getPointCount();u<m;u++){const t=n.readPoint2D(2*u);s.contains(t)?(-1===r&&(r=u,o=u),o++):r>=0&&(this.m_verticesMp.addPoints(e,r,o-r),r=-1,a++)}if(r>0&&(this.m_verticesMp.addPoints(e,r,o-r),a++),!a)return;this.m_xyStream=this.m_vertices.getAttributeStreamRef(0),this.m_vertexIndexList.setCapacity(this.m_vertexIndexList.size()+i);const h=this.insertPath(t,cr);for(let u=0,m=e.getPointCount();u<m;u++){const t=n.readPoint2D(2*u);s.contains(t)&&this.insertVertex_(h,cr,null,!1)}}splitSegmentForward(t,s,n,r,o){const a=this.getNextVertex(t);a===cr&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Edit_shape.split_segment_forward_");const h=this.getHelperPoint(),u=this.getPathFromVertex(t);let m=t;const l=this.hasSegmentParentage();for(let e=0,c=s.getResultSegmentCount(n);e<c;e++){const t=this.getVertexIndex(m),r=this.getNextVertex(m),g=s.getResultSegment(n,e);let d=null;if(g.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine&&(d=g.clone(),d.dropAllAttributes()),0===e&&(g.queryStart(h),this.setSegmentToIndex(t,null),this.setPointEx(m,h,s.getResultSegmentStartPointRank(n,e),s.getResultSegmentStartPointWeight(n,e),o)),this.setSegmentRank(m,s.getResultSegmentInteriorRank(n,e)),this.setSegmentWeight(m,s.getResultSegmentInteriorWeight(n,e)),l){const t=s.getResultSegmentSegmentParentage(n,e),i=s.getResultSegmentStartPointIsBreak(n,e);this.setSegmentParentageAndBreak(m,t,i)}if(g.queryEnd(h),e<c-1){this.setSegmentToIndex(t,d);const i=this.insertVertex(u,r,h);this.setWeight(i,s.getResultSegmentEndPointWeight(n,e)),this.setRank(i,s.getResultSegmentEndPointRank(n,e)),this.select(i),m=i}else{this.setPointEx(a,h,s.getResultSegmentEndPointRank(n,e),s.getResultSegmentEndPointWeight(n,e),o);const i=s.getResultSegmentEndPointIsBreak(n,e);this.setSegmentParentageBreakVertex(a,i),this.setSegmentToIndex(t,d)}}}splitSegmentBackward(t,s,n,r,o){const a=this.getNextVertex(t);a===cr&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Edit_shape.split_segment_backward_");const h=this.getHelperPoint(),u=this.getPathFromVertex(t);let m=t;const l=this.hasSegmentParentage();for(let e=0,c=s.getResultSegmentCount(n);e<c;e++){const t=c-e-1,r=this.getVertexIndex(m),g=this.getNextVertex(m),d=s.getResultSegment(n,t);let _=null;if(d.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine&&(_=d.clone(),_.reverse(),_.dropAllAttributes()),0===e&&(d.queryEnd(h),this.setSegmentToIndex(r,null),this.setPointEx(m,h,s.getResultSegmentEndPointRank(n,t),s.getResultSegmentEndPointWeight(n,t),o),this.setSegmentParentageAndBreak(m,s.getResultSegmentSegmentParentage(n,t),s.getResultSegmentEndPointIsBreak(n,t))),d.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine?this.setSegmentToIndex(r,null):this.setSegmentToIndex(r,_),this.setSegmentRank(m,s.getResultSegmentInteriorRank(n,t)),this.setSegmentWeight(m,s.getResultSegmentInteriorWeight(n,t)),d.queryStart(h),e<c-1){const e=this.insertVertex(u,g,h);this.setWeight(e,s.getResultSegmentStartPointWeight(n,t)),this.setRank(e,s.getResultSegmentStartPointRank(n,t)),this.select(e),m=e,l&&this.setSegmentParentageAndBreak(e,s.getResultSegmentSegmentParentage(n,t),s.getResultSegmentEndPointIsBreak(n,t))}else this.setPointEx(a,h,s.getResultSegmentStartPointRank(n,t),s.getResultSegmentStartPointWeight(n,t),o)}}selected_(t){return this.getUserIndex(t,this.m_selectionIndex)>=0}allocateIndex(t=!0){if(this.m_deletedIndices.length){const e=this.m_deletedIndices.pop();return t&&e.setRange(-1,0,e.size()),e}return t?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0,-1):(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0)}recycleUserIndex(t){this.m_deletedIndices.push(t)}allocatePathIndex(){if(this.m_deletedPathIndices.length){const t=this.m_deletedPathIndices.at(-1);return this.m_deletedPathIndices.pop(),t}return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0)}recyclePathUserIndex(t){this.m_deletedPathIndices.push(t)}peelALoop_(t,e,s){const n=this.getNextVertex(t),i=this.getNextVertex(e),r=this.getVertexIndex(t),o=this.getVertexIndex(e);if(this.setNextVertex(t,i),this.setPrevVertex(i,t),this.setNextVertex(e,n),this.setPrevVertex(n,e),this.m_segments){const t=this.getSegmentFromIndex(r),e=this.getSegmentFromIndex(o);this.setSegmentToIndex(o,null),this.setSegmentToIndex(r,e),this.setSegmentToIndex(o,t)}if(this.hasSegmentParentage()){let s=this.getSegmentParentage(e),n=this.getSegmentParentage(t);-1===s&&-1===n||(n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s,s=n),this.setSegmentParentageAndBreak(t,n),this.setSegmentParentageAndBreak(e,s))}if(s){const e=this.getPathFromVertex(t),s=this.getGeometryFromPath(e),r=[!1],o=this.insertClosedPath(s,cr,n,this.getFirstVertex(e),r);r[0]&&this.setFirstVertex(e,i);let a=this.getPathSize(e);return a-=this.getPathSize(o),this.setPathSize(e,a),o}return cr}sortVerticesSimpleByYHelper(t,e,s){t.sort(e,s,((t,e)=>{let s=this.compareVerticesSimpleY(t,e);if(0===s){const n=this.getPathInternalIndexFromVertex(t),i=this.getPathInternalIndexFromVertex(e);s=n<i?-1:n>i?1:0}return s}))}sortVerticesSimpleByYHelper3D(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}constructor(){this.m_verticesMp=null,this.m_vertices=null,this.m_xyStream=null,this.m_vertexDescription=null,this.m_segments=null,this.m_weights=null,this.m_ranks=null,this.m_segmentWeights=null,this.m_segmentRanks=null,this.m_indices=[],this.m_deletedIndices=[],this.m_pathAreas=[],this.m_pathLengths=[],this.m_pathindices=[],this.m_deletedPathIndices=[],this.m_geometryIndices=[],this.m_selectedVertices=[],this.m_helperPoint=null,this.m_forceSetEnvelope=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.n.constructEmpty(),this.m_hasForceSetEnvelope=0,this.m_workPoint2D=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),this.m_workPoint2_2D=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),this.m_curveStitcher=null,this.m_pathCount=0,this.m_pointCount=0,this.m_firstGeometry=cr,this.m_lastGeometry=cr,this.m_vertexIndexList=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.S(5),this.m_pathIndexList=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.S(8),this.m_geometryIndexList=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.S(8),this.m_bHasAttributes=!1,this.m_selectedCount=0,this.m_selectionIndex=-1,this.m_selection=!1,this.m_bucketSort=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.B,this.m_segmentParentageIndex=-1}getTotalPointCount(){return this.m_pointCount}getEnvelope2D(t){if(0!==this.m_hasForceSetEnvelope)return new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D(this.m_forceSetEnvelope.xmin,this.m_forceSetEnvelope.ymin,this.m_forceSetEnvelope.xmax,this.m_forceSetEnvelope.ymax);const e=this.hasCurves(),s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),n=this.queryVertexIterator();let i=!0;for(let r=n.next();r!==cr;r=n.next()){if(i?s.merge(this.getXY(r)):s.mergeNe(this.getXY(r)),e){const t=this.getSegment(r);if(null!==t){const e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();t.queryLooseEnvelope(e),s.mergeEnvelope2D(e)}}i=!1}return s}getEnvelope3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.n.constructEmpty()}forceSetEnvelope2D(t){this.m_hasForceSetEnvelope=1,this.m_forceSetEnvelope.setCoords(t.xmin,t.ymin,0,t.xmax,t.ymax,0)}forceSetEnvelope3D(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}forgetForceSetEnvelope(){this.m_hasForceSetEnvelope=0}getGeometryCount(){return this.m_geometryIndexList.size()}addGeometry(t,s){const n=t.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(n))return this.addMultiPath(t,s);if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint)return this.addMultiPoint(t,s);if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)return this.addPoint_(t,s);if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope){const e=new ur;return e.addEnvelope(t,!1),this.addMultiPath(e,s)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("")}appendGeometry(t,s){this.mergeVertexDescription(s.getDescription());const n=s.getGeometryType();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(n)?this.appendMultiPath(t,s):n!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""):this.appendMultiPoint(t,s)}assignRankToGeometryVertices(t,e){e<gr&&(e=gr);const s=this.queryVertexIterator();for(let n=s.next();n!==cr;n=s.next())this.setRank(n,e),this.setSegmentRank(n,e)}collapseAllGeometriesToFirst(){this.collapseGeometriesToFirst(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown)}collapseGeometriesToFirst(t){this.dbgVerifyVertexCounts();let e=cr,s=-1,n=-1;for(let r=this.getFirstGeometry();r!==cr;)if(t!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown&&this.getGeometryType(r)!==t)r=this.getNextGeometry(r);else{if(e===cr){e=r,s=this.getPathCount(e),n=this.getPointCount(e),r=this.getNextGeometry(r);continue}for(let s=this.getFirstPath(r);s!==cr;s=this.getNextPath(s))this.setPathGeometry(s,e);s+=this.getPathCount(r),n+=this.getPointCount(r);const t=this.getLastPath(e),i=this.getFirstPath(r);t!==cr?this.setNextPath(t,i):this.setFirstPath(e,i),i!==cr&&(this.setPrevPath(i,t),this.setLastPath(e,this.getLastPath(r))),this.setFirstPath(r,cr),this.setLastPath(r,cr);const o=r;r=this.getNextGeometry(r),this.setGeometryVertexCount(o,0),this.removeGeometry(o)}return e!==cr&&(this.setGeometryVertexCount(e,n),this.setGeometryPathCount(e,s),this.dbgVerifyVertexCounts()),e}setFillRule(t,e){let s=this.m_geometryIndexList.getField(t,2);s&=-134217729,s|=1===e?134217728:0,this.m_geometryIndexList.setField(t,2,s)}getFillRule(t){return 134217728&this.m_geometryIndexList.getField(t,2)?1:0}setGeometryModified(t,e){let s=this.m_geometryIndexList.getField(t,2);!!(67108864&s)!==e&&(s&=-67108865,s|=e?67108864:0,this.m_geometryIndexList.setField(t,2,s))}getGeometryModified(t){return!!(67108864&this.m_geometryIndexList.getField(t,2))}setGeometryModifiedWithVertex(t,e){const s=this.getPathFromVertex(t),n=this.getGeometryFromPath(s);this.setGeometryModified(n,e)}getGeometryModifiedWithVertex(t){const e=this.getPathFromVertex(t),s=this.getGeometryFromPath(e);return this.getGeometryModified(s)}swapGeometry(t,e){const s=this.getFirstPath(t),n=this.getFirstPath(e),i=this.getLastPath(t),r=this.getLastPath(e);for(let c=this.getFirstPath(t);c!==cr;c=this.getNextPath(c))this.setPathGeometry(c,e);for(let c=this.getFirstPath(e);c!==cr;c=this.getNextPath(c))this.setPathGeometry(c,t);this.setFirstPath(t,n),this.setFirstPath(e,s),this.setLastPath(t,r),this.setLastPath(e,i);const o=this.getPointCount(t),a=this.getPathCount(t),h=this.getPointCount(e),u=this.getPathCount(e);this.setGeometryVertexCount(t,h),this.setGeometryVertexCount(e,o),this.setGeometryPathCount(t,u),this.setGeometryPathCount(e,a);const m=this.m_geometryIndexList.getField(t,2),l=this.m_geometryIndexList.getField(e,2);this.m_geometryIndexList.setField(t,2,l),this.m_geometryIndexList.setField(e,2,m)}addPathFromMultiPath(t,e,s){const n=this.createGeometry(s?_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon:_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline,t.getDescription()),r=t.getImpl();if(t.getPathSize(e)<2)return n;this.m_vertices.reserveRounded(this.m_vertices.getPointCount()+t.getPathSize(e)),this.m_verticesMp.addPoints(t,t.getPathStart(e),r.getPathEnd(e)),this.m_xyStream=this.m_vertices.getAttributeStreamRef(0);const o=this.insertPath(n,cr);this.setClosedPath(o,r.isClosedPath(e)||s);const a=null!==this.m_segments||null!==r.getSegmentFlagsStreamRef();for(let i=r.getPathStart(e),h=r.getPathEnd(e);i<h;i++){const t=this.insertVertex_(o,cr,null,!1);if(a){const e=this.getVertexIndex(t);if(1&r.getSegmentFlags(i))this.setSegmentToIndex(e,null);else{const t=new fm;r.querySegment(i,t,!0),this.setSegmentToIndex(e,t.releaseSegment())}}}return r.isStrongPathStart(e)&&this.setStrongPathStart(o,!0),r.isStrongPathEnd(e)&&this.setStrongPathEnd(o,!0),n}getGeometry(t){const e=this.getGeometryType(t),s=mr(e,this.m_verticesMp.getDescription()),n=this.getPointCount(t);if(0===n)return s;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(e)){const e=s.getImpl(),i=this.getPathCount(t),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(i+1),o=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.z)(i+1,0),a=s.getDescription(),h=this.hasCurves();for(let s=0,u=a.getAttributeCount();s<u;s++){const h=a.getSemantics(s),u=lr.getComponentCount(h),m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.t)(h,n),l=this.m_vertices.getAttributeStreamRef(h);let c=0,g=0,d=0;for(let e=this.getFirstPath(t);e!==cr;e=this.getNextPath(e)){let t=0;this.isClosedPath(e)&&(t|=1),this.isExterior(e)&&(t|=8),this.isStrongPathStart(e)&&(t|=2),this.isStrongPathEnd(e)&&(t|=4),t&&o.setBits(g,t);const s=this.getPathSize(e);if(r.write(g++,d),d+=s,0===h){const t=l,s=m;let n;for(let i=this.getFirstVertex(e);c<d;i=this.getNextVertex(i),c++){const e=this.getVertexIndex(i);n=t.readPoint2D(2*e),s.writePoint2D(2*c,n)}}else for(let n=this.getFirstVertex(e);c<d;n=this.getNextVertex(n),c++){const t=this.getVertexIndex(n);for(let e=0;e<u;e++){const s=l.readAsDbl(t*u+e);m.writeAsDbl(c*u+e,s)}}}e.setAttributeStreamRef(h,m),r.write(i,n)}if(e.setPathFlagsStreamRef(o),e.setPathStreamRef(r),e.notifyModifiedFlags(65535),h){let s=0,n=0;for(let i=this.getFirstPath(t);i!==cr;i=this.getNextPath(i)){s+=this.getPathSize(i);for(let t=this.getFirstVertex(i);n<s;t=this.getNextVertex(t)){const s=this.getSegment(t);null!==s&&s.isCurve()&&e.replaceSegment(n,s,!0),n++}}}}else if(e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint){const e=s.getImpl(),i=s.getDescription();e.reserve(n),e.resizeNoInit(n);for(let s=0,n=i.getAttributeCount();s<n;s++){const n=i.getSemantics(s),r=lr.getComponentCount(n),o=e.getAttributeStreamRef(n),a=this.m_vertices.getAttributeStreamRef(n);let h=0;const u=this.getFirstPath(t),m=this.getPathSize(u);for(let t=this.getFirstVertex(u);h<m;t=this.getNextVertex(t),h++){const e=this.getVertexIndex(t);for(let t=0;t<r;t++){const s=a.readAsDbl(e*r+t);o.writeAsDbl(h*r+t,s)}}e.setAttributeStreamRef(n,o)}e.notifyModifiedFlags(65535)}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("getGeometry");return s}queryPointGeometryOnly(t,s){this.getGeometryType(t)!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("get_point_geometry_only");const n=this.getPointCount(t);if(n>1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("get_point_geometry_only"),0===n)return s.assignVertexDescription(this.m_vertexDescription),void s.setEmpty();const r=this.getFirstPath(t),o=this.getFirstVertex(r);this.queryPoint(o,s)}removeGeometry(t){for(let n=this.getFirstPath(t);n!==cr;n=this.removePath(n));const e=this.getPrevGeometry(t),s=this.getNextGeometry(t);return e!==cr?this.setNextGeometry(e,s):this.m_firstGeometry=s,s!==cr?this.setPrevGeometry(s,e):this.m_lastGeometry=e,this.freeGeometry(t),s}createGeometry(t,e){void 0===e&&(e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.j)());const s=this.newGeometry(t);return this.m_vertices||(this.m_verticesMp=new Ee({vd:e}),this.m_vertices=this.m_verticesMp.getImpl()),this.mergeVertexDescription(e),this.m_firstGeometry===cr?(this.m_firstGeometry=s,this.m_lastGeometry=s):(this.setPrevGeometry(s,this.m_lastGeometry),this.setNextGeometry(this.m_lastGeometry,s),this.m_lastGeometry=s),s}getFirstGeometry(){return this.m_firstGeometry}getLastGeometry(){return this.m_lastGeometry}getNextGeometry(t){return this.m_geometryIndexList.getField(t,1)}getPrevGeometry(t){return this.m_geometryIndexList.getField(t,0)}getGeometryType(t){return 16777215&this.m_geometryIndexList.getField(t,2)}setGeometryUserIndex(t,e,s){const n=this.m_geometryIndices[e],i=this.getGeometryIndex(t);i>=n.size()&&n.resize(Math.max(1.25*i,16),-1),n.write(i,s)}getGeometryUserIndex(t,e){const s=this.getGeometryIndex(t),n=this.m_geometryIndices[e];return s<n.size()?n.read(s):-1}createGeometryUserIndex(){for(let e=0;e<this.m_geometryIndices.length;e++)if(null===this.m_geometryIndices[e])return this.m_geometryIndices[e]=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0),e;this.m_geometryIndices.push((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(0));const t=this.m_geometryIndices.length-1;return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<=Number.MAX_SAFE_INTEGER),t}removeGeometryUserIndex(t){for(this.m_geometryIndices[t]=null;this.m_geometryIndices.length>0&&null===this.m_geometryIndices.at(-1);)this.m_geometryIndices.pop()}getFirstPath(t){return this.m_geometryIndexList.getField(t,3)}getLastPath(t){return this.m_geometryIndexList.getField(t,4)}hasPointFeatures(){for(let t=this.getFirstGeometry();t!==cr;t=this.getNextGeometry(t))if(!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.getGeometryType(t)))return!0;return!1}getPointCount(t){return this.m_geometryIndexList.getField(t,5)}getPathCount(t){return this.m_geometryIndexList.getField(t,6)}filterClosePoints(t,e,n,r,o){const a=t*t;let h=0;const u=this.hasCurves(),m=this.hasSegmentParentage(),l=!0;for(let g=o===cr?this.getFirstGeometry():o;g!==cr;g=o===cr?this.getNextGeometry(g):cr){const t=this.getGeometryType(g);if(!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(t))continue;if(n&&t!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon)continue;const o=this.getGeometryType(g)===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon;let d=this.getGeometryModified(g);for(let n=this.getFirstPath(g);n!==cr;){let t=0;for(let e=this.getFirstVertex(n);t<Math.trunc(this.getPathSize(n)/2);){const i=this.getNextVertex(e);if(i===cr)break;const o=this.getXY(e),c=this.getXY(i);let _=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(o,c),p=!0;do{if(_<=a){if(u){const t=this.getSegment(e);if(null!==t){const e=t.calculateLength2D();if(_=e*e,_>a)break}}if(0===_?0===h&&(h=-1):h=1,i!==this.getLastVertex(n)){const t=m&&(this.getSegmentParentageBreakVertex(e)||this.getSegmentParentageBreakVertex(i));if(this.transferAllDataToTheVertex(i,e,l),this.removeVertex(i,!1),r&&!d&&(this.setGeometryModified(g,!0),d=!0),m&&e!==i){this.setSegmentParentageBreakVertex(e,t);const n=this.getNextVertex(e);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n!==cr),this.isDiscontinuousSegmentParentage(n)&&this.setSegmentParentageBreakVertex(n,!0)}}p=!1}}while(0);p&&(e=this.getNextVertex(e)),t++}let i=this.getFirstVertex(n);for(let e=this.isClosedPath(n)?i:this.getLastVertex(n);this.getPathSize(n)>0;){const t=this.getPrevVertex(e);if(t===cr)break;{const o=this.getXY(t),c=this.getXY(e);let _=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(o,c),p=!0;do{if(_<=a){if(u){const e=this.getSegment(t);if(null!==e){const t=e.calculateLength2D();if(_=t*t,_>a)break}}if(0===_?0===h&&(h=-1):h=1,m){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.m_segmentParentageIndex>=0);const n=this.getUserIndex(e,this.m_segmentParentageIndex);this.transferAllDataToTheVertex(t,e,l),this.setUserIndex(e,this.m_segmentParentageIndex,n)}else this.transferAllDataToTheVertex(t,e,l);const o=m&&(this.getSegmentParentageBreakVertex(e)||this.getSegmentParentageBreakVertex(t));this.removeVertex(t,!0),r&&!d&&(this.setGeometryModified(g,!0),d=!0),m&&t!==e&&(o||this.isDiscontinuousSegmentParentage(e))&&this.setSegmentParentageBreakVertex(e,!0),i===t&&(i=this.getFirstVertex(n)),p=!1}}while(0);if(p&&(e=this.getPrevVertex(e),e===i))break}}const c=this.getPathSize(n);let _=e&&c<(o?3:2);_&&o&&2===c&&u&&(_=!this.pathHasCurves(n)),_?(n=this.removePath(n),0===h&&(h=-1),r&&!d&&(this.setGeometryModified(g,!0),d=!0)):n=this.getNextPath(n)}}return h}filterClosePoints3D(t,e,n,i,r,o){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}hasDegenerateSegments(t){for(let e=this.getFirstGeometry();e!==cr;e=this.getNextGeometry(e))if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.getGeometryType(e)))for(let s=this.getFirstPath(e);s!==cr;){const e=this.getPathSize(s);if(0===e)return!0;let n=this.getFirstVertex(s);for(let s=0;s<e;s++){const e=this.getNextVertex(n);if(e===cr)break;const s=this.getVertexIndex(n),i=this.getSegmentFromIndex(s);let r=0;if(null!==i){if(r=i.calculateLowerLength2D(),r<=t){if(r=i.calculateUpperLength2D(),r<=t)return!0;if(r=i.calculateLength2D(),r<=t)return!0}}else{const n=this.getVertexIndex(e);if(r=this.m_vertices.getShortestDistance(s,n),r<=t)return!0}n=e}s=this.getNextPath(s)}return!1}hasDegenerateSegments3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}transferAllDataToTheVertex(t,e,s=!1){const n=this.getVertexIndex(t),i=this.getVertexIndex(e);if(s){let t=1,e=1;if(this.m_ranks&&(t=this.getRankWithIndex(n),e=this.getRankWithIndex(i)),t>e&&this.setRankWithIndex(i,t),t>=e&&this.m_weights){const s=this.getWeightWithIndex(n),r=this.getWeightWithIndex(i);(t>e||s>r)&&this.setWeightWithIndex(i,s)}}else{if(this.m_weights){const t=this.getWeightWithIndex(n);this.setWeightWithIndex(i,t)}if(this.m_ranks){const t=this.getRankWithIndex(n);this.setRankWithIndex(i,t)}}if(this.m_segmentWeights){const t=this.getSegmentWeightWithIndex(n);this.setSegmentWeightWithIndex(i,t)}if(this.m_segmentRanks){const t=this.getSegmentRankWithIndex(n);this.setSegmentRankWithIndex(i,t)}for(let o=0,a=this.m_indices.length;o<a;o++)if(o!==this.m_selectionIndex&&null!==this.m_indices[o]){const s=this.getUserIndex(t,o);this.setUserIndex(e,o,s)}const r=this.selected(t);r!==this.selected(e)&&(r?this.select(e):this.unselect(e))}splitSegmentAxisAware(t,s,n,i,r){let o=0;const a=this.getNextVertex(t);a===cr&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const h=this.getVertexIndex(t),u=this.getVertexIndex(a),m=this.getSegmentFromIndex(h);let l=this.m_vertices.getShortestDistance(h,u);const c=this.getPathFromVertex(t),g=this.m_bHasAttributes;g&&m&&(l=m.calculateLength2D());const d=this.getSegmentParentage(t),_=this.getHelperPoint();if(m){let t=0,e=0,r=cr;for(let p=0;p<n;p++){const n=s[p];if(t<n&&n<1){const s=m.cut(t,n);if(null!==i&&(p>0&&s.setStartXY(i[p-1]),s.setEndXY(i[p]),s.normalizeAfterEndpointChange(),e=p),g){const t=l>0?m.calculateSubLengthFromStart(n)/l:0;this.m_vertices.interpolateTwoVertices(h,u,t,_)}_.setXY(s.getEndXY()),r=this.insertVertex(c,a,_),o++;const f=this.getPrevVertex(r),P=this.getVertexIndex(f);this.setSegmentToIndex(P,s),-1!==d&&this.setSegmentParentageAndBreak(r,d,!1),t=n}}if(r!==cr){const s=m.cut(t,1);null!==i&&(s.setStartXY(i[e]),s.normalizeAfterEndpointChange());const n=this.getVertexIndex(r);this.setSegmentToIndex(n,s)}}else{let t=0;for(let e=0;e<n;e++){const n=s[e];if(t<n&&n<1){this.m_vertices.interpolateTwoVertices(h,u,n,_);const t=this.insertVertex(c,a,_);o++,-1!==d&&this.setSegmentParentageAndBreak(t,d,!1)}t=n}}return o}splitSegment(t,e,s,n=null){return this.splitSegmentAxisAware(t,e,s,n,-1)}snapControlPoints(t,s,n){this.getNextVertex(t)===cr&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");let i=t,r=!1;for(let e=0;e<s;++e){const t=this.getVertexIndex(i),e=this.getSegmentFromIndex(t);if(e){const t=e.snapControlPoints(n);r||=t}i=this.getNextVertex(i)}return r}snapControlPointsOnSelection(t){if(!this.hasCurves())return!1;let e=0;const s=this.queryVertexIteratorOnSelection();for(let n=s.next();n!==cr;n=s.next()){const s=this.getVertexIndex(n),i=this.getSegmentFromIndex(s);i&&(e|=i.snapControlPoints(t)?1:0)}return 0!==e}calculateSubLength2D(t,e,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}setPoint(t,e,s){if(this.setPointOnly(t,e),null!==this.m_segments){const n=this.getVertexIndex(t),i=this.getSegmentFromIndex(n);null!==i&&(i.setStartXY(e.getXY()),i.normalizeAfterEndpointChange(),s&&i.ensureXYMonotone());const r=this.getPrevVertex(t);if(r!==cr){const t=this.getVertexIndex(r),n=this.getSegmentFromIndex(t);null!==n&&(n.setEndXY(e.getXY()),n.normalizeAfterEndpointChange(),s&&n.ensureXYMonotone())}}}setPointEx(t,e,s,n,i){this.setPoint(t,e,i);const r=this.getVertexIndex(t);this.setWeightWithIndex(r,n),this.setRankWithIndex(r,s)}setPointOnly(t,e){const s=this.getVertexIndex(t);this.m_vertices.setPointByValNoCurves(s,e)}setPointOnlyEx(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}queryPoint(t,e){const s=this.getVertexIndex(t);this.m_vertices.getPointByVal(s,e)}setXY(t,e){this.setXYCoords(t,e.x,e.y)}setXYCoords(t,e,s){const n=this.getVertexIndex(t);if(this.m_vertices?.setXYCoordsNoCurves(n,e,s),null!==this.m_segments){const i=this.getSegmentFromIndex(n);null!==i&&(i.setStartXYCoords(e,s),i.normalizeAfterEndpointChange());const r=this.getPrevVertex(t);if(r!==cr){const t=this.getVertexIndex(r),n=this.getSegmentFromIndex(t);null!=n&&(n.setEndXYCoords(e,s),n.normalizeAfterEndpointChange())}}}setXYMonotonic(t,e,s){const n=this.getVertexIndex(t);if(this.m_vertices.setXYCoordsNoCurves(n,e,s),null!==this.m_segments){const i=this.getSegmentFromIndex(n);if(null!==i){const t=i.getEndXY();i.setCoordsForIntersector(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(e,s),t,!1),i.ensureXYMonotone()}const r=this.getPrevVertex(t);if(r!==cr){const t=this.getVertexIndex(r),n=this.getSegmentFromIndex(t);if(null!==n){const t=n.getStartXY();n.setCoordsForIntersector(t,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(e,s),!1),n.ensureXYMonotone()}}}}setXYMonotonicPoint2D(t,e){this.setXYMonotonic(t,e.x,e.y)}queryXY(t,e){const s=this.getVertexIndex(t);return this.m_vertices.queryXY(s,e)}getXY(t){const e=this.getVertexIndex(t);return this.m_vertices.getXY(e)}getXYWithIndex(t){return this.m_xyStream.readPoint2D(2*t)}static setSegDefault(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setXYZ(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setXYZCoords(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}queryXYZ(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getXYZ(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d.getNAN()}getXYZWithIndex(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d.getNAN()}mergeVertexDescription(t){this.m_verticesMp.mergeVertexDescription(t),this.m_vertexDescription=this.m_verticesMp.getDescription(),this.m_bHasAttributes=this.m_vertexDescription.getAttributeCount()>1}addAttribute(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getAttributeAsDbl(t,e,s){return this.m_vertices.getAttributeAsDbl(t,this.getVertexIndex(e),s)}queryAttributeAsDbl(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setAttribute(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}setAttributeInt(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getVertexDescription(){return this.m_vertexDescription}getMinPathVertexY(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getVertexIndex(t){return this.m_vertexIndexList.getField(t,0)}getY(t){const e=this.getVertexIndex(t);return this.m_vertices.queryXY(e,this.m_workPoint2D),this.m_workPoint2D.y}getX(t){return this.getXY(t).x}isEqualXY(t,e){return this.queryXY(t,this.m_workPoint2D),this.queryXY(e,this.m_workPoint2_2D),this.m_workPoint2D.isEqualPoint2D(this.m_workPoint2_2D)}isEqualXYPoint2D(t,e){return this.queryXY(t,this.m_workPoint2D),this.m_workPoint2D.isEqualPoint2D(e)}isEqualXYZPoint3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}setWeight(t,e){e<1&&(e=1);const s=1===e;if(null==this.m_weights){if(s)return;this.m_weights=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(t);if(n>=this.m_weights.size()){if(s)return;this.m_weights.resize(n+1,1)}this.m_weights.write(n,e)}setWeightWithIndex(t,e){e<1&&(e=1);const s=1===e;if(null===this.m_weights){if(s)return;this.m_weights=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(this.m_vertices.getPointCount(),1)}if(t>=this.m_weights.size()){if(s)return;this.m_weights.resize(t+1,1)}this.m_weights.write(t,e)}getWeight(t){if(null===this.m_weights)return 1;const e=this.getVertexIndex(t);return e>=this.m_weights.size()?1:this.m_weights.read(e)}getWeightWithIndex(t){return null===this.m_weights||t>=this.m_weights.size()?1:this.m_weights.read(t)}getRank(t){if(null===this.m_ranks)return gr;const e=this.getVertexIndex(t);return e>=this.m_ranks.size()?gr:this.m_ranks.read(e)}getRankWithIndex(t){return null===this.m_ranks||t>=this.m_ranks.size()?gr:this.m_ranks.read(t)}setRank(t,e){e<gr&&(e=gr);const s=e===gr;if(null===this.m_ranks){if(s)return;this.m_ranks=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(this.m_vertices.getPointCount(),gr)}const n=this.getVertexIndex(t);if(n>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(n+1,gr)}this.m_ranks.write(n,e)}setRankWithIndex(t,e){e<gr&&(e=gr);const s=e===gr;if(null===this.m_ranks){if(s)return;this.m_ranks=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(this.m_vertices.getPointCount(),gr)}if(t>=this.m_ranks.size()){if(s)return;this.m_ranks.resize(t+1,gr)}this.m_ranks.write(t,e)}setSegmentWeight(t,e){e<1&&(e=1);const s=1===e;if(null===this.m_segmentWeights){if(s)return;this.m_segmentWeights=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(this.m_vertices.getPointCount(),1)}const n=this.getVertexIndex(t);if(n>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(n+1,1)}this.m_segmentWeights.write(n,e)}setSegmentWeightWithIndex(t,e){e<1&&(e=1);const s=1===e;if(null==this.m_segmentWeights){if(s)return;this.m_segmentWeights=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.D)(this.m_vertices.getPointCount(),1)}if(t>=this.m_segmentWeights.size()){if(s)return;this.m_segmentWeights.resize(t+1,1)}this.m_segmentWeights.write(t,e)}getSegmentWeight(t){if(null===this.m_segmentWeights)return 1;const e=this.getVertexIndex(t);return e>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(e)}getSegmentWeightWithIndex(t){return null==this.m_segmentWeights||t>=this.m_segmentWeights.size()?1:this.m_segmentWeights.read(t)}getSegmentRank(t){if(null===this.m_segmentRanks)return Pr.st_defaultRank;const e=this.getVertexIndex(t);return e>=this.m_segmentRanks.size()?Pr.st_defaultRank:this.m_segmentRanks.read(e)}getSegmentRankWithIndex(t){return null===this.m_segmentRanks||t>=this.m_segmentRanks.size()?gr:this.m_segmentRanks.read(t)}setSegmentRank(t,e){e<gr&&(e=gr);const s=e===gr;if(null===this.m_segmentRanks){if(s)return;this.m_segmentRanks=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(this.m_vertices.getPointCount(),gr)}const n=this.getVertexIndex(t);if(n>=this.m_segmentRanks.size()){if(s)return;this.m_segmentRanks.resize(n+1,gr)}this.m_segmentRanks.write(n,e)}setSegmentRankWithIndex(t,e){e<gr&&(e=gr);const s=e===gr;if(null===this.m_segmentRanks){if(s)return;this.m_segmentRanks=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.y)(this.m_vertices.getPointCount(),gr)}if(t>=this.m_segmentRanks.size()){if(s)return;this.m_segmentRanks.resize(t+1,gr)}this.m_segmentRanks.write(t,e)}removeWeights(){this.m_weights=null,this.m_segmentWeights=null}removeRanks(){this.m_ranks=null,this.m_segmentRanks=null}setUserIndex(t,e,s){const n=this.m_indices[e],i=this.getVertexIndex(t);if(n.size()<=i){if(-1===s)return;n.resize(this.m_vertices.getPointCount(),-1)}n.write(i,s)}getUserIndex(t,e){const s=this.getVertexIndex(t),n=this.m_indices[e];if(s<n.size()){return n.read(s)}return-1}addToUserIndex(t,e,s){const n=this.m_indices[e],i=this.getVertexIndex(t);n.size()<=i&&n.resize(this.m_vertices.getPointCount(),-1);const r=n.read(i);n.write(i,r+s)}createUserIndex(){for(let e=0;e<this.m_indices.length;e++)if(null===this.m_indices[e])return this.m_indices[e]=this.allocateIndex(),e;this.m_indices.push(this.allocateIndex());const t=this.m_indices.length-1;return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()),t}createUserIndexUninitialized(){for(let e=0;e<this.m_indices.length;e++)if(null===this.m_indices[e])return this.m_indices[e]=this.allocateIndex(!1),e;this.m_indices.push(this.allocateIndex(!1));const t=this.m_indices.length-1;return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<=Number.MAX_SAFE_INTEGER),t}fillUserIndexForGeometry(t,e,s){const n=this.m_indices[e],i=n.size();for(let r=this.getFirstPath(t);r!==cr;r=this.getNextPath(r)){let t=this.getFirstVertex(r);for(let e=0,o=this.getPathSize(r);e<o;e++,t=this.getNextVertex(t)){const e=this.getVertexIndex(t);e<i&&n.write(e,s)}}}fillUserIndexForSelection(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}removeUserIndex(t){for(this.recycleUserIndex(this.m_indices[t]),this.m_indices[t]=null;this.m_indices.length>0&&null===this.m_indices[this.m_indices.length-1];)this.m_indices.pop()}replaceCurveWithLine(t){if(null!==this.m_segments){const e=this.getVertexIndex(t);this.setSegmentToIndex(e,null)}}queryLineConnector(t,e,s=!1){const n=this.getNextVertex(t);if(n===cr)return!1;if(!this.m_bHasAttributes||s){const s=this.getXY(t);e.setStartXY(s);const i=this.getXY(n);e.setEndXY(i)}else{const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:this.getVertexDescription()});this.queryPoint(t,s),e.setStart(s),this.queryPoint(n,s),e.setEnd(s)}return!0}queryLineConnector3D(t,e,n=!1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}hasCurves(){return null!==this.m_segments}geometryHasCurves(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}pathHasCurves(t){if(!this.hasCurves())return!1;const e=this.getFirstVertex(t);if(e===cr)return!1;const s=this.getPathSize(t);let n=e;for(let r=0;r<s;r++,n=this.getNextVertex(n)){const t=this.getSegment(n);if(null!==t&&t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return!0}return!1}insertPath(t,s){let n=cr;s!==cr?(t!==this.getGeometryFromPath(s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),n=this.getPrevPath(s)):n=this.getLastPath(t);const i=this.newPath(t);return s!==cr&&this.setPrevPath(s,i),this.setNextPath(i,s),this.setPrevPath(i,n),n!==cr?this.setNextPath(n,i):this.setFirstPath(t,i),s===cr&&this.setLastPath(t,i),this.setGeometryPathCount(t,this.getPathCount(t)+1),i}removePath(t){const e=this.getPrevPath(t),s=this.getNextPath(t),n=this.getGeometryFromPath(t);return e!==cr?this.setNextPath(e,s):this.setFirstPath(n,s),s!==cr?this.setPrevPath(s,e):this.setLastPath(n,e),this.clearPath(t),this.setGeometryPathCount(n,this.getPathCount(n)-1),this.freePath(t),s}clearPath(t){const e=this.getFirstVertex(t);if(e!==cr){let s=e;for(let e=0,i=this.getPathSize(t);e<i;e++){const t=s;s=this.getNextVertex(s),this.freeVertex(t)}const n=this.getGeometryFromPath(t);this.setGeometryVertexCount(n,this.getPointCount(n)-this.getPathSize(t))}this.setPathSize(t,0)}getNextPath(t){return this.m_pathIndexList.getField(t,2)}getPrevPath(t){return this.m_pathIndexList.getField(t,1)}getPathSize(t){return this.m_pathIndexList.getField(t,3)}isClosedPath(t){return!!(1&this.getPathFlags(t))}setClosedPath(t,e){if(this.isClosedPath(t)===e)return;if(this.getPathSize(t)>0){const s=this.getFirstVertex(t),n=this.getLastVertex(t);if(e){this.setNextVertex(n,s),this.setPrevVertex(s,n);const t=this.getVertexIndex(n);this.setSegmentToIndex(t,null)}else{this.setNextVertex(n,cr),this.setPrevVertex(s,cr);const t=this.getVertexIndex(n);this.setSegmentToIndex(t,null)}}const s=(1|this.getPathFlags(t))-1;this.setPathFlags(t,s|(e?1:0))}closeAllPaths(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}isStrongPathStart(t){return!!(8&this.getPathFlags(t))}isStrongPathEnd(t){return!!(16&this.getPathFlags(t))}setStrongPathStart(t,e){const s=(8|this.getPathFlags(t))-8;this.setPathFlags(t,s|(e?8:0))}setStrongPathEnd(t,e){const s=(16|this.getPathFlags(t))-16;this.setPathFlags(t,s|(e?16:0))}getGeometryFromPath(t){return this.m_pathIndexList.getField(t,7)}isExterior(t){return!!(2&this.getPathFlags(t))}setExterior(t,e){const s=(2|this.getPathFlags(t))-2;this.setPathFlags(t,s|(e?2:0))}getRingArea(t){if(this.isRingAreaValid(t))return this.m_pathAreas[this.getPathIndex(t)];const e=this.getFirstVertex(t);if(e===cr)return 0;const s=this.getXY(e),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.K(0),r=this.getPathSize(t);if(r>2){const t=s.clone(),i=t.x,o=t.y;let a=this.getNextVertex(e);const h=this.getXY(a);a=this.getNextVertex(a);const u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();for(let e=2;e<r;e++,a=this.getNextVertex(a))this.queryXY(a,u),n.pe((u.x-t.x)*(h.y-o)),t.setCoordsPoint2D(h),h.setCoordsPoint2D(u);n.pe((i-t.x)*(h.y-o))}if(this.hasCurves()){let t=e;for(let e=0;e<r;e++,t=this.getNextVertex(t)){const e=this.getSegment(t);if(null===e||e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)continue;const s=2*e.calculateArea2DHelper();n.pe(s)}}this.setRingAreaValid(t,!0);const o=.5*n.getResult();return this.m_pathAreas[this.getPathIndex(t)]=o,o}getPathIndexInternal(t){return this.getPathIndex(t)}getPathInternalIndexFromVertex(t){return this.getPathIndex(this.getPathFromVertex(t))}setPathUserIndex(t,e,s){const n=this.m_pathindices[e],i=this.getPathIndex(t);n.size()<this.m_pathAreas.length&&n.resize(this.m_pathAreas.length,-1),n.write(i,s)}getPathUserIndex(t,e){const s=this.getPathIndex(t),n=this.m_pathindices[e];return s<n.size()?n.read(s):-1}createPathUserIndex(){for(let e=0;e<this.m_pathindices.length;e++)if(null===this.m_pathindices[e])return this.m_pathindices[e]=this.allocatePathIndex(),e;this.m_pathindices.push(this.allocatePathIndex());const t=this.m_pathindices.length-1;return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t>=0&&t<=Number.MAX_SAFE_INTEGER),t}fillPathUserIndexForGeometry(t,e,s){const n=this.m_pathindices[e],i=n.size();for(let r=this.getFirstPath(t);r!==cr;r=this.getNextPath(r)){const t=this.getPathIndex(r);t<i&&n.write(t,s)}}removePathUserIndex(t){for(this.recyclePathUserIndex(this.m_pathindices[t]),this.m_pathindices[t]=null;this.m_pathindices.length>0&&null===this.m_pathindices.at(-1);)this.m_pathindices.pop()}movePath(t,s,n){if(n===cr&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),s===n)return;const i=this.getNextPath(n);let r=this.getPrevPath(n);const o=this.getGeometryFromPath(n);r===cr?this.setFirstPath(o,i):this.setNextPath(r,i),i===cr?this.setLastPath(o,r):this.setPrevPath(i,r),this.setGeometryVertexCount(o,this.getPointCount(o)-this.getPathSize(n)),this.setGeometryPathCount(o,this.getPathCount(o)-1),r=s===cr?this.getLastPath(t):this.getPrevPath(s),this.setPrevPath(n,r),this.setNextPath(n,s),s===cr?this.setLastPath(t,n):this.setPrevPath(s,n),r===cr?this.setFirstPath(t,n):this.setNextPath(r,n),this.setGeometryVertexCount(t,this.getPointCount(t)+this.getPathSize(n)),this.setGeometryPathCount(t,this.getPathCount(t)+1),this.setPathGeometry(n,t)}addVertex(t,e){this.m_vertices.getPointByVal(this.getVertexIndex(e),this.getHelperPoint());return this.insertVertex_(t,cr,this.getHelperPoint(),!1)}insertVertex(t,e,s){return this.insertVertex_(t,e,s,!0)}removeVertex(t,e){const s=this.getPathFromVertex(t),n=this.getPrevVertex(t),i=this.getNextVertex(t);n!==cr&&this.setNextVertex(n,i);const r=this.getPathSize(s);t===this.getFirstVertex(s)&&this.setFirstVertex(s,r>1?i:cr),i!==cr&&this.setPrevVertex(i,n),t===this.getLastVertex(s)&&this.setLastVertex(s,r>1?n:cr);if(this.hasCurves()&&n!==cr&&i!==cr){const s=this.getVertexIndex(t),r=this.getVertexIndex(n),o=this.getVertexIndex(i);if(e){const t=this.getSegmentFromIndex(r);if(null!==t){const e=this.m_vertices.getXY(o);t.setEndXY(e),t.normalizeAfterEndpointChange()}this.setSegmentToIndex(s,null)}else{const t=this.getSegmentFromIndex(s);if(this.setSegmentToIndex(s,null),null!==t){const e=this.m_vertices.getXY(r);t.setStartXY(e),t.normalizeAfterEndpointChange()}this.setSegmentToIndex(r,t)}}this.setPathSize(s,r-1);const o=this.getGeometryFromPath(s);return this.setGeometryVertexCount(o,this.getPointCount(o)-1),this.freeVertex(t),i}removeVertices(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t!==e);const n=this.getPathFromVertex(t),i=this.getPrevVertex(t),r=this.getPrevVertex(e);i!==cr&&this.setNextVertex(i,e);let o=this.getPathSize(n);const a=this.getVertexIndex(t);this.setSegmentToIndex(a,null),this.setPrevVertex(e,i),this.setPrevVertex(t,cr),this.setNextVertex(r,cr);let h=0,u=t;const m=this.getFirstVertex(n);let l=!1;for(;;){const t=this.getNextVertex(u);if(l||=m===u,this.freeVertex(u),h++,u===r)break;u=t}o-=h,l&&this.setFirstVertex(n,o>0?e:cr),this.setPathSize(n,o);const c=this.getGeometryFromPath(n);this.setGeometryVertexCount(c,this.getPointCount(c)-h)}getFirstVertex(t){return this.m_pathIndexList.getField(t,4)}getLastVertex(t){return this.m_pathIndexList.getField(t,5)}getNextVertex(t){return this.m_vertexIndexList.getField(t,2)}getPrevVertex(t){return this.m_vertexIndexList.getField(t,1)}getNextVertexEx(t,e){return e>0?this.m_vertexIndexList.getField(t,2):this.m_vertexIndexList.getField(t,1)}getPrevVertexEx(t,e){return e>0?this.m_vertexIndexList.getField(t,1):this.m_vertexIndexList.getField(t,2)}getPathFromVertex(t){return this.m_vertexIndexList.getField(t,3)}addPoint(t,e){return this.insertVertex_(t,cr,e,!1)}getGeometryFromVertex(t){return this.getGeometryFromPath(this.getPathFromVertex(t))}replaceNaNs(t,e){this.m_vertexDescription.hasAttribute(t)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),this.m_vertices.replaceNaNs(t,e)}removeNaNVertices(){for(let t=this.getFirstGeometry();t!==cr;t=this.getNextGeometry(t))for(let e=this.getFirstPath(t);e!==cr;e=this.getNextPath(e)){let t=this.getFirstVertex(e);for(let s=0,n=this.getPathSize(e);s<n;s++)t=this.getXY(t).isFinite()?this.getNextVertex(t):this.removeVertex(t,!0)}}queryVertexIterator(t=cr){return this.queryVertexIteratorEx(!1,t)}queryVertexIteratorEx(t,e=cr){let s=cr,n=cr,i=cr,r=cr,o=0,a=!1;for(s=e!==cr?e:this.getFirstGeometry();s!==cr;s=this.getNextGeometry(s))if(!t||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(this.getGeometryType(s))){for(n=this.getFirstPath(s);n!==cr;n=this.getNextPath(n))if(i=this.getFirstVertex(n),r=i,o=0,i!==cr){a=!0;break}if(a||e!==cr)break}return a||(s=cr),pr.create_(this,s,n,i,r,o,t,!1,e!==cr)}queryVertexIteratorOnSelection(t=cr){return this.m_selection?pr.create_(this,t,cr,cr,cr,-1,!1,!0,t!==cr):this.queryVertexIteratorEx(!1,t)}hasSelection(){return this.m_selection}createEmptySelection(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}removeSelection(){this.m_selection&&(this.m_selectedVertices.length=0,this.removeUserIndex(this.m_selectionIndex),this.m_selectionIndex=-1,this.m_selection=!1,this.m_selectedCount=0)}select(t){return!!this.selected(t)||(this.setUserIndex(t,this.m_selectionIndex,this.m_selectedVertices.length),this.m_selectedVertices.push(t),this.m_selectedCount++,!1)}unselect(t){if(!this.m_selection)return;const e=this.getUserIndex(t,this.m_selectionIndex);e>=0&&(this.m_selectedVertices[e]=cr,this.setUserIndex(t,this.m_selectionIndex,-1),this.m_selectedCount--)}selected(t){return!this.m_selection||this.selected_(t)}getSelectedCount(){return this.m_selection?this.m_selectedCount:this.getTotalPointCount()}createSelectionForCrackingAndClustering(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}peelALoop(t,e){this.peelALoop_(t,e,!1)}peelALoopIntoAPath(t,e){return this.peelALoop_(t,e,!0)}applyTransformation(t){if(this.m_verticesMp.applyTransformation(t),null!==this.m_segments)for(let e=0,s=this.m_segments.length;e<s;e++)this.m_segments[e]&&this.m_segments[e].applyTransformation(t)}setGeometryType(t,e){this.m_geometryIndexList.setField(t,2,e)}splitSegmentWithIntersector(t,e,s,n,i){n?this.splitSegmentForward(t,e,s,!0,i):this.splitSegmentBackward(t,e,s,!0,i)}setPrevVertex(t,e){this.m_vertexIndexList.setField(t,1,e)}setNextVertex(t,e){this.m_vertexIndexList.setField(t,2,e)}setPathToVertex(t,e){this.m_vertexIndexList.setField(t,3,e)}setPathSize(t,e){this.m_pathIndexList.setField(t,3,e)}setFirstVertex(t,e){this.m_pathIndexList.setField(t,4,e)}setLastVertex(t,e){this.m_pathIndexList.setField(t,5,e)}getSegment(t){if(null!=this.m_segments){const e=this.getVertexIndex(t);return this.getSegmentFromIndex(e)}return null}isCurve(t){if(null===this.m_segments)return!1;const e=this.getVertexIndex(t);return this.m_segments.length>e&&null!==this.m_segments[e]}querySegment(t,e,s=!0,n=!1){const i=this.getNextVertex(t);if(i===cr)return!1;const r=this.getSegment(t);if(!r)return!s&&(this.queryLineConnector(t,e.createLine(),n),!0);if(e.copyFrom(r,!0),n)return!0;if(this.m_vertexDescription.getAttributeCount()>1){const s=this.getHelperPoint();this.queryPoint(t,s),e.get().setStart(s),this.queryPoint(i,s),e.get().setEnd(s)}return!0}getSegmentFromIndex(t){const e=null!==this.m_segments&&this.m_segments.length>t?this.m_segments[t]:null;return e||null}getAndClearSegmentFromIndex(t){const e=null!==this.m_segments&&this.m_segments.length>t?this.m_segments[t]:null;return e||null}setSegmentToIndex(t,e){if(this.m_hasForceSetEnvelope=0,null===this.m_segments){if(!e)return;this.m_segments=[],this.m_segments.length=this.m_vertices.getPointCount()}t>=this.m_segments.length&&(this.m_segments.length=t+1),this.m_segments[t]=e}setGeometryPathCount(t,e){this.m_geometryIndexList.setField(t,6,e)}setGeometryVertexCount(t,e){this.m_geometryIndexList.setField(t,5,e)}ringParentageCheckInternal(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}reverseRingInternal(t){const e=this.hasCurves(),s=this.hasSegmentParentage();let n=null,i=-1,r=t;if(e){const t=this.getVertexIndex(r);n=this.getAndClearSegmentFromIndex(t)}s&&(i=this.getSegmentParentage(r));do{const t=this.getPrevVertex(r),o=this.getNextVertex(r);if(this.setNextVertex(r,t),this.setPrevVertex(r,o),e){const t=this.getVertexIndex(o),e=this.getSegmentFromIndex(t);n&&n.reverse(),this.setSegmentToIndex(t,n),n=e}if(s){const t=this.getSegmentParentage(o);this.setSegmentParentagePreserveBreak(o,i),i=t}r=o}while(r!==t);this.dbgVerifyIntegrity(t)}setTotalPointCount(t){this.m_pointCount=t}removePathOnly(t){const e=this.getPrevPath(t),s=this.getNextPath(t),n=this.getGeometryFromPath(t);e!==cr?this.setNextPath(e,s):this.setFirstPath(n,s),s!==cr?this.setPrevPath(s,e):this.setLastPath(n,e),this.setFirstVertex(t,cr),this.setLastVertex(t,cr),this.freePath(t)}insertClosedPath(t,e,s,n,i){const r=this.insertPath(t,cr);let o=0,a=s;for(i[0]=!1;;){a===n&&(i[0]=!0),this.setPathToVertex(a,r),o++;const t=this.getNextVertex(a);if(t===s)break;a=t}return this.setClosedPath(r,!0),this.setPathSize(r,o),i[0]&&(s=n),this.setFirstVertex(r,s),this.setLastVertex(r,this.getPrevVertex(s)),this.setRingAreaValid(r,!1),r}findVertex2D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}findVertex3D(t,e,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}dbgVerifyMonotone(){}dbgCheckSelection(){}dbgVerifySegment(t){}dbgVerifyIntegrity(t,e=!0){}dbgVerifyVertexCounts(){}dbgVerifyCurves(){}dbgDumpGeometry(t,e){}getNextNthVertex(t,e){if(0===e)return t;let s=t;for(let n=0;n<e;++n)if(s=e>0?this.getNextVertex(s):this.getPrevVertex(s),s===cr)return cr;return s}removeVertexInternal(t,e){const s=this.getPrevVertex(t),n=this.getNextVertex(t);s!==cr&&this.setNextVertex(s,n),n!==cr&&this.setPrevVertex(n,s);if(this.hasCurves()&&s!==cr&&n!==cr){const i=this.getVertexIndex(t),r=this.getVertexIndex(s),o=this.getVertexIndex(n);if(e){const t=this.getSegmentFromIndex(r);if(null!==t){const e=this.m_vertices.getXY(o);t.setEndXY(e),t.normalizeAfterEndpointChange()}this.setSegmentToIndex(i,null)}else{const t=this.getSegmentFromIndex(i);if(this.setSegmentToIndex(i,null),null!==t){const e=this.m_vertices.getXY(r);t.setStartXY(e),t.normalizeAfterEndpointChange()}this.setSegmentToIndex(r,t)}}return this.freeVertex(t),n}isRingAreaValid(t){return!!(4&this.getPathFlags(t))}setRingAreaValid(t,e){const s=(4|this.getPathFlags(t))-4;this.setPathFlags(t,s|(e?4:0))}compareVerticesSimpleY(t,e){return this.queryXY(t,this.m_workPoint2D),this.queryXY(e,this.m_workPoint2_2D),this.m_workPoint2D.compare(this.m_workPoint2_2D)}compareVerticesSimpleY3D(t,e){return this.getXYZ(t).compare(this.getXYZ(e))}compareVerticesSimpleX(t,e){return this.getXY(t).compareX(this.getXY(e))}sortVerticesSimpleByYHeapMerge(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}sortVerticesSimpleByY(t,e,s){this.m_bucketSort.sort(t,e,s,new dr(this))}sortVerticesSimpleByX(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}sortVerticesSimpleByY3D(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}snapVertexForPoleClipping(t,e){const s=this.getPrevVertex(t);s!==cr&&this.replaceCurveWithLine(s);this.getNextVertex(t)!==cr&&this.replaceCurveWithLine(t);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryXY(t,n),n.y=e,this.setXY(t,n)}setSegmentParentageAndBreak(t,e,n=!0){if(-1===this.m_segmentParentageIndex){if(-1===e)return;this.m_segmentParentageIndex=this.createUserIndex()}e>=0&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e<=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)()>>1),e<<=1,e|=n?1:0),this.setUserIndex(t,this.m_segmentParentageIndex,e)}setSegmentParentagePreserveBreak(t,e){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=-1),-1===this.m_segmentParentageIndex){if(-1===e)return;this.m_segmentParentageIndex=this.createUserIndex()}if(e>=0){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e<=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)()>>1),e<<=1;e|=this.getSegmentParentageBreakVertex(t)?1:0}this.setUserIndex(t,this.m_segmentParentageIndex,e)}getSegmentParentage(t){if(-1===this.m_segmentParentageIndex)return-1;const e=this.getUserIndex(t,this.m_segmentParentageIndex);return e<0?e:e>>1}getOriginalSegmentInfo(t){if(-1!==this.m_segmentParentageIndex){const e=this.getSegmentParentage(t);return new fr(e)}return new fr(-1)}setSegmentParentageBreakVertex(t,e){if(-1===this.m_segmentParentageIndex)return;let s=this.getUserIndex(t,this.m_segmentParentageIndex);s<0||!!(1&s)!==e&&(e?s|=1:s&=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.j)()>>1<<1,this.setUserIndex(t,this.m_segmentParentageIndex,s))}getSegmentParentageBreakVertex(t){if(-1===this.m_segmentParentageIndex)return!0;const e=this.getUserIndex(t,this.m_segmentParentageIndex);return e<0||!!(1&e)}isDiscontinuousSegmentParentage(t){const e=this.getPrevVertex(t);if(e===cr)return!1;return this.getSegmentParentage(e)!==this.getSegmentParentage(t)}setCurveStitcherPointer(t){this.m_curveStitcher=t}hasSegmentParentage(){return-1!==this.m_segmentParentageIndex}deleteSegmentParentage(){-1!==this.m_segmentParentageIndex&&(this.removeUserIndex(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),this.m_curveStitcher=null}clearSegments(){this.m_segments=null}}function yr(t){if(t.isEmpty())return new ur({vd:t.getDescription()});if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(t.getGeometryType())&&t.hasNonLinearSegments())return Cr(t);const e=t.getImpl(),s=e.getPointCount();if(s<=2){if(1===s||e.getXY(0).equals(e.getXY(1))){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:e.getDescription()});return e.getPointByVal(0,t),t}{const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,s=new Os({vd:e.getDescription()});return e.getPointByVal(0,t),s.startPathPoint(t),e.getPointByVal(1,t),s.lineToPoint(t),s}}const n=e.getAttributeStreamRef(0),i=new wr({stream:n,n:s});let r=0,o=1;const a=n.readPoint2D(r<<1),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(;o<s&&n.queryPoint2D(o<<1,h).equals(a);)o++;if(i.m_treeHull.addElement(r),o<s){i.m_treeHull.addBiggestElement(o);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let s=o+1;s<e.getPointCount();s++){n.queryPoint2D(s<<1,t);const e=i.treeHull(t);-1!==e&&i.m_treeHull.setElement(e,s)}}const u=e.getDescription(),m=u.getAttributeCount()>1,l=i.m_treeHull.size();let g=null;if(l>=2){g=l>=3?new ur({vd:u}):new Os({vd:u});const t=g.getImpl();t.reserve(i.m_treeHull.size()),t.addPathPoint2D(null,0,!0);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let r=i.m_treeHull.getFirst();-1!==r;r=i.m_treeHull.getNext(r))if(m){const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;e.getPointByVal(i.m_treeHull.getElement(r),s),t.insertPoint(0,-1,s)}else n.queryPoint2D(i.m_treeHull.getElement(r)<<1,s),t.insertPoint2D(0,-1,s)}else if(m){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P({vd:u});e.getPointByVal(i.m_treeHull.getElement(i.m_treeHull.getFirst()),t),g=t}else{const t=n.readPoint2D(i.m_treeHull.getElement(i.m_treeHull.getFirst())<<1);g=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P(t)}return g}function xr(t,e,s,n=!1){if(e<=262144)return Ir(t,e,s,n);const i=new wr({points:t,n:e}),r=0;let o=1;const a=t[r];for(;o<e&&t[o].equals(a);)o++;if(i.m_treeHull.addElement(r),o<e){i.m_treeHull.addBiggestElement(o);for(let s=o+1;s<e;s++){const e=t[s],n=i.treeHull(e);-1!==n&&i.m_treeHull.setElement(n,s)}}let h=0;for(let u=i.m_treeHull.getFirst();-1!==u;u=i.m_treeHull.getNext(u))s[h++]=i.m_treeHull.getElement(u);return h}function Cr(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.hasNonLinearSegments()&&!t.isEmpty());const e=new wr;return e.addGeometry(t),e.getBoundingGeometry()}function vr(t,s,n){if((s<0||s>=t.getPathCount())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("path index"),t.hasNonLinearSegmentsPath(s))return!1;const i=t.getImpl(),r=i.getPathStart(s),o=i.getPathEnd(s),a=!i.isClosedPath(s)&&i.isClosedPathInXYPlane(s),h=i.getAttributeStreamRef(0),u=2*r;let m=2*o;if(a&&(m-=2),m-u<6)return!0;const l=h.readPoint2D(u),c=h.readPoint2D(u+2),g=h.readPoint2D(u+4);if(!Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(c,g,l)))return!1;const d=c.clone(),_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let e=u+6;e<m;e+=2){_.assign(c),c.assign(g),h.queryPoint2D(e,g);if(!Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(c,g,l)))return!1;if(!Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(d,g,l)))return!1;if(!Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(c,g,_)))return!1}return!0}function br(t,e,s){t.setNAN(),e.setCoords(1,0),s.setCoords(0,0)}function Sr(t,e,s,n,r){if(br(s,n,r),t.isEmpty())return;if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)return void s.assign(t.getXY());const o=t,a=o.getPointCount();0!==a&&(1!==a?Er(o,a,e,s,n,r):s.assign(o.getXY(0)))}function Er(t,e,s,n,i,r){if(2===e){const e=t.getXY(0),s=t.getXY(1);n.assign(e.add(s).mul(.5));const o=s.sub(e);i=Xr(o),r.setCoords(.5*o.length(),0)}else{let o=Number.MAX_VALUE;const a=[0,1,0,0],h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.R(4,2);for(h.set(0,0,0),h.set(0,1,1),h.set(1,0,1),h.set(1,1,2);a[0]<e;++a[0],qr(h,0,e)){a[1]===a[0]&&(++a[1],qr(h,1,e));for(let s=1;;++s){for(;;){const n=Fr(t.getXY(h.get(0,0)),t.getXY(h.get(0,1)),t.getXY(h.get(s,0)),t.getXY(h.get(s,1)),2^s);if(n>0)break;if(++a[s],qr(h,s,e),0===n)break}if(3===s)break;a[s+1]<a[s]&&(a[s+1]=a[s],h.set(s+1,0,h.get(s,0)),h.set(s+1,1,h.get(s,1)))}const u=t.getXY(h.get(0,0)).add(t.getXY(h.get(2,0))).mul(.5),m=Xr(t.getXY(h.get(0,1)).sub(t.getXY(h.get(0,0)))),l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;let c,g;if(l.x=Math.max(0,m.dotProduct(t.getXY(h.get(1,0)).sub(t.getXY(h.get(3,0))))),l.y=Math.max(0,m.crossProduct(t.getXY(h.get(0,0)).sub(t.getXY(h.get(2,0))))),s?(c=l.x*l.y,g=c<o):(c=l.y,g=c<o),g){o=c;const e=t.getXY(h.get(1,0)),s=t.getXY(h.get(3,0)),a=e.add(s).mul(.5).sub(u);n.assign(u.add(m.mul(m.dotProduct(a)))),i.assign(m),r.assign(l)}}r.mulThis(.5),r.x<r.y&&(r.y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(r.x,r.x=r.y),i.leftPerpendicularThis())}i.y<0?i.negateThis():0===i.y&&(i.x=1)}Pr.st_defaultRank=1;class Dr{constructor(t){this.m_handleP=-1,this.m_handleQ=-1,this.m_currentSupport=-1,this.m_area=0,this.m_bDone=!0,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this.m_convexHull=t,this.m_function=this.done_}next(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}get_vertex_handle_p(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}get_vertex_handle_q(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}get_current_support(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getNext(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getPrev(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}intialize_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}increment_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}increment_q_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}increment_p_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}parallel_edge_with_q_support_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}parallel_edge_with_p_support_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}done_(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}}class wr{nullGetXY(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("m_getXY is null"),{}}nullDeleteNode(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("m_deleteNode is null")}constructor(t){return this.m_treeHull=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.T,this.m_shape=null,this.m_stream=null,this.m_points=null,this.m_geometryHandle=-1,this.m_pathHandle=-1,this.m_getXY=this.nullGetXY,this.m_deleteNode=this.nullDeleteNode,t?t.stream?(this.m_treeHull.setCapacity(Math.min(20,t.n)),this.m_stream=t.stream,this.m_getXY=this.getXYStream,this.m_deleteNode=this.deleteNodeStream,this.m_points=null,this.m_geometryHandle=cr,void(this.m_pathHandle=cr)):t.points?(this.m_treeHull.setCapacity(Math.min(20,t.n)),this.m_points=t.points,this.m_getXY=this.getXYPoints,this.m_deleteNode=this.deleteNodePoints,this.m_stream=null,this.m_geometryHandle=cr,void(this.m_pathHandle=cr)):void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.p)("unrecognized constructor parameter"):(this.m_treeHull.setCapacity(20),this.m_shape=new Pr,this.m_geometryHandle=this.m_shape.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint),this.m_pathHandle=this.m_shape.insertPath(this.m_geometryHandle,cr),this.m_getXY=this.getXYShape,this.m_deleteNode=this.deleteNodeShape,this.m_stream=null,void(this.m_points=null))}getXYShape(t){return this.m_shape.getXY(t)}getXYStream(t){return this.m_stream.readPoint2D(t<<1)}getXYPoints(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P}deleteNodeShape(t){const e=this.m_treeHull.getElement(t);this.m_treeHull.deleteNode(t),this.m_shape.removeVertex(e,!1)}deleteNodeStream(t){this.m_treeHull.deleteNode(t)}deleteNodePoints(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}addGeometry(s){if(s.isEmpty())return;const n=s.getGeometryType();if(n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumGeometryCollection){const t=s;for(let e=0,s=t.getGeometryCount();e<s;e++)this.addGeometry(t.getGeometry(e))}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.i)(n)?this.addMultiVertexGeometry(s):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.f)(n)?this.addSegment(s,!1):n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope?this.addEnvelope(s):n===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint?this.addPoint(s):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Convex_hull: geometry not supported")}getBoundingGeometry(){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,e=this.m_treeHull.getFirst(),s=new ur({vd:this.m_shape.getVertexDescription()});if(0===this.m_treeHull.size())return s;s.reserve(this.m_treeHull.size()),this.m_shape.queryPoint(this.m_treeHull.getElement(e),t),s.startPathPoint(t);for(let n=this.m_treeHull.getNext(e);-1!==n;n=this.m_treeHull.getNext(n))this.m_shape.queryPoint(this.m_treeHull.getElement(n),t),s.lineToPoint(t);return s}getAntipodalPairsIterator(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),new Dr(this)}getXY(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P}getXYWithIndex(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P}getFirst(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getLast(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getNext(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getPrev(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getVertexIndex(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getPointCount(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}addMultiVertexGeometry(t){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,s=t.getImpl(),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let i=0;i<t.getPointCount();i++){s.queryXY(i,n);const r=this.addPoint2D(n);if(-1!==r){t.getPointByVal(i,e);const s=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(r,s)}}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(t.getGeometryType())){const e=t;if(e.hasNonLinearSegments()){const t=e.querySegmentIterator();for(;t.nextPath();)for(;t.hasNextSegment();){const e=t.nextCurve();null!==e&&this.addSegment(e,!0)}}}}addEnvelope(t){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P;for(let s=0;s<4;s++){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCorner(s,n);const i=this.addPoint2D(n);if(-1!==i){t.queryCornerByVal(s,e);const n=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(i,n)}}}static querySegmentControlPoints(t,n,r){const o=t.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(o!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine),o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const e=t,s=60*Math.PI/180,i=Math.abs(e.getSweepAngle());if(i>s){const t=Math.min(6,Math.ceil(i/s)),r=1/t,o=new fm;e.queryStart(n[0]);let a=1;for(let s=0;s<t;s++){e.queryCut(s*r,(s+1)*r,o);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Bu(o.get(),i);const h=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(i,3),u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(i,2),m=h>0?u/h:.5;s<t-1?o.get().queryEnd(n[a+1]):e.queryEnd(n[a+1]),_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[a-1],n[a+1],m,n[a]),n[a].setXY(i[1]),a+=2}return a}{const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Bu(t,e);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(e,3);t.queryStart(n[0]),t.queryEnd(n[2]);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(e,2),r=s>0?i/s:.5;return _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[0],n[2],r,n[1]),n[1].setXY(e[1]),3}}if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier){const e=t,s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);e.queryControlPoints(s);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,4),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,2),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,3);t.queryStart(n[0]),t.queryEnd(n[3]);const a=i>0?r/i:.5;_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[0],n[3],a,n[1]),n[1].setXY(s[1]);const h=i>0?o/i:.5;return _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[0],n[3],h,n[2]),n[2].setXY(s[2]),4}if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2){const e=t,s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(s);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,3);t.queryStart(n[0]),t.queryEnd(n[2]);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,2),o=i>0?r/i:.5;return _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[0],n[2],o,n[1]),n[1].setXY(s[1]),3}if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2){const e=t,s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(s);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,3);t.queryStart(n[0]),t.queryEnd(n[2]);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateLength(s,2),o=i>0?r/i:.5;return _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P.lerp(n[0],n[2],o,n[1]),n[1].setXY(s[1]),3}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Convex_hull: segment type not supported")}addSegment(t,e){if(!e){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,s=t.getStartXY(),n=this.addPoint2D(s);if(-1!==n){t.queryStart(e);const s=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(n,s)}const i=t.getEndXY(),r=this.addPoint2D(i);if(-1!==r){t.queryEnd(e);const s=this.m_shape.addPoint(this.m_pathHandle,e);this.m_treeHull.setElement(r,s)}}if(t.isCurve()){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,13);for(let s=1,n=wr.querySegmentControlPoints(t,e,e.length)-1;s<n;++s){const t=e[s].getXY(),n=this.addPoint2D(t);if(-1!==n){const t=this.m_shape.addPoint(this.m_pathHandle,e[s]);this.m_treeHull.setElement(n,t)}}}}addPoint(t){const e=t.getXY(),s=this.addPoint2D(e);if(-1!==s){const e=this.m_shape.addPoint(this.m_pathHandle,t);this.m_treeHull.setElement(s,e)}}addPoint2D(t){let e=-1;if(0===this.m_treeHull.size())return e=this.m_treeHull.addElement(-4),e;if(1===this.m_treeHull.size()){const s=this.m_treeHull.getElement(this.m_treeHull.getFirst()),n=this.m_shape.getXY(s);return t.equals(n)||(e=this.m_treeHull.addBiggestElement(-5)),e}return e=this.treeHull(t),e}treeHull(t){let e=-1;do{const s=this.m_treeHull.getFirst(),n=this.m_treeHull.getLast(),i=this.m_treeHull.getElement(s),r=this.m_treeHull.getElement(n),o=this.m_getXY(i),a=this.m_getXY(r),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(a,t,o);if(Mr(h)){e=this.m_treeHull.addBiggestElement(-1);const i=this.treeHullWalkBackward(t,n,s);i!==s&&this.treeHullWalkForward(t,s,this.m_treeHull.getPrev(i));break}if(Yr(h)){let i=this.m_treeHull.getRoot(),r=this.m_treeHull.getFirst(),a=this.m_treeHull.getLast(),h=-1,u=-1,m=-1;for(;r!==this.m_treeHull.getPrev(a);){u=this.m_treeHull.getElement(i);const e=this.m_getXY(u);Yr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(e,t,o))?(a=i,i=this.m_treeHull.getLeft(i)):(r=i,i=this.m_treeHull.getRight(i))}i=a,h=r,u=this.m_treeHull.getElement(i),m=this.m_treeHull.getElement(h);const l=this.m_getXY(u),c=this.m_getXY(m);if(h!==s){if(!Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(c,t,l)))break}e=this.m_treeHull.addElementAtPosition(h,i,-2,!0,!1),this.treeHullWalkForward(t,i,n),this.treeHullWalkBackward(t,h,s);break}{const i=Nr(t,a,o);if(-1===i){const i=this.m_treeHull.getPrev(n);this.m_treeHull.deleteNode(n),e=this.m_treeHull.addBiggestElement(-3),this.treeHullWalkBackward(t,i,s)}else if(1===i){const i=this.m_treeHull.getNext(s);this.m_treeHull.deleteNode(s),e=this.m_treeHull.addElementAtPosition(-1,i,-3,!0,!1),this.treeHullWalkForward(t,i,n)}break}}while(0);return e}treeHullWalkForward(t,e,s){if(e===s)return s;let n=e,i=this.m_treeHull.getElement(n),r=this.m_treeHull.getNext(n);const o=this.m_getXY(i);for(;n!==s&&this.m_treeHull.size()>2;){const e=this.m_treeHull.getElement(r),s=this.m_getXY(e);if(Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(s,t,o)))break;const a=n;n=r,i=e,o.assign(s),r=this.m_treeHull.getNext(n),this.m_deleteNode(a)}return n}treeHullWalkBackward(t,e,s){if(e===s)return s;let n=e,i=this.m_treeHull.getElement(n),r=this.m_treeHull.getPrev(n);const o=this.m_getXY(i);for(;n!==s&&this.m_treeHull.size()>2;){const e=this.m_treeHull.getElement(r),s=this.m_getXY(e);if(Mr(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(o,t,s)))break;const a=n;n=r,i=e,o.assign(s),r=this.m_treeHull.getPrev(n),this.m_deleteNode(a)}return n}}function Ar(t,e,s){const n=e.sub(t),i=s.sub(e);if(0===n.x)return i.x>0?-1:0;if(0===n.y)return i.y>0?1:i.y<0?-1:0;const r=n.crossProduct(i),o=4*Number.EPSILON*(Math.abs(i.x*n.y)+Math.abs(i.y*n.x));return r>o?1:r<-o?-1:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(t,e,s)}function Tr(t,e,s){const n=e.sub(t),i=s.sub(e);if(0===n.x)return i.x<0?-1:0;if(0===n.y)return i.y>0?-1:i.y<0?1:0;const r=n.crossProduct(i),o=4*Number.EPSILON*(Math.abs(i.x*n.y)+Math.abs(i.y*n.x));return r>o?1:r<-o?-1:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(t,e,s)}function Ir(t,e,s,n){const i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.A(0);for(let h=0;h<e;h++)i.add(h);const r={userSort(e,s,n){n.sort(e,s,((e,s)=>t[e].compareX(t[s])))},getValue:e=>t[e].x};n||_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.B.sortEx(i,0,e,r);let o=0;t:for(let h=0;h<e;++h){const e=i.read(h);for(;o>=2;){const n=s[o-2],r=s[o-1];if(t[r].equals(t[e])){i.write(h,-1);continue t}if(!(Ar(t[n],t[r],t[e])>=0)){r===i.read(h-1)&&i.write(h-1,-1);break}o--}s[o++]=e,2===o&&t[e].equals(t[s[0]])&&(i.write(1,-1),o--)}const a=o+1;t:for(let h=e-2;h>=0;--h){const e=i.read(h);if(!(e<0)){for(;o>=a;){const n=s[o-2],i=s[o-1];if(t[i].equals(t[e]))continue t;if(!(Tr(t[n],t[i],t[e])>=0))break;o--}if(0!==h){const n=s[o-1];s[o++]=e,t[e].equals(t[n])&&o--}}}return o>1&&t[s[0]].equals(t[s[o-1]])&&o--,o}function Mr(t){return t<0}function Yr(t){return t>0}function Nr(t,e,s){let n=-1;if(e.y===s.y)n=0;else if(e.x===s.x)n=1;else{n=Math.abs(e.x-s.x)>=Math.abs(e.y-s.y)?0:1}let i=-1;return i=e[n]<s[n]?t[n]<e[n]?-1:s[n]<t[n]?1:0:e[n]<t[n]?-1:t[n]<s[n]?1:0,i}function Xr(t){return(t=t.clone()).divThis(Math.max(Math.abs(t.x),Math.abs(t.y))),t.normalize(),t}function qr(t,e,s){t.inc(e,0)===s&&t.set(e,0,0),t.inc(e,1)===s&&t.set(e,1,0)}function Fr(t,s,n,i,r){switch(r){case 0:break;case 1:s.rightPerpendicularThis(),t.rightPerpendicularThis();break;case 2:s.negateThis(),t.negateThis();break;case 3:s.leftPerpendicularThis(),t.leftPerpendicularThis();break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("")}return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobustEx(t,s,n,i)}class Vr{constructor(){this.length=Number.NaN,this.specialPoints=[]}specialPointsCount(){return this.specialPoints.length}}function Lr(t){return Rr(t.calculateUpperLength2D())}function Rr(t){return 256*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*t}function zr(t){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),t.getEndXY()),s=t.calculateUpperLength2D();return s-e<=8*Number.EPSILON*s}function Br(t,e,s=!1){e[1].setCoords(t.m_cp[0].x-t.getStartX(),t.m_cp[0].y-t.getStartY()),e[1].mulThis(3),e[2].setCoords(t.m_cp[1].x-t.m_cp[0].x,t.m_cp[1].y-t.m_cp[0].y),e[2].mulThis(3),e[3]=t.getEndXY().sub(t.getStartXY()),e[3].subThis(e[2]),e[2].subThis(e[1]),s?e[0].setCoords(0,0):e[0]=t.getStartXY()}function kr(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),Wr(n,e,s)}function Gr(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),jr(n,e,s)}function Wr(t,e,s){let n=t[1].x;n-=t[0].x,n*=3;let i=t[2].x;i-=t[1].x,i*=3;let r=t[3].x;r-=t[0].x,r-=i,i-=n,e[3].setWithEps(r),e[2].setWithEps(i),e[1].setWithEps(n),s?e[0].set(0):e[0].set(t[0].x)}function jr(t,e,s){let n=t[1].y;n-=t[0].y,n*=3;let i=t[2].y;i-=t[1].y,i*=3;let r=t[3].y;r-=t[0].y,r-=i,i-=n,e[3].setWithEps(r),e[2].setWithEps(i),e[1].setWithEps(n),s?e[0].set(0):e[0].set(t[0].y)}function Zr(t,e,s=!1){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);n[0].assignPoint2D(t[0]),n[1].assignPoint2D(t[1]),n[2].assignPoint2D(t[2]),n[3].assignPoint2D(t[3]),e[1].setCoords(n[1].x.sub(n[0].x),n[1].y.sub(n[0].y)),e[1].mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(3)),e[2].setCoords(n[2].x.sub(n[1].x),n[2].y.sub(n[1].y)),e[2].mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructInt32(3)),e[3]=n[3].sub(n[0]),e[3]=e[3].sub(e[2]),e[2]=e[2].sub(e[1]),s?e[0].setCoords(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ah):e[0]=n[0].clone()}function Hr(t,e,s){if(s){if(e<0)return e;if(e>1)return e-1+Hr(t,1,!1)}if(t.isDegenerate(0))return 0;const n=1===e,i=Qr(t);if(n&&!Number.isNaN(i.length)&&!Number.isNaN(i.length))return i.length;const r=Lr(t),o=r/t.calculateUpperLength2D();let a=0,h=0;for(let u=1,m=i.specialPointsCount();u<m;u++){const s=i.specialPoints[u];if(a+=$o(t,h,Math.min(e,s),o,r),e<=s)break;h=s}return n&&(i.length=a),a}function Ur(t,e,s){const n=Hr(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const i=[0];return 1!==tn(new Jo(t,e),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),1,i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),i[0]}function Or(t,s,n){void 0===n&&(n=s,s=0);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(s<0||n>1)return i.setNAN(),i;if(s>n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("calculate_sub_weightedCentroid"),s===n||t.isDegenerate(0))return i.setCoords(0,0),i;const r=Qr(t),o=Lr(t),a=o/t.calculateUpperLength2D();let h=s,u=0;for(let e=1,m=r.specialPointsCount();e<m;e++)if(s<r.specialPoints[e]){u=e-1;break}i.setCoords(0,0);for(let e=u+1,m=r.specialPointsCount();e<m;e++){const s=Math.min(r.specialPoints[e],n),u=ta(t,h,s,a,o);if(i.addThis(u),h=s,n<=r.specialPoints[e])break}return i.add(t.getStartXY().mul(t.calculateLength2D()))}function Qr(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new Vr,s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,8),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n);const i=jo(n,s);e.specialPoints=[];for(let r=0;r<i;r++)e.specialPoints.push(s[r].value());return Kr(t,e),e}function Jr(t){let e=null;return e=t.m_cachedValues,e}function Kr(t,e){t.m_cachedValues=e}function $r(t){t.m_cachedValues=null}function to(t,e){e.m_cachedValues=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_cachedValues,t.m_cachedValues=e.m_cachedValues)}function eo(t,e,s,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&s.isEqual(t.m_XEnd,t.m_YEnd))return;const i=!!n&&t.isMonotoneQuickAndDirty(),r=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T,o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;a.setSub(o[2],o[0]),a.leftPerpendicularThis(),o[1].setAdd(o[0],a);const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);h[0].setCoordsPoint2D(e),h[2].setCoordsPoint2D(s),a.setSub(h[2],h[0]),a.leftPerpendicularThis(),h[1].setAdd(h[0],a),r.setFromTwoTriangles(o,h)?r.transformPoints2D(t.m_cp,2,t.m_cp):((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e,s,1/3,t.m_cp[0]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e,s,2/3,t.m_cp[1])),t.changeEndPoints2D(e,s),i&&lo(t)}function so(t,e,s,n,i){return{tmin:t,tmax:e,t:s,d:n,pt:i.clone()}}function no(t,e,s,n){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(i);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(18,NaN),o=tn(new Vo(i,e,NaN),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(s,n),18,r),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2D(s,a);let h=s,u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(a,e);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2D(n,m);const l=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(m,e);l<u&&(u=l,h=n,a.assign(m));for(let c=0;c<o;c++){t.queryCoord2D(r[c],m);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(m,e);s<u&&(u=s,h=r[c],a.assign(m))}return so(s,n,h,u,a)}function io(t,e){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);kr(t,n,!0);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);Gr(t,i,!0);const r=n[3].clone(),o=n[2].clone(),a=n[1].clone(),h=i[3].clone(),u=i[2].clone(),m=i[1].clone(),l=o.mulE(a).addE(u.mulE(m)).mul(4),c=o.mulE(o).mul(8).addE(r.mulE(a).mul(12)).addE(u.mulE(u).mul(8).addE(h.mulE(m).mul(12))),g=r.mulE(o).addE(h.mulE(u)).mul(36),d=r.mulE(r).addE(h.mulE(h)).mul(36),_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3),p=dn(d,g,c,l,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,_);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(p<=3),p>0){const s=uo(t,1,0).sqrLength(),n=uo(t,1,1).sqrLength();let i=s;e.set(0),i<n&&(i=n,e.set(1));for(let r=0;r<p;r++){const s=uo(t,1,_[r].value()).sqrLength();s<i&&(i=s,e=_[r])}}}function ro(t,e,s,n){if(1===e){const e=1-s,i=e*e,r=s*s,o=t[1].sub(t[0]),a=t[2].sub(t[1]),h=t[3].sub(t[2]),u=o.mul(i).add(a.mul(2*e*s)).add(h.mul(r));n.assign(u.mul(3))}else if(2===e){const e=1-s,i=t[2].sub(t[1]).sub(t[1].sub(t[0])),r=t[3].sub(t[2]).sub(t[2].sub(t[1])),o=i.mul(e).add(r.mul(s));n.assign(o.mul(6))}else if(3===e){const e=t[2].sub(t[1]),s=t[3].sub(e.mul(3)).sub(t[0]);n.assign(s.mul(6))}else n.setCoords(0,0)}function oo(t,e,s,n){{const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.I.subE(s),i=e.sqr(),r=s.sqr(),o=t[1].subE(t[0]).mulE(i).addE(t[2].subE(t[1]).mulE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(2).mulE(e).mulE(s))).addE(t[3].subE(t[2]).mulE(r));n.setE(o.mulE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(3)))}}function ao(t,e,s){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return ro(t,e,s,n),n}function ho(t,e,s){const n=[Ye.constructPoint2D(t[0]),Ye.constructPoint2D(t[1]),Ye.constructPoint2D(t[2]),Ye.constructPoint2D(t[3])],i=new Ye;return oo(n,e,s,i),i}function uo(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return t.queryControlPoints(n),ao(n,e,s)}function mo(t){const e=t.m_cp[0].sub(t.getStartXY()),s=t.m_cp[1].sub(t.m_cp[0]),n=t.getEndXY().sub(t.getStartXY());e.mulThis(3),s.mulThis(3),n.subThis(s),s.subThis(e);return(3*n.x*(2*s.y+5*e.y)-3*n.y*(2*s.x+5*e.x)+10*(s.x*e.y-s.y*e.x))/60}function lo(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(e);const s=co(e);return s&&(t.m_cp[0].setCoordsPoint2D(e[1]),t.m_cp[1].setCoordsPoint2D(e[2]),t.afterCompletedModification()),s}function co(t){return Fe(t)}function go(t){return Ve(t)}function _o(t,e,s){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e<=.5?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[0],t[1],e,n),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[1],t[2],e,i),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[2],t[3],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,n,i,e,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,o,a,e,s)):((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[0],t[1],e,n),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[1],t[2],e,i),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[2],t[3],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,n,i,e,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,o,a,e,s))}function po(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=0&&e<=1);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e<=.5?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[0],t[1],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[1],t[2],e,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[2],t[3],e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,r,o,e,h),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,o,a,e,u),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,h,u,e,m)):((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[0],t[1],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[1],t[2],e,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[2],t[3],e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,r,o,e,h),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,o,a,e,u),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,h,u,e,m));const l=t[3].clone();n&&(n[0].assign(t[0]),n[1].assign(r),n[2].assign(h),n[3].assign(m)),i&&(i[0].assign(m),i[1].assign(u),i[2].assign(a),i[3].assign(l))}function fo(t,e,n,i){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=0&&n<=1&&e<=n),e===n){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return Po(t,e,s),i[0].assign(s),i[1].assign(s),i[2].assign(s),void i[3].assign(s)}if(0===e&&1===n){for(let e=0;e<4;++e)i[e].assign(t[e]);return}const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);po(t,n,r,null),po(r,n>0?e/n:0,null,r),Po(t,e,r[0]),Po(t,n,r[3]),i[0].setCoordsPoint2D(r[0]),i[1].setCoordsPoint2D(r[1]),i[2].setCoordsPoint2D(r[2]),i[3].setCoordsPoint2D(r[3])}function Po(t,e,s,n){if(n){if(e<0){return void _s(new pm({start:t[0],end:t[0].add(Co(t,0).getUnitVector())}),e,s)}if(e>1){return void _s(new pm({start:t[3],end:t[3].add(Co(t,1).getUnitVector())}),e-1,s)}}if(e<=.5){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[0],t[1],e,n);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[1],t[2],e,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[2],t[3],e,r);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,n,i,e,o);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,o,a,e,s)}else{const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[0],t[1],e,n);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[1],t[2],e,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[2],t[3],e,r);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,n,i,e,o);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,o,a,e,s)}}function yo(t,e,s){if(e.value()<=.5){const n=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,Ye.constructPoint2D(t[0]),Ye.constructPoint2D(t[1]),e,n);const i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,Ye.constructPoint2D(t[1]),Ye.constructPoint2D(t[2]),e,i);const r=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,Ye.constructPoint2D(t[2]),Ye.constructPoint2D(t[3]),e,r);const o=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,n,i,e,o);const a=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,o,a,e,s)}else{const n=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,Ye.constructPoint2D(t[0]),Ye.constructPoint2D(t[1]),e,n);const i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,Ye.constructPoint2D(t[1]),Ye.constructPoint2D(t[2]),e,i);const r=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,Ye.constructPoint2D(t[2]),Ye.constructPoint2D(t[3]),e,r);const o=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,n,i,e,o);const a=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,i,r,e,a),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,o,a,e,s)}}function xo(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),yo(n,e,s)}function Co(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e,0,1);let n=ao(t,1,s);return n.isZero()&&(n=ao(t,2,s),n.isZero()?n=ao(t,3,s):1===s&&n.negateThis()),n}function vo(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),bo(n,e,s)}function bo(t,e,s){e.value()<0&&e.set(0,e.eps()),e.value()>1&&e.set(1,e.eps()),s.setE(ho(t,1,e))}function So(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==To(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function Eo(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==Io(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function Do(t,e,s,n,i){if(i){if(0!==am(e,s))return 2}else if(Le(e,s))return 1;return 0!==Mo(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function wo(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==Yo(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function Ao(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==No(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function To(t,e,s,n,i,r,o,a,h,u){if(null!==i&&(i.length=0),null!=r&&(r.length=0),null!==n&&(n.length=0),s.isDegenerate(0)){const t=[0,0,0],a=e.intersectPoint(s.getStartXY(),t,o);if(a>0){if(null!==i)for(let e=0;e<a;e++)i.push(t[e]);if(null!==r)for(let t=0;t<a;t++)r.push(0);if(null!=n)for(let s=0;s<a;s++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(t[s],i),n.push(i)}}return a}const m=rs(e,s);if(os(e,s,o=Math.max(o,m)))return 0;const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);Br(e,l);const c=s.getEndXY();c.subThis(s.getStartXY());const g=c.clone();g.leftPerpendicularThis();let d=3*l[3].dotProduct(g),_=2*l[2].dotProduct(g),p=l[1].dotProduct(g);const f=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(15,Number.NaN),P=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(15,Number.NaN);let y=sn(d,_,p,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,f);y<0&&(f[0]=0,f[1]=1,y=2);let x,C=0;for(let S=0,E=C;S<y;++S){const t=e.getCoord2D(f[S+E]);P[C]=s.getClosestCoordinate(t,!1),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,s.getCoord2D(P[C]))<=o&&(f[C]=f[S+E],C++)}if(l[0].subThis(s.getStartXY()),Math.abs(c.x)>=Math.abs(c.y)){const t=c.y/c.x;d=l[3].y-l[3].x*t,_=l[2].y-l[2].x*t,p=l[1].y-l[1].x*t,x=l[0].y-l[0].x*t}else{const t=c.x/c.y;d=l[3].x-l[3].y*t,_=l[2].x-l[2].y*t,p=l[1].x-l[1].y*t,x=l[0].x-l[0].y*t}const v=e.getEndXY().equals(s.getStartXY())||e.getEndXY().equals(s.getEndXY()),b=[0,0,0];y=nn(d,_,p,x,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),v,b);for(let S=0,E=C;S<y;++S){f[S+E]=b[S];const t=e.getCoord2D(f[S+E]);P[C]=s.getClosestCoordinate(t,!1);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,s.getCoord2D(P[C]))<=o&&(f[C]=f[S+E],C++)}y=e.intersectPoint(s.getStartXY(),b,o);for(let S=0;S<y;S++)f[C]=b[S],P[C++]=0;y=e.intersectPoint(s.getEndXY(),b,o);for(let S=0;S<y;S++)f[C]=b[S],P[C++]=1;return 0!==s.intersectPoint(e.getStartXY(),b,o)&&(P[C]=b[0],f[C++]=0),0!==s.intersectPoint(e.getEndXY(),b,o)&&(P[C]=b[0],f[C++]=1),0===C?0:cm(t,e,s,f,P,C,n,i,r,o,a,h,u)}function Io(t,e,s,n,i,r,o,a,h,u){if(Su(s)){return To(t,e,new pm({start:s.getStartXY(),end:s.getEndXY()}),n,i,r,o,a,h,u)}const m=rs(e,s);if(os(e,s,o=Math.max(o,m)))return 0;const l=[],c=[],g=[],d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);{e.queryControlPoints(d);const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;s.canonicToWorldTransformation(n);const i=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;i.setInvert(n),i.transformPoints2D(d,4,t);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);Zr(t,r);const h=[r[0].x,r[1].x,r[2].x,r[3].x],u=[r[0].y,r[1].y,r[2].y,r[3].y],m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);m[0].setDouble(s.getSemiMinorAxis()),m[0].sqrThis(),m[1].setDouble(s.getSemiMajorAxis()),m[1].sqrThis(),m[2].setThis(m[0]),m[2].mulThis(m[1]),m[2].negateThis();const _=qn(h,3,u,3,null,0,m,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),c,a);if(_>0){let t=0;for(let n=0;n<_;n++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(c[n],i);const r=s.getClosestCoordinate(i,!1),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(r,a);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,a)<=o&&(l.push(i.clone()),c[t]=c[n],g.push(r),t++)}c.length=t,l.length=t}}const _=[0,1];for(let p=0;p<2;p++){const t=0===p?s.getStartXY():s.getEndXY(),e=[0];Lo(d,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,e);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(d,e[0],n);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n)<=o&&(c.push(e[0]),g.push(_[p]),l.push(n.clone()))}for(let p=0;p<2;p++){const t=[0,3];{const e=s.getClosestCoordinate(d[t[p]],!1),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(e,n);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(d[t[p]],n)<=o&&(c.push(_[p]),g.push(e),l.push(n.clone()))}}return cm(t,e,s,c,g,c.length,n,i,r,o,a,h,u)}function Mo(t,e,n,i,r,o,a,h,u,m){const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);e.queryControlPoints(l);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);if(n.queryControlPoints(c),as(l,c,4)<0)return Mo(t,n,e,i,o,r,a,h,u,!m);const g=rs(e,n);if(os(e,n,a=Math.max(a,g)))return 0;if(ea(e,n,i,r,o,a,h,u,m))return 2;const d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);{const t=new De;Fo(l,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),t);const e=new De;Fo(c,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),e);const s=Math.max(t.maxDim(),e.maxDim());if(t.inflate(3*a),e.inflate(3*a),!t.intersectW(e))return 0;if(t.maxDim()<.1*s){if(Oo(l,t,d),d.isEmpty())return 0;if(Oo(c,t,_),_.isEmpty())return 0;fo(l,d.vmin,d.vmax,l),fo(c,_.vmin,_.vmax,c)}}const p=dm(l,3,c,3,a);if(0===p)return 0;const f=[],P=[],y=[];let x=!1;if(-1===p){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);Zr(l,t);const e=[t[0].x,t[1].x,t[2].x,t[3].x],s=[t[0].y,t[1].y,t[2].y,t[3].y],n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);Zr(c,n);const i=[],r=[],o=Yn(e,3,s,3,null,0,[n[0].x,n[1].x,n[2].x,n[3].x],3,[n[0].y,n[1].y,n[2].y,n[3].y],3,null,0,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),i,r,u);if(o>0)for(let h=0;h<o;h++){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(c,r[h],t);const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(l,i[h],e);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,t)<=a&&(f.push(e.clone()),y.push(r[h]),P.push(i[h]))}else-1===o&&(x=!0)}for(let s=0;s<2;s++){const t=0===s?l:c,e=0===s?c:l;for(let n=0;n<2;n++){const i=0===n?0:3,r=[0];Lo(e,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,r);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(e,r[0],o);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[i],o)<=a&&(0===s?(P.push(0===i?0:1),y.push(r[0])):(y.push(0===i?0:1),P.push(r[0])),f.push(o.clone()))}}if(0===P.length&&x){const t=e.calculateUpperLength2D()>n.calculateUpperLength2D();{const i=[0,0];if(2===Go(t?e:n,i,!0)&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit().containsCoordinate(i[0])),!_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit().containsCoordinate(i[1]))){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t?l:c,i[0],e);const s=[0,0];1===Lo(t?c:l,e,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,2,s)&&(f.push(e.clone()),P.push(t?i[0]:s[0]),y.push(t?s[0]:i[0]))}}}if(0===P.length)return 0;if(!d.equalsRange(0,1))for(let s=0;s<P.length;++s)P[s]=ia.recalculateParentT(d.vmin,d.vmax,P[s]);if(!_.equalsRange(0,1))for(let s=0;s<y.length;++s)y[s]=ia.recalculateParentT(_.vmin,_.vmax,y[s]);return cm(t,e,n,P,y,P.length,i,r,o,a,h,u,m)}function Yo(t,e,n,i,r,o,a,h,u,m){const l=rs(e,n);if(n.isDegenerateToLineHelper(l)){const s=new pm({start:n.getStartXY(),end:n.getEndXY()}),l=To(t,e,s,i,r,o,a,h,u,m);if(o)for(let t=0;t<l;++t){const e=s.getCoord2D(o[t]);o[t]=n.getClosestCoordinate(e,!1)}return l}if(os(e,n,a=Math.max(a,l)))return 0;const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);e.queryControlPoints(c);const g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);n.queryControlPoints(g);const d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),p=[0,0,0];n.queryWeights(p);const f=[1,fh(p),1];{const t=new De;Fo(c,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),t);const e=new De;Wa(g,f,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),e);const s=Math.max(t.maxDim(),e.maxDim());if(t.inflate(3*a),e.inflate(3*a),!t.intersectW(e))return 0;if(t.maxDim()<.1*s){if(Oo(c,t,d),d.isEmpty())return 0;if(ph(g,f,t,_),_.isEmpty())return 0;fo(c,d.vmin,d.vmax,c),Qa(g,f,_.vmin,_.vmax,g,f)}}const P=dm(c,3,g,2,a);if(0===P)return 0;const y=[],x=[],C=[];if(-1===P){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);Zr(c,t);const e=[t[0].x,t[1].x,t[2].x,t[3].x],s=[t[0].y,t[1].y,t[2].y,t[3].y],n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);hh(g,f,n,i,r);const o=[],h=[],m=Yn(n,2,i,2,r,2,e,3,s,3,null,0,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),h,o,u);if(m>0)for(let u=0;u<m;u++){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(c,o[u],t);const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(g,f,h[u],e);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e)<=a&&(y.push(t.clone()),x.push(o[u]),C.push(h[u]))}}for(let v=0;v<2;v++){let t,e;0===v?(t=c,e=g):(e=c,t=g);for(let n=0;n<2;n++){const i=0===n?0:t.length-1,r=[0],o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(0===v){const n=za(e,f,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,r);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===n),_h(e,f,r[0],o)}else{const n=Lo(e,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,r);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===n),Po(e,r[0],o)}_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[i],o)<=a&&(0===v?(x.push(0===i?0:1),C.push(r[0])):(C.push(0===i?0:1),x.push(r[0])),y.push(o.clone()))}}if(0===x.length)return 0;if(!d.equalsRange(0,1))for(let s=0;s<x.length;++s)x[s]=ia.recalculateParentT(d.vmin,d.vmax,x[s]);if(!_.equalsRange(0,1))for(let s=0;s<C.length;++s)C[s]=En.recalculateParentT(_.vmin,_.vmax,C[s]);for(let s=0;s<C.length;++s)C[s]=Ph(p,C[s]);return cm(t,e,n,x,C,x.length,i,r,o,a,h,u,m)}function No(t,e,n,i,r,o,a,h,u,m){const l=rs(e,n);if(os(e,n,a=Math.max(a,l)))return 0;const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);e.queryControlPoints(c);const g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);n.queryControlPoints(g);const d=dm(c,3,g,2,a);if(0===d)return 0;const _=[],p=[],f=[];if(-1===d){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);Zr(c,t);const s=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);Wi(g,r);const o=Yn([r[0].x,r[1].x,r[2].x],2,[r[0].y,r[1].y,r[2].y],2,null,0,s,3,i,3,null,0,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),f,p,h);if(o>0){let t=0;for(let s=0;s<o;s++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(p[s],i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;n.queryCoord2D(f[s],r);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,r)<=a&&(_.push(i.clone()),p[t]=p[s],f[t]=f[s],t++)}p.length=t,_.length=t}}for(let P=0;P<2;P++){let t,e;0===P?(t=c,e=g):(e=c,t=g);for(let n=0;n<2;n++){const i=0===n?0:t.length-1,r=[0],o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(0===P)vi(e,t[i],r),ji(e,r[0],o);else{const n=Lo(e,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,r);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===n),Po(e,r[0],o)}_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[i],o)<=a&&(0===P?(p.push(0===i?0:1),f.push(r[0])):(f.push(0===i?0:1),p.push(r[0])),_.push(o.clone()))}}return cm(t,e,n,p,f,p.length,i,r,o,a,h,u,m)}function Xo(t,e,i,r,o){const a=new De;if(qo(t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),a),a.inflate(r),!a.isIntersectingPoint2D(e))return 0;const h=Qr(t);let u=0,m=h.specialPoints[0];const l=[];for(let n=1,c=h.specialPoints.length;n<c;++n){const i=h.specialPoints[n],r=no(t,e,m,i);if(0===l.length)l.push(r);else if(r.t===r.tmin)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(l.at(-1).d<=r.d),l.at(-1).tmax=r.tmax;else if(l.at(-1).t===l.at(-1).tmax){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(l.at(-1).d>=r.d);const t=l.at(-1).tmin;l[l.length-1]=r,l.at(-1).tmin=t}else l.push(r);m=i}for(const s of l)if(s.d<=r){const t=s.t;i?(u>=i.length&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),i[u]=t,u++):u++}return u}function qo(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n),Fo(n,e,s)}function Fo(t,e,s){if(e.equalsRange(0,1))return void s.setFromPoints(t,4);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fo(t,e.vmin,e.vmax,n),s.setFromPoints(n,4)}let Vo=class{constructor(t,e,s){this.dbgCounter=0,this.controlPoints=t,this.point=e.clone(),this.maxDistance=s}getMaxDerivative(){return 6}getValue(t,e){switch(t){case 0:{const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(this.controlPoints,e,t);const s=ao(this.controlPoints,1,e);return 2*t.sub(this.point).dotProduct(s)}case 1:{const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(this.controlPoints,e,t);const s=ao(this.controlPoints,1,e),n=ao(this.controlPoints,2,e);return 2*(t.sub(this.point).dotProduct(n)+s.dotProduct(s))}case 2:{const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(this.controlPoints,e,t);const s=ao(this.controlPoints,1,e),n=ao(this.controlPoints,2,e),i=ao(this.controlPoints,3,e);return 2*(t.sub(this.point).dotProduct(i)+3*s.dotProduct(n))}case 3:{const t=ao(this.controlPoints,1,e),s=ao(this.controlPoints,2,e),n=ao(this.controlPoints,3,e);return 2*(4*t.dotProduct(n)+3*s.sqrLength())}case 4:{const t=ao(this.controlPoints,2,e),s=ao(this.controlPoints,3,e);return 2*(10*t.dotProduct(s))}case 5:{const t=ao(this.controlPoints,3,e);return 2*(10*t.dotProduct(t))}default:return 0}}getError(t){return 0}isInterestingInterval(t,e){if(t>=0&&e<=1){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fo(this.controlPoints,t,e,s);const n=new De;if(n.setFromPoints(s,4),Math.sqrt(n.sqrMinDistance(this.point))>this.maxDistance)return!1}return!0}};function Lo(t,e,n,i,r,o,a){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.x)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit().contains(n)&&o>0,"getClosestCoordinate"),(r<0||Number.isNaN(r))&&(r=Number.MAX_VALUE);const h=[],u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,n.vmin,u);let m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e);if(m<=r&&h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(n.vmin,m)),n.vmin!==n.vmax&&(Po(t,n.vmax,u),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e),m<=r&&h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(n.vmax,m))),n.width()>0){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(18,Number.NaN),i=tn(new Vo(t,e,r),n,18,s);for(let n=0;n<i;n++)Po(t,s[n],u),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e),m>r||h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(s[n],m))}if(i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n.equals(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit()));{Po(t,-1,u,!0);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,0,s);const n=new pm({start:u,end:s}),i=n.getClosestCoordinate(e,!0);i<1&&(u.assign(n.getCoord2D(i)),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e),m<=r&&h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(i-1,m)))}{Po(t,2,u,!0);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,n.vmax,s);const i=new pm({start:s,end:u}),o=i.getClosestCoordinate(e,!0);o>0&&(u.assign(i.getCoord2D(o)),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,e),m<=r&&h.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(1+o,m)))}}if(!h.length)return 0;h.sort(((t,e)=>t.compare(e)));let l=0;const c=h[0].x;if(a[l++]=c,l<o){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.H)(t,4,!1).total(),s=h[0].y;for(let t=1,n=h.length;t<n;t++)if(h[t].y>s+e){h.length=t;break}h.sort(((t,e)=>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t.x,e.x))),l=0,a[l++]=h[0].x;for(let t=1,n=h.length;t<n;t++)h[t].x!==a[l-1]&&l<o&&(a[l++]=h[t].x)}return l}function Ro(t,e,s,n,i,r,o){const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return t.queryControlPoints(a),Lo(a,e,s,n,i,r,o)}function zo(t){return t.getStartXY().norm(1)+t.getEndXY().norm(1)+t.m_cp[0].norm(1)+t.m_cp[1].norm(1)}function Bo(t){return t[0].norm(1)+t[1].norm(1)+t[2].norm(1)+t[3].norm(1)}function ko(t,e,n){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>=2),2===n){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e[0],e[n-1],1/3,s);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e[0],e[n-1],2/3,i),void t.construct(e[0],s,i,e[n-1])}const i=e[0],r=e[n-1],o=[0,0],a=Ro(t,i,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,Number.NaN,2,o),h=[0,0],u=Ro(t,r,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,Number.NaN,2,h),m=[];for(let s=0;s<a;s++)for(let a=0;a<u;a++){const u=o[s],l=h[a],c=u>l,g=(s,o)=>{const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(n-2,Number.NaN),h=()=>{let t=0;for(let s=1,i=n-1;s<i;s++){t+=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[s-1],e[s]);const n=t;a[s-1]=n}t+=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[n-2],e[n-1]),c&&a.reverse();for(let e=1,s=n-1;e<s;e++)a[e-1]/=t,c&&(a[e-1]=1-a[e-1])};let m=!1,g=!1;{const e=new fm;c?(t.queryCut(l,u,e,!0),s.assign(e.get().getControlPoint2()),o.assign(e.get().getControlPoint1())):(t.queryCut(u,l,e,!0),s.assign(e.get().getControlPoint1()),o.assign(e.get().getControlPoint2())),i.equals(s)&&(m=!0),r.equals(o)&&(g=!0)}h();let d=Number.MAX_VALUE;const _=s.clone(),p=o.clone();for(let t=0;t<5;t++){d=sa(!0,!1,i,_,p,r,m,g,a,n-2,e,n)}for(let t=0;t<30;t++){const t=_.clone();p.clone();const s=sa(!0,!0,i,_,p,r,m,g,a,n-2,e,n);if(d<=s&&t.equals(_)&&t.equals(p))break;d=s}h();let f=!1,P=Number.MAX_VALUE;const y=s.clone(),x=o.clone();for(let t=0;t<30;t++){const t=y.clone();x.clone();const s=sa(f,!0,i,y,x,r,m,g,a,n-2,e,n);if(P<=s&&t.equals(y)&&t.equals(x))break;f=!0,P=s}return P<d?(s.assign(y),o.assign(x)):(s.assign(_),o.assign(p),P=d),P},d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,p=[g(d,_),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,d)+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(d,_)+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(_,r),d.x,d.y,_.x,_.y];m.splice(m.length,0,...p)}let l=m[0],c=m[1],g=0;for(let s=6;s<m.length;s+=6)m[s]<l&&(l=m[s],c=m[s+1],g=s);let d=g;for(let s=0;s<m.length;s+=6)s!==g&&m[s+1]<c&&Math.abs(l-m[s])<10*l&&(c=m[s+1],d=s);t.construct(i,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(m[d+2],m[d+3]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(m[d+4],m[d+5]),r)}function Go(t,e,s=!1){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(n);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,4);let r,o,a;Zr(n,i,!0);const h=i[3].x.isZero(),u=i[3].y.isZero();if(h||u)if(h&&!u){if(i[2].x.isZero())return 0;r=i[1].x.div(i[2].x).negate(),o=i[2].y.div(i[3].y),a=i[1].y.div(i[3].y)}else{if(h||!u)return 0;if(i[2].y.isZero())return 0;r=i[1].y.div(i[2].y).negate(),o=i[2].x.div(i[3].x),a=i[1].x.div(i[3].x)}else{i[2].x.divThis(i[3].x),i[1].x.divThis(i[3].x),i[2].y.divThis(i[3].y),i[1].y.divThis(i[3].y);const t=i[2].x.sub(i[2].y);if(t.isZero())return 0;r=i[1].x.sub(i[1].y).div(t).negate(),o=i[2].x.clone(),a=i[1].x.clone()}if(!s&&r.abs().value()>2)return 0;const m=[0,0],l=t.getStartXY().equals(t.getEndXY()),c=sn(1,-r.toDouble(),r.add(o).mul(r).add(a).toDouble(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),l,m);if(0===c)return 0;if(m[0]>=0&&m[0]<=1){const t=r.toDouble()-m[0];if(s||t>=0&&t<=1)return e[0]=m[0],e[1]=t,e[0]>e[1]&&(e[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[0],e[0]=e[1])),2}if(2===c&&m[1]>=0&&m[1]<=1){const t=r.toDouble()-m[1];if(s||t>=0&&t<=1)return e[0]=m[1],e[1]=t,e[0]>e[1]&&(e[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[0],e[0]=e[1])),2}return 0}function Wo(t,e,s){const n=t[1].mulE(e[2]).subThisE(t[2].mulE(e[1])),i=t[1].mulE(e[3]).subThisE(t[3].mulE(e[1])).mulThis(3),r=t[2].mulE(e[3]).subThisE(t[3].mulE(e[2])).mulThis(3),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let a=gn(r,i,n,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,o);a<0&&(a=0);let h=0;for(let u=0;u<a;u++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(o[u].value(),0,1)||(s[h].setE(o[u]),h++);return h}function jo(t,e){e[0].set(0);let n=1;const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);Wr(t,i,!0);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);jr(t,r,!0);{const t=i[3].mul(3),s=i[2].mul(2),r=i[1].clone(),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let a=gn(t,s,r,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,o);a<0&&(a=0);for(let i=0;i<a;i++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(o[i].value(),0,1)||(e[n]=o[i],n++)}{const t=r[3].mul(3),s=r[2].mul(2),i=r[1].clone(),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let a=gn(t,s,i,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,o);a<0&&(a=0);for(let r=0;r<a;r++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(o[r].value(),0,1)||(e[n]=o[r],n++)}if(n+=Wo(i,r,e.slice(n)),e[n].set(1),n++,n>2){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(e,0,n,((t,e)=>{const s=t.value(),n=e.value();return s<n?-1:s>n?1:0}));let s=0;const i=e[0].clone();let r=0;const o=Bo(t)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)(),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_o(t,e[0].value(),a);for(let h=1;h<n;h++){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(_o(t,e[h].value(),n),e[h].eq(i)||n.isEqualPoint2D(a,o)){if(0!==s){if(0===e[h].eps())i.setE(e[h]),r=0;else if(0!==r){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(1/e[h].eps()),s=1/r,n=t+s;i.set((e[h].value()*t+i.value()*s)/n),r=1/n,i.setError(Math.sqrt(r))}e[s].setE(i),_o(t,i.value(),a)}}else s++,e[s].setE(e[h]),i.setE(e[h]),_o(t,i.value(),a),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(e[h].eps())}s++,n=s}return 1===n&&(n=2,e[1].set(1)),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0===e[0].value()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===e[n-1].value()),n}function Zo(t,e,s,n,i){const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,3),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);let h=0;if(e){if(jr(t,r,!1),h=dn(r[3],r[2],r[1],r[0].sub(s),a,!1,o),n)for(let u=0;u<h;u++){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,o[u].value(),e),n[u]=e.x}}else if(Wr(t,r,!1),h=dn(r[3],r[2],r[1],r[0].sub(s),a,!1,o),n)for(let u=0;u<h;u++){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,o[u].value(),e),n[u]=e.y}if(i)for(let u=0;u<h;u++)i[u]=o[u].value();else n&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(n,0,h,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8);return h}function Ho(t,e,s,n){const i=Uo(t,e,s,n.getEnvelope2D());if(i.isEmpty())return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(i);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,s);for(let a=0;a<s;++a)n.xyRot(t[a],r[a]);const o=Uo(r,e,s,n.getRotatedEnvelope2D());return i.intersect(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(o)),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(i)}function Uo(t,e,s,n){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,s);for(let a=0;a<s;++a)i[a]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(a/(s-1),0);const r=(t,e,s,n)=>{const i=.1,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.x).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.x)).divE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.y).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.y))).mulE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s).subE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.y))).addE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.x));if(r.eps()>i){const n=(e.x-t.x)/(e.y-t.y)*(s-t.y)+t.x;r.set(n,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)())}if(r.lt(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(0))||r.gt(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1)))return!1;let o=r.value()-r.eps();o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,0,1);let a=r.value()+r.eps();return a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(a,0,1),n.mergeCoordinate(o),n.mergeCoordinate(a),!0},o=[];{const e=(t,e)=>{o.length=s;const n=xr(i,s,o,!0),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;a.setEmpty();const h=s=>s.y<t?-1:s.y>e?1:0;let u=i[o[0]],m=h(u);0===m&&a.mergeCoordinate(u.x);for(let s=1;s<=n;++s){const l=i[o[s%n]],c=h(l);0===c&&a.mergeCoordinate(l.x);let g=0;c!==m&&(g=c*m===0?1===c||1===m?2:1:3,1&g&&r(u,l,t,a),2&g&&r(u,l,e,a)),u=l,m=c}return a};for(let n=0;n<s;++n)i[n].y=t[n].x;const a=e(n.xmin,n.xmax);if(a.isEmpty())return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(a);for(let n=0;n<s;++n)i[n].y=t[n].y;const h=e(n.ymin,n.ymax);return a.intersect(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(h)),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(a)}}function Oo(t,e,s){s.setEmpty(),s.merge(Ho(t,null,4,e))}function Qo(t,e,s){s.length=0;{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;io(t,e);const n=new Ye;if(vo(t,e,n),n.isZero())return e.isZero()||e.eq(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1))?0:(s.push(e.value()),1)}const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);kr(t,n,!0);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);Gr(t,i,!0);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,6),o=n[3].negate().mulE(i[1]).addE(n[2].mulE(i[2]).mul(2)).addE(n[1].mulE(i[3])),a=n[3].negate().mulE(i[1]).subE(n[2].mulE(i[2]).mul(2)).addE(n[1].mulE(i[3])),h=n[2].mulE(n[2]).subE(i[2].mulE(i[2]));r[0]=i[1].mulE(i[1]).mulE(o).addE(n[1].mulE(n[1]).mulE(a)).addE(n[1].mulE(i[1]).mulE(h).mul(2)).mul(6),r[1]=n[2].mulE(i[1]).subE(n[1].mulE(i[2])).mulE(n[2].mulE(n[2]).addE(n[1].mulE(n[3]).mul(2)).addE(i[2].mulE(i[2])).addE(i[1].mulE(i[3]).mul(2))).mul(24);const u=n[1].mulE(i[2]).mulE(i[2]).mulE(i[3]),m=n[2].mulE(n[2]).mulE(n[3]).mulE(i[1]).subE(u).mul(156),l=n[3].mulE(i[1]).subE(n[1].mulE(i[3])),c=n[3].mulE(i[1]).subE(n[1].mulE(i[3])),g=n[1].mulE(n[3]).mulE(c).addE(i[1].mulE(i[3]).mulE(l)).mul(72),d=i[1].mulE(i[3]).subE(n[1].mulE(n[3])),_=n[2].mulE(i[2]).mulE(d).mul(120),p=n[1].mulE(n[2]).mulE(n[2]).mulE(i[3]),f=n[3].mulE(i[1]).mulE(i[2]).mulE(i[2]).subE(p).mul(36);r[2]=m.addE(g).addE(_).addE(f);const P=n[2].mulE(n[3]).mulE(n[3]).mulE(i[1]).subE(n[1].mulE(i[2]).mulE(i[3]).mulE(i[3])).mul(360),y=n[2].mulE(i[2]).mulE(n[2].mulE(n[3]).subE(i[2].mulE(i[3]))).addE(n[3].mulE(i[2]).mulE(i[2]).mulE(i[2])).subE(n[2].mulE(n[2]).mulE(n[2]).mulE(i[3])).mul(24),x=n[2].mulE(i[1]).mulE(i[3]).mulE(i[3]).subE(n[1].mulE(n[3]).mulE(n[3]).mulE(i[2])).mul(72),C=n[3].mulE(i[3]).mulE(i[1].mulE(i[2]).subE(n[1].mulE(n[2]))).mul(288);r[3]=P.addE(y).addE(x).addE(C),r[4]=i[3].mulE(i[3]).addE(n[3].mulE(n[3])).mulE(n[3].mulE(i[1]).subE(n[1].mulE(i[3]))).mul(270).addE(n[3].mulE(i[2]).subE(n[2].mulE(i[3]))).mulE(n[2].mulE(n[3]).addE(i[2].mulE(i[3]))).mul(180),r[5]=n[3].mulE(i[2]).subE(n[2].mulE(i[3])).mulE(n[3].mulE(n[3]).addE(i[3].mulE(i[3]))).mul(216);const v=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,5),b=_n(r,5,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,v,5);if(b>0){let n=Math.abs(t.getCurvature(0)),i=0;const r=Math.abs(t.getCurvature(1));(r>n||!Number.isFinite(r))&&(i=1);for(let e=0;e<b;e++){const s=Math.abs(t.getCurvature(v[e].value()));t.getCoord2D(v[e].value()),(s>n||!Number.isFinite(s))&&(n=s,i=v[e].value())}if((!Number.isFinite(n)||1/n<e)&&!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(i,0,1)){const e=t.getCoord2D(i);if(!e.equals(t.getStartXY())&&!e.equals(t.getEndXY()))return s.push(i),1}}if(!t.isClosed()){const e=[0,0],n=Go(t,e,!1);for(let t=0;t<n;t++)e[t]>0&&e[t]<1&&s.push(e[t]);return s.length}return 0}class Jo{constructor(t,e){this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return 0===t?this.len-Hr(this.b,e,!1):0}getError(t){return 0}}function Ko(t,e,n,i,r,o,a){for(;;){const h=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[3]),u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[1],e[2])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[2],e[3]);if(u-h<=i+n*u)return t+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(h,u,.5);const m=t=>ao(e,1,t).length();{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(a<12);let h=m(0),l=m(1);r[0]+=2,h>l&&(l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(h,h=l),e[3]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[0],e[0]=e[3]),e[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[1],e[1]=e[2]));let c=h/(h+l),g=1,d=u;for(;c<1/32&&d>=32*(i+n*d);){g/=4;const t=m(g);r[0]++,c=h/(t+h);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(Po(e,.5*g,s),d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,e[0]),d<=i){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(e,g,t),d+=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,s)}}if(1!==g){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);po(e,g,e,s),t=Ko(t,s,n,i,r,0,a+1),o++,a++;continue}}const l=8;r[0]+=l;const c=hr(l,m,0,1),g=16;r[0]+=g;const d=hr(g,m,0,1);let _=Math.abs(c-d)>i+n*u;if(!_)return t+d;if(o<3){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);po(e,.5,e,s),t=Ko(t,s,n,i,r,o+1,a+1),o++,a++;continue}const p=32;r[0]+=p;const f=hr(p,m,0,1);if(_=Math.abs(d-f)>i+n*u,!_)return t+f;const P=64;r[0]+=P;const y=hr(P,m,0,1);if(_=Math.abs(f-y)>i+n*u,!_)return t+y;const x=128;r[0]+=x;const C=hr(x,m,0,1);return _=Math.abs(y-C)>i+n*u,t+C}}function $o(t,e,s,n,i){if(s===e)return 0;const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(r);const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fo(r,e,s,o);return Ko(0,o,n,i,[0],0,0)}function ta(t,e,s,n,i){let r=!0;const o=Jn(5,e,s,n,i,(e=>{const s=uo(t,1,e);return(r?t.getCoordX(e)-t.getStartX():t.getCoordY(e)-t.getStartY())*s.length()}));r=!1;const a=Jn(5,e,s,n,i,(e=>{const s=uo(t,1,e);return(r?t.getCoordX(e)-t.getStartX():t.getCoordY(e)-t.getStartY())*s.length()}));return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(o,a)}function ea(t,e,s,n,i,r,o,a,h){const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(u);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);if(e.queryControlPoints(m),u[0].equals(m[0])){if(u[1].equals(m[1])&&u[2].equals(m[2])&&u[3].equals(m[3]))return s&&(s.length=0,s.push(u[0]),s.push(u[3])),n&&(n.length=0,n.push(0),n.push(1)),i&&(i.length=0,i.push(0),i.push(1)),!0;if(!u[0].equals(m[3]))return!1}return!!(u[0].equals(m[3])&&u[1].equals(m[2])&&u[2].equals(m[1])&&u[3].equals(m[0]))&&(n&&(n.length=0,n.push(0),n.push(1),h&&(n[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[1]))),i&&(i.length=0,i.push(1),i.push(0),h&&(i[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(i[0],i[0]=i[1]))),s&&(s.length=0,s.push(u[0]),s.push(u[3]),h&&(s[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[1]))),!0)}function sa(t,e,n,i,r,o,a,h,u,m,l,c){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(m+2===c);let g=0,d=0,_=0,p=0,f=0,P=0,y=0;const x=(t,e)=>{const s=1-e,a=n.mul((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.an)(s)),h=i.mul(3*e*s*s),u=r.mul(3*e*e*s),m=o.mul((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.an)(e));return a.add(h).add(u).add(m).sub(l[t]).sqrLength()};for(let s=1,v=c-1;s<v;s++){let e=u[s-1];if(t){s>2?(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(2*u[s-2]-u[s-3],0,1),u[s-1]=e):2===s&&(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(2*u[s-2],0,1),u[s-1]=e);const t=(t,e,s)=>{let a=-1;for(let h=0;!(Math.abs(e-a)<1e-12)&&10!==h;h++){const h=e*e,u=1-e,m=u*u,c=m*u,g=n.x-2*i.x+r.x,d=n.x-3*i.x+3*r.x-o.x,_=n.y-2*i.y+r.y,p=n.y-3*i.y+3*r.y-o.y,f=n.x-i.x-2*g*e+d*h,P=-l[t].x+n.x*c+e*(3*i.x*m+e*(3*r.x*u+o.x*e)),y=n.y-i.y-2*_*e+p*h,x=-l[t].y+n.y*c+e*(3*i.y*m+e*(3*r.y*u+o.y*e)),C=-6*(f*P+y*x),v=6*(3*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(f)-(-2*g+2*d*e)*P)+6*(3*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(y)-(-2*_+2*p*e)*x);if(a=e,0===v)break;e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e-C/v,s,1)}return a};{const e=x(s,u[s-1]);let n=t(s,u[s-1],0),i=x(s,n);if(1.01*e<i){const e=s>1?u[s-2]:0,r=t(s,.3*(u[s-1]-e)+e,0),o=x(s,r);o<i&&(i=o,n=r)}e>i&&(u[s-1]=n)}}const a=u[s-1],h=a*a,m=h*a,c=1-a,C=c*c,v=C*c;g+=3*h*C*C,d+=3*m*v,_+=3*h*h*C;const b=-(v*n.x+m*o.x-l[s].x);p+=b*a*C,f+=b*h*c;const S=-(v*n.y+m*o.y-l[s].y);P+=S*a*C,y+=S*h*c}if(e){const t=g*_-d*d;Math.abs(t)>=1e-12*(Math.abs(g*_)+Math.abs(d*d))+1e-10?(a||(i.x=(p*_-f*d)/t,i.y=(P*_-y*d)/t),h||(r.x=(g*f-d*p)/t,r.y=(g*y-d*P)/t)):((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(n,o,.3,i),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(n,o,.6,r))}let C=0;for(let s=1,v=c-1;s<v;s++)C+=x(s,u[s-1]);return C}var na=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class ia extends gs{constructor(t){t&&t.cp?(super({start:t.cp[0],end:t.cp[3],vd:t.vd}),this.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2),this.m_cp[0].assign(t.cp[1]),this.m_cp[1].assign(t.cp[2])):void 0===t||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.W)(t,"vd")?(super({vd:t?.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)):t.from?(super({start:t.from,end:t.to,vd:t.vd}),this.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2),this.m_cp[0].assign(t.cp1),this.m_cp[1].assign(t.cp2)):(super({XStart:0,YStart:0,XEnd:0,YEnd:0,vd:t.vd}),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unrecognized constructor params"),this.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2),this.m_cp[0].setCoords(0,0),this.m_cp[1].setCoords(0,0)),this.m_cachedValues=0}getBoundary(){return Ks(this)}construct(t,e,s,n){this.m_XStart=t.x,this.m_YStart=t.y,this.m_XEnd=n.x,this.m_YEnd=n.y,this.m_cp[0].assign(e),this.m_cp[1].assign(s),this.afterCompletedModification()}constructPoints(t){this.m_XStart=t[0].x,this.m_YStart=t[0].y,this.m_XEnd=t[3].x,this.m_YEnd=t[3].y,this.m_cp[0].assign(t[1]),this.m_cp[1].assign(t[2]),this.afterCompletedModification()}constructFromQuadratic(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);Ki(t,e),this.constructPoints(e)}constructFromQuadraticSegment(t){this.dropAllAttributes(),this.assignVertexDescription(t.getDescription()),this.m_XStart=t.getStartX(),this.m_YStart=t.getStartY(),this.m_XEnd=t.getEndX(),this.m_YEnd=t.getEndY(),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__._)(2,t.getStartXY(),t.getControlPoint1(),2/3,this.m_cp[0]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__._)(2,t.getControlPoint1(),t.getEndXY(),1/3,this.m_cp[1]),this.afterCompletedModification(),ss(this,t)}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier}queryEnvelope(t){if(2!==t.m_EnvelopeType)return void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0);if(t.setCoords(this.getStartXY()),t.mergeNe(this.getEndXY()),t.contains(this.m_cp[0])&&t.contains(this.m_cp[1]))return;const e=Jr(this);if(null!==e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(const n of e.specialPoints)this.queryCoord2D(n,s),t.mergeNe(s);return}const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,8),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(i);const r=jo(i,n),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let s=1;s<r-1;s++)this.queryCoord2D(n[s].value(),o),t.mergeNe(o)}applyTransformation(t){if(1===t.m_TransformationType){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return this.queryControlPoints(e),t.transformPoints2D(e,4,e),this.setStartXY(e[0]),this.m_cp[0].assign(e[1]),this.m_cp[1].assign(e[2]),this.setEndXY(e[3]),void $r(this)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}createInstance(){return new ia({vd:this.m_description})}calculateLength2D(){return Hr(this,1,!1)}calculateLowerLength2D(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY())}calculateUpperLength2D(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.m_cp[0])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.m_cp[0],this.m_cp[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getEndXY(),this.m_cp[1])}queryCoord2D(t,e){return this.queryCoord2DExtends(t,e,!0)}queryCoord2DMP(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}queryCoord2DExtends(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(n),Po(n,t,e,s)}queryCoord2DE(t,e){xo(this,t,e)}getCoordX(t){if(t<0||t>1){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtends(t,e,!0),e.x}const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.getStartX(),this.m_cp[0].x,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.m_cp[0].x,this.m_cp[1].x,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.m_cp[1].x,this.getEndX(),t),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(e,s,t),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,n,t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(i,r,t)}getCoordY(t){if(t<0||t>1){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2DExtends(t,e,!0),e.y}const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.getStartY(),this.m_cp[0].y,t),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.m_cp[0].y,this.m_cp[1].y,t),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(this.m_cp[1].y,this.getEndY(),t),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(e,s,t),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,n,t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(i,r,t)}cut(t,e,s){const n=new fm;return this.queryCut(t,e,n,s),n.releaseSegment()}queryCut(t,e,s,n){const i=s.createCubicBezier();if(this.cutBezierIgnoreAttributes(t,e,i),n)return;i.assignVertexDescription(this.m_description);const r=this.m_description.getAttributeCount();if(r>1){for(let e=1;e<r;e++){const s=this.m_description.getSemantics(e),n=na.getComponentCount(s);for(let e=0;e<n;e++){const n=this.getAttributeAsDbl(t,s,e);i.setStartAttribute(s,e,n)}}for(let t=1;t<r;t++){const s=this.m_description.getSemantics(t),n=na.getComponentCount(s);for(let t=0;t<n;t++){const n=this.getAttributeAsDbl(e,s,t);i.setEndAttribute(s,t,n)}}}}queryDerivative(t,e){vo(this,t,e)}cutBezierIgnoreAttributes(t,s,n){(t<0||s>1||t>s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Cubic_bezier.cut_bezier_ignore_attributes");const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(i);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fo(i,t,s,r),n.setControlPoints(r)}splitBezierIgnoreAttributes(t,s,n){this===s&&this===n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Cubic_bezier.split_bezier_ignore_attributes");const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(i);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);po(i,t,r,o),s&&s.setControlPoints(r),n&&n.setControlPoints(o)}getAttributeAsDbl(t,e,s){if(0===e)return 0===s?this.getCoordX(t):this.getCoordY(t);if(0===t)return this.getStartAttributeAsDbl(e,s);if(1===t)return this.getEndAttributeAsDbl(e,s);const n=this.getStartAttributeAsDbl(e,s),i=this.getEndAttributeAsDbl(e,s),r=this.calculateLength2D(),o=r>0?this.tToLength(t)/r:0,a=na.getInterpolation(e);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.V)(a,n,i,o,na.getDefaultValue(e))}getClosestCoordinate(t,e){const s=[Number.NaN];return Ro(this,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),e,-1,1,s),s[0]}getClosestCoordinateOnInterval(t,e,s=-1){const n=[Number.NaN];return 0===Ro(this,t,e,!1,s,1,n)?Number.NaN:n[0]}getYMonotonicParts(t,e=!1){return this.getMonotonicParts(t,e)}getMonotonicParts(t,n){t.length<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const i=Qr(this);if(2===i.specialPointsCount()&&this.isMonotoneQuickAndDirty())return 0;let r=0;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=i.specialPointsCount()-1);for(let e=1,s=i.specialPointsCount();e<s;++e)this.queryCut(i.specialPoints[e-1],i.specialPoints[e],t[r],n),r++;for(let e=0;e<r;++e){lo(t[e].get())}return r}intersectionWithAxis2D(t,e,s,n){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return this.queryControlPoints(i),Zo(i,t,e,s,n)}intersectionOfYMonotonicWithAxisX(t,e){if(this.m_YStart===this.m_YEnd)return t===this.m_YStart?e:Number.NaN;if(t===this.m_YStart)return this.m_XStart;if(t===this.m_YEnd)return this.m_XEnd;const n=[0,0],i=this.intersectionWithAxis2D(!0,t,n,null);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(2!==i),-1===i?e:n[0]}isCurve(){return!0}isDegenerate(t){return Re(this,t)}isDegenerate3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}queryLooseEnvelope(t){if(2===t.m_EnvelopeType)return t.setCoords({pt:this.getStartXY()}),t.mergeNe(this.m_cp[0]),t.mergeNe(this.m_cp[1]),void t.mergeNe(this.getEndXY());(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}clone(t){const e=this.createInstance();return this.copyTo(e),e}queryInterval(t,e){if(0===t){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();this.queryEnvelope(t);const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();return 0===e?t.queryIntervalX(s):t.queryIntervalY(s),s}return super.queryInterval(t,e)}queryLooseEnvelopeOnInterval(t,e){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(s),fo(s,t.vmin,t.vmax,s),e.setFromPoints(s,4)}changeEndPoints2D(t,e){if(t.isEqual(this.m_XStart,this.m_YStart)&&e.isEqual(this.m_XEnd,this.m_YEnd))return;const s=this.m_cp[0].isEqual(this.m_XStart,this.m_YStart),n=this.m_cp[0].isEqual(this.m_XEnd,this.m_YEnd),i=this.m_cp[1].isEqual(this.m_XStart,this.m_YStart),r=this.m_cp[1].isEqual(this.m_XEnd,this.m_YEnd);this.setStartXY(t),this.setEndXY(e),s?this.m_cp[0].setCoordsPoint2D(t):n&&this.m_cp[0].setCoordsPoint2D(e),r?this.m_cp[1].setCoordsPoint2D(e):i&&this.m_cp[1].setCoordsPoint2D(t),this.normalizeAfterEndpointChange()}tToLength(t){return Hr(this,t,!0)}lengthToT(t){return Ur(this,t)}calculateWeightedAreaCentroid2D(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);Br(this,e);const s=e[3],n=e[2],i=e[1],r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;r.x=(5*s.x*s.x*(7*n.y+16*i.y)+s.x*(-35*s.y*n.x+40*n.x*n.y-80*s.y*i.x+140*n.x*i.y+112*i.x*i.y)-2*(s.y*(20*n.x*n.x+70*n.x*i.x+56*i.x*i.x)-7*(4*n.x+5*i.x)*(-n.y*i.x+n.x*i.y)))/840,r.y=(-5*s.y*s.y*(7*n.x+16*i.x)+s.y*(5*s.x*(7*n.y+16*i.y)-4*(10*n.x*n.y+35*n.y*i.x+28*i.x*i.y))+2*(-7*(4*n.y+5*i.y)*(n.y*i.x-n.x*i.y)+s.x*(20*n.y*n.y+70*n.y*i.y+56*i.y*i.y)))/840;const o=mo(this);return r.x+=(e[0].x-t.x)*o,r.y+=(e[0].y-t.y)*o,r}calculateWeightedCentroid2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.isDegenerate(0)?(t.setCoords(0,0),t):zr(this)?(t.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),t):(t.assign(Or(this,1)),t)}getControlPoint1(){return this.m_cp[0].clone()}setControlPoint1(t){this.m_cp[0].setCoordsPoint2D(t),this.afterCompletedModification()}getControlPoint2(){return this.m_cp[1].clone()}setControlPoint2(t){this.m_cp[1].setCoordsPoint2D(t),this.afterCompletedModification()}queryControlPoints(t){t[0].assign(this.getStartXY()),t[1].assign(this.m_cp[0]),t[2].assign(this.m_cp[1]),t[3].assign(this.getEndXY())}queryControlPointsHelper(t){return this.queryControlPoints(t),4}setControlPoints(t){for(let s=0;s<4;s++)t[s].isNAN()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("NAN control points in bezier are not supported");this.m_XStart=t[0].x,this.m_YStart=t[0].y,this.m_cp[0].setCoordsPoint2D(t[1]),this.m_cp[1].setCoordsPoint2D(t[2]),this.m_XEnd=t[3].x,this.m_YEnd=t[3].y,this.afterCompletedModification()}getTangent(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return this.queryControlPoints(e),Co(e,t)}getDerivative(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return this.queryControlPoints(e),ao(e,1,t)}getCurvature(t){const e=uo(this,1,t),s=uo(this,2,t),n=e.sqrLength();if(0===n)return Number.NaN;e.divThis(Math.sqrt(n));return e.crossProduct(s)/n}isIntersectingPoint(t,e,s){if(s&&(t.equals(this.getStartXY())||t.equals(this.getEndXY())))return!1;const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;if(this.queryLooseEnvelope(n),n.inflateCoords(e,e),!n.contains(t))return!1;const i=this.getClosestCoordinate(t,!1),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(i,r);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(r,t)<=e}isIntersectingPoint3D(t,e,n,i,r=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}isMonotoneQuickAndDirty(){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);return this.queryControlPoints(t),go(t)}getMonotonicPartParams(t,n){const i=Qr(this),r=i.specialPointsCount();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(us.s_maxMonotonicPartParams>=r),!n)return i.specialPointsCount();t<r&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");for(let e=0;e<r;e++)n[e]=i.specialPoints[e];return r}normalizeAfterEndpointChange(){return!1}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=this.m_YEnd);for(let t=0,e=this.m_description.getTotalComponentCount()-2;t<e;t++)this.m_attributes[t+e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_attributes[t],this.m_attributes[t]=this.m_attributes[t+e]);this.m_cp[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp[0],this.m_cp[0]=this.m_cp[1]),this.m_cachedValues=null}}findMinDeriv(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;return io(this,t),t.value()}isLine(){return!1}isDegenerateToLineHelper(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(e);const s=e[3].sub(e[0]),n=s.length();if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[2],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[2],e[3])-n>t)return!1;const i=t;let r=e[1].clone();r.subThis(e[0]);let o=Math.abs(r.crossProduct(s))/n;return!(o>i)&&(r=e[2].clone(),r.subThis(e[1]),o=Math.abs(r.crossProduct(s))/n,!(o>i))}copyIgnoreAttributes(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(e),t.setControlPoints(e)}calculateArea2DHelper(){return mo(this)}absNorm(){return zo(this)}queryEnvelopeW(t,e){qo(this,t,e)}setSegmentFromCoordsForStitcher(t,e){ko(this,t,e)}writeInBufferStream(t,e){const s=new Float64Array(4);return this.writeInBuffer_(s),t.writeRangeFromArray(e,s.length,s,!0,1),e+s.length}writeInBuffer_(t){return t[0]=this.m_cp[0].x,t[1]=this.m_cp[0].y,t[2]=this.m_cp[1].x,t[3]=this.m_cp[1].y,4}readFromBufferStream(t,e){const s=new Float64Array(4);t.queryRange(e,s.length,s,!0,1),this.readFromBuffer_(s)}readFromBuffer_(t){this.m_cp=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,2),this.m_cp[0].x=t[0],this.m_cp[0].y=t[1],this.m_cp[1].x=t[2],this.m_cp[1].y=t[3],this.m_cachedValues=null}snapControlPoints(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(e);const s=(e,s,n)=>{let i=!1;if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,n)<=t){i=!e.equals(n),e.setCoordsPoint2D(n);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s,n)<=t&&(i||=!s.equals(n),s.setCoordsPoint2D(n))}return i},n=s(e[1],e[2],e[0]),i=s(e[2],e[1],e[3]);return(n||i)&&this.setControlPoints(e),n||i}needsSnapControlPoints(t){if(!t)return!1;const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);this.queryControlPoints(e);const s=(e,s,n)=>{let i=!1;if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,n)<=t){i=!e.equals(n),e.setCoordsPoint2D(n);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(s,n)<=t&&(i||=!s.equals(n),s.setCoordsPoint2D(n))}return i},n=s(e[1],e[2],e[0]),i=s(e[2],e[1],e[3]);return n||i}calculateSpecialPointsForCracking(t,e){return Qo(this,t,e)}ensureXYMonotone(){return lo(this)}setCoordsForIntersector(t,e,s){eo(this,t,e,s)}copyToImpl(t){const e=t;e.m_cp[0].assign(this.m_cp[0]),e.m_cp[1].assign(this.m_cp[1]),Kr(e,Jr(this))}reverseImpl(){this.m_cp[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp[0],this.m_cp[0]=this.m_cp[1])}equalsImpl(t){const e=t,s=0,n=1;return!!this.m_cp[0].equals(e.m_cp[s])&&!!this.m_cp[1].equals(e.m_cp[n])}equalsImplTol(t,e){const s=t,n=0,i=1;return!!this.m_cp[0].isEqualPoint2D(s.m_cp[n],e)&&!!this.m_cp[1].isEqualPoint2D(s.m_cp[i],e)}swapImpl(t){const e=t;e.m_cp[0]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp[0],this.m_cp[0]=e.m_cp[0]),e.m_cp[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_cp[1],this.m_cp[1]=e.m_cp[1]),to(this,e)}afterCompletedModification(){$r(this)}isIntersecting(t,e,s){return 0!==rm(!1,this,t,e,s)}intersect(t,e,s,n,i){return um(!1,this,t,e,s,n,i)}intersectPoint(t,e,s){return Xo(this,t,e,s)}endPointModified(){$r(this)}clearEndPointModified(){}}ia.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier;class ra{constructor(){this.length=Number.NaN,this.area=Number.NaN,this.centroidX=Number.NaN,this.centroidY=0,this.specialPoints=[],this.specialPointsLength=[]}specialPointsCount(){return this.specialPoints.length}}function oa(t,e,n,i,r,o,a,h){for(;;){const u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[2]),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[0],e[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e[1],e[2]);if(m-u<=r+i*m)return t+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(u,m,.5);const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),c=t=>{fa(e,n,1,t,l);return l[1].length()};if(0===a&&h<8){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(h<8);let u=c(0),l=c(1);o[0]+=2,u>l&&(l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(u,u=l),e[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[0],e[0]=e[2]),n[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[2]));let g=u/(u+l),d=1,_=m;for(;g<1/32&&_>=r+i*_;){d/=4;const t=c(d);o[0]++,g=u/(t+u);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(_h(e,n,.5*d,s),_=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,e[0]),_<=r){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(e,n,d,t),_+=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,s)}}if(1!==d){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),u=[0,0,0];Oa(e,n,d,e,n,s,u),t=oa(t,s,u,i,r,o,0,h+1),a++,h++;continue}}let g=!1;const d=8;o[0]+=d;const _=hr(d,c,0,1),p=16;o[0]+=p;const f=hr(p,c,0,1);if(g=Math.abs(_-f)>r+i*m,!g)return t+f;if(a<8&&h<9){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),u=[0,0,0];Oa(e,n,.5,e,n,s,u),t=oa(t,s,u,i,r,o,a+1,h+1),a++,h++;continue}const P=32;o[0]+=P;const y=hr(P,c,0,1);if(g=Math.abs(f-y)>r+i*m,!g)return t+y;const x=64;o[0]+=x;const C=hr(x,c,0,1);if(g=Math.abs(y-C)>r+i*m,!g)return t+C;const v=128;o[0]+=v;const b=hr(v,c,0,1);return g=Math.abs(C-b)>r+i*m,t+b}}function aa(t,e,s,n,i){if(s===e)return 0;const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),o=[0,0,0];t.queryControlPoints(r),t.queryWeights(o);const a=[0,0,0],h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);Qa(r,o,e,s,h,a);return oa(0,h,a,n,i,[0],0,0)}class ha{constructor(t,e,s){this.controlPoints=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.L)(t,3),this.weights=[0,0,0],(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(this.weights,e,0,0,3),this.point=s.clone()}getMaxDerivative(){return 3}getValue(t,e){if(0===t){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(this.controlPoints,this.weights,e,t);const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fa(this.controlPoints,this.weights,1,e,s);return 2*t.sub(this.point).dotProduct(s[1])}if(1===t){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(this.controlPoints,this.weights,e,t);const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fa(this.controlPoints,this.weights,2,e,s);return 2*(t.sub(this.point).dotProduct(s[2])+s[1].dotProduct(s[1]))}if(2===t){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(this.controlPoints,this.weights,e,t);const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);fa(this.controlPoints,this.weights,3,e,s);return 2*(t.sub(this.point).dotProduct(s[3])+3*s[1].dotProduct(s[2]))}return 0}getError(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}}function ua(t,e,s,n){const i=Ba(0,0,0,0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(18,Number.NaN),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(o),o[2].subThis(e),o[1].subThis(e),o[0].subThis(e);const a=[0,0,0];t.queryWeights(a);const h=[1,fh(a),1],u=yh(a,s),m=yh(a,n),l=tn(new ha(o,h,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0)),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(u,m),18,r);_h(o,h,u,i.pt),i.t=u,i.d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i.pt,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0));const c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(o,h,m,c);const g=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(c,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0));g<i.d&&(i.d=g,i.t=m,i.pt.assign(c));for(let d=0;d<l;d++){_h(o,h,r[d],c);const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(c,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0));t<i.d&&(i.d=t,i.t=Ph(a,r[d]),i.pt.assign(c))}return i}function ma(t,e,s,n,i){let r=!0;const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),a=Jn(5,e,s,n,i,(e=>{pa(t,1,e,o);return(r?t.getCoordX(e)-t.getStartX():t.getCoordY(e)-t.getStartY())*o[1].length()}));r=!1;const h=Jn(5,e,s,n,i,(e=>{pa(t,1,e,o);return(r?t.getCoordX(e)-t.getStartX():t.getCoordY(e)-t.getStartY())*o[1].length()}));return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(a,h)}function la(t){t.m_cachedValues=null}function ca(t,e){e.m_cachedValues=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_cachedValues,t.m_cachedValues=e.m_cachedValues)}function ga(t){if(t.m_cachedValues)return t.m_cachedValues;const e=new ra,s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(s);const n=[0,0,0];return t.queryWeights(n),da(s,n,e.specialPoints),La(t,e),e}function da(t,e,s){if(0===e[1])return s.length=0,s.push(0),void s.push(1);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,8);n[0].set(0);let i=1;{const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1].x).subThis(t[0].x).mulThis(e[1]).mulThis(e[0]),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2].x).subThis(t[0].x).mulThis(e[2]).mulThis(e[0]),o=s.subE(r).addThisE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2].x).subThis(t[1].x).mulThis(e[2]).mulThis(e[1]));r.subThisE(s.mul(2));const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let h=gn(o,r,s,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,a);h<0&&(h=0);for(let t=0;t<h;t++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(a[t].value(),0,1)||(n[i]=a[t],i++)}{const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[1].y).subThis(t[0].y).mulThis(e[1]).mulThis(e[0]),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2].y).subThis(t[0].y).mulThis(e[2]).mulThis(e[0]),o=s.subE(r).addThisE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t[2].y).subThis(t[1].y).mulThis(e[2]).mulThis(e[1]));r.subThisE(s.mul(2));const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let h=gn(o,r,s,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),!1,a);h<0&&(h=0);for(let t=0;t<h;t++)(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(a[t].value(),0,1)||(n[i]=a[t],i++)}if(n[i].set(1),i++,i>2){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.C)(n,0,i,((t,e)=>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t.value(),e.value())));let t=0,e=n[0].value(),s=1;for(let r=1;r<i;r++)n[r].eq(n[r-1])?(e+=n[r].value(),s++):(s>1&&(e/=s,n[t].set(e)),t++,n[t]=n[r],e=n[r].value(),s=1);t++,i=t}n[0].set(0),n[i-1].set(1),s.length=i;for(let r=0;r<i;r++)s[r]=n[r].value()}function _a(t,e,s){if(s){if(e<0)return e;if(e>1)return e-1+_a(t,1,!1)}if(t.isDegenerate(0))return 0;const n=1===e,i=ga(t);if(n&&!Number.isNaN(i.length))return i.length;const r=Xa(t),o=r/t.calculateUpperLength2D();let a=0,h=0;for(let u=1,m=i.specialPointsCount();u<m;u++){const s=i.specialPoints[u];if(a+=aa(t,h,Math.min(e,s),o,r),e<=s)break;h=s}return n&&(i.length=a),a}function pa(t,e,s,n){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(i);const r=[0,0,0];t.queryWeights(r),fa(i,r,e,s,n)}function fa(t,e,s,n,i){const r=[t[0],t[1],t[2]],o=[e[0],e[1],e[2]],a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);Pa(r,o,s,n,a);for(let h=0;h<=s;h++)i[h].setCoords(a[h].x,a[h].y)}function Pa(t,e,n,i,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0);const o=[t[0].clone(),t[1].clone(),t[2].clone()];if(!o[0].isZero()){for(let t=1;t<3;++t)o[t].subThis(o[0]);o[0].setCoords(0,0)}const a=ya(o,e,0,i),u=Ca(e,0,i),m=a.divide(u);if(r[0].assign(m),0===n)return;const l=[e[1]*e[0],e[2]*e[0]*.5,e[1]*e[2]],c=[t[1].sub(t[0]),t[2].sub(t[0]),t[2].sub(t[1])],g=u*u,d=ya(c,l,0,i).mul(2).divide(g);if(r[1].assign(d),1===n)return;const _=Ca(e,1,i),p=2*u*_,f=ya(c,l,1,i).mul(2).sub(d.mul(p)).divide(g);if(r[2].assign(f),2===n)return;const P=ya(c,l,2,i).mul(2),y=2*(_*_+u*Ca(e,2,i)),x=P.sub(f.mul(p).mul(2)).sub(d.mul(y)).divide(g);r[3].assign(x),3!==n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}function ya(t,e,s,n){if(0===s){if(n<=.5){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[0].mul(e[0]),t[1].mul(e[1]),n,s);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,t[1].mul(e[1]),t[2].mul(e[2]),n,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a2)(2,s,i,n,r),r}{const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[0].mul(e[0]),t[1].mul(e[1]),n,s);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,t[1].mul(e[1]),t[2].mul(e[2]),n,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a3)(2,s,i,n,r),r}}if(1===s){const s=t[1].mul(e[1]),i=s.sub(t[0].mul(e[0])).mul(1-n).add(t[2].mul(e[2]).sub(s).mul(n));return i.mulThis(2),i}if(2===s){const s=t[1].mul(e[1]),n=t[2].mul(e[2]).sub(s).sub(s.sub(t[0].mul(e[0])));return n.mulThis(2),n}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}function xa(t,e,s,n){if(n.toDouble()<=.5){const s=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,t[0].mulE(e[0]),t[1].mulE(e[1]),n,s);const i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,t[1].mulE(e[1]),t[2].mulE(e[2]),n,i);const r=new Ye;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a4)(2,s,i,n,r),r}{const s=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,t[0].mulE(e[0]),t[1].mulE(e[1]),n,s);const i=new Ye;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,t[1].mulE(e[1]),t[2].mulE(e[2]),n,i);const r=new Ye;return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a5)(2,s,i,n,r),r}}function Ca(t,e,s){if(0===e){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t[0],t[1],s),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t[1],t[2],s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(e,n,s)}if(1===e){return 2*((1-s)*(t[1]-t[0])+(t[2]-t[1])*s)}if(2===e){return 2*(t[2]-t[1]-(t[1]-t[0]))}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}function va(t,e,s){if(s.toDouble()<=.5){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(t[0],t[1],s),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(t[1],t[2],s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(e,n,s)}{const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(t[0],t[1],s),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(t[1],t[2],s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(e,n,s)}}function ba(t,e,s,n,i){const r=[Ye.constructPoint2D(t[0]),Ye.constructPoint2D(t[1]),Ye.constructPoint2D(t[2])];r[2].subThisE(r[0]),r[1].subThisE(r[0]),r[0].setCoords(0,0);Sa(r,[new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e[0]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e[1]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e[2])],s,n,i)}function Sa(t,e,n,i,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0);const o=[t[0].clone(),t[1].clone(),t[2].clone()];if(!o[0].isZero()){for(let t=1;t<3;++t)o[t].subThisE(o[0]);o[0]=Ye.constructCoords(0,0)}const a=xa(o,e,0,i),h=va(e,0,i),u=a.divE(h);r[0].setE(u);const m=[e[1].mulE(e[0]),e[2].mulE(e[0]).mul(.5),e[1].mulE(e[2])],l=xa([t[1].subE(t[0]),t[2].subE(t[0]),t[2].subE(t[1])],m,0,i).mul(2),c=h.sqr(),g=l.divE(c);r[1].setE(g)}function Ea(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(3,Number.NaN);t.queryWeights(i),Da(n,i,e,s)}function Da(t,e,s,n){s.value()<0&&s.set(0,s.eps()),s.value()>1&&s.set(1,s.eps());const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Ye,4);ba(t,e,1,s,i),n.setE(i[1])}function wa(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(s,0,1),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);if(fa(t,e,3,n,i),i[1].isZero()){if(i[2].isZero())return i[3];{const t=i[2].clone();return 1===n&&t.negateThis(),t}}return i[1]}class Aa{constructor(t,e){this.len=0,this.b=t,this.len=e}getMaxDerivative(){return 1}getValue(t,e){return 0===t?this.len-_a(this.b,e,!1):0}getError(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}}function Ta(t,e,s){const n=_a(t,1,!1);if(e<=0)return e;if(e>=n)return e-n+1;const i=[0];return 1!==tn(new Aa(t,e),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),1,i)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)(""),i[0]}function Ia(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),s=[0,0,0];return t.queryControlPoints(e),t.queryWeights(s),Ma(e,s)}function Ma(t,e){const n=fh(e);if(1===n){return fi(t)}if(0===n)return 0;const i=[new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),t[1].sub(t[0]),t[2].sub(t[0])],r=i[1].crossProduct(i[2]);if(n<1){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0);const t=1-n;let e;if(t<.01)e=-1/3+t*(2/15+t*(3/35+t*(16/315+t*(20/693+t*(16/1001+t*(56/6435))))));else{const s=t*(1+n),i=Math.atan2(Math.sqrt(t),Math.sqrt(1+n));e=n*(.5*n-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ap)(s)*i)/s}return r*e}{const t=(n-1)*(n+1);return.25*n/Math.pow(t,1.5)*(-2*n*Math.sqrt(t)*r-4*i[1].y*i[2].x*Math.atanh(Math.sqrt((n-1)/(n+1)))-i[1].x*i[2].y*Math.log(2*n*(n-Math.sqrt(t))-1))}}function Ya(t,e){const n=fh(e);if(1===n){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);zi(t,e);const s=e[2].clone(),n=e[1].clone(),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,r=s.y*n.x-s.x*n.y;return i.x=-(4*s.x+5*n.x)*r/60,i.y=-(4*s.y+5*n.y)*r/60,i}if(0===n)return new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>0);const i=t[1].sub(t[0]),r=t[2].sub(t[0]);if(n<1){const t=Math.sqrt(1-n),e=Math.sqrt(1+n),s=(i.y*r.x-i.x*r.y)*n/Math.pow(t*e,5)/12,o=Math.atan2(t,e),a=n*t*e,h=n*n,u=i.mul(2*(2+h)),m=r.mul(2*h-5),l=u.add(m).mul(a),c=r.sub(i.mul(2*h)).mul(6*o);return l.add(c).mul(s)}{const t=Math.sqrt(n-1),e=Math.sqrt(n+1),s=(i.y*r.x-i.x*r.y)*n/Math.pow(t*e,5)/12,o=Math.atanh(t/e),a=n*t*e,h=n*n,u=i.mul(4).sub(r.mul(5)),m=i.add(r).mul(2*h),l=u.add(m).mul(a),c=r.sub(i.mul(2*h)).mul(6*o);return l.add(c).mul(s)}}function Na(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),s=[0,0,0];return t.queryControlPoints(e),t.queryWeights(s),Ya(e,s)}function Xa(t){return qa(t.calculateUpperLength2D())}function qa(t){return 256*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.O)()*t}function Fa(t){if(0===t.m_weights[1])return!0;const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),t.getEndXY()),s=t.calculateUpperLength2D();return s-e<=8*Number.EPSILON*s}function Va(t){return t.m_cachedValues}function La(t,e){t.m_cachedValues=e}function Ra(t,e,s,n,i){const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(r);const o=[0,0,0];t.queryWeights(o);const a=[0];return 1===za(r,o,e,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),n,i,1,a)?a[0]:Number.NaN}function za(t,e,n,i,r,o,a,h){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.x)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit().contains(i)&&a>0,""),(o<0||Number.isNaN(o))&&(o=Number.MAX_VALUE);const u=new Array(3);for(let s=0;s<3;++s)u[s]=t[s].sub(n);const m=fh(e),l=Xe.constructPoint2D(u[0]),c=Xe.constructPoint2D(u[1]),g=Xe.constructPoint2D(u[2]),d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(m),p=d.clone();p.ldexpThis(1);const f=l.dotProduct(c.sub(l)).mul(d),P=d.mul(d.addDouble(2)),y=g.sub(c.mul(P.ldexp(1))),x=c.sqrLength().mul(d.mul(d).ldexp(1)).add(l.sqrLength().mul(d.ldexp(2).subDouble(1))).add(l.dotProduct(y)),C=g.sub(c.mul(p)).add(l.mul(p.subDouble(1))),v=c.mul(d).sub(l).dotProduct(C).mulDouble(3),b=c.dotProduct(g).mul(d.subDouble(3).mul(d)).ldexp(1),S=c.sqrLength().mul(d.mul(d).ldexp(2)),E=l.sqrLength().mul(d.ldexp(2).subDouble(3)),D=l.dotProduct(g.sub(c.mul(d.mulDouble(3).subDouble(1)).mul(d))).ldexp(1),w=g.sqrLength().addThis(b).addThis(S).addThis(E).addThis(D),A=l.add(g).sub(c.mul(p)),T=d.subDouble(1),I=g.sub(l).dotProduct(A).mul(T),M=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),Y=[];let N=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(u,e,i.vmin,N);let X=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(N,M);if(X<=o&&Y.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(i.vmin,X)),i.vmin!==i.vmax&&(_h(u,e,i.vmax,N),X=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(N,M),X<=o&&Y.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(i.vmax,X))),i.width()>0){const t=u[2].isZero(),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,4),n=Rn(I,w,v,x,f,58,i,t,s);for(let r=0;r<n;r++){if(!i.containsExclusiveCoordinate(s[r].toDouble()))continue;let t=s[r].toDouble();t=Ph(e,t);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(u,e,t,n),X=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(n,M),X<=o&&Y.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t,X))}}if(r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(i.equals(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit()));{_h(u,e,-1,N,!0);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(u,e,0,t);const s=new pm({start:N,end:t}),n=s.getClosestCoordinate(M,!0);n<1&&(N=s.getCoord2D(n),X=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(N,M),X<=o&&Y.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(n-1,X)))}{_h(u,e,2,N,!0);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(u,e,i.vmax,t);const s=new pm({start:t,end:N}),n=s.getClosestCoordinate(M,!0);n>0&&(N=s.getCoord2D(n),X=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(N,M),X<=o&&Y.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(1+n,X)))}}if(!Y.length)return 0;Y.sort(((t,e)=>t.compare(e)));let q=0;const F=Y[0].x;if(h[q++]=F,q<a){const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.H)(u,4,!1).total(),e=Y[0].y;for(let s=1,n=Y.length;s<n;s++)if(Y[s].y>e+t){Y.length=s;break}Y.sort(((t,e)=>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a8)(t.x,e.x))),q=0,h[q++]=Y[0].x;for(let s=1,n=Y.length;s<n;s++)Y[s].x!==h[q-1]&&q<a&&(h[q++]=Y[s].x)}return q}function Ba(t,e,s,n,i){return{tmin:t,tmax:e,t:s,d:n,pt:i.clone()}}function ka(t,e,n,i,r){const o=new De;if(Ga(t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),o),o.inflate(i),!o.isIntersectingPoint2D(e))return 0;const a=ga(t);let h=0;const u=[];let m=a.specialPoints[0];for(let l=1,c=a.specialPoints.length;l<c;++l){const n=a.specialPoints[l],i=ua(t,e,m,n);if(0===u.length)u.push(i);else if(i.t===i.tmin)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(u.at(-1).d<=i.d),u.at(-1).tmax=i.tmax;else if(u.at(-1).t===u.at(-1).tmax){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(u.at(-1).d>=i.d);const t=u.at(-1).tmin;u[u.length-1]=i,u.at(-1).tmin=t}else u.push(i);m=n}for(const s of u)if(s.d<=i){const t=s.t;n?(n[h]=t,h++):h++}return h}function Ga(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n);const i=[0,0,0];t.queryWeights(i),Wa(n,i,e,s)}function Wa(t,e,s,n){if(s.equalsRange(0,1))return void n.setFromPoints(t,3);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),r=[0,0,0];Qa(t,e,s.vmin,s.vmax,i,r),n.setFromPoints(i,3)}function ja(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0].y,t[1].y),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1].y,t[2].y);if(e>=0&&s>=0||e<=0&&s<=0){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0].x,t[1].x),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1].x,t[2].x);if(e>=0&&s>=0||e<=0&&s<=0)return!0}return!1}function Za(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(e);const s=Ha(e);return s&&(t.m_cp.setCoordsPoint2D(e[1]),t.afterCompletedModification()),s}function Ha(t){let e=!1;for(let s=0;s<2;s++){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[2][s]);n>0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])<0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])<0&&(t[1][s]=t[2][s],e=!0)):n<0?((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[0][s],t[1][s])>0&&(t[1][s]=t[0][s],e=!0),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.F)(t[1][s],t[2][s])>0&&(t[1][s]=t[2][s],e=!0)):t[1][s]!==t[0][s]&&(t[1][s]=t[0][s],e=!0)}return e}function Ua(t,s,n){void 0===n&&(n=s,s=0);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(s<0||n>1)return i.setNAN(),i;if(s>n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("calculate_sub_weighted_centroid"),s===n||t.isDegenerate(0))return i.setCoords(0,0),i;const r=ga(t),o=Xa(t),a=o/t.calculateUpperLength2D();let h=s,u=0;for(let e=1,m=r.specialPointsCount();e<m;e++)if(s<r.specialPoints[e]){u=e-1;break}i.setCoords(0,0);for(let e=u+1,m=r.specialPointsCount();e<m;e++){const s=Math.min(r.specialPoints[e],n),u=ma(t,h,s,a,o);if(i.addThis(u),h=s,n<=r.specialPoints[e])break}return i.add(t.getStartXY().mul(t.calculateLength2D()))}function Oa(t,e,n,i,r,o,a){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>=0&&n<=1&&i!==o&&r!==a),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e[0]>0&&e[2]>0&&e[1]>=0);const h=[1,fh(e),1],u=yh(e,n),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.L)(t,3),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,3);uh(m,h,l);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,3),g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,3);xh(l,u,i?c:null,o?g:null),Ch(e,n,r,a);const d=ja(m);if(i){for(let t=0;t<3;++t)dh(c[t],i[t]);bh(m,i),d&&Ha(i)}if(o){for(let t=0;t<3;++t)dh(g[t],o[t]);bh(m,o),d&&Ha(o)}}function Qa(t,e,n,i,r,o){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(n>=0&&i<=1&&n<=i),n===i){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,i=mh(t,e,n,s);return vh(t,s),r[0].assign(s),r[1].assign(s),r[2].assign(s),o[0]=i,o[1]=i,void(o[2]=i)}if(0===n&&1===i)return r[0].assign(t[0]),r[1].assign(t[1]),r[2].assign(t[2]),o[0]=e[0],o[1]=e[1],void(o[2]=e[2]);const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,3);{const s=[1,fh(e),1],r=yh(e,n),o=yh(e,i);uh(t,s,a),xh(a,o,a,null);xh(a,r>=o?1:r/o,null,a)}const h=[0,0,0];Ch(e,i,h,null),Ch(h,n/i,null,h);const u=ja(t),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);dh(a[1],m[1]),_h(t,e,n,m[0]),_h(t,e,i,m[2]),bh(t,m);for(let s=0;s<3;++s)r[s].assign(m[s]),o[s]=h[s];u&&Ha(r)}function Ja(t,e,s){const n=fh(e),i=[1,n,1],r=4*n/(3*(1+n));s[0].assign(t[0]),s[3].assign(t[2]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[0],t[1],r,s[1]),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t[2],t[1],r,s[2]),new ia({cp:s}),new En({points:t,weight:n});let o=0,a=.1,h=0;for(let u=0;u<9;u++,a+=.1){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(t,i,a,e);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(s,a,n);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,n);r>o&&(o=r,h=a)}{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(t,i,h,e);const n=[0];Lo(s,e,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,n);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return Po(s,n[0],r),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,r),Math.sqrt(o)}}function Ka(t,e,s,n){if(e.isEqual(t.m_XStart,t.m_YStart)&&s.isEqual(t.m_XEnd,t.m_YEnd))return;const i=!!n&&t.isMonotoneQuickAndDirty(),r=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T,o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);o[0].setCoords(t.m_XStart,t.m_YStart),o[2].setCoords(t.m_XEnd,t.m_YEnd);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;a.setSub(o[2],o[0]),a.leftPerpendicularThis(),o[1].setAdd(o[0],a);const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);h[0].setCoordsPoint2D(e),h[2].setCoordsPoint2D(s),a.setSub(h[2],h[0]),a.leftPerpendicularThis(),h[1].setAdd(h[0],a),r.setFromTwoTriangles(o,h)?r.transformInPlace(t.m_cp):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(e,s,.5,t.m_cp),t.changeEndPoints2D(e,s),i&&Za(t)}function $a(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==nh(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function th(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==ih(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function eh(t,e,s,n,i){if(i){const n=am(e,s);if(0!==n){if(t){if(1===n){if(e.m_weights[0]===s.m_weights[0]&&e.m_weights[1]===s.m_weights[1]&&e.m_weights[2]===s.m_weights[2])return 2}else if(e.m_weights[0]===s.m_weights[2]&&e.m_weights[1]===s.m_weights[1]&&e.m_weights[2]===s.m_weights[0])return 2;return 4}return 2}}else if(Le(e,s))return 1;return 0!==rh(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function sh(t,e,s,n,i){if(i){if(0!==am(e,s))return t?4:2}else if(Le(e,s))return 1;return 0!==oh(t,e,s,null,null,null,n,i??!1,!0,!1)?4:0}function nh(t,e,n,i,r,o,a,h,u,m){if(null!==r&&(r.length=0),null!==o&&(o.length=0),null!==i&&(i.length=0),n.isDegenerate(0)){const t=[0,0],s=e.intersectPoint(n.getStartXY(),t,a);if(s>0){if(null!==r)for(let e=0;e<s;e++)r.push(t[e]);if(null!=o)for(let t=0;t<s;t++)o.push(0);if(null!=i)for(let n=0;n<s;n++){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(t[n],s),i.push(s)}}return s}const l=rs(e,n);if(a=Math.max(a,l),e.isDegenerateToLineHelper(l)){const t=new pm({start:e.getStartXY(),end:e.getEndXY()}),s=Ds(t,n,i,r,o,a,h,m);if(r)for(let n=0;n<s;++n){const s=t.getCoord2D(r[n]);r[n]=e.getClosestCoordinate(s,!1)}return s}if(os(e,n,a))return 0;const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(c);const g=[0,0,0];e.queryWeights(g);const d=[1,fh(g),1],_=n.getEndXY().sub(n.getStartXY()),p=_.clone();p.leftPerpendicularThis();const f=c[0].clone(),P=c[1].clone(),y=c[2].clone(),x=P.sub(f),C=y.sub(f),v=y.sub(P),b=d[0],S=d[1],E=d[2],D=b*S,w=b*E,A=S*E,T=x.dotProduct(p)*D,I=C.dotProduct(p)*w;let M=T,Y=I-2*T,N=v.dotProduct(p)*A+I-I;const X=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(13,Number.NaN),q=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(13,Number.NaN);let F=sn(N,Y,M,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,X);F<0&&(X[0]=0,X[1]=1,F=2);let V=0;for(let s=0,k=V;s<F;++s){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(c,d,X[s+k],t),q[V]=n.getClosestCoordinate(t,!1);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n.getCoord2D(q[V]))<=a&&(X[V]=X[s+k],V++)}const L=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),R=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);if(e.queryControlPoints(R),R[0].subThis(n.getStartXY()),R[1].subThis(n.getStartXY()),R[2].subThis(n.getStartXY()),ah(R,d,L,!1),Math.abs(_.x)>=Math.abs(_.y)){const t=_.y/_.x;N=L[2].y-L[2].x*t,Y=L[1].y-L[1].x*t,M=L[0].y-L[0].x*t}else{const t=_.x/_.y;N=L[2].x-L[2].y*t,Y=L[1].x-L[1].y*t,M=L[0].x-L[0].y*t}const z=e.getEndXY().equals(n.getStartXY())||e.getEndXY().equals(n.getEndXY()),B=[0,0];F=sn(N,Y,M,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),z,B);for(let s=0,k=V;s<F;++s){X[s+k]=B[s];const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(c,d,X[s+k],t),q[V]=n.getClosestCoordinate(t,!1);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n.getCoord2D(q[V]))<=a&&(X[V]=X[s+k],V++)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(V<X.length+4);for(let s=0;s<V;s++)X[s]=Ph(g,X[s]);F=e.intersectPoint(n.getStartXY(),B,a);for(let s=0;s<F;s++)X[V]=B[s],q[V++]=0;F=e.intersectPoint(n.getEndXY(),B,a);for(let s=0;s<F;s++)X[V]=B[s],q[V++]=1;F=n.intersectPoint(e.getStartXY(),B,a);for(let s=0;s<F;s++)q[V]=B[s],X[V++]=0;F=n.intersectPoint(e.getEndXY(),B,a);for(let s=0;s<F;s++)q[V]=B[s],X[V++]=1;return 0===V?0:cm(t,e,n,X,q,V,i,r,o,a,h,u,m)}function ih(t,e,s,n,i,r,o,a,h,u){if(Su(s)){return nh(t,e,new pm({start:s.getStartXY(),end:s.getEndXY()}),n,i,r,o,a,h,u)}const m=rs(e,s);if(os(e,s,o=Math.max(o,m)))return 0;const l=[],c=[],g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);{e.queryControlPoints(g);const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;s.canonicToWorldTransformation(n);const i=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;i.setInvert(n),i.transformPoints2D(g,4,t);const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),m=[0,0,0];e.queryWeights(m),hh(t,m,r,h,u);const d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);d[0].setDouble(s.getSemiMinorAxis()),d[0].sqrThis(),d[1].setDouble(s.getSemiMajorAxis()),d[1].sqrThis(),d[2].setThis(d[0]),d[2].mulThis(d[1]),d[2].negateThis();const _=qn(r,2,h,2,u,2,d,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),l,a);if(_>0){let t=0;for(let n=0;n<_;n++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(l[n],i);const r=s.getClosestCoordinate(i,!1),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(r,a);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,a)<=o&&(l[t]=l[n],c.push(r),t++)}l.length=t}}const d=[0,1];for(let _=0;_<2;_++){const t=0===_?s.getStartXY():s.getEndXY(),n=Ra(e,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(n,i);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,i)<=o&&(l.push(n),c.push(d[_]))}for(let _=0;_<2;_++){const t=[0,3];{const e=s.getClosestCoordinate(g[t[_]],!1),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(e,n);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(g[t[_]],n)<=o&&(l.push(d[_]),c.push(e))}}return cm(t,e,s,l,c,l.length,n,i,r,o,a,h,u)}function rh(t,e,n,i,r,o,a,h,u,m){const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(l);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);if(n.queryControlPoints(c),as(l,c,3)<0)return rh(t,n,e,i,o,r,a,h,u,!m);const g=rs(e,n);if(e.isDegenerateToLineHelper(g)){const s=new pm({start:e.getStartXY(),end:e.getEndXY()}),l=nh(t,n,s,i,o,r,a,h,u,!m);if(r)for(let t=0;t<l;++t){const n=s.getCoord2D(r[t]);r[t]=e.getClosestCoordinate(n,!1)}return l}if(n.isDegenerateToLineHelper(g)){const s=new pm({start:n.getStartXY(),end:n.getEndXY()}),l=nh(t,e,s,i,r,o,a,h,u,m);if(o)for(let t=0;t<l;++t){const e=s.getCoord2D(o[t]);o[t]=n.getClosestCoordinate(e,!1)}return l}if(os(e,n,a=Math.max(a,g)))return 0;const d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(3,Number.NaN);e.queryWeights(d);const _=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(3,Number.NaN);n.queryWeights(_);const p=[1,fh(d),1],f=[1,fh(_),1],P=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);{const t=De.constructEmpty();Wa(l,p,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),t);const e=De.constructEmpty();Wa(c,f,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),e);const s=Math.max(t.maxDim(),e.maxDim());if(t.inflate(3*a),e.inflate(3*a),!t.intersectW(e))return 0;if(t.maxDim()<.1*s){if(ph(l,p,t,P),ph(c,f,t,y),P.isEmpty()||y.isEmpty())return 0;Qa(l,p,P.vmin,P.vmax,l,p),Qa(c,f,y.vmin,y.vmax,c,f)}}const x=dm(l,2,c,2,a);if(0===x)return 0;const C=[],v=[];if(-1===x){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);hh(l,p,t,e,s);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3);hh(c,f,n,i,r);const o=[],g=[],d=Yn(t,2,e,2,s,2,n,2,i,2,r,2,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),o,g,h,u,m);if(d>0)for(let h=0;h<d;h++){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(c,f,g[h],t);const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;_h(l,p,o[h],e);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,t)<=a&&(C.push(o[h]),v.push(g[h]))}}for(let b=0;b<2;b++){let t,e,n;0===b?(t=l,e=c,n=f):(t=c,e=l,n=p);for(let i=0;i<2;i++){const r=0===i?0:t.length-1,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,h=[0],u=za(e,n,t[r],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1,1,h);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===u),_h(e,n,h[0],o),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[r],o)<=a&&(0===b?(C.push(0===r?0:1),v.push(h[0])):(v.push(0===r?0:1),C.push(h[0])))}}if(0===C.length)return 0;if(!P.equalsRange(0,1))for(let s=0;s<C.length;++s)C[s]=En.recalculateParentT(P.vmin,P.vmax,C[s]);if(!y.equalsRange(0,1))for(let s=0;s<v.length;++s)v[s]=En.recalculateParentT(y.vmin,y.vmax,v[s]);for(let s=0;s<C.length;++s)C[s]=Ph(d,C[s]);for(let s=0;s<v.length;++s)v[s]=Ph(_,v[s]);return cm(t,e,n,C,v,C.length,i,r,o,a,h,u,m)}function oh(t,e,s,n,i,r,o,a,h,u){if(e.isLine()){return Vi(t,s,new pm({start:e.getStartXY(),end:e.getEndXY()}),n,r,i,o,a,h,!u)}if(s.isLine()){return nh(t,e,new pm({start:s.getStartXY(),end:s.getEndXY()}),n,i,r,o,a,h,u)}const m=rs(e,s);if(os(e,s,o=Math.max(o,m)))return 0;const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(l);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);s.queryControlPoints(c);const g=dm(l,2,c,2,o);if(0===g)return 0;const d=[],_=[];if(-1===g){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M,3),r=[0,0,0];e.queryWeights(r),hh(l,r,t,n,i);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xe,3);Wi(c,m);const g=Yn(t,2,n,2,i,2,[m[0].x,m[1].x,m[2].x],2,[m[0].y,m[1].y,m[2].y],2,null,0,!0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),d,_,a,h,u);if(g>0){let t=0;for(let n=0;n<g;n++){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(_[n],i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.queryCoord2D(d[n],r),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(r,i)<=o&&(d[t]=d[n],_[t]=_[n],t++)}d.length=t,_.length=t}}for(let p=0;p<2;p++){let t;t=0===p?l:c;for(let n=0;n<2;n++){const i=0===n?0:t.length-1;let r;const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;0===p?(r=Ci(s,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1),s.queryCoord2D(r,a)):(r=Ra(e,t[i],_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,-1),e.queryCoord2D(r,a)),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[i],a)<=o&&(0===p?(d.push(0===i?0:1),_.push(r)):(_.push(0===i?0:1),d.push(r)))}}return cm(t,e,s,d,_,d.length,n,i,r,o,a,h,u)}function ah(t,e,s,n=!1){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);n?(i[0].setCoordsPoint2D(t[0]),i[1].setCoordsPoint2D(t[1]),i[1].subThis(i[0]),i[2].setCoordsPoint2D(t[2]),i[2].subThis(i[0]),i[0].setCoords(0,0)):(i[0].setCoordsPoint2D(t[0]),i[1].setCoordsPoint2D(t[1]),i[2].setCoordsPoint2D(t[2])),i[0].mulThis(e[0]),i[1].mulThis(e[1]),i[2].mulThis(e[2]),s[1].setCoords(i[1].x-i[0].x,i[1].y-i[0].y),s[2].setCoordsPoint2D(i[2].sub(i[1])),s[2].subThis(s[1]),s[1].x*=2,s[1].y*=2,s[0].setCoordsPoint2D(i[0])}function hh(t,e,s,n,i){const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(e[0]),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(e[1]),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(e[2]);s[0].setDouble(t[0].x),s[0].mulThis(r),s[1].setDouble(t[1].x),s[1].mulThis(o),s[2].setDouble(t[2].x),s[2].mulThis(a),s[2].subThis(s[1]),s[1].subThis(s[0]),s[2].subThis(s[1]),s[1].ldexpThis(1),n[0].setDouble(t[0].y),n[0].mulThis(r),n[1].setDouble(t[1].y),n[1].mulThis(o),n[2].setDouble(t[2].y),n[2].mulThis(a),n[2].subThis(n[1]),n[1].subThis(n[0]),n[2].subThis(n[1]),n[1].ldexpThis(1),i[0].setDouble(e[0]),i[1].setDouble(e[1]),i[2].setThis(i[1]),i[2].ldexpThis(1),i[2].negateThis(),i[2].addThis(i[0]),i[2].addDoubleThis(e[2]),i[1].subThis(i[0]),i[1].ldexpThis(1)}function uh(t,e,s){for(let n=0;n<3;++n)s[n].setCoordsPoint2DZ(t[n].mul(e[n]),e[n])}function mh(t,e,s,n){if(0===s)return n.assign(t[0]),e[0];if(1===s)return n.assign(t[2]),e[2];const i=[t[0].x*e[0],t[1].x*e[1],t[2].x*e[2]],r=[t[0].y*e[0],t[1].y*e[1],t[2].y*e[2]],o=[e[0],e[1],e[2]],a=s;let h,u,m;if(s<=.5){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(i[0],i[1],a),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(i[1],i[2],a);h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,e,a);const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(r[0],r[1],a),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(r[1],r[2],a);u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,n,a);const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(o[0],o[1],a),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(o[1],o[2],a);m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.X)(l,c,a)}else{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(i[0],i[1],a),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(i[1],i[2],a);h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(t,e,a);const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(r[0],r[1],a),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(r[1],r[2],a);u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(s,n,a);const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(o[0],o[1],a),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(o[1],o[2],a);m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Y)(l,c,a)}return h/=m,u/=m,n.setCoords(h,u),vh(t,n),m}function lh(t,e,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);t.queryControlPoints(n);const i=[0,0,0];t.queryWeights(i);ch([Ye.constructPoint2D(n[0]),Ye.constructPoint2D(n[1]),Ye.constructPoint2D(n[2])],[new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(i[0]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(i[1]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(i[2])],e,s)}function ch(t,e,s,n){if(0===s.value())return void n.setE(t[0]);if(1===s.value())return void n.setE(t[2]);const i=[t[0].x.mulE(e[0]),t[1].x.mulE(e[1]),t[2].x.mulE(e[2])],r=[t[0].y.mulE(e[0]),t[1].y.mulE(e[1]),t[2].y.mulE(e[2])],o=[e[0].clone(),e[1].clone(),e[2].clone()],a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;if(s.value()<=.5){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(i[0],i[1],s),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(i[1],i[2],s);a.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(t,e,s));const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(r[0],r[1],s),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(r[1],r[2],s);h.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(n,m,s));const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(o[0],o[1],s),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(o[1],o[2],s);u.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ad)(l,c,s))}else{const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(i[0],i[1],s),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(i[1],i[2],s);a.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(t,e,s));const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(r[0],r[1],s),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(r[1],r[2],s);h.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(n,m,s));const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(o[0],o[1],s),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(o[1],o[2],s);u.setE((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ae)(l,c,s))}a.divThisE(u),h.divThisE(u);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(a.value(),h.value());vh([t[0].value(),t[1].value(),t[2].value()],m),n.x.set(m.x,a.eps()),n.y.set(m.y,h.eps())}function gh(t,e,s,n){const i=s.lte(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a7)?_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.lerpLo:_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.lerpHi,[r,o,a]=[e.map(((e,s)=>t[s].x.mul(e))),e.map(((e,s)=>t[s].y.mul(e))),e].map((([t,e,n])=>i(i(t,e,s),i(e,n,s),s))),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(r.divThis(a).value(),o.divThis(a).value());vh(t.map((t=>t.asPoint2D())),h),n.x=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(h.x),n.y=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(h.y)}function dh(t,e){return e.setCoords(t.x/t.z,t.y/t.z),t.z}function _h(t,e,s,n,i){if(i){if(s<0){return void _s(new pm({start:t[0],end:t[0].add(wa(t,e,0).getUnitVector())}),s,n)}if(s>1){return void _s(new pm({start:t[2],end:t[2].add(wa(t,e,1).getUnitVector())}),s-1,n)}}mh(t,e,s,n)}function ph(t,e,s,n){n.setEmpty();const i=[];i.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1));const r=.5*Math.max(s.width(),s.height());for(;i.length;){const o=i.at(-1);i.pop();const a=new De;if(Wa(t,e,o,a),a.isIntersectingW(s)){const t=Math.max(a.width(),a.height());if(s.containsW(a)||t<=r||o.width()<1e-12)n.merge(o);else{const t=o.getCenter();i.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(o.vmin,t)),i.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(t,o.vmax))}}}}function fh(t){return t[1]/Math.sqrt(t[0]*t[2])}function Ph(t,e){const s=Math.sqrt(t[2]/t[0]);return e/(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,1,e)}function yh(t,e){const s=Math.sqrt(t[0]/t[2]);return e/(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(s,1,e)}function xh(t,e,n,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=0&&e<=1);(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d).setCoordsPoint3D(t[0]);(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d).setCoordsPoint3D(t[1]);(new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d).setCoordsPoint3D(t[2]);const r=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d,a=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.d;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__._)(3,t[0],t[1],e,r),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__._)(3,t[1],t[2],e,o),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__._)(3,r,o,e,a);const h=t[2].clone();n&&(n[0].assign(t[0]),n[1].assign(r),n[2].assign(a)),i&&(i[0].assign(a),i[1].assign(o),i[2].assign(h))}function Ch(t,e,n,i){const r=[t[0],t[1],t[2]];(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=0&&e<=1&&n!==i);const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(r[0],r[1],e),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(r[1],r[2],e),h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(o,a,e);n&&(n[0]=r[0],n[1]=o,n[2]=h),i&&(i[0]=h,i[1]=a,i[2]=r[2])}function vh(t,e){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();s.vmin=s.vmax=t[0].x,s.mergeNeCoordinate(t[1].x),s.mergeNeCoordinate(t[2].x),e.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e.x,s.vmin,s.vmax),s.vmin=s.vmax=t[0].y,s.mergeNeCoordinate(t[1].y),s.mergeNeCoordinate(t[2].y),e.y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e.y,s.vmin,s.vmax)}function bh(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;s.vmin=s.vmax=t[0].x,s.mergeNeCoordinate(t[1].x),s.mergeNeCoordinate(t[2].x),e[0].x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[0].x,s.vmin,s.vmax),e[1].x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[1].x,s.vmin,s.vmax),e[2].x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[2].x,s.vmin,s.vmax),s.vmin=s.vmax=t[0].y,s.mergeNeCoordinate(t[1].y),s.mergeNeCoordinate(t[2].y),e[0].y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[0].y,s.vmin,s.vmax),e[1].y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[1].y,s.vmin,s.vmax),e[2].y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(e[2].y,s.vmin,s.vmax)}const Sh=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ag/180,Eh=180/_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ag;function Dh(t){let e=t;return e>=-360&&e<720?(e<0?e+=360:e>=360&&(e-=360),e):(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.l)(e,360),e<0&&(e+=360),e)}function wh(t){let e=t;return e=Dh(e),e>180&&(e-=360),e}function Ah(t){return t*Sh}function Th(t){return t*Eh}function Ih(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)();let s=t;return s>=-e&&s<2*e?(s<0&&(s+=e),s>=e&&(s-=e),s):(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.l)(s,e),s<0&&(s+=e),s)}function Mh(t){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();let s=t;return s>-e&&s<=e||(s=Ih(s),s>e&&(s-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)())),s}function Yh(t,e){return wh(e-t)}var Nh=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class Xh extends gs{constructor(t){if(void 0===t||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.W)(t,"vd"))return super({vd:t?.vd,XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_semiMajorAxis=0,this.m_minorMajorRatio=1,this.m_rotation=0,this.m_cosr=1,this.m_sinr=0,this.m_center=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),this.m_sweepAngle=0,this.m_startAngle=0,this.m_interior=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),void(this.m_bits=0);if(t.copy)return super(t),void(this!==t.copy&&(this.m_center=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),this.m_interior=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),t.copy.copyToImpl(this)));if(t.move)super(t),this.m_semiMajorAxis=t.move.m_semiMajorAxis,this.m_minorMajorRatio=t.move.m_minorMajorRatio,this.m_rotation=t.move.m_rotation,this.m_cosr=t.move.m_cosr,this.m_sinr=t.move.m_sinr,this.m_center=t.move.m_center.clone(),this.m_sweepAngle=t.move.m_sweepAngle,this.m_startAngle=t.move.m_startAngle,this.m_interior=t.move.m_interior.clone(),this.m_bits=t.move.m_bits,this.m_cachedValues=t.move.m_cachedValues,t.move.m_cachedValues=null;else{if(t.fromPoint)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),this.m_interior=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),void this.constructCircularArcThreePoint(t.fromPoint,t.toPoint,t.interiorPoint);if(t.center)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),this.m_center=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),this.m_interior=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),void this.constructCircleRadius(t.radius,t.center,t.bIsCounterClockwise);if(t.semiMajorAxis)return super({XStart:0,YStart:0,XEnd:0,YEnd:0}),void this.constructEllipticArcEndPoints(t.fromPoint,t.toPoint,t.semiMajorAxis,t.minorMajorRatio,t.axisXRotationRad,t.bBigArc,t.bIsCounterClockwise)}}getBoundary(){return Ks(this)}assignCopy(t){return this!==t&&t.copyTo(this),this}constructCircleRadius(t,e,s=!1){return this.constructEllipse(t,1,e,0,s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircleCenterAndPoint(t,e,s=!1){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e);return this.constructEllipticArcEndPointsCenter(e,e,n,1,0,!0,s,t),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructTwoPointCircle(t,e,s=!1){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(t,e,.5);return this.constructCircleCenterAndPoint(n,t,s),this}constructLineEllipticArc(t,e){return bu(this,t,e,1),this}constructLineCircularArc(t,e){return bu(this,t,e,0),this}constructEllipse(t,e,s,n,i=!1){this.m_semiMajorAxis=Math.abs(t),this.m_minorMajorRatio=Math.abs(e),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,this.m_minorMajorRatio*this.m_semiMajorAxis),o=Math.cos(n),a=Math.sin(n);return r.rotateDirect(o,a),r.addThis(s),this.constructEllipticArcEndPointsCenter(r,r,this.m_semiMajorAxis,this.m_minorMajorRatio,n,!0,i,s),this}inflate(t){if(this.isDegenerateToLine())return;let e=this.getSemiMinorAxis()+t;if(e=e<=0?0:(this.getSemiMajorAxis()+t)/this.getSemiMajorAxis(),this.isCircular()){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;t.setShiftCoords(-this.m_center.x,-this.m_center.y),t.scale(e,e),t.shiftCoords(this.m_center.x,this.m_center.y),this.applyTransformation(t)}else{const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;this.canonicToWorldTransformation(t);const s=t.clone();s.invertPreciseThis(),s.scale(e,e),s.multiply(t),this.applyTransformation(s)}}constructEnclosingCircle(t,e,s=!1){return ju(this,t,e,s),this}constructThreePointCircle(t,e,s,n=!1){if(t.equals(e)||e.equals(s)||t.equals(s)){const i=t.clone(),r=e.clone(),o=s.clone();return i.equals(r)&&r.assign(o),this.constructTwoPointCircle(i,r,n)}{const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateCircleCenterFromThreePoints(t,e,s);if(!i.isFinite()||!Number.isFinite(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,i))){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,e),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,s);this.constructLineCircularArc(t,n>=i?e:s)}return this.constructCircleCenterAndPoint(i,t,n)}}constructCircularArcThreePoint(t,e,s){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.x),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.x),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s.x),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.y),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e.y),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s.y),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(.5),m=i.subE(n),l=a.subE(o),c=r.subE(n),g=h.subE(o),d=m.mulE(g).subThisE(l.mulE(c));if(d.scaleError(10),d.isZero()){if(!m.isZero()||!l.isZero())return bu(this,t,e,0),this;{const n=t.clone().addThis(e).mulThis(.5).addThis(s).mulThis(.5),i=s.sub(n).length();this.constructEllipticArcEndPointsCenter(t,e,i,1,0,!0,!1,n),this.m_interior.assign(s)}return this.setProjectionBehavior(0),this}const _=m.sqr().addThisE(l.sqr()).mulThisE(u),p=c.sqr().addThisE(g.sqr()).mulThisE(u),f=_.mulE(g).subThisE(p.mulE(l)),P=m.mulE(p).subThisE(c.mulE(_));f.divThisE(d),P.divThisE(d);const y=f.sqr().addThisE(P.sqr());y.sqrtThis();const x=f.addE(n),C=P.addE(o);let v=t.x-x.value(),b=t.y-C.value();const S=Math.atan2(b,v);v=e.x-x.value(),b=e.y-C.value();const E=Math.atan2(b,v);v=s.x-x.value(),b=s.y-C.value();const D=Math.atan2(b,v);let w=D-2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;w<S;)w+=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();let A=E-2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;A<w;)A+=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();let T=D+2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;T>S;)T-=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();let I,M=E+2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;M>T;)M-=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();I=A-S<S-M?A-S:M-S;const Y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(x.value(),C.value());return this.constructEllipticArcEndPointsCenter(t,e,y.value(),1,0,Math.abs(I)>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),I>0,Y),this.m_interior.assign(s),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructCircularArc(t,e,s,n){return this.constructEllipticArcGeneral(t,1,e,s,n,0),this.setProjectionBehavior(0),this.afterCompletedModification(),this}constructEllipticArcEndPoints(t,e,s,n,i,r,o){return vu(this,t,e,s,n,i,r,o)}constructEllipticArcEndPointsCenter(t,e,s,n,i,r,o,a){return vu(this,t,e,s,n,i,r,o,a)}constructEllipticArcGeneral(t,e,s,n,i,r){this.m_semiMajorAxis=Math.abs(t),this.m_minorMajorRatio=Math.abs(e),this.m_minorMajorRatio>1&&(this.m_semiMajorAxis*=this.m_minorMajorRatio,this.m_minorMajorRatio=1/this.m_minorMajorRatio);const o=Mh(r),a=Math.cos(o),h=Math.sin(o),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(this.m_semiMajorAxis,this.m_minorMajorRatio*this.m_semiMajorAxis),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),l=Mh(n);m.x=u.x*Math.cos(l),m.y=u.y*Math.sin(l),m.rotateDirect(a,h),m.addThis(s);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a0)(i,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)());let g=c;Math.abs(g)===(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()&&(g=0);const d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();return d.x=u.x*Math.cos(l+g),d.y=u.y*Math.sin(l+g),d.rotateDirect(a,h),d.addThis(s),this.constructEllipticArcEndPointsCenter(m,d,this.m_semiMajorAxis,this.m_minorMajorRatio,o,Math.abs(c)>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),c>0,s)}constructEllipticArcAsNURB(t,s,n,i){(i>=1||i<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("construct_elliptic_arc_as_NURB: weight"),s.isFinite()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("construct_elliptic_arc_as_NURB: control_point");return ku([t,s,n],i*i,null,!1,this),this}constructCanonic(t){return this.assignCopy(t),t.isDegenerateToLine()||t.m_center.isEqual(0,0)&&0===this.m_rotation||(this.m_XStart=t.getSemiMajorAxis()*Math.cos(t.m_startAngle),this.m_YStart=t.getSemiMinorAxis()*Math.sin(t.m_startAngle),this.m_XEnd=t.getSemiMajorAxis()*Math.cos(t.getEndAngle()),this.m_YEnd=t.getSemiMinorAxis()*Math.sin(t.getEndAngle()),this.m_center.setCoords(0,0),this.m_rotation=0,this.m_cosr=1,this.m_sinr=0,Hu(this),this.afterCompletedModification(),t!==this&&ss(this,t)),this}isCircular(){return 1===this.m_minorMajorRatio&&0===this.m_rotation&&!this.isDegenerateToLine()}isDegenerateToLineHelper(t){if(this.isLine())return!0;if(this.isMajor())return!1;const e=this.getEndXY().sub(this.getStartXY()).length();return!(this.calculateLength2D()-e>t)}isDegenerateToLine(){return Su(this)}getCenter(){return this.m_center.clone()}setCenter(t){if(!this.m_center.isNAN()){const e=t.sub(this.m_center);this.m_XStart+=e.x,this.m_YStart+=e.y,this.m_XEnd+=e.x,this.m_YEnd+=e.y,this.m_interior.addThis(e),this.m_center.assign(t),this.endPointModified(),this.normalizeAfterEndpointChange()}}getAxisXRotation(){return this.m_rotation}getSemiAxes(){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.construct(this.m_semiMajorAxis,this.m_semiMajorAxis*this.m_minorMajorRatio)}getSemiMajorAxis(){return this.m_semiMajorAxis}getSemiMinorAxis(){return this.m_semiMajorAxis*this.m_minorMajorRatio}getMinorMajorRatio(){return this.m_minorMajorRatio}isClockwise(){return!Xu(this)}isMajor(){return Fu(this)}getSweepAngle(){return this.m_sweepAngle}getStartAngle(){return this.m_startAngle}getEndAngle(){return this.m_startAngle+this.m_sweepAngle}getGeometryType(){return _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc}queryEnvelope(t){if(4===t.m_EnvelopeType){t.setEmpty(),t.assignVertexDescription(this.m_description);const e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();this.queryEnvelope(e),t.setEnvelope(e);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const e=this.m_description.getSemantics(s);for(let n=0,i=Nh.getComponentCount(e);s<i;s++){const s=this.queryInterval(e,n);t.setIntervalEnvelope(e,n,s)}}}else 2===t.m_EnvelopeType?Ku(this,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),t):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d not impl")}applyTransformation(t){Au(this,t,!1,null,null)}createInstance(){return new Xh}calculateLength2D(){return pu(this,0,1)}queryControlPointsHelper(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}queryCoord2D(t,e){if(Su(this))ps(t,this.getStartXY(),this.getEndXY(),e);else if(0===t)e.assign(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.construct(this.m_XStart,this.m_YStart));else if(1===t)e.assign(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.construct(this.m_XEnd,this.m_YEnd));else{const s=cu(this,t),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(this.m_semiMajorAxis*Math.cos(s),this.getSemiMinorAxis()*Math.sin(s));n.rotateDirect(this.m_cosr,this.m_sinr),n.addThis(this.m_center),e.assign(n)}}queryCoord2DE(t,e){nu(this,t,e)}queryCoord2DMP(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}getCoordX(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2D(t,e),e.x}getCoordY(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2D(t,e),e.y}cut(t,e,s){const n=new fm;return this.queryCut(t,e,n,s),n.releaseSegment()}queryCut(t,e,s,n){const i=s.createEllipticArc();n&&i.dropAllAttributes();let r=0===t&&1===e;if(r&&!n)return void this.copyTo(i);const o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();this.queryCoord2D(t,o);const a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(this.queryCoord2D(e,a),!r)if(o.equals(a))e-t>.5&&this.isMajor()&&this.isClosed()?(r=!0,t=0,e=1):1===e?t=e:e=t;else if(t>0&&o.isEqual(this.m_XStart,this.m_YStart)&&(t=0),e<1&&a.isEqual(this.m_XEnd,this.m_YEnd)&&(e=1),r=0===t&&1===e,r&&!n)return void this.copyTo(i);if(i.m_center.assign(this.m_center),i.m_semiMajorAxis=this.m_semiMajorAxis,i.m_minorMajorRatio=this.m_minorMajorRatio,i.m_interior.assign(this.m_interior),i.m_rotation=this.m_rotation,i.m_cosr=this.m_cosr,i.m_sinr=this.m_sinr,i.m_sweepAngle=this.m_sweepAngle,i.m_startAngle=this.m_startAngle,i.m_bits=this.m_bits,je(i,o.x,o.y),He(i,a.x,a.y),r)return void Iu(i,fu(this));i.m_startAngle=cu(this,t),i.m_sweepAngle=cu(this,e)-i.m_startAngle,i.m_startAngle=au(i.m_startAngle),qu(i,Math.abs(i.m_sweepAngle)>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()),n&&i.assignVertexDescription(this.m_description),Hu(i),mu(i);const h=this.m_description.getAttributeCount();if(h>1&&!n){for(let e=1;e<h;e++){const s=this.m_description.getSemantics(e),n=Nh.getComponentCount(s);for(let e=0;e<n;e++){const n=this.getAttributeAsDbl(t,s,e);i.setStartAttribute(s,e,n)}}for(let t=1;t<h;t++){const s=this.m_description.getSemantics(t),n=Nh.getComponentCount(s);for(let t=0;t<n;t++){const n=this.getAttributeAsDbl(e,s,t);i.setEndAttribute(s,t,n)}}}i.afterCompletedModification()}queryDerivative(t,e){sm(this,t,e)}cutArcIgnoreAttributes(t,e,s){let n=0===t&&1===e;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(t,i);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(e,r),n||(i.equals(r)?e-t>.5&&this.isMajor()&&this.isClosed()?(n=!0,t=0,e=1):1===e?t=e:e=t:(t>0&&i.isEqual(this.m_XStart,this.m_YStart)&&(t=0),e<1&&r.isEqual(this.m_XEnd,this.m_YEnd)&&(e=1),n=0===t&&1===e)),s.m_center.assign(this.m_center),s.m_semiMajorAxis=this.m_semiMajorAxis,s.m_minorMajorRatio=this.m_minorMajorRatio,s.m_interior.assign(this.m_interior),s.m_rotation=this.m_rotation,s.m_cosr=this.m_cosr,s.m_sinr=this.m_sinr,s.m_sweepAngle=this.m_sweepAngle,s.m_startAngle=this.m_startAngle,s.m_bits=this.m_bits,je(s,i.x,i.y),He(s,r.x,r.y),n?Iu(s,fu(this)):(s.m_startAngle=cu(this,t),s.m_sweepAngle=cu(this,e)-s.m_startAngle,s.m_startAngle=au(s.m_startAngle),qu(s,Math.abs(s.m_sweepAngle)>Math.PI),Hu(s),s.afterCompletedModification())}changeEndPoints2D(t,e){yu(this,t,e,!1)}getAttributeAsDbl(t,e,s){if(0===e)return 0===s?this.getCoordX(t):this.getCoordY(t);if(0===t)return this.getStartAttributeAsDbl(e,s);if(1===t)return this.getEndAttributeAsDbl(e,s);const n=this.calculateLength2D(),i=n>0?this.tToLength(t)/n:0,r=Nh.getInterpolation(e),o=this.getStartAttributeAsDbl(e,s),a=this.getEndAttributeAsDbl(e,s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.V)(r,o,a,i,Nh.getDefaultValue(e))}getClosestCoordinate(t,e){return $u(this,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),e)}getClosestCoordinateOnInterval(t,e,s=-1){return $u(this,t,e,!1)}getYMonotonicParts(t,n=!1){t.length<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const i=this.getSemiAxes(),r=Math.atan2(i.y*this.m_cosr,i.x*this.m_sinr),o=r+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(3,Number.NaN);let h=0;if(a[0]=lu(this,r),a[0]>0&&a[0]<1&&h++,a[1]=lu(this,o),a[1]>0&&a[1]<1&&(a[h]=a[1],h++),0===h)return 0;a[h]=1,h++,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=h);let u=0;for(let e=0;e<h;e++){const s=a[e];this.queryCut(u,s,t[e],n),u=s}return h}getMonotonicParts(t,n){if(t.length<4&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),this.isDegenerateToLine())return t[0].createEllipticArc().assignCopy(this),n&&t[0].get().dropAllAttributes(),1;const i=this.getSemiAxes(),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(4,Number.NaN);r[0]=Math.atan2(i.y*this.m_cosr,i.x*this.m_sinr),r[1]=r[0]+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),r[2]=Math.atan2(-i.y*this.m_sinr,i.x*this.m_cosr),r[3]=r[2]+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(5,Number.NaN);let a=0;for(let e=0;e<4;e++)o[a]=lu(this,r[e]),o[a]>0&&o[a]<1&&a++;if(0===a)return 0;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Z)(o,a),o[a-1]<1&&(o[a]=1,a++),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=a);let h=0;for(let e=0;e<a;e++){const s=o[e];this.queryCut(h,s,t[e],n),h=s}return a}intersectionWithAxis2D(t,e,s,n){if(Su(this)){return new pm({start:this.getStartXY(),end:this.getEndXY()}).intersectionWithAxis2D(t,e,s,n)}let i,r;const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(e),a=this.getSemiAxes();if(t){if(e>this.m_center.y+a.x||e<this.m_center.y-a.x)return 0;i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(a.x).mulThis(this.m_sinr),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(a.y).mulThis(this.m_cosr),o.subThis(this.m_center.y)}else{if(e>this.m_center.x+a.x||e<this.m_center.x-a.x)return 0;i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(a.x).mulThis(this.m_cosr),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(a.y).mulThis(-this.m_sinr),o.subThis(this.m_center.x)}const h=i.sqr(),u=r.sqr(),m=h.addE(u),l=r.mulE(o).mulThis(-2),c=o.sqr().subThisE(h),g=l.sqr().subThisE(m.mulE(c).mulThis(4)),d=i.mulE(o).mulThis(-2),_=o.sqr().subThisE(u),p=d.sqr().subThisE(m.mulE(_).mulThis(4));let f=g.eps()*Math.abs(p.value())<=p.eps()*Math.abs(g.value());f?i.isZero()&&(f=!1):r.isZero()&&(f=!0),f||(l.setE(d),c.setE(_));const P=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,2);let y=gn(m,l,c,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(-1,1),!1,P);if(0===y)return 0;const x=[0,0];let C=0;for(let v=0;v<y;v++){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;f?(t.setE(P[v]),e.setE(o.subE(r.mulE(P[v])).divThisE(i))):(e.setE(P[v]),t.setE(o.subE(i.mulE(P[v])).divThisE(r)));const s=lu(this,Math.atan2(t.value(),e.value()));s>=0&&s<=1&&(x[C]=s,C++)}return y=C,0===y?0:(2===y&&x[0]>x[1]&&(x[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(x[0],x[0]=x[1])),n&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(n,x,0,0,y),s&&(s[0]=t?this.getCoordX(x[0]):this.getCoordY(x[0]),y>1&&(s[1]=t?this.getCoordX(x[1]):this.getCoordY(x[1]),!n&&s[0]>s[1]&&(s[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[1])))),y)}intersectionOfYMonotonicWithAxisX(t,e){if(this.m_YStart===this.m_YEnd)return t===this.m_YStart?e:Number.NaN;if(t===this.m_YStart)return this.m_XStart;if(t===this.m_YEnd)return this.m_XEnd;const s=[0,0];return-1===this.intersectionWithAxis2D(!0,t,s,null)?e:s[0]}isCurve(){return!0}isDegenerate(t){return Re(this,t)}isDegenerate3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}queryLooseEnvelope(t){3!==t.m_EnvelopeType?this.queryLooseEnvelopeOnInterval(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1),t):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d not impl")}clone(t){const e=new Xh;return this.copyTo(e),e}queryInterval(t,e){if(0===t){if(Su(this))return 0===e?_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(this.getStartX(),this.getEndX()):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(this.getStartY(),this.getEndY());let t;const s=this.getSemiAxes();t=0===e?Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr):Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr);const n=t+Math.PI,i=[0,0];i[0]=lu(this,t),i[1]=lu(this,n);const r=0===e?_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(this.getStartX(),this.getEndX()):_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(this.getStartY(),this.getEndY()),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let a=0;a<2;a++){const t=i[a];t>0&&t<1&&(this.queryCoord2D(t,o),r.mergeNeCoordinate(0===e?o.x:o.y))}return r}return super.queryInterval(t,e)}queryLooseEnvelopeOnInterval(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1);if(s.intersect(t),s.isEmpty())return void e.setEmpty();if(Su(this))return e.setCoords(this.getCoord2D(s.vmin)),void e.mergeNe(this.getCoord2D(s.vmax));const n=this.getCoord2D(s.vmin),i=this.getCoord2D(s.vmax);if(1===this.m_minorMajorRatio&&Math.abs(this.m_sweepAngle)*s.width()<=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.o){let t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(n,i,.5);const s=t.sub(this.m_center);return s.normalize(),t=t.add(s.mul(.5*_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(n,i))),e.setCoords(n),e.mergeNe(i),void e.mergeNe(t)}Ku(this,s,e)}tToLength(t){return Su(this)?t*_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY()):1===this.m_minorMajorRatio?Math.abs(this.getSweepAngle()*t)*this.m_semiMajorAxis:Eu(this,t)}parametricAngleToT(t){return lu(this,t)}tToParametricAngle(t){return cu(this,t)}lengthToT(t){if(Su(this)){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY());return 0===e?0:t/e}if(1===this.m_minorMajorRatio){const e=Math.abs(this.getSweepAngle())*this.m_semiMajorAxis;return 0===e?0:t/e}return Du(this,t)}calculateWeightedAreaCentroid2D(t){if(Su(this)){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return t.setCoords(0,0),t}const e=Zu(this),s=this.getStartXY().sub(this.m_center),n=this.getEndXY().sub(this.m_center),i=this.m_semiMajorAxis,r=this.getSemiMinorAxis(),o=this.m_startAngle+this.m_sweepAngle,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;a.x=i*r*(i*this.m_cosr*(-Math.sin(o)+Math.sin(this.m_startAngle))+r*(-Math.cos(o)+Math.cos(this.m_startAngle))*this.m_sinr)/3,a.y=i*r*(r*(Math.cos(o)-Math.cos(this.m_startAngle))*this.m_cosr+i*(-Math.sin(o)+Math.sin(this.m_startAngle))*this.m_sinr)/3;const h=n.add(s).mul(n.crossProduct(s)/6);return a.x-=h.x,a.y-=h.y,a.add(this.m_center.sub(t).mul(e))}calculateWeightedCentroid2D(){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(this.isDegenerate(0))return t.setCoords(0,0),t;if(Su(this))return t.assign(this.getCoord2D(.5).mul(this.calculateLength2D())),t;let e=this.m_startAngle,s=this.m_startAngle+this.m_sweepAngle;if(s<e){const t=e;e=s,s=t}const n=Math.sin(e),i=Math.sin(s),r=Math.cos(e),o=Math.cos(s);if(1===this.m_minorMajorRatio){const e=this.getSemiMajorAxis(),s=e*e,a=s*(i-n),h=s*(r-o);t.setCoords(a,h)}else{const e=this.getSemiMajorAxis(),s=this.getSemiMinorAxis(),a=e*e,h=s*s,u=e*s,m=a-h,l=m/h,c=m/a,g=Math.sqrt(l),d=Math.sqrt(c),_=.5*u*(Math.asinh(g*i)/g+i*Math.sqrt(1+l*i*i))-.5*u*(Math.asinh(g*n)/g+n*Math.sqrt(1+l*n*n)),p=-.5*u*(Math.asin(d*o)/d+o*Math.sqrt(1-c*o*o))- -.5*u*(Math.asin(d*r)/d+r*Math.sqrt(1-c*r*r));t.setCoords(_,p)}return t.rotateDirect(this.m_cosr,this.m_sinr),t.assign(t.add(this.m_center.mul(this.calculateLength2D()))),t}isIntersectingPoint(t,e,s){if(s&&(t.isEqualPoint2D(this.getStartXY())||t.isEqualPoint2D(this.getEndXY())))return!1;if(!Su(this)){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,this.m_center),n=this.getSemiAxes();if(s<n.x-e||s>n.y+e)return!1}const n=this.getClosestCoordinate(t,!1),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(n,i);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,t)<=e}isIntersectingPoint3D(t,e,n,i,r=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}getTangent(t){if(Su(this))return this.getEndXY().sub(this.getStartXY());{const e=cu(this,t),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return s.setCoords(-this.m_semiMajorAxis*Math.sin(e),this.getSemiMinorAxis()*Math.cos(e)),this.m_rotation&&s.rotateDirect(this.m_cosr,this.m_sinr),s.scale(this.getSweepAngle()),s}}getDerivative(t){if(Su(this))return this.getEndXY().sub(this.getStartXY());{const e=cu(this,t),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return s.setCoords(-this.m_semiMajorAxis*Math.sin(e),this.getSemiMinorAxis()*Math.cos(e)),this.m_rotation&&s.rotateDirect(this.m_cosr,this.m_sinr),s.scale(this.getSweepAngle()),s}}normalizeAfterEndpointChange(){return!!Lu(this)&&(Su(this)?(Ru(this),!1):zu(this,!1))}projectionBehavior(){return(4&this.m_bits)>>2}setProjectionBehavior(t){this.m_bits=-5&this.m_bits|t<<2}convertToCanonic(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.x,t.y);return e.subThis(this.m_center),e.rotateReverse(this.m_cosr,this.m_sinr),e}convertFromCanonic(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.x,t.y);return e.rotateDirect(this.m_cosr,this.m_sinr),e.addThis(this.m_center),e}canonicToWorldTransformation(t){t.setRotate(this.m_cosr,this.m_sinr),t.shiftCoords(this.m_center.x,this.m_center.y)}getCurvature(t){const e=cu(this,t),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,n=this.getSemiMinorAxis();s.setCoords(-this.m_semiMajorAxis*Math.sin(e),n*Math.cos(e));const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;i.setCoords(-this.m_semiMajorAxis*Math.cos(e),-n*Math.sin(e)),this.m_rotation&&(s.rotateDirect(this.m_cosr,this.m_sinr),i.rotateDirect(this.m_cosr,this.m_sinr));const r=s.sqrLength();if(0===r)return Number.NaN;const o=Math.sqrt(r);s.divThis(o);return s.crossProduct(i)/r}getMonotonicPartParams(t,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(6,Number.NaN);n[0]=0;let i=1;if(this.isDegenerateToLine())n[1]=1,i=2;else{const t=this.getSemiAxes(),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(4,Number.NaN);this.m_rotation?(e[0]=Math.atan2(t.y*this.m_cosr,t.x*this.m_sinr),e[1]=e[0]+Math.PI,e[2]=Math.atan2(-t.y*this.m_sinr,t.x*this.m_cosr),e[3]=e[2]+Math.PI):(e[0]=0,e[1]=Math.PI,e[2]=.5*Math.PI,e[3]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a1)());for(let s=0;s<4;s++){const t=lu(this,e[s]);t>0&&t<1&&(n[i]=t,i++)}i>2&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.Z)(n,i),n[i]=1,i++}if(s){t<i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");for(let t=0;t<i;t++)s[t]=n[t]}return i}calculateLowerLength2D(){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return t;const e=Math.abs(this.m_sweepAngle)*this.getSemiMinorAxis();return Math.max(e,t)}calculateUpperLength2D(){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(this.getStartXY(),this.getEndXY());if(this.isDegenerateToLine())return t;const e=Math.abs(this.m_sweepAngle)*this.getSemiMajorAxis();return Math.max(e,t)}orientBottomUp(){if(this.m_YEnd<this.m_YStart||this.m_YEnd===this.m_YStart&&this.m_XEnd<this.m_XStart){this.m_XEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_XStart,this.m_XStart=this.m_XEnd),this.m_YEnd=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_YStart,this.m_YStart=this.m_YEnd);for(let t=0,e=this.m_description.getTotalComponentCount()-2;t<e;t++)this.m_attributes[t+e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.m_attributes[t],this.m_attributes[t]=this.m_attributes[t+e]);this.m_startAngle=this.m_startAngle+this.m_sweepAngle,this.m_sweepAngle=-this.m_sweepAngle}}isLine(){return Su(this)}copyIgnoreAttributes(t){t.m_XStart=this.m_XStart,t.m_YStart=this.m_YStart,t.m_XEnd=this.m_XEnd,t.m_YEnd=this.m_YEnd,t.m_center.assign(this.m_center),t.m_semiMajorAxis=this.m_semiMajorAxis,t.m_minorMajorRatio=this.m_minorMajorRatio,t.m_interior.assign(this.m_interior),t.m_rotation=this.m_rotation,t.m_cosr=this.m_cosr,t.m_sinr=this.m_sinr,t.m_sweepAngle=this.m_sweepAngle,t.m_startAngle=this.m_startAngle,t.m_bits=this.m_bits,Mu(t)}calculateArea2DHelper(){return Zu(this)}absNorm(){let t=this.getStartXY().norm(1)+this.getEndXY().norm(1);return this.isDegenerateToLine()||(t+=this.m_center.norm(1),t+=this.m_semiMajorAxis),t}queryEnvelopeW(t,e){if(e.setCoords(this.getCoord2D(t.vmin)),e.mergeNe(this.getCoord2D(t.vmax)),Su(this))return;const s=this.getSemiAxes(),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(8,Number.NaN);{const t=Math.atan2(-s.y*this.m_sinr,s.x*this.m_cosr),e=t+Math.PI,i=Math.atan2(s.y*this.m_cosr,s.x*this.m_sinr),r=i+Math.PI;n[0]=lu(this,t),n[1]=lu(this,e),n[2]=lu(this,i),n[3]=lu(this,r)}{const t=this.m_cosr+this.m_sinr,e=this.m_cosr-this.m_sinr,i=Math.atan2(-s.y*t,s.x*e),r=i+Math.PI,o=Math.atan2(s.y*e,s.x*t),a=o+Math.PI;n[4]=lu(this,i),n[5]=lu(this,r),n[6]=lu(this,o),n[7]=lu(this,a)}const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();for(let r=0;r<8;r++){const s=n[r];t.containsExclusiveCoordinate(s)&&(this.queryCoord2D(s,i),e.mergeNe(i))}}setSegmentFromCoordsForStitcher(t,e){xu(this,t,e)}writeInBufferStream(t,e){const s=new Float64Array(10);return s[0]=this.m_bits,s[1]=this.m_semiMajorAxis,s[2]=this.m_minorMajorRatio,s[3]=this.m_rotation,s[4]=this.m_center.x,s[5]=this.m_center.y,s[6]=this.m_sweepAngle,s[7]=this.m_startAngle,s[8]=this.m_interior.x,s[9]=this.m_interior.y,t.writeRangeFromArray(e,s.length,s,!0,1),e+s.length}readFromBufferStream(t,e){const s=new Float64Array(10);t.queryRange(e,s.length,s,!0,1),this.m_bits=s[0],this.m_semiMajorAxis=s[1],this.m_minorMajorRatio=s[2],this.m_rotation=s[3],this.m_center.x=s[4],this.m_center.y=s[5],this.m_sweepAngle=s[6],this.m_startAngle=s[7],this.m_interior.x=s[8],this.m_interior.y=s[9],this.m_cosr=Math.cos(this.m_rotation),this.m_sinr=Math.sin(this.m_rotation),this.m_cachedValues=null}snapControlPoints(t){return!1}needsSnapControlPoints(t){return!1}calculateSpecialPointsForCracking(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("should not1; be called"),0}ensureXYMonotone(){if(Su(this))return!1;if(this.getStartXY().equals(this.getEndXY()))return bu(this,this.getStartXY(),this.getEndXY(),this.projectionBehavior()),!0;const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);let e=Bu(this,t);if(Ha(t)){let s=!1;if(0===this.projectionBehavior()){const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;n.setCoords({pt:t[0]}),n.mergeNe(t[2]);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;i.setSub(t[2],t[0]),i.leftPerpendicularThis(),i.normalize(),i.scale(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[2],t[0]));const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(t[2],t[0],.5),o=r.sub(i),a=r.add(i);n.clipLine(o,a);const h=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getClosestCoordinate(o,a,t[1],!1);t[1]=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(o,a,h);const u=t[2].sub(t[1]),m=t[0].sub(t[1]),l=u.crossProduct(m),c=u.dotProduct(m);e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)()-Math.abs(.5*Math.atan2(l,c)),s=!0}return ku(t,e*e,null,s,this),!0}return!1}setCoordsForIntersector(t,e,s){yu(this,t,e,s)}getInteriorPoint(){return this.m_interior.clone()}copyToImpl(t){const e=t;e.m_center.assign(this.m_center),e.m_semiMajorAxis=this.m_semiMajorAxis,e.m_minorMajorRatio=this.m_minorMajorRatio,e.m_interior.assign(this.m_interior),e.m_rotation=this.m_rotation,e.m_cosr=this.m_cosr,e.m_sinr=this.m_sinr,e.m_sweepAngle=this.m_sweepAngle,e.m_startAngle=this.m_startAngle,e.m_bits=this.m_bits,Iu(e,fu(this))}reverseImpl(){Nu(this,!Xu(this)),mu(this),(0!==this.projectionBehavior()||this.getStartXY().equals(this.getEndXY()))&&Hu(this)}equalsImpl(t){const e=t;if(this.m_bits!==e.m_bits)return!1;if(this.m_semiMajorAxis!==e.m_semiMajorAxis)return!1;if(this.m_minorMajorRatio!==e.m_minorMajorRatio)return!1;if(!(this.m_center.isEqualPoint2D(e.m_center)||this.m_center.isNAN()&&e.m_center.isNAN()))return!1;if(this.m_rotation!==e.m_rotation)return!1;if(!this.m_interior.equals(e.m_interior))return!1;const s=e.m_sweepAngle;if(this.m_sweepAngle!==s)return!1;const n=e.m_startAngle;return this.m_startAngle===n}equalsImplTol(t,e){const s=t;if(this.m_bits!==s.m_bits)return!1;if(this.m_center.isNAN()&&s.m_center.isNAN())return!0;if(this.m_center.isNAN()!==s.m_center.isNAN())return!1;if(!this.getSemiAxes().isEqualPoint2D(s.getSemiAxes(),e))return!1;if(!this.m_center.isEqualPoint2D(s.m_center,e))return!1;const n=Math.abs(Ah(wh(Th(this.m_rotation-s.m_rotation)))),i=Math.abs((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()-n),r=Math.min(n,i);if(this.m_semiMajorAxis*Math.abs(r)>e)return!1;const o=this.getCoord2D(.5),a=s.getCoord2D(.5);return!!o.isEqualPoint2D(a,e)}swapImpl(t){const e=t;this.m_center=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_center,e.m_center=this.m_center),this.m_semiMajorAxis=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_semiMajorAxis,e.m_semiMajorAxis=this.m_semiMajorAxis),this.m_minorMajorRatio=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_minorMajorRatio,e.m_minorMajorRatio=this.m_minorMajorRatio),this.m_interior=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_interior,e.m_interior=this.m_interior),this.m_rotation=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_rotation,e.m_rotation=this.m_rotation),this.m_cosr=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_cosr,e.m_cosr=this.m_cosr),this.m_sinr=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_sinr,e.m_sinr=this.m_sinr),this.m_sweepAngle=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_sweepAngle,e.m_sweepAngle=this.m_sweepAngle),this.m_startAngle=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_startAngle,e.m_startAngle=this.m_startAngle),this.m_bits=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e.m_bits,e.m_bits=this.m_bits),Yu(this,e)}afterCompletedModification(){Ru(this),Mu(this)}intersect(t,e,s,n,i){return um(!1,this,t,e,s,n,i)}intersectPoint(t,e,s){if(e.length<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)(""),Su(this)){return new pm({start:this.getStartXY(),end:this.getEndXY()}).intersectPoint(t,e,s)}{const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,this.m_center);if(e>this.m_semiMajorAxis+s||e<this.getSemiMinorAxis()-s)return 0}const i=this.getClosestCoordinate(t,!1),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();return this.queryCoord2D(i,r),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(r,t)<=s?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(i,0,1)&&(this.queryCoord2D(0===i?1:0,r),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(r,t)<=s)?(e&&(e[0]=0,e[1]=1),2):(e&&(e[0]=i),1):0}isIntersecting(t,e,s){return 0!==rm(!1,this,t,e,s)}endPointModified(){this.m_bits|=8,Mu(this)}clearEndPointModified(){Ru(this)}}function qh(t,e,s){t.isEmpty()&&o(""),f(t);const n=t.getImpl(),i=[];return Lh(n.getPointCount(),i),Rh(Vh(n),i,n.getPointCount(),e)}function Fh(t,e,s,n){const i=[];return Lh(e,i),Rh(t,i,e,s)}function Vh(t){return{at:e=>t.getXY(e)}}function Lh(t,e){e.length=t;for(let s=0;s<e.length;++s)e[s]=s;t>3&&pe(t,e)}function Rh(t,e,s,n,i){let r=0;const o=[0,0,0];let a=0;const h=3;let u=0;for(let m=0;m<h;++m){let i=!1;for(;u<s;){const s=t.at(e[u]);let l=1;if(3===r?l=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.inCircleRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]),s):2===r?l=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.inCircleRobust3Point(t.at(n[0]),t.at(n[1]),s):1===r&&s.equals(t.at(n[0]))&&(l=0),l<=0){if(l<0&&m+1<h){e[a]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[u],e[u]=e[a]);for(let t=0;t<r;t++)if(n[t]===e[u]){o[t]=u;break}a++}u++;continue}i=!0;let c=0;for(let t=0;t<r;t++)o[t]>u&&(n[c]=n[t],o[c]=o[t],c++);r=c,n[r]=e[u],o[r]=u,r++,r<3?u=a:(1===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]))&&(n[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[2]),o[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[0],o[0]=o[2])),u++)}if(!i)break;if(m+1<h){a=0;let s=!1;for(let t=0;t<r;t++)for(let e=t+1;e<r;e++)o[t]>o[e]&&(o[e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[t],o[t]=o[e]),n[e]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[t],n[t]=n[e]),s=!0);for(let t=0;t<r;t++)e[o[t]]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e[t],e[t]=e[o[t]]),o[t]=t;s&&3===r&&1===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.orientationRobust(t.at(n[0]),t.at(n[1]),t.at(n[2]))&&(n[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(n[0],n[0]=n[2]),o[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(o[0],o[0]=o[2]))}u=r}return r}function zh(t,e,s,n,i,r){return new jh(0,0,0,null,!1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()).densifyEx(t,e,s,n,!1,r)}function Bh(t,s,n,r){return Number.isFinite(s)||e("replace_all_curves_with_beziers: maxDeviation"),Oh(i.enumBezier,t,s,n)}function kh(t,e,n,r,o,h,u,m){h&&(h.length=0),u&&(u.length=0);const l=t.getGeometryType();if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return h&&(h.push(t.getStartXY()),h.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),h.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),h.push(t.getEndXY())),u&&(u.push(0),u.push(1)),1;if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier){if(!r)return h&&(h.push(t.getStartXY()),h.push(t.getControlPoint1()),h.push(t.getControlPoint2()),h.push(t.getEndXY())),u&&(u.push(0),u.push(1)),1;const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(9,Number.NaN);let s=t.getMonotonicPartParams(e.length,e);if(e.length=s,s=Zh(t,n,e),2===s&&o&&(e[1]=.5,e.push(1),s=3),u&&u.splice(0,0,...e.slice(0,s)),h){const n=new fm;for(let i=1;i<s;i++){const s=e[i-1],r=e[i];t.queryCut(s,r,n,!0);const o=n.get();lo(o),1===i&&h.push(o.getStartXY()),h.push(o.getControlPoint1()),h.push(o.getControlPoint2()),h.push(o.getEndXY())}}return s-1}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const i=t;if(i.isDegenerateToLine()||i.isDegenerate(0))return h&&(h.push(t.getStartXY()),h.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),h.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),h.push(t.getEndXY())),u&&(u.push(0),u.push(1)),1;if(r&&(o||!i.isMonotoneQuickAndDirty())){const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(6,Number.NaN);let m=i.getMonotonicPartParams(a.length,a);a.length=m,m=Zh(t,n,a),2===m&&o&&(a[1]=.5,a.push(1),m=3);let l=0;if(m>2){const t=new fm,o=u||[];let c=0;for(let g=1;g<m;g++){const d=a[c],_=a[g];if(i.queryCut(d,_,t,!0),t.get().isDegenerate(0))continue;const p=o.length,f=Qh(1===g,t.get(),e,n,r,h,u);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(f>0),l+=f;const P=g===m-1,y=a[c],x=t.get().getSweepAngle()/i.getSweepAngle();for(let t=p,e=o.length;t<e;t++)if(o[t]=!P||t+1<e?y+o[t]*x:1,h){const e=3*t,s=i.getCoord2D(o[t]);if(h[e].setCoordsPoint2D(s),e>0){co(h.slice(e-3))}}c=g}return l}}return Qh(!0,i,e,n,r,h,u)}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2){const s=t;if(r&&(o||!s.isMonotoneQuickAndDirty())){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(6,Number.NaN);let r=s.getMonotonicPartParams(i.length,i);i.length=r,r=Zh(t,n,i),2===r&&o&&(i[1]=.5,i.push(1),r=3);let a=0;if(r>2){const t=new fm,o=u||[];for(let m=1;m<r;m++){const l=i[m-1],c=i[m];s.queryCut(l,c,t,!0);const g=o.length;a+=Kh(1===m,t.get(),e,n,!1,h,u);const d=m===r-1,_=i[m-1];for(let t=g,e=o.length;t<e;t++)if(o[t]=!d||t+1<e?_+o[t]:1,h){const e=3*t,n=s.getCoord2D(o[t]);if(h[e].setCoordsPoint2D(n),e>0){Ai(h.slice(e-3))}}}return a}}return Kh(!0,s,e,n,r,h,u)}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2){const s=t,i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);s.queryControlPoints(i);const a=new ia;a.constructFromQuadratic(i);const m=kh(a,e,n,r,o,h,u);if(null!=h&&null!=u){const t=3;for(let e=1,n=0;e<m;++e,n+=t){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;s.queryCoord2D(u[e],i);const o=h[n+t];if(!i.equals(o)&&(h[n+t].setCoordsPoint2D(i),r)){co(h.slice(n,n+4))}}}return m}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}function Gh(t,e,s,n,r,o,h,u){o&&(o.length=0),h&&(h.length=0);const m=t.getGeometryType();if(m===i.enumLine)return o&&(o.push(t.getStartXY()),o.push(Q.getNAN()),o.push(t.getEndXY())),h&&(h.push(0),h.push(1)),1;if(m===i.enumBezier2){const e=U(9,Number.NaN);let n=t.getMonotonicPartParams(e.length,e);if(e.length=n,n=Zh(t,s,e),h&&h.splice(0,0,...e.slice(0,n)),o){const s=new fm;for(let i=1;i<n;i++){const n=e[i-1],r=e[i];t.queryCut(n,r,s,!0);const a=s.get();wi(a),1===i&&o.push(a.getStartXY()),o.push(a.getControlPoint1()),o.push(a.getEndXY())}}return n-1}if(m===i.enumEllipticArc){const i=t;if(i.isDegenerateToLine()||i.isDegenerate(0))return o&&(o.push(t.getStartXY()),o.push(Q.getNAN()),o.push(t.getEndXY())),h&&(h.push(0),h.push(1)),1;if(!i.isMonotoneQuickAndDirty()){const n=U(6,Number.NaN);let r=i.getMonotonicPartParams(n.length,n);n.length=r,r=Zh(t,s,n);let a=0;if(r>2){const t=new fm,u=h||[];for(let m=1;m<r;m++){const l=n[m-1],c=n[m];i.queryCut(l,c,t,!0);const g=u.length;a+=$h(1===m,t.get(),e,s,!1,o,h);const d=m===r-1,_=n[m-1],p=t.get().getSweepAngle()/i.getSweepAngle();for(let t=g,e=u.length;t<e;t++)if(u[t]=!d||t+1<e?_+u[t]*p:1,o){const e=2*t,s=i.getCoord2D(u[t]);if(o[e].setCoordsPoint2D(s),e>0){Ai(o.slice(e-2))}}}return a}}return Qh(!0,i,e,s,n,o,h)}if(m===i.enumBezier){const i=t;if(!i.isMonotoneQuickAndDirty()){const n=U(6,Number.NaN);let r=i.getMonotonicPartParams(n.length,n);n.length=r,r=Zh(t,s,n);let a=0;if(r>2){const t=new fm,u=h||[];for(let m=1;m<r;m++){const l=n[m-1],c=n[m];i.queryCut(l,c,t,!0);const g=u.length;a+=tu(1===m,t.get(),e,s,!1,o,h);const d=m===r-1,_=n[m-1];for(let t=g,e=u.length;t<e;t++)if(u[t]=!d||t+1<e?_+u[t]:1,o){const e=2*t,s=i.getCoord2D(u[t]);if(o[e].setCoordsPoint2D(s),e>0){Ai(o.slice(e-2))}}}return a}}return tu(!0,i,e,s,n,o,h)}if(m===i.enumRationalBezier2){const i=t;if(!i.isMonotoneQuickAndDirty()){const n=U(6,Number.NaN);let r=i.getMonotonicPartParams(n.length,n);n.length=r,r=Zh(t,s,n);let a=0;if(r>2){const t=new fm,u=h||[];for(let m=1;m<r;m++){const l=n[m-1],c=n[m];i.queryCut(l,c,t,!0);const g=u.length;a+=Jh(1===m,t.get(),e,s,!1,o,h);const d=m===r-1,_=n[m-1];for(let t=g,e=u.length;t<e;t++)if(u[t]=!d||t+1<e?_+u[t]:1,o){const e=2*t,s=i.getCoord2D(u[t]);if(o[e].setCoordsPoint2D(s),e>0){Ai(o.slice(e-2))}}}return a}}return Jh(!0,i,e,s,n,o,h)}a("")}function Wh(t,e,n,r,o,a,h,u,m){const l=t.getGeometryType();if(a&&(a.length=0,h.length=0),u&&(u.length=0),l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const e=t;if(e.isDegenerateToLine()||e.isDegenerate(0))return a&&(a.push(t.getStartXY()),a.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),a.push(t.getEndXY()),h.push(Number.NaN),h.push(Number.NaN),h.push(Number.NaN)),u&&(u.push(0),u.push(1)),1}const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(9,Number.NaN);let g;if(o)g=t.getMonotonicPartParams(c.length,c),c.length=g,g=Zh(t,n,c);else{if(g=2,c[0]=0,c[1]=1,l===Xh.type){const e=t.getSweepAngle();if(e>.9*Math.PI){const t=2*Math.PI/3;Math.min(3,Math.trunc(e/t+.5))>2?(c[0]=0,c[1]=1/3,c[2]=2/3,c[3]=1,g=4):(c[0]=0,c[1]=.5,c[2]=1,g=3)}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(l===En.type);c.length=g}if(2===g&&r&&(c[1]=.5,c.push(1),g=3),a){const e=new fm;let s=1;for(;s<g;){const n=c[s-1],r=c[s];t.queryCut(n,r,e,!0);const u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),m=[1,1,1];if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const t=e.get();if(Math.abs(t.getSweepAngle())>.9*Math.PI){const t=(r-n)/3;c.splice(s,0,n+t),c.splice(s+1,0,n+2*t),g+=2;continue}m[1]=Bu(t,u)}else{const t=e.get();t.queryControlPoints(u),t.queryWeights(m)}o&&Ha(u),1===s&&(a.push(u[0].clone()),h.push(m[0])),a.push(u[1].clone()),a.push(u[2].clone()),h.push(m[1]),h.push(m[2]),s++}}return u&&(u.length=g,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.b)(u,c,0,0,g)),g-1}Xh.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc;class jh{static constructDefault(t){return new jh(0,0,0,t,!1,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)())}constructor(t,e,s,n,i,r){this.m_segmentBuffer=null,this.m_dummyPoint=new _Envelope_js__WEBPACK_IMPORTED_MODULE_1__.P,this.m_progressCounter=0,this.m_progressTracker=n,this.m_bSetDensifyFlag=i,this.m_maxLength=t,this.m_maxDeviation=e,this.m_maxAngle=s>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)()?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)():s,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_maxSegmentsPerCurve=r,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.x)(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve}densify(t){return this.densifyGeom(t)}densifySegment(t,e){this.densifySegmentEx(t,null,!0,!1,e)}densifyEx(t,e,s,n,i,r){return this.m_maxLength=e,this.m_maxDeviation=s,this.m_maxAngle=n>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)()?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)():n,this.m_cosMaxAngle=Math.cos(this.m_maxAngle),this.m_bOnlyCurveDensify=this.m_maxAngle>0||this.m_maxDeviation>0,this.m_bSetDensifyFlag=i,this.m_maxSegmentsPerCurve=r,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.x)(this.m_maxSegmentsPerCurve>0,"this.m_maxSegmentsPerCurve > 0"),this.m_minStep=1/this.m_maxSegmentsPerCurve,this.densifyGeom(t)}densifyGeom(t){if(t.isEmpty()||t.getDimension()<1)return t;const e=t.getGeometryType();return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.j)(e)?t:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.h)(e)?this.densifyMultiPath(t):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.f)(e)?this.densifySegmentImpl(t):e===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope?this.densifyEnvelope(t):void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}densifySegmentEx(t,e,s,n,r){const o=t.getGeometryType();if(!(this.m_maxLength>0||this.m_bOnlyCurveDensify&&o!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)&&(!n||s))return void(e?o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine?e.addSegment(t,s):(s&&(t.queryStart(this.m_dummyPoint),e.startPathPoint(this.m_dummyPoint)),t.queryEnd(this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint)):(s&&r.push(0),r.push(1)));if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier)return void this.densifyCubicBezier(t,e,s,n,r);if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2)return void this.densifyRationalBezier2(t,e,s,n,r);if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2)return void this.densifyBezier2(t,e,s,n,r);if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc&&!t.isLine()&&t.getMinorMajorRatio()<.25)return void this.densifyEllipticArc(t,e,s,n,r);let a=1;this.m_maxLength>0&&(a=this.calculateLengthSubdivisionStep(t,this.m_maxLength)),this.m_maxDeviation>0&&(a=Math.min(a,this.calculateDeviationSubdivisionStep(t,this.m_maxDeviation))),this.m_maxAngle>0&&(a=Math.min(a,this.calculateAngularSubdivisionStep(t,this.m_maxAngle))),this.densifySegmentByLength(t,a,e,s,n,r)}densifyMultiPath(t){if(!t.hasNonLinearSegments()){if(1===t.getDescription().getAttributeCount())return this.densifyMultiPathLinear(t);if(!(this.m_maxLength>0))return t}const e=t.createInstance();if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon){e.setFillRule(t.getFillRule())}e.reserve(t.getPointCount());const s=t.getImpl().querySegmentIterator();for(;s.nextPath();){let t=!0;for(;s.hasNextSegment();){const n=s.nextSegment(),i=s.isClosingSegment();this.densifySegmentEx(n,e,t,i,null),i&&e.closePathWithLine(),t=!1}}return e}densifySegmentImpl(t){const e=new Os({vd:t.getDescription()}),s=[0];return this.densifySegmentEx(t,e,!0,!1,s),e}densifyEnvelope(t){const e=new ur({vd:t.getDescription()});e.addEnvelope(t,!1);const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();t.queryEnvelope(s);const n=s.width(),i=s.height();return!(this.m_maxLength>0)||n<=this.m_maxLength&&i<=this.m_maxLength?e:this.densifyMultiPath(e)}densifyMultiPathLinear(t){if(!(this.m_maxLength>0))return t;const e=t.createInstance();if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon){e.setFillRule(t.getFillRule())}e.reserve(t.getPointCount());const s=e.getImpl(),n=t.getImpl(),r=n.getAttributeStreamRef(0),o=new pm;for(let i=0,a=n.getPathCount();i<a;i++){const t=n.isClosedPath(i);if(0===n.getPathSize(i))continue;const a=n.getPathStart(i),h=r.readPoint2D(2*a),u=h.clone();s.startPath(h);for(let m=a+1,l=n.getPathEnd(i);m<l;m++){const t=r.readPoint2D(2*m),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,t);if(n>this.m_maxLength){let e=Math.ceil(n/this.m_maxLength);e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()&&(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)());const i=1/e;let r,a,h;u.compare(t)<0?(o.setStartXY(u),o.setEndXY(t),r=0,a=1):(o.setStartXY(t),o.setEndXY(u),r=e-2,a=-1);for(let t=0,n=e-1;t<n;t++,r+=a){this.progress_(),h=i*(r+1);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;o.queryCoord2D(h,t),s.lineTo(t),this.m_bSetDensifyFlag&&s.setAttributeNoCurves(10,s.getPointCount()-1,0,1)}}else this.progress_();e.lineTo(t),u.assign(t)}if(t){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(u,h);if(t>this.m_maxLength){const e=h;let n=Math.ceil(t/this.m_maxLength);n>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()&&(n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)());const i=1/n;let r,a;u.compare(e)<0?(o.setStartXY(u),o.setEndXY(e),r=0,a=1):(o.setStartXY(e),o.setEndXY(u),r=n-2,a=-1);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0);let l;for(let t=0,h=n-1;t<h;t++,r+=a)this.progress_(),l=i*(r+1),o.queryCoord2D(l,m),s.lineTo(m),this.m_bSetDensifyFlag&&s.setAttributeNoCurves(10,s.getPointCount()-1,0,1)}s.closePathWithLine()}}return e}densifySegmentByLength(t,e,n,r,o,h){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier);let u=t.getStartXY().compare(t.getEndXY());if(0===u&&e<1){t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc?u=t.getSweepAngle()<0?1:-1:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("densify segment by length")}let m=0;if(r&&(n?(t.queryStart(this.m_dummyPoint),n.startPathPoint(this.m_dummyPoint)):h.push(0),++m),e*this.m_maxSegmentsPerCurve<1&&(e=1/this.m_maxSegmentsPerCurve),e<1){this.m_segmentBuffer||(this.m_segmentBuffer=new fm);let s=Math.ceil(1/e);s>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.i)()),e=1/s,this.m_segmentBuffer.create(t.getGeometryType());let i,r,o,a=t;u<0?(i=0,r=1):(t.copyTo(this.m_segmentBuffer.get()),this.m_segmentBuffer.get().reverse(),i=s-2,r=-1,a=this.m_segmentBuffer.get());const l=s-1;for(let t=0;t<l;t++,i+=r)o=e*(i+1),n?(a.queryCoord(o,this.m_dummyPoint),n.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==o&&0!==o&&n.setAttribute(10,n.getPointCount()-1,0,1)):h.push(u>0?1-o:o),this.progress_();o=1,m+=l}(!o||o&&r&&m<2)&&(n?(t.queryEnd(this.m_dummyPoint),n.lineToPoint(this.m_dummyPoint)):h.push(1))}densifyCubicBezier(t,e,s,n,i){const r=new ia;let o=t;const a=t.calculateUpperLength2D();let h=t.getStartXY().compare(t.getEndXY());if(0===h&&a>0){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);t.queryControlPoints(e),h=e[1].compare(e[2]),0===h&&(h=e[1].compare(e[0]))}h>0&&(t.copyTo(r),r.reverse(),o=r);let u=0;s&&(e?(t.queryStart(this.m_dummyPoint),e.startPathPoint(this.m_dummyPoint)):i.push(0),++u);const m=[],l=[],c=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve));let g=!0,d=0;if(h>0)for(m.push([o.getStartXY(),o.getControlPoint1(),o.getControlPoint2(),o.getEndXY(),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,1)]),l.push(0);m.length;){this.progress_();const t=m.at(-1),r=l.at(-1),a=t[4].x,h=t[4].y;if(r<c&&this.bezierNeedsSplit(t)){g&&(d=o.findMinDeriv(),g=!1);let e=.5*(a+h);Math.abs(d-e)<.4*(h-a)&&(e=d);const s=(e-a)/(h-a),n=t[0].mul(1-s).add(t[1].mul(s)),i=t[1].mul(1-s).add(t[2].mul(s)),u=t[2].mul(1-s).add(t[3].mul(s)),c=n.mul(1-s).add(i.mul(s)),_=i.mul(1-s).add(u.mul(s)),p=c.mul(1-s).add(_.mul(s)),f=t[3];t[1]=n,t[2]=c,t[3]=p,t[4].setCoords(a,e);const P=[p,_,u,f,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(e,h)];m.push(P),l[l.length-1]=r+1,l.push(r+1)}else m.pop(),l.pop(),(m.length>0||!n||n&&s&&u<2)&&(e?(o.queryCoord(a,this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==a&&0!==a&&e.setAttribute(10,e.getPointCount()-1,0,1)):i.push(1-a),++u)}else for(m.push([o.getStartXY(),o.getControlPoint1(),o.getControlPoint2(),o.getEndXY(),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,1)]),l.push(0);m.length;){this.progress_();const t=m.at(-1),r=l.at(-1),a=t[4].x,h=t[4].y;if(r<c&&this.bezierNeedsSplit(t)){g&&(d=o.findMinDeriv(),g=!1);let e=.5*(a+h);Math.abs(d-e)<.4*(h-a)&&(e=d);const s=(e-a)/(h-a),n=t[0].mul(1-s).add(t[1].mul(s)),i=t[1].mul(1-s).add(t[2].mul(s)),u=t[2].mul(1-s).add(t[3].mul(s)),c=n.mul(1-s).add(i.mul(s)),_=i.mul(1-s).add(u.mul(s)),p=c.mul(1-s).add(_.mul(s)),f=t[0];t[0]=p,t[1]=_,t[2]=u,t[4].setCoords(e,h);const P=[f,n,c,p,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(a,e)];m.push(P),l[l.length-1]=r+1,l.push(r+1)}else m.pop(),l.pop(),(m.length>0||!n||n&&s&&u<2)&&(e?(o.queryCoord(h,this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==h&&0!==h&&e.setAttribute(10,e.getPointCount()-1,0,1)):i.push(h),++u)}}densifyRationalBezier2(t,e,s,n,i){const r=new En;let o=t;const a=t.calculateUpperLength2D();let h=t.getStartXY().compare(t.getEndXY());0===h&&a>0&&(h=0),h>0&&(t.copyTo(r),r.reverse(),o=r);let u=0;s&&(e?(t.queryStart(this.m_dummyPoint),e.startPathPoint(this.m_dummyPoint)):i.push(0),++u);const m=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),l=new En,c=[],g=[];for(c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1)),g.push(0);c.length;){this.progress_();const t=c.at(-1).clone(),r=g.at(-1);if(r<m&&this.rationalBezier2NeedsSplit(o,l,t.vmin,t.vmax)){const e=t.getCenter();h>0?(c.at(-1).vmax=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(e,t.vmax))):(c.at(-1).vmin=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(t.vmin,e))),g[g.length-1]=r+1,g.push(r+1)}else if(c.pop(),g.pop(),c.length>0||!n||n&&s&&u<2){const s=h>0?t.vmin:t.vmax;e?(o.queryCoord(s,this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==s&&0!==s&&e.setAttribute(10,e.getPointCount()-1,0,1)):i.push(h>0?1-s:s),++u}}}densifyBezier2(t,e,s,n,i){const r=new wn;let o=t;const a=t.calculateUpperLength2D();let h=t.getStartXY().compare(t.getEndXY());0===h&&a>0&&(h=0),h>0&&(t.copyTo(r),r.reverse(),o=r);let u=0;s&&(e?(t.queryStart(this.m_dummyPoint),e.startPathPoint(this.m_dummyPoint)):i.push(0),++u);const m=Math.ceil(Math.log2(this.m_maxSegmentsPerCurve)),l=new wn,c=[],g=[];for(c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1)),g.push(0);c.length;){this.progress_();const t=c.at(-1).clone(),r=g.at(-1);if(r<m&&this.bezier2NeedsSplit(o,l,t.vmin,t.vmax)){const e=t.getCenter();h>0?(c.at(-1).vmax=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(e,t.vmax))):(c.at(-1).vmin=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(t.vmin,e))),g[g.length-1]=r+1,g.push(r+1)}else if(c.pop(),g.pop(),c.length>0||!n||n&&s&&u<2){const s=h>0?t.vmin:t.vmax;e?(o.queryCoord(s,this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==s&&0!==s&&e.setAttribute(10,e.getPointCount()-1,0,1)):i.push(h>0?1-s:s),++u}}}densifyEllipticArc(t,e,s,n,i){const r=new Xh;let o=t;const a=t.calculateUpperLength2D();let h=t.getStartXY().compare(t.getEndXY());0===h&&a>0&&(h=t.isClockwise()?0:1),h>0&&(t.copyTo(r),r.reverse(),o=r);let u=0;s&&(e?(t.queryStart(this.m_dummyPoint),e.startPathPoint(this.m_dummyPoint)):i.push(0),++u);const m=Math.trunc(Math.log2(this.m_maxSegmentsPerCurve)),l=new Xh,c=[],g=[];for(c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(0,1)),g.push(0);c.length;){this.progress_();const t=c.at(-1).clone(),r=g.at(-1);if(r<m&&this.ellipticArcNeedsSplit(o,l,t.vmin,t.vmax)){const e=t.getCenter();h>0?(c.at(-1).vmax=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(e,t.vmax))):(c.at(-1).vmin=e,c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(t.vmin,e))),g[g.length-1]=r+1,g.push(r+1)}else if(c.pop(),g.pop(),c.length>0||!n||n&&s&&u<2){const s=h>0?t.vmin:t.vmax;e?(o.queryCoord(s,this.m_dummyPoint),e.lineToPoint(this.m_dummyPoint),this.m_bSetDensifyFlag&&1!==s&&0!==s&&e.setAttribute(10,e.getPointCount()-1,0,1)):i.push(h>0?1-s:s),++u}}}calculateLengthSubdivisionStep(t,e){const s=t.calculateUpperLength2D();if(!t.isCurve())return s?e/s:1;if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const n=t;if(n.isCircular()||n.isDegenerate(0)||n.isDegenerateToLine()){let t=e/s;return t<this.m_minStep&&(t=this.m_minStep),t}return e/s*n.getSemiAxes().y/n.getSemiAxes().x}t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)(""),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}calculateDeviationSubdivisionStep(t,e){if(!t.isCurve())return 1;if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const s=t;if(s.isDegenerate(0)||s.isDegenerateToLine())return 1;{const n=s.getSemiMajorAxis(),i=1-e/n;let r=Math.PI/2;if(i>0){const t=4*Math.sqrt(e/n*.5);r=Math.min(Math.PI/2,Math.abs(t))}r=Math.max(r,2*Math.PI/this.m_maxSegmentsPerCurve);const o=r*n;return this.calculateLengthSubdivisionStep(t,o)}}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}calculateAngularSubdivisionStep(t,e){if(!t.isCurve())return 1;if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){const s=t;return s.isDegenerate(0)||s.isDegenerateToLine()?1:this.calculateLengthSubdivisionStep(t,e*s.getSemiMinorAxis())}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}rationalBezier2NeedsSplit(t,e,s,n){t.cutBezierIgnoreAttributes(s,n,e);let i=!1;if(this.m_maxLength>0){if(e.calculateUpperLength2D()>this.m_maxLength)return i=!0,!0}const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(r);const o=[0,0,0];return e.queryWeights(o),!i&&this.m_maxDeviation>0&&(i=!jh.checkRationalBezier2MaxDeviation(r,o,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!jh.checkRationalBezier2MaxAngle(r,o,this.m_cosMaxAngle)),i}bezier2NeedsSplit(t,e,s,n){t.cutBezierIgnoreAttributes(s,n,e);let i=!1;if(this.m_maxLength>0){if(e.calculateUpperLength2D()>this.m_maxLength)return i=!0,!0}const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);return e.queryControlPoints(r),!i&&this.m_maxDeviation>0&&(i=!jh.checkBezier2MaxDeviation(r,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!jh.checkBezier2MaxAngle(r,this.m_cosMaxAngle)),i}ellipticArcNeedsSplit(t,e,s,n){t.cutArcIgnoreAttributes(s,n,e);let i=!1;if(this.m_maxLength>0){if(e.calculateUpperLength2D()>this.m_maxLength)return i=!0,!0}return!i&&this.m_maxDeviation>0&&(i=!jh.checkEllipticArcMaxDeviation(e,this.m_maxDeviation)),!i&&this.m_maxAngle>0&&(i=!jh.checkEllipticArcMaxAngle(e,this.m_cosMaxAngle)),i}bezierNeedsSplit(t){let e=!1;if(this.m_maxLength>0){if(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[0],t[1])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[1],t[2])+_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t[2],t[3])>this.m_maxLength)return e=!0,!0}return!e&&this.m_maxDeviation>0&&(e=!jh.checkBezierMaxDeviation(t,this.m_maxDeviation)),!e&&this.m_maxAngle>0&&(e=!jh.checkBezierMaxAngle(t,this.m_cosMaxAngle)),e}progress_(){}static checkBezierMaxDeviation(t,e){const s=t[3].sub(t[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const i=n.dotProduct(t[0].sub(t[1])),r=n.dotProduct(t[0].sub(t[2]));if(Math.max(Math.abs(i),Math.abs(r))<=e){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;Po(t,.5,e,!1);const n=e.sub(t[0]).dotProduct(s);return n>=0&&n<=s.sqrLength()}return!1}return Math.max(t[0].sub(t[1]).sqrLength(),t[0].sub(t[2]).sqrLength())<=e*e}static checkBezierMaxAngle(t,e){if(t[0].equals(t[3]))return!(!t[0].equals(t[1])||!t[1].equals(t[2]));const s=t[3].sub(t[0]);s.normalize();{const n=t[1].sub(t[0]),i=n.dotProduct(s);if(i<0)return!1;if(n.length()*e>i)return!1}{const n=t[2].sub(t[0]),i=n.dotProduct(s);if(i<0)return!1;if(n.length()*e>i)return!1}{const n=t[2].sub(t[1]),i=n.dotProduct(s);if(i<0)return!1;if(n.length()*e>i)return!1}return!0}static checkRationalBezier2MaxDeviation(t,e,s){if(0===e[1])return!1;const n=t[2].sub(t[0]);if(n.sqrLength()>0){const e=n.clone();e.leftPerpendicularThis(),e.normalize();const i=e.dotProduct(t[0].sub(t[1]));if(Math.abs(i)<=s){const e=t[1].sub(t[0]).dotProduct(n);return e>=0&&e<=n.sqrLength()}return!1}return t[0].sub(t[1]).sqrLength()<=s*s}static checkRationalBezier2MaxAngle(t,e,s){if(0===e[1])return!1;if(t[0].equals(t[2]))return!!t[0].equals(t[1]);const n=t[2].sub(t[0]);n.normalize();{const e=t[1].sub(t[0]),i=e.dotProduct(n);if(i<0)return!1;if(e.length()*s>i)return!1}return!0}static checkBezier2MaxDeviation(t,e){const s=t[2].sub(t[0]);if(s.sqrLength()>0){const n=s.clone();n.leftPerpendicularThis(),n.normalize();const i=n.dotProduct(t[0].sub(t[1]));if(Math.abs(i)<=e){const e=t[1].sub(t[0]).dotProduct(s);return e>=0&&e<=s.sqrLength()}return!1}return t[0].sub(t[1]).sqrLength()<=e*e}static checkBezier2MaxAngle(t,e){if(t[0].equals(t[2]))return!!t[0].equals(t[1]);const s=t[2].sub(t[0]);s.normalize();{const n=t[1].sub(t[0]),i=n.dotProduct(s);if(i<0)return!1;if(n.length()*e>i)return!1}return!0}static checkEllipticArcMaxDeviation(t,e){if(Math.abs(t.getSweepAngle())<Math.PI){const s=t.getEndXY().sub(t.getStartXY()),n=[0,0];if(1===tm(t,s,n)){const s=t.getCoord2D(n[0]),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getClosestCoordinate(t.getStartXY(),t.getEndXY(),s),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t.getStartXY(),t.getEndXY(),i,r);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,r)<=e}}const s=t.getCoord2D(.5),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(t.getEndXY(),t.getStartXY(),.5,n);return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,n)<=e}static checkEllipticArcMaxAngle(t,e){const s=t.getTangent(0),n=t.getTangent(1),i=s.dotProduct(n);return!(i<0)&&!(s.length()*n.length()*e>i)}static checkTypeForReplace(t,e){return t.getGeometryType()===e&&(e!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc||t.isCircular())}}function Zh(t,e,s){const n=s.length;if(e<=0||n<=2)return n;let i=0;const r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(n-1,Number.NaN);for(let o=1,a=n;o<a;o++){const e=t.tToLength(s[o]);r[o-1]=e-i,i=e}for(;r.length>1;){const t=r.findIndex((t=>t<=2*e));if(-1===t)break;let n=t+1,i=t+1;if(t>0){const e=t-1;(i===r.length||r[e]>r[i])&&(i=e,n--)}r[i]+=r[t],r.splice(t,1),s.splice(n,1)}return s.length}function Hh(t,e,s,n,i){const r=[],o=[],a=kh(e,s,0,n,!1,r,o),h=new ia;let u=i;const m=e.getDescription();h.assignVertexDescription(m);const l=m.getAttributeCount()>1,c=new q,g=new pm;for(let d=0,_=0;d<a;d++){if(r[_+1].isNAN()){if(l){let t=o[d];e.queryCoord(t,c),g.setStart(c),t=o[d+1],e.queryCoord(t,c),g.setEnd(c)}g.setStartXY(r[_]),g.setEndXY(r[_+3]),t.addSegment(g,u)}else{if(l){let t=o[d];e.queryCoord(t,c),h.setStart(c),t=o[d+1],e.queryCoord(t,c),h.setEnd(c)}h.setStartXY(r[_]),h.setControlPoint1(r[_+1]),h.setControlPoint2(r[_+2]),h.setEndXY(r[_+3]),t.addSegment(h,u)}_+=3,u=!1}}function Uh(t,e,s,n,i){const r=[],o=[],a=Gh(e,s,0,n,!1,r,o),h=new wn;let u=i;const m=e.getDescription();h.assignVertexDescription(m);const l=m.getAttributeCount()>1,c=new q,g=new pm;for(let d=0,_=0;d<a;d++){if(r[_+1].isNAN()){if(l){let t=o[d];e.queryCoord(t,c),g.setStart(c),t=o[d+1],e.queryCoord(t,c),g.setEnd(c)}g.setStartXY(r[_]),g.setEndXY(r[_+2]),t.addSegment(g,u)}else{if(l){let t=o[d];e.queryCoord(t,c),h.setStart(c),t=o[d+1],e.queryCoord(t,c),h.setEnd(c)}h.setStartXY(r[_]),h.setControlPoint1(r[_+1]),h.setEndXY(r[_+2]),t.addSegment(h,u)}_+=2,u=!1}}function Oh(t,e,n,r,o){s(t===i.enumBezier||t===i.enumEllipticArc||t===i.enumBezier2);const a=e.createInstance();a.getGeometryType()===i.enumPolygon&&a.setFillRule(e.getFillRule());const u=e.querySegmentIterator();for(let m=0,l=e.getPathCount();m<l;++m){if(!e.hasNonLinearSegmentsPath(m)){a.addPath(e,m,!0);continue}const o=e.getPathStart(m);let l=!0,c=0;for(u.resetToPath(m),s(u.nextPath());u.hasNextSegment();){const s=u.nextCurve();if(!s)break;{const g=u.getStartPointIndex()-o,d=g-c;d>0&&(a.addSegmentsFromPath(e,m,c,d,l),l=!1),c=g+1,t===i.enumBezier?Hh(a,s,n,r,l):t===i.enumBezier2?Uh(a,s,n,r,l):h(""),l=!1}}const g=e.getSegmentCountPath(m);g-c!==0&&a.addSegmentsFromPath(e,m,c,g-c,l)}return a}function Qh(t,e,s,n,i,r,o,a){const h=e.clone();h.dropAllAttributes();const u=(t,e,s,n)=>(e&&(t&&e.push(n.getStartXY()),e.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),e.push(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()),e.push(n.getEndXY())),s&&(t&&s.push(0),s.push(1)),1);if(h.isDegenerateToLine()||h.isDegenerate(0))return u(t,r,o,e);const m=h.getStartXY(),l=h.getEndXY(),c=h.getSemiAxes(),g=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;if(h.isCircular())g.setIdentity();else{const t=h.getAxisXRotation();g.setScaleCoords(1,h.getMinorMajorRatio()),g.rotateAngle(t)}const d=h.getCenter();g.shift(d);const _=g.clone();_.invertThis(),h.applyTransformation(_);const p=h.getSweepAngle();if(0===p)return u(t,r,o,e);const f=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();f.setCoords({center:d,width:2*c.x,height:2*c.x});const P=.05*f.calculateToleranceFromEnvelope(),y=Math.max(s/c.x,P/c.x);let x=4*Math.pow(y/.0741,1/6);x=Math.min(x,Math.PI/2);const C=Ih(h.getStartAngle());let v=p>0?Math.floor(C/x):Math.ceil(C/x);v*=x;const b=p>0?x:-x;v+b===C&&(v+=b);let S=4/3*Math.tan(Math.abs(x)/4);p>0&&(S=-S),o&&t&&o.push(0);const E=x/Math.abs(p);let D=(v-C)/p;const w=m.clone(),A=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;h.queryCoord2D(0,A);const T=A.clone(),I=1-.01*E;let M=0,Y=0;for(;D<1;){let s;if(D+=E,Y>0&&D<I)s=S;else{D>=I&&(D=1);const t=(D-Y)*p;s=4/3*Math.tan(Math.abs(t)/4),p>0&&(s=-s)}h.queryCoord2D(D,A);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;g.queryTransform(A,a);const u=e.getClosestCoordinate(a,!1);if(e.queryCoord2D(u,a),1!==D&&(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(w,a)<=2*n||_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(a,l)<=2*n))continue;w.setCoordsPoint2D(a);const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4);c[0].assign(T),c[3].assign(A),c[1].rightPerpendicularOther(T),c[1].scaleAddThis(s,T),c[2].leftPerpendicularOther(A),c[2].scaleAddThis(s,A),g.transformPoints2D(c,3,c),c[3].assign(a),0===Y&&c[0].setCoordsPoint2D(m),1===D&&c[3].setCoordsPoint2D(l),i&&co(c);let d=!0;for(let t=1;t<4;t++)if(!c[t].isEqualPoint2D(c[0])){d=!1;break}d||(o&&o.push(u),r&&(0===Y&&t&&r.push(c[0].clone()),r.push(c[1].clone()),r.push(c[2].clone()),r.push(c[3].clone())),M++),Y=D,T.setCoordsPoint2D(A)}return M}function Jh(t,e,s,n,i,r,o,a){e.clone().dropAllAttributes();const h=new me;e.queryLooseEnvelope(h);const u=.05*h.calculateToleranceFromEnvelope(),m=Math.max(s,u);o&&t&&o.push(0);let l=0;const c=lt(Q,3);e.queryControlPoints(c);const g=[0,0,0];e.queryWeights(g);const d=[],_=U(9,Number.NaN);let p=e.getMonotonicPartParams(_.length,_);_.length=p,p=Zh(e,n,_);let f=0,P=t;for(let y=1;y<p;y++){const t=_[y];for(d.push(f),d.push(t);d.length>1;){const t=d.at(-1);d.pop();const e=d.at(-1),s=lt(Q,3);Qa(c,g,t,e,s,[0,0,0]);const n=lt(Q,3),i=Ji(s,g,n),a=16,h=d.length>a;m>=i||h?(o.push(e),r&&(P&&(r.push(n[0]),P=!1),r.push(n[1]),r.push(n[2])),l++):(d.push(.5*(t+e)),d.push(t))}f=t}return l}function Kh(t,e,s,n,i,r,o,a){e.clone().dropAllAttributes();const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;e.queryLooseEnvelope(h);const u=.05*h.calculateToleranceFromEnvelope(),m=Math.max(s,u);o&&t&&o.push(0);let l=0;const c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3);e.queryControlPoints(c);const g=[0,0,0];e.queryWeights(g);const d=[],_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(9,Number.NaN);let p=0;i?(p=e.getMonotonicPartParams(_.length,_),_.length=p,p=Zh(e,n,_)):(_.length=2,p=2,_[0]=0,_[1]=1);let f=0,P=t;for(let y=1;y<p;y++){const t=_[y];for(d.length=0,d.push(t),d.push(f);d.length>1;){const t=d.at(-1);d.pop();const e=d.at(-1),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),n=[0,0,0];Qa(c,g,t,e,s,n);const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,4),a=Ja(s,n,i),h=16,u=d.length>h;m>=a||u?(o.push(e),r&&(P&&(r.push(i[0]),P=!1),r.push(i[1]),r.push(i[2]),r.push(i[3])),l++):(d.push(.5*(t+e)),d.push(t))}f=t}return l}function $h(t,e,s,n,i,r,o,a){const h=e.clone();if(h.dropAllAttributes(),h.isDegenerateToLine()||0===h.getSweepAngle())return r&&(t&&r.push(e.getStartXY()),r.push(Q.getNAN()),r.push(e.getEndXY())),o&&(t&&o.push(0),o.push(1)),1;const u=h.getStartXY(),m=h.getEndXY(),l=h.getSemiAxes(),c=new le;if(h.isCircular())c.setIdentity();else{const t=h.getAxisXRotation();c.setScaleCoords(1,h.getMinorMajorRatio()),c.rotateAngle(t)}const g=h.getCenter();c.shift(g);const d=c.clone();d.invertThis(),h.applyTransformation(d);const _=me.constructEmpty();_.setCoords({center:g,width:2*l.x,height:2*l.x});const p=.05*_.calculateToleranceFromEnvelope(),f=Math.max(s/l.x,p/l.x),P=Math.sqrt(2*f+f*f);let y=2*Math.sqrt(2*P*(1+f-P));y=Math.min(y,Math.PI/2);const x=h.getSweepAngle(),C=Math.ceil(Math.abs(x)/y),v=Math.max(C,1);y=x/v;const b=1/v;let S=Math.tan(Math.abs(y)/2);x>0&&(S=-S),o&&t&&o.push(0);const E=new Q;h.queryCoord2D(0,E);for(let D=0;D<v;D++){const e=E.clone(),s=(D+1)*b;if(o&&o.push(s),!r)continue;h.queryCoord2D(s,E);const n=lt(Q,3);n[0].assign(e),n[2].assign(E),n[1].rightPerpendicularOther(n[0]),n[1].mulThis(S),n[1].addThis(n[0]),c.transformPoints2D(n,3,n),0===D&&n[0].setCoordsPoint2D(u),D===v-1&&n[2].setCoordsPoint2D(m),0===D&&t&&r.push(n[0]),r.push(n[1]),r.push(n[2])}return v}function tu(t,e,s,n,i,r,o,a){e.clone().dropAllAttributes();const h=new me;e.queryLooseEnvelope(h);const u=.05*h.calculateToleranceFromEnvelope(),m=Math.max(s,u);o&&t&&o.push(0);let l=0;const c=lt(Q,4);e.queryControlPoints(c);const g=[],d=U(9,Number.NaN);let _=e.getMonotonicPartParams(d.length,d);d.length=_,_=Zh(e,n,d);let p=0,f=t;for(let P=1;P<_;P++){const t=d[P];for(g.push(p),g.push(t);g.length>1;){const t=g.at(-1);g.pop();const e=g.at(-1),s=lt(Q,4);fo(c,t,e,s);const n=lt(Q,3),i=Qi(s,n),a=16,h=g.length>a;m>=i||h?(o.push(e),r&&(f&&(r.push(n[0]),f=!1),r.push(n[1]),r.push(n[2])),l++):(g.push(.5*(t+e)),g.push(t))}p=t}return l}function eu(){return{e2:0,completeE:0}}class su{constructor(t,e){this.m_arc=t,this.m_sqrChordLength=e}getMaxDerivative(){return 1}getValue(t,e){return 0===t?_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(this.m_arc.getCoord2D(e),this.m_arc.getCoord2D(1-e))-this.m_sqrChordLength:0}getError(t){return 0}}function nu(t,e,s){if(Su(t)){Cs(new pm({start:t.getStartXY(),end:t.getEndXY()}),e,s)}else if(0===e.value())s.set(t.getStartXY());else if(1===e.value())s.set(t.getEndXY());else{const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;gu(t,e,n);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.st_cosAndSin(n,i,r);const o=Ye.constructCoordsE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_semiMajorAxis).mulThisE(i),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio).mulThisE(r)),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_rotation);_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.st_cosAndSin(a,i,r),o.rotateDirect(i,r),o.addThisE(Ye.constructPoint2D(t.m_center)),s.setE(o)}}function iu(t,e){return t.convertToCanonic(e)}function ru(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(t.getStartAngle(),t.getEndAngle());s.normalize();const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)(),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.l)(e,n);if(i<s.vmin){let t=i+n;for(;t<s.vmin;)t+=n;return s.containsCoordinate(t)?t:s.vmin-i<t-s.vmax?i:t}if(i>s.vmax){let t=i-n;for(;t>s.vmax;)t-=n;return s.containsCoordinate(t)||s.vmin-t<i-s.vmax?t:i}return i}function ou(t,e,s,n){let i=t.m_startAngle,r=t.m_sweepAngle;const o=1e-12;for(;i>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();)i-=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;i<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();)i+=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();if(!Number.isNaN(e)){for(;e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();)e-=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();for(;e<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();)e+=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();!s&&e>i&&(e-=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()),s&&e<i&&(e+=2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()),r=e-i,Math.abs(r)<o&&!n&&(r=s?2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)():-2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()),Math.abs(r)>2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()-o&&n&&(r=0)}Math.abs(r)>2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()-o&&(r=r>=0?2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)():-2*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),t.setEndXY(t.getStartXY())),Math.abs(r)<o&&(r=0,t.setEndXY(t.getStartXY())),n=Math.abs(r)<=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)(),r&&(s=r>0),t.m_startAngle=au(i),t.m_sweepAngle=r,qu(t,!n),Nu(t,s)}function au(t){let e=t,s=!1;return e<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()?(e+=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)(),s=!0):e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()&&(e-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)(),s=!0),e<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()?(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.l)(e,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()),e<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()&&(e+=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()),s=!0):e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()&&(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.l)(e,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()),e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()&&(e-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()),s=!0),s&&(e>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()||e<=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)())&&(e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)()),e}function hu(t,e,s){const n=s,i=n.getSemiAxes();let r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(i.x*Math.cos(t[0]),i.y*Math.sin(t[0]));return r=n.convertFromCanonic(r),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(r,n.getStartXY())}function uu(t,e,s){const n=s,i=n.getSemiAxes(),r=t[0]+n.getStartAngle();let o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(i.x*Math.cos(r),i.y*Math.sin(r));return o=n.convertFromCanonic(o),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(o,n.getEndXY())}function mu(t){if(t.m_center.isNAN())return t.m_startAngle=0,void(t.m_sweepAngle=0);const e=t.getStartXY(),s=t.getEndXY(),n=e.equals(s),i=Fu(t),r=Xu(t),o=t.projectionBehavior();if(n){const s=t.convertToCanonic(e),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);s.x/=n.x,s.y/=n.y,t.m_startAngle=au(Math.atan2(s.y,s.x)),t.m_sweepAngle=i?r?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)():-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)():0}else{const n=t.convertToCanonic(e),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);n.x/=a.x,n.y/=a.y;const h=t.convertToCanonic(s);h.x/=a.x,h.y/=a.y,t.m_startAngle=Math.atan2(n.y,n.x),t.m_sweepAngle=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateAngle(n,h),r?t.m_sweepAngle<0&&(t.m_sweepAngle+=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()):t.m_sweepAngle>0&&(t.m_sweepAngle-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()),t.m_startAngle=au(t.m_startAngle);let u=hu([t.m_startAngle],1,t);if(u=Math.sqrt(u),u>.25*is(t)){const e=t.m_startAngle-1e-4,s=t.m_startAngle+1e-4,n=[0];rn(hu,t,1,[t.m_startAngle],[e],[s],1e-14,n),t.m_startAngle=au(n[0])}if(u=uu([t.m_sweepAngle],1,t),u=Math.sqrt(u),u>.25*is(t)){const e=t.m_sweepAngle-1e-4,s=t.m_sweepAngle+1e-4,n=[0];rn(uu,t,1,[t.m_sweepAngle],[e],[s],1e-14,n),t.m_sweepAngle=n[0]}const m=Math.abs(t.m_sweepAngle)>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();if(qu(t,m),i!==m&&!i&&Math.abs(t.m_sweepAngle)>1.5*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)())return void bu(t,e,s,o);if(0===t.m_sweepAngle||r!==t.m_sweepAngle>0)return void bu(t,e,s,o)}}function lu(t,e){return(ru(t,e)-t.getStartAngle())/t.getSweepAngle()}function cu(t,e){return t.m_startAngle+e*t.m_sweepAngle}function gu(t,e,s){s.assign(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_startAngle).addE(e.mulE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_sweepAngle))))}function du(t,e){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_cosr).sqrThis(),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_sinr).sqrThis(),i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_minorMajorRatio),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(1/t.m_minorMajorRatio),o=i.mulE(s).addThisE(r.mulE(n)),a=i.subE(r).mulThis(2*t.m_cosr*t.m_sinr),h=i.mulE(n).addThisE(r.mulE(s));e[0]=o,e[1]=a,e[2]=h,e[3]=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(-t.m_semiMajorAxis).mulThis(t.m_semiMajorAxis).mulThis(t.m_minorMajorRatio)}function _u(t,e){const s=new Ne;s.a11.setE(t[0]),s.a12=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.st_mulByPower2(t[1],.5),s.a21.setE(s.a12),s.a22.setE(t[2]);const n=[_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()],i=[new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H];s.eigenSymmetric(i,n);const r=t[3].clone();r.negateThis(),r.invThis(),i[0].mulThisE(r),i[1].mulThisE(r),i[0].sqrtThis().invThis(),i[1].sqrtThis().invThis(),e.x=i[0].toDouble(),e.y=i[1].toDouble();return Math.atan2(n[0].y,n[0].x)}function pu(t,e,s){if(Su(t))return(s-e)*_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),t.getEndXY());if(1===t.m_minorMajorRatio)return Math.abs(t.getSweepAngle()*(e-s))*t.m_semiMajorAxis;const n=Eu(t,e);return Eu(t,s)-n}function fu(t){return t.m_cachedValues}function Pu(t){if(t.m_cachedValues)return t.m_cachedValues;const e=eu();return e.e2=Cu(t),e.completeE=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.af)(e.e2),t.m_cachedValues=e,e}function yu(t,e,s,n){if(!e.isEqual(t.m_XStart,t.m_YStart)||!s.isEqual(t.m_XEnd,t.m_YEnd)){if(Su(t))return t.m_XStart=e.x,t.m_YStart=e.y,t.m_XEnd=s.x,t.m_YEnd=s.y,Hu(t),void t.afterCompletedModification();if(n&&Math.abs(t.getSweepAngle())<=1.01*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)()){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P,3),i=Bu(t,n);if(ja(n)){n[0].assign(e),n[2].assign(s),Ha(n);if(0===t.projectionBehavior()){let e=0,s=2;_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(n[1],n[0])<_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(n[1],n[2])&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e,e=s));const i=n[s].sub(n[e]),r=i.length();i.divThis(r);const o=n[1].sub(n[e]),a=o.length(),h=o.dotProduct(i)/a,u=o.crossProduct(i)/a,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(n[e],n[s],.5,m);const l=.5*r/u*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(1-h,0,1),c=n[1].side(n[e],n[s]),g=i.clone();c?g.leftPerpendicularThis():g.rightPerpendicularThis();const d=m.sub(g.mul(l));t.constructCircularArcThreePoint(n[0],n[2],d)}else ku(n,i*i,null,!1,t);return}}0===t.projectionBehavior()?nm(t,e,s):im(t,e,s)}}function xu(t,e,s){const n=0===t.projectionBehavior();if(s<=2)return void bu(t,e[0],e[s-1],n?0:1);if(n){t.constructCircularArcThreePoint(e[0],e[s-1],e[Math.trunc(s/2)]);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return t.queryCoord2D(.5,n),void t.m_interior.setCoordsPoint2D(n)}const i=t.getSemiMajorAxis(),r=t.getMinorMajorRatio(),o=t.getAxisXRotation(),a=t.getCenter(),h=new Array(4);h[0]=t.isMajor(),h[1]=!h[0],h[2]=h[0],h[3]=!h[0];const u=new Array(4);u[0]=t.isClockwise(),u[1]=u[0],u[2]=!u[0],u[3]=!u[0];const m=Math.trunc(s<5?1:(s+4)/5),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(Xh,4),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(4,Number.NaN);let g=0;for(let d=0;d<4;d++){l[d].constructEllipticArcEndPointsCenter(e[0],e[s-1],i,r,o,h[d],u[d],a),c[d]=0;let t=0;for(let n=m;n<s-1;n+=m){const s=l[d].getClosestCoordinate(e[n],!1);c[d]+=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(l[d].getCoord2D(s),e[n]),t++}c[d]/=t,c[d]<c[g]&&(g=d)}t.assignCopy(l[g])}function Cu(t){return 1-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(t.m_minorMajorRatio)}function vu(t,e,s,n,i,r,o,a,h){return t.m_bits=0,t.m_rotation=r,We(t,e),Ze(t,s),t.m_cosr=Math.cos(r),t.m_sinr=Math.sin(r),qu(t,o),Nu(t,a),void 0!==h?t.m_center.assign(h):t.m_center.setNAN(),t.setProjectionBehavior(1),t.m_semiMajorAxis=n,t.m_minorMajorRatio=i,zu(t,void 0===h)}function bu(t,e,s,n){t.m_bits=0,t.m_rotation=0,We(t,e),Ze(t,s),t.m_interior.assign(e.add(s).mul(.5)),t.m_startAngle=0,t.m_sweepAngle=0,t.m_cosr=1,t.m_sinr=0,qu(t,!1),Nu(t,!1),t.m_center.setNAN(),t.m_semiMajorAxis=1,t.m_minorMajorRatio=0,t.setProjectionBehavior(n),t.afterCompletedModification()}function Su(t){return t.m_center.isNAN()}function Eu(t,e){if(0===e)return 0;const s=Pu(t),n=cu(t,e),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)(),r=wu(t),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.aa)(n+i,s.e2,s.completeE),a=t.m_semiMajorAxis*(o-r);return Math.abs(a)}function Du(t,e){if(Su(t)){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),t.getEndXY());return 0===s?0:e/s}if(1===t.m_minorMajorRatio){const s=Math.abs(t.getSweepAngle()*t.m_semiMajorAxis);return 0===s?0:e/s}if(0===e)return 0;const s=t.getSweepAngle();if(0===s)return.5;const n=Pu(t),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)(),r=wu(t);s<0&&(e=-e);const o=e/t.m_semiMajorAxis+r;let a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ab)(o,n.e2,n.completeE);a-=i,a-=t.getStartAngle();return a/s}function wu(t){const e=Pu(t);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.aa)(t.getStartAngle()+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.T)(),e.e2,e.completeE)}function Au(t,e,n,i,r){if(2===e.m_TransformationType)return void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!Lu(t)),e.isIdentity()&&(!i||i.equals(t.getStartXY())&&r.equals(t.getEndXY())))return;Mu(t);let o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(null===i?(o.x=t.m_XStart,o.y=t.m_YStart,e.transformInPlace(o),a.x=t.m_XEnd,a.y=t.m_YEnd,e.transformInPlace(a)):(o=i,a=r),Su(t))return t.m_XStart=o.x,t.m_YStart=o.y,t.m_XEnd=a.x,void(t.m_YEnd=a.y);const h=t.m_center.clone();if(e.transformInPlace(h),n||e.isUniformNoRotation()){let s=Xu(t);e.isReflective()&&(s=!s);if(0===t.projectionBehavior()){if(!o.equals(a)){const s=t.m_interior.clone();return e.transformInPlace(s),void t.constructCircularArcThreePoint(o,a,s)}return void Tu(t,o,a,h,s,!1)}const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_cosr,t.m_sinr);e.transformWithoutTranslateInPlace(n);const i=Math.atan2(n.y,n.x),r=t.getSemiAxes();e.transformWithoutTranslateInPlace(r);const u=t.m_center.clone();return e.transformInPlace(u),void t.constructEllipticArcEndPointsCenter(o,a,r.x,r.y/r.x,i,t.isMajor(),s,u)}{{const s=new Array(4);du(t,s);const n=new Ne;n.a11.setE(s[0]),n.a12.setE(s[1]),n.a12.mulThisByPower2(.5),n.a21.setE(n.a12),n.a22.setE(s[2]);if(!n.det().isZero()){const i=new Ne;if(i.a11.set(e.xx),i.a12.set(e.xy),i.a21.set(e.yx),i.a22.set(e.yy),i.invertThis()){const r=i.clone();r.transposeThis();const u=n.clone();u.mulThis(i),u.mulLeftThis(r);if(!u.det().isZero()){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4);n[0].setE(u.a11),n[1].setE(u.a12),n[1].mulThisByPower2(2),n[2].setE(u.a22),n[3].setE(s[3]);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),r=_u(n,i);let m=Xu(t);return e.isReflective()&&(m=!m),void t.constructEllipticArcEndPointsCenter(o,a,i.x,i.y/i.x,r,t.isMajor(),m,h)}}}}const s=[_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN(),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN()];s[0].setCoords(t.getSemiMajorAxis(),0),s[0].rotateDirect(t.m_cosr,t.m_sinr),s[1].setCoords(t.getSemiMajorAxis(),t.getSemiMinorAxis()),s[1].rotateDirect(t.m_cosr,t.m_sinr),s[2].setCoords(0,t.getSemiMinorAxis()),s[2].rotateDirect(t.m_cosr,t.m_sinr);let n=t.isClockwise();n&&(s[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(s[0],s[0]=s[2]));const i=.5;e.transformWithoutTranslateArray(s,3,s),e.isReflective()&&(n=!n);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0),u=t.createInstance();ku(s,i,r,!1,u),t.constructEllipticArcEndPointsCenter(o,a,u.getSemiMajorAxis(),u.getMinorMajorRatio(),u.getAxisXRotation(),t.isMajor(),!n,h)}}function Tu(t,e,s,n,i,r){const o=.5*(n.sub(e).length()+n.sub(s).length());t.m_center.assign(n),t.m_startAngle=Math.atan2(e.y-t.m_center.y,e.x-t.m_center.x);ou(t,Math.atan2(s.y-t.m_center.y,s.x-t.m_center.x),i,r);const a=t.constructEllipticArcEndPointsCenter(e,s,o,1,0,Math.abs(t.m_sweepAngle)>Math.PI,t.m_sweepAngle>0,n);return t.setProjectionBehavior(0),a}function Iu(t,e){t.m_cachedValues=e}function Mu(t){t.m_cachedValues=null}function Yu(t,e){e.m_cachedValues=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(t.m_cachedValues,t.m_cachedValues=e.m_cachedValues)}function Nu(t,e){const s=e?1:0;t.m_bits=-2&t.m_bits|s}function Xu(t){return!!(1&t.m_bits)}function qu(t,e){const s=e?1:0;t.m_bits=-3&t.m_bits|s<<1}function Fu(t){return!!(2&t.m_bits)}function Vu(t){if(t.m_center.isNAN())return!1;const e=8,s=new Ye;s.setWithEps(t.getStartXY(),e),s.subThisE((new Ye).setWithEps(t.m_center,e));const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;n.setWithEps(t.m_rotation,e);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H.st_cosAndSin(n,i,r),s.rotateReverse(i,r);const o=new Ye;o.setWithEps(t.getEndXY()),o.subThisE(Ye.constructPoint2D(t.m_center)),o.rotateReverse(i,r);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;a.setWithEps(t.m_semiMajorAxis,e);const h=a.clone(),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;u.setWithEps(t.m_minorMajorRatio),h.mulThisE(u),s.x.divThisE(a),s.y.divThisE(h),o.x.divThisE(a),o.y.divThisE(h);const m=s.x.sqr().addThisE(s.y.sqr()).subThisE(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.I),l=o.x.sqr().addThisE(o.y.sqr()).subThisE(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.I);return!m.isZero()||!l.isZero()}function Lu(t){return!!(8&t.m_bits)}function Ru(t){t.m_bits&=-9}function zu(t,e){Ru(t);const n=t.getStartXY(),i=t.getEndXY();let r=!1;const o=Fu(t),a=Xu(t),h=t.projectionBehavior(),u=n.equals(i);let m=0===t.m_minorMajorRatio||0===t.m_semiMajorAxis;if(Number.isNaN(t.m_minorMajorRatio)&&(0===t.m_semiMajorAxis?t.m_minorMajorRatio=1:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.n)("NAN minor major ratio and non-zero major axis")),m||=e?u:t.m_center.isNAN(),m)return bu(t,n,i,h),!0;t.m_semiMajorAxis=Math.abs(t.m_semiMajorAxis),t.m_minorMajorRatio=Math.abs(t.m_minorMajorRatio),t.m_minorMajorRatio>1&&(t.m_semiMajorAxis*=t.m_minorMajorRatio,t.m_minorMajorRatio=1/t.m_minorMajorRatio);const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_semiMajorAxis,t.m_semiMajorAxis*t.m_minorMajorRatio);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(l.y>0&&l.x>=l.y),u){const e=t.convertToCanonic(n);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!l.isZero()),e.x/=l.x,e.y/=l.y;const i=Math.sqrt((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(e.x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(e.y));if(r=1!==i,t.m_semiMajorAxis*=i,l.mulThis(i),t.m_startAngle=au(Math.atan2(e.y,e.x)),!o)return t.m_interior.assign(n),t.m_sweepAngle=0,t.afterCompletedModification(),r;t.m_sweepAngle=a?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)():-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()}else{let e=t.m_center.isNAN()||Vu(t);if(!e){const s=t.convertToCanonic(n);s.x/=l.x,s.y/=l.y;const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(1,0);t.m_startAngle=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateAngle(r,s);const o=t.convertToCanonic(i);o.x/=l.x,o.y/=l.y,t.m_sweepAngle=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateAngle(s,o),e=!Wu(t)}if(e){r=!0;const e=n.sub(i).mulThis(.5);e.rotateReverse(t.m_cosr,t.m_sinr);let s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(e.x/l.x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(e.y/l.y);s>1&&(s=Math.sqrt(s),t.m_semiMajorAxis*=s,l.mulThis(s));const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(0,0);{const t=l.x*l.x,s=l.y*l.y,n=t*e.y*e.y+s*e.x*e.x,i=t*s-n;if(i>0){const t=Math.sqrt(i/n);h.setCoords(l.x*e.y/l.y,-l.y*e.x/l.x),h.mulThis(t),o===a&&h.negateThis()}}{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(h.x,h.y);e.rotateDirect(t.m_cosr,t.m_sinr),e.addThis(n.add(i).mulThis(.5)),t.m_center.assign(e)}}if(mu(t),!Wu(t))return bu(t,n,i,h),!0}return Hu(t),t.afterCompletedModification(),r}function Bu(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(Math.abs(t.getSweepAngle())<15*Math.PI/16);const n=t.getSemiMajorAxis(),i=t.getSemiMinorAxis();let r;if(0===n)return e[0].setCoordsPoint2D(t.getStartXY()),e[1].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getStartXY()),r=1,r;if(0===i)return e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1]=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(e[0],e[2],.5),r=1,r;const o=t.getSweepAngle(),a=t.getStartAngle(),h=a+o,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(-n*Math.sin(a),i*Math.cos(a)),m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(-n*Math.sin(h),i*Math.cos(h));u.normalize(),m.normalize(),u.rotateDirect(t.m_cosr,t.m_sinr),m.rotateDirect(t.m_cosr,t.m_sinr),e[0].setCoordsPoint2D(t.getStartXY()),e[2].setCoordsPoint2D(t.getEndXY()),e[1].setSub(e[2],e[0]);const l=u.crossProduct(m);e[1].assign(u.mul(e[1].crossProduct(m)/l)),e[1].addThis(e[0]);return r=Math.cos(.5*o),r}function ku(t,e,n,i,r){if(i){const s=.5,n=Math.sqrt(e),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(1-s)+2*n*s*(1-s)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(s),o=t[0].mul((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(1-s)).add(t[1].mul(2*n*s*(1-s))).add(t[2].mul((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(s))).divThis(i);return r.constructCircularArcThreePoint(t[0],t[2],o),!0}const o=t[0].sub(t[1]),a=t[2].sub(t[1]),h=o.crossProduct(a),u=o.dotProduct(a),m=e;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(m<=1),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(m>0);const l=.5/(1-m),c=o.sqrLength(),g=u,d=a.sqrLength(),_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(h),p=o.sub(a).sqrLength();if(0===_)return bu(r,t[0],t[2],1),!1;if(u<=-Math.sqrt(c)*Math.sqrt(d))return bu(r,t[0],t[2],1),!1;const f=[0,0],P=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E;P.setInfinite();const y=sn(2*_,-(p/m+4*g),2*(1-m)/m,P,!1,f);if(0===y)return bu(r,t[0],t[2],1),!1;1===y&&(f[1]=f[0]);const x=Math.sqrt(l/f[0]),C=Math.sqrt(l/f[1]),v=.5/m;let b=v-d*f[0],S=v-c*f[0];Math.abs(b)>Math.abs(S)?S=g*f[0]-v+1:b=g*f[0]-v+1;const E=o.mul(b).add(a.mul(S)),D=E.norm(1)<1e-15*x?0:Math.atan2(E.y,E.x)+Math.PI,w=o.add(a),A=n?n.clone():t[1].add(w.mul(l)),T=t[0].sub(A),I=t[2].sub(A),M=T.crossProduct(I)<0,Y=!1;new Xh;return r.constructEllipticArcEndPointsCenter(t[0],t[2],x,C/x,D,Y,!M,A)}function Gu(t,e,s,n,i){return ku(t,e,s,n,i)}function Wu(t){const e=is(t);let s=!1;{const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_semiMajorAxis*Math.cos(t.m_startAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle));n.rotateDirect(t.m_cosr,t.m_sinr),n.addThis(t.m_center);s=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getStartXY(),n)>e}let n=!1;if(!s){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P(t.m_semiMajorAxis*Math.cos(t.m_startAngle+t.m_sweepAngle),t.getSemiMinorAxis()*Math.sin(t.m_startAngle+t.m_sweepAngle));s.rotateDirect(t.m_cosr,t.m_sinr),s.addThis(t.m_center);n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getEndXY(),s)>e}return!s&&!n}function ju(t,s,n,i){0===n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("construct_enclosing_circle");const r=[0,0,0],o=Fh(s,n,r);if(1===o)t.constructCircleRadius(0,s[r[0]],i);else if(2===o){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.lerp(s[r[0]],s[r[1]],.5),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s[r[0]],e),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s[r[1]],e);t.constructCircleRadius(Math.max(n,o),e,i)}else if(3===o){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.calculateCircleCenterFromThreePoints(s[r[0]],s[r[1]],s[r[2]]),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s[r[0]],e),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s[r[1]],e),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s[r[2]],e);t.constructCircleRadius(Math.max(n,o,a),e,i)}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unexpected")}function Zu(t){if(Su(t))return 0;if(t.isDegenerate(0))return 0;const e=t.m_semiMajorAxis,s=t.getSemiMinorAxis(),n=e*e+s*s,i=t.getStartAngle(),r=t.getEndAngle(),o=t.m_center.y-t.m_YStart,a=t.m_cosr,h=t.m_sinr;let u=1,m=0;t.m_rotation&&(u=(a-h)*(a+h),m=2*a*h);const l=((-.5*(r-i)+.25*u*(2*Math.cos(r+i)*Math.sin(r-i)))*s+-2*Math.sin(.5*(r+i))*Math.sin(.5*(r-i))*a*o)*e/n;let c=0;if(t.m_rotation){c=.125*(-2*Math.sin(r+i)*Math.sin(r-i))*m-s*o/n*(2*Math.cos(.5*(r+i))*Math.sin(.5*(r-i)))*h}return n*(l+c)+-.5*(t.m_XEnd-t.m_XStart)*(t.m_YEnd-t.m_YStart)}function Hu(t){t.queryCoord2D(.5,t.m_interior)}function Uu(t,e,s,n,i){if(i){if(0!==am(e,s))return 2}else if(Le(e,s))return 1;return 0!==Qu(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function Ou(t,e,s,n,i){if(i){if(0!==am(e,s))return 2}else if(Le(e,s))return 1;return 0!==Ju(t,e,s,null,null,null,n,void 0!==i&&i,!0,!1)?4:0}function Qu(t,e,n,i,r,o,a,h,u,m){if(Su(e)){return Ds(new pm({start:e.getStartXY(),end:e.getEndXY()}),n,i,r,o,a,h,m)}null!==r&&(r.length=0),null!==o&&(o.length=0),null!==i&&(i.length=0);const l=rs(e,n);if(os(e,n,a=Math.max(l,a)))return 0;const c=n.getStartXY();c.subThis(e.m_center);const g=n.getEndXY();g.subThis(e.m_center),c.rotateReverse(e.m_cosr,e.m_sinr),g.rotateReverse(e.m_cosr,e.m_sinr);const d=g.clone();d.subThis(c);const _=e.m_semiMajorAxis,p=1/_,f=e.getSemiMinorAxis(),P=1/f,y=d.clone();y.leftPerpendicularThis();const x=Math.atan2(f*y.y,_*y.x),C=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(16,Number.NaN),v=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(16,Number.NaN);let b=0;const S=[x,x+Math.PI];for(let s=0;s<2;++s){const t=lu(e,S[s]);if(t>=0&&t<=1){C[b]=t;const s=e.getCoord2D(C[b]);v[b]=n.getClosestCoordinate(s,!1),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(s,n.getCoord2D(v[b]))<=a&&b++}}const E=c.x*p,D=c.y*P,w=d.x*p,A=d.y*P;let T=sn(w*w+A*A,2*(E*w+D*A),E*E+D*D-1,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.unit(),!1,v);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(T>=0);for(let s=0;s<T;s++){const t=d.mul(v[s]).add(c);t.x*=p,t.y*=P;const i=lu(e,Math.atan2(t.y,t.x));if(i>=0&&i<=1){C[b]=i;const t=e.getCoord2D(i);v[b]=n.getClosestCoordinate(t,!1),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t,n.getCoord2D(v[b]))<=a&&b++}}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(b<C.length+4);const I=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(16,Number.NaN);T=e.intersectPoint(n.getStartXY(),I,a);for(let s=0;s<T;s++,b++)C[b]=I[s],v[b]=0;T=e.intersectPoint(n.getEndXY(),I,a);for(let s=0;s<T;s++,b++)C[b]=I[s],v[b]=1;T=n.intersectPoint(e.getStartXY(),I,a);for(let s=0;s<T;s++,b++)C[b]=0,v[b]=I[s];T=n.intersectPoint(e.getEndXY(),I,a);for(let s=0;s<T;s++,b++)C[b]=1,v[b]=I[s];return 0===b?0:cm(t,e,n,C,v,b,i,r,o,a,h,u,m)}function Ju(t,e,n,i,r,o,a,h,u,m){if(Su(e)){const s=new pm({start:e.getStartXY(),end:e.getEndXY()});return Qu(t,n,s,i,o,r,a,h,u,!0)}if(Su(n)){const s=new pm({start:n.getStartXY(),end:n.getEndXY()});return Qu(t,e,s,i,r,o,a,h,u,m)}const l=rs(e,n);a=Math.max(a,l);let c=!1;{const t=e.getSemiAxes(),i=e.getCenter(),m=n.getSemiAxes(),l=n.getCenter(),g=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(l,i),d=t.x+m.x;if(g>d+a)return 0;if(t.y>m.x){if(g+m.x+a<t.y)return 0}else if(m.y>t.x&&g+t.x+a<m.y)return 0;if(u&&!h){const i=1===e.m_minorMajorRatio&&e.isClosed()&&e.isMajor(),a=1===n.m_minorMajorRatio&&n.isClosed()&&n.isMajor();if(i&&a&&(c=!0,g<=d)){if(Math.max(t.x,m.x)<=Math.min(t.x,m.x)+g)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!r&&!o),1}}}if(!c&&os(e,n,a))return 0;const g=[],d=[],_=!1,p=!1,f=Wh(e,0,0,_,p,g,d,null),P=[],y=[],x=Wh(n,0,0,_,p,P,y,null);if(1===f&&1===x){const t=new En({points:g,weights:d}),s=new En({points:P,weights:y}),l=[],c=[],_=rh(!1,t,s,i,null===r?null:l,null===o?null:c,a,h,u,m);if(_>0&&null!==r||null!==o){r&&(r.length=0),o&&(o.length=0);for(let i=0;i<_;++i){if(r)if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(l[i],0,1))r.push(l[i]);else{const s=t.tToLength(l[i]),n=e.lengthToT(s);r.push(n)}if(o)if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(c[i],0,1))o.push(c[i]);else{const t=s.tToLength(c[i]),e=n.lengthToT(t);o.push(e)}}}return _}let C=[];const v=[];let b=0;const S=u&&!h;for(let s=0;s<f;s++){const t=new En({points:g.slice(2*s,2*s+3),weights:d.slice(2*s,2*s+3)});let i=0;for(let r=0;r<x;r++){v.length<=r&&v.push(new En({points:P.slice(2*r,2*r+3),weights:y.slice(2*r,2*r+3)}));const o=[],h=[],u=S?null:o,m=S?null:h,l=rh(!1,t,v[r],null,u,m,a,!1,S,!1);if(l>0&&S)return 1;for(let a=0;a<l;++a){if(0===o[a]&&0===s)o[a]=0;else if(1===o[a]&&s===f-1)o[a]=1;else{const s=t.tToLength(o[a])+b,n=e.lengthToT(s);o[a]=n}if(0===h[a]&&0===r)h[a]=0;else if(1===h[a]&&r===x-1)h[a]=1;else{const t=v[r].tToLength(h[a])+i,e=n.lengthToT(t);h[a]=e}C.push((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.k)(o[a],h[a]))}i+=v[r].calculateLength2D()}b+=t.calculateLength2D()}if(0===C.length)return 0;if(h&&(C=C.filter((t=>!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(t.first,0,1)||!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(t.second,0,1)||!e.getCoord2D(t.first).equals(n.getCoord2D(t.second))))),u)return C.length;const E=[],D=[];for(const s of C)E.push(s.first),D.push(s.second);return cm(t,e,n,E,D,E.length,i,r,o,a,h,u,m)}function Ku(t,e,s){if(s.setCoords(t.getCoord2D(e.vmin)),s.mergeNe(t.getCoord2D(e.vmax)),Su(t))return;const n=t.getSemiAxes(),i=[0,0,0,0];{const e=Math.atan2(-n.y*t.m_sinr,n.x*t.m_cosr),s=e+Math.PI,r=Math.atan2(n.y*t.m_cosr,n.x*t.m_sinr),o=r+Math.PI;i[0]=lu(t,e),i[1]=lu(t,s),i[2]=lu(t,r),i[3]=lu(t,o)}const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;for(let o=0;o<4;o++){const n=i[o];e.containsExclusiveCoordinate(n)&&(t.queryCoord2D(n,r),s.mergeNe(r))}}function $u(t,e,n,i,r){if(0===t.m_semiMajorAxis)return n.vmin;let o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();t.queryCoord2D(n.vmin,o);let a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(t.queryCoord2D(n.vmax,a),Su(t)){return new pm({start:o,end:a}).getClosestCoordinate(e,i)}const h=iu(t,e);if(o=iu(t,o),a=iu(t,a),1===t.m_minorMajorRatio){if(h.isEqual(0,0))return n.vmin;const e=lu(t,Math.atan2(h.y,h.x));if(i||n.containsCoordinate(e))return e;return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(h,o)<=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(h,a)?n.vmin:n.vmax}const u=t.getSemiMajorAxis(),m=t.getSemiMinorAxis(),l=(u-m)*(u+m),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(l),g=h.x,d=h.y,_=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(m*d),p=m*l*d*2,f=[new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(_),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(p),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(c-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a)(u*g)-_),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(-p),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(-c)],P=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H,4),y=_n(f,4,new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(-1,1),!1,P,4);let x=n.vmin,C=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(h,o);{const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(h,a);t<C&&(x=n.vmax,C=t)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!i);let v=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(8,Number.NaN);for(let s=0;s<y;++s){const e=P[s].value(),n=Math.sqrt(1-e*e),i=Math.atan2(e,n),r=Math.atan2(e,-n);v[2*s]=lu(t,i),v[2*s+1]=lu(t,r)}v=v.slice(0,2*y),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.v)(v);for(let s=0,b=2*y;s<b;++s)if(v[s]>n.vmin&&v[s]<n.vmax){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,t.getCoord2D(v[s]));C>n&&(C=n,x=v[s])}return x}function tm(t,e,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!Su(t));const i=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;i.setRotateAngle(-t.getAxisXRotation());const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;i.queryTransform(e,r);const o=Math.atan2(-r.x*t.getMinorMajorRatio(),r.y),a=o+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.$)();let h=lu(t,o),u=lu(t,a);u<h&&(u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(h,h=u));let m=0;return h>=0&&h<=1&&(n[m++]=h),u>=0&&u<=1&&(n[m++]=u),m}function em(t,e,s){return t.m_semiMajorAxis===e.m_semiMajorAxis&&(t.isMajor()!==e.isMajor()&&(!!t.m_center.equals(e.m_center)&&(t.m_sinr===e.m_sinr&&(t.m_cosr===e.m_cosr&&(t.m_minorMajorRatio===e.m_minorMajorRatio&&(s?t.isClockwise()!==e.isClockwise():t.isClockwise()===e.isClockwise()))))))}function sm(t,e,s){if(Su(t))s.setE(Ye.constructPoint2D(t.getEndXY()).subE(Ye.constructPoint2D(t.getStartXY())));else{const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;gu(t,e,n);const i=new Ye;if(i.setCoordsE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_semiMajorAxis).negate().mulE((new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H).setSin(n)),new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.getSemiMinorAxis()).mulE((new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H).setCos(n))),t.m_rotation){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.m_rotation);i.rotateDirect((new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H).setCos(e),(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H).setSin(e))}i.scaleThis(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(t.getSweepAngle())),s.setE(i)}}function nm(t,e,s,n){const i=t.getStartXY(),r=t.getEndXY(),o=i.equals(r),a=e.equals(s);if(!o&&!a){const n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;n.setShiftCoords(-t.m_XStart,-t.m_YStart);const o=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,s),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(i,r),h=o/a;n.scale(h,h);const u=r.sub(i);u.divThis(a);const m=s.sub(e);m.divThis(o);const l=u.crossProduct(m),c=m.dotProduct(u);return n.rotate(c,l),n.shiftCoords(e.x,e.y),void Au(t,n,!0,e,s)}const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;if(t.queryCoord2D(.5,h),a){if(o){const n=t.m_center.add(e.sub(i));t.constructEllipticArcEndPointsCenter(e,s,t.getSemiMajorAxis(),1,0,!0,!t.isClockwise(),n),t.setProjectionBehavior(0)}else if(t.isMajor()){const n=h.sub(e).getUnitVector().mul(2*t.getSemiMajorAxis()).add(e);t.constructCircularArcThreePoint(e,s,n)}else t.constructCircularArcThreePoint(e,s,e);return}const u=e.add(s).mul(.5),m=s.sub(e);m.rightPerpendicularThis();const l=u.add(m),c=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getClosestCoordinate(u,l,t.getCenter(),!0),g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.U)(u,l,c,g);const d=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e,g);t.constructEllipticArcEndPointsCenter(e,s,d,1,0,!0,!t.isClockwise(),g),t.setProjectionBehavior(0)}function im(t,e,n,i){const r=t.getStartXY(),o=t.getEndXY(),a=r.equals(o),h=e.equals(n);if(!a&&!h){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T;return s.initializeFromTwoPoints(r,o,e,n),Au(t,s,!0,e,n),t.endPointModified(),void t.normalizeAfterEndpointChange()}if(!t.isMajor())return void bu(t,e,n,1);if(a&&h){const s=t.m_center.add(e.sub(r));return void t.constructEllipticArcEndPointsCenter(e,n,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),s)}if(!a){const s=.5*((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.a9)()-Math.abs(t.getSweepAngle())),i=(t.getSweepAngle()+s*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.e)(t.getSweepAngle()))/t.getSweepAngle(),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;t.queryCoord2D(i,r),t.constructEllipticArcEndPointsCenter(r,r,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.getCenter());const o=t.getCenter().add(e.sub(r));return void t.constructEllipticArcEndPointsCenter(e,n,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),o)}const u=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(e,n);let m=.25,l=.75;if(u<_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.sqrDistance(t.getCoord2D(.25),t.getCoord2D(.75))){const e=[0],n=tn(new su(t,u),_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.construct(0,.25),1,e);n>0&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===n),m=e[0],l=1-e[0])}const c=t.getCoord2D(m),g=t.getCoord2D(l);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!c.equals(g)),t.constructEllipticArcEndPointsCenter(c,g,t.getSemiMajorAxis(),t.getMinorMajorRatio(),t.getAxisXRotation(),!0,!t.isClockwise(),t.m_center),im(t,e,n)}function rm(t,e,s,n,i){return om(t,!1,e,s,n,i)}function om(t,e,s,n,r,o){const a=s.getGeometryType(),u=n.getGeometryType(),m=Math.max(r,rs(s,n));if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine&&u===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return Es(s,n,m,o);let l=s,c=n,g=s.getStartXY(),d=s.getEndXY();if(g.compare(d)>0&&(l=s.clone().reverse()),g=n.getStartXY(),d=n.getEndXY(),g.compare(d)>0&&(c=n.clone().reverse()),e){if(s.equals(n))return 2;if(Ge(s,n,m))return 4}switch(a){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:return Uu(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:return So(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:return $a(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:return Xi(t,c,l,m,o);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:return Uu(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:return Ou(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:return Eo(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:return th(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:return qi(t,c,l,m,o);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:return So(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:return Eo(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:return Do(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:return wo(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:return Ao(t,l,c,m,o);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:return $a(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:return th(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:return wo(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:return eh(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:return sh(t,l,c,m,o);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:return Xi(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:return qi(t,l,c,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:return Ao(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:return sh(t,c,l,m,o);case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:return Fi(t,l,c,m,o);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}}function am(t,e,s=!0){if(!s&&!hm(t,e))return 0;const n=t.isLine()&&e.isLine();if(t.getStartXY().equals(e.getStartXY())&&t.getEndXY().equals(e.getEndXY())){const s=1;if(n)return s;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier){const n=t,i=e;return n.getControlPoint1().equals(i.getControlPoint1())&&n.getControlPoint2().equals(i.getControlPoint2())?s:0}if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){return em(t,e,!1)?s:0}if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2){const n=t,i=e;if(n.getControlPoint1().equals(i.getControlPoint1())&&n.getStandardFormWeight()===i.getStandardFormWeight())return s}else if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2){const n=e;if(t.getControlPoint1().equals(n.getControlPoint1()))return s}return 0}if(t.getStartXY().equals(e.getEndXY())&&t.getEndXY().equals(e.getStartXY())){const s=-1;if(n)return s;const r=t.getGeometryType();if(r!==e.getGeometryType())return 0;if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier){const n=t,i=e;return n.getControlPoint1().equals(i.getControlPoint2())&&n.getControlPoint2().equals(i.getControlPoint1())?s:0}if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc){return em(t,e,!0)?s:-1}if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2){const n=t,i=e;if(n.getControlPoint1().equals(i.getControlPoint1())&&n.getStandardFormWeight()===i.getStandardFormWeight())return s}else if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2){const n=e;if(t.getControlPoint1().equals(n.getControlPoint1()))return s}return 0}return 0}function hm(t,e){const s=t.getGeometryType();return s===e.getGeometryType()&&(s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc||t.projectionBehavior()===e.projectionBehavior())}function um(t,s,n,r,o,a,u){!o&&a&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("");const m=s.getGeometryType(),l=n.getGeometryType(),c=Math.max(u,rs(s,n));if(r&&(r.length=0),o&&(o.length=0),a&&(a.length=0),m===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine&&l===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine)return Ds(s,n,r,o,a,c,!1,!1);let g=s,d=n,_=s.getStartXY(),p=s.getEndXY(),f=!1,P=!1;_.compare(p)>0&&(g=s.clone(!0).reverse(),f=!0),_=n.getStartXY(),p=n.getEndXY(),_.compare(p)>0&&(d=n.clone(!0).reverse(),P=!0);let y=0;switch(m){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:y=Qu(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:y=To(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:y=nh(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:y=Vi(t,d,g,r,a,o,c,!1,!1,!0);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:y=Qu(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:y=Ju(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:y=Io(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:y=ih(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:y=Li(t,d,g,r,a,o,c,!1,!1,!0);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:y=nh(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:y=ih(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:y=Yo(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:y=rh(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:y=oh(t,g,d,r,o,a,c,!1,!1,!1);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:y=Vi(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:y=Li(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:y=No(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:y=oh(t,d,g,r,a,o,c,!1,!1,!0);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:y=Ri(t,g,d,r,o,a,c,!1,!1,!1);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:y=To(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:y=Io(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:y=Mo(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:y=Yo(t,g,d,r,o,a,c,!1,!1,!1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:y=No(t,g,d,r,o,a,c,!1,!1,!1);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}if(f){if(o){for(let t=0;t<y;t++)o[t]=1-o[t];o.reverse()}r&&r.reverse(),a&&a.reverse()}if(P&&a)for(let e=0;e<y;e++)a[e]=1-a[e];return y}function mm(t,e,s){if(e===s)return 0;e>s&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.c)(e,e=s));return t.cut(e,s,!0).calculateUpperLength2D()}function lm(t,e,s,n,i){const r=[],o=[],a=[];for(let u=0,m=i;u<m;u++)r.push(t.calculateSubLengthFromStart(s[u])),o.push(e.calculateSubLengthFromStart(n[u])),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(s[u],0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n[u],0,1)&&t.getCoord2D(s[u]).equals(e.getCoord2D(n[u]))&&a.push(u);if(0===a.length||a.length===i)return;a.sort(((t,e)=>s[t]<s[e]?-1:s[t]>s[e]?1:n[t]<n[e]?-1:n[t]>n[e]?1:0));let h=-1;for(const u of a){if(h>=0&&s[u]===s[h]&&s[u]===s[h]){h=u;continue}h=u;const a=[];a.length=i;for(let t=0;t<a.length;++t)a[t]=t;a.sort(((t,e)=>{const s=r[u],n=o[u],i=r[t]-s,a=o[t]-n,h=i*i+a*a,m=r[e]-s,l=o[e]-n,c=m*m+l*l;return h<c?-1:h>c?1:0}));for(let r=0;r<i;r++){const i=a[r];if(i===u||s[i]===s[u]&&n[i]===n[u]||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(s[i],0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n[i],0,1))continue;const o=(s,n,i,r)=>{const o=new Ye,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;a.setWithEps(1);const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H;h.set(n,a.eps()),t.queryCoord2DE(h,o);const u=new Ye;t.queryCoord2DE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s),u);let m=!1;return o.eq(u)&&(h.set(r,a.eps()),e.queryCoord2DE(h,o),e.queryCoord2DE(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(i),u),m=o.eq(u)),!m},h=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();t.queryCoord2D(s[i],h);const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();e.queryCoord2D(n[i],m);if(0===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(h,m)&&o(s[u],s[i],n[u],n[i]))break;const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(n[i],n[u]);l.normalizeNoNAN();const c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E(s[i],s[u]);c.normalizeNoNAN();let g=-1,d=Number.POSITIVE_INFINITY,_=Number.POSITIVE_INFINITY,p=s[i];h.assign(t.getCoord2D(p));for(let r=0;r<5;r++){const r=e.getClosestCoordinateOnInterval(h,l,-1);m.assign(e.getCoord2D(r));const a=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(h,m);if(p=t.getClosestCoordinateOnInterval(m,c,-1),p===s[u]&&r===n[u]){g=1;break}h.assign(t.getCoord2D(p));const f=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(m,h);if(!(f<_&&a<d)){g=0;break}if(0===f&&0===a){o(s[u],s[i],n[u],n[i])?(s[i]=p,n[i]=r,g=0):g=1;break}_=f,d=a}if(-1===g&&(g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(s[i],0,1)||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n[i],0,1)?0:1),1!==g)break;s[i]=s[u],n[i]=n[u]}}}function cm(t,e,s,n,i,r,o,a,h,u,m,l,c){if(!r)return 0;const g=(t,e)=>{for(let s=0;s<r;++s){let n=e[s];if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n,0,1)){n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.ak)(n);continue}const i=t.getCoord2D(n);n<.5?i.equals(t.getStartXY())&&mm(t,0,n)<=is(t)&&(e[s]=0):i.equals(t.getEndXY())&&mm(t,n,1)<=is(t)&&(e[s]=1)}};g(e,n),g(s,i),lm(e,s,n,i,r);const d=[];for(let f=0,P=r;f<P;f++)d.push(f);const _=(t,e)=>c?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.al)(i[t],n[t],i[e],n[e]):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.al)(n[t],i[t],n[e],i[e]);if(d.length>1){d.sort(_);const t=Math.max(is(e),is(s));let r=0;for(let o=1,a=d.length;o<a;o++){const a=n[d[r]],h=n[d[o]],u=i[d[r]],m=i[d[o]];if(a!==h||u!==m)if(!(mm(e,a,h)<=t&&mm(s,u,m)<=t)||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(a,0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(u,0,1)||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(h,0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(m,0,1))r++,d[r]=d[o];else{const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e.getCoord2D(a),s.getCoord2D(u)),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e.getCoord2D(h),s.getCoord2D(m));if(t<=n)continue;if(n<t){d[r]=d[o];continue}}}if(d.length=r+1,1===d.length&&0!==d[0]&&(n[0]=n[d[0]],i[0]=i[d[0]],d[0]=0),d.length>2){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty(),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.E.constructEmpty();t.setCoords(n[d[0]],n[d.at(-1)]),r.setCoords(i[d[0]],i[d.at(-1)]);let o=!0;for(let e=1,s=d.length-1;e<s;e++)if(!t.containsCoordinate(n[d[e]])||!r.containsCoordinate(i[d[e]])){o=!1;break}if(o){const n=[.5,.2,.7,.1,.3,.4,.6,.8,.9];for(let i=0;i<n.length;i++){let a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(t.vmin,t.vmax,n[i]);const h=e.getCoord2D(a);if(!s.isCloserThanDistance(h,r,u)){o=!1;break}a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.q)(r.vmin,r.vmax,n[i]);const m=s.getCoord2D(a);if(!e.isCloserThanDistance(m,t,u)){o=!1;break}}}o&&(d[1]=d.at(-1),d.length=2)}}if(1===d.length&&t){const t=0,r=0;ke(e,s,n[0],i[0],u,1,[t],[r])&&(d.push(1),n[1]=t,i[1]=r,d.sort(_))}if(m&&1===d.length){let t=!0;for(let r=0,o=d.length;r<o;r++){if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n[d[r]],0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(i[d[r]],0,1)){if(0===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(e.getCoord2D(n[d[r]]),s.getCoord2D(i[d[r]])))continue}t=!1;break}if(t)return 0}let p=0;for(let f=0,P=d.length;f<P;f++){if(a&&a.push(n[d[f]]),h&&h.push(i[d[f]]),o){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();e.queryCoord2D(n[d[f]],t),o.push(t)}p++}return p}function gm(t,e,s,n,i,r,o,a,h){if((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(s,0,1)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.N)(n,0,1)){if(0===_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.distance(t.getCoord2D(s),e.getCoord2D(n))){const u=1e-12,m=new Ye,l=Number.EPSILON;if(t.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s,l),m),m.isTrueZero()){const e=1===s?-1e-12:u;t.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(s,l).add(e),m)}1===s&&m.negateThis();const c=new Ye;if(e.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(n,l),c),c.isTrueZero()){const t=1===s?-1e-12:u;e.queryDerivative(new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.H(n,l).add(t),c)}1===n&&c.negateThis(),m.isZero()||m.normalize(),c.isZero()||c.normalize();const g=m.dotProduct(c),d=m.crossProduct(c);d.scaleError(3);const _=()=>{if(h)return.001;{const s=t.calculateUpperLength2D(),n=e.calculateUpperLength2D();return Math.min(.01*i/Math.min(s,n),1e-10)}};if(g.ge(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.J)&&(d.isZero()||Math.abs(d.value())<_())){return Be(t,e,s,n,i,r,o,a)}}}return 0}function dm(t,e,n,i,r){let o=-1,a=-1,h=-1,u=-1;{const s=[0,e],r=[e,0],m=[0,i],l=[i,0];for(let e=0;e<2&&-1===o;++e)for(let i=0;i<2;++i)if(t[s[e]].equals(n[m[i]])){o=s[e],a=r[e],h=m[i],u=l[i];break}}if(-1===o){const s=new De;s.setFromPoints(t,e+1);const o=new De;return o.setFromPoints(n,i+1),o.inflate(r),s.isIntersectingW(o)?-1:0}{const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(e+1,Number.NaN),l=xr(t,e+1,m);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(l>1);let c=0,g=0;for(let t=0;t<l;++t)o===m[t]&&(g=t,c++),a===m[t]&&c++;if(2!==c)return-1;const d=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.d)(i+1,Number.NaN),_=xr(n,i+1,d);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(_>1),c=0;let p=0;for(let t=0;t<_;++t)h===d[t]&&(p=t,c++),u===d[t]&&c++;if(2!==c)return-1;const f=t[m[(g+l-1)%l]],P=t[m[(g+1)%l]],y=n[d[(p+_-1)%_]],x=n[d[(p+1)%_]],C=t[o],v=[f,P,y,x],b=[0,1,2,3];b.sort(((t,e)=>_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.compareVectorsOrigin(C,v[t],v[e])));let S=b[0];for(let t=1;t<4;t++){if(b[t]!==(S+1)%4)return-1;S=b[t]}{const t=f.sub(C),e=x.sub(C),s=e.dotProduct(t);if(s>0){const n=e.crossProduct(t),i=Math.abs(Math.atan2(n,s)),o=i*t.length(),a=i*e.length();if(o<=r||a<=r)return-1}}{const t=P.sub(C),e=y.sub(C),s=e.dotProduct(t);if(s>0){const n=e.crossProduct(t),i=Math.abs(Math.atan2(n,s)),o=i*t.length(),a=i*e.length();if(o<=r||a<=r)return-1}}return 1}}var _m=_Envelope_js__WEBPACK_IMPORTED_MODULE_1__.V;class pm extends ds{constructor(t){super(t||{XStart:0,YStart:0,XEnd:0,YEnd:0})}assignMove(t){return this!==t&&(this.m_description=t.m_description,t.m_description=null,this.m_attributes=t.m_attributes,t.m_attributes=null,this.m_XStart=t.m_XStart,t.m_XStart=Number.NaN,this.m_YStart=t.m_YStart,this.m_XEnd=t.m_XEnd,t.m_XEnd=Number.NaN,this.m_YEnd=t.m_YEnd),this}assignCopy(t){return this!==t&&t.copyTo(this),this}calculateLowerLength3D(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}calculateUpperLength3D(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}changeEndPoints3D(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getClosestCoordinate3D(t,e,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}getBoundary(){return Ks(this)}getAttributeAsDbl(t,e,s){if(0===e)return 0===s?fs(this,t):Ps(this,t);const n=_m.getInterpolation(e),i=this.getStartAttributeAsDbl(e,s),r=this.getEndAttributeAsDbl(e,s);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.V)(n,i,r,t,_m.getDefaultValue(e))}constructFromCoords(t,e,s,n){this.dropAllAttributes(),this.setStartXYCoords(t,e),this.setEndXYCoords(s,n)}construct(t,e){this.dropAllAttributes(),this.setStartXY(t),this.setEndXY(e)}construct3D(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}constructPoint(t,e){this.assignVertexDescription(t.getDescription()),this.mergeVertexDescription(e.getDescription()),this.setStart(t),this.setEnd(e)}getGeometryType(){return pm.type}queryEnvelope(t){if(4===t.m_EnvelopeType){t.setEmpty(),t.assignVertexDescription(this.m_description);const e=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();this.queryEnvelope(e),t.setEnvelope(e);for(let s=1,n=this.m_description.getAttributeCount();s<n;s++){const e=this.m_description.getSemantics(s);for(let n=0,i=_m.getComponentCount(e);s<i;s++){const s=this.queryInterval(e,n);t.setIntervalEnvelope(e,n,s)}}}else 2===t.m_EnvelopeType?t.setCoords({xmin:this.m_XStart,ymin:this.m_YStart,xmax:this.m_XEnd,ymax:this.m_YEnd}):3===t.m_EnvelopeType?(t.setEmpty(),t.mergeCoords(this.m_XStart,this.m_YStart,ts(this,0,1,0)),t.mergeCoords(this.m_XEnd,this.m_YEnd,ts(this,1,1,0))):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("env type not impl")}applyTransformation(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t instanceof _Transformation2D_js__WEBPACK_IMPORTED_MODULE_4__.T);const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;e.x=this.m_XStart,e.y=this.m_YStart,t.transformInPlace(e),this.m_XStart=e.x,this.m_YStart=e.y,e.x=this.m_XEnd,e.y=this.m_YEnd,t.transformInPlace(e),this.m_XEnd=e.x,this.m_YEnd=e.y}createInstance(){return new pm({vd:this.m_description})}calculateLength2D(){return Math.sqrt(Xs(this))}calculateLength3D(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}changeEndPoints2D(t,e){this.setStartXY(t),this.setEndXY(e),this.normalizeAfterEndpointChange()}queryControlPointsHelper(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.length>=2),t[0]=this.getStartXY(),t[1]=this.getEndXY(),2}queryCoord2D(t,e){return _s(this,t,e)}queryCoord3D(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}getCoordZ(t){return ys(this,t)}queryCoord2DE(t,e){Cs(this,t,e)}queryCoord2DMP(t,e){e.assignPoint2D(this.getStartXY());const s=Xe.constructPoint2D(this.getEndXY());s.subThis(e),s.mulThis(_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.M.constructDouble(t)),e.addThis(s)}getCoordX(t){return fs(this,t)}getCoordY(t){return Ps(this,t)}cut(t,e,s){const n=new fm;return this.queryCut(t,e,n,s),n.releaseSegment()}queryCut(t,e,s,n){const i=s.createLine();n&&i.assignVertexDescription(this.m_description);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();if(_s(this,t,r),i.setStartXYCoords(r.x,r.y),_s(this,e,r),i.setEndXYCoords(r.x,r.y),!n)for(let o=1,a=this.m_description.getAttributeCount();o<a;o++){const s=this.m_description.getSemantics(o),n=_m.getComponentCount(s);for(let r=0;r<n;r++){const n=this.getAttributeAsDbl(t,s,r);i.setStartAttribute(s,r,n);const o=this.getAttributeAsDbl(e,s,r);i.setEndAttribute(s,r,o)}}}queryDerivative(t,e){xs(this,t,e)}getClosestCoordinate(t,e){return _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getClosestCoordinate(this.getStartXY(),this.getEndXY(),t,e)}getClosestCoordinateOnInterval(t,e,s=-1){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(e.vmin,n);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;this.queryCoord2D(e.vmax,i);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getClosestCoordinate(n,i,t,!1);return us.recalculateParentT(e.vmin,e.vmax,r)}intersectionOfYMonotonicWithAxisX(t,e){const s=this.m_YEnd-this.m_YStart;if(!s)return t===this.m_YEnd?e:Number.NaN;const n=(t-this.m_YStart)/s;let i=fs(this,n);return 1===n&&(i=this.m_XEnd),i}isCurve(){return!1}isMonotoneQuickAndDirty(){return!0}isDegenerate(t){const e=this.m_XStart-this.m_XEnd,s=this.m_YStart-this.m_YEnd;return Math.sqrt(e*e+s*s)<=t}isDegenerate3D(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}queryLooseEnvelope(t){this.queryEnvelope(t)}clone(t){const e=new pm;return this.copyTo(e),e}tToLength(t){return t*this.calculateLength2D()}lengthToT(t){const e=this.calculateLength2D();return 0!==e?t/e:0}calculateWeightedAreaCentroid2D(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return e.setCoords(0,0),e}calculateWeightedCentroid2D(){return this.getCoord2D(.5).mul(this.calculateLength2D())}getTangent(t){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P.getNAN();return e.setSub(this.getEndXY(),this.getStartXY()),e}getDerivative(t){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return e.setSub(this.getEndXY(),this.getStartXY()),e}getCurvature(t){return 0}isIntersectingPoint(t,e,s){return Is(this,t,e,s)>=0}isIntersectingPoint3D(t,e,n,i,r=1){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}getYMonotonicParts(t,e){return 0}getMonotonicParts(t,e){return 0}getMonotonicPartParams(t,s){return s&&(t<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)(""),s[0]=0,s[1]=1),2}intersectionWithAxis2D(t,e,s,n){if(t){const t=this.m_YEnd-this.m_YStart;if(!t)return e===this.m_YEnd?-1:0;const i=(e-this.m_YStart)/t;return i<0||i>1?0:(s&&(s[0]=fs(this,i)),n&&(n[0]=i),1)}{const t=this.m_XEnd-this.m_XStart;if(!t)return e===this.m_XEnd?-1:0;const i=(e-this.m_XStart)/t;return i<0||i>1?0:(s&&(s[0]=Ps(this,i)),n&&(n[0]=i),1)}}calculateUpperLength2D(){return this.calculateLength2D()}calculateLowerLength2D(){return this.calculateLength2D()}normalizeAfterEndpointChange(){return!1}queryLooseEnvelopeOnInterval(t,e){if(2===e.m_EnvelopeType){let s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(t.vmin,0,1);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_2__.P;return this.queryCoord2D(s,n),e.setCoords({pt:n}),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_2__.s)(t.vmax,0,1),this.queryCoord2D(s,n),void e.mergeNe(n)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("3d dst not impl")}orientBottomUp(){Ss(this)}isLine(){return!0}isDegenerateToLineHelper(t){return!0}copyIgnoreAttributes(t){t.setStartXY(this.getStartXY()),t.setEndXY(this.getEndXY()),t.normalizeAfterEndpointChange()}calculateArea2DHelper(){return 0}absNormXYZ(t){return bs(this,t)}absNorm(){return this.getStartXY().norm(1)+this.getEndXY().norm(1)}queryEnvelopeW(t,e){e.setCoords(this.getCoord2D(t.vmin)),e.mergeNe(this.getCoord2D(t.vmax))}setSegmentFromCoordsForStitcher(t,e){vs(this,t[0],t[e-1])}writeInBufferStream(t,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}readFromBufferStream(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}snapControlPoints(t){return!1}needsSnapControlPoints(t){return!1}calculateSpecialPointsForCracking(t,e){return 0}ensureXYMonotone(){return!1}setCoordsForIntersector(t,e,s){vs(this,t,e)}static isIntersectingLineLine(t,e,s,n){return Es(t,e,s,n)}static isIntersectingLineLine_(t,e,s,n){return Es(t,e,s,n)}copyToImpl(t){}reverseImpl(){}equalsImpl(t){return!0}equalsImplTol(t,e){return!0}swapImpl(t){}afterCompletedModification(){}endPointModified(){}clearEndPointModified(){}intersect(t,e,s,n,i){return um(!1,this,t,e,s,n,i)}intersectPoint(t,e,s){e.length<1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("");const i=Is(this,t,s,!1);return i>=0?(e&&(e[0]=i),1):0}isIntersecting(t,e,s){return 0!==rm(!1,this,t,e,s)}}pm.type=_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine;class fm{constructor(t){this.m_seg=null,this.m_curves=null,this.m_lineBuffer=new pm,this.m_mask=0,this.m_active=0,void 0!==t&&(t.copy?t.copy.copyTo(this,!1):t.move?this.assignMove(t.move):t.segment?this.copyFrom(t.segment,!!t.bIgnoreAttributes):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("bad constructor params"))}assignCopy(t){return t instanceof fm?this!==t&&t.copyTo(this,!1):this.copyFrom(t,!1),this}assignMove(t){if(t instanceof fm){if(this===t)return this;this.reset(),1&t.m_mask&&(this.m_lineBuffer=t.m_lineBuffer,t.m_lineBuffer=null,this.m_mask=1),this.m_curves=t.m_curves,this.m_mask=t.m_mask,this.m_active=t.m_active,t.reset(),this.m_seg=this.activeSegment(),t.m_seg=null}else{if(this.m_seg===t)return this;this.create(t.getGeometryType()),this.m_seg.swap(t)}return this}activeSegment(){switch(this.m_active){case 0:return null;case 1:return this.line();case 2:return this.arc();case 4:return this.bezier3();case 8:return this.bezier2();case 16:return this.rbezier2();default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("")}}get(){return this.m_seg}reset(){1&this.m_mask&&(this.m_lineBuffer=null),this.m_mask>1&&(this.m_curves=null),this.m_mask=0,this.m_active=0}empty(){return null===this.m_seg}copyTo(t,e){this!==t&&(this.empty()?t.m_seg=null:t.copyFrom(this.m_seg,e))}copyToWithZ(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}createImpl(t){switch(t){case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine:1&this.m_mask||(this.m_lineBuffer=new pm,this.m_mask|=1,this.m_active=1);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc:2&this.m_mask||(this.m_curves=new Xh,this.m_mask=1&this.m_mask|2,this.m_active=2);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier:4&this.m_mask||(this.m_curves=new ia,this.m_mask=1&this.m_mask|4,this.m_active=4);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2:8&this.m_mask||(this.m_curves=new wn,this.m_mask=1&this.m_mask|8,this.m_active=8);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2:16&this.m_mask||(this.m_curves=new En,this.m_mask=1&this.m_mask|16,this.m_active=16);break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("")}}create(t){t===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine?this.createLine():t===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc?this.createEllipticArc():t===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier?this.createCubicBezier():t===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2?this.createQuadraticRationalBezier():t===_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2?this.createQuadraticBezier():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("Segment_buffer.create")}copyFrom(t,e){this.m_seg!==t&&(this.create(t.getGeometryType()),e?t.copyIgnoreAttributes(this.m_seg):t.copyTo(this.m_seg))}copyFromWithZ(t,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}line(){return this.m_lineBuffer}arc(){return this.m_curves}bezier3(){return this.m_curves}bezier2(){return this.m_curves}rbezier2(){return this.m_curves}createLine(){return this.createImpl(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumLine),this.m_seg=this.line(),this.line()}createEllipticArc(){return this.createImpl(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc),this.m_seg=this.arc(),this.arc()}createCubicBezier(){return this.createImpl(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier),this.m_seg=this.bezier3(),this.bezier3()}createQuadraticRationalBezier(){return this.createImpl(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2),this.m_seg=this.rbezier2(),this.rbezier2()}createQuadraticBezier(){return this.createImpl(_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2),this.m_seg=this.bezier2(),this.bezier2()}releaseSegment(){if(this.m_seg=null,0===this.m_active&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("releaseSegment"),1&this.m_active){const t=this.line();return this.m_mask-=1,this.m_active=0,this.m_lineBuffer=null,t}let t;return 2&this.m_active?t=this.arc():4&this.m_active?t=this.bezier3():8&this.m_active?t=this.bezier2():16&this.m_active?t=this.rbezier2():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("releaseSegment"),this.m_mask-=this.m_active,this.m_active=0,this.m_curves=null,t}equals(t){return t instanceof fm?this===t||(this.empty()?t.empty():!t.empty()&&this.get().equals(t.get())):((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("seg comparison not yet impl"),!1)}}


/***/ }),

/***/ 80690:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ I),
/* harmony export */   a: () => (/* binding */ d),
/* harmony export */   c: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50256);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _Envelope_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(75992);
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21566);
/* harmony import */ var _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74642);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(86330);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function f(e,t,s,i,n){return v(e,t,null,s,i,n)}function v(e,s,o,x,p,c){const l=e.getGeometryType();if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const t=e.getXY();return s.contains(t)?e:e.createInstance()}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();if(e.queryEnvelope(t),t.intersect(s)){const s=e.clone();return s.setEnvelope(t),s}return e.createInstance()}if(e.isEmpty())return e;if(s.isEmpty())return e.createInstance();const _=s.clone();{const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;if(e.queryLooseEnvelope(t),_.containsEnvelope(t))return e;if(!_.isIntersecting(t))return e.createInstance();0===p&&(t.intersect(_),t.inflate(Math.max(.1*t.maxDimension(),1)),t.intersect(_),_.assign(t))}let u=x;if((null!==o||Number.isNaN(u))&&(u=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_2__.c)(o,_,!1).total()),l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection){const t=e,s=e.createInstance();for(let e=0,i=t.getGeometryCount();e<i;e++){const i=t.getGeometry(e);if(i.isEmpty())continue;const n=f(i,_,u,p,c);n.isEmpty()||(n===i?s.addGeometry(n.clone()):s.addGeometry(n))}return s}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(l)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Clip: geometry not supported");const g=e.getImpl().getAccelerators();if(null!==g){const e=g.getRasterizedGeometry();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null===e)}switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:{const t=e;let s;const i=t.getPointCount(),n=t.getImpl().getAttributeStreamRef(0);let h=0;for(let e=0;e<i;e++){const i=n.readPoint2D(2*e);_.contains(i)||(0===h&&(s=t.createInstance()),h<e&&s.addPoints(t,h,e),h=e+1)}return h>0&&s.addPoints(t,h,i),0===h?t:((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==s),s)}case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:return P(e,_,u,p,c);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}}function d(e,t,s,i,n,r){const h=new E(t,r),m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D;return e.queryLooseEnvelope(m),t.containsEnvelope(m)?e:t.isIntersecting(m)?h.clipPolesOut(e,n):e.createInstance()}function P(e,t,s,i,n){return new E(t,n).clipMultiPath2(e,s,i)}class E{constructor(e,t){this.m_shape=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.E,this.m_geometry=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n,this.m_verticesOnExtentIndex=-1,this.m_verticesOnExtent=[],this.m_progressCounter=0,this.m_extent=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D(e),this.m_progressTracker=t}progress_(){}clipMultiPath2(e,t,s){return e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?this.clipPolygonOrProjectedPolyline2(e,s):this.clipPolyline(e,t)}clipPolygonOrProjectedPolyline2(e,t){const s=e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline;if(0===this.m_extent.width()||0===this.m_extent.height())return e.createInstance();const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();e.queryLooseEnvelope(n),this.m_geometry=s?this.m_shape.addGeometry(e):this.m_shape.addGeometry(e,this.m_extent);const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.d)(9,Number.NaN),y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.d)(9,Number.NaN),f=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,9);let v=null;const d=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.L,P=[];let I=!1;for(let i=0;!I&&i<4;i++){let e=!1;const t=!!(1&i);let a=0;switch(i){case 0:a=this.m_extent.xmin,e=n.xmin<=a&&n.xmax>=a;break;case 1:a=this.m_extent.ymin,e=n.ymin<=a&&n.ymax>=a;break;case 2:a=this.m_extent.xmax,e=n.xmin<=a&&n.xmax>=a;break;case 3:a=this.m_extent.ymax,e=n.ymin<=a&&n.ymax>=a}if(e){I=!0;for(let e=this.m_shape.getFirstPath(this.m_geometry);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;){let n=!0,p=-1,l=-1;const _=this.m_shape.getFirstVertex(e);let u=_;do{this.progress_(),v=this.m_shape.getSegment(u);let e=v;if(null===e){const t=this.m_shape.getNextVertex(u);if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s),0===p&&P.push(u);break}this.m_shape.queryXY(u,o),d.setStartXY(o),this.m_shape.queryXY(t,c),d.setEndXY(c),e=d}e.queryLooseEnvelope(h);let _=E.checkSegmentIntersection(h,i,a);e.isCurve()&&0===_&&e.isCurve()&&(d.setStartXY(e.getStartXY()),d.setEndXY(e.getEndXY()),this.m_shape.replaceCurveWithLine(u),e=d,d.queryEnvelope(h),_=E.checkSegmentIntersection(h,i,a));let V=0,X=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;if(-1===_){const s=e.intersectionWithAxis2D(t,a,g,y);if(s>0){let i=null;if(e.isCurve()){i=f,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s<=9);for(let e=0;e<s;e++)t?f[e].setCoords(g[e],a):f[e].setCoords(a,g[e]);V=this.m_shape.splitSegmentAxisAware(u,y,s,i,t?1:0)}else V=this.m_shape.splitSegmentAxisAware(u,y,s,null,-1)}else V=0;V+=1;let h=u,x=this.m_shape.getNextVertex(h);e=null;for(let e=0;e<V;e++){this.m_shape.queryXY(h,o),this.m_shape.queryXY(x,c),v=this.m_shape.getSegment(h);let e=v;null===e&&(d.setStartXY(o),d.setEndXY(c),e=d),e.queryEnvelope(m);let s=E.checkSegmentIntersection(m,i,a);if(e.isCurve()&&0===s&&(this.m_shape.replaceCurveWithLine(h),d.setStartXY(o),d.setEndXY(c),e=d,e.queryEnvelope(m),s=E.checkSegmentIntersection(m,i,a)),-1===s){if(t){Math.abs(o.y-a)<Math.abs(c.y-a)?(o.y=a,this.m_shape.setXY(h,o)):(c.y=a,this.m_shape.setXY(x,c))}else{Math.abs(o.x-a)<Math.abs(c.x-a)?(o.x=a,this.m_shape.setXY(h,o)):(c.x=a,this.m_shape.setXY(x,c))}v=this.m_shape.getSegment(h),e=v,null===e&&(d.setStartXY(o),d.setEndXY(c),e=d),e.queryEnvelope(m),s=E.checkSegmentIntersection(m,i,a),-1===s&&(s=E.checkSegmentIntersectionLoose(m,i,a))}const r=p;p=s,-1===l&&(l=p),0===r&&1===p||1===r&&0===p||0===r&&0===p&&P.push(h),1===p&&(I=!1,n=!1),h=x,X=h,x=this.m_shape.getNextVertex(x)}}if(0===V){const e=p;p=_,-1===l&&(l=p),0===e&&p>=1||e>=1&&0===p||0===e&&0===p&&P.push(u),1===p&&(I=!1,n=!1),X=this.m_shape.getNextVertex(u)}if(u=X,P.length>=256){for(let e=1,t=P.length-1;e<t;e++){const t=P[e];s?this.m_shape.snapVertexForPoleClipping(t,a):this.m_shape.removeVertex(t,!1)}P[1]=P.at(-1),P.length=2}}while(u!==_);if(!n){0!==l||!s&&0!==p&&2!==p||P.push(_);for(let e=0,t=P.length;e<t;e++){const t=P[e];s?this.m_shape.snapVertexForPoleClipping(t,a):this.m_shape.removeVertex(t,!1)}}P.length=0,e=n||0===this.m_shape.getPathSize(e)?this.m_shape.removePath(e):this.m_shape.getNextPath(e)}}}if(I)return e.createInstance();v=null,s?this.removeSpikesAlongPoles():this.resolveBoundaryOverlaps(),t>0&&this.densifyAlongClipExtent(t);const V=this.m_shape.getGeometry(this.m_geometry);if(V.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){V.setFillRule(e.getFillRule())}return V}clipPolyline(e,t){const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty(),n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.d)(9,Number.NaN),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.d)(9,Number.NaN),h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.S;let m=e;const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_3__.Envelope2D.constructEmpty();e.queryLooseEnvelope(o);for(let a=0;a<4;a++){let t=!1;const x=!!(1&a);let p=0;switch(a){case 0:p=this.m_extent.xmin,t=o.xmin<=p&&o.xmax>=p;break;case 1:p=this.m_extent.ymin,t=o.ymin<=p&&o.ymax>=p;break;case 2:p=this.m_extent.xmax,t=o.xmin<=p&&o.xmax>=p;break;case 3:p=this.m_extent.ymax,t=o.ymin<=p&&o.ymax>=p}if(!t)continue;const c=m;m=e.createInstance();const l=c.getImpl().querySegmentIterator();l.resetToFirstPath();const _=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;for(;l.nextPath();){let e=-1,t=!0;for(;l.hasNextSegment();){this.progress_();const o=l.nextSegment(),c=o.isDegenerate(0);o.queryLooseEnvelope(s);const u=E.checkSegmentIntersection(s,a,p);if(-1===u){const s=o.intersectionWithAxis2D(x,p,n,r);let l=0;_.assign(o.getStartXY());for(let u=0;u<=s;u++){const y=u<s?r[u]:1;if(l===y)continue;o.queryCut(l,y,h,!1);const f=h.get();let v=!1;if(f.getStartXY().equals(_)||(f.setStartXY(_),v=!0),u<s&&(x?(g.x=n[u],g.y=p):(g.x=p,g.y=n[u]),f.getEndXY().equals(g)||(f.setEndXY(g),v=!0)),v&&f.normalizeAfterEndpointChange(),!c&&f.isDegenerate(0))continue;f.queryEnvelope(i);let d=E.checkSegmentIntersection(i,a,p);if(-1===d){const e=f.getStartXY(),t=f.getEndXY();if(v=!1,x){Math.abs(e.y-p)<Math.abs(t.y-p)?(e.y=p,f.setStartXY(e),e.equals(f.getStartXY())||(f.setStartXY(e),v=!0)):(t.y=p,t.equals(f.getEndXY())||(f.setEndXY(t),v=!0))}else{Math.abs(e.x-p)<Math.abs(t.x-p)?(e.x=p,e.equals(f.getStartXY())||(f.setStartXY(e),v=!0)):(t.x=p,t.equals(f.getEndXY())||(f.setEndXY(t),v=!0))}v&&f.normalizeAfterEndpointChange(),f.queryEnvelope(i),d=E.checkSegmentIntersection(i,a,p),-1===d&&(d=E.checkSegmentIntersectionLoose(i,a,p))}_.assign(f.getEndXY()),l=y,e=d,e>=1?(m.addSegment(f,t),t=!1):t=!0}}else e=u,e>=1?(m.addSegment(o,t),t=!1):t=!0}}}return m}static checkSegmentIntersection(e,t,s){switch(t){case 0:return e.xmin<s&&e.xmax<=s?0:e.xmin>=s?e.xmax===s?2:1:-1;case 1:return e.ymin<s&&e.ymax<=s?0:e.ymin>=s?e.ymax===s?2:1:-1;case 2:return e.xmin>=s&&e.xmax>s?0:e.xmax<=s?e.xmin===s?2:1:-1;case 3:return e.ymin>=s&&e.ymax>s?0:e.ymax<=s?e.ymin===s?2:1:-1}return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),0}static checkSegmentIntersectionLoose(e,t,s){switch(t){case 0:{const t=Math.abs(e.xmin-s),i=Math.abs(e.xmax-s);return e.xmin<s?t>i?0:1:((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),1)}case 1:{const t=Math.abs(e.ymin-s),i=Math.abs(e.ymax-s);return e.ymin<s?t>i?0:1:((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),1)}case 2:{const t=Math.abs(e.xmin-s),i=Math.abs(e.xmax-s);return e.xmax>s?t<i?0:1:((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),1)}case 3:{const t=Math.abs(e.ymin-s),i=Math.abs(e.ymax-s);return e.ymax>s?t<i?0:1:((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),1)}}return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),0}resolveBoundaryOverlaps(){this.m_verticesOnExtentIndex=-1,this.splitSegments(!1,this.m_extent.xmin),this.splitSegments(!1,this.m_extent.xmax),this.splitSegments(!0,this.m_extent.ymin),this.splitSegments(!0,this.m_extent.ymax),this.m_verticesOnExtent.length=0,this.m_verticesOnExtentIndex=this.m_shape.createUserIndex();const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;for(let t=this.m_shape.getFirstPath(this.m_geometry);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;t=this.m_shape.getNextPath(t)){let s=this.m_shape.getFirstVertex(t);for(let i=0,n=this.m_shape.getPathSize(t);i<n;i++,s=this.m_shape.getNextVertex(s))this.progress_(),this.m_shape.queryXY(s,e),this.m_extent.xmin!==e.x&&this.m_extent.xmax!==e.x&&this.m_extent.ymin!==e.y&&this.m_extent.ymax!==e.y||(this.m_shape.setUserIndex(s,this.m_verticesOnExtentIndex,this.m_verticesOnExtent.length),this.m_verticesOnExtent.push(s))}this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmin),this.dbgCheckPathFirst(),this.resolveOverlaps(!1,this.m_extent.xmax),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymin),this.dbgCheckPathFirst(),this.resolveOverlaps(!0,this.m_extent.ymax),this.fixPaths()}densifyAlongClipExtent(e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P(0,0),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P(0,0),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.d)(2048,Number.NaN);for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;n=this.m_shape.getNextPath(n)){const m=this.m_shape.getFirstVertex(n);let a=m;do{const n=this.m_shape.getNextVertex(a);this.m_shape.queryXY(a,t);let m=-1;if(t.x===this.m_extent.xmin?(this.m_shape.queryXY(n,s),s.x===this.m_extent.xmin&&(m=1)):t.x===this.m_extent.xmax&&(this.m_shape.queryXY(n,s),s.x===this.m_extent.xmax&&(m=1)),t.y===this.m_extent.ymin?(this.m_shape.queryXY(n,s),s.y===this.m_extent.ymin&&(m=0)):t.y===this.m_extent.ymax&&(this.m_shape.queryXY(n,s),s.y===this.m_extent.ymax&&(m=0)),-1===m){a=n;continue}if(this.isCurve(a)){a=n;continue}const o=t.clone(),x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P(0,0);if(m){const i=t.y-this.m_extent.ymin;x.y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.y-t.y),o.y=e*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.f)(Math.floor(Math.abs(i)/e),i)+this.m_extent.ymin,x.y<0&&(o.y+=e)}else{const i=t.x-this.m_extent.xmin;x.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.x-t.x),o.x=e*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.f)(Math.floor(Math.abs(i)/e),i)+this.m_extent.xmin,x.x<0&&(o.x+=e)}const p=m?s.y-t.y:s.x-t.x,c=Math.abs(p);if(c/e>65536&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),c>0){const s=Math.trunc(c/e)+2;i.length<s&&(i.length=s);let n=0;for(let h=0;;h++){const s=o.add(x.mul(h*e)),a=(m?s.y-t.y:s.x-t.x)/p;if(a>=1)break;a<=0||((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n<=i.length),i[n]=a,n++)}0!==n&&this.m_shape.splitSegment(a,i,n)}a=n}while(a!==m)}}splitSegments(e,t){let s=-1;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,n=[];for(let _=this.m_shape.getFirstPath(this.m_geometry);_!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;_=this.m_shape.getNextPath(_)){let r=this.m_shape.getFirstVertex(_),h=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;for(let m=0,a=this.m_shape.getPathSize(_);m<a;m++,r=h)if(this.progress_(),h=this.m_shape.getNextVertex(r),this.m_shape.queryXY(r,i),(e?i.y===t:i.x===t)&&(this.m_shape.queryXY(h,i),e?i.y===t:i.x===t)){if(this.isCurve(r))continue;-1===s&&(s=this.m_shape.createUserIndex()),1!==this.m_shape.getUserIndex(r,s)&&(n.push(r),this.m_shape.setUserIndex(r,s,1)),1!==this.m_shape.getUserIndex(h,s)&&(n.push(h),this.m_shape.setUserIndex(h,s,1))}}if(-1!==s&&this.m_shape.removeUserIndex(s),n.length<3)return;n.sort(((e,t)=>this.compareVertices(e,t)));const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;h.setNAN();let a=-1;let o=[],p=[];const c=this.m_shape.createUserIndex(),l=this.m_shape.createUserIndex();for(let x=0,_=n.length;x<_;x++){const s=n[x];if(this.m_shape.queryXY(s,i),!i.isEqualPoint2D(h)){if(-1===a){a=x,h.setCoordsPoint2D(i);continue}for(let i=a;i<x;i++){const s=n[i],m=this.m_shape.getNextVertex(s),a=this.m_shape.getPrevVertex(s);let x=!1;this.m_shape.queryXY(m,r),h.compare(r)<0&&(e?r.y===t:r.x===t)&&(this.isCurve(s)||(o.push(s),x=!0,this.m_shape.setUserIndex(s,l,1))),this.m_shape.queryXY(a,r),h.compare(r)<0&&(e?r.y===t:r.x===t)&&(this.isCurve(a)||(x||o.push(s),this.m_shape.setUserIndex(s,c,1)))}for(let e=0,t=o.length;e<t;e++){const t=o[e],s=this.m_shape.getUserIndex(t,c),n=this.m_shape.getUserIndex(t,l);if(1===s){const e=this.m_shape.getPrevVertex(t);this.m_shape.queryXY(e,m);let s=0;if(!m.isEqualPoint2D(i)){const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P.distance(h,m);s=_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P.distance(m,i)/n,0===s?s=Number.EPSILON:1===s&&(s=1-Number.EPSILON),this.m_shape.splitSegment(e,[s],1);const r=this.m_shape.getPrevVertex(t);this.m_shape.setXY(r,i),p.push(r),this.m_shape.setUserIndex(r,c,1),this.m_shape.setUserIndex(r,l,-1)}}if(1===n){const e=this.m_shape.getNextVertex(t);this.m_shape.queryXY(e,m);let s=0;if(!m.isEqualPoint2D(i)){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P.distance(h,m);s=_Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P.distance(h,i)/e,0===s?s=Number.EPSILON:1===s&&(s=1-Number.EPSILON),this.m_shape.splitSegment(t,[s],1);const n=this.m_shape.getNextVertex(t);this.m_shape.setXY(n,i),p.push(n),this.m_shape.setUserIndex(n,c,-1),this.m_shape.setUserIndex(n,l,1)}}}const s=o;o=p,p=s,p.length=0,a=x,h.setCoordsPoint2D(i)}}this.m_shape.removeUserIndex(c),this.m_shape.removeUserIndex(l)}resolveOverlaps(e,t){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,i=[];let n=-1;for(let r=0,o=this.m_verticesOnExtent.length;r<o;r++){this.progress_();const h=this.m_verticesOnExtent[r];if(h===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)continue;const m=this.m_shape.getNextVertex(h);if(this.m_shape.queryXY(h,s),(e?s.y===t:s.x===t)&&(this.m_shape.queryXY(m,s),e?s.y===t:s.x===t)){if(this.isCurve(h))continue;-1===n&&(n=this.m_shape.createUserIndex()),-2!==this.m_shape.getUserIndex(h,n)&&(i.push(h),this.m_shape.setUserIndex(h,n,-2)),-2!==this.m_shape.getUserIndex(m,n)&&(i.push(m),this.m_shape.setUserIndex(m,n,-2))}}if(0===i.length)return void(-1!==n&&this.m_shape.removeUserIndex(n));(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==n),i.sort(((e,t)=>this.compareVertices(e,t)));for(let r=0,o=i.length;r<o;r++){const e=i[r];this.m_shape.setUserIndex(e,n,r)}const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;m.setNAN();let a=-1;for(let r=0,o=i.length;r<o;r++){this.progress_();const o=i[r];if(o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n&&(this.m_shape.queryXY(o,s),!s.isEqualPoint2D(m))){if(-1!==a)for(;;){let s=!1;const o=r;for(let p=a;p<o;p++){const a=i[p];if(a===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)continue;let o=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;const c=this.m_shape.getNextVertex(a);this.m_shape.queryXY(c,h),m.compare(h)<0&&(e?h.y===t:h.x===t)&&(this.isCurve(a)||(o=c));let l=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;const _=this.m_shape.getPrevVertex(a);if(this.m_shape.queryXY(_,h),m.compare(h)<0&&(e?h.y===t:h.x===t)&&(this.isCurve(_)||(l=_)),o===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n||l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){if(o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n||l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){for(let c=p+1;c<r;c++){const r=i[c];if(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)continue;const p=this.m_shape.getNextVertex(r);let _=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;this.m_shape.queryXY(p,h),m.compare(h)<0&&(e?h.y===t:h.x===t)&&(this.isCurve(r)||(_=p));const u=this.m_shape.getPrevVertex(r);let g=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;if(this.m_shape.queryXY(u,h),m.compare(h)<0&&(e?h.y===t:h.x===t)&&(this.isCurve(u)||(g=u)),_!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n&&g!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){this.beforeRemoveVertex(r,i,n),this.m_shape.removeVertex(r,!1),this.beforeRemoveVertex(_,i,n),this.m_shape.removeVertex(_,!1),s=!0;break}if(o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n&&g!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){this.removeOverlap(i,a,o,r,g,n),s=!0;break}if(l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n&&_!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){this.removeOverlap(i,r,_,a,l,n),s=!0;break}}if(s)break}}else this.beforeRemoveVertex(a,i,n),this.m_shape.removeVertex(a,!1),this.beforeRemoveVertex(o,i,n),this.m_shape.removeVertex(o,!1),s=!0}if(!s)break}a=r,m.setCoordsPoint2D(s)}}this.m_shape.removeUserIndex(n)}beforeRemoveVertex(e,t,s){let i=this.m_shape.getUserIndex(e,s);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i>=0),t[i]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n,i=this.m_shape.getUserIndex(e,this.m_verticesOnExtentIndex),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i>=0),this.m_verticesOnExtent[i]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;const n=this.m_shape.getPathFromVertex(e);if(n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n){this.m_shape.getFirstVertex(n)===e&&(this.m_shape.setFirstVertex(n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n),this.m_shape.setLastVertex(n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n))}}removeOverlap(e,t,s,i,n,r){this.m_shape.setNextVertex(t,i),this.m_shape.setPrevVertex(i,t),this.m_shape.setPrevVertex(s,n),this.m_shape.setNextVertex(n,s),this.beforeRemoveVertex(i,e,r),this.m_shape.removeVertexInternal(i,!1),this.beforeRemoveVertex(n,e,r),this.m_shape.removeVertexInternal(n,!0)}removeSpikesAlongPoles(){this.removeSpikesOnPole(this.m_extent.ymin),this.removeSpikesOnPole(this.m_extent.ymax)}removeSpikesOnPole(e){for(let t=this.m_shape.getFirstPath(this.m_geometry);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;t=this.m_shape.getNextPath(t)){const s=this.m_shape.getPathSize(t);if(s<3)continue;let i=this.m_shape.getFirstVertex(t);const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;this.m_shape.queryXY(i,n);let r=n.y===e&&!this.isCurve(i);i=this.m_shape.getNextVertex(i);const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;this.m_shape.queryXY(i,h);let m=h.y===e&&!this.isCurve(i);i=this.m_shape.getNextVertex(i);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;for(let t=0,o=s-2;t<o;t++,i=this.m_shape.getNextVertex(i)){this.progress_(),this.m_shape.queryXY(i,a);const t=a.y===e;if(m&&r&&t){if((h.x-n.x)*(a.x-h.x)<=0){this.m_shape.removeVertex(this.m_shape.getPrevVertex(i),!1),h.setCoordsPoint2D(a),m=t&&!this.isCurve(i);continue}}n.setCoordsPoint2D(h),r=m,h.setCoordsPoint2D(a),m=t&&!this.isCurve(i)}}}fixPaths(){for(let n=0,r=this.m_verticesOnExtent.length;n<r;n++){const e=this.m_verticesOnExtent[n];e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n&&this.m_shape.setPathToVertex(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)}const e=this.m_shape.hasCurves();let t=0,s=0;for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;){const e=this.m_shape.getFirstVertex(n);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n||n!==this.m_shape.getPathFromVertex(e)){const e=n;n=this.m_shape.getNextPath(n),this.m_shape.setFirstVertex(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n),this.m_shape.removePathOnly(e);continue}let i=e,r=0;do{this.m_shape.setPathToVertex(i,n),r++,i=this.m_shape.getNextVertex(i)}while(i!==e);this.m_shape.setRingAreaValid(n,!1),this.m_shape.setLastVertex(n,this.m_shape.getPrevVertex(e)),this.m_shape.setPathSize(n,r),s+=r,t++,n=this.m_shape.getNextPath(n)}for(let n=0,h=this.m_verticesOnExtent.length;n<h;n++){let i=this.m_verticesOnExtent[n];if(i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)continue;let h=this.m_shape.getPathFromVertex(i);if(h!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n)continue;h=this.m_shape.insertPath(this.m_geometry,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n);let m=!1,a=0;const o=i;do{this.m_shape.setPathToVertex(i,h),a++,e&&a<=2&&(m||=this.isCurve(i)),i=this.m_shape.getNextVertex(i)}while(i!==o);if(m?0===a:a<=2){let e=this.m_shape.getUserIndex(o,this.m_verticesOnExtentIndex);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e>=0),this.m_verticesOnExtent[e]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;const t=this.m_shape.removeVertex(o,!1);2===a&&(e=this.m_shape.getUserIndex(t,this.m_verticesOnExtentIndex),e>=0&&(this.m_verticesOnExtent[e]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n),this.m_shape.removeVertex(t,!1));const s=h;h=this.m_shape.getNextPath(h),this.m_shape.setFirstVertex(s,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n),this.m_shape.removePathOnly(s)}else this.m_shape.setClosedPath(h,!0),this.m_shape.setPathSize(h,a),this.m_shape.setFirstVertex(h,o),this.m_shape.setLastVertex(h,this.m_shape.getPrevVertex(o)),this.m_shape.setRingAreaValid(h,!1),s+=a,t++}this.m_shape.setGeometryPathCount(this.m_geometry,t),this.m_shape.setGeometryVertexCount(this.m_geometry,s);let i=0;for(let n=this.m_shape.getFirstGeometry();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.n;n=this.m_shape.getNextGeometry(n))i+=this.m_shape.getPointCount(n);this.m_shape.setTotalPointCount(i)}dbgCheckPathFirst(){}isCurve(e){return null!==this.m_shape.getSegment(e)}compareVertices(e,t){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;this.m_shape.queryXY(e,s);const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_5__.P;this.m_shape.queryXY(t,i);return s.compare(i)}clipPolesOut(e,t){return this.clipPolygonOrProjectedPolyline2(e,t)}}class I{getOperatorType(){return 10004}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s,i){return new V(e,t,s,i)}execute(e,t,s,i){return X(e,t,s,i)}}class V extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.G{constructor(e,s,i,n){super(),this.m_progressTracker=n,this.m_index=-1,e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),this.m_envelope=s,this.m_inputGeometryCursor=e,this.m_spatialRefImpl=i,this.m_tolerance=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_2__.c)(i,s,!1).total()}next(){let e;return(e=this.m_inputGeometryCursor.next())?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),this.m_index=this.m_inputGeometryCursor.getGeometryID(),f(e,this.m_envelope,this.m_tolerance,0,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function X(e,t,s,i){return v(e,t,s,Number.NaN,0,i)}


/***/ }),

/***/ 77536:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NonSimpleResult: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{assign(e){this.m_reason=e.m_reason,this.m_vertexIndex1=e.m_vertexIndex1,this.m_vertexIndex2=e.m_vertexIndex2}constructor(e,t,s){void 0!==e?(this.m_reason=e,this.m_vertexIndex1=t,this.m_vertexIndex2=s):(this.m_reason=0,this.m_vertexIndex1=-1,this.m_vertexIndex2=-2)}clear(){this.m_reason=0,this.m_vertexIndex1=-1,this.m_vertexIndex2=-1}}


/***/ }),

/***/ 1804:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50256);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74642);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.D;class i extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.G{constructor(e,t,r,s,i,m){super(),this.m_densificator=new n(t,r,s,m,!1,i),this.m_index=-1,this.m_inputGeoms=e}tock(){return!0}getRank(){return 1}next(){let e=null;for(;e=this.m_inputGeoms.next();)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.densify(e);return null}getGeometryID(){return this.m_index}densify(e){return this.m_densificator.densify(e)}}class m{getOperatorType(){return 10202}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}executeMany(e,t,r,s,n,m=12e3){return new i(e,t,r,s,m,n)}execute(e,t,s,n,i,m=12e3){return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.d)(e,t,s,n,i,m)}}


/***/ }),

/***/ 36004:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ d),
/* harmony export */   a: () => (/* binding */ m),
/* harmony export */   b: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(36572);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(3445);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_6__/* .NoParameters */ .Y{constructor(){super(...arguments),this.overlayIndex=_views_3d_terrain_interfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .OverlayIndex */ .vr.INNER,this.opacity=1}}function l(){const e=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_7__/* .ShaderBuilder */ .N5;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSpacePass */ .c),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_IntegerPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .IntegerPassUniform */ .c("overlayIdx",(e=>e.overlayIndex))),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("opacity",(e=>e.opacity))),e.fragment.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 overlayUV = overlayIdx == 0 ? vec2(uv.x * 0.5, uv.y) : vec2(uv.x * 0.5 + 0.5, uv.y);
fragColor = texture(tex, overlayUV) * opacity;`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,OverlayCompositingPassParameters:d,build:l},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 86330:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ Hs),
/* harmony export */   A: () => (/* binding */ wt),
/* harmony export */   B: () => (/* binding */ Ss),
/* harmony export */   C: () => (/* binding */ Zt),
/* harmony export */   D: () => (/* binding */ Gs),
/* harmony export */   E: () => (/* binding */ x),
/* harmony export */   F: () => (/* binding */ fs),
/* harmony export */   G: () => (/* binding */ cs),
/* harmony export */   H: () => (/* binding */ p),
/* harmony export */   I: () => (/* binding */ w),
/* harmony export */   J: () => (/* binding */ I),
/* harmony export */   K: () => (/* binding */ n),
/* harmony export */   L: () => (/* binding */ Qt),
/* harmony export */   M: () => (/* binding */ si),
/* harmony export */   N: () => (/* binding */ Vs),
/* harmony export */   O: () => (/* binding */ Qs),
/* harmony export */   P: () => (/* binding */ mi),
/* harmony export */   Q: () => (/* binding */ ls),
/* harmony export */   R: () => (/* binding */ Xt),
/* harmony export */   S: () => (/* binding */ Ht),
/* harmony export */   T: () => (/* binding */ Js),
/* harmony export */   U: () => (/* binding */ Y),
/* harmony export */   V: () => (/* binding */ It),
/* harmony export */   W: () => (/* binding */ jt),
/* harmony export */   X: () => (/* binding */ V),
/* harmony export */   Y: () => (/* binding */ U),
/* harmony export */   Z: () => (/* binding */ zt),
/* harmony export */   _: () => (/* binding */ L),
/* harmony export */   a: () => (/* binding */ H),
/* harmony export */   a0: () => (/* binding */ js),
/* harmony export */   a1: () => (/* binding */ Ws),
/* harmony export */   a2: () => (/* binding */ k),
/* harmony export */   a3: () => (/* binding */ F),
/* harmony export */   a4: () => (/* binding */ O),
/* harmony export */   a5: () => (/* binding */ G),
/* harmony export */   a6: () => (/* binding */ D),
/* harmony export */   a7: () => (/* binding */ ni),
/* harmony export */   a8: () => (/* binding */ Ct),
/* harmony export */   a9: () => (/* binding */ $s),
/* harmony export */   aA: () => (/* binding */ St),
/* harmony export */   aB: () => (/* binding */ Ps),
/* harmony export */   aC: () => (/* binding */ bs),
/* harmony export */   aD: () => (/* binding */ Ys),
/* harmony export */   aE: () => (/* binding */ R),
/* harmony export */   aF: () => (/* binding */ zs),
/* harmony export */   aG: () => (/* binding */ ai),
/* harmony export */   aH: () => (/* binding */ hi),
/* harmony export */   aI: () => (/* binding */ Bs),
/* harmony export */   aJ: () => (/* binding */ rs),
/* harmony export */   aK: () => (/* binding */ qs),
/* harmony export */   aa: () => (/* binding */ _t),
/* harmony export */   ab: () => (/* binding */ vt),
/* harmony export */   ac: () => (/* binding */ Lt),
/* harmony export */   ad: () => (/* binding */ A),
/* harmony export */   ae: () => (/* binding */ P),
/* harmony export */   af: () => (/* binding */ ft),
/* harmony export */   ag: () => (/* binding */ Jt),
/* harmony export */   ah: () => (/* binding */ ei),
/* harmony export */   ai: () => (/* binding */ ii),
/* harmony export */   aj: () => (/* binding */ Et),
/* harmony export */   ak: () => (/* binding */ Xs),
/* harmony export */   al: () => (/* binding */ Rt),
/* harmony export */   am: () => (/* binding */ st),
/* harmony export */   an: () => (/* binding */ $),
/* harmony export */   ao: () => (/* binding */ gt),
/* harmony export */   ap: () => (/* binding */ J),
/* harmony export */   aq: () => (/* binding */ Os),
/* harmony export */   ar: () => (/* binding */ xs),
/* harmony export */   as: () => (/* binding */ At),
/* harmony export */   at: () => (/* binding */ As),
/* harmony export */   au: () => (/* binding */ Zs),
/* harmony export */   av: () => (/* binding */ Vt),
/* harmony export */   aw: () => (/* binding */ Gt),
/* harmony export */   ax: () => (/* binding */ S),
/* harmony export */   ay: () => (/* binding */ Ds),
/* harmony export */   az: () => (/* binding */ oi),
/* harmony export */   b: () => (/* binding */ Dt),
/* harmony export */   c: () => (/* binding */ Pt),
/* harmony export */   d: () => (/* binding */ Yt),
/* harmony export */   e: () => (/* binding */ K),
/* harmony export */   f: () => (/* binding */ B),
/* harmony export */   g: () => (/* binding */ Ls),
/* harmony export */   h: () => (/* binding */ kt),
/* harmony export */   i: () => (/* binding */ ds),
/* harmony export */   j: () => (/* binding */ vs),
/* harmony export */   k: () => (/* binding */ $t),
/* harmony export */   l: () => (/* binding */ ct),
/* harmony export */   m: () => (/* binding */ Ot),
/* harmony export */   n: () => (/* binding */ Ut),
/* harmony export */   o: () => (/* binding */ Wt),
/* harmony export */   p: () => (/* binding */ Kt),
/* harmony export */   q: () => (/* binding */ Q),
/* harmony export */   r: () => (/* binding */ _s),
/* harmony export */   s: () => (/* binding */ Us),
/* harmony export */   t: () => (/* binding */ W),
/* harmony export */   u: () => (/* binding */ Bt),
/* harmony export */   v: () => (/* binding */ qt),
/* harmony export */   w: () => (/* binding */ Ft),
/* harmony export */   x: () => (/* binding */ j),
/* harmony export */   y: () => (/* binding */ z),
/* harmony export */   z: () => (/* binding */ C)
/* harmony export */ });
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{constructor(t){this.sum=t,this.compensation=0}assign(t){return this.compensation=t.compensation,this.sum=t.sum,this}reset(){this.sum=this.compensation=0}resetToStart(t){this.sum=t,this.compensation=0}normalize(){const t=[Number.NaN];this.sum=lt(this.sum,this.compensation,t),this.compensation=t[0]}add(t){const s=this.sum+t;let i;if(Math.abs(this.sum)>=Math.abs(t)){const e=this.sum-s+t;i=this.compensation+e}else{const e=t-s+this.sum;i=this.compensation+e}this.sum=s,this.compensation=i}sub(t){this.add(-t)}addProduct(t,s){const i=[0],e=ut(t,s,i);this.add(e),this.add(i[0])}mul(t){const s=new n(0);s.addProduct(this.sum,t),s.addProduct(this.compensation,t),this.assign(s)}getResult(){return this.sum+this.compensation}pe(t){return this.add(t),this}me(t){return this.add(-t),this}}const r=0x00000000ffffffffn,u=0x0000ffffn,h=0x000000ffn,a=0x0fn,o=0xffff0000n,m=0xff00n,l=0xf0n,c=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],f=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function _(t){let s=0;return t&u||(s+=16,t>>=16n),t&h||(s+=8,t>>=8n),t&a||(s+=4,t>>=4n),s+c[Number(BigInt.asUintN(4,t))]}function v(t){let s=0;return t&o&&(s+=16,t>>=16n),t&m&&(s+=8,t>>=8n),t&l&&(s+=4,t>>=4n),s+f[Number(BigInt.asUintN(4,t))]+1}function b(t){let s=0;return t&r||(s=32,t>>=32n),s+_(BigInt.asUintN(32,t))}function d(t){let s=0;return 0xffffffff00000000n&t&&(s=32,t>>=32n),s+v(t)}class x{constructor(t,s){if(this.m_EnvelopeType=1,void 0!==t){if(t instanceof x)return this.vmin=t.vmin,void(this.vmax=t.vmax);this.vmin=t,this.vmax=s,this.normalize()}else this.setEmpty()}static construct(t,s){return new x(t,s)}static constructEmpty(){return new x}setCoords(t,s){this.vmin=t,this.vmax=s,this.normalize()}setCoordsFromEnvelope(t){this.vmin=t.vmin,this.vmax=t.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return.5*(this.vmin+this.vmax)}equalsRange(t,s){return ls(this.vmin,t)&&ls(this.vmax,s)}equals(t,s){return!(!this.isEmpty()||!t.isEmpty())||(void 0!==s?Math.abs(this.vmin-t.vmin)<=s&&Math.abs(this.vmax-t.vmax)<=s:this.vmin===t.vmin&&this.vmax===t.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return this.vmin===this.vmax}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(t){this.isEmpty()||(this.vmin+=t,this.vmax+=t)}contains(t){return t.vmin>=this.vmin&&t.vmax<=this.vmax}containsCoordinate(t){return t>=this.vmin&&t<=this.vmax}containsRightExclusive(t){return t>=this.vmin&&t<this.vmax}containsExclusiveCoordinate(t){return t>this.vmin&&t<this.vmax}containsExclusive(t){return t.vmin>this.vmin&&t.vmax<this.vmax}isIntersecting(t){return this.vmin<=t.vmin?this.vmax>=t.vmin:t.vmax>=this.vmin}mergeCoordinate(t){if(this.isEmpty())return this.vmin=t,void(this.vmax=t);this.mergeNeCoordinate(t)}merge(t){if(t.isEmpty())return;const s=t.vmin,i=t.vmax;this.mergeCoordinate(s),this.mergeCoordinate(i)}mergeNe(t){const s=t.vmin,i=t.vmax;this.mergeNeCoordinate(s),this.mergeNeCoordinate(i)}mergeNeCoordinate(t){t<this.vmin?this.vmin=t:t>this.vmax&&(this.vmax=t)}intersect(t){this.isEmpty()||t.isEmpty()?this.setEmpty():(this.vmin<t.vmin&&(this.vmin=t.vmin),this.vmax>t.vmax&&(this.vmax=t.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(t){this.isEmpty()||(this.vmin-=t,this.vmax+=t,this.vmax<this.vmin&&this.setEmpty())}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=Pt(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(t){return Us(t,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){if(this.isEmpty())return Ls();return(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*Ls()}static unit(){return N}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=Pt(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(t,s){this.vmin=t,this.vmax=s,this.normalizeNoNAN()}clone(){return new x(this.vmin,this.vmax)}}const N=new x(0,1);class p{static getNAN(){return new p(Number.NaN)}constructor(t,s){this.m_value=t??0,this.m_eps=s??0}[Symbol.toPrimitive](t){return this}clone(){return new p(this.m_value,this.m_eps)}assign(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}scaleError(t){this.m_eps*=t}setError(t){this.m_eps=t}set(t,s){return this.m_value=t,this.m_eps=s??0,this}setWithEps(t,s){return void 0===s&&(s=1),this.m_value=t,this.m_eps=p.ulp(t)*s,this}setE(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}precise(){return new p(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(t){return this.clone().addThis(t)}addE(t){return this.clone().addThisE(t)}addThisE(t){const s=this.m_value+t.m_value,i=this.m_eps+t.m_eps+p.ulp(s);return this.m_value=s,this.m_eps=i,this}addThis(t){const s=this.m_value+t,i=this.m_eps+p.ulp(s);return this.m_value=s,this.m_eps=i,this}subE(t){return this.clone().subThisE(t)}sub(t){return this.clone().subThis(t)}subThisE(t){const s=this.m_value-t.m_value,i=this.m_eps+t.m_eps+p.ulp(s);return this.m_value=s,this.m_eps=i,this}subThis(t){const s=this.m_value-t,i=this.m_eps+p.ulp(s);return this.m_value=s,this.m_eps=i,this}setAddE(t,s){return this.m_value=t.m_value+s.m_value,this.m_eps=t.m_eps+s.m_eps+p.ulp(this.m_value),this}setAdd(t,s){return this.m_value=t+s,this.m_eps=p.ulp(this.m_value),this}setAddEN(t,s){return this.m_value=t.m_value+s,this.m_eps=t.m_eps+p.ulp(this.m_value),this}setAddNE(t,s){return this.m_value=t+s.m_value,this.m_eps=s.m_eps+p.ulp(this.m_value),this}setSubE(t,s){return this.m_value=t.m_value-s.m_value,this.m_eps=t.m_eps+s.m_eps+p.ulp(this.m_value),this}setSub(t,s){return this.m_value=t-s,this.m_eps=p.ulp(this.m_value),this}setSubEN(t,s){return this.m_value=t.m_value-s,this.m_eps=t.m_eps+p.ulp(this.m_value),this}setSubNE(t,s){return this.m_value=t-s.m_value,this.m_eps=s.m_eps+p.ulp(this.m_value),this}mulThisE(t){const s=this.m_value*t.m_value;return this.m_eps=this.m_eps*Math.abs(t.m_value)+t.m_eps*Math.abs(this.m_value)+this.m_eps*t.m_eps+p.ulp(s),this.m_value=s,this}mulThis(t){const s=this.m_value*t;return this.m_eps=this.m_eps*Math.abs(t)+p.ulp(s),this.m_value=s,this}mul(t){return this.clone().mulThis(t)}mulE(t){return this.clone().mulThisE(t)}setMulE(t,s){const i=t.m_value*s.m_value;return this.m_eps=t.m_eps*Math.abs(s.m_value)+s.m_eps*Math.abs(t.m_value)+t.m_eps*s.m_eps+p.ulp(i),this.m_value=i,this}setMul(t,s){return this.m_value=t*s,this.m_eps=p.ulp(this.m_value),this}setMulEN(t,s){return this.setE(t),this.mulThis(s)}setMulNE(t,s){return this.setE(s),this.mulThis(t)}mulThisByPower2(t){return this.m_value*=t,this.m_eps*=Math.abs(t),this}static st_mulByPower2(t,s){return new p(t.m_value,t.m_eps).mulThisByPower2(s)}divE(t){return this.clone().divThisE(t)}divThisE(t){const s=Math.abs(t.m_value),i=this.m_value/t.m_value;let e=(this.m_eps+Math.abs(i)*t.m_eps)/s;if(t.m_eps>.01*s){const i=t.m_eps/s;e*=1+(1+i)*i}return this.m_value=i,this.m_eps=e+p.ulp(i),this}divThis(t){const s=Math.abs(t);return this.m_value/=t,this.m_eps=this.m_eps/s+p.ulp(this.m_value),this}setDivE(t,s){return this.setE(t),this.divThisE(s)}setDiv(t,s){return this.m_value=t/s,this.m_eps=p.ulp(this.m_value),this}setDivEN(t,s){return this.setE(t),this.divThis(s)}setDivNE(t,s){return this.set(t),this.divThisE(s)}divThisByPower2(t){return this.m_value/=t,this.m_eps/=Math.abs(t),this}invThis(){return this.setE(w.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let t,s;return this.m_value>=0?(t=Math.sqrt(this.m_value),s=this.m_value>10*this.m_eps?.5*this.m_eps/t:this.m_value>this.m_eps?t-Math.sqrt(this.m_value-this.m_eps):Math.max(t,Math.sqrt(this.m_value+this.m_eps)-t),s+=p.ulp(t)):this.m_value<-this.m_eps?(t=Number.NaN,s=Number.NaN):(t=0,s=Math.sqrt(this.m_eps)),this.m_value=t,this.m_eps=s,this}sqr(){return this.clone().sqrThis()}sqrThis(){const t=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+p.ulp(t),this.m_value=t,this}setSin(t){const s=Math.sin(t.m_value),i=Math.cos(t.m_value);this.m_value=s;const e=Math.abs(s),n=Math.abs(t.value());return this.m_eps=(Math.abs(i)+.5*e*t.m_eps)*t.m_eps+p.ulp(e+n),this}static ulp(t){let s=us(t);const i=((0x7ff0000000000000n&s)>>52n)-1075n;return i>-1023n?(s=i+0x3ffn<<52n,hs(s)):0===t?0:Number.MIN_VALUE}setCos(t){const s=Math.sin(t.m_value),i=Math.cos(t.m_value);this.m_value=i;const e=Math.abs(i),n=Math.abs(t.value());return this.m_eps=(Math.abs(s)+.5*e*t.m_eps)*t.m_eps+p.ulp(e+n),this}static st_cosAndSin(t,s,i){const e=Math.sin(t.m_value),n=Math.cos(t.m_value);i.m_value=e,s.m_value=n;const r=Math.abs(e),u=Math.abs(n),h=Math.abs(t.value());i.m_eps=(Math.abs(n)+.5*r*t.m_eps)*t.m_eps+p.ulp(r+h),s.m_eps=(Math.abs(e)+.5*u*t.m_eps)*t.m_eps+p.ulp(u+h)}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}isInInterval(t){return x.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(t)}eq(t){return Math.abs(this.m_value-t.m_value)<=this.m_eps+t.m_eps}ne(t){return!this.eq(t)}gt(t){return this.m_value-t.m_value>this.m_eps+t.m_eps}lt(t){return t.m_value-this.m_value>this.m_eps+t.m_eps}ge(t){return!this.lt(t)}le(t){return!this.gt(t)}tolEQ(t,s){return Math.abs(this.m_value-t.m_value)<=s||this.eq(t)}tolNE(t,s){return!this.tolEQ(t,s)}tolGT(t,s){return this.m_value-t.m_value>s&&this.gt(t)}tolLT(t,s){return t.m_value-this.m_value>s&&this.lt(t)}tolGE(t,s){return!this.tolLT(t,s)}tolLE(t,s){return!this.tolGT(t,s)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&0!==this.m_eps}tolIsZero(t){return Math.abs(this.m_value)<=Math.max(this.m_eps,t)}setPi(){this.setE(E)}setEuler(){this.set(2.718281828459045,M())}static size(){return 1}}function y(t,s){const i=as(t),e=as(s),n=53-b(i),r=53-b(e);return(n>=0?n:0)+(r>=0?r:0)<=52}function T(t,s){const i=t+s;return i-t===s&&i-s===t}function g(t,s){const i=t-s;return t-i===s&&s+i===t}function M(){return Qs()}p.dimensions=1;const E=new p(Math.PI,.5*M()),I=new p(0,0),w=new p(1,0),D=new p(4,0);function A(t,s,i){return t.addE(s.subE(t).mulE(i))}function P(t,s,i){return s.subE(s.subE(t).mulE(w.subE(i)))}function q(t){return Math.atanh(t)}function z(t){let s;if(0===t)s=1;else if(Math.abs(t)>.01)s=q(t)/t;else{let i;const e=-36.841361487904734;s=0;const n=t*t;for(let t=2*Math.trunc(e/Math.log(n)+2.5)-1;t>1;t-=2)i=1/t,s=(s+i)*n;s+=1}return s}function Z(t){const s=Math.PI*Math.PI/6;let i;if(1===t)i=s;else if(t>1)i=s;else if(0===t)i=t;else if(t<0){const s=1+(t=Math.abs(t)),e=Math.log(s);i=e*e/-2-Z(t/s)}else if(t>.5){const e=1-t,n=Math.log(t)*Math.log(e);i=s-Z(e)-n}else{i=0;const s=1+Math.trunc(-16*Math.log(10)/Math.log(t)+1.5);let e=s;for(let n=s;n>0;n--,e-=1)i*=t,i+=1/(e*e);i*=t}return i}function C(t,s){const i=s*t;if(Math.abs(s)<.1){let s=0;for(let t=60;t>=1;t--)s*=i,s+=1/t/t;return s*=t,s}return Z(i)/s}function R(t,s){return t<s?$t(t,s):$t(s,t)}function B(t,s){const i=Math.abs(t);return s>=0?i:-i}function S(t){return Math.round(t)}function k(t,s,i,e,n){n[0]=s[0]+(i[0]-s[0])*e,n[1]=s[1]+(i[1]-s[1])*e,3===t&&(n[2]=s[2]+(i[2]-s[2])*e)}function F(t,s,i,e,n){n[0]=i[0]-(i[0]-s[0])*(1-e),n[1]=i[1]-(i[1]-s[1])*(1-e),3===t&&(n[2]=i[2]-(i[2]-s[2])*(1-e))}function L(t,s,i,e,n){e<=.5?k(t,s,i,e,n):F(t,s,i,e,n)}function O(t,s,i,e,n){n[0]=s[0].addE(i[0].subE(s[0]).mulE(e)),n[1]=s[1].addE(i[1].subE(s[1]).mulE(e))}function G(t,s,i,e,n){n[0]=i[0].subE(i[0].subE(s[0]).mulE(w.subE(e))),n[1]=i[1].subE(i[1].subE(s[1]).mulE(w.subE(e)))}function Q(t,s,i){let e;return e=i<=.5?t+(s-t)*i:s-(s-t)*(1-i),e}function V(t,s,i){return t+(s-t)*i}function U(t,s,i){return s-(s-t)*(1-i)}function Y(t,s,i,e){i<=.5?(e.x=t.x+(s.x-t.x)*i,e.y=t.y+(s.y-t.y)*i):(e.x=s.x-(s.x-t.x)*(1-i),e.y=s.y-(s.y-t.y)*(1-i))}function j(t,s,i,e){i<=.5?(e.x=t.x+(s.x-t.x)*i,e.y=t.y+(s.y-t.y)*i,e.z=t.z+(s.z-t.z)*i):(e.x=s.x-(s.x-t.x)*(1-i),e.y=s.y-(s.y-t.y)*(1-i),e.z=s.z-(s.z-t.z)*(1-i))}function H(t){return t*t}function $(t){return t*t*t}function J(t){return 1/Math.sqrt(t)}function K(t){return t<0?-1:t>0?1:0}function W(t,s,i,e){const n=[0],r=[0],u=[0];return lt(ut(t,i,n),ut(s,e,r),u)+(n[0]+r[0]+u[0])}const X=[0],tt=[0];function st(t,s,i){return mt(ut(t,s,X),i,X[0],tt)}const it=[0],et=[0],nt=[0],rt=[0];function ut(t,s,i){const e=t*s;return ht(t,it,et),ht(s,nt,rt),i[0]=et[0]*rt[0]-(e-it[0]*nt[0]-et[0]*nt[0]-it[0]*rt[0]),e}function ht(t,s,i){const e=134217729*t;s[0]=e-(e-t),i[0]=t-s[0]}const at=[0],ot=[0];function mt(t,s,i,e){const n=lt(t,s,at),r=lt(n,i,ot);return lt(r,at[0]+ot[0],e)}function lt(t,s,i){const e=t+s;return Math.abs(t)>Math.abs(s)?i[0]=t-e+s:i[0]=s-e+t,e}function ct(t,s){return t%s}function ft(t){const s=1-t;if(0===s)return 1;let i;if(s<=.01){const t=s,e=Math.log(t);i=1+t*(.4431471805599453-.25*e+t*(.05680519270997949-.09375*e+t*(.02183137044373718-.05859375*e+t*(.011544521417308362-.042724609375*e+t*(.00714200031339596-.0336456298828125*e+t*(.004854743337164948-.027757644653320312*e+t*(.003514687963781376-.023627042770385742*e)))))))}else{if(t<.016){const s=t,i=.25,e=.046875,n=.01953125,r=.01068115234375,u=.0067291259765625,h=.004626274108886719,a=.0033752918243408203,o=.0025710230693221092;return Js()*(1-s*(i+s*(e+s*(n+s*(r+s*(u+s*(h+s*(a+s*o))))))))}i=bt(0,s,1)-t*dt(0,s,1)/3}return Us(i,1,Js())}function _t(t,i,e=Number.NaN){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(i>=0&&i<=1),0===i)return t;let n=1,r=t;if(r<0&&(r=-r,n=-1),1===i){const t=Math.round(r/Hs()),s=r-t*Hs();return n*(2*t+Math.sin(s))}const u=Js(),h=Math.floor(r/u);1&h?r=(h+1)*u-r:r-=h*u;const a=Math.sin(r),o=Number.isNaN(e)?ft(i):e;let m;if(1===a)m=o+Math.sqrt(1-i)*(r-u);else{const t=r*r;if(.01424*Math.pow(t,4)<=2*Qs()){m=r*(1+t*i*(-1/6+t*((4-3*i)/120-(16+(45*i-60)*i)/5040*t)))}else if(i<=.01){const t=Math.sin(2*r),s=Math.sin(4*r),e=Math.sin(6*r),n=Math.sin(8*r),u=Math.sin(10*r);m=r+i*((2*-r+t)/8+i*((-3*r+2*t-.25*s)/64+i*((-20*r+15*t-3*s+e/3)/1024+i*(5*(-140*r+112*t-28*s+16/3*e-.5*n)/65536+7*i*((-63*r+52.5*t-15*s+3.75*e-.625*n+.05*u)/65536+i*(-693*r+594*t-185.625*s+1.375*e-12.375*n+1.8*u-.125*Math.sin(12*r))/1048576)))))}else{const t=a*a,s=Math.cos(r),e=s*s,n=xt(a,s,i);m=a*(bt(e,n,1)-i*t*dt(e,n,1)/3)}}if(1&h){m=o*(h+1)-m}else m+=o*h;return n*m}function vt(t,s,i=Number.NaN){if(0===t)return 0;let e=1,n=t;t<0&&(n=-n,e=-1);const r=Number.isNaN(i)?ft(s):i,u=Math.floor(n/r);1&u?n=(u+1)*r-n:n-=u*r;let h=n<=0?0:n>=r?Js():Nt(n,s,r);return 1&u?h=Js()*(u+1)-h:h+=Js()*u,e*h}function bt(t,i,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)((0!==t?1:0)+(0!==i?1:0)+1>1);let n=t,r=i,u=e;for(;;){const t=Math.sqrt(n*r)+Math.sqrt(r*u)+Math.sqrt(u*n);n=.25*(n+t),r=.25*(r+t),u=.25*(u+t);const s=(n+r+u)/3,i=(s-n)/s,e=(s-r)/s,h=(s-u)/s;if(Math.abs(i)<=.0024&&Math.abs(e)<=.0024&&Math.abs(h)<=.0024){const t=i*e-h*h,n=i*e*h;return(1+(1/24*t-.1-3/44*n-5*t*t/208+t*n/16)*t+(1/14+3*n/104)*n)/Math.sqrt(s)}}}function dt(t,i,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0!==t||0!==i);let r=t,u=i,h=e;const a=new n(0);let o=1;for(;;){const t=.2*(r+u+3*h),s=(t-r)/t,i=(t-u)/t,e=(t-h)/t;if(Math.abs(s)<=.0015&&Math.abs(i)<=.0015&&Math.abs(e)<=.0015){const n=s*i,r=e*e,u=n-r,h=n-6*r,m=h+u+u,l=3/26,c=h*(.25*(9/22)*h-.21428571428571427-1.5*l*e*m),f=e*(1/6*m+e*(-.4090909090909091*u+e*l*n));return 3*a.getResult()+o*(1+c+f)/(t*Math.sqrt(t))}const n=Math.sqrt(r),m=Math.sqrt(u),l=Math.sqrt(h),c=n*(m+l)+m*l;a.add(o/(l*(h+c))),o*=.25,r=.25*(r+c),u=.25*(u+c),h=.25*(h+c)}}function xt(t,s,i){return t<.999?1-i*H(t):1-i+i*H(s)}function Nt(t,s,i){if(0===s)return t;if(1===s)return Math.asin(t);let e=0,n=!0;if(t<.2){const i=t*t,r=t*(1+i*s*(1/6+i*((13*s-4)/120+(16-284*s+493*s*s)/5040*i))),u=Math.abs(s*(4944*s-64-31224*s*s+37369*s*s*s)/362880*Math.pow(t,9));if(u<Math.abs(r)*Qs())return r;e=r,n=u>.1*r}if(n){const n=1-s,r=1-t/i,u=Math.sqrt(r*r+n*n),h=Math.atan2(n,t+Qs());e=Js()+Math.sqrt(u)*(h-Js())}let r=0;for(let u=0;u<7;u++){r=_t(e,s,i);const n=xt(Math.sin(e),Math.cos(e),s);if(e-=(r-t)/Math.sqrt(n),u>0&&Math.abs(r-t)<=4*Qs()*t)break}return e}class pt{constructor(t){for(this.values=[[1]];this.values.length<t+1;){const t=this.values.at(-1),s=Yt(t.length+1,1);for(let i=1;i<t.length;++i)s[i]=t[i-1]+t[i];this.values.push(s)}}get(t,s){return this.values[t][s]}}function yt(t,i){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}const Tt=new pt(32);function gt(t,s){if(t<Tt.values.length)return Tt.get(t,s);const e=Math.exp(yt());return e+.01>ds()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("The result value of n choose k is out of range"),e+.01}function Mt(t,s){if(t.isZero())return t.clone();const i=t.clone().divThis(t);if(s<0)return i.divThis(Mt(t,-s));for(t=t.clone(),s=Math.trunc(s);1&s&&i.mulThis(t),s>>=1;)t.mulThis(t);return i}function Et(t,s){if(0===s)return[];const i=t[0].clone().mulDoubleThis(0),e=[];e.length=s;const n=s-1;for(let r=0;r<=n;++r){e[r]=i.clone();for(let s=0;s<=r;++s)e[r].addThis(t[s].clone().mulDoubleThis(gt(r,s)/gt(n,s)))}return e}function It(s,i,e,n,r){return 0===s?0===n?i:1===n?e:r:1===s?0===n?i:1===n?e:Q(i,e,n):(2===s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("angular interpolation"),void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)(""))}function wt(s,i,e,n,r,u,h,a){if(0===s)for(let t=0;t<u;++t)n[t+r]=0===h?i[t]:1===h?e[t]:a;else if(1===s)if(0===h)Dt(n,i,r,0,u);else if(1===h)Dt(n,e,r,0,u);else for(let t=0;t<u;++t)n[t+r]=Q(i[t],e[t],h);else if(2===s)if(0===h)Dt(n,i,r,0,u);else if(1===h)Dt(n,e,r,0,u);else{let t=0;for(let s=0,a=r;s<u;++s,++a)n[a]=Q(i[s],e[s],h),t+=n[a]*n[a];if(t>0){t=Math.sqrt(t);for(let s=r;s<r+u;++s)n[s]/=t}else{for(let t=r;t<r+u;++t)n[t]=0;n[r]=1}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}function Dt(t,s,i,e,n){if(0===n)return;let r=0,u=i,h=e;for(;r++<n;)t[u++]=s[h++]}function At(t,s,i){let e=0;for(let n=0;!e&&n<i;++n)e=t[n]-s[n];return e}function Pt(t,s){return t}function qt(t){t.sort(((t,s)=>t<s?-1:t>s?1:0))}function zt(t,s){const i=t.slice(0,s);qt(i),Dt(t,i,0,0,s)}function Zt(t,s,i,e){const n=t.slice(s,s+i);n.sort(e),Dt(t,n,s,0,i)}function Ct(t,s){return t<s?-1:t>s?1:0}function Rt(t,s,i,e){return t<i?-1:t>i?1:s<e?-1:s>e?1:0}function Bt(t,s){if(t.length<2)return t.length;let i=0;for(let e=1;e<t.length;++e)s(t[e],t[i])||(i++,t[e]=Pt(t[i],t[i]=t[e]));return 1+i}function St(t,s){t[s]=t.at(-1),t.pop()}function kt(t,s=!1){return{[Symbol.dispose](){this.bForget||t()},bForget:s}}function Ft(t,s,i){t.length=s,t.fill(i)}function Lt(t,s,i){t.length=i;for(let e=0;e<i;++e)t[e]=new s}function Ot(t,s){const i=new Array(s);for(let e=0;e<s;++e)i[e]=new t;return i}function Gt(t,s,i){for(let e=0;e<i;++e)t[e].assign(s[e]);return i}function Qt(t,s){const i=t.slice(0,s);for(let e=0;e<s;++e)i[e]=i[e].clone();return i}function Vt(t){return Array.from({length:t},(()=>null))}function Ut(t,s){return Array.from({length:s},(()=>t()))}function Yt(t,s){const i=new Array(t);return i.fill(s),i}function jt(t,s){return s in t&&1===Object.getOwnPropertyNames(t).length}class Ht{constructor(...t){this.m_elts=t}get length(){return this.m_elts.length}at(t){return this.m_elts[t]}[Symbol.dispose](){for(const t of this.m_elts)t[Symbol.dispose]()}}function $t(t,s){return{first:t,second:s}}const Jt=Math.PI,Kt=2*Math.PI,Wt=.5*Math.PI;class Xt{constructor(t,s){this.m_cr=t,this.m_cc=s,this.m_v=Yt(t*s,0)}get(t,s){return this.m_v[t*this.m_cc+s]}set(t,s,i){this.m_v[t*this.m_cc+s]=i}inc(t,s){return++this.m_v[t*this.m_cc+s]}}const ts=new ArrayBuffer(8),ss=new Float64Array(ts),is=new BigUint64Array(ts),es=0x0fffffffffffffn,ns=0x7ff0000000000000n;function rs(){return Number.EPSILON*Fs}function us(t){return ss[0]=t,is[0]}function hs(t){return is[0]=t,ss[0]}function as(t){return us(t)&es}function os(t){return Number((us(t)&ns)>>52n)}function ms(t){if(0n===t)return-1n;if(1n===t||-1n===t)return 0n;t<0n&&(t=-t);let s=0n,i=512n,e=1n<<s+i;for(;t>=e;)s+=i,i<<=1n,e<<=i;let n=s;i>>=1n;let r=n+i;for(;i>0n;)t<1n<<r||(n=r),i>>=1n,r=n+i;return n}function ls(t,s){return t===s||Number.isNaN(t)&&Number.isNaN(s)}function cs(t,s,i){return t===s||Math.abs(t-s)<=i||Number.isNaN(t)&&Number.isNaN(s)}function fs(t,s){return t<s?-1:t>s?1:0}function _s(t,s){if(t<s)return-1;if(t>s)return 1;if(t===s)return 0;{const i=Number.isNaN(t),e=Number.isNaN(s);return i<e?-1:i>e?1:0}}function vs(){return 2147483647}function bs(){return 32767}function ds(){return 2147483647}function xs(){return-2147483648}const Ns=ds(),ps=BigInt(Ns),ys=2166136261,Ts=16777619;function gs(t){let s=ys,i=t;return s=(s^255&i)*Ts,i>>=8,s=(s^255&i)*Ts,i>>=8,s=(s^255&i)*Ts,i>>=8,s=(s^255&i)*Ts,s&Ns}const Ms=14695981039346656037n,Es=1099511628211n;function Is(t){let s=Ms,i=t;return s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,i>>=8n,s=(s^0xffn&i)*Es,s&ps}function ws(t){return 1103515245*t+12345&2147483647}function Ds(t){let s=ys;for(let i=0,e=t.length;i<e;++i)s=(s^t.charCodeAt(i))*Ts;return s&Ns}function As(t,s){return s+2654435769+(t<<6)+(t>>2)&Ns}function Ps(t,s){return As(t,Cs(s))}function qs(t){return As(3735928559,t)}function zs(t,s){return As(t,qs(s))}function Zs(t){return gs(t)}function Cs(t){return Number(Is(t))}function Rs(t){return Xs(t)}function Bs(t){return Cs(us(Rs(t)))}function Ss(t){return ws(t)}const ks=100,Fs=100;function Ls(){return Number.EPSILON*ks}function Os(){return.38196601125010515}function Gs(){return 1.4142135623730951}function Qs(){return Number.EPSILON}function Vs(t,s,i){return t===s||t===i}function Us(t,s,i){return t>=s?t<=i?t:i:s}function Ys(t,s,i){const e=t[0];if(e>=s){if(e<=i)return!1;t[0]=i}else t[0]=s;return!0}function js(t,s){return t>=s?s:t<-s?-s:t}function Hs(){return Jt}function $s(){return Kt}function Js(){return Wt}const Ks=3*Js();function Ws(){return Ks}function Xs(t){return t+0}function ti(t){return{v:t}}class si{constructor(){this.m_rn=ti(0n),this.m_rd=ti(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(t,s){const i=t.clone();return void 0!==s&&i.limitPrecisionThis(s),i}static constructDouble(t){return(new si).setDouble(t)}static constructInt64(t){return(new si).setInt64(t)}static constructRational(t,s){return(new si).setRational(t,s)}static constructInt32(t){return this.constructInt64(BigInt(Math.trunc(t)))}[Symbol.toPrimitive](t){return this}compare(t){return this.lt(t)?-1:this.gt(t)?1:0}assignCopy(t){return this.setThis(t)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return(new si).setThis(this)}setThis(t){return this.m_bNaN=t.m_bNaN,this.m_bNormalized=t.m_bNormalized,this.m_rn.v=t.m_rn.v,this.m_rd.v=t.m_rd.v,this.m_power=t.m_power,this.m_sign=t.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(s){if(this.setZero(),0===s)return this;if(Number.isInteger(s)&&Math.abs(s)<ds())return this.setInt32(s);const i=us(s),e=(i&si.s_em)>>52n,n=!!(i&si.s_sm),r=i&si.s_fm;if(e===si.s_emax)return r?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=n?-1n:1n,this.m_rd.v=0n,this);0n===e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("denormalized numbers not yet implemented");const u=e-1023n,h=u>=0n?u:0n,a=u<0n?-u:0n;return this.m_rn.v=(1n<<52n|r)<<h,this.m_rd.v=1n<<52n+a,this.m_sign=n?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(t){return 0n===t?this.setZero():(this.m_bNaN=!1,this.m_sign=t>0n?1:-1,this.m_rn.v=t>0n?t:-t,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(t,s){return 0n===t?0n===s?this.setNAN():this.setZero():0n===s?t>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(t>0n?1:-1)*(s>0n?1:-1),this.m_rn.v=t>0n?t:-t,this.m_rd.v=s>0n?s:-s,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(t){return this.setInt64(BigInt(Math.trunc(t)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&(0n===this.m_rd.v&&1===this.m_sign)}isNegativeInf(){return!this.isNAN()&&(0n===this.m_rd.v&&-1===this.m_sign)}isFinite(){return!this.isNAN()&&0n!==this.m_rd.v}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&t.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&t.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&t.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(t,!1)}thisSubAbs(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}mulThis(t){return t.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=t.m_sign,0===this.m_sign?this.setZero():(this.m_rn.v*=t.m_rn.v,this.m_rd.v*=t.m_rd.v,this.m_power+=t.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(t){return this.mulThis(si.constructDouble(t))}thisMulInt64(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}thisMulInt32(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}divThis(t){return this.mulThis(t.clone().invertThis())}divDoubleThis(t){return this.divThis(si.constructDouble(t))}addDoubleThis(t){return this.addThis(si.constructDouble(t))}subDoubleThis(t){return this.subThis(si.constructDouble(t))}mul(t){return this.clone().mulThis(t)}mulBigIntThis(t){return this.mulThis(si.constructInt64(t))}mulDouble(t){return this.clone().mulThis(si.constructDouble(t))}div(t){return this.clone().divThis(t)}divDouble(t){return this.clone().divDoubleThis(t)}add(t){return this.clone().addThis(t)}fmSubThis(t,s){return this.subThis(t.clone().mulThis(s))}fmAddThis(t,s){return this.addThis(t.clone().mulThis(s))}addThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&t.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&t.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&t.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(t,!0)}addDouble(t){return this.clone().addThis(si.constructDouble(t))}sub(t){return this.clone().subThis(t)}subDouble(t){return this.clone().subThis(si.constructDouble(t))}isZero(){return 0===this.m_sign}equals(t){return this.clone().subThis(t).isZero()}lt(t){return!this.isNAN()&&!t.isNAN()&&(!(this.isPositiveInf()&&t.isPositiveInf()||this.isNegativeInf()&&t.isNegativeInf())&&(!this.isPositiveInf()&&(!!t.isPositiveInf()||this.clone().sub(t).LZ())))}absLessAbs(t){return this.abs().lt(t.abs())}gt(t){return this.clone().sub(t).GZ()}lte(t){return this.sub(t).LEZ()}gte(t){return this.sub(t).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(0n===this.m_rn.v)return this.setZero();let t=0,s=0xffffffffn;for(;0n===(this.m_rn.v&s)&&s<=this.m_rn.v;)s<<=32n,t+=32;s&=this.m_rn.v,s>>=BigInt(t),t+=_(BigInt.asUintN(32,s))-1;let i=0;for(s=0xffffffffn;0n===(this.m_rd.v&s)&&s<=this.m_rd.v;)s<<=32n,i+=32;return s&=this.m_rd.v,s>>=BigInt(i),i+=_(BigInt.asUintN(32,s))-1,this.m_rn.v>>=BigInt(t),this.m_rd.v>>=BigInt(i),this.m_power+=t-i,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):0n===this.m_rn.v?(this.setPositiveInf(),this):(this.m_rd=Pt(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(t){if(0===t)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let s=Number(ms(this.m_rn.v));if(s>t){const i=s-t;this.m_rn.v>>=BigInt(s-t),this.m_power+=i}if(s=Number(ms(this.m_rd.v)),s>t){const i=s-t;this.m_rd.v>>=BigInt(s-t),this.m_power-=i}return this}hiBitIndex(){return Math.max(Number(ms(this.m_rn.v)),Number(ms(this.m_rd.v)))}ldexp(t){return this.clone().ldexpThis(t)}ldexpThis(t){return t&&(this.m_bNormalized=!1,this.m_power+=t,this.normalizeThis()),this}static lerp(t,s,i){return si.lerpLo(s,s,i)}static lerpLo(t,s,i){return s.sub(t).mulThis(i).addThis(t)}static lerpHi(t,s,i){return s.sub(t).mulThis(ii.sub(i)).addThis(t)}LZ(){return!this.isNAN()&&-1===this.m_sign}GZ(){return!this.isNAN()&&1===this.m_sign}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(t,e){if(t.m_sign<0n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("MP_value: sqrt(-1)"),t.isZero())return t.clone();let n=52,r=2220446049250313e-31;for(;n<e;)2*n<=e?(r*=r,n*=2):(r*=2220446049250313e-31,n+=52);n+=52;const u=ms(t.m_rn.v),h=ms(t.m_rd.v);let a,o=t.m_power+Number(u-h);const m=new si;Math.abs(o)>200?(1&Math.abs(o)&&(o+=1),a=si.constructAssign(t,53).ldexpThis(-o).value(),m.setThis(t).ldexpThis(-o),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(Number.isFinite(a))):(m.setThis(t),a=m.value(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(Number.isFinite(a)),o=0),a=Math.sqrt(a);const l=si.constructDouble(a),c=si.constructDouble(r);c.mulThis(l).ldexpThis(1);const f=r*a*2,_=l.clone(),v=new si;let b;for(let s=0;s<10;++s){_.mulThis(l),v.setThis(m).subThis(_).absThis();let t=v.value();if(b=1,t<.9)for(;t>f;)t*=t,++b;else b=4;if(v.lte(c))break;for(let s=0;s<b;s++)_.setThis(l).divThis(m).invertThis().addThis(l).ldexpThis(-1).limitPrecisionThis(n),l.setThis(_)}return l.ldexpThis(o/2)}static cubicRoot(t,s){if(t.isZero())return t.clone();let i=52,e=2220446049250313e-31;for(;i<s;)2*i<=s?(e*=e,i*=2):(e*=2220446049250313e-31,i+=52);i+=52;const n=Math.pow(Math.abs(t.value()),1/3),r=si.constructDouble(n),u=r.clone();u.sqrThis().mulDoubleThis(3).mulDoubleThis(e),u.limitPrecisionThis(32),t.LZ()&&r.negateThis();for(let h=0;h<10;++h){const s=r.clone();s.sqrThis().mulThis(r);const e=s.clone();if(e.subThis(t),e.absThis().limitPrecisionThis(32),e.lte(u))break;e.setThis(t),e.ldexpThis(1),e.addThis(s);const n=s.clone();n.ldexpThis(1),n.addThis(t),e.divThis(n),r.mulThis(e),r.limitPrecisionThis(i)}return r}isInTheRangeOfDouble(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}sign(){return this.m_sign}cosAndSin(t,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}pow(t){return Mt(this,t)}static nan(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),new si}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(0n===this.m_rd.v)return 1===this.m_sign?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;const t=-1===this.m_sign,s=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n);let i=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n);const e=s/i;let n=Number(e);if(BigInt(n)!==e)return t?-n:n;let r=s-e*i;if(r){let t=ms(i)-1023n;t>0n&&(i>>=t,r<<=52n,r>>=t);let s=Number(r);Number.isFinite(s)||(r>>=52n,s=Number(r),t=0n),t>0n&&(s/=Math.pow(2,52));n+=s/Number(i)}return t?-n:n}signVal(){return 1===this.m_sign?1n:-1===this.m_sign?-1n:0n}opPlusMinus(t,s){const i=Math.min(this.m_power,t.m_power);let e,n;this.m_power>i?(e=BigInt(this.m_power-i),n=0n):(e=0n,n=BigInt(t.m_power-i));const r=this.signVal()*this.m_rn.v*t.m_rd.v<<e,u=t.signVal()*t.m_rn.v*this.m_rd.v<<n;return this.m_rn.v=s?r+u:r-u,this.m_rd.v*=t.m_rd.v,this.m_power=i,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}}si.s_sm=0x8000000000000000n,si.s_em=0x7ff0000000000000n,si.s_fm=0x000fffffffffffffn,si.s_emax=0x7ffn;const ii=si.constructInt32(1),ei=si.constructInt32(0),ni=si.constructDouble(.5);function ri(t,s){return d(t^s)}function ui(t,s){let i=os(t);const e=os(s);if(i===e){return i-=53-ri(as(t),as(s)),i}return i>e?i:e}function hi(t,s){for(let i=0,e=0,n=t.length;i<n;i+=2,e++)s[e].x=t[i],s[e].y=t[i+1]}function ai(t){const s=new Float64Array(2*t.length);for(let i=0,e=t.length;i<e;++i){const e=i<<1;s[e]=t[i].x,s[e+1]=t[i].y}return s}function oi(t){const s=Ot(mi,t.length);for(let i=0,e=t.length;i<e;++i)s[i].setCoords(t[i][0],t[i][1]);return s}class mi{static construct(t,s){return new mi(t,s)}constructor(t,s){void 0!==t?(this.x=t,this.y=s):this.x=this.y=Number.NaN}clone(){return new mi(this.x,this.y)}assign(t){this.setCoordsPoint2D(t)}setCoords(t,s){return this.x=t,this.y=s,this}setCoordsPoint2D(t){this.x=t.x,this.y=t.y}isEqualPoint2D(t,s){return void 0!==s?Math.abs(this.x-t.x)<=s&&Math.abs(this.y-t.y)<=s:this.x===t.x&&this.y===t.y}isEqual(t,s,i){return void 0!==i?Math.abs(this.x-t)<=i&&Math.abs(this.y-s)<=i:this.x===t&&this.y===s}equalsPoint2D(t,s){return this.isEqualPoint2D(t,s)}setSub(t,s){this.x=t.x-s.x,this.y=t.y-s.y}addThis(t){return this.x+=t.x,this.y+=t.y,this}setAdd(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this}absoluteOther(t){}absolute(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(t){this.x=-t.x,this.y=-t.y}interpolateThis(t,s){}interpolate(t,i,e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}scaleAddThis(t,s){this.x=this.x*t+s.x,this.y=this.y*t+s.y}setScaleAdd(t,s,i){this.x=s.x*t+i.x,this.y=s.y*t+i.y}scaleOther(t,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}scale(t){this.x*=t,this.y*=t}compare(t){return this.y<t.y?-1:this.y>t.y?1:this.x<t.x?-1:this.x>t.x?1:0}compareX(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}normalizeOther(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}normalize(){const t=this.length();return t?(this.x/=t,this.y/=t):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(t,i){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),{}}static average(t,s){const i=new mi;if(0===s)return i.setNAN(),i;if(1===s)return i.assign(t[0]),i;const e=new n(t[0].x),r=new n(t[0].y);for(let n=1;n<s;n++)e.add(t[n].x),r.add(t[n].y),255&n||(e.normalize(),r.normalize());return i.x=e.getResult()/s,i.y=r.getResult()/s,i}static calculateLength(t,s){const i=new n(0);for(let e=1;e<s;e++)i.add(mi.distance(t[e],t[e-1]));return i.getResult()}offset(t,s){const i=mi.distance(t,s),e=mi.construct(this.x,this.y);if(0===i)return mi.distance(e,t);const n=s.clone();n.subThis(t),e.subThis(t);return e.crossProduct(n)/i}side(t,s){return t.equals(s)?this.equals(t)?0:1:mi.orientationRobust(s,t,this)}static sqrDistance(t,s){const i=t.x-s.x,e=t.y-s.y;return i*i+e*e}static sqrDistanceCoords(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r}static distance(t,s){return Math.sqrt(mi.sqrDistance(t,s))}dotProduct(t){return this.x*t.x+this.y*t.y}dotProductAbs(t){return Math.abs(this.x*t.x)+Math.abs(this.y*t.y)}crossProduct(t){return this.x*t.y-this.y*t.x}crossProductAbs(t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}rotateDirect(t,s){const i=this.x*t-this.y*s,e=this.x*s+this.y*t;this.x=i,this.y=e}rotateReverse(t,s){const i=this.x*t+this.y*s,e=-this.x*s+this.y*t;this.x=i,this.y=e}leftPerpendicularThis(){const t=this.x;this.x=-this.y,this.y=t}leftPerpendicularOther(t){const s=t.x;this.x=-t.y,this.y=s}rightPerpendicularThis(){const t=this.x;this.x=this.y,this.y=-t}rightPerpendicularOther(t){const s=t.x;this.x=t.y,this.y=-s}equals(t){return this.x===t.x&&this.y===t.y}notequals(t){return this.x!==t.x||this.y!==t.y}not(){return!this.x&&!this.y}gt(t){return this.y>t.y||this.y===t.y&&this.x>t.x}gte(t){return!this.lt(t)}lt(t){return this.y<t.y||this.y===t.y&&this.x<t.x}lte(t){return!this.gt(t)}subThis(t){return this.x-=t.x,this.y-=t.y,this}divThis(t){return this.x/=t,this.y/=t,this}add(t){return new mi(this.x+t.x,this.y+t.y)}sub(t){return new mi(this.x-t.x,this.y-t.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new mi(-this.x,-this.y)}mul(t){return new mi(this.x*t,this.y*t)}mulThis(t){return this.x*=t,this.y*=t,this}divide(t){return new mi(this.x/t,this.y/t)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new mi(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return 0===this.x&&0===this.y}norm(t){switch(t){case 0:{const t=Math.abs(this.x),s=Math.abs(this.y),i=t-s;return i>=0?t:i<=0?s:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("norm")}}getQuarter(){return mi.getQuarterCoords(this.x,this.y)}static getQuarterCoords(t,s){return t>0?s>=0?1:4:s>0?2:0===t?4:3}static compareVectors(t,s){const i=t.getQuarter(),e=s.getQuarter();return e===i?mi.orientationRobustImpl(mi.construct(0,0),s,t,!0):i<e?-1:1}static compareVectorsOrigin(t,s,i){const e=s.sub(t),n=i.sub(t),r=e.getQuarter(),u=n.getQuarter();return u===r?mi.orientationRobustImpl(t,i,s,!0):r<u?-1:1}static orientationRobust(t,s,i){return mi.orientationRobustImpl(t,s,i,!1)}static orientationRobustEx(t,s,i,e){if(t.equals(s)||i.equals(e))return 0;const n=s.x-t.x,r=s.y-t.y,u=e.x-i.x,h=e.y-i.y;{const t=mi.getQuarterCoords(n,r)-1,s=mi.getQuarterCoords(u,h)-1,i=mi.d[t][s];if(0!==i)return i}const a=n*h,o=r*u,m=4*Qs()*(Math.abs(a)+Math.abs(o)),l=a-o;if(Math.abs(l)>=m){return l<0?-1:l>0?1:0}return mi.orientationRobustExMp(t,s,i,e)}static orientationRobustExMp(t,s,i,e){const n=si.constructDouble(s.x),r=si.constructDouble(e.x);n.subThis(si.constructDouble(t.x)),r.subThis(si.constructDouble(i.x));const u=si.constructDouble(s.y),h=si.constructDouble(e.y);return u.subThis(si.constructDouble(t.y)),h.subThis(si.constructDouble(i.y)),n.mulThis(h),u.mulThis(r),n.subThis(u),n.LZ()?-1:n.GZ()?1:0}static orientationNonRobust(t,s,i){const e=s.sub(t).crossProduct(i.sub(t));return e<0?-1:e>0?1:0}static orientationRobustImpl(t,s,i,e){if(s.isEqualPoint2D(t)||i.isEqualPoint2D(t)||s.isEqualPoint2D(i))return 0;const n=s.x-t.x,r=s.y-t.y,u=i.x-t.x,h=i.y-t.y;if(!e){const t=mi.getQuarterCoords(n,r)-1,s=mi.getQuarterCoords(u,h)-1,i=mi.d[t][s];if(0!==i)return i}const a=(Math.abs(n)+Math.abs(r)+Math.abs(u)+Math.abs(h))*(Math.abs(s.x)+Math.abs(s.y)+Math.abs(i.x)+Math.abs(i.y))*8*M(),o=n*h-r*u;if(Math.abs(o)>a){return o<0?-1:1}if(g(s.x,t.x)&&g(i.y,t.y)&&g(s.y,t.y)&&g(i.x,t.x)&&y(n,h)&&y(r,u)){const t=n*h,s=r*u;if(g(t,s)){const i=t-s;return i<0?-1:i>0?1:0}}return mi.orientationRobustMp(t,s,i)}static orientationRobustMp(t,s,i){const e=si.constructDouble(s.x),n=si.constructDouble(i.x);{const s=si.constructDouble(t.x);e.subThis(s),n.subThis(s)}const r=si.constructDouble(i.y),u=si.constructDouble(s.y);{const s=si.constructDouble(t.y);r.subThis(s),u.subThis(s)}return e.mulThis(r),u.mulThis(n),e.subThis(u),e.LZ()?-1:e.GZ()?1:0}static inCircleRobust(t,s,i,e){const n=new p,r=new p;n.set(t.x),n.subThis(e.x),r.set(t.y),r.subThis(e.y);const u=new p,h=new p;u.set(s.x),u.subThis(e.x),h.set(s.y),h.subThis(e.y);const a=new p,o=new p;a.set(i.x),a.subThis(e.x),o.set(i.y),o.subThis(e.y);const m=n.mulE(h).subE(r.mulE(u)),l=u.mulE(o).subE(h.mulE(a)),c=n.mulE(o).subE(r.mulE(a)),f=n.mulE(n).addE(r.mulE(r)),_=u.mulE(u).addE(h.mulE(h)),v=a.mulE(a).addE(o.mulE(o)),b=f.mulE(l).subE(_.mulE(c)).addE(v.mulE(m));if(!b.isFuzzyZero()){const t=b.value();return t<0?-1:t>0?1:0}return mi.inCircleRobustMp(t,s,i,e)}static inCircleRobustMp(t,s,i,e){do{if(!g(t.x,e.x)||!g(t.y,e.y))break;if(!g(s.x,e.x)||!g(s.y,e.y))break;if(!g(i.x,e.x)||!g(i.y,e.y))break;const n=t.x-e.x,r=t.y-e.y,u=s.x-e.x,h=s.y-e.y,a=i.x-e.x,o=i.y-e.y;if(!y(n,h)||!y(r,u))break;if(!y(u,o)||!y(h,a))break;if(!y(n,o)||!y(r,a))break;if(!y(n,n)||!y(r,r))break;if(!y(u,u)||!y(h,h))break;if(!y(a,a)||!y(o,o))break;const m=n*h,l=r*u,c=u*o,f=h*a,_=n*o,v=r*a,b=n*n,d=r*r,x=u*u,N=h*h,p=a*a,M=o*o;if(!g(m,l))break;if(!g(c,f))break;if(!g(_,v))break;if(!T(b,d))break;if(!T(x,N))break;if(!T(p,M))break;const E=m-l,I=c-f,w=_-v,D=b+d,A=x+N,P=p+M;if(!y(D,I))break;if(!y(A,w))break;if(!y(P,E))break;const q=D*I,z=A*w,Z=P*E;if(!g(q,z))break;const C=q-z;if(!T(C,Z))break;const R=C+Z;return R<0?-1:R>0?1:0}while(0);const n=si.constructDouble(e.x),r=si.constructDouble(e.y),u=si.constructDouble(t.x),h=si.constructDouble(t.y);u.subThis(n),h.subThis(r);const a=si.constructDouble(s.x),o=si.constructDouble(s.y);a.subThis(n),o.subThis(r);const m=si.constructDouble(i.x),l=si.constructDouble(i.y);m.subThis(n),l.subThis(r);const c=u.mul(o).sub(h.mul(a)),f=a.mul(l).sub(o.mul(m)),_=u.mul(l).sub(h.mul(m)),v=u.mul(u).add(h.mul(h)),b=a.mul(a).add(o.mul(o)),d=m.mul(m).add(l.mul(l)),x=v.mul(f).sub(b.mul(_)).add(d.mul(c));return x.LZ()?-1:x.GZ()?1:0}static inCircleRobustMp3Point(t,s,i){const e=si.constructDouble(t.x),n=si.constructDouble(t.y),r=si.constructDouble(s.x),u=si.constructDouble(s.y),h=si.constructDouble(i.x),a=si.constructDouble(i.y),o=h.mul(h).add(a.mul(a)).sub(h.mul(e).add(a.mul(n)).add(h.mul(r)).add(a.mul(u))).add(e.mul(r).add(n.mul(u)));return o.LZ()?-1:o.GZ()?1:0}static inCircleRobust3Point(t,s,i){const e=new p(t.x),n=new p(t.y),r=new p(s.x),u=new p(s.y),h=new p(i.x),a=new p(i.y),o=h.mulE(h).addE(a.mulE(a)).subE(h.mulE(e).addE(a.mulE(n)).addE(h.mulE(r)).addE(a.mulE(u))).addE(e.mulE(r).addE(n.mulE(u)));if(!o.isFuzzyZero()){const t=o.value();return t<0?-1:t>0?1:0}return mi.inCircleRobustMp3Point(t,s,i)}static calculateCircleCenterFromThreePoints(t,s,i){if(t.equals(i)||t.equals(s)||i.equals(s))return mi.getNAN();const e=li(t,s,i);return e.isNAN()?ci(t,s,i):e}static calculateAngle(t,s){return Math.atan2(t.crossProduct(s),t.dotProduct(s))}static isBisectorRobust(t,i,e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(t){this.x=t}set 1(t){this.y=t}static compareZorder(t,s){const i=mi.c_compare_zorder_xx[t.x<0?1:0]|mi.c_compare_zorder_yy[t.y<0?1:0],e=mi.c_compare_zorder_xx[s.x<0?1:0]|mi.c_compare_zorder_yy[s.y<0?1:0];if(i===e){let i=0,e=0;for(let n=0;n<2;++n){const r=ui(t[n],s[n]);r>i&&(i=r,e=n)}return t[e]<s[e]}return i<e}static lerp(t,s,i){const e=new mi;return Y(t,s,i,e),e}static getClosestCoordinate(t,s,i,e=!1){const n=mi.getNAN();n.setSub(s,t);const r=n.sqrLength();if(0===r)return.5;if(s.isEqualPoint2D(i))return 1;const u=mi.getNAN();u.setSub(i,t);let h=u.dotProduct(n)/r;return e||(h<0?h=0:h>1&&(h=1)),h}static intersectLinesAtOnePoint(t,s,i,e){if(t.equals(s)||i.equals(e))return mi.getNAN();const n=s.x-t.x,r=i.x-e.x,u=s.y-t.y,h=i.y-e.y,a=n*h-r*u;if(!a)return mi.getNAN();const o=a;if(0===o)return mi.getNAN();let m=(i.x-t.x)*h-(i.y-t.y)*r;m/=o;const l=new mi;return Y(t,s,m,l),l.isFinite()?l:mi.getNAN()}toString(){return`[${this.x},${this.y}]`}}function li(t,s,i){const e=new p(s.x);e.subThis(t.x);const n=new p(s.y);n.subThis(t.y);const r=new p(i.x);r.subThis(t.x);const u=new p(i.y);u.subThis(t.y);const h=e.clone();h.mulThisE(u);let a=n.clone();if(a.mulThisE(r),h.subThisE(a),0===h.value())return mi.getNAN();h.mulThis(2);const o=e.clone();o.mulThisE(e);const m=n.clone();m.mulThisE(n);const l=o.clone();l.addThisE(m);const c=r.clone();c.mulThisE(r);const f=u.clone();f.mulThisE(u);const _=c.clone();_.addThisE(f);const v=n.clone();v.mulThisE(_),a=u.clone(),a.mulThisE(l),v.subThisE(a),v.divThisE(h);const b=e.clone();b.mulThisE(_),a=r.clone(),a.mulThisE(l),b.subThisE(a),b.divThisE(h);const d=mi.construct(t.x-v.value(),t.y+b.value()),x=t.sub(d).length(),N=s.sub(d).length(),y=i.sub(d).length(),T=1e-15*(x+Math.abs(t.x)+Math.abs(s.x)+Math.abs(i.x)+Math.abs(t.y)+Math.abs(s.y)+Math.abs(i.y));return Math.abs(x-N)<=T&&Math.abs(x-y)<=T&&v.eps()<T&&b.eps()<T?d:mi.getNAN()}function ci(t,s,i){const e=si.constructDouble(s.x);e.subDoubleThis(t.x);const n=si.constructDouble(s.y);n.subDoubleThis(t.y);const r=si.constructDouble(i.x);r.subDoubleThis(t.x);const u=si.constructDouble(i.y);u.subDoubleThis(t.y);const h=e.clone();h.mulThis(u);let a=n.clone();if(a.mulThis(r),h.subThis(a),h.isZero())return mi.getNAN();h.mulDoubleThis(2);const o=e.clone();o.mulThis(e);const m=n.clone();m.mulThis(n);const l=o.clone();l.addThis(m);const c=r.clone();c.mulThis(r);const f=u.clone();f.mulThis(u);const _=c.clone();_.addThis(f);const v=n.clone();v.mulThis(_),a=u.clone(),a.mulThis(l),v.subThis(a),v.divThis(h);const b=e.clone();b.mulThis(_),a=r.clone(),a.mulThis(l),b.subThis(a),b.divThis(h);return mi.construct(t.x-v.value(),t.y+b.value())}mi.dimensions=2,mi.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],mi.c_compare_zorder_xx=[2,0],mi.c_compare_zorder_yy=[1,0];


/***/ }),

/***/ 57592:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ Rh),
/* harmony export */   A: () => (/* binding */ qh),
/* harmony export */   B: () => (/* binding */ Rg),
/* harmony export */   C: () => (/* binding */ fa),
/* harmony export */   D: () => (/* binding */ Wl),
/* harmony export */   E: () => (/* binding */ cs),
/* harmony export */   F: () => (/* binding */ Xl),
/* harmony export */   G: () => (/* binding */ ql),
/* harmony export */   H: () => (/* binding */ Al),
/* harmony export */   I: () => (/* binding */ Wo),
/* harmony export */   J: () => (/* binding */ Vc),
/* harmony export */   K: () => (/* binding */ wc),
/* harmony export */   L: () => (/* binding */ Oh),
/* harmony export */   M: () => (/* binding */ Tl),
/* harmony export */   N: () => (/* binding */ Zl),
/* harmony export */   O: () => (/* binding */ Eh),
/* harmony export */   P: () => (/* binding */ Cc),
/* harmony export */   Q: () => (/* binding */ Yh),
/* harmony export */   R: () => (/* binding */ Wu),
/* harmony export */   S: () => (/* binding */ as),
/* harmony export */   T: () => (/* binding */ Ka),
/* harmony export */   U: () => (/* binding */ Ag),
/* harmony export */   V: () => (/* binding */ cm),
/* harmony export */   W: () => (/* binding */ kl),
/* harmony export */   X: () => (/* binding */ Pc),
/* harmony export */   Y: () => (/* binding */ um),
/* harmony export */   Z: () => (/* binding */ Lh),
/* harmony export */   _: () => (/* binding */ zh),
/* harmony export */   a: () => (/* binding */ Yu),
/* harmony export */   a0: () => (/* binding */ Xh),
/* harmony export */   a1: () => (/* binding */ _m),
/* harmony export */   a2: () => (/* binding */ qs),
/* harmony export */   a3: () => (/* binding */ Is),
/* harmony export */   a4: () => (/* binding */ vs),
/* harmony export */   a5: () => (/* binding */ Th),
/* harmony export */   a6: () => (/* binding */ Us),
/* harmony export */   a7: () => (/* binding */ Cs),
/* harmony export */   a8: () => (/* binding */ jl),
/* harmony export */   a9: () => (/* binding */ bc),
/* harmony export */   aA: () => (/* binding */ Qu),
/* harmony export */   aB: () => (/* binding */ Ku),
/* harmony export */   aC: () => (/* binding */ Hm),
/* harmony export */   aD: () => (/* binding */ ac),
/* harmony export */   aE: () => (/* binding */ Lu),
/* harmony export */   aF: () => (/* binding */ ss),
/* harmony export */   aG: () => (/* binding */ t_),
/* harmony export */   aH: () => (/* binding */ s_),
/* harmony export */   aI: () => (/* binding */ n_),
/* harmony export */   aJ: () => (/* binding */ r_),
/* harmony export */   aK: () => (/* binding */ i_),
/* harmony export */   aa: () => (/* binding */ Qg),
/* harmony export */   ab: () => (/* binding */ Wg),
/* harmony export */   ac: () => (/* binding */ Lg),
/* harmony export */   ad: () => (/* binding */ cl),
/* harmony export */   ae: () => (/* binding */ fg),
/* harmony export */   af: () => (/* binding */ sr),
/* harmony export */   ag: () => (/* binding */ ir),
/* harmony export */   ah: () => (/* binding */ zm),
/* harmony export */   ai: () => (/* binding */ Wm),
/* harmony export */   aj: () => (/* binding */ ha),
/* harmony export */   ak: () => (/* binding */ Ra),
/* harmony export */   al: () => (/* binding */ ka),
/* harmony export */   am: () => (/* binding */ Uu),
/* harmony export */   an: () => (/* binding */ er),
/* harmony export */   ao: () => (/* binding */ ju),
/* harmony export */   ap: () => (/* binding */ Sa),
/* harmony export */   aq: () => (/* binding */ ya),
/* harmony export */   ar: () => (/* binding */ pa),
/* harmony export */   as: () => (/* binding */ nh),
/* harmony export */   at: () => (/* binding */ tn),
/* harmony export */   au: () => (/* binding */ sn),
/* harmony export */   av: () => (/* binding */ Ys),
/* harmony export */   aw: () => (/* binding */ tc),
/* harmony export */   ax: () => (/* binding */ Ic),
/* harmony export */   ay: () => (/* binding */ zl),
/* harmony export */   az: () => (/* binding */ ks),
/* harmony export */   b: () => (/* binding */ jm),
/* harmony export */   c: () => (/* binding */ Ou),
/* harmony export */   d: () => (/* binding */ ul),
/* harmony export */   e: () => (/* binding */ Lm),
/* harmony export */   f: () => (/* binding */ Km),
/* harmony export */   g: () => (/* binding */ wh),
/* harmony export */   h: () => (/* binding */ Lo),
/* harmony export */   i: () => (/* binding */ Mu),
/* harmony export */   j: () => (/* binding */ al),
/* harmony export */   k: () => (/* binding */ ih),
/* harmony export */   l: () => (/* binding */ da),
/* harmony export */   m: () => (/* binding */ _a),
/* harmony export */   n: () => (/* binding */ aa),
/* harmony export */   o: () => (/* binding */ Fa),
/* harmony export */   p: () => (/* binding */ Ma),
/* harmony export */   q: () => (/* binding */ la),
/* harmony export */   r: () => (/* binding */ kr),
/* harmony export */   s: () => (/* binding */ hh),
/* harmony export */   t: () => (/* binding */ Zn),
/* harmony export */   u: () => (/* binding */ Ko),
/* harmony export */   v: () => (/* binding */ Hu),
/* harmony export */   w: () => (/* binding */ ds),
/* harmony export */   x: () => (/* binding */ mg),
/* harmony export */   y: () => (/* binding */ Ps),
/* harmony export */   z: () => (/* binding */ Dc)
/* harmony export */ });
/* harmony import */ var _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21566);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74642);
/* harmony import */ var _Envelope_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75992);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86330);
/* harmony import */ var _tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(66866);
/* harmony import */ var _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(33147);
/* harmony import */ var _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80690);
/* harmony import */ var _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1804);
/* harmony import */ var _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(50256);
/* harmony import */ var _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(77536);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ss{constructor(e){if(this.m_geom=this.m_sr=null,e){if(e.move)return this.m_geom=e.move.m_geom,e.move.m_geom=null,this.m_sr=e.move.m_sr,void(e.move.m_sr=null);if(e.copy)return this.m_geom=e.copy.m_geom?e.copy.m_geom.clone():null,void(this.m_sr=e.copy.m_sr);e.geom&&(this.m_geom=e.geom),e.sr&&(this.m_sr=e.sr)}}getGeometry(){return this.m_geom}getSpatialReference(){return this.m_sr}setGeometry(e){this.m_geom=e}setSpatialReference(e){this.m_sr=e}equals(e,t){const s=e;return!(!this.m_sr&&s.m_sr)&&(!(this.m_sr&&!s.m_sr)&&(!(!this.m_geom&&s.m_geom)&&(!(this.m_geom&&!s.m_geom)&&(!(this.m_sr&&s.m_sr&&!this.m_sr.equals(s.m_sr))&&!(this.m_geom&&s.m_geom&&!this.m_geom.equals(s.m_geom,t))))))}clone(){let e=null;return this.m_geom&&(e=this.m_geom.clone()),new ss({geom:e,sr:this.m_sr})}hasGeom(){return!!this.m_geom}}class ns{constructor(e){this.m_factor=1,this.m_wkid=0,this.m_peUnit=null,e&&(this.m_peUnit=e,this.m_factor=e.getUnitFactor(),this.m_wkid=e.getCode(),this.m_wkid<0&&(this.m_wkid=0))}getName(){return this.m_peUnit?this.m_peUnit.getName():""}getID(){return this.m_wkid}getConversionFactor(e){return this.getUnitType()!==e.getUnitType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("unit type mismatch"),this.getUnitToBaseFactor()/e.getUnitToBaseFactor()}getUnitToBaseFactor(){return this.m_factor}getHashCode(){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(this.getUnitType()),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(this.getUnitToBaseFactor()))}equals(e){return!!e&&(this.getUnitType()===e.getUnitType()&&this.getUnitToBaseFactor()===e.getUnitToBaseFactor()&&this.getID()===e.getID()&&this.getName()===e.getName())}static isValidWkid(e){return!1}}const rs={330:104878,500:104879,1300:104899,1450:104986,2230:104988,3800:104978,5e3:104919,6200:104906,8200:104909,9500:104927,9600:104977,1e4:[104911,104936],11e3:104941,11080:104872,11100:104907,12e3:104920,12400:104995,13e3:104948,14e3:[104923,104989],15e3:[104913,104954],15100:104976,16e3:[104926,104931],18e3:[104922,104982],21e3:104947,21500:104877,27e3:[104950,104957],29e3:104964,3e4:104921,31e3:104949,33e3:104946,4e4:[104914,104967],40600:104897,41900:104937,42e3:104951,43100:104993,49300:104924,50100:104939,54e3:104955,58200:104981,59500:104930,74e3:104961,77e3:104956,79e3:104962,83500:104910,85e3:104917,88800:104934,89200:104985,96e3:104997,104e3:104963,106500:104898,11e4:104938,133e3:104932,135e3:104983,17e4:104965,198200:104987,198630:104935,208e3:104966,235800:104952,249400:104929,252100:104980,255e3:104973,47e4:104972,529800:104942,531e3:104996,56e4:104928,561400:104979,578900:104945,584700:104959,593e3:104970,606e3:104999,718e3:104933,745700:104984,761400:104953,763500:104994,764e3:104940,788900:104958,1188300:104998,1195e3:104969,1352600:104968,1560800:104874,1562090:104915,1737400:104903,1821460:104918,1821490:104876,2409300:104912,2410300:104873,2439400:104974,2439700:104900,2575e3:104943,2631200:104875,2632345:104916,3393400:104904,3396190:[104905,104971],6051e3:104901,6051800:104902,637e4:104128,6370997:[4052,37008],6371e3:4035,6371007:4047,6371228:[4053,10346],6376045:[8042,8043],6376523:[4027,4901,4902],6376896:37007,6378135:[4122,4322,4324,4720,4985,4987],6378136:[4740,4923,7678,7680,9474,9475,104017,104018],6378137:[3823,3824,3888,3889,4017,4019,4023,4031,4040,4046,4055,4074,4075,4080,4081,4121,4126,4130,4133,4140,4141,4148,4151,4152,4163,4166,4167,4170,4171,4172,4173,4176,4180,4189,4190,4258,4269,4283,4318,4319,4326,4463,4466,4469,4470,4480,4482,4483,4490,4557,4558,4612,4617,4619,4624,4627,4659,4661,4667,4669,4670,4674,4686,4687,4693,4694,4702,4737,4742,4747,4749,4750,4755,4756,4757,4758,4759,4761,4762,4763,4764,4765,4883,4885,4887,4889,4893,4895,4898,4907,4909,4921,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4971,4975,4977,4979,4981,4983,4989,4997,4999,5012,5013,5245,5246,5251,5252,5263,5264,5323,5324,5340,5342,5353,5354,5359,5360,5364,5365,5370,5371,5372,5373,5380,5381,5392,5393,5488,5489,5545,5546,5592,5593,5885,5886,6134,6135,6310,6311,6318,6319,6321,6322,6324,6325,6364,6365,6667,6668,6705,6706,6782,6783,6980,6982,6983,6987,6989,6990,7034,7035,7036,7037,7038,7039,7040,7041,7042,7072,7073,7084,7085,7086,7087,7133,7135,7136,7138,7139,7372,7373,7657,7659,7661,7663,7665,7685,7686,7797,7798,7816,7843,7844,7880,7881,7885,7886,7900,7901,7902,7903,7904,7905,7906,7907,7908,7909,7910,7911,7912,7915,7917,7919,7921,7923,7925,7927,7929,7931,8085,8086,8231,8232,8235,8237,8239,8240,8244,8246,8248,8249,8251,8252,8254,8255,8399,8403,8426,8427,8449,8542,8544,8545,8684,8685,8698,8699,8817,8818,8860,8888,8899,8900,8901,8902,8906,8907,8916,8918,8920,8922,8924,8926,8928,8930,8932,8934,8936,8938,8940,8942,8944,8946,8948,8949,8972,8973,8974,8975,8976,8977,8978,8979,8980,8981,8982,8983,8984,8985,8986,8987,8988,8989,8990,8991,8992,8993,8994,8995,8996,8997,8998,8999,9e3,9002,9003,9005,9006,9008,9009,9011,9012,9013,9014,9016,9017,9018,9019,9053,9054,9055,9056,9057,9059,9060,9061,9062,9063,9064,9065,9066,9067,9068,9069,9071,9072,9074,9075,9139,9140,9147,9148,9152,9153,9183,9184,9293,9294,9299,9308,9309,9332,9333,9364,9372,9379,9380,9384,9453,9469,9470,9546,9547,9695,9696,9701,9702,9739,9754,9755,9758,9763,9776,9777,9778,9779,9781,9782,9783,9784,9866,9871,9939,9964,9969,9974,9989,9990,10175,10177,10178,10185,10191,10196,10204,10209,10214,10219,10224,10229,10237,10272,10277,10283,10284,10298,10299,10300,10304,10305,10307,10309,10310,10311,10312,10327,10328,10413,10414,10468,10474,10475,10570,10571,10605,10606,10623,10628,10638,10639,10670,10671,10672,10673,10689,10690,10724,10725,10738,10739,10761,10762,10780,10781,10784,10785,10799,10800,20033,20040,20041,20045,20046,104009,104010,104011,104012,104013,104014,104015,104016,104019,104020,104021,104022,104024,104027,104028,104050,104100,104107,104108,104110,104111,104114,104115,104116,104117,104118,104119,104120,104121,104122,104123,104124,104129,104133,104134,104137,104141,104142,104143,104144,104145,104179,104180,104181,104182,104183,104184,104185,104186,104199,104223,104257,104258,104259,104260,104286,104287,104602,104613,104644,104645,104646,104647,104653,104804,104896,104991],6378140:4610,6378145:[4025,4276,4760,4891,37001],6378150:37003,6378155:[37004,37207],6378160:[3821,4003,4021,4036,4202,4203,4237,4238,4291,4618,4708,5527,37231,104023,104136],6378166:37002,6378200:[4020,4229,4286,4303,4706],6378245:[4024,4147,4164,4178,4179,4191,4200,4205,4214,4284,4317,4555,4676,4677,4678,4991,4993,5560,5561,37257,104135],6378270:[4732,37005,37229],6378273:[4054,10345],6378300:[4029,4168,4174],6378388:[4022,4123,4153,4154,4158,4159,4160,4161,4165,4181,4182,4183,4184,4185,4192,4194,4195,4196,4199,4204,4207,4208,4215,4218,4221,4224,4225,4230,4231,4233,4235,4236,4247,4248,4249,4254,4255,4259,4264,4265,4271,4272,4274,4285,4287,4288,4292,4297,4309,4311,4313,4316,4472,4475,4611,4614,4615,4616,4621,4622,4623,4625,4626,4628,4629,4630,4631,4632,4633,4636,4637,4639,4641,4642,4643,4644,4645,4646,4658,4660,4662,4663,4664,4665,4668,4672,4673,4684,4688,4689,4690,4691,4692,4698,4704,4705,4707,4709,4710,4711,4712,4714,4715,4716,4718,4719,4721,4722,4724,4725,4727,4728,4729,4730,4733,4734,4735,4739,4741,4753,4754,4802,4803,4806,4809,4810,4823,4824,4900,5524,6883,8428,8430,8431,9248,9251,9253,9403,9893,10158,10249,10252,10635,10636,10735,10736,10758,37201,37204,37205,37212,37213,37214,37215,37216,37217,37218,37219,37221,37222,37224,37226,37227,37230,37232,37233,37234,37235,37237,37238,37241,37242,37245,37246,37247,37249,37250,37251,37253,37259,104104,104106,104125,104126,104127,104130,104138,104248],6378523:104786,24764e3:104960,25559e3:104944,60268e3:104925,71492e3:104908,6957e5:104975,6377397.155:[3819,3906,4004,4120,4124,4125,4149,4150,4156,4162,4211,4219,4257,4262,4280,4289,4294,4295,4301,4306,4308,4312,4314,4613,4666,4745,4746,4801,4804,4805,4808,4813,4814,4815,4818,4820,4904,5132,5228,5229,5681,5830,8351,9267,10268,37255,104101,104102,104105,104131,104648,104696,104697,104990,104992],6377563.396:[4001,4188,4277,4278,4279],6377340.189:[4002,4299,4300],6377492.018:[4005,4273,4817],6377483.865280418:[4006,4293],6378293.645208759:[4007,4157,4302,4738,5464],6378206.4:[4008,4127,4128,4129,4135,4136,4137,4138,4139,4169,4216,4242,4253,4267,4608,4609,4638,4675,4683,4695,4717,4723,4726,4995,5451,5467,37220,37239,37243,37252,37260,104e3,104109,104112,104113,104132],6378450.047:[4009,4268],6378300.789:[4010,4281],6378249.2:[4011,4014,4155,4193,4206,4213,4223,4226,4227,4228,4252,4261,4266,4275,4282,4296,4304,4310,4315,4671,4807,4811,4816,4821,37223,37225,104139,104140,104261,104304],6378249.145:[4012,4013,4132,4134,4142,4143,4175,4197,4198,4201,4209,4210,4212,4220,4222,4232,4234,4246,4250,4251,4256,4260,4263,4270,4305,4307,4600,4601,4602,4603,4604,4605,4606,4607,4620,4679,4680,4696,4697,4699,4700,4701,4703,4713,4731,4736,4743,4744,4812,4819,6881,6882,6892,6894,8694,37206,37208,37211,37228,37240,37254,104025,104026,104103,104305],6377276.345:[4015,4131,4144,4239,4240,4244,4682,5233,6207,37202,104256,104664,104693],6377298.556:[4016,4298],6377304.063:[4018,4245],6378298.3:[4028,4903],6378136.2:4032,6378136.3:4033,6378249.144808011:[4034,4241],20922931.8:[4042,4243],6377301.243:[4044,4145,37203],6377299.151:[4045,4146],6377019.27:[4657,10256,10260,10265],6378306.3696:[4748,4752],6377295.664:[4751,37006],6378136.5:[7682,7683],6371008.7714:104047,6378418.941:[104700,104726,104760],6378586.581:[104701,104743],6378505.809:104702,6378544.823:104703,6378490.569:104704,6378470.757:[104705,104776],6378403.701:[104706,104750],6378434.181:[104707,104724,104739,104764],6378454.907:104708,6378400.653:104709,6378567.378:104710,6378546.957:[104711,104717,104780],6378476.853:[104712,104736],6378411.321:[104713,104728],6378647.541:[104714,104715],6378514.953:[104716,104782],6378421.989:[104718,104770],6378481.425:[104719,104753,104774,104781],6378518.001:[104720,104725],6378521.049:[104721,104723,104731,104745,104748],6378464.661:104722,6378436.619:104727,6378574.389:[104729,104730],6378472.281:[104732,104756],6378498.189:[104733,104746],6378449.421:[104734,104766],6378525.621:[104735,104754],6378466.185:104737,6378496.665:104738,6378643.579:104740,6378559.758:104741,6378414.369:[104742,104763,104772],6378441.801:104744,6378502.761:[104747,104759,104773,104775],6378617.061:104749,6378624.681:[104751,104765],6378468.623:104752,6378445.763:[104755,104758,104761],6378670.401:104757,6378438.753:104762,6378543.909:104767,6378605.783:104768,6378540.861:104769,6378443.325:[104771,104784],6378548.481:104777,6378463.746:104778,6378426.561:104779,6378453.688:104783,6378530.193:104785,6378376.271:[104800,104828],6378471.92:104801,6378472.931:104802,6378411.351:104803,6378380.991:104805,6378414.96:104806,6378345.09:[104807,104819,104844,104870],6378412.542:104808,6378470.401:104809,6378376.331:104810,6378379.031:104811,6378407.621:104812,6378376.811:[104813,104827],6378313.92:104814,6378414.93:104815,6378413.021:104816,6378380.381:104817,6378530.851:104818,6378591.521:104820,6378378.881:104821,6378408.481:[104822,104832],6378375.601:[104823,104838],6378408.041:104824,6378655.071:104825,6378409.151:104826,6378315.7:[104829,104840,104845,104851],6378285.86:[104830,104835,104859],6378379.301:104831,6378560.121:104833,6378531.821:104834,6378500.6:104836,6378376.041:104837,6378406.601:104839,6378438.991:104841,6378345.42:104842,6378593.86:104843,6378381.271:[104846,104847],6378413.671:104848,6378344.377:104849,6378563.891:104850,6378408.091:104852,6378377.671:104853,6378472.751:104854,6378412.511:104855,6378407.281:104856,6378534.451:104857,6378406.051:104858,6378532.921:104860,6378380.091:104861,6378408.941:104862,6378624.171:104863,6378377.411:104864,6378474.591:104865,6378407.141:104866,6378376.871:104867,6378375.251:104868,6378405.971:104869,6378437.651:104871};function is(){for(const e in rs)delete rs[e]}class os extends ns{constructor(e){if("number"==typeof e)return super(),this.m_factor=e,void(this.m_wkid=0);super(e)}getUnitType(){return 1}convertFromRadians(e){return e/this.getUnitToBaseFactor()}convertToRadians(e){return e*this.getUnitToBaseFactor()}}function as(e){return new bu}function hs(e){return e.getType()===bc.PE_TYPE_LINUNIT?new bu(e):e.getType()===bc.PE_TYPE_ANGUNIT?new os(e):void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("peUnit")}function ms(e){const s=Hc(null);return e.getType()===bc.PE_TYPE_PROJCS||e.getType()===bc.PE_TYPE_GEOGCS?s.reset(e.getUnit()):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("PE_coord_sys"),s.get()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("cannot create units from coord sys"),hs(s.get())}class ls{constructor(e,s,n){void 0===e?(this.x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,this.y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,this.z=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H):e instanceof _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d?(this.x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H(e.x),this.y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H(e.y),this.z=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H(e.z)):e instanceof _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H?(this.x=e.clone(),this.y=s.clone(),this.z=n.clone()):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("EPoint3D constructor")}dotProduct(e){return this.x.mulE(e.x).addE(this.y.mulE(e.y)).addE(this.z.mulE(e.z))}crossProduct(e){return new ls(this.y.mulE(e.z).subE(this.z.mulE(e.y)),this.z.mulE(e.x).subE(this.x.mulE(e.z)),this.x.mulE(e.y).subE(this.y.mulE(e.x)))}crossProductVector(e){const t=this.y.mulE(e.z).subE(e.y.mulE(this.z)),s=e.x.mulE(this.z).subE(this.x.mulE(e.z)),n=this.x.mulE(e.y).subE(e.x.mulE(this.y));return new ls(t,s,n)}sqrLength(){return this.x.mulE(this.x).addE(this.y.mulE(this.y)).addE(this.z.mulE(this.z))}length(){return this.sqrLength().sqrt()}static distance(e,t){return e.sub(t).length()}negate(){return new ls(this.x.negate(),this.y.negate(),this.z.negate())}add(e){return new ls(this.x.addE(e.x),this.y.addE(e.y),this.z.addE(e.z))}sub(e){return new ls(this.x.subE(e.x),this.y.subE(e.y),this.z.subE(e.z))}subThis(e){return this.x.subThisE(e.x),this.y.subThisE(e.y),this.z.subThisE(e.z),this}addThis(e){return this.x.addThisE(e.x),this.y.addThisE(e.y),this.z.addThisE(e.z),this}mul(e){return new ls(this.x.mulE(e),this.y.mulE(e),this.z.mulE(e))}div(e){return new ls(this.x.divE(e),this.y.divE(e),this.z.divE(e))}eq(e){return this.x.eq(e.x)&&this.y.eq(e.y)&&this.z.eq(e.z)}isZero(){return this.x.isZero()&&this.y.isZero()&&this.z.isZero()}value(){return _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.construct(this.x.value(),this.y.value(),this.z.value())}}class gs{constructor(e){if(this.m_origin=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_normal=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_axisX=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_axisY=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,!e)return this.m_origin=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_normal=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d(0,0,1),this.m_axisX=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d(1,0,0),void(this.m_axisY=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d(0,1,0));e.pt0&&e.pt1&&e.pt2?this.setFromPoints(e.pt0,e.pt1,e.pt2):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0,`unimplemented constructor options ${JSON.stringify(e)}`)}assign(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),this}set(e,t,s,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}setFromPoints(e,t,s){let n=t.sub(e);const r=s.sub(e);this.m_normal=n.crossProductVector(r);let i=!0;if(this.m_normal.isZero()){if(i=!1,n.isZero()&&(n=r),n.isZero()){const t=0,s=1;return this.m_normal.setCoords(t,t,s),this.m_axisX.setCoords(s,t,t),this.m_axisY.setCoords(t,s,t),this.m_origin=e,!1}this.m_axisX=n.getUnitVector(),this.m_normal=this.m_axisX.createAPerpendicular()}else this.m_normal.normalizeThis(),this.m_axisX=n.getUnitVector();return this.m_axisY=this.m_normal.crossProductVector(this.m_axisX),this.m_origin=e,i}getCoord(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}getCoord2D(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}getCoordX(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getCoordY(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getCoordZ(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}setPreferredAxisX(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}getOrigin(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}getNormal(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}getAxisX(){return this.m_axisX.clone()}getAxisY(){return this.m_axisY.clone()}setAxisX(e,t=!1){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}setAxisY(e,t=!1){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}recalculateAxisY(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}setOrigin(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}setNormal(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}intersect(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}intersectLine(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}intersectLineEx(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}closestCoordinate(e){const t=e.sub(this.m_origin),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;return s.x=t.dotProduct(this.m_axisX),s.y=t.dotProduct(this.m_axisY),s}projectVector(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}signedDistance(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}distance(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}}function us(e,t){return!1}function cs(e,t,s,n,r=100,i=us){let o,h,m,l,g,u,c,_,d;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n>0);let p,f,x,y=0,P=0;const E=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aq)();t>s&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(t,t=s));const S=e(t),C=e(s);S<C?(o=h=m=t,l=g=u=S):(o=h=m=s,l=g=u=C);let I=0;for(;I<r&&(x=.5*(s-t),d=t+x,p=n*(Math.abs(o)+.25),f=2*p,!(i(o,l)||Math.abs(o-d)<=f-x));++I){if(Math.abs(P)>p){const e=(o-h)*(l-u);let n=(o-m)*(l-g),r=(o-m)*n-(o-h)*e;n=2*(n-e),n>0&&(r=-r),n=Math.abs(n);const i=P;P=y,Math.abs(r)>=Math.abs(n*i*.5)||r<=n*(t-o)||r>=n*(s-o)?(P=o>=d?t-o:s-o,y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aq)()*P):(y=r/n,_=o+y,(_-t<f||s-_<f)&&(y=d-o<0?-Math.abs(p):Math.abs(p)))}else P=o>=d?t-o:s-o,y=P*E;_=o+y,c=e(_),c<l?(_>=o?t=o:s=o,m=h,h=o,o=_,u=g,g=l,l=c):(_<o?t=_:s=_,c<=g||h===o?(m=h,h=_,u=g,g=c):(c<=u||m===o||m===h)&&(m=_,u=c))}return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(o,l)}function _s(e,t,s){if(e>s){e-=Math.ceil((e-s)/_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.p)*_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.p}else if(e<t){e+=Math.ceil((t-e)/_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.p)*_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.p}return e}function ds(e,t,s){return ps(e,t,s,0)}function ps(e,t,s,n){const r=s.x,i=s.y;return xs(e,t,Math.cos(r),Math.sin(r),Math.cos(i),Math.sin(i),n)}function fs(e,t,s,n,r,i){return xs(e,t,s,n,r,i,0)}function xs(e,t,s,n,r,i,o){const a=e/Math.sqrt(1-t*i*i),h=a+o,m=h*r*s,l=h*r*n,g=(a*(1-t)+o)*i;return _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.construct(m,l,g)}function ys(e,t,s){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H;n.setCos(s.x),r.setSin(s.x),i.setCos(s.y),o.setSin(s.y);const a=o.negate().mulE(o.mul(t)).add(1).sqrt(),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H(e).divE(a),m=h.mulE(i).mulE(n),l=h.mulE(i).mulE(r),g=h.mul(1-t).mulE(o);return new ls(m,l,g)}function Ps(e,t,s){const n=s.x,r=s.y,i=s.z,o=Math.atan2(r,n),a=Math.sqrt(n*n+r*r),h=Math.atan2(i,(1-t)*a);return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(o,h)}function Es(e,t,s){const n=1-t,r=e/Math.sqrt((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(s.x)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(s.y)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(s.z)/n);return s.mul(r)}function Ss(e,t,s,n,r){const i=ds(e,t,s),o=ds(e,t,n);return Ps(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(i,o,r))}function Cs(e,t,s){const n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d;return n.setCrossProductVector(t,s),Math.abs(Math.atan2(n.length(),t.dotProduct(s)))*e}function Is(e,t,s,n,r){const i=s.getUnitVector(),o=n.getUnitVector(),a=t.getUnitVector(),h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d;if(h.setCrossProductVector(i,o),!h.isZero()){h.normalizeThis();const t=a.sub(h.mul(h.dotProduct(a)));if(!t.isZero()){t.normalizeThis();const s=i.add(o).mul(.5);if(s.dotProduct(t)>s.dotProduct(i)){const s=Math.abs(h.dotProduct(a)),n=Math.asin(s);return r.assign(t.getUnitVector().mul(e)),n*e}}}const m=Cs(1,i,a),l=Cs(1,o,a);return m<=l?(r.assign(s),m*e):(r.assign(n),l*e)}function bs(e,t,s,n){const r={stack:[],error:void 0,hasError:!1};try{const i=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(r,new Cc,!1);return Dc.geodeticDistance(e,t,s.x,s.y,n.x,n.y,i,null,null,bc.PE_LINETYPE_GEODESIC),i.val}catch(i){r.error=i,r.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(r)}}function ws(e,t,s,n,r){switch((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s.isFinite()&&n.isFinite()),r){case 0:return bs(e,t,s,n);case 1:return Ts(e,t,s);case 2:case 3:{const r=ds(e,t,s),i=ds(e,t,n);return _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(r,i)}default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("")}}function vs(e,t,s,n,r,i=0,o){if(2===i||3===i)return Ns(e,t,s,n,r,3===i,o);const a=Ps(e,t,s),h=s=>{const o=Ps(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(n,r,s));return ws(e,t,a,o,i)},m=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(n,r);if(m>0){const s=Os(e,m),{first:i,second:a}=cs(h,0,1,s);return o&&o.assign(Es(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(n,r,i))),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(i,a)}{const e=h(0);return o&&o.assign(n),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(.5,e)}}function Ns(e,t,s,n,r,i=!1,o){const a=Es(e,t,s);if(i){const i=new gs({pt0:new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d(0,0,0),pt1:n,pt2:r}),h=i.closestCoordinate(s),m=i.closestCoordinate(n),l=i.closestCoordinate(r),g=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getClosestCoordinate(m,l,h),u=Es(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(n,r,g)),c=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(u,a);return o&&o.assign(u),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(g,c)}const h=s=>{const i=Es(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(n,r,s));return _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(i,a)},m=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(n,r);if(m>0){const s=Os(e,m),{first:i,second:a}=cs(h,0,1,s);return o&&o.assign(Es(e,t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.lerp(n,r,i))),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(i,a)}{const e=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(s,n);return o&&o.assign(s),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(.5,e)}}function Ts(e,t,s,n){const r={stack:[],error:void 0,hasError:!1};try{const n=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(r,new Cc,!1);return Dc.greatEllipticDistance(e,t,s.x,s.y,s.x,s.y,n,null,null),n.val}catch(i){r.error=i,r.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(r)}}function Gs(e,t,s,n,r){if(Math.abs(s.x-n.x)>Math.PI)return Number.NaN;if(Math.abs(s.y)>_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o||Math.abs(n.y)>_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)return Number.NaN;if((Math.abs(s.y)===_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o||Math.abs(n.y)===_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)&&s.x!==n.x)return Number.NaN;const{first:i,second:o}=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aE)(s.x,n.x);let a=r;a=_s(a,i,o);if(!_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.construct(s.x,n.x).containsCoordinate(a))return Number.NaN;const h=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(s),m=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(n),l=ys(1,t,h),g=ys(1,t,m),u=l.crossProductVector(g);if(u.z.isZero()){return s.y}const c=u.x.divE(u.z.negate()),_=u.y.divE(u.z.negate()),d=c.mulE(c).addE(_.mulE(_)).sqrt();if(d.isZero()||c.isZero()&&_.isZero()){return s.y}const p=Math.atan2(_.value(),c.value());let f=Math.atan2(d.value()*Math.cos(p-a),1-t);const x=ds(1,t,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(a,f)),y=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.construct(x.x,x.y,-x.z),P=u.value().dotProduct(x),E=u.value().dotProduct(y);return Math.abs(E)<Math.abs(P)&&(f=-f),f}function Ds(e,t,s,n,r,i){if(i[0]=Number.NaN,i[1]=Number.NaN,Math.abs(s.x-n.x)>Math.PI)return 0;if(Math.abs(s.y)>_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o||Math.abs(n.y)>_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)return 0;if((Math.abs(s.y)===_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o||Math.abs(n.y)===_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)&&s.x!==n.x)return 0;if(Math.abs(r)>=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)return 0;if(s.y>0&&n.y>0&&s.y>r&&n.y>r||s.y<0&&n.y<0&&s.y<r&&n.y<r)return 0;const o=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(s),a=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(n),h=ys(1,t,o),m=ys(1,t,a),l=h.crossProductVector(m);if(l.z.isZero()){return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.construct(s.y,n.y).containsCoordinate(r)?(i[0]=s.x,1):0}const g=l.x.divE(l.z.negate()),u=l.y.divE(l.z.negate()),c=g.mulE(g).addE(u.mulE(u)).sqrt();if(c.isZero()||g.isZero()&&u.isZero())return 0===r?(i[0]=s.x,i[1]=n.x,2):0;const _=(1-t)*Math.tan(r)/c.value();if(Math.abs(_)>1)return 0;const d=Math.acos(_),p=Math.atan2(u.value(),g.value()),f=p-d;let x=p+d;const y=Math.min(s.x,n.x),P=Math.max(s.x,n.x);_s(f,y,P),0!==r?_s(x,y,P):x=f;let E=0;return y<=f&&f<=P&&(i[E]=f,E++),x!==f&&y<=x&&x<=P&&(i[E]=x,E++),E}function Vs(e,t){t[0]>.5*Math.PI?(e[0]+=Math.PI,t[0]=Math.PI-t[0]):t[0]<.5*-Math.PI&&(e[0]-=Math.PI,t[0]=-Math.PI-t[0]),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t[0]>=.5*-Math.PI&&t[0]<=.5*Math.PI)}function Fs(e,t){return e*Math.sqrt(1-t)}function Hs(e){return 1-e}function ks(e,t,s,n,r){n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(n,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(r,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-.03;let o;o=n>i&&r>i||n<-i&&r<-i?As(e,n,r):Ms(e,r)-Ms(e,n);return.5*(s-t)*o*Hs(e)}function As(e,t,s){let n=1;if(t<0&&(n=-1,t=-t,s=-s),0!==e){const r=e*e,i=r*e,o=[1,(1+11*e)/12,(1+118*e+241*r)/360,(1+1089*e+10419*r+8651*i)/20160,(1+9836*e+318246*r+1027436*i+458881*(i*e))/1814400],a=t=>{let s=0;const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(t)/(e-1);for(let e=o.length-1;e>=0;--e)s=o[e]+s*n;return s*=-(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(t/(1-e)),s},h=a(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-t);return(a(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-s)-h)*n}{const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-t,r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-s,i=-4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(Math.sin(e/2));return(-4*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(Math.sin(r/2))-i)*n}}function Ms(e,t){if(0===t)return 0;const s=Math.sin(t);let n=s,r=s;if(0!==e){n/=1-e*s*s;const t=Math.sqrt(e);r=s*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.y)(t*s)}return n+r}function Us(e,t){return e/Math.sqrt(1-t)}function qs(e,t){return(1-t)*e}function Bs(e,t,s){const n=s/(2*qs(e,t)),r=n*n;return s*(1-r*(.16666666666666666-.008333333333333333*r))}function Os(e,t){if(0!==t){const s=e*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aJ)()/t;return Math.min(s,1e-10)}return 0}class Ys{constructor(e){this.m_currentShift=63n,this.m_currentElt=0n,this.m_iCurrentElt=-1,this.m_parent=e,this.m_aiSetElts=e.m_bits.flatMap(((e,t)=>t))}next(){if(this.m_currentShift++,64n===this.m_currentShift){if(this.m_iCurrentElt++,this.m_iCurrentElt===this.m_aiSetElts.length)return Ys.npos();this.m_currentShift=0n,this.m_currentElt=this.m_parent.m_bits[this.m_aiSetElts[this.m_iCurrentElt]]}for(;this.m_currentShift<63n&&!(this.m_currentElt&1n<<this.m_currentShift);)this.m_currentShift++;return this.m_currentElt&1n<<this.m_currentShift?64*this.m_aiSetElts[this.m_iCurrentElt]+Number(this.m_currentShift):this.next()}static npos(){return Number.MAX_SAFE_INTEGER}}function Rs(e){return 1n<<(0x3fn&BigInt(e))}function Xs(e){return e>>6}class Ls{constructor(e){this.m_bits=[],void 0!==e&&e.copy&&(this.m_bits=e.copy.m_bits.slice())}assignMove(){return this}assignCopy(){return this}hasBit(e){const t=Rs(e),s=Xs(e);return void 0!==this.m_bits[s]&&!!(this.m_bits[s]&t)}setBit(e){const t=Rs(e),s=Xs(e);void 0===this.m_bits[s]&&(this.m_bits[s]=0n),this.m_bits[s]|=t}clearBit(e){}flipBit(e){const t=Rs(e),s=Xs(e);return void 0===this.m_bits[s]&&(this.m_bits[s]=0n),this.m_bits[s]^=t,0n!==(this.m_bits[s]&t)}clear(){this.m_bits.length=0}isZero(){let e=0;return this.m_bits.forEach((t=>{e|=t?2:1})),!(2&e)}equals(e){if(this===e)return!0;if(this.m_bits.length!==e.m_bits.length)return!1;let t=0;return this.m_bits.forEach(((s,n)=>{t|=s===e.m_bits[n]?2:1})),!(1&t)&&(e.m_bits.forEach(((e,s)=>{t|=e===this.m_bits[s]?2:1})),!(1&t))}notEquals(e){return!this.equals(e)}assignOr(e){return e.m_bits.forEach(((e,t)=>{void 0===this.m_bits[t]?this.m_bits[t]=e:this.m_bits[t]|=e})),this}assignSubtract(e){return e.m_bits.forEach(((e,t)=>{void 0!==this.m_bits[t]&&(this.m_bits[t]&=~e)})),this}assignAnd(e){return e.m_bits.forEach(((e,t)=>{void 0!==this.m_bits[t]&&(this.m_bits[t]&=e)})),this}assignXor(e){return e.m_bits.forEach(((e,t)=>{void 0===this.m_bits[t]?this.m_bits[t]=e:this.m_bits[t]^=e})),this}getHashCode(){return this.m_bits.reduce(((e,t)=>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aB)(e,t)),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(0))}getUnorderedBitIterator(){return new Ys(this)}}class zs{constructor(e,t){this.m_map=new Map,this.m_hf=e,this.m_ef=t}add(e){const t=this.m_hf(e);if(!this.m_map.has(t))return this.m_map.set(t,e),this;const s=this.m_map.get(t);return s instanceof Array?s.find((t=>this.m_ef(t,e)))||s.push(e):this.m_ef(s,e)||this.m_map.set(t,[s,e]),this}clear(){this.m_map.clear()}delete(e){return!1}has(e){const t=this.m_hf(e);if(!this.m_map.has(t))return!1;const s=this.m_map.get(t);return s instanceof Array?void 0!==s.find((t=>this.m_ef(t,e))):this.m_ef(s,e)}get(e){const t=this.m_hf(e),s=this.m_map.get(t);if(void 0!==s)return s instanceof Array?s.find((t=>this.m_ef(t,e))):s}get size(){let e=0;for(const t of this.m_map.values())e+=t instanceof Array?t.length:1;return e}forEach(e,t){}[Symbol.iterator](){return(new Set)[Symbol.iterator]()}entries(){return(new Set).entries()}keys(){return(new Set).keys()}values(){return(new Set).values()}get[Symbol.toStringTag](){return"ValueSet"}}class Ws extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e){super(),this.m_bufferLeft=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,this.m_bufferRight=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,this.m_intervalLeft=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty(),this.m_intervalRight=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty(),this.m_yScanline=Number.NaN,this.m_helper=e}compare(e,t,s){const n=t,r=e.getElement(s);this.m_helper.querySegmentXY(n,this.m_bufferLeft),this.m_helper.querySegmentXY(r,this.m_bufferRight);const i=this.m_bufferLeft.get(),o=this.m_bufferRight.get();if(this.m_intervalLeft.setCoords(i.getStartX(),i.getEndX()),this.m_intervalRight.setCoords(o.getStartX(),o.getEndX()),this.m_intervalLeft.vmax<this.m_intervalRight.vmin)return-1;if(this.m_intervalLeft.vmin>this.m_intervalRight.vmax)return 1;const a=i.getStartY()===i.getEndY(),h=o.getStartY()===o.getEndY();if(a||h){if(a&&h)return 0;if(i.getStartY()===o.getStartY()&&i.getStartX()===o.getStartX())return a?1:-1;if(i.getEndY()===o.getEndY()&&i.getEndX()===o.getEndX())return a?-1:1}let m=i.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalLeft.vmin),l=o.intersectionOfYMonotonicWithAxisX(this.m_yScanline,this.m_intervalRight.vmin);if(m===l){const e=i.getEndY(),t=o.getEndY(),s=Math.min(e,t);let n=.5*(s+this.m_yScanline);n===this.m_yScanline&&(n=s),m=i.intersectionOfYMonotonicWithAxisX(n,this.m_intervalLeft.vmin),l=o.intersectionOfYMonotonicWithAxisX(n,this.m_intervalRight.vmin)}return m<l?-1:m>l?1:0}setY(e){this.m_yScanline=e}}class js{constructor(e){this.m_segmentBuffer=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,this.m_point=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_parent=e}setPointXY(e){this.m_point.assign(e)}compare(e,t){const s=e.getElement(t);this.m_parent.querySegmentXY(s,this.m_segmentBuffer);const n=this.m_segmentBuffer.get(),r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;if(r.setCoords(n.getStartX(),n.getEndX()),this.m_point.x<r.vmin)return-1;if(this.m_point.x>r.vmax)return 1;const i=n.intersectionOfYMonotonicWithAxisX(this.m_point.y,this.m_point.x);return this.m_point.x<i?-1:this.m_point.x>i?1:0}}var Zs,Ks;function Qs(e,t){return{parentage:e,rank:t}}function Js(e,t){const s=e.length;if(s!==t.length)return!1;const n=e[0].parentage;if(n!==t[0].parentage)return!1;if(-1===n)return!0;for(let r=1;r<s;++r)if(e[r].parentage!==t[r].parentage)return!1;return!0}function $s(e,t,s){s.length=0;let n=!1;{let r=e.getHalfEdgeVertexIterator(t);for(;r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const t=e.getVertexFromVertexIterator(r),i=e.getShape().getSegmentRank(t),o=e.getShape().getSegmentParentage(t);n||=o>=0,s.push(Qs(o,i)),r=e.incrementVertexIterator(r)}}{let r=e.getHalfEdgeVertexIterator(e.getHalfEdgeTwin(t));for(;r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const t=e.getVertexFromVertexIterator(r),i=e.getShape().getSegmentRank(t),o=e.getShape().getSegmentParentage(t);n||=o>=0,s.push(Qs(o,i)),r=e.incrementVertexIterator(r)}}n&&s.sort(((e,t)=>e.rank>t.rank?-1:e.rank<t.rank?1:e.parentage<t.parentage?-1:e.parentage>t.parentage?1:0)),-1===s[0].parentage&&(s.length=1)}function en(){return new zs((e=>e.getHashCode()),((e,t)=>e.equals(t)))}!function(e){e[e.enumInputModeBuildGraph=0]="enumInputModeBuildGraph",e[e.enumInputModeSimplifyAlternate=1]="enumInputModeSimplifyAlternate",e[e.enumInputModeSimplifyWinding=2]="enumInputModeSimplifyWinding"}(Zs||(Zs={})),function(e){e[e.enumSegmentParentageBreakNode=1]="enumSegmentParentageBreakNode",e[e.enumPathBreakNode=2]="enumPathBreakNode"}(Ks||(Ks={}));class tn{constructor(){this.m_shape=null,this.m_clusterData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(8),this.m_clusterVertices=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(2),this.m_firstCluster=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_lastCluster=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_halfEdgeData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(8),this.m_chainData=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(8),this.m_chainAreas=null,this.m_chainPerimeters=null,this.m_universeChain=-1,this.m_simplifiedGeometry=-1,this.m_edgeIndices=[],this.m_clusterIndices=[],this.m_chainIndices=[],this.m_bBuildGeometryParentageSets=!1,this.m_chainBitSetIndex=-1,this.m_edgeBitSetIndex=-1,this.m_edgeBitSetIndexLeft=-1,this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_uniqueBitSets=null,this.m_chainBitSets=[],this.m_edgeBitSets=[],this.m_checkDirtyPlanesweepTolerance=Number.NaN,this.m_geometryIDIndex=-1,this.m_clusterIndex=-1,this.m_halfEdgeIndex=-1,this.m_tmpHalfEdgeParentageIndex=-1,this.m_tmpHalfEdgeParentageIndexLeft=-1,this.m_tmpHalfEdgeWindingNumberIndex=-1,this.m_tmpHalfEdgeOddEvenNumberIndex=-1,this.m_segmentParentageIndex=-1,this.m_segmentIndexHe=-1,this.m_clusterBreakNodeIndex=-1,this.m_universeGeomID=-1,this.m_pointCount=0,this.m_progressCounter=0,this.m_bBuildChains=!0,this.m_bDirtyCheckFailed=!1}setCheckDirtyPlanesweepTolerance(e){this.m_checkDirtyPlanesweepTolerance=e}dirtyCheckFailed(){return this.m_bDirtyCheckFailed}getShape(){return this.m_shape}setEditShape(e,t,s=!0,n=!1){n?this.setEditShapeImpl3D_(e,Zs.enumInputModeBuildGraph,null,t,!1):this.setEditShapeImpl_(e,Zs.enumInputModeBuildGraph,null,t,s)}setAndSimplifyEditShapeAlternate(e,t,s=null,r=!1){const i=[];i.push(t),this.m_simplifiedGeometry=t,r?this.setEditShapeImpl3D_(e,Zs.enumInputModeSimplifyAlternate,i,s,!1):this.setEditShapeImpl_(e,Zs.enumInputModeSimplifyAlternate,i,s,e.getGeometryType(t)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)}setAndSimplifyEditShapeWinding(e,t,s=null){const n=[];n.push(t),this.m_simplifiedGeometry=t,this.setEditShapeImpl_(e,Zs.enumInputModeSimplifyWinding,n,s,!0)}removeShape(){null!==this.m_shape&&(-1!==this.m_geometryIDIndex&&(this.m_shape.removeGeometryUserIndex(this.m_geometryIDIndex),this.m_geometryIDIndex=-1),-1!==this.m_clusterIndex&&(this.m_shape.removeUserIndex(this.m_clusterIndex),this.m_clusterIndex=-1),-1!==this.m_halfEdgeIndex&&(this.m_shape.removeUserIndex(this.m_halfEdgeIndex),this.m_halfEdgeIndex=-1),-1!==this.m_tmpHalfEdgeParentageIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),-1!==this.m_tmpHalfEdgeParentageIndexLeft&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),-1!==this.m_tmpHalfEdgeWindingNumberIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),-1!==this.m_tmpHalfEdgeOddEvenNumberIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1),-1!==this.m_segmentParentageIndex&&(this.deleteUserIndexForHalfEdges(this.m_segmentParentageIndex),this.m_segmentParentageIndex=-1),-1!==this.m_segmentIndexHe&&(this.deleteUserIndexForHalfEdges(this.m_segmentIndexHe),this.m_segmentIndexHe=-1),-1!==this.m_clusterBreakNodeIndex&&(this.deleteUserIndexForClusters(this.m_clusterBreakNodeIndex),this.m_clusterBreakNodeIndex=-1),this.deleteEdgeBitSets_(),this.deleteChainBitSets_(),this.m_emptyBitSet=null,this.m_geometryMapID=null,this.m_shape=null,this.m_clusterData.deleteAll(!0),this.m_clusterVertices.deleteAll(!0),this.m_firstCluster=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_lastCluster=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_halfEdgeData.deleteAll(!0),this.m_edgeIndices.length=0,this.m_clusterIndices.length=0,this.m_chainIndices.length=0,this.m_chainData.deleteAll(!0),this.m_universeChain=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_chainAreas=null)}getClusterHalfEdge(e){return this.m_clusterData.getField(e,2)}queryXY(e,t){const s=this.getClusterVertexIndex_(e);t.assign(this.m_shape.getXYWithIndex(s))}queryXYZ(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}getClusterParentage(e){return this.m_clusterData.getField(e,1)}getFirstCluster(){return this.m_firstCluster}getPrevCluster(e){return this.m_clusterData.getField(e,3)}getNextCluster(e){return this.m_clusterData.getField(e,4)}getClusterChain(e){return this.m_clusterData.getField(e,6)}getClusterVertexIterator(e){return this.m_clusterData.getField(e,7)}incrementVertexIterator(e){return this.m_clusterVertices.getField(e,1)}getVertexFromVertexIterator(e){return this.m_clusterVertices.getField(e,0)}getClusterUserIndex(e,t){const s=this.getClusterIndex_(e),n=this.m_clusterIndices[t];return n.size()<=s?-1:n.read(s)}setClusterUserIndex(e,t,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[t];r.size()<=n&&r.resize(this.m_clusterData.size(),-1),r.write(n,s)}hasClusterUserIndexFlags(e,t,s){if(-1===t)return!1;const n=this.getClusterUserIndex(e,t);return-1!==n&&0!==(s&n)}setClusterUserIndexFlags(e,t,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[t];r.size()<=n&&r.resize(this.m_clusterData.size(),-1);let i=r.read(n);-1===i&&(i=0),r.write(n,s|i)}clearClusterUserIndexFlags(e,t,s){const n=this.getClusterIndex_(e),r=this.m_clusterIndices[t];r.size()<=n&&r.resize(this.m_clusterData.size(),-1);let i=r.read(n);-1===i&&(i=0),r.write(n,~s&i)}createUserIndexForClusters(e=-1){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(this.m_clusterData.capacity(),e);for(let s=0,n=this.m_clusterIndices.length;s<n;s++)if(null===this.m_clusterIndices[s])return this.m_clusterIndices[s]=t,s;this.m_clusterIndices.push(t);return this.m_clusterIndices.length-1}deleteUserIndexForClusters(e){this.m_clusterIndices[e]=null}getHalfEdgeOrigin(e){return this.m_halfEdgeData.getField(e,1)}getHalfEdgeTo(e){return this.getHalfEdgeOrigin(this.getHalfEdgeTwin(e))}getHalfEdgeTwin(e){return this.m_halfEdgeData.getField(e,4)}getHalfEdgePrev(e){return this.m_halfEdgeData.getField(e,5)}getHalfEdgeNext(e){return this.m_halfEdgeData.getField(e,6)}getHalfEdgeChain(e){return this.m_halfEdgeData.getField(e,2)}getHalfEdgeFaceParentage(e){return this.getChainParentage(this.getHalfEdgeChain(e))}getHalfEdgeVertexIterator(e){return this.m_halfEdgeData.getField(e,7)}getHalfEdgeFromXY(e,t){this.queryXY(this.getHalfEdgeOrigin(e),t)}getHalfEdgeToXY(e,t){this.queryXY(this.getHalfEdgeTo(e),t)}isHalfEdgeCurve(e){if(-1!==this.m_segmentIndexHe){return-1!==this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)}return!1}getHalfEdgeFromXYZ(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}getHalfEdgeToXYZ(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}getHalfEdgeParentage(e){return this.m_halfEdgeData.getField(e,3)&tn.c_EdgeParentageMask}getHalfEdgeUserIndex(e,t){const s=this.getHalfEdgeIndex_(e),n=this.m_edgeIndices[t];return n.size()<=s?-1:n.read(s)}setHalfEdgeUserIndex(e,t,s){const n=this.getHalfEdgeIndex_(e),r=this.m_edgeIndices[t];r.size()<=n&&r.resize(this.m_halfEdgeData.size(),-1),r.write(n,s)}createUserIndexForHalfEdges(e){void 0===e&&(e=-1);const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(this.m_halfEdgeData.capacity(),e);for(let n=0,r=this.m_edgeIndices.length;n<r;n++)if(null===this.m_edgeIndices[n])return this.m_edgeIndices[n]=t,n;this.m_edgeIndices.push(t);const s=this.m_edgeIndices.length-1;return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s>=0&&s<=Number.MAX_SAFE_INTEGER),s}deleteUserIndexForHalfEdges(e){this.m_edgeIndices[e]=null}deleteEdgesBreakFaces_(e){for(let t=0,s=e.length;t<s;t++){const s=e[t],n=this.getHalfEdgeChain(s),r=this.getHalfEdgeTwin(s),i=this.getHalfEdgeChain(r);this.setChainHalfEdge_(n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),this.setChainHalfEdge_(i,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),this.updateVertexToHalfEdgeConnection_(s,!0),this.deleteEdgeImpl_(s)}}doesHalfEdgeBelongToAPolygonInterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesHalfEdgeBelongToAPolygonExterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesHalfEdgeBelongToAPolygonBoundary(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesHalfEdgeBelongToAPolylineInterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesHalfEdgeBelongToAPolylineExterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesClusterBelongToAPolygonInterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesClusterBelongToAPolygonExterior(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}doesClusterBelongToAPolygonBoundary(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getFirstChain(){return this.m_universeChain}getChainHalfEdge(e){return this.m_chainData.getField(e,1)}getChainParentage(e){return this.m_chainData.getField(e,2)}getChainParent(e){return this.m_chainData.getField(e,3)}getChainFirstIsland(e){return this.m_chainData.getField(e,4)}getChainNextInParent(e){return this.m_chainData.getField(e,5)}getChainNext(e){return this.m_chainData.getField(e,7)}getChainArea(e){const t=this.getChainIndex_(e);let s=this.m_chainAreas.read(t);return Number.isNaN(s)&&(this.updateChainAreaAndPerimeter_(e),s=this.m_chainAreas.read(t)),s}getChainPerimeter(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getChainUserIndex(e,t){const s=this.getChainIndex_(e),n=this.m_chainIndices[t];return n.size()<=s?-1:n.read(s)}setChainUserIndex(e,t,s){const n=this.getChainIndex_(e),r=this.m_chainIndices[t];r.size()<=n&&r.resize(this.m_chainData.size(),-1),r.write(n,s)}createUserIndexForChains(){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(this.m_chainData.capacity(),-1);for(let t=0,s=this.m_chainIndices.length;t<s;t++)if(null===this.m_chainIndices[t])return this.m_chainIndices[t]=e,t;this.m_chainIndices.push(e);return this.m_chainIndices.length-1}deleteUserIndexForChains(e){this.m_chainIndices[e]=null}extractPolygonFromChainAndIslands(e,t,s,r){const i=t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon):t,o=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;this.extractPolygonPathFromChain_(e,i,s,r,o);for(let n=this.getChainFirstIsland(s);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.getChainNextInParent(n))this.extractPolygonPathFromChain_(e,i,n,r,o);return i}getGeometryID(e){const t=this.m_shape.getGeometryUserIndex(e,this.m_geometryIDIndex);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>=0),1<<Math.min(t,31)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_clusterIndex)}getHalfEdgeFromVertex(e){return this.m_shape.getUserIndex(e,this.m_halfEdgeIndex)}buildGeometryParentageSets(){this.m_bBuildGeometryParentageSets=!0}getChainBitSet(e){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bBuildGeometryParentageSets),-1===this.m_chainBitSetIndex)return this.getEmptySet();const t=this.getChainUserIndex(e,this.m_chainBitSetIndex);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>=0);let s=this.m_chainBitSets.at(t);return s||(s=this.getEmptySet()),s}getChainBoundaryBitSet(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bBuildGeometryParentageSets);const t=new Ls,s=e=>{const s=this.getChainHalfEdge(e);let n=s;do{const e=this.getEdgeBitSet_(n);null!==e&&t.assignOr(e);const s=this.getEdgeBitSet_(this.getHalfEdgeTwin(n));null!==s&&t.assignOr(s),n=this.getHalfEdgeNext(n)}while(n!==s)};s(e);for(let n=this.getChainFirstIsland(e);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.getChainNextInParent(n))s(e);return t}getChainPolygons(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),[]}getGeometriesFromBits(e){if(!this.m_bBuildGeometryParentageSets||null===e)return[];if(null===this.m_geometryMapID){this.m_geometryMapID=new Map;for(let e=this.m_shape.getFirstGeometry();e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_shape.getNextGeometry(e))this.m_geometryMapID.set(this.m_shape.getGeometryUserIndex(e,this.m_geometryIDIndex),e)}const t=[],s=e.getUnorderedBitIterator();for(let n=s.next();n!==Ys.npos();n=s.next())(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_geometryMapID.has(n)),t.push(this.m_geometryMapID.get(n));return t}getVertexDominant(e,t){if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return e;const s=this.getClusterFromVertex(e);return this.getVertexDominantFromCluster(s,t)}getVertexDominantFromCluster(e,t){if(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let n=this.getClusterVertexIterator(e);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.incrementVertexIterator(n)){const e=this.getVertexFromVertexIterator(n);s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(s=e);const r=this.m_shape.getPathFromVertex(e);if(this.m_shape.getGeometryFromPath(r)===t){s=e;break}}return s}{const t=this.getClusterVertexIterator(e);if(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){return this.getVertexFromVertexIterator(t)}return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}}isBreakNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumSegmentParentageBreakNode)}setBreakNode(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==this.m_clusterBreakNodeIndex),t?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumSegmentParentageBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumSegmentParentageBreakNode)}isStrongPathNode(e){return this.hasClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumPathBreakNode)}setStrongPathNode(e,t){if(-1===this.m_clusterBreakNodeIndex){if(!t)return;this.m_clusterBreakNodeIndex=this.createUserIndexForClusters()}t?this.setClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumPathBreakNode):this.clearClusterUserIndexFlags(e,this.m_clusterBreakNodeIndex,Ks.enumPathBreakNode)}getSegmentParentage(e){if(-1===this.m_segmentParentageIndex)return-1;const t=this.getHalfEdgeUserIndex(e,this.m_segmentParentageIndex);return t>=0?t:-1}isCrossroadAhead(e){const t=this.getHalfEdgeNext(e);if(this.isStrongPathNode(this.getHalfEdgeOrigin(t)))return!0;const s=this.getHalfEdgeTwin(t),n=this.getHalfEdgeNext(s);return e!==this.getHalfEdgeTwin(n)}isCrossroadBehind(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getHalfEdgeConnector(e,t){const s=this.getClusterHalfEdge(e);if(s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;let n=s,r=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;do{if(this.getHalfEdgeTo(n)===t)return n;if(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(r=this.getClusterHalfEdge(t),r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;i=r}if(this.getHalfEdgeTo(i)===e)return n=this.getHalfEdgeTwin(i),n;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(n)),i=this.getHalfEdgeNext(this.getHalfEdgeTwin(i))}while(n!==s&&i!==r);return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}querySegmentXY(e,t){if(-1!==this.m_segmentIndexHe){let s=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(-1!==s){if(-2!==s){const e=this.m_shape.getSegmentFromIndex(s);t.copyFrom(e,!0)}else{s=this.getHalfEdgeUserIndex(this.getHalfEdgeTwin(e),this.m_segmentIndexHe);const n=this.m_shape.getSegmentFromIndex(s);t.copyFrom(n,!0),t.get().reverse()}return}}t.createLine();const s=t.get(),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.getHalfEdgeFromXY(e,n),s.setStartXY(n),this.getHalfEdgeToXY(e,n),s.setEndXY(n)}isCurveEdge(e){if(-1!==this.m_segmentIndexHe){return-1!==this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe)}return!1}compareEdgeAnglesCurveHelper_(e,t,s){const n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,r=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;this.querySegmentXY(e,n),this.querySegmentXY(t,r);const i=n.get(),o=r.get();if(i.equals(o))return 0;const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.getHalfEdgeFromXY(e,h);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.getHalfEdgeToXY(e,m);const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.getHalfEdgeToXY(t,l),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!m.isEqualPoint2D(l));return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.R)(i,o)}compareEdgeAnglesHelper_(e,t,s){if(e===t)return 0;if(this.isHalfEdgeCurve(e)||this.isHalfEdgeCurve(t))return this.compareEdgeAnglesCurveHelper_(e,t,s);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.getHalfEdgeToXY(e,n);const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();if(this.getHalfEdgeToXY(t,r),n.isEqualPoint2D(r))return 0;const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.getHalfEdgeFromXY(e,i);const o=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();o.setSub(n,i);const a=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();if(a.setSub(r,i),!s||a.y>=0&&o.y>0){return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.compareVectors(o,a)}return 0}compareEdgeAngles_(e,t){return this.compareEdgeAnglesHelper_(e,t,!1)}compareEdgeAnglesForPair_(e,t){return this.compareEdgeAnglesHelper_(e,t,!0)}compareEdgeAngles3D_(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}compareEdgeAnglesForPair3D_(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}dbgDumpChains_(){}dbgDumpChainToPolygon_(e,t){}deleteEdgeInternal_(e){const t=this.getHalfEdgeChain(e),s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeChain(s);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n===t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e===this.getHalfEdgeNext(s)||s===this.getHalfEdgeNext(e));let r=this.getHalfEdgeNext(e);r===s&&(r=this.getHalfEdgeNext(r),r===e&&(r=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n));const i=this.getChainIndex_(t),o=this.m_chainAreas.read(i);Number.isNaN(o)||(this.setChainArea_(t,Number.NaN),this.setChainPerimeter_(t,Number.NaN));const h=this.getChainHalfEdge(t);h!==e&&h!==s||this.setChainHalfEdge_(t,r),this.updateVertexToHalfEdgeConnection_(e,!0),this.deleteEdgeImpl_(e)}getFirstUnvisitedHalfEdgeOnCluster_(e,t,s){let n=t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t:this.getClusterHalfEdge(e);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const r=n;for(;;){if(1!==this.getHalfEdgeUserIndex(n,s))return n;const e=this.getHalfEdgeNext(this.getHalfEdgeTwin(n));if(e===r)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=e}}removeSpikes_(){let e=!1;const t=this.createUserIndexForHalfEdges();for(let s=this.getFirstCluster();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.getNextCluster(s)){let n=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;;){let r=this.getFirstUnvisitedHalfEdgeOnCluster_(s,n,t);if(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;n=this.getHalfEdgeNext(this.getHalfEdgeTwin(r));let i=r;for(;;){const s=this.getHalfEdgeNext(i),o=this.getHalfEdgePrev(i),a=this.getHalfEdgeTwin(i);if(o===a){if(this.deleteEdgeInternal_(i),e=!0,n!==i&&n!==a||(n=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),i===r||o===r){if(r=s,i===r||o===r)break;i=s;continue}}else this.setHalfEdgeUserIndex(i,t,1);if(i=s,i===r)break}}}return this.deleteUserIndexForHalfEdges(t),e}progress_(e,t=!1){}newCluster_(){const e=this.m_clusterData.newElement();return this.m_clusterData.setField(e,1,0),e}newHalfEdgePair_(){const e=this.m_halfEdgeData.newElement();this.m_halfEdgeData.setField(e,2,0),this.m_halfEdgeData.setField(e,3,0);const t=this.m_halfEdgeData.newElement();return this.m_halfEdgeData.setField(t,2,0),this.m_halfEdgeData.setField(t,3,0),this.setHalfEdgeTwin_(e,t),this.setHalfEdgeTwin_(t,e),e}newChain_(){const e=this.m_chainData.newElement();return this.m_chainData.setField(e,2,0),e}deleteChain_(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getClusterIndex_(e){return this.m_clusterData.elementToIndex(e)}setClusterVertexIterator_(e,t){this.m_clusterData.setField(e,7,t)}setClusterHalfEdge_(e,t){this.m_clusterData.setField(e,2,t)}setClusterParentage_(e,t){this.m_clusterData.setField(e,1,t)}setPrevCluster_(e,t){this.m_clusterData.setField(e,3,t)}setNextCluster_(e,t){this.m_clusterData.setField(e,4,t)}setClusterVertexIndex_(e,t){this.m_clusterData.setField(e,5,t)}getClusterVertexIndex_(e){return this.m_clusterData.getField(e,5)}setClusterChain_(e,t){this.m_clusterData.setField(e,6,t)}addClusterToExteriorChain_(e,t){this.setClusterChain_(t,e)}getHalfEdgeIndex_(e){return this.m_halfEdgeData.elementToIndex(e)}setHalfEdgeOrigin_(e,t){this.m_halfEdgeData.setField(e,1,t)}setHalfEdgeTwin_(e,t){this.m_halfEdgeData.setField(e,4,t)}setHalfEdgePrev_(e,t){this.m_halfEdgeData.setField(e,5,t)}setHalfEdgeNext_(e,t){this.m_halfEdgeData.setField(e,6,t)}setHalfEdgeChain_(e,t){this.m_halfEdgeData.setField(e,2,t)}setHalfEdgeParentage_(e,t){this.m_halfEdgeData.setField(e,3,t)}getHalfEdgeParentageMask_(e){return this.m_halfEdgeData.getField(e,3)}setHalfEdgeVertexIterator_(e,t){this.m_halfEdgeData.setField(e,7,t)}updateVertexToHalfEdgeConnectionHelper_(e,t){const s=t?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:e;for(let n=this.getHalfEdgeVertexIterator(e);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.incrementVertexIterator(n)){const e=this.getVertexFromVertexIterator(n);this.m_shape.setUserIndex(e,this.m_halfEdgeIndex,s)}}updateVertexToHalfEdgeConnection_(e,t){e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.updateVertexToHalfEdgeConnectionHelper_(e,t),this.updateVertexToHalfEdgeConnectionHelper_(this.getHalfEdgeTwin(e),t))}getChainIndex_(e){return this.m_chainData.elementToIndex(e)}setChainHalfEdge_(e,t){this.m_chainData.setField(e,1,t)}setChainParentage_(e,t){this.m_chainData.setField(e,2,t)}setChainParent_(e,t){this.m_chainData.setField(e,3,t);const s=this.getChainFirstIsland(t);this.setChainNextInParent_(e,s),this.setChainFirstIsland_(t,e)}setChainFirstIsland_(e,t){this.m_chainData.setField(e,4,t)}setChainNextInParent_(e,t){this.m_chainData.setField(e,5,t)}setChainPrev_(e,t){this.m_chainData.setField(e,6,t)}setChainNext_(e,t){this.m_chainData.setField(e,7,t)}setChainArea_(e,t){const s=this.getChainIndex_(e);this.m_chainAreas.write(s,t)}setChainPerimeter_(e,t){const s=this.getChainIndex_(e);this.m_chainPerimeters.write(s,t)}updateChainAreaAndPerimeter_(e){const t=this.m_shape.hasCurves(),s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.K(0),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.K(0),r=this.getChainHalfEdge(e),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),o=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.getHalfEdgeFromXY(r,i),o.setCoordsPoint2D(i);let h=r;do{this.getHalfEdgeToXY(h,a),t&&this.isCurveEdge(h)||n.pe(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(o,a));this.getHalfEdgeChain(this.getHalfEdgeTwin(h))!==e&&s.pe((a.x-i.x-(o.x-i.x))*(a.y-i.y+(o.y-i.y))*.5),o.setCoordsPoint2D(a),h=this.getHalfEdgeNext(h)}while(h!==r);if(t){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;h=r;do{this.getHalfEdgeToXY(h,a);const r=this.isCurveEdge(h);r&&(this.querySegmentXY(h,t),n.pe(t.get().calculateLength2D()));if(this.getHalfEdgeChain(this.getHalfEdgeTwin(h))!==e&&r){const e=t.get().calculateArea2DHelper();s.pe(e)}h=this.getHalfEdgeNext(h)}while(h!==r)}const m=this.getChainIndex_(e);this.m_chainAreas.write(m,s.getResult()),this.m_chainPerimeters.write(m,n.getResult())}getChainTopmostEdge_(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}planeSweepParentage_(e,t){const s=new Ws(this),n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T;n.setCapacity(Math.trunc(this.m_pointCount/2)),n.setComparator(s);const r=[],i=this.createUserIndexForHalfEdges();let o=null;const a=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();for(let h=this.getFirstCluster();h!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;h=this.getNextCluster(h)){this.progress_(t);const m=this.getClusterHalfEdge(h);if(m!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(r.length=0,!this.tryOptimizedInsertion_(n,i,r,h,m)){this.queryXY(h,a),s.setY(a.y);let e=m;do{const t=this.getHalfEdgeUserIndex(e,i);-1!==t&&(n.deleteNode(t),this.setHalfEdgeUserIndex(e,i,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2())),e=this.getHalfEdgeNext(this.getHalfEdgeTwin(e))}while(m!==e);e=m;do{if(-1===this.getHalfEdgeUserIndex(e,i)){const t=n.addElement(e);r.push(t)}e=this.getHalfEdgeNext(this.getHalfEdgeTwin(e))}while(m!==e)}for(let t=r.length-1;t>=0;t--){const s=r[t],o=n.getElement(s),a=this.getHalfEdgeTwin(o);this.setHalfEdgeUserIndex(a,i,s),this.planeSweepParentagePropagateParentage_(n,s,e)}}else if(this.getClusterChain(h)===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){null===o&&(o=new js(this)),this.queryXY(h,a),o.setPointXY(a);const e=n.searchLowerBound(o);let t=this.m_universeChain;if(-1!==e){let s=n.getElement(e);this.getHalfEdgeChain(s)===this.getHalfEdgeChain(this.getHalfEdgeTwin(s))&&(s=this.getLeftSkipPolylines_(n,e)),s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(t=this.getHalfEdgeChain(s))}this.addClusterToExteriorChain_(t,h)}}this.deleteUserIndexForHalfEdges(i)}planeSweepParentagePropagateParentage_(e,t,s){const n=e.getElement(t),r=this.getHalfEdgeChain(n);if(this.getChainParent(r)!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return;const i=this.getLeftSkipPolylines_(e,t),o=this.getHalfEdgeTwin(n),h=this.getHalfEdgeChain(o);let m=this.getChainParent(r),l=this.getChainParent(h);if(i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)m===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(h===r?(this.setChainParent_(h,this.m_universeChain),l=this.m_universeChain,m=l):(l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.setChainParent_(h,this.m_universeChain),l=this.m_universeChain),this.setChainParent_(r,h),m=h));else{const e=this.getHalfEdgeChain(i);if(l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(this.getChainArea(e)<=0){const t=this.getChainParent(e);this.setChainParent_(h,t),l=t}else this.setChainParent_(h,e),l=e;h===r&&(m=l)}}m===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.trySetChainParentFromTwin_(r,h),m=this.getChainParent(r)),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),s===Zs.enumInputModeBuildGraph?this.propagateParentageBuildGraph_(e,t,n,i):s===Zs.enumInputModeSimplifyWinding?this.propagateParentageWinding_(e,t,n,i,o,r,h):s===Zs.enumInputModeSimplifyAlternate&&this.propagateParentageAlternate_(e,t,n,i,o,r,h)}propagateParentageBuildGraph_(e,t,s,n){let r,i=t;n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?(i=e.getNext(i),r=this.getHalfEdgeChain(s)):r=this.getHalfEdgeChain(n);let o=null,a=this.getChainParentage(r);for(this.m_bBuildGeometryParentageSets&&(o=this.getChainBitSet(r));-1!==i;i=e.getNext(i)){const t=e.getElement(i),s=this.getHalfEdgeTwin(t);r=this.getHalfEdgeChain(t);const n=this.getHalfEdgeChain(s);if(this.m_bBuildGeometryParentageSets){let e=this.getChainBitSet(n);e=new Ls({copy:e}),e.assignOr(o),this.setChainBitSet_(n,e);let s=this.getChainBitSet(r);const i=this.getLeftEdgeBitSet_(t),a=new Ls({copy:o});if(a.assignSubtract(i),a.isZero())break;s=new Ls({copy:s}),s.assignOr(a),this.setChainBitSet_(r,s),o=s}const h=this.getChainParentage(n),m=h|a;m!==h&&this.setChainParentage_(n,m);let l=this.getChainParentage(r);const g=a&~this.getHalfEdgeUserIndex(t,this.m_tmpHalfEdgeParentageIndexLeft);if(g&&(l|=g,this.setChainParentage_(r,l)),0===g)break;a=l}}propagateParentageWinding_(e,t,s,n,r,i,o){if(i===o)return;let h=this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeWindingNumberIndex);h+=this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeWindingNumberIndex);let m=0;const l=[],g=[];g.push(0);for(let u=e.getFirst();u!==t;u=e.getNext(u)){const t=e.getElement(u),s=this.getHalfEdgeTwin(t),n=this.getHalfEdgeChain(t),r=this.getHalfEdgeChain(s);if(n!==r){let e=this.getHalfEdgeUserIndex(t,this.m_tmpHalfEdgeWindingNumberIndex);e+=this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeWindingNumberIndex),m+=e;let i=!1;0!==l.length&&l.at(-1)===r&&(g.pop(),l.pop(),i=!0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.getChainParent(r)!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),i&&this.getChainParent(r)===n||(g.push(m),l.push(n))}}if(m+=h,0!==l.length&&l.at(-1)===o&&(g.pop(),l.pop()),0!==m){if(0===g.at(-1)){const e=this.m_simplifiedGeometry,t=this.getGeometryID(e);this.setChainParentage_(i,t)}}else if(0!==g.at(-1)){const e=this.m_simplifiedGeometry,t=this.getGeometryID(e);this.setChainParentage_(i,t)}}propagateParentageAlternate_(e,t,s,n,r,i,o){const a=this.m_simplifiedGeometry,h=this.getGeometryID(a);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){this.setChainParentage_(o,this.m_universeGeomID);1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(i,h):this.setChainParentage_(i,this.m_universeGeomID)}else{const e=this.getChainParentage(o);if(0===e){const e=this.getHalfEdgeChain(n),t=this.getChainParentage(e);this.setChainParentage_(o,t);1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(i,t===h?this.m_universeGeomID:h):this.setChainParentage_(i,t)}else{1&this.getHalfEdgeUserIndex(s,this.m_tmpHalfEdgeOddEvenNumberIndex)?this.setChainParentage_(i,e===h?this.m_universeGeomID:h):this.setChainParentage_(i,e)}}}tryOptimizedInsertion_(e,t,s,n,r){let i=r,o=-1,a=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,h=0;do{if(2===h)return!1;const e=this.getHalfEdgeUserIndex(i,t);if(-1!==e){if(-1!==o)return!1;o=e}else{if(a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return!1;a=i}h++,i=this.getHalfEdgeNext(this.getHalfEdgeTwin(i))}while(r!==i);return a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&-1!==o&&(this.setHalfEdgeUserIndex(e.getElement(o),t,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2()),e.setElement(o,a),s.push(o),!0)}trySetChainParentFromTwin_(e,t){const s=this.getChainArea(e);if(0===s)return!1;const n=this.getChainArea(t);if(s>0&&n<0||s<0&&n>0)return this.setChainParent_(e,t),!0;{const s=this.getChainParent(t);if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return this.setChainParent_(e,s),!0}return!1}createHalfEdges_(e,t){this.m_halfEdgeIndex=this.m_shape.createUserIndex();for(let s=0,r=t.size();s<r;s++){const r=t.read(s),i=this.m_shape.getUserIndex(r,this.m_clusterIndex),a=this.m_shape.getPathFromVertex(r),h=this.m_shape.getGeometryFromPath(a),m=this.m_shape.getGeometryType(h);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(m)){const t=this.m_shape.getNextVertex(r);if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;const s=this.m_shape.getUserIndex(t,this.m_clusterIndex);if(i===s)continue;const o=this.newHalfEdgePair_(),a=this.getHalfEdgeTwin(o),l=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(l,0,r),this.m_clusterVertices.setField(l,1,-1),this.setHalfEdgeVertexIterator_(o,l),this.m_shape.setUserIndex(r,this.m_halfEdgeIndex,o),this.setHalfEdgeOrigin_(o,i);const g=this.getClusterHalfEdge(i);if(g===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)this.setClusterHalfEdge_(i,o),this.setHalfEdgePrev_(o,a),this.setHalfEdgeNext_(a,o);else{const e=this.getHalfEdgePrev(g);this.setHalfEdgePrev_(g,a),this.setHalfEdgeNext_(a,g),this.setHalfEdgeNext_(e,o),this.setHalfEdgePrev_(o,e)}this.setHalfEdgeOrigin_(a,s);const u=this.getClusterHalfEdge(s);if(u===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)this.setClusterHalfEdge_(s,a),this.setHalfEdgeNext_(o,a),this.setHalfEdgePrev_(a,o);else{const e=this.getHalfEdgePrev(u);this.setHalfEdgePrev_(u,o),this.setHalfEdgeNext_(o,u),this.setHalfEdgeNext_(e,a),this.setHalfEdgePrev_(a,e)}const c=this.getGeometryID(h);if(e===Zs.enumInputModeBuildGraph){const e=m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?c:0;if(this.setHalfEdgeUserIndex(a,this.m_tmpHalfEdgeParentageIndex,0),this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndex,e),this.setHalfEdgeUserIndex(a,this.m_tmpHalfEdgeParentageIndexLeft,e),this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndexLeft,0),this.m_bBuildGeometryParentageSets){const e=new Ls,t=this.m_shape.getGeometryUserIndex(h,this.m_geometryIDIndex);e.setBit(t),this.setEdgeBitSet_(o,e),this.setEdgeBitSet_(a,null),this.setLeftEdgeBitSet_(a,e),this.setLeftEdgeBitSet_(o,null)}}else if(e===Zs.enumInputModeSimplifyWinding){const e=this.m_shape.getXY(r),s=this.m_shape.getXY(t);let n=0,i=0;e.compare(s)<0?n=1:i=-1,this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeWindingNumberIndex,n),this.setHalfEdgeUserIndex(a,this.m_tmpHalfEdgeWindingNumberIndex,i)}else e===Zs.enumInputModeSimplifyAlternate&&(this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeOddEvenNumberIndex,1),this.setHalfEdgeUserIndex(a,this.m_tmpHalfEdgeOddEvenNumberIndex,1));const _=m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?tn.c_EdgeBitMask:0;this.setHalfEdgeParentage_(o,c|_),this.setHalfEdgeParentage_(a,c|_)}}if(this.m_shape.hasCurves()){this.m_segmentIndexHe=this.createUserIndexForHalfEdges();for(let e=0,s=t.size();e<s;e++){const s=t.read(e);if(this.m_shape.getSegment(s)){const e=this.m_shape.getUserIndex(s,this.m_halfEdgeIndex);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.setHalfEdgeUserIndex(e,this.m_segmentIndexHe,this.m_shape.getVertexIndex(s)),this.setHalfEdgeUserIndex(this.getHalfEdgeTwin(e),this.m_segmentIndexHe,-2))}}}}mergeVertexListsOfEdges_(e,t){{const s=this.getHalfEdgeVertexIterator(t);if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const n=this.getHalfEdgeVertexIterator(e);this.m_clusterVertices.setField(s,1,n),this.setHalfEdgeVertexIterator_(e,s),this.setHalfEdgeVertexIterator_(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}}const s=this.getHalfEdgeTwin(e),n=this.getHalfEdgeTwin(t);{const e=this.getHalfEdgeVertexIterator(n);if(e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const t=this.getHalfEdgeVertexIterator(s);this.m_clusterVertices.setField(e,1,t),this.setHalfEdgeVertexIterator_(s,e),this.setHalfEdgeVertexIterator_(n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}}if(-1!==this.m_segmentIndexHe){let r=this.getHalfEdgeUserIndex(e,this.m_segmentIndexHe);if(-1!==r){if(-2===r){const s=this.getHalfEdgeUserIndex(t,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(e,this.m_segmentIndexHe,s)}if(r=this.getHalfEdgeUserIndex(s,this.m_segmentIndexHe),-2===r){const e=this.getHalfEdgeUserIndex(n,this.m_segmentIndexHe);this.setHalfEdgeUserIndex(s,this.m_segmentIndexHe,e)}}}}sortHalfEdgesByAngle_(e){const t=[];for(let s=this.getFirstCluster();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.getNextCluster(s)){t.length=0;const n=this.getClusterHalfEdge(s);if(n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let r=n;do{t.push(r),r=this.getHalfEdgeNext(this.getHalfEdgeTwin(r))}while(r!==n);if(t.length>1){let r=!0;t.length>2?(t.sort(((e,t)=>this.compareEdgeAngles_(e,t))),t.push(t[0])):this.compareEdgeAnglesForPair_(t[0],t[1])>0?t[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(t[0],t[0]=t[1]):r=!1;let i=t[0],o=i,a=this.getHalfEdgeTo(o),h=this.getHalfEdgeTwin(o),m=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let s=1,n=t.length;s<n;s++){const n=t[s],r=this.getHalfEdgeTwin(n),l=this.getHalfEdgeOrigin(r);if(l!==a||n===o)this.updateVertexToHalfEdgeConnection_(m,!1),m=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,o=n,a=l,h=r;else{if(e===Zs.enumInputModeBuildGraph){const e=this.getHalfEdgeParentageMask_(o)|this.getHalfEdgeParentageMask_(n);if(this.setHalfEdgeParentage_(o,e),this.setHalfEdgeParentage_(h,e),this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(h,this.m_tmpHalfEdgeParentageIndex,this.getHalfEdgeUserIndex(h,this.m_tmpHalfEdgeParentageIndex)|this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeParentageIndex)),this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeParentageIndexLeft)),this.setHalfEdgeUserIndex(h,this.m_tmpHalfEdgeParentageIndexLeft,this.getHalfEdgeUserIndex(h,this.m_tmpHalfEdgeParentageIndexLeft)|this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeParentageIndexLeft)),this.m_bBuildGeometryParentageSets){let e,t,s;e=this.getEdgeBitSet_(o),t=this.getEdgeBitSet_(n),s=new Ls({copy:e}),s.assignOr(t),this.setEdgeBitSet_(o,s),e=this.getEdgeBitSet_(h),t=this.getEdgeBitSet_(r),s=new Ls({copy:e}),s.assignOr(t),this.setEdgeBitSet_(h,s),e=this.getLeftEdgeBitSet_(o),t=this.getLeftEdgeBitSet_(n),s=new Ls({copy:e}),s.assignOr(t),this.setLeftEdgeBitSet_(o,s),e=this.getLeftEdgeBitSet_(h),t=this.getLeftEdgeBitSet_(r),s=new Ls({copy:e}),s.assignOr(t),this.setLeftEdgeBitSet_(h,s)}}else if(-1!==this.m_tmpHalfEdgeWindingNumberIndex){const e=this.getHalfEdgeUserIndex(o,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeWindingNumberIndex),t=this.getHalfEdgeUserIndex(h,this.m_tmpHalfEdgeWindingNumberIndex)+this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeWindingNumberIndex);this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeWindingNumberIndex,e),this.setHalfEdgeUserIndex(h,this.m_tmpHalfEdgeWindingNumberIndex,t)}else if(-1!==this.m_tmpHalfEdgeOddEvenNumberIndex){const e=this.getHalfEdgeUserIndex(o,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(n,this.m_tmpHalfEdgeOddEvenNumberIndex),t=this.getHalfEdgeUserIndex(h,this.m_tmpHalfEdgeOddEvenNumberIndex)+this.getHalfEdgeUserIndex(r,this.m_tmpHalfEdgeOddEvenNumberIndex);this.setHalfEdgeUserIndex(o,this.m_tmpHalfEdgeOddEvenNumberIndex,e),this.setHalfEdgeUserIndex(h,this.m_tmpHalfEdgeOddEvenNumberIndex,t)}this.mergeVertexListsOfEdges_(o,n),this.deleteEdgeImpl_(n),m=o,t[s]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,n===i&&(t[0]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}}if(this.updateVertexToHalfEdgeConnection_(m,!1),m=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,!r){i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let e=0,s=t.length;e<s;e++){const s=t[e];if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){i=s;break}}n!==i&&this.setClusterHalfEdge_(s,i);continue}i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let e=0,s=t.length;e<s;e++){const s=t[e];if(s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;if(i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){i=s,o=i,a=this.getHalfEdgeTo(o),h=this.getHalfEdgeTwin(o);continue}if(s===o)continue;const n=this.getHalfEdgeTwin(s),r=this.getHalfEdgeOrigin(n);this.setHalfEdgeNext_(h,s),this.setHalfEdgePrev_(s,h),o=s,a=r,h=n}this.setClusterHalfEdge_(s,i)}}}}sortHalfEdgesByAngle3D_(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}buildChains_(e){this.m_universeChain=this.newChain_(),this.setChainHalfEdge_(this.m_universeChain,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);let t=this.m_universeChain;const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.getNextCluster(n)){const e=this.getClusterHalfEdge(n);if(e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let n=e;do{if(1!==this.getHalfEdgeUserIndex(n,s)){const e=this.newChain_();this.setChainHalfEdge_(e,n),this.setChainPrev_(e,t),this.setChainNext_(t,e);let r=null;this.m_bBuildGeometryParentageSets&&(r=new Ls),t=e;let i=0,o=n;do{-1!==this.m_tmpHalfEdgeParentageIndex&&(i|=this.getHalfEdgeUserIndex(o,this.m_tmpHalfEdgeParentageIndex)),this.m_bBuildGeometryParentageSets&&r.assignOr(this.getEdgeBitSet_(o)),this.setHalfEdgeChain_(o,e),this.setHalfEdgeUserIndex(o,s,1),o=this.getHalfEdgeNext(o)}while(o!==n);this.m_bBuildGeometryParentageSets&&this.setChainBitSet_(e,r),this.setChainParentage_(e,i)}n=this.getHalfEdgeNext(this.getHalfEdgeTwin(n))}while(n!==e)}}this.m_chainAreas=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.x(this.m_chainData.size(),Number.NaN),this.m_chainPerimeters=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.x(this.m_chainData.size(),Number.NaN),this.setChainArea_(this.m_universeChain,Number.POSITIVE_INFINITY),this.setChainPerimeter_(this.m_universeChain,Number.POSITIVE_INFINITY),this.deleteUserIndexForHalfEdges(s)}simplify_(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}simplifyAlternate_(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}simplifyWinding_(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}setEditShapeImpl_(e,t,s,n,r){this.removeShape(),this.m_bBuildChains=r,this.m_shape=e,this.m_geometryIDIndex=this.m_shape.createGeometryUserIndex();let i=this.m_shape.getTotalPointCount();if(s){i=0;for(let e=0,t=s.length;e<t;e++)i+=this.m_shape.getPointCount(s[e])}const o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0);let a=0,h=0;{let e=null!=s?s[0]:this.m_shape.getFirstGeometry(),t=1;for(;e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){this.m_shape.setGeometryUserIndex(e,this.m_geometryIDIndex,h++);for(let t=this.m_shape.getFirstPath(e);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=this.m_shape.getNextPath(t)){let e=this.m_shape.getFirstVertex(t);for(let s=0,n=this.m_shape.getPathSize(t);s<n;s++)o.add(e),e=this.m_shape.getNextVertex(e)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(this.m_shape.getGeometryType(e))||(a+=this.m_shape.getPathCount(e)),null!=s?(e=t<s.length?s[t]:_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,t++):e=this.m_shape.getNextGeometry(e)}}this.m_universeGeomID=1<<Math.min(h,31),this.m_pointCount=o.size(),this.m_shape.sortVerticesSimpleByY(o,0,this.m_pointCount),this.m_clusterVertices.setCapacity(this.m_pointCount),this.progress_(n,!0),this.m_clusterData.setCapacity(this.m_pointCount+10),this.m_halfEdgeData.setCapacity(2*this.m_pointCount+32),this.m_chainData.setCapacity(Math.max(32,a)),this.m_clusterIndex=this.m_shape.createUserIndex();const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();let l=0;const g=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();for(let u=0;u<=this.m_pointCount;u++){if(u<this.m_pointCount){const e=o.read(u);this.m_shape.queryXY(e,g)}else g.setNAN();if(!m.isEqualPoint2D(g)){if(l<u){const e=this.newCluster_();let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s=-1;for(let n=l;n<u;n++){s=o.read(n),this.m_shape.setUserIndex(s,this.m_clusterIndex,e);const r=this.m_clusterVertices.newElement();this.m_clusterVertices.setField(r,0,s),this.m_clusterVertices.setField(r,1,t),t=r;const i=this.m_shape.getPathFromVertex(s),a=this.m_shape.getGeometryFromPath(i),h=this.getGeometryID(a);this.setClusterParentage_(e,this.getClusterParentage(e)|h)}this.setClusterVertexIterator_(e,t),this.setClusterVertexIndex_(e,this.m_shape.getVertexIndex(s)),this.m_lastCluster!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.setNextCluster_(this.m_lastCluster,e),this.setPrevCluster_(e,this.m_lastCluster),this.m_lastCluster=e,this.m_firstCluster===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.m_firstCluster=e)}l=u,m.setCoordsPoint2D(g)}}if(this.m_shape.hasSegmentParentage()){-1===this.m_clusterBreakNodeIndex&&(this.m_clusterBreakNodeIndex=this.createUserIndexForClusters());for(let e=0;e<this.m_pointCount;e++){const t=o.read(e);if(this.m_shape.getSegmentParentageBreakVertex(t)){const e=this.getClusterFromVertex(t);this.setBreakNode(e,!0)}}}this.progress_(n,!0);{let e=null!=s?s[0]:this.m_shape.getFirstGeometry(),t=1;for(;e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){for(let t=this.m_shape.getFirstPath(e);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=this.m_shape.getNextPath(t)){if(this.m_shape.isStrongPathStart(t)){const e=this.m_shape.getFirstVertex(t),s=this.getClusterFromVertex(e);this.setStrongPathNode(s,!0)}if(this.m_shape.isStrongPathEnd(t)){const e=this.m_shape.isClosedPath(t)?this.m_shape.getFirstVertex(t):this.m_shape.getLastVertex(t),s=this.getClusterFromVertex(e);this.setStrongPathNode(s,!0)}}null!=s?(e=t<s.length?s[t]:_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,t++):e=this.m_shape.getNextGeometry(e)}}if(t===Zs.enumInputModeBuildGraph&&(this.m_tmpHalfEdgeParentageIndex=this.createUserIndexForHalfEdges(),this.m_tmpHalfEdgeParentageIndexLeft=this.createUserIndexForHalfEdges()),t===Zs.enumInputModeSimplifyWinding&&(this.m_tmpHalfEdgeWindingNumberIndex=this.createUserIndexForHalfEdges()),t===Zs.enumInputModeSimplifyAlternate&&(this.m_tmpHalfEdgeOddEvenNumberIndex=this.createUserIndexForHalfEdges()),this.createHalfEdges_(t,o),this.dbgNavigate_(),this.sortHalfEdgesByAngle_(t),!Number.isNaN(this.m_checkDirtyPlanesweepTolerance)&&!this.checkStructureAfterDirtySweep_())return this.m_bDirtyCheckFailed=!0,void this.cleanSetEditShapeImpl_();this.buildChains_(t),-1!==this.m_tmpHalfEdgeParentageIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),this.m_bBuildChains&&this.planeSweepParentage_(t,n),-1!==this.m_tmpHalfEdgeParentageIndexLeft&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),this.dbgChkChainParents_(),this.dbgDumpChains_(),this.mergeSegmentParentage_(),this.dbgNavigate_(),this.dbgDumpChains_(),this.cleanSetEditShapeImpl_()}setEditShapeImpl3D_(e,t,s,n,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}cleanSetEditShapeImpl_(){-1!==this.m_tmpHalfEdgeParentageIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndex),this.m_tmpHalfEdgeParentageIndex=-1),-1!==this.m_tmpHalfEdgeParentageIndexLeft&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeParentageIndexLeft),this.m_tmpHalfEdgeParentageIndexLeft=-1),-1!==this.m_tmpHalfEdgeWindingNumberIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeWindingNumberIndex),this.m_tmpHalfEdgeWindingNumberIndex=-1),-1!==this.m_tmpHalfEdgeOddEvenNumberIndex&&(this.deleteUserIndexForHalfEdges(this.m_tmpHalfEdgeOddEvenNumberIndex),this.m_tmpHalfEdgeOddEvenNumberIndex=-1)}cleanSetEditShapeImpl3D_(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}dbgNavigate_(){}dbgChkChainParents_(){}deleteEdgeImpl_(e){const t=this.getHalfEdgeNext(e),s=this.getHalfEdgePrev(e),n=this.getHalfEdgeTwin(e),r=this.getHalfEdgeNext(n),i=this.getHalfEdgePrev(n);t!==n&&(this.setHalfEdgeNext_(i,t),this.setHalfEdgePrev_(t,i)),s!==n&&(this.setHalfEdgeNext_(s,r),this.setHalfEdgePrev_(r,s));const o=this.getHalfEdgeOrigin(e);this.getClusterHalfEdge(o)===e&&(r!==e?this.setClusterHalfEdge_(o,r):this.setClusterHalfEdge_(o,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n));const a=this.getHalfEdgeOrigin(n);this.getClusterHalfEdge(a)===n&&(t!==n?this.setClusterHalfEdge_(a,t):this.setClusterHalfEdge_(a,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)),this.m_halfEdgeData.deleteElement(e),this.m_halfEdgeData.deleteElement(n)}getLeftSkipPolylines_(e,t){let s=t;for(;;){if(s=e.getPrev(s),-1===s)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;{const t=e.getElement(s);if(this.getHalfEdgeChain(t)!==this.getHalfEdgeChain(this.getHalfEdgeTwin(t)))return t}}}checkStructureAfterDirtySweep_(){const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(this.m_checkDirtyPlanesweepTolerance),t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let o=this.getFirstCluster();o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;o=this.getNextCluster(o)){const a=this.getClusterHalfEdge(o);if(a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let o=a;this.getHalfEdgeFromXY(o,t),this.getHalfEdgeToXY(o,s),n.setSub(s,t);let h=n.sqrLength();do{const a=o;if(o=this.getHalfEdgeNext(this.getHalfEdgeTwin(o)),o!==a){this.getHalfEdgeToXY(o,r),i.setSub(r,t);const a=i.sqrLength(),m=i.crossProduct(n),l=m*m/(a*h);if(Math.min(a,h)*l<=e){if(i.dotProduct(n)>=0)return!1}n.assign(i),h=a,s.assign(r)}}while(o!==a)}}return!0}extractPolygonPathFromChain_(e,t,s,n,r){const i=this.m_shape.hasSegmentParentage(),o=this.getChainHalfEdge(s);let a=o,h=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const m=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;do{const o=this.getHalfEdgeTwin(a);if(this.getHalfEdgeChain(o)!==s){let s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const o=this.getHalfEdgeOrigin(a);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const e=this.getClusterVertexIterator(o);s=this.getVertexFromVertexIterator(e)}else for(let e=this.getClusterVertexIterator(o);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.incrementVertexIterator(e)){const t=this.getVertexFromVertexIterator(e);s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(s=t);const r=this.m_shape.getPathFromVertex(t);if(this.m_shape.getGeometryFromPath(r)===n){s=t;break}}let l;if(h===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(h=e.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.setClosedPath(h,!0)),this.m_shape===e?l=e.addVertex(h,s):(this.m_shape.queryPoint(s,m),l=e.addPoint(h,m)),this.isHalfEdgeCurve(a)&&(this.querySegmentXY(a,r),e.setSegmentToIndex(e.getVertexIndex(l),r.get().clone())),i){const t=this.getSegmentParentage(a);e.setSegmentParentageAndBreak(l,t,this.isBreakNode(o))}}a=this.getHalfEdgeNext(a)}while(a!==o)}mergeSegmentParentage_(){if(!this.m_shape.hasSegmentParentage())return;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==this.m_clusterBreakNodeIndex),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===this.m_segmentParentageIndex);for(let n=this.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.getNextCluster(n)){let e=0;const t=this.getClusterHalfEdge(n);if(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let s=t;do{e++,s=this.getHalfEdgeNext(this.getHalfEdgeTwin(s))}while(s!==t&&e<3)}2!==e&&this.setBreakNode(n,!0)}let e=[],t=[];this.m_segmentParentageIndex=this.createUserIndexForHalfEdges();const s=this.createUserIndexForHalfEdges();for(let n=this.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.getNextCluster(n)){const r=this.getClusterHalfEdge(n);if(r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let n=!1,i=r;do{let r=i;for(;-1===this.getHalfEdgeUserIndex(r,s);){const i=this.getHalfEdgeNext(r),o=this.getHalfEdgeTwin(r);$s(this,r,t);const a=t.at(-1).parentage;if(!n){const t=this.getHalfEdgeOrigin(r);if(!this.isBreakNode(t)){const t=this.getHalfEdgePrev(r);r!==t&&($s(this,t,e),n=!0)}}if(n&&!Js(t,e)){const e=this.getHalfEdgeOrigin(r);this.setBreakNode(e,!0)}e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(t,t=e),n=!0;const h=this.getHalfEdgeOrigin(i);this.isBreakNode(h)&&(n=!1),this.setHalfEdgeUserIndex(r,this.m_segmentParentageIndex,a),this.setHalfEdgeUserIndex(o,this.m_segmentParentageIndex,a),this.setHalfEdgeUserIndex(r,s,1),this.setHalfEdgeUserIndex(o,s,1),r=i}i=this.getHalfEdgeNext(this.getHalfEdgeTwin(i))}while(i!==r)}}this.deleteUserIndexForHalfEdges(s)}registerNewBitSet(e){if(null===this.m_uniqueBitSets&&(this.m_uniqueBitSets=en(),this.m_uniqueBitSets.add(this.getEmptySet())),null===e)return this.getEmptySet();return this.m_uniqueBitSets.has(e)?this.m_uniqueBitSets.get(e):(this.m_uniqueBitSets.add(e),e)}getLeftEdgeBitSet_(e){const t=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>=0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_edgeBitSets.at(t)),this.m_edgeBitSets.at(t)}getEdgeBitSet_(e){const t=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>=0),this.m_edgeBitSets.at(t)}setEdgeBitSet_(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bBuildGeometryParentageSets),t=this.registerNewBitSet(t),-1===this.m_edgeBitSetIndex&&(this.m_edgeBitSetIndex=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndex);-1!==s?this.m_edgeBitSets[s]=t:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndex,this.m_edgeBitSets.length),this.m_edgeBitSets.push(t))}setLeftEdgeBitSet_(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bBuildGeometryParentageSets),t=this.registerNewBitSet(t),-1===this.m_edgeBitSetIndexLeft&&(this.m_edgeBitSetIndexLeft=this.createUserIndexForHalfEdges());const s=this.getHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft);-1!==s?this.m_edgeBitSets[s]=t:(this.setHalfEdgeUserIndex(e,this.m_edgeBitSetIndexLeft,this.m_edgeBitSets.length),this.m_edgeBitSets.push(t))}setChainBitSet_(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bBuildGeometryParentageSets),t=this.registerNewBitSet(t),-1===this.m_chainBitSetIndex&&(this.m_chainBitSetIndex=this.createUserIndexForChains());const s=this.getChainUserIndex(e,this.m_chainBitSetIndex);-1!==s?this.m_chainBitSets[s]=t:(this.setChainUserIndex(e,this.m_chainBitSetIndex,this.m_chainBitSets.length),this.m_chainBitSets.push(t))}getEmptySet(){return this.m_emptyBitSet||(this.m_emptyBitSet=new Ls),this.m_emptyBitSet}deleteEdgeBitSets_(){-1!==this.m_edgeBitSetIndex&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndex),this.m_edgeBitSetIndex=-1),-1!==this.m_edgeBitSetIndexLeft&&(this.deleteUserIndexForHalfEdges(this.m_edgeBitSetIndexLeft),this.m_edgeBitSetIndexLeft=-1),this.m_edgeBitSets.length=0,this.m_uniqueBitSets=null}deleteChainBitSets_(){-1!==this.m_chainBitSetIndex&&(this.deleteUserIndexForChains(this.m_chainBitSetIndex),this.m_chainBitSetIndex=-1,this.m_chainBitSets.length=0)}dbgPrintEdge_(e){}dbgVerifyEdgeSegment(e){}}tn.c_EdgeParentageMask=~(1<<31),tn.c_EdgeBitMask=1<<31;class sn{freeNode_(e){this.m_listNodes.deleteElement(e)}newNode_(){return this.m_listNodes.newElement()}freeList_(e){this.m_lists.deleteElement(e)}newList_(){return this.m_lists.newElement()}Init_(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}constructor(e){this.m_listNodes=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(2),this.m_listOfLists=sn.st_nullNode(),this.m_bAllowNavigationBetweenLists=!0,void 0===e&&(e=!0),this.m_bAllowNavigationBetweenLists=e,this.m_lists=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(this.m_bAllowNavigationBetweenLists?4:2)}createList(){const e=this.newList_();return this.m_bAllowNavigationBetweenLists&&(this.m_lists.setField(e,3,this.m_listOfLists),this.m_listOfLists!==sn.st_nullNode()&&this.m_lists.setField(this.m_listOfLists,2,e),this.m_listOfLists=e),e}deleteList(e){let t=this.getFirst(e);for(;t!==sn.st_nullNode();){const e=t;t=this.getNext(t),this.freeNode_(e)}if(this.m_bAllowNavigationBetweenLists){const t=this.m_lists.getField(e,2),s=this.m_lists.getField(e,3);t!==sn.st_nullNode()?this.m_lists.setField(t,3,s):this.m_listOfLists=s,s!==sn.st_nullNode()&&this.m_lists.setField(s,2,t)}this.freeList_(e)}reserveLists(e){this.m_lists.setCapacity(e)}addElement(e,t){this.m_lists.getField(e,0);const s=this.m_lists.getField(e,1),n=this.newNode_();return s!==sn.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,n)):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,n)),this.m_listNodes.setField(n,0,t),n}reserveNodes(e){this.m_listNodes.setCapacity(e)}deleteElementDirect(e,t,s){t!==sn.st_nullNode()?(this.m_listNodes.setField(t,1,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,t)):(this.m_lists.setField(e,0,this.m_listNodes.getField(s,1)),this.m_lists.getField(e,1)===s&&this.m_lists.setField(e,1,sn.st_nullNode())),this.freeNode_(s)}deleteElementSearch(e,t){let s=-1,n=this.getFirst(e);for(;n!==t;)s=n,n=this.getNext(n);this.deleteElementDirect(e,s,t)}concatenateLists(e,t){const s=this.m_lists.getField(e,1),n=this.m_lists.getField(t,0);if(n!==sn.st_nullNode()&&(s!==sn.st_nullNode()?(this.m_listNodes.setField(s,1,n),this.m_lists.setField(e,1,this.m_lists.getField(t,1))):(this.m_lists.setField(e,0,n),this.m_lists.setField(e,1,this.m_lists.getField(t,1)))),this.m_bAllowNavigationBetweenLists){const e=this.m_lists.getField(t,2),s=this.m_lists.getField(t,3);e!==sn.st_nullNode()?this.m_lists.setField(e,3,s):this.m_listOfLists=s,s!==sn.st_nullNode()&&this.m_lists.setField(s,2,e)}return this.freeList_(t),e}getElement(e){return this.m_listNodes.getField(e,0)}getData(e){return this.getElement(e)}setElement(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}getNext(e){return this.m_listNodes.getField(e,1)}getFirst(e){return this.m_lists.getField(e,0)}getFirstElement(e){const t=this.getFirst(e);return this.getElement(t)}static st_nullNode(){return-1}clear(){this.m_listNodes.deleteAll(!0),this.m_lists.deleteAll(!0),this.m_listOfLists=sn.st_nullNode()}isEmpty(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getNodeCount(){return this.m_listNodes.size()}getListCount(){return this.m_lists.size()}getFirstList(){return this.m_listOfLists}getNextList(e){return this.m_lists.getField(e,3)}}function nn(e=-1){return{m_value:e,m_line:new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,m_segment:null,m_segmentInfo:new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a6(-1),m_env:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E(0,0),m_dxdy:55555555,m_bHorizontal:!1,m_bCurve:!1}}const rn=67;class on extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e,t,s){super(!0),this.m_bIntersectionDetected=!1,this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult,this.m_tempSimpleEdge1=nn(),this.m_tempSimpleEdge2=nn(),this.m_prev1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_prev2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_currentNode=-1,this.m_prevX1=Number.NaN,this.m_prevX2=Number.NaN,this.m_prevY=Number.NaN,this.m_prevX=0,this.m_sweepY=Number.NaN,this.m_sweepX=0,this.m_ptSweep=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,this.m_simpleEdgesCache=[],this.m_simpleEdgesRecycle=[],this.m_cOutstandingConstructedEdges=0,this.m_shape=e,this.m_bShapeHasSegments=this.m_shape.hasCurves(),this.m_tolerance=t,this.m_tolerance10=10*t,this.m_bIsSimple=s;const n=Math.trunc(Math.min(3*e.getTotalPointCount()/2,rn)),r=Math.min(7,n);this.m_simpleEdgesCache.length=r}tryGetCachedEdge_(e){const t=this.m_simpleEdgesCache[(e&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)())%this.m_simpleEdgesCache.length];return t&&t.m_value===e?t:null}tryDeleteCachedEdge_(e){const t=(e&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)())%this.m_simpleEdgesCache.length,s=this.m_simpleEdgesCache[t];s&&s.m_value===e&&(this.m_simpleEdgesRecycle.push(s),this.m_simpleEdgesCache[t]=null)}tryCreateCachedEdge_(e){const t=(e&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)())%this.m_simpleEdgesCache.length;let s=this.m_simpleEdgesCache[t];return s?null:(0===this.m_simpleEdgesRecycle.length?(s=nn(),this.m_cOutstandingConstructedEdges++):s=this.m_simpleEdgesRecycle.pop(),s.m_value=e,this.m_simpleEdgesCache[t]=s,s)}initSimpleEdge_(e,t){this.m_bShapeHasSegments&&this.initSimpleEdgeHelper_(e,t)||e.m_bCurve||(this.m_shape.queryLineConnector(t,e.m_line,!0),e.m_segment=e.m_line,e.m_env.setCoordsNoNAN(e.m_line.getStartX(),e.m_line.getEndX()),e.m_env.vmax+=this.m_tolerance,e.m_line.orientBottomUp(),e.m_bHorizontal=e.m_line.getEndY()===e.m_line.getStartY(),e.m_bHorizontal||(e.m_dxdy=(e.m_line.getEndX()-e.m_line.getStartX())/(e.m_line.getEndY()-e.m_line.getStartY())))}initSimpleEdgeHelper_(e,t){if(e.m_segment=this.m_shape.getSegment(t),e.m_segmentInfo=this.m_shape.getOriginalSegmentInfo(t),e.m_bCurve=null!==e.m_segment,e.m_bCurve){const t=e.m_segment.clone();return t.orientBottomUp(),e.m_segment=t,e.m_env=e.m_segment.queryInterval(0,0),e.m_env.vmax+=this.m_tolerance,!0}return!1}compareTwoSegments_(e,t){const s=e.getStartXY(),n=e.getEndXY(),r=t.getStartXY(),i=t.getEndXY();if(this.m_ptSweep.setCoords(this.m_sweepX,this.m_sweepY),s.isEqualPoint2D(r)&&this.m_sweepY===s.y){this.m_ptSweep.assign(n.compare(i)<0?n:i);const s=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),r=t.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x);if(Math.abs(s-r)>this.m_tolerance)return s<r?-1:1}const o=s.compare(r)<0?r:s,a=n.compare(i)<0?n:i;let h=0,m=0;for(let l=1;l<5;l++){(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.U)(o,a,l/5,this.m_ptSweep);const s=e.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),n=t.intersectionOfYMonotonicWithAxisX(this.m_ptSweep.y,this.m_ptSweep.x),r=Math.abs(s-n);r>h&&(h=r,m=s<n?-1:1)}return 0===m?this.errorCracking():m}compareNonHorizontal_(e,t){if(e.m_line.getStartY()===t.m_line.getStartY()&&e.m_line.getStartX()===t.m_line.getStartX())return e.m_line.getEndY()===t.m_line.getEndY()&&e.m_line.getEndX()===t.m_line.getEndX()?this.m_bIsSimple?this.errorCoincident():0:this.compareNonHorizontalUpperEnd_(e,t);if(e.m_line.getEndY()===t.m_line.getEndY()&&e.m_line.getEndX()===t.m_line.getEndX())return this.compareNonHorizontalLowerEnd_(e,t);const s=this.compareNonHorizontalLowerEnd_(e,t),n=this.compareNonHorizontalUpperEnd_(e,t);return s<0&&n<0?-1:s>0&&n>0?1:this.errorCracking()}compareHorizontal1Case1_(e,t){if(e.getEndX()>t.getEndX()){if(t.getEndX()>t.getStartX()&&t.getEndY()-t.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(t.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else{if((t.getEndY()-t.getStartY())/(t.getEndX()-t.getStartX())*(e.getEndX()-e.getStartX())<this.m_tolerance10&&t.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}return 1}compareHorizontal1Case2_(e,t){if(e.getStartX()<t.getStartX()){if(t.getEndX()>t.getStartX()&&t.getEndY()-t.getStartY()<2*this.m_tolerance&&e.isIntersectingPoint(t.getEndXY(),this.m_tolerance,!0))return this.errorCracking()}else{if((t.getEndY()-t.getStartY())/(t.getEndX()-t.getStartX())*(e.getStartX()-e.getEndX())<this.m_tolerance10&&t.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking()}return-1}compareHorizontal1Case3_(e,t){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();s.setSub(t.getEndXY(),t.getStartXY()),s.rightPerpendicularThis(),s.normalize();const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();n.setSub(e.getStartXY(),t.getStartXY());const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();r.setSub(e.getEndXY(),t.getStartXY());const i=n.dotProduct(s),o=r.dotProduct(s),a=Math.abs(i),h=Math.abs(o);if(a<h){if(a<this.m_tolerance10&&t.isIntersectingPoint(e.getStartXY(),this.m_tolerance,!0))return this.errorCracking()}else if(h<this.m_tolerance10&&t.isIntersectingPoint(e.getEndXY(),this.m_tolerance,!0))return this.errorCracking();return i<0&&o<0?-1:i>0&&o>0?1:this.errorCracking()}compareHorizontal1_(e,t){return e.getStartY()===t.getStartY()&&e.getStartX()===t.getStartX()?this.compareHorizontal1Case1_(e,t):e.getEndY()===t.getEndY()&&e.getEndX()===t.getEndX()?this.compareHorizontal1Case2_(e,t):this.compareHorizontal1Case3_(e,t)}compareHorizontal2_(e,t){return e.getEndY()===t.getEndY()&&e.getEndX()===t.getEndX()&&e.getStartY()===t.getStartY()&&e.getStartX()===t.getStartX()?this.m_bIsSimple?this.errorCoincident():0:this.errorCracking()}compareNonHorizontalLowerEnd_(e,t){let s=1;if(e.m_line.getStartY()<t.m_line.getStartY()){s=-1;const n=e;e=t,t=n}const n=e.m_line,r=t.m_line,i=n.getStartX()-r.getStartX(),o=t.m_dxdy*(n.getStartY()-r.getStartY()),a=this.m_tolerance10;return i<o-a?-s:i>o+a?s:r.isIntersectingPoint(n.getStartXY(),this.m_tolerance,!0)?this.errorCracking():i<o?-s:s}compareNonHorizontalUpperEnd_(e,t){let s=1;if(t.m_line.getEndY()<e.m_line.getEndY()){s=-1;const n=e;e=t,t=n}const n=e.m_line,r=t.m_line,i=n.getEndX()-r.getStartX(),o=t.m_dxdy*(n.getEndY()-r.getStartY()),a=this.m_tolerance10;return i<o-a?-s:i>o+a?s:r.isIntersectingPoint(n.getEndXY(),this.m_tolerance,!0)?this.errorCracking():i<o?-s:s}errorCoincident(){this.m_bIntersectionDetected=!0;const e=7;return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(e,this.m_vertex1,this.m_vertex2),-1}errorCracking(){if(this.m_bIntersectionDetected=!0,this.m_bIsSimple){const e=6;this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(e,this.m_vertex1,this.m_vertex2)}else this.m_prev1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_prev2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;return-1}compareSegments_(e,t,s,n){if(s.m_env.vmax<n.m_env.vmin)return-1;if(n.m_env.vmax<s.m_env.vmin)return 1;if(!s.m_bCurve&&!n.m_bCurve){let e=s.m_bHorizontal?1:0;return e|=n.m_bHorizontal?2:0,0===e?this.compareNonHorizontal_(s,n):1===e?this.compareHorizontal1_(s.m_line,n.m_line):2===e?-1*this.compareHorizontal1_(n.m_line,s.m_line):this.compareHorizontal2_(s.m_line,n.m_line)}if(this.m_bIntersectionDetected)return-1;const r=this.m_prevY===this.m_sweepY&&this.m_prevX===this.m_sweepX;let i,o;if(r&&e===this.m_prev1?i=this.m_prevX1:(i=Number.NaN,this.m_prev1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),r&&t===this.m_prev2?o=this.m_prevX2:(o=Number.NaN,this.m_prev2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),this.m_prevY=this.m_sweepY,this.m_prevX=this.m_sweepX,Number.isNaN(i)){this.m_prev1=e;const t=s.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);i=t,this.m_prevX1=t}if(Number.isNaN(o)){this.m_prev2=t;const e=n.m_segment.intersectionOfYMonotonicWithAxisX(this.m_sweepY,this.m_sweepX);o=e,this.m_prevX2=e}const a=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Y)(!0,!0,s.m_segment,n.m_segment,this.m_tolerance,!0);return 0!==a?2===a?this.m_bIsSimple?this.errorCoincident():s.m_segmentInfo.equals(n.m_segmentInfo)?0:this.errorCracking():this.errorCracking():Math.abs(i-o)<=this.m_tolerance?this.compareTwoSegments_(s.m_segment,n.m_segment):i<o?-1:i>o?1:0}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1}intersectionDetected(){return this.m_bIntersectionDetected}getLastComparedNode(){return this.m_currentNode}getResult(){return this.m_nonSimpleResult}setSweepY(e,t){this.m_sweepY=e,this.m_sweepX=t,this.m_prev1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_prev2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex1=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_vertex2=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}compare(e,t,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=t;return this.m_currentNode=s,this.compareSegments(r,r,n,n)}compareSegments(e,t,s,n){let r=this.tryGetCachedEdge_(e);null===r?this.m_vertex1===t?r=this.m_tempSimpleEdge1:(this.m_vertex1=t,r=this.tryCreateCachedEdge_(e),null===r&&(r=this.m_tempSimpleEdge1,this.m_tempSimpleEdge1.m_value=e),this.initSimpleEdge_(r,t)):this.m_vertex1=t;let i=this.tryGetCachedEdge_(s);return null===i?this.m_vertex2===n?i=this.m_tempSimpleEdge2:(this.m_vertex2=n,i=this.tryCreateCachedEdge_(s),null===i&&(i=this.m_tempSimpleEdge2,this.m_tempSimpleEdge2.m_value=s),this.initSimpleEdge_(i,n)):this.m_vertex2=n,this.compareSegments_(t,n,r,i)}onDelete(e){this.tryDeleteCachedEdge_(e)}onSet(e){this.tryDeleteCachedEdge_(e)}onEndSearch(e){this.tryDeleteCachedEdge_(e)}onAddUniqueElementFailed(e){this.tryDeleteCachedEdge_(e)}}class an{constructor(e,t){this.m_bIntersectionDetected=!1,this.m_pointOfInterest=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_line1=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,this.m_seg1=null,this.m_env=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty(),this.m_vertex1=-1,this.m_currentNode=-1,this.m_minDist=Number.MAX_VALUE,this.m_shape=e,this.m_tolerance=t}getCurrentNode(){return this.m_currentNode}clearIntersectionDetectedFlag(){this.m_bIntersectionDetected=!1,this.m_minDist=Number.MAX_VALUE}intersectionDetected(){return this.m_bIntersectionDetected}setPoint(e){this.m_pointOfInterest.assign(e)}compare(e,t){const s=e.getElement(t);return this.compareVertex(e,t,s)}compareVertex(t,s,n){let r,i=this.m_shape.getSegment(n),o=!0;if(null==i)this.m_shape.queryLineConnector(n,this.m_line1,!0),this.m_env.setCoordsNoNAN(this.m_line1.getStartX(),this.m_line1.getEndX()),i=this.m_line1,r=this.m_line1.getStartY()===this.m_line1.getEndY();else{const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.queryLooseEnvelope(t),t.queryIntervalX(this.m_env),r=0===t.height(),o=!1}if(this.m_pointOfInterest.x+this.m_tolerance<this.m_env.vmin)return-1;if(this.m_pointOfInterest.x-this.m_tolerance>this.m_env.vmax)return 1;if(r)return this.m_currentNode=s,this.m_bIntersectionDetected=!0,0;let a=0;if(o){(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.$)(this.m_line1);const e=this.m_line1.getStartXY(),t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;t.setSub(this.m_line1.getEndXY(),e),t.rightPerpendicularThis();const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;s.setSub(this.m_pointOfInterest,e),a=t.dotProduct(s),a/=t.length()}else{a=i.intersectionOfYMonotonicWithAxisX(this.m_pointOfInterest.y,this.m_pointOfInterest.x)-this.m_pointOfInterest.x}if(a<10*-this.m_tolerance)return-1;if(a>10*this.m_tolerance)return 1;if(i.isIntersectingPoint(this.m_pointOfInterest,this.m_tolerance)){Math.abs(a)<this.m_minDist&&(this.m_currentNode=s,this.m_minDist=a),this.m_bIntersectionDetected=!0}return a<0?-1:a>0?1:0}}class hn{constructor(e,t){this.m_lists=new sn(!1),this.m_hash=t,this.m_hashBuckets=new Int32Array(e),this.m_hashBuckets.fill(hn.st_nullNode()),this.m_bitFilter=new Int32Array(10*e+31>>5)}reserveElements(e){this.m_lists.reserveLists(Math.min(this.m_hashBuckets.length,e)),this.m_lists.reserveNodes(e)}addElement(e,t){void 0===t&&(t=this.m_hash.getHash(e));const s=t%(this.m_bitFilter.length<<5);this.m_bitFilter[s>>5]|=1<<(31&s);const n=t%this.m_hashBuckets.length;let r=this.m_hashBuckets[n];r===sn.st_nullNode()&&(r=this.m_lists.createList(),this.m_hashBuckets[n]=r);return this.m_lists.addElement(r,e)}deleteElement(e,s){void 0===s&&(s=this.m_hash.getHash(e));const n=s%this.m_hashBuckets.length,r=this.m_hashBuckets[n];r===sn.st_nullNode()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("");let i=this.m_lists.getFirst(r),o=sn.st_nullNode();for(;i!==sn.st_nullNode();){const t=this.m_lists.getData(i),s=this.m_lists.getNext(i);t===e?(this.m_lists.deleteElementDirect(r,o,i),this.m_lists.getFirst(r)===sn.st_nullNode()&&(this.m_lists.deleteList(r),this.m_hashBuckets[n]=sn.st_nullNode())):o=i,i=s}}getFirstInBucket(e){const t=e%(this.m_bitFilter.length<<5);if(!(this.m_bitFilter[t>>5]&1<<(31&t)))return sn.st_nullNode();const s=e%this.m_hashBuckets.length,n=this.m_hashBuckets[s];return n===sn.st_nullNode()?sn.st_nullNode():this.m_lists.getFirst(n)}getNextInBucket(e){return this.m_lists.getNext(e)}findNode(e){const t=this.m_hash.getHash(e);let s=this.getFirstInBucket(t);for(;s!==sn.st_nullNode();){const t=this.m_lists.getData(s);if(this.m_hash.equal(t,e))return s;s=this.m_lists.getNext(s)}return sn.st_nullNode()}deleteNode(e){const s=this.getElement(e),n=this.m_hash.getHash(s)%this.m_hashBuckets.length,r=this.m_hashBuckets[n];r===sn.st_nullNode()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),this.m_lists.deleteElementSearch(r,e),this.m_lists.getFirst(r)===sn.st_nullNode()&&(this.m_lists.deleteList(r),this.m_hashBuckets[n]=sn.st_nullNode())}getElement(e){return this.m_lists.getData(e)}static st_nullNode(){return sn.st_nullNode()}clear(){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}size(){return this.m_lists.getNodeCount()}dbgPrintBucketHistogram(){}}function mn(e,t,s,n,r){const i=new fn(r);return i.m_shape=e,i.m_sqrTolerance=t*t,i.m_cellSize=2*t,i.m_invCellSize=1/i.m_cellSize,i.m_geometry=s,i.m_bTrackChanges=n,i.m_bHasSegmentParentage=e.hasSegmentParentage(),i.clusterNonReciprocal()}function ln(e,t,s,n,r){const i=e-s,o=t-n;return i*i+o*o<=r}function gn(){return{pt:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,weight:0,rank:0,bMerged:!1}}function un(e,t,s,n,r,i){const o=gn(),a=s+r;let h=!1,m=e.x;e.x!==t.x&&(n===i&&(m=(e.x*s+t.x*r)/a),h=!0);let l=e.y;return e.y!==t.y&&(n===i&&(l=(e.y*s+t.y*r)/a),h=!0),n!==i?n>i?(o.rank=n,o.weight=s,o.pt=e):(o.rank=i,o.weight=r,o.pt=t):(o.pt.setCoords(m,l),o.weight=a,o.rank=n),o.bMerged=h,o}function cn(e,t,s,n,r,i,o,a,h){const m=e.equals(t);if(n>i)return o.assignCopy(e),h[0]=n,a[0]=s,m;if(i>n)return o=t,h[0]=i,a[0]=r,m;o.assignCopy(e);const l=un(e.getXY(),t.getXY(),s,n,r,i);return o.setXY(l.pt),a[0]=l.weight,h[0]=l.rank,m}function _n(e,t,s,n,r){const i=new fn(r);return i.m_shape=e,i.m_sqrTolerance=t*t,i.m_cellSize=2*t,i.m_invCellSize=1/i.m_cellSize,i.m_geometry=s,i.m_bTrackChanges=!1,i.needsClustering()}function dn(e,t){const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aK)(e);return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aF)(s,t)}class pn{constructor(e,t,s,n,r){this.m_workPt=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,this.m_shape=e,this.m_sqrTolerance=s,this.m_invCellSize=n,this.m_origin=t.clone(),this.m_hashValues=r}getHash(e){return this.m_shape.getUserIndex(e,this.m_hashValues)}calculateHashFromVertex(e){this.m_shape.queryXY(e,this.m_workPt);const t=this.m_workPt.x-this.m_origin.x,s=Math.trunc(t*this.m_invCellSize+.5),n=this.m_workPt.y-this.m_origin.y;return dn(s,Math.trunc(n*this.m_invCellSize+.5))}equal(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}}class fn{constructor(e){this.m_origin=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_sqrTolerance=0,this.m_cellSize=0,this.m_invCellSize=0,this.m_geometry=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_bucketArray=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,Number.NaN),this.m_bucketHash=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,Number.NaN),this.m_dbgCandidateCheckCount=0,this.m_nsr=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult,this.m_hashValues=-1,this.m_newClusters=-1,this.m_bTrackChanges=!1,this.m_bHasSegmentParentage=!1,this.m_shape=null,this.m_clusters=new sn,this.m_hashFunction=null,this.m_hashTable=null,this.m_progressCounter=0,this.m_progressTracker=e}progress_(){}collectClusterCandidates(e,t){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.m_shape.queryXY(e,s);const n=(s.x-this.m_origin.x)*this.m_invCellSize,r=(s.y-this.m_origin.y)*this.m_invCellSize,i=Math.trunc(n),o=Math.trunc(r);let a=0;for(let h=0;h<=1;h+=1)for(let e=0;e<=1;e+=1){const t=dn(i+h,o+e),s=this.m_hashTable.getFirstInBucket(t);s!==hn.st_nullNode()&&(this.m_bucketArray[a]=s,this.m_bucketHash[a]=t,a++)}for(let h=a-1;h>=1;h--){const e=this.m_bucketArray[h];for(let t=h-1;t>=0;t--)if(e===this.m_bucketArray[t]){this.m_bucketHash[t]=-1,a--,h!==a&&(this.m_bucketHash[h]=this.m_bucketHash[a],this.m_bucketArray[h]=this.m_bucketArray[a]);break}}for(let h=0;h<a;h++)this.collectNearestNeighbourCandidates(e,this.m_bucketHash[h],s,this.m_bucketArray[h],t)}collectNearestNeighbourCandidates(e,t,s,n,r){const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();for(let o=n;o!==hn.st_nullNode();o=this.m_hashTable.getNextInBucket(o)){const n=this.m_hashTable.getElement(o);e===n||-1!==t&&this.m_shape.getUserIndex(n,this.m_hashValues)!==t||(this.m_shape.queryXY(n,i),ln(s.x,s.y,i.x,i.y,this.m_sqrTolerance)&&r.push(o))}}mergeClusters(e,t,s){let n=this.m_shape.getUserIndex(e,this.m_newClusters);const r=this.m_shape.getUserIndex(t,this.m_newClusters);-1===n&&(n=this.m_clusters.createList(),this.m_clusters.addElement(n,e),this.m_shape.setUserIndex(e,this.m_newClusters,n)),-1===r?this.m_clusters.addElement(n,t):this.m_clusters.concatenateLists(n,r),this.m_shape.setUserIndex(t,this.m_newClusters,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2());const i=this.mergeVertices(e,t);if(s){const t=this.m_hashFunction.calculateHashFromVertex(e);this.m_shape.setUserIndex(e,this.m_hashValues,t)}return i}mergeVertices(e,t){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.m_shape.queryXY(e,s);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.m_shape.queryXY(t,n);const r=this.m_shape.getRank(e),i=this.m_shape.getRank(t),o=this.m_shape.getWeight(e),a=this.m_shape.getWeight(t);let h,m,l,g,u=!1;if(r===i?(h=r,m=o+a,l=s.x,s.x!==n.x&&(l=(s.x*o+n.x*a)/m,u=!0),g=s.y,s.y!==n.y&&(g=(s.y*o+n.y*a)/m,u=!0)):(r>i?(l=s.x,g=s.y,m=o,h=r):(l=n.x,g=n.y,m=a,h=i),u=!s.equals(n)),u&&(this.m_shape.setXYMonotonic(e,l,g),this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(e,!0),this.m_bHasSegmentParentage)){const s=this.m_shape.getSegmentParentageBreakVertex(e)||this.m_shape.getSegmentParentageBreakVertex(t);this.m_shape.setSegmentParentageBreakVertex(e,s),this.m_shape.setSegmentParentageBreakVertex(t,s)}return this.m_shape.setWeight(e,m),this.m_shape.setRank(e,h),u}needsClustering(){const e={stack:[],error:void 0,hasError:!1};try{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(e,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.h)((()=>{this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters)})),!1);const t=this.m_shape.getSelectedCount(),s=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin.assign(s.getLowerLeft());const n=Math.max(s.height(),s.width())/((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()-1);this.m_cellSize<n&&(this.m_cellSize=n,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(this.m_shape.getSelectedCount()/3+1),this.m_clusters.reserveNodes(this.m_shape.getSelectedCount()/3+1),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new pn(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new hn(4*t/3,this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let r=!1;for(let e=0;e<2;e++){const t=[],s=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let n=s.next();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=s.next()){if(this.progress_(),e>0&&this.m_shape.getUserIndex(n,this.m_newClusters)===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2())continue;let s;if(0===e?(s=this.m_hashFunction.calculateHashFromVertex(n),this.m_shape.setUserIndex(n,this.m_hashValues,s)):s=this.m_shape.getUserIndex(n,this.m_hashValues),this.collectClusterCandidates(n,t),0!==t.length){for(let e=0,s=t.length;e<s;e++){this.progress_();const s=t[e],i=this.m_hashTable.getElement(s);if(this.m_hashTable.deleteNode(s),!this.m_shape.isEqualXY(n,i))return this.m_nsr=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(5,this.m_shape.getVertexIndex(n),this.m_shape.getVertexIndex(i)),r=!0,r;this.mergeClusters(n,i,!1)}t.length=0}0===e&&this.m_hashTable.addElement(n,s)}}return r}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(e)}}clusterNonReciprocal(){const e=this.m_shape.getSelectedCount(),t=this.m_shape.getEnvelope2D(this.m_progressTracker);this.m_origin=t.getLowerLeft();const s=Math.max(t.height(),t.width())/((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()-1);this.m_cellSize<s&&(this.m_cellSize=s,this.m_invCellSize=1/this.m_cellSize),this.m_clusters.clear(),this.m_clusters.reserveLists(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_clusters.reserveNodes(Math.trunc(this.m_shape.getSelectedCount()/3+1)),this.m_hashValues=this.m_shape.createUserIndex(),this.m_newClusters=this.m_shape.createUserIndex(),this.m_hashFunction=new pn(this.m_shape,this.m_origin,this.m_sqrTolerance,this.m_invCellSize,this.m_hashValues),this.m_hashTable=new hn(Math.trunc(4*e/3),this.m_hashFunction),this.m_hashTable.reserveElements(this.m_shape.getSelectedCount());let n=!1;{const e=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let t=e.next();t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=e.next()){this.progress_();const e=this.m_hashFunction.calculateHashFromVertex(t);this.m_shape.setUserIndex(t,this.m_hashValues,e),this.m_hashTable.addElement(t,e)}}{const e=[],t=this.m_shape.queryVertexIteratorOnSelection(this.m_geometry);for(let s=t.next();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=t.next()){if(this.m_shape.getUserIndex(s,this.m_newClusters)===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2())continue;let t=this.m_shape.getUserIndex(s,this.m_hashValues);this.m_hashTable.deleteElement(s,t);let r=!1;for(;this.collectClusterCandidates(s,e),0!==e.length;){let t=0;for(let n=0,r=e.length;n<r;n++){this.progress_();const i=e[n],o=this.m_hashTable.getElement(i);this.m_hashTable.deleteNode(i);const a=n+1===r;t|=this.mergeClusters(s,o,a)?1:0}if(r||=0!==t,n||=0!==t,e.length=0,!t)break}r&&(t=this.m_shape.getUserIndex(s,this.m_hashValues)),this.m_hashTable.addElement(s,t)}e.length=0}return n&&this.applyClusterPositions_(),this.m_hashTable=null,this.m_hashFunction=null,this.m_shape.removeUserIndex(this.m_hashValues),this.m_shape.removeUserIndex(this.m_newClusters),n}applyClusterPositions_(){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();for(let t=this.m_clusters.getFirstList();t!==sn.st_nullNode();t=this.m_clusters.getNextList(t)){let s=this.m_clusters.getFirst(t);const n=this.m_clusters.getElement(s);this.m_shape.queryXY(n,e);const r=this.m_shape.getRank(n),i=this.m_shape.getWeight(n);for(s=this.m_clusters.getNext(s);s!==sn.st_nullNode();s=this.m_clusters.getNext(s)){const t=this.m_clusters.getElement(s);if(this.m_bTrackChanges?this.m_shape.isEqualXYPoint2D(t,e)||(this.m_shape.setXYMonotonicPoint2D(t,e),this.m_shape.setGeometryModifiedWithVertex(t,!0)):this.m_shape.setXYMonotonicPoint2D(t,e),this.m_bHasSegmentParentage){const e=this.m_shape.getSegmentParentageBreakVertex(n)||this.m_shape.getSegmentParentageBreakVertex(t);this.m_shape.setSegmentParentageBreakVertex(n,e),this.m_shape.setSegmentParentageBreakVertex(t,e)}this.m_shape.setWeight(t,i),this.m_shape.setRank(t,r)}}}}class xn{constructor(){this.m_inputParts=[],this.m_resultParts1=[],this.m_resultParts2=[],this.m_resultSegments=[],this.m_freeSegments=[],this.m_inputSegments=[],this.m_param1=[],this.m_param2=[],this.m_tolerance=0,this.m_toleranceZ=0,this.m_point=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,this.m_pointWeight=1,this.m_maxDensifyLimit=0,this.m_pointRank=0,this.m_changed1=!1,this.m_changed2=!1,this.m_adaptiveDensify=!1}clear(){this.freeAllResultSegments(),this.m_inputSegments.length=0,this.m_inputParts.length=0,this.m_resultParts1.length=0,this.m_resultParts2.length=0,this.m_param1.length=0,this.m_param2.length=0,this.m_adaptiveDensify=!1,this.m_changed1=!1,this.m_changed2=!1}newIntersectionPart_(e,t,s,n,r,i,o,a,h,m){return Pn(e,t,s,n,r,i,o,a,h,m)}pushSegment(e,t,s,n,r,i,o,a,h,m){return this.m_inputParts.push(this.newIntersectionPart_(this.m_inputSegments.length,t,s,n,r,i,o,a,h,m)),this.m_inputSegments.push(e),this.m_inputParts.length-1}getResultSegmentCount(e){return this.m_adaptiveDensify?0===e?this.m_param1.length-1:this.m_param2.length-1:0===e?this.m_resultParts1.length:this.m_resultParts2.length}getResultPart_(e,t){return 0===e?this.m_resultParts1[t]:this.m_resultParts2[t]}getResultSegment(e,t){return this.m_resultSegments[this.getResultPart_(e,t).segmentIndex].get()}getSegmentChanged(e){return 0===e?this.m_changed1:this.m_changed2}getResultSegmentStartPointWeight(e,t){return this.getResultPart_(e,t).weightStart}getResultSegmentStartPointRank(e,t){return this.getResultPart_(e,t).rankStart}getResultSegmentSegmentParentage(e,t){return this.getResultPart_(e,t).segmentParentage}getResultSegmentStartPointIsBreak(e,t){return this.getResultPart_(e,t).u.bBreakStart}getResultSegmentEndPointWeight(e,t){return this.getResultPart_(e,t).weightEnd}getResultSegmentEndPointRank(e,t){return this.getResultPart_(e,t).rankEnd}getResultSegmentEndPointIsBreak(e,t){return this.getResultPart_(e,t).u.bBreakEnd}getResultSegmentInteriorRank(e,t){return this.getResultPart_(e,t).rankInterior}getResultSegmentInteriorWeight(e,t){return this.getResultPart_(e,t).weightInterior}getResultPoint(){return this.m_point}getResultPointWeight(){return this.m_pointWeight}getResultPointRank(){return this.m_pointRank}getResultPointChanged(){return this.m_changed2}intersectLines(e,t){2!==this.m_inputSegments.length&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),this.m_changed1=!1,this.m_changed2=!1,this.m_tolerance=e;const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(e*xn.c_smallToleranceFactor);let n=!1;const r=this.m_inputParts[0],o=this.m_inputParts[1],a=this.m_inputSegments[r.segmentIndex],h=this.m_inputSegments[o.segmentIndex];if(t||5&(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Q)(!0,a,h,e,!0)){const t=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Z)(!0,a,h,null,this.m_param1,this.m_param2,e);0===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");const m=new Array(t);for(let e=0;e<t;++e)m[e]=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();const l=new Float64Array(t),g=new Int32Array(t),u=new Array(t),c=new Array(t);for(let e=0;e<t;++e)u[e]=En(),c[e]=En();for(let e=0;e<t;e++){const t=this.m_param1[e],i=this.m_param2[e];let _,d=r.rankInterior,p=r.weightInterior;0===t?(d=r.rankStart,p=r.weightStart,_=r.u.bBreakStart):1===t?(d=r.rankEnd,p=r.weightEnd,_=r.u.bBreakEnd):(this.m_changed1=!0,_=!1);let f,x=o.rankInterior,y=o.weightInterior;0===i?(x=o.rankStart,y=o.weightStart,f=o.u.bBreakStart):1===i?(x=o.rankEnd,y=o.weightEnd,f=o.u.bBreakEnd):(this.m_changed2=!0,f=!1);const P=d,E=x;let S=1,C=0,I=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();if(P===E){const n=a.getCoord2D(t),r=h.getCoord2D(i);S=p+y;C=d,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.U)(n,r,y/S,I);const o=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(I,n),m=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(I,r);u[e].bBigMove=o>s,c[e].bBigMove=m>s,this.m_changed1||n.equals(I)||(this.m_changed1=!0),this.m_changed2||r.equals(I)||(this.m_changed2=!0)}else if(P>E){I=a.getCoord2D(t);const n=h.getCoord2D(i);S=p,C=d;const r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(I,n);u[e].bBigMove=!1,c[e].bBigMove=r>s,this.m_changed2||n.equals(I)||(this.m_changed2=!0)}else{I=h.getCoord2D(i),S=y,C=x;const n=a.getCoord2D(t),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(I,n);u[e].bBigMove=r>s,c[e].bBigMove=!1,this.m_changed1||n.equals(I)||(this.m_changed1=!0)}m[e].assign(I),l[e]=S,g[e]=C,u[e].bIsBreak=_||f,c[e].bIsBreak=_||f,n||=u[e].bBigMove||c[e].bBigMove}const _=r.rankInterior,d=r.weightInterior;let p=0,f=-1;for(let s=0;s<=t;s++){const n=s<t?this.m_param1[s]:1;if(n!==p){const i=this.allocResultSegment(),o=this.m_resultSegments[i];let h,c,x,y;a.queryCut(p,n,o,!1),o.get().snapControlPoints(e*e);let P=!1,E=!1,S=!1,C=!1,I=!1,b=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),w=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();-1!==f?(c=g[f],h=l[f],P=u[f].bBigMove,b.assign(m[f]),S=u[f].bIsBreak,I=!0):(h=r.weightStart,c=r.rankStart,b=o.get().getStartXY(),S=r.u.bBreakStart),s<t?(y=g[s],x=l[s],E=u[s].bBigMove,w.assign(m[s]),C=u[s].bIsBreak,I=!0):(x=r.weightEnd,y=r.rankEnd,w=o.get().getEndXY(),C=r.u.bBreakEnd),I&&o.get().setCoordsForIntersector(b,w,!0),this.m_resultParts1.push(this.newIntersectionPart_(i,h,c,x,y,d,_,S,C,r.segmentParentage));const v=this.m_resultParts1.at(-1);v.u.bBigMoveStart=P,v.u.bBigMoveEnd=E,p=n,f=s}else-1===f&&(f=s)}const x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(t,0);for(let e=0;e<t;e++)x[e]=e;t>2?(x.sort(((e,t)=>this.m_param2[e]<this.m_param2[t]?-1:this.m_param2[e]>this.m_param2[t]?1:0)),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.v)(this.m_param2)):2===t&&this.m_param2[0]>this.m_param2[1]&&(this.m_param2[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.m_param2[0],this.m_param2[0]=this.m_param2[1]),x[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(x[0],x[0]=x[1]));const y=o.rankInterior,P=o.weightInterior;p=0,f=-1;for(let s=0;s<=t;s++){const n=s<t?this.m_param2[s]:1;if(n!==p){const r=this.allocResultSegment(),i=this.m_resultSegments[r];let a,u,_,d;h.queryCut(p,n,i,!1),i.get().snapControlPoints(e*e);let E=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),S=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),C=!1,I=!1,b=!1,w=!1,v=!1;if(-1!==f){const e=x[f];a=l[e],u=g[e],E.assign(m[e]),b=c[e].bBigMove,C=c[e].bIsBreak,v=!0}else a=o.weightStart,u=o.rankStart,E=i.get().getStartXY(),C=o.u.bBreakStart;if(s!==t){const e=x[s];_=l[e],d=g[e],S.assign(m[e]),w=c[e].bBigMove,I=c[e].bIsBreak,v=!0}else _=o.weightEnd,d=o.rankEnd,S=i.get().getEndXY(),I=o.u.bBreakEnd;v&&i.get().setCoordsForIntersector(E,S,!0),this.m_resultParts2.push(this.newIntersectionPart_(r,a,u,_,d,P,y,C,I,o.segmentParentage));const N=this.m_resultParts2.at(-1);N.u.bBigMoveStart=b,N.u.bBigMoveEnd=w,p=n,f=s}else-1===f&&(f=s)}return n?3:2}return 0}intersectLines3D(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),1}intersect2D(e,t){const s=this.m_inputParts[0],r=this.m_inputParts[1],i=this.m_inputSegments[s.segmentIndex].getGeometryType(),o=this.m_inputSegments[r.segmentIndex].getGeometryType();if(i!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine||o!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){return new bn(this).intersectCurves(e,t)}return this.intersectLines(e,t)}intersect2DEx(e,t,s,n,r){this.m_point.assignCopy(t),1!==this.m_inputSegments.length&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),this.m_tolerance=e,this.m_changed1=!1,this.m_changed2=!1;const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(e*xn.c_smallToleranceFactor);let a=!1;const h=this.m_inputParts[0],m=this.m_inputSegments[h.segmentIndex];if(r||m.isIntersectingPoint(t.getXY(),e,!0)){this.m_param1=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(16,Number.NaN);const r=m.getClosestCoordinate(t.getXY(),!1);this.m_param1[0]=r;let i=h.rankInterior,l=h.weightInterior;0===r?(i=h.rankStart,l=h.weightStart):1===r?(i=h.rankEnd,l=h.weightEnd):this.m_changed1=!0;let g=i;const u=s,c=n;g===u&&m.isCurve()&&(g=u+1);let _=1,d=0;const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;if(g===u){const e=m.getCoord2D(r),s=t.getXY();_=l+c,d=i;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.U)(e,s,c/_,p),this.m_changed1||e.equals(p)||(this.m_changed1=!0),this.m_changed2||s.equals(p)||(this.m_changed2=!0);a=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(p,e)>o}else if(g>u)p.assign(m.getCoord2D(r)),_=l,d=i,this.m_changed2||p.equals(t.getXY())||(this.m_changed2=!0);else{p.assign(m.getCoord2D(r)),_=c,d=u,this.m_changed1||p.equals(t.getXY())||(this.m_changed1=!0);a=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(p,t.getXY())>o}let f=0,x=-1;const y=1;for(let t=0;t<=y;t++){const s=t<y?this.m_param1[0]:1;if(s!==f){const n=this.allocResultSegment(),r=this.m_resultSegments[n];m.queryCut(f,s,r),r.get().snapControlPoints(e*e);let i=h.weightStart,o=h.weightEnd,a=h.rankStart,l=h.rankEnd;const g=h.rankInterior,u=h.weightInterior;let c=h.u.bBreakStart,P=h.u.bBreakEnd;-1!==x&&(i=_,a=d,c=!0,r.get().setCoordsForIntersector(p,r.get().getEndXY(),!0)),t!==y&&(o=_,l=d,P=!0,r.get().setCoordsForIntersector(r.get().getStartXY(),p,!0)),f=s,this.m_resultParts1.push(this.newIntersectionPart_(n,i,a,o,l,u,g,c,P,h.segmentParentage))}x=t}return this.m_point.setXY(p),this.m_pointWeight=_,this.m_pointRank=d,a?3:2}return 0}intersect3D(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),1}intersect3DEx(e,t,s,n,r,i,o){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),1}getTolerance(){return this.m_tolerance}freeAllResultSegments(){this.m_resultSegments.length=0,this.m_freeSegments.length=0}freeResultSegment(e){this.m_freeSegments.push(e)}allocResultSegment(){if(this.m_freeSegments.length){return this.m_freeSegments.pop()}const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,t=this.m_resultSegments.length;return this.m_resultSegments.push(e),t}allocResultSegmentFromBuffer(e){if(this.m_freeSegments.length){return this.m_freeSegments.pop()}const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S({copy:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(t),s}allocResultSegmentFromSegment(e){if(this.m_freeSegments.length){return this.m_freeSegments.pop()}const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S({segment:e}),s=this.m_resultSegments.length;return this.m_resultSegments.push(t),s}}function yn(e,t){return{bBigMoveStart:!1,bBigMoveEnd:!1,bBreakStart:e,bBreakEnd:t}}function Pn(e,t,s,n,r,i,o,a,h,m){return{segmentIndex:e,weightStart:t,rankStart:s,weightEnd:n,rankEnd:r,weightInterior:i,rankInterior:o,segmentParentage:m,u:yn(a,h)}}function En(){return{bBigMove:!1,bIsBreak:!1}}xn.maxWeight=.1*Number.MAX_VALUE,xn.c_smallToleranceFactor=.01,xn.c_maxGeometryTypeToRankDelta=8;let Sn=class{constructor(){this.start=null,this.end=null,this.equalEdge=null,this.segmentIndex=-1,this.segmentParentage=-1,this.weight=0,this.rank=0}hasSegment(){return this.segmentIndex>=0}transferAttributes(e,t,s){if(1===t.getDescription().getAttributeCount())return;const n=e.parent.m_resultSegments[this.segmentIndex].get().getStartXY(),r=e.parent.m_resultSegments[this.segmentIndex].get().getEndXY(),i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;t.queryStart(i),s?(i.setXY(n),e.parent.m_resultSegments[this.segmentIndex].get().setStart(i)):(i.setXY(r),e.parent.m_resultSegments[this.segmentIndex].get().setEnd(i)),t.queryEnd(i),s?(i.setXY(r),e.parent.m_resultSegments[this.segmentIndex].get().setEnd(i)):(i.setXY(n),e.parent.m_resultSegments[this.segmentIndex].get().setStart(i))}copyFromWhenOverlap(e,t,s){this.equalEdge=t,t.equalEdge=this,this.segmentIndex=e.parent.allocResultSegmentFromBuffer(e.parent.m_resultSegments[t.segmentIndex]),this.segmentParentage=t.segmentParentage,this.weight=t.weight,this.rank=t.rank,s?(this.start.copyFrom(t.start),this.end.copyFrom(t.end)):(this.start.copyFrom(t.end),this.end.copyFrom(t.start),e.parent.m_resultSegments[this.segmentIndex].get().reverse())}getEnd(){return this.end}getNextInChain(){return this.end.nextInChain}getPrevInChain(){return this.start.prevInChain}};class Cn{constructor(){this.hash=0,this.pt=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,this.prevInChain=null,this.nextInChain=null,this.prevInHash=null,this.nextInHash=null,this.prevEqual=null,this.nextEqual=null,this.weight=0,this.rank=0,this.bBigMove=!1,this.bIsBreak=!1}copyFrom(e){this.pt.assign(e.pt),this.weight=e.weight,this.rank=e.rank,this.bBigMove=e.bBigMove,this.bIsBreak=e.bIsBreak}nextNode(){return this.nextInChain?this.nextInChain.end:null}prevNode(){return this.prevInChain?this.prevInChain.start:null}equalListHead(){let e=this;for(;null!==e.prevEqual;e=e.prevEqual);return e}}function In(e,t,s,n){return{edge1:e,edge2:t,recursion:s,bIsIntersecting:n}}class bn{constructor(e){this.m_pairs=[],this.m_chainOrigin1=null,this.m_chainOrigin2=null,this.m_newNodes=[],this.m_hashTableOfEquals=[],this.m_hashTableOfEqualsSize=0,this.m_origin=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,this.m_cell=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,this.parent=e}addSegment(e,t,s,n,r,i,o,h,m,l,g){const u=this.newNode(this.parent.m_resultSegments[e].get().getStartXY(),s,n,m),c=this.newNode(this.parent.m_resultSegments[e].get().getEndXY(),r,i,l);this.newEdge(u,c,e,o,h,g),null===this.m_chainOrigin1?this.m_chainOrigin1=u:null===this.m_chainOrigin2?this.m_chainOrigin2=u:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}intersectCurvesHelper(e,t,s,r,o){const h=this.getSegment(e).get(),m=this.getSegment(t).get();if(h.isDegenerate(0)||m.isDegenerate(0))return 0;const l=this.tryOverlapIntersectCurves(e,t,s,r);if(0!==l)return l;const g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(.01*s);let u=!1,c=this.processSharpCorners(h,m,s,o>4);const _=c>0;if(!_){if(!(r||5&(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Y)(!0,!1,h,m,s,!0)))return 0;c=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Z)(!0,h,m,null,this.parent.m_param1,this.parent.m_param2,s)}0===c&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");const d=h.getGeometryType(),p=m.getGeometryType(),f=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,c),x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,c),y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(c,Number.NaN),P=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(c,Number.NaN),E=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(c,Number.NaN),S=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(c,Number.NaN),C=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.n)(En,c),I=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.n)(En,c);let b=!1,w=!1;for(let n=0;n<c;n++){const r=this.parent.m_param1[n],i=this.parent.m_param2[n];let o=e.rank,a=e.weight,l=!0,c=!1;0===r?(o=e.start.rank,a=e.start.weight,c=e.start.bIsBreak):1===r?(o=e.end.rank,a=e.end.weight,c=e.end.bIsBreak):(b=!0,l=!1);let v=t.rank,N=t.weight,T=!1,G=!0;0===i?(v=t.start.rank,N=t.start.weight,T=t.start.bIsBreak):1===i?(v=t.end.rank,N=t.end.weight,T=t.end.bIsBreak):(w=!0,G=!1);let D=o,V=v;if(D===V&&(D*=xn.c_maxGeometryTypeToRankDelta,V*=xn.c_maxGeometryTypeToRankDelta,D+=wn(d,h,!1),V+=wn(p,m,!1)),l&&G&&V===D){const e=h.getCoord2D(r),t=m.getCoord2D(i);e.equals(t)&&(V=D-1)}let F=1,H=0,k=1,A=0;const M=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,U=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,q=h.getCoord2D(r),B=m.getCoord2D(i);if(_&&_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(q,B)>s)M.setCoordsPoint2D(q),U.setCoordsPoint2D(B),F=a,k=N,H=o,A=v,C[n].bBigMove=!1,I[n].bBigMove=!1,c=!0,T=!0;else if(D===V){k=F=a+N,A=H=o;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.U)(q,B,N/F,M),U.setCoordsPoint2D(M);const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(M,q),t=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(M,B);C[n].bBigMove=e>g,I[n].bBigMove=t>g,b||q.equals(M)||(b=!0),w||B.equals(U)||(w=!0)}else if(D>V){M.setCoordsPoint2D(q),U.setCoordsPoint2D(M),k=F=a,A=H=o;const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(M,B);C[n].bBigMove=!1,I[n].bBigMove=e>g,w||B.equals(U)||(w=!0)}else{U.setCoordsPoint2D(B),M.setCoordsPoint2D(U),k=F=N,A=H=v;const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(M,q);C[n].bBigMove=e>g,I[n].bBigMove=!1,b||q.equals(M)||(b=!0)}f[n].assign(M),x[n].assign(U),y[n]=F,P[n]=k,E[n]=H,S[n]=A,C[n].bIsBreak=c||T,I[n].bIsBreak=c||T,u||=C[n].bBigMove||I[n].bBigMove,n>0&&(r!==this.parent.m_param1[n-1]&&i!==this.parent.m_param2[n-1]||(E[n]<=E[n-1]?(f[n].assign(x[n-1]),y[n]=P[n-1],E[n]=S[n-1],x[n].assign(x[n-1]),P[n]=P[n-1],S[n]=S[n-1],C[n].bBigMove||=C[n-1].bBigMove,I[n].bBigMove||=I[n-1].bBigMove,C[n].bIsBreak||=C[n-1].bIsBreak,I[n].bIsBreak||=I[n-1].bIsBreak):(f[n-1].assign(f[n]),y[n-1]=y[n],E[n-1]=E[n],x[n-1].assign(x[n]),P[n-1]=P[n],S[n-1]=S[n],C[n-1].bBigMove||=C[n].bBigMove,I[n-1].bBigMove||=I[n].bBigMove,C[n-1].bIsBreak||=C[n].bIsBreak,I[n-1].bIsBreak||=I[n].bIsBreak)))}if(!(b||w||2!==c||d===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine&&p===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine)){if(this.processDoublyConnectedEdges(e,t,o+1,s))return this.parent.m_changed1=!0,this.parent.m_changed2=!0,2;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}this.parent.m_changed1||=b,this.parent.m_changed2||=w;let v=e,N=e.end.weight,T=e.end.rank,G=e.end.bBigMove,D=e.end.bIsBreak,V=0,F=-1;for(let n=0;n<=c;n++){const t=n<c?this.parent.m_param1[n]:1;if(t!==V){const r=this.parent.allocResultSegment(),i=this.parent.m_resultSegments[r];let o,a,m,l;h.queryCut(V,t,i,!1),i.get().snapControlPoints(s*s);let g=!1,u=!1,_=!1,d=!1;const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;-1!==F?(a=E[F],o=y[F],_=C[F].bBigMove,g=C[F].bIsBreak,p.assign(f[F])):(o=e.start.weight,a=e.start.rank,_=e.start.bBigMove,g=e.start.bIsBreak,p.assign(i.get().getStartXY())),n<c?(l=E[n],m=y[n],d=C[n].bBigMove,u=C[n].bIsBreak,x.assign(f[n])):(m=N,l=T,d=G,u=D,x.assign(i.get().getEndXY()));let P=v;t<1&&(this.splitEdgeInPlace(v),P=v.getNextInChain()),this.updateSegmentOnly(v,r),0===v.start.hash||v.start.pt.equals(p)||(this.m_newNodes.push(v.start),this.removeNodeFromHash(v.start),v.start.hash=0),0===v.end.hash||v.end.pt.equals(x)||(this.m_newNodes.push(v.end),this.removeNodeFromHash(v.end),v.end.hash=0),v.start.pt.assign(p),v.end.pt.assign(x),v.start.bBigMove||=_,v.end.bBigMove||=d,v.start.bIsBreak||=g,v.end.bIsBreak||=u,v.start.weight=o,v.start.rank=a,v.end.weight=m,v.end.rank=l,v=P,V=t,F=n}else-1===F&&(F=n)}const H=v.getNextInChain(),k=[];k.length=c;for(let n=0;n<c;n++)k[n]=n;c>2?(k.sort(((e,t)=>(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a8)(this.parent.m_param2[e],this.parent.m_param2[t]))),this.parent.m_param2.sort(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a8)):2===c&&this.parent.m_param2[0]>this.parent.m_param2[1]&&(this.parent.m_param2[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(this.parent.m_param2[0],this.parent.m_param2[0]=this.parent.m_param2[1]),k[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(k[0],k[0]=k[1])),v=t,N=t.end.weight,T=t.end.rank,G=t.end.bBigMove,D=t.end.bIsBreak,V=0,F=-1;for(let n=0;n<=c;n++){const e=n<c?this.parent.m_param2[n]:1;if(e!==V){const r=this.parent.allocResultSegment(),i=this.parent.m_resultSegments[r];let o,a,h,l;m.queryCut(V,e,i,!1),i.get().snapControlPoints(s*s);const g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let _=!1,d=!1,p=!1,f=!1;if(-1!==F){const e=k[F];o=P[e],a=S[e],g.assign(x[e]),p=I[e].bBigMove,_=I[e].bIsBreak}else o=t.start.weight,a=t.start.rank,p=t.start.bBigMove,_=t.start.bIsBreak,g.assign(i.get().getStartXY());if(n!==c){const e=k[n];h=P[e],l=S[e],u.assign(x[e]),f=I[e].bBigMove,d=I[e].bIsBreak}else h=N,l=T,f=G,d=D,u.assign(i.get().getEndXY());let y=v;e<1&&(this.splitEdgeInPlace(v),y=v.getNextInChain()),this.updateSegmentOnly(v,r),0===v.start.hash||v.start.pt.equals(g)||(this.m_newNodes.push(v.start),this.removeNodeFromHash(v.start),v.start.hash=0),0===v.end.hash||v.end.pt.equals(u)||(this.m_newNodes.push(v.end),this.removeNodeFromHash(v.end),v.end.hash=0),v.start.pt.assign(g),v.end.pt.assign(u),v.start.bBigMove||=p,v.end.bBigMove||=f,v.start.bIsBreak||=_,v.end.bIsBreak||=d,v.start.weight=o,v.start.rank=a,v.end.weight=h,v.end.rank=l,v=y,V=e,F=n}else-1===F&&(F=n)}const A=v.getNextInChain();return this.postProcessResultPartsForCurves(e,H,t,A,o+1),u?3:2}intersectCurves(t,s){2!==this.parent.m_inputSegments.length&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),this.parent.m_changed1=!1,this.parent.m_changed2=!1,this.parent.m_tolerance=t,this.m_hashTableOfEqualsSize=0,this.m_hashTableOfEquals=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.av)(16);const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();for(let i=0;i<2;i++){const t=this.parent.allocResultSegmentFromSegment(this.parent.m_inputSegments[this.parent.m_inputParts[i].segmentIndex]),s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();this.parent.m_inputSegments[this.parent.m_inputParts[i].segmentIndex].queryLooseEnvelope(s),n.mergeEnvelope2D(s);const r=this.parent.m_inputParts[i];this.addSegment(t,0,r.weightStart,r.rankStart,r.weightEnd,r.rankEnd,r.weightInterior,r.rankInterior,r.u.bBreakStart,r.u.bBreakEnd,r.segmentParentage)}n.inflateCoords(100*t,100*t),this.m_origin.assign(n.getLowerLeft()),this.m_cell.setCoords(2*t,2*t),this.m_pairs.push(In(this.m_chainOrigin1.nextInChain,this.m_chainOrigin2.nextInChain,0,s));let r=0,o=!0;for(;this.m_pairs.length;){const e=this.m_pairs.at(-1);this.m_pairs.pop(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.recursion>=0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.recursion<=256),this.clusterNodes(t);const s=this.intersectCurvesHelper(e.edge1,e.edge2,t,e.bIsIntersecting,e.recursion);o&&(o=!1,r=s)}for(let e=0;e<2;e++){const t=0===e?this.parent.m_resultParts1:this.parent.m_resultParts2;for(let s=(0===e?this.m_chainOrigin1:this.m_chainOrigin2).nextInChain;null!=s;s=s.getNextInChain())t.push(this.parent.newIntersectionPart_(s.segmentIndex,s.start.weight,s.start.rank,s.end.weight,s.end.rank,s.weight,s.rank,s.start.bIsBreak,s.end.bIsBreak,s.segmentParentage)),t.at(-1).u.bBigMoveStart=s.start.bBigMove,t.at(-1).u.bBigMoveEnd=s.end.bBigMove}return r}tryOverlapIntersectCurves(e,t,s,n){const r=this.parent.m_resultSegments[e.segmentIndex].get(),i=this.parent.m_resultSegments[t.segmentIndex].get(),o=r.getStartXY().equals(i.getStartXY())&&r.getEndXY().equals(i.getEndXY()),h=r.getStartXY().equals(i.getEndXY())&&r.getEndXY().equals(i.getStartXY());if(!o&&!h)return 0;const m=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a1)(r,i,!0);if(0!==m&&(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a2)(r,i)&&e.segmentParentage===t.segmentParentage){let e=!1;if(m>0)e=r.equals(i);else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===m);const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S({segment:i});t.get().reverse(),e=r.equals(t.get())}if(e)return 1}const l=s*xn.c_smallToleranceFactor;let g=!1;if(0===m){const e=[.5,.25,.75,.125,.375,.625,.875,.5625,.3125];for(let t=0,n=e.length;t<n;++t){const n=e[t],o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.queryCoord2D(n,o);const a=i.getClosestCoordinate(o,!1),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;i.queryCoord2D(a,h);const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(o,h);if(m>s)return 0;g||=m>l}for(let t=0,n=e.length;t<n;++t){const n=e[t],o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;i.queryCoord2D(n,o);const a=r.getClosestCoordinate(o,!1),h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.queryCoord2D(a,h);const m=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(o,h);if(m>s)return 0;g||=m>l}}let u=e.rank,c=t.rank;return u===c&&(u*=xn.c_maxGeometryTypeToRankDelta,c*=xn.c_maxGeometryTypeToRankDelta,u+=wn(r.getGeometryType(),r,!0),c+=wn(i.getGeometryType(),i,!0)),u>c?(t.copyFromWhenOverlap(this,e,o),t.transferAttributes(this,r,o)):c>u?(e.copyFromWhenOverlap(this,t,o),e.transferAttributes(this,i,o)):e.segmentParentage<=t.segmentParentage?(e.weight=e.weight+t.weight,t.copyFromWhenOverlap(this,e,o),t.transferAttributes(this,r,o)):(t.weight=e.weight+t.weight,e.copyFromWhenOverlap(this,t,o),e.transferAttributes(this,i,o)),g?3:2}postProcessResultPartsForCurves(e,t,s,n,r){r===(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aC)()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("curve_helper");for(let i=e;i!==t;i=i.getNextInChain())this.updateSegmentToNodes(i);for(let i=s;i!==n;i=i.getNextInChain())this.updateSegmentToNodes(i);for(let o=e;o!==t;o=o.getNextInChain()){const e=o.end.pt.sub(o.start.pt);for(let t=s;t!==n;t=t.getNextInChain()){let s=0;if(o.start.pt.equals(t.start.pt)&&o.end.pt.equals(t.end.pt)?s=1:o.start.pt.equals(t.end.pt)&&o.end.pt.equals(t.start.pt)&&(s=-1),!s){let s=o.start.pt.equals(t.start.pt)?1:0;if(s||(s=o.end.pt.equals(t.end.pt)?2:0,s||(s=o.end.pt.equals(t.start.pt)?3:0,s||(s=o.start.pt.equals(t.end.pt)?4:0))),s){const n=t.end.pt.sub(t.start.pt),a=e.dotProduct(n);let h;switch(s){case 1:case 2:h=a>0;break;case 3:case 4:h=a<0;break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("post_process_result_parts_for_curves_")}h&&this.m_pairs.push(In(o,t,r,!1))}continue}const n=this.parent.m_resultSegments[o.segmentIndex],a=this.parent.m_resultSegments[t.segmentIndex],h=[.5,.25,.75];for(let e=0,t=h.length;e<t;++e){const t=h[e],r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n.get().queryCoord2D(t,r);const i=a.get().getClosestCoordinate(r,!1),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;a.get().queryCoord2D(i,o);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(r,o)>this.parent.m_tolerance){s=0;break}}if(!s){this.m_pairs.push(In(o,t,r,!1));continue}for(let e=0,t=h.length;e<t;++e){const t=h[e],r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;a.get().queryCoord2D(t,r);const i=n.get().getClosestCoordinate(r,!1),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n.get().queryCoord2D(i,o);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(r,o)>this.parent.m_tolerance){s=0;break}}if(!s){this.m_pairs.push(In(o,t,r,!1));continue}o.equalEdge=t,t.equalEdge=o;let m=o.rank,l=t.rank;m===l&&(m*=xn.c_maxGeometryTypeToRankDelta,l*=xn.c_maxGeometryTypeToRankDelta,m+=wn(n.get().getGeometryType(),n.get(),!0),l+=wn(a.get().getGeometryType(),a.get(),!0)),m>l||m===l&&o.segmentParentage<=t.segmentParentage?(n.copyTo(a,!1),t.segmentParentage=o.segmentParentage,-1===s&&a.get().reverse()):(a.copyTo(n,!1),o.segmentParentage=t.segmentParentage,-1===s&&n.get().reverse());break}}this.updateAttachedEdgesAfterNodeChange(e.start),t&&this.updateAttachedEdgesAfterNodeChange(t.start),this.updateAttachedEdgesAfterNodeChange(s.start),n&&this.updateAttachedEdgesAfterNodeChange(n.start)}processDoublyConnectedEdges(e,t,s,n){s===(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aC)()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("curve_helper");const r=this.getSegment(e).get(),o=this.getSegment(t).get(),a=r.getStartXY().equals(o.getStartXY())&&r.getEndXY().equals(o.getEndXY())?1:r.getEndXY().equals(o.getStartXY())&&r.getStartXY().equals(o.getEndXY())?-1:0;if(0!==a){const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;r.queryCut(0,.5,i),i.get().snapControlPoints(n*n);const h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;r.queryCut(.5,1,h),h.get().snapControlPoints(n*n),this.splitEdgeInPlace(e),e.end.pt=i.get().getEndXY(),e.segmentIndex=this.parent.allocResultSegmentFromBuffer(i),e.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(h);let m=o.getClosestCoordinate(e.end.pt,!1);return Math.abs(m-.5)>.2&&(m=.5),o.queryCut(0,m,i),i.get().snapControlPoints(n*n),o.queryCut(m,1,h),h.get().snapControlPoints(n*n),this.splitEdgeInPlace(t),t.end.pt=i.get().getEndXY(),t.segmentIndex=this.parent.allocResultSegmentFromBuffer(i),t.getNextInChain().segmentIndex=this.parent.allocResultSegmentFromBuffer(h),a>0?(this.m_pairs.push(In(e,t,s,!1)),this.m_pairs.push(In(e.getNextInChain(),t.getNextInChain(),s,!1))):(this.m_pairs.push(In(e,t.getNextInChain(),s,!1)),this.m_pairs.push(In(e.getNextInChain(),t,s,!1))),!0}return!1}newNode(e,t,s,n){const r=new Cn;return this.m_newNodes.push(r),r.pt=e,r.rank=s,r.weight=t,r.bIsBreak=n,r}newEdge(e,t,s,n,r,i){const o=new Sn;return o.start=e,o.end=t,e.nextInChain=o,t.prevInChain=o,o.segmentIndex=s,o.segmentParentage=i,o.rank=r,o.weight=n,o}splitEdgeInPlace(e){e.segmentIndex=-1;const t=new Sn,s=new Cn;this.m_newNodes.push(s),s.pt.setNAN(),s.nextInChain=t,s.prevInChain=e,s.prevInHash=null,s.nextInHash=null,s.prevEqual=null,s.nextEqual=null,s.weight=e.weight,s.rank=e.rank,s.bIsBreak=!1,s.bBigMove=!1,t.start=s,t.segmentIndex=-1,t.end=e.end,t.end.prevInChain=t,t.rank=e.rank,t.weight=e.weight,t.segmentParentage=e.segmentParentage,e.end=s,e.equalEdge&&(e.equalEdge.equalEdge=null),e.equalEdge=null}updateSegmentOnly(e,t){e.segmentIndex=t}updateAttachedEdgesAfterNodeChange(e){for(let t=e.equalListHead();null!==t;t=t.nextEqual)this.updateAttachedEdgesAfterNodeChangeImpl(t)}updateAttachedEdgesAfterNodeChangeImpl(e){const t=e.prevInChain;if(t&&t.hasSegment()){const s=this.getSegment(t).get();e.pt.equals(s.getEndXY())||(s.setCoordsForIntersector(t.start.pt,t.end.pt,!1),s.ensureXYMonotone())}const s=e.nextInChain;if(s&&s.hasSegment()){const t=this.getSegment(s).get();e.pt.equals(t.getStartXY())||(t.setCoordsForIntersector(s.start.pt,s.end.pt,!1),t.ensureXYMonotone())}}updateSegmentToNodes(e){const t=this.getSegment(e).get();e.start.pt.equals(t.getStartXY())&&e.end.pt.equals(t.getEndXY())||(t.setCoordsForIntersector(e.start.pt,e.end.pt,!1),t.ensureXYMonotone()),this.updateAttachedEdgesAfterNodeChange(e.start),this.updateAttachedEdgesAfterNodeChange(e.end)}getSegment(e){return this.parent.m_resultSegments[e.segmentIndex]}clusterNodes(e){let t=!1;const s=[],n=[],r=[];for(let i=0,o=this.m_newNodes.length;i<o;i++){const e=this.m_newNodes[i];if(null===e)continue;let t=e;for(let s=i+1;s<o;s++){const n=this.m_newNodes[s];null!==n&&(e.pt.equals(n.pt)&&(t.nextInHash=n,n.prevInHash=t,t=n,this.m_newNodes[s]=null))}}for(let i=0,o=this.m_newNodes.length;i<o;i++){const o=this.m_newNodes[i];if(null==o)continue;for(o.hash=this.calculateHash(o.pt);;){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.av)(4),a=this.hashTableBinsToCheck(o,i);for(let t=0;t<a;t++)if(null!==i[t])for(let a=i[t];null!==a;){const t=a.nextInHash;_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(o.pt,a.pt)<=e&&(s.push(a),this.removeNodeFromHash(a),a.hash=0,r.push(a),n.push(a)),a=t}let h=!1;for(const e of s)if(!o.pt.equals(e.pt)){const s=un(o.pt,e.pt,o.weight,o.rank,e.weight,e.rank);o.pt.assign(s.pt),o.weight=s.weight,o.rank=s.rank,h=!0,t=!0}if(s.length=0,!h)break;o.hash=this.calculateHash(o.pt)}r.push(o),n.push(o);for(let e=o.nextInHash;null!==e;){e.prevInHash=null;const t=e.nextInHash;e.nextInHash=null,r.push(e),n.push(e),e=t}const a=o.hash;let h=null,m=null;for(const e of n)o!==e&&(e.hash=a,e.pt.assign(o.pt),e.rank=o.rank,e.weight=o.weight),e.prevInHash=h,h&&(h.nextInHash=e),e.prevEqual=m,e.nextEqual=null,m&&(m.nextEqual=e),m=e,h=e;const l=a%this.m_hashTableOfEquals.length;h.nextInHash=this.m_hashTableOfEquals[l],null!==this.m_hashTableOfEquals[l]&&(this.m_hashTableOfEquals[l].prevInHash=h),this.m_hashTableOfEquals[l]=n[0],this.m_hashTableOfEqualsSize+=n.length,n.length=0,this.rehashIfNeeded()}if(this.m_newNodes.length=0,t)for(const i of r)this.updateAttachedEdgesAfterNodeChange(i)}rehashIfNeeded(){if(2*this.m_hashTableOfEqualsSize>this.m_hashTableOfEquals.length){const e=this.m_hashTableOfEquals;this.m_hashTableOfEquals=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.av)(2*e.length),this.m_hashTableOfEqualsSize=0;for(const t of e){let e=t;for(;e;){const t=e.nextInHash;e.nextInHash=null,e.prevInHash=null,this.addNodeToHashImpl(e),e=t}}}}addNodeToHashImpl(e){const t=e.hash%this.m_hashTableOfEquals.length,s=this.m_hashTableOfEquals[t];e.nextInHash=s,null!==s&&(s.prevInHash=e),this.m_hashTableOfEquals[t]=e,this.m_hashTableOfEqualsSize++}removeNodeFromHash(e){const t=e.hash%this.m_hashTableOfEquals.length,s=e.prevInHash,n=e.nextInHash;s?s.nextInHash=n:this.m_hashTableOfEquals[t]=n,n&&(n.prevInHash=s),this.m_hashTableOfEqualsSize--,e.prevInHash=null,e.nextInHash=null}hashTableBinsToCheck(e,t){const s=(e.pt.x-this.m_origin.x)/this.m_cell.x,n=(e.pt.y-this.m_origin.y)/this.m_cell.y,r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()-1,i=Math.round((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(s,-2147483646,r)),o=Math.round((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(n,-2147483646,r));let a=i|o<<32;a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(a),t[0]=this.m_hashTableOfEquals[a%this.m_hashTableOfEquals.length];let h=i+1|o<<32;h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(h);let m=1;t[1]=this.m_hashTableOfEquals[h%this.m_hashTableOfEquals.length],t[1]!==t[0]&&(m=2);let l=i+1|o+1<<32;l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(l),t[m]=this.m_hashTableOfEquals[l%this.m_hashTableOfEquals.length];for(let u=0;u<m;u++)if(t[m]===t[u]){m--;break}m++;let g=i|o+1<<32;g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(g),t[m]=this.m_hashTableOfEquals[g%this.m_hashTableOfEquals.length];for(let u=0;u<m;u++)if(t[m]===t[u]){m--;break}return m++,m}calculateHash(e){const t=(e.x-this.m_origin.x)/this.m_cell.x,s=(e.y-this.m_origin.y)/this.m_cell.y,n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()-1;let r=Math.round((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(t,-2147483646,n))|Math.round((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(s,-2147483646,n))<<32;return r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(r),0===r&&(r=1),r}processSharpCorners(e,t,s,n){if(this.parent.m_param1.length=0,this.parent.m_param2.length=0,e.getStartXY().equals(t.getStartXY())){const r=[0,0],i=[0,0],o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a3)(e,t,0,0,s,2,r,i,n);if(o){this.parent.m_param1.push(0),this.parent.m_param2.push(0);for(let e=0;e<o;e++)this.parent.m_param1.push(r[e]),this.parent.m_param2.push(i[e]);return o+1}}if(e.getEndXY().equals(t.getEndXY())){const r=[0,0],i=[0,0],o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a3)(e,t,1,1,s,2,r,i,n);if(o){for(let e=0;e<o;e++)this.parent.m_param1.push(r[e]),this.parent.m_param2.push(i[e]);return this.parent.m_param1.push(1),this.parent.m_param2.push(1),o+1}}if(e.getStartXY().equals(t.getEndXY())){const r=[0,0],i=[0,0],o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a3)(e,t,0,1,s,2,r,i,n);if(o){this.parent.m_param1.push(0),this.parent.m_param2.push(1);for(let e=0;e<o;e++)this.parent.m_param1.push(r[e]),this.parent.m_param2.push(i[e]);return o+1}}if(e.getEndXY().equals(t.getStartXY())){const r=[0,0],i=[0,0],o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a3)(e,t,1,0,s,2,r,i,n);if(o){for(let e=0;e<o;e++)this.parent.m_param1.push(r[e]),this.parent.m_param2.push(i[e]);return this.parent.m_param1.push(1),this.parent.m_param2.push(0),o+1}}return 0}}function wn(e,t,s){let r=0;switch(e){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine:r=0;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier:r=2;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:r=3;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier2:r=1;break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:r=0===t.projectionBehavior()?5:4;break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}return s?5-r:r}class vn extends on{constructor(e){super(e.m_shape,e.m_tolerance,!1),this.m_parent=e}compare(e,t,s){if(this.m_bIntersectionDetected)return-1;const n=e.getElement(s),r=this.m_parent.getEdgeOriginVertices(t),i=this.m_parent.m_edgeVertices.getFirstElement(r),o=this.m_parent.getEdgeOriginVertices(n),a=this.m_parent.m_edgeVertices.getFirstElement(o);return this.m_currentNode=s,this.compareSegments(t,i,n,a)}}class Nn extends an{constructor(e){super(e.m_shape,e.m_tolerance),this.m_parent=e}compare(e,t){if(this.m_bIntersectionDetected)return-1;const s=e.getElement(t),n=this.m_parent.getEdgeOriginVertices(s),r=this.m_parent.m_edgeVertices.getFirstElement(n);return this.m_currentNode=t,this.compareVertex(e,t,r)}}class Tn extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e){super(),this.pt1=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.pt2=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_shape=e}compare(e,t,s){this.m_shape.queryXY(t,this.pt1);const n=e.getElement(s);return this.m_shape.queryXY(n,this.pt2),this.pt1.compare(this.pt2)}}class Gn{constructor(e){this.m_point=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_pt=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_shape=e}setPoint(e){this.m_point.setCoordsPoint2D(e)}compare(e,t){const s=e.getElement(t);return this.m_shape.queryXY(s,this.m_pt),this.m_point.compare(this.m_pt)}}class Dn{constructor(e,t){this.m_shape=null,this.m_progressTracker=null,this.m_edges=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(8),this.m_clusters=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S(5),this.m_clusterVertices=new sn(!1),this.m_edgeVertices=new sn(!1),this.m_helperPoint=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,this.m_eventQ=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T,this.m_sweepStructure=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T,this.m_bComplications=!1,this.m_sweepComparator=null,this.m_tempEdgeBuffer=[],this.m_modifiedClusters=[],this.m_edgesToInsertInSweepStructure=[],this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1,this.m_progressCounter=0,this.m_segmentIntersector=new xn,this.m_segBuf1=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,this.m_segBuf2=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,this.m_sweepPoint=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0),this.m_tolerance=0,this.m_toleranceSqr=0,this.m_sweepPointCluster=-1,this.m_vertexClusterIndex=-1,this.m_bCracked=!1,this.m_bSweepPointClusterWasModified=!1,this.m_progressTracker=e,this.m_bTrackChanges=t}hadComplications(){return this.m_bComplications}sweep(e,t){const s=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;s.setSwapCoordinates(),e.applyTransformation(s),this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=t,this.m_toleranceSqr=t*t;let n=this.sweepImpl_();return e.applyTransformation(s),n||(this.fillEventQueuePass2(),n=this.sweepImpl_()||n),this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_shape=null,this.m_bCracked}sweepVertical(e,t){this.setEditShape_(e),this.m_bCracked=!1,this.m_tolerance=t,this.m_toleranceSqr=t*t,this.m_bComplications=!1;let s=this.sweepImpl_();if(!this.m_bComplications){const n=e.filterClosePoints(t,!0,!1,this.m_bTrackChanges,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);this.m_bComplications=1===n,s||=1===n}return-1!==this.m_vertexClusterIndex&&(this.m_shape.removeUserIndex(this.m_vertexClusterIndex),this.m_vertexClusterIndex=-1),this.m_shape=null,s}getEdgeCluster(e,t){return this.m_edges.getField(e,0+t)}setEdgeCluster_(e,t,s){this.m_edges.setField(e,0+t,s)}getEdgeOriginVertices(e){return this.m_edges.getField(e,2)}setEdgeOriginVertices_(e,t){this.m_edges.setField(e,2,t)}getNextEdgeEx(e,t){return this.m_edges.getField(e,3+t)}setNextEdgeEx_(e,t,s){this.m_edges.setField(e,3+t,s)}getEdgeSweepNode(e){return this.m_edges.getField(e,7)}setEdgeSweepNode_(e,t){this.m_edges.setField(e,7,t)}getNextEdge(e,t){const s=this.getEdgeEnd(e,t);return this.m_edges.getField(e,3+s)}setNextEdge_(e,t,s){const n=this.getEdgeEnd(e,t);this.m_edges.setField(e,3+n,s)}getPrevEdge(e,t){const s=this.getEdgeEnd(e,t);return this.m_edges.getField(e,5+s)}setPrevEdge_(e,t,s){const n=this.getEdgeEnd(e,t);this.m_edges.setField(e,5+n,s)}getClusterVertices(e){return this.m_clusters.getField(e,0)}setClusterVertices_(e,t){this.m_clusters.setField(e,0,t)}getClusterSweepEdgeList(e){return this.m_clusters.getField(e,2)}setClusterSweepEdgeList_(e,t){this.m_clusters.setField(e,2,t)}getClusterFirstEdge(e){return this.m_clusters.getField(e,1)}setClusterFirstEdge_(e,t){this.m_clusters.setField(e,1,t)}getClusterEventQNode(e){return this.m_clusters.getField(e,3)}setClusterEventQNode_(e,t){this.m_clusters.setField(e,3,t)}newCluster_(e){const t=this.m_clusters.newElement(),s=this.m_clusterVertices.createList();return this.setClusterVertices_(t,s),e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.m_clusterVertices.addElement(s,e),this.m_shape.setUserIndex(e,this.m_vertexClusterIndex,t)),t}deleteCluster_(e){this.m_clusters.deleteElement(e)}addVertexToCluster_(e,t){const s=this.getClusterVertices(e);this.m_clusterVertices.addElement(s,t),this.m_shape.setUserIndex(t,this.m_vertexClusterIndex,e)}newEdge_(e){const t=this.m_edges.newElement(),s=this.m_edgeVertices.createList();return this.setEdgeOriginVertices_(t,s),-1!==e&&this.m_edgeVertices.addElement(s,e),t}addVertexToEdge_(e,t){const s=this.getEdgeOriginVertices(e);this.m_edgeVertices.addElement(s,t)}deleteEdge_(e){this.m_edges.deleteElement(e);const t=this.m_edgesToInsertInSweepStructure.findIndex((t=>t===e));t>=0&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aA)(this.m_edgesToInsertInSweepStructure,t)}addEdgeToCluster(e,t){-1===this.getEdgeCluster(e,0)?this.setEdgeCluster_(e,0,t):-1===this.getEdgeCluster(e,1)?this.setEdgeCluster_(e,1,t):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),this.addEdgeToClusterImpl_(e,t)}addEdgeToClusterImpl_(e,t){const s=this.getClusterFirstEdge(t);if(-1!==s){const n=this.getNextEdge(s,t);this.setPrevEdge_(n,t,e),this.setNextEdge_(e,t,n),this.setNextEdge_(s,t,e),this.setPrevEdge_(e,t,s)}else this.setPrevEdge_(e,t,e),this.setNextEdge_(e,t,e),this.setClusterFirstEdge_(t,e)}getEdgeEnd(e,t){return this.getEdgeCluster(e,0)===t?0:1}mergeClusters_(e,t){this.dbgCheckCluster_(e),this.dbgCheckCluster_(t);const s=this.getClusterEventQNode(t);-1!==s&&(this.m_eventQ.deleteNode(s),this.setClusterEventQNode_(t,-1));let n=this.getClusterFirstEdge(e),r=this.getClusterFirstEdge(t);if(-1!==r){let s=r,i=r,o=!1;do{this.dbgCheckEdge_(s),o=!1;const n=this.getEdgeEnd(s,t),a=this.getNextEdgeEx(s,n);if(this.getEdgeCluster(s,n+1&1)===e){this.disconnectEdge_(s);const e=this.getEdgeOriginVertices(s);if(this.m_edgeVertices.deleteList(e),this.deleteEdge_(s),s===a){r=-1;break}r===s&&(r=this.getClusterFirstEdge(t),i=a,o=!0)}s=a}while(s!==i||o);if(-1!==r){do{const n=this.getEdgeEnd(s,t),r=this.getNextEdgeEx(s,n);this.setEdgeCluster_(s,n,e),s=r}while(s!==i);if(n=this.getClusterFirstEdge(e),-1!==n){const t=this.getNextEdge(n,e),s=this.getNextEdge(r,e);t===n?(this.setClusterFirstEdge_(e,r),this.addEdgeToClusterImpl_(n,e),this.setClusterFirstEdge_(e,n)):s===r&&this.addEdgeToClusterImpl_(r,e),this.setNextEdge_(r,e,t),this.setPrevEdge_(t,e,r),this.setNextEdge_(n,e,s),this.setPrevEdge_(s,e,n)}else this.setClusterFirstEdge_(e,r)}}const i=this.getClusterVertices(e),o=this.getClusterVertices(t);for(let a=this.m_clusterVertices.getFirst(o);-1!==a;a=this.m_clusterVertices.getNext(a)){const t=this.m_clusterVertices.getElement(a);this.m_shape.setUserIndex(t,this.m_vertexClusterIndex,e)}this.m_clusterVertices.concatenateLists(i,o),this.deleteCluster_(t),this.dbgCheckCluster_(e)}mergeEdges_(e,t){this.dbgCheckEdge_(e),this.dbgCheckEdge_(t);const s=this.getEdgeCluster(e,0),n=this.getEdgeCluster(e,1),r=this.getEdgeCluster(t,0),i=this.getEdgeCluster(t,1),o=this.getEdgeOriginVertices(e),a=this.getEdgeOriginVertices(t);if(this.m_edgeVertices.concatenateLists(o,a),t===this.getClusterFirstEdge(s)&&this.setClusterFirstEdge_(s,e),t===this.getClusterFirstEdge(n)&&this.setClusterFirstEdge_(n,e),this.disconnectEdge_(t),this.deleteEdge_(t),!(s===r&&n===i||n===r&&s===i)){const e=this.getClusterXY(s),t=this.getClusterXY(r);e.isEqualPoint2D(t)?(s!==r&&this.mergeClusters_(s,r),n!==i&&this.mergeClusters_(n,i)):(n!==r&&this.mergeClusters_(n,r),s!==i&&this.mergeClusters_(s,i))}this.dbgCheckEdge_(e)}disconnectEdge_(e){const t=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1);this.disconnectEdgeFromCluster_(e,t),this.disconnectEdgeFromCluster_(e,s)}disconnectEdgeFromCluster_(e,t){const s=this.getNextEdge(e,t),n=this.getPrevEdge(e,t),r=this.getClusterFirstEdge(t);s!==e?(this.setNextEdge_(n,t,s),this.setPrevEdge_(s,t,n),r===e&&this.setClusterFirstEdge_(t,s)):this.setClusterFirstEdge_(t,-1)}applyIntersectorToEditShape_(e,t,s){let n=this.m_edgeVertices.getFirst(e);const r=this.m_edgeVertices.getElement(n),i=this.getClusterFromVertex(r),o=this.m_shape.getNextVertex(r),a=this.getClusterFromVertex(o),h=this.m_shape.getXY(r),m=this.m_shape.getXY(o);let l=!1,g=!1;const u=t.getResultSegment(s,0).getStartXY(),c=t.getResultSegment(s,t.getResultSegmentCount(s)-1).getEndXY();h.equals(u)||(l=!0),m.equals(c)||(g=!0),this.m_shape.splitSegmentWithIntersector(r,t,s,!0,!0);const _=this.m_bTrackChanges&&t.getSegmentChanged(s);for(_&&this.m_shape.setGeometryModifiedWithVertex(r,!0),n=this.m_edgeVertices.getNext(n);-1!==n;n=this.m_edgeVertices.getNext(n)){const e=this.m_edgeVertices.getElement(n),r=this.getClusterFromVertex(e)===i;this.m_shape.splitSegmentWithIntersector(e,t,s,r,!0),_&&this.m_shape.setGeometryModifiedWithVertex(e,!0)}if(l&&this.updateClusterXY(!0,i,u,t.getResultSegmentStartPointWeight(s,0),t.getResultSegmentStartPointRank(s,0)),g){const e=t.getResultSegmentCount(s)-1;this.updateClusterXY(!0,a,c,t.getResultSegmentEndPointWeight(s,e),t.getResultSegmentEndPointRank(s,e))}}createEdgesAndClustersFromSplitEdge_(e,t,s){this.dbgCheckNewEdgesArray_();const n=this.getEdgeOriginVertices(e),r=this.getEdgeCluster(e,0),i=this.getEdgeCluster(e,1);let o=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(o);const a=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex3();this.setEdgeSweepNode_(o,a),this.m_tempEdgeBuffer.push(o),this.addEdgeToCluster(o,r);const h=t.getResultSegmentCount(s);for(let m=1;m<h;m++){const e=this.newCluster_(-1);this.m_modifiedClusters.push(e),this.m_tempEdgeBuffer.push(e),this.addEdgeToCluster(o,e);const t=this.newEdge_(-1);this.m_edgesToInsertInSweepStructure.push(t),this.setEdgeSweepNode_(t,a),this.m_tempEdgeBuffer.push(t),this.addEdgeToCluster(t,e),o=t}this.addEdgeToCluster(o,i);for(let m=this.m_edgeVertices.getFirst(n);-1!==m;m=this.m_edgeVertices.getNext(m)){let e=this.m_edgeVertices.getElement(m);if(this.getClusterFromVertex(e)===r){let t=0;const s=this.m_tempEdgeBuffer.length;do{if(t>0){const s=this.m_tempEdgeBuffer[t-1];this.addVertexToCluster_(s,e)}const s=this.m_tempEdgeBuffer[t];t+=2,this.addVertexToEdge_(s,e),e=this.m_shape.getNextVertex(e)}while(t<s)}else{let t=this.m_tempEdgeBuffer.length-1;do{if(t<this.m_tempEdgeBuffer.length-2){const s=this.m_tempEdgeBuffer[t+1];this.addVertexToCluster_(s,e)}const s=this.m_tempEdgeBuffer[t];t-=2,this.addVertexToEdge_(s,e),e=this.m_shape.getNextVertex(e)}while(t>=0)}}this.m_tempEdgeBuffer.length=0,this.dbgCheckNewEdgesArray_()}getVertexFromClusterIndex(e){const t=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(t)}getClusterFromVertex(e){return this.m_shape.getUserIndex(e,this.m_vertexClusterIndex)}processSplitHelper1_(e,t,s){const n=this.getEdgeCluster(t,0),r=this.getClusterXY(n),i=this.getEdgeCluster(t,1),o=this.getClusterXY(i),a=s.getResultSegmentCount(e);let h=s.getResultSegment(e,0);const m=h.getStartXY();if(!r.isEqualPoint2D(m)){if(!this.m_bComplications){r.compare(this.m_sweepPoint)*m.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0)}this.getAffectedEdges(n,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(n)}if(!this.m_bComplications&&a>1){const e=r.compare(o),t=h.getEndXY();(r.compare(t)!==e||t.compare(o)!==e||t.compare(this.m_sweepPoint)<0)&&(this.m_bComplications=!0)}h=s.getResultSegment(e,a-1);const l=h.getEndXY();if(!o.isEqualPoint2D(l)){if(!this.m_bComplications){o.compare(this.m_sweepPoint)*l.compare(this.m_sweepPoint)<0&&(this.m_bComplications=!0)}this.getAffectedEdges(i,this.m_tempEdgeBuffer),this.m_modifiedClusters.push(i)}this.m_tempEdgeBuffer.push(t);for(let g=0,u=this.m_tempEdgeBuffer.length;g<u;g++){const e=this.m_tempEdgeBuffer[g],s=this.getEdgeSweepNode(e);_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.isValidElement(s)&&(this.m_sweepStructure.deleteNode(s),this.setEdgeSweepNode_(e,-1));const n=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex3();e!==t&&this.getEdgeSweepNode(e)!==n&&(this.m_edgesToInsertInSweepStructure.push(e),this.setEdgeSweepNode_(e,n))}this.m_tempEdgeBuffer.length=0}checkAndFixIntersection_(e,t){const s=this.m_sweepStructure.getElement(e);return this.m_sweepComparator.compare(this.m_sweepStructure,s,t),!!this.m_sweepComparator.intersectionDetected()&&(this.m_sweepComparator.clearIntersectionDetectedFlag(),this.fixIntersection_(e,t),!0)}fixIntersection_(e,t){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(e),n=this.m_sweepStructure.getElement(t);let r=null,i=null;const o=this.getEdgeOriginVertices(s),a=this.m_edgeVertices.getFirstElement(o),h=this.getEdgeOriginVertices(n),m=this.m_edgeVertices.getFirstElement(h);this.m_shape.querySegment(a,this.m_segBuf1,!1,!1),r=this.m_segBuf1.get();const l=this.m_shape.getNextVertex(a),g=this.m_shape.getWeight(a),u=this.m_shape.getSegmentParentageBreakVertex(a),c=this.m_shape.getWeight(l),_=this.m_shape.getSegmentParentageBreakVertex(l),d=this.m_shape.getSegmentWeight(a),p=this.m_shape.getRank(a),f=this.m_shape.getRank(l),x=this.m_shape.getSegmentRank(a),y=this.m_shape.getSegmentParentage(a);this.m_shape.querySegment(m,this.m_segBuf2,!1,!1),i=this.m_segBuf2.get();const P=this.m_shape.getNextVertex(m),E=this.m_shape.getWeight(m),S=this.m_shape.getSegmentParentageBreakVertex(m),C=this.m_shape.getWeight(P),I=this.m_shape.getSegmentParentageBreakVertex(P),b=this.m_shape.getSegmentWeight(m),w=this.m_shape.getRank(m),v=this.m_shape.getRank(P),N=this.m_shape.getSegmentRank(m),T=this.m_shape.getSegmentParentage(m);this.m_segmentIntersector.pushSegment(r,g,p,c,f,d,x,u,_,y),this.m_segmentIntersector.pushSegment(i,E,w,C,v,b,N,S,I,T),3===this.m_segmentIntersector.intersect2D(this.m_tolerance,!0)&&(this.m_bComplications=!0),this.splitEdge_(s,n,-1,this.m_segmentIntersector),this.m_segmentIntersector.clear()}fixIntersectionPointSegment_(e,t){this.m_bCracked=!0;const s=this.m_sweepStructure.getElement(t);let n=null;const r=this.getEdgeOriginVertices(s),i=this.m_edgeVertices.getFirstElement(r);this.m_shape.querySegment(i,this.m_segBuf1,!1,!1),n=this.m_segBuf1.get();const o=this.m_shape.getNextVertex(i),a=this.m_shape.getWeight(i),h=this.m_shape.getSegmentParentageBreakVertex(i),m=this.m_shape.getWeight(o),l=this.m_shape.getSegmentParentageBreakVertex(o),g=this.m_shape.getSegmentWeight(i),u=this.m_shape.getRank(i),c=this.m_shape.getRank(o),_=this.m_shape.getSegmentRank(i),d=this.m_shape.getSegmentParentage(i),p=this.getClusterFirstVertex(e);this.m_segmentIntersector.pushSegment(n,a,u,m,c,g,_,h,l,d),this.m_shape.queryPoint(p,this.m_helperPoint);const f=this.m_shape.getWeight(p),x=this.m_shape.getRank(p);this.m_segmentIntersector.intersect2DEx(this.m_tolerance,this.m_helperPoint,x,f,!0),this.splitEdge_(s,-1,e,this.m_segmentIntersector),this.m_segmentIntersector.clear()}insertNewEdges_(){if(0===this.m_edgesToInsertInSweepStructure.length)return!0;this.dbgCheckNewEdgesArray_();let e=!0,t=0;const s=this.m_edgesToInsertInSweepStructure.length,n=Math.max(2*s+200,this.m_sweepStructure.size()+200);for(;this.m_edgesToInsertInSweepStructure.length;){if(this.m_edgesToInsertInSweepStructure.length>Math.max(100,this.m_shape.getTotalPointCount())||t>n){this.m_edgesToInsertInSweepStructure.length=0,this.m_bComplications=!0,e=!1;break}const s=this.m_edgesToInsertInSweepStructure.at(-1);this.m_edgesToInsertInSweepStructure.pop(),this.setEdgeSweepNode_(s,-1);const r=this.isEdgeOnSweepLine_(s);_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.isValidElement(r)?(this.insertNewEdgeToSweepStructure_(s,r),t++):r!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2()&&(e=!1),this.m_bContinuingSegmentChainOptimization=!1}return e}insertNewEdgeToSweepStructure_(e,t){let s;if(this.m_bContinuingSegmentChainOptimization?(s=this.m_sweepStructure.addElementAtPosition(this.m_prevNeighbour,this.m_nextNeighbour,e,!0,!0),this.m_bContinuingSegmentChainOptimization=!1):s=this.m_sweepStructure.addUniqueElement(e),-1===s){const t=this.m_sweepStructure.getDuplicateElement(),s=this.m_sweepStructure.getElement(t);return this.mergeEdges_(s,e),!1}if(this.setEdgeSweepNode_(e,s),this.m_sweepComparator.intersectionDetected()){this.m_sweepComparator.clearIntersectionDetectedFlag();const e=this.m_sweepComparator.getLastComparedNode();return this.m_prevNeighbour===e&&(this.m_prevNeighbour=-1),this.m_nextNeighbour===e&&(this.m_nextNeighbour=-1),this.fixIntersection_(e,s),!0}return!1}isEdgeOnSweepLine_(e){const t=this.getEdgeCluster(e,0),s=this.getEdgeCluster(e,1),n=this.getClusterXY(t),r=this.getClusterXY(s);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(n,r)<=this.m_toleranceSqr)return this.m_bComplications=!0,-1;const i=n.compare(this.m_sweepPoint),o=r.compare(this.m_sweepPoint);return i<=0&&o>0?s:o<=0&&i>0?t:i>0&&o>0?_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2():-1}fillEventQueue(){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0),t=this.m_shape.queryVertexIteratorOnSelection();for(let r=t.next();r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;r=t.next())-1!==this.m_shape.getUserIndex(r,this.m_vertexClusterIndex)&&e.add(r);this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0),this.m_eventQ.clear(),this.m_eventQ.setCapacity(e.size()),this.m_eventQ.setComparator(new Tn(this.m_shape));const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();s.setNAN();let n=-1;for(let r=0,i=e.size();r<i;r++){const t=e.read(r);if(this.m_shape.getXY(t).isEqualPoint2D(s)){const e=this.m_shape.getUserIndex(t,this.m_vertexClusterIndex);this.mergeClusters_(n,e);continue}n=this.getClusterFromVertex(t),this.m_shape.queryXY(t,s);const i=this.m_eventQ.addBiggestElement(t);this.setClusterEventQNode_(n,i)}}fillEventQueuePass2(){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0);for(let t=this.m_eventQ.getFirst();-1!==t;t=this.m_eventQ.getNext(t)){const s=this.m_eventQ.getElement(t);e.add(s)}this.m_eventQ.clear(),this.m_shape.sortVerticesSimpleByY(e,0,e.size()),this.progress_(!0);for(let t=0,s=e.size();t<s;t++){const s=e.read(t),n=this.getClusterFromVertex(s),r=this.m_eventQ.addBiggestElement(s);this.setClusterEventQNode_(n,r)}}getAffectedEdges(e,t){const s=this.getClusterFirstEdge(e);if(-1===s)return;let n=s;do{const s=this.getEdgeSweepNode(n);_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.isValidElement(s)&&t.push(n),n=this.getNextEdge(n,e)}while(n!==s)}updateClusterXY(e,t,s,n,r){const i=this.getClusterVertices(t);for(let o=this.m_clusterVertices.getFirst(i);-1!==o;o=this.m_clusterVertices.getNext(o)){const t=this.m_clusterVertices.getElement(o);this.m_shape.setXYMonotonicPoint2D(t,s),this.m_shape.setWeight(t,n),this.m_shape.setRank(t,r),e&&this.m_bTrackChanges&&this.m_shape.setGeometryModifiedWithVertex(t,!0),this.m_shape.setSegmentParentageBreakVertex(t,!0)}}splitEdge_(e,t,s,n){this.dbgCheckEdge_(e),-1!==t&&this.dbgCheckEdge_(t),this.disconnectEdge_(e),-1!==t&&this.disconnectEdge_(t),this.processSplitHelper1_(0,e,n),-1!==t&&this.processSplitHelper1_(1,t,n),-1!==s&&n.getResultPointChanged()&&this.m_modifiedClusters.push(s);for(let o=0,a=this.m_modifiedClusters.length;o<a;o++){const e=this.m_modifiedClusters[o],t=this.getClusterEventQNode(e);-1!==t&&(this.m_eventQ.deleteNode(t),this.setClusterEventQNode_(e,-1))}const r=this.getEdgeOriginVertices(e),i=-1!==t?this.getEdgeOriginVertices(t):-1;if(this.applyIntersectorToEditShape_(r,n,0),-1!==i)this.applyIntersectorToEditShape_(i,n,1);else{const e=n.getResultPoint().getXY();this.updateClusterXY(n.getResultPointChanged(),s,e,n.getResultPointWeight(),n.getResultPointRank())}this.createEdgesAndClustersFromSplitEdge_(e,n,0),-1!==t&&this.createEdgesAndClustersFromSplitEdge_(t,n,1),this.m_edgeVertices.deleteList(r),this.deleteEdge_(e),-1!==t&&(this.m_edgeVertices.deleteList(i),this.deleteEdge_(t));for(let o=0,a=this.m_modifiedClusters.length;o<a;o++){const e=this.m_modifiedClusters[o];e===this.m_sweepPointCluster&&(this.m_bSweepPointClusterWasModified=!0);let t=this.getClusterEventQNode(e);if(-1===t){const s=this.getClusterFirstVertex(e);if(t=this.m_eventQ.addUniqueElement(s),-1===t){const t=this.m_eventQ.getDuplicateElement(),s=this.m_eventQ.getElement(t),n=this.getClusterFromVertex(s);this.mergeClusters_(n,e)}else this.setClusterEventQNode_(e,t)}}this.m_modifiedClusters.length=0}getClusterXY(e){const t=this.getClusterFirstVertex(e);return this.m_shape.getXY(t)}getClusterFirstVertex(e){const t=this.getClusterVertices(e);return this.m_clusterVertices.getFirstElement(t)}dbgCheckEdge_(e){}dbgCheckCluster_(e){}dbgCheckNewEdgesArray_(){}dbgSaveSweepStructure_(e){}sweepImpl_(){this.progress_(!0),this.m_bSweepPointClusterWasModified=!1,this.m_sweepPointCluster=-1,null===this.m_sweepComparator&&(this.m_sweepStructure.disableBalancing(),this.m_sweepComparator=new vn(this),this.m_sweepStructure.setComparator(this.m_sweepComparator));const e=[];let t=null,s=null;this.m_prevNeighbour=-1,this.m_nextNeighbour=-1,this.m_bContinuingSegmentChainOptimization=!1;const n=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex2(),r=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.S.impossibleIndex3();for(let i=this.m_eventQ.getFirst();-1!==i;){this.progress_(),this.dbgCheckSweepStructure_(),this.m_bContinuingSegmentChainOptimization=!1,this.m_prevNeighbour=-1,this.m_nextNeighbour=-1;const o=this.m_eventQ.getElement(i);this.m_sweepPointCluster=this.getClusterFromVertex(o),this.m_shape.queryXY(o,this.m_sweepPoint),this.m_sweepComparator.setSweepY(this.m_sweepPoint.y,this.m_sweepPoint.x);let a=!1;{const t=this.getClusterFirstEdge(this.m_sweepPointCluster);if(a=-1===t,!a){let s=t;do{const t=this.getEdgeSweepNode(s);-1===t?(this.m_edgesToInsertInSweepStructure.push(s),this.setEdgeSweepNode_(s,r)):t!==r&&e.push(t),s=this.getNextEdge(s,this.m_sweepPointCluster)}while(s!==t)}}if(!this.m_sweepStructure.isAutoBalancing()&&(this.m_sweepStructure.getMaxDepthEver()>4||this.m_edgesToInsertInSweepStructure.length>10)&&this.m_sweepStructure.enableBalancing(),e.length>0){this.m_bContinuingSegmentChainOptimization=1===e.length&&1===this.m_edgesToInsertInSweepStructure.length;for(let r=0,i=e.length;r<i;r++){const t=this.m_sweepStructure.getElement(e[r]);this.setEdgeSweepNode_(t,n)}let t=n,s=n;for(let r=0,i=e.length;r<i;r++){const i=e[r];if(t===n){const e=this.m_sweepStructure.getPrev(i);if(-1!==e){const s=this.m_sweepStructure.getElement(e);this.getEdgeSweepNode(s)!==n&&(t=e)}else t=-1}if(s===n){const e=this.m_sweepStructure.getNext(i);if(-1!==e){const t=this.m_sweepStructure.getElement(e);this.getEdgeSweepNode(t)!==n&&(s=e)}else s=-1}if(t!==n&&s!==n)break}for(let n=0,r=e.length;n<r;n++){const t=e[n],s=this.m_sweepStructure.getElement(t);this.m_sweepStructure.deleteNode(t),this.setEdgeSweepNode_(s,-1)}e.length=0,this.m_prevNeighbour=t,this.m_nextNeighbour=s,-1!==t&&-1!==s?this.m_bContinuingSegmentChainOptimization||this.checkAndFixIntersection_(t,s):-1===t&&-1===s&&(this.m_bContinuingSegmentChainOptimization=!1)}else a&&(null===t&&(t=new Nn(this)),t.setPoint(this.m_sweepPoint),this.m_sweepStructure.searchUpperBound(t),t.intersectionDetected()&&(t.clearIntersectionDetectedFlag(),this.fixIntersectionPointSegment_(this.m_sweepPointCluster,t.getCurrentNode())));const h=this.m_bContinuingSegmentChainOptimization;!this.insertNewEdges_()&&h&&-1!==this.m_prevNeighbour&&-1!==this.m_nextNeighbour&&this.checkAndFixIntersection_(this.m_prevNeighbour,this.m_nextNeighbour),this.m_bSweepPointClusterWasModified?(this.m_bSweepPointClusterWasModified=!1,null===s&&(s=new Gn(this.m_shape)),s.setPoint(this.m_sweepPoint),i=this.m_eventQ.searchUpperBound(s)):i=this.m_eventQ.getNext(i)}return this.m_bCracked}setEditShape_(e){this.m_shape=e,this.m_vertexClusterIndex=this.m_shape.createUserIndex(),this.m_edges.setCapacity(e.getSelectedCount()+32),this.m_clusters.setCapacity(e.getSelectedCount()),this.m_clusterVertices.reserveLists(e.getSelectedCount()),this.m_clusterVertices.reserveNodes(e.getSelectedCount()),this.m_edgeVertices.reserveLists(e.getSelectedCount()+32),this.m_edgeVertices.reserveNodes(e.getSelectedCount()+32);for(let t=this.m_shape.getFirstGeometry();t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=this.m_shape.getNextGeometry(t)){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(this.m_shape.getGeometryType(t)))for(let s=this.m_shape.getFirstPath(t);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_shape.getNextPath(s)){const t=this.m_shape.getPathSize(s),n=this.m_shape.getFirstVertex(s);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let r=this.m_shape.getNextVertex(n);if(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||r===n)continue;let i=-1;e.selected(n)&&(i=this.newCluster_(n));let o=-1;-1!==i&&e.selected(r)&&(o=this.newEdge_(n),this.addEdgeToCluster(o,i));let a=o;for(let e=0,s=t-2;e<s;e++){const e=this.m_shape.getNextVertex(r);let t=-1;if(this.m_shape.selected(r)){const s=this.newCluster_(r);-1!==a&&this.addEdgeToCluster(a,s),this.m_shape.selected(e)&&(t=this.newEdge_(r),this.addEdgeToCluster(t,s))}a=t,r=e}if(this.m_shape.isClosedPath(s)){const e=this.m_shape.getNextVertex(r);if(this.m_shape.selected(r)){const t=this.newCluster_(r);if(-1!==a&&this.addEdgeToCluster(a,t),this.m_shape.selected(e)){const e=this.newEdge_(r);this.addEdgeToCluster(e,t),this.addEdgeToCluster(e,i)}}}else{let e=-1;this.m_shape.selected(r)&&(e=this.newCluster_(r),-1!==a&&this.addEdgeToCluster(a,e))}}else for(let e=this.m_shape.getFirstPath(t);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_shape.getNextPath(e)){let t=this.m_shape.getFirstVertex(e);for(let s=0,n=this.m_shape.getPathSize(e);s<n;s++)this.m_shape.selected(t)&&this.newCluster_(t),t=this.m_shape.getNextVertex(t)}}this.fillEventQueue()}progress_(e=!1){}dbgCheckSweepStructure_(){}}function Vn(e,t,s,n){s>0&&mn(e,s,t,!1,n);new Hn(n).executeImpl_(e,t)}function Fn(e,t,s){return{vertex0:e,vertex1:t,dir:s}}class Hn{constructor(e){this.m_shape=null,this.m_spikes=[],this.m_points=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0),this.m_pointsIndex=-1,this.m_dissolvedEdges=0,this.m_progressTracker=e}executeImpl_(e,t){if(this.m_shape=e,e.getPathCount(t)<2&&e.getPointCount(t)<6)return;this.m_points.resize(0);for(let a=e.getFirstPath(t);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=e.getNextPath(a)){let t=e.getFirstVertex(a);for(let s=0,n=e.getPathSize(a);s<n;s++,t=e.getNextVertex(t))this.m_points.add(t)}this.m_pointsIndex=e.createUserIndex();for(let a=0,g=this.m_points.size();a<g;++a)e.setUserIndex(this.m_points.read(a),this.m_pointsIndex,a);e.sortVerticesSimpleByY(this.m_points,0,this.m_points.size());let s=this.m_points.read(0);const n=e.getXY(s);let r=1,i=0;const o=[];for(let a=1;a<this.m_points.size();a++){const t=this.m_points.read(a);if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;if(-1===e.getUserIndex(t,this.m_pointsIndex))continue;const h=e.getXY(t);if(h.isEqualPoint2D(n))r++;else{if(r>1){for(let t=i;t<a;t++){const s=this.m_points.read(t);if(-1===e.getUserIndex(s,this.m_pointsIndex))continue;const r=e.getNextVertex(s),i=e.getPrevVertex(s);if(s!==r&&!e.isEqualXYPoint2D(r,n)){const e=Fn(s,r,1);o.push(e)}if(s!==i&&i!==r&&!e.isEqualXYPoint2D(i,n)){const e=Fn(s,i,-1);o.push(e)}}o.length>0&&this.processBunch_(o,n)}s=t,n.assign(h),r=1,i=a}}if(0===this.m_dissolvedEdges)return e.removeUserIndex(this.m_pointsIndex),void(this.m_pointsIndex=-1);let h=e.getPointCount(t);for(let a=0;a<this.m_points.size();a++){const t=this.m_points.read(a);if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;if(-1!==e.getUserIndex(t,this.m_pointsIndex)){e.setUserIndex(t,this.m_pointsIndex,-1);continue}const s=e.getPathFromVertex(t);e.getFirstVertex(s)===t&&e.setFirstVertex(s,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.freeVertex(t),this.m_points.write(a,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),h--}const m=e.createPathUserIndex();let l=e.getPathCount(t);for(let g=0,u=this.m_points.size();g<u;++g){if(this.m_points.read(g)===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let s=this.m_points.read(g);if(-1!==e.getUserIndex(s,this.m_pointsIndex))continue;let n=e.getPathFromVertex(s),r=-1;if(2===e.getPathUserIndex(n,m)){n=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let t=e.getNextVertex(s);t!==s;t=e.getNextVertex(t)){const r=e.getPathFromVertex(t);if(2!==e.getPathUserIndex(r,m)){n=r,s=t;break}}n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(n=e.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.setClosedPath(n,!0),l++),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}e.setPathUserIndex(n,m,2),r=e.getFirstVertex(n);let i=0,o=!1,h=s;do{r===h&&(o=!0),e.setUserIndex(h,this.m_pointsIndex,1);const t=e.getPathFromVertex(h);t!==n&&(2!==e.getPathUserIndex(t,m)&&(e.setPathUserIndex(t,m,1),e.setFirstVertex(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)),e.setPathToVertex(h,n)),i++,h=e.getNextVertex(h)}while(h!==s);o||e.setFirstVertex(n,s),e.setPathSize(n,i)}for(let a=e.getFirstPath(t);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const t=e.getNextPath(a);1!==e.getPathUserIndex(a,m)&&e.getFirstVertex(a)!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||(e.removePathOnly(a),l--),a=t}e.setGeometryVertexCount(t,h),e.setGeometryPathCount(t,l),e.removePathUserIndex(m),e.removeUserIndex(this.m_pointsIndex),this.m_pointsIndex=-1,e.dbgVerifyVertexCounts(),e.filterClosePoints(0,!0,!1,!1,t)}processBunch_(e,t){e.sort(((e,s)=>{const n=this.m_shape.getXY(e.vertex1).sub(t),r=this.m_shape.getXY(s.vertex1).sub(t),i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.compareVectors(n,r);return 0===i?e.dir<s.dir?-1:1:i}));let s=0;const n=this.m_shape.getXY(e[0].vertex1);let r=1;const i=this.m_shape.hasCurves();for(let o=1,a=e.length;o<a;o++){const t=this.m_shape.getXY(e[o].vertex1);if(!(t.isEqualPoint2D(n)&&(r++,o+1<a))){if(2===r){const t=e[s],n=e[s+1],r=t.dir;if(r!==n.dir){let e=!0;if(i&&(e=!this.m_shape.isCurve(1===t.dir?t.vertex0:t.vertex1)&&!this.m_shape.isCurve(1===n.dir?n.vertex0:n.vertex1)),e){if(1===r){const e=t.vertex0,s=n.vertex0;this.m_shape.setNextVertex(e,s),this.m_shape.setPrevVertex(s,e),this.m_shape.getPrevVertex(e)===s&&(this.m_shape.setUserIndex(e,this.m_pointsIndex,-1),this.m_shape.setUserIndex(s,this.m_pointsIndex,-1));const r=t.vertex1,i=n.vertex1;this.m_shape.setPrevVertex(r,i),this.m_shape.setNextVertex(i,r),this.m_shape.getNextVertex(r)===i&&(this.m_shape.setUserIndex(r,this.m_pointsIndex,-1),this.m_shape.setUserIndex(i,this.m_pointsIndex,-1))}else{const e=t.vertex0,s=n.vertex0;this.m_shape.setPrevVertex(e,s),this.m_shape.setNextVertex(s,e),this.m_shape.getNextVertex(e)===s&&(this.m_shape.setUserIndex(e,this.m_pointsIndex,-1),this.m_shape.setUserIndex(s,this.m_pointsIndex,-1));const r=t.vertex1,i=n.vertex1;this.m_shape.setNextVertex(r,i),this.m_shape.setPrevVertex(i,r),this.m_shape.getPrevVertex(r)===i&&(this.m_shape.setUserIndex(r,this.m_pointsIndex,-1),this.m_shape.setUserIndex(i,this.m_pointsIndex,-1))}this.m_dissolvedEdges+=2}}}n.assign(t),s=o,r=1}}e.length=0}}function kn(e){for(let t=e.getFirstGeometry();t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=e.getNextGeometry(t))if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e.getGeometryType(t)))return!0;return!1}function An(e,t,s,n){if(!kn(e))return!1;const r=new Bn(n);r.m_shape=e,r.m_tolerance=t,r.m_bTrackChanges=s;let i=!1;const o=e.hasCurves()?5:15;return i=e.getTotalPointCount()<o?r.crackBruteForce_():r.crackerPlaneSweep_(),i}function Mn(e,t,s,n,r){if(!kn(t))return!1;let i=new Bn(r);if(i.m_shape=t,i.m_tolerance=s,i.m_bAllowCoincident=e,i.m_bNeedsNonSimpleResult=null!==n,i.needsCrackingImpl_())return n&&n.assign(i.m_nonSimpleResult),!0;const o=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;o.setSwapCoordinates(),t.applyTransformation(o),i=new Bn(r),i.m_shape=t,i.m_tolerance=s,i.m_bAllowCoincident=e,i.m_bNeedsNonSimpleResult=null!==n;const a=i.needsCrackingImpl_();return t.applyTransformation(o),!!a&&(n&&n.assign(i.m_nonSimpleResult),!0)}function Un(e,t,s,n){const r=t.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(r)){return new Bn(n).crackAWithBMultiPath_(e,t,s)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("crack_A_with_B")}function qn(e,t){return{t:e,index:t}}class Bn{crackBruteForce_(){let e=this.crackBruteForceImpl_();if(!e&&this.m_shape.hasCurves()){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;t.setSwapCoordinates(),this.m_shape.applyTransformation(t),e=this.crackBruteForceImpl_(),this.m_shape.applyTransformation(t)}return e}crackBruteForceImpl_(){let t=!1;const s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=!1,h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,m=new xn,l=this.m_shape.getTotalPointCount(),g=l*l*2,u=this.m_shape.queryVertexIteratorOnSelection();for(let e=u.next();e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=u.next()){const l=this.m_shape.getGeometryType(u.currentGeometry());let c=1,_=1,d=1,f=0,x=0,y=0;const P=this.m_shape.getSegmentParentage(e);let E=!1,S=!1,C=null,I=!1;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(l))c=this.m_shape.getWeight(e),f=this.m_shape.getRank(e);else{if(C=this.getSegment_(e,s),null===C)continue;const t=this.m_shape.getVertexIndex(e);c=this.m_shape.getWeightWithIndex(t),f=this.m_shape.getRankWithIndex(t),d=this.m_shape.getSegmentWeightWithIndex(t),y=this.m_shape.getSegmentRankWithIndex(t),E=this.m_shape.getSegmentParentageBreakVertex(e);{const t=this.m_shape.getNextVertex(e);_=this.m_shape.getWeight(t),x=this.m_shape.getRank(t),S=this.m_shape.getSegmentParentageBreakVertex(t)}if(C.queryLooseEnvelope(r),r.inflateCoords(this.m_tolerance,this.m_tolerance),C.isDegenerate(this.m_tolerance)){if(!C.isDegenerate(0))continue;I=!0,C=null}}const b=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.X({copy:u});let w=b.next();w!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(w=b.next());let v=0;for(;w!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;w=b.next()){if(0!==v){v--;continue}if(this.m_shape.getTotalPointCount()>g)return t;this.progress_();const l=this.m_shape.getGeometryType(b.currentGeometry());let N=null,T=!1,G=0,D=0,V=0,F=0,H=0,k=0,A=!1,U=!1;const q=this.m_shape.getSegmentParentage(w);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(l))G=this.m_shape.getWeight(w),F=this.m_shape.getRank(w);else{if(N=this.getSegment_(w,n),null===N)continue;const e=this.m_shape.getVertexIndex(w);G=this.m_shape.getWeightWithIndex(e),F=this.m_shape.getRankWithIndex(e),V=this.m_shape.getSegmentWeightWithIndex(e),k=this.m_shape.getSegmentRankWithIndex(e),A=this.m_shape.getSegmentParentageBreakVertex(w);{const e=this.m_shape.getNextVertex(w);D=this.m_shape.getWeight(e),H=this.m_shape.getRank(e),U=this.m_shape.getSegmentParentageBreakVertex(e)}if(N.queryLooseEnvelope(i),N.isDegenerate(this.m_tolerance)){if(!N.isDegenerate(0))continue;T=!0,N=null}}let B=0,O=0;if(null!==C&&null!==N){if(r.isIntersectingNe(i)){0!==(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Y)(!0,!0,C,N,this.m_tolerance,!0)&&(m.pushSegment(C,c,f,_,x,d,y,E,S,P),m.pushSegment(N,G,F,D,H,V,k,A,U,q),m.intersect2D(this.m_tolerance,!0),t||=m.getSegmentChanged(0)||m.getSegmentChanged(1),B=m.getResultSegmentCount(0),O=m.getResultSegmentCount(1),B+O>0&&(this.m_shape.splitSegmentWithIntersector(e,m,0,!0,!0),this.m_shape.splitSegmentWithIntersector(w,m,1,!0,!0),this.m_bTrackChanges&&(m.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(e,!0),m.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(w,!0))),O>1&&(v+=O-1),m.clear())}}else if(null!==C){const s=this.m_shape.getXY(w);if(r.contains(s)){if(m.pushSegment(C,c,f,_,x,d,y,E,S,P),this.m_shape.queryPoint(w,h),m.intersect2DEx(this.m_tolerance,h,F,G,o),t||=m.getSegmentChanged(0)||m.getResultPointChanged(),B=m.getResultSegmentCount(0),B>0)if(this.m_bTrackChanges&&(m.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(e,!0),m.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(w,!0)),this.m_shape.splitSegmentWithIntersector(e,m,0,!0,!0),T){let e=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let t=this.m_shape.getNextVertex(w);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&t!==w&&(N=this.getSegment_(t,n),e=t,null!=N&&N.isDegenerate(0));t=this.m_shape.getNextVertex(t));for(let t=w;t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.m_shape.setPoint(t,m.getResultPoint(),!0),t!==e);t=this.m_shape.getNextVertex(t));}else this.m_shape.setPoint(w,m.getResultPoint(),!0);m.clear()}}else{if(null===N)continue;{const s=this.m_shape.getXY(e);if(i.inflateCoords(this.m_tolerance,this.m_tolerance),i.contains(s)){if(m.pushSegment(N,G,F,D,H,V,k,A,U,q),this.m_shape.queryPoint(e,h),m.intersect2DEx(this.m_tolerance,h,f,c,o),t||=m.getSegmentChanged(0)||m.getResultPointChanged(),O=m.getResultSegmentCount(0),O>0)if(this.m_bTrackChanges&&(m.getSegmentChanged(0)&&this.m_shape.setGeometryModifiedWithVertex(w,!0),m.getSegmentChanged(1)&&this.m_shape.setGeometryModifiedWithVertex(e,!0)),this.m_shape.splitSegmentWithIntersector(w,m,0,!0,!0),v+=O-1,I){let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let s=this.m_shape.getNextVertex(e);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&s!==e&&(N=this.getSegment_(s,n),t=s,null!=N&&N.isDegenerate(0));s=this.m_shape.getNextVertex(s));for(let s=e;s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.m_shape.setPoint(s,m.getResultPoint(),!0),s!==t);s=this.m_shape.getNextVertex(s));}else this.m_shape.setPoint(e,m.getResultPoint(),!0);m.clear()}}}if(B+O!==0&&0!==B){let t=!1;for(;C=this.getSegment_(e,s),null!=C&&(C.queryEnvelope(r),C.isDegenerate(this.m_tolerance));){if(!(B>1)){t=!0;break}e=u.next(),B--,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}if(t)break}}}return t}crackerPlaneSweep_(){return this.planesweep_()}planesweep_(){return new Dn(this.m_progressTracker,this.m_bTrackChanges).sweep(this.m_shape,this.m_tolerance)}needsCrackingImpl_(){let e=!1;const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0);t.resize(this.m_shape.getSelectedCount());const s=this.m_shape.queryVertexIteratorOnSelection();for(let i=0,g=s.next();g!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;++i,g=s.next())t.write(i,g);this.m_shape.sortVerticesSimpleByY(t,0,t.size()),t.add(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);const n=this.m_shape.createUserIndex(),r=this.m_shape.createUserIndex();this.m_sweepComparator=new on(this.m_shape,this.m_tolerance,!this.m_bAllowCoincident),this.m_sweepStructure.setComparator(this.m_sweepComparator);let o=null;const a=[],h=[];let m=0;const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let g=t.read(m++);g!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){this.m_shape.queryXY(g,l);let s=!1;do{let e=this.m_shape.getNextVertex(g),i=this.m_shape.getPrevVertex(g);s||=e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||this.m_shape.selected(e)||(e=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||this.m_shape.selected(i)||(i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_shape.compareVerticesSimpleY(g,e)<0&&(h.push(g),h.push(e)),i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_shape.compareVerticesSimpleY(g,i)<0&&(h.push(i),h.push(i));const o=this.m_shape.getUserIndex(g,n);-1!==o&&(a.push(o),this.m_shape.setUserIndex(g,n,-1));const l=this.m_shape.getUserIndex(g,r);-1!==l&&(a.push(l),this.m_shape.setUserIndex(g,r,-1)),g=t.read(m++)}while(g!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_shape.isEqualXYPoint2D(g,l));if(!s&&(null===o&&(o=new an(this.m_shape,this.m_tolerance)),o.setPoint(l),this.m_sweepStructure.searchUpperBound(o),o.intersectionDetected())){e=!0,this.m_bNeedsNonSimpleResult&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("needsCrackingIMpl_"),this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(6,-1,-1));break}let u=1===a.length&&2===h.length;const c=32;a.length>c&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.v)(a);let _=-1,d=-1;if(!u)for(let t=0,n=a.length;t<n;t++){const s=a[t],n=this.m_sweepStructure.getPrev(s);if(-1!==n&&-1===a.indexOf(n))if(-1===_)_=n;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(6,-1,-1)}const r=this.m_sweepStructure.getNext(s);if(-1!==r&&-1===a.indexOf(r))if(-1===d)d=r;else{if(e=!0,!this.m_bNeedsNonSimpleResult)break;this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(6,-1,-1)}if(-1!==_&&-1!==d)break}if(e&&!this.m_bNeedsNonSimpleResult)break;if(this.m_sweepComparator.setSweepY(l.y,l.x),!u){for(let e=0,t=a.length;e<t;e++){const t=a[e];this.m_sweepStructure.deleteNode(t)}a.length=0}if(!u&&-1!==_&&-1!==d&&this.checkForIntersections_(_,d)){e=!0,this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult());break}for(let t=0,i=h.length;t<i;t+=2){const s=h[t],i=h[t+1];let o;if(u?(o=this.m_sweepStructure.replaceElementAtPosition(a[0],s,!0,!0),a.length=0,u=!1):o=this.m_sweepStructure.addElement(s),this.m_sweepComparator.intersectionDetected()){this.m_bNeedsNonSimpleResult&&(this.m_nonSimpleResult=this.m_sweepComparator.getResult()),e=!0;break}-1===this.m_shape.getUserIndex(i,n)?this.m_shape.setUserIndex(i,n,o):this.m_shape.setUserIndex(i,r,o)}if(e)break;h.length=0}return this.m_shape.removeUserIndex(n),this.m_shape.removeUserIndex(r),e}checkForIntersections_(e,t){const s=this.m_sweepStructure.getElement(e);this.m_sweepComparator.compare(this.m_sweepStructure,s,t);const n=this.m_sweepComparator.intersectionDetected();return this.m_sweepComparator.clearIntersectionDetectedFlag(),n}getSegment_(e,t){return Bn.st_getSegment(this.m_shape,e,t)}static st_getSegment(e,t,s){return e.querySegment(t,s,!1,!1)?s.get():null}dbgPrintSweepEdge(e){}dbgPrintSweepStructure(){}dbgSaveSweepStructure(e=null){}dbgCheckSweepStructure(){}progress_(e=!1){this.m_progressCounter++}crackAWithBMultiPath_(t,s,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryLooseEnvelope(i);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(s.queryLooseEnvelope(o),o.inflateCoords(r,r),!o.isIntersecting(i))return t;const h=t.getImpl(),m=h.getAccelerators();let g=null,u=null;m&&(u=m.getQuadTree()),On(t,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(s))&&(g=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.F)(h,o),u=g);const c=u?u.getIteratorForQT():null,_=s.querySegmentIterator(),d=t.querySegmentIterator(),p=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(15,Number.NaN),f=[];for(;_.nextPath();)for(;_.hasNextSegment();){const t=_.nextSegment();if(u){c.resetIterator(t,r);for(let e=c.next();-1!==e;e=c.next()){this.progress_();const s=u.getElement(e);if(d.resetToVertex(s,-1),d.hasNextSegment()){const e=d.nextSegment().intersect(t,null,p,null,r);for(let t=0;t<e;t++){const e=p[t];if(0===e||1===e)continue;const s=qn(e,d.getStartPointIndex());f.push(s)}}}}else{const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryLooseEnvelope(s),s.inflateCoords(r,r),!i.isIntersecting(s))continue;for(d.resetToFirstPath();d.nextPath();)for(;d.hasNextSegment();){const n=d.nextSegment(),i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(n.queryLooseEnvelope(i),!i.isIntersecting(s))continue;const o=n.intersect(t,null,p,null,r);for(let e=0;e<o;e++){const t=p[e];if(0===t||1===t)continue;const s=qn(t,d.getStartPointIndex());f.push(s)}}}}if(0===f.length)return t;f.sort(((e,t)=>e.index<t.index?-1:e.index>t.index?1:e.t<t.t?-1:e.t>t.t?1:0));const x=t.createInstance();if(x.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){x.setFillRule(t.getFillRule())}for(d.resetToFirstPath();d.nextPath()&&!d.hasNextSegment(););(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(d.hasNextSegment());let y=d.nextSegment();const P=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;let E=-1;for(let e=0,n=f.length;e<n;){const t=f[e].index;let s=e+1;for(;s<n&&f[s].index===t;)++s;for(;d.getStartPointIndex()<t;){this.progress_();const e=d.hasNextSegment(),t=d.getPathIndex();if((e||!d.isClosingSegment()||d.isCurve())&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==y),x.addSegment(y,E!==t)),E=t,!e){for(d.isPathClosed();d.nextPath()&&!d.hasNextSegment(););(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(d.hasNextSegment())}y=d.nextSegment()}let r=0;for(let n=e;n<s;n++){const e=f[n].t;if(e===r)continue;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==y),y.queryCut(r,e,P),r=e;const t=d.getPathIndex();x.addSegment(P.get(),E!==t),E=t}const i=d.hasNextSegment();if((i||!d.isClosingSegment()||d.isCurve())&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!=y),y.queryCut(r,1,P),x.addSegment(P.get(),!1)),i)y=d.nextSegment();else{for(;d.nextPath()&&!d.hasNextSegment(););y=d.hasNextSegment()?d.nextSegment():null}e=s}if(null!==y){const e=d.getPathIndex();(d.hasNextSegment()||!d.isClosingSegment()||d.isCurve())&&x.addSegment(y,E!==e),E=e}let S=d.hasNextSegment();for(;;){if(!S){for(;d.nextPath()&&(S=d.hasNextSegment(),!S););if(!S)break}y=d.nextSegment();const e=d.getPathIndex();S=d.hasNextSegment();(S||!d.isClosingSegment()||d.isCurve())&&x.addSegment(y,E!==e),E=e}return x}constructor(e){this.m_shape=null,this.m_progressTracker=null,this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult,this.m_tolerance=0,this.m_sweepComparator=null,this.m_progressCounter=0,this.m_bTrackChanges=!1,this.m_bNeedsNonSimpleResult=!1,this.m_bAllowCoincident=!0,this.m_sweepStructure=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T,this.m_progressTracker=e}}function On(e,t){const s=e.getPointCount();if(s<16)return!1;const n=1;return 2*s+1*(Math.log(s)/Math.log(2))*t<n*s*t}Bn.s_bForceBruteForce=!0;class Yn{constructor(e,t){this.m_monotoneParts=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,16),this.m_xOrds=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(16,Number.NaN),this.m_inputPoint=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_miny=0,this.m_maxy=0,this.m_windnum=0,this.m_bAlternate=e,this.m_tolerance=t,this.m_toleranceSqr=t*t,this.m_bTestBorder=!!t,this.m_bBreak=!1}_DoOne(e){if(!this.m_bTestBorder&&(this.m_bAlternate&&this.m_inputPoint.equals(e.getStartXY())||this.m_inputPoint.equals(e.getEndXY())))return void(this.m_bBreak=!0);if(e.getStartY()===this.m_inputPoint.y&&e.getStartY()===e.getEndY()){if(this.m_bAlternate&&!this.m_bTestBorder){const t=Math.min(e.getStartX(),e.getEndX()),s=Math.max(e.getStartX(),e.getEndX());this.m_inputPoint.x>t&&this.m_inputPoint.x<s&&(this.m_bBreak=!0)}return}let t=!1;const s=Math.max(e.getStartX(),e.getEndX());if(this.m_inputPoint.x>s)t=!0;else if(this.m_inputPoint.x>=Math.min(e.getStartX(),e.getEndX())){const n=e.intersectionOfYMonotonicWithAxisX(this.m_inputPoint.y,s);t=!Number.isNaN(n)&&n<=this.m_inputPoint.x}if(t){if(this.m_inputPoint.y===e.getStartY()){if(this.m_inputPoint.y<e.getEndY())return}else if(this.m_inputPoint.y===e.getEndY()&&this.m_inputPoint.y<e.getStartY())return;this.m_bAlternate?this.m_windnum^=1:this.m_windnum+=e.getStartY()>e.getEndY()?1:-1}}_Result(){return!!this.m_windnum}testBorder(e){const t=e.getClosestCoordinate(this.m_inputPoint,!1),s=e.getCoord2D(t);return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(s,this.m_inputPoint)<=this.m_toleranceSqr}setInputPoint(e){this.m_inputPoint.setCoordsPoint2D(e),this.m_miny=e.y-this.m_tolerance,this.m_maxy=e.y+this.m_tolerance}processSegment(e){const t=e.queryInterval(0,1);if(t.vmin>this.m_maxy||t.vmax<this.m_miny)return!1;if(this.m_bTestBorder&&this.testBorder(e))return!0;if(t.vmin>this.m_inputPoint.y||t.vmax<this.m_inputPoint.y)return!1;let s=0;if(e.isCurve()&&(0===this.m_monotoneParts.length&&(this.m_monotoneParts.length=128),s=e.getMonotonicParts(this.m_monotoneParts,!0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_monotoneParts.length>=s)),s>0)for(let n=0;n<s;n++){const e=this.m_monotoneParts[n].get(),t=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.construct(e.getStartY(),e.getEndY());if(!(t.vmin>this.m_inputPoint.y||t.vmax<this.m_inputPoint.y)&&(this._DoOne(e),this.m_bBreak))return!0}else if(this._DoOne(e),this.m_bBreak)return!0;return!1}result(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),2}}function Rn(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryLooseEnvelope(i),i.inflateCoords(r,r);const o=0===t.getFillRule(),a=new Yn(o,r);a.setInputPoint(n);const h=i.clone();h.xmax=n.x+r,h.ymin=n.y-r,h.ymax=n.y+r;const m=t.getImpl().querySegmentIterator(),l=s.getIterator(h,r);for(let e=l.next();-1!==e;e=l.next())if(m.resetToVertex(s.getElement(e),-1),m.hasNextSegment()){const e=m.nextSegment();if(a.processSegment(e))return-1}return a._Result()?1:0}function Xn(e,t,s){const n=0===e.getFillRule(),r=new Yn(n,s);r.setInputPoint(t);const i=e.getImpl().querySegmentIterator();for(;i.nextPath();)for(;i.hasNextSegment();){const e=i.nextSegment();if(r.processSegment(e))return-1}return r._Result()?1:0}function Ln(e,t,s){return t.isEmpty()?0:zn(e,t.getXY(),s)}function zn(t,s,n){if(t.isEmpty())return 0;const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryLooseEnvelope(r),r.inflateCoords(n,n),!r.contains(s))return 0;const i=t.getImpl().getAccelerators();if(i){i.getRasterizedGeometry()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);const e=i.getQuadTree();if(e)return Rn(t,e,s,n)}return Xn(t,s,n)}function Wn(e,t){const s=e.getPointCount();if(s<16)return!1;const n=1;return 2*s+1*(Math.log(s)/Math.log(2))*t<n*s*t}function jn(e,t,s,n,r){const i=new $n(r);return i.m_shape=e,i.m_geometry=t,i.m_sortedVertices=s,i.m_bFixSelfTangency=n,i.fixRingOrientation_()}function Zn(e,t,s){const n=new $n(s);return n.m_shape=e,n.m_geometry=t,n.m_sortedVertices=null,n.m_bFixSelfTangency=!1,n.fixRingOrientationForMp2sp_()}class Kn{getDirection_(e){return this.m_shape.getNextVertex(this.getEnd1(e))===this.getEnd2(e)}getEnd_(e){const t=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(t)===s?s:t}constructor(e){this.m_end1Nodes=[],this.m_end2Nodes=[],this.m_directions=[],this.m_shape=e,this.m_firstFree=-1}getSegment(e){return this.m_shape.getSegment(this.getStart(e))}isBottomUp(e){let t=this.getEnd1(e),s=this.getEnd2(e);this.m_shape.getPrevVertex(t)===s&&(s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(t,t=s));const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();return this.m_shape.queryXY(t,n),this.m_shape.queryXY(s,r),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!n.equals(r)),n.y<r.y}getStart(e){const t=this.getEnd1(e),s=this.getEnd2(e);return this.m_shape.getNextVertex(t)===s?t:s}getEnd1(e){return this.m_end1Nodes[e]}getEnd2(e){return this.m_end2Nodes[e]}freeEdge(e){this.m_end1Nodes[e]=this.m_firstFree,this.m_firstFree=e}newEdge(e){if(-1!==this.m_firstFree){const t=this.m_firstFree;return this.m_firstFree=this.m_end1Nodes[t],this.m_end1Nodes[t]=e,this.m_end2Nodes[t]=this.m_shape.getNextVertex(e),t}const t=this.m_end1Nodes.length;return this.m_end1Nodes.push(e),this.m_end2Nodes.push(this.m_shape.getNextVertex(e)),t}getShape(){return this.m_shape}getPath(e){return this.m_shape.getPathFromVertex(this.getEnd1(e))}}let Qn=class extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e){super(),this.m_line1=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,this.m_line2=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,this.m_leftElm=-1,this.m_leftx=0,this.m_seg1=null,this.m_helper=e}compare(e,t,s){const n=e.getElement(s),r=this.m_helper.m_edges;let i;if(this.m_leftElm===t)i=this.m_leftx;else{if(this.m_seg1=r.getSegment(t),this.m_seg1)i=this.m_seg1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);else{r.getShape().queryLineConnector(r.getStart(t),this.m_line1,!0),this.m_seg1=this.m_line1,i=this.m_line1.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)}this.m_leftx=i,this.m_leftElm=t}let o,a=r.getSegment(n);if(a)o=a.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);else{r.getShape().queryLineConnector(r.getStart(n),this.m_line2,!0),a=this.m_line2,o=this.m_line2.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0)}if(i===o){const e=r.isBottomUp(t),s=r.isBottomUp(n),h=e?this.m_seg1.getEndY():this.m_seg1.getStartY(),m=s?a.getEndY():a.getStartY(),l=Math.min(h,m);let g=.5*(l+this.m_helper.m_yScanline);g===this.m_helper.m_yScanline&&(g=l),i=this.m_seg1.intersectionOfYMonotonicWithAxisX(g,0),o=a.intersectionOfYMonotonicWithAxisX(g,0),i===o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.w)("")}return i<o?-1:i>o?1:0}reset(){this.m_leftElm=-1}};class Jn{constructor(e){this.m_node=-1,this.m_index=0,this.m_sortedVertices=e.m_sortedVertices,this.m_sortedVerticesArray=e.m_sortedVerticesArray,this.m_sortedVertices&&(this.m_node=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList()))}next(){if(this.m_sortedVertices){const e=this.m_node;if(-1===e)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const t=this.m_sortedVertices.getData(e);return this.m_node=this.m_sortedVertices.getNext(e),t}if(this.m_index<this.m_sortedVerticesArray.size()){const e=this.m_sortedVerticesArray.read(this.m_index);return this.m_index++,e}return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}}class $n{constructor(e){this.m_edges=null,this.m_shape=null,this.m_AET=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T,this.m_yScanline=0,this.m_geometry=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_unknownRingOrientationCount=-1,this.m_sortedVertices=null,this.m_sortedVerticesArray=null,this.m_unknownNodes=[],this.m_node1UserIndex=-1,this.m_node2UserIndex=-1,this.m_pathOrientationIndex=-1,this.m_pathParentageIndex=-1,this.m_pathParentsIndex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_progressTracker=e,this.m_AET.disableBalancing(),this.m_sweepComparator=new Qn(this),this.m_AET.setComparator(this.m_sweepComparator)}fixRingOrientation_(){const e=this.fixRingOrientationImplMain_();return-1===this.m_pathOrientationIndex||this.fixRingOrientationImplSimplify_(),e}fixRingOrientationForMp2sp_(){return this.fixRingOrientationImplMain_(),-1===this.m_pathOrientationIndex?-1:this.fixRingOrientationImplMp2sp_()}processBunchForRingOrientationTest_(e){return this.processBunchForRingOrientationTestOddEven_(e)}processBunchForRingOrientationTestOddEven_(e){let t=!1;if(this.m_edges||(this.m_edges=new Kn(this.m_shape)),this.m_unknownNodes.length=0,this.processBunchForRingOrientationRemoveEdges_(e),!this.m_AET.isAutoBalancing()){let t=0;for(let s=0,n=e.length;s<n;s++){-1!==e[s]&&t++}(t>10||this.m_AET.getMaxDepthEver()>4)&&this.m_AET.enableBalancing()}for(let s=0,n=e.length;s<n;s++){const t=e[s];t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.insertEdge_(t,-1)}for(let s=0;s<this.m_unknownNodes.length&&this.m_unknownRingOrientationCount>0;s++){const e=this.m_unknownNodes[s],n=this.m_AET.getElement(e),r=this.m_edges.getPath(n),i=this.m_shape.getPathUserIndex(r,this.m_pathOrientationIndex);let o=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(0===i){let s=this.m_AET.getPrev(e),n=e,r=!1;for(;s!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode();){const e=this.m_AET.getElement(s),t=this.m_edges.getPath(e);if(0!==this.m_shape.getPathUserIndex(t,this.m_pathOrientationIndex)){o=t;break}n=s,s=this.m_AET.getPrev(s)}if(s===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode())r=!0,s=n;else{const e=this.m_AET.getElement(s);r=this.m_edges.isBottomUp(e),s=this.m_AET.getNext(s),r=!r}do{const e=this.m_AET.getElement(s),i=this.m_edges.getPath(e);if(0===this.m_shape.getPathUserIndex(i,this.m_pathOrientationIndex)){if(r!==this.m_edges.isBottomUp(e)){const e=this.m_shape.getFirstVertex(i);this.m_shape.reverseRingInternal(e),this.m_shape.setLastVertex(i,this.m_shape.getPrevVertex(e)),t=!0}if(this.m_shape.setPathUserIndex(i,this.m_pathOrientationIndex,r?3:2),!r){let e=this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex);2===e?(o=this.m_shape.getPathUserIndex(o,this.m_pathParentsIndex),e=this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(3===e)):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(3===e);const t=this.m_shape.getPathUserIndex(o,this.m_pathParentageIndex);this.m_shape.setPathUserIndex(o,this.m_pathParentageIndex,i),this.m_shape.setPathUserIndex(i,this.m_pathParentageIndex,t),this.m_shape.setPathUserIndex(i,this.m_pathParentsIndex,o)}if(this.m_unknownRingOrientationCount--,!this.m_unknownRingOrientationCount)return t}o=i,n=s,s=this.m_AET.getNext(s),r=!r}while(n!==e)}}return t}processBunchForRingOrientationRemoveEdges_(e){for(let t=0,s=e.length;t<s;t++){const s=e[t],n=this.m_shape.getUserIndex(s,this.m_node1UserIndex),r=this.m_shape.getUserIndex(s,this.m_node2UserIndex);if(-1!==n){const e=this.m_AET.getElement(n);this.m_edges.freeEdge(e),this.m_shape.setUserIndex(s,this.m_node1UserIndex,-1)}if(-1!==r){const e=this.m_AET.getElement(r);this.m_edges.freeEdge(e),this.m_shape.setUserIndex(s,this.m_node2UserIndex,-1)}let i=-1;-1!==n&&-1!==r?(this.m_AET.deleteNode(n),this.m_AET.deleteNode(r),e[t]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n):i=-1!==n?n:r,-1!==i&&(this.insertEdge_(s,i)||this.m_AET.deleteNode(i),e[t]=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}}dbgVerifyRingOrientation_(){}insertEdge_(e,t){const s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.m_shape.queryXY(e,s);const r=this.m_shape.getNextVertex(e);this.m_shape.queryXY(r,n);let i=!1;if(s.y<n.y){i=!0;const s=this.m_edges.newEdge(e);let n;-1===t?n=this.m_AET.addElement(s):(n=t,this.m_AET.setElement(n,s));-1===this.m_shape.getUserIndex(r,this.m_node1UserIndex)?this.m_shape.setUserIndex(r,this.m_node1UserIndex,n):this.m_shape.setUserIndex(r,this.m_node2UserIndex,n);const o=this.m_shape.getPathFromVertex(e);0===this.m_shape.getPathUserIndex(o,this.m_pathOrientationIndex)&&this.m_unknownNodes.push(n)}const o=this.m_shape.getPrevVertex(e);if(this.m_shape.queryXY(o,n),s.y<n.y){i=!0;const s=this.m_edges.newEdge(o);let n;-1===t?n=this.m_AET.addElement(s):(n=t,this.m_AET.setElement(n,s));-1===this.m_shape.getUserIndex(o,this.m_node1UserIndex)?this.m_shape.setUserIndex(o,this.m_node1UserIndex,n):this.m_shape.setUserIndex(o,this.m_node2UserIndex,n);const r=this.m_shape.getPathFromVertex(e);0===this.m_shape.getPathUserIndex(r,this.m_pathOrientationIndex)&&this.m_unknownNodes.push(n)}return i}fixRingSelfTangency_(){const e=[],t=[];let s=-1,n=-1;const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,o=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,h=-1;const m=new Jn(this);for(let a=m.next();a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=m.next()){const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_shape.queryXY(a,m);const l=this.m_shape.getPathFromVertex(a);if(r.equals(m)&&o===l){if(-1===n&&(s=this.m_shape.createPathUserIndex(),this.m_shape.fillPathUserIndexForGeometry(this.m_geometry,s,-1),n=this.m_shape.createUserIndex(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,n,-1)),-1===h){h=t.length,this.m_shape.setUserIndex(i,n,h),t.push(1);-1===this.m_shape.getPathUserIndex(l,s)&&(this.m_shape.setPathUserIndex(l,s,i),e.push(l))}this.m_shape.setUserIndex(a,n,h),t[t.length-1]++}else h=-1,r.assign(m);i=a,o=l}if(0===e.length)return!1;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==s);for(let a=0,l=e.length;a<l;a++){const r=e[a];let i=this.m_shape.getPathUserIndex(r,s);const o=this.m_shape.getUserIndex(i,n),h=[],m=[];h.push(i),m.push(o);for(let e=this.m_shape.getNextVertex(i);e!==i;e=this.m_shape.getNextVertex(e)){const s=e,r=this.m_shape.getUserIndex(s,n);if(-1!==r){if(0===m.length){m.push(r),h.push(s);continue}if(m.at(-1)===r){const o=h.at(-1);this.m_shape.peelALoopIntoAPath(o,s),this.m_shape.setUserIndex(e,n,-1),t[r]--,1===t[r]&&(t[r]=0,m.pop(),h.pop()),i=o,e=o}else h.push(e),m.push(r)}}}return this.m_shape.removePathUserIndex(s),this.m_shape.removeUserIndex(n),this.m_shape.dbgVerifyVertexCounts(),!0}progress_(e=!1){}fixRingOrientationImplMain_(){const e={stack:[],error:void 0,hasError:!1};try{let t,s=!1;const n=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(e,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.h)((()=>{this.m_sortedVerticesArray=null})),!1);if(null===this.m_sortedVertices){const e=this.m_shape.getPointCount(this.m_geometry);t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0);for(let s=this.m_shape.getFirstPath(this.m_geometry);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_shape.getNextPath(s)){let e=this.m_shape.getFirstVertex(s);for(let n=0,r=this.m_shape.getPathSize(s);n<r;n++)t.add(e),e=this.m_shape.getNextVertex(e)}this.m_shape.sortVerticesSimpleByY(t,0,e),this.progress_(!0),this.m_sortedVerticesArray=t}else n.bForget=!0;if(this.m_bFixSelfTangency&&(s=this.fixRingSelfTangency_()),1===this.m_shape.getPathCount(this.m_geometry)){const e=this.m_shape.getFirstPath(this.m_geometry),t=this.m_shape.getRingArea(e);if(this.m_shape.setExterior(e,!0),t<0){const t=this.m_shape.getFirstVertex(e);return this.m_shape.reverseRingInternal(t),this.m_shape.setLastVertex(e,this.m_shape.getPrevVertex(t)),!0}return!1}this.m_shape.dbgVerifyCurves(),this.m_pathOrientationIndex=this.m_shape.createPathUserIndex(),this.m_pathParentageIndex=this.m_shape.createPathUserIndex(),this.m_pathParentsIndex=this.m_shape.createPathUserIndex();for(let e=this.m_shape.getFirstPath(this.m_geometry);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_shape.getNextPath(e))this.m_shape.setPathUserIndex(e,this.m_pathOrientationIndex,0),this.m_shape.setPathUserIndex(e,this.m_pathParentageIndex,-1),this.m_shape.setPathUserIndex(e,this.m_pathParentsIndex,-1);const r=[];this.m_yScanline=Number.NaN;const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();this.m_unknownRingOrientationCount=this.m_shape.getPathCount(this.m_geometry),this.m_node1UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node1UserIndex,-1),this.m_node2UserIndex=this.m_shape.createUserIndexUninitialized(),this.m_shape.fillUserIndexForGeometry(this.m_geometry,this.m_node2UserIndex,-1);const o=new Jn(this);for(let e=o.next();e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(this.progress_(),this.m_shape.queryXY(e,i),i.y!==this.m_yScanline&&r.length&&(s=this.processBunchForRingOrientationTest_(r)||s,this.m_sweepComparator.reset(),r.length=0),r.push(e),this.m_yScanline=i.y,0!==this.m_unknownRingOrientationCount);e=o.next());return this.m_unknownRingOrientationCount>0&&(s=this.processBunchForRingOrientationTest_(r)||s,r.length=0),this.m_shape.removeUserIndex(this.m_node1UserIndex),this.m_shape.removeUserIndex(this.m_node2UserIndex),this.dbgVerifyRingOrientation_(),s}catch(t){e.error=t,e.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(e)}}fixRingOrientationImplSimplify_(){const e=[];for(let t=this.m_shape.getFirstPath(this.m_geometry);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;)if(this.progress_(),3===this.m_shape.getPathUserIndex(t,this.m_pathOrientationIndex)){this.m_shape.setExterior(t,!0);for(let r=this.m_shape.getPathUserIndex(t,this.m_pathParentageIndex);r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const s=this.m_shape.getPathUserIndex(r,this.m_pathParentageIndex);e.push(r),this.m_shape.setExterior(r,!1),this.m_shape.setPathUserIndex(r,this.m_pathParentageIndex,t),r=s}let s=t,n=e.length;for(let e=this.m_shape.getNextPath(t);n>0&&e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_shape.getNextPath(e),--n){if(this.m_shape.getPathUserIndex(e,this.m_pathParentageIndex)!==t){s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;break}s=e}if(0!==n){s=t;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.m_shape.setPathUserIndex(n,this.m_pathParentageIndex,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6),this.m_shape.movePath(this.m_geometry,this.m_shape.getNextPath(s),n),s=n}}e.length=0,t=this.m_shape.getNextPath(s)}else t=this.m_shape.getNextPath(t);this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex)}fixRingOrientationImplMp2sp_(){const e=this.m_shape.createPathUserIndex();let t=0;const s=[];for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;)if(this.progress_(),3===this.m_shape.getPathUserIndex(n,this.m_pathOrientationIndex)){this.m_shape.setExterior(n,!0),this.m_shape.setPathUserIndex(n,e,t),t++;for(let e=this.m_shape.getPathUserIndex(n,this.m_pathParentageIndex);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const t=this.m_shape.getPathUserIndex(e,this.m_pathParentageIndex);s.push(e),this.m_shape.setExterior(e,!1),this.m_shape.setPathUserIndex(e,this.m_pathParentageIndex,n),e=t}let r=n,i=s.length,o=t;for(let t=this.m_shape.getNextPath(n);i>0&&t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=this.m_shape.getNextPath(t),--i){if(this.m_shape.getPathUserIndex(t,this.m_pathParentageIndex)!==n){r=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;break}r=t,this.m_shape.setPathUserIndex(t,e,-o),o++}if(0!==i){r=n,o=t;for(let t=0,n=s.length;t<n;t++){const n=s[t];this.m_shape.setPathUserIndex(n,e,-o),o++,this.m_shape.setPathUserIndex(n,this.m_pathParentageIndex,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6)}r=n}t=o,s.length=0,n=this.m_shape.getNextPath(r)}else n=this.m_shape.getNextPath(n);return this.m_shape.removePathUserIndex(this.m_pathOrientationIndex),this.m_shape.removePathUserIndex(this.m_pathParentageIndex),this.m_shape.removePathUserIndex(this.m_pathParentsIndex),e}}function er(e,t,s,n,r,i){const o=new tr(i);return o.m_shape=e,o.m_geometry=t,o.m_knownSimpleResult=s,o.m_bFixSelfTangency=n,o.m_polylineDegeneracies=r,o.m_bHasSegmentParentage=e.hasSegmentParentage(),o.m_bHasSegments=e.hasCurves(),o.simplify_()}class tr{constructor(e){this.m_shape=null,this.m_geometry=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_sortedVertices=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N,this.m_bunchEdgeEndPoints=[],this.m_bunchEdgeCenterPoints=[],this.m_bunchEdgeIndices=[],this.m_sorterSegmentBuffer1=null,this.m_sorterSegmentBuffer2=null,this.m_knownSimpleResult=-1,this.m_sortedVerticesListIndex=-1,this.m_polylineDegeneracies=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=-1,this.m_progressCounter=0,this.m_bFixSelfTangency=!1,this.m_bHasSegmentParentage=!1,this.m_bHasSegments=!1,this.m_progressTracker=e}compareAngles_(e,t){return this.m_bHasSegments?this.compareAnglesCurves_(e,t):this.compareAnglesLines_(e,t)}compareAnglesLines_(e,t){const s=this.m_bunchEdgeEndPoints[e],n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_shape.queryXY(s,n);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=this.m_bunchEdgeEndPoints[t];if(this.m_shape.queryXY(i,r),n.equals(r))return 0;const o=this.m_bunchEdgeCenterPoints[e],a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_shape.queryXY(o,a);const h=this.m_bunchEdgeCenterPoints[t],m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_shape.queryXY(h,m);const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;l.setSub(n,a);const g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;g.setSub(r,m),(l.isZero()||g.isZero())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.w)("");return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.compareVectors(l,g)}compareAnglesCurves_(e,t){const s=this.m_bunchEdgeEndPoints[e],n=this.m_bunchEdgeEndPoints[t],r=this.m_bunchEdgeCenterPoints[e],i=this.m_bunchEdgeCenterPoints[t],o=this.m_shape.getNextVertex(r)===s,a=this.m_shape.getNextVertex(i)===n,h=o?this.m_shape.isCurve(r):this.m_shape.isCurve(s),m=a?this.m_shape.isCurve(i):this.m_shape.isCurve(n);if(!h&&!m)return this.compareAnglesLines_(e,t);this.m_sorterSegmentBuffer1||(this.m_sorterSegmentBuffer1=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S),this.m_sorterSegmentBuffer2||(this.m_sorterSegmentBuffer2=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S),o?this.m_shape.querySegment(r,this.m_sorterSegmentBuffer1,!1,!0):(this.m_shape.querySegment(s,this.m_sorterSegmentBuffer1,!1,!0),this.m_sorterSegmentBuffer1.get().reverse()),a?this.m_shape.querySegment(i,this.m_sorterSegmentBuffer2,!1,!0):(this.m_shape.querySegment(n,this.m_sorterSegmentBuffer2,!1,!0),this.m_sorterSegmentBuffer2.get().reverse());return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.R)(this.m_sorterSegmentBuffer1.get(),this.m_sorterSegmentBuffer2.get())}beforeRemoveVertex_(e,t){const s=this.m_shape.getUserIndex(e,this.m_userIndexSortedIndexToVertex);if(this.m_nextVertexToProcess===s&&(this.m_nextVertexToProcess=this.m_sortedVertices.getNext(this.m_nextVertexToProcess)),this.m_firstCoincidentVertex===s&&(this.m_firstCoincidentVertex=this.m_sortedVertices.getNext(this.m_firstCoincidentVertex)),this.m_sortedVertices.deleteElement(this.m_sortedVerticesListIndex,s),this.removeAngleSortInfo_(e),t){const t=this.m_shape.getPathFromVertex(e);if(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(this.m_shape.getFirstVertex(t)===e){const s=this.m_shape.getNextVertex(e);if(s!==e){if(this.m_shape.getPathFromVertex(s)===t)return void this.m_shape.setFirstVertex(t,s);{const s=this.m_shape.getPrevVertex(e);if(s!==e){if(this.m_shape.getPathFromVertex(s)===t)return void this.m_shape.setFirstVertex(t,s)}}}this.m_shape.setFirstVertex(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),this.m_shape.setLastVertex(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}}}}processBunch_(){let e=!1;const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0);for(;;){this.m_bunchEdgeEndPoints.length=0,this.m_bunchEdgeCenterPoints.length=0,this.m_bunchEdgeIndices.length=0;let s=this.m_firstCoincidentVertex,n=0,r=!0;for(;s!==this.m_nextVertexToProcess;){const e=this.m_sortedVertices.getData(s);r&&(this.m_shape.queryXY(e,t),r=!1);const i=this.m_shape.getPrevVertex(e),o=this.m_shape.getNextVertex(e);this.m_shape.getUserIndex(i,this.m_userIndexSortedAngleIndexToVertex)!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6&&(this.m_bunchEdgeEndPoints.push(i),this.m_shape.setUserIndex(i,this.m_userIndexSortedAngleIndexToVertex,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6),this.m_bunchEdgeCenterPoints.push(e),this.m_bunchEdgeIndices.push(n++));this.m_shape.getUserIndex(o,this.m_userIndexSortedAngleIndexToVertex)!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6&&(this.m_bunchEdgeEndPoints.push(o),this.m_shape.setUserIndex(o,this.m_userIndexSortedAngleIndexToVertex,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a6),this.m_bunchEdgeCenterPoints.push(e),this.m_bunchEdgeIndices.push(n++)),s=this.m_sortedVertices.getNext(s)}if(this.m_bunchEdgeEndPoints.length<2){1===this.m_bunchEdgeEndPoints.length&&this.m_shape.setUserIndex(this.m_bunchEdgeEndPoints[0],this.m_userIndexSortedAngleIndexToVertex,-1);break}this.m_bunchEdgeIndices.sort(((e,t)=>this.compareAngles_(e,t)));for(let e=0,t=this.m_bunchEdgeIndices.length;e<t;e++){const t=this.m_bunchEdgeIndices[e],s=this.m_bunchEdgeEndPoints[t];this.m_shape.setUserIndex(s,this.m_userIndexSortedAngleIndexToVertex,e)}const i=this.processCrossOvers_(t);for(let e=0,t=this.m_bunchEdgeIndices.length;e<t;e++){const t=this.m_bunchEdgeIndices[e];if(-1===t)continue;const s=this.m_bunchEdgeEndPoints[t];this.m_shape.setUserIndex(s,this.m_userIndexSortedAngleIndexToVertex,-1)}if(!i)break;e=!0}return e}processCrossOvers_(e){let t=!1,s=!0;for(;s;){s=!1;let n=0;-1===this.m_bunchEdgeIndices[n]&&(n=this.getNextEdgeIndex_(n));let r=this.getNextEdgeIndex_(n);for(let i=0,o=this.m_bunchEdgeIndices.length;i<o&&-1!==n&&-1!==r&&n!==r;i++){const i=this.m_bunchEdgeIndices[n],o=this.m_bunchEdgeIndices[r],a=this.m_bunchEdgeEndPoints[i],h=this.m_bunchEdgeEndPoints[o];let m=this.m_shape.getNextVertex(a),l=!1;this.m_shape.isEqualXYPoint2D(m,e)||(m=this.m_shape.getPrevVertex(a),l=!0);let g=this.m_shape.getNextVertex(h),u=!1;this.m_shape.isEqualXYPoint2D(g,e)||(g=this.m_shape.getPrevVertex(h),u=!0);const c=l?this.m_shape.getPrevVertex(m):this.m_shape.getNextVertex(m),_=u?this.m_shape.getPrevVertex(g):this.m_shape.getNextVertex(g);let d=!1;(this.removeSpike_(m)||this.removeSpike_(g)||this.removeSpike_(a)||this.removeSpike_(h)||this.removeSpike_(c)||this.removeSpike_(_))&&(d=!0),m!==g&&(!d&&this.m_shape.isEqualXY(a,h)&&(d=this.resolveOverlap_(l,u,m,a,g,h)),!d&&this.m_shape.isEqualXY(c,_)&&(d=this.resolveOverlap_(!l,!u,m,c,g,_)),!d&&this.m_shape.isEqualXY(a,_)&&(d=this.resolveOverlap_(l,!u,m,a,g,_)),!d&&this.m_shape.isEqualXY(c,h)&&(d=this.resolveOverlap_(!l,u,m,c,g,h))),d&&(t=!0),s||=d,n=d?this.getNextEdgeIndex_(n):r,r=this.getNextEdgeIndex_(n)}}if(!t){let s=0;-1===this.m_bunchEdgeIndices[s]&&(s=this.getNextEdgeIndex_(s));let n=this.getNextEdgeIndex_(s);for(let r=0,i=this.m_bunchEdgeIndices.length;r<i&&-1!==s&&-1!==n&&s!==n;r++){const r=this.m_bunchEdgeIndices[s],i=this.m_bunchEdgeIndices[n],o=this.m_bunchEdgeEndPoints[r],a=this.m_bunchEdgeEndPoints[i];let h=this.m_shape.getNextVertex(o);this.m_shape.isEqualXYPoint2D(h,e)||(h=this.m_shape.getPrevVertex(o));let m=this.m_shape.getNextVertex(a);this.m_shape.isEqualXYPoint2D(m,e)||(m=this.m_shape.getPrevVertex(a));const l=this.getDirection_(h,o),g=this.getDirection_(m,a),u=l?this.m_shape.getPrevVertex(h):this.m_shape.getNextVertex(h),c=g?this.m_shape.getPrevVertex(m):this.m_shape.getNextVertex(m),_=this.detectAndResolveCrossOver_(l,g,o,h,u,a,m,c);1!==_?0===_?(s=this.getNextEdgeIndex_(s),n=this.getNextEdgeIndex_(s)):(s=this.getPrevEdgeIndex_(s),n=this.getNextEdgeIndex_(s)):t=!0}}return t}simplify_(){if(this.m_shape.getGeometryType(this.m_geometry)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&1===this.m_shape.getFillRule(this.m_geometry)){new Ka(this.m_progressTracker).planarSimplifyNoCrackingAndCluster(this.m_bFixSelfTangency,this.m_shape,this.m_geometry,0)}let e=!1;this.m_userIndexSortedIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=-1,this.m_userIndexSortedAngleIndexToVertex=this.m_shape.createUserIndexUninitialized();const t=this.m_shape.getPointCount(this.m_geometry),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0);this.m_shape.dbgVerifyMonotone();for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_shape.getNextPath(n)){let e=this.m_shape.getFirstVertex(n);for(let t=0,r=this.m_shape.getPathSize(n);t<r;t++)this.m_shape.setUserIndex(e,this.m_userIndexSortedAngleIndexToVertex,-1),s.add(e),e=this.m_shape.getNextVertex(e)}this.m_shape.sortVerticesSimpleByY(s,0,t),this.progress_(!0),this.m_userIndexSortedIndexToVertex=this.m_shape.createUserIndexUninitialized(),this.m_sortedVertices.reserveNodes(t),this.m_sortedVerticesListIndex=this.m_sortedVertices.createList(0);for(let n=0;n<t;n++){const e=s.read(n),t=this.m_sortedVertices.addElement(this.m_sortedVerticesListIndex,e);this.m_shape.setUserIndex(e,this.m_userIndexSortedIndexToVertex,t)}this.m_nextVertexToProcess=-1,this.cleanupSpikes_()&&(e=!0);let r=0,o=!1;do{o=!1,this.m_nextVertexToProcess=-1,this.m_firstCoincidentVertex=this.m_sortedVertices.getFirst(this.m_sortedVerticesListIndex);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0);this.m_firstCoincidentVertex!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(this.m_firstCoincidentVertex),t);let s=0,n=this.m_firstCoincidentVertex;for(;n!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N.st_nullNode()&&(n=this.m_sortedVertices.getNext(n),n!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N.st_nullNode());){this.progress_();const e=this.m_sortedVertices.getData(n),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();if(this.m_shape.queryXY(e,r),t.equals(r))s++;else{if(s>0){this.m_nextVertexToProcess=n;const e=this.processBunch_();n=this.m_nextVertexToProcess,n!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N.st_nullNode()&&this.m_shape.queryXY(this.m_sortedVertices.getData(n),r),e&&(o=!0)}t.setCoordsPoint2D(r),this.m_firstCoincidentVertex=n,s=0}}if(this.m_nextVertexToProcess=-1,s>0){this.processBunch_()&&(o=!0)}r++>10&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),o&&this.fixOrphanVertices_(),this.cleanupSpikes_()&&(o=!0),e||=o}while(o);return this.m_shape.dbgVerifyMonotone(),this.m_shape.dbgVerifyCurves(),this.m_shape.removeUserIndex(this.m_userIndexSortedIndexToVertex),this.m_shape.removeUserIndex(this.m_userIndexSortedAngleIndexToVertex),e=jn(this.m_shape,this.m_geometry,this.m_sortedVertices,this.m_bFixSelfTangency,this.m_progressTracker)||e,this.m_shape.dbgVerifyCurves(),e}getDirection_(e,t){return this.m_shape.getNextVertex(t)!==e}detectAndResolveCrossOver_(e,t,s,n,r,i,o,a){if(n===o)return this.removeAngleSortInfo_(s),this.removeAngleSortInfo_(i),-1;const h=this.m_shape.getUserIndex(s,this.m_userIndexSortedAngleIndexToVertex),m=this.m_shape.getUserIndex(r,this.m_userIndexSortedAngleIndexToVertex),l=this.m_shape.getUserIndex(i,this.m_userIndexSortedAngleIndexToVertex),g=this.m_shape.getUserIndex(a,this.m_userIndexSortedAngleIndexToVertex),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(8,Number.NaN),c=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,Number.NaN);u[0]=0,c[0]=h,u[1]=0,c[1]=m,u[2]=1,c[2]=l,u[3]=1,c[3]=g;for(let d=1;d<4;d++){const e=c[d],t=u[d];let s=d-1;for(;s>=0&&c[s]>e;)c[s+1]=c[s],u[s+1]=u[s],s--;c[s+1]=e,u[s+1]=t}let _=0;if(u[0]&&(_|=1),u[1]&&(_|=2),u[2]&&(_|=4),u[3]&&(_|=8),5!==_&&10!==_)return 0;if(e!==t&&(a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(i,i=a)),e)this.m_shape.setNextVertex(a,n),this.m_shape.setPrevVertex(n,a),this.m_shape.setNextVertex(r,o),this.m_shape.setPrevVertex(o,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(o,!0));else{if(this.m_shape.setPrevVertex(a,n),this.m_shape.setNextVertex(n,a),this.m_shape.setPrevVertex(r,o),this.m_shape.setNextVertex(o,r),this.m_bHasSegmentParentage){const e=this.m_shape.getSegmentParentage(n),t=this.m_shape.getSegmentParentage(o);this.m_shape.setSegmentParentageAndBreak(n,t,!0),this.m_shape.setSegmentParentageAndBreak(o,e,!0)}if(this.m_bHasSegments){const e=this.m_shape.getVertexIndex(n),t=this.m_shape.getVertexIndex(o),s=this.m_shape.getSegmentFromIndex(e);this.m_shape.setSegmentToIndex(e,null);const r=this.m_shape.getSegmentFromIndex(t);this.m_shape.setSegmentToIndex(t,null),this.m_shape.setSegmentToIndex(e,r),this.m_shape.setSegmentToIndex(t,s)}}return 1}resolveOverlap_(e,t,s,n,r,i){return this.resolveOverlapOddEven_(e,t,s,n,r,i)}resolveOverlapOddEven_(e,t,s,n,r,i){if(e!==t){e||(r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(s,s=r),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(n,n=i));const t=this.m_shape.getNextVertex(r),o=this.m_shape.getNextVertex(s);if(this.m_shape.setNextVertex(s,t),this.m_shape.setPrevVertex(t,s),this.m_shape.setNextVertex(r,o),this.m_shape.setPrevVertex(o,r),this.m_bHasSegments){const e=this.m_shape.getVertexIndex(s),t=this.m_shape.getVertexIndex(r),n=this.m_shape.getSegmentFromIndex(e);this.m_shape.setSegmentToIndex(e,null);const i=this.m_shape.getSegmentFromIndex(t);this.m_shape.setSegmentToIndex(t,null),this.m_shape.setSegmentToIndex(e,i),this.m_shape.setSegmentToIndex(t,n)}if(this.m_bHasSegmentParentage){const e=this.m_shape.getSegmentParentage(s),t=this.m_shape.getSegmentParentage(r);this.m_shape.setSegmentParentageAndBreak(s,t,!0),this.m_shape.setSegmentParentageAndBreak(r,e,!0),this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(i,!0)}this.removeSpike_(r)}else{const o=e?s:n,a=t?r:i,h=e?n:s,m=t?i:r;let l=null;if(this.m_bHasSegments){const e=this.m_shape.getVertexIndex(m);l=this.m_shape.getSegmentFromIndex(e),this.m_shape.setSegmentToIndex(e,null);const t=this.m_shape.getVertexIndex(a);this.m_shape.setSegmentToIndex(t,null);const s=this.m_shape.getVertexIndex(o);this.m_shape.setSegmentToIndex(s,null)}let g=-1;this.m_bHasSegmentParentage&&(g=this.m_shape.getSegmentParentage(m));let u=!1;this.m_shape.setNextVertex(o,a),this.m_shape.setNextVertex(a,o),this.m_shape.setPrevVertex(h,m),this.m_shape.setPrevVertex(m,h);let c=m;for(;c!==a;){const e=this.m_shape.getPrevVertex(c),t=this.m_shape.getNextVertex(c);if(this.m_shape.setPrevVertex(c,t),this.m_shape.setNextVertex(c,e),u||=c===o,this.m_bHasSegments&&c!==o){const e=this.m_shape.getVertexIndex(t),s=l;l=this.m_shape.getSegmentFromIndex(e),null!==s&&s.reverse(),this.m_shape.setSegmentToIndex(e,s)}if(this.m_bHasSegmentParentage){const e=this.m_shape.getSegmentParentage(t);this.m_shape.setSegmentParentagePreserveBreak(t,g),g=e}c=t}let _=null;if(!u){const e=this.m_shape.getPrevVertex(a),t=this.m_shape.getNextVertex(a);if(this.m_shape.setPrevVertex(a,t),this.m_shape.setNextVertex(a,e),this.m_bHasSegments){const e=this.m_shape.getVertexIndex(a);_=this.m_shape.getSegmentFromIndex(e),this.m_shape.setSegmentToIndex(e,null)}}let d=-1,p=-1;if(this.m_bHasSegmentParentage&&(d=u?this.m_shape.getSegmentParentage(o):this.m_shape.getSegmentParentage(a),p=this.m_shape.getSegmentParentage(h)),this.transferVertexData_(a,o),this.beforeRemoveVertex_(a,!0),this.m_shape.removeVertexInternal(a,!0),this.removeAngleSortInfo_(o),this.transferVertexData_(m,h),this.beforeRemoveVertex_(m,!0),this.m_shape.removeVertexInternal(m,!0),this.removeAngleSortInfo_(h),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageAndBreak(o,d,!0),this.m_shape.setSegmentParentageAndBreak(h,p,!0)),_){const e=this.m_shape.getVertexIndex(o);this.m_shape.setSegmentToIndex(e,_)}}return!0}cleanupSpikes_(){let e=!1;for(let t=this.m_shape.getFirstPath(this.m_geometry);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const s=this.m_shape.getNextPath(t);let n=this.m_shape.getFirstVertex(t);for(let r=0,i=this.m_shape.getPathSize(t);r<i&&i>1;){this.progress_();const{v:s,bModified:o}=this.checkAndCleanupSpike_(t,n);if(s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;o?(e=!0,n=s,r=0,i=this.m_shape.getPathSize(t)):(n=s,r++)}t=s}return e}checkAndCleanupSpike_(e,t){const s={v:_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,bModified:!1};let n=this.m_shape.getPrevVertex(t),r=this.m_shape.getNextVertex(t),i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,o=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;this.m_shape.isEqualXY(n,r)&&(i=n,o=r,r!==t);)n=this.m_shape.getPrevVertex(n),r=this.m_shape.getNextVertex(r);if(i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return s.v=r,s;s.bModified=!0;for(let a=this.m_shape.getNextVertex(i);this.beforeRemoveVertex_(a,!1),a!==o;a=this.m_shape.getNextVertex(a));if(i===t)return this.m_polylineDegeneracies!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?this.m_shape.movePath(this.m_polylineDegeneracies,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e):this.m_shape.removePath(e),s.v=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s;{const e=this.m_shape.peelALoopIntoAPath(i,o);this.m_polylineDegeneracies!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?this.m_shape.movePath(this.m_polylineDegeneracies,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e):this.m_shape.removePath(e)}return s.v=i,s}removeSpike_(e){let t=this.m_shape.getPrevVertex(e),s=this.m_shape.getNextVertex(e),n=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;this.m_shape.isEqualXY(t,s)&&(n=t,r=s,s!==e);)t=this.m_shape.getPrevVertex(t),s=this.m_shape.getNextVertex(s);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return!1;if(this.m_shape.peelALoop(n,r),this.m_bHasSegmentParentage&&(this.m_shape.setSegmentParentageBreakVertex(n,!0),this.m_shape.setSegmentParentageBreakVertex(r,!0)),this.removeAngleSortInfo_(n),this.m_polylineDegeneracies===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)for(let i=this.m_shape.getNextVertex(r);;){const e=this.m_shape.getNextVertex(i);if(this.removeAngleSortInfo_(i),this.beforeRemoveVertex_(i,!0),this.m_shape.setSegmentToIndex(this.m_shape.getVertexIndex(i),null),this.m_shape.removeVertexInternal(i,!1),i===r)break;i=e}else{for(let t=r;;){const e=this.m_shape.getNextVertex(t);if(this.removeAngleSortInfo_(t),this.beforeRemoveVertex_(t,!1),t=e,t===r)break}const e=[!1];this.m_shape.insertClosedPath(this.m_polylineDegeneracies,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r,r,e)}return!0}fixOrphanVertices_(){let e=0;for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());-1!==n;n=this.m_sortedVertices.getNext(n)){const e=this.m_sortedVertices.getData(n);this.m_shape.setPathToVertex(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}let t=0;for(let n=this.m_shape.getFirstPath(this.m_geometry);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const s=this.m_shape.getFirstVertex(n);if(s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||this.m_shape.getPathFromVertex(s)!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const e=n;n=this.m_shape.getNextPath(n),this.m_shape.removePathOnly(e);continue}this.m_shape.setPathToVertex(s,n);let r=1;for(let e=this.m_shape.getNextVertex(s);e!==s;e=this.m_shape.getNextVertex(e))this.m_shape.setPathToVertex(e,n),r++;this.m_shape.setRingAreaValid(n,!1),this.m_shape.setPathSize(n,r),this.m_shape.setLastVertex(n,this.m_shape.getPrevVertex(s)),t+=r,e++,n=this.m_shape.getNextPath(n)}for(let n=this.m_sortedVertices.getFirst(this.m_sortedVertices.getFirstList());-1!==n;n=this.m_sortedVertices.getNext(n)){const s=this.m_sortedVertices.getData(n);if(this.m_shape.getPathFromVertex(s)!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;const r=[!1],i=this.m_shape.insertClosedPath(this.m_geometry,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s,s,r);t+=this.m_shape.getPathSize(i),e++}this.m_shape.setGeometryPathCount(this.m_geometry,e),this.m_shape.setGeometryVertexCount(this.m_geometry,t);let s=0;for(let n=this.m_shape.getFirstGeometry();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_shape.getNextGeometry(n))s+=this.m_shape.getPointCount(n);this.m_shape.setTotalPointCount(s)}getNextEdgeIndex_(e){if(-1===e)return-1;for(let t=0,s=this.m_bunchEdgeIndices.length-1;t<s;t++)if(e=(e+1)%this.m_bunchEdgeIndices.length,-1!==this.m_bunchEdgeIndices[e])return e;return-1}getPrevEdgeIndex_(e){if(-1===e)return-1;for(let t=0,s=this.m_bunchEdgeIndices.length-1;t<s;t++)if(e=(this.m_bunchEdgeIndices.length+e-1)%this.m_bunchEdgeIndices.length,-1!==this.m_bunchEdgeIndices[e])return e;return-1}transferVertexData_(e,t){const s=this.m_shape.getUserIndex(t,this.m_userIndexSortedIndexToVertex),n=this.m_shape.getUserIndex(t,this.m_userIndexSortedAngleIndexToVertex);this.m_shape.transferAllDataToTheVertex(e,t),this.m_shape.setUserIndex(t,this.m_userIndexSortedIndexToVertex,s),this.m_shape.setUserIndex(t,this.m_userIndexSortedAngleIndexToVertex,n)}removeAngleSortInfo_(e){const t=this.m_shape.getUserIndex(e,this.m_userIndexSortedAngleIndexToVertex);-1!==t&&(this.m_bunchEdgeIndices[t]=-1,this.m_shape.setUserIndex(e,this.m_userIndexSortedAngleIndexToVertex,-1))}progress_(e=!1){}}function sr(s,r,i,o,a,h=!0){switch(ir(o)){case 0:break;case 1:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("relation string length has to be 9 characters");break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("relation string")}if(h){const e=xr(o,s.getDimension(),r.getDimension());if(0!==e)return kr(s,r,i,e,a)}let m=0;if("number"==typeof i)m=i;else{const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(t);const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();r.queryEnvelope(n);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();o.setCoords({env2D:t}),o.mergeEnvelope2D(n),m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(i,o,!1)}const l=Tr(s,m),g=Tr(r,m);if(l.isEmpty()||g.isEmpty())return fr(l,g,o);const u=l.getGeometryType(),c=g.getGeometryType();let _=!1;switch(u){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:switch(c){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=or(l,g,m,o,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=ar(l,g,m,o,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=ur(l,g,m,o);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=hr(l,g,m,o,a)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:switch(c){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=ar(g,l,m,Gr(o),a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=mr(l,g,m,o,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=cr(l,g,m,o,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=lr(l,g,m,o,a)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:switch(c){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=ur(g,l,m,Gr(o));break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=cr(g,l,m,Gr(o),a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=dr(l,g,m,o);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=_r(g,l,m,Gr(o))}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:switch(c){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=hr(g,l,m,Gr(o),a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=lr(g,l,m,Gr(o),a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=gr(l,g,m,o,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=_r(l,g,m,o)}break;default:_=!1}return _}function nr(t,s,n,r){const i=new vr;i.resetMatrix_(),i.setPredicates_("T*****F**"),i.setAreaAreaPredicates_();const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),s.queryEnvelope(a);let h=!1;if(qr(o,a,n)&&(i.areaAreaDisjointPredicates_(t,s),h=!0),h||Br(t,s),h){return pr(i.m_matrix,i.m_scl)}let m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,l=m.addGeometry(t),g=m.addGeometry(s),u=null,c=0;if(t.hasNonLinearSegments()||s.hasNonLinearSegments()){u=new fa;const e=_a(n,m.getEnvelope2D(r));c=pa(e,0),aa(m,e,n,12e3,u,null,r)}ya(m,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0).add(c),r,!1,!1);const _=m.getGeometry(g).getBoundary();if(m.filterClosePoints(0,!0,!0,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),er(m,l,-1,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r),0===m.getPointCount(l))return!1;er(m,g,-1,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r),i.setEditShape_(m,r);const d=0===m.getPointCount(g);if(!d){i.computeMatrixTopoGraphHalfEdges_(l,g),i.m_topoGraph.removeShape();const e=pr(i.m_matrix,i.m_scl);if(!e)return e}const p=m.getGeometry(l);m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,l=m.addGeometry(p),g=m.addGeometry(_),i.setEditShape_(m,r),i.m_predicateCount=0,i.resetMatrix_(),i.setPredicates_(d?"T*****F**":"******F**"),i.setAreaLinePredicates_(),i.computeMatrixTopoGraphHalfEdges_(l,g),i.m_topoGraph.removeShape();return pr(i.m_matrix,i.m_scl)}function rr(t,s,n,r){const i=new vr;i.resetMatrix_(),i.setPredicates_("T*****F**"),i.setAreaLinePredicates_();const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),s.queryEnvelope(a);let h=!1;if(qr(o,a,n)&&(i.areaLineDisjointPredicates_(t,s),h=!0),h||Br(t,s),h){return pr(i.m_matrix,i.m_scl)}const m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,l=m.addGeometry(t),g=m.addGeometry(s);if(i.setEditShapeCrackAndCluster_(m,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),r),0===m.getPointCount(l))return!1;i.computeMatrixTopoGraphHalfEdges_(l,g),i.m_topoGraph.removeShape();return pr(i.m_matrix,i.m_scl)}function ir(e){if(9!==e.length)return 1;for(let t=0;t<9;t++){const s=e[t];if("*"!==s&&"T"!==s&&"F"!==s&&"0"!==s&&"1"!==s&&"2"!==s)return 2}return 0}function or(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setAreaAreaPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.areaAreaDisjointPredicates_(t,s),m=!0),m||Br(t,s),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.computeMatrixTopoGraphHalfEdges_(r,a),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function ar(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setAreaLinePredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.areaLineDisjointPredicates_(t,s),m=!0),m||Br(t,s),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.m_clusterIndexB=o.m_topoGraph.createUserIndexForClusters(),wr(a,o.m_topoGraph,o.m_clusterIndexB),o.computeMatrixTopoGraphHalfEdges_(r,a),o.m_topoGraph.deleteUserIndexForClusters(o.m_clusterIndexB),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function hr(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setAreaPointPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.areaPointDisjointPredicates_(t),m=!0),m||Br(t,s),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.computeMatrixTopoGraphClusters_(r,a),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function mr(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setLineLinePredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.lineLineDisjointPredicates_(t,s),m=!0),m||Br(t,s),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.m_clusterIndexA=o.m_topoGraph.createUserIndexForClusters(),o.m_clusterIndexB=o.m_topoGraph.createUserIndexForClusters(),wr(r,o.m_topoGraph,o.m_clusterIndexA),wr(a,o.m_topoGraph,o.m_clusterIndexB),o.computeMatrixTopoGraphHalfEdges_(r,a),o.m_topoGraph.deleteUserIndexForClusters(o.m_clusterIndexA),o.m_topoGraph.deleteUserIndexForClusters(o.m_clusterIndexB),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function lr(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setLinePointPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.linePointDisjointPredicates_(t),m=!0),m||Br(t,s),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.m_clusterIndexA=o.m_topoGraph.createUserIndexForClusters(),wr(r,o.m_topoGraph,o.m_clusterIndexA),o.computeMatrixTopoGraphClusters_(r,a),o.m_topoGraph.deleteUserIndexForClusters(o.m_clusterIndexA),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function gr(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setPointPointPredicates_();const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryEnvelope(a),s.queryEnvelope(h);let m=!1;if(qr(a,h,n)&&(o.pointPointDisjointPredicates_(),m=!0),!m){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,r=e.addGeometry(t),a=e.addGeometry(s);o.setEditShapeCrackAndCluster_(e,new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(n,0),i),o.computeMatrixTopoGraphClusters_(r,a),o.m_topoGraph.removeShape()}return pr(o.m_matrix,o.m_scl)}function ur(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setAreaPointPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a);const h=s.getXY();let m=!1;if(Or(h,a,n)&&(o.areaPointDisjointPredicates_(t),m=!0),!m){const s=Lo(t,h,n);if(1===s)o.m_matrix[0]=0,o.m_matrix[2]=2,o.m_matrix[3]=-1,o.m_matrix[5]=1,o.m_matrix[6]=-1;else if(2===s){o.m_matrix[6]=-1;if(0!==t.calculateArea2D())o.m_matrix[0]=-1,o.m_matrix[3]=0,o.m_matrix[2]=2,o.m_matrix[5]=1;else{o.m_matrix[0]=0,o.m_matrix[3]=-1,o.m_matrix[5]=-1;const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(s),o.m_matrix[2]=s.height()||s.width()?1:-1}}else o.areaPointDisjointPredicates_(t)}return pr(o.m_matrix,r)}function cr(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setLinePointPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a);let h=!1;if(Or(s.getXY(),a,n)&&(o.linePointDisjointPredicates_(t),h=!0),!h){let e=null,r=!1,a=!1;if(o.m_performPredicates[0]||o.m_performPredicates[6]){!kr(t,s,n,4,i)?(o.m_performPredicates[0]&&(e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.c)(t),a=!kr(e,s,n,4,i),r=!0,o.m_matrix[0]=a?-1:0),o.m_matrix[6]=-1):(o.m_matrix[0]=-1,o.m_matrix[6]=0)}if(o.m_performPredicates[3]&&(null!==e&&e.isEmpty()?o.m_matrix[3]=-1:(r||(null==e&&(e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.c)(t)),a=!kr(e,s,n,4,i),r=!0),o.m_matrix[3]=a?0:-1)),o.m_performPredicates[5])if(null!==e&&e.isEmpty())o.m_matrix[5]=-1;else if(r&&!a)o.m_matrix[5]=0;else{null===e&&(e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.c)(t));const r=kr(e,s,n,3,i);o.m_matrix[5]=r?-1:0}if(o.m_performPredicates[2]){if(0!==t.calculateLength2D())o.m_matrix[2]=1;else{const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:t.getDescription()});e.addPoints(t,0,t.getPointCount());const r=kr(e,s,n,3,i);o.m_matrix[2]=r?-1:0}}}return pr(o.m_matrix,o.m_scl)}function _r(t,s,n,r,i){const o=new vr;o.resetMatrix_(),o.setPredicates_(r),o.setPointPointPredicates_();const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a);const h=s.getXY(),m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let l=!1;if(Or(h,a,n)&&(o.pointPointDisjointPredicates_(),l=!0),!l){let e=!1,s=!0;const r=n*n;for(let n=0;n<t.getPointCount()&&(t.queryXY(n,m),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(m,h)<=r?e=!0:s=!1,!e||s);n++);e?(o.m_matrix[0]=0,o.m_matrix[2]=s?-1:0,o.m_matrix[6]=-1):(o.m_matrix[0]=-1,o.m_matrix[2]=0,o.m_matrix[6]=0)}return pr(o.m_matrix,r)}function dr(e,t,s,n,r){const i=e.getXY(),o=t.getXY(),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,-1);_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(i,o)<=s*s?a[0]=0:(a[2]=0,a[6]=0),a[8]=2;return pr(a,n)}function pr(e,t){for(let s=0;s<9;s++)switch(t[s]){case"T":if(-1===e[s])return!1;break;case"F":if(-1!==e[s])return!1;break;case"0":if(0!==e[s])return!1;break;case"1":if(1!==e[s])return!1;break;case"2":if(2!==e[s])return!1}return!0}function fr(t,s,r){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,-1);if(t.isEmpty()&&s.isEmpty())return pr(i,r);let a,h=!1;t.isEmpty()?(a=s,h=!0):a=t,i[0]=-1,i[1]=-1,i[3]=-1,i[4]=-1,i[6]=-1,i[7]=-1,i[8]=2;const m=a.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(m))if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){if(0!==a.calculateArea2D())i[2]=2,i[5]=1;else{i[5]=-1;const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();a.queryEnvelope(t),i[2]=t.height()||t.width()?1:0}}else{const e=0!==a.calculateLength2D();i[2]=e?1:0,i[5]=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(a)?0:-1}else i[2]=0,i[5]=-1;return h&&Nr(i),pr(i,r)}function xr(e,t,s){return yr(e)?3:Pr(e)?4:Er(e,t,s)?8:Sr(e,t,s)?16:Ir(e)?64:Cr(e)?1:br(e,t,s)?32:0}function yr(e){return"T*F**FFF*"===e}function Pr(e){return"FF*FF****"===e}function Er(e,t,s){return(0!==t||0!==s)&&(2===t&&2===s?"F***T****"===e:(2===t||1===t)&&0===s&&"F**T*****"===e)}function Sr(e,t,s){return t>s?"T*****T**"===e:1===t&&1===s&&"0********"===e}function Cr(e){return"T*****FF*"===e}function Ir(e){return"T**FF*FF*"===e}function br(e,t,s){return t===s&&(1!==t?"T*T***T**"===e:"1*T***T**"===e)}function wr(e,t,s){const n=t.getGeometryID(e);for(let r=t.getFirstCluster();r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;r=t.getNextCluster(r)){if(0===(t.getClusterParentage(r)&n))continue;const e=t.getClusterHalfEdge(r);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){t.setClusterUserIndex(r,s,0);continue}let i=e,o=0;do{const e=i;0!==(t.getHalfEdgeParentage(e)&n)&&o++,i=t.getHalfEdgeNext(t.getHalfEdgeTwin(e))}while(i!==e);t.setClusterUserIndex(r,s,o)}}class vr{nullFunc(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("should not be called"),!1}constructor(){this.m_clusterIndexA=-1,this.m_clusterIndexB=-1,this.m_visitedIndex=-1,this.m_topoGraph=new tn,this.m_matrix=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,0),this.m_maxDim=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,0),this.m_performPredicates=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,!1),this.m_scl="",this.m_predicateCount=0,this.m_predicatesHalfEdge=this.nullFunc,this.m_predicatesCluster=this.nullFunc}resetMatrix_(){this.m_matrix.fill(-2),this.m_maxDim.fill(-2)}setPredicates_(e){this.m_scl=e;for(let t=0;t<9;t++)"*"!==this.m_scl[t]?(this.m_performPredicates[t]=!0,this.m_predicateCount++):this.m_performPredicates[t]=!1}setRemainingPredicatesToFalse_(){for(let e=0;e<9;e++)this.m_performPredicates[e]&&-2===this.m_matrix[e]&&(this.m_matrix[e]=-1,this.m_performPredicates[e]=!1)}isPredicateKnown_(e){return-2!==this.m_matrix[e]&&(-1===this.m_matrix[e]?(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):"T"!==this.m_scl[e]&&"F"!==this.m_scl[e]?!(this.m_matrix[e]<this.m_maxDim[e])&&(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0):(this.m_performPredicates[e]=!1,this.m_predicateCount--,!0))}setAreaAreaPredicates_(){this.m_predicatesHalfEdge=this.areaAreaPredicates_,this.m_maxDim[0]=2,this.m_maxDim[1]=1,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=1,this.m_maxDim[5]=1,this.m_maxDim[6]=2,this.m_maxDim[7]=1,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaLinePredicates_(){this.m_predicatesHalfEdge=this.areaLinePredicates_,this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=2,this.m_maxDim[3]=1,this.m_maxDim[4]=0,this.m_maxDim[5]=1,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLineLinePredicates_(){this.m_predicatesHalfEdge=this.lineLinePredicates_,this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=1,this.m_maxDim[1]=0,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=0,this.m_maxDim[5]=0,this.m_maxDim[6]=1,this.m_maxDim[7]=0,this.m_maxDim[8]=2,this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setAreaPointPredicates_(){this.m_predicatesCluster=this.areaPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=2,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setLinePointPredicates_(){this.m_predicatesCluster=this.linePointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=1,this.m_maxDim[3]=0,this.m_maxDim[4]=-1,this.m_maxDim[5]=0,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}setPointPointPredicates_(){this.m_predicatesCluster=this.pointPointPredicates_,this.m_maxDim[0]=0,this.m_maxDim[1]=-1,this.m_maxDim[2]=0,this.m_maxDim[3]=-1,this.m_maxDim[4]=-1,this.m_maxDim[5]=-1,this.m_maxDim[6]=0,this.m_maxDim[7]=-1,this.m_maxDim[8]=2,this.m_performPredicates[1]&&(this.m_matrix[1]=-1,this.m_performPredicates[1]=!1,this.m_predicateCount--),this.m_performPredicates[3]&&(this.m_matrix[3]=-1,this.m_performPredicates[3]=!1,this.m_predicateCount--),this.m_performPredicates[4]&&(this.m_matrix[4]=-1,this.m_performPredicates[4]=!1,this.m_predicateCount--),this.m_performPredicates[5]&&(this.m_matrix[5]=-1,this.m_performPredicates[5]=!1,this.m_predicateCount--),this.m_performPredicates[7]&&(this.m_matrix[7]=-1,this.m_performPredicates[7]=!1,this.m_predicateCount--),this.m_performPredicates[8]&&(this.m_matrix[8]=2,this.m_performPredicates[8]=!1,this.m_predicateCount--)}areaAreaDisjointPredicates_(e,t){this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5]),this.areaGeomContainsOrDisjointPredicates_(t,this.m_performPredicates[6]?6:-1,this.m_scl[6],this.m_performPredicates[7]?7:-1,this.m_scl[7])}areaGeomContainsOrDisjointPredicates_(t,s,n,r,i){const o=-1!==s,a=-1!==r;if(o||a){if(!("T"!==n&&"F"!==n&&o||"T"!==i&&"F"!==i&&a)||0!==t.calculateArea2D())o&&(this.m_matrix[s]=2),a&&(this.m_matrix[r]=1);else if(a&&(this.m_matrix[r]=-1),o){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(n),this.m_matrix[s]=n.height()||n.width()?1:0}}}areaAreaContainsPredicates_(e){this.m_matrix[2]=2,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_matrix[5]=1,this.m_matrix[6]=-1,this.m_matrix[7]=-1,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[0]?0:-1,this.m_scl[0],this.m_performPredicates[1]?1:-1,this.m_scl[1])}areaAreaWithinPredicates_(e){this.areaAreaContainsPredicates_(e),Nr(this.m_matrix)}areaLineDisjointPredicates_(e,t){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[6]){const e=this.m_scl[6],s="T"===e||"F"===e||0!==t.calculateLength2D();this.m_matrix[6]=s?1:0}if(this.m_performPredicates[7]){const e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(t);this.m_matrix[7]=e?0:-1}this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaLineContainsPredicates_(e,t){if(this.m_performPredicates[0]){const e=this.m_scl[0],s="T"===e||"F"===e||0!==t.calculateLength2D();this.m_matrix[0]=s?1:0}if(this.m_performPredicates[1]){const e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(t);this.m_matrix[1]=e?0:-1}this.m_matrix[2]=2,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_matrix[5]=1,this.m_matrix[6]=-1,this.m_matrix[7]=-1}areaPointDisjointPredicates_(e){this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_matrix[6]=0,this.areaGeomContainsOrDisjointPredicates_(e,this.m_performPredicates[2]?2:-1,this.m_scl[2],this.m_performPredicates[5]?5:-1,this.m_scl[5])}areaPointContainsPredicates_(e){this.m_matrix[0]=0,this.m_matrix[2]=2,this.m_matrix[3]=-1,this.m_matrix[5]=1,this.m_matrix[6]=-1}lineLineDisjointPredicates_(e,t){if(this.m_matrix[0]=-1,this.m_matrix[1]=-1,this.m_matrix[3]=-1,this.m_matrix[4]=-1,this.m_performPredicates[2]){const t=this.m_scl[2],s="T"===t||"F"===t||0!==e.calculateLength2D();this.m_matrix[2]=s?1:0}if(this.m_performPredicates[5]){const t=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(e);this.m_matrix[5]=t?0:-1}if(this.m_performPredicates[6]){const e=this.m_scl[6],s="T"===e||"F"===e||0!==t.calculateLength2D();this.m_matrix[6]=s?1:0}if(this.m_performPredicates[7]){const e=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(t);this.m_matrix[7]=e?0:-1}}linePointDisjointPredicates_(e){if(this.m_matrix[0]=-1,this.m_matrix[3]=-1,this.m_performPredicates[2]){const t=this.m_scl[2],s="T"===t||"F"===t||0!==e.calculateLength2D();this.m_matrix[2]=s?1:0}if(this.m_performPredicates[5]){const t=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.K)(e);this.m_matrix[5]=t?0:-1}this.m_matrix[6]=0}pointPointDisjointPredicates_(){this.m_matrix[0]=-1,this.m_matrix[2]=0,this.m_matrix[6]=0}areaAreaPredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorArea_(e,t,s);const r=this.isPredicateKnown_(0);n&&=r}if(this.m_performPredicates[1]){this.interiorAreaBoundaryArea_(e,t,1);const s=this.isPredicateKnown_(1);n&&=s}if(this.m_performPredicates[2]){this.interiorAreaExteriorArea_(e,t,s,2);const r=this.isPredicateKnown_(2);n&&=r}if(this.m_performPredicates[3]){this.interiorAreaBoundaryArea_(e,s,3);const t=this.isPredicateKnown_(3);n&&=t}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryArea_(e,t,s);const r=this.isPredicateKnown_(4);n&&=r}if(this.m_performPredicates[5]){this.boundaryAreaExteriorArea_(e,t,s,5);const r=this.isPredicateKnown_(5);n&&=r}if(this.m_performPredicates[6]){this.interiorAreaExteriorArea_(e,s,t,6);const r=this.isPredicateKnown_(6);n&&=r}if(this.m_performPredicates[7]){this.boundaryAreaExteriorArea_(e,s,t,7);const r=this.isPredicateKnown_(7);n&&=r}return n}areaLinePredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorLine_(e,t,s);const r=this.isPredicateKnown_(0);n&&=r}if(this.m_performPredicates[1]){this.interiorAreaBoundaryLine_(e,t,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(1);n&&=r}if(this.m_performPredicates[2]){this.interiorAreaExteriorLine_(e,t,s);const r=this.isPredicateKnown_(2);n&&=r}if(this.m_performPredicates[3]){this.boundaryAreaInteriorLine_(e,t,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(3);n&&=r}if(this.m_performPredicates[4]){this.boundaryAreaBoundaryLine_(e,t,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&=r}if(this.m_performPredicates[5]){this.boundaryAreaExteriorLine_(e,t,s);const r=this.isPredicateKnown_(5);n&&=r}if(this.m_performPredicates[6]){this.exteriorAreaInteriorLine_(e,t);const s=this.isPredicateKnown_(6);n&&=s}if(this.m_performPredicates[7]){this.exteriorAreaBoundaryLine_(e,t,s,this.m_clusterIndexB);const r=this.isPredicateKnown_(7);n&&=r}return n}lineLinePredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorLine_(e,t,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(0);n&&=r}if(this.m_performPredicates[1]){this.interiorLineBoundaryLine_(e,t,s,this.m_clusterIndexA,this.m_clusterIndexB,1);const r=this.isPredicateKnown_(1);n&&=r}if(this.m_performPredicates[2]){this.interiorLineExteriorLine_(e,t,s,2);const r=this.isPredicateKnown_(2);n&&=r}if(this.m_performPredicates[3]){this.interiorLineBoundaryLine_(e,s,t,this.m_clusterIndexB,this.m_clusterIndexA,3);const r=this.isPredicateKnown_(3);n&&=r}if(this.m_performPredicates[4]){this.boundaryLineBoundaryLine_(e,t,s,this.m_clusterIndexA,this.m_clusterIndexB);const r=this.isPredicateKnown_(4);n&&=r}if(this.m_performPredicates[5]){this.boundaryLineExteriorLine_(e,t,s,this.m_clusterIndexA,5);const r=this.isPredicateKnown_(5);n&&=r}if(this.m_performPredicates[6]){this.interiorLineExteriorLine_(e,s,t,6);const r=this.isPredicateKnown_(6);n&&=r}if(this.m_performPredicates[7]){this.boundaryLineExteriorLine_(e,s,t,this.m_clusterIndexB,7);const r=this.isPredicateKnown_(7);n&&=r}return n}areaPointPredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorAreaInteriorPoint_(e,t);const s=this.isPredicateKnown_(0);n&&=s}if(this.m_performPredicates[2]){this.interiorAreaExteriorPoint_(e,t);const s=this.isPredicateKnown_(2);n&&=s}if(this.m_performPredicates[3]){this.boundaryAreaInteriorPoint_(e,t,s);const r=this.isPredicateKnown_(3);n&&=r}if(this.m_performPredicates[5]){this.boundaryAreaExteriorPoint_(e,t);const s=this.isPredicateKnown_(5);n&&=s}if(this.m_performPredicates[6]){this.exteriorAreaInteriorPoint_(e,t);const s=this.isPredicateKnown_(6);n&&=s}return n}linePointPredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorLineInteriorPoint_(e,t,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(0);n&&=r}if(this.m_performPredicates[2]){this.interiorLineExteriorPoint_(e,t,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(2);n&&=r}if(this.m_performPredicates[3]){this.boundaryLineInteriorPoint_(e,t,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(3);n&&=r}if(this.m_performPredicates[5]){this.boundaryLineExteriorPoint_(e,t,s,this.m_clusterIndexA);const r=this.isPredicateKnown_(5);n&&=r}if(this.m_performPredicates[6]){this.exteriorLineInteriorPoint_(e,t,s);const r=this.isPredicateKnown_(6);n&&=r}return n}pointPointPredicates_(e,t,s){let n=!0;if(this.m_performPredicates[0]){this.interiorPointInteriorPoint_(e,t,s);const r=this.isPredicateKnown_(0);n&&=r}if(this.m_performPredicates[2]){this.interiorPointExteriorPoint_(e,t,s,2);const r=this.isPredicateKnown_(2);n&&=r}if(this.m_performPredicates[6]){this.interiorPointExteriorPoint_(e,s,t,6);const r=this.isPredicateKnown_(6);n&&=r}return n}interiorAreaInteriorArea_(e,t,s){if(2===this.m_matrix[0])return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e);0!==(n&t)&&0!==(n&s)&&(this.m_matrix[0]=2)}interiorAreaBoundaryArea_(e,t,s){if(1===this.m_matrix[s])return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));0!==(n&t)&&0!==(r&t)&&(this.m_matrix[s]=1)}interiorAreaExteriorArea_(e,t,s,n){if(2===this.m_matrix[n])return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e);0!==(r&t)&&0===(r&s)&&(this.m_matrix[n]=2)}boundaryAreaBoundaryArea_(e,t,s){if(1===this.m_matrix[4])return;const n=this.m_topoGraph.getHalfEdgeParentage(e);if(0===(n&t)||0===(n&s)){if(0!==this.m_matrix[4]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const n=this.m_topoGraph.getHalfEdgeTo(e),r=this.m_topoGraph.getClusterParentage(n);if(0!==(r&t)&&0!==(r&s))return void(this.m_matrix[4]=0)}}else this.m_matrix[4]=1}boundaryAreaExteriorArea_(e,t,s,n){if(1===this.m_matrix[n])return;const r=this.m_topoGraph.getHalfEdgeFaceParentage(e),i=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));0===(r&s)&&0===(i&s)&&(this.m_matrix[n]=1)}interiorAreaInteriorLine_(e,t,s){if(1===this.m_matrix[0])return;const n=this.m_topoGraph.getHalfEdgeFaceParentage(e),r=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));0!==(n&t)&&0!==(r&t)&&(this.m_matrix[0]=1)}interiorAreaBoundaryLine_(e,t,s,n){if(0!==this.m_matrix[1]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const r=this.m_topoGraph.getHalfEdgeTo(e),i=this.m_topoGraph.getClusterParentage(r);if(0===(i&t)){if(0!==(this.m_topoGraph.getHalfEdgeFaceParentage(e)&t)){const e=this.m_topoGraph.getClusterUserIndex(r,n);if(0!==(i&s)&&e%2!=0)return void(this.m_matrix[1]=0)}}}}interiorAreaExteriorLine_(e,t,s){if(2===this.m_matrix[2])return;0!==(this.m_topoGraph.getHalfEdgeParentage(e)&t)&&(this.m_matrix[2]=2)}boundaryAreaInteriorLine_(e,t,s,n){if(1===this.m_matrix[3])return;const r=this.m_topoGraph.getHalfEdgeParentage(e);if(0===(r&t)||0===(r&s)){if(0!==this.m_matrix[3]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const r=this.m_topoGraph.getHalfEdgeTo(e),i=this.m_topoGraph.getClusterParentage(r);if(0!==(i&t)){const e=this.m_topoGraph.getClusterUserIndex(r,n);if(0!==(i&s)&&e%2==0)return void(this.m_matrix[3]=0)}}}else this.m_matrix[3]=1}boundaryAreaBoundaryLine_(e,t,s,n){if(0!==this.m_matrix[4]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const r=this.m_topoGraph.getHalfEdgeTo(e),i=this.m_topoGraph.getClusterParentage(r);if(0!==(i&t)){const e=this.m_topoGraph.getClusterUserIndex(r,n);if(0!==(i&s)&&e%2!=0)return void(this.m_matrix[4]=0)}}}boundaryAreaExteriorLine_(e,t,s){if(1===this.m_matrix[5])return;const n=this.m_topoGraph.getHalfEdgeParentage(e);0!==(n&t)&&0===(n&s)&&(this.m_matrix[5]=1)}exteriorAreaInteriorLine_(e,t){if(1===this.m_matrix[6])return;const s=this.m_topoGraph.getHalfEdgeFaceParentage(e),n=this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e));0===(s&t)&&0===(n&t)&&(this.m_matrix[6]=1)}exteriorAreaBoundaryLine_(e,t,s,n){if(0!==this.m_matrix[7]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const r=this.m_topoGraph.getHalfEdgeTo(e),i=this.m_topoGraph.getClusterParentage(r);if(0===(i&t)){if(0===(this.m_topoGraph.getHalfEdgeFaceParentage(e)&t)){const e=this.m_topoGraph.getClusterUserIndex(r,n);if(0!==(i&s)&&e%2!=0)return void(this.m_matrix[7]=0)}}}}interiorLineInteriorLine_(e,t,s,n,r){if(1===this.m_matrix[0])return;const i=this.m_topoGraph.getHalfEdgeParentage(e);if(0===(i&t)||0===(i&s)){if(0!==this.m_matrix[0]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const i=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(i);if(0!==(o&t)&&0!==(o&s)){const e=this.m_topoGraph.getClusterUserIndex(i,n),t=this.m_topoGraph.getClusterUserIndex(i,r);if(e%2==0&&t%2==0)return void(this.m_matrix[0]=0)}}}else this.m_matrix[0]=1}interiorLineBoundaryLine_(e,t,s,n,r,i){if(0!==this.m_matrix[i]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const o=this.m_topoGraph.getHalfEdgeTo(e),a=this.m_topoGraph.getClusterParentage(o);if(0!==(a&t)&&0!==(a&s)){const e=this.m_topoGraph.getClusterUserIndex(o,n),t=this.m_topoGraph.getClusterUserIndex(o,r);if(e%2==0&&t%2!=0)return void(this.m_matrix[i]=0)}}}interiorLineExteriorLine_(e,t,s,n){if(1===this.m_matrix[n])return;const r=this.m_topoGraph.getHalfEdgeParentage(e);0!==(r&t)&&0===(r&s)&&(this.m_matrix[n]=1)}boundaryLineBoundaryLine_(e,t,s,n,r){if(0!==this.m_matrix[4]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const i=this.m_topoGraph.getHalfEdgeTo(e),o=this.m_topoGraph.getClusterParentage(i);if(0!==(o&t)&&0!==(o&s)){const e=this.m_topoGraph.getClusterUserIndex(i,n),t=this.m_topoGraph.getClusterUserIndex(i,r);if(e%2!=0&&t%2!=0)return void(this.m_matrix[4]=0)}}}boundaryLineExteriorLine_(e,t,s,n,r){if(0!==this.m_matrix[r]&&1!==this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgePrev(this.m_topoGraph.getHalfEdgeTwin(e)),this.m_visitedIndex)){const t=this.m_topoGraph.getHalfEdgeTo(e);if(0===(this.m_topoGraph.getClusterParentage(t)&s)){if(this.m_topoGraph.getClusterUserIndex(t,n)%2!=0)return void(this.m_matrix[r]=0)}}}interiorAreaInteriorPoint_(e,t){if(0===this.m_matrix[0])return;if(0===(this.m_topoGraph.getClusterParentage(e)&t)){const s=this.m_topoGraph.getClusterChain(e);if(0!==(this.m_topoGraph.getChainParentage(s)&t))return void(this.m_matrix[0]=0)}}interiorAreaExteriorPoint_(e,t){if(2===this.m_matrix[2])return;0!==(this.m_topoGraph.getClusterParentage(e)&t)&&(this.m_matrix[2]=2)}boundaryAreaInteriorPoint_(e,t,s){if(0===this.m_matrix[3])return;const n=this.m_topoGraph.getClusterParentage(e);0===(n&t)||0===(n&s)||(this.m_matrix[3]=0)}boundaryAreaExteriorPoint_(e,t){if(1===this.m_matrix[5])return;0!==(this.m_topoGraph.getClusterParentage(e)&t)&&(this.m_matrix[5]=1)}exteriorAreaInteriorPoint_(e,t){if(0===this.m_matrix[6])return;if(0===(this.m_topoGraph.getClusterParentage(e)&t)){const s=this.m_topoGraph.getClusterChain(e);if(0===(this.m_topoGraph.getChainParentage(s)&t))return void(this.m_matrix[6]=0)}}interiorLineInteriorPoint_(e,t,s,n){if(0===this.m_matrix[0])return;const r=this.m_topoGraph.getClusterParentage(e);if(0!==(r&t)&&0!==(r&s)){if(this.m_topoGraph.getClusterUserIndex(e,n)%2==0)return void(this.m_matrix[0]=0)}}interiorLineExteriorPoint_(e,t,s,n){if(1===this.m_matrix[2])return;if(-1===this.m_topoGraph.getClusterHalfEdge(e)){if(0!==this.m_matrix[2]){if(0===(this.m_topoGraph.getClusterParentage(e)&s))return void(this.m_matrix[2]=0)}}else this.m_matrix[2]=1}boundaryLineInteriorPoint_(e,t,s,n){if(0===this.m_matrix[3])return;const r=this.m_topoGraph.getClusterParentage(e);if(0!==(r&t)&&0!==(r&s)){if(this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[3]=0)}}boundaryLineExteriorPoint_(e,t,s,n){if(0===this.m_matrix[5])return;const r=this.m_topoGraph.getClusterParentage(e);if(0!==(r&t)&&0===(r&s)){if(this.m_topoGraph.getClusterUserIndex(e,n)%2!=0)return void(this.m_matrix[5]=0)}}exteriorLineInteriorPoint_(e,t,s){if(0===this.m_matrix[6])return;const n=this.m_topoGraph.getClusterParentage(e);0!==(n&t)||0===(n&s)||(this.m_matrix[6]=0)}interiorPointInteriorPoint_(e,t,s){if(0===this.m_matrix[0])return;const n=this.m_topoGraph.getClusterParentage(e);0===(n&t)||0===(n&s)||(this.m_matrix[0]=0)}interiorPointExteriorPoint_(e,t,s,n){if(0===this.m_matrix[n])return;const r=this.m_topoGraph.getClusterParentage(e);0===(r&t)||0!==(r&s)||(this.m_matrix[n]=0)}computeMatrixTopoGraphHalfEdges_(e,t){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(t);this.m_visitedIndex=this.m_topoGraph.createUserIndexForHalfEdges();for(let i=this.m_topoGraph.getFirstCluster();i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;i=this.m_topoGraph.getNextCluster(i)){const e=this.m_topoGraph.getClusterHalfEdge(i);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(null!==this.m_predicatesCluster&&(s=this.m_predicatesCluster(i,n,r),s))break;continue}let t=e;do{let e=t;if(1!==this.m_topoGraph.getHalfEdgeUserIndex(e,this.m_visitedIndex))do{if(s=this.m_predicatesHalfEdge(e,n,r),s)break;this.m_topoGraph.setHalfEdgeUserIndex(e,this.m_visitedIndex,1),e=this.m_topoGraph.getHalfEdgeNext(e)}while(e!==t&&!s);if(s)break;t=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(e))}while(t!==e);if(s)break}s||this.setRemainingPredicatesToFalse_(),this.m_topoGraph.deleteUserIndexForHalfEdges(this.m_visitedIndex)}computeMatrixTopoGraphClusters_(e,t){let s=!1;const n=this.m_topoGraph.getGeometryID(e),r=this.m_topoGraph.getGeometryID(t);for(let i=this.m_topoGraph.getFirstCluster();i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(s=this.m_predicatesCluster(i,n,r),!s);i=this.m_topoGraph.getNextCluster(i));s||this.setRemainingPredicatesToFalse_()}setEditShape_(e,t){this.m_topoGraph.setEditShape(e,t)}setEditShapeCrackAndCluster_(e,t,s){let r=0;if(e.hasCurves()){const n=new fa,i=e.getEnvelope2D(s),o=_a(t.total(),i);r=pa(o,0),aa(e,o,t.total(),12e3,n,null,s),n.clearStitcher(e)}ya(e,t.add(r),s,!1,!1),e.filterClosePoints(0,!0,!0,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);for(let i=e.getFirstGeometry();i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;i=e.getNextGeometry(i))e.getGeometryType(i)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&er(e,i,-1,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s);this.setEditShape_(e,s)}}function Nr(e){const t=e[1],s=e[2],n=e[5];e[1]=e[3],e[2]=e[6],e[5]=e[7],e[3]=t,e[6]=s,e[7]=n}function Tr(t,s,i){const o=t.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(o)){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:t.getDescription()});return e.addSegment(t,!0),e}if(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=t,r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(r),r.height()<=s&&r.width()<=s){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({vd:t.getDescription()});return n.getCenter(e),e}if(r.height()<=s||r.width()<=s){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:t.getDescription()}),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;return n.queryCornerByVal(0,s),e.startPathPoint(s),n.queryCornerByVal(2,s),e.lineToPoint(s),e}const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:t.getDescription()});return i.addEnvelope(n,!1),i}return t}function Gr(e){return`${e[0]}${e[3]}${e[6]}${e[1]}${e[4]}${e[7]}${e[2]}${e[5]}${e[8]}`}class Dr{nullFunc(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("should not be called"),!1}constructor(t,s,n,r=!1){this.m_bDone=!1,this.m_tolerance=0,this.m_elementHandle=-1,this.m_query=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),this.m_envInter=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),this.m_quadTree=null,this.m_intersector=null,this.m_function=this.nullFunc;const i=t.getAccelerators();let a=null;null!=i&&(a=r?i.getQuadTreeForPaths():i.getQuadTree());const h=s.getAccelerators();let m=null;if(null!=h&&(m=r?h.getQuadTreeForPaths():h.getQuadTree()),null===a&&null===m&&!r){const r=t.getPointCount(),i=s.getPointCount();if(r>10&&i>10){const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),g=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryLooseEnvelope(h),s.queryLooseEnvelope(l),h.inflateCoords(n,n),l.inflateCoords(n,n),g.setCoords({env2D:h}),g.intersect(l),r>=i?a=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(t.getGeometryType())?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.F)(t,g):(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Z)(t,g):m=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s.getGeometryType())?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.F)(s,g):(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Z)(s,g)}}this.construct_(t,a,s,m,n,r)}next(){if(this.m_bQuadTree){if(this.m_bDone)return!1;for(;this.m_function(););return!this.m_bDone}return!!this.m_intersector&&this.m_intersector.next()}getRedElement(){return this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElement(this.m_elementHandle):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_bSwapElements?this.m_intersector.getBlueElement(this.m_intersector.getHandleB()):this.m_intersector.getRedElement(this.m_intersector.getHandleA())}getBlueElement(){return this.m_bQuadTree?this.m_bSwapElements?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(this.m_queryType)?this.m_bPaths?this.m_pathIndex:this.m_segIter.getStartPointIndex():this.m_pointIndex:this.m_quadTree.getElement(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedElement(this.m_intersector.getHandleA()):this.m_intersector.getBlueElement(this.m_intersector.getHandleB())}getRedEnvelope(){return this.m_bPaths||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)(""),this.m_bQuadTree?this.m_bSwapElements?this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_query:this.m_bSwapElements?this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB()):this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA())}getBlueEnvelope(){return this.m_bPaths||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)(""),this.m_bQuadTree?this.m_bSwapElements?this.m_query:this.m_quadTree.getElementExtent(this.m_elementHandle):this.m_bSwapElements?this.m_intersector.getRedEnvelope(this.m_intersector.getHandleA()):this.m_intersector.getBlueEnvelope(this.m_intersector.getHandleB())}construct_(t,s,r,i,a,h){const m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryLooseEnvelope(m),r.queryLooseEnvelope(l),m.inflateCoords(a,a),l.inflateCoords(a,a),this.m_envInter.setCoords({env2D:m}),this.m_envInter.intersect(l),this.m_multiVertexImplA=t,this.m_multiVertexImplB=r;const g=t.getGeometryType(),u=r.getGeometryType();this.m_bPaths=h,this.m_pathIndex=-1,this.m_pointIndex=-1,this.m_bSwapElements=!1,this.m_queryType=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumUnknown,this.m_bQuadTree=!1,null!==s&&(this.m_bDone=!1,this.m_tolerance=a,this.m_quadTree=s,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!0,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(u)?(this.m_queryType=u,this.m_function=this.nextPath_,h?this.m_pathIndex=r.getPathCount():this.m_segIter=r.querySegmentIterator()):(this.m_queryType=u,this.m_function=this.nextPoint_,this.m_pointIndex=r.getPointCount())),this.m_bQuadTree||null!==i&&(this.m_bDone=!1,this.m_tolerance=a,this.m_quadTree=i,this.m_qtIter=this.m_quadTree.getIteratorForQT(),this.m_bQuadTree=!0,this.m_bSwapElements=!1,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(g)?(this.m_queryType=g,this.m_function=this.nextPath_,h?this.m_pathIndex=t.getPathCount():this.m_segIter=t.querySegmentIterator()):(this.m_queryType=g,this.m_function=this.nextPoint_,this.m_pointIndex=t.getPointCount())),this.m_bQuadTree||(h&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(g)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(u)?this.m_intersector=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a1)(t,r,a):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(g)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(u)?(this.m_intersector=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__._)(t,r,a),this.m_bSwapElements=!1):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(g)&&!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(u)?(this.m_intersector=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.$)(t,r,a),this.m_bSwapElements=!1):!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(g)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(u)?(this.m_intersector=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.$)(r,t,a),this.m_bSwapElements=!0):(this.m_intersector=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a0)(t,r,a),this.m_bSwapElements=!1))}nextPath_(){return this.m_bPaths?-1===--this.m_pathIndex?(this.m_bDone=!0,!1):(this.m_bSwapElements?this.m_multiVertexImplB.queryPathEnvelope(this.m_pathIndex,this.m_query):this.m_multiVertexImplA.queryPathEnvelope(this.m_pathIndex,this.m_query),this.m_qtIter.resetIterator(this.m_query,this.m_tolerance),this.m_function=this.iterate_,!0):this.m_segIter.nextPath()?(this.m_function=this.nextSegment_,!0):(this.m_bDone=!0,!1)}nextSegment_(){if(!this.m_segIter.hasNextSegment())return this.m_function=this.nextPath_,!0;const t=this.m_segIter.nextSegment(),s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return t.queryLooseEnvelope(s),!s.isIntersecting(this.m_envInter)||(this.m_qtIter.resetIterator(t,this.m_tolerance),this.m_function=this.iterate_,!0)}nextPoint_(){if(-1===--this.m_pointIndex)return this.m_bDone=!0,!1;const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;if(this.m_bSwapElements){const e=this.m_multiVertexImplB.getXY(this.m_pointIndex);t.setCoordsPoint2D(e)}else{const e=this.m_multiVertexImplA.getXY(this.m_pointIndex);t.setCoordsPoint2D(e)}return!this.m_envInter.contains(t)||(this.m_qtIter.resetIterator(_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.construct(t.x,t.y,t.x,t.y),this.m_tolerance),this.m_function=this.iterate_,!0)}iterate_(){return this.m_elementHandle=this.m_qtIter.next(),-1===this.m_elementHandle&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(this.m_queryType)?(this.m_function=this.m_bPaths?this.nextPath_:this.nextSegment_,!0):(this.m_function=this.nextPoint_,!0))}}function Vr(e){return 2===e?1:1===e?2:128===e?64:64===e?128:e}function Fr(t,s,n){let r;if(t instanceof oc||null===t){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.setCoords({pt:s}),i.mergeEnvelope2D(n),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(t,i,!1)}else r=t;return r}function Hr(t,s,n){let r;if(t instanceof oc||null===t){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.setCoords({env2D:s}),i.mergeEnvelope2D(n),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(t,i,!1)}else r=t;return r}function kr(t,i,o,a,h){if(t.isEmpty()||i.isEmpty())return 4===a;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(i);let m=t.getGeometryType(),l=i.getGeometryType();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope)return Ar(t,i,o,a);if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return Mr(i,t,o,Vr(a))}else if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope)return Mr(t,i,o,a);if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return Ur(t,i,o,a)}const g=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(g);const u=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.queryEnvelope(u);const c=Hr(o,g,u);if(qr(g,u,c))return 4===a;let _=!1,d=null,p=null,f=null,x=null;switch((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(m)?(d=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:t.getDescription()}),d.addSegment(t,!0),f=d,m=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline):f=t,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(l)?(p=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:i.getDescription()}),p.addSegment(i,!0),x=p,l=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline):x=i,m!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&l!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope?(f.getDimension()<x.getDimension()||m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint&&l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)&&(a=Vr(a)):m!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&l!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&(a=Vr(a)),m){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=Yr(f,x,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=Rr(f,x,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=Xr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=Lr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:_=zr(f,x,c,a,h)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=Rr(x,f,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=Wr(f,x,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=jr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=Zr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:_=Kr(f,x,c,a,h)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=Xr(x,f,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=jr(x,f,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=Jr(x,f,c,a)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=Lr(x,f,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=Zr(x,f,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=Qr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:_=Jr(f,x,c,a);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:_=$r(f,x,c,a)}break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:switch(l){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:_=zr(x,f,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:_=Kr(x,f,c,a,h);break;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:_=$r(x,f,c,a)}}return _}function Ar(t,s,n,r,i){if(t.isEmpty()||s.isEmpty())return 4===r;const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o);const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(a);const h=Hr(n,o,a);switch(r){case 4:return qr(o,a,h);case 2:return go(a,o,h,!1);case 128:return go(a,o,h,!0);case 1:return go(o,a,h,!1);case 64:return go(o,a,h,!0);case 3:return ho(o,a,h);case 8:return mo(o,a,h);case 32:return lo(o,a,h);case 16:return!1}return!1}function Mr(t,s,n,r,i){if(t.isEmpty()||s.isEmpty())return 4===r;const o=t.getXY(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(a);const h=Fr(n,o,a);switch(r){case 4:return Or(o,a,h);case 2:case 128:return ao(o,a,h);case 1:case 64:return!1;case 3:return io(o,a,h);case 8:return oo(o,a,h)}return!1}function Ur(t,s,n,r,i){if(t.isEmpty()||s.isEmpty())return 4===r;const o=t.getXY(),a=s.getXY();let h;if(n instanceof oc||null===n){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.setCoords({pt:o}),t.merge(a),h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(n,t,!1)}else h=n;switch(r){case 4:return no(o,a,h);case 2:case 128:return ro(a,o,h);case 1:case 64:return ro(o,a,h);case 3:return so(o,a,h)}return!1}function qr(t,s,n){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.setCoords({env2D:s}),r.inflateCoords(n,n),!t.isIntersecting(r)}function Br(e,t,s,n=!1){const r=e.getGeometryType(),i=t.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(r)){const t=e.getImpl().getAccelerators();if(null!==t){const e=t.getRasterizedGeometry();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null===e)}}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(i)){const e=t.getImpl().getAccelerators();if(null!==e){const t=e.getRasterizedGeometry();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null===t)}}return 0}function Or(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return i.setCoords({env2D:s}),i.inflateCoords(n,n),!i.contains(t)}function Yr(e,t,s,n,r){switch(n){case 4:return ti(e,t,s);case 2:return ri(t,e,s,r);case 128:return ii(t,e,s);case 1:return ri(e,t,s,r);case 64:return ii(e,t,s);case 3:return ei(e,t,s,r);case 8:return si(e,t,s);case 32:return ni(e,t,s,r)}return!1}function Rr(e,t,s,n,r){switch(n){case 4:return oi(e,t,s);case 1:return mi(e,t,s,r);case 64:return li(e,t,s);case 8:return ai(e,t,s,r);case 16:return hi(e,t,s)}return!1}function Xr(e,t,s,n,r){switch(n){case 4:return gi(e,t,s);case 1:case 64:return ci(e,t,s);case 8:return ui(e,t,s)}return!1}function Lr(e,t,s,n,r){switch(n){case 4:return _i(e,t,s);case 1:return fi(e,t,s,!1);case 64:return fi(e,t,s,!0);case 8:return di(e,t,s);case 16:return pi(e,t,s)}return!1}function zr(e,t,s,n,r){if(yi(e,t,s))return 4===n;if(4===n)return!1;switch(n){case 2:return Si(e,t,s,!1);case 128:return Si(e,t,s,!0);case 1:return Ci(e,t,s,!1,r);case 64:return Ci(e,t,s,!0,r);case 3:return xi(e,t,s,r);case 8:return Pi(e,t,s,r);case 32:return Ei(e,t,s,r);case 16:return!1}return!1}function Wr(e,t,s,n,r){switch(n){case 4:return bi(e,t,s);case 2:return Ti(t,e,s,r);case 128:return Gi(t,e,s,r);case 1:return Ti(e,t,s,r);case 64:return Gi(e,t,s,r);case 3:return Ii(e,t,s,r);case 8:return wi(e,t,s,r);case 32:return Ni(e,t,s,r);case 16:return vi(e,t,s,r)}return!1}function jr(e,t,s,n,r){switch(n){case 4:return Di(e,t,s);case 1:case 64:return Fi(e,t,s);case 8:return Vi(e,t,s)}return!1}function Zr(e,t,s,n,r){switch(n){case 4:return Hi(e,t,s);case 1:case 64:return Mi(e,t,s);case 8:return ki(e,t,s);case 16:return Ai(e,t,s)}return!1}function Kr(e,t,s,n,r){if(qi(e,t,s))return 4===n;if(4===n)return!1;switch(n){case 2:return Oi(e,t,s,!1);case 128:return Oi(e,t,s,!0);case 1:case 64:case 32:return!1;case 3:return Ui(e,t,s);case 8:return Bi(e,t,s,r);case 16:return Yi(e,t,s)}return!1}function Qr(e,t,s,n,r){switch(n){case 4:return Xi(e,t,s);case 2:case 128:return zi(t,e,s);case 1:case 64:return zi(e,t,s);case 3:return Ri(e,t,s);case 32:return Li(e,t,s)}return!1}function Jr(e,t,s,n,r){switch(n){case 4:return ji(e,t,s);case 2:case 128:return Zi(e,t,s);case 1:case 64:return Ki(e,t,s);case 3:return Wi(e,t,s)}return!1}function $r(e,t,s,n,r){switch(n){case 4:return Ji(e,t,s);case 2:return eo(e,t,s,!1);case 128:return eo(e,t,s,!0);case 1:case 64:return!1;case 3:return Qi(e,t,s);case 8:return $i(e,t,s);case 16:return to(e,t,s)}return!1}function ei(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),!ho(i,o,n))return!1;if(Br(t,s),yo(t,s,n))return!0;const a=t.calculateLength2D(),h=s.calculateLength2D(),m=Math.max(t.getPointCount(),s.getPointCount());if(Math.abs(a-h)>4*m*n)return!1;if(t.hasNonLinearSegments()||s.hasNonLinearSegments()){return sr(t,s,n,"**F**FFF*",r,!1)}return So(t,s,n,!0)}function ti(e,t,s,n){Br(e,t,s,!0);return 1===uo(e,t,s,!0)}function si(e,t,s,n){return Br(e,t),Go(e,t,s,null)}function ni(e,t,s,n){return Br(e,t),Do(e,t,s,n)}function ri(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!po(i,o,n)&&(Br(t,s),Vo(t,s,n,r))}function ii(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!po(i,o,n)&&(Br(t,s),2===uo(t,s,n,!1))}function oi(e,t,s,n){Br(e,t,s,!0);return 1===uo(e,t,s,!0)}function ai(e,t,s,n){return Br(e,t),Fo(e,t,s,n)}function hi(e,t,s,n){return Br(e,t),Ho(e,t,s,null)}function mi(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!po(i,o,n)&&(Br(t,s),ko(t,s,n,r))}function li(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!po(i,o,n)&&(Br(t,s),2===uo(t,s,n,!1))}function gi(e,t,s,n){return 0===Xo(e,t,s)}function ui(e,t,s,n){return Mo(e,t.getXY(),s)}function ci(e,t,s,n){return Ao(e,t.getXY(),s)}function _i(e,t,s,n,r){Br(e,t);return 1===co(e,t,s)}function di(t,s,n,r){Br(t,s);const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(i),i.inflateCoords(n,n);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let a=!1;const h=t.getImpl(),m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let l=t,g=!1;for(let e=0;e<s.getPointCount();e++){if(s.queryXY(e,o),i.contains(o)){const e=Lo(l,o,n);if(2===e)a=!0;else if(1===e)return!1}g||(!Wn(t,s.getPointCount()-1)||null!==h.getAccelerators()&&null!==h.getAccelerators().getQuadTree()?l=t:(t.copyTo(m),m.getImpl().buildQuadTreeAccelerator(1),l=m),g=!0)}return!!a}function pi(t,s,n,r){Br(t,s);const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryEnvelope(i),s.queryEnvelope(a),o.setCoords({env2D:i}),o.inflateCoords(n,n);let h=!1,m=!1;const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,g=t.getImpl(),u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let c=t,_=!1;for(let e=0;e<s.getPointCount();e++){if(s.queryXY(e,l),o.contains(l)){const e=Lo(c,l,n);0===e?m=!0:1===e&&(h=!0)}else m=!0;if(h&&m)return!0;_||(!Wn(t,s.getPointCount()-1)||null!==g.getAccelerators()&&null!==g.getAccelerators().getQuadTree()?c=t:(t.copyTo(u),u.getImpl().buildQuadTreeAccelerator(1),c=u),_=!0)}return!1}function fi(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(o),s.queryEnvelope(a),!po(o,a,n))return!1;Br(t,s);let h=!1;const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,l=t.getImpl(),g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let u=t,c=!1;for(let e=0;e<s.getPointCount();e++){if(s.queryXY(e,m),!o.contains(m))return!1;const i=Lo(u,m,n);if(1===i)h=!0;else if(0===i)return!1;if(r&&2===i)return!1;c||(!Wn(t,s.getPointCount()-1)||null!==l.getAccelerators()&&null!==l.getAccelerators().getQuadTree()?u=t:(t.copyTo(g),g.getImpl().buildQuadTreeAccelerator(1),u=g),c=!0)}return h}function xi(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(i),s.queryEnvelope(o),!ho(i,o,n))return!1;const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return a.addEnvelope(s,!1),ei(t,a,n,r)}function yi(t,s,n,r){Br(t,s);const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),po(o,i,n))return!1;return 0===Lo(t,o.getLowerLeft(),0)&&(!o.contains(t.getXY(0))&&!To(t,o,n))}function Pi(t,s,n,r){Br(t,s);const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(i),s.queryEnvelope(o),po(o,i,n))return!1;if(o.height()<=n||o.width()<=n)return!1;const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return a.addEnvelope(s,!1),Go(t,a,n,r)}function Ei(t,s,n,r){Br(t,s);const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(i),s.queryEnvelope(o),po(o,i,n))return!1;if(o.height()<=n||o.width()<=n)return!1;const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return a.addEnvelope(s,!1),Do(t,a,n,r)}function Si(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(o),s.queryEnvelope(a),r?fo(a,o,n):po(a,o,n)}function Ci(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(o),s.queryEnvelope(a),!po(o,a,n))return!1;Br(t,s);const h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return h.addEnvelope(s,!1),r?2===uo(t,h,n,!1):Vo(t,h,n,i)}function Ii(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),!ho(i,o,n))return!1;if(Br(t,s),yo(t,s,n))return!0;if(t.hasNonLinearSegments()||s.hasNonLinearSegments()){return sr(t,s,n,"**F**FFF*",r,!1)}return So(t,s,n,!1)}function bi(e,t,s,n){Br(e,t);const r=e.getImpl(),i=t.getImpl();return!new Dr(r,i,s,!0).next()||!Io(e,t,s)}function wi(t,s,n,r){Br(t,s);const i=[],o=bo(t,s,n,i);if(-2===o){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let h,m;if(t.queryEnvelope(i),s.queryEnvelope(o),i.inflateCoords(1e3*n,1e3*n),o.inflateCoords(1e3*n,1e3*n),a.setCoords({env2D:i}),a.intersect(o),t.getPointCount()>10){if(h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,a,n,0,r),h.isEmpty())return!1}else h=t;if(s.getPointCount()>10){if(m=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,a,n,0,r),m.isEmpty())return!1}else m=s;return sr(h,m,n,"F********",r,!1)}if(0!==o)return!1;const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M;for(let e=0;e<i.length;e+=2){const t=i[e],s=i[e+1];a.addXY(t,s)}const h=t.getBoundary(),m=s.getBoundary();return h.addPoints(m,0,m.getPointCount()),!h.isEmpty()&&zi(h,a,n)}function vi(t,s,n,r){Br(t,s);const i=[],o=bo(t,s,n,i);if(-2===o){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let h,m;if(t.queryEnvelope(i),s.queryEnvelope(o),i.inflateCoords(1e3*n,1e3*n),o.inflateCoords(1e3*n,1e3*n),a.setCoords({env2D:i}),a.intersect(o),t.getPointCount()>10){if(h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,a,n,0,r),h.isEmpty())return!1}else h=t;if(s.getPointCount()>10){if(m=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,a,n,0,r),m.isEmpty())return!1}else m=s;return sr(h,m,n,"0********",r,!1)}if(0!==o)return!1;const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M;for(let e=0;e<i.length;e+=2){const t=i[e],s=i[e+1];a.addXY(t,s)}const h=t.getBoundary(),m=s.getBoundary();return h.addPoints(m,0,m.getPointCount()),!!h.isEmpty()||!zi(h,a,n)}function Ni(t,s,n,r){Br(t,s);const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(i),s.queryEnvelope(o);const a=xo(i,o,n),h=xo(o,i,n),m=t.hasNonLinearSegments(),l=s.hasNonLinearSegments(),g=bo(t,s,n,null);if(-1===g)return!1;if(1===g){if(a&&h)return!0;if(!m&&!l)return a&&!h?!Co(s,t,n,!1):h&&!a?!Co(t,s,n,!1):!Co(t,s,n,!1)&&!Co(s,t,n,!1)}const u=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),c=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),_=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let d,p;u.setCoords({env2D:i}),u.inflateCoords(1e3*n,1e3*n),c.setCoords({env2D:o}),c.inflateCoords(1e3*n,1e3*n),_.setCoords({env2D:u}),_.intersect(c);let f="";if(f+="1*",a){if(s.getPointCount()>10){if(p=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,_,n,0,r),p.isEmpty())return!1}else p=s;f+="****"}else p=s,f+="T***";if(h){if(t.getPointCount()>10){if(d=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,_,n,0,r),d.isEmpty())return!1}else d=t;f+="***"}else d=t,f+="T**";return sr(d,p,n,f,r,!1)}function Ti(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),!po(i,o,n))return!1;if(Br(t,s),t.hasNonLinearSegments()||s.hasNonLinearSegments()){return sr(t,s,n,"******FF*",r,!1)}return Co(s,t,n,!1)}function Gi(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),!po(i,o,n))return!1;Br(t,s);return sr(t,s,n,"T**FF*FF*",r,!1)}function Di(e,t,s,n){Br(e,t);return!vo(e,t.getXY(),s)}function Vi(e,t,s,n){Br(e,t);return qo(e,t.getXY(),s)}function Fi(e,t,s,n){Br(e,t);return No(e,t.getXY(),s)}function Hi(e,t,s,n){return Br(e,t),!wo(e,t,s,!1)}function ki(e,t,s,n){Br(e,t);const r=e.getImpl(),i=t.getImpl(),o=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M,a=new Dr(r,i,s,!1),h=r.querySegmentIterator();let m=!1;for(;a.next();){const e=a.getRedElement(),t=a.getBlueElement();h.resetToVertex(e,-1);const n=h.nextSegment(),r=i.getXY(t);n.isIntersectingPoint(r,s)&&(m=!0,o.addPoint2D(r))}if(!m)return!1;const l=e.getBoundary();return!l.isEmpty()&&zi(l,o,s)}function Ai(e,t,s,n){Br(e,t);const r=e.getImpl(),i=t.getImpl(),o=i.getPointCount(),a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(o,!1),h=new Dr(r,i,s,!1),m=r.querySegmentIterator();let l=!1;for(;h.next();){const e=h.getRedElement(),t=h.getBlueElement();m.resetToVertex(e,-1);const n=m.nextSegment(),r=i.getXY(t);n.isIntersectingPoint(r,s)&&(l=!0,a[t]=!0)}if(!l)return!1;let g=!1;for(let _=0;_<o;_++)if(!a[_]){g=!0;break}if(!g)return!1;const u=e.getBoundary();if(u.isEmpty())return!0;const c=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M;for(let _=0;_<o;_++)a[_]&&c.addPoint2D(i.getXY(_));return!zi(u,c,s)}function Mi(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(o),s.queryEnvelope(a),!po(o,a,n))return!1;Br(t,s);const h=wo(t,s,n,!0);if(!h)return h;const m=t.getBoundary();return m.isEmpty()?h:!zi(m,s,n)}function Ui(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return t.queryEnvelope(i),s.queryEnvelope(o),!(o.height()>n&&o.width()>n)&&ho(i,o,n)}function qi(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(i),s.queryEnvelope(o);const a=Bo(o,i,n);return 0===a?!To(t,o,n):4===a}function Bi(t,s,r,o){const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(a),s.queryEnvelope(h),h.height()<=r||h.width()<=r)return!1;const m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,l=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(m.setCoords({env2D:h}),l.setCoords({env2D:h}),m.inflateCoords(r,r),l.inflateCoords(-r,-r),l.containsEnvelope(a)||!a.isIntersecting(m))return!1;const g=t.getImpl().querySegmentIterator();g.stripAttributes();const u=t.getImpl().getAccelerators();let c=null,_=null;null!==u&&(c=u.getQuadTree(),null!==c&&(_=c.getIterator(h,r))),_||g.nextPath()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("relational_operations");let d=!1,p=null;const f=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,y=t.hasNonLinearSegments();let P=!1;for(;;){if(null!==_){const e=_.next();if(-1===e)break;g.resetToVertex(c.getElement(e),-1),p=g.nextSegment()}else{for(;!g.hasNextSegment()&&g.nextPath(););if(!g.hasNextSegment())break;p=g.nextSegment()}if(y&&p.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(p.queryEnvelope(t),l.containsEnvelope(t))return!1;if(m.isIntersecting(t)){P=!0;break}}else{f.assign(p.getStartXY()),x.assign(p.getEndXY());let e=l.clipLine(f,x);if(0!==e)return!1;d||(e=m.clipLine(f,x),0!==e&&(d=!0))}}if(!P)return d;const E=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;return E.addEnvelope(h,!1),ai(E,t,r,o)}function Oi(t,s,r,o,a){const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(h),s.queryEnvelope(m),m.height()<=r||m.width()<=r)return!1;if(o)return fo(m,h,r);if(!po(m,h,r))return!1;const l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();l.setCoords({env2D:m}),l.inflateCoords(-r,-r);const g=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(g.setCoords({env2D:m}),g.inflateCoords(r,r),l.containsEnvelope(h))return!0;const u=t.getImpl().querySegmentIterator();u.stripAttributes(),u.nextPath()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("relational_operations");let c,_,d,p,f,x,y=!1;const P=t.hasNonLinearSegments();for(P&&(d=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,p=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,f=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,x=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,l.querySide(0,d),l.querySide(1,p),l.querySide(2,f),l.querySide(3,x));;){for(;!u.hasNextSegment()&&u.nextPath(););if(!u.hasNextSegment())break;const e=u.nextSegment();if(P&&e.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){if(e.isIntersecting(d,r)){y=!0;break}if(e.isIntersecting(p,r)){y=!0;break}if(e.isIntersecting(f,r)){y=!0;break}if(e.isIntersecting(x,r)){y=!0;break}}else{c=e.getStartXY(),_=e.getEndXY();if(0!==l.clipLine(c,_)){y=!0;break}}}return y}function Yi(t,s,r,i){const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(o),s.queryEnvelope(h),h.height()<=r||h.width()<=r)return!1;const m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(m.setCoords({env2D:h}),m.inflateCoords(r,r),m.containsEnvelope(o))return!1;const l=!0,g=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(g.setCoords({env2D:h}),g.inflateCoords(-r,-r),!g.isIntersecting(o))return!1;const u=t.getImpl().querySegmentIterator();u.stripAttributes();const c=t.getImpl().getAccelerators();let _=null,d=null;if(null!==c&&(_=c.getQuadTree(),null!==_&&(d=_.getIterator(h,r))),!d){const e=u.nextPath();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e)}let p=!1,f=null;const x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let P=null,E=null,S=null,C=null;for(t.hasNonLinearSegments()&&(P=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,E=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,S=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,C=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,g.querySide(0,P),g.querySide(1,E),g.querySide(2,S),g.querySide(3,C));;){if(null!==d){const e=d.next();if(-1===e)break;u.resetToVertex(_.getElement(e),-1),f=u.nextSegment()}else{for(;!u.hasNextSegment()&&u.nextPath(););if(!u.hasNextSegment())break;f=u.nextSegment()}if(f.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){x.assign(f.getStartXY()),y.assign(f.getEndXY());if(0!==g.clipLine(x,y)){p=!0;break}}else{if(P.isIntersecting(f,r)){p=!0;break}if(E.isIntersecting(f,r)){p=!0;break}if(S.isIntersecting(f,r)){p=!0;break}if(C.isIntersecting(f,r)){p=!0;break}}}return p&&l}function Ri(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!ho(i,o,n)&&(!!Po(t,s,n)||Eo(t,s,n,!1,!0,!1))}function Xi(e,t,s,n){const r=e,i=t,o=new Dr(r,i,s,!1),a=s*s,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(;o.next();){const e=o.getRedElement(),t=o.getBlueElement();if(r.queryXY(e,h),i.queryXY(t,m),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(h,m)<=a)return!1}return!0}function Li(e,t,s,n){return Eo(e,t,s,!1,!1,!0)}function zi(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),!!po(i,o,n)&&Eo(s,t,n,!0,!1,!1)}function Wi(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.queryEnvelope(i),s.queryEnvelope(o),ho(i,o,n)}function ji(e,t,s,n){return Uo(e,t.getXY(),s)}function Zi(e,t,s,n){return Wi(e,t,s)}function Ki(e,t,s,n){return!ji(e,t,s)}function Qi(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return t.queryEnvelope(i),s.queryEnvelope(o),!(o.height()>n||o.width()>n)&&ho(i,o,n)}function Ji(t,s,n,r){const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(i),s.queryEnvelope(o),po(o,i,n))return!1;const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();a.setCoords({env2D:o}),a.inflateCoords(n,n);const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0;e<t.getPointCount();e++)if(t.queryXY(e,h),a.contains(h))return!1;return!0}function $i(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(s.queryEnvelope(i),i.height()<=n||i.width()<=n)return!1;o.setCoords({env2D:i}),a.setCoords({env2D:i}),o.inflateCoords(n,n),a.inflateCoords(-n,-n);const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let m=!1;for(let e=0;e<t.getPointCount();e++)if(t.queryXY(e,h),o.contains(h)){if(a.containsExclusive(h))return!1;m=!0}return m}function eo(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(o),s.queryEnvelope(a),a.height()<=n||a.width()<=n)return!1;if(r)return fo(a,o,n);if(!po(a,o,n))return!1;let h=!1;const m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();m.setCoords({env2D:a}),l.setCoords({env2D:a}),m.inflateCoords(-n,-n),l.inflateCoords(n,n);const g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0;e<t.getPointCount();e++){if(t.queryXY(e,g),!l.contains(g))return!1;m.containsExclusive(g)&&(h=!0)}return h}function to(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(t.queryEnvelope(i),s.queryEnvelope(o),po(o,i,n))return!1;if(o.height()<=n||o.width()<=n)return!1;const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;a.setCoords({env2D:o}),a.inflateCoords(-n,-n),h.setCoords({env2D:o}),h.inflateCoords(n,n);const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let l=!1,g=!1;for(let e=0;e<t.getPointCount();e++)if(t.queryXY(e,m),!l&&a.containsExclusive(m)&&(l=!0),g||h.contains(m)||(g=!0),l&&g)return!0;return!1}function so(e,t,s,n){return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(e,t)<=s*s}function no(e,t,s,n){return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(e,t)>s*s}function ro(e,t,s,n){return so(e,t,s)}function io(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return i.setCoords({pt:t}),ho(i,s,n)}function oo(t,s,n,r){if(s.height()<=n||s.width()<=n)return!1;const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return i.setCoords({env2D:s}),i.inflateCoords(n,n),!!i.contains(t)&&(o.setCoords({env2D:s}),o.inflateCoords(-n,-n),!o.containsExclusive(t))}function ao(t,s,n,r){if(s.height()<=n||s.width()<=n)return!1;const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.setCoords({env2D:s}),i.inflateCoords(-n,-n);return i.containsExclusive(t)}function ho(e,t,s,n){return po(e,t,s)&&po(t,e,s)}function mo(t,s,n,r){if(t.height()<=n||t.width()<=n||s.height()<=n||s.width()<=n)return!1;const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return i.setCoords({env2D:t}),i.inflateCoords(-n,-n),i.intersect(s),!(!i.isEmpty()&&i.height()>n&&i.width()>n)&&(i.setCoords({env2D:t}),i.inflateCoords(n,n),i.intersect(s),!i.isEmpty())}function lo(t,s,n,r){if(t.height()<=n||t.width()<=n||s.height()<=n||s.width()<=n)return!1;if(po(t,s,n))return!1;if(po(s,t,n))return!1;const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return i.setCoords({env2D:t}),i.inflateCoords(-n,-n),i.intersect(s),!i.isEmpty()&&(i.height()>n||i.width()>n)}function go(t,s,n,r,i){if(t.height()<=n||t.width()<=n)return!1;if(r)return fo(t,s,n);if(!po(t,s,n))return!1;const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return o.setCoords({env2D:t}),o.inflateCoords(-n,-n),o.intersect(s),!o.isEmpty()}function uo(t,s,r,i,o){const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),g=t.getImpl(),u=s.getImpl(),c=u.getGeometryType(),_=new Dr(g,u,r,!0);if(!_.next())return 1;if(Io(t,s,r))return i?4:0;const d=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let p=t;const f=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let x=null;c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(x=s);const y=c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(g.getPathCount(),!1):[],P=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(u.getPathCount(),!1);let E=!1,S=!1,C=!1,I=!1,b=!1,w=!1;do{if(C&&b||I&&w)break;if(C&&I)break;const e=_.getRedElement(),o=_.getBlueElement();if(!P[o]&&(h.assign(s.getXY(s.getPathStart(o))),m.setCoords({env2D:_.getRedEnvelope()}),m.inflateCoords(r,r),m.contains(h))){if(0!==Lo(p,h,0)){if(I=!0,i)return 4}else w=!0;P[o]=!0}if(c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&!y[e]&&(a.assign(t.getXY(t.getPathStart(e))),l.setCoords({env2D:_.getBlueEnvelope()}),l.inflateCoords(r,r),l.contains(a))){if(0!==Lo(x,a,0)){if(C=!0,i)return 4}else b=!0;y[e]=!0}if(E||(!Wn(t,s.getPathCount()-1)||null!==g.getAccelerators()&&null!==g.getAccelerators().getQuadTree()?p=t:(t.copyTo(d),d.getImpl().buildQuadTreeAccelerator(1),p=d),E=!0),c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&!S){const e=s;!Wn(e,t.getPathCount()-1)||null!==u.getAccelerators()&&null!==u.getAccelerators().getQuadTree()?x=s:(e.copyTo(f),f.getImpl().buildQuadTreeAccelerator(1),x=f),S=!0}}while(_.next());if(!C&&!I)return 1;if(!b||!w){if(c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)for(let e=0,t=g.getPathCount();e<t;e++)if(!y[e]){b=!0;break}for(let e=0,t=u.getPathCount();e<t;e++)if(!P[e]){w=!0;break}}return C&&b||I&&w||C&&I?4:I?2:3}function co(t,s,n,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),o.inflateCoords(n,n);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,h=t.getImpl(),m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let l=t,g=!1,u=!1,c=!1;for(let e=0;e<s.getPointCount();e++){if(s.queryXY(e,a),o.contains(a)){const e=Lo(l,a,n);if(1===e)return u=!0,4;if(2===e)return 4;c=!0}else c=!0;g||(!Wn(t,s.getPointCount()-1)||null!==h.getAccelerators()&&null!=h.getAccelerators().getQuadTree()?l=t:(t.copyTo(m),m.getImpl().buildQuadTreeAccelerator(1),l=m),g=!0)}return u?c?4:2:1}function _o(t,s,r,i,o){i[0]=!1;const h=t.getImpl(),m=s.getImpl(),l=h.querySegmentIterator(),g=m.querySegmentIterator(),u=[0,0],c=[0,0],_=new Dr(h,m,r);let d=!1;for(;_.next();){const e=_.getRedElement(),t=_.getBlueElement();l.resetToVertex(e,-1),g.resetToVertex(t,-1);const s=l.nextSegment(),n=g.nextSegment();let o=0;if(Oo(s,n)?!d&&n.isIntersecting(s,r)&&(d=!0):o=n.intersect(s,null,c,u,r),0!==o&&(d=!0,1===o)){const e=u[0],t=c[0];if(e>0&&e<1&&t>0&&t<1)return i[0]=!0,!1}}if(!d){i[0]=!0;const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),o.inflateCoords(r,r);const l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let g=t,u=!1;for(let n=0,r=s.getPathCount();n<r;n++)if(s.getPathSize(n)>0){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(s.queryPathEnvelope(n,r),!o.isIntersecting(r))return!1;{const e=zn(g,s.getXY(s.getPathStart(n)),0);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==e),0===e)return!1}u||(!Wn(t,s.getPathCount()-1)||null!==h.getAccelerators()&&null!==h.getAccelerators().getQuadTree()?g=t:(t.copyTo(l),l.getImpl().buildQuadTreeAccelerator(1),g=l),u=!0)}if(1===t.getPathCount()||s.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline)return!0;const c=s,_=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();c.queryEnvelope(_),_.inflateCoords(r,r);const d=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;let p=c,f=!1;for(let s=0,n=t.getPathCount();s<n;s++)if(t.getPathSize(s)>0){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryPathEnvelope(s,n),_.isIntersecting(n)){const e=zn(p,t.getXY(t.getPathStart(s)),0);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1!==e),1===e)return!1}f||(!Wn(c,t.getPathCount()-1)||null!==m.getAccelerators()&&null!==m.getAccelerators().getQuadTree()?p=c:(c.copyTo(d),d.getImpl().buildQuadTreeAccelerator(1),p=d),f=!0)}return!0}return!1}function po(t,s,n){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.setCoords({env2D:t}),r.inflateCoords(n,n),r.containsEnvelope(s)}function fo(t,s,n){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.setCoords({env2D:s}),r.inflateCoords(n,n),t.containsExclusiveEnvelope(r)}function xo(t,s,n){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.setCoords({env2D:s}),r.inflateCoords(n,n),!r.contains(t.getLowerLeft())||(!r.contains(t.getLowerRight())||(!r.contains(t.getUpperLeft())||!r.contains(t.getUpperRight())))}function yo(e,t,s,n){if(e.getPathCount()!==t.getPathCount()||e.getPointCount()!==t.getPointCount())return!1;if(e.hasNonLinearSegments()||t.hasNonLinearSegments())return e.equals(t);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let o=!0;const a=s*s;for(let h=0;h<e.getPathCount();h++){if(e.getPathEnd(h)!==t.getPathEnd(h)){o=!1;break}for(let s=e.getPathStart(h);s<t.getPathEnd(h);s++)if(e.queryXY(s,r),t.queryXY(s,i),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(r,i)>a){o=!1;break}if(!o)break}return!!o}function Po(e,t,s,n){if(e.getPointCount()!==t.getPointCount())return!1;const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let o=!0;const a=s*s;for(let h=0;h<e.getPointCount();h++)if(e.queryXY(h,r),t.queryXY(h,i),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(r,i)>a){o=!1;break}return!!o}function Eo(e,t,s,n,r,i,o){const a=e.getImpl(),h=t.getImpl(),m=a.getPointCount(),l=h.getPointCount(),g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(m,!1),u=r||i?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(l,!1):[],c=s*s,_=new Dr(a,h,s);for(;_.next();){const e=_.getRedElement(),t=_.getBlueElement(),s=a.getXY(e),n=h.getXY(t);_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(s,n)<=c&&(g[e]=!0,(r||i)&&(u[t]=!0))}let d=!1,p=!1;for(let y=0;y<m;y++){const e=g[y];if(d||=!e,p||=e,(r||n)&&d)return!1}if(n)return!0;let f=!1,x=!1;for(let y=0;y<l;y++){const e=u[y];if(f||=!e,x||=e,r&&f)return!1}return!!r||d&&p&&f&&x}function So(e,t,s,n){return Co(e,t,s,n)&&Co(t,e,s,n)}function Co(t,s,n,r){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.o)(t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.o)(s),s.isEmpty())return!1;let o=!0;const a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),m=[],l=new Ro;let g;const u=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),c=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),_=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(u),s.queryEnvelope(c),u.inflateCoords(n,n),c.inflateCoords(n,n),_.setCoords({env2D:u}),_.intersect(c);const d=t.getImpl().querySegmentIterator(),p=s.getImpl().querySegmentIterator(),f=s.getImpl().getAccelerators();let x=null,P=null,E=null,S=null;if(null!==f&&(x=f.getQuadTree(),P=f.getQuadTreeForPaths(),null!==P&&(S=P.getIteratorForQT())),null===x){const e=t.getPointCount(),n=s.getPointCount();e>10&&n>10&&(x=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.F)(s.getImpl(),_))}for(null!==x&&(E=x.getIteratorForQT());d.nextPath();)for(;d.hasNextSegment();){let e=d.nextSegment();if(e.queryEnvelope(u),!u.isIntersecting(_))return o=!1,!1;if(null!==S&&(S.resetIterator(u,n),-1===S.next()))continue;let t=0,s=null;if(null!=E)E.resetIterator(e,n);else if(p.resetToFirstPath(),!p.nextPath())return o=!1,!1;do{if(t=0,null!==E){const r=E.next();if(-1===r)return o=!1,!1;p.resetToVertex(x.getElement(r),-1),s=p.nextSegment(),t=e.intersect(s,null,a,h,n)}else{for(;!p.hasNextSegment();)if(!p.nextPath())return o=!1,!1;s=p.nextSegment(),s.queryEnvelope(c),c.inflateCoords(n,n),u.isIntersecting(c)&&(t=e.intersect(s,null,a,h,n))}}while(2!==t||0!==a[0]||r&&!(h[0]<=h[1]));let f=Number.NaN,y=!1;do{let r=!1;if(1===a[1]){if(!d.hasNextSegment()){y=!0;break}e=d.nextSegment(),r=!0}if(1===h[1]&&h[0]<=h[1]){if(-1===f)break;if(f=1,!p.hasNextSegment())break;s=p.nextSegment(),r=!0}if(0===h[1]&&h[0]>h[1]){if(1===f)break;if(Number.isNaN(f)){if(!p.hasPreviousSegment())break;p.previousSegment(),f=-1}if(!p.hasPreviousSegment())break;s=p.previousSegment(),r=!0}if(!r)break;t=e.intersect(s,null,a,h,n)}while(2===t&&(!r||h[0]<=h[1]));if(y)continue;const P=e.calculateLength2D();e.queryEnvelope(u),m.length=0,l.m_overlapEvents.length=0;let C=!1,I=!1,b=0;const w=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(null,u,!0);for(null!==E?E.resetIterator(e,n):(p.resetToFirstPath(),p.nextPath()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("relational_operations"));;){if(t=0,null!==E){const r=E.next();if(-1===r)break;p.resetToVertex(x.getElement(r),-1),s=p.nextSegment(),t=e.intersect(s,null,a,h,n)}else{for(;!p.hasNextSegment()&&p.nextPath(););if(!p.hasNextSegment())break;s=p.nextSegment(),s.queryEnvelope(c),c.inflateCoords(n,n),u.isIntersecting(c)&&(t=e.intersect(s,null,a,h,n))}if(2===t&&(!r||h[0]<=h[1])){const e=d.getStartPointIndex(),t=d.getPathIndex(),s=p.getStartPointIndex(),r=p.getPathIndex();if(g=Yo(e,t,a[0],a[1],s,r,h[0],h[1]),l.m_overlapEvents.push(g),m.push(m.length),!(C||g.m_scalarA0<b&&g.m_scalarA1<b))if(0===b&&P*(g.m_scalarA0-b)>n)C=!0;else if(0!==b&&P*(g.m_scalarA0-b)>w)C=!0;else if(b=g.m_scalarA1,P*(1-b)<=n||1===b){I=!0;break}}}if(!I){if(!C)return o=!1,!1;m.length>1&&m.sort(((e,t)=>l.compareOverlapEvents(e,t))),b=0;for(let e=0;e<l.m_overlapEvents.length;e++)if(g=l.m_overlapEvents[m[e]],!(g.m_scalarA0<b&&g.m_scalarA1<b)){if(0===b&&P*(g.m_scalarA0-b)>n)return o=!1,!1;if(0!==b&&P*(g.m_scalarA0-b)>w)return o=!1,!1;if(b=g.m_scalarA1,P*(1-b)<=n||1===b)break}if(P*(1-b)>n)return o=!1,!1;m.length=0,l.m_overlapEvents.length=0}}return o}function Io(e,t,s){const n=e.getImpl(),r=t.getImpl(),i=n.querySegmentIterator(),o=r.querySegmentIterator(),a=new Dr(n,r,s);for(;a.next();){const e=a.getRedElement(),t=a.getBlueElement();i.resetToVertex(e,-1),o.resetToVertex(t,-1);const n=i.nextSegment();if(o.nextSegment().isIntersecting(n,s))return!0}return!1}function bo(e,t,s,n){const r=e.getImpl(),i=t.getImpl(),o=r.querySegmentIterator(),a=i.querySegmentIterator(),h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),m=new Dr(r,i,s);let l=!1,g=-1;for(;m.next();){const e=m.getRedElement(),t=m.getBlueElement();o.resetToVertex(e,-1),a.resetToVertex(t,-1);const r=o.nextSegment(),i=a.nextSegment();let u=0;if(Oo(r,i)){if(i.isIntersecting(r,s))return-2}else u=r.intersect(i,null,h,null,s);if(u)if(2===u){const e=r.calculateLength2D(),t=h[0];if(e*(h[1]-t)>s)return g=1,g;l=!0}else if(g=0,n){const e=h[0],t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.queryCoord2D(e,t),n.push(t.x),n.push(t.y)}}return l?-2:g}function wo(e,t,s,n){const r=e.getImpl(),i=t,o=i.getPointCount(),a=n?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(o,!1):[],h=new Dr(r,i,s,!1),m=r.querySegmentIterator();for(;h.next();){const e=h.getRedElement(),t=h.getBlueElement();m.resetToVertex(e,-1);const r=m.nextSegment(),o=i.getXY(t);if(r.isIntersectingPoint(o,s)){if(!n)return!0;a[t]=!0}}if(!n)return!1;for(let l=0;l<o;l++)if(!a[l])return!1;return!0}function vo(t,s,n){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=n*n,o=t.querySegmentIterator(),a=t.getImpl().getAccelerators();if(null!==a){const t=a.getQuadTree();if(null!==t){const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();a.setCoords({pt:s});const h=t.getIterator(a,n);for(let e=h.next();-1!==e;e=h.next())if(o.resetToVertex(t.getElement(e),-1),o.hasNextSegment()){const e=o.nextSegment(),t=e.getClosestCoordinate(s,!1);if(e.queryCoord2D(t,r),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(s,r)<=i)return!0}return!1}}const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();for(;o.nextPath();)for(;o.hasNextSegment();){const e=o.nextSegment();if(e.queryEnvelope(h),h.inflateCoords(n,n),!h.contains(s))continue;const t=e.getClosestCoordinate(s,!1);if(e.queryCoord2D(t,r),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(s,r)<=i)return!0}return!1}function No(e,t,s){return vo(e,t,s)&&!qo(e,t,s)}function To(t,s,r,i){const o=t.querySegmentIterator(),a=t.getImpl().getAccelerators(),h=t.hasNonLinearSegments();let m=null,l=null,g=null,u=null;if(null!==a){const t=a.getQuadTree();if(null!==t){const i=t.getIterator(s,r);h&&(m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,s.querySide(0,m),s.querySide(1,l),s.querySide(2,g),s.querySide(3,u));const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();a.setCoords({env2D:s}),a.inflateCoords(r,r);for(let e=i.next();-1!==e;e=i.next())if(o.resetToVertex(t.getElement(e),-1),o.hasNextSegment()){const e=o.nextSegment();if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){const t=e.getStartXY(),s=e.getEndXY();if(a.clipLine(t,s))return!0;continue}if(s.contains(e.getStartXY())||s.contains(e.getEndXY()))return!0;if(e.isIntersecting(m,r))return!0;if(e.isIntersecting(l,r))return!0;if(e.isIntersecting(g,r))return!0;if(e.isIntersecting(u,r))return!0}return!1}}if(h){m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,s.querySide(0,m),s.querySide(1,l),s.querySide(2,g),s.querySide(3,u);const e=t.querySegmentIterator();for(;e.nextPath();)for(;e.hasNextSegment();){const t=e.nextSegment();if(s.contains(t.getStartXY())||s.contains(t.getEndXY()))return!0;if(t.isIntersecting(m,r))return!0;if(t.isIntersecting(l,r))return!0;if(t.isIntersecting(g,r))return!0;if(t.isIntersecting(u,r))return!0}}else{const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();n.setCoords({env2D:s}),n.inflateCoords(r,r);const i=t.getImpl(),o=i.getAttributeStreamRef(0),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0,t=i.getPathCount();e<t;e++){let t=!0;const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,m=i.getPathStart(e),l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let g=m,u=i.getPathEnd(e);g<u;g++)if(t)o.queryPoint2D(2*g,s),l.assign(s),t=!1;else{if(o.queryPoint2D(2*g,a),r.setCoordsPoint2D(s),h.setCoordsPoint2D(a),n.clipLine(r,h))return!0;s.assign(a)}if(i.isClosedPath(e)&&!t&&(r.setCoordsPoint2D(s),h.setCoordsPoint2D(l),n.clipLine(r,h)))return!0}}return!1}function Go(t,s,n,r){const i=t.getImpl(),o=s.getImpl(),a=[0],h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(i.getIsSimple(0,a))&&(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(o.getIsSimple(0,a)),m=i.querySegmentIterator(),l=o.querySegmentIterator(),g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,0),u=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,0),c=new Dr(i,o,n);let _=!1;for(;c.next();){const e=c.getRedElement(),t=c.getBlueElement();m.resetToVertex(e,-1),l.resetToVertex(t,-1);const s=m.nextSegment(),r=l.nextSegment();let i=0;if(Oo(s,r)){if(r.isIntersecting(s,n)){_=!0;break}}else i=r.intersect(s,null,u,g,n);if(2===i){const e=g[0],t=g[1],r=s.calculateLength2D();if(h&&(t-e)*r>n)return!1;_=!0}else if(i){const e=g[0],t=u[0];if(e>0&&e<1&&t>0&&t<1)return!1;_=!0}}if(!_)return!1;const d=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),p=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),f=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let x,y;if(t.queryEnvelope(d),s.queryEnvelope(p),d.inflateCoords(1e3*n,1e3*n),p.inflateCoords(1e3*n,1e3*n),f.setCoords({env2D:d}),f.intersect(p),t.getPointCount()>10){if(x=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,f,n,0,r),x.isEmpty())return!1}else x=t;if(s.getPointCount()>10){if(y=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,f,n,0,r),y.isEmpty())return!1}else y=s;return sr(x,y,n,"F********",r,!1)}function Do(t,s,n,r){const i=t.getImpl(),o=s.getImpl(),a=[0],h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(i.getIsSimple(0,a))&&(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(o.getIsSimple(0,a)),m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),l=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),g=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(m),s.queryEnvelope(l);let u=!1;const c=xo(m,l,n),_=xo(l,m,n),d=i.querySegmentIterator(),p=o.querySegmentIterator(),f=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),y=new Dr(i,o,n);for(;y.next();){const e=y.getRedElement(),t=y.getBlueElement();d.resetToVertex(e,-1),p.resetToVertex(t,-1);const s=d.nextSegment(),r=p.nextSegment();let i=0;if(Oo(s,r)){if(r.isIntersecting(s,n))break}else i=r.intersect(s,null,x,f,n);if(2===i){const e=f[0],t=f[1],r=s.calculateLength2D();if(h&&(t-e)*r>n&&(u=!0,c&&_))return!0}else if(i){const e=f[0],t=x[0];if(e>0&&e<1&&t>0&&t<1)return!0}}const P=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),E=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let S,C;P.setCoords({env2D:m}),P.inflateCoords(1e3*n,1e3*n),E.setCoords({env2D:l}),E.inflateCoords(1e3*n,1e3*n),g.setCoords({env2D:P}),g.intersect(E);let I="";if(I+=u?"**":"T*",c){if(s.getPointCount()>10){if(C=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,g,n,0,r),C.isEmpty())return!1}else C=s;I+="****"}else C=s,I+="T***";if(_){if(t.getPointCount()>10){if(S=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,g,n,0,r),S.isEmpty())return!1}else S=t;I+="***"}else S=t,I+="T**";return sr(S,C,n,I,r,!1)}function Vo(t,s,n,r){const i=[!1],o=_o(t,s,n,i);if(i[0])return o;const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let h;if(s.queryEnvelope(a),a.inflateCoords(1e3*n,1e3*n),t.getPointCount()>10){if(h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,a,n,0,r),h.isEmpty())return!1}else h=t;return nr(h,s,n,r)}function Fo(t,s,n,r){const i=t.getImpl(),o=s.getImpl(),a=i.querySegmentIterator(),h=o.querySegmentIterator(),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),g=new Dr(i,o,n);let u=!1;for(;g.next();){const e=g.getRedElement(),t=g.getBlueElement();a.resetToVertex(e,-1),h.resetToVertex(t,-1);const s=a.nextSegment(),r=h.nextSegment();let i=0;if(Oo(s,r)?!u&&r.isIntersecting(s,n)&&(u=!0):i=r.intersect(s,null,l,m,n),2===i)u=!0;else if(i){const e=m[0],t=l[0];if(e>0&&e<1&&t>0&&t<1)return!1;u=!0}}if(!u)return!1;const c=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),_=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),d=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let p,f;if(t.queryEnvelope(c),s.queryEnvelope(_),c.inflateCoords(1e3*n,1e3*n),_.inflateCoords(1e3*n,1e3*n),d.setCoords({env2D:c}),d.intersect(_),t.getPointCount()>10){if(p=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,d,n,0,r),p.isEmpty())return!1}else p=t;if(s.getPointCount()>10){if(f=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,d,n,0,r),f.isEmpty())return!1}else f=s;return sr(p,f,n,"F********",r,!1)}function Ho(t,s,n,r){const i=t.getImpl(),o=s.getImpl(),a=i.querySegmentIterator(),h=o.querySegmentIterator(),m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(2,Number.NaN),g=new Dr(i,o,n);let u=!1;for(;g.next();){const e=g.getRedElement(),t=g.getBlueElement();a.resetToVertex(e,-1),h.resetToVertex(t,-1);const s=a.nextSegment(),r=h.nextSegment();let i=0;if(Oo(s,r)?!u&&r.isIntersecting(s,n)&&(u=!0):i=r.intersect(s,null,l,m,n),2===i)u=!0;else if(i){const e=m[0],t=l[0];if(e>0&&e<1&&t>0&&t<1)return!0;u=!0}}if(!u)return!1;const c=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),_=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),d=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),p=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),f=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(c),s.queryEnvelope(_),xo(_,c,n)){let e,i;if(d.setCoords({env2D:c}),d.inflateCoords(1e3*n,1e3*n),p.setCoords({env2D:_}),p.inflateCoords(1e3*n,1e3*n),f.setCoords({env2D:d}),f.intersect(p),t.getPointCount()>10){if(e=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,f,n,0,r),e.isEmpty())return!1}else e=t;if(s.getPointCount()>10){if(i=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(s,f,n,0,r),i.isEmpty())return!1}else i=s;return sr(e,i,n,"T********",r,!1)}return sr(t,s,n,"T*****T**",r,!1)}function ko(t,s,n,r){const i=[!1],o=_o(t,s,n,i);if(i[0])return o;const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let h;if(s.queryEnvelope(a),a.inflateCoords(1e3*n,1e3*n),t.getPointCount()>10){if(h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,a,n,0,r),h.isEmpty())return!1}else h=t;return rr(h,s,n,r)}function Ao(e,t,s,n){return 1===Lo(e,t,s)}function Mo(e,t,s,n){return 2===Lo(e,t,s)}function Uo(e,t,s,n){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,i=s*s;for(let o=0;o<e.getPointCount();o++)if(e.queryXY(o,r),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(r,t)<=i)return!1;return!0}function qo(e,t,s){const n=e.getBoundary();return!n.isEmpty()&&!Uo(n,t,s)}function Bo(t,s,n){const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.setCoords({env2D:t}),r.inflateCoords(n,n),r.containsEnvelope(s)?1073741824:r.isIntersecting(s)?t.isIntersecting(s)?t.xmin<s.xmin&&s.xmax<t.xmax?s.ymin<t.ymin&&s.ymax>t.ymax?0:1073741824:t.ymin<s.ymin&&s.ymax<t.ymax?s.xmin<t.xmin&&s.xmax>t.xmax?0:1073741824:0:0:4}function Oo(e,t){return e.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine||t.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine}function Yo(e,t,s,n,r,i,o,a){return{m_ivertexA:e,m_ipathA:t,m_scalarA0:s,m_scalarA1:n,m_ivertexB:r,m_ipathB:i,m_scalarB0:o,m_scalarB1:a}}class Ro{constructor(){this.m_overlapEvents=[]}compareOverlapEvents(e,t){const s=this.m_overlapEvents[e],n=this.m_overlapEvents[t];if(s.m_ipathA<n.m_ipathA)return-1;if(s.m_ipathA===n.m_ipathA){if(s.m_ivertexA<n.m_ivertexA)return-1;if(s.m_ivertexA===n.m_ivertexA){if(s.m_scalarA0<n.m_scalarA0)return-1;if(s.m_scalarA0===n.m_scalarA0){if(s.m_scalarA1<n.m_scalarA1)return-1;if(s.m_scalarA1===n.m_scalarA1&&s.m_ivertexB<n.m_ivertexB)return-1}}}return 1}}function Xo(e,t,s){const n=Ln(e,t,s);return n?1===n?1:2:0}function Lo(e,t,s){const n=zn(e,t,s);return n?1===n?1:2:0}function zo(e,t,s,n,r){for(let i=0;i<s;i++)r[i]=Lo(e,t[i],n)}function Wo(t,s,r,i,o){if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)zo(t,s,r,i,o);else if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(n),Zo(n,s,r,i,o)}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("")}function jo(e,t,s,i,o){const a=e.getGeometryType();a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?$o(e,t,s,i,o):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(a)?Jo():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("")}function Zo(e,t,s,n,r){if(e.isEmpty()){for(let e=0;e<s;e++)r[e]=0;return}const i=e.clone();i.inflateCoords(.5*-n,.5*-n);const o=e.clone();o.inflateCoords(.5*n,.5*n);for(let a=0;a<s;a++)i.contains(t[a])?r[a]=1:o.contains(t[a])?r[a]=2:r[a]=0}function Ko(e){if(e.isEmpty())return 0;switch(e.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return e.getImpl().getPointCount();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:return e.getImpl().getPathCount();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return e.getImpl().getOGCPolygonCount();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection:return e.getGeometryCount()}return 1}function Qo(e,t,s){if(s.reset(),t<3)return;const n=e[0].clone(),r=n.x,i=n.y,o=e[1].clone(),a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let h=2;h<t;h++)a.assign(e[h]),s.pe((a.x-n.x)*(o.y-i)),n.assign(o),o.assign(a);s.pe((r-n.x)*(o.y-i))}function Jo(e,t,s,n,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function $o(t,s,n,r,i){const o=t.getImpl(),h=o.getAccelerators();let m=null;h&&(m=h.getRasterizedGeometry());let l=n;for(let e=0;e<n;e++)i[e]=1,m&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);if(l){if(h){let t=null;null!==h&&null!==h.getQuadTree()&&(t=h.getQuadTree());const a=o.getPointCount();if(null===t&&a>20&&a*n>4*a+Math.log(a)*n&&(t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.F)(o)),t){let a=null;const h=o.querySegmentIterator(),m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;for(let e=0;e<n&&l;e++)if(1===i[e]){m.setCoords(s[e]),null===a?a=t.getIterator(m,r):a.resetIterator(m,r);let n=-1;for(let o=a.next();-1!==o;o=a.next()){h.resetToVertex(t.getElement(o),n),n=h.getPathIndex();if(h.nextSegment().isIntersectingPoint(s[e],r)){i[e]=2,l--;break}i[e]=0}}return}}const t=o.querySegmentIterator();for(;t.nextPath()&&l;)for(;t.hasNextSegment()&&l;){const e=t.nextSegment();for(let t=0;t<n&&l;t++)1===i[t]&&e.isIntersectingPoint(s[t],r)&&(i[t]=2,l--)}}for(let e=0;e<n;e++)1===i[e]&&(i[e]=0)}function ea(e,t,s,n,r){const i=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__._)(t),o=Math.max(4*i,s);return new oa(t,null,o,Number.NaN,r).approximateWithCirclesImpl(e,n)}function ta(){return Number.isNaN(this.radius.value())}function sa(){return{ptStart:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,ptEnd:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,center:new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0,radius:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.H,fcenter:new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a4,fradius2:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.M,maxError:Number.NaN,isLine:ta}}const na=5,ra=1/8;function ia(e,t,s,n){return{pt:e.clone(),t,err:s,checkCount:n}}class oa{constructor(e,t,s,n,r){this.m_left=e,this.m_tracker=r,this.m_eps=s,this.m_trackerCounter=0,this.m_tolerance=n,this.m_circleCheckCounter=0,this.m_bReversedLeft=!1,this.m_leftArc=sa()}closeToCircularArc(e,t,s,n,r,i){if(this.m_circleCheckCounter++,i.maxError=0,!oa.checkSweepAngle(e,t))return!1;if(i.ptStart.setCoordsPoint2D(s),i.ptEnd.setCoordsPoint2D(r),e.isCircular()){const t=e;return i.fradius2=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.M.constructDouble(t.getSemiMajorAxis()).mulDouble(t.getSemiMajorAxis()),i.radius.set(t.getSemiMajorAxis()),i.fcenter.assignPoint2D(t.getCenter()),i.center.set(t.getCenter()),!0}const o=i.ptEnd.sub(i.ptStart).clone();o.leftPerpendicularThis(),o.normalize();if(Math.abs(o.dotProduct(n.sub(i.ptStart)))<=this.m_eps)return!!this.confirmIsLine(i,o)&&(i.radius.set(Number.NaN),i.center.setCoords(0,0),!0);{const s=i.ptEnd.sub(i.ptStart),r=n.sub(i.ptStart),o=s.crossProduct(r);if(0===o)return!1;const a=.5*s.sqrLength(),h=.5*r.sqrLength();let m=a*r.y-h*s.y;m/=o;let l=s.x*h-r.x*a;l/=o;const g=Math.sqrt(m*m+l*l);if(4*Number.EPSILON*g>this.m_eps)return!1;const u=m+i.ptStart.x,c=l+i.ptStart.y;i.radius.set(g),i.center.setCoords(u,c);const _=this.maxCircleApproximationError(e,t,i);if(_>this.m_eps)return i.maxError=_,!1}const a=(new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a4).assignPoint2D(i.ptStart),h=(new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a4).assignPoint2D(i.ptEnd).sub(a),m=(new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a4).assignPoint2D(n).sub(a),l=h.crossProduct(m);if(l.isZero())return!1;const g=h.sqrLength().mulDouble(.5),u=m.sqrLength().mulDouble(.5),c=g.mul(m.y).sub(u.mul(h.y)),_=h.x.mul(u).sub(m.x.mul(g)),d=c.mul(c).add(_.mul(_)),p=l.clone();p.invertThis(),i.fradius2=d.mul(p).mul(p),i.fcenter.setCoords(c.mul(p).add(a.x),_.mul(p).add(a.y)),i.center.setWithEps(i.fcenter.asPoint2D()),i.radius.setWithEps(Math.sqrt(i.fradius2.toDouble()));const f=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(i.ptStart).subE(i.center),x=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a0.constructPoint2D(i.ptEnd).subE(i.center);if(!f.dotProduct(x).gt(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.J))return!1;const y=this.maxCircleApproximationError(e,t,i);return i.maxError=y,y<=this.m_eps}static checkSweepAngle(e,t){if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc){const s=e,n=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a5)(s,t.vmin),r=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a5)(s,t.vmax);return!(Math.abs(r-n)>.5*_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)}return!0}confirmIsLine(e,t){const s=e.ptEnd.sub(e.ptStart);return!(Math.abs(t.dotProduct(s.mul(.25)))>this.m_eps)&&!(Math.abs(t.dotProduct(s.mul(.75)))>this.m_eps)}maxCircleApproximationError(e,t,s){const r=[.25,.75],i=[.1,.25,.75,.9];let o,a;e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc?(o=r,a=r.length):(o=i,a=i.length);let h=0;for(let n=0;n<a;++n){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;e.queryCoord2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(t.vmin,t.vmax,o[n]),r);const i=r.sub(s.center.value()).length(),a=Math.abs(i-s.radius.value());a>h&&(h=a)}return h}approximateWithCirclesImpl(e,t){let s=1;t&&t.push(0);const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(9,Number.NaN);let r;e?r=this.m_left.getMonotonicPartParams(n.length,n):(n[0]=0,n[1]=1,r=2);const i=[],o=[],a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0);for(let h=1;h<r;h++){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E(n[h-1],n[h]);for(this.m_bReversedLeft=!oa.goodOrientation(this.m_left,e),this.m_bReversedLeft?(i.push(ia(a,e.vmin,0,0)),i.push(ia(a,e.vmax,0,0))):(i.push(ia(a,e.vmax,0,0)),i.push(ia(a,e.vmin,0,0))),i[0].pt=this.m_left.getCoord2D(i[0].t),i[1].pt=this.m_left.getCoord2D(i[1].t);i.length>1;){this.progress_();const e=i.at(-1);let n=e.checkCount,r=e.err;const a=e.pt.clone(),h=e.t,m=i[i.length-2].t,l=.5*(h+m),g=this.m_left.getCoord2D(l);if(r<=this.m_eps||n>=na){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;if(e.setCoords(h,m),this.closeToCircularArc(this.m_left,e,a,g,i[i.length-2].pt,this.m_leftArc)){t&&(this.m_bReversedLeft?o.push(h):t.push(m)),s++,i.pop();continue}n=0,r=this.m_leftArc.maxError}e.t=l,e.pt.setCoordsPoint2D(g),r*=ra,n++,e.err=r,e.checkCount=n,i.push(ia(a,h,r,n))}this.m_bReversedLeft&&t&&(t.length=t.length+o.length,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.b)(t,o.reverse(),t.length-o.length,0,o.length),o.length=0),i.length=0}return s}approximateWithCirclesImplPolyline(e){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P,s=[];if(!this.approximateWithCirclesImpl(!0,s))return t;let n=0;const r=this.m_left.getStartXY();t.startPath(r);for(let i=1;i<s.length;++i)if(e)t.lineTo(this.m_left.getCoord2D(s[i]));else{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_left.queryCoord2D(s[i],e);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;this.m_left.queryCoord2D(.5*(s[i]+n),o);const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.l;a.constructCircularArcThreePoint(r,e,o),t.addSegment(a,!1),r.assign(e),n=s[i]}return t}static goodOrientation(e,t){const s=e.getCoord2D(t.vmin),n=e.getCoord2D(t.vmax);return s.compare(n)<0}progress_(e=!1){}}function aa(e,t,s,n,r,i,o){ma(e,t,s,r,i,o),Ca(e,s,o)}function ha(e,t,s,r){if(!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e.getGeometryType()))return e;const i=e.getImpl();if(!i.hasNonLinearSegments())return e;const a=e.createInstance();if(a.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){a.setFillRule(e.getFillRule())}new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;const h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,l=[],g=[],u=[],c=e.getDescription().getAttributeCount()>1,_=i.querySegmentIterator();for(;_.nextPath();){let e=!0;for(;_.hasNextSegment();){const r=_.isClosingSegment(),i=_.nextSegment();if(!i.isCurve()){a.addSegment(i,e,r),e=!1;continue}let o,d=!1;const p=!0,f=!0;switch(i.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.O)(i,t,s,p,f,g,u,l),d=!0;break;default:o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.N)(i,t,s,!0,p,g,l)}const x=d?2:3;g[1].isNAN()?(m.createLine(),m.get().construct(g[0],g[x])):d?(m.createQuadraticRationalBezier(),m.get().constructArrayWeights(g,u)):(m.createCubicBezier(),m.get().constructPoints(g)),c&&e&&(i.queryCoord(l[0],h),m.get().setStart(h)),c&&(i.queryCoord(l[1],h),m.get().setEnd(h)),a.addSegment(m.get(),e,r&&1===o),e=!1;for(let e=1,t=o,s=x;e<t;++e,s+=x)g[s+1].isNAN()?(m.createLine(),m.get().construct(g[s],g[s+x])):d?(m.createQuadraticRationalBezier(),m.get().constructArrayWeights(g.slice(s),u.slice(s))):(m.createCubicBezier(),m.get().constructPoints(g.slice(s))),c&&(i.queryCoord(l[e+1],h),m.get().setEnd(h)),a.addSegment(m.get(),!1,r&&e+1===t)}}return a}function ma(e,t,s,n,r,i){e.hasCurves()?(e.setCurveStitcherPointer(n),n.m_impl=new xa(i,!1,null),n.m_impl.buildMonotonicCurveParentage(e,t,s,r)):n.m_impl=null}function la(e,t,s,n,r,i,o,a){e.hasCurves()?(e.setCurveStitcherPointer(i),i.m_impl=new xa(a,!0,r),i.m_impl.buildMonotonicCurveParentage(e,t,s,o),Ca(e,s,a)):i.m_impl=null}function ga(e){if(!e.hasSegmentParentage())return;const t=e.queryVertexIteratorOnSelection();for(let s=t.next();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=t.next())if(!e.getSegmentParentageBreakVertex(s)){e.getPathFromVertex(s);const t=e.getPrevVertex(s),n=t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.getSegmentParentage(t):-1,r=e.getSegmentParentage(s);-1!==r&&-1!==n&&r!==n&&e.setSegmentParentageBreakVertex(s,!0)}}function ua(e){if(!e.hasSegmentParentage())return;ga(e);const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0),s=e.queryVertexIteratorOnSelection();for(let o=s.next();o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;o=s.next())t.add(o);if(0===t.size())return;e.sortVerticesSimpleByY(t,0,t.size()),t.add(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);const n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();e.queryXY(t.read(0),n);let r=0;const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN();for(let o=1,a=t.size();o<a;o++){{const s=t.read(o);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.queryXY(s,i):i.setNAN()}if(!i.isEqualPoint2D(n)){if(o-r>1){let s=!1;for(let n=r;n<o;++n){const r=t.read(n);if(e.getSegmentParentageBreakVertex(r)){s=!0;break}}if(!s){const n=(t,s,n)=>{const r=e.getPrevVertex(t),i=e.getNextVertex(t);r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?s.assign(e.getXY(r)):s.setNAN(),i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?n.assign(e.getXY(i)):n.setNAN()},i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n(t.read(r),i,a);for(let e=r+1;e<o;++e){const r=t.read(e);if(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n(r,o,h);const m=(e,t)=>!!(e.equals(t)||e.isNAN()&&t.isNAN());if(!(m(o,i)&&m(h,a)||m(h,i)&&m(o,a))){s=!0;break}}}if(s)for(let n=r;n<o;++n)e.setSegmentParentageBreakVertex(t.read(n),!0)}n.setCoordsPoint2D(i),r=o}}}function ca(e,t){let s=t.isEmpty()?e:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,t,!0).total();return s>e&&(s=e),.125*s}function _a(t,s){return s||(s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty()),ca(t,s)}function da(e,t){return.125*e}function pa(e,t){return 3*e+3*t}class fa{constructor(){this.m_impl=null}stitchCurves(e,t,s,n){this.m_impl&&(this.m_impl.stitchCurves(e,t,s),n&&this.clearStitcher(e))}clearStitcher(e){this.m_impl&&(this.m_impl.clearStitcher(e),this.m_impl=null)}getOriginalVertexIndex(e,t){return this.m_impl.getOriginalVertexIndex(e,t)}getOriginalSegmentTypeInfo(e){return this.m_impl.getOriginalSegmentTypeInfo(e)}}class xa{constructor(e,t,s){this.m_originalPlanarSegments=[],this.m_progressTracker=null,this.m_nsr=null,this.m_progressTracker=e,this.m_nsr=s,this.m_tolerance=0,this.m_originalVertexIndex=-1,this.m_type=1,this.m_progressCounter=0,this.m_bIsSimple=t,this.m_densificationDeviation=NaN,this.m_maxSegmentsPerCurve=-1}buildMonotonicCurveParentage(e,t,s,r){const i=!1,o=!0;if(!e.hasCurves())return;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.hasSegmentParentage()),this.m_originalPlanarSegments.length=0,this.m_bIsSimple&&(this.m_originalVertexIndex=e.createUserIndex()),this.m_tolerance=s;const h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,l=[],g=[],u=[];for(let c=e.getFirstGeometry();c!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;c=e.getNextGeometry(c))for(let r=e.getFirstPath(c);r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;r=e.getNextPath(r)){let c=e.getPathSize(r),_=e.getFirstVertex(r),d=0,p=-1;for(let f=0;f<c;f++){let x=e.getNextVertex(_);if(!e.querySegment(_,m,!0,!1)){_=x;continue}if(0===d){p=e.getVertexIndex(_);const t=xa.regularizeCurve(e,m.get(),_,s);if(t>=0){this.m_nsr&&0===this.m_nsr.m_reason&&this.m_nsr.assign(new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(13,p,-1)),d=t,c=e.getPathSize(r),x=e.getNextVertex(_);const s=e.querySegment(_,m,!0,!1);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s)}}else d--;const y=e.getVertexIndex(_);let P;-1!==this.m_originalVertexIndex&&e.setUserIndex(_,this.m_originalVertexIndex,p),e.setSegmentToIndex(y,null);let E=!1;switch(m.get().getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:P=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.O)(m.get(),t,s,i,o,g,u,l),E=!0;break;default:{const e=!this.m_bIsSimple||!m.get().isMonotoneQuickAndDirty();P=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.N)(m.get(),t,s,e,i,g,l)}}const S=this.m_originalPlanarSegments.length;if(e.setSegmentParentageAndBreak(_,S,!0),!g[1].isNAN()){let t=null;t=E?new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.T({points:g,weights:u}):new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.y({cp:g}),t.snapControlPoints(s*s),e.setSegmentToIndex(y,t)}const C=E?2:3;for(let t=1,n=P,i=C;t<n;++t,i+=C){m.get().queryCoord(l[t],h);const n=e.insertVertex(r,x,h);if(-1!==this.m_originalVertexIndex&&e.setUserIndex(n,this.m_originalVertexIndex,p),!g[i+1].isNAN())if(E){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.T({points:g.slice(i),weights:u.slice(i)});t.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(n),t)}else{const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.y({cp:g.slice(i)});t.snapControlPoints(s*s),e.setSegmentToIndex(e.getVertexIndex(n),t)}e.setSegmentParentageAndBreak(n,S,!1)}P>1&&(f+=P-1,c=e.getPathSize(r)),this.m_originalPlanarSegments.push(m.releaseSegment()),_=x}}}buildLinearSegmentParentage(e,t,s,n,r){if(this.m_type=0,this.m_densificationDeviation=t,this.m_maxSegmentsPerCurve=n,!e.hasCurves())return;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.hasSegmentParentage()),this.m_tolerance=s,this.m_originalPlanarSegments=[],this.m_bIsSimple&&(this.m_originalVertexIndex=e.createUserIndex());const i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,o=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.D(0,t,0,this.m_progressTracker,!1,n),m=[];for(let l=e.getFirstGeometry();l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;l=e.getNextGeometry(l))for(let t=e.getFirstPath(l);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=e.getNextPath(t)){let n=e.getPathSize(t),r=e.getFirstVertex(t);for(let l=0;l<n;l++){let l=e.getNextVertex(r);if(!e.querySegment(r,o,!0,!1)){r=l;continue}if(xa.regularizeCurve(e,o.get(),r,s)>=0){n=e.getPathSize(t),l=e.getNextVertex(r);const s=e.querySegment(r,o,!0,!1);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s)}const g=e.getVertexIndex(r);-1!==this.m_originalVertexIndex&&e.setUserIndex(r,this.m_originalVertexIndex,g),e.setSegmentToIndex(g,null),m.length=0,h.densifySegment(o.get(),m),this.progress_();const u=this.m_originalPlanarSegments.length;e.setSegmentParentageAndBreak(r,u,!0);for(let s=1,n=m.length-1;s<n;++s){o.get().queryCoord(m[s],i);const n=e.insertVertex(t,l,i);e.setSegmentParentageAndBreak(n,u,!1),-1!==this.m_originalVertexIndex&&e.setUserIndex(n,this.m_originalVertexIndex,g)}this.m_originalPlanarSegments.push(o.releaseSegment()),r=l}}e.clearSegments()}stitchCurves(e,t,s){xa.st_stitchCurvesImpl(this,e,t,s,!1)}clearStitcher(e){this.m_originalPlanarSegments.length=0,-1!==this.m_originalVertexIndex&&(e.removeUserIndex(this.m_originalVertexIndex),this.m_originalVertexIndex=-1),e.deleteSegmentParentage()}static st_verifyParentage(e){xa.st_stitchCurvesImpl(null,e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,0,!0)}getOriginalVertexIndex(e,t){return-1!==this.m_originalVertexIndex&&t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.getUserIndex(t,this.m_originalVertexIndex):-1}getOriginalSegmentTypeInfo(e){if(-1!==e){const t=this.m_originalPlanarSegments[e];switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:return 0===t.projectionBehavior()?0:1;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier:return 2;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier2:return 3;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine:return-1;case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:return 4;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("")}}return-1}progress_(e=!1){this.m_progressCounter++}processSpanSmartTe_(e,t,s,n,r,i,o){if(t===s&&0===n)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.getNextVertex(t)===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.setSegmentToIndex(e.getVertexIndex(t),null),void e.setSegmentParentageAndBreak(t,-1);const h=e.getNextVertex(t),m=e.getXY(t),l=e.getXY(s);let g,u=0;{let t=2,r=m;for(let n=h;n!==s;n=e.getNextVertex(n)){const s=e.getXY(n);u+=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(s,r),r=s,t++}u+=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(l,r),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===n)}if(null===r)return e.setSegmentToIndex(e.getVertexIndex(t),null),void e.removeVertices(h,s);const c=o;let _=r.getClosestCoordinate(m,!1),d=r.getClosestCoordinate(l,!1);const p=r.calculateLength2D();let f=r.tToLength(_),x=r.tToLength(d);const y=Math.abs(f)>10*c&&Math.abs(f-p)>10*c,P=Math.abs(x)>10*c&&Math.abs(x-p)>10*c,E=e=>{const t=e.calculateLength2D();return Math.abs(t-u)>Math.max(.2*u,4*c)?null:e};let S=r.isClosed();if(!S){const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(r.getStartXY(),r.getEndXY());e<=c&&p>5*e&&(S=!0)}if(S){let i,o,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;if(2===n)h=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.lerp(m,l,.5),i=r.getClosestCoordinate(h,!1),o=r.tToLength(i);else{let s=e.getNextNthVertex(t,(n-1)/2);h=e.getXY(s),i=r.getClosestCoordinate(h,!1),o=r.tToLength(i);let a=Math.abs(o)>10*c&&Math.abs(o-p)>10*c;if(!a&&(n-1>=4&&(s=e.getNextNthVertex(t,(n-1)/4),i=r.getClosestCoordinate(h,!1),o=r.tToLength(i),a=Math.abs(o)>10*c&&Math.abs(o-p)>10*c),!a))return}let u=!1;const S=f===x;if(S){const s=0;let i=2,o=4;n-1<=4&&(i=s+1,o=s+2);const a=m,h=e.getXY(e.getNextNthVertex(t,i)),l=e.getXY(e.getNextNthVertex(t,o));u=-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.orientationNonRobust(a,h,l)*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(r.calculateArea2DHelper())>0}else P?y?u=o>f:o<x?(f=0,_=0):(f=p,_=1):o>f?(x=p,d=1):(x=0,d=0);if(S)g=r.clone(),g.dropAllAttributes(),u||g.reverse(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m.equals(l));else{let e=!1;_>d&&(e=!0,[_,d]=[d,_]),g=r.cut(_,d,!0),g.getDescription().getAttributeCount(),e&&g.reverse()}g.setCoordsForIntersector(m,l,!1),g=E(g),g&&(this.removeSpanBetween(e,t,s),e.setSegmentToIndex(e.getVertexIndex(t),g))}else if(y||P){if(!y||!P){if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(r.getStartXY(),r.getEndXY())<10*c){const n=[(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(_,d),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(_,d),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(_,d)];y?(n[1].second=0,n[2].second=1):(n[1].first=1,n[2].first=0);const i=[null,null,null],o=[0,0,0];let a=Number.MAX_VALUE,h=0;for(let e=0;e<3;e++){let t=!1;if(n[e].first>n[e].second){t=!0;const s=n[e].first;n[e].first=n[e].second,n[e].second=s}i[e]=r.cut(n[e].first,n[e].second,!0),i[e].dropAllAttributes(),t&&i[e].reverse(),i[e].setCoordsForIntersector(m,l,!1),o[e]=i[e].calculateLength2D();const s=Math.abs(u-o[e]);s<a&&(a=s,h=e)}return g=i[h],g=E(g),void(g&&(this.removeSpanBetween(e,t,s),e.setSegmentToIndex(e.getVertexIndex(t),g)))}}let n=!1;_>d&&(n=!0,[_,d]=[d,_]),g=r.cut(_,d,!0),g.dropAllAttributes(),n&&g.reverse(),g.setCoordsForIntersector(m,l,!1),g=E(g),g&&(this.removeSpanBetween(e,t,s),e.setSegmentToIndex(e.getVertexIndex(t),g))}else{if(g=r.clone(),g.dropAllAttributes(),f>x&&g.reverse(),u<Math.max(.75*p,p-this.m_densificationDeviation*(n-1))){const e=_>d?d:_,t=g.tToLength(e)+u;let s=g.lengthToT(t);s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(s,e,1),g=g.cut(e,s,!0)}g.setCoordsForIntersector(m,l,!1),g=E(g),g&&(this.removeSpanBetween(e,t,s),e.setSegmentToIndex(e.getVertexIndex(t),g))}}processSpanCurves_(e,t,s,n,r,i,o){if(t===s&&0===n)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.getNextVertex(t)===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.setSegmentToIndex(e.getVertexIndex(t),null),void e.setSegmentParentageAndBreak(t,-1);const h=e.getNextVertex(t);{let t=2;for(let n=h;n!==s;n=e.getNextVertex(n))t++;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===n)}if(null===r)return e.setSegmentToIndex(e.getVertexIndex(t),null),void e.removeVertices(h,s);const m=e.getXY(t),l=e.getXY(s);if(r.isClosed()){if(m.isEqualPoint2D(l)&&m.isEqualPoint2D(r.getStartXY())){let a;if(a=this.verifySegmentFitnessCurves(e,t,s,n,r,i,o)){const n=r.clone();return n.dropAllAttributes(),a<0&&n.reverse(),this.removeSpanBetween(e,t,s),void e.setSegmentToIndex(e.getVertexIndex(t),n)}}}else if(m.isEqualPoint2D(r.getStartXY())){if(l.isEqualPoint2D(r.getEndXY())){const h=r.clone();h.dropAllAttributes();const m=this.verifySegmentFitnessCurves(e,t,s,n,h,i,o);if(m)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m>0),this.removeSpanBetween(e,t,s),void e.setSegmentToIndex(e.getVertexIndex(t),h)}}else if(l.isEqualPoint2D(r.getStartXY())&&m.isEqualPoint2D(r.getEndXY())){const h=r.getReversed();h.dropAllAttributes();const m=this.verifySegmentFitnessCurves(e,t,s,n,h,i,o);if(m)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m>0),this.removeSpanBetween(e,t,s),void e.setSegmentToIndex(e.getVertexIndex(t),h)}this.processSpanSplitSegmentCurves(e,t,s,n,r,i,o)}processSpan_(e,t,s,n,r,i,o){return 0===this.m_type?void this.processSpanSmartTe_(e,t,s,n,r,i,o):void this.processSpanCurves_(e,t,s,n,r,i,o)}processSpanSplitSegmentCurves(e,t,s,n,r,i,o){if(r.isLine())return;if(this.fitSegmentToSpanCurves(e,t,s,n,r,i,o))return;const a=o*o;let h=n,m=t;const l=e.getXY(t);let g=r.getClosestCoordinate(l,!1);const u=r.getCoord2D(g);let c=!1;const _=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(l,u);if(_>a){const n=e.getNextVertex(t);if(this.approximateSpanSectionCurves(e,t,r,i,o),n===s)return;m=n,c=!0,h-=1}let d=s;const p=e.getXY(s);g=r.getClosestCoordinate(p,!1);const f=r.getCoord2D(g);let x=!1;const y=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(p,f);if(y>a){const t=e.getPrevVertex(s);if(this.approximateSpanSectionCurves(e,t,r,i,o),t===m)return;d=t,x=!0,h-=1}if((c||x)&&this.fitSegmentToSpanCurves(e,m,d,h,r,i,o))return;let P=!1;if(!c&&_>0){const s=e.getNextVertex(t);if(this.approximateSpanSectionCurves(e,t,r,i,o),s===d)return;m=s,c=!0,P=!0,h-=1}if(!x&&y>0){const t=e.getPrevVertex(s);if(this.approximateSpanSectionCurves(e,t,r,i,o),t===m)return;d=t,x=!0,P=!0,h-=1}if(P&&this.fitSegmentToSpanCurves(e,m,d,h,r,i,o))return;let E=m;for(;;){const t=e.getNextVertex(E);if(this.approximateSpanSectionCurves(e,E,r,i,o),E=t,E===d)return}}fitSegmentToSpanCurves(e,t,s,n,r,i,o){const a=[];a.push(e.getXY(t));let h=t;const m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(;;){e.querySegment(h,m,!1,!0);const t=[.1,.25,.4,.5,.6,.75,.9,1];let r=0;for(const e of t){(2===n||1&r)&&a.push(m.get().getCoord2D(e)),r++}if(h=e.getNextVertex(h),h===s)break}const l=(()=>{let e=a[0].compare(a.at(-1));if(0===e){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.K(0);Qo(a,a.length,t),e=t.getResult()>=0?-1:1}return e>0})();l&&a.reverse();const g=r.clone();if(g.dropAllAttributes(),l&&g.reverse(),g.setSegmentFromCoordsForStitcher(a,a.length),l&&g.reverse(),g.snapControlPoints(this.m_tolerance*this.m_tolerance),this.verifySegmentFitnessCurves(e,t,s,n,g,i,o)){this.removeSpanBetween(e,t,s);const n=e.getVertexIndex(t);return e.setSegmentToIndex(n,g),!0}return!1}approximateSpanSectionCurves(e,t,s,r,o){const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;if(!e.querySegment(t,a,!0,!1))return;const h=s.getGeometryType();if(h!==a.get().getGeometryType()){if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc){if(a.get().getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2)return;if(0===s.projectionBehavior()){const s=[];ea(!1,a.get(),o,s,this.m_progressTracker);const n=e.getNextVertex(t),r=e.getPathFromVertex(t),i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;let h=t;for(let t=1,o=s.length;t<o;t++){const o=s[t],m=a.get().getCoord2D(s[t-1]),l=a.get().getCoord2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(s[t-1],o,.5));a.get().queryCoord(o,i);const g=i.getXY(),u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.l;u.constructCircularArcThreePoint(m,g,l);let c=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;o<1&&(c=e.insertVertex(r,n,i)),e.setSegmentToIndex(e.getVertexIndex(h),u),h=c}return}{const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,3);a.get().queryControlPoints(s);const n=[0,0,0];a.get().queryWeights(n);const r=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.U)(n),i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.l;return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.V)(s,r*r,null,!1,i),void e.setSegmentToIndex(e.getVertexIndex(t),i)}}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("approximate_span_section_")}}verifySegmentFitnessCurves(e,t,s,n,r,i,o){const a=e.getXY(t),h=e.getXY(s);if(!a.isEqualPoint2D(r.getStartXY())||!h.isEqualPoint2D(r.getEndXY()))return 0;let m=0;if(r.isClosed()){const e=r.getCoord2D(.1).sub(a);m=r.getCoord2D(.7).sub(a).crossProduct(e)>=0?1:-1}const l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.W.s_maxMonotonicPartParams,Number.NaN);let g=r.getMonotonicPartParams(l.length,l);g--;const u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L,c=[1,.5,.75,.25];let _=0,d=t;const p=a.clone();for(;;){const t=e.getNextVertex(d);let n=e.getSegment(d);null===n&&(e.queryLineConnector(d,u,!0),n=u);for(let e=t===s?1:0;e<c.length;e++){const t=n.getCoord2D(c[e]);if(!r.isCloserThanDistance(t,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.unit(),o))return 0}if(g>1)for(let e=1;e<g;){const t=r.getCoord2D(l[e]);n.isCloserThanDistance(t,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.unit(),o)?(l[g-1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(l[e],l[e]=l[g-1]),g--):e++}if(m){const e=n.getCoord2D(.25);_+=e.sub(a).crossProduct(p.sub(a)),p.assign(e),e.assign(n.getCoord2D(.75)),_+=e.sub(a).crossProduct(p.sub(a)),p.assign(e)}if(d=t,d===s)return g>1?0:m?_<0?-m:m:1}}removeSpanBetween(e,t,s){e.setSegmentToIndex(e.getVertexIndex(t),null);const n=e.getNextVertex(t);n!==s&&e.removeVertices(n,s)}static st_stitchCurvesImpl(e,t,s,n,r){if(!t.hasSegmentParentage())return;ga(t);let i=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t.getFirstGeometry():s;for(;i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;)if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.l)(t.getGeometryType(i))){for(let s=t.getFirstPath(i);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=t.getNextPath(s)){let i=t.getPathSize(s);const o=t.isClosedPath(s);o&&(i+=1);let h=t.getFirstVertex(s);const m=t.getSegmentParentage(h);if(o){if(-1!==m&&!t.getSegmentParentageBreakVertex(h)){let e=t.getPrevVertex(h);const s=h;for(let n=0;;n++){const r=t.getSegmentParentage(e);if(m!==r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===r);break}if(h=e,t.getSegmentParentageBreakVertex(e))break;if(e===s){h=s,t.setSegmentParentageBreakVertex(h,!0);break}e=t.getPrevVertex(e),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n<i)}}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===m||t.getSegmentParentageBreakVertex(h));let l=h;for(let s=0;s<i&&l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const o=t.getSegmentParentage(l);if(-1===o){if(s++,l=t.getNextVertex(l),l===h)break;continue}let m=0,g=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const u=l;m=1;let c=t.getNextVertex(u);for(;s<i&&c!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){s++,g=c,m++;const e=t.getSegmentParentage(c);if(-1===e||t.getSegmentParentageBreakVertex(c))break;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e===o),c=t.getNextVertex(c)}if(g===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);break}if(!r){const s=e.m_originalPlanarSegments[o];e.processSpan_(t,u,g,m,s,o,n)}if(l=g,l===h)break}}if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;i=t.getNextGeometry(i)}else i=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t.getNextGeometry(i):_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}static st_stitchCurvesFromLinesImpl(e,t,s,n,r){let i=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t.getFirstGeometry():s;for(;i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){for(let s=t.getFirstPath(i);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=t.getNextPath(s)){let i=t.getPathSize(s);t.isClosedPath(s)&&(i+=1);let o=!0,h=!1;const m=t.getFirstVertex(s);let l=m;for(let s=0;s<i&&l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){let g=t.getSegmentParentage(l);if(-1===g||o){o=!1,s++,l=t.getNextVertex(l),h=!0;continue}let u,c,_=0;if(h?(u=t.getPrevVertex(l),c=l,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(u!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(c!==u),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===t.getSegmentParentage(u)||m===u)):(u=l,c=t.getNextVertex(u),s++,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(c!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(c!==u),g=t.getSegmentParentage(c)),_=2,h=!1,-1===g||t.getSegmentParentageBreakVertex(c)){l=c;continue}let d=t.getNextVertex(c);for(s++;s<i&&d!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){c=d,_++;const e=t.getSegmentParentage(d);if(-1===e||t.getSegmentParentageBreakVertex(d))break;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e===g),s++,d=t.getNextVertex(d)}if(!r){const s=e.m_originalPlanarSegments[g];e.processSpan_(t,u,c,_,s,g,n)}l=c}}if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;i=t.getNextGeometry(i)}}static st_stitchCurvesFromCurvesImpl(e,t,s,n,r){let i=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t.getFirstGeometry():s;for(;i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;)if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.l)(t.getGeometryType(i))){for(let s=t.getFirstPath(i);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=t.getNextPath(s)){let i=t.getPathSize(s);const o=t.isClosedPath(s);o&&(i+=1);let h=t.getFirstVertex(s);if(o){if(-1!==t.getSegmentParentage(h)){let e=h;for(let n=0;!t.getSegmentParentageBreakVertex(e);n++){if(n===i){h=t.getFirstVertex(s),t.setSegmentParentageBreakVertex(e,!0);break}e=t.getPrevVertex(e)}}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===t.getSegmentParentage(h)||t.getSegmentParentageBreakVertex(h));let m=h;for(let s=0;s<i&&m!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const o=t.getSegmentParentage(m);if(-1===o){s++,m=t.getNextVertex(m);continue}let h=0,l=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const g=m;h=1;let u=t.getNextVertex(g);for(;s<i&&u!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){s++,l=u,h++;const e=t.getSegmentParentage(u);if(-1===e||t.getSegmentParentageBreakVertex(u))break;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e===o),u=t.getNextVertex(u)}if(l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;if(!r){const s=e.m_originalPlanarSegments[o];e.processSpan_(t,g,l,h,s,o,n)}m=l}}if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)break;i=t.getNextGeometry(i)}else i=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t.getNextGeometry(i):_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}static regularizeCurve(e,t,s,n){let r=t.snapControlPoints(n*n);if(r){const n=e.getVertexIndex(s),r=t.clone();e.setSegmentToIndex(n,r)}if(t.getGeometryType()===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.y.type){const i=[],o=t.calculateSpecialPointsForCracking(n,i);if(o>0){const a=[];if(o>1)for(let e=0;e<o;e++)if(a.push(t.getCoord2D(i[e])),e>0){const t=(Math.abs(a[e].x)+Math.abs(a[e].y))*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.g)(),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(a[e-1],a[e]);if(s<t&&s>0){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.U)(a[e-1],a[e],.5,t),a[e-1]=t,a[e]=t}}e.splitSegment(s,i,o),r=e.snapControlPoints(s,o+1,n*n)||r;for(let t=0;t<o;t++)s=e.getNextVertex(s),e.setSegmentParentageBreakVertex(s,!0);return o}}return r?0:-1}}function ya(e,t,s,n,r){return new ba(e,s,t,n,r).do_()}function Pa(e,t,s){const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(e);return ln(t.getX(),t.getY(),s.getX(),s.getY(),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.a)(n))}function Ea(e,t,s=1,n=1,r=1,i=1){if(n>i)return e;if(i>n)return t;const o=[0],a=[0],h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;return cn(e,t,s,n,r,i,h,a,o),h}function Sa(e,t,s){const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(t),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Q)(t);return!!_n(e,n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,null,s)||Mn(!0,e,r,null,s)}function Ca(e,t,s){return ba.fixCurveTwoPointLoops(e,t,s)}function Ia(e){return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(e)}class ba{constructor(e,t,s,n,r){this.m_shape=e,this.m_progressTracker=t,this.m_tolerance=s,this.m_bFilterDegenerateSegments=n,this.m_bTrackChanges=r,this.m_progressCounter=0}do_(){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(this.m_tolerance.tolerance,this.m_tolerance.resolution),t=1e-5,s=1e-6,n=Ia(e);let r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Q)(e);const o=r*(1+t);r*=1+s;let a=!1;const h=this.m_shape.getTotalPointCount()+10>30?1e3:(this.m_shape.getTotalPointCount()+10)*(this.m_shape.getTotalPointCount()+10),m=this.m_shape.hasPointFeatures();for(let l=0;;l++){this.m_shape.dbgCheckSelection(),l>h&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("crack_and_cluster_iteration_exceeded"),this.m_shape.dbgVerifyMonotone();let e=-1;0===l&&(e=this.firstCrack_(),a||=e>0);const t=this.cluster_(n);if(this.m_shape.dbgVerifyMonotone(),a||=t,this.m_bFilterDegenerateSegments){const e=0!==this.m_shape.filterClosePoints(n,!0,!1,this.m_bTrackChanges,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);a||=e,this.m_shape.dbgVerifyMonotone()}const s=this.m_shape.snapControlPointsOnSelection(o*o);a||=s,this.m_shape.dbgCheckSelection();let g=!1;if((0===l&&-1===e||m||Mn(!0,this.m_shape,r,null,this.m_progressTracker))&&(g=this.crack_(o),a||=g,this.m_shape.dbgVerifyMonotone()),!g&&!ba.fixCurveTwoPointLoops(this.m_shape,n,this.m_progressTracker)){this.m_shape.dbgVerifyMonotone();break}}return a&&ua(this.m_shape),a}cluster_(e){return mn(this.m_shape,e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_bTrackChanges,this.m_progressTracker)}crack_(e){return An(this.m_shape,e,this.m_bTrackChanges,this.m_progressTracker)}static fixCurveTwoPointLoops(e,t,s){if(!e.hasCurves())return!1;e.dbgVerifyCurves();const n=e.createUserIndexUninitialized(),r=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0),i=e.queryVertexIteratorOnSelection();for(let a=i.next();a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=i.next())r.add(a),e.setUserIndex(a,n,-1);if(0===r.size())return!1;r.add(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),e.sortVerticesSimpleByY(r,0,r.size()-1);let o=0;const h=e.getXY(r.read(o)),m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(Number.NaN,Number.NaN),l=[];for(let a=1,g=r.size();a<g;++a){const t=r.read(a),s=t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.getXY(t):m;if(s.equals(h))continue;const i=[];for(let m=o;m<a;m++){const t=r.read(m),s=e.getPrevVertex(t);if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&-1===e.getUserIndex(s,n)){const t=wa(e.getXY(s),e.getSegment(s));0!==_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(h,t.otherPt)&&(t.vert=s,t.dir=-1,i.push(t)),e.setUserIndex(s,n,1)}const o=e.getNextVertex(t);if(o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&-1===e.getUserIndex(t,n)){const s=wa(e.getXY(o),e.getSegment(t));0!==_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(h,s.otherPt)&&(s.vert=t,s.dir=1,i.push(s)),e.setUserIndex(t,n,1)}}if(i.length>1){i.sort(((e,t)=>Ta(e,t)));const e=wa(m.clone(),null);i.push(e);let t=0;for(let s=1,n=i.length;s<n;s++)if(!i[s].otherPt.equals(i[s-1].otherPt)){if(s-t>1&&null!==i[t].seg){let e=!1;const n=t;for(let r=t+1;r<s;r++)if(!va(i[n],i[r])){e=!0;break}if(e)for(let r=t;r<s&&null!==i[r].seg;r++)l.push(i[r].vert)}t=s}}o=a,h.setCoordsPoint2D(s)}for(const g of l){const s=e.getSegment(g);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==s);const n=e.getXY(g),r=e.getXY(e.getNextVertex(g));if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(n,r)<3*t)e.setSegmentToIndex(e.getVertexIndex(g),null);else{const t=s.lengthToT(.5*s.calculateLength2D());e.splitSegment(g,[t],1)}}return e.removeUserIndex(n),l.length>0}firstCrack_(){const e=this.m_shape.getEnvelope2D(this.m_progressTracker),t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,e,!0).total();if(4*t<this.m_tolerance.total()){let e=!1;const s=1.1*t,n=t,r=this.cluster_(s);e||=r;let i=0;this.m_bFilterDegenerateSegments&&(i=this.m_shape.filterClosePoints(0,!0,!1,this.m_bTrackChanges,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n));const o=this.crack_(n);return e||=o,e?1:i?2:0}return-1}progress_(e=!1){this.m_progressCounter++,!e&&4095&this.m_progressCounter||(this.m_progressCounter=0)}}function wa(e,t){return{otherPt:e,seg:t,vert:-1,dir:0}}function va(e,t){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.otherPt.equals(t.otherPt)),null===e.seg)return null===t.seg;if(null===t.seg)return!1;const s=e.seg.getGeometryType();if(s!==t.seg.getGeometryType())return!1;if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier){const s=e.seg,n=t.seg;let r=s.getControlPoint1(),i=s.getControlPoint2();-1===e.dir&&(i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(r,r=i));let o=n.getControlPoint1(),a=n.getControlPoint2();return-1===t.dir&&(a=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(o,o=a)),r.equals(o)&&i.equals(a)}if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2){const s=e.seg,n=t.seg,r=s.getControlPoint1(),i=n.getControlPoint1();if(!r.equals(i))return!1;const o=[0,0,0];s.queryWeights(o),-1===e.dir&&(o[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(o[0],o[0]=o[2]));const a=[0,0,0];return n.queryWeights(a),-1===t.dir&&(a[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(a[0],a[0]=a[2])),o[0]===a[0]&&o[1]===a[1]&&o[2]===a[2]}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}function Na(e,t){if(null===e.seg||null===t.seg)return null!==e.seg?-1:null!==t.seg?1:0;const s=e.seg.getGeometryType(),n=t.seg.getGeometryType();return s<n?-1:s>n?1:0}function Ta(e,t){const s=e.otherPt.compare(t.otherPt);return 0!==s?s:Na(e,t)}var Ga=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h,Da=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f,Va=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z;function Fa(e){switch(e){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 0:return 0;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0,"unrecognized cut side")}return 3}function Ha(){return{unsplitBehavior:0,allCrossRoadsImpassable:!1,ogcRule:!1}}function ka(e,t,s,n){return new Ka(n).autoCompleteImpl(e,t,s)}function Aa(e,t,s,r,i,o,a){const h=new Ka(i);h.m_bOGCOutput=!0;const m=e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&1===e.getFillRule()&&!(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(r);return h.planarSimplifyImpl_(e,t,m,s,r,i,o,a)}function Ma(e,t,s,n,r,i,o,a){return new Ka(i).planarSimplifyImpl_(e,t,s,n,r,i,o,a)}function Ua(e,t,s,n){const r=new Ka(n),i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,o=i.addGeometry(t),h=r.planarSimplifyNoCrackingAndCluster(e,i,o,s);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(h,"planar_simplify_no_cracking_and_cluster");return i.getGeometry(o)}function qa(e,t,s,n,r,i,o){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}function Ba(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}function Oa(e,t,s){return Ja(e,t,s)}function Ya(t,s,r,i){if(t.isEmpty()||s.isEmpty()||t.getDimension()>s.getDimension())return $a(eh(t),t,s,"-");const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryEnvelope(o);const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(a);const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;h.setCoords({env2D:o}),h.mergeEnvelope2D(a);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(r,h,!0),l=a.clone(),g=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(m);if(l.inflateCoords(g,g),!o.isIntersecting(l))return $a(eh(t),t,s,"-");const u=new Ka(i),c=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,_=c.addGeometry(eh(t)),d=c.addGeometry(eh(s));let p=0,f=0,x=null;if(c.hasCurves()){x=new fa;const e=c.getEnvelope2D(i);f=da(m.total());const t=_a(m.total(),e);p=pa(t,f),aa(c,t,m.total(),12e3,x,null,i)}u.setEditShapeCrackAndCluster(c,m.add(p));const y=u.difference(_,d);null!==x&&x.stitchCurves(c,y,f,!0);const P=$a(c.getGeometry(y),t,s,"-");return Ga(P.getGeometryType())&&(P.getImpl().setIsSimple(4,m.total()),P.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&P.getImpl().updateOGCFlagsProtected()),P}function Ra(t,s,r,i){if(t.getDimension()>s.getDimension())return $a(eh(t),t,s,"^");if(t.getDimension()<s.getDimension())return $a(eh(s),t,s,"^");if(t.isEmpty())return $a(eh(s),t,s,"^");if(s.isEmpty())return $a(eh(t),t,s,"^");const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryEnvelope(o);const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(a);const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;h.setCoords({env2D:o}),h.mergeEnvelope2D(a);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(r,h,!0),l=new Ka(i),g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,u=g.addGeometry(eh(t)),c=g.addGeometry(eh(s));let _=0,d=null;if(g.hasCurves()){d=new fa;const e=g.getEnvelope2D(i);_=da(m.total());aa(g,_a(m.total(),e),m.total(),12e3,d,null,i)}l.setEditShapeCrackAndCluster(g,m);const p=l.symmetricDifference(u,c);null!==d&&d.stitchCurves(g,p,_,!0);const f=$a(g.getGeometry(p),t,s,"^");return Ga(f.getGeometryType())&&(f.getImpl().setIsSimple(4,m.total()),f.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&f.getImpl().updateOGCFlagsProtected()),f}function Xa(e,t,s){return Qa(e,t,s,!0)}function La(e,t,s){return e.isEmpty()||t.isEmpty()?e.createInstance():Pa(s,e,t)?new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({copy:Ea(e,t)}):e.createInstance()}function za(t,s,r,i){const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o);const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(a);const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();h.setCoords({env2D:o}),h.mergeEnvelope2D(a);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(r,h,!0),l=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(a),g=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(m);if(l.inflateCoords(g,g),!o.isIntersecting(l)){if(t.getDimension()<=s.getDimension())return $a(eh(t.createInstance()),t,s,"&");if(t.getDimension()>s.getDimension())return $a(eh(s.createInstance()),t,s,"&")}const u=new Ka(i),c=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,_=c.addGeometry(eh(t)),d=c.addGeometry(eh(s));let p=0,f=0,x=null;if(c.hasCurves()){x=new fa;const e=c.getEnvelope2D(i);f=da(m.total());const t=_a(m.total(),e);p=pa(t,f),aa(c,t,m.total(),12e3,x,null,i)}u.setEditShapeCrackAndCluster(c,m.add(p));const y=u.intersection(_,d);null!==x&&x.stitchCurves(c,y,f,!0);const P=$a(c.getGeometry(y),t,s,"&");return Ga(P.getGeometryType())&&(P.getImpl().setIsSimple(4,m.total()),P.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&P.getImpl().updateOGCFlagsProtected()),P}function Wa(t,s,r,i){const o=new Array(3),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(a);const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(h);const m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();m.setCoords({env2D:a}),m.mergeEnvelope2D(h);const l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(r,m,!0),g=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(h),u=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(l);if(g.inflateCoords(u,u),!a.isIntersecting(g)){if(t.getDimension()<=s.getDimension()){const e=$a(eh(t.createInstance()),t,s,"&");return o[e.getDimension()]=e,o}if(t.getDimension()>s.getDimension()){const e=$a(eh(s.createInstance()),t,s,"&");return o[e.getDimension()]=e,o}}const c=new Ka(i),_=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,d=_.addGeometry(eh(t)),p=_.addGeometry(eh(s));let f=0,x=0,y=null;if(_.hasCurves()){y=new fa;const e=_.getEnvelope2D(i);x=da(l.total());const t=_a(l.total(),e);f=pa(t,x),aa(_,t,l.total(),12e3,y,null,i)}c.setEditShapeCrackAndCluster(_,l.add(f)),_.dbgVerifyCurves();const P=c.intersectionEx(d,p);for(const e of P){null!==y&&y.stitchCurves(_,e,x,!1);const r=$a(_.getGeometry(e),t,s,"&");Ga(r.getGeometryType())&&(r.getImpl().setIsSimple(4,l.total()),r.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&r.getImpl().updateOGCFlagsProtected()),o[r.getDimension()]=r}return null!==y&&y.clearStitcher(_),o}function ja(e,s,n,r,i,o=!1){0===s&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("not enough geometries to dissolve");let a=0;for(let t=0,d=s;t<d;t++)a=Math.max(e[t].getDimension(),a);if(2===a||1===a)return new Ka(r).dissolveMultiPaths_(a,!1,e,s,n,i,o);let h=0,m=-1;for(let t=0,d=s;t<d;t++)e[t].getDimension()===a&&(-1===m&&(m=t),e[t].isEmpty()||(m=t,h++));if(h<2)return eh(e[m]);const l=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty(),g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;let u=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let t=0,d=s;t<d;t++)if(e[t].getDimension()===a&&!e[t].isEmpty()){u===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?u=g.addGeometry(eh(e[t])):g.appendGeometry(u,eh(e[t]));const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty();e[t].queryLooseEnvelope(s),l.mergeEnv3D(s)}const c=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(n,l.getEnvelope2D(),!0),_=new Ka(r);if(o){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Y)(n,l.getEnvelopeZs(),!0);return _.planarSimplify3DImpl_(g,c,e,0,!0)}return _.m_bOGCOutput=!0,_.planarSimplifyMultiPoints(g,c,!1,-1)}function Za(e,s,n,r,i,o=!1){s<2&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("not enough geometries to dissolve");let a=0;for(let t=0,p=s;t<p;t++)a=Math.max(e[t].getDimension(),a);if(2===a||1===a)return new Ka(r).dissolveMultiPaths_(a,!0,e,s,n,i,o);const h=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty(),m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;let l=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,g=0,u=-1;for(let t=0,p=s;t<p;t++)if(e[t].getDimension()===a&&(-1===u&&(u=t),!e[t].isEmpty())){u=t,l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?l=m.addGeometry(eh(e[t])):m.appendGeometry(l,eh(e[t]));const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty();e[t].queryLooseEnvelope(s),h.mergeEnv3D(s),g++}if(g<2)return eh(e[u]);const c=0===a?n:null,_=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(c,h.getEnvelope2D(),!0),d=new Ka(r);if(o){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Y)(c,h.getEnvelopeZs(),!0);return d.m_bOGCOutput=!0,d.planarSimplify3DImpl_(m,_,e,0,!0)}return d.planarSimplifyMultiPoints(m,_,!0,-1)}class Ka{constructor(e){this.m_topoGraph=null,this.m_maskLookup=[],this.m_dummyPt1=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_dummyPt2=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_fromEdgeForPolylines=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_progressCounter=0,this.m_bOGCOutput=!1,this.m_progressTracker=e}linesToPolygonsImpl(e,t){let s=0,n=0,r=null;if(e.hasCurves()){r=new fa;const i=e.getEnvelope2D(this.m_progressTracker);n=da(t.total());const o=_a(t.total(),i);s=pa(o,n),aa(e,o,t.total(),12e3,r,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,t.add(s));const i=this.m_topoGraph.createUserIndexForChains(),o=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(o,i,1);for(let h=this.m_topoGraph.getChainFirstIsland(o);h!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;h=this.m_topoGraph.getChainNextInParent(h))this.m_topoGraph.setChainUserIndex(h,i,1);const a=[];for(let h=this.m_topoGraph.getFirstChain();h!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;h=this.m_topoGraph.getChainNext(h)){if(1===this.m_topoGraph.getChainUserIndex(h,i))continue;this.m_topoGraph.setChainUserIndex(h,i,1);for(let e=this.m_topoGraph.getChainFirstIsland(h);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_topoGraph.getChainNextInParent(e))this.m_topoGraph.setChainUserIndex(e,i,1);if(0===this.m_topoGraph.getChainArea(h))continue;const t=this.m_topoGraph.extractPolygonFromChainAndIslands(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,h,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);null!=r&&r.stitchCurves(e,t,n,!1);const s=e.getGeometry(t);a.push(s)}return new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S(a)}autoCompleteImpl(e,t,s){let n=0,r=0,i=null;if(e.hasCurves()){i=new fa;const t=e.getEnvelope2D(this.m_progressTracker);r=da(s.total());const o=_a(s.total(),t);n=pa(o,r),aa(e,o,s.total(),12e3,i,null,this.m_progressTracker)}this.setEditShapeCrackAndCluster(e,s.add(n));const o=this.m_topoGraph.getGeometryID(t),a=this.m_topoGraph.createUserIndexForChains(),h=this.m_topoGraph.getFirstChain();this.m_topoGraph.setChainUserIndex(h,a,1);for(let l=this.m_topoGraph.getChainFirstIsland(h);l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;l=this.m_topoGraph.getChainNextInParent(l))this.m_topoGraph.setChainUserIndex(l,a,1);const m=[];for(let l=this.m_topoGraph.getFirstChain();l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;l=this.m_topoGraph.getChainNext(l)){if(1===this.m_topoGraph.getChainUserIndex(l,a))continue;this.m_topoGraph.setChainUserIndex(l,a,1);for(let e=this.m_topoGraph.getChainFirstIsland(l);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=this.m_topoGraph.getChainNextInParent(e))this.m_topoGraph.setChainUserIndex(e,a,1);if(0!==this.m_topoGraph.getChainParentage(l))continue;const t=this.m_topoGraph.getChainHalfEdge(l);let s=t,n=!1;do{const e=this.m_topoGraph.getHalfEdgeTwin(s);if(this.m_topoGraph.getHalfEdgeChain(e)!==l&&0!==(this.m_topoGraph.getHalfEdgeParentage(s)&o)){n=!0;break}s=this.m_topoGraph.getHalfEdgeNext(s)}while(s!==t);if(!n)continue;if(0===this.m_topoGraph.getChainArea(l))continue;const h=this.m_topoGraph.extractPolygonFromChainAndIslands(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,l,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);null!==i&&i.stitchCurves(e,h,r,!1);const g=e.getGeometry(h);m.push(g)}return new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S(m)}setEditShape(e,t=!1){null===this.m_topoGraph&&(this.m_topoGraph=new tn),this.m_topoGraph.setEditShape(e,this.m_progressTracker,!0,t)}setEditShapeCrackAndCluster(e,t){ya(e,t,this.m_progressTracker,!0,!1);for(let s=e.getFirstGeometry();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=e.getNextGeometry(s))e.getGeometryType(s)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&er(e,s,-1,this.m_bOGCOutput,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_progressTracker);this.setEditShape(e)}setHalfEdgeOrientations_(e,t){const s=this.m_topoGraph.getShape();for(let n=s.getFirstGeometry();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=s.getNextGeometry(n))if(n===t)for(let t=s.getFirstPath(n);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=s.getNextPath(t)){let n=s.getFirstVertex(t);if(n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let r=s.getNextVertex(n);for(;r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;){const t=this.m_topoGraph.getClusterFromVertex(n),i=this.m_topoGraph.getClusterFromVertex(r),o=this.m_topoGraph.getHalfEdgeConnector(t,i);if(o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const t=this.m_topoGraph.getHalfEdgeTwin(o);this.m_topoGraph.setHalfEdgeUserIndex(o,e,1),this.m_topoGraph.setHalfEdgeUserIndex(t,e,2)}n=r,r=s.getNextVertex(n)}}}flushVertices_(e,t){const s=this.m_topoGraph.getShape(),n=s.hasSegmentParentage(),r=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,i=s.insertPath(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);t.push(t[0]);const o=t.length;let a=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let h=0;h<o;h++){const e=t[h];if(a=s.addVertex(i,e),!n)continue;const m=this.m_topoGraph.getClusterFromVertex(e);if(h>0&&this.m_topoGraph.isBreakNode(m)&&s.setSegmentParentageBreakVertex(a,!0),h<o-1){const e=this.m_topoGraph.getHalfEdgeConnector(m,this.m_topoGraph.getClusterFromVertex(t[h+1])),n=this.m_topoGraph.getSegmentParentage(e);s.setSegmentParentageAndBreak(a,n,h>0||this.m_topoGraph.isBreakNode(m)),this.m_topoGraph.isHalfEdgeCurve(e)&&(this.m_topoGraph.querySegmentXY(e,r),s.setSegmentToIndex(s.getVertexIndex(a),r.get().clone()))}}if(n){const e=this.m_topoGraph.getClusterFromVertex(t[o-1]);this.m_topoGraph.isBreakNode(e)&&s.setSegmentParentageBreakVertex(a,!0)}s.setClosedPath(i,!0)}processPolygonCuts_(e,t,s,r){const i=this.m_topoGraph.getGeometryID(s),o=this.m_topoGraph.getGeometryID(r),a=[],h=this.m_topoGraph.getShape(),m=this.m_topoGraph.createUserIndexForHalfEdges();for(let l=this.m_topoGraph.getFirstCluster();l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;l=this.m_topoGraph.getNextCluster(l)){const s=this.m_topoGraph.getClusterHalfEdge(l);if(s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let r=s;do{if(1!==this.m_topoGraph.getHalfEdgeUserIndex(r,m)){let s=r,l=r,g=!1,u=0;do{if(this.m_topoGraph.setHalfEdgeUserIndex(s,m,1),!g){if(0!==(this.m_topoGraph.getHalfEdgeParentage(s)&o)){0!==(this.m_topoGraph.getHalfEdgeFaceParentage(s)&i)&&(l=s,g=!0)}}if(g){const t=this.m_topoGraph.getHalfEdgeOrigin(s),n=this.m_topoGraph.getClusterVertexIterator(t),r=this.m_topoGraph.getVertexFromVertexIterator(n);if(a.push(r),-1!==e){if(0!==(this.m_topoGraph.getHalfEdgeParentage(s)&o)){u|=this.m_topoGraph.getHalfEdgeUserIndex(s,e)}}}s=this.m_topoGraph.getHalfEdgeNext(s)}while(s!==l);if(g&&this.m_topoGraph.getChainArea(this.m_topoGraph.getHalfEdgeChain(l))>0){const e=h.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon);this.flushVertices_(e,a),-1!==t&&h.setGeometryUserIndex(e,t,u)}a.length=0}r=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(r))}while(r!==s)}this.m_topoGraph.deleteUserIndexForHalfEdges(m)}cutPolygonPolyline_(e,t,s,n){this.m_topoGraph.removeSpikes_();let r=-1;-1!==e&&(r=this.m_topoGraph.createUserIndexForHalfEdges(),this.setHalfEdgeOrientations_(r,s)),this.processPolygonCuts_(r,e,t,s),-1!==r&&(this.m_topoGraph.deleteUserIndexForHalfEdges(r),r=-1);const i=this.m_topoGraph.getShape();for(let o=i.getFirstGeometry();o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;o=i.getNextGeometry(o))o!==t&&o!==s&&n.push(o);n.sort(((e,t)=>{const s=i.getFirstPath(e),n=i.getRingArea(s),r=i.getFirstPath(t),o=i.getRingArea(r);return n<o?-1:n>o?1:0}))}cut(e,t,s,n,r){const o=this.m_topoGraph.getShape().getGeometryType(s),a=this.m_topoGraph.getShape().getGeometryType(n),h=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(o),l=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(a);if(2!==h||1!==l)if(1!==h||1!==l)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");else{new sh(this,e,t,s,n,r).Do()}else this.cutPolygonPolyline_(t,s,n,r)}progress_(e=!1){}isGoodParentage(e){return e>=0&&e<this.m_maskLookup.length&&this.m_maskLookup[e]}normalizeInputGeometry(e){const s=e.getGeometryType();if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e.getDescription()});return e.isEmpty()||t.addEnvelope(e,!1),t}if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:e.getDescription()});return e.isEmpty()||t.add(e),t}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(s)){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return e.isEmpty()||t.addSegment(e,!0),t}return s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline&&s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Unexpected geometry type"),e}dissolveNonSimplePolygons(e,t,s,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>0);const r=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;let i=0,o=-1;for(let a=0,h=t;a<h;a++)2===e[a].getDimension()&&(-1===o&&(o=a),e[a].isEmpty()||(i++,r.addGeometry(e[a])));return 0===i?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(o>=0),this.normalizeInputGeometry(e[o])):this.planarSimplifyPolygons(r,s,!0,!1,-1,!0)}dissolveMultiPaths_(t,s,i,h,m,g,u){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t>=1&&t<=2),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(h>0);const c=8&g?1:2,_=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty();let d=0,p=-1,f=!0;for(let e=0,r=h;e<r;e++)if(i[e].getDimension()===t&&(-1===p&&(p=e),!i[e].isEmpty())){p=e,d++;const s=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.n.constructEmpty();if(i[e].queryLooseEnvelope(s),_.mergeEnv3D(s),2===t&&f&&i[e].getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)if(16&g){const t=[0],s=i[e].getImpl().getIsSimple(0,t),n=this.m_bOGCOutput?5===s:(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(s);f&&=n}else{const t=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.h)(i[e],0);f&&=t}}if(d<2&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(p>=0),0===d||!(16&g)))return this.normalizeInputGeometry(i[p]);if(!f){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(s?null:m,_.getEnvelope2D(),!0);return this.dissolveNonSimplePolygons(i,h,e,g)}const x=i.slice(0,h),y=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(m,_.getEnvelope2D(),!0),P=10*(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(y);let E=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(0,0);if(u&&(E=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Y)(m,_.getEnvelopeZs(),!0)),1===d&&1===t&&2===c&&!s)return u?qa():this.m_bOGCOutput?Aa(x[p],y,!1,-1,this.m_progressTracker,c,!1):Ma(x[p],y,!1,!1,-1,this.m_progressTracker,c,!1);const S=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a2;S.startConstruction();let C=2===t?3:4,b=0;for(let l=0,I=h;l<I;l++){if(x[l].getDimension()!==t||x[l].isEmpty())continue;let i=x[l].getGeometryType();if(i!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(i)?(x[l]=this.normalizeInputGeometry(x[l]),i=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(i)),1===t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline);let e=-1;if(u)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0,"3d not implemented yet");else{const t=[0];e=x[l].getImpl().getIsSimple(y.total(),t)}if(this.m_bOGCOutput?5!==e:!(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(e))if(s)C=-1;else{u?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0,"3d not implemented yet"):this.m_bOGCOutput?x[l]=Aa(x[l],y,!1,-1,this.m_progressTracker,c,!1):x[l]=Ma(x[l],y,!1,!1,-1,this.m_progressTracker,c,!1);const e=[0];(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(x[l].getImpl().getIsSimple(y.total(),e)))}}else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon);const e=[0],t=x[l].getImpl().getIsSimple(0,e);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(t))}const h=x[l].getImpl();for(let t=0,s=h.getPathCount();t<s;t++){const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();h.queryLoosePathEnvelope(t,s),s.inflateCoords(P,P),S.addEnvelope(b,s),b++}}else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope);const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();x[l].queryLooseEnvelope(t),t.inflateCoords(P,P),S.addEnvelope(b,t),b++,C=-1}}S.endConstruction();const w=b,N=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(w,-2147483647),T=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(w,-1);let D=0;p=-1,b=0;for(let e=0,r=h;e<r;e++){if(x[e].getDimension()!==t)continue;if(-1===p&&(p=e),x[e].isEmpty())continue;p=e,D++;const s=x[e].getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)){for(let t=0,s=x[e].getPathCount();t<s;t++)T[b]=e,N[b]=-t-1,b++}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope),T[b]=e,N[b]=-1,b++}if(D<2&&2===t)return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(p>=0),this.normalizeInputGeometry(x[p]);let V=w;for(;S.next()&&V>0;){this.progress_();const e=S.getHandleA(),t=S.getHandleB(),s=S.getElement(e),n=S.getElement(t);T[s]!==T[n]&&(N[s]<0&&(V--,N[s]=-(N[s]+1)),N[n]<0&&(V--,N[n]=-(N[n]+1)))}const F=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;let H=!1,k=0;for(let e=0,r=h;e<r;e++){if(x[e].getDimension()!==t||x[e].isEmpty())continue;const s=x[e].getGeometryType(),r=k;let i=0,h=0;const m=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?x[e]:null;for(let t=r,n=N.length;t<n&&T[t]===e;t++)N[t]>=0&&(i++,h+=m?m.getPathSize(N[t]):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(x[e])),k++;if(h>.95*(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(x[e])){F.addGeometry(this.normalizeInputGeometry(x[e]));for(let e=r;e<k;e++)N[e]<0&&(N[e]=-(N[e]+1))}else{if(0===i){H=!0;continue}{H=!0,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!=m);const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:x[e].getDescription()}),i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:x[e].getDescription()}),h=s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?t:i;for(let e=r;e<k;e++)N[e]>=0&&h.addPath(m,N[e],!0);F.addGeometry(h)}}}let A;if(F.getFirstGeometry()!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const e=2===t,n=s?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,_.getEnvelope2D(),!0):y;let r=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.C(0,0);if(u&&(r=s?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Y)(null,_.getEnvelopeZs(),!0):E),2===t&&!(2&g)){F.collapseAllGeometriesToFirst();let e=0,t=null;if(F.hasCurves()&&!F.hasSegmentParentage()){t=new fa;const s=F.getEnvelope2D(this.m_progressTracker);e=da(n.total());aa(F,_a(n.total(),s),n.total(),12e3,t,null,this.m_progressTracker)}Vn(F,F.getFirstGeometry(),n.total(),this.m_progressTracker),null!==t&&t.stitchCurves(F,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e,!0)}if(u)A=this.planarSimplify3DImpl_(F,n,r,c,!0);else if(2===t)A=this.planarSimplifyPolygons(F,n,e,s,-1,!1);else{const e=Ha();e.ogcRule=this.m_bOGCOutput,e.allCrossRoadsImpassable=!0,e.unsplitBehavior=c,A=this.planarSimplifyPolylines(F,n,s,e,-1)}if(!H){const e=[0];C=A.getImpl().getIsSimple(n.total(),e)}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(H),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(p>=0),A=2===t?new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:x[p].getDescription()}):new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:x[p].getDescription()});if(H){let e=0;for(let t=0,s=N.length;t<s;t++){const s=T[t];if(!(s<0)&&N[t]<0){const n=x[s].getGeometryType(),r=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(n)?x[s]:null;if(r){const s=-(N[t]+1);e+=r.getPathSize(s)}else e+=4}}A.reserve(A.getPointCount()+e);for(let t=0,s=N.length;t<s;t++){const e=T[t];if(!(e<0)&&N[t]<0){const s=x[e].getGeometryType(),i=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(s)?x[e]:null;if(i){const e=-(N[t]+1);A.addPath(i,e,!0)}else s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope?A.addEnvelope(x[e],!1):((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(s)),A.addSegment(x[e],!0))}}}let U=0;if(2===t?-1!==C&&(C=3,U=s?0:y.total()):((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(1===t),s||-1===C||(U=y.total())),u||A.getImpl().setIsSimple(C,U),!s&&H)if(2===t){if(!u)return(new Eh).execute(A,m,!1,this.m_progressTracker);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0,"3d not yet implemented")}else 1===t&&1!==c&&(A=u?Ba():Ua(this.m_bOGCOutput,A,c,this.m_progressTracker),A.getImpl().setIsSimple(C,U));return A}dissolveTopoGraphCommonEdges_(){const e=this.m_topoGraph.createUserIndexForHalfEdges(),t=[];for(let s=this.m_topoGraph.getFirstCluster();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_topoGraph.getNextCluster(s)){const n=this.m_topoGraph.getClusterHalfEdge(s);let r=n;if(n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)do{this.progress_();if(1!==this.m_topoGraph.getHalfEdgeUserIndex(r,e)){const s=this.m_topoGraph.getHalfEdgeTwin(r);this.m_topoGraph.setHalfEdgeUserIndex(s,e,1),this.m_topoGraph.setHalfEdgeUserIndex(r,e,1);const n=this.m_topoGraph.getHalfEdgeFaceParentage(r);if(this.isGoodParentage(n)){const e=this.m_topoGraph.getHalfEdgeFaceParentage(s);this.isGoodParentage(e)&&t.push(r)}}r=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(r))}while(r!==n)}this.m_topoGraph.deleteUserIndexForHalfEdges(e),this.m_topoGraph.deleteEdgesBreakFaces_(t)}chooseVertexByOrder(e,t,s,n){let r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.j)(),i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let a=this.m_topoGraph.getClusterVertexIterator(e);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=this.m_topoGraph.incrementVertexIterator(a)){const e=this.m_topoGraph.getVertexFromVertexIterator(a),n=t.getUserIndex(e,s);n>=0&&n<r&&(r=n,i=e)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);let o=t.getUserIndex(i,n);return o>0&&(t.setUserIndex(i,n,--o),0===o&&t.setUserIndex(i,s,-1)),i}chooseVertexFromCluster_(e,t){return this.m_topoGraph.getVertexDominantFromCluster(e,t)}chooseVertexFromVertexCluster_(e,t){return this.m_topoGraph.getVertexDominant(e,t)}collectPolygonPathsPreservingFrom_(e,t,s,r,i){const o=this.m_topoGraph.getShape();if(o.getGeometryType(e)!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)return;const a=o.hasSegmentParentage(),h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let n=o.getFirstPath(e);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=o.getNextPath(n)){const e=o.getFirstVertex(n);this.m_topoGraph.getClusterFromVertex(e);const m=this.m_topoGraph.getHalfEdgeFromVertex(e);if(m===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;const l=this.m_topoGraph.getHalfEdgeUserIndex(m,s);if(1===l||2===l)continue;const g=this.m_topoGraph.getHalfEdgeFaceParentage(m);if(!this.isGoodParentage(g)){this.m_topoGraph.setHalfEdgeUserIndex(m,s,2);continue}this.m_topoGraph.setHalfEdgeUserIndex(m,s,1);const u=o.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);o.setClosedPath(u,!0);let c=m,_=e,d=this.m_topoGraph.getClusterFromVertex(_),p=1;do{this.progress_();const e=this.chooseVertexFromVertexCluster_(_,i),t=o.addVertex(u,e);if(this.m_topoGraph.isHalfEdgeCurve(c)&&(this.m_topoGraph.querySegmentXY(c,h),o.setSegmentToIndex(o.getVertexIndex(t),h.get().clone())),a){const e=this.m_topoGraph.getSegmentParentage(c);o.setSegmentParentageAndBreak(t,e,this.m_topoGraph.isBreakNode(d))}let n,m;-1!==r&&this.m_topoGraph.setClusterUserIndex(d,r,1),this.m_topoGraph.setHalfEdgeUserIndex(c,s,1),c=this.m_topoGraph.getHalfEdgeNext(c);do{n=1===p?o.getNextVertex(_):o.getPrevVertex(_),m=n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?this.m_topoGraph.getClusterFromVertex(n):_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}while(m===d);const l=this.m_topoGraph.getHalfEdgeOrigin(c);if(l!==m){do{n=1===p?o.getPrevVertex(_):o.getNextVertex(_),m=n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?this.m_topoGraph.getClusterFromVertex(n):_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}while(m===d);if(l!==m){m=l;const e=this.m_topoGraph.getClusterVertexIterator(m);n=this.m_topoGraph.getVertexFromVertexIterator(e)}else p=-p}d=m,_=n}while(c!==m)}}topoOperationPolygonPolygonHelper_(e,t,s,n,r,i){this.progress_(!0),e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.collectPolygonPathsPreservingFrom_(e,s,r,i,n),t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.collectPolygonPathsPreservingFrom_(t,s,r,i,n);const o=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,a=this.m_topoGraph.getShape();a.dbgVerifyCurves();const h=a.hasSegmentParentage();for(let m=this.m_topoGraph.getFirstCluster();m!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;m=this.m_topoGraph.getNextCluster(m)){const e=this.m_topoGraph.getClusterHalfEdge(m);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let t=e;do{this.progress_();const e=this.m_topoGraph.getHalfEdgeUserIndex(t,r);if(1!==e&&2!==e){const e=this.m_topoGraph.getHalfEdgeFaceParentage(t);if(this.isGoodParentage(e)){const e=a.insertPath(s,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);a.setClosedPath(e,!0);let m=t;do{const t=this.m_topoGraph.getHalfEdgeVertexIterator(m);let s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)s=this.m_topoGraph.getVertexFromVertexIterator(t);else{const e=this.m_topoGraph.getHalfEdgeVertexIterator(this.m_topoGraph.getHalfEdgeTwin(m));s=this.m_topoGraph.getVertexFromVertexIterator(e),s=a.getNextVertex(s)}const l=this.chooseVertexFromVertexCluster_(s,n),g=a.addVertex(e,l);if(h){const e=this.m_topoGraph.getSegmentParentage(m),t=this.m_topoGraph.getHalfEdgeOrigin(m);a.setSegmentParentageAndBreak(g,e,this.m_topoGraph.isBreakNode(t))}if(this.m_topoGraph.isHalfEdgeCurve(m)&&(this.m_topoGraph.querySegmentXY(m,o),a.setSegmentToIndex(a.getVertexIndex(g),o.get().clone())),this.m_topoGraph.setHalfEdgeUserIndex(m,r,1),-1!==i){const e=this.m_topoGraph.getClusterFromVertex(l);this.m_topoGraph.setClusterUserIndex(e,i,1)}m=this.m_topoGraph.getHalfEdgeNext(m)}while(m!==t)}else this.m_topoGraph.setHalfEdgeUserIndex(t,r,2)}t=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(t))}while(t!==e)}}topoOperationPolygonPolygon_(e,t,s,r=!1){this.dissolveTopoGraphCommonEdges_();const i=this.m_topoGraph.getShape(),o=i.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon),a=this.m_topoGraph.createUserIndexForHalfEdges();return this.topoOperationPolygonPolygonHelper_(e,t,o,s,a,-1),this.m_topoGraph.deleteUserIndexForHalfEdges(a),r||er(i,o,3,this.m_bOGCOutput,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_progressTracker),o}topoOperationPolyline_(e,t){const s=Ha();return s.allCrossRoadsImpassable=!1,s.ogcRule=t,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e,!1,s).first}topoOperationMultiPoint_(){const e=this.m_topoGraph.getShape(),t=e.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint),s=e.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);for(let n=this.m_topoGraph.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_topoGraph.getNextCluster(n)){const t=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(t)){let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let s=this.m_topoGraph.getClusterVertexIterator(n);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_topoGraph.incrementVertexIterator(s)){const n=this.m_topoGraph.getVertexFromVertexIterator(s);t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(t=n);const r=e.getGeometryFromPath(e.getPathFromVertex(n)),i=this.m_topoGraph.getGeometryID(r);if(this.isGoodParentage(i)){t=n;break}}e.addVertex(s,t)}}return t}intersection(e,t){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(t),r=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s),o=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(n),h=this.m_topoGraph.getGeometryID(e),l=this.m_topoGraph.getGeometryID(t);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(h>=0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(l>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(h|l),this.m_maskLookup[h|l]=!0;let g=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(g=e),2===r&&2===o?this.topoOperationPolygonPolygon_(e,t,g):1===r&&o>0||1===o&&r>0?this.topoOperationPolyline_(g,this.m_bOGCOutput):0===r||0===o?this.topoOperationMultiPoint_():void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}topoOperationPolygonPolygonEx(e,t,s){const r=this.m_topoGraph.getShape(),i=r.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon),o=r.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline),a=r.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint);this.dissolveTopoGraphCommonEdges_();let h=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const m=this.m_topoGraph.createUserIndexForHalfEdges(),l=this.m_topoGraph.createUserIndexForClusters();r.dbgVerifyCurves(),this.topoOperationPolygonPolygonHelper_(e,t,i,s,m,l),r.dbgVerifyCurves();const g=r.hasSegmentParentage(),u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let n=this.m_topoGraph.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_topoGraph.getNextCluster(n)){const e=this.m_topoGraph.getClusterHalfEdge(n);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;let t=e;do{let e=this.m_topoGraph.getHalfEdgeUserIndex(t,m),i=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(t),m),a=e|i;if(2===a){let h=this.m_topoGraph.getHalfEdgeParentage(t);if(this.isGoodParentage(h)){const c=r.insertPath(o,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);let _=t;const d=this.chooseVertexFromCluster_(n,s);let p=r.addVertex(c,d);if(g){const e=this.m_topoGraph.getSegmentParentage(t),s=this.m_topoGraph.getHalfEdgeOrigin(t);r.setSegmentParentageAndBreak(p,e,this.m_topoGraph.isBreakNode(s))}this.m_topoGraph.isHalfEdgeCurve(t)&&(this.m_topoGraph.querySegmentXY(t,u),r.setSegmentToIndex(r.getVertexIndex(p),u.get().clone())),this.m_topoGraph.setClusterUserIndex(n,l,1);do{this.progress_();const n=this.m_topoGraph.getHalfEdgeTo(_),o=this.chooseVertexFromCluster_(n,s);if(p=r.addVertex(c,o),g){const e=this.m_topoGraph.getSegmentParentage(t),s=this.m_topoGraph.getHalfEdgeOrigin(t);r.setSegmentParentageAndBreak(p,e,this.m_topoGraph.isBreakNode(s))}if(this.m_topoGraph.setHalfEdgeUserIndex(_,m,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(_),m,1),this.m_topoGraph.setClusterUserIndex(n,l,1),_=this.m_topoGraph.getHalfEdgeNext(_),e=this.m_topoGraph.getHalfEdgeUserIndex(_,m),i=this.m_topoGraph.getHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(_),m),a=e|i,2!==a)break;if(h=this.m_topoGraph.getHalfEdgeParentage(_),!this.isGoodParentage(h)){this.m_topoGraph.setHalfEdgeUserIndex(_,m,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(_),m,1);break}this.m_topoGraph.isHalfEdgeCurve(t)&&_!==t&&(this.m_topoGraph.querySegmentXY(t,u),r.setSegmentToIndex(r.getVertexIndex(p),u.get().clone()))}while(_!==t)}else this.m_topoGraph.setHalfEdgeUserIndex(t,m,1),this.m_topoGraph.setHalfEdgeUserIndex(this.m_topoGraph.getHalfEdgeTwin(t),m,1)}t=this.m_topoGraph.getHalfEdgeNext(this.m_topoGraph.getHalfEdgeTwin(t))}while(t!==e)}for(let n=this.m_topoGraph.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_topoGraph.getNextCluster(n)){this.progress_();if(1===this.m_topoGraph.getClusterUserIndex(n,l))continue;const e=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(e)){h===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(h=r.insertPath(a,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n));const e=this.m_topoGraph.getClusterVertexIterator(n);let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){t=this.m_topoGraph.getVertexFromVertexIterator(e);const n=this.chooseVertexFromVertexCluster_(t,s);r.addVertex(h,n)}}}this.m_topoGraph.deleteUserIndexForClusters(l),this.m_topoGraph.deleteUserIndexForHalfEdges(m),r.dbgVerifyCurves(),er(r,i,3,this.m_bOGCOutput,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_progressTracker);const c=[_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n];return c[0]=a,c[1]=o,c[2]=i,c}topoOperationPolylinePolylineOrPolygonEx(e,t){const s=Ha();return s.allCrossRoadsImpassable=!1,s.ogcRule=t,s.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,e,!0,s)}topoOperationMultiPoint(){const e=this.m_topoGraph.getShape(),t=e.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint),s=e.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);for(let n=this.m_topoGraph.getFirstCluster();n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_topoGraph.getNextCluster(n)){const t=this.m_topoGraph.getClusterParentage(n);if(this.isGoodParentage(t)){let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let s=this.m_topoGraph.getClusterVertexIterator(n);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_topoGraph.incrementVertexIterator(s)){const n=this.m_topoGraph.getVertexFromVertexIterator(s);t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(t=n);const r=e.getGeometryFromPath(e.getPathFromVertex(n)),i=this.m_topoGraph.getGeometryID(r);if(this.isGoodParentage(i)){t=n;break}}e.addVertex(s,t)}}return t}intersectionEx(e,t){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(t),r=Va(s),o=Va(n),h=this.m_topoGraph.getGeometryID(e),m=this.m_topoGraph.getGeometryID(t);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(h>=0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(h|m),this.m_maskLookup[h|m]=!0;let l=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(l=e),2===r&&2===o)return this.topoOperationPolygonPolygonEx(e,t,l);if(1===r&&o>0||1===o&&r>0){const{first:e,second:t}=this.topoOperationPolylinePolylineOrPolygonEx(l,this.m_bOGCOutput);return[t,e]}if(0===r||0===o){const e=[];return e.push(this.topoOperationMultiPoint()),e}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}getCombinedHalfEdgeParentage(e){return this.m_topoGraph.getHalfEdgeParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(e)|this.m_topoGraph.getHalfEdgeFaceParentage(this.m_topoGraph.getHalfEdgeTwin(e))}prevailingDirection(e,t){const s=this.getCombinedHalfEdgeParentage(t),n=this.m_topoGraph.getHalfEdgeOrigin(t),r=this.m_topoGraph.getHalfEdgeTo(t);let i=0,o=0;for(let a=this.m_topoGraph.getClusterVertexIterator(n);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=this.m_topoGraph.incrementVertexIterator(a)){const n=this.m_topoGraph.getVertexFromVertexIterator(a),h=e.getPathFromVertex(n),m=e.getGeometryFromPath(h),l=this.m_topoGraph.getGeometryID(m),g=e.getFirstVertex(h),u=0!==(l&s);u&&g===n&&(this.m_fromEdgeForPolylines=t);const c=e.getNextVertex(n);if(c!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_topoGraph.getClusterFromVertex(c)===r){if(i++,u){if(this.m_fromEdgeForPolylines===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&g===c){const e=this.m_topoGraph.getHalfEdgeNext(t);this.isGoodParentage(this.getCombinedHalfEdgeParentage(e))&&(this.m_fromEdgeForPolylines=e)}o++}}else{const s=e.getPrevVertex(n);if(s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_topoGraph.getClusterFromVertex(s)===r&&(i--,u)){if(this.m_fromEdgeForPolylines===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&g===s){const e=this.m_topoGraph.getHalfEdgeNext(t);this.isGoodParentage(this.getCombinedHalfEdgeParentage(e))&&(this.m_fromEdgeForPolylines=e)}o--}}}this.m_topoGraph.queryXY(n,this.m_dummyPt1),this.m_topoGraph.queryXY(r,this.m_dummyPt2);return(0!==o?o:i)*_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(this.m_dummyPt1,this.m_dummyPt2)}tryMoveThroughCrossroadBackwards(e,t){const s=this.m_topoGraph.getHalfEdgePrev(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!t){if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(e)))return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const t=this.m_topoGraph.getHalfEdgeTwin(e);if(n===this.m_topoGraph.getHalfEdgeNext(t))return s}let r=n,i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;r!==e;){const e=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(e)){if(i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;i=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgePrev(r))}return i}tryMoveThroughCrossroadForward(e,t){const s=this.m_topoGraph.getHalfEdgeNext(e),n=this.m_topoGraph.getHalfEdgeTwin(s);if(!t){const t=this.m_topoGraph.getHalfEdgeTwin(e);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(t)))return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(n===this.m_topoGraph.getHalfEdgePrev(t))return s}let r=n,i=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;r!==e;){const e=this.getCombinedHalfEdgeParentage(r);if(this.isGoodParentage(e)){if(i!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;i=this.m_topoGraph.getHalfEdgeTwin(r)}r=this.m_topoGraph.getHalfEdgeTwin(this.m_topoGraph.getHalfEdgeNext(r))}return i}isOnALoop(e,t){let s=e;const n=2*this.m_topoGraph.getShape().getTotalPointCount()+10;for(let r=0;r<n;r++){if(1===this.m_topoGraph.getHalfEdgeUserIndex(s,t))return!1;const n=this.m_topoGraph.getHalfEdgeNext(s);if(n===this.m_topoGraph.getHalfEdgeTwin(s))return!1;if(s=n,s===e)return!0}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("is_on_a_loop_")}restorePolylineParts(e,t,s,n,r,i,o,h,m,l){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&i>=0&&o>=0||-1===i&&-1===o),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(-1===h&&1!==l.unsplitBehavior||-1!==h&&1===l.unsplitBehavior);const g=l.ogcRule,u=l.allCrossRoadsImpassable,c=1===l.unsplitBehavior,_=0===l.unsplitBehavior,d=this.m_topoGraph.getShape(),p=d.hasSegmentParentage();let f=e,x=this.m_topoGraph.getHalfEdgeTwin(f);const y=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;this.m_fromEdgeForPolylines=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;let P=this.prevailingDirection(d,f),E=f,S=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,C=!1,I=!1,b=!1;if(!c)for(;;){const t=this.m_topoGraph.getHalfEdgePrev(f);if(t===x){b=!0;break}const n=this.m_topoGraph.getHalfEdgeNext(x);if(this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(n))){C=!0;break}if(this.m_topoGraph.getHalfEdgeTwin(t)!==n){if(u){C=!0;break}if(f=this.tryMoveThroughCrossroadBackwards(f,!0),f===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){C=!0;break}x=this.m_topoGraph.getHalfEdgeTwin(f)}else f=t,x=n;if(1===this.m_topoGraph.getHalfEdgeUserIndex(f,s)){b=!0;break}if(f===e){S=e,I=!0;break}const r=this.getCombinedHalfEdgeParentage(f);if(!this.isGoodParentage(r))break;E=f,P+=this.prevailingDirection(d,f)}if(S===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){for(f=e,x=this.m_topoGraph.getHalfEdgeTwin(f),S=f;;){const e=this.m_topoGraph.getHalfEdgeNext(f),t=this.m_topoGraph.isStrongPathNode(this.m_topoGraph.getHalfEdgeOrigin(e));if(t){C=!0;break}if(e===x){b=!0;break}if(-1!==h){const e=this.m_topoGraph.getHalfEdgeOrigin(x);if(1===this.m_topoGraph.getClusterUserIndex(e,h)){C=!0;break}}const n=this.m_topoGraph.getHalfEdgePrev(x);if(this.m_topoGraph.getHalfEdgeTwin(e)!==n){if(t||u){C=!0;break}if(f=this.tryMoveThroughCrossroadForward(f,!0),f===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){C=!0;break}x=this.m_topoGraph.getHalfEdgeTwin(f)}else f=e,x=n;if(1===this.m_topoGraph.getHalfEdgeUserIndex(f,s)){b=!0;break}const r=this.getCombinedHalfEdgeParentage(f);if(!this.isGoodParentage(r))break;S=f,P+=this.prevailingDirection(d,f)}const t=this.m_topoGraph.getHalfEdgeOrigin(E);I=this.m_topoGraph.getHalfEdgeTo(S)===t}else if(this.m_fromEdgeForPolylines!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){E=e,S=this.tryMoveThroughCrossroadBackwards(E,!1),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(S!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);const t=this.m_topoGraph.getHalfEdgeTwin(E);this.m_topoGraph.getHalfEdgeNext(t)}let w=I;I||b||m&&(w=this.isOnALoop(e,s),w||(w=this.isOnALoop(x,s)));const v=P>=0;let N=!1;w&&C&&(I?(N=g,v&&(N||c||_)&&E!==e&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!c),E=e,N=!1)):(c||v&&_)&&(E=e));let T=0;for(f=E;x=this.m_topoGraph.getHalfEdgeTwin(f),this.m_topoGraph.setHalfEdgeUserIndex(f,s,1),this.m_topoGraph.setHalfEdgeUserIndex(x,s,1),T++,f!==S;)f=u?this.m_topoGraph.getHalfEdgeNext(f):this.tryMoveThroughCrossroadForward(f,!1);v||(S=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(E,E=S),S=this.m_topoGraph.getHalfEdgeTwin(S),E=this.m_topoGraph.getHalfEdgeTwin(E));let G=d.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);f=E;const D=this.m_topoGraph.getHalfEdgeOrigin(E);let V;V=-1!==i?this.chooseVertexByOrder(D,d,i,o):this.chooseVertexFromCluster_(D,r),this.m_topoGraph.isStrongPathNode(D)&&d.setStrongPathStart(G,!0);let H=d.addVertex(G,V),k=H;-1!==n&&this.m_topoGraph.setClusterUserIndex(D,n,1);let A=0;const U=N?Math.trunc((T+1)/2):-1;let q=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,B=!0,O=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(;;){if(p){const e=this.m_topoGraph.getSegmentParentage(f),t=this.m_topoGraph.getHalfEdgeOrigin(f);d.setSegmentParentageAndBreak(k,e,B||this.m_topoGraph.isBreakNode(t))}B=!1,this.m_topoGraph.isHalfEdgeCurve(f)&&(this.m_topoGraph.querySegmentXY(f,y),d.setSegmentToIndex(d.getVertexIndex(k),y.get().clone())),q!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&-1!==o&&d.addToUserIndex(q,o,-1);const e=u?this.m_topoGraph.getHalfEdgeNext(f):this.tryMoveThroughCrossroadForward(f,!1),s=this.m_topoGraph.getHalfEdgeTo(f);let a;if(a=-1!==i?this.chooseVertexByOrder(s,d,i,o):this.chooseVertexFromCluster_(s,r),H=d.addVertex(G,a),O=s,-1!==n&&this.m_topoGraph.setClusterUserIndex(s,n,1),p&&this.m_topoGraph.isBreakNode(s)&&d.setSegmentParentageBreakVertex(H,!0),q=a,A++,N&&A===U&&(G=d.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),H=d.addVertex(G,a),B=!0,-1!==o&&d.addToUserIndex(a,o,-1),q=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),f===S)break;f=e,k=H}O!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&this.m_topoGraph.isStrongPathNode(O)&&d.setStrongPathEnd(G,!0)}topoOperationPolylineSimplify_(e,t){return this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,!1,t).first}topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,t,s,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);const i=this.m_topoGraph.getShape(),o=t=>t=e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?i.getFirstGeometry():i.getNextGeometry(t):t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e:_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,h=i.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline);let m=-1;s&&(m=this.m_topoGraph.createUserIndexForClusters());const l=this.m_topoGraph.createUserIndexForHalfEdges(),g=t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?i.createUserIndex():-1,u=t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?i.createUserIndex():-1;let c=-1;if(1===r.unsplitBehavior){c=this.m_topoGraph.createUserIndexForClusters();for(let e=o(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=o(e))for(let t=i.getFirstPath(e);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=i.getNextPath(t)){{const e=i.getFirstVertex(t),s=this.m_topoGraph.getClusterFromVertex(e);this.m_topoGraph.setClusterUserIndex(s,c,1)}if(!i.isClosedPath(t)){const e=i.getLastVertex(t),s=this.m_topoGraph.getClusterFromVertex(e);this.m_topoGraph.setClusterUserIndex(s,c,1)}}}if(t===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let e=0;for(let t=o(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=o(t))for(let s=i.getFirstPath(t);s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=i.getNextPath(s)){if(i.isClosedPath(s)){let t=i.getFirstVertex(s);for(let n=0,r=i.getPathSize(s);n<r;n++,t=i.getNextVertex(t))i.setUserIndex(t,g,e++),i.setUserIndex(t,u,2)}else{const t=i.getFirstVertex(s);i.setUserIndex(t,g,e++),i.setUserIndex(t,u,1);let n=i.getNextVertex(t);for(let r=1,o=i.getPathSize(s)-1;r<o;++r)i.setUserIndex(n,g,e++),i.setUserIndex(n,u,2),n=i.getNextVertex(n);i.setUserIndex(n,g,e++),i.setUserIndex(n,u,1)}}}for(let n=o(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=o(n))for(let e=i.getFirstPath(n);e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;e=i.getNextPath(e)){let s=i.getFirstVertex(e);for(let n=0,o=i.getPathSize(e);n<o;n++,s=i.getNextVertex(s)){const e=this.m_topoGraph.getHalfEdgeFromVertex(s);if(e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)continue;if(1===this.m_topoGraph.getHalfEdgeUserIndex(e,l))continue;const i=this.getCombinedHalfEdgeParentage(e);if(this.isGoodParentage(i)){const s=0===n;this.restorePolylineParts(e,h,l,m,t,g,u,c,s,r)}}}let _=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;if(s){_=i.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint);let e=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;for(let s=this.m_topoGraph.getFirstCluster();s!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;s=this.m_topoGraph.getNextCluster(s)){this.progress_();if(1!==this.m_topoGraph.getClusterUserIndex(s,m)){const n=this.m_topoGraph.getClusterParentage(s);if(this.isGoodParentage(n)){e===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(e=i.insertPath(_,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n));const n=this.m_topoGraph.getClusterVertexIterator(s);if(n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let r;this.m_topoGraph.getVertexFromVertexIterator(n),r=-1!==g?this.chooseVertexByOrder(s,i,g,u):this.chooseVertexFromCluster_(s,t),i.addVertex(e,r)}}}}}return-1!==u&&i.removeUserIndex(u),-1!==g&&i.removeUserIndex(g),-1!==m&&i.removeUserIndex(m),this.m_topoGraph.deleteUserIndexForHalfEdges(l),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(h,_)}difference(e,t){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(t),r=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s),o=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(n);if(r>o)return e;const a=this.m_topoGraph.getGeometryID(e),h=this.m_topoGraph.getGeometryID(t);if(this.m_maskLookup.length=0,this.m_maskLookup.length=1+(a|h),this.m_maskLookup[a]=!0,2===r&&2===o){let s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;return this.m_topoGraph.getShape().getVertexDescription().getAttributeCount()>1&&(s=e),this.topoOperationPolygonPolygon_(e,t,s)}if(1===r&&2===o){const t=Ha();return t.allCrossRoadsImpassable=!1,t.ogcRule=this.m_bOGCOutput,t.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,!1,t).first}if(1===r&&1===o){const t=Ha();return t.allCrossRoadsImpassable=!0,t.ogcRule=this.m_bOGCOutput,t.unsplitBehavior=0,this.topoOperationPolylineSimplifyOrPolylineTopoHelper_(e,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,!1,t).first}if(0===r)return this.topoOperationMultiPoint_();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}symmetricDifference(e,t){const s=this.m_topoGraph.getShape().getGeometryType(e),n=this.m_topoGraph.getShape().getGeometryType(t),r=Va(s),o=Va(n),h=this.m_topoGraph.getGeometryID(e),m=this.m_topoGraph.getGeometryID(t);return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(h>=0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=1+(h|m),this.m_maskLookup[h]=!0,this.m_maskLookup[h]=!0,this.m_maskLookup[m]=!0,2===r&&2===o?this.topoOperationPolygonPolygon_(e,t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n):1===r&&1===o?this.topoOperationPolyline_(_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_bOGCOutput):0===r&&0===o?this.topoOperationMultiPoint():void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}planarSimplifyNoCrackingAndCluster(e,t,s,r){this.m_bOGCOutput=e,this.m_topoGraph=new tn;const o=t.getFillRule(s),h=t.getGeometryType(s);if(1!==o||h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint?this.m_topoGraph.setAndSimplifyEditShapeAlternate(t,s,this.m_progressTracker):this.m_topoGraph.setAndSimplifyEditShapeWinding(t,s,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return!1;this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const m=this.m_topoGraph.getGeometryID(s);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=m+1,this.m_maskLookup[m]=!0,t.getGeometryType(s)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon||1===o&&t.getGeometryType(s)!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint){t.setFillRule(s,0);const n=this.topoOperationPolygonPolygon_(s,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n);if(t.swapGeometry(n,s),t.removeGeometry(n),1===o&&this.m_bOGCOutput)return this.planarSimplifyNoCrackingAndCluster(e,t,s,r)}else if(t.getGeometryType(s)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline){const e=Ha();e.ogcRule=this.m_bOGCOutput,e.allCrossRoadsImpassable=!0,e.unsplitBehavior=r;const n=this.topoOperationPolylineSimplify_(t.getFirstGeometry(),e);t.swapGeometry(n,s),t.removeGeometry(n)}else if(t.getGeometryType(s)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint){const e=this.topoOperationMultiPoint_();t.swapGeometry(e,s),t.removeGeometry(e)}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");return!0}unsplitPolylineExact(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P}planarSimplifyPolylines(e,t,s,r,i){for(let _=e.getFirstGeometry();_!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;_=e.getNextGeometry(_)){const t=e.getGeometryType(_);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline)}let o=0,h=0,m=null;if(e.hasCurves()&&!e.hasSegmentParentage()){m=new fa;const s=e.getEnvelope2D(this.m_progressTracker);h=da(t.total());const n=_a(t.total(),s);o=pa(n,h),aa(e,n,t.total(),12e3,m,null,this.m_progressTracker)}{const s=Ia(t.add(o));e.filterClosePoints(s,!1,!1,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)}if(this.m_topoGraph=new tn,4!==i&&5!==i)if(null===m&&s){const n=new Dn(this.m_progressTracker,!1);n.sweepVertical(e,t.total()),n.hadComplications()?(ya(e,t,this.m_progressTracker,!0,!1),s=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(t.total())}else ya(e,t.add(o),this.m_progressTracker,!0,!1),s=!1;else s=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const l=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,l,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s&&null===m),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolylines(e,t,!1,r,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const g=this.m_topoGraph.getGeometryID(l);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(g>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=g+1,this.m_maskLookup[g]=!0;const u=this.topoOperationPolylineSimplify_(e.getFirstGeometry(),r);null!==m&&m.stitchCurves(e,u,h,!0);const c=e.getGeometry(u);return s||c.getImpl().setIsSimple(4,t.total()),c}planarSimplifyMultiPoints(e,t,s,r){for(let l=e.getFirstGeometry();l!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;l=e.getNextGeometry(l)){const t=e.getGeometryType(l);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)}this.m_topoGraph=new tn,4!==r&&5!==r?(ya(e,t,this.m_progressTracker,!0,!1),s=!1):s=!1,e.removeSelection(),e.collapseAllGeometriesToFirst();const i=e.getFirstGeometry();if(this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,i,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyMultiPoints(e,t,!1,-1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const o=this.m_topoGraph.getGeometryID(i);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(o>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=o+1,this.m_maskLookup[o]=!0;const h=this.topoOperationMultiPoint(),m=e.getGeometry(h);return s||m.getImpl().setIsSimple(4,t.total()),m}planarSimplifyPolygons(e,t,s,r,i,o){for(let f=e.getFirstGeometry();f!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;f=e.getNextGeometry(f)){const t=e.getGeometryType(f);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon||t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline&&s)}let h=0,m=0,l=null;if(e.hasCurves()&&!e.hasSegmentParentage()){l=new fa;const s=e.getEnvelope2D(this.m_progressTracker);m=da(t.total());const n=_a(t.total(),s);h=pa(n,m),aa(e,n,t.total(),12e3,l,null,this.m_progressTracker)}if(o){ya(e,t.add(h),this.m_progressTracker,!0,!1);for(let t=e.getFirstGeometry();t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;t=e.getNextGeometry(t))e.getGeometryType(t)===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&er(e,t,-1,!1,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,this.m_progressTracker)}if(this.m_topoGraph=new tn,o||4===i||5===i)r=!1;else if(null===l&&r){const s=new Dn(this.m_progressTracker,!1);s.sweepVertical(e,t.total()),s.hadComplications()?(ya(e,t,this.m_progressTracker,!0,!1),r=!1):this.m_topoGraph.setCheckDirtyPlanesweepTolerance(t.total())}else ya(e,t.add(h),this.m_progressTracker,!0,!1),r=!1;e.removeSelection(),e.collapseAllGeometriesToFirst();const g=e.getFirstGeometry();if(s?this.m_topoGraph.setAndSimplifyEditShapeWinding(e,g,this.m_progressTracker):this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,g,this.m_progressTracker),this.m_topoGraph.dirtyCheckFailed())return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(r&&null===l),this.m_topoGraph.removeShape(),this.m_topoGraph=null,this.planarSimplifyPolygons(e,t,s,!1,-1,!1);this.m_topoGraph.setCheckDirtyPlanesweepTolerance(Number.NaN);const u=this.m_topoGraph.getGeometryID(g);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(u>=0),this.m_maskLookup.length=0,this.m_maskLookup.length=u+1,this.m_maskLookup[u]=!0,e.setFillRule(g,0);const c=this.m_bOGCOutput&&s,_=c;let d=this.topoOperationPolygonPolygon_(g,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_);if(c){this.m_topoGraph.removeShape(),this.m_topoGraph=null,e.removeGeometry(g),this.m_topoGraph=new tn,this.m_topoGraph.setAndSimplifyEditShapeAlternate(e,d,this.m_progressTracker);d=this.topoOperationPolygonPolygon_(d,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,!1)}null!==l&&l.stitchCurves(e,d,m,!0);const p=e.getGeometry(d);return p.setFillRule(0),r?p.getImpl().setIsSimple(3,0):(p.getImpl().setIsSimple(4,t.total()),p.getImpl().updateOGCFlagsProtected()),p}planarSimplify3DImpl_(e,t,s,n,r){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}planarSimplifyImpl_(e,t,s,r,o,a,h,m){if(e.isEmpty())return e.clone();const l=e.getGeometryType(),g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,u=g.addGeometry(e);if((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(o)&&l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(s=!1,g.setFillRule(u,0)),m&&(e.hasAttribute(1)&&g.replaceNaNs(1,0),g.removeNaNVertices()),l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon||l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline&&s)return this.planarSimplifyPolygons(g,t,s,r,o,!1);if(l===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P.type){const e=Ha();return e.allCrossRoadsImpassable=!0,e.ogcRule=this.m_bOGCOutput,e.unsplitBehavior=h,this.planarSimplifyPolylines(g,t,r,e,o)}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)return this.planarSimplifyMultiPoints(g,t,r,o);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("what else?")}}function Qa(e,t,s,n){if(e.isEmpty())return e.createInstance();if(t.isEmpty())return n?e.createInstance():new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({copy:e});const r=[new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P],o=[0],a=2===t.getDimension();return 1!==t.getDimension()&&2!==t.getDimension()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),r[0]=e.getXY(),a?Wo(t,r,1,s.total(),o):jo(t,r,1,s.total(),o),0===o[0]?e.createInstance():e}function Ja(e,t,s,n){const r=e.createInstance(),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,100),a=new Array(100),h=e.getPointCount();let m=!0;const l=2===t.getDimension();1!==t.getDimension()&&2!==t.getDimension()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");for(let i=0;i<h;){const n=e.queryCoordinates(o,o.length,i,-1)-i;l?Wo(t,o,n,s.total(),a):jo(t,o,n,s.total(),a);let h=0;for(let t=0;t<n;t++){0===a[t]&&(m&&(m=!1,r.addPoints(e,0,i)),h!==t&&r.addPoints(e,i+h,i+t),h=t+1)}m||h===n||r.addPoints(e,i+h,i+n),i+=n}return m?e:r}function $a(e,t,s,r){const i=e.getGeometryType();if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e.getDescription()});return e.isEmpty()||t.addEnvelope(e,!1),t}if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint&&("|"===r||"^"===r)){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:e.getDescription()});return e.isEmpty()||t.add(e),t}if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return e.isEmpty()||t.addSegment(e,!0),t}if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&"-"===r&&t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({vd:e.getDescription()});return e.isEmpty()||e.getPointByVal(0,t),t}if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&"&"===r&&t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const t=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({vd:e.getDescription()});return e.isEmpty()||e.getPointByVal(0,t),t}return e}function eh(e){const s=e.getGeometryType();if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e.getDescription()});return e.isEmpty()||t.addEnvelope(e,!1),t}if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:e.getDescription()});return e.isEmpty()||t.add(e),t}if(Da(s)){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return e.isEmpty()||t.addSegment(e,!0),t}return s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline&&s!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Unexpected geometry type"),e}function th(e,t,s,n){const r=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?e.getClusterHalfEdge(t):s;let i=r;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.getHalfEdgeOrigin(r)===t);do{n(i),i=e.getHalfEdgeNext(e.getHalfEdgeTwin(i))}while(i!==r)}class sh{constructor(e,t,s,n,r,i){this.m_rParent=e,this.m_rTopoGraph=e.m_topoGraph,this.m_rShape=this.m_rTopoGraph.getShape(),this.m_IDCuttee=this.m_rTopoGraph.getGeometryID(n),this.m_IDCutter=this.m_rTopoGraph.getGeometryID(r),this.m_IDBoth=this.m_IDCuttee|this.m_IDCutter,this.m_bConsiderTouch=t,this.m_sideIndex=s,this.m_cuttee=n,this.m_cutter=r,this.m_rCutHandles=i,this.m_cutteeBreadcrumbsIndex=this.m_rShape.createUserIndexUninitialized(),this.m_clusterParentageIndex=this.m_rShape.createUserIndexUninitialized();for(let o=this.m_rShape.getFirstPath(this.m_cuttee);o!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;o=this.m_rShape.getNextPath(o)){let e=0;const t=this.m_rShape.getPathSize(o);for(let s=this.m_rShape.getFirstVertex(o);e<t;e++,s=this.m_rShape.getNextVertex(s))this.m_rShape.setUserIndex(s,this.m_clusterParentageIndex,this.m_rTopoGraph.getClusterParentage(this.m_rTopoGraph.getClusterFromVertex(s)))}}Do(){this.cutPolylinePolyline_(),this.m_rShape.removeUserIndex(this.m_cutteeBreadcrumbsIndex),this.m_rShape.removeUserIndex(this.m_clusterParentageIndex)}setTbd(e){return 8|e}classifyStandardCut(e,t,s,n){const r=this.m_rShape.getPrevVertex(e),i=this.m_rShape.getNextVertex(e),o=r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(r)),a=i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(i)),h=this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(s)),m=this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(n));let l=1,g=32,u=32;if(th(this.m_rTopoGraph,t,m,(e=>{e===h&&(l=2),e===o&&(g=l),e===a&&(u=l)})),this.m_bConsiderTouch)32!==g&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|g),32!==u&&this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|u);else{if(32===g||32===u)return 1;if(g===u&&!(o===h||o===m||a===h||a===m))return 1;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|g),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|u)}return 0}classifyTouchCut(e,t,s,n){const r=this.m_rShape.getPrevVertex(e),i=this.m_rShape.getNextVertex(e),o=r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(r)),a=i===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(i)),h=s===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(s)),m=n===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n:this.m_rTopoGraph.getHalfEdgeConnector(t,this.m_rTopoGraph.getClusterFromVertex(n));if(!this.m_bConsiderTouch){let t;return(t=h===o||m===o)?this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))):(t=h===a||m===a)&&this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),t?0:1}if(o===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(a===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;if(o===a)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(m!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){if(o===m)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(a===m)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let s=1;th(this.m_rTopoGraph,t,m,(t=>{if(t===o){const e=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|s;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,e),s=2}else if(t===a){const t=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|s;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,t),s=2}}))}else{if(o===h)return this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex))),0;if(a===h)return this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,this.setTbd(this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex))),0;let s=2;th(this.m_rTopoGraph,t,h,(t=>{if(t===o){const e=this.m_rShape.getUserIndex(r,this.m_cutteeBreadcrumbsIndex)|s;this.m_rShape.setUserIndex(r,this.m_cutteeBreadcrumbsIndex,e),s=1}else if(t===a){const t=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex)|s;this.m_rShape.setUserIndex(e,this.m_cutteeBreadcrumbsIndex,t),s=1}}))}return 0}classifyCutVertex(e,t){let s=0,n=0;for(let r=this.m_rTopoGraph.getClusterVertexIterator(t);r!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;r=this.m_rTopoGraph.incrementVertexIterator(r)){const i=this.m_rTopoGraph.getVertexFromVertexIterator(r);if(this.m_rShape.getGeometryFromVertex(i)===this.m_cutter){n++;const r=this.m_rShape.getPrevVertex(i),o=this.m_rShape.getNextVertex(i);s+=r===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n||o===_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?this.classifyTouchCut(e,t,r,o):this.classifyStandardCut(e,t,r,o)}}n&&s===n&&!this.m_bConsiderTouch&&this.m_rShape.setUserIndex(e,this.m_clusterParentageIndex,this.m_IDCuttee)}cutPolylinePolyline_(){this.m_rShape.getGeometryType(this.m_cuttee),this.m_rShape.getGeometryType(this.m_cutter),this.m_rParent.m_maskLookup.length=0,this.m_rParent.m_maskLookup.length=this.m_IDBoth+1,this.m_rParent.m_maskLookup[this.m_IDBoth]=!0;for(let n=this.m_rShape.getFirstPath(this.m_cuttee);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_rShape.getNextPath(n)){const e=this.m_rShape.getPathSize(n);let t=this.m_rShape.getFirstVertex(n);for(let s=0;s<e;++s,t=this.m_rShape.getNextVertex(t))this.m_rShape.setUserIndex(t,this.m_cutteeBreadcrumbsIndex,0);t=this.m_rShape.getFirstVertex(n);for(let s=0;s<e;++s,t=this.m_rShape.getNextVertex(t)){const e=this.m_rTopoGraph.getClusterFromVertex(t);this.m_rTopoGraph.getClusterParentage(e)===this.m_IDBoth&&this.classifyCutVertex(t,e)}}const e=(e,t)=>{let s=this.m_rShape.getUserIndex(e,this.m_cutteeBreadcrumbsIndex);const n=this.m_rTopoGraph.getHalfEdgeConnector(this.m_rTopoGraph.getClusterFromVertex(e),this.m_rTopoGraph.getClusterFromVertex(t));return(this.m_rTopoGraph.getHalfEdgeParentage(n)&this.m_IDBoth)===this.m_IDBoth&&(s|=4),s};for(let n=this.m_rShape.getFirstPath(this.m_cuttee);n!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;n=this.m_rShape.getNextPath(n)){let t=this.m_rShape.getFirstVertex(n);const s=this.m_rShape.isClosedPath(n),r=this.m_rShape.getPathSize(n)+(s?1:0);let i=1,o=32;for(let n=this.m_rShape.getNextVertex(t);i<r;++i,t=n,n=this.m_rShape.getNextVertex(n)){const s=e(t,n);this.m_rShape.getUserIndex(t,this.m_clusterParentageIndex)===this.m_IDBoth&&(o=s),32!==o&&this.m_rShape.setUserIndex(t,this.m_cutteeBreadcrumbsIndex,o|s)}t=this.m_rShape.getLastVertex(n);let a=32;i=1;for(let n=this.m_rShape.getPrevVertex(t);i<r;++i,t=n,n=this.m_rShape.getPrevVertex(n)){const s=e(n,t);this.m_rShape.getUserIndex(t,this.m_clusterParentageIndex)===this.m_IDBoth&&(a=s),32!==a&&this.m_rShape.setUserIndex(n,this.m_cutteeBreadcrumbsIndex,a|s)}}let t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r=32;const i=this.m_rShape.hasSegmentParentage(),o=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let a=this.m_rShape.getFirstPath(this.m_cuttee);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=this.m_rShape.getNextPath(a)){const e=this.m_rShape.isClosedPath(a),h=this.m_rShape.getPathSize(a)+(e?1:0);let m=1,l=this.m_rShape.getFirstVertex(a),g=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,u=!0;for(let a=this.m_rShape.getNextVertex(l);m<h;++m,a=this.m_rShape.getNextVertex(a)){let e=this.m_rShape.getUserIndex(l,this.m_cutteeBreadcrumbsIndex);8===e?e=3:(e&=-9,4&e?e=4:3&~e||(e=3)),e!==r?(t!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n&&(g=this.m_rShape.addVertex(s,l),i&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(l))&&this.m_rShape.setSegmentParentageBreakVertex(g,!0),this.m_rCutHandles.push(t),this.m_rShape.setGeometryUserIndex(t,this.m_sideIndex,r)),t=this.m_rShape.createGeometry(_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline),s=this.m_rShape.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),r=e,u=!0):this.m_rShape.getUserIndex(l,this.m_clusterParentageIndex)===this.m_IDBoth&&4!==e&&(g=this.m_rShape.addVertex(s,l),i&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(l))&&this.m_rShape.setSegmentParentageBreakVertex(g,!0),s=this.m_rShape.insertPath(t,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n),u=!0),g=this.m_rShape.addVertex(s,l);const h=this.m_rTopoGraph.getClusterFromVertex(l);!u&&i&&this.m_rTopoGraph.isBreakNode(h)&&this.m_rShape.setSegmentParentageBreakVertex(g,!0);const m=this.m_rTopoGraph.getHalfEdgeFromVertex(l);if(i){const e=this.m_rTopoGraph.getSegmentParentage(m);this.m_rShape.setSegmentParentageAndBreak(g,e,u||this.m_rTopoGraph.isBreakNode(h))}this.m_rTopoGraph.isHalfEdgeCurve(m)&&(this.m_rTopoGraph.querySegmentXY(m,o),this.m_rShape.setSegmentToIndex(this.m_rShape.getVertexIndex(g),o.get().clone())),l=a,u=!1}g=this.m_rShape.addVertex(s,l),i&&this.m_rTopoGraph.isBreakNode(this.m_rTopoGraph.getClusterFromVertex(l))&&this.m_rShape.setSegmentParentageBreakVertex(g,!0),this.m_rCutHandles.push(t),this.m_rShape.setGeometryUserIndex(t,this.m_sideIndex,r),t=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,s=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,r=32}}}function nh(e,t,s){return new Ka(s).linesToPolygonsImpl(e,t)}function rh(t,s,o,a,h){if(a&&(a.m_reason=0,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),t.isEmpty())return 5;const m=t.getGeometryType();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return mh(t,a);const l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!1).total();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const s=t,n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return s.queryEnvelope(n),n.isDegenerate(l)?(a&&(a.m_reason=4,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),0):5}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(m)){const e=t,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return n.addSegment(e,!0),oh(n,s,o,a,h)}const g=[0],u=t.getImpl().getIsSimple(l,g);let c=o?-1:u;if((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(c)||0===c)return c;const _=new Ph(t,s,c,h,!1);m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint||m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline||m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?c=_.isSimplePlanarImpl():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");return t.getImpl().setIsSimple(c,l),a&&a.assign(_.m_nonSimpleResult),c}function ih(t,s,o,a,h){if(a&&(a.m_reason=0,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),t.isEmpty())return 5;const m=t.getGeometryType();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return mh(t,a);const l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!1).total();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const s=t,n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;return s.queryEnvelope(n),n.isDegenerate(l)?(a&&(a.m_reason=4,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),0):5}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(m)){const e=t,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return n.addSegment(e,!0),ih(n,s,o,a,h)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.B)(m),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(m)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("OGC simplify is not implemented for this geometry type");const g=[0],c=t.getImpl().getIsSimple(l,g);let _=o?-1:c;if(5===_||0===_)return _;const p=new Ph(t,s,_,h,!0);m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint||m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline||m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?(_=p.isSimplePlanarImpl(),(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(_)&&(_=5)):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");return t.getImpl().setIsSimple(_,l),a&&a.assign(p.m_nonSimpleResult),_}function oh(t,s,o,a,h){if(a&&(a.m_reason=0,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),t.isEmpty())return 5;const m=t.getGeometryType();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return mh(t,a);const l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!1).total();if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const s=t,n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return s.queryEnvelope(n),n.isDegenerate(l)?(a&&(a.m_reason=4,a.m_vertexIndex1=-1,a.m_vertexIndex2=-1),0):5}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(m)){const e=t,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return n.addSegment(e,!0),oh(n,s,o,a,h)}const g=[0],u=t.getImpl().getIsSimple(l,g);let c=o?-1:u;if(-1!==c)return c;const _=new Ph(t,s,c,h,!1);return m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint?c=_.multipointIsSimpleAsFeature():m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?c=_.polylineIsSimpleAsFeature():m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?c=_.polygonIsSimpleAsFeature():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),t.getImpl().setIsSimple(c,l),a&&a.assign(_.m_nonSimpleResult),c}function ah(t,s,o,a){if(t.isEmpty())return t;const h=t.getGeometryType();if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult;if(mh(t,e),3===e.m_reason){const e=t.clone();return e.replaceNaNs(1,0),e}return 2===e.m_reason?t.createInstance():t}if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!0).total(),r=t,i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.queryEnvelope(i),i.isDegenerate(n)?r.createInstance():t}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(h)){const e=t,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return n.addSegment(e,!0),ah(n,s,o,a)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.B)(h);const m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!1).total(),l=[0],g=t.getImpl().getIsSimple(m,l),u=o?-1:g;if((0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(u)){if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&0!==t.getFillRule()){const e=t.clone();return e.setFillRule(0),e}return t}if((h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint||h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline)&&u>=1)return t;const c=new Ph(t,s,u,a,!1);let _;return h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint?_=c.multipointSimplifyAsFeature():h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?_=c.polylineSimplifyAsFeature():h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?_=c.polygonSimplifyAsFeature():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),_}function hh(t,s,i,o){if(t.isEmpty())return t;const a=t.getGeometryType();if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult;if(mh(t,e),3===e.m_reason){const e=t.clone();return e.replaceNaNs(1,0),e}return 2===e.m_reason?t.createInstance():t}if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=t,r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;n.queryEnvelope(r);const i=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!0).total();return r.isDegenerate(i)?n.createInstance():t}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(a)){const e=t,n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});return n.addSegment(e,!0),hh(n,s,i,o)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.B)(a),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(a)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("OGC simplify is not implemented for this geometry type");const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!1).total(),m=[0],l=t.getImpl().getIsSimple(h,m),g=i?-1:l;if(5===g){if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&0!==t.getFillRule()){const e=t.clone();return e.setFillRule(0),e}return t}return Aa(t,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(s,t,!0),!1,g,o,0,!0)}function mh(e,t){const s=e.getX(),n=e.getY();if(!Number.isFinite(s)||!Number.isFinite(n))return t&&(t.m_reason=2,t.m_vertexIndex1=-1,t.m_vertexIndex2=-1),0;if(e.hasAttribute(1)){const s=e.getZ();if(!Number.isFinite(s))return t&&(t.m_reason=Number.isNaN(s)?3:2,t.m_vertexIndex1=-1,t.m_vertexIndex2=-1),0}return 5}class lh{constructor(){this.m_segment=null,this.m_vertexIndex=-1,this.m_pathIndex=-1,this.m_flags=0}setReversed(e){this.m_flags&=-2,this.m_flags=this.m_flags|(e?1:0)}getReversed(){return!!(1&this.m_flags)}getRightSide(){return this.getReversed()?0:1}}function gh(){return{x:-1,y:-1,ipath:-1,ivertex:-1,ipolygon:-1}}function uh(e,t,s,n,r){return{x:e,y:t,ipath:s,ivertex:n,ipolygon:r}}function ch(e,t){return e.x===t.x&&e.y===t.y&&e.ipath===t.ipath&&e.ivertex===t.ivertex&&e.ipolygon===t.ipolygon}function _h(e,t){e.x=t.x,e.y=t.y,e.ipath=t.ipath,e.ivertex=t.ivertex,e.ipolygon=t.ipolygon}function dh(){return{x:-1,y:-1,ipath:-1,ivertex:-1,bBoundary:!1,bEndPoint:!1}}function ph(e,t,s,n,r,i){return{x:e,y:t,ipath:s,ivertex:n,bBoundary:r,bEndPoint:i}}function fh(e,t){e.x=t.x,e.y=t.y,e.ipath=t.ipath,e.ivertex=t.ivertex,e.bBoundary=t.bBoundary,e.bEndPoint=t.bEndPoint}class xh extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e){super(),this.m_helper=e}compare(e,t,s){const n=e.getElement(s),r=this.m_helper.m_xy.read(2*t)-this.m_helper.m_xy.read(2*n);return r<0?-1:r>0?1:0}}class yh extends _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a3{constructor(e){super(),this.m_helper=e}compare(e,t,s){const n=e.getElement(s),r=this.m_helper.m_edges[t],i=this.m_helper.m_edges[n],o=r.getReversed(),a=i.getReversed();let h=r.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0),m=i.m_segment.intersectionOfYMonotonicWithAxisX(this.m_helper.m_yScanline,0);if(h===m){const e=o?r.m_segment.getStartY():r.m_segment.getEndY(),t=a?i.m_segment.getStartY():i.m_segment.getEndY(),s=Math.min(e,t);let n=.5*(s-this.m_helper.m_yScanline)+this.m_helper.m_yScanline;n===this.m_helper.m_yScanline&&(n=s),h=r.m_segment.intersectionOfYMonotonicWithAxisX(n,0),m=i.m_segment.intersectionOfYMonotonicWithAxisX(n,0)}return h<m?-1:h>m?1:0}}class Ph{constructor(e,t,s,n,r){this.m_multiVertexGeom=null,this.m_edges=[],this.m_freeEdges=[],this.m_lineEdgesRecycle=[],this.m_newEdges=[],this.m_recycledSegIter=null,this.m_crossOverHelperList=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N,this.m_progressTracker=null,this.m_progressCounter=0,this.m_AET=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T,this.m_xyToNode1=null,this.m_xyToNode2=null,this.m_pathOrientations=null,this.m_pathParentage=null,this.m_xy=null,this.m_pairs=[],this.m_pairIndices=null,this.m_pathsForOGCTests=[],this.m_curveStitcher=null,this.m_editShape=null,this.m_multiPathStitcher=null,this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult,this.m_progressCounter=0,this.m_progressTracker=n,this.m_geometry=e,this.m_knownSimpleResult=s,this.m_sr=t;const i=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,e,!1);this.m_toleranceIsSimple=i,this.m_toleranceIsSimpleClustering=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(i),this.m_toleranceIsSimpleCracking=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.Q)(i),this.m_toleranceSimplify=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,e,!0),this.m_description=this.m_geometry.getDescription(),this.m_attributeCount=this.m_description.getAttributeCount(),this.m_bOGCRestrictions=r,this.m_bPlanarSimplify=this.m_bOGCRestrictions,this.m_unknownOrientationPathCount=-1,this.m_yScanline=0,this.m_progressCounter=0}isSimplePlanarImpl(){if(this.m_bPlanarSimplify=!0,!this.checkStructure())return 0;const e=this.m_geometry.getGeometryType();return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e)&&!this.checkDegenerateSegments(!1)?0:this._CheckClustering()?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e)?this._CheckCracking()?this.m_geometry.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?this.checkSelfIntersectionsPolylinePlanar()?4:0:this._CheckSelfIntersections()?this._CheckValidRingOrientation():0:0:5:0}isSimplePlanarImpl3D(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),7}generateSortedPairs(e){let t=null;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e.getGeometryType())&&(t=e);const s=(this.m_bPlanarSimplify||this.m_bOGCRestrictions)&&null!==t,n=e.getPointCount();this.m_xy=e.getAttributeStreamRef(0),this.m_pairs.length=0,this.m_pairIndices=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(0),s&&(this.m_pathsForOGCTests.length=0);let r=0;for(let o=0;o<n;o++)if(this.m_pairs.push(2*o),this.m_pairs.push(2*o+1),this.m_pairIndices.add(2*o),this.m_pairIndices.add(2*o+1),s){for(;o>=t.getPathEnd(r);)r++;this.m_pathsForOGCTests.push(r)}const i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.B,a={parent:this,workPt:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,userSort(e,t,n){n.sort(e,t,((e,t)=>this.parent.compareVerticesForPlanarClustering(e,t,s)))},getValue(e){const t=this.parent.m_pairs[e],s=t>>1;this.parent.m_xy.queryPoint2D(2*s,this.workPt);return this.workPt.y+(1&t?this.parent.m_toleranceIsSimpleClustering:-this.parent.m_toleranceIsSimpleClustering)}};i.sort(this.m_pairIndices,0,2*n,a)}_TestToleranceDistancePlanar(e,t){const s=this.m_xy.read(2*e),n=this.m_xy.read(2*e+1),r=this.m_xy.read(2*t),i=this.m_xy.read(2*t+1);if(!!ln(s,n,r,i,this.m_toleranceIsSimpleClustering*this.m_toleranceIsSimpleClustering)){if(0===this.m_geometry.getDimension())return!1;return s===r&&n===i}return!0}checkStructure(){const e=this.m_geometry.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e)){const e=this.m_geometry.getImpl(),t=this.m_geometry.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?3:2;for(let s=0,n=e.getPathCount();s<n;s++)if(e.getPathSize(s)<t){if(e.hasNonLinearSegments()&&e.hasNonLinearSegmentsPath(s)&&e.getPathSize(s)>0)continue;return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(1,s,0),!1}}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(e)){const e=this.m_geometry.getImpl(),t=e.getAttributeStreamRef(0);for(let s=0,n=e.getPointCount();s<n;s++){if(!t.readPoint2D(2*s).isFinite())return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(2,s,0),!1}if(this.m_geometry.hasAttribute(1)){const t=e.getAttributeStreamRef(1);for(let s=0,n=e.getPointCount();s<n;s++){const e=t.read(s);if(!Number.isFinite(e))return Number.isNaN(e)?this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(3,s,0):this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(2,s,0),!1}}}return!0}checkDegenerateSegments(e){const t=this.m_geometry.getImpl(),s=t.querySegmentIterator(),n=t.hasAttribute(1),r=n?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.R)(this.m_sr,t,!1).total():0,i=t.hasNonLinearSegments(),o=this.m_toleranceIsSimple.total();for(;s.nextPath();)for(;s.hasNextSegment();){const t=s.nextSegment();let a=t.calculateLowerLength2D();if(!(a>o)&&!(i&&t.isCurve()&&(a=t.calculateLength2D(),a>o))){if(e&&n){const e=t.getStartAttributeAsDbl(1,0),s=t.getEndAttributeAsDbl(1,0);if(Math.abs(s-e)>r)continue}return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(4,s.getStartPointIndex(),-1),!1}}return!0}checkDegenerateSegments3D(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}_CheckClustering(){const e=this.m_geometry.getImpl();this.generateSortedPairs(e);const t=e.getPointCount();this.m_AET.clear(),this.m_AET.setComparator(new xh(this)),this.m_AET.setCapacity(t);for(let s=0,n=2*t;s<n;s++){this.progress_();const e=this.m_pairIndices.read(s),t=this.m_pairs[e],n=t>>1;if(1&t){const e=this.m_AET.search(n),t=this.m_AET.getPrev(e),s=this.m_AET.getNext(e);if(this.m_AET.deleteNode(e),t!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()&&s!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(t),this.m_AET.getElement(s)))return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(5,this.m_AET.getElement(t),this.m_AET.getElement(s)),!1}else{const e=this.m_AET.addElement(n),t=this.m_AET.getPrev(e);if(t!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(t),n))return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(5,n,this.m_AET.getElement(t)),!1;const s=this.m_AET.getNext(e);if(s!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()&&!this._TestToleranceDistancePlanar(this.m_AET.getElement(s),n))return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(5,n,this.m_AET.getElement(s)),!1}}return!0}_CheckCracking(){const e=this.m_geometry.getImpl(),t=e.getPointCount();return!e.hasNonLinearSegments()&&t<10?this._CheckCrackingBrute():this._CheckCrackingPlanesweep()}_CheckCrackingPlanesweep(){if(this.m_editShape=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,this.m_editShape.addGeometry(this.m_geometry),this.m_editShape.hasCurves()){this.m_curveStitcher=new fa;const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();this.m_geometry.queryEnvelope(t);const s=_a(this.m_toleranceSimplify.total(),t),n=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult;if(la(this.m_editShape,s,this.m_toleranceSimplify.total(),12e3,n,this.m_curveStitcher,null,this.m_progressTracker),0!==n.m_reason)return this.m_editShape=null,this.m_nonSimpleResult.assign(n),!1}const t=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult;return Mn(!1,this.m_editShape,this.m_toleranceIsSimpleCracking,t,this.m_progressTracker)?(null!=this.m_curveStitcher?(t.m_vertexIndex1=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,t.m_vertexIndex1),t.m_vertexIndex2=this.m_curveStitcher.getOriginalVertexIndex(this.m_editShape,t.m_vertexIndex2),this.m_curveStitcher=null):(t.m_vertexIndex1=this.m_editShape.getVertexIndex(t.m_vertexIndex1),t.m_vertexIndex2=this.m_editShape.getVertexIndex(t.m_vertexIndex2)),this.m_editShape=null,this.m_nonSimpleResult.assign(t),!1):(null==this.m_curveStitcher&&(this.m_editShape=null),!0)}_CheckCrackingBrute(){const e=this.m_geometry.getImpl(),t=e.querySegmentIterator(),s=e.querySegmentIterator();for(;t.nextPath();)for(;t.hasNextSegment();){const e=t.nextSegment();if(!t.isLastSegmentInPath()||!t.isLastPath()){s.resetTo(t);do{for(;s.hasNextSegment();){const n=s.nextSegment(),r=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.Q)(!0,e,n,this.m_toleranceIsSimpleCracking,!0);if(r){const e=2===r?7:6;return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(e,t.getStartPointIndex(),s.getStartPointIndex()),!1}}}while(s.nextPath())}}return!0}_CheckSelfIntersections(){let e=this.m_geometry.getImpl();null!==this.m_curveStitcher&&(this.m_multiPathStitcher=this.m_editShape.getGeometry(this.m_editShape.getFirstGeometry()),e=this.m_multiPathStitcher.getImpl(),this.generateSortedPairs(e)),this.m_edges.length=0,this.m_lineEdgesRecycle.length=0,this.m_recycledSegIter=e.querySegmentIterator(),this.m_recycledSegIter.setCirculator(!0);const t=[],s=e.getPointCount();let n=Number.NaN,r=0;for(let i=0,o=2*s;i<o;i++){this.progress_();const e=this.m_pairIndices.read(i),s=this.m_pairs[e];if(1&s)continue;const o=s>>1,a=this.m_xy.read(2*o),h=this.m_xy.read(2*o+1);if(t.length&&(a!==n||h!==r)){if(!this.processBunchForSelfIntersectionTest(t))return!1;t.length=0}t.push(o),n=a,r=h}return!!this.processBunchForSelfIntersectionTest(t)}checkSelfIntersectionsPolylinePlanar(){const e=this.m_geometry.getImpl(),t=[];for(let o=0,a=e.getPathCount();o<a;o++)t.push(e.isClosedPathInXYPlane(o));const s=dh();let n,r,i;{const o=this.m_pairIndices.read(0),a=this.m_pairs[o]>>1,h=this.m_xy.readPoint2D(2*a),m=this.m_pathsForOGCTests[a];n=t[m],r=e.getPathStart(m),i=e.getPathEnd(m)-1,s.bEndPoint=a===r||a===i,this.m_bOGCRestrictions?s.bBoundary=!n&&s.bEndPoint:s.bBoundary=s.bEndPoint,s.ipath=m,s.x=h.x,s.y=h.y,s.ivertex=a}for(let o=1,a=this.m_pairIndices.size();o<a;o++){const a=this.m_pairIndices.read(o),h=this.m_pairs[a];if(1&h)continue;const m=h>>1,l=this.m_xy.readPoint2D(2*m),g=this.m_pathsForOGCTests[m];let u;g!==s.ipath&&(n=t[g],r=e.getPathStart(g),i=e.getPathEnd(g)-1);const c=m===r||m===i;u=this.m_bOGCRestrictions?!n&&c:c;const _=ph(l.x,l.y,g,m,u,c);if(_.x===s.x&&_.y===s.y)if(this.m_bOGCRestrictions){if(!(_.bBoundary&&s.bBoundary||_.ipath===s.ipath&&_.bEndPoint&&s.bEndPoint))return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(10,_.ivertex,s.ivertex),!1}else if(!_.bEndPoint||!s.bEndPoint)return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(7,_.ivertex,s.ivertex),!1;fh(s,_)}return!0}checkSelfIntersectionsPolylinePlanar3D(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}checkSelfIntersectionsPolygonsOGC(){const e=this.m_geometry.getImpl(),t=[];let s=-1,n=!1;for(let l=0,g=e.getPathCount();l<g;l++)e.isExteriorRingOGC(l)&&(n=!1,s++,l<g-1&&(e.isExteriorRingOGC(l+1)||(n=!0))),t.push(n?s:-1);const r=gh();{const e=this.m_pairIndices.read(0),s=this.m_pairs[e]>>1,n=this.m_xy.readPoint2D(2*s),i=this.m_pathsForOGCTests[s];r.ipath=i,r.x=n.x,r.y=n.y,r.ivertex=s,r.ipolygon=t[i]}const i=[];for(let l=1,g=this.m_pairIndices.size();l<g;l++){const e=this.m_pairIndices.read(l),s=this.m_pairs[e];if(1&s)continue;const n=s>>1,o=this.m_xy.readPoint2D(2*n),a=this.m_pathsForOGCTests[n],h=uh(o.x,o.y,a,n,t[a]);if(h.x===r.x&&h.y===r.y){if(h.ipath===r.ipath)return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(11,h.ivertex,r.ivertex),!1;t[h.ipath]>=0&&t[h.ipath]===t[r.ipath]&&(0!==i.length&&ch(i.at(-1),r)||i.push({...r}),i.push(h))}_h(r,h)}if(0===i.length)return!0;const o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.N(!0);t.fill(-1);let a=-1;const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let l=0,g=i.length;l<g;l++){const e=i[l];e.x===h.x&&e.y===h.y||(a=o.createList(0),h.x=e.x,h.y=e.y);let s=t[e.ipath];-1===s&&(s=o.createList(2),t[e.ipath]=s),o.addElement(s,a),o.addElement(a,s)}const m=[];for(let l=o.getFirstList();-1!==l;l=o.getNextList(l)){const e=o.getListData(l);if(1&e||!(2&e))continue;let s=-1;for(m.push(l),m.push(-1);m.length;){const e=m.at(-1);m.pop();const t=m.at(-1);m.pop();const n=o.getListData(t);if(1&n){s=2&n?t:e;break}o.setListData(t,1|n);for(let s=o.getFirst(t);-1!==s;s=o.getNext(s)){const n=o.getData(s);n!==e&&(m.push(n),m.push(t))}}if(-1!==s){const e=t.indexOf(s);return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(12,e,-1),!1}}return!0}_CheckValidRingOrientation(){const e=null!==this.m_multiPathStitcher?this.m_multiPathStitcher.getImpl():this.m_geometry.getImpl();if(e.calculateArea2D()<=0)return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(8,1===e.getPathCount()?1:-1,-1),0;if(1===e.getPathCount())return this.m_bOGCRestrictions&&!this.checkSelfIntersectionsPolygonsOGC()?0:4;this.m_pathOrientations=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.U(e.getPathCount(),0),this.m_pathParentage=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(e.getPathCount(),-1);let t=-1,s=0;for(let i=0,o=e.getPathCount();i<o;i++){const n=e.calculateRingArea2D(i);if(this.m_pathOrientations.write(i,n<0?0:8),n>0)t=i,s=n;else{if(0===n)return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(8,i,-1),0;if((t<0||s<Math.abs(n))&&(this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(9,i,-1),this.m_bOGCRestrictions))return 0;this.m_pathParentage.write(i,t)}}this.m_unknownOrientationPathCount=e.getPathCount(),this.m_newEdges.length=0;const n=e.getPointCount();this.m_yScanline=Number.NaN;const r=[];this.m_xyToNode1=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(n,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()),this.m_xyToNode2=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.A(n,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()),this.m_freeEdges.length=0,this.m_AET.clear(),this.m_AET.setComparator(new yh(this));for(let i=0,o=2*n;this.m_unknownOrientationPathCount>0&&i<o;i++){const e=this.m_pairIndices.read(i),t=this.m_pairs[e];if(1&t)continue;const s=t>>1,n=this.m_xy.read(2*s+1);if(n!==this.m_yScanline&&r.length){if(!this.processBunchForRingOrientationTest(r))return 0;r.length=0}r.push(s),this.m_yScanline=n}return this.m_unknownOrientationPathCount>0&&!this.processBunchForRingOrientationTest(r)?0:this.m_bOGCRestrictions?0!==this.m_nonSimpleResult.m_reason?0:this.checkSelfIntersectionsPolygonsOGC()?5:0:0===this.m_nonSimpleResult.m_reason?4:3}processBunchForSelfIntersectionTest(e){if(1===e.length)return!0;for(let o=0,a=e.length;o<a;o++){const t=e[o];this.m_recycledSegIter.resetToVertex(t,-1);const s=this.m_recycledSegIter.previousSegment();this.m_edges.push(this.createEdge(s,t,this.m_recycledSegIter.getPathIndex(),!0)),this.m_recycledSegIter.nextSegment();const n=this.m_recycledSegIter.nextSegment();this.m_edges.push(this.createEdge(n,t,this.m_recycledSegIter.getPathIndex(),!1))}this.m_edges.sort(((e,t)=>this.edgeAngleCompare(e,t)));let t=this.m_crossOverHelperList.getFirstList();-1===t&&(t=this.m_crossOverHelperList.createList(0)),this.m_crossOverHelperList.reserveNodes(this.m_edges.length);for(let o=0,a=this.m_edges.length;o<a;o++)this.m_crossOverHelperList.addElement(t,o);let s=!0,n=-1,r=-1;for(;s;){s=!1;let e=this.m_crossOverHelperList.getFirst(t);if(-1===e)break;let i=this.m_crossOverHelperList.getNext(e);for(;-1!==i;){const o=this.m_crossOverHelperList.getData(e),a=this.m_crossOverHelperList.getData(i);if(n=this.m_edges[o].m_vertexIndex,r=this.m_edges[a].m_vertexIndex,n!==r)e=i,i=this.m_crossOverHelperList.getNext(e);else if(s=!0,this.m_crossOverHelperList.deleteElement(t,e),e=this.m_crossOverHelperList.getPrev(i),i=this.m_crossOverHelperList.deleteElement(t,i),-1===i||-1===e)break}}const i=this.m_crossOverHelperList.getListSize(t);if(this.m_crossOverHelperList.clear(t),i>0)return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(7,n,r),!1;for(let o=0,a=e.length;o<a;o++)this.recycleEdge(this.m_edges[o]);return this.m_edges.length=0,!0}processBunchForRingOrientationTest(e){for(let t=0,s=e.length;t<s;t++){const s=e[t];let n=this.m_xyToNode1.read(s);if(n!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()){const e=this.m_AET.getElement(n);this.m_freeEdges.push(e),this.m_AET.deleteNode(n),this.recycleEdge(this.m_edges[e]),this.m_edges[e]=null,this.m_xyToNode1.write(s,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode())}if(n=this.m_xyToNode2.read(s),n!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()){const e=this.m_AET.getElement(n);this.m_freeEdges.push(e),this.m_AET.deleteNode(n),this.recycleEdge(this.m_edges[e]),this.m_edges[e]=null,this.m_xyToNode2.write(s,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode())}}for(let t=0,s=e.length;t<s;t++){const s=e[t];this.m_recycledSegIter.resetToVertex(s,-1);const n=this.m_recycledSegIter.previousSegment();if(n.getStartY()>n.getEndY()){const e=this.m_recycledSegIter.getStartPointIndex(),t=this.createEdge(n,s,this.m_recycledSegIter.getPathIndex(),!0);let r;this.m_freeEdges.length>0?(r=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[r]=t):(r=this.m_edges.length,this.m_edges.push(t));const i=this.m_AET.addElement(r);this.m_xyToNode1.read(e)===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()?this.m_xyToNode1.write(e,i):this.m_xyToNode2.write(e,i),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(i)}this.m_recycledSegIter.nextSegment();const r=this.m_recycledSegIter.nextSegment();if(r.getStartY()<r.getEndY()){const e=this.m_recycledSegIter.getEndPointIndex(),t=this.createEdge(r,s,this.m_recycledSegIter.getPathIndex(),!1);let n;this.m_freeEdges.length>0?(n=this.m_freeEdges.at(-1),this.m_freeEdges.pop(),this.m_edges[n]=t):(n=this.m_edges.length,this.m_edges.push(t));const i=this.m_AET.addElement(n);this.m_xyToNode1.read(e)===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()?this.m_xyToNode1.write(e,i):this.m_xyToNode2.write(e,i),3&this.m_pathOrientations.read(this.m_recycledSegIter.getPathIndex())||this.m_newEdges.push(i)}}for(let t=0,s=this.m_newEdges.length;t<s&&this.m_unknownOrientationPathCount>0;t++){const e=this.m_newEdges[t],s=this.m_AET.getElement(e),n=this.m_edges[s].m_pathIndex;if(!(3&this.m_pathOrientations.read(n))){let t=-1,s=this.m_AET.getPrev(e),n=e,r=0;{let e=-1,i=null,o=-1,a=0;for(;s!==_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()&&(e=this.m_AET.getElement(s),i=this.m_edges[e],o=i.m_pathIndex,a=this.m_pathOrientations.read(o),!(3&a));)n=s,s=this.m_AET.getPrev(s);s===_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.T.st_nullNode()?(r=1,s=n):(t=1==(3&a)?o:this.m_pathParentage.read(o),r=i.getRightSide()?0:1,s=this.m_AET.getNext(s))}do{const e=this.m_AET.getElement(s),i=this.m_edges[e],o=i.m_pathIndex;let a=this.m_pathOrientations.read(o);if(!(3&a)){if(r!==i.getRightSide())return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(8,o,-1),!1;const e=r&&!i.getReversed()?1:2;if(a=-4&a|e,this.m_pathOrientations.write(o,a),2===e&&0===this.m_nonSimpleResult.m_reason){const e=this.m_pathParentage.read(o);if(e!==t&&(this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(9,o,e),this.m_bOGCRestrictions))return!1}if(this.m_unknownOrientationPathCount--,!this.m_unknownOrientationPathCount)return!0}t=1==(3&a)?o:this.m_pathParentage.read(o),n=s,s=this.m_AET.getNext(s),r=r?0:1}while(n!==e)}}return this.m_newEdges.length=0,!0}createEdge(e,t,s,r){let i;return e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine?i=this.createEdgeLine(e):(i=new lh,i.m_segment=e.clone()),i.m_vertexIndex=t,i.m_pathIndex=s,i.m_flags=0,i.setReversed(r),i}createEdgeLine(e){let t;return this.m_lineEdgesRecycle.length>0?(t=this.m_lineEdgesRecycle.at(-1),this.m_lineEdgesRecycle.pop(),e.copyTo(t.m_segment)):(t=new lh,t.m_segment=e.clone()),t}recycleEdge(e){e.m_segment.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine&&this.m_lineEdgesRecycle.push(e)}static isShortSegment(e,t,s,n){let r=e.calculateLowerLength2D();if(r<=s){let i=!0;if(e.isCurve()&&(r=e.calculateLength2D(),i=r<=s),i){if(t){let t=e.getEndAttributeAsDbl(1,0);Number.isNaN(t)&&(t=0);let s=e.getStartAttributeAsDbl(1,0);return Number.isNaN(s)&&(s=0),Math.abs(s-t)<=n}return!0}return!1}return!1}static isShortSegmentPoints(e,t,s,n,r){if(s){const s=e.getXYZ(),i=t.getXYZ();return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.W)(s,i,n,r)}{const s=e.getXY(),r=t.getXY();return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(s,r)<=n*n}}removeDegenerateSegmentsFromCurvedPath(e,t,s,n){const r=e.hasAttribute(1),i=e.querySegmentIterator();i.resetToPath(t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(i.nextPath());const o=this.m_toleranceSimplify.total();let h=!1,m=!0;const l=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,g=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(;i.hasNextSegment();){this.progress_();const e=i.nextSegment();if(Ph.isShortSegment(e,r,o,s))if(h){if(e.queryEnd(g),Ph.isShortSegmentPoints(l,g,r,o,s))continue;m&&(n.startPathPoint(l),m=!1),e.queryEnd(l),n.lineToPoint(l),h=!1}else u.assign(e.getStartXY()),e.queryStart(l),h=!0;else if(h)if(e.isCurve()){const t=e.clone();if(t.setCoordsForIntersector(u,e.getEndXY(),!1),t.setStart(l),Ph.isShortSegment(t,r,o,s))continue;n.addSegment(t,m),m=!1,h=!1}else{if(e.queryEnd(g),Ph.isShortSegmentPoints(l,g,r,o,s))continue;m&&(n.startPathPoint(l),m=!1),n.lineToPoint(g),h=!1}else n.addSegment(e,m),m=!1}if(m)return;if(!h)return;e.isClosedPath(t)?e.getPointByVal(e.getPathStart(t),l):e.getPointByVal(e.getPathEnd(t)-1,l);const c=n.querySegmentIterator();c.resetToLastPath(),c.resetToLastSegment();const _=n.getDescription().getAttributeCount()>1;for((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(c.previousPath());c.hasPreviousSegment();){const e=c.previousSegment();if(e.isCurve()){const t=e.clone();if(t.setCoordsForIntersector(e.getStartXY(),l.getXY(),!1),!Ph.isShortSegment(t,r,o,s)){_&&t.setEnd(l);const e=c.getEndPointIndex();for(let t=n.getPointCount()-1;t>=e;t--)n.removePoint(t);return void n.addSegment(t,!1)}}else if(e.queryStart(g),!Ph.isShortSegmentPoints(g,l,r,o,s)){const e=c.getEndPointIndex();for(let t=n.getPointCount()-1;t>=e;t--)n.removePoint(t);return void n.lineToPoint(l)}}n.removePath(n.getPathCount()-1)}multipointIsSimpleAsFeature(){if(!this.checkStructure())return 0;const e=this.m_geometry.getImpl();this.m_multiVertexGeom=e;const t=e.getPointCount(),s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(t,0);for(let n=0;n<t;n++)s[n]=n;s.sort(((e,t)=>this.compareVerticesMultiPoint(e,t)));for(let n=1;n<t;n++)if(0===this.compareVerticesMultiPoint(s[n-1],s[n]))return this.m_nonSimpleResult=new _OperatorDefinitions_js__WEBPACK_IMPORTED_MODULE_10__.NonSimpleResult(5,s[n-1],s[n]),0;return 1}polylineIsSimpleAsFeature(){return this.checkStructure()&&this.checkDegenerateSegments(!0)?1:0}polygonIsSimpleAsFeature(){return this.isSimplePlanarImpl()}multipointSimplifyAsFeature(){let e=this.m_geometry.getImpl();const t=Ph.hasNanZs(e);let s,n=this.m_geometry;t&&(s=this.m_geometry.clone(),e=s.getImpl(),s.replaceNaNs(1,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.V.getDefaultValue(1)),n=s),this.m_multiVertexGeom=e;const r=e.getPointCount(),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(r,0);for(let g=0;g<r;g++)i[g]=g;i.sort(((e,t)=>this.compareVerticesMultiPoint(e,t)));const o=new Array(r);o.fill(!1);let a=-1;for(let g=0;g<r;g++){const t=i[g];e.getXY(t).isFinite()&&((a<0||0!==this.compareVerticesMultiPoint(a,t))&&(o[t]=!0),a=t)}const h=this.m_geometry.createInstance();let m=0,l=0;for(let g=0;g<r;g++)o[g]?l=g+1:(m<l&&h.addPoints(n,m,l),m=g+1);return m<l&&h.addPoints(n,m,l),h.getImpl().setIsSimple(1,this.m_toleranceSimplify.total()),h}polylineSimplifyAsFeature(){const e=this.m_geometry.getImpl(),t=e.querySegmentIterator(),s=e.querySegmentIterator(),n=this.m_geometry.createInstance(),r=this.m_geometry,i=e.hasAttribute(1),o=i?(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.R)(this.m_sr,e,!0).total():0,a=[],h=[];let m=null;i&&(m=e.getAttributeStreamRef(1));const l=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,g=e.hasNonLinearSegments(),u=this.m_toleranceSimplify.total();for(;t.nextPath();){if(s.nextPath(),e.getPathSize(t.getPathIndex())<2)continue;if(g&&e.hasNonLinearSegmentsPath(t.getPathIndex())){this.removeDegenerateSegmentsFromCurvedPath(e,t.getPathIndex(),o,n);continue}s.resetToLastSegment();let c=0,_=0,d=!0,p=!0;for(;t.hasNextSegment();){this.progress_();const n=t.nextSegment(),r=s.previousSegment();if(t.getStartPointIndex()>s.getStartPointIndex())break;if(d){const s=t.getStartPointIndex();e.getXY(s).isNAN()||(d=!1,a.push(s))}if(p){const t=s.getEndPointIndex();e.getXY(t).isNAN()||(h.push(t),p=!1)}if(!d){const s=a.at(-1),r=t.getEndPointIndex();if(r-s>1){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;t.setSub(e.getXY(s),e.getXY(r)),c=t.length()}else c=n.calculateLength2D();if(c>u)a.push(r),c=0;else if(i){let e=m.read(s);Number.isNaN(e)&&(e=0);let t=m.read(r);Number.isNaN(t)&&(t=0),Math.abs(t-e)>o&&(a.push(r),c=0)}}if(!p){const t=h.at(-1),n=s.getStartPointIndex();if(n-t>1){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;s.setSub(e.getXY(t),e.getXY(n)),_=s.length()}else _=r.calculateLength2D();if(_>u)h.push(n),_=0;else if(i){let e=m.read(t);Number.isNaN(e)&&(e=0);let s=m.read(n);Number.isNaN(s)&&(s=0),Math.abs(s-e)>o&&(h.push(n),_=0)}}}if(a.length>0&&h.length>0&&(a.at(-1)<h.at(-1)?a.length>h.length?a.pop():h.pop():(a.at(-1)===h.at(-1)||h.pop(),h.pop())),h.length+a.length>=2){let e=!1;for(let t=0,s=a.length;t<s;t++)r.getPointByVal(a[t],l),e?n.lineToPoint(l):(n.startPathPoint(l),e=!0);for(let t=h.length-1;t>0;t--)r.getPointByVal(h[t],l),e?n.lineToPoint(l):(n.startPathPoint(l),e=!0);r.isClosedPath(t.getPathIndex())?n.closePathWithLine():h.length>0&&(r.getPointByVal(h[0],l),n.lineToPoint(l))}a.length=0,h.length=0}return i&&n.replaceNaNs(1,0),n.getImpl().setIsSimple(1,u),n}polygonSimplifyAsFeature(){return this.simplifyPlanar()}simplifyPlanar(){if(1===this.m_geometry.getFillRule()&&!(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(this.m_knownSimpleResult))return Ma(this.m_geometry,this.m_toleranceSimplify,!0,!1,this.m_knownSimpleResult,this.m_progressTracker,0,!0);const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E;if(t.addGeometry(this.m_geometry),this.m_geometry.hasAttribute(1)&&t.replaceNaNs(1,0),t.removeNaNVertices(),0!==t.getTotalPointCount()){let s=null,r=0,i=0;if(t.hasCurves()){s=new fa;const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();this.m_geometry.queryEnvelope(n);const o=_a(this.m_toleranceSimplify.total(),n);r=da(this.m_toleranceSimplify.total()),i=pa(o,r),aa(t,o,this.m_toleranceSimplify.total(),12e3,s,null,this.m_progressTracker)}if(!(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.X)(this.m_knownSimpleResult)){ya(t,this.m_toleranceSimplify.add(i),this.m_progressTracker,!0,!1)}this.m_geometry.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&er(t,t.getFirstGeometry(),this.m_knownSimpleResult,!1,-1,this.m_progressTracker),null!==s&&s.stitchCurves(t,t.getFirstGeometry(),r,!0)}const s=t.getGeometry(t.getFirstGeometry());return s.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(s.getImpl().updateOGCFlagsProtected(),s.setFillRule(0)),s.getImpl().setIsSimple(4,this.m_toleranceSimplify.total()),s}progress_(){}static hasNanZs(e){if(e.hasAttribute(1)){const t=e.getAttributeStreamRef(1);for(let s=0,n=e.getPointCount();s<n;s++){const e=t.read(s);if(Number.isNaN(e))return!0}}return!1}compareVerticesForPlanarClustering(e,t,s){if(e===t)return 0;const n=this.m_pairs[e],r=this.m_pairs[t],i=n>>1,o=r>>1,a=this.m_xy.readPoint2D(2*i);a.y+=1&n?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const h=this.m_xy.readPoint2D(2*o);h.y+=1&r?this.m_toleranceIsSimpleClustering:-this.m_toleranceIsSimpleClustering;const m=a.compare(h);if(0===m&&s){const e=this.m_pathsForOGCTests[i]-this.m_pathsForOGCTests[o];return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(e)}return m}compareVerticesMultiPoint(e,t){if(e===t)return 0;const s=this.m_multiVertexGeom.getXY(e),n=this.m_multiVertexGeom.getXY(t),r=!s.isFinite(),i=!n.isFinite();if(r||i)return r<i?-1:r>i?1:0;if(s.y<n.y)return-1;if(s.y>n.y)return 1;if(s.x<n.x)return-1;if(s.x>n.x)return 1;for(let o=1;o<this.m_attributeCount;o++){const s=this.m_description.getSemantics(o),n=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.V.getComponentCount(s);for(let r=0;r<n;r++){const n=this.m_multiVertexGeom.getAttributeAsDbl(s,e,r),i=this.m_multiVertexGeom.getAttributeAsDbl(s,t,r),o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.r)(n,i);if(0!==o)return o}}return 0}edgeAngleCompare(e,t){if(e===t)return 0;const s=e.m_segment.getTangent(e.getReversed()?1:0);e.getReversed()&&s.negateThis();const n=t.m_segment.getTangent(t.getReversed()?1:0);t.getReversed()&&n.negateThis();const r=s.getQuarter(),i=n.getQuarter();if(i===r){const e=s.crossProduct(n);return e<0?1:e>0?-1:0}return r<i?-1:1}}class Eh{getOperatorType(){return 10103}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}isSimpleAsFeature(e,t,s,n,r){const i=oh(e,t,s,n,r);return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.M)(e.getGeometryType(),i)}isSimplePlanarDONOTUSE(e,t,s,n,r){const i=rh(e,t,s,n,r);return (0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(i)}executeMany(e,t,s,n){return new Sh(e,t,s,n)}execute(e,t,s,n){const r=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([e]),o=this.executeMany(r,t,s,n).next();return o||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("null geometry"),o}}class Sh extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(e,t,s,n){super(),this.m_progressTracker=n,this.m_bForceSimplify=s,this.m_index=-1,this.m_inputGeometryCursor=e,this.m_spatialReference=t}next(){const e=this.m_inputGeometryCursor.next();return e?(this.m_index=this.m_inputGeometryCursor.getGeometryID(),this.simplify(e)):null}getGeometryID(){return this.m_index}tock(){return!1}getRank(){return 1}simplify(e){if(e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection){const t=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.g)(e,-1),s=(new Eh).executeMany(t,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker),n=e.createInstance();for(let e=s.next();null!=e;e=s.next())n.addGeometry(e);return n}return ah(e,this.m_spatialReference,this.m_bForceSimplify,this.m_progressTracker)}}function Ch(t,s,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;t.queryEnvelope(i);const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(o);const a=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(o);if(a.inflate(2*r),!a.isIntersecting(i))return 4;const h=t.getGeometryType(),m=s.getGeometryType();if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&i.containsEnvelope(a))return 1;if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(i);if(t.inflate(2*r),o.containsEnvelope(t))return 2}return 0}class Ih{constructor(e,t,s,r){this.m_intersectorGeom=null,this.m_sr=null,this.m_dimensionMask=-1,this.m_progressTracker=null,this.m_intersectorGeomType=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumUnknown,this.m_geomIntersectorEmptyGeom=null,this.m_intersectorGeom=e,this.m_sr=t,this.m_dimensionMask=s,this.m_progressTracker=r,this.m_intersectorGeomType=e.getGeometryType()}intersect(t){const s=this.tryFastImplementation(t);if(null!==s)return s;const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.g)(this.m_intersectorGeom,t),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.m_sr,n,!0).total(),i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();this.m_intersectorGeom.queryEnvelope(i);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),i.inflateCoords(2*r,2*r),i.intersect(o),i.inflateCoords(100*r,100*r);const a=0;let h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(this.m_intersectorGeom,i,a,0,this.m_progressTracker),m=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,i,a,0,this.m_progressTracker);return t.getDimension()>this.m_intersectorGeom.getDimension()&&(h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(m,m=h)),za(m,h,this.m_sr,this.m_progressTracker)}intersectEx(t){const s=this.tryFastImplementation(t);if(null!==s){const e=[];return e.length=3,e[s.getDimension()]=s,this.prepareVector(t.getDescription(),this.m_dimensionMask,e)}const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.g)(this.m_intersectorGeom,t),r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.m_sr,n,!0).total(),i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();this.m_intersectorGeom.queryEnvelope(i);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(o),i.inflateCoords(2*r,2*r),i.intersect(o),i.inflateCoords(100*r,100*r);const a=0;let h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(this.m_intersectorGeom,i,a,0,this.m_progressTracker),m=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,i,a,0,this.m_progressTracker);t.getDimension()>this.m_intersectorGeom.getDimension()&&(h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(m,m=h));const l=Wa(m,h,this.m_sr,this.m_progressTracker);return this.prepareVector(t.getDescription(),this.m_dimensionMask,l)}init(e,t,s,n=null){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}static intersectPoints(e,t,s){const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.g)(e,t);return La(e,t,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(s,n,!0))}tryFastImplementation(t){const s=t.getGeometryType();if(this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint&&s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=Ih.intersectPoints(t,this.m_intersectorGeom,this.m_sr);if(-1!==this.m_dimensionMask){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:e.getDescription()});return e.isEmpty()||t.add(e),t}return e}if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&(-1===this.m_dimensionMask||4===this.m_dimensionMask)){const e=t,s=this.m_intersectorGeom,n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({copy:e});return n.intersect(s),n}const r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.g)(t,this.m_intersectorGeom),o=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.m_sr,r,!0),a=t.isEmpty(),h=this.m_intersectorGeom.isEmpty();let l=a||h;if(!l){const e=Ch(this.m_intersectorGeom,t,o.total());if(4===e)l=!0;else{if(2&e)return this.m_intersectorGeom;if(1&e)return t}}if(l){const e=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s),r=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(this.m_intersectorGeomType);return e<r?Ih.ReturnEmpty(t,a):e>r||0===e&&s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint&&this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint?this.ReturnEmptyIntersector():Ih.ReturnEmpty(t,a)}if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&0===(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(this.m_intersectorGeomType)||this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope&&0===(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s)){const r=s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope?t:this.m_intersectorGeom,i=s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope?this.m_intersectorGeom:t,a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return r.queryEnvelope(a),(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(i,a,o.total(),0,this.m_progressTracker)}if(0===(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(this.m_intersectorGeomType)>0||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(s)>0&&0===(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.z)(this.m_intersectorGeomType)){if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)return Oa(t,this.m_intersectorGeom,o);if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return Xa(t,this.m_intersectorGeom,o);if(this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)return Oa(this.m_intersectorGeom,t,o);if(this.m_intersectorGeomType===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return Xa(this.m_intersectorGeom,t,o);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}return null}ReturnEmptyIntersector(){return null===this.m_geomIntersectorEmptyGeom&&(this.m_geomIntersectorEmptyGeom=this.m_intersectorGeom.createInstance()),this.m_geomIntersectorEmptyGeom}static ReturnEmpty(e,t){return t?e:e.createInstance()}prepareVector(e,t,s){let n=0;return 1&t?(s[0]||(s[0]=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:e})),n++):s.shift(),2&t?(s[n]||(s[n]=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e})),n++):s.splice(n,1),4&t?s[n]||(s[n]=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e})):s.splice(n,1),new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S(s)}}class bh extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(e,s,n,r,i){super(),this.m_smallCursor=null,this.m_progressTracker=r,this.m_geomIntersector=s.next(),this.m_intersector=new Ih(this.m_geomIntersector,n,i,r),this.m_index=-1,this.m_inputGeoms=e,this.m_dimensionMask=i,-1!==this.m_dimensionMask&&(this.m_dimensionMask<=0||this.m_dimensionMask>7)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("bad dimension mask")}next(){if(!this.m_geomIntersector)return null;let e;if(null!==this.m_smallCursor){if(e=this.m_smallCursor.next(),e)return e;this.m_smallCursor=null}for(;e=this.m_inputGeoms.next();){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),this.m_index=this.m_inputGeoms.getGeometryID(),-1===this.m_dimensionMask){return this.m_intersector.intersect(e)}this.m_smallCursor=this.m_intersector.intersectEx(e);return this.m_smallCursor.next()}return null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}class wh{getOperatorType(){return 1e4}accelerateGeometry(e,t,s){if(!this.canAccelerateGeometry(e))return!1;(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(t,e,!0);let r=0;return e.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&e.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline||!(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.I)(e)||0===s||(r|=e.getImpl().buildQuadTreeAccelerator(s)?1:0),!!r}canAccelerateGeometry(e){return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.I)(e)}supportsCurves(){return!0}executeMany(e,t,s,n,r=-1){return new bh(e,t,s,n,r)}execute(e,t,s,r){if(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint&&t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return Ih.intersectPoints(e,t,s);const o=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([e]),a=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([t]),h=this.executeMany(o,a,s,r,-1).next();return h||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("null output"),h}}function vh(e,t,s){return t.m_projector.project(e,s)}function Nh(e,t,s,n,r){e.m_projector.transformInPlaceZ(t,null,s,n,null,r);const i=n.slice(0,s).filter((e=>!e.isNAN()));for(let o=0,a=i.length;o<a;++o)n[o].assign(i[o]);return i.length}function Th(e,t,s,n,r){return e.m_projector.transformInPlaceZ(t,null,s,n,null,r)}function Gh(s,i,a,h){if(s&&i&&i.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("fold_into_360_range_geodetic"),s.isEmpty())return s;if(4===a)return Dh(s,i,h);let m=s;const l=m.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(l)){m=Al(s,i);const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;m.queryEnvelope(t);const n=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(i,t,!1).total(),r=i.getPannableExtent();let o=Math.floor((t.xmin-r.xmin)/r.width())*r.width()+r.xmin,h=m;for(;o<t.xmax;)o>t.xmin+n&&o<t.xmax-n&&(h=Hl(h,i,a,!0,o)),o+=r.width();m=h}else{if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:m.getDescription()});return e.addEnvelope(m,!1),Gh(e,i,a,h)}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(l)){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:m.getDescription()});return e.addSegment(m,!0),Gh(e,i,a,h)}}return Dh(m,i,h)}function Dh(e,s,i){if(e&&s&&s.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),e.isEmpty())return e;let o;const a=e.getGeometryType();if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e.getDescription()});t.addEnvelope(e,!1),o=t}else if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(a)){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});t.addSegment(e,!0),o=t}else o=e;const h=Al(o,s);return h.isEmpty()?h:vl(h,s,0,h!==e,0,i)}function Vh(e,t,s){if(!t.isPannable()||e.isEmpty())return e;const n=t.getPannableExtent().width(),r=.5*n,i=e.queryInterval(0,0);if(i.width()<r||!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(e.getGeometryType())){if(Number.isNaN(s))return e;const t=i.getCenter();if(Math.abs(t-s)<=r)return e;{const r=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T,i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)((s-t)/n)*n;r.setShiftCoords(i,0);const o=e.clone();return o.applyTransformation(r),o}}const a=e.getGeometryType(),h=e,m=h.getAttributeStreamRef(0),l=e.clone(),g=l.getAttributeStreamRef(0);let u=0,c=0,_=0,p=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(a)?0:-1;const f=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();let x=!1;for(let d=0,y=h.getPointCount();d<y;d++){const e=m.read(2*d);d===c&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(a)?(0===p&&Number.isNaN(s)&&(x=!0),p>0&&Number.isNaN(s)&&(s=f.getCenter(),x=!1),c=h.getPathEnd(p),p++):c=h.getPointCount(),Number.isNaN(s)?_=e:(_=s,u=0));let t=e-_;Math.abs(t)>r&&(t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)(t/n)*n,u-=t,Math.abs(u)<.1*n&&(u=0));const i=e+u;g.write(2*d,i),x&&f.mergeCoordinate(i),_=e}return l.notifyModified(),l}const Fh="missing implementation";function Hh(t,s,n,r){const o=s.getCoordinateSystemType();if(0===o){const e=new ac;return s.queryPrecisionDescriptor(e),kh(t,e,s,n)}let a=t;2!==r&&3!==r||!s.isPannable()||(a=Dh(a,s,n));const h=new ac;if(s.queryPrecisionDescriptor(h),a=kh(a,h,s,n),0===r||a.isEmpty())return a;if(1===o){if(1===r){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;a.queryLooseEnvelope(t);const r=s.getPannableExtent(),i=.01*r.width();return r.xmin=t.xmin-i,r.xmax=t.xmax+i,(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(a,r,s,n)}return a}if(2===o){const e=s.getPCSHorizon();if(1===r||2===r){const t=(new wh).execute(a,e,s,n);return t===e?t.clone():t}return a}if(3===o)return a;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(Fh)}function kh(e,t,s,n){const r=t.getXYGridRange(),i=e.hasAttribute(1),o=e.hasAttribute(2);let a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E,h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;i&&(a=t.getZGridRange()),o&&(h=t.getMGridRange());let m=(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(e,r,s,n);if(i){const t=m.queryInterval(1,0);a.contains(t)||(e===m&&(m=m.clone()),(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a5)(m,a,1,0))}if(o){const t=m.queryInterval(2,0);h.contains(t)||(e===m&&(m=m.clone()),(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a5)(m,h,2,0))}return m}class Ah{constructor(e){this.m_inputPCSHorizonClipOption=0,this.m_outputPCSHorizonClipOption=0,this.m_bDontGeonormalizePolygon=!1,this.m_bClipOutCurvedPoles=!1,this.m_bNormalizeOutputGeometry=!1,this.m_bDontHackPolesInGeogToGeog=!1,this.m_centralMeridianOfOutputGCS=0,this.m_densificationStepInput=0,e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),this.m_projTransform=e,this.m_bClipOutCurvedPoles=!1;const s=this.m_projTransform.getExtendedParamsImpl();this.m_bNormalizeOutputGeometry=s.normalizeResultGeometry,this.m_bNormalizeOutputGeometry&&(s.legacyHorizonClipping?this.m_bNormalizeOutputGeometry=!1:this.m_projTransform.getOutputSR().isPannable()||(this.m_bNormalizeOutputGeometry=!1)),s.clipWithInputHorizon?(this.m_inputPCSHorizonClipOption=0,!s.legacyHorizonClipping&&this.m_projTransform.getInputSR().isPannable()&&(this.m_inputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_inputPCSHorizonClipOption=1,s.clipWithOutputHorizon?(this.m_outputPCSHorizonClipOption=0,!s.legacyHorizonClipping&&this.m_projTransform.getOutputSR().isPannable()&&(this.m_outputPCSHorizonClipOption=this.m_bNormalizeOutputGeometry?4:2)):this.m_outputPCSHorizonClipOption=1,this.m_centralMeridianOfOutputGCS=s.centralMeridianOfOutputGCS,this.m_densificationStepInput=s.densificationStep;const n=this.m_projTransform.getExtendedParamsInternal();this.m_bDontGeonormalizePolygon=n.hasFlag(2147483648),this.m_bDontHackPolesInGeogToGeog=n.hasFlag(1073741824),this.m_bClipOutCurvedPoles=n.hasFlag(536870912)}project(e,t){if(this.m_projTransform.isIdentity()||e.isEmpty())return e;const s=e.getGeometryType();if(s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return this.projectPoint(e,t);const r=this.m_projTransform.getInputSR().getCoordinateSystemType(),o=this.m_projTransform.getOutputSR().getCoordinateSystemType(),a=this.m_projTransform.getInputSR(),h=this.m_projTransform.getOutputSR();if(0===r&&r===o){const t=Uh(a,h),s=e.clone();return s.applyTransformation(t),s}switch(s){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return this.projectMultiPath(e,t);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return this.projectMultiPoint(e,t);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return this.projectEnvelope(e,t);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection:return this.projectGeometryCollection(e,t);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}}projectPoint(e,t){const s=[e.getXY()];let n,r=null;(n=e.hasAttribute(1))&&(r=[e.getZ()]),this.transformInPlaceZ(s,r,1,s,r,null);const i=e.clone();return i.setXY(s[0]),n&&i.setZ(r[0]),i}projectMultiPoint(e,t){let s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({copy:e});const n=this.m_projTransform.getInputSR(),r=this.m_projTransform.getOutputSR(),i=n.getCoordinateSystemType(),o=r.getCoordinateSystemType();if(3===i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),s=Xl(s,n,this.m_inputPCSHorizonClipOption,t),s.isEmpty())return s;2===i&&$l(n,0,s),gg(this.m_projTransform,s,!1);let h=0;3===o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);const m=2===o;return m?h=r.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(h=this.m_centralMeridianOfOutputGCS),m&&0!==this.m_outputPCSHorizonClipOption||(s=vl(s,Zu(r),h,!1,0,t)),m&&(s=Sl(s,r,this.m_outputPCSHorizonClipOption,t),Kl(r,s,this.m_bNormalizeOutputGeometry),s.isEmpty()),s}projectMultiPath(e,t){const s=e.getGeometryType();return s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?this.projectPolygon(e,t):s===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?this.projectPolyline(e,t):void (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("project_multi_path_")}projectEnvelope(e,t){this.m_projTransform.getInputSR(),this.m_projTransform.getOutputSR();const s=this.m_projTransform.isVertical()&&e.hasAttribute(1);let n=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();if(s&&(n=e.queryInterval(1,0)),n.width()>0){const s=e.clone();s.setInterval(1,0,n.vmin,n.vmin);const r=this.projectEnvelopeHelper(s,t);s.setInterval(1,0,n.vmax,n.vmax);const i=this.projectEnvelopeHelper(s,t);return r.merge(i),r}return this.projectEnvelopeHelper(e,t)}projectPolygon(t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!this.m_projTransform.isIdentity()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!t.isEmpty());const r=this.m_projTransform.getInputSR(),i=this.m_projTransform.getOutputSR(),o=r.getCoordinateSystemType(),h=i.getCoordinateSystemType(),m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({copy:t});3===o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),3===h&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);const l=2===o,g=2===h,u=l?r.getGCS():r,c=g?i.getGCS():i,_=!g&&!this.m_bDontHackPolesInGeogToGeog;let d=!1,p=Xl(m,r,this.m_inputPCSHorizonClipOption,s);if(p.isEmpty())return p;let f=this.m_densificationStepInput;const x=!Number.isNaN(f);let y;x&&(p=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(p,f,0,0,s));let P=g?i.getPCSInfo():null,E=Number.NaN;l&&(E=r.getCentralMeridian());const S=null!==i.getGCSSplitLines();if(this.m_bDontGeonormalizePolygon){const e=p;if(l&&(hg(r,E,e),x)){const e=r.getUnitsPerMillimeter();f*=r.getGCS().getUnitsPerMillimeter()/e}if(cg(this.m_projTransform,e,_),x){const e=r.getGCS().getUnitsPerMillimeter();f*=i.getGCS().getUnitsPerMillimeter()/e}y=e}else{let t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:p.getDescription()});if(t.addAndExplicitlyOpenAllPaths(p,!1),l){if(hg(r,E,t),x){const e=r.getUnitsPerMillimeter();f*=r.getGCS().getUnitsPerMillimeter()/e}if(this.m_bClipOutCurvedPoles){const n=r.getPCSInfo(),i=n.getSouthPoleGeometry()===Nc.PE_POLE_LINE_CURVED,o=n.getNorthPoleGeometry()===Nc.PE_POLE_LINE_CURVED;if(i||o){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryLooseEnvelope(n),n.inflateCoords(1,1);const r=89.9999*u.getOneDegreeGCSUnit();i&&(n.ymin=-r),o&&(n.ymax=r),t=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.a)(t,n,u,0,0,s)}}}if(cg(this.m_projTransform,t,_),x){const e=Zu(r).getUnitsPerMillimeter();f*=Zu(i).getUnitsPerMillimeter()/e}let n=Number.NaN;g?(P=i.getPCSInfo(),n=i.getCentralMeridian()):Number.isNaN(this.m_centralMeridianOfOutputGCS)||(n=this.m_centralMeridianOfOutputGCS);let o=Mh(r)|Mh(i),a=10*c.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(o=3,a=10*c.getTolerance(0)),y=Vl(p,r,t,c,n,s,o,a,this.m_bNormalizeOutputGeometry),o=0}if(S&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!i.isPannable()),y=cl(y,i,s)),g){if(!d){const e=c.getPannableExtent().width();if(y.queryInterval(0,0).width()>=e-10*c.getTolerance(0)){const e=P.getNorthPoleLocation(),t=P.getSouthPoleLocation(),s=P.getNorthPoleGeometry(),n=P.getSouthPoleGeometry();let r=0;s===Nc.PE_POLE_POINT&&e!==Nc.PE_POLE_OUTSIDE_BOUNDARY&&(r=1),n===Nc.PE_POLE_POINT&&t!==Nc.PE_POLE_OUTSIDE_BOUNDARY&&(r|=2),d||=0!==r}}y=Sl(y,i,this.m_outputPCSHorizonClipOption,s),x&&(y=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(y,f,0,0,s)),Jl(i,y,this.m_bNormalizeOutputGeometry)}return y.isEmpty()||d&&(y=(new Eh).execute(y,i,!1,s)),y}projectPolyline(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!this.m_projTransform.isIdentity()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.isEmpty());const s=this.m_projTransform.getInputSR(),r=this.m_projTransform.getOutputSR(),i=s.getCoordinateSystemType(),o=r.getCoordinateSystemType(),h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({copy:e});3===i&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),3===o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);const m=2===i,l=2===o;m&&s.getGCS();const g=l?r.getGCS():r,u=!l&&!this.m_bDontHackPolesInGeogToGeog;let c=Xl(h,s,this.m_inputPCSHorizonClipOption,t);if(c.isEmpty())return c;let _=Number.NaN;m&&(_=s.getCentralMeridian());const d=null!==r.getGCSSplitLines();let p=this.m_densificationStepInput;const f=!Number.isNaN(p);let x;if(f&&(c=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(c,p,0,0,t)),this.m_bDontGeonormalizePolygon){if(m&&(hg(s,_,c),f)){const e=s.getUnitsPerMillimeter();p*=s.getGCS().getUnitsPerMillimeter()/e}if(cg(this.m_projTransform,c,u),f){const e=s.getGCS().getUnitsPerMillimeter();p*=r.getGCS().getUnitsPerMillimeter()/e}x=c}else{const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:c.getDescription()});if(e.addAndExplicitlyOpenAllPaths(c,!1),m&&(hg(s,_,e),f)){const e=s.getUnitsPerMillimeter();p*=s.getGCS().getUnitsPerMillimeter()/e}if(cg(this.m_projTransform,e,u),f){const e=s.getGCS().getUnitsPerMillimeter();p*=r.getGCS().getUnitsPerMillimeter()/e}let n=Number.NaN;l?n=r.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(n=this.m_centralMeridianOfOutputGCS);let i=Mh(s)|Mh(r),o=10*g.getTolerance(0);this.m_bDontHackPolesInGeogToGeog&&(i=3,o=0),x=Fl(c,s,e,g,n,t,i,o,this.m_bNormalizeOutputGeometry),i=0}return d&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!r.isPannable()),x=cl(x,r,t)),l&&(x=Sl(x,r,this.m_outputPCSHorizonClipOption,t),f&&(x=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(x,p,0,0,t)),Jl(r,x,this.m_bNormalizeOutputGeometry)),x.isEmpty(),x}projectGeometryCollection(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}projectEnvelopeHelper(t,s){const n=(t.height()+t.width())/400;if(0!==n){const r=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(t,n,0,0,s),i=this.projectMultiPath(r,s),o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({vd:t.getDescription()});if(i.isEmpty()){const n=Math.min(t.height(),t.width()),i=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(this.m_projTransform.getInputSR(),t,!0).total();if(n>100*i){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),s=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(this.m_projTransform.getOutputSR(),t,!0).total(),r=this.m_projTransform.getInputSR().getOneMeter()/this.m_projTransform.getOutputSR().getOneMeter();if(n>100*Math.max(i,s*r))return o}const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P;a.addAndExplicitlyOpenAllPaths(r,!1);this.projectMultiPath(a,s).queryEnvelope(o);const h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:t.getDescription()});h.reserve(4);const m=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;for(let e=0;e<4;e++)t.queryCornerByVal(e,m),h.add(m);const l=this.projectMultiPoint(h,s),g=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E;return l.queryEnvelope(g),o.merge(g),o}return i.queryEnvelope(o),o}{const e=t.getCenterXY(),n=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P(e),r=this.projectPoint(n,s),i=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({vd:t.getDescription()});if(r.isEmpty())i.setEmpty();else{t.copyTo(i);const e=r.getXY();i.setCoords(e.x,e.y,e.x,e.y)}return i}}transformInPlace(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}transformInPlaceZ(e,t,s,n,r,i){if(this.m_projTransform.isIdentity())return e!==n&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aw)(n,e,s),t!==r&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.b)(r,t,0,0,s),s;const o=this.m_projTransform,h=o.getInputSR(),m=o.getOutputSR(),l=h.getCoordinateSystemType(),g=m.getCoordinateSystemType();if(0===l&&l===g){return Uh(h,m).transformPoints2D(e,s,n),o.isVertical()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),s}3===l&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("image: transform_in_place_"),3===g&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("image: transform_in_place_"),Ll(e,s,n,h,this.m_inputPCSHorizonClipOption),r!==t&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.b)(r,t,0,0,s),2===l&&mg(h,0,n,s),fg(this.m_projTransform,n,r,s,!1);let c=0;const _=2===g;if(_?c=m.getCentralMeridian():Number.isNaN(this.m_centralMeridianOfOutputGCS)||(c=this.m_centralMeridianOfOutputGCS),_&&0!==this.m_outputPCSHorizonClipOption||Nl(n,s,m.getGCS(),c),_){if(!wl(n,s,m,this.m_outputPCSHorizonClipOption))for(let e=0;e<s;++e)n[e].setNAN();Wl(m,n,s,!1)}let d=s;for(let a=0;a<s;++a)n[a].isNAN()&&(r&&(r[a]=Number.NaN),d--);return d}}function Mh(e){if(2!==e.getCoordinateSystemType())return 0;let t=0;const s=e.getPCSInfo(),n=s.getNorthPoleLocation(),r=s.getSouthPoleLocation(),i=s.getNorthPoleGeometry(),o=s.getSouthPoleGeometry();return i===Nc.PE_POLE_POINT&&n!==Nc.PE_POLE_OUTSIDE_BOUNDARY&&(t=1),o===Nc.PE_POLE_POINT&&r!==Nc.PE_POLE_OUTSIDE_BOUNDARY&&(t|=2),t}function Uh(e,t){const s=e.getHorzUnitFactor(),n=t.getHorzUnitFactor();let r=1,i=1;const o=20015077/180;1===e.getUnit().getUnitType()&&(r=o),1===t.getUnit().getUnitType()&&(i=o);const a=s/n*(r!==i?r/i:1),h=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;return h.setScaleCoords(a,a),h}let qh=class{getOperatorType(){return 10300}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s){return!t||t.isIdentity()?e:new Bh(e,t,s)}execute(e,t,s){return t.isIdentity()?e:vh(e,t,s)}transform(e,t,s,n,r=!0){return r?Nh(e,t,s,n,null):Th(e,t,s,n,null)}transform3D(e,t,s,n,r=!0){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}foldInto360Range(e,t){return Dh(e,t,null)}foldInto360RangeGeodetic(e,t,s){return Gh(e,t,s,null)}normalizeGeometryEx(e,t,s,n,r=0){return Tm(e,t,s,n,r)}normalizeGeometry(e,t,s){return Vh(e,t,s)}clipToSpatialReference(e,t,s,n=0){return Hh(e,t,s,n)}};class Bh extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(e,s,n){super(),this.m_projTrans=s,this.m_progressTracker=n,this.m_index=-1,e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),this.m_inputGeoms=e}next(){const e=this.m_inputGeoms.next();return null!=e?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.o)(e),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),this.m_index=this.m_inputGeoms.getGeometryID(),vh(e,this.m_projTrans,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function Oh(e,i,h,m,l,g,u=!1){e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Geometry.Geodetic_densify.densify");let c=e.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),e.isEmpty()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.e)(c))return e;const _=new Wh;_.m_sr=i,_.m_gcs=i.getGCS(),_.m_transform=_.m_gcs!==i?i.getSRToGCSTransform():null,_.m_progressTracker=g;const d=Hu();let f,x,y;if(_.m_gcs.querySpheroidData(d),_.m_a=d.majorSemiAxis,_.m_eSquared=d.e2,_.m_rpu=_.m_gcs.getUnit().getUnitToBaseFactor(),_.m_gcsTolerance=_.m_gcs.getTolerance(0),_.m_radTolerance=_.m_gcsTolerance*_.m_rpu,_.m_maxLength=m,_.m_maxDeviation=l,_.m_curveType=h,c===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e.getDescription()});t.addEnvelope(e,!1),f=t,c=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon}else if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(c)){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});t.addSegment(e,!0),f=t,c=_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline}else f=e;if(4!==_.m_curveType){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(c)),x=_.replaceCurvesWithLinesAndProjectToGCSAsMultiPoint_(f),x.isEmpty())return x;x=Yh(_.m_rpu,x);let e=_.geodeticDensify(x);u||(e=(new qh).foldInto360RangeGeodetic(e,_.m_gcs,_.m_curveType)),y=_.m_transform&&!_.m_transform.isIdentity()?(new qh).execute(e,_.m_transform.getInverse(),g):e}else{let e;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(c)),i.isPannable())e=Al(f,i);else{const t=i.getPCSHorizon();e=(new wh).execute(f,t,i,g),e===t&&(e=t.clone())}if(x=e,x.isEmpty())return x;y=_.shapePreservingDensify(x)}return y}function Yh(t,s){const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(s.queryLooseEnvelope(n),n.width()*t<Math.PI)return s;let r=!1;const i=s.querySegmentIterator(),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(;i.nextPath();)for(;i.hasNextSegment();){const e=i.nextSegment();if(o.setCoordsPoint2D(e.getStartXY()),a.setCoordsPoint2D(e.getEndXY()),o.scale(t),a.scale(t),Math.abs(o.x-a.x)>Math.PI){if(!Xh(o,a)){r=!0;break}if(Math.abs(o.x-a.x)>2*Math.PI){r=!0;break}}}if(!r)return s;const h=s.createInstance();h.reserve(s.getPointCount());const m=s.getDescription().getAttributeCount()>1,l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0),c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0),_=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;for(i.resetToFirstPath();i.nextPath();){let e=Number.NaN,s=0;for(;i.hasNextSegment();){const n=i.nextSegment();o.setCoordsPoint2D(n.getStartXY()),a.setCoordsPoint2D(n.getEndXY()),o.scale(t),a.scale(t),Number.isNaN(e)?(s=im(o.x,Number.NaN,s),u.setCoordsPoint2D(o)):u.setCoordsPoint2D(c),e=u.x;if(Xh(o,a)){if(a.x-o.x>2*Math.PI)for(;a.x-o.x>2*Math.PI;)a.x-=2*Math.PI;else if(a.x-o.x<2*-Math.PI)for(;a.x-o.x<2*-Math.PI;)a.x+=2*Math.PI;s=im(a.x,Number.NaN,s),c.setCoordsPoint2D(a)}else l.setCoordsPoint2D(a),gm(l),s=im(l.x,e,s),c.setCoords(s+l.x,l.y);if(Math.abs(c.x-a.x)<.5&&c.setCoordsPoint2D(a),m){n.queryCoord(0,_),g.setCoordsPoint2D(u),g.scale(1/t),_.setXY(g);i.isFirstSegmentInPath()?h.startPathPoint(_):h.lineToPoint(_),i.isLastSegmentInPath()&&!i.isPathClosed()&&(n.queryCoord(1,_),g.setCoordsPoint2D(c),g.scale(1/t),_.setXY(g),h.lineToPoint(_))}else{i.isFirstSegmentInPath()&&h.insertPath2D(-1,null,0,0,!0);const e=h.getPathCount()-1;g.setCoordsPoint2D(u),g.scale(1/t),h.insertPoint2D(e,-1,g),i.isLastSegmentInPath()&&!i.isPathClosed()&&(g.setCoordsPoint2D(c),g.scale(1/t),h.insertPoint2D(e,-1,g))}}}return h}function Rh(e,t,s,n,r,i,o,a,h,m,l,g){const u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,c=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,_=n.compare(r)>0;nm(_,n,r,u,c);const d=Kh(e,t,s,u,c,i,o,a,h,m,null,l,g);return _&&sm(h,m,null,l),d}function Xh(e,t){return!(!Pc(e.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||!Pc(t.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))||!(!Pc(e.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||!Pc(t.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))}function Lh(e,t){return!(!Pc(e.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(t.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))||!(!Pc(e.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(t.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))}function zh(e,t){return!(!Pc(t.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(e.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))||!(!Pc(t.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(e.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))}class Wh{constructor(){this.m_sr=null,this.m_gcs=null,this.m_transform=null,this.m_progressTracker=null,this.m_a=0,this.m_eSquared=0,this.m_rpu=0,this.m_gcsTolerance=0,this.m_radTolerance=0,this.m_maxLength=0,this.m_maxDeviation=0,this.m_curveType=0}geodeticDensify(e){const t=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,o=e.getDescription().getAttributeCount()>1;for(;s.nextPath();){const e=[0];for(;s.hasNextSegment();){const a=s.nextSegment(),h=a.getStartXY(),m=a.getEndXY();h.scale(this.m_rpu),m.scale(this.m_rpu);const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,u=h.compare(m)>0;nm(u,h,m,l,g),n.length=0,r.length=0,this.m_maxLength>0?Kh(this.m_a,this.m_eSquared,this.m_curveType,l,g,this.m_maxLength,this.m_maxDeviation,this.m_radTolerance,null,null,o?r:null,n,e):Qh(),u&&sm(null,null,o?r:null,n),n[0].setCoordsPoint2D(a.getStartXY()),n.at(-1).setCoordsPoint2D(a.getEndXY());const c=1/this.m_rpu;for(let e=1,t=n.length-1;e<t;e++)n[e].scale(c);if(o){const e=rm(u,a,i);Zh(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),a,e,r,n,t)}else jh(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,t)}}return t}shapePreservingDensify(e){const t=e.createInstance(),s=e.querySegmentIterator(),n=[],r=[],i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,o=e.getDescription().getAttributeCount()>1;for(;s.nextPath();)for(;s.hasNextSegment();){const e=s.nextSegment(),a=e.getStartXY(),h=e.getEndXY(),m=a.compare(h)>0,l=rm(m,e,i);n.length=0,r.length=0,tm(this.m_a,this.m_eSquared,this.m_rpu,l,this.m_sr,this.m_maxLength,this.m_maxDeviation,o?r:null,n),m&&sm(null,null,o?r:null,n),o?Zh(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),e,l,r,n,t):jh(s.isFirstSegmentInPath(),s.isLastSegmentInPath()&&!s.isPathClosed(),n,t)}return t}replaceCurvesWithLinesAndProjectToGCSAsMultiPoint_(e){const t=e.hasNonLinearSegments();if((!this.m_transform||this.m_transform.isIdentity())&&(e=Al(e,this.m_gcs),!t))return e;const s=e.createInstance();s.reserveParts(e.getPointCount(),e.getPathCount());for(let n=0,r=e.getPathCount();n<r;++n){let t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M;const r=e.getPathStart(n),i=e.getPathEnd(n);t.addPoints(e,r,i);const o=e.isClosedPath(n);let a=!1;if(o&&i-r===1&&e.hasNonLinearSegmentsPath(n)){const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;e.getPointByVal(r,s),t.add(s),a=!0}if(this.m_transform&&!this.m_transform.isIdentity()){if(o&&!a){const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;e.getPointByVal(r,s),t.add(s)}if(t=(new qh).execute(t,this.m_transform,this.m_progressTracker),o&&t.getPointCount()>1){const e=t.getXY(0),s=t.getXY(t.getPointCount()-1);e.equals(s)&&t.removePoint(t.getPointCount()-1)}}t.getPointCount()>1&&(s.addPathMultiPoint(t,0,-1,!0),o&&s.closePathWithLine())}return s}}function jh(e,t,s,n){e&&n.insertPath2D(-1,null,0,0,!0);const r=n.getPathCount()-1;n.insertPointsFromPoints(r,-1,s,0,s.length-1,!0),t&&n.insertPoint2D(r,-1,s.at(-1))}function Zh(e,t,s,n,r,i,o){o.reserve(o.getPointCount()+i.length-1);const a=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;if(s.queryStart(a),e?o.startPathPoint(a):o.lineToPoint(a),i.length>2){const e=n.calculateLength2D();for(let t=1;t<i.length-1;t++){const s=n.lengthToT(r[t]*e);n.queryCoord(s,a),a.setXY(i[t]),o.lineToPoint(a)}}t&&(s.queryEnd(a),o.lineToPoint(a))}function Kh(e,t,s,n,r,i,o,a,h,m,l,g,u){const c={stack:[],error:void 0,hasError:!1};try{const _=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(c,new Cc,!1),d=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(c,new Cc,!1),p=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(c,new Cc,!1);Dc.geodeticDistance(e,t,n.x,n.y,r.x,r.y,p,_,d,s);const f=p.val,x=_.val,y=d.val;let P=x,E=y;P<0&&(P+=2*Math.PI),E<0&&(E+=2*Math.PI),h&&(h[0]=P),m&&(m[0]=E);let S=Number.NaN,C=Number.NaN;if(null!==l){const s=Vc.q90(e,t),r=Vc.q(e,t,n.y);S=(s-r)/f,C=(s+r)/f}const I=Lh(n,r),b=zh(n,r),w=I||b,v=mm(n,r,a),N=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(c,new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.S(new Cc,new Cc),!1),T=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,G=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,D=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;u[0]=im(n.x,Number.NaN,u[0]);let V=u[0];if(f<=i)return g.push(n.clone()),u[0]=im(r.x,Number.NaN,u[0]),null!=l&&l.push(0),w?(I&&om(n,r,l,g),b&&am(n,r,l,g)):v?hm(n,r,x,S,C,l,g):o>0&&(G.setCoords(n.x-V,n.y),T.setCoords(r.x-u[0],r.y),V=Jh()),g.push(r.clone()),f;const F=1+Math.ceil(f/i),H=f/(F-1),k=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;g.push(n.clone()),k.setCoordsPoint2D(n),G.setCoords(n.x-u[0],n.y),null!==l&&l.push(0);for(let i=1;i<F;i++){let h;if(i<F-1){const r=i*H;Dc.geodeticCoordinate(e,t,n.x,n.y,r,x,N.at(0),N.at(1),s),T.setCoords(N.at(0).val,N.at(1).val),u[0]=im(T.x,k.x,u[0]),D.setCoords(u[0]+T.x,T.y),h=i/(F-1)}else u[0]=im(r.x,Number.NaN,u[0]),T.setCoords(r.x-u[0],r.y),D.setCoordsPoint2D(r),h=1;w?(1===i&&I&&om(n,D,l,g),i===F-1&&b&&am(k,r,l,g)):v?lm(k,D,a)&&(n.x<r.x?k.x>D.x&&(u[0]+=2*Math.PI,D.setCoords(u[0]+T.x,T.y)):k.x<D.x&&(u[0]-=2*Math.PI,D.setCoords(u[0]+T.x,T.y)),hm(k,D,x,S,C,l,g)):o>0&&Jh(),g.push(D.clone()),null!=l&&l.push(h),k.setCoordsPoint2D(D),G.setCoordsPoint2D(T),V=u[0]}return f}catch(_){c.error=_,c.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(c)}}function Qh(e,t,s,n,r,i,o,h,m,l){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function Jh(e,t,s,n,r,i,o,h,m,l,g,u,c,_,d){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}function $h(e,t,s,n){const r=ds(e,t,s),i=ds(e,t,n);return _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(r,i)}function em(e,t,s,n,r,i,o,h){const m=new Array,l=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(Array,8);let g=2,u=r.getCoord2D(i);l[0][0]=u.x,l[0][1]=u.y,u=r.getCoord2D(o),l[1][0]=u.x,l[1][1]=u.y;const c=e=>{if(null!==s){const t=wc.projToGeog(s,e,l);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t===e)}for(const t of l)t[0]*=n,t[1]*=n};c(2),m.push(ds(e,t,new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(l[0][0],l[0][1]))),m.push(ds(e,t,new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(l[1][0],l[1][1])));let _=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(m[0],m[1]);if(_>h)return _;let d=0;for(g=3;g<=17;){const s=1/(g-1);let n=0;for(let e=1;e<g;++e)if(1&e){const t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(i,o,e*s);r.queryCoord2D(t,u),l[n][0]=u.x,l[n][1]=u.y,n++}c(n);let p=1;for(let r=0;r<n;++r)m.splice(p,0,ds(e,t,new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(l[r][0],l[r][1]))),p++;p=0;let f=m[p];p++;let x=0;for(;p!==m.length;++p){const e=m[p];x+=_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.distance(f,e),f=e}if(x>h)return x;if(d=x-_,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(d>=0||Math.abs(d)<1e-14*x),d<0&&(d=0),_=x,x+d<=h)return x+d;g=2*g-1}return _+d}function tm(e,t,s,n,r,i,o,h,m){const l=n.isCurve(),g=Fs(e,t)*Math.PI*179/180;let u=i;i>0&&!(i>g)||(u=g);const c=o,_=c>0;let d=Number.NaN;_&&(d=Bs(e,t,c));const p=1===r.getCoordinateSystemType();let f=null;p||(f=r.getPECoordSys());const x=r.getTolerance(0),y=n.getStartXY(),P=n.getEndXY(),E=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,S=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;if(p)E.setCoordsPoint2D(y),E.scale(s),S.setCoordsPoint2D(P),S.scale(s);else{const e=[y.x,y.y,P.x,P.y];wc.projToGeog(f,2,e),E.setCoords(e[0],e[1]),E.scale(s),S.setCoords(e[2],e[3]),S.scale(s)}let C=0,I=0;const b=[],w=[],v=[];b.push(P.clone()),w.push(S.clone()),v.push(1),m.push(y.clone()),null!==h&&h.push(I);const N=r.isPannable(),T=y.clone(),G=[.5,.33333333333333337,.6666666666666666,.16666666666666669,.8333333333333333];let D=5;l||(_?(G[0]=.5,G[1]=.25,G[2]=.75,D=3):D=1),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(u>0);const V=e=>{if(e=e.clone(),null!==f){const t=[e.x,e.y];wc.projToGeog(f,1,t),e.setCoords(t[0],t[1])}return e.scale(s),e};for(;w.length>0;){const i=b.at(-1).clone();S.assign(w.at(-1));const o=v.at(-1);let g=!1,c=Number.NaN;const y=em(e,t,f,s,n,I,o,u);let P=u>=y&&Math.abs(E.y-S.y)<.9*Math.PI;p&&P&&(P=Math.abs(E.x-S.x)<.9*Math.PI);const F=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,H=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let k=!1;if(!_&&P&&P&&(k=!0),n.calculateSubLength(I,o)<=x&&(k=!0),!k)for(let h=0;h<D;h++){const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(I,o,G[h]),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n.queryCoord2D(m,u);const f=V(u);if(0===h&&(c=m,F.setCoordsPoint2D(u),H.setCoordsPoint2D(f),!P)){g=!0;break}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(_),p&&Math.abs(E.x-f.x)>=Math.PI){g=!0;break}let x=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;l?(x=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.lerp(T,i,G[h]),y=V(x)):(x=u.clone(),y=f.clone());const C=Ss(e,t,E,S,G[h]),b=C.clone();if(p?(b.x/=s,b.y/=s):(b.x/=s,b.y/=s,Th(r.getGCSToSRTransform(),[b],1,[b],null)),b.isNAN()){const s=ds(e,t,f),n=ds(e,t,E),r=ds(e,t,S),{second:i}=vs(e,t,s,n,r,2,null);if(i>d){g=!0;break}}else{if(N){const e=r.getPannableExtent().width(),t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(n.getStartX(),n.getEndX(),.5);for(;b.x<t-.5*e;)b.x+=e;for(;b.x>=t+.5*e;)b.x-=e}const s=n.getClosestCoordinateOnInterval(b,new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E(I,o),-1);let i=n.getCoord2D(s);i=V(i);let a=$h(e,t,i,C);if(a>d){if(a<4*d){const s=ds(e,t,i),n=ds(e,t,E),r=ds(e,t,S),{second:o}=vs(e,t,s,n,r,2,null);a=o}if(a>d){g=!0;break}}else if(l){let s=ds(e,t,f);const n=ds(e,t,E),r=ds(e,t,S);let{second:i}=vs(e,t,s,n,r,3,null);if(i<=d){s=ds(e,t,y);const{second:o}=vs(e,t,s,n,r,3,null);i=o}if(i>d){g=!0;break}}}}g?(b.push(F.clone()),w.push(H.clone()),v.push(c)):(b.pop(),w.pop(),v.pop(),m.push(i.clone()),C+=y,null!==h&&h.push(C),T.setCoordsPoint2D(i),E.setCoordsPoint2D(S),I=o)}if(null!==h){const e=1/C;for(let t=0;t<h.length;t++)h[t]*=e}}function sm(e,t,s,n){if(n.reverse(),null!==s&&s.reverse(),e){const s=e[0],n=t[0];e[0]=n,t[0]=s}}function nm(e,t,s,n,r){e?(n.setCoordsPoint2D(s),r.setCoordsPoint2D(t)):(n.setCoordsPoint2D(t),r.setCoordsPoint2D(s))}function rm(e,t,s){return e?(s.create(t.getGeometryType()),t.copyTo(s.get()),s.get().reverse(),s.get()):t}function im(e,t,s){if(Number.isNaN(t)){for(;s-e>Math.PI;)s-=2*Math.PI;for(;e-s>Math.PI;)s+=2*Math.PI;return s}return s+e-t>Math.PI?s-=2*Math.PI:t-(s+e)>Math.PI&&(s+=2*Math.PI),s}function om(e,t,s,n){if(e.y>0){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.setCoords(t.x,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),Pc(e.x,r.x)||Pc(t.y,r.y)||(n.push(r),null!==s&&s.push(0))}else{const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.setCoords(t.x,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),Pc(e.x,r.x)||Pc(t.y,r.y)||(n.push(r),null!==s&&s.push(0))}}function am(e,t,s,n){if(t.y>0){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.setCoords(e.x,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),Pc(t.x,r.x)||Pc(e.y,r.y)||(n.push(r),null!==s&&s.push(1))}else{const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r.setCoords(e.x,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),Pc(t.x,r.x)||Pc(e.y,r.y)||(n.push(r),null!==s&&s.push(1))}}function hm(e,t,s,n,r,i,o){if(Sc(s)){if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-e.y>0){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;t.setCoords(e.x,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),o.push(t),null!==i&&i.push(n)}if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o-t.y>0){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;e.setCoords(t.x,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),o.push(e),null!==i&&i.push(n)}}else{if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o+e.y>0){const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;t.setCoords(e.x,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),o.push(t),null!==i&&i.push(r)}if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o+t.y>0){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;e.setCoords(t.x,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o),o.push(e),null!==i&&i.push(r)}}}function mm(e,t,s){return!(!lm(e,t,s)||Pc(e.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(e.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(t.y,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o)||Pc(t.y,-_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.o))}function lm(e,t,s){return Math.abs(Math.abs(e.x-t.x)-Math.PI)<=s}function gm(e){if(e.x<-Math.PI)for(;e.x<-Math.PI;)e.x+=2*Math.PI;else if(e.x>Math.PI)for(;e.x>Math.PI;)e.x-=2*Math.PI}function um(e,t,s,n){const r={stack:[],error:void 0,hasError:!1};try{const i=[s.x],o=[s.y-n],a=[s.x],h=[s.y+n];Vs(i,o),Vs(a,h);const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(r,new Cc,!1),l=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(r,new Cc,!1);Dc.greatEllipticDistance(e,t,s.x,s.y,i[0],o[0],m,null,null),Dc.greatEllipticDistance(e,t,s.x,s.y,a[0],h[0],l,null,null);return Math.min(m.val,l.val)}catch(i){r.error=i,r.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(r)}}function cm(t,s,n,r,i){const o=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;n.queryEnvelope(o);const a=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(null,n,!0).total();if(s.xmin-o.xmin<=a&&o.xmax-s.xmax<=a)return n;const h=s.width();let m=0;for(;s.xmin+m*h<o.xmin;)m++;for(;s.xmin+m*h>o.xmin;)m--;const l=m*h,g=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;g.setShiftCoords(-l,0);const u=n;u.applyTransformation(g);const c=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;u.queryEnvelope(c);let _=null;if(c.xmax>s.xmax){let n=0;const r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;r.setCoords({env2D:s}),r.ymin-=1,r.ymax+=1;let o=u;for(;r.xmin<c.xmax;){c.xmax>r.xmax&&(o=Hl(o,t,2,!0,r.xmax));const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.f)(o,r),a=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,e,!0).total(),m=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(o,r,a,Number.NaN,i);null===_?_=m===o?m.clone():m:(g.setShiftCoords(-n*h,0),m.applyTransformation(g),_.add(m,!1)),n++,r.xmin=r.xmax,r.xmax=s.xmax+n*h}}else _=u;return _}class _m{constructor(e,t){this.m_basisX=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_basisY=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,this.m_normal=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(1===e.getCoordinateSystemType()),this.m_gcs=e;const s=Hu();e.querySpheroidData(s),this.m_a=s.majorSemiAxis,this.m_e2=s.e2,this.m_rpu=e.getUnit().getUnitToBaseFactor(),this.m_curvCenterRad=t.mul(this.m_rpu);const n=this.m_curvCenterRad.x,r=this.m_curvCenterRad.y,i=Math.cos(n),o=Math.sin(n),h=Math.cos(r),m=Math.sin(r);this.m_cartCenter3D=fs(this.m_a,this.m_e2,i,o,h,m),this.m_normal.setCoordsPoint3D(this.m_cartCenter3D),this.m_d=this.m_cartCenter3D.length(),this.m_normal.divThis(this.m_d),_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d.selectRightHandedBasisFromNormal(this.m_normal,this.m_basisX,this.m_basisY),this.m_northPolePcs=this.projectPoint(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(0,.5*Math.PI/this.m_rpu)),this.m_southPolePcs=this.projectPoint(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(0,.5*-Math.PI/this.m_rpu))}project(e){const s=e.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(s)){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.o)(e);const t=e;return this.projectMultiVertex(t)}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Gnomonic.project")}unproject(e,s,r){const i=e.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(i)){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.o)(e);let t=e;const a=[];if(i===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){const e=t.getPathCount();for(let s=0;s<e;s++){const e=t.calculateRingArea2D(s);a.push(e)}}return this.unprojectMultiVertex(s,t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(i)?(Cm(this.m_gcs,0,t),dm(a,this.m_gcs,0,t,r)):t=vl(t,this.m_gcs,0,!0,0,r),t}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Gnomonic.unproject")}projectPoint(e){const t=e.mul(this.m_rpu),s=ds(this.m_a,this.m_e2,t),n=this.m_normal.dotProduct(s);if(n<=0)return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(Number.NaN,Number.NaN);const r=this.m_d/n,i=s.mul(r).sub(this.m_cartCenter3D),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;return o.x=this.m_basisX.dotProduct(i),o.y=this.m_basisY.dotProduct(i),o}unprojectPoint(e){const t=this.m_cartCenter3D.add(this.m_basisX.mul(e.x).add(this.m_basisY.mul(e.y)));return Ps(this.m_a,this.m_e2,t).divide(this.m_rpu)}projectMultiVertex(e){const t=e.getImpl();let s=!0;const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let i=0,o=t.getPointCount();i<o;i++)t.queryXY(i,n),n.y*this.m_rpu>.5*Math.PI?r.assign(this.m_northPolePcs):n.y*this.m_rpu<.5*-Math.PI?r.assign(this.m_southPolePcs):r.assign(this.projectPoint(n)),t.setXYNoCurves(i,r),r.isNAN()&&(s=!1);return t.notifyModifiedFlags(2001),s}unprojectMultiVertex(e,t){const s=t.getImpl(),n=e*e,r=!this.m_northPolePcs.isNAN(),i=!this.m_southPolePcs.isNAN();for(let o=0,a=s.getPointCount();o<a;o++){const e=s.getXY(o);let t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;r&&_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(e,this.m_northPolePcs)<=n?(t.setCoords(this.m_curvCenterRad.x,.5*Math.PI),t.scale(1/this.m_rpu)):i&&_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(e,this.m_southPolePcs)<=n?(t.setCoords(this.m_curvCenterRad.x,.5*-Math.PI),t.scale(1/this.m_rpu)):t=this.unprojectPoint(e),s.setXYNoCurves(o,t)}s.notifyModifiedFlags(2001)}}function dm(t,s,r,i,o){const a=i.getGeometryType(),h=s.getPannableExtent();let m=i,l=!1,g=!1;if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(r,0);n.setCoords({env2D:h}),n.centerAt(i),l=pm(t,s,n,m,o);const a=Sm(s,n,m,o);a!==m&&(g=!0),m=a}else m=(new qh).foldInto360RangeGeodetic(m,s,2);a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&(l||g)&&(m=(new Eh).execute(m,s,!1,o)),m!==i&&(i.setEmpty(),i.add(m,!1))}function pm(e,t,s,n,r){const i=fm(s,n),o=xm(e,t,s,n,r);return i||o}function fm(t,s){const n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(n);const r=Pc(t.ymax,n.ymax),i=Pc(t.ymin,n.ymin),o=r||i;return!!o&&(ym(t,s),o)}function xm(e,t,s,n,r){const i=[],o=[],a=.5*s.width();for(let g=0;g<n.getPathCount();g++){const h=n.getXY(n.getPathStart(g)),m=n.getXY(n.getPathEnd(g)-1),l=e[g]<0;if(Math.abs(h.x-m.x)>a){const e=Pm(l,t,s,g,n,r);i.push(e),o.push(g)}else if(!l){if(n.calculateRingArea2D(g)<0){const e=Em(t,s,g,n,r);i.push(e),o.push(g)}}}if(0===i.length)return!1;const h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:n.getDescription()});let m=0,l=o[m];for(let g=0;g<n.getPathCount();g++)g===l?(h.add(i[m],!1),m++,m<o.length&&(l=o[m])):h.addPath(n,g,!0);return n.setEmpty(),n.add(h,!1),!0}function ym(t,s){const n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a,r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;for(let e=0;e<s.getPathCount();e++){s.queryPathEnvelope(e,r);let i=Pc(t.ymax,r.ymax),o=Pc(t.ymin,r.ymin);if(!(i||o)){n.addPath(s,e,!0);continue}n.insertPath2D(-1,null,0,0,!0);const a=s.getPathStart(e),h=s.getPathEnd(e),m=h-a;let l=-1;for(l=a;l<h;l++){const e=s.getXY(l);if(i=Pc(t.ymax,e.y),o=Pc(t.ymin,e.y),!i&&!o)break}let g=l,u=!1,c=Number.NaN;do{const r=s.getXY(g);i=Pc(t.ymax,r.y),o=Pc(t.ymin,r.y);const h=a+(g+1-a)%m;if(i||o){let i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(c,r.y);n.insertPoint2D(e,-1,i);const o=s.getXY(h),a=Pc(t.ymax,o.y),m=Pc(t.ymin,o.y);a||m||(i=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(o.x,r.y),u?n.setXYNoCurves(n.getPointCount()-1,i):n.insertPoint2D(e,-1,i)),u=!0}else n.insertPoint2D(e,-1,r),c=r.x,u=!1;g=h}while(g!==l)}s.setEmpty(),s.add(n,!1)}function Pm(t,s,n,r,i,o){const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a,h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a,m=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T,l=i.getXY(i.getPathStart(r)),g=i.getXY(i.getPathEnd(r)-1),u=n.width(),c=.5*u,_=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;i.queryEnvelope(_);const d=Math.ceil(_.width()/u)+1;let p,f;l.x>g.x?(p=-u,f=t?n.ymin:n.ymax):(p=u,f=t?n.ymax:n.ymin),m.setShiftCoords(p,0),a.addPath(i,r,!0),h.add(a,!1);const x=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;for(let e=0;e<d;e++)h.applyTransformation(m),h.getPointByVal(0,x),a.lineToPoint(x),a.addSegmentsFromPath(h,0,0,h.getSegmentCount()-1,!1);const y=a.getXY(0),P=a.getXY(a.getPointCount()-1);y.y=f,P.y=f,a.lineTo(P);const E=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(E.setCoordsPoint2D(P),E.x-=.5*p;Math.abs(E.x-y.x)>c;)a.lineTo(E),E.x-=.5*p;a.lineTo(y);const S=n.getCenter().x,C=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;a.queryEnvelope(C);let I=0;const b=C.getCenter().x;b-S>c?I=-Math.ceil((b-S-c)/u):S-b>c&&(I=Math.ceil((S-b-c)/u)),0!==I&&(m.setShiftCoords(I*u,0),a.applyTransformation(m));const w=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,N=w.addGeometry(a);kl(w,N,s,0,2,!0,n.xmin),kl(w,N,s,0,2,!0,n.xmax);const T=w.getGeometry(N),D=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.f)(T,n);D.inflateCoords(0,1);const V=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,D,!0);return (0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(T,n,V.total(),Number.NaN,o)}function Em(t,s,n,r,i){const o=s.width(),a=.5*o,h=s.getCenter().x,m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;r.queryPathEnvelope(n,m);let l,g=0,u=m.getCenter().x;if(u-h>a?g=-Math.ceil((u-h-a)/o):h-u>a&&(g=Math.ceil((h-u-a)/o)),0!==g){const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(g*o,0),r.getImpl().applyTransformationToPath(e,n),r.queryPathEnvelope(n,m),u=m.getCenter().x}const c=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.containsExclusiveEnvelope(m)?(l=!1,c.setCoords({env2D:s})):(l=!0,c.setCoords({env2D:s}),c.xmin-=o,c.xmax+=o);let _=r.createInstance();_.addPathPoint2D(null,0,!0);const d=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;if(d.setCoords(c.xmin,c.ymin),_.insertPoint2D(0,-1,d),d.setCoords(c.xmin,c.ymax),_.insertPoint2D(0,-1,d),d.setCoords(.5*(c.xmin+c.xmax),c.ymax),_.insertPoint2D(0,-1,d),d.setCoords(c.xmax,c.ymax),_.insertPoint2D(0,-1,d),d.setCoords(c.xmax,c.ymin),_.insertPoint2D(0,-1,d),d.setCoords(.5*(c.xmin+c.xmax),c.ymin),_.insertPoint2D(0,-1,d),l){_.addPath(r,n,!0);const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;u<h?e.setShiftCoords(o,0):e.setShiftCoords(-o,0),r.getImpl().applyTransformationToPath(e,n),_.addPath(r,n,!0);const a=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,m=a.addGeometry(_);kl(a,m,t,0,2,!0,s.xmin),kl(a,m,t,0,2,!0,s.xmax),_=a.getGeometry(m);const l=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.f)(_,s);l.inflateCoords(0,1);const g=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(null,l,!0).total();_=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(_,s,g,Number.NaN,i)}else _.addPath(r,n,!0);return _}function Sm(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;n.queryEnvelope(i);const o=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(null,n,!0).total();if(s.xmin-i.xmin<=o&&i.xmax-s.xmax<=o)return n;const a=n.createInstance();let h=n.createInstance();const m=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,l=n.getPathCount();for(let e=0;e<l;e++)n.queryPathEnvelope(e,m),s.xmin-m.xmin<=o&&m.xmax-s.xmax<=o?a.addPath(n,e,!0):(h.setEmpty(),h.addPath(n,e,!0),h=cm(t,s,h,!0,r),a.add(h,!0));return a}function Cm(e,t,s){const n=e.getPannableExtent(),r=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.construct(t,0);n.centerAt(r);const i=n.width(),o=.5*i,a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;a.setNAN();let h=Number.NaN;for(let m=0;m<s.getPathCount();m++)for(let e=s.getPathStart(m);e<s.getPathEnd(m);e++){const t=s.getXY(e),r=Pc(t.y,n.ymax)||Pc(n.ymin,t.y);e===s.getPathStart(m)?(a.setNAN(),h=0):a.isNAN()||r||(h=Im(t.x,a.x,o,i,h)),t.x+=h,s.setXYNoCurves(e,t),r||a.setCoordsPoint2D(t)}s.getImpl().notifyModifiedFlags(2001)}function Im(e,t,s,n,r){return r+e-t>s?r-=n:t-(r+e)>s&&(r+=n),r}function bm(e,t,s,n,r,i){const o=t.getAttributeStreamRef(0),a=t.getPointCount();let h=!1;const m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let P=0;P<a;++P){if(o.queryPoint2D(2*P,m),1&i&&m.y>=s){h=!0;break}if(2&i&&m.y<=-s){h=!0;break}}if(!h)return!1;let l=!1;e&&(l=t.getImpl().isClosedPathInXYPlane(0));const g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,u=g.addGeometry(t),c=g.getFirstPath(u);let _=-1,d=!0;const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,f=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;let x=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;const y=Gm*r/360;for(let P=g.getFirstVertex(c);P!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;P=g.getNextVertex(P)){g.queryXY(P,m);let e=1&i&&m.y>=s?1:0;if(e|=2&i&&m.y<=-s?2:0,_>0&&_!==e){if(p.x!==m.x){const e=g.getPrevVertex(P);g.queryPoint(e,f);const t=g.insertVertex(c,P,f);p.x=m.x,g.setXY(t,p)}if(l){let e=x!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n?g.getNextVertex(x):g.getFirstVertex(c);const t=g.getPrevVertex(P);for(;e!==t;)e=g.removeVertex(e,!1);if(x!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){const e=g.getXY(x),s=g.getXY(t);if(Math.abs(e.x-s.x)>y){g.queryPoint(x,f);const n=g.insertVertex(c,t,f);e.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(e.x,s.x,.5),g.setXY(n,e)}}}x=_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n}if(e&&(m.y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(n,m.y),g.setXY(P,m),!d&&_!==e))if(m.x!==p.x){g.queryPoint(P,f);const e=g.insertVertex(c,P,f);g.setXYCoords(e,p.x,m.y),x=e}else x=P;_=e,p.assign(m),d=!1}if(l){if(x!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n){let e=g.getNextVertex(x);for(;e!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;)e=g.removeVertex(e,!1)}const e=g.getFirstVertex(c);let t=g.getLastVertex(c);const s=g.getXY(e),n=g.getXY(t);if(!s.equals(n)&&(g.queryPoint(e,f),t=g.insertVertex(c,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n,f),Math.abs(s.x-n.x)>y)){const e=g.insertVertex(c,t,f);s.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(s.x,n.x,.5),g.setXY(e,s)}}return t.assignCopy(g.getGeometry(u)),!0}function wm(e,t){let s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:e});s.addEnvelope(t,!1);const n=t.width()/180;return s=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(s,n,0,0,null),s}function vm(e,t){const s=e.getPannableExtent();return Number.isNaN(t)||s.centerAtCoords(t,0),s}function Nm(e,t,s){const n=Hu();t.querySpheroidData(n);const r=t.getGCS()!==t?t.getSRToGCSTransform():null,i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,100),o=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.d(0,0,0),a=e.getPointCount(),h=t.getGCS().getUnit().getUnitToBaseFactor();for(let u=0,c=a;u<c;){const t=Math.min(100,c-u);e.queryCoordinates(i,t,u,u+t),r&&(new qh).transform(r,i,t,i,!1);for(let e=0;e<t;e++){if(i[e].isNAN())continue;i[e].scale(h);const t=ds(n.majorSemiAxis,n.e2,i[e]);o.addThis(t)}u+=t}const m=Ps(n.majorSemiAxis,n.e2,o);m.scale(1/h);const l=e;if(!new _m(t.getGCS(),m).project(l))return 0;s.length=e.getPathCount();const g=l.calculateArea2D()<0;for(let u=0,c=e.getPathCount();u<c;u++){const e=l.calculateRingArea2D(u),t=g?e<0:e>0;s[u]=t}return g?-1:1}function Tm(e,t,s,r,o){if(!t.isPannable()||e.isEmpty())return e;const a=e.getGeometryType();a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("not yet impl for geometry collection");const h=t.getPannableExtent();Number.isNaN(s)&&(s=h.getCenterX());const m=h.width(),l=.5*m,g=o>0,c=e.queryInterval(0,0);if(!g&&c.width()<l||!(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(e.getGeometryType())){const t=c.getCenter();if(Math.abs(t-s)<=l)return e;{const n=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T,r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)((s-t)/m)*m;n.setShiftCoords(r,0);const i=e.clone();return i.applyTransformation(n),i}}if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){let n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});n.addAndExplicitlyOpenAllPaths(e,!1),g&&(n=Oh(n,t,2,o,Number.NaN,null,!0));const i=[];if(!r){{let s=e;g&&(s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a,s.add(n,!1));const r=Nm(e,t,i);if(r)r<0&&n.reverseAllPaths();else{const e=s.getPathCount();for(let t=0;t<e;t++)i.push(s.calculateRingArea2D(t)>0)}}r=i}return new Dm(null,r,n,null,t,s,3,0,null).geoNormalizePolygonGeometry(!0)}if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline){let n=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:e.getDescription()});n.addAndExplicitlyOpenAllPaths(e,!1),g&&(n=Oh(n,t,2,o,Number.NaN,null,!0));return new Dm(null,null,n,null,t,s,3,0,null).geoNormalizePolylineGeometry(!0)}if(a===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint){const t=e,n=t.getAttributeStreamRef(0);let r,i=null,o=s,a=0;const h=.1*m;for(let s=0,g=t.getPointCount();s<g;s++){const t=n.read(2*s);let g=t-o;if(Math.abs(g)>l&&(g=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)(g/m)*m,a-=g,Math.abs(a)<h&&(a=0)),0!==a){i||(r=e.clone(),i=r.getAttributeStreamRef(0));const n=t+a;i.write(2*s,n)}o=t}return i?(r.notifyModified(),r):e}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}const Gm=210;class Dm{constructor(e,t,s,n,r,i,o,h,m){this.m_bAdjustedAtPoles=0,this.m_inputPoly=s,this.m_progressTracker=m,this.m_originalGeometry=e,this.m_originalSR=n,this.m_polygonRingFlags=t,this.m_pannableSR=r,this.m_poleSnappingTolerance=h,this.m_poleFlags=o,this.m_bAdjustedAtPoles=0,this.m_pannableExtent=vm(this.m_pannableSR,i),this.m_centralLongitude=Number.isNaN(i)?this.m_pannableExtent.getCenterX():i,this.m_width360=this.m_pannableExtent.width(),this.m_degree=this.m_width360/360,this.m_GCSLargeDelta=Gm*this.m_degree,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null===this.m_originalGeometry&&null===this.m_originalSR||null!==this.m_originalGeometry&&null!==this.m_originalSR)}geonormalizeRing(e,t,s,n,r,o,h){let m=s;const l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:this.m_inputPoly.getDescription()});l.addPath(this.m_inputPoly,e,!0),0!==this.m_poleFlags&&(this.m_bAdjustedAtPoles|=bm(!0,l,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,this.m_pannableExtent.width(),this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(m=!1));let g=-1;m&&(g=this.m_originalGeometry.getPathStart(e));const u=l.getAttributeStreamRef(0),c=l.getPointCount();let _=0,d=u.read(0),p=0;const f=3*this.m_pannableSR.getTolerance(0);let x=!1;const y=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,P=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let E=!1;const S=l.hasNonLinearSegments(),C=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let a=1;a<c;++a){u.queryPoint2D(2*a,C);const e=C.x;let t=e+_;const s=t-d;if(C.x=t,Math.abs(s)>this.m_GCSLargeDelta){if(m){const e=g+a-1,t=g+(a+1<c?a:0),r=o.read(2*e),i=(o.read(2*t)-r)*n;Math.abs(s-i)>1*this.m_degree&&(m=!1)}if(!m){_-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(this.m_width360,t-d),t=e+_,++p,E=0!==_,C.x=t}}else x||(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a4)(y,P,C,f)&&(x=!0);E&&(S&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("error in geonormalize_ring_ for curves"),u.write(2*a,t)),d=t,y.setCoordsPoint2D(P),P.setCoordsPoint2D(C)}p&&l.notifyModified();const b=l.getXY(0),w=l.getXY(c-1);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(b,w)<f){const e=this.finalizeGeoNormalizeClosedRing(l,x,r);h.add(e,!1)}else{if(t<0)if(null!==this.m_originalGeometry){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==this.m_originalGeometry);t=this.m_originalGeometry.calculateRingArea2D(e)>0?1:0}else t=1;const s=this.finalizeGeoNormalizeOpenedRing(t>0,l);h.add(s,!1)}}geoNormalizePolygonGeometry(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_originalSR&&this.m_originalGeometry||!this.m_originalGeometry&&!this.m_originalSR),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_pannableSR.isPannable());let s=null,n=Number.NaN;const r=!!this.m_originalSR&&this.m_originalSR.isPannable();r&&(s=this.m_originalGeometry.getAttributeStreamRef(0),n=this.m_width360/this.m_originalSR.getPannableExtent().width()),this.m_bAdjustedAtPoles=0;const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:this.m_inputPoly.getDescription()});for(let e=0,a=this.m_inputPoly.getPathCount();e<a;++e){const o=this.m_polygonRingFlags?this.m_polygonRingFlags[e]?1:0:-1;this.geonormalizeRing(e,o,r,n,t,s,i)}const o=this.m_pannableSR.getTolerance(0),h=this.m_pannableExtent.width()/180;Ol(i,this.m_pannableExtent,.1*o,!1);const m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(m.setCoords({env2D:this.m_pannableExtent}),t){let t=!0;for(let s=0;s<2;s++){t=!0;const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();for(let e=0,n=i.getPathCount();e<n;e++)if(i.queryPathEnvelope(e,s),!(m.xmin<=s.xmin&&m.xmax>=s.xmax||s.xmin>=m.xmax||s.xmax<=m.xmin)){t=!1;break}if(t)break;m.move(.5*this.m_width360,0)}t||m.setCoords({env2D:this.m_pannableExtent})}let l=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(i,m,o,h,this.m_progressTracker),g=i!==l;const u=this.m_originalGeometry?this.m_originalGeometry.calculateArea2D():1,c=l.calculateArea2D();let _=0;if(c>0&&u<0)_=1;else if(c<=0&&u>0)if(0===c){if(this.m_originalSR){let e=Number.NaN;2===this.m_originalSR.getCoordinateSystemType()?e=this.m_originalSR.getPCSHorizon().calculateArea2D():1===this.m_originalSR.getCoordinateSystemType()&&(e=this.m_originalSR.getPannableExtent().getArea()),u>.99*e&&(_=-1)}}else _=-1;if(0!==_){const e=wm(l.getDescription(),m);e.add(l,!1),g=!0,l=e}return g&&(l=(new Eh).execute(l,this.m_pannableSR,!1,this.m_progressTracker)),l}geoNormalizePolylineGeometry(t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_pannableSR.isPannable());let s=null;const n=this.m_originalSR&&this.m_originalSR.isPannable();let r=1;n&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_originalGeometry),r=this.m_width360/this.m_originalSR.getPannableExtent().width(),s=this.m_originalGeometry.getAttributeStreamRef(0));const o=this.m_pannableExtent.width(),h=o*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.O)()*4;let m=t,l=Number.NaN;const g=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();this.m_bAdjustedAtPoles=0;let u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:this.m_inputPoly.getDescription()});for(let d=0,p=this.m_inputPoly.getPathCount();d<p;++d){let t=n;const c=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:this.m_inputPoly.getDescription()});c.addPath(this.m_inputPoly,d,!0);const _=this.m_inputPoly.isClosedPath(d);0!==this.m_poleFlags&&(this.m_bAdjustedAtPoles|=bm(_,c,this.m_pannableExtent.ymax-this.m_poleSnappingTolerance,this.m_pannableExtent.ymax,o,this.m_poleFlags)?1:0,this.m_bAdjustedAtPoles&&(t=!1));let p=-1;const f=c.getPointCount();let x=!1;t&&(p=this.m_originalGeometry.getPathStart(d),x=this.m_originalGeometry.isClosedPath(d));const y=c.getAttributeStreamRef(0);let P=0,E=y.read(0),S=0;const C=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,b=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;let w=!1;const v=c.hasNonLinearSegments(),N=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=1;e<f;++e){y.queryPoint2D(2*e,N);const n=N.x;let o=n+P;const a=o-E;if(N.x=o,Math.abs(a)>this.m_GCSLargeDelta){if(t){const n=p+e-1;let i=p;(!x||e+1<f)&&(i+=e);const o=s.read(2*n),h=(s.read(2*i)-o)*r;Math.abs(a-h)>1*this.m_degree&&(t=!1)}if(!t){P-=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(this.m_width360,o-E),o=n+P,++S,w=0!==P,N.x=o}}w&&(v&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("error in geonormalize_ring_ for curves"),y.write(2*e,o)),E=o,C.setCoordsPoint2D(b),b.setCoordsPoint2D(N)}if(S&&c.notifyModified(),m){let t=!1;if(!c.isEmpty()){const s=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(c.queryEnvelope(s),s.width()>=o||s.ymin<=this.m_pannableExtent.ymin||s.ymax>=this.m_pannableExtent.ymax)t=!0;else{if(Number.isNaN(l)){const e=this.m_centralLongitude-.5*o;l=s.xmin,l+=Math.round((e-s.xmin)/o)*o,l>e&&(l-=o),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(l<=e),l<e&&(l+=o),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(l>=e)}let e=Math.round((l-s.xmin)/o)*o;if(s.xmin+e>l+h&&(e-=o),s.xmin+e<l-h&&(e+=o),g.mergeCoordinate(s.xmin+e),g.mergeCoordinate(s.xmax+e),t=g.width()>=o,!t){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;t.setShiftCoords(e,0),c.applyTransformation(t)}}}u.add(c,!1),t&&(u=(()=>{const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:u.getDescription()});for(let t=0,s=u.getPathCount();t<s;++t){const s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:u.getDescription()});s.addPath(u,t,!0);const n=vl(s,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);e.add(n,!1)}return e})(),m=!1)}else{const e=vl(c,this.m_pannableSR,this.m_centralLongitude,!0,0,this.m_progressTracker);u.add(e,!1)}}if(m)return u;const c=this.m_pannableSR.getTolerance(0),_=this.m_pannableExtent.width()/180;Ol(u,this.m_pannableExtent,.1*c,!1);return (0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(u,this.m_pannableExtent,c,_,this.m_progressTracker)}finalizeGeoNormalizeOpenedRing(t,s){const n=s.getPointCount(),r=s.getXY(0),i=s.getXY(n-1);{const e=Math.abs(i.x-r.x),t=Math.round(e/this.m_width360)*this.m_width360;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Math.abs(e-t)<this.m_pannableSR.getTolerance(0))}const o=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(i.x-r.x),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryLooseEnvelope(h);const m=this.m_pannableExtent.getCenterX();let l=0,g=m-this.m_width360,u=m+this.m_width360;if(o>=0){let e=Math.ceil((g-h.xmin)/this.m_width360);for(e*=this.m_width360;g>h.xmin+e;)e+=this.m_width360;for(;g<h.xmax+e;)e-=this.m_width360;for(l=e,h.width()>720&&(u=g+360*Math.ceil(h.width()/360));u<h.xmax;)u+=this.m_width360}else{let e=Math.ceil((u-h.xmax)/this.m_width360);for(e*=this.m_width360;u<h.xmax+e;)e-=this.m_width360;for(;u>h.xmin+e;)e+=this.m_width360;for(l=e,h.width()>720&&(g=u-360*Math.ceil(h.width()/360));g>h.xmin;)g-=this.m_width360}const c=Math.round(Math.abs(i.x-r.x)/this.m_width360)*this.m_width360,_=o*c,d=h.clone();d.move(l,0);const p=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0),f=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;f.setShiftCoords(l,0),s.applyTransformation(f);const x=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:s.getDescription()});x.add(s,!1),p.assign(s.getXY(n-1));let y=0,P=x.getXY(0).x;for(;o>0?d.xmax<u:d.xmin>g;)d.move(_,0),f.xd=_,s.applyTransformation(f),P+=_,this.m_pannableExtent.xmin<=P&&this.m_pannableExtent.xmax>=P&&(y=x.getPointCount()-1),s.setXY(0,p),p.assign(s.getXY(n-1)),x.addSegmentsFromPath(s,0,0,n-1,!1);const E=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:x.getDescription()});E.add(x,!1);const S=x.getXY(0),C=x.getXY(x.getPointCount()-1),b=o<0?t:!t,w=E.getPointCount()-1;if(b){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(C.x,this.m_pannableExtent.ymax);E.lineTo(e);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymax);E.lineTo(t);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(S.x,this.m_pannableExtent.ymax);E.lineTo(s)}else{const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(C.x,this.m_pannableExtent.ymin);E.lineTo(e);const t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(this.m_pannableExtent.getCenterX(),this.m_pannableExtent.ymin);E.lineTo(t);const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(S.x,this.m_pannableExtent.ymin);E.lineTo(s)}if(E.interpolateAttributesPath(0,w,0),E.getImpl().changeRingStartPoint(y),c>this.m_width360){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({copy:E});f.setShiftCoords(this.m_width360,0),e.applyTransformation(f),E.add(e,!1)}return E}finalizeGeoNormalizeClosedRing(t,s,r){const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:t.getDescription()});i.add(t,!1);const o=()=>{const e=i.getPointCount()-2;return i.getSegmentType(e)!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine};if(i.hasNonLinearSegments()&&o()){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S,t=i.getPointCount()-2;i.getSegmentBuffer(t,e,!1),i.removePointFromPath(0,t+1),i.closeLastPathWithSegment(e.get())}else i.removePointFromPath(0,i.getPointCount()-1);const a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();i.queryLooseEnvelope(a);let h=Math.ceil((this.m_pannableExtent.xmin-a.xmin)/this.m_width360);for(h*=this.m_width360;this.m_pannableExtent.xmin>a.xmin+h;)h+=this.m_width360;for(;this.m_pannableExtent.xmin<a.xmax+h;)h-=this.m_width360;if(h+=this.m_width360,0!==h){a.move(h,0);const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(h,0),i.applyTransformation(e)}if(this.m_pannableExtent.xmin<=a.xmin&&this.m_pannableExtent.xmax>=a.xmax){if(s){const e=i.calculateArea2D(),t=(new Eh).execute(i,this.m_pannableSR,!0,this.m_progressTracker);if(t!==i){const s=t.calculateArea2D();(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(e)!==(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(s)&&t.reverseAllPaths(),i.assignMove(t)}}let e;if(e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a(r?{copy:i}:{move:i}),r)for(;a.xmin<this.m_pannableExtent.xmax;){a.move(this.m_width360,0);const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;t.setShiftCoords(this.m_width360,0),i.applyTransformation(t),e.add(i,!1)}return e}let m=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:t.getDescription()});m.add(i,!1);const l=s||a.width()>this.m_width360-10*this.m_pannableSR.getTolerance(0);for(;a.xmin<this.m_pannableExtent.xmax;){a.move(this.m_width360,0);const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(this.m_width360,0),i.applyTransformation(e),m.add(i,!1)}if(l){const e=m.calculateArea2D();m.setFillRule(1),m=(new Eh).execute(m,this.m_pannableSR,!0,this.m_progressTracker);const t=m.calculateArea2D();(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(e)!==(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(t)&&m.reverseAllPaths()}return m}geonormalize_ring_(e,t,s,n,r,i,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}}function Vm(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);const t=ou(e),s=new km;return s.setVertProj_(t),s}function Fm(e,t=!0){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}function Hm(e){return Su()}class km{constructor(){this.m_hashCode=0,this.m_peVertSysVal=null,this.m_verticalUnit=new bu,this.m_verticalShift=0,this.m_userVerticalWKID=0,this.m_bIsDepth=!1}getType(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getID(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getLatestID(){return this.m_peVertSysVal?this.m_peVertSysVal.getLatestID():0}getOldID(){return this.m_peVertSysVal?this.m_peVertSysVal.getOldID():0}getText(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),""}getTextExtended(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),""}getText2(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),""}getUnit(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}equals(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}equalForProjection(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getPeVertcsCopy(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}getOneMeter(){return 1/this.m_verticalUnit.getUnitToBaseFactor()}getUnitToBaseFactor(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}isDepth(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getVerticalShift(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}isCustomWkid(){return!!this.m_peVertSysVal&&this.m_peVertSysVal.isCustomWkid()}getHashCode(){return this.m_hashCode}setVertProj_(e){this.m_peVertSysVal=e}getPEVerticalCoordSys(){return this.m_peVertSysVal?this.m_peVertSysVal.m_peVertcs:null}}function Am(e,t,s,n,r){if(e.equals(t))return!1;if(n){let s=1,i=0,o=1,a=1,h=0,m=1;Number.isNaN(e.m_heightMetersPerUnit)||(s=e.m_heightMetersPerUnit,i=e.m_heightZ0,o=e.m_heightSign,a=t.m_heightMetersPerUnit,h=t.m_heightZ0,m=t.m_heightSign);const l=o*m*s/a;for(let e=0;e<r;e++)n[e]=(n[e]-i)*l+h}let i=1,o=0;if(Number.isNaN(e.m_XYToRadians)||(i=e.m_XYToRadians/t.m_XYToRadians,o=e.m_PrimeMeridianDegrees-t.m_PrimeMeridianDegrees,0!==o&&(o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.b)(o),o/=t.m_XYToRadians)),Array.isArray(s)){const e=s;for(let t=0;t<r;t++)e[t][0]=e[t][0]*i+o,e[t][1]=e[t][1]*i}else{const e=s;for(let t=0;t<r;t++){const s=t<<1;e[s]=e[s]*i+o,e[s+1]=e[s+1]*i}}return!0}function Mm(){return{m_heightMetersPerUnit:0,m_heightSign:0,m_heightZ0:0,m_XYToRadians:0,m_PrimeMeridianDegrees:0,assign(e){this.m_heightMetersPerUnit=e.m_heightMetersPerUnit,this.m_heightSign=e.m_heightSign,this.m_heightZ0=e.m_heightZ0,this.m_XYToRadians=e.m_XYToRadians,this.m_PrimeMeridianDegrees=e.m_PrimeMeridianDegrees},equals(e){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_heightSign,e.m_heightSign)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_heightMetersPerUnit,e.m_heightMetersPerUnit)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_heightZ0,e.m_heightZ0)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_XYToRadians,e.m_XYToRadians)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_PrimeMeridianDegrees,e.m_PrimeMeridianDegrees)},initFromGcsAndVcsPe(e,t){this.m_heightSign=1,this.m_heightMetersPerUnit=Number.NaN,this.m_heightZ0=0,this.m_XYToRadians=Number.NaN,this.m_PrimeMeridianDegrees=Number.NaN,t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),e&&(this.m_XYToRadians=e.getUnit().getUnitFactor(),this.m_PrimeMeridianDegrees=e.getPrimem().getLongitude())},initFromGcsAndVcs(e,t){const s=e?e.getPECoordSys():null,n=t?t.getPEVerticalCoordSys():null;this.initFromGcsAndVcsPe(s,n)},processUnitParams(e){Number.isNaN(this.m_heightMetersPerUnit)&&(this.m_heightMetersPerUnit=e.m_heightMetersPerUnit,this.m_heightSign=e.m_heightSign,this.m_heightZ0=e.m_heightZ0),Number.isNaN(this.m_XYToRadians)&&(this.m_XYToRadians=e.m_XYToRadians,this.m_PrimeMeridianDegrees=e.m_PrimeMeridianDegrees)}}}class Um{constructor(e){this.m_constantsLoaded=-1,this.m_isUsable=-1,this.m_inputSR=null,this.m_outputSR=null,this.m_inputSRHorz=null,this.m_outputSRHorz=null,this.m_inputVCS=null,this.m_outputVCS=null,this.m_hashCode=0,this.m_areaOfUse=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E,this.m_inputUnitParams=Mm(),this.m_outputUnitParams=Mm(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e),this.m_geogTran=e,this.m_vertTran=null,this.m_latestID=Ic.getCode(this.m_geogTran),this.m_latestID<0&&(this.m_latestID=0);const t=this.m_geogTran.getGeogcs1();Ic.getCode(t);const s=this.m_geogTran.getGeogcs2();Ic.getCode(s),this.initUnitParams()}getLatestId(){return this.m_latestID}getText(){return this.m_geogTran?this.m_geogTran.toString():((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),"")}getGeogtran(){return this.m_geogTran}getVerttran(){return null}loadConstants(e){let t=this.m_constantsLoaded;if(-1===t){if(!e){this.m_geogTran||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("vcs not impl");const t=this.m_geogTran.getParameters();null!==t[bc.PE_PARM_ND]&&(e=0===t[bc.PE_PARM_ND].getValue())}t=this.m_geogTran.loadConstants()?1:0,this.m_constantsLoaded=t}return 0!==t}isUsable(){let e=this.m_isUsable;return-1===e&&(this.m_geogTran?this.m_isUsable=e=this.m_geogTran?1:0:this.m_isUsable=e=this.m_vertTran?1:0),1===e}getInputSr(e){return this.updateSrs(),e?this.m_inputSR:this.m_inputSRHorz}getOutputSr(e){return this.updateSrs(),e?this.m_outputSR:this.m_outputSRHorz}getHashCode(){let e=this.m_hashCode;return 0===e&&(e=this.m_latestID>0?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(this.m_latestID):(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ay)(this.getText()),0===e&&(e=345),this.m_hashCode=e),e}isGeogtran(){return null!==this.m_geogTran}prepareOrThrow(){}getName(){return this.isGeogtran()?this.getGeogtran().getName():((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("vcs not impl"),"")}updateSrs(){if(this.m_inputSR||this.m_inputVCS)return;let e,t,s,n,r,i;if(this.m_geogTran){const o=this.m_geogTran.getGeogcs1(),a=ru(o),h=this.m_geogTran.getGeogcs2(),m=ru(h);let l=-1,g=-1;l=a.getVcsCode(),g=m.getVcsCode(),s=Ru(o,null,null,1),n=Ru(h,null,null,1),l>0&&g>0?(r=Vm(l),i=Vm(g),e=zu(),t=zu()):(e=s,t=n)}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);this.m_inputSR||this.m_inputVCS||(this.m_inputSR=e,this.m_outputSR=t,this.m_inputSRHorz=s,this.m_outputSRHorz=n,this.m_inputVCS=r,this.m_outputVCS=i)}initUnitParams(){if(this.m_inputUnitParams.m_heightSign=1,this.m_inputUnitParams.m_heightMetersPerUnit=Number.NaN,this.m_inputUnitParams.m_heightZ0=0,this.m_outputUnitParams.m_heightSign=1,this.m_outputUnitParams.m_heightMetersPerUnit=Number.NaN,this.m_outputUnitParams.m_heightZ0=0,this.m_inputUnitParams.m_XYToRadians=Number.NaN,this.m_inputUnitParams.m_PrimeMeridianDegrees=Number.NaN,this.m_outputUnitParams.m_XYToRadians=Number.NaN,this.m_outputUnitParams.m_PrimeMeridianDegrees=Number.NaN,this.m_vertTran)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0);else if(this.m_geogTran){const e=this.m_geogTran;let t=e.getGeogcs1();this.m_inputUnitParams.m_XYToRadians=t.getUnit().getUnitFactor(),this.m_inputUnitParams.m_PrimeMeridianDegrees=t.getPrimem().getLongitude(),t=e.getGeogcs2(),this.m_outputUnitParams.m_XYToRadians=t.getUnit().getUnitFactor(),this.m_outputUnitParams.m_PrimeMeridianDegrees=t.getPrimem().getLongitude()}}}function qm(e,t,s,n,r,i,o){let a=null;if(t){a=t.getPEVerticalCoordSys()}let h=null;if(e){h=e.getPECoordSys()}let m=null;if(n){m=n.getPEVerticalCoordSys()}let l=null;if(s){l=s.getPECoordSys()}if(!(h||a||l||m))return!1;const g=Mm();g.initFromGcsAndVcsPe(h,a);const u=Mm();return u.initFromGcsAndVcsPe(l,m),Am(g,u,r,i,o)}function Bm(e,t,s,n,r,i,o,a){const h=t,m=e,l=Mm();l.initFromGcsAndVcsPe(m,h),a.assign(n?s.m_outputUnitParams:s.m_inputUnitParams),a.processUnitParams(l),l.processUnitParams(a),o>0&&Am(l,a,r,i,o)}function Om(e,t,s,n,r,i,o,a){const h=Mm();h.assign(s?t.m_inputUnitParams:t.m_outputUnitParams),h.processUnitParams(e);let m=null,l=null;if(n){l=n.getPECoordSys()}const g=Mm();g.initFromGcsAndVcsPe(l,m),g.processUnitParams(h),h.processUnitParams(g),a>0&&Am(h,g,i,o,a)}function Ym(e,t,s,n,r,i,o,a,h){const m=Mm(),l=Mm();m.assign(s?t.m_inputUnitParams:t.m_outputUnitParams),l.assign(r?n.m_outputUnitParams:n.m_inputUnitParams),m.processUnitParams(e),l.processUnitParams(m),m.processUnitParams(l),a>0&&Am(m,l,i,o,a),h.assign(l)}function Rm(e,t,s,n,r,i,o){const a=t.getVerttran(),h=t.getGeogtran();if(o.assign(s?t.m_inputUnitParams:t.m_outputUnitParams),o.processUnitParams(e),i>0){t.prepareOrThrow();const e=s?bc.PE_TRANSFORM_2_TO_1:bc.PE_TRANSFORM_1_TO_2;a?dg():pg(h,i,n,r,e)}}function Xm(e,t,s,n,r){const i=e.getVerttran(),o=e.getGeogtran();if(r>0){e.prepareOrThrow();const a=t?bc.PE_TRANSFORM_2_TO_1:bc.PE_TRANSFORM_1_TO_2;i?dg():pg(o,r,s,n,a)}}class Lm{supportsCurves(){return!0}accelerateGeometry(e,t,s){return zm(e,t,s)}canAccelerateGeometry(e){return Wm(e)}}function zm(e,t,s){if(!Wm(e))return!1;(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.L)(t,e,!1);let n=0;const r=e.getGeometryType();return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(r)&&(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.I)(e)&&0!==s&&(n|=e.getImpl().buildQuadTreeAccelerator(s)?1:0),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(r)&&(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.J)(e)&&0!==s&&(n|=e.getImpl().buildQuadTreeForPathsAccelerator(s)?1:0),n>0}function Wm(e){return (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.I)(e)||(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.J)(e)}class jm extends Lm{getOperatorType(){return 8}execute(e,t,s,n){return kr(e,t,s,1,n)}}function Zm(s,i,o,a){if(s.isEmpty()||i.isEmpty())return s;const h=s.getDimension(),m=i.getDimension();if(h>m)return s;const l=s.getGeometryType(),g=i.getGeometryType(),u=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,c=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D,_=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(u),i.queryEnvelope(c),_.setCoords({env2D:u}),_.mergeEnvelope2D(c);const d=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.c)(o,_,!0),p=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(d),f=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(f.setCoords({env2D:u}),f.inflateCoords(p,p),!f.isIntersecting(c))return s;if(1===h&&2===m){const e=ol(s,i,g,o,a);if(e)return e}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){let e;switch((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(g)?(e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:i.getDescription()}),e.addSegment(i,!0)):e=i,g){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return Jm(s,e,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline:return $m(s,e,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint:return el(s,e,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return tl(s,e,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:return sl(s,e,d);default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("invalid shape type")}}else if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)switch(g){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon:return nl(s,i,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope:return rl(s,i,d);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint:return il(s,i,d)}const x=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(u);x.inflate(100*d.total());return Ya(s,(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(i,x,0,0,a),o,a)}class Km{getOperatorType(){return 10002}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s,n){return new Qm(e,t,s,n)}execute(e,t,s,n){return this.executeMany(new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([e]),new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([t]),s,n).next()}}class Qm extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(e,t,s,n){super(),this.m_progressTracker=n,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=s;const r=t.next();this.m_geomSubtractor=r||new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a}next(){const e=this.m_inputGeoms.next();return e?((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.y)(e),this.m_index=this.m_inputGeoms.getGeometryID(),Zm(e,this.m_geomSubtractor,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}}function Jm(e,t,s,n){return 0===Xo(t,e,s.total())?e:e.createInstance()}function $m(t,s,n,r){const i=t.getXY(),o=s.querySegmentIterator(),a=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(n),h=a*a;for(;o.nextPath();)for(;o.hasNextSegment();){const s=o.nextSegment(),r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;if(s.queryEnvelope(r),r.inflateCoords(a,a),!r.contains(i))continue;if(s.isIntersectingPoint(i,n.total()))return t.createInstance();let m=s.getStartXY();if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(i,m)<=h)return t.createInstance();if(m=s.getEndXY(),_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(i,m)<=h)return t.createInstance()}return t}function el(e,t,s,n){const r=t.getImpl().getAttributeStreamRef(0),i=t.getPointCount(),o=e.getXY(),a=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(s),h=a*a,m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let l=0;l<i;l++){r.queryPoint2D(2*l,m);if(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(m,o)<=h)return e.createInstance()}return e}function tl(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(i),i.inflate(n.total());const o=t.getXY();return i.contains(o)?t.createInstance():t}function sl(e,t,s,n){const r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(s),i=r*r,o=e.getXY(),a=t.getXY();return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(o,a)<=i?e.createInstance():e}function nl(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(i),i.inflate(n.total());const o=t.getPointCount();let a=!1;const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(o,!1),m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0;e<o;e++){if(t.queryXY(e,m),!i.contains(m))continue;0!==Lo(s,m,n.total())&&(a=!0,h[e]=!0)}if(!a)return t;const l=t.createInstance();for(let e=0;e<o;e++)h[e]||l.addPoints(t,e,e+1);return l}function rl(t,s,n,r){const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(i),i.inflate(n.total());const o=t.getPointCount();let a=!1;const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(o,!1),m=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let e=0;e<o;e++)t.queryXY(e,m),i.contains(m)&&(a=!0,h[e]=!0);if(!a)return t;const l=t.createInstance();for(let e=0;e<o;e++)h[e]||l.addPoints(t,e,e+1);return l}function il(e,t,s,n){const r=e.getImpl().getAttributeStreamRef(0),i=e.getPointCount(),o=t.getXY();let a=!1;const h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(i,!1),m=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(s),l=m*m,g=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let c=0;c<i;c++){r.queryPoint2D(2*c,g);_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.sqrDistance(g,o)<=l&&(a=!0,h[c]=!0)}if(!a)return e;const u=e.createInstance();for(let c=0;c<i;c++)h[c]||u.addPoints(e,c,c+1);return u}function ol(t,s,r,i,o){const a=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E;t.queryEnvelope(a);const h=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(h),a.merge(h);const m=.1*a.width(),l=.1*a.height();a.inflateCoords(m,l);const g=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;g.addEnvelope(a,!1);const u=g.getImpl();if(r===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon){const e=s.getImpl();u.add(e,!0)}else u.addEnvelope(s,!0);return new Ih(g,i,-1,o).tryFastImplementation(t)}class al{getOperatorType(){return 10001}supportsCurves(){return!0}accelerateGeometry(e,t,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,s,n=0){return new gl(e,t,s,n)}execute(e,t,s,n){const r=new _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.S([e,t]),o=new gl(r,s,n,0).next();return o||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("null output"),o}}function hl(){return{geom:null,vertexCount:-1,bUnioned:!1,location:new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P}}function ml(e,t){return _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.compareZorder(e.location,t.location)?-1:e.location.equals(t.location)?0:1}class ll{constructor(){this.binVertexCount=0,this.geometries=[]}addPair(e){this.binVertexCount+=e.vertexCount,this.geometries.push(e)}sort(){this.geometries.sort(((e,t)=>ml(e,t)))}geomCount(){return this.geometries.length}geomPairs(){return this.geometries}clear(){this.binVertexCount=0,this.geometries.length=0}getBinVertexCount(){return this.binVertexCount}}class gl extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(e,t,s,n,r=!1){super(),this.m_index=-1,this.m_currentDim=-1,this.m_bDone=!1,this.m_unionBins=[],this.m_readyGeoms=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.av)(4),this.m_dimGeomCounts=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,0),this.m_addedGeoms=0,this.m_maxDimension=-1,this.m_bHadGeometry=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,!1),this.m_complexUnionGeoms=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.av)(4),this.m_totalNonEmptyGeomCounters=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,0),this.m_progressTracker=s,this.m_bUnionAllDimensions=!!(4&n),this.m_bPreserveAllPathEnds=!!(8&n),this.m_inputGeoms=e,this.m_spatialReference=t,this.m_options=n,this.m_bIs3D=r}next(){if(this.m_bDone&&this.m_currentDim===this.m_maxDimension)return null;for(;!this.step_(););if(-1===this.m_maxDimension)return null;if(this.m_bUnionAllDimensions){if(-1===this.m_currentDim)for(let e=0;e<=this.m_maxDimension;e++)if(this.m_bHadGeometry[e]){this.m_complexUnionGeoms[e]=this.getResultGeometry(e);for(let t=e+1;t<=this.m_maxDimension;t++)this.m_complexUnionGeoms[t]=this.getResultGeometry(t),this.m_bHadGeometry[t]&&!this.m_complexUnionGeoms[t].isEmpty()&&(this.m_bIs3D?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0):this.m_complexUnionGeoms[e]=(new Km).execute(this.m_complexUnionGeoms[e],this.m_complexUnionGeoms[t],this.m_spatialReference,this.m_progressTracker))}for(;this.m_currentDim++,(this.m_currentDim>this.m_maxDimension||this.m_currentDim<0)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),!this.m_bHadGeometry[this.m_currentDim];);if(this.m_index++,0===this.m_currentDim&&this.m_complexUnionGeoms[this.m_currentDim].getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:this.m_complexUnionGeoms[this.m_currentDim].getDescription()});return this.m_complexUnionGeoms[this.m_currentDim].isEmpty()||e.add(this.m_complexUnionGeoms[this.m_currentDim]),e}return this.m_complexUnionGeoms[this.m_currentDim]}return this.m_index=0,this.m_currentDim=this.m_maxDimension,this.getResultGeometry(this.m_maxDimension)}getGeometryID(){return this.m_index}getRank(){return 1}tock(){return this.step_()}getResultGeometry(e){return this.m_readyGeoms[e]}finishDim(e,t,s){let r=t;if(!s)return 16&this.m_options?(r=ja([r],1,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D),r):r;if(1&this.m_options)return r;if(1===e){if(!(8&this.m_options)&&(!!(16&this.m_options)||this.m_totalNonEmptyGeomCounters[e]>1)){r=ja([r],1,this.m_spatialReference,this.m_progressTracker,16|this.m_options,this.m_bIs3D);const e=[0],t=r.getImpl().getIsSimple(0,e);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_bIs3D||(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.i)(t))}else 1===this.m_totalNonEmptyGeomCounters[e]&&(this.m_bIs3D?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0):r=(new Eh).execute(r,this.m_spatialReference,!1,this.m_progressTracker))}else this.m_bIs3D?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0):r=(new Eh).execute(r,this.m_spatialReference,!1,this.m_progressTracker);if(0===e&&r.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:r.getDescription()});r.isEmpty()||e.add(r),r=e}return r}static getLevel(e){const t=4,s=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(e);let n=s>0?(Math.log(s)-Math.log(32))/Math.log(t):0;return n<0&&(n=0),Math.floor(n)}step_(){if(this.m_bDone)return!0;let e;if(this.m_inputGeoms?(e=this.m_inputGeoms.next(),null===e?(this.m_bDone=!0,this.m_inputGeoms=null):(this.checkAndThrow(e),e.isEmpty()||this.m_totalNonEmptyGeomCounters[e.getDimension()]++)):e=null,null!==e){const t=e.getDimension();this.m_bHadGeometry[t]=!0,(t>=this.m_maxDimension||this.m_bUnionAllDimensions)&&(this.addGeom(t,!1,e),t>this.m_maxDimension&&!this.m_bUnionAllDimensions&&this.removeAllBinsWithLowerDimension(t))}if(this.m_addedGeoms>0)for(let t=0;t<=this.m_maxDimension;t++){for(;this.m_dimGeomCounts[t]>1;){const e=this.collectGeometriesToUnion(t);if(null===e)break;{let s;s=1&this.m_options?ja(e,e.length,this.m_spatialReference,this.m_progressTracker,this.m_options,this.m_bIs3D):Za(e,e.length,this.m_spatialReference,this.m_progressTracker,8|this.m_options,this.m_bIs3D),this.addGeom(t,!0,s)}}if(this.m_bDone&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_dimGeomCounts[t]<=1),0!==this.m_dimGeomCounts[t])){const e=this.m_unionBins[t].entries().next().value,s=e[1].geomPairs()[0].geom,n=e[1].geomPairs()[0].bUnioned;this.m_unionBins[t].clear(),this.m_readyGeoms[t]=this.finishDim(t,s,n)}}return this.m_bDone}addGeom(t,s,n){const r=hl();r.geom=n;const i=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.v)(n);r.vertexCount=i;const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();n.queryEnvelope(o),r.location=i>0?o.getCenter():new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(0,0);const a=gl.getLevel(n);if(t+1>this.m_unionBins.length)for(;this.m_unionBins.length<Math.max(2,t+1);)this.m_unionBins.push(new Map);let h=null;const m=this.m_unionBins[t].get(a);m&&(h=m),null===h&&(h=new ll,this.m_unionBins[t].set(a,h)),r.bUnioned=s,h.addPair(r),this.m_dimGeomCounts[t]++,this.m_addedGeoms++,this.m_maxDimension=Math.max(this.m_maxDimension,t)}removeAllBinsWithLowerDimension(e){for(let t=0;t<e;t++)this.m_unionBins[t].clear(),this.m_addedGeoms-=this.m_dimGeomCounts[t],this.m_dimGeomCounts[t]=0}collectGeometriesToUnion(e){if(1&this.m_options&&!this.m_bDone)return null;let t=null;const s=[];for(const n of this.m_unionBins[e].keys())s.push(n);(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.v)(s);for(let n=0;n<s.length;n++){if(-1===s[n])continue;const r=this.m_unionBins[e].get(s[n]);{const i=5e3,o=4,a=r.getBinVertexCount()>i&&r.geomCount()>=o;if(this.m_bDone||a){for(let r=0;r<n;r++){if(-1===s[r])continue;const n=this.m_unionBins[e].get(s[r]);n.sort(),this.m_dimGeomCounts[e]-=n.geomCount(),this.m_addedGeoms-=n.geomCount();for(const e of n.geomPairs())t||(t=new Array),t.push(e.geom);n.clear(),this.m_unionBins[e].delete(s[r]),s[r]=-1}r.sort(),this.m_dimGeomCounts[e]-=r.geomCount(),this.m_addedGeoms-=r.geomCount();for(const e of r.geomPairs())t||(t=new Array),t.push(e.geom);if(r.clear(),this.m_unionBins[e].delete(s[n]),s[n]=-1,!this.m_bDone)break}}}return t}checkAndThrow(e){this.m_bIs3D&&(e.getDimension()>1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.A)(),e.hasAttribute(1)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Geometry must have Zs")),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.c)(e)}}class ul extends Lm{getOperatorType(){return 3}execute(e,t,s,n=null){return kr(e,t,s,4,n)}}function cl(t,s,n){const r=s.getGCSSplitLines();if(null===r)return t;const i=s.getGCS(),o=i.getPannableExtent().width(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryLooseEnvelope(a);const h=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();a.queryIntervalX(h);const m=r.querySegmentIterator();let l=null;const g=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),t=e.queryInterval(0,0),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();s.setCoordsFromEnvelope(t);let n=0;for(;s.vmax>h.vmin;)s.move(-o),n--;for(;s.vmin<=h.vmax;){if(s.isIntersecting(h)){null===l&&(l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P);const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.L({start:e.getStartXY(),end:e.getEndXY()});0!==n&&(g.setShiftCoords(n*o,0),t.applyTransformation(g)),l.addSegment(t,!0)}s.move(o),++n}}if(null!==l){const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.b)(i,l,!0);return Un(t,l,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.e)(e),n)}return t}function _l(e,t,s){let n=e.getName();return sc(n)||(s||t>0?(n=e.toString(bc.PE_STR_NAME_CANON|bc.PE_STR_AUTH_NONE),n=yl(n)):n=e.toString(bc.PE_STR_AUTH_TOP)),n}function dl(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),""}function pl(e,s=-1){if((s>1||s<-1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("verbosity"),-1===s)return e.toString();{const t=0===s?bc.PE_STR_AUTH_TOP:bc.PE_STR_AUTH_ALL;return e.toString(t)}}function fl(e,s){(s>1||s<-1)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("verbosity");let n=bc.PE_STR_FMT_WKT2;return-1!==s&&(n|=0===s?bc.PE_STR_AUTH_TOP:bc.PE_STR_AUTH_ALL),e.toString(n)}function xl(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),""}function yl(e){return e.toLocaleUpperCase("en-US")}function Pl(e,s,r){const i=e.getPCSHorizon();if(i.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)if(i.getGeometryType()!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("");else{const e=i;for(let t=0;t<r;t++)e.contains(s[t])||s[t].setNAN()}else{const t=e.getDefaultPrecisionSR().getTolerance(0),n=i;for(let e=0;e<r;e++)1!==Lo(n,s[e],t)&&s[e].setNAN()}}function El(e,t,s,n){for(let r=0;r<t;r++){if(e[r].y<s.ymin||e[r].y>s.ymax){e[r].setNAN();continue}const t=e[r].x;e[r].x=Gl(t,s,n)}}function Sl(t,s,r,a){if(t.isEmpty()||1===r)return t;const h=t.getGeometryType();if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=t,n=e.getXY();return 0===wl([n],1,s,r)||n.isNAN()?e.setEmpty():e.setXY(n),t}if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint){const e=t,n=t.createInstance(),i=e.getPointCount();n.reserve(i);const o=e.getAttributeStreamRef(0),a=e.getDescription().getAttributeCount()>1,h=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,m=Float64Array.from(o.getArray());if(wl(m,i,s,r)>0)for(let t=0,s=2*i;t<s;t+=2)Number.isNaN(m[t])||(a?(e.getPointByVal(t>>1,h),h.setXYCoords(m[t],m[t+1]),n.add(h)):n.addXY(m[t],m[t+1]));return n}let m=t;const l=s.getOneDegreeGCSUnit(),g=90*l,u=180*l,c=360*l,_=s.getCentralMeridian(),d=.5*l,p=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();m.queryEnvelope(p);const f=s.getGCSHorizon(),x=s.getGCSHorisonIsInclusive(),y=f.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope,P=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();f.queryEnvelope(P);const E=s.getGCS();if(2!==r&&4!==r||(P.xmin=_-u,P.xmax=P.xmin+c),4===r){if(!(p.width()>c-l)){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.setCoords({xmin:p.xmin-l,ymin:P.ymin,xmax:p.xmax+l,ymax:P.ymax}),m=(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(m,t,E,a);let s=Math.floor((_-p.getCenterX())/c);for(p.move(s*c,0);p.xmin>P.xmax;)s-=1,p.move(-c,0);for(;p.xmin<P.xmin;)s+=1,p.move(c,0);if(0!==s){const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(s*c,0),m.applyTransformation(e)}return m}r=2}if(2===r&&(P.xmin=_-u,P.xmax=P.xmin+c),p.ymin<-g||p.ymax>g){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.setCoords({xmin:p.xmin-l,ymin:-g,xmax:p.xmax+l,ymax:g}),m=(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(m,t,E,a),m.isEmpty())return m;m.queryEnvelope(p)}if(x&&(P.ymax<p.ymin||P.ymin>p.ymax))return m.createInstance();p.width()>c&&(m=ql(m,_-u,c,E,!0,0,!0,a),m.queryEnvelope(p));let S=Ul(p.xmin,p.xmax,P.xmin,P.xmax,c);if(0!==S&&p.move(S,0),p.xmax>P.xmax||p.xmin<P.xmin){if(p.xmax>P.xmax)for(;p.xmin>=P.xmax;)p.move(-c,0),S-=c;for(;p.xmin<P.xmax-c;)p.move(c,0),S+=c}const C=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.L)(E,f,!1);if(0!==S){const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(S,0),m.applyTransformation(e),S=0}if(x){if(y&&P.containsEnvelope(p))return m;const e=new Array(2);for(let t=0;t<2;t++){let s;if(y?s=(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(h)?(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(m,P,C,d,a):(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(m,P,C,0,a):(s=(new wh).execute(m,f,E,a),s===f&&(s=s.clone())),P.xmin<=p.xmin&&P.xmax>=p.xmax)return s;if(P.xmin>=p.xmin&&P.xmax<=p.xmax)return s;if(e[t]=s,0===t){p.move(-c,0);const e=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;e.setShiftCoords(-c,0),m.applyTransformation(e)}}return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(h)?e[0].add(e[1],!1):(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("intersect_with_GCS_horizon: unexpected geometry type"),e[0]}{if(P.ymax<p.ymin||P.ymin>p.ymax)return m;let e=0;for(;!m.isEmpty()&&p.xmax>P.xmin;){if(0!==e){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;t.setShiftCoords(e,0),m.applyTransformation(t)}if(!(new ul).execute(m,f,E,a)){m=(new Km).execute(m,f,E,a),f===m&&(m=m.clone())}if(0!==e){const t=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;t.setShiftCoords(-e,0),m.applyTransformation(t)}e-=c,p.move(-c,0)}return m}}function Cl(e,t,s,n,r,i){const o={stack:[],error:void 0,hasError:!1};try{if(2===i){return Gs(e,t,s,n,r)}if(Math.abs(s.x-n.x)>=Math.PI||!Fg(s.x,n.x,r))return Number.NaN;s.x>n.x&&(n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(s,s=n));const a=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(o,new Cc,!1),h=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(o,new Cc,!1),m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(o,new Cc,!1),l=s.clone();Dc.geodeticDistance(e,t,s.x,s.y,n.x,n.y,h,a,null,i);const g=h.val;let u=0,c=1;for(;g*(c-u)>1e-12*e;){const o=.5*(u+c);if(Dc.geodeticCoordinate(e,t,s.x,s.y,g*o,a.val,h,m,i),l.x=h.val,l.y=m.val,l.x===r)return l.y;if(Fg(s.x,l.x,r))c=o;else{if(!Fg(n.x,l.x,r))return Number.NaN;u=o}}return l.y}catch(a){o.error=a,o.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(o)}}function Il(e,t){let s;if(Array.isArray(e)){const n=e;s=new Float64Array(2*t);for(let e=0,r=0;e<t;e++,r+=2)s[r]=n[e].x,s[r+1]=n[e].y}else s=e;return s}function bl(e,t,s,n){for(let r=0,i=0;r<n;r++,i+=2)t[s+r].x=e[i],t[s+r].y=e[i+1]}function wl(t,s,r,i){if(0===s||1===i)return s;const o=Il(t,s);if(2===i){const e=r.getPannableExtentInGCS();let n=s;for(let t=0,r=2*s;t<r;t+=2)(o[t+1]>e.ymax||o[t+1]<e.ymin)&&(o[t]=Number.NaN,n--);return n?(Bl(o,s,e.xmin,e.width(),!0),t!==o&&bl(o,t,0,s),n):0}const a=r.getOneDegreeGCSUnit(),h=90*a,m=180*a,l=360*a;let g=s;for(let e=0,n=2*s;e<n;e+=2)(o[e+1]>h||o[e+1]<-h)&&(o[e]=Number.NaN,g--);if(!g)return 0;const u=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();u.setFromPoints(o,s);const c=r.getGCSHorizon(),_=r.getGCSHorisonIsInclusive(),d=c.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope,p=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(c.queryEnvelope(p),_&&(p.ymax<u.ymin||p.ymin>u.ymax))return 0;if(_){if(Bl(o,s,p.getCenterX()-m,l,!0),g=s,d)for(let e=0,t=2*s;e<t;e+=2)p.containsCoords(o[e],o[e+1])||(o[e]=Number.NaN,g--);else{const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.L)(r.getGCS(),c,!1),t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let n=0,r=2*s;n<r;n+=2){t.setCoords(o[n],o[n+1]);0!==Lo(c,t,e)||(o[n]=Number.NaN,g--)}}}else{Bl(o,s,-m,l,!0),g=s;const e=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.L)(r.getGCS(),c,!1),t=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let n=0,r=2*s;n<r;n+=2){t.setCoords(o[n],o[n+1]),t.isNAN()&&g--;const s=Ml(t.x,p.xmin,p.xmax,l);t.x+=s;0!==Lo(c,t,e)&&(o[n]=Number.NaN,g--)}}return g>0&&Array.isArray(t)&&bl(o,t,0,s),g}function vl(e,s,n,r,i,o){if(s.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("fold_into_360_degree_range"),e.isEmpty())return e;let a,h;if(2===s.getCoordinateSystemType()){const e=s.getPannableExtent();h=e.xmin,a=e.width()}else{const e=s.getOneDegreeGCSUnit();a=360*e,h=n-180*e}return ql(e,h,a,s,r,i,!0,o)}function Nl(e,t,s,n){let r,i;if(2===s.getCoordinateSystemType()){const e=s.getPannableExtent();r=e.xmin,i=e.width()}else{const e=s.getOneDegreeGCSUnit();i=360*e,r=n-180*e}Bl(e,t,r,i)}function Tl(e,t){const s=t.width();let n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.l)(e-t.vmin,s);n<0&&(n+=s);return t.snapClip(n+t.vmin)}function Gl(e,t,s){return e>t.xmax&&e-t.xmax<s?t.xmax:e<t.xmin&&t.xmin-e<s?t.xmin:e}function Dl(e,t,s){if(e[0]<t.vmin||e[0]>t.vmax||s&&e[0]===t.vmax){const s=t.width();return e[0]+=Math.ceil((t.vmin-e[0])/s)*s,e[0]=t.snapClip(e[0]),!0}return!1}function Vl(e,t,s,n,r,i,o,a,h){return new Dm(e,null,s,t,n,r,o,a,i).geoNormalizePolygonGeometry(h)}function Fl(e,t,s,n,r,i,o,a,h){return new Dm(e,null,s,t,n,r,o,a,i).geoNormalizePolylineGeometry(h)}function Hl(e,t,s,n,r){const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.E,o=i.addGeometry(e);return kl(i,o,t,(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.L)(t,e,!1),s,n,r),i.getGeometry(o)}function kl(e,t,s,n,r,i,o){const h={stack:[],error:void 0,hasError:!1};try{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Uu()),s.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("insert_geodetic_points");const m=s.getPannableExtent(),l=s.getGCS(),g=Hu();l.querySpheroidData(g);const u=l.getUnit().getUnitToBaseFactor(),_=g.majorSemiAxis,d=g.e2;let p=0;const f=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;m.queryIntervalX(f);let x=null;const y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(4,Number.NaN);2===s.getCoordinateSystemType()?(x=s.getPECoordSys(),i?(y[0]=Tl(o,f),y[1]=m.getCenterY(),wc.projToGeog(x,1,y),p=y[0]*u):(y[0]=m.getCenterX(),y[1]=o,wc.projToGeog(x,1,y),p=y[1]*u)):p=o*u,i||0===p||2===r||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("insert_geodetic_points: 1");const P=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(h,new Cc,!1),E=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,S=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,C=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,I=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,b=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,w=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let a=e.getFirstPath(t);a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=e.getNextPath(a)){const t=e.getFirstVertex(a);e.queryXY(t,C);let h=!1;const m=e.getNextVertex(t);for(let a=m;a!==_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.n;a=e.getNextVertex(a)){if(a===m){if(h)break;h=!0}if(e.queryXY(a,I),i&&(n<o-C.x&&I.x-o>n||n<o-I.x&&C.x-o>n)||!i&&(0!==o||n<-C.y&&I.y>n||n<-I.y&&C.y>n))do{if(Math.abs(C.x-I.x)>=.5*f.width())break;2===s.getCoordinateSystemType()?(y[0]=Tl(C.x,f),y[1]=C.y,y[2]=Tl(I.x,f),y[3]=I.y,ag(x,2,y,0),b.x=y[0]*u,b.y=y[1]*u,w.y=y[3]*u):(b.x=C.x*u,b.y=C.y*u,w.y=I.y*u),w.x=(I.x-C.x)*Math.PI*2/f.width()+b.x;let t=0;const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,2);if(i){if(S.x=p,S.y=Cl(_,d,b,w,p,r),Number.isNaN(S.y))break;n[0]=S,t=1}else if(2===r){const e=[0,0];if(t=Ds(_,d,b,w,p,e),!t)break;n[0].x=e[0],n[0].y=p,2===t&&(n[1].x=e[1],n[1].y=p)}else{if(S.x=Hg(_,d,b,w,r),Number.isNaN(S.x))break;S.y=0,n[0]=S,t=1}let h=-1;for(let m=0;m<t;m++){Dc.geodeticDistance(_,d,b.x,b.y,w.x,w.y,P,null,null,r);const t=P.val;Dc.geodeticDistance(_,d,b.x,b.y,n[m].x,n[m].y,P,null,null,r);const l=P.val;2===s.getCoordinateSystemType()?(y[0]=n[m].x/u,y[1]=n[m].y/u,wc.geogToProj(x,1,y),i?(E.y=y[1],E.x=o):(E.x=kg(y[0],C.x,I.x,f),E.y=o)):i?(E.x=o,E.y=n[m].y/u):(E.x=kg(n[m].x/u,C.x,I.x,f),E.y=o);const g=t>0?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.s)(l/t,0,1):.5;if(0===g||1===g)continue;if(h>g)continue;const c=e.getPrevVertex(a);e.splitSegment(c,[g],1);const p=e.getNextVertex(c);e.setXYCoords(p,E.x,E.y),h=g}}while(0);C.setCoordsPoint2D(I)}}}catch(m){h.error=m,h.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(h)}}function Al(t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(s.isPannable());const r=s.getPannableExtent();if(t.getGeometryType()===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=t.getY();return r.ymin<=e&&e<=r.ymax?t:t.createInstance()}const i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(i);const o=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();o.setCoords({env2D:r}),o.xmin=i.xmin,o.xmax=i.xmax,o.inflateCoords(.01*o.height(),0);const h=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(s,i,!1);let m;return m=o.containsEnvelope(i)?t:(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,o,h,0,null),m}function Ml(e,t,s,n){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)((.5*(s+t)-e)/n)*n}function Ul(e,t,s,n,r){if(e>=s&&t<=n)return 0;return Ml(.5*(t+e),s,n,r)}function ql(t,s,r,i,o,a,h,m){const l=t.getGeometryType(),g=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();g.setCoords(s,s+r);const u=[0];if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=t;if(u[0]=e.getX(),Dl(u,g,h)){const e=o?t:t.clone();return e.setX(u[0]),e}return t}const c=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(t.queryEnvelope(c),c.isEmpty())return t;if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint){const e=o?t:t.clone(),s=e.getImpl(),n=s.getAttributeStreamRef(0),r=2*s.getPointCount();let i=!1;for(let t=0;t<r;t+=2)u[0]=n.read(t),Dl(u,g,h)&&(n.write(t,u[0]),i=!0);return i&&s.notifyModifiedFlags(2001),e}const _=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E.constructEmpty();if(c.queryIntervalX(_),g.contains(_))return g.vmax,_.vmax,t;const d=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();if(d.setCoords({env2D:c}),0===_.width()){let e=_.vmin;e+=Math.ceil((g.vmin-e)/r)*r,e=g.snapClip(e);const s=o?t:t.clone();return s.setAttributeBasic(0,0,e),s}if(l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const e=o?t:t.clone();return c.intersect(d),e.setEnvelope(c),e}const p=.1*Math.max(c.height(),c.width())*1;d.inflateCoords(0,p);let f=t;const x=i.getTolerance(0),y=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;for(;;){const e=Math.floor((_.vmin-s)/r),t=Math.ceil((_.vmax-s)/r);if(!(t-e>3))break;{const o=Math.floor(.5*(t+e));d.xmin=c.xmin-p,d.xmax=s+r*o;const h=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(f,d,x,a,m);d.xmin=d.xmax,d.xmax=c.xmax+p;const g=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(f,d,x,a,m);y.setShiftCoords((o-t)*r,0),g.applyTransformation(y),l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?f=(new al).execute(h,g,i,m):(f=h,f.add(g,!1)),f.queryEnvelope(c),c.queryIntervalX(_)}}d.xmin=s,d.xmax=s+r;const P=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();P.setCoords({env2D:d}),P.inflateCoords(x,0);const E=Math.floor((c.xmin-d.xmin)/r)*r;let S;E?(d.move(E,0),y.setShiftCoords(-E,0)):y.setIdentity(),S=l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P({vd:f.getDescription()}):new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({vd:f.getDescription()});const C=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),b=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();for(;c.xmax>d.xmin;){const e=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(f,d,x,0,m);e.queryEnvelope(b);let t=!1;t=l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline?!e.isEmpty()&&(b.width()>x||b.height()>x):!e.isEmpty()&&(l!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon||b.width()>x),t&&(e.applyTransformation(y),e.queryEnvelope(b),S.queryEnvelope(C),C.inflateCoords(x,x),C.isIntersecting(b)&&l===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon?S=(new al).execute(S,e,i,m):S.add(e,!1)),d.move(r,0),y.shiftCoords(-r,0)}return S}function Bl(e,t,s,n,r=!0){const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;i.setCoords(s,s+n);const o=[0];if(Array.isArray(e)){const s=e;for(let e=0;e<t;e++)i.containsRightExclusive(s[e].x)||(o[0]=s[e].x,Dl(o,i,r),s[e].x=o[0])}else{const s=e;for(let e=0;e<t;e++){const t=e<<1;i.containsRightExclusive(s[t])||(o[0]=s[t],Dl(o,i,r),s[t]=o[0])}}}function Ol(t,s,r,h=!0){if(t.isEmpty())return;const m=t.getGeometryType();if(!h||m!==_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon)if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(m)){let e=!1;if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(m)&&t.hasNonLinearSegments()){const n=t.getImpl(),i=n.getAttributeStreamRef(0),o=n.getSegmentFlagsStreamRef();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==o);for(let t=0,a=n.getPathCount();t<a;t++){let a=!0;const h=n.isClosedPath(t),m=n.getPathEnd(t);if(h&&n.getPathSize(t)>0){a=1===(31&o.read(m-1))}for(let l=n.getPathStart(t);l<m;l++){if(1===(31&o.read(l))){if(a){const t=i.read(2*l),n=Gl(t,s,r);n!==t&&(e=!0,i.write(2*l,n))}a=!0}else a=!1}}}else{const n=t.getImpl(),i=n.getAttributeStreamRef(0);for(let t=0,o=n.getPointCount();t<o;t++){const n=i.read(2*t),o=Gl(n,s,r);o!==n&&(e=!0,i.write(2*t,o))}}e&&t.getImpl().notifyModifiedFlags(2001)}else if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=t,i=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();n.queryEnvelope(i),i.xmin=Gl(i.xmin,s,r),i.xmax=Gl(i.xmax,s,r),n.setEnvelope(i)}else if(m===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint){const e=t;e.setX(Gl(e.getX(),s,r))}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}function Yl(e,t,s){const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;return n.x=Gl(e.x,t,s),n.y=e.y,n}function Rl(t,s){if(s.isEmpty())return 0;const n=t.getPECoordSys();if(n.getProjection().getCode()===bc.PE_PRJ_AZIMUTHAL_EQUIDISTANT){const r=Hu();t.querySpheroidData(r);const i=n.getParameters();if(null===i[bc.PE_PARM_LAM0])return 0;if(null===i[bc.PE_PARM_PHI0])return 0;const o=[i[bc.PE_PARM_LAM0].getValue(),i[bc.PE_PARM_PHI0].getValue()];wc.geogToProj(n,1,o);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(o[0],o[1]),h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();s.queryEnvelope(h);const m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,4);h.queryCorners(m);let l=0;const g=t.getOneMeter();let u=Math.max(r.majorSemiAxis,r.minorSemiAxis)*Math.PI,c=Math.min(r.majorSemiAxis,r.minorSemiAxis)*Math.PI;c-=u/180,u*=g,c*=g;for(let e=0;e<4;e++){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.distance(m[e],a);if(t>u)l++;else if(t>c)return-1}if(0===l)return 1;if(4===l){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();return t.setCoords({center:a,width:u,height:u}),h.isIntersectingNe(t)?-1:0}return-1}return-1}function Xl(t,s,r,i){const o=t.getGeometryType();(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon||o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolyline||o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint);const h=s.getCoordinateSystemType();if(2===h){let a=t;if(0===r){const r=Rl(s,t);if(0===r)return t.createInstance();if(1===r)return t;const o=s.getPCSHorizon(),h=o.getGeometryType(),m=s.getDefaultPrecisionSR();if(h===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope){const n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();o.queryEnvelope(n);const r=(0,_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.a)(m,n,!1);a=(0,_OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.c)(t,n,r,5e4*s.getOneMeterPCSUnit(),i)}else(new jm).execute(o,t,m,i)||(a=(new wh).execute(a,o,m,i),a===o&&(a=a.clone()))}else if(s.isPannable()){const t=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();a.queryEnvelope(t);const h=s.getPannableExtent();h.containsEnvelope(t)||(Ol(a,h,s.getTolerance(0)),2!==r&&4!==r||(a=Al(a,s)),4!==r?a=vl(a,s,0,!0,1e5*s.getOneMeterPCSUnit(),i):o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&t.width()>2*h.width()&&(a=ql(a,-2*h.width(),2*h.width(),s,!0,0,!0,i)))}return a}if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(1===h),o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumMultiPoint)return Ol(t,s.getPannableExtent(),s.getTolerance(0)),t;{const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();t.queryEnvelope(r);let a=t;const h=s.getPannableExtent();if(r.ymin<h.ymin||r.ymax>h.ymax){const t=Math.max(1,r.calculateToleranceFromEnvelope()),n=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(r.xmin-t,h.ymin,r.xmax+t,h.ymax);if(a=(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(a,n,s,i),a.isEmpty())return a}return o===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPolygon&&r.width()>2*h.width()&&(a=ql(a,-2*h.width(),2*h.width(),s,!0,0,!0,i)),a}}function Ll(e,t,s,n,r,i){const o=n.getCoordinateSystemType();if(2===o){if(0===r)s!==e&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aw)(s,e,t),Pl(n,s,t);else if(s!==e&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aw)(s,e,t),n.isPannable()){const e=n.getTolerance(0);El(s,t,n.getPannableExtent(),e),Nl(s,t,n,0)}}else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(1===o);const r=n.getTolerance(0),i=n.getPannableExtent();for(let n=0;n<t;n++)s[n].assign(Yl(e[n],i,r))}}function zl(e,t){const s=t.getPointCount();if(!s)return;const n=t.getImpl(),r=n.getAttributeStreamRef(0),i=e;wc.geogToProj(i,s,r.getArray()),n.notifyModifiedFlags(2001)}function Wl(e,t,s,n){if(!s)return;const r=e.getPECoordSys();if(1===s){const s=[t[0].x,t[0].y];if(wc.geogToProj(r,1,s),n){const{first:n,second:r}=e.m_peCoordSysVal.getGeogToProjFactors();s[0]=n*(t[0].x-e.getCentralMeridian())+r}return void t[0].setCoords(s[0],s[1])}const i=e.isPannable(),o=i?e.getPannableExtent().width():0,a=179*o/360;let h=0;i&&(h=e.getCentralMeridian());const m=256,l=new Float64Array(2*m);for(let g=0;g<s;){for(let e=g;e<s&&t[e].isNAN();++e)g++;let u=Math.min(m,s-g);if(u>0){for(let e=1,s=g+1;e<u;++e,++s)if(t[s].isNAN()){u=e;break}for(let e=0;e<u;++e){const s=e<<1;l[s]=t[g+e].x,l[s+1]=t[g+e].y}if(wc.geogToProj(r,u,l),n){const{first:s,second:n}=e.m_peCoordSysVal.getGeogToProjFactors();for(let e=0;e<u;++e){l[e<<1]=s*(t[g+e].x-h)+n}}if(i)for(let e=0,s=g;e<u;e++,s++){const n=e<<1,r=l[n],i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(r),m=t[s].x-h;i*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(m)<0&&Math.abs(r)>a&&(l[n]-=i*o)}bl(l,t,g,u),g+=u}}}function jl(e,t,s,n){const r=e.getSRToGCSTransform();return(new qh).transform(r,t,s,n,!1)}function Zl(t,s,n,r){const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.M({vd:s.getDescription()});let o;i.addPoints(s,0,-1),o=(new qh).execute(i,t,r);const a=s.getPointCount();if(n.setEmpty(),t.getInputSR().isPannable()){if(a!==o.getPointCount())return!1;const r=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;s.queryEnvelope(r);const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;o.queryEnvelope(i);const h=r.width(),m=i.width();if(0!==h&&0!==m){const e=m/h,s=t.getOutputSR().getPannableExtent().width()/t.getInputSR().getPannableExtent().width();if(Math.abs(e/s-1)>1e-10)return!1}else if(0!==h||0!==m)return!1;n.add(s,!1);for(let e=0;e<a;e++){const t=o.getXY(e);n.setXY(e,t)}return!0}return!1}function Kl(e,t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!s||e.isPannable());const n=t.getPointCount();if(!n)return;const r=t.getImpl(),i=r.getAttributeStreamRef(0),o=e.getPECoordSys();let h=0;const m=i.readRange(0,2*n);let l=()=>{wc.geogToProj(o,n,m)};const g=e.isPannable()&&!s,u=g?e.getPannableExtent().width():0,c=179*u/360;if(e.isPannable()&&(h=e.getCentralMeridian(),s)){const t=e.m_peCoordSysVal.getGeogToProjFactors(),s=t.first,r=t.second;l=()=>{wc.geogToProj(o,n,m);for(let e=0;e<n;e++){const t=e<<1,n=i.read(t),o=s*(n-h)+r;m[t]=o}}}if(l(),g)for(let a=0;a<n;a++){const e=a<<1,t=m[e],s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(t),n=i.read(e)-h;s*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(n)<0&&Math.abs(t)>c&&(m[e]+=-s*u)}i.writeRangeFromArray(0,2*n,m,!0,1),r.notifyModifiedFlags(2001)}function Ql(e,t,s){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine:return void Ig(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier:return void Gg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:return void wg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier2:return void Dg();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:return void Vg();default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}}function Jl(e,t,s){if(!t.hasNonLinearSegments())return void Kl(e,t,s);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!s||e.isPannable()),t.isEmpty())return;const n=0,r=e.getPECoordSys(),i=e.isPannable(),o=i?e.getPannableExtent().width():0,h=179*o/360;let m=0;i&&(m=e.getCentralMeridian());const l=t.createInstance();l.reserveParts(t.getPointCount(),t.getPathCount());const g=t.getImpl(),u=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let a=0,c=t.getPathCount();a<c;++a)if(g.hasNonLinearSegmentsPath(a)){let t=!0,n=-1;const r=g.getPathStart(a),i=r+g.getSegmentCountPath(a);g.isClosedPath(a)&&(n=i-1);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let a=r;a<i;++a){if(g.getSegmentBuffer(a,u,!1),Ql(e,u.get(),s),!t){u.get().getStartXY().equals(o)||u.get().moveTo(o)}if(a!==n)l.addSegment(u.get(),t);else{if(t){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;u.get().queryStart(e),l.startPathPoint(e)}l.closeLastPathWithSegment(u.get())}o.assign(u.get().getEndXY()),t=!1}}else{const e=1024;let s,u=g.getPathSize(a),c=Math.min(u,e);l.insertPath(-1,t,a,!0);const _=g.getAttributeStreamRef(0),d=l.getAttributeStreamRef(0);for(let t=g.getPathStart(a),l=g.getPathEnd(a);t<l;){if(s=_.readRange(t,c),wc.geogToProj(r,c,s),i)for(let e=0;e<c;e++){const t=e<<1,r=s[t],i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(r),a=_.read(2*(n+e))-m;i*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(a)<0&&Math.abs(r)>h&&(s[t]+=-i*o)}d.writeRangeFromArray(t,c,s,!0,1),t+=c,u-=c,c=Math.min(u,e)}}t.assignMove(l)}function $l(e,t,s){const n=1e3;let r=s.getPointCount();if(!r)return;const i=s.getImpl(),o=i.getAttributeStreamRef(0);let a=Math.min(r,n),h=0;const m=e.getPECoordSys();Number.isNaN(t)&&(t=0);const l=e.isPannable(),g=e.getOneDegreeGCSUnit(),u=360*g,c=179*g;let _;for(;r;){if(_=o.readRange(2*h,2*a),ag(m,a,_,t),l)for(let e=0;e<a;e++){const s=e<<1,n=_[s]-t,r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(n),i=o.read(2*(h+e));r*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(i)<0&&Math.abs(n)>c&&(_[s]+=-r*u)}o.writeRangeFromArray(2*h,2*a,_,!0,1),h+=a,r-=a,a=Math.min(r,n)}i.notifyModifiedFlags(2001)}function eg(e,t,s){switch(s.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine:return void tg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier:return void rg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:return void sg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier2:return void ig();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:return void og();default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}}function tg(e,t,s){const n=[s.getStartXY(),s.getEndXY()];mg(e,t,n,2),s.setStartXY(n[0]),s.setEndXY(n[1]),s.normalizeAfterEndpointChange()}function sg(e,t,s){if(0===s.projectionBehavior())ng(e,t,s);else{const n=s.isClosed()&&s.isMajor(),r=[s.getStartXY(),n?s.getCenter():s.getEndXY()],i=[r[0].clone(),r[1].clone()];vg(e,t,i,2);const o=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;o.initializeFromTwoPointsArray(r,i),s.applyTransformation(o);const a=n?0:1;s.setCoordsForIntersector(i[0],i[a],!1)}}function ng(e,t,s){Ng(!1,e,t,s,!1)}function rg(e,t,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,4);s.queryControlPoints(n),vg(e,t,n,4),s.setControlPoints(n)}function ig(e,t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function og(e,t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function ag(e,t,s,n){const r=wc.projToGeogCenter(e,t,s,n);for(let i=0;i<t;++i){const e=i<<1;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Number.isFinite(s[e]+s[e+1]))}return r}function hg(e,t,s){if(!s.hasNonLinearSegments())return void $l(e,t,s);if(s.isEmpty())return;const n=e.getPECoordSys();Number.isNaN(t)&&(t=0);const r=e.isPannable(),i=e.getOneDegreeGCSUnit(),o=360*i,a=179*i,h=s.createInstance();h.reserveParts(s.getPointCount(),s.getPathCount());const m=s.getImpl(),l=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let g=0,u=s.getPathCount();g<u;++g)if(m.hasNonLinearSegmentsPath(g)){let s=!0,n=-1;const r=m.getPathStart(g),i=r+m.getSegmentCountPath(g);m.isClosedPath(g)&&(n=i-1);const o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let a=r;a<i;++a){if(m.getSegmentBuffer(a,l,!1),eg(e,t,l.get()),!s){l.get().getStartXY().equals(o)||l.get().moveTo(o)}if(a!==n)h.addSegment(l.get(),s);else{if(s){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;l.get().queryStart(e),h.startPathPoint(e)}h.closeLastPathWithSegment(l.get())}o.assign(l.get().getEndXY()),s=!1}}else{const e=1e3;let i,l=m.getPathSize(g),u=Math.min(l,e);h.insertPath(-1,s,g,!0);const c=m.getAttributeStreamRef(0),_=h.getAttributeStreamRef(0);for(let s=m.getPathStart(g),h=m.getPathEnd(g);s<h;){if(i=c.readRange(2*s,2*u),ag(n,u,i,t),r)for(let e=0;e<u;e++){const n=e<<1,r=i[n]-t,h=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(r),m=c.read(2*s);h*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(m)<0&&Math.abs(r)>a&&(i[n]+=-h*o)}_.writeRangeFromArray(2*s,2*u,i,!0,1),s+=u,l-=u,u=Math.min(l,e)}}s.assignMove(h)}function mg(e,t,s,n){const r=e.getPECoordSys();Number.isNaN(t)&&(t=0);const i=e.isPannable(),o=e.getOneDegreeGCSUnit(),a=360*o,h=179*o,m=256,l=new Float64Array(2*m);for(let g=0;g<n;){for(let t=g;t<n&&s[t].isNAN();++t)g++;let e=Math.min(m,n-g);if(e>0){for(let t=1,n=g+1;t<e;++t,++n)if(s[n].isNAN()){e=t;break}for(let t=0;t<e;t++){const e=t<<1;l[e]=s[g+t].x,l[e+1]=s[g+t].y}if(ag(r,e,l,t),i)for(let n=0,r=g;n<e;++n,++r){const e=n<<1,i=s[r].x,o=l[e]-t,m=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(o);m*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.e)(i)<0&&Math.abs(o)>h&&(l[e]-=m*a)}for(let t=0;t<e;t++){const e=t<<1;s[g+t].x=l[e],s[g+t].y=l[e+1]}g+=e}}}function lg(e,t,s,n){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function gg(e,t,s){let n=t.getPointCount();if(!n)return!1;const r=t.getImpl(),i=r.getAttributeStreamRef(0);let o=null;const a=e.getInputSR(),h=e.getOutputSR();a.getVCS(),h.getVCS();const m=a.getOneDegreeGCSUnit(),l=h.getOneDegreeGCSUnit(),g=e.isVertical();g&&t.hasAttribute(1)&&(o=r.getAttributeStreamRef(1));const u=e.getDatumTransformation(),c=!!u&&1===u.getType();if(c||null===o||(lg(o.getArray()),o=null),!u||0===u.count()){const e=a.getGcsUnitFactor()/h.getGcsUnitFactor(),t=(a.getPrimeMeridian()-h.getPrimeMeridian())*l,s=-90*m,o=90*m;let g=0;const u=i.getArray(),c=[0];for(let r=1,i=2*n;r<i;)c[0]=u[r],g|=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aD)(c,s,o)?1:0,u[r]=c[0],r+=2;if(0!==t||1!==e){g=1;const s=i.getArray();for(let r=0,i=2*n;r<i;){let n=s[r];n*=e,n+=t,s[r]=n,s[r+1]*=e,r+=2}}return 0!==g&&r.notifyModifiedFlags(2001),!!g}const _=1e3;let d=Math.min(n,_);const p=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(d,Number.NaN),f=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(d,Number.NaN);let x=null;null!==o&&(x=new Float64Array(d));let y=0,P=Number.NaN,E=Number.NaN;const S=360*l,C=l/m;s&&(E=90*l,P=89.9*m,f.fill(0));let I=!0,b=0;for(;n;){let e=!1;const t=i.readRange(2*y,2*d);for(let s=0;s<d;s++)p[s]=t[s<<1];if(s)for(let s=0;s<d;s++){const n=1+(s<<1),r=Math.abs(t[n])-P;if(r>0){const i=t[n];t[n]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(P,i),f[s]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(r,i),e=!0}}const r=t[0];if(c){const e=u;x&&o.queryRange(y,d,x,!0,1),e.transform(!1,t,x,d),x&&o.writeRangeFromArray(y,d,x,!0,1)}else{u.transform(!1,t,d)}I&&(b=t[0]-C*r,I=!1);for(let s=0;s<d;s++){const e=s<<1,n=t[e]-p[s]*C-b;Math.abs(n)>200&&(t[e]+=n>0?-S:S)}if(e){for(let e=0;e<d;e++)if(f[e]){const s=1+(e<<1);t[s]+=C*f[e],t[s]>E?t[s]=E:t[s]<-E&&(t[s]=-E)}f.fill(0)}i.writeRangeFromArray(2*y,2*d,t,!0,1),g&&o&&o.writeRangeFromArray(y,d,x,!0,1),y+=d,n-=d,d=Math.min(n,_)}return r.notifyModifiedFlags(2001),!0}function ug(e,t,s){switch(t.getGeometryType()){case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumLine:return xg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier:return Eg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEllipticArc:return yg(e,t,s);case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumBezier2:return Sg();case _Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumRationalBezier2:return Cg();default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}}function cg(e,t,s){if(!t.hasNonLinearSegments())return gg(e,t,s);if(t.isEmpty())return!1;const n=t.createInstance();n.reserveParts(t.getPointCount(),t.getPathCount());const r=t.getImpl(),i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;for(let o=0,a=t.getPathCount();o<a;++o){let t=!0,a=-1;const h=r.getPathStart(o),m=h+r.getSegmentCountPath(o);r.isClosedPath(o)&&(a=m-1);const l=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;for(let o=h;o<m;++o){if(r.getSegmentBuffer(o,i,!1),ug(e,i.get(),s),!t){i.get().getStartXY().equals(l)||i.get().moveTo(l)}if(o!==a)n.addSegment(i.get(),t);else{if(t){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;i.get().queryStart(e),n.startPathPoint(e)}n.closeLastPathWithSegment(i.get())}l.assign(i.get().getEndXY()),t=!1}}return t.assignMove(n),!0}function _g(e,t,s,n,r,i){if(e.isIdentityGeogToGeog()){const s=90*e.getInputSR().getOneDegreeGCSUnit();let r=0;const i=[0];for(let e=0;e<n;e++)i[0]=t[e].y,r|=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aD)(i,-s,s)?1:0,t[e].y=i[0];return r}const o=e.getInputSR(),a=e.getOutputSR(),h=o.getVCS(),m=a.getVCS(),l=o.getOneDegreeGCSUnit(),g=90*l,u=a.getOneDegreeGCSUnit(),c=e.isVertical(),_=e.getDatumTransformation(),d=!!_&&1===_.getType();if(c||(s=null),!_||0===_.count()){let e=0;const r=[0];for(let s=0;s<n;s++)r[0]=t[s].y,e|=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aD)(r,-g,g)?1:0,t[s].y=r[0];return e|=qm(o.getGCS(),h,a.getGCS(),m,t,s,n)?1:0,e}d||null===s||lg();const p=1024;let f=Math.min(n,p);const x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(f,Number.NaN),y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(f,Number.NaN);let P=0,E=Number.NaN,S=Number.NaN;const C=360*u,I=u/l;r&&(S=90*u,E=89.9*l);let b=!0,w=0,v=n;for(;v;){let e=!1;for(let s=0;s<f;s++)x[s]=t[s+P].x;if(r)for(let s=0;s<f;s++){const n=Math.abs(t[s+P].y)-E;if(n>0){const r=t[s+P].y;t[s+P].y=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(E,r),y[s]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.f)(n,r),e=!0}}const n=t[0].x;if(d){_.transform(!1,t,s,f)}else{_.transform(!1,t,f)}b&&(w=t[0].x-I*n,b=!1);for(let s=0;s<f;s++){const e=t[P+s].x-x[s]*I-w;Math.abs(e)>200&&(e>0?t[P+s].x-=C:t[P+s].x+=C)}if(e){for(let e=0;e<f;e++)y[e]&&(t[P+e].y+=I*y[e],t[P+e].y>S?t[P+e].y=S:t[P+e].y<-S&&(t[P+e].y=-S));y.fill(0,0,f)}P+=f,v-=f,f=Math.min(v,p)}return 1}function dg(e,t,s,n,r){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}function pg(e,t,s,n,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null===n),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t<2147483647);const i=Array.isArray(s);let o;o=i?(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aG)(s):s;const h=vc.geogToGeog(e,t,o,null,r);return i&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aH)(o,s),h}function fg(e,t,s,n,r,i){let o=0,a=!0,h=0;for(let m=0;m<n;++m)t[m].isNAN()?a||(o|=_g(e,t.slice(h,m-h),s?s.slice(h,m-h):null,m-h,r),h=m,a=!0):a&&(h=m,a=!1);return a||(o|=_g(e,0===h?t:t.slice(h),s?0===h?s:s.slice(h):null,n-h,r)),0!==o}function xg(e,t,s){const n=[t.getStartXY(),t.getEndXY()],r=[0,0];let i=null;t.hasAttribute(1)&&(i=r,i[0]=t.getAttributeAsDbl(0,1,0),i[1]=t.getAttributeAsDbl(1,1,0));const o=fg(e,n,i,2,s);return t.setStartXY(n[0]),t.setEndXY(n[1]),i&&(t.setStartAttribute(1,0,i[0]),t.setEndAttribute(1,0,i[1])),t.normalizeAfterEndpointChange(),o}function yg(e,t,s){if(0===t.projectionBehavior())return Pg(e,t,s);const n=t.getStartXY().equals(t.getEndXY()),r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,3),i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,3),o=[0,0,0];let a=null;r[0].assign(t.getStartXY()),r[1].assign(n?t.getCenter():t.getEndXY());let h=!1;t.hasAttribute(1)&&(a=o,a[0]=t.getAttributeAsDbl(0,1,0),a[1]=t.getAttributeAsDbl(1,1,0),a[2]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(a[0],a[1],.5),n&&(a[1]=a[2])),i[0].setCoordsPoint2D(r[0]),i[1].setCoordsPoint2D(r[1]);const m=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;if(n||t.isDegenerateToLine())h=fg(e,i,a,2,s),m.initializeFromTwoPoints(r[0],r[1],i[0],i[1]);else{const n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;t.queryCoord2D(.5,n),r[2].setCoordsPoint2D(n),i[2].setCoordsPoint2D(n),h=fg(e,i,a,3,s),m.setFromTwoTriangles(r,i)}return m.isIdentity()||(t.applyTransformation(m),t.setStartXY(i[0]),t.setEndXY(n?i[0]:i[1]),t.normalizeAfterEndpointChange()),a&&(t.setStartAttribute(1,0,a[0]),t.setEndAttribute(1,0,n?a[0]:a[1])),h}function Pg(e,t,s){const n=[t.getStartXY(),t.getEndXY(),t.getInteriorPoint(),t.getCenter()];let r=4;t.isDegenerateToLine()&&(r=2);const i=[0,0,0,0];let o=null;if(t.hasAttribute(1)){o=i,o[0]=t.getAttributeAsDbl(0,1,0),o[1]=t.getAttributeAsDbl(1,1,0);const e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(o[0],o[1],.5);o[2]=e,o[3]=e}const a=t.getStartXY().equals(t.getEndXY())&&!t.isDegenerateToLine(),h=fg(e,n,o,r,s);return a?t.constructCircleCenterAndPoint(n[3],n[0],!t.isClockwise()):t.isDegenerateToLine()?t.constructLineCircularArc(n[0],n[1]):t.constructCircularArcThreePoint(n[0],n[1],n[2]),o&&(t.setStartAttribute(1,0,o[0]),t.setEndAttribute(1,0,o[1])),h}function Eg(e,t,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,4);t.queryControlPoints(n);const r=[0,0,0,0];let i=null;t.hasAttribute(1)&&(i=r,i[0]=t.getAttributeAsDbl(0,1,0),i[3]=t.getAttributeAsDbl(1,1,0),i[1]=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.q)(i[0],i[3],.5),i[2]=i[1]);const o=fg(e,n,i||null,n.length,s);return t.setControlPoints(n),i&&(t.setStartAttribute(1,0,i[0]),t.setEndAttribute(1,0,i[3])),t.normalizeAfterEndpointChange(),o}function Sg(e,t,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}function Cg(e,t,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}function Ig(e,t,s){const n=[t.getStartXY(),t.getEndXY()];Wl(e,n,2,s),t.setStartXY(n[0]),t.setEndXY(n[1]),t.normalizeAfterEndpointChange()}function bg(e,t,s,n){Wl(e,t,s,n)}function wg(e,t,s){if(0===t.projectionBehavior())Tg(e,t,s);else{const n=t.isClosed()&&t.isMajor(),r=[t.getStartXY(),n?t.getCenter():t.getEndXY()],i=[r[0].clone(),r[1].clone()];bg(e,i,2,s);const o=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;o.initializeFromTwoPointsArray(r,i),t.applyTransformation(o);const a=n?0:1;t.setCoordsForIntersector(i[0],i[a],!1)}}function vg(t,s,n,r){mg(t,s,n,r);const i=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;i.setFromPoints(n,r);const o=t.getOneDegreeGCSUnit(),a=360*o,h=180*o;if(i.width()>h){for(let e=0;e<r;e++)for(;n[e].x<s;)n[e].x+=a;if(i.setFromPoints(n,r),i.xmax>h+s)for(let e=0;e<r;e++)n[e].x-=a}}function Ng(e,t,s,n,r){const i=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,3);let o=0,a=!1,h=!1;const m=n.isDegenerateToLine();m?(i[0].assign(n.getStartXY()),i[1].assign(n.getEndXY()),i[2].setCoords(0,0),o=2):n.isClosed()&&n.isMajor()?(a=!0,h=!n.isClockwise(),i[0].assign(n.getStartXY()),i[1].assign(n.getCenter()),i[2].setCoords(0,0),o=2):(i[0].assign(n.getStartXY()),i[1].assign(n.getEndXY()),i[2].assign(n.getInteriorPoint()),o=3),e?bg(t,i,o,r):vg(t,s,i,o),m?n.constructLineCircularArc(i[0],i[1]):a?n.constructCircleCenterAndPoint(i[1],i[0],h):n.constructCircularArcThreePoint(i[0],i[1],i[2])}function Tg(e,t,s){Ng(!0,e,0,t,s)}function Gg(e,t,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P,4);t.queryControlPoints(n),bg(e,n,4,s),t.setControlPoints(n)}function Dg(e,t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function Vg(e,t,s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}function Fg(e,t,s){const n=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a9)(e),r=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a9)(t),i=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a7)(n,r),o=(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a7)(n,(0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a9)(s));return 0===o||(i>0&&o>0&&o<=i||i<0&&o<0&&o>=i)}function Hg(e,t,s,n,r){const i={stack:[],error:void 0,hasError:!1};try{const o=s.clone(),h=n.clone();if(2===r){const s=[0,0];return Ds(e,t,o,h,0,s),s[0]}if(o.y>h.y){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;e.assign(o),o.assign(h),h.assign(e)}const m=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(i,new Cc,!1),l=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(i,new Cc,!1),g=(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.b)(i,new Cc,!1),u=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;if(u.setCoords(o.y,h.y),!u.containsCoordinate(0)||Math.abs(o.x-h.x)>=Math.PI)return Number.NaN;if(o.x===h.x)return o.x;Dc.geodeticDistance(e,t,o.x,o.y,h.x,h.y,l,m,null,r);const c=l.val;let _=0,d=1;const p=o.clone();for(;c*(d-_)>1e-12*e;){const s=.5*(_+d);if(Dc.geodeticCoordinate(e,t,o.x,o.y,c*s,m.val,l,g,r),p.x=l.val,p.y=g.val,u.setCoords(o.y,p.y),0===p.y)return p.x;if(u.containsCoordinate(0))d=s;else{if(u.setCoords(h.y,p.y),!u.containsCoordinate(0))return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!1),Number.NaN;_=s}}return p.x}catch(o){i.error=o,i.hasError=!0}finally{(0,_tslib_es6_js__WEBPACK_IMPORTED_MODULE_5__.c)(i)}}function kg(e,t,s,n){const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;r.setCoords(t,s);const i=n.width();let o=Math.floor((e-t)/i)*i+e;const a=r.getCenter();for(;Math.abs(o-a)>Math.abs(o+i-a);)o+=i;return o}class Ag extends _SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_9__.G{constructor(){super(),this.m_geometryDeque=[],this.m_index=-1}next(){if(this.m_geometryDeque.length>0){this.m_index++;const e=this.m_geometryDeque[0];return this.m_geometryDeque.shift(),e}return null}getGeometryID(){return this.m_index}tick(e){this.m_geometryDeque.push(e)}tock(){return!0}getRank(){return 1}}function Mg(e,t){return e===t||null!==e&&null!==t&&(e.m_csType===t.m_csType&&(0===e.m_WKID&&0===t.m_WKID?e.m_hashCode===t.m_hashCode&&e.m_canonicalWkt===t.m_canonicalWkt:e.m_WKID===t.m_WKID))}function Ug(e,t){return e===t||null!==e&&null!==t&&(e.m_csType===t.m_csType&&(0===e.m_WKID&&0===t.m_WKID?1===e.m_csType?e.m_peCoordSys.isEqual(t.m_peCoordSys):e.m_peCoordSys===t.m_peCoordSys:e.m_WKID===t.m_WKID))}class qg{constructor(s,n=!0){this.m_PCSHorizon=null,this.m_GCSHorizon=null,this.m_GCSSplitLines=null,this.m_bGCSHorisonIsInclusive=!1,this.m_oneMeterPCS=0,this.m_oneDegreeGCS=0,this.m_gcsUnitFactor=0,this.m_northPole=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_southPole=_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P.getNAN(),this.m_polesUpdated=0,this.m_domain=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),this.m_primeMeridian=Number.NaN,this.m_geogToProjFactor=1,this.m_geogToProjOffset=0,this.m_geogToProjFactorsUpdated=0,this.m_oneMillimeter=0,this.m_centralMeridian=0,this.m_pPCSInfoNoDomain=null,this.m_oldWKID=-1973,this.m_vcsWKID=-1,this.m_bIsPannable=!1,this.m_bCached=!1,this.m_pannableExtent=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),this.m_pannableExtentGCS=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),this.m_areaOfUse=null,this.m_canonicalWkt="",this.m_peCoordSys=s,this.m_WKID=Ic.getCode(s),this.m_WKID<=0?(this.m_WKID=0,this.m_canonicalWkt=_l(s,0,!0),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ay)(this.m_canonicalWkt)):this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.B)(this.m_WKID);const r=this.m_peCoordSys.getType();this.m_csType=r===bc.PE_TYPE_PROJCS?2:1,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(r===bc.PE_TYPE_PROJCS||r===bc.PE_TYPE_GEOGCS),r===bc.PE_TYPE_PROJCS&&(s.loadConstants()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("PeProjcs.loadConstants failed"));const o=r===bc.PE_TYPE_GEOGCS?this.m_peCoordSys:this.m_peCoordSys.getGeogcs();r!==bc.PE_TYPE_GEOGCS&&Ic.getCode(o),this.m_unit=ms(s),this.m_primeMeridian=o.getPrimem().getLongitude();{const e=o.getUnit().getUnitFactor();this.m_gcsUnitFactor=e;let t=Math.PI/(180*e);Math.abs(t-1)<1e-10&&(t=1),this.m_oneDegreeGCS=t}if(r===bc.PE_TYPE_PROJCS){const e=this.m_peCoordSys,t=e.getUnit().getUnitFactor();this.m_oneMeterPCS=1/t,this.m_oneMillimeter=.001/t,this.m_pPCSInfoNoDomain=Nc.generate(e,Nc.PE_PCSINFO_OPTION_NONE),this.m_pPCSInfoNoDomain||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("cannot create pcs info"),this.m_bIsPannable=this.m_pPCSInfoNoDomain.isPannableRectangle(),this.m_centralMeridian=this.m_pPCSInfoNoDomain.getCentralMeridian()}else{this.m_bIsPannable=!0,this.m_polesUpdated=1,this.m_oneMeterPCS=0;const e=1/o.getUnit().getUnitFactor(),t=o.getDatum().getSpheroid().getAxis();this.m_oneMillimeter=.001/t*e,this.m_centralMeridian=0}this.m_bIsPannable&&(this.updateGCSHorizon(),this.updatePCSHorizon(),this.updatePoles(),this.updateDomain(),this.updatePannableExtent(),this.updatePannableExtentGCS())}[Symbol.dispose](){}getHashCode(){return this.m_hashCode}getPCSHorizonPannable(){return this.m_PCSHorizon}getGCSHorizonPannable(){return this.m_GCSHorizon}getPCSInfo(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_pPCSInfoNoDomain),this.m_pPCSInfoNoDomain}getCentralMeridian(){return this.m_centralMeridian}updateGCSHorizon(){if(this.m_peCoordSys.getType()!==bc.PE_TYPE_PROJCS)return;let t=!0;const s=this.m_peCoordSys,n=s.getGeogcs(),r=s.horizonGcsGenerate();if(!r)return;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(r.length>0);const i=r[0].getNump(),o=r[0].getKind();let h,m;t=r[0].getInclusive()>0;const l=this.getOneDegreeGCSUnit(),g=90*l,u=360*l,c=370*l,_=180*l*bc.PE_HORIZON_DELTA/Math.PI,d=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();let p=null;if(i>1)for(let e=1;e<i;e++)if(r[e].getKind()===bc.PE_HORIZON_LINE){p||(p=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.P);const t=r[e].getCoord();p.startPathCoords(t[0][0],t[0][1]),p.lineToCoords(t[1][0],t[1][1])}if(o===bc.PE_HORIZON_RECT){const e=r[0].getCoord();if(d.setFromPoints([new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(e[0][0],e[0][1]),new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P(e[1][0],e[1][1])],2),Math.abs(d.ymax-g)<1e-7*_&&(d.ymax=g),Math.abs(d.ymin+g)<1e-7*_&&(d.ymin=-g),d.width()>c){const e=-400*l,t=e+5*u;d.setCoords({xmin:e,ymin:d.ymin,xmax:t,ymax:d.ymax})}const s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({env2D:d});this.m_GCSHorizon||(this.m_GCSHorizon=s,this.m_bGCSHorisonIsInclusive=t)}else{let s=this.getPCSInfo().isGcsHorizonMultiOverlap();const o=Ru(n,null,null,1),c=[],_=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;for(let t=0;t<i;t++){if(r[t].getKind()!==bc.PE_HORIZON_POLY)continue;h=r[t].getSize();const s=r[t].getCoord(),n=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();n.setFromPoints((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(s),h),c.push(new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E(n.xmin,n.xmax)),n.width(),_.merge(c.at(-1))}let d=!1;const f=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;_.width()>u&&c.length>1?(f.vmin=this.getCentralMeridian()-u,f.vmax=f.vmin+2*u,d=!0,s=!0):(f.vmin=_.vmin,f.vmax=f.vmin+u);const x=e=>{let t=0;for(;c[e].vmin+t<f.vmin;)t+=u;for(;c[e].vmax+t-u>f.vmin;)t-=u;return t};let y=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;if(s){const e=new Ag,t=(new al).executeMany(e,o,null);for(let s=0;s<i;s++){if(r[s].getKind()!==bc.PE_HORIZON_POLY)continue;h=r[s].getSize();const n=r[s].getCoord();m=r[s].getInclusive()>0;const i=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;if(i.addPathPoint2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(n),h-1,!0),d){const t=x(s),n=c[s].clone();n.move(t);let r=t;const o=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;do{o.setShiftCoords(r,0);const t=i.clone();t.applyTransformation(o),e.tick(t),e.tock(),r+=u,n.move(u)}while(n.vmin<f.vmax)}else e.tick(i),t.tock()}y=t.next()}else{y=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;for(let e=0;e<i;e++){if(r[e].getKind()!==bc.PE_HORIZON_POLY)continue;h=r[e].getSize();const s=r[e].getCoord();if(m=r[e].getInclusive()>0,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(m===t),d){const t=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;t.addPathPoint2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(s),h-1,!0);const n=x(e),r=c[e].clone();r.move(n);let i=n;const o=new _Transformation2D_js__WEBPACK_IMPORTED_MODULE_6__.T;do{if(0!==i){o.setShiftCoords(i,0);const e=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a({copy:t});e.applyTransformation(o),y.addPath(e,0,!0)}else y.addPath(t,0,!0);i+=u,r.move(u)}while(r.vmin<f.vmax)}else y.addPathPoint2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(s),h-1,!0)}}d&&(y=(new _OperatorClip_js__WEBPACK_IMPORTED_MODULE_7__.O).execute(y,new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(f.vmin,-g-l,f.vmax,g+l),o,null)),t?(new wh).accelerateGeometry(y,o,1):(new Km).accelerateGeometry(y,o,1),(new ul).accelerateGeometry(y,o,1),null===this.m_GCSHorizon&&(this.m_GCSHorizon=y,this.m_bGCSHorisonIsInclusive=t,this.m_GCSSplitLines=p)}}updateAreaOfUse(){return null}updatePCSHorizon(){if(this.m_peCoordSys.getType()!==bc.PE_TYPE_PROJCS)return;const t=this.m_peCoordSys.horizonPcsGenerate();if(!t)return;let s;this.getPCSInfo();const n=t[0].getKind();t[0].getInclusive();const r=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),i=t[0].getNump();let o=!1;if(n===bc.PE_HORIZON_RECT){const e=t[0].getCoord();r.setFromPoints((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(e),2),s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({env2D:r})}else{let e=-1;for(let s=0;s<i;s++)t[s].getKind()===bc.PE_HORIZON_POLY&&(e=s);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e>=0);const n=t[e].getSize()-1,r=t[e].getCoord(),h=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a;s=h,h.addPathPoint2D((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.az)(r),n,!0),o=!0}if(this.getPCSInfo().isDensificationNeeded()){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n!==bc.PE_HORIZON_RECT);const e=1e5*this.getOneMeterPCSUnit();s=(new _OperatorDensify_js__WEBPACK_IMPORTED_MODULE_8__.O).execute(s,e,0,0,null)}if(o){{const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E;s.queryEnvelope(e),s.calculateArea2D(),s.calculateLength2D(),s.getExteriorRingCount()}(new wh).accelerateGeometry(s,null,1)}null===this.m_PCSHorizon&&(this.m_PCSHorizon=s)}updatePannableExtent(){const t=this.m_peCoordSys.getType();if(t===bc.PE_TYPE_PROJCS){const t=this.m_peCoordSys,s=this.getPCSInfo().getCentralMeridian(),n=t.getGeogcs();n||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");const r=[s+1/n.getUnit().getUnitFactor()*Math.PI,0];wc.geogToProj(t,1,r);const o=r[0],a=t.getParameters()[bc.PE_PARM_X0].getValue(),h=this.getPCSHorizon(),m=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();h.queryEnvelope(m);const l=Math.abs(o-a),g=l+a,u=-1*l+a,c=m.ymax,_=m.ymin;this.m_pannableExtent.setCoords({xmin:u,ymin:_,xmax:g,ymax:c})}else if(t===bc.PE_TYPE_GEOGCS){const e=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtent.setCoords({xmin:-e,ymin:-e/2,xmax:e,ymax:e/2})}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}updatePannableExtentGCS(){const t=this.m_peCoordSys.getType();if(t===bc.PE_TYPE_PROJCS){const t=this.m_peCoordSys,s=this.m_centralMeridian,n=t.getGeogcs();n||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("");const r=1/n.getUnit().getUnitFactor()*Math.PI,o=this.getGCSHorizon(),a=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();o.queryEnvelope(a),this.m_pannableExtentGCS.setCoords({xmin:s-r,ymin:a.ymin,xmax:s+r,ymax:a.ymax})}else if(t===bc.PE_TYPE_GEOGCS){const e=1/this.m_peCoordSys.getUnit().getUnitFactor()*Math.PI;this.m_pannableExtentGCS.setCoords({xmin:-e,ymin:-e/2,xmax:e,ymax:e/2})}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}updateDomain(){if(1===this.m_csType){const t=400*this.getOneDegreeGCSUnit();this.m_domain=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.construct(-t,-t,t,t)}else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(2===this.m_csType);const t=Nc.generate(this.m_peCoordSys,Nc.PE_PCSINFO_OPTION_DOMAIN);t||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("generate pcs info failed");const s=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D(t.getDomainMinx(),t.getDomainMiny(),t.getDomainMaxx(),t.getDomainMaxy());this.m_domain.isEmpty()&&this.m_domain.setCoords({env2D:s})}}updatePoles(){if(this.m_peCoordSys.getType()===bc.PE_TYPE_PROJCS){const e=90*this.getOneDegreeGCSUnit(),t=[[0,e],[0,-e]];wc.geogToProj(this.m_peCoordSys,2,t);const s=this.getPCSInfo().getNorthPoleLocation()!==Nc.PE_POLE_OUTSIDE_BOUNDARY,n=this.getPCSInfo().getSouthPoleLocation()!==Nc.PE_POLE_OUTSIDE_BOUNDARY;this.m_polesUpdated||(s&&this.m_northPole.setCoords(t[0][0],t[0][1]),n&&this.m_southPole.setCoords(t[1][0],t[1][1]),this.m_polesUpdated=1)}else this.m_polesUpdated=1}updateGeogToProjFactors(){if(this.m_peCoordSys.getType()===bc.PE_TYPE_PROJCS){const e=this.getOneDegreeGCSUnit(),t=this.m_pPCSInfoNoDomain.getCentralMeridian(),s=[0,0,0,0];s[0]=t,s[1]=0,s[2]=t+e,s[3]=0;const n=wc.geogToProj(this.m_peCoordSys,2,s);(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(2===n);const r=(s[2]-s[0])/e,i=s[0];0===this.m_geogToProjFactorsUpdated&&(this.m_geogToProjFactor=r,this.m_geogToProjOffset=i,this.m_geogToProjFactorsUpdated=1)}else this.m_geogToProjFactorsUpdated=1}getOneMeterPCSUnit(){return this.m_oneMeterPCS}getOneDegreeGCSUnit(){return this.m_oneDegreeGCS}getGcsUnitFactor(){return this.m_gcsUnitFactor}getUnitsPerMillimeter(){return this.m_oneMillimeter}getGCSSplitLines(){return this.m_bIsPannable?null:(this.m_GCSHorizon||this.updateGCSHorizon(),this.m_GCSSplitLines)}getGCSHorizon(){return this.m_bIsPannable?this.getGCSHorizonPannable():(null!==this.m_GCSHorizon||this.updateGCSHorizon(),this.m_GCSHorizon)}getGCSHorisonIsInclusive(){return this.m_bIsPannable||this.getGCSHorizon(),this.m_bGCSHorisonIsInclusive}getPCSHorizon(){return this.m_bIsPannable?this.getPCSHorizonPannable():(null!==this.m_PCSHorizon||this.updatePCSHorizon(),this.m_PCSHorizon)}getPole(e){return this.m_bIsPannable||0!==this.m_polesUpdated||this.updatePoles(),e?this.m_southPole:this.m_northPole}getGeogToProjFactors(){return 0===this.m_geogToProjFactorsUpdated&&this.updateGeogToProjFactors(),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.k)(this.m_geogToProjFactor,this.m_geogToProjOffset)}getDomainXY(){if(this.m_bIsPannable)return this.m_domain.clone();let e=!1;return e=this.m_domain.isEmpty(),e&&this.updateDomain(),this.m_domain.clone()}getPrimeMeridian(){return this.m_primeMeridian}getLatestID(){return this.m_WKID}getOldID(){let e=this.m_oldWKID;if(e<0){if(e=0,this.m_WKID>0){const t=[0],s=[0];qc(this.m_peCoordSys.getType(),this.m_WKID,t,s)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("query_code_change"),e=t[0]}this.m_oldWKID=e}return e}isCustomWkid(){return!1}isPannable(){return this.m_bIsPannable}getPannableExtent(){return this.m_pannableExtent.clone()}getPannableExtentGCS(){return this.m_pannableExtentGCS.clone()}getAreaOfUse(){return null!==this.m_areaOfUse?this.m_areaOfUse:this.updateAreaOfUse()}getVcsCode(){return 0}saveMemory(){}getCSType(){return this.m_csType}getUnit(){return this.m_unit}setCached(){this.m_bCached=!0}getCached(){return this.m_bCached}static equal(e,t){return!1}static equal_for_projection(e,t){return!1}}class Bg{constructor(e,t=!0){this.m_oneMeter=0,this.m_WKID=-1,this.m_oldWKID=-1,this.m_canonicalWkt="not yet implemented",this.m_model=0,this.m_unit=new bu,this.m_cached=!1}setCached(e=!0){this.m_cached=e}getCached(){return this.m_cached}getOneMeterUnit(){return 0}getLatestID(){return this.m_WKID}getOldID(){let e=this.m_oldWKID;return e<0&&(e=0,this.m_WKID>0&&(e=this.m_WKID),this.m_oldWKID=e),e}getModel(){return 0}isCustomWkid(){return!1}getVerticalUnit(){return this.m_unit}static equal(e,t){return!1}static equal_for_projection(e,t){return!1}}function Og(t,s,n){return Yg(t,s,_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty(),n)}function Yg(e,t,s,n){return Xg(!0,e,t,s,n)}function Rg(e,t,s,n){return Lg(!0,e,t,s,n)}function Xg(e,t,s,n,r){Uu()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.r)("cannot create projection transformation");return t.hasVCS()&&s.hasVCS()?jg():Zg(t,s,n,r)}function Lg(e,t,s,n,r,i){return Uu()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.r)("cannot create projection transformation"),new eu(e?2:1,t,s,n,r,i)}function zg(e,s,n,r,i,o=!1){s&&n||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),Uu()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.r)("cannot obtain geotransformation list");if(1===e&&s.hasVCS()&&n.hasVCS())return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("hv xform not impl"),[];{const e=Qc(s,n,r,i,o),t=[];for(const s of e)t.push(s);return t}}function Wg(){return{centralMeridianOfOutputGCS:Number.NaN,densificationStep:Number.NaN,clipWithInputHorizon:!0,clipWithOutputHorizon:!0,legacyHorizonClipping:!1,normalizeResultGeometry:!1,equals(e){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.centralMeridianOfOutputGCS,e.centralMeridianOfOutputGCS)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.densificationStep,e.densificationStep)&&this.clipWithInputHorizon===e.clipWithInputHorizon&&this.clipWithOutputHorizon===e.clipWithOutputHorizon&&this.legacyHorizonClipping===e.legacyHorizonClipping&&this.normalizeResultGeometry===e.normalizeResultGeometry}}}function jg(e,t,s,n){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),{}}function Zg(s,n,r,i){s&&n||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("!inputSR || !outputSR");const o=s.getLatestID(),a=n.getLatestID();if(3857===o&&4326===a){if(s.m_bDefaultDescriptor&&n.m_bDefaultDescriptor)return pu()}else if(4326===o&&3857===a&&s.m_bDefaultDescriptor&&n.m_bDefaultDescriptor)return fu();const h=_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D.constructEmpty();h.setCoords({env2D:r});const m=s.getCoordinateSystemType(),l=n.getCoordinateSystemType();if(0===m||0===l)return Kg(s,n);if(i){const e=i.find(0,s.getGCS(),n.getGCS());if(e)return Kg(s,n,e)}const g=s.getGCS().getLatestID(),u=n.getGCS().getLatestID();if(g>0&&g===u)return Kg(s,n);const c=new mu(s,n,r);{const e=gu(c);if(e)return e}const _=zg(0,s,n,h,1,!0);return uu(c,Kg(s,n,_.length?_[0]:void 0))}function Kg(e,t,s,n,r){return new eu(1,e,t,s,n,r)}function Qg(){return{flagsMask:0,setFlag(e,t){t?this.flagsMask|=e:this.flagsMask&=~e},hasFlag(e){return 0!==(this.flagsMask&e)}}}function Jg(){return{m_extendedParams:Wg(),m_extendedParamsInternal:Qg()}}function $g(){return Jg()}let eu=class e{constructor(e,s,n,r,i,o){let h,m;this.m_datumTran=null,this.m_bIdentity=!0,this.m_bIdentityGeogToGeog=!0,this.m_bVertical=!1,this.m_bNormalize=!1,s&&n||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("!inputSR || !outputSR"),r&&0===r.getType()&&(r.m_bReadOnly=!0),this.m_bNormalize=!1,1!==e&&(h=s.getVCS(),m=n.getVCS(),this.m_bVertical=null!=h&&null!=m),this.m_inputSR=s,this.m_outputSR=n,this.m_bIdentity=!1,this.m_bIdentityGeogToGeog=!1,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!this.m_params),i&&(this.m_params=Jg(),this.m_params.m_extendedParams=i),o&&(this.m_params||(this.m_params=Jg()),this.m_params.m_extendedParamsInternal=o);let l=!1;const g=null!=r,u=s.getCoordinateSystemType(),c=n.getCoordinateSystemType();if(n.isPannable()&&0!==u&&i){const e=i.centralMeridianOfOutputGCS;if(!Number.isNaN(e)&&n.isPannable()){const t=n.getPannableExtent(),s=t.getCenterX();if(s!==e){const n=Math.ceil(t.width());e+n!==s+n&&(l=!0)}}}const _=i&&i.normalizeResultGeometry;if(s.equals(n))return this.m_bIdentity=!l,this.m_bIdentityGeogToGeog=!0,void this.updateProjector();const d=!g&&s.equalForProjection(n,this.m_bVertical);this.m_bIdentity=d&&!l,this.m_bIdentity?this.m_bIdentityGeogToGeog=!0:0!==u&&0!==c&&(_&&this.m_outputSR.isPannable()&&(this.m_bNormalize=_),this.m_datumTran=r||null,this.m_bIdentityGeogToGeog=(!this.m_datumTran||0===this.m_datumTran.count())&&this.m_inputSR.getGCS().equalForProjection(this.m_outputSR.getGCS(),this.m_bVertical)),this.updateProjector()}getInputSR(){return this.m_inputSR}getOutputSR(){return this.m_outputSR}getDatumTransformation(){return this.m_datumTran}getInverse(){const t=new e(1,this.m_outputSR,this.m_inputSR,this.m_datumTran?.createInverse());return t.m_bIdentity=this.m_bIdentity,t.m_bVertical=this.m_bVertical,t.m_bIdentityGeogToGeog=this.m_bIdentityGeogToGeog,t.updateProjector(),t}isIdentity(){return this.m_bIdentity}getExtendedParams(){return this.m_params?this.m_params.m_extendedParams:$g().m_extendedParams}equals(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}isVertical(){return this.m_bVertical}isMatchingTransformation(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getGeographicTransformations(){return this.m_datumTran}getExtendedParamsImpl(){return this.m_params?this.m_params.m_extendedParams:$g().m_extendedParams}getExtendedParamsInternal(){return this.m_params?this.m_params.m_extendedParamsInternal:$g().m_extendedParamsInternal}isIdentityGeogToGeog(){return this.m_bIdentityGeogToGeog}normalizeOutput(){return this.m_bNormalize}updateProjector(){this.m_projector=new Ah(this)}};const tu=new Map,su=new Map,nu=new Map;function ru(e){let t=e.getCode();if(t>0){const e=Iu(t);return e||Cu(Ic.coordsys(t))}const s=e.getName();if(su.has(s)){const t=su.get(s);if(t&&t.deref()){const s=t.deref();if(s.m_peCoordSys.isEqual(e))return s}}return t=Ic.getCode(e),Cu(t>0?Ic.coordsys(t):e)}function iu(e){e<=0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.C)(e);{const t=Iu(e);if(t)return t}const t=Hc(Ic.coordsys(e));t.get()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.C)(e);const s=Cu(t.release());return s.getLatestID()!==e&&tu.set(e,new WeakRef(s)),s}function ou(e){const t=new Bg({},!0);return t.m_WKID=e,t}function au(e){const t=Hc(Ic.fromString(bc.PE_TYPE_COORDSYS,e));return t.get()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.D)(e),ru(t.release())}function hu(e){su.delete(e.m_peCoordSys.getName()),nu.delete(_l(e.m_peCoordSys,0,!1))}class mu{constructor(e,t,s){this.m_hashCode=-1,e&&(this.m_inputSR=e,this.m_outputSR=t,this.m_env=s.clone(),this.m_hashCode=this.m_inputSR.getHashCode(),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_hashCode,this.m_outputSR.getHashCode()),this.m_env.isEmpty()||(this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_hashCode,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aI)(this.m_env.xmin)),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_hashCode,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aI)(this.m_env.xmax)),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_hashCode,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aI)(this.m_env.ymin)),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_hashCode,(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aI)(this.m_env.ymax))))}getHashCode(){return this.m_hashCode}equals(e){return!(this.m_inputSR&&!e.m_inputSR||!this.m_inputSR&&e.m_inputSR)&&(this.m_env.equals(e.m_env)&&this.m_inputSR.equals(e.m_inputSR)&&this.m_outputSR.equals(e.m_outputSR))}clear(){this.m_inputSR=void 0,this.m_outputSR=void 0,this.m_hashCode=-1,this.m_env=void 0}}const lu=new Map;function gu(e){if(lu.has(e.getHashCode()))return lu.get(e.getHashCode())}function uu(e,t){return lu.set(e.getHashCode(),t),t}let cu,_u,du;function pu(){return cu||(cu=Rg(hc(),lc())),cu}function fu(){return _u||(_u=pu().getInverse()),_u}function xu(){return du||(du=Ic.unit(9001)),du}function yu(e){return null!==Hc(Ic.coordsys(e)).get()}const Pu=new Map;function Eu(e){if(Pu.has(e))return Pu.get(e);{const t=yu(e);return Pu.set(e,t),t}}function Su(e){return!1}function Cu(e){const t=Hc(e),s=e.getCode();if(s>0){const e=Iu(s);if(e)return e}const n=e.getName();let r=su.get(n);if(r){const t=r.deref();if(t&&t.m_peCoordSys.isEqual(e))return t}const i=new qg(t.release());if(s>0)return i.setCached(),tu.set(s,new WeakRef(i)),su.set(n,new WeakRef(i)),i;const o=_l(e,0,!1);if(r=nu.get(o),r){const e=r.deref();if(e)return e}return i.setCached(),nu.set(o,new WeakRef(i)),i}function Iu(e){const t=tu.get(e);if(t)return t.deref()}class bu extends ns{constructor(e){return void 0===e?(super(),this.m_wkid=9001,void(this.m_peUnit=null)):"number"==typeof e?(super(),this.m_factor=e,void(this.m_wkid=0)):(super(e),void(e||(this.m_factor=1,this.m_wkid=9001,this.m_peUnit=xu())))}getUnitType(){return 0}convertFromMeters(e){return e/this.getUnitToBaseFactor()}convertToMeters(e){return e*this.getUnitToBaseFactor()}}const wu=["0","1","2","3","4","5","6","7","8","9","b","c","d","e","f","g","h","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"];function vu(e,t,s){const n=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.d)(t,"R");let r=0,i=0;for(let o=0;o<t;o++){let s=e[r]>>i&31;if(i+=5,i>31){const t=37-i;s&=(1<<t)-1,i-=32,r++,s|=(e[r]&(1<<i)-1)<<t}const a=wu[s];n[t-1-o]=a}return s>t?n.push(..."0".repeat(s-t)):s<t&&(n.length=s),n.join("")}function Nu(e,t,s,n,r){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(n>>5<r.length);let i=t,o=s;for(let a=n;a>=0;a-=2){const t=31&a,s=.5*(o+i);e>=s?(r[a>>5]|=1<<t,i=s):o=s}}let Tu=new Set;const Gu=2147483645n,Du=9007199254740990n,Vu="operation is not supported for unknown coordinate systems";var Fu;function Hu(){return{majorSemiAxis:0,e2:0,minorSemiAxis:0,flattening:0,isSphere(){return 0===this.e2}}}function ku(e,t,s){e.majorSemiAxis=t,e.minorSemiAxis=t*(1-s),e.e2=s*(2-s),e.flattening=s}function Au(e){if(Ic)return;Uc(e);const t=Tu;Tu=null,t.forEach((e=>{const t=e.deref();t&&t.attachToPe()}))}function Mu(e){Mc(e)}function Uu(){return!!Ic}function qu(){return!!kc}function Bu(){return!!Ic||!!kc}function Ou(e,t,s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Bu()),dc(e,void 0===t?0:t,null,!1)}function Yu(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Bu());const s=new oc;let n;return Uu()?(n=au(e),s.setHorzProj_(n),s.m_vertcs=null,s.m_userWKID=n.getLatestID()):(n=Ac(e),s.m_unit=n.isPCS?new bu(n.metersOrRadiansPerUnit):new os(n.metersOrRadiansPerUnit)),uc(s.m_precisionDescriptor,n,null,1),s.m_bDefaultDescriptor=!0,s.m_userWKT=e,s.calculateHashCode(),s.initDbgName(),s}function Ru(e,t,s,n,r=!0){let i=null;return t&&(i=Fm(t,r)),Xu(e,i,s,n,r)}function Xu(e,s,n,r,i){e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("!PE_coord_sys");const o=new oc;let a;return a=i?ru(e):new qg(e,!1),uc(o.m_precisionDescriptor,a,s,r),o.m_bDefaultDescriptor=!0,o.setHorzProj_(a),o.m_vertcs=s,o.m_userWKID=a.getLatestID(),o.calculateHashCode(),o.initDbgName(),o}function Lu(e,s,n=!1){3===e.getCoordinateSystemType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("image spatial reference cannot be altered");const r=new oc,i=e;return r.m_peCoordSysVal=i.m_peCoordSysVal,r.m_vertcs=i.m_vertcs,r.m_unit=i.m_unit,r.m_precisionDescriptor.assign(s),r.m_localZToXYFactor=i.m_localZToXYFactor,(Number.isNaN(r.m_precisionDescriptor.m_falseX)||Number.isNaN(r.m_precisionDescriptor.m_falseY))&&(r.m_precisionDescriptor.m_falseX=i.m_precisionDescriptor.m_falseX,r.m_precisionDescriptor.m_falseY=i.m_precisionDescriptor.m_falseY),r.m_precisionDescriptor.snapPrecision(),r.m_precisionDescriptor.fixTolerance(),r.m_userWKID=i.m_userWKID,r.m_precisionDescriptor.equals(i.m_precisionDescriptor)?r.m_bDefaultDescriptor=i.m_bDefaultDescriptor:r.m_bDefaultDescriptor=!1,n&&(r.m_bDefaultDescriptor=!0),r.calculateHashCode(),r.initDbgName(),r}function zu(e,t,s){return{}}function Wu(e,s,n){void 0===s&&(s=1),(s<=0||!Number.isFinite(s))&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(""),e||1===s||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("null Unit has to have z_to_xy_factor equal to 1");const r=new oc;r.m_unit=e;const i=e||new bu(9001);return _c(r.m_precisionDescriptor,i,null,1),r.m_bDefaultDescriptor=!0,Number.isNaN(r.m_precisionDescriptor.m_falseX)&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("NAN false X/Y are not allowed here"),r.m_localZToXYFactor=s,r.calculateHashCode(),r.initDbgName(),r}function ju(e,t){return e.snapGeometry(t)}function Zu(e){const t=e.getCoordinateSystemType();return 1===t?e:(3===t&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),e.getGCS())}function Ku(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Bu()),qu()?Bc(e):Eu(e)}function Qu(e){if(Uu()){return null!==Hc(Ic.fromString(bc.PE_TYPE_COORDSYS,e)).get()}try{return Ac(e),!0}catch(t){}return!1}let Ju;function $u(){return Ju||(Ju=(()=>{const e=Math.trunc(Math.random()*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()),t=Date.now();return`|abba_000|${e.toString(16)}|${t.toString(16)}|`})()),Ju}!function(e){e[e.utmDefault=0]="utmDefault",e[e.utmNorthSouth=1]="utmNorthSouth"}(Fu||(Fu={}));let ec=0;function tc(e=""){let t=`${$u()}${ec++}`;return""!==e&&(t+=`|${e}`),t}function sc(e){return e.startsWith($u())}let nc,rc,ic,oc=class e{destroy(){hu(this.m_peCoordSysVal),1===this.getCoordinateSystemType()||2===this.getCoordinateSystemType()?this.getPECoordSys().destroy():(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("SpatialReference.destroy")}constructor(){this.m_vertcs=null,this.m_peCoordSysVal=null,this.m_userWKID=0,this.m_userWKT=null,this.m_geogSpatialReference=null,this.m_srToGcs=null,this.m_gcsToSr=null,this.m_defaultPrecisionSR=null,this.m_localZToXYFactor=-1,this.m_precisionDescriptor=new ac,this.m_hashCode=0,this.m_bDefaultDescriptor=!1,gc(this.m_precisionDescriptor),Tu&&Tu.add(new WeakRef(this))}attachToPe(){(this.m_userWKID>0?Ou(this.m_userWKID):Yu(this.m_userWKT)).copyTo(this,!1)}copyTo(e,t=!0){(t||e.m_bDefaultDescriptor)&&(e.m_bDefaultDescriptor=this.m_bDefaultDescriptor,e.m_precisionDescriptor.assign(this.m_precisionDescriptor)),e.m_defaultPrecisionSR=null,e.m_gcsToSr=this.m_gcsToSr,e.m_geogSpatialReference=this.m_geogSpatialReference,e.m_hashCode=this.m_hashCode,e.m_localZToXYFactor=this.m_localZToXYFactor,e.m_peCoordSysVal=this.m_peCoordSysVal,e.m_srToGcs=this.m_srToGcs,e.m_userWKID=this.m_userWKID,e.m_userWKT=this.m_userWKT,e.m_vertcs=this.m_vertcs,e.m_unit=this.m_unit}getHashCode(){return this.m_hashCode}getHashCodeHorizontal(){let e=0;return e=this.m_peCoordSysVal?this.m_peCoordSysVal.getHashCode():this.m_unit?this.m_unit.getHashCode():305419891,e}updateTransform(e){if(1===this.getCoordinateSystemType())return Rg(this,this,null);let t=e?this.m_srToGcs:this.m_gcsToSr;if(t)return t;const s=this.getGCS(),n=this;t=e?Rg(n,s,null):Rg(s,n,null);const r=t,i=e?this.m_srToGcs:this.m_gcsToSr;return i||(e?this.m_srToGcs=r:this.m_gcsToSr=r,t)}getHashCodeVertical(){return this.m_vertcs?this.m_vertcs.getHashCode():0}calculateHashCode(){let e=this.getHashCodeHorizontal();const t=this.getHashCodeVertical(),s=this.m_precisionDescriptor.getHashCode();e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,t),this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,s)}initDbgName(){}setHorzProj_(e){this.m_peCoordSysVal=e,this.m_unit=this.m_peCoordSysVal.getUnit()}getTolerance(e=0){return this.m_precisionDescriptor.getTolerance(e)}getResolution(e=0){return this.m_precisionDescriptor.getResolution(e)}getPECoordSys(){return this.m_peCoordSysVal?this.m_peCoordSysVal.m_peCoordSys:null}getPCSInfo(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSInfo()}getCentralMeridian(){if(this.throwIfNotGCSOrPCS(),1===this.getCoordinateSystemType())return 0;return this.getPCSInfo().getCentralMeridian()}getCoordinateSystemType(){const e=this.getPECoordSys();if(e){switch(e.getType()){case bc.PE_TYPE_GEOGCS:return 1;case bc.PE_TYPE_PROJCS:return 2;default:return 0}}else{if((this.m_userWKID>0||this.m_userWKT)&&this.m_unit instanceof bu)return 2;if(this.m_unit instanceof os)return 1}return 0}getID(){return this.m_userWKID}getLatestID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getLatestID():this.m_userWKID}getOldID(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getOldID():this.m_userWKID}getVerticalID(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("vcs not implemented"),0}getLatestVerticalID(){return this.m_vertcs?this.m_vertcs.getLatestID():0}getOldVerticalID(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("vcs not implemented"),0}getPEVerticalCoordSys(){return null}getPole(e){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPole(e)}getText(){const e=this.getPECoordSys();return e?pl(e):this.m_userWKT??""}getTextExtended(e){const t=this.getPECoordSys();return t?this.getPEVerticalCoordSys()?dl(null,t,this.getPEVerticalCoordSys()):pl(t,e):this.m_userWKT??""}getText2(e=-1){const t=this.getPECoordSys();return t?fl(t,e):this.m_userWKT??""}getUnit(){return this.m_unit}getUnitsPerMillimeter(){return this.m_peCoordSysVal?this.m_peCoordSysVal.getUnitsPerMillimeter():this.m_unit instanceof bu?.001/this.m_unit.getUnitToBaseFactor():this.m_unit instanceof os?.001/(Ac(this.m_userWKT??this.m_userWKID).semiMajor*this.m_unit.getUnitToBaseFactor()):((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("sr object not in valid state"),0)}getAuthorityName(){return this.getPECoordSys()?xl():""}getVerticalUnit(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("vcs not implemented"),{}}getVCS(){return this.m_vertcs}hasVCS(){return!1}getGCSHorisonIsInclusive(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorisonIsInclusive()}getGCSHorizon(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSHorizon()}getGCS(){const e=this.getCoordinateSystemType();if(0===e)(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)(Vu);else{if(1===e)return this;3===e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("image cs not supported")}if(this.m_geogSpatialReference)return this.m_geogSpatialReference;let t;if(this===hc()||this===mc())t=lc();else{(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal);const e=this.m_peCoordSysVal.m_peCoordSys.getGeogcs();e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)(""),t=Ru(e,this.m_vertcs,null,this.m_precisionDescriptor.getPrecision(),this.m_peCoordSysVal.getCached())}return this.m_geogSpatialReference?t=this.m_geogSpatialReference:this.m_geogSpatialReference=t,t}getGCSSplitLines(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getGCSSplitLines()}toGCS(e,s){if(0===e.length)return 0;e.length>s.length&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("coordsSrc.size() > coordsDst.size()");const n=this.getCoordinateSystemType();if(0===n&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)(Vu),1===n)return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.aw)(s,e,e.length),e.length;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal);const r=this.getSRToGCSTransform();return(new qh).transform(r,e,e.length,s)}toGeohash(e,t=8){const s=e.clone();s.scale(9102===this.getGCS().getUnit().getID()?1:this.getGCS().getUnit().getUnitToBaseFactor()/Math.PI*180),s.x<-180?(s.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.l)(s.x,360),s.x<-180&&(s.x+=360)):s.x>180&&(s.x=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.l)(s.x,360),s.x>180&&(s.x-=360)),s.y>90&&(s.y=90),s.y<-90&&(s.y=-90);const n=5*t,r=new Uint32Array(4);Nu(s.x,-180,180,n-1,r),Nu(s.y,-90,90,n-2,r);return vu(r,t,t)}isPannable(){const e=this.getCoordinateSystemType();return 0!==e&&3!==e&&((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.isPannable())}getPannableExtent(){return this.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("!is_pannable"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtent()}getPannableExtentInGCS(){return this.isPannable()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("!is_pannable"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPannableExtentGCS()}throwIfNotGCSOrPCS(){const e=this.getCoordinateSystemType();1!==e&&2!==e&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("Not a GCS or PCS")}getDomainXY(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getDomainXY()}getFullWorldExtent(){return this.throwIfNotGCSOrPCS(),this.isPannable()?this.getPannableExtent():this.getDomainXY()}queryPrecisionDescriptor(e){if(e.assign(this.m_precisionDescriptor),Number.isNaN(e.m_falseX))if(Uu()||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.r)("cannot query precision descriptor"),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==this.m_peCoordSysVal),2!==this.m_precisionDescriptor.m_precision){const t=this.m_peCoordSysVal.getDomainXY();e.m_falseX=t.xmin,e.m_falseY=t.ymin}else e.m_falseX=-Number.MAX_VALUE,e.m_falseY=-Number.MAX_VALUE}queryPrecisionDescriptorWithoutFalseXY(e){e.assign(this.m_precisionDescriptor),e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}queryDefaultPrecisionDescriptorWithoutFalseXY(e){if(this.m_bDefaultDescriptor)e.assign(this.m_precisionDescriptor);else{const t=this.getCoordinateSystemType();0===t?_c(e,this.m_unit,this.m_vertcs,this.m_precisionDescriptor.getPrecision()):3===t?(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.t)("image cs"):uc(e,this.m_peCoordSysVal,this.m_vertcs,this.m_precisionDescriptor.getPrecision())}e.m_falseX=Number.NaN,e.m_falseY=Number.NaN}horizontalEqual(e){return Mg(this.m_peCoordSysVal,e.m_peCoordSysVal)}verticalEqual(e){return null!==this.m_vertcs==(null!==e.m_vertcs)&&(!this.m_vertcs||this.m_vertcs.equals(e.m_vertcs))}equals(e){const t=e;if(this===t)return!0;if(!this.horizontalEqual(t)||!this.verticalEqual(t))return!1;if(!t.m_peCoordSysVal){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!this.m_peCoordSysVal),null!==this.m_unit!=(null!==t.m_unit))return!1;if(this.m_unit&&!this.m_unit.equals(t.m_unit))return!1;if(this.m_localZToXYFactor!==t.m_localZToXYFactor)return!1}if(!this.m_bDefaultDescriptor||!t.m_bDefaultDescriptor){if(this.m_peCoordSysVal){if(!this.m_precisionDescriptor.equalsWithoutFalseXY(t.m_precisionDescriptor))return!1;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(t.m_peCoordSysVal);let e=this.m_precisionDescriptor.m_falseX,s=this.m_precisionDescriptor.m_falseY;if(Number.isNaN(e)){const t=this.m_peCoordSysVal.getDomainXY();e=t.xmin,s=t.ymin}let n=t.m_precisionDescriptor.m_falseX,r=t.m_precisionDescriptor.m_falseY;if(Number.isNaN(n)){const e=t.m_peCoordSysVal.getDomainXY();n=e.xmin,r=e.ymin}return e===n&&s===r}return this.m_precisionDescriptor.equals(t.m_precisionDescriptor)}return!0}equalForProjection(e,t){if(this===e)return!0;const s=this.getCoordinateSystemType(),n=e.getCoordinateSystemType();if(0===s||0===n)return 0===s&&0===n?(!t||this.getZToXYFactor()===e.getZToXYFactor())&&(!this.getUnit()||!e.getUnit()||this.getUnit().equals(e.getUnit())):3!==s&&3!==n&&(null===this.getUnit()||null===e.getUnit()||(!t||this.getZToXYFactor()===e.getZToXYFactor())&&this.getUnit().equals(e.getUnit()));if(s!==n)return!1;if(3===s)return this.equals(e);if(Ug(this.m_peCoordSysVal,e.m_peCoordSysVal)){if(!t)return!0;if(null!==this.m_vertcs==(null!==e.m_vertcs))return!this.m_vertcs||this.m_vertcs.equalForProjection(e.m_vertcs)}return!1}equalHorizontal(e){return this.horizontalEqual(e)}equalVertical(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}equalVerticalVCS(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}convergenceAngle(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}getPeCoordsysCopy(){if(this.m_peCoordSysVal){const e=this.m_peCoordSysVal.m_peCoordSys;return e||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("cannot clone coord sys"),e}return null}getPeVertcsCopy(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),0}throwIfLocal(){0===this.getCoordinateSystemType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)(Vu)}getPrimeMeridian(){return this.throwIfLocal(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPrimeMeridian()}getSRToGCSTransform(){return this.updateTransform(!0)}getGCSToSRTransform(){return this.updateTransform(!1)}getOneMeter(){return 1e3*this.getUnitsPerMillimeter()}getOneMeterPCSUnit(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneMeterPCSUnit()}getDefaultPrecisionSR(){if(this.m_bDefaultDescriptor)return this;if(null===this.m_defaultPrecisionSR){const e=new ac;this.queryDefaultPrecisionDescriptorWithoutFalseXY(e),this.m_defaultPrecisionSR=Lu(this,e,!0)}return this.m_defaultPrecisionSR}getPCSHorizon(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getPCSHorizon()}getHorzUnitFactor(){return this.m_unit?this.m_unit.getUnitToBaseFactor():1}querySpheroidData(e){this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal);const t=this.getGCS().getPECoordSys().getDatum().getSpheroid(),s=t.getFlattening();ku(e,t.getAxis(),s)}getAreaOfUse(){0===this.getCoordinateSystemType()&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)(""),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal);const e=this.m_peCoordSysVal.getAreaOfUse();return null===e?new ss:new ss({geom:e.clone(),sr:Ou(4326)})}getZToXYFactor(){return 1}isCustomWkid(){return!1}getOneDegreeGCSUnit(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getOneDegreeGCSUnit()}getGcsUnitFactor(){return this.throwIfNotGCSOrPCS(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.m_peCoordSysVal),this.m_peCoordSysVal.getGcsUnitFactor()}snapGeometry(e){if(e.isEmpty())return!1;if(2===this.m_precisionDescriptor.getPrecision())return!1;const t=e.getGeometryType();if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.i)(t))return this.snapMultiVertex_(e);if(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumPoint)return this.snapPoint_(e);if(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumEnvelope)return this.snapEnvelope_(e);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.f)(t))return this.snapSegment_(e);if(t===_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.G.enumGeometryCollection){const t=e;let s=!1;for(let e=0,n=t.getGeometryCount();e<n;++e)s=this.snapGeometry(t.getGeometry(e))||s;return s}(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("what else?")}snapMultiVertex_(e){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.isEmpty()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(2!==this.m_precisionDescriptor.getPrecision()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.h)(e.getGeometryType())){const t=e;if(t.hasNonLinearSegments())return this.snapGeometryWithCurves_(t)}const t=e.getImpl(),s=t.getDescription();let n=!1;for(let r=0,i=s.getAttributeCount();r<i;r++){const e=s.getSemantics(r),i=t.getAttributeStreamRef(e);n=this.snapAttributes(e,i,0,t.getPointCount())||n}return n&&t.notifyModifiedFlags(2001),n}snapPoint_(e){return!1}snapEnvelope_(e){return!1}snapSegment_(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.isEmpty()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(2!==this.m_precisionDescriptor.getPrecision());const t=new ac;this.queryPrecisionDescriptor(t);const s=e.getStartXY(),n=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;n.x=pc(s.x,t.getFalseX(),t.getGridUnitsXY()),n.y=pc(s.y,t.getFalseY(),t.getGridUnitsXY());let r=!n.equals(s);const i=e.getEndXY(),o=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.P;o.x=pc(i.x,t.getFalseX(),t.getGridUnitsXY()),o.y=pc(i.y,t.getFalseY(),t.getGridUnitsXY()),r||=!o.equals(i),r&&e.changeEndPoints2D(n,o);const h=(t,s,n)=>{let r=!1;{const i=e.getStartAttributeAsDbl(t,0),o=pc(i,s,n),a=!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(o,i);r||=a,a&&e.setStartAttribute(t,0,o)}{const i=e.getEndAttributeAsDbl(t,0),o=pc(i,s,n),a=!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(o,i);r||=a,a&&e.setEndAttribute(t,0,o)}return r};let m=r?1:0;return e.hasAttribute(1)&&(m|=h(1,t.getFalseZ(),t.getGridUnitsZ())?1:0),e.hasAttribute(2)&&(m|=h(2,t.getFalseM(),t.getGridUnitsM())?1:0),!!m}snapGeometryWithCurves_(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(!e.isEmpty()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(2!==this.m_precisionDescriptor.getPrecision());const t=e.createInstance(),s=new _MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.S;let n=0;for(let r=0,i=e.getPathCount();r<i;++r){const i=e.getSegmentCountPath(r);if(0===i){if(t.addPath(e,r,!0),1===t.getPathSize(r)){const e=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;t.getPointByVal(t.getPointCount()-1,e),n|=this.snapGeometry(e)?1:0,t.setPointByVal(t.getPointCount()-1,e)}continue}const o=e.isClosedPath(r);for(let a=0,h=o?i-1:i;a<h;++a)e.getSegmentFromPath(r,a,s,!1),n|=this.snapGeometry(s.get())?1:0,t.addSegment(s.get(),0===a);o&&(e.getSegmentFromPath(r,i-1,s,!1),n|=this.snapGeometry(s.get())?1:0,1===i?t.addPathFromClosedSegment(s.get(),!1):t.closeLastPathWithSegment(s.get()))}return n&&t.copyTo(e),!!n}snapAttributes(t,s,n,r){let i=!1;const o=new ac;if(this.queryPrecisionDescriptor(o),0===t){const t=s;for(let s=n;s<r;s++){const n=t.read(2*s),r=e.s_SnapValue(n,o.getFalseX(),o.getGridUnitsXY()),a=t.read(2*s+1),h=e.s_SnapValue(a,o.getFalseY(),o.getGridUnitsXY());i=i||r!==n||h!==a,i&&(t.write(2*s,r),t.write(2*s+1,h))}}else if(1===t){const t=s;for(let s=n;s<r;s++){const n=t.read(s),r=e.s_SnapValue(n,o.getFalseZ(),o.getGridUnitsZ());i=i||!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(r,n),i&&t.write(s,r)}}else if(2===t){const t=s;for(let s=n;s<r;s++){const n=t.read(s),r=e.s_SnapValue(n,o.getFalseM(),o.getGridUnitsM());i=i||!(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(r,n),i&&t.write(s,r)}}return i}static s_SnapValue(e,t,s){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)((e-t)*s)/s+t}};class ac{constructor(){const e=Du,t=1e-4,s=.001,n=t*Number(e)*.5;this.m_precision=1,this.m_falseX=-n,this.m_falseY=-n,this.m_unitsXY=Number(e)/(2*n),this.m_falseM=-1e5,this.m_unitsM=1/t,this.m_falseZ=-1e5,this.m_unitsZ=1/t,this.m_toleranceXY=s,this.m_toleranceM=s,this.m_toleranceZ=s}getHashCode(){let e=7777,t=7777;return t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(t,this.m_falseM),t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(t,this.m_unitsM),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,this.m_unitsXY),t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(t,this.m_toleranceXY),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,this.m_falseZ),t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(t,this.m_toleranceZ),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,this.m_unitsZ),t=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(t,this.m_toleranceM),e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,this.m_precision),(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,t)}clone(){const e=new ac;return e.m_falseX=this.m_falseX,e.m_falseY=this.m_falseY,e.m_unitsXY=this.m_unitsXY,e.m_falseZ=this.m_falseZ,e.m_unitsZ=this.m_unitsZ,e.m_falseM=this.m_falseM,e.m_unitsM=this.m_unitsM,e.m_toleranceXY=this.m_toleranceXY,e.m_toleranceZ=this.m_toleranceZ,e.m_toleranceM=this.m_toleranceM,e.m_precision=this.m_precision,e}assign(e){return this.m_falseX=e.m_falseX,this.m_falseY=e.m_falseY,this.m_unitsXY=e.m_unitsXY,this.m_falseZ=e.m_falseZ,this.m_unitsZ=e.m_unitsZ,this.m_falseM=e.m_falseM,this.m_unitsM=e.m_unitsM,this.m_toleranceXY=e.m_toleranceXY,this.m_toleranceZ=e.m_toleranceZ,this.m_toleranceM=e.m_toleranceM,this.m_precision=e.m_precision,this}initialize2D(e,t){}getTolerance(e){switch(e){case 0:return this.m_toleranceXY;case 1:return this.m_toleranceZ;case 2:return this.m_toleranceM;default:return 0}}getResolution(e){if(2===this.m_precision)return 0;switch(e){case 0:return 1/this.m_unitsXY;case 1:return 1/this.m_unitsZ;case 2:return 1/this.m_unitsM;default:return 0}}getFalseX(){return this.m_falseX}getFalseY(){return this.m_falseY}getFalseZ(){return this.m_falseZ}getFalseM(){return this.m_falseM}getGridUnitsXY(){return this.m_unitsXY}getGridUnitsZ(){return this.m_unitsZ}getGridUnitsM(){return this.m_unitsM}getPrecision(){return this.m_precision}static getLimit32(){return 2147483645}static getLimit64(){return 9007199254740990n}static getLimitFloat(){return 0}getXYGridRange(){const t=new _Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__.Envelope2D;switch(this.m_precision){case 0:{const e=ac.getLimit32()/this.getGridUnitsXY();t.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+e,ymax:this.getFalseY()+e})}break;case 1:{const e=Number(ac.getLimit64())/this.getGridUnitsXY();t.setCoords({xmin:this.getFalseX(),ymin:this.getFalseY(),xmax:this.getFalseX()+e,ymax:this.getFalseY()+e})}break;case 2:t.setCoords({xmin:-Number.MAX_VALUE,ymin:-Number.MAX_VALUE,xmax:Number.MAX_VALUE,ymax:Number.MAX_VALUE});break;default:t.setEmpty(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}return t}getZGridRange(){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;switch(this.m_precision){case 0:{const t=ac.getLimit32()/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+t)}break;case 1:{const t=Number(ac.getLimit64())/this.getGridUnitsZ();e.setCoords(this.getFalseZ(),this.getFalseZ()+t)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}return e}getMGridRange(){const e=new _Point2D_js__WEBPACK_IMPORTED_MODULE_4__.E;switch(this.m_precision){case 0:{const t=ac.getLimit32()/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+t)}break;case 1:{const t=Number(ac.getLimit64())/this.getGridUnitsM();e.setCoords(this.getFalseM(),this.getFalseM()+t)}break;case 2:e.setCoords(-Number.MAX_VALUE,Number.MAX_VALUE);break;default:e.setEmpty(),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.d)("")}return e}setTolerance(e,s){switch(s<0&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("tol < 0"),Number.isFinite(s)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("tol is not finite"),e){case 0:this.m_toleranceXY=s;break;case 1:this.m_toleranceZ=s;break;case 2:this.m_toleranceM=s;break;default:(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("cannot set tolerance for this attribute")}}setGridParams(e,s,n){Number.isFinite(e)&&Number.isFinite(s)&&Number.isFinite(n)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid params are not finite"),n<1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid units cannot be smaller than 1.0"),this.m_falseX=e,this.m_falseY=s,this.m_unitsXY=n}setZParams(e,s){Number.isFinite(e)&&Number.isFinite(s)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid params are not finite"),s<1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid units cannot be smaller than 1.0"),this.m_falseZ=e,this.m_unitsZ=s}setMParams(e,s){Number.isFinite(e)&&Number.isFinite(s)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid params are not finite"),s<1&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("grid units cannot be smaller than 1.0"),this.m_falseM=e,this.m_unitsM=s}setPrecision(e){}equals(e){return this===e||(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_falseX,e.m_falseX)&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.Q)(this.m_falseY,e.m_falseY)&&this.equalsWithoutFalseXY(e)}snapPrecision(){if(2===this.m_precision)return;const e=(e,t,s,n)=>{if(!Number.isFinite(t)||!Number.isFinite(s))return s;if(s<1)return 1;if(!n)return s;const r=Number(e)/s;return Math.trunc((t+r-t)*s)>e&&(s=e/(t+r-t)),Math.max(1,s)},t=Number(0===this.m_precision?Gu:Du);this.m_unitsXY=e(t,this.m_falseX,this.m_unitsXY,!0),this.m_unitsXY=e(t,this.m_falseY,this.m_unitsXY,!0),this.m_unitsZ=e(t,this.m_falseZ,this.m_unitsZ,!1),this.m_unitsM=e(t,this.m_falseM,this.m_unitsM,!1)}verifyPrecision(){if(2===this.m_precision)return!0;const e=(e,t,s,n)=>{if(s<1)return!1;if(!Number.isFinite(t)||!Number.isFinite(s))return!1;if(!n)return!0;const r=Number(e)/s;return!(BigInt((t+r-t)*s)>e)},t=0===this.m_precision?Gu:Du;return!!e(t,this.m_falseX,this.m_unitsXY,!0)&&(!!e(t,this.m_falseY,this.m_unitsXY,!0)&&(!!e(t,this.m_falseZ,this.m_unitsZ,!1)&&!!e(t,this.m_falseM,this.m_unitsM,!1)))}fixTolerance(){2!==this.m_precision&&(this.m_toleranceXY=Math.max(2/this.m_unitsXY,this.m_toleranceXY),this.m_toleranceZ=Math.max(2/this.m_unitsZ,this.m_toleranceZ),this.m_toleranceM=Math.max(2/this.m_unitsM,this.m_toleranceM),(Number.isNaN(this.m_falseX)||Number.isNaN(this.m_falseY))&&(this.m_falseX=this.m_falseY=Number.NaN))}equalsWithoutFalseXY(e){return this===e||this.m_unitsXY===e.m_unitsXY&&this.m_falseZ===e.m_falseZ&&this.m_unitsZ===e.m_unitsZ&&this.m_falseM===e.m_falseM&&this.m_unitsM===e.m_unitsM&&this.m_toleranceXY===e.m_toleranceXY&&this.m_toleranceZ===e.m_toleranceZ&&this.m_toleranceM===e.m_toleranceM&&this.m_precision===e.m_precision}setBestXyDomainFromEnvelope(e,t){}setBestZDomainFromZRange(e,t,s){}setBestMDomainFromMRange(e,t,s){}}function hc(){return(!nc||Uu()&&null===nc.getPECoordSys())&&(nc=dc(3857,0,null,!0)),nc}function mc(){return(!rc||Uu()&&null===rc.getPECoordSys())&&(rc=dc(102100,0,null,!0)),rc}function lc(){return(!ic||Uu()&&null===ic.getPECoordSys())&&(ic=dc(4326,0,null,!0)),ic}function gc(e){e.m_falseX=0,e.m_falseY=0,e.m_unitsXY=1,e.m_falseZ=0,e.m_unitsZ=1,e.m_falseM=0,e.m_unitsM=1,e.m_toleranceXY=100*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.O)(),e.m_toleranceZ=100*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.O)(),e.m_toleranceM=100*(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.O)(),e.m_precision=2}function uc(e,s,n,r){const i=s instanceof qg;gc(e),e.m_precision=r,e.m_falseX=Number.NaN,e.m_falseY=Number.NaN;const o=1e-4,a=.001,h=i?s.m_csType:s.isPCS?2:1;if(1===h){const t=(0===r?1/18e5:1e-9)*(i?s.getOneDegreeGCSUnit():Math.PI/s.metersOrRadiansPerUnit/180);e.m_unitsXY=1/t}else if(2===h){const t=(0===r?a:o)*(i?s.getOneMeterPCSUnit():1/s.metersOrRadiansPerUnit);e.m_unitsXY=1/t}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("unrecognized cs type");e.m_falseM=-1e5,e.m_unitsM=1/(0===r?a:o),e.m_unitsM=Math.max(1,e.m_unitsM),e.m_unitsXY=Math.max(1,e.m_unitsXY);let m=0,l=0;0!==r&&1!==r||(m=2/e.m_unitsXY,l=2/e.m_unitsM),e.m_toleranceXY=Math.max(m,i?s.getUnitsPerMillimeter():2===h?.001/s.metersOrRadiansPerUnit:.001/(s.semiMajor*s.metersOrRadiansPerUnit)),e.m_toleranceM=Math.max(a,l),cc(e,n)}function cc(e,t){const s=1e-4,n=.001;if(e.m_falseZ=-1e5,t){const r=(0===e.m_precision?n:s)*t.getOneMeter();e.m_unitsZ=1/r}else e.m_unitsZ=1/(0===e.m_precision?n:s);e.m_unitsZ=Math.max(1,e.m_unitsZ);let r=0;0!==e.m_precision&&1!==e.m_precision||(r=2/e.m_unitsZ),e.m_toleranceZ=Math.max(t?t.getOneMeter()*n:n,r)}function _c(e,t,s,n){gc(e),e.m_precision=n;const r=0===n?Gu:Du,i=1e-4,o=.001;let a=1,h=1,m=.001;t&&(h=t.getUnitToBaseFactor()),t&&1===t.getUnitType()?(a=400*Math.PI/180,m=8.983152841195215e-9*Math.PI/180/h):(a=(0===n?o:i)*Number(r)*.5,m=o/h),a/=h,e.m_falseX=-a,e.m_falseY=-a,e.m_unitsXY=Number(r)/(2*a),e.m_falseM=-1e5,e.m_unitsM=1/(0===n?o:i),e.m_unitsM=Math.max(1,e.m_unitsM),e.snapPrecision();let l=0,g=0;0!==e.m_precision&&1!==e.m_precision||(g=2/e.m_unitsM,l=2/e.m_unitsXY),e.m_toleranceXY=Math.max(l,m),e.m_toleranceM=Math.max(o,g),cc(e,s)}function dc(e,t,s,n){if(!n&&t<=0){if(3857===e)return hc();if(102100===e)return mc();if(4326===e)return lc()}const r=new oc;let i,o=null;return Uu()?(i=iu(e),t>0?o=null:t=0,r.setHorzProj_(i),r.m_vertcs=o):(i=Ac(e),r.m_unit=i.isPCS?new bu(i.metersOrRadiansPerUnit):new os(i.metersOrRadiansPerUnit)),uc(r.m_precisionDescriptor,i,o,1),r.m_bDefaultDescriptor=!0,r.m_userWKID=e,r.calculateHashCode(),r.initDbgName(),r}function pc(e,t,s){return (0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.ax)((e-t)*s)/s+t}let fc=null;const xc=3552713678800501e-30;function yc(e,t,s){return e===t||Math.abs(e-t)<=s*(1+(Math.abs(e)+Math.abs(t))/2)}function Pc(e,t){return yc(e,t,xc)}function Ec(e,t){return 0===e||Math.abs(e)<=t}function Sc(e){return Ec(e,xc)}let Cc,Ic,bc,wc,vc,Nc,Tc,Gc,Dc,Vc,Fc;function Hc(e){return{_this:e,get(){return this._this},reset(e){this._this=e},release(){const e=this._this;return this._this=null,e}}}let kc=null;function Ac(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(kc);const t=kc(e);return t.semiMajor=t.isPCS?Number.NaN:Rc(e),t}function Mc(e){kc=e,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(kc)}function Uc(e){const t=e;Ic=t.PeFactory,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Ic),Fc=t.PeGCSExtent,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Fc),Dc=t.PeLineType,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Dc),Vc=t.PeMath,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Vc),Cc=t.PeDouble,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Cc),bc=t.PeDefs,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(bc),wc=t.PeCSTransformations,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(wc),vc=t.PeGTTransformations,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(vc),Nc=t.PePCSInfo,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Nc),Tc=t.PeGTlistExtended,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Tc),Ic.initialize(),Gc=t.PeGTlistExtendedEntry,(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(Gc),bc.PE_TYPE_ANGUNIT=512,bc.PE_STR_AUTH_ALL=2,Nc.PE_POLE_LINE_STRAIGHT=2,Nc.PE_POLE_LINE_CURVED=3,bc.PE_PARM_LAM0=2,bc.PE_PARM_PHI0=6,bc.PE_PRJ_AZIMUTHAL_EQUIDISTANT=43032,bc.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA=43033,bc.PE_PRJ_ALBERS=43007,bc.PE_PRJ_CYLINDRICAL_EQAREA=43034,bc.PE_TYPE_VERTCS=8,bc.PE_LINETYPE_GEODESIC=0,bc.PE_LINETYPE_LOXODROME=1,bc.PE_LINETYPE_GREAT_ELLIPTIC=2,bc.PE_LINETYPE_NORMAL_SECTION=3,Tc.PE_GTLIST_OPTS_USABLE=1,kc=null}function qc(e,t,s,n){return t<=0?(s[0]=0,n[0]=0,!1):(s[0]=t,n[0]=t,!0)}function Bc(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(qu());return!!kc(e).isPCS||Oc(e)}function Oc(e){return Ic&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("pe has been loaded. no-pe methods should not be used at this point."),fc||Xc(),fc.has(e)}const Yc=/(?:ELLIPSOID|SPHEROID)\["(?:\w|[-()])+",(\d+\.\d+)/;function Rc(e){if(Ic&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("pe has been loaded. no-pe methods should not be used at this point."),"string"==typeof e){const s=e.match(Yc);s&&2===s.length||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("bad gcs wkt");const n=Number.parseFloat(s[1]);return Number.isFinite(n)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.a)("bad gcs wkt"),n}return fc||Xc(),fc.has(e)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.p)("gcs wkid not found"),fc.get(e)}function Xc(){fc=new Map;for(const e in rs){const t=Number.parseFloat(e),s=rs[e];if(Array.isArray(s))for(const e of s)fc.set(e,t);else fc.set(s,t)}is()}function Lc(e,t){const s=Ic.geogtran(e);s||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.C)(e);return new Kc(s,t)}function zc(e,t){const s=Ic.fromString(bc.PE_TYPE_GEOGTRAN,e);s||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.D)(e);return new Kc(s,t)}function Wc(e,t){return new Kc(e,t)}const jc=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(0),Zc=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.au)(1);let Kc=class e{constructor(t,s){if(t instanceof e)return this.m_geogTranWrapper=t.m_geogTranWrapper,this.m_bInverted=s?!t.m_bInverted:t.m_bInverted,void(this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_geogTranWrapper.getHashCode(),this.m_bInverted?Zc:jc));this.m_geogTranWrapper=new Um(t),this.m_bInverted=s,this.m_hashCode=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(this.m_geogTranWrapper.getHashCode(),this.m_bInverted?Zc:jc)}getID(){return this.m_geogTranWrapper.getLatestId()}getLatestID(){return this.m_geogTranWrapper.getLatestId()}getText(){return this.m_geogTranWrapper.getText()}getTextExtended(e){if(!this.m_geogTranWrapper.getGeogtran())return"";if(-1===e)return this.m_geogTranWrapper.getGeogtran().toString();{const t=0===e?bc.PE_STR_AUTH_TOP:bc.PE_STR_AUTH_ALL;return this.m_geogTranWrapper.getGeogtran().toString(t)}}getText2(e=-1){let t=bc.PE_STR_FMT_WKT2;return-1!==e&&(t|=0===e?bc.PE_STR_AUTH_TOP:bc.PE_STR_AUTH_ALL),this.m_geogTranWrapper.getGeogtran().toString(t)}getName(){return this.m_geogTranWrapper&&this.m_geogTranWrapper.getGeogtran()?this.m_geogTranWrapper.getGeogtran().getName():""}getInputSpatialReference(){return this.m_bInverted?this.m_geogTranWrapper.getOutputSr(!1):this.m_geogTranWrapper.getInputSr(!1)}getOutputSpatialReference(){return this.m_bInverted?this.m_geogTranWrapper.getInputSr(!1):this.m_geogTranWrapper.getOutputSr(!1)}getInverse(){return new e(this,!0)}isInverted(){return this.m_bInverted}getHashCode(){return this.m_hashCode}GetPeGeogtran(){return this.m_geogTranWrapper.getGeogtran()}equals(e){const t=e;return t===this||this.m_bInverted===t.m_bInverted&&(this.GetPeGeogtran()===t.GetPeGeogtran()||this.getID()===t.getID()&&!(0===this.getID()&&!this.GetPeGeogtran().isEqual(t.GetPeGeogtran())))}referencesMissingData(){return!!this.m_geogTranWrapper&&!this.m_geogTranWrapper.isUsable()}getWrapper(){return this.m_geogTranWrapper}};function Qc(e,t,s,n,r){const i=e.getGCS(),o=t.getGCS(),h=i.getPECoordSys(),m=o.getPECoordSys();let l=null;if(!s.isEmpty()){const t=s.clone();if(!t.isEmpty()&&2===e.getCoordinateSystemType()){let s=new _Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({env2D:t});const n=Rg(e,i,null);s=(new qh).execute(s,n,null),s.queryEnvelope(t)}if(!t.isEmpty()){const e=h.getPrimem().getLongitude(),s=h.getUnit().getUnitFactor();l=new Fc(t.xmin,t.ymin,t.xmax,t.ymax,e,s)}}let g=n;g>=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.i)()&&(g=0);const u=[];let c=Tc.PE_GTLIST_OPTS_COMMON;r||(c&=~Tc.PE_GTLIST_OPTS_USABLE);for(let _=0;_<2;_++){u.length=0;const e=g,t=Tc.getGTlist(h,m,2,c,l,e);let s=!1;if(t&&t.length>0)for(let i=0,o=t.length;i<o;i++){const e=Jc([t[i]]);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(e),r&&e.referencesMissingData())s=!0;else if(u.push(e),n>0&&u.length===n)break}if(!s)break;0===g||(g=0)}return l&&l.destroy(),u}function Jc(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(null!==e);const t=new e_,s=e[0].getSteps();if(s){const n=e[0].getEntries();for(let e=0;e<s;e++){const s=0!==n[e].getDirection(),r=Wc(n[e].getGeogtran(),s);t.add(r)}return t.create()}return null}let $c=class{constructor(e,t,s,n){this.m_bReadOnly=!0,this.m_name="",this.m_fastTrack=-1,this.m_bNameIsSet=!1,this.m_transforms=e,t&&(this.m_name=t,this.m_bNameIsSet=!0),this.m_inputSr=s,this.m_outputSr=n}getType(){return 0}getName(){if(this.m_bNameIsSet)return this.m_name;if(0===this.m_transforms.length)return"";let e="";for(const t of this.m_transforms)e.length>0&&(e+=" + "),t.isInverted()&&(e+="~"),e+=t.getName();return e}count(){return this.m_transforms.length}createInverse(){return this.getInverse()}getHashCode(){let e=1973;for(let t=0;t<this.m_transforms.length;t++)e=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.at)(e,this.m_transforms[t].getHashCode());return e}equals(e){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}referencesMissingData(){if(0===this.m_transforms.length)return!1;for(const e of this.m_transforms)if(e.referencesMissingData())return!0;return!1}isMatchingTransformation(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}validateTransformation(e,t){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}nameIsSet(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0),!1}getInputSpatialReference(){return this.m_inputSr}getOutputSpatialReference(){return this.m_outputSr}getStep(e){return(e<0||e>this.count())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.q)(""),this.m_transforms[e]}getInverse(){const e=new e_;return e.addSteps(this,!0),e.setInputSpatialReference(this.m_outputSr),e.setOutputSpatialReference(this.m_inputSr),e.create()}transform(e,t,s){if(0===this.count())return;let n=this.m_inputSr,r=this.m_outputSr;if(e&&(r=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_4__.c)(n,n=r)),0===this.m_transforms.length)return void qm(n,null,r,null,t,null,s);let i=this.m_fastTrack;if(1===i)return void (0,_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__.a8)(e,this.m_transforms,(n=>{Xm(n.getWrapper(),e!==n.isInverted(),t,null,s)}));const o=Mm();-1===i&&o.initFromGcsAndVcs(n,null);const a=Mm();let h=e?this.m_transforms.length-1:0;const m=e?-1:1;for(let g=0,u=this.m_transforms.length;g<u;g++,h+=m){if(0===g){const r=this.m_transforms[h];Bm(n.getPECoordSys(),null,r.getWrapper(),e!==r.isInverted(),t,null,s,a),-1===i&&(o.equals(a)||(i=0)),o.assign(a)}else{const n=this.m_transforms[h-m],r=this.m_transforms[h];Ym(o,n.getWrapper(),e!==n.isInverted(),r.getWrapper(),e!==r.isInverted(),t,null,s,a),-1===i&&(o.equals(a)||(i=0)),o.assign(a)}const r=this.m_transforms[h];Rm(o,r.getWrapper(),e!==r.isInverted(),t,null,s,a),o.assign(a)}const l=this.m_transforms[h-m];Om(o,l.getWrapper(),e!==l.isInverted(),r,null,t,null,s),-1===i&&(a.initFromGcsAndVcs(r,null),o.equals(a)||(i=0)),this.m_fastTrack=0===i?0:1}};class e_{constructor(){this.m_transforms=[],this.m_inputGCS=null,this.m_outputGCS=null,this.m_name="",this.m_bNameIsSet=!1}getInputSpatialReference(){return null!==this.m_inputGCS?this.m_inputGCS:this.count()>0?this.m_transforms[0].getInputSpatialReference():null}setInputSpatialReference(e){this.m_inputGCS=e?e.getGCS():null}getOutputSpatialReference(){return null!==this.m_outputGCS?this.m_outputGCS:this.count()>0?this.m_transforms.at(-1).getOutputSpatialReference():null}setOutputSpatialReference(e){this.m_outputGCS=e?e.getGCS():null}getName(){if(this.m_bNameIsSet)return this.m_name;if(0===this.m_transforms.length)return"";let e="";for(const t of this.m_transforms)e.length>0&&(e+=" + "),t.isInverted()&&(e+="~"),e+=t.getName();return e}count(){return this.m_transforms.length}getStep(e){return(e<0||e>this.count())&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.q)(""),this.m_transforms[e]}setStep(e,t){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}add(e){this.m_transforms.push(e)}addSteps(e,t){if(t)for(let s=e.count()-1;s>=0;--s)this.add(e.getStep(s).getInverse());else for(let s=0;s<e.count();++s)this.add(e.getStep(s))}clear(){this.m_transforms=[],this.m_name="",this.m_bNameIsSet=!1,this.m_inputGCS=null,this.m_outputGCS=null}remove(e){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_1__.g)(0)}create(){const e=this.getInputSpatialReference(),t=this.getOutputSpatialReference(),s=new $c(this.m_transforms,this.m_bNameIsSet?this.m_name:null,e,t);return s.m_bReadOnly=!0,this.clear(),s}}const t_=Object.freeze(Object.defineProperty({__proto__:null,SpatialReference:oc,SpatialReferencePrecisionDescriptor:ac,create:Ou,createFromWKT:Yu,createImplFromPe:Ru,createLocal:Wu,createWithNewPrecision:Lu,createWithNewVCS:zu,getGCS:Zu,getTempName:tc,hasNoPe:qu,hasPe:Uu,injectNoPe:Mu,injectPe:Au,isInitialized:Bu,isTempName:sc,isValidWkid:Ku,isValidWkt:Qu,makeSpheroidData:Hu,snapGeometry:ju,webMercator:hc,webMercator102100:mc,wgs84:lc},Symbol.toStringTag,{value:"Module"})),s_=Object.freeze(Object.defineProperty({__proto__:null,OperatorProject:qh},Symbol.toStringTag,{value:"Module"})),n_=Object.freeze(Object.defineProperty({__proto__:null,CompositeGeographicTransformation:$c,CompositeGeographicTransformationEditor:e_,createImpl:Jc,queryGtListImpl:Qc},Symbol.toStringTag,{value:"Module"})),r_=Object.freeze(Object.defineProperty({__proto__:null,GeographicTransformation:Kc,create:Lc,createFromPe:Wc,createFromWKT:zc},Symbol.toStringTag,{value:"Module"})),i_=Object.freeze(Object.defineProperty({__proto__:null,ProjectionTransformation:eu,create:Og,createEx:Rg,createFromAoi:Yg,createImplEx:Lg,makeExtendedParams:Wg,makeExtendedParamsInternal:Qg,queryTransformationList:zg},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 50126:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ C),
/* harmony export */   b: () => (/* binding */ P),
/* harmony export */   r: () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(33045);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(56289);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6821);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(2119);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(88960);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(23233);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(74767);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(45393);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(17983);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(82088);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(58376);
/* harmony import */ var _views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(19274);
/* harmony import */ var _views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(16906);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(96028);
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(63199);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const j=1;function P(P){const C=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_20__/* .ShaderBuilder */ .N5,{attributes:F,varyings:A,vertex:R,fragment:z}=C,{applyMarkerOffset:T,draped:V,output:W,capType:E,stippleEnabled:O,falloffEnabled:M,roundJoins:N,wireframe:_,innerColorEnabled:I}=P;z.include(_views_3d_webgl_engine_core_shaderLibrary_shading_PiUtils_glsl_js__WEBPACK_IMPORTED_MODULE_21__/* .PiUtils */ .p),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_RibbonVertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .RibbonVertexPosition */ .s,P),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .LineStipple */ .q,P),C.include(_views_3d_webgl_engine_core_shaderLibrary_attributes_ObjectAndLayerIdColor_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ObjectAndLayerIdColor */ .g,P),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .terrainDepthTest */ .Z,P);const k=T&&!V;k&&(R.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("markerScale",(e=>e.markerScale))),C.include(_views_3d_webgl_engine_core_shaderLibrary_shading_MarkerSizing_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .MarkerSizing */ .r,{space:_views_3d_webgl_engine_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_17__/* .LineMarkerSpace */ .lM.World})),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addProjViewLocalOrigin */ .NB)(R,P),R.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Matrix4BindUniform_js__WEBPACK_IMPORTED_MODULE_15__/* .Matrix4BindUniform */ .F("inverseProjectionMatrix",(e=>e.camera.inverseProjectionMatrix)),new _views_3d_webgl_engine_core_shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Float2BindUniform */ .E("nearFar",(e=>e.camera.nearFar)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("miterLimit",(e=>"miter"!==e.join?0:e.miterLimit)),new _views_3d_webgl_engine_core_shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_10__/* .Float4BindUniform */ .I("viewport",(e=>e.camera.fullViewport))),R.constants.add("LARGE_HALF_FLOAT","float",65500),F.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.POSITION,"vec3"),F.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.PREVIOUSDELTA,"vec4"),F.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.NEXTDELTA,"vec4"),F.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.LINEPARAMETERS,"vec2"),F.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_16__/* .VertexAttribute */ .r.U0,"float"),A.add("vColor","vec4"),A.add("vpos","vec3",{invariant:!0}),A.add("vLineDistance","float"),A.add("vLineWidth","float");const U=O;U&&A.add("vLineSizeInv","float");const B=E===_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__/* .CapType */ .x.ROUND,$=O&&B,H=M||$;H&&A.add("vLineDistanceNorm","float"),B&&(A.add("vSegmentSDF","float"),A.add("vReverseSegmentSDF","float")),R.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec2 perpendicular(vec2 v) {
return vec2(v.y, -v.x);
}
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`),R.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`),R.code.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
float vnp = nearFar[0] * 0.99;
if(pos.z > -nearFar[0]) {
if (!isStartVertex) {
if(prev.z < -nearFar[0]) {
pos = mix(prev, pos, interp(vnp, prev, pos));
next = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
} else {
if(next.z < -nearFar[0]) {
pos = mix(pos, next, interp(vnp, pos, next));
prev = pos;
} else {
pos = vec4(0.0, 0.0, 0.0, 1.0);
}
}
} else {
if (prev.z > -nearFar[0]) {
prev = mix(pos, prev, interp(vnp, pos, prev));
}
if (next.z > -nearFar[0]) {
next = mix(next, pos, interp(vnp, next, pos));
}
}
forwardViewPosDepth(pos.xyz);
pos = projectAndScale(pos);
next = projectAndScale(next);
prev = projectAndScale(prev);
}`),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_8__/* .addPixelRatio */ .Nz)(R),R.constants.add("aaWidth","float",O?0:1).main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
    // unpack values from vertex type
    bool isStartVertex = abs(abs(lineParameters.y)-3.0) == 1.0;
    vec3 prevPosition = position + previousDelta.xyz * previousDelta.w;
    vec3 nextPosition = position + nextDelta.xyz * nextDelta.w;

    float coverage = 1.0;

    // Check for special value of lineParameters.y which is used by the Renderer when graphics are removed before the
    // VBO is recompacted. If this is the case, then we just project outside of clip space.
    if (lineParameters.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(lineParameters.y) < 3.0;
      float lineSize = getSize();

      if (lineSize < 1.0) {
        coverage = lineSize; // convert sub-pixel coverage to alpha
        lineSize = 1.0;
      }
      lineSize += aaWidth;

      float lineWidth = lineSize * pixelRatio;
      vLineWidth = lineWidth;
      ${U?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vLineSizeInv = 1.0 / lineSize;`:""}

      vec4 pos  = view * vec4(position, 1.0);
      vec4 prev = view * vec4(prevPosition, 1.0);
      vec4 next = view * vec4(nextPosition, 1.0);
  `),k&&R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`);(O||B)&&R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${B?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * lineParameters.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = perpendicular(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
float subdivisionFactor = lineParameters.x;
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`),N?R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = perpendicular(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = perpendicular(endDir);

        float factor = ${O?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`min(1.0, subdivisionFactor * ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H.float((j+2)/(j+1))})`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(lineParameters.y) * factor * rotationAngle);
      `):R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = perpendicular(joinDisplacementDir);`);const J=E!==_views_3d_webgl_engine_shaders_RibbonLineTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_19__/* .CapType */ .x.BUTT;return R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = perpendicular(joinDisplacementDir);

      ${J?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(lineParameters.y) * displacementLen + capDisplacementDir * displacementLen;
    float lineDistNorm = sign(lineParameters.y) * pos.w;

    vLineDistance =  lineWidth * lineDistNorm;
    ${H?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `),B&&R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),O&&(V?R.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_12__/* .FloatBindUniform */ .U("worldToScreenRatio",(e=>1/e.screenToPCSRatio))):R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec3 segmentCenter = mix((nextPosition + position) * 0.5, (position + prevPosition) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(nextPosition - position, position - prevPosition, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),V?R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = u0 * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float startPseudoScreen = mix(u0, u0 - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),R.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("stipplePatternPixelSize",(e=>(0,_views_3d_webgl_engine_core_shaderLibrary_shading_LineStipple_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .computePixelSize */ .h)(e)))),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`)),R.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${_&&!V?"pos.z -= 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }`),C.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .SliceDraw */ .HQ,P),C.include(_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_18__/* .outputColorHighlightOID */ .z,P),z.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_7__/* .ColorConversion */ .a),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`discardBySlice(vpos);
discardByTerrainDepth();`),_?z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(B&&z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
        float sdf = min(vSegmentSDF, vReverseSegmentSDF);
        vec2 fragmentPosition = vec2(
          min(sdf, 0.0),
          vLineDistance
        ) * gl_FragCoord.w;

        float fragmentRadius = length(fragmentPosition);
        float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
        float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

        if (capCoverage < ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .alphaCutoff */ .Q)}) {
          discard;
        }
      `),$?z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .alphaCutoff */ .Q)}, stippleCoverage);
      `):z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float stippleAlpha = getStippleAlpha();`),W!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor&&z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`discardByStippleAlpha(stippleAlpha, ${_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_22__/* .alphaCutoff */ .Q)});`),z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .Float4PassUniform */ .E("intrinsicColor",(e=>e.color))),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 color = intrinsicColor * vColor;`),I&&(z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_11__/* .Float4PassUniform */ .E("innerColor",(e=>e.innerColor??e.color)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("innerWidth",((e,i)=>e.innerWidth*i.camera.pixelRatio))),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`vec4 finalColor = blendStipple(color, stippleAlpha);`),M&&(z.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_13__/* .FloatPassUniform */ .m("falloff",(e=>e.falloff))),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)),O||z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`float featherStartDistance = max(vLineWidth - 2.0, 0.0);
float value = abs(vLineDistance) * gl_FragCoord.w;
float feather = (value - featherStartDistance) / (vLineWidth - featherStartDistance);
finalColor.a *= 1.0 - clamp(feather, 0.0, 1.0);`)),z.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_14__/* .glsl */ .H)`outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),C}const C=Object.freeze(Object.defineProperty({__proto__:null,build:P,ribbonlineNumRoundJoinSubdivisions:j},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 86451:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ u),
/* harmony export */   b: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(28152);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSizeScaling_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(80010);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1110);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(66012);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(23233);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89002);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19274);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function w(e){const w=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_12__/* .ShaderBuilder */ .N5;w.include(_views_3d_webgl_engine_core_shaderLibrary_Transform_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .Transform */ .d,e),w.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSizeScaling_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSizeScaling */ .L,e),w.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .SliceDraw */ .HQ,e),w.include(_views_3d_webgl_engine_shaders_OutputColorHighlightOID_glsl_js__WEBPACK_IMPORTED_MODULE_11__/* .outputColorHighlightOID */ .z,e),w.include(_views_3d_webgl_engine_core_shaderLibrary_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .terrainDepthTest */ .Z,e);const{vertex:b,fragment:u}=w;return u.include(_views_3d_webgl_engine_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorConversion */ .a),(0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .addProjViewLocalOrigin */ .NB)(b,e),u.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Float4PassUniform */ .E("uColor",(e=>e.color))),w.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,"vec3"),w.varyings.add("vWorldPosition","vec3"),e.screenSizeEnabled&&w.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.OFFSET,"vec3"),e.shadingEnabled&&((0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .addViewNormal */ .S7)(b),w.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.NORMAL,"vec3"),w.varyings.add("vViewNormal","vec3"),u.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Float3PassUniform */ .t("shadingDirection",(e=>e.shadingDirection))),u.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Float4PassUniform */ .E("shadedColor",(e=>f(e.shadingTint,e.color))))),b.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
      vWorldPosition = ${e.screenSizeEnabled?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`screenSizeScaling(offset, position)`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`position`};
      ${e.shadingEnabled?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 worldNormal = normal;
                 vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`:""}
      forwardViewPosDepth((view * vec4(vWorldPosition, 1.0)).xyz);
      gl_Position = transformPosition(proj, view, vWorldPosition);
  `),u.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`
      discardBySlice(vWorldPosition);
      discardByTerrainDepth();
      ${e.shadingEnabled?(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec3 viewNormalNorm = normalize(vViewNormal);
             float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);
             vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`:(0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_9__/* .glsl */ .H)`vec4 finalColor = uColor;`}
      outputColorHighlightOID(finalColor, vWorldPosition, finalColor.rgb);`),w}function f(e,r){const o=1-e[3],i=e[3]+r[3]*o;return 0===i?(b[3]=i,b):(b[0]=(e[0]*e[3]+r[0]*r[3]*o)/i,b[1]=(e[1]*e[3]+r[1]*r[3]*o)/i,b[2]=(e[2]*e[3]+r[2]*r[3]*o)/i,b[3]=r[3],b)}const b=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)(),u=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 50256:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ t),
/* harmony export */   S: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony export O */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{*[Symbol.iterator](){let t=this.next();for(;t;)yield t,t=this.next()}}class e extends (/* unused pure expression or super */ null && (t)){}class s extends t{constructor(t){super(),this.m_iGeom=-1,this.m_aGeoms=t?t.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const t=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,t}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}


/***/ }),

/***/ 78699:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ l),
/* harmony export */   b: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63592);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1411);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50645);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function g(g){const l=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__/* .ShaderBuilder */ .N5,{vertex:t,fragment:s,attributes:n,varyings:c}=l;return (0,_views_3d_webgl_engine_core_shaderLibrary_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addProjViewLocalOrigin */ .NB)(t,g),n.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexAttribute */ .r.POSITION,"vec3"),n.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexAttribute */ .r.UV0,"vec2"),c.add("vUV","vec2"),t.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vUV = uv0;
gl_Position = proj * view * vec4(position, 1.0);`),s.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float4PassUniform */ .E("backgroundColor",(e=>e.backgroundColor)),new _views_3d_webgl_engine_core_shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float4PassUniform */ .E("gridColor",(e=>e.gridColor)),new _views_3d_webgl_engine_core_shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("gridWidth",(e=>e.gridWidth))).main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`const float LINE_WIDTH = 1.0;
vec2 uvScaled = vUV * gridWidth;
vec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));
vec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);
grid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);
grid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);
float gridFade = max(grid.x, grid.y);
float gridAlpha = gridColor.a * gridFade;
fragColor =
vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +
vec4(gridColor.rgb, 1.0) * gridAlpha;`),l}const l=Object.freeze(Object.defineProperty({__proto__:null,build:g},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 52377:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ a),
/* harmony export */   a: () => (/* binding */ m),
/* harmony export */   b: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16961);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60840);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(79856);
/* harmony import */ var _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22005);
/* harmony import */ var _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(96028);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends _views_webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_5__/* .NoParameters */ .Y{constructor(){super(...arguments),this.color=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(1,1,1)}}function n(){const e=new _views_webgl_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_6__/* .ShaderBuilder */ .N5;return e.include(_views_3d_webgl_engine_core_shaderLibrary_ScreenSpacePass_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSpacePass */ .c),e.fragment.uniforms.add(new _views_3d_webgl_engine_core_shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DPassUniform */ .N("tex",(e=>e.texture)),new _views_3d_webgl_engine_core_shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("uColor",(e=>e.color))),e.fragment.main.add((0,_views_3d_webgl_engine_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec4 texColor = texture(tex, uv);
fragColor = texColor * vec4(uColor, 1.0);`),e}const m=Object.freeze(Object.defineProperty({__proto__:null,TextureOnlyPassParameters:a,build:n},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 33147:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/* harmony import */ var _Point2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86330);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class y{constructor(t,s,o){if(t instanceof y)return this.data=t.data,this.N=t.N,this.M=t.M,t.data=null,t.N=0,void(t.M=0);this.data=t,this.N=s,this.M=o}assignCopy(s){return this===s||((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N*this.M===s.N*s.M),this.data.set(s.data),this.N=s.N,this.M=s.M),this}setZero(){return this.data?.fill(0),this}setIdentity(){const t=0,s=1;for(let o=0;o<this.N;o++)for(let i=0;i<this.M;i++)this.setRowCol(o,i,o===i?s:t);return this}rows(){return this.N}cols(){return this.M}row(s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),{}}set(t,s){return this.data[t]=s,this}setRowCol(t,s,o){return this.data[t*this.M+s]=o,this}at(t){return this.data[t]}atRowCol(t,s){return this.data[t*this.M+s]}mulScalar(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}mul(s,o){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.M===s.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N===o.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s.cols()===o.cols()),o===this){const t=new Float64Array(this.N*this.M),i=new y(t,this.N,this.M);return this.mul(s,i),void o.assignCopy(i)}if(o===s){const t=new Float64Array(s.N*s.M),i=new y(t,s.N,s.M);return this.mul(s,i),void o.assignCopy(i)}const i=s.cols();for(let t=0;t<this.N;t++)for(let e=0;e<i;e++){let i=0;for(let o=0;o<this.M;o++)i+=this.atRowCol(t,o)*s.atRowCol(o,e);o.setRowCol(t,e,i)}}mulTranspose(s,o){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.M===s.cols()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N===o.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s.rows()===o.cols()),o===this){const t=new Float64Array(this.N*this.M),i=new y(t,this.N,this.M);return this.mulTranspose(s,i),void o.assignCopy(i)}if(o===s){const t=new Float64Array(s.N*s.M),i=new y(t,s.N,s.M);return this.mulTranspose(s,i),void o.assignCopy(i)}const i=s.rows();for(let t=0;t<this.N;t++)for(let e=0;e<i;e++){let i=0;for(let o=0;o<this.M;o++)i+=this.atRowCol(t,o)*s.atRowCol(e,o);o.setRowCol(t,e,i)}}mulLeft(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}mulLeftTranspose(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}mulDiag(s,o){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.M===s.N*s.M),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N===o.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.M===o.cols()),o===this){const t=new Float64Array(this.N*this.M),i=new y(t,this.N,this.M);return this.mulDiag(s,i),void o.assignCopy(i)}const i=this.M;for(let t=0;t<this.N;t++)for(let e=0;e<i;e++)o.setRowCol(t,e,this.atRowCol(t,e)*s.at(e))}transposeInPlace(){if(this.N===this.M){for(let t=0;t<this.N;t++)for(let s=t+1;s<this.M;s++){const o=this.atRowCol(t,s);this.setRowCol(t,s,this.atRowCol(s,t)),this.setRowCol(s,t,o)}return this}const t=new Float64Array(this.N*this.M),s=new y(t,this.N,this.M);return s.assignCopy(this),this.M=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.c)(this.N,this.N=this.M),s.transpose(this),this}transpose(t){if(this!==t){y.checkDims(t,this.M,this.N);for(let s=0;s<this.N;s++)for(let o=0;o<this.M;o++)t.setRowCol(o,s,this.atRowCol(s,o))}else t.transposeInPlace()}add(t,s){}svd(s,o,i,e=!1){if(y.checkDims(s,this.N,this.M),y.checkDims(o,this.M,1),y.checkDims(i,this.M,this.M),e){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N===this.M),!this.symmetricEigen(o,i))return!1;for(let t=0;t<this.M;++t)o.at(t)<0&&o.set(t,0);return s.assignCopy(i),!0}let h,r,a,l,n,x,w,u=0,C=0,f=0,R=0,d=0;const c=this.M,M=this.N;s.assignCopy(this);const m=new Float64Array(c),N=new y(m,c,1),b=(t,s)=>s>=0?Math.abs(t):-Math.abs(t),p=(t,s)=>{if((t=Math.abs(t))>(s=Math.abs(s))){const o=s/t;return t*Math.sqrt(o*o+1)}if(s>0){const o=t/s;return s*Math.sqrt(o*o+1)}return 0};for(let t=0;t<c;t++){if(u=t+1,N.set(t,R*f),f=l=R=0,t<M){for(let o=t;o<M;o++)R+=Math.abs(s.atRowCol(o,t));if(R){for(let o=t;o<M;o++)s.setRowCol(o,t,s.atRowCol(o,t)/R),l+=s.atRowCol(o,t)*s.atRowCol(o,t);r=s.atRowCol(t,t),f=-b(Math.sqrt(l),r),a=r*f-l,s.setRowCol(t,t,r-f);for(let o=u;o<c;o++){l=0;for(let i=t;i<M;i++)l+=s.atRowCol(i,t)*s.atRowCol(i,o);r=l/a;for(let i=t;i<M;i++)s.setRowCol(i,o,s.atRowCol(i,o)+r*s.atRowCol(i,t))}for(let o=t;o<M;o++)s.setRowCol(o,t,s.atRowCol(o,t)*R)}}if(o.set(t,R*f),f=l=R=0,t<M&&t!==c-1){for(let o=u;o<c;o++)R+=Math.abs(s.atRowCol(t,o));if(R){for(let o=u;o<c;o++)s.setRowCol(t,o,s.atRowCol(t,o)/R),l+=s.atRowCol(t,o)*s.atRowCol(t,o);r=s.atRowCol(t,u),f=-b(Math.sqrt(l),r),a=r*f-l,s.setRowCol(t,u,r-f);for(let o=u;o<c;o++)N.set(o,s.atRowCol(t,o)/a);for(let o=u;o<M;o++){l=0;for(let i=u;i<c;i++)l+=s.atRowCol(o,i)*s.atRowCol(t,i);for(let t=u;t<c;t++)s.setRowCol(o,t,s.atRowCol(o,t)+l*N.at(t))}for(let o=u;o<c;o++)s.setRowCol(t,o,s.atRowCol(t,o)*R)}}const i=Math.abs(o.at(t))+Math.abs(N.at(t));d=i>d?i:d}for(let t=c-1;t>=0;t--){if(t<c-1){if(f){for(let o=u;o<c;o++)i.setRowCol(o,t,s.atRowCol(t,o)/s.atRowCol(t,u)/f);for(let o=u;o<c;o++){l=0;for(let e=u;e<c;e++)l+=s.atRowCol(t,e)*i.atRowCol(e,o);for(let s=u;s<c;s++)i.setRowCol(s,o,i.atRowCol(s,o)+l*i.atRowCol(s,t))}}for(let s=u;s<c;s++)i.setRowCol(t,s,0),i.setRowCol(s,t,0)}i.setRowCol(t,t,1),f=N.at(t),u=t}for(let t=(M<c?M:c)-1;t>=0;t--){u=t+1,f=o.at(t);for(let o=u;o<c;o++)s.setRowCol(t,o,0);if(f){f=1/f;for(let o=u;o<c;o++){l=0;for(let i=u;i<M;i++)l+=s.atRowCol(i,t)*s.atRowCol(i,o);r=l/s.atRowCol(t,t)*f;for(let i=t;i<M;i++)s.setRowCol(i,o,s.atRowCol(i,o)+r*s.atRowCol(i,t))}for(let o=t;o<M;o++)s.setRowCol(o,t,s.atRowCol(o,t)*f)}else for(let o=t;o<M;o++)s.setRowCol(o,t,0);s.setRowCol(t,t,s.atRowCol(t,t)+1)}for(let t=c-1;t>=0;t--)for(let e=1;;e++){let y=1;for(u=t;u>=0;u--){if(C=u-1,Math.abs(N.at(u))+d===d){y=0;break}if(Math.abs(o.at(C))+d===d)break}if(y){h=0,l=1;for(let i=u;i<=t&&(r=l*N.at(i),N.set(i,N.at(i)*h),Math.abs(r)+d!==d);i++){f=o.at(i),a=p(r,f),o.set(i,a),a=1/a,h=f*a,l=-r*a;for(let t=0;t<M;t++)x=s.atRowCol(t,C),w=s.atRowCol(t,i),s.setRowCol(t,C,x*h+w*l),s.setRowCol(t,i,w*h-x*l)}}if(w=o.at(t),u===t){if(w<0){o.set(t,-w);for(let s=0;s<c;s++)i.setRowCol(s,t,-i.atRowCol(s,t))}break}if(100===e)return!1;n=o.at(u),C=t-1,x=o.at(C),f=N.at(C),a=N.at(t),r=((x-w)*(x+w)+(f-a)*(f+a))/(2*a*x),f=p(r,1),r=((n-w)*(n+w)+a*(x/(r+b(f,r))-a))/n,h=l=1;for(let t=u;t<=C;t++){const e=t+1;f=N.at(e),x=o.at(e),a=l*f,f*=h,w=p(r,a),N.set(t,w),h=r/w,l=a/w,r=n*h+f*l,f=f*h-n*l,a=x*l,x*=h;for(let s=0;s<c;s++)n=i.atRowCol(s,t),w=i.atRowCol(s,e),i.setRowCol(s,t,n*h+w*l),i.setRowCol(s,e,w*h-n*l);w=p(r,a),o.set(t,w),w&&(w=1/w,h=r*w,l=a*w),r=h*f+l*x,n=h*x-l*f;for(let o=0;o<M;o++)x=s.atRowCol(o,t),w=s.atRowCol(o,e),s.setRowCol(o,t,x*h+w*l),s.setRowCol(o,e,w*h-x*l)}N.set(u,0),N.set(t,r),o.set(t,n)}const g=new Float64Array(this.N),v=new Float64Array(this.M),T=new y(g,this.N,1),I=new y(v,this.M,1);let A=1;do{A*=3,A++}while(A<=this.M);do{A/=3,A=Math.trunc(A);for(let t=A;t<this.M;t++){const e=o.at(t);for(let o=0;o<this.N;o++)T.set(o,s.atRowCol(o,t));for(let s=0;s<this.M;s++)I.set(s,i.atRowCol(s,t));let h=t;for(;o.at(h-A)<e;){o.set(h,o.at(h-A));for(let t=0;t<this.N;t++)s.setRowCol(t,h,s.atRowCol(t,h-A));for(let t=0;t<this.M;t++)i.setRowCol(t,h,i.atRowCol(t,h-A));if(h-=A,h<A)break}o.set(h,e);for(let t=0;t<this.N;t++)s.setRowCol(t,h,T.at(t));for(let t=0;t<this.M;t++)i.setRowCol(t,h,I.at(t))}}while(A>1);for(let t=0;t<this.M;t++){let o=0;for(let i=0;i<this.N;i++)s.atRowCol(i,t)<0&&o++;for(let s=0;s<this.M;s++)i.atRowCol(s,t)<0&&o++;if(o>Math.trunc((this.N+this.M)/2)){for(let o=0;o<this.N;o++)s.setRowCol(o,t,-s.atRowCol(o,t));for(let s=0;s<this.M;s++)i.setRowCol(s,t,-i.atRowCol(s,t))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let t=0;t<this.N;t++)for(let s=t+1;s<this.M;s++)if(this.atRowCol(t,s)!==this.atRowCol(s,t))return!1;return!0}isZero(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}isIdentity(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}equals(s,o){if(void 0!==o&&(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this.N!==s.N||this.M!==s.M)return!1;for(let t=0;t<this.N*this.M;t++)if(this.data[t]!==s.data[t])return!1;return!0}maxElement(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}minElement(){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}determinant(){if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.N===this.M),1===this.N)return this.data[0];if(2===this.N)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(3===this.N){const t=this;return t.atRowCol(0,0)*(t.atRowCol(1,1)*t.atRowCol(2,2)-t.atRowCol(1,2)*t.atRowCol(2,1))-t.atRowCol(0,1)*(t.atRowCol(1,0)*t.atRowCol(2,2)-t.atRowCol(2,0)*t.atRowCol(1,2))+t.atRowCol(0,2)*(t.atRowCol(1,0)*t.atRowCol(2,1)-t.atRowCol(1,1)*t.atRowCol(2,0))}const s=new Float64Array(this.N*this.N),o=new y(s,this.N,this.N),i=new Float64Array(this.N);if(!this.luDecomposition(o,i))return 0;let e=1;for(let t=0;t<this.N;t++)e*=o.atRowCol(t,t),i[t]!==t&&(e=-e);return e}submatrix(s,o,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}inverse(s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}pseudoInverse(t,s=!1,o=2220446049250313e-31){if(t.setZero(),1===this.N&&1===this.M)return 0!==this.atRowCol(0,0)?t.setRowCol(0,0,1/this.atRowCol(0,0)):t.setRowCol(0,0,0),!0;if(2===this.N&&2===this.M){const s=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),o=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(s)>o)return t.setRowCol(0,0,this.atRowCol(1,1)/s),t.setRowCol(0,1,-this.atRowCol(0,1)/s),t.setRowCol(1,0,-this.atRowCol(1,0)/s),t.setRowCol(1,1,this.atRowCol(0,0)/s),!0}const i=new Float64Array(this.N*this.M),e=new y(i,this.N,this.M),h=new Float64Array(this.M),r=new y(h,this.M,1),a=new Float64Array(this.M*this.M),l=new y(a,this.M,this.M);if(!this.svd(e,r,l,s))return!1;const n=Math.max(this.N,this.M),x=o*Math.abs(r.at(0))*n;for(let y=0;y<this.M;y++)r.at(y)>x?r.set(y,1/r.at(y)):r.set(y,0);return l.mulDiag(r,t),t.mulTranspose(e,t),!0}luDecomposition(s,o){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}symmetricEigen(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.rows()===this.cols()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.rows()===s.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(o.rows()===o.cols()&&o.rows()===this.rows()),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(this.isSymmetric());const i=new Float64Array(this.N*this.M),e=new y(i,this.N,this.M);e.assignCopy(this);const h=100/Number.EPSILON,r=this.rows(),a=new Float64Array(r),l=new Float64Array(r),n=new y(a,r,1),x=new y(l,r,1);for(let t=0;t<r;t++)n.set(t,e.atRowCol(t,t)),s.set(t,e.atRowCol(t,t)),x.set(t,0);o.setIdentity();const w=()=>{const t=n;o.transposeInPlace();let i=1;do{i*=3,i++}while(i<=r);do{i/=3,i=Math.trunc(i);for(let e=i;e<r;e++){const h=s.at(e),r=Math.abs(h);for(let s=0;s<this.M;s++)t.set(s,o.atRowCol(s,e));let a=e;for(;Math.abs(s.at(a-i))<r;){s.set(a,s.at(a-i));for(let t=0;t<this.M;t++)o.setRowCol(t,a,o.atRowCol(t,a-i));if(a-=i,a<i)break}if(a!==e){s.set(a,h);for(let s=0;s<this.M;s++)o.setRowCol(s,a,t.at(s))}}}while(i>1)};for(let t=1;;t++){let i=0;for(let t=1;t<r;t++)for(let s=0;s<t;s++)i+=Math.abs(e.atRowCol(t,s));if(0===i)return w(),!0;const a=t<4?.2*i/(r*r):0;for(let l=0;l<r;l++)for(let i=l+1;i<r;i++){let y=h*Math.abs(e.atRowCol(i,l));if(t>4&&y<=Math.abs(s.at(l))&&y<=Math.abs(s.at(i)))e.setRowCol(i,l,0);else if(Math.abs(e.atRowCol(i,l))>a){let t,h=s.at(i)-s.at(l);if(y<Math.abs(h))t=e.atRowCol(i,l)/h;else{const s=.5*h/e.atRowCol(i,l);t=1/(Math.abs(s)+Math.sqrt(1+s*s)),s<0&&(t=-t)}const a=1/Math.sqrt(1+t*t),n=t*a,w=n/(1+a);h=t*e.atRowCol(i,l),x.set(l,x.at(l)-h),x.set(i,x.at(i)+h),s.set(l,s.at(l)-h),s.set(i,s.at(i)+h),e.setRowCol(i,l,0);let u=0;for(;u<l;u++)y=e.atRowCol(l,u),h=e.atRowCol(i,u),e.setRowCol(l,u,y-n*(h+y*w)),e.setRowCol(i,u,h+n*(y-h*w));for(u++;u<i;u++)y=e.atRowCol(u,l),h=e.atRowCol(i,u),e.setRowCol(u,l,y-n*(h+y*w)),e.setRowCol(i,u,h+n*(y-h*w));for(u++;u<r;u++)y=e.atRowCol(u,l),h=e.atRowCol(u,i),e.setRowCol(u,l,y-n*(h+y*w)),e.setRowCol(u,i,h+n*(y-h*w));for(u=0;u<r;u++)y=o.atRowCol(l,u),h=o.atRowCol(i,u),o.setRowCol(l,u,y-n*(h+y*w)),o.setRowCol(i,u,h+n*(y-h*w))}}for(let t=0;t<r;t++)n.set(t,n.at(t)+x.at(t)),s.set(t,n.at(t)),x.set(t,0)}}static checkDims(s,o,i){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s.rows()===o&&s.cols()===i)}}class n extends y{constructor(t){if(t.copy){const s=new Float64Array(t.copy.N*t.copy.M);return super(s,t.copy.N,t.copy.M),this.buffer=s,void this.assignCopy(t.copy)}const s=new Float64Array(t.NN*t.MM);super(s,t.NN,t.MM),this.buffer=s,t.initializerList&&(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.b)(this.buffer,t.initializerList,0,0,t.initializerList.length)}assignCopy(t){return this===t||super.assignCopy(t),this}}class x{constructor(t){this.m_TransformationType=1,void 0===t?this.setIdentity():t instanceof x?this.set(t):this.setScale(t)}set(t){return this.xx=t.xx,this.xy=t.xy,this.xd=t.xd,this.yx=t.yx,this.yy=t.yy,this.yd=t.yd,this}clone(){return(new x).set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(t){return this===t||this.xx===t.xx&&this.xy===t.xy&&this.xd===t.xd&&this.yx===t.yx&&this.yy===t.yy&&this.yd===t.yd}transformInPlace(t){const s=this.xx*t.x+this.xy*t.y+this.xd,o=this.yx*t.x+this.yy*t.y+this.yd;t.x=s,t.y=o}transform(t){const s=t.clone();return this.transformInPlace(s),s}queryTransform(t,s){const o=this.xx*t.x+this.xy*t.y+this.xd,i=this.yx*t.x+this.yy*t.y+this.yd;s.setCoords(o,i)}transformEnvInPlace(t){if(t.isEmpty())return;const s=(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.m)(_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P,4);t.queryCorners(s),this.transformPoints2D(s,4,s),t.setFromPoints(s,4)}queryTransformEnv(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}transformPoints2D(t,s,o){for(let i=0;i<s;++i)this.queryTransform(t[i],o[i])}transformInterleavedPoints(t,s,o){s*=2;const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN();for(let e=0;e<s;e+=2)i.x=t[e],i.y=t[e+1],this.transformInPlace(i),o[e]=i.x,o[e+1]=i.y}multiply(t){return x.st_multiply(this,t,this),this}mulLeft(s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),this}static st_multiply(t,s,o){const i=t.xx*s.xx+t.yx*s.xy,e=t.xy*s.xx+t.yy*s.xy,h=t.xd*s.xx+t.yd*s.xy+s.xd,r=t.xx*s.yx+t.yx*s.yy,a=t.xy*s.yx+t.yy*s.yy,l=t.xd*s.yx+t.yd*s.yy+s.yd;o.xx=i,o.xy=e,o.xd=h,o.yx=r,o.yy=a,o.yd=l}getCoefficients(s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s.length>=6),s[0]=this.xx,s[1]=this.xy,s[2]=this.xd,s[3]=this.yx,s[4]=this.yy,s[5]=this.yd}setCoefficients(s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s.length>=6),this.xx=s[0],this.xy=s[1],this.xd=s[2],this.yx=s[3],this.yy=s[4],this.yd=s[5]}copyTo(s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}initializeFromRect(t,s){t.isEmpty()||s.isEmpty()||!t.width()||!t.height()?this.setZero():(this.xy=this.yx=0,this.xx=s.width()/t.width(),this.yy=s.height()/t.height(),this.xd=s.xmin-t.xmin*this.xx,this.yd=s.ymin-t.ymin*this.yy)}initializeFromRectIsotropic(t,s){if(t.isEmpty()||!t.width()||!t.height()||s.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=s.width()/t.width(),this.yy=s.height()/t.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;const o=s.getCenter(),i=t.getCenter();this.xd=o.x-i.x*this.xx,this.yd=o.y-i.y*this.yy}}initializeFromTwoPointsArray(t,o){if(t[0].equals(o[0])&&t[1].equals(o[1]))return void this.setIdentity();if(t[0].equals(t[1])){if(o[0].equals(o[1]))return void this.setShift(o[0].sub(t[0]));(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("")}if(!t[0].equals(t[1])&&o[0].equals(o[1]))return this.setZero(),void this.shift(o[0]);this.setShiftCoords(-t[0].x,-t[0].y);const i=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.distance(t[0],t[1]),h=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.distance(o[0],o[1]),r=h/i;this.scale(r,r);const a=t[1].sub(t[0]);a.divThis(i);const l=o[1].sub(o[0]);l.divThis(h);const y=a.crossProduct(l),n=a.dotProduct(l);this.rotate(n,y),this.shiftCoords(o[0].x,o[0].y)}initializeFromTwoPoints(t,s,o,i){const e=[t,s],h=[o,i];this.initializeFromTwoPointsArray(e,h)}transformSizeInPlace(s){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}transformSize(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}transformTol(s){return (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0}transformWithoutTranslateArray(t,s,o){for(let i=0;i<s;++i)this.transformWithoutTranslate(t[i],o[i])}transformWithoutTranslateInPlace(t){const s=this.xx*t.x+this.xy*t.y,o=this.yx*t.x+this.yy*t.y;t.setCoords(s,o)}transformWithoutTranslate(t,s){const o=this.xx*t.x+this.xy*t.y,i=this.yx*t.x+this.yy*t.y;s.setCoords(o,i)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(1!==this.xx||1!==this.yy||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(t){const s=t*t;return!((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.xd)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.yd)>s)&&(!((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.xy+this.xd)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.yy+this.yd-1)>s)&&!((0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.xx+this.xd-1)+(0,_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.a)(this.yx+this.yd)>s))}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(t){const s=this.xx*this.xx+this.yx*this.yx,o=this.xy*this.xy+this.yy*this.yy,i=(s+o)*t;return Math.abs(s-o)<=i&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=i}isUniformNoRotation(){return 0!==this.xx&&Math.abs(this.xx)===Math.abs(this.yy)&&0===this.xy&&0===this.yx}isTranslate(){return 1===this.xx&&1===this.yy&&!this.xy&&!this.yx}isTranslateTol(t){const s=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;return s.setCoords(0,1),this.transformWithoutTranslateInPlace(s),s.y-=1,!(s.sqrLength()>t*t)&&(s.setCoords(1,0),this.transformWithoutTranslateInPlace(s),s.x-=1,s.sqrLength()<=t*t)}isOrthonormal(t){const s=new x;return s.xx=this.xx*this.xx+this.xy*this.xy,s.xy=this.xx*this.yx+this.xy*this.yy,s.yx=this.yx*this.xx+this.yy*this.xy,s.yy=this.yx*this.yx+this.yy*this.yy,s.xd=0,s.yd=0,s.isIdentityTol(t)}isDegenerate(t){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*t*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return 0===this.xx&&0===this.yy&&0===this.xy&&0===this.yx&&0===this.xd&&0===this.yd}isScaleAndTranslateTol(t){return this.xy*this.xy+this.yx*this.yx<=(this.xx*this.xx+this.yy*this.yy)*t}setTranslate(t,s){return this.xx=1,this.xy=0,this.xd=t,this.yx=0,this.yy=1,this.yd=s,this}setShiftCoords(t,s){return this.xx=1,this.xy=0,this.xd=t,this.yx=0,this.yy=1,this.yd=s,this}setShift(t){return this.xx=1,this.xy=0,this.xd=t.x,this.yx=0,this.yy=1,this.yd=t.y,this}setScaleCoords(t,s){return this.xx=t,this.xy=0,this.xd=0,this.yx=0,this.yy=s,this.yd=0,this}setScale(t){return this.setScaleCoords(t,t),this}setFlipX(t,s){return this.xx=-1,this.xy=0,this.xd=t+s,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(t,s){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=t+s,this}setShear(t,s){return this.xx=1,this.xy=t,this.xd=0,this.yx=s,this.yy=1,this.yd=0,this}scale(t,s){return this.xx*=t,this.xy*=t,this.xd*=t,this.yx*=s,this.yy*=s,this.yd*=s,this}setRotateAngle(t){return this.setRotate(Math.cos(t),Math.sin(t))}setRotate(t,s){return this.xx=t,this.xy=-s,this.xd=0,this.yx=s,this.yy=t,this.yd=0,this}setRotateAngleAbout(t,s){return this.setRotateAbout(Math.cos(t),Math.sin(t),s)}setRotateAbout(t,s,o){return this.setTranslate(-o.x,-o.y),this.rotate(t,s),this.translate(o.x,o.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(t,s){return this.xd+=t,this.yd+=s,this}shift(t){return this.xd+=t.x,this.yd+=t.y,this}translate(t,s){return this.xd+=t,this.yd+=s,this}flipX(t,s){return this.xx=-this.xx,this.xy=-this.xy,this.xd=t+s-this.xd,this}flipY(t,s){return this.yx=-this.yx,this.yy=-this.yy,this.yd=t+s-this.yd,this}shear(t,s){const o=new x;return o.setShear(t,s),this.multiply(o)}rotateAngle(t){const s=new x;return s.setRotateAngle(t),this.multiply(s)}rotate(t,s){const o=new x;return o.setRotate(t,s),this.multiply(o)}rotateAbout(t,s,o){return this.translate(-o.x,-o.y),this.rotate(t,s),this.translate(o.x,o.y)}rotateAngleAbout(t,s){return this.rotateAbout(Math.cos(t),Math.sin(t),s)}setInvert(t){return this.set(t),this.invertThis()}invertThis(){let t=this.xx*this.yy-this.xy*this.yx;if(0===t)return this.setZero(),this;t=1/t;const s=(this.xy*this.yd-this.xd*this.yy)*t,o=(this.xd*this.yx-this.xx*this.yd)*t,i=this.yy*t,e=-this.xy*t,h=-this.yx*t,r=this.xx*t;return this.xd=s,this.yd=o,this.xx=i,this.yy=r,this.xy=e,this.yx=h,this}invertPrecise(t){return this.set(t),this.invertPreciseThis()}invertPreciseThis(){const t=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.M.constructDouble(this.xy),s=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.M.constructDouble(this.xx),o=s.mulDouble(this.yy).sub(t.mulDouble(this.yx));if(o.isZero())return this.setZero(),this;const i=o.clone();i.invertThis();const e=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.M.constructDouble(this.xd),h=t.mulDouble(this.yd).sub(e.mulDouble(this.yy)).mul(i).toDouble(),a=e.mulDouble(this.yx).sub(s.mulDouble(this.yd)).mul(i).toDouble(),l=i.mulDouble(this.yy).toDouble(),y=i.mulDouble(-this.xy).toDouble(),n=i.mulDouble(-this.yx).toDouble(),x=i.mulDouble(this.xx).toDouble();return this.xd=h,this.yd=a,this.xx=l,this.yy=x,this.xy=y,this.yx=n,this}extractScaleTransform(t,s){const o=Math.sqrt(this.xx*this.xx+this.xy*this.xy),i=Math.sqrt(this.yx*this.yx+this.yy*this.yy);s.setScaleCoords(1/o,1/i),s.multiply(this),t.setScaleCoords(o,i)}setFromTwoTriangles(t,s){let o=!0;for(let e=0;e<3;++e)o=o&&t[e].equals(s[e]);if(o)return this.setIdentity(),!0;const i=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;i.setSub(t[0],t[1]);const h=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;h.setSub(t[0],t[2]);const r=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;r.setSub(s[0],s[1]);const a=new _Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;a.setSub(s[0],s[2]);const l=4*Number.EPSILON*(Math.abs(i.x*h.y)+Math.abs(h.x*i.y));let y=i.x*h.y-i.y*h.x;return Math.abs(y)>l?(y=1/y,this.xx=(r.x*h.y-i.y*a.x)*y,this.xy=(i.x*a.x-r.x*h.x)*y,this.yx=(r.y*h.y-i.y*a.y)*y,this.yy=(i.x*a.y-r.y*h.x)*y,this.xd=s[0].x-(this.xx*t[0].x+this.xy*t[0].y),this.yd=s[0].y-(this.yx*t[0].x+this.yy*t[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(t,s,o,i,e=null){return 0===s?(this.setIdentity(),void(e&&e.setIdentity())):1===s?(this.setShift(i[0].sub(o[0])),void(e&&e.setShift(o[0].sub(i[0])))):(s<3&&(t=1),void(4===t&&s>2?C(this,s,o,i,e):f(t,this,s,o,i,e)))}calculateErrors(s,o,i,h){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s>0&&null!==o&&null!==i);let r=0;for(let t=0;t<s;++t){const s=this.transform(o[t]),a=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.sqrDistance(i[t],s);r+=a,h&&(h[t]=Math.sqrt(a))}return Math.sqrt(r/s)}}const w=[43,11,41,9,61];function u(s,o){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!(2!==o.rows()&&3!==o.rows()||2!==o.cols()&&3!==o.rows())),s.xx=o.atRowCol(0,0),s.xy=o.atRowCol(0,1),s.yx=o.atRowCol(1,0),s.yy=o.atRowCol(1,1),3===o.cols()?(s.xd=o.atRowCol(0,2),s.yd=o.atRowCol(1,2)):(s.xd=0,s.yd=0)}function C(t,s,i,h,r){const a=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.average(i,s),l=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.average(h,s),y=new n({NN:2,MM:2});y.setZero();const x=new n({NN:2,MM:2});x.setZero();for(let o=0;o<s;++o)y.setRowCol(0,0,y.atRowCol(0,0)+(i[o].x-a.x)*(i[o].x-a.x)),y.setRowCol(0,1,y.atRowCol(0,1)+(i[o].x-a.x)*(i[o].y-a.y)),y.setRowCol(1,1,y.atRowCol(1,1)+(i[o].y-a.y)*(i[o].y-a.y)),x.setRowCol(0,0,x.atRowCol(0,0)+(h[o].x-l.x)*(i[o].x-a.x)),x.setRowCol(0,1,x.atRowCol(0,1)+(h[o].x-l.x)*(i[o].y-a.y)),x.setRowCol(1,0,x.atRowCol(1,0)+(h[o].y-l.y)*(i[o].x-a.x)),x.setRowCol(1,1,x.atRowCol(1,1)+(h[o].y-l.y)*(i[o].y-a.y));y.setRowCol(1,0,y.atRowCol(0,1));const w=new n({NN:2,MM:2});y.pseudoInverse(w,!0)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.b)("Failed to compute pseudo inverse"),x.mul(w,x),u(t,x);const C=a.clone();t.transformInPlace(C),t.xd=l.x-C.x,t.yd=l.y-C.y,r&&(x.pseudoInverse(w,!1)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.b)("Failed to compute pseudo inverse"),u(r,w),r.transformInPlace(l),r.xd=a.x-l.x,r.yd=a.y-l.y)}function f(s,i,h,r,a,l){(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(1===s||0===s||2===s||3===s),i.setIdentity();const y=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.average(r,h),C=_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.average(a,h);if((0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s<w.length&&s>0),8&w[s]){const t=new n({NN:2,MM:2});t.setZero();for(let s=0;s<h;++s)t.setRowCol(0,0,t.atRowCol(0,0)+(a[s].x-C.x)*(r[s].x-y.x)),t.setRowCol(1,0,t.atRowCol(1,0)+(a[s].x-C.x)*(r[s].y-y.y)),t.setRowCol(0,1,t.atRowCol(0,1)+(a[s].y-C.y)*(r[s].x-y.x)),t.setRowCol(1,1,t.atRowCol(1,1)+(a[s].y-C.y)*(r[s].y-y.y));const e=new n({NN:2,MM:2}),l=new n({NN:2,MM:1}),f=new n({NN:2,MM:2});t.svd(e,l,f)||(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.b)("Failed to compute svd");const R=new n({NN:2,MM:2});e.transpose(R);const d=new n({NN:2,MM:2});if(f.mul(R,d),!(32&w[s])){d.determinant()<0&&(R.setRowCol(1,0,-R.atRowCol(1,0)),R.setRowCol(1,1,-R.atRowCol(1,1)),f.mul(R,d))}const c=new x;u(c,d),i.set(c)}if(2&w[s]){let t=0,s=0;for(let o=0;o<h;++o){const e=r[o].sub(y);t+=e.sqrLength(),i.transformInPlace(e),s+=e.dotProduct(a[o].sub(C))}if(0===t)0===s?i.setIdentity():i.setZero();else{const o=s/t;i.scale(o,o)}}else (0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!(4&w[s]));const f=y.clone();i.transformInPlace(f),i.xd=C.x-f.x,i.yd=C.y-f.y,l&&(l.set(i),l.invertThis(),l.isZero()&&(l.xd=y.x,l.yd=y.y))}


/***/ }),

/***/ 28769:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ Z),
/* harmony export */   b: () => (/* binding */ ks),
/* harmony export */   d: () => (/* binding */ W),
/* harmony export */   f: () => (/* binding */ J),
/* harmony export */   h: () => (/* binding */ ts),
/* harmony export */   j: () => (/* binding */ gs),
/* harmony export */   u: () => (/* binding */ K)
/* harmony export */ });
/* unused harmony exports A, B, C, D, E, c, e, g, i, k, l, m, n, o, p, q, r, s, t, v, w, x, y, z */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92504);
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(92114);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86128);
/* harmony import */ var _vec32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(58331);
/* harmony import */ var _geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(22759);
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(38774);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(10151);
/* harmony import */ var _geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(16597);
/* harmony import */ var _geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const z=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");class D{constructor(){this.plane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .create */ .vt)(),this.origin=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.basis1=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.basis2=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()}}const G=D;function W(s=Ms){return{plane:(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .create */ .vt)(s.plane),origin:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .clone */ .o8)(s.origin),basis1:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .clone */ .o8)(s.basis1),basis2:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .clone */ .o8)(s.basis2)}}function X(s,t,i){const n=As.get();return n.origin=s,n.basis1=t,n.basis2=i,n.plane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .wrap */ .LV)(0,0,0,0),K(n),n}function Z(s,t=W()){return J(s.origin,s.basis1,s.basis2,t)}function H(s,t){(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.origin,s.origin),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.basis1,s.basis1),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(t.basis2,s.basis2),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .copy */ .C)(t.plane,s.plane)}function J(s,t,i,n=W()){return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.origin,s),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.basis1,t),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(n.basis2,i),K(n),ws(n,"fromValues()"),n}function K(s){(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .fromVectorsAndPoint */ .mR)(s.basis2,s.basis1,s.origin,s.plane)}function Q(s,t,i){s!==i&&Z(s,i);const n=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),ys(s),t);return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(i.origin,i.origin,n),i.plane[3]-=t,i}function $(s,t,i){return ts(t,i),Q(i,ls(s,s.origin),i),i}function ss(s,t){const i=s.basis1[0],n=s.basis2[1],[r,o]=s.origin;return (0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .fA)(r-i,o-n,r+i,o+n,t)}function ts(s,t=W()){const i=(s[2]-s[0])/2,n=(s[3]-s[1])/2;return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.i)(t.origin,s[0]+i,s[1]+n,0),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.i)(t.basis1,i,0,0),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.i)(t.basis2,0,n,0),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .fromValues */ .fA)(0,0,1,0,t.plane),t}function is(s,t,i){return!!(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .intersectRay */ .Ui)(s.plane,t,i)&&Ps(s,i)}function ns(s,t,i){if(is(s,t,i))return i;const n=rs(s,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get());return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(i,t.origin,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),t.direction,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.j)(t.origin,n)/(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)(t.direction))),i}function rs(s,i,n){const r=Ss.get();xs(s,i,r,Ss.get());let o=Number.POSITIVE_INFINITY;for(const e of Es){const c=Ns(s,e,Ts.get()),u=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get();if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .intersectLineSegment */ .T7)(r,c,u)){const s=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.E)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),i.origin,u),r=Math.abs((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .acosClamped */ .XM)((0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(i.direction,s)));r<o&&(o=r,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(n,u))}}return o===Number.POSITIVE_INFINITY?es(s,i,n):n}function os(s,t){return(t-s)/t}function es(s,t,i){if(is(s,t,i))return i;const n=Ss.get(),r=Ss.get();xs(s,t,n,r);let o=Number.POSITIVE_INFINITY;for(const e of Es){const c=Ns(s,e,Ts.get()),u=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get();if((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .intersectLineSegmentClamp */ .gv)(n,c,u)){const s=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_11__/* .distance2 */ .kb)(t,u);if(!(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .isPointInside */ .Tj)(r,u))continue;s<o&&(o=s,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,u))}}return us(s,t.origin)<o&&as(s,t.origin,i),i}function as(s,t,i){const n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .projectPoint */ ._I)(s.plane,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get()),r=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__/* .projectPointClamp */ .H6)(vs(s,s.basis1),n,-1,1,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get()),o=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__/* .projectPointClamp */ .H6)(vs(s,s.basis2),n,-1,1,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get());return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.d)(i,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),r,o),s.origin),i}function cs(s,t,i){const{origin:n,basis1:r,basis2:o}=s,e=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.d)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),t,n),a=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_12__/* .projectPointSignedLength */ .gr)(r,e),c=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_12__/* .projectPointSignedLength */ .gr)(o,e),u=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_12__/* .projectPointSignedLength */ .gr)(ys(s),e);return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.i)(i,a,c,u)}function us(s,t){const i=cs(s,t,_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get()),{basis1:n,basis2:r}=s,o=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)(n),e=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)(r),a=Math.max(Math.abs(i[0])-o,0),c=Math.max(Math.abs(i[1])-e,0),u=i[2];return a*a+c*c+u*u}function gs(s,t){return Math.sqrt(us(s,t))}function bs(s,t){let i=Number.NEGATIVE_INFINITY;for(const n of Es){const r=Ns(s,n,Ts.get()),o=(0,_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__/* .distance2 */ .kb)(r,t);o>i&&(i=o)}return Math.sqrt(i)}function fs(s,t){return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .isPointInside */ .Tj)(s.plane,t)&&Ps(s,t)}function ps(s,t,i,n){return Is(s,i,n)}function ls(s,t){const i=-s.plane[3];return (0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_12__/* .projectPointSignedLength */ .gr)(ys(s),t)-i}function ms(s,t,i,n){const r=ls(s,t),o=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(Vs,ys(s),i-r);return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(n,t,o),n}function ds(s,t){return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.q)(s.basis1,t.basis1)&&(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.q)(s.basis2,t.basis2)&&(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.q)(s.origin,t.origin)}function hs(s,t,i){return s!==i&&Z(s,i),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__/* .invert */ .B8)(_s,t),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__/* .transpose */ .mg)(_s,_s),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)(i.basis1,s.basis1,_s),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)(i.basis2,s.basis2,_s),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .getNormal */ .Qj)(i.plane),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .getNormal */ .Qj)(s.plane),_s),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)(i.origin,s.origin,t),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .setOffsetFromPoint */ .mP)(i.plane,i.plane,i.origin),i}function js(s,t,i,n){return s!==n&&Z(s,n),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__/* .fromRotation */ .$0)(Os,t,i),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)(n.basis1,s.basis1,Os),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.t)(n.basis2,s.basis2,Os),K(n),n}function ys(s){return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .getNormal */ .Qj)(s.plane)}function Is(s,t,i){switch(t){case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.X:(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,s.basis1),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.n)(i,i);break;case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.Y:(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,s.basis2),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.n)(i,i);break;case _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.Z:(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i,ys(s))}return i}function Ps(s,t){const i=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.d)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),t,s.origin),n=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.k)(s.basis1),r=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.k)(s.basis2),o=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.basis1,i),e=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.basis2,i);return-o-n<0&&o-n<0&&-e-r<0&&e-r<0}function vs(s,t){const i=Ts.get();return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i.origin,s.origin),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(i.vector,t),i}function Ns(s,t,i){const{basis1:n,basis2:r,origin:o}=s,e=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),n,t.origin[0]),a=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),r,t.origin[1]);(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(i.origin,e,a),(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(i.origin,i.origin,o);const g=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),n,t.direction[0]),b=(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_13__/* .sv3d */ .rq.get(),r,t.direction[1]);return (0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(i.vector,(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.f)(g,g,b),2),i}function ws(s,t){Math.abs((0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.basis1,s.basis2)/((0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)(s.basis1)*(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)(s.basis2)))>1e-6&&z().warn(t,"Provided basis vectors are not perpendicular"),Math.abs((0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(s.basis1,ys(s)))>1e-6&&z().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-(0,_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(ys(s),s.origin)-s.plane[3])>1e-6&&z().warn(t,"Plane offset is not consistent with plane origin")}function xs(s,t,i,n){const r=ys(s);(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .fromVectorsAndPoint */ .mR)(r,t.direction,t.origin,i),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .fromVectorsAndPoint */ .mR)((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .getNormal */ .Qj)(i),r,t.origin,n)}const Ms={plane:(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .create */ .vt)(),origin:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .fromValues */ .fA)(0,0,0),basis1:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .fromValues */ .fA)(1,0,0),basis2:(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .fromValues */ .fA)(0,1,0)},Ss=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_14__/* .ObjectStack */ .I(_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_10__/* .create */ .vt),Ts=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_14__/* .ObjectStack */ .I(_geometry_support_lineSegment_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt),Vs=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),As=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_14__/* .ObjectStack */ .I((()=>W())),Es=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],_s=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),Os=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),ks=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:G,altitudeAt:ls,axisAt:ps,cameraFrustumCoverage:os,closestPoint:es,closestPointOnSilhouette:rs,copy:Z,copyWithoutVerify:H,create:W,distance:gs,distance2:us,distanceToSilhouette:bs,elevate:Q,equals:ds,extrusionContainsPoint:fs,fromAABoundingRect:ts,fromValues:J,getExtent:ss,intersectRay:is,intersectRayClosestSilhouette:ns,normal:ys,projectPoint:as,projectPointLocal:cs,rotate:js,setAltitudeAt:ms,setExtent:$,transform:hs,up:Ms,updateUnboundedPlane:K,wrap:X},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 82079:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ i),
/* harmony export */   e: () => (/* binding */ c),
/* harmony export */   s: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/* harmony import */ var _Distance2DCalculator_CXhBP_8I_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(71943);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92976);
/* harmony import */ var _geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(62900);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{getOperatorType(){return 10100}supportsCurves(){return!0}accelerateGeometry(e,r,t){return!1}canAccelerateGeometry(e){return!1}execute(e,r,t){return this.executeEx(e,r,t,null,null,Number.NaN)}executeEx(t,u,o,s,n,c){if(t.isEmpty()||u.isEmpty())return Number.NaN;(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.c)(t),(0,_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.c)(u);const a=t,i=u;Number.isNaN(c)&&(c=Number.POSITIVE_INFINITY);const m=new _Distance2DCalculator_CXhBP_8I_js__WEBPACK_IMPORTED_MODULE_1__.D(c,o).calculate(a,i,s,n);return Number.isFinite(m)?m:Number.NaN}}const n=new s;function c(e,r,s={}){const{unit:c}=s;let a=n.execute((0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_3__.fromGeometry)(e),(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_3__.fromGeometry)(r),null);if(a&&c){const r=(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_3__.getSpatialReference)(e);a=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .convertFromSpatialReferenceUnit */ .PQ)(a,r,c)}return a}const a=n.supportsCurves(),i=Object.freeze(Object.defineProperty({__proto__:null,execute:c,supportsCurves:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 95595:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ u),
/* harmony export */   i: () => (/* binding */ c),
/* harmony export */   s: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony exports a, b */
/* harmony import */ var _geometry_operators_gx_operatorSimplify_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39957);
/* harmony import */ var _geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62900);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(e){const t=(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.getSpatialReference)(e);return (0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.toGeometry)((0,_geometry_operators_gx_operatorSimplify_js__WEBPACK_IMPORTED_MODULE_0__/* .execute */ .g7)((0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromGeometry)(e),(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromSpatialReference)(t),!1),t)}function i(e){const r=e.map(_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromGeometry),o=(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.getSpatialReference)(e);return (0,_geometry_operators_gx_operatorSimplify_js__WEBPACK_IMPORTED_MODULE_0__/* .executeMany */ .zo)(r,(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromSpatialReference)(o),!1).map((e=>(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.toGeometry)(e,o)))}function c(e){return (0,_geometry_operators_gx_operatorSimplify_js__WEBPACK_IMPORTED_MODULE_0__/* .isSimpleAsFeature */ .Pg)((0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromGeometry)(e),(0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.fromSpatialReference)((0,_geometry_operators_support_apiConverter_js__WEBPACK_IMPORTED_MODULE_1__.getSpatialReference)(e)),!1)}const m=(0,_geometry_operators_gx_operatorSimplify_js__WEBPACK_IMPORTED_MODULE_0__/* .supportsCurves */ .fz)(),f=Object.freeze(Object.defineProperty({__proto__:null,execute:u,executeMany:i,isSimple:c,supportsCurves:m},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 80912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get outerSize(){return this._outer.size}get(t,e){return this._outer.get(t)?.get(e)}getInner(t){return this._outer.get(t)}set(t,e,r){const o=this._outer.get(t);o?o.set(e,r):this._outer.set(t,new Map([[e,r]]))}delete(t,e){const r=this._outer.get(t);r&&(r.delete(e),0===r.size&&this._outer.delete(t))}forEach(t){this._outer.forEach(((e,r)=>t(e,r)))}forAll(t){this._outer.forEach(((e,r)=>e.forEach(((e,o)=>t(e,r,o)))))}}


/***/ }),

/***/ 56194:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41573);
/* harmony import */ var _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62879);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(e){this._observable=new _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleObservable */ .I,this._set=new Set(e)}get size(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.size}add(e){const s=this._set.size;return this._set.add(e),this._set.size!==s&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(e){const s=this._set.delete(e);return s&&this._observable.notify(),s}entries(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.entries()}forEach(s,t){(0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.forEach(((e,r)=>s.call(t,e,r,this)),t)}has(s){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.has(s)}keys(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.keys()}values(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set.values()}[Symbol.iterator](){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._observable),this._set[Symbol.iterator]()}[Symbol.dispose](){this._observable.destroy()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}


/***/ }),

/***/ 3912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fA: () => (/* binding */ r),
/* harmony export */   o8: () => (/* binding */ t),
/* harmony export */   vt: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports ONES, UNIT_X, UNIT_Y, UNIT_Z, ZEROS, ones, unitX, unitY, unitZ, v, zeros */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function e(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function c(){return r(0,1,0)}function i(){return r(0,0,1)}const a=e(),f=o(),l=u(),s=c(),_=i(),y=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:s,UNIT_Z:_,ZEROS:a,clone:t,create:n,fromValues:r,ones:o,unitX:u,unitY:c,unitZ:i,zeros:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 6371:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){let r,e,i=[],u=!1;function f(...f){return u&&r===this&&n(f,i)||(e=t.apply(this,f),r=this,i=f,u=!0),e}return f}function n(t,n){if(t.length!==n.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==n[r])return!1;return!0}


/***/ }),

/***/ 33604:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Jd: () => (/* binding */ k),
/* harmony export */   Nk: () => (/* binding */ U),
/* harmony export */   OM: () => (/* binding */ S),
/* harmony export */   Oo: () => (/* binding */ F),
/* harmony export */   ix: () => (/* binding */ x),
/* harmony export */   yh: () => (/* binding */ C)
/* harmony export */ });
/* unused harmony exports formatDMS, formatDecimal, formatImperialArea, formatImperialLength, formatImperialRelativeLength, formatImperialRelativeVerticalLength, formatImperialVerticalLength, formatMetricArea, formatMetricLength, formatMetricRelativeLength, formatMetricRelativeVerticalLength, formatMetricVerticalLength, formatRelativeAngle, formatRelativeDecimal */
/* harmony import */ var _Cyclical_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17505);
/* harmony import */ var _quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73569);
/* harmony import */ var _unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(26257);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function g(t,a,n,i=2,u="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatDecimal */ .zJ)(t,(0,_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .toUnit */ .kM)(a,n).value,n,i,u)}function L(t,e,a,n=2,i="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatRelativeDecimal */ .nD)(t,(0,_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .toUnit */ .kM)(e,a).value,a,n,i)}function d(t,r,e=2,n="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatMetricLength */ .Ee)(t,r.value,r.unit,e,n)}function M(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatMetricRelativeLength */ .Mm)(t,r.value,r.unit,e,a)}function w(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatMetricVerticalLength */ .W4)(t,r.value,r.unit,e,a)}function I(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatMetricRelativeVerticalLength */ .e_)(t,r.value,r.unit,e,a)}function R(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatMetricArea */ .zq)(t,r.value,r.unit,e,a)}function y(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatImperialLength */ .tr)(t,r.value,r.unit,e,a)}function V(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatImperialRelativeLength */ .J1)(t,r.value,r.unit,e,a)}function j(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatImperialVerticalLength */ .t_)(t,r.value,r.unit,e,a)}function D(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatImperialRelativeVerticalLength */ .LF)(t,r.value,r.unit,e,a)}function A(t,r,e=2,a="abbr"){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatImperialArea */ .Sz)(t,r.value,r.unit,e,a)}function T(t){return p(t.value,t.unit)}function U(r,e,a,n=_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__/* .cyclicalDegrees */ .ie,u=!0){return (0,_unitFormatUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .formatAngleDegrees */ .Me)(r.value,r.unit,r.rotationType,e,a,n,u)}function q(t,r,e){return h(t.value,t.unit,t.rotationType,r,e??void 0)}function x(t,r,e,a,n="abbr"){switch(a=a??2,e){case"imperial":return y(t,r,a,n);case"metric":return d(t,r,a,n);default:return g(t,r,e,a,n)}}function C(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return V(t,r,a,n);case"metric":return M(t,r,a,n);default:return L(t,r,e,a,n)}}function F(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return j(t,r,a,n);case"metric":return w(t,r,a,n);default:return g(t,r,e,a,n)}}function S(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return D(t,r,a,n);case"metric":return I(t,r,a,n);default:return L(t,r,e,a,n)}}function k(t,r,e,a=2,n="abbr"){switch(e){case"imperial":return A(t,r,a,n);case"metric":return R(t,r,a,n);default:return g(t,r,e,a,n)}}


/***/ }),

/***/ 26257:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cq: () => (/* binding */ b),
/* harmony export */   Ee: () => (/* binding */ D),
/* harmony export */   J1: () => (/* binding */ h),
/* harmony export */   LF: () => (/* binding */ M),
/* harmony export */   Me: () => (/* binding */ w),
/* harmony export */   Mm: () => (/* binding */ x),
/* harmony export */   Sz: () => (/* binding */ j),
/* harmony export */   W4: () => (/* binding */ y),
/* harmony export */   e_: () => (/* binding */ F),
/* harmony export */   nD: () => (/* binding */ p),
/* harmony export */   t_: () => (/* binding */ B),
/* harmony export */   tr: () => (/* binding */ d),
/* harmony export */   v7: () => (/* binding */ T),
/* harmony export */   zJ: () => (/* binding */ g),
/* harmony export */   zq: () => (/* binding */ $)
/* harmony export */ });
/* unused harmony exports formatDMS, formatRelativeAngleDegrees */
/* harmony import */ var _ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84858);
/* harmony import */ var _Cyclical_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17505);
/* harmony import */ var _mathUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92504);
/* harmony import */ var _quantityUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73569);
/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(96274);
/* harmony import */ var _unitUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(92976);
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(46930);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(t,n,i){return t.units[n][i]}function g(t,n,i,r=2,o="abbr"){return`${(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_6__/* .formatNumber */ .ZV)(n,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:n>0?"never":"exceptZero"})} ${b(t,i,o)}`}function p(t,n,i,r=2,o="abbr"){return`${(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_6__/* .formatNumber */ .ZV)(n,{minimumFractionDigits:r,maximumFractionDigits:r,signDisplay:"exceptZero"})} ${b(t,i,o)}`}function D(t,n,i,r=2,o="abbr"){const u=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveMetricLengthUnit */ .x0)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,u),u,r,o)}function x(t,n,i,r=2,o="abbr"){const u=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveMetricLengthUnit */ .x0)(n,i);return p(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,u),u,r,o)}function y(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveMetricVerticalLengthUnit */ .x$)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function F(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveMetricVerticalLengthUnit */ .x$)(n,i);return p(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function d(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveImperialLengthUnit */ .OU)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function h(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveImperialLengthUnit */ .OU)(n,i);return p(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function B(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveImperialVerticalLengthUnit */ .y7)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function M(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveImperialVerticalLengthUnit */ .y7)(n,i);return p(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function $(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveMetricAreaUnit */ .wv)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function j(t,n,i,r=2,o="abbr"){const e=(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .adaptiveImperialAreaUnit */ .TL)(n,i);return g(t,(0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(n,i,e),e,r,o)}function S(t,n,i=2){let r=s(t,n,"degrees"),o=r-Math.floor(r);r-=o,o*=60;let e=o-Math.floor(o);return o-=e,e*=60,`${r.toFixed()} ${o.toFixed()}' ${e.toFixed(i)}"`}const U=(t,n)=>({style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:n,minimumFractionDigits:n,signDisplay:t>0?"never":"exceptZero"});function w(t,i,o,e,u,c=_Cyclical_js__WEBPACK_IMPORTED_MODULE_1__/* .cyclicalDegrees */ .ie,a=!0){let m=c.normalize((0,_quantityUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .convertRotationType */ .g2)((0,_unitUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .convertUnit */ .oU)(t,i,"degrees"),o,e),0,a);const f=U(m,u??2);return m=I(m,f),(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_6__/* .formatNumber */ .ZV)(m,f)}function Z(t,n,i,r,o=2){i!==r&&(t=-t);const e={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:o,minimumFractionDigits:o,signDisplay:"exceptZero"};let u=s(t,n,"degrees")%360;return u=I(u,e),l(u,e)}const z=new Map;function I(t,n){const i=JSON.stringify(n);let r=z.get(i);return r||(r=new Intl.NumberFormat("en-US",n),z.set(i,r)),/^[-+]?360\.?0*?$/.test(r.format(t))?0:t}const O=["B","kB","MB","GB","TB"];function T(n,r){let e=0===(r=Math.round(r))?0:Math.floor(Math.log(r)/Math.log(_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__/* .ByteSizeUnit */ .u.KILOBYTES));e=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .clamp */ .qE)(e,0,O.length-1);const s=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_6__/* .formatNumber */ .ZV)(r/_ByteSizeUnit_js__WEBPACK_IMPORTED_MODULE_0__/* .ByteSizeUnit */ .u.KILOBYTES**e,{maximumFractionDigits:2});return (0,_string_js__WEBPACK_IMPORTED_MODULE_4__/* .replace */ .HC)(n.units.bytes[O[e]],{fileSize:s})}


/***/ }),

/***/ 88204:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hh: () => (/* binding */ E),
/* harmony export */   LM: () => (/* binding */ M),
/* harmony export */   Nf: () => (/* binding */ v),
/* harmony export */   TH: () => (/* binding */ p),
/* harmony export */   U_: () => (/* binding */ P),
/* harmony export */   ht: () => (/* binding */ G),
/* harmony export */   mT: () => (/* binding */ g),
/* harmony export */   o6: () => (/* binding */ w),
/* harmony export */   qn: () => (/* binding */ T),
/* harmony export */   s1: () => (/* binding */ _),
/* harmony export */   ts: () => (/* binding */ m),
/* harmony export */   yy: () => (/* binding */ R)
/* harmony export */ });
/* unused harmony export isSupported */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(47063);
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97066);
/* harmony import */ var _SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78983);
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46930);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function _(){return (0,_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.i)()}function S(){return s()}function E(){return (0,_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.l)()}function w(n,e){const t=k(e),o=n.replaceAll(/[\u00B0\u00BA]/g,"^").replaceAll("","'").replaceAll("",'"'),i=[];return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.b.dmsToGeog(t,1,[o],i)?new _Point_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(i[0][0],i[0][1],e||_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84):null}function g(n){return n&&_()?(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(n)??w(`0 0' 0" N | ${n}`)?.longitude??w(`0 N | ${n}`)?.longitude??null:null}function m(n){return n&&_()?(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(n)??w(`${n} | 0 0' 0" E`)?.latitude??w(`${n} | 0 E`)?.latitude??null:null}function T(n,e,t){const r=[],o=A(t);if(-1===o)return console.warn(`invalid conversionMode: ${t}`),null;const i=k(e);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.mgrsToGeogExtended(i,1,[n],o,r)?new _Point_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(r[0][0],r[0][1],e||_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84):null}function P(n,e){const t=[];!e&&/\(.+27/.test(n)&&(e=_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.GCS_NAD_1927);const r=k(e);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.c.usngToGeog(r,1,[n],t)?new _Point_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(t[0][0],t[0][1],e||_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84):null}function G(n,e,t){const r=[],o=D(t);if(-1===o)return console.warn(`invalid conversionMode: ${t}`),null;const i=k(e);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.d.utmToGeog(i,1,[n],o,r)?new _Point_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(r[0][0],r[0][1],e||_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84):null}function p(n,e,t=0){const o=[[n.x,n.y]],i=[],l=k(n.spatialReference);let u=0;switch(e){case"dd":u=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.b.geogToDd(l,1,o,t,i);break;case"ddm":u=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.b.geogToDdm(l,1,o,t,i);break;case"dms":u=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.b.geogToDms(l,1,o,t,i);break;default:return console.warn(`invalid format: ${e}`),null}return u?i[0]:null}function M(n,e,t=0,r=!1){const o=[[n.x,n.y]],i=[],l=k(n.spatialReference);let u=A(e);if(-1===u)return console.warn(`invalid conversionMode: ${e}`),null;r&&(u|=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_ADD_SPACES);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.geogToMgrsExtended(l,1,o,t,!1,u,i)?i[0]:null}function v(n,e=0,t=!1){const r=[[n.x,n.y]],o=[],i=k(n.spatialReference);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.c.geogToUsng(i,1,r,e,!1,t,o)?o[0]:null}function R(n,e,t=!1){const r=[[n.x,n.y]],o=[],i=k(n.spatialReference);let l=D(e);if(-1===l)return console.warn(`invalid conversionMode: ${e}`),null;t&&(l|=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.d.PE_UTM_OPTS_ADD_SPACES);return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.d.geogToUtm(i,1,r,l,o)?o[0]:null}function k(e){if(e??=_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84,e.wkid){const t=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.P.geogcs(e.wkid);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("coordinate-formatter:invalid-spatial-reference","wkid is not valid");return t}const t=e.wkt2??e.wkt;if(t){const e=_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.P.fromString(_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.a.PE_TYPE_GEOGCS,t);if(!e)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("coordinate-formatter:invalid-spatial-reference","wkt is not valid");return e}throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing")}function A(n){switch(n){case"automatic":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_STYLE_AUTO;case"new-180-in-zone-01":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_STYLE_NEW|_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_180_ZONE_1_PLUS;case"new-180-in-zone-60":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_STYLE_NEW;case"old-180-in-zone-01":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_STYLE_OLD|_chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_180_ZONE_1_PLUS;case"old-180-in-zone-60":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.e.PE_MGRS_STYLE_OLD;default:return-1}}function D(n){switch(n){case"latitude-band-indicators":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.d.PE_UTM_OPTS_NONE;case"north-south-indicators":return _chunks_pe_js__WEBPACK_IMPORTED_MODULE_1__.d.PE_UTM_OPTS_NS;default:return-1}}


/***/ }),

/***/ 39957:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Pg: () => (/* binding */ u),
/* harmony export */   fz: () => (/* binding */ s),
/* harmony export */   g7: () => (/* binding */ e),
/* harmony export */   zo: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50256);
/* harmony import */ var _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74642);
/* harmony import */ var _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57592);
/* harmony import */ var _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75992);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t=new _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_3__.O;function e(n,r,e){return t.execute(n,r,e,null)}function o(r,e,o){const u=t.executeMany(new _chunks_SimpleGeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__.S(r),e,o,null);return Array.from(u)}function u(n,r,e){return t.isSimpleAsFeature(n,r,e,null,null)}function s(){return t.supportsCurves()}


/***/ }),

/***/ 62900:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromExtent: () => (/* binding */ M),
/* harmony export */   fromGeometry: () => (/* binding */ x),
/* harmony export */   fromMultipoint: () => (/* binding */ V),
/* harmony export */   fromPoint: () => (/* binding */ w),
/* harmony export */   fromPolygon: () => (/* binding */ P),
/* harmony export */   fromPolyline: () => (/* binding */ v),
/* harmony export */   fromSpatialReference: () => (/* binding */ j),
/* harmony export */   getSpatialReference: () => (/* binding */ C),
/* harmony export */   toExtent: () => (/* binding */ E),
/* harmony export */   toGeometry: () => (/* binding */ Z),
/* harmony export */   toMultipoint: () => (/* binding */ k),
/* harmony export */   toPoint: () => (/* binding */ R),
/* harmony export */   toPolygon: () => (/* binding */ d),
/* harmony export */   toPolyline: () => (/* binding */ z)
/* harmony export */ });
/* harmony import */ var _chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86330);
/* harmony import */ var _chunks_Envelope2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21566);
/* harmony import */ var _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(62188);
/* harmony import */ var _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75992);
/* harmony import */ var _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74642);
/* harmony import */ var _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57592);
/* harmony import */ var _Extent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(84698);
/* harmony import */ var _Multipoint_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(90067);
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97066);
/* harmony import */ var _Polygon_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(62802);
/* harmony import */ var _Polyline_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(42238);
/* harmony import */ var _initNoPeFactory_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(84966);
/* harmony import */ var _jsonConverter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(60628);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const p="_gxVersion",g=2,y=1;function C(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function x(e){switch(e.type){case"point":return w(e);case"multipoint":return V(e);case"polyline":return v(e);case"polygon":return P(e);case"extent":return M(e);default:throw new Error(`Unsupported geometry type: ${e.type}`)}}function M(e){if(!e.getCacheValue(p)){const t=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E;t.setCoords(e.xmin,e.ymin,e.xmax,e.ymax),e.hasM&&t.setInterval(g,0,e.mmin,e.mmax),e.hasZ&&t.setInterval(y,0,e.zmin,e.zmax),e.setCacheValue(p,t)}return e.getCacheValue(p)}function V(e){if(!e.getCacheValue(p)){const t=new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.M,n=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P,a=e.points,o=e.hasM,i=e.hasZ,u=i?3:2;for(let e=0,r=a.length;e<r;e++){const r=a[e];n.setXYCoords(r[0],r[1]),i&&n.setZ(r[2]??0),o&&n.setM(r[u]??NaN),t.add(n)}e.setCacheValue(p,t)}return e.getCacheValue(p)}function w(e){if(!e.getCacheValue(p)){const t=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;t.setXYCoords(e.x,e.y),e.hasM&&t.setM(e.m),e.hasZ&&t.setZ(e.z),e.setCacheValue(p,t)}return e.getCacheValue(p)}function P(e){if(!e.getCacheValue(p)){const{curveRings:t,hasM:n,hasZ:r,rings:s}=e,a=(0,_jsonConverter_js__WEBPACK_IMPORTED_MODULE_12__.fromGeometryToGXGeometry)({curveRings:t,hasM:n,hasZ:r,rings:s});e.setCacheValue(p,a)}return e.getCacheValue(p)}function v(e){if(!e.getCacheValue(p)){const{curvePaths:t,hasM:n,hasZ:r,paths:s}=e,a=(0,_jsonConverter_js__WEBPACK_IMPORTED_MODULE_12__.fromGeometryToGXGeometry)({curvePaths:t,hasM:n,hasZ:r,paths:s});e.setCacheValue(p,a)}return e.getCacheValue(p)}function j(e){if(e.wkid)return (0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_5__.c)(e.wkid);const t=e.wkt2||e.wkt;return t?(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_5__.a)(t):null}function Z(e,n){if(e)switch(e.getGeometryType()){case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPoint:return R(e,n);case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumEnvelope:return E(e,n);case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumMultiPoint:return k(e,n);case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPolyline:return z(e,n);case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_2__.G.enumPolygon:return d(e,n)}return null}function E(e,t){if(e.isEmpty())return null;const n=new _Extent_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A({xmin:e.getXMin(),ymin:e.getYMin(),xmax:e.getXMax(),ymax:e.getYMax(),spatialReference:t}),r=e.getDescription();if(r.hasM()){const t=e.queryInterval(g,0);n.mmin=t.vmin,n.mmax=t.vmax}if(r.hasZ()){const t=e.queryInterval(y,0);n.zmin=t.vmin,n.zmax=t.vmax}return n.setCacheValue(p,e),n}function k(e,t){if(e.isEmpty())return null;const n=e.getDescription(),s=n.hasM(),a=n.hasZ(),o=[],i=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P;for(let r=0,u=e.getPointCount();r<u;r++){e.getPointByVal(r,i);const t=[i.getX(),i.getY()];a&&t.push(i.getZ()),s&&t.push(i.getM()),o.push(t)}const c=new _Multipoint_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({hasM:s,hasZ:a,points:o,spatialReference:t});return c.setCacheValue(p,e),c}function R(t,n){if(t instanceof _chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_0__.P)return new _Point_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A({x:t.x,y:t.y,spatialReference:n});if(t.isEmpty())return null;const r=new _Point_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A({x:t.getX(),y:t.getY(),spatialReference:n}),s=t.getDescription();return s.hasM()&&(r.m=t.getM()),s.hasZ()&&(r.z=t.getZ()),r.setCacheValue(p,t),r}function d(e,t){if(e.isEmpty())return null;const n=_Polygon_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A.fromJSON({spatialReference:t,...(0,_jsonConverter_js__WEBPACK_IMPORTED_MODULE_12__.toGeometry)(e,null)});return n.setCacheValue(p,e),n}function z(e,t){if(e.isEmpty())return null;const n=_Polyline_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A.fromJSON({spatialReference:t,...(0,_jsonConverter_js__WEBPACK_IMPORTED_MODULE_12__.toGeometry)(e,null)});return n.setCacheValue(p,e),n}


/***/ }),

/***/ 84966:
/***/ ((__unused_webpack___webpack_module__, __unused_webpack___webpack_exports__, __webpack_require__) => {

/* harmony import */ var _chunks_Envelope2D_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21566);
/* harmony import */ var _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62188);
/* harmony import */ var _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74642);
/* harmony import */ var _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75992);
/* harmony import */ var _chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86330);
/* harmony import */ var _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57592);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(92976);
/* harmony import */ var _support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_5__.i)((t=>{let i,n;"number"==typeof t?i=t:n=t;const p={wkid:i,wkt:n};let m,a;if(n){m=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isProjectedWKT */ .x1)(n);const t=(0,_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isGeographic */ .EA)(p);if(!m&&!t)throw new Error(`Unsupported WKT type: ${n}`)}else m=!(0,_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isGeographic */ .EA)(p);return a=i&&_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .gradGcsIds */ .yD.has(i)?Math.PI/200:m?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getMetersPerUnit */ .Ao)(p):Math.PI/180,{isPCS:m,metersOrRadiansPerUnit:a,semiMajor:0,wkidOrWkt:t}}));


/***/ }),

/***/ 60628:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fromGeometries: () => (/* binding */ Be),
/* harmony export */   fromGeometry: () => (/* binding */ Pe),
/* harmony export */   fromGeometryToGXGeometry: () => (/* binding */ Ve),
/* harmony export */   getSpatialReference: () => (/* binding */ Ie),
/* harmony export */   toGeometry: () => (/* binding */ Me)
/* harmony export */ });
/* harmony import */ var _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(62188);
/* harmony import */ var _chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86330);
/* harmony import */ var _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57592);
/* harmony import */ var _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75992);
/* harmony import */ var _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74642);
/* harmony import */ var _initNoPeFactory_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84966);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function W(){if(-1===this.m_i)return this.m_i=0,{value:{m_token:1,m_value:null},done:!1};if(this.m_i<this.m_keys.length){const e=this.m_bReturnKey,t=Math.trunc(this.m_i);return this.m_bReturnKey=!this.m_bReturnKey,this.m_i+=.5,e?{value:{m_token:5,m_value:this.m_keys[t]},done:!1}:{value:{m_token:6,m_value:this.m_o[this.m_keys[t]]},done:!1}}return{value:{m_token:3,m_value:null},done:!0}}function X(){if(-1===this.m_i)return this.m_i=0,{value:{m_token:2,m_value:null},done:!1};if(this.m_i<this.m_a.length){const e={value:{m_token:6,m_value:this.m_a[this.m_i++]},done:!1};return this.m_strict||void 0===e.value.m_value&&(e.value.m_value=Number.NaN),e}return{value:{m_token:4,m_value:null},done:!0}}class L{createJSONObjectIterator(e){return{m_iteratorType:"object",m_o:e,m_keys:this.m_options.strict?Object.keys(e):Object.keys(e).filter((t=>void 0!==e[t])),m_i:-1,m_bReturnKey:!0,next:W}}createJSONArrayIterator(e){return{m_iteratorType:"array",m_strict:this.m_options.strict,m_i:-1,m_a:e,next:X}}constructor(e,t){this.m_currentToken=0,this.m_options=t?{...t}:{strict:!0};const n=e;this.m_iteratorStack=[n instanceof Array?this.createJSONArrayIterator(n):this.createJSONObjectIterator(n)],this.m_nextFlatToken={m_value:null,m_token:0}}nextToken(){if(0===this.m_iteratorStack.length)return this.m_currentToken=0;switch(this.m_nextFlatToken=this.m_iteratorStack.at(-1).next().value,this.m_currentValue=void 0,this.m_nextFlatToken.m_token){case 1:return this.m_currentToken=1;case 3:return this.m_iteratorStack.pop(),this.m_currentToken=3;case 2:return this.m_currentToken=2;case 4:return this.m_iteratorStack.pop(),this.m_currentToken=4;case 5:return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=5;case 6:if(this.m_nextFlatToken.m_value instanceof Array)return this.m_iteratorStack.push(this.createJSONArrayIterator(this.m_nextFlatToken.m_value)),this.nextToken();if(this.m_nextFlatToken.m_value instanceof Object)return this.m_iteratorStack.push(this.createJSONObjectIterator(this.m_nextFlatToken.m_value)),this.nextToken();if("number"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,Number.isSafeInteger(this.m_currentValue)&&this.m_currentValue>=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.ar)()&&this.m_currentValue<=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.i)()?this.m_currentToken=8:this.m_currentToken=7;if("string"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=6;if("boolean"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=this.m_nextFlatToken.m_value,this.m_currentToken=this.m_nextFlatToken.m_value?11:12;if("object"==typeof this.m_nextFlatToken.m_value)return this.m_currentValue=null,this.m_currentToken=10;(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unrecognized json element type")}return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unrecognized json element type"),0}currentToken(){return this.m_currentToken}skipChildren(){if(0!==this.m_iteratorStack.length)switch(this.m_currentValue=void 0,this.m_nextFlatToken.m_token){case 1:return this.m_iteratorStack.pop(),this.m_nextFlatToken.m_token=3,void(this.m_currentToken=3);case 2:return this.m_iteratorStack.pop(),this.m_nextFlatToken.m_token=4,void(this.m_currentToken=4)}}currentString(){return 6!==this.m_currentToken&&5!==this.m_currentToken&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentValue}currentDoubleValue(){return 7!==this.m_currentToken&&8!==this.m_currentToken&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentValue}currentInt32Value(){return 8!==this.m_currentToken&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentValue}currentInt64Value(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0n}currentBoolValue(){return 12!==this.m_currentToken&&11!==this.m_currentToken&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentValue}isError(){return 0}}class Y{constructor(){this.m_pendingKey=null,this.m_acceptedObject=null,this.m_currentObject=[]}reset(){this.m_pendingKey=null,this.m_acceptedObject=null,this.m_currentObject.length=0}startObject(){const e={};this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):Array.isArray(this.m_currentObject.at(-1))&&this.m_currentObject.at(-1).push(e),this.m_currentObject.push(e)}startArray(){const e=[];this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):Array.isArray(this.m_currentObject.at(-1))&&this.m_currentObject.at(-1).push(e),this.m_currentObject.push(e)}endObject(){this.m_acceptedObject=this.m_currentObject.at(-1),this.m_currentObject.pop()}endArray(){this.m_currentObject.pop()}addFieldName(e){this.m_pendingKey=e}addValue_(e){this.m_pendingKey?(this.m_currentObject.at(-1)[this.m_pendingKey]=e,this.m_pendingKey=null):this.m_currentObject.at(-1).push(e)}addString(e){this.addValue_(e)}addDouble(e,t){this.addValue_(e)}addInt64(e){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}addInt32(e){this.addValue_(e)}addBool(e){this.addValue_(e)}addNull(){this.addValue_(null)}getObject(){return this.m_acceptedObject}}class G{constructor(t){return this.m_buffer=null,this.m_view=null,this.m_sz=0,this.m_offset=0,this.m_bOwnsBuffer=!0,this.m_bLittleEndian=!0,this.m_element=new ArrayBuffer(8),this.m_elementBytes=new Uint8Array(this.m_element),this.m_elementView=new DataView(this.m_element),this.m_elementDouble=new Float64Array(this.m_element),this.m_elementFloat=new Float32Array(this.m_element),this.m_elementInt64=new BigInt64Array(this.m_element),this.m_elementInt32=new Int32Array(this.m_element),this.m_elementInt16=new Int16Array(this.m_element),void 0!==t.sz?(this.m_sz=t.sz,t.buffer?(this.m_sz<0&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("size out of range"),this.m_buffer=t.buffer,this.m_offset=void 0!==t.offset?t.offset:0,this.m_view=void 0!==t.offset?new DataView(t.buffer,t.offset,t.sz):new DataView(this.m_buffer),this.m_bOwnsBuffer=!1,void(this.m_bLittleEndian=!0)):(this.m_sz<0&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("size out of range"),void(this.m_sz>0&&(this.m_buffer=new ArrayBuffer(this.m_sz),this.m_view=new DataView(this.m_buffer))))):t.move?(this.m_sz=t.move.m_sz,this.m_buffer=t.move.m_buffer,this.m_view=t.move.m_view,this.m_bOwnsBuffer=t.move.m_bOwnsBuffer,this.m_bLittleEndian=t.move.m_bLittleEndian,t.move.m_buffer=null,t.move.m_view=null,t.move.m_sz=0,void(t.move.m_bOwnsBuffer=!0)):void (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("unrecognized constructor options")}swapBytesDouble(){this.doSwap()&&(this.m_elementDouble[0]=this.m_elementBytes[0]<<56|this.m_elementBytes[1]<<48|this.m_elementBytes[2]<<40|this.m_elementBytes[3]<<32|this.m_elementBytes[4]<<24|this.m_elementBytes[5]<<16|this.m_elementBytes[6]<<8|this.m_elementBytes[7])}swapBytesInt32(){this.doSwap()&&(this.m_elementInt32[0]=this.m_elementBytes[0]<<24|this.m_elementBytes[1]<<16|this.m_elementBytes[2]<<8|this.m_elementBytes[3])}getOffset(){return this.m_offset}assignMove(e){return this===e||(this.clear(),this.m_sz=e.m_sz,this.m_buffer=e.m_buffer,this.m_view=e.m_view,this.m_bOwnsBuffer=e.m_bOwnsBuffer,this.m_bLittleEndian=e.m_bLittleEndian,e.m_buffer=null,e.m_sz=0,e.m_bOwnsBuffer=!0),this}doSwap(){return this.m_bLittleEndian!==(1===G.getNativeByteOrder())}setNativeByteOrder(){this.m_bLittleEndian=1===G.getNativeByteOrder()}setOrder(e){this.m_bLittleEndian=1===e}getOrder(){return this.m_bLittleEndian?1:0}getView(){return this.m_view||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.p)("buffer not defined"),this.m_view}static getNativeByteOrder(){return 1}clear(){this.m_buffer=null,this.m_sz=0,this.m_bOwnsBuffer=!0}size(){return this.m_sz}readDouble(e){return this.doSwap()?(this.m_elementDouble[0]=this.m_view.getFloat64(e,this.m_bLittleEndian),this.swapBytesDouble(),this.m_elementDouble[0]):this.m_view.getFloat64(e,this.m_bLittleEndian)}writeDouble(e,t){this.m_elementDouble[0]=t,this.swapBytesDouble(),this.m_view.setFloat64(e,this.m_elementDouble[0],this.m_bLittleEndian)}readInt32(e){return this.doSwap()?(this.m_elementInt32[0]=this.m_view.getInt32(e,this.m_bLittleEndian),this.swapBytesInt32(),this.m_elementInt32[0]):this.m_view.getInt32(e,this.m_bLittleEndian)}writeInt32(e,t){this.m_elementInt32[0]=t,this.swapBytesInt32(),this.m_view.setInt32(e,this.m_elementInt32[0],this.m_bLittleEndian)}getPtr(){return this.m_buffer}setSizeNoRealloc(e){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(e>=0&&e<=this.m_sz),this.m_sz=e}}function K(e,r,i,a,o,u){let m=!1,l=!1,c=!1,d=!1,_=!1,h=!1,f=!1,p=!1,k=!1,b=!1,y=!1,N=!1,T=!1,g=!1,w=!1,C=!1,D=!1,F=!1,j=!1,z=!1,O=!1,I=!1,E=!1,B=!1,P=Number.NaN,V=Number.NaN,M=Number.NaN,R=Number.NaN,U=0,W=Number.NaN,X=Number.NaN,L=Number.NaN,Y=Number.NaN,G=Number.NaN,K=Number.NaN,q=Number.NaN,ne=Number.NaN,re=0,ie=0,se=!1,ae=!1,oe=null,ue=null,me=null,le=null,ce=null;for(;3!==i.nextToken();){const u=i.currentString();if(i.nextToken(),"spatialReference"===u){if(o&&!m){m=!0,1===i.currentToken()?le=Q(i):10!==i.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse spatial reference: object or null is expected");continue}}else if(a)if("hasZ"===u){if(!l){l=!0,se=11===i.currentToken();continue}}else if("hasM"===u){if(!c){c=!0,ae=11===i.currentToken();continue}}else if("rings"===u){if(!(_||h||e!==_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown&&e!==_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon)){_=!0,({geometry:ce,as:oe,bs:ue}=J(!0,!1,r,i));continue}}else if("curveRings"===u){if(!h&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon)){h=!0,({geometry:ce,as:oe,bs:ue}=J(!0,!0,r,i));continue}}else if("paths"===u){if(!(f||p||e!==_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown&&e!==_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline)){f=!0,({geometry:ce,as:oe,bs:ue}=J(!1,!1,r,i));continue}}else if("curvePaths"===u){if(!p&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline)){p=!0,({geometry:ce,as:oe,bs:ue}=J(!1,!0,r,i));continue}}else if("points"===u){if(!k&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint)){k=!0,({geometry:ce,as:oe,bs:ue}=Z(r,i));continue}}else if("ids"===u){if(!d){d=!0,me=H(r,i);continue}}else if("x"===u){if(!b&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)){b=!0,P=$(i);continue}}else if("y"===u){if(!y&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)){y=!0,V=$(i);continue}}else if("z"===u){if(!N&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)){N=!0,M=$(i);continue}}else if("m"===u){if(!T&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)){T=!0,R=$(i);continue}}else if("id"===u){if(!g&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint)){g=!0,U=ee(i);continue}}else if("xmin"===u){if(!w&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){w=!0,W=$(i);continue}}else if("ymin"===u){if(!C&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){C=!0,X=$(i);continue}}else if("mmin"===u){if(!O&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){O=!0,q=$(i);continue}}else if("zmin"===u){if(!j&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){j=!0,G=$(i);continue}}else if("idmin"===u){if(!E&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){E=!0,re=ee(i);continue}}else if("xmax"===u){if(!D&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){D=!0,L=$(i);continue}}else if("ymax"===u){if(!F&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){F=!0,Y=$(i);continue}}else if("mmax"===u){if(!I&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){I=!0,ne=$(i);continue}}else if("zmax"===u){if(!z&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){z=!0,K=$(i);continue}}else if("idmax"===u){if(!B&&(e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown||e===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope)){B=!0,ie=ee(i);continue}}else"materials"===u&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0);i.skipChildren()}if(_||h||f||p||k){let e=null,t=null;const n=ce;se&&(ce.addAttribute(1),e=oe,e||(e=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(n.getPointCount(),Number.NaN))),ae&&(ce.addAttribute(2),t=se?ue:oe),null!=me&&ce.addAttribute(3),se&&null!=e&&n.setAttributeStreamRef(1,e),ae&&null!=t&&n.setAttributeStreamRef(2,t),null!=me&&te(n,me)}else if(b||y||T||N||g){(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.I)(P,V)||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse point: x and y must be finite or nan"),(Number.isNaN(V)||Number.isNaN(P))&&(P=Number.NaN,V=Number.NaN);const e=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.P({x:P,y:V});N&&e.setZ(M),T&&e.setM(R),g&&e.setID(U),ce=e}else if(w||C||D||F||j||z||O||I||E||B){(Number.isNaN(X)||Number.isNaN(L)||Number.isNaN(Y))&&(W=Number.NaN);const e=new _chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.E({xmin:W,ymin:X,xmax:L,ymax:Y});j&&z&&e.setInterval(1,0,G,K),O&&I&&e.setInterval(2,0,q,ne),E&&B&&e.setInterval(3,0,re,ie),ce=e}return{...ce?{geom:ce}:{},...le?{sr:le}:{}}}function q(e){let t=!1;for(;3!==e.nextToken();){const n=e.currentString();e.nextToken(),"uwkid"===n?t||(t=!0,8===e.currentToken()&&e.currentInt32Value()):e.skipChildren()}return null}function Q(e){let t=!1,n=!1,r=!1,i=!1,s=!1,a=!1,o=!1,u=!1,m=!1,l=!1,c=!1,d=!1,_=!1,g=!1,v=!1,x=!1,A=!1,S=-1,w=-1,C=-1,D=-1,F=0,j=0,z=0,O=0,I=0,E=0,B=0,P=0,V=0,M=0,R="",U="",W=null;for(;3!==e.nextToken();){const h=e.currentString();e.nextToken(),"wkid"===h?t||(t=!0,8===e.currentToken()&&(S=e.currentInt32Value())):"latestWkid"===h?n||(n=!0,8===e.currentToken()&&(w=e.currentInt32Value())):"wkt"===h?s||(s=!0,6===e.currentToken()&&(R=e.currentString())):"wkt2"===h?s||6===e.currentToken()&&(U=e.currentString()):"vcsWkid"===h?r||(r=!0,8===e.currentToken()&&(C=e.currentInt32Value())):"latestVcsWkid"===h?i||(i=!0,8===e.currentToken()&&(D=e.currentInt32Value())):"xyTolerance"===h?o||(o=!0,a=!0,F=e.currentDoubleValue()):"zTolerance"===h?u||(u=!0,a=!0,j=e.currentDoubleValue()):"mTolerance"===h?m||(m=!0,a=!0,z=e.currentDoubleValue()):"falseX"===h?l||(l=!0,a=!0,B=e.currentDoubleValue()):"falseY"===h?c||(c=!0,a=!0,P=e.currentDoubleValue()):"falseZ"===h?d||(d=!0,a=!0,V=e.currentDoubleValue()):"falseM"===h?_||(_=!0,a=!0,M=e.currentDoubleValue()):"xyUnits"===h?g||(g=!0,a=!0,O=e.currentDoubleValue()):"zUnits"===h?v||(v=!0,a=!0,I=e.currentDoubleValue()):"mUnits"===h?x||(x=!0,a=!0,E=e.currentDoubleValue()):"unit"===h?A||(A=!0,W=q(e)):e.skipChildren()}D<=0&&C>0&&(D=C),C<=0&&D>0&&(C=D);let X=null,L=!0;if(0!==R.length&&(L=!1,(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aA)(R)&&(X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.a)(R))),X||0===U.length||(L=!1,(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aA)(U)&&(X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.a)(U))),!X&&w>0&&(L=!1,(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aB)(w)&&(D<=0||(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aC)())&&(X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.c)(w,D))),!X&&S>0&&(L=!1,(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aB)(S)&&(C<=0||(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aC)())&&(X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.c)(S,C))),L&&(X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.R)(W)),a&&X){const e=new _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aD;X.queryPrecisionDescriptorWithoutFalseXY(e),o&&e.setTolerance(0,F),u&&e.setTolerance(1,j),m&&e.setTolerance(2,z),g&&l&&c&&e.setGridParams(B,P,O),v&&d&&e.setZParams(V,I),x&&_&&e.setMParams(M,E),X=(0,_chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aE)(X,e)}return X}function J(e,n,r,i){2!==i.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: array of array of vertices is expected");const s=e?new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.a:new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.P,a=s,o=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.y)(0),u=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(2,0),_=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.z)(0);let h=null,f=null,p=null,k=null,b=null,y=0,N=0,T=0;const g=new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.S,x=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN();let A=0,S=0;const F=e?1:0;for(;4!==i.nextToken();){2!==i.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: ring/path array is expected");let r=2,s=0,j=!0;const z=4;let O=0,I=0;const E=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN(),B=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.d)(z,Number.NaN),P=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.d)(z,Number.NaN);let V=!1;for(i.nextToken();4!==i.currentToken();){if(n&&1===i.currentToken())j&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: starting vertex array is expected"),p||(p=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.z)(A-1,1),k=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.y)(A-1,-1),b=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(0)),V=!0,r=1,({segFlag:T,toPointSz:O}=ue(g,B,x,i));else{for(V=!1,2!==i.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: array is expected, rings/paths vertices consist of arrays of coordinates"),O=0;4!==i.nextToken();)O===z&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: each vertex array has to have at most 4 elements"),B[O++]=$(i);O<2&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: each vertex array has to have at least 2 elements"),(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.J)(B[0],B[1])||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipath: x and y must be finite")}i.nextToken();do{if(u.size()===2*A&&u.resize(ne(A)),u.writePoint2D(2*A,E.setCoords(B[0],B[1])),h&&h.size()===A&&h.resize(re(A)),O>2?(h||(h=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(A+1,Number.NaN)),h.write(A,B[2])):h&&h.write(A,Number.NaN),f&&f.size()===A&&f.resize(re(A)),O>3?(f||(f=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(A+1,Number.NaN)),f.write(A,B[3])):f&&f.write(A,Number.NaN),j)S++,o.add(A),_.add(F),j=!1,I=O,(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.b)(P,B,0,0,I);else if(null!==p)if(V){const e=(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.H)(T),t=b.size();b.resize(t+e),p.add(T),k.add(y),g.get().writeInBufferStream(b,y),y+=e,a.incCurveType(T,1),N++}else p.add(1),k.add(-1);A++,s++,x.setCoords(B[0],B[1])}while(s<r&&4===i.currentToken())}0!==s&&(e&&s>r&&O===I&&0===(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.as)(B,P,O)?(A--,s--):null!==p&&(p.add(1),k.add(-1)))}return A&&(o.resize(S),_.resize(S),A>0&&(o.add(A),_.add(0)),a.setAttributeStreamRef(0,u),a.setPathFlagsStreamRef(_),a.setPathStreamRef(o),null!==p&&(a.updateCurveCounter(N),a.setSegmentData(k,b,p,y)),a.notifyModifiedFlags(65535)),{geometry:s,as:h,bs:f}}function Z(e,n){2!==n.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipoint: array of vertices is expected");let r=0;const i=new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.M,s=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(2,0);let a=0;const o=4,u=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.d)(o,Number.NaN),c=new _chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P;let d=null,_=null;for(;4!==n.nextToken();){for(2!==n.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipoint: array is expected, multipoint vertices consist of arrays of cooridinates"),a=0;4!==n.nextToken();)a===o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipoint: each vertex array has to have at most 4 elements"),u[a++]=$(n);a<2&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipoint: each vertex array has to have at least 2 elements"),(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.J)(u[0],u[1])||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse multipoint: x and y must be finite"),s.size()===2*r&&s.resize(ne(r)),s.writePoint2D(2*r,c.setCoords(u[0],u[1])),d&&d.size()===r&&d.resize(re(r)),a>2?(d||(d=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(r+1,Number.NaN)),d.write(r,u[2])):d&&d.write(r,Number.NaN),_&&_.size()===r&&_.resize(re(r)),a>3?(_||(_=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.D)(r+1,Number.NaN)),_.write(r,u[3])):_&&_.write(r,Number.NaN),r++}if(r){const e=i.getImpl();e.setAttributeStreamRef(0,s),e.resizeNoInit(r),e.notifyModifiedFlags(65535)}return{geometry:i,as:d,bs:_}}function H(e,n){2!==n.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse array of IDs: array of array of integers is expected");const r=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.K)(2,0);let i=0,s=-1;for(;4!==n.nextToken();){const e=i;r.size()===i&&r.resize(re(i)),i++;let a=0;for(-1===s?s=2===n.currentToken()?1:0:1===s&&2!==n.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse array of IDs: array of array of integers is expected"),0===s&&(r.size()===i&&r.resize(re(i)),r.write(i,ee(n)),a++,i++);4!==n.nextToken();)r.size()===i&&r.resize(re(i)),r.write(i,ee(n)),a++,i++;if(r.write(e,a),0===s)break}return r.resize(i),r}function $(e){const t=e.currentToken();if(10===t||6===t&&"NaN"===e.currentString())return Number.NaN;{const t=e.currentDoubleValue();return Number.isNaN(t)?Number.NaN:t}}function ee(e){return e.currentInt32Value()}function te(t,n){if(t.isEmpty())return;const r=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.K)(2,0),i=t.getGeometryType();let s=0;i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.M.type?s=1:i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.P.type||i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.a.type?s=t.getPathCount():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("not implemented"),r.resize(t.getPointCount(),0);let a=0;for(let o=0;o<s;++o){const s=n.read(a);a++;const u=a+s;let m=0,l=0;i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.M.type?m=t.getPointCount():i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.P.type||i===_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.a.type?(m=t.getPathSize(o),l=t.getPathStart(o)):(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("not implemented");for(let e=0,t=Math.min(s,m);e<t;++e)r.write(l,n.read(a)),a++,l++;a=u}t.getImpl().setAttributeStreamRef(3,r)}function ne(e){let t=2*Math.trunc(3*(e+1)/2);return t<8?t=8:t<32&&(t=32),t}function re(e){let t=Math.trunc(3*(e+1)/2);return t<4?t=4:t<16&&(t=16),t}function ie(e,t,n,i,s){s>=i.size()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.q)("Byte_buffer out of range access"),e.m_bits=0,e.m_rotation=0,e.m_cosr=1,e.m_sinr=0,e.setStartXY(t),e.setEndXY(n);const a=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN();a.x=i.readDouble(s),a.y=i.readDouble(s+8);const o=i.readInt32(s+16);if(!!(1&o))return e.m_semiMajorAxis=0,e.m_minorMajorRatio=1,e.m_interior.assign(a),e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.A)(e),!1;let u=!!(64&o);const m=!!(128&o);let c=!!(32&o);const d=!!(8&o),_=!!(16&o),h=t.equals(n);return u&&!h&&(u=!1,c=!0),c&&h&&(u=!0,c=!1,a.setCoords(0,0)),u||(m?c?(e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_interior.assign(a),e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0):(e.constructCircularArcThreePoint(t,n,a),h&&d===e.isClockwise()&&e.reverse()):c?(e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.A)(e),e.queryCoord2D(.5,e.m_interior)):(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.B)(e,t,n,a,d,_)),u&&(e.m_center.assign(t),e.m_startAngle=a.x,e.m_sweepAngle=a.y,(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.F)(e,Number.NaN,d,_),e.m_semiMajorAxis=0,e.m_minorMajorRatio=1,e.m_interior.setCoordsPoint2D(t)),e.setProjectionBehavior(0),(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.A)(e),!0}function se(e,t,n,r,i){e.m_bits=0,e.m_center.x=r.readDouble(i),e.m_center.y=r.readDouble(i+8),e.m_rotation=r.readDouble(i+16),e.m_semiMajorAxis=r.readDouble(i+24),e.m_minorMajorRatio=r.readDouble(i+32),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=n.x,e.m_YEnd=n.y;const s=r.readInt32(i+40);if(1&s)return!1;let a=!!(64&s),o=!!(128&s);const u=!!(2048&s),m=!!(4096&s);return!!!(512&s)&&!!!(1024&s)||o||(a=!0),o&&!t.equals(n)?(o=!1,a=!0):a&&t.equals(n)&&(o=!0,a=!1),o?(e.m_center.assign(t),e.m_startAngle=e.m_center.x,e.m_sweepAngle=e.m_center.y,(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.F)(e,Number.NaN,u,m),e.m_semiMajorAxis=0,e.m_interior.setCoordsPoint2D(t)):a?(e.m_center.setNAN(),e.m_semiMajorAxis=1,e.m_minorMajorRatio=0,e.m_center.setNAN(),e.m_sweepAngle=0,e.m_startAngle=0,(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.A)(e),e.queryCoord2D(.5,e.m_interior)):e.constructEllipticArcEndPointsCenter(t,n,e.m_semiMajorAxis,e.m_minorMajorRatio,e.m_rotation,!m,u,e.m_center),e.setProjectionBehavior(1),(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.A)(e),!0}function ae(e,t,r,i,s){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(s+32<=i.size()),e.m_cp=(0,_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.m)(_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P,2),e.m_cp[0].x=i.readDouble(s),e.m_cp[0].y=i.readDouble(s+8),e.m_cp[1].x=i.readDouble(s+16),e.m_cp[1].y=i.readDouble(s+24),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=r.x,e.m_YEnd=r.y,!0}function oe(e,t,n,r,i){return e.m_cp.x=r.readDouble(i),e.m_cp.y=r.readDouble(i+8),e.m_weights[0]=r.readDouble(i+16),e.m_weights[1]=r.readDouble(i+24),e.m_weights[2]=r.readDouble(i+32),e.m_XStart=t.x,e.m_YStart=t.y,e.m_XEnd=n.x,e.m_YEnd=n.y,!0}function ue(e,n,r,i,s){const a={segFlag:0,toPointSz:0};let o=i.currentToken();o=i.nextToken();const u=i.currentString(),m=u[0];for((1!==u.length||"a"!==m&&"b"!==m&&"c"!==m&&"n"!==m&&"q"!==m)&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)('failed to parse curve: expecting "a", "b", "n", "q", or "c"'),o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for curve parameters"),o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for to point"),a.toPointSz=0;4!==i.nextToken();)4===a.toPointSz&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: vertex array cannot have more than 4 elements"),n[a.toPointSz++]=$(i);a.toPointSz<2&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: vertex array must have at least 2 elements");const c=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.construct(n[0],n[1]),d=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN();let _=-1,h=-1,f=!1,p=Number.NaN,k=Number.NaN,b=Number.NaN;const y=[_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN(),_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN(),_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN()],N=_chunks_Point2D_js__WEBPACK_IMPORTED_MODULE_1__.P.getNAN();if("a"===m){o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for center point"),o=i.nextToken();const e=$(i);o=i.nextToken();const n=$(i);o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for center point"),d.setCoords(e,n),o=i.nextToken(),_=i.currentInt32Value(),o=i.nextToken(),h=i.currentInt32Value(),o=i.nextToken(),4!==o?(f=!1,p=$(i),o=i.nextToken(),k=$(i),o=i.nextToken(),b=$(i),o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for curve parameters")):f=!0,a.segFlag=4}else if("b"===m){for(let e=0;e<2;e++){o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for control point"),o=i.nextToken();const n=$(i);o=i.nextToken();const r=$(i);o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for control point"),y[e].setCoords(n,r)}o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for curve parameters"),a.segFlag=2}else if("n"===m){{o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for control point"),o=i.nextToken();const e=$(i);o=i.nextToken();const n=$(i);o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for control point"),y[0].setCoords(e,n)}o=i.nextToken();const e=$(i);o=i.nextToken();const n=$(i);o=i.nextToken();const r=$(i);y[1].setCoords(e,n),y[2].setCoords(r,r),o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for curve parameters"),a.segFlag=8}else if("q"===m){for(let e=0;e<1;e++){o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for control point"),o=i.nextToken();const n=$(i);o=i.nextToken();const r=$(i);o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for control point"),y[e].setCoords(n,r)}o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for curve parameters"),a.segFlag=16}else{o=i.nextToken(),2!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: start array is expected for interior point"),o=i.nextToken();const e=$(i);o=i.nextToken();const n=$(i);o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for interior point"),N.setCoords(e,n),o=i.nextToken(),4!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end array is expected for curve parameters"),a.segFlag=4}if(o=i.nextToken(),3!==o&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to parse curve: end object is expected for curve"),"a"===m)if(e.createEllipticArc(),f){const t=!0;me(e.get(),r,c,d,t,_,h)}else le(e.get(),r,c,d,_,h,p,k,b);else if("b"===m)e.createCubicBezier(),ce(e.get(),r,c,y);else if("n"===m)e.createQuadraticRationalBezier(),de(e.get(),r,c,y[0],y[1].x,y[1].y,y[2].x);else if("q"===m)e.createQuadraticBezier(),e.get().construct(r,y[0],c);else{e.createEllipticArc();const t=!1;me(e.get(),r,c,N,t,-1,-1)}return a}function me(e,t,n,r,i,s,a){e.dropAllAttributes();const o=20,u=new ArrayBuffer(o),m=new G({sz:o,buffer:u});let l=0;m.writeDouble(l,r.x),l+=8,m.writeDouble(l,r.y),l+=8;let c=0;i?(a||(c|=8),s&&(c|=16)):c|=128,m.writeInt32(l,c),l+=4,ie(e,t,n,m,0)}function le(e,t,n,r,i,s,a,o,u){e.dropAllAttributes();const m=44,l=new ArrayBuffer(m),c=new G({sz:m,buffer:l});let d=0;c.writeDouble(d,r.x),d+=8,c.writeDouble(d,r.y),d+=8,c.writeDouble(d,a),d+=8,c.writeDouble(d,o),d+=8,c.writeDouble(d,u),d+=8;let _=0;s||(_|=2048),i&&(_|=4096),c.writeInt32(d,_),d+=4,se(e,t,n,c,0)}function ce(e,t,n,r){e.dropAllAttributes();const i=32,s=new ArrayBuffer(i),a=new G({sz:i,buffer:s});let o=0;a.writeDouble(o,r[0].x),o+=8,a.writeDouble(o,r[0].y),o+=8,a.writeDouble(o,r[1].x),o+=8,a.writeDouble(o,r[1].y),o+=8,ae(e,t,n,a,0)}function de(e,t,n,r,i,s,a){e.dropAllAttributes();const o=40,u=new ArrayBuffer(o),m=new G({sz:o,buffer:u});let l=0;m.writeDouble(l,r.x),l+=8,m.writeDouble(l,r.y),l+=8,m.writeDouble(l,i),l+=8,m.writeDouble(l,s),l+=8,m.writeDouble(l,a),l+=8,oe(e,t,n,m,0)}function _e(e,t,n,r,i){const o=e.getGeometryType();if(o===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEllipticArc)return he(e,t,n,r,i);if(o===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier)return fe(e,t,n,r,i);if(o===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumRationalBezier2)return pe(e,t,n,r,i);if(o===_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumBezier2){const s=new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.y;return s.constructFromQuadraticSegment(e),fe(s,t,n,r,i)}(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("")}function he(e,t,r,i,s){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(!(0,_chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.z)(e));const a=e.getEndXY(),o=e.hasAttribute(1)&&!t,u=e.hasAttribute(2)&&!r;let m=Number.NaN,l=Number.NaN;if(o&&(m=e.getEndAttributeAsDbl(1,0)),u&&(l=e.getEndAttributeAsDbl(2,0)),e.isDegenerateToLine()||e.isDegenerate(0))return ke(o,u,a.x,a.y,m,l,i,s),!0;const c=0===e.projectionBehavior(),d=!!c&&e.isClosed();if(c&&!d)s.startObject(),s.addFieldName("c"),s.startArray(),ke(o,u,a.x,a.y,m,l,i,s),be(e.m_interior.x,e.m_interior.y,17,s),s.endArray(),s.endObject();else if(c){s.startObject(),s.addFieldName("a"),s.startArray(),ke(o,u,a.x,a.y,m,l,i,s);const t=0,n=0;be(e.m_center.x+t,e.m_center.y+n,17,s);const r=!e.isMajor();s.addInt32(r?1:0);const c=e.isClockwise();s.addInt32(c?1:0),s.endArray(),s.endObject()}else{s.startObject(),s.addFieldName("a"),s.startArray(),ke(o,u,a.x,a.y,m,l,i,s);const t=e;be(t.m_center.x,t.m_center.y,17,s);const n=!t.isMajor();s.addInt32(n?1:0);const r=t.isClockwise();s.addInt32(r?1:0),s.addDouble(t.m_rotation,17),s.addDouble(t.m_semiMajorAxis,17),s.addDouble(t.m_minorMajorRatio,17),s.endArray(),s.endObject()}return!1}function fe(e,t,n,r,i){const s=e.getEndXY(),a=e.hasAttribute(1)&&!t,o=e.hasAttribute(2)&&!n;let u=Number.NaN,m=Number.NaN;return a&&(u=e.getEndAttributeAsDbl(1,0)),o&&(m=e.getEndAttributeAsDbl(2,0)),i.startObject(),i.addFieldName("b"),i.startArray(),ke(a,o,s.x,s.y,u,m,r,i),be(e.m_cp[0].x,e.m_cp[0].y,r,i),be(e.m_cp[1].x,e.m_cp[1].y,r,i),i.endArray(),i.endObject(),!1}function pe(e,t,n,r,i){const s=e.getEndXY(),a=e.hasAttribute(1)&&!t,o=e.hasAttribute(2)&&!n;let u=Number.NaN,m=Number.NaN;a&&(u=e.getEndAttributeAsDbl(1,0)),o&&(m=e.getEndAttributeAsDbl(2,0)),i.startObject(),i.addFieldName("n"),i.startArray(),ke(a,o,s.x,s.y,u,m,r,i),be(e.m_cp.x,e.m_cp.y,r,i);const l=r;return i.addDouble(e.m_weights[0],l),i.addDouble(e.m_weights[1],l),i.addDouble(e.m_weights[2],l),i.endArray(),i.endObject(),!1}function ke(e,t,n,r,i,s,a,o){o.startArray(),o.addDouble(n,a),o.addDouble(r,a),e&&o.addDouble(i,a),t&&o.addDouble(s,a),o.endArray()}function be(e,t,n,r){r.startArray(),r.addDouble(e,n),r.addDouble(t,n),r.endArray()}class ye{getOperatorType(){return 10405}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}execute(e,t,n,r,i,s){Ne(e,t,n,r)}exportSpatialReference(e,t,r,i){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}exportProjectionTransformation(e,t,r,i){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}exportDatumTransformation(e,t,r,i){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}static geometryTypeToString(e){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),""}}function Ne(t,r,i,a,o){if(r||i){if(a.startObject(),null!==r){switch(r.getGeometryType()){case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon:Te(!0,t,r,a);break;case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline:Te(!1,t,r,a);break;case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint:ge(t,r,a);break;case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint:ve(t,r,a);break;case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope:xe(t,r,a);break;case _chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultipatch:(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0);break;default:(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("exportToJSON")}}null!==i&&(a.addFieldName("spatialReference"),Se(t,i,a)),a.endObject()}}function Te(e,t,r,i){const s=r.getImpl(),o=!!(2&t),u=!!(4&t),m=!!(8&t),l=s.hasAttribute(1)&&!o,c=s.hasAttribute(2)&&!u,d=s.hasAttribute(3)&&!m,_=s.hasNonLinearSegments();l&&(i.addFieldName("hasZ"),i.addBool(!0)),c&&(i.addFieldName("hasM"),i.addBool(!0)),e?_?i.addFieldName("curveRings"):i.addFieldName("rings"):_?i.addFieldName("curvePaths"):i.addFieldName("paths");let h=null;const f=[];if(r.isEmpty())i.startArray(),i.endArray();else{const e=17-(31&t>>13);i.startArray();const n=r.getPathCount();let m=0;const p=s.getAttributeStreamRef(0);let k=null,b=null,y=null;const N=new _chunks_MultiPathImpl_js__WEBPACK_IMPORTED_MODULE_4__.S;let T=null,g=null,v=null;_&&(T=s.getSegmentFlagsStreamRef(),g=s.getSegmentIndexStreamRef(),v=s.getSegmentDataStreamRef()),l&&(k=s.getAttributeStreamRef(1)),c&&(b=s.getAttributeStreamRef(2)),d&&(y=s.getAttributeStreamRef(3),h=(0,_chunks_Envelope_js__WEBPACK_IMPORTED_MODULE_3__.t)(3,0));for(let t=0;t<n;t++){i.startArray(),d&&f.push(0);const n=r.getPathEnd(t);if(m===n){i.endArray();continue}const s=r.isClosedPath(t);let _=p.read(2*m),x=p.read(2*m+1),A=l?k.read(m):Number.NaN,S=c?b.read(m):Number.NaN,w=d?y.read(m):0;we(l,c,_,x,A,S,e,i);let C=1;d&&(h.add(w),f[f.length-1]++);const D=_,F=x,j=A,z=S,O=w;let I=!1,E=0,B=Number.NaN,P=Number.NaN,V=0;for(let t=m+1,r=m,M=s?n+1:n;t<M;t++,r++){const s=null!==T?31&T.read(r):1;let m,M;if(t<n?(m=p.read(2*t),M=p.read(2*t+1),l&&(B=k.read(t)),c&&(P=b.read(t)),d&&(V=y.read(t))):(m=D,M=F,B=j,P=z,V=O),1!==s){I=!0,4===s?N.createEllipticArc():2===s?N.createCubicBezier():16===s?N.createQuadraticBezier():8===s?N.createQuadraticRationalBezier():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("JSON export.unsupported curve");const t=N.get(),n=g.read(r);t.setStartXYCoords(_,x),t.setEndXYCoords(m,M),l&&(t.setStartAttribute(1,0,A),t.setEndAttribute(1,0,B)),c&&(t.setStartAttribute(2,0,S),t.setEndAttribute(2,0,P)),t.readFromBufferStream(v,n);_e(N.get(),o,u,e,i)&&E++}else we(l,c,m,M,B,P,e,i);d&&(h.add(V),f[f.length-1]++),C++,_=m,x=M,A=B,S=P,w=V}I&&0===E||(C<2&&E<1&&(we(l,c,_,x,A,S,e,i),C++,d&&(h.add(w),f[f.length-1]++)),s&&C<3&&E<2&&(we(l,c,D,F,j,z,e,i),C++,_=D,x=F,A=j,S=z,w=O,d&&(h.add(O),f[f.length-1]++))),i.endArray(),m=n}i.endArray()}if(d){i.addFieldName("ids"),i.startArray();let e=0;for(let t=0,r=f.length;t<r;++t){const r=f[t];(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0===r||null!==h&&e+r<=h.size()),i.startArray();for(let t=0;t<r;++t)i.addInt32(h.read(e)),e++;i.endArray()}i.endArray()}}function ge(e,t,r){const i=t.getImpl(),s=i.hasAttribute(1)&&!(2&e),a=i.hasAttribute(2)&&!(4&e),o=i.hasAttribute(3)&&!(8&e);s&&(r.addFieldName("hasZ"),r.addBool(!0)),a&&(r.addFieldName("hasM"),r.addBool(!0)),r.addFieldName("points");const u=t.getPointCount();if(t.isEmpty())r.startArray(),r.endArray();else{const t=17-(31&e>>13);r.startArray();const n=i.getAttributeStreamRef(0);let o=null,m=null;s&&(o=i.getAttributeStreamRef(1)),a&&(m=i.getAttributeStreamRef(2));for(let e=0;e<u;e++){const i=n.read(2*e),u=n.read(2*e+1);let l=Number.NaN,c=Number.NaN;s&&(l=o.read(e)),a&&(c=m.read(e)),we(s,a,i,u,l,c,t,r)}r.endArray()}if(o){let e=null;i.isEmpty()||(e=i.getAttributeStreamRef(3)),(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0===u||null!==e&&e.size()>=u),r.addFieldName("ids"),r.startArray();for(let t=0;t<u;t++)r.addInt32(e.read(t));r.endArray()}}function ve(e,t,n){const r=t.hasAttribute(1)&&!(2&e),i=t.hasAttribute(2)&&!(4&e),s=t.hasAttribute(3)&&!(8&e);if(t.isEmpty())return n.addFieldName("x"),n.addNull(),n.addFieldName("y"),n.addNull(),r&&(n.addFieldName("z"),n.addNull()),i&&(n.addFieldName("m"),n.addNull()),void(s&&(n.addFieldName("id"),n.addInt32(0)));const a=17-(31&e>>13);n.addFieldName("x"),n.addDouble(t.getX(),a),n.addFieldName("y"),n.addDouble(t.getY(),a),r&&(n.addFieldName("z"),n.addDouble(t.getZ(),a)),i&&(n.addFieldName("m"),n.addDouble(t.getM(),a)),s&&(n.addFieldName("id"),n.addInt32(t.getID()))}function xe(e,t,n){const r=t.hasAttribute(1)&&!(2&e),i=t.hasAttribute(2)&&!(4&e),s=t.hasAttribute(3)&&!(8&e);if(t.isEmpty())return n.addFieldName("xmin"),n.addNull(),n.addFieldName("ymin"),n.addNull(),n.addFieldName("xmax"),n.addNull(),n.addFieldName("ymax"),n.addNull(),r&&(n.addFieldName("zmin"),n.addNull(),n.addFieldName("zmax"),n.addNull()),i&&(n.addFieldName("mmin"),n.addNull(),n.addFieldName("mmax"),n.addNull()),void(s&&(n.addFieldName("idmin"),n.addInt32(0),n.addFieldName("idmax"),n.addInt32(0)));const a=17-(31&e>>13);if(n.addFieldName("xmin"),n.addDouble(t.getXMin(),a),n.addFieldName("ymin"),n.addDouble(t.getYMin(),a),n.addFieldName("xmax"),n.addDouble(t.getXMax(),a),n.addFieldName("ymax"),n.addDouble(t.getYMax(),a),r){const e=t.queryInterval(1,0);n.addFieldName("zmin"),n.addDouble(e.vmin,a),n.addFieldName("zmax"),n.addDouble(e.vmax,a)}if(i){const e=t.queryInterval(2,0);n.addFieldName("mmin"),n.addDouble(e.vmin,a),n.addFieldName("mmax"),n.addDouble(e.vmax,a)}if(s){const e=t.queryInterval(3,0);n.addFieldName("idmin"),n.addInt32(e.vmin),n.addFieldName("idmax"),n.addInt32(e.vmax)}}function Ae(e,n,r){r.startObject();const i=n.getID();i<=0&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("cannot export unit that has no valid WKID"),r.addFieldName("uwkid"),r.addInt32(i),r.endObject()}function Se(e,t,n){n.startObject();let r=0;t.isCustomWkid()||(r=t.getOldID());let i=0;const s=t.getVCS();if(null!==s&&(s.isCustomWkid()||(i=s.getOldID()),i<=0&&(r=0)),r>0){n.addFieldName("wkid"),n.addInt32(r);const e=t.getLatestID();if(e>0&&e!==r&&(n.addFieldName("latestWkid"),n.addInt32(e)),i>0){n.addFieldName("vcsWkid"),n.addInt32(i);const e=t.getLatestVerticalID();e!==i&&(n.addFieldName("latestVcsWkid"),n.addInt32(e))}}if(0===t.getCoordinateSystemType())n.addFieldName("wkid"),n.addNull(),null!==t.getUnit()&&(n.addFieldName("unit"),Ae(e,t.getUnit(),n));else if(r<=0||1&e){let r="";64&e&&(r=t.getText2(),n.addFieldName("wkt2"),n.addString(r));const i=t.getText();i!==r&&(n.addFieldName("wkt"),n.addString(i))}if(16&e){const e=new _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aD;t.queryPrecisionDescriptor(e),n.addFieldName("xyTolerance"),n.addDouble(e.getTolerance(0)),n.addFieldName("zTolerance"),n.addDouble(e.getTolerance(1)),n.addFieldName("mTolerance"),n.addDouble(e.getTolerance(2)),n.addFieldName("falseX"),n.addDouble(e.getFalseX()),n.addFieldName("falseY"),n.addDouble(e.getFalseY()),n.addFieldName("xyUnits"),n.addDouble(e.getGridUnitsXY()),n.addFieldName("falseZ"),n.addDouble(e.getFalseZ()),n.addFieldName("zUnits"),n.addDouble(e.getGridUnitsZ()),n.addFieldName("falseM"),n.addDouble(e.getFalseM()),n.addFieldName("mUnits"),n.addDouble(e.getGridUnitsM())}n.endObject()}function we(e,t,n,r,i,s,a,o){o.startArray(),o.addDouble(n,a),o.addDouble(r,a),e&&o.addDouble(i,a),t&&o.addDouble(s,a),o.endArray()}const Ce={s_a:"a".charCodeAt(0),s_A:"A".charCodeAt(0),s_asterisk:"*".charCodeAt(0),s_b:"b".charCodeAt(0),s_backslash:"\\".charCodeAt(0),s_beginArray:"[".charCodeAt(0),s_beginObject:"{".charCodeAt(0),s_colon:":".charCodeAt(0),s_period:".".charCodeAt(0),s_comma:",".charCodeAt(0),s_doubleQuote:'"'.charCodeAt(0),s_endArray:"]".charCodeAt(0),s_endObject:"}".charCodeAt(0),s_e:"e".charCodeAt(0),s_E:"E".charCodeAt(0),s_f:"f".charCodeAt(0),s_F:"F".charCodeAt(0),s_forwardslash:"/".charCodeAt(0),s_minus:"-".charCodeAt(0),s_plus:"+".charCodeAt(0),s_n:"n".charCodeAt(0),s_N:"N".charCodeAt(0),s_r:"r".charCodeAt(0),s_t:"t".charCodeAt(0),s_u:"u".charCodeAt(0),s_zero:"0".charCodeAt(0),s_nine:"9".charCodeAt(0)};class De{constructor(t){this.m_functionStack=[],this.m_pushPositions=[],this.m_utf8Decoder=new TextDecoder("utf-8",{fatal:!0}),void 0===t?(this.m_startToken=Number.MAX_SAFE_INTEGER,this.m_endToken=0,this.m_currentTokenType=0,this.m_functionStack.push((()=>this.accept_())),this.m_jsonString=null,this.m_bHasEscapes=!1):t.jsonString?this.resetParserFromString(t.jsonString):t.jsonStream?(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("streaming json parsing not yet impl"):(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("invalid constructor parameter")}prepSubstrString_(){}getCurrentSubstrString_(){return this.m_jsonString.slice(this.m_startToken,this.m_endToken)}stepOverCharString_(){this.m_endToken++}peekCharString_(){return this.m_jsonString.charCodeAt(this.m_endToken)}getString_(e){const t=this.m_jsonString?.slice(this.m_startToken,this.m_startToken+e-1);this.m_endToken+=e-1;return{s:t,bDone:this.m_endToken>=this.m_jsonString.length}}incrementString_(){this.m_endToken++}eofString_(){return this.m_endToken>=this.m_jsonString.length}setStringFunctions_(){this.m_prepSubstr=this.prepSubstrString_,this.m_getCurrentSubstr=this.getCurrentSubstrString_,this.m_stepOverChar=this.stepOverCharString_,this.m_peekChar=this.peekCharString_,this.m_get=this.getString_,this.m_increment=this.incrementString_,this.m_eof=this.eofString_}setStreamFunctions_(){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("streaming json parsing not yet impl")}reset_(){this.m_jsonString=null,this.m_endToken=0,this.m_startToken=Number.MAX_SAFE_INTEGER,this.m_currentTokenType=0,this.m_bHasEscapes=!1,this.m_functionStack.length=0,this.m_functionStack.push((()=>this.start_())),this.m_pushPositions.length=0}resetParserFromString(e){this.reset_(),this.setStringFunctions_(),this.m_jsonString=e}resetParserFromStream(e){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.t)("streaming json parsing not yet impl")}resetToPosition(e){return!!this.m_jsonString&&(this.m_endToken=e,this.m_startToken=Number.MAX_VALUE,this.m_currentTokenType=0,this.m_functionStack.length=0,e>=this.m_jsonString.length?(this.m_functionStack.push((()=>this.accept_())),!1):(this.m_functionStack.push((()=>this.start_())),!0))}nextToken(){return this.m_functionStack.at(-1)(),this.m_currentTokenType}currentToken(){return this.m_currentTokenType}currentTokenStartIndex(){return this.m_startToken}currentTokenEndIndex(){return this.m_endToken}currentText(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),""}childrenAsString(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),""}skipChildren(){this.skipChildren_()}skipChildren_(){if(1!==this.m_currentTokenType)if(2!==this.m_currentTokenType);else{let e=1;do{this.m_currentTokenType=this.nextToken(),2===this.m_currentTokenType?e++:4===this.m_currentTokenType&&e--}while(4!==this.m_currentTokenType||0!==e)}else{let e=1;do{this.m_currentTokenType=this.nextToken(),1===this.m_currentTokenType?e++:3===this.m_currentTokenType&&e--}while(3!==this.m_currentTokenType||0!==e)}}currentTerminalAsString_(){switch(this.m_currentTokenType){case 7:case 8:case 9:return this.m_getCurrentSubstr().slice(0,this.m_endToken-this.m_startToken);case 10:return"null";case 11:return"true";case 12:return"false"}(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}toUTF8_(e,t){let n=0,r=e;for(;t.charCodeAt(r)===Ce.s_backslash&&t.charCodeAt(r+1)===Ce.s_u;)n++,r+=6;r=e;const i=new Uint8Array(n);let s=0;for(;t.charCodeAt(r)===Ce.s_backslash&&t.charCodeAt(r+1)===Ce.s_u;)i[s++]=Number.parseInt(t.slice(r+2,r+6),16),r+=6;return{u8s:this.m_utf8Decoder.decode(i),end:r}}unquoteCurrentString_(){let e="",t=1;const n=this.m_endToken-this.m_startToken-1;let r=0;const i=this.m_getCurrentSubstr();for(let s=t;s<n;s++)if(i.charCodeAt(s)!==Ce.s_backslash)r++;else{switch(r>0&&(e+=i.slice(t,t+r)),i.charCodeAt(++s)){case Ce.s_doubleQuote:e+='"';break;case Ce.s_u:{const{u8s:t,end:n}=this.toUTF8_(s-1,i);s=n-1,e+=t;break}case Ce.s_backslash:e+="\\";break;case Ce.s_forwardslash:e+="/";break;case Ce.s_b:e+="\b";break;case Ce.s_f:e+="\f";break;case Ce.s_n:e+="\n";break;case Ce.s_r:e+="\r";break;case Ce.s_t:e+="\t"}t=s+1,r=0}return r>0&&(e+=i.slice(t,t+r)),e}currentString(){if(5!==this.m_currentTokenType&&6!==this.m_currentTokenType)return this.currentTerminalAsString_();if(this.m_bHasEscapes)return this.unquoteCurrentString_();return this.m_getCurrentSubstr().slice(1,this.m_endToken-this.m_startToken-2+1)}currentDoubleValue(){if(7!==this.m_currentTokenType&&8!==this.m_currentTokenType&&9!==this.m_currentTokenType&&6!==this.m_currentTokenType&&10!==this.m_currentTokenType&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),10===this.m_currentTokenType)return Number.NaN;let e=this.m_getCurrentSubstr(),n=this.m_endToken-this.m_startToken;if(6===this.m_currentTokenType){if("NaN"===this.currentString())return Number.NaN;e=e.slice(1),n-=2,0===n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}const r=Number.parseFloat(e);if(6===this.m_currentTokenType)Number.isNaN(r)&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token");else if(Number.isNaN(r))return Number.NaN;return r}currentInt32Value(){8!==this.m_currentTokenType&&6!==this.m_currentTokenType&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token");let e=this.m_getCurrentSubstr(),n=this.m_endToken-this.m_startToken;6===this.m_currentTokenType&&(e=e.slice(1),n-=2,0===n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"));const r=parseInt(e);return Number.isNaN(r)&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),r}currentInt64Value(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),0n}currentBoolValue(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}isError(){return 0}JSONString(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),""}pushPosition(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}popPosition(){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),!1}skipCStyleComments_(){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}skipCppStyleComments_(){(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0)}skipComments_(){this.m_prepSubstr();let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar(),e===Ce.s_asterisk?this.skipCStyleComments_():e===Ce.s_forwardslash?this.skipCppStyleComments_():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}skipWhiteSpace_(){let e;do{this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token");let n=this.m_peekChar();for(;n>=9&&n<=13||32===n;)this.m_increment(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),n=this.m_peekChar();n===Ce.s_forwardslash?(this.m_startToken=this.m_endToken,e=!0,this.skipComments_()):e=!1}while(e)}rightBracket_(){return this.m_peekChar()===Ce.s_endArray&&(this.m_startToken=this.m_endToken,this.m_increment(),this.m_currentTokenType=4,!0)}rightBrace_(){return this.m_peekChar()===Ce.s_endObject&&(this.m_startToken=this.m_endToken,this.m_increment(),this.m_currentTokenType=3,!0)}string_(){this.m_prepSubstr(),this.m_bHasEscapes=!1,this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token");let e=this.m_peekChar();for(;e!==Ce.s_doubleQuote;){const n=e===Ce.s_backslash;if(this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar(),n)if(this.m_bHasEscapes=!0,e===Ce.s_doubleQuote||e===Ce.s_backslash||e===Ce.s_forwardslash||e===Ce.s_b||e===Ce.s_f||e===Ce.s_n||e===Ce.s_r||e===Ce.s_t)this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar();else if(e===Ce.s_u)for(let r=0;r<4;r++)this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar(),e>=Ce.s_zero&&e<=Ce.s_nine||e>=Ce.s_a&&e<=Ce.s_f||e>=Ce.s_A&&e<=Ce.s_F||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token");else (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}this.m_stepOverChar()}comma_(){return this.m_peekChar()===Ce.s_comma&&(this.m_increment(),!0)}colon_(){return this.m_peekChar()===Ce.s_colon&&(this.m_increment(),!0)}fieldNameEnd_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.colon_()?(this.skipWhiteSpace_(),this.value_()):(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}fieldNameStart_(){this.m_startToken=this.m_endToken;this.m_peekChar()!==Ce.s_doubleQuote&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.string_(),this.m_currentTokenType=5,this.m_functionStack.push((()=>this.fieldNameEnd_()))}pairEnd_(){this.skipWhiteSpace_(),this.comma_()?(this.skipWhiteSpace_(),this.fieldNameStart_()):this.rightBrace_()?this.m_functionStack.pop():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}arrayStart_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.rightBracket_()||(this.m_functionStack.push((()=>this.elementEnd_())),this.value_())}elementEnd_(){this.skipWhiteSpace_(),this.comma_()?(this.skipWhiteSpace_(),this.value_()):this.rightBracket_()?this.m_functionStack.pop():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}objectStart_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.rightBrace_()||(this.m_functionStack.push((()=>this.pairEnd_())),this.fieldNameStart_())}valueStartObject_(){this.m_increment(),this.m_currentTokenType=1,this.m_functionStack.push((()=>this.objectStart_()))}valueStartArray_(){this.m_increment(),this.m_currentTokenType=2,this.m_functionStack.push((()=>this.arrayStart_()))}valueString_(){this.string_(),this.m_currentTokenType=6}int_(){this.m_peekChar()!==Ce.s_zero?this.digits_():this.m_stepOverChar()}digits_(){let e=this.m_peekChar();do{this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar()}while(e>=Ce.s_zero&&e<=Ce.s_nine)}frac_(){let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar(),e>=Ce.s_zero&&e<=Ce.s_nine||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.digits_()}exp_(){let e=this.m_peekChar();this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar(),e!==Ce.s_plus&&e!==Ce.s_minus||(this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),e=this.m_peekChar()),e>=Ce.s_zero&&e<=Ce.s_nine||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.digits_()}valueNumber_(){this.m_prepSubstr();let e=!1,n=this.m_peekChar();if(n===Ce.s_minus?(this.m_stepOverChar(),this.m_eof()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),n=this.m_peekChar(),e=!0,n>=Ce.s_zero&&n<=Ce.s_nine||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.int_()):this.int_(),n=this.m_peekChar(),n===Ce.s_period)this.m_currentTokenType=7,this.frac_(),n=this.m_peekChar(),n!==Ce.s_e&&n!==Ce.s_E||this.exp_();else if(n===Ce.s_e||n===Ce.s_E)this.m_currentTokenType=7,this.exp_();else{let t=0;e&&t++;const n=this.m_endToken-this.m_startToken-t;if(n<10)this.m_currentTokenType=8;else if(10===n){const n=this.m_getCurrentSubstr();e?n.slice(t)<="2147483648"?this.m_currentTokenType=8:this.m_currentTokenType=9:n.slice(t)<="2147483647"?this.m_currentTokenType=8:this.m_currentTokenType=9}else if(n<19)this.m_currentTokenType=9;else if(19===n){const n=this.m_getCurrentSubstr();e?n.slice(t)<="9223372036854775808"?this.m_currentTokenType=9:this.m_currentTokenType=7:n.slice(t)<="9223372036854775807"?this.m_currentTokenType=9:this.m_currentTokenType=7}else this.m_currentTokenType=7}}valueNull_(){const{s:e,bDone:n}=this.m_get(5);n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),"null"!==e&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentTokenType=10}valueTrue_(){const{s:e,bDone:n}=this.m_get(5);n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),"true"!==e&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentTokenType=11}valueFalse_(){const{s:e,bDone:n}=this.m_get(6);n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),"false"!==e&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentTokenType=12}valueNan_(){const{s:e,bDone:n}=this.m_get(4);n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),"NaN"!==e&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.m_currentTokenType=7}value_(){this.m_startToken=this.m_endToken;const e=this.m_peekChar();e===Ce.s_beginObject?this.valueStartObject_():e===Ce.s_beginArray?this.valueStartArray_():e===Ce.s_doubleQuote?this.valueString_():e===Ce.s_minus||e>=Ce.s_zero&&e<=Ce.s_zero+9?this.valueNumber_():e===Ce.s_n?this.valueNull_():e===Ce.s_t?this.valueTrue_():e===Ce.s_f?this.valueFalse_():e===Ce.s_N?this.valueNan_():(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token")}start_(){this.skipWhiteSpace_(),this.m_functionStack.pop(),this.m_functionStack.push((()=>this.accept_()));const e=this.m_peekChar();e!==Ce.s_beginObject&&e!==Ce.s_beginArray&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("invalid token"),this.value_()}accept_(){this.m_startToken=this.m_endToken,this.m_currentTokenType=0}}class Fe{getOperatorType(){return 10404}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}supportsCurves(){return!0}execute(e,n,r,i,s,a,o){let u;"string"==typeof r?(u=new De({jsonString:r}),u.nextToken()):u=r,1!==u.currentToken()&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("failed to import map geometry: start of object is expected");const m=K(n,e,u,i,s);return new _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aF(m)}importSpatialReference(t){const n=Q(t);return null===n&&(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.d)("failed to import spatial reference"),n}importProjectionTransformation(e,t){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),{}}importDatumTransformation(e,t){return (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.g)(0),{}}static stringToGeometryType(e){return(e=e.toLowerCase()).startsWith("esrigeometry")||(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("string_to_geometry_type"),e.endsWith("point")?_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPoint:e.endsWith("envelope")?_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumEnvelope:e.endsWith("multipoint")?_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumMultiPoint:e.endsWith("polyline")?_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolyline:e.endsWith("polygon")?_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumPolygon:void (0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.a)("string_to_geometry_type")}}const je=new Y,ze=new ye,Oe=new Fe;function Ie(e){return Array.isArray(e)?e[0].spatialReference:e.spatialReference}function Ee(e,t){const n=new L(e,{strict:!1});return n.nextToken(),Oe.execute(0,_chunks_Geometry_js__WEBPACK_IMPORTED_MODULE_0__.G.enumUnknown,n,!0,t)}function Be(e){let t=null;return[e.map((e=>{if(null==t){const n=Pe(e);return t=n.getSpatialReference(),n.getGeometry()}return Ve(e)})),t]}function Pe(e){return Ee(e,!0)}function Ve(e){return Ee(e,!1).getGeometry()}function Me(e,t){return e instanceof _chunks_ProjectionTransformation_js__WEBPACK_IMPORTED_MODULE_2__.aF&&(t=e.getSpatialReference(),e=e.getGeometry()),e?.isEmpty()?null:(je.reset(),ze.execute(0,e,t,je),je.getObject())}


/***/ }),

/***/ 70397:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony export projectVectorToPointAsync */
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/* harmony import */ var _projectionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68490);
/* harmony import */ var _projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(r,t,o){return!!(0,_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_2__/* .projectVectorToVector */ .F)(r,t,i,o.spatialReference)&&(o.x=i[0],o.y=i[1],o.z=i[2],!0)}async function c(r,e,c,i){return await t(e,c.spatialReference,null,i),o(r,e,c)}const i=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)();


/***/ }),

/***/ 50961:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AK: () => (/* binding */ e),
/* harmony export */   Wz: () => (/* binding */ a),
/* harmony export */   oe: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony export compactFloatArray */
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,t=!1){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?t?new Array(n).fill(0):new Array(n):new Float32Array(n)}function t(n){return Array.isArray(n)?n.length<r?n:new Float32Array(n):n.length<r?Array.from(n):n}function a(n){return(Array.isArray(n)?n.length:n.byteLength/8)<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?Array.from(n):new Float32Array(n)}function e(r,n,t){return Array.isArray(r)?r.slice(n,n+t):r.subarray(n,n+t)}


/***/ }),

/***/ 42965:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dg: () => (/* binding */ e),
/* harmony export */   EH: () => (/* binding */ U),
/* harmony export */   JH: () => (/* binding */ a),
/* harmony export */   my: () => (/* binding */ f),
/* harmony export */   tM: () => (/* binding */ A),
/* harmony export */   uW: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export pruneIndexArrays */
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(r){return e(r,!0)}function e(t,e){if(Array.isArray(t)){if(t.length<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return t}else if(t.length<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return Array.from(t);let f=!0,a=!0;return t.some(((r,n)=>(f=f&&0===r,a=a&&r===n,!f&&!a))),f?U(t.length):a?A(t.length):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isTypedArray */ .iu)(t)&&t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT?t:i(t,!e)}function i(r,t){for(const e of r){if(e>=65536)return (0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isTypedArray */ .iu)(r)?r:new Uint32Array(r);e>=256&&(t=!1)}return t?new Uint8Array(r):new Uint16Array(r)}function f(n){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?new Array(n):n<=65536?new Uint16Array(n):new Uint32Array(n)}function a(n){return n<=_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?new Array(n):new Uint32Array(n)}let u=l(131072);const o=[0],y=(()=>{const r=new Uint16Array(65536);for(let n=0;n<r.length;++n)r[n]=n;return r})();function A(n){return 1===n?o:n<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9?Array.from(new Uint16Array(y.buffer,0,n)):n<y.length?new Uint16Array(y.buffer,0,n):(n>u.length&&(u=l(Math.max(2*u.length,n))),new Uint32Array(u.buffer,0,n))}function l(r){const n=new Uint32Array(r);for(let t=0;t<n.length;t++)n[t]=t;return n}let w=new Uint8Array(65536);function U(n){if(1===n)return o;if(n<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return new Array(n).fill(0);if(n>w.length){const r=Math.max(2*w.length,n);w=new Uint8Array(r)}return new Uint8Array(w.buffer,0,n)}function c(){u=l(131072),w=new Uint8Array(65536)}


/***/ }),

/***/ 97557:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var c;let i=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)){static{c=this}constructor(e){super(e),this.type="georeferenced",this.origin=null}static{this.absolute=new c}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__/* .enumeration */ .e)({georeferenced:"georeferenced"},{readOnly:!0})],i.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],i.prototype,"origin",void 0),i=c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],i);


/***/ }),

/***/ 99218:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(58359);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)){constructor(o){super(o),this.type="local",this.origin=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_9__/* .create */ .vt)()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_7__/* .enumeration */ .e)({local:"local"},{readOnly:!0})],i.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],i.prototype,"origin",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.geometry.support.MeshLocalVertexSpace")],i);


/***/ }),

/***/ 57813:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Y$: () => (/* binding */ f),
  XW: () => (/* binding */ a),
  qB: () => (/* binding */ B),
  Qt: () => (/* binding */ H),
  My: () => (/* binding */ P),
  bf: () => (/* binding */ z),
  jZ: () => (/* binding */ d),
  j0: () => (/* binding */ x),
  Sx: () => (/* binding */ E),
  E$: () => (/* binding */ A),
  h: () => (/* binding */ w),
  P: () => (/* binding */ v),
  SL: () => (/* binding */ I),
  gH: () => (/* binding */ y),
  ZD: () => (/* binding */ p),
  si: () => (/* binding */ b),
  mJ: () => (/* binding */ J),
  UL: () => (/* binding */ Q),
  D6: () => (/* binding */ C),
  Yi: () => (/* binding */ L),
  An: () => (/* binding */ S),
  LC: () => (/* binding */ j),
  xs: () => (/* binding */ o),
  EC: () => (/* binding */ h),
  Xm: () => (/* binding */ U),
  Vp: () => (/* binding */ K),
  zD: () => (/* binding */ R),
  m8: () => (/* binding */ D),
  nS: () => (/* binding */ V),
  H$: () => (/* binding */ k),
  eI: () => (/* binding */ O),
  Eq: () => (/* binding */ T),
  jz: () => (/* binding */ m),
  Aj: () => (/* binding */ F),
  E7: () => (/* binding */ N),
  Y4: () => (/* binding */ W),
  TX: () => (/* binding */ G),
  Uz: () => (/* binding */ M),
  ml: () => (/* binding */ q),
  XP: () => (/* binding */ g)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/float16.js
var float16 = __webpack_require__(11449);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Mat3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{static{this.ElementCount=9}constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=9;const i=this.TypedArrayConstructor;void 0===f&&(f=9*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<9;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;for(let u=0;u<9;++u)f[i++]=s[d++]}get buffer(){return this.typedBuffer.buffer}}

;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Mat4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Mat4_t{static{this.ElementCount=16}constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=16;const i=this.TypedArrayConstructor;void 0===f&&(f=16*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)e[f]=this.typedBuffer[r++];return e}setMat(t,e){let r=t*this.typedBufferStride;for(let f=0;f<16;f++)this.typedBuffer[r++]=e[f]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}copyFrom(t,e,r){this.copyFromTypedBuffer(t,e.typedBuffer,r*e.typedBufferStride)}copyFromTypedBuffer(t,e,r){const f=this.typedBuffer;let s=t*this.typedBufferStride;for(let i=0;i<16;++i)f[s++]=e[r++]}get buffer(){return this.typedBuffer.buffer}}

;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Scalar.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Scalar_t{static{this.ElementCount=1}constructor(t,e,r=0,s,i){this.TypedArrayConstructor=t,this.elementCount=1;const f=this.TypedArrayConstructor;void 0===s&&(s=f.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==i?new f(e,u):new f(e,u,(i-r)/f.BYTES_PER_ELEMENT),this.stride=s,this.typedBufferStride=s/f.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(t,e,r=this.count-e){const s=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,s,this.stride,s+r*this.stride)}get(t){return this.typedBuffer[t*this.typedBufferStride]}set(t,e){this.typedBuffer[t*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec2.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{static{this.ElementCount=2}constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=2;const i=this.TypedArrayConstructor;void 0===f&&(f=2*i.BYTES_PER_ELEMENT);const d=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,d):new i(e,d,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec2/* set */.hZ)(r,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t]=e[1]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t]=r}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,d=r*e.typedBufferStride;f[i++]=s[d++],f[i]=s[d]}get buffer(){return this.typedBuffer.buffer}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Vec3_e{static{this.ElementCount=3}constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.elementCount=3;const i=this.TypedArrayConstructor;void 0===f&&(f=3*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec32.i)(r,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t]=e[2]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t]=f}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
;// ../node_modules/@arcgis/core/geometry/support/buffer/internals/Vec4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Vec4_e{static{this.ElementCount=4}constructor(t,e,r=0,f,s){this.TypedArrayConstructor=t,this.start=r,this.elementCount=4;const i=this.TypedArrayConstructor;void 0===f&&(f=4*i.BYTES_PER_ELEMENT);const u=0===e.byteLength?0:r;this.typedBuffer=null==s?new i(e,u):new i(e,u,(s-r)/i.BYTES_PER_ELEMENT),this.typedBufferStride=f/i.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(t,e,r=this.count-e){const f=this.typedBuffer.byteOffset+e*this.stride;return new t(this.buffer,f,this.stride,f+r*this.stride)}getVec(e,r){return e*=this.typedBufferStride,(0,vec42.s)(r,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(t,e){t*=this.typedBufferStride,this.typedBuffer[t++]=e[0],this.typedBuffer[t++]=e[1],this.typedBuffer[t++]=e[2],this.typedBuffer[t]=e[3]}get(t,e){return this.typedBuffer[t*this.typedBufferStride+e]}set(t,e,r){this.typedBuffer[t*this.typedBufferStride+e]=r}setValues(t,e,r,f,s){t*=this.typedBufferStride,this.typedBuffer[t++]=e,this.typedBuffer[t++]=r,this.typedBuffer[t++]=f,this.typedBuffer[t]=s}copyFrom(t,e,r){const f=this.typedBuffer,s=e.typedBuffer;let i=t*this.typedBufferStride,u=r*e.typedBufferStride;f[i++]=s[u++],f[i++]=s[u++],f[i++]=s[u++],f[i]=s[u]}get buffer(){return this.typedBuffer.buffer}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
;// ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends Scalar_t{constructor(s,r=0,i,n){(0,Util/* assert */.vA)(float16/* hasNativeFloat16Array */.SX),super((0,float16/* getFloat16ArrayConstructor */.pX)(),s,r,i,n),this.elementType="f16"}static{this.ElementType="f16"}}class f extends Scalar_t{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}static{this.ElementType="f32"}}class p extends e{constructor(s,r=0,i,n){(0,Util/* assert */.vA)(float16/* hasNativeFloat16Array */.SX),super((0,float16/* getFloat16ArrayConstructor */.pX)(),s,r,i,n),this.elementType="f16"}slice(e,t){return this.sliceBuffer(p,e,t)}static{this.ElementType="f16"}}class y extends e{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}slice(e,t){return this.sliceBuffer(y,e,t)}static{this.ElementType="f32"}}class h extends Vec3_e{constructor(s,r=0,i,n){(0,Util/* assert */.vA)(float16/* hasNativeFloat16Array */.SX),super((0,float16/* getFloat16ArrayConstructor */.pX)(),s,r,i,n),this.elementType="f16"}slice(e,t){return this.sliceBuffer(h,e,t)}static{this.ElementType="f16"}}class o extends Vec3_e{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}slice(e,t){return this.sliceBuffer(o,e,t)}static fromTypedArray(e,t){return new o(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="f32"}}class m extends Vec4_e{constructor(s,r=0,i,n){(0,Util/* assert */.vA)(float16/* hasNativeFloat16Array */.SX),super((0,float16/* getFloat16ArrayConstructor */.pX)(),s,r,i,n),this.elementType="f16"}slice(e,t){return this.sliceBuffer(m,e,t)}static{this.ElementType="f16"}}class T extends Vec4_e{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}slice(e,t){return this.sliceBuffer(T,e,t)}static{this.ElementType="f32"}}class d extends t{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}slice(e,t){return this.sliceBuffer(d,e,t)}static{this.ElementType="f32"}}class x extends t{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(x,e,t)}static{this.ElementType="f64"}}class E extends Mat4_t{constructor(e,t=0,s,r){super(Float32Array,e,t,s,r),this.elementType="f32"}slice(e,t){return this.sliceBuffer(E,e,t)}static{this.ElementType="f32"}}class A extends Mat4_t{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(A,e,t)}static{this.ElementType="f64"}}class B extends Scalar_t{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(B,e,t)}static{this.ElementType="f64"}}class b extends e{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(b,e,t)}static{this.ElementType="f64"}}class U extends Vec3_e{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(U,e,t)}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="f64"}}class F extends Vec4_e{constructor(e,t=0,s,r){super(Float64Array,e,t,s,r),this.elementType="f64"}slice(e,t){return this.sliceBuffer(F,e,t)}static{this.ElementType="f64"}}class I extends Scalar_t{constructor(e,t=0,s,r){super(Uint8Array,e,t,s,r),this.elementType="u8"}slice(e,t){return this.sliceBuffer(I,e,t)}static{this.ElementType="u8"}}class j extends e{constructor(e,t=0,s,r){super(Uint8Array,e,t,s,r),this.elementType="u8"}slice(e,t){return this.sliceBuffer(j,e,t)}static{this.ElementType="u8"}}class O extends Vec3_e{constructor(e,t=0,s,r){super(Uint8Array,e,t,s,r),this.elementType="u8"}slice(e,t){return this.sliceBuffer(O,e,t)}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}static{this.ElementType="u8"}}class g extends Vec4_e{constructor(e,t=0,s,r){super(Uint8Array,e,t,s,r),this.elementType="u8"}slice(e,t){return this.sliceBuffer(g,e,t)}static{this.ElementType="u8"}}class w extends Scalar_t{constructor(e,t=0,s,r){super(Uint16Array,e,t,s,r),this.elementType="u16"}slice(e,t){return this.sliceBuffer(w,e,t)}static{this.ElementType="u16"}}class L extends e{constructor(e,t=0,s,r){super(Uint16Array,e,t,s,r),this.elementType="u16"}slice(e,t){return this.sliceBuffer(L,e,t)}static{this.ElementType="u16"}}class V extends Vec3_e{constructor(e,t=0,s,r){super(Uint16Array,e,t,s,r),this.elementType="u16"}slice(e,t){return this.sliceBuffer(V,e,t)}static{this.ElementType="u16"}}class M extends Vec4_e{constructor(e,t=0,s,r){super(Uint16Array,e,t,s,r),this.elementType="u16"}slice(e,t){return this.sliceBuffer(M,e,t)}static{this.ElementType="u16"}}class v extends Scalar_t{constructor(e,t=0,s,r){super(Uint32Array,e,t,s,r),this.elementType="u32"}slice(e,t){return this.sliceBuffer(v,e,t)}static{this.ElementType="u32"}}class S extends e{constructor(e,t=0,s,r){super(Uint32Array,e,t,s,r),this.elementType="u32"}slice(e,t){return this.sliceBuffer(S,e,t)}static{this.ElementType="u32"}}class k extends Vec3_e{constructor(e,t=0,s,r){super(Uint32Array,e,t,s,r),this.elementType="u32"}slice(e,t){return this.sliceBuffer(k,e,t)}static{this.ElementType="u32"}}class q extends Vec4_e{constructor(e,t=0,s,r){super(Uint32Array,e,t,s,r),this.elementType="u32"}slice(e,t){return this.sliceBuffer(q,e,t)}static{this.ElementType="u32"}}class z extends Scalar_t{constructor(e,t=0,s,r){super(Int8Array,e,t,s,r),this.elementType="i8"}slice(e,t){return this.sliceBuffer(z,e,t)}static{this.ElementType="i8"}}class C extends e{constructor(e,t=0,s,r){super(Int8Array,e,t,s,r),this.elementType="i8"}slice(e,t){return this.sliceBuffer(C,e,t)}static{this.ElementType="i8"}}class D extends Vec3_e{constructor(e,t=0,s,r){super(Int8Array,e,t,s,r),this.elementType="i8"}slice(e,t){return this.sliceBuffer(D,e,t)}static{this.ElementType="i8"}}class G extends Vec4_e{constructor(e,t=0,s,r){super(Int8Array,e,t,s,r),this.elementType="i8"}slice(e,t){return this.sliceBuffer(G,e,t)}static{this.ElementType="i8"}}class H extends Scalar_t{constructor(e,t=0,s,r){super(Int16Array,e,t,s,r),this.elementType="i16"}slice(e,t){return this.sliceBuffer(H,e,t)}static{this.ElementType="i16"}}class J extends e{constructor(e,t=0,s,r){super(Int16Array,e,t,s,r),this.elementType="i16"}slice(e,t){return this.sliceBuffer(J,e,t)}static{this.ElementType="i16"}}class K extends Vec3_e{constructor(e,t=0,s,r){super(Int16Array,e,t,s,r),this.elementType="i16"}slice(e,t){return this.sliceBuffer(K,e,t)}static{this.ElementType="i16"}}class N extends Vec4_e{constructor(e,t=0,s,r){super(Int16Array,e,t,s,r),this.elementType="i16"}slice(e,t){return this.sliceBuffer(N,e,t)}static{this.ElementType="i16"}}class P extends Scalar_t{constructor(e,t=0,s,r){super(Int32Array,e,t,s,r),this.elementType="i32"}slice(e,t){return this.sliceBuffer(P,e,t)}static{this.ElementType="i32"}}class Q extends e{constructor(e,t=0,s,r){super(Int32Array,e,t,s,r),this.elementType="i32"}slice(e,t){return this.sliceBuffer(Q,e,t)}static{this.ElementType="i32"}}class R extends Vec3_e{constructor(e,t=0,s,r){super(Int32Array,e,t,s,r),this.elementType="i32"}slice(e,t){return this.sliceBuffer(R,e,t)}static{this.ElementType="i32"}}class W extends Vec4_e{constructor(e,t=0,s,r){super(Int32Array,e,t,s,r),this.elementType="i32"}slice(e,t){return this.sliceBuffer(W,e,t)}static{this.ElementType="i32"}}


/***/ }),

/***/ 32846:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GJ: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony exports isInteger, isSigned, maximumValue */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":case"f16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}function c(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f16":case"f32":case"f64":return!0}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f16":case"f32":case"f64":return!1}}function a(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f16":return 65504;case"f32":return 3402823e32;case"f64":return 179769e303}}


/***/ }),

/***/ 6214:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $e: () => (/* binding */ y),
/* harmony export */   j1: () => (/* binding */ p),
/* harmony export */   mO: () => (/* binding */ g),
/* harmony export */   vt: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony exports copy, fromLineSegmentAndDirection, fromValues, getAt, wrap */
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92114);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _ray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(10151);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(r){return r?{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(r.ray),c0:r.c0,c1:r.c1}:{ray:(0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),c0:0,c1:Number.MAX_VALUE}}function i(r,c,n){const t=A.get();return t.ray=r,t.c0=c,t.c1=n,t}function f(r,c=a()){return s(r.ray,r.c0,r.c1,c)}function s(r,c,n,t=a()){return o(r,t.ray),t.c0=c,t.c1=n,t}function y(r,c=a()){return (0,_ray_js__WEBPACK_IMPORTED_MODULE_1__/* .copy */ .C)(r,c.ray),c.c0=0,c.c1=Number.MAX_VALUE,c}function m(r,n,t=a()){const o=c(r.vector);return u(r.origin,n,t.ray),t.c0=0,t.c1=o,t}function p(r,c){return j(r,r.c0,c)}function g(r,c){return j(r,r.c1,c)}function j(r,c,o){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.f)(o,r.ray.origin,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(o,r.ray.direction,c))}const A=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_2__/* .ObjectStack */ .I((()=>a()));


/***/ }),

/***/ 11449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bg: () => (/* binding */ t),
/* harmony export */   SX: () => (/* binding */ r),
/* harmony export */   pX: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony exports disableNativeF16Array, resetNativeF16Array */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=globalThis.Float16Array;function t(...t){return new(n??Float32Array)(...t)}function l(){return n}let r=!!n;function o(){n=null,r=!1}function a(){n=globalThis.Float16Array,r=!!n}


/***/ }),

/***/ 94982:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   C: () => (/* binding */ N),
/* harmony export */   FB: () => (/* binding */ j),
/* harmony export */   ig: () => (/* binding */ m),
/* harmony export */   m7: () => (/* binding */ s),
/* harmony export */   ui: () => (/* binding */ L),
/* harmony export */   vt: () => (/* binding */ H)
/* harmony export */ });
/* unused harmony exports PointIndex, computePlanes, createPoints, intersectsLineSegment, intersectsPoint, intersectsRay, numPlanes, numPoints, planePointIndices */
/* harmony import */ var _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(92114);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(28152);
/* harmony import */ var _clipRay_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6214);
/* harmony import */ var _plane_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(38774);
/* harmony import */ var _vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(45573);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function H(T){return T?[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[0]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[1]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[2]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[3]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[4]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(T[5])]:[(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)()]}function I(){return[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()]}function N(T,_){for(let O=0;O<b;O++)(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(T[O],_[O]);return T}function L(T,t,A,E=y){const F=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__/* .sm4d */ .Rc.get(),t,T);(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .invert */ .B8)(F,F);for(let _=0;_<h;++_){const T=(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_3__.t)(_vectorStacks_js__WEBPACK_IMPORTED_MODULE_7__/* .sv4d */ .Km.get(),k[_],F);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.i)(E[_],T[0]/T[3],T[1]/T[3],T[2]/T[3])}P(A,E)}function P(T,_){(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.FAR_BOTTOM_LEFT],_[g.NEAR_BOTTOM_LEFT],_[g.NEAR_TOP_LEFT],T[j.LEFT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.NEAR_BOTTOM_RIGHT],_[g.FAR_BOTTOM_RIGHT],_[g.FAR_TOP_RIGHT],T[j.RIGHT]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.FAR_BOTTOM_LEFT],_[g.FAR_BOTTOM_RIGHT],_[g.NEAR_BOTTOM_RIGHT],T[j.BOTTOM]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.NEAR_TOP_LEFT],_[g.NEAR_TOP_RIGHT],_[g.FAR_TOP_RIGHT],T[j.TOP]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.NEAR_BOTTOM_LEFT],_[g.NEAR_BOTTOM_RIGHT],_[g.NEAR_TOP_RIGHT],T[j.NEAR]),(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .fromPoints */ .Cr)(_[g.FAR_BOTTOM_RIGHT],_[g.FAR_BOTTOM_LEFT],_[g.FAR_TOP_LEFT],T[j.FAR])}function s(T,_){for(let O=0;O<b;O++){const R=T[O];if(R[0]*_[0]+R[1]*_[1]+R[2]*_[2]+R[3]>=_[3])return!1}return!0}function u(T,_){return p(T,E(_,x.get()))}function m(T,_){for(let O=0;O<b;O++){const R=T[O];if(!(0,_plane_js__WEBPACK_IMPORTED_MODULE_6__/* .clipInfinite */ .b6)(R,_))return!1}return!0}function a(T,_,O){return p(T,F(_,O,x.get()))}function l(T,_){for(let O=0;O<b;O++){if(c(T[O],_)>0)return!1}return!0}function p(T,_){for(let O=0;O<b;O++)if(!f(T[O],_))return!1;return!0}var j,g;!function(T){T[T.LEFT=0]="LEFT",T[T.RIGHT=1]="RIGHT",T[T.BOTTOM=2]="BOTTOM",T[T.TOP=3]="TOP",T[T.NEAR=4]="NEAR",T[T.FAR=5]="FAR"}(j||(j={})),function(T){T[T.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",T[T.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",T[T.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",T[T.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",T[T.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",T[T.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",T[T.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",T[T.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(g||(g={}));const v={bottom:[g.FAR_BOTTOM_RIGHT,g.NEAR_BOTTOM_RIGHT,g.NEAR_BOTTOM_LEFT,g.FAR_BOTTOM_LEFT],near:[g.NEAR_BOTTOM_LEFT,g.NEAR_BOTTOM_RIGHT,g.NEAR_TOP_RIGHT,g.NEAR_TOP_LEFT],far:[g.FAR_BOTTOM_RIGHT,g.FAR_BOTTOM_LEFT,g.FAR_TOP_LEFT,g.FAR_TOP_RIGHT],right:[g.NEAR_BOTTOM_RIGHT,g.FAR_BOTTOM_RIGHT,g.FAR_TOP_RIGHT,g.NEAR_TOP_RIGHT],left:[g.FAR_BOTTOM_LEFT,g.NEAR_BOTTOM_LEFT,g.NEAR_TOP_LEFT,g.FAR_TOP_LEFT],top:[g.FAR_TOP_LEFT,g.NEAR_TOP_LEFT,g.NEAR_TOP_RIGHT,g.FAR_TOP_RIGHT]},b=6,h=8,k=[(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(-1,-1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(1,-1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(1,1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(-1,1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(-1,-1,1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(1,-1,1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(1,1,1,1),(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(-1,1,1,1)],x=new _core_ObjectStack_js__WEBPACK_IMPORTED_MODULE_8__/* .ObjectStack */ .I(_clipRay_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt),y=I();


/***/ }),

/***/ 52209:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _Indices_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42965);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,s,u){const c=Array.isArray(e),a=c?e.length/s:e.byteLength/(4*s),h=c?e:new Uint32Array(e,0,a*s),y=u?.minReduction??0,A=u?.originalIndices||null,g=A?A.length:0,m=u?.componentOffsets||null;let w=0;if(m)for(let t=0;t<m.length-1;t++){const n=m[t+1]-m[t];n>w&&(w=n)}else w=a;const U=Math.floor(1.1*w)+1;(null==i||i.length<2*U)&&(i=new Uint32Array((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .nextHighestPowerOfTwo */ .cU)(2*U)));for(let t=0;t<2*U;t++)i[t]=0;let b=0;const d=!!m&&!!A,p=d?g:a;let M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .newIndexArray */ .my)(a);const j=new Uint32Array(g),q=1.96;let I=0!==y?Math.ceil(4*q*q/(y*y)*y*(1-y)):p,k=1,x=m?m[1]:p;for(let t=0;t<p;t++){if(t===I){const n=1-b/t;if(n+q*Math.sqrt(n*(1-n)/t)<y)return null;I*=2}if(t===x){for(let t=0;t<2*U;t++)i[t]=0;if(A)for(let t=m[k-1];t<m[k];t++)j[t]=M[A[t]];x=m[++k]}const n=d?A[t]:t,r=n*s,e=f(h,r,s);let o=e%U,u=b;for(;0!==i[2*o+1];){if(i[2*o]===e){const t=i[2*o+1]-1;if(l(h,r,t*s,s)){u=M[t];break}}o++,o>=U&&(o-=U)}u===b&&(i[2*o]=e,i[2*o+1]=n+1,b++),M[n]=u}if(0!==y&&1-b/a<y)return null;if(d){for(let t=m[k-1];t<j.length;t++)j[t]=M[A[t]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .compactMeshIndices */ .uW)(j)}const C=c?new Array(b):new Uint32Array(b*s);b=0;for(let t=0;t<p;t++)if(M[t]===b){o(h,(d?A[t]:t)*s,C,b*s,s),b++}if(A&&!d){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=M[A[n]];M=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_1__/* .compactMeshIndices */ .uW)(t)}return{buffer:Array.isArray(C)?C:C.buffer,indices:M,uniqueCount:b}}function l(t,n,r,e){for(let l=0;l<e;l++)if(t[n+l]!==t[r+l])return!1;return!0}function o(t,n,r,e,l){for(let o=0;o<l;o++)r[e+o]=t[n+o]}function f(t,n,r){let e=0;for(let l=0;l<r;l++)e=t[n+l]+e|0,e=e+(e<<11)+(e>>>2)|0;return e>>>0}let i=null;


/***/ }),

/***/ 1114:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CK: () => (/* binding */ c),
/* harmony export */   E9: () => (/* binding */ o),
/* harmony export */   Hq: () => (/* binding */ t),
/* harmony export */   MW: () => (/* binding */ u),
/* harmony export */   TE: () => (/* binding */ l),
/* harmony export */   yJ: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _Point_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97066);
/* harmony import */ var _MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97557);
/* harmony import */ var _MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99218);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e){return null==e.origin}function t(e){return null!=e.origin}function c(e){return t(e.vertexSpace)}function u(e,r){if(!t(e))return null;const[i,o,c]=e.origin;return new _Point_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({x:i,y:o,z:c,spatialReference:r})}function l(e,n){const{x:o,y:t,z:c,spatialReference:u}=e,l=[o,t,c??0];return"local"===(n?.vertexSpace??f(u))?new _MeshLocalVertexSpace_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A({origin:l}):new _MeshGeoreferencedVertexSpace_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A({origin:l})}function f(e){return e.isGeographic||e.isWebMercator?"local":"georeferenced"}function a(n,r){return n.type===r.type&&(n.origin===r.origin||null!=n.origin&&null!=r.origin&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.q)(n.origin,r.origin))}


/***/ }),

/***/ 57829:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony export fitPlane */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92976);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _Axis_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58331);
/* harmony import */ var _plane_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(38774);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function c(t,o,s){const n=e(f,t,o,s)?(0,_plane_js__WEBPACK_IMPORTED_MODULE_4__/* .getNormal */ .Qj)(f):[0,0,1];return Math.abs(n[2])>Math.cos((0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(80))?_Axis_js__WEBPACK_IMPORTED_MODULE_3__/* .Axis */ ._.Z:Math.abs(n[1])>Math.abs(n[0])?_Axis_js__WEBPACK_IMPORTED_MODULE_3__/* .Axis */ ._.Y:_Axis_js__WEBPACK_IMPORTED_MODULE_3__/* .Axis */ ._.X}function e(r,i,a,n){const c=(r=>!Array.isArray(r[0]))(i)?(r,t)=>i[3*r+t]:(r,t)=>i[r][t],e=n?(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerUnitForSR */ .GA)(n)/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerVerticalUnitForSR */ .G9)(n):1;return (0,_plane_js__WEBPACK_IMPORTED_MODULE_4__/* .fromManyPoints */ .lU)(r,((r,t)=>(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,c(t,0)*e,c(t,1)*e,c(t,2))),a)}const f=(0,_plane_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)();


/***/ }),

/***/ 17566:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Wq: () => (/* binding */ p),
/* harmony export */   lO: () => (/* binding */ f),
/* harmony export */   oR: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony export isCounterClockwise */
/* harmony import */ var _chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16528);
/* harmony import */ var _Axis_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58331);
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(65319);
/* harmony import */ var _DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90166);
/* harmony import */ var _Indices_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42965);
/* harmony import */ var _polygonUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(57829);
/* harmony import */ var _meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52209);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function f(t){const e=a(t.rings,t.hasZ,p.CCW_IS_HOLE,t.spatialReference),s=new Array;let l=0,f=0;for(const r of e.polygons){const t=r.count,c=r.index,h=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .doubleSubArray */ .l5)(e.position,3*c,3*t),a=r.holeIndices.map((n=>n-c)),g=(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__/* .compactMeshIndices */ .uW)((0,_chunks_earcut_js__WEBPACK_IMPORTED_MODULE_0__.e)(h,a,3));s.push({position:h,faces:g}),l+=h.length,f+=g.length}const g=h(s,l,f),u=Array.isArray(g.position)?(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_6__/* .deduplicate */ .b)(g.position,3,{originalIndices:g.faces}):(0,_meshUtils_deduplicate_js__WEBPACK_IMPORTED_MODULE_6__/* .deduplicate */ .b)(g.position.buffer,6,{originalIndices:g.faces});return g.position=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .doubleArrayFrom */ .xm)(new Float64Array(u.buffer)),g.faces=u.indices,g}function h(n,t,e){if(1===n.length)return n[0];const o=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .newDoubleArray */ .jh)(t),r=new Array(e);let l=0,c=0,f=0;for(const s of n){for(let n=0;n<s.position.length;n++)o[l++]=s.position[n];for(const n of s.faces)r[c++]=n+f;f=l/3}return{position:o,faces:(0,_Indices_js__WEBPACK_IMPORTED_MODULE_4__/* .compactMeshIndices */ .uW)(r)}}function a(n,t,e,o){const r=n.length,i=new Array(r),l=new Array(r),c=new Array(r);let f=0;for(let s=0;s<r;++s)f+=n[s].length;let h=0,a=0,m=0;const d=(0,_DoubleArray_js__WEBPACK_IMPORTED_MODULE_3__/* .newDoubleArray */ .jh)(3*f);let y=0;for(let s=r-1;s>=0;s--){const f=n[s],A=e===p.CCW_IS_HOLE&&u(f,t,o);if(A&&1!==r)i[h++]=f;else{let n=f.length;for(let t=0;t<h;++t)n+=i[t].length;const e={index:y,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=f.length,f.length>0&&(c[m++]={index:y,count:f.length}),y=A?g(f,f.length-1,-1,d,y,f.length,t):g(f,0,1,d,y,f.length,t);for(let o=0;o<h;++o){const n=i[o];e.holeIndices[o]=y,e.pathLengths[o+1]=n.length,n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}h=0,e.count>0&&(l[a++]=e)}}for(let s=0;s<h;++s){const n=i[s];n.length>0&&(c[m++]={index:y,count:n.length}),y=g(n,0,1,d,y,n.length,t)}return l.length=a,c.length=m,{position:d,polygons:l,outlines:c}}function g(n,t,e,o,r,s,i){r*=3;for(let l=0;l<s;++l){const s=n[t];o[r++]=s[0],o[r++]=s[1],o[r++]=i&&s[2]?s[2]:0,t+=e}return r/3}function u(n,o,r){if(!o)return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n);const s=n.length-1;switch((0,_polygonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .leastSignificantAxis */ .S)(n,s,r)){case _Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X:return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Z);case _Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y:return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Z);case _Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Z:return!(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isClockwise */ .$3)(n,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.X,_Axis_js__WEBPACK_IMPORTED_MODULE_1__/* .Axis */ ._.Y)}}var p;!function(n){n[n.NONE=0]="NONE",n[n.CCW_IS_HOLE=1]="CCW_IS_HOLE"}(p||(p={}));


/***/ }),

/***/ 9723:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CI: () => (/* binding */ a),
/* harmony export */   fk: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony export equals */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],a=n[t];if(r.length!==a.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==a[e])return!1}return!0}function r(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}function a(e,t){return e===t||null!=e&&null!=t&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .equals */ .aI)(e.spatialReference,t.spatialReference)&&e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m}function i(t,r,a){return t===r||null!=t&&null!=r&&(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .equals */ .aI)(t.spatialReference,r.spatialReference)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.x,r.x,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.y,r.y,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.z??0,r.z??0,a)&&(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .floatEqualAbsolute */ .Sp)(t.m??0,r.m??0,a)}function u(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&r(e.paths,t.paths))}function l(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&r(e.rings,t.rings))}function s(e,r){return e.hasZ===r.hasZ&&e.hasM===r.hasM&&(!!n(e.spatialReference,r.spatialReference)&&t(e.points,r.points))}function f(e,t){return e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!n(e.spatialReference,t.spatialReference)&&(e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax))}function c(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(e.type!==n.type)return!1;switch(e.type){case"point":return a(e,n);case"extent":return f(e,n);case"polyline":return u(e,n);case"polygon":return l(e,n);case"multipoint":return s(e,n);case"mesh":return!1;default:return}}function o(e,n){if(e===n)return!0;if(!e||!n)return!1;const t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(const a of t)if(e[a]!==n[a])return!1;return!0}function h(e,n){return e===n||null!=e&&null!=n&&e.objectId===n.objectId&&(!!c(e.geometry,n.geometry)&&!!o(e.attributes,n.attributes))}


/***/ }),

/***/ 80009:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){return"point"===t.type}


/***/ }),

/***/ 85174:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EL: () => (/* binding */ x),
/* harmony export */   RS: () => (/* binding */ k),
/* harmony export */   gr: () => (/* binding */ o),
/* harmony export */   wP: () => (/* binding */ c),
/* harmony export */   wZ: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony exports isHydratedGraphic, isHydratedPoint */
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25707);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86942);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(78983);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1171);
/* harmony import */ var _dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(29394);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e){return"declaredClass"in e}function m(e){return"declaredClass"in e}function l(e){return"declaredClass"in e}function c(n,r){return n?l(n)?n:new _Graphic_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A({layer:r,sourceLayer:r,visible:n.visible,symbol:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(n.symbol),attributes:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(n.attributes),geometry:u(n.geometry)}):null}function u(e){return null==e?null:o(e)?e:(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromJSON */ .rS)(f(e))}function f(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:a}=e.spatialReference,s={wkid:t,wkt:n,wkt2:r,latestWkid:a};switch(e.type){case"point":{const{x:t,y:n,z:r,m:a}=e;return{x:t,y:n,z:r,m:a,spatialReference:s}}case"polygon":{const{rings:t,hasZ:n,hasM:r}=e;return{rings:p(t),hasZ:n,hasM:r,spatialReference:s}}case"polyline":{const{paths:t,hasZ:n,hasM:r}=e;return{paths:p(t),hasZ:n,hasM:r,spatialReference:s}}case"extent":{const{xmin:t,xmax:n,ymin:r,ymax:a,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u}=e;return{xmin:t,xmax:n,ymin:r,ymax:a,zmin:i,zmax:o,mmin:m,mmax:l,hasZ:c,hasM:u,spatialReference:s}}case"multipoint":{const{points:t,hasZ:n,hasM:r}=e;return{points:d(t)?h(t):t,hasZ:n,hasM:r,spatialReference:s}}default:return}}function p(e){return y(e)?e.map((e=>h(e))):e}function h(e){return e.map((e=>Array.from(e)))}function y(e){for(const t of e)if(0!==t.length)return d(t);return!1}function d(e){return e.length>0&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isFloat32Array */ .vZ)(e[0])||(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isFloat64Array */ .aI)(e[0]))}function x(e,t){if(!e)return null;let n;if(m(e)){if(null==t)return e.clone();if(m(t))return t.copy(e)}return null!=t?(n=t,n.x=e.x,n.y=e.y,n.spatialReference=e.spatialReference,e.hasZ?(n.z=e.z,n.hasZ=e.hasZ):(n.z=void 0,n.hasZ=!1),e.hasM?(n.m=e.m,n.hasM=!0):(n.m=void 0,n.hasM=!1)):(n=(0,_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_6__/* .makeDehydratedPoint */ .T)(e.x,e.y,e.z,e.spatialReference),e.hasM&&(n.m=e.m,n.hasM=!0)),n}function k(e){const{wkid:t,wkt:n,wkt2:r,latestWkid:s}=e,i={wkid:t,wkt:n,wkt2:r,latestWkid:s};return _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.fromJSON(i)}


/***/ }),

/***/ 12155:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var a;!function(a){a[a.EnableFastUpdates=0]="EnableFastUpdates",a[a.DisableFastUpdates=1]="DisableFastUpdates",a[a.UpdateFastLocalOrigin=2]="UpdateFastLocalOrigin"}(a||(a={}));


/***/ }),

/***/ 76036:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(64874);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function r(r,t){return new Promise(((n,o)=>{r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?n():(t((0,_core_events_js__WEBPACK_IMPORTED_MODULE_0__/* .once */ .Oo)(r,"canplay",n)),t((0,_core_events_js__WEBPACK_IMPORTED_MODULE_0__/* .once */ .Oo)(r,"error",o)))}))}


/***/ }),

/***/ 74408:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ _)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var _;!function(_){_[_.ETC1_RGB=0]="ETC1_RGB",_[_.ETC2_RGBA=1]="ETC2_RGBA",_[_.BC1_RGB=2]="BC1_RGB",_[_.BC3_RGBA=3]="BC3_RGBA",_[_.BC4_R=4]="BC4_R",_[_.BC5_RG=5]="BC5_RG",_[_.BC7_M6_RGB=6]="BC7_M6_RGB",_[_.BC7_M5_RGBA=7]="BC7_M5_RGBA",_[_.PVRTC1_4_RGB=8]="PVRTC1_4_RGB",_[_.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA",_[_.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA",_[_.ATC_RGB=11]="ATC_RGB",_[_.ATC_RGBA=12]="ATC_RGBA",_[_.FXT1_RGB=17]="FXT1_RGB",_[_.PVRTC2_4_RGB=18]="PVRTC2_4_RGB",_[_.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA",_[_.ETC2_EAC_R11=20]="ETC2_EAC_R11",_[_.ETC2_EAC_RG11=21]="ETC2_EAC_RG11",_[_.RGBA32=13]="RGBA32",_[_.RGB565=14]="RGB565",_[_.BGR565=15]="BGR565",_[_.RGBA4444=16]="RGBA4444"}(_||(_={}));


/***/ }),

/***/ 47228:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(10282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){const n="metric";if(null==e)return n;const i=e.map,l=(i&&"portalItem"in i?i.portalItem?.portal:null)??_portal_Portal_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getDefault();switch(l.user?.units??l.units){case n:return n;case"english":return"imperial"}return (0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getDefaultUnitSystem */ .jM)(e.spatialReference)??n}


/***/ }),

/***/ 34528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86394);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function t(t,r){const{data:a}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)(t,{responseType:"image",...r});return a}


/***/ }),

/***/ 5842:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e),
/* harmony export */   pi: () => (/* binding */ d),
/* harmony export */   tf: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n,e;function d(n){return null!=n&&!n.running}!function(n){n[n.Idle=0]="Idle",n[n.Rendering=1]="Rendering",n[n.Ready=2]="Ready",n[n.Fading=3]="Fading"}(n||(n={})),function(n){n[n.RG=0]="RG",n[n.BA=1]="BA",n[n.COUNT=2]="COUNT"}(e||(e={}));


/***/ }),

/***/ 58718:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ A),
/* harmony export */   n: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _core_signal_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(40315);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69175);
/* harmony import */ var _geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(99817);
/* harmony import */ var _Clouds_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(5842);
/* harmony import */ var _weather_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(84323);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class x{constructor(){this.startTime=0,this._data=(0,_core_signal_js__WEBPACK_IMPORTED_MODULE_2__/* .signal */ .v)(null),this.coverage=0,this.absorption=0,this._readChannels=_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CloudsTextureChannels */ .c.RG,this.parallax=new O,this.parallaxNew=new O,this._anchorPoint=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this._fadeState=(0,_core_signal_js__WEBPACK_IMPORTED_MODULE_2__/* .signal */ .v)(A.HIDE),this._fadeFactor=(0,_core_signal_js__WEBPACK_IMPORTED_MODULE_2__/* .signal */ .v)(1)}get data(){return this._data.value}set data(a){this._data.value=a}get readChannels(){return this._readChannels}get fadeState(){return this._fadeState.value}get fadeFactor(){return this._fadeFactor.value}get opacity(){switch(this.fadeState){case A.HIDE:return 0;case A.FADE_OUT:return 1-this.fadeFactor;case A.FADE_IN:return this.fadeFactor;case A.SHOW:case A.CROSS_FADE:return 1}}fade(a,e,s){this.isFading&&this.fadeFactor<1&&(this._fadeFactor.value=s?(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)((e-this.startTime)/(H*s),0,1):1,1===this.fadeFactor&&this._endFade()),this._evaluateState(a,e),this._updateParallax(a)}_evaluateState(a,t){const e=a.relativeElevation,s=this._updateAnchorPoint(a);(e>1.7*_weather_js__WEBPACK_IMPORTED_MODULE_10__/* .heightLimit */ .zF||e<-1e4||s>I)&&this.opacity>0?this._startFade(A.HIDE,t):this.isFading||(e>_weather_js__WEBPACK_IMPORTED_MODULE_10__/* .heightLimit */ .zF||e<-.35*_weather_js__WEBPACK_IMPORTED_MODULE_10__/* .heightLimit */ .zF||s>w*I?this.opacity>0&&this._startFade(A.FADE_OUT,t):(0,_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .ensureClouds */ .pi)(this.data)&&(0===this.opacity?this._startFade(A.FADE_IN,t):this.data.state===_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Ready&&(this.fadeState===A.SHOW?this._startFade(A.CROSS_FADE,t):this._startFade(A.SHOW,t))))}_updateParallax(a){const t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.k)(a.eye);this.parallax.radiusCurvatureCorrection=.84*Math.sqrt(Math.max(t-_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* .earth */ .$O.radius*_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* .earth */ .$O.radius,0))/Math.sqrt(t),(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__/* .fromPoints */ .Cr)(v,this.parallax.anchorPoint,C),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__/* .rotate */ .e$)(this.parallax.transform,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .IDENTITY */ .zK,C[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__/* .axis */ .yo)(C)),(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__/* .fromPoints */ .Cr)(v,this.parallaxNew.anchorPoint,C),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_3__/* .rotate */ .e$)(this.parallaxNew.transform,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .IDENTITY */ .zK,C[3],(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__/* .axis */ .yo)(C))}_updateAnchorPoint(a){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.n)(this._anchorPoint,a.eye),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(this._anchorPoint,this._anchorPoint,_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_8__/* .earth */ .$O.radius),this.fadeState===A.HIDE&&this.data?.state===_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Ready?((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallax.anchorPoint,this._anchorPoint),0):(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.l)((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.d)(g,this.parallax.anchorPoint,this._anchorPoint))}requestFade(){this._fadeFactor.value=0}_startFade(a,t){switch(this._fadeState.value=a,this.startTime=t,a){case A.CROSS_FADE:this.requestFade(),this._switchReadChannels(),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_IN:this.requestFade(),this._switchReadChannels(),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallax.anchorPoint,this._anchorPoint),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallaxNew.anchorPoint,this._anchorPoint);break;case A.FADE_OUT:this.requestFade();break;case A.SHOW:this._switchReadChannels(),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallax.anchorPoint,this._anchorPoint),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallaxNew.anchorPoint,this._anchorPoint),this._endFade();break;case A.HIDE:this._endFade()}}_endFade(){switch(this._fadeFactor.value=1,this.data&&this.data.state!==_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Ready&&(this.data.state=_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Idle),this.fadeState){case A.CROSS_FADE:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.c)(this.parallax.anchorPoint,this.parallaxNew.anchorPoint),this._fadeState.value=A.SHOW;break;case A.FADE_IN:this._fadeState.value=A.SHOW;break;case A.FADE_OUT:this._fadeState.value=A.HIDE;break;case A.SHOW:case A.HIDE:break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(this.fadeState)}}_switchReadChannels(){this.data?.state===_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Ready&&(this._readChannels=1-this._readChannels,this.data.state=_Clouds_js__WEBPACK_IMPORTED_MODULE_9__/* .CubeMapState */ .tf.Fading)}get isFading(){return this.fadeState===A.FADE_OUT||this.fadeState===A.FADE_IN||this.fadeState===A.CROSS_FADE}}var A;!function(a){a[a.HIDE=0]="HIDE",a[a.FADE_IN=1]="FADE_IN",a[a.SHOW=2]="SHOW",a[a.CROSS_FADE=3]="CROSS_FADE",a[a.FADE_OUT=4]="FADE_OUT"}(A||(A={}));class O{constructor(){this.anchorPoint=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.radiusCurvatureCorrection=0,this.transform=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)()}}const v=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .fromValues */ .fA)(0,0,1),C=(0,_geometry_support_axisAngleDegrees_js__WEBPACK_IMPORTED_MODULE_7__/* .create */ .vt)(),g=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),H=1.25,w=.5,I=2e5;


/***/ }),

/***/ 84323:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  k9: () => (/* binding */ weather_i),
  zF: () => (/* binding */ weather_p)
});

// UNUSED EXPORTS: validateWeatherType, weatherTypes, weatherTypesArray

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js
var enumeration = __webpack_require__(28902);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
;// ../node_modules/@arcgis/core/views/3d/environment/CloudyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var c;let p=c=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="cloudy",this.cloudCover=.5}clone(){return new c({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({cloudy:"cloudy"}),(0,property/* property */.MZ)({json:{write:{isRequired:!0}}})],p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],p.prototype,"cloudCover",void 0),p=c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.CloudyWeather")],p);const i=p;

;// ../node_modules/@arcgis/core/views/3d/environment/FoggyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var FoggyWeather_p;let FoggyWeather_c=FoggyWeather_p=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="foggy",this.fogStrength=.5}clone(){return new FoggyWeather_p({fogStrength:this.fogStrength})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({foggy:"foggy"}),(0,property/* property */.MZ)({json:{write:{isRequired:!0}}})],FoggyWeather_c.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],FoggyWeather_c.prototype,"fogStrength",void 0),FoggyWeather_c=FoggyWeather_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.FoggyWeather")],FoggyWeather_c);const FoggyWeather_i=FoggyWeather_c;

;// ../node_modules/@arcgis/core/views/3d/environment/RainyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var s;let RainyWeather_p=s=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="rainy",this.cloudCover=.5,this.precipitation=.5}clone(){return new s({cloudCover:this.cloudCover,precipitation:this.precipitation})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({rainy:"rainy"}),(0,property/* property */.MZ)({json:{write:{isRequired:!0}}})],RainyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],RainyWeather_p.prototype,"precipitation",void 0),RainyWeather_p=s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.RainyWeather")],RainyWeather_p);const n=RainyWeather_p;

;// ../node_modules/@arcgis/core/views/3d/environment/SnowyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var SnowyWeather_i;let SnowyWeather_p=SnowyWeather_i=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="snowy",this.cloudCover=.5,this.precipitation=.5,this.snowCover="disabled"}clone(){return new SnowyWeather_i({cloudCover:this.cloudCover,precipitation:this.precipitation,snowCover:this.snowCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({snowy:"snowy"}),(0,property/* property */.MZ)({json:{write:{isRequired:!0}}})],SnowyWeather_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"cloudCover",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SnowyWeather_p.prototype,"precipitation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["enabled","disabled"],nonNullable:!0,json:{write:!0}})],SnowyWeather_p.prototype,"snowCover",void 0),SnowyWeather_p=SnowyWeather_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.SnowyWeather")],SnowyWeather_p);const SnowyWeather_n=SnowyWeather_p;

;// ../node_modules/@arcgis/core/views/3d/environment/SunnyWeather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var SunnyWeather_c;let SunnyWeather_n=SunnyWeather_c=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="sunny",this.cloudCover=.5}clone(){return new SunnyWeather_c({cloudCover:this.cloudCover})}};(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({sunny:"sunny"}),(0,property/* property */.MZ)({json:{write:{isRequired:!0}}})],SunnyWeather_n.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],SunnyWeather_n.prototype,"cloudCover",void 0),SunnyWeather_n=SunnyWeather_c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.environment.SunnyWeather")],SunnyWeather_n);const SunnyWeather_p=SunnyWeather_n;

;// ../node_modules/@arcgis/core/views/3d/environment/weather.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const weather_n={key:"type",base:SunnyWeather_p,typeMap:{sunny:SunnyWeather_p,cloudy:i,rainy:n,snowy:SnowyWeather_n,foggy:FoggyWeather_i}},a=Object.keys(weather_n.typeMap);function weather_s(e,r){return!!a.includes(e)||(r.error(`"${e}" is not a valid weather type`),!1)}const weather_p=1e4,weather_i=1e5;


/***/ }),

/***/ 43811:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  DrawGraphicTool3D: () => (/* reexport */ DrawGraphicTool3D_z),
  ExtentTransformTool: () => (/* reexport */ ExtentTransformTool_S),
  ManipulatedObject3DGraphic: () => (/* reexport */ ManipulatedObject3DGraphic_u),
  MoveTool3D: () => (/* reexport */ MoveTool3D_Q),
  ReshapeTool3D: () => (/* reexport */ ReshapeTool3D_h),
  TransformTool3D: () => (/* reexport */ TransformTool3D_z)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/colorUtils.js
var colorUtils = __webpack_require__(775);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/elevationInfoUtils.js
var elevationInfoUtils = __webpack_require__(27451);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/ElevationInfo.js + 1 modules
var ElevationInfo = __webpack_require__(60973);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/interactive/support/viewUtils.js
var viewUtils = __webpack_require__(59429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Color.js
var Color = __webpack_require__(96220);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/intl.js + 1 modules
var intl = __webpack_require__(17791);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityFormatUtils.js
var quantityFormatUtils = __webpack_require__(33604);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vectorStacks.js + 1 modules
var vectorStacks = __webpack_require__(45573);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/intl/messages.js
var messages = __webpack_require__(15131);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/getDefaultUnitForView.js
var getDefaultUnitForView = __webpack_require__(47228);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/overlay/TextOverlayItem.js + 1 modules
var TextOverlayItem = __webpack_require__(6447);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/intl/locale.js
var locale = __webpack_require__(91109);
;// ../node_modules/@arcgis/core/views/interactive/SegmentLabels.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const SegmentLabels_O=3025,SegmentLabels_P={default:15,far:25};let SegmentLabels_V=class extends Accessor/* default */.A{constructor(t){super(t),this.context=null,this.stagedVertex=null,this.visible=!0,this.edgeDistance="default",this._messageUnitsTask=null,this._labelInfos=[],this._nextLabelIndex=0}initialize(){this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>[null!=this.context&&this.getCameraOrExtent(this.context),this.visible,this._edgeDistancePixels,this.stagedVertex,this._messagesUnits]),(()=>this._update())),...["vertex-add","vertex-update","vertex-remove"].map((t=>(0,reactiveUtils.on)((()=>this.context?.editGeometryOperations),t,(()=>this._update())))),(0,reactiveUtils/* watch */.wB)((()=>this._colors),(t=>this._updateStyle(t))),(0,locale/* onLocaleChange */.oQ)((()=>this._refreshMessages())),(0,handleUtils/* makeHandle */.hA)((()=>this._messageUnitsTask?.abort()))]),this._refreshMessages()}destroy(){for(this._nextLabelIndex=0;this._labelInfos.length;)this._destroyLabel(this._labelInfos.pop())}get updating(){return null==this._messagesUnits}get test(){}get _messagesUnits(){return this._messageUnitsTask?.value}get _edgeDistancePixels(){return SegmentLabels_P[this.edgeDistance]}get _colors(){const t=this.context?.view.effectiveTheme.textColor??Color/* default */.A.fromArray([255,255,255]);return{textColor:t,backgroundColor:(0,colorUtils/* multiplyOpacity */._L)((0,colorUtils/* getContrast */.bJ)(t,colorUtils/* BrightnessThreshold */.pW.Low),.6)}}_update(){if(this.destroyed)return;this._nextLabelIndex=0;const{context:t,stagedVertex:e}=this;if(!t)return this._destroyUnusedLabels();const{editGeometryOperations:s}=t,{components:o,geometry:r,coordinateHelper:i}=s.data;if(!r)return this._destroyUnusedLabels();const n=o.length;for(let l=0;l<n;++l){const o=SegmentLabels_G(r,s,e,i,l);if(o.length<2||!SegmentLabels_A(o,t.view,t.elevationInfo,i.spatialReference))continue;const a=1===n&&!(0,coordsUtils/* isClockwise */.$3)(o);let c=SegmentLabels_F,h=SegmentLabels_H;this.toScreenPointArray(t,o[0],c);for(let e=1;e<o.length;++e){const s=o[e-1],r=o[e];this.toScreenPointArray(t,r,h),this._addLabel(t,s,c,r,h,a),[c,h]=[h,c]}}this._destroyUnusedLabels()}_updateStyle({textColor:t,backgroundColor:e}){const s=this._nextLabelIndex,o=this._labelInfos;for(let r=0;r<s;++r){const{label:s}=o[r];s.textColor=t,s.backgroundColor=e}}_addLabel(t,e,s,o,r,i){const{label:n}=this._getOrCreateLabel(t);if(!this.visible||(0,vec2/* squaredDistance */.hG)(s,r)<SegmentLabels_O)return void(n.visible=!1);const{spatialReference:l}=t.editGeometryOperations.data,a=t.automaticLengthMeasurementUtils.autoDistance2D(e,o,l),h=this._messagesUnits,p=(0,getDefaultUnitForView/* getDefaultUnitForView */.c)(t.view);n.text=null!=h&&null!=a?(0,quantityFormatUtils/* formatLength */.ix)(h,a,p):"",n.visible=!0;const m=r[0]-s[0],d=r[1]-s[1];i?(0,vec2/* set */.hZ)(SegmentLabels_q,-d,m):(0,vec2/* set */.hZ)(SegmentLabels_q,d,-m),(0,vec2/* normalize */.S8)(SegmentLabels_q,SegmentLabels_q),(0,vec2/* scale */.hs)(SegmentLabels_q,SegmentLabels_q,this._edgeDistancePixels),(0,vec2/* lerp */.Cc)(SegmentLabels_z,s,r,.5),(0,vec2/* add */.WQ)(SegmentLabels_z,SegmentLabels_z,SegmentLabels_q),n.position=[SegmentLabels_z[0],SegmentLabels_z[1]],Math.abs(SegmentLabels_q[0])>Math.abs(SegmentLabels_q[1])?n.anchor=SegmentLabels_q[0]>0?"left":"right":n.anchor=-SegmentLabels_q[1]<0?"top":"bottom"}_getOrCreateLabel(t){const e=this._labelInfos.length>this._nextLabelIndex,{textColor:s,backgroundColor:o}=this._colors;if(e){const t=this._labelInfos[this._nextLabelIndex++],{label:e}=t;return e.textColor=s,e.backgroundColor=o,t}const r=new TextOverlayItem/* default */.A({anchor:"center",fontSize:8,textColor:s,backgroundColor:o});t.view.overlay?.items.add(r);const i={label:r};return this._labelInfos.push(i),this._nextLabelIndex=this._labelInfos.length,i}_destroyUnusedLabels(){for(;this._labelInfos.length>this._nextLabelIndex;)this._destroyLabel(this._labelInfos.pop())}_destroyLabel({label:t}){this.context?.view.overlay?.items.remove(t),t.destroy()}_refreshMessages(){this._messageUnitsTask?.abort(),this._messageUnitsTask=(0,asyncUtils/* createTask */.UT)((()=>(0,messages/* fetchMessageBundle */.ud)("esri/core/t9n/Units")))}};function SegmentLabels_G(t,e,s,o,r){const i=[];if(e.data.components[r].iterateVertices((t=>{i.push(o.toXYZ(t.pos,vectorStacks/* sv3d */.rq.get()))})),0===r&&null!=s&&i.push(o.toXYZ(s,vectorStacks/* sv3d */.rq.get())),i.length<2)return i;const n=i[0],l=i[i.length-1];return"polygon"===t.type&&i.length>2&&!(0,vec32.G)(n,l)&&i.push(n),i}function SegmentLabels_A(t,e,s,o){if("2d"===e.type)return!0;const r=(0,unitUtils/* getMetersPerUnit */.Ao)(o)??1,i=(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(o),n=t=>(0,elevationInfoUtils/* getConvertedElevationFromVector */.xS)(e,t,o,s,elevationInfoUtils/* absoluteHeightElevationInfo */.qt)??0;for(let l=1;l<t.length;++l){const e=t[l-1],s=t[l],o=(s[0]-e[0])*r,a=(s[1]-e[1])*r,c=(n(s)-n(e))*i;if(Math.abs(c)/Math.sqrt(o*o+a*a)>SegmentLabels_R)return!1}return!0}(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"context",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"stagedVertex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"visible",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"edgeDistance",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"_messageUnitsTask",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"_messagesUnits",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"_edgeDistancePixels",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SegmentLabels_V.prototype,"_colors",null),SegmentLabels_V=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.SegmentLabels")],SegmentLabels_V);const SegmentLabels_R=(0,mathUtils/* deg2rad */.kU)(5),SegmentLabels_q=(0,vec2f64/* create */.vt)(),SegmentLabels_z=(0,vec2f64/* create */.vt)(),SegmentLabels_F=(0,screenUtils/* createScreenPointArray */.gs)(),SegmentLabels_H=(0,screenUtils/* createScreenPointArray */.gs)();

;// ../node_modules/@arcgis/core/views/3d/interactive/SegmentLabels3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let SegmentLabels3D_a=class extends SegmentLabels_V{getCameraOrExtent({view:e}){return e.state.camera}toScreenPointArray({view:e,elevationInfo:t,editGeometryOperations:o},i,a=(0,screenUtils/* createScreenPointArray */.gs)()){const{spatialReference:m}=o.data.coordinateHelper;return (0,viewUtils/* vectorToRender */.X)(i,m,t,e,SegmentLabels3D_c),e.state.camera.projectToScreen(SegmentLabels3D_c,a),a}};SegmentLabels3D_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.SegmentLabels3D")],SegmentLabels3D_a);const SegmentLabels3D_c=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js
var projectVectorToVector = __webpack_require__(42120);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/clipRay.js
var clipRay = __webpack_require__(6214);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/lineSegment.js
var lineSegment = __webpack_require__(22759);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(10151);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Identifiable.js
var Identifiable = __webpack_require__(65667);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/interfaces.js
var interfaces = __webpack_require__(56867);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ModelDirtyTypes.js
var ModelDirtyTypes = __webpack_require__(23183);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(68699);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/DrapedVisualElementResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=interfaces/* DrapedRenderGroup */.O7.Outline}destroy(){this._destroyResources()}get resources(){return this._resources?.external}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}get renderGroup(){return this._renderGroup}set renderGroup(e){this._renderGroup=e;const r=this._resources?.layerView;r&&(r.renderGroup=e)}recreate(){this.attached&&this._createResources()}recreateGeometry(){this._resourceFactory.recreateGeometry?null!=this._resources&&(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}forEachMaterial(e){this._resources&&this._resourceFactory.forEachMaterial(this._resources.external,e)}_createOrDestroyResources(){this._attached?null==this._resources&&this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this._resourceFactory.createResources(),r=new DrapedVisualElementResources_n({view:this._resourceFactory.view,renderGroup:this._renderGroup}),s=this._resourceFactory.view.basemapTerrain?.overlayManager;this._resources={layerView:r,external:e,geometriesAdded:!1},s&&(this._resources.drapeSourceRenderer=s.registerGeometryDrapeSource(r)),this._syncGeometriesToRenderer()}_destroyResources(){if(null==this._resources)return;this._ensureRenderGeometriesRemoved();const e=this._resourceFactory.view.basemapTerrain?.overlayManager;e&&e.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){if(null==this._resources?.drapeSourceRenderer)return;if(!this._resources.geometriesAdded)return;this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,ModelDirtyTypes/* DirtyOperation */.q.UPDATE),this._resources.geometriesAdded=!1}_ensureRenderGeometriesAdded(){if(null==this._resources?.drapeSourceRenderer)return;if(this._resources.geometriesAdded)return;this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,ModelDirtyTypes/* DirtyOperation */.q.UPDATE),this._resources.geometriesAdded=!0}}let DrapedVisualElementResources_n=class extends(Identifiable/* default */.A.IdentifiableMixin(Accessor/* default */.A)){constructor(e){super(e),this.drapeSourceType=interfaces/* DrapeSourceType */.Om.Features,this.updatePolicy=UpdatePolicy/* UpdatePolicy */.q.SYNC,this.renderGroup=interfaces/* DrapedRenderGroup */.O7.Outline}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrapedVisualElementResources_n.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],DrapedVisualElementResources_n.prototype,"drapeSourceType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrapedVisualElementResources_n.prototype,"renderGroup",void 0),DrapedVisualElementResources_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.visualElements.DrapedVisualElementResources")],DrapedVisualElementResources_n);

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualElement_t{get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this.forEachMaterial((t=>t?.setParameters({isDecoration:e})))}constructor(t){this._isDecoration=!1,this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=t.view,this._handle=(0,reactiveUtils/* watch */.wB)((()=>t.view.ready),(e=>{this._resourcesCreated&&(e?this._createResources():this._destroyResources())}))}applyProperties(e){let t=!1;for(const s in e)s in this&&("attached"===s?t=!!e[s]:this[s]=e[s]);this.attached=t}destroy(){this.attached=!1,this._handle.remove()}get attached(){return this._attached}set attached(e){e!==this._attached&&this.view.stage&&(this._attached=e,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(e))}onAttachedChange(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.attached&&this.updateVisibility(e))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.updateVisibility(this.visible)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js
var Object3D = __webpack_require__(55103);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js + 1 modules
var WebGLLayer = __webpack_require__(54671);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/VisualElementResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualElementResources_i{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return null!=this._resources?this._resources.object:null}get resources(){return null!=this._resources?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this._resourceFactory.recreateGeometry)return void this.recreate();const e=this._resourceFactory.view.stage;if(null==this._resources||!e)return;const s=this._resources.object;s.removeAllGeometries(),this._resourceFactory.recreateGeometry(this._resources.external,s,this._resources.layer)}forEachMaterial(e){this._resources&&this._resourceFactory.forEachMaterial(this._resources.external,e)}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const i=this._resourceFactory,o=i.view,a=o.stage;if(!a)return;const h=new WebGLLayer/* WebGLLayer */.x(a,{pickable:!1,updatePolicy:UpdatePolicy/* UpdatePolicy */.q.SYNC}),u=new Object3D/* Object3D */.B({castShadow:!1}),l=i.createResources(u,h);h.add(u);const _=i.cameraChanged,n=_?(0,reactiveUtils/* watch */.wB)((()=>o.state.camera),(e=>_(e)),reactiveUtils/* initial */.Vh):null;this._resources={layer:h,object:u,external:l,cameraHandle:n},this._syncVisible()}_destroyResources(){null!=this._resources&&(this._resources.layer.destroy(),this._resources.object.dispose(),this._resources.cameraHandle?.remove(),this._resourceFactory.destroyResources(this._resources.external),this._resources=null)}_syncVisible(){null!=this._resources&&(this._resources.object.visible=this._visible)}}

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/EngineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class EngineVisualElement_t extends VisualElement_t{constructor(s){super(s),this._isDraped=!1,this.object3dResources=new VisualElementResources_i(this.createObject3DResourceFactory(s.view)),this.drapedResources=new d(this.createDrapedResourceFactory(s.view)),this.isDraped=s.isDraped??!1}get isDraped(){return this._isDraped}set isDraped(e){e!==this._isDraped&&(this._isDraped=e,this.object3dResources.attached=this.attached&&!e,this.drapedResources.attached=this.attached&&e)}get renderGroup(){return this.drapedResources.renderGroup}set renderGroup(e){this.drapedResources.renderGroup=e}createResources(){this.object3dResources.attached=!this._isDraped,this.drapedResources.attached=this._isDraped}destroyResources(){this.object3dResources.attached=!1,this.drapedResources.attached=!1}recreate(){this.object3dResources.recreate(),this.drapedResources.recreate()}recreateGeometry(){this.object3dResources.recreateGeometry(),this.drapedResources.recreateGeometry()}destroy(){this.object3dResources.destroy(),this.drapedResources.destroy(),super.destroy()}updateVisibility(e){this.object3dResources.visible=e,this.drapedResources.visible=e}forEachMaterial(e){this.object3dResources?.forEachMaterial(e),this.drapedResources?.forEachMaterial(e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl.js
var webgl = __webpack_require__(11041);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl/RenderNode.js
var RenderNode = __webpack_require__(43196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/Compositing.glsl.js
var Compositing_glsl = __webpack_require__(33790);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js + 1 modules
var ShaderTechnique = __webpack_require__(28347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechniqueConfiguration.js
var CompositingTechniqueConfiguration = __webpack_require__(17706);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/CompositingTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class CompositingTechnique_a extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,o){super(e,o,new ReloadableShaderModule/* ReloadableShaderModule */.$(Compositing_glsl.a,(()=>__webpack_require__.e(/* import() */ 19290).then(__webpack_require__.bind(__webpack_require__, 19290)))))}initializePipeline(r){switch(r.blitMode){case CompositingTechniqueConfiguration/* BlitMode */.d.None:case CompositingTechniqueConfiguration/* BlitMode */.d.Depth:return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWrite */.kn});case CompositingTechniqueConfiguration/* BlitMode */.d.Alpha:return (0,renderState/* makePipelineState */.Ey)({blending:renderState/* unpremultipliedAlphaToPremultipliedAlpha */.T8,colorWrite:renderState/* defaultColorWrite */.kn});default:(0,compilerUtils/* neverReached */.Xb)(r.blitMode);case CompositingTechniqueConfiguration/* BlitMode */.d.PremultipliedAlpha:case CompositingTechniqueConfiguration/* BlitMode */.d.COUNT:return (0,renderState/* makePipelineState */.Ey)({blending:renderState/* premultipliedAlpha */.RC,colorWrite:renderState/* defaultColorWrite */.kn})}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/blit/Blit.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Blit_o{constructor(s,o=CompositingTechniqueConfiguration/* BlitMode */.d.None){this._techniques=s,this._parameters=new Compositing_glsl.C,this._configuration=new CompositingTechniqueConfiguration/* CompositingTechniqueConfiguration */.N,this._configuration.blitMode=o,s.precompile(CompositingTechnique_a,this._configuration)}blit(e,i,r,o){e.bindFramebuffer(r.fbo),e.setClearColor(0,0,0,1),e.clear(enums/* FramebufferBit */.NV.COLOR),this._parameters.texture=i.getTexture();const n=this._techniques.get(CompositingTechnique_a,this._configuration);e.bindTechnique(n,o,this._parameters),e.screen.draw()}blend(e,i,r,s,o=1){this._configuration.hasOpacityFactor=o<1;const n=this._techniques.get(CompositingTechnique_a,this._configuration);return!!n.compiled&&(e.bindFramebuffer(r.fbo),this._parameters.texture=i.getTexture(),this._parameters.opacity=o,e.bindTechnique(n,s,this._parameters),e.screen.draw(),!0)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/DoubleArray.js
var DoubleArray = __webpack_require__(90166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js
var glUtil = __webpack_require__(15788);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/Laserlines.glsl.js
var Laserlines_glsl = __webpack_require__(250);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/NoParameters.js
var NoParameters = __webpack_require__(22005);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlineTechnique_a extends NoParameters/* NoParameters */.Y{constructor(){super(...arguments),this.innerColor=(0,vec3f64/* fromValues */.fA)(1,1,1),this.innerWidth=1,this.glowColor=(0,vec3f64/* fromValues */.fA)(1,.5,0),this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=.75,this.globalAlphaContrastBoost=2,this.angleCutoff=(0,mathUtils/* deg2rad */.kU)(6),this.pointDistanceOrigin=(0,vec3f64/* create */.vt)(),this.pointDistanceTarget=(0,vec3f64/* create */.vt)(),this.lineVerticalPlaneSegment=(0,lineSegment/* create */.vt)(),this.intersectsLineSegment=(0,lineSegment/* create */.vt)(),this.intersectsLineRadius=3,this.heightManifoldTarget=(0,vec3f64/* create */.vt)(),this.lineStartWorld=(0,vec3f64/* create */.vt)(),this.lineEndWorld=(0,vec3f64/* create */.vt)()}}class LaserlineTechnique_h extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,t){super(e,t,new ReloadableShaderModule/* ReloadableShaderModule */.$(Laserlines_glsl.L,(()=>__webpack_require__.e(/* import() */ 90550).then(__webpack_require__.bind(__webpack_require__, 90550)))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/LaserlinePath.glsl.js
var LaserlinePath_glsl = __webpack_require__(14628);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlinePathTechnique_a extends LaserlineTechnique_a{constructor(){super(...arguments),this.origin=(0,vec3f64/* create */.vt)()}}class LaserlinePathTechnique_c extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,s){super(e,s,new ReloadableShaderModule/* ReloadableShaderModule */.$(LaserlinePath_glsl.L,(()=>__webpack_require__.e(/* import() */ 41504).then(__webpack_require__.bind(__webpack_require__, 41504)))),LaserlinePathTechnique_n)}}const LaserlinePathTechnique_n=new Map([[VertexAttribute/* VertexAttribute */.r.START,0],[VertexAttribute/* VertexAttribute */.r.END,1],[VertexAttribute/* VertexAttribute */.r.EXTRUDE,2],[VertexAttribute/* VertexAttribute */.r.START_UP,3],[VertexAttribute/* VertexAttribute */.r.END_UP,4]]);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(11459);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlinePathData_{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=(0,vec3f64/* create */.vt)(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){const t=(0,DoubleArray/* newDoubleArray */.jh)(3*e.length);let r=0;for(const s of e)t[r++]=s[0],t[r++]=s[1],t[r++]=s[2];this.buffers=[t]}set buffers(t){if(this._buffers=t,this._buffers.length>0){const t=this._buffers[0],r=3*Math.floor(t.length/3/2);(0,vec32.i)(this._origin,t[r],t[r+1],t[r+2])}else (0,vec32.i)(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){const t=this._ensureVAO(e);null!=t&&(e.bindVAO(t),e.drawArrays(enums/* PrimitiveType */.WR.TRIANGLES,0,this._count))}dispose(){null!=this._vao&&this._vao.dispose()}get _layout(){return this._renderCoordsHelper.viewingMode===ViewingMode/* ViewingMode */.RT.Global?LaserlinePathData_b:LaserlinePathData_g}_ensureVAO(e){return null==this._buffers?null:(this._vao??=this._createVAO(e,this._buffers),this._ensureVertexData(this._vao,this._buffers),this._vao)}_createVAO(e,t){const r=this._createDataBuffer(t);return this._dirty=!1,new VertexArrayObject/* VertexArrayObject */.Z(e,LaserlinePathTechnique_n,new Map([["data",(0,glUtil/* glLayout */.U)(this._layout)]]),new Map([["data",BufferObject/* BufferObject */.g.createVertex(e,enums/* Usage */._U.STATIC_DRAW,r)]]))}_ensureVertexData(e,t){if(!this._dirty)return;const r=this._createDataBuffer(t);e.vertexBuffers.get("data")?.setData(r),this._dirty=!1}_createDataBuffer(r){const s=r.reduce(((e,t)=>e+LaserlinePathData_d(t)),0);this._count=s;const i=this._layout.createBuffer(s),o=this._origin;let f=0,n=0;const u="startUp"in i?this._setUpVectors.bind(this,i):void 0;for(const a of r){for(let r=0;r<a.length;r+=3){const s=(0,vec32.i)(LaserlinePathData_m,a[r],a[r+1],a[r+2]);0===r?n=this._renderCoordsHelper.getAltitude(s):this._renderCoordsHelper.setAltitude(s,n);const l=f+2*r;u?.(r,l,a,s);const c=(0,vec32.d)(LaserlinePathData_m,s,o);if(r<a.length-3){for(let e=0;e<6;e++)i.start.setVec(l+e,c);i.extrude.setValues(l,0,-1),i.extrude.setValues(l+1,1,-1),i.extrude.setValues(l+2,1,1),i.extrude.setValues(l+3,0,-1),i.extrude.setValues(l+4,1,1),i.extrude.setValues(l+5,0,1)}if(r>0)for(let e=-6;e<0;e++)i.end.setVec(l+e,c)}f+=LaserlinePathData_d(a)}return i.buffer}_setUpVectors(e,t,r,s,i){const o=this._renderCoordsHelper.worldUpAtPosition(i,LaserlinePathData_p);if(t<s.length-3)for(let f=0;f<6;f++)e.startUp.setVec(r+f,o);if(t>0)for(let f=-6;f<0;f++)e.endUp.setVec(r+f,o)}}function LaserlinePathData_d(e){return 3*(2*(e.length/3-1))}const LaserlinePathData_p=(0,vec3f64/* create */.vt)(),LaserlinePathData_m=(0,vec3f64/* create */.vt)(),LaserlinePathData_b=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.START).vec3f(VertexAttribute/* VertexAttribute */.r.END).vec2f(VertexAttribute/* VertexAttribute */.r.EXTRUDE).vec3f(VertexAttribute/* VertexAttribute */.r.START_UP).vec3f(VertexAttribute/* VertexAttribute */.r.END_UP),LaserlinePathData_g=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.START).vec3f(VertexAttribute/* VertexAttribute */.r.END).vec2f(VertexAttribute/* VertexAttribute */.r.EXTRUDE);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js + 1 modules
var ShaderTechniqueConfiguration = __webpack_require__(77941);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlinePathTechniqueConfiguration_e extends ShaderTechniqueConfiguration/* ShaderTechniqueConfiguration */.K{constructor(){super(...arguments),this.contrastControlEnabled=!1,this.spherical=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlinePathTechniqueConfiguration_e.prototype,"contrastControlEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlinePathTechniqueConfiguration_e.prototype,"spherical",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlineTechniqueConfiguration_n extends LaserlinePathTechniqueConfiguration_e{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlineTechniqueConfiguration_n.prototype,"heightManifoldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlineTechniqueConfiguration_n.prototype,"pointDistanceEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlineTechniqueConfiguration_n.prototype,"lineVerticalPlaneEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],LaserlineTechniqueConfiguration_n.prototype,"intersectsLineEnabled",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let LaserLineRenderer_j=class extends RenderNode/* default */.A{constructor(e){super(e),this.isDecoration=!0,this.produces=webgl/* InternalRenderCategory */.OG.LASERLINES,this.consumes={required:[webgl/* InternalRenderCategory */.OG.LASERLINES,"normals"]},this.requireGeometryDepth=!0,this._configuration=new LaserlineTechniqueConfiguration_n,this._pathTechniqueConfiguration=new LaserlinePathTechniqueConfiguration_e,this._heightManifoldEnabled=!1,this._pointDistanceEnabled=!1,this._lineVerticalPlaneEnabled=!1,this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._passParameters=new LaserlinePathTechnique_a;const t=e.view.stage.renderView.techniques,i=new LaserlinePathTechniqueConfiguration_e;i.contrastControlEnabled=e.contrastControlEnabled,t.precompile(LaserlinePathTechnique_c,i)}initialize(){this._passParameters.renderCoordsHelper=this.view.renderCoordsHelper,this._pathTechniqueConfiguration.spherical=this.view.state.viewingMode===ViewingMode/* ViewingMode */.RT.Global,this._pathTechniqueConfiguration.contrastControlEnabled=this.contrastControlEnabled,this._techniques.precompile(LaserlinePathTechnique_c,this._pathTechniqueConfiguration),this._blit=new Blit_o(this._techniques,CompositingTechniqueConfiguration/* BlitMode */.d.PremultipliedAlpha)}destroy(){this._pathVerticalPlaneData=(0,maybe/* disposeMaybe */.WD)(this._pathVerticalPlaneData),this._blit=null}get _techniques(){return this.view.stage.renderView.techniques}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}get heightManifoldTarget(){return this._passParameters.heightManifoldTarget}set heightManifoldTarget(e){(0,vec32.c)(this._passParameters.heightManifoldTarget,e),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}get pointDistanceTarget(){return this._passParameters.pointDistanceTarget}set pointDistanceTarget(e){(0,vec32.c)(this._passParameters.pointDistanceTarget,e),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}get pointDistanceOrigin(){return this._passParameters.pointDistanceOrigin}set pointDistanceOrigin(e){(0,vec32.c)(this._passParameters.pointDistanceOrigin,e),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}get lineVerticalPlaneSegment(){return this._passParameters.lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){(0,lineSegment/* copy */.C)(e,this._passParameters.lineVerticalPlaneSegment),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}get intersectsLineSegment(){return this._passParameters.intersectsLineSegment}set intersectsLineSegment(e){(0,lineSegment/* copy */.C)(e,this._passParameters.intersectsLineSegment),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,null!=this._pathVerticalPlaneData&&this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE))}set pathVerticalPlaneVertices(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new LaserlinePathData_(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}set pathVerticalPlaneBuffers(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new LaserlinePathData_(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}setParameters(e){(0,MaterialUtil/* updateParameters */.MB)(this._passParameters,e)&&this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}precompile(){this._acquireTechnique()}render(e){const t=e.find((({name:e})=>e===this.produces));if(this.isDecoration&&!this.bindParameters.decorations||null==this._blit)return t;const i=this.renderingContext,n=e.find((({name:e})=>"normals"===e));this._passParameters.normals=n?.getTexture();const s=()=>{(this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(),this.pathVerticalPlaneEnabled&&this._renderPath()};if(!this.contrastControlEnabled)return i.bindFramebuffer(t.fbo),s(),t;this._passParameters.colors=t.getTexture();const r=this.fboCache.acquire(t.fbo.width,t.fbo.height,"laser lines");return i.bindFramebuffer(r.fbo),i.setClearColor(0,0,0,0),i.clear(enums/* FramebufferBit */.NV.COLOR|enums/* FramebufferBit */.NV.DEPTH),s(),i.unbindTexture(t.getTexture()),this._blit.blend(i,r,t,this.bindParameters)||this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE),r.release(),t}_acquireTechnique(){return this._configuration.heightManifoldEnabled=this.heightManifoldEnabled,this._configuration.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._configuration.pointDistanceEnabled=this.pointDistanceEnabled,this._configuration.intersectsLineEnabled=this.intersectsLineEnabled,this._configuration.contrastControlEnabled=this.contrastControlEnabled,this._configuration.spherical=this.view.state.viewingMode===ViewingMode/* ViewingMode */.RT.Global,this._techniques.get(LaserlineTechnique_h,this._configuration)}_renderUnified(){if(!this._updatePassParameters())return;const e=this._acquireTechnique();if(e.compiled){const t=this.renderingContext;t.bindTechnique(e,this.bindParameters,this._passParameters),t.screen.draw()}else this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}_renderPath(){if(null==this._pathVerticalPlaneData)return;const e=this._techniques.get(LaserlinePathTechnique_c,this._pathTechniqueConfiguration);if(e.compiled){const t=this.renderingContext;this._passParameters.origin=this._pathVerticalPlaneData.origin,t.bindTechnique(e,this.bindParameters,this._passParameters),this._pathVerticalPlaneData.draw(t)}else this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}_updatePassParameters(){if(!this._intersectsLineEnabled)return!0;const e=this.bindParameters.camera,t=this._passParameters;if(this._intersectsLineInfinite){if((0,clipRay/* fromRay */.$e)((0,ray/* wrap */.LV)(t.intersectsLineSegment.origin,t.intersectsLineSegment.vector),LaserLineRenderer_w),LaserLineRenderer_w.c0=-Number.MAX_VALUE,!(0,frustum/* intersectClipRay */.ig)(e.frustum,LaserLineRenderer_w))return!1;(0,clipRay/* getStart */.j1)(LaserLineRenderer_w,t.lineStartWorld),(0,clipRay/* getEnd */.mO)(LaserLineRenderer_w,t.lineEndWorld)}else (0,vec32.c)(t.lineStartWorld,t.intersectsLineSegment.origin),(0,vec32.f)(t.lineEndWorld,t.intersectsLineSegment.origin,t.intersectsLineSegment.vector);return!0}get test(){}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],LaserLineRenderer_j.prototype,"contrastControlEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],LaserLineRenderer_j.prototype,"isDecoration",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],LaserLineRenderer_j.prototype,"produces",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],LaserLineRenderer_j.prototype,"consumes",void 0),LaserLineRenderer_j=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer")],LaserLineRenderer_j);const LaserLineRenderer_w=(0,clipRay/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LaserlineVisualElement_c extends VisualElement_t{constructor(e){super(e),this._angleCutoff=Laserlines_glsl.d,this._style={},this._heightManifoldTarget=(0,vec3f64/* create */.vt)(),this._heightManifoldEnabled=!1,this._intersectsLine=(0,lineSegment/* create */.vt)(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProperties(e)}get testData(){}createResources(){this._ensureRenderer()}destroyResources(){this._disposeRenderer()}updateVisibility(){this._syncRenderer(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this._syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this._syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(t){null!=t?((0,vec32.c)(this._heightManifoldTarget,t),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this._syncRenderer(),this._syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(null==e)return void(this.intersectsLine=null);const t=this.view.renderCoordsHelper.worldUpAtPosition(e,LaserlineVisualElement_);this.intersectsLine=(0,lineSegment/* fromValues */.fA)(e,t),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){null!=e?((0,lineSegment/* copy */.C)(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this._syncIntersectsLine(),this._syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this._syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=null!=e?(0,lineSegment/* copy */.C)(e):null,this._syncLineVerticalPlane(),this._syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=null!=e?{origin:(0,vec3f64/* clone */.o8)(e.origin),target:e.target?(0,vec3f64/* clone */.o8)(e.target):null}:null,this._syncPointDistance(),this._syncRenderer()}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._renderer&&(this._renderer.isDecoration=e)}_syncRenderer(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()}_ensureRenderer(){null==this._renderer&&(this._renderer=new LaserLineRenderer_j({view:this.view,contrastControlEnabled:!0,isDecoration:this.isDecoration}),this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff())}_syncStyle(){null!=this._renderer&&this._renderer.setParameters(this._style)}_syncAngleCutoff(){this._renderer?.setParameters({angleCutoff:this._angleCutoff})}_syncHeightManifold(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))}_syncIntersectsLine(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))}_syncIntersectsLineInfinite(){null!=this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)}_syncPathVerticalPlane(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}_syncLineVerticalPlane(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}_syncPointDistance(){if(null==this._renderer)return;const e=this._pointDistanceLine,t=null!=e;this._renderer.pointDistanceEnabled=t&&null!=e.target&&this.visible,t&&(this._renderer.pointDistanceOrigin=e.origin,null!=e.target&&(this._renderer.pointDistanceTarget=e.target))}_disposeRenderer(){null!=this._renderer&&this.view.stage&&(this._renderer.destroy(),this._renderer=null)}forEachMaterial(){}}const LaserlineVisualElement_=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js + 23 modules
var OverlayRenderer = __webpack_require__(42490);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js + 1 modules
var GeometryUtil = __webpack_require__(94643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderGeometry.js
var RenderGeometry = __webpack_require__(2007);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js + 1 modules
var RibbonLineMaterial = __webpack_require__(96824);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/ExtendedLineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ExtendedLineVisualElement_G extends EngineVisualElement_t{constructor(e){super(e),this._ray=(0,ray/* create */.vt)(),this._isWorldDown=!1,this._start=(0,vec3f64/* create */.vt)(),this._end=(0,vec3f64/* fromValues */.fA)(1,0,0),this._width=1,this._color=(0,vec4f64/* fromValues */.fA)(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=(0,vec4f64/* fromValues */.fA)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._falloff=0,this._extensionType=ExtendedLineVisualElement_V.LINE,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this._fadedExtensions=ExtendedLineVisualElement_L,this._laserline=new LaserlineVisualElement_c({view:this.view,isDecoration:e.isDecoration}),this.applyProperties(e)}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:ExtendedLineVisualElement_P,recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry(),forEachMaterial:(e,t)=>t(e.material)}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:ExtendedLineVisualElement_P,recreateGeometry:e=>this._recreateDrapedGeometry(e),forEachMaterial:(e,t)=>t(e.material)}}updateVisibility(e){super.updateVisibility(e),this._laserline.visible=e}onAttachedChange(){this._laserline.attached=this._laserlineAttached}setStartEndFromWorldDownAtLocation(r){this._isWorldDown=!0,(0,vec32.c)(this._start,r),this.view.renderCoordsHelper.worldUpAtPosition(r,this._end),(0,vec32.d)(this._end,r,this._end),(0,ray/* fromPoints */.Cr)(this._start,this._end,this._ray),this._updateGeometry()}get start(){return this._start}set start(t){this._isWorldDown=!1,(0,vec32.q)(this._start,t)||((0,vec32.c)(this._start,t),(0,ray/* fromPoints */.Cr)(this._start,this._end,this._ray),this._updateGeometry())}get end(){return this._end}set end(t){this._isWorldDown=!1,(0,vec32.q)(this._end,t)||((0,vec32.c)(this._end,t),(0,ray/* fromPoints */.Cr)(this._start,this._end,this._ray),this._updateGeometry())}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,vec42.a)(e,this._color)||((0,vec42.c)(this._color,e),this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){(0,vec42.a)(e,this._innerColor)||((0,vec42.c)(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){null!=e&&null!=this._stippleOffColor&&(0,vec42.a)(e,this._stippleOffColor)||(this._stippleOffColor=null!=e?(0,vec4f64/* clone */.o8)(e):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(e){e!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get extensionType(){return this._extensionType}set extensionType(e){e!==this._extensionType&&(this._extensionType=e,this.recreateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&null!=this._laserlineStyle&&this.attached&&!this.isDraped}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get _normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:this._renderOccluded}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(e){this._fadedExtensions=e??ExtendedLineVisualElement_L,this.recreateGeometry()}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,hasPolygonOffset:this._polygonOffset,renderOccluded:this._normalizedRenderOccluded,isDecoration:this.isDecoration,writeDepth:this._writeDepthEnabled}}_createObject3DResources(e){const t=new RibbonLineMaterial/* RibbonLineMaterial */.W(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r}}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const i=this._createGeometry(e);r.push(i),t.addGeometry(i),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new RibbonLineMaterial/* RibbonLineMaterial */.W(this.materialParameters);return{material:e,geometries:[this._createDrapedGeometry(e)]}}_recreateDrapedGeometry(e){e.geometries=[this._createDrapedGeometry(e.material)]}_createDrapedGeometry(e){const t=this._createGeometry(e);return this._updateVerticesDraped(t),new RenderGeometry/* RenderGeometry */.$(t)}_createGeometry(e){const t=this.extensionType===ExtendedLineVisualElement_V.FADED,r=t?[(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)()]:[(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)()];return (0,GeometryUtil/* createPolylineGeometry */.Z8)(e,r,null,t?[1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]:null)}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this._lineSegment;this._updateVertexAttributesObject3D(e,t),this._laserline.intersectsLine=t}_updateVerticesDraped(e){this._updateVertexAttributesDraped(e,this._lineSegment)}get _lineSegment(){return this._extensionType===ExtendedLineVisualElement_V.FADED?this._updateLineSegmentFinite(ExtendedLineVisualElement_S):this._updateLineSegmentInfinite(this._extensionType,ExtendedLineVisualElement_S)}_updateLineSegmentFinite(e){return (0,lineSegment/* fromPoints */.Cr)(this._start,this._end,e)}_updateLineSegmentInfinite(e,t){const r=this.view.state.camera;switch((0,clipRay/* fromRay */.$e)(this._ray,ExtendedLineVisualElement_x),e){case ExtendedLineVisualElement_V.LINE:ExtendedLineVisualElement_x.c0=-Number.MAX_VALUE;break;case ExtendedLineVisualElement_V.RAY:case ExtendedLineVisualElement_V.GROUND_RAY:{const e=this._ray.origin,t=this.view.elevationProvider.getElevation(e[0],e[1],e[2],this.view.renderCoordsHelper.spatialReference,"ground")??0,r=this.view.renderCoordsHelper.getAltitude(e);this._isWorldDown&&r<t&&(0,vec32.u)(ExtendedLineVisualElement_x.ray.direction,ExtendedLineVisualElement_x.ray.direction),this._extensionType===ExtendedLineVisualElement_V.GROUND_RAY&&null!=t&&(ExtendedLineVisualElement_x.c1=Math.abs(r-t));break}}if(!(0,frustum/* intersectClipRay */.ig)(r.frustum,ExtendedLineVisualElement_x))return this._updateLineSegmentFinite(t);const s=(0,clipRay/* getStart */.j1)(ExtendedLineVisualElement_x,ExtendedLineVisualElement_v),n=(0,clipRay/* getEnd */.mO)(ExtendedLineVisualElement_x,ExtendedLineVisualElement_M);return (0,lineSegment/* fromPoints */.Cr)(s,n,t)}_updateVertexAttributesObject3D(e,t){const r=e.geometries[0].getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION)?.data;if(!r)return;let i=0;for(const s of this._lineVertices(t))r[i++]=s[0],r[i++]=s[1],r[i++]=s[2];e.geometryVertexAttributeUpdated(e.geometries[0],VertexAttribute/* VertexAttribute */.r.POSITION)}_updateVertexAttributesDraped(e,t){const r=e.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION)?.data;if(!r)return;let i=0;for(const s of this._lineVertices(t))r[i++]=s[0],r[i++]=s[1],r[i++]=OverlayRenderer/* drapedZ */.bi;e.invalidateBoundingInfo()}*_lineVertices(e){this.extensionType===ExtendedLineVisualElement_V.FADED?(yield (0,lineSegment/* pointAt */.sd)(e,-this.fadedExtensions.start,ExtendedLineVisualElement_v),yield (0,lineSegment/* pointAt */.sd)(e,0,ExtendedLineVisualElement_v),yield (0,lineSegment/* pointAt */.sd)(e,1,ExtendedLineVisualElement_v),yield (0,lineSegment/* pointAt */.sd)(e,1+this.fadedExtensions.end,ExtendedLineVisualElement_v)):(yield (0,lineSegment/* pointAt */.sd)(e,0,ExtendedLineVisualElement_v),yield (0,lineSegment/* pointAt */.sd)(e,1,ExtendedLineVisualElement_v))}}function ExtendedLineVisualElement_P(e){e.geometries=[]}const ExtendedLineVisualElement_x=(0,clipRay/* create */.vt)(),ExtendedLineVisualElement_v=(0,vec3f64/* create */.vt)(),ExtendedLineVisualElement_M=(0,vec3f64/* create */.vt)(),ExtendedLineVisualElement_S=(0,lineSegment/* create */.vt)();var ExtendedLineVisualElement_V;!function(e){e[e.LINE=0]="LINE",e[e.RAY=1]="RAY",e[e.GROUND_RAY=2]="GROUND_RAY",e[e.FADED=3]="FADED"}(ExtendedLineVisualElement_V||(ExtendedLineVisualElement_V={}));const ExtendedLineVisualElement_T=1/3,ExtendedLineVisualElement_L={start:ExtendedLineVisualElement_T,end:ExtendedLineVisualElement_T};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js
var dehydratedPoint = __webpack_require__(29394);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/ParallelLineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ParallelLineVisualElement_v extends EngineVisualElement_t{constructor(e){super(e),this._location=(0,vec3f64/* create */.vt)(),this._direction=(0,vec3f64/* fromValues */.fA)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,vec4f64/* fromValues */.fA)(1,0,1,1),this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:ParallelLineVisualElement_M,recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry(),forEachMaterial:(e,t)=>t(e.material)}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:ParallelLineVisualElement_A,recreateGeometry:e=>this._recreateDrapedGeometry(e),forEachMaterial:(e,t)=>t(e.material)}}get location(){return this._location}set location(e){(0,vec32.q)(this._location,e)||((0,vec32.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,vec32.q)(this._direction,e)||((0,vec32.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){(0,vec32.n)(this._direction,(0,vec32.d)(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,vec42.a)(e,this._color)||((0,vec42.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._updateMaterial()}_createObject3DResources(e){const t=new RibbonLineMaterial/* RibbonLineMaterial */.W(this.materialParameters),r=new Array;return this._createObject3DGeometry(t,e,r),{material:t,geometries:r}}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,r){const[i,s]=ParallelLineVisualElement_P(e);t.addGeometry(i),t.addGeometry(s),r.push(i),r.push(s),this._updateVerticesObject3D(t)}_createDrapedResources(){const t=new RibbonLineMaterial/* RibbonLineMaterial */.W(this.materialParameters),r=(0,reactiveUtils/* watch */.wB)((()=>this.view.state.contentPixelRatio),(()=>this.drapedResources.recreateGeometry()));return{material:t,geometries:this._createDrapedGeometry(t),pixelRatioHandle:r}}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=ParallelLineVisualElement_P(e);return this._updateVerticesDraped(t),t.map((e=>new RenderGeometry/* RenderGeometry */.$(e)))}_updateMaterial(){const{materialParameters:e}=this;this.object3dResources.resources?.material.setParameters(e),this.drapedResources.resources?.material.setParameters(e)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,ParallelLineVisualElement_U),(0,vec32.f)(ParallelLineVisualElement_I,this.location,this.direction),t.projectToScreen(ParallelLineVisualElement_I,ParallelLineVisualElement_E),(0,vec2/* normalize */.S8)(ParallelLineVisualElement_E,(0,vec2/* subtract */.Re)(ParallelLineVisualElement_E,ParallelLineVisualElement_E,ParallelLineVisualElement_U)),this._updateVertexAttributesObject3D(t,e,0,ParallelLineVisualElement_U,ParallelLineVisualElement_E,1),this._updateVertexAttributesObject3D(t,e,1,ParallelLineVisualElement_U,ParallelLineVisualElement_E,-1)}_updateVertexAttributesObject3D(e,t,i,s,a,o){const c=t.geometries[i],n=c.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION)?.data;if(!n)return;const{start:d,end:h}=ParallelLineVisualElement_V(a,s,o,this.offset,this.width,this.length);e.unprojectFromScreen((0,screenUtils/* castScreenPointArray */.PR)(d),ParallelLineVisualElement_I),n[0]=ParallelLineVisualElement_I[0],n[1]=ParallelLineVisualElement_I[1],n[2]=ParallelLineVisualElement_I[2],e.unprojectFromScreen((0,screenUtils/* castScreenPointArray */.PR)(h),ParallelLineVisualElement_I),n[3]=ParallelLineVisualElement_I[0],n[4]=ParallelLineVisualElement_I[1],n[5]=ParallelLineVisualElement_I[2],t.geometryVertexAttributeUpdated(c,VertexAttribute/* VertexAttribute */.r.POSITION)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:r}}}=this,{location:i,width:s,length:a,offset:o}=this,c=ParallelLineVisualElement_N;c.spatialReference=t.renderer.spatialReference,c.x=i[0],c.y=i[1];const n=this.view.overlayPixelSizeInMapUnits(c)*r,d=s*n,h=a*n,l=o*n;this._updateVertexAttributesDraped(e[0],d,h,l,-1),this._updateVertexAttributesDraped(e[1],d,h,l,1)}_updateVertexAttributesDraped(e,t,r,i,s){const a=e.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION)?.data;if(!a)return;const{location:o,direction:c}=this,{start:n,end:d}=ParallelLineVisualElement_V(c,o,s,i,t,r);a[0]=n[0],a[1]=n[1],a[2]=OverlayRenderer/* drapedZ */.bi,a[3]=d[0],a[4]=d[1],a[5]=OverlayRenderer/* drapedZ */.bi,e.invalidateBoundingInfo()}}function ParallelLineVisualElement_P(e){return[(0,GeometryUtil/* createPolylineGeometry */.Z8)(e,[(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)()]),(0,GeometryUtil/* createPolylineGeometry */.Z8)(e,[(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)()])]}function ParallelLineVisualElement_V(e,t,r,i,s,n){const d=(0,vec2/* scale */.hs)(ParallelLineVisualElement_S,(0,vec2/* set */.hZ)(ParallelLineVisualElement_S,e[1]*r,e[0]*-r),i+s/2),h=(0,vec2/* add */.WQ)(ParallelLineVisualElement_T,(0,vec2/* add */.WQ)(ParallelLineVisualElement_T,(0,vec2/* add */.WQ)(ParallelLineVisualElement_T,t,(0,vec2/* scale */.hs)(ParallelLineVisualElement_T,e,n/2)),d),d);return{start:h,end:(0,vec2/* add */.WQ)(ParallelLineVisualElement_F,h,(0,vec2/* scale */.hs)(ParallelLineVisualElement_F,e,-n))}}function ParallelLineVisualElement_M(e){e.geometries.length=0}function ParallelLineVisualElement_A(e){e.pixelRatioHandle.remove(),e.geometries=[]}const ParallelLineVisualElement_I=(0,vec3f64/* create */.vt)(),ParallelLineVisualElement_S=(0,vec2f64/* create */.vt)(),ParallelLineVisualElement_T=(0,vec2f64/* create */.vt)(),ParallelLineVisualElement_F=(0,vec2f64/* create */.vt)(),ParallelLineVisualElement_U=(0,screenUtils/* createScreenPointArray */.gs)(),ParallelLineVisualElement_E=(0,screenUtils/* createScreenPointArray */.gs)(),ParallelLineVisualElement_N=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,void 0,null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingBox.js
var aaBoundingBox = __webpack_require__(4675);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/Object3DVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Object3DVisualElement_c extends VisualElement_t{constructor(e){super(e),this._resources=null,this._transform=(0,mat4f64/* create */.vt)()}get object(){return null!=this._resources?this._resources.object:null}get transform(){return this._transform}set transform(s){(0,mat4/* copy */.C)(this._transform,s),null!=this._resources&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if(null==this._resources)return;const e=this._resources.object;e.removeAllGeometries(),this.createGeometries(e),e.visible=this.visible}createResources(){this.destroyResources();const e=this.view.stage;if(!e)return;const s=new WebGLLayer/* WebGLLayer */.x(e,{pickable:!1,updatePolicy:UpdatePolicy/* UpdatePolicy */.q.SYNC}),r=new Object3D/* Object3D */.B({castShadow:!1});r.transformation=this._transform,this.createExternalResources(),this.createGeometries(r),s.add(r),r.visible=this.visible,this._resources={layer:s,object:r}}destroyResources(){const e=this.view.stage;null!=this._resources&&e&&(this._resources.layer.destroy(),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(e){null!=this._resources&&(this._resources.object.visible=e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js
var elevationAlignmentUtils = __webpack_require__(27716);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js
var ElevationContext = __webpack_require__(58343);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/engineContent/sdfPrimitives.js
var sdfPrimitives = __webpack_require__(97213);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js + 4 modules
var HUDMaterial = __webpack_require__(62331);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/PointVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PointVisualElement_S extends Object3DVisualElement_c{constructor(e){super(e),this._material=null,this._texture=null,this._geometry=null,this._size=3,this._color=(0,vec4f64/* fromValues */.fA)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=(0,vec4f64/* fromValues */.fA)(1,1,1,1),this._elevationInfo=null,this.applyProperties(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this._preferredTextureSize;this._size=e,t<this._preferredTextureSize?this.recreate():this._updateSizeAttribute()}}get color(){return this._color}set color(e){(0,vec42.a)(e,this._color)||((0,vec42.c)(this._color,e),this._updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this._updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,this.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,vec42.a)(e,this._outlineColor)||((0,vec42.c)(this._outlineColor,e),this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}_updateMaterial(){this._material?.setParameters(this._materialParameters)}_updateSizeAttribute(){const e=this.object;if(null==e)return;const t=e.geometries[0];if(null==t)return;const i=t.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.SIZE).data,r=this._geometrySize;i[0]=r,i[1]=r,e.geometryVertexAttributeUpdated(e.geometries[0],VertexAttribute/* VertexAttribute */.r.SIZE)}get _materialParameters(){return{color:this._color,textureIsSignedDistanceField:!0,sampleSignedDistanceFieldTexelCenter:(0,sdfPrimitives/* requiresHalfTexelOffset */.ny)(this._primitive),distanceFieldBoundingBox:sdfPrimitives/* defaultBoundingBox */.PY,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:this._texture?.id,polygonOffset:!1,shaderPolygonOffset:0,drawAsLabel:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled,isDecoration:this.isDecoration}}get _geometrySize(){return this._size/sdfPrimitives/* defaultSymbolSizeRatio */.CN}createExternalResources(){this._texture=(0,sdfPrimitives/* createTexture */.sZ)(this._primitive,this._preferredTextureSize),this._material=new HUDMaterial/* HUDMaterial */.R(this._materialParameters,this.view.state.viewingMode===ViewingMode/* ViewingMode */.RT.Global);const e=this.view.stage;this._texture.load(e.renderView.renderingContext),e.addTexture(this._texture)}destroyExternalResources(){if(this._texture){this.view.stage.removeTexture(this._texture),this._texture.dispose(),this._texture=null}this._material=null}createGeometries(e){const t=this._createRenderGeometry();null!=t&&e.addGeometry(t)}forEachMaterial(e){e(this._material)}get _preferredTextureSize(){return (0,mathUtils/* clamp */.qE)(2*this._geometrySize,16,128)}calculateMapBounds(e){const t=this.object?.geometries[0];if(!t)return!1;const i=t.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION).data;return (0,projectVectorToVector/* projectVectorToVector */.F)(i,this.view.renderCoordsHelper.spatialReference,PointVisualElement_b,this.view.spatialReference),(0,aaBoundingBox/* expandWithBuffer */.Hq)(e,PointVisualElement_b),!0}_createRenderGeometry(){const{geometry:e,_material:i}=this;if(null==e||null==i)return null;const{renderCoordsHelper:r,elevationProvider:s}=this.view,o=(0,elevationAlignmentUtils/* evaluateElevationAlignmentAtPoint */.nG)(e,s,ElevationContext/* ElevationContext */.F.fromElevationInfo(this.elevationInfo),r),a=(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),e.x,e.y,o),u=vectorStacks/* sv3d */.rq.get();(0,projectVectorToVector/* projectVectorToVector */.F)(a,e.spatialReference,u,r.spatialReference);const h=this._geometrySize;return (0,GeometryUtil/* createPointGeometry */.DJ)(i,{position:u,size:[h,h],centerOffsetAndDistance:[0,0,0,1]})}}const PointVisualElement_b=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js
var Attribute = __webpack_require__(70807);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js + 1 modules
var Geometry = __webpack_require__(59816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js + 2 modules
var ColorMaterial = __webpack_require__(32504);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/RightAngleQuadVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class y extends EngineVisualElement_t{constructor(e){super(e),this._maxSize=0,this._position=(0,vec3f64/* create */.vt)(),this._up=(0,vec3f64/* create */.vt)(),this._right=(0,vec3f64/* create */.vt)(),this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this._color=(0,vec4f64/* fromValues */.fA)(1,0,0,1),this._outlineColor=(0,vec4f64/* fromValues */.fA)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=Material/* RenderOccludedFlag */.m$.Opaque,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:()=>{},cameraChanged:()=>this._updateTransformObject3D(),forEachMaterial:(e,t)=>{t(e.outlineMaterial),t(e.quadMaterial)}}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:RightAngleQuadVisualElement_P,forEachMaterial:(e,t)=>{t(e.outlineMaterial),t(e.quadMaterial)}}}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._updateOutlineMaterial(),this._updateQuadMaterial()}get color(){return this._color}set color(e){(0,vec42.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,vec42.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry({previous:e,center:t,next:r}){this._maxSize=Math.min((0,vec32.j)(t,e),(0,vec32.j)(t,r))/3,(0,vec32.n)(this._up,(0,vec32.d)(this._up,e,t)),(0,vec32.n)(this._right,(0,vec32.d)(this._right,r,t)),(0,vec32.c)(this._position,t),this.recreateGeometry()}_createObject3DResources(e){const t=new ColorMaterial/* ColorMaterial */.v(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new RibbonLineMaterial/* RibbonLineMaterial */.W(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,r),{quadMaterial:t,outlineMaterial:r}}_createObject3DGeometries(e,t,r){if((0,vec32.q)(this._up,vec3f64/* ZEROS */.uY)&&(0,vec32.q)(this._right,vec3f64/* ZEROS */.uY))return;const i=this._createGeometries(t,r);for(const s of i)e.addGeometry(s);this._updateTransformObject3D(e)}_createDrapedResources(){const t=new ColorMaterial/* ColorMaterial */.v(this._quadMaterialParameters),r=0===this._outlineSize?void 0:new RibbonLineMaterial/* RibbonLineMaterial */.W(this._outlineMaterialParameters),i=this._createGeometries(t,r).map((e=>new RenderGeometry/* RenderGeometry */.$(e)));this._setTransformDraped(i);return{quadMaterial:t,outlineMaterial:r,geometries:i,pixelRatioHandle:(0,reactiveUtils/* watch */.wB)((()=>this.view.state.contentPixelRatio),(()=>this.drapedResources.recreateGeometry()))}}_createGeometries(e,t){const{up:r,right:i,corner:s}=this._getVertices(),a=RightAngleQuadVisualElement_v(r,i,s,e);if(!t)return[a];return[a,(0,GeometryUtil/* createPolylineGeometry */.Z8)(t,[r,s,i])]}_getVertices(){let e=this._up,t=this._right;const r=(0,vec32.f)(vectorStacks/* sv3d */.rq.get(),e,t);return this.isDraped&&(e=(0,vec32.c)(vectorStacks/* sv3d */.rq.get(),e),t=(0,vec32.c)(vectorStacks/* sv3d */.rq.get(),t),e[2]=0,t[2]=0,r[2]=0),{up:e,right:t,corner:r}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(e=this.object3dResources.object){if(!e)return;const i=this.view.state.camera,s=this._size*i.computeScreenPixelSizeAt(this._position),a=Math.min(this._maxSize,s);(0,mat4/* fromTranslation */.kN)(RightAngleQuadVisualElement_x,this._position),(0,mat4/* scale */.hs)(RightAngleQuadVisualElement_x,RightAngleQuadVisualElement_x,[a,a,a]),e.transformation=RightAngleQuadVisualElement_x}_setTransformDraped(e){if(0===e.length)return;const{view:{basemapTerrain:{overlayManager:i},state:{contentPixelRatio:s}}}=this,{_position:a,_size:o}=this,c=(0,vec32.c)(vectorStacks/* sv3d */.rq.get(),a);c[2]=OverlayRenderer/* drapedZ */.bi;const l=RightAngleQuadVisualElement_S;l.spatialReference=i.renderer.spatialReference,l.x=c[0],l.y=c[1];const u=o*(this.view.overlayPixelSizeInMapUnits(l)*s),d=Math.min(this._maxSize,u);(0,mat4/* fromTranslation */.kN)(RightAngleQuadVisualElement_x,c),(0,mat4/* scale */.hs)(RightAngleQuadVisualElement_x,RightAngleQuadVisualElement_x,[d,d,1]);for(const t of e)t.transformation=RightAngleQuadVisualElement_x}get _quadMaterialParameters(){return{color:this._color,forceTransparentMode:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateQuadMaterial(){this.object3dResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters),this.drapedResources.resources?.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded,isDecoration:this.isDecoration}}_updateOutlineMaterial(){this.object3dResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters),this.drapedResources.resources?.outlineMaterial?.setParameters(this._outlineMaterialParameters)}}function RightAngleQuadVisualElement_P(e){e.pixelRatioHandle.remove(),e.geometries=[]}function RightAngleQuadVisualElement_v(e,t,r,i){return new Geometry/* Geometry */.V(i,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n([0,0,0,...t,...e,...r],[0,1,2,1,2,3],3,!0)]])}const RightAngleQuadVisualElement_x=(0,mat4f64/* create */.vt)(),RightAngleQuadVisualElement_S=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,void 0,null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js
var normalizedPoint = __webpack_require__(97847);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/Settings.js
var Settings = __webpack_require__(1381);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingDomain.js
var SnappingDomain = __webpack_require__(40508);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js
var snappingUtils = __webpack_require__(61851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingVisualizer.js
var SnappingVisualizer = __webpack_require__(86548);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/hints/LineSnappingHint.js
var LineSnappingHint = __webpack_require__(4368);
;// ../node_modules/@arcgis/core/views/3d/interactive/SnappingVisualizer3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SnappingVisualizer3D_R extends SnappingVisualizer/* SnappingVisualizer */.b{sortUniqueHints(e){return e.sort(((e,i)=>(i instanceof LineSnappingHint/* LineSnappingHint */.c?i.length:0)-(e instanceof LineSnappingHint/* LineSnappingHint */.c?e.length:0)))}visualizeIntersectionPoint(e,i){const{spatialReference:t,view:r}=i,o=SnappingVisualizer3D_D(i);return (0,handleUtils/* destroyHandle */.DQ)(new PointVisualElement_S({view:r,primitive:"circle",geometry:(0,normalizedPoint/* toDehydratedPoint */.io)(e.intersectionPoint,t),elevationInfo:e.isDraped?elevationInfoUtils/* onTheGroundElevationInfo */.Tq:elevationInfoUtils/* absoluteHeightElevationInfo */.qt,size:20,outlineSize:2,color:o.intersectionPointColor,outlineColor:o.intersectionPointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizePoint(e,i){const{view:t,spatialReference:r}=i,o=SnappingVisualizer3D_D(i),a=SnappingVisualizer3D_x(e.point,e.domain,i);return (0,handleUtils/* destroyHandle */.DQ)(new PointVisualElement_S({view:t,primitive:"circle",geometry:(0,normalizedPoint/* toDehydratedPoint */.io)(a,r),elevationInfo:SnappingVisualizer3D_A(e),size:20,outlineSize:2,color:o.pointColor,outlineColor:o.pointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizeLine(e,i){const{view:t,spatialReference:r}=i,o=SnappingVisualizer3D_D(i),a=SnappingVisualizer3D_x(e.lineStart,e.domain,i),l=SnappingVisualizer3D_x(e.lineEnd,e.domain,i);return (0,handleUtils/* destroyHandle */.DQ)(SnappingVisualizer3D_H(e.type,a,l,r,SnappingVisualizer3D_A(e),t,o,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,i){const{view:r,spatialReference:o}=i,a=SnappingVisualizer3D_D(i),{isDraped:l}=e,s=SnappingVisualizer3D_A(e),p=SnappingVisualizer3D_x(e.lineStart,e.domain,i),c=SnappingVisualizer3D_x(e.lineEnd,e.domain,i),m=SnappingVisualizer3D_z(p,o,s,r,l),u=SnappingVisualizer3D_z(c,o,s,r,l),v=(0,vec32.m)(u,m,u,.5),h=new ParallelLineVisualElement_v({view:r,attached:!1,offset:Settings/* defaults */.N.parallelLineHintOffset,length:Settings/* defaults */.N.parallelLineHintLength,width:Settings/* defaults */.N.parallelLineHintWidth,color:a.parallelSignColor,location:v,renderOccluded:l?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:Material/* RenderOccludedFlag */.m$.Opaque,isDraped:l,renderGroup:interfaces/* DrapedRenderGroup */.O7.SnappingHint,isDecoration:!0});return h.setDirectionFromPoints(m,v),h.attached=!0,(0,handleUtils/* destroyHandle */.DQ)(h)}visualizeRightAngleQuad(e,i){const{view:t,spatialReference:r}=i,o=SnappingVisualizer3D_D(i),a=SnappingVisualizer3D_A(e),{isDraped:l}=e,s=SnappingVisualizer3D_x(e.previousVertex,e.domain,i),p=SnappingVisualizer3D_x(e.centerVertex,e.domain,i),c=SnappingVisualizer3D_x(e.nextVertex,e.domain,i),d=SnappingVisualizer3D_z(s,r,a,t,l),m=SnappingVisualizer3D_z(p,r,a,t,l),v=SnappingVisualizer3D_z(c,r,a,t,l);return (0,handleUtils/* destroyHandle */.DQ)(new y({view:t,attached:!0,color:l?o.rightAngleColorDraped:o.rightAngleColor,renderOccluded:l?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:Material/* RenderOccludedFlag */.m$.Transparent,outlineRenderOccluded:l?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:Material/* RenderOccludedFlag */.m$.Opaque,outlineColor:o.rightAngleOutlineColor,outlineSize:Settings/* defaults */.N.rightAngleHintOutlineSize,size:Settings/* defaults */.N.rightAngleHintSize,isDraped:l,geometry:{previous:d,center:m,next:v},renderGroup:interfaces/* DrapedRenderGroup */.O7.SnappingHint,isDecoration:!0}))}}function SnappingVisualizer3D_D(n){const{effectiveTheme:t}=n.view,r=Color/* default */.A.toUnitRGBA(t.accentColor),o=[0,0,0,0];return{intersectionPointColor:o,intersectionPointOutlineColor:r,pointColor:o,pointOutlineColor:r,lineColor:r,lineOutlineColor:void 0,parallelSignColor:r,rightAngleColor:r,rightAngleColorDraped:Color/* default */.A.toUnitRGBA((0,colorUtils/* multiplyOpacity */._L)(t.accentColor,.5)),rightAngleOutlineColor:r}}function SnappingVisualizer3D_x(e,i,{selfSnappingZ:n,view:t,spatialReference:r}){return 0!==(i&SnappingDomain/* SnappingDomain */.n.SELF)&&(0,normalizedPoint/* isTarget */.Ex)(e)&&null!=n?(0,normalizedPoint/* withSelfSnappingZ */.FH)(e,n,t,r):e}function SnappingVisualizer3D_A(e){return e.isDraped?elevationInfoUtils/* onTheGroundElevationInfo */.Tq:elevationInfoUtils/* absoluteHeightElevationInfo */.qt}function SnappingVisualizer3D_H(e,i,n,t,r,o,a,l=!1,s=!0,d=!0){const m=SnappingVisualizer3D_z(i,t,r,o,l),u=SnappingVisualizer3D_z(n,t,r,o,l),v=new ExtendedLineVisualElement_G({view:o,extensionType:ExtendedLineVisualElement_V.FADED,start:m,end:u,isDraped:l,color:a.lineColor,renderOccluded:l?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:Material/* RenderOccludedFlag */.m$.Opaque,renderGroup:interfaces/* DrapedRenderGroup */.O7.SnappingHint,isDecoration:!0});switch(e){case snappingUtils/* LineSegmentHintType */.H3.TARGET:v.width=Settings/* defaults */.N.lineHintWidthTarget,v.fadedExtensions={start:0,end:Settings/* defaults */.N.lineHintFadedExtensions};break;case snappingUtils/* LineSegmentHintType */.H3.REFERENCE_EXTENSION:v.width=Settings/* defaults */.N.lineHintWidthReference,v.fadedExtensions={start:0,end:0};break;case snappingUtils/* LineSegmentHintType */.H3.REFERENCE:v.width=Settings/* defaults */.N.lineHintWidthReference,v.fadedExtensions={start:s?Settings/* defaults */.N.lineHintFadedExtensions:0,end:d?Settings/* defaults */.N.lineHintFadedExtensions:0}}return v.attached=!0,v}function SnappingVisualizer3D_z(e,i,n,t,a){const l=(0,vec3f64/* create */.vt)();if(a){const n=t.basemapTerrain.overlayManager.renderer.spatialReference;(0,projectVectorToVector/* projectVectorToVector */.F)(e,i,l,n)}else (0,viewUtils/* vectorToRender */.X)(e,i,n,t,l);return l}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/sources/interfaces.js
var sources_interfaces = __webpack_require__(12155);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/meshFastUpdateUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function meshFastUpdateUtils_a(a){const t=a.graphic;return t?[(0,reactiveUtils/* watch */.wB)((()=>"visible"in a?a.visible:a.displaying),(s=>{s&&t.notifyMeshTransformChanged({action:sources_interfaces/* MeshTransformUpdateAction */.$.EnableFastUpdates})}),{...reactiveUtils/* syncAndInitial */.pc}),(0,handleUtils/* makeHandle */.hA)((()=>t.notifyMeshTransformChanged({action:sources_interfaces/* MeshTransformUpdateAction */.$.DisableFastUpdates})))]:[]}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js
var lineStippleUtils = __webpack_require__(86868);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/settings.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const settings_d=.3;function settings_u(o,t){t&&Object.assign(o,t)}class settings_g{constructor(o){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=Material/* RenderOccludedFlag */.m$.Opaque,this.color=o.accent}}class settings_f{constructor({colors:o,...t}){this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=o.accent,this.outlineColor=o.outline,this.renderOccluded=Material/* RenderOccludedFlag */.m$.Opaque,this.hoverOutlineColor=o.selectedOutline,settings_u(this,t)}applyColor(o){this._apply(this.color,o)}applyOutline(o){this._apply(this.outlineColor,o)}applyHoverOutline(o){this._apply(this.hoverOutlineColor,o)}_apply(o,t){t.setParameters({color:(0,colorUtils/* unitRGBAFromColor */.QP)(o),renderOccluded:this.renderOccluded})}}class settings_w{constructor({colors:o,...t}){this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=Material/* RenderOccludedFlag */.m$.Transparent,this.minSquaredEdgeLength=900,this.color=(0,colorUtils/* multiplyOpacity */._L)(o.accent,.5),this.hoverColor=o.accent,settings_u(this,t)}applyColor(o){this._apply(this.color,o)}applyHover(o){this._apply(this.hoverColor,o)}_apply(o,t){t.setParameters({color:(0,colorUtils/* unitRGBAFromColor */.QP)(o),renderOccluded:this.renderOccluded})}}class settings_C{constructor(o){this.vertex=new settings_f({colors:o,color:o.accent,outlineColor:o.outline}),this.edge=new settings_f({colors:o,color:(0,colorUtils/* desaturate */.Vl)((0,colorUtils/* multiplyOpacity */._L)(o.accent,2/3),.5),outlineColor:(0,colorUtils/* multiplyOpacity */._L)(o.outline,.5),size:8,collisionPadding:8}),this.selected=new settings_f({colors:o,color:o.selected,outlineColor:o.outline}),this.edgeOffset=new settings_w({colors:o})}}class settings_m{constructor({colors:o,...t}){this.width=1.5,this.stipplePattern=(0,lineStippleUtils/* createStipplePatternSimple */.wk)(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this.color=o.selected,this.stippleOffColor=o.outline,this.innerColor=o.selected,settings_u(this,t)}apply(o){o.color=(0,colorUtils/* unitRGBAFromColor */.QP)(this.color),o.width=this.width,o.stipplePattern=this.stipplePattern,o.stippleOffColor=(0,colorUtils/* unitRGBAFromColor */.QP)(this.stippleOffColor),o.falloff=this.falloff,o.innerWidth=this.innerWidth,o.innerColor=(0,colorUtils/* unitRGBAFromColor */.QP)(this.innerColor),o.renderOccluded=this.renderOccluded}}class settings_O{constructor({colors:o,...t}){this.size=4,this.outlineSize=1,this.shape="square",this.color=o.selected,this.outlineColor=o.outline,settings_u(this,t)}apply(o){o.color=(0,colorUtils/* unitRGBAFromColor */.QP)(this.color),o.size=this.size,o.outlineSize=this.outlineSize,o.outlineColor=(0,colorUtils/* unitRGBAFromColor */.QP)(this.outlineColor),o.primitive=this.shape}}class settings_y{constructor({colors:o,...t}){this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=settings_d,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=o.selected,this.glowColor=o.accent,this.heightFillColor=o.accent,settings_u(this,t)}apply(o,e=1){const l={glowColor:Color/* default */.A.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:Color/* default */.A.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*e*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in o?o.style=l:o.laserlineStyle=l}}class settings_A{constructor(o){this.outline=new settings_m({colors:o,color:o.stippleOff,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,stippleOffColor:o.stippleOn,innerWidth:0}),this.staged=new settings_m({colors:o,color:o.stippleOn,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,innerColor:o.stagedSolid,stippleOffColor:o.stippleOff}),this.shadowStyle=new settings_y({colors:o,globalAlpha:settings_d,glowColor:o.accent,glowFalloff:8,glowWidth:8,innerColor:o.selected,innerWidth:1})}}class settings_W{constructor(o){this.outline=new settings_O({colors:o,color:o.selected,outlineColor:o.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new settings_y({colors:o,globalAlpha:settings_d,glowColor:o.accent,glowFalloff:1.5,glowWidth:6,innerColor:o.selected,innerWidth:1,radius:2})}}class settings_b extends settings_m{constructor({colors:o,...t}){super({colors:o}),this.extensionType=ExtendedLineVisualElement_V.GROUND_RAY,settings_u(this,t)}}class settings_S{constructor(o){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new settings_A(o),this.pointObjects=new settings_W(o),this.heightPlane=new settings_y({colors:o,globalAlpha:settings_d,glowColor:o.accent,glowFalloff:8,glowWidth:8,innerColor:o.selected,innerWidth:1}),this.heightBox=new settings_y({colors:o,globalAlpha:settings_d,glowColor:o.accent,glowFalloff:8,glowWidth:8,innerColor:o.selected,innerWidth:0,heightFillColor:o.accent}),this.zVerticalLine=new settings_b({colors:o,color:(0,colorUtils/* multiplyOpacity */._L)(o.accent,5*settings_d/3),falloff:2,innerColor:(0,colorUtils/* multiplyOpacity */._L)(o.selected,0),renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,stipplePattern:null,width:5,extensionType:ExtendedLineVisualElement_V.GROUND_RAY})}}let settings_j=class extends Accessor/* default */.A{constructor(o){super(o)}get colors(){const o=this.getTheme().accentColor,e=o.a;return{accent:o,contrast:(0,colorUtils/* getContrast */.bJ)(o),selected:Color/* default */.A.fromArray([255,255,255,e]),selectedOutline:Color/* default */.A.fromArray([255,255,255,e]),staged:Color/* default */.A.fromArray([12,207,255,e]),stagedSolid:Color/* default */.A.fromArray([12,207,255,1]),outline:Color/* default */.A.fromArray([0,0,0,.5*e]),stippleOn:Color/* default */.A.fromArray([255,255,255,1]),stippleOff:Color/* default */.A.fromArray([0,0,0,.5])}}get visualElements(){return new settings_S(this.colors)}get manipulators(){return new settings_C(this.colors)}get zManipulator(){return new settings_g(this.colors)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],settings_j.prototype,"colors",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],settings_j.prototype,"visualElements",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],settings_j.prototype,"manipulators",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],settings_j.prototype,"zManipulator",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],settings_j.prototype,"getTheme",void 0),settings_j=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.settings")],settings_j);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectBuffer.js
var projectBuffer = __webpack_require__(84119);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/engineContent/line.js
var line = __webpack_require__(46684);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/line.js
var renderInfoUtils_line = __webpack_require__(4062);
;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/OutlineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OutlineVisualElement_j extends EngineVisualElement_t{constructor(t){super(t),this._attachmentOrigin=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,0,null),this._attachmentOriginDirty=!0,this.events=new Evented/* default */.A,this._geometry=null,this._width=1,this._color=(0,vec4f64/* fromValues */.fA)(1,0,1,1),this._innerWidth=0,this._innerColor=(0,vec4f64/* fromValues */.fA)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._elevationInfo=null,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,this._attachmentOrigin.spatialReference=t.view.spatialReference,this._laserline=new LaserlineVisualElement_c({view:t.view,isDecoration:t.isDecoration}),this.applyProperties(t),this.attached=t.attached??!0}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:OutlineVisualElement_D,recreateGeometry:(e,t)=>{e.geometries.length=0,this._recreateGeometry(t,e.material,e.geometries)},forEachMaterial:(e,t)=>t(e.material)}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:OutlineVisualElement_D,recreateGeometry:e=>{e.geometries=this._createRenderGeometriesDraped(e.material),this._attachmentOriginChanged()},forEachMaterial:(e,t)=>t(e.material)}}get _laserlineAttached(){return this.attached&&this.visible&&null!=this._laserlineStyle&&!this.isDraped&&this.laserlineEnabled}onAttachedChange(e){this._laserline.attached=this._laserlineAttached,e&&this._attachmentOriginChanged()}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._updateMaterial()}get geometry(){return this._geometry}set geometry(e){const t=this._isClosed;this._geometry=e,this.recreateGeometry(),t!==this._isClosed&&this._updateMaterial()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,vec42.a)(e,this._color)||((0,vec42.c)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){(0,vec42.a)(e,this._innerColor)||((0,vec42.c)(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){e&&this._stippleOffColor&&(0,vec42.a)(e,this._stippleOffColor)||(this._stippleOffColor=e?(0,vec4f64/* clone */.o8)(e):null,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get attachmentOrigin(){if(!this._attachmentOriginDirty)return this._attachmentOrigin;const e=this.object3dResources.resources?.geometries;if(!e||0===e.length)return null;(0,vec32.i)(OutlineVisualElement_E,0,0,0);let s=0;for(const t of e)t.computeAttachmentOrigin(OutlineVisualElement_P)&&((0,vec32.f)(OutlineVisualElement_E,OutlineVisualElement_E,OutlineVisualElement_P),s++);return 0===s?null:((0,vec32.g)(OutlineVisualElement_E,OutlineVisualElement_E,1/s),this.view.renderCoordsHelper.fromRenderCoords(OutlineVisualElement_E,this._attachmentOrigin),this._attachmentOriginDirty=!1,this._attachmentOrigin)}_updateMaterial(){this.object3dResources.resources?.material.setParameters(this._materialParameters),this.drapedResources.resources?.material.setParameters(this._materialParameters)}get _isClosed(){return null!=this.geometry&&"polygon"===this.geometry.type}get _materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded,isDecoration:this.isDecoration}}get _normalizedRenderOccluded(){return this.isDraped&&this._renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil?Material/* RenderOccludedFlag */.m$.OccludeAndTransparent:this._renderOccluded}_recreateGeometry(e,t,r){this._createRenderGeometries(t,r);for(const i of r)e.addGeometry(i);this._attachmentOriginChanged()}_attachmentOriginChanged(){this._attachmentOriginDirty=!0,this.events.emit("attachment-origin-changed")}_createObject3DResources(e){const t=new RibbonLineMaterial/* RibbonLineMaterial */.W(this._materialParameters),r=new Array;return this._recreateGeometry(e,t,r),{material:t,geometries:r}}_createDrapedResources(){const e=new RibbonLineMaterial/* RibbonLineMaterial */.W(this._materialParameters);return{material:e,geometries:this._createRenderGeometriesDraped(e)}}_createRenderGeometriesDraped(e){const{geometry:t,view:r}=this,i=r.basemapTerrain.spatialReference;if(null==t||null==i)return[];return (0,renderInfoUtils_line/* geometryToRenderInfoDraped */.A)(t,i).lines.map((({position:t})=>{const s={overlayInfo:{spatialReference:i,renderCoordsHelper:r.renderCoordsHelper},attributeData:{position:t},removeDuplicateStartEnd:this._isClosed};return new RenderGeometry/* RenderGeometry */.$((0,line/* createGeometry */.t)(e,s))}))}calculateMapBounds(e){if(null==this.object3dResources.resources)return!1;const t=this.view.renderCoordsHelper;for(const r of this.object3dResources.resources.geometries){const i=r.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),s=(0,DoubleArray/* newDoubleArray */.jh)(i.data.length);(0,projectBuffer.projectBuffer)(i.data,t.spatialReference,0,s,this.view.spatialReference,0),(0,aaBoundingBox/* expandWithBuffer */.Hq)(e,s)}return!0}_createRenderGeometries(e,t){const r=this.geometry;if(null==r)return;const i=(0,renderInfoUtils_line/* geometryToRenderInfo */.C)(r,this.view.elevationProvider,this.view.renderCoordsHelper,ElevationContext/* ElevationContext */.F.fromElevationInfo(this.elevationInfo??new ElevationInfo/* default */.A({mode:(0,elevationInfoUtils/* getGeometryEffectiveElevationMode */.w7)(r,null)}))),s=new Array;for(const{position:n,mapPositions:a}of i.lines){const r={mapPositions:a,attributeData:{position:n},removeDuplicateStartEnd:this._isClosed};t.push((0,line/* createGeometry */.t)(e,r)),s.push(n)}this._laserline.pathVerticalPlane=s}}function OutlineVisualElement_D(e){e.geometries=[]}const OutlineVisualElement_P=(0,vec3f64/* create */.vt)(),OutlineVisualElement_E=(0,vec3f64/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/support/renderInfoUtils/point.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function point_o(o,n,r,s,i){const l=(0,DoubleArray/* newDoubleArray */.jh)(3*o.length),p=(0,DoubleArray/* newDoubleArray */.jh)(l.length);o.forEach(((t,e)=>{l[3*e]=t[0],l[3*e+1]=t[1],l[3*e+2]=t.length>2?t[2]:0}));const c=(0,elevationAlignmentUtils/* applyPerVertexElevationAlignment */.au)(l,n,0,p,0,l,0,l.length/3,r,s,i),m=null!=c;return{numVertices:o.length,position:l,mapPositions:p,projectionSuccess:m,sampledElevation:c}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RayIntersections.js
var RayIntersections = __webpack_require__(6833);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js
var bufferWriterUtils = __webpack_require__(81500);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var OITPass = __webpack_require__(69338);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/ShadedColorMaterial.glsl.js
var ShadedColorMaterial_glsl = __webpack_require__(86451);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShadedColorMaterialTechnique_h extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,t){super(e,t,new ReloadableShaderModule/* ReloadableShaderModule */.$(ShadedColorMaterial_glsl.S,(()=>__webpack_require__.e(/* import() */ 82975).then(__webpack_require__.bind(__webpack_require__, 82975)))),ShadedColorMaterialTechnique_f)}initializePipeline(r){const{oitPass:t,output:l,transparent:d,cullFace:h,shadingEnabled:f}=r,S=t===OITPass/* OITPass */.Y.NONE,b=t===OITPass/* OITPass */.Y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:(0,ShaderOutput/* isColorOrColorEmission */.RN)(l)&&d?(0,OrderIndependentTransparency/* blending */.Yf)(t):null,culling:(0,renderState/* cullingParams */.Xt)(h),depthTest:{func:b?enums/* CompareFunction */.MT.LESS:f?enums/* CompareFunction */.MT.LEQUAL:enums/* CompareFunction */.MT.LESS},depthWrite:(0,OrderIndependentTransparency/* depthWrite */.z5)(r),drawBuffers:(0,OrderIndependentTransparency/* getDrawBuffers */.m6)(t,l),colorWrite:renderState/* defaultColorWrite */.kn,polygonOffset:S||b?null:OrderIndependentTransparency/* OITPolygonOffset */.SE})}}const ShadedColorMaterialTechnique_f=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.NORMAL,1],[VertexAttribute/* VertexAttribute */.r.OFFSET,2]]);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js
var Emissions_glsl = __webpack_require__(15420);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ShadedColorMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShadedColorMaterialTechniqueConfiguration_n extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.None,this.emissionSource=Emissions_glsl/* EmissionSource */.ZX.None,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1,this.draped=!1,this.overlayEnabled=!1,this.snowCover=!1}get discardInvisibleFragments(){return this.transparent}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],ShadedColorMaterialTechniqueConfiguration_n.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"screenSizeEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"shadingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"terrainDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ShadedColorMaterialTechniqueConfiguration_n.prototype,"cullAboveTerrain",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/webscene/support/AlphaCutoff.js
var AlphaCutoff = __webpack_require__(63199);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ShadedColorMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShadedColorMaterial_z extends Material/* Material */.im{constructor(e){super(e,ShadedColorMaterial_M),this._configuration=new ShadedColorMaterialTechniqueConfiguration_n,this.vertexAttributeLocations=ShadedColorMaterialTechnique_f,this.supportsEdges=!0,this._pp0=(0,vec3f64/* fromValues */.fA)(0,0,1),this._pp1=(0,vec3f64/* fromValues */.fA)(0,0,0),this.produces=new Map([[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,e=>e===ShaderOutput/* ShaderOutput */.V.Highlight||(0,ShaderOutput/* isColorOrOID */.zW)(e)&&!this.parameters.transparent],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,e=>(0,ShaderOutput/* isColorOrOID */.zW)(e)&&this.parameters.transparent&&this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,ShaderOutput/* isColorOrOID */.zW)(e)&&this.parameters.transparent&&!this.parameters.writeDepth]])}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.screenSizeEnabled=this.parameters.screenSizeEnabled,this._configuration.shadingEnabled=this.parameters.shadingEnabled,this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest&&(0,ShaderOutput/* isColorOrColorEmission */.RN)(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}get visible(){return this.parameters.color[3]>=AlphaCutoff/* alphaCutoff */.Q}intersect(e,t,r,i,s,a){this._intersect(e,r,i,s,a)}intersectDraped(e,t,r,i){return this._pp0[0]=this._pp1[0]=r[0],this._pp0[1]=this._pp1[1]=r[1],this._intersect(e,t,this._pp0,this._pp1,i)}_intersect(e,s,a,n,h){if(this.parameters.screenSizeEnabled){const p=e.attributes.get(VertexAttribute/* VertexAttribute */.r.OFFSET),l={applyToVertex:(e,a,n,o)=>{const c=(0,vec32.i)(ShadedColorMaterial_I,p.data[3*o],p.data[3*o+1],p.data[3*o+2]),h=(0,vec32.i)(ShadedColorMaterial_L,e,a,n);return (0,vec32.g)(c,c,this.parameters.screenSizeScale*(s.camera?.computeScreenPixelSizeAt(c)??1)),(0,vec32.f)(h,h,c),[h[0],h[1],h[2]]},applyToAabb:e=>{const t=(0,aaBoundingBox/* center */.gX)(e,ShadedColorMaterial_I);return (0,aaBoundingBox/* scale */.hs)(e,this.parameters.screenSizeScale*(s.camera?.computeScreenPixelSizeAt(t)??1))}};(0,RayIntersections/* intersectTriangleGeometry */.Uy)(e,s,a,n,l,h)}else (0,RayIntersections/* intersectTriangleGeometry */.Uy)(e,s,a,n,void 0,h)}createGLMaterial(e){return new ShadedColorMaterial_O(e)}createBufferWriter(){return new ShadedColorMaterial_P(this.parameters.screenSizeEnabled)}}class ShadedColorMaterial_O extends GLMaterial/* default */.A{beginSlot(e){return this.getTechnique(ShadedColorMaterialTechnique_h,e)}}class ShadedColorMaterial_M extends Material/* MaterialParameters */.qA{constructor(){super(...arguments),this.color=(0,vec4f64/* fromValues */.fA)(1,1,1,1),this.shadingTint=(0,vec4f64/* fromValues */.fA)(0,0,0,.25),this.shadingDirection=(0,vec32.n)((0,vec3f64/* create */.vt)(),[.5,-.5,-.5]),this.screenSizeScale=14,this.forceTransparentMode=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.screenSizeEnabled=!1,this.shadingEnabled=!0}get transparent(){return this.color[3]<1||this.forceTransparentMode}}class ShadedColorMaterial_P{constructor(e){this.screenSizeEnabled=e;const t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL);this.screenSizeEnabled&&t.vec3f(VertexAttribute/* VertexAttribute */.r.OFFSET),this.vertexBufferLayout=t}elementCount(e){return e.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length}write(e,t,r,i,s,a){const n=(0,bufferWriterUtils/* writeDefaultAttributes */.SA)(r,i,this.vertexBufferLayout,e,t,s,a);if(this.screenSizeEnabled){if(!r.has(VertexAttribute/* VertexAttribute */.r.OFFSET))throw new Error(`${VertexAttribute/* VertexAttribute */.r.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);{const e=r.get(VertexAttribute/* VertexAttribute */.r.OFFSET);(0,Util/* assert */.vA)(3===e.size);const i=s.getField(VertexAttribute/* VertexAttribute */.r.OFFSET,BufferView/* BufferViewVec3f */.xs);if(!i)throw new Error("unable to acquire view for "+VertexAttribute/* VertexAttribute */.r.OFFSET);(0,bufferWriterUtils/* writePosition */.Hk)(e,t,i,a)}}return n}}const ShadedColorMaterial_I=(0,vec3f64/* create */.vt)(),ShadedColorMaterial_L=(0,vec3f64/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/VerticesVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VerticesVisualElement_d extends Object3DVisualElement_c{constructor(e){super(e),this.view=null,this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=(0,vec4f64/* fromArray */.ci)([1,127/255,0,1]),this._size=11,this._outlineColor=(0,vec4f64/* fromArray */.ci)([0,0,0,.5]),this._outlineSize=1,this._elevationInfo=null,this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(e){this._vertices=e,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(e){this._spatialReference=e,this.recreateGeometry()}get color(){return this._color}set color(e){(0,vec42.a)(e,this._color)||((0,vec42.c)(this._color,e),this._updateMaterial())}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,vec42.a)(e,this._outlineColor)||((0,vec42.c)(this._outlineColor,e),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,screenSizeScale:this.size,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const t=this.vertices;if(null==t||0===t.length)return[];const r=.5,i=.5,s=point_o(t,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,ElevationContext/* ElevationContext */.F.fromElevationInfo(this.elevationInfo)),a=[],n=s.numVertices,c=s.position;for(let l=0;l<n;++l){const t=(0,vec32.i)(VerticesVisualElement_,c[3*l],c[3*l+1],c[3*l+2]),s=VerticesVisualElement_m(this._vertexMaterial,r,t),o=VerticesVisualElement_m(this._vertexOutlineMaterial,i,t);a.push({vertexGeometry:s,vertexOutlineGeometry:o})}return a}createGeometries(e){const t=this._createRenderGeometries();for(const{vertexGeometry:r,vertexOutlineGeometry:i}of t)e.addGeometry(r),e.addGeometry(i)}createExternalResources(){this._vertexMaterial=new ShadedColorMaterial_z({...this._vertexMaterialParameters,writeDepth:!0,cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new ShadedColorMaterial_z({...this._vertexOutlineMaterialParameters,forceTransparentMode:!0,writeDepth:!0,cullFace:basicInterfaces/* CullFaceOptions */.s2.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachMaterial(e){e(this._vertexMaterial),e(this._vertexOutlineMaterial)}}const VerticesVisualElement_=(0,vec3f64/* create */.vt)();function VerticesVisualElement_m(e,t,r){return (0,GeometryUtil/* createSphereGeometry */.CM)(e,t,16,16,{offset:r})}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/GraphicState.js
var GraphicState = __webpack_require__(74056);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/DrawGraphicTool.js + 15 modules
var DrawGraphicTool = __webpack_require__(11294);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/DrawOperation.js + 3 modules
var DrawOperation = __webpack_require__(96453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/drawSurfaces.js
var drawSurfaces = __webpack_require__(12019);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/tooltipCommonUtils.js + 26 modules
var tooltipCommonUtils = __webpack_require__(45565);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js
var trackingUtils = __webpack_require__(97996);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/draw/DrawGraphicTool3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawGraphicTool3D_z=class extends DrawGraphicTool/* DrawGraphicTool */.N{constructor(e){super(e),this._activeVertexVisualElement=null,this._createGraphicState=null,this._outlineVisualElement=null,this._verticesVisualElement=null,this._verticalLineVisualElement=null,this._settings=new settings_j({getTheme:()=>this.view.effectiveTheme}),this.geometryType=null,this.type="draw-3d"}initialize(){const{mode:e,offset:t,unit:i}=this.elevationInfo;this.internalGraphicsLayer.elevationInfo=new ElevationInfo/* default */.A({mode:e,offset:t,unit:i})}normalizeCtorArgs(e){if(!e.elevationInfo){const t=e.hasZ??!0;return{...e,elevationInfo:(0,elevationInfoUtils/* getEffectiveElevationInfo */.bK)(t)}}return e}initializeGraphic(e){const{view:t}=this,s=this._createGraphicState=new GraphicState/* GraphicState */.y({graphic:e});return (0,handleUtils/* handlesGroup */.vE)([t.maskOccludee(e),t.trackGraphicState(s),(0,reactiveUtils/* watch */.wB)((()=>({element:this._outlineVisualElement,isDraped:s.isDraped})),(({element:e,isDraped:t})=>{e&&(e.isDraped=t)}),reactiveUtils/* syncAndInitial */.pc),(0,trackingUtils/* autorun */.fm)((()=>{(0,tooltipCommonUtils/* updateMeshTransformFromTooltipInfo */.IA)(this.tooltipInfos.mesh,this.geometryToPlace)})),this._setupLoadingIndicator(s),...meshFastUpdateUtils_a(s)])}makeDrawOperation(){const{geometryType:e}=this,t="circle"!==e&&"rectangle"!==e;return new DrawOperation/* DrawOperation */.O0({view:this.view,manipulators:this.manipulators,geometryType:(0,DrawGraphicTool/* geometryTypeToDrawOperationGeometryType */.l)(e),drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,drawSurface:new drawSurfaces/* SceneDrawSurface */.IX(this.view,this.elevationInfo,[this.internalGraphicsLayer]),elevationDrawSurface:new drawSurfaces/* ElevationDrawSurface */.rT(this.elevationInfo,this.defaultZ,this.view,this.internalGraphicsLayer),hasM:!1,elevationInfo:this.elevationInfo,snappingManager:this.snappingManager,snappingVisualizer:new SnappingVisualizer3D_R,segmentLabels:t?new SegmentLabels3D_a:null,labelOptions:this.sketchOptions.labels,isDraped:this._createGraphicState?this._createGraphicState.isDraped:"on-the-ground"===(0,elevationInfoUtils/* getEffectiveElevationMode */.wF)(this.hasZ,this.elevationInfo),cursor:this.cursor,constraintsEnabled:!0,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils})}onActiveVertexChanged(e){const{view:n}=this;if(this._activeVertexVisualElement)return this._activeVertexVisualElement.vertices=[e],this._activeVertexVisualElement.recreate(),this._updateVerticalLineVisualElement(e),(0,handleUtils/* makeHandle */.hA)();const l=this._settings,c=l.manipulators.vertex,m=new VerticesVisualElement_d({view:n,spatialReference:n.spatialReference,vertices:[e],elevationInfo:this.internalGraphicsLayer.elevationInfo,size:c.size,outlineSize:c.outlineSize,renderOccluded:c.renderOccluded,attached:!1,isDecoration:!0});this._activeVertexVisualElement=m;const p=l.visualElements.zVerticalLine,h=new ExtendedLineVisualElement_G({view:n,extensionType:p.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0});this._verticalLineVisualElement=h;const u=(0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)((()=>l.visualElements.zVerticalLine),(e=>e.apply(h)),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>({selectedColor:(0,colorUtils/* unitRGBAFromColor */.QP)(l.colors.selected),outlineColor:(0,colorUtils/* unitRGBAFromColor */.QP)(l.manipulators.vertex.outlineColor)})),(({selectedColor:e,outlineColor:t})=>{m.color=e,m.outlineColor=t}),reactiveUtils/* initial */.Vh),(0,handleUtils/* makeHandle */.hA)((()=>{this._activeVertexVisualElement=(0,maybe/* destroyMaybe */.pR)(this._activeVertexVisualElement),this._verticalLineVisualElement=(0,maybe/* destroyMaybe */.pR)(this._verticalLineVisualElement)}))]);return m.attached=!0,this._updateVerticalLineVisualElement(e),u}_updateVerticalLineVisualElement(e){const t=this._verticalLineVisualElement;if(!t)return;const{renderCoordsHelper:i,elevationProvider:s}=this.view;(0,vec32.i)(DrawGraphicTool3D_A,e[0],e[1],e[2]),DrawGraphicTool3D_U.setFromElevationInfo(this.elevationInfo),DrawGraphicTool3D_A[2]=(0,elevationAlignmentUtils/* evaluateElevationAlignmentAtPoint */.nG)(DrawGraphicTool3D_A,s,DrawGraphicTool3D_U,i);i.toRenderCoords(DrawGraphicTool3D_A,this.view.spatialReference,DrawGraphicTool3D_A)?(t.setStartEndFromWorldDownAtLocation(DrawGraphicTool3D_A),t.attached=!0):t.attached=!1}onOutlineChanged(e){if(this._outlineVisualElement)return this._outlineVisualElement.geometry=e,(0,handleUtils/* makeHandle */.hA)();const t=this.internalGraphicsLayer.elevationInfo,{view:n}=this,l=this._settings,c=new OutlineVisualElement_j({view:n,geometry:e,elevationInfo:t,isDraped:this._createGraphicState?this._createGraphicState.isDraped:"on-the-ground"===(0,elevationInfoUtils/* getEffectiveElevationMode */.wF)(this.hasZ,t),attached:!1,isDecoration:!0});this._outlineVisualElement=c;const m=(0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)((()=>l.visualElements.lineObjects.outline),(e=>e.apply(c)),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>l.visualElements.lineObjects.shadowStyle),(e=>e.apply(c)),reactiveUtils/* initial */.Vh),(0,handleUtils/* makeHandle */.hA)((()=>{this._outlineVisualElement=(0,maybe/* destroyMaybe */.pR)(this._outlineVisualElement)}))]);return c.attached=!0,c.laserlineEnabled=!0,m}onRegularVerticesChanged(e){if(this._verticesVisualElement)return this._verticesVisualElement.vertices=e,(0,handleUtils/* makeHandle */.hA)();const{view:n}=this,l=this._settings,c=l.manipulators.vertex,m=new VerticesVisualElement_d({view:n,spatialReference:n.spatialReference,vertices:e,elevationInfo:this.internalGraphicsLayer.elevationInfo,size:c.size,outlineSize:c.outlineSize,renderOccluded:c.renderOccluded,attached:!1,isDecoration:!0}),p=(0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)((()=>({color:(0,colorUtils/* unitRGBAFromColor */.QP)(l.manipulators.vertex.color),outlineColor:(0,colorUtils/* unitRGBAFromColor */.QP)(l.manipulators.vertex.outlineColor)})),(({color:e,outlineColor:t})=>{m.color=e,m.outlineColor=t}),reactiveUtils/* initial */.Vh),(0,handleUtils/* makeHandle */.hA)((()=>{this._verticesVisualElement=(0,maybe/* destroyMaybe */.pR)(this._verticesVisualElement)}))]);return m.attached=!0,this._verticesVisualElement=m,p}updateGraphicGeometry(e){if("mesh"!==this.geometryType||"point"!==e?.type)super.updateGraphicGeometry(e);else{const t=this.geometryToPlace;t?.centerAt(e),(0,tooltipCommonUtils/* updateMeshTransformFromTooltipInfo */.IA)(this.tooltipInfos.mesh,t);const i=this._graphic;t&&i.geometry===t||(i.geometry=t)}}_setupLoadingIndicator(e){const{drawOperation:t}=this;if(!this.geometryToPlace)return t.loading=!1,null;t.loading=!0;const r=(0,handleUtils/* makeHandle */.hA)((()=>{t.loading=!1}));let o;const a=()=>o&&cancelAnimationFrame(o);return (0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* when */.z7)((()=>e.displaying),(()=>{a(),o=requestAnimationFrame((()=>r.remove()))}),{...reactiveUtils/* syncAndInitial */.pc,once:!0}),(0,handleUtils/* makeHandle */.hA)(a),r])}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool3D_z.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool3D_z.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool3D_z.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool3D_z.prototype,"view",void 0),DrawGraphicTool3D_z=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.draw.DrawGraphicTool3D")],DrawGraphicTool3D_z);const DrawGraphicTool3D_U=new ElevationContext/* ElevationContext */.F,DrawGraphicTool3D_A=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityUtils.js
var quantityUtils = __webpack_require__(73569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js
var Point = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/common.js
var common = __webpack_require__(65257);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/geometryUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function geometryUtils_n(o){const n=geometryUtils_r(o);return (0,vec2f64/* fromValues */.fA)(Math.cos(n),Math.sin(n))}function geometryUtils_r(t){if(null==t||"polyline"!==t.type&&"polygon"!==t.type)return 0;const n="polyline"===t.type?t.paths:t.rings,r=(0,common/* getEpsilon */.FD)();for(const o of n)for(let t=0;t<o.length-1;t++){const n=o[t],e=o[t+1],i=n[0]-e[0],l=n[1]-e[1];if(i*i+l*l>r)return Math.atan2(e[1]-n[1],e[0]-n[0])}return 0}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/interactive/editingTools/isSupportedObjectUtils.js
var isSupportedObjectUtils = __webpack_require__(58225);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatedObjectUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function manipulatedObjectUtils_t(t){return t?.operations?.data.geometry}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulatorUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function manipulatorUtils_o(e,n){return manipulatorUtils_t(e?.data.coordinateHelper.hasZ(),n)}function manipulatorUtils_t(e,o){return!!e&&"on-the-ground"!==o.mode&&!(0,elevationInfoUtils/* hasFeatureExpressionInfo */.v9)(o)}function manipulatorUtils_r(n,o){let t=null;const r=n.events.on("grab-changed",(e=>{null!=t&&(t.remove(),t=null),"start"===e.action?(t=n.disableDisplay(),o&&o(e)):o&&o(e)}));return e((()=>{t?.remove(),r.remove()}))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/interfaces.js
var editGeometry_interfaces = __webpack_require__(35880);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/euclideanLengthMeasurementUtils.js
var euclideanLengthMeasurementUtils = __webpack_require__(91199);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/tooltipUtils3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function tooltipUtils3D_m(o,e,s){function l(){const t=s(),o=t.sketchOptions.tooltips.effectiveEnabled?t.activeTooltipInfo:null;return{...t,activeTooltipInfo:o}}let p=!1;function u(t){p||(p=!0,t(),p=!1)}function f({activeTooltipInfo:t,sketchOptions:i,scaleRotateTransform:n}){u((()=>{t&&(t.sketchOptions=i,tooltipUtils3D_h(t,e),tooltipUtils3D_k(t,n)),o.info=t}))}return (0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)(l,f,reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>{const t=l(),{activeTooltipInfo:o}=t;if(o)return{context:t,activeTooltipInfo:o,key:o.key,geometry:manipulatedObjectUtils_t(e)}}),((t,o)=>{t&&o&&o.key!==t.key&&u((()=>tooltipUtils3D_v(e,t.context)))}),reactiveUtils/* sync */.OH),e.on("committed",(()=>{queueMicrotask((()=>f(l())))})),(0,tooltipCommonUtils/* connectPasteEvent */.sZ)(o,{onBeforePaste:()=>{p=!0},onAfterPaste:()=>{tooltipUtils3D_v(e,l()),p=!1}})])}function tooltipUtils3D_v(t,{activeTooltipInfo:o,callbacks:e}){if(!o)return;e.onBeforeUpdate();const i=manipulatedObjectUtils_t(t);switch(i?.type){case"mesh":tooltipUtils3D_d(o,i.origin,t,e),"orientation"in o&&"scale"in o&&(0,tooltipCommonUtils/* updateMeshTransformFromTooltipInfo */.IA)(o,i,e);break;case"point":tooltipUtils3D_d(o,i,t,e)}}function tooltipUtils3D_d(t,o,e,i){const{dx:n,dy:r,dz:a}=(0,tooltipCommonUtils/* getXYZDeltasFromTooltipInfo */.mu)(t,o);0===n&&0===r&&0===a||(i.onMoveStart(),e.operations?.move(n,r,a,editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP),i.onMove(n,r,a),i.onMoveStop())}function tooltipUtils3D_h(t,o){const e=manipulatedObjectUtils_t(o),i=e?.type;if(!t||!e||"mesh"!==i&&"point"!==i)return;const n="mesh"===i,r=n?e.origin:e;t.setLocationFromPoint(r),tooltipUtils3D_y(t,r,o),"transform-mesh"===t.type&&n&&(0,tooltipCommonUtils/* updateTooltipInfoFromMeshTransform */.Ue)(t,e),t.clearInputValues()}function tooltipUtils3D_y(t,o,e){t.elevation.actual=(0,euclideanLengthMeasurementUtils/* elevationFromPoint */.Of)(o),t.elevation.visible=!!e.operations?.data.coordinateHelper.hasZ(),t.elevation.readOnly=!1,t.elevation.showAsZ=!0}function tooltipUtils3D_k(t,i){if("transform-point"!==t?.type)return;if(!i)return t.orientation.actual=void 0,t.size.actual=void 0,t.orientation.visible=!1,void(t.size.visible=!1);const n=i.mode,{size:r,orientationClockwise:a}=i.adapter,{visualVariables:s}=t.sketchOptions.tooltips,c=s?.rotation,l=null!=a&&(null==n||"rotate"===n),p="geographic";t.orientation.actual=l?(0,quantityUtils/* createAngle */.Wq)(a,"radians",p):void 0,t.orientation.precision=tooltipUtils3D_b(c?.valueType),t.orientation.visible=l;const u=s?.size,f=null!=r&&(null==n||"scale"===n);t.size.actual=f?(0,quantityUtils/* createLength */.d_)(r,u?.unit??"meters"):void 0,t.size.precision=tooltipUtils3D_b(u?.valueType),t.size.visible=f}function tooltipUtils3D_b(t){switch(t){case"integer":case"long":return 0;default:return null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/signal.js
var signal = __webpack_require__(40315);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js
var mat3f64 = __webpack_require__(78607);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/ellipsoidUtils.js
var ellipsoidUtils = __webpack_require__(47936);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projectionUtils.js + 2 modules
var projectionUtils = __webpack_require__(68490);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/localRotationUtils.js
var localRotationUtils = __webpack_require__(90328);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectors.js
var projectors = __webpack_require__(12943);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js
var hydratedFeatures = __webpack_require__(85174);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/ElevationProvider.js
var ElevationProvider = __webpack_require__(27054);
;// ../node_modules/@arcgis/core/views/3d/support/geometryUtils/ray.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ray_m(r,n,o=(0,ray/* create */.vt)()){return ray_g(r,(0,screenUtils/* screenPointObjectToArray */.WA)(n),o),(0,vec32.n)(o.direction,o.direction),o}function ray_g(e,n,t){return ray_l(e,e.screenToRender(n,(0,screenUtils/* castRenderScreenPointArray3 */.sc)(vectorStacks/* sv3d */.rq.get())),t)}function ray_l(e,t,i){const c=(0,screenUtils/* castRenderScreenPointArray3 */.sc)((0,vec2/* copy */.C)(vectorStacks/* sv3d */.rq.get(),t));if(c[2]=0,!e.unprojectFromRenderScreen(c,i.origin))return null;const s=(0,screenUtils/* castRenderScreenPointArray3 */.sc)((0,vec2/* copy */.C)(vectorStacks/* sv3d */.rq.get(),t));s[2]=1;const m=e.unprojectFromRenderScreen(s,vectorStacks/* sv3d */.rq.get());return null==m?null:((0,vec32.d)(i.direction,m,i.origin),i)}function ray_p(e,n,t){return ray_f(e,e.screenToRender(n,r(u.get())),t)}function ray_f(r,e,n){i(n.origin,r.eye);const t=c(u.get(),e[0],e[1],1),s=r.unprojectFromRenderScreen(t,u.get());return null==s?null:(o(n.direction,s,n.origin),n)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js + 3 modules
var RenderCamera = __webpack_require__(99369);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/interfaces.js
var interactive_interfaces = __webpack_require__(27877);
;// ../node_modules/@arcgis/core/views/3d/interactive/Manipulator3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ee{constructor(e){this.metadata=void 0,this._camera=new RenderCamera/* default */.A,this._elevation={offset:0,override:null},this.collisionType={type:"point"},this.collisionPriority=0,this._renderObjects=new Array,this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=(0,mat4f64/* create */.vt)(),this._worldFrame=null,this._renderLocation=(0,vec3f64/* create */.vt)(),this._renderLocationDirty=!0,this._location=new Point/* default */.A({x:0,y:0,z:0}),this._elevationAlignedLocation=new Point/* default */.A,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.consumesClicks=!0,this.cursor=null,this.grabCursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.None,this._focused=!1,this.events=new Evented/* default */.A.EventEmitter,this._screenLocation={screenPointArray:(0,screenUtils/* createScreenPointArray */.gs)(),renderScreenPointArray:(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),pixelSize:0},this._screenLocationDirty=!0,this._engineResourcesAddedToStage=!1,this._attached=!1,this._location.spatialReference=e.view.spatialReference,Object.assign(this,e);const i=this.view.state?.camera;i&&this._camera.copyFrom(i)}destroy(){this._applyObjectTransform=pe,this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this._camera=null}get _stage(){return this.view?.stage}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(e){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=e.slice(),this._updateEngineObject()}set available(e){e!==this._available&&(this._available=e,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),(0,handleUtils/* makeHandle */.hA)((()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()}))}set radius(e){e!==this._radius&&(this._radius=e,this._updateEngineObject())}get radius(){return this._radius}set worldSized(e){e!==this._worldSized&&(this._worldSized=e,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(e){te(e)&&(this._screenLocationDirty=!0),(0,mat4/* copy */.C)(this._modelTransform,e),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=(0,mat4f64/* create */.vt)()),ie(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(e){this.view.renderCoordsHelper.fromRenderCoords(e,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(e){(0,hydratedFeatures/* clonePoint */.EL)(e,this._location),this._notifyLocationChanged()}_notifyLocationChanged(){this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit("location-update",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(e){(0,hydratedFeatures/* clonePoint */.EL)(e,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit("location-update",{location:this._location})}_updateElevationAlignedLocation(){const e=null!=this._elevation.override?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y,this._elevationAlignedLocation.z=e+this._elevation.offset,this._elevationAlignedLocation.spatialReference=(0,hydratedFeatures/* hydratedSpatialReference */.RS)(this.location.spatialReference),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(e){e!==this._grabbing&&(this._grabbing=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(e){e!==this._hovering&&(this._hovering=e,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(e){e!==this._selected&&(this._selected=e,this._updateEngineObject(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}get state(){return this._state}set state(e){e!==this._state&&(this._state=e,this._updateEngineObject())}updateStateEnabled(e,t){t?this.state|=e:this.state&=~e}_setFocused(e){e!==this._focused&&(this._focused=e,this.events.emit("focus-changed",{action:!0===e?"focus":"unfocus"}))}get focused(){return this._focused}get screenLocation(){return this._ensureScreenLocation(),this._screenLocation}_ensureScreenLocation(){if(!this._screenLocationDirty)return;this._screenLocation.pixelSize=this._camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1;let e;if(te(this._modelTransform)){const t=this._calculateModelTransformOffset(me);e=(0,vec32.f)(t,t,this.renderLocation)}else e=this.renderLocation;this._camera.projectToRenderScreen(e,this._screenLocation.renderScreenPointArray),this._camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(e){this._applyObjectTransform=e,this._screenLocationDirty=!0,this._updateEngineObject()}get attached(){return this._attached}intersectionDistance(t,i){if(!this.available)return null;const s=(0,screenUtils/* screenPointObjectToArray */.WA)(t,se),o=this._getCollisionRadius(i),r=-1*this.collisionPriority;switch(this.collisionType.type){case"point":if((0,vec2/* squaredDistance */.hG)(this.screenLocation.screenPointArray,s)<o*o)return this.screenLocation.renderScreenPointArray[2]+r;break;case"line":{const e=this.collisionType.paths,t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ce),n=o*this.screenLocation.pixelSize,a=ray_g(this._camera,s,re);if(null==a)return null;for(const s of e){if(0===s.length)continue;const e=(0,vec32.t)(he,s[0],i);for(let t=1;t<s.length;t++){const o=(0,vec32.t)(de,s[t],i),l=(0,lineSegment/* closestRayDistance2 */.dz)((0,lineSegment/* fromPoints */.Cr)(e,o,oe),a);if(null!=l&&l<n*n){const t=(0,vec32.f)(vectorStacks/* sv3d */.rq.get(),e,o);(0,vec32.g)(t,t,.5);const i=(0,screenUtils/* castRenderScreenPointArray */.rX)(vectorStacks/* sv3d */.rq.get());return this._camera.projectToRenderScreen(t,i),i[2]+r}(0,vec32.c)(e,o)}}break}case"disc":{const e=this.collisionType.direction,t=this.collisionType.offset??vec3f64/* ZEROS */.uY,i=this._getWorldToScreenObjectScale(),n=this._calculateObjectTransform(i,ce),a=o*this.screenLocation.pixelSize,c=ray_g(this._camera,s,re);if(null==c)return null;const h=(0,mat3/* fromMat4 */.z0)(ne,n),d=(0,vec32.o)(ue,e,h),_=(0,vec32.t)(ge,t,n);(0,plane/* fromPositionAndNormal */.O_)(_,d,le);const u=_e;if((0,plane/* intersectRay */.Ui)(le,c,u)&&(0,vec32.s)(u,_)<a*a)return this.screenLocation.renderScreenPointArray[2]+r;break}case"ribbon":{const{paths:e,direction:t}=this.collisionType,i=this._getWorldToScreenObjectScale(),n=this._calculateObjectTransform(i,ce),a=o*this._camera.computeScreenPixelSizeAt(this.renderLocation),h=ray_g(this._camera,s,re);if(null==h)return null;const d=(0,mat3/* fromMat4 */.z0)(ne,n),_=(0,vec32.o)(ue,t,d),u=this._calculateModelTransformPosition(ge);(0,plane/* fromPositionAndNormal */.O_)(u,_,le);const g=_e;if(!(0,plane/* intersectRay */.Ui)(le,h,g))break;for(const s of e){if(0===s.length)continue;const e=(0,vec32.t)(he,s[0],n);for(let t=1;t<s.length;t++){const i=(0,vec32.t)(de,s[t],n),o=(0,lineSegment/* distance2 */.kb)((0,lineSegment/* fromPoints */.Cr)(e,i,oe),g);if(null!=o&&o<a*a){const t=(0,vec32.f)(vectorStacks/* sv3d */.rq.get(),e,i);(0,vec32.g)(t,t,.5);const s=(0,screenUtils/* castRenderScreenPointArray */.rX)(vectorStacks/* sv3d */.rq.get());return this._camera.projectToRenderScreen(t,s),s[2]+r}(0,vec32.c)(e,i)}}break}default:(0,compilerUtils/* neverReached */.Xb)(this.collisionType)}return null}attach(e={manipulator3D:{}}){const t=this._stage;if(!t)return;const i=e.manipulator3D;null==i.engineLayerId?(this._engineLayer=new WebGLLayer/* WebGLLayer */.x(t,{pickable:!1,updatePolicy:UpdatePolicy/* UpdatePolicy */.q.SYNC}),i.engineLayerId=this._engineLayer.id):t?.getLayer&&(this._engineLayer=t.getLayer(i.engineLayerId)),i.engineLayerReferences=(i.engineLayerReferences||0)+1,this._camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),(0,projectionUtils.canProjectWithoutEngine)(this._location.spatialReference,this.view.spatialReference)||(this.location=new Point/* default */.A({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(e={manipulator3D:{}}){const t=e.manipulator3D;t.engineLayerReferences--;const i=0===t.engineLayerReferences;this._removeResourcesFromStage(),i&&(t.engineLayerId=null,(0,maybe/* destroyMaybe */.pR)(this._engineLayer)),this._engineResources=null,this._engineLayer=null,this._attached=!1}onViewChange(){this._camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(e){(0,projectionUtils.projectPoint)(this.location,fe,e.spatialReference)&&(0,aaBoundingRect/* containsPointObject */.vR)(e.extent,fe)&&this._notifyLocationChanged()}_evaluateElevationAlignment(){if(null==this.elevationInfo)return;let e=null,t=0;const i=(0,elevationInfoUtils/* getElevationOffset */.Ze)(this.elevationInfo,this.location.spatialReference??this.view.elevationProvider.spatialReference);switch(this.elevationInfo.mode){case"on-the-ground":e=(0,ElevationProvider/* getElevationAtPoint */.R1)(this.view.elevationProvider,this.location,"ground")??0;break;case"relative-to-ground":t=((0,ElevationProvider/* getElevationAtPoint */.R1)(this.view.elevationProvider,this.location,"ground")??0)+i;break;case"relative-to-scene":t=((0,ElevationProvider/* getElevationAtPoint */.R1)(this.view.elevationProvider,this.location,"scene")??0)+i;break;case"absolute-height":t=i}return t!==this._elevation.offset||e!==this._elevation.override?(this._elevation.offset=t,void(this._elevation.override=e)):void 0}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const e=this._getWorldToScreenObjectScale(),t=ce;if(!0===this.autoScaleRenderObjects){const i=this._getFocusedSize(this._radius,this.focused)*e;this._calculateObjectTransform(i,t)}else this._calculateObjectTransform(e,t);const{objectsByState:i}=this._ensureEngineResources(),s=(this.focused?interactive_interfaces/* ManipulatorStateFlags */.p7.Focused:interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused)|(this.selected?interactive_interfaces/* ManipulatorStateFlags */.p7.Selected:interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),o=this._noDisplayCount>0;for(const{stateMask:r,objects:n}of i){if(o){for(const e of n)e.visible=!1;continue}const e=(r&interactive_interfaces/* ManipulatorStateFlags */.p7.All)!==interactive_interfaces/* ManipulatorStateFlags */.p7.None,i=(r&interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.All)!==interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.None,a=!e||(s&r)===(r&interactive_interfaces/* ManipulatorStateFlags */.p7.All),c=!i||(this.state&r)===(r&interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.All);if(a&&c)for(const s of n)s.visible=!0,s.transformation=t;else for(const t of n)t.visible=!1}}_ensureEngineResources(){if(null==this._engineResources){const e=this._engineLayer,t=[],i=new Set;this.renderObjects.forEach((({geometry:{material:e}})=>{i.has(e)||(t.push(e),i.add(e))}));const s=new Map;this._renderObjects.forEach((e=>{const t=new Object3D/* Object3D */.B({castShadow:!1,geometries:[e.geometry]}),i=s.get(e.stateMask)||[];i.push(t),s.set(e.stateMask,i)}));const o=[];s.forEach(((e,t)=>o.push({stateMask:t,objects:e}))),this._engineResources={objectsByState:o,layer:e,materials:t}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){const e=this._stage;if(this._engineResourcesAddedToStage||null==this._engineResources||!e)return;const{objectsByState:t,layer:i}=this._engineResources;t.forEach((({objects:e})=>i.addMany(e))),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(){const e=this._stage;if(!this._engineResourcesAddedToStage||null==this._engineResources||!e)return;const{objectsByState:t,layer:i}=this._engineResources;t.forEach((({objects:e})=>i.removeMany(e))),this._engineResourcesAddedToStage=!1}_getCollisionRadius(e){return this._getFocusedSize(this.radius,!0)*("touch"===e?this.touchMultiplier:1)}_getFocusedSize(e,t){return e*(t?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(e){const t=this._getWorldToScreenObjectScale(),i=this._calculateObjectTransform(t,ae);return (0,vec32.i)(e,i[12],i[13],i[14])}_calculateModelTransformOffset(e){const t=this._calculateModelTransformPosition(e);return (0,vec32.d)(e,t,this.renderLocation)}_calculateObjectTransform(e,t){return (0,mat4/* set */.hZ)(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1),this._worldFrame&&(0,mat4/* multiply */.lw)(t,t,this._worldFrame),(0,mat4/* multiply */.lw)(t,t,this._modelTransform),t[12]+=this.renderLocation[0],t[13]+=this.renderLocation[1],t[14]+=this.renderLocation[2],t[15]=1,null!=this._applyObjectTransform&&this._applyObjectTransform(t),t}get test(){}}function te(e){return 0!==e[12]||0!==e[13]||0!==e[14]}function ie(e,t,i){switch(e.viewingMode){case"local":return (0,mat4/* identity */.D_)(i),!0;case"global":{const o=(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(e.renderCoordsHelper.spatialReference);return (0,projectors/* sphericalPCPFtoLonLatElevation */.n4)(t,0,he,0,o.radius),(0,localRotationUtils/* computeENUToPCPFLocalRotation */.z)((0,mathUtils/* deg2rad */.kU)(he[0]),(0,mathUtils/* deg2rad */.kU)(he[1]),i),!0}}}const se=(0,screenUtils/* createScreenPointArray */.gs)(),oe=(0,lineSegment/* create */.vt)(),re=(0,ray/* create */.vt)(),ne=(0,mat3f64/* create */.vt)(),ae=(0,mat4f64/* create */.vt)(),ce=(0,mat4f64/* create */.vt)(),le=(0,plane/* create */.vt)(),he=(0,vec3f64/* create */.vt)(),de=(0,vec3f64/* create */.vt)(),_e=(0,vec3f64/* create */.vt)(),ue=(0,vec3f64/* create */.vt)(),ge=(0,vec3f64/* create */.vt)(),me=(0,vec3f64/* create */.vt)(),fe=new Point/* default */.A({x:0,y:0,z:0,spatialReference:null}),pe=()=>{};

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/GrabbingState.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var GrabbingState_N;!function(N){N[N.NONE=0]="NONE",N[N.ANY=1]="ANY",N[N.Z=2]="Z",N[N.XY=4]="XY"}(GrabbingState_N||(GrabbingState_N={}));

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorType.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var ManipulatorType_A;!function(A){A[A.TRANSLATE_Z=0]="TRANSLATE_Z",A[A.TRANSLATE_XY=1]="TRANSLATE_XY",A[A.SCALE=2]="SCALE",A[A.ROTATE=3]="ROTATE",A[A.SCALE_ROTATE=4]="SCALE_ROTATE"}(ManipulatorType_A||(ManipulatorType_A={}));

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatorState.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ManipulatorState_a{constructor(){this.grabbingState=GrabbingState_N.NONE,this.zManipulator=null,this.firstSelected=null,this.numSelected=0,this.firstGrabbedXY=null}update(a){this.grabbingState=GrabbingState_N.NONE,this.zManipulator=null,this.numSelected=0,this.firstSelected=null,this.firstGrabbedXY=null,a.forEachManipulator(((a,s)=>{if(s===ManipulatorType_A.TRANSLATE_Z&&(this.zManipulator=a),a instanceof ee&&(a.selected&&(0===this.numSelected&&(this.firstSelected=a),this.numSelected++),null==this.firstGrabbedXY&&a.grabbing&&s===ManipulatorType_A.TRANSLATE_XY&&(this.firstGrabbedXY=a)),a.grabbing)switch(this.grabbingState|=GrabbingState_N.ANY,s){case ManipulatorType_A.TRANSLATE_Z:this.grabbingState|=GrabbingState_N.Z;break;case ManipulatorType_A.TRANSLATE_XY:this.grabbingState|=GrabbingState_N.XY}}))}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/lineObjectVisualElementUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function lineObjectVisualElementUtils_y(t){const{object:n}=t,a=lineObjectVisualElementUtils_S(t),l=[a,lineObjectVisualElementUtils_M(t,a.visualElement)];return n.maskOccludee&&l.push(n.maskOccludee()),{visualElement:a.visualElement,remove:()=>(0,handleUtils/* removeHandles */.a0)(l)}}function lineObjectVisualElementUtils_S(e){const{view:a,object:l}=e,s=manipulatedObjectUtils_t(l),r=new OutlineVisualElement_j({view:a,geometry:lineObjectVisualElementUtils_D(s)?s:null,elevationInfo:l.elevationInfo,attached:!1,isDecoration:!0}),c=new settings_j({getTheme:()=>a.effectiveTheme}),m=()=>{r.attached=l.visible},u=(0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)((()=>c.visualElements.lineObjects.outline),(e=>e.apply(r)),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>c.visualElements.lineObjects.shadowStyle),(e=>e.apply(r)),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>l.visible),m),(0,reactiveUtils/* watch */.wB)((()=>l.isDraped),(e=>{r.isDraped=e}),reactiveUtils/* initial */.Vh),l.on("committed",(()=>{const e=manipulatedObjectUtils_t(l);r.geometry=lineObjectVisualElementUtils_D(e)?e:null})),(0,handleUtils/* destroyHandle */.DQ)(r)]);return m(),{visualElement:r,remove:()=>u.remove()}}function lineObjectVisualElementUtils_M(r,c){const{object:m,view:u}=r,p=[],v=m.elevationInfo,j="on-the-ground"===v.mode||!v.offset&&"absolute-height"!==v.mode,y=new ManipulatorState_a,S=new settings_j({getTheme:()=>u.effectiveTheme}),M=S.visualElements,L=new ExtendedLineVisualElement_G({view:u,extensionType:M.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0}),A=(0,mathUtils/* deg2rad */.kU)(M.heightPlaneAngleCutoff),x=new LaserlineVisualElement_c({view:u,attached:!1,angleCutoff:A,isDecoration:!0}),C=(0,signal/* signal */.v)(1);p.push((0,reactiveUtils/* watch */.wB)((()=>({lineShadowStyle:S.visualElements.lineObjects.shadowStyle,pointShadowStyle:S.visualElements.pointObjects.shadowStyle,alpha:C.value})),(({lineShadowStyle:e,pointShadowStyle:t,alpha:n})=>{e.apply(c,n),t.apply(L,n)}),reactiveUtils/* initial */.Vh));const V=(0,signal/* signal */.v)(1);p.push((0,reactiveUtils/* watch */.wB)((()=>({heightPlane:S.visualElements.heightPlane,alpha:V.value})),(({heightPlane:e,alpha:t})=>e.apply(x,t)),reactiveUtils/* initial */.Vh));const P=()=>{y.update(r);const e=manipulatedObjectUtils_t(m);if(!m.visible||j&&(m.isDraped||!lineObjectVisualElementUtils_D(e)||!e.hasZ))return c.laserlineEnabled=!1,L.attached=!1,void(x.attached=!1);c.laserlineEnabled=!0;const t=y.grabbingState&GrabbingState_N.XY?M.laserlineAlphaMultiplier:1;C.value=t;const n=y.grabbingState&GrabbingState_N.Z?M.laserlineAlphaMultiplier:1;V.value=n,lineObjectVisualElementUtils_T(L,y),lineObjectVisualElementUtils_O(r,c,x,y)};p.push((0,reactiveUtils/* watch */.wB)((()=>S.visualElements.zVerticalLine),(e=>e.apply(L)),reactiveUtils/* initial */.Vh)),p.push(m.on("committed",P),(0,reactiveUtils/* watch */.wB)((()=>m.visible),P),c.events.on("attachment-origin-changed",P),(0,handleUtils/* destroyHandle */.DQ)(L),(0,handleUtils/* destroyHandle */.DQ)(x));const U=[],X=()=>{(0,handleUtils/* removeHandles */.a0)(U),U.length=0,r.forEachManipulator((e=>U.push(e.events.on("grab-changed",P)))),r.forEachManipulator((e=>U.push(e.events.on("select-changed",P)))),P()};return X(),p.push(r.onManipulatorsChanged(X),(0,handleUtils/* refHandle */.a2)((()=>(0,handleUtils/* handlesGroup */.vE)(U)))),(0,handleUtils/* handlesGroup */.vE)(p)}function lineObjectVisualElementUtils_T(e,t){const n=1===t.numSelected?t.firstSelected:t.numSelected>1&&null!=t.firstGrabbedXY?t.firstGrabbedXY:null;null!=n?(e.setStartEndFromWorldDownAtLocation(n.renderLocation),e.attached=!0):e.attached=!1}function lineObjectVisualElementUtils_O(e,t,n,a){if(a.numSelected>0){(0,vec32.i)(lineObjectVisualElementUtils_L,0,0,0);let t=0;e.forEachManipulator(((e,n)=>{n===ManipulatorType_A.TRANSLATE_XY&&e.selected&&e instanceof ee&&((0,vec32.f)(lineObjectVisualElementUtils_L,lineObjectVisualElementUtils_L,e.renderLocation),t++)})),t>0?(n.heightManifoldTarget=(0,vec32.g)(lineObjectVisualElementUtils_L,lineObjectVisualElementUtils_L,1/t),n.attached=!0):n.attached=!1}else{const a=t.attachmentOrigin;null!=a&&e.view.renderCoordsHelper.toRenderCoords(a,lineObjectVisualElementUtils_L)?(n.heightManifoldTarget=lineObjectVisualElementUtils_L,n.attached=!0):n.attached=!1}}function lineObjectVisualElementUtils_D(e){return null!=e&&("polygon"===e.type||"polyline"===e.type)}const lineObjectVisualElementUtils_L=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectPointToVector.js
var projectPointToVector = __webpack_require__(42609);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/originGeometryVisualElementUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function originGeometryVisualElementUtils_P(t){const o=[],n=originGeometryVisualElementUtils_S(t,o);return originGeometryVisualElementUtils_I(t,o,n),{visualElement:n,remove:()=>(0,handleUtils/* removeHandles */.a0)(o)}}function originGeometryVisualElementUtils_I(e,o,s){const{view:c,object:u}=e,h=new settings_j({getTheme:()=>c.effectiveTheme}),E=new ExtendedLineVisualElement_G({view:c,extensionType:h.visualElements.zVerticalLine.extensionType,innerWidth:1,attached:!1,writeDepthEnabled:!1,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0});o.push((0,reactiveUtils/* watch */.wB)((()=>h.visualElements.zVerticalLine),(e=>e.apply(E)),reactiveUtils/* initial */.Vh));const P=new LaserlineVisualElement_c({view:c,intersectsLineInfinite:!0,attached:!1,isDecoration:!0}),I=(0,mathUtils/* deg2rad */.kU)(h.visualElements.heightPlaneAngleCutoff),S=new LaserlineVisualElement_c({view:c,attached:!1,angleCutoff:I,isDecoration:!0}),A=u.elevationInfo,L=ElevationContext/* ElevationContext */.F.fromElevationInfo(A),M="on-the-ground"===A.mode||!A.offset&&"absolute-height"!==A.mode,R=new ManipulatorState_a,O=(0,signal/* signal */.v)(1);o.push((0,reactiveUtils/* watch */.wB)((()=>({heightPlane:h.visualElements.heightPlane,alpha:O.value})),(({heightPlane:e,alpha:t})=>e.apply(S,t)),reactiveUtils/* initial */.Vh));const z=(0,signal/* signal */.v)(1);o.push((0,reactiveUtils/* watch */.wB)((()=>({shadowStyle:h.visualElements.pointObjects.shadowStyle,alpha:z.value})),(({shadowStyle:e,alpha:t})=>e.apply(P,t)),reactiveUtils/* initial */.Vh));const B=()=>{R.update(e);let t=originGeometryVisualElementUtils_V(manipulatedObjectUtils_t(u));const o=M&&(u.isDraped||null==t||!t.hasZ);let n=!0;if(o||null==t)n=!1;else{(0,elevationInfoUtils/* featureExpressionInfoIsZero */.x)(u.elevationInfo)&&(t=t.clone(),t.z=0);const e=(0,elevationAlignmentUtils/* evaluateElevationAlignmentAtPoint */.nG)(t,c.elevationProvider,L,c.renderCoordsHelper);(0,vec32.i)(originGeometryVisualElementUtils_U,t.x,t.y,e),(0,projectVectorToVector/* projectVectorToVector */.F)(originGeometryVisualElementUtils_U,t.spatialReference,originGeometryVisualElementUtils_U,c.renderCoordsHelper.spatialReference),E.setStartEndFromWorldDownAtLocation(originGeometryVisualElementUtils_U),P.intersectsWorldUpAtLocation=originGeometryVisualElementUtils_U}const i=R.grabbingState&GrabbingState_N.Z?h.visualElements.laserlineAlphaMultiplier:1;O.value=i;const l=(0,aaBoundingBox/* empty */.Ie)(originGeometryVisualElementUtils_C);!o&&u.visible&&s.calculateMapBounds(l)&&(0,projectVectorToVector/* projectVectorToVector */.F)((0,aaBoundingBox/* getMin */.pg)(l,originGeometryVisualElementUtils_U),c.spatialReference,originGeometryVisualElementUtils_U,c.renderCoordsHelper.spatialReference)?(S.heightManifoldTarget=originGeometryVisualElementUtils_U,S.attached=!0):S.attached=!1;const r=R.grabbingState&GrabbingState_N.XY?h.visualElements.laserlineAlphaMultiplier:1;z.value=r;const j=n&&u.visible&&!o;P.attached=j,E.attached=j};o.push((0,reactiveUtils/* watch */.wB)((()=>[u.visible,u.isDraped]),B),u.on("committed",B)),e.forEachManipulator((e=>{o.push(e.events.on("grab-changed",B))})),o.push((0,handleUtils/* destroyHandle */.DQ)(P)),o.push((0,handleUtils/* destroyHandle */.DQ)(E)),o.push((0,handleUtils/* destroyHandle */.DQ)(S)),B()}function originGeometryVisualElementUtils_S(e,o){const{view:n,object:i}=e,l=new PointVisualElement_S({view:n,geometry:originGeometryVisualElementUtils_V(manipulatedObjectUtils_t(i)),elevationInfo:i.elevationInfo,isDecoration:!0});return originGeometryVisualElementUtils_A(e,l,o),o.push((0,handleUtils/* destroyHandle */.DQ)(l)),l}function originGeometryVisualElementUtils_V(e){return null==e?null:"point"===e.type?e:"mesh"===e.type?e.origin.clone():null}function originGeometryVisualElementUtils_A(e,t,o){const{view:n,object:r}=e,a=()=>{t.attached=r.visible},s=new settings_j({getTheme:()=>n.effectiveTheme});originGeometryVisualElementUtils_L(e,t,o),s.visualElements.pointObjects.outline.apply(t),o.push((0,reactiveUtils/* watch */.wB)((()=>r.visible),a,reactiveUtils/* initial */.Vh))}function originGeometryVisualElementUtils_L(e,t,n){const{view:i,object:l}=e;let r=null;const a=e=>{null!=r&&(r.remove(),r=null),l.isDraped&&null!=e&&(r=originGeometryVisualElementUtils_M(i,e,(()=>{t.geometry=e})))},s=()=>{const e=originGeometryVisualElementUtils_V(manipulatedObjectUtils_t(l));null!=e&&(0,elevationInfoUtils/* featureExpressionInfoIsZero */.x)(l.elevationInfo)&&(e.z=0),a(e),t.geometry=e};n.push(l.on("committed",s),(0,handleUtils/* refHandle */.a2)((()=>r))),s()}function originGeometryVisualElementUtils_M(e,t,o){const n=e.elevationProvider.spatialReference;(0,projectPointToVector/* projectPointToVector */.g)(t,originGeometryVisualElementUtils_U,n);const i=originGeometryVisualElementUtils_U[0],l=originGeometryVisualElementUtils_U[1];return e.elevationProvider.on("elevation-change",(e=>{(0,aaBoundingRect/* containsXY */.Rj)(e.extent,i,l)&&o()}))}const originGeometryVisualElementUtils_U=(0,vec3f64/* create */.vt)(),originGeometryVisualElementUtils_C=(0,aaBoundingBox/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/visualElementUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function visualElementUtils_l(l){switch(manipulatedObjectUtils_t(l.object)?.type){case"point":case"mesh":return originGeometryVisualElementUtils_P(l);case"polygon":case"polyline":return lineObjectVisualElementUtils_y(l);default:return null}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/config.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const config_t=128,config_a=70,config_e=80,config_h=.02,config_M=54,config_c=100,config_o=Math.ceil(config_a/3*2),config_I=160,config_P=.5,config_i=24,config_l=9,config_n=config_I+30,config_p=config_I+53,config_r=60,config_s=23,config_x=5*Math.PI/12,config_b=1*Math.PI/3,config_d=10,config_f=.2,config_g=30,config_j=53,config_k=.2,config_m=.3,config_q=200,config_u=3,config_v=1e6;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Handles.js
var Handles = __webpack_require__(1436);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/Manipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Manipulation_t{constructor(){this._available=!0}set location(a){this._forEachManipulator3D((t=>t.location=a))}set elevationAlignedLocation(a){this._forEachManipulator3D((t=>t.elevationAlignedLocation=a))}set elevationInfo(a){this._forEachManipulator3D((t=>t.elevationInfo=a))}get renderLocation(){let a;return this._forEachManipulator3D((t=>{a||(a=t.renderLocation)})),a}set renderLocation(a){this._forEachManipulator3D((t=>t.renderLocation=a))}get available(){return this._available}set available(a){this._available=a,this._forEachManipulator3D((t=>t.available=a))}get hovering(){return this.someManipulator((a=>a.hovering))}get grabbing(){return this.someManipulator((a=>a.grabbing))}get dragging(){return this.someManipulator((a=>a.dragging))}get selected(){return this.someManipulator((a=>a.selected))}hasManipulator(a){return this.someManipulator((t=>t===a))}someManipulator(a){let t=!1;return this.forEachManipulator((o=>{!t&&a(o)&&(t=!0)})),t}_forEachManipulator3D(t){this.forEachManipulator(((o,e)=>{o instanceof ee&&t(o,e)}))}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/InteractiveManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class InteractiveManipulation_i extends Manipulation_t{constructor(){super(...arguments),this._interactive=!0}get interactive(){return this._interactive}set interactive(t){this._interactive!==t&&(this._interactive=t),this._updateManipulatorInteractivity()}_updateManipulatorInteractivity(){const t=!this.grabbing&&this._interactive;this.forEachManipulator((i=>{i.interactive=t||i.grabbing}))}}

;// ../node_modules/@arcgis/core/views/3d/interactive/RenderObject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RenderObject_e{constructor(e,s=interactive_interfaces/* ManipulatorStateFlags */.p7.None){this.geometry=e,this.stateMask=s}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vector.js
var vector = __webpack_require__(16597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js
var Intersector = __webpack_require__(74515);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js
var IntersectorInterfaces = __webpack_require__(22531);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorType.js
var IntersectorType = __webpack_require__(68427);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/verticalOffsetUtils.js
var verticalOffsetUtils = __webpack_require__(689);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/dragEventPipeline.js
var dragEventPipeline = __webpack_require__(74321);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/dragEventPipeline3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function dragEventPipeline3D_T(e,n){return dragEventPipeline3D_P(e,(()=>n))}function dragEventPipeline3D_C(e){return dragEventPipeline3D_P(e,(e=>e.plane))}function dragEventPipeline3D_P(e,t){const o=(0,vec3f64/* create */.vt)(),l=(0,vec3f64/* create */.vt)();let s=!1;return c=>{const i=t(c);if("start"===c.action){const t=(0,screenUtils/* screenPointObjectToArray */.WA)(c.screenStart,(0,screenUtils/* castScreenPointArray */.PR)(vectorStacks/* sv2d */.oG.get())),l=ray_g(e.state.camera,t,dragEventPipeline3D_Q);null!=l&&(s=(0,plane/* intersectRay */.Ui)(i,l,o))}if(!s)return null;const a=(0,screenUtils/* screenPointObjectToArray */.WA)(c.screenEnd,(0,screenUtils/* castScreenPointArray */.PR)(vectorStacks/* sv2d */.oG.get())),u=ray_g(e.state.camera,a,dragEventPipeline3D_Q);return null==u?null:(0,plane/* intersectRay */.Ui)(i,u,l)?{...c,renderStart:o,renderEnd:l,plane:i,ray:u}:null}}function dragEventPipeline3D_D(n,r,t=0,o=null,l=null){let s=null;return c=>{if("start"===c.action&&(s=n.sceneIntersectionHelper.intersectElevationFromScreen((0,screenUtils/* createScreenPointArray */.gs)(c.screenStart.x,c.screenStart.y),r,t,l),null!=s&&null!=o&&!(0,projectionUtils.projectPoint)(s,s,o)))return null;if(null==s)return null;const i=n.sceneIntersectionHelper.intersectElevationFromScreen((0,screenUtils/* createScreenPointArray */.gs)(c.screenEnd.x,c.screenEnd.y),r,t,l);return null!=i&&(null==o||(0,projectionUtils.projectPoint)(i,i,o))?{...c,mapStart:s,mapEnd:i}:null}}function dragEventPipeline3D_M(e,n,r,t=null,o=null){return dragEventPipeline3D_D(e,r,(0,elevationInfoUtils/* getZForElevationMode */.id)(n,e,r),t,o)}function dragEventPipeline3D_N(e,n,r,t){const o=r.toMap(e.screenStart);return null!=o?dragEventPipeline3D_M(n,o,r.elevationInfo,t):null}function dragEventPipeline3D_h(e,n){const r=dragEventPipeline3D_K,t=dragEventPipeline3D_L,s=(0,plane/* create */.vt)();e.renderCoordsHelper.worldUpAtPosition(n,r);const c=(0,vec32.h)((0,plane/* getNormal */.Qj)(s),r,(0,vec32.d)(t,n,e.state.camera.eye));return (0,vec32.h)(c,c,r),(0,plane/* fromPositionAndNormal */.O_)(n,c,s)}function dragEventPipeline3D_G(e,n,r){let t=null;const o=new dragEventPipeline/* EventPipeline */.rh;return o.next(dragEventPipeline3D_T(e,dragEventPipeline3D_h(e,n))).next(dragEventPipeline3D_k(e,n)).next(dragEventPipeline3D_F(e,r)).next((e=>{e.mapEnd.x=e.mapStart.x,e.mapEnd.y=e.mapStart.y,t=e})),e=>(t=null,o.execute(e),t)}function dragEventPipeline3D_k(e,n){const r=(0,vec3f64/* create */.vt)(),t=(0,vec32.l)(n);e.renderCoordsHelper.worldUpAtPosition(n,r);const o=(0,vec3f64/* create */.vt)(),m=(0,vec3f64/* create */.vt)(),f=o=>{if((0,vec32.d)(o,o,n),(0,vector/* projectPoint */._I)(r,o,o),"global"===e.viewingMode){(0,vec32.l)(o)*Math.sign((0,vec32.e)(r,o))<.001-t&&(0,vec32.d)(o,(0,vec32.g)(o,r,.001),n)}return (0,vec32.f)(o,o,n),o};return e=>(e.renderStart=f((0,vec32.c)(o,e.renderStart)),e.renderEnd=f((0,vec32.c)(m,e.renderEnd)),e)}function dragEventPipeline3D_A(e,t){const o=o=>{const l=n(o,r(dragEventPipeline3D_J)),s=w(e.state.camera,l,dragEventPipeline3D_Q);if(null==s)return null;const c=j(t,s,dragEventPipeline3D_K,dragEventPipeline3D_L);return c?.[0]};return e=>{const n=o(e.screenStart);if(null==n)return null;const r=o(e.screenEnd);return null==r?null:{...e,renderStart:n,renderEnd:r}}}function dragEventPipeline3D_F(e,n){const r=e.renderCoordsHelper;return e=>{const t=r.fromRenderCoords(e.renderStart,new Point/* default */.A({spatialReference:n})),o=r.fromRenderCoords(e.renderEnd,new Point/* default */.A({spatialReference:n}));return null!=t&&null!=o?{...e,mapStart:t,mapEnd:o}:null}}var dragEventPipeline3D_q;function dragEventPipeline3D_z(e){let n=null;return r=>{switch(r.action){case"start":n=e.disableDisplay();break;case"end":case"cancel":null!=n&&(n.remove(),n=null)}return r}}function dragEventPipeline3D_B(r,t=null){const o=new x(r.state.viewingMode);o.options.selectionMode=!0,o.options.store=I.MIN,o.options.hud=!1;const l=e(),s={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},c=p(),i=t??r.spatialReference,a=e=>{r.map.ground&&r.map.ground.opacity<1?s.exclude.add(H):s.exclude.delete(H),r.sceneIntersectionHelper.intersectIntersectorScreen(n(e,l),o,s);const t=o.results.min;let a;if(t.getIntersectionPoint(c))a=t.intersector===U.TERRAIN?dragEventPipeline3D_q.GROUND:dragEventPipeline3D_q.OTHER;else{if(!o.results.ground.getIntersectionPoint(c))return null;a=dragEventPipeline3D_q.GROUND}return{location:r.renderCoordsHelper.fromRenderCoords(c,new m({spatialReference:i})),surfaceType:a}};let u;return e=>{if("start"===e.action){const n=a(e.screenStart);u=null!=n?n.location:null}if(null==u)return null;const n=a(e.screenEnd);return null!=n?.location?{...e,mapStart:u,mapEnd:n.location,surfaceType:n.surfaceType}:null}}!function(e){e[e.GROUND=0]="GROUND",e[e.OTHER=1]="OTHER"}(dragEventPipeline3D_q||(dragEventPipeline3D_q={}));const dragEventPipeline3D_J=(0,vec2f64/* create */.vt)(),dragEventPipeline3D_K=(0,vec3f64/* create */.vt)(),dragEventPipeline3D_L=(0,vec3f64/* create */.vt)(),dragEventPipeline3D_Q=(0,ray/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/moveUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function moveUtils_n(n,a,r){const c=(t,e)=>{a({action:t,object:n,dxScreen:e.screenDeltaX,dyScreen:e.screenDeltaY})};return r(((a,r,s)=>(r.next((t=>("start"===t.action&&c("start",t),t))).next((0,dragEventPipeline/* dragManipulatedObject */.Wp)(n)).next((t=>{switch(t.action){case"start":case"update":(t.translationX||t.translationY||t.translationZ)&&c("update",t);break;case"end":c("end",t)}return t})),{steps:r,cancel:s=s.next((0,dragEventPipeline/* resetManipulatedObject */.dp)(n)).next((t=>(c("end",{screenDeltaX:0,screenDeltaY:0}),t)))})))}function moveUtils_a(t){if(null==t?.axis)return 1;const{mapStart:e,mapEnd:n,axis:a}=t,r=[n.x-e.x,n.y-e.y];return r[0]*a[0]+r[1]*a[1]>0?1:-1}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYAxisManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveXYAxisManipulation_C extends Manipulation_t{constructor(t){super(),this._handles=new Handles/* default */.A,this._arrowManipulatorInfos=new Array,this._angle=0,this._scale=1,this._radius=config_a,this._updateAfterDrag=!1,this.events=new Evented/* default */.A,this._tool=t.tool,this._view=t.view,this._opaqueMaterial=this._createMaterial(),this._transparentMaterial=this._createMaterial(.5),null!=t.radius&&(this._radius=t.radius),this._createManipulators(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}set orthogonalAvailable(t){this._arrowManipulatorInfos.length>=3&&(this._arrowManipulatorInfos[1].manipulator.available=t,this._arrowManipulatorInfos[3].manipulator.available=t)}destroy(){this._handles=(0,maybe/* destroyMaybe */.pR)(this._handles),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._arrowManipulatorInfos.length=0}forEachManipulator(t){for(const{manipulator:r}of this._arrowManipulatorInfos)t(r,ManipulatorType_A.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t,r,a){if(!r.operations)return (0,handleUtils/* makeHandle */.hA)();const i=r.operations.data.spatialReference,o=r.graphic;return moveUtils_n(r,a,(a=>this.createDragPipeline(((r,e,i,o,s)=>(({steps:e,cancel:i}=t(r,e,i,o,s)),a(r,e,i))),r.elevationInfo,i,o)))}createDragPipeline(t,r,a,e){return (0,handleUtils/* handlesGroup */.vE)(this._arrowManipulatorInfos.map((({manipulator:i},o)=>(0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(i,((i,s,n,l,p)=>{const u=s.next((t=>({...t,manipulatorType:ManipulatorType_A.TRANSLATE_XY}))).next((0,dragEventPipeline/* dragAtLocation */.Tp)(this._view,i.elevationAlignedLocation)).next(dragEventPipeline3D_M(this._view,i.elevationAlignedLocation,r,a,e)).next((0,dragEventPipeline/* constrainToMapAxis */.an)(i.location,this.angle+(o+1)*Math.PI*.5)).next((0,dragEventPipeline/* addScreenDelta */.sO)());t(i,u,n,l,p)})))))}get angle(){return this._angle}set angle(t){this._angle=t,this.dragging?this._updateAfterDrag=!0:this._updateManipulatorTransform()}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get radius(){return this._radius}set radius(t){this._radius!==t&&(this._radius=t,this._updateManipulators())}_updateManipulators(){for(let t=0;t<this._arrowManipulatorInfos.length;t++)this._updateArrowManipulator(this._arrowManipulatorInfos[t],t);this._updateManipulatorTransform()}_updateArrowManipulator({manipulator:t,transform:r},a){const e=this._radius/config_a,i=config_M*e,o=i*Math.sqrt(3)/2,s=(0,GeometryUtil/* createExtrudedTriangle */._B)(this._opaqueMaterial,o,i/2,i/2,config_h);(0,GeometryUtil/* transformInPlace */.xh)(s,(0,mat4/* fromTranslation */.kN)(vectorStacks/* sm4d */.Rc.get(),(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),0,-o/3,0))),t.renderObjects=[new RenderObject_e(s,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(s.instantiate({material:this._transparentMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused)],t.radius=o/3*2*1.2;const n=(0,mat4/* fromZRotation */.N9)(vectorStacks/* sm4d */.Rc.get(),a*Math.PI/2),h=(0,mat4/* fromTranslation */.kN)(vectorStacks/* sm4d */.Rc.get(),(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),0,config_c*e,0));(0,mat4/* multiply */.lw)(r,n,h)}_createManipulators(){for(let t=0;t<4;t++){const r=this._createArrowManipulator(t);this._arrowManipulatorInfos.push(r)}this._updateManipulatorTransform()}_updateManipulatorTransform(){const t=this.angle,r=(0,mat4/* fromRotation */.$0)(vectorStacks/* sm4d */.Rc.get(),t,(0,vec3f64/* fromValues */.fA)(0,0,1));if(null==r)return;const a=(0,mat4/* fromScaling */.CV)(vectorStacks/* sm4d */.Rc.get(),(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),this.displayScale,this.displayScale,this.displayScale)),e=(0,mat4/* multiply */.lw)(vectorStacks/* sm4d */.Rc.get(),a,r);for(const i of this._arrowManipulatorInfos){const t=(0,mat4/* multiply */.lw)(vectorStacks/* sm4d */.Rc.get(),e,i.transform);i.manipulator.modelTransform=t}}_createArrowManipulator(t){const r=new ee({view:this._view,autoScaleRenderObjects:!1,worldOriented:!0,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,vec3f64/* fromValues */.fA)(0,0,1)}}),a={manipulator:r,transform:(0,mat4f64/* create */.vt)()};return this._updateArrowManipulator(a,t),this._handles.add(r.events.on("drag",(t=>{this._updateAfterDrag&&"end"===t.action&&!this.dragging&&(this._updateManipulatorTransform(),this._updateAfterDrag=!1)}))),a}_createMaterial(r=1){const a=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Transparent,isDecoration:!0});return this._handles.add((0,reactiveUtils/* watch */.wB)((()=>Color/* default */.A.toUnitRGBA(this._view.effectiveTheme.accentColor)),(t=>{t[3]*=r,a.setParameters({color:t})}),reactiveUtils/* initial */.Vh)),a}get test(){}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/snapping/SnapToScene.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SnapToScene_e{constructor(){this._view=null,this._elevationInfo=null,this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const n=this._lastDragEvent.mapEnd,e=this._snap(this._lastDragEvent.screenEnd);if(null!=e){const s={action:"update",mapStart:this._lastDragEvent.mapStart,mapEnd:!0===t?e:n,screenStart:this._lastDragEvent.screenEnd,screenEnd:this._lastDragEvent.screenEnd};this._next.execute(s)}}this._enabled=t}_snap(n){const e=null!=this._view?this._view.toMap(n,{exclude:[]}):null;return null!=e&&null!=this._view&&(e.z=(0,elevationInfoUtils/* getZForElevationMode */.id)(e,this._view,this._elevationInfo)),e}createDragEventPipelineStep(t,e){this._view=t,this._elevationInfo=e,this._lastDragEvent=null;const s=new dragEventPipeline/* EventPipeline */.rh;this._next=s;return[t=>{if(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled){const n=this._snap(t.screenEnd);return null!=n?{action:t.action,mapStart:t.mapStart,mapEnd:n,screenStart:t.screenStart,screenEnd:t.screenEnd}:null}return{action:t.action,mapStart:t.mapStart,mapEnd:t.mapEnd,screenStart:t.screenStart,screenEnd:t.screenEnd}},s]}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYDiscManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveXYDiscManipulation_O extends Manipulation_t{constructor(t){super(),this._handles=new Handles/* default */.A,this._snapToScene=new SnapToScene_e,this._scale=1,this._radius=config_a,this._view=t.view,this._tool=t.tool,this._discMaterial=this._createMaterial(),this._discMaterialTransparent=this._createMaterial(.5),null!=t.snapToScene&&(this.snapToScene=t.snapToScene),null!=t.radius&&(this._radius=t.radius),this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._handles=(0,maybe/* destroyMaybe */.pR)(this._handles),this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){t(this._manipulator,ManipulatorType_A.TRANSLATE_XY)}get displayScale(){return this._scale}set displayScale(t){this._scale=t,this._updateManipulatorTransform()}get snapToScene(){return this._snapToScene.enabled}set snapToScene(t){this._snapToScene.enabled=t}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}get discManipulator(){return this._manipulator}createManipulatedObjectDragPipeline(t,e,a){if(!e.operations)return (0,handleUtils/* makeHandle */.hA)();const r=e.graphic,s=e.elevationInfo,o=e.operations.data.spatialReference;return moveUtils_n(e,a,(e=>this.createDragPipeline(((i,a,r,s,o)=>(({steps:a,cancel:r}=t(i,a,r,s,o)),e(i,a,r))),s,o,r)))}createDragPipeline(t,e,i,a){const r=this._view;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(this._manipulator,((s,o,n,l,p)=>{const c=o.next((0,dragEventPipeline/* dragAtLocation */.Tp)(r,s.elevationAlignedLocation)).next(dragEventPipeline3D_M(r,s.elevationAlignedLocation,e,i,a)).next(...this._snapToScene.createDragEventPipelineStep(r,e)).next((t=>({...t,manipulatorType:ManipulatorType_A.TRANSLATE_XY}))).next((0,dragEventPipeline/* addScreenDelta */.sO)());t(s,c,n,l,p)}))}_updateManipulatorTransform(){const t=(0,mat4/* fromScaling */.CV)(vectorStacks/* sm4d */.Rc.get(),(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),this.displayScale,this.displayScale,this.displayScale));this._manipulator.modelTransform=t}_createManipulator(){const t=this._view;this._manipulator=new ee({view:t,worldSized:!1,autoScaleRenderObjects:!1,focusMultiplier:1,touchMultiplier:1,collisionType:{type:"disc",direction:(0,vec3f64/* fromValues */.fA)(0,0,1)},worldOriented:!0}),this._updateManipulator()}_updateManipulator(){const t=(0,GeometryUtil/* createCylinderGeometry */.nW)(this._discMaterial,config_h,1,config_t,(0,vec3f64/* fromValues */.fA)(0,0,1),(0,vec3f64/* fromValues */.fA)(0,0,0));t.transformation=(0,mat4/* fromScaling */.CV)((0,mat4f64/* create */.vt)(),(0,vec3f64/* fromValues */.fA)(this._radius,this._radius,this._radius)),this._manipulator.renderObjects=[new RenderObject_e(t,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(t.instantiate({material:this._discMaterialTransparent}),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused)],this._manipulator.radius=config_e*(this._radius/config_a)}_createMaterial(e=1){const i=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Transparent,isDecoration:!0});return this._handles.add((0,reactiveUtils/* watch */.wB)((()=>Color/* default */.A.toUnitRGBA(this._view.effectiveTheme.accentColor)),(t=>{t[3]*=e,i.setParameters({color:t})}),reactiveUtils/* initial */.Vh)),i}get test(){}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js
var graphicUtils = __webpack_require__(54096);
;// ../node_modules/@arcgis/core/views/3d/interactive/manipulatorUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function manipulatorUtils_f(t,r=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,o=!0){const n=(0,colorUtils/* colorVectorToColorAndOpacity */.pf)(t),i=!(t[3]<1);return o?new ShadedColorMaterial_z({color:n,writeDepth:i,cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:r,isDecoration:!0}):new ColorMaterial/* ColorMaterial */.v({color:n,writeDepth:i,cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:r,isDecoration:!0})}function manipulatorUtils_h(t,r=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent){const o=(0,colorUtils/* colorVectorToColorAndOpacity */.pf)(t);return new ColorMaterial/* ColorMaterial */.v({color:o,writeDepth:!0,cullFace:basicInterfaces/* CullFaceOptions */.s2.Front,renderOccluded:r,isDecoration:!0})}const manipulatorUtils_j=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1}),manipulatorUtils_b=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});function manipulatorUtils_w(e,i,a,s){const u=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e,a),m=manipulatorUtils_O(u,(0,vec32.h)(vectorStacks/* sv3d */.rq.get(),s,u),a,vectorStacks/* sm4d */.Rc.get());(0,mat4/* invert */.B8)(m,m);const p=(0,vec32.t)(vectorStacks/* sv3d */.rq.get(),i,m);return Math.atan2(p[1],p[0])}function manipulatorUtils_O(e,t,r,n){const l=(0,vec32.n)(vectorStacks/* sv3d */.rq.get(),e),a=(0,vec32.n)(vectorStacks/* sv3d */.rq.get(),t),s=(0,vec32.h)(vectorStacks/* sv3d */.rq.get(),l,a);return n[0]=l[0],n[1]=l[1],n[2]=l[2],n[3]=0,n[4]=a[0],n[5]=a[1],n[6]=a[2],n[7]=0,n[8]=s[0],n[9]=s[1],n[10]=s[2],n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function manipulatorUtils_D(e,t){const r=e.getViewForGraphic(t);return null!=r&&"computeAttachmentOrigin"in r?r.computeAttachmentOrigin(t,e.spatialReference):null}function manipulatorUtils_F(e,t){const r=t.origin;null==r?manipulatorUtils_y(e,manipulatedObjectUtils_t(t)):e.elevationAlignedLocation=r}function manipulatorUtils_y(e,t){if(null==t)return;const r="mesh"===t.type?t.origin:(0,graphicUtils/* computeCentroid */.W$)(t);null!=r&&(e.location=(0,hydratedFeatures/* hydrateGeometry */.wZ)(r))}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveZManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveZManipulation_R extends Manipulation_t{constructor(t){super(),this._radius=config_a,this.events=new Evented/* default */.A,this._tool=t.tool,this._view=t.view;const e=new settings_j({getTheme:()=>this._view.effectiveTheme});this._settings=e,null!=t.radius&&(this._radius=t.radius);const r=this._view.effectiveTheme.accentColor;this._materials={materialUnfocused:manipulatorUtils_f(MoveZManipulation_C(r,1,.25),Material/* RenderOccludedFlag */.m$.Occlude),materialFocused:manipulatorUtils_f(MoveZManipulation_C(r,1,0),Material/* RenderOccludedFlag */.m$.Occlude),materialOccludedUnfocused:manipulatorUtils_f(MoveZManipulation_C(r,.7,0),e.zManipulator.renderOccluded),materialOccludedFocused:manipulatorUtils_f(MoveZManipulation_C(r,.85,0),e.zManipulator.renderOccluded)},this._themeHandle=(0,reactiveUtils/* watch */.wB)((()=>this._view.effectiveTheme.accentColor),(t=>{const e=MoveZManipulation_C(t,1,.25),i=MoveZManipulation_C(t,1,0),r=MoveZManipulation_C(t,.7,0),a=MoveZManipulation_C(t,.85,0),{materialUnfocused:o,materialFocused:s,materialOccludedUnfocused:n,materialOccludedFocused:l}=this._materials;o.setParameters({color:e}),s.setParameters({color:i}),n.setParameters({color:r}),l.setParameters({color:a})})),this._createManipulator(),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this._themeHandle=(0,maybe/* removeMaybe */.xt)(this._themeHandle),this._manipulator.applyObjectTransform=MoveZManipulation_L,this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()}))}forEachManipulator(t){t(this._manipulator,ManipulatorType_A.TRANSLATE_Z)}createManipulatedObjectDragPipeline(t,e,i){if(!e.operations)return (0,handleUtils/* makeHandle */.hA)();const a=e.operations.data.spatialReference;return moveUtils_n(e,i,(e=>this.createDragPipeline(((i,r,a,o,s)=>(({steps:r,cancel:a}=t(i,r,a,o,s)),e(i,r,a))),a)))}createDragPipeline(t,e){const i=this._view;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(this._manipulator,((r,a,o,s,n)=>{const l=a.next((t=>({...t,manipulatorType:ManipulatorType_A.TRANSLATE_Z}))).next(dragEventPipeline3D_G(i,r.renderLocation,e)).next((0,dragEventPipeline/* addScreenDelta */.sO)());t(r,l,o,s,n)}))}get radius(){return this._radius}set radius(t){t!==this._radius&&(this._radius=t,this._updateManipulator())}_updateManipulator(){const t=this._settings,e=this._radius/config_a,i=t.zManipulator.height*e,r=t.zManipulator.coneHeight*e,a=t.zManipulator.coneWidth*e,o=t.zManipulator.width*e,s=[(0,vec3f64/* fromValues */.fA)(0,0,0),(0,vec3f64/* fromValues */.fA)(0,0,i)],m=[(0,vec3f64/* fromValues */.fA)(0,0,0),(0,vec3f64/* fromValues */.fA)(0,0,i+r)],d=(()=>{const t=(0,mat4f64/* create */.vt)();return (0,mat4/* translate */.Tl)(t,t,[0,0,i]),(0,mat4/* rotateX */.eL)(t,t,Math.PI/2),t})(),{materialUnfocused:u,materialFocused:p,materialOccludedUnfocused:h,materialOccludedFocused:f}=this._materials,j=(0,GeometryUtil/* createTubeGeometry */.Nb)(u,s,o/2,16,!1),w=(0,GeometryUtil/* createConeGeometry */.EE)(u,r,a/2,16,!1);w.transformation=d,this._manipulator.renderObjects=[new RenderObject_e(w,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(j,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(w.instantiate({material:p}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(j.instantiate({material:p}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(w.instantiate({material:h}),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(j.instantiate({material:h}),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(w.instantiate({material:f}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(j.instantiate({material:f}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused)],this._manipulator.radius=o/2+2,this._manipulator.collisionType={type:"line",paths:[m]}}_createManipulator(){const t=this._view,e=new ee({view:t,autoScaleRenderObjects:!1,worldSized:!1,selectable:!1,cursor:"ns-resize",elevationInfo:this.elevationInfo,worldOriented:!0,collisionPriority:1.6});e.applyObjectTransform=e=>{const i=t.state.camera,r=MoveZManipulation_D;t.renderCoordsHelper.toRenderCoords(this._manipulator.elevationAlignedLocation,r);const o=(0,vec32.F)(i.eye,r),s=i.computeRenderPixelSizeAtDist(o),n=(0,vec32.d)(MoveZManipulation_H,r,i.eye);(0,vec32.n)(n,n);const l=MoveZManipulation_S;t.renderCoordsHelper.worldUpAtPosition(MoveZManipulation_D,l);const c=Math.abs((0,vec32.e)(n,l)),_=(0,vec32.h)(MoveZManipulation_H,n,l),j=(0,vec32.h)(MoveZManipulation_H,_,l),w=(0,mathUtils/* clamp */.qE)(c,.01,1),v=1-Math.sqrt(1-w*w)/w/i.fullWidth,g=this._settings,M=this._radius/config_a,U=g.zManipulator.width*M;(0,vec32.g)(j,(0,vec32.n)(j,j),(1/v-1)*o+s*U),e[12]-=MoveZManipulation_H[0],e[13]-=MoveZManipulation_H[1],e[14]-=MoveZManipulation_H[2]},this._manipulator=e,this._updateManipulator()}get test(){}}function MoveZManipulation_C(i,r,a){const o=(0,colorUtils/* darken */.e$)(i,a);return o.a*=r,Color/* default */.A.toUnitRGBA(o)}const MoveZManipulation_D=(0,vec3f64/* create */.vt)(),MoveZManipulation_H=(0,vec3f64/* create */.vt)(),MoveZManipulation_S=(0,vec3f64/* create */.vt)(),MoveZManipulation_L=()=>{};

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveManipulation_u extends InteractiveManipulation_i{constructor(a){super(),this._handles=new Handles/* default */.A;const{tool:t,view:n,snapToScene:e,radius:s}=a;this._view=n,this.xyManipulation=new MoveXYDiscManipulation_O({tool:t,view:n,snapToScene:e,radius:s}),this.xyAxisManipulation=new MoveXYAxisManipulation_C({tool:t,view:n,radius:s}),this.zManipulation=new MoveZManipulation_R({tool:t,view:n,radius:s}),this.xyManipulation.available=a.xyAvailable,this.xyAxisManipulation.available=a.xyAxisAvailable,this.zManipulation.available=a.zAvailable,this._autoHideXYAxis(),this.forEachManipulator((i=>this._handles.add(i.events.on("grab-changed",(()=>this._updateManipulatorInteractivity())))))}destroy(){this._handles.destroy(),this.xyManipulation.destroy(),this.xyAxisManipulation.destroy(),this.zManipulation.destroy()}createManipulatedObjectDragPipeline(i,t,n){return (0,handleUtils/* handlesGroup */.vE)([this.xyManipulation.createManipulatedObjectDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.XY,a,t,n,e,s)),t,n),this.xyAxisManipulation.createManipulatedObjectDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.XY_AXIS,a,t,n,e,s)),t,n),this.zManipulation.createManipulatedObjectDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.Z,a,t,n,e,s)),t,n)])}createDragPipeline(i,t,n,e){return (0,handleUtils/* handlesGroup */.vE)([this.xyManipulation.createDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.XY,a,t,n,e,s)),t,n,e),this.xyAxisManipulation.createDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.XY_AXIS,a,t,n,e,s)),t,n,e),this.zManipulation.createDragPipeline(((a,t,n,e,s)=>i(MoveManipulation_c.Z,a,t,n,e,s)),n)])}set snapToScene(i){this.xyManipulation.snapToScene=i}set angle(i){this.xyAxisManipulation.angle=i}set radius(i){this.xyAxisManipulation.radius=i,this.xyManipulation.radius=i,this.zManipulation.radius=i}set displayScale(i){this.xyManipulation.displayScale=i,this.xyAxisManipulation.displayScale=i}forEachManipulator(i){this.xyManipulation.forEachManipulator((a=>i(a,ManipulatorType_A.TRANSLATE_XY))),this.xyAxisManipulation.forEachManipulator((a=>i(a,ManipulatorType_A.TRANSLATE_XY))),this.zManipulation.forEachManipulator((a=>i(a,ManipulatorType_A.TRANSLATE_Z)))}get _xyAxisVisible(){const i=this.xyManipulation.someManipulator((i=>i.focused))||this.xyAxisManipulation.someManipulator((i=>i.focused));return this._view.inputManager&&"touch"===this._view.inputManager.latestPointerType||i}_autoHideXYAxis(){const i=this.xyAxisManipulation,a=this.xyManipulation;if((0,has/* default */.A)("esri-mobile"))return;const n=[];a.forEachManipulator((i=>n.push(i))),i.forEachManipulator((i=>n.push(i)));const e=()=>{const a=[];this._xyAxisVisible||i.forEachManipulator((i=>a.push(i.disableDisplay()))),this._handles.remove(MoveManipulation_h),this._handles.add(a,MoveManipulation_h)};for(const t of n)this._handles.add(t.events.on("focus-changed",e));this._view.inputManager&&this._handles.add((0,reactiveUtils/* when */.z7)((()=>this._view.inputManager?.latestPointerType),e)),e()}static radiusForSymbol(i){const a=null!=i&&"point-3d"===i.type&&i.symbolLayers;return!!a&&a.some((i=>"icon"===i.type))?config_o:config_a}}const MoveManipulation_h="disable-xy-axis-display";var MoveManipulation_c;!function(i){i[i.XY=0]="XY",i[i.XY_AXIS=1]="XY_AXIS",i[i.Z=2]="Z"}(MoveManipulation_c||(MoveManipulation_c={}));

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/manipulations/MoveXYObjectManipulation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveXYObjectManipulation_l extends Manipulation_t{constructor(t){super(),this._view=t.view,this._tool=t.tool,this._object=t.object,this._manipulator=this._object.createManipulator?.({selectable:!0,cursor:"move"}),this.forEachManipulator((t=>this._tool.manipulators.add(t)))}destroy(){this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()})),this._tool=null,this._view=null,this._manipulator=null}forEachManipulator(t){this._manipulator&&t(this._manipulator,ManipulatorType_A.TRANSLATE_XY)}createManipulatedObjectDragPipeline(t){return moveUtils_n(this._object,t,(t=>this.createDragPipeline(t)))}createDragPipeline(e){if(!this._manipulator)return (0,handleUtils/* makeHandle */.hA)();const o=this._view;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(this._manipulator,((t,r,a,l,p)=>{const h=this._object.operations?.data.spatialReference,u=r.next((t=>h?t:null)).next(dragEventPipeline3D_N(p,o,this._object,h)).next((0,dragEventPipeline/* addMapDelta */.EX)()).next((0,dragEventPipeline/* addScreenDelta */.sO)());e(t,u,a,l,p)}))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/interactive/editingTools/move/isSupportedObject.js
var isSupportedObject = __webpack_require__(94036);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js + 1 modules
var InteractiveToolBase = __webpack_require__(37413);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometryOperations.js + 8 modules
var EditGeometryOperations = __webpack_require__(59147);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/SketchOptions.js
var SketchOptions = __webpack_require__(76748);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js
var SnappingContext = __webpack_require__(53333);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js
var SnappingDragPipelineStep = __webpack_require__(89030);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/MovePointTooltipInfo.js
var MovePointTooltipInfo = __webpack_require__(57087);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateTooltipInfo.js
var TranslateTooltipInfo = __webpack_require__(56326);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/SketchTooltipInfo.js
var SketchTooltipInfo = __webpack_require__(83856);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateXYTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TranslateXYTooltipInfo_i=class extends SketchTooltipInfo/* SketchTooltipInfo */.w{constructor(o){super(o),this.type="translate-xy",this.distance=quantityUtils/* zeroMeters */.r7}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TranslateXYTooltipInfo_i.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TranslateXYTooltipInfo_i.prototype,"distance",void 0),TranslateXYTooltipInfo_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.TranslateXYTooltipInfo")],TranslateXYTooltipInfo_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TranslateZTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TranslateZTooltipInfo_i=class extends SketchTooltipInfo/* SketchTooltipInfo */.w{constructor(o){super(o),this.type="translate-z",this.distance=quantityUtils/* zeroMeters */.r7}clear(){this.distance=quantityUtils/* zeroMeters */.r7}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TranslateZTooltipInfo_i.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TranslateZTooltipInfo_i.prototype,"distance",void 0),TranslateZTooltipInfo_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.TranslateZTooltipInfo")],TranslateZTooltipInfo_i);

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/move/MoveTool3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveTool3D_L{constructor(t){this.objects=t,this.type="move-start"}}class MoveTool3D_N{constructor(t,o,e){this.dx=t,this.dy=o,this.objects=e,this.type="move"}}class MoveTool3D_q{constructor(t){this.objects=t,this.type="move-stop"}}const MoveTool3D_J=Symbol("manipulators"),MoveTool3D_K=Symbol("tooltips");let MoveTool3D_Q=class extends InteractiveToolBase/* InteractiveToolBase */.g{constructor(t){super(t),this._infos=new Map,this.events=new Evented/* default */.A,this.objects=new Collection/* default */.A,this.enableZ=!0,this.sketchOptions=new SketchOptions/* default */.A,this.type="move-3d",this._latestTooltipInfo=null,this._translateTooltipInfo=null,this._translateXYTooltipInfo=null,this._translateZTooltipInfo=null,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._moveManipulation=null}initialize(){const{view:t}=this;this.tooltip=(0,tooltipCommonUtils/* makeTooltip */.A)((()=>({view:t,options:this.sketchOptions.tooltips}))),this.addHandles([this.objects.on("change",(t=>{t.removed.forEach((t=>this.removeHandles(t))),this._updateObjectInfos(t),this._setupFastTransformUpdates(t.added),this._refreshManipulators()})),this.objects.on("change",(()=>this._connectTooltips()))]);const o=this.objects.toArray();this._updateObjectInfos({added:o,removed:[]}),this._setupFastTransformUpdates(o),this._refreshManipulators(),this._connectTooltips(),this.finishToolCreation()}destroy(){this.tooltip=(0,maybe/* destroyMaybe */.pR)(this.tooltip),this._moveManipulation=(0,maybe/* destroyMaybe */.pR)(this._moveManipulation),this._set("view",null),this._updatingHandles.destroy()}onInputEvent(t){if(!this.destroyed&&!(0,tooltipCommonUtils/* enterInputModeIfAvailable */.wG)(t,this.tooltip))return super.onInputEvent(t)}get updating(){return this._updatingHandles.updating}get _shouldShowMovePointTooltip(){const{objects:t}=this;if(1!==t.length)return!1;const o=manipulatedObjectUtils_t(t.at(0))?.type;return"point"===o||"mesh"===o}get activeTooltipInfo(){return this._shouldShowMovePointTooltip?this._movePointTooltipInfo:this._latestTooltipInfo}reset(){}_updateObjectInfos({added:t,removed:o}){for(const e of t){if((0,isSupportedObject/* isSupportedObject */.Y)(e)!==isSupportedObjectUtils/* SupportedObjectResult */.d.SUPPORTED)continue;const t=new $(e);this._infos.set(e,t)}for(const e of o)this._infos.delete(e)}_setupFastTransformUpdates(t){for(const o of t){const t=this._infos.get(o);this.addHandles(meshFastUpdateUtils_a(t.object),o)}}_refreshManipulators(){if(this.removeHandles(MoveTool3D_J),this._moveManipulation=(0,maybe/* destroyMaybe */.pR)(this._moveManipulation),this.manipulators.removeAll(),0===this._infos.size)return;const t=Array.from(this._infos.values());this._createManipulators(t),this._createVisualElements(t),this._updateMoveManipulation(t)}_createManipulators(t){for(const o of t){const e=o.object;o.manipulationXY=new MoveXYObjectManipulation_l({tool:this,view:this.view,object:e}),o.manipulationXY.forEachManipulator((t=>{this.addHandles([t.events.on("immediate-click",(t=>{this.events.emit("immediate-click",{...t,object:e}),t.stopPropagation()})),t.events.on("grab-changed",(({action:t})=>{"start"===t?this._showTooltip(MoveManipulation_c.XY):this._hideTooltip()}))],MoveTool3D_J)})),this.addHandles(o.manipulationXY.createDragPipeline(((o,e,i,n)=>this._buildDragEventPipeline(t,MoveManipulation_c.XY,o,e,i,n))),MoveTool3D_J)}this._createMoveManipulation(t)}_createMoveManipulation(t){const o=new MoveManipulation_u({tool:this,view:this.view,snapToScene:!1,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:!0,radius:1===t.length?MoveManipulation_u.radiusForSymbol(t[0].object.graphic?.symbol):config_a});this._moveManipulation=o,o.elevationInfo={mode:"absolute-height",offset:0},o.forEachManipulator((t=>{this.addHandles(t.events.on("immediate-click",(e=>{const i=this.objects.at(0);!o.zManipulation.hasManipulator(t)&&1===this.objects.length&&i&&this.events.emit("immediate-click",{...e,object:i}),e.stopPropagation()})),MoveTool3D_J)}));const e=t=>o=>{this.addHandles([o.events.on("focus-changed",(({action:o})=>{"focus"===o?this._showTooltip(t):this._hideTooltip()})),o.events.on("grab-changed",(()=>{this._latestTooltipInfo&&(this._latestTooltipInfo.distance=quantityUtils/* zeroMeters */.r7)}))],MoveTool3D_J)};this._moveManipulation.xyManipulation.forEachManipulator(e(MoveManipulation_c.XY)),this._moveManipulation.xyAxisManipulation.forEachManipulator(e(MoveManipulation_c.XY_AXIS)),this._moveManipulation.zManipulation.forEachManipulator(e(MoveManipulation_c.Z));const i=()=>this._updateMoveManipulation(t);for(const a of t)this.addHandles([a.object.on("committed",i),(0,reactiveUtils/* watch */.wB)((()=>a.object.visible),i)],MoveTool3D_J);const n=t[t.length-1];this.addHandles(n.object.on("committed",(()=>this._updateMoveManipulationAngle(n))),MoveTool3D_J);const{object:s}=n,{operations:l}=s;if(l){const e=s.graphic;this.addHandles(o.createDragPipeline(((o,e,i,n,s)=>this._buildDragEventPipeline(t,o,e,i,n,s)),s.elevationInfo,l.data.spatialReference,e),MoveTool3D_J)}this._updateMoveManipulationAngle(n)}_createVisualElements(t){for(const o of t){const e=o.object,i=visualElementUtils_l({view:this.view,object:e,forEachManipulator:t=>{o.manipulationXY?.forEachManipulator(t),this._moveManipulation?.forEachManipulator(t)},onManipulatorsChanged:()=>(0,handleUtils/* makeHandle */.hA)()});null!=i&&(o.geometryRepresentation=i.visualElement,o.geometryRepresentation instanceof OutlineVisualElement_j&&this.addHandles([o.geometryRepresentation.events.on("attachment-origin-changed",(()=>{o.object.isDraped||this._updateMoveManipulation(t)})),(0,reactiveUtils/* watch */.wB)((()=>o.object.isDraped),(()=>this._updateMoveManipulation(t)))],MoveTool3D_J),this.addHandles(i,MoveTool3D_J))}}_updateMoveManipulationAngle(t){this._moveManipulation&&(this._moveManipulation.angle=geometryUtils_r(manipulatedObjectUtils_t(t.object)))}_updateMoveManipulation(t){const o=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,0,this.view.spatialReference);let e=0,i=!1;const n=this._moveManipulation;if(n){for(const n of t){if(!n.object.visible)continue;this.enableZ&&manipulatorUtils_o(n.object.operations,n.object.elevationInfo)&&(i=!0);const t=n.geometryRepresentation instanceof OutlineVisualElement_j&&!n.object.isDraped?n.geometryRepresentation.attachmentOrigin:n.object.origin;if(null!=t){const{x:i,y:n,z:s}=t;o.x+=i,o.y+=n,s&&(o.z??=0,o.z+=s),e++}}e>0?(o.x/=e,o.y/=e,o.z??=0,o.z/=e,n.location=o,n.xyManipulation.available=!0,n.xyAxisManipulation.available=!0,n.zManipulation.available=i):n.available=!1}}_buildDragEventPipeline(t,o,e,i,n,s){const a=[],l=[];let r=null,p=null;const c=()=>{for(const t of a)t.dragging=!1;a.length=0,l.length=0,r=null,p=null,this._moveManipulation&&(this._moveManipulation.interactive=!0)};if(1===t.length&&o===MoveManipulation_c.XY){const o=t[0].object;({steps:i,cancel:n}=this._buildSnappingPipelineSteps(o,o.elevationInfo,i,n,s))}return n=n.next((t=>p?.(t))).next((()=>(l.length&&this.events.emit("move-stop",new MoveTool3D_q(l)),this.destroyed||c(),null))),{steps:i=i.next((o=>{if("start"===o.action){a.length=0,l.length=0;for(const o of t)o.dragging||!o.manipulationXY?.hasManipulator(e)&&o.manipulationXY?.grabbing||(a.push(o),l.push(o.object),o.dragging=!0);if(0!==l.length&&(this._moveManipulation&&(this._moveManipulation.interactive=!1),r=(0,dragEventPipeline/* dragManipulatedObjectMany */.bl)(l),p=(0,dragEventPipeline/* resetManipulatedObjectMany */.mc)(l),this._emitRecordUndo(),this.events.emit("move-start",new MoveTool3D_L(l)),this.destroyed))return null}return 0!==l.length?o:null})).next((t=>r?.(t))).next((t=>(this._updateMoveTooltip(o,t),t))).next((t=>{switch(t.action){case"start":case"update":if(t.translationX||t.translationY||t.translationZ){const o=this.view.toScreen(t.mapStart),e=this.view.toScreen(t.mapEnd);if(!o||!e)return null;const i=e.x-o.x,n=e.y-o.y;if(this.events.emit("move",new MoveTool3D_N(i,n,l)),this.destroyed)return null}break;case"end":if(this.events.emit("move-stop",new MoveTool3D_q(l)),this.destroyed)return null;c()}return null})),cancel:n}}_connectTooltips(){let t;if(this.removeHandles(MoveTool3D_K),this._shouldShowMovePointTooltip){const o=this.objects.at(0),{events:e}=this;this._movePointTooltipInfo??=new MovePointTooltipInfo/* MovePointTooltipInfo */.F({viewType:this.view.type,sketchOptions:this.sketchOptions});const i={onBeforeUpdate:()=>this.endDrag(),onMoveStart:()=>{this._emitRecordUndo(),e.emit("move-start",new MoveTool3D_L([o]))},onMove:()=>e.emit("move",new MoveTool3D_N(0,0,[o])),onMoveStop:()=>e.emit("move-stop",new MoveTool3D_q([o])),onRotateStart:()=>{},onRotate:()=>{},onRotateStop:()=>{},onScaleStart:()=>{},onScale:()=>{},onScaleStop:()=>{}};t=tooltipUtils3D_m(this.tooltip,o,(()=>({sketchOptions:this.sketchOptions,activeTooltipInfo:this._movePointTooltipInfo,callbacks:i})))}else t=(0,reactiveUtils/* watch */.wB)((()=>this.sketchOptions.tooltips.effectiveEnabled?this._latestTooltipInfo:null),(t=>{this.tooltip.info=t}),reactiveUtils/* syncAndInitial */.pc);this.addHandles(t,MoveTool3D_K)}_showTooltip(t){this._shouldShowMovePointTooltip||this._updateMoveTooltip(t)}_hideTooltip(){this._shouldShowMovePointTooltip||(this.tooltip?.clear(),this._latestTooltipInfo=null)}_updateMoveTooltip(t,o){if(this._shouldShowMovePointTooltip)return;const{sketchOptions:e,autoLengthMeasurementUtils:i}=this;switch(t){case MoveManipulation_c.XY:this._latestTooltipInfo=this._translateTooltipInfo??=new TranslateTooltipInfo/* TranslateTooltipInfo */.M({sketchOptions:e}),tt(this._latestTooltipInfo,o,((t,o)=>i.autoDistanceBetweenPoints2D(MoveTool3D_W(t),MoveTool3D_W(o))));break;case MoveManipulation_c.XY_AXIS:this._latestTooltipInfo=this._translateXYTooltipInfo??=new TranslateXYTooltipInfo_i({sketchOptions:e}),tt(this._latestTooltipInfo,o,((t,e)=>(0,quantityUtils/* scale */.hs)(i.autoDistanceBetweenPoints2D(MoveTool3D_W(t),MoveTool3D_W(e)),moveUtils_a(o))));break;case MoveManipulation_c.Z:this._latestTooltipInfo=this._translateZTooltipInfo??=new TranslateZTooltipInfo_i({sketchOptions:e}),tt(this._latestTooltipInfo,o,euclideanLengthMeasurementUtils/* verticalSignedDistanceBetweenPoints */.e5)}this._latestTooltipInfo.sketchOptions=e}_emitRecordUndo(){const t=this.objects.toArray().map((t=>t.createUndoRecord?.())).filter(arrayUtils/* isSome */.Ru);t.length>0&&this.events.emit("record-undo",{updates:t})}_buildSnappingPipelineSteps(t,o,e,i,n){const s=manipulatedObjectUtils_t(t);if(null==s||"point"!==s.type&&"mesh"!==s.type)return{steps:e,cancel:i};const a=("point"===s.type?s:s.origin).clone(),l=new SnappingContext/* SnappingContext */.e({elevationInfo:o,pointer:n,editGeometryOperations:EditGeometryOperations/* EditGeometryOperations */.p.fromGeometry(a,this.view.state.viewingMode),visualizer:new SnappingVisualizer3D_R,excludeFeature:t.graphic}),r=this.snappingManager,{snappingStep:p,cancelSnapping:c}=(0,SnappingDragPipelineStep/* createSnapDragEventPipelineStep */.L)({snappingContext:l,snappingManager:r,updatingHandles:this._updatingHandles});return i=i.next(c),{steps:e=e.next((o=>{a.z=(0,elevationInfoUtils/* getConvertedElevation */.wS)(this.view,a,t.elevationInfo,{mode:"absolute-height",offset:0});return{...o,snapOrigin:l.coordinateHelper.pointToVector(a)}})).next(...p),cancel:i}}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],MoveTool3D_Q.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],MoveTool3D_Q.prototype,"autoLengthMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"objects",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],MoveTool3D_Q.prototype,"enableZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,type:SketchOptions/* default */.A})],MoveTool3D_Q.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],MoveTool3D_Q.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"_latestTooltipInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"_shouldShowMovePointTooltip",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],MoveTool3D_Q.prototype,"activeTooltipInfo",null),MoveTool3D_Q=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.move.MoveTool3D")],MoveTool3D_Q);const MoveTool3D_W=(0,ensureType/* ensureType */.dp)(Point/* default */.A);class ${constructor(t){this.object=t,this.geometryRepresentation=null,this.manipulationXY=null,this.dragging=!1}}function tt(t,o,e){if(null==o||"end"===o.action)return void(t.distance=quantityUtils/* zeroMeters */.r7);const{mapStart:i,mapEnd:n}=o,s=e(i,n);t.distance=null!=s?s:quantityUtils/* zeroMeters */.r7}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polyline.js
var Polyline = __webpack_require__(42238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/utils.js
var utils = __webpack_require__(55056);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/geodesicUtils.js
var geodesicUtils = __webpack_require__(22256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/OffsetEdgeVertex.js
var OffsetEdgeVertex = __webpack_require__(12677);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/edgeOffsetUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function edgeOffsetUtils_H(e,r,o){const t="on-the-ground"===o.mode?OffsetEdgeVertex/* PlaneType */.B.XY:OffsetEdgeVertex/* PlaneType */.B.XYZ;return new OffsetEdgeVertex/* OffsetEdgeVertex */.L(e,t,r,0)}function edgeOffsetUtils_w(e,r,o){const t=(0,vec3f64/* create */.vt)();if(!e.renderCoordsHelper.toRenderCoords(r,t))return null;const n=edgeOffsetUtils_T(e,r,(0,plane/* getNormal */.Qj)(o.plane)),i=edgeOffsetUtils_T(e,r,o.edgeDirection);if(null==n||null==i)return null;const c=(0,vec32.h)((0,vec3f64/* create */.vt)(),n,i);return (0,plane/* fromPositionAndNormal */.O_)(t,c,(0,plane/* create */.vt)())}function edgeOffsetUtils_T(e,r,o){const t=(0,dehydratedPoint/* makeDehydratedPoint */.T)(r.x+o[0],r.y+o[1],r.z+o[2],r.spatialReference),n=(0,vec3f64/* create */.vt)(),s=(0,vec3f64/* create */.vt)();return e.renderCoordsHelper.toRenderCoords(r,n)&&e.renderCoordsHelper.toRenderCoords(t,s)?(0,vec32.E)(s,n,s):null}function edgeOffsetUtils_b(e,r,o){const t=(0,plane/* getNormal */.Qj)(e),c=(0,vec32.E)((0,vec3f64/* create */.vt)(),r,o),l=(0,vec32.h)((0,vec3f64/* create */.vt)(),c,t),a=(0,vec32.h)((0,vec3f64/* create */.vt)(),c,l);return (0,mat4f64/* fromValues */.fA)(c[0],c[1],c[2],0,l[0],l[1],l[2],0,a[0],a[1],a[2],0,0,0,0,1)}function edgeOffsetUtils_q(e,r,t){const n=t.projectToRenderScreen(e,(0,screenUtils/* createRenderScreenPointArray3 */.r_)()),s=t.projectToRenderScreen(r,(0,screenUtils/* createRenderScreenPointArray3 */.r_)());return null!=n&&null!=s?(0,vec32.k)((0,vec32.d)(n,n,s)):0}function edgeOffsetUtils_A(e,o,t,n){const{elevationInfo:s,operations:i}=t;if(!i||!e)return null;const c=n.manipulator.elevationAlignedLocation,l=(0,elevationInfoUtils/* getZForElevationMode */.id)(c,o,s),a=o.sceneIntersectionHelper.intersectElevationFromScreen((0,screenUtils/* createScreenPointArray */.gs)(e.x,e.y),s,l);return a&&(0,projectionUtils.projectPoint)(a,a,i.data.spatialReference)?a:null}function edgeOffsetUtils_E(r,o,n,{data:{coordinateHelper:s,spatialReference:i}}){const c=(0,quantityUtils/* valueInUnit */.l3)(r,"meters"),l=(0,unitUtils/* getMetersPerUnitForSR */.GA)(i),m=Math.sign(c*n.selectedArrow),h=(0,geodesicUtils/* geodesicCompatibleSpatialReference */.Xn)(i),R=(0,plane/* getNormal */.Qj)(n.plane),v=s.pointToXYZ(o),x=(0,vec3f64/* create */.vt)();(0,vec32.b)(x,v,R,m*(edgeOffsetUtils_I/l));const C=c*n.selectedArrow/l;if(!h||!(0,projectVectorToVector/* projectVectorToVector */.F)(v,i,v,h)||!(0,projectVectorToVector/* projectVectorToVector */.F)(x,i,x,h))return C;const U=new geodesicUtils/* InverseGeodeticSolverResult */.Zj;if((0,geodesicUtils/* inverseGeodeticSolver */._3)(U,v,x,h),(0,geodesicUtils/* directGeodeticSolver */.vN)(x,v,U.azimuth,c,h),!(0,projectVectorToVector/* projectVectorToVector */.F)(x,h,x,i))return C;const H=x[0]-o.x,w=x[1]-o.y,T=Math.sqrt(H*H+w*w)*m,[b,q]=R,A=Math.sqrt(b*b+q*q);return 0===A?0:T/A}const edgeOffsetUtils_I=10;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/fields/fields.js + 4 modules
var fields = __webpack_require__(69733);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/ReshapeEdgeOffsetTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ReshapeEdgeOffsetTooltipInfo_a=class extends SketchTooltipInfo/* SketchTooltipInfo */.w{constructor(t){super(t),this.type="reshape-edge-offset",this.distance=(0,fields/* makeRelativeDistanceField */.Y3)({lockable:!1}),this.area=(0,fields/* makeAreaField */.Am)({visible:!1}),this.totalLength=(0,fields/* makeTotalLengthField */.fr)({visible:!1})}get allFields(){return[this.distance,this.area,this.totalLength]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeEdgeOffsetTooltipInfo_a.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeEdgeOffsetTooltipInfo_a.prototype,"distance",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeEdgeOffsetTooltipInfo_a.prototype,"area",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeEdgeOffsetTooltipInfo_a.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeEdgeOffsetTooltipInfo_a.prototype,"allFields",null),ReshapeEdgeOffsetTooltipInfo_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.ReshapeEdgeOffsetTooltipInfo")],ReshapeEdgeOffsetTooltipInfo_a);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/SelectedVertexTooltipInfo.js
var SelectedVertexTooltipInfo = __webpack_require__(45165);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/reshapeTooltipUtils3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function reshapeTooltipUtils3D_O(t,e){const o=e?.type;return{edgeOffset:new ReshapeEdgeOffsetTooltipInfo_a({sketchOptions:t,viewType:o}),movePoint:new MovePointTooltipInfo/* MovePointTooltipInfo */.F({sketchOptions:t,viewType:o}),selectedVertex:new SelectedVertexTooltipInfo/* SelectedVertexTooltipInfo */.d({sketchOptions:t,viewType:o}),translate:new TranslateTooltipInfo/* TranslateTooltipInfo */.M({sketchOptions:t,viewType:o}),translateXY:new TranslateXYTooltipInfo_i({sketchOptions:t,viewType:o}),translateZ:new TranslateZTooltipInfo_i({sketchOptions:t,viewType:o})}}function reshapeTooltipUtils3D_b(e,o,s){function r(){const t=s(),e=t.sketchOptions.tooltips.effectiveEnabled?t.activeTooltipInfo:null;return{...t,activeTooltipInfo:e}}let c=!1;function p(t){c||(c=!0,t(),c=!1)}function m(t){p((()=>{reshapeTooltipUtils3D_M(o,t),e.info=t.activeTooltipInfo}))}return (0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)(r,m,reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>{const t=r(),{activeTooltipInfo:e}=t;if(e&&"key"in e)return{context:t,activeTooltipInfo:e,key:e.key,geometry:manipulatedObjectUtils_t(o)}}),((t,e)=>{t&&e&&e.key!==t.key&&p((()=>reshapeTooltipUtils3D_D(o,t.context)))}),reactiveUtils/* sync */.OH),o.on("committed",(()=>m(r()))),(0,tooltipCommonUtils/* connectPasteEvent */.sZ)(e,{onBeforePaste:()=>{c=!0},onAfterPaste:()=>{reshapeTooltipUtils3D_D(o,r()),c=!1}})])}function reshapeTooltipUtils3D_D(t,{activeTooltipInfo:e,selectedVertexManipulatorInfo:o,callbacks:n}){if(!e)return;n.onBeforeReshape();const i=manipulatedObjectUtils_t(t);switch(i?.type){case"mesh":"move-point"===e.type&&tooltipUtils3D_d(e,i.origin,t,n);break;case"point":"move-point"===e.type&&tooltipUtils3D_d(e,i,t,n);break;case"polyline":case"polygon":"selected-vertex"===e.type&&reshapeTooltipUtils3D_L(e,o,t,n)}}function reshapeTooltipUtils3D_L(t,e,o,n){if(!e)return;const{dx:i,dy:a,dz:s}=(0,tooltipCommonUtils/* getXYZDeltasFromTooltipInfo */.mu)(t,e.manipulator.location);0===i&&0===a&&0===s||(n.onReshapeStart(),o.operations?.moveVertices([e.handle],i,a,s,editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP),n.onReshape(),n.onReshapeStop())}function reshapeTooltipUtils3D_M(t,e){const{activeTooltipInfo:o,selectedVertexManipulatorInfo:n,sketchOptions:i}=e;if(o)switch(o.sketchOptions=i,o?.type){case"move-point":tooltipUtils3D_h(o,t);break;case"selected-vertex":reshapeTooltipUtils3D_U(o,n,t,e)}}function reshapeTooltipUtils3D_U(t,e,o,{automaticAreaMeasurementUtils:n,automaticLengthMeasurementUtils:i}){if(!t||"selected-vertex"!==t.type)return;const a=e?.manipulator.location;t.setLocationFromPoint(a),tooltipUtils3D_y(t,a,o);const s=o.operations?.data.geometry;switch(s?.type){case"polygon":t.geometryType="polygon",t.totalLength.visible=!1,t.area.actual=n.autoArea2D(s);break;case"polyline":t.geometryType="polyline",t.totalLength.actual=i.autoLength2D(s),t.area.visible=!1}}const reshapeTooltipUtils3D_x=(0,ensureType/* ensureType */.dp)(Point/* default */.A);function reshapeTooltipUtils3D_P(t,o,{sketchOptions:n,tooltipInfos:i,automaticLengthMeasurementUtils:a}){let s=null;switch(t){case MoveManipulation_c.XY:s=i.translate,reshapeTooltipUtils3D_A(s,o,((t,e)=>a.autoDistanceBetweenPoints2D(reshapeTooltipUtils3D_x(t),reshapeTooltipUtils3D_x(e))));break;case MoveManipulation_c.XY_AXIS:s=i.translateXY,reshapeTooltipUtils3D_A(s,o,((t,n)=>(0,quantityUtils/* scale */.hs)(a.autoDistanceBetweenPoints2D(reshapeTooltipUtils3D_x(t),reshapeTooltipUtils3D_x(n)),moveUtils_a(o))));break;case MoveManipulation_c.Z:s=i.translateZ,reshapeTooltipUtils3D_A(s,o,euclideanLengthMeasurementUtils/* verticalSignedDistanceBetweenPoints */.e5)}return s.sketchOptions=n,s}function reshapeTooltipUtils3D_A(t,e,n){if(null!=e&&"end"!==e.action){const{mapStart:i,mapEnd:a}=e,s=n(i,a);t.distance=null!=s?s:quantityUtils/* zeroMeters */.r7}else t.distance=quantityUtils/* zeroMeters */.r7}function reshapeTooltipUtils3D_S({operations:t},n,{sketchOptions:i,tooltipInfos:a,automaticAreaMeasurementUtils:s,automaticLengthMeasurementUtils:r}){const l=a.edgeOffset;if(l.distance.committed=null,null!=n&&null!=n.signedDistance&&"end"!==n.action&&null!=t){const o=t.data.coordinateHelper,{start:i,end:a}=n.operation.clampedStartAndEnd(n.mapEnd),s=r.autoDistance2D(i,a,o.spatialReference),c=Math.sign(n.signedDistance*n.operation.selectedArrow);l.distance.actual=null!=s?(0,quantityUtils/* scale */.hs)(s,c):null}else l.distance.actual=quantityUtils/* zeroMeters */.r7;const c=t?.data.geometry;switch(l.area.actual=null,l.area.visible=!1,l.totalLength.actual=null,l.totalLength.visible=!1,c?.type){case"polygon":l.area.actual=s.autoArea2D(c),l.area.visible=!0;break;case"polyline":l.totalLength.actual=r.autoLength2D(c),l.totalLength.visible=!0}return l.sketchOptions=i,l}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/input/IViewEvents.js
var IViewEvents = __webpack_require__(37174);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/keybindings.js
var keybindings = __webpack_require__(70384);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeOperation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Ie=Symbol();let Se=class extends Accessor/* default */.A{get _operations(){return this.object.operations}constructor(e){super(e),this._selectedIndex=0,this._manipulatorHandles=new Handles/* default */.A,this._manipulatorInfos=[],this._numGrabbing=0,this._numDragging=0,this._reshapeEventState=Ue.NONE,this._pendingEdgeOffsetInfo=null,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._recreatingManipulators=!1,this._settings=new settings_j({getTheme:()=>this.view.effectiveTheme}),this.events=new Evented/* default */.A,this.activeTooltipInfo=null,this._vertexLaserLineVisualElement=null,this._tooltipCallbacks={onBeforeReshape:()=>this.tool.endDrag(),onReshapeStart:()=>this._updateEventState(Ue.RESHAPING),onReshape:()=>this.events.emit("reshape",{type:"reshape",object:this.object}),onReshapeStop:()=>this._updateEventState(Ue.NONE,{forceEnd:!0}),onMoveStart:()=>this._updateEventState(Ue.MOVING),onMove:()=>this.events.emit("move",{type:"move",object:this.object,dx:0,dy:0}),onMoveStop:()=>this._updateEventState(Ue.NONE,{forceEnd:!0})}}initialize(){const{view:e}=this,t=this._settings.manipulators,i=t.vertex;this.tooltipInfos=reshapeTooltipUtils3D_O(this._sketchOptions,e),this._vertexManipulatorMaterial=manipulatorUtils_f((0,colorUtils/* unitRGBAFromColor */.QP)(i.color),i.renderOccluded),this._vertexManipulatorOutlineMaterial=manipulatorUtils_h((0,colorUtils/* unitRGBAFromColor */.QP)(i.outlineColor),i.renderOccluded),this._vertexManipulatorHoverOutlineMaterial=manipulatorUtils_h((0,colorUtils/* unitRGBAFromColor */.QP)(i.hoverOutlineColor),i.renderOccluded);const a=t.edge;this._edgeManipulatorMaterial=manipulatorUtils_f((0,colorUtils/* unitRGBAFromColor */.QP)(a.color),a.renderOccluded),this._edgeManipulatorOutlineMaterial=manipulatorUtils_h((0,colorUtils/* unitRGBAFromColor */.QP)(a.outlineColor),a.renderOccluded);const o=t.edgeOffset;this._edgeOffsetManipulatorMaterial=manipulatorUtils_f((0,colorUtils/* unitRGBAFromColor */.QP)(o.color),o.renderOccluded,!1),this._edgeOffsetManipulatorHoverMaterial=manipulatorUtils_f((0,colorUtils/* unitRGBAFromColor */.QP)(o.hoverColor),o.renderOccluded,!1);const s=t.selected;this._selectedManipulatorMaterial=manipulatorUtils_f((0,colorUtils/* unitRGBAFromColor */.QP)(s.color),s.renderOccluded),this._selectedManipulatorOutlineMaterial=manipulatorUtils_h((0,colorUtils/* unitRGBAFromColor */.QP)(s.outlineColor),s.renderOccluded),this._selectedManipulatorHoverOutlineMaterial=manipulatorUtils_h((0,colorUtils/* unitRGBAFromColor */.QP)(s.hoverOutlineColor),s.renderOccluded),this.tooltip=(0,tooltipCommonUtils/* makeTooltip */.A)((()=>({view:e,options:this._sketchOptions.tooltips}))),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>{const e=this._settings.manipulators;return{vertexSettings:e.vertex,edgeSettings:e.edge,edgeOffsetSettings:e.edgeOffset,selectedSettings:e.selected}}),(({vertexSettings:e,edgeSettings:t,edgeOffsetSettings:i,selectedSettings:n})=>{e.applyColor(this._vertexManipulatorMaterial),e.applyOutline(this._vertexManipulatorOutlineMaterial),e.applyHoverOutline(this._vertexManipulatorHoverOutlineMaterial),t.applyColor(this._edgeManipulatorMaterial),t.applyOutline(this._edgeManipulatorOutlineMaterial),i.applyColor(this._edgeOffsetManipulatorMaterial),i.applyHover(this._edgeOffsetManipulatorHoverMaterial),n.applyColor(this._selectedManipulatorMaterial),n.applyOutline(this._selectedManipulatorOutlineMaterial),n.applyHoverOutline(this._selectedManipulatorHoverOutlineMaterial)})),(0,reactiveUtils/* watch */.wB)((()=>this.object.visible),(e=>{for(const t of this._manipulatorInfos)t.manipulator.available=e,Te(t)&&(t.edgeManipulator.available=e)})),(0,reactiveUtils/* watch */.wB)((()=>this._numGrabbing+this._numDragging===0),(e=>this._toggleAutoHideManipulators(e))),(0,reactiveUtils/* watch */.wB)((()=>({labels:this._segmentLabels,enabled:this._sketchOptions.labels.enabled,edgeOffsetEnabled:this.enableEdgeOffset})),(({labels:e,enabled:t,edgeOffsetEnabled:i})=>{null!=e&&(e.visible=t,e.edgeDistance=i?"far":"default")}),reactiveUtils/* initial */.Vh),reshapeTooltipUtils3D_b(this.tooltip,this.object,(()=>this._tooltipsContext)),(0,reactiveUtils/* watch */.wB)((()=>this.tooltip.mode),((e,t)=>{"input"===t&&"input"!==e&&this._resetTooltip()})),(0,reactiveUtils.on)((()=>this._operations),"vertex-update",(e=>this._updateManipulatorPositions(e.vertices)),{onListenerAdd:()=>this._recreateManipulators()}),(0,reactiveUtils.on)((()=>this._operations?.data),"change",(e=>{"undo"!==e.operation&&"redo"!==e.operation||this._recreateManipulators()}))])}destroy(){this._removeManipulators(),this._updatingHandles.destroy(),this._segmentLabels=(0,maybe/* destroyMaybe */.pR)(this._segmentLabels),this.tooltip=(0,maybe/* destroyMaybe */.pR)(this.tooltip)}get updating(){return this._updatingHandles.updating}get manipulators(){return this.tool.manipulators}get view(){return this.tool.view}get automaticAreaMeasurementUtils(){return this.tool.automaticAreaMeasurementUtils}get automaticLengthMeasurementUtils(){return this.tool.automaticLengthMeasurementUtils}get object(){return this.tool.object}get enableZShape(){return this.tool.enableZShape}get enableDeleteVertices(){return this.tool.enableDeleteVertices}get enableZVertex(){return this.tool.enableZVertex}get autoHideManipulators(){return this.tool.autoHideManipulators}get enableMoveObject(){return this.tool.enableMoveObject}get enableMidpoints(){return this.tool.enableMidpoints}get enableEdgeOffset(){return this.tool.enableEdgeOffset}get _sketchOptions(){return this.tool.sketchOptions}get _accentColor(){return this.view.effectiveTheme.accentColor}enterInputModeIfAvailable(e){return"key-down"===e.type&&e.key===keybindings/* tooltipKeys */.ac.enterInputMode&&("reshape-edge-offset"===this.activeTooltipInfo?.type?this._enterInputModeDuringEdgeOffset(e):!!(0,tooltipCommonUtils/* enterInputModeIfAvailable */.wG)(e,this.tooltip)&&(this.tool.endDrag(),!0))}removeSelectedVertices(){const e=this._manipulatorInfos.filter((e=>e.manipulator.selected&&"vertex"===e.type));return this._removeVertices(e),e.length}onManipulatorSelectionChanged(){this.events.emit("manipulators-changed")}_removeManipulators(){this._manipulatorHandles.removeAll(),this._moveManipulation=(0,maybe/* destroyMaybe */.pR)(this._moveManipulation),this._objectMoveManipulation=(0,maybe/* destroyMaybe */.pR)(this._objectMoveManipulation),this.manipulators.removeAll(),this._manipulatorInfos=[],this._numGrabbing=0,this._numDragging=0}_createManipulators(e){if(null==this._operations)return;const t=this.object.elevationInfo;for(const i of this._operations.data.components){const n=e?.byComponentIndex.get(i.index);for(const e of i.vertices){const i=n?.has(e.index);this._createVertexOrEdgeManipulator(e,t,i)}for(const e of i.edges)this._createVertexOrEdgeManipulator(e,t)}this._createObjectMoveManipulation(),this._createMoveManipulation(t),this._createVisualElements()}get canRedo(){return null!=this._operations&&this._operations.canRedo}get canUndo(){return null!=this._operations&&this._operations.canUndo}redo(){return this._operations?.redo()}undo(){return this.events.emit("undo"),this._operations?.undo()}_recreateManipulators(){if(!this._recreatingManipulators){if(this._recreatingManipulators=!0,this._removeManipulators(),this._resetTooltip(),this._operations&&this._segmentLabels?.context?.editGeometryOperations===this._operations||(this._segmentLabels=(0,maybe/* destroyMaybe */.pR)(this._segmentLabels)),this._createManipulators(),!this._segmentLabels&&this._operations){const e=this._sketchOptions.labels;this._segmentLabels=new SegmentLabels3D_a({context:{view:this.view,editGeometryOperations:this._operations,elevationInfo:this.object.elevationInfo,labelOptions:e,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils},visible:e.enabled})}this._recreatingManipulators=!1}}_perObjectManipulatorDragAction(e,t){if("end"===t.action)return t;let i=0;const n=[],a=this._manipulatorInfos.some((e=>"vertex"===e.type&&e.manipulator.selected)),o=e===Ce.SELECTED_OR_ALL&&a;for(const s of this._manipulatorInfos)"vertex"===s.type&&(s.manipulator.grabbing||o&&!s.manipulator.selected||n.push(s),i++);this._moveVertices(n,t);if(n.length===i){if(this._updateEventState(Ue.MOVING),this.destroyed)return t;this.events.emit("move",{type:"move",dx:t.screenDeltaX,dy:t.screenDeltaY,object:this.object})}else{if(this._updateEventState(Ue.RESHAPING),this.destroyed)return t;this.events.emit("reshape",{type:"reshape",object:this.object})}return t}_toggleAutoHideManipulators(e){this.autoHideManipulators&&(e?this.removeHandles(Ie):this.tool.manipulators.forEach((({manipulator:e})=>{const t=e.disableDisplay?.();t&&this.addHandles(t,Ie)})))}_isMultiVertexSelection(){return this._manipulatorInfos.reduce(((e,t)=>"vertex"===t.type&&t.manipulator.selected?e+1:e),0)>1}_perVertexManipulatorDragAction(e){if(this._updateEventState(Ue.RESHAPING),this.destroyed)return;const{mapDeltaX:t,mapDeltaY:i,mapDeltaZ:n}=e;if(!t&&!i&&!n)return;const a=[];for(const o of this._manipulatorInfos)"vertex"===o.type&&(o.manipulator.selected&&!o.manipulator.grabbing||o===e.info)&&a.push(o);this._moveVertices(a,e,editGeometry_interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS),this.events.emit("reshape",{type:"reshape",object:this.object})}_updateEventState(e,t={}){if(e===this._reshapeEventState)return!1;switch(e){case Ue.NONE:if(!t.forceEnd&&(0!==this._numGrabbing||0!==this._numDragging))return!1;switch(this._reshapeEventState){case Ue.MOVING:this.events.emit("move",{type:"move-stop",dx:0,dy:0,object:this.object});break;case Ue.RESHAPING:this.events.emit("reshape",{type:"reshape-stop",object:this.object})}break;case Ue.MOVING:switch(this._reshapeEventState){case Ue.NONE:this.events.emit("move",{type:"move-start",dx:0,dy:0,object:this.object});break;case Ue.RESHAPING:this.events.emit("reshape",{type:"reshape-stop",object:this.object}),this.destroyed||this.events.emit("move",{type:"move-start",dx:0,dy:0,object:this.object})}break;case Ue.RESHAPING:switch(this._reshapeEventState){case Ue.NONE:this.events.emit("reshape",{type:"reshape-start",object:this.object});break;case Ue.MOVING:this.events.emit("move",{type:"move-stop",dx:0,dy:0,object:this.object}),this.destroyed||this.events.emit("reshape",{type:"reshape-start",object:this.object})}}if(this.destroyed)return!1;const i=this._reshapeEventState!==e;return this._reshapeEventState=e,i}_createObjectMoveManipulation(){const{tool:e,view:t,object:i,_operations:n}=this;if(n){if(this._objectMoveManipulation=new MoveXYObjectManipulation_l({tool:e,view:t,object:i}),this.enableMoveObject){let e=null;this._manipulatorHandles.add(this._objectMoveManipulation.createDragPipeline(((t,i,a)=>{i.next((e=>this._trackNumDragging(e))).next((t=>("start"===t.action&&(e=n.createUndoGroup()),t))).next((e=>this._perObjectManipulatorDragAction(Ce.ALL,e))).next((e=>(this._updateTranslateObjectTooltip(MoveManipulation_c.XY,e),e))).next((t=>{"end"===t.action&&(this._resetTooltip(),e=(0,maybe/* removeMaybe */.xt)(e))})),a.next((()=>this._onDragCancel(!0,(()=>e=(0,maybe/* removeMaybe */.xt)(e)))))}))),this._objectMoveManipulation.forEachManipulator((e=>this._manipulatorHandles.add(this._watchAndUpdateGrabState(e,!1))))}else this._objectMoveManipulation.forEachManipulator((e=>{e.grabbable=!1,e.cursor=null}));this._objectMoveManipulation.forEachManipulator((e=>this._manipulatorHandles.add(e.events.on("immediate-click",(e=>{this._manipulatorInfos.some((e=>e.manipulator.selected))?this._clearSelection():this.events.emit("immediate-click",{...e,object:this.object}),e.stopPropagation()})))))}}_createMoveManipulation(e){const{object:t,tool:i,view:n,_operations:a}=this;if(!a)return;this._moveManipulation=new MoveManipulation_u({tool:i,view:n,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZShape&&manipulatorUtils_o(t.operations,t.elevationInfo),snapToScene:!1,radius:MoveManipulation_u.radiusForSymbol(t.graphic?.symbol)}),this._moveManipulation.forEachManipulator((e=>this.addHandles([e.events.on("immediate-click",(t=>{this._moveManipulation.zManipulation.hasManipulator(e)||this._manipulatorInfos.some((e=>e.manipulator.selected))||this.events.emit("immediate-click",{...t,object:this.object}),t.stopPropagation()})),this._watchAndUpdateGrabState(e,!1)])));const o=e=>t=>{this.addHandles([t.events.on("focus-changed",(({action:t})=>{"focus"===t?this._updateTranslateTooltip(e):this._resetTooltip()}))])};this._moveManipulation.xyManipulation.forEachManipulator(o(MoveManipulation_c.XY)),this._moveManipulation.xyAxisManipulation.forEachManipulator(o(MoveManipulation_c.XY_AXIS)),this._moveManipulation.zManipulation.forEachManipulator(o(MoveManipulation_c.Z)),this._moveManipulation.elevationInfo={mode:"absolute-height",offset:0};const s=a.data.spatialReference;this.addHandles([this._moveManipulation.createDragPipeline(((n,o,s,r,l)=>{const{snappingStep:p,cancelSnapping:d}=(0,SnappingDragPipelineStep/* createSnapDragEventPipelineStep */.L)({predicate:e=>!!e.info,snappingManager:i.snappingManager,snappingContext:new SnappingContext/* SnappingContext */.e({editGeometryOperations:a,elevationInfo:e,pointer:l,excludeFeature:t.graphic,visualizer:new SnappingVisualizer3D_R}),updatingHandles:this._updatingHandles,useZ:!1});return r=r.next((e=>(this._onDragCancel(),e))).next(d),{steps:s=s.next((e=>this._trackNumDragging(e))).next((e=>{const t=this._manipulatorInfos.filter((e=>"vertex"===e.type&&e.manipulator.selected));return e.manipulatorType===ManipulatorType_A.TRANSLATE_XY&&1===t.length?{...e,info:t[0],snapOrigin:t[0].handle.pos}:e})).next((0,dragEventPipeline/* sceneSnappingAtLocation */.pg)(this.view,e,t.graphic??void 0)).next(...p).next((0,dragEventPipeline/* addMapDelta */.EX)()).next((e=>this._perObjectManipulatorDragAction(Ce.SELECTED_OR_ALL,e))).next((e=>(this._updateTranslateTooltip(n,e),e))),cancel:r}}),e,s,t.graphic),(0,reactiveUtils/* watch */.wB)((()=>t.visible),(()=>this._updateMoveManipulationPosition()),reactiveUtils/* initial */.Vh),t.on("committed",(()=>{this._recreatingManipulators||this._updateMoveManipulationPosition()})),(0,reactiveUtils/* watch */.wB)((()=>t.isDraped),(e=>{this._updateMoveManipulationPosition();const t="align-move-manipulation";e?this.addHandles(this.view.elevationProvider.on("elevation-change",(()=>this._updateMoveManipulationPosition())),t):this.removeHandles(t)}),reactiveUtils/* initial */.Vh)])}_createVisualElements(){const{object:e,view:t}=this,i=visualElementUtils_l({view:t,object:e,forEachManipulator:e=>{if(!this.destroyed&&!this._recreatingManipulators){this._objectMoveManipulation.forEachManipulator(e),this._moveManipulation.forEachManipulator(e);for(const t of this._manipulatorInfos)e(t.manipulator,ManipulatorType_A.TRANSLATE_XY)}},onManipulatorsChanged:e=>this.events.on("manipulators-changed",e)});null!=i&&(this._outlineVisualElement=i.visualElement instanceof OutlineVisualElement_j?i.visualElement:null);const n=this._outlineVisualElement;if(null!=n){const t=()=>{e.isDraped||this._updateMoveManipulationPosition()};this._manipulatorHandles.add((0,reactiveUtils.on)((()=>n.events),"attachment-origin-changed",t,{onListenerAdd:t}))}this._manipulatorHandles.add(i)}_createEdgeOffsetManipulator(e,t=this.object.elevationInfo){const i=this.view,n=this._operations;if(e.component.vertices.length<=2||!n)return null;const a=n.data.spatialReference,o=this._settings.manipulators.edgeOffset,r=o.size/2,l=r+o.collisionPadding,p=r/l,d=p/2,u=p*Math.sqrt(3)/2,{height:h,offset:c}=o,m=this._edgeOffsetManipulatorMaterial;if(!this._edgeOffsetManipulatorGeometryInside){const e=(0,GeometryUtil/* createExtrudedTriangle */._B)(m,u,d,d,h,c);this._edgeOffsetManipulatorGeometryInside=e}if(!this._edgeOffsetManipulatorGeometryOutside){const e=(0,GeometryUtil/* createExtrudedTriangle */._B)(m,-u,d,d,h,-c);this._edgeOffsetManipulatorGeometryOutside=e}const g=[new RenderObject_e(this._edgeOffsetManipulatorGeometryInside.instantiate(),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(this._edgeOffsetManipulatorGeometryInside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused),new RenderObject_e(this._edgeOffsetManipulatorGeometryOutside.instantiate(),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(this._edgeOffsetManipulatorGeometryOutside.instantiate({material:this._edgeOffsetManipulatorHoverMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused)],f=new ee({view:i,renderObjects:g,elevationInfo:"on-the-ground"!==t.mode||(0,utils/* isVolumetricSymbol */.$d)(this.object.graphic?.symbol)?{mode:"absolute-height",offset:0}:t,worldOriented:!1,focusMultiplier:1,radius:l,available:this.object.visible,collisionType:{type:"disc",direction:(0,vec3f64/* fromValues */.fA)(0,0,1)},collisionPriority:1,metadata:{deleting:!1},location:Ae(a)}),_=new ee({view:i,worldSized:!0,worldOriented:!1,available:this.object.visible,collisionPriority:-10,cursor:this.enableMoveObject?"move":"default",metadata:{deleting:!1},location:Ae(a)}),v={manipulator:f,handle:e,locationUpdateHandle:null,type:"edge",selectedIndex:0,edgeManipulator:_,visibilityHandle:null};this._autoHideEdgeOffsetManipulator(v,o.minSquaredEdgeLength);const M=()=>this._updateEdgeOffsetManipulator(v);M(),v.locationUpdateHandle=(0,handleUtils/* handlesGroup */.vE)([e.leftVertex,e.rightVertex].map((e=>{const t=this._getManipulatorInfoFromHandle(e);return t?.manipulator.events.on("location-update",M)})));const b=e=>{this._manipulatorInfos.some((e=>e.manipulator.selected))?this._clearSelection():this.events.emit("immediate-click",{...e,object:this.object}),e.stopPropagation()};return this._manipulatorHandles.add([v.locationUpdateHandle,this._watchAndUpdateGrabState(f,!0),this._watchAndUpdateGrabState(_,!0),(0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(f,this._createEdgeOffsetPipeline(v,t,n)),(0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(_,this._createEdgePipeline(v,t,n)),_.events.on("immediate-click",b),f.events.on("immediate-click",b),f.events.on("focus-changed",(()=>this._resetTooltip())),f.events.on("grab-changed",(({screenPoint:e,action:t})=>{v.grabMapPoint="start"===t?edgeOffsetUtils_A(e,this.view,this.object,v):null}))],f),this._manipulatorInfos.push(v),this.manipulators.addMany([f,_]),this.events.emit("manipulators-changed"),v}_autoHideEdgeOffsetManipulator(e,t){const i=e.manipulator,n=e.edgeManipulator,a=()=>{e.visibilityHandle=(0,maybe/* removeMaybe */.xt)(e.visibilityHandle);const a=this._getManipulatorInfoFromHandle(e.handle.leftVertex),o=this._getManipulatorInfoFromHandle(e.handle.rightVertex),l=null!=a&&null!=o&&edgeOffsetUtils_q(a.manipulator.renderLocation,o.manipulator.renderLocation,this.view.state.camera)<t;(!i.focused&&!n.focused||l)&&(i.grabbable=!l,n.grabbable=!l,e.visibilityHandle=(0,handleUtils/* handlesGroup */.vE)([i.disableDisplay(),(0,handleUtils/* makeHandle */.hA)((()=>{i.grabbable=!0,n.grabbable=this.enableMoveObject}))]))};this._manipulatorHandles.add([i.events.on("focus-changed",a),n.events.on("focus-changed",a),(0,handleUtils/* makeHandle */.hA)((()=>{(0,maybe/* removeMaybe */.xt)(e.visibilityHandle),n.metadata.deleting=!0,this.manipulators.remove(n)}))],i),a()}_updateEdgeOffsetManipulator(e){if(!this._operations)return;this._updateManipulatorPosition(e);const{coordinateHelper:t}=this._operations.data,i=edgeOffsetUtils_w(this.view,e.manipulator.elevationAlignedLocation,edgeOffsetUtils_H(t,e.handle,e.manipulator.elevationInfo)),n=this._getManipulatorInfoFromHandle(e.handle.leftVertex),a=this._getManipulatorInfoFromHandle(e.handle.rightVertex);if(null==n||null==a)return;const o=n.manipulator.renderLocation,s=a.manipulator.renderLocation,r=null!=i?edgeOffsetUtils_b(i,o,s):mat4f64/* IDENTITY */.zK;e.manipulator.modelTransform=r,e.edgeManipulator.elevationAlignedLocation=e.manipulator.elevationAlignedLocation,e.edgeManipulator.modelTransform=r;const l=(0,vec32.l)((0,vec32.d)(De,o,s))/2;e.edgeManipulator.collisionType={type:"line",paths:[[[-l,0,0],[l,0,0]]]}}_createEdgePipeline(e,t,i){return(n,a,o,s)=>{if("touch"===s){this._createEdgeOffsetPipeline(e,t,i)(n,a,o)}else if(this.enableMoveObject){const e=this.object.graphic,s=i.data.spatialReference,{elevationAlignedLocation:r}=n;a.next((e=>this._trackNumDragging(e))).next((0,dragEventPipeline/* dragAtLocation */.Tp)(this.view,r)).next(dragEventPipeline3D_M(this.view,r,t,s,e)).next((0,dragEventPipeline/* addScreenDelta */.sO)()).next((0,dragEventPipeline/* addMapDelta */.EX)()).next((e=>this._perObjectManipulatorDragAction(Ce.ALL,e))).next((e=>(this._updateTranslateObjectTooltip(MoveManipulation_c.XY,e),e))).next((e=>{"end"===e.action&&this._resetTooltip()})),o.next((()=>this._onDragCancel(!n.metadata.deleting)))}}}_createEdgeOffsetPipeline(e,t,i){return(n,a,o)=>{const s=this._pendingEdgeOffsetInfo;if(s?.manipulatorInfo===e&&"drag"!==s.mode)return void o.execute({action:"cancel"});this._clearSelection();const{initializeStep:r,cleanup:l}=this._initializeEdgeOffset(e,t,i,o),p=this._applyEdgeOffsetStep(e);a.next((e=>this._trackNumDragging(e))).next((0,dragEventPipeline/* dragAtLocation */.Tp)(this.view,n.elevationAlignedLocation)).next(r).next(dragEventPipeline3D_C(this.view)).next(dragEventPipeline3D_F(this.view,i.data.spatialReference)).next((0,dragEventPipeline/* addMapDelta */.EX)()).next(He()).next((e=>this._pendingEdgeOffsetInfo?e:p(e))).next((e=>{"end"!==e.action||this._pendingEdgeOffsetInfo||l()})),o.next((()=>{this._exitEdgeOffsetInputMode(),n.metadata.deleting||(l(),this._onDragCancel())}))}}_initializeEdgeOffset(e,t,i,n){const{view:a,object:o}=this,r=edgeOffsetUtils_H(i.data.coordinateHelper,e.handle,t),l=i.createUndoGroup(),p=edgeOffsetUtils_w(a,e.manipulator.elevationAlignedLocation,r);let u;this._splitEdgesBeforeEdgeOffset(e,r),this._selectEdgeOffsetArrow(e,r);const h=()=>{this._cleanEdgeOffsetCollapsedEdges(e,i),u=(0,maybe/* removeMaybe */.xt)(u)},c=this.events.on("undo",h);return u=(0,handleUtils/* handlesGroup */.vE)([this._initializeEdgeOffsetVisualElement(e,o,t,i),l,c,this._connectEdgeOffsetTooltip(e,r,i,(()=>{n.execute({action:"cancel"})}))]),{initializeStep:e=>null==r||null==p?(h(),null):{...e,operation:r,plane:p},cleanup:h}}_initializeEdgeOffsetVisualElement(e,t,i,a){const o=()=>new Polyline/* default */.A({paths:[[e.handle.leftVertex.pos,e.handle.rightVertex.pos]],spatialReference:a.data.spatialReference}),r=new OutlineVisualElement_j({view:this.view,isDraped:t.isDraped,geometry:o(),elevationInfo:i,width:this._settings.visualElements.lineObjects.outline.width,attached:!1,isDecoration:!0}),p=(0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* watch */.wB)((()=>({color:this._accentColor,draped:t.isDraped})),(({color:e,draped:t})=>{r.color=(0,colorUtils/* unitRGBAFromColor */.QP)(e),r.isDraped=t}),reactiveUtils/* syncAndInitial */.pc),t.on("committed",(()=>{r.geometry=o()})),(0,handleUtils/* destroyHandle */.DQ)(r)]);return r.attached=!0,p}_applyEdgeOffsetStep(e){return t=>(this.destroyed||null==t.operation||!this._operations||(this._updateEventState(Ue.RESHAPING),null==t.signedDistance?this._resetTooltip():((t.mapDeltaX||t.mapDeltaY||t.mapDeltaZ)&&(this._offsetEdge(e,t.operation,t.signedDistance),this.events.emit("reshape",{type:"reshape",object:this.object})),this._updateEdgeOffsetTooltip(t))),t)}_cleanEdgeOffsetCollapsedEdges(e,t){const i=e.handle.leftVertex.leftEdge?.leftVertex,n=e.handle.leftVertex,a=e.handle.rightVertex.rightEdge?.rightVertex,o=e.handle.rightVertex,s=t.data.coordinateHelper,r=this.view.pixelSizeAt(s.vectorToDehydratedPoint(n.pos),s.spatialReference),l=[];if(i&&s.distance(i.pos,n.pos)<Le){const e=this._getManipulatorInfoFromHandle(n);null!=e&&l.push(e)}if(s.distance(n.pos,o.pos)<r||a&&s.distance(a.pos,o.pos)<Le){const e=this._getManipulatorInfoFromHandle(o);null!=e&&l.push(e)}l.length&&this._removeVertices(l)}_enterInputModeDuringEdgeOffset(e){const t=this._findActiveEdgeOffsetManipulatorInfo();return!!t&&(!!(0,tooltipCommonUtils/* enterInputModeIfAvailable */.wG)(e,this.tooltip)&&(t.manipulator.dragging?(this._pendingEdgeOffsetInfo={manipulatorInfo:t,mode:"drag"},!0):(this._clearSelection(),this._pendingEdgeOffsetInfo={manipulatorInfo:t,mode:"hover"},this._connectEdgeOffsetTooltipOnHover(t),!0)))}_exitEdgeOffsetInputMode(){this.tooltip&&(this._pendingEdgeOffsetInfo=null,this._resetTooltip(),this.tooltip.exitInputMode())}_findActiveEdgeOffsetManipulatorInfo(){return this._manipulatorInfos.filter(Te).find((({manipulator:e})=>e.hovering||e.grabbing||e.dragging))}_connectEdgeOffsetTooltipOnHover(e){const{_operations:t,object:i}=this;if(!t)return;const{elevationInfo:n}=i,a=edgeOffsetUtils_H(t.data.coordinateHelper,e.handle,n);this._selectEdgeOffsetArrow(e,a),this.addHandles([this._initializeEdgeOffsetVisualElement(e,i,n,t),this._connectEdgeOffsetTooltip(e,a,t,(()=>{this.removeHandles(a),this._exitEdgeOffsetInputMode()}))],a)}_splitEdgesBeforeEdgeOffset(e,t){if(t.requiresSplitEdgeLeft){const t=this._getManipulatorInfoFromHandle(e.handle.leftVertex.leftEdge);null!=t&&this._splitEdgeManipulator(t,1)}if(t.requiresSplitEdgeRight){const t=this._getManipulatorInfoFromHandle(e.handle.rightVertex.rightEdge);null!=t&&this._splitEdgeManipulator(t,0)}}_selectEdgeOffsetArrow(e,t){const i=e.grabMapPoint??edgeOffsetUtils_A(this.view.inputManager?.latestPointerLocation,this.view,this.object,e);i&&t.selectArrowFromStartPoint(i)}_connectEdgeOffsetTooltip(e,t,i,n){const a=()=>this.tooltipInfos.edgeOffset.distance.actual,o=a=>{n(),queueMicrotask((()=>{this.view.focus();const n=i.createUndoGroup();this._tooltipCallbacks.onReshapeStart?.(),this._splitEdgesBeforeEdgeOffset(e,t),this._offsetEdge(e,t,edgeOffsetUtils_E(a,e.manipulator.location,t,i)),this._tooltipCallbacks.onReshape?.(),this._tooltipCallbacks.onReshapeStop?.(),this._cleanEdgeOffsetCollapsedEdges(e,i),n.remove()}))},r=()=>{const e=a();null!=e?o(e):n()};return (0,handleUtils/* handlesGroup */.vE)([(0,reactiveUtils/* when */.z7)((()=>this.tooltip&&!this.tooltip.focused),(()=>r()),reactiveUtils/* sync */.OH),this.tooltip.on("discard",n),this.tooltip.on("commit",(e=>{"commit-and-exit"===e.type&&r()}))])}_createVertexOrEdgeManipulator(e,t=this.object.elevationInfo,i=!1){const n=this.view,a=this._operations,o=this._settings;if(!a)return null;const r=a.data.type,l=a.data.spatialReference;if("edge"===e.type){if(this.enableEdgeOffset)return this._createEdgeOffsetManipulator(e,t);if(!this.enableMidpoints)return null}if(null==this._vertexManipulatorGeometry||null==this._vertexManipulatorOutlineGeometry){const{size:e,outlineSize:t}=we(o.manipulators.vertex);this._vertexManipulatorGeometry=(0,GeometryUtil/* createSphereGeometry */.CM)(this._vertexManipulatorMaterial,e,16,16),this._vertexManipulatorOutlineGeometry=(0,GeometryUtil/* createSphereGeometry */.CM)(this._vertexManipulatorOutlineMaterial,t,16,16)}if(null==this._edgeManipulatorGeometry||null==this._edgeManipulatorOutlineGeometry){const{size:e,outlineSize:t}=we(o.manipulators.edge);this._edgeManipulatorGeometry=(0,GeometryUtil/* createSphereGeometry */.CM)(this._edgeManipulatorMaterial,e,16,16),this._edgeManipulatorOutlineGeometry=(0,GeometryUtil/* createSphereGeometry */.CM)(this._edgeManipulatorOutlineMaterial,t,16,16)}const p="point"===r||"mesh"===r?[]:[new RenderObject_e(this._vertexManipulatorGeometry.instantiate(),Pe.Vertex|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._vertexManipulatorOutlineGeometry.instantiate(),Pe.Vertex|interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._vertexManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),Pe.Vertex|interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._vertexManipulatorGeometry.instantiate({material:this._selectedManipulatorMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Selected),new RenderObject_e(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorOutlineMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Selected|interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused),new RenderObject_e(this._vertexManipulatorOutlineGeometry.instantiate({material:this._selectedManipulatorHoverOutlineMaterial}),interactive_interfaces/* ManipulatorStateFlags */.p7.Selected|interactive_interfaces/* ManipulatorStateFlags */.p7.Focused)];this.enableMidpoints&&p.push(new RenderObject_e(this._edgeManipulatorGeometry.instantiate({material:this._vertexManipulatorMaterial}),Pe.Edge|interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._edgeManipulatorOutlineGeometry.instantiate({material:this._vertexManipulatorHoverOutlineMaterial}),Pe.Edge|interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._edgeManipulatorGeometry.instantiate(),Pe.Edge|interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected),new RenderObject_e(this._edgeManipulatorOutlineGeometry.instantiate(),Pe.Edge|interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|interactive_interfaces/* ManipulatorStateFlags */.p7.Unselected));const u=new ee({view:n,renderObjects:p,elevationInfo:t,focusMultiplier:1,touchMultiplier:1,available:this.object.visible,metadata:{deleting:!1},location:Ae(l)});u.selected=i,this._setTypeSpecificManipulatorSettings(u,e,t);const h="edge"===e.type?{manipulator:u,handle:e,locationUpdateHandle:null,type:"edge",selectedIndex:0}:{manipulator:u,handle:e,type:"vertex",selectedIndex:0};if(this._manipulatorInfos.push(h),this.manipulators.add(u),this._updateManipulatorPosition(h),"edge"===h.type){const e=[];for(const t of[h.handle.leftVertex,h.handle.rightVertex]){const i=this._getManipulatorInfoFromHandle(t);null!=i&&e.push(i.manipulator.events.on("location-update",(()=>this._updateManipulatorPosition(h))))}h.locationUpdateHandle=(0,handleUtils/* handlesGroup */.vE)(e),this._manipulatorHandles.add(h.locationUpdateHandle,u)}this._manipulatorHandles.add(this._watchAndUpdateGrabState(u,!0),u);const c=(0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(u,((e,i,o,s)=>{let r=null;const{snappingStep:p,cancelSnapping:u}=(0,SnappingDragPipelineStep/* createSnapDragEventPipelineStep */.L)({predicate:()=>!this._isMultiVertexSelection(),snappingManager:this.tool.snappingManager,snappingContext:new SnappingContext/* SnappingContext */.e({editGeometryOperations:a,elevationInfo:t,pointer:s,excludeFeature:this.object.graphic,visualizer:new SnappingVisualizer3D_R}),updatingHandles:this._updatingHandles,useZ:!1});o=o.next((t=>(this._onDragCancel(!e.metadata.deleting,(()=>r=(0,maybe/* removeMaybe */.xt)(r))),t))).next(u);const{elevationAlignedLocation:c}=e,m=this.object.graphic??void 0;i.next((e=>this._trackNumDragging(e))).next((e=>{if("start"===e.action&&a&&(r=a.createUndoGroup()),"edge"===h.type){const t=this._splitEdgeManipulator(h);return{...e,info:t,snapOrigin:t.handle.pos}}return{...e,info:h,snapOrigin:h.handle.pos}})).next((0,dragEventPipeline/* dragAtLocation */.Tp)(n,c)).next(dragEventPipeline3D_M(n,c,t,l,m)).next((0,dragEventPipeline/* sceneSnappingAtLocation */.pg)(n,t,m)).next(...p).next((0,dragEventPipeline/* addMapDelta */.EX)()).next((e=>{this._perVertexManipulatorDragAction(e),"end"===e.action&&(r=(0,maybe/* removeMaybe */.xt)(r)),this._resetTooltip()}))}));return this._manipulatorHandles.add([c,u.events.on("immediate-click",(e=>this._manipulatorClickCallback(e,h))),u.events.on("select-changed",(()=>{h.selectedIndex=++this._selectedIndex,this._updateMoveManipulationPosition(),this._resetTooltip()})),u.events.on("focus-changed",(()=>{this._resetTooltip()}))],u),this.events.emit("manipulators-changed"),h}_trackNumDragging(e){switch(e.action){case"start":this._numDragging++;break;case"end":this._numDragging--}return e}_onDragCancel(e=!0,t){switch(this._numDragging--,e&&this.undo(),this.tool.snappingManager?.doneSnapping(),this._resetTooltip(),this._reshapeEventState){case Ue.NONE:break;case Ue.MOVING:this.events.emit("move",{type:"move",dx:0,dy:0,object:this.object});break;case Ue.RESHAPING:this.events.emit("reshape",{type:"reshape",object:this.object})}t?.(),this.destroyed||this._updateEventState(Ue.NONE)}_setTypeSpecificManipulatorSettings(e,t,i){const n=this._settings;switch(t.type){case"vertex":{e.state=Pe.Vertex,e.selectable=!0,e.cursor="move",e.collisionPriority=2;const{size:t,collisionPadding:a}=n.manipulators.vertex;e.radius=t/2+a,e.elevationInfo=i;const o=this._operations?.data.type;e.interactive=null!=o&&"point"!==o&&"mesh"!==o;break}case"edge":{e.state=Pe.Edge,e.selectable=!1,e.cursor="copy",e.collisionPriority=-1;const{size:t,collisionPadding:a}=n.manipulators.edge;e.radius=t/2+a,e.elevationInfo="on-the-ground"!==i.mode||(0,utils/* isVolumetricSymbol */.$d)(this.object.graphic?.symbol)?{mode:"absolute-height",offset:0}:i;break}}}_watchAndUpdateGrabState(e,t){return e.events.on("grab-changed",(i=>{this._onGrabStateChanged(e,t,i.action,i.pointerType)}))}_onGrabStateChanged(e,t,i,n="mouse"){if(!this._recreatingManipulators){if("start"===i)t&&this._updateSelection(e),this._numGrabbing++;else if(this._numGrabbing--,this._updateEventState(Ue.NONE),this.destroyed)return;this._moveManipulation.interactive=!this._numGrabbing,("touch"!==n||this.enableEdgeOffset)&&(this._manipulatorInfos.forEach((e=>{const{manipulator:t}=e,i=this._operations?.data.type;t.interactive=t.grabbing||!this._numGrabbing&&null!=i&&"point"!==i&&"mesh"!==i,Te(e)&&(e.edgeManipulator.interactive=e.edgeManipulator.grabbing||!this._numGrabbing)})),this._objectMoveManipulation.forEachManipulator((e=>{e.interactive=e.grabbing||!this._numGrabbing})))}}_clearSelection(){for(const e of this._manipulatorInfos)e.manipulator.grabbing||(e.manipulator.selected=!1);this._pendingEdgeOffsetInfo=null}_updateSelection(e){e.grabbing&&!e.selected&&e.selectable&&(this._clearSelection(),e.selected=!0,this.events.emit("manipulators-changed"))}_removeManipulator(e){null!=e&&(e.manipulator.metadata.deleting=!0,this.manipulators.remove(e.manipulator),this._manipulatorHandles.remove(e.manipulator),(0,arrayUtils/* removeUnordered */.Xy)(this._manipulatorInfos,e),this.events.emit("manipulators-changed"),this._resetTooltip())}_getManipulatorInfoFromHandle(e){if(e)for(const t of this._manipulatorInfos)if(e===t.handle)return t;return null}_updateManipulatorPositions(e){for(const t of e)this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(t))}_updateManipulatorPosition(e){const t=this._operations;if(null!=e&&t)if("vertex"===e.type)e.manipulator.location=t.data.coordinateHelper.vectorToDehydratedPoint(e.handle.pos,Ge),e.manipulator.grabbing&&null!=this._vertexLaserLineVisualElement&&(this._vertexLaserLineVisualElement.visualElement.intersectsWorldUpAtLocation=e.manipulator.renderLocation);else if("edge"===e.type){const i=this._getManipulatorInfoFromHandle(e.handle.leftVertex),n=this._getManipulatorInfoFromHandle(e.handle.rightVertex);if(null==i||null==n)return;const a=i.manipulator,o=n.manipulator;if("on-the-ground"===e.manipulator.elevationInfo?.mode){const i=a.location,n=o.location,s=.5,r=i.x+s*(n.x-i.x),l=i.y+s*(n.y-i.y),p=i.hasZ&&n.hasZ?0:void 0;e.manipulator.location=(0,dehydratedPoint/* makeDehydratedPoint */.T)(r,l,p,t.data.spatialReference)}else (0,vec32.m)(De,a.renderLocation,o.renderLocation,.5),e.manipulator.renderLocation=De}}_splitEdgeManipulator(e,t=.5){const i=this._operations,n=i.splitEdge(e.handle,t).createdVertex;e.locationUpdateHandle=(0,maybe/* removeMaybe */.xt)(e.locationUpdateHandle);const a=this.object.elevationInfo;let o;this.enableEdgeOffset?(this._removeManipulator(e),o=this._createVertexOrEdgeManipulator(n)):(o=e,o.handle=n,o.type="vertex",this._setTypeSpecificManipulatorSettings(e.manipulator,e.handle,a)),n.leftEdge&&this._createVertexOrEdgeManipulator(n.leftEdge),n.rightEdge&&this._createVertexOrEdgeManipulator(n.rightEdge),this._updateManipulatorPosition(o),this.enableEdgeOffset||this._resetTooltip(),this._updateSelection(e.manipulator);const s=this._updateEventState(Ue.RESHAPING),r=i.data.coordinateHelper.vectorToArray(o.handle.pos),l=i.data.components.indexOf(n.component);return this.events.emit("vertex-add",{type:"vertex-add",object:this.object,vertices:[{coordinates:r,componentIndex:l,vertexIndex:n.index}],added:r}),s&&this._updateEventState(Ue.NONE),o}_updateMoveManipulationPosition(){const e=(0,vec32.i)(De,0,0,0);let t=0,i=!1,n=null,a=null;for(const r of this._manipulatorInfos)"vertex"===r.type&&(r.manipulator.selected?(t++,(0,vec32.f)(e,e,r.manipulator.renderLocation),null==n||r.selectedIndex>n.selectedIndex?(a=n,n=r):(null==a||r.selectedIndex>a.selectedIndex)&&(a=r)):i=!0);const o=this.object,s=this._operations?.data.geometry;if(0===t){const e=o.visible&&this.enableMoveObject;this._moveManipulation.xyManipulation.available=e,this._moveManipulation.xyAxisManipulation.available=e,this._moveManipulation.xyAxisManipulation.orthogonalAvailable=e,this._moveManipulation.zManipulation.available=e&&this.enableZShape&&manipulatorUtils_o(this._operations,o.elevationInfo),this._moveManipulation.angle=geometryUtils_r(s),this._moveManipulation.radius=MoveManipulation_u.radiusForSymbol(o.graphic?.symbol)}else{const e=o.visible;this._moveManipulation.xyManipulation.available=e,this._moveManipulation.xyAxisManipulation.available=e,this._moveManipulation.zManipulation.available=e&&this.enableZVertex&&manipulatorUtils_o(this._operations,this.object.elevationInfo),this._moveManipulation.xyAxisManipulation.orthogonalAvailable=e&&1!==t;let i=0;if(null!=n){const e=n.handle.pos,t=null!=a?a.handle.pos:n.handle.leftEdge?.leftVertex?n.handle.leftEdge.leftVertex.pos:null,o=null==a&&n.handle.rightEdge?.rightVertex?n.handle.rightEdge.rightVertex.pos:null;t&&o?this._moveManipulation.xyAxisManipulation.available=!1:t?i=Ve(t,e):o&&(i=Ve(e,o))}this._moveManipulation.angle=i,this._moveManipulation.radius=config_o}0!==t&&i?((0,vec32.g)(e,e,1/t),Ge.spatialReference=this._operations.data.spatialReference,Ge.hasZ=!0,this.view.renderCoordsHelper.fromRenderCoords(e,Ge),this._moveManipulation.elevationAlignedLocation=Ge):null==this._outlineVisualElement||this.object.isDraped||null==this._outlineVisualElement.attachmentOrigin?manipulatorUtils_F(this._moveManipulation,this.object):this._moveManipulation.elevationAlignedLocation=this._outlineVisualElement.attachmentOrigin}_removeVertices(e){const t=new Array,i=this._operations;if(i){for(const n of e){const e=n.handle.component;if("vertex"===n.type&&i.canRemoveVertex(e)){t.push(n.handle),this._removeManipulator(n),this._removeManipulator(this._getManipulatorInfoFromHandle(n.handle.leftEdge)),this._removeManipulator(this._getManipulatorInfoFromHandle(n.handle.rightEdge));const a=i.removeVertices([n.handle]),o=a.removedVertices?.[0].createdEdge;o?this._createVertexOrEdgeManipulator(o):this.enableEdgeOffset&&e.vertices.length<=2&&this._removeManipulator(this._getManipulatorInfoFromHandle(e.edges[0]))}}if(t.length>0){const e=t.map((e=>{const t=i.data.components.indexOf(e.component);return{coordinates:i.data.coordinateHelper.vectorToArray(e.pos),componentIndex:t,vertexIndex:e.index}})),n=this._updateEventState(Ue.RESHAPING);if(this.destroyed)return;if(this.events.emit("vertex-remove",{type:"vertex-remove",object:this.object,removed:e.map((e=>e.coordinates)),vertices:e}),this.destroyed)return;if(n&&(this._updateEventState(Ue.NONE),this.destroyed))return;this._updateMoveManipulationPosition()}}}_moveVertices(e,t,i=("start"===t.action?editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP:editGeometry_interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS)){const n=this._operations;if(n){e.length>0&&n.moveVertices(e.map((e=>e.handle)),t.mapDeltaX,t.mapDeltaY,t.mapDeltaZ,i);for(const t of e)this._updateManipulatorPosition(t)}}_offsetEdge(e,t,i){if(!this._operations)return;const n=t.clone();n.distance=i,this._operations.updateVertices([e.handle.leftVertex,e.handle.rightVertex],n),this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e.handle.leftVertex)),this._updateManipulatorPosition(this._getManipulatorInfoFromHandle(e.handle.rightVertex))}_manipulatorClickCallback(e,t){e.shiftKey||this._clearSelection(),"vertex"===t.type&&(t.manipulator.selected=!t.manipulator.selected,this.enableDeleteVertices&&e.button===IViewEvents/* MouseButton */.w.Right&&this._removeVertices([t])),"edge"===t.type&&e.button===IViewEvents/* MouseButton */.w.Left&&this._splitEdgeManipulator(t),e.stopPropagation()}_updateTranslateTooltip(e,t){null!=this._defaultTooltipInfo?this._resetTooltip():this._updateTranslateObjectTooltip(e,t)}_updateTranslateObjectTooltip(e,t){this._pendingEdgeOffsetInfo||(this.activeTooltipInfo=reshapeTooltipUtils3D_P(e,t,this._tooltipsContext))}_updateEdgeOffsetTooltip(e){this._pendingEdgeOffsetInfo||(this.activeTooltipInfo=reshapeTooltipUtils3D_S(this.object,e,this._tooltipsContext))}_resetTooltip(){const e=this.activeTooltipInfo;if(this._pendingEdgeOffsetInfo&&"reshape-edge-offset"===e?.type)return;let t=null;t=this._pendingEdgeOffsetInfo||null!=this._findActiveEdgeOffsetManipulatorInfo()?reshapeTooltipUtils3D_S(this.object,null,this._tooltipsContext):this._defaultTooltipInfo,t!==e&&(null!=e&&null!=t&&"input"===this.tooltip.mode||(this.activeTooltipInfo=t))}get _defaultTooltipInfo(){const e=this._operations?.data.type;switch(e){case"polyline":case"polygon":return this._selectedVertexManipulatorInfo?this.tooltipInfos.selectedVertex:null;case"point":case"mesh":return this.tooltipInfos.movePoint;default:return null}}get _selectedVertexManipulatorInfo(){const e=this._manipulatorInfos.filter((e=>"vertex"===e.type&&e.manipulator.selected));return 1===e.length?e[0]:null}get _tooltipsContext(){const{tooltipInfos:e,activeTooltipInfo:t,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:n}=this;return{sketchOptions:this._sketchOptions,tooltipInfos:e,activeTooltipInfo:t,selectedVertexManipulatorInfo:this._selectedVertexManipulatorInfo,callbacks:this._tooltipCallbacks,automaticAreaMeasurementUtils:i,automaticLengthMeasurementUtils:n}}get test(){}};function He(){return e=>{const{operation:t,mapEnd:i}=e;return null==t||null==i?e:{...e,signedDistance:t.signedDistanceToPoint(i)}}}function we(e){const t=e.size/2,i=t+e.collisionPadding;return{size:t/i,outlineSize:(t+e.outlineSize)/i}}function Ve(e,t){return Math.atan2(t[1]-e[1],t[0]-e[0])+Math.PI/2}function Ae(e){return new Point/* default */.A({x:0,y:0,z:0,spatialReference:e})}function Te(e){return"edge"===e.type&&"edgeManipulator"in e}(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_numGrabbing",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_numDragging",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_pendingEdgeOffsetInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_operations",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_segmentLabels",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],Se.prototype,"tool",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"tooltip",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"activeTooltipInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],Se.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"manipulators",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"view",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"automaticAreaMeasurementUtils",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"automaticLengthMeasurementUtils",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"object",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableZShape",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableDeleteVertices",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableZVertex",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"autoHideManipulators",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableMoveObject",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableMidpoints",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"enableEdgeOffset",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_sketchOptions",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_accentColor",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],Se.prototype,"_tooltipsContext",null),Se=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.reshape.ReshapeOperation")],Se);const Ge=(0,dehydratedPoint/* makeDehydratedPoint */.T)(0,0,void 0,SpatialReference/* default */.A.WGS84),De=(0,vec3f64/* create */.vt)(),Le=1e-6;var Pe,Ue,Ce;!function(e){e.Vertex=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom1,e.Edge=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom2}(Pe||(Pe={})),function(e){e[e.NONE=0]="NONE",e[e.MOVING=1]="MOVING",e[e.RESHAPING=2]="RESHAPING"}(Ue||(Ue={})),function(e){e[e.ALL=0]="ALL",e[e.SELECTED_OR_ALL=1]="SELECTED_OR_ALL"}(Ce||(Ce={}));

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/reshape/ReshapeTool3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ReshapeTool3D_h=class extends InteractiveToolBase/* InteractiveToolBase */.g{constructor(e){super(e),this._reshapeOperation=null,this.events=new Evented/* default */.A,this.enableZShape=!0,this.enableZVertex=!0,this.enableMoveObject=!0,this.enableDeleteVertices=!0,this.autoHideManipulators=!1,this.enableMidpoints=!0,this.enableEdgeOffset=!1,this.type="reshape-3d",this.sketchOptions=new SketchOptions/* default */.A,this.snappingManager=null,this.automaticManipulatorSelection=!1}initialize(){const e=this._reshapeOperation=new Se({tool:this});this.addHandles([e.events.on("reshape",(e=>this.events.emit("reshape",e))),e.events.on("move",(e=>this.events.emit("move",e))),e.events.on("vertex-add",(e=>this.events.emit("vertex-add",e))),e.events.on("vertex-remove",(e=>this.events.emit("vertex-remove",e))),e.events.on("immediate-click",(e=>this.events.emit("immediate-click",{...e,object:this.object}))),this.view.on("pointer-down",["Shift"],(e=>e.stopPropagation()))]),this.finishToolCreation()}destroy(){this._reshapeOperation=(0,maybe/* destroyMaybe */.pR)(this._reshapeOperation)}get updating(){return((this.object.updating??!1)||this._reshapeOperation?.updating||this.snappingManager?.updating)??!1}get activeTooltipInfo(){return this._reshapeOperation?.activeTooltipInfo??null}get tooltip(){return this._reshapeOperation?.tooltip??null}onManipulatorSelectionChanged(){this._reshapeOperation?.onManipulatorSelectionChanged()}get canUndo(){return this._reshapeOperation?.canUndo??!1}undo(){this.snappingManager?.doneSnapping(),this._reshapeOperation?.undo()}get canRedo(){return this._reshapeOperation?.canRedo??!1}redo(){this.snappingManager?.doneSnapping(),this._reshapeOperation?.redo()}onInputEvent(e){const t=this._reshapeOperation;if(t&&!t.enterInputModeIfAvailable(e)&&this.enableDeleteVertices&&"key-down"===e.type&&keybindings/* sketchKeys */.NE.delete.includes(e.key)){t.removeSelectedVertices()>0&&e.stopPropagation()}}reset(){}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"_reshapeOperation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ReshapeTool3D_h.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ReshapeTool3D_h.prototype,"automaticAreaMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ReshapeTool3D_h.prototype,"automaticLengthMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ReshapeTool3D_h.prototype,"object",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableZShape",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableZVertex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableMoveObject",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableDeleteVertices",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"autoHideManipulators",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableMidpoints",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"enableEdgeOffset",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:SketchOptions/* default */.A})],ReshapeTool3D_h.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"activeTooltipInfo",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"tooltip",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ReshapeTool3D_h.prototype,"automaticManipulatorSelection",void 0),ReshapeTool3D_h=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.reshape.ReshapeTool3D")],ReshapeTool3D_h);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/axisAngleDegrees.js
var axisAngleDegrees = __webpack_require__(69175);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateMeshAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ScaleRotateMeshAdapter_g=class extends Accessor/* default */.A{constructor(t){super(t),this._interactionState=null}initialize(){this.addHandles([(0,reactiveUtils/* when */.z7)((()=>{const t=this._interactionState;return t&&t.angle!==t.previousAngle?{interactionState:t,angle:t.state.angle}:null}),(({interactionState:t})=>{this._updateMeshRotation(t)}),reactiveUtils/* sync */.OH),(0,reactiveUtils/* when */.z7)((()=>{const t=this._interactionState;return t&&t.scale!==t.previousScale?{interactionState:t,scale:t.state.scale}:null}),(({interactionState:t})=>{this._updateMeshSize(t)}),reactiveUtils/* sync */.OH)])}get geometry(){const t=manipulatedObjectUtils_t(this.object);return"mesh"===t?.type?t:null}get initialAngle(){return this._interactionState?.initialAngle??0}get angle(){const t=this.geometry?.transform;if(null==t)return this._interactionState?.angle??0;const e=(0,axisAngleDegrees/* axis */.yo)(t.rotation)[2];return Math.abs(e)>.999999?(0,mathUtils/* deg2rad */.kU)((0,axisAngleDegrees/* angle */.g7)(t.rotation))*Math.sign(e):0}get angleClockwise(){return-this.angle}get relativeAngle(){return this.angle-this.initialAngle}get relativeAngleClockwise(){return-this.relativeAngle}get scale(){return this._interactionState?.scale??1}startInteraction(){const t=new ScaleRotateMeshAdapter_u({angle:this.angle});this._interactionState=t;const e=()=>{this._interactionState=null};return{state:t,done:e,cancel:()=>{t.cancel(),e()}}}createUndoRecord(){return this.object.createUndoRecord()}_updateMeshRotation(t){const{geometry:e}=this;if(null==e)return;const{angle:o,previousAngle:n}=t;t.previousAngle=o;const r=(0,mathUtils/* rad2deg */.KJ)(o-n);e.rotate(0,0,r)}_updateMeshSize(t){const{geometry:e}=this;if(null==e)return;const{scale:o,previousScale:i}=t;t.previousScale=o;const n=o/i;e.scale(n)}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ScaleRotateMeshAdapter_g.prototype,"object",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"geometry",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ScaleRotateMeshAdapter_g.prototype,"viewingMode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"initialAngle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"angle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"angleClockwise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"relativeAngle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"relativeAngleClockwise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"scale",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_g.prototype,"_interactionState",void 0),ScaleRotateMeshAdapter_g=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter")],ScaleRotateMeshAdapter_g);let ScaleRotateMeshAdapter_u=class extends Accessor/* default */.A{get state(){const{angle:t,scale:e}=this;return{angle:t,scale:e}}constructor(t){super(t),this.angle=0,this.initialAngle=0,this.previousAngle=0,this.previousScale=1,this.scale=1,this.initialAngle=t.angle,this.previousAngle=t.angle}cancel(){this.angle=this.initialAngle,this.scale=1}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"angle",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"initialAngle",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"previousAngle",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"previousScale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"scale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateMeshAdapter_u.prototype,"state",null),ScaleRotateMeshAdapter_u=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ScaleRotateMeshAdapter.InteractionState")],ScaleRotateMeshAdapter_u);

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateObjectSymbol3DAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ScaleRotateObjectSymbol3DAdapter_a=class extends Accessor/* default */.A{constructor(t){super(t),this.sizeAxis=null,this._interactionState=null}initialize(){this.addHandles((0,reactiveUtils/* when */.z7)((()=>null!=this._interactionState?this._interactionState.state:null),(t=>{this._updateSymbol(t)}),reactiveUtils/* sync */.OH))}get initialAngle(){return this._interactionState?.initialAngle??0}get angle(){return null!=this._interactionState?this._interactionState.angle:null!=this._orientationReferenceSymbolLayer?ScaleRotateObjectSymbol3DAdapter_c(this._orientationReferenceSymbolLayer.heading??0):0}get angleClockwise(){return-this.angle}get orientation(){return this.angle}get orientationClockwise(){return this.angleClockwise}get relativeAngle(){return this.angle-this.initialAngle}get relativeAngleClockwise(){return-this.relativeAngle}get scale(){return this._interactionState?.scale??1}get size(){const t=this._sizeReferenceSymbolLayer;if(null==t)return null;const e=this.findLayerView(),i=this._graphicSymbol;if(null==e||null==i||"point-3d"!==i.type)return null;const l=e.getSymbolLayerSize(i,t);if("size"in l&&null!=l.size)return l.size;const n=this.sizeAxis;return!("width"in l)||null==l.width||null!=n&&"width"!==n&&"all"!==n&&"width-and-depth"!==n?!("depth"in l)||null==t.depth||null!=n&&"depth"!==n&&"all"!==n&&"width-and-depth"!==n?!("height"in l)||null==t.height||null!=n&&"height"!==n&&"all"!==n?null:l.height:l.depth:l.width}get _sizeReferenceSymbolLayer(){const t=this._graphicSymbol;return null==t||0===t.symbolLayers.length?null:t.symbolLayers.find((t=>"object"===t.type))}get _orientationReferenceSymbolLayer(){const t=this._graphicSymbol;return null==t||0===t.symbolLayers.length?null:t.symbolLayers.find((t=>"object"===t.type&&null!=t.heading))}get _graphicSymbol(){return null!=this.graphic?.symbol&&"point-3d"===this.graphic.symbol.type?this.graphic.symbol:null}set _graphicSymbol(t){this.graphic.symbol=t}startInteraction(){const t=this._graphicSymbol,e=this.findLayerView();if(null!=this._interactionState||null==t||null==e)return ScaleRotateObjectSymbol3DAdapter_h;const i=t.symbolLayers.map((i=>"object"===i.type?e.getSymbolLayerSize(t,i):null)).toArray(),l=t.clone(),n=this.angle,o=new ScaleRotateObjectSymbol3DAdapter_p({originalSymbol:l,angle:n,initialSizes:i});this._interactionState=o;const r=()=>{this._interactionState=null};return{state:o,done:r,cancel:()=>{this._graphicSymbol=l,r()}}}createUndoRecord(){let t=this.graphic.symbol,e=null;return{undo:i=>{e=i.symbol,i.symbol=t},redo:i=>{t=i.symbol,i.symbol=e}}}_updateSymbol({scale:t,angle:e,originalSymbol:l,initialSizes:n}){const o=this._graphicSymbol;if(null==o||"point-3d"!==o.type)return;const r=o.clone(),s=-(0,mathUtils/* rad2deg */.KJ)(e-this.initialAngle);let a=!1;this._forEachObjectSymbolLayerPair(l,r,((e,i,l)=>{const o=(e.heading??0)+s;i.heading!==o&&(i.heading=o,a=!0);const r=n[l];if(null!=r&&"width"in r){r.width=this.sizeFilter(r.width),r.height=this.sizeFilter(r.height),r.depth=this.sizeFilter(r.depth);const e=r.width*t;i.width!==e&&(i.width=e,a=!0);const l=r.depth*t;i.depth!==l&&(i.depth=l,a=!0);const n=r.height*t;i.height!==n&&(i.height=n,a=!0)}})),a&&(this._graphicSymbol=r)}_forEachObjectSymbolLayerPair(t,e,i){t.symbolLayers.forEach(((t,l)=>{const n=e.symbolLayers.at(l);"object"===t.type&&"object"===n.type&&i(t,n,l)}))}};function ScaleRotateObjectSymbol3DAdapter_c(t){return-(0,mathUtils/* deg2rad */.kU)(t)}(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"initialAngle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"angle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"angleClockwise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"orientation",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"orientationClockwise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"relativeAngle",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"relativeAngleClockwise",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"scale",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"size",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"sizeAxis",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ScaleRotateObjectSymbol3DAdapter_a.prototype,"graphic",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"_interactionState",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ScaleRotateObjectSymbol3DAdapter_a.prototype,"findLayerView",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ScaleRotateObjectSymbol3DAdapter_a.prototype,"sizeFilter",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"_sizeReferenceSymbolLayer",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"_orientationReferenceSymbolLayer",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_a.prototype,"_graphicSymbol",null),ScaleRotateObjectSymbol3DAdapter_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter")],ScaleRotateObjectSymbol3DAdapter_a);const ScaleRotateObjectSymbol3DAdapter_h={state:{angle:0,scale:0},done:()=>{},cancel:()=>{}};let ScaleRotateObjectSymbol3DAdapter_p=class extends Accessor/* default */.A{get state(){const{originalSymbol:t,angle:e,initialAngle:i,scale:l,initialSizes:n}=this;return{originalSymbol:t,angle:e,initialAngle:i,scale:l,initialSizes:n}}constructor(t){super(t),this.angle=0,this.initialAngle=0,this.scale=1,this.initialAngle=t.angle}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"originalSymbol",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"angle",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"initialAngle",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"initialSizes",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"scale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ScaleRotateObjectSymbol3DAdapter_p.prototype,"state",null),ScaleRotateObjectSymbol3DAdapter_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ScaleRotateObjectSymbol3DAdapter.InteractionState")],ScaleRotateObjectSymbol3DAdapter_p);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Cyclical.js
var Cyclical = __webpack_require__(17505);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/scheduling.js
var scheduling = __webpack_require__(61449);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ScaleRotateTransform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var mt;!function(t){t.ScaleIn=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom2,t.ScaleOut=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom3,t.RotateLeft=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom4,t.RotateRight=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom5,t.Unlocked=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom7,t.DelayedFocused=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom8,t.TouchInput=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom12}(mt||(mt={}));let gt=class extends Accessor/* default */.A{get angle(){return this.adapter.angle}get scale(){return this.adapter.scale}set location(t){this._ringManipulator.location=t}set elevationAlignedLocation(t){this._ringManipulator.elevationAlignedLocation=t}get grabbing(){return this._ringManipulator.grabbing}set interactive(t){this._ringManipulator.interactive=t}get updating(){return!!this._activeAnimation}constructor(t){super(t),this.mode=null,this._scaleRotateDragData=null,this._activeAnimation=null,this._ringIndicatorDelayMs=config_q,this.events=new Evented/* default */.A,this.getFocused=()=>this._ringManipulator.focused,this.getScale=()=>"scale"===this._scaleRotateDragData?.mode?this.adapter.scale:1}initialize(){this._createManipulator(),this._updateDragState(),this._updateManipulatorTransform(),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>{const{adapter:t}=this;return[t.angle,t.scale]}),(()=>this._updateManipulatorTransform()))])}destroy(){this._activeAnimation?.frameTask.remove(),this._activeAnimation=null,this.tool.manipulators.remove(this._ringManipulator),this._ringManipulator=null}startAnimation(t){this.cancelActiveAnimation(),t.start();const e=(0,scheduling/* addFrameTask */.mg)({update:({deltaTime:e})=>{t.update(e)&&this.cancelActiveAnimation()}});this._activeAnimation={...t,frameTask:e}}cancelActiveAnimation(){this._activeAnimation?.frameTask.remove(),this._activeAnimation=(0,maybe/* destroyMaybe */.pR)(this._activeAnimation)}forEachManipulator(t){t(this._ringManipulator,ManipulatorType_A.SCALE_ROTATE)}_createManipulator(){const t=this._createRingManipulator();this._ringManipulator=t,this.tool.manipulators.add(t);const e=this.tool.object,a=(0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(t,((t,a,i)=>{this._scaleRotateDragData=null;const n=this.adapter.startInteraction(),l={mode:"none",origin:(0,vec3f64/* clone */.o8)(t.renderLocation),initialAngle:this.adapter.angle,angle:0,angleDir:0,scaleDir:0};this._scaleRotateDragData=l,this._updateDragState();const c=vectorStacks/* sv3d */.rq.get();this.tool.view.renderCoordsHelper.worldUpAtPosition(t.renderLocation,c),a.next(dragEventPipeline3D_T(this.tool.view,(0,plane/* fromPositionAndNormal */.O_)(t.renderLocation,c,(0,plane/* create */.vt)()))).next((t=>{const a=(0,plane/* getNormal */.Qj)(t.plane),i=manipulatorUtils_w(t.renderStart,t.renderEnd,l.origin,a),c=Cyclical/* cyclicalPI */.wf.shortestSignedDiff(l.angle,i);l.angleDir=(0,mathUtils/* clamp */.qE)(l.angleDir+c,-.3,config_m),l.angle=i;const d=ft(l,t),h=d-this.adapter.scale;if(l.scaleDir=(0,mathUtils/* clamp */.qE)(l.scaleDir+h,-.2,config_k),this._onScaleChanged(),"none"===l.mode){const a=this.mode||_t(t,t.plane,l.origin,this.tool.view.state.camera);if(null!=a){switch(a){case"rotate":this.tool.events.emit("rotate-start",{object:e,angle:0}),this.tool.events.emit("record-undo",{updates:[this.adapter.createUndoRecord()]});break;case"scale":this.tool.events.emit("scale-start",{object:e,xScale:1,yScale:1}),this.tool.events.emit("record-undo",{updates:[this.adapter.createUndoRecord()]})}l.mode=a}}switch(l.mode){case"rotate":n.state.angle=l.initialAngle+i;break;case"scale":n.state.scale=d,this._onScaleChanged()}switch(this._updateDragState(),this._updateManipulatorTransform(),t.action){case"start":case"update":switch(l.mode){case"rotate":this.tool.events.emit("rotate",{object:e,angle:(0,mathUtils/* rad2deg */.KJ)(l.angle)});break;case"scale":this.tool.events.emit("scale",{object:e,xScale:d,yScale:d})}break;case"end":switch(l.mode){case"rotate":this.tool.events.emit("rotate-stop",{object:e,angle:(0,mathUtils/* rad2deg */.KJ)(l.angle)});break;case"scale":this.tool.events.emit("scale-stop",{object:e,xScale:d,yScale:d})}}return"end"===t.action&&(this.startAnimation(vt(this,(()=>this._onScaleChanged()))),this._scaleRotateDragData=null,this._updateDragState(),n.done()),t})),i.next((()=>{if(n.cancel(),null!=this._scaleRotateDragData){switch(this._scaleRotateDragData.mode){case"none":break;case"rotate":this.tool.events.emit("rotate-stop",{object:e,angle:0});break;case"scale":this.tool.events.emit("scale-stop",{object:e,xScale:1,yScale:1})}this.startAnimation(vt(this,(()=>this._onScaleChanged()))),this._scaleRotateDragData=null,this._updateDragState()}}))}));this.addHandles([a,t.events.on("focus-changed",(t=>{"focus"===t.action?this.startAnimation(Mt(this,(()=>this._updateDelayedFocusedState()),{delayMs:this._ringIndicatorDelayMs})):this._updateDelayedFocusedState()})),t.events.on("immediate-click",(t=>{t.stopPropagation()})),(0,reactiveUtils/* watch */.wB)((()=>this.tool.object.visible),(t=>this._ringManipulator.available=t),reactiveUtils/* initial */.Vh)])}_onScaleChanged(){this.events.emit("scale-changed"),this._updateManipulatorTransform()}_updateDelayedFocusedState(){this._ringManipulator.updateStateEnabled(mt.DelayedFocused,this.getFocused())}_updateDragState(){if(this._ringManipulator.updateStateEnabled(mt.Unlocked,!(null!=this._scaleRotateDragData&&"none"!==this._scaleRotateDragData?.mode)),null!=this._scaleRotateDragData)switch(this._scaleRotateDragData.mode){case"rotate":this._ringManipulator.updateStateEnabled(mt.ScaleIn|mt.ScaleOut,!1),this._ringManipulator.updateStateEnabled(mt.RotateLeft,this._scaleRotateDragData.angleDir<0),this._ringManipulator.updateStateEnabled(mt.RotateRight,this._scaleRotateDragData.angleDir>=0);break;case"scale":this._ringManipulator.updateStateEnabled(mt.RotateLeft|mt.RotateRight,!1),this._ringManipulator.updateStateEnabled(mt.ScaleIn,this._scaleRotateDragData.scaleDir<0),this._ringManipulator.updateStateEnabled(mt.ScaleOut,this._scaleRotateDragData.scaleDir>=0)}else this._ringManipulator.updateStateEnabled(mt.ScaleIn|mt.ScaleOut|mt.RotateLeft|mt.RotateRight,!1)}_updateManipulatorTransform(){const t=(0,mat4/* fromRotation */.$0)(vectorStacks/* sm4d */.Rc.get(),this.adapter.angle,(0,vec3f64/* fromValues */.fA)(0,0,1));if(null==t)return;const e=this.getScale(),a=(0,mat4/* fromScaling */.CV)(vectorStacks/* sm4d */.Rc.get(),(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),e,e,e));this._ringManipulator.modelTransform=(0,mat4/* multiply */.lw)(vectorStacks/* sm4d */.Rc.get(),a,t)}_createRingManipulator(){const t=(t,e,a)=>{const o=[],i=Math.ceil(config_t*(e-t)/(2*Math.PI));for(let r=0;r<i+1;r++){const s=t+r*(e-t)/i;o.push((0,vec3f64/* fromValues */.fA)(a*Math.cos(s),a*Math.sin(s),0))}return o},e=e=>t(0,2*Math.PI,e),a=t=>[[-t/2,0],[t/2,0],[t/2,config_P/2],[-t/2,config_P/2]],o=this._createMaterial(1),i=(t,e,i=o)=>(0,GeometryUtil/* createPathExtrusionGeometry */.Nq)(i,a(e),t,[],[],!1),r=e(config_I),s=i(r,config_i),n={left:new Array,right:new Array},l=[];for(let w=0;w<2;w++){const e=w*Math.PI-Math.PI/4,a=Math.PI/2-config_x,r=e+a,s=e+Math.PI/2-a,c=t(r,s,config_n),d=i(c,config_l);l.push(c),l.push(t(r,s,config_p-config_i/2)),n.left.push(d),n.right.push(d.instantiate());for(let t=0;t<2;t++){const e=0===t,a=(0,mat4f64/* create */.vt)();if(e){(0,mat4/* scale */.hs)(a,a,[1,-1,1]),(0,mat4/* rotate */.e$)(a,a,-r,[0,0,1]);const t=Math.round(config_f*(c.length-1));a[12]=c[t][0],a[13]=c[t][1],a[14]=c[t][2]}else{(0,mat4/* rotate */.e$)(a,a,s,[0,0,1]);const t=Math.round((1-config_f)*(c.length-1));a[12]=c[t][0],a[13]=c[t][1],a[14]=c[t][2]}const i=(0,GeometryUtil/* createExtrudedTriangle */._B)(o,config_r,0,config_s,config_P);(0,GeometryUtil/* transformInPlace */.xh)(i,a),(e?n.left:n.right).push(i)}}const c=[];for(let _=0;_<2;_++){const e=_*Math.PI-Math.PI/4,a=Math.PI/2-config_b,o=e+a,r=e+Math.PI/2-a,s=t(o,r,config_p);c.push(i(s,config_l))}const d=this._createMaterial(.66),h=this._createMaterial(.5),u=this._createMaterial(.33),p=e(config_I+config_g),m=e(config_I+config_j),g=i(p,config_l,d),f=i(m,config_l,u),v=e(config_I-config_g),M=e(config_I-config_j),b=i(v,config_l,d),j=i(M,config_l,u);let y=[new RenderObject_e(s,mt.DelayedFocused),new RenderObject_e(s.instantiate({material:h}),interactive_interfaces/* ManipulatorStateFlags */.p7.None)];this.mode&&"scale"!==this.mode||(y=y.concat([...c.map((t=>new RenderObject_e(t,mt.DelayedFocused|mt.Unlocked))),new RenderObject_e(g,mt.DelayedFocused|mt.ScaleIn),new RenderObject_e(f,mt.DelayedFocused|mt.ScaleIn),new RenderObject_e(b,mt.DelayedFocused|mt.ScaleOut),new RenderObject_e(j,mt.DelayedFocused|mt.ScaleOut)])),this.mode&&"rotate"!==this.mode||(y=y.concat([...n.right.map((t=>new RenderObject_e(t.instantiate(),mt.DelayedFocused|mt.Unlocked))),...n.left.map((t=>new RenderObject_e(t,mt.DelayedFocused|mt.RotateLeft))),...n.right.map((t=>new RenderObject_e(t,mt.DelayedFocused|mt.RotateRight)))]));const R=[r,...l];return new ee({view:this.tool.view,renderObjects:y,autoScaleRenderObjects:!1,worldOriented:!0,radius:config_i,focusMultiplier:1,touchMultiplier:1.5,elevationInfo:this.tool.object.elevationInfo,collisionType:{type:"ribbon",paths:R,direction:(0,vec3f64/* fromValues */.fA)(0,0,1)}})}_createMaterial(t){const e=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Transparent,isDecoration:!0});return this.addHandles((0,reactiveUtils/* watch */.wB)((()=>(0,colorUtils/* multiplyOpacityToUnitRGBA */.f6)(this.tool.view.effectiveTheme.accentColor,t)),(t=>e.setParameters({color:t})),reactiveUtils/* initial */.Vh)),e}get test(){}};function ft(t,e){const a=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e.renderStart,t.origin),o=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e.renderEnd,t.origin),i=(0,vec32.l)(a),r=(0,vec32.l)(o);return 0===i?0:r/i}function _t(t,e,a,o){const{renderStart:i,renderEnd:r}=t,s=Dt(i,o,vectorStacks/* sv3d */.rq.get()),n=Dt(r,o,vectorStacks/* sv3d */.rq.get());if((0,vec32.s)(s,n)<config_d*config_d)return null;const l=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),i,a),c=(0,vec32.h)(vectorStacks/* sv3d */.rq.get(),l,(0,plane/* getNormal */.Qj)(e)),d=i,h=(0,vec32.f)(vectorStacks/* sv3d */.rq.get(),d,c),u=Dt(a,o,vectorStacks/* sv3d */.rq.get()),p=s,m=Dt(h,o,vectorStacks/* sv3d */.rq.get()),g=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),m,p),f=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),s,u),_=(0,ray/* wrap */.LV)(p,g),D=(0,ray/* wrap */.LV)(u,f);return (0,ray/* distance2 */.kb)(_,n)<(0,ray/* distance2 */.kb)(D,n)?"rotate":"scale"}function Dt(t,e,a){return e.projectToScreen(t,bt),(0,vec32.i)(a,bt[0],bt[1],0)}var St;function vt(t,e){let a=null,o=1;const i=()=>o;return{start:()=>{o=t.getScale(),a=t.getScale,t.getScale=i,e()},update:t=>(o+=((o+1)/2-o)*Math.min(t*config_u,1),e(),Math.abs(o-1)<.01?St.STOP:St.CONTINUE),destroy:()=>{a&&(t.getScale=a),e()}}}function Mt(t,e,a){let o=0,i=null;const r=()=>!1;return{start:()=>{i=t.getFocused,t.getFocused=r,o=0,e()},update:t=>(o+=t,!i?.()||o>=a.delayMs?St.STOP:St.CONTINUE),destroy:()=>{i&&(t.getFocused=i),e()}}}(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],gt.prototype,"tool",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],gt.prototype,"adapter",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],gt.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],gt.prototype,"mode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],gt.prototype,"_activeAnimation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],gt.prototype,"updating",null),gt=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ScaleRotateTransform")],gt),function(t){t[t.CONTINUE=0]="CONTINUE",t[t.STOP=1]="STOP"}(St||(St={}));const bt=(0,screenUtils/* createScreenPointArray */.gs)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TooltipInfoWithCoordinates.js
var TooltipInfoWithCoordinates = __webpack_require__(38153);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformMeshTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TransformMeshTooltipInfo_l=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(t){super(t),this.type="transform-mesh",this.orientation=(0,fields/* makeOrientationField */.LJ)(),this.scale=(0,fields/* makeScaleField */.dy)(),this.allFields.forEach((t=>{t.lockable=!1,t.setActual(null)}))}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic,orientation:this.orientation.actual,scale:this.scale.actual}}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformMeshTooltipInfo_l.prototype,"key",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformMeshTooltipInfo_l.prototype,"allFields",null),TransformMeshTooltipInfo_l=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.TransformMeshTooltipInfo")],TransformMeshTooltipInfo_l);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TransformPointTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TransformPointTooltipInfo_a=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(o){super(o),this.type="transform-point",this.orientation=(0,fields/* makeOrientationField */.LJ)({readOnly:!0}),this.size=(0,fields/* makeSizeField */.qP)({readOnly:!0}),this.allFields.forEach((o=>{o.lockable=!1,o.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.size]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformPointTooltipInfo_a.prototype,"allFields",null),TransformPointTooltipInfo_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.TransformPointTooltipInfo")],TransformPointTooltipInfo_a);

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/TransformTool3D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TransformTool3D_z=class extends InteractiveToolBase/* InteractiveToolBase */.g{constructor(t){super(t),this.events=new Evented/* default */.A,this.enableZ=!0,this.enableRotation=!0,this.enableScaling=!0,this.sketchOptions=new SketchOptions/* default */.A,this.type="transform-3d",this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._scaleRotate=null}initialize(){const{events:t,object:o,view:a}=this;this.tooltip=(0,tooltipCommonUtils/* makeTooltip */.A)((()=>({view:a,options:this.sketchOptions.tooltips}))),this._moveManipulation=new MoveManipulation_u({tool:this,view:a,snapToScene:this.snapToScene,xyAvailable:!0,xyAxisAvailable:!0,zAvailable:this.enableZ&&manipulatorUtils_o(o.operations,o.elevationInfo),radius:MoveManipulation_u.radiusForSymbol(o.graphic?.symbol)}),this._moveManipulation.forEachManipulator((e=>this.addHandles(e.events.on("immediate-click",(e=>{t.emit("immediate-click",{...e,object:this.object}),e.stopPropagation()})))));const s=o.elevationInfo;if(this._moveManipulation.elevationInfo=s,this.addHandles(meshFastUpdateUtils_a(o)),this._moveManipulation.createManipulatedObjectDragPipeline(((t,e,i,n,r)=>{if(t===MoveManipulation_c.XY){const{snappingStep:t,cancelSnapping:e}=(0,SnappingDragPipelineStep/* createSnapDragEventPipelineStep */.L)({snappingContext:new SnappingContext/* SnappingContext */.e({elevationInfo:s,pointer:r,editGeometryOperations:EditGeometryOperations/* EditGeometryOperations */.p.fromGeometry(new Point/* default */.A({spatialReference:o.operations?.data.spatialReference}),a.state.viewingMode),visualizer:new SnappingVisualizer3D_R,excludeFeature:o.graphic}),snappingManager:this.snappingManager,updatingHandles:this._updatingHandles,useZ:!1});n=n.next(e),i=i.next((0,dragEventPipeline/* sceneSnappingAtProjectedLocation */.RS)(this.view,s)).next(...t)}return{steps:i,cancel:n}}),o,(e=>{const{action:o,object:i,dxScreen:a,dyScreen:n}=e,s={object:i,dxScreen:a,dyScreen:n};switch(o){case"start":this._emitRecordUndo(),t.emit("translate-start",s);break;case"update":t.emit("translate",s);break;case"end":t.emit("translate-stop",s)}})),this._moveManipulation.angle=null!=this._scaleRotate?this._scaleRotate.angle:0,this._scaleRotateAdapter=this._createScaleRotateAdapter(),this.addHandles((0,reactiveUtils/* watch */.wB)((()=>this._scaleRotateAdapter.angle),(()=>this._updateMoveAngle()))),this.enableScaling||this.enableRotation){const t=this.enableScaling&&this.enableRotation?null:this.enableScaling?"scale":"rotate";this._scaleRotate=new gt({tool:this,mode:t,adapter:this._scaleRotateAdapter,sketchOptions:this.sketchOptions}),this.addHandles(this._scaleRotate.events.on("scale-changed",(()=>this._onScaleChanged())))}this.addHandles([visualElementUtils_l({view:this.view,object:o,forEachManipulator:t=>this._forEachManipulator(t),onManipulatorsChanged:()=>(0,handleUtils/* makeHandle */.hA)()}),o.on("committed",(()=>this._onGeometryChanged())),this._hideManipulatorsForObjectState(),(0,reactiveUtils/* watch */.wB)((()=>a.scale),(()=>this._updateMoveAngle()))].filter(arrayUtils/* isSome */.Ru)),this._onGeometryChanged(),this._updateMoveAngle(),this._forEachManipulator((t=>{t instanceof ee&&this.addHandles(t.events.on("grab-changed",(()=>this._updateManipulatorsInteractive())))}));const r=a?.type,{sketchOptions:l}=this;this._meshTooltipInfo=new TransformMeshTooltipInfo_l({viewType:r,sketchOptions:l}),this._pointTooltipInfo=new TransformPointTooltipInfo_a({viewType:r,sketchOptions:l});const c={object:o,dxScreen:0,dyScreen:0},m={onBeforeUpdate:()=>this.endDrag(),onMoveStart:()=>{this._emitRecordUndo(),t.emit("translate-start",{...c})},onMove:()=>t.emit("translate",{...c}),onMoveStop:()=>t.emit("translate-stop",{...c}),onRotateStart:e=>{this._emitRecordUndo(),t.emit("rotate-start",{object:o,angle:e})},onRotate:e=>t.emit("rotate",{object:o,angle:e}),onRotateStop:e=>t.emit("rotate-stop",{object:o,angle:e}),onScaleStart:(e,i)=>{this._emitRecordUndo(),t.emit("scale-start",{object:o,xScale:e,yScale:i})},onScale:(e,i)=>t.emit("scale",{object:o,xScale:e,yScale:i}),onScaleStop:(e,i)=>t.emit("scale-stop",{object:o,xScale:e,yScale:i})};this.addHandles(tooltipUtils3D_m(this.tooltip,this.object,(()=>({sketchOptions:this.sketchOptions,activeTooltipInfo:this.activeTooltipInfo,callbacks:m,scaleRotateTransform:this._scaleRotate})))),this.finishToolCreation()}destroy(){this.tooltip.destroy(),this._moveManipulation.destroy(),this._scaleRotate=(0,maybe/* destroyMaybe */.pR)(this._scaleRotate),this._scaleRotateAdapter=(0,maybe/* destroyMaybe */.pR)(this._scaleRotateAdapter),this._updatingHandles.destroy(),this._set("view",null),this._set("object",null)}onInputEvent(t){if(!this.destroyed&&!(0,tooltipCommonUtils/* enterInputModeIfAvailable */.wG)(t,this.tooltip))return super.onInputEvent(t)}_updateManipulatorsInteractive(){null!=this._scaleRotate&&(this._scaleRotate.interactive=!this._moveManipulation.grabbing,this._moveManipulation.interactive=!this._scaleRotate.grabbing)}_createScaleRotateAdapter(){const t=manipulatedObjectUtils_t(this.object);return"mesh"===t?.type?new ScaleRotateMeshAdapter_g({object:this.object,viewingMode:this.view.state.viewingMode}):new ScaleRotateObjectSymbol3DAdapter_a({graphic:this.object.graphic,sizeFilter:t=>this._enforceNonZeroSize(t),findLayerView:()=>this.view.allLayerViews.find((t=>t.layer===this.object.graphic?.layer)),sizeAxis:this.sketchOptions?.tooltips?.visualVariables?.size?.axis??null})}_forEachManipulator(t){this._moveManipulation?.forEachManipulator(t),this._scaleRotate?.forEachManipulator(t)}_hideManipulatorsForObjectState(){return (0,reactiveUtils/* watch */.wB)((()=>this.object.visible),(t=>{this._forEachManipulator((e=>e.available=t)),this._moveManipulation.zManipulation.available=t&&this.enableZ&&manipulatorUtils_o(this.object.operations,this.object.elevationInfo)}))}_emitRecordUndo(){this.events.emit("record-undo",{updates:[this.object.createUndoRecord()]})}set snapToScene(t){this._moveManipulation&&(this._moveManipulation.snapToScene=t),this._set("snapToScene",t)}get updating(){return this._updatingHandles.updating||!!this._scaleRotate?.updating}get activeTooltipInfo(){return"mesh"===manipulatedObjectUtils_t(this.object)?.type?this._meshTooltipInfo:this._pointTooltipInfo}set location(t){this._moveManipulation.location=t,this._scaleRotate&&(this._scaleRotate.location=t)}set elevationAlignedLocation(t){this._moveManipulation.elevationAlignedLocation=t,this._scaleRotate&&(this._scaleRotate.elevationAlignedLocation=t)}reset(){}onHide(){this._scaleRotate?.cancelActiveAnimation()}_onScaleChanged(){null!=this._scaleRotate&&(this._moveManipulation.displayScale=this._scaleRotate.getScale())}_updateMoveAngle(){const{view:t}=this,e=t.state.viewingMode===ViewingMode/* ViewingMode */.RT.Local||t.scale<config_v;this._moveManipulation.angle=e?this._scaleRotateAdapter.angle:0}_onGeometryChanged(){manipulatorUtils_F(this,this.object)}_enforceNonZeroSize(t){return t||this.view.state.camera.computeRenderPixelSizeAt(this._moveManipulation.renderLocation)}get test(){}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],TransformTool3D_z.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],TransformTool3D_z.prototype,"object",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],TransformTool3D_z.prototype,"enableZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformTool3D_z.prototype,"enableRotation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformTool3D_z.prototype,"enableScaling",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,type:SketchOptions/* default */.A})],TransformTool3D_z.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!1})],TransformTool3D_z.prototype,"snapToScene",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],TransformTool3D_z.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],TransformTool3D_z.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],TransformTool3D_z.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TransformTool3D_z.prototype,"activeTooltipInfo",null),TransformTool3D_z=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.TransformTool3D")],TransformTool3D_z);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Clonable.js
var Clonable = __webpack_require__(24793);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js
var cast = __webpack_require__(4130);
;// ../node_modules/@arcgis/core/analysis/SlicePlane.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let SlicePlane_m=class extends(Clonable/* default */.A.ClonableMixin(JSONSupport/* default */.A)){constructor(e){super(e),this.type="plane",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(e){return this.heading===e.heading&&this.tilt===e.tilt&&this.width===e.width&&this.height===e.height&&(0,maybe/* equalsMaybe */.CM)(this.position,e.position)}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:["plane"],readOnly:!0,json:{read:!1,write:{isRequired:!0}}})],SlicePlane_m.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Point/* default */.A,json:{write:{isRequired:!0}}})],SlicePlane_m.prototype,"position",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}}),(0,cast/* cast */.w)((e=>Cyclical/* cyclicalDegrees */.ie.normalize((0,ensureType/* ensureNumber */.GB)(e),0,!0)))],SlicePlane_m.prototype,"heading",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0,max:360},json:{write:{isRequired:!0}}}),(0,cast/* cast */.w)((e=>Cyclical/* cyclicalDegrees */.ie.normalize((0,ensureType/* ensureNumber */.GB)(e),0,!0)))],SlicePlane_m.prototype,"tilt",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],SlicePlane_m.prototype,"width",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,nonNullable:!0,range:{min:0},json:{write:{isRequired:!0}}})],SlicePlane_m.prototype,"height",void 0),SlicePlane_m=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.analysis.SlicePlane")],SlicePlane_m);const SlicePlane_c=(/* unused pure expression or super */ null && (SlicePlane_m));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Extent.js
var Extent = __webpack_require__(84698);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Axis.js
var Axis = __webpack_require__(58331);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/boundedPlane.js
var boundedPlane = __webpack_require__(28769);
;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/settings.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const settings_t=(0,vec4f64/* fromValues */.fA)(0,0,0,.04);function settings_c({accentColor:r}){return o(r,.5)}function settings_e({accentColor:r}){return o(r,.7)}

;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolConfig.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const sliceToolConfig_t=(0,has/* default */.A)("mac")?"Meta":"Control",sliceToolConfig_r="Shift",sliceToolConfig_s=2,sliceToolConfig_a=1.15,sliceToolConfig_c=1.15,sliceToolConfig_m=2500,sliceToolConfig_h=.02,sliceToolConfig_e=Math.cos((0,mathUtils/* deg2rad */.kU)(45)),sliceToolConfig_i=Math.cos((0,mathUtils/* deg2rad */.kU)(5)),sliceToolConfig_f=.95,sliceToolConfig_p=.3,sliceToolConfig_M=2,sliceToolConfig_j=1,sliceToolConfig_l=3,sliceToolConfig_n=11,sliceToolConfig_x=22.5,sliceToolConfig_C=40,sliceToolConfig_S=48,sliceToolConfig_U=2.25,sliceToolConfig_b=4,sliceToolConfig_d=1,sliceToolConfig_g=.3,sliceToolConfig_k=6,sliceToolConfig_q=4,sliceToolConfig_u=1600,sliceToolConfig_v=.4;

;// ../node_modules/@arcgis/core/views/3d/analysis/support/projectionUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function projectionUtils_r(r,t,i,n=!1){const l=o(r,t);return null==l?null:(l.hasZ&&!n||null==i||(l.z=e(i,l)??0),l)}function projectionUtils_t(o,e,r){r.warnOnce(`Failed to project analysis geometry (id: '${o.id}'), projection from spatial reference (wkid: '${e.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LineVisualElement_d extends Object3DVisualElement_c{constructor(e,t){super(e),this._hasExternalMaterial=!1,this._hasExternalMaterial=null!=t,this._material=t??new RibbonLineMaterial/* RibbonLineMaterial */.W({width:1,color:(0,vec4f64/* fromValues */.fA)(1,0,1,1),stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerWidth:1,hasPolygonOffset:!1,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!!e.isDecoration,writeDepth:!0}),this.applyProperties(e)}setGeometryFromPoint(e,t=1e3){const r=(0,vec3f64/* create */.vt)();this.view.renderCoordsHelper.toRenderCoords(e,r)&&this.setGeometryFromRenderSpacePoint(r,t)}setGeometryFromRenderSpacePoint(e,t=1e3){this.geometry=[[[e[0]-t,e[1],e[2]],[e[0]+t,e[1],e[2]]],[[e[0],e[1]-t,e[2]],[e[0],e[1]+t,e[2]]],[[e[0],e[1],e[2]-t],[e[0],e[1],e[2]+t]]]}setGeometryFromExtent(e){const t=this.view.spatialReference,s=(0,vec3f64/* create */.vt)(),i=(0,vec3f64/* create */.vt)(),a=100,n=[];(0,vec32.i)(s,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),(0,vec32.i)(s,e[2],e[1],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),(0,vec32.i)(s,e[2],e[3],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),(0,vec32.i)(s,e[0],e[3],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),(0,vec32.i)(s,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),(0,vec32.i)(s,e[0],e[1],a),this.view.renderCoordsHelper.toRenderCoords(s,t,i),n.push([i[0],i[1],i[2]]),this.geometry=[n]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromBoundedPlane(e){const t=[],r=e.origin,s=e.basis1,i=e.basis2,a=.5,n=(0,vec3f64/* create */.vt)(),l=(0,vec3f64/* create */.vt)(),m=(0,vec3f64/* create */.vt)(),p=(0,vec3f64/* create */.vt)();n[0]=r[0]-s[0]*a-i[0]*a,n[1]=r[1]-s[1]*a-i[1]*a,n[2]=r[2]-s[2]*a-i[2]*a,l[0]=r[0]-s[0]*a+i[0]*a,l[1]=r[1]-s[1]*a+i[1]*a,l[2]=r[2]-s[2]*a+i[2]*a,m[0]=r[0]+s[0]*a+i[0]*a,m[1]=r[1]+s[1]*a+i[1]*a,m[2]=r[2]+s[2]*a+i[2]*a,p[0]=r[0]+s[0]*a-i[0]*a,p[1]=r[1]+s[1]*a-i[1]*a,p[2]=r[2]+s[2]*a-i[2]*a,t.push([n[0],n[1],n[2]]),t.push([l[0],l[1],l[2]]),t.push([m[0],m[1],m[2]]),t.push([p[0],p[1],p[2]]),t.push([n[0],n[1],n[2]]),this.geometry=[t]}setGeometryFromSegment(t){const r=t.endRenderSpace;this.transform=(0,mat4/* fromTranslation */.kN)(LineVisualElement_f,r);const{points:s}=t.createRenderGeometry(r,this.view.renderCoordsHelper);this.geometry=[s]}setGeometryFromSegments(t,r=vec3f64/* ZEROS */.uY){this.transform=(0,mat4/* fromTranslation */.kN)(LineVisualElement_f,r),this.geometry=t.map((e=>e.createRenderGeometry(r,this.view.renderCoordsHelper).points))}getTransformedGeometry(){return null==this._geometry?null:this._geometry.map((e=>e.map((e=>(0,vec32.t)((0,vec3f64/* create */.vt)(),e,this.transform)))))}get renderOccluded(){return this._material.parameters.renderOccluded}set renderOccluded(e){this._material.setParameters({renderOccluded:e})}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._material.parameters.width}set width(e){this._material.setParameters({width:e})}get color(){return this._material.parameters.color}set color(e){const t=1===e[3];this._material.setParameters({color:e,writeDepth:t})}get innerWidth(){return this._material.parameters.innerWidth}set innerWidth(e){this._material.setParameters({innerWidth:e})}get innerColor(){return this._material.parameters.innerColor}set innerColor(e){this._material.setParameters({innerColor:e})}get stipplePattern(){return this._material.parameters.stipplePattern}set stipplePattern(e){null!=this._material&&this._material.setParameters({stipplePattern:e})}get stippleOffColor(){return this._material.parameters.stippleOffColor}set stippleOffColor(e){this._material.setParameters({stippleOffColor:e})}get stipplePreferContinuous(){return this._material.parameters.stipplePreferContinuous}set stipplePreferContinuous(e){this._material.setParameters({stipplePreferContinuous:e})}get falloff(){return this._material.parameters.falloff}set falloff(e){this._material.setParameters({falloff:e})}get polygonOffset(){return this._material.parameters.hasPolygonOffset}set polygonOffset(e){this._material.setParameters({hasPolygonOffset:e})}createExternalResources(){}destroyExternalResources(){}createGeometries(e){for(const t of (0,line/* lineStripsToParameters */.z)(this.geometry)){const r=(0,line/* createGeometry */.t)(this._material,t);e.addGeometry(r)}}forEachMaterial(e){this._hasExternalMaterial||e(this._material)}}const LineVisualElement_f=(0,mat4f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoubleConfiguration.js
var InstancedDoubleConfiguration = __webpack_require__(94372);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultLayouts.js
var DefaultLayouts = __webpack_require__(27776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js
var TriangleMaterial = __webpack_require__(52873);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/SlicePlaneMaterial.glsl.js
var SlicePlaneMaterial_glsl = __webpack_require__(78699);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SlicePlaneMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SlicePlaneMaterialTechnique_n extends NoParameters/* NoParameters */.Y{constructor(){super(...arguments),this.backgroundColor=(0,vec4f64/* fromValues */.fA)(1,0,0,.5),this.gridColor=(0,vec4f64/* fromValues */.fA)(0,1,0,.5),this.gridWidth=4}}class SlicePlaneMaterialTechnique_m extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,o){super(e,o,new ReloadableShaderModule/* ReloadableShaderModule */.$(SlicePlaneMaterial_glsl.S,(()=>__webpack_require__.e(/* import() */ 99799).then(__webpack_require__.bind(__webpack_require__, 99799)))))}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({blending:renderState/* premultipliedAlpha */.RC,depthTest:{func:enums/* CompareFunction */.MT.LESS},colorWrite:renderState/* defaultColorWrite */.kn})}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/SlicePlaneMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SlicePlaneMaterial_l extends TriangleMaterial/* TriangleMaterial */.W{constructor(t){super(t,SlicePlaneMaterial_m),this.produces=new Map([[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,ShaderOutput/* isColorOrColorEmission */.RN)(e)]]),this._configuration=new InstancedDoubleConfiguration/* InstancedDoubleConfiguration */.n}get visible(){return!0}createGLMaterial(r){return new SlicePlaneMaterial_f(r)}createBufferWriter(){return new DefaultBufferWriter/* DefaultBufferWriter */.Z(DefaultLayouts/* PositionUvLayout */.l5)}getConfiguration(){return this._configuration}}class SlicePlaneMaterial_f extends GLMaterial/* default */.A{constructor(r){super(r)}beginSlot(r){return this.getTechnique(SlicePlaneMaterialTechnique_m,r)}}class SlicePlaneMaterial_m extends SlicePlaneMaterialTechnique_n{constructor(){super(...arguments),this.renderOccluded=Material/* RenderOccludedFlag */.m$.Occlude,this.isDecoration=!1}}

;// ../node_modules/@arcgis/core/views/3d/interactive/visualElements/SlicePlaneVisualElement.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SlicePlaneVisualElement_d extends Object3DVisualElement_c{constructor(r){super(r),this._material=null,this._renderOccluded=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,this._gridWidth=1,this._gridColor=(0,vec4f64/* fromValues */.fA)(1,0,0,1),this._backgroundColor=(0,vec4f64/* fromValues */.fA)(1,0,0,1),this.applyProperties(r)}get renderOccluded(){return this._renderOccluded}set renderOccluded(r){r!==this._renderOccluded&&(this._renderOccluded=r,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(r){this._gridWidth!==r&&(this._gridWidth=r,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(e){(0,vec42.c)(this._gridColor,e),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){(0,vec42.c)(this._backgroundColor,e),this._updateMaterial()}createExternalResources(){this._material=new SlicePlaneMaterial_l(this._materialParameters)}destroyExternalResources(){this._material=null}forEachMaterial(r){r(this._material)}createGeometries(r){if(null!=this._material){const e=(0,GeometryUtil/* createSquareGeometry */.Gj)(this._material);r.addGeometry(e)}}get _materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this._material?.setParameters(this._materialParameters)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js + 1 modules
var RenderCoordsHelper = __webpack_require__(98191);
;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/sliceToolUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ei(i,t,e,n,o,s,r,a){return ni(t,r.worldUpAtPosition(i,U.get()),o,s,a.basis1,a.basis2),m(a.basis1,a.basis1,e),m(a.basis2,a.basis2,n),p(a.origin,i),S(a.basis2,a.basis1,a.origin,a.plane),a}function ni(i,t,e,n,o,s){const r=b(i,t),a=U.get(),c=U.get();switch(n===Mi.HORIZONTAL_OR_VERTICAL?Math.abs(r)>F?Mi.HORIZONTAL:Mi.VERTICAL:n){case Mi.VERTICAL:{const n=Math.abs(r)<=W?i:e.viewUp;h(a,n,t),p(c,t);break}case Mi.HORIZONTAL:h(a,e.viewUp,t),h(c,t,a);break;case Mi.TILTED:{const n=Math.abs(r)<=W?t:e.viewUp;h(a,n,i),h(c,i,a);break}}const l=h(U.get(),a,c);b(l,e.viewForward)>0&&m(c,c,-1),T(o,a),T(s,c)}function oi(i,t,e){const n=t.worldUpAtPosition(i.origin,U.get()),o=i.basis1,s=Oi(i,n),r=Math.round(s/Ni)*Ni;return L(i,r-s,o,e)}function si(i,t,e,n,o,s){const r=p(U.get(),o.origin);g(r,r,m(U.get(),o.basis1,i.direction[0]<0?1:-1)),g(r,r,m(U.get(),o.basis2,i.direction[1]<0?1:-1));const a=u(o.basis1),c=u(o.basis2),l=f(U.get(),e,r),d=f(U.get(),t,r);let T=0,h=0;if(Ei(i)){const t=Ii(o),e=Ii(s);T=a-.5*i.direction[0]*b(o.basis1,d)/a,h=c-.5*i.direction[1]*b(o.basis2,d)/c;const n=e/t;T*=n,h*=n}const I=T+.5*i.direction[0]*b(o.basis1,l)/a,E=h+.5*i.direction[1]*b(o.basis2,l)/c,A=m(U.get(),o.basis1,I/a),j=m(U.get(),o.basis2,E/c);(I<=0||Ti(s.origin,A,n)<=Y)&&p(A,s.basis1),(E<=0||Ti(s.origin,j,n)<=Y)&&p(j,s.basis2);const R=p(U.get(),r);return g(R,R,m(U.get(),A,i.direction[0]<0?-1:1)),g(R,R,m(U.get(),j,i.direction[1]<0?-1:1)),C(R,A,j,s)}function ri(i,t){return Z*Math.min(t.width,t.height)*t.computeRenderPixelSizeAt(i)}function ai(i,t,e,n){const o=h(U.get(),t,e);return h(o,o,t),M(i,o,n)}function ci(i,t){return manipulatorUtils_O(i.basis1,i.basis2,i.origin,t)}function li(i,t,e,n){const o=t.worldUpAtPosition(i.origin,vectorStacks/* sv3d */.rq.get()),s=vectorStacks/* sv3d */.rq.get();switch(e){case _i.HEADING:(0,vec32.c)(s,o);break;case _i.TILT:(0,vec32.c)(s,i.basis1)}return (0,plane/* fromPositionAndNormal */.O_)(i.origin,s,n)}function ui(i,t,e,n){const s=bi(e,fi.NEGATIVE_X),r=H.get();c(r,t,s.edge*Math.PI/2);const a=T(U.get(),s.basis);let l=m(U.get(),a,s.direction*n.computeScreenPixelSizeAt(s.position)*z);g(l,l,s.position);const u=n.projectToRenderScreen(l,o(U.get())),d=di(n,u);Q(n,u,yi),T(yi.direction,yi.direction);const p=U.get();!d&&_(e,yi,p)&&(l=p),r[12]=0,r[13]=0,r[14]=0,i.modelTransform=r,i.renderLocation=A(l),d?i.state|=Si:i.state&=~Si}function di(i,t){const[e,n,o,s]=i.viewport,r=Math.min(o,s)/16;let a=!0;return t[0]<e+r?(t[0]=e+r,a=!1):t[0]>e+o-r&&(t[0]=e+o-r,a=!1),t[1]<n+r?(t[1]=n+r,a=!1):t[1]>n+s-r&&(t[1]=n+s-r,a=!1),a}function gi(i,t,e,n){const o=(0,vec32.l)(n.basis1),c=(0,vec32.l)(n.basis2),l=hi(n),p=Ii(n),f=(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),0,0,0);(0,vec32.f)(f,(0,vec32.g)(vectorStacks/* sv3d */.rq.get(),n.basis1,t.direction[0]),(0,vec32.g)(vectorStacks/* sv3d */.rq.get(),n.basis2,t.direction[1])),(0,vec32.f)(f,n.origin,f);let b=0,T=1;if(Ei(t))1===t.direction[0]&&-1===t.direction[1]?b=Ni:1===t.direction[0]&&1===t.direction[1]?b=Math.PI:-1===t.direction[0]&&1===t.direction[1]&&(b=3*Math.PI/2),T=p;else{const i=0!==t.direction[0]?1:2;b=1===i?Ni:0,T=(1===i?c:o)-l}const h=(0,mat4/* fromZRotation */.N9)(vectorStacks/* sm4d */.Rc.get(),b);(0,mat4/* scale */.hs)(h,h,(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),T,T,T)),(0,mat4/* multiply */.lw)(h,e,h),h[12]=0,h[13]=0,h[14]=0,i.modelTransform=h,i.renderLocation=f}function mi(i,t,e,n){const o=n.worldUpAtPosition(e.origin,U.get()),r=bi(e,fi.POSITIVE_X),c=s(H.get(),r.edge*Math.PI/2);l(c,c,-Oi(e,o)),a(c,t,c),c[12]=0,c[13]=0,c[14]=0,i.modelTransform=c,i.renderLocation=r.position}function pi(i,t,e){const n=bi(e,fi.POSITIVE_Y),o=s(H.get(),n.edge*Math.PI/2);l(o,o,Ni),a(o,t,o),o[12]=0,o[13]=0,o[14]=0,i.modelTransform=o,i.renderLocation=n.position}var fi;function bi(i,t){switch(t){case fi.POSITIVE_X:return{basis:i.basis1,direction:1,position:g(U.get(),i.origin,i.basis1),edge:t};case fi.POSITIVE_Y:return{basis:i.basis2,direction:1,position:g(U.get(),i.origin,i.basis2),edge:t};case fi.NEGATIVE_X:return{basis:i.basis1,direction:-1,position:f(U.get(),i.origin,i.basis1),edge:t};case fi.NEGATIVE_Y:return{basis:i.basis2,direction:-1,position:f(U.get(),i.origin,i.basis2),edge:t}}}function Ti(i,t,e){const n=e.projectToRenderScreen(g(U.get(),i,t),o(U.get())),s=e.projectToRenderScreen(f(U.get(),i,t),o(U.get()));return I(f(n,n,s))}function hi(i){const t=(0,vec32.l)(i.basis1),e=(0,vec32.l)(i.basis2);return sliceToolConfig_g*Math.min(t,e)}function Ii(i){return hi(i)}function Ei(i){return 0!==i.direction[0]&&0!==i.direction[1]}function Ai(i){const t=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]];return new q({view:i,attached:!1,color:G(i.effectiveTheme),width:D,renderOccluded:ii.OccludeAndTransparent,geometry:[t],isDecoration:!0})}function ji(i){return new J({view:i,attached:!1,backgroundColor:k,gridColor:x(i.effectiveTheme),gridWidth:4,renderOccluded:ii.OccludeAndTransparent,isDecoration:!0})}function Ri(t,n,o,s=new i){if(null==t)return null;const{renderCoordsHelper:r}=n,a=r.fromRenderCoords(t.origin,new R({spatialReference:n.spatialReference}));if(null==a)return null;const c=w(a,o);if(null==c)return null;s.position=c;const l=2*u(t.basis1),d=2*u(t.basis2),g=K.renderUnitScaleFactor(n.spatialReference,o);s.width=l*g,s.height=d*g;const m=r.worldUpAtPosition(t.origin,U.get());return s.tilt=e(Oi(t,m)),s.heading=r.headingAtPosition(t.origin,t.basis1)-90,s}function wi(i,t,e){if(null==i)return null;const n=i.origin,o=U.get(),s=U.get(),r=U.get(),a=U.get();let c,l,u,d,m,p;g(o,n,i.basis1),g(o,o,i.basis2),g(s,n,i.basis1),E(s,s,i.basis2),E(r,n,i.basis1),E(r,r,i.basis2),E(a,n,i.basis1),g(a,a,i.basis2);for(const g of[o,s,r,a]){const i=t.fromRenderCoords(g,g,e);if(null==i)return null;c=null==c?i[0]:Math.min(c,i[0]),l=null==l?i[0]:Math.max(l,i[0]),u=null==u?i[1]:Math.min(u,i[1]),d=null==d?i[1]:Math.max(d,i[1]),m=null==m?i[2]:Math.min(m,i[2]),p=null==p?i[2]:Math.max(p,i[2])}return new j({xmin:c,xmax:l,ymin:u,ymax:d,zmin:m,zmax:p,spatialReference:e})}function Oi(i,t){return N(t,i.basis2,i.basis1)+Ni}function Pi(i,e,o,s,r,a,c=P()){return a.toRenderCoords(i,c.origin)?(a.worldBasisAtPosition(c.origin,O.X,c.basis1),a.worldBasisAtPosition(c.origin,O.Y,c.basis2),S(c.basis2,c.basis1,c.origin,c.plane),L(c,-n(e),v(c),c),L(c,n(o),c.basis1,c),m(c.basis1,c.basis1,s/2),m(c.basis2,c.basis2,r/2),V(c),c):(t.getLogger("esri.views.3d.analysis.Slice.sliceToolUtils").error(`Failed to project slice plane position, projection from ${i.spatialReference.wkid} is not supported`),null)}function Li(i,t){if(null==i?.position)return null;const e=B(i.position,t.spatialReference,t.elevationProvider);if(null==e)return null;const n=K.renderUnitScaleFactor(i.position.spatialReference,t.spatialReference),o=i.width*n,s=i.height*n;return{position:e,heading:i.heading,tilt:i.tilt,renderWidth:o,renderHeight:s}}function vi(i,t,e,n=P()){const o=Li(i,t);return null==o?null:Vi(o,t,e,n)}function Vi(i,t,e,n=P()){if(null==i)return null;const o=Pi(i.position,i.heading,i.tilt,i.renderWidth,i.renderHeight,t.renderCoordsHelper,n);return e.tiltEnabled||null==o||oi(o,t.renderCoordsHelper,o),o}!function(i){i[i.POSITIVE_X=0]="POSITIVE_X",i[i.POSITIVE_Y=1]="POSITIVE_Y",i[i.NEGATIVE_X=2]="NEGATIVE_X",i[i.NEGATIVE_Y=3]="NEGATIVE_Y"}(fi||(fi={}));const Ci=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom1;var _i,Mi;!function(i){i[i.HEADING=1]="HEADING",i[i.TILT=2]="TILT"}(_i||(_i={})),function(i){i[i.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL",i[i.VERTICAL=2]="VERTICAL",i[i.TILTED=3]="TILTED"}(Mi||(Mi={}));const Si=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom2,yi=(0,ray/* create */.vt)(),Ni=Math.PI/2,Ui=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom1,Hi=interactive_interfaces/* ManipulatorStateCustomFlags */.SJ.Custom2;function xi(i){return null!=("building-scene-3d"===i.type?i:null)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/quat.js
var quat = __webpack_require__(42927);
;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/ShiftManipulator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var ShiftManipulator_H;!function(e){e[e.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT",e[e.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"}(ShiftManipulator_H||(ShiftManipulator_H={}));class ShiftManipulator_I extends ee{constructor(a,n){const i=new RibbonLineMaterial/* RibbonLineMaterial */.W({width:1,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0}),s=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Opaque,isDecoration:!0}),c=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Opaque,isDecoration:!0}),l=new ColorMaterial/* ColorMaterial */.v({cullFace:basicInterfaces/* CullFaceOptions */.s2.Back,renderOccluded:Material/* RenderOccludedFlag */.m$.Opaque,isDecoration:!0}),m=new ColorMaterial/* ColorMaterial */.v({writeDepth:!1,cullFace:basicInterfaces/* CullFaceOptions */.s2.Front,renderOccluded:Material/* RenderOccludedFlag */.m$.Transparent,isDecoration:!0});super({view:a,...ShiftManipulator_S({offsetMode:n,tubeMaterial:s,tipMaterial:c,capMaterial:l,outlineMaterial:m,calloutMaterial:i})}),this._themeHandle=(0,reactiveUtils/* watch */.wB)((()=>a.effectiveTheme.accentColor),(r=>{const o=(0,colorUtils/* getContrast */.bJ)(r),a=Color/* default */.A.toUnitRGBA(r),n=Color/* default */.A.toUnitRGBA(o),p=Color/* default */.A.toUnitRGBA(Color/* default */.A.blendColors(o,r,.4)),u=Color/* default */.A.toUnitRGBA(Color/* default */.A.blendColors(o,r,.14));i.setParameters({color:a}),s.setParameters({color:u}),c.setParameters({color:n}),l.setParameters({color:p}),m.setParameters({color:a})}),reactiveUtils/* initial */.Vh)}destroy(){this._themeHandle.remove(),super.destroy()}}function ShiftManipulator_S({offsetMode:e,tubeMaterial:t,tipMaterial:r,capMaterial:o,outlineMaterial:a,calloutMaterial:n}){const i=e===ShiftManipulator_H.CENTER_ON_CALLOUT?sliceToolConfig_C:0,s=[(0,vec3f64/* fromValues */.fA)(i,0,-24),(0,vec3f64/* fromValues */.fA)(i,0,sliceToolConfig_S/2)],c=ShiftManipulator_J(s),l=ShiftManipulator_W({vertices:s,padding:0,materials:{tube:t,tip:r,cap:o}}),m=ShiftManipulator_W({vertices:s,padding:sliceToolConfig_U,materials:{tube:a,tip:a,cap:a}}),p=(0,GeometryUtil/* createPolylineGeometry */.Z8)(n,[[i,0,0],[i-sliceToolConfig_C,0,0]]),u=(0,GeometryUtil/* createPolylineGeometry */.Z8)(n,[[i,0,0],[i-sliceToolConfig_C,0,0]]);return{renderObjects:[...l.normal.map((e=>new RenderObject_e(e,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|Ci))),...m.normal.map((e=>new RenderObject_e(e,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|Ci))),new RenderObject_e(p,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|Ci|Si),...l.focused.map((e=>new RenderObject_e(e,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|Ci))),...m.focused.map((e=>new RenderObject_e(e,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|Ci))),new RenderObject_e(u,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|Ci|Si)],autoScaleRenderObjects:!1,collisionType:{type:"line",paths:[c]},collisionPriority:1,radius:sliceToolConfig_n,state:Ci}}function ShiftManipulator_W({vertices:e,padding:t,materials:r}){const o=o=>{const M=e.slice(),C=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),M[0],M[1]);(0,vec32.n)(C,C);const T=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),M[M.length-1],M[M.length-2]);if((0,vec32.n)(T,T),t>0){const e=(0,vec32.g)((0,vec3f64/* create */.vt)(),T,-t);M[M.length-1]=(0,vec32.f)(e,e,M[M.length-1]);const r=(0,vec32.g)((0,vec3f64/* create */.vt)(),C,-t);M[0]=(0,vec32.f)(r,r,M[0])}const E=o?sliceToolConfig_c:1,N=sliceToolConfig_x*E,F=sliceToolConfig_n*E,y=(0,mat4/* identity */.D_)(vectorStacks/* sm4d */.Rc.get());if(t>0){const e=N/4,r=(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),0,e,0),o=1+t/e;(0,mat4/* translate */.Tl)(y,y,r),(0,mat4/* scale */.hs)(y,y,(0,vec32.i)(vectorStacks/* sv3d */.rq.get(),o,o,o)),(0,mat4/* translate */.Tl)(y,y,(0,vec32.g)(r,r,-1/o))}const B=(0,mat4/* identity */.D_)((0,mat4f64/* create */.vt)()),D=(0,vec3f64/* fromValues */.fA)(0,1,0),P=(0,mat4/* fromQuat */.I0)((0,mat4f64/* create */.vt)(),(0,quat/* rotationTo */.Yc)(vectorStacks/* sq4d */.J8.get(),D,T));P[12]=M[M.length-1][0],P[13]=M[M.length-1][1],P[14]=M[M.length-1][2],(0,mat4/* multiply */.lw)(P,P,y);const x=r.tube,k=ShiftManipulator_z(sliceToolConfig_l*(o?sliceToolConfig_a:1)+t,M,x);k.transformation=B;const G=[k],q=r.tip,H=(0,GeometryUtil/* createConeGeometry */.EE)(q,N,F,24,!1,!1,!0);H.transformation=P,G.push(H);const I=r.cap,S=(0,GeometryUtil/* createConeGeometry */.EE)(I,N,F,24,!1,!0,!1);S.transformation=P,G.push(S);const W=(0,mat4/* fromQuat */.I0)((0,mat4f64/* create */.vt)(),(0,quat/* rotationTo */.Yc)(vectorStacks/* sq4d */.J8.get(),D,C));return W[12]=M[0][0],W[13]=M[0][1],W[14]=M[0][2],(0,mat4/* multiply */.lw)(W,W,y),G.push(H.instantiate({transformation:W})),G.push(S.instantiate({transformation:W})),G};return{normal:o(!1),focused:o(!0)}}function ShiftManipulator_z(e,t,r){const o=[],a=12;for(let n=0;n<a;n++){const t=n/a*2*Math.PI;o.push([Math.cos(t)*e,Math.sin(t)*e])}return (0,GeometryUtil/* createPathExtrusionGeometry */.Nq)(r,o,t,[],[],!1)}function ShiftManipulator_J(e,t){const r=(0,vec32.d)((0,vec3f64/* create */.vt)(),e[e.length-1],e[e.length-2]);(0,vec32.n)(r,r),(0,vec32.g)(r,r,sliceToolConfig_x),(0,vec32.f)(r,r,e[e.length-1]);{const t=(0,vec32.d)((0,vec3f64/* create */.vt)(),e[0],e[1]);return (0,vec32.n)(t,t),(0,vec32.g)(t,t,sliceToolConfig_x),(0,vec32.f)(t,t,e[0]),[t,...e,r]}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentMove.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ExtentMove_j{get _object(){return this._tool.object}get _operations(){return this._object.operations}constructor(t,e,o){this._tool=t,this._bounds=e,this._automaticLengthMeasurementUtils=o,this._moveXYTooltipInfo=null,this._moveZTooltipInfo=null;const i=this._tool,n=i.view;this.moveXYObjectManipulation=new MoveXYObjectManipulation_l({view:n,tool:i,object:this._object}),i.addHandles(this._createMoveXYObjectDragPipeline()),this.moveZManipulator=new ShiftManipulator_I(n,ShiftManipulator_H.CENTER_ON_CALLOUT),this.moveZManipulator.state|=Si,i.manipulators.add(this.moveZManipulator),i.addHandles(this._createMoveZDragPipeline()),i.addHandles(i.events.on("translate-stop",(()=>{this._moveXYTooltipInfo=null,this._moveZTooltipInfo=null})))}destroy(){this.moveXYObjectManipulation.destroy(),this._tool.manipulators.remove(this.moveZManipulator),this.moveZManipulator.destroy()}forEachManipulator(t){this.moveXYObjectManipulation.forEachManipulator(t),t(this.moveZManipulator,ManipulatorType_A.TRANSLATE_Z)}updateManipulators(t,e){const n=this.moveZManipulator,r=(0,mat4/* rotateZ */.Qr)(vectorStacks/* sm4d */.Rc.get(),t,Math.PI);r[12]=0,r[13]=0,r[14]=0,n.modelTransform=r,n.renderLocation=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e.origin,e.basis1)}getUpdatedTooltipInfo(){return this.moveXYObjectManipulation.grabbing||this.moveXYObjectManipulation.dragging?this._computeMoveXYTooltipInfo():this.moveZManipulator.focused?this._computeMoveZTooltipInfo():null}_computeMoveXYTooltipInfo(){const t=this._tool,o=this._moveXYTooltipInfo??=new TranslateTooltipInfo/* TranslateTooltipInfo */.M({sketchOptions:t.sketchOptions});if(this.moveXYObjectManipulation.dragging){const e=this._bounds,i=e.mapBoundsStart.origin,n=e.mapBounds.origin,{renderSpatialReference:a}=t.view;if(!a)return null;const s=this._automaticLengthMeasurementUtils.autoDistance2D(i,n,a);if(null==s)return null;o.distance=s}else o.distance=quantityUtils/* zeroMeters */.r7;return o}_computeMoveZTooltipInfo(){const t=this._tool,o=this._moveZTooltipInfo??=new TranslateZTooltipInfo_i({sketchOptions:t.sketchOptions});if(this.moveZManipulator.dragging){const e=this._bounds,i=e.mapBoundsStart.origin,n=e.mapBounds.origin,{renderSpatialReference:a}=t.view;if(!a)return null;const s=(0,euclideanLengthMeasurementUtils/* verticalSignedDistance */.cL)(i,n,a);if(null==s)return null;o.distance=s}else o.distance=quantityUtils/* zeroMeters */.r7;return o}_createMoveXYObjectDragPipeline(){return this.moveXYObjectManipulation.createDragPipeline(((t,e,o)=>this._buildMoveDragPipeline(e,o)))}_createMoveZDragPipeline(){if(!this._operations)return (0,handleUtils/* makeHandle */.hA)();const e=this._operations.data.spatialReference;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(this.moveZManipulator,((t,o,i)=>{const a=(0,vec3f64/* clone */.o8)(t.renderLocation),s=o.next(dragEventPipeline3D_G(this._tool.view,a,e)).next((0,dragEventPipeline/* addScreenDelta */.sO)());this._buildMoveDragPipeline(s,i)}))}_buildMoveDragPipeline(t,e){const{_tool:o,_object:i}=this;t.next((t=>("start"===t.action&&(o.inputState={type:"move"},this._bounds.backupMapBounds(),o.events.emit("translate-start",{object:i,dxScreen:t.screenDeltaX,dyScreen:t.screenDeltaY})),t))).next((0,dragEventPipeline/* addMapDelta */.EX)()).next(this._updateGeometry()).next((t=>{const e={object:i,dxScreen:t.screenDeltaX,dyScreen:t.screenDeltaY};switch(t.action){case"start":case"update":(t.mapEnd.x-t.mapStart.x||t.mapEnd.y-t.mapStart.y||(t.mapEnd.z??0)-(t.mapStart.z??0))&&o.events.emit("translate",e);break;case"end":o.inputState=null,o.events.emit("translate-stop",e)}return t})),e.next((()=>{null!=o.inputState&&o.events.emit("translate-stop",{object:i,dxScreen:0,dyScreen:0}),o.cancelDrag()}))}_updateGeometry(){const t=this._tool;return e=>{if(null==t.inputState||"move"!==t.inputState.type)return e;const o="start"===e.action?editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP:editGeometry_interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS;if(this._operations){const t=this._operations.move(e.mapDeltaX,e.mapDeltaY,e.mapDeltaZ,o);this._bounds.updateMapBoundsFromOperation(t)}return e}}}

;// ../node_modules/@arcgis/core/views/3d/analysis/images/generateTextures.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const generateTextures_t="theme-style";function generateTextures_e(t,e){return generateTextures_a(generateTextures_r(generateTextures_n(generateTextures_o(t),e)),e.size)}function generateTextures_n(e,{accentColor:n,contrastColor:o}){const r=n.toHex(),a=n.a,s=o.toHex(),i=o.a,c=e.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(generateTextures_t);return c&&(c.innerHTML=`\n      .contrast-fill { fill: ${s}; fill-opacity: ${i}; }\n      .contrast-stroke { stroke: ${s}; stroke-opacity: ${i};  }\n      .accent-fill { fill: ${r}; fill-opacity: ${a}; }\n      .accent-stroke { stroke: ${r}; stroke-opacity:  ${a}; }`),e}function generateTextures_o(t){const e=t.split(",")[1],n=atob(e);return(new DOMParser).parseFromString(n,"image/svg+xml")}function generateTextures_r(t){const e=(new XMLSerializer).serializeToString(t);return`data:image/svg+xml;base64,${btoa(e)}`}function generateTextures_a(t,e){const n=new Image(e,e);return n.src=t,n}

;// ../node_modules/@arcgis/core/views/3d/analysis/images/heading-rotate-svg.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const heading_rotate_svg_I="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NiIgY2xhc3M9ImFjY2VudC1maWxsIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI0Ljk5IiBkPSJNMjAuMDUgNDAuODZhMTUuMDUgMTUuMDUgMCAwIDAgMTcuMTQtMS41IDE1LjA1IDE1LjA1IDAgMCAwIDQuNDctMTYuNjUgMTUuMDUgMTUuMDUgMCAwIDAtMjIuNzItNy4xNSAxNS4wNSAxNS4wNSAwIDAgMC01LjUgNy4xNSIgY2xhc3M9ImNvbnRyYXN0LXN0cm9rZSIvPjxwYXRoIGQ9Im0xMC45NyAzNS41NyA1LjM4IDEyLjA3IDcuNzktMTMuNDd6IiBjbGFzcz0iY29udHJhc3QtZmlsbCIvPjwvc3ZnPg==";

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js + 3 modules
var Texture = __webpack_require__(17342);
;// ../node_modules/@arcgis/core/views/3d/analysis/images/Factory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Factory_a=64;function Factory_l(r,l){const{accentColor:n,contrastColor:c,preMultiplyAlpha:i}=l;return r.fromData(`heading-rotate:[accent:${n},contrast:${c},size:${Factory_a}]`,(()=>new Texture/* Texture */.g(generateTextures_e(heading_rotate_svg_I,{accentColor:n,contrastColor:c,size:Factory_a}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:i})))}function Factory_n(o,l){const{accentColor:n,contrastColor:c,preMultiplyAlpha:i}=l;return o.fromData(`tilt-rotate:[accent:${n},contrast:${c},size:${Factory_a}]`,(()=>new e(t(r,{accentColor:n,contrastColor:c,size:Factory_a}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:i})))}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ITexture.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ITexture_t(t){return!!t.update}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/ImageMaterial.glsl.js
var ImageMaterial_glsl = __webpack_require__(44350);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ImageMaterialTechnique_j extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,r){super(e,r,new ReloadableShaderModule/* ReloadableShaderModule */.$(ImageMaterial_glsl.I,(()=>__webpack_require__.e(/* import() */ 3010).then(__webpack_require__.bind(__webpack_require__, 3010)))),ImageMaterialTechnique_I)}_getPipelineState(t,r){const{oitPass:m,output:d,hasOccludees:j,cullFace:I}=t,S=m===OITPass/* OITPass */.Y.NONE;return (0,renderState/* makePipelineState */.Ey)({blending:(0,ShaderOutput/* isColorOrColorEmission */.RN)(d)?S?renderState/* premultipliedAlpha */.RC:(0,OrderIndependentTransparency/* oitBlending */.ez)(m):null,culling:(0,renderState/* cullingParams */.Xt)(I),depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(m)},depthWrite:(0,OrderIndependentTransparency/* depthWrite */.z5)(t),drawBuffers:(0,OrderIndependentTransparency/* getDrawBuffers */.m6)(m,d),colorWrite:renderState/* defaultColorWrite */.kn,stencilWrite:j?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:j?r?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:(0,OrderIndependentTransparency/* oitPolygonOffset */.mE)(t)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const ImageMaterialTechnique_I=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.UV0,2],[VertexAttribute/* VertexAttribute */.r.PERSPECTIVEDIVIDE,3]]);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ImageMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ImageMaterialTechniqueConfiguration_a extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(e){super(),this.draped=e,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.None,this.emissionSource=Emissions_glsl/* EmissionSource */.ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.objectAndLayerIdColorInstanced=!1,this.snowCover=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],ImageMaterialTechniqueConfiguration_a.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"terrainDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"cullAboveTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],ImageMaterialTechniqueConfiguration_a.prototype,"perspectiveInterpolation",void 0);

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ImageMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ImageMaterial_ extends TriangleMaterial/* TriangleMaterial */.W{constructor(e){super(e,ImageMaterial_x),this.vertexAttributeLocations=ImageMaterialTechnique_I,this.supportsEdges=!0,this.produces=new Map([[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,e=>(0,ShaderOutput/* isHighlightOrOID */.CL)(e)],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,e=>(0,ShaderOutput/* isColor */._o)(e)&&this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,ShaderOutput/* isColor */._o)(e)&&!this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e=>(0,ShaderOutput/* isColor */._o)(e)||(0,ShaderOutput/* isHighlightOrOID */.CL)(e)]]),this._configuration=new ImageMaterialTechniqueConfiguration_a(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new ImageMaterial_b(e)}createBufferWriter(){let e=DefaultLayouts/* PositionUvLayout */.l5;return this.parameters.perspectiveInterpolation&&(e=e.clone().f32(VertexAttribute/* VertexAttribute */.r.PERSPECTIVEDIVIDE)),new ImageMaterial_E(e)}}class ImageMaterial_b extends GLMaterial/* default */.A{constructor(e){super({...e,...e.material.parameters}),this.parameters=e;const t=this._material.parameters.texture;ITexture_t(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(ImageMaterialTechnique_j,e)}}class ImageMaterial_E extends DefaultBufferWriter/* DefaultBufferWriter */.Z{write(t,r,i,s,a,o){for(const n of this.vertexBufferLayout.fields.keys()){const s=i.get(n);if(s)if(n===VertexAttribute/* VertexAttribute */.r.PERSPECTIVEDIVIDE){(0,Util/* assert */.vA)(1===s.size);const t=a.getField(n,BufferView/* BufferViewFloat */.Y$);t&&(0,bufferWriterUtils/* writeBufferFloat */.uO)(s,t,o)}else (0,bufferWriterUtils/* writeDefaultAttribute */.zC)(n,s,t,r,a,o)}return null}}class ImageMaterial_x extends Material/* MaterialParameters */.qA{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}

;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/RotateManipulator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RotateManipulator_w extends ee{constructor(i,n){const a=(0,colorUtils/* multiplyOpacity */._L)(i.effectiveTheme.accentColor,.5),c=(0,colorUtils/* getContrast */.bJ)(i.effectiveTheme.accentColor),m=n(a,c),u=new ImageMaterial_({draped:!1,texture:m.texture,writeDepth:!1,renderOccluded:Material/* RenderOccludedFlag */.m$.Opaque,isDecoration:!0}),d=manipulatorUtils_j.calloutWidth,p=new RibbonLineMaterial/* RibbonLineMaterial */.W({width:d,renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0});super({view:i,...RotateManipulator_g({imageMaterial:u,calloutMaterial:p})}),this._material=u,this._textureHandle=m,this._themeHandle=(0,reactiveUtils/* watch */.wB)((()=>i.effectiveTheme.accentColor),(i=>{const o=(0,colorUtils/* multiplyOpacity */._L)(i,.5),s=(0,colorUtils/* getContrast */.bJ)(i),a=this._textureHandle;this._textureHandle=n(o,s),u.setParameters({texture:this._textureHandle.texture}),a?.release(),p.setParameters({color:Color/* default */.A.toUnitRGBA(i)})}),reactiveUtils/* initial */.Vh)}destroy(){this._textureHandle=(0,maybe/* releaseMaybe */.Gz)(this._textureHandle),this._themeHandle.remove(),this._material.dispose(),super.destroy()}}function RotateManipulator_g({imageMaterial:e,calloutMaterial:t}){const{focusMultiplier:r,calloutLength:i,discRadius:o}=manipulatorUtils_j,s=o*r,a=(e,t)=>{const r=[0,1,2,2,3,0];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n([i-e,-e,0,i+e,-e,0,i+e,e,0,i-e,e,0],r,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n([0,0,1,0,1,1,0,1],r,2,!0)]])},f=(0,GeometryUtil/* createPolylineGeometry */.Z8)(t,[[0,0,0],[i-o,0,0]]),b=(0,GeometryUtil/* createPolylineGeometry */.Z8)(t,[[0,0,0],[i-s,0,0]]),h=Ci;return{autoScaleRenderObjects:!1,collisionPriority:1,collisionType:{type:"disc",direction:[0,0,1],offset:[i,0,0]},focusMultiplier:r,radius:o,renderObjects:[new RenderObject_e(a(o,e),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|h),new RenderObject_e(f,interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|h),new RenderObject_e(a(s,e),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|h),new RenderObject_e(b,interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|h)],state:h}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/UpdateVertices.js
var UpdateVertices = __webpack_require__(63387);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/ExtentRotateTooltipInfo.js
var ExtentRotateTooltipInfo = __webpack_require__(5577);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentRotate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ExtentRotate_M{get _object(){return this._tool.object}get _operations(){return this._object.operations}constructor(t,e,o){this._tool=t,this._bounds=e,this._snapRotation=o,this._rotateTooltipInfo=null,this._startAngle=0,this._endAngle=0;const r=this._tool,a=r.view,n=!a.stage?.renderView.renderingContext.driverTest.svgPremultipliesAlpha.result;this.rotateManipulator=new RotateManipulator_w(a,((t,e)=>Factory_l(a.stage.textures,{accentColor:t,contrastColor:e,preMultiplyAlpha:n}))),r.addHandles([this.rotateManipulator.events.on("grab-changed",(t=>this._onGrabChanged(t))),this._createRotateDragPipeline(this.rotateManipulator)]),r.manipulators.add(this.rotateManipulator),r.addHandles([r.events.on("rotate-start",(t=>this._startAngle=t.angle)),r.events.on("rotate",(t=>this._endAngle=t.angle)),r.events.on("rotate-stop",(()=>{this._startAngle=0,this._endAngle=0}))])}destroy(){this._tool.manipulators.remove(this.rotateManipulator),this.rotateManipulator.destroy()}forEachManipulator(t){t(this.rotateManipulator,ManipulatorType_A.ROTATE)}updateManipulators(t,r){const a=this._bounds.mapBounds.plane[2]<0?Math.PI:0,n=(0,mat4/* rotateX */.eL)(vectorStacks/* sm4d */.Rc.get(),t,a);n[12]=0,n[13]=0,n[14]=0,this.rotateManipulator.modelTransform=n,this.rotateManipulator.renderLocation=(0,vec32.f)(vectorStacks/* sv3d */.rq.get(),r.origin,r.basis1)}getUpdatedTooltipInfo(){return this.rotateManipulator.focused?this._computeRotateTooltipInfo():null}_computeRotateTooltipInfo(){const t=this._rotateTooltipInfo??=new ExtentRotateTooltipInfo/* ExtentRotateTooltipInfo */.d({sketchOptions:this._tool.sketchOptions});return t.angle=this._startAngle-this._endAngle,t}_onGrabChanged({action:t,screenPoint:e}){const o=this._tool,r=this._bounds;if("start"!==t||!e)return;const a=li(r.displayBounds,o.view.renderCoordsHelper,_i.HEADING,(0,plane/* create */.vt)()),n=ray_m(o.view.state.camera,e);(0,plane/* intersectRay */.Ui)(a,n,vectorStacks/* sv3d */.rq.get())&&(r.backupMapBounds(),o.inputState={type:"rotate",rotatePlane:a})}_createRotateDragPipeline(e){const{_tool:o,_object:r}=this;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(e,((e,a,n)=>{const s=o.inputState;null!=s&&(a.next((t=>("start"===t.action&&o.events.emit("rotate-start",{object:r,angle:0}),t))).next(dragEventPipeline3D_T(o.view,s.rotatePlane)).next(this._renderPlaneToAngle()).next(...this._snapRotation()).next(this._updateGeometry()).next((e=>{const a={object:r,angle:(0,mathUtils/* rad2deg */.KJ)(e.rotateAngle)};switch(e.action){case"start":case"update":o.events.emit("rotate",a);break;case"end":o.inputState=null,o.events.emit("rotate-stop",a)}return e})),n.next((()=>{null!=o.inputState&&o.events.emit("rotate-stop",{object:r,angle:0}),o.cancelDrag()})))}))}_renderPlaneToAngle(){return t=>{const e=manipulatorUtils_w(t.renderStart,t.renderEnd,this._bounds.displayBounds.origin,(0,plane/* getNormal */.Qj)(t.plane));return{...t,rotateAngle:e}}}_updateGeometry(){const t=this._bounds;return e=>{const o=(0,vec32.c)((0,vec3f64/* create */.vt)(),t.mapBoundsStart.origin),s="start"===e.action?editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP:editGeometry_interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS;if(this._operations){const r=this._operations.rotate(o,e.rotateAngle,s,UpdateVertices/* AccumulationType */.K.REPLACE);(0,boundedPlane.a)(t.mapBoundsStart,t.mapBounds),t.updateMapBoundsFromOperation(r)}return e}}}

;// ../node_modules/@arcgis/core/views/3d/analysis/Slice/ResizeManipulator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ResizeManipulator_v extends ee{constructor(o,a){const l=Ei(a),m=l?sliceToolConfig_b:sliceToolConfig_d,f=m*sliceToolConfig_s,d=sliceToolConfig_d,u={renderOccluded:Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,isDecoration:!0},j=new RibbonLineMaterial/* RibbonLineMaterial */.W({...u,width:m}),h=new RibbonLineMaterial/* RibbonLineMaterial */.W({...u,width:f}),v=new RibbonLineMaterial/* RibbonLineMaterial */.W({...u,width:d});super({view:o,...manipulatorUtils_b,...ResizeManipulator_M({isCorner:l,unfocusedMaterial:j,focusedMaterial:h,outlineMaterial:v})}),this._themeHandle=(0,reactiveUtils/* watch */.wB)((()=>o.effectiveTheme.accentColor),(r=>{const t=Color/* default */.A.toUnitRGBA(r);j.setParameters({color:t}),h.setParameters({color:t}),v.setParameters({color:t})}),reactiveUtils/* initial */.Vh)}destroy(){this._themeHandle.remove(),super.destroy()}}function ResizeManipulator_M({isCorner:e,unfocusedMaterial:r,focusedMaterial:t,outlineMaterial:i}){const s=e?[(0,vec3f64/* fromValues */.fA)(1,0,0),(0,vec3f64/* fromValues */.fA)(0,0,0),(0,vec3f64/* fromValues */.fA)(0,1,0)]:[(0,vec3f64/* fromValues */.fA)(1,0,0),(0,vec3f64/* fromValues */.fA)(-1,0,0)];return{renderObjects:[new RenderObject_e((0,GeometryUtil/* createPolylineGeometry */.Z8)(r,s),interactive_interfaces/* ManipulatorStateFlags */.p7.Unfocused|Ui),new RenderObject_e((0,GeometryUtil/* createPolylineGeometry */.Z8)(t,s),interactive_interfaces/* ManipulatorStateFlags */.p7.Focused|Ui),new RenderObject_e((0,GeometryUtil/* createPolylineGeometry */.Z8)(i,s),Hi)],collisionType:{type:"line",paths:[s]},radius:e?sliceToolConfig_k:sliceToolConfig_q,state:Ui}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/support/editPlaneUtils.js
var editPlaneUtils = __webpack_require__(3183);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/extentUtils.js
var extentUtils = __webpack_require__(41811);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/extentUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class extentUtils_C{constructor(t,i){this._tool=t,this.mapBounds=(0,boundedPlane.d)(),this.mapBoundsStart=(0,boundedPlane.d)(),this.displayBounds=(0,boundedPlane.d)(),t.addHandles((0,reactiveUtils.on)((()=>t.object),"modified-externally",(()=>this._resetMapBounds()),{onListenerAdd:()=>this._resetMapBounds()})),this._onDisplayBoundsChanged=i}get displayBoundsMargin(){const{view:s,object:t}=this._tool,i=manipulatedObjectUtils_t(t),o=s.pointsOfInterest?.centerOnSurfaceFrequent.location??i?.extent?.center;return o?extentUtils_D*s.pixelSizeAt(o):0}backupMapBounds(){(0,boundedPlane.a)(this.mapBounds,this.mapBoundsStart)}updateDisplayBounds(){this._calculateDisplayBounds(),this._onDisplayBoundsChanged?.()}updateMapBoundsFromOperation(s){(0,editPlaneUtils/* apply */.Bb)(s,this.mapBounds),this.updateDisplayBounds()}updateMapBoundsFromOperationInverse(s){(0,editPlaneUtils/* applyInverse */.fJ)(s,this.mapBounds),this.updateDisplayBounds()}_resetMapBounds(){this._calculateMapBounds(),this.updateDisplayBounds()}_calculateMapBounds(){const{view:s,attachmentOrigin:i,object:o}=this._tool,a=o.operations?.data;if(!a)return;const e=a.geometry;this.spatialReference=e.spatialReference;const n=geometryUtils_n(e);(0,vec2/* scale */.hs)(n,n,-1);const r=i?s.pixelSizeAt(i,e.spatialReference):0,p=extentUtils_O*r,d=a.coordinateHelper.hasZ()&&"on-the-ground"!==o.elevationInfo.mode;(0,editPlaneUtils/* calculateOrientedBounds */.G3)(n,a,p,this.mapBounds,d)}_calculateDisplayBounds(){const{view:s,attachmentOrigin:t}=this._tool,i=t?.z??(0,elevationAlignmentUtils/* evaluateElevationAlignmentAtPoint */.nG)(this.mapBounds.origin,s.elevationProvider,ElevationContext/* ElevationContext */.F.fromElevationInfo(this._tool.object.elevationInfo),s.renderCoordsHelper);extentUtils_U(this.mapBounds,i??0,s.renderCoordsHelper,this.spatialReference,this.displayBoundsMargin,this.displayBounds)}}const extentUtils_D=10,extentUtils_O=80;function extentUtils_U(s,t,c,l,m=0,B){B||(B=(0,boundedPlane.d)());const M=vectorStacks/* sv3d */.rq.get();(0,vec32.f)(M,s.origin,s.basis1),(0,vec32.f)(M,M,s.basis2),c.toRenderCoords(M,l,M);const y=vectorStacks/* sv3d */.rq.get();(0,vec32.f)(y,s.origin,s.basis1),(0,vec32.d)(y,y,s.basis2),c.toRenderCoords(y,l,y);const j=vectorStacks/* sv3d */.rq.get();(0,vec32.d)(j,s.origin,s.basis1),(0,vec32.d)(j,j,s.basis2),c.toRenderCoords(j,l,j);const v=vectorStacks/* sv3d */.rq.get();(0,vec32.d)(v,s.origin,s.basis1),(0,vec32.f)(v,v,s.basis2),c.toRenderCoords(v,l,v),(0,vec32.f)(B.origin,M,y),(0,vec32.f)(B.origin,B.origin,j),(0,vec32.f)(B.origin,B.origin,v),(0,vec32.g)(B.origin,B.origin,.25),(0,vec32.d)(M,M,B.origin),(0,vec32.d)(y,y,B.origin),(0,vec32.d)(j,j,B.origin),(0,vec32.d)(v,v,B.origin);const _=(0,vec32.m)(vectorStacks/* sv3d */.rq.get(),M,y,.5),R=(0,vec32.m)(vectorStacks/* sv3d */.rq.get(),j,v,.5);(0,vec32.g)(R,R,-1),(0,vec32.m)(B.basis1,_,R,.5);const x=(0,vec32.m)(vectorStacks/* sv3d */.rq.get(),M,v,.5),C=(0,vec32.m)(vectorStacks/* sv3d */.rq.get(),y,j,.5);(0,vec32.g)(C,C,-1),(0,vec32.m)(B.basis2,x,C,.5);const D=(0,vec32.h)(vectorStacks/* sv3d */.rq.get(),B.basis1,B.basis2);(0,vec32.h)(B.basis2,D,B.basis1),(0,vec32.n)(B.basis1,B.basis1);const O=Math.max(Math.abs((0,vec32.e)(B.basis1,M)),Math.abs((0,vec32.e)(B.basis1,y)),Math.abs((0,vec32.e)(B.basis1,j)),Math.abs((0,vec32.e)(B.basis1,v)));(0,vec32.n)(B.basis2,B.basis2);const U=Math.max(Math.abs((0,vec32.e)(B.basis2,M)),Math.abs((0,vec32.e)(B.basis2,y)),Math.abs((0,vec32.e)(B.basis2,j)),Math.abs((0,vec32.e)(B.basis2,v)));(0,vec32.g)(B.basis1,B.basis1,O+m),(0,vec32.g)(B.basis2,B.basis2,U+m);const S=(0,vec32.c)(vectorStacks/* sv3d */.rq.get(),s.origin);return S[2]=t,c.toRenderCoords(S,l,S),(0,plane/* fromPositionAndNormal */.O_)(S,D,B.plane),(0,plane/* projectPoint */._I)(B.plane,B.origin,B.origin),(0,boundedPlane.u)(B),B}function extentUtils_S(s,t,i,a){return (0,vec32.d)(extentUtils_H,(0,vec32.d)(extentUtils_H,s.origin,s.basis1),s.basis2),(0,vec32.b)(extentUtils_A,extentUtils_H,s.basis1,2),(0,vec32.b)(extentUtils_k,extentUtils_A,s.basis2,2),(0,vec32.b)(extentUtils_I,extentUtils_H,s.basis2,2),extentUtils_H[2]=extentUtils_A[2]=extentUtils_k[2]=extentUtils_I[2]=t,(0,extentUtils/* autoSize2D */.b)({topLeft:extentUtils_I,topRight:extentUtils_k,bottomRight:extentUtils_A,bottomLeft:extentUtils_H,spatialReference:i,automaticLengthMeasurementUtils:a})}const extentUtils_I=(0,vec3f64/* create */.vt)(),extentUtils_k=(0,vec3f64/* create */.vt)(),extentUtils_A=(0,vec3f64/* create */.vt)(),extentUtils_H=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/ExtentScaleTooltipInfo.js
var ExtentScaleTooltipInfo = __webpack_require__(63874);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/ExtentScale.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ExtentScale_v{get _object(){return this._tool.object}get _operations(){return this._object.operations}get zMax(){if(!this._zMaxDirty||!this._operations)return this._zMax;const t=this._operations.data;if(t.geometry.hasZ){const e=t.coordinateHelper;this._zMax=Number.NEGATIVE_INFINITY;for(const s of t.components)for(const t of s.vertices){const s=e.getZ(t.pos)??0;this._zMax=Math.max(s,this._zMax)}}else this._zMax=0;return this._zMaxDirty=!1,this._zMax}constructor(t,e,s){this._tool=t,this._bounds=e,this._preserveAspectRatioStep=s,this._resizeHandles=[{direction:[1,0]},{direction:[1,1]},{direction:[0,1]},{direction:[-1,1]},{direction:[-1,0]},{direction:[-1,-1]},{direction:[0,-1]},{direction:[1,-1]}],this._displayBoundsStart=(0,boundedPlane.d)(),this._displayBoundsMarginStart=0,this._zMax=0,this._zMaxDirty=!0;const i=this._tool,a=i.view;this.resizeManipulators=this._resizeHandles.map((t=>{const e=new ResizeManipulator_v(a,t);return i.addHandles([e.events.on("grab-changed",(t=>this._onGrabChanged(t))),this._createResizeDragPipeline(e,t)]),e})),i.manipulators.addMany(this.resizeManipulators),this._operations&&i.addHandles(this._operations.data.on("change",(()=>{"resize"!==i.inputState?.type&&(this._zMaxDirty=!0)})))}destroy(){this.forEachManipulator((t=>{this._tool.manipulators.remove(t),t.destroy()}))}forEachManipulator(t){this.resizeManipulators.forEach((e=>t(e,ManipulatorType_A.SCALE)))}updateManipulators(t,e){this.resizeManipulators.forEach(((s,i)=>{gi(s,this._resizeHandles[i],t,e)}))}getUpdatedTooltipInfo(){if(!this.resizeManipulators.some((t=>t.focused)))return null;const t=this._tooltipInfo??=new ExtentScaleTooltipInfo/* ExtentScaleTooltipInfo */.c({sketchOptions:this._tool.sketchOptions}),e=extentUtils_S(this._bounds.mapBounds,this.zMax,this._bounds.spatialReference,this._tool.automaticLengthMeasurementUtils);return e&&(t.xSize=e.xSize,t.ySize=e.ySize),this.resizeManipulators.some((t=>t.dragging))||(t.xScale=1,t.yScale=1),t}_onGrabChanged({action:t,screenPoint:e}){const s=this._tool,i=this._bounds;if("start"!==t||!e)return;const a=ray_m(s.view.state.camera,e);(0,plane/* intersectRay */.Ui)(i.displayBounds.plane,a,vectorStacks/* sv3d */.rq.get())&&(i.backupMapBounds(),(0,boundedPlane.a)(i.displayBounds,this._displayBoundsStart),this._displayBoundsMarginStart=i.displayBoundsMargin,s.inputState={type:"resize"})}_createResizeDragPipeline(t,e){const{_tool:s,_object:i}=this;return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(t,((t,a,o)=>{null!=s.inputState&&(a.next((t=>("start"===t.action&&s.events.emit("scale-start",{object:i,xScale:1,yScale:1}),{...t,handle:e}))).next(dragEventPipeline3D_T(s.view,this._displayBoundsStart.plane)).next(this._renderPlaneToFactors()).next(...this._preserveAspectRatioStep()).next(this._updateGeometry()).next((t=>{const e=this._tooltipInfo;e&&(e.xScale=t.factor1,e.yScale=t.factor2);const a={object:i,xScale:t.factor1,yScale:t.factor2};switch(t.action){case"start":case"update":s.events.emit("scale",a);break;case"end":s.inputState=null,s.events.emit("scale-stop",a)}return t})),o.next((()=>{null!=s.inputState&&s.events.emit("scale-stop",{object:i,xScale:1,yScale:1}),s.cancelDrag()})))}))}_renderPlaneToFactors(){const t=this._bounds;return e=>{const s=this._displayBoundsStart,c=e.handle.direction,p=t.displayBoundsMargin,l=this._displayBoundsMarginStart,d=(0,vec32.c)(vectorStacks/* sv3d */.rq.get(),s.origin);(0,vec32.b)(d,d,s.basis1,-c[0]),(0,vec32.b)(d,d,s.basis2,-c[1]);const h=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e.renderEnd,d),m=(0,vec32.d)(vectorStacks/* sv3d */.rq.get(),e.renderStart,d),S=Ei(e.handle),y=Ii(s),g=Ii(t.displayBounds)/y,M=(t,e)=>{if(0===t)return 1;let s=(0,vec32.l)(e),i=.5*t*(0,vec32.e)(e,h)/s;const a=i<0?-1:1;if(S){i+=(s-.5*t*(0,vec32.e)(e,m)/s)*a*g}const o=s<1.5*l?1:ExtentScale_B;return s=Math.max(s-l,ExtentScale_B),a>0&&(i-=p),a*Math.max(a*(i/s),o)};return{...e,factor1:M(c[0],s.basis1),factor2:M(c[1],s.basis2)}}}_updateGeometry(){const o=this._bounds;return r=>{const n=(0,vec32.c)((0,vec3f64/* create */.vt)(),o.mapBoundsStart.origin);(0,vec32.b)(n,n,o.mapBoundsStart.basis1,-r.handle.direction[0]),(0,vec32.b)(n,n,o.mapBoundsStart.basis2,-r.handle.direction[1]);const p=(0,vec2/* set */.hZ)((0,vec2f64/* create */.vt)(),o.mapBoundsStart.basis1[0],o.mapBoundsStart.basis1[1]);(0,vec2/* normalize */.S8)(p,p);const d="start"===r.action?editGeometry_interfaces/* AccumulationBehavior */.Y.NEW_STEP:editGeometry_interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS;if(this._operations){const t=this._operations.scale(n,p,r.factor1,r.factor2,d,UpdateVertices/* AccumulationType */.K.REPLACE);(0,boundedPlane.a)(o.mapBoundsStart,o.mapBounds),o.updateMapBoundsFromOperation(t)}return r}}}const ExtentScale_B=1e-6;

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/PreserveAspectRatio.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PreserveAspectRatio_a{constructor(){this._lastDragEvent=null,this._next=null,this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const e={...this._lastDragEvent,action:"update"};t&&PreserveAspectRatio_n(e),this._next.execute(e)}this._enabled=t}createDragEventPipelineStep(){this._lastDragEvent=null;const t=new dragEventPipeline/* EventPipeline */.rh;return this._next=t,[t=>(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled&&PreserveAspectRatio_n(t),t),t]}get test(){}}function PreserveAspectRatio_n(e){const a=Ei(e.handle)?Math.max(Math.abs(e.factor1),Math.abs(e.factor2)):0===e.handle.direction[0]?Math.abs(e.factor2):Math.abs(e.factor1);e.factor1=e.factor1<0?-a:a,e.factor2=e.factor2<0?-a:a}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/extentTransform/SnapRotation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SnapRotation_n{constructor(){this._lastDragEvent=null,this._next=null,this.incrementRadians=(0,mathUtils/* deg2rad */.kU)(5),this._enabled=!1}get enabled(){return this._enabled}set enabled(t){if(this._enabled!==t&&null!=this._lastDragEvent&&null!=this._next){const e={...this._lastDragEvent,action:"update"};t&&this._adjustRotation(e),this._next.execute(e)}this._enabled=t}createDragEventPipelineStep(){this._lastDragEvent=null;const t=new dragEventPipeline/* EventPipeline */.rh;return this._next=t,[t=>(this._lastDragEvent="end"!==t.action?{...t}:null,this._enabled&&this._adjustRotation(t),t),t]}_adjustRotation(t){t.rotateAngle=Math.round(t.rotateAngle/this.incrementRadians)*this.incrementRadians}}

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/transform/ExtentTransformTool.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ExtentTransformTool_S=class extends InteractiveToolBase/* InteractiveToolBase */.g{get updating(){return!!this.object.updating}constructor(t){super(t),this.events=new Evented/* default */.A,this.enableZ=!0,this.enableScaling=!0,this.enableRotation=!0,this.sketchOptions=new SketchOptions/* default */.A,this._preserveAspectRatio=new PreserveAspectRatio_a,this._snapRotation=new SnapRotation_n,this.grabbing=!1,this.inputState=null,this._attachmentOrigin=null,this.type="transform-3d",this._outlineVisualElement=null}initialize(){const{view:t,object:e}=this,s=this._bounds=new extentUtils_C(this,(()=>this._updateManipulators()));this._extentMove=new ExtentMove_j(this,s,this.automaticLengthMeasurementUtils),this._extentScale=new ExtentScale_v(this,s,(()=>this._preserveAspectRatio.createDragEventPipelineStep())),this._extentRotate=new ExtentRotate_M(this,s,(()=>this._snapRotation.createDragEventPipelineStep())),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.enableZ),(()=>this._updateManipulatorAvailability(this._extentMove.moveZManipulator,ManipulatorType_A.TRANSLATE_Z))),(0,reactiveUtils/* watch */.wB)((()=>this.enableScaling),(()=>this._extentScale.forEachManipulator((t=>this._updateManipulatorAvailability(t,ManipulatorType_A.SCALE))))),(0,reactiveUtils/* watch */.wB)((()=>this.enableRotation),(()=>this._updateManipulatorAvailability(this._extentRotate.rotateManipulator,ManipulatorType_A.ROTATE)))]),this._updateManipulators(),this._updateAllManipulatorAvailability();const n=visualElementUtils_l({view:t,object:e,forEachManipulator:t=>this._forEachManipulator(t),onManipulatorsChanged:()=>(0,handleUtils/* makeHandle */.hA)()});if(null!=n){const{visualElement:t}=n;t instanceof OutlineVisualElement_j&&(this._outlineVisualElement=t,this.addHandles(t.events.on("attachment-origin-changed",(()=>this._bounds.updateDisplayBounds())))),this.addHandles(n)}this.addHandles([e.on("committed",(()=>this._onGeometryChanged())),(0,reactiveUtils/* watch */.wB)((()=>this.object.visible),(()=>this._updateAllManipulatorAvailability())),(0,reactiveUtils/* watch */.wB)((()=>this.object.isDraped),(()=>this._graphicDrapedChanged()),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>t.pointsOfInterest?.centerOnSurfaceFrequent.location),(()=>s.updateDisplayBounds()))]);const r=t=>{this.addHandles(t.events.on("grab-changed",(()=>{this.grabbing=t.grabbing,this._updateAllManipulatorAvailability()})))};this._forEachManipulator(r);const l=(t,i)=>{this.addHandles(t.events.on("immediate-click",(t=>{i===ManipulatorType_A.TRANSLATE_XY&&this.events.emit("immediate-click",{...t,object:e}),t.stopPropagation()})))};this._forEachManipulator(l),this._initializeTooltip(),this.finishToolCreation()}destroy(){this._extentMove.destroy(),this._extentScale.destroy(),this._extentRotate.destroy(),this.tooltip.destroy(),this._set("view",null),this._set("object",null)}_initializeTooltip(){const{view:t}=this;this.tooltip=(0,tooltipCommonUtils/* makeTooltip */.A)((()=>({view:t,options:this.sketchOptions.tooltips})));const e=()=>{this.tooltip.info=this._getUpdatedTooltipInfo()};this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.sketchOptions.tooltips.effectiveEnabled),e),(0,reactiveUtils/* watch */.wB)((()=>this.preserveAspectRatio),e)]),this._forEachManipulator((t=>{this.addHandles([t.events.on(["focus-changed","grab-changed"],e),t.events.on("drag",(t=>{"cancel"===t.action?this.tooltip.clear():e()}))])}))}_getUpdatedTooltipInfo(){return this.sketchOptions.tooltips.effectiveEnabled?this._extentMove.getUpdatedTooltipInfo()??this._extentScale.getUpdatedTooltipInfo()??this._extentRotate.getUpdatedTooltipInfo():null}_onGeometryChanged(){this._bounds.updateDisplayBounds()}_graphicDrapedChanged(){this.removeHandles(ExtentTransformTool_T),this._bounds.updateDisplayBounds(),this.object.isDraped&&this.addHandles(this.view.elevationProvider.on("elevation-change",(t=>{null!=this._attachmentOrigin&&(0,aaBoundingRect/* containsXY */.Rj)(t.extent,this._attachmentOrigin.x,this._attachmentOrigin.y)&&this._bounds.updateDisplayBounds()})),ExtentTransformTool_T)}_updateManipulators(){if(!this.visible)return;const t=this._bounds.displayBounds,e=ci(t,vectorStacks/* sm4d */.Rc.get());this._extentMove.updateManipulators(e,t),this._extentScale.updateManipulators(e,t),this._extentRotate.updateManipulators(e,t)}_updateAllManipulatorAvailability(){this._forEachManipulator(((t,e)=>this._updateManipulatorAvailability(t,e)))}_updateManipulatorAvailability(t,e){const i=this.grabbing&&!t.grabbing;if(t.interactive=!i,t instanceof ee){const o=this.object.visible,a=this.enableZ&&manipulatorUtils_o(this.object.operations,this.object.elevationInfo);switch(e){case ManipulatorType_A.ROTATE:t.available=o&&this.enableRotation;break;case ManipulatorType_A.SCALE:t.available=o&&(this.enableScaling||this.enableRotation||a),t.interactive=!i&&this.enableScaling,t.state=this.enableScaling?Ui:Hi;break;case ManipulatorType_A.TRANSLATE_Z:t.available=o&&a;break;default:t.available=o}}}_forEachManipulator(t){this._extentMove.forEachManipulator(t),this._extentScale.forEachManipulator(t),this._extentRotate.forEachManipulator(t)}get preserveAspectRatio(){return this._preserveAspectRatio.enabled}set preserveAspectRatio(t){this._preserveAspectRatio.enabled=t,this._set("preserveAspectRatio",t)}get snapRotation(){return this._snapRotation.enabled}set snapRotation(t){this._snapRotation.enabled=t,this._set("snapRotation",t)}get attachmentOrigin(){const t=this.object.isDraped?null:this._outlineVisualElement?.attachmentOrigin;return this._attachmentOrigin=t??this.object.origin??manipulatedObjectUtils_t(this.object)?.extent?.center,this._attachmentOrigin}reset(){}cancelDrag(){if(this.canUndo){const t=this.object.operations?.undo();t&&this._bounds.updateMapBoundsFromOperationInverse(t)}this.inputState=null}get canUndo(){return!!this.object.operations?.canUndo}undo(){if(null!=this.inputState)this.view.activeTool=null;else if(this.canUndo){const t=this.object.operations?.undo();t&&this._bounds.updateMapBoundsFromOperationInverse(t)}}get canRedo(){return!!this.object.operations?.canRedo}redo(){if(this.canRedo){const t=this.object.operations?.redo();t&&this._bounds.updateMapBoundsFromOperation(t)}}get test(){}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],ExtentTransformTool_S.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ExtentTransformTool_S.prototype,"automaticLengthMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],ExtentTransformTool_S.prototype,"object",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"enableZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"enableScaling",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"enableRotation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,type:SketchOptions/* default */.A})],ExtentTransformTool_S.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"preserveAspectRatio",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"snapRotation",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"grabbing",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"inputState",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ExtentTransformTool_S.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ExtentTransformTool_S.prototype,"tooltip",void 0),ExtentTransformTool_S=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.transform.ExtentTransformTool")],ExtentTransformTool_S);const ExtentTransformTool_T="draped-elevation-changes";

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js
var meshVertexSpaceUtils = __webpack_require__(1114);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/undoRecords.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function undoRecords_r(e){return null!=e&&"mesh"===e.type?undoRecords_o(e):undoRecords_n(e)}function undoRecords_o(e){return (0,meshVertexSpaceUtils/* isRelativeVertexSpace */.Hq)(e.vertexSpace)?undoRecords_i(e,e.transform,e.vertexSpace):undoRecords_l(e)}function undoRecords_n(e){let t=e,r=null;return{undo(e){r=e.geometry,e.geometry=t},redo(e){t=e.geometry,e.geometry=r}}}function undoRecords_i(t,r,o){let n=r?.clone(),i=(0,vec3f64/* clone */.o8)(o.origin),l=null,u=null;return{undo:()=>{l=t.transform?.clone(),u=(0,vec3f64/* clone */.o8)(o.origin),t.transform=n,t.vertexSpace.origin=i},redo:()=>{n=t.transform?.clone(),i=(0,vec3f64/* clone */.o8)(o.origin),t.transform=l,t.vertexSpace.origin=u}}}function undoRecords_l(e){let t,r=e.vertexAttributes.clonePositional();return{undo:()=>{t=e.vertexAttributes.clonePositional(),e.vertexAttributes=r},redo:()=>{r=e.vertexAttributes.clonePositional(),e.vertexAttributes=t}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js
var GraphicManipulator = __webpack_require__(285);
;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools/ManipulatedObject3DGraphic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const ManipulatedObject3DGraphic_l=Symbol();let ManipulatedObject3DGraphic_u=class extends Evented/* default */.A.EventedAccessor{get operations(){return this._operations}get updating(){return this._updatingHandles.updating}get elevationInfo(){return (0,elevationInfoUtils/* getGraphicEffectiveElevationInfo */.bh)(this.graphic)}get visible(){return this._graphicState.displaying}get isDraped(){return this._graphicState.isDraped}get origin(){return manipulatorUtils_D(this.view,this.graphic)}constructor(t){super(t),this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U}destroy(){this._operations=(0,maybe/* destroyMaybe */.pR)(this._operations),this._updatingHandles.destroy()}initialize(){this._graphicState=new GraphicState/* GraphicState */.y({graphic:this.graphic}),this._graphicState.on("changed",(()=>this.emit("committed"))),this.addHandles(this.view.trackGraphicState(this._graphicState)),this.addHandles(this._updatingHandles.add((()=>this.graphic.geometry),(t=>{const e=this._operations?.data.geometry;if(t!==e){if(!t||"multipoint"===t?.type||"extent"===t?.type)return (0,maybe/* destroyMaybe */.pR)(this._operations),this.removeHandles(ManipulatedObject3DGraphic_l),void(this._operations=null);if(this._operations?.trySetGeometry(t))this.emit("modified-externally");else{(0,maybe/* destroyMaybe */.pR)(this._operations),this.removeHandles(ManipulatedObject3DGraphic_l);const e=EditGeometryOperations/* EditGeometryOperations */.p.fromGeometry(t,this.view.state.viewingMode);this._operations=e,this.addHandles(e.data.on("change",(()=>this.graphic.geometry=e.data.geometry)),ManipulatedObject3DGraphic_l)}}}),reactiveUtils/* syncAndInitial */.pc))}createManipulator(t){return new GraphicManipulator/* GraphicManipulator */.l({view:this.view,graphic:this.graphic,...t})}maskOccludee(){return this.view.maskOccludee(this.graphic)}endInteraction(){const t=this.graphic.geometry;"mesh"===t?.type&&this.graphic.notifyMeshTransformChanged({action:sources_interfaces/* MeshTransformUpdateAction */.$.UpdateFastLocalOrigin})}toMap(t){return this.view.toMap(t,{include:[this.graphic]})}createUndoRecord(){const{graphic:{geometry:t}}=this;return undoRecords_r(t)}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ManipulatedObject3DGraphic_u.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],ManipulatedObject3DGraphic_u.prototype,"graphic",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ManipulatedObject3DGraphic_u.prototype,"_operations",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ManipulatedObject3DGraphic_u.prototype,"operations",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ManipulatedObject3DGraphic_u.prototype,"updating",null),ManipulatedObject3DGraphic_u=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.interactive.editingTools.ManipulatedObject3DGraphic")],ManipulatedObject3DGraphic_u);

;// ../node_modules/@arcgis/core/views/3d/interactive/editingTools.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/



/***/ }),

/***/ 58343:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97046);
/* harmony import */ var _featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9104);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit="meters",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnit */ .Ao)(e)}get requiresSampledElevationInfo(){return"absolute-height"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit="meters"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .execute */ .g7)(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .supportsUnit */ .Tg)(t.unit)?t.unit:"meters",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t?.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clone */ .o8)(t),(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .setContextFeature */ .gf)(this._featureExpressionInfoContext,(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createFeature */ .VG)(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}


/***/ }),

/***/ 74056:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17306);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let e=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.EventedAccessor{constructor(r){super(r),this.tracking=!1,this.displaying=!1,this.error=null,this.isDraped=!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({constructOnly:!0})],e.prototype,"graphic",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],e.prototype,"tracking",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],e.prototype,"displaying",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],e.prototype,"error",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],e.prototype,"isDraped",void 0),e=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.3d.layers.graphics.GraphicState")],e);


/***/ }),

/***/ 27716:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I2: () => (/* binding */ m),
/* harmony export */   Kf: () => (/* binding */ g),
/* harmony export */   Uk: () => (/* binding */ R),
/* harmony export */   ai: () => (/* binding */ E),
/* harmony export */   au: () => (/* binding */ u),
/* harmony export */   fe: () => (/* binding */ p),
/* harmony export */   nG: () => (/* binding */ f),
/* harmony export */   nu: () => (/* binding */ d),
/* harmony export */   sE: () => (/* binding */ c),
/* harmony export */   uw: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59538);
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84119);
/* harmony import */ var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80009);
/* harmony import */ var _support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27054);
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(e,t,n,o,i,a,s,l,u,c,f){const m=x[f.mode];let d,g,p=0;if((0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(e,t,n,o,u.spatialReference,i,l))return m?.requiresAlignment(f)?(p=m.applyElevationAlignmentBuffer(o,i,a,s,l,u,c,f),d=a,g=s):(d=o,g=i),(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(d,u.spatialReference,g,a,c.spatialReference,s,l)?p:void 0}function c(e,t,n,o,r){const l=((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isDehydratedPoint */ .v)(e)?e.z:(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .isSamplePosition */ .cN)(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case"on-the-ground":{const n=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case"relative-to-ground":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"relative-to-scene":{const i=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"scene")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case"absolute-height":{const i=n.geometryZWithOffset(l,o),a=(0,_support_ElevationProvider_js__WEBPACK_IMPORTED_MODULE_7__/* .getElevationAtPoint */ .R1)(t,e,"ground")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,D),D.z}function m(e,t,n){return"on-the-ground"===t&&"on-the-ground"===n?e.staysOnTheGround:t===n||"on-the-ground"!==t&&"on-the-ground"!==n?null==t||null==n?e.definedChanged:b.UPDATE:e.onTheGroundChanged}function d(e){return"relative-to-ground"===e||"relative-to-scene"===e}function g(e){return"absolute-height"!==e}function p(t,n,r,i,a){c(n,r,a,i,D),E(t,D.verticalDistanceToGround);const s=D.sampledElevation,l=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(C,t.transformation);O[0]=n.x,O[1]=n.y,O[2]=D.z;return (0,_geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_3__/* .computeTranslationToOriginAndRotation */ .l)(n.spatialReference,O,l,i.spatialReference)?t.transformation=l:console.warn("Could not locate symbol object properly, it might be misplaced"),s}function E(e,t){for(let n=0;n<e.geometries.length;++n){const o=e.geometries[n].getMutableAttribute(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.CENTEROFFSETANDDISTANCE);o&&o.data[3]!==t&&(o.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.CENTEROFFSETANDDISTANCE))}}function v(e,t,n,o,r,i){let a=0;const s=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,s,"ground")??0;a+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return a/r}function h(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,"ground")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r}function A(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,"scene")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r}function T(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function y(e,t,n,o,r,i,a,s){const l=s.calculateOffsetRenderUnits(a),u=s.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],a=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?a+l:l,t+=3,o+=3}return 0}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}var b;!function(e){e[e.NONE=0]="NONE",e[e.UPDATE=1]="UPDATE",e[e.RECREATE=2]="RECREATE"}(b||(b={}));const x={"absolute-height":{applyElevationAlignmentBuffer:y,requiresAlignment:T},"on-the-ground":{applyElevationAlignmentBuffer:v,requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:A,requiresAlignment:()=>!0}},C=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),D=new R,O=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)();


/***/ }),

/***/ 9104:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KF: () => (/* binding */ f),
/* harmony export */   MF: () => (/* binding */ d),
/* harmony export */   VG: () => (/* binding */ s),
/* harmony export */   g7: () => (/* binding */ i),
/* harmony export */   gf: () => (/* binding */ l),
/* harmony export */   o8: () => (/* binding */ o),
/* harmony export */   q6: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony export createContextWithoutExpressionSupport */
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40189);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85174);
/* harmony import */ var _support_loadArcade_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(35387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const c=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function u(e){const t=e?.expression;if("string"==typeof t){const e=m(t);if(null!=e)return{cachedResult:e}}return null}async function a(e,r,c,o){const u=e?.expression;if("string"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await (0,_support_loadArcade_js__WEBPACK_IMPORTED_MODULE_3__/* .loadArcade */ .l)();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .throwIfAborted */ .Te)(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c().errorOncePerTick("Arcade support required but not provided");const n=t;n._geometry&&(n._geometry=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__/* .hydrateGeometry */ .wZ)(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return"number"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||"0"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return"0"===e?0:null}


/***/ }),

/***/ 54096:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $2: () => (/* binding */ k),
/* harmony export */   $C: () => (/* binding */ U),
/* harmony export */   Hj: () => (/* binding */ I),
/* harmony export */   Mh: () => (/* binding */ Z),
/* harmony export */   W$: () => (/* binding */ b),
/* harmony export */   pW: () => (/* binding */ B),
/* harmony export */   t8: () => (/* binding */ S),
/* harmony export */   vY: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony exports computeMaxZ, overrideColor */
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86128);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58359);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28152);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(68490);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(23806);
/* harmony import */ var _geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(65319);
/* harmony import */ var _geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(1114);
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(29394);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(85174);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(t,e){if("point"===t.type)return P(t,e,!1);if((0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__/* .isHydratedGeometry */ .gr)(t))switch(t.type){case"extent":return P(t.center,e,!1);case"polygon":return P(t.centroid,e,!1);case"polyline":return P(w(t),e,!0);case"mesh":return P((0,_geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .vertexSpaceOriginToPoint */ .MW)(t.vertexSpace,t.spatialReference)??t.extent.center,e,!1);case"multipoint":return}else switch(t.type){case"extent":return P(M(t),e,!0);case"polygon":return P(R(t),e,!0);case"polyline":return P(w(t),e,!0);case"multipoint":return}}function w(t){const e=t.paths[0];if(!e||0===e.length)return null;const r=(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .getPointOnPath */ .$H)(e,(0,_geometry_support_coordsUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .getPathLength */ .Yl)(e)/2);return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(r[0],r[1],r[2],t.spatialReference)}function M(t){return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(.5*(t.xmax+t.xmin),.5*(t.ymax+t.ymin),null!=t.zmin&&null!=t.zmax&&isFinite(t.zmin)&&isFinite(t.zmax)?.5*(t.zmax+t.zmin):void 0,t.spatialReference)}function R(t){const e=t.rings[0];if(!e||0===e.length)return null;const r=(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_9__/* .ringsCentroid */ .S8)(t.rings,!!t.hasZ);return (0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_13__/* .makeDehydratedPoint */ .T)(r[0],r[1],r[2],t.spatialReference)}function P(t,e,r){const n=r?t:(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_12__/* .clonePoint */ .EL)(t);return e&&t?(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_6__.projectPoint)(t,n,e)?n:null:n}function F(t){if(!t)return 0;switch(t.type){case"point":return t.z;case"extent":return t.zmax;case"polygon":return t.hasZ?t.rings.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case"polyline":return t.hasZ?t.paths.reduce(((t,e)=>e.reduce(((t,e)=>Math.max(t,e[2])),t)),-1/0):void 0;case"mesh":return t.extent.zmax;case"multipoint":return}}function S(t,e,r,n=0){if(t){e||(e=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__/* .create */ .vt)());const i=t;let o=.5*i.width*(r-1),s=.5*i.height*(r-1);return i.width<1e-7*i.height?o+=s/20:i.height<1e-7*i.width&&(s+=o/20),(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__.s)(e,i.xmin-o-n,i.ymin-s-n,i.xmax+o+n,i.ymax+s+n),e}return null}function U(t,e,r=null){const n=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .clone */ .o8)(_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .ONES */ .Un);return null!=t&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),null!=e?n[3]=e:null!=t&&t.length>3&&(n[3]=t[3]),r&&(n[0]*=r,n[1]*=r,n[2]*=r,n[3]*=r),n}function A(t,e,r,n,i,o){for(let s=0;s<3;++s)o[s]=null!=t?.[s]?t[s]:null!=r?.[s]?r[s]:i[s];return o[3]=null!=e?e:null!=n?n:i[3],o}function B(t=_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .ONES */ .Un,e,r,n=1){const i=new Array(3);if(null==e||null==r)i[0]=1,i[1]=1,i[2]=1;else{let n,o=0;for(let s=2;s>=0;s--){const l=t[s],u=null!=l,a=0===s&&!n&&!u,c=r[s];let m;"symbol-value"===l||a?m=0!==c?e[s]/c:1:u&&"proportional"!==l&&isFinite(l)&&(m=0!==c?l/c:1),null!=m&&(i[s]=m,n=m,o=Math.max(o,Math.abs(m)))}for(let t=2;t>=0;t--)null==i[t]?i[t]=n:0===i[t]&&(i[t]=.001*o)}for(let o=2;o>=0;o--)i[o]/=n;return (0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromArray */ .ci)(i)}function D(t){return null!=t.isPrimitive}function I(t){return Z(D(t)?[t.width,t.depth,t.height]:t)?null:"Symbol sizes may not be negative values"}function Z(t){const e=t=>null==t||t>=0;return Array.isArray(t)?t.every(e):e(t)}function k(t,o,s,l=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()){return t&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .rotateZ */ .Qr)(l,l,-t/180*Math.PI),o&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .rotateX */ .eL)(l,l,o/180*Math.PI),s&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .rotateY */ .Z8)(l,l,s/180*Math.PI),l}function E(e,r,n){if(null!=n.minDemResolution)return n.minDemResolution;const i=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getMetersPerUnitForSR */ .GA)(r),o=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .width */ .VL)(e)*i,s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .depth */ .yr)(e)*i,l=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__/* .height */ .uJ)(e)*(r.isGeographic?1:i);return 0===o&&0===s&&0===l?n.minDemResolutionForPoints:.01*Math.max(o,s,l)}


/***/ }),

/***/ 56867:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O7: () => (/* binding */ a),
/* harmony export */   Om: () => (/* binding */ e),
/* harmony export */   sv: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,a,t;!function(e){e[e.RasterImage=0]="RasterImage",e[e.Features=1]="Features"}(e||(e={})),function(e){e[e.MapLayer=0]="MapLayer",e[e.ViewLayer=1]="ViewLayer",e[e.Outline=2]="Outline",e[e.SnappingHint=3]="SnappingHint"}(a||(a={})),function(e){e[e.WithRasterImage=0]="WithRasterImage",e[e.WithoutRasterImage=1]="WithoutRasterImage"}(t||(t={}));


/***/ }),

/***/ 69463:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gd: () => (/* binding */ Z),
/* harmony export */   J_: () => (/* binding */ X),
/* harmony export */   VC: () => (/* binding */ oe),
/* harmony export */   b3: () => (/* binding */ te),
/* harmony export */   s_: () => (/* binding */ W),
/* harmony export */   ul: () => (/* binding */ ie),
/* harmony export */   wI: () => (/* binding */ J)
/* harmony export */ });
/* unused harmony exports FastColorInfo, FastOpacityInfo, FastRotationInfo, FastRotationType, FastSizeInfo, FastSizeType, FastSymbolUpdatesState, FastVisualVariables, convertVisualVariables, getMaterialParameters */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25423);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78607);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58359);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(28152);
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(10301);
/* harmony import */ var _support_guards_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(8701);
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(19620);
/* harmony import */ var _webgl_engine_effects_geometry_olidUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(36340);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var U,j;!function(e){e[e.Undefined=0]="Undefined",e[e.DefinedSize=1]="DefinedSize",e[e.DefinedScale=2]="DefinedScale"}(U||(U={})),function(e){e[e.Undefined=0]="Undefined",e[e.DefinedAngle=1]="DefinedAngle"}(j||(j={}));class V{constructor(e){this.field=e}}class M extends V{constructor(e){super(e),this.minSize=[0,0,0],this.maxSize=[0,0,0],this.offset=[0,0,0],this.factor=[0,0,0],this.type=[U.Undefined,U.Undefined,U.Undefined],this.fallback=[0,0,0]}}class I extends V{constructor(e){super(e),this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.values=[0,0,0,0,0,0,0,0],this.fallback=[0,0,0,0]}}class A extends V{constructor(e,t=0){super(e),this.fallback=t,this.values=[0,0,0,0,0,0,0,0],this.opacityValues=[0,0,0,0,0,0,0,0]}}class N extends V{constructor(e){super(e),this.offset=[0,0,0],this.factor=[1,1,1],this.type=[0,0,0]}}class P{}function T(e){return null!=e}function F(e,t){e&&e.push(t)}function R(e,t,o,i=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)()){const n=e||0,s=t||0,r=o||0;return 0!==n&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .rotateZ */ .Qr)(i,i,-n/180*Math.PI),0!==s&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .rotateX */ .eL)(i,i,s/180*Math.PI),0!==r&&(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .rotateY */ .Z8)(i,i,r/180*Math.PI),i}function E(e,t,o,i,n){const s=e.minSize,r=e.maxSize;if(e.useSymbolValue){const e=i.symbolSize[o];return t.minSize[o]=e,t.maxSize[o]=e,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=U.DefinedSize,!0}if(T(e.field))return T(e.stops)?2===e.stops.length&&(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(e.stops[0].size)&&(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(e.stops[1].size)?(_(e.stops[0].size,e.stops[1].size,e.stops[0].value,e.stops[1].value,t,o),t.type[o]=U.DefinedSize,!0):(F(n,"Could not convert size info: stops only supported with 2 elements"),!1):(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(s)&&(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(r)&&T(e.minDataValue)&&T(e.maxDataValue)?(_(s,r,e.minDataValue,e.maxDataValue,t,o),t.type[o]=U.DefinedSize,!0):"unknown"===e.valueUnit?(F(n,"Could not convert size info: proportional size not supported"),!1):null!=_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .meterIn */ .j[e.valueUnit]?(t.minSize[o]=-1/0,t.maxSize[o]=1/0,t.offset[o]=0,t.factor[o]=1/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .meterIn */ .j[e.valueUnit],t.type[o]=U.DefinedSize,!0):(F(n,"Could not convert size info: scale-dependent size not supported"),!1);if(!T(e.field)){if(e.stops?.[0]&&(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(e.stops[0].size))return t.minSize[o]=e.stops[0].size,t.maxSize[o]=e.stops[0].size,t.offset[o]=t.minSize[o],t.factor[o]=0,t.type[o]=U.DefinedSize,!0;if((0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isNumber */ .Et)(s))return t.minSize[o]=s,t.maxSize[o]=s,t.offset[o]=s,t.factor[o]=0,t.type[o]=U.DefinedSize,!0}return F(n,"Could not convert size info: unsupported variant of sizeInfo"),!1}function _(e,t,o,i,n,s){const r=Math.abs(i-o)>0?(t-e)/(i-o):0;n.minSize[s]=r>0?e:t,n.maxSize[s]=r>0?t:e,n.offset[s]=e-o*r,n.factor[s]=r}function q(e,t,o,i){if(e.normalizationField||e.valueRepresentation)return F(i,"Could not convert size info: unsupported property"),null;if(!(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isStringOrNull */ .CO)(e.field))return F(i,"Could not convert size info: field is not a string"),null;if(t.size){if(e.field)if(t.size.field){if(e.field!==t.size.field)return F(i,"Could not convert size info: multiple fields in use"),null}else t.size.field=e.field}else t.size=new M(e.field),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.c)(t.size.fallback,o.fallbackSize);let n;switch(e.axis){case"width":return n=E(e,t.size,0,o,i),n?t:null;case"height":return n=E(e,t.size,2,o,i),n?t:null;case"depth":return n=E(e,t.size,1,o,i),n?t:null;case"width-and-depth":return n=E(e,t.size,0,o,i),n&&E(e,t.size,1,o,i),n?t:null;case null:case void 0:case"all":return n=E(e,t.size,0,o,i),n=n&&E(e,t.size,1,o,i),n=n&&E(e,t.size,2,o,i),n?t:null;default:return F(i,`Could not convert size info: unknown axis "${e.axis}""`),null}}function $(e,t,o){for(let n=0;n<3;++n){let o=t.unitInMeters;e.type[n]===U.DefinedSize&&(o*=t.modelSize[n],e.type[n]=U.DefinedScale),e.minSize[n]=e.minSize[n]/o,e.maxSize[n]=e.maxSize[n]/o,e.offset[n]=e.offset[n]/o,e.factor[n]=e.factor[n]/o}let i;if(e.type[0]!==U.Undefined)i=0;else if(e.type[1]!==U.Undefined)i=1;else{if(e.type[2]===U.Undefined)return F(o,"No size axis contains a valid size or scale"),!1;i=2}for(let n=0;n<3;++n)e.type[n]===U.Undefined&&(e.minSize[n]=e.minSize[i],e.maxSize[n]=e.maxSize[i],e.offset[n]=e.offset[i],e.factor[n]=e.factor[i],e.type[n]=e.type[i]);return!0}function B(e,t,o){e[4*t]=o.r/255,e[4*t+1]=o.g/255,e[4*t+2]=o.b/255,e[4*t+3]=o.a}function L(e,t,o,i){if(e.normalizationField)return F(i,"Could not convert color info: unsupported property"),null;if((0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isString */ .Kg)(e.field)){if(!e.stops)return F(i,"Could not convert color info: missing stops or colors"),null;{if(e.stops.length>8)return F(i,"Could not convert color info: too many color stops"),null;t.color=new I(e.field);const n=e.stops;for(let e=0;e<8;++e){const o=n[Math.min(e,n.length-1)];t.color.values[e]=o.value,B(t.color.colors,e,o.color)}(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_8__.c)(t.color.fallback,o.fallbackColor)}}else{if(!(e.stops&&e.stops.length>=0))return F(i,"Could not convert color info: no field and no colors/stops"),null;{const i=e.stops&&e.stops.length>=0&&e.stops[0].color;t.color=new I(null);for(let e=0;e<8;e++)t.color.values[e]=1/0,B(t.color.colors,e,i);(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_8__.c)(t.color.fallback,o.fallbackColor)}}return t}function O(e,t,o,i){if(e.normalizationField)return F(i,"Could not convert opacity info: unsupported property"),null;if((0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isString */ .Kg)(e.field)){if(!e.stops)return F(i,"Could not convert opacity info: missing stops or opacities"),null;{if(e.stops.length>8)return F(i,"Could not convert opacity info: too many opacity stops"),null;t.opacity=new A(e.field,o.fallbackColor[3]);const n=e.stops;for(let e=0;e<8;++e){const o=n[Math.min(e,n.length-1)];t.opacity.values[e]=o.value,t.opacity.opacityValues[e]=o.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return F(i,"Could not convert opacity info: no field and no opacities/stops"),null;{const i=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;t.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0],fallback:o.fallbackColor[3]};for(let e=0;e<8;e++)t.opacity.values[e]=1/0,t.opacity.opacityValues[e]=i}}return t}function G(e,t,o){const i=2===o&&"arithmetic"===e.rotationType;t.offset[o]=i?90:0,t.factor[o]=i?-1:1,t.type[o]=1}function H(e,t,o){if(!(0,_support_guards_js__WEBPACK_IMPORTED_MODULE_14__/* .isString */ .Kg)(e.field))return F(o,"Could not convert rotation info: field is not a string"),null;if(t.rotation){if(e.field)if(t.rotation.field){if(e.field!==t.rotation.field)return F(o,"Could not convert rotation info: multiple fields in use"),null}else t.rotation.field=e.field}else t.rotation={field:e.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};switch(e.axis){case"tilt":return G(e,t.rotation,0),t;case"roll":return G(e,t.rotation,1),t;case null:case void 0:case"heading":return G(e,t.rotation,2),t;default:return F(o,`Could not convert rotation info: unknown axis "${e.axis}""`),null}}class J{constructor({supports:e,modelSize:t,symbolSize:o,unitInMeters:i,anchor:n,scale:s,rotation:r,fallbackColor:l,fallbackSize:a}){this.supports=e,this.modelSize=t??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .ones */ .S)(),this.symbolSize=o??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .ones */ .S)(),this.unitInMeters=i??1,this.anchor=n??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .zeros */ .Ul)(),this.scale=s??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .ones */ .S)(),this.rotation=r??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .zeros */ .Ul)(),this.fallbackColor=l??(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_9__/* .ones */ .S)(),this.fallbackSize=a??(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .ones */ .S)()}}function K(e,t,o){if(!e)return null;const i=e.reduce(((e,i)=>{if(!e)return e;if(i.valueExpression)return F(o,"Could not convert visual variables: arcade expressions not supported"),null;switch(i.type){case"size":return t.supports.size?q(i,e,t,o):e;case"color":return t.supports.color?L(i,e,t,o):e;case"opacity":return t.supports.opacity?O(i,e,t,o):null;case"rotation":return t.supports.rotation?H(i,e,o):e;default:return null}}),new P);return!(e.length>0&&i)||i.size||i.color||i.opacity||i.rotation?i?.size&&!$(i.size,t,o)?null:i:null}class Q{constructor(e,t,o){this.visualVariables=e,this.materialParameters=t,this.requiresShaderTransformation=o}}function W(e,t){if(!e)return null;if((0,_webgl_engine_effects_geometry_olidUtils_js__WEBPACK_IMPORTED_MODULE_12__/* .olidEnabled */ .E)())return null;if(_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_11__/* .debugFlags */ .b.TESTS_DISABLE_FAST_UPDATES)return null;const o=K(e.visualVariables,t);return o?new Q(o,ee(o,t),!!o.size):null}function X(e,t,o){if(!t||!e)return!1;const i=e.visualVariables,n=K(t.visualVariables,o);return!!n&&(!!(Y(i.size,n.size,"size")&&Y(i.color,n.color,"color")&&Y(i.rotation,n.rotation,"rotation")&&Y(i.opacity,n.opacity,"opacity"))&&(e.visualVariables=n,e.materialParameters=ee(n,o),e.requiresShaderTransformation=!!n.size,!0))}function Y(e,t,o){if(!!e!=!!t)return!1;if(e&&e.field!==t?.field)return!1;if(e&&"rotation"===o){const o=e,i=t;for(let e=0;e<3;e++)if(o.type[e]!==i.type[e]||o.offset[e]!==i.offset[e]||o.factor[e]!==i.factor[e])return!1}return!0}class Z extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_13__/* .NoParameters */ .Y{constructor(e){super(),this.vvSize=e?.size??null,this.vvColor=e?.color??null,this.vvOpacity=e?.opacity??null}}function ee(e,n){const s=new Z(e);return s.vvSize&&(s.vvSymbolAnchor=n.anchor,(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .identity */ .D_)(re),R(n.rotation[2],n.rotation[0],n.rotation[1],re),s.vvSymbolRotationMatrix=s.vvSymbolRotationMatrix||(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .fromMat4 */ .z0)(s.vvSymbolRotationMatrix,re)),s}function te(e,t,o){if(!e.vvSize)return o;(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .copy */ .C)(ne,o);const i=e.vvSymbolRotationMatrix;return (0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .set */ .hZ)(re,i[0],i[1],i[2],0,i[3],i[4],i[5],0,i[6],i[7],i[8],0,0,0,0,1),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .multiply */ .lw)(ne,ne,re),oe(se,e,t),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .scale */ .hs)(ne,ne,se),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_4__/* .translate */ .Tl)(ne,ne,e.vvSymbolAnchor),ne}function oe(t,o,i){if(!o.vvSize)return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.i)(t,1,1,1),t;if(Number.isNaN(i[0]))return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_6__.c)(t,o.vvSize.fallback);for(let n=0;n<3;++n){const s=o.vvSize.offset[n]+i[0]*o.vvSize.factor[n];t[n]=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)(s,o.vvSize.minSize[n],o.vvSize.maxSize[n])}return t}function ie(e,t){const o=null==e?0:t.attributes[e];return"number"==typeof o&&isFinite(o)?o:NaN}const ne=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),se=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_7__/* .create */ .vt)(),re=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)();


/***/ }),

/***/ 27054:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R1: () => (/* binding */ a),
/* harmony export */   aY: () => (/* binding */ r),
/* harmony export */   cN: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80009);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return"array"in e}function a(r,a,n="ground"){if((0,_layers_graphics_dehydratedFeatureUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isDehydratedPoint */ .v)(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}


/***/ }),

/***/ 98191:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  d: () => (/* binding */ RenderCoordsHelper_B)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/ellipsoidUtils.js
var ellipsoidUtils = __webpack_require__(47936);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js
var spatialReferenceEllipsoidUtils = __webpack_require__(32937);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectPointToVector.js
var projectPointToVector = __webpack_require__(42609);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectVectorToPoint.js
var projectVectorToPoint = __webpack_require__(70397);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js
var projectVectorToVector = __webpack_require__(42120);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Axis.js
var Axis = __webpack_require__(58331);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/boundedPlane.js
var boundedPlane = __webpack_require__(28769);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/sphere.js + 1 modules
var sphere = __webpack_require__(31803);
;// ../node_modules/@arcgis/core/geometry/support/coordinateSystem.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function h(t){const{value:e,operations:n}=t;return{operations:n,value:n.create(e)}}function j(t,e,n){return t.operations.setExtent(t.value,e,n.value),n}function d(t,e){return t.operations.getExtent(t.value,e),e}function x(t){return{operations:t,value:t.create()}}function A(t,e,n=x(t)){return n.operations=t,t.copy(e,n.value),n}function b(t){return A(sphere.s,(0,sphere.f)(0,0,0,(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(t).radius))}const g=2**50;function P(){return A(boundedPlane.b,(0,boundedPlane.f)([0,0,0],[g,0,0],[0,g,0]))}function R(t,e,n){return t.operations.axisAt(t.value,e,Axis/* Axis */._.Z,n)}function S(t,e,n,o){return t.operations.axisAt(t.value,e,n,o)}function k(t,e,n){return t.operations.intersectRay(t.value,e,n)}function y(t,e,n){return t.operations.closestPoint(t.value,e,n)}function E(t,e,n){return t.operations.intersectRayClosestSilhouette(t.value,e,n)}function C(t,e,n){return t.operations.closestPointOnSilhouette(t.value,e,n)}function U(t,e){return t.operations.distanceToSilhouette(t.value,e)}function G(t,e){return t.operations.altitudeAt(t.value,e)}function O(t,e,n,o){return t.operations.setAltitudeAt(t.value,e,n,o)}function T(n,o,r,i){return o!==i&&(0,mat4/* copy */.C)(i,o),(0,vec32.i)(q,i[12],i[13],i[14]),O(n,q,r,q),i[12]=q[0],i[13]=q[1],i[14]=q[2],i}function Z(t,e,n){return t.operations.elevate(t.value,e,n.value)}const q=(0,vec3f64/* create */.vt)();function w(t,e,n,o,r){return r[0]=i(t,e),r[1]=i(t,n),r[2]=i(t,o),r}function z(t,e,i,u,a){n(i,t),n(D,e),o(D,D),r(u,D,i),r(a,u,i)}function B(t,e){return t?c(e):e.isGeographic?s.PlateCarree:e}const D=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vector.js
var vector = __webpack_require__(16597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vectorStacks.js + 1 modules
var vectorStacks = __webpack_require__(45573);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedFeatureUtils.js
var dehydratedFeatureUtils = __webpack_require__(80009);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RenderCoordsHelper_B{constructor(t,e,o,r){this.viewingMode=t,this.spatialReference=e,this.unitInMeters=o,this._coordinateSystem=r,this._tmpCoordinateSystem=h(r),this.referenceEllipsoid=(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(e),this.sphericalPCPF=(0,spatialReferenceEllipsoidUtils/* getSphericalPCPF */.lO)(e)}set extent(t){t&&j(this._coordinateSystem,t,this._coordinateSystem)}get extent(){return d(this._coordinateSystem,(0,aaBoundingRect/* create */.vt)())}getAltitude(t){return G(this._coordinateSystem,t)}setAltitude(t,e,o=t){return O(this._coordinateSystem,o,e,t)}setAltitudeOfTransformation(t,e){T(this._coordinateSystem,e,t,e)}worldUpAtPosition(t,e){return R(this._coordinateSystem,t,e)}worldBasisAtPosition(t,e,o){return S(this._coordinateSystem,t,e,o)}basisMatrixAtPosition(t,e){const o=this.worldBasisAtPosition(t,Axis/* Axis */._.X,vectorStacks/* sv3d */.rq.get()),i=this.worldBasisAtPosition(t,Axis/* Axis */._.Y,vectorStacks/* sv3d */.rq.get()),s=this.worldBasisAtPosition(t,Axis/* Axis */._.Z,vectorStacks/* sv3d */.rq.get());return (0,mat4/* set */.hZ)(e,o[0],o[1],o[2],0,i[0],i[1],i[2],0,s[0],s[1],s[2],0,0,0,0,1),e}headingAtPosition(e,o){const r=this.worldUpAtPosition(e,vectorStacks/* sv3d */.rq.get()),i=this.worldBasisAtPosition(e,Axis/* Axis */._.Y,vectorStacks/* sv3d */.rq.get()),s=(0,vector/* angleAroundAxis */.EJ)(o,i,r);return (0,mathUtils/* rad2deg */.KJ)(s)}intersectManifoldClosestSilhouette(t,e,o){return Z(this._coordinateSystem,e,this._tmpCoordinateSystem),E(this._tmpCoordinateSystem,t,o),o}intersectManifold(t,e,o){Z(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=vectorStacks/* sv3d */.rq.get();return k(this._tmpCoordinateSystem,t,r)?(0,vec32.c)(o,r):null}intersectInfiniteManifold(t,e,o){if(this.viewingMode===ViewingMode/* ViewingMode */.RT.Global)return this.intersectManifold(t,e,o);Z(this._coordinateSystem,e,this._tmpCoordinateSystem);const r=this._tmpCoordinateSystem.value,s=vectorStacks/* sv3d */.rq.get();return (0,plane/* intersectRay */.Ui)(r.plane,t,s)?(0,vec32.c)(o,s):null}toRenderCoords(t,e,o){return (0,dehydratedFeatureUtils/* isDehydratedPoint */.v)(t)?(0,projectPointToVector/* projectPointToVector */.g)(t,e,this.spatialReference):(0,projectVectorToVector/* projectVectorToVector */.F)(t,e,o,this.spatialReference)}fromRenderCoords(t,e,o=null){return (0,dehydratedFeatureUtils/* isDehydratedPoint */.v)(e)?(null!=o&&(e.spatialReference=o),(0,projectVectorToPoint/* projectVectorToPoint */.E)(t,this.spatialReference,e)?e:null):(0,projectVectorToVector/* projectVectorToVector */.F)(t,this.spatialReference,e,o)?e:null}static create(t,o){switch(t){case ViewingMode/* ViewingMode */.RT.Local:return new RenderCoordsHelper_B(ViewingMode/* ViewingMode */.RT.Local,o,(0,unitUtils/* getMetersPerUnitForSR */.GA)(o),P());case ViewingMode/* ViewingMode */.RT.Global:return new RenderCoordsHelper_B(ViewingMode/* ViewingMode */.RT.Global,o,1,b(o))}}static renderUnitScaleFactor(t,e){return (0,unitUtils/* getMetersPerCartesianUnitForSR */.KX)(t)/(0,unitUtils/* getMetersPerCartesianUnitForSR */.KX)(e)}}


/***/ }),

/***/ 11110:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BP: () => (/* binding */ O),
/* harmony export */   l5: () => (/* binding */ P),
/* harmony export */   q3: () => (/* binding */ N)
/* harmony export */ });
/* unused harmony export InterleavedBuffer */
/* harmony import */ var _geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11449);
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57813);
/* harmony import */ var _geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32846);
/* harmony import */ var _webgl_engine_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class K{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const i of e.fields.keys()){const t=e.fields.get(i);this[i]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const i=this[e];return i&&i.elementCount===t.ElementCount&&i.elementType===t.ElementType?i:null}slice(e,t){return new K(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t=0,i=0,s=e.count){const r=this.stride;if(r%4==0){const n=new Uint32Array(e.buffer,t*r,s*r/4);new Uint32Array(this.buffer,i*r,s*r/4).set(n)}else{const n=new Uint8Array(e.buffer,t*r,s*r);new Uint8Array(this.buffer,i*r,s*r).set(n)}return this}get cachedMemory(){return this.byteLength}dispose(){}}class N{constructor(e){this._stride=0,this._fields=new Map,e&&(this._stride=e.stride,e.fields.forEach((e=>this._fields.set(e[0],{...e[1],constructor:S(e[1].constructor)}))))}freeze(){return this}vec2f16(s,r){return this._appendField(s,_geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_0__/* .hasNativeFloat16Array */ .SX?_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f16 */ .ZD:_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f */ .gH,r),this}vec2f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f */ .gH,t),this}vec2f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f64 */ .si,t),this}vec3f16(t,i){return this._appendField(t,_geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_0__/* .hasNativeFloat16Array */ .SX?_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f16 */ .EC:_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f */ .xs,i),this}vec3f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f */ .xs,t),this}vec3f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f64 */ .Xm,t),this}vec4f16(t,i){return this._appendField(t,_geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_0__/* .hasNativeFloat16Array */ .SX?_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f16 */ .jz:_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f */ .Eq,i),this}vec4f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f */ .Eq,t),this}vec4f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f64 */ .Aj,t),this}mat3f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat3f */ .jZ,t),this}mat3f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat3f64 */ .j0,t),this}mat4f(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat4f */ .Sx,t),this}mat4f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat4f64 */ .E$,t),this}vec4u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u8 */ .XP,t),this}f16(t,i){return this._appendField(t,_geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_0__/* .hasNativeFloat16Array */ .SX?_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat16 */ .XW:_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat */ .Y$,i),this}f32(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat */ .Y$,t),this}f64(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat64 */ .qB,t),this}u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint8 */ .SL,t),this}u16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint16 */ .h,t),this}i8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewInt8 */ .bf,t),this}vec2i8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i8 */ .D6,t),this}vec2i16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i16 */ .mJ,t),this}vec2u8(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2u8 */ .LC,t),this}vec2u16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2u16 */ .Yi,t),this}vec4u16(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u16 */ .Uz,t),this}u32(e,t){return this._appendField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint32 */ .P,t),this}_appendField(e,t,i){this._fields.has(e)&&(0,_webgl_engine_lib_Util_js__WEBPACK_IMPORTED_MODULE_2__/* .assert */ .vA)(!1,`${e} already added to vertex buffer layout`);const s=t.ElementCount*(0,_geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_3__/* .elementTypeSize */ .GJ)(t.ElementType),r=this._stride;this._fields.set(e,{constructor:t,size:s,offset:r,optional:i}),this._alignFields()}_alignFields(){let e=0,t=1;this._fields.forEach((i=>{const s=(0,_geometry_support_buffer_types_js__WEBPACK_IMPORTED_MODULE_3__/* .elementTypeSize */ .GJ)(i.constructor.ElementType);e=Math.floor((e+s-1)/s)*s,i.offset=e,e+=i.size,t=Math.max(t,s)})),e=Math.floor((e+t-1)/t)*t,this._stride=e}createBuffer(e){return new K(this,e)}createView(e){return new K(this,e)}clone(){const e=new N;return e._stride=this._stride,e._fields=new Map,this._fields.forEach(((t,i)=>e._fields.set(i,t))),e.BufferType=this.BufferType,e}get stride(){return this._stride}get fields(){return this._fields}}function O(){return new N}class P{constructor(e){this.fields=new Array,e.fields.forEach(((e,t)=>{const i={...e,constructor:R(e.constructor)};this.fields.push([t,i])})),this.stride=e.stride}}const Q=[_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat */ .Y$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f */ .gH,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f */ .xs,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f */ .Eq,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat3f */ .jZ,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat4f */ .Sx,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewFloat64 */ .qB,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2f64 */ .si,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3f64 */ .Xm,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4f64 */ .Aj,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat3f64 */ .j0,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewMat4f64 */ .E$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint8 */ .SL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2u8 */ .LC,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3u8 */ .eI,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u8 */ .XP,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint16 */ .h,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2u16 */ .Yi,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3u16 */ .nS,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u16 */ .Uz,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewUint32 */ .P,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2u32 */ .An,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3u32 */ .H$,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4u32 */ .ml,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewInt8 */ .bf,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i8 */ .D6,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3i8 */ .m8,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4i8 */ .TX,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewInt16 */ .Qt,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i16 */ .mJ,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3i16 */ .Vp,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4i16 */ .E7,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewInt32 */ .My,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec2i32 */ .UL,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec3i32 */ .zD,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferViewVec4i32 */ .Y4];function R(e){return`${e.ElementType}_${e.ElementCount}`}function S(e){return W.get(e)}const W=new Map;Q.forEach((e=>W.set(R(e),e)));


/***/ }),

/***/ 15788:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(e,t=0){const n=e.stride;return Array.from(e.fields.keys()).map((s=>{const i=e.fields.get(s),f=i.constructor.ElementCount,u=o(i.constructor.ElementType),c=i.offset,m=i.optional?.glNormalized??!1;return new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._(s,f,u,c,n,m,t)}))}function o(e){const r=n[e];if(r)return r;throw new Error("BufferType not supported in WebGL")}const n={u8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_BYTE,u16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT,u32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_INT,i8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,i16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.SHORT,i32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.INT,f16:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.HALF_FLOAT,f32:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.FLOAT};


/***/ }),

/***/ 19620:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let T=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DECONFLICTOR_SHOW_GRID",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LABELS_SHOW_BORDER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TEXT_SHOW_BASELINE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TEXT_SHOW_BORDER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"OVERLAY_SHOW_CENTER",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"SHOW_POI",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"I3S_TREE_SHOW_TILES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"I3S_SHOW_MODIFICATIONS",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],T.prototype,"LINE_WIREFRAMES",void 0),T=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.3d.support.debugFlags")],T);const t=new T;


/***/ }),

/***/ 46684:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ b),
/* harmony export */   z: () => (/* binding */ R)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28152);
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(47936);
/* harmony import */ var _geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(12943);
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(90166);
/* harmony import */ var _geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(50961);
/* harmony import */ var _geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(42965);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(10714);
/* harmony import */ var _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(70807);
/* harmony import */ var _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(59816);
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(50645);
/* harmony import */ var _webgl_engine_lib_IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(27514);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(t,e,r=null){const o=[],n=e.mapPositions;g(e,o);const i=o[0][1].data,a=o[0][1].indices.length,l=(0,_geometry_support_Indices_js__WEBPACK_IMPORTED_MODULE_7__/* .getZeroIndexArray */ .EH)(a);return h(e,o,l),w(e,o,l),D(e,o,l),T(e,o,l),y(e,o,l),E(e,o,l),j(e,o,i),new _webgl_engine_lib_Geometry_js__WEBPACK_IMPORTED_MODULE_10__/* .Geometry */ .V(t,o,n,_webgl_engine_lib_IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_12__/* .GeometryType */ .d.Line,r)}function g(t,e){const{attributeData:{position:r},removeDuplicateStartEnd:o}=t,n=A(r)&&o,i=r.length/3-(n?1:0),a=new Array(2*(i-1)),l=n?r.slice(0,-3):r;let u=0;for(let s=0;s<i-1;s++)a[u++]=s,a[u++]=s+1;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.POSITION,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n(l,a,3,n)])}function h(t,e,r){if(null!=t.attributeData.colorFeature)return;const n=t.attributeData.color;e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.COLOR,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n(n??_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .ONES */ .Un,r,4)])}function D(t,e,r){t.attributeData.normal&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.NORMAL,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n(t.attributeData.normal,r,3)])}function T(t,e,r){null!=t.attributeData.colorFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n([t.attributeData.colorFeature],r,1,!0)])}function w(t,e,r){null==t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.SIZE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n([t.attributeData.size??1],r,1,!0)])}function y(t,e,r){null!=t.attributeData.sizeFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.SIZEFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n([t.attributeData.sizeFeature],r,1,!0)])}function E(t,e,r){null!=t.attributeData.opacityFeature&&e.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.OPACITYFEATUREATTRIBUTE,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n([t.attributeData.opacityFeature],r,1,!0)])}function j(r,o,u){if(null==r.overlayInfo||r.overlayInfo.renderCoordsHelper.viewingMode!==_ViewingMode_js__WEBPACK_IMPORTED_MODULE_8__/* .ViewingMode */ .RT.Global||!r.overlayInfo.spatialReference.isGeographic)return;const m=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_5__/* .newDoubleArray */ .jh)(u.length),f=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getReferenceEllipsoid */ .tO)(r.overlayInfo.spatialReference);for(let t=0;t<m.length;t+=3)(0,_geometry_projection_projectors_js__WEBPACK_IMPORTED_MODULE_4__/* .lonLatToWebMercatorComparable */ .RC)(u,t,m,t,f);const b=u.length/3,g=(0,_geometry_support_FloatArray_js__WEBPACK_IMPORTED_MODULE_6__/* .newFloatArray */ .oe)(b+1);let h=I,D=F,T=0,w=0;(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(h,m[w++],m[w++]),w++,g[0]=0;for(let n=1;n<b+1;++n)n===b&&(w=0),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(D,m[w++],m[w++]),w++,T+=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .dist */ .xg)(h,D),g[n]=T,[h,D]=[D,h];o.push([_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_11__/* .VertexAttribute */ .r.DISTANCETOSTART,new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_9__/* .Attribute */ .n(g,o[0][1].indices,1,!0)])}function A(t){const e=t.length;return t[0]===t[e-3]&&t[1]===t[e-2]&&t[2]===t[e-1]}const I=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),F=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function R(t,e){if(null==t||0===t.length)return[];const r=[];return t.forEach((t=>{const o=t.length,n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_5__/* .newDoubleArray */ .jh)(3*o);t.forEach(((t,e)=>{n[3*e]=t[0],n[3*e+1]=t[1],n[3*e+2]=t[2]}));const i={attributeData:{position:n,normal:e},removeDuplicateStartEnd:!1};r.push(i)})),r}


/***/ }),

/***/ 50980:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cz: () => (/* binding */ s),
/* harmony export */   DZ: () => (/* binding */ w),
/* harmony export */   PV: () => (/* binding */ p),
/* harmony export */   vO: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony exports createMarkerTexture, markerThickness */
/* harmony import */ var _sdfPrimitives_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97213);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8595);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45758);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m=64,s=m/2,n=s/5,p=m/n,w=.25;function f(p,w){const f=r(p,m,s,n),u=new i;return u.internalFormat=e.RGBA,u.width=m,u.height=m,u.wrapMode=t.CLAMP_TO_EDGE,new o(w,u,f)}


/***/ }),

/***/ 97213:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CN: () => (/* binding */ o),
/* harmony export */   I9: () => (/* binding */ i),
/* harmony export */   PY: () => (/* binding */ s),
/* harmony export */   Q_: () => (/* binding */ a),
/* harmony export */   ny: () => (/* binding */ c),
/* harmony export */   sZ: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony exports createArrow, createCircle, createCross, createKite, createPrimitive, createSquare, createTriangle, createX */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(51859);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28152);
/* harmony import */ var _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17342);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=128,o=.5,s=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .freeze */ .CN)(o/2,o/2,1-o/2,1-o/2);function c(t){return"cross"===t||"x"===t}function u(t,r=a,e=r*o,s=0){const{data:c,parameters:u}=i(t,r,e,s);return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_3__/* .Texture */ .g(c,u)}function i(t,r=a,n=r*o,s=0){return{data:f(t,r,n,s),parameters:{mipmap:!1,wrap:{s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE},width:r,height:r,components:4,noUnpackFlip:!0,reloadable:!0}}}function f(t,r=a,n=r*o,e=0){switch(t){case"circle":default:return h(r,n);case"square":return M(r,n);case"cross":return l(r,n,e);case"x":return p(r,n,e);case"kite":return m(r,n);case"triangle":return b(r,n);case"arrow":return T(r,n)}}function h(t,r){const n=t/2-.5;return q(t,R(n,n,r/2))}function M(t,r){return w(t,r,!1)}function m(t,r){return w(t,r,!0)}function l(t,r,n=0){return x(t,r,!1,n)}function p(t,r,n=0){return x(t,r,!0,n)}function b(t,r){return q(t,g(t/2,r,r/2))}function T(t,r){const n=r,e=r/2,a=t/2,o=.8*n,s=R(a,(t-r)/2-o,Math.sqrt(o*o+e*e)),c=g(a,n,e);return q(t,((t,r)=>Math.max(c(t,r),-s(t,r))))}function w(t,r,n){return n&&(r/=Math.SQRT2),q(t,((e,a)=>{let o=e-.5*t+.25,s=.5*t-a-.75;if(n){const t=(o+s)/Math.SQRT2;s=(s-o)/Math.SQRT2,o=t}return Math.max(Math.abs(o),Math.abs(s))-.5*r}))}function x(t,r,n,e=0){r-=e,n&&(r*=Math.SQRT2);const a=.5*r;return q(t,((r,o)=>{let s,c=r-.5*t,u=.5*t-o-1;if(n){const t=(c+u)/Math.SQRT2;u=(u-c)/Math.SQRT2,c=t}return c=Math.abs(c),u=Math.abs(u),s=c>u?c>a?Math.sqrt((c-a)*(c-a)+u*u):u:u>a?Math.sqrt(c*c+(u-a)*(u-a)):c,s-=e/2,s}))}function R(t,r,n){return(e,a)=>{const o=e-t,s=a-r;return Math.sqrt(o*o+s*s)-n}}function g(t,r,n){const e=Math.sqrt(r*r+n*n);return(a,o)=>{const s=Math.abs(a-t)-n,c=o-t+r/2+.75,u=(r*s+n*c)/e,i=-c;return Math.max(u,i)}}function q(r,n){const e=new Uint8Array(4*r*r);for(let a=0;a<r;a++)for(let o=0;o<r;o++){const s=o+r*a;let c=n(o,a);c=c/r+.5,(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_1__/* .packFloatRGBA */ .U)(c,e,4*s)}return e}


/***/ }),

/***/ 4062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ l),
/* harmony export */   C: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84119);
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90166);
/* harmony import */ var _geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17566);
/* harmony import */ var _layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27716);
/* harmony import */ var _terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42490);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(o,t,s,p){const l="polygon"===o.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.NONE,a="polygon"===o.type?o.rings:o.paths,{position:u,outlines:f}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .ringsToTriangulationInfo */ .oR)(a,!!o.hasZ,l,o.spatialReference),m=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .newDoubleArray */ .jh)(u.length),g=(0,_layers_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .applyPerVertexElevationAlignment */ .au)(u,o.spatialReference,0,m,0,u,0,u.length/3,t,s,p),y=null!=g;return{lines:y?c(f,u,m):[],projectionSuccess:y,sampledElevation:g}}function l(e,t){const i="polygon"===e.type?_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.CCW_IS_HOLE:_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .CounterClockwiseMode */ .Wq.NONE,p="polygon"===e.type?e.rings:e.paths,{position:l,outlines:a}=(0,_geometry_support_triangulationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .ringsToTriangulationInfo */ .oR)(p,!1,i),u=(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_0__.projectBuffer)(l,e.spatialReference,0,l,t,0);for(let o=2;o<l.length;o+=3)l[o]=_terrain_OverlayRenderer_js__WEBPACK_IMPORTED_MODULE_4__/* .drapedZ */ .bi;return{lines:u?c(a,l):[],projectionSuccess:u}}function c(o,e,n=null){const r=new Array;for(const{index:i,count:s}of o){if(s<=1)continue;const o=3*i,p=3*s;r.push({position:(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .doubleSubArray */ .l5)(e,3*i,3*s),mapPositions:null!=n?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_1__/* .doubleSubArray */ .l5)(n,o,p):void 0})}return r}


/***/ }),

/***/ 42490:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  bi: () => (/* binding */ te)
});

// UNUSED EXPORTS: OverlayRenderer, overlayRenderOccludedFlag

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/SetUtils.js
var SetUtils = __webpack_require__(76286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/interfaces.js
var interfaces = __webpack_require__(56867);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/debugFlags.js
var debugFlags = __webpack_require__(19620);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/terrain/interfaces.js
var terrain_interfaces = __webpack_require__(36572);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js
var LocalOriginFactory = __webpack_require__(10545);
;// ../node_modules/@arcgis/core/views/3d/terrain/Overlay.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Overlay_n{constructor(){this._extent=(0,aaBoundingRect/* create */.vt)(),this.resolution=0,this.renderLocalOrigin=(0,LocalOriginFactory/* fromValues */.f)(0,0,0,"O"),this.pixelRatio=1,this.mapUnitsPerPixel=1,this.canvasGeometries=new Overlay_r}get extent(){return this._extent}setupGeometryViews(e){if(this._setupGeometryView(),!e)return;const s=.001*e.range;if(this._extent[0]-s<=e.min){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect/* offset */.cY)(this._extent,e.range,0,s)}if(this._extent[2]+s>=e.max){const s=this.canvasGeometries.extents[this.canvasGeometries.numViews++];(0,aaBoundingRect/* offset */.cY)(this._extent,-e.range,0,s)}}_setupGeometryView(){this.canvasGeometries.numViews=1,(0,aaBoundingRect/* copy */.C)(this.canvasGeometries.extents[0],this._extent)}hasSomeSizedView(){for(let e=0;e<this.canvasGeometries.numViews;e++){const t=this.canvasGeometries.extents[e];if(t[0]!==t[2]&&t[1]!==t[3])return!0}return!1}}class Overlay_r{constructor(){this.extents=[(0,aaBoundingRect/* create */.vt)(),(0,aaBoundingRect/* create */.vt)(),(0,aaBoundingRect/* create */.vt)()],this.numViews=0}}

;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayContent.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var OverlayContent_o;!function(o){o[o.Color=0]="Color",o[o.ColorNoRasterImage=1]="ColorNoRasterImage",o[o.Highlight=2]="Highlight",o[o.WaterNormal=3]="WaterNormal",o[o.Occluded=4]="Occluded",o[o.ObjectAndLayerIdColor=5]="ObjectAndLayerIdColor"}(OverlayContent_o||(OverlayContent_o={}));

;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayFramebufferObject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OverlayFramebufferObject_t{constructor(e,t,h){this._fbos=e,this._format=t,this._name=h}get valid(){return null!=this._handle?.getTexture()}dispose(){this._handle=(0,maybe/* releaseMaybe */.Gz)(this._handle)}get texture(){return this._handle?.getTexture()}bind(e,t,h){this._handle&&this._handle.fbo?.width===t&&this._handle.fbo?.height===h||(this._handle?.release(),this._handle=this._fbos.acquire(t,h,this._name,this._format)),e.bindFramebuffer(this._handle?.fbo)}generateMipMap(){this._handle?.getTexture()?.descriptor?.hasMipmap&&this._handle?.getTexture()?.generateMipmap()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/FBOCacheFormats.js
var FBOCacheFormats = __webpack_require__(79320);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js
var olidUtils = __webpack_require__(36340);
;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTargets.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OverlayRenderTargets_s{constructor(e,t,l,s,i=FBOCacheFormats/* ColorFormat */.NV.RGBA8UNORM_MIPMAP){this.output=l,this.content=s,this.fbo=new OverlayFramebufferObject_t(e,i,t)}get valid(){return this.fbo.valid}}class OverlayRenderTargets_i{constructor(r){this.targets=[new OverlayRenderTargets_s(r,"overlay color",ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.Color),new OverlayRenderTargets_s(r,"overlay IM color",ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.ColorNoRasterImage),new OverlayRenderTargets_s(r,"overlay highlight",ShaderOutput/* ShaderOutput */.V.Highlight,OverlayContent_o.Highlight,FBOCacheFormats/* ColorFormat */.NV.RG8UINT),new OverlayRenderTargets_s(r,"overlay water",ShaderOutput/* ShaderOutput */.V.Normal,OverlayContent_o.WaterNormal),new OverlayRenderTargets_s(r,"overlay occluded",ShaderOutput/* ShaderOutput */.V.Color,OverlayContent_o.Occluded)],(0,olidUtils/* olidEnabled */.E)()&&this.targets.push(new OverlayRenderTargets_s(r,"overlay olid",ShaderOutput/* ShaderOutput */.V.ObjectAndLayerIdColor,OverlayContent_o.ObjectAndLayerIdColor,FBOCacheFormats/* ColorFormat */.NV.RGBA8UNORM))}getTexture(e){return this.targets[e]?.fbo.texture}dispose(){for(const e of this.targets)e.fbo.dispose()}computeValidity(){return this.targets.reduce(((e,r,o)=>r.valid?e|=1<<o:e),0)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js + 3 modules
var RenderCamera = __webpack_require__(99369);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/renderPasses/RenderPassIdentifier.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var RenderPassIdentifier_a;!function(a){a[a.Material=0]="Material",a[a.ShadowMap=1]="ShadowMap",a[a.Highlight=2]="Highlight",a[a.ViewshedShadowMap=3]="ViewshedShadowMap"}(RenderPassIdentifier_a||(RenderPassIdentifier_a={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js
var MainLighting_glsl = __webpack_require__(696);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js + 5 modules
var Water_glsl = __webpack_require__(548);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4DrawUniform.js
var Float4DrawUniform = __webpack_require__(84674);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DUintPassUniform.js
var Texture2DUintPassUniform = __webpack_require__(7568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Uniform.js
var Uniform = __webpack_require__(99120);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/terrain/Overlay.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var h;function C(e,o){const{vertex:r,fragment:t}=e;r.uniforms.add(new x("overlayTexOffset",((e,o)=>V(e,o))),new x("overlayTexScale",((e,o)=>I(e,o)))),t.constants.add("overlayOpacity","float",1),t.uniforms.add(new p("ovColorTex",((e,o)=>b(e,o)))),T(e,o)}function O(e,o){const{vertex:r,fragment:t}=e,{output:a}=o;r.uniforms.add(new M("overlayTexOffset"),new M("overlayTexScale")),t.uniforms.add(new y("overlayOpacity",(e=>e.overlayOpacity))),a!==n.Highlight&&t.uniforms.add(new p("ovColorTex",((e,o)=>o.overlay?.getTexture(e.overlayContent)))),T(e,o)}function T(e,o){const r=o.pbrMode===c.Water||o.pbrMode===c.WaterOnIntegratedMesh||o.pbrMode===c.TerrainWithWater;r&&e.include(u,o);const{vertex:t,fragment:a,varyings:i}=e;i.add("vtcOverlay","vec4");const{output:d}=o,x=d===n.Highlight;t.code.add(m`void setOverlayVTC(in vec2 uv) {
vtcOverlay = vec4(uv, uv) * overlayTexScale + overlayTexOffset;
}`),a.code.add(m`bool isValid(vec2 uv, vec2 dxdy) {
return (uv.x >= 0.0 + dxdy.x) && (uv.x <= 1.0 - dxdy.x) && (uv.y >= 0.0 + dxdy.y) && (uv.y <= 1.0 - dxdy.y);
}
vec4 getOverlayColor(sampler2D ov0Tex, vec4 texCoords) {
vec4 color0 = texture(ov0Tex, vec2(texCoords.x * 0.5, texCoords.y));
vec4 color1 = texture(ov0Tex, vec2(texCoords.z * 0.5 + 0.5, texCoords.w));
bool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));
bool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));
return mix(color1 * float(isValid1), color0, float(isValid0));
}`),x?a.uniforms.add(new f("overlayHighlightTexture",((e,o)=>o.overlay?.getTexture(l.Highlight)))).code.add(m`uvec2 getAllOverlayHighlightValuesEncoded() {
vec4 texCoords = vtcOverlay;
vec2 uvInner = texCoords.xy;
vec2 uvOuter = texCoords.zw;
bool isValidInner = isValid(uvInner, fwidth(uvInner));
bool isValidOuter = isValid(uvOuter, vec2(0.0, 0.0));
vec2 texelCoordInner = uvInner * vec2(0.5, 1.0);
vec2 texelCoordOuter = uvOuter * vec2(0.5, 1.0) + vec2(0.5,0.0);
vec2 texDim =  vec2(textureSize(overlayHighlightTexture, 0));
uvec2 texelValueInner = texelFetch(overlayHighlightTexture, ivec2(texelCoordInner * texDim), 0).rg;
uvec2 texelValueOuter = texelFetch(overlayHighlightTexture, ivec2(texelCoordOuter * texDim), 0).rg;
return
isValidInner ? texelValueInner :
isValidOuter ? texelValueOuter :
uvec2(0);
}`):(a.code.add(m`vec4 getCombinedOverlayColor() {
return overlayOpacity * getOverlayColor(ovColorTex, vtcOverlay);
}`),a.code.add(m`vec4 getOverlayColorTexel() {
vec4 texCoords = vtcOverlay;
vec2 texDim =  vec2(textureSize(ovColorTex, 0));
vec4 color0 = texelFetch(ovColorTex, ivec2(vec2(texCoords.x * 0.5, texCoords.y) * texDim), 0);
vec4 color1 = texelFetch(ovColorTex, ivec2(vec2(texCoords.z * 0.5 + 0.5, texCoords.w) * texDim), 0);
bool isValid0 = isValid(texCoords.xy, fwidth(texCoords.xy));
bool isValid1 = isValid(texCoords.zw, vec2(0.0, 0.0));
return mix(color1 * float(isValid1), color0, float(isValid0));
}`)),r&&(s(a),v(a),a.code.add(m`vec4 getOverlayWaterColor(vec4 maskInput, vec4 colorInput, vec3 vposEyeDir,
float shadow, vec3 localUp, mat3 tbn, vec3 position, vec3 positionWorld) {
vec3 n = normalize(tbn *  (2.0 * maskInput.rgb - vec3(1.0)));
vec3 v = vposEyeDir;
vec3 final = getSeaColor(n, v, mainLightDirection, colorInput.rgb, mainLightIntensity, localUp, 1.0 - shadow, maskInput.w, position, positionWorld);
return vec4(final, colorInput.w);
}`))}function b(e,o){return e.identifier===i.Material&&d(e.output)?e.occludedGround?o.overlay?.getTexture(l.Occluded):o.overlay?.getTexture(l.ColorNoRasterImage):e.identifier===i.Material&&e.output===n.ObjectAndLayerIdColor?o.overlay?.getTexture(l.ObjectAndLayerIdColor):e.identifier===i.Highlight?o.overlay?.getTexture(l.Highlight):null}function V(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(w[0]=e.toMapSpace[0]/r(i)-i[0]/r(i),w[1]=e.toMapSpace[1]/t(i)-i[1]/t(i));const n=l.overlay?.overlays[a.OUTER]?.extent;return o(n)&&(w[2]=e.toMapSpace[0]/r(n)-n[0]/r(n),w[3]=e.toMapSpace[1]/t(n)-n[1]/t(n)),w}function I(e,l){const i=l.overlay?.overlays[a.INNER]?.extent;o(i)&&(w[0]=e.toMapSpace[2]/r(i),w[1]=e.toMapSpace[3]/t(i));const n=l.overlay?.overlays[a.OUTER]?.extent;return o(n)&&(w[2]=e.toMapSpace[2]/r(n),w[3]=e.toMapSpace[3]/t(n)),w}!function(e){e[e.Disabled=0]="Disabled",e[e.Enabled=1]="Enabled",e[e.EnabledWithWater=2]="EnabledWithWater",e[e.COUNT=3]="COUNT"}(h||(h={}));const w=(0,vec4f64/* create */.vt)();class M extends Uniform/* Uniform */.n{constructor(e){super(e,"vec4")}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/TextureOnly.glsl.js
var TextureOnly_glsl = __webpack_require__(52377);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js
var RenderPlugin = __webpack_require__(38931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl.js
var webgl = __webpack_require__(11041);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl/RenderNode.js
var RenderNode = __webpack_require__(43196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js + 1 modules
var ShaderTechnique = __webpack_require__(28347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HighlightApply.glsl.js
var HighlightApply_glsl = __webpack_require__(20072);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightApplyTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HighlightApplyTechnique_t extends ShaderTechnique/* ShaderTechnique */.w{constructor(r,o){super(r,o,new ReloadableShaderModule/* ReloadableShaderModule */.$(HighlightApply_glsl.H,(()=>__webpack_require__.e(/* import() */ 25636).then(__webpack_require__.bind(__webpack_require__, 25636)))))}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({blending:renderState/* unpremultipliedAlphaToPremultipliedAlpha */.T8,colorWrite:renderState/* defaultColorWrite */.kn})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HighlightBlur.glsl.js
var HighlightBlur_glsl = __webpack_require__(63601);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightBlurTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HighlightBlurTechnique_l extends ShaderTechnique/* ShaderTechnique */.w{constructor(r,o){super(r,o,new ReloadableShaderModule/* ReloadableShaderModule */.$(HighlightBlur_glsl.a,(()=>__webpack_require__.e(/* import() */ 28765).then(__webpack_require__.bind(__webpack_require__, 28765)))))}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWrite */.kn})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HighlightDownsample.glsl.js
var HighlightDownsample_glsl = __webpack_require__(61068);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightDownsampleTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HighlightDownsampleTechnique_l extends ShaderTechnique/* ShaderTechnique */.w{constructor(r,s){super(r,s,new ReloadableShaderModule/* ReloadableShaderModule */.$(HighlightDownsample_glsl.a,(()=>__webpack_require__.e(/* import() */ 74688).then(__webpack_require__.bind(__webpack_require__, 74688)))))}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWrite */.kn})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/HighlightDefaults.js
var HighlightDefaults = __webpack_require__(29736);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/NoParameters.js
var NoParameters = __webpack_require__(22005);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightPassParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends NoParameters/* NoParameters */.Y{constructor(){super(...arguments),this.occludedFactor=HighlightDefaults/* defaultOccludedFactor */.cD,this.verticalCellCount=0,this.horizontalCellCount=0,this.highlightLevel=0,this.pixelRatio=1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HighlightToSingle.glsl.js
var HighlightToSingle_glsl = __webpack_require__(24633);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/HighlightToSingleTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HighlightToSingleTechnique_l extends ShaderTechnique/* ShaderTechnique */.w{constructor(r,o){super(r,o,new ReloadableShaderModule/* ReloadableShaderModule */.$(HighlightToSingle_glsl.H,(()=>__webpack_require__.e(/* import() */ 4037).then(__webpack_require__.bind(__webpack_require__, 4037)))))}initializePipeline(){return (0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWrite */.kn})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js
var VertexElementDescriptor = __webpack_require__(69955);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DefaultVertexBufferLayouts_t=[],DefaultVertexBufferLayouts_T=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,3,enums/* DataType */.pe.FLOAT,0,12)],DefaultVertexBufferLayouts_n=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,2,enums/* DataType */.pe.FLOAT,0,8)],DefaultVertexBufferLayouts_o=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,2,enums/* DataType */.pe.FLOAT,0,12),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.UV0,2,enums/* DataType */.pe.HALF_FLOAT,8,12)],DefaultVertexBufferLayouts_m=[new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.POSITION,2,enums/* DataType */.pe.FLOAT,0,16),new VertexElementDescriptor/* VertexElementDescriptor */._(VertexAttribute/* VertexAttribute */.r.UV0,2,enums/* DataType */.pe.FLOAT,8,16)];

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(11459);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/highlight/Highlight.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let Highlight_y=class extends RenderNode/* default */.A{constructor(){super(...arguments),this.produces=webgl/* InternalRenderCategory */.OG.HIGHLIGHTS,this.consumes={required:[webgl/* InternalRenderCategory */.OG.HIGHLIGHTS,"highlights"]},this._downsampleDrawParameters=new HighlightDownsample_glsl.H,this._passParameters=new e,this._highlightBlurDrawParameters=new HighlightBlur_glsl.H,this._grid=new A}initialize(){this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this._updateOptionsTexture()),(()=>{}),reactiveUtils/* initial */.Vh)])}destroy(){this._grid.coverage=(0,maybe/* releaseMaybe */.Gz)(this._grid.coverage),this._grid.vao=(0,maybe/* disposeMaybe */.WD)(this._grid.vao),this._passParameters.highlightOptionsTexture=(0,maybe/* releaseMaybe */.Gz)(this._passParameters.highlightOptionsTexture)}_updateOptionsTexture(){if(null==this._passParameters.highlightOptionsTexture){const e=new TextureDescriptor/* TextureDescriptor */.R(16,2);e.internalFormat=enums/* PixelFormat */.Ab.RGBA,e.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,this._passParameters.highlightOptionsTexture=new Texture/* Texture */.g(this.renderingContext,e,null)}this._passParameters.highlightOptionsTexture.setData(E(this.view.state.highlights)),this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE)}precompile(){this.techniques.precompile(HighlightDownsampleTechnique_l),this.techniques.precompile(HighlightToSingleTechnique_l),this.techniques.precompile(HighlightBlurTechnique_l),this.techniques.precompile(HighlightApplyTechnique_t)}render(e){const t=e.find((({name:e})=>e===webgl/* InternalRenderCategory */.OG.HIGHLIGHTS)),{techniques:r,bindParameters:i,_passParameters:s,renderingContext:o}=this;if(!i.decorations)return t;const h=r.get(HighlightDownsampleTechnique_l);if(!h.compiled)return this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE),t;const n=e.find((({name:e})=>"highlights"===e)).getTexture();s.highlightTexture=n;const a=()=>{this._gridUpdateResources(n);const e=this._gridComputeCoverage(h,n,i),{horizontalCellCount:t,verticalCellCount:r}=e;return s.horizontalCellCount=t,s.verticalCellCount=r,s.coverageTexture=e.coverage?.getTexture(),e},g=e=>{const t=e.verticalCellCount*e.horizontalCellCount;o.bindVAO(e.vao),o.drawElementsInstanced(enums/* PrimitiveType */.WR.TRIANGLES,6,enums/* DataType */.pe.UNSIGNED_BYTE,0,t)},{camera:c}=i,u=()=>{o.bindFramebuffer(t.fbo),o.setViewport4fv(c.fullViewport)};return this._renderHighlightPostprocess(n,a,g,u),s.highlightTexture=null,s.coverageTexture=null,t}_renderHighlightPostprocess(e,t,r,i){const{fboCache:s,techniques:o,bindParameters:h,_passParameters:l,renderingContext:a}=this,m=o.get(HighlightToSingleTechnique_l),p=o.get(HighlightBlurTechnique_l),T=o.get(HighlightApplyTechnique_t);if(!T.compiled||!p.compiled||!m.compiled)return void this.requestRender(basicInterfaces/* RenderRequestType */.C7.UPDATE);l.highlightTexture=e;const b=t(),{width:w,height:x}=e.descriptor;l.highlightTexture=e;const{camera:C}=h,{fullWidth:v,fullHeight:_,pixelRatio:j}=C,O=Math.ceil(v/j),H=Math.ceil(_/j),{_highlightBlurDrawParameters:P}=this,q=this.view.stage.renderView.renderer,{highlights:D}=h;for(let c=0;c<D.length;++c){const{name:e}=D[c];if(!q.hasHighlight(e))continue;l.highlightLevel=c,a.setClearColor(0,0,0,0);const t=s.acquire(w,x,"single highlight",FBOCacheFormats/* ColorFormat */.NV.RG8UNORM);a.bindFramebuffer(t.fbo),a.setViewport(0,0,w,x),a.clear(enums/* FramebufferBit */.NV.COLOR),a.bindTechnique(m,h,l),r(b),P.blurInput=t.getTexture(),(0,vec2/* set */.hZ)(P.blurSize,1/O,0);const o=s.acquire(O,H,"single highlight blur h",FBOCacheFormats/* ColorFormat */.NV.RG8UNORM);a.unbindTexture(o.fbo?.colorTexture),a.bindFramebuffer(o.fbo),a.setViewport(0,0,O,H),a.clear(enums/* FramebufferBit */.NV.COLOR),a.bindTechnique(p,h,l,P),r(b),t.release(),(0,vec2/* set */.hZ)(P.blurSize,0,1/H),l.highlightBlurTexture=o.getTexture(),i(),a.bindTechnique(T,h,l,P),r(b),o.release()}}_gridUpdateResources(e){const t=this._grid,{width:r,height:i}=e.descriptor;if(t.horizontalCellCount=Math.ceil(r/HighlightDownsample_glsl.g),t.verticalCellCount=Math.ceil(i/HighlightDownsample_glsl.g),t.vao)return;const s=this.renderingContext,o=BufferObject/* BufferObject */.g.createIndex(s,enums/* Usage */._U.STATIC_DRAW,L);t.vao=new VertexArrayObject/* VertexArrayObject */.Z(s,DefaultVertexAttributeLocations/* Default3D */.D,new Map([["geometry",DefaultVertexBufferLayouts_t]]),new Map([["geometry",BufferObject/* BufferObject */.g.createVertex(s,enums/* Usage */._U.STATIC_DRAW)]]),o)}_gridComputeCoverage(e,t,r){const i=this.renderingContext,s=this._grid,o=t.descriptor,h=Math.ceil(o.width/HighlightDownsample_glsl.g),n=Math.ceil(o.height/HighlightDownsample_glsl.g);this._downsampleDrawParameters.input=t;const{highlights:l}=r;s.coverage?.release();const a=this.fboCache.acquire(h,n,"highlight coverage",l.length>B?FBOCacheFormats/* ColorFormat */.NV.RG8UINT:FBOCacheFormats/* ColorFormat */.NV.R8UINT);return s.coverage=a,i.bindFramebuffer(a.fbo),i.bindTechnique(e,r,this._passParameters,this._downsampleDrawParameters),i.setViewport(0,0,h,n),i.screen.draw(),s}get test(){}};(0,tslib_es6._)([(0,property/* property */.MZ)()],Highlight_y.prototype,"produces",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],Highlight_y.prototype,"consumes",void 0),Highlight_y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.effects.highlight.Highlight")],Highlight_y);class A{constructor(){this.coverage=null,this.vao=null,this.verticalCellCount=0,this.horizontalCellCount=0,this.viewportWidth=0,this.viewportHeight=0}}function E(e){const t=new Uint8Array(128);let r=0;for(const i of e){const e=4*r,s=4*r+64;++r;const{color:o}=i,h=i.haloColor??o;t[e+0]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]=i.fillOpacity*o.a*255,t[s+0]=h.r,t[s+1]=h.g,t[s+2]=h.b,t[s+3]=i.haloOpacity*h.a*255}return t}let S=0;function G(e){let t=0;for(const i of e){const{name:e}=i;t+=e.length;const{color:r,fillOpacity:s,haloColor:o,haloOpacity:h}=i;t+=r.r+r.g+r.b+r.a+s,t+=o?o.r+o.g+o.b+o.a+h:0}const r=e.at(0);if(r){const{shadowOpacity:e,shadowDifference:i,shadowColor:s}=r;t+=e+i+s.r+s.g+s.b+s.a}return S+++(t>=0?0:1)}const L=new Uint8Array([0,1,2,2,1,3]);function Highlight_M(e,t,r,i,s,o=0){const{highlights:h}=i,l=h.length>1?t.acquire(r.width,r.height,"highlight mix",h.length>B?FBOCacheFormats/* ColorFormat */.NV.RG8UINT:FBOCacheFormats/* ColorFormat */.NV.R8UINT):null,{gl:a}=e;if(l){const t=e.getBoundFramebufferObject();e.bindFramebuffer(l.fbo),a.clearBufferuiv(a.COLOR,0,[0,0,0,0]),e.bindFramebuffer(t)}const c=l?.getTexture();i.highlightMixTexture=c,(0,vec2/* set */.hZ)(i.highlightMixOrigin,o,0),h.forEach(((t,h)=>{if(h>0){const t=Texture/* Texture */.g.TEXTURE_UNIT_FOR_UPDATES;e.bindTexture(c,t),e.setActiveTexture(t),a.copyTexSubImage2D(enums/* TextureType */.Ap.TEXTURE_2D,0,0,0,o,0,r.width,r.height),e.bindTexture(null,t)}e.clear(enums/* FramebufferBit */.NV.DEPTH),i.highlightLevel=h,s()})),i.highlightLevel=null,i.highlightMixTexture=null,l?.release()}const B=4;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/NestedMap.js
var NestedMap = __webpack_require__(80912);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GLMaterialParameters_t{constructor(t,s,e,i){this.material=t,this.output=s,this.techniques=e,this.textures=i}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GLMaterialRepository_a{constructor(e,t,i,s){this._textures=e,this._techniques=t,this.materialChanged=i,this.requestRender=s,this._id2glMaterialRef=new NestedMap/* NestedMap */.O}dispose(){this._textures.destroy()}acquire(e,t,r){this._ownMaterial(e);const s=e.produces.get(t);if(!s?.(r))return null;let a=this._id2glMaterialRef.get(r,e.id);if(null==a){const t=e.createGLMaterial(new GLMaterialParameters_t(e,r,this._techniques,this._textures));a=new GLMaterialRepository_o(t),this._id2glMaterialRef.set(r,e.id,a)}return a.ref(),a.glMaterial}release(e,r){const i=this._id2glMaterialRef.get(r,e.id);null!=i&&(i.unref(),i.referenced||((0,maybe/* disposeMaybe */.WD)(i.glMaterial),this._id2glMaterialRef.delete(r,e.id)))}_ownMaterial(t){t.repository&&t.repository!==this&&Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.GLMaterialRepository").error("Material is already owned by a different material repository"),t.repository=this}}class GLMaterialRepository_o{constructor(e){this.glMaterial=e,this._refCnt=0}ref(){++this._refCnt}unref(){--this._refCnt,(0,Util/* assert */.vA)(this._refCnt>=0)}get referenced(){return this._refCnt>0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js
var GridLocalOriginFactory = __webpack_require__(24734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var OITPass = __webpack_require__(69338);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/time.js
var time = __webpack_require__(60882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js
var CloudsParameters = __webpack_require__(58718);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUDRenderStyle.js
var HUDRenderStyle = __webpack_require__(15354);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Update.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var Update_e;!function(e){e[e.Immediate=0]="Immediate",e[e.FadeWithWeather=1]="FadeWithWeather"}(Update_e||(Update_e={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js + 2 modules
var SceneLighting = __webpack_require__(9409);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BindParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class BindParameters_o{constructor(i,t){this.width=i,this.height=t}}class BindParameters_a{constructor(i){this.shadowMap=i,this.slot=RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,this.slicePlane=null,this.hasOccludees=!1,this.enableFillLights=!0,this.oitPass=OITPass/* OITPass */.Y.NONE,this.alignPixelEnabled=!1,this.decorations=!0,this.overlayStretch=1,this.viewshedEnabled=!1,this._camera=new RenderCamera/* default */.A,this._inverseViewport=(0,vec2f64/* create */.vt)(),this._oldLighting=new SceneLighting/* SceneLighting */.TA,this._newLighting=new SceneLighting/* SceneLighting */.TA,this._fadedLighting=new SceneLighting/* SceneLighting */.TA,this._lighting=this._newLighting,this.ssr=new BindParameters_c,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.highlights=new Array,this.highlightOrderMap=new Map,this.highlightMixOrigin=(0,vec2f64/* create */.vt)(),this.highlightMixTexture=null,this.hudRenderStyle=HUDRenderStyle/* HUDRenderStyle */.D.Occluded,this.hudOccludedFragmentOpacity=1,this.snowCover=!1,this.clouds=new CloudsParameters/* CloudsParameters */.n,this.shadowHighlightsVisible=!1}get camera(){return this._camera}set camera(i){this._camera=i,this._inverseViewport[0]=1/i.fullViewport[2],this._inverseViewport[1]=1/i.fullViewport[3]}get inverseViewport(){return this._inverseViewport}get lighting(){return this._lighting}fadeLighting(){switch(this.clouds.fadeFactor){case 0:this._lighting=this._oldLighting;break;default:this._fadedLighting.lerpLighting(this._oldLighting,this._newLighting,this.clouds.fadeFactor),this._lighting=this._fadedLighting;break;case 1:this._lighting=this._newLighting,this._oldLighting.copyFrom(this._newLighting)}}updateLighting(i,t,h,e){this._oldLighting.copyFrom(this.lighting),this._newLighting.noonFactor=t,this._newLighting.globalFactor=h,this._newLighting.set(i),e===Update_e.FadeWithWeather&&this.clouds.requestFade(),this.fadeLighting()}get highlight(){return null==this.highlightLevel?null:this.highlights[this.highlightLevel]}}class BindParameters_c{constructor(){this.fadeFactor=1,this.reprojectionMatrix=(0,mat4f64/* create */.vt)()}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RenderContext_a{constructor(s,a,o){this.rctx=s,this.techniques=o,this.lastFrameCamera=new RenderCamera/* default */.A,this.output=ShaderOutput/* ShaderOutput */.V.Color,this.renderOccludedMask=RenderContext_n,this.time=(0,time/* Milliseconds */.l5)(0),this.bind=new BindParameters_a(a),this.bind.alignPixelEnabled=!0}}const RenderContext_n=Material/* RenderOccludedFlag */.m$.Occlude|Material/* RenderOccludedFlag */.m$.OccludeAndTransparent|Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js
var mat3f64 = __webpack_require__(78607);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/CascadeCamera.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let CascadeCamera_i=class extends RenderCamera/* default */.A{constructor(){super(...arguments),this._projectionMatrix=(0,mat4f64/* create */.vt)()}get projectionMatrix(){return this._projectionMatrix}};(0,tslib_es6._)([(0,property/* property */.MZ)()],CascadeCamera_i.prototype,"_projectionMatrix",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],CascadeCamera_i.prototype,"projectionMatrix",null),CascadeCamera_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl-engine.lib.CascadeCamera")],CascadeCamera_i);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js
var textureUtils = __webpack_require__(84147);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ShadowMap.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var ShadowMap_E;!function(t){t[t.Highlight=0]="Highlight",t[t.ExcludeHighlight=1]="ExcludeHighlight"}(ShadowMap_E||(ShadowMap_E={}));class P{constructor(){this.camera=new CascadeCamera_i,this.lightMat=(0,mat4f64/* create */.vt)()}}class ShadowMap_A{constructor(){this.maxNumCascadesHighQuality=4,this.maxNumCascadesLowQuality=4,this.textureSizeModHighQuality=1.3,this.textureSizeModLowQuality=.9,this.splitSchemeLambda=0}}class ShadowMap_I{constructor(t,s){this._fbos=t,this._viewingMode=s,this._snapshots=new Array,this._textureHeight=0,this._numCascades=1,this.settings=new ShadowMap_A,this._projectionView=(0,mat4f64/* create */.vt)(),this._projectionViewInverse=(0,mat4f64/* create */.vt)(),this._modelViewLight=(0,mat4f64/* create */.vt)(),this._cascadeDistances=[0,0,0,0,0],this._usedCascadeDistances=(0,vec4f64/* create */.vt)(),this._cascades=[new P,new P,new P,new P],this._lastOrigin=null,this._enabled=!1,this._maxTextureWidth=Math.min((0,has/* default */.A)("esri-mobile")?4096:16384,t.rctx.parameters.maxTextureSize)}dispose(){this.enabled=!1,this.disposeOffscreenBuffers()}get depthTexture(){return this._handle?.getTexture(enums/* DepthStencilAttachment */.nI)}get _textureWidth(){return this._textureHeight*this._numCascades}get numCascades(){return this._numCascades}get cascadeDistances(){return (0,vec42.s)(this._usedCascadeDistances,this._cascadeDistances[0],this._numCascades>1?this._cascadeDistances[1]:1/0,this._numCascades>2?this._cascadeDistances[2]:1/0,this._numCascades>3?this._cascadeDistances[3]:1/0)}disposeMainBuffer(){this._handle=(0,maybe/* releaseMaybe */.Gz)(this._handle)}disposeOffscreenBuffers(){this.disposeMainBuffer(),this._discardSnapshots()}set maxCascades(s){this.settings.maxNumCascadesHighQuality=(0,mathUtils/* clamp */.qE)(Math.floor(s),1,4)}get maxCascades(){return this.settings.maxNumCascadesHighQuality}set enabled(t){this._enabled=t,t||this.disposeOffscreenBuffers()}get enabled(){return this._enabled}get ready(){return this._enabled&&null!=this.depthTexture}get cascades(){for(let t=0;t<this._numCascades;++t)tt[t]=this._cascades[t];return tt.length=this._numCascades,tt}start(t,s,e,i,a){(0,Util/* assert */.vA)(this.enabled);const{near:r,far:h}=Mt(e);this._computeCascadeDistances(r,h,i),this._textureHeight=this._computeTextureHeight(t,a,i),this._setupMatrices(t,s);const{viewMatrix:o,projectionMatrix:n}=t;for(let c=0;c<this._numCascades;++c)this._constructCascade(c,n,o,s);this._lastOrigin=null,this.clear()}finish(){(0,Util/* assert */.vA)(this.enabled)}getShadowMapMatrices(t){if(!this._lastOrigin||!(0,vec32.q)(t,this._lastOrigin)){this._lastOrigin=this._lastOrigin||(0,vec3f64/* create */.vt)(),(0,vec32.c)(this._lastOrigin,t);for(let s=0;s<this._numCascades;++s){(0,mat4/* translate */.Tl)(st,this._cascades[s].lightMat,t);for(let t=0;t<16;++t)et[16*s+t]=st[t]}}return et}moveSnapshot(t){(0,Util/* assert */.vA)(this.enabled),this._snapshots[t]?.release(),this._snapshots[t]=this._handle,this._handle?.setName(t===ShadowMap_E.Highlight?"shadow map highlight":"shadow map excluding highlight"),this._handle=null}copySnapshot(t){if(!this.enabled)return;const s=this._handle?.getTexture(enums/* DepthStencilAttachment */.nI)?.descriptor;if(!s)return;this._snapshots[t]?.release();const e=t===ShadowMap_E.Highlight?"shadow map highlight":"shadow map excluding highlight",i=this._acquireFBO(e);this._snapshots[t]=i;const a=this._handle?.fbo;if(!a||!i?.fbo)return void console.error("No FBO");const{rctx:r}=this._fbos;r.blitFramebuffer(a,i.fbo,enums/* FramebufferBit */.NV.DEPTH)}getSnapshot(t){return this.enabled?this._snapshots[t]?.getTexture(enums/* DepthStencilAttachment */.nI):null}clear(){this._ensureFbo(),this.bindFbo(),this._fbos.rctx.clear(enums/* FramebufferBit */.NV.DEPTH)}_computeTextureHeight({pixelRatio:t,fullWidth:s,fullHeight:e},i,a){const r=Math.min(window.devicePixelRatio,i)/t,h=a?this.settings.textureSizeModHighQuality:this.settings.textureSizeModLowQuality;return (0,textureUtils/* applyTextureResizeModulo */.Mv)(Math.max(s,e)*r*h,this._maxTextureWidth/this._numCascades)}_ensureFbo(){this._handle?.fbo?.width===this._textureWidth&&this._handle?.fbo.height===this._textureHeight||(this._handle?.release(),this._handle=this._acquireFBO("shadow map"))}_acquireFBO(t){const s=this._fbos.acquire(this._textureWidth,this._textureHeight,t,FBOCacheFormats/* DepthFormat */.zd.DEPTH16);return s.getTexture(enums/* DepthStencilAttachment */.nI)?.setShadowFiltering(!0),s}_discardSnapshot(t){this._snapshots[t]=(0,maybe/* releaseMaybe */.Gz)(this._snapshots[t])}_discardSnapshots(){for(let t=0;t<this._snapshots.length;++t)this._discardSnapshot(t);this._snapshots.length=0}bindFbo(){this._fbos.rctx.bindFramebuffer(this._handle?.fbo)}_constructCascade(t,s,e,i){const a=this._cascades[t],o=-this._cascadeDistances[t],n=-this._cascadeDistances[t+1],c=(s[10]*o+s[14])/Math.abs(s[11]*o+s[15]),l=(s[10]*n+s[14])/Math.abs(s[11]*n+s[15]);(0,Util/* assert */.vA)(c<l);for(let r=0;r<8;++r){(0,vec42.s)(k,r%4==0||r%4==3?-1:1,r%4==0||r%4==1?-1:1,r<4?c:l,1);const t=ShadowMap_G[r];(0,vec42.t)(t,k,this._projectionViewInverse),t[0]/=t[3],t[1]/=t[3],t[2]/=t[3]}(0,vec32.u)($,ShadowMap_G[0]),a.camera.viewMatrix=(0,mat4/* translate */.Tl)(U,this._modelViewLight,$);for(let r=0;r<8;++r)(0,vec32.t)(ShadowMap_G[r],ShadowMap_G[r],a.camera.viewMatrix);let d=ShadowMap_G[0][2],u=ShadowMap_G[0][2];for(let r=1;r<8;++r)d=Math.min(d,ShadowMap_G[r][2]),u=Math.max(u,ShadowMap_G[r][2]);d-=200,u+=200,a.camera.near=-u,a.camera.far=-d,wt(e,i,d,u,a.camera),(0,mat4/* multiply */.lw)(a.lightMat,a.camera.projectionMatrix,a.camera.viewMatrix);const m=this._textureHeight;a.camera.viewport=[t*m,0,m,m]}_setupMatrices(t,s){(0,mat4/* multiply */.lw)(this._projectionView,t.projectionMatrix,t.viewMatrix),(0,mat4/* invert */.B8)(this._projectionViewInverse,this._projectionView);const e=this._viewingMode===ViewingMode/* ViewingMode */.RT.Global?t.eye:(0,vec32.i)($,0,0,1);(0,mat4/* lookAt */.t5)(this._modelViewLight,[0,0,0],[-s[0],-s[1],-s[2]],e)}_computeCascadeDistances(t,e,i){const a=i?this.settings.maxNumCascadesHighQuality:this.settings.maxNumCascadesLowQuality;this._numCascades=Math.min(1+Math.floor((0,Util/* logWithBase */.kL)(e/t,4)),a);const r=(e-t)/this._numCascades,h=(e/t)**(1/this._numCascades);let o=t,n=t;for(let c=0;c<this._numCascades+1;++c)this._cascadeDistances[c]=(0,mathUtils/* lerp */.Cc)(o,n,this.settings.splitSchemeLambda),o*=h,n+=r}get test(){}}const U=(0,mat4f64/* create */.vt)(),k=(0,vec4f64/* create */.vt)(),ShadowMap_G=[];for(let Ct=0;Ct<8;++Ct)ShadowMap_G.push((0,vec4f64/* create */.vt)());const J=(0,vec2f64/* create */.vt)(),K=(0,vec2f64/* create */.vt)(),X=(0,vec2f64/* create */.vt)(),Y=(0,vec2f64/* create */.vt)(),Z=(0,vec2f64/* create */.vt)(),$=(0,vec3f64/* create */.vt)(),tt=[],st=(0,mat4f64/* create */.vt)(),et=mat4f64/* IDENTITY */.zK.concat(mat4f64/* IDENTITY */.zK,mat4f64/* IDENTITY */.zK,mat4f64/* IDENTITY */.zK,mat4f64/* IDENTITY */.zK),it=(0,vec2f64/* create */.vt)(),at=(0,vec2f64/* create */.vt)(),rt=[(0,vec2f64/* create */.vt)(),(0,vec2f64/* create */.vt)(),(0,vec2f64/* create */.vt)(),(0,vec2f64/* create */.vt)()],ht=(0,vec2f64/* create */.vt)(),ot=(0,vec2f64/* create */.vt)(),nt=(0,vec2f64/* create */.vt)(),ct=(0,vec2f64/* create */.vt)(),lt=(0,vec2f64/* create */.vt)(),dt=(0,vec2f64/* create */.vt)(),ut=(0,vec2f64/* create */.vt)();function mt(t,s,e,i,a,r,h,o){(0,vec2/* set */.hZ)(it,0,0);for(let d=0;d<4;++d)(0,vec2/* add */.WQ)(it,it,t[d]);(0,vec2/* scale */.hs)(it,it,.25),(0,vec2/* set */.hZ)(at,0,0);for(let d=4;d<8;++d)(0,vec2/* add */.WQ)(at,at,t[d]);(0,vec2/* scale */.hs)(at,at,.25),(0,vec2/* lerp */.Cc)(rt[0],t[4],t[5],.5),(0,vec2/* lerp */.Cc)(rt[1],t[5],t[6],.5),(0,vec2/* lerp */.Cc)(rt[2],t[6],t[7],.5),(0,vec2/* lerp */.Cc)(rt[3],t[7],t[4],.5);let n=0,c=(0,vec2/* squaredDistance */.hG)(rt[0],it);for(let d=1;d<4;++d){const t=(0,vec2/* squaredDistance */.hG)(rt[d],it);t<c&&(c=t,n=d)}(0,vec2/* subtract */.Re)(ht,rt[n],t[n+4]);const l=ht[0];let M,C;ht[0]=-ht[1],ht[1]=l,(0,vec2/* subtract */.Re)(ot,at,it),(0,vec2/* dot */.Om)(ot,ht)<0&&(0,vec2/* negate */.ze)(ht,ht),(0,vec2/* lerp */.Cc)(ht,ht,ot,e),(0,vec2/* normalize */.S8)(ht,ht),M=C=(0,vec2/* dot */.Om)((0,vec2/* subtract */.Re)(nt,t[0],it),ht);for(let d=1;d<8;++d){const s=(0,vec2/* dot */.Om)((0,vec2/* subtract */.Re)(nt,t[d],it),ht);s<M?M=s:s>C&&(C=s)}(0,vec2/* copy */.C)(i,it),(0,vec2/* scale */.hs)(nt,ht,M-s),(0,vec2/* add */.WQ)(i,i,nt);let j=-1,y=1,H=0,v=0;for(let d=0;d<8;++d){(0,vec2/* subtract */.Re)(ct,t[d],i),(0,vec2/* normalize */.S8)(ct,ct);const s=ht[0]*ct[1]-ht[1]*ct[0];s>0?s>j&&(j=s,H=d):s<y&&(y=s,v=d)}(0,Util/* verify */.MX)(j>0,"leftArea"),(0,Util/* verify */.MX)(y<0,"rightArea"),(0,vec2/* scale */.hs)(lt,ht,M),(0,vec2/* add */.WQ)(lt,lt,it),(0,vec2/* scale */.hs)(dt,ht,C),(0,vec2/* add */.WQ)(dt,dt,it),ut[0]=-ht[1],ut[1]=ht[0];const D=(0,Util/* rayRay2D */.L)(i,t[v],dt,(0,vec2/* add */.WQ)(nt,dt,ut),1,a),S=(0,Util/* rayRay2D */.L)(i,t[H],dt,nt,1,r),O=(0,Util/* rayRay2D */.L)(i,t[H],lt,(0,vec2/* add */.WQ)(nt,lt,ut),1,h),T=(0,Util/* rayRay2D */.L)(i,t[v],lt,nt,1,o);(0,Util/* verify */.MX)(D,"rayRay"),(0,Util/* verify */.MX)(S,"rayRay"),(0,Util/* verify */.MX)(O,"rayRay"),(0,Util/* verify */.MX)(T,"rayRay")}function _t(t,s){return 3*s+t}const ft=(0,vec2f64/* create */.vt)();function gt(t,s){return (0,vec2/* set */.hZ)(ft,t[s],t[s+3]),ft}const pt=(0,vec2f64/* create */.vt)(),xt=(0,mat3f64/* create */.vt)();function bt(t,s,e,i,a){(0,vec2/* subtract */.Re)(pt,e,i),(0,vec2/* scale */.hs)(pt,pt,.5),xt[0]=pt[0],xt[1]=pt[1],xt[2]=0,xt[3]=pt[1],xt[4]=-pt[0],xt[5]=0,xt[6]=pt[0]*pt[0]+pt[1]*pt[1],xt[7]=pt[0]*pt[1]-pt[1]*pt[0],xt[8]=1,xt[_t(0,2)]=-(0,vec2/* dot */.Om)(gt(xt,0),t),xt[_t(1,2)]=-(0,vec2/* dot */.Om)(gt(xt,1),t);let r=(0,vec2/* dot */.Om)(gt(xt,0),e)+xt[_t(0,2)],h=(0,vec2/* dot */.Om)(gt(xt,1),e)+xt[_t(1,2)],o=(0,vec2/* dot */.Om)(gt(xt,0),i)+xt[_t(0,2)],n=(0,vec2/* dot */.Om)(gt(xt,1),i)+xt[_t(1,2)];r=-(r+o)/(h+n),xt[_t(0,0)]+=xt[_t(1,0)]*r,xt[_t(0,1)]+=xt[_t(1,1)]*r,xt[_t(0,2)]+=xt[_t(1,2)]*r,r=1/((0,vec2/* dot */.Om)(gt(xt,0),e)+xt[_t(0,2)]),h=1/((0,vec2/* dot */.Om)(gt(xt,1),e)+xt[_t(1,2)]),xt[_t(0,0)]*=r,xt[_t(0,1)]*=r,xt[_t(0,2)]*=r,xt[_t(1,0)]*=h,xt[_t(1,1)]*=h,xt[_t(1,2)]*=h,xt[_t(2,0)]=xt[_t(1,0)],xt[_t(2,1)]=xt[_t(1,1)],xt[_t(2,2)]=xt[_t(1,2)],xt[_t(1,2)]+=1,r=(0,vec2/* dot */.Om)(gt(xt,1),s)+xt[_t(1,2)],h=(0,vec2/* dot */.Om)(gt(xt,2),s)+xt[_t(2,2)],o=(0,vec2/* dot */.Om)(gt(xt,1),e)+xt[_t(1,2)],n=(0,vec2/* dot */.Om)(gt(xt,2),e)+xt[_t(2,2)],r=-.5*(r/h+o/n),xt[_t(1,0)]+=xt[_t(2,0)]*r,xt[_t(1,1)]+=xt[_t(2,1)]*r,xt[_t(1,2)]+=xt[_t(2,2)]*r,r=(0,vec2/* dot */.Om)(gt(xt,1),s)+xt[_t(1,2)],h=(0,vec2/* dot */.Om)(gt(xt,2),s)+xt[_t(2,2)],o=-h/r,xt[_t(1,0)]*=o,xt[_t(1,1)]*=o,xt[_t(1,2)]*=o,a[0]=xt[0],a[1]=xt[1],a[2]=0,a[3]=xt[2],a[4]=xt[3],a[5]=xt[4],a[6]=0,a[7]=xt[5],a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=xt[6],a[13]=xt[7],a[14]=0,a[15]=xt[8]}function wt(t,s,i,a,r){const h=1/ShadowMap_G[0][3],o=1/ShadowMap_G[4][3];(0,Util/* assert */.vA)(h<o);let n=h+Math.sqrt(h*o);const c=Math.sin((0,mathUtils/* acosClamped */.XM)(t[2]*s[0]+t[6]*s[1]+t[10]*s[2]));n/=c,mt(ShadowMap_G,n,c,J,K,X,Y,Z),bt(J,K,Y,Z,r.projectionMatrix),r.projectionMatrix[10]=2/(i-a),r.projectionMatrix[14]=-(i+a)/(i-a)}function Mt(t){let{near:s,far:e}=t;return s<2&&(s=2),e<2&&(e=2),s>=e&&(s=2,e=4),{near:s,far:e}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TextureTechnique_t extends ShaderTechnique/* ShaderTechnique */.w{constructor(o,i){super(o,i,new ReloadableShaderModule/* ReloadableShaderModule */.$(TextureOnly_glsl.a,(()=>__webpack_require__.e(/* import() */ 76792).then(__webpack_require__.bind(__webpack_require__, 76792)))))}initializePipeline(e){return e.hasAlpha?(0,renderState/* makePipelineState */.Ey)({blending:renderState/* unpremultipliedAlphaToPremultipliedAlpha */.T8,colorWrite:renderState/* defaultColorWrite */.kn}):(0,renderState/* makePipelineState */.Ey)({colorWrite:renderState/* defaultColorWrite */.kn})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js + 1 modules
var ShaderTechniqueConfiguration = __webpack_require__(77941);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TextureTechniqueConfiguration_r extends ShaderTechniqueConfiguration/* ShaderTechniqueConfiguration */.K{constructor(){super(...arguments),this.hasAlpha=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],TextureTechniqueConfiguration_r.prototype,"hasAlpha",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(68699);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js
var Lightsources = __webpack_require__(75268);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/OverlayCompositing.glsl.js
var OverlayCompositing_glsl = __webpack_require__(36004);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/OverlayCompositingTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OverlayCompositingTechnique_s extends ShaderTechnique/* ShaderTechnique */.w{constructor(r,s){super(r,s,new ReloadableShaderModule/* ReloadableShaderModule */.$(OverlayCompositing_glsl.a,(()=>__webpack_require__.e(/* import() */ 26008).then(__webpack_require__.bind(__webpack_require__, 26008)))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/Scheduler.js
var Scheduler = __webpack_require__(22167);
;// ../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let OverlayRenderer_$=class extends RenderPlugin/* SyncRenderPlugin */.RW{constructor(e){super(e),this._overlays=null,this._renderTargets=null,this._overlayParameters=new OverlayCompositing_glsl.O,this.hasHighlights=!1,this._hasWater=!1,this._renderers=new Map,this._sortedDrapeSourceRenderersDirty=!1,this._sortedRenderers=new PooledArray/* default */.A,this._passParameters=new TextureOnly_glsl.T,this._screenToWorldRatio=1,this._localOriginFactory=null,this.unloadedMemory=0,this.ignoresMemoryFactor=!1,this._camera=new RenderCamera/* default */.A,this.events=new Evented/* default */.A,this.longitudeCyclical=null,this.produces=new Map([[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e=>e!==ShaderOutput/* ShaderOutput */.V.Highlight||this.hasHighlights],[RenderSlot/* RenderSlot */.N.DRAPED_WATER,()=>this._hasWater]]),this._hasTargetWithoutRasterImage=!1,this._hasDrapedFeatureSource=!1,this._hasDrapedRasterSource=!1}initialize(){const e=this._view,r=e.stage,t=r.renderer.fboCache,{waterTextures:s,techniques:i}=r.renderView;this._renderContext=new RenderContext_a(this._rctx,new ShadowMap_I(t,e.state.viewingMode),i),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>s.updating),(()=>this.events.emit("content-changed")),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.spatialReference),(e=>this._localOriginFactory=new GridLocalOriginFactory/* GridLocalOriginFactory */.g(e)),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils.on)((()=>e.allLayerViews),"after-changes",(()=>this._sortedDrapeSourceRenderersDirty=!0)),(0,reactiveUtils/* watch */.wB)((()=>G(e.state.highlights)),(()=>this._sortedDrapeSourceRenderersDirty=!0),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>e.state.highlights),(r=>{this._bindParameters.highlights=r,this._bindParameters.highlightOrderMap=e.state.highlightOrderMap}),reactiveUtils/* initial */.Vh),e.resourceController.scheduler.registerTask(Scheduler/* TaskPriority */.W6.OVERLAY_RENDERER,this)]);const{_bindParameters:l,_camera:d}=this;d.near=1,d.far=1e4,d.relativeElevation=null,l.slot=RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,l.mainDepth=null,l.camera=d,l.oitPass=OITPass/* OITPass */.Y.NONE,l.updateLighting([new Lightsources/* AmbientLight */.$p((0,vec3f64/* ones */.S)())],0,0,Update_e.Immediate)}destroy(){this._renderers.forEach((e=>e.destroy())),this._renderers.clear(),this._passParameters.texture=(0,maybe/* disposeMaybe */.WD)(this._passParameters.texture),this.disposeOverlays()}get _bindParameters(){return this._renderContext.bind}get _rctx(){return this._stage.renderView.renderingContext}get _view(){return this.parent.view}get _stage(){return this.parent.view.stage}get spatialReference(){return this.parent.spatialReference}get _techniques(){return this._stage.renderView.techniques}get rctx(){return this._rctx}get materials(){return this._pluginContext.materials}get screenToWorldRatio(){return this._screenToWorldRatio}get localOriginFactory(){return this._localOriginFactory}get pluginContext(){return this._pluginContext}initializeRenderContext(e){const r=new GLMaterialRepository_a(this._view.stage.renderView.textures,this._techniques,(()=>{this.notifyChange("rendersOccludedDraped"),this.events.emit("content-changed"),this.notifyChange("updating"),this.notifyChange("isEmpty")}),(()=>this.events.emit("content-changed")));this._pluginContext={...e,materials:r},this._techniques.precompile(OverlayCompositingTechnique_s)}uninitializeRenderContext(){}acquireTechniques(){return[]}render(){}get updating(){return this._sortedDrapeSourceRenderersDirty||(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.updating||e.canCompact))}get hasOverlays(){return null!=this._overlays&&null!=this._renderTargets}getMaterialRenderer(e){for(const r of this._renderers.values()){const t=r.getMaterialRenderer(e);if(t)return t}return null}get layers(){return this._sortedDrapeSourceRenderersDirty&&this._updateSortedDrapeSourceRenderers(),this._sortedRenderers.map((e=>e.drapeSource.layer)).filter((e=>!!e))}registerDrapeSource(e,r){const t=this._renderers.get(e);null!=t&&t.destroy(),this._renderers.set(e,r),this._sortedDrapeSourceRenderersDirty=!0,"fullOpacity"in e&&this.addHandles((0,reactiveUtils/* watch */.wB)((()=>e.fullOpacity),(()=>this.events.emit("content-changed"))),e)}removeDrapeSourceRenderer(e){if(null==e)return;const r=this._renderers.get(e);null!=r&&(this._sortedDrapeSourceRenderersDirty=!0,this._renderers.delete(e),this.removeHandles(e),r.destroy())}computeValidity(){return this._renderTargets?.computeValidity()??0}releaseRenderTargets(){this._renderTargets?.dispose()}get overlays(){return this._overlays??[]}ensureDrapeTargets(e){this._hasTargetWithoutRasterImage=!!this._overlays&&(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeTargetType===interfaces/* DrapeTargetType */.sv.WithoutRasterImage))}ensureDrapeSources(e){this._overlays?(this._hasDrapedFeatureSource=(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeSourceType===interfaces/* DrapeSourceType */.Om.Features)),this._hasDrapedRasterSource=(0,SetUtils/* someSet */.bw)(e,(e=>e.drapeSourceType===interfaces/* DrapeSourceType */.Om.RasterImage))):this._hasDrapedFeatureSource=this._hasDrapedRasterSource=!1}get _needsColorWithoutRasterImage(){return this._hasDrapedRasterSource&&this._hasDrapedFeatureSource&&this._hasTargetWithoutRasterImage}ensureOverlays(e,r,t=this._bindParameters.overlayStretch){null==this._overlays&&(this._renderTargets=new OverlayRenderTargets_i(this._stage.renderer.fboCache),this._overlays=[new Overlay_n,new Overlay_n]),this.ensureDrapeTargets(e),this.ensureDrapeSources(r),this._bindParameters.overlayStretch=t}disposeOverlays(){this._overlays=null,this._renderTargets=(0,maybe/* disposeMaybe */.WD)(this._renderTargets),this.events.emit("textures-disposed")}getTexture(e){return e===OverlayContent_o.ColorNoRasterImage&&!this._needsColorWithoutRasterImage&&this._hasDrapedFeatureSource?this._renderTargets?.getTexture(OverlayContent_o.Color):this._renderTargets?.getTexture(e)}get running(){return this.updating}runTask(e){this._processDrapeSources(e,(()=>!0))}_processDrapeSources(e,r){let s=!1;for(const[t,i]of this._renderers){if(e.done)break;(t.destroyed||r(t))&&(i.commitChanges()&&(s=!0,e.madeProgress()))}this._sortedDrapeSourceRenderersDirty&&(this._sortedDrapeSourceRenderersDirty=!1,s=!0,this._updateSortedDrapeSourceRenderers(),e.madeProgress()),this.compact(e),s&&(null!=this._overlays&&0===this._renderers.size&&this.disposeOverlays(),this.notifyChange("updating"),this.notifyChange("isEmpty"),this.events.emit("content-changed"),this.hasHighlights=(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>e.hasHighlights)),this.notifyChange("rendersOccludedDraped"))}compact(e){let r=!1;for(const t of this._renderers.values()){if(e.done)break;r=t.compact(e)||r}return r&&this.notifyChange("updating"),r}hasHighlight(e){return (0,MapUtils/* someMap */.Bs)(this._renderers,(r=>r.hasHighlight(e)))}processSyncDrapeSources(){this._processDrapeSources(Scheduler/* noBudget */.Bb,(e=>e.updatePolicy===UpdatePolicy/* UpdatePolicy */.q.SYNC))}get isEmpty(){return!debugFlags/* debugFlags */.b.OVERLAY_DRAW_DEBUG_TEXTURE&&!(0,MapUtils/* someMap */.Bs)(this._renderers,(e=>!e.isEmpty))}get hasWater(){const e=(0,MapUtils/* someMap */.Bs)(this._renderers,(({hasWater:e})=>e));return e!==this._hasWater&&(this._hasWater=e,this.events.emit("has-water")),this._hasWater}get rendersOccludedDraped(){const e=this._renderContext.renderOccludedMask;this._renderContext.renderOccludedMask=se,++this._techniques.precompiling;const r=this._sortedRenderers.some((({renderer:e})=>e.precompile(this._renderContext)));return--this._techniques.precompiling,this._renderContext.renderOccludedMask=e,r}renders(e){if(debugFlags/* debugFlags */.b.OVERLAY_DRAW_DEBUG_TEXTURE&&e!==OverlayContent_o.Occluded&&e!==OverlayContent_o.Highlight)return!0;if(!this._overlays)return!1;const r=this._overlays[terrain_interfaces/* OverlayIndex */.vr.INNER];for(const i of this._overlays)i.setupGeometryViews(this.longitudeCyclical);if(!r.hasSomeSizedView())return!1;const t=this._renderContext.output;this._renderContext.output=this._renderTargets?.targets.find((r=>r.content===e))?.output??ShaderOutput/* ShaderOutput */.V.Color,++this._techniques.precompiling;const s=this._sortedRenderers.some((({renderer:e})=>e.precompile(this._renderContext)));return--this._techniques.precompiling,this._renderContext.output=t,s}get mode(){return this.isEmpty?h.Disabled:this.hasWater&&this.renders(OverlayContent_o.WaterNormal)?h.EnabledWithWater:this._renderTargets?.getTexture(OverlayContent_o.Color)?h.Enabled:h.Disabled}updateAnimation(e){let r=!1;return this._renderers.forEach((t=>r=t.updateAnimation(e)||r)),r&&this.parent.requestRender(basicInterfaces/* RenderRequestType */.C7.BACKGROUND),r}updateDrapeSourceOrder(){this._sortedDrapeSourceRenderersDirty=!0}precompileShaders(e){if(!this._overlays||!this._renderTargets)return;const r=this._bindParameters;r.alignPixelEnabled=e.alignPixelEnabled,++this._techniques.precompiling;for(const t of this._renderTargets.targets){if(t.content===OverlayContent_o.ColorNoRasterImage&&!this._needsColorWithoutRasterImage)continue;const e=t.output;this._renderContext.output=e,r.slot=e===ShaderOutput/* ShaderOutput */.V.Normal?RenderSlot/* RenderSlot */.N.DRAPED_WATER:RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e===ShaderOutput/* ShaderOutput */.V.Highlight&&(r.highlightMixTexture=r.highlights.length>1?this._rctx.emptyTexture:null),t.content===OverlayContent_o.Occluded&&(this._renderContext.renderOccludedMask=se),this._sortedRenderers.forAll((({drapeSource:e,renderer:r})=>{t.content===OverlayContent_o.ColorNoRasterImage&&e.drapeSourceType===interfaces/* DrapeSourceType */.Om.RasterImage||r.precompile(this._renderContext)})),this._renderContext.renderOccludedMask=RenderContext_n,r.highlightMixTexture=null}--this._techniques.precompiling}drawOverlays(e){if(this._overlays&&this._renderTargets){for(const e of this._overlays)e.setupGeometryViews(this.longitudeCyclical);this._bindParameters.alignPixelEnabled=e.alignPixelEnabled;for(const e of this._renderTargets.targets){if(e.content===OverlayContent_o.ColorNoRasterImage&&!this._needsColorWithoutRasterImage)continue;const r=this._drawTarget(terrain_interfaces/* OverlayIndex */.vr.INNER,e),t=this._drawTarget(terrain_interfaces/* OverlayIndex */.vr.OUTER,e);(r||t)&&e.fbo.generateMipMap()}}}_drawTarget(e,r){const t=this._overlays[e],s=t.canvasGeometries;if(0===s.numViews)return!1;const i=this._view.state.contentPixelRatio;this._screenToWorldRatio=i*t.mapUnitsPerPixel/this._bindParameters.overlayStretch;const{output:n}=r;if(this.isEmpty||n===ShaderOutput/* ShaderOutput */.V.Normal&&!this.hasWater||!t.hasSomeSizedView())return!1;const{_rctx:o,_camera:a,_renderContext:h,_bindParameters:l}=this;if(a.pixelRatio=t.pixelRatio*i,h.output=n,l.screenToWorldRatio=this._screenToWorldRatio,l.screenToPCSRatio=this._screenToWorldRatio*this.parent.worldToPCSRatio,l.slot=n===ShaderOutput/* ShaderOutput */.V.Normal?RenderSlot/* RenderSlot */.N.DRAPED_WATER:RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,r.content===OverlayContent_o.Occluded&&(h.renderOccludedMask=se),!this.renders(r.content))return h.renderOccludedMask=RenderContext_n,!1;const{resolution:d}=t,c=e===terrain_interfaces/* OverlayIndex */.vr.INNER,u=c?0:d;if(o.setViewport(u,0,d,d),this._bindTargetFBO(r),c)if(r.output!==ShaderOutput/* ShaderOutput */.V.Highlight)o.setClearColor(0,0,0,0),o.clear(enums/* FramebufferBit */.NV.COLOR);else{const{gl:e}=o;e.clearBufferuiv(e.COLOR,0,[0,0,0,0])}if(debugFlags/* debugFlags */.b.OVERLAY_DRAW_DEBUG_TEXTURE&&r.content!==OverlayContent_o.Occluded&&r.content!==OverlayContent_o.Highlight){this._techniques.precompile(TextureTechnique_t,ie);const r=this._techniques.get(TextureTechnique_t,ie);for(let i=0;i<s.numViews;i++)this._setViewParameters(s.extents[i],t),this._ensureDebugPatternResources(t.resolution,re[e]),o.bindTechnique(r,l,this._passParameters),o.screen.draw()}if(r.output===ShaderOutput/* ShaderOutput */.V.Highlight){const{fboCache:t}=this._stage.renderer,s=this._resolution;this._bindTargetFBO(r),Highlight_M(o,t,{width:s,height:s},l,(()=>this._renderAllGeometry(e,r)),u)}else this._renderAllGeometry(e,r);return o.bindFramebuffer(null),h.renderOccludedMask=RenderContext_n,!0}_renderAllGeometry(e,r){const t=this._overlays[e],s=t.canvasGeometries;this._sortedRenderers.forAll((({drapeSource:i,renderer:n})=>{if(r.content===OverlayContent_o.ColorNoRasterImage&&i.drapeSourceType===interfaces/* DrapeSourceType */.Om.RasterImage)return;const{fullOpacity:o}=i,a=null!=o&&o<1&&r.output===ShaderOutput/* ShaderOutput */.V.Color&&this._bindTemporaryFBO();for(let e=0;e<s.numViews;e++)this._setViewParameters(s.extents[e],t),n.render(this._renderContext);if(a){this._bindTargetFBO(r),this._overlayParameters.texture=a.getTexture(),this._overlayParameters.opacity=o,this._overlayParameters.overlayIndex=e;const t=this._techniques.get(OverlayCompositingTechnique_s);this._rctx.bindTechnique(t,this._bindParameters,this._overlayParameters),this._rctx.screen.draw(),a.release()}}))}_bindTargetFBO(e){const r=this._resolution,t=2*r;e.fbo.bind(this._rctx,t,r)}_bindTemporaryFBO(){const e=this._resolution,r=2*e,t=this._stage.renderer.fboCache,s=t.acquire(r,e,"overlay tmp");return t.rctx.bindFramebuffer(s.fbo),t.rctx.clear(enums/* FramebufferBit */.NV.COLOR),s}get _resolution(){return this._overlays?.[terrain_interfaces/* OverlayIndex */.vr.INNER].resolution??0}notifyContentChanged(){this.events.emit("content-changed")}intersect(e,r,t,s){this._sortedDrapeSourceRenderersDirty&&this._updateSortedDrapeSourceRenderers();let i=0;for(const{renderer:n}of this._sortedRenderers)i=n.intersect?.(e,r,t,s,i)??i}_updateSortedDrapeSourceRenderers(){if(this._sortedRenderers.clear(),0===this._renderers.size)return;const e=this._view.map.allLayers,r=e.length;this._renderers.forEach(((t,s)=>{const i=e.indexOf(s.layer),n=i>=0,o=s.renderGroup??(n?interfaces/* DrapedRenderGroup */.O7.MapLayer:interfaces/* DrapedRenderGroup */.O7.ViewLayer),a=s.drapeSourcePriorityOffset??0,h=r*o+(n?i:0)+a;this._sortedRenderers.push(new ee(s,t,h))})),this._sortedRenderers.sort(((e,r)=>e.index-r.index))}_setViewParameters(e,r){const t=this._camera;t.viewport=[0,0,r.resolution,r.resolution],(0,mat4/* ortho */.v3)(t.projectionMatrix,0,e[2]-e[0],0,e[3]-e[1],t.near,t.far),(0,mat4/* fromTranslation */.kN)(t.viewMatrix,[-e[0],-e[1],0])}_ensureDebugPatternResources(e,r){if((0,vec32.i)(this._passParameters.color,r[0],r[1],r[2]),this._passParameters.texture)return;const t=new Uint8Array(e*e*4);let s=0;for(let n=0;n<e;n++)for(let r=0;r<e;r++){const i=Math.floor(r/10),o=Math.floor(n/10);i<2||o<2||10*i>e-20||10*o>e-20?(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=255):(t[s++]=255,t[s++]=255,t[s++]=255,t[s++]=1&i&&1&o?1&r^1&n?0:255:1&i^1&o?0:128)}const i=new TextureDescriptor/* TextureDescriptor */.R(e);i.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,this._passParameters.texture=new Texture/* Texture */.g(this._rctx,i,t)}get test(){}};(0,tslib_es6._)([(0,property/* property */.MZ)()],OverlayRenderer_$.prototype,"hasHighlights",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],OverlayRenderer_$.prototype,"_sortedDrapeSourceRenderersDirty",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],OverlayRenderer_$.prototype,"parent",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],OverlayRenderer_$.prototype,"_techniques",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,readOnly:!0})],OverlayRenderer_$.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],OverlayRenderer_$.prototype,"isEmpty",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],OverlayRenderer_$.prototype,"rendersOccludedDraped",null),OverlayRenderer_$=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.terrain.OverlayRenderer")],OverlayRenderer_$);class ee{constructor(e,r,t){this.drapeSource=e,this.renderer=r,this.index=t}}const re=[[1,.5,.5],[.5,.5,1]],te=-2,se=Material/* RenderOccludedFlag */.m$.OccludeAndTransparent,ie=new TextureTechniqueConfiguration_r;ie.hasAlpha=!0;


/***/ }),

/***/ 36572:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   vr: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony exports PatchType, TextureUpdate */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var E,A,O;!function(E){E[E.INNER=0]="INNER",E[E.OUTER=1]="OUTER"}(E||(E={})),function(E){E[E.REGULAR=0]="REGULAR",E[E.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",E[E.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",E[E.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(A||(A={})),function(E){E[E.FADING=0]="FADING",E[E.IMMEDIATE=1]="IMMEDIATE",E[E.UNFADED=2]="UNFADED"}(O||(O={}));


/***/ }),

/***/ 79320:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NV: () => (/* binding */ o),
/* harmony export */   zd: () => (/* binding */ _)
/* harmony export */ });
/* unused harmony exports ColorFormats, DepthTextureFormats, format2String, isDepthFormat */
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(45758);
/* harmony import */ var _webgl_textureUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(64434);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var o,_;!function(R){R[R.R8UNORM=0]="R8UNORM",R[R.R8UINT=1]="R8UINT",R[R.RG8UNORM=2]="RG8UNORM",R[R.RG8UINT=3]="RG8UINT",R[R.RGBA4UNORM=4]="RGBA4UNORM",R[R.RGBA8UNORM=5]="RGBA8UNORM",R[R.RGBA8UNORM_MIPMAP=6]="RGBA8UNORM_MIPMAP",R[R.R16FLOAT=7]="R16FLOAT",R[R.RGBA16FLOAT=8]="RGBA16FLOAT",R[R.R32FLOAT=9]="R32FLOAT",R[R.COUNT=10]="COUNT"}(o||(o={})),function(R){R[R.DEPTH16=10]="DEPTH16",R[R.DEPTH24_STENCIL8=11]="DEPTH24_STENCIL8"}(_||(_={}));const a={[o.R8UNORM]:"R8",[o.R8UINT]:"R8UI",[o.R16FLOAT]:"R16F",[o.R32FLOAT]:"R32F",[o.RG8UNORM]:"RG8",[o.RG8UINT]:"RG8UI",[o.RGBA8UNORM]:"RGBA8",[o.RGBA4UNORM]:"RGBA4",[o.RGBA8UNORM_MIPMAP]:"RGBA8_MM",[o.RGBA16FLOAT]:"RGBA16F",[_.DEPTH16]:"D16",[_.DEPTH24_STENCIL8]:"D24S8"};function G(R){return R>=o.COUNT}const r=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;r.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RED,r.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.R8,r.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const F=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;F.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RED_INTEGER,F.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.R8UI,F.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,F.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.NEAREST;const U=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;U.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RG,U.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.RG8,U.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const P=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;P.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RG_INTEGER,P.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.RG8UI,P.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,P.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.NEAREST;const D=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;D.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.RGBA4,D.dataType=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4,D.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const I=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;I.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const L=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;L.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,L.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.LINEAR_MIPMAP_LINEAR,L.hasMipmap=!0,L.maxAnisotropy=8;const p=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;p.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RED,p.dataType=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.HALF_FLOAT,p.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.R16F,p.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.NEAREST;const i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;i.dataType=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.HALF_FLOAT,i.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.RGBA16F,i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE;const m=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;m.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RED,m.dataType=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.FLOAT,m.internalFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedPixelFormat */ .H0.R32F,m.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.NEAREST;const l={[o.R8UNORM]:r,[o.R8UINT]:F,[o.RG8UNORM]:U,[o.RG8UINT]:P,[o.RGBA4UNORM]:D,[o.RGBA8UNORM]:I,[o.RGBA8UNORM_MIPMAP]:L,[o.R16FLOAT]:p,[o.RGBA16FLOAT]:i,[o.R32FLOAT]:m,[o.COUNT]:null},s={[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT16]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_SHORT,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT24]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_INT,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT32F]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.FLOAT,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthStencilFormat */ .iE.DEPTH24_STENCIL8]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_INT_24_8,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthStencilFormat */ .iE.DEPTH32F_STENCIL8]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.FLOAT_32_UNSIGNED_INT_24_8_REV},C={[_.DEPTH24_STENCIL8]:w(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthStencilFormat */ .iE.DEPTH24_STENCIL8),[_.DEPTH16]:w(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT16)};function w(R){const T=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureDescriptor */ .R;return T.pixelFormat=(0,_webgl_textureUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isSizedDepthFormat */ .CR)(R)?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .UnsizedDepthFormat */ .j7.DEPTH_STENCIL,T.dataType=s[R],T.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.NEAREST,T.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,T.internalFormat=R,T.hasMipmap=!1,T.isImmutable=!0,T}


/***/ }),

/***/ 40641:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i$: () => (/* binding */ n),
/* harmony export */   oD: () => (/* binding */ d),
/* harmony export */   xJ: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export addLinearDepth */
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _attributes_VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(16989);
/* harmony import */ var _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74767);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(e){e.varyings.add("linearDepth","float",{invariant:!0})}function t(e){e.vertex.uniforms.add(new _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2BindUniform */ .E("nearFar",(e=>e.camera.nearFar)))}function n(e){e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}function d(r,d){const{vertex:s}=r;switch(d.output){case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Color:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ColorEmission:if(d.receiveShadows)return i(r),void s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);break;case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Shadow:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ShadowExcludeHighlight:case _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ViewshedShadow:return r.include(_attributes_VertexPosition_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexPosition */ .em,d),i(r),t(r),n(r),void s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`)}s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void forwardLinearDepth() {}`)}


/***/ }),

/***/ 82007:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Q: () => (/* binding */ s)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BindType.js
var BindType = __webpack_require__(11809);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Uniform.js
var Uniform = __webpack_require__(99120);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2PassUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends Uniform/* Uniform */.n{constructor(s,e){super(s,"ivec2",BindType/* BindType */.c.Pass,((r,o,i)=>r.setUniform2iv(s,e(o,i))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js
var IntegerPassUniform = __webpack_require__(3445);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DUintPassUniform.js
var Texture2DUintPassUniform = __webpack_require__(7568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HighlightDownsample.glsl.js
var HighlightDownsample_glsl = __webpack_require__(61068);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/HighlightCellGridScreenSpacePass.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(l){const{vertex:s}=l;s.uniforms.add(new Texture2DUintPassUniform/* Texture2DUintPassUniform */.R("coverageTexture",(e=>e.coverageTexture)),new e("highlightRenderCellCount",(l=>(0,vec2/* set */.hZ)(r,l.horizontalCellCount,l.verticalCellCount))),new e("highlightTextureResolution",(({highlightTexture:l})=>(0,vec2/* set */.hZ)(r,l.descriptor.width,l.descriptor.height))),new IntegerPassUniform/* IntegerPassUniform */.c("highlightLevel",(e=>e.highlightLevel))).constants.add("cellSize","int",HighlightDownsample_glsl.g),l.varyings.add("sUV","vec2"),l.varyings.add("vOutlinePossible","float"),s.code.add((0,glsl/* glsl */.H)`const ivec2 cellVertices[4] = ivec2[4](ivec2(0,0), ivec2(1,0), ivec2(0,1), ivec2(1,1));`),s.main.add((0,glsl/* glsl */.H)`int cellIndex = gl_InstanceID;
int cellX = cellIndex % highlightRenderCellCount[0];
int cellY = (cellIndex - cellX) / highlightRenderCellCount[0];
ivec2 cellPos = ivec2(cellX, cellY);
uvec2 covTexel = texelFetch(coverageTexture, cellPos, 0).rg;
int channelIndex = (highlightLevel >> 2) & 3;
uint channelValue = covTexel[channelIndex];
int highlightIndex = (highlightLevel & 3) << 1;
bool covered = ((channelValue >> highlightIndex) & 1u) == 1u;
if (!covered) {
gl_Position = vec4(0.0);
return;
}
vOutlinePossible = (((channelValue >> highlightIndex) & 2u) == 2u) ? 1.0 : 0.0;
ivec2 iPosInCell = cellVertices[gl_VertexID];
vec2 sPos = vec2(cellPos * cellSize + iPosInCell * (cellSize));
vec2 vPos = sPos / vec2(highlightTextureResolution);
sUV = vPos;
gl_Position = vec4(2.0 * vPos - vec2(1.0), 0.0, 1.0);`)}const r=(0,vec2f64/* create */.vt)();


/***/ }),

/***/ 46653:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function l(l){const{fragment:t}=l;t.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`uint readChannelBits(uint channel, int highlightLevel) {
int llc = (highlightLevel & 3) << 1;
return (channel >> llc) & 3u;
}
uint readChannel(uvec2 texel, int highlightLevel) {
int lic = (highlightLevel >> 2) & 1;
return texel[lic];
}
uint readLevelBits(uvec2 texel, int highlightLevel) {
return readChannelBits(readChannel(texel, highlightLevel), highlightLevel);
}`)}


/***/ }),

/***/ 68981:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ p)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js
var ReadDepth_glsl = __webpack_require__(65743);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/BlendColorsPremultiplied.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){e.code.add("\n  vec4 blendColorsPremultiplied(vec4 source, vec4 dest) {\n    float oneMinusSourceAlpha = 1.0 - source.a;\n    return source + dest * oneMinusSourceAlpha;\n  }\n  ")}function n(e,n){return e[0]=n[0]*n[3],e[1]=n[1]*n[3],e[2]=n[2]*n[3],e[3]=n[3],e}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js
var CameraSpace_glsl = __webpack_require__(1062);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js
var Float3PassUniform = __webpack_require__(60840);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js
var Texture2DBindUniform = __webpack_require__(96390);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(p,d){const s=p.fragment;s.include(ReadDepth_glsl/* ReadDepth */.E),p.include(CameraSpace_glsl/* CameraSpace */.Ir),s.include(e),s.uniforms.add(new FloatPassUniform/* FloatPassUniform */.m("globalAlpha",(o=>o.globalAlpha)),new Float3PassUniform/* Float3PassUniform */.t("glowColor",(o=>o.glowColor)),new FloatPassUniform/* FloatPassUniform */.m("glowWidth",((o,e)=>o.glowWidth*e.camera.pixelRatio)),new FloatPassUniform/* FloatPassUniform */.m("glowFalloff",(o=>o.glowFalloff)),new Float3PassUniform/* Float3PassUniform */.t("innerColor",(o=>o.innerColor)),new FloatPassUniform/* FloatPassUniform */.m("innerWidth",((o,e)=>o.innerWidth*e.camera.pixelRatio)),new Texture2DBindUniform/* Texture2DBindUniform */.x("depthMap",(o=>o.depth?.attachment)),new Texture2DPassUniform/* Texture2DPassUniform */.N("normalMap",(o=>o.normals))),s.code.add((0,glsl/* glsl */.H)`vec4 premultipliedColor(vec3 rgb, float alpha) {
return vec4(rgb * alpha, alpha);
}`),s.code.add((0,glsl/* glsl */.H)`vec4 laserlineProfile(float dist) {
if (dist > glowWidth) {
return vec4(0.0);
}
float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);
return blendColorsPremultiplied(
premultipliedColor(innerColor, innerAlpha),
premultipliedColor(glowColor, glowAlpha)
);
}`),s.code.add((0,glsl/* glsl */.H)`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float angleCutoffAdjust, out float depthDiscontinuityAlpha) {
float depth = depthFromTexture(depthMap, uv);
if (depth == 1.0) {
return false;
}
float linearDepth = linearizeDepth(depth);
pos = reconstructPosition(gl_FragCoord.xy, linearDepth);
float minStep = 6e-8;
float depthStep = clamp(depth + minStep, 0.0, 1.0);
float linearDepthStep = linearizeDepth(depthStep);
float depthError = abs(linearDepthStep - linearDepth);
vec3 normalReconstructed = normalize(cross(dFdx(pos), dFdy(pos)));
vec3 normalFromTexture = normalize(texture(normalMap, uv).xyz * 2.0 - 1.0);
float blendFactor = smoothstep(0.15, 0.2, depthError);
normal = normalize(mix(normalReconstructed, normalFromTexture, blendFactor));
angleCutoffAdjust = mix(0.0, 0.004, blendFactor);
float ddepth = fwidth(linearDepth);
depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / linearDepth);
return true;
}`),d.contrastControlEnabled?s.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("frameColor",((o,e)=>o.colors)),new FloatPassUniform/* FloatPassUniform */.m("globalAlphaContrastBoost",(o=>o.globalAlphaContrastBoost))).code.add((0,glsl/* glsl */.H)`float rgbToLuminance(vec3 color) {
return dot(vec3(0.2126, 0.7152, 0.0722), color);
}
vec4 laserlineOutput(vec4 color) {
float backgroundLuminance = rgbToLuminance(texture(frameColor, uv).rgb);
float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);
return color * alpha;
}`):s.code.add((0,glsl/* glsl */.H)`vec4 laserlineOutput(vec4 color) {
return color * globalAlpha;
}`)}


/***/ }),

/***/ 80010:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17983);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,c){if(!c.screenSizeEnabled)return;const t=n.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addCameraPosition */ .yu)(t,c),t.uniforms.add(new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .FloatBindUniform */ .U("perScreenPixelRatio",(e=>e.camera.perScreenPixelRatio)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("screenSizeScale",(e=>e.screenSizeScale))).code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float computeRenderPixelSizeAt( vec3 pWorld ){
vec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);
float viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));
return viewDirectionDistance * perScreenPixelRatio;
}
vec3 screenSizeScaling(vec3 position, vec3 anchor){
return position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;
}`)}


/***/ }),

/***/ 16961:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,o=!0){e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION,"vec2"),o&&e.varyings.add("uv","vec2"),e.vertex.main.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`
      gl_Position = vec4(position, 0.0, 1.0);
      ${o?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`uv = position * 0.5 + vec2(0.5);`:""}
  `)}


/***/ }),

/***/ 1110:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HQ: () => (/* binding */ p),
/* harmony export */   rA: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony exports SlicePass, SlicePlaneParameters */
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58359);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72196);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_7__/* .NoParameters */ .Y{constructor(e){super(),this.slicePlaneLocalOrigin=e}}function P(e,s){B(e,s,new t("slicePlaneOrigin",((e,i)=>g(s,e,i))),new t("slicePlaneBasis1",((e,i)=>y(s,e,i,i.slicePlane?.basis1))),new t("slicePlaneBasis2",((e,i)=>y(s,e,i,i.slicePlane?.basis2))))}function p(e,s){B(e,s,new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneOrigin",((e,i)=>g(s,e,i))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis1",((e,i)=>y(s,e,i,i.slicePlane?.basis1))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis2",((e,i)=>y(s,e,i,i.slicePlane?.basis2))))}function m(e,s){v(e,s,new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneOrigin",((e,i)=>g(s,e,i))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis1",((e,i)=>y(s,e,i,i.slicePlane?.basis1))),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("slicePlaneBasis2",((e,i)=>y(s,e,i,i.slicePlane?.basis2))))}const b=(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
bool rejectBySlice(vec3 pos) {
return sliceByPlane(pos);
}`;function v(e,s,...i){s.hasSlicePlane?(e.uniforms.add(...i),e.code.add(b)):e.code.add("bool rejectBySlice(vec3 pos) { return false; }")}function B(e,s,...i){v(e,s,...i),s.hasSlicePlane?e.code.add("\n    void discardBySlice(vec3 pos) {\n      if (sliceByPlane(pos)) {\n        discard;\n      }\n    }\n\n    vec4 applySliceOutline(vec4 color, vec3 pos) {\n      SliceFactors factors = calculateSliceFactors(pos);\n\n      factors.front /= 2.0 * fwidth(factors.front);\n      factors.side0 /= 2.0 * fwidth(factors.side0);\n      factors.side1 /= 2.0 * fwidth(factors.side1);\n      factors.side2 /= 2.0 * fwidth(factors.side2);\n      factors.side3 /= 2.0 * fwidth(factors.side3);\n\n      // return after calling fwidth, to avoid aliasing caused by discontinuities in the input to fwidth\n      if (sliceByFactors(factors)) {\n        return color;\n      }\n\n      float outlineFactor = (1.0 - step(0.5, factors.front))\n        * (1.0 - step(0.5, factors.side0))\n        * (1.0 - step(0.5, factors.side1))\n        * (1.0 - step(0.5, factors.side2))\n        * (1.0 - step(0.5, factors.side3));\n\n      return mix(color, vec4(vec3(0.0), color.a), outlineFactor * 0.3);\n    }\n\n    vec4 applySlice(vec4 color, vec3 pos) {\n      return sliceEnabled() ? applySliceOutline(color, pos) : color;\n    }\n  "):e.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`void discardBySlice(vec3 pos) { }
vec4 applySlice(vec4 color, vec3 pos) { return color; }`)}function w(e,s,i){return e.instancedDoublePrecision?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(F,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]):s.slicePlaneLocalOrigin}function S(e,s){return null!=e?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.d)(x,s.origin,e):s.origin}function h(s,i,a){return s.hasSliceTranslatedView?null!=i?(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .translate */ .Tl)(O,a.camera.viewMatrix,i):a.camera.viewMatrix:null}function g(e,s,i){if(null==i.slicePlane)return _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .ZEROS */ .uY;const l=w(e,s,i),c=S(l,i.slicePlane),o=h(e,l,i);return null!=o?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.t)(x,c,o):c}function y(e,s,c,o){if(null==o||null==c.slicePlane)return _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .ZEROS */ .uY;const r=w(e,s,c),t=S(r,c.slicePlane),f=h(e,r,c);return null!=f?((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(j,o,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.t)(x,t,f),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.t)(j,j,f),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.d)(j,j,x)):o}const F=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),x=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),j=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),O=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();


/***/ }),

/***/ 66012:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40641);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(o){(0,_ForwardLinearDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addCalculateLinearDepth */ .i$)(o),o.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = calculateLinearDepth(nearFar,eye.z);
return proj * eye;
}`),o.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}


/***/ }),

/***/ 94372:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(77941);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderTechniqueConfiguration */ .K{constructor(){super(...arguments),this.instancedDoublePrecision=!1,this.hasModelTransformation=!1}}


/***/ }),

/***/ 33045:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,t){if(t.output!==_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor)return e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardObjectAndLayerIdColor() {}`),void e.fragment.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void outputObjectAndLayerIdColor() {}`);const a=t.objectAndLayerIdColorInstanced;e.varyings.add("objectAndLayerIdColorVarying","vec4"),e.attributes.add(a?_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.INSTANCEOBJECTANDLAYERIDCOLOR:_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.OLIDCOLOR,"vec4"),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`
    void forwardObjectAndLayerIdColor() {
      objectAndLayerIdColorVarying = ${a?"instanceObjectAndLayerIdColor":"objectAndLayerIdColor"} * 0.003921568627451;
    }`),e.fragment.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void outputObjectAndLayerIdColor() {
fragColor = objectAndLayerIdColorVarying;
}`)}


/***/ }),

/***/ 56289:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   s: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34328);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45160);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=8;function c(c,l){const{vertex:s,attributes:n}=c;s.uniforms.add(new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("intrinsicWidth",(i=>i.width))),l.vvSize?(n.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SIZEFEATUREATTRIBUTE,"float"),s.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeMinSize",(i=>i.vvSize.minSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeMaxSize",(i=>i.vvSize.maxSize)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeOffset",(i=>i.vvSize.offset)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeFactor",(i=>i.vvSize.factor)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3PassUniform */ .t("vvSizeFallback",(i=>i.vvSize.fallback))),s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float getSize() {
if (isnan(sizeFeatureAttribute)) {
return vvSizeFallback.x;
}
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(n.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SIZE,"float"),s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float getSize(){
return intrinsicWidth * size;
}`)),l.vvOpacity?(n.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.OPACITYFEATUREATTRIBUTE,"float"),s.constants.add("vvOpacityNumber","int",8),s.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatsPassUniform */ .x("vvOpacityValues",(i=>i.vvOpacity.values),o),new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatsPassUniform */ .x("vvOpacityOpacities",(i=>i.vvOpacity.opacityValues),o),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatPassUniform */ .m("vvOpacityFallback",(i=>i.vvOpacity.fallback))),s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`float interpolateOpacity(float value){
if (isnan(value)) {
return vvOpacityFallback;
}
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 applyOpacity( vec4 color ){
return color;
}`),l.vvColor?(c.include(_shading_VisualVariables_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .VisualVariables */ .A,l),n.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,"float"),s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(n.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLOR,"vec4"),s.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 getColor(){
return applyOpacity(color);
}`))}


/***/ }),

/***/ 26139:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ o),
/* harmony export */   U: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73345);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var o;function d(d,a){switch(a.textureCoordinateType){case o.Default:return d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UV0,"vec2"),d.varyings.add("vuv0","vec2"),void d.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() { vuv0 = uv0; }`);case o.Atlas:return d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UV0,"vec2"),d.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexAttribute */ .r.UVREGION,"vec4"),d.varyings.add("vuv0","vec2"),d.varyings.add("vuvRegion","vec4"),void d.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() {
vuv0 = uv0;
vuvRegion = uvRegion;
}`);default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .neverReached */ .Xb)(a.textureCoordinateType);case o.None:return void d.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`void forwardTextureCoordinates() {}`);case o.COUNT:return}}!function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Atlas=2]="Atlas",e[e.COUNT=3]="COUNT"}(o||(o={}));


/***/ }),

/***/ 39739:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,d){d.hasVertexColors?(e.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.COLOR,"vec4"),e.varyings.add("vColor","vec4"),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardVertexColor() { vColor = color; }`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}


/***/ }),

/***/ 16989:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EM: () => (/* binding */ w),
/* harmony export */   dO: () => (/* binding */ F),
/* harmony export */   em: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(78607);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10470);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8376);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6561);
/* harmony import */ var _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(20778);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function v(r,o){const{attributes:e,vertex:f,varyings:v,fragment:F}=r;f.include(_util_DoublePrecision_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .DoublePrecision */ .u,o),e.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,"vec3"),v.add("vPositionWorldCameraRelative","vec3"),v.add("vPosition_view","vec3",{invariant:!0}),f.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3PassUniform */ .t("transformWorldFromViewTH",(r=>r.transformWorldFromViewTH)),new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3PassUniform */ .t("transformWorldFromViewTL",(r=>r.transformWorldFromViewTL)),new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Matrix3PassUniform */ .k("transformViewFromCameraRelativeRS",(r=>r.transformViewFromCameraRelativeRS)),new _shaderModules_Matrix4PassUniform_js__WEBPACK_IMPORTED_MODULE_9__/* .Matrix4PassUniform */ .X("transformProjFromView",(r=>r.transformProjFromView)),new _shaderModules_Matrix3DrawUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Matrix3DrawUniform */ .h("transformWorldFromModelRS",(r=>r.transformWorldFromModelRS)),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("transformWorldFromModelTH",(r=>r.transformWorldFromModelTH)),new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float3DrawUniform */ .W("transformWorldFromModelTL",(r=>r.transformWorldFromModelTL))),f.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * position;
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`),f.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${o.spherical?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `),F.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float3PassUniform */ .t("transformWorldFromViewTL",(r=>r.transformWorldFromViewTL))),f.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`),F.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)}class F extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_11__/* .NoParameters */ .Y{constructor(){super(...arguments),this.transformWorldFromViewTH=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.transformWorldFromViewTL=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.transformViewFromCameraRelativeRS=(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)(),this.transformProjFromView=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)()}}class w extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_11__/* .NoParameters */ .Y{constructor(){super(...arguments),this.transformWorldFromModelRS=(0,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)(),this.transformWorldFromModelTH=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.transformWorldFromModelTL=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()}}


/***/ }),

/***/ 81783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  r: () => (/* binding */ u)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){e.fragment.code.add((0,glsl/* glsl */.H)`vec4 textureAtlasLookup(sampler2D tex, vec2 textureCoordinates, vec4 atlasRegion) {
vec2 atlasScale = atlasRegion.zw - atlasRegion.xy;
vec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;
float maxdUV = 0.125;
vec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
vec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;
return textureGrad(tex, uvAtlas, dUVdx, dUVdy);
}`)}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(u,l){const{textureCoordinateType:s}=l;if(s===TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.None||s===TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.COUNT)return;u.include(TextureCoordinateAttribute_glsl/* TextureCoordinateAttribute */.U,l);const n=s===TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.Atlas;n&&u.include(e),u.fragment.code.add((0,glsl/* glsl */.H)`
    vec4 textureLookup(sampler2D tex, vec2 uv) {
      return ${n?"textureAtlasLookup(tex, uv, vuvRegion)":"texture(tex, uv)"};
    }
  `)}


/***/ }),

/***/ 54009:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ s),
/* harmony export */   V: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(28152);
/* harmony import */ var _util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6916);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e,r){const c=e.vertex;r.hasVerticalOffset?(f(c),r.hasScreenSizePerspective&&(e.include(_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .ScreenSizePerspective */ .Y6),(0,_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addScreenSizePerspectiveAlignment */ .OH)(c),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .addCameraPosition */ .yu)(e.vertex,r)),c.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
        ${r.spherical?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 worldNormal = normalize(worldPos + localOrigin);`:(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
        ${r.hasScreenSizePerspective?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));
            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`
            float verticalOffsetScreenHeight = verticalOffset.x;`}
        // Screen sized offset in world space, used for example for line callouts
        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
        return worldNormal * worldOffset;
      }

      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
        return worldPos + calculateVerticalOffset(worldPos, localOrigin);
      }
    `)):c.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_5__/* .glsl */ .H)`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const a=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function f(r){r.uniforms.add(new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float4PassUniform */ .E("verticalOffset",((r,l)=>{const{minWorldLength:t,maxWorldLength:o,screenLength:c}=r.verticalOffset,i=Math.tan(.5*l.camera.fovY)/(.5*l.camera.fullViewport[3]),s=l.camera.pixelRatio||1;return (0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_0__.s)(a,c*s,i,t,o)})))}


/***/ }),

/***/ 16917:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _shaderModules_BooleanBindUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10561);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function l(l){l.uniforms.add(new _shaderModules_BooleanBindUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .BooleanBindUniform */ .o("alignPixelEnabled",(e=>e.alignPixelEnabled))),l.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`),l.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
if (!alignPixelEnabled)
return clipCoord;
vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
vec2 pixelSz = vec2(1.0) / widthHeight;
vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
return vec4(result, clipCoord.zw);
}`)}


/***/ }),

/***/ 97085:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ u),
/* harmony export */   R: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(54009);
/* harmony import */ var _util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6916);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45393);
/* harmony import */ var _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(17983);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72196);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const d=.5;function u(u,v){u.include(_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .ScreenSizePerspective */ .Y6),u.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.POSITION,"vec3"),u.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.NORMAL,"vec3"),u.attributes.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexAttribute */ .r.CENTEROFFSETANDDISTANCE,"vec4");const m=u.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addProjViewLocalOrigin */ .NB)(m,v),(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addCameraPosition */ .yu)(m,v),m.uniforms.add(new _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float4BindUniform */ .I("viewport",(e=>e.camera.fullViewport)),new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatPassUniform */ .m("polygonOffset",(e=>e.shaderPolygonOffset)),new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatBindUniform */ .U("cameraGroundRelative",(e=>e.camera.aboveGround?1:-1))),v.hasVerticalOffset&&(0,_attributes_VerticalOffset_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .addVerticalOffset */ .V)(m),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`struct ProjectHUDAux {
vec3 posModel;
vec3 posView;
vec3 vnormal;
float distanceToCamera;
float absCosAngle;
};`),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = ${v.terrainDepthTest?_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H.float(0):(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`sign(pointGroundDistance)`};
      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation: we take the absolute value because the sign that is
      // dropped is instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);
        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `),v.draped&&!v.hasVerticalOffset||(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addViewNormal */ .S7)(m),v.draped||(m.uniforms.add(new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatBindUniform */ .U("perDistancePixelRatio",(e=>Math.tan(e.camera.fovY/2)/(e.camera.fullViewport[2]/2)))),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * ${_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H.float(d)};

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `)),v.screenCenterOffsetUnitsEnabled&&(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .addPixelRatio */ .Nz)(m),v.hasScreenSizePerspective&&(0,_util_ScreenSizePerspective_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addScreenSizePerspectiveAlignment */ .OH)(m),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      vec3 centerOffset = centerOffsetAndDistance.xyz;
      float pointGroundDistance = centerOffsetAndDistance.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${v.draped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(cameraPosition - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${v.hasScreenSizePerspective&&(v.hasVerticalOffset||v.screenCenterOffsetUnitsEnabled)?"vec3 perspectiveFactor = screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":""}

      ${v.hasVerticalOffset?v.hasScreenSizePerspective?"float verticalOffsetScreenHeight = applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight = verticalOffset.x;":""}

      ${v.hasVerticalOffset?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${v.screenCenterOffsetUnitsEnabled?"":(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${v.screenCenterOffsetUnitsEnabled?v.hasScreenSizePerspective?"float centerOffsetY = applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY = centerOffset.y;":""}

      ${v.screenCenterOffsetUnitsEnabled?"posProj.xy += vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `)}


/***/ }),

/***/ 36985:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16917);
/* harmony import */ var _shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23233);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(i,t){const{vertex:s,fragment:p}=i;i.include(_shading_TerrainDepthTest_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .terrainDepthTest */ .Z,t),s.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .AlignPixel */ .K),s.main.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`vec4 posProjCenter;
if (dot(position, position) > 0.0) {
ProjectHUDAux projectAux;
vec4 posProj = projectPositionHUD(projectAux);
posProjCenter = alignToPixelCenter(posProj, viewport.zw);
forwardViewPosDepth(projectAux.posView);
vec3 vpos = projectAux.posModel;
if (rejectBySlice(vpos)) {
posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
}
} else {
posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
}
gl_Position = posProjCenter;
gl_PointSize = 1.0;`),p.main.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .glsl */ .H)`fragColor = vec4(1);
if(discardByTerrainDepth()) {
fragColor.g = 0.5;
}`)}


/***/ }),

/***/ 15354:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ c)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var c;!function(c){c[c.Occluded=0]="Occluded",c[c.NotOccluded=1]="NotOccluded",c[c.Both=2]="Both",c[c.COUNT=3]="COUNT"}(c||(c={}));


/***/ }),

/***/ 3097:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(16917);
/* harmony import */ var _HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15354);
/* harmony import */ var _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(45393);
/* harmony import */ var _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(17983);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96390);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n){n.vertex.uniforms.add(new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatBindUniform */ .U("renderTransparentlyOccludedHUD",(e=>e.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__/* .HUDRenderStyle */ .D.Occluded?1:e.hudRenderStyle===_HUDRenderStyle_js__WEBPACK_IMPORTED_MODULE_1__/* .HUDRenderStyle */ .D.NotOccluded?0:.75)),new _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float4BindUniform */ .I("viewport",(e=>e.camera.fullViewport)),new _shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DBindUniform */ .x("hudVisibilityTexture",(e=>e.hudVisibility?.getTexture()))),n.vertex.include(_AlignPixel_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .AlignPixel */ .K),n.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`bool testHUDVisibility(vec4 posProj) {
vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);
vec4 occlusionPixel = texture(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);
if (renderTransparentlyOccludedHUD > 0.5) {
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * renderTransparentlyOccludedHUD < 1.0;
}
return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
}`)}


/***/ }),

/***/ 15420:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NL: () => (/* binding */ c),
/* harmony export */   ZX: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony export EmissionsParameters */
/* harmony import */ var _ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(81783);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_FloatDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(31824);
/* harmony import */ var _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35449);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(52293);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(79856);
/* harmony import */ var _lib_GLTextureMaterial_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89140);
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(11809);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var f;!function(s){s[s.None=0]="None",s[s.SymbolColor=1]="SymbolColor",s[s.EmissiveColor=2]="EmissiveColor",s[s.Texture=3]="Texture",s[s.COUNT=4]="COUNT"}(f||(f={}));class v extends (/* unused pure expression or super */ null && (u)){}function c(u,v){if(!(0,_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .isColorOrColorEmission */ .RN)(v.output))return;const{emissionSource:c,hasEmissiveTextureTransform:p,bindType:x}=v,C=c===f.Texture;C&&(u.include(_attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexTextureCoordinates */ .r,v),u.fragment.uniforms.add(x===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_10__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture2DPassUniform */ .N("texEmission",(s=>s.textureEmissive)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture2DDrawUniform */ .o("texEmission",(s=>s.textureEmissive))));const g=c===f.EmissiveColor||C;g&&u.fragment.uniforms.add(x===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_10__/* .BindType */ .c.Pass?new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .Float3PassUniform */ .t("emissiveBaseColor",(s=>s.emissiveBaseColor)):new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3DrawUniform */ .W("emissiveBaseColor",(s=>s.emissiveBaseColor)));const h=c!==f.None;h&&u.fragment.uniforms.add(x===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_10__/* .BindType */ .c.Pass?new _shaderModules_FloatPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .FloatPassUniform */ .m("emissiveStrength",(s=>s.emissiveStrength)):new _shaderModules_FloatDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .FloatDrawUniform */ .J("emissiveStrength",(s=>s.emissiveStrength)));const T=c===f.SymbolColor;u.fragment.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`
    vec4 getEmissions(vec3 symbolColor) {
      vec4 emissions = ${g?"vec4(emissiveBaseColor, 1.0)":T?"vec4(symbolColor, 1.0)":"vec4(0.0)"};
      ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__.If)(C,`emissions *= textureLookup(texEmission, ${p?"emissiveUV":"vuv0"});\n         emissions.w = emissions.rgb == vec3(0.0) ? 0.0: emissions.w;`)}
      ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__.If)(h,"emissions.rgb *= emissiveStrength;")}
      return emissions;
    }
  `)}


/***/ }),

/***/ 1361:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Q: () => (/* binding */ o)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/HighlightReadBitmap.glsl.js
var HighlightReadBitmap_glsl = __webpack_require__(46653);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BindType.js
var BindType = __webpack_require__(11809);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Uniform.js
var Uniform = __webpack_require__(99120);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Integer2BindUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Integer2BindUniform_o extends Uniform/* Uniform */.n{constructor(e,o){super(e,"ivec2",BindType/* BindType */.c.Bind,((r,i)=>r.setUniform2iv(e,o(i))))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerBindUniform.js
var IntegerBindUniform = __webpack_require__(65083);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js
var Texture2DBindUniform = __webpack_require__(96390);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DUintBindUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Texture2DUintBindUniform_o extends Uniform/* Uniform */.n{constructor(e,o){super(e,"usampler2D",BindType/* BindType */.c.Bind,((r,s)=>r.bindTexture(e,o(s))))}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(o,u){const{fragment:r}=o,{output:c,draped:n,hasHighlightMixTexture:s}=u;c===ShaderOutput/* ShaderOutput */.V.Highlight?(r.uniforms.add(new IntegerBindUniform/* IntegerBindUniform */.W("highlightLevel",(i=>i.highlightLevel??0)),new Integer2BindUniform_o("highlightMixOrigin",(i=>i.highlightMixOrigin))),o.outputs.add("fragHighlight","uvec2",0),o.include(HighlightReadBitmap_glsl/* HighlightReadBitmap */.y),s?r.uniforms.add(new Texture2DUintBindUniform_o("highlightMixTexture",(i=>i.highlightMixTexture))).code.add((0,glsl/* glsl */.H)`uvec2 getAccumulatedHighlight() {
return texelFetch(highlightMixTexture, ivec2(gl_FragCoord.xy) - highlightMixOrigin, 0).rg;
}
void outputHighlight(bool occluded) {
if (highlightLevel == 0) {
uint bits = occluded ? 3u : 1u;
fragHighlight = uvec2(bits, 0);
} else {
int ll = (highlightLevel & 3) << 1;
int li = (highlightLevel >> 2) & 3;
uint bits;
if (occluded) {
bits = 3u << ll;
} else {
bits = 1u << ll;
}
uvec2 combinedHighlight = getAccumulatedHighlight();
combinedHighlight[li] |= bits;
fragHighlight = combinedHighlight;
}
}`):r.code.add((0,glsl/* glsl */.H)`void outputHighlight(bool occluded) {
uint bits = occluded ? 3u : 1u;
fragHighlight = uvec2(bits, 0);
}`),n?r.code.add((0,glsl/* glsl */.H)`bool isHighlightOccluded() {
return false;
}`):r.uniforms.add(new Texture2DBindUniform/* Texture2DBindUniform */.x("depthTexture",(i=>i.mainDepth))).code.add((0,glsl/* glsl */.H)`bool isHighlightOccluded() {
float sceneDepth = texelFetch(depthTexture, ivec2(gl_FragCoord.xy), 0).x;
return gl_FragCoord.z > sceneDepth + 5e-7;
}`),r.code.add((0,glsl/* glsl */.H)`void calculateOcclusionAndOutputHighlight() {
outputHighlight(isHighlightOccluded());
}`)):r.code.add((0,glsl/* glsl */.H)`void calculateOcclusionAndOutputHighlight() {}`)}


/***/ }),

/***/ 65743:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(74767);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function d(e){e.uniforms.add(new _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float2BindUniform */ .E("zProjectionMap",(e=>a(e.camera)))),e.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float linearizeDepth(float depth) {
float depthNdc = depth * 2.0 - 1.0;
float c1 = zProjectionMap[0];
float c2 = zProjectionMap[1];
return -(c1 / (depthNdc + c2 + 1e-7));
}`),e.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float depthFromTexture(sampler2D depthTexture, vec2 uv) {
ivec2 iuv = ivec2(uv * vec2(textureSize(depthTexture, 0)));
float depth = texelFetch(depthTexture, iuv, 0).r;
return depth;
}`),e.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float linearDepthFromTexture(sampler2D depthTexture, vec2 uv) {
return linearizeDepth(depthFromTexture(depthTexture, uv));
}`)}function a(t){const r=t.projectionMatrix;return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(c,r[14],r[10])}const c=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();


/***/ }),

/***/ 79870:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   v: () => (/* binding */ n),
/* harmony export */   z: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){t.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`float normals2FoamIntensity(vec3 n, float waveStrength){
float normalizationFactor =  max(0.015, waveStrength);
return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);
}`)}function n(t){t.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){
return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;
}`)}


/***/ }),

/***/ 6821:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  q: () => (/* binding */ LineStipple_glsl_f),
  h: () => (/* binding */ S)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js
var RgbaFloatEncoding_glsl = __webpack_require__(70224);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js + 1 modules
var View_glsl = __webpack_require__(63592);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js
var Float4PassUniform = __webpack_require__(1411);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js
var FloatBindUniform = __webpack_require__(17983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js
var FloatPassUniform = __webpack_require__(35449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js
var Texture2DPassUniform = __webpack_require__(79856);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/floatRGBA.js
var floatRGBA = __webpack_require__(51859);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/stippleTextureRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(t,u){return new e((e=>{const{encodedData:u,textureSize:c}=a(e),f=new i;return f.internalFormat=r.RGBA,f.width=c,f.height=1,f.wrapMode=o.REPEAT,new n(t,f,u)}),(t=>`${t.pattern.join(",")}-r${t.pixelRatio}`),u)}function a(e){const r=c(e),o=1/e.pixelRatio,n=f(e),i=s(e),u=(Math.floor(.5*(i-1))+.5)*o,a=[];let l=1;for(const t of r){for(let e=0;e<t;e++){const r=l*(Math.min(e,t-1-e)+.5)*o/u*.5+.5;a.push(r)}l=-l}const p=Math.round(r[0]/2),m=[...a.slice(p),...a.slice(0,p)],d=new Uint8Array(4*n);let x=0;for(const c of m)t(c,d,x),x+=4;return{encodedData:d,textureSize:n}}function c(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(null==t)return 1;const e=c(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function s(t){return c(t).reduce(((t,e)=>Math.max(t,e)))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ensureColor4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ensureColor4_s(t){return null==t?vec4f64/* ZEROS */.uY:4===t.length?t:(0,vec42.s)(ensureColor4_c,t[0],t[1],t[2],1)}const ensureColor4_c=(0,vec4f64/* create */.vt)();

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function LineStipple_glsl_f(n,d){if(!d.stippleEnabled)return void n.fragment.code.add((0,glsl/* glsl */.H)`float getStippleAlpha() { return 1.0; }
void discardByStippleAlpha(float stippleAlpha, float threshold) {}
vec4 blendStipple(vec4 color, float stippleAlpha) { return color; }`);const f=!(d.draped&&d.stipplePreferContinuous),{vertex:g,fragment:h}=n;h.include(RgbaFloatEncoding_glsl/* RgbaFloatEncoding */.W),d.draped||((0,View_glsl/* addCameraPosition */.yu)(g,d),g.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("worldToScreenPerDistanceRatio",(({camera:e})=>1/e.perScreenPixelRatio))).code.add((0,glsl/* glsl */.H)`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`)),n.varyings.add("vStippleDistance","float"),n.varyings.add("vStippleDistanceLimits","vec2"),n.varyings.add("vStipplePatternStretch","float"),g.code.add((0,glsl/* glsl */.H)`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${glsl/* glsl */.H.float(LineStipple_glsl_u)};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `),g.code.add((0,glsl/* glsl */.H)`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),g.code.add((0,glsl/* glsl */.H)`
    if (segmentLengthPseudoScreen >= ${f?"patternLength":"1e4"}) {
  `),(0,View_glsl/* addPixelRatio */.Nz)(g),g.code.add((0,glsl/* glsl */.H)`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`),h.uniforms.add(new Texture2DPassUniform/* Texture2DPassUniform */.N("stipplePatternTexture",(e=>e.stippleTexture)),new FloatPassUniform/* FloatPassUniform */.m("stipplePatternSDFNormalizer",(e=>m(e.stipplePattern))),new FloatPassUniform/* FloatPassUniform */.m("stipplePatternPixelSizeInv",(e=>1/S(e)))),d.stippleOffColorEnabled&&h.uniforms.add(new Float4PassUniform/* Float4PassUniform */.E("stippleOffColor",(e=>ensureColor4_s(e.stippleOffColor)))),h.code.add((0,glsl/* glsl */.H)`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgbaTofloat(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`),h.code.add((0,glsl/* glsl */.H)`
    void discardByStippleAlpha(float stippleAlpha, float threshold) {
     ${(0,glsl.If)(!d.stippleOffColorEnabled,"if (stippleAlpha < threshold) { discard; }")}
    }

    vec4 blendStipple(vec4 color, float stippleAlpha) {
      return ${d.stippleOffColorEnabled?"mix(color, stippleOffColor, stippleAlpha)":"vec4(color.rgb, color.a * stippleAlpha)"};
    }
  `)}function m(e){return e?(Math.floor(.5*(s(e)-1))+.5)/e.pixelRatio:1}function S(e){const t=e.stipplePattern;return t?f(e.stipplePattern)/t.pixelRatio:1}const LineStipple_glsl_u=.4;


/***/ }),

/***/ 696:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gc: () => (/* binding */ t),
/* harmony export */   O4: () => (/* binding */ a),
/* harmony export */   Vt: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _shaderModules_Float3BindUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(81598);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(n){n.uniforms.add(new _shaderModules_Float3BindUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3BindUniform */ .d("mainLightDirection",(i=>i.lighting.mainLight.direction)))}function a(n){n.uniforms.add(new _shaderModules_Float3BindUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3BindUniform */ .d("mainLightIntensity",(i=>i.lighting.mainLight.intensity)))}function o(i){t(i.fragment),a(i.fragment),i.fragment.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`vec3 applyShading(vec3 shadingNormal, float shadow) {
float dotVal = clamp(dot(shadingNormal, mainLightDirection), 0.0, 1.0);
return mainLightIntensity * ((1.0 - shadow) * dotVal);
}`)}


/***/ }),

/***/ 2119:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50980);
/* harmony import */ var _util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63592);
/* harmony import */ var _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17983);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58376);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,i){const d=n.vertex;(0,_util_View_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .addPixelRatio */ .Nz)(d),null==d.uniforms.get("markerScale")&&d.constants.add("markerScale","float",1),d.constants.add("markerSizePerLineWidth","float",_support_engineContent_marker_js__WEBPACK_IMPORTED_MODULE_0__/* .markerSizePerLineWidth */ .PV).code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`),i.space===_shaders_LineMarkerTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .LineMarkerSpace */ .lM.World&&(d.constants.add("maxSegmentLengthFraction","float",.45),d.uniforms.add(new _shaderModules_FloatBindUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .FloatBindUniform */ .U("perRenderPixelRatio",(e=>e.camera.perRenderPixelRatio))),d.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))}


/***/ }),

/***/ 17666:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  c: () => (/* binding */ n),
  f: () => (/* binding */ r)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){t.code.add((0,glsl/* glsl */.H)`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG) {
return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;
}`),t.code.add((0,glsl/* glsl */.H)`float integratedRadiance(float cosTheta2, float roughness) {
return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);
}`),t.code.add((0,glsl/* glsl */.H)`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness) {
float cosTheta2 = 1.0 - RdotNG * RdotNG;
float intRadTheta = integratedRadiance(cosTheta2, roughness);
float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;
float sky = 2.0 - ground;
return (ground * ambientGround + sky * ambientSky) * 0.5;
}`)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js
var PhysicallyBasedRenderingParameters_glsl = __webpack_require__(39486);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js
var PiUtils_glsl = __webpack_require__(88960);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,r){n.include(PiUtils_glsl/* PiUtils */.p),r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Normal&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Schematic&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Simplified&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.TerrainWithWater||(n.code.add((0,glsl/* glsl */.H)`float normalDistribution(float NdotH, float roughness)
{
float a = NdotH * roughness;
float b = roughness / (1.0 - NdotH * NdotH + a * a);
return b * b * INV_PI;
}`),n.code.add((0,glsl/* glsl */.H)`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);
const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);
const vec2 c2 = vec2(-1.04, 1.04);
vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {
vec4 r = roughness * c0 + c1;
float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;
return c2 * a004 + r.zw;
}`)),r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Normal&&r.pbrMode!==PhysicallyBasedRenderingParameters_glsl/* PBRMode */.A9.Schematic||(n.include(t),n.code.add((0,glsl/* glsl */.H)`struct PBRShadingInfo
{
float NdotV;
float LdotH;
float NdotNG;
float RdotNG;
float NdotAmbDir;
float NdotH_Horizon;
vec3 skyRadianceToSurface;
vec3 groundRadianceToSurface;
vec3 skyIrradianceToSurface;
vec3 groundIrradianceToSurface;
float averageAmbientRadiance;
float ssao;
vec3 albedoLinear;
vec3 f0;
vec3 f90;
vec3 diffuseColor;
float metalness;
float roughness;
};`),n.code.add((0,glsl/* glsl */.H)`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {
vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);
vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);
vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;
vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);
vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;
vec3 specularComponent = specularColor * indirectSpecular;
return (diffuseComponent + specularComponent);
}`))}function r(e,o){e.include(PiUtils_glsl/* PiUtils */.p),e.code.add((0,glsl/* glsl */.H)`
  struct PBRShadingWater {
      float NdotL;   // cos angle between normal and light direction
      float NdotV;   // cos angle between normal and view direction
      float NdotH;   // cos angle between normal and half vector
      float VdotH;   // cos angle between view direction and half vector
      float LdotH;   // cos angle between light direction and half vector
      float VdotN;   // cos angle between view direction and normal vector
  };

  float dtrExponent = ${o.useCustomDTRExponentForWater?"2.2":"2.0"};
  `),e.code.add((0,glsl/* glsl */.H)`vec3 fresnelReflection(float angle, vec3 f0, float f90) {
return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);
}`),e.code.add((0,glsl/* glsl */.H)`float normalDistributionWater(float NdotH, float roughness) {
float r2 = roughness * roughness;
float NdotH2 = NdotH * NdotH;
float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;
return r2 / denom;
}`),e.code.add((0,glsl/* glsl */.H)`float geometricOcclusionKelemen(float LoH) {
return 0.25 / (LoH * LoH);
}`),e.code.add((0,glsl/* glsl */.H)`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max) {
vec3  F = fresnelReflection(props.VdotH, F0, F0Max);
float dSun = normalDistributionWater(props.NdotH, roughness);
float V = geometricOcclusionKelemen(props.LdotH);
float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);
float strengthSunHaze  = 1.2;
float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze) * strengthSunHaze;
return ((dSun + dSunHaze) * V) * F;
}`)}


/***/ }),

/***/ 39486:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A9: () => (/* binding */ n),
/* harmony export */   _Z: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony export PBRRenderingParameters */
/* harmony import */ var _attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(81783);
/* harmony import */ var _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13501);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(52293);
/* harmony import */ var _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79856);
/* harmony import */ var _materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12221);
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(11809);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n;!function(e){e[e.Disabled=0]="Disabled",e[e.Normal=1]="Normal",e[e.Schematic=2]="Schematic",e[e.Water=3]="Water",e[e.WaterOnIntegratedMesh=4]="WaterOnIntegratedMesh",e[e.Simplified=5]="Simplified",e[e.TerrainWithWater=6]="TerrainWithWater",e[e.COUNT=7]="COUNT"}(n||(n={}));class d extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_8__/* .NoParameters */ .Y{constructor(e,r){super(),this.textureOcclusion=e,this.textureMetallicRoughness=r,this.mrrFactors=_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .schematicMRRFactors */ .Bt}}function m(c,u){const d=u.pbrMode,m=c.fragment;if(d!==n.Schematic&&d!==n.Disabled&&d!==n.Normal)return void m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyPBRFactors() {}`);if(d===n.Disabled)return void m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);if(d===n.Schematic)return void m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 mrr = vec3(0.0, 0.6, 0.2);
float occlusion = 1.0;
void applyPBRFactors() {}
float getBakedOcclusion() { return 1.0; }`);const{hasMetallicRoughnessTexture:p,hasMetallicRoughnessTextureTransform:h,hasOcclusionTexture:f,hasOcclusionTextureTransform:g,bindType:v}=u;(p||f)&&c.include(_attributes_VertexTextureCoordinates_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexTextureCoordinates */ .r,u),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 mrr;
float occlusion;`),p&&m.uniforms.add(v===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_7__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("texMetallicRoughness",(e=>e.textureMetallicRoughness)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("texMetallicRoughness",(e=>e.textureMetallicRoughness))),f&&m.uniforms.add(v===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_7__/* .BindType */ .c.Pass?new _shaderModules_Texture2DPassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Texture2DPassUniform */ .N("texOcclusion",(e=>e.textureOcclusion)):new _shaderModules_Texture2DDrawUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture2DDrawUniform */ .o("texOcclusion",(e=>e.textureOcclusion))),m.uniforms.add(v===_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_7__/* .BindType */ .c.Pass?new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("mrrFactors",(e=>e.mrrFactors)):new _shaderModules_Float3DrawUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float3DrawUniform */ .W("mrrFactors",(e=>e.mrrFactors))),m.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`
    ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.If)(p,(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`void applyMetallicRoughness(vec2 uv) {
            vec3 metallicRoughness = textureLookup(texMetallicRoughness, uv).rgb;
            mrr[0] *= metallicRoughness.b;
            mrr[1] *= metallicRoughness.g;
          }`)}

    ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.If)(f,"void applyOcclusion(vec2 uv) { occlusion *= textureLookup(texOcclusion, uv).r; }")}

    float getBakedOcclusion() {
      return ${f?"occlusion":"1.0"};
    }

    void applyPBRFactors() {
      mrr = mrrFactors;
      occlusion = 1.0;

      ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.If)(p,`applyMetallicRoughness(${h?"metallicRoughnessUV":"vuv0"});`)}
      ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__.If)(f,`applyOcclusion(${g?"occlusionUV":"vuv0"});`)}
    }
  `)}


/***/ }),

/***/ 88960:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){const a=3.141592653589793,n=.3183098861837907;t.constants.add("PI","float",a),t.constants.add("LIGHT_NORMALIZATION","float",n),t.constants.add("INV_PI","float",n),t.constants.add("HALF_PI","float",1.570796326794897),t.constants.add("TWO_PI","float",6.28318530717958)}


/***/ }),

/***/ 23606:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ e),
/* harmony export */   b: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=3e5,o=5e5;


/***/ }),

/***/ 23233:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _output_ReadDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(65743);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(96390);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(i,{occlusionPass:d,terrainDepthTest:a,cullAboveTerrain:n}){const{vertex:s,fragment:p,varyings:h}=i;if(!a)return s.code.add("void forwardViewPosDepth(vec3 pos) {}"),void p.code.add(`${d?"bool":"void"} discardByTerrainDepth() { ${(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__.If)(d,"return false;")}}`);h.add("viewPosDepth","float",{invariant:!0}),s.code.add("void forwardViewPosDepth(vec3 pos) {\n    viewPosDepth = pos.z;\n  }"),p.include(_output_ReadDepth_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .ReadDepth */ .E),p.uniforms.add(new _shaderModules_Texture2DBindUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Texture2DBindUniform */ .x("terrainDepthTexture",(e=>e.terrainDepth?.attachment))).code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .glsl */ .H)`
    ${d?"bool":"void"} discardByTerrainDepth() {
      float depth = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0).r;
      float linearDepth = linearizeDepth(depth);
      ${d?"return viewPosDepth < linearDepth && depth < 1.0;":`if(viewPosDepth ${n?">":"<="} linearDepth) discard;`}
    }`)}


/***/ }),

/***/ 34328:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1411);
/* harmony import */ var _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(54706);
/* harmony import */ var _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45160);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72196);
/* harmony import */ var _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(6561);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(50645);
/* harmony import */ var _materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(17745);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,s){const{vertex:u,attributes:c}=n;s.hasVvInstancing&&(s.vvSize||s.vvColor)&&c.add(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexAttribute */ .r.INSTANCEFEATUREATTRIBUTE,"vec4"),s.vvSize?(u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeMinSize",(o=>o.vvSize.minSize))),u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeMaxSize",(o=>o.vvSize.maxSize))),u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeOffset",(o=>o.vvSize.offset))),u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeFactor",(o=>o.vvSize.factor))),u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSizeFallback",(o=>o.vvSize.fallback))),u.uniforms.add(new _shaderModules_Matrix3PassUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Matrix3PassUniform */ .k("vvSymbolRotationMatrix",(o=>o.vvSymbolRotationMatrix))),u.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_0__/* .Float3PassUniform */ .t("vvSymbolAnchor",(o=>o.vvSymbolAnchor))),u.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec3 vvScale(vec4 _featureAttribute) {
if (isnan(_featureAttribute.x)) {
return vvSizeFallback;
}
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),u.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 scale = max(vvScale(_featureAttribute), eps);
        return vec4(vvSymbolRotationMatrix * _normal / scale, 1.0);
      }

      ${s.hasVvInstancing?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):u.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),s.vvColor?(u.constants.add("vvColorNumber","int",_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_7__/* .vvColorNumber */ .p),u.uniforms.add(new _shaderModules_FloatsPassUniform_js__WEBPACK_IMPORTED_MODULE_3__/* .FloatsPassUniform */ .x("vvColorValues",(o=>o.vvColor.values),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_7__/* .vvColorNumber */ .p),new _shaderModules_Float4sPassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float4sPassUniform */ .F("vvColorColors",(o=>o.vvColor.colors),_materials_VisualVariablePassParameters_js__WEBPACK_IMPORTED_MODULE_7__/* .vvColorNumber */ .p),new _shaderModules_Float4PassUniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Float4PassUniform */ .E("vvColorFallback",(o=>o.vvColor.fallback))),u.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`
      vec4 interpolateVVColor(float value) {
        if (isnan(value)) {
          return vvColorFallback;
        }

        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${s.hasVvInstancing?(0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }`:"vec4 vvColor() { return vec4(1.0); }"}
    `)):u.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`vec4 vvColor() { return vec4(1.0); }`)}


/***/ }),

/***/ 548:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  E: () => (/* binding */ m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js
var FoamRendering_glsl = __webpack_require__(79870);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/colorUtils.js
var colorUtils = __webpack_require__(31415);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/glsl.js
var glsl = __webpack_require__(72196);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){e.code.add((0,glsl/* glsl */.H)`
    const float GAMMA = ${glsl/* glsl */.H.float(colorUtils/* colorGamma */.Tf)};
    const float INV_GAMMA = ${glsl/* glsl */.H.float(1/colorUtils/* colorGamma */.Tf)};

    vec4 delinearizeGamma(vec4 color) {
      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.a);
    }

    vec3 linearizeGamma(vec3 color) {
      return pow(color, vec3(GAMMA));
    }
  `)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js + 1 modules
var PhysicallyBasedRendering_glsl = __webpack_require__(17666);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceConstants.js
var ScreenSpaceConstants = __webpack_require__(23606);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/ReadDepth.glsl.js
var ReadDepth_glsl = __webpack_require__(65743);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js
var Float2BindUniform = __webpack_require__(74767);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js
var FloatBindUniform = __webpack_require__(17983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js
var Matrix4BindUniform = __webpack_require__(82088);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DBindUniform.js
var Texture2DBindUniform = __webpack_require__(96390);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function d(d,n){if(!n.screenSpaceReflections)return;const c=d.fragment;c.include(ReadDepth_glsl/* ReadDepth */.E),c.uniforms.add(new Float2BindUniform/* Float2BindUniform */.E("nearFar",(e=>e.camera.nearFar)),new Texture2DBindUniform/* Texture2DBindUniform */.x("depthMap",(e=>e.depth?.attachment)),new Matrix4BindUniform/* Matrix4BindUniform */.F("proj",(e=>e.camera.projectionMatrix)),new FloatBindUniform/* FloatBindUniform */.U("invResolutionHeight",(e=>1/e.camera.height)),new Matrix4BindUniform/* Matrix4BindUniform */.F("reprojectionMatrix",(e=>e.ssr.reprojectionMatrix))).code.add((0,glsl/* glsl */.H)`
  vec2 reprojectionCoordinate(vec3 projectionCoordinate)
  {
    vec4 zw = proj * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);
    vec4 reprojectedCoord = reprojectionMatrix * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);
    reprojectedCoord.xy /= reprojectedCoord.w;
    return reprojectedCoord.xy * 0.5 + 0.5;
  }

  const int maxSteps = ${n.highStepCount?"150":"75"};

  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)
  {
    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);
    projectedCoord.xy /= projectedCoord.w;
    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;
    return projectedCoord;
  }

  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)
  {
    vec3 viewPos = startPosition;
    vec3 viewPosEnd = startPosition;

    // Project the start position to the screen
    vec4 projectedCoordStart = applyProjectionMat(proj, viewPos);
    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space
    float k0 = 1.0/ projectedCoordStart.w;

    // advance the position in the direction of the reflection
    viewPos += dir;

    vec4 projectedCoordVanishingPoint = applyProjectionMat(proj, dir);

    // Project the advanced position to the screen
    vec4 projectedCoordEnd = applyProjectionMat(proj, viewPos);
    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space
    float k1 = 1.0/ projectedCoordEnd.w;

    // calculate the reflection direction in the screen space
    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);
    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);

    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);

    float projectedCoordDirLength = length(projectedCoordDir);
    float maxSt = float(maxSteps);

    // normalize the projection direction depending on maximum steps
    // this determines how blocky the reflection looks
    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);

    // Normalize the homogeneous camera space coordinates
    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);
    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);

    // initialize the variables for ray marching
    vec2 P = projectedCoordStart.xy;
    vec3 Q = Q0;
    float k = k0;
    float rayStartZ = -startPosition.z; // estimated ray start depth value
    float rayEndZ = -startPosition.z;   // estimated ray end depth value
    float prevEstimateZ = -startPosition.z;
    float rayDiffZ = 0.0;
    float dDepth;
    float depth;
    float rayDiffZOld = 0.0;

    // early outs
    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)
      return vec3(P, 0.0);
    float dDepthBefore = 0.0;

    for(int i = 0; i < maxSteps-1; i++)
    {
      depth = -linearDepthFromTexture(depthMap, P); // get linear depth from the depth buffer

      // estimate depth of the marching ray
      rayStartZ = prevEstimateZ;
      dDepth = -rayStartZ - depth;
      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));
      rayDiffZ = rayEndZ- rayStartZ;
      prevEstimateZ = rayEndZ;

      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )
      {
        return vec3(P, 0.);
      }

      // If we detect a hit - return the intersection point, two conditions:
      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth
      //  - if difference between dDepth and rayDiffZOld is not too large
      //  - if difference between dDepth and 0.025/abs(k) is not too large
      //  - if the sampled depth is not behind far plane or in front of near plane

      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)
      {
        float weight = dDepth / (dDepth - dDepthBefore);
        vec2 Pf = mix(P - dP, P, 1.0 - weight);
        if (abs(Pf.y - projectedCoordStart.y) > invResolutionHeight) {
          return vec3(Pf, depth);
        }
        else {
          return vec3(P, depth);
        }
      }

      // continue with ray marching
      P = clamp(P + dP, vec2(0.0), vec2(0.999));
      Q.z += dQ.z;
      k += dk;
      rayDiffZOld = rayDiffZ;
      dDepthBefore = dDepth;
    }
    return vec3(P, 0.0);
  }
  `)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Ellipsoid.js
var Ellipsoid = __webpack_require__(99817);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/Clouds.js
var Clouds = __webpack_require__(5842);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/CloudsParameters.js
var CloudsParameters = __webpack_require__(58718);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/environment/weather.js + 5 modules
var weather = __webpack_require__(84323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js
var MainLighting_glsl = __webpack_require__(696);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/LookupCloudsFromTextureArray.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function LookupCloudsFromTextureArray_glsl_e(e){e.fragment.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("cloudAbsorption",(r=>r.clouds.absorption)),new FloatBindUniform/* FloatBindUniform */.U("cloudCoverage",(r=>r.clouds.coverage))).code.add((0,glsl/* glsl */.H)`vec4 lookupCloudsFromTextureArray(sampler2DArray cubeMap, vec3 rayDir) {
int faceIndex;
vec2 uv;
if(rayDir.z <= 0.0) {
float hazeFactor = smoothstep(-0.01, mix(0.0, 0.075, cloudCoverage), abs(dot(rayDir, vec3(0, 0, 1))));
float shading = clamp(1.0 - cloudAbsorption, 0.6, 1.0) * (1.0 - hazeFactor);
float totalTransmittance = hazeFactor;
return vec4(shading, totalTransmittance, shading, totalTransmittance);
}
if (abs(rayDir.x) >= abs(rayDir.y) && abs(rayDir.x) >= abs(rayDir.z)) {
if(rayDir.x > 0.0) {
faceIndex = 0;
uv = rayDir.yz / rayDir.x;
uv = vec2(-uv.x, uv.y);
} else {
faceIndex = 1;
uv = rayDir.yz / rayDir.x;
uv = vec2(-uv.x, -uv.y);
}
} else if (abs(rayDir.y) >= abs(rayDir.x) && abs(rayDir.y) >= abs(rayDir.z)) {
if(rayDir.y > 0.0) {
faceIndex = 2;
uv = rayDir.xz / rayDir.y;
} else {
faceIndex = 3;
uv = rayDir.xz / rayDir.y;
uv = vec2(uv.x, -uv.y);
}
} else {
if(rayDir.y < 0.0) {
faceIndex = 4;
uv = rayDir.xy / rayDir.z;
uv = vec2(uv.x, -uv.y);
} else {
faceIndex = 5;
uv = rayDir.xy / rayDir.z;
uv = vec2(uv.x, -uv.y);
}
}
uv = 0.5 * (uv + 1.0);
if(faceIndex != 5) {
uv.y = uv.y - 0.5;
}
uv.y = uv.y * 2.0;
vec4 s = texture(cubeMap, vec3(uv, float(faceIndex)));
return s;
}`)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanBindUniform.js
var BooleanBindUniform = __webpack_require__(10561);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3BindUniform.js
var Float3BindUniform = __webpack_require__(81598);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BindType.js
var BindType = __webpack_require__(11809);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Uniform.js
var Uniform = __webpack_require__(99120);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DArrayBindUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends Uniform/* Uniform */.n{constructor(e,o){super(e,"sampler2DArray",BindType/* BindType */.c.Bind,((r,s)=>r.bindTexture(e,o(s))))}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/CloudsParallaxShading.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function C(t){const a=t.fragment;a.constants.add("radiusCloudsSquared","float",v).code.add((0,glsl/* glsl */.H)`vec3 intersectWithCloudLayer(vec3 dir, vec3 cameraPosition, vec3 spherePos) {
float B = 2.0 * dot(cameraPosition, dir);
float C = dot(cameraPosition, cameraPosition) - radiusCloudsSquared;
float det = B * B - 4.0 * C;
float pointIntDist = max(0.0, 0.5 *(-B + sqrt(det)));
return (cameraPosition + dir * pointIntDist) - spherePos;
}`),a.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("radiusCurvatureCorrection",(({clouds:o})=>o.parallax.radiusCurvatureCorrection))).code.add((0,glsl/* glsl */.H)`vec3 correctForPlanetCurvature(vec3 dir) {
dir.z = dir.z * (1.0 - radiusCurvatureCorrection) + radiusCurvatureCorrection;
return dir;
}`),a.code.add((0,glsl/* glsl */.H)`vec3 rotateDirectionToAnchorPoint(mat4 rotMat, vec3 inVec) {
return (rotMat * vec4(inVec, 0.0)).xyz;
}`),(0,MainLighting_glsl/* addMainLightDirection */.Gc)(a),(0,MainLighting_glsl/* addMainLightIntensity */.O4)(a);const C=(0,vec3f64/* fromValues */.fA)(.28,.175,.035);a.constants.add("RIM_COLOR","vec3",C);const f=.3,p=140,g=.2,w=10,P=.3;a.code.add((0,glsl/* glsl */.H)`
    vec3 calculateCloudColor(vec3 cameraPosition, vec3 worldSpaceRay, vec4 clouds) {
      float upDotLight = dot(cameraPosition, mainLightDirection);
      float dirDotLight = max(dot(worldSpaceRay, mainLightDirection), 0.0);
      float sunsetTransition = clamp(pow(max(upDotLight, 0.0), ${glsl/* glsl */.H.float(f)}), 0.0, 1.0);

      // Base color of the clouds that depends on lighting of the sun and sky
      vec3 ambientLight = calculateAmbientIrradiance(cameraPosition,  0.0);
      vec3 combinedLight = clamp((mainLightIntensity + ambientLight )/PI, vec3(0.0), vec3(1.0));
      vec3 baseCloudColor = pow(combinedLight * pow(clouds.xyz, vec3(GAMMA)), vec3(INV_GAMMA));

      // Rim light around the edge of the clouds simulating scattering of the direct lun light
      float scatteringMod = max(clouds.a < 0.5 ? clouds.a / 0.5 : - clouds.a / 0.5 + 2.0, 0.0);
      float rimLightIntensity = 0.5 + 0.5 * pow(max(upDotLight, 0.0), 0.35);
      vec3 directSunScattering = RIM_COLOR * rimLightIntensity * (pow(dirDotLight, ${glsl/* glsl */.H.float(p)})) * scatteringMod;

      // Brighten the clouds around the sun at the sunsets
      float additionalLight = ${glsl/* glsl */.H.float(g)} * pow(dirDotLight, ${glsl/* glsl */.H.float(w)}) * (1. - pow(sunsetTransition, ${glsl/* glsl */.H.float(P)})) ;

      return vec3(baseCloudColor * (1.0 + additionalLight) + directSunScattering);
    }
  `),t.include(LookupCloudsFromTextureArray_glsl_e),a.uniforms.add(new BooleanBindUniform/* BooleanBindUniform */.o("readChannelsRG",(o=>o.clouds.readChannels===Clouds/* CloudsTextureChannels */.c.RG)),new o("cubeMap",(o=>o.clouds.data?.cubeMap?.colorTexture))).code.add((0,glsl/* glsl */.H)`vec4 sampleCloud(vec3 rayDir, bool readOtherChannel) {
vec4 s = lookupCloudsFromTextureArray(cubeMap, rayDir);
bool readRG = readChannelsRG ^^ readOtherChannel;
s = readRG ? vec4(vec3(s.r), s.g) : vec4(vec3(s.b), s.a);
return length(s) == 0.0 ? vec4(s.rgb, 1.0) : s;
}`),a.uniforms.add(new Float3BindUniform/* Float3BindUniform */.d("anchorPoint",(o=>o.clouds.parallax.anchorPoint)),new Float3BindUniform/* Float3BindUniform */.d("anchorPointNew",(o=>o.clouds.parallaxNew.anchorPoint)),new Matrix4BindUniform/* Matrix4BindUniform */.F("rotationClouds",(o=>o.clouds.parallax.transform)),new Matrix4BindUniform/* Matrix4BindUniform */.F("rotationCloudsNew",(o=>o.clouds.parallaxNew.transform)),new FloatBindUniform/* FloatBindUniform */.U("cloudsOpacity",(o=>o.clouds.opacity)),new FloatBindUniform/* FloatBindUniform */.U("fadeFactor",(o=>o.clouds.fadeFactor)),new BooleanBindUniform/* BooleanBindUniform */.o("crossFade",(o=>o.clouds.fadeState===CloudsParameters/* FadeState */.c.CROSS_FADE))).code.add((0,glsl/* glsl */.H)`vec4 renderClouds(vec3 worldRay, vec3 cameraPosition) {
vec3 intersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPoint);
vec3 worldRayRotated = rotateDirectionToAnchorPoint(rotationClouds, normalize(intersectionPoint));
vec3 worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
vec4 cloudData = sampleCloud(worldRayRotatedCorrected, crossFade);
vec3 cameraPositionN = normalize(cameraPosition);
vec4 cloudColor = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);
if(crossFade) {
intersectionPoint = intersectWithCloudLayer(worldRay, cameraPosition, anchorPointNew);
worldRayRotated = rotateDirectionToAnchorPoint(rotationCloudsNew, normalize(intersectionPoint));
worldRayRotatedCorrected = correctForPlanetCurvature(worldRayRotated);
cloudData = sampleCloud(worldRayRotatedCorrected, false);
vec4 cloudColorNew = vec4(calculateCloudColor(cameraPositionN, worldRay, cloudData), cloudData.a);
cloudColor = mix(cloudColor, cloudColorNew, fadeFactor);
}
float totalTransmittance = length(cloudColor.rgb) == 0.0 ?
1.0 :
clamp(cloudColor.a * cloudsOpacity + (1.0 - cloudsOpacity), 0.0 , 1.0);
return vec4(cloudColor.rgb, totalTransmittance);
}`)}const v=(Ellipsoid/* earth */.$O.radius+weather/* cloudsHeight */.k9)**2;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ToneMapping.glsl.js
var ToneMapping_glsl = __webpack_require__(85856);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function m(m,v){const u=m.fragment;u.include(PhysicallyBasedRendering_glsl/* PhysicallyBasedRenderingWater */.f,v),u.include(e),u.include(FoamRendering_glsl/* FoamColor */.v),v.cloudReflections&&m.include(C),m.include(d,v),u.include(ToneMapping_glsl/* ToneMapping */.b,v),u.constants.add("fresnelSky","vec3",[.02,1,15]),u.constants.add("fresnelMaterial","vec2",[.02,.1]),u.constants.add("roughness","float",.015),u.constants.add("foamIntensityExternal","float",1.7),u.constants.add("ssrIntensity","float",.65),u.constants.add("ssrHeightFadeStart","float",ScreenSpaceConstants/* distanceFadeStart */.O),u.constants.add("ssrHeightFadeEnd","float",ScreenSpaceConstants/* distanceFadeEnd */.b),u.constants.add("waterDiffusion","float",.92),u.constants.add("waterSeaColorMod","float",.8),u.constants.add("correctionViewingPowerFactor","float",.4),u.constants.add("skyZenitColor","vec3",[.52,.68,.9]),u.constants.add("skyColor","vec3",[.67,.79,.9]),u.constants.add("cloudFresnelModifier","vec2",[1.2,.01]),u.code.add((0,glsl/* glsl */.H)`PBRShadingWater shadingInfo;
vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {
float exponent = pow((1.0 - cosTheta), fresnelSky[2]);
return mix(zenit, horizon, exponent);
}`),u.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("lightingSpecularStrength",(e=>e.lighting.mainLight.specularStrength)),new FloatBindUniform/* FloatBindUniform */.U("lightingEnvironmentStrength",(e=>e.lighting.mainLight.environmentStrength))),u.code.add((0,glsl/* glsl */.H)`vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 viewPosition, vec3 position) {
float reflectionHit = 0.0;
float reflectionHitDiffused = 0.0;
vec3 seaWaterColor = linearizeGamma(color);
vec3 h = normalize(l + v);
shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);
shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);
shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);
shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);
shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);
float upDotV = max(dot(localUp,v), 0.0);
vec3 skyHorizon = linearizeGamma(skyColor);
vec3 skyZenit = linearizeGamma(skyZenitColor);
vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );
float upDotL = max(dot(localUp,l),0.0);
float daytimeMod = 0.1 + upDotL * 0.9;
skyColor *= daytimeMod;
float shadowModifier = clamp(shadow, 0.8, 1.0);
vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);
vec3 reflSky = lightingEnvironmentStrength * fresnelModifier * skyColor * shadowModifier;
vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;
vec3 specular = vec3(0.0);
if(upDotV > 0.0 && upDotL > 0.0) {
vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);
vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;
float NdotL = clamp(dot(n, l), 0.0, 1.0);
specular = lightingSpecularStrength * NdotL * incidentLight * specularSun;
}
vec3 foam = vec3(0.0);
if(upDotV > 0.0) {
foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);
}
float correctionViewingFactor = pow(max(dot(v, localUp), 0.0), correctionViewingPowerFactor);
vec3 normalCorrectedClouds = mix(localUp, n, correctionViewingFactor);
vec3 reflectedWorld = normalize(reflect(-v, normalCorrectedClouds));`),v.cloudReflections&&u.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("cloudsOpacity",(e=>e.clouds.opacity))).code.add((0,glsl/* glsl */.H)`vec4 cloudsColor = renderClouds(reflectedWorld, position);
cloudsColor.a = 1.0 - cloudsColor.a;
cloudsColor = pow(cloudsColor, vec4(GAMMA));
cloudsColor *= clamp(fresnelModifier.y * cloudFresnelModifier[0] - cloudFresnelModifier[1], 0.0, 1.0) * cloudsOpacity;`),v.screenSpaceReflections?u.uniforms.add(new Matrix4BindUniform/* Matrix4BindUniform */.F("view",(e=>e.camera.viewMatrix)),new Texture2DBindUniform/* Texture2DBindUniform */.x("lastFrameColorTexture",(e=>e.ssr.lastFrameColor?.getTexture())),new FloatBindUniform/* FloatBindUniform */.U("fadeFactorSSR",(e=>e.ssr.fadeFactor))).code.add((0,glsl/* glsl */.H)`vec3 viewDir = normalize(viewPosition);
vec4 viewNormalVectorCoordinate = view * vec4(n, 0.0);
vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);
vec4 viewUp = view * vec4(localUp, 0.0);
vec3 viewNormalCorrectedSSR = mix(viewUp.xyz, viewNormal, correctionViewingFactor);
vec3 reflected = normalize(reflect(viewDir, viewNormalCorrectedSSR));
vec3 hitCoordinate = screenSpaceIntersection(reflected, viewPosition, viewDir, viewUp.xyz);
vec3 reflectedColor = vec3(0.0);
if (hitCoordinate.z > 0.0)
{
vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);
vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));
float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -viewPosition.z);
reflectionHit = clamp(1.0 - (1.3 * dCoords.y), 0.0, 1.0) * heightMod * fadeFactorSSR;
reflectionHitDiffused = waterDiffusion * reflectionHit;
reflectedColor = linearizeGamma(texture(lastFrameColorTexture, reprojectedCoordinate).xyz) *
reflectionHitDiffused * fresnelModifier.y * ssrIntensity;
}
float seaColorMod =  mix(waterSeaColorMod, waterSeaColorMod * 0.5, reflectionHitDiffused);
vec3 waterRenderedColor = tonemapACES((1.0 - reflectionHitDiffused) * reflSky + reflectedColor +
reflSea * seaColorMod + specular + foam);`):u.code.add((0,glsl/* glsl */.H)`vec3 waterRenderedColor = tonemapACES(reflSky + reflSea * waterSeaColorMod + specular + foam);`),v.cloudReflections?v.screenSpaceReflections?u.code.add((0,glsl/* glsl */.H)`return waterRenderedColor * (1.0 - (1.0 - reflectionHit) * cloudsColor.a) + (1.0 - reflectionHit) * cloudsColor.xyz;
}`):u.code.add((0,glsl/* glsl */.H)`return waterRenderedColor * (1.0 - cloudsColor.a) + cloudsColor.xyz;
}`):u.code.add((0,glsl/* glsl */.H)`return waterRenderedColor;
}`)}


/***/ }),

/***/ 1062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ir: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony exports getProjectionInfo, getZScale */
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(28152);
/* harmony import */ var _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(74767);
/* harmony import */ var _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45393);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function f(r){r.fragment.uniforms.add(new _shaderModules_Float4BindUniform_js__WEBPACK_IMPORTED_MODULE_5__/* .Float4BindUniform */ .I("projInfo",(r=>n(r.camera)))),r.fragment.uniforms.add(new _shaderModules_Float2BindUniform_js__WEBPACK_IMPORTED_MODULE_4__/* .Float2BindUniform */ .E("zScale",(r=>m(r.camera)))),r.fragment.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_6__/* .glsl */ .H)`vec3 reconstructPosition(vec2 fragCoord, float depth) {
return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
}`)}function n(r){const o=r.projectionMatrix;return 0===o[11]?(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.s)(c,2/(r.fullWidth*o[0]),2/(r.fullHeight*o[5]),(1+o[12])/o[0],(1+o[13])/o[5]):(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_2__.s)(c,-2/(r.fullWidth*o[0]),-2/(r.fullHeight*o[5]),(1-o[8])/o[0],(1-o[9])/o[5])}const c=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)();function m(o){return 0===o.projectionMatrix[11]?(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(l,0,1):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(l,1,0)}const l=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();


/***/ }),

/***/ 89002:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){e.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}


/***/ }),

/***/ 6916:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OH: () => (/* binding */ o),
/* harmony export */   Y6: () => (/* binding */ s),
/* harmony export */   pM: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/* harmony import */ var _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60840);
/* harmony import */ var _shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e){e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
return absCosAngle * absCosAngle * absCosAngle;
}`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec3 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec3 params) {
return vec3(
min(params.x / (distanceToCamera - params.y), 1.0),
screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
params.z
);
}`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorFloat(
size,
screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
);
}`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec3 factor) {
return mix(size * clamp(factor.x, factor.z, 1.0), size, factor.y);
}`),e.vertex.code.add((0,_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .glsl */ .H)`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec3 params) {
return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
}`)}function t(e){e.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("screenSizePerspective",(e=>i(e.screenSizePerspective))))}function o(e){e.uniforms.add(new _shaderModules_Float3PassUniform_js__WEBPACK_IMPORTED_MODULE_2__/* .Float3PassUniform */ .t("screenSizePerspectiveAlignment",(e=>i(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function i(a){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(n,a.parameters.divisor,a.parameters.offset,a.minScaleFactor)}const n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();


/***/ }),

/***/ 63592:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  yu: () => (/* binding */ d),
  Nz: () => (/* binding */ w),
  NB: () => (/* binding */ f),
  S7: () => (/* binding */ p)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3BindUniform.js
var Float3BindUniform = __webpack_require__(81598);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform.js
var Float3DrawUniform = __webpack_require__(13501);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js
var FloatBindUniform = __webpack_require__(17983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js
var Matrix4BindUniform = __webpack_require__(82088);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BindType.js
var BindType = __webpack_require__(11809);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Uniform.js
var Uniform = __webpack_require__(99120);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t extends Uniform/* Uniform */.n{constructor(o,t){super(o,"mat4",BindType/* BindType */.c.Draw,((r,e,s)=>r.setUniformMatrix4fv(o,t(e,s))))}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function d(r,i){i.instancedDoublePrecision?r.constants.add("cameraPosition","vec3",vec3f64/* ZEROS */.uY):r.uniforms.add(new Float3DrawUniform/* Float3DrawUniform */.W("cameraPosition",((r,i)=>(0,vec32.i)(v,i.camera.viewInverseTransposeMatrix[3]-r.origin[0],i.camera.viewInverseTransposeMatrix[7]-r.origin[1],i.camera.viewInverseTransposeMatrix[11]-r.origin[2]))))}function f(i,o){if(!o.instancedDoublePrecision)return void i.uniforms.add(new Matrix4BindUniform/* Matrix4BindUniform */.F("proj",(r=>r.camera.projectionMatrix)),new t("view",((i,e)=>(0,mat4/* translate */.Tl)(l,e.camera.viewMatrix,i.origin))),new Float3DrawUniform/* Float3DrawUniform */.W("localOrigin",(r=>r.origin)));const a=({camera:r})=>(0,vec32.i)(v,r.viewInverseTransposeMatrix[3],r.viewInverseTransposeMatrix[7],r.viewInverseTransposeMatrix[11]);i.uniforms.add(new Matrix4BindUniform/* Matrix4BindUniform */.F("proj",(r=>r.camera.projectionMatrix)),new Matrix4BindUniform/* Matrix4BindUniform */.F("view",(i=>(0,mat4/* translate */.Tl)(l,i.camera.viewMatrix,a(i)))),new Float3BindUniform/* Float3BindUniform */.d("localOrigin",(r=>a(r))))}const l=(0,mat4f64/* create */.vt)(),v=(0,vec3f64/* create */.vt)();function p(r){r.uniforms.add(new Matrix4BindUniform/* Matrix4BindUniform */.F("viewNormal",(r=>r.camera.viewInverseTransposeMatrix)))}function w(r){r.uniforms.add(new FloatBindUniform/* FloatBindUniform */.U("pixelRatio",(r=>r.camera.pixelRatio/r.overlayStretch)))}


/***/ }),

/***/ 10561:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   o: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(r,e){super(r,"bool",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((o,s)=>o.setUniform1b(r,e(s))))}}


/***/ }),

/***/ 74767:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,o){super(e,"vec2",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((r,s)=>r.setUniform2fv(e,o(s))))}}


/***/ }),

/***/ 96320:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   t: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,o){super(e,"vec2",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Draw,((r,s,t,m)=>r.setUniform2fv(e,o(s,t,m))))}}


/***/ }),

/***/ 54473:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(s,e){super(s,"vec2",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,o,t)=>r.setUniform2fv(s,e(o,t))))}}


/***/ }),

/***/ 81598:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,o){super(e,"vec3",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((r,s)=>r.setUniform3fv(e,o(s))))}}


/***/ }),

/***/ 45393:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,o){super(e,"vec4",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((r,s)=>r.setUniform4fv(e,o(s))))}}


/***/ }),

/***/ 1411:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(s,e){super(s,"vec4",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,o,t)=>r.setUniform4fv(s,e(o,t))))}}


/***/ }),

/***/ 54706:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(s,e,o){super(s,"vec4",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,o,t)=>r.setUniform4fv(s,e(o,t))),o)}}


/***/ }),

/***/ 31824:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(o,e){super(o,"float",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Draw,((r,s,t)=>r.setUniform1f(o,e(s,t))))}}


/***/ }),

/***/ 35449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(r,s){super(r,"float",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((o,e,t)=>o.setUniform1f(r,s(e,t))))}}


/***/ }),

/***/ 45160:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(r,s,e){super(r,"float",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((o,e,t)=>o.setUniform1fv(r,s(e,t))),e)}}


/***/ }),

/***/ 65083:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(o,e){super(o,"int",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((r,i)=>r.setUniform1i(o,e(i))))}}


/***/ }),

/***/ 3445:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(s,o){super(s,"int",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,e,t)=>r.setUniform1i(s,o(e,t))))}}


/***/ }),

/***/ 20778:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(s,o){super(s,"mat4",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,t,e)=>r.setUniformMatrix4fv(s,o(t,e))))}}


/***/ }),

/***/ 96390:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,o){super(e,"sampler2D",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Bind,((r,s)=>r.bindTexture(e,o(s))))}}


/***/ }),

/***/ 79856:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,s){super(e,"sampler2D",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,o,t)=>r.bindTexture(e,s(o,t))))}}


/***/ }),

/***/ 7568:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11809);
/* harmony import */ var _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99120);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s extends _webgl_Uniform_js__WEBPACK_IMPORTED_MODULE_1__/* .Uniform */ .n{constructor(e,s){super(e,"usampler2D",_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_0__/* .BindType */ .c.Pass,((r,o,t)=>r.bindTexture(e,s(o,t))))}}


/***/ }),

/***/ 47705:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t,o){this._module=t,this._load=o}get(){return this._module}async reload(){return this._module=await this._load(),this._module}}


/***/ }),

/***/ 28347:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  w: () => (/* binding */ g),
  L: () => (/* binding */ h)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js
var DefaultVertexAttributeLocations = __webpack_require__(13148);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Program_r{constructor(t,r,e){this._context=t,this._locations=e,this._textures=new Map,this._glProgram=t.programCache.acquire(r.generate("vertex",!0),r.generate("fragment",!0),e),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bind=r.generateBind(this),this.bindPass=r.generateBindPass(this),this.bindDraw=r.generateBindDraw(this)}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get hasTransformFeedbackVaryings(){return this._glProgram.hasTransformFeedbackVaryings}get compiled(){return this._glProgram.compiled}setUniform1b(t,r){this._glProgram.setUniform1i(t,r?1:0)}setUniform1i(t,r){this._glProgram.setUniform1i(t,r)}setUniform1f(t,r){this._glProgram.setUniform1f(t,r)}setUniform2fv(t,r){this._glProgram.setUniform2fv(t,r)}setUniform3fv(t,r){this._glProgram.setUniform3fv(t,r)}setUniform4fv(t,r){this._glProgram.setUniform4fv(t,r)}setUniformMatrix3fv(t,r){this._glProgram.setUniformMatrix3fv(t,r)}setUniformMatrix4fv(t,r){this._glProgram.setUniformMatrix4fv(t,r)}setUniform1fv(t,r){this._glProgram.setUniform1fv(t,r)}setUniform1iv(t,r){this._glProgram.setUniform1iv(t,r)}setUniform2iv(t,r){this._glProgram.setUniform2iv(t,r)}setUniform3iv(t,r){this._glProgram.setUniform3iv(t,r)}setUniform4iv(t,r){this._glProgram.setUniform4iv(t,r)}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear()}bindTexture(r,e){e?.glName||((0,checkWebGLError/* webglDebugEnabled */.en)()&&console.error(`Texture sampler ${r} has no given Texture in ${(new Error).stack} `),e=this._context.emptyTexture);const i=this._ensureTextureUnit(r,e);this._context.useProgram(this),this.setUniform1i(r,i.unit),this._context.bindTexture(e,i.unit)}_ensureTextureUnit(t,r){let e=this._textures.get(t);return null==e?(e={texture:r,unit:this._textures.size},this._textures.set(t,e)):e.texture=r,e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m=()=>Logger/* default */.A.getLogger("esri.views.3d.webgl.ShaderTechnique");class g{constructor(e,r,n,a=DefaultVertexAttributeLocations/* Default3D */.D){this.locations=a,this.primitiveType=enums/* PrimitiveType */.WR.TRIANGLES,this.key=r.key,this._program=new Program_r(e.rctx,n.get().build(r),a),this._pipeline=this.initializePipeline(r),this.reload=async t=>{t&&await n.reload(),this.key.equals(r.key)||m().warn("Configuration was changed after construction, cannot reload shader.",n),(0,maybe/* disposeMaybe */.WD)(this._program),this._program=new Program_r(e.rctx,n.get().build(r),a),this._pipeline=this.initializePipeline(r)}}destroy(){this._program=(0,maybe/* disposeMaybe */.WD)(this._program),this._pipeline=null}get program(){return this._program}get compiled(){return this.program.compiled}ensureAttributeLocations(e){this.program.assertCompatibleVertexAttributeLocations(e)}getPipeline(e,i){return this._pipeline}initializePipeline(e){return (0,renderState/* makePipelineState */.Ey)({blending:renderState/* premultipliedAlpha */.RC,colorWrite:renderState/* defaultColorWrite */.kn})}}function h(e,i){return (0,ShaderOutput/* isDepthOnlyOutput */.Vg)(e)?{buffers:[enums/* SpecialDrawBuffers */.Hr.NONE]}:i??null}


/***/ }),

/***/ 77941:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ a),
  W: () => (/* binding */ i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfigurationKey.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(t){this._bits=[...t]}equals(s){return (0,arrayUtils/* equals */.aI)(this._bits,s.bits)}get code(){return this._code??=String.fromCharCode(...this._bits),this._code}get bits(){return this._bits}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/NoParameters.js
var NoParameters = __webpack_require__(22005);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends NoParameters/* NoParameters */.Y{constructor(){super(),this._parameterBits=this._parameterBits?.map((()=>0))??[],this._parameterNames??=[]}get key(){return this._key??=new s(this._parameterBits),this._key}decode(e=this.key){const t=this._parameterBits;this._parameterBits=[...e.bits];const r=this._parameterNames.map((e=>`    ${e}: ${this[e]}`)).join("\n");return this._parameterBits=t,r}}function i(t={}){return(r,a)=>{r.hasOwnProperty("_parameterNames")||Object.defineProperty(r,"_parameterNames",{value:r._parameterNames?.slice()??[],configurable:!0,writable:!0}),r.hasOwnProperty("_parameterBits")||Object.defineProperty(r,"_parameterBits",{value:r._parameterBits?.slice()??[0],configurable:!0,writable:!0}),r._parameterNames.push(a);const i=t.count||2,s=Math.ceil(Math.log2(i)),o=r._parameterBits;let n=0;for(;o[n]+s>16;)n++,n>=o.length&&o.push(0);const p=o[n],m=(1<<s)-1<<p;o[n]+=s,t.count?Object.defineProperty(r,a,{get(){return(this._parameterBits[n]&m)>>p},set(r){if(this[a]!==r){if(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+r<<p&m,"number"!=typeof r)throw new Error/* default */.A("internal:invalid-shader-configuration",`Configuration value for ${a} must be a number, got ${typeof r}`);if(null==t.count)throw new Error/* default */.A("internal:invalid-shader-configuration",`Configuration value for ${a} must provide a count option`)}}}):Object.defineProperty(r,a,{get(){return!!((this._parameterBits[n]&m)>>p)},set(t){if(this[a]!==t&&(this._key=null,this._parameterBits[n]=this._parameterBits[n]&~m|+t<<p&m,"boolean"!=typeof t))throw new Error/* default */.A("internal:invalid-shader-configuration",`Configuration value for ${a} must be boolean, got ${typeof t}`)}})}}


/***/ }),

/***/ 38931:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cc: () => (/* binding */ c),
/* harmony export */   RW: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports ConsumesDepth, ConsumesNone */
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52495);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(45722);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s={required:[]},n={required:[_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Depth]};class u extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{precompile(e){return!!this.acquireTechniques(e)}consumes(){return s}get usedMemory(){return 0}get renderOccludedFlags(){return _lib_Material_js__WEBPACK_IMPORTED_MODULE_2__/* .RenderOccludedFlag */ .m$.Occlude}get isDecoration(){return!1}get running(){return!1}modify(e,r){}get numGeometries(){return 0}get hasOccludees(){return!1}get hasEmissions(){return!1}forEachGeometry(e){}}class o extends u{}class c extends u{}


/***/ }),

/***/ 32734:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86942);
/* harmony import */ var _geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e){if(e.length<_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .nativeArrayMaxSize */ .y9)return Array.from(e);if(Array.isArray(e))return Float64Array.from(e);if(!("BYTES_PER_ELEMENT"in e))return Array.from(e);switch(e.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(e);case 2:return (0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isFloat16Array */ .LW)(e)?(0,_geometry_support_float16_js__WEBPACK_IMPORTED_MODULE_1__/* .getFloat16ArrayConstructor */ .pX)().from(e):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_0__/* .isUint16Array */ .jq)(e)?Uint16Array.from(e):Int16Array.from(e);case 4:return Float32Array.from(e);default:return Float64Array.from(e)}}


/***/ }),

/***/ 82736:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63678);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(i,e,o){this.primitiveIndices=i,this._numIndexPerPrimitive=e,this.position=o,this._children=void 0,(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(i.length>=1),(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(3===o.size||4===o.size);const{data:c,size:l,indices:m}=o;(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(m.length%this._numIndexPerPrimitive===0),(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .assert */ .vA)(m.length>=i.length*this._numIndexPerPrimitive);const d=i.length;let u=l*m[this._numIndexPerPrimitive*i[0]];a.clear(),a.push(u);const f=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .fromValues */ .fA)(c[u],c[u+1],c[u+2]),x=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(f);for(let t=0;t<d;++t){const e=this._numIndexPerPrimitive*i[t];for(let i=0;i<this._numIndexPerPrimitive;++i){u=l*m[e+i],a.push(u);let t=c[u];f[0]=Math.min(t,f[0]),x[0]=Math.max(t,x[0]),t=c[u+1],f[1]=Math.min(t,f[1]),x[1]=Math.max(t,x[1]),t=c[u+2],f[2]=Math.min(t,f[2]),x[2]=Math.max(t,x[2])}}this.bbMin=f,this.bbMax=x;const P=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.m)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(x[0]-f[0],x[1]-f[1]),x[2]-f[2]);let v=this.radius*this.radius;for(let t=0;t<a.length;++t){u=a.at(t);const i=c[u]-P[0],e=c[u+1]-P[1],s=c[u+2]-P[2],r=i*i+e*e+s*s;if(r<=v)continue;const n=Math.sqrt(r),h=.5*(n-this.radius);this.radius=this.radius+h,v=this.radius*this.radius;const o=h/n;P[0]+=i*o,P[1]+=e*o,P[2]+=s*o}this.center=P,a.clear()}getChildren(){if(this._children||(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.s)(this.bbMin,this.bbMax)<=1)return this._children;const i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.m)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.bbMin,this.bbMax,.5),s=this.primitiveIndices.length,r=new Uint8Array(s),h=new Array(8);for(let t=0;t<8;++t)h[t]=0;const{data:a,size:c,indices:l}=this.position;for(let t=0;t<s;++t){let e=0;const s=this._numIndexPerPrimitive*this.primitiveIndices[t];let n=c*l[s],o=a[n],m=a[n+1],d=a[n+2];for(let i=1;i<this._numIndexPerPrimitive;++i){n=c*l[s+i];const t=a[n],e=a[n+1],r=a[n+2];t<o&&(o=t),e<m&&(m=e),r<d&&(d=r)}o<i[0]&&(e|=1),m<i[1]&&(e|=2),d<i[2]&&(e|=4),r[t]=e,++h[e]}let m=0;for(let t=0;t<8;++t)h[t]>0&&++m;if(m<2)return;const d=new Array(8);for(let t=0;t<8;++t)d[t]=h[t]>0?new Uint32Array(h[t]):void 0;for(let t=0;t<8;++t)h[t]=0;for(let t=0;t<s;++t){const i=r[t];d[i][h[i]++]=this.primitiveIndices[t]}this._children=new Array;for(let t=0;t<8;++t)void 0!==d[t]&&this._children.push(new o(d[t],this._numIndexPerPrimitive,this.position));return this._children}static prune(){a.prune()}}const a=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A({deallocator:null});


/***/ }),

/***/ 13148:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const E=new Map([[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.POSITION,0],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.NORMAL,1],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.NORMALCOMPRESSED,1],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.UV0,2],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.UVI,2],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.COLOR,3],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE,3],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.SIZE,4],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.TANGENT,4],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.CENTEROFFSETANDDISTANCE,5],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.SYMBOLCOLOR,5],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.FEATUREATTRIBUTE,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEFEATUREATTRIBUTE,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.OLIDCOLOR,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEOBJECTANDLAYERIDCOLOR,6],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCECOLOR,7],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.ROTATION,8],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODEL,8],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELNORMAL,12],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELORIGINHI,11],[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexAttribute */ .r.INSTANCEMODELORIGINLO,15]]);


/***/ }),

/***/ 67341:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(t){this._material=t.material,this._techniques=t.techniques,this._output=t.output}dispose(){}get _stippleTextures(){return this._techniques.context.stippleTextures}get _markerTextures(){return this._techniques.context.markerTextures}getTechnique(t,e){return this._techniques.get(t,this._material.getConfiguration(this._output,e))}ensureResources(e){return _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceState */ .Am.LOADED}}


/***/ }),

/***/ 89140:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   NV: () => (/* binding */ o),
/* harmony export */   m8: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony export GLEmissiveTexturePassParameters */
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40189);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91013);
/* harmony import */ var _GLMaterial_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67341);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends _GLMaterial_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textures=t.textures,this.updateTexture(t.textureId),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){super.dispose(),this._texture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._texture),this._textureNormal=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureNormal),this._textureEmissive=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureEmissive),this._textureOcclusion=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureOcclusion),this._textureMetallicRoughness=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceState */ .Am.LOADED:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceState */ .Am.LOADING}get textureBindParameters(){return new o(this._texture?.glTexture??null,this._textureNormal?.glTexture??null,this._textureEmissive?.glTexture??null,this._textureOcclusion?.glTexture??null,this._textureMetallicRoughness?.glTexture??null)}updateTexture(e){null!=this._texture&&e===this._texture.id||(this._texture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(this._texture),this._acquire(e,(t=>this._texture=t)))}_acquire(s,i){if(null==s)return void i(null);const r=this._textures.acquire(s);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPromiseLike */ .$X)(r))return++this._numLoading,void r.then((e=>{if(this._disposed)return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .releaseMaybe */ .Gz)(e),void i(null);i(e)})).finally((()=>--this._numLoading));i(r)}}class l extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_3__/* .NoParameters */ .Y{constructor(t=null){super(),this.textureEmissive=t}}class o extends l{constructor(t,e,s,i,r,u,l){super(s),this.texture=t,this.textureNormal=e,this.textureOcclusion=i,this.textureMetallicRoughness=r,this.scale=u,this.normalTextureTransformMatrix=l}}


/***/ }),

/***/ 59816:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  V: () => (/* binding */ p)
});

// UNUSED EXPORTS: GeometryType

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/uid.js
var uid = __webpack_require__(65061);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/AttributeArray.js
var AttributeArray = __webpack_require__(32734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BoundingInfo.js
var BoundingInfo = __webpack_require__(82736);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/triangle.js
var triangle = __webpack_require__(50958);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/geometryDataUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function geometryDataUtils_i(r,o){if(!r)return!1;const{size:i,data:c,indices:f}=r;(0,vec32.i)(o,0,0,0),(0,vec32.i)(m,0,0,0);let g=0,d=0;for(let p=0;p<f.length-2;p+=3){const r=f[p]*i,h=f[p+1]*i,j=f[p+2]*i;(0,vec32.i)(a,c[r],c[r+1],c[r+2]),(0,vec32.i)(l,c[h],c[h+1],c[h+2]),(0,vec32.i)(u,c[j],c[j+1],c[j+2]);const z=(0,triangle/* areaPoints3d */.Q7)(a,l,u);z?((0,vec32.f)(a,a,l),(0,vec32.f)(a,a,u),(0,vec32.g)(a,a,1/3*z),(0,vec32.f)(o,o,a),g+=z):((0,vec32.f)(m,m,a),(0,vec32.f)(m,m,l),(0,vec32.f)(m,m,u),d+=3)}return(0!==d||0!==g)&&(0!==g?((0,vec32.g)(o,o,1/g),!0):0!==d&&((0,vec32.g)(o,m,1/d),!0))}function c(e,r){if(!e)return!1;const{size:o,data:s,indices:i}=e;(0,vec32.i)(r,0,0,0);let c=-1,f=0;for(let t=0;t<i.length;t++){const e=i[t]*o;c!==e&&(r[0]+=s[e],r[1]+=s[e+1],r[2]+=s[e+2],f++),c=e}return f>1&&(0,vec32.g)(r,r,1/f),f>0}function f(o,s,i){if(!o)return!1;(0,vec32.i)(i,0,0,0),(0,vec32.i)(m,0,0,0);let c=0,f=0;const{size:u,data:g,indices:d}=o,p=d.length-1,h=p+(s?2:0);for(let t=0;t<h;t+=2){const o=t<p?t+1:0,s=d[t<p?t:p]*u,h=d[o]*u;a[0]=g[s],a[1]=g[s+1],a[2]=g[s+2],l[0]=g[h],l[1]=g[h+1],l[2]=g[h+2],(0,vec32.g)(a,(0,vec32.f)(a,a,l),.5);const j=(0,vec32.F)(a,l);j>0?((0,vec32.f)(i,i,(0,vec32.g)(a,a,j)),c+=j):0===c&&((0,vec32.f)(m,m,a),f++)}return 0!==c?((0,vec32.g)(i,i,1/c),!0):0!==f&&((0,vec32.g)(i,m,1/f),!0)}const a=(0,vec3f64/* create */.vt)(),l=(0,vec3f64/* create */.vt)(),u=(0,vec3f64/* create */.vt)(),m=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectableGeometry.js
var IntersectableGeometry = __webpack_require__(27514);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js
var Object3DStateID = __webpack_require__(22775);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class p{constructor(i,e,s=null,h=IntersectableGeometry/* GeometryType */.d.Mesh,r=null,o=-1){this.material=i,this.mapPositions=s,this.type=h,this.objectAndLayerIdColor=r,this.edgeIndicesLength=o,this.highlights=new Set,this._highlightOptionsCounts=new Map,this.id=(0,uid/* generateUID */.c)(),this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[t,a]of e)this._attributes.set(t,{...a,indices:(0,Indices/* compactIndices */.Dg)(a.indices)}),t===VertexAttribute/* VertexAttribute */.r.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(t).indices.length:this.edgeIndicesLength)}instantiate(t={}){const i=new p(t.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach(((t,e)=>{t.exclusive=!1,i._attributes.set(e,t)})),i._boundingInfo=this._boundingInfo,i.transformation=t.transformation||this.transformation,i}get attributes(){return this._attributes}getMutableAttribute(t){let i=this._attributes.get(t);return i&&!i.exclusive&&(i={...i,exclusive:!0,data:(0,AttributeArray/* cloneAttributeData */.S)(i.data)},this._attributes.set(t,i)),i}setAttributeData(t,i){const e=this._attributes.get(t);e?this._attributes.set(t,{...e,exclusive:!0,data:i}):(0,checkWebGLError/* webglDebugEnabled */.en)()&&console.warn(`Setting undefined attribute ${t} data`)}get indexCount(){const t=this._attributes.values().next().value?.indices;return t?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return this._boundingInfo??=this._calculateBoundingInfo(),this._boundingInfo}computeAttachmentOrigin(t){return!!(this.type===IntersectableGeometry/* GeometryType */.d.Mesh?this._computeAttachmentOriginTriangles(t):this.type===IntersectableGeometry/* GeometryType */.d.Line?this._computeAttachmentOriginLines(t):this._computeAttachmentOriginPoints(t))&&(null!=this._transformation&&(0,vec32.t)(t,t,this._transformation),!0)}_computeAttachmentOriginTriangles(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return geometryDataUtils_i(i,t)}_computeAttachmentOriginLines(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return f(i,b(this.material.parameters,i),t)}_computeAttachmentOriginPoints(t){const i=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);return c(i,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION);if(!t||0===t.indices.length)return null;const i=this.type===IntersectableGeometry/* GeometryType */.d.Mesh?3:1;(0,Util/* assert */.vA)(t.indices.length%i===0,"Indexing error: "+t.indices.length+" not divisible by "+i);const e=(0,Indices/* getContinuousIndexArray */.tM)(t.indices.length/i);return new BoundingInfo/* BoundingInfo */.j(e,i,t)}get transformation(){return this._transformation??mat4f64/* IDENTITY */.zK}set transformation(t){this._transformation=t&&t!==mat4f64/* IDENTITY */.zK?(0,mat4f64/* clone */.o8)(t):null}get highlightNames(){return this._highlightOptionsCounts}get hasHighlights(){return this._highlightOptionsCounts.size>0}foreachHighlightOptions(t){this._highlightOptionsCounts.forEach(((i,e)=>t(e)))}allocateIdAndHighlight(t){const i=new Object3DStateID/* Object3DHighlightStateID */.h(t);return this.addHighlight(i)}addHighlight(t){this.highlights.add(t);const{highlightName:i}=t,e=(this._highlightOptionsCounts.get(i)??0)+1;return this._highlightOptionsCounts.set(i,e),t}removeHighlight(t){if(this.highlights.delete(t)){const{highlightName:i}=t,e=this._highlightOptionsCounts.get(i)??0;e<=1?this._highlightOptionsCounts.delete(i):this._highlightOptionsCounts.set(i,e-1)}}}function b(t,i){return!(!("isClosed"in t)||!t.isClosed)&&i.indices.length>2}


/***/ }),

/***/ 94643:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  zC: () => (/* binding */ mt),
  C1: () => (/* binding */ C),
  EE: () => (/* binding */ at),
  YG: () => (/* binding */ ct),
  nW: () => (/* binding */ ft),
  td: () => (/* binding */ B),
  _B: () => (/* binding */ gt),
  Nq: () => (/* binding */ it),
  DJ: () => (/* binding */ lt),
  Y6: () => (/* binding */ rt),
  uX: () => (/* binding */ st),
  Z8: () => (/* binding */ wt),
  CM: () => (/* binding */ ot),
  Gj: () => (/* binding */ ut),
  Ho: () => (/* binding */ et),
  Nb: () => (/* binding */ pt),
  Xl: () => (/* binding */ Mt),
  xh: () => (/* binding */ Ot)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f32.js
var vec3f32 = __webpack_require__(3912);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/DoubleArray.js
var DoubleArray = __webpack_require__(90166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/FloatArray.js
var FloatArray = __webpack_require__(50961);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/Indices.js
var Indices = __webpack_require__(42965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(10151);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js
var Attribute = __webpack_require__(70807);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BufferVectorMath.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n;!function(n){function t(n,t){const c=n[t],o=n[t+1],r=n[t+2];return Math.sqrt(c*c+o*o+r*r)}function c(n,t){const c=n[t],o=n[t+1],r=n[t+2],u=1/Math.sqrt(c*c+o*o+r*r);n[t]*=u,n[t+1]*=u,n[t+2]*=u}function o(n,t,c){n[t]*=c,n[t+1]*=c,n[t+2]*=c}function r(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]+c[o],r[u+1]=n[t+1]+c[o+1],r[u+2]=n[t+2]+c[o+2]}function u(n,t,c,o,r,u=t){(r=r||n)[u]=n[t]-c[o],r[u+1]=n[t+1]-c[o+1],r[u+2]=n[t+2]-c[o+2]}n.length=t,n.normalize=c,n.scale=o,n.add=r,n.subtract=u}(n||(n={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js + 1 modules
var Geometry = __webpack_require__(59816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectableGeometry.js
var IntersectableGeometry = __webpack_require__(27514);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GeometryUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const j=n,E=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],U=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],V=[0,0,1,0,1,1,0,1],v=[0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5],x=new Array(36);for(let Nt=0;Nt<6;Nt++)for(let t=0;t<6;t++)x[6*Nt+t]=Nt;const F=new Array(36);for(let Nt=0;Nt<6;Nt++)F[6*Nt]=0,F[6*Nt+1]=1,F[6*Nt+2]=2,F[6*Nt+3]=2,F[6*Nt+4]=3,F[6*Nt+5]=0;function C(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(24);for(let o=0;o<8;o++)e[3*o]=E[o][0]*n[0],e[3*o+1]=E[o][1]*n[1],e[3*o+2]=E[o][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,v,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(U,x,3)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(V,F,2)]])}const G=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],D=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],q=[5,1,0,5,2,1,5,3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0],z=[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7];function B(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(18);for(let o=0;o<6;o++)e[3*o]=G[o][0]*n[0],e[3*o+1]=G[o][1]*n[1],e[3*o+2]=G[o][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,q,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(D,z,3)]])}const k=(0,vec3f32/* fromValues */.fA)(-.5,0,-.5),Z=(0,vec3f32/* fromValues */.fA)(.5,0,-.5),H=(0,vec3f32/* fromValues */.fA)(0,0,.5),J=(0,vec3f32/* fromValues */.fA)(0,.5,0),K=(0,vec3f32/* create */.vt)(),Q=(0,vec3f32/* create */.vt)(),W=(0,vec3f32/* create */.vt)(),X=(0,vec3f32/* create */.vt)(),Y=(0,vec3f32/* create */.vt)();(0,vec32.d)(K,k,J),(0,vec32.d)(Q,k,Z),(0,vec32.h)(W,K,Q),(0,vec32.n)(W,W),(0,vec32.d)(K,Z,J),(0,vec32.d)(Q,Z,H),(0,vec32.h)(X,K,Q),(0,vec32.n)(X,X),(0,vec32.d)(K,H,J),(0,vec32.d)(Q,H,k),(0,vec32.h)(Y,K,Q),(0,vec32.n)(Y,Y);const $=[k,Z,H,J],_=[0,-1,0,W[0],W[1],W[2],X[0],X[1],X[2],Y[0],Y[1],Y[2]],tt=[0,1,2,3,1,0,3,2,1,3,0,2],nt=[0,0,0,1,1,1,2,2,2,3,3,3];function et(t,n){Array.isArray(n)||(n=[n,n,n]);const e=new Array(12);for(let o=0;o<4;o++)e[3*o]=$[o][0]*n[0],e[3*o+1]=$[o][1]*n[1],e[3*o+2]=$[o][2]*n[2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,tt,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(_,nt,3)]])}function ot(t,n,e,o,s={uv:!0}){const r=-Math.PI,l=2*Math.PI,h=-Math.PI/2,u=Math.PI,c=Math.max(3,Math.floor(e)),a=Math.max(2,Math.floor(o)),f=(c+1)*(a+1),p=(0,FloatArray/* newFloatArray */.oe)(3*f),i=(0,FloatArray/* newFloatArray */.oe)(3*f),w=(0,FloatArray/* newFloatArray */.oe)(2*f),g=[];let m=0;for(let O=0;O<=a;O++){const t=[],e=O/a,o=h+e*u,s=Math.cos(o);for(let h=0;h<=c;h++){const u=h/c,a=r+u*l,f=Math.cos(a)*s,g=Math.sin(o),O=-Math.sin(a)*s;p[3*m]=f*n,p[3*m+1]=g*n,p[3*m+2]=O*n,i[3*m]=f,i[3*m+1]=g,i[3*m+2]=O,w[2*m]=u,w[2*m+1]=e,t.push(m),++m}g.push(t)}const A=new Array;for(let O=0;O<a;O++)for(let t=0;t<c;t++){const n=g[O][t],e=g[O][t+1],o=g[O+1][t+1],s=g[O+1][t];0===O?(A.push(n),A.push(o),A.push(s)):O===a-1?(A.push(n),A.push(e),A.push(o)):(A.push(n),A.push(e),A.push(o),A.push(o),A.push(s),A.push(n))}const I=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(p,A,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(i,A,3,!0)]];return s.uv&&I.push([VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(w,A,2,!0)]),s.offset&&(I[0][0]=VertexAttribute/* VertexAttribute */.r.OFFSET,I.push([VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(Float64Array.from(s.offset),(0,Indices/* getZeroIndexArray */.EH)(A.length),3,!0)])),new Geometry/* Geometry */.V(t,I)}function st(t,n,e,o){const s=rt(n,e,o);return new Geometry/* Geometry */.V(t,s)}function rt(t,n,e){const o=t;let s,r;if(e)s=[0,-1,0,1,0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],r=[0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1];else{const t=o*(1+Math.sqrt(5))/2;s=[-o,t,0,o,t,0,-o,-t,0,o,-t,0,0,-o,t,0,o,t,0,-o,-t,0,o,-t,t,0,-o,t,0,o,-t,0,-o,-t,0,o],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]}for(let c=0;c<s.length;c+=3)j.scale(s,c,t/j.length(s,c));let l={};function h(n,e){n>e&&([n,e]=[e,n]);const o=n.toString()+"."+e.toString();if(l[o])return l[o];let r=s.length;return s.length+=3,j.add(s,3*n,s,3*e,s,r),j.scale(s,r,t/j.length(s,r)),r/=3,l[o]=r,r}for(let c=0;c<n;c++){const t=r.length,n=new Array(4*t);for(let e=0;e<t;e+=3){const t=r[e],o=r[e+1],s=r[e+2],l=h(t,o),u=h(o,s),c=h(s,t),a=4*e;n[a]=t,n[a+1]=l,n[a+2]=c,n[a+3]=o,n[a+4]=u,n[a+5]=l,n[a+6]=s,n[a+7]=c,n[a+8]=u,n[a+9]=l,n[a+10]=u,n[a+11]=c}r=n,l={}}const u=(0,FloatArray/* floatArrayFrom */.Wz)(s);for(let c=0;c<u.length;c+=3)j.normalize(u,c);return[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n((0,FloatArray/* floatArrayFrom */.Wz)(s),r,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(u,r,3,!0)]]}function lt(t,{normal:n,position:e,color:o,rotation:s,size:r,centerOffsetAndDistance:l,uvi:h,featureAttribute:u,objectAndLayerIdColor:c=null}={}){const a=e?(0,vec3f64/* clone */.o8)(e):(0,vec3f64/* create */.vt)(),f=n?(0,vec3f64/* clone */.o8)(n):(0,vec3f64/* fromValues */.fA)(0,0,1),g=o?[255*o[0],255*o[1],255*o[2],o.length>3?255*o[3]:255]:[255,255,255,255],O=null!=r&&2===r.length?r:[1,1],m=null!=s?[s]:[0],A=(0,Indices/* getZeroIndexArray */.EH)(1),I=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(a,A,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(f,A,3,!0)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(g,A,4,!0)],[VertexAttribute/* VertexAttribute */.r.SIZE,new Attribute/* Attribute */.n(O,A,2)],[VertexAttribute/* VertexAttribute */.r.ROTATION,new Attribute/* Attribute */.n(m,A,1,!0)]];if(h&&I.push([VertexAttribute/* VertexAttribute */.r.UVI,new Attribute/* Attribute */.n(h,A,h.length)]),null!=l){const t=[l[0],l[1],l[2],l[3]];I.push([VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE,new Attribute/* Attribute */.n(t,A,4)])}if(u){const t=[u[0],u[1],u[2],u[3]];I.push([VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE,new Attribute/* Attribute */.n(t,A,4)])}return new Geometry/* Geometry */.V(t,I,null,IntersectableGeometry/* GeometryType */.d.Point,c)}const ht=[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];function ut(t,n=ht){const e=new Array(12);for(let c=0;c<4;c++)for(let t=0;t<3;t++)e[3*c+t]=n[c][t];const o=[0,1,2,2,3,0],s=[0,0,1],r=[0,0,0,0,0,0],l=[0,0,1,0,1,1,0,1],h=[255,255,255,255],u=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(e,o,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(s,r,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(l,o,2,!0)],[VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(h,r,4,!0)]];return new Geometry/* Geometry */.V(t,u)}function ct(t,n,e,o,s=!0,r=!0){let l=0;const h=n,u=t;let a=(0,vec3f32/* fromValues */.fA)(0,l,0),f=(0,vec3f32/* fromValues */.fA)(0,l+u,0),p=(0,vec3f32/* fromValues */.fA)(0,-1,0),i=(0,vec3f32/* fromValues */.fA)(0,1,0);o&&(l=u,f=(0,vec3f32/* fromValues */.fA)(0,0,0),a=(0,vec3f32/* fromValues */.fA)(0,l,0),p=(0,vec3f32/* fromValues */.fA)(0,1,0),i=(0,vec3f32/* fromValues */.fA)(0,-1,0));const w=[f,a],g=[p,i],m=e+2,A=Math.sqrt(u*u+h*h);if(o)for(let O=e-1;O>=0;O--){const t=O*(2*Math.PI/e),n=(0,vec3f32/* fromValues */.fA)(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=(0,vec3f32/* fromValues */.fA)(u*Math.cos(t)/A,-h/A,u*Math.sin(t)/A);g.push(o)}else for(let O=0;O<e;O++){const t=O*(2*Math.PI/e),n=(0,vec3f32/* fromValues */.fA)(Math.cos(t)*h,l,Math.sin(t)*h);w.push(n);const o=(0,vec3f32/* fromValues */.fA)(u*Math.cos(t)/A,h/A,u*Math.sin(t)/A);g.push(o)}const M=new Array,I=new Array;if(s){for(let t=3;t<w.length;t++)M.push(1),M.push(t-1),M.push(t),I.push(0),I.push(0),I.push(0);M.push(w.length-1),M.push(2),M.push(1),I.push(0),I.push(0),I.push(0)}if(r){for(let t=3;t<w.length;t++)M.push(t),M.push(t-1),M.push(0),I.push(t),I.push(t-1),I.push(1);M.push(0),M.push(2),M.push(w.length-1),I.push(1),I.push(2),I.push(g.length-1)}const y=(0,FloatArray/* newFloatArray */.oe)(3*m);for(let c=0;c<m;c++)y[3*c]=w[c][0],y[3*c+1]=w[c][1],y[3*c+2]=w[c][2];const N=(0,FloatArray/* newFloatArray */.oe)(3*m);for(let c=0;c<m;c++)N[3*c]=g[c][0],N[3*c+1]=g[c][1],N[3*c+2]=g[c][2];return[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(y,M,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(N,I,3,!0)]]}function at(t,n,e,o,s,r=!0,l=!0){return new Geometry/* Geometry */.V(t,ct(n,e,o,s,r,l))}function ft(n,o,h,p,i,w,g){const m=i?(0,vec3f32/* clone */.o8)(i):(0,vec3f32/* fromValues */.fA)(1,0,0),A=w?(0,vec3f32/* clone */.o8)(w):(0,vec3f32/* fromValues */.fA)(0,0,0);g??=!0;const M=(0,vec3f32/* create */.vt)();(0,vec32.n)(M,m);const I=(0,vec3f32/* create */.vt)();(0,vec32.g)(I,M,Math.abs(o));const y=(0,vec3f32/* create */.vt)();(0,vec32.g)(y,I,-.5),(0,vec32.f)(y,y,A);const N=(0,vec3f32/* fromValues */.fA)(0,1,0);Math.abs(1-(0,vec32.e)(M,N))<.2&&(0,vec32.i)(N,0,0,1);const P=(0,vec3f32/* create */.vt)();(0,vec32.h)(P,M,N),(0,vec32.n)(P,P),(0,vec32.h)(N,P,M);const S=2*p+(g?2:0),b=p+(g?2:0),d=(0,FloatArray/* newFloatArray */.oe)(3*S),j=(0,FloatArray/* newFloatArray */.oe)(3*b),E=(0,FloatArray/* newFloatArray */.oe)(2*S),U=new Array(3*p*(g?4:2)),V=new Array(3*p*(g?4:2));g&&(d[3*(S-2)]=y[0],d[3*(S-2)+1]=y[1],d[3*(S-2)+2]=y[2],E[2*(S-2)]=0,E[2*(S-2)+1]=0,d[3*(S-1)]=d[3*(S-2)]+I[0],d[3*(S-1)+1]=d[3*(S-2)+1]+I[1],d[3*(S-1)+2]=d[3*(S-2)+2]+I[2],E[2*(S-1)]=1,E[2*(S-1)+1]=1,j[3*(b-2)]=-M[0],j[3*(b-2)+1]=-M[1],j[3*(b-2)+2]=-M[2],j[3*(b-1)]=M[0],j[3*(b-1)+1]=M[1],j[3*(b-1)+2]=M[2]);const v=(t,n,e)=>{U[t]=n,V[t]=e};let x=0;const F=(0,vec3f32/* create */.vt)(),C=(0,vec3f32/* create */.vt)();for(let t=0;t<p;t++){const n=t*(2*Math.PI/p);(0,vec32.g)(F,N,Math.sin(n)),(0,vec32.g)(C,P,Math.cos(n)),(0,vec32.f)(F,F,C),j[3*t]=F[0],j[3*t+1]=F[1],j[3*t+2]=F[2],(0,vec32.g)(F,F,h),(0,vec32.f)(F,F,y),d[3*t]=F[0],d[3*t+1]=F[1],d[3*t+2]=F[2],E[2*t]=t/p,E[2*t+1]=0,d[3*(t+p)]=d[3*t]+I[0],d[3*(t+p)+1]=d[3*t+1]+I[1],d[3*(t+p)+2]=d[3*t+2]+I[2],E[2*(t+p)]=t/p,E[2*t+1]=1;const e=(t+1)%p;v(x++,t,t),v(x++,t+p,t),v(x++,e,e),v(x++,e,e),v(x++,t+p,t),v(x++,e+p,e)}if(g){for(let t=0;t<p;t++){const n=(t+1)%p;v(x++,S-2,b-2),v(x++,t,b-2),v(x++,n,b-2)}for(let t=0;t<p;t++){const n=(t+1)%p;v(x++,t+p,b-1),v(x++,S-1,b-1),v(x++,n+p,b-1)}}const G=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(d,U,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(j,V,3,!0)],[VertexAttribute/* VertexAttribute */.r.UV0,new Attribute/* Attribute */.n(E,U,2,!0)]];return new Geometry/* Geometry */.V(n,G)}function pt(t,n,e,o,s,r){o=o||10,s=null==s||s,(0,Util/* assert */.vA)(n.length>1);const l=[[0,0,0]],h=[],u=[];for(let c=0;c<o;c++){h.push([0,-c-1,-(c+1)%o-1]);const t=c/o*2*Math.PI;u.push([Math.cos(t)*e,Math.sin(t)*e])}return it(t,u,n,l,h,s,r)}function it(h,u,a,f,i,w,g=(0,vec3f32/* fromValues */.fA)(0,0,0)){const m=u.length,A=(0,FloatArray/* newFloatArray */.oe)(a.length*m*3+(6*f.length||0)),M=(0,FloatArray/* newFloatArray */.oe)(a.length*m*3+(f?6:0)),S=new Array,b=new Array;let d=0,j=0;const E=(0,vec3f64/* create */.vt)(),U=(0,vec3f64/* create */.vt)(),V=(0,vec3f64/* create */.vt)(),v=(0,vec3f64/* create */.vt)(),x=(0,vec3f64/* create */.vt)(),F=(0,vec3f64/* create */.vt)(),C=(0,vec3f64/* create */.vt)(),G=(0,vec3f64/* create */.vt)(),D=(0,vec3f64/* create */.vt)(),q=(0,vec3f64/* create */.vt)(),z=(0,vec3f64/* create */.vt)(),B=(0,vec3f64/* create */.vt)(),k=(0,vec3f64/* create */.vt)(),Z=(0,plane/* create */.vt)();(0,vec32.i)(D,0,1,0),(0,vec32.d)(U,a[1],a[0]),(0,vec32.n)(U,U),w?((0,vec32.f)(G,a[0],g),(0,vec32.n)(V,G)):(0,vec32.i)(V,0,0,1),Mt(U,V,D,D,x,V,It),(0,vec32.c)(v,V),(0,vec32.c)(B,x);for(let t=0;t<f.length;t++)(0,vec32.g)(F,x,f[t][0]),(0,vec32.g)(G,V,f[t][2]),(0,vec32.f)(F,F,G),(0,vec32.f)(F,F,a[0]),A[d++]=F[0],A[d++]=F[1],A[d++]=F[2];M[j++]=-U[0],M[j++]=-U[1],M[j++]=-U[2];for(let t=0;t<i.length;t++)S.push(i[t][0]>0?i[t][0]:-i[t][0]-1+f.length),S.push(i[t][1]>0?i[t][1]:-i[t][1]-1+f.length),S.push(i[t][2]>0?i[t][2]:-i[t][2]-1+f.length),b.push(0),b.push(0),b.push(0);let H=f.length;const J=f.length-1;for(let t=0;t<a.length;t++){let h=!1;if(t>0){(0,vec32.c)(E,U),t<a.length-1?((0,vec32.d)(U,a[t+1],a[t]),(0,vec32.n)(U,U)):h=!0,(0,vec32.f)(q,E,U),(0,vec32.n)(q,q),(0,vec32.f)(z,a[t-1],v),(0,plane/* fromPositionAndNormal */.O_)(a[t],q,Z);(0,plane/* intersectRay */.Ui)(Z,(0,ray/* wrap */.LV)(z,E),G)?((0,vec32.d)(G,G,a[t]),(0,vec32.n)(V,G),(0,vec32.h)(x,q,V),(0,vec32.n)(x,x)):Mt(q,v,B,D,x,V,It),(0,vec32.c)(v,V),(0,vec32.c)(B,x)}w&&((0,vec32.f)(G,a[t],g),(0,vec32.n)(k,G));for(let n=0;n<m;n++)if((0,vec32.g)(F,x,u[n][0]),(0,vec32.g)(G,V,u[n][1]),(0,vec32.f)(F,F,G),(0,vec32.n)(C,F),M[j++]=C[0],M[j++]=C[1],M[j++]=C[2],(0,vec32.f)(F,F,a[t]),A[d++]=F[0],A[d++]=F[1],A[d++]=F[2],!h){const t=(n+1)%m;S.push(H+n),S.push(H+m+n),S.push(H+t),S.push(H+t),S.push(H+m+n),S.push(H+m+t);for(let n=0;n<6;n++){const t=S.length-6;b.push(S[t+n]-J)}}H+=m}const K=a[a.length-1];for(let t=0;t<f.length;t++)(0,vec32.g)(F,x,f[t][0]),(0,vec32.g)(G,V,f[t][1]),(0,vec32.f)(F,F,G),(0,vec32.f)(F,F,K),A[d++]=F[0],A[d++]=F[1],A[d++]=F[2];const Q=j/3;M[j++]=U[0],M[j++]=U[1],M[j++]=U[2];const W=H-m;for(let t=0;t<i.length;t++)S.push(i[t][0]>=0?H+i[t][0]:-i[t][0]-1+W),S.push(i[t][2]>=0?H+i[t][2]:-i[t][2]-1+W),S.push(i[t][1]>=0?H+i[t][1]:-i[t][1]-1+W),b.push(Q),b.push(Q),b.push(Q);const X=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(A,S,3,!0)],[VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(M,b,3,!0)]];return new Geometry/* Geometry */.V(h,X)}function wt(t,n,e,o){(0,Util/* assert */.vA)(n.length>1,"createPolylineGeometry(): polyline needs at least 2 points"),(0,Util/* assert */.vA)(3===n[0].length,"createPolylineGeometry(): malformed vertex"),(0,Util/* assert */.vA)(null==e||e.length===n.length,"createPolylineGeometry: need same number of points and normals"),(0,Util/* assert */.vA)(null==e||3===e[0].length,"createPolylineGeometry(): malformed normal");const s=(0,DoubleArray/* newDoubleArray */.jh)(3*n.length),r=new Array(2*(n.length-1));let l=0,h=0;for(let c=0;c<n.length;c++){for(let t=0;t<3;t++)s[l++]=n[c][t];c>0&&(r[h++]=c-1,r[h++]=c)}const u=[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(s,r,3,!0)]];if(e){const t=(0,FloatArray/* newFloatArray */.oe)(3*e.length);let o=0;for(let s=0;s<n.length;s++)for(let n=0;n<3;n++)t[o++]=e[s][n];u.push([VertexAttribute/* VertexAttribute */.r.NORMAL,new Attribute/* Attribute */.n(t,r,3,!0)])}return o&&u.push([VertexAttribute/* VertexAttribute */.r.COLOR,new Attribute/* Attribute */.n(o,(0,Indices/* getContinuousIndexArray */.tM)(o.length/4),4)]),new Geometry/* Geometry */.V(t,u,null,IntersectableGeometry/* GeometryType */.d.Line)}function gt(t,n,e,o,s,r=0){const l=new Array(18),h=[[-e,r,s/2],[o,r,s/2],[0,n+r,s/2],[-e,r,-s/2],[o,r,-s/2],[0,n+r,-s/2]],u=[0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5];for(let c=0;c<6;c++)l[3*c]=h[c][0],l[3*c+1]=h[c][1],l[3*c+2]=h[c][2];return new Geometry/* Geometry */.V(t,[[VertexAttribute/* VertexAttribute */.r.POSITION,new Attribute/* Attribute */.n(l,u,3,!0)]])}function Ot(n,e){const o=n.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION).data;for(let s=0;s<o.length;s+=3){const n=o[s],r=o[s+1],l=o[s+2];(0,vec32.i)(yt,n,r,l),(0,vec32.t)(yt,yt,e),o[s]=yt[0],o[s+1]=yt[1],o[s+2]=yt[2]}}function mt(t,n=t){const e=t.attributes,o=e.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,s=e.get(VertexAttribute/* VertexAttribute */.r.NORMAL).data;if(s){const t=n.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.NORMAL).data;for(let n=0;n<s.length;n+=3){const e=s[n+1];t[n+1]=-s[n+2],t[n+2]=e}}if(o){const t=n.getMutableAttribute(VertexAttribute/* VertexAttribute */.r.POSITION).data;for(let n=0;n<o.length;n+=3){const e=o[n+1];t[n+1]=-o[n+2],t[n+2]=e}}}function At(t,n,o,s,r){return!(Math.abs((0,vec32.e)(n,t))>r)&&((0,vec32.h)(o,t,n),(0,vec32.n)(o,o),(0,vec32.h)(s,o,t),(0,vec32.n)(s,s),!0)}function Mt(t,n,e,o,s,r,l){return At(t,n,s,r,l)||At(t,e,s,r,l)||At(t,o,s,r,l)}const It=.99619469809,yt=(0,vec3f64/* create */.vt)();


/***/ }),

/***/ 24734:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(65061);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(28152);
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(84119);
/* harmony import */ var _Attribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(70807);
/* harmony import */ var _Geometry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59816);
/* harmony import */ var _LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10545);
/* harmony import */ var _Object3D_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(55103);
/* harmony import */ var _testUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(53834);
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(54671);
/* harmony import */ var _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(96824);
/* harmony import */ var _IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(27514);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class l{constructor(r){this._originSR=r,this._rootOriginId="root/"+(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_14__/* .generateUID */ .c)(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const i=this._origins.get(this._rootOriginId);if(null==i){const r=_testUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .gridLocalOriginFactory */ .Q.rootOrigin;if(null!=r)return this._origins.set(this._rootOriginId,(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(r[0],r[1],r[2],this._rootOriginId)),this.getOrigin(t);const i=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,i),i}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),h=`${s}/${e}/${n}`;let c=this._origins.get(h);const g=.5*o;if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.d)(_,t,i.vec3),_[0]=Math.abs(_[0]),_[1]=Math.abs(_[1]),_[2]=Math.abs(_[2]),_[0]<g&&_[1]<g&&_[2]<g){if(c){const i=Math.max(..._);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.d)(_,t,c.vec3),_[0]=Math.abs(_[0]),_[1]=Math.abs(_[1]),_[2]=Math.abs(_[2]);if(Math.max(..._)<i)return c}return i}return c||(c=(0,_LocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_7__/* .fromValues */ .f)(s*o,e*o,n*o,h),this._origins.set(h,c)),c}_drawOriginBox(t,r=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,1,0,1)){const i=window.view,a=i.stage,m=r.toString();if(!this._objects.has(m)){this._material=new _materials_RibbonLineMaterial_js__WEBPACK_IMPORTED_MODULE_12__/* .RibbonLineMaterial */ .W({width:2,color:r});const t=new _WebGLLayer_js__WEBPACK_IMPORTED_MODULE_11__/* .WebGLLayer */ .x(a,{pickable:!1}),i=new _Object3D_js__WEBPACK_IMPORTED_MODULE_8__/* .Object3D */ .B({castShadow:!1});t.add(i),this._objects.set(m,i)}const l=this._objects.get(m),_=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],p=_.length,j=new Array(3*p),b=new Array,u=.5*this._gridSize;for(let o=0;o<p;o++)j[3*o]=t[0]+(1&_[o]?u:-u),j[3*o+1]=t[1]+(2&_[o]?u:-u),j[3*o+2]=t[2]+(4&_[o]?u:-u),o>0&&b.push(o-1,o);(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_4__.projectBuffer)(j,this._originSR,0,j,i.renderSpatialReference,0,p);const M=new _Geometry_js__WEBPACK_IMPORTED_MODULE_6__/* .Geometry */ .V(this._material,[[_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexAttribute */ .r.POSITION,new _Attribute_js__WEBPACK_IMPORTED_MODULE_5__/* .Attribute */ .n(j,b,3,!0)]],null,_IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_13__/* .GeometryType */ .d.Line);l.addGeometry(M)}get test(){}}const _=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)();


/***/ }),

/***/ 94456:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  rQ: () => (/* binding */ c),
  lx: () => (/* binding */ i)
});

// UNUSED EXPORTS: isHUDIntersectorResult

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorResult.js
var IntersectorResult = __webpack_require__(69798);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorType.js
var IntersectorType = __webpack_require__(68427);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ObjectTarget.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t,e,i){this.object=t,this.geometryId=e,this.primitiveIndex=i}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/HUDIntersectorResult.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c extends IntersectorResult/* IntersectorResult */.i{constructor(){super(...arguments),this.intersector=IntersectorType/* IntersectorType */.d.HUD}}class i extends t{constructor(r,e){super(r.object,r.geometryId,r.primitiveIndex),this.center=(0,vec3f64/* clone */.o8)(e)}}function n(t){return e(t)&&t.intersector===s.HUD&&!!t.target&&"center"in t.target}


/***/ }),

/***/ 27514:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n;!function(n){n[n.Mesh=0]="Mesh",n[n.Point=1]="Point",n[n.Line=2]="Line"}(n||(n={}));


/***/ }),

/***/ 74515:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ g)
/* harmony export */ });
/* unused harmony export defaultTolerance */
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10151);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10714);
/* harmony import */ var _webgl_RenderCamera_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(99369);
/* harmony import */ var _HUDIntersectorResult_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(94456);
/* harmony import */ var _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22531);
/* harmony import */ var _IntersectorResult_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(69798);
/* harmony import */ var _IntersectorType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(68427);
/* harmony import */ var _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(689);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const _=1e-5;class g{constructor(t){this.options=new _IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .IntersectorOptions */ .H,this._results=new O,this.transform=new _verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .IntersectorTransform */ .dg,this.camera=new _webgl_RenderCamera_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A,this.tolerance=_,this.verticalOffset=null,this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this._rayEnd=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),this._rayBeginTransformed=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),this._rayEndTransformed=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),this.viewingMode=t??_ViewingMode_js__WEBPACK_IMPORTED_MODULE_3__/* .ViewingMode */ .RT.Global}get results(){return this._results}get ray(){return this._ray}get rayBegin(){return this._ray.origin}get rayEnd(){return this._rayEnd}reset(t,r,s){this.resetWithRay((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .fromPoints */ .Cr)(t,r,this._ray),s)}resetWithRay(r,s){this.camera=s,r!==this._ray&&(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .copy */ .C)(r,this._ray),0!==this.options.verticalOffset?this.viewingMode===_ViewingMode_js__WEBPACK_IMPORTED_MODULE_3__/* .ViewingMode */ .RT.Local?this._ray.origin[2]-=this.options.verticalOffset:this.verticalOffset=this.options.verticalOffset:this.verticalOffset=null,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.f)(this._rayEnd,this._ray.origin,this._ray.direction),this._results.init(this._ray)}intersect(t=null,r,s,i,e){this.point=r,this.filterPredicate=i,this.tolerance=s??_;const n=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getVerticalOffsetObject3D */ .ou)(this.verticalOffset);if(t&&t.length>0){const r=e?t=>{e(t)&&this.intersectObject(t)}:t=>{this.intersectObject(t)};for(const s of t){const t=s.getSpatialQueryAccelerator?.();null!=t?(null!=n?t.forEachAlongRayWithVerticalOffset(this._ray.origin,this._ray.direction,r,n):t.forEachAlongRay(this._ray.origin,this._ray.direction,r),this.options.selectionMode&&this.options.hud&&t.forEachDegenerateObject(r)):s.objects.forEach((t=>r(t)))}}this.sortResults()}intersectObject(t){const s=t.geometries;if(!s)return;const i=t.effectiveTransformation,e=(0,_verticalOffsetUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getVerticalOffsetObject3D */ .ou)(this.verticalOffset);for(const n of s){if(!n.visible)continue;const{material:s,id:a}=n;if(!s.visible)continue;this.transform.setAndInvalidateLazyTransforms(i,n.transformation),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.t)(this._rayBeginTransformed,this.rayBegin,this.transform.inverse),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.t)(this._rayEndTransformed,this.rayEnd,this.transform.inverse);const o=this.transform.transform;null!=e&&(e.objectTransform=this.transform),s.intersect(n,this.transform.transform,this,this._rayBeginTransformed,this._rayEndTransformed,((r,s,i,e)=>this.handleObjectIntersection({object:t,geometryId:a,primitiveIndex:i},r,s,o,e)))}}handleObjectIntersection(t,r,s,i,e){if(r<0||null!=this.filterPredicate&&!this.filterPredicate(this._ray.origin,this._rayEnd,r))return;const n=e?this._results.hud:this._results;t=e?new _HUDIntersectorResult_js__WEBPACK_IMPORTED_MODULE_5__/* .HUDTarget */ .lx(t,e):t;const a=e?i=>i.set(_IntersectorType_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .d.HUD,t,r,s):e=>e.set(_IntersectorType_js__WEBPACK_IMPORTED_MODULE_8__/* .IntersectorType */ .d.OBJECT,t,r,s,i);if((null==n.min.distance||r<n.min.distance)&&a(n.min),this.options.store!==_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .StoreResults */ .o.MIN&&(null==n.max.distance||r>n.max.distance)&&a(n.max),this.options.store===_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_6__/* .StoreResults */ .o.ALL)if(e){const t=new _HUDIntersectorResult_js__WEBPACK_IMPORTED_MODULE_5__/* .HUDIntersectorResult */ .rQ(this._ray);a(t),this._results.hud.all.push(t)}else{const t=new _IntersectorResult_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorResult */ .i(this._ray);a(t),this._results.all.push(t)}}sortResults(t=this._results.all){t.sort(((t,r)=>t.distance!==r.distance?(t.distance??0)-(r.distance??0):t.drapedLayerOrder!==r.drapedLayerOrder?p(t.drapedLayerOrder,r.drapedLayerOrder):p(t.renderPriority,r.renderPriority)))}}function p(t,r){return(r??-Number.MAX_VALUE)-(t??-Number.MAX_VALUE)}class O{constructor(){this.min=new _IntersectorResult_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorResult */ .i((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()),this.max=new _IntersectorResult_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorResult */ .i((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()),this.hud={min:new _HUDIntersectorResult_js__WEBPACK_IMPORTED_MODULE_5__/* .HUDIntersectorResult */ .rQ((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()),max:new _HUDIntersectorResult_js__WEBPACK_IMPORTED_MODULE_5__/* .HUDIntersectorResult */ .rQ((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()),all:new Array},this.ground=new _IntersectorResult_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorResult */ .i((0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()),this.all=[]}init(t){this.min.init(t),this.max.init(t),this.ground.init(t),this.all.length=0,this.hud.min.init(t),this.hud.max.init(t),this.hud.all.length=0}}


/***/ }),

/***/ 22531:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ e),
/* harmony export */   o: () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(){this.verticalOffset=0,this.selectionMode=!1,this.hud=!0,this.selectOpaqueTerrainOnly=!0,this.invisibleTerrain=!1,this.backfacesTerrain=!0,this.isFiltered=!1,this.filteredLayerViewUids=[],this.store=i.ALL,this.normalRequired=!0,this.excludeLabels=!1}}var i;!function(e){e[e.MIN=0]="MIN",e[e.MINMAX=1]="MINMAX",e[e.ALL=2]="ALL"}(i||(i={}));


/***/ }),

/***/ 69798:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export isValidIntersectorResult */
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58359);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28152);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(10151);
/* harmony import */ var _IntersectorType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(68427);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class p{get ray(){return this._ray}get distanceInRenderSpace(){return null==this.distance?null:((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.g)(u,this.ray.direction,this.distance),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.l)(u))}withinDistance(t){return!!g(this)&&this.distanceInRenderSpace<=t}getIntersectionPoint(t){return!!g(this)&&((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.g)(u,this.ray.direction,this.distance),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(t,this.ray.origin,u),!0)}getTransformedNormal(t){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(j,this.normal),j[3]=0,(0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__.t)(j,j,this.transformation),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,j),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.n)(t,t)}constructor(t){this.intersector=_IntersectorType_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorType */ .d.OBJECT,this.normal=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),this.transformation=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),this._ray=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.init(t)}init(t){this.distance=this.target=this.drapedLayerOrder=this.renderPriority=null,this.intersector=_IntersectorType_js__WEBPACK_IMPORTED_MODULE_7__/* .IntersectorType */ .d.OBJECT,(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(t,this._ray)}set(r,s,e,a,o,c,m){this.intersector=r,this.distance=e,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,a??_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .UNIT_Z */ .Cb),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(this.transformation,o??_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .IDENTITY */ .zK),this.target=s,this.drapedLayerOrder=c,this.renderPriority=m}copy(r){(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_6__/* .copy */ .C)(r.ray,this._ray),this.intersector=r.intersector,this.distance=r.distance,this.target=r.target,this.drapedLayerOrder=r.drapedLayerOrder,this.renderPriority=r.renderPriority,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(this.normal,r.normal),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(this.transformation,r.transformation)}}function g(t){return null!=t?.distance}const u=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),j=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)();


/***/ }),

/***/ 68427:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ E)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var E;!function(E){E[E.OBJECT=0]="OBJECT",E[E.HUD=1]="HUD",E[E.TERRAIN=2]="TERRAIN",E[E.OVERLAY=3]="OVERLAY",E[E.I3S=4]="I3S",E[E.PCL=5]="PCL",E[E.LOD=6]="LOD",E[E.VOXEL=7]="VOXEL",E[E.TILES3D=8]="TILES3D"}(E||(E={}));


/***/ }),

/***/ 10545:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export LocalOrigin */
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(r,s){this.vec3=r,this.id=s}}function t(t,o,c,e){return new s((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(t,o,c),e)}


/***/ }),

/***/ 45722:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   im: () => (/* binding */ n),
/* harmony export */   m$: () => (/* binding */ o),
/* harmony export */   qA: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(65061);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13148);
/* harmony import */ var _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9319);
/* harmony import */ var _materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(29117);
/* harmony import */ var _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22005);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n{constructor(r,i){this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_5__/* .generateUID */ .c)(),this.supportsEdges=!1,this.vertexAttributeLocations=_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_1__/* .Default3D */ .D,this._renderPriority=0,this._parameters=new i,(0,_materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .updateParameters */ .MB)(this._parameters,r),this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(e){return!1}setParameters(e,r=!0){(0,_materials_internal_MaterialUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .updateParameters */ .MB)(this._parameters,e)&&(this.validateParameters(this._parameters),r&&this._parametersChanged())}validateParameters(e){}shouldRender(e){return this.visible&&this.isVisibleForOutput(e.output)&&(!this.parameters.isDecoration||e.bind.decorations)&&0!==(this.parameters.renderOccluded&e.renderOccludedMask)}isVisibleForOutput(e){return!0}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this._parametersChanged())}_parametersChanged(){this.repository?.materialChanged(this)}get renderOccludedFlags(){return this.visible?this.parameters.renderOccluded:o.None}get hasEmissions(){return!1}getConfiguration(e,t,s=new _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .DefaultTechniqueConfiguration */ .E){return s.output=e,s.hasHighlightMixTexture=e===_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.Highlight&&null!=t.highlightMixTexture,s}}var o;!function(e){e[e.None=0]="None",e[e.Occlude=1]="Occlude",e[e.Transparent=2]="Transparent",e[e.OccludeAndTransparent=4]="OccludeAndTransparent",e[e.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil",e[e.Opaque=16]="Opaque"}(o||(o={}));class d extends _webgl_NoParameters_js__WEBPACK_IMPORTED_MODULE_4__/* .NoParameters */ .Y{constructor(){super(...arguments),this.renderOccluded=o.Occlude,this.isDecoration=!1}}


/***/ }),

/***/ 23183:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ I),
/* harmony export */   q: () => (/* binding */ E)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var E,I;!function(E){E[E.ADD=0]="ADD",E[E.UPDATE=1]="UPDATE",E[E.REMOVE=2]="REMOVE"}(E||(E={})),function(E){E[E.NONE=0]="NONE",E[E.VISIBILITY=1]="VISIBILITY",E[E.GEOMETRY=2]="GEOMETRY",E[E.TRANSFORMATION=4]="TRANSFORMATION",E[E.HIGHLIGHT=8]="HIGHLIGHT",E[E.OCCLUDEE=16]="OCCLUDEE"}(I||(I={}));


/***/ }),

/***/ 69338:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var o;!function(o){o[o.NONE=0]="NONE",o[o.ColorAlpha=1]="ColorAlpha",o[o.FrontFace=2]="FrontFace",o[o.COUNT=3]="COUNT"}(o||(o={}));


/***/ }),

/***/ 55103:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ A)
/* harmony export */ });
/* unused harmony export BoundingVolume */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(65061);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58359);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(31803);
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(72699);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(91013);
/* harmony import */ var _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(22775);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(58947);
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(50645);
/* harmony import */ var _materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(29688);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class A{constructor(i={}){this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_12__/* .generateUID */ .c)(),this._highlightIds=new Set,this._shaderTransformation=null,this._visible=!0,this.castShadow=i.castShadow??!0,this.usesVerticalDistanceToGround=i.usesVerticalDistanceToGround??!1,this.graphicUid=i.graphicUid,this.layerViewUid=i.layerViewUid,i.isElevationSource&&(this.lastValidElevationBB=new M),this._geometries=i.geometries?Array.from(i.geometries):new Array}dispose(){this._geometries.length=0}get layer(){return this._layer}set layer(t){(0,_Util_js__WEBPACK_IMPORTED_MODULE_9__/* .assert */ .vA)(null==this._layer||null==t,"Object3D can only be added to a single Layer"),this._layer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t);for(const i of this._highlightIds)t.addHighlight(i);this._emit("geometryAdded",{object:this,geometry:t}),this._highlightIds.size&&this._emit("highlightChanged",this),this._invalidateBoundingVolume()}removeGeometry(t){const i=this._geometries.splice(t,1)[0];if(i){for(const t of this._highlightIds)i.removeHighlight(t);this._emit("geometryRemoved",{object:this,geometry:i}),this._highlightIds.size&&this._emit("highlightChanged",this),this._invalidateBoundingVolume()}}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,i,e=!1){this._emit("attributesChanged",{object:this,geometry:t,attribute:i,sync:e}),(0,_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_10__/* .affectsGeometry */ .b)(i)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const t=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_8__/* .Object3DOccludeeStateID */ .p;for(const i of this._geometries)i.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_11__/* .addObject3DStateID */ .Ci)(i.occludees,t);return this._emit("occlusionChanged",this),t}removeOcclude(t){for(const i of this._geometries)i.occludees=(0,_materials_renderers_utils_js__WEBPACK_IMPORTED_MODULE_11__/* .removeObject3DStateID */ .PC)(i.occludees,t);this._emit("occlusionChanged",this)}highlight(t){const i=new _Object3DStateID_js__WEBPACK_IMPORTED_MODULE_8__/* .Object3DHighlightStateID */ .h(t);for(const e of this._geometries)e.addHighlight(i);return this._emit("highlightChanged",this),this._highlightIds.add(i),i}removeHighlight(t){this._highlightIds.delete(t);for(const i of this._geometries)i.removeHighlight(t);this._emit("highlightChanged",this)}removeStateID(t){t.channel===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .Object3DState */ .Mg.Highlight?this.removeHighlight(t):this.removeOcclude(t)}getCombinedStaticTransformation(t,e){return (0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .multiply */ .lw)(e,this.transformation,t.transformation)}getCombinedShaderTransformation(t,e=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()){return (0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .multiply */ .lw)(e,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new O,this._validateBoundingVolume(this._bvWorldSpace,w.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new O,this._validateBoundingVolume(this._bvObjectSpace,w.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,i){const e=i===w.ObjectSpace;for(const s of this._geometries){const i=s.boundingInfo;i&&T(i,t,e?s.transformation:this.getCombinedShaderTransformation(s))}(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.m)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.a)(t.bounds),t.min,t.max,.5);for(const s of this._geometries){const i=s.boundingInfo;if(null==i)continue;const o=e?s.transformation:this.getCombinedShaderTransformation(s),r=(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .maxScale */ .hG)(o);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(I,i.center,o);const a=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.j)(I,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.a)(t.bounds)),m=i.radius*r;t.bounds[3]=Math.max(t.bounds[3],a+m)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this.layer&&t&&this.layer.notifyObjectBBChanged(this,t)}_emit(t,i){this.layer?.events.emit(t,i)}get geometries(){return this._geometries}get transformation(){return this._transformation??_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .IDENTITY */ .zK}set transformation(t){this._transformation=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .copy */ .C)(this._transformation??(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),t),this._invalidateBoundingVolume(),this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(t){this._shaderTransformation=t?(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .copy */ .C)(this._shaderTransformation??(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),t):null,this._invalidateBoundingVolume(),this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}get test(){}}class M{constructor(){this.min=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .fromValues */ .fA)(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class O extends M{constructor(){super(...arguments),this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_5__.c)()}}function T(t,i,e){const o=t.bbMin,r=t.bbMax;if((0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_1__/* .hasIdentityRotation */ .tZ)(e)){const t=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.i)(C,e[12],e[13],e[14]);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)(B,o,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)(U,r,t);for(let e=0;e<3;++e)i.min[e]=Math.min(i.min[e],B[e]),i.max[e]=Math.max(i.max[e],U[e])}else if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(B,o,e),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.q)(o,r))for(let s=0;s<3;++s)i.min[s]=Math.min(i.min[s],B[s]),i.max[s]=Math.max(i.max[s],B[s]);else{(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(U,r,e);for(let t=0;t<3;++t)i.min[t]=Math.min(i.min[t],B[t],U[t]),i.max[t]=Math.max(i.max[t],B[t],U[t]);for(let t=0;t<3;++t){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(B,o),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)(U,r),B[t]=r[t],U[t]=o[t],(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(B,B,e),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.t)(U,U,e);for(let t=0;t<3;++t)i.min[t]=Math.min(i.min[t],B[t],U[t]),i.max[t]=Math.max(i.max[t],B[t],U[t])}}}const C=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),B=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),U=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),I=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)();var w;!function(t){t[t.WorldSpace=0]="WorldSpace",t[t.ObjectSpace=1]="ObjectSpace"}(w||(w={}));


/***/ }),

/***/ 22775:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ e),
/* harmony export */   p: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(65061);
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c{constructor(){this.uid=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_1__/* .generateUID */ .c)()}}class e extends c{constructor(s){super(),this.highlightName=s,this.channel=_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .Object3DState */ .Mg.Highlight}}class r extends c{constructor(){super(...arguments),this.channel=_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .Object3DState */ .Mg.MaskOccludee}}


/***/ }),

/***/ 91337:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(90086);
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63678);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(94982);
/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(10151);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(31803);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(58947);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class b{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,e){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new g,this._objectCount=0,e&&(void 0!==e.maximumObjectsPerNode&&(this._maximumObjectsPerNode=e.maximumObjectsPerNode),void 0!==e.maximumDepth&&(this._maximumDepth=e.maximumDepth))}destroy(){this._degenerateObjects.clear(),g.clearPool(),y[0]=null,K.prune(),Q.prune()}add(t){const e=Array.from(t);this._grow(e);const n=g.acquire();for(const o of e)++this._objectCount,this._isDegenerate(o)?this._degenerateObjects.add(o):(n.init(this._root),this._add(o,n));g.release(n)}remove(t,e=null){this._objectCount-=t.length;const n=g.acquire();for(const o of t){const t=e??(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.e)(this.objectToBoundingSphere(o),J);C(t[3])?(n.init(this._root),O(o,t,n)):this._degenerateObjects.delete(o)}g.release(n),this._shrink()}update(t,e){if(!C(e[3])&&this._isDegenerate(t))return;const n=k(t);this.remove(n,e),this.add(n)}forEachAlongRay(t,e,n){const o=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__/* .wrap */ .LV)(t,e);S(this._root,(t=>{if(!T(o,t))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObject(o,t)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObject(o,t)&&n(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,e,n,o){const i=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_5__/* .wrap */ .LV)(t,e);S(this._root,(t=>{if(!z(i,t,o))return!1;const e=t.node;return e.terminals.forAll((t=>{this._intersectsObjectWithOffset(i,t,o)&&n(t)})),null!==e.residents&&e.residents.forAll((t=>{this._intersectsObjectWithOffset(i,t,o)&&n(t)})),!0}))}forEach(t){S(this._root,(e=>{const n=e.node;return n.terminals.forAll(t),null!==n.residents&&n.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,e,n,o=()=>!0,i=1/0){let h=1/0,a=1/0,d=null;const u=F(t,e),c=r=>{if(--i,!o(r))return;const s=this.objectToBoundingSphere(r);if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(n,s))return;const u=v(t,e,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(s)),c=u-s[3],f=u+s[3];c<h&&(h=c,a=f,d=r)};return j(this._root,(o=>{if(i<=0||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(n,o.bounds))return!1;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.g)(I,u,o.halfSize),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(I,I,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(o.bounds));if(v(t,e,I)>a)return!1;const h=o.node;return h.terminals.forAll((t=>c(t))),null!==h.residents&&h.residents.forAll((t=>c(t))),!0}),t,e),d}forEachInDepthRange(t,e,n,o,i,h,a){let d=-1/0,u=1/0;const c={setRange:t=>{n===b.DepthOrder.FRONT_TO_BACK?(d=Math.max(d,t.near),u=Math.min(u,t.far)):(d=Math.max(d,-t.far),u=Math.min(u,-t.near))}};c.setRange(o);const f=v(e,n,t),m=F(e,n),p=F(e,-n),g=t=>{if(!a(t))return;const o=this.objectToBoundingSphere(t),r=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(o),s=v(e,n,r)-f,m=s-o[3],p=s+o[3];m>u||p<d||!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(h,o)||i(t,c)};j(this._root,(t=>{if(!(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_4__/* .intersectsSphere */ .m7)(h,t.bounds))return!1;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.g)(I,m,t.halfSize),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(I,I,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t.bounds));if(v(e,n,I)-f>u)return!1;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.g)(I,p,t.halfSize),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(I,I,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t.bounds));if(v(e,n,I)-f<d)return!1;const o=t.node;return o.terminals.forAll((t=>g(t))),null!==o.residents&&o.residents.forAll((t=>g(t))),!0}),e,n)}forEachNode(t){S(this._root,(e=>t(e.node,e.bounds,e.halfSize,e.depth)))}forEachNeighbor(t,e){const n=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(e),o=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e),r=e=>{const r=this.objectToBoundingSphere(e),s=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(r),h=n+s;return!((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.s)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(r),o)-h*h<=0)||t(e)};let s=!0;const h=t=>{s&&(s=r(t))};S(this._root,(t=>{const e=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.g)(t.bounds),r=n+e;if((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.s)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t.bounds),o)-r*r>0)return!1;const a=t.node;return a.terminals.forAll(h),s&&null!==a.residents&&a.residents.forAll(h),s})),s&&this.forEachDegenerateObject(h)}_intersectsObject(t,e){const n=this.objectToBoundingSphere(e);return!(n[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.k)(n,t)}_intersectsObjectWithOffset(t,e,n){const o=this.objectToBoundingSphere(e);return!(o[3]>0)||(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.k)(n.applyToBoundingSphere(o),t)}_add(t,e){e.advanceTo(this.objectToBoundingSphere(t))?e.node.terminals.push(t):(e.node.residents.push(t),e.node.residents.length>this._maximumObjectsPerNode&&e.depth<this._maximumDepth&&this._split(e))}_split(t){const e=t.node.residents;t.node.residents=null;for(let n=0;n<e.length;n++){const o=g.acquire().init(t);this._add(e.at(n),o),g.release(o)}}_grow(t){if(D(t,(t=>this.objectToBoundingSphere(t)),W),C(W[3])&&!this._fitsInsideTree(W))if(N(this._root.node))(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.e)(W,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(W);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(W,t):this._growRootAsSubNode(t),g.release(t)}}_rebuildTree(t,e){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(V),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds)),V[3]=e.halfSize,D([t,V],(t=>t),G);const o=g.acquire().init(this._root);this._root.initFrom(null,G,G[3]),this._root.increaseHalfSize(1.25),S(o,(t=>(this.add(t.node.terminals.data),null!==t.node.residents&&this.add(t.node.residents.data),!0))),g.release(o)}_placingRootViolatesMaxDepth(t){const e=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let n=0;return S(this._root,(t=>(n=Math.max(n,t.depth),n+e<=this._maximumDepth))),n+e>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const e=t[3],n=t;let o=-1/0;const i=this._root.bounds,r=this._root.halfSize;for(let h=0;h<3;h++){const t=i[h]-r-(n[h]-e),s=n[h]+e-(i[h]+r),a=Math.max(0,Math.ceil(t/(2*r))),l=Math.max(0,Math.ceil(s/(2*r)))+1,d=2**Math.ceil(Math.log(a+l)*Math.LOG2E);o=Math.max(o,d),U[h].min=a,U[h].max=l}for(let h=0;h<3;h++){let t=U[h].min,e=U[h].max;const n=(o-(t+e))/2;t+=Math.ceil(n),e+=Math.floor(n);const s=i[h]-r-t*r*2;q[h]=s+(e+t)*r}const s=o*r;return q[3]=s*w,g.acquire().initFrom(null,q,s,0)}_growRootAsSubNode(t){const e=this._root.node;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(W),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(this._root.bounds)),W[3]=this._root.halfSize,this._root.init(t),t.advanceTo(W,null,!0),t.node.children=e.children,t.node.residents=e.residents,t.node.terminals=e.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const e=this._root.node.children;let n=0,o=0;for(;o<e.length&&null==t;)n=o++,t=e[n];for(;o<e.length;)if(e[o++])return-1;return n}_isDegenerate(t){return!C(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const e=this._root.bounds,n=this._root.halfSize;return t[3]<=n&&t[0]>=e[0]-n&&t[0]<=e[0]+n&&t[1]>=e[1]-n&&t[1]<=e[1]+n&&t[2]>=e[2]-n&&t[2]<=e[2]+n}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:e,_objectCount:n}=this,o=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:e,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:o}}}_nodeToJSON(t){const e=t.children.map((t=>t?this._nodeToJSON(t):null)),n=t.residents?.map((t=>this.objectToBoundingSphere(t))),o=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:e,residents:n,terminals:o}}static fromJSON(t){const e=new b((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return e._objectCount=t.objectCount,e._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),e}}class g{constructor(){this.bounds=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,e,n,o=this.depth){return this.node=null!=t?t:g.createEmptyNode(),e&&(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.e)(e,this.bounds),this.halfSize=n,this.depth=o,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*w}advance(t){let e=this.node.children[t];e||(e=g.createEmptyNode(),this.node.children[t]=e),this.node=e,this.halfSize/=2,this.depth++;const n=E[t];return this.bounds[0]+=n[0]*this.halfSize,this.bounds[1]+=n[1]*this.halfSize,this.bounds[2]+=n[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,e,n=!1){for(;;){if(this.isTerminalFor(t))return e&&e(this,-1),!0;if(this.isLeaf()){if(!n)return e&&e(this,-1),!1;this.node.residents=null}const o=this._childIndex(t);e&&e(this,o),this.advance(o)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const e=this.bounds;return(e[0]<t[0]?1:0)+(e[1]<t[1]?2:0)+(e[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0}),residents:new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0})}}static{this._pool=new _core_ObjectPool_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(g)}static acquire(){return g._pool.acquire()}static release(t){g._pool.release(t)}static clearPool(){g._pool.prune()}}function S(t,e){let n=g.acquire().init(t);const o=[n];for(;0!==o.length;){if(n=o.pop(),e(n)&&!n.isLeaf())for(let t=0;t<n.node.children.length;t++){n.node.children[t]&&o.push(g.acquire().init(n).advance(t))}g.release(n)}}function j(t,e,n,o=b.DepthOrder.FRONT_TO_BACK){let i=g.acquire().init(t);const r=[i];for(R(n,o,X);0!==r.length;){if(i=r.pop(),e(i)&&!i.isLeaf())for(let t=7;t>=0;--t){const e=X[t];i.node.children[e]&&r.push(g.acquire().init(i).advance(e))}g.release(i)}}function O(t,e,n){K.clear();const o=n.advanceTo(e,((t,e)=>{K.push(t.node),K.push(e)}))?n.node.terminals:n.node.residents;if(o.removeUnordered(t),0===o.length)for(let i=K.length-2;i>=0;i-=2){if(!x(K.data[i],K.data[i+1]))break}}function x(t,n){return n>=0&&(t.children[n]=null),!!N(t)&&(null===t.residents&&(t.residents=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({shrink:!0})),!0)}function T(t,e){return B((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),2*-e.halfSize,L),B((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),2*e.halfSize,H),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__/* .rayBoxTest */ .O_)(t.origin,t.direction,L,H)}function z(t,e,n){return B((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),2*-e.halfSize,L),B((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(e.bounds),2*e.halfSize,H),n.applyToMinMax(L,H),(0,_Util_js__WEBPACK_IMPORTED_MODULE_7__/* .rayBoxTest */ .O_)(t.origin,t.direction,L,H)}function N(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let e=0;e<t.children.length;e++)if(t.children[e])return!1;return!0}function M(t,e){t[0]=Math.min(t[0],e[0]-e[3]),t[1]=Math.min(t[1],e[1]-e[3]),t[2]=Math.min(t[2],e[2]-e[3])}function A(t,e){t[0]=Math.max(t[0],e[0]+e[3]),t[1]=Math.max(t[1],e[1]+e[3]),t[2]=Math.max(t[2],e[2]+e[3])}function B(t,e,n){n[0]=t[0]+e,n[1]=t[1]+e,n[2]=t[2]+e}function D(t,e,n){L[0]=1/0,L[1]=1/0,L[2]=1/0,H[0]=-1/0,H[1]=-1/0,H[2]=-1/0;for(const o of t){const t=e(o);C(t[3])&&(M(L,t),A(H,t))}(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.m)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(n),L,H,.5),n[3]=Math.max(H[0]-L[0],H[1]-L[1],H[2]-L[2])/2}function R(t,e,n){if(!Q.length)for(let o=0;o<8;++o)Q.push({index:0,distance:0});for(let o=0;o<8;++o){const n=E[o];Q.data[o].index=o,Q.data[o].distance=v(t,e,n)}Q.sort(((t,e)=>t.distance-e.distance));for(let o=0;o<8;++o)n[o]=Q.data[o].index}function F(t,e){let n,o=1/0;for(let i=0;i<8;++i){const r=v(t,e,P[i]);r<o&&(o=r,n=P[i])}return n}function v(t,e,n){return e*(t[0]*n[0]+t[1]*n[1]+t[2]*n[2])}function C(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}!function(t){var e;(e=t.DepthOrder||(t.DepthOrder={}))[e.FRONT_TO_BACK=1]="FRONT_TO_BACK",e[e.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(b||(b={}));const E=[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,-1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,-1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,1,1)],P=[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,-1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(-1,1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,-1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,-1,1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,1,-1),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(1,1,1)],w=Math.sqrt(3),y=[null];function k(t){return y[0]=t,y}const q=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),I=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),L=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),H=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),K=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,J=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),W=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),V=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),G=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),U=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],Q=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,X=[0,0,0,0,0,0,0,0];


/***/ }),

/***/ 1931:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K_: () => (/* binding */ E),
/* harmony export */   SE: () => (/* binding */ h),
/* harmony export */   Yf: () => (/* binding */ p),
/* harmony export */   ez: () => (/* binding */ i),
/* harmony export */   m6: () => (/* binding */ F),
/* harmony export */   mE: () => (/* binding */ m),
/* harmony export */   xt: () => (/* binding */ O),
/* harmony export */   z5: () => (/* binding */ N)
/* harmony export */ });
/* unused harmony export blendingColorAlpha */
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _OITPass_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69338);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const f=(0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_3__/* .separateBlendingParams */ .p3)(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ZERO,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA);function i(r){return r===_OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.FrontFace?null:f}function p(r){switch(r){case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.NONE:return _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_3__/* .unpremultipliedAlphaToPremultipliedAlpha */ .T8;case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.ColorAlpha:return f;case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.FrontFace:case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.COUNT:return null}}function N(r){if(r.draped)return null;switch(r.oitPass){case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.NONE:case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.FrontFace:return r.writeDepth?_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_3__/* .defaultDepthWrite */ .Uy:null;case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.ColorAlpha:case _OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.COUNT:return null}}const O=5e5,h={factor:-1,units:-2};function m({oitPass:r,enableOffset:t}){return t&&r===_OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.ColorAlpha?h:null}function E(r,n=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CompareFunction */ .MT.LESS){return r===_OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.NONE||r===_OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.FrontFace?n:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CompareFunction */ .MT.LEQUAL}function F(t,u){const a=(0,_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .isColorEmission */ .LG)(u);return t===_OITPass_js__WEBPACK_IMPORTED_MODULE_1__/* .OITPass */ .Y.ColorAlpha?a?{buffers:[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment0 */ .r6,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment1 */ .yI,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment2 */ .Fq]}:{buffers:[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment0 */ .r6,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment1 */ .yI]}:a?{buffers:[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment0 */ .r6,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorAttachment1 */ .yI]}:null}


/***/ }),

/***/ 6833:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JG: () => (/* binding */ h),
/* harmony export */   Uy: () => (/* binding */ p),
/* harmony export */   Wb: () => (/* binding */ C),
/* harmony export */   Z$: () => (/* binding */ x),
/* harmony export */   b_: () => (/* binding */ y)
/* harmony export */ });
/* unused harmony exports computeInvDir, computeInvDirFromDirection, computeNormalFromBarycentric, intersectAabbInvDirBefore, intersectRayTriangles, intersectRayTrianglesWithDisplacementWatertight, intersectRayTrianglesWithVerticalOffsetENUGlobal, triangleRayParallelTolerance */
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4675);
/* harmony import */ var _IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27514);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58947);
/* harmony import */ var _VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h{constructor(t=!1,n=!0){this.isVerticalRay=t,this.normalRequired=n}}const m=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)();function p(n,o,i,e,s,c){if(!n.visible)return;const r=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(S,e,i),f=(t,n,o)=>{c(t,o,n)},m=new h(!1,o.options.normalRequired);if(n.boundingInfo){(0,_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(n.type===_IntersectableGeometry_js__WEBPACK_IMPORTED_MODULE_3__/* .GeometryType */ .d.Mesh);const t=o.tolerance;b(n.boundingInfo,i,r,t,s,m,f)}else{const t=n.attributes.get(_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.POSITION),o=t.indices;q(i,r,0,o.length/3,o,t.data,t.stride,s,m,f)}}const M=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function b(t,n,o,i,e,s,r){if(null==t)return;const a=w(o,M);if((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* .setMin */ .Ne)(m,t.bbMin),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* .setMax */ .vI)(m,t.bbMax),null!=e&&e.applyToAabb(m),C(m,n,a,i)){const{primitiveIndices:c,position:f}=t,a=c?c.length:f.indices.length/3;if(a>N){const c=t.getChildren();if(void 0!==c){for(const t of c)b(t,n,o,i,e,s,r);return}}V(n,o,0,a,f.indices,f.data,f.stride,c,e,s,r)}}const d=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function x(n,o,i,e,s,c,r,f,a){const{data:u,stride:l}=c;q(n,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(S,o,n),i,e,s,u,l,r,f,a)}function g(t,n,o,i,e,s,c,r,f,a=null,u=0){const l=t[0],h=t[1],m=t[2],p=n[0],M=n[1],b=n[2];for(let x=o;x<i;++x){const t=u+(a?a[x]:x),n=3*t,o=c*e[n],i=s[o],g=s[o+1],y=s[o+2],T=c*e[n+1],V=s[T],q=s[T+1],j=s[T+2],I=c*e[n+2],v=V-i,A=q-g,B=j-y,O=s[I]-i,k=s[I+1]-g,w=s[I+2]-y,C=M*w-k*b,G=b*O-w*p,N=p*k-O*M,S=v*C+A*G+B*N;if(Math.abs(S)<=P)continue;const U=l-i,z=h-g,D=m-y,E=U*C+z*G+D*N;if(S>0){if(E<0||E>S)continue}else if(E>0||E<S)continue;const F=z*B-A*D,H=D*v-B*U,J=U*A-v*z,K=p*F+M*H+b*J;if(S>0){if(K<0||E+K>S)continue}else if(K>0||E+K<S)continue;const L=(O*F+k*H+w*J)/S;if(L>=0){f(L,t,r?R(v,A,B,O,k,w,d):null)}}}function y(t,n,o,i,e,s,c,r){const f=t[0],a=t[1],u=t[2],l=n[0],h=n[1],m=n[2];for(let p=o;p<i;++p){const t=3*p,n=t+1,o=t+2,i=s*t,M=e[i],b=e[i+1],x=e[i+2],g=s*n,y=s*o,T=e[g]-M,V=e[g+1]-b,q=e[g+2]-x,j=e[y]-M,I=e[y+1]-b,v=e[y+2]-x,A=h*v-I*m,B=m*j-v*l,O=l*I-j*h,k=T*A+V*B+q*O;if(Math.abs(k)<=P)continue;const w=f-M,C=a-b,G=u-x,N=w*A+C*B+G*O;if(k>0){if(N<0||N>k)continue}else if(N>0||N<k)continue;const S=C*q-V*G,U=G*T-q*w,z=w*V-T*C,D=l*S+h*U+m*z;if(k>0){if(D<0||N+D>k)continue}else if(D>0||N+D<k)continue;const E=(j*S+I*U+v*z)/k;if(E>=0){r(E,p,c?R(T,V,q,j,I,v,d):null)}}}function T(t,n,o,i,e,s,c,r,f,a,u,l=null,h=0){const m=t[0],p=t[1],M=t[2],b=n[0],x=n[1],g=n[2];for(let y=o;y<i;++y){const t=h+(l?l[y]:y),n=3*t,o=c*e[n],i=s[o],T=s[o+1],V=s[o+2],q=c*e[n+1],j=s[q],I=s[q+1],v=s[q+2],A=c*e[n+2],B=s[A],O=s[A+1],k=s[A+2],w=V-f,C=r/Math.sqrt(i*i+T*T+w*w),G=i+i*C,N=T+T*C,S=V+w*C,U=v-f,z=r/Math.sqrt(j*j+I*I+U*U),D=j+j*z,E=I+I*z,F=v+U*z,H=k-f,J=r/Math.sqrt(B*B+O*O+H*H),K=D-G,L=E-N,Q=F-S,W=B+B*J-G,X=O+O*J-N,Y=k+H*J-S,Z=x*Y-X*g,$=g*W-Y*b,_=b*X-W*x,tt=K*Z+L*$+Q*_;if(Math.abs(tt)<=P)continue;const nt=m-G,ot=p-N,it=M-S,et=nt*Z+ot*$+it*_;if(tt>0){if(et<0||et>tt)continue}else if(et>0||et<tt)continue;const st=ot*Q-L*it,ct=it*K-Q*nt,rt=nt*L-K*ot,ft=b*st+x*ct+g*rt;if(tt>0){if(ft<0||et+ft>tt)continue}else if(ft>0||et+ft<tt)continue;const at=(W*st+X*ct+Y*rt)/tt;if(at>=0){u(at,t,a?R(K,L,Q,W,X,Y,d):null)}}}function V(t,n,o,i,e,s,c,r,f,a,u){const l=t[0],h=t[1],m=t[2],p=n[0],M=n[1],b=n[2],{normalRequired:x}=a;for(let g=o;g<i;++g){const t=r[g],n=3*t,o=c*e[n];let i=s[o],a=s[o+1],y=s[o+2];const T=c*e[n+1];let V=s[T],q=s[T+1],j=s[T+2];const I=c*e[n+2];let v=s[I],A=s[I+1],B=s[I+2];null!=f&&([i,a,y]=f.applyToVertex(i,a,y,g),[V,q,j]=f.applyToVertex(V,q,j,g),[v,A,B]=f.applyToVertex(v,A,B,g));const O=V-i,k=q-a,w=j-y,C=v-i,G=A-a,N=B-y,S=M*N-G*b,U=b*C-N*p,z=p*G-C*M,D=O*S+k*U+w*z;if(Math.abs(D)<=P)continue;const E=l-i,F=h-a,H=m-y,J=E*S+F*U+H*z;if(D>0){if(J<0||J>D)continue}else if(J>0||J<D)continue;const K=F*w-k*H,L=H*O-w*E,Q=E*k-O*F,W=p*K+M*L+b*Q;if(D>0){if(W<0||J+W>D)continue}else if(W>0||J+W<D)continue;const X=(C*K+G*L+N*Q)/D;if(X>=0){u(X,t,x?R(O,k,w,C,G,N,d):null)}}}function q(i,e,s,c,r,f,a,u,l,h){const m=e,p=U,M=Math.abs(m[0]),b=Math.abs(m[1]),d=Math.abs(m[2]),x=M>=b?M>=d?0:2:b>=d?1:2,g=x,y=m[g]<0?2:1,T=(x+y)%3,V=(x+(3-y))%3,q=m[T]/m[g],R=m[V]/m[g],B=1/m[g],O=j,k=I,w=v,{normalRequired:C}=l;for(let j=s;j<c;++j){const e=3*j,s=a*r[e];(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(p[0],f[s+0],f[s+1],f[s+2]);const c=a*r[e+1];(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(p[1],f[c+0],f[c+1],f[c+2]);const l=a*r[e+2];(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(p[2],f[l+0],f[l+1],f[l+2]),u&&((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(p[0],u.applyToVertex(p[0][0],p[0][1],p[0][2],j)),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(p[1],u.applyToVertex(p[1][0],p[1][1],p[1][2],j)),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.c)(p[2],u.applyToVertex(p[2][0],p[2][1],p[2][2],j))),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(O,p[0],i),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(k,p[1],i),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(w,p[2],i);const m=O[T]-q*O[g],M=O[V]-R*O[g],b=k[T]-q*k[g],d=k[V]-R*k[g],x=w[T]-q*w[g],y=w[V]-R*w[g],I=x*d-y*b,v=m*y-M*x,G=b*M-d*m;if((I<0||v<0||G<0)&&(I>0||v>0||G>0))continue;const N=I+v+G;if(0===N)continue;const P=I*(B*O[g])+v*(B*k[g])+G*(B*w[g]);if(P*Math.sign(N)<0)continue;const S=P/N;if(S>=0){h(S,j,C?A(p):null)}}}const j=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),I=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),v=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function R(t,o,s,c,r,f,a){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(B,t,o,s),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(O,c,r,f),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.h)(a,B,O),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(a,a),a}function A(n){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(B,n[1],n[0]),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(O,n[2],n[0]),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.h)(d,B,O),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.n)(d,d),d}const B=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),O=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function k(t,o,i){return n(i,1/(o[0]-t[0]),1/(o[1]-t[1]),1/(o[2]-t[2]))}function w(t,o){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.i)(o,1/t[0],1/t[1],1/t[2])}function C(t,n,o,i){return G(t,n,o,i,1/0)}function G(t,n,o,i,e){const s=(t[0]-i-n[0])*o[0],c=(t[3]+i-n[0])*o[0];let r=Math.min(s,c),f=Math.max(s,c);const a=(t[1]-i-n[1])*o[1],u=(t[4]+i-n[1])*o[1];if(f=Math.min(f,Math.max(a,u)),f<0)return!1;if(r=Math.max(r,Math.min(a,u)),r>f)return!1;const l=(t[2]-i-n[2])*o[2],h=(t[5]+i-n[2])*o[2];return f=Math.min(f,Math.max(l,h)),!(f<0)&&(r=Math.max(r,Math.min(l,h)),!(r>f)&&r<e)}const N=1e3,P=1e-7,S=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),U=[(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)()];


/***/ }),

/***/ 2007:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ g)
/* harmony export */ });
/* unused harmony export ValidatedRenderGeometry */
/* harmony import */ var _core_uid_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(65061);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(31803);
/* harmony import */ var _support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72699);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class g{constructor(r,i={}){this.geometry=r,this.screenToWorldRatio=1,this._transformation=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),this._shaderTransformation=null,this._boundingSphere=null,this.id=(0,_core_uid_js__WEBPACK_IMPORTED_MODULE_5__/* .generateUID */ .c)(),this.layerViewUid=i.layerViewUid,this.graphicUid=i.graphicUid,this.castShadow=i.castShadow??!1,i.objectShaderTransformation&&this.objectShaderTransformationChanged(i.objectShaderTransformation)}get transformation(){return this._transformation}set transformation(t){(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(this._transformation,t),this._boundingSphere=null}get boundingInfo(){return this.geometry.boundingInfo}objectShaderTransformationChanged(t){null==t?this._shaderTransformation=null:(this._shaderTransformation??=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(this._shaderTransformation,t,this.geometry.transformation)),this._boundingSphere=null}get boundingSphere(){return this.boundingInfo?(null==this._boundingSphere&&(this._boundingSphere??=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.c)(),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.t)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.a)(this._boundingSphere),this.boundingInfo.center,this.shaderTransformation),this._boundingSphere[3]=this.boundingInfo.radius*(0,_support_mathUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .maxScale */ .hG)(this.shaderTransformation)),this._boundingSphere):_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_3__.N}get material(){return this.geometry.material}get type(){return this.geometry.type}get shaderTransformation(){return this._shaderTransformation??this.transformation}get attributes(){return this.geometry.attributes}get highlight(){return this.geometry.highlights}foreachHighlightOptions(t){this.geometry.foreachHighlightOptions(t)}get hasHighlights(){return this.geometry.hasHighlights}get occludees(){return this.geometry.occludees}get visible(){return this.geometry.visible}set visible(t){this.geometry.visible=t}}class m extends (/* unused pure expression or super */ null && (g)){}


/***/ }),

/***/ 38323:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ A)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var A;!function(A){A[A.INTEGRATED_MESH=0]="INTEGRATED_MESH",A[A.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",A[A.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",A[A.OPAQUE_MATERIAL_WITHOUT_NORMALS=3]="OPAQUE_MATERIAL_WITHOUT_NORMALS",A[A.TRANSPARENT_MATERIAL=4]="TRANSPARENT_MATERIAL",A[A.TRANSPARENT_MATERIAL_WITHOUT_NORMALS=5]="TRANSPARENT_MATERIAL_WITHOUT_NORMALS",A[A.TRANSPARENT_TERRAIN=6]="TRANSPARENT_TERRAIN",A[A.TRANSPARENT_MATERIAL_WITHOUT_DEPTH=7]="TRANSPARENT_MATERIAL_WITHOUT_DEPTH",A[A.OCCLUDED_GROUND=8]="OCCLUDED_GROUND",A[A.OCCLUDER_MATERIAL=9]="OCCLUDER_MATERIAL",A[A.TRANSPARENT_OCCLUDER_MATERIAL=10]="TRANSPARENT_OCCLUDER_MATERIAL",A[A.OCCLUSION_PIXELS=11]="OCCLUSION_PIXELS",A[A.HUD_MATERIAL=12]="HUD_MATERIAL",A[A.LABEL_MATERIAL=13]="LABEL_MATERIAL",A[A.LINE_CALLOUTS=14]="LINE_CALLOUTS",A[A.LINE_CALLOUTS_HUD_DEPTH=15]="LINE_CALLOUTS_HUD_DEPTH",A[A.OVERLAY=16]="OVERLAY",A[A.DRAPED_MATERIAL=17]="DRAPED_MATERIAL",A[A.DRAPED_WATER=18]="DRAPED_WATER",A[A.VOXEL=19]="VOXEL",A[A.MAX_SLOTS=20]="MAX_SLOTS"}(A||(A={}));


/***/ }),

/***/ 98546:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I$: () => (/* binding */ P),
/* harmony export */   a9: () => (/* binding */ o),
/* harmony export */   m: () => (/* binding */ i),
/* harmony export */   mK: () => (/* binding */ m),
/* harmony export */   qh: () => (/* binding */ f),
/* harmony export */   r8: () => (/* binding */ l),
/* harmony export */   sf: () => (/* binding */ s),
/* harmony export */   v0: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony exports renderWhenBitIsNotSet, replaceBitWhenDepthTestPasses */
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const i={func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.LESS},s={func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS},e={mask:255},l={mask:0},t=a=>({function:{func:n.NOTEQUAL,ref:a,mask:a},operation:{fail:E.KEEP,zFail:E.KEEP,zPass:E.KEEP}}),u=a=>({function:{func:n.ALWAYS,ref:a,mask:a},operation:{fail:E.KEEP,zFail:E.KEEP,zPass:E.REPLACE}}),f={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.ZERO}},o={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.ALWAYS,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.REPLACE}},P={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.EQUAL,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP}},m={function:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompareFunction */ .MT.NOTEQUAL,ref:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask,mask:_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .StencilBits */ .dd.OutlineVisualElementMask},operation:{fail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zFail:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP,zPass:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .StencilOperation */ .eA.KEEP}};


/***/ }),

/***/ 17342:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  g: () => (/* binding */ L)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/typedArrayUtil.js
var typedArrayUtil = __webpack_require__(86942);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/uid.js
var uid = __webpack_require__(65061);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/urlUtils.js
var urlUtils = __webpack_require__(20909);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/videoUtils.js
var videoUtils = __webpack_require__(76036);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestImageUtils.js
var requestImageUtils = __webpack_require__(34528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/requestUtils.js
var requestUtils = __webpack_require__(89125);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/assets.js
var assets = __webpack_require__(99050);
;// ../node_modules/@arcgis/core/libs/basisu/BasisUTranscoder.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(){return t??=(async()=>{const i=await __webpack_require__.e(/* import() */ 63964).then(__webpack_require__.bind(__webpack_require__, 63964)),t=await i.default({locateFile:i=>(0,assets/* getAssetUrl */.s)(`esri/libs/basisu/${i}`)});return t.initializeBasis(),t})(),t}let t;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/libs/basisu/TextureFormat.js
var TextureFormat = __webpack_require__(74408);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Util.js
var Util = __webpack_require__(19282);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/BasisUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let l=null,o=null;async function g(){return null==o&&(o=i(),l=await o),o}function u(e,t){if(null==l)return e.byteLength;const n=new l.BasisFile(new Uint8Array(e)),s=T(n)?m(n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),t):0;return n.close(),n.delete(),s}function c(e,t){if(null==l)return e.byteLength;const n=new l.KTX2File(new Uint8Array(e)),s=E(n)?m(n.getLevels(),n.getHasAlpha(),n.getWidth(),n.getHeight(),t):0;return n.close(),n.delete(),s}function m(e,t,s,r,i){const l=(0,Util/* getBytesPerElementFormat */.IB)(t?enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA8_ETC2_EAC:enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB8_ETC2),o=i&&e>1?(4**e-1)/(3*4**(e-1)):1;return Math.ceil(s*r*l*o)}function T(e){return e.getNumImages()>=1&&!e.isUASTC()}function E(e){return e.getFaces()>=1&&e.isETC1S()}async function h(e,t,n){null==l&&(l=await g());const s=new l.BasisFile(new Uint8Array(n));if(!T(s))return null;s.startTranscoding();const r=p(e,t,s.getNumLevels(0),s.getHasAlpha(),s.getImageWidth(0,0),s.getImageHeight(0,0),((e,t)=>s.getImageTranscodedSizeInBytes(0,e,t)),((e,t,n)=>s.transcodeImage(n,0,e,t,0,0)));return s.close(),s.delete(),r}async function _(e,t,n){null==l&&(l=await g());const s=new l.KTX2File(new Uint8Array(n));if(!E(s))return null;s.startTranscoding();const r=p(e,t,s.getLevels(),s.getHasAlpha(),s.getWidth(),s.getHeight(),((e,t)=>s.getImageTranscodedSizeInBytes(e,0,0,t)),((e,t,n)=>s.transcodeImage(n,e,0,0,t,0,-1,-1)));return s.close(),s.delete(),r}function p(e,a,l,o,g,u,c,m){const{compressedTextureETC:T,compressedTextureS3TC:E}=e.capabilities,[h,_]=T?o?[TextureFormat/* TextureFormat */.n.ETC2_RGBA,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA8_ETC2_EAC]:[TextureFormat/* TextureFormat */.n.ETC1_RGB,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB8_ETC2]:E?o?[TextureFormat/* TextureFormat */.n.BC3_RGBA,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT]:[TextureFormat/* TextureFormat */.n.BC1_RGB,enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT]:[TextureFormat/* TextureFormat */.n.RGBA32,enums/* PixelFormat */.Ab.RGBA],p=a.hasMipmap?l:Math.min(1,l),A=[];for(let t=0;t<p;t++)A.push(new Uint8Array(c(t,h))),m(t,h,A[t]);return a.internalFormat=_,a.hasMipmap=A.length>1,a.samplingMode=a.hasMipmap?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,a.width=g,a.height=u,new Texture/* Texture */.g(e,a,{type:"compressed",levels:A})}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DDSUtil.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DDSUtil_o=()=>Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),a=542327876,DDSUtil_i=131072,s=4;function DDSUtil_l(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function DDSUtil_u(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)}const DDSUtil_c=DDSUtil_l("DXT1"),DDSUtil_h=DDSUtil_l("DXT3"),DDSUtil_m=DDSUtil_l("DXT5"),f=31,d=0,DDSUtil_p=1,DDSUtil_g=2,D=3,C=4,w=7,DDSUtil_T=20,DDSUtil_=21;function DDSUtil_E(e,r,o){const a=S(o,r.hasMipmap??!1);if(null==a)throw new Error("DDS texture data is null");const{textureData:i,internalFormat:s,width:l,height:u}=a;return r.samplingMode=i.levels.length>1?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,r.hasMipmap=i.levels.length>1,r.internalFormat=s,r.width=l,r.height=u,new Texture/* Texture */.g(e,r,i)}function S(e,t){const n=new Int32Array(e.buffer,e.byteOffset,f);if(n[d]!==a)return DDSUtil_o().error("Invalid magic number in DDS header"),null;if(!(n[DDSUtil_T]&s))return DDSUtil_o().error("Unsupported format, must contain a FourCC code"),null;const l=n[DDSUtil_];let E,S;switch(l){case DDSUtil_c:E=8,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case DDSUtil_h:E=16,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case DDSUtil_m:E=16,S=enums/* CompressedTextureFormat */.CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return DDSUtil_o().error("Unsupported FourCC code:",DDSUtil_u(l)),null}let b=1,A=n[C],M=n[D];(3&A||3&M)&&(DDSUtil_o().warn("Rounding up compressed texture size to nearest multiple of 4."),A=A+3&-4,M=M+3&-4);const x=A,R=M;let X,I;n[DDSUtil_g]&DDSUtil_i&&!1!==t&&(b=Math.max(1,n[w]));let v=e.byteOffset+n[DDSUtil_p]+4;const y=[];for(let r=0;r<b;++r)I=(A+3>>2)*(M+3>>2)*E,X=new Uint8Array(e.buffer,v,I),y.push(X),v+=I,A=Math.max(1,A>>1),M=Math.max(1,M>>1);return{textureData:{type:"compressed",levels:y},internalFormat:S,width:x,height:R}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js
var textureUtils = __webpack_require__(84147);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var lib_Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class L{constructor(e,r){this._data=e,this.id=(0,uid/* generateUID */.c)(),this.events=new Evented/* default */.A,this._parameters={...N,...r},this._startPreload(e)}dispose(){this.unload(),this._data=this.update=void 0}_startPreload(e){e instanceof HTMLVideoElement?(this.update=t=>this._update(e,t),this._startPreloadVideoElement(e)):e instanceof HTMLImageElement&&this._startPreloadImageElement(e)}_startPreloadVideoElement(e){if(!((0,urlUtils/* isBlobProtocol */.w8)(e.src)||"auto"===e.preload&&e.crossOrigin)&&(e.preload="auto",e.crossOrigin="anonymous",e.src=e.src,e.paused&&e.autoplay)){const t=[];(0,videoUtils/* whenVideoPlayable */.i)(e,(e=>t.push(e))).then((()=>{e.play()})).finally((()=>t.forEach((e=>e.remove()))))}}_startPreloadImageElement(e){(0,urlUtils/* isDataProtocol */.DB)(e.src)||(0,urlUtils/* isBlobProtocol */.w8)(e.src)||e.crossOrigin||(e.crossOrigin="anonymous",e.src=e.src)}_createDescriptor(e){const t=new TextureDescriptor/* TextureDescriptor */.R;return t.wrapMode=this._parameters.wrap??enums/* TextureWrapMode */.pF.REPEAT,t.flipped=!this._parameters.noUnpackFlip,t.samplingMode=this._parameters.mipmap?enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR:enums/* TextureSamplingMode */.Cj.LINEAR,t.hasMipmap=!!this._parameters.mipmap,t.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha,t.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?e.parameters.maxMaxAnisotropy:1),t}get glTexture(){return this._glTexture??this._emptyTexture}get loaded(){return null!=this._glTexture}get usedMemory(){return this._glTexture?.usedMemory||Texture_C(this._data,this._parameters)}load(e){if(this._loadingPromise)return this._loadingPromise;if(this._glTexture)return this._glTexture;const t=this._data;return null==t?(this._glTexture=new Texture/* Texture */.g(e,this._createDescriptor(e),null),this._glTexture):(this._emptyTexture=e.emptyTexture,this._parameters.reloadable||(this._data=void 0),"string"==typeof t?this._loadFromURL(e,t):t instanceof Image?this._loadFromImageElement(e,t):t instanceof HTMLVideoElement?this._loadFromVideoElement(e,t):t instanceof ImageData||t instanceof HTMLCanvasElement?this._loadFromImage(e,t):(0,typedArrayUtil/* isUint8Array */.mg)(t)&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.DDS_ENCODING?this._loadFromDDSData(e,t):(0,typedArrayUtil/* isArrayBuffer */.mw)(t)&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.DDS_ENCODING?this._loadFromDDSData(e,new Uint8Array(t)):((0,typedArrayUtil/* isArrayBuffer */.mw)(t)||(0,typedArrayUtil/* isUint8Array */.mg)(t))&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.KTX2_ENCODING?this._loadFromKTX2(e,t):((0,typedArrayUtil/* isArrayBuffer */.mw)(t)||(0,typedArrayUtil/* isUint8Array */.mg)(t))&&this._parameters.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.BASIS_ENCODING?this._loadFromBasis(e,t):(0,typedArrayUtil/* isUint8Array */.mg)(t)?this._loadFromPixelData(e,t):(0,typedArrayUtil/* isArrayBuffer */.mw)(t)?this._loadFromPixelData(e,new Uint8Array(t)):null)}_update(e,t){return null==this._glTexture||e.readyState<HTMLMediaElement.HAVE_CURRENT_DATA||t===e.currentTime?t:(this._glTexture.setData(e),this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap(),this._parameters.updateCallback&&this._parameters.updateCallback(),e.currentTime)}_loadFromDDSData(e,t){return this._glTexture=DDSUtil_E(e,this._createDescriptor(e),t),this._emptyTexture=null,this._glTexture}_loadFromKTX2(e,t){return this._loadAsync((()=>_(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromBasis(e,t){return this._loadAsync((()=>h(e,this._createDescriptor(e),t).then((e=>(this._glTexture=e,e)))))}_loadFromPixelData(e,t){(0,lib_Util/* assert */.vA)(this._parameters.width>0&&this._parameters.height>0);const r=this._createDescriptor(e);return r.pixelFormat=1===this._parameters.components?enums/* PixelFormat */.Ab.LUMINANCE:3===this._parameters.components?enums/* PixelFormat */.Ab.RGB:enums/* PixelFormat */.Ab.RGBA,r.pixelFormat!==enums/* PixelFormat */.Ab.RGB&&r.pixelFormat!==enums/* PixelFormat */.Ab.RGBA||(r.compress=this._parameters.compressionOptions),r.width=this._parameters.width??0,r.height=this._parameters.height??0,this._glTexture=new Texture/* Texture */.g(e,r,t),this._glTexture}_loadFromURL(e,t){return this._loadAsync((async r=>{const s=await (0,requestImageUtils/* requestImage */.D)(t,{signal:r});return (0,promiseUtils/* throwIfAborted */.Te)(r),this._loadFromImage(e,s)}))}_loadFromImageElement(e,t){return t.complete?this._loadFromImage(e,t):this._loadAsync((async r=>{const s=await (0,requestUtils/* loadImageAsync */.Sx)(t,t.src,!1,r);return (0,promiseUtils/* throwIfAborted */.Te)(r),this._loadFromImage(e,s)}))}_loadFromVideoElement(e,t){return t.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA?this._loadFromImage(e,t):this._loadFromVideoElementAsync(e,t)}_loadFromVideoElementAsync(t,r){return this._loadAsync((i=>new Promise(((n,l)=>{const m=()=>{r.removeEventListener("loadeddata",h),r.removeEventListener("error",p),(0,maybe/* removeMaybe */.xt)(d)},h=()=>{r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&(m(),n(this._loadFromImage(t,r)))},p=t=>{m(),l(t||new core_Error/* default */.A("texture:load-error","Failed to load video"))};r.addEventListener("loadeddata",h),r.addEventListener("error",p);const d=(0,promiseUtils/* onAbort */.u7)(i,(()=>p((0,promiseUtils/* createAbortError */.NK)())))}))))}_loadFromImage(e,t){let r=t;r instanceof HTMLVideoElement||(r=(0,textureUtils/* ensureImageMaxSize */.vM)(r,e.parameters));const s=P(r);this._parameters.width=s.width,this._parameters.height=s.height;const i=this._createDescriptor(e);return i.pixelFormat=3===this._parameters.components?enums/* PixelFormat */.Ab.RGB:enums/* PixelFormat */.Ab.RGBA,i.width=s.width,i.height=s.height,i.compress=this._parameters.compressionOptions,this._glTexture=new Texture/* Texture */.g(e,i,r),this._emptyTexture=null,this.events.emit("loaded"),this._glTexture}_loadAsync(e){const t=new AbortController;this._loadingController=t;const r=e(t.signal);this._loadingPromise=r;const s=()=>{this._loadingController===t&&(this._loadingController=null),this._loadingPromise===r&&(this._loadingPromise=null),this._emptyTexture=null};return r.then(s,s),r}unload(){if(this._glTexture=(0,maybe/* disposeMaybe */.WD)(this._glTexture),this._emptyTexture=null,null!=this._loadingController){const e=this._loadingController;this._loadingController=null,this._loadingPromise=null,e.abort()}this.events.emit("unloaded")}get parameters(){return this._parameters}}function Texture_C(e,t){if(null==e)return 0;if((0,typedArrayUtil/* isArrayBuffer */.mw)(e)||(0,typedArrayUtil/* isUint8Array */.mg)(e))return t.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.KTX2_ENCODING?c(e,!!t.mipmap):t.encoding===basicInterfaces/* TextureEncodingMimeType */.JS.BASIS_ENCODING?u(e,!!t.mipmap):e.byteLength;const{width:r,height:s}=e instanceof Image||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement?P(e):t;return(t.mipmap?4/3:1)*r*s*(t.components||4)||0}function P(e){return e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e}const N={wrap:{s:enums/* TextureWrapMode */.pF.REPEAT,t:enums/* TextureWrapMode */.pF.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1};


/***/ }),

/***/ 68699:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ C)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var C;!function(C){C[C.ASYNC=0]="ASYNC",C[C.SYNC=1]="SYNC"}(C||(C={}));


/***/ }),

/***/ 58947:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ f),
/* harmony export */   MX: () => (/* binding */ c),
/* harmony export */   O_: () => (/* binding */ i),
/* harmony export */   kL: () => (/* binding */ u),
/* harmony export */   vA: () => (/* binding */ s),
/* harmony export */   zH: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony exports project, setMatrixTranslation3 */
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59646);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28152);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=(0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)();class o{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function s(t,r="Assertion"){if(!t){const t=new Error(r).stack;throw new o(`${r} at ${t}`)}}function c(t,r){t||(r=r||"",console.warn("Verify failed: "+r+"\n"+new Error("verify").stack))}function i(t,r,n,e){let o,s=(n[0]-t[0])/r[0],c=(e[0]-t[0])/r[0];s>c&&(o=s,s=c,c=o);let i=(n[1]-t[1])/r[1],f=(e[1]-t[1])/r[1];if(i>f&&(o=i,i=f,f=o),s>f||i>c)return!1;i>s&&(s=i),f<c&&(c=f);let a=(n[2]-t[2])/r[2],u=(e[2]-t[2])/r[2];return a>u&&(o=a,a=u,u=o),!(s>u||a>c)&&(u<c&&(c=u),!(c<0))}function f(r,n,e,o,s,c=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)()){const i=(o[s]-e[s])*(n[0]-r[0])-(o[0]-e[0])*(n[s]-r[s]),f=(o[0]-e[0])*(r[s]-e[s])-(o[s]-e[s])*(r[0]-e[0]);if(0===i)return!1;const a=f/i;return c[0]=r[0]+a*(n[0]-r[0]),c[1]=r[s]+a*(n[s]-r[s]),!0}function a(t,n,o,c,i){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,r(e,e,n),i.length>2&&(i[2]=-e[2]),r(e,e,o),s(0!==e[3]),i[0]=e[0]/e[3],i[1]=e[1]/e[3],i[2]=e[2]/e[3],i[0]=(.5*i[0]+.5)*c[2]+c[0],i[1]=(.5*i[1]+.5)*c[3]+c[1]}function u(t,r){return Math.log(t)/Math.log(r)}function l(t,r,n,e){t[12]=r,t[13]=n,t[14]=e}function m(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}


/***/ }),

/***/ 11459:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_0__/* .VertexArrayObject */ .Z{}


/***/ }),

/***/ 54671:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  x: () => (/* binding */ l)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Handles.js
var Handles = __webpack_require__(1436);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/uid.js
var uid = __webpack_require__(65061);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/DirtyEvents.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DirtyEvents_e=["layerObjectAdded","layerObjectRemoved","layerObjectsAdded","layerObjectsRemoved","transformationChanged","shaderTransformationChanged","visibilityChanged","occlusionChanged","highlightChanged","geometryAdded","geometryRemoved","attributesChanged"];

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Octree.js
var Octree = __webpack_require__(91337);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js
var UpdatePolicy = __webpack_require__(68699);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class l{constructor(e,t,o=""){this.stage=e,this.apiLayerViewUid=o,this.id=(0,uid/* generateUID */.c)(),this.events=new Evented/* default */.A,this.visible=!0,this.sliceable=!1,this._objectsAdded=new Array,this._handles=new Handles/* default */.A,this._objects=new Map,this._pickable=!0,this.visible=t?.visible??!0,this._pickable=t?.pickable??!0,this.updatePolicy=t?.updatePolicy??UpdatePolicy/* UpdatePolicy */.q.ASYNC,e.addLayer(this);for(const s of DirtyEvents_e)this._handles.add(this.events.on(s,(t=>e.handleEvent(s,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.removeLayer(this),this.invalidateSpatialQueryAccelerator())}get objects(){return this._objects}getObject(e){return (0,compilerUtils/* toConst */.zI)(this._objects.get(e))}set pickable(e){this._pickable=e}get pickable(){return this._pickable&&this.visible}add(e){this._objects.set(e.id,e),e.layer=this,this.events.emit("layerObjectAdded",e),null!=this._octree&&this._objectsAdded.push(e)}remove(t){this._objects.delete(t.id)&&(this.events.emit("layerObjectRemoved",t),t.layer=null,null!=this._octree&&((0,arrayUtils/* removeUnordered */.Xy)(this._objectsAdded,t)||this._octree.remove([t])))}addMany(e){for(const t of e)this._objects.set(t.id,t),t.layer=this;this.events.emit("layerObjectsAdded",e),null!=this._octree&&this._objectsAdded.push(...e)}removeMany(t){const s=new Array;for(const e of t)this._objects.delete(e.id)&&s.push(e);if(0!==s.length&&(this.events.emit("layerObjectsRemoved",s),s.forEach((e=>e.layer=null)),null!=this._octree)){for(let t=0;t<s.length;)(0,arrayUtils/* removeUnordered */.Xy)(this._objectsAdded,s[t])?(s[t]=s[s.length-1],s.length-=1):++t;this._octree.remove(s)}}sync(){this.updatePolicy!==UpdatePolicy/* UpdatePolicy */.q.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.size>50?(this._octree=new Octree/* default */.A((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.values())):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded),this._objectsAdded.length=0),this._octree}invalidateSpatialQueryAccelerator(){this._octree=(0,maybe/* destroyMaybe */.pR)(this._octree),this._objectsAdded.length=0}get test(){}}


/***/ }),

/***/ 91013:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Am: () => (/* binding */ O),
/* harmony export */   C7: () => (/* binding */ a),
/* harmony export */   JS: () => (/* binding */ u),
/* harmony export */   Mg: () => (/* binding */ t),
/* harmony export */   dd: () => (/* binding */ s),
/* harmony export */   it: () => (/* binding */ n),
/* harmony export */   s2: () => (/* binding */ e),
/* harmony export */   sf: () => (/* binding */ i)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,n,a,O,s,t,i,u;!function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"}(e||(e={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(n||(n={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(a||(a={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(O||(O={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(s||(s={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee"}(t||(t={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(i||(i={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(u||(u={}));


/***/ }),

/***/ 28953:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MD: () => (/* binding */ p),
/* harmony export */   cJ: () => (/* binding */ d),
/* harmony export */   hs: () => (/* binding */ v),
/* harmony export */   m0: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony exports getLabelSettings, getSettings */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(28769);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(31803);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10714);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e,t){return new F(e,g,t)}function o(e,t){const{curvatureDependent:a,scaleStart:r,scaleFallOffRange:n}=g;return new F(e,{curvatureDependent:{min:{curvature:a.min.curvature,tiltAngle:a.min.tiltAngle,scaleFallOffFactor:_.curvatureDependent.min.scaleFallOffFactor},max:{curvature:a.max.curvature,tiltAngle:a.max.tiltAngle,scaleFallOffFactor:_.curvatureDependent.max.scaleFallOffFactor}},scaleStart:r,scaleFallOffRange:n,minPixelSize:_.minPixelSize},t)}function u(e){return Math.abs(e*e*e)}function f(e,t,a){const r=a.parameters;return C.scale=Math.min(r.divisor/(t-r.offset),1),C.factor=u(e),C}function m(t,a){return (0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .lerp */ .Cc)(t*Math.max(a.scale,a.minScaleFactor),t,a.factor)}function h(e,t,a){const r=f(e,t,a);return r.minScaleFactor=0,m(1,r)}function d(e,t,a,r){r.scale=h(e,t,a),r.factor=0,r.minScaleFactor=a.minScaleFactor}function p(e,t,a=[0,0]){const r=Math.min(Math.max(t.scale,t.minScaleFactor),1);return a[0]=e[0]*r,a[1]=e[1]*r,a}function v(e,t,a,r){return m(e,f(t,a,r))}class F{get minScaleFactor(){return null!=this._fontHeight?Math.min(this._description.minPixelSize/this._fontHeight,1):0}constructor(e,t,a,r=O(),n){this._viewingMode=e,this._description=t,this._ellipsoidRadius=a,this.parameters=r,this._fontHeight=n,this._viewingMode===l.Local?(this._coverageCompensation=this._surfaceCoverageCompensationLocal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this._coverageCompensation=this._surfaceCoverageCompensationGlobal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}update(e){return(!this.parameters||this.parameters.camera.fovY!==e.fovY||this.parameters.camera.distance!==e.distance)&&(this._calculateParameters(e,this._ellipsoidRadius,this.parameters),!0)}overrideFontHeight(e){return e!==this._fontHeight?new F(this._viewingMode,this._description,this._ellipsoidRadius,this.parameters,e):this}_calculateParameters(e,t,a){const{scaleStart:r,scaleFallOffRange:n}=this._description,{fovY:i,distance:c}=e,l=this._calculateCurvatureDependentParameters(e,t),s=this._coverageCompensation(e,t,l),{tiltAngle:o,scaleFallOffFactor:u}=l,f=Math.sin(o)*c,m=.5*Math.PI-o-i*(.5-r*s),h=f/Math.cos(m),d=m+i*n*s,p=(h-u*(f/Math.cos(d)))/(1-u);return a.camera.fovY=e.fovY,a.camera.distance=e.distance,a.offset=p,a.divisor=h-p,a}_calculateCurvatureDependentParametersLocal(e,t,a=x){return a.tiltAngle=this._description.curvatureDependent.min.tiltAngle,a.scaleFallOffFactor=this._description.curvatureDependent.min.scaleFallOffFactor,a}_calculateCurvatureDependentParametersGlobal(t,r,n=x){const i=this._description.curvatureDependent,c=1+t.distance/r,l=Math.sqrt(c*c-1),[s,o]=[i.min.curvature,i.max.curvature],u=a((l-s)/(o-s),0,1),[f,m]=[i.min,i.max];return n.tiltAngle=e(f.tiltAngle,m.tiltAngle,u),n.scaleFallOffFactor=e(f.scaleFallOffFactor,m.scaleFallOffFactor,u),n}_surfaceCoverageCompensationLocal(e,t,a){return r(a.tiltAngle,e.fovY)}_surfaceCoverageCompensationGlobal(e,t,a){return n(D,t),c(D,a.tiltAngle,e.distance,e.fovY)}}const g={curvatureDependent:{min:{curvature:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(10),tiltAngle:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(12),scaleFallOffFactor:.5},max:{curvature:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(70),tiltAngle:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},_={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};function O(){return{camera:{distance:0,fovY:0},divisor:0,offset:0}}const C={scale:0,factor:0,minScaleFactor:0},x={tiltAngle:0,scaleFallOffFactor:0},D=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_2__.c)();


/***/ }),

/***/ 53834:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   G: () => (/* binding */ n),
/* harmony export */   Q: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n={stableRendering:!1},e={rootOrigin:null};


/***/ }),

/***/ 84147:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FC: () => (/* binding */ r),
/* harmony export */   Mv: () => (/* binding */ n),
/* harmony export */   vM: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony export ensureTextureSize */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=16;function n(t,n){return n=Math.floor(n/e)*e,Math.min(Math.round(t/e)*e,n)}function r(t,n){return n=Math.floor(n/e)*e,Math.min(Math.ceil(t/e)*e,n)}function o(t,e){const[n,r]=a(t,e);return t.width===n&&t.height===r?t:i(t,n,r)}function a({width:t,height:e},{maxPreferredTexturePixels:r,maxTextureSize:o}){const a=Math.max(t,e),i=t*e;if(a<=o&&i<=r)return[t,e];const h=Math.min(Math.sqrt(r/i),o/a);return[n(Math.round(t*h),o),n(Math.round(e*h),o)]}function i(t,e,n){if(t instanceof ImageData)return i(h(t),e,n);const r=document.createElement("canvas");r.width=e,r.height=n;return r.getContext("2d").drawImage(t,0,0,r.width,r.height),r}function h(e){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");if(null==r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("texture:context-failed","Failed to create 2d context from HTMLCanvasElement");return r.putImageData(e,0,0),n}


/***/ }),

/***/ 689:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   dg: () => (/* binding */ b),
/* harmony export */   ou: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports I3SVerticalOffsetGlobalViewingMode, Object3DVerticalOffsetGlobalViewingMode, TerrainVerticalOffsetGlobalViewingMode, getVerticalOffsetI3S, getVerticalOffsetTerrain, terrainId */
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25423);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78607);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21742);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86128);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(58359);
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(31803);
/* harmony import */ var _ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(10714);
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(29709);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class b{constructor(){this._transform=(0,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),this._transformInverse=new v({value:this._transform},_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .invert */ .B8,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt),this._transformInverseTranspose=new v(this._transformInverse,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .transpose */ .mg,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt),this._transformTranspose=new v({value:this._transform},_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .transpose */ .mg,_core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt),this._transformInverseRotation=new v({value:this._transform},_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__/* .normalFromMat4Legacy */ .dR,_core_libs_gl_matrix_2_factories_mat3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .copy */ .C)(this._transform,t)}multiplyTransform(t){(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)(this._transform,this._transform,t)}set(t){(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .copy */ .C)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,s){this.setTransformMatrix(t),this.multiplyTransform(s),this._invalidateLazyTransforms()}}class v{constructor(t,s,r){this._original=t,this._update=s,this._dirty=!0,this._transform=r()}invalidate(){this._dirty=!0}get value(){return this._dirty&&(this._update(this._transform,this._original.value),this._dirty=!1),this._transform}}class T{constructor(t=0){this.offset=t,this.tmpVertex=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)()}applyToVertex(t,s,r){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(q,t,s,r),i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.f)(z,e,this.localOrigin),a=this.offset/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(i);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)(this.tmpVertex,e,i,a),this.tmpVertex}applyToAabb(t){const s=A,r=R,e=B;for(let n=0;n<3;++n)s[n]=t[0+n]+this.localOrigin[n],r[n]=t[3+n]+this.localOrigin[n],e[n]=s[n];const i=this.applyToVertex(s[0],s[1],s[2]);for(let n=0;n<3;++n)t[n]=i[n],t[n+3]=i[n];const a=s=>{const r=this.applyToVertex(s[0],s[1],s[2]);for(let e=0;e<3;++e)t[e]=Math.min(t[e],r[e]),t[e+3]=Math.max(t[e+3],r[e])};for(let n=1;n<8;++n){for(let t=0;t<3;++t)e[t]=n&1<<t?r[t]:s[t];a(e)}let o=0;for(let n=0;n<3;++n){s[n]*r[n]<0&&(o|=1<<n)}if(0!==o&&7!==o)for(let n=0;n<8;++n)if(0===(o&n)){for(let t=0;t<3;++t)e[t]=o&1<<t?0:n&1<<t?s[t]:r[t];a(e)}for(let n=0;n<3;++n)t[n]-=this.localOrigin[n],t[n+3]-=this.localOrigin[n];return t}}class x{constructor(t=0){this.componentLocalOriginLength=0,this._totalOffset=0,this._offset=0,this._tmpVertex=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),this._tmpMbs=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this._tmpObb=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__/* .Obb */ .ab,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(t)}applyToVertex(t,s,r){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(q,t,s,r),i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(z,t,s,r+this.componentLocalOriginLength),a=this._totalOffset/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(i);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)(this._tmpVertex,e,i,a),this._tmpVertex}applyToAabb(t){const s=this.componentLocalOriginLength,r=t[0],e=t[1],i=t[2]+s,a=t[3],o=t[4],n=t[5]+s,h=Math.abs(r),f=Math.abs(e),l=Math.abs(i),m=Math.abs(a),p=Math.abs(o),c=Math.abs(n),_=.5*(1+Math.sign(r*a))*Math.min(h,m),u=.5*(1+Math.sign(e*o))*Math.min(f,p),g=.5*(1+Math.sign(i*n))*Math.min(l,c),M=Math.max(h,m),b=Math.max(f,p),v=Math.max(l,c),T=Math.sqrt(_*_+u*u+g*g),x=Math.sign(h+r),O=Math.sign(f+e),y=Math.sign(l+i),d=Math.sign(m+a),V=Math.sign(p+o),L=Math.sign(c+n),j=this._totalOffset;if(T<j)return t[0]-=(1-x)*j,t[1]-=(1-O)*j,t[2]-=(1-y)*j,t[3]+=d*j,t[4]+=V*j,t[5]+=L*j,t;const I=j/Math.sqrt(M*M+b*b+v*v),w=j/T,q=w-I,z=-q;return t[0]+=r*(x*z+w),t[1]+=e*(O*z+w),t[2]+=i*(y*z+w),t[3]+=a*(d*q+I),t[4]+=o*(V*q+I),t[5]+=n*(L*q+I),t}applyToMbs(t){const s=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t)),r=this._totalOffset/s;return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(this._tmpMbs),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),r),this._tmpMbs[3]=t[3]+t[3]*this._totalOffset/s,this._tmpMbs}applyToObb(t){return (0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__/* .computeOffsetObb */ .gm)(t,this._totalOffset,this._totalOffset,_ViewingMode_js__WEBPACK_IMPORTED_MODULE_7__/* .ViewingMode */ .RT.Global,this._tmpObb),this._tmpObb}}class O{constructor(t=0){this.offset=t,this.sphere=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.c)(),this.tmpVertex=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)()}applyToVertex(t,s,r){const e=this.objectTransform.transform,i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(q,t,s,r),a=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.t)(i,i,e),o=this.offset/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(a);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)(a,a,a,o);const m=this.objectTransform.inverse;return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.t)(this.tmpVertex,a,m),this.tmpVertex}applyToMinMax(t,s){const r=this.offset/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(t);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)(t,t,t,r);const e=this.offset/(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)(s);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)(s,s,s,e)}applyToAabb(t){const s=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*s,t[1]+=t[1]*s,t[2]+=t[2]*s;const r=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*r,t[4]+=t[4]*r,t[5]+=t[5]*r,t}applyToBoundingSphere(t){const s=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.l)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t)),r=this.offset/s;return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.b)((0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(this.sphere),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_6__.a)(t),r),this.sphere[3]=t[3]+t[3]*this.offset/s,this.sphere}}const y=new O;function d(t){return null!=t?(y.offset=t,y):null}const V=new x;function L(t){return null!=t?(V.offset=t,V):null}const j=new T;function I(t){return null!=t?(j.offset=t,j):null}const w="terrain",q=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),z=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),A=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),R=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),B=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)();


/***/ }),

/***/ 75268:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $p: () => (/* binding */ i),
/* harmony export */   Qx: () => (/* binding */ c),
/* harmony export */   _y: () => (/* binding */ r),
/* harmony export */   e_: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .zeros */ .Ul)()){this.intensity=s}}class r{constructor(i=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .zeros */ .Ul)(),r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(.57735,.57735,.57735)){this.intensity=i,this.direction=r}}class c{constructor(i=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .zeros */ .Ul)(),r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(.57735,.57735,.57735),c=!0,n=1,o=1){this.intensity=i,this.direction=r,this.castShadows=c,this.specularStrength=n,this.environmentStrength=o}}class n{constructor(){this.r=[0],this.g=[0],this.b=[0]}}


/***/ }),

/***/ 9409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  TA: () => (/* binding */ _),
  uH: () => (/* binding */ SceneLighting_l)
});

// UNUSED EXPORTS: SunLight

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js
var Lightsources = __webpack_require__(75268);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function LongVectorMath_n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function LongVectorMath_e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function LongVectorMath_l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(t){return(t+1)*(t+1)}function l(n){return (0,mathUtils/* clamp */.qE)(Math.floor(Math.sqrt(n)-1),0,2)}function m(t,n,o){const r=t[0],e=t[1],i=t[2],s=o||[];return s.length=u(n),n>=0&&(s[0]=.28209479177),n>=1&&(s[1]=.4886025119*r,s[2]=.4886025119*i,s[3]=.4886025119*e),n>=2&&(s[4]=1.09254843059*r*e,s[5]=1.09254843059*e*i,s[6]=.31539156525*(3*i*i-1),s[7]=1.09254843059*r*i,s[8]=.54627421529*(r*r-e*e)),s}function p(t,n){const o=u(t),r=n||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=o;for(let e=0;e<o;e++)r.r[e]=r.g[e]=r.b[e]=0;return r}function b(t,n){const o=l(n.r.length);for(const e of t)(0,vec32.u)(P,e.direction),m(P,o,v),LongVectorMath_n(v,w),LongVectorMath_e(v,e.intensity[0],I),LongVectorMath_l(n.r,I),LongVectorMath_e(v,e.intensity[1],I),LongVectorMath_l(n.g,I),LongVectorMath_e(v,e.intensity[2],I),LongVectorMath_l(n.b,I);return n}function y(t,n){m(P,0,v);for(const o of t)n.r[0]+=v[0]*w[0]*o.intensity[0]*4*Math.PI,n.g[0]+=v[0]*w[0]*o.intensity[1]*4*Math.PI,n.b[0]+=v[0]*w[0]*o.intensity[2]*4*Math.PI;return n}function M(t,r,e,s){p(r,s),(0,vec32.i)(e.intensity,0,0,0);let c=!1;const u=S,l=d,m=j;u.length=0,l.length=0,m.length=0;for(const n of t)n instanceof Lightsources/* MainLight */.Qx&&!c?((0,vec32.c)(e.direction,n.direction),(0,vec32.c)(e.intensity,n.intensity),e.specularStrength=n.specularStrength,e.environmentStrength=n.environmentStrength,e.castShadows=n.castShadows,c=!0):n instanceof Lightsources/* MainLight */.Qx||n instanceof Lightsources/* FillLight */._y?u.push(n):n instanceof Lightsources/* AmbientLight */.$p?l.push(n):n instanceof Lightsources/* SphericalHarmonicsAmbientLight */.e_&&m.push(n);b(u,s),y(l,s);for(const n of m)LongVectorMath_l(s.r,n.r),LongVectorMath_l(s.g,n.g),LongVectorMath_l(s.b,n.b)}const S=[],d=[],j=[],v=[0],I=[0],P=(0,vec3f64/* create */.vt)(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class g{constructor(){this.color=(0,vec3f64/* create */.vt)(),this.intensity=1}}class SceneLighting_m{constructor(){this.direction=(0,vec3f64/* create */.vt)(),this.ambient=new g,this.diffuse=new g}}const SceneLighting_l=.4;class _{constructor(){this._shOrder=2,this._legacy=new SceneLighting_m,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new Lightsources/* SphericalHarmonicsAmbientLight */.e_,this._mainLight=new Lightsources/* MainLight */.Qx((0,vec3f64/* create */.vt)(),(0,vec3f64/* fromValues */.fA)(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){M(i,this._shOrder,this._mainLight,this._sphericalHarmonics),(0,vec32.c)(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,(0,vec32.g)(this._legacy.diffuse.color,this._mainLight.intensity,r),(0,vec32.c)(L,this._legacy.diffuse.color),(0,vec32.g)(L,L,SceneLighting_l*this.globalFactor),(0,vec32.f)(this._legacy.ambient.color,this._legacy.ambient.color,L)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),(0,vec32.c)(this._mainLight.direction,i.mainLight.direction),(0,vec32.c)(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if((0,vec32.m)(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=(0,mathUtils/* lerp */.Cc)(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=(0,mathUtils/* lerp */.Cc)(s.mainLight.specularStrength,h.mainLight.specularStrength,n),(0,vec32.c)(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=(0,mathUtils/* lerp */.Cc)(s.globalFactor,h.globalFactor,n),this.noonFactor=(0,mathUtils/* lerp */.Cc)(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=(0,mathUtils/* lerp */.Cc)(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=(0,mathUtils/* lerp */.Cc)(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=(0,mathUtils/* lerp */.Cc)(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const L=(0,vec3f64/* create */.vt)();


/***/ }),

/***/ 32504:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  v: () => (/* binding */ A)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js
var olidUtils = __webpack_require__(36340);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js
var basicInterfaces = __webpack_require__(91013);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultBufferWriter.js
var DefaultBufferWriter = __webpack_require__(25146);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/TriangleMaterial.js
var TriangleMaterial = __webpack_require__(52873);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var VisualVariablePassParameters = __webpack_require__(17745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js + 1 modules
var ShaderTechnique = __webpack_require__(28347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var OITPass = __webpack_require__(69338);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/ColorMaterial.glsl.js
var ColorMaterial_glsl = __webpack_require__(17504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class b extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.color=vec4f64/* ZEROS */.uY}}class O extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,r){super(e,r,new ReloadableShaderModule/* ReloadableShaderModule */.$(ColorMaterial_glsl.C,(()=>__webpack_require__.e(/* import() */ 34788).then(__webpack_require__.bind(__webpack_require__, 34788)))))}_createPipeline(e,t){const{oitPass:i,output:f,transparent:h,cullFace:b,draped:O,hasOccludees:T,polygonOffset:_}=e,x=i===OITPass/* OITPass */.Y.NONE;return (0,renderState/* makePipelineState */.Ey)({blending:(0,ShaderOutput/* isColorOrColorEmission */.RN)(f)&&h?(0,OrderIndependentTransparency/* blending */.Yf)(i):null,culling:(0,renderState/* cullingParams */.Xt)(b),depthTest:O?null:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(i)},depthWrite:(0,OrderIndependentTransparency/* depthWrite */.z5)(e),drawBuffers:(0,ShaderTechnique/* depthOnlyOutputBuffersOr */.L)(f,(0,OrderIndependentTransparency/* getDrawBuffers */.m6)(i,f)),colorWrite:renderState/* defaultColorWrite */.kn,stencilWrite:T?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:T?t?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:x?_?S:null:(0,OrderIndependentTransparency/* oitPolygonOffset */.mE)(e)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const S={factor:1,units:1};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js
var Emissions_glsl = __webpack_require__(15420);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js + 1 modules
var ShaderTechniqueConfiguration = __webpack_require__(77941);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ColorMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(){super(...arguments),this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.hasVertexColors=!1,this.transparent=!1,this.discardInvisibleFragments=!1,this.polygonOffset=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.objectAndLayerIdColorInstanced=!1,this.vvColor=!1,this.draped=!1,this.textureCoordinateType=TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.None,this.emissionSource=Emissions_glsl/* EmissionSource */.ZX.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.vvSize=!1,this.vvOpacity=!1,this.snowCover=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)({count:basicInterfaces/* CullFaceOptions */.s2.COUNT})],a.prototype,"cullFace",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"hasVertexColors",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"transparent",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"discardInvisibleFragments",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"polygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"enableOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"writeDepth",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"hasOccludees",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"terrainDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"cullAboveTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],a.prototype,"draped",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/webscene/support/AlphaCutoff.js
var AlphaCutoff = __webpack_require__(63199);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ColorMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class A extends TriangleMaterial/* TriangleMaterial */.W{constructor(t){super(t,P),this._configuration=new a,this.supportsEdges=!0,this.produces=new Map([[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,t=>this._isOpaqueMaterialPass(t)],[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL_WITHOUT_NORMALS,t=>this._isOpaqueNoSSAODepthPass(t)],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,t=>(0,ShaderOutput/* isColorOrColorEmissionOrOID */.QG)(t)&&this._transparent&&this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_NORMALS,t=>(0,ShaderOutput/* isDepth */.eh)(t)&&this._transparent&&this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,t=>(0,ShaderOutput/* isColorOrColorEmissionOrOID */.QG)(t)&&this._transparent&&!this.parameters.writeDepth],[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,t=>(0,ShaderOutput/* is2DGeometryOutput */.i3)(t)]])}getConfiguration(t,r){return super.getConfiguration(t,r,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this._transparent,this._configuration.discardInvisibleFragments=this._transparent&&!this._isOpaquePass(t)&&this.parameters.discardInvisibleFragments,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=r.hasOccludees,this._configuration.oitPass=r.oitPass,this._configuration.enableOffset=r.camera.relativeElevation<OrderIndependentTransparency/* OITPolygonOffsetLimit */.xt,this._configuration.terrainDepthTest=r.terrainDepthTest&&(0,ShaderOutput/* isColorOrColorEmission */.RN)(t),this._configuration.cullAboveTerrain=r.cullAboveTerrain,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.draped=this.parameters.draped,this._configuration}get visible(){return this.parameters.color[3]>=AlphaCutoff/* alphaCutoff */.Q}get _transparent(){return this.parameters.color[3]<1||this.parameters.forceTransparentMode}_isOpaquePass(t){return this._isOpaqueMaterialPass(t)||this._isOpaqueNoSSAODepthPass(t)}_isOpaqueMaterialPass(t){return t===ShaderOutput/* ShaderOutput */.V.Highlight||(0,ShaderOutput/* isColorOrColorEmissionOrOID */.QG)(t)&&!this._transparent}_isOpaqueNoSSAODepthPass(t){return (0,ShaderOutput/* isDepth */.eh)(t)&&this.parameters.writeDepth&&!this._transparent}createGLMaterial(t){return new d(t)}createBufferWriter(){const t=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION);return (0,olidUtils/* olidEnabled */.E)()&&t.vec4u8(VertexAttribute/* VertexAttribute */.r.OLIDCOLOR),this.parameters.vvColor?t.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):t.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR),new DefaultBufferWriter/* DefaultBufferWriter */.Z(t)}}class d extends GLMaterial/* default */.A{beginSlot(t){return this.getTechnique(O,t)}}class P extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.color=vec4f64/* ZEROS */.uY,this.forceTransparentMode=!1,this.writeDepth=!0,this.hasVertexColors=!1,this.polygonOffset=!1,this.hasSlicePlane=!1,this.cullFace=basicInterfaces/* CullFaceOptions */.s2.None,this.draped=!1,this.discardInvisibleFragments=!1}}


/***/ }),

/***/ 25146:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57813);
/* harmony import */ var _lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6833);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(50645);
/* harmony import */ var _internal_bufferWriterUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(81500);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f{constructor(e){this.vertexBufferLayout=e}elementCount(e){return e.get(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexAttribute */ .r.POSITION).indices.length}write(e,t,r,o,i,f){return (0,_internal_bufferWriterUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .writeDefaultAttributes */ .SA)(r,o,this.vertexBufferLayout,e,t,i,f)}intersect(t,s,f,n,c,m,l){const a=this.vertexBufferLayout.createView(t).getField(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexAttribute */ .r.POSITION,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_2__/* .BufferViewVec3f */ .xs);if(null==a)return;const p=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.a)(u,m,c),y=0,b=a.count/3,d=n.options.normalRequired,j=(e,t,r)=>{l(e,r,t)};(0,_lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_3__/* .intersectRenderGeometryTriangles */ .b_)(c,p,y,b,a.typedBuffer,a.typedBufferStride,d,j)}}const u=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();


/***/ }),

/***/ 27776:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ci: () => (/* binding */ I),
/* harmony export */   KL: () => (/* binding */ t),
/* harmony export */   dB: () => (/* binding */ f),
/* harmony export */   l5: () => (/* binding */ c),
/* harmony export */   wB: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony export PositionUvOlidLayout */
/* harmony import */ var _support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(11110);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const I=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION),c=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f16(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0),f=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.COLOR),v=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f16(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.OLIDCOLOR),t=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0),r=(0,_support_buffer_InterleavedLayout_js__WEBPACK_IMPORTED_MODULE_0__/* .newLayout */ .BP)().vec3f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.POSITION).vec2f(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.UV0).vec4u8(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexAttribute */ .r.OLIDCOLOR);


/***/ }),

/***/ 9319:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(55274);
/* harmony import */ var _core_shaderLibrary_attributes_InstancedDoubleConfiguration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(94372);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(77941);
/* harmony import */ var _lib_OITPass_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69338);
/* harmony import */ var _webgl_BindType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(11809);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class a extends _core_shaderLibrary_attributes_InstancedDoubleConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .InstancedDoubleConfiguration */ .n{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.Color,this.oitPass=_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_4__/* .OITPass */ .Y.NONE,this.hasSlicePlane=!1,this.hasHighlightMixTexture=!1,this.bindType=_webgl_BindType_js__WEBPACK_IMPORTED_MODULE_5__/* .BindType */ .c.Pass,this.writeDepth=!0}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({count:_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderOutput */ .V.COUNT})],a.prototype,"output",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({count:_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_4__/* .OITPass */ .Y.COUNT})],a.prototype,"oitPass",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hasSlicePlane",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hasHighlightMixTexture",void 0);


/***/ }),

/***/ 62331:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  R: () => (/* binding */ ue)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f64.js
var mat3f64 = __webpack_require__(78607);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
;// ../node_modules/@arcgis/core/core/libs/gl-matrix-2/types/mat4.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n){return n instanceof Float32Array&&n.length>=16}function r(n){return Array.isArray(n)&&n.length>=16}function mat4_t(t){return n(t)||r(t)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/buffer/BufferView.js + 6 modules
var BufferView = __webpack_require__(57813);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/layers/support/FastSymbolUpdates.js
var FastSymbolUpdates = __webpack_require__(69463);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/debugFlags.js
var debugFlags = __webpack_require__(19620);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl.js
var HUD_glsl = __webpack_require__(97085);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js
var olidUtils = __webpack_require__(36340);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLTextureMaterial.js
var GLTextureMaterial = __webpack_require__(89140);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/screenSizePerspectiveUtils.js
var screenSizePerspectiveUtils = __webpack_require__(28953);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/ScaleInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.factor=new c,this.factorAlignment=new c}}class c{constructor(){this.scale=0,this.factor=0,this.minScaleFactor=0}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js
var bufferWriterUtils = __webpack_require__(81500);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/MaterialUtil.js
var MaterialUtil = __webpack_require__(29117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/HUDMaterial.glsl.js
var HUDMaterial_glsl = __webpack_require__(69726);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js + 1 modules
var ShaderTechnique = __webpack_require__(28347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var OITPass = __webpack_require__(69338);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,r){super(e,r,new ReloadableShaderModule/* ReloadableShaderModule */.$(HUDMaterial_glsl.H,(()=>__webpack_require__.e(/* import() */ 35466).then(__webpack_require__.bind(__webpack_require__, 35466))))),this.primitiveType=r.occlusionPass?enums/* PrimitiveType */.WR.POINTS:enums/* PrimitiveType */.WR.TRIANGLES}initializePipeline(s){const{oitPass:o,hasPolygonOffset:n,draped:a,output:h,depthTestEnabled:T,occlusionPass:g}=s,j=o===OITPass/* OITPass */.Y.NONE,b=o===OITPass/* OITPass */.Y.ColorAlpha,O=h===ShaderOutput/* ShaderOutput */.V.Highlight,P=T&&!a&&!b&&!g&&!O;return (0,renderState/* makePipelineState */.Ey)({blending:(0,ShaderOutput/* isColorOrColorEmission */.RN)(h)?j?renderState/* premultipliedAlpha */.RC:(0,OrderIndependentTransparency/* oitBlending */.ez)(o):null,depthTest:T&&!a?{func:enums/* CompareFunction */.MT.LEQUAL}:null,depthWrite:P?renderState/* defaultDepthWrite */.Uy:null,drawBuffers:(0,OrderIndependentTransparency/* getDrawBuffers */.m6)(o,h),colorWrite:renderState/* defaultColorWrite */.kn,polygonOffset:n?f:null})}}const f={factor:0,units:-4};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js
var TextureCoordinateAttribute_glsl = __webpack_require__(26139);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/Emissions.glsl.js
var Emissions_glsl = __webpack_require__(15420);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js + 1 modules
var ShaderTechniqueConfiguration = __webpack_require__(77941);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration.js
var DefaultTechniqueConfiguration = __webpack_require__(9319);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/HUDMaterialTechniqueConfiguration.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HUDMaterialTechniqueConfiguration_r extends DefaultTechniqueConfiguration/* DefaultTechniqueConfiguration */.E{constructor(e){super(),this.spherical=e,this.screenCenterOffsetUnitsEnabled=!1,this.occlusionTestEnabled=!0,this.signedDistanceFieldEnabled=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.vvSize=!1,this.vvColor=!1,this.hasVerticalOffset=!1,this.hasScreenSizePerspective=!1,this.hasRotation=!1,this.debugDrawLabelBorder=!1,this.hasPolygonOffset=!1,this.depthTestEnabled=!0,this.pixelSnappingEnabled=!0,this.draped=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.occludedFragmentFade=!1,this.objectAndLayerIdColorInstanced=!1,this.horizonCullingEnabled=!0,this.isFocused=!0,this.textureCoordinateType=TextureCoordinateAttribute_glsl/* TextureCoordinateType */.I.None,this.emissionSource=Emissions_glsl/* EmissionSource */.ZX.None,this.discardInvisibleFragments=!0,this.hasVvInstancing=!1,this.snowCover=!1}}(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"screenCenterOffsetUnitsEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"signedDistanceFieldEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"sampleSignedDistanceFieldTexelCenter",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvSize",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"vvColor",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasVerticalOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasScreenSizePerspective",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasRotation",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"debugDrawLabelBorder",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"hasPolygonOffset",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"depthTestEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"pixelSnappingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"draped",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"terrainDepthTest",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"cullAboveTerrain",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occlusionPass",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"occludedFragmentFade",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"objectAndLayerIdColorInstanced",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"horizonCullingEnabled",void 0),(0,tslib_es6._)([(0,ShaderTechniqueConfiguration/* parameter */.W)()],HUDMaterialTechniqueConfiguration_r.prototype,"isFocused",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/webscene/support/AlphaCutoff.js
var AlphaCutoff = __webpack_require__(63199);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/HUDMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ue extends Material/* Material */.im{constructor(e,t){super(e,Me),this.produces=new Map([[RenderSlot/* RenderSlot */.N.HUD_MATERIAL,e=>(0,ShaderOutput/* isColorEmissionHighlightOrOID */.Mb)(e)&&!this.parameters.drawAsLabel],[RenderSlot/* RenderSlot */.N.LABEL_MATERIAL,e=>(0,ShaderOutput/* isColorEmissionHighlightOrOID */.Mb)(e)&&this.parameters.drawAsLabel],[RenderSlot/* RenderSlot */.N.OCCLUSION_PIXELS,()=>this.parameters.occlusionTest],[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e=>this.parameters.draped&&(0,ShaderOutput/* isColorEmissionHighlightOrOID */.Mb)(e)]]),this._visible=!0,this._configuration=new HUDMaterialTechniqueConfiguration_r(t)}getConfiguration(e,t){const i=this.parameters.draped;return super.getConfiguration(e,t,this._configuration),this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasVerticalOffset=!!this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=!!this.parameters.screenSizePerspective,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits,this._configuration.hasPolygonOffset=this.parameters.polygonOffset,this._configuration.draped=i,this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.pixelSnappingEnabled=this.parameters.pixelSnappingEnabled,this._configuration.signedDistanceFieldEnabled=this.parameters.textureIsSignedDistanceField,this._configuration.sampleSignedDistanceFieldTexelCenter=this.parameters.sampleSignedDistanceFieldTexelCenter,this._configuration.hasRotation=this.parameters.hasRotation,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.occlusionPass=t.slot===RenderSlot/* RenderSlot */.N.OCCLUSION_PIXELS,this._configuration.occludedFragmentFade=!i&&this.parameters.occludedFragmentFade,this._configuration.horizonCullingEnabled=this.parameters.horizonCullingEnabled,this._configuration.isFocused=this.parameters.isFocused,this._configuration.depthTestEnabled=this.parameters.depthEnabled||t.slot===RenderSlot/* RenderSlot */.N.OCCLUSION_PIXELS,(0,ShaderOutput/* isColorOrColorEmission */.RN)(e)&&(this._configuration.debugDrawLabelBorder=!!debugFlags/* debugFlags */.b.LABELS_SHOW_BORDER),this._configuration.oitPass=t.oitPass,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration}intersect(e,t,s,a,n,o){const{options:{selectionMode:l,hud:c,excludeLabels:S},point:T,camera:b}=s,{parameters:v}=this;if(!l||!c||S&&v.isLabel||!e.visible||!T||!b)return;const E=e.attributes.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),I=null==E?null:(0,vec4f64/* fromArray */.ci)(E.data,ye),{scaleX:x,scaleY:F}=Xe(I,v,b.pixelRatio);(0,mat3/* fromMat4 */.z0)(Ie,t),e.attributes.has(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)&&de(Ie);const P=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),_=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE),C=e.attributes.get(VertexAttribute/* VertexAttribute */.r.NORMAL),y=e.attributes.get(VertexAttribute/* VertexAttribute */.r.ROTATION),D=e.attributes.get(VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE);(0,Util/* assert */.vA)(P.size>=3);const L=(0,HUDMaterial_glsl.c)(v),N="screen"===this.parameters.centerOffsetUnits;for(let i=0;i<P.data.length/P.size;i++){const e=i*P.size;(0,vec32.i)(Se,P.data[e],P.data[e+1],P.data[e+2]),(0,vec32.t)(Se,Se,t),(0,vec32.t)(Se,Se,b.viewMatrix);const a=i*D.size;if((0,vec32.i)(_e,D.data[a],D.data[a+1],D.data[a+2]),!N&&(Se[0]+=_e[0],Se[1]+=_e[1],0!==_e[2])){const e=_e[2];(0,vec32.n)(_e,Se),(0,vec32.d)(Se,Se,(0,vec32.g)(_e,_e,e))}const n=i*C.size;if((0,vec32.i)(Te,C.data[n],C.data[n+1],C.data[n+2]),me(Te,Ie,b,De),qe(this.parameters,Se,De,b,Oe),b.applyProjection(Se,be),be[0]>-1){N&&(_e[0]||_e[1])&&(be[0]+=_e[0]*b.pixelRatio,0!==_e[1]&&(be[1]+=(0,screenSizePerspectiveUtils/* applyScaleFactor */.m0)(_e[1],Oe.factorAlignment)*b.pixelRatio),b.unapplyProjection(be,Se)),be[0]+=this.parameters.screenOffset[0]*b.pixelRatio,be[1]+=this.parameters.screenOffset[1]*b.pixelRatio,be[0]=Math.floor(be[0]),be[1]=Math.floor(be[1]);const e=i*_.size;je[0]=_.data[e],je[1]=_.data[e+1],(0,screenSizePerspectiveUtils/* applyPrecomputedScaleFactor */.MD)(je,Oe.factor,je);const t=Le*b.pixelRatio;let a=0;if(v.textureIsSignedDistanceField){a=Math.min(v.outlineSize,.5*je[0])*b.pixelRatio/2}je[0]*=x,je[1]*=F;const n=i*y.size,l=v.rotation+y.data[n];if(ge(T,be[0],be[1],je,t,a,l,v,L)){const e=s.ray;if((0,vec32.t)(Ae,Se,(0,mat4/* invert */.B8)(Fe,b.viewMatrix)),be[0]=T[0],be[1]=T[1],b.unprojectFromRenderScreen(be,Se)){const t=(0,vec3f64/* create */.vt)();(0,vec32.c)(t,e.direction);const i=1/(0,vec32.l)(t);(0,vec32.g)(t,t,i);o((0,vec32.j)(e.origin,Se)*i,t,-1,Ae)}}}}}intersectDraped(e,t,i,s,r){const a=e.attributes.get(VertexAttribute/* VertexAttribute */.r.POSITION),n=e.attributes.get(VertexAttribute/* VertexAttribute */.r.SIZE),o=e.attributes.get(VertexAttribute/* VertexAttribute */.r.ROTATION),l=this.parameters,c=(0,HUDMaterial_glsl.c)(l),f=e.attributes.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),u=null==f?null:(0,vec4f64/* fromArray */.ci)(f.data,ye),{scaleX:p,scaleY:h}=Xe(u,l,e.screenToWorldRatio),m=Ne*e.screenToWorldRatio;for(let d=0;d<a.data.length/a.size;d++){const t=d*a.size,f=a.data[t],u=a.data[t+1],g=d*n.size;je[0]=n.data[g],je[1]=n.data[g+1];let O=0;if(l.textureIsSignedDistanceField){O=Math.min(l.outlineSize,.5*je[0])*e.screenToWorldRatio/2}je[0]*=p,je[1]*=h;const S=d*o.size,T=l.rotation+o.data[S];ge(i,f,u,je,m,O,T,l,c)&&s(r.distance,r.normal,-1)}}createBufferWriter(){return new Ve}applyShaderOffsetsView(e,t,i,s,r,a,n){const o=me(t,i,r,De);return this._applyVerticalGroundOffsetView(e,o,r,n),qe(this.parameters,n,o,r,a),this._applyPolygonOffsetView(n,o,s[3],r,n),this._applyCenterOffsetView(n,s,n),n}applyShaderOffsetsNDC(e,t,i,s,r){return this._applyCenterOffsetNDC(e,t,i,s),null!=r&&(0,vec32.c)(r,s),this._applyPolygonOffsetNDC(s,t,i,s),s}_applyPolygonOffsetView(t,i,s,r,a){const n=r.aboveGround?1:-1;let o=Math.sign(s);0===o&&(o=n);const l=n*o;if(this.parameters.shaderPolygonOffset<=0)return (0,vec32.c)(a,t);const c=(0,mathUtils/* clamp */.qE)(Math.abs(i.cosAngle),.01,1),f=1-Math.sqrt(1-c*c)/c/r.viewport[2];return (0,vec32.g)(a,t,l>0?f:1/f),a}_applyVerticalGroundOffsetView(e,t,i,s){const r=(0,vec32.l)(e),a=i.aboveGround?1:-1,n=i.computeRenderPixelSizeAtDist(r)*HUD_glsl/* HUDVerticalPixelOffset */.R,o=(0,vec32.g)(Se,t.normal,a*n);return (0,vec32.f)(s,e,o),s}_applyCenterOffsetView(e,t,i){const s="screen"!==this.parameters.centerOffsetUnits;return i!==e&&(0,vec32.c)(i,e),s&&(i[0]+=t[0],i[1]+=t[1],t[2]&&((0,vec32.n)(Te,i),(0,vec32.a)(i,i,(0,vec32.g)(Te,Te,t[2])))),i}_applyCenterOffsetNDC(e,t,i,s){const r="screen"!==this.parameters.centerOffsetUnits;return s!==e&&(0,vec32.c)(s,e),r||(s[0]+=t[0]/i.fullWidth*2,s[1]+=t[1]/i.fullHeight*2),s}_applyPolygonOffsetNDC(e,t,i,s){const r=this.parameters.shaderPolygonOffset;if(e!==s&&(0,vec32.c)(s,e),r){const e=i.aboveGround?1:-1,a=e*Math.sign(t[3]);s[2]-=(a||e)*r}return s}set visible(e){this._visible=e}get visible(){const{color:e,outlineSize:t,outlineColor:i}=this.parameters,s=e[3]>=AlphaCutoff/* alphaCutoff */.Q||t>=AlphaCutoff/* alphaCutoff */.Q&&i[3]>=AlphaCutoff/* alphaCutoff */.Q;return this._visible&&s}createGLMaterial(e){return new pe(e)}calculateRelativeScreenBounds(e,t,i=(0,aaBoundingRect/* create */.vt)()){return he(this.parameters,e,t,i),i[2]=i[0]+e[0],i[3]=i[1]+e[1],i}}class pe extends GLTextureMaterial/* GLTextureMaterial */.m8{constructor(e){super({...e,...e.material.parameters})}beginSlot(e){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.getTechnique(h,e)}}function he(e,t,i,s){s[0]=e.anchorPosition[0]*-t[0]+e.screenOffset[0]*i,s[1]=e.anchorPosition[1]*-t[1]+e.screenOffset[1]*i}function me(e,t,s,r){return mat4_t(t)&&(t=(0,mat3/* fromMat4 */.z0)(xe,t)),(0,vec32.o)(r.normal,e,t),(0,vec32.t)(r.normal,r.normal,s.viewInverseTransposeMatrix),r.cosAngle=(0,vec32.e)(ve,ze),r}function de(e){const t=e[0],i=e[1],s=e[2],r=e[3],a=e[4],n=e[5],o=e[6],l=e[7],c=e[8],f=1/Math.sqrt(t*t+i*i+s*s),u=1/Math.sqrt(r*r+a*a+n*n),p=1/Math.sqrt(o*o+l*l+c*c);return e[0]=t*f,e[1]=i*f,e[2]=s*f,e[3]=r*u,e[4]=a*u,e[5]=n*u,e[6]=o*p,e[7]=l*p,e[8]=c*p,e}function ge(e,i,s,r,a,l,c,f,u){let p=i-a-r[0]*u[0],h=p+r[0]+2*a,m=s-a-r[1]*u[1],d=m+r[1]+2*a;const g=f.distanceFieldBoundingBox;return f.textureIsSignedDistanceField&&null!=g&&(p+=r[0]*g[0],m+=r[1]*g[1],h-=r[0]*(1-g[2]),d-=r[1]*(1-g[3]),p-=l,h+=l,m-=l,d+=l),(0,vec2/* set */.hZ)(Re,i,s),(0,vec2/* rotate */.e$)(Ee,e,Re,(0,mathUtils/* deg2rad */.kU)(c)),Ee[0]>p&&Ee[0]<h&&Ee[1]>m&&Ee[1]<d}const Oe=new t,Se=(0,vec3f64/* create */.vt)(),Te=(0,vec3f64/* create */.vt)(),be=(0,vec4f64/* create */.vt)(),ve=(0,vec3f64/* create */.vt)(),Ae=(0,vec3f64/* create */.vt)(),Ee=(0,vec2f64/* create */.vt)(),Re=(0,vec2f64/* create */.vt)(),Ie=(0,mat3f64/* create */.vt)(),xe=(0,mat3f64/* create */.vt)(),Fe=(0,mat4f64/* create */.vt)(),Pe=(0,vec4f64/* create */.vt)(),_e=(0,vec3f64/* create */.vt)(),Ce=(0,vec3f64/* create */.vt)(),ye=(0,vec4f64/* create */.vt)(),De={normal:ve,cosAngle:0},Le=1,Ne=2,je=(0,vec2f64/* fromValues */.fA)(0,0),Ue=6,ze=(0,vec3f64/* fromValues */.fA)(0,0,1);class Me extends GLTextureMaterial/* GLTextureMaterialBindParameters */.NV{constructor(){super(...arguments),this.renderOccluded=Material/* RenderOccludedFlag */.m$.Occlude,this.isDecoration=!1,this.color=(0,vec4f64/* freeze */.CN)(1,1,1,1),this.polygonOffset=!1,this.anchorPosition=(0,vec2f64/* fromValues */.fA)(.5,.5),this.screenOffset=[0,0],this.shaderPolygonOffset=1e-5,this.textureIsSignedDistanceField=!1,this.sampleSignedDistanceFieldTexelCenter=!1,this.outlineColor=(0,vec4f64/* freeze */.CN)(1,1,1,1),this.outlineSize=0,this.distanceFieldBoundingBox=(0,vec4f64/* create */.vt)(),this.rotation=0,this.hasRotation=!1,this.vvSizeEnabled=!1,this.vvSize=null,this.vvColor=null,this.vvOpacity=null,this.vvSymbolAnchor=null,this.vvSymbolRotationMatrix=null,this.hasSlicePlane=!1,this.pixelSnappingEnabled=!0,this.occlusionTest=!0,this.occludedFragmentFade=!1,this.horizonCullingEnabled=!1,this.centerOffsetUnits="world",this.drawAsLabel=!1,this.depthEnabled=!0,this.isFocused=!0,this.focusStyle="bright",this.draped=!1,this.isLabel=!1}}const we=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec3f(VertexAttribute/* VertexAttribute */.r.NORMAL).vec2i16(VertexAttribute/* VertexAttribute */.r.UVI).vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR).vec2f(VertexAttribute/* VertexAttribute */.r.SIZE).f32(VertexAttribute/* VertexAttribute */.r.ROTATION).vec4f(VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE).vec4f(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),Be=we.clone().vec4u8(VertexAttribute/* VertexAttribute */.r.OLIDCOLOR);class Ve{constructor(){this.vertexBufferLayout=(0,olidUtils/* olidEnabled */.E)()?Be:we}elementCount(e){return e.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length*Ue}write(e,t,i,s,r,a){const{position:n,normal:o,uvi:l,color:c,size:f,rotation:u,centerOffsetAndDistance:p,featureAttribute:h}=r;(0,bufferWriterUtils/* writePosition */.Hk)(i.get(VertexAttribute/* VertexAttribute */.r.POSITION),e,n,a,Ue),(0,bufferWriterUtils/* writeNormal */.p1)(i.get(VertexAttribute/* VertexAttribute */.r.NORMAL),t,o,a,Ue);const m=i.get(VertexAttribute/* VertexAttribute */.r.UVI)?.data;let d=0,g=0,O=-1-HUDMaterial_glsl.f,S=-1-HUDMaterial_glsl.f;m&&m.length>=4&&(d=m[0],g=m[1],O=-1-m[2],S=-1-m[3]);let T=i.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length,b=a;for(let E=0;E<T;++E)l.set(b,0,d),l.set(b,1,g),b++,l.set(b,0,O),l.set(b,1,g),b++,l.set(b,0,O),l.set(b,1,S),b++,l.set(b,0,O),l.set(b,1,S),b++,l.set(b,0,d),l.set(b,1,S),b++,l.set(b,0,d),l.set(b,1,g),b++;(0,bufferWriterUtils/* writeColor */.tb)(i.get(VertexAttribute/* VertexAttribute */.r.COLOR),4,c,a,Ue);const{data:v,indices:A}=i.get(VertexAttribute/* VertexAttribute */.r.SIZE);T=A.length,b=a;for(let E=0;E<T;++E){const e=v[2*A[E]],t=v[2*A[E]+1];for(let i=0;i<Ue;++i)f.set(b,0,e),f.set(b,1,t),b++}if((0,bufferWriterUtils/* writeBufferFloat */.uO)(i.get(VertexAttribute/* VertexAttribute */.r.ROTATION),u,a,Ue),i.get(VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE)?(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(i.get(VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE),p,a,Ue):(0,bufferWriterUtils/* writeBufferVec4Zeros */.Pq)(p,a,T*Ue),i.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE)?(0,bufferWriterUtils/* writeBufferVec4 */.Ut)(i.get(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE),h,a,Ue):(0,bufferWriterUtils/* writeBufferVec4Zeros */.Pq)(h,a,T*Ue),null!=s){const e=i.get(VertexAttribute/* VertexAttribute */.r.POSITION)?.indices;if(e){const t=e.length,i=r.getField(VertexAttribute/* VertexAttribute */.r.OLIDCOLOR,BufferView/* BufferViewVec4u8 */.XP);(0,bufferWriterUtils/* writeOlidColor */.vx)(s,i,t,a,Ue)}}return{numVerticesPerItem:Ue,numItems:T}}intersect(e,t,i,s,a,n,o){const{options:{selectionMode:l,hud:c,excludeLabels:T},point:b,camera:v}=s;if(!l||!c||T&&t.isLabel||!b)return;const E=this.vertexBufferLayout.createView(e),R=E.getField(VertexAttribute/* VertexAttribute */.r.POSITION,BufferView/* BufferViewVec3f */.xs),I=E.getField(VertexAttribute/* VertexAttribute */.r.NORMAL,BufferView/* BufferViewVec3f */.xs),x=E.getField(VertexAttribute/* VertexAttribute */.r.ROTATION,BufferView/* BufferViewFloat */.Y$),F=E.getField(VertexAttribute/* VertexAttribute */.r.SIZE,BufferView/* BufferViewVec2f */.gH),P=E.getField(VertexAttribute/* VertexAttribute */.r.FEATUREATTRIBUTE,BufferView/* BufferViewVec4f */.Eq),_=E.getField(VertexAttribute/* VertexAttribute */.r.CENTEROFFSETANDDISTANCE,BufferView/* BufferViewVec4f */.Eq),N="screen"===t.centerOffsetUnits,j=(0,HUDMaterial_glsl.c)(t);if(null==R||null==I||null==x||null==F||null==_||null==v)return;const U=null==P?null:P.getVec(0,ye),{scaleX:z,scaleY:M}=Xe(U,t,v.pixelRatio),w=R.count/Ue;for(let C=0;C<w;C++){const e=C*Ue;if(R.getVec(e,Se),null!=i&&(0,vec32.f)(Se,Se,i),(0,vec32.t)(Se,Se,v.viewMatrix),_.getVec(e,Pe),(0,vec32.i)(_e,Pe[0],Pe[1],Pe[2]),!N&&(Se[0]+=_e[0],Se[1]+=_e[1],0!==_e[2])){const e=_e[2];(0,vec32.n)(_e,Se),(0,vec32.d)(Se,Se,(0,vec32.g)(_e,_e,e))}if(I.getVec(e,Te),me(Te,Ie,v,De),qe(t,Se,De,v,Oe),v.applyProjection(Se,be),be[0]>-1){N&&(_e[0]||_e[1])&&(be[0]+=_e[0]*v.pixelRatio,0!==_e[1]&&(be[1]+=(0,screenSizePerspectiveUtils/* applyScaleFactor */.m0)(_e[1],Oe.factorAlignment)*v.pixelRatio),v.unapplyProjection(be,Se)),be[0]+=t.screenOffset[0]*v.pixelRatio,be[1]+=t.screenOffset[1]*v.pixelRatio,be[0]=Math.floor(be[0]),be[1]=Math.floor(be[1]),F.getVec(e,je),(0,screenSizePerspectiveUtils/* applyPrecomputedScaleFactor */.MD)(je,Oe.factor,je);const i=Le*v.pixelRatio;let a=0;if(t.textureIsSignedDistanceField){a=Math.min(t.outlineSize,.5*je[0])*v.pixelRatio/2}je[0]*=z,je[1]*=M;const n=x.get(e),l=t.rotation+n;if(ge(b,be[0],be[1],je,i,a,l,t,j)){const e=s.ray;if((0,vec32.t)(Ae,Se,(0,mat4/* invert */.B8)(Fe,v.viewMatrix)),be[0]=b[0],be[1]=b[1],v.unprojectFromRenderScreen(be,Se)){const t=(0,vec3f64/* create */.vt)();(0,vec32.c)(t,e.direction);const i=1/(0,vec32.l)(t);(0,vec32.g)(t,t,i);o((0,vec32.j)(e.origin,Se)*i,t,C,Ae)}}}}}}function Xe(e,t,i){return null==e||null==t.vvSize?{scaleX:i,scaleY:i}:((0,FastSymbolUpdates/* evaluateModelTransformScale */.VC)(Ce,t,e),{scaleX:Ce[0]*i,scaleY:Ce[1]*i})}function qe(e,t,i,s,r){if(!e.verticalOffset?.screenLength){if(e.screenSizePerspective||e.screenSizePerspectiveAlignment){Ge(e,r,(0,vec32.l)(t),i.cosAngle)}else r.factor.scale=1,r.factorAlignment.scale=1;return t}const a=(0,vec32.l)(t),n=e.screenSizePerspectiveAlignment??e.screenSizePerspective,o=(0,MaterialUtil/* verticalOffsetAtDistance */.kE)(s,a,e.verticalOffset,i.cosAngle,n);return Ge(e,r,a,i.cosAngle),(0,vec32.g)(i.normal,i.normal,o),(0,vec32.f)(t,t,i.normal)}function Ge(e,t,i,s){null!=e.screenSizePerspective?(0,screenSizePerspectiveUtils/* precomputeScaleFactor */.cJ)(s,i,e.screenSizePerspective,t.factor):(t.factor.scale=1,t.factor.factor=0,t.factor.minScaleFactor=0),null!=e.screenSizePerspectiveAlignment?(0,screenSizePerspectiveUtils/* precomputeScaleFactor */.cJ)(s,i,e.screenSizePerspectiveAlignment,t.factorAlignment):(t.factorAlignment.factor=t.factor.factor,t.factorAlignment.scale=t.factor.scale,t.factorAlignment.minScaleFactor=t.factor.minScaleFactor)}


/***/ }),

/***/ 96824:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  W: () => (/* binding */ q)
});

// UNUSED EXPORTS: Parameters

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/float16.js
var float16 = __webpack_require__(11449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/lineSegment.js
var lineSegment = __webpack_require__(22759);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/plane.js
var plane = __webpack_require__(38774);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/support/buffer/InterleavedLayout.js
var InterleavedLayout = __webpack_require__(11110);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js
var ShaderOutput = __webpack_require__(55274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/effects/geometry/olidUtils.js
var olidUtils = __webpack_require__(36340);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterial.js
var GLMaterial = __webpack_require__(67341);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Material.js
var Material = __webpack_require__(45722);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js
var RenderSlot = __webpack_require__(38323);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js
var Util = __webpack_require__(58947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js
var VertexAttribute = __webpack_require__(50645);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/VisualVariablePassParameters.js
var VisualVariablePassParameters = __webpack_require__(17745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/internal/bufferWriterUtils.js
var bufferWriterUtils = __webpack_require__(81500);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js
var LineMarkerTechniqueConfiguration = __webpack_require__(58376);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/RibbonLine.glsl.js
var RibbonLine_glsl = __webpack_require__(50126);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js
var ReloadableShaderModule = __webpack_require__(47705);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js + 1 modules
var ShaderTechnique = __webpack_require__(28347);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OITPass.js
var OITPass = __webpack_require__(69338);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/OrderIndependentTransparency.js
var OrderIndependentTransparency = __webpack_require__(1931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js
var StencilUtils = __webpack_require__(98546);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/renderState.js
var renderState = __webpack_require__(2449);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class S extends ShaderTechnique/* ShaderTechnique */.w{constructor(e,i){super(e,i,new ReloadableShaderModule/* ReloadableShaderModule */.$(RibbonLine_glsl.R,(()=>__webpack_require__.e(/* import() */ 97274).then(__webpack_require__.bind(__webpack_require__, 97274)))),_),this.primitiveType=i.wireframe?enums/* PrimitiveType */.WR.LINES:enums/* PrimitiveType */.WR.TRIANGLE_STRIP}_makePipelineState(t,i){const{oitPass:c,output:f,hasOccludees:h,hasPolygonOffset:m}=t,O=c===OITPass/* OITPass */.Y.NONE,E=c===OITPass/* OITPass */.Y.FrontFace;return (0,renderState/* makePipelineState */.Ey)({blending:(0,ShaderOutput/* isColorOrColorEmission */.RN)(f)?(0,OrderIndependentTransparency/* blending */.Yf)(c):null,depthTest:{func:(0,OrderIndependentTransparency/* oitDepthTest */.K_)(c)},depthWrite:(0,OrderIndependentTransparency/* depthWrite */.z5)(t),drawBuffers:(0,ShaderTechnique/* depthOnlyOutputBuffersOr */.L)(f,(0,OrderIndependentTransparency/* getDrawBuffers */.m6)(c,f)),colorWrite:renderState/* defaultColorWrite */.kn,stencilWrite:h?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:h?i?StencilUtils/* stencilToolMaskBaseParams */.a9:StencilUtils/* stencilBaseAllZerosParams */.qh:null,polygonOffset:O||E?m?L:null:OrderIndependentTransparency/* OITPolygonOffset */.SE})}initializePipeline(e){if(e.occluder){const t=e.hasPolygonOffset?L:null,{output:i,hasOccludees:l}=e;this._occluderPipelineTransparent=(0,renderState/* makePipelineState */.Ey)({blending:renderState/* unpremultipliedAlphaToPremultipliedAlpha */.T8,polygonOffset:t,depthTest:StencilUtils/* depthCompareAlways */.sf,depthWrite:null,colorWrite:renderState/* defaultColorWrite */.kn,stencilWrite:null,stencilTest:l?StencilUtils/* stencilToolTransparentOccluderParams */.mK:null,drawBuffers:(0,ShaderTechnique/* depthOnlyOutputBuffersOr */.L)(i)}),this._occluderPipelineOpaque=(0,renderState/* makePipelineState */.Ey)({blending:renderState/* unpremultipliedAlphaToPremultipliedAlpha */.T8,polygonOffset:t,depthTest:l?StencilUtils/* depthCompareAlways */.sf:StencilUtils/* depthCompareLess */.m,depthWrite:null,colorWrite:renderState/* defaultColorWrite */.kn,stencilWrite:l?StencilUtils/* stencilWriteMaskOff */.r8:null,stencilTest:l?StencilUtils/* stencilToolMaskOccluderParams */.I$:null,drawBuffers:(0,ShaderTechnique/* depthOnlyOutputBuffersOr */.L)(i)}),this._occluderPipelineMaskWrite=(0,renderState/* makePipelineState */.Ey)({blending:null,polygonOffset:t,depthTest:StencilUtils/* depthCompareLess */.m,depthWrite:null,colorWrite:null,stencilWrite:l?StencilUtils/* stencilWriteMaskOn */.v0:null,stencilTest:l?StencilUtils/* stencilToolMaskBaseParams */.a9:null,drawBuffers:(0,ShaderTechnique/* depthOnlyOutputBuffersOr */.L)(i)})}return this._occludeePipeline=this._makePipelineState(e,!0),this._makePipelineState(e,!1)}getPipeline(e,t){if(e)return this._occludeePipeline;switch(t){case RenderSlot/* RenderSlot */.N.TRANSPARENT_OCCLUDER_MATERIAL:return this._occluderPipelineTransparent??super.getPipeline();case RenderSlot/* RenderSlot */.N.OCCLUDER_MATERIAL:return this._occluderPipelineOpaque??super.getPipeline();default:return this._occluderPipelineMaskWrite??super.getPipeline()}}}const L={factor:0,units:-4},_=new Map([[VertexAttribute/* VertexAttribute */.r.POSITION,0],[VertexAttribute/* VertexAttribute */.r.PREVIOUSDELTA,1],[VertexAttribute/* VertexAttribute */.r.NEXTDELTA,2],[VertexAttribute/* VertexAttribute */.r.U0,3],[VertexAttribute/* VertexAttribute */.r.LINEPARAMETERS,4],[VertexAttribute/* VertexAttribute */.r.COLOR,5],[VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE,5],[VertexAttribute/* VertexAttribute */.r.SIZE,6],[VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE,6],[VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE,7],[VertexAttribute/* VertexAttribute */.r.OLIDCOLOR,8]]);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js
var RibbonLineTechniqueConfiguration = __webpack_require__(16906);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/webscene/support/AlphaCutoff.js
var AlphaCutoff = __webpack_require__(63199);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var Y;!function(e){e[e.LEFT_JOIN_START=-2]="LEFT_JOIN_START",e[e.LEFT_JOIN_END=-1]="LEFT_JOIN_END",e[e.LEFT_CAP_START=-4]="LEFT_CAP_START",e[e.LEFT_CAP_END=-5]="LEFT_CAP_END",e[e.RIGHT_JOIN_START=2]="RIGHT_JOIN_START",e[e.RIGHT_JOIN_END=1]="RIGHT_JOIN_END",e[e.RIGHT_CAP_START=4]="RIGHT_CAP_START",e[e.RIGHT_CAP_END=5]="RIGHT_CAP_END"}(Y||(Y={}));class q extends Material/* Material */.im{constructor(e){super(e,Q),this._configuration=new RibbonLineTechniqueConfiguration/* RibbonLineTechniqueConfiguration */.Q,this.vertexAttributeLocations=_,this.produces=new Map([[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL,e=>(0,ShaderOutput/* isHighlightOrOID */.CL)(e)||(0,ShaderOutput/* isColorOrColorEmission */.RN)(e)&&this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil],[RenderSlot/* RenderSlot */.N.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>(0,ShaderOutput/* isDepth */.eh)(e)],[RenderSlot/* RenderSlot */.N.OCCLUDER_MATERIAL,e=>(0,ShaderOutput/* isColorEmissionHighlightOIDOrDepth */.T2)(e)&&this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil],[RenderSlot/* RenderSlot */.N.TRANSPARENT_OCCLUDER_MATERIAL,e=>(0,ShaderOutput/* isColorEmissionHighlightOIDOrDepth */.T2)(e)&&this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL,e=>(0,ShaderOutput/* isColorOrColorEmission */.RN)(e)&&this.parameters.writeDepth&&this.parameters.renderOccluded!==Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil],[RenderSlot/* RenderSlot */.N.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>(0,ShaderOutput/* isColorOrColorEmission */.RN)(e)&&!this.parameters.writeDepth&&this.parameters.renderOccluded!==Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil],[RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL,e=>(0,ShaderOutput/* is2DGeometryOutput */.i3)(e)]])}getConfiguration(e,t){super.getConfiguration(e,t,this._configuration),this._configuration.oitPass=t.oitPass,this._configuration.draped=t.slot===RenderSlot/* RenderSlot */.N.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==ShaderOutput/* ShaderOutput */.V.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.roundJoins="round"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&te(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.hasOccludees=t.hasOccludees,this._configuration.occluder=this.parameters.renderOccluded===Material/* RenderOccludedFlag */.m$.OccludeAndTransparentStencil,this._configuration.terrainDepthTest=t.terrainDepthTest&&(0,ShaderOutput/* isColorOrColorEmission */.RN)(e),this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.wireframe=this.parameters.wireframe,this._configuration}get visible(){return this.parameters.color[3]>=AlphaCutoff/* alphaCutoff */.Q||null!=this.parameters.stipplePattern&&(this.parameters.stippleOffColor?.[3]??0)>AlphaCutoff/* alphaCutoff */.Q}intersectDraped({attributes:e,screenToWorldRatio:r},i,s,a,n){if(!i.options.selectionMode)return;const o=e.get(VertexAttribute/* VertexAttribute */.r.SIZE);let l=this.parameters.width;if(this.parameters.vvSize){const r=e.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0];Number.isNaN(r)?l*=this.parameters.vvSize.fallback[0]:l*=(0,mathUtils/* clamp */.qE)(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else o&&(l*=o.data[0]);const c=s[0],p=s[1],h=(l/2+4)*r;let f=Number.MAX_VALUE,m=0;const u=e.get(VertexAttribute/* VertexAttribute */.r.POSITION).data,T=ee(this.parameters,e)?u.length-2:u.length-5;for(let d=0;d<T;d+=3){const e=u[d],r=u[d+1],i=(d+3)%u.length,s=c-e,a=p-r,n=u[i]-e,o=u[i+1]-r,l=(0,mathUtils/* clamp */.qE)((n*s+o*a)/(n*n+o*o),0,1),h=n*l-s,T=o*l-a,E=h*h+T*T;E<f&&(f=E,m=d/3)}f<h*h&&a(n.distance,n.normal,m)}intersect(r,f,m,u,T,A){const{options:S,camera:v,rayBegin:P,rayEnd:N}=m;if(!S.selectionMode||!r.visible||!v)return;if(!(0,Util/* isTranslationMatrix */.zH)(f))return void Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix");const L=r.attributes,b=L.get(VertexAttribute/* VertexAttribute */.r.POSITION).data;let C=this.parameters.width;if(this.parameters.vvSize){const e=L.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE).data[0];Number.isNaN(e)||(C*=(0,mathUtils/* clamp */.qE)(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0]))}else L.has(VertexAttribute/* VertexAttribute */.r.SIZE)&&(C*=L.get(VertexAttribute/* VertexAttribute */.r.SIZE).data[0]);const U=ne;(0,vec2/* copy */.C)(U,m.point);const y=C*v.pixelRatio/2+4*v.pixelRatio;(0,vec32.i)(de[0],U[0]-y,U[1]+y,0),(0,vec32.i)(de[1],U[0]+y,U[1]+y,0),(0,vec32.i)(de[2],U[0]+y,U[1]-y,0),(0,vec32.i)(de[3],U[0]-y,U[1]-y,0);for(let e=0;e<4;e++)if(!v.unprojectFromRenderScreen(de[e],Ee[e]))return;(0,plane/* fromPoints */.Cr)(v.eye,Ee[0],Ee[1],_e),(0,plane/* fromPoints */.Cr)(v.eye,Ee[1],Ee[2],Ae),(0,plane/* fromPoints */.Cr)(v.eye,Ee[2],Ee[3],Re),(0,plane/* fromPoints */.Cr)(v.eye,Ee[3],Ee[0],ge);let j=Number.MAX_VALUE,D=0;const F=ee(this.parameters,L)?b.length-2:b.length-5;for(let e=0;e<F;e+=3){re[0]=b[e]+f[12],re[1]=b[e+1]+f[13],re[2]=b[e+2]+f[14];const t=(e+3)%b.length;if(ie[0]=b[t]+f[12],ie[1]=b[t+1]+f[13],ie[2]=b[t+2]+f[14],(0,plane/* signedDistance */.mN)(_e,re)<0&&(0,plane/* signedDistance */.mN)(_e,ie)<0||(0,plane/* signedDistance */.mN)(Ae,re)<0&&(0,plane/* signedDistance */.mN)(Ae,ie)<0||(0,plane/* signedDistance */.mN)(Re,re)<0&&(0,plane/* signedDistance */.mN)(Re,ie)<0||(0,plane/* signedDistance */.mN)(ge,re)<0&&(0,plane/* signedDistance */.mN)(ge,ie)<0)continue;if(v.projectToRenderScreen(re,oe),v.projectToRenderScreen(ie,le),oe[2]<0&&le[2]>0){(0,vec32.d)(se,re,ie);const e=v.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],re)/(0,vec32.e)(se,(0,plane/* getNormal */.Qj)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec32.g)(se,se,t),(0,vec32.f)(re,re,se),v.projectToRenderScreen(re,oe)}else if(oe[2]>0&&le[2]<0){(0,vec32.d)(se,ie,re);const e=v.frustum,t=-(0,plane/* signedDistance */.mN)(e[frustum/* PlaneIndex */.FB.NEAR],ie)/(0,vec32.e)(se,(0,plane/* getNormal */.Qj)(e[frustum/* PlaneIndex */.FB.NEAR]));(0,vec32.g)(se,se,t),(0,vec32.f)(ie,ie,se),v.projectToRenderScreen(ie,le)}else if(oe[2]<0&&le[2]<0)continue;oe[2]=0,le[2]=0;const r=(0,lineSegment/* distance2 */.kb)((0,lineSegment/* fromPoints */.Cr)(oe,le,he),U);r<j&&(j=r,(0,vec32.c)(ce,re),(0,vec32.c)(pe,ie),D=e/3)}if(j<y*y){let e=Number.MAX_VALUE;if((0,lineSegment/* closestLineSegmentPoint */.ld)((0,lineSegment/* fromPoints */.Cr)(ce,pe,he),(0,lineSegment/* fromPoints */.Cr)(P,N,fe),ae)){(0,vec32.d)(ae,ae,P);const t=(0,vec32.l)(ae);(0,vec32.g)(ae,ae,1/t),e=t/(0,vec32.j)(P,N)}A(e,ae,D)}}get _layout(){const e=(0,InterleavedLayout/* newLayout */.BP)().vec3f(VertexAttribute/* VertexAttribute */.r.POSITION).vec4f16(VertexAttribute/* VertexAttribute */.r.PREVIOUSDELTA).vec4f16(VertexAttribute/* VertexAttribute */.r.NEXTDELTA).f32(VertexAttribute/* VertexAttribute */.r.U0).vec2f16(VertexAttribute/* VertexAttribute */.r.LINEPARAMETERS);return this.parameters.vvColor?e.f32(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE):e.vec4u8(VertexAttribute/* VertexAttribute */.r.COLOR,{glNormalized:!0}),this.parameters.vvSize?e.f32(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE):e.f32(VertexAttribute/* VertexAttribute */.r.SIZE),this.parameters.vvOpacity&&e.f32(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE),(0,olidUtils/* olidEnabled */.E)()&&e.vec4u8(VertexAttribute/* VertexAttribute */.r.OLIDCOLOR),e}createBufferWriter(){return new K(this._layout,this.parameters)}createGLMaterial(e){return new X(e)}validateParameters(e){"miter"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class X extends GLMaterial/* default */.A{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextures.release(this._stipplePattern),this._stipplePattern=null}beginSlot(e){const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextures.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.getTechnique(S,e)}}class Q extends VisualVariablePassParameters/* VisualVariablePassParameters */.S{constructor(){super(...arguments),this.width=0,this.color=vec4f64/* ONES */.Un,this.join="miter",this.cap=RibbonLineTechniqueConfiguration/* CapType */.x.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.wireframe=!1}get transparent(){return this.color[3]<1||null!=this.stipplePattern&&(this.stippleOffColor?.[3]??0)<1}}class K{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t;const r=t.stipplePattern?1:0;switch(this._parameters.join){case"miter":case"bevel":this.numJoinSubdivisions=r;break;case"round":this.numJoinSubdivisions=RibbonLine_glsl.r+r}}_isClosed(e){return ee(this._parameters,e)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2,r=e.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length/2+1,i=this._isClosed(e);let s=i?2:2*t;return s+=((i?r:r-1)-(i?0:1))*(2*this.numJoinSubdivisions+4),s+=2,this._parameters.wireframe&&(s=2+4*(s-2)),s}write(e,t,r,i,a,n){const o=r.get(VertexAttribute/* VertexAttribute */.r.POSITION),l=o.indices,p=o.data.length/3,m=r.get(VertexAttribute/* VertexAttribute */.r.DISTANCETOSTART)?.data;l&&l.length!==2*(p-1)&&console.warn("RibbonLineMaterial does not support indices");const u=(this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE)?r.get(VertexAttribute/* VertexAttribute */.r.SIZEFEATUREATTRIBUTE)?.data[0]:r.get(VertexAttribute/* VertexAttribute */.r.SIZE)?.data[0])??1;let d=[1,1,1,1],E=0;const _=this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE);_?E=r.get(VertexAttribute/* VertexAttribute */.r.COLORFEATUREATTRIBUTE).data[0]:r.has(VertexAttribute/* VertexAttribute */.r.COLOR)&&(d=r.get(VertexAttribute/* VertexAttribute */.r.COLOR).data);const A=this.vertexBufferLayout.fields.has(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE),R=A?r.get(VertexAttribute/* VertexAttribute */.r.OPACITYFEATUREATTRIBUTE).data[0]:0,g=new Float32Array(a.buffer),S=(0,float16/* makeFloat16Array */.Bg)(a.buffer),O=new Uint8Array(a.buffer),I=this.vertexBufferLayout.stride/4;let v=n*I;const P=v;let N=0;const L=m?(e,t,r)=>N=m[r]:(e,t,r)=>N+=(0,vec32.j)(e,t),b=g.BYTES_PER_ELEMENT/S.BYTES_PER_ELEMENT,C=4/b,U=(e,t,r,s,a,n,o)=>{g[v++]=t[0],g[v++]=t[1],g[v++]=t[2],(0,bufferWriterUtils/* writeDeltaF16Vector */.Wu)(e,t,S,v*b),v+=C,(0,bufferWriterUtils/* writeDeltaF16Vector */.Wu)(r,t,S,v*b),v+=C,g[v++]=o;let l=v*b;if(S[l++]=s,S[l++]=a,v=Math.ceil(l/b),_)g[v]=E;else{const e=Math.min(4*n,d.length-4),t=4*v;O[t]=255*d[e],O[t+1]=255*d[e+1],O[t+2]=255*d[e+2],O[t+3]=255*d[e+3]}if(v++,g[v++]=u,A&&(g[v++]=R),(0,olidUtils/* olidEnabled */.E)()){let e=4*v;i?(O[e++]=i[0],O[e++]=i[1],O[e++]=i[2],O[e++]=i[3]):(O[e++]=0,O[e++]=0,O[e++]=0,O[e++]=0),v=Math.ceil(.25*e)}};v+=I,(0,vec32.i)(ue,o.data[0],o.data[1],o.data[2]),e&&(0,vec32.t)(ue,ue,e);const j=this._isClosed(r);if(j){const t=o.data.length-3;(0,vec32.i)(me,o.data[t],o.data[t+1],o.data[t+2]),e&&(0,vec32.t)(me,me,e)}else (0,vec32.i)(Te,o.data[3],o.data[4],o.data[5]),e&&(0,vec32.t)(Te,Te,e),U(ue,ue,Te,1,Y.LEFT_CAP_START,0,0),U(ue,ue,Te,1,Y.RIGHT_CAP_START,0,0),(0,vec32.c)(me,ue),(0,vec32.c)(ue,Te);const D=j?0:1,F=j?p:p-1;for(let h=D;h<F;h++){const t=(h+1)%p*3;(0,vec32.i)(Te,o.data[t],o.data[t+1],o.data[t+2]),e&&(0,vec32.t)(Te,Te,e),L(me,ue,h),U(me,ue,Te,0,Y.LEFT_JOIN_END,h,N),U(me,ue,Te,0,Y.RIGHT_JOIN_END,h,N);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);U(me,ue,Te,t,Y.LEFT_JOIN_END,h,N),U(me,ue,Te,t,Y.RIGHT_JOIN_END,h,N)}U(me,ue,Te,1,Y.LEFT_JOIN_START,h,N),U(me,ue,Te,1,Y.RIGHT_JOIN_START,h,N),(0,vec32.c)(me,ue),(0,vec32.c)(ue,Te)}j?((0,vec32.i)(Te,o.data[3],o.data[4],o.data[5]),e&&(0,vec32.t)(Te,Te,e),N=L(me,ue,F),U(me,ue,Te,0,Y.LEFT_JOIN_END,D,N),U(me,ue,Te,0,Y.RIGHT_JOIN_END,D,N)):(N=L(me,ue,F),U(me,ue,ue,0,Y.LEFT_CAP_END,F,N),U(me,ue,ue,0,Y.RIGHT_CAP_END,F,N)),$(g,P+I,g,P,I);return v=$(g,v-I,g,v,I),this._parameters.wireframe&&this._addWireframeVertices(a,P,v,I),null}_addWireframeVertices(e,t,r,i){const s=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=$(a,e,s,n,i);for(let l=0;l<a.length-1;l+=2*i)o(l),o(l+2*i),o(l+1*i),o(l+2*i),o(l+1*i),o(l+3*i)}}function $(e,t,r,i,s){for(let a=0;a<s;a++)r[i++]=e[t++];return i}function ee(e,t){if(!e.isClosed)return!1;return t.get(VertexAttribute/* VertexAttribute */.r.POSITION).indices.length>2}function te(e){return e.anchor===LineMarkerTechniqueConfiguration/* LineMarkerAnchor */.kJ.Tip&&e.hideOnShortSegments&&"begin-end"===e.placement&&e.worldSpace}const re=(0,vec3f64/* create */.vt)(),ie=(0,vec3f64/* create */.vt)(),se=(0,vec3f64/* create */.vt)(),ae=(0,vec3f64/* create */.vt)(),ne=(0,vec3f64/* create */.vt)(),oe=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),le=(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),ce=(0,vec3f64/* create */.vt)(),pe=(0,vec3f64/* create */.vt)(),he=(0,lineSegment/* create */.vt)(),fe=(0,lineSegment/* create */.vt)(),me=(0,vec3f64/* create */.vt)(),ue=(0,vec3f64/* create */.vt)(),Te=(0,vec3f64/* create */.vt)(),de=[(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)(),(0,screenUtils/* createRenderScreenPointArray3 */.r_)()],Ee=[(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)(),(0,vec3f64/* create */.vt)()],_e=(0,plane/* create */.vt)(),Ae=(0,plane/* create */.vt)(),Re=(0,plane/* create */.vt)(),ge=(0,plane/* create */.vt)();


/***/ }),

/***/ 52873:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(45722);
/* harmony import */ var _lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6833);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends _lib_Material_js__WEBPACK_IMPORTED_MODULE_1__/* .Material */ .im{constructor(){super(...arguments),this._pp0=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(0,0,1),this._pp1=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(0,0,0)}intersect(t,i,r,s,e,o){return (0,_lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_2__/* .intersectTriangleGeometry */ .Uy)(t,r,s,e,void 0,o)}intersectDraped(t,i,r,s){return this._pp0[0]=this._pp1[0]=r[0],this._pp0[1]=this._pp1[1]=r[1],(0,_lib_RayIntersections_js__WEBPACK_IMPORTED_MODULE_2__/* .intersectTriangleGeometry */ .Uy)(t,i,this._pp0,this._pp1,void 0,s)}}


/***/ }),

/***/ 17745:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   S: () => (/* binding */ t),
/* harmony export */   p: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _layers_support_FastSymbolUpdates_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(69463);
/* harmony import */ var _lib_Material_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(45722);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t extends _layers_support_FastSymbolUpdates_js__WEBPACK_IMPORTED_MODULE_0__/* .VisualVariablesParameters */ .Gd{constructor(){super(...arguments),this.renderOccluded=_lib_Material_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderOccludedFlag */ .m$.Occlude,this.isDecoration=!1}}const e=8;


/***/ }),

/***/ 29117:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MB: () => (/* binding */ n),
/* harmony export */   Um: () => (/* binding */ o),
/* harmony export */   kE: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92504);
/* harmony import */ var _lib_screenSizePerspectiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(28953);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(r,i,n,o,l){let s=(n.screenLength||0)*r.pixelRatio;null!=l&&(s=(0,_lib_screenSizePerspectiveUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .scale */ .hs)(s,o,i,l));const a=s*Math.tan(.5*r.fovY)/(.5*r.fullHeight);return (0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .clamp */ .qE)(a*i,n.minWorldLength||0,null!=n.maxWorldLength?n.maxWorldLength:1/0)}function n(t,e){let i=!1;for(const n in e){const o=e[n];void 0!==o&&(Array.isArray(o)?Array.isArray(t[n])&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .aI)(o,t[n])||(t[n]=o.slice(),i=!0):t[n]!==o&&(i=!0,t[n]=o))}return i}const o={multiply:1,ignore:2,replace:3,tint:4};


/***/ }),

/***/ 81500:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hk: () => (/* binding */ R),
/* harmony export */   Pq: () => (/* binding */ F),
/* harmony export */   SA: () => (/* binding */ k),
/* harmony export */   Ut: () => (/* binding */ h),
/* harmony export */   Wu: () => (/* binding */ v),
/* harmony export */   p1: () => (/* binding */ S),
/* harmony export */   tb: () => (/* binding */ N),
/* harmony export */   uO: () => (/* binding */ b),
/* harmony export */   vx: () => (/* binding */ L),
/* harmony export */   zC: () => (/* binding */ z)
/* harmony export */ });
/* unused harmony exports writeBufferMat3f, writeBufferMat4f, writeBufferVec2, writeBufferVec3, writeTangent, writeVVFeatureAttribute */
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21742);
/* harmony import */ var _geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57813);
/* harmony import */ var _lib_Util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58947);
/* harmony import */ var _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50645);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(e,t,f,r=1){const{data:o,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===r)for(let l=0;l<c;++l)s[f]=o[i[l]],f+=n;else for(let l=0;l<c;++l){const e=o[i[l]];for(let t=0;t<r;t++)s[f]=e,f+=n}}function m(e,t,f){const{data:r,indices:o}=e,i=t.typedBuffer,s=t.typedBufferStride,n=o.length;f*=s;for(let c=0;c<n;++c){const e=2*o[c];i[f]=r[e],i[f+1]=r[e+1],f+=s}}function O(e,t,f,r=1){const{data:o,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===r)for(let l=0;l<c;++l){const e=3*i[l];s[f]=o[e],s[f+1]=o[e+1],s[f+2]=o[e+2],f+=n}else for(let l=0;l<c;++l){const e=3*i[l];for(let t=0;t<r;++t)s[f]=o[e],s[f+1]=o[e+1],s[f+2]=o[e+2],f+=n}}function h(e,t,f,r=1){const{data:o,indices:i}=e,s=t.typedBuffer,n=t.typedBufferStride,c=i.length;if(f*=n,1===r)for(let l=0;l<c;++l){const e=4*i[l];s[f]=o[e],s[f+1]=o[e+1],s[f+2]=o[e+2],s[f+3]=o[e+3],f+=n}else for(let l=0;l<c;++l){const e=4*i[l];for(let t=0;t<r;++t)s[f]=o[e],s[f+1]=o[e+1],s[f+2]=o[e+2],s[f+3]=o[e+3],f+=n}}function F(e,t,f){const r=e.typedBuffer,o=e.typedBufferStride;t*=o;for(let i=0;i<f;++i)r[t]=0,r[t+1]=0,r[t+2]=0,r[t+3]=0,t+=o}function I(e,t,f){const{data:r,indices:o}=e,i=t.typedBuffer,s=t.typedBufferStride,n=o.length;f*=s;for(let c=0;c<n;++c){const e=9*o[c];for(let t=0;t<9;++t)i[f+t]=r[e+t];f+=s}}function T(e,t,f){const{data:r,indices:o}=e,i=t.typedBuffer,s=t.typedBufferStride,n=o.length;f*=s;for(let c=0;c<n;++c){const e=16*o[c];for(let t=0;t<16;++t)i[f+t]=r[e+t];f+=s}}function R(e,t,f,r,i=1){if(!t)return void O(e,f,r,i);const{data:s,indices:n}=e,c=f.typedBuffer,l=f.typedBufferStride,d=n.length,u=t[0],a=t[1],p=t[2],g=t[4],B=t[5],y=t[6],b=t[8],m=t[9],h=t[10],F=t[12],I=t[13],T=t[14];r*=l;let R=0,S=0,E=0;const N=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .hasIdentityRotation */ .tZ)(t)?e=>{R=s[e]+F,S=s[e+1]+I,E=s[e+2]+T}:e=>{const t=s[e],f=s[e+1],r=s[e+2];R=u*t+g*f+b*r+F,S=a*t+B*f+m*r+I,E=p*t+y*f+h*r+T};if(1===i)for(let o=0;o<d;++o)N(3*n[o]),c[r]=R,c[r+1]=S,c[r+2]=E,r+=l;else for(let o=0;o<d;++o){N(3*n[o]);for(let e=0;e<i;++e)c[r]=R,c[r+1]=S,c[r+2]=E,r+=l}}function S(e,t,f,r,s=1){if(!t)return void O(e,f,r,s);const{data:n,indices:c}=e,l=t,d=f.typedBuffer,u=f.typedBufferStride,a=c.length,p=l[0],g=l[1],B=l[2],y=l[4],b=l[5],m=l[6],h=l[8],F=l[9],I=l[10],T=!(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .isOrthoNormal */ .ut)(l),R=1e-6,S=1-R;r*=u;let E=0,N=0,A=0;const v=(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .hasIdentityRotation */ .tZ)(l)?e=>{E=n[e],N=n[e+1],A=n[e+2]}:e=>{const t=n[e],f=n[e+1],r=n[e+2];E=p*t+y*f+h*r,N=g*t+b*f+F*r,A=B*t+m*f+I*r};if(1===s)if(T)for(let o=0;o<a;++o){v(3*c[o]);const e=E*E+N*N+A*A;if(e<S&&e>R){const t=1/Math.sqrt(e);d[r]=E*t,d[r+1]=N*t,d[r+2]=A*t}else d[r]=E,d[r+1]=N,d[r+2]=A;r+=u}else for(let o=0;o<a;++o)v(3*c[o]),d[r]=E,d[r+1]=N,d[r+2]=A,r+=u;else for(let o=0;o<a;++o){if(v(3*c[o]),T){const e=E*E+N*N+A*A;if(e<S&&e>R){const t=1/Math.sqrt(e);E*=t,N*=t,A*=t}}for(let e=0;e<s;++e)d[r]=E,d[r+1]=N,d[r+2]=A,r+=u}}function E(e,t,f,r,o=1){if(!t)return void h(e,f,r,o);const{data:s,indices:n}=e,c=t,l=f.typedBuffer,d=f.typedBufferStride,u=n.length,a=c[0],p=c[1],g=c[2],B=c[4],y=c[5],b=c[6],m=c[8],O=c[9],F=c[10],I=!(0,_core_libs_gl_matrix_2_math_mat4_js__WEBPACK_IMPORTED_MODULE_2__/* .isOrthoNormal */ .ut)(c),T=1e-6,R=1-T;if(r*=d,1===o)for(let i=0;i<u;++i){const e=4*n[i],t=s[e],f=s[e+1],o=s[e+2],c=s[e+3];let u=a*t+B*f+m*o,h=p*t+y*f+O*o,S=g*t+b*f+F*o;if(I){const e=u*u+h*h+S*S;if(e<R&&e>T){const t=1/Math.sqrt(e);u*=t,h*=t,S*=t}}l[r]=u,l[r+1]=h,l[r+2]=S,l[r+3]=c,r+=d}else for(let i=0;i<u;++i){const e=4*n[i],t=s[e],f=s[e+1],c=s[e+2],u=s[e+3];let h=a*t+B*f+m*c,S=p*t+y*f+O*c,E=g*t+b*f+F*c;if(I){const e=h*h+S*S+E*E;if(e<R&&e>T){const t=1/Math.sqrt(e);h*=t,S*=t,E*=t}}for(let i=0;i<o;++i)l[r]=h,l[r+1]=S,l[r+2]=E,l[r+3]=u,r+=d}}function N(e,t,f,r,o=1){const{data:i,indices:s}=e,n=f.typedBuffer,c=f.typedBufferStride,l=s.length;if(r*=c,t!==i.length||4!==t)if(1!==o)if(4!==t)for(let d=0;d<l;++d){const e=3*s[d];for(let t=0;t<o;++t)n[r]=i[e],n[r+1]=i[e+1],n[r+2]=i[e+2],n[r+3]=255,r+=c}else for(let d=0;d<l;++d){const e=4*s[d];for(let t=0;t<o;++t)n[r]=i[e],n[r+1]=i[e+1],n[r+2]=i[e+2],n[r+3]=i[e+3],r+=c}else{if(4===t){for(let e=0;e<l;++e){const t=4*s[e];n[r]=i[t],n[r+1]=i[t+1],n[r+2]=i[t+2],n[r+3]=i[t+3],r+=c}return}for(let e=0;e<l;++e){const t=3*s[e];n[r]=i[t],n[r+1]=i[t+1],n[r+2]=i[t+2],n[r+3]=255,r+=c}}else{n[r]=i[0],n[r+1]=i[1],n[r+2]=i[2],n[r+3]=i[3];const e=new Uint32Array(f.typedBuffer.buffer,f.start),t=c/4,s=e[r/=4];r+=t;const d=l*o;for(let f=1;f<d;++f)e[r]=s,r+=t}}function A(e,t,f){const{data:r,indices:o}=e,i=t.typedBuffer,s=t.typedBufferStride,n=o.length,c=r[0];f*=s;for(let l=0;l<n;++l)i[f]=c,f+=s}function v(r,o,i,s){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.d)(w,r,o);const n=Math.max(Math.sqrt((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.l)(w)),1e-4);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.g)(w,w,1/n),i[s++]=w[0],i[s++]=w[1],i[s++]=w[2],i[s++]=n}const w=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();function L(e,t,f,r,o=1){const i=t.typedBuffer,s=t.typedBufferStride;if(r*=s,1===o)for(let n=0;n<f;++n)i[r]=e[0],i[r+1]=e[1],i[r+2]=e[2],i[r+3]=e[3],r+=s;else for(let n=0;n<f;++n)for(let t=0;t<o;++t)i[r]=e[0],i[r+1]=e[1],i[r+2]=e[2],i[r+3]=e[3],r+=s}function k(e,t,f,r,o,i,n){let c={numItems:0,numVerticesPerItem:0};for(const l of f.fields.keys()){const f=e.get(l),d=f?.indices;if(f&&d)l===_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.POSITION&&(c={numItems:1,numVerticesPerItem:d.length}),z(l,f,r,o,i,n);else if(l===_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.OLIDCOLOR&&null!=t){const f=e.get(_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.POSITION)?.indices;if(f){const e=f.length;L(t,i.getField(l,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec4u8 */ .XP),e,n)}}}return c}function z(e,t,f,r,o,i){switch(e){case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.POSITION:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(3===t.size);const r=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec3f */ .xs);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!r,`No buffer view for ${e}`),R(t,f,r,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.NORMAL:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(3===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec3f */ .xs);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),S(t,r,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.NORMALCOMPRESSED:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.PROFILERIGHT:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.PROFILEUP:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(2===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec2i16 */ .mJ);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),m(t,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.UV0:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(2===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec2f16 */ .ZD)??o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec2f */ .gH);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),m(t,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.UVI:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(2===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec2i16 */ .mJ);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),m(t,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLOR:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SYMBOLCOLOR:{const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec4u8 */ .XP);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(3===t.size||4===t.size),N(t,t.size,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.COLORFEATUREATTRIBUTE:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.OPACITYFEATUREATTRIBUTE:case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.SIZEFEATUREATTRIBUTE:{const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewFloat */ .Y$)??o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewFloat */ .Y$);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(1===t.size),A(t,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.TANGENT:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(4===t.size);const r=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec4f */ .Eq);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!r,`No buffer view for ${e}`),E(t,f,r,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.PROFILEVERTEXANDNORMAL:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(4===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec4f16 */ .jz)??o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec4f */ .Eq);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),h(t,f,i);break}case _lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexAttribute */ .r.PROFILEAUXDATA:{(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(3===t.size);const f=o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec3f16 */ .EC)??o.getField(e,_geometry_support_buffer_BufferView_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferViewVec3f */ .xs);(0,_lib_Util_js__WEBPACK_IMPORTED_MODULE_4__/* .assert */ .vA)(!!f,`No buffer view for ${e}`),O(t,f,i);break}}}


/***/ }),

/***/ 86868:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Xq: () => (/* binding */ n),
/* harmony export */   wk: () => (/* binding */ h)
/* harmony export */ });
/* unused harmony export getStipplePatternForPatternStyle */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},o={dash:t.dash,"dash-dot":[...t.dash,...t.dot],dot:t.dot,"long-dash":t["long-dash"],"long-dash-dot":[...t["long-dash"],...t.dot],"long-dash-dot-dot":[...t["long-dash"],...t.dot,...t.dot],none:null,"short-dash":t["short-dash"],"short-dash-dot":[...t["short-dash"],...t["short-dot"]],"short-dash-dot-dot":[...t["short-dash"],...t["short-dot"],...t["short-dot"]],"short-dot":t["short-dot"],solid:null},d=8;function s(t,o){return null==t?t:{pattern:t.slice(),pixelRatio:o}}function h(t){return{pattern:[t,t],pixelRatio:2}}function n(t){return"style"===t?.type?l(t.style):null}function l(t){return null!=t?s(o[t],d):null}


/***/ }),

/***/ 12221:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bt: () => (/* binding */ o),
/* harmony export */   Jr: () => (/* binding */ n),
/* harmony export */   SY: () => (/* binding */ s),
/* harmony export */   mb: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export useSchematicPBRI3S */
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(58359);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n({normalTexture:e,metallicRoughnessTexture:n,metallicFactor:r,roughnessFactor:t,emissiveTexture:o,emissiveFactor:s,occlusionTexture:c}){return null==e&&null==n&&null==o&&(null==s||(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.q)(s,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .ZEROS */ .uY))&&null==c&&(null==t||1===t)&&(null==r||1===r)}function r({normalTexture:e,metallicRoughnessTexture:n,metallicFactor:r,roughnessFactor:t,emissiveTexture:o,emissiveFactor:s,occlusionTexture:c}){return null==e&&null==n&&null==o&&(null==s||l(s,u))&&null==c&&(null==t||1===t)&&(null==r||1===r||0===r)}const t=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .freeze */ .CN)(1,1,.5),o=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .freeze */ .CN)(0,.6,.2),s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__/* .freeze */ .CN)(0,1,.2);


/***/ }),

/***/ 29688:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ci: () => (/* binding */ n),
/* harmony export */   PC: () => (/* binding */ r),
/* harmony export */   Vk: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(58359);
/* harmony import */ var _webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(t,e){return null==t&&(t=[]),t.push(e),t}function r(t,e){if(null==t)return null;const n=t.filter((t=>t!==e));return 0===n.length?null:n}function l(t,n,r,l,i){o[0]=t.get(n,0),o[1]=t.get(n,1),o[2]=t.get(n,2),(0,_webgl_doublePrecisionUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .encodeDoubleArray */ .jS)(o,s,3),r.set(i,0,s[0]),l.set(i,0,s[1]),r.set(i,1,s[2]),l.set(i,1,s[3]),r.set(i,2,s[4]),l.set(i,2,s[5])}const o=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)(),s=new Float32Array(6);


/***/ }),

/***/ 17706:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ r),
/* harmony export */   d: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(77941);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var i;!function(t){t[t.None=0]="None",t[t.Alpha=1]="Alpha",t[t.PremultipliedAlpha=2]="PremultipliedAlpha",t[t.Depth=3]="Depth",t[t.COUNT=4]="COUNT"}(i||(i={}));class r extends _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderTechniqueConfiguration */ .K{constructor(){super(...arguments),this.blitMode=i.None,this.hasOpacityFactor=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__/* .parameter */ .W)({count:i.COUNT})],r.prototype,"blitMode",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_1__/* .parameter */ .W)()],r.prototype,"hasOpacityFactor",void 0);


/***/ }),

/***/ 58376:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dt: () => (/* binding */ a),
/* harmony export */   kJ: () => (/* binding */ p),
/* harmony export */   lM: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26139);
/* harmony import */ var _core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(15420);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(77941);
/* harmony import */ var _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9319);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var s,p;!function(e){e[e.Draped=0]="Draped",e[e.Screen=1]="Screen",e[e.World=2]="World",e[e.COUNT=3]="COUNT"}(s||(s={})),function(e){e[e.Center=0]="Center",e[e.Tip=1]="Tip",e[e.COUNT=2]="COUNT"}(p||(p={}));class a extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .DefaultTechniqueConfiguration */ .E{constructor(){super(...arguments),this.space=s.Screen,this.anchor=p.Center,this.occluder=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureCoordinateType */ .I.None,this.emissionSource=_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .EmissionSource */ .ZX.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1,this.overlayEnabled=!1,this.snowCover=!1}get draped(){return this.space===s.Draped}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({count:s.COUNT})],a.prototype,"space",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({count:p.COUNT})],a.prototype,"anchor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hideOnShortSegments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hasCap",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hasTip",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"terrainDepthTest",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],a.prototype,"cullAboveTerrain",void 0);


/***/ }),

/***/ 19274:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   z: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55274);
/* harmony import */ var _core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(15420);
/* harmony import */ var _core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1361);
/* harmony import */ var _core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89002);
/* harmony import */ var _core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(72196);
/* harmony import */ var _lib_OITPass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69338);
/* harmony import */ var _webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63199);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function u(u,d){u.include(_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .OutputHighlight */ .Q,d),u.include(_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Emissions */ .NL,d),u.fragment.include(_core_shaderLibrary_util_ColorConversion_glsl_js__WEBPACK_IMPORTED_MODULE_3__/* .ColorConversion */ .a);const{output:p,oitPass:c,discardInvisibleFragments:m,snowCover:C}=d,g=p===_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .ShaderOutput */ .V.ObjectAndLayerIdColor,h=(0,_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .isColorEmission */ .LG)(p),v=(0,_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .isColorOrColorEmission */ .RN)(p)&&c===_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_5__/* .OITPass */ .Y.ColorAlpha,b=(0,_core_shaderLibrary_ShaderOutput_js__WEBPACK_IMPORTED_MODULE_0__/* .isColorOrColorEmission */ .RN)(p)&&c!==_lib_OITPass_js__WEBPACK_IMPORTED_MODULE_5__/* .OITPass */ .Y.ColorAlpha;let j=0;(b||h||v)&&u.outputs.add("fragColor","vec4",j++),h&&u.outputs.add("fragEmission","vec4",j++),v&&u.outputs.add("fragAlpha","float",j++),u.fragment.code.add((0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`
    void outputColorHighlightOID(vec4 finalColor, const in vec3 vWorldPosition, vec3 emissiveBaseColor ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(C,", float snow")}) {
      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(g,"finalColor.a = 1.0;")}

      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(m,`if (finalColor.a < ${_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H.float(_webscene_support_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_6__/* .alphaCutoff */ .Q)}) { discard; }`)}

      finalColor = applySlice(finalColor, vWorldPosition);
      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(v,(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__/* .glsl */ .H)`fragColor = premultiplyAlpha(finalColor);
             fragAlpha = finalColor.a;`)}
      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(b,"fragColor = finalColor;")}
      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(h,`fragEmission = ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(C,"mix(finalColor.a * getEmissions(emissiveBaseColor), vec4(0.0), snow);","finalColor.a * getEmissions(emissiveBaseColor);")}`)}
      calculateOcclusionAndOutputHighlight();
      ${(0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_4__.If)(g,"outputObjectAndLayerIdColor();")}
    }
  `)}


/***/ }),

/***/ 16906:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ p),
/* harmony export */   x: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(26139);
/* harmony import */ var _core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(15420);
/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(77941);
/* harmony import */ var _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9319);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var s;!function(o){o[o.BUTT=0]="BUTT",o[o.SQUARE=1]="SQUARE",o[o.ROUND=2]="ROUND",o[o.COUNT=3]="COUNT"}(s||(s={}));class p extends _materials_DefaultTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__/* .DefaultTechniqueConfiguration */ .E{constructor(){super(...arguments),this.capType=s.BUTT,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.occluder=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.wireframe=!1,this.discardInvisibleFragments=!1,this.objectAndLayerIdColorInstanced=!1,this.textureCoordinateType=_core_shaderLibrary_attributes_TextureCoordinateAttribute_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .TextureCoordinateType */ .I.None,this.emissionSource=_core_shaderLibrary_output_Emissions_glsl_js__WEBPACK_IMPORTED_MODULE_2__/* .EmissionSource */ .ZX.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.overlayEnabled=!1,this.snowCover=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)({count:s.COUNT})],p.prototype,"capType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"hasPolygonOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"writeDepth",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"draped",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"stippleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"stippleOffColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"stipplePreferContinuous",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"roundJoins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"applyMarkerOffset",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"vvSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"vvColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"vvOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"falloffEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"innerColorEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"hasOccludees",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"occluder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"terrainDepthTest",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"cullAboveTerrain",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"wireframe",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"discardInvisibleFragments",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_3__/* .parameter */ .W)()],p.prototype,"objectAndLayerIdColorInstanced",void 0);


/***/ }),

/***/ 85856:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(72196);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(o){o.code.add((0,_core_shaderModules_glsl_js__WEBPACK_IMPORTED_MODULE_0__/* .glsl */ .H)`vec3 tonemapACES(vec3 x) {
return clamp((x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14), 0.0, 1.0);
}`)}


/***/ }),

/***/ 11041:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OG: () => (/* binding */ t),
/* harmony export */   hM: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports fromRenderCoordinates, renderCoordinateTransformAt, toRenderCoordinates */
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat4f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(86128);
/* harmony import */ var _geometry_projection_computeTranslationToOriginAndRotation_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59538);
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(84119);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var n,t;function a(o,e,n,t,a,l,c){return t=t||o.spatialReference,r(e,t,n,a,o.renderCoordsHelper.spatialReference,l,c)?a:null}function l(o,e,n,t,a,l,c){return l=l||o.spatialReference,r(e,o.renderCoordsHelper.spatialReference,n,t,l,a,c)?t:null}function c(r,n,t,a){return a||(a=o()),t=t||r.spatialReference,e(t,n,a,r.renderCoordsHelper.spatialReference)?a:null}!function(o){o.OPAQUE="opaque-color",o.TRANSPARENT="transparent-color",o.COMPOSITE="composite-color",o.FINAL="final-color"}(n||(n={})),function(o){o.SSAO="ssao",o.LASERLINES="laserline-color",o.ANTIALIASING="aa-color",o.HIGHLIGHTS="highlight-color",o.MAGNIFIER="magnifier-color",o.OCCLUDED="occluded-color",o.VIEWSHED="viewshed-color",o.OPAQUE_TERRAIN="opaque-terrain-color",o.OPAQUE_ENVIRONMENT="opaque-environment-color",o.TRANSPARENT_ENVIRONMENT="transparent-environment-color",o.FOCUSAREA="focusarea",o.FOCUSAREA_COLOR="focusarea-color"}(t||(t={}));


/***/ }),

/***/ 99369:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ it)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat4.js
var mat4 = __webpack_require__(21742);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat4f64.js
var mat4f64 = __webpack_require__(86128);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec42.js
var vec42 = __webpack_require__(2662);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f64.js
var vec4f64 = __webpack_require__(28152);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/frustum.js
var frustum = __webpack_require__(94982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/ray.js
var ray = __webpack_require__(10151);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/vector.js
var vector = __webpack_require__(16597);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/fov.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function fov_t(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/a)}function a(t,a,n){return 2*Math.atan(Math.sqrt(a*a+n*n)*Math.tan(.5*t)/n)}function n(t,a,n){return 2*Math.atan(a*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}function r(t,a,n){return 2*Math.atan(n*Math.tan(.5*t)/Math.sqrt(a*a+n*n))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/PooledArray.js + 1 modules
var PooledArray = __webpack_require__(63678);
;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ChangeSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(){this.adds=new e,this.removes=new e,this.updates=new e({allocator:e=>e||new ChangeSet_r,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}get empty(){return 0===this.adds.length&&0===this.removes.length&&0===this.updates.length}}class ChangeSet_r{}class t{constructor(e){this.pending=e,this.adds=new Array,this.removes=new Array,this.updates=new Array}clearAddsAndRemoves(){this.adds.forEach((e=>this.pending.adds.removeUnordered(e))),this.removes.forEach((e=>this.pending.removes.removeUnordered(e))),this.adds.length=0,this.removes.length=0}clearUpdates(){this.updates.forEach((e=>this.pending.updates.removeUnordered(e))),this.updates.length=0}clear(){this.clearUpdates(),this.clearAddsAndRemoves()}}

;// ../node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var rendererUtils_r,rendererUtils_t;function rendererUtils_n(r){const t=new Map,n=n=>{let o=t.get(n);return o||(o=new e(r),t.set(n,o)),o};return r.removes.forAll((e=>{o(e)&&n(e.material).removes.push(e)})),r.adds.forAll((e=>{o(e)&&n(e.material).adds.push(e)})),r.updates.forAll((e=>{o(e.renderGeometry)&&n(e.renderGeometry.material).updates.push(e)})),t}function o(e){return e.geometry.indexCount>=1}!function(e){e[e.Default=0]="Default",e[e.Screenshot=1]="Screenshot",e[e.ObjectAndLayerID=2]="ObjectAndLayerID"}(rendererUtils_r||(rendererUtils_r={})),function(e){e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT"}(rendererUtils_t||(rendererUtils_t={}));

;// ../node_modules/@arcgis/core/views/3d/webgl/RenderCamera.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var $;let tt=$=class extends Accessor/* default */.A{constructor(t){super(t),this._ray=(0,ray/* create */.vt)(),this._viewport=(0,vec4f64/* fromValues */.fA)(0,0,1,1),this._padding=(0,vec4f64/* fromValues */.fA)(0,0,0,0),this._fov=55/180*Math.PI,this._nearFar=(0,vec2f64/* fromValues */.fA)(1,1e3),this._viewDirty=!0,this._viewMatrix=(0,mat4f64/* create */.vt)(),this._viewProjectionDirty=!0,this._viewProjectionMatrix=(0,mat4f64/* create */.vt)(),this._viewInverseTransposeMatrixDirty=!0,this._viewInverseTransposeMatrix=(0,mat4f64/* create */.vt)(),this._frustumDirty=!0,this._frustum=(0,frustum/* create */.vt)(),this._fullViewport=(0,vec4f64/* create */.vt)(),this._pixelRatio=1,this.row=0,this.column=0,this._rows=1,this._columns=1,this._center=(0,vec3f64/* create */.vt)(),this._up=(0,vec3f64/* create */.vt)(),this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(t){this._pixelRatio=t>0?t:1}get rows(){return this._rows}set rows(t){this._rows=Math.max(1,t)}get columns(){return this._columns}set columns(t){this._columns=Math.max(1,t)}get eye(){return this._ray.origin}set eye(t){this._compareAndSetView(t,this._ray.origin)}get center(){return this._center}set center(t){this._compareAndSetView(t,this._center,"_center")}get ray(){return (0,vec32.d)(this._ray.direction,this.center,this.eye),this._ray}get up(){return this._up}set up(t){this._compareAndSetView(t,this._up,"_up")}get viewMatrix(){return this._ensureViewClean(),this._viewMatrix}set viewMatrix(t){(0,mat4/* copy */.C)(this._viewMatrix,t),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0,this._viewProjectionDirty=!0,this._frustumDirty=!0}get viewForward(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64/* create */.vt)(),-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10])}get viewUp(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64/* create */.vt)(),this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9])}get viewRight(){return this._ensureViewClean(),(0,vec32.i)((0,vec3f64/* create */.vt)(),this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8])}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(t){this._nearFar[0]!==t&&(this._nearFar[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(t){this._nearFar[1]!==t&&(this._nearFar[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(t){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const t=(0,vec42.d)((0,vec4f64/* create */.vt)(),this._viewport,1/this.pixelRatio),i=this._get("screenViewport");return i&&(0,vec42.e)(t,i)?i:t}get screenPadding(){if(1===this.pixelRatio)return this._padding;const t=(0,vec42.d)((0,vec4f64/* create */.vt)(),this._padding,1/this.pixelRatio),i=this._get("screenPadding");return i&&(0,vec42.e)(t,i)?i:t}get x(){return this._viewport[0]}set x(t){t+=this._padding[rendererUtils_t.LEFT],this._viewport[0]!==t&&(this._viewport[0]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(t){t+=this._padding[rendererUtils_t.BOTTOM],this._viewport[1]!==t&&(this._viewport[1]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(t){this._viewport[2]!==t&&(this._viewport[2]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(t){this._viewport[3]!==t&&(this._viewport[3]=t,this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT]}set fullWidth(t){this.width=t-(this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM]}set fullHeight(t){this.height=t-(this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM])}get fullViewport(){return this._fullViewport[0]=this._viewport[0]-this._padding[rendererUtils_t.LEFT],this._fullViewport[1]=this._viewport[1]-this._padding[rendererUtils_t.BOTTOM],this._fullViewport[2]=this.fullWidth,this._fullViewport[3]=this.fullHeight,this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(t){(0,vec42.a)(this._padding,t)||(this._viewport[0]+=t[rendererUtils_t.LEFT]-this._padding[rendererUtils_t.LEFT],this._viewport[1]+=t[rendererUtils_t.BOTTOM]-this._padding[rendererUtils_t.BOTTOM],this._viewport[2]-=t[rendererUtils_t.RIGHT]+t[rendererUtils_t.LEFT]-(this._padding[rendererUtils_t.RIGHT]+this._padding[rendererUtils_t.LEFT]),this._viewport[3]-=t[rendererUtils_t.TOP]+t[rendererUtils_t.BOTTOM]-(this._padding[rendererUtils_t.TOP]+this._padding[rendererUtils_t.BOTTOM]),(0,vec42.c)(this._padding,t),this._viewProjectionDirty=!0,this._frustumDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){return this._viewProjectionDirty&&((0,mat4/* multiply */.lw)(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1),this._viewProjectionMatrix}get projectionMatrix(){return this._projectionMatrixInternal}get inverseProjectionMatrix(){return (0,mat4/* invert */.B8)((0,mat4f64/* create */.vt)(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||(0,mat4f64/* create */.vt)()}get fov(){return this._fov}set fov(t){this._fov=t,this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovX(){return n(this._fov,this.width,this.height)}set fovX(t){this._fov=fov_t(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get fovY(){return r(this._fov,this.width,this.height)}set fovY(t){this._fov=a(t,this.width,this.height),this._viewProjectionDirty=!0,this._frustumDirty=!0}get distance(){return (0,vec32.j)(this.center,this.eye)}get frustum(){return this._recomputeFrustum(),this._frustum}get viewInverseTransposeMatrix(){return(this._viewInverseTransposeMatrixDirty||this._viewDirty)&&((0,mat4/* invert */.B8)(this._viewInverseTransposeMatrix,this.viewMatrix),(0,mat4/* transpose */.mg)(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),this._viewInverseTransposeMatrix}depthNDCToWorld(t){const{near:i,far:e}=this;return 2*i*e/(e+i-t*(e-i))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=this.relativeElevation&&this.relativeElevation>=0}get _projectionMatrixInternal(){const t=this.width,i=this.height,e=this.near*Math.tan(this.fovY/2)*2,r=e*this._aspect,s=e/this.rows,o=r/this.columns,n=-r/2+this.column*o,h=n+o,a=-e/2+this.row*s,p=a+s,u=(0,mat4/* frustum */.$h)((0,mat4f64/* create */.vt)(),n*(1+2*this._padding[rendererUtils_t.LEFT]/t),h*(1+2*this._padding[rendererUtils_t.RIGHT]/t),a*(1+2*this._padding[rendererUtils_t.BOTTOM]/i),p*(1+2*this._padding[rendererUtils_t.TOP]/i),this.near,this.far),l=this._get("projectionMatrix");return l&&(0,mat4/* equals */.aI)(l,u)?l:u}copyFrom(t){(0,vec32.c)(this._ray.origin,t.eye),this.center=t.center,this.up=t.up,(0,vec42.c)(this._viewport,t.viewport),this.notifyChange("_viewport"),(0,vec42.c)(this._padding,t.padding),this.notifyChange("_padding"),(0,vec2/* copy */.C)(this._nearFar,t.nearFar),this.notifyChange("_nearFar"),this._fov=t.fov,this.row=t.row,this.column=t.column,this.rows=t.rows,this.columns=t.columns,this.relativeElevation=t.relativeElevation;const i=t;return this._viewDirty=i._viewDirty,this._viewDirty||((0,mat4/* copy */.C)(this._viewMatrix,t.viewMatrix),this.notifyChange("_viewMatrix")),this._viewProjectionDirty=!0,this._frustumDirty=i._frustumDirty,this._frustumDirty||((0,frustum/* copy */.C)(this._frustum,t.frustum),this._frustumDirty=!1),i._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:((0,mat4/* copy */.C)(this._viewInverseTransposeMatrix,t.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1),(0,vec42.c)(this._fullViewport,t.fullViewport),this.pixelRatio=t.pixelRatio,this}copyViewFrom(t){this.eye=t.eye,this.center=t.center,this.up=t.up,this.fov=t.fov}clone(){return(new $).copyFrom(this)}equals(t){return (0,vec32.q)(this.eye,t.eye)&&(0,vec32.q)(this.center,t.center)&&(0,vec32.q)(this.up,t.up)&&(0,vec42.a)(this._viewport,t.viewport)&&(0,vec42.a)(this._padding,t.padding)&&(0,vec2/* exactEquals */.t2)(this.nearFar,t.nearFar)&&this._fov===t.fov&&this.pixelRatio===t.pixelRatio&&this.relativeElevation===t.relativeElevation&&this.row===t.row&&this.column===t.column&&this.rows===t.rows&&this.columns===t.columns}almostEquals(t){const i=Math.max(1,1/this.pixelRatio,1/t.pixelRatio);if(Math.abs(t.fov-this._fov)>=.001||(0,vec42.f)(t.screenPadding,this.screenPadding)>=i||(0,vec42.f)(this.screenViewport,t.screenViewport)>=i||this.row!==t.row||this.column!==t.column||this.rows!==t.rows||this.columns!==t.columns)return!1;(0,vec32.a)(st,t.eye,t.center),(0,vec32.a)(ot,this.eye,this.center);const e=(0,vec32.e)(st,ot),r=(0,vec32.y)(st),s=(0,vec32.y)(ot),o=5e-4;return e*e>=(1-1e-10)*r*s&&(0,vec32.x)(t.eye,this.eye)<Math.max(r,s)*o*o}computeRenderPixelSizeAt(t){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(t))}computeRenderPixelSizeAtDist(t){return t*this.perRenderPixelRatio}computeScreenPixelSizeAt(t){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(t))}_viewDirectionDistance(t){return Math.abs((0,vector/* projectPointSignedLength */.gr)(this.viewForward,(0,vec32.d)(st,t,this.eye)))}computeScreenPixelSizeAtDist(t){return t*this.perScreenPixelRatio}computeDistanceFromRadius(t,i){return t/Math.tan(Math.min(this.fovX,this.fovY)/(2*(i||1)))}getScreenCenter(t=(0,screenUtils/* createScreenPointArray */.gs)()){return t[0]=(this.padding[rendererUtils_t.LEFT]+this.width/2)/this.pixelRatio,t[1]=(this.padding[rendererUtils_t.TOP]+this.height/2)/this.pixelRatio,t}getRenderCenter(t,i=.5,e=.5){return t[0]=this.padding[rendererUtils_t.LEFT]+this.width*i,t[1]=this.padding[rendererUtils_t.BOTTOM]+this.height*e,t[2]=.5,t}setGLViewport(t){const i=this.viewport,e=this.padding;t.setViewport(i[0]-e[3],i[1]-e[2],i[2]+e[1]+e[3],i[3]+e[0]+e[2])}applyProjection(t,i){t!==et&&(0,vec32.c)(et,t),et[3]=1,(0,vec42.t)(et,et,this.projectionMatrix);const e=Math.abs(et[3]);(0,vec32.g)(et,et,1/e);const s=this.fullViewport;i[0]=(0,mathUtils/* lerp */.Cc)(0,s[0]+s[2],.5+.5*et[0]),i[1]=(0,mathUtils/* lerp */.Cc)(0,s[1]+s[3],.5+.5*et[1]),i[2]=.5*(et[2]+1),i[3]=e}unapplyProjection(t,i){const e=this.fullViewport;et[0]=(t[0]/(e[0]+e[2])*2-1)*t[3],et[1]=(t[1]/(e[1]+e[3])*2-1)*t[3],et[2]=(2*t[2]-1)*t[3],et[3]=t[3],null!=this.inverseProjectionMatrix&&((0,vec42.t)(et,et,this.inverseProjectionMatrix),i[0]=et[0],i[1]=et[1],i[2]=et[2])}projectToScreen(t,i){return this.projectToRenderScreen(t,nt),this.renderToScreen(nt,i),i}projectToRenderScreen(t,i){if(et[0]=t[0],et[1]=t[1],et[2]=t[2],et[3]=1,(0,vec42.t)(et,et,this.viewProjectionMatrix),0===et[3])return null;const e=et;(0,vec32.g)(e,e,1/Math.abs(et[3]));const s=this.fullViewport,o=(0,mathUtils/* lerp */.Cc)(0,s[0]+s[2],.5+.5*e[0]),n=(0,mathUtils/* lerp */.Cc)(0,s[1]+s[3],.5+.5*e[1]);return"x"in i?(i.x=o,i.y=n):(i[0]=o,i[1]=n,i.length>2&&(i[2]=.5*(e[2]+1))),i}unprojectFromScreen(t,i){return this.unprojectFromRenderScreen(this.screenToRender(t,nt),i)}unprojectFromRenderScreen(t,i){if((0,mat4/* multiply */.lw)(rt,this.projectionMatrix,this.viewMatrix),!(0,mat4/* invert */.B8)(rt,rt))return null;const e=this.fullViewport;return et[0]=2*(t[0]-e[0])/e[2]-1,et[1]=2*(t[1]-e[1])/e[3]-1,et[2]=2*t[2]-1,et[3]=1,(0,vec42.t)(et,et,rt),0===et[3]?null:(i[0]=et[0]/et[3],i[1]=et[1]/et[3],i[2]=et[2]/et[3],i)}constrainWindowSize(t,i,e,r){const s=t*this.pixelRatio,o=i*this.pixelRatio,n=Math.max(s-e/2,0),h=Math.max(this.fullHeight-o-r/2,0),a=-Math.min(s-e/2,0),p=-Math.min(this.fullHeight-o-r/2,0),u=e-a- -Math.min(this.fullWidth-s-e/2,0),l=r-p- -Math.min(o-r/2,0);return[Math.round(n),Math.round(h),Math.round(u),Math.round(l)]}computeUp(t){t===ViewingMode/* ViewingMode */.RT.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(t,i){const e=t[0]*this.pixelRatio,r=this.fullHeight-t[1]*this.pixelRatio;return i[0]=e,i[1]=r,i}renderToScreen(t,i){const e=t[0]/this.pixelRatio,r=(this.fullHeight-t[1])/this.pixelRatio;i[0]=e,i[1]=r}_computeUpGlobal(){(0,vec32.d)(st,this.center,this.eye);const t=(0,vec32.l)(this.center);t<1?((0,vec32.i)(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs((0,vec32.e)(st,this.center))>.9999*(0,vec32.l)(st)*t||((0,vec32.h)(this._up,st,this.center),(0,vec32.h)(this._up,this._up,st),(0,vec32.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){(0,vec32.E)(st,this.eye,this.center),Math.abs(st[2])<=.9999&&((0,vec32.g)(st,st,st[2]),(0,vec32.i)(this._up,-st[0],-st[1],1-st[2]),(0,vec32.n)(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(t,i,r=""){"number"==typeof t[0]&&isFinite(t[0])&&"number"==typeof t[1]&&isFinite(t[1])&&"number"==typeof t[2]&&isFinite(t[2])?(0,vec32.q)(t,i)||((0,vec32.c)(i,t),this._markViewDirty(),r.length&&this.notifyChange(r)):Logger/* default */.A.getLogger("esri.views.3d.webgl-engine.lib.RenderCamera").warn("RenderCamera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewDirty=!0,this._frustumDirty=!0,this._viewProjectionDirty=!0}_recomputeFrustum(){this._frustumDirty&&((0,frustum/* fromMatrix */.ui)(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&((0,mat4/* lookAt */.t5)(this._viewMatrix,this.eye,this.center,this.up),this.notifyChange("_viewMatrix"),this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_viewport",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_padding",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_fov",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_nearFar",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_viewDirty",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_viewMatrix",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_pixelRatio",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"pixelRatio",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"row",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"column",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_rows",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"rows",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_columns",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"columns",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"eye",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"center",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_center",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"up",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"_up",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"viewMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"viewForward",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"viewUp",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"viewRight",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"nearFar",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"near",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"far",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"viewport",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"screenViewport",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"screenPadding",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"x",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"y",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"width",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"height",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"fullWidth",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"fullHeight",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"_aspect",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"padding",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"projectionMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"inverseProjectionMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"fov",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"fovX",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"fovY",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"viewInverseTransposeMatrix",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],tt.prototype,"_projectionMatrixInternal",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],tt.prototype,"relativeElevation",void 0),tt=$=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.3d.webgl.RenderCamera")],tt);const it=tt,et=(0,vec4f64/* create */.vt)(),rt=(0,mat4f64/* create */.vt)(),st=(0,vec3f64/* create */.vt)(),ot=(0,vec3f64/* create */.vt)(),nt=(0,screenUtils/* createRenderScreenPointArray3 */.r_)();


/***/ }),

/***/ 43196:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(98849);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _webgl_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(11041);
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(91013);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let u=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(e){super(e),this.view=null,this.consumes={required:[]},this.produces=_webgl_js__WEBPACK_IMPORTED_MODULE_6__/* .RenderCategory */ .hM.COMPOSITE,this.requireGeometryDepth=!1,this._dirty=!0}initialize(){this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .watch */ .wB)((()=>this.view.ready),(e=>{e&&this.view.stage?.renderer.addRenderNode(this)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .initial */ .Vh)])}destroy(){this.view.stage?.renderer?.removeRenderNode(this)}precompile(){}render(){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A("RenderNode:render-function-not-implemented","render() is not implemented.")}get camera(){return this.view.state.camera.clone()}get sunLight(){return this.bindParameters.lighting.legacy}get gl(){return this.view.stage.renderView.renderingContext.gl}get techniques(){return this.view.stage.renderView.techniques}acquireOutputFramebuffer(){const e=this._frameBuffer?.getTexture()?.descriptor,r=this.view.stage.renderer.fboCache.acquire(e?.width??640,e?.height??480,this.produces);return r.fbo?.initializeAndBind(),r}bindRenderTarget(){return this._frameBuffer?.fbo?.initializeAndBind(),this._frameBuffer}requestRender(e){e===_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_7__/* .RenderRequestType */ .C7.UPDATE&&this.view.stage?.renderView.requestRender(e),this._dirty=!0}resetWebGLState(){this.renderingContext.resetState(),this.renderingContext.bindFramebuffer(this._frameBuffer?.fbo)}get fboCache(){return this.view.stage.renderer.fboCache}get bindParameters(){return this.renderContext.bind}get renderingContext(){return this.view.stage.renderView.renderingContext}get renderContext(){return this.view.stage?.renderer.renderContext}updateAnimation(e){return!!this._dirty&&(this._dirty=!1,!0)}doRender(e){this._frameBuffer=e.find((({name:e})=>e===this.produces));try{return this.render(e)}finally{this._frameBuffer=null}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0})],u.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0})],u.prototype,"consumes",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],u.prototype,"produces",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({readOnly:!0})],u.prototype,"techniques",null),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.views.3d.webgl.RenderNode")],u);


/***/ }),

/***/ 11294:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  N: () => (/* binding */ DrawGraphicTool_E),
  l: () => (/* binding */ DrawGraphicTool_F)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Graphic.js
var Graphic = __webpack_require__(25707);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
;// ../node_modules/@arcgis/core/undoredo/OperationStatus.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e;!function(e){e[e.NeverApplied=0]="NeverApplied",e[e.Applied=1]="Applied",e[e.Undone=2]="Undone"}(e||(e={}));

;// ../node_modules/@arcgis/core/undoredo/UndoRedoError.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var r;!function(r){r.UndoRedoUpdating="UndoRedoUpdating",r.UndoInvalidError="UndoInvalidError",r.RedoInvalidError="RedoInvalidError",r.ApplyInvalidError="ApplyInvalidError"}(r||(r={}));const o={[r.UndoRedoUpdating]:"Cannot perform operation whilst undo redo is updating",[r.UndoInvalidError]:"There are no items to Undo",[r.RedoInvalidError]:"There are no items to Redo",[r.ApplyInvalidError]:"Cannot apply an item that is already applied"};class d extends Error{constructor(){super(o[r.UndoRedoUpdating]),this.type="undo-redo-updating-error"}}class n extends Error{constructor(){super(o[r.UndoInvalidError]),this.type="undo-redo-undo-error"}}class UndoRedoError_e extends Error{constructor(){super(o[r.RedoInvalidError]),this.type="undo-redo-redo-error"}}class UndoRedoError_t extends Error{constructor(){super(o[r.ApplyInvalidError]),this.type="undo-redo-apply-error"}}

;// ../node_modules/@arcgis/core/undoredo/UndoableOperation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var a;!function(t){t[t.Apply=0]="Apply",t[t.Undo=1]="Undo",t[t.Redo=2]="Redo"}(a||(a={}));let UndoableOperation_n=class extends Accessor/* default */.A{constructor(){super(...arguments),this.name="",this.tag=Symbol(),this.status=e.NeverApplied}get canUndo(){return this.status===e.Applied}get canRedo(){return this.status===e.Undone}async executeUndoRedoOperation(t){switch(t){case a.Apply:if(this.status!==e.NeverApplied)throw new UndoRedoError_t;return await this.apply(),void(this.status=e.Applied);case a.Undo:if(this.status!==e.Applied)throw new n;return await this.undo(),void(this.status=e.Undone);case a.Redo:if(this.status!==e.Undone)throw new n;return await this.redo(),void(this.status=e.Applied)}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],UndoableOperation_n.prototype,"name",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],UndoableOperation_n.prototype,"tag",void 0),UndoableOperation_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.undoredo.UndoableOperation")],UndoableOperation_n);

;// ../node_modules/@arcgis/core/UndoRedo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let u=class extends Accessor/* default */.A{constructor(){super(...arguments),this._stack=new Collection/* default */.A,this._stackPosition=-1,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U}get updating(){return this._updatingHandles.updating}get canUndo(){return this.hasUndo&&!this.updating}get hasUndo(){return this._stackPosition>=0}get canRedo(){return this.hasRedo&&!this.updating}get hasRedo(){return this._stackPosition<this._stack.length-1}_truncateForwardStack(){this._stack.splice(this._stackPosition+1,this._stack.length-this._stackPosition).forEach((t=>t.destroy()))}_drainStack(){this._stack.drain((t=>t.destroy())),this._stackPosition=-1}async undo(){if(!this.hasUndo)throw new n;if(this.updating)throw new d;const t=this._stack.getItemAt(this._stackPosition);t&&await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(a.Undo),--this._stackPosition,t.canRedo||this._truncateForwardStack()})())}async redo(){if(!this.hasRedo)throw new UndoRedoError_e;if(this.updating)throw new d;const t=this._stack.getItemAt(this._stackPosition+1);if(!t)throw new UndoRedoError_e;await this._updatingHandles.addPromise((async()=>{await t.executeUndoRedoOperation(a.Redo),++this._stackPosition})())}peekUndo(){if(this.canUndo)return this._stack.getItemAt(this._stackPosition)}peekRedo(){if(this.canRedo)return this._stack.getItemAt(this._stackPosition+1)}async inject(t){if(this.updating)throw new d;await this._updatingHandles.addPromise((async()=>{t.status===e.NeverApplied&&await t.executeUndoRedoOperation(a.Apply),t.canUndo?(this._stack.splice(this._stackPosition+1,0,t),this._stackPosition++):this._stackPosition>-1&&(this._stack.splice(0,this._stackPosition+1).forEach((t=>t.destroy())),this._stackPosition=-1)})())}async add(t){if(this.updating)throw new d;await this._updatingHandles.addPromise((async()=>{t.status===e.NeverApplied&&await t.executeUndoRedoOperation(a.Apply),this._stackPosition>=-1&&this._truncateForwardStack(),t.canUndo?(this._stack.push(t),this._stackPosition=this._stack.length-1):this._drainStack()})())}async removeTagged(t,s=!1){if(this.updating&&!s)return;await (0,reactiveUtils/* whenOnce */.C_)((()=>!this.updating));const a=new Collection/* default */.A;for(let i=0;i<this._stack.length;i++){const s=this._stack.getItemAt(i);s&&(s.tag===t?(s.destroy(),i===this._stackPosition&&(this._stackPosition=a.length-1)):a.push(s))}this._stack=a,this._stackPosition>a.length-1&&(this._stackPosition=a.length-1)}async clear(t=!1){if(this.updating&&!t)throw new d;await (0,reactiveUtils/* whenOnce */.C_)((()=>!this.updating)),this._drainStack()}};(0,tslib_es6._)([(0,property/* property */.MZ)()],u.prototype,"_stack",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],u.prototype,"_stackPosition",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],u.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],u.prototype,"canUndo",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],u.prototype,"hasUndo",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],u.prototype,"canRedo",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],u.prototype,"hasRedo",null),u=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.UndoRedo")],u);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/coordinateFormatter.js
var coordinateFormatter = __webpack_require__(88204);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/GraphicsLayer.js
var GraphicsLayer = __webpack_require__(31828);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js
var dehydratedFeatureComparison = __webpack_require__(9723);
;// ../node_modules/@arcgis/core/views/draw/support/CreateOperationGeometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class CreateOperationGeometry_l{constructor(){this.committedVertices=null,this.cursorVertex=null,this.full=null,this.outline=null,this.cursorEdge=null,this.circle=null,this.rectangle=null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/support/createUtils.js + 1 modules
var createUtils = __webpack_require__(83372);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/support/surfaceCoordinateSystems.js
var surfaceCoordinateSystems = __webpack_require__(7388);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityUtils.js
var quantityUtils = __webpack_require__(73569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js
var Point = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/elevationInfoUtils.js
var elevationInfoUtils = __webpack_require__(27451);
;// ../node_modules/@arcgis/core/views/draw/support/helpMessageUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function helpMessageUtils_e(e,i,a){if(null==e)return"noTool";switch(e){case"point":return helpMessageUtils_n();case"multipoint":return"multipoint";case"polyline":return helpMessageUtils_r(i,a);case"polygon":return t(i,a);case"rectangle":case"circle":return l(i,a);default:return}}function helpMessageUtils_n(e){return"point"}function helpMessageUtils_r(e,n){const r=null!=e&&"polyline"===e.type&&e.paths.length?e.paths[0].length:0;return"freehand"===n?r<2?"freehandStart":"freehandEnd":r<2?"polylineZeroVertices":"polylineOneVertex"}function t(e,n){const r=null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0;if(r<3)switch(n){case"freehand":return"freehandStart";case"hybrid":return"polygonZeroVerticesHybrid";default:return"polygonZeroVertices"}else if(r<4)return"freehand"===n?"freehandEnd":"polygonOneVertex";return"polygonTwoVertices"}function l(e,n){if((null!=e&&"polygon"===e.type&&e.rings.length?e.rings[0].length:0)<3)switch(n){case"freehand":return"freehandStart";case"click":return"shapeStartClick";default:return"shapeStartHybrid"}switch(n){case"freehand":return"freehandEnd";case"click":return"shapeEndClick";default:return"shapeEndHybrid"}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
;// ../node_modules/@arcgis/core/views/draw/support/helpMessageUtils3d.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function helpMessageUtils3d_i(o,i){const l=o?.geometry;if(!o||"mesh"!==l?.type||!i)return;const{renderCoordsHelper:p,elevationProvider:u}=i,{camera:h}=i.state,{extent:d}=l,{center:x,spatialReference:g}=d,v=(0,unitUtils/* getMetersPerUnitForSR */.GA)(g),j=(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(g),z=(0,unitUtils/* getMetersPerUnitForSR */.GA)(p.spatialReference),y=d.width*v,C=d.height*j,R=(d.zmax??0)*j,U=R-(d.zmin??0)*j,b=Math.max(y,C,U)/z,{x:w,y:P}=x,S=x.z??0;(0,vec32.i)(f,w,P,S),p.toRenderCoords(f,g,f);const T=b/h.computeScreenPixelSizeAt(f);if(T>h.width*helpMessageUtils3d_a)return"meshTooClose";if(T<m)return"meshTooFar";const k=(0,elevationInfoUtils/* getGraphicEffectiveElevationInfo */.bh)(o),{absoluteZ:A}=(0,elevationInfoUtils/* zValueInAbsoluteHeightMode */.Q5)(w,P,R,g,i,k);return A<(u.getElevation(w,P,S,g,"ground")??0)*j+U*c?"meshUnderground":"mesh"}const m=20,helpMessageUtils3d_a=1,c=.1,f=(0,vec3f64/* create */.vt)();

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/constraintUtils.js
var constraintUtils = __webpack_require__(7086);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/tooltipCommonUtils.js + 26 modules
var tooltipCommonUtils = __webpack_require__(45565);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/SketchTooltipInfo.js
var SketchTooltipInfo = __webpack_require__(83856);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawCircleTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends SketchTooltipInfo/* SketchTooltipInfo */.w{constructor(o){super(o),this.type="draw-circle",this.radius=null,this.xSize=null,this.ySize=null,this.area=quantityUtils/* zeroSquareMeters */.iT}get allFields(){return[]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"radius",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"area",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"allFields",null),i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawCircleTooltipInfo")],i);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/fields/fields.js + 4 modules
var fields = __webpack_require__(69733);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/infos/TooltipInfoWithCoordinates.js
var TooltipInfoWithCoordinates = __webpack_require__(38153);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawMeshTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let p=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(o){super(o),this.type="draw-mesh",this.orientation=(0,fields/* makeOrientationField */.LJ)({lockable:!1}),this.scale=(0,fields/* makeScaleField */.dy)({lockable:!1})}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,this.orientation,this.scale]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],p.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],p.prototype,"allFields",null),p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawMeshTooltipInfo")],p);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawMultipointTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawMultipointTooltipInfo_i=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(o){super(o),this.type="draw-multipoint"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawMultipointTooltipInfo_i.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawMultipointTooltipInfo_i.prototype,"allFields",null),DrawMultipointTooltipInfo_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawMultipointTooltipInfo")],DrawMultipointTooltipInfo_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawPointTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawPointTooltipInfo_i=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(o){super(o),this.type="draw-point"}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPointTooltipInfo_i.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPointTooltipInfo_i.prototype,"allFields",null),DrawPointTooltipInfo_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawPointTooltipInfo")],DrawPointTooltipInfo_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawPolygonTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawPolygonTooltipInfo_c=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(o){super(o),this.type="draw-polygon",this.direction=(0,fields/* makeDirectionField */.Gk)(),this.distance=(0,fields/* makeDistanceField */.Ku)(),this.area=(0,fields/* makeAreaField */.Am)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.area]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolygonTooltipInfo_c.prototype,"xyMode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolygonTooltipInfo_c.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolygonTooltipInfo_c.prototype,"allFields",null),DrawPolygonTooltipInfo_c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawPolygonTooltipInfo")],DrawPolygonTooltipInfo_c);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawPolylineTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawPolylineTooltipInfo_c=class extends((0,TooltipInfoWithCoordinates/* TooltipInfoWithCoordinates */.B)(SketchTooltipInfo/* SketchTooltipInfo */.w)){constructor(t){super(t),this.type="draw-polyline",this.direction=(0,fields/* makeDirectionField */.Gk)(),this.distance=(0,fields/* makeDistanceField */.Ku)(),this.totalLength=(0,fields/* makeTotalLengthField */.fr)(),this.xyMode="direction-distance"}get allFields(){return[this.direction,this.distance,this.longitude,this.latitude,this.x,this.y,this.elevation,this.totalLength]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolylineTooltipInfo_c.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolylineTooltipInfo_c.prototype,"xyMode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawPolylineTooltipInfo_c.prototype,"allFields",null),DrawPolylineTooltipInfo_c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawPolylineTooltipInfo")],DrawPolylineTooltipInfo_c);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/infos/DrawRectangleTooltipInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawRectangleTooltipInfo_p=class extends SketchTooltipInfo/* SketchTooltipInfo */.w{constructor(o){super(o),this.type="draw-rectangle",this.xSize=quantityUtils/* zeroMeters */.r7,this.ySize=quantityUtils/* zeroMeters */.r7,this.area=quantityUtils/* zeroSquareMeters */.iT}get allFields(){return[]}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"xSize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"ySize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"area",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"helpMessage",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawRectangleTooltipInfo_p.prototype,"allFields",null),DrawRectangleTooltipInfo_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.infos.DrawRectangleTooltipInfo")],DrawRectangleTooltipInfo_p);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/angularMeasurementUtils.js
var angularMeasurementUtils = __webpack_require__(52857);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/euclideanLengthMeasurementUtils.js
var euclideanLengthMeasurementUtils = __webpack_require__(91199);
;// ../node_modules/@arcgis/core/views/draw/support/tooltipUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function D(e,t){return{point:new DrawPointTooltipInfo_i({sketchOptions:t,viewType:e}),multipoint:new DrawMultipointTooltipInfo_i({sketchOptions:t,viewType:e}),polyline:new DrawPolylineTooltipInfo_c({sketchOptions:t,viewType:e}),polygon:new DrawPolygonTooltipInfo_c({sketchOptions:t,viewType:e}),mesh:new p({sketchOptions:t,viewType:e}),rectangle:new DrawRectangleTooltipInfo_p({sketchOptions:t}),circle:new i({sketchOptions:t})}}function T(e){const{directionOptions:t,geometryType:o,sketchOptions:n,tooltipInfos:i}=e,r=t=>{const o=N(e).mode,n=i[t].elevation;"relative-to-ground"===o||"relative-to-scene"===o||"on-the-ground"===o?n.lock(W(e)):n.unlock()},a=e=>{if(t){const o=i[e].direction;o.committed=t.angle,o.unlockOnVertexPlacement=!1,n.values.directionMode=t.mode}};switch(o){case"polygon":case"polyline":r(o),a(o);break;case"point":case"mesh":r(o)}}function j(e,t){const{drawOperation:o,view:n}=t,i=b(t),r=N(t);if("2d"===n.type||!e||"absolute-height"!==r.mode||1!==o?.numCommittedVertices||!i||"draw-polyline"!==i.type&&"draw-polygon"!==i.type||i.elevation.locked)return;const[a,c,l]=e,s=K(a,c,l,r,t);null!=s&&i.elevation.lock(s)}function U(e){b(e)?.allFields.forEach((e=>{e.unlockOnVertexPlacement&&e.unlock()}))}function b({geometryType:e,graphic:t,tooltipInfos:o}){return t?.geometry?.type!==P[e]?"circle"===e||"rectangle"===e?o[e]:null:o[e]}const P={point:"point",multipoint:"multipoint",mesh:"mesh",polyline:"polyline",polygon:"polygon",circle:"polygon",rectangle:"polygon",freehandPolygon:"polygon",freehandPolyline:"polyline"};function I(e,t){switch(e?.type){case"draw-point":L(e,t);break;case"draw-multipoint":V(e,t);break;case"draw-polyline":z(e,t);break;case"draw-polygon":A(e,t);break;case"draw-rectangle":F(e,t);break;case"draw-circle":H(e,t);break;case"draw-mesh":G(e,t)}}function L(e,t){const o=t.graphic?.geometry;"point"===o?.type&&(S(e,o,t),e.helpMessage=helpMessageUtils_e("point",o,t.drawOperation.drawingMode))}function V(e,t){const o=t.graphic?.geometry;"multipoint"===o?.type&&(S(e,o,t),e.helpMessage=helpMessageUtils_e("multipoint",o,t.drawOperation.drawingMode))}function G(e,t){const{graphic:o,view:n}=t,i=o?.geometry;"3d"!==n.type||i&&"mesh"!==i.type||(S(e,i?.origin,t),i&&(0,tooltipCommonUtils/* updateTooltipInfoFromMeshTransform */.Ue)(e,i),e.helpMessage=helpMessageUtils3d_i(o,n))}function S(e,t,o){const{drawOperation:n,view:i,sketchOptions:r}=o,{cursorVertex:a}=n;e.sketchOptions=r,e.viewType=i.type;const c="multipoint"===t?.type?t.getPoint(t.points.length-1):t;if(e.setLocationFromPoint(c,Q(o)),R(e.elevation,o),!a)return void(n.constraints=void 0);const l=a;n.constraints={context:$(l,o),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:null,direction:null}}function z(e,t){const{createOperationGeometry:n,drawOperation:i,automaticLengthMeasurementUtils:r}=t,a=null!=n?n.full:null;a&&"polyline"!==a.type||(Z(e,t),e.totalLength.actual=i.lastVertex?(a?r.autoLength2D(a):null)??quantityUtils/* zeroMeters */.r7:null,e.helpMessage=helpMessageUtils_e("polyline",a,t.drawOperation.drawingMode))}function A(e,o){const{createOperationGeometry:n,drawOperation:i}=o,r=null!=n?n.full:null;r&&"polygon"!==r.type||(Z(e,o),e.area.actual=i.lastVertex?(r?o.automaticAreaMeasurementUtils.autoArea2D(r):null)??quantityUtils/* zeroSquareMeters */.iT:null,e.helpMessage=helpMessageUtils_e("polygon",r,o.drawOperation.drawingMode))}const B=(0,ensureType/* ensureType */.dp)(Point/* default */.A);function Z(e,t){const{drawOperation:n,sketchOptions:r,view:a,automaticLengthMeasurementUtils:c}=t,{cursorVertex:l,lastVertex:s,secondToLastVertex:p}=n,u=r.values.effectiveDirectionMode;e.sketchOptions=r,e.viewType=a.type;const m=s&&l?c.autoDistanceBetweenPoints2D(B(s),B(l))??quantityUtils/* zeroMeters */.r7:null;if(e.distance.actual=m,e.distance.readOnly=null==s,e.direction.actual=null,e.direction.readOnly=!0,s&&l&&("absolute"===u||p)){const t=(0,angularMeasurementUtils/* directionForVertices */.uR)(p,s,l,u);e.direction.actual=t??quantityUtils/* zeroDegreesGeographic */.n0,e.direction.readOnly=!1}e.setLocationFromPoint(l,Q(t)),R(e.elevation,t);const d=C(s,t);e.xyMode=d,e.direction.visible="direction-distance"===d,e.distance.visible="direction-distance"===d,e.effectiveX.visible="coordinates"===d,e.effectiveY.visible="coordinates"===d;const f=l??s;n.constraints=f?{context:$(f,t),x:e.x.committed,y:e.y.committed,longitude:e.longitude.committed,latitude:e.latitude.committed,elevation:e.elevation.committed,distance:e.distance.committed,direction:e.direction.committed}:void 0}function C(e,{sketchOptions:t}){const o=t.tooltips.xyMode;return"auto"===o?e?"direction-distance":"coordinates":o}function F(e,t){e.sketchOptions=t.sketchOptions,e.xSize=E(t),e.ySize=X(t),e.area=q(t),e.helpMessage=helpMessageUtils_e("rectangle",t.graphic?.geometry,t.drawOperation.drawingMode)}function H(e,t){const{forceUniformSize:o,sketchOptions:n}=t;e.sketchOptions=n,e.radius=o?Y(t):null,e.xSize=o?null:E(t),e.ySize=o?null:X(t),e.area=q(t),e.helpMessage=helpMessageUtils_e("circle",t.graphic?.geometry,t.drawOperation.drawingMode)}function R(e,t){const{drawOperation:o}=t,n=o?.cursorVertex??o?.lastVertex;e.actual=(0,euclideanLengthMeasurementUtils/* elevationFromPoint */.Of)(n)??W(t),e.visible=o.hasZ,e.readOnly=!1,e.showAsZ=!0}function q(e){const o=e.createOperationGeometry?.full;return"polygon"!==o?.type?quantityUtils/* zeroSquareMeters */.iT:e.automaticAreaMeasurementUtils.autoArea2D(o)??quantityUtils/* zeroSquareMeters */.iT}function E({createOperationGeometry:e,automaticLengthMeasurementUtils:t}){const n=e?.rectangle?.midpoints;return(null!=n?t.autoDistanceBetweenPoints2D(n.left,n.right):null)??quantityUtils/* zeroMeters */.r7}function X({createOperationGeometry:e,automaticLengthMeasurementUtils:t}){const n=e?.rectangle?.midpoints;return(null!=n?t.autoDistanceBetweenPoints2D(n.top,n.bottom):null)??quantityUtils/* zeroMeters */.r7}function Y({createOperationGeometry:e,automaticLengthMeasurementUtils:t}){return(null!=e?.circle?.center&&null!=e.circle.edge?t.autoDistanceBetweenPoints2D(e.circle.center,e.circle.edge):null)??quantityUtils/* zeroMeters */.r7}function J(t){const{geometryType:o,tooltipInfos:n}=t;switch(o){case"point":case"multipoint":case"mesh":case"polyline":case"polygon":{const i=n[o].elevation.committed;if(!i)return;return (0,quantityUtils/* valueInUnit */.l3)(i,"meters")/(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(Q(t))}default:return}}function K(e,t,o,n,i){const{view:r,drawOperation:a}=i;if("3d"!==r.type||!a)return;o??=0;const c=Q(i),l=N(i),p=(0,elevationInfoUtils/* getConvertedElevationFromXYZ */.Fo)(r,e,t,o,c,l,n);return (0,euclideanLengthMeasurementUtils/* elevationFromZ */.Qc)(p,c)??W(i)}function N(e){return e.drawOperation.elevationInfo??elevationInfoUtils/* absoluteHeightElevationInfo */.qt}function Q(e){return e.drawOperation.coordinateHelper.spatialReference}function W(e){const t=(0,unitUtils/* getMetersPerVerticalUnitForSR */.G9)(Q(e));return (0,quantityUtils/* createLength */.d_)(e.defaultZ*t,"meters")}function $(e,t){return (0,constraintUtils/* getConstraintContext */.hj)(e,t.view,Q(t),N(t),t.drawOperation.coordinateHelper.hasZ(),t.sketchOptions.values.effectiveDirectionMode)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js + 1 modules
var InteractiveToolBase = __webpack_require__(37413);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/SketchOptions.js
var SketchOptions = __webpack_require__(76748);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/trackingUtils.js
var trackingUtils = __webpack_require__(97996);
;// ../node_modules/@arcgis/core/views/draw/DrawGraphicTool.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawGraphicTool_E=class extends(Evented/* default */.A.EventedMixin(InteractiveToolBase/* InteractiveToolBase */.g)){constructor(t){super(t),this._graphic=null,this._coordinateFormatterLoadTask=null,this._createOperationGeometry=null,this.defaultZ=0,this.directionOptions=null,this.elevationLockOnVertexAddDisabled=!1,this.geometryType=null,this.hasZ=!0,this.geometryToPlace=null,this.snappingManager=null,this.snapToScene=!1,this.sketchOptions=new SketchOptions/* default */.A}initialize(){const{view:t}=this;this.internalGraphicsLayer=new GraphicsLayer/* default */.A({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer);const e=this.drawOperation=this.makeDrawOperation();this.tooltipInfos=D(t.type,this.sketchOptions);const o=(0,tooltipCommonUtils/* makeTooltip */.A)((()=>({view:t,options:this.sketchOptions.tooltips})));this.tooltip=o,T(this._tooltipsContext),this._coordinateFormatterLoadTask=(0,asyncUtils/* createTask */.UT)((()=>(0,coordinateFormatter/* load */.Hh)())),this.addHandles([e.on("vertex-add",(t=>this.onVertexAdd(t))),e.on("vertex-remove",(t=>this.onVertexRemove(t))),e.on("vertex-update",(t=>this.onVertexUpdate(t))),e.on("cursor-update",(t=>this.onCursorUpdate(t))),e.on("cursor-remove",(()=>this._updateGraphic())),e.on("complete",(t=>this.onComplete(t))),this._coordinateFormatterLoadTask,o.on("paste",(t=>(0,tooltipCommonUtils/* pasteLocation */.HA)(t,this.activeTooltipInfo))),(0,reactiveUtils/* watch */.wB)((()=>this.cursor),(t=>{e.cursor=t}),reactiveUtils/* syncAndInitial */.pc),(0,trackingUtils/* autorun */.fm)((()=>{const{activeTooltipInfo:t,sketchOptions:e}=this;I(t,this._tooltipsContext),o.info=e.tooltips.effectiveEnabled?t:null})),(0,trackingUtils/* autorun */.fm)((()=>{e.constraintZ=J(this._tooltipsContext)}),reactiveUtils/* sync */.OH)]),this.finishToolCreation()}destroy(){this.drawOperation=(0,maybe/* destroyMaybe */.pR)(this.drawOperation),this.tooltip=(0,maybe/* destroyMaybe */.pR)(this.tooltip),this._destroyAllVisualizations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,maybe/* destroyMaybe */.pR)(this.internalGraphicsLayer),this._set("view",null)}get _drawSpatialReference(){return this.drawOperation.coordinateHelper.spatialReference}get _tooltipsContext(){const{defaultZ:t,directionOptions:e,drawOperation:o,forceUniformSize:r,geometryType:i,graphic:s,sketchOptions:n,tooltipInfos:a,view:l,automaticAreaMeasurementUtils:p,automaticLengthMeasurementUtils:c}=this;return{createOperationGeometry:this._createOperationGeometry,defaultZ:t,directionOptions:e,drawOperation:o,forceUniformSize:r,geometryType:i,graphic:s,sketchOptions:n,tooltipInfos:a,view:l,automaticAreaMeasurementUtils:p,automaticLengthMeasurementUtils:c}}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(t){this._set("centered",t),this._updateGraphic()}get cursor(){return this._get("cursor")}set cursor(t){this._set("cursor",t)}set enabled(t){this.drawOperation.interactive=t,this._set("enabled",t)}set forceUniformSize(t){this._set("forceUniformSize",t),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(t){this._set("graphicSymbol",t),null!=this._graphic&&(this._graphic.symbol=t)}set mode(t){const e=this.drawOperation;e&&(e.drawingMode=t),this._set("mode",t)}get updating(){return this.drawOperation?.updating??!1}get undoRedo(){const{view:{type:t,map:e}}=this;return"2d"===t&&e&&"undoRedo"in e&&e.undoRedo instanceof u?e.undoRedo:null}set undoRedo(t){this._override("undoRedo",t)}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(t){this.destroyed||(0,tooltipCommonUtils/* enterInputModeIfAvailable */.wG)(t,this.tooltip)||this.drawOperation.onInputEvent(t)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo(),0===this.drawOperation.numCommittedVertices&&T(this._tooltipsContext)}_destroyAllVisualizations(){this.removeHandles(DrawGraphicTool_I.outline),this.removeHandles(DrawGraphicTool_I.regularVertices),this.removeHandles(DrawGraphicTool_I.activeVertex),this.removeHandles(DrawGraphicTool_I.activeEdge),this.removeHandles(M)}_createOrUpdateGraphic(t){if(null!=this._graphic)return this.updateGraphicGeometry(t),this._graphic;const o=new Graphic/* default */.A({...this.graphicProperties,symbol:this.graphicSymbol});return this._graphic=o,this.updateGraphicGeometry(t),this.internalGraphicsLayer.add(o),this.addHandles(this.initializeGraphic(o)),this.notifyChange("graphic"),this.addHandles((0,handleUtils/* makeHandle */.hA)((()=>{this.internalGraphicsLayer.remove(o),this._graphic===o&&(this._graphic=null)})),M),o}updateGraphicGeometry(t){this._graphic.geometry=t}_getCreateOperationGeometry(t={operationComplete:!1}){if(null==this.drawOperation)return;const{coordinateHelper:e,view:o,visualizationCursorVertex:r,lastVertex:i,committedVertices:s,geometryIncludingUncommittedVertices:n,numCommittedVertices:a}=this.drawOperation;if(!(a>0||null!=r))return;const l=t.operationComplete?s:n,p=l.length,c=null!=r?e.pointToArray(r):null,d=this._drawSpatialReference,h="3d"===o.type&&"global"===o.viewingMode,u=new CreateOperationGeometry_l;u.committedVertices=s,u.cursorVertex=c;const{geometryType:x}=this;switch(x){case"point":case"mesh":u.full=e.arrayToPoint(l[0]);break;case"multipoint":u.full=p>0?(0,createUtils/* createMultipoint */.eq)(l,d):null;break;case"polyline":case"polygon":p>0&&(u.full="polygon"===x?(0,createUtils/* createPolygon */.N6)([l],d,h,!0):(0,createUtils/* createPolyline */.LZ)([l],d,h),u.cursorEdge=null!=c&&i&&!(0,dehydratedFeatureComparison/* pointEquals */.CI)(r,i)?(0,createUtils/* createPolyline */.LZ)([[c,e.pointToArray(i)]],d,h):null,u.outline=p>1?u.full:null);break;case"circle":case"rectangle":{if(u.committedVertices=u.cursorVertex=null,!p)break;const e=(0,surfaceCoordinateSystems/* createViewAlignedCoordinateSystem */.ZP)(o,l[0]),r=l[0],i=e.makeMapPoint(r[0]+DrawGraphicTool_Z*o.resolution,r[1]);"circle"===x?1===p&&t.operationComplete?u.circle=(0,createUtils/* createCircle */.zV)([r,i],e,!0):2===p&&(this.forceUniformSize?u.circle=(0,createUtils/* createCircle */.zV)(l,e,this.centered):u.rectangle=(0,createUtils/* createEllipse */.zd)(l,e,this.centered)):1===p&&t.operationComplete?u.rectangle=(0,createUtils/* createSquare */.GF)([r,i],e,!0):2===p&&(u.rectangle=this.forceUniformSize?(0,createUtils/* createSquare */.GF)(l,e,this.centered):(0,createUtils/* createRectangle */._T)(l,e,this.centered)),u.full=null!=u.circle?u.circle.geometry:u.rectangle?.geometry,u.outline="polygon"===u.full?.type?u.full:null;break}default:return null}return u}initializeGraphic(t){return (0,handleUtils/* makeHandle */.hA)()}onComplete(t){if(!this.drawOperation)return;this._updateGraphic();let e=null;if(this.drawOperation.isCompleted){const t=this._getCreateOperationGeometry({operationComplete:!0});null!=t&&(e=this._createOrUpdateGraphic(t.full))}this._createOperationGeometry=null,this.emit("complete",{graphic:e,...t})}onCursorUpdate(t){this._updateGraphic(),this.emit("cursor-update",t)}onDeactivate(){const{drawOperation:t}=this;t&&(t.isCompleted||t.cancel())}onOutlineChanged(t){return (0,handleUtils/* makeHandle */.hA)()}onCursorEdgeChanged(t){return (0,handleUtils/* makeHandle */.hA)()}onVertexAdd(t){U(this._tooltipsContext),this._updateGraphic(),this.elevationLockOnVertexAddDisabled||j(t.vertices.at(0)?.coordinates,this._tooltipsContext),this.emit("vertex-add",t)}onVertexRemove(t){U(this._tooltipsContext),this._updateGraphic(),this.emit("vertex-remove",t)}onVertexUpdate(t){this._updateGraphic(),this.emit("vertex-update",t)}_updateGraphic(){const t=this._getCreateOperationGeometry();this._createOperationGeometry=t,null!=t?(null!=t.cursorEdge?this.addHandles(this.onCursorEdgeChanged(t.cursorEdge),DrawGraphicTool_I.activeEdge):this.removeHandles(DrawGraphicTool_I.activeEdge),null!=t.outline?this.addHandles(this.onOutlineChanged(t.outline),DrawGraphicTool_I.outline):this.removeHandles(DrawGraphicTool_I.outline),null!=t.committedVertices?this.addHandles(this.onRegularVerticesChanged(t.committedVertices),DrawGraphicTool_I.regularVertices):this.removeHandles(DrawGraphicTool_I.regularVertices),null!=t.cursorVertex?this.addHandles(this.onActiveVertexChanged(t.cursorVertex),DrawGraphicTool_I.activeVertex):this.removeHandles(DrawGraphicTool_I.activeVertex),null!=t.full?this._createOrUpdateGraphic(t.full):this.removeHandles(M)):this._destroyAllVisualizations()}get activeTooltipInfo(){return this._coordinateFormatterLoadTask?.finished?b(this._tooltipsContext):null}};(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"_coordinateFormatterLoadTask",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"_createOperationGeometry",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"_tooltipsContext",null),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!0})],DrawGraphicTool_E.prototype,"centered",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"cursor",null),(0,tslib_es6._)([(0,property/* property */.MZ)({nonNullable:!0})],DrawGraphicTool_E.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"directionOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"drawOperation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"elevationLockOnVertexAddDisabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!0})],DrawGraphicTool_E.prototype,"enabled",null),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!0})],DrawGraphicTool_E.prototype,"forceUniformSize",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"graphic",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"graphicProperties",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"graphicSymbol",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"geometryToPlace",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"mode",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"snapToScene",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"tooltip",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"tooltipInfos",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,type:SketchOptions/* default */.A})],DrawGraphicTool_E.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,nonNullable:!0})],DrawGraphicTool_E.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"automaticAreaMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"automaticLengthMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],DrawGraphicTool_E.prototype,"undoRedo",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawGraphicTool_E.prototype,"activeTooltipInfo",null),DrawGraphicTool_E=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.draw.DrawGraphicTool")],DrawGraphicTool_E);const M=Symbol("create-operation-graphic"),DrawGraphicTool_I={outline:Symbol("outline-visual"),regularVertices:Symbol("regular-vertices-visual"),activeVertex:Symbol("active-vertex-visual"),activeEdge:Symbol("active-edge-visual")};function DrawGraphicTool_F(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";case"mesh":return"point"}}const DrawGraphicTool_Z=48;


/***/ }),

/***/ 96453:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  O0: () => (/* binding */ F)
});

// UNUSED EXPORTS: defaultCursor, defaultLoadingCursor

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/memoize.js
var memoize = __webpack_require__(6371);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/ReactiveSet.js
var ReactiveSet = __webpack_require__(56194);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js
var diffUtils = __webpack_require__(64442);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/dehydratedFeatureComparison.js
var dehydratedFeatureComparison = __webpack_require__(9723);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/elevationInfoUtils.js
var elevationInfoUtils = __webpack_require__(27451);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/draw/DrawingMode.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const c=(/* unused pure expression or super */ null && (["freehand","hybrid","click"])),e="click";

;// ../node_modules/@arcgis/core/views/draw/DrawManipulator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DrawManipulator_t{constructor({consumesClicks:t,grabbableForEvent:s}){this.events=new Evented/* default */.A,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.consumesClicks=t,this.grabbableForEvent=s}destroy(){}intersectionDistance(e,t){return 0}attach(){}detach(){}onElevationChange(){}onViewChange(){}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/coordinateHelper.js
var coordinateHelper = __webpack_require__(75999);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/dragEventPipeline.js
var dragEventPipeline = __webpack_require__(74321);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js + 1 modules
var EditGeometry = __webpack_require__(4057);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometryOperations.js + 8 modules
var EditGeometryOperations = __webpack_require__(59147);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/constraints.js
var constraints = __webpack_require__(81066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/constraintUtils.js
var constraintUtils = __webpack_require__(7086);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/sketch/SketchLabelOptions.js
var SketchLabelOptions = __webpack_require__(86084);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingContext.js
var SnappingContext = __webpack_require__(53333);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/SnappingDragPipelineStep.js
var SnappingDragPipelineStep = __webpack_require__(89030);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/Scheduler.js
var Scheduler = __webpack_require__(22167);
;// ../node_modules/@arcgis/core/views/interactive/snapping/SnappingOperation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let SnappingOperation_p=class extends Accessor/* default */.A{constructor(t){super(t),this.constrainResult=t=>t,this._snapPoints=null,this._frameTask=null,this._abortController=null,this._stagedPoint=null,this._snap=(0,promiseUtils/* debounce */.sg)((async(t,s,o,n)=>{const i=this._frameTask;if(null==i)return;const r=await i.schedule((()=>s.snap({...t,context:o,signal:n})),n);r.valid&&await i.schedule((()=>{this.stagedPoint=r.apply(),t!==this._snapPoints&&null!=this._snapPoints&&(this.stagedPoint=s.update({...this._snapPoints,context:o}))}),n)}))}get stagedPoint(){return this._stagedPoint}set stagedPoint(t){this._stagedPoint=this.constrainResult(t)}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=null!=t?t.registerTask(Scheduler/* TaskPriority */.W6.SNAPPING):Scheduler/* ImmediateTask */.nu}destroy(){this._abortController=(0,maybe/* abortMaybe */.DC)(this._abortController),this._frameTask=(0,maybe/* removeMaybe */.xt)(this._frameTask)}update(t,s,o){this._snapPoints=t;const{point:n,scenePoint:i}=t,r=s.update({point:n,scenePoint:i,context:o});return this.stagedPoint=r,r}async snap(t,s,o){const{point:n,scenePoint:i}=t;return this.stagedPoint=s.update({point:n,scenePoint:i,context:o}),this._snapPoints=t,null==this._abortController&&(this._abortController=new AbortController),this._snap(t,s,o,this._abortController.signal)}async snapAgainNearPreviousMapPoint(t,s){null!=this._snapPoints&&await this.snap(this._snapPoints,t,s)}abort(){this._abortController=(0,maybe/* abortMaybe */.DC)(this._abortController),this._snapPoints=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],SnappingOperation_p.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SnappingOperation_p.prototype,"stagedPoint",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],SnappingOperation_p.prototype,"constrainResult",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],SnappingOperation_p.prototype,"_stagedPoint",void 0),SnappingOperation_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.snapping.SnappingOperation")],SnappingOperation_p);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js
var snappingUtils = __webpack_require__(61851);
;// ../node_modules/@arcgis/core/views/draw/DrawOperation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const L="crosshair",U="progress",A=Symbol(),z=Symbol();let F=class extends(Evented/* default */.A.EventedMixin(Accessor/* default */.A)){constructor(t){super(t),this._createOperationCompleted=!1,this._hideDefaultCursor=!1,this._pointerDownStates=new ReactiveSet/* default */.A,this._stagedScreenPoint=null,this._stagedPointerType=null,this._updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._stagedPointerId=null,this.constraintsEnabled=!1,this.constraints=void 0,this._getPointConstraint=(0,memoize/* memoize */.B)(constraintUtils/* getPointConstraint */.cx),this._getPolylineOrPolygonConstraint=(0,memoize/* memoize */.B)(constraintUtils/* getPolylineOrPolygonConstraint */.lJ),this.constraintZ=null,this.defaultZ=null,this.isDraped=!0,this.labelOptions=new SketchLabelOptions/* default */.A,this.cursor=null,this.loading=!1,this.snapToSceneEnabled=null,this.firstVertex=null,this.lastVertex=null,this.secondToLastVertex=null,null==t.elevationInfo&&(this.elevationInfo=(0,elevationInfoUtils/* getEffectiveElevationInfo */.bK)(!!t.hasZ))}initialize(){const{geometryType:t,view:e}=this,i=e.spatialReference,n="viewingMode"in e.state?e.state.viewingMode:ViewingMode/* ViewingMode */.RT.Local,r="segment"===t||"multipoint"===t?"polyline":t;this.coordinateHelper=(0,coordinateHelper/* createCoordinateHelper */.BV)(this.hasZ,this.hasM,i),this._editGeometryOperations=new EditGeometryOperations/* EditGeometryOperations */.p(new EditGeometry/* EditGeometry */.ZE(r,this.coordinateHelper),n),this._snappingOperation=new SnappingOperation_p({view:e}),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>({stagedPoint:this._snappingOperation.stagedPoint,constraint:this._constraint})),(({stagedPoint:t,constraint:e},i)=>{const{snappingOptions:n}=this;n&&(n.forceDisabled=null!=e&&(0,constraints/* isPoint */.fT)(e));if(null!=i&&t===i.stagedPoint&&e!==i.constraint)return this._onKeyboardBasedChange();this._processCursor(t??this._screenToMap(this._stagedScreenPoint))}),{equals:(t,e)=>t.stagedPoint===e.stagedPoint&&(0,maybe/* equalsMaybe */.CM)(t.constraint,e.constraint)}),(0,reactiveUtils/* watch */.wB)((()=>this.view.viewpoint),((t,e)=>{t&&e&&(0,diffUtils/* diff */.Ui)(t,e)&&this._onKeyboardBasedChange()}))]),this._activeComponent=new EditGeometry/* Component */.uA(i,n),this._editGeometryOperations.data.components.push(this._activeComponent);const s=this.segmentLabels;null!=s&&(s.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions,automaticLengthMeasurementUtils:this.automaticLengthMeasurementUtils},this.addHandles((0,reactiveUtils/* watch */.wB)((()=>this.labelOptions.enabled),(t=>{s.visible=t}),reactiveUtils/* syncAndInitial */.pc))),this.addHandles(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(t=>{const e=t.vertices.map((t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)}))),i=e.map((t=>t.coordinates)),n=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getFirstVertex()?.pos)??null;(0,dehydratedFeatureComparison/* pointEquals */.CI)(n,this.firstVertex)||(this.firstVertex=n);const o=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.getLastVertex()?.pos)??null;(0,dehydratedFeatureComparison/* pointEquals */.CI)(o,this.lastVertex)||(this.lastVertex=o);const r=this.coordinateHelper.vectorToDehydratedPoint(this._activeComponent.edges.at(-1)?.leftVertex?.pos)??null;switch((0,dehydratedFeatureComparison/* pointEquals */.CI)(r,this.secondToLastVertex)||(this.secondToLastVertex=r),this._processCursor(this.cursorVertex),t.type){case"vertex-add":this.emit(t.type,{...t,added:i,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:i,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:i,vertices:e})}})));const p=this._manipulator=new DrawManipulator_t({consumesClicks:!1,grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size});this.manipulators.add(p),p.grabbable="point"!==t&&"multipoint"!==t,this.addHandles([p.events.on("immediate-click",(t=>this._onImmediateClick(t))),p.events.on("immediate-double-click",(t=>this._onImmediateDoubleClick(t))),(0,reactiveUtils/* watch */.wB)((()=>this.drawingMode),(()=>{this.removeHandles(A),this.addHandles(this._createManipulatorDragPipeline(p),A)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>({effectiveCursor:this.effectiveCursor})),(({effectiveCursor:t})=>{p.cursor=t}),reactiveUtils/* syncAndInitial */.pc)]),(0,snappingUtils/* setupSnappingToggleHandles */.BY)(this,(()=>{const t=this.view.inputManager.latestPointerType??"mouse",e=this._getSnappingContext(t);if(null!=this.snappingManager){const t=this._snappingOperation.snapAgainNearPreviousMapPoint(this.snappingManager,e);this._updatingHandles.addPromise((0,promiseUtils/* ignoreAbortErrors */.QZ)(t))}}))}destroy(){(0,maybe/* destroyMaybe */.pR)(this.segmentLabels),(0,maybe/* destroyMaybe */.pR)(this._snappingOperation),this._editGeometryOperations=(0,maybe/* destroyMaybe */.pR)(this._editGeometryOperations),this._updatingHandles.destroy()}get _isDragging(){const{_stagedPointerId:t,_manipulator:e}=this;return null!=t&&this._pointerDownStates.has(t)||e.grabbing||!e.interactive}get _snappingEnabled(){return null!=this.snappingManager&&this.snappingManager.options.effectiveEnabled}get _requiresScenePoint(){const t=this._updateAndGetEffectiveDrawSurface();return"3d"===this.view.type&&this.drawSurface!==t}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((t=>this.coordinateHelper.vectorToArray(t.pos)))}get _constraint(){const{constraints:t,constraintsEnabled:e}=this;if(t&&e)switch(this.geometryType){case"point":case"multipoint":return this._getPointConstraint(t);case"polygon":case"polyline":return this._getPolylineOrPolygonConstraint(this.lastVertex,this.secondToLastVertex,t)}}set drawingMode(t){this._set("drawingMode",t??e)}get effectiveCursor(){return this.loading?U:this._hideDefaultCursor?null:this.cursor||L}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get snappingOptions(){return null!=this.snappingManager?this.snappingManager.options:null}get cursorVertex(){return this._get("cursorVertex")}get visualizationCursorVertex(){return"mouse"===this._stagedPointerType?this.cursorVertex:null}get committableVertex(){const{cursorVertex:t,lastVertex:e,firstVertex:i,geometryType:n}=this;return"polygon"===n&&(0,dehydratedFeatureComparison/* pointNear */.fk)(t,i)||(0,dehydratedFeatureComparison/* pointNear */.fk)(t,e)?null:t}get updating(){return this._updatingHandles.updating}get geometryIncludingUncommittedVertices(){const{committedVertices:t,committableVertex:e,coordinateHelper:i}=this,n=t.slice();return null!=e&&n.push(i.pointToArray(e)),n}cancel(){this.complete({aborted:!0})}commitStagedVertex(){this._snappingOperation.abort();const{committableVertex:t}=this;null!=t&&this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}complete(t){const e=t?.aborted||!1;this._snappingOperation.abort(),this.snappingManager?.doneSnapping();const{geometryType:i,numCommittedVertices:n}=this,o="multipoint"===i&&0===n||"polyline"===i&&n<2||"polygon"===i&&n<3;"segment"!==i&&"point"!==i||this.commitStagedVertex(),this._createOperationCompleted=!o,(this.isCompleted||e)&&(this._stagedScreenPoint=null,this._stagedPointerId=null,this._stagedPointerType=null,this._processCursor(null),this.emit("complete",{vertices:this.committedVertices.map(((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t}))),aborted:e,type:"complete"}))}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_processCursor(t){const e=(0,lang/* clone */.o8)(this.cursorVertex),i=(0,lang/* clone */.o8)(t),o=i&&(this._updateAndGetEffectiveDrawSurface()?.constrainZ(i)??i),r=this._snapToClosingVertex(o),s=this._applyConstraints(r);(0,dehydratedFeatureComparison/* pointNear */.fk)(e,s)||(this._set("cursorVertex",s),this.segmentLabels?.set("stagedVertex",null!=s?this.coordinateHelper.pointToVector(s):null),null==s||"mouse"!==this._stagedPointerType?this.emit("cursor-remove"):this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(s)}],operation:"apply",type:"vertex-update"}))}_snapToClosingVertex(t){if(null==t||this._isDragging||"polygon"!==this.geometryType||this.numCommittedVertices<=2)return t;const e=this._mapToScreen(t);if(!e)return t;const i=this._activeComponent;return this._vertexWithinPointerDistance(i.vertices[0].pos,e)?this.firstVertex:this._vertexWithinPointerDistance(i.vertices.at(-1).pos,e)?this.lastVertex:t}_createManipulatorDragPipeline(t){switch(this.drawingMode){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(t,((t,e,i,n)=>{const o="touch"===n&&this._snappingEnabled;if(this.isCompleted||!o)return;const{snappingStep:r,cancelSnapping:s}=(0,SnappingDragPipelineStep/* createSnapDragEventPipelineStep */.L)({predicate:()=>o,snappingManager:this.snappingManager,snappingContext:new SnappingContext/* SnappingContext */.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,feature:this.graphic,pointer:n,visualizer:this.snappingVisualizer,drawConstraints:this.constraints}),updatingHandles:this._updatingHandles,useZ:!this._requiresScenePoint});i=i.next((t=>(o&&null!=this.snappingManager&&this.snappingManager.doneSnapping(),t))).next(s),e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._processCursor(t.mapStart),("segment"===this.geometryType||o&&!this.numCommittedVertices)&&this.commitStagedVertex()),t))).next((0,dragEventPipeline/* sceneSnappingAtLocation */.pg)(this.view,this.elevationInfo)).next(...r).next((t=>(o&&(this._processCursor(t.mapEnd),"end"===t.action&&this.commitStagedVertex()),t))).next((t=>("end"===t.action&&("mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t)))}))}_createManipulatorDragPipelineFreehand(t){return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._snappingOperation.abort(),null==this.committableVertex&&this._processCursor(t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this._processCursor(t.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t}))}))}_createManipulatorDragPipelineHybrid(t){return (0,dragEventPipeline/* createManipulatorDragEventPipeline */.Xt)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this._snappingOperation.abort(),this.addHandles(this._editGeometryOperations.createUndoGroup(),z),this._processCursor(t.mapStart),this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this._processCursor(t.mapEnd),"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"mouse"!==this._stagedPointerType&&this._snappingOperation.abort(),this.removeHandles(z),"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t}))}))}get _drawAtFixedElevation(){const{constraintsEnabled:t,constraintZ:e,geometryType:i,numCommittedVertices:n}=this;return t?null!=e||"segment"===i&&n>0:("segment"===i||"polygon"===i)&&n>0}_updateAndGetEffectiveDrawSurface(){const{constraintsEnabled:t,coordinateHelper:e,drawSurface:i,elevationDrawSurface:n,snapToSceneEnabled:o}=this;if(null==n)return i;if(!this.hasZ)return n.defaultZ=null,n;const r=this.elevationInfo?.mode;let s=this.defaultZ,a=t||"absolute-height"===r;if(null!=o&&(a=o),"on-the-ground"===r&&(a=!1),this._drawAtFixedElevation){s=(t?this.constraintZ:null)??e.getZ(this._activeComponent.vertices[0].pos),a=!1}return a?i:(n.defaultZ=s,n)}_mapToScreen(t){return this._updateAndGetEffectiveDrawSurface()?.mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&this._processCursor(t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if(!("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging))try{const{drawingMode:e,geometryType:i}=this;this._stagedPointerType=t.pointerType,this._stagedScreenPoint=t.screenPoint;const n=this._screenToMap(t.screenPoint);if(null==n)return;if(null==n||"freehand"===e&&"point"!==i&&"multipoint"!==i)return;if(this._snappingEnabled&&null!=this.cursorVertex||this._processCursor(n),null==this.committableVertex)return void this.complete();this.commitStagedVertex(),"mouse"!==t.pointerType&&this._processCursor(null),("freehand"===e&&"multipoint"!==this.geometryType||"point"===i||"segment"===i&&2===this.numCommittedVertices||"segment"===i&&"hybrid"===e&&1===this.numCommittedVertices)&&this.complete()}finally{t.stopPropagation()}}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=(0,screenUtils/* createScreenPoint */.tc)(t.x,t.y);this._stagedScreenPoint=e,this._stagedPointerType=t.pointerType,this._stagedPointerId=t.pointerId,this._isDragging?this._snappingOperation.abort():(t.stopPropagation(),this._processCursorMovementRelativeToSurface(e,t.pointerType))}_onKeyboardBasedChange(){"mouse"===this._stagedPointerType&&this._stagedScreenPoint&&null!=this._stagedPointerId&&!this._isDragging?this._processCursorMovementRelativeToSurface(this._stagedScreenPoint,this._stagedPointerType):this._snappingOperation.abort()}_processCursorMovementRelativeToSurface(t,e){const i=this._snappingOperation,n=this._screenToMap(t),o=this._requiresScenePoint?this.drawSurface?.screenToMap(t):null;if(null==n)return this._hideDefaultCursor=!0,this._processCursor(null),void i.abort();this._hideDefaultCursor=!1;const r=this.snappingManager;if(null==r)return this._processCursor(n),void i.abort();const s=this._getSnappingContext(e);this._updatingHandles.addPromise((0,promiseUtils/* ignoreAbortErrors */.QZ)(i.snap({point:n,scenePoint:o},r,s)))}_applyConstraints(t){const{_constraint:e,constraints:i}=this;if(!t||!i||!e)return t;const{context:n}=i,o=(0,constraintUtils/* pointToConstraintSpace */.dz)(t,n),r=o?e.closestTo(o):void 0;if(!r)return t;const s=(0,constraintUtils/* constraintSpaceToPoint */.tC)(r,t,n),a="2d"===this.view.type||"absolute-height"!==n.elevationInfo.mode;return null!=s&&a&&null!=this.constraintZ&&this.hasZ&&(s.z=this.constraintZ),s}_screenToMap(t){return t?this._updateAndGetEffectiveDrawSurface()?.screenToMap(t):null}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),null==t)return null;const i=this._screenToMap(e.screenEnd);return null!=i?{...e,mapStart:t,mapEnd:i}:null}}_vertexWithinPointerDistance(t,e){const i=25,n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return null!=n&&R(n,e,i)}_getSnappingContext(t){const e=this._drawAtFixedElevation?this.elevationDrawSurface?.defaultZ:null;return new SnappingContext/* SnappingContext */.e({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t,feature:this.graphic,visualizer:this.snappingVisualizer,selfSnappingZ:null!=e?{value:e,elevationInfo:this.elevationInfo}:null,drawConstraints:this.constraints})}};function R(t,e,i){const n=t.x-e.x,o=t.y-e.y;return n*n+o*o<=i}(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_hideDefaultCursor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_stagedPointerId",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_isDragging",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_snappingOperation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_snappingEnabled",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"graphic",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"constraintsEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"constraints",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"_constraint",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"constraintZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"defaultZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"isDraped",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"automaticLengthMeasurementUtils",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({value:e})],F.prototype,"drawingMode",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"elevationDrawSurface",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"elevationInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0,type:SketchLabelOptions/* default */.A})],F.prototype,"labelOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"geometryType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"hasM",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"hasZ",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"cursor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"effectiveCursor",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"loading",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"drawSurface",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"segmentLabels",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"snappingManager",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"snappingVisualizer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"snapToSceneEnabled",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],F.prototype,"cursorVertex",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],F.prototype,"visualizationCursorVertex",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"committableVertex",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"firstVertex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"lastVertex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"secondToLastVertex",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],F.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],F.prototype,"view",void 0),F=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.draw.DrawOperation")],F);


/***/ }),

/***/ 12019:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IX: () => (/* binding */ l),
/* harmony export */   Sl: () => (/* binding */ u),
/* harmony export */   rT: () => (/* binding */ c),
/* harmony export */   uF: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89882);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(97066);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78983);
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29394);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85174);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27451);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c{constructor(e,t,s,r=null){this._elevationInfo=e,this.defaultZ=t,this._view=s,this._excludeGraphics=r}screenToMap(t){const{defaultZ:s,_view:r}=this,n=r.sceneIntersectionHelper.intersectElevationFromScreen((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .createScreenPointArray */ .gs)(t.x,t.y),this._elevationInfo,s??0,this._excludeGraphics);return null==s&&null!=n&&(n.z=void 0),n}mapToScreen(e){const t=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_5__/* .makeDehydratedPoint */ .T)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getConvertedElevation */ .wS)(this._view,e,this._elevationInfo),e.spatialReference);return this._view.toScreen(t)}constrainZ(e){const{defaultZ:t}=this;return null!=t&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__/* .clonePoint */ .EL)(e)).z=t),e}}class l{constructor(e,t,s=[]){this.view=e,this.elevationInfo=t,this.exclude=s}screenToMap(e){const t=this.view.toMap(e,{exclude:this.exclude,excludeLabels:!0});return null!=t&&(t.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getZForElevationMode */ .id)(t,this.view,this.elevationInfo)),t}mapToScreen(e){let t=e;return null!=this.elevationInfo&&(t=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_5__/* .makeDehydratedPoint */ .T)(e.x,e.y,(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getConvertedElevation */ .wS)(this.view,e,this.elevationInfo),e.spatialReference)),this.view.toScreen(t)}constrainZ(e){return e}}class h{constructor(e,t=!1,s=0){this.view=e,this.hasZ=t,this.defaultZ=s,this.mapToScreen=t=>e.toScreen(t),this.screenToMap=t?t=>{const r=e.toMap(t);return r.z=s,r}:t=>e.toMap(t)}constrainZ(e){const{defaultZ:t}=this;return this.hasZ&&e.z!==t&&((e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__/* .clonePoint */ .EL)(e)).z=t),e}}class u{screenToMap(e){const{x:t,y:r}=e;return new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A({x:t,y:r,spatialReference:u.spatialReference})}mapToScreen(e){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .createScreenPoint */ .tc)(e.x,e.y)}constrainZ(e){return e}static{this.spatialReference=new _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A}}


/***/ }),

/***/ 83372:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  zV: () => (/* binding */ k),
  zd: () => (/* binding */ v),
  eq: () => (/* binding */ R),
  N6: () => (/* binding */ T),
  LZ: () => (/* binding */ j),
  _T: () => (/* binding */ U),
  GF: () => (/* binding */ createUtils_b)
});

// UNUSED EXPORTS: createPoint

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/ellipsoidUtils.js
var ellipsoidUtils = __webpack_require__(47936);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Point.js
var Point = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polygon.js
var Polygon = __webpack_require__(62802);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/geodesicUtils.js
var geodesicUtils = __webpack_require__(22256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/webMercatorUtils.js
var webMercatorUtils = __webpack_require__(96082);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/WKIDUnitConversion.js
var WKIDUnitConversion = __webpack_require__(83811);
;// ../node_modules/@arcgis/core/geometry/Circle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var f;let g=f=class extends Polygon/* default */.A{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){const e=this.center,o=this.numberOfPoints;if(this.hasZ=e?.hasZ??!1,0!==this.rings.length||!e)return;const c=(0,unitUtils/* convertUnit */.oU)(this.radius,this.radiusUnit,"meters"),n=e.spatialReference;let p,l="geographic";if(n.isWebMercator?l="webMercator":(null!=(n.wkid&&WKIDUnitConversion/* default */.A[n.wkid])||(n.wkt2||n.wkt)&&(0,unitUtils/* isProjectedWKT */.x1)(n.wkt2||n.wkt))&&(l="projected"),this.geodesic){let r;switch(l){case"webMercator":r=(0,webMercatorUtils/* webMercatorToGeographic */.ci)(e);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":r=e}p=this._createGeodesicCircle(r,c,o),"webMercator"===l&&(p=(0,webMercatorUtils/* geographicToWebMercator */.Gh)(p))}else{let r;"webMercator"===l||"projected"===l?r=c/(0,unitUtils/* getMetersPerUnit */.Ao)(e.spatialReference):"geographic"===l&&(r=(0,unitUtils/* lengthToDegrees */.vl)(c,"meters",(0,ellipsoidUtils/* getReferenceEllipsoid */.tO)(e.spatialReference).radius)),p=this._createPlanarCircle(e,r,o)}this.spatialReference=p.spatialReference,this.addRing(p.rings[0])}clone(){const{center:e,numberOfPoints:r,radius:t,radiusUnit:s,geodesic:i}=this;return new f({center:e?.clone(),numberOfPoints:r,radius:t,radiusUnit:s,geodesic:i})}_createGeodesicCircle(e,r,t){const s=[],i=[e.x,e.y];for(let o=0;o<360;o+=360/t){const t=this.hasZ?[0,0,e.z??0]:[0,0];(0,geodesicUtils/* directGeodeticSolver */.vN)(t,i,o,r,SpatialReference/* default */.A.WGS84),s.push(t)}return s.push(s[0]),new Polygon/* default */.A({rings:[s]})}_createPlanarCircle(e,r,t){const s=[],i=2*Math.PI/t;for(let o=0;o<t;++o){const t=i*o,c=[e.x+Math.cos(-t)*r,e.y+Math.sin(-t)*r];this.hasZ&&c.push(e.z??0),s.push(c)}return s.push(s[0]),new Polygon/* default */.A({spatialReference:e.spatialReference,rings:[s]})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:Point/* default */.A})],g.prototype,"center",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],g.prototype,"geodesic",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],g.prototype,"numberOfPoints",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],g.prototype,"radius",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],g.prototype,"radiusUnit",void 0),g=f=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.geometry.Circle")],g);const b=g;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Multipoint.js
var Multipoint = __webpack_require__(90067);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polyline.js
var Polyline = __webpack_require__(42238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/distanceOperator.js
var distanceOperator = __webpack_require__(82079);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/simplifyOperator.js
var simplifyOperator = __webpack_require__(95595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/draw/support/surfaceCoordinateSystems.js
var surfaceCoordinateSystems = __webpack_require__(7388);
;// ../node_modules/@arcgis/core/views/draw/support/createUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function d(t,e){const o=new Point/* default */.A({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(o.z=t[2]),o}function R(t,e){return new Multipoint/* default */.A({points:t,spatialReference:e})}function j(t,e,o){const n=new Polyline/* default */.A({paths:t,spatialReference:e});return o&&(0,coordsUtils/* unnormalizeGeometryOnDatelineCrossing */._7)(n),n}function T(t,n,r,a=!0){const l=(0,lang/* clone */.o8)(t);l.forEach((t=>{const o=t[0],n=t[t.length-1];(0,arrayUtils/* equals */.aI)(o,n)&&1!==t.length||t.push(t[0])}));let s=new Polygon/* default */.A({rings:l,spatialReference:n});return s.rings.forEach((t=>{(0,coordsUtils/* isClockwise */.$3)(t)||t.reverse()})),r&&(0,coordsUtils/* unnormalizeGeometryOnDatelineCrossing */._7)(s),a&&!(0,simplifyOperator.i)(s)&&(0,spatialReferenceUtils/* isValid */.fn)(n)&&(s=(0,simplifyOperator.e)(s)||s),s}function createUtils_b(e,o,n){const r=o.mapToLocalMultiple(e),a=[],l={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y},i=Math.round(s.x-l.x),c=Math.round(s.y-l.y),p=Math.max(Math.abs(i),Math.abs(c));if(n){const t={x:l.x+p,y:l.y+p},e={x:l.x-p,y:l.y-p};a.push((0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(t.x,e.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x,e.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x,t.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(t.x,t.y))}else{const t={x:i>0?l.x+p:l.x-p,y:c>0?l.y+p:l.y-p};a.push((0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x,l.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(t.x,l.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(t.x,t.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x,t.y))}return P(T([a.map((t=>o.localToMap(t))).filter(arrayUtils/* isSome */.Ru)],o.spatialReference,o.doUnnormalization,!0),a,o)}function U(e,o,n){let r=o.mapToLocalMultiple(e);if(1===r.length){const t=48,e=r[0];r=[(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x-t,e.y+t),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x+t,e.y-t),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x+t,e.y-t),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(e.x-t,e.y+t)]}const a=[],l={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y};if(n){const t=Math.round(s.x-l.x),e=Math.round(s.y-l.y);a.push((0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x-t,l.y-e),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(s.x,l.y-e),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(s.x,s.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x-t,s.y))}else a.push((0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x,l.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(s.x,l.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(s.x,s.y),(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(l.x,s.y));return P(T([a.map((t=>o.localToMap(t))).filter(arrayUtils/* isSome */.Ru)],o.spatialReference,o.doUnnormalization,!0),a,o)}function P(t,e,o){const n=z(e[3],e[2],o),r=z(e[1],e[2],o),a=z(e[0],e[1],o),l=z(e[0],e[3],o);return{geometry:t,midpoints:null!=n&&null!=r&&null!=a&&null!=l?{top:n,right:r,bottom:a,left:l}:null}}function z(t,e,o){I[0]=t.x,I[1]=t.y,I[2]=0,L[0]=e.x,L[1]=e.y,L[2]=0,(0,vec32.m)(I,I,L,.5),w.x=I[0],w.y=L[1],w.z=L[2];const n=o.localToMap(w);return null!=n?d(n,o.spatialReference):null}const w=(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(0,0,0),I=(0,vec3f64/* create */.vt)(),L=(0,vec3f64/* create */.vt)();function k(t,e,o,r){const a=e.mapToLocalMultiple(t);let s=null,i=null;if(o)s=a[0],i=a[1];else{const t=a[0],e=a[1],o=Math.round(e.x-t.x),n=Math.round(e.y-t.y),r=Math.max(Math.abs(o),Math.abs(n));s=(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(o>0?t.x+r/2:t.x-r/2,n>0?t.y+r/2:t.y-r/2),i=(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(Math.abs(o)>Math.abs(n)?s.x-r/2:s.x,Math.abs(o)>Math.abs(n)?s.y:s.y-r/2)}const c=e.localToMap(s),p=e.localToMap(i);if(null==c||null==p)return null;e.doUnnormalization&&(0,coordsUtils/* unnormalizeVerticesOnDatelineCrossing */.JM)([[c,p]],e.spatialReference);const u=d(c,e.spatialReference),m=d(p,e.spatialReference),x=(0,unitUtils/* getMetersPerUnitForSR */.GA)(e.spatialReference);let h=0;if((0,spatialReferenceUtils/* isValid */.fn)(e.spatialReference))h=x*(0,distanceOperator.e)(u,m);else{const t=s.x-i.x,e=s.y-i.y;h=x*Math.sqrt(t*t+e*e)*(r||1)}const R=new b({center:u,radius:h,radiusUnit:"meters",spatialReference:e.spatialReference});return{geometry:T(R.rings,R.spatialReference,!1),center:u,edge:m}}function v(e,o,n){const r=o.mapToLocalMultiple(e),a=r[0],l=r[1],s=Math.round(l.x-a.x),i=Math.round(l.y-a.y),c=(0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(n?a.x:a.x+s/2,n?a.y:a.y+i/2),p=n?s:s/2,y=n?i:i/2,u=60,m=[],f=2*Math.PI/u;function x(t){const e=Math.cos(t),o=Math.sin(t);return (0,surfaceCoordinateSystems/* makeSurfacePoint */.E5)(p*e+c.x,y*o+c.y)}for(let t=0;t<u;t++)m.push(x(t*f));m.push(m[0]);const{spatialReference:h,doUnnormalization:M}=o,R=T([m.map((t=>o.localToMap(t))).filter(arrayUtils/* isSome */.Ru)],h,M,!1),j=o.localToMap(x(Math.PI/2)),b=o.localToMap(x(0)),U=o.localToMap(x(-Math.PI/2)),P=o.localToMap(x(Math.PI));return{geometry:R,midpoints:null!=j&&null!=b&&null!=U&&null!=P?{top:d(j,h),right:d(b,h),bottom:d(U,h),left:d(P,h)}:null}}


/***/ }),

/***/ 7388:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E5: () => (/* binding */ w),
/* harmony export */   ZP: () => (/* binding */ F),
/* harmony export */   vz: () => (/* binding */ v)
/* harmony export */ });
/* unused harmony exports SceneViewCoordinateSystem, SurfaceCoordinateSystem, makeMapPoint */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79190);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(50424);
/* harmony import */ var _core_libs_gl_matrix_2_math_quat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(42927);
/* harmony import */ var _core_libs_gl_matrix_2_factories_quatf64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(38911);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(58359);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(97066);
/* harmony import */ var _geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(58331);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function g(t,r,e=null){return null!=e?[t,r,e]:[t,r]}function w(t,r,e=null){return null!=e?{x:t,y:r,z:e}:{x:t,y:r}}class R{constructor(t){this.spatialReference=t}mapToLocalMultiple(r){return r.map((t=>this.mapToLocal(t))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru)}get doUnnormalization(){return!1}}class v extends R{constructor(t,a,o=null){super(a),this._defaultZ=o,this.transform=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.transformInv=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),this.transform=(0,_core_libs_gl_matrix_2_factories_mat2df64_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(t),(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_1__/* .invert */ .B8)(this.transformInv,this.transform)}makeMapPoint(t,r){return g(t,r,this._defaultZ)}mapToLocal(t){return w(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return g(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this._defaultZ)}}class W extends R{constructor(t,r){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.tangentFrameUpWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.tangentFrameRightWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.tangentFrameForwardWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.localFrameRightWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.localFrameUpWS=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)(),this.worldToLocalTransform=(0,_core_libs_gl_matrix_2_factories_quatf64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this.localToWorldTransform=(0,_core_libs_gl_matrix_2_factories_quatf64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=r,this.defaultZ=r.hasZ?r.z:null;const e=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,_geometry_support_Axis_js__WEBPACK_IMPORTED_MODULE_8__/* .Axis */ ._.Z,this.tangentFrameForwardWS);const s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)();(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.g)(s,this.tangentFrameForwardWS,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.e)(e,this.tangentFrameForwardWS)),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.d)(this.localFrameRightWS,e,s),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.n)(this.localFrameRightWS,this.localFrameRightWS),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.h)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,_core_libs_gl_matrix_2_math_quat_js__WEBPACK_IMPORTED_MODULE_3__/* .rotationTo */ .Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,_core_libs_gl_matrix_2_math_quat_js__WEBPACK_IMPORTED_MODULE_3__/* .invert */ .B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,r){return g(t,r,this.defaultZ)}mapToLocal(t){const r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)();this.view.renderCoordsHelper.toRenderCoords(new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({x:t[0],y:t[1],spatialReference:this.spatialReference}),r),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.v)(r,r,this.worldToLocalTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({spatialReference:this.view.spatialReference}));return null!=e?w(e.x/this.scale,e.y/this.scale):null}localToMap(t){const r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)();this.view.renderCoordsHelper.toRenderCoords(new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),r),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_5__.v)(r,r,this.localToWorldTransform);const e=this.view.renderCoordsHelper.fromRenderCoords(r,new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({spatialReference:this.view.spatialReference}));return null!=e?g(e.x,e.y,this.defaultZ):null}}function F(t,r){if("2d"===t.type)return new v(t.state.transform,t.spatialReference,r.length>2?r[2]:null);if("3d"===t.type){const e=r.length>2?new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({x:r[0],y:r[1],z:r[2],spatialReference:t.spatialReference}):new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A({x:r[0],y:r[1],spatialReference:t.spatialReference});return new W(t,e)}return null}


/***/ }),

/***/ 285:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17306);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85251);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(89882);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(60704);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(58359);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(68490);
/* harmony import */ var _geometry_projection_projectPointToVector_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(42609);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(27451);
/* harmony import */ var _symbols_support_defaults_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(26207);
/* harmony import */ var _symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(60973);
/* harmony import */ var _support_utils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(68928);
/* harmony import */ var _support_drapedUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(49313);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let S=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{set graphic(t){this._circleCollisionCache=null,this._originalSymbol=t.symbol,this._set("graphic",t),this.attachSymbolChanged()}get elevationInfo(){const{layer:t}=this.graphic,e=t&&"elevationInfo"in t?t.elevationInfo:null,o=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_14__/* .getGraphicEffectiveElevationMode */ .ky)(this.graphic),i=e?e.offset:0;return new _symbols_support_ElevationInfo_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A({mode:o,offset:i})}set focusedSymbol(t){t!==this._get("focusedSymbol")&&(this._set("focusedSymbol",t),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(t){t!==this._get("grabbing")&&(this._set("grabbing",t),this._updateGraphicSymbol())}set hovering(t){t!==this._get("hovering")&&(this._set("hovering",t),this._updateGraphicSymbol())}set selected(t){t!==this._get("selected")&&(this._set("selected",t),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:t?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(t){super(t),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(t){const e=this.graphic;if(!1===e.visible)return null;const o=e.geometry;if(null==o)return null;const i=this._get("focusedSymbol"),s=null!=i?i:e.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,t,o,s):this._intersectDistance3D(this.view,t,e)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .watch */ .wB)((()=>this.graphic?.symbol),(t=>{null!=t&&t!==this.focusedSymbol&&t!==this._originalSymbol&&(this._originalSymbol=t,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .sync */ .OH)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(t,e,o,i){if(null==(i=i||(0,_symbols_support_defaults_js__WEBPACK_IMPORTED_MODULE_15__/* .getDefaultSymbol2D */ .SF)(o)))return null;const s=1;let n=this._circleCollisionCache;if("point"===o.type&&"cim"===i.type&&"CIMPointSymbol"===i.data.symbol?.type&&i.data.symbol.symbolLayers){const{offsetX:l,offsetY:n,size:a}=(0,_support_utils_js__WEBPACK_IMPORTED_MODULE_18__/* .getSymbolInfo */ .T)(i),c=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .screenPointObjectToArray */ .WA)(e,j),p=a/2,m=t.toScreen(o),u=m.x+l,y=m.y+n;return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_9__/* .squaredDistance */ .hG)(c,[u,y])<p*p?s:null}if("point"!==o.type||"simple-marker"!==i.type)return (0,_support_drapedUtils_js__WEBPACK_IMPORTED_MODULE_17__/* .intersectsDrapedGeometry */ .t)(e,o,t)?s:null;if(null==n||!n.originalPoint.equals(o)){const e=o,s=t.spatialReference;if((0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_12__.canProjectWithoutEngine)(e.spatialReference,s)){const t=(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_12__.project)(e,s);n={originalPoint:e.clone(),mapPoint:t,radiusPx:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .pt2px */ .Lz)(i.size)},this._circleCollisionCache=n}}if(null!=n){const o=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .screenPointObjectToArray */ .WA)(e,j),a=t.toScreen?.(n.mapPoint);if(!a)return null;const c=n.radiusPx,p=a.x+(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .pt2px */ .Lz)(i.xoffset),m=a.y-(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .pt2px */ .Lz)(i.yoffset);return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_9__/* .squaredDistance */ .hG)(o,[p,m])<c*c?s:null}return null}_intersectDistance3D(t,e,o){const i=t.toMap(e,{include:[o]});return i&&(0,_geometry_projection_projectPointToVector_js__WEBPACK_IMPORTED_MODULE_13__/* .projectPointToVector */ .g)(i,C,t.renderSpatialReference)?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_10__.j)(C,t.state.camera.eye):null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0,nonNullable:!0})],S.prototype,"graphic",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"elevationInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0,nonNullable:!0})],S.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({value:null})],S.prototype,"focusedSymbol",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0})],S.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"interactive",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"selectable",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"grabbable",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({value:!1})],S.prototype,"grabbing",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"dragging",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"hovering",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({value:!1})],S.prototype,"selected",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],S.prototype,"cursor",void 0),S=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.views.interactive.GraphicManipulator")],S);const C=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__/* .create */ .vt)(),j=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_19__/* .createScreenPointArray */ .gs)();


/***/ }),

/***/ 37413:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  g: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/interfaces.js
var interfaces = __webpack_require__(27877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
;// ../node_modules/@arcgis/core/views/interactive/ManipulatorCollection.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var a;!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(a||(a={}));class i{constructor(){this._isToolEditable=!0,this._manipulators=new Collection/* default */.A,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t,i=a.WhenToolEditable){this.addMany([t],i)}addMany(t,i=a.WhenToolEditable){for(const a of t){const t={manipulator:a,visibilityPredicate:i,attached:!1};this._manipulators.add(t),this._attached&&this._updateManipulatorAttachment(t)}}remove(t){for(let a=0;a<this._manipulators.length;a++)if(this._manipulators.at(a).manipulator===t){const t=this._manipulators.splice(a,1)[0];this._detachManipulator(t);break}}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this.detach(),this._manipulators.forEach((({manipulator:t})=>t.destroy())),this._manipulators.destroy(),this._resourceContexts=null}on(t,a){return this._manipulators.on(t,(t=>{a(t)}))}forEach(t){for(const a of this._manipulators.items)t(a)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((a=>t.push(a.manipulator))),t}intersect(t,a){let i=null,e=Number.MAX_VALUE;return this._manipulators.forEach((({manipulator:o,attached:s})=>{if(!s||!o.interactive)return;const r=o.intersectionDistance(t,a);null!=r&&r<e&&(e=r,i=o)})),i}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const a=t.manipulator;a.grabbing=!1,a.dragging=!1,a.hovering=!1,a.selected=!1,a.detach&&a.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===a.Always||(this._isToolEditable?t.visibilityPredicate===a.WhenToolEditable:t.visibilityPredicate===a.WhenToolNotEditable)}}

;// ../node_modules/@arcgis/core/views/interactive/InteractiveToolBase.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=class extends Evented/* default */.A.EventedAccessor{constructor(t){super(t),this.manipulators=new i,this.automaticManipulatorSelection=!0,this.hasGrabbedManipulators=!1,this.hasHoveredManipulators=!1,this.firstGrabbedManipulator=null,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[interfaces/* EditableFlag */.PK.MANAGER,!0],[interfaces/* EditableFlag */.PK.USER,!0]]),this._creationFinishedResolver=(0,promiseUtils/* createResolver */.Tw)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(interfaces/* EditableFlag */.PK.USER)}set editable(t){this.setEditableFlag(interfaces/* EditableFlag */.PK.USER,t)}get updating(){return!1}get cursor(){return null}get hasFocusedManipulators(){return this.hasGrabbedManipulators||this.hasHoveredManipulators}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){null!=this.view&&(this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}cancel(){this.emit("cancel")}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===interfaces/* EditableFlag */.PK.USER&&this.notifyChange("editable"),this.onEditableChange(),this.onManipulatorSelectionChanged()}getEditableFlag(t){return this._editableFlags.get(t)??!1}endDrag(){const t=this.view.inputManager.latestPointerLocation;if(!t)return;let e=!1;this.manipulators.forEach((({manipulator:i})=>{i.dragging&&(e=!0,i.events.emit("drag",{action:"end",start:t,screenPoint:t}))})),e&&(this.view.toolViewManager.activeTool=null)}whenCreated(){return this._creationFinishedResolver.promise}onManipulatorSelectionChanged(){}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(interfaces/* EditableFlag */.PK.USER)&&this.getEditableFlag(interfaces/* EditableFlag */.PK.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.initialized)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],n.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"active",null),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!0})],n.prototype,"visible",null),(0,tslib_es6._)([(0,property/* property */.MZ)({value:!0})],n.prototype,"editable",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"manipulators",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"cursor",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"automaticManipulatorSelection",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"hasFocusedManipulators",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"hasGrabbedManipulators",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"hasHoveredManipulators",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"firstGrabbedManipulator",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"created",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],n.prototype,"removeIncompleteOnCancel",void 0),n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.InteractiveToolBase")],n);


/***/ }),

/***/ 75999:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BV: () => (/* binding */ P)
/* harmony export */ });
/* unused harmony exports CoordinateHelper2D, CoordinateHelper3D, CoordinateHelper4D */
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(58359);
/* harmony import */ var _chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2662);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28152);
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97066);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var x;!function(e){e[e.Z=0]="Z",e[e.M=1]="M"}(x||(x={}));class R{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)())}pointToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .fromValues */ .fA)(e.x,e.y))}arrayToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .fromValues */ .fA)(e[0],e[1]))}vectorToArray(e){return[e[0],e[1]]}pointToArray(e){return[e.x,e.y]}vectorToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){if(e)return r.x=e[0],r.y=e[1],r.z=void 0,r.m=void 0,r.spatialReference=this.spatialReference,r}arrayToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){return r.x=e[0],r.y=e[1],r.z=void 0,r.m=void 0,r.spatialReference=this.spatialReference,r}vectorToDehydratedPoint(e,r){if(e)return r??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},r.x=e[0],r.y=e[1],r.z=void 0,r.m=void 0,r.hasZ=!1,r.hasM=!1,r.spatialReference=this.spatialReference,r}lerp(e,t,a,i){return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .lerp */ .Cc)(i,e,t,a)}addDelta(e,r,t){e[0]+=r,e[1]+=t}distance(r,t){return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .distance */ .Io)(r,t)}getZ(e,r=void 0){return r}hasZ(){return!1}getM(e,r=void 0){return r}hasM(){return!1}clone(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .fromArray */ .ci)(e))}copy(e,r){return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .copy */ .C)(r,e)}fromXYZ(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .fromValues */ .fA)(e[0],e[1]))}toXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e[0],e[1],0)}pointToXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e.x,e.y,0)}equals(e,r){return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .aI)(e,r)}_tag(e){return e}}class M{constructor(e,r){this._valueType=e,this.spatialReference=r}createVector(){return this._tag((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)())}pointToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(e.x,e.y,this._valueType===x.Z?e.z:e.m))}arrayToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(e[0],e[1],e[2]||0))}vectorToArray(e){return[e[0],e[1],e[2]]}pointToArray(e){return this._valueType===x.Z?[e.x,e.y,e.z]:[e.x,e.y,e.m]}vectorToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){if(e)return r.x=e[0],r.y=e[1],r.z=this._valueType===x.Z?e[2]:void 0,r.m=this._valueType===x.M?e[2]:void 0,r.spatialReference=this.spatialReference,r}arrayToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){return r.x=e[0],r.y=e[1],r.z=this._valueType===x.Z?e[2]:void 0,r.m=this._valueType===x.M?e[2]:void 0,r.spatialReference=this.spatialReference,r}vectorToDehydratedPoint(e,r){if(!e)return;r??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"};const t=this._valueType===x.Z,a=this._valueType===x.M;return r.x=e[0],r.y=e[1],r.z=t?e[2]:void 0,r.m=a?e[2]:void 0,r.hasZ=t,r.hasM=a,r.spatialReference=this.spatialReference,r}lerp(e,r,t,a){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.m)(a,e,r,t)}addDelta(e,r,t,a){e[0]+=r,e[1]+=t,this._valueType===x.Z&&(e[2]+=a)}distance(r,t){return this._valueType===x.Z?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.j)(r,t):(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .distance */ .Io)(w(r),w(t))}getZ(e,r=void 0){return this._valueType===x.Z?e[2]:r}hasZ(){return this._valueType===x.Z}getM(e,r=void 0){return this._valueType===x.M?e[2]:r}hasM(){return this._valueType===x.M}clone(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromArray */ .ci)(e))}copy(e,r){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(r,e)}fromXYZ(e,r=0,t=0){return this._tag((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(e[0],e[1],this._valueType===x.Z?e.length>2?e[2]:r:t))}toXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e[0],e[1],this._valueType===x.Z?e[2]:0)}pointToXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e.x,e.y,this._valueType===x.Z?e.z??0:0)}equals(e,r){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.G)(e,r)}_tag(e){return e}}class z{constructor(e){this.spatialReference=e}createVector(){return this._tag((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)())}pointToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .fromValues */ .fA)(e.x,e.y,e.z,e.m))}arrayToVector(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .fromValues */ .fA)(e[0],e[1],e[2]||0,e[3]||0))}vectorToArray(e){return[e[0],e[1],e[2],e[3]]}pointToArray(e){return[e.x,e.y,e.z,e.m]}vectorToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){return r.x=e[0],r.y=e[1],r.z=e[2],r.m=e[3],r.spatialReference=this.spatialReference,r}arrayToPoint(e,r=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A){return r.x=e[0],r.y=e[1],r.z=e[2],r.m=e[3],r.spatialReference=this.spatialReference,r}vectorToDehydratedPoint(e,r){if(e)return r??={x:void 0,y:void 0,z:void 0,m:void 0,hasZ:void 0,hasM:void 0,spatialReference:void 0,type:"point"},r.x=e[0],r.y=e[1],r.z=e[2],r.m=e[3],r.hasZ=!0,r.hasM=!0,r.spatialReference=this.spatialReference,r}lerp(e,r,t,a){return (0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__.l)(a,e,r,t)}addDelta(e,r,t,a){e[0]+=r,e[1]+=t,e[2]+=a}distance(e,r){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.j)(V(e),V(r))}getZ(e){return e[2]}hasZ(){return!0}getM(e){return e[3]}hasM(){return!0}clone(e){return this._tag((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .fromArray */ .ci)(e))}copy(e,r){return (0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__.c)(r,e)}fromXYZ(e,r=0,t=0){return this._tag((0,_core_libs_gl_matrix_2_factories_vec4f64_js__WEBPACK_IMPORTED_MODULE_5__/* .fromValues */ .fA)(e[0],e[1],e.length>2?e[2]:r,t))}toXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e[0],e[1],e[2])}pointToXYZ(e,r=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()){return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.i)(r,e.x,e.y,e.z??0)}equals(e,r){return (0,_chunks_vec42_js__WEBPACK_IMPORTED_MODULE_4__.e)(e,r)}_tag(e){return e}}function V(e){return e}function w(e){return e}function P(e,r,t){return e&&r?new z(t):r?new M(x.M,t):e?new M(x.Z,t):new R(t)}


/***/ }),

/***/ 74321:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EX: () => (/* binding */ v),
/* harmony export */   RS: () => (/* binding */ G),
/* harmony export */   Tp: () => (/* binding */ M),
/* harmony export */   Wp: () => (/* binding */ f),
/* harmony export */   Xt: () => (/* binding */ p),
/* harmony export */   an: () => (/* binding */ m),
/* harmony export */   bl: () => (/* binding */ S),
/* harmony export */   dp: () => (/* binding */ g),
/* harmony export */   mc: () => (/* binding */ z),
/* harmony export */   pg: () => (/* binding */ D),
/* harmony export */   rh: () => (/* binding */ w),
/* harmony export */   sO: () => (/* binding */ j),
/* harmony export */   y$: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony exports createDragEventPipelineCallback, resetProperties */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92504);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89882);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(68490);
/* harmony import */ var _geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1114);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(85174);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(27451);
/* harmony import */ var _editGeometry_EditGeometryOperations_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(59147);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(t,n){let e=null,r=null;return a=>{if("cancel"===a.action)return void(null!=r&&(r.execute({action:"cancel"}),e=null,r=null));const o={action:a.action,screenStart:a.start,screenEnd:a.screenPoint};"start"===a.action&&null==e&&(e=new w,r=new w,n(t,e,r,a.pointerType,o)),null!=e&&e.execute(o),"end"===a.action&&null!=e&&(e=null,r=null)}}function p(t,n){return t.events.on("drag",i(t,n))}function m(t,n){const e=[t.x,t.y,t.z??0],r=n,a=[Math.cos(r),Math.sin(r)],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(0===o)return null;a[0]/=o,a[1]/=o;const l=t=>{const n=(t.x-e[0])*a[0]+(t.y-e[1])*a[1];t.x=e[0]+n*a[0],t.y=e[1]+n*a[1]};return t=>(l(t.mapStart),l(t.mapEnd),{...t,axis:a})}function f(t){let n=null;return e=>{if("start"===e.action&&(n=y(t,e.mapStart.spatialReference)),null==n)return null;const r=e.mapEnd.x-e.mapStart.x,a=e.mapEnd.y-e.mapStart.y,o=(e.mapEnd.z??0)-(e.mapStart.z??0);return n.move(r,a,o,e.action),{...e,translationX:r,translationY:a,translationZ:o}}}function d(t,n){return null==t?null:t.spatialReference.equals(n)?t.clone():(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_4__.project)(t,n)}function y(t,n){const e=t.operations;if(!e)return null;const r=e.data.geometry,l=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_6__/* .hydratedSpatialReference */ .RS)(n);if(r.spatialReference.equals(l))return x(t,e,(()=>{}));if("mesh"!==r.type){const n=d(r,l);if(null==n)return null;const o=r.spatialReference;return x(t,_editGeometry_EditGeometryOperations_js__WEBPACK_IMPORTED_MODULE_8__/* .EditGeometryOperations */ .p.fromGeometry(n,e.viewingMode),(()=>{const t=(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_4__.project)(r,o);e.trySetGeometry(t)}))}if((0,_geometry_support_meshVertexSpaceUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isMeshWithRelativeVertexSpace */ .CK)(r)){const n=d(r.origin,l);if(!n)return null;const o=r.spatialReference,c=_editGeometry_EditGeometryOperations_js__WEBPACK_IMPORTED_MODULE_8__/* .EditGeometryOperations */ .p.fromGeometry(n,e.viewingMode);return x(t,e,(()=>{const t=(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_4__.project)(c.data.geometry,o),n=t.x-r.origin.x,l=t.y-r.origin.y,s=(t.z??0)-(r.origin.z??0);e.move(n,l,s)}))}return null}function x(t,n,e){let r=0,a=0,o=0;return{move:(l,c,s,u)=>{"start"===u&&(r=0,a=0,o=0);const i=l-r,p=c-a,m=s-o;n.move(i,p,m),r+=i,a+=p,o+=m,e(),"end"===u&&t.endInteraction?.()}}}function E(t,n=null,e){let r=null;const o=null==n||t.spatialReference?.equals(n)?t=>t:t=>null!=t?(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_4__.project)(t,n):t,l={exclude:[],...e};return n=>{if("start"===n.action&&(r=o(t.toMap(n.screenStart,l))),null==r)return null;const e=o(t.toMap(n.screenEnd,l));return null!=e?{...n,mapStart:r,mapEnd:e}:null}}function S(n){const e=n.map((t=>f(t))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru);return t=>{const n=t.mapEnd.x-t.mapStart.x,r=t.mapEnd.y-t.mapStart.y,a=t.mapEnd.z-t.mapStart.z;return e.forEach((n=>n(t))),{...t,translationX:n,translationY:r,translationZ:a}}}function h(t,e){const r=new Map;for(const a of e)r.set(a,n(t[a]));return n=>(r.forEach(((n,e)=>{t[e]=n})),n)}function g(t){const n=t.operations?.createResetState();return t=>(n?.remove(),t)}function z(t){const n=t.map((t=>g(t))).filter((t=>null!=t));return t=>(n.forEach((n=>n(t))),t)}function v(){let t=0,n=0,e=0;return r=>{"start"===r.action&&(t=r.mapStart.x,n=r.mapStart.y,e=r.mapStart.z);const a=r.mapEnd.x-t,o=r.mapEnd.y-n,l=r.mapEnd.z-e;return t=r.mapEnd.x,n=r.mapEnd.y,e=r.mapEnd.z,{...r,mapDeltaX:a,mapDeltaY:o,mapDeltaZ:l,mapDeltaSpatialReference:r.mapStart.spatialReference}}}function j(){let t=0,n=0;return e=>{"start"===e.action&&(t=e.screenStart.x,n=e.screenStart.y);const r=e.screenEnd.x-t,a=e.screenEnd.y-n;return t=e.screenEnd.x,n=e.screenEnd.y,{...e,screenDeltaX:r,screenDeltaY:a}}}function M(t,n){let a=null,o=0,l=0;return c=>{if("start"===c.action&&(a=t.toScreen?.(n),null!=a&&(a.x<0||a.x>t.width||a.y<0||a.y>t.height?a=null:(o=c.screenStart.x-a.x,l=c.screenStart.y-a.y))),null==a)return null;const s=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .qE)(c.screenEnd.x-o,0,t.width),u=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .qE)(c.screenEnd.y-l,0,t.height),i=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .createScreenPoint */ .tc)(s,u);return c.screenStart=a,c.screenEnd=i,c}}const R=()=>{};class w{constructor(){this.execute=R}next(t,n=new w){return null!=t&&(this.execute=e=>{const r=t(e);null!=r&&n.execute(r)}),n}}function D(t,n,e=[]){if("2d"===t.type)return t=>t;let r=null;return a=>{"start"===a.action&&(r=t.toMap(a.screenStart,{exclude:e}),null!=r&&(r.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getZForElevationMode */ .id)(r,t,n)));const o=t.toMap(a.screenEnd,{exclude:e});null!=o&&(o.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getZForElevationMode */ .id)(o,t,n));const l=null!=r&&null!=o?{sceneStart:r,sceneEnd:o}:null;return{...a,scenePoints:l}}}function U(t,n,e){const r=n.elevationProvider.getElevation(t.x,t.y,t.z??0,t.spatialReference,"scene")??0,a=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_6__/* .clonePoint */ .EL)(t);return a.z=r,a.hasZ=!0,a.z=(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getZForElevationMode */ .id)(a,n,e),a}function G(t,n){if("2d"===t.type)return t=>t;let e=null;return r=>{"start"===r.action&&(e=U(r.mapStart,t,n));const a=U(r.mapEnd,t,n),o=null!=e&&null!=a?{sceneStart:e,sceneEnd:a}:null;return{...r,scenePoints:o}}}


/***/ }),

/***/ 4057:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  uA: () => (/* binding */ a),
  oH: () => (/* binding */ l),
  ZE: () => (/* binding */ EditGeometry_p),
  Li: () => (/* binding */ h),
  oF: () => (/* binding */ f)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polygon.js
var Polygon = __webpack_require__(62802);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polyline.js
var Polyline = __webpack_require__(42238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/coordinateHelper.js
var coordinateHelper = __webpack_require__(75999);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/ViewingMode.js
var ViewingMode = __webpack_require__(10714);
;// ../node_modules/@arcgis/core/views/interactive/editGeometry/unnormalizationHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(o,r){if(!r.supported)return;let e=1/0,p=-1/0;const n=r.upperBoundX-r.lowerBoundX;o.forEach((o=>{let u=o.pos[0];for(;u<r.lowerBoundX;)u+=n;for(;u>r.upperBoundX;)u-=n;e=Math.min(e,u),p=Math.max(p,u),o.pos[0]=u}));const u=p-e;n-u<u&&o.forEach((o=>{o.pos[0]<0&&(o.pos[0]+=n)}))}function p(e,p){const n=(0,spatialReferenceUtils/* getInfo */.Vp)(e);return p===ViewingMode/* ViewingMode */.RT.Global&&n?{supported:!0,lowerBoundX:n.valid[0],upperBoundX:n.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h{constructor(e){this.component=e,this.leftEdge=null,this.rightEdge=null,this.type="vertex",this.index=null}get pos(){return this._pos}set pos(e){this._pos=e,this.component.unnormalizeVertexPositions()}}class l{constructor(e,t,s){this.component=e,this.leftVertex=t,this.rightVertex=s,this.type="edge",t.rightEdge=this,s.leftEdge=this}}class a{constructor(e,t){this._spatialReference=e,this._viewingMode=t,this.vertices=[],this.edges=[],this.index=null}unnormalizeVertexPositions(){this.vertices.length<=1||e(this.vertices,p(this._spatialReference,this._viewingMode))}updateVertexIndex(e,t){if(0===this.vertices.length)return;const s=this.vertices[0];let i=null,r=e,o=t;do{i=r,i.index=o++,r=i.rightEdge?i.rightEdge.rightVertex:null}while(null!=r&&r!==s);i.leftEdge&&i!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(i),this.vertices.length-1)}getFirstVertex(){return this.vertices.at(0)}getLastVertex(){return this.vertices.at(-1)}isClosed(){return this.vertices.length>2&&null!==this.vertices[0].leftEdge}swapVertices(e,t){const s=this.vertices[e];this.vertices[e]=this.vertices[t],this.vertices[t]=s}iterateVertices(e){if(0===this.vertices.length)return;const t=this.vertices[0];let s=t;do{e(s,s.index),s=null!=s.rightEdge?s.rightEdge.rightVertex:null}while(s!==t&&null!=s)}}class EditGeometry_p extends Evented/* default */.A{constructor(e,t){super(),this.type=e,this.coordinateHelper=t,this._geometry=null,this._dirty=!0,this.components=[]}get geometry(){if(this._dirty){switch(this.type){case"point":this._geometry=this._toPoint();break;case"polyline":this._geometry=this._toPolyline();break;case"polygon":this._geometry=this._toPolygon();break;case"mesh":break;default:(0,compilerUtils/* neverReached */.Xb)(this.type)}this._dirty=!1}return this._geometry}get spatialReference(){return this.coordinateHelper.spatialReference}get allVertices(){return Array.from(this.iterateVertices())}*iterateVertices(){for(const e of this.components)for(const t of e.vertices)yield t}notifyChanges(e){this._dirty=!0,this.emit("change",e)}_toPoint(){return 0===this.components.length||0===this.components[0].vertices.length?null:this.coordinateHelper.vectorToPoint(this.components[0].vertices[0].pos)}_toPolyline(){const e=[],t=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const i=[];let r=s.vertices.find((e=>null==e.leftEdge));const o=r;do{i.push(t(r.pos)),r=r.rightEdge?r.rightEdge.rightVertex:null}while(r&&r!==o);e.push(i)}return new Polyline/* default */.A({paths:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}_toPolygon(){const e=[],t=this.coordinateHelper.vectorToArray;for(const s of this.components){if(s.vertices.length<1)continue;const i=[],r=s.vertices[0];let o=r;const n=o;do{i.push(t(o.pos)),o=null!=o.rightEdge?o.rightEdge.rightVertex:null}while(o&&o!==n);s.isClosed()&&i.push(t(r.pos)),e.push(i)}return new Polygon/* default */.A({rings:e,spatialReference:this.spatialReference,hasZ:this.coordinateHelper.hasZ(),hasM:this.coordinateHelper.hasM()})}static fromGeometry(e,t){const s=e.spatialReference,i=(0,coordinateHelper/* createCoordinateHelper */.BV)(e.hasZ,e.hasM,s),r=new EditGeometry_p(e.type,i);switch(e.type){case"polygon":g(r,e,t);break;case"polyline":d(r,e,t);break;case"point":u(r,e,t);break;case"mesh":u(r,e.origin,t),r._geometry=e,r._dirty=!1}return r}}function g(t,s,i){const r=s.spatialReference,o=t.coordinateHelper,n=s.rings;for(let c=0;c<n.length;++c){const s=n[c],p=new a(r,i);p.index=c;const g=s.length>2&&(0,arrayUtils/* equals */.aI)(s[0],s[s.length-1]),d=g?s.length-1:s.length;for(let e=0;e<d;++e){const t=o.arrayToVector(s[e]),i=new h(p);p.vertices.push(i),i.pos=t,i.index=e}const u=p.vertices.length-1;for(let e=0;e<u;++e){const t=p.vertices[e],s=p.vertices[e+1],i=new l(p,t,s);p.edges.push(i)}if(g){const e=new l(p,p.vertices[p.vertices.length-1],p.vertices[0]);p.edges.push(e)}t.components.push(p)}}function d(e,t,s){const i=t.spatialReference,r=e.coordinateHelper,o=t.paths;for(let n=0;n<o.length;++n){const t=o[n],c=new a(i,s);c.index=n;const p=t.length;for(let e=0;e<p;++e){const s=r.arrayToVector(t[e]),i=new h(c);c.vertices.push(i),i.pos=s,i.index=e}const g=c.vertices.length-1;for(let e=0;e<g;++e){const t=c.vertices[e],s=c.vertices[e+1],i=new l(c,t,s);c.edges.push(i)}e.components.push(c)}}function u(e,t,s){const i=t.spatialReference,r=e.coordinateHelper,o=new a(i,s);o.index=0;const n=new h(o);n.index=0,n.pos=r.pointToVector(t),o.vertices.push(n),e.components.push(o)}function f(e){return"mesh"===e.type}


/***/ }),

/***/ 59147:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  p: () => (/* binding */ E)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometry.js + 1 modules
var EditGeometry = __webpack_require__(4057);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/interfaces.js
var interfaces = __webpack_require__(35880);
;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/AppendVertex.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(e,t,i){this._editGeometry=e,this._component=t,this._pos=i,this._addedVertex=null,this._originalEdge=null,this._left=null,this._right=null}apply(){let i="redo";null==this._addedVertex&&(i="apply",this._addedVertex=new EditGeometry/* Vertex */.Li(this._component));const s=this._component.getLastVertex();if(null==s)this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,this._addedVertex.index=0;else{let e=null;s.rightEdge&&(this._originalEdge=s.rightEdge,e=this._originalEdge.rightVertex,this._component.edges.splice(this._component.edges.indexOf(this._originalEdge),1)),this._component.vertices.push(this._addedVertex),this._addedVertex.pos=this._pos,null==this._left&&(this._left=new EditGeometry/* Edge */.oH(this._component,s,this._addedVertex)),this._component.edges.push(this._left),s.rightEdge=this._left,null!=this._originalEdge&&null!=e&&(null==this._right&&(this._right=new EditGeometry/* Edge */.oH(this._component,this._addedVertex,e)),this._component.edges.push(this._right),e.leftEdge=this._right),this._component.updateVertexIndex(this._addedVertex,s.index+1)}this._editGeometry.notifyChanges({operation:i,addedVertices:[this._addedVertex]})}undo(){null!=this._addedVertex&&(this._component.vertices.splice(this._component.vertices.indexOf(this._addedVertex),1),null!=this._left&&(this._component.edges.splice(this._component.edges.indexOf(this._left),1),this._left.leftVertex.rightEdge=null),null!=this._right&&(this._component.edges.splice(this._component.edges.indexOf(this._right),1),this._right.rightVertex.leftEdge=null),null!=this._originalEdge&&(this._component.edges.push(this._originalEdge),this._originalEdge.leftVertex.rightEdge=this._originalEdge,this._originalEdge.rightVertex.leftEdge=this._originalEdge),null!=this._left?this._component.updateVertexIndex(this._left.leftVertex,this._left.leftVertex.index):this._component.updateVertexIndex(this._addedVertex,0),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this._addedVertex]}))}accumulate(){return!1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/UpdateVertices.js
var UpdateVertices = __webpack_require__(63387);
;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/RemoveVertices.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class RemoveVertices_t{constructor(e,t,r=0){this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=r,this.removedVertices=null}apply(){let e="redo";if(null==this.removedVertices){const t=this.removedVertices=[];this._vertices.forEach((e=>{const r=this._removeVertex(e);null!=r&&t.push(r)})),e="apply"}else this.removedVertices.forEach((e=>{this._removeVertex(e.removedVertex)}));this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})}undo(){this.removedVertices?.forEach((e=>{this._undoRemoveVertex(e)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})}accumulate(){return!1}_removeVertex(t){const r=t.component;if(r.vertices.length<=this._minNumberOfVertices)return null;const i={removedVertex:t,createdEdge:null},s=t.leftEdge,d=t.rightEdge;return r.vertices.splice(r.vertices.indexOf(t),1),s&&(r.edges.splice(r.edges.indexOf(s),1),s.leftVertex.rightEdge=null),d&&(r.edges.splice(r.edges.indexOf(d),1),d.rightVertex.leftEdge=null),0===t.index&&d&&this._vertices.length>0&&r.swapVertices(r.vertices.indexOf(d.rightVertex),0),s&&d&&(i.createdEdge=new EditGeometry/* Edge */.oH(r,s.leftVertex,d.rightVertex),r.edges.push(i.createdEdge)),d&&r.updateVertexIndex(d.rightVertex,d.rightVertex.index-1),i}_undoRemoveVertex(e){const t=e.removedVertex,r=e.removedVertex.component,i=t.leftEdge,s=t.rightEdge;e.createdEdge&&r.edges.splice(r.edges.indexOf(e.createdEdge),1),r.vertices.push(t),i&&(r.edges.push(i),i.leftVertex.rightEdge=i),s&&(r.edges.push(s),s.rightVertex.leftEdge=s),r.updateVertexIndex(t,t.index)}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/SplitEdge.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SplitEdge_i{constructor(e,t,i){this._editGeometry=e,this._edge=t,this._t=i,this.createdVertex=null,this._left=null,this._right=null}apply(){let i="redo";const r=this._edge,s=r.component,d=r.leftVertex,h=r.rightVertex;s.edges.splice(s.edges.indexOf(r),1),null==this.createdVertex&&(i="apply",this.createdVertex=new EditGeometry/* Vertex */.Li(r.component)),s.vertices.push(this.createdVertex),this.createdVertex.pos=this._editGeometry.coordinateHelper.lerp(r.leftVertex.pos,r.rightVertex.pos,this._t,this._editGeometry.coordinateHelper.createVector()),null==this._left&&(this._left=new EditGeometry/* Edge */.oH(s,d,this.createdVertex)),this._left.leftVertex.leftEdge?s.edges.push(this._left):s.edges.unshift(this._left),d.rightEdge=this._left,null==this._right&&(this._right=new EditGeometry/* Edge */.oH(s,this.createdVertex,h)),s.edges.push(this._right),h.leftEdge=this._right,s.updateVertexIndex(this.createdVertex,d.index+1),this._editGeometry.notifyChanges({operation:i,addedVertices:[this.createdVertex]})}undo(){if(null==this.createdVertex||null==this._left||null==this._right)return null;const e=this._edge,t=e.component,i=this.createdVertex.leftEdge,r=this.createdVertex.rightEdge,s=i?.leftVertex,d=r?.rightVertex;t.vertices.splice(t.vertices.indexOf(this.createdVertex),1),t.edges.splice(t.edges.indexOf(this._left),1),t.edges.splice(t.edges.indexOf(this._right),1),this._edge.leftVertex.leftEdge?t.edges.push(this._edge):t.edges.unshift(this._edge),s&&(s.rightEdge=e),d&&(d.leftEdge=e),s&&t.updateVertexIndex(s,s.index),this._editGeometry.notifyChanges({operation:"undo",removedVertices:[this.createdVertex]})}accumulate(){return!1}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/SetVertexPosition.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SetVertexPosition_t{constructor(t,e,i){this._editGeometry=t,this._vertex=e,this._pos=i}apply(){const t=null==this._originalPosition;t&&(this._originalPosition=this._vertex.pos),this._apply(t?"apply":"redo")}undo(){this._vertex.pos=this._originalPosition,this._editGeometry.notifyChanges({operation:"undo",updatedVertices:[this._vertex]})}accumulate(e){return e instanceof SetVertexPosition_t&&e._vertex===this._vertex&&(this._pos=e._pos,this._apply("apply"),!0)}_apply(t){this._vertex.pos=this._pos,this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:t,updatedVertices:[this._vertex]})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/CloseComponent.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{constructor(e,t){this._editGeometry=e,this._component=t,this._createdEdge=null}apply(){let e="redo";if(null==this._createdEdge){e="apply";const r=this._component.getFirstVertex(),i=this._component.getLastVertex();if(this._component.isClosed()||this._component.vertices.length<3||null==r||null==i)return;this._createdEdge=new EditGeometry/* Edge */.oH(this._component,i,r)}this._createdEdge.leftVertex.rightEdge=this._createdEdge,this._createdEdge.rightVertex.leftEdge=this._createdEdge,this._component.edges.push(this._createdEdge),this._editGeometry.notifyChanges({operation:e})}undo(){null!=this._createdEdge&&((0,arrayUtils/* remove */.TF)(this._component.edges,this._createdEdge),this._createdEdge.leftVertex.rightEdge=null,this._createdEdge.rightVertex.leftEdge=null,this._editGeometry.notifyChanges({operation:"undo"}))}accumulate(){return!1}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/MoveMesh.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MoveMesh_t{constructor(t,e,i,s){this._editGeometry=t,this.dx=e,this.dy=i,this.dz=s,this._firstTime=!0}apply(){const t=this._firstTime?"apply":"redo";this._firstTime=!1,this._apply(t,this.dx,this.dy,this.dz)}undo(){this._apply("undo",-this.dx,-this.dy,-this.dz)}accumulate(e){const i=this._editGeometry.geometry;return e instanceof MoveMesh_t&&e._editGeometry.geometry===i&&(this._apply("apply",e.dx,e.dy,e.dz),this.dx+=e.dx,this.dy+=e.dy,this.dz+=e.dz,!0)}_apply(t,e,i,s){const o=this._editGeometry.geometry;o.offset(e,i,s);const d=this._editGeometry.components[0].getFirstVertex();if(!d)return;const r=this._editGeometry.coordinateHelper;d.pos=r.pointToVector(o.origin),this._editGeometry.notifyChanges({operation:t,updatedVertices:[d]})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/MoveVertex.js
var MoveVertex = __webpack_require__(61434);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/OffsetEdgeVertex.js
var OffsetEdgeVertex = __webpack_require__(12677);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/RotateVertex.js
var RotateVertex = __webpack_require__(36504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/ScaleVertex.js
var ScaleVertex = __webpack_require__(37673);
;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/SetAllVertexPositions.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SetAllVertexPositions_i{constructor(i,t){this._editGeometry=i,this._newPositions=t}apply(){const i=null==this._originalPositions?"apply":"redo";if(!this._originalPositions){const i=this._editGeometry.coordinateHelper;this._originalPositions=this._editGeometry.allVertices.map((t=>i.clone(t.pos)))}this._apply(i,this._newPositions)}undo(){this._originalPositions&&this._apply("undo",this._originalPositions)}accumulate(t){return t instanceof SetAllVertexPositions_i&&(this._newPositions=t._newPositions,this._apply("apply",this._newPositions),!0)}_apply(i,t){const o=this._editGeometry.coordinateHelper,s=this._editGeometry.allVertices;for(let e=0;e<s.length;e++)o.copy(t[e],s[e].pos);this._editGeometry.components.forEach((i=>i.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:i,updatedVertices:s})}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/operations/UndoGroup.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var t;const s=Symbol();class o{static{t=s}constructor(s){this._operations=[],this._closed=!1,this[t]=!0,s&&(this._operations=s,this._closed=!0)}close(){this._closed=!0}apply(){for(const t of this._operations)t.apply()}undo(){for(let t=this._operations.length-1;t>=0;t--)this._operations[t].undo()}accumulate(t){if(this._closed)return!1;const s=this._operations.length?this._operations[this._operations.length-1]:null;return s&&s.accumulate(t)||(this._operations.push(t),t.apply()),!0}}

;// ../node_modules/@arcgis/core/views/interactive/editGeometry/EditGeometryOperations.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class E extends Evented/* default */.A{constructor(t,e){super(),this.data=t,this.viewingMode=e,this._undoStack=[],this._redoStack=[],this._listener=this.data.on("change",(t=>{t.addedVertices&&this.emit("vertex-add",{type:"vertex-add",vertices:t.addedVertices,operation:t.operation}),t.removedVertices&&this.emit("vertex-remove",{type:"vertex-remove",vertices:t.removedVertices,operation:t.operation}),t.updatedVertices&&this.emit("vertex-update",{type:"vertex-update",vertices:t.updatedVertices,operation:t.operation})}))}destroy(){this._listener.remove()}splitEdge(t,e){return this._apply(new SplitEdge_i(this.data,t,e))}updateVertices(t,e,r=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return this._apply(new UpdateVertices/* UpdateVertices */.D(this.data,t,e),r)}move(t,e,r,s=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return (0,EditGeometry/* isMeshEditGeometry */.oF)(this.data)?this._apply(new MoveMesh_t(this.data,t,e,r),s):this.moveVertices(this.data.allVertices,t,e,r,s)}moveVertices(t,e,r,s,o=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return (0,EditGeometry/* isMeshEditGeometry */.oF)(this.data)?this._apply(new MoveMesh_t(this.data,e,r,s),o):this.updateVertices(t,new MoveVertex/* MoveVertex */.a(this.data.coordinateHelper,e,r,s),o)}scale(t,e,r,s,i=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS,o=UpdateVertices/* AccumulationType */.K.CUMULATIVE){return this.scaleVertices(this.data.allVertices,t,e,r,s,i,o)}scaleVertices(t,e,r,s,i,o=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS,n=UpdateVertices/* AccumulationType */.K.CUMULATIVE){return this.updateVertices(t,new ScaleVertex/* ScaleVertex */.j(e,r,s,i,n),o)}rotate(t,e,r=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS,s=UpdateVertices/* AccumulationType */.K.CUMULATIVE){return this.rotateVertices(this.data.allVertices,t,e,r,s)}rotateVertices(t,e,r,s=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS,i=UpdateVertices/* AccumulationType */.K.CUMULATIVE){return this.updateVertices(t,new RotateVertex/* RotateVertex */.m(e,r,i),s)}removeVertices(t){return this._apply(new RemoveVertices_t(this.data,t,this._minNumVerticesPerType))}appendVertex(t){return 0===this.data.components.length?null:this._apply(new i(this.data,this.data.components[0],t))}setVertexPosition(t,e){return this._apply(new SetVertexPosition_t(this.data,t,e))}offsetEdge(t,e,r,s=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return this.updateVertices([e.leftVertex,e.rightVertex],new OffsetEdgeVertex/* OffsetEdgeVertex */.L(this.data.coordinateHelper,t,e,r),s)}trySetGeometry(t,e=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){const{data:r}=this,{coordinateHelper:n}=r;if(r.type!==t.type||!r.spatialReference.equals(t.spatialReference)||n.hasZ()!==t.hasZ||n.hasM()!==t.hasM||!(0,coordsUtils/* hasCompatibleTopology */.It)(r.geometry,t)||(0,EditGeometry/* isMeshEditGeometry */.oF)(r))return;const p=Array.from(EditGeometry/* EditGeometry */.ZE.fromGeometry(t,this.viewingMode).iterateVertices(),(t=>t.pos));return this.setVertexPositions(p,e)}setVertexPositions(t,e=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return this._apply(new SetAllVertexPositions_i(this.data,t),e)}createResetState(){if((0,EditGeometry/* isMeshEditGeometry */.oF)(this.data))return this._createResetStateMesh();const t=this.data.geometry.clone();return (0,handleUtils/* makeHandle */.hA)((()=>this.trySetGeometry(t)))}closeComponent(t){return this.data.components.includes(t)?this._apply(new r(this.data,t)):null}canRemoveVertex(t){return t.vertices.length>this._minNumVerticesPerType}createUndoGroup(){const t=new o;return this._apply(t),(0,handleUtils/* makeHandle */.hA)((()=>t.close()))}undo(){if(this._undoStack.length>0){const t=this._undoStack.pop();return t.undo(),this._redoStack.push(t),t}return null}redo(){if(this._redoStack.length>0){const t=this._redoStack.pop();return t.apply(),this._undoStack.push(t),t}return null}get canUndo(){return this._undoStack.length>0}get canRedo(){return this._redoStack.length>0}get lastOperation(){return this._undoStack.length>0?this._undoStack[this._undoStack.length-1]:null}get _minNumVerticesPerType(){switch(this.data.type){case"point":return 1;case"polyline":return 2;case"polygon":return 3;default:return 0}}_apply(t,e=interfaces/* AccumulationBehavior */.Y.ACCUMULATE_STEPS){return e!==interfaces/* AccumulationBehavior */.Y.NEW_STEP&&null!=this.lastOperation&&this.lastOperation.accumulate(t)||(t.apply(),this._undoStack.push(t),this._redoStack=[]),t}_createResetStateMesh(){if(!(0,EditGeometry/* isMeshEditGeometry */.oF)(this.data))return (0,handleUtils/* makeHandle */.hA)();const t=this.data.geometry,{vertexSpace:s}=t;if(s.origin){const i=(0,vec3f64/* clone */.o8)(s.origin);return (0,handleUtils/* makeHandle */.hA)((()=>{t.vertexSpace.origin=i}))}const o=t.vertexAttributes.clonePositional();return (0,handleUtils/* makeHandle */.hA)((()=>{t.vertexAttributes=o,t.vertexAttributesChanged()}))}static fromGeometry(t,e){return new E(EditGeometry/* EditGeometry */.ZE.fromGeometry(t,e),e)}}


/***/ }),

/***/ 35880:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ E)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var E;!function(E){E[E.NEW_STEP=0]="NEW_STEP",E[E.ACCUMULATE_STEPS=1]="ACCUMULATE_STEPS"}(E||(E={}));


/***/ }),

/***/ 61434:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t,s,d,h){this._helper=t,this.dx=s,this.dy=d,this.dz=h}_move(t,s,d,h){this._helper.addDelta(t.pos,s,d,h)}apply(t){this._move(t,this.dx,this.dy,this.dz)}undo(t){this._move(t,-this.dx,-this.dy,-this.dz)}canAccumulate(s){return s instanceof t}accumulate(t,s){this._move(t,s.dx,s.dy,s.dz)}accumulateParams(t){this.dx+=t.dx,this.dy+=t.dy,this.dz+=t.dz}}


/***/ }),

/***/ 12677:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ z),
/* harmony export */   L: () => (/* binding */ P)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60704);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59646);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(58359);
/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38774);
/* harmony import */ var _geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(16597);
/* harmony import */ var _support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(41561);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class P{get plane(){return this._plane}get requiresSplitEdgeLeft(){return!this._left.isOriginalDirection}get requiresSplitEdgeRight(){return!this._right.isOriginalDirection}get edgeDirection(){return this._edgeDirection}constructor(t,i,e,s=0,n=j.IMMEDIATE){this._helper=t,this._planeType=i,this._edge=e,this.distance=s,this._plane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),this._offsetPlane=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)(),this._minDistance=-1/0,this._maxDistance=1/0,this._selectedArrow=1,n===j.IMMEDIATE&&this._initialize()}_initialize(){this._initializeNeighbors(),this._initializePlane(),this._initializeDistanceConstraints()}_initializeNeighbors(){const t=this._toXYZ(this._edge.leftVertex.pos),i=this._toXYZ(this._edge.leftVertex.leftEdge?.leftVertex?.pos),e=this._toXYZ(this._edge.rightVertex.pos),s=this._toXYZ(this._edge.rightVertex.rightEdge?.rightVertex?.pos);this._edgeDirection=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.E)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t,e),i?(this._left=this._computeNeighbor(t,i,this._edgeDirection),this._right=this._computeNeighbor(e,s,this._edgeDirection,this._left)):(this._right=this._computeNeighbor(e,s,this._edgeDirection),this._left=this._computeNeighbor(t,i,this._edgeDirection,this._right))}_toXYZ(t){return null!=t?this._helper.toXYZ(t):null}_pointToXYZ(t){return this._toXYZ(this._helper.pointToVector(t))}_computeNeighbor(t,i,e,s){const n=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)();if(i){(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.E)(n,t,i);const s=!this._passesBisectingAngleThreshold(n,e);return{start:t,end:i,direction:s?this._bisectVectorsPerpendicular(e,n):n,isOriginalDirection:!s}}return this._helper.hasZ()?s&&((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)(n,e,s.direction),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)(n,n,e),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(n,n),Math.sign(n[1])!==Math.sign(e[0])&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.g)(n,n,-1)):(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.i)(n,-e[1],e[0],0),{start:t,end:i,direction:n,isOriginalDirection:!0}}_passesBisectingAngleThreshold(t,i){const e=Math.abs((0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_6__/* .angle */ .g7)(i,t));return e>=y&&e<=Math.PI-y}_bisectVectorsPerpendicular(t,i){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.e)(t,i)<0?t:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.u)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t),s=Math.abs((0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.e)(e,i));if(!(s<A||s>1-A))return this._bisectDirection(e,i);const n=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),e,[0,0,1]);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(n,n)}_bisectDirection(t,i){const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t,i);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(e,e)}_initializePlane(){const t=this._computeNormalDirection(this._left),i=this._computeNormalDirection(this._right);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.e)(t,i)<0&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.u)(i,i),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .fromPositionAndNormal */ .O_)(this._left.start,this._bisectDirection(t,i),this._plane)}_computeNormalDirection(t){const i=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t.direction,this._edgeDirection);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(i,i);const e=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.h)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this._edgeDirection,i);return this._planeType===z.XY&&(e[2]=0),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.n)(e,e)}_initializeDistanceConstraints(){null==this._left.end||this.requiresSplitEdgeLeft||this._updateDistanceConstraint((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .signedDistance */ .mN)(this._plane,this._left.end)),null==this._right.end||this.requiresSplitEdgeRight||this._updateDistanceConstraint((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .signedDistance */ .mN)(this._plane,this._right.end)),this._updateIntersectDistanceConstraint(this._plane)}_updateDistanceConstraint(t){t<=0&&(this._minDistance=Math.max(this._minDistance,t)),t>=0&&(this._maxDistance=Math.min(this._maxDistance,t))}_updateIntersectDistanceConstraint(t){const i=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .getNormal */ .Qj)(t),h=this._edgeDirection,o=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this._left.start,this._left.direction),a=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this._right.start,this._right.direction),_=this._pointInBasis2D((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),i,h,this._left.start),l=this._pointInBasis2D((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),i,h,o),p=this._pointInBasis2D((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),i,h,this._right.start),d=this._pointInBasis2D((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),i,h,a),[u]=(0,_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .intersectLineAndRay */ .jI)({start:l,end:_,type:_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .LineType */ .Vv.LINE},{start:d,end:p,type:_support_geometry2dUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .LineType */ .Vv.LINE});if(!u)return;const m=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .subtract */ .Re)((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),_,l);(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .normalize */ .S8)(m,m);const D=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .subtract */ .Re)((0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)(),u,l),E=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .dot */ .Om)(m,D),I=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),o,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.g)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this._left.direction,-E)),M=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .signedDistance */ .mN)(t,I);this._updateDistanceConstraint(M)}_pointInBasis2D(t,i,e,s){return t[0]=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_6__/* .projectPointSignedLength */ .gr)(i,s),t[1]=(0,_geometry_support_vector_js__WEBPACK_IMPORTED_MODULE_6__/* .projectPointSignedLength */ .gr)(e,s),t}_offset(t,i){Number.isFinite(this._minDistance)&&(i=Math.max(this._minDistance,i)),Number.isFinite(this._maxDistance)&&(i=Math.min(this._maxDistance,i)),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .copy */ .C)(this._offsetPlane,this._plane),this._offsetPlane[3]-=i;const e=(t,i,e)=>null!=i&&(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .intersectLine */ .U5)(this._offsetPlane,t,(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.f)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t,i),e),s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)();(t===this._edge.leftVertex?e(this._left.start,this._left.direction,s):e(this._right.start,this._right.direction,s))&&this._helper.copy(this._helper.fromXYZ(s,void 0,this._helper.getM(t.pos)),t.pos)}selectArrowFromStartPoint(t){this._selectedArrow=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .isPointInside */ .Tj)(this.plane,this._pointToXYZ(t))?1:-1}get selectedArrow(){return this._selectedArrow}signedDistanceToPoint(t){return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .signedDistance */ .mN)(this.plane,this._pointToXYZ(t))}clampedStartAndEnd(i){const e=this._helper.toXYZ(this._helper.pointToVector(i)),s=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .projectPoint */ ._I)(this._plane,e,(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)()),n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .signedDistance */ .mN)(this._plane,e),r=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(n,this._minDistance,this._maxDistance);return (0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.m)(e,s,e,r/n),{start:s,end:e}}apply(t){this._offset(t,this.distance)}undo(t){this._offset(t,0)}canAccumulate(t){return t instanceof P&&this._edge.leftVertex.index===t._edge.leftVertex.index&&this._edge.rightVertex.index===t._edge.rightVertex.index&&this._edge.component===t._edge.component&&this._maybeEqualsVec3(this._left.direction,t._left.direction)&&this._maybeEqualsVec3(this._right.direction,t._right.direction)&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.G)((0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .getNormal */ .Qj)(this._plane),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .getNormal */ .Qj)(t._plane))}accumulate(t,i){const e=this._plane[3]-i._plane[3]+i.distance;this._offset(t,e)}accumulateParams(t){const i=t.distance-t._plane[3];this.distance=i+this._plane[3]}clone(){const t=new P(this._helper,this._planeType,this._edge,this.distance,j.DEFERRED);return (0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .copy */ .C)(t._plane,this._plane),(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_5__/* .copy */ .C)(t._offsetPlane,this._offsetPlane),t._maxDistance=this._maxDistance,t._minDistance=this._minDistance,t._left=this._cloneNeighbor(this._left),t._right=this._cloneNeighbor(this._right),t._edgeDirection=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),this._edgeDirection),t}_maybeEqualsVec3(t,i){return null==t&&null==i||null!=t&&null!=i&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.G)(t,i)}_cloneNeighbor({start:t,end:i,direction:e,isOriginalDirection:s}){return{start:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),t),end:null!=i?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),i):null,direction:(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_3__.c)((0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_4__/* .create */ .vt)(),e),isOriginalDirection:s}}}const y=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .deg2rad */ .kU)(15),A=.001;var z,j;!function(t){t[t.XYZ=0]="XYZ",t[t.XY=1]="XY"}(z||(z={})),function(t){t[t.IMMEDIATE=0]="IMMEDIATE",t[t.DEFERRED=1]="DEFERRED"}(j||(j={}));


/***/ }),

/***/ 36504:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(60704);
/* harmony import */ var _UpdateVertices_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(t,a,e=_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_2__/* .AccumulationType */ .K.CUMULATIVE){this.origin=t,this.angle=a,this._accumulationType=e}_rotate(t,i){(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_1__/* .rotate */ .e$)(t.pos,t.pos,this.origin,i)}apply(t){this._rotate(t,this.angle)}undo(t){this._rotate(t,-this.angle)}canAccumulate(a){return a instanceof e&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .aI)(this.origin,a.origin)}accumulate(t,a){const e=a._accumulationType===_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_2__/* .AccumulationType */ .K.REPLACE;this._rotate(t,e?a.angle-this.angle:a.angle)}accumulateParams(t){const a=t._accumulationType===_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_2__/* .AccumulationType */ .K.REPLACE;this.angle=a?t.angle:this.angle+t.angle}}


/***/ }),

/***/ 37673:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59646);
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(60704);
/* harmony import */ var _UpdateVertices_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c{constructor(t,s,c,o,r=_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_3__/* .AccumulationType */ .K.CUMULATIVE){this.origin=t,this.axis1=s,this.factor1=c,this.factor2=o,this._accumulationType=r,this.axis2=(0,_core_libs_gl_matrix_2_factories_vec2f64_js__WEBPACK_IMPORTED_MODULE_1__/* .fromValues */ .fA)(s[1],-s[0])}_scale(t,i,a){(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__/* .projectAndScale */ .Vj)(t.pos,t.pos,this.origin,this.axis1,i),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_2__/* .projectAndScale */ .Vj)(t.pos,t.pos,this.origin,this.axis2,a)}apply(t){this._scale(t,this.factor1,this.factor2)}undo(t){this._scale(t,1/this.factor1,1/this.factor2)}canAccumulate(i){return i instanceof c&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .aI)(this.origin,i.origin)&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .equals */ .aI)(this.axis1,i.axis1)}accumulate(t,i){i._accumulationType===_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_3__/* .AccumulationType */ .K.REPLACE?this._scale(t,i.factor1/this.factor1,i.factor2/this.factor2):this._scale(t,i.factor1,i.factor2)}accumulateParams(t){const i=t._accumulationType===_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_3__/* .AccumulationType */ .K.REPLACE;this.factor1=i?t.factor1:this.factor1*t.factor1,this.factor2=i?t.factor2:this.factor2*t.factor2}}


/***/ }),

/***/ 63387:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ t),
/* harmony export */   K: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t,e,i){this._editGeometry=t,this._vertices=e,this.operation=i,this._undone=!1}_notifyChanges(t){this._editGeometry.components.forEach((t=>t.unnormalizeVertexPositions())),this._editGeometry.notifyChanges({operation:t,updatedVertices:this._vertices})}apply(){this._vertices.forEach((t=>this.operation.apply(t))),this._notifyChanges(this._undone?"redo":"apply")}undo(){this._vertices.forEach((t=>this.operation.undo(t))),this._undone=!0,this._notifyChanges("undo")}canAccumulate(t){if(this._undone||t._vertices.length!==this._vertices.length)return!1;for(let e=0;e<t._vertices.length;++e)if(t._vertices[e]!==this._vertices[e])return!1;return this.operation.canAccumulate(t.operation)}accumulate(e){return!!(e instanceof t&&this.canAccumulate(e))&&(this._vertices.forEach((t=>this.operation.accumulate(t,e.operation))),this.operation.accumulateParams(e.operation),this._notifyChanges("apply"),!0)}}var e;!function(t){t[t.CUMULATIVE=0]="CUMULATIVE",t[t.REPLACE=1]="REPLACE"}(e||(e={}));


/***/ }),

/***/ 3183:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bb: () => (/* binding */ d),
/* harmony export */   G3: () => (/* binding */ S),
/* harmony export */   fJ: () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(60704);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58359);
/* harmony import */ var _chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(28769);
/* harmony import */ var _geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(45573);
/* harmony import */ var _operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61434);
/* harmony import */ var _operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(36504);
/* harmony import */ var _operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(37673);
/* harmony import */ var _operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function d(o,i){return E(o,i,!1)}function T(o,i){return E(o,i,!0)}function E(o,i,r){if(o instanceof _operations_UpdateVertices_js__WEBPACK_IMPORTED_MODULE_7__/* .UpdateVertices */ .D){if(o.operation instanceof _operations_MoveVertex_js__WEBPACK_IMPORTED_MODULE_8__/* .MoveVertex */ .a)return h(o.operation,i,r),!0;if(o.operation instanceof _operations_RotateVertex_js__WEBPACK_IMPORTED_MODULE_5__/* .RotateVertex */ .m)return v(o.operation,i,r),!0;if(o.operation instanceof _operations_ScaleVertex_js__WEBPACK_IMPORTED_MODULE_6__/* .ScaleVertex */ .j)return F(o.operation,i,r),!0}return!1}function h(o,i,r=!1){const t=r?-1:1,s=(0,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .fromValues */ .fA)(t*o.dx,t*o.dy,t*o.dz);(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.f)(i.origin,i.origin,s),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(i)}function v(o,i,r=!1){const t=r?-o.angle:o.angle;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.K)(i.basis1,i.basis1,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .ZEROS */ .uY,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.K)(i.basis2,i.basis2,_core_libs_gl_matrix_2_factories_vec3f64_js__WEBPACK_IMPORTED_MODULE_2__/* .ZEROS */ .uY,t),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(i)}function F(o,i,r=!1){const t=r?1/o.factor1:o.factor1,s=r?1/o.factor2:o.factor2;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.g)(i.basis1,i.basis1,t),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.g)(i.basis2,i.basis2,s),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .projectAndScale */ .Vj)(i.origin,i.origin,o.origin,o.axis1,t),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .projectAndScale */ .Vj)(i.origin,i.origin,o.origin,o.axis2,s),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(i)}function S(a,m,g,p,u=!1){p||(p=(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.d)());const l=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__/* .sv2d */ .oG.get(),a[1],-a[0]),j=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__/* .sv2d */ .oG.get(),Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),x=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__/* .sv2d */ .oG.get(),Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),V=_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__/* .sv2d */ .oG.get(),d=m.allVertices;d.forEach((({pos:s})=>{(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(V,(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .dot */ .Om)(a,s),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .dot */ .Om)(l,s)),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .min */ .jk)(j,j,V),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .max */ .T9)(x,x,V)}));const T=1e-6,E=(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(_geometry_support_vectorStacks_js__WEBPACK_IMPORTED_MODULE_4__/* .sv2d */ .oG.get(),x[0]-j[0]<T?g/2:0,x[1]-j[1]<T?g/2:0);(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .subtract */ .Re)(j,j,E),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .add */ .WQ)(x,x,E);const h=u?d.reduce(((o,i)=>o+(i.pos[2]??0)),0)/d.length:0;return (0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .scale */ .hs)(p.basis1,a,(x[0]-j[0])/2),(0,_core_libs_gl_matrix_2_math_vec2_js__WEBPACK_IMPORTED_MODULE_0__/* .scale */ .hs)(p.basis2,l,(x[1]-j[1])/2),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.i)(p.origin,j[0]*a[0]+j[1]*l[0],j[0]*a[1]+j[1]*l[1],h),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.f)(p.origin,p.origin,p.basis1),(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_1__.f)(p.origin,p.origin,p.basis2),(0,_chunks_boundedPlane_js__WEBPACK_IMPORTED_MODULE_3__.u)(p),p}


/***/ }),

/***/ 7086:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   cx: () => (/* binding */ V),
/* harmony export */   dz: () => (/* binding */ G),
/* harmony export */   hj: () => (/* binding */ Z),
/* harmony export */   lJ: () => (/* binding */ k),
/* harmony export */   tC: () => (/* binding */ W)
/* harmony export */ });
/* unused harmony exports getGeodesicConstraint, intersectAll */
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73569);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92976);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(24121);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(78983);
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42120);
/* harmony import */ var _geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(22256);
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(29394);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(27451);
/* harmony import */ var _constraints_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(81066);
/* harmony import */ var _normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(97847);
/* harmony import */ var _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(52857);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function Z(e,n,t,r,o,i){let l="geodesic",u=(0,_geometry_support_geodesicUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .geodesicCompatibleSpatialReference */ .Xn)(t);const s=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)();return (0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .fromPoint */ .vf)(e,n,r,s),s[2]=0,u&&(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__/* .projectVectorToVector */ .F)(s,t,s,u)||(l="euclidean",u=t),{mode:l,view:n,elevationInfo:r,hasZ:o,directionMode:i,spatialReference:e.spatialReference,measurementSR:u,origin:s}}function b(n,t,o){if(null==t||null==n)return;const i=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .lengthUnitFromSpatialReference */ ._H)(o.measurementSR);if(null==i)return;const l=G(n,o);if(null==l)return;const u=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .valueInUnit */ .l3)(t,i);return new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .VerticalCylinderConstraint */ .ej(l,u)}function A(e,t,r,o){if(null==r||null==e)return;const i=G(e,o);if(null==i)return;const l=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)(r),u=10,s=e=>{if(null==e)return;const t=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)(),r=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .createAngle */ .Wq)(e,"degrees","geographic");return (0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pointFromDistanceAlongAzimuth */ .rT)(t,i,o.measurementSR,u,r,o.mode)?new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .VerticalHalfPlaneConstraint */ .FX(i,t):void 0},c=()=>{if(null!=t&&null!=e)return (0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)((0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .directionBetweenPoints */ .$h)(t,e))};switch(o.directionMode){case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.Absolute:return s(l);case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.Relative:{const e=c();if(null==e)return;return s(e+l)}case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.RelativeBilateral:{const e=c();if(null==e)return;return (0,_constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .constraintOrSet */ .xW)([s(e+l),s(e-l)])}}}function B(e,n){const t=C(e,n);return null!=t?new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .HorizontalPlaneConstraint */ .qR(t):void 0}function P(e,n,t){const{context:r,longitude:o,latitude:i,direction:l,distance:u,elevation:s}=t;if(null!=o||null!=i||null!=u||null!=s||null!=l){if(null!=o||null!=i){const e=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)(o),n=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)(i),t=C(s,r);return new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .CoordinateConstraint */ .QT(e,n,t)}return T(e,n,t)}}function T(n,t,{context:r,direction:o,distance:i,elevation:l}){if(null==t)return B(l,r);const{view:u,elevationInfo:s,measurementSR:a}=r,f=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .fromPoint */ .vf)(t,u,s);if(!a||!(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__/* .projectVectorToVector */ .F)(f,t.spatialReference,E,a))return;const[m,d]=E,p=null!=i?(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .valueInUnit */ .l3)(i,"meters"):void 0,g=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)(o),R=C(l,r),y=e=>{const n=new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .GeodesicConstraint */ .jf([m,d],a,p,R,e);return null==p||null==e||null==R&&r.hasZ?n:new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .PointConstraint */ .i7(n.closestTo(f))};if(null==g)return y(void 0);const x=()=>{if(null!=n&&null!=t)return (0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .getDegreesGeographic */ .hF)((0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .directionBetweenPoints */ .$h)(n,t))};switch(r.directionMode){case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.Absolute:return y(g);case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.Relative:{const e=x();if(null==e)return;return y(e+g)}case _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .DirectionMode */ .rZ.RelativeBilateral:{const e=x();if(null==e)return;return (0,_constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .constraintOrSet */ .xW)([y(e+g),y(e-g)])}}}function V(e){return"geodesic"===e.context.mode?P(null,null,e):q(e)}function k(e,n,t){const{context:r,x:o,y:i,distance:l,direction:u,elevation:s}=t;return"geodesic"===r.mode?P(n,e,t):null!=o||null!=i?q(t):z([b(e,l,r),A(e,n,u,r),B(s,r)])}function q({x:e,y:n,elevation:t,context:r}){J.x=e?.value??0,J.y=n?.value??0,J.spatialReference=r.spatialReference;const o=G(J,r,F);return new _constraints_js__WEBPACK_IMPORTED_MODULE_7__/* .CoordinateConstraint */ .QT(null!=e&&null!=o?o[0]:void 0,null!=n&&null!=o?o[1]:void 0,C(t,r))}function z(e){let n;for(const t of e)t&&(n=n?.intersect(t)??t);return n}function G(e,n,t=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)()){const{view:r,elevationInfo:o,measurementSR:l,origin:u,mode:s}=n;if((0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .fromPoint */ .vf)(e,r,o,t),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__/* .projectVectorToVector */ .F)(t,e.spatialReference,t,l))return"geodesic"!==s&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.d)(t,t,u),t}function W(e,n,t,r){const{view:o,measurementSR:i,spatialReference:s,origin:a,mode:f}=t;if("geodesic"===f?(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.c)(H,e):(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_2__.f)(H,e,a),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_4__/* .projectVectorToVector */ .F)(H,i,H,s))return (0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .toElevationAlignedDehydratedPoint */ .xF)(H,o,n,t,r)}function C(e,n){return D(e,n)?.value??void 0}function D(n,{view:r,origin:i,elevationInfo:l,hasZ:u,measurementSR:s}){if(null==n||!u)return;const c=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .verticalLengthUnitFromSpatialReference */ .mq)(s);if(null==c)return;const[a,f]=i,d=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .valueInUnit */ .l3)(n,c),p="3d"===r?.type?(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getConvertedElevationFromXYZ */ .Fo)(r,a,f,d,s,l):d;return null!=p?(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .createLength */ .d_)(p,c):void 0}const E=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)(),F=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)(),H=(0,_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_8__/* .createWritable */ .Hh)(),J=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_10__/* .makeDehydratedPoint */ .T)(0,0,0,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.WGS84);


/***/ }),

/***/ 53333:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e){this.vertexHandle=null,this.excludeFeature=null,this.visualizer=null,this.selfSnappingZ=null,this.drawConstraints=null,this.editGeometryOperations=e.editGeometryOperations,this.elevationInfo=e.elevationInfo,this.pointer=e.pointer,this.vertexHandle=e.vertexHandle,this.excludeFeature=e.excludeFeature,this.feature=e.feature,this.visualizer=e.visualizer,this.selfSnappingZ=e.selfSnappingZ,this.drawConstraints=e.drawConstraints}get coordinateHelper(){return this.editGeometryOperations.data.coordinateHelper}get spatialReference(){return this.coordinateHelper.spatialReference}}


/***/ }),

/***/ 89030:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6267);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40189);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(85251);
/* harmony import */ var _layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9723);
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85174);
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(27451);
/* harmony import */ var _dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(74321);
/* harmony import */ var _SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(53333);
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(22167);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function f({predicate:o=()=>!0,snappingManager:i,snappingContext:l,updatingHandles:u,useZ:c=!0}){const p=new _dragEventPipeline_js__WEBPACK_IMPORTED_MODULE_5__/* .EventPipeline */ .rh;if(null==i)return{snappingStep:[y,p],cancelSnapping:y};let f,Z=null,j=null,z=null;const T=()=>{Z=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__/* .abortMaybe */ .DC)(Z),i.doneSnapping(),j?.frameTask.remove(),j=null,f=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_7__/* .removeMaybe */ .xt)(f),z=null},k=d(i,c,p);let w=null,I=null,U=null;return{snappingStep:[n=>{if(!o(n))return n;const{action:e}=n;if("start"===e){const{info:e}=n,t=m(i.view);if(j=g(l,n,t),j.context.selfSnappingZ=null,!c&&null!=e){const n=S(l.coordinateHelper,e.handle.component);null!=n&&(j.context.selfSnappingZ={value:n,elevationInfo:l.elevationInfo??_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .absoluteHeightElevationInfo */ .qt})}}if(null!=j){const{context:o,originalScenePos:l,originalPos:a}=j,{mapEnd:s,mapStart:p,scenePoints:d}=n,m=x(a,v(s,p)),g=v(p,a),S={...n,action:"update"},y=j.context,T=P(l,d),C=i.update({point:m,scenePoint:T,context:o});if(U=C,h(s,C,g,c),w=m,I=T,"end"!==e){const{frameTask:n}=j;null==Z&&(Z=new AbortController),z=e=>{u.addPromise((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ignoreAbortErrors */ .QZ)(k({frameTask:n,event:S,context:y,point:m,scenePoint:T,delta:g,getLastState:()=>({point:w,scenePoint:I,updatePoint:e.forceUpdate?null:U})},Z.signal)))},z({forceUpdate:!1}),null==f&&(f=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .watch */ .wB)((()=>i.options.effectiveEnabled),(()=>z?.({forceUpdate:!0}))))}}return"end"===e&&T(),n},p],cancelSnapping:n=>(T(),n)}}function d(n,e,t){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .debounce */ .sg)((async({frameTask:o,point:r,scenePoint:l,context:a,event:s,delta:u,getLastState:c},p)=>{const f=await o.schedule((()=>n.snap({point:r,scenePoint:l,context:a,signal:p})),p);if(f.valid){let l=await o.schedule((()=>f.apply()),p);const d=c();null!=d.point&&r!==d.point&&(l=n.update({point:d.point,scenePoint:d.scenePoint,context:a})),null!=d.updatePoint&&(0,_layers_graphics_dehydratedFeatureComparison_js__WEBPACK_IMPORTED_MODULE_2__/* .pointEquals */ .CI)(l,d.updatePoint)||(h(s.mapEnd,l,u,e),t.execute(s))}}))}function m(n){return"3d"===n.type?n.resourceController.scheduler.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__/* .TaskPriority */ .W6.SNAPPING):_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_6__/* .ImmediateTask */ .nu}function g(n,e,t){return{context:new _SnappingContext_js__WEBPACK_IMPORTED_MODULE_8__/* .SnappingContext */ .e({editGeometryOperations:n.editGeometryOperations,elevationInfo:n.elevationInfo,pointer:n.pointer,vertexHandle:null!=e.info?e.info.handle:null,excludeFeature:n.excludeFeature,feature:n.feature,visualizer:n.visualizer}),originalPos:null!=e.snapOrigin?n.coordinateHelper.vectorToDehydratedPoint(e.snapOrigin):e.mapStart,originalScenePos:null!=e.scenePoints?e.scenePoints.sceneStart:null,frameTask:t}}function x(n,[e,t,o]){const r=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_3__/* .clonePoint */ .EL)(n);return r.x+=e,r.y+=t,r.hasZ&&(r.z+=o),r}function P(n,e){return null==n||null==e?null:x(n,v(e.sceneEnd,e.sceneStart))}function v(n,e){const t=n.hasZ&&e.hasZ?n.z-e.z:0;return[n.x-e.x,n.y-e.y,t]}function h(n,e,[t,o,r],i){n.x=e.x+t,n.y=e.y+o,i&&n.hasZ&&e.hasZ&&(n.z=e.z+r)}function S(n,e){if(!n.hasZ())return null;const t=e.vertices;let o=null;for(const r of t){const e=n.getZ(r.pos);if(null!=o&&null!=e&&Math.abs(e-o)>1e-6)return null;null==o&&(o=e)}return o}function y(n){return n}


/***/ }),

/***/ 86548:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20464);
/* harmony import */ var _hints_IntersectionSnappingHint_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13795);
/* harmony import */ var _hints_LineSnappingHint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4368);
/* harmony import */ var _hints_ParallelSnappingHint_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(74989);
/* harmony import */ var _hints_PointSnappingHint_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75796);
/* harmony import */ var _hints_RightAngleSnappingHint_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(23495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r{draw(r,p){const h=a(r),f=this.sortUniqueHints(h),u=[];for(const i of f)i instanceof _hints_IntersectionSnappingHint_js__WEBPACK_IMPORTED_MODULE_1__/* .IntersectionSnappingHint */ .v&&u.push(this.visualizeIntersectionPoint(i,p)),i instanceof _hints_LineSnappingHint_js__WEBPACK_IMPORTED_MODULE_2__/* .LineSnappingHint */ .c&&u.push(this.visualizeLine(i,p)),i instanceof _hints_ParallelSnappingHint_js__WEBPACK_IMPORTED_MODULE_3__/* .ParallelSnappingHint */ .r&&u.push(this.visualizeParallelSign(i,p)),i instanceof _hints_RightAngleSnappingHint_js__WEBPACK_IMPORTED_MODULE_5__/* .RightAngleSnappingHint */ .l&&u.push(this.visualizeRightAngleQuad(i,p)),i instanceof _hints_PointSnappingHint_js__WEBPACK_IMPORTED_MODULE_4__/* .PointSnappingHint */ ._&&u.push(this.visualizePoint(i,p));return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .handlesGroup */ .vE)(u)}sortUniqueHints(i){return i}}function a(i){const n=[];for(const t of i){let i=!0;for(const s of n)if(t.equals(s)){i=!1;break}i&&n.push(t)}return n}


/***/ }),

/***/ 75796:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(24121);
/* harmony import */ var _SnappingHint_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(53830);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends _SnappingHint_js__WEBPACK_IMPORTED_MODULE_1__/* .SnappingHint */ .m{constructor(t,s,n){super(s,n),this.point=t}equals(s){return s instanceof n&&(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_0__.q)(this.point,s.point)}}


/***/ }),

/***/ 68928:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89882);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(s){let t=0,a=0,e=0;return s?("cim"===s.type&&s.data.symbol&&"symbolLayers"in s.data.symbol&&s.data.symbol.symbolLayers&&s.data.symbol.symbolLayers.map((o=>{"CIMVectorMarker"===o.type&&o.anchorPoint&&(Math.abs(o.anchorPoint.x)>t&&(t=o.anchorPoint.x),Math.abs(o.anchorPoint.y)>a&&(a=o.anchorPoint.y),null!=o.size&&o.size>e&&(e=o.size))})),t=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .pt2px */ .Lz)(t),a=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .pt2px */ .Lz)(a),e=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .pt2px */ .Lz)(e),{offsetX:t,offsetY:a,size:e}):{offsetX:t,offsetY:a,size:e}}


/***/ }),

/***/ 69733:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Am: () => (/* binding */ Q),
  Gk: () => (/* binding */ y),
  Ku: () => (/* binding */ F),
  S3: () => (/* binding */ M),
  fL: () => (/* binding */ O),
  em: () => (/* binding */ D),
  LJ: () => (/* binding */ k),
  Y3: () => (/* binding */ x),
  dy: () => (/* binding */ R),
  qP: () => (/* binding */ j),
  fr: () => (/* binding */ w),
  Hw: () => (/* binding */ T),
  uf: () => (/* binding */ A)
});

// UNUSED EXPORTS: makeLengthField

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityUtils.js
var quantityUtils = __webpack_require__(73569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/fields/parsingAndFormattingUtils.js
var parsingAndFormattingUtils = __webpack_require__(86568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/uuid.js
var uuid = __webpack_require__(33880);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/fields/TooltipField.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let s=class extends Accessor/* default */.A{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=(0,uuid/* generateUUID */.lk)(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return null!=this.inputValue}get locked(){return this.lockable&&null!=this.committed}onInput(t){this.inputValue=t,this.invalid=!1}onCommit(t,o,i){this.lockable?this._onCommitLockable(t,i):this._onCommitNonLockable(i),this.invalid&&"commit-and-exit"===t||i.onCommit(o,t)}_onCommitLockable(t,o){const{inputValue:i,locked:l}=this;l&&n(i)?this.unlock():("commit-and-exit"===t&&!l||null!=i)&&this._parseInputAndLock(o)}_onCommitNonLockable(t){const{inputValue:o}=this;n(o)?this.lockable?this.setActual(null):this.clearInputValue():null!=o&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){const{suffix:o}=this;return"function"==typeof o?o(t):o}getFormattedValue(t){const{actual:o,committed:i,format:l}=this;return null!=i?l(i,t):null!=o?l(o,t):null}getRawDisplayValue(t){const{actual:o,committed:i,inputValue:l}=this;return null!=l?l:this.lockable&&null!=i?this.formatForInputMode(i,t):null!=o?this.formatForInputMode(o,t):null}_parseInputAndSetActual(t){const{inputValue:o}=this;if(null==o||n(o))return this.setActual(null);const i=this.parse(o,t);null!=i?this.setActual(i):this.invalid=!0}_parseInputAndLock(t){const{inputValue:o,actual:i}=this;if(n(o))return this.unlock();if(null==o)return this.lock(i);const l=this.parse(o,t);null!=l?this.lock(l):this.invalid=!0}};function n(t){return null!=t&&""===t.trim()}(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"actual",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"committed",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"dirty",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"format",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"formatForInputMode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"lockable",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"locked",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"id",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"inputValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"name",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"parse",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"readOnly",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"suffix",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"title",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"visible",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"invalid",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],s.prototype,"unlockOnVertexPlacement",void 0),s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.fields.TooltipField")],s);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/fields/TooltipFieldElevation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let c=class extends s{constructor(t){super(t),this.showAsZ=!1}normalizeCtorArgs(t){const s=t=>t.inputUnitInfos.verticalLength.unit;return{name:"elevation",actual:quantityUtils/* zeroMeters */.r7,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,o)=>(0,quantityUtils/* createLength */.d_)(t,s(o))}),format:(t,o)=>o.formatters.verticalLength(t),formatForInputMode:(t,o)=>o.formatters.scalar((0,quantityUtils/* toUnit */.kM)(t,s(o))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1,...t}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"showAsZ",void 0),c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],c);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityFormatUtils.js
var quantityFormatUtils = __webpack_require__(33604);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/angularMeasurementUtils.js
var angularMeasurementUtils = __webpack_require__(52857);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/fields/TooltipFieldOrientation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipFieldOrientation_c=class extends s{constructor(t){super(t),this.precision=1}normalizeCtorArgs(t){const i=t=>t.inputUnitInfos.angle.unit;return{name:"orientation",actual:null,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,r)=>(0,quantityUtils/* createAngle */.Wq)(t,i(r),"geographic"),sanitize:parsingAndFormattingUtils/* sanitizeAngle */.D5}),format:t=>{const o=(0,angularMeasurementUtils/* getNormalizedGeographicOrientation */.P1)(t);return (0,quantityFormatUtils/* formatAngle */.Nk)(o,"geographic",this.precision)},formatForInputMode:(t,r)=>{const o=(0,angularMeasurementUtils/* getNormalizedGeographicOrientation */.P1)(t);return r.formatters.scalar(o)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation,...t}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipFieldOrientation_c.prototype,"precision",void 0),TooltipFieldOrientation_c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],TooltipFieldOrientation_c);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/fields/TooltipFieldSize.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let a=class extends s{constructor(t){super(t),this.precision=null}normalizeCtorArgs(t){const s=t=>t.inputUnitInfos.length.unit;return{name:"size",actual:null,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,o)=>(0,quantityUtils/* createLength */.d_)(t,s(o))}),format:(t,o)=>o.formatters.length(t),formatForInputMode:(t,r)=>r.formatters.scalar((0,quantityUtils/* toUnit */.kM)(t,s(r))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size,...t}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],a.prototype,"precision",void 0),a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.fields.TooltipFieldSize")],a);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/fields/fields.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function y(t){const e=t=>t.inputUnitInfos.angle.unit,r=t=>t.sketchOptions.values.effectiveDirectionMode;return new s({name:"direction",actual:quantityUtils/* zeroDegrees */.IV,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,a)=>(0,quantityUtils/* createAngle */.Wq)(t,e(a),"geographic"),sanitize:parsingAndFormattingUtils/* sanitizeAngle */.D5}),format:(t,e)=>{const a=r(e),n=(0,angularMeasurementUtils/* getNormalizedDirection */.jQ)(t,a);switch(a){case angularMeasurementUtils/* DirectionMode */.rZ.Absolute:return e.formatters.direction(n);case angularMeasurementUtils/* DirectionMode */.rZ.Relative:return e.formatters.directionRelative(n);case angularMeasurementUtils/* DirectionMode */.rZ.RelativeBilateral:return e.formatters.directionRelativeBilateral(n)}},formatForInputMode:(t,n)=>{const i=(0,angularMeasurementUtils/* getNormalizedDirection */.jQ)(t,r(n));return n.formatters.scalar((0,quantityUtils/* toUnit */.kM)(i,e(n)))},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>{const e=r(t),{absolute:a,relative:n}=t.messages.sketch.direction;switch(e){case angularMeasurementUtils/* DirectionMode */.rZ.Absolute:return a;case angularMeasurementUtils/* DirectionMode */.rZ.Relative:case angularMeasurementUtils/* DirectionMode */.rZ.RelativeBilateral:return n}},...t})}function U(t){const e=t=>t.inputUnitInfos.length.unit;return new s({name:"distance",actual:quantityUtils/* zeroMeters */.r7,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,a)=>(0,quantityUtils/* createLength */.d_)(Math.max(t,0),e(a))}),format:(t,e)=>e.formatters.length(t),formatForInputMode:(t,n)=>n.formatters.scalar((0,quantityUtils/* toUnit */.kM)(t,e(n))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance,...t})}function w(t){return U({format:(t,e)=>e.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0,...t})}function F(t){return U({...t})}function x(t){const e=t=>t.inputUnitInfos.length.unit;return U({...t,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,a)=>(0,quantityUtils/* createLength */.d_)(t,e(a))}),format:(t,e)=>e.formatters.lengthRelative(t)})}function M(t){return new c(t)}function k(t){return new TooltipFieldOrientation_c(t)}function j(t){return new a(t)}function R(e){return B("scale",{name:"scale",actual:null,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:e=>(0,quantityUtils/* createScalar */.LF)(Math.abs(e))}),...e})}function Q(t){const n=t=>t.inputUnitInfos.area.unit;return new s({name:"area",actual:quantityUtils/* zeroSquareMeters */.iT,parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:(t,e)=>(0,quantityUtils/* createArea */.gT)(t,n(e))}),format:(t,e)=>e.formatters.area(t),formatForInputMode:(t,e)=>e.formatters.scalar((0,quantityUtils/* toUnit */.kM)(t,n(e))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0,...t})}function D(t){return new s({name:"x",actual:quantityUtils/* zeroDegrees */.IV,parse:parsingAndFormattingUtils/* parseLongitude */.L5,format:(t,e)=>e.formatters.longitudeDecimalDegrees(t),formatForInputMode:t=>(0,parsingAndFormattingUtils/* formatLongitudeDecimalDegreesForInputMode */.zX)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.longitude,...t})}function O(t){return new s({name:"y",actual:quantityUtils/* zeroDegrees */.IV,parse:parsingAndFormattingUtils/* parseLatitude */.A3,format:(t,e)=>e.formatters.latitudeDecimalDegrees(t),formatForInputMode:t=>(0,parsingAndFormattingUtils/* formatLatitudeDecimalDegreesForInputMode */.oZ)(t),suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.latitude,...t})}function T(t){return B("x",{name:"x",...t})}function A(t){return B("y",{name:"y",...t})}function B(e,a){return new s({actual:(0,quantityUtils/* createScalar */.LF)(0),parse:(0,parsingAndFormattingUtils/* makeQuantityParser */.hw)({createQuantity:e=>(0,quantityUtils/* createScalar */.LF)(e)}),format:(t,e)=>e.formatters.scalar(t),formatForInputMode:(t,e)=>e.formatters.scalar(t),title:t=>t.messages.sketch[e],...a})}


/***/ }),

/***/ 86568:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A3: () => (/* binding */ J),
/* harmony export */   D5: () => (/* binding */ C),
/* harmony export */   GC: () => (/* binding */ D),
/* harmony export */   L5: () => (/* binding */ H),
/* harmony export */   Nr: () => (/* binding */ Q),
/* harmony export */   X3: () => (/* binding */ G),
/* harmony export */   hw: () => (/* binding */ B),
/* harmony export */   m6: () => (/* binding */ K),
/* harmony export */   oZ: () => (/* binding */ A),
/* harmony export */   zX: () => (/* binding */ w)
/* harmony export */ });
/* unused harmony export cleanNumber */
/* harmony import */ var _core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17505);
/* harmony import */ var _core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(33604);
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(73569);
/* harmony import */ var _geometry_coordinateFormatter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(88204);
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46930);
/* harmony import */ var _support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(52857);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const v=1,y=6;function D(t,l){return{angleRelative:x,direction:j,directionRelative:R,directionRelativeBilateral:$,latitudeDecimalDegrees:L,longitudeDecimalDegrees:F,area:(n,e)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatArea */ .Jd)(t,n,e??l.area),length:(n,e,i)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatLength */ .ix)(t,n,e??l.length,i),lengthRelative:(n,e)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatRelativeLength */ .yh)(t,n,e??l.length),totalLength:(n,e)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatLength */ .ix)(t,n,e??l.length),verticalLength:(n,r)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatVerticalLength */ .Oo)(t,n,r??l.verticalLength),verticalLengthRelative:(e,r)=>(0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatRelativeVerticalLength */ .OM)(t,e,r??l.verticalLength),percentage:z,scalar:Z,scale:T}}function x(t){return (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .formatNumber */ .ZV)(t,{signDisplay:"exceptZero",...b(v)})}function j(t){return (0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatAngle */ .Nk)(t,t.rotationType,v)}function R(t){const n=(0,_support_angularMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .getDegreesGeographic */ .hF)(t);return (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .formatNumber */ .ZV)(n,{style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:n>0?"never":"exceptZero",...b(v)})}function $(t){return (0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatAngle */ .Nk)(t,t.rotationType,v)}function F(t){return U(t,N)}function L(t){return U(t,O)}function w(t){return q(t,N)}function A(t){return q(t,O)}function U(t,n){const e=!1,r="geographic";return (0,_core_quantityFormatUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .formatAngle */ .Nk)((0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toUnit */ .kM)(t,"degrees"),r,y,n,e)}function q(t,n){const e=!1,r=n.normalize((0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toUnit */ .kM)(t,"degrees").value,void 0,e);return Z((0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createScalar */ .LF)(r),y)}function z(t){return (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .formatNumber */ .ZV)(t.value,{style:"percent"})}function T(t){return (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .formatNumber */ .ZV)(t,{style:"percent",maximumFractionDigits:0})}function Z(t,n){return (0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .formatNumber */ .ZV)(t.value,b(n))}function b(t){return{minimumFractionDigits:t,maximumFractionDigits:t}}function B({createQuantity:t,sanitize:n}){return(e,r)=>{if(null==e)return null;n&&(e=n(e));const i=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(e);return null==i?null:t(i,r)}}function C(t){return t.replaceAll(/[*^~]/g,"")}const E=t=>{let n=`[-+]?[0-9${t.thousands}]+`;return""!==t.decimal&&(n+=`${t.decimal}[0-9]+`),new RegExp(`^(${n}\\s*)${t.separator}(\\s*${n})$`,"i")},I="",M=[];for(const P of[",","\\|","\\s+"])for(const t of["\\.",",",""])for(const n of["",",","\\.",I,"\\s+"])P!==t&&P!==n&&t!==n&&M.push({separator:P,decimal:t,thousands:n,pattern:E({decimal:t,thousands:n,separator:P})});function Q(t){for(const{decimal:n,thousands:e,pattern:r}of M){r.lastIndex=0;const i=t.match(r);if(!i)continue;const o=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(k(i[1],n,e)),l=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(k(i[2],n,e));if(null!=o&&null!=l)return{x:(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createScalar */ .LF)(o),y:(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createScalar */ .LF)(l)}}return null}function k(t,n,e){let r=t.replaceAll(/[\s+]/g,"");return""!==e&&(r=r.replaceAll(e,"")),""!==n&&(r=r.replaceAll(n,".")),r}function G(t){if(!t||null!=(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_4__/* .parseNumber */ .$J)(t)||!(0,_geometry_coordinateFormatter_js__WEBPACK_IMPORTED_MODULE_3__/* .isLoaded */ .s1)())return null;const n=(0,_geometry_coordinateFormatter_js__WEBPACK_IMPORTED_MODULE_3__/* .fromLatitudeLongitude */ .o6)(t),e=K(n?.latitude),r=K(n?.longitude);return null!=r&&null!=e?{latitude:e,longitude:r}:null}function H(t){return K((0,_geometry_coordinateFormatter_js__WEBPACK_IMPORTED_MODULE_3__/* .fromLongitude */ .mT)(t))}function J(t){return K((0,_geometry_coordinateFormatter_js__WEBPACK_IMPORTED_MODULE_3__/* .fromLatitude */ .ts)(t))}function K(t){return null!=t?(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createAngle */ .Wq)(t,"degrees","geographic"):null}const N=new _core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__/* .Cyclical */ .hr(-180,180),O=new _core_Cyclical_js__WEBPACK_IMPORTED_MODULE_0__/* .Cyclical */ .hr(-90,90);


/***/ }),

/***/ 5577:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(83856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let s=class extends _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_6__/* .SketchTooltipInfo */ .w{constructor(o){super(o),this.type="extent-rotate",this.angle=0}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)()],s.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)()],s.prototype,"angle",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.ExtentRotateTooltipInfo")],s);


/***/ }),

/***/ 63874:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73569);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(83856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__/* .SketchTooltipInfo */ .w{constructor(o){super(o),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .zeroMeters */ .r7,this.ySize=_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .zeroMeters */ .r7}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"xScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"yScale",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"xSize",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"ySize",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.ExtentScaleTooltipInfo")],i);


/***/ }),

/***/ 57087:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(83856);
/* harmony import */ var _TooltipInfoWithCoordinates_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(38153);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends((0,_TooltipInfoWithCoordinates_js__WEBPACK_IMPORTED_MODULE_7__/* .TooltipInfoWithCoordinates */ .B)(_SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_6__/* .SketchTooltipInfo */ .w)){constructor(o){super(o),this.type="move-point",this.allFields.forEach((o=>{o.lockable=!1,o.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)()],i.prototype,"allFields",null),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.MovePointTooltipInfo")],i);


/***/ }),

/***/ 45165:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _fields_fields_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(69733);
/* harmony import */ var _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(83856);
/* harmony import */ var _TooltipInfoWithCoordinates_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(38153);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let p=class extends((0,_TooltipInfoWithCoordinates_js__WEBPACK_IMPORTED_MODULE_8__/* .TooltipInfoWithCoordinates */ .B)(_SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__/* .SketchTooltipInfo */ .w)){constructor(t){super(t),this.type="selected-vertex",this.area=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_6__/* .makeAreaField */ .Am)(),this.totalLength=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_6__/* .makeTotalLengthField */ .fr)(),this.geometryType="polyline",this.allFields.forEach((t=>{t.lockable=!1,t.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,"polygon"===this.geometryType?this.area:this.totalLength]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)()],p.prototype,"geometryType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)()],p.prototype,"allFields",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.SelectedVertexTooltipInfo")],p);


/***/ }),

/***/ 83856:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   w: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let r=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(e){super(e),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter((e=>e.visible&&!e.readOnly))}clearInputValues(){this.allFields.forEach((e=>e.clearInputValue()))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"sketchOptions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"visibleElements",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"helpMessage",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"viewType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"allFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],r.prototype,"editableFields",null),r=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],r);


/***/ }),

/***/ 38153:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73569);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _geometry_support_pointUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(76557);
/* harmony import */ var _fields_fields_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(69733);
/* harmony import */ var _fields_parsingAndFormattingUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(86568);
/* harmony import */ var _support_geodesicMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(25358);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=h=>{let f=class extends h{constructor(){super(...arguments),this.longitude=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_8__/* .makeLongitudeField */ .em)(),this.latitude=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_8__/* .makeLatitudeField */ .fL)(),this.x=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_8__/* .makeXField */ .Hw)(),this.y=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_8__/* .makeYField */ .uf)(),this.elevation=(0,_fields_fields_js__WEBPACK_IMPORTED_MODULE_8__/* .makeElevationField */ .S3)(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,i=t?.spatialReference){if(this.geographic=!!i&&(0,_support_geodesicMeasurementUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .supportsGeodesicMeasurement */ .yF)(i),null==t)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){const e=(0,_geometry_support_pointUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getLongitudeLatitude */ .QP)(t,g);this._setActualLonLat((0,_fields_parsingAndFormattingUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .createGeographicCoordinate */ .m6)(e?.[0]),(0,_fields_parsingAndFormattingUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .createGeographicCoordinate */ .m6)(e?.[1]))}else this._setActualXY((0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createScalar */ .LF)(t.x),(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createScalar */ .LF)(t.y))}_setActualLonLat(t,e){this.longitude.actual=t,this.latitude.actual=e}_setActualXY(t,e){this.x.actual=t,this.y.actual=e}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],f.prototype,"geographic",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],f.prototype,"effectiveX",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],f.prototype,"effectiveY",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],f.prototype,"key",null),f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],f),f},g=[0,0];


/***/ }),

/***/ 56326:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   M: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73569);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(83856);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends _SketchTooltipInfo_js__WEBPACK_IMPORTED_MODULE_7__/* .SketchTooltipInfo */ .w{constructor(o){super(o),this.type="translate",this.distance=_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .zeroMeters */ .r7}clear(){this.distance=_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .zeroMeters */ .r7}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)()],i.prototype,"distance",void 0),i=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.interactive.tooltip.infos.TranslateTooltipInfo")],i);


/***/ }),

/***/ 45565:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  sZ: () => (/* binding */ tooltipCommonUtils_C),
  wG: () => (/* binding */ H),
  mu: () => (/* binding */ F),
  A: () => (/* binding */ R),
  HA: () => (/* binding */ J),
  IA: () => (/* binding */ z),
  Ue: () => (/* binding */ V)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/asyncUtils.js
var asyncUtils = __webpack_require__(12690);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/quantityUtils.js
var quantityUtils = __webpack_require__(73569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec32.js
var vec32 = __webpack_require__(24121);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec3f64.js
var vec3f64 = __webpack_require__(58359);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/coordinateFormatter.js
var coordinateFormatter = __webpack_require__(88204);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/MeshTransform.js
var MeshTransform = __webpack_require__(8695);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/meshVertexSpaceUtils.js
var meshVertexSpaceUtils = __webpack_require__(1114);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/webMercatorUtils.js
var webMercatorUtils = __webpack_require__(96082);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/keybindings.js
var keybindings = __webpack_require__(70384);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/events.js
var events = __webpack_require__(64874);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/modeUtils.js
var modeUtils = __webpack_require__(67923);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/css.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e="esri-tooltip",css_t=`${e}-content`,css_n=`${e}-content--input`,_=`${e}-content__header`,a=`${e}-content__header__spacer`,css_o=`${e}-content__header__actions`,s=`${e}-draw-header-actions`,c=`${e}-table`,$=`${e}-help-message`,r=`${e}-help-message__text`,h=`${e}-help-message__icon`;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/widgets/Widget.js + 4 modules
var Widget = __webpack_require__(46928);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/widgets/support/widgetUtils.js
var widgetUtils = __webpack_require__(99484);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/widgets/support/jsxFactory.js
var jsxFactory = __webpack_require__(96704);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/components/TooltipField.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const p=`${e}-field`,d={base:p,inputMode:`${p}--input`,title:`${p}__title`,value:`${p}__value`};let TooltipField_a=class extends Widget/* default */.A{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return (0,jsxFactory/* tsx */.K)("div",{class:this.classes({[d.base]:!0,[d.inputMode]:"input"===this.mode})},(0,jsxFactory/* tsx */.K)("div",{class:d.title,key:"title"},this.title),(0,jsxFactory/* tsx */.K)("div",{class:d.value,key:"value"},this.value))}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipField_a.prototype,"hidden",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipField_a.prototype,"mode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipField_a.prototype,"title",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipField_a.prototype,"value",void 0),TooltipField_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.components.TooltipField")],TooltipField_a);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/components/ValueByValue.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const ValueByValue_p={base:`${e}-value-by-value`};let ValueByValue_a=class extends Widget/* default */.A{constructor(){super(...arguments),this.divider=""}render(){return (0,jsxFactory/* tsx */.K)("div",{class:ValueByValue_p.base},(0,jsxFactory/* tsx */.K)("span",null,this.left),(0,jsxFactory/* tsx */.K)("span",null,this.divider),(0,jsxFactory/* tsx */.K)("span",null,this.right))}};(0,tslib_es6._)([(0,property/* property */.MZ)()],ValueByValue_a.prototype,"left",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ValueByValue_a.prototype,"divider",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ValueByValue_a.prototype,"right",void 0),ValueByValue_a=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.components.ValueByValue")],ValueByValue_a);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/a11yUtils.js
var a11yUtils = __webpack_require__(77058);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/memoize.js
var memoize = __webpack_require__(6371);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/scheduling.js
var scheduling = __webpack_require__(61449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitFormatUtils.js
var unitFormatUtils = __webpack_require__(26257);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/getDefaultUnitForView.js
var getDefaultUnitForView = __webpack_require__(47228);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/fields/parsingAndFormattingUtils.js
var parsingAndFormattingUtils = __webpack_require__(86568);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/widgets/support/componentsUtils.js + 1 modules
var componentsUtils = __webpack_require__(17199);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/widgets/support/decorators/messageBundle.js
var messageBundle = __webpack_require__(43955);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContent.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const E=Symbol("dragHandles");let S=class extends Widget/* default */.A{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transitionInfo=null,this._mode="feedback",this._getFormatters=(0,memoize/* memoize */.B)(parsingAndFormattingUtils/* getFormatters */.GC),this._onHeaderPointerDown=t=>{const e=t.target;e instanceof HTMLElement&&"calcite-button"!==e?.tagName?.toLowerCase()&&(this.removeHandles(E),t.preventDefault(),t.stopPropagation(),e.setPointerCapture(t.pointerId),this.tooltip.onDragStart(t.clientX,t.clientY),this.addHandles([(0,events.on)(e,"pointermove",(({clientX:t,clientY:e})=>{this.tooltip.onDrag(t,e)})),(0,events.on)(e,["pointerup","pointercancel"],(o=>{this.removeHandles(E),e.releasePointerCapture(t.pointerId),this.tooltip.onDragEnd()})),(0,events.on)(e,"touchstart",(t=>t.preventDefault()))],E))},this._onDiscard=()=>{this.destroyed||(this.tooltip.emit("discard"),this.info.clearInputValues(),this.exitInputMode())},this._onCommit=(t,e)=>{if(this.destroyed)return;if(this.tooltip.emit("commit",{type:e}),"commit-and-exit"===e)return void this.exitInputMode();if("commit-on-blur"===e)return;const o=this._getFocusableElements(),s=o.length,i=o.indexOf(t);if(-1===i)return void this.exitInputMode();const n=((i+("commit-and-next"===e?1:-1))%s+s)%s;L(o.at(n))},this._onKeyDown=t=>{switch(t.code){case keybindings/* tooltipKeys */.ac.next:return this._onNextKey(t);case keybindings/* tooltipKeys */.ac.discard:return t.stopPropagation(),this._onDiscard()}}}get mode(){return this._mode}get _displayUnits(){const{displayUnits:t}=this.info.sketchOptions.values,e=(0,getDefaultUnitForView/* getDefaultUnitForView */.c)(this.tooltip.view);return{length:t.length??e,verticalLength:t.verticalLength??e,area:t.area??e}}get _inputUnitInfos(){const t=this._messagesUnits,e=e=>({unit:e,abbreviation:(0,unitFormatUtils/* unitName */.Cq)(t,e,"abbr")}),{inputUnits:o}=this.info.sketchOptions.values,s=(0,getDefaultUnitForView/* getDefaultUnitForView */.c)(this.tooltip.view),i=o.length??s,n=o.verticalLength??s,r=o.area??s;return{length:e((0,unitUtils/* defaultLengthUnit */.wL)(i)),verticalLength:e((0,unitUtils/* defaultVerticalLengthUnit */.m5)(n)),area:e((0,unitUtils/* defaultAreaUnit */.tW)(r)),angle:e("degrees")}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){const{visibleElements:t}=this.info.sketchOptions.tooltips,e=this._renderedContent,o=this._renderedActions,s=this._renderedHelpMessage,i=e.length>0,n=i||!!s,r="input"===this.mode;return (0,jsxFactory/* tsx */.K)("div",{class:(0,widgetUtils/* classes */.Ly)(css_t,r&&css_n),onkeydown:this._onKeyDown,tabIndex:-1},r&&n&&t.header?(0,jsxFactory/* tsx */.K)("div",{class:_,"data-testid":"tooltip-header",key:"header",onpointerdown:this._onHeaderPointerDown},(0,jsxFactory/* tsx */.K)("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),o.length>0?(0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,(0,jsxFactory/* tsx */.K)("div",{class:a,key:"spacer"}),(0,jsxFactory/* tsx */.K)("div",{class:css_o,key:"actions"},o)):null):null,i?(0,jsxFactory/* tsx */.K)("div",{class:c,key:"content"},...e):null,s)}destroy(){this._focusAbortController.abort(),this._transitionInfo?.transition.skipTransition()}_renderActions(){return null}loadDependencies(){return (0,componentsUtils/* loadCalciteComponents */.W)({button:()=>__webpack_require__.e(/* import() */ 42817).then(__webpack_require__.bind(__webpack_require__, 42817)),icon:()=>__webpack_require__.e(/* import() */ 96446).then(__webpack_require__.bind(__webpack_require__, 96446)),input:()=>__webpack_require__.e(/* import() */ 7311).then(__webpack_require__.bind(__webpack_require__, 7311))})}async enterInputMode(t,e){try{await this._transitionTo("input",e),await this._focusField(t)}catch(o){(0,promiseUtils/* throwIfNotAbortError */.jH)(o)}}async exitInputMode({focusOnView:t=!0}={}){try{const{container:e,info:o}=this;o.clearInputValues();const s=t?e?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;await this._transitionTo("feedback"),s instanceof HTMLElement&&s.focus()}catch(e){(0,promiseUtils/* throwIfNotAbortError */.jH)(e)}}_onNextKey(t){const e=this._getFocusableElements(),o=e.at(0),s=e.at(-1);o&&s&&(t.shiftKey?document.activeElement===o&&(t.preventDefault(),t.stopPropagation(),L(s)):document.activeElement===s&&(t.preventDefault(),t.stopPropagation(),L(o)))}get _renderedContent(){return N(this._renderContent())}get _renderedActions(){return N(this._renderActions())}get _renderedHelpMessage(){const{sketchOptions:t,visibleElements:e}=this.info;if(!e.helpMessage)return null;const o=t.tooltips.helpMessage??this._defaultHelpMessage;if(!o)return null;const s=t.tooltips.helpMessageIcon??"information";return (0,jsxFactory/* tsx */.K)("div",{class:$,key:"help-message"},s?(0,jsxFactory/* tsx */.K)("calcite-icon",{class:h,icon:s,scale:"s"}):null,(0,jsxFactory/* tsx */.K)("div",{class:r},o))}get _defaultHelpMessage(){const{helpMessage:t,viewType:e}=this.info;if(null==t)return null;const o="3d"===e?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[o]?.[t]}async _focusField(t){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;const{signal:e}=this._focusAbortController;await this._waitForInputs(),(0,promiseUtils/* throwIfAborted */.Te)(e);const o=this._getFocusableInputs(),s=t?o.find((e=>e.getAttribute("data-field-name")===t)):o.at(0);await L(s)}async _transitionTo(t,o){if(this._mode===t&&!this._transitionInfo)return;if(this._transitionInfo?.mode===t)return this._transitionInfo.transition.finished;this._transitionInfo?.transition.skipTransition();const s=async()=>{this.destroyed||(this._mode=t,await (0,scheduling/* waitTick */.NO)(),this.destroyed||(this.renderNow(),await (0,scheduling/* waitTick */.NO)(),this.destroyed||o?.()))};if(!this.domNode?.firstChild||!document.startViewTransition||(0,a11yUtils/* prefersReducedMotion */.O)())return void await s();this.autoRenderingEnabled=!1;const i=this._transitionInfo={transition:document.startViewTransition((async()=>{this.destroyed||i!==this._transitionInfo||(this.autoRenderingEnabled=!0,await s())})),mode:t};try{await i.transition.finished}finally{i===this._transitionInfo&&(this._transitionInfo=null)}}async _waitForInputs(){const t=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;0===t().length;)await (0,promiseUtils/* after */.Pl)(O);await (0,scheduling/* waitAnimationFrame */.$m)()}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){const t=this.domNode?.querySelector(`.${s}`);return[...Array.from(t?.querySelectorAll(`.${css_o} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};async function L(t){await(t?.setFocus())}function N(t){return(Array.isArray(t)?t:[t]).flat(10).filter((t=>!!t))}(0,tslib_es6._)([(0,messageBundle/* messageBundle */.G)("esri/core/t9n/Units"),(0,property/* property */.MZ)()],S.prototype,"_messagesUnits",void 0),(0,tslib_es6._)([(0,messageBundle/* messageBundle */.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,property/* property */.MZ)()],S.prototype,"_messagesTooltip",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"info",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"tooltip",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_mode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"mode",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_displayUnits",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_inputUnitInfos",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_formatters",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"fieldContext",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_renderedContent",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_renderedActions",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_renderedHelpMessage",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],S.prototype,"_defaultHelpMessage",null),S=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContent")],S);const O=20;

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawCircle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=class extends S{_renderContent(){const{area:t,radius:e,xSize:s,ySize:n,visibleElements:a}=this.info,p=this._messagesTooltip.sketch,m=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,a.radius&&null!=e?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:p.radius,value:m.length(e)}):null,a.size&&null!=s&&null!=n?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:p.size,value:(0,jsxFactory/* tsx */.K)(ValueByValue_a,{left:m.length(s),right:m.length(n)})}):null,a.area?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:p.area,value:m.area(t)}):null)}};n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/components/TooltipEditableField.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TooltipEditableField_p=`${e}-editable-field`,TooltipEditableField_d={base:TooltipEditableField_p,inputMode:`${TooltipEditableField_p}--input`,feedbackMode:`${TooltipEditableField_p}--feedback`,readOnly:`${TooltipEditableField_p}--read-only`,locked:`${TooltipEditableField_p}--locked`,title:`${TooltipEditableField_p}__title`,value:`${TooltipEditableField_p}__value`,valueContent:`${TooltipEditableField_p}__value__content`,valueContentReadOnly:`${TooltipEditableField_p}__value__content--read-only`,lockIcon:`${TooltipEditableField_p}__lock-icon`,input:`${TooltipEditableField_p}__input`,inputWrapper:`${TooltipEditableField_p}__input-wrapper`,inputMessage:`${TooltipEditableField_p}__input-message`,inputSuffix:`${TooltipEditableField_p}__input-suffix`,button:`${TooltipEditableField_p}__button`},TooltipEditableField_h={lock:"lock",unlock:"unlock"};let TooltipEditableField_=class extends Widget/* default */.A{constructor(){super(...arguments),this._input=null,this._lock=null,this._onLockClick=()=>{this.field.toggleLock(this.context)},this._onLockAfterCreate=t=>{this._lock=t},this._onLockAfterRemoved=()=>{this._lock=null},this._onKeyDown=t=>{t.key===keybindings/* tooltipKeys */.ac.discard&&"input"===this.mode&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=t=>{const e=this._input;if(e)switch(t.key){case keybindings/* tooltipKeys */.ac.commit:return this.field.onCommit("commit-and-exit",e,this.context);case keybindings/* tooltipKeys */.ac.next:{t.preventDefault(),t.stopPropagation();const i=t.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(i,e,this.context)}}},this._onInput=t=>{this.field.onInput(t.currentTarget.value)},this._onInputBlur=t=>{const e=this._input;e&&t.relatedTarget!==this._lock&&this.field.onCommit("commit-on-blur",e,this.context)},this._selectText=()=>{const t=()=>{this._input===document.activeElement&&this._input?.selectText()};t(),(0,scheduling/* waitAnimationFrame */.$m)().then(t)},this._onAfterCreate=t=>{this._input=t,t.addEventListener("paste",this._onPaste),t.addEventListener("beforeinput",this._onBeforeInput)},this._onAfterRemoved=t=>{t.removeEventListener("paste",this._onPaste),t.removeEventListener("beforeinput",this._onBeforeInput)},this._onPaste=t=>{const e=t.clipboardData?.getData("text");if(!e)return;null!=this.field.parse(e,this.context)&&(t.stopPropagation(),this.field.onInput(e))},this._onBeforeInput=t=>{("historyUndo"===t.inputType||"historyRedo"===t.inputType)&&!this.field.dirty&&t.preventDefault()}}initialize(){this.addHandles((0,reactiveUtils/* watch */.wB)((()=>this._rawDisplayValue),(()=>{const{committed:t,inputValue:e}=this.field;t||e||this._input!==document.activeElement||this._selectText()})))}loadDependencies(){return (0,componentsUtils/* loadCalciteComponents */.W)({button:()=>__webpack_require__.e(/* import() */ 42817).then(__webpack_require__.bind(__webpack_require__, 42817)),icon:()=>__webpack_require__.e(/* import() */ 96446).then(__webpack_require__.bind(__webpack_require__, 96446)),input:()=>__webpack_require__.e(/* import() */ 7311).then(__webpack_require__.bind(__webpack_require__, 7311)),"input-message":()=>__webpack_require__.e(/* import() */ 45177).then(__webpack_require__.bind(__webpack_require__, 45177))})}render(){const{field:t,mode:e}=this,i="input"===e,{locked:o,readOnly:n}=t;return (0,jsxFactory/* tsx */.K)("div",{class:this.classes({[TooltipEditableField_d.base]:!0,[TooltipEditableField_d.feedbackMode]:"feedback"===e,[TooltipEditableField_d.inputMode]:"input"===e,[TooltipEditableField_d.locked]:o,[TooltipEditableField_d.readOnly]:n})},(0,jsxFactory/* tsx */.K)("div",{class:TooltipEditableField_d.title,key:"title"},this._title),(0,jsxFactory/* tsx */.K)("div",{class:TooltipEditableField_d.value,key:"value",onkeydown:this._onKeyDown},i?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||m}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){const{title:t}=this.field;return"string"==typeof t?t:t(this.context)}get _messages(){return this.context?.messages.sketch??{}}_renderValueFeedbackMode(){return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,(0,jsxFactory/* tsx */.K)("div",{class:TooltipEditableField_d.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&"input"!==this.mode?(0,jsxFactory/* tsx */.K)("calcite-icon",{class:TooltipEditableField_d.lockIcon,icon:TooltipEditableField_h.lock,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return (0,jsxFactory/* tsx */.K)("div",{class:this.classes(TooltipEditableField_d.valueContent,TooltipEditableField_d.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){const{field:t}=this,e=this._messages,{name:i,invalid:o}=t;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,(0,jsxFactory/* tsx */.K)("div",{class:TooltipEditableField_d.inputWrapper,key:"value-input"},(0,jsxFactory/* tsx */.K)("calcite-input",{afterCreate:this._onAfterCreate,afterRemoved:this._onAfterRemoved,class:TooltipEditableField_d.input,"data-field-name":i,"data-testid":`tooltip-field-${i}`,key:"input",onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:o?"invalid":"idle",type:"text",value:this._rawDisplayValue??m,onCalciteInputInput:this._onInput}),o?(0,jsxFactory/* tsx */.K)("calcite-input-message",{class:TooltipEditableField_d.inputMessage,scale:"s",status:"invalid"},e.invalidValue):null),(0,jsxFactory/* tsx */.K)("div",{class:TooltipEditableField_d.inputSuffix,key:"suffix"},this._suffix),this._renderedLockButton)}get _renderedLockButton(){const{name:t,locked:e,lockable:i}=this.field;if(!i)return (0,jsxFactory/* tsx */.K)("div",{key:"no-lock-button"});const o=this._messages,n=e?o.unlockConstraint:o.lockConstraint;return (0,jsxFactory/* tsx */.K)("calcite-button",{afterCreate:this._onLockAfterCreate,afterRemoved:this._onLockAfterRemoved,alignment:"center",appearance:"transparent",class:TooltipEditableField_d.button,"data-testid":`tooltip-field-${t}-lock`,iconStart:e?TooltipEditableField_h.lock:TooltipEditableField_h.unlock,key:"lock-button",kind:"neutral",label:n,onclick:this._onLockClick,scale:"s",tabIndex:-1,title:n})}};(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"field",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"context",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"mode",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_input",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_lock",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_formattedValue",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_rawDisplayValue",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_suffix",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_title",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_messages",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],TooltipEditableField_.prototype,"_renderedLockButton",null),TooltipEditableField_=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.components.TooltipEditableField")],TooltipEditableField_);const m="";

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/Fields.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function Fields_i(i){const l=i.fields.filter((t=>!0===t?.visible));return 0===l.length?null:(0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,l.map((e=>(0,jsxFactory/* tsx */.K)(TooltipEditableField_,{context:i.context,field:e,key:e.id,mode:i.mode}))))}

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawMesh.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentDrawMesh_s=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:i}=this,{visibleElements:s}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0,s.elevation?t.elevation:void 0,s.orientation?t.orientation:void 0,s.scale?t.scale:void 0],mode:i})}};TooltipContentDrawMesh_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],TooltipContentDrawMesh_s);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawPoint.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:r}=this,{elevation:i,visibleElements:n}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[n.coordinates?t.effectiveX:void 0,n.coordinates?t.effectiveY:void 0,n.elevation?i:void 0],mode:r})}};i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],i);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/interactive/tooltip/components/directionModeIcons.js
var directionModeIcons = __webpack_require__(96088);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/components/DrawHeaderActions.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let DrawHeaderActions_p=class extends Widget/* default */.A{constructor(e){super(e),this.visibleElements={}}render(){return (0,jsxFactory/* tsx */.K)("div",{class:s},this._isElementVisible("direction")?(0,jsxFactory/* tsx */.K)(l,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return (0,componentsUtils/* loadCalciteComponents */.W)({button:()=>__webpack_require__.e(/* import() */ 42817).then(__webpack_require__.bind(__webpack_require__, 42817)),dropdown:()=>__webpack_require__.e(/* import() */ 13406).then(__webpack_require__.bind(__webpack_require__, 13406)),"dropdown-item":()=>__webpack_require__.e(/* import() */ 44490).then(__webpack_require__.bind(__webpack_require__, 44490)),"dropdown-group":()=>__webpack_require__.e(/* import() */ 16792).then(__webpack_require__.bind(__webpack_require__, 16792))})}_isElementVisible(e){return this.visibleElements?.[e]??this.sketchOptions.tooltips.visibleElements[e]}};function l(e){const{directionMode:t}=e.sketchOptions.values,o=e.messages?.sketch,s=o?.directionModeSelect?.title,r="absolute",c="relative";return (0,jsxFactory/* tsx */.K)("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:t=>{const o=t.currentTarget.selectedItems?.[0]?.getAttribute("data-mode");e.sketchOptions.values.directionMode=o??"absolute"}},(0,jsxFactory/* tsx */.K)("calcite-button",{alignment:"end",appearance:"transparent",iconStart:directionModeIcons/* directionModeIcons */.N[t],kind:"neutral",label:s,scale:"s",slot:"trigger",title:s}),(0,jsxFactory/* tsx */.K)("calcite-dropdown-group",{selectionMode:"single"},(0,jsxFactory/* tsx */.K)("calcite-dropdown-item",{"data-mode":c,"data-testid":"tooltip-direction-mode-relative",iconStart:directionModeIcons/* directionModeIcons */.N.relative,key:"relative",selected:t===c},o?.directionModeSelect?.relative),(0,jsxFactory/* tsx */.K)("calcite-dropdown-item",{"data-mode":r,"data-testid":"tooltip-direction-mode-absolute",iconStart:directionModeIcons/* directionModeIcons */.N.absolute,key:"absolute",selected:t===r},o?.directionModeSelect?.absolute)))}(0,tslib_es6._)([(0,messageBundle/* messageBundle */.G)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,property/* property */.MZ)()],DrawHeaderActions_p.prototype,"messages",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawHeaderActions_p.prototype,"sketchOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],DrawHeaderActions_p.prototype,"visibleElements",void 0),DrawHeaderActions_p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.components.DrawHeaderActions")],DrawHeaderActions_p);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawPolygon.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentDrawPolygon_n=class extends S{_renderContent(){const{fieldContext:o,info:e,mode:t}=this,{xyMode:r,visibleElements:n}=e;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[..."direction-distance"===r?[n.direction?e.direction:void 0,n.distance?e.distance:void 0]:[n.coordinates?e.effectiveX:void 0,n.coordinates?e.effectiveY:void 0],n.elevation?e.elevation:void 0,n.area?e.area:void 0],mode:t})}_renderActions(){const{xyMode:o,sketchOptions:e}=this.info;return (0,jsxFactory/* tsx */.K)(DrawHeaderActions_p,{sketchOptions:e,visibleElements:{direction:"direction-distance"===o}})}};TooltipContentDrawPolygon_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],TooltipContentDrawPolygon_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawPolyline.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentDrawPolyline_n=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:e}=this,{xyMode:s,visibleElements:n}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[..."direction-distance"===s?[n.direction?t.direction:void 0,n.distance?t.distance:void 0]:[n.coordinates?t.effectiveX:void 0,n.coordinates?t.effectiveY:void 0],n.elevation?t.elevation:void 0,n.totalLength?t.totalLength:void 0],mode:e})}_renderActions(){const{xyMode:o,sketchOptions:t}=this.info;return (0,jsxFactory/* tsx */.K)(DrawHeaderActions_p,{sketchOptions:t,visibleElements:{direction:"direction-distance"===o}})}};TooltipContentDrawPolyline_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],TooltipContentDrawPolyline_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentDrawRectangle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentDrawRectangle_n=class extends S{_renderContent(){const{area:t,xSize:e,ySize:s,visibleElements:n}=this.info,a=this._messagesTooltip.sketch,p=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,n.size&&null!=e&&null!=s?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.size,value:(0,jsxFactory/* tsx */.K)(ValueByValue_a,{left:p.length(e),right:p.length(s)})}):null,n.area?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.area,value:p.area(t)}):null)}};TooltipContentDrawRectangle_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],TooltipContentDrawRectangle_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentExtentRotate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentExtentRotate_n=class extends S{_renderContent(){const{angle:t,visibleElements:o}=this.info,s=this._messagesTooltip.sketch;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,o.rotation?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:s.rotation,value:this._formatters.angleRelative(t)}):null)}};TooltipContentExtentRotate_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],TooltipContentExtentRotate_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentExtentScale.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentExtentScale_n=class extends S{_renderContent(){const t=this.info,{visibleElements:e}=t,r=this._messagesTooltip.sketch,n=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,e.size?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:r.size,value:(0,jsxFactory/* tsx */.K)(ValueByValue_a,{left:n.length(t.xSize),right:n.length(t.ySize)})}):null,e.scale?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:r.scale,value:(0,jsxFactory/* tsx */.K)(ValueByValue_a,{left:n.scale(t.xScale),right:n.scale(t.yScale)})}):null)}};TooltipContentExtentScale_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],TooltipContentExtentScale_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentMovePoint.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentMovePoint_i=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:r}=this,{visibleElements:i}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[i.coordinates?t.effectiveX:void 0,i.coordinates?t.effectiveY:void 0,i.elevation?t.elevation:void 0],mode:r})}};TooltipContentMovePoint_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],TooltipContentMovePoint_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentReshapeEdgeOffset.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentReshapeEdgeOffset_i=class extends S{_renderContent(){const{fieldContext:t,info:o,mode:s}=this,{visibleElements:i}=o;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:t,fields:[i.distance?o.distance:void 0,i.area?o.area:void 0,i.totalLength?o.totalLength:void 0],mode:s})}};TooltipContentReshapeEdgeOffset_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],TooltipContentReshapeEdgeOffset_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentSelectedVertex.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentSelectedVertex_i=class extends S{_renderContent(){const{fieldContext:e,info:o,mode:r}=this,{visibleElements:i}=o;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:e,fields:[i.coordinates?o.effectiveX:void 0,i.coordinates?o.effectiveY:void 0,i.elevation?o.elevation:void 0,i.area&&"polygon"===o.geometryType?o.area:null,i.totalLength&&"polyline"===o.geometryType?o.totalLength:null],mode:r})}};TooltipContentSelectedVertex_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],TooltipContentSelectedVertex_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTransformMesh.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTransformMesh_s=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:i}=this,{visibleElements:s}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0,s.elevation?t.elevation:void 0,s.orientation?t.orientation:void 0,s.scale?t.scale:void 0],mode:i})}};TooltipContentTransformMesh_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],TooltipContentTransformMesh_s);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTransformPoint.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTransformPoint_s=class extends S{_renderContent(){const{fieldContext:o,info:t,mode:i}=this,{visibleElements:s}=t;return (0,jsxFactory/* tsx */.K)(Fields_i,{context:o,fields:[s.coordinates?t.effectiveX:void 0,s.coordinates?t.effectiveY:void 0,s.elevation?t.elevation:void 0,s.orientation?t.orientation:void 0,s.size?t.size:void 0],mode:i})}};TooltipContentTransformPoint_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],TooltipContentTransformPoint_s);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTranslate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTranslate_n=class extends S{_renderContent(){const{info:t}=this,{visibleElements:o}=t,e=this._messagesTooltip.sketch,n=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,o.distance?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:e.distance,value:n.length(t.distance)}):null)}};TooltipContentTranslate_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTranslate")],TooltipContentTranslate_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTranslateVertex.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTranslateVertex_i=class extends S{_renderContent(){const{distance:t,elevation:e,area:l,totalLength:i,visibleElements:n}=this.info,a=this._messagesTooltip.sketch,c=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,n.distance?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.distance,value:c.length(t)}):null,n.elevation&&null!=e?.actual?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.elevation,value:c.verticalLength(e.actual)}):null,n.area&&null!=l?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.area,value:c.area(l)}):null,n.totalLength&&null!=i?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:a.totalLength,value:c.length(i)}):null)}};TooltipContentTranslateVertex_i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],TooltipContentTranslateVertex_i);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTranslateXY.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTranslateXY_n=class extends S{_renderContent(){const{info:t}=this,{visibleElements:o}=t,e=this._messagesTooltip.sketch,n=this._formatters;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,o.distance?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:e.distance,value:n.length(t.distance)}):null)}};TooltipContentTranslateXY_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],TooltipContentTranslateXY_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/TooltipContentTranslateZ.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TooltipContentTranslateZ_n=class extends S{_renderContent(){const{info:t}=this,{visibleElements:o}=t,e=this._messagesTooltip.sketch;return (0,jsxFactory/* tsx */.K)(jsxFactory/* tsxFragment */.w,null,o.distance?(0,jsxFactory/* tsx */.K)(TooltipField_a,{title:e.distance,value:this._formatters.verticalLengthRelative(t.distance)}):null)}};TooltipContentTranslateZ_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],TooltipContentTranslateZ_n);

;// ../node_modules/@arcgis/core/views/interactive/tooltip/content/tooltipContentFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function j(j,d){if(null==d)return null;const x=document.createElement("div");switch(d.type){case"draw-point":case"draw-multipoint":return new i({tooltip:j,info:d,container:x});case"draw-polygon":return new TooltipContentDrawPolygon_n({tooltip:j,info:d,container:x});case"draw-polyline":return new TooltipContentDrawPolyline_n({tooltip:j,info:d,container:x});case"draw-mesh":return new TooltipContentDrawMesh_s({tooltip:j,info:d,container:x});case"draw-rectangle":return new TooltipContentDrawRectangle_n({tooltip:j,info:d,container:x});case"draw-circle":return new n({tooltip:j,info:d,container:x});case"extent-rotate":return new TooltipContentExtentRotate_n({tooltip:j,info:d,container:x});case"extent-scale":return new TooltipContentExtentScale_n({tooltip:j,info:d,container:x});case"move-point":return new TooltipContentMovePoint_i({tooltip:j,info:d,container:x});case"selected-vertex":return new TooltipContentSelectedVertex_i({tooltip:j,info:d,container:x});case"transform-point":return new TooltipContentTransformPoint_s({tooltip:j,info:d,container:x});case"transform-mesh":return new TooltipContentTransformMesh_s({tooltip:j,info:d,container:x});case"translate":return new TooltipContentTranslate_n({tooltip:j,info:d,container:x});case"translate-vertex":return new TooltipContentTranslateVertex_i({tooltip:j,info:d,container:x});case"translate-z":return new TooltipContentTranslateZ_n({tooltip:j,info:d,container:x});case"translate-xy":return new TooltipContentTranslateXY_n({tooltip:j,info:d,container:x});case"reshape-edge-offset":return new TooltipContentReshapeEdgeOffset_i({tooltip:j,info:d,container:x})}}

;// ../node_modules/@arcgis/core/views/interactive/Tooltip.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const y={base:`${e}`,ltr:`${e}--ltr`,rtl:`${e}--rtl`,debug:`${e}--debug`},g=20,Tooltip_=16,C="bottom-end";let b=class extends Evented/* default */.A.EventedAccessor{constructor(t){super(t),this.info=null,this.options=null,this.position=null,this.content=null,this._focused=!1,this.outerContainer=document.createElement("div"),this.debug=!1,this._lastPosition=null,this._rtl=!1,this._prevXY=[0,0]}initialize(){const{outerContainer:t}=this;this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t),this._rtl=(0,widgetUtils/* isRTL */.V8)(e)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.info),((e,o)=>{if(null!=this.content&&null!=e&&null!=o&&e.type===o.type)this.content.info=e;else{(0,maybe/* destroyMaybe */.pR)(this.content);const o=j(this,e);o?(this.content=o,o.container&&t.appendChild(o.container),this.exitInputMode()):this.content=null}}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>({container:this.outerContainer,style:this._outerContainerStyle})),(({container:t,style:e})=>{Object.assign(t.style,e)}),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* watch */.wB)((()=>({outerContainer:this.outerContainer,placement:this.effectivePlacement,effectiveOffset:this._effectiveOffset,rtl:this._rtl,debug:this.debug})),(({outerContainer:t,placement:e,effectiveOffset:o,rtl:n,debug:i})=>{const{classList:s}=t;s.add(y.base),s.toggle(y.rtl,n),s.toggle(y.ltr,!n),s.toggle(y.debug,i),this.outerContainer.style.setProperty("--offset",`${o}px`),(0,modeUtils/* setCalciteModeClass */.Tu)(t),w(t,e)}),reactiveUtils/* initial */.Vh),(0,reactiveUtils/* when */.z7)((()=>"feedback"===this.mode),(()=>{this.position=null,this._clearOverride("effectivePlacement")}),reactiveUtils/* sync */.OH),(0,events.on)(this.outerContainer,"paste",(t=>{this.emit("paste",t)})),(0,events.on)(this.outerContainer,["focusin","focusout"],(()=>{this._focused=this.content?.container?.contains(document.activeElement)??!1}))])}destroy(){this.info=null,this.content=(0,maybe/* destroyMaybe */.pR)(this.content),this.outerContainer.remove()}get mode(){return this.content?.mode??"feedback"}get focused(){return this._focused}get visible(){return"none"!==this._outerContainerStyle.display}get contentContainer(){return this.content?.container}get effectivePlacement(){const t=this.options?.placement;return"auto"===t?"bottom-end":t??C}get _screenPoint(){const{inputManager:t}=this.view;return t?.multiTouchActive?null:t?.latestPointerLocation}get _effectiveOffset(){return this.options?.offset??g}get _outerContainerStyle(){const t=this.position??this._screenPoint;if(this._lastPosition=(0,screenUtils/* cloneScreenPoint */.y8)(t),null!=t&&null!=this.content){return{display:"block",transform:`translate(${Math.round(t.x)}px, ${Math.round(t.y)}px)`}}return{display:"none",transform:"none"}}clear(){this.info=null}async enterInputMode(t){const e=this.position??this._lastPosition??this._screenPoint,o=this.position=(0,screenUtils/* cloneScreenPoint */.y8)(e),{effectivePlacement:n}=this;this._override("effectivePlacement",n);const i=()=>{o&&(this.position=Tooltip_j(this.contentContainer,o,this._effectiveOffset,this.view),Object.assign(this.outerContainer.style,this._outerContainerStyle))};await(this.content?.enterInputMode(t,i))}async exitInputMode(t){await(this.content?.exitInputMode(t))}onDragStart(t,e){this._prevXY=[t,e]}onDrag(t,e){const o=t-this._prevXY[0],n=e-this._prevXY[1];this._prevXY=[t,e];const{position:i}=this;if(i){const{view:s}=this,r=t-s.position[0],c=e-s.position[1];if(r<0||r>s.width||c<0||c>s.height-Tooltip_)return;this.position=(0,screenUtils/* createScreenPoint */.tc)(i.x+o,i.y+n)}}onDragEnd(){this._prevXY=[0,0]}};function Tooltip_j(t,e,o,n){if(!t||!n.container)return e;const i=t.getBoundingClientRect(),{left:s,top:r}=n.container.getBoundingClientRect();let{x:c,y:l}=e;const a=i.left-s-o;a<0&&(c-=a);const u=i.right-s+o-n.width;u>0&&(c-=u);const h=i.top-r-o;h<0&&(l-=h);const f=i.bottom-r+o-n.height;return f>0&&(l-=f),(0,screenUtils/* createScreenPoint */.tc)(c,l)}(0,tslib_es6._)([(0,property/* property */.MZ)({nonNullable:!0})],b.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"info",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"options",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"position",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"content",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],b.prototype,"mode",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_focused",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],b.prototype,"focused",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],b.prototype,"outerContainer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],b.prototype,"contentContainer",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],b.prototype,"effectivePlacement",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"debug",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_lastPosition",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_screenPoint",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_rtl",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_effectiveOffset",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],b.prototype,"_outerContainerStyle",null),b=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.interactive.Tooltip")],b);const P=["top","bottom","leading","trailing"].flatMap((t=>[Tooltip_O(`${t}-start`),Tooltip_O(t),Tooltip_O(`${t}-end`)]));function Tooltip_O(t){return`${y.base}--${t}`}function w({classList:t},e){P.forEach((e=>t.remove(e))),t.add(Tooltip_O(e))}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/angularMeasurementUtils.js
var angularMeasurementUtils = __webpack_require__(52857);
;// ../node_modules/@arcgis/core/views/interactive/tooltip/tooltipCommonUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function R(t){const o=new b(t());return o.addHandles((0,reactiveUtils/* watch */.wB)((()=>t()),(({view:t,options:e,info:n})=>{o.view=t,void 0!==e&&(o.options=e),void 0!==n&&(o.info=n)}))),o}function V(t,o){const e=(0,meshVertexSpaceUtils/* isRelativeVertexSpace */.Hq)(o.vertexSpace),{scale:n,orientation:l}=t,{transform:a}=o,s=T(a);e&&null!=s?(l.actual=(0,quantityUtils/* createAngle */.Wq)(s,"degrees","arithmetic"),l.visible=!0):(l.actual=null,l.visible=!1),e?(n.actual=(0,quantityUtils/* createScalar */.LF)(G(a)),n.visible=!0):(n.actual=null,n.visible=!1)}function z(t,o,e){if(!o||!(0,meshVertexSpaceUtils/* isRelativeVertexSpace */.Hq)(o.vertexSpace))return;const n=o.transform??=new MeshTransform/* default */.A;D(t,n,e),tooltipCommonUtils_P(t,n,e)}function D(t,o,e){const n=(0,angularMeasurementUtils/* getDegreesArithmetic */.Ef)(t.orientation.actual),r=q(o.rotationAxis);if(null==n||null==r)return;const i=o.rotationAngle,l=n*r,a=(n-i)*r;i!==l&&(e?.onRotateStart(0),o.rotationAngle=l,e?.onRotate(a),e?.onRotateStop(a))}function tooltipCommonUtils_P(t,o,e){const n=t.scale.actual?.value,r=G(o);if(null==n||n===r)return;const{scale:i}=o;let l;if(0===r)l=(0,vec3f64/* clone */.o8)(vec3f64/* ONES */.Un);else{const t=n/r;l=(0,vec32.g)((0,vec3f64/* create */.vt)(),i,t)}e?.onScaleStart(i[0],i[1],i[2]),o.scale=l,e?.onScale(l[0],l[1],l[2]),e?.onScaleStop(l[0],l[1],l[2])}function F(t,o){const{x:e,y:r,z:i}=o,{x:l,y:a,z:s}=tooltipCommonUtils_E(t,o.spatialReference);return{dx:null==l||(0,mathUtils/* floatEqualUlp */.Io)(l,e)?0:l-e,dy:null==a||(0,mathUtils/* floatEqualUlp */.Io)(a,r)?0:a-r,dz:null==s||null==i||(0,mathUtils/* floatEqualUlp */.Io)(s,i)?0:s-i}}function tooltipCommonUtils_E(t,o){let e,n;t.geographic?(e=(0,angularMeasurementUtils/* getDegreesGeographic */.hF)(t.longitude.actual),n=(0,angularMeasurementUtils/* getDegreesGeographic */.hF)(t.latitude.actual),(0,spatialReferenceUtils/* isWebMercator */.K8)(o)&&(null!=e&&null!=n?[e,n]=(0,webMercatorUtils/* lngLatToXY */.je)(e,n,I):null!=e?e=(0,webMercatorUtils/* lngLatToXY */.je)(e,0,I)[0]:null!=n&&(n=(0,webMercatorUtils/* lngLatToXY */.je)(0,n,I)[1]))):(e=t.x.actual?.value,n=t.y.actual?.value);const r=t.elevation.actual,i=(0,unitUtils/* verticalLengthUnitFromSpatialReference */.mq)(o);return{x:e,y:n,z:null!=i&&null!=r?(0,quantityUtils/* valueInUnit */.l3)(r,i):void 0}}const I=[0,0];function T(t){if(!t)return 0;const o=q(t.rotationAxis);return null!=o?o*t.rotationAngle:null}function q(t){return (0,vec32.G)(t,vec3f64/* UNIT_Z */.Cb)?1:(0,vec32.G)(t,B)?-1:null}const B=(0,vec32.u)((0,vec3f64/* create */.vt)(),vec3f64/* UNIT_Z */.Cb);function G(t){return t?Math.max(...t.scale):1}function H(t,o){return!("key-down"!==t.type||t.key!==keybindings/* tooltipKeys */.ac.enterInputMode||!o||!tooltipCommonUtils_O(o.info))&&(o.enterInputMode(),t.preventDefault(),t.stopPropagation(),!0)}function tooltipCommonUtils_O(t){const o=t?.sketchOptions;if(!o)return!1;const{inputEnabled:e,visibleElements:n}=o.tooltips;return e&&!0===t.editableFields.some((({name:t})=>"x"===t||"y"===t?n.coordinates:n[t]))}function tooltipCommonUtils_C(n,r){let i=null;return (0,handleUtils/* handlesGroup */.vE)([n.on("paste",(async o=>{i?.abort(),i=(0,asyncUtils/* createTask */.UT)((async()=>{(0,coordinateFormatter/* isLoaded */.s1)()||await (0,coordinateFormatter/* load */.Hh)(),J(o,n.info,r)}))})),(0,asyncUtils/* createTask */.UT)((()=>(0,coordinateFormatter/* load */.Hh)())),(0,handleUtils/* makeHandle */.hA)((()=>i?.abort()))])}function J(t,o,e){if(!o||!("geographic"in o))return;const n=t.clipboardData?.getData("text");if(!n)return;const r=o=>{t.stopPropagation(),t.preventDefault(),e?.onBeforePaste(),o(),e?.onAfterPaste()};if(o.geographic){const t=(0,parsingAndFormattingUtils/* parseLatitudeLongitude */.X3)(n);t&&r((()=>{o.longitude.applyValue(t.longitude),o.latitude.applyValue(t.latitude)}))}else{const t=(0,parsingAndFormattingUtils/* parseXY */.Nr)(n);t&&r((()=>{o.x.applyValue(t.x),o.y.applyValue(t.y)}))}}


/***/ }),

/***/ 6447:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Color.js
var Color = __webpack_require__(96220);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/libs/maquette/projection.js
var projection = __webpack_require__(59078);
;// ../node_modules/@arcgis/core/libs/maquette/h.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let e=e=>({vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}),r=(t,o,n)=>{for(let l=0,i=o.length;l<i;l++){let i=o[l];Array.isArray(i)?r(t,i,n):null!=i&&!1!==i&&("string"==typeof i&&(i=e(i)),n.push(i))}};function t(e,t,o){if(Array.isArray(t))o=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||o&&("string"==typeof o||o.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let n,l;return o&&1===o.length&&"string"==typeof o[0]?n=o[0]:o&&(l=[],r(e,o,l),0===l.length&&(l=void 0)),{vnodeSelector:e,properties:t,children:l,text:""===n?void 0:n,domNode:null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/libs/maquette/projector.js
var projector = __webpack_require__(40067);
;// ../node_modules/@arcgis/core/views/overlay/TextOverlayItem.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let n=class extends Accessor/* default */.A{get position(){return[this.x,this.y]}set position(t){this._set("x",t[0]),this._set("y",t[1])}get _textShadowColor(){const{textColor:t,backgroundColor:e}=this,o=e.clone();return o.a*=t.a,o}get _textShadow(){const t=this._textShadowColor.toCss(!0);return`0 0 ${this._textShadowSize}px ${t}`}get padding(){return.5*this.fontSize}get borderRadius(){return this.padding}set borderRadius(t){this._overrideIfSome("borderRadius",t)}constructor(t){super(t),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new Color/* default */.A([0,0,0,.6]),this.textColor=new Color/* default */.A([255,255,255]),this._textShadowSize=1}render(){return t("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this.borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(t){if(!this.visible)return;const e=t.font.replace(/^(.*?)px/,"");t.font=`${this.fontSize}px ${e}`;const{padding:o,borderRadius:i}=this,r=t.measureText(this.text).width,s=""!==this.text?this.fontSize:0,l=h[this.anchor];t.textAlign="center",t.textBaseline="middle";const n=r+2*o,a=s+2*o,x=this.x+l.x*n,d=this.y+l.y*a;this._roundedRect(t,x,d,n,a,i),t.fillStyle=this.backgroundColor.toCss(!0),t.fill();const p=this.x+(l.x+.5)*n,c=this.y+(l.y+.5)*a;this._renderTextShadow(t,this.text,p,c),t.fillStyle=this.textColor.toCss(!0),t.fillText(this.text,p,c)}_renderTextShadow(t,e,o,i){t.lineJoin="miter",t.fillStyle=`rgba(${this._textShadowColor.r}, ${this._textShadowColor.g}, ${this._textShadowColor.b}, ${1/a.length})`;const r=this._textShadowSize;for(const[s,l]of a)t.fillText(e,o+r*s,i+r*l)}_roundedRect(t,e,o,i,r,s){s=Math.min(s,r/2,i/2),t.beginPath(),t.moveTo(e,o+s),t.arcTo(e,o,e+s,o,s),t.lineTo(e+i-s,o),t.arcTo(e+i,o,e+i,o+s,s),t.lineTo(e+i,o+r-s),t.arcTo(e+i,o+r,e+i-s,o+r,s),t.lineTo(e+s,o+r),t.arcTo(e,o+r,e,o+r-s,s),t.closePath()}_cssClasses(){const t={"esri-text-overlay-item":!0};let e;for(e in l)t[l[e]]=this.anchor===e;return t}};(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"x",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"y",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"position",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"text",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"fontSize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"anchor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"visible",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"isDecoration",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"backgroundColor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"textColor",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"_textShadowSize",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"_textShadowColor",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"_textShadow",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"padding",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"borderRadius",null),n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.overlay.TextOverlayItem")],n);const h={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},a=[];{const t=16;for(let e=0;e<360;e+=360/t)a.push([Math.cos(Math.PI*e/180),Math.sin(Math.PI*e/180)])}


/***/ }),

/***/ 41811:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(73569);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e({topLeft:e,topRight:n,bottomRight:o,bottomLeft:i,spatialReference:l,automaticLengthMeasurementUtils:{autoDistance2D:u}}){const r=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .max */ .T9)(u(i,o,l),u(e,n,l));if(null==r)return null;const a=(0,_core_quantityUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .max */ .T9)(u(o,n,l),u(i,e,l));return null==a?null:{xSize:r,ySize:a}}


/***/ }),

/***/ 89423:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony export tracer */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86942);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16541);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.webgl.BufferObject"),c=null;class E{static createIndex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER,e,i)}static createVertex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER,e,i)}static createUniform(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.UNIFORM_BUFFER,e,i)}static createPixelPack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER,e);return i&&s.setSize(i),s}static createPixelUnpack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_DRAW,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_UNPACK_BUFFER,e,i)}static createTransformFeedback(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STATIC_DRAW,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e);return s.setSize(i),s}constructor(t,e,i,s){this._context=t,this.bufferType=e,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(this._context.gl),s&&this.setData(s)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._context=null}else this._glName&&h().warn("Leaked WebGL buffer object")}setSize(t,e=null){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&null!=e)switch(this._indexType=e,e){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT:t*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT:t*=4}this._setBufferData(t)}setData(t){if(!t)return;let e=t.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint8Array */ .mg)(t)?this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE:(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint16Array */ .jq)(t)?(e/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint32Array */ .XJ)(t)&&(e/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)),this._setBufferData(e,t)}_setBufferData(t,e=null){this._size=t;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;null!=e?s.bufferData(this.bufferType,e,this.usage):s.bufferData(this.bufferType,t,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}setSubData(t,e,i,s){if(!t)return;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:_}=this._context;_.bufferSubData(this.bufferType,e*t.BYTES_PER_ELEMENT,t,i,s-i),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(_),this._isVAOAware&&this._context.bindVAO(r)}getSubData(t,e=0,i,s){if(i<0||s<0)return;const r=o(t)?t.BYTES_PER_ELEMENT:1;if(r*((i??0)+(s??0))>t.byteLength)return;e+r*(s??0)>this.usedMemory&&h().warn("Potential problem getting subdata: requested data exceeds buffer size!");const n=this._context.gl;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER))}async getSubDataAsync(t,e=0,i,s){await this._context.clientWaitAsync(),this.getSubData(t,e,i,s)}}function o(e){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isArrayLike */ .Xj)(e)}


/***/ }),

/***/ 22005:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony export noParameters */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{}const c=s,e=new c;


/***/ }),

/***/ 96028:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N5: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports Code, Includes, Main, Stage, Uniforms */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _BindType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11809);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class i extends s{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new h,this.varyings=new m,this.extensions=new _,this.outputs=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e,t=!1){const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),s=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,o=i.uniforms.generateSource(),a=i.code.generateSource(),u=i.main.generateSource(t),c="vertex"===e?g:p,h=i.constants.generateSource(),m=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${h.join("\n")}\n${o.join("\n")}\n${n.join("\n")}\n${s.join("\n")}\n${m.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return t=>{for(let r=0;r<s;++r)n[r](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,i,t,r)}}}class o{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const t of e)this._add(t);return this._stage}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:duplicate-uniform",`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else n().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((({name:e,arraySize:t,type:r})=>null!=t?`uniform ${r} ${e}[${t}];`:`uniform ${r} ${e};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:missing-main","Shader does not contain main function body.");return[]}}class u{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class c extends s{constructor(){super(...arguments),this.uniforms=new o(this),this.main=new a(this),this.code=new u(this),this.constants=new l(this)}get builder(){return this}}class h{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Map}add(e,t,r){this._entries.has(e)?n().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,{type:t,invariant:r?.invariant??!1})}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push((r.invariant&&"vertex"===e?"invariant ":"")+("vertex"===e?"out":"in")+` ${r.type} ${n};`))),t}}class _{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}static{this.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"]}static{this.ALLOWLIST_VERTEX=[]}}class d{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?.name!==e||s?.type!==t?this._entries.set(r,{name:e,type:t}):n().warn(`Fragment shader output location ${r} occupied`)}static{this.DEFAULT_TYPE="vec4"}static{this.DEFAULT_NAME="fragColor"}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:d.DEFAULT_NAME,type:d.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}class l{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=l._numberToFloatStr(r);break;case"int":n=l._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])},                            ${l._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"uvec2":n=`uvec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"uvec3":n=`uvec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"uvec4":n=`uvec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>l._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const p="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n  precision highp usampler2D;\n  precision highp sampler2DArray;\n  precision highp sampler2DShadow;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n  precision mediump usampler2D;\n  precision mediump sampler2DArray;\n  precision mediump sampler2DShadow;\n#endif",g="precision highp float;\n precision highp sampler2D;\n precision highp usampler2D;\n precision highp sampler2DArray;\n precision highp sampler2DShadow;\n\n\n invariant gl_Position;\n ";


/***/ }),

/***/ 80976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4754);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.webgl.VertexArrayObject");let o=class{constructor(e,t,i,r,s=null){this._context=e,this._locations=t,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}getByteLength(e){return this._buffers.get(e)?.usedMemory??0}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),this._indexBuffer?.usedMemory??0+(this._buffers.size+(this._indexBuffer?1:0))*_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseTypedArrayMemory */ .i5)}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .disposeMaybe */ .WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&n().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||n().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,i)=>{const r=t.get(i);r?(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .bindVertexBufferLayout */ .yu)(this._context,this._locations,e,r):n().error("Vertex element descriptor is empty!")})),null!=i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}};


/***/ }),

/***/ 76698:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Zo: () => (/* binding */ o),
/* harmony export */   jA: () => (/* binding */ r),
/* harmony export */   jS: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export decodeDoubleArray */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t,n,o){for(let r=0;r<o;++r)n[2*r]=t[r],n[2*r+1]=t[r]-n[2*r]}function n(t,n,o){for(let r=0;r<o;++r)n[r]=t[2*r]+t[2*r+1]}function o(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],n[r]=e[0];return n}function r(t,n){const o=t.length;for(let r=0;r<o;++r)e[0]=t[r],e[1]=t[r]-e[0],n[r]=e[1];return n}const e=new Float32Array(2);


/***/ }),

/***/ 2449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ey: () => (/* binding */ B),
/* harmony export */   Ms: () => (/* binding */ Q),
/* harmony export */   RC: () => (/* binding */ o),
/* harmony export */   T8: () => (/* binding */ c),
/* harmony export */   Uy: () => (/* binding */ p),
/* harmony export */   Xt: () => (/* binding */ f),
/* harmony export */   hG: () => (/* binding */ u),
/* harmony export */   iD: () => (/* binding */ a),
/* harmony export */   kn: () => (/* binding */ g),
/* harmony export */   p3: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports add, backFaceCullingParams, copySource, makeBlending, makeColorWrite, makeCulling, makeDepthTest, makeDepthWrite, makeDrawBuffers, makePolygonOffset, makeStencilTest, makeStencilWrite, simpleBlendingParams */
/* harmony import */ var _3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(91013);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function l(t,e,i=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,s=[0,0,0,0]){return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:s[0],g:s[1],b:s[2],a:s[3]}}}function r(t,e,i,s,l=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,r=_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendOperation */ .Tb.ADD,a=[0,0,0,0]){return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:s,opRgb:l,opAlpha:r,color:{r:a[0],g:a[1],b:a[2],a:a[3]}}}const a=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ZERO,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),_=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ZERO),h=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE),o=l(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),c=r(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.SRC_ALPHA,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),d={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.BACK,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},u={face:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Face */ .Y7.FRONT,mode:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CullMode */ .Ac.CCW},f=e=>e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Back?d:e===_3d_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__/* .CullFaceOptions */ .s2.Front?u:null,p={zNear:0,zFar:1},g={r:!0,g:!0,b:!0,a:!0};function v(t){return R.intern(t)}function I(t){return N.intern(t)}function S(t){return P.intern(t)}function W(t){return k.intern(t)}function b(t){return F.intern(t)}function T(t){return L.intern(t)}function w(t){return U.intern(t)}function O(t){return K.intern(t)}function A(t){return x.intern(t)}function B(t){return G.intern(t)}class D{constructor(t,e){this._makeKey=t,this._makeRef=e,this._interns=new Map}intern(t){if(!t)return null;const e=this._makeKey(t),i=this._interns;return i.has(e)||i.set(e,this._makeRef(t)),i.get(e)??null}}function C(t){return"["+t.join(",")+"]"}const R=new D(y,(t=>({__tag:"Blending",...t})));function y(t){return t?C([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const N=new D(m,(t=>({__tag:"Culling",...t})));function m(t){return t?C([t.face,t.mode]):null}const P=new D(E,(t=>({__tag:"PolygonOffset",...t})));function E(t){return t?C([t.factor,t.units]):null}const k=new D(z,(t=>({__tag:"DepthTest",...t})));function z(t){return t?C([t.func]):null}const F=new D(H,(t=>({__tag:"StencilTest",...t})));function H(t){return t?C([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const L=new D(M,(t=>({__tag:"DepthWrite",...t})));function M(t){return t?C([t.zNear,t.zFar]):null}const U=new D(j,(t=>({__tag:"ColorWrite",...t})));function j(t){return t?C([t.r,t.g,t.b,t.a]):null}const K=new D(Z,(t=>({__tag:"StencilWrite",...t})));function Z(t){return t?C([t.mask]):null}const x=new D(q,(t=>({__tag:"DrawBuffers",...t})));function q(t){return t?C(t.buffers):null}const G=new D(J,(t=>({blending:v(t.blending),culling:I(t.culling),polygonOffset:S(t.polygonOffset),depthTest:W(t.depthTest),stencilTest:b(t.stencilTest),depthWrite:T(t.depthWrite),colorWrite:w(t.colorWrite),stencilWrite:O(t.stencilWrite),drawBuffers:A(t.drawBuffers)})));function J(t){return t?C([y(t.blending),m(t.culling),E(t.polygonOffset),z(t.depthTest),H(t.stencilTest),M(t.depthWrite),j(t.colorWrite),Z(t.stencilWrite),q(t.drawBuffers)]):null}class Q{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._setDrawBuffers(t.drawBuffers),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(t){this._drawBuffers=this._setSubState(t,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(t,e,i,n){return(i||t!==e)&&(n(t),this._pipelineInvalid=!0),t}}


/***/ }),

/***/ 63199:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=1/255.5;


/***/ })

};
;