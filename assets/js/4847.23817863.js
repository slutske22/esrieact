"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4847],{31828:(e,t,i)=>{i.d(t,{A:()=>d});var r=i(66866),s=i(21564),a=(i(73446),i(85569),i(39831),i(63863)),l=i(8651),n=i(68833),o=i(15305),h=i(25389),p=i(91394),c=i(60973);let y=class extends((0,o.d)((0,h.j)(n.A))){constructor(e){super(e),this.elevationInfo=null,this.graphics=new p.Y,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};(0,r._)([(0,s.MZ)({type:c.A})],y.prototype,"elevationInfo",void 0),(0,r._)([(0,s.MZ)((0,l.C)(p.Y,"graphics"))],y.prototype,"graphics",void 0),(0,r._)([(0,s.MZ)({type:["show","hide"]})],y.prototype,"listMode",void 0),(0,r._)([(0,s.MZ)()],y.prototype,"screenSizePerspectiveEnabled",void 0),(0,r._)([(0,s.MZ)({readOnly:!0})],y.prototype,"type",void 0),(0,r._)([(0,s.MZ)({constructOnly:!0})],y.prototype,"internal",void 0),y=(0,r._)([(0,a.$)("esri.layers.GraphicsLayer")],y);const d=y},44847:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var r=i(66866),s=i(96220),a=i(25707),l=i(6267),n=i(85251),o=i(21564),h=(i(73446),i(85569),i(39831),i(63863)),p=i(31828),c=i(24793),y=i(21877);let d=class extends((0,c.O)(y.oY)){constructor(e){super(e),this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};(0,r._)([(0,o.MZ)({type:Boolean})],d.prototype,"frameCenter",void 0),(0,r._)([(0,o.MZ)({type:Boolean})],d.prototype,"frameOutline",void 0),(0,r._)([(0,o.MZ)({type:Boolean})],d.prototype,"lineOfSight",void 0),(0,r._)([(0,o.MZ)({type:Boolean})],d.prototype,"sensorLocation",void 0),(0,r._)([(0,o.MZ)({type:Boolean})],d.prototype,"sensorTrail",void 0),d=(0,r._)([(0,h.$)("esri.layers.support.TelemetryDisplay")],d);const m=d;var u=i(40231),_=i(13737),g=i(80734),f=i(9049);const v=new s.A([255,127,0]);let b=class extends((0,u.e)(f.A)){constructor(){super(...arguments),this._graphicsLayer=new p.A,this._frameOutlineGraphic=new a.A({symbol:{type:"simple-fill",outline:{type:"simple-line",color:v}}}),this._sensorTrailGraphic=new a.A({symbol:{type:"simple-line",color:v}}),this._lineOfSightGraphic=new a.A({symbol:{type:"simple-line",color:v}}),this._sensorLocationGraphic=new a.A({symbol:{type:"simple-marker",color:v}}),this._frameCenterGraphic=new a.A({symbol:{type:"simple-marker",color:v}}),this.layer=null,this.symbolColor=v,this.visibleTelemetryElements=null}destroy(){this._graphicsLayer=(0,l.pR)(this._graphicsLayer)}initialize(){this.addHandles((0,n.wB)((()=>this.symbolColor),(()=>{this._frameOutlineGraphic.symbol.outline.color=this.symbolColor,this._sensorTrailGraphic.symbol.color=this.symbolColor,this._lineOfSightGraphic.symbol.color=this.symbolColor,this._sensorLocationGraphic.symbol.color=this.symbolColor,this._frameCenterGraphic.symbol.color=this.symbolColor}),n.Vh)),this._graphicsLayer.graphics.addMany([this._frameOutlineGraphic,this._sensorTrailGraphic,this._lineOfSightGraphic,this._sensorLocationGraphic,this._frameCenterGraphic]),this.visibleTelemetryElements=new m({frameCenter:this.layer.telemetryDisplay?.frameCenter??!0,frameOutline:this.layer.telemetryDisplay?.frameOutline??!0,lineOfSight:this.layer.telemetryDisplay?.lineOfSight??!0,sensorLocation:this.layer.telemetryDisplay?.sensorLocation??!0,sensorTrail:this.layer.telemetryDisplay?.sensorTrail??!0})}attach(){this.graphicsView=new g.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this._graphicsLayer.graphics,container:new _.A(this.view.featuresTilingScheme)}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this._graphicsLayer.on("graphic-update",this.graphicsView.graphicUpdateHandler)),this.addAttachHandles([(0,n.wB)((()=>[this.layer.telemetryDisplay?.frameCenter,this.layer.telemetryDisplay?.frameOutline,this.layer.telemetryDisplay?.sensorLocation,this.layer.telemetryDisplay?.sensorTrail,this.layer.telemetryDisplay?.lineOfSight]),(()=>this._updateVisibleTelemetryElements()),n.Vh),(0,n.wB)((()=>[this.layer.telemetry,this.visibleTelemetryElements?.frameCenter,this.visibleTelemetryElements?.frameOutline,this.visibleTelemetryElements?.sensorLocation,this.visibleTelemetryElements?.sensorTrail,this.visibleTelemetryElements?.lineOfSight]),(()=>this._updateGraphicGeometries()),n.Vh)])}detach(){this.container.removeAllChildren(),this.graphicsView=(0,l.pR)(this.graphicsView)}supportsSpatialReference(e){return!0}moveStart(){}moveEnd(){}viewChange(){this.graphicsView.viewChange()}update(e){this.graphicsView.processUpdate(e)}isUpdating(){return!this.graphicsView||this.graphicsView.updating}_updateVisibleTelemetryElements(){this.visibleTelemetryElements&&this.layer.telemetryDisplay&&(this.visibleTelemetryElements.frameCenter=this.layer.telemetryDisplay.frameCenter,this.visibleTelemetryElements.frameOutline=this.layer.telemetryDisplay.frameOutline,this.visibleTelemetryElements.lineOfSight=this.layer.telemetryDisplay.lineOfSight,this.visibleTelemetryElements.sensorLocation=this.layer.telemetryDisplay.sensorLocation,this.visibleTelemetryElements.sensorTrail=this.layer.telemetryDisplay.sensorTrail)}_updateGraphicGeometries(){const{telemetry:e}=this.layer,{visibleTelemetryElements:t}=this;e&&t&&(t.frameOutline&&e.frameOutline?this._frameOutlineGraphic.geometry=this.layer.telemetry.frameOutline:this._frameOutlineGraphic.geometry=null,t.sensorTrail&&e.sensorTrail?this._sensorTrailGraphic.geometry=this.layer.telemetry.sensorTrail:this._sensorTrailGraphic.geometry=null,t.lineOfSight&&e.lineOfSight?this._lineOfSightGraphic.geometry=this.layer.telemetry.lineOfSight:this._lineOfSightGraphic.geometry=null,t.sensorLocation&&e.sensorLocation?this._sensorLocationGraphic.geometry=this.layer.telemetry.sensorLocation:this._sensorLocationGraphic.geometry=null,t.frameCenter&&e.frameCenter?this._frameCenterGraphic.geometry=this.layer.telemetry.frameCenter:this._frameCenterGraphic.geometry=null)}};(0,r._)([(0,o.MZ)()],b.prototype,"graphicsView",void 0),(0,r._)([(0,o.MZ)()],b.prototype,"layer",void 0),(0,r._)([(0,o.MZ)()],b.prototype,"symbolColor",void 0),(0,r._)([(0,o.MZ)({type:m})],b.prototype,"visibleTelemetryElements",void 0),b=(0,r._)([(0,h.$)("esri.views.2d.layers.VideoLayerView2D")],b);const C=b},95387:(e,t,i)=>{i.d(t,{A:()=>f});var r=i(6267),s=i(42766),a=i(46615),l=i(21360),n=i(48325),o=i(80952),h=i(65231),p=i(37353),c=i(38403),y=i(89423),d=i(41746),m=i(80976);const u=Math.PI/180;class _ extends p.q{constructor(e){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,l.c)(),this._localOrigin={x:0,y:0},this._getBounds=e}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,r.WD)(this._program)}doRender(e){const{context:t}=e,i=this._getBounds();if(i.length<1)return;this._createShaderProgram(t),this._updateMatricesAndLocalOrigin(e),this._updateBufferData(t,i),t.setBlendingEnabled(!0),t.setDepthTestEnabled(!1),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1),t.setBlendFunction(d.dn.ONE,d.dn.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0);const r=this._program;t.bindVAO(this._vao),t.useProgram(r),r.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),t.gl.lineWidth(1),t.drawElements(d.WR.LINES,8*i.length,d.pe.UNSIGNED_INT,0),t.bindVAO()}_createTransforms(){return{dvs:(0,l.c)()}}_createShaderProgram(e){if(this._program)return;this._program=e.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",g().attributes)}_updateMatricesAndLocalOrigin(e){const{state:t}=e,{displayMat3:i,size:r,resolution:s,pixelRatio:l,rotation:p,viewpoint:c}=t,y=u*p,{x:d,y:m}=c.targetGeometry,_=(0,h.mT)(d,t.spatialReference);this._localOrigin.x=_,this._localOrigin.y=m;const g=l*r[0],f=l*r[1],v=s*g,b=s*f,C=(0,a.g)(this._dvsMat3);(0,a.m)(C,C,i),(0,a.h)(C,C,(0,n.f)(g/2,f/2)),(0,a.c)(C,C,(0,o.f)(r[0]/v,-f/b,1)),(0,a.r)(C,C,-y)}_updateBufferData(e,t){const{x:i,y:r}=this._localOrigin,s=8*t.length,a=new Float32Array(s),l=new Uint32Array(8*t.length);let n=0,o=0;for(const h of t)h&&(a[2*n]=h[0]-i,a[2*n+1]=h[1]-r,a[2*n+2]=h[0]-i,a[2*n+3]=h[3]-r,a[2*n+4]=h[2]-i,a[2*n+5]=h[3]-r,a[2*n+6]=h[2]-i,a[2*n+7]=h[1]-r,l[o]=n+0,l[o+1]=n+3,l[o+2]=n+3,l[o+3]=n+2,l[o+4]=n+2,l[o+5]=n+1,l[o+6]=n+1,l[o+7]=n+0,n+=4,o+=8);if(this._vertexBuffer?this._vertexBuffer.setData(a.buffer):this._vertexBuffer=y.g.createVertex(e,d._U.DYNAMIC_DRAW,a.buffer),this._indexBuffer?this._indexBuffer.setData(l):this._indexBuffer=y.g.createIndex(e,d._U.DYNAMIC_DRAW,l),!this._vao){const t=g();this._vao=new m.Z(e,t.attributes,t.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}const g=()=>(0,c.ES)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:d.pe.FLOAT}]});let f=class extends s.i{constructor(e){super(e),this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,r.pR)(this._boundsRenderer)}enableRenderingBounds(e){this._boundsRenderer=new _(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.patch(t),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}_renderChildren(e,t){for(const i of this.children)i.isReady&&i.hasData&&(i.commit(e),e.context.setStencilFunction(d.MT.EQUAL,i.stencilRef,255),i.getDisplayList().replay(e,i,t))}}},13737:(e,t,i)=>{i.d(t,{A:()=>a});var r=i(79432),s=i(95387);class a extends s.A{renderChildren(e){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(e.context,!1),super.renderChildren(e),e.drawPhase===r.S5.MAP&&this._renderChildren(e),this.hasHighlight&&e.drawPhase===r.S5.HIGHLIGHT&&this._renderHighlight(e),this._boundsRenderer&&this._boundsRenderer.doRender(e))}_renderHighlight(e){const{painter:t}=e,i=t.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}}}]);