"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5047],{59538:(e,t,n)=>{n.d(t,{l:()=>c});var r=n(92504),o=n(37046),i=n(22279),s=n(90328),u=n(12943),a=n(87926);function c(e,t,n,r){if(null==e||null==r)return!1;const i=(0,u.Qk)(e,u.Wv),c=(0,u.Qk)(r,u.zp);if(i===c&&!l(c)&&(i!==u.rz.UNKNOWN||(0,a.aI)(e,r)))return(0,o.d)(n,t),!0;if(l(c)){const e=u.w5[i][u.rz.LON_LAT],r=u.w5[u.rz.LON_LAT][c];return null!=e&&null!=r&&(e(t,0,f,0),r(f,0,d,0),(0,s.y)(p*f[0],p*f[1],n),n[12]=d[0],n[13]=d[1],n[14]=d[2],!0)}if((c===u.rz.WEB_MERCATOR||c===u.rz.PLATE_CARREE)&&(i===u.rz.WGS84||i===u.rz.CGCS2000&&c===u.rz.PLATE_CARREE||i===u.rz.SPHERICAL_ECEF||i===u.rz.WEB_MERCATOR)){const e=u.w5[i][u.rz.LON_LAT],r=u.w5[u.rz.LON_LAT][c];return null!=e&&null!=r&&(e(t,0,f,0),r(f,0,d,0),i===u.rz.SPHERICAL_ECEF?(0,s.C)(p*f[0],p*f[1],n):(0,o.g)(n),n[12]=d[0],n[13]=d[1],n[14]=d[2],!0)}return!1}function l(e){return e===u.rz.SPHERICAL_ECEF||e===u.rz.SPHERICAL_MARS_PCPF||e===u.rz.SPHERICAL_MOON_PCPF}const p=(0,r.kU)(1),f=(0,i.c)(),d=(0,i.c)()},90328:(e,t,n)=>{n.d(t,{C:()=>i,y:()=>o});var r=n(37046);function o(e,t,n){const r=Math.sin(e),o=Math.cos(e),i=Math.sin(t),s=Math.cos(t),u=n;return u[0]=-r,u[4]=-i*o,u[8]=s*o,u[12]=0,u[1]=o,u[5]=-i*r,u[9]=s*r,u[13]=0,u[2]=0,u[6]=s,u[10]=i,u[14]=0,u[3]=0,u[7]=0,u[11]=0,u[15]=1,u}function i(e,t,n){return o(e,t,n),(0,r.t)(n,n),n}},42120:(e,t,n)=>{n.d(t,{F:()=>i});var r=n(22279),o=n(84119);function i(e,t,n,r){return!(null==t||null==r||e.length<2)&&(2===e.length&&(s[0]=e[0],s[1]=e[1],s[2]=0,e=s),(0,o.projectBuffer)(e,t,0,n,r,0,1))}const s=(0,r.c)()},32937:(e,t,n)=>{n.d(t,{GD:()=>s,Y0:()=>c,lO:()=>l});var r=n(47936),o=n(78983),i=n(87926);const s=new o.A(r.fv),u=new o.A(r.FY),a=new o.A(r.LJ),c=new o.A(r.Ro);function l(e){return e&&((0,i.q8)(e)||(0,i.aI)(e,u))?u:e&&((0,i.KQ)(e)||(0,i.aI)(e,a))?a:s}},98154:(e,t,n)=>{n.d(t,{L:()=>l});var r=n(28830),o=n(86394),i=n(98849),s=n(40189),u=n(16123),a=n(10282),c=n(26099);async function l(e,t){const n=(0,u.qg)(e);if(!n)throw new i.A("invalid-url","Invalid scene service url");const l={...t,sceneServerUrl:n.url.path,layerId:n.sublayer??void 0};if(l.sceneLayerItem??=await async function(e){const t=(await p(e)).serviceItemId;if(!t)return null;const n=new c.default({id:t,apiKey:e.apiKey}),i=await async function(e){const t=r.id?.findServerInfo(e.sceneServerUrl);if(t?.owningSystemUrl)return t.owningSystemUrl;const n=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const t=(await(0,o.A)(n,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(t)return t}catch(d){(0,s.QP)(d)}return null}(e);null!=i&&(n.portal=new a.A({url:i}));try{return n.load({signal:e.signal})}catch(y){return(0,s.QP)(y),null}}(l),null==l.sceneLayerItem)return f(l.sceneServerUrl.replace("/SceneServer","/FeatureServer"),l);const d=await async function({sceneLayerItem:e,signal:t}){if(!e)return null;try{const n=(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:t})).find((e=>"Feature Service"===e.type))||null;if(!n)return null;const r=new c.default({portal:n.portal,id:n.id});return await r.load(),r}catch(n){return(0,s.QP)(n),null}}(l);if(!d?.url)throw new i.A("related-service-not-found","Could not find feature service through portal item relationship");const y=await f(d.url,l);return y.portalItem=d,y}async function p(e){if(e.rootDocument)return e.rootDocument;const t={query:{f:"json",token:e.apiKey},responseType:"json",signal:e.signal};try{const n=await(0,o.A)(e.sceneServerUrl,t);e.rootDocument=n.data}catch{e.rootDocument={}}return e.rootDocument}async function f(e,t){const n=(0,u.qg)(e);if(!n)throw new i.A("invalid-feature-service-url","Invalid feature service url");const r=n.url.path,s=t.layerId;if(null==s)return{serverUrl:r};const a=p(t),c=e=>{const n={query:{f:"json"},responseType:"json",authMode:e,signal:t.signal};return(0,o.A)(r,n)},l=c("anonymous").catch((()=>c("no-prompt"))),[f,d]=await Promise.all([l,a]),y=d?.layers,h=f.data&&f.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(y)){for(let o=0;o<Math.min(y.length,h.length);o++)if(y[o].id===s)return{serverUrl:r,layerId:h[o].id}}else if(null!=s&&s<h.length)return{serverUrl:r,layerId:h[s].id};throw new Error("could not find matching associated sublayer")}},97934:(e,t,n)=>{n.d(t,{P:()=>r});const r={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsAsyncApplyEdits:!1,zDefault:void 0},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1,supportsAsyncConvert3D:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}}},19370:(e,t,n)=>{n.d(t,{MA:()=>f,m0:()=>w,wH:()=>h});var r=n(98849),o=n(19251),i=n(539),s=n(68538),u=n(50645);const a=i.A.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");function c(e,t,n){let o="",i=0;for(;i<n;){const s=e[t+i];if(s<128)o+=String.fromCharCode(s),i++;else if(s>=192&&s<224){if(i+1>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");const u=(31&s)<<6|63&e[t+i+1];o+=String.fromCharCode(u),i+=2}else if(s>=224&&s<240){if(i+2>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(15&s)<<12|(63&e[t+i+1])<<6|63&e[t+i+2];o+=String.fromCharCode(u),i+=3}else{if(!(s>=240&&s<248))throw new r.A("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");{if(i+3>=n)throw new r.A("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");const u=(7&s)<<18|(63&e[t+i+1])<<12|(63&e[t+i+2])<<6|63&e[t+i+3];if(u>=65536){const e=55296+(u-65536>>10),t=56320+(1023&u);o+=String.fromCharCode(e,t)}else o+=String.fromCharCode(u);i+=4}}}return o}function l(e,t){const n={byteOffset:0,byteCount:0,fields:Object.create(null)};let r=0;for(let o=0;o<t.length;o++){const i=t[o],s=i.valueType||i.type,u=m[s];n.fields[i.property]=u(e,r),r+=A[s].BYTES_PER_ELEMENT}return n.byteCount=r,n}function p(e,t,n){const o=[];let i,s,u=0;for(s=0;s<e;s+=1){if(i=t[s],i>0){if(o.push(c(n,u,i-1)),0!==n[u+i-1])throw new r.A("string-array-error","Invalid string array: missing null termination.")}else o.push(null);u+=i}return o}function f(e,t){return new(0,A[t.valueType])(e,t.byteOffset,t.count*t.valuesPerElement)}function d(e,t,n){const i=null!=t.header?l(e,t.header):{byteOffset:0,byteCount:0,fields:{count:n}},s={header:i,byteOffset:i.byteCount,byteCount:0,entries:Object.create(null)};let u=i.byteCount;for(let a=0;a<t.ordering.length;a++){const e=t.ordering[a],n=(0,o.o8)(t[e]);if(n.count=i.fields.count??0,"String"===n.valueType){if(n.byteOffset=u,n.byteCount=i.fields[e+"ByteCount"],"UTF-8"!==n.encoding)throw new r.A("unsupported-encoding","Unsupported String encoding.",{encoding:n.encoding});if(n.timeEncoding&&"ECMA_ISO8601"!==n.timeEncoding)throw new r.A("unsupported-time-encoding","Unsupported time encoding.",{timeEncoding:n.timeEncoding})}else{if(!b(n.valueType))throw new r.A("unsupported-value-type","Unsupported binary valueType",{valueType:n.valueType});{const e=C(n.valueType);u+=u%e!=0?e-u%e:0,n.byteOffset=u,n.byteCount=e*n.valuesPerElement*n.count}}u+=n.byteCount??0,s.entries[e]=n}return s.byteCount=u-s.byteOffset,s}function y(e,t,n){if(t!==e&&a.error(`Invalid ${n} buffer size\n expected: ${e}, actual: ${t})`),t<e)throw new r.A("buffer-too-small","Binary buffer is too small",{expectedSize:e,actualSize:t})}function h(e,t){const n=l(e,t&&t.header);let r=n.byteCount;const o={isDraco:!1,header:n,byteOffset:n.byteCount,byteCount:0,vertexAttributes:{}},i=n.fields,s=null!=i.vertexCount?i.vertexCount:i.count;for(const c of t.ordering){if(!t.vertexAttributes[c])continue;const e={...t.vertexAttributes[c],byteOffset:r,count:s},n=g[c]||"_"+c;o.vertexAttributes[n]=e,r+=C(e.valueType)*e.valuesPerElement*s}const u=i.faceCount;if(t.faces&&u){o.faces={};for(const e of t.ordering){if(!t.faces[e])continue;const n={...t.faces[e],byteOffset:r,count:u};o.faces[e]=n,r+=C(n.valueType)*n.valuesPerElement*u}}const a=i.featureCount;if(t.featureAttributes&&t.featureAttributeOrder&&a){o.featureAttributes={};for(const e of t.featureAttributeOrder){if(!t.featureAttributes[e])continue;const n={...t.featureAttributes[e],byteOffset:r,count:a};o.featureAttributes[e]=n,r+=("UInt64"===n.valueType?8:C(n.valueType))*n.valuesPerElement*a}}return y(r,e.byteLength,"geometry"),o.byteCount=r-o.byteOffset,o}const g={position:u.r.POSITION,normal:u.r.NORMAL,color:u.r.COLOR,uv0:u.r.UV0,region:u.r.UVREGION};function w(e,t,n){if("lepcc-rgb"===e.encoding)return(0,s.mb)(t);if("lepcc-intensity"===e.encoding)return(0,s.Ax)(t);if(null!=e.encoding&&""!==e.encoding)throw new r.A("unknown-attribute-storage-info-encoding","Unknown Attribute Storage Info Encoding");e["attributeByteCounts "]&&!e.attributeByteCounts&&(a.warn("Warning: Trailing space in 'attributeByteCounts '."),e.attributeByteCounts=e["attributeByteCounts "]),"ObjectIds"===e.ordering[0]&&e.hasOwnProperty("objectIds")&&(a.warn("Warning: Case error in objectIds"),e.ordering[0]="objectIds");const o=d(t,e,n);y(o.byteOffset+o.byteCount,t.byteLength,"attribute");const i=o.entries.attributeValues||o.entries.objectIds;if(i){if("String"===i.valueType){const e=o.entries.attributeByteCounts,n=f(t,e),r=function(e,t){return new Uint8Array(e,t.byteOffset,t.byteCount)}(t,i);return i.timeEncoding?function(e,t,n){return p(e,t,n).map((e=>{const t=e?Date.parse(e):null;return t&&!Number.isNaN(t)?t:null}))}(e.count,n,r):p(e.count,n,r)}return f(t,i)}throw new r.A("bad-attribute-storage-info","Bad attributeStorageInfo specification.")}const A={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array},m={Float32:(e,t)=>new DataView(e,0).getFloat32(t,!0),Float64:(e,t)=>new DataView(e,0).getFloat64(t,!0),UInt8:(e,t)=>new DataView(e,0).getUint8(t),Int8:(e,t)=>new DataView(e,0).getInt8(t),UInt16:(e,t)=>new DataView(e,0).getUint16(t,!0),Int16:(e,t)=>new DataView(e,0).getInt16(t,!0),UInt32:(e,t)=>new DataView(e,0).getUint32(t,!0),Int32:(e,t)=>new DataView(e,0).getInt32(t,!0)};function b(e){return A.hasOwnProperty(e)}function C(e){return b(e)?A[e].BYTES_PER_ELEMENT:0}},15976:(e,t,n)=>{n.d(t,{s1:()=>h});var r=n(86394),o=(n(85569),n(98849),n(39831),n(86942)),i=(n(46615),n(76287)),s=(n(37046),n(56192)),u=(n(76743),n(46991)),a=(n(21839),n(22279)),c=(n(47936),n(97303),n(78983),n(32937),n(59538),n(84119),n(42120),n(80510)),l=(n(87926),n(14474),n(19370));var p=n(14242),f=(n(55623),n(29709)),d=n(70807);(0,c.vt)();var y;async function h(e,t,n,o,i){const s=[];for(const r of t)if(r&&i.includes(r.name)){const t=`${e}/nodes/${n}/attributes/${r.key}/0`;s.push({url:t,storageInfo:r})}const u=await Promise.allSettled(s.map((e=>(0,r.A)(e.url,{responseType:"array-buffer"}).then((t=>(0,l.m0)(e.storageInfo,t.data)))))),a=[];for(const r of o){const e={};for(let t=0;t<u.length;t++){const n=u[t];if("fulfilled"===n.status){const o=n.value;e[s[t].storageInfo.name]=A(o,r)}}a.push(e)}return a}!function(e){e[e.OUTSIDE=0]="OUTSIDE",e[e.INTERSECTS_CENTER_OUTSIDE=1]="INTERSECTS_CENTER_OUTSIDE",e[e.INTERSECTS_CENTER_INSIDE=2]="INTERSECTS_CENTER_INSIDE",e[e.INSIDE=3]="INSIDE"}(y||(y={}));const g=-32768,w=-(2**31);function A(e,t){if(!e)return null;const n=e[t];return(0,o.IY)(e)?n===g?null:n:(0,o._G)(e)?n===w?null:n:n!=n?null:n}(0,p.CC)({color:[0,0,0,0],opacity:0});const m=new Array(24);new d.K(m,3),(0,a.c)(),(0,a.c)(),(0,i.a)();(0,s.a)(),(0,u.a)(),(0,c.vt)(),(0,c.vt)(),(0,f.vt)(),(0,a.c)(),new Array(72),(0,s.a)()},68538:(e,t,n)=>{n.d(t,{Ax:()=>w,Me:()=>c,mb:()=>y});var r=n(98849);const o=!0,i={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};function s(e,t,n){return{identifier:String.fromCharCode.apply(null,new Uint8Array(e,n+i.identifierOffset,i.identifierLength)),version:t.getUint16(n+i.versionOffset,o),checksum:t.getUint32(n+i.checksumOffset,o)}}const u={sizeLo:0,sizeHi:4,minX:8,minY:16,minZ:24,maxX:32,maxY:40,maxZ:48,errorX:56,errorY:64,errorZ:72,count:80,reserved:84,byteCount:88};function a(e,t){return{sizeLo:e.getUint32(t+u.sizeLo,o),sizeHi:e.getUint32(t+u.sizeHi,o),minX:e.getFloat64(t+u.minX,o),minY:e.getFloat64(t+u.minY,o),minZ:e.getFloat64(t+u.minZ,o),maxX:e.getFloat64(t+u.maxX,o),maxY:e.getFloat64(t+u.maxY,o),maxZ:e.getFloat64(t+u.maxZ,o),errorX:e.getFloat64(t+u.errorX,o),errorY:e.getFloat64(t+u.errorY,o),errorZ:e.getFloat64(t+u.errorZ,o),count:e.getUint32(t+u.count,o),reserved:e.getUint32(t+u.reserved,o)}}function c(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:c}=s(e,t,n);if(n+=i.byteCount,"LEPCC     "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(c>1)throw new r.A("lepcc-decode-error","Unknown version");const p=a(t,n);if(n+=u.byteCount,p.sizeHi*2**32+p.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const f=new Float64Array(3*p.count),d=[],y=[],h=[],g=[];if(n=l(e,n,d),n=l(e,n,y),n=l(e,n,h),n=l(e,n,g),n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad length");let w=0,A=0;for(let r=0;r<d.length;r++){A+=d[r];let e=0;for(let t=0;t<y[r];t++){e+=h[w];const t=g[w];f[3*w]=Math.min(p.maxX,p.minX+2*p.errorX*e),f[3*w+1]=Math.min(p.maxY,p.minY+2*p.errorY*A),f[3*w+2]=Math.min(p.maxZ,p.minZ+2*p.errorZ*t),w++}}return{errorX:p.errorX,errorY:p.errorY,errorZ:p.errorZ,result:f}}function l(e,t,n){const r=[];t=p(e,t,r);const o=[];for(let i=0;i<r.length;i++){o.length=0,t=p(e,t,o);for(let e=0;e<o.length;e++)n.push(o[e]+r[i])}return t}function p(e,t,n){const i=new DataView(e,t),s=i.getUint8(0),u=31&s,a=!!(32&s),c=(192&s)>>6;let l=0;if(0===c)l=i.getUint32(1,o),t+=5;else if(1===c)l=i.getUint16(1,o),t+=3;else{if(2!==c)throw new r.A("lepcc-decode-error","Bad count type");l=i.getUint8(1),t+=2}if(a)throw new r.A("lepcc-decode-error","LUT not implemented");const p=Math.ceil(l*u/8),f=new Uint8Array(e,t,p);let d=0,y=0,h=0;const g=-1>>>32-u;for(let r=0;r<l;r++){for(;y<u;)d|=f[h]<<y,y+=8,h+=1;n[r]=d&g,d>>>=u,y-=u,y+u>32&&(d|=f[h-1]>>8-y)}return t+h}const f={sizeLo:0,sizeHi:4,count:8,colorMapCount:12,lookupMethod:14,compressionMethod:15,byteCount:16};function d(e,t){return{sizeLo:e.getUint32(t+f.sizeLo,o),sizeHi:e.getUint32(t+f.sizeHi,o),count:e.getUint32(t+f.count,o),colorMapCount:e.getUint16(t+f.colorMapCount,o),lookupMethod:e.getUint8(t+f.lookupMethod),compressionMethod:e.getUint8(t+f.compressionMethod)}}function y(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:u}=s(e,t,n);if(n+=i.byteCount,"ClusterRGB"!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(u>1)throw new r.A("lepcc-decode-error","Unknown version");const a=d(t,n);if(n+=f.byteCount,a.sizeHi*2**32+a.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");if((2===a.lookupMethod||1===a.lookupMethod)&&0===a.compressionMethod){if(3*a.colorMapCount+a.count+n!==e.byteLength||a.colorMapCount>256)throw new r.A("lepcc-decode-error","Bad count");const t=new Uint8Array(e,n,3*a.colorMapCount),o=new Uint8Array(e,n+3*a.colorMapCount,a.count),i=new Uint8Array(3*a.count);for(let e=0;e<a.count;e++){const n=o[e];i[3*e]=t[3*n],i[3*e+1]=t[3*n+1],i[3*e+2]=t[3*n+2]}return i}if(0===a.lookupMethod&&0===a.compressionMethod){if(3*a.count+n!==e.byteLength||0!==a.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");return new Uint8Array(e,n).slice()}if(a.lookupMethod<=2&&1===a.compressionMethod){if(n+3!==e.byteLength||1!==a.colorMapCount)throw new r.A("lepcc-decode-error","Bad count");const o=t.getUint8(n),i=t.getUint8(n+1),s=t.getUint8(n+2),u=new Uint8Array(3*a.count);for(let e=0;e<a.count;e++)u[3*e]=o,u[3*e+1]=i,u[3*e+2]=s;return u}throw new r.A("lepcc-decode-error","Bad method "+a.lookupMethod+","+a.compressionMethod)}const h={sizeLo:0,sizeHi:4,count:8,scaleFactor:12,bitsPerPoint:14,reserved:15,byteCount:16};function g(e,t){return{sizeLo:e.getUint32(t+h.sizeLo,o),sizeHi:e.getUint32(t+h.sizeHi,o),count:e.getUint32(t+h.count,o),scaleFactor:e.getUint16(t+h.scaleFactor,o),bitsPerPoint:e.getUint8(t+h.bitsPerPoint),reserved:e.getUint8(t+h.reserved)}}function w(e){const t=new DataView(e,0);let n=0;const{identifier:o,version:u}=s(e,t,n);if(n+=i.byteCount,"Intensity "!==o)throw new r.A("lepcc-decode-error","Bad identifier");if(u>1)throw new r.A("lepcc-decode-error","Unknown version");const a=g(t,n);if(n+=h.byteCount,a.sizeHi*2**32+a.sizeLo!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const c=new Uint16Array(a.count);if(8===a.bitsPerPoint){if(a.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint8Array(e,n,a.count);for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}else if(16===a.bitsPerPoint){if(2*a.count+n!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");const t=new Uint16Array(e,n,a.count);for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}else{const t=[];if(p(e,n,t)!==e.byteLength)throw new r.A("lepcc-decode-error","Bad size");for(let e=0;e<a.count;e++)c[e]=t[e]*a.scaleFactor}return c}},14242:(e,t,n)=>{n.d(t,{Cc:()=>a,CC:()=>c,RF:()=>u});var r=n(96220),o=(n(39831),n(89882)),i=n(52712);var s=n(34443);function u(e){return e&&e.enabled&&(function(e){return"extrude"===e.type}(e)||function(e){return"fill"===e.type}(e))&&null!=e.edges}function a(e,t){return function(e,t){if(null==e)return null;const n=null!=e.color?(0,i.b)(r.A.toUnitRGBA(e.color)):(0,i.f)(0,0,0,0),s=(0,o.Lz)(e.size),u=(0,o.Lz)(e.extensionLength);switch(e.type){case"solid":return c({color:n,size:s,extensionLength:u,...t});case"sketch":return function(e){return{...p,...e,type:"sketch"}}({color:n,size:s,extensionLength:u,...t});default:return}}(function(e){return e&&e.enabled&&e.edges||null}(e),t)}function c(e){return{...l,...e,type:"solid"}}const l={color:(0,i.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1},p={color:(0,i.f)(0,0,0,.2),size:1,extensionLength:0,opacity:1,objectTransparency:s.x.OPAQUE,hasSlicePlane:!1}},55623:(e,t,n)=>{n.d(t,{Eb:()=>i,_j:()=>s,k5:()=>r});var r,o=n(92504);function i(e){switch(e){case"multiply":default:return r.Multiply;case"ignore":return r.Ignore;case"replace":return r.Replace;case"tint":return r.Tint}}function s(e,t,n){if(null==e||t===r.Ignore)return n[0]=255,n[1]=255,n[2]=255,void(n[3]=255);const i=(0,o.qE)(Math.round(e[3]*a),0,a),s=0===i||t===r.Tint?0:t===r.Replace?c:l;n[0]=(0,o.qE)(Math.round(e[0]*u),0,u),n[1]=(0,o.qE)(Math.round(e[1]*u),0,u),n[2]=(0,o.qE)(Math.round(e[2]*u),0,u),n[3]=i+s}!function(e){e[e.Multiply=1]="Multiply",e[e.Ignore=2]="Ignore",e[e.Replace=3]="Replace",e[e.Tint=4]="Tint"}(r||(r={}));const u=255,a=85,c=a,l=2*a},29709:(e,t,n)=>{n.d(t,{gm:()=>p,vt:()=>l});n(46615);var r=n(76287),o=n(76743),i=n(46991),s=n(21839),u=n(22279),a=(n(25102),n(52712)),c=(n(4675),n(38774),n(10714));n(70807);(0,i.a)(),(0,u.c)(),(0,u.c)(),(0,a.c)(),(0,r.a)();function l(e=[0,0,0],t=[-1,-1,-1],n=(0,i.a)()){return{center:(0,u.g)(e),halfSize:(0,u.g)(t),quaternion:(0,i.b)(n)}}(()=>{const e=new Int8Array(162);let t=0;const n=n=>{for(let r=0;r<n.length;r++)e[t+r]=n[r];t+=6};n([6,2,3,1,5,4]),n([0,2,3,1,5,4]),n([0,2,3,7,5,4]),n([0,1,3,2,6,4]),n([0,1,3,2,0,0]),n([0,1,5,7,3,2]),n([0,1,3,7,6,4]),n([0,1,3,7,6,2]),n([0,1,5,7,6,2]),n([0,1,5,4,6,2]),n([0,1,5,4,0,0]),n([0,1,3,7,5,4]),n([0,2,6,4,0,0]),n([0,0,0,0,0,0]),n([1,3,7,5,0,0]),n([2,3,7,6,4,0]),n([2,3,7,6,0,0]),n([2,3,1,5,7,6]),n([0,1,5,7,6,2]),n([0,1,5,7,6,4]),n([0,1,3,7,6,4]),n([4,5,7,6,2,0]),n([4,5,7,6,0,0]),n([4,5,1,3,7,6]),n([0,2,3,7,5,4]),n([6,2,3,7,5,4]),n([6,2,3,1,5,4])})();function p(e,t,n,r,i){if((0,o.c)(i.quaternion,e.quaternion),r===c.RT.Global){(0,o.a)(h,e.quaternion),(0,s.v)(f,e.center,h),(0,s.w)(d,f),(0,s.x)(y,d,e.halfSize),(0,s.u)(y,d,y);const r=(0,s.l)(y);(0,s.g)(y,d,e.halfSize);const u=(0,s.l)(y);if(r<n)(0,s.c)(i.center,e.center),(0,s.s)(f,n,n,n),(0,s.g)(i.halfSize,e.halfSize,f);else{const o=u>0?1+t/u:1,a=r>0?1+n/r:1,c=(a+o)/2,l=(a-o)/2;(0,s.i)(i.halfSize,d,l),(0,s.q)(i.halfSize,i.halfSize,e.halfSize,c),(0,s.i)(i.center,d,c),(0,s.q)(i.center,i.center,e.halfSize,l),(0,s.z)(f,f),(0,s.A)(i.center,i.center,f),(0,s.v)(i.center,i.center,i.quaternion)}}else{const r=(0,s.s)(f,0,0,1);(0,s.q)(i.center,e.center,r,(n+t)/2),(0,o.a)(h,e.quaternion),(0,s.v)(r,r,h),(0,s.w)(r,r),(0,s.q)(i.halfSize,e.halfSize,r,(n-t)/2)}return i}const f=(0,u.c)(),d=(0,u.c)(),y=(0,u.c)(),h=(0,i.a)()},34443:(e,t,n)=>{var r;n.d(t,{x:()=>r}),function(e){e[e.INVISIBLE=0]="INVISIBLE",e[e.TRANSPARENT=1]="TRANSPARENT",e[e.OPAQUE=2]="OPAQUE"}(r||(r={}))},18846:(e,t,n)=>{n.d(t,{D8:()=>i,TO:()=>o,d0:()=>s});var r=n(42453);async function o(e,t=e.popupTemplate){if(null==t)return[];const n=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:o}=t,{objectIdField:i,typeIdField:s,globalIdField:u,relationships:a}=e;if(n.includes("*"))return["*"];const c=o?(0,r.eX)(e):[],l=(0,r.DB)(e.fieldsIndex,[...n,...c]);return s&&l.push(s),l&&i&&e.fieldsIndex?.has(i)&&!l.includes(i)&&l.push(i),l&&u&&e.fieldsIndex?.has(u)&&!l.includes(u)&&l.push(u),a&&a.forEach((t=>{const{keyField:n}=t;l&&n&&e.fieldsIndex?.has(n)&&!l.includes(n)&&l.push(n)})),l}function i(e,t){return e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function s(e,t){return null!=i(e,{defaultPopupTemplateEnabled:t})}}}]);