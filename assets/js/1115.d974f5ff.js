"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1115],{21115:(t,e,n)=>{n.d(e,{previewSymbol2D:()=>A});var i=n(96220),o=n(775),a=n(98849),l=n(72777),s=n(89882),h=n(20698),r=n(41977),c=n(88148),u=n(73532),p=n(51481);const m="picture-fill",d="picture-marker",g="simple-fill",f="simple-line",y="simple-marker",w="text",x="Aa",b=c.CB.size,z=c.CB.maxSize,v=c.CB.maxOutlineSize,L=c.CB.lineWidth,M=225,S=document.createElement("canvas");function k(t,e,n){if("polygon"===t.type){const i=t.extent,o=0===i.width?1:i.width,a=0===i.height?1:i.height;t=(0,h.wp)({originPosition:"upperLeft",scale:[o/e,a/n],translate:[i.xmin,i.ymax]},{},t);let l="";for(let e=0;e<t.rings.length;e++){const n=t.rings[e];for(let t=0;t<n.length;t++){const e=n[t][0],i=n[t][1];let o="";0===t?(o=`M${e.toString()} ${i.toString()}`,""!==l&&(o=` ${o}`),l+=o):t===n.length-1?(o=`l${e.toString()} ${i.toString()} Z`,""!==l&&(o=` ${o}`),l+=o):(o=`l${e.toString()} ${i.toString()}`,""!==l&&(o=` ${o}`),l+=o)}}return l}if("polyline"===t.type){const i=t.extent,o=0===i.width?1:i.width,a=0===i.height?1:i.height;t=(0,h.QE)({originPosition:"upperLeft",scale:[o/e,a/n],translate:[i.xmin,i.ymax]},{},t);let l="";for(let e=0;e<t.paths.length;e++){const n=t.paths[e];for(let t=0;t<n.length;t++){const e=n[t][0],i=n[t][1];let o="";0===t?(o=`M${e.toString()} ${i.toString()}`,""!==l&&(o=` ${o}`),l+=o):(o=`l${e.toString()} ${i.toString()}`,""!==l&&(o=` ${o}`),l+=o)}}return l}return""}function C(t,e){const n=S.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),n.font=i.join(" ");const{width:o,actualBoundingBoxLeft:a,actualBoundingBoxRight:l,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h}=n.measureText(t);return{width:Math.ceil(Math.max(o,a+l)),height:Math.ceil(s+h),x:Math.floor(a),y:Math.floor((s-h)/2)}}function $(t){const e=t?.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,s.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,s.Lz)(e.height):null}}function B(t,e){return t>e?"dark":"light"}async function A(t,e){const{shapeDescriptor:n,size:i,renderOptions:o,outputSize:h}=function(t,e){const n="number"==typeof e?.size?e?.size:null,i=null!=n?(0,s.Lz)(n):null,o=null!=e?.maxSize?(0,s.Lz)(e.maxSize):null;let a="angle"in t?t.angle:null;null!=e?.rotation&&(a=(a??0)+e.rotation);const l=(0,r.eH)(t);let h=(0,r.$4)(t);"dark"!==P(t,245)||e?.ignoreWhiteSymbols||(h={width:.75,...h,color:"#bdc3c7"});let u=null;const p={shape:null,fill:l,stroke:h,offset:[0,0]};h?.width&&(h.width=Math.min(h.width,v));const M=h?.width||0;let S=null!=e?.size&&(null==e?.scale||e?.scale),B=0,A=0,E=!1;switch(t.type){case y:{const n=t.style,{width:l,height:h}=$(e);let r=l===h&&null!=l?l:null!=i?i:Math.min((0,s.Lz)(t.size),o||z);if(!0===e?.useMarkerSymbolSize&&null!==l&&null!==h){const e=Math.min((0,s.Lz)(t.size),o||z);r=e>l&&e>h?Math.min(l,h):e}switch(B=r,A=r,n){case"circle":p.shape={type:"circle",cx:0,cy:0,r:.5*r},S||(B+=M,A+=M);break;case"cross":p.shape={type:"path",path:[{command:"M",values:[0,.5*A]},{command:"L",values:[B,.5*A]},{command:"M",values:[.5*B,0]},{command:"L",values:[.5*B,A]}]};break;case"diamond":p.shape={type:"path",path:[{command:"M",values:[0,.5*A]},{command:"L",values:[.5*B,0]},{command:"L",values:[B,.5*A]},{command:"L",values:[.5*B,A]},{command:"Z",values:[]}]},S||(B+=M,A+=M);break;case"square":p.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[B,A]},{command:"L",values:[0,A]},{command:"Z",values:[]}]},S||(B+=M,A+=M),a&&(E=!0);break;case"triangle":p.shape={type:"path",path:[{command:"M",values:[.5*B,0]},{command:"L",values:[B,A]},{command:"L",values:[0,A]},{command:"Z",values:[]}]},S||(B+=M,A+=M),a&&(E=!0);break;case"x":p.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,A]},{command:"M",values:[B,0]},{command:"L",values:[0,A]}]},a&&(E=!0);break;case"path":p.shape={type:"path",path:t.path||""},S||(B+=M,A+=M),a&&(E=!0),S=!0}break}case f:{const{width:t,height:n}=$(e),o=(0,r.O0)(h).reduce(((t,e)=>t+e),0),a=o&&Math.ceil(L/o),l=n??i??M,s=t??(o*a||L);if(S=!0,"polyline"===e?.geometry?.type&&e?.geometry?.extent){B=s,A=n??B;const t=1e3,i=.15*t;u=[B,A],A=u[0]>u[1]?t*u[1]/u[0]:t,B=u[0]>u[1]?t:t*u[0]/u[1],h?.width&&(h.width=h.width*t/(u[1]>u[0]?u[1]:u[0]),h.width>i&&(h.width=i)),p.shape={type:"path",path:k(e.geometry,B,A)}}else B=null!=e?.maxSize?Math.min(s,e.maxSize):s,A=l,h&&(h.width=l),p.shape={type:"path",path:[{command:"M",values:[l/2,A/2]},{command:"L",values:[B-l/2,A/2]}]};break}case m:case g:{const t="object"==typeof e?.symbolConfig&&!!e?.symbolConfig?.isSquareFill,{width:n,height:o}=$(e);B=!t&&n!==o||null==n?null!=i?i:b:n,A=!t&&n!==o||null==o?B:o,S||(B+=M,A+=M),S=!0,e?.geometry?.extent&&"polygon"===e?.geometry?.type?(u=[B,A],A=u[0]>u[1]?1e3*u[1]/u[0]:1e3,B=u[0]>u[1]?1e3:1e3*u[0]/u[1],p.shape={type:"path",path:k(e.geometry,B,A)}):p.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[B,0]},{command:"L",values:[B,A]},{command:"L",values:[0,A]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:c.nq.fill[0];break}case d:{const n=Math.min((0,s.Lz)(t.width),o||z),l=Math.min((0,s.Lz)(t.height),o||z),{width:h,height:r}=$(e),c=h===r&&null!=h?h:null!=i?i:Math.max(n,l),u=t.width/t.height;B=u<=1?Math.ceil(c*u):c,A=u<=1?c:Math.ceil(c/u),p.shape={type:"image",x:-Math.round(B/2),y:-Math.round(A/2),width:B,height:A,src:t.url||""},a&&(E=!0);break}case w:{const n=t,a=e?.overrideText||n.text||x,l=n.font,{width:h,height:r}=$(e),c=null!=r?r:null!=i?i:Math.min((0,s.Lz)(l.size),o||z),{width:u,height:m}=C(a,{weight:l.weight,size:c,family:l.family}),d=/[\uE600-\uE6FF]/.test(a);B=h??(d?c:u),A=d?c:m;let g=.5*(d?c:m);d&&(g+=5),p.shape={type:"text",text:a,x:n.xoffset||0,y:n.yoffset||g,align:"middle",alignBaseline:n.verticalAlignment,decoration:l&&l.decoration,rotated:n.rotated,kerning:n.kerning},p.font=l&&{size:c,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}return{shapeDescriptor:p,size:[B,A],outputSize:u,renderOptions:{node:e?.node,scale:S,opacity:e?.opacity,rotations:[a],useRotationSize:E,effectView:e?.effectView,ariaLabel:e?.ariaLabel,clipBloomEffect:e?.clipBloomEffect}}}(t,e);if(!n.shape)throw new a.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const n=e.fill,i=t.color;if("pattern"===n?.type&&i&&t.type!==m){const t=await(0,r.rc)(n.src,i.toCss(!0));n.src=t,e.fill=n}}(t,n),await async function(t,e,n,i){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,l.Al)(t.font)}catch{}const{width:o,height:a}=$(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){const{width:l,height:s,x:h,y:r}=C(e.shape.text,{weight:e.font?.weight,size:e.font?.size,family:e.font?.family});n[0]=o??l,n[1]=a??s,e.shape.x=h,e.shape.y=r;let c="angle"in t?t.angle:null;if(null!=i?.rotation&&(c=(c??0)+i.rotation),c){const t=c*(Math.PI/180),e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));n[1]=n[0]*e+n[1]*i}}}(t,n,i,e);const M=[[n]];if("object"==typeof e?.symbolConfig&&e?.symbolConfig?.applyColorModulation){const t=.6*i[0];M.unshift([{...n,offset:[-t,0],fill:(0,c.QC)(n.fill,-.3)}]),M.push([{...n,offset:[t,0],fill:(0,c.QC)(n.fill,.3)}]),i[0]+=2*t,o.scale=!1}"text"===t.type&&function(t,e,n,i,o){if(null!=t.haloColor&&null!=t.haloSize){o.masking??=n.map((()=>[]));const a=(0,s.Lz)(t.haloSize);i[0]+=a,i[1]+=a,n.unshift([{...e,fill:null,stroke:{color:t.haloColor,width:2*a,join:"round",cap:"round"}}]),o.masking.unshift([{shape:{type:"rect",x:0,y:0,width:i[0]+2*p.y7,height:i[1]+2*p.y7},fill:[255,255,255],stroke:null},{...e,fill:[0,0,0,0],stroke:null}])}null==t.backgroundColor&&null==t.borderLineColor||(i[0]+=2*p.y7,i[1]+=2*p.y7,n.unshift([{shape:{type:"rect",x:0,y:0,width:i[0],height:i[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,s.Lz)(t.borderLineSize)}}]),o.masking?.unshift([]))}(t,n,M,i,o);const S=(0,u.fz)(M,i,o);if(h&&S){const t="img"===S.nodeName.toLowerCase()?S:S.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox",`0 0 ${i[0].toString()} ${i[1].toString()}`),t.setAttribute("width",h[0].toString()),t.setAttribute("height",h[1].toString()),h.length>2&&(t.style.setProperty("padding-left",h[2]?.toString()+"px"),t.style.setProperty("padding-right",h[2]?.toString()+"px"),t.style.setProperty("padding-top",h[3]?.toString()+"px"),t.style.setProperty("padding-bottom",h[3]?.toString()+"px"),t.style.setProperty("box-sizing","border-box"))}return S}function P(t,e=M){const n=(0,r.eH)(t),a=(0,r.$4)(t),l=!n||"type"in n?null:new i.A(n),s=a?.color?new i.A(a?.color):null,h=l?B((0,o.Ws)(l),e):null,c=s?B((0,o.Ws)(s),e):null;return c?h?h===c?h:e>=M?"light":"dark":c:h}}}]);