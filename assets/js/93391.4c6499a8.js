"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[93391],{21839:(t,e,n)=>{n.d(e,{a:()=>c,b:()=>a,c:()=>l,d:()=>o,e:()=>p,f:()=>f,l:()=>s,n:()=>g,t:()=>i});var r=n(31415);n(39831),n(539);function o(t,e,n){i(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function i(t,e,n,r=3,o=r){if(t.length/r!==Math.ceil(e.length/o))return t;const i=t.length/r,l=n[0],a=n[1],u=n[2],s=n[4],f=n[5],c=n[6],p=n[8],g=n[9],d=n[10],y=n[12],h=n[13],A=n[14];let m=0,T=0;for(let v=0;v<i;v++){const n=e[m],i=e[m+1],v=e[m+2];t[T]=l*n+s*i+p*v+y,t[T+1]=a*n+f*i+g*v+h,t[T+2]=u*n+c*i+d*v+A,m+=o,T+=r}return t}function l(t,e,n){a(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function a(t,e,n,r=3,o=r){if(t.length/r!==Math.ceil(e.length/o))return;const i=t.length/r,l=n[0],a=n[1],u=n[2],s=n[3],f=n[4],c=n[5],p=n[6],g=n[7],d=n[8];let y=0,h=0;for(let A=0;A<i;A++){const n=e[y],i=e[y+1],A=e[y+2];t[h]=l*n+s*i+p*A,t[h+1]=a*n+f*i+g*A,t[h+2]=u*n+c*i+d*A,y+=o,h+=r}}function u(t,e,n,r=3,o=r){const i=Math.min(t.length/r,e.length/o);let l=0,a=0;for(let u=0;u<i;u++)t[a]=n*e[l],t[a+1]=n*e[l+1],t[a+2]=n*e[l+2],l+=o,a+=r;return t}function s(t,e,n,r){f(t.typedBuffer,e.typedBuffer,n,r,t.typedBufferStride,e.typedBufferStride)}function f(t,e,n,o,i=3,l=i){const a=Math.min(t.length/i,e.length/l);let u=0,s=0;const f=1/r.Tf;for(let r=0;r<a;r++)t[s]=o*(n*e[u])**f,t[s+1]=o*(n*e[u+1])**f,t[s+2]=o*(n*e[u+2])**f,u+=l,s+=i}function c(t,e,n,r=3,o=r){const i=t.length/r;if(i!==Math.ceil(e.length/o))return t;let l=0,a=0;for(let u=0;u<i;u++)t[a]=e[l]+n[0],t[a+1]=e[l+1]+n[1],t[a+2]=e[l+2]+n[2],l+=o,a+=r;return t}function p(t,e){g(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function g(t,e,n=3,r=n){const o=Math.min(t.length/n,e.length/r);let i=0,l=0;for(let a=0;a<o;a++){const o=e[i],a=e[i+1],u=e[i+2],s=o*o+a*a+u*u;if(s>0){const e=1/Math.sqrt(s);t[l]=e*o,t[l+1]=e*a,t[l+2]=e*u}i+=r,l+=n}}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:s,normalize:g,normalizeView:p,scale:u,scaleView:function(t,e,n){u(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)},shiftRight:function(t,e,n){const r=Math.min(t.count,e.count),o=t.typedBuffer,i=t.typedBufferStride,l=e.typedBuffer,a=e.typedBufferStride;let u=0,s=0;for(let f=0;f<r;f++)o[s]=l[u]>>n,o[s+1]=l[u+1]>>n,o[s+2]=l[u+2]>>n,u+=a,s+=i},transformMat3:a,transformMat3View:l,transformMat4:i,transformMat4View:o,translate:c},Symbol.toStringTag,{value:"Module"}))},12364:(t,e,n)=>{n.d(e,{a:()=>i,b:()=>f,l:()=>s,n:()=>a,t:()=>l});var r=n(31415),o=(n(39831),n(539));function i(t,e,n){l(t.typedBuffer,e.typedBuffer,n,t.typedBufferStride,e.typedBufferStride)}function l(t,e,n,r=4,o=r){if(t.length/r!=e.length/o)return;const i=t.length/r,l=n[0],a=n[1],u=n[2],s=n[3],f=n[4],c=n[5],p=n[6],g=n[7],d=n[8];let y=0,h=0;for(let A=0;A<i;A++){const n=e[y],i=e[y+1],A=e[y+2],m=e[y+3];t[h]=l*n+s*i+p*A,t[h+1]=a*n+f*i+g*A,t[h+2]=u*n+c*i+d*A,t[h+3]=m,y+=o,h+=r}}function a(t,e){const n=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,i=e.typedBuffer,l=e.typedBufferStride;for(let a=0;a<n;a++){const t=a*o,e=a*l,n=i[e],u=i[e+1],s=i[e+2],f=n*n+u*u+s*s;if(f>0){const e=1/Math.sqrt(f);r[t]=e*n,r[t+1]=e*u,r[t+2]=e*s}}}function u(t,e,n,r=4){const o=Math.min(t.length/r,e.count),i=e.typedBuffer,l=e.typedBufferStride;let a=0,u=0;for(let s=0;s<o;s++)t[u]=n*i[a],t[u+1]=n*i[a+1],t[u+2]=n*i[a+2],t[u+3]=n*i[a+3],a+=l,u+=r}function s(t,e,n,r){f(t.typedBuffer,e,n,r,t.typedBufferStride)}function f(t,e,n,o,i=4){const l=Math.min(t.length/i,e.count),a=e.typedBuffer,u=e.typedBufferStride;let s=0,f=0;const c=1/r.Tf;for(let r=0;r<l;r++)t[f]=o*(n*a[s])**c,t[f+1]=o*(n*a[s+1])**c,t[f+2]=o*(n*a[s+2])**c,t[f+3]=o*n*a[s+3],s+=u,f+=i}Object.freeze(Object.defineProperty({__proto__:null,linearToSRGB:f,linearToSRGBView:s,normalize:a,scale:u,scaleView:function(t,e,n){u(t.typedBuffer,e,n,t.typedBufferStride)},transformMat3:l,transformMat3View:i,transformMat4:function(t,e,n,r=4,i=r){if(t.length/r!=e.length/i)return void o.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const l=t.length/r,a=n[0],u=n[1],s=n[2],f=n[3],c=n[4],p=n[5],g=n[6],d=n[7],y=n[8],h=n[9],A=n[10],m=n[11],T=n[12],v=n[13],w=n[14],B=n[15];let M=0,R=0;for(let o=0;o<l;o++){const n=e[M],o=e[M+1],l=e[M+2],S=e[M+3];t[R]=a*n+c*o+y*l+T*S,t[R+1]=u*n+p*o+h*l+v*S,t[R+2]=s*n+g*o+A*l+w*S,t[R+3]=f*n+d*o+m*l+B*S,M+=i,R+=r}},transformMat4View:function(t,e,n){if(t.count!==e.count)return;const r=t.count,o=n[0],i=n[1],l=n[2],a=n[3],u=n[4],s=n[5],f=n[6],c=n[7],p=n[8],g=n[9],d=n[10],y=n[11],h=n[12],A=n[13],m=n[14],T=n[15],v=t.typedBuffer,w=t.typedBufferStride,B=e.typedBuffer,M=e.typedBufferStride;for(let R=0;R<r;R++){const t=R*w,e=R*M,n=B[e],r=B[e+1],S=B[e+2],F=B[e+3];v[t]=o*n+u*r+p*S+h*F,v[t+1]=i*n+s*r+g*S+A*F,v[t+2]=l*n+f*r+d*S+m*F,v[t+3]=a*n+c*r+y*S+T*F}}},Symbol.toStringTag,{value:"Module"}))},42609:(t,e,n)=>{n.d(e,{W:()=>a,g:()=>l});var r=n(58359),o=n(68490),i=n(84119);function l(t,e,n,r){if((0,o.canProjectWithoutEngine)(t.spatialReference,n)){u[0]=t.x,u[1]=t.y;const o=t.z;return u[2]=o??r??0,(0,i.projectBuffer)(u,t.spatialReference,0,e,n,0)}const l=(0,o.tryProjectWithZConversion)(t,n);return!!l&&(e[0]=l?.x,e[1]=l?.y,e[2]=l?.z??r??0,!0)}async function a(t,e,n,r,i){return await(0,o.initializeProjection)(t.spatialReference,n,null,i),l(t,e,n,r)}const u=(0,r.vt)()},32937:(t,e,n)=>{n.d(e,{Y0:()=>s,lO:()=>f});var r=n(47936),o=n(78983),i=n(87926);const l=new o.A(r.fv),a=new o.A(r.FY),u=new o.A(r.LJ),s=new o.A(r.Ro);function f(t){const e=c.get(t);if(e)return e;let n=l;if(t)if(t===a)n=a;else if(t===u)n=u;else{const e=t.wkid,r=t.latestWkid;if(null!=e||null!=r)(0,i.tl)(e)||(0,i.tl)(r)?n=a:((0,i.ZL)(e)||(0,i.ZL)(r))&&(n=u);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===p?n=a:t===g&&(n=u)}}}return c.set(t,n),n}const c=new Map,p=a.wkt.toUpperCase(),g=u.wkt.toUpperCase()},29796:(t,e,n)=>{n.d(e,{H:()=>p});var r,o=n(66866),i=n(21877),l=n(19251),a=n(539),u=n(21564),s=n(4130),f=n(63863),c=n(67082);let p=r=class extends i.A{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return(0,c.b)(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},a.A.getLogger(this))}castPosition(t){return t&&t instanceof Float32Array&&a.A.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),(0,c.b)(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},a.A.getLogger(this))}castUv(t){return(0,c.b)(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},a.A.getLogger(this))}castNormal(t){return(0,c.b)(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},a.A.getLogger(this))}castTangent(t){return(0,c.b)(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},a.A.getLogger(this))}clone(){const t={position:(0,l.o8)(this.position),uv:(0,l.o8)(this.uv),normal:(0,l.o8)(this.normal),tangent:(0,l.o8)(this.tangent),color:(0,l.o8)(this.color)};return new r(t)}clonePositional(){const t={position:(0,l.o8)(this.position),normal:(0,l.o8)(this.normal),tangent:(0,l.o8)(this.tangent),uv:this.uv,color:this.color};return new r(t)}get usedMemory(){return this.position.byteLength+(this.uv?.byteLength??0)+(this.normal?.byteLength??0)+(this.tangent?.byteLength??0)+(this.color?.byteLength??0)}};(0,o._)([(0,u.MZ)({json:{write:c.B}})],p.prototype,"color",void 0),(0,o._)([(0,s.w)("color")],p.prototype,"castColor",null),(0,o._)([(0,u.MZ)({nonNullable:!0,json:{write:c.B}})],p.prototype,"position",void 0),(0,o._)([(0,s.w)("position")],p.prototype,"castPosition",null),(0,o._)([(0,u.MZ)({json:{write:c.B}})],p.prototype,"uv",void 0),(0,o._)([(0,s.w)("uv")],p.prototype,"castUv",null),(0,o._)([(0,u.MZ)({json:{write:c.B}})],p.prototype,"normal",void 0),(0,o._)([(0,s.w)("normal")],p.prototype,"castNormal",null),(0,o._)([(0,u.MZ)({json:{write:c.B}})],p.prototype,"tangent",void 0),(0,o._)([(0,s.w)("tangent")],p.prototype,"castTangent",null),p=r=(0,o._)([(0,f.$)("esri.geometry.support.MeshVertexAttributes")],p)},67082:(t,e,n)=>{function r(t,e,n,r){const{loggerTag:o,stride:i}=e;return t.length%i!=0?(r.error(o,`Invalid array length, expected a multiple of ${i}`),new n([])):t}function o(t,e,n,o,i){if(!t)return t;if(t instanceof e)return r(t,o,e,i);for(const l of n)if(t instanceof l)return r(new e(t),o,e,i);if(Array.isArray(t))return r(new e(t),o,e,i);{const r=n.map((t=>`'${t.name}'`));return i.error(`Failed to set property, expected one of ${r}, but got ${t.constructor.name}`),new e([])}}function i(t,e,n){e[n]=function(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n];return e}(t)}n.d(e,{B:()=>i,b:()=>o})},93391:(t,e,n)=>{n.d(e,{convertMeshVertexSpace:()=>u});var r=n(98849),o=n(19251),i=n(40189),l=n(29796),a=n(5025);async function u(t,e,n){await Promise.resolve(),(0,i.Te)(n);const u=(0,a.UR)(t,e,{useEllipsoid:n?.useEllipsoid});if(!u)throw new r.A("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const s=t.cloneAndModifyVertexAttributes(new l.H({...u,uv:(0,o.o8)(t.vertexAttributes.uv),color:(0,o.o8)(t.vertexAttributes.color)}),e);return s.transform=null,s}},72188:(t,e,n)=>{n.d(e,{$5:()=>M,CN:()=>T,GN:()=>N,JP:()=>m,KM:()=>S,Mv:()=>b,OD:()=>x,X4:()=>v,gZ:()=>F,gr:()=>B,qs:()=>R,si:()=>w,xA:()=>C});var r=n(92504),o=n(25423),i=n(78607),l=n(21742),a=n(86128),u=n(24121),s=n(58359),f=n(59538),c=n(84119),p=n(99817),g=n(87926),d=n(96082),y=n(57813),h=n(21839),A=n(12364);const m="Projection may be possible after calling projection.load().";function T(t,e,n,r){t.error(`Failed to project from (wkid:${e.wkid}) to (wkid:${n.wkid}).${r?" ":""}${r}`)}function v(t,e,n,r,o,i){return L(E.TO_PCPF,y.xs.fromTypedArray(t),x.NORMAL,y.Xm.fromTypedArray(e),n,y.Xm.fromTypedArray(r),o,y.xs.fromTypedArray(i))?i:null}function w(t,e,n,r,o,i){return L(E.FROM_PCPF,y.xs.fromTypedArray(t),x.NORMAL,y.Xm.fromTypedArray(e),n,y.Xm.fromTypedArray(r),o,y.xs.fromTypedArray(i))?i:null}function B(t,e,n,r){return(0,c.projectBuffer)(t,e,0,n,r,0)?n:null}function M(t,e,n,r){return(0,c.projectBuffer)(t,e,0,n,r,0)?n:null}function R(t,e,n){return(0,o.Ge)(V,n),(0,h.b)(e,t,V),(0,r.or)(V)&&(0,h.n)(e,e),e}function S(t,e,n){return(0,o.z0)(V,n),(0,A.t)(e,t,V),(0,r.or)(V)&&(0,h.n)(e,e,4),e}function F(t,e,n,o){const i=e===x.NORMAL;return _(t,e,n,((t,e)=>{const n=Math.cos((0,r.kU)(t));e[0]=i?n:1/n,e[1]=1}),o)}function N(t,e,n,r){const o=e===x.NORMAL;return _(t,e,n,((t,e)=>{const n=Math.cosh(-t/p.$O.radius);e[0]=1,e[1]=o?n:1/n}),r)}function _(t,e,n,r,o){const i=e===x.NORMAL?3:4,l=[0,0];for(let a=0,u=1;a<t.length;a+=i,u+=3){r(n[u],l);const e=t[a]*l[0],s=t[a+1]*l[1],f=t[a+2],c=1/Math.sqrt(e*e+s*s+f*f);o[a]=e*c,o[a+1]=s*c,o[a+2]=f*c,4===i&&(o[a+3]=t[a+3])}return o}function C(t,e,n,r,o,i){if(!L(E.TO_PCPF,y.xs.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),x.TANGENT,y.Xm.fromTypedArray(e),n,y.Xm.fromTypedArray(r),o,y.xs.fromTypedArray(i,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let l=3;l<t.length;l+=4)i[l]=t[l];return i}function b(t,e,n,r,o,i){if(!L(E.FROM_PCPF,y.xs.fromTypedArray(t,16),x.TANGENT,y.Xm.fromTypedArray(e),n,y.Xm.fromTypedArray(r),o,y.xs.fromTypedArray(i,16)))return null;for(let l=3;l<t.length;l+=4)i[l]=t[l];return i}var x,E,O;function P(t,e,n,r,i){switch((0,f.l)(r,n,j,r),t===E.FROM_PCPF&&(0,l.B8)(j,j),e){case x.NORMAL:return(0,o.Ge)(i,j);case x.TANGENT:return(0,o.z0)(i,j)}}function L(t,e,n,r,o,i,l,a){if(!e)return;const s=r.count;if(function(t){return t.isWGS84||(0,g.x1)(t)||(0,g.q8)(t)||(0,g.KQ)(t)}(o))for(let f=0;f<s;f++)i.getVec(f,G),e.getVec(f,U),(0,u.o)(U,U,P(t,n,G,l,V)),a.setVec(f,U);else for(let f=0;f<s;f++){i.getVec(f,G),e.getVec(f,U);const o=(0,d.jg)(r.get(f,1));let s=Math.cos(o);n===x.TANGENT!=(t===E.TO_PCPF)&&(s=1/s),P(t,n,G,l,V),t===E.TO_PCPF?(V[0]*=s,V[1]*=s,V[2]*=s,V[3]*=s,V[4]*=s,V[5]*=s):(V[0]*=s,V[3]*=s,V[6]*=s,V[1]*=s,V[4]*=s,V[7]*=s),(0,u.o)(U,U,V),(0,u.n)(U,U),a.setVec(f,U)}return a}(O=x||(x={}))[O.NORMAL=0]="NORMAL",O[O.TANGENT=1]="TANGENT",function(t){t[t.TO_PCPF=0]="TO_PCPF",t[t.FROM_PCPF=1]="FROM_PCPF"}(E||(E={}));const G=(0,s.vt)(),U=(0,s.vt)(),j=(0,a.vt)(),V=(0,i.vt)()},5025:(t,e,n)=>{n.d(e,{UR:()=>w,p5:()=>v,xK:()=>N});var r=n(539),o=n(92504),i=n(92976),l=n(25423),a=n(78607),u=n(21742),s=n(86128),f=n(24121),c=n(58359),p=n(32937),g=n(59538),d=n(42609),y=n(1114),h=n(87926),A=n(21839),m=n(72188);const T=()=>r.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function v(t,e,{vertexSpace:n,spatialReference:r}){if("georeferenced"===n.type){const o=t;if(!(0,d.g)(e,o,r))return!1;const{origin:i}=n;return(0,f.d)(t,o,i),!0}const o=(0,p.lO)(r),i=t;if(!(0,d.g)(e,i,o))return!1;const{origin:l}=n,a=E;if(!(0,g.l)(r,l,a,o))return!1;const s=(0,u.B8)(E,a);return null!=s&&((0,f.t)(t,i,s),!0)}function w(t,e,n){const{vertexSpace:r,transform:o,vertexAttributes:i}=t,a=(0,y.Hq)(r)?o:null,c=S(t.spatialReference,n,O.SOURCE_AND_TARGET);if((0,y.yJ)(r,e)&&(!a||(0,u.t2)(a.localMatrix,s.zK))&&F(c)){const{position:t,normal:e,tangent:r}=i,o=n?.allowBufferReuse;return{position:o?t:t.slice(),normal:o?e:e?.slice(),tangent:o?r:r?.slice()}}switch(t.vertexSpace.type){case"local":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:n},{origin:r},o,i){const l=B(e,i);if(!(0,g.l)(e,r,_,l))return(0,m.CN)(T(),e,l),null;if(n&&(0,u.lw)(_,_,n.localMatrix),!(0,g.l)(e,o,C,l))return(0,m.CN)(T(),l,e),null;(0,u.B8)(C,C);const a=(0,u.lw)(_,C,_);return R(a,e,i,O.SOURCE_AND_TARGET),M(t,a)}(t,t.vertexSpace,e.origin,n):function({spatialReference:t,vertexAttributes:e,transform:n},{origin:r},o,i){const l=B(t,i);if(!(0,g.l)(t,r,_,l))return(0,m.CN)(T(),t,l),null;n&&(0,u.lw)(_,_,n.localMatrix),R(_,t,i,O.SOURCE);const a=new Float64Array(e.position.length),s=function(t,e,n,r,o){(0,A.t)(r,t,e);const i=new Float64Array(t.length);return(0,m.$5)(r,o,i,n)?i:((0,m.CN)(T(),o,n),null)}(e.position,_,t,a,l);if(!s)return null;const c=function(t,e,n,r,o,i){if(null==o)return null;const l=new Float32Array(o.length);return(0,m.qs)(o,l,i),(0,m.si)(l,t,e,n,r,l)?l:((0,m.CN)(T(),r,e),null)}(s,t,a,l,e.normal,_);if(e.normal&&!c)return null;const p=function(t,e,n,r,o,i){if(null==o)return null;const l=new Float32Array(o.length);return(0,m.KM)(o,l,i),(0,m.Mv)(l,t,e,n,r,l)?l:((0,m.CN)(T(),r,e),null)}(s,t,a,l,e.tangent,_);if(e.tangent&&!p)return null;if(o){const t=(0,f.u)(x,o);(0,A.a)(s,s,t)}return{position:s,normal:c,tangent:p}}(t,t.vertexSpace,e.origin,n);case"georeferenced":return"local"===e.type?function({vertexAttributes:t,spatialReference:e,transform:n},{origin:r},o,i){const a=B(e,i);if(!(0,g.l)(e,o,_,a))return(0,m.CN)(T(),e,a),null;const s=1/S(e,i,O.TARGET);(0,u.hs)(_,_,[s,s,s]);const f=(0,u.B8)(C,_),{position:c,normal:p,tangent:d}=function(t,e,n){if(!e)return t;if(!n){const{position:n,normal:r,tangent:o}=t;return{position:(0,A.a)(new Float64Array(n.length),n,e),tangent:o,normal:r}}const r=M(t,n.localMatrix);return(0,A.a)(r.position,r.position,e),r}(t,r,n),y=new Float64Array(c.length),h=function(t,e,n,r,o){const i=(0,m.gr)(t,e,r,o);if(!i)return(0,m.CN)(T(),e,o),null;const l=new Float64Array(i.length);return(0,A.t)(l,i,n),l}(c,e,f,y,a);if(!h)return null;const v=(0,l.Ge)(b,f),w=function(t,e,n,r,o,i,l){if(null==t)return null;const a=l??new Float32Array(t.length);return(0,m.X4)(t,e,n,r,o,a)?((0,A.b)(a,a,i),a):((0,m.CN)(T(),n,o),null)}(p,c,e,y,a,v,p!==t.normal?p:void 0);if(!w&&p)return null;const R=function(t,e,n,r,o,i,l){if(null==t)return null;const a=l??new Float32Array(t.length);return(0,m.xA)(t,e,n,r,o,a)?((0,A.b)(a,a,i,4),a):((0,m.CN)(T(),n,o),null)}(d,c,e,y,a,v,d!==t.tangent?d:void 0);return!R&&d?null:{position:h,normal:w,tangent:R}}(t,t.vertexSpace,e.origin,n):function({vertexAttributes:t,transform:e,spatialReference:n},{origin:r},o,i){const l=S(n,i,O.SOURCE_AND_TARGET),a=r||!F(l)?(0,u.C)(_,e?.localMatrix??s.zK):null;a&&R(a,n,i,O.SOURCE_AND_TARGET);const{position:c,normal:p,tangent:g}=a?M(t,a):t,d=i?.allowBufferReuse,y=d?c:new Float64Array(c.length);let h=c;if(r&&(h=(0,A.a)(y,h,r)),o){const t=(0,f.u)(x,o);h=(0,A.a)(y,h,t)}return{position:h!==t.position||d?h:h.slice(),normal:p!==t.normal||d?p:p?.slice(),tangent:g!==t.tangent||d?g:g?.slice()}}(t,t.vertexSpace,e.origin,n)}}function B(t,e){return e?.useEllipsoid&&(0,h.B3)(t)?p.Y0:(0,p.lO)(t)}function M(t,e){const n=new Float64Array(t.position.length);(0,A.t)(n,t.position,e);const r=t.normal?new Float32Array(t.normal.length):null,o=t.tangent?new Float32Array(t.tangent.length):null;return r&&t.normal&&(0,m.qs)(t.normal,r,e),o&&t.tangent&&(0,m.KM)(t.tangent,o,e),{position:n,normal:r,tangent:o}}function R(t,e,n,r){const o=S(e,n,r);F(o)||(0,u.hs)(t,t,[o,o,o])}function S(t,e,n){const r=!!(n&O.SOURCE),o=!!(n&O.TARGET),i=e?.sourceUnit,l=e?.targetUnit;if(!i&&!l)return 1;let a=N(i,t);r||!i||F(a)||(T().warn("source unit conversion not supported"),a=1);let u=1/N(l,t);return o||!l||F(u)||(T().warn("target unit conversion not supported"),u=1),a*u}function F(t){return(0,o.Io)(t,1)}function N(t,e){if(null==t)return 1;const n=(0,i.KX)(e);return 1/(0,i.oU)(n,"meters",t)}const _=(0,s.vt)(),C=(0,s.vt)(),b=(0,a.vt)(),x=(0,c.vt)(),E=(0,s.vt)();var O,P;(P=O||(O={}))[P.NONE=0]="NONE",P[P.SOURCE=1]="SOURCE",P[P.TARGET=2]="TARGET",P[P.SOURCE_AND_TARGET=3]="SOURCE_AND_TARGET"}}]);