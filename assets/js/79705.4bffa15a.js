"use strict";
exports.id = 79705;
exports.ids = [79705,45970,4371];
exports.modules = {

/***/ 45476:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ColumnDescriptor: () => (/* binding */ V),
/* harmony export */   FieldMetadata: () => (/* binding */ Y),
/* harmony export */   FileMetadata: () => (/* binding */ N),
/* harmony export */   GeometryInfoDescriptor: () => (/* binding */ J),
/* harmony export */   GeometryType: () => (/* binding */ E),
/* harmony export */   MultiScaleInfo: () => (/* binding */ Q),
/* harmony export */   PageEncodingDescriptor: () => (/* binding */ tt),
/* harmony export */   ParquetChunk: () => (/* binding */ _t),
/* harmony export */   ParquetFile: () => (/* binding */ rt),
/* harmony export */   QuantizedGeometry: () => (/* binding */ ot),
/* harmony export */   RangeProviderJs: () => (/* binding */ at),
/* harmony export */   RowGroup: () => (/* binding */ ct),
/* harmony export */   "default": () => (/* binding */ bt),
/* harmony export */   enableTracing: () => (/* binding */ I),
/* harmony export */   initSync: () => (/* binding */ lt),
/* harmony export */   readFile: () => (/* binding */ B),
/* harmony export */   readFileFromBinary: () => (/* binding */ S),
/* harmony export */   readMetadata: () => (/* binding */ j),
/* harmony export */   readMetadataFromFile: () => (/* binding */ C)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let t;const e=new Array(128).fill(void 0);function _(t){return e[t]}e.push(void 0,null,!0,!1);let n=e.length;function r(t){n===e.length&&e.push(e.length+1);const _=n;return n=e[_],e[_]=t,_}function i(e,_){try{return e.apply(this,_)}catch(n){t.__wbindgen_exn_store(r(n))}}const o="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&o.decode();let s=null;function a(){return null!==s&&0!==s.byteLength||(s=new Uint8Array(t.memory.buffer)),s}function g(t,e){return t>>>=0,o.decode(a().subarray(t,t+e))}let c=0;const d="undefined"!=typeof TextEncoder?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},u="function"==typeof d.encodeInto?function(t,e){return d.encodeInto(t,e)}:function(t,e){const _=d.encode(t);return e.set(_),{read:t.length,written:_.length}};function w(t,e,_){if(void 0===_){const _=d.encode(t),n=e(_.length,1)>>>0;return a().subarray(n,n+_.length).set(_),c=_.length,n}let n=t.length,r=e(n,1)>>>0;const i=a();let o=0;for(;o<n;o++){const e=t.charCodeAt(o);if(e>127)break;i[r+o]=e}if(o!==n){0!==o&&(t=t.slice(o)),r=_(r,n,n=o+3*t.length,1)>>>0;const e=a().subarray(r+o,r+n);o+=u(t,e).written,r=_(r,n,o,1)>>>0}return c=o,r}let l=null;function b(){return(null===l||!0===l.buffer.detached||void 0===l.buffer.detached&&l.buffer!==t.memory.buffer)&&(l=new DataView(t.memory.buffer)),l}function p(t){return null==t}function f(t){t<132||(e[t]=n,n=t)}function y(t){const e=_(t);return f(t),e}const h="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>{t.__wbindgen_export_4.get(e.dtor)(e.a,e.b)}));function m(e,_,n,r){const i={a:e,b:_,cnt:1,dtor:n},o=(...e)=>{i.cnt++;const _=i.a;i.a=0;try{return r(_,i.b,...e)}finally{0===--i.cnt?(t.__wbindgen_export_4.get(i.dtor)(_,i.b),h.unregister(i)):i.a=_}};return o.original=i,h.register(o,i,i),o}function k(t,e){return t>>>=0,a().subarray(t/1,t/1+e)}function I(){t.enableTracing()}let F=null;function v(){return null!==F&&0!==F.byteLength||(F=new Float64Array(t.memory.buffer)),F}function T(t,e){return t>>>=0,v().subarray(t/8,t/8+e)}let x=null;function z(){return null!==x&&0!==x.byteLength||(x=new Uint32Array(t.memory.buffer)),x}function q(t,e){return t>>>=0,z().subarray(t/4,t/4+e)}function R(t,e){t>>>=0;const _=b(),n=[];for(let r=t;r<t+4*e;r+=4)n.push(y(_.getUint32(r,!0)));return n}let O=null;function M(){return null!==O&&0!==O.byteLength||(O=new Uint16Array(t.memory.buffer)),O}function A(t,e){const _=e(2*t.length,2)>>>0;return M().set(t,_/2),c=t.length,_}function j(e,_,n){const i=w(e,t.__wbindgen_malloc,t.__wbindgen_realloc),o=c;return y(t.readMetadata(i,o,r(_),r(n)))}function W(t,e){const _=e(1*t.length,1)>>>0;return a().set(t,_/1),c=t.length,_}function C(e){const _=W(e,t.__wbindgen_malloc),n=c;return y(t.readMetadataFromFile(_,n))}function L(t,e){if(!(t instanceof e))throw new Error(`expected instance of ${e.name}`)}function B(e,_,n,i,o){const s=w(e,t.__wbindgen_malloc,t.__wbindgen_realloc),a=c;L(i,N);var g=i.__destroy_into_raw();let d=0;p(o)||(L(o,J),d=o.__destroy_into_raw());return y(t.readFile(s,a,r(_),r(n),g,d))}function S(e,_){let n=0;p(e)||(L(e,J),n=e.__destroy_into_raw());const r=W(_,t.__wbindgen_malloc),i=c;return y(t.readFileFromBinary(n,r,i))}function U(e,_,n){t._dyn_core__ops__function__FnMut__A____Output___R_as_wasm_bindgen__closure__WasmClosure___describe__invoke__h94c9328f486d7193(e,_,r(n))}function D(e,_,n,i){t.wasm_bindgen__convert__closures__invoke2_mut__ha20fd0c25f0fd1fd(e,_,r(n),r(i))}const E=Object.freeze({Point:0,0:"Point",Polygon:1,1:"Polygon",Polyline:2,2:"Polyline",Multipoint:3,3:"Multipoint"}),P=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeBigInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],G="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_columndescriptor_free(e>>>0,1)));class V{static __wrap(t){t>>>=0;const e=Object.create(V.prototype);return e.__wbg_ptr=t,G.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,G.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_columndescriptor_free(e,0)}name(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_name(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}physicalType(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_physicalType(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}logicalType(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_logicalType(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=g(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}encodings(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_encodings(r,this.__wbg_ptr);var e=b().getInt32(r+0,!0),_=b().getInt32(r+4,!0),n=R(e,_).slice();return t.__wbindgen_free(e,4*_,4),n}finally{t.__wbindgen_add_to_stack_pointer(16)}}pageEncodings(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_pageEncodings(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=R(e,_).slice(),t.__wbindgen_free(e,4*_,4)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}numValues(){return t.columndescriptor_numValues(this.__wbg_ptr)}compression(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_compression(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}compressedSize(){return t.columndescriptor_compressedSize(this.__wbg_ptr)}uncompressedSize(){return t.columndescriptor_uncompressedSize(this.__wbg_ptr)}nullCount(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_nullCount(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getBigInt64(n+8,!0);return 0===e?void 0:_}finally{t.__wbindgen_add_to_stack_pointer(16)}}distinctCount(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_distinctCount(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getBigInt64(n+8,!0);return 0===e?void 0:_}finally{t.__wbindgen_add_to_stack_pointer(16)}}minValue(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_minValue(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=k(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}maxValue(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.columndescriptor_maxValue(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=k(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}}const X="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_fieldmetadata_free(e>>>0,1)));class Y{static __wrap(t){t>>>=0;const e=Object.create(Y.prototype);return e.__wbg_ptr=t,X.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,X.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_fieldmetadata_free(e,0)}get name(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.fieldmetadata_name(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}get index(){return t.fieldmetadata_index(this.__wbg_ptr)}get type(){const e=t.fieldmetadata_esri_type(this.__wbg_ptr);return P[e]}get physicalType(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.fieldmetadata_physical_type(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=g(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}get logicalType(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.fieldmetadata_logical_type(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=g(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}}const H="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_filemetadata_free(e>>>0,1)));class N{static __wrap(t){t>>>=0;const e=Object.create(N.prototype);return e.__wbg_ptr=t,H.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,H.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_filemetadata_free(e,0)}version(){return t.filemetadata_version(this.__wbg_ptr)}numRows(){return t.filemetadata_numRows(this.__wbg_ptr)>>>0}numFields(){return t.filemetadata_numFields(this.__wbg_ptr)>>>0}numColumns(){return t.filemetadata_numColumns(this.__wbg_ptr)>>>0}createdBy(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.filemetadata_createdBy(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=g(e,_).slice(),t.__wbindgen_free(e,1*_,1)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}keyValueMetadata(e){try{const r=t.__wbindgen_add_to_stack_pointer(-16),i=w(e,t.__wbindgen_malloc,t.__wbindgen_realloc),o=c;t.filemetadata_keyValueMetadata(r,this.__wbg_ptr,i,o);var _=b().getInt32(r+0,!0),n=b().getInt32(r+4,!0);let s;return 0!==_&&(s=g(_,n).slice(),t.__wbindgen_free(_,1*n,1)),s}finally{t.__wbindgen_add_to_stack_pointer(16)}}keys(){try{const n=t.__wbindgen_add_to_stack_pointer(-16);t.filemetadata_keys(n,this.__wbg_ptr);var e=b().getInt32(n+0,!0),_=b().getInt32(n+4,!0);let r;return 0!==e&&(r=R(e,_).slice(),t.__wbindgen_free(e,4*_,4)),r}finally{t.__wbindgen_add_to_stack_pointer(16)}}getFieldIndex(e){const _=w(e,t.__wbindgen_malloc,t.__wbindgen_realloc),n=c,r=t.filemetadata_getFieldIndex(this.__wbg_ptr,_,n);return 16777215===r?void 0:r}getFieldByIndex(e){const _=t.filemetadata_getFieldByIndex(this.__wbg_ptr,e);return 0===_?void 0:Y.__wrap(_)}getFields(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.filemetadata_getFields(r,this.__wbg_ptr);var e=b().getInt32(r+0,!0),_=b().getInt32(r+4,!0),n=R(e,_).slice();return t.__wbindgen_free(e,4*_,4),n}finally{t.__wbindgen_add_to_stack_pointer(16)}}}const $="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_geometryinfodescriptor_free(e>>>0,1)));class J{static __wrap(t){t>>>=0;const e=Object.create(J.prototype);return e.__wbg_ptr=t,$.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,$.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_geometryinfodescriptor_free(e,0)}get geometryType(){const e=t.__wbg_get_geometryinfodescriptor_geometryType(this.__wbg_ptr);return 4===e?void 0:e}set geometryType(e){t.__wbg_set_geometryinfodescriptor_geometryType(this.__wbg_ptr,p(e)?4:e)}get wkbIndex(){const e=t.__wbg_get_geometryinfodescriptor_wkbIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set wkbIndex(e){t.__wbg_set_geometryinfodescriptor_wkbIndex(this.__wbg_ptr,p(e)?16777215:e)}get lngIndex(){const e=t.__wbg_get_geometryinfodescriptor_lngIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set lngIndex(e){t.__wbg_set_geometryinfodescriptor_lngIndex(this.__wbg_ptr,p(e)?16777215:e)}get latIndex(){const e=t.__wbg_get_geometryinfodescriptor_latIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set latIndex(e){t.__wbg_set_geometryinfodescriptor_latIndex(this.__wbg_ptr,p(e)?16777215:e)}get xIndex(){const e=t.__wbg_get_geometryinfodescriptor_xIndex(this.__wbg_ptr);return 16777215===e?void 0:e}set xIndex(e){t.__wbg_set_geometryinfodescriptor_xIndex(this.__wbg_ptr,p(e)?16777215:e)}get inWkid(){const e=t.__wbg_get_geometryinfodescriptor_inWkid(this.__wbg_ptr);return 4294967297===e?void 0:e}set inWkid(e){t.__wbg_set_geometryinfodescriptor_inWkid(this.__wbg_ptr,p(e)?4294967297:e>>>0)}get outWkid(){const e=t.__wbg_get_geometryinfodescriptor_outWkid(this.__wbg_ptr);return 4294967297===e?void 0:e}set outWkid(e){t.__wbg_set_geometryinfodescriptor_outWkid(this.__wbg_ptr,p(e)?4294967297:e>>>0)}static new(){const e=t.geometryinfodescriptor_new();return J.__wrap(e)}setMultiscaleInfo(e){L(e,Q);var _=e.__destroy_into_raw();t.geometryinfodescriptor_setMultiscaleInfo(this.__wbg_ptr,_)}}const K="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_multiscaleinfo_free(e>>>0,1)));class Q{static __wrap(t){t>>>=0;const e=Object.create(Q.prototype);return e.__wbg_ptr=t,K.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,K.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_multiscaleinfo_free(e,0)}static new(){const e=t.multiscaleinfo_new();return Q.__wrap(e)}push(e,_,n,r,i){t.multiscaleinfo_push(this.__wbg_ptr,e,_,n,r,i)}}const Z="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_pageencodingdescriptor_free(e>>>0,1)));class tt{static __wrap(t){t>>>=0;const e=Object.create(tt.prototype);return e.__wbg_ptr=t,Z.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,Z.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_pageencodingdescriptor_free(e,0)}pageType(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.pageencodingdescriptor_pageType(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}encoding(){let e,_;try{const i=t.__wbindgen_add_to_stack_pointer(-16);t.pageencodingdescriptor_encoding(i,this.__wbg_ptr);var n=b().getInt32(i+0,!0),r=b().getInt32(i+4,!0);return e=n,_=r,g(n,r)}finally{t.__wbindgen_add_to_stack_pointer(16),t.__wbindgen_free(e,_,1)}}count(){return t.pageencodingdescriptor_count(this.__wbg_ptr)}}const et="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_parquetchunk_free(e>>>0,1)));class _t{static __wrap(t){t>>>=0;const e=Object.create(_t.prototype);return e.__wbg_ptr=t,et.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,et.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_parquetchunk_free(e,0)}size(){return t.parquetchunk_size(this.__wbg_ptr)>>>0}hasField(e){return 0!==t.parquetchunk_hasField(this.__wbg_ptr,e)}readX(e){return t.parquetchunk_readX(this.__wbg_ptr,e)}readY(e){return t.parquetchunk_readY(this.__wbg_ptr,e)}readCoords(e){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.parquetchunk_readCoords(r,this.__wbg_ptr,e);var _=b().getInt32(r+0,!0),n=b().getInt32(r+4,!0);let i;return 0!==_&&(i=T(_,n).slice(),t.__wbindgen_free(_,8*n,8)),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}readLengths(e){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.parquetchunk_readLengths(r,this.__wbg_ptr,e);var _=b().getInt32(r+0,!0),n=b().getInt32(r+4,!0);let i;return 0!==_&&(i=q(_,n).slice(),t.__wbindgen_free(_,4*n,4)),i}finally{t.__wbindgen_add_to_stack_pointer(16)}}readGeometryTransformed(e,_,n,r,i){const o=t.parquetchunk_readGeometryTransformed(this.__wbg_ptr,e,_,n,r,i);return 0===o?void 0:ot.__wrap(o)}boundsXMin(e){return t.parquetchunk_boundsXMin(this.__wbg_ptr,e)}boundsYMin(e){return t.parquetchunk_boundsYMin(this.__wbg_ptr,e)}boundsXMax(e){return t.parquetchunk_boundsXMax(this.__wbg_ptr,e)}boundsYMax(e){return t.parquetchunk_boundsYMax(this.__wbg_ptr,e)}readAttribute(e,_){return y(t.parquetchunk_readAttribute(this.__wbg_ptr,e,_))}}const nt="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_parquetfile_free(e>>>0,1)));class rt{static __wrap(t){t>>>=0;const e=Object.create(rt.prototype);return e.__wbg_ptr=t,nt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,nt.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_parquetfile_free(e,0)}metadata(){const e=t.parquetfile_metadata(this.__wbg_ptr);return N.__wrap(e)}rowGroups(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.parquetfile_rowGroups(r,this.__wbg_ptr);var e=b().getInt32(r+0,!0),_=b().getInt32(r+4,!0),n=R(e,_).slice();return t.__wbindgen_free(e,4*_,4),n}finally{t.__wbindgen_add_to_stack_pointer(16)}}readChunksWithCallback(e,_){const n=A(e,t.__wbindgen_malloc),i=c;return y(t.parquetfile_readChunksWithCallback(this.__wbg_ptr,n,i,r(_)))}readFirstChunk(e){const _=A(e,t.__wbindgen_malloc),n=c;return y(t.parquetfile_readFirstChunk(this.__wbg_ptr,_,n))}readAllChunks(e){const _=A(e,t.__wbindgen_malloc),n=c;return y(t.parquetfile_readAllChunks(this.__wbg_ptr,_,n))}updateChunks(e){const _=A(e,t.__wbindgen_malloc),n=c;return y(t.parquetfile_updateChunks(this.__wbg_ptr,_,n))}}const it="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_quantizedgeometry_free(e>>>0,1)));class ot{static __wrap(t){t>>>=0;const e=Object.create(ot.prototype);return e.__wbg_ptr=t,it.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,it.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_quantizedgeometry_free(e,0)}readCoordsUnsafe(){return y(t.quantizedgeometry_readCoordsUnsafe(this.__wbg_ptr))}readLengthsUnsafe(){return y(t.quantizedgeometry_readLengthsUnsafe(this.__wbg_ptr))}}const st="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_rangeproviderjs_free(e>>>0,1)));class at{static __wrap(t){t>>>=0;const e=Object.create(at.prototype);return e.__wbg_ptr=t,st.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,st.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_rangeproviderjs_free(e,0)}static new(e,_){const n=t.rangeproviderjs_new(r(e),r(_));return at.__wrap(n)}static withFetch(){const e=t.rangeproviderjs_withFetch();return at.__wrap(e)}}const gt="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry((e=>t.__wbg_rowgroup_free(e>>>0,1)));class ct{static __wrap(t){t>>>=0;const e=Object.create(ct.prototype);return e.__wbg_ptr=t,gt.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,gt.unregister(this),t}free(){const e=this.__destroy_into_raw();t.__wbg_rowgroup_free(e,0)}columns(){try{const r=t.__wbindgen_add_to_stack_pointer(-16);t.rowgroup_columns(r,this.__wbg_ptr);var e=b().getInt32(r+0,!0),_=b().getInt32(r+4,!0),n=R(e,_).slice();return t.__wbindgen_free(e,4*_,4),n}finally{t.__wbindgen_add_to_stack_pointer(16)}}}async function dt(t,e){if("function"==typeof Response&&t instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(t,e)}catch(_){if("application/wasm"==t.headers.get("Content-Type"))throw _;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_)}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}{const _=await WebAssembly.instantiate(t,e);return _ instanceof WebAssembly.Instance?{instance:_,module:t}:_}}function ut(){const e={wbg:{}};return e.wbg.__wbg_buffer_609cc3eee51ed158=function(t){return r(_(t).buffer)},e.wbg.__wbg_call_672a4d21634d4a24=function(){return i((function(t,e){return r(_(t).call(_(e)))}),arguments)},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return i((function(t,e,n){return r(_(t).call(_(e),_(n)))}),arguments)},e.wbg.__wbg_call_b8adc8b1d0a0d8eb=function(){return i((function(t,e,n,i,o){return r(_(t).call(_(e),_(n),_(i),_(o)))}),arguments)},e.wbg.__wbg_columndescriptor_new=function(t){return r(V.__wrap(t))},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(e,_){let n,r;try{n=e,r=_,console.error(g(e,_))}finally{t.__wbindgen_free(n,r,1)}},e.wbg.__wbg_fieldmetadata_new=function(t){return r(Y.__wrap(t))},e.wbg.__wbg_filemetadata_new=function(t){return r(N.__wrap(t))},e.wbg.__wbg_length_a446193dc22c12f8=function(t){return _(t).length},e.wbg.__wbg_new_23a2665fac83c611=function(t,e){try{var _={a:t,b:e},n=(t,e)=>{const n=_.a;_.a=0;try{return D(n,_.b,t,e)}finally{_.a=n}};return r(new Promise(n))}finally{_.a=_.b=0}},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return r(new Error)},e.wbg.__wbg_new_a12002a7f91c75be=function(t){return r(new Uint8Array(_(t)))},e.wbg.__wbg_newnoargs_105ed471475aaf50=function(t,e){return r(new Function(g(t,e)))},e.wbg.__wbg_newwithbyteoffsetandlength_f1dead44d1fc7212=function(t,e,n){return r(new Uint32Array(_(t),e>>>0,n>>>0))},e.wbg.__wbg_newwithbyteoffsetandlength_f254047f7e80e7ff=function(t,e,n){return r(new Int16Array(_(t),e>>>0,n>>>0))},e.wbg.__wbg_pageencodingdescriptor_new=function(t){return r(tt.__wrap(t))},e.wbg.__wbg_parquetchunk_new=function(t){return r(_t.__wrap(t))},e.wbg.__wbg_parquetfile_new=function(t){return r(rt.__wrap(t))},e.wbg.__wbg_queueMicrotask_98e746b9f850fe3d=function(t){queueMicrotask(_(t))},e.wbg.__wbg_queueMicrotask_c847cc8372bec908=function(t){return r(_(t).queueMicrotask)},e.wbg.__wbg_resolve_4851785c9c5f573d=function(t){return r(Promise.resolve(_(t)))},e.wbg.__wbg_rowgroup_new=function(t){return r(ct.__wrap(t))},e.wbg.__wbg_set_65595bdd868b3009=function(t,e,n){_(t).set(_(e),n>>>0)},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(e,n){const r=w(_(n).stack,t.__wbindgen_malloc,t.__wbindgen_realloc),i=c;b().setInt32(e+4,i,!0),b().setInt32(e+0,r,!0)},e.wbg.__wbg_static_accessor_GLOBAL_88a902d13a557d07=function(){const t="undefined"==typeof global?null:global;return p(t)?0:r(t)},e.wbg.__wbg_static_accessor_GLOBAL_THIS_56578be7e9f832b0=function(){const t="undefined"==typeof globalThis?null:globalThis;return p(t)?0:r(t)},e.wbg.__wbg_static_accessor_SELF_37c5d418e4bf5819=function(){const t="undefined"==typeof self?null:self;return p(t)?0:r(t)},e.wbg.__wbg_static_accessor_WINDOW_5de37043a91a9c40=function(){const t="undefined"==typeof window?null:window;return p(t)?0:r(t)},e.wbg.__wbg_then_44b73946d2fb3e7d=function(t,e){return r(_(t).then(_(e)))},e.wbg.__wbg_then_48b406749878a531=function(t,e,n){return r(_(t).then(_(e),_(n)))},e.wbg.__wbg_valueOf_fdbb54fcdfe33477=function(t){return _(t).valueOf()},e.wbg.__wbindgen_array_new=function(){return r([])},e.wbg.__wbindgen_array_push=function(t,e){_(t).push(y(e))},e.wbg.__wbindgen_cb_drop=function(t){const e=y(t).original;if(1==e.cnt--)return e.a=0,!0;return!1},e.wbg.__wbindgen_closure_wrapper1479=function(t,e,_){return r(m(t,e,79,U))},e.wbg.__wbindgen_is_function=function(t){return"function"==typeof _(t)},e.wbg.__wbindgen_is_undefined=function(t){return void 0===_(t)},e.wbg.__wbindgen_memory=function(){return r(t.memory)},e.wbg.__wbindgen_number_new=function(t){return r(t)},e.wbg.__wbindgen_object_clone_ref=function(t){return r(_(t))},e.wbg.__wbindgen_object_drop_ref=function(t){y(t)},e.wbg.__wbindgen_string_new=function(t,e){return r(g(t,e))},e.wbg.__wbindgen_throw=function(t,e){throw new Error(g(t,e))},e.wbg.__wbindgen_uint8_array_new=function(e,_){var n=k(e,_).slice();t.__wbindgen_free(e,1*_,1);return r(n)},e}function wt(e,_){return t=e.exports,bt.__wbindgen_wasm_module=_,l=null,F=null,O=null,x=null,s=null,t.__wbindgen_start(),t}function lt(e){if(void 0!==t)return t;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module:e}=e):console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const _=ut();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));return wt(new WebAssembly.Instance(e,_),e)}async function bt(e){if(void 0!==t)return t;void 0!==e&&(Object.getPrototypeOf(e)===Object.prototype?({module_or_path:e}=e):console.warn("using deprecated parameters for the initialization function; pass a single object instead"));const _=ut();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await dt(await e,_);return wt(n,r)}


/***/ }),

/***/ 38561:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}


/***/ }),

/***/ 3912:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fA: () => (/* binding */ r),
/* harmony export */   o8: () => (/* binding */ t),
/* harmony export */   vt: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports ONES, UNIT_X, UNIT_Y, UNIT_Z, ZEROS, ones, unitX, unitY, unitZ, v, zeros */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function e(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function c(){return r(0,1,0)}function i(){return r(0,0,1)}const a=e(),f=o(),l=u(),s=c(),_=i(),y=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:s,UNIT_Z:_,ZEROS:a,clone:t,create:n,fromValues:r,ones:o,unitX:u,unitY:c,unitZ:i,zeros:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 40275:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fA: () => (/* binding */ r),
/* harmony export */   vt: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports ONES, UNIT_W, UNIT_X, UNIT_Y, UNIT_Z, ZEROS, clone, ones, unitW, unitX, unitY, unitZ, v, zeros */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(){return new Float32Array(4)}function t(n){const t=new Float32Array(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r(n,t,r,e){const o=new Float32Array(4);return o[0]=n,o[1]=t,o[2]=r,o[3]=e,o}function e(){return n()}function o(){return r(1,1,1,1)}function u(){return r(1,0,0,0)}function c(){return r(0,1,0,0)}function i(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const a=e(),l=o(),_=u(),s=c(),y=i(),N=f(),T=Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_W:N,UNIT_X:_,UNIT_Y:s,UNIT_Z:y,ZEROS:a,clone:t,create:n,fromValues:r,ones:o,unitW:f,unitX:u,unitY:c,unitZ:i,zeros:e},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 27243:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const t={convertToGEGeometry:s,exportPoint:n,exportPolygon:o,exportPolyline:a,exportMultipoint:c,exportExtent:m};function s(t,s){return null==s?null:t.convertJSONToGeometry(s)}class i{constructor(t,s,i){this.x=t,this.y=s,this.spatialReference=i,this.z=void 0,this.m=void 0}}function n(t,s,n){const e=new i(t.getPointX(s),t.getPointY(s),n),o=t.hasZ(s),h=t.hasM(s);return o&&(e.z=t.getPointZ(s)),h&&(e.m=t.getPointM(s)),e}class e{constructor(t,s,i,n){this.rings=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function o(t,s,i){return new e(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class h{constructor(t,s,i,n){this.paths=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function a(t,s,i){return new h(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class r{constructor(t,s,i,n){this.points=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function c(t,s,i){return new r(t.exportPoints(s),i,t.hasZ(s),t.hasM(s))}class x{constructor(t,s,i,n,e){this.xmin=t,this.ymin=s,this.xmax=i,this.ymax=n,this.spatialReference=e,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function m(t,s,i){const n=t.hasZ(s),e=t.hasM(s),o=new x(t.getXMin(s),t.getYMin(s),t.getXMax(s),t.getYMax(s),i);if(n){const i=t.getZExtent(s);o.zmin=i.vmin,o.zmax=i.vmax}if(e){const i=t.getMExtent(s);o.mmin=i.vmin,o.mmax=i.vmax}return o}


/***/ }),

/***/ 12244:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function*e(e){switch(e.type){case"object-id":case"unique-id-simple":return void(yield e.fieldName);case"unique-id-composite":return void(yield*e.fieldNames)}}


/***/ }),

/***/ 23783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cv: () => (/* binding */ j),
/* harmony export */   Nk: () => (/* binding */ x),
/* harmony export */   lK: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40189);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(68490);
/* harmony import */ var _geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27243);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87926);
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96082);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const p=[0,0];function c(s,t){if(!t)return null;if("x"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,p),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if("xmin"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,p),[e.xmax,e.ymax]=s(t.xmax,t.ymax,p),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return"rings"in t?{rings:h(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:h(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function h(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru):[t];await (0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.initializeProjection)(r.map((s=>({source:s,dest:n}))))}const y=c.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .lngLatToXY */ .je),g=c.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .xyToLngLat */ .tD);function j(s,t,e,u){if(!s)return null;if(e||(e=t,t=s.spatialReference),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(t)||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(e)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(t,e))return s;if((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(t,e)){const t=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(e)?y(s):g(s);return t.spatialReference=e,t}return (0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,[s],t,e,null,u)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createResolver */ .Tw)()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:u}=s;(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(e,i)?(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(i)?o(t.map(y)):o(t.map(g)):o((0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,t,e,i,u,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}


/***/ }),

/***/ 35746:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GC: () => (/* binding */ x),
/* harmony export */   T2: () => (/* binding */ B),
/* harmony export */   VY: () => (/* binding */ g),
/* harmony export */   dO: () => (/* binding */ h),
/* harmony export */   iJ: () => (/* binding */ w),
/* harmony export */   v8: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59851);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(92976);
/* harmony import */ var _geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(68490);
/* harmony import */ var _geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(90557);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(1171);
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(65231);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87926);
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(23783);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONMap */ .J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),S=Object.freeze({}),R="frequency";async function w(t,e,i){const r=t.bin;return r.onField&&(r.onField=r.onField.trim()),r.onExpression?.value&&(r.onExpression.value=r.onExpression.value.trim()),r.splitBy&&(r.splitBy.value&&(r.splitBy.value=r.splitBy.value.trim()),r.splitBy.outAlias&&(r.splitBy.outAlias=r.splitBy.outAlias.trim())),r.stackBy&&(r.stackBy.value&&(r.stackBy.value=r.stackBy.value.trim()),r.stackBy.outAlias&&(r.stackBy.outAlias=r.stackBy.outAlias.trim())),"normalizationField"in r.parameters&&r.parameters.normalizationField&&(r.parameters.normalizationField=r.parameters.normalizationField.trim()),t.outStatistics?.length||(t.outStatistics=[{statisticType:"count",onStatisticField:"1",outStatisticFieldName:R}]),x(t,e,i)}async function x(t,e,i){const{outFields:r,orderByFields:n,groupByFieldsForStatistics:a,outStatistics:o}=t;if(r)for(let s=0;s<r.length;s++)r[s]=r[s].trim();if(n)for(let s=0;s<n.length;s++)n[s]=n[s].trim();if(a)for(let s=0;s<a.length;s++)a[s]=a[s].trim();if(o)for(let s=0;s<o.length;s++)o[s].onStatisticField&&(o[s].onStatisticField=o[s].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),B(t,e,i)}async function B(t,e,i){if(!t)return null;let{where:r}=t;if(t.where=r=r?.trim(),(!r||/^1 *= *1$/.test(r)||e&&e===r)&&(t.where=null),!t.geometry)return t;let o=await v(t);if(t.distance=0,t.units=null,"esriSpatialRelEnvelopeIntersects"===t.spatialRel){const{spatialReference:e}=t.geometry;o=(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .getGeometryExtent */ .HA)(o),o.spatialReference=e}if(o){await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .checkProjectionSupport */ .Nk)(o.spatialReference,i),o=j(o,i);const e=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .normalizeCentralMeridian */ .el)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromJSON */ .rS)(o)))[0];if(null==e)throw S;const r="quantizationParameters"in t&&t.quantizationParameters?.tolerance||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,n=r&&F(o,i)?{densificationStep:8*r}:void 0,s=e.toJSON(),l=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .project */ .Cv)(s,s.spatialReference,i,n);if(!l)throw S;l.spatialReference=i,t.geometry=l}return t}function F(t,e){if(!t)return!1;const i=t.spatialReference;return((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isExtent */ .ZC)(t)||(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolygon */ .Bi)(t)||(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolyline */ .Rg)(t))&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .equals */ .aI)(i,e)&&!(0,_geometry_projectionUtils_js__WEBPACK_IMPORTED_MODULE_3__.canProjectWithoutEngine)(i,e)}function j(t,e){const i=t.spatialReference;return F(t,e)&&(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isExtent */ .ZC)(t)?{spatialReference:i,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function v(e){const{distance:r,units:n}=e,a=e.geometry;if(null==r||"vertexAttributes"in a)return a;const s=a.spatialReference,l=n?g.fromJSON(n):(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getUnitString */ .Ij)(s),m=s&&((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isGeographic */ .EA)(s)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .isWebMercator */ .K8)(s))?a:await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .checkProjectionSupport */ .Nk)(s,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .wgs84 */ .KK).then((()=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_8__/* .project */ .Cv)(a,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .wgs84 */ .KK))),f=await __webpack_require__.e(/* import() */ 31600).then(__webpack_require__.bind(__webpack_require__, 31600));await f.load();const S=f.execute(m,r||1,{unit:l})??void 0;if(!S||!(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isPolygon */ .Bi)(S)||0===S.rings.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("unsupported-query:invalid-parameters","Invalid parameters for query by distance");return S}function h(t,e){return null==t?null:"string"==typeof t?e?new Date(`1970-01-01T${t}Z`).getTime():new Date(t).getTime():t instanceof Date?t.getTime():t}


/***/ }),

/***/ 90670:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BL: () => (/* binding */ E),
/* harmony export */   Cz: () => (/* binding */ I),
/* harmony export */   KQ: () => (/* binding */ t),
/* harmony export */   M1: () => (/* binding */ o),
/* harmony export */   T1: () => (/* binding */ S),
/* harmony export */   dr: () => (/* binding */ _)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const _="ESRI__ID",I="ESRI__OriginID",t="ESRI__DestID",S="ESRI__LayoutGeometry",o="ESRI__AggregationCount",E="LC.ESRI__IsSpatial";


/***/ }),

/***/ 67262:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i_: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony exports latitudeFieldNames, longitudeFieldNames */
/* harmony import */ var _fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(42453);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,d,i){d=(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .normalizeFieldName */ .rS)(d)?.toLowerCase(),i=(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .normalizeFieldName */ .rS)(i)?.toLowerCase();const o=n.map((e=>e.toLowerCase())),a=d?n[o.indexOf(d)]:null,u=i?n[o.indexOf(i)]:null;return{longitudeFieldName:a||n[o.indexOf(t.find((e=>o.includes(e))))],latitudeFieldName:u||n[o.indexOf(l.find((e=>o.includes(e))))]}}const l=["lat","lat83","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point_y"],t=["lon","lng","lng83","long","long83","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point_x"];


/***/ }),

/***/ 87405:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  F: () => (/* binding */ timeSupport_i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/timeUtils.js
var timeUtils = __webpack_require__(46437);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/TimeExtent.js
var TimeExtent = __webpack_require__(17197);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/webmap/utils.js + 1 modules
var utils = __webpack_require__(94379);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/tagSymbols.js
var tagSymbols = __webpack_require__(93406);
;// ../node_modules/@arcgis/core/webscene/utils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function utils_t(t){return null!=t&&"object"==typeof t&&o in t}

;// ../node_modules/@arcgis/core/support/timeUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(t){return void 0!==t.timeInfo}async function u(t,e){return t.widgets?.timeSlider?.fullTimeExtent??a(t.allLayers,e)}function timeUtils_o(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?"instant":2===e?"time-window":null==t||0===t.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===e?"time-window":"cumulative-from-start"}function m(t){const{numStops:n,stopInterval:i,stops:r}=t;return r?{dates:e(r)}:i?{interval:i.clone()}:{count:n??5}}async function a(e,n){if(0===e.length)return i.allTime;await Promise.all(e.map((t=>t.load({signal:n}))));const r=e.filter(s),l=e.filter((t=>!s(t)&&null!=t.visibilityTimeExtent));if(0===r.length&&0===l.length)return i.allTime;const u=[],o=[];for(const t of r)"feature"!==t?.type&&"map-image"!==t?.type||!t.timeInfo?.hasLiveData?o.push(t):u.push(t);const m=t=>null==t||t.isAllTime,a=[...o.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...l.map((t=>t.visibilityTimeExtent))];if(a.some(m))return i.allTime;const f=u.map((async t=>{const e=(await t.fetchRecomputedExtents({signal:n}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return e?.intersection(i)??i})),c=(await Promise.allSettled(f)).map((t=>"fulfilled"===t.status?t.value:null));if(c.some(m))return i.allTime;const d=[...c,...a].filter(t);if(0===d.length)return i.allTime;return d.reduce(((t,e)=>t.union(e)))}function f(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:r,end:l}=n,s=r??l??null;switch(e){case"time-window":return new i({start:r,end:l});case"cumulative-from-start":return new i({start:null,end:s});case"cumulative-from-end":return new i({start:s,end:null});case"instant":return new i({start:s,end:s})}}async function c(t,e){if(!r(t)&&!l(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await u(t,e),s=n.loop,a=timeUtils_o(n);return{fullTimeExtent:i,loop:s,mode:a,playRate:n.stopDelay??2e3,stops:m(n),timeExtent:f(n,a)}}function d(t){if(!t)return t;const{start:e,end:r}=t;return new TimeExtent.T({start:null!=e?(0,timeUtils/* offsetDate */.S1)(e,-e.getTimezoneOffset(),"minutes"):e,end:null!=r?(0,timeUtils/* offsetDate */.S1)(r,-r.getTimezoneOffset(),"minutes"):r})}function p(t){if(!t)return t;const{start:e,end:r}=t;return new TimeExtent.T({start:null!=e?(0,timeUtils/* offsetDate */.S1)(e,e.getTimezoneOffset(),"minutes"):e,end:null!=r?(0,timeUtils/* offsetDate */.S1)(r,r.getTimezoneOffset(),"minutes"):r})}

;// ../node_modules/@arcgis/core/layers/support/timeSupport.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function timeSupport_i(i,n,s){if(null==i?.timeInfo)return null;const{datesInUnknownTimezone:l=!1,timeOffset:o,useViewTime:m}=i;let u=i.timeExtent;l&&(u=p(u));let r=m?n&&u?n.intersection(u):n||u:u;return!r||r.isEmpty||r.isAllTime?r:(o&&(r=r.offset(-o.value,o.unit)),l&&(r=d(r)),r.equals(s)?s:r)}


/***/ }),

/***/ 63952:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  L: () => (/* binding */ u)
});

// UNUSED EXPORTS: ParquetMetadata

// EXTERNAL MODULE: ../node_modules/@arcgis/core/request.js
var request = __webpack_require__(86394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/assets.js
var assets = __webpack_require__(99050);
;// ../node_modules/@arcgis/core/libs/parquet/loadParquetModule.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let n=null;async function loadParquetModule_s(){return n||(n=a()),n}async function a(){const n=await Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 45476));return await n.default({module_or_path:(0,assets/* getAssetUrl */.s)("esri/libs/parquet/pkg/bundle_bg.wasm")}),n}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/bundle.js
var bundle = __webpack_require__(45476);
;// ../node_modules/@arcgis/core/libs/parquet/parquet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const i=t=>async function(a,n,r){const i=t(),{data:s}=await (0,request/* default */.A)(a,{responseType:"array-buffer",query:i,headers:{range:`bytes=${n}-${r}`},useRequestQueue:!0});return s},s=t=>async function(a){const n=t(),{data:r}=await (0,request/* default */.A)(a,{responseType:"native",method:"head",query:n,useRequestQueue:!0}),i=r.headers.get("Content-Length");if(null==i)throw new Error("Unable to parse content length");return parseInt(i,10)};class o{static async create(e,a){const n=await loadParquetModule_s(),r=await n.readMetadata(e,i(a),s(a));return o.fromFileMetadata(r)}static fromFileMetadata(e){const t=[];for(let a=0;a<e.numFields();a++){const n=e.getFieldByIndex(a);t.push({name:n.name,type:n.type,alias:n.name,index:n.index}),n.free()}return new o(e,t)}constructor(e,t){this._inner=e,this.fields=t}destroy(){this._inner.free()}[Symbol.dispose](){this.destroy()}get size(){return this._inner.numRows()}getFieldIndex(e){return this._inner.getFieldIndex(e)}tryReadGeoMetadata(){const e=this._inner.keyValueMetadata("geo");return null==e?null:JSON.parse(e)}tryReadEsriMetadata(){const e=this._inner.keyValueMetadata("esri");return null==e?null:JSON.parse(e)}}function d(e){switch(e){case"esriGeometryPoint":return bundle.GeometryType.Point;case"esriGeometryPolygon":return bundle.GeometryType.Polygon;case"esriGeometryPolyline":return bundle.GeometryType.Polyline;case"esriGeometryMultipoint":return bundle.GeometryType.Multipoint;default:throw new Error(`InternalError: Found unexpected GeometryType: ${e}`)}}function l(e,t,r){const i=bundle.GeometryInfoDescriptor.new();if(i.geometryType=d(e.geometryType),"location"===e.encoding.type)i.latIndex=t.getFieldIndex(e.encoding.latitudeFieldName),i.lngIndex=t.getFieldIndex(e.encoding.longitudeFieldName);else if(i.wkbIndex=t.getFieldIndex(e.encoding.primaryFieldName),e.encoding.multiscale){const a=bundle.MultiScaleInfo.new();for(const n of e.encoding.multiscale.levels){const[e,r]=n.transform.translate,[i,s]=n.transform.scale,o=t.getFieldIndex(n.column);a.push(o,e,r,i,s)}i.setMultiscaleInfo(a)}return i.inWkid=e.spatialReference.wkid,r&&(i.outWkid=r.wkid),i}class u{static async create(e,a){const n=await loadParquetModule_s(),r=i(a.getCustomParameters),d=s(a.getCustomParameters),c=await n.readMetadata(e,r,d),m=l(a.geometryInfo,c,a.outSpatialReference),y=await n.readFile(e,r,d,c,m);return new u(y,o.fromFileMetadata(y.metadata()))}static async fromFile(e,a,n){const r=await loadParquetModule_s(),i=await r.readMetadataFromFile(e),s=a?l(a,i,n):void 0,d=await r.readFileFromBinary(s,e);return new u(d,o.fromFileMetadata(d.metadata()))}constructor(e,t){this.inner=e,this.metadata=t}destroy(){this.inner.free(),this.metadata.destroy()}[Symbol.dispose](){this.destroy()}}


/***/ }),

/***/ 45970:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ R)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59851);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21877);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(73446);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63863);
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(78983);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(1171);
/* harmony import */ var _geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(12433);
/* harmony import */ var _layers_graphics_data_queryUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(35746);
/* harmony import */ var _AutoIntervalBinParameters_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(30245);
/* harmony import */ var _BinParametersBase_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(18370);
/* harmony import */ var _DateBinParameters_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(24465);
/* harmony import */ var _FixedBoundariesBinParameters_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(35985);
/* harmony import */ var _FixedIntervalBinParameters_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(34344);
/* harmony import */ var _spatialRelationships_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(66723);
/* harmony import */ var _StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(41969);
/* harmony import */ var _chunks_TimeExtent_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(17197);
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(12129);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const b=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONMap */ .J({asc:"ascending",desc:"descending"}),B={base:_BinParametersBase_js__WEBPACK_IMPORTED_MODULE_16__/* ["default"] */ .A,key:"type",typeMap:{"auto-interval":_AutoIntervalBinParameters_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A,date:_DateBinParameters_js__WEBPACK_IMPORTED_MODULE_17__/* ["default"] */ .A,"fixed-boundaries":_FixedBoundariesBinParameters_js__WEBPACK_IMPORTED_MODULE_18__/* ["default"] */ .A,"fixed-interval":_FixedIntervalBinParameters_js__WEBPACK_IMPORTED_MODULE_19__/* ["default"] */ .A}};let R=class extends(_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.ClonableMixin(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A)){constructor(e){super(e),this.binParameters=null,this.binOrder="ascending",this.cacheHint=void 0,this.datumTransformation=null,this.defaultSpatialReference=null,this.distance=void 0,this.geometry=null,this.lowerBoundaryAlias=null,this.outSpatialReference=null,this.outStatistics=null,this.returnDistinctValues=null,this.spatialRelationship="intersects",this.timeExtent=null,this.upperBoundaryAlias=null,this.units=null,this.where="1=1"}set outTimeZone(e){this._set("outTimeZone",e),e&&!(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_23__/* .isTimeZoneValid */ .wr)(e)&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger(this).warn("#outTimeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({types:B,json:{name:"bin",write:!0}})],R.prototype,"binParameters",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_9__/* .enumeration */ .e)(b)],R.prototype,"binOrder",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:Boolean,json:{write:!0}})],R.prototype,"cacheHint",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({json:{write:!0}})],R.prototype,"datumTransformation",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,json:{name:"defaultSR",write:!0}})],R.prototype,"defaultSpatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],R.prototype,"distance",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({types:_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .geometryTypes */ .yR,json:{read:_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__/* .fromJSON */ .rS,write:!0}})],R.prototype,"geometry",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:String,json:{write:!0}})],R.prototype,"lowerBoundaryAlias",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A,json:{name:"outSR",write:!0}})],R.prototype,"outSpatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:[_StatisticDefinition_js__WEBPACK_IMPORTED_MODULE_21__/* ["default"] */ .A],json:{write:{enabled:!0,overridePolicy(){return{enabled:null!=this.outStatistics&&this.outStatistics.length>0}}}}})],R.prototype,"outStatistics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({value:null,json:{name:"outTimeReference",read:{reader:e=>e.ianaTimeZone},write:{writer:(e,t,o)=>{e&&(t[o]={ianaTimeZone:e})}}}})],R.prototype,"outTimeZone",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:Boolean,json:{write:!0}})],R.prototype,"returnDistinctValues",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_9__/* .enumeration */ .e)(_spatialRelationships_js__WEBPACK_IMPORTED_MODULE_20__/* .spatialRelKebabDict */ .x,{name:"spatialRel"})],R.prototype,"spatialRelationship",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:_chunks_TimeExtent_js__WEBPACK_IMPORTED_MODULE_22__.T,json:{write:!0}})],R.prototype,"timeExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:String,json:{write:!0}})],R.prototype,"upperBoundaryAlias",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:String,json:{read:_layers_graphics_data_queryUtils_js__WEBPACK_IMPORTED_MODULE_14__/* .unitsKebabDict */ .VY.read,write:{writer:_layers_graphics_data_queryUtils_js__WEBPACK_IMPORTED_MODULE_14__/* .unitsKebabDict */ .VY.write,overridePolicy(e){return{enabled:null!=e&&null!=this.distance}}}}})],R.prototype,"units",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({type:String,json:{write:!0}})],R.prototype,"where",void 0),R=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__/* .subclass */ .$)("esri.rest.support.AttributeBinsQuery")],R),R.from=(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__/* .ensureType */ .dp)(R);


/***/ }),

/***/ 30245:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76724);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/* harmony import */ var _BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(18370);
/* harmony import */ var _NormalizationBinParametersMixin_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(67281);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(r,e,o){(0,_core_object_js__WEBPACK_IMPORTED_MODULE_1__/* .setDeepValue */ .sM)(o,r instanceof Date?r.getTime():r,e)}let m=class extends((0,_NormalizationBinParametersMixin_js__WEBPACK_IMPORTED_MODULE_9__/* .NormalizationBinParametersMixin */ .K)(_BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A)){constructor(r){super(r),this.numBins=null,this.end=null,this.start=null,this.type="auto-interval"}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,json:{name:"parameters.numberOfBins",write:!0}})],m.prototype,"numBins",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({json:{name:"parameters.end",write:{writer:p}}})],m.prototype,"end",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({json:{name:"parameters.start",write:{writer:p}}})],m.prototype,"start",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__/* .enumeration */ .e)({autoIntervalBin:"auto-interval"},{readOnly:!0})],m.prototype,"type",void 0),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.rest.support.AutoIntervalBinParameters")],m),m.from=(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__/* .ensureType */ .dp)(m);


/***/ }),

/***/ 18370:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ y)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Clonable.js
var Clonable = __webpack_require__(24793);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/jsonMap.js
var jsonMap = __webpack_require__(59851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js
var enumeration = __webpack_require__(28902);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
;// ../node_modules/@arcgis/core/rest/support/AttributeBinsGrouping.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=new jsonMap/* JSONMap */.J({esriFieldTypeInteger:"integer",esriFieldTypeString:"string"});let l=class extends(Clonable/* default */.A.ClonableMixin(JSONSupport/* default */.A)){constructor(o){super(o),this.alias=null,this.responseType=null,this.type=null,this.value=null,this.valueType=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{name:"outAlias",write:!0}})],l.prototype,"alias",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String})],l.prototype,"responseType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],l.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],l.prototype,"value",void 0),(0,tslib_es6._)([(0,enumeration/* enumeration */.e)(a)],l.prototype,"valueType",void 0),l=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.rest.support.AttributeBinsGrouping")],l);const c=l;l.from=(0,ensureType/* ensureType */.dp)(l);

;// ../node_modules/@arcgis/core/rest/support/BinParametersBase.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const BinParametersBase_l=new jsonMap/* JSONMap */.J({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeDate:"date",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"}),BinParametersBase_a=new jsonMap/* JSONMap */.J({naturalLog:"natural-log",squareRoot:"square-root"});let y=class extends(Clonable/* default */.A.ClonableMixin(JSONSupport/* default */.A)){constructor(e){super(e),this.expression=null,this.expressionValueType=null,this.field=null,this.firstDayOfWeek=null,this.hideUpperBound=null,this.splitBy=null,this.stackBy=null,this.transformation=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{name:"onExpression.value",write:!0}})],y.prototype,"expression",void 0),(0,tslib_es6._)([(0,enumeration/* enumeration */.e)(BinParametersBase_l,{name:"onExpression.valueType"})],y.prototype,"expressionValueType",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{name:"onField",write:!0}})],y.prototype,"field",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],y.prototype,"firstDayOfWeek",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],y.prototype,"hideUpperBound",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:c,json:{write:{overridePolicy(){return{enabled:null!=this.splitBy?.value||null!=this.splitBy?.type}}}}})],y.prototype,"splitBy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:c,json:{write:{target:{stackBy:{type:c},jsonStyle:{type:String}},writer:(e,t)=>{e&&(t.stackBy=e.toJSON(),null!=e.responseType&&(t.jsonStyle=e.responseType))},overridePolicy(){return{enabled:null!=this.stackBy?.value||null!=this.stackBy?.type}}},read:{source:["stackBy","jsonStyle"],reader:(e,t)=>c.fromJSON({...t.stackBy,responseType:t.jsonStyle})}}})],y.prototype,"stackBy",void 0),(0,tslib_es6._)([(0,enumeration/* enumeration */.e)(BinParametersBase_a)],y.prototype,"transformation",void 0),y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.rest.support.BinParametersBase")],y);


/***/ }),

/***/ 24465:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ DateBinParameters_m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/object.js
var object = __webpack_require__(76724);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/enumeration.js
var enumeration = __webpack_require__(28902);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/BinParametersBase.js + 1 modules
var BinParametersBase = __webpack_require__(18370);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Clonable.js
var Clonable = __webpack_require__(24793);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/DateBinUtils.js
var DateBinUtils = __webpack_require__(77018);
;// ../node_modules/@arcgis/core/rest/support/DateBinTimeInterval.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let m=class extends(Clonable/* default */.A.ClonableMixin(JSONSupport/* default */.A)){constructor(o){super(o),this.value=null,this.unit=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{name:"number",write:!0}})],m.prototype,"value",void 0),(0,tslib_es6._)([(0,enumeration/* enumeration */.e)(DateBinUtils/* unitsDict */.g)],m.prototype,"unit",void 0),m=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.rest.support.DateBinTimeInterval")],m);const a=m;m.from=(0,ensureType/* ensureType */.dp)(m);

;// ../node_modules/@arcgis/core/rest/support/DateBinParameters.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function i(t,r,o){(0,object/* setDeepValue */.sM)(o,"string"==typeof t?t:t?.getTime(),r)}function l(t,e){const r=t.parameters[e];return r?"string"==typeof r?r:new Date(r):null}let DateBinParameters_m=class extends BinParametersBase/* default */.A{constructor(t){super(t),this.end=null,this.interval=null,this.offset=null,this.returnFullIntervalBin=!1,this.start=null,this.snapToData=null,this.type="date"}};(0,tslib_es6._)([(0,property/* property */.MZ)({cast:t=>null!=t?"string"==typeof t?t:new Date(t):null,json:{name:"parameters.end",read:{reader:(t,e)=>l(e,"end")},write:{writer:i}}})],DateBinParameters_m.prototype,"end",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:a,json:{name:"parameters",write:!0}})],DateBinParameters_m.prototype,"interval",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:a,json:{name:"parameters.offset",write:!0}})],DateBinParameters_m.prototype,"offset",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{name:"parameters.returnFullIntervalBin",write:!0}})],DateBinParameters_m.prototype,"returnFullIntervalBin",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({cast:t=>null!=t?"string"==typeof t?t:new Date(t):null,json:{name:"parameters.start",read:{reader:(t,e)=>l(e,"start")},write:{writer:i}}})],DateBinParameters_m.prototype,"start",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{name:"parameters.snapToData",write:!0}})],DateBinParameters_m.prototype,"snapToData",void 0),(0,tslib_es6._)([(0,enumeration/* enumeration */.e)({dateBin:"date"},{readOnly:!0})],DateBinParameters_m.prototype,"type",void 0),DateBinParameters_m=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.rest.support.DateBinParameters")],DateBinParameters_m),DateBinParameters_m.from=(0,ensureType/* ensureType */.dp)(DateBinParameters_m);


/***/ }),

/***/ 77018:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59851);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=(0,_core_jsonMap_js__WEBPACK_IMPORTED_MODULE_0__/* .strict */ .O)()({year:"years",quarter:"quarters",month:"months",week:"weeks",day:"days",hour:"hours",minute:"minutes",second:"seconds"});


/***/ }),

/***/ 35985:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76724);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/* harmony import */ var _BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(18370);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function p(r){return r[0]instanceof Date}function c(r,e,s){(0,_core_object_js__WEBPACK_IMPORTED_MODULE_1__/* .setDeepValue */ .sM)(s,r&&p(r)?r.map((r=>r.getTime())):r,e)}let n=class extends _BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A{constructor(r){super(r),this.boundaries=[],this.type="fixed-boundaries"}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({json:{name:"parameters.boundaries",write:{writer:c}}})],n.prototype,"boundaries",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__/* .enumeration */ .e)({fixedBoundariesBin:"fixed-boundaries"},{readOnly:!0})],n.prototype,"type",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.rest.support.FixedBoundariesBinParameters")],n),n.from=(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__/* .ensureType */ .dp)(n);


/***/ }),

/***/ 34344:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(76724);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/* harmony import */ var _BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(18370);
/* harmony import */ var _NormalizationBinParametersMixin_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(67281);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(r,t,o){(0,_core_object_js__WEBPACK_IMPORTED_MODULE_1__/* .setDeepValue */ .sM)(o,r instanceof Date?r.getTime():r,t)}let m=class extends((0,_NormalizationBinParametersMixin_js__WEBPACK_IMPORTED_MODULE_9__/* .NormalizationBinParametersMixin */ .K)(_BinParametersBase_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A)){constructor(r){super(r),this.end=null,this.interval=null,this.start=null,this.type="fixed-interval"}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({json:{name:"parameters.end",write:{writer:n}}})],m.prototype,"end",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,json:{name:"parameters.interval",write:!0}})],m.prototype,"interval",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({json:{name:"parameters.start",write:{writer:n}}})],m.prototype,"start",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_6__/* .enumeration */ .e)({fixedIntervalBin:"fixed-interval"},{readOnly:!0})],m.prototype,"type",void 0),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.rest.support.FixedIntervalBinParameters")],m),m.from=(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__/* .ensureType */ .dp)(m);


/***/ }),

/***/ 21422:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fj: () => (/* binding */ h),
/* harmony export */   Z7: () => (/* binding */ m),
/* harmony export */   ce: () => (/* binding */ u),
/* harmony export */   eR: () => (/* binding */ a),
/* harmony export */   xt: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51859);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1171);
/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(76715);
/* harmony import */ var _views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=.45;function a(t,o=.5){switch(t.type){case"CIMPointSymbol":{const o=t.symbolLayers;if(!o||1!==o.length)return null;const n=o[0];return"CIMVectorMarker"!==n.type?null:a(n)}case"CIMVectorMarker":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const r=n[0];if(!r)return null;const i=r.geometry;if(!i)return null;const e=r.symbol;return!e||"CIMPolygonSymbol"!==e.type&&"CIMLineSymbol"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:"sdf",geom:i,sdfPaddingRatio:o,asFill:"CIMPolygonSymbol"===e.type}}}}function l(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function s(t){let o=1/0,r=-1/0,i=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<i&&(i=t[1]),t[1]>e&&(e=t[1]);return new _Rect_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A(o,i,r-o,e-i)}function f(t){let o=1/0,n=-1/0,r=1/0,i=-1/0;for(const e of t)for(const t of e)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>i&&(i=t[1]);return[o,r,n,i]}function m(t){return t?t.rings?f(t.rings):t.paths?f(t.paths):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isExtent */ .ZC)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function c(t,o){const[n,e,a,l]=m(t),s=a-n,f=l-e,c=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,h=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,u=Math.floor(.5*(c*o-h)),y=(c-2*(u+h))/Math.max(s,f),d=Math.round(s*y),x=Math.round(f*y);return{pixelDimensions:[s,f],texelDimensions:[Math.round((d+2*u)/y),Math.round((x+2*u)/y)]}}function h(t,o,n,a,l,s,f){const[m,c,h,u]=t;if(h<m||u<c)return{frameSizeRatio:0,anchorX:0,anchorY:0,widthRatio:1,sdfPaddingRatio:.5};const y=h-m,d=u-c,x=Math.max(y,d);let M=.5;if(null!=s&&null!=n){if(!f&&null!=o){s*=(o.ymax-o.ymin)/n}const t=s/(s+x),r=.1;t>e&&t<1&&(M=Math.min(t+r,.99))}const g=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,p=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,R=Math.floor(.5*(g*M-p)),w=(g-2*(R+p))/x,P=Math.round(y*w)+2*R,b=Math.round(d*w)+2*R;let C=1;if(o){C=b*(1-M)/((o.ymax-o.ymin)*w)}let I=0,S=0,j=1;a&&(l?o&&n&&o.ymax-o.ymin>0&&(j=(o.xmax-o.xmin)/(o.ymax-o.ymin),I=a.x/(n*j),S=a.y/n):(I=a.x,S=a.y)),o&&(I=.5*(o.xmax+o.xmin)+I*(o.xmax-o.xmin),S=.5*(o.ymax+o.ymin)+S*(o.ymax-o.ymin)),I-=m,S-=c,I*=w,S*=w,I+=R,S+=R;let v=I/P-.5,F=S/b-.5;return l&&n&&(v*=n*j,F*=n),{frameSizeRatio:C,anchorX:v,anchorY:F,widthRatio:j,sdfPaddingRatio:M}}function u(t){const o=l(t.geom),n=s(o),e=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .defaultSdfTextureSize */ .p,a=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,f=Math.floor(.5*(e*t.sdfPaddingRatio-a)),m=e-2*(f+a),c=m/Math.max(n.width,n.height),h=Math.round(n.width*c)+2*f,u=Math.round(n.height*c)+2*f,M=[];for(const r of o)if(r&&r.length>1){const o=[];for(const i of r){let[r,e]=i;r-=n.x,e-=n.y,r*=c,e*=c,r+=f-.5,e+=f-.5,t.asFill?o.push([r,e]):o.push([Math.round(r),Math.round(e)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}M.push(o)}const g=y(M,h,u,f);return t.asFill&&d(M,h,u,f,g),{data:x(g,f),width:h,height:u,sdfPaddingRatio:t.sdfPaddingRatio,sdfDecodeCoeff:2*f/m}}function y(t,o,n,r){const i=o*n,e=new Array(i),a=r*r+1;for(let l=0;l<i;++l)e[l]=a;for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],a=l[i];let s,f,m,c;t[0]<a[0]?(s=t[0],f=a[0]):(s=a[0],f=t[0]),t[1]<a[1]?(m=t[1],c=a[1]):(m=a[1],c=t[1]);let h=Math.floor(s)-r,u=Math.floor(f)+r,y=Math.floor(m)-r,d=Math.floor(c)+r;h<0&&(h=0),u>o&&(u=o),y<0&&(y=0),d>n&&(d=n);const x=a[0]-t[0],M=a[1]-t[1],g=x*x+M*M;for(let r=h;r<u;r++)for(let i=y;i<d;i++){const l=r+.5,s=i+.5;let f,m,c=(l-t[0])*x+(s-t[1])*M;c<0?(f=t[0],m=t[1]):c>g?(f=a[0],m=a[1]):(c/=g,f=t[0]+c*x,m=t[1]+c*M);const h=(l-f)*(l-f)+(s-m)*(s-m),u=(n-i-1)*o+r;h<e[u]&&(e[u]=h)}}}for(let l=0;l<i;++l)e[l]=Math.sqrt(e[l]);return e}function d(t,o,n,r,i){for(const e of t){const t=e.length;for(let a=1;a<t;++a){const t=e[a-1],l=e[a];let s,f,m,c;t[0]<l[0]?(s=t[0],f=l[0]):(s=l[0],f=t[0]),t[1]<l[1]?(m=t[1],c=l[1]):(m=l[1],c=t[1]);let h=Math.floor(s),u=Math.floor(f)+1,y=Math.floor(m),d=Math.floor(c)+1;h<r&&(h=r),u>o-r&&(u=o-r),y<r&&(y=r),d>n-r&&(d=n-r);for(let e=y;e<d;++e){if(t[1]>e==l[1]>e)continue;const a=e+.5,s=(n-e-1)*o;for(let o=h;o<u;++o){o+.5<(l[0]-t[0])*(a-t[1])/(l[1]-t[1])+t[0]&&(i[s+o]=-i[s+o])}for(let t=r;t<h;++t)i[s+t]=-i[s+t]}}}}function x(o,n){const r=2*n,i=o.length,e=new Uint8Array(4*i);for(let a=0;a<i;++a){const n=.5-o[a]/r;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__/* .packFloatRGBA */ .U)(n,e,4*a)}return e}


/***/ }),

/***/ 4293:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{get forceStaticPath(){return"disabled"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-enable-status")}get forceAnimatedPath(){return"forced"===(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-enable-status")}get freezeGlobalTime(){const e=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-freeze-time");return e??!1}get spotlightAnimatedSymbols(){return!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-spotlight")}get forceGlobalTimeOrigin(){return!1!==(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-cim-animations-freeze-time")}}const t=new e;


/***/ }),

/***/ 31091:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  j: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const T=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.AttributeStoreView");class m{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:a}=t,n=(0,Utils/* getPixelArrayCtor */.Qz)(r);this.blockIndex=i,this.pixelType=r,this.size=e,this.textureOnly=a,a||(this.data=new n(s)),this._resetRange()}destroy(){this._texture?.dispose();for(const t in this._fbos){const e=this._fbos[t];e&&("0"===t&&e.detachColorTexture(),e.dispose()),this._fbos[t]=null}this._texture=null}get _textureDesc(){const t=new TextureDescriptor/* TextureDescriptor */.R;return t.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,t.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}setData(t,e,i){const s=(0,DisplayId/* getDisplayIdTexel */.Q4)(t),r=this.data,a=s*this.texelSize+e;!r||a>=r.length||(r[a]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,e){if(null==this.data)return null;const i=(0,DisplayId/* getDisplayIdTexel */.Q4)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}getTexture(t){return this._texture??this._initTexture(t)}getFBO(t,e=0){if(!this._fbos[e]){const i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new FramebufferObject/* FramebufferObject */.H(t,i)}return this._fbos[e]}get hasDirty(){const t=this.dirtyStart;return this.dirtyEnd>=t}updateTexture(e,i){try{const s=this.dirtyStart,r=this.dirtyEnd;if(!this.hasDirty)return;(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${i}] AttributeStoreView.updateTexture`,{start:s,end:r,firstBytes:new Uint8Array(this.data.buffer.slice(0,16)),block:this}),this._resetRange();const a=this.data.buffer,n=this.getTexture(e),u=4,h=(s-s%this.size)/this.size,o=(r-r%this.size)/this.size,l=h,d=this.size,p=o,_=h*this.size*u,c=(d+p*this.size)*u-_,x=(0,Utils/* getPixelArrayCtor */.Qz)(this.pixelType),f=new x(a,_*x.BYTES_PER_ELEMENT,c),b=this.size,m=p-l+1;if(m>this.size)return void T().error(new core_Error/* default */.A("mapview-webgl","Out-of-bounds index when updating AttributeData"));n.updateData(0,0,l,b,m,f)}catch(s){}}update(t){const{data:e,start:i,end:s}=t;if(null!=e&&null!=this.data){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,s)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=(0,Utils/* getPixelArrayCtor */.Qz)(this.pixelType);this.destroy(),this.data=new s(t.buffer)}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new Texture/* Texture */.g(t,this._textureDesc,this.data??void 0);if(null!=this._lastTexture&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(t),u=(0,Utils/* getPixelBytes */.AV)(r),h=new((0,Utils/* getPixelArrayCtor */.Qz)(r))(new ArrayBuffer(i*s*u*this.texelSize)),o=t.getBoundFramebufferObject(),{x:l,y:d,width:_,height:c}=t.getViewport();t.bindFramebuffer(n),n.readPixels(0,0,i,s,a,r,h),e.updateData(0,0,0,2*i,s/2,h),t.setViewport(l,d,_,c),t.bindFramebuffer(o)}return this.destroy(),this._texture=e,this._texture}}class y{constructor(){this.size=0,this._pendingAttributeUpdates=[],this._version=0,this._epoch=0,this._locked=!1}get locked(){return this._locked}_initialize(t){if(!t)throw new Error("InternalError: initArgs must be defined");const e=t.blockDescriptors;if(this.size=t.blockSize,(0,has/* default */.A)("esri-2d-update-debug")&&console.debug("AttributeStoreView.initialize",{message:t}),null==this._data)this._data=e.map(((t,e)=>null!=t?new m(t,this.size,e):null));else for(let i=0;i<this._data.length;i++){const t=this._data[i],s=e[i];null!=s&&(null==t?this._data[i]=new m(s,this.size,i):t.resize(s,this.size))}}destroy(){for(const t of this._data??[])t?.destroy();this._defaultTexture?.dispose(),this._defaultTexture=null,this._pendingAttributeUpdates=[]}isEmpty(){return null==this._data}getBlock(t){if(null==this._data)return null;return this._data[t]}setLabelMinZoom(t,e){this.setData(t,definitions/* AttributeDataType */.dV.FilterFlags,1,e)}setLocalTimeOrigin(t,e){this.setData(t,definitions/* AttributeDataType */.dV.LocalTimeOrigin,0,e)}getLabelMinZoom(t){return this.getData(t,definitions/* AttributeDataType */.dV.FilterFlags,1,255)}getFilterFlags(t){return this.getData(t,definitions/* AttributeDataType */.dV.FilterFlags,0,0)}getVisualVariableData(t,e){return this.getData(t,definitions/* AttributeDataType */.dV.VV,e,0)}getData(t,e,i,s){if(!this._data)return 0;const r=this._data[e];if(null==r)return 0;const a=r.getData(t,i);return null!=a?a:s}setData(t,e,i,s){this._data[e].setData(t,i,s)}lockTextureUploads(){this._locked=!0}unlockTextureUploads(){this._locked=!1,this.update()}requestUpdate(t){this._version=t.version,this._pendingAttributeUpdates.push(t),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] AttributeStoreView.requestUpdate`,{message:t})}get currentEpoch(){return this._epoch}get hasPendingUpdates(){return this._pendingAttributeUpdates.length>0}update(){if(this._locked)return;const t=this._pendingAttributeUpdates;this._pendingAttributeUpdates=[];for(const e of t){const{blockData:t,initArgs:i,sendUpdateEpoch:s,version:r}=e;(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] Epoch[${s}] AttributeStoreView.applyUpdate`),this._version=r,this._epoch=s,null!=i&&this._initialize(i);const a=this._data;for(let e=0;e<t.length;e++){const i=t[e],s=a[e];null!=s&&null!=i&&((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._version}] CpuBlock[${e}] AttributeStoreView.update`,{block:i}),s.update(i))}}}getUniforms(t){return{filterFlags:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.FilterFlags),unit:definitions/* filterFlagsUnit */.uM},animation:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.Animation),unit:definitions/* animationUnit */.z2},gpgpu:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.GPGPU),unit:definitions/* gpgpuUnit */.Sr},localTimeOrigin:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.LocalTimeOrigin),unit:definitions/* localTimeOriginUnit */.zt},visualVariableData:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.VV),unit:definitions/* visualVariableUnit */.nM},dataDriven0:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD0),unit:definitions/* dataDrivenUnit0 */.lL},dataDriven1:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD1),unit:definitions/* dataDrivenUnit1 */.sn},dataDriven2:{texture:this._getTexture(t,definitions/* AttributeDataType */.dV.DD2),unit:definitions/* dataDrivenUnit2 */.n9},size:this.size}}_getTexture(t,e){const i=this._data?.[e];return i?(i.updateTexture(t,this._version),i.getTexture(t)):this._getDefaultTexture(t)}_getDefaultTexture(t){if(null==this._defaultTexture){const e=new TextureDescriptor/* TextureDescriptor */.R;e.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,e.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,e.width=1,e.height=1,this._defaultTexture=new Texture/* Texture */.g(t,e,new Uint8Array(4))}return this._defaultTexture}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js
var TileContainer = __webpack_require__(33613);
;// ../node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=60;class n extends TileContainer/* default */.A{constructor(e){super(e),this._statisticsByLevel=new Map,this._entityIndex=new Map,this.attributeView=new y}destroy(){this.children.forEach((t=>t.destroy())),this.removeAllChildren(),this.attributeView.destroy()}doRender(t){t.context.capabilities.enable("textureFloatLinear"),super.doRender(t)}get hasAnimations(){for(const t of this.children)if(t.hasAnimations)return!0;return!1}_reindexAndUpdateFeaturesIfNeeded(){if(this.hasAnimations&&(this._reindexFeatures(),0!==this.attributeView.size))for(const t of this._entityIndex.values())t.dirty&&(this.attributeView.setData(t.displayId,definitions/* AttributeDataType */.dV.LocalTimeOrigin,0,t.firstIndexed),t.dirty=!1)}restartAnimation(t){const e=this._entityIndex.get(t);if(!e)return;const i=performance.now()/1e3;e.firstIndexed=i,e.dirty=!0}restartAllAnimations(){const t=performance.now()/1e3;for(const[e,i]of this._entityIndex)i.firstIndexed=t,i.dirty=!0}_reindexFeatures(){const t=performance.now()/1e3;for(const e of this.children)for(const i of e.entityIds){const{objectId:e}=i;let s=this._entityIndex.get(e);s||(s={objectId:e,displayId:0,firstIndexed:t,lastIndexed:0,dirty:!0},this._entityIndex.set(e,s)),s.lastIndexed=t,s.displayId=i.displayId}for(const[e,i]of this._entityIndex)t-i.lastIndexed>s&&this._entityIndex.delete(e)}_updateAttributeView(){this.attributeView.update(),this._reindexAndUpdateFeaturesIfNeeded()}createRenderParams(t){const e=super.createRenderParams(t);return e.attributeView=this.attributeView,e.instanceStore=this._instanceStore,e.statisticsByLevel=this._statisticsByLevel,e}}


/***/ }),

/***/ 7715:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41573);
/* harmony import */ var _core_accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62879);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(99776);
/* harmony import */ var _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(57079);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37353);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__/* .DisplayObject */ .q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this._children=[],this._childrenObservable=new _core_accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleObservable */ .I,this._effectView=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get children(){return (0,_core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._childrenObservable),this._children}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_3__/* .EffectView */ .$B,this.addTransitionable(this._effectView)),this._effectView.effect=e,this.requestRender())}get highlightGradient(){return this._highlightGradient}set highlightGradient(e){this._highlightGradient=e,this.requestRender()}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}get isReady(){return this.children.every((e=>e.isReady))}get sortFunction(){return this._sortFunction}set sortFunction(e){this._sortFunction=e,e&&(this._needsSort=!0)}doRender(e){const t=this.createRenderParams(e),{painter:i}=t;i.beforeRenderLayer(t,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(t),i.afterRenderLayer(t,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),this._childrenObservable.notify(),e}contains(t){return (0,_core_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__/* .trackAccess */ .gc)(this._childrenObservable),this._childrenSet.has(t)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0,this._childrenObservable.notify()}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,this._childrenObservable.notify(),t}beforeRender(e){super.beforeRender(e),this.sortFunction&&this._needsSort&&(this.children.sort(this.sortFunction),this._needsSort=!1,this._childrenObservable.notify());for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{displayViewScreenMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}isTransitioning(){return super.isTransitioning()||this.children.some((e=>e.transitioning))}}


/***/ }),

/***/ 37353:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(17306);
/* harmony import */ var _transitions_FadeTransition_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(87430);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(){super(...arguments),this._transitionables=null,this._clips=null,this._fadeTransition=null,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get computedOpacity(){return this._fadeTransition?.computedOpacity??this.opacity}get clips(){return this._clips}set clips(t){this._clips=t,this.requestRender()}get fadeTransitionEnabled(){return null!==this._fadeTransition}set fadeTransitionEnabled(t){!this._fadeTransition&&t?(this._fadeTransition=new _transitions_FadeTransition_js__WEBPACK_IMPORTED_MODULE_2__/* .FadeTransition */ .A({opacity:this.opacity,visible:this.visible}),this.addTransitionable(this._fadeTransition)):this._fadeTransition&&!t&&(this.removeTransitionable(this._fadeTransition),this._fadeTransition=null)}get inFadeTransition(){return this._fadeTransition?.transitioning??!1}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(t){this._opacity!==t&&(this._opacity=Math.min(1,Math.max(t,0)),this._fadeTransition&&(this._fadeTransition.opacity=this._opacity),this.requestRender())}get stage(){return this._stage}set stage(t){if(this._stage===t)return;const i=this._stage;this._stage=t,t?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):i?.trashDisplayObject(this)}get transforms(){return null==this._transforms&&(this._transforms=this._createTransforms()),this._transforms}get transitioning(){return this.isTransitioning()}get visible(){return this._visible}set visible(t){this._visible!==t&&(this._visible=t,this._fadeTransition&&(this._fadeTransition.visible=this._visible),this.requestRender())}get hasLabels(){return!1}get hasHighlight(){return!1}get hasBlending(){return!1}addTransitionable(t){this._transitionables??=[],this._transitionables.push(t),this.requestRender()}removeTransitionable(i){i.endTransition(),this._transitionables&&(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .remove */ .TF)(this._transitionables,i),this.requestRender()}fadeIn(){this.fadeTransitionEnabled=!0;const t=this._fadeTransition.fadeIn();return this.opacity=1,this.requestRender(),t}fadeOut(){this.fadeTransitionEnabled=!0;const t=this._fadeTransition.fadeOut();return this.opacity=0,this.requestRender(),t}endTransitions(){if(this._transitionables){for(const t of this._transitionables)t.endTransition();this.requestRender()}}beforeRender(t){this.transitionStep(t.deltaTime,t.state.scale),this.setTransform(t.state)}afterRender(t){this.transitioning&&this.requestRender()}remove(){this.parent?.removeChild(this)}setTransform(t){}processRender(t){this.stage&&(this._fadeTransition?.computedVisible??this.visible)&&this.doRender(t)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this.endTransitions(),this.onDetach(),this.emit("detach")}isTransitioning(){return this._transitionables?.some((t=>t.transitioning))??!1}transitionStep(t,i){if(this._transitionables)for(const s of this._transitionables)s.transitionStep(t,i)}onAttach(){}onDetach(){}doRender(t){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}


/***/ }),

/***/ 54185:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  d: () => (/* binding */ brushes_m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec4f32.js
var vec4f32 = __webpack_require__(40275);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrush.js
var WGLBrush = __webpack_require__(95031);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BackgroundPrograms.js
var BackgroundPrograms = __webpack_require__(97394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ProgramTemplate.js
var ProgramTemplate = __webpack_require__(50122);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushClip.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const m=()=>(0,Utils/* createProgramDescriptor */.ES)("clip",{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT}]});class p extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32/* fromValues */.fA)(0,1,0,1)}dispose(){this._program&&this._program.dispose()}prepareState({context:r}){r.setStencilTestEnabled(!0),r.setBlendingEnabled(!1),r.setFaceCullingEnabled(!1),r.setColorMask(!1,!1,!1,!1),r.setStencilOp(enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.REPLACE),r.setStencilWriteMask(255),r.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,0,255)}draw(r,e){const{context:t,state:o,requestRender:i,allowDelayedRender:p}=r,c=m(),d=e.getVAO(t,o,c.attributes,c.bufferLayouts);null!=d.indexBuffer&&(this._program||(this._program=(0,ProgramTemplate/* createProgram */.r)(t,BackgroundPrograms/* background */.T)),!p||null==i||this._program.compiled?(t.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",o.displayMat3),t.bindVAO(d),t.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,d.indexBuffer.size,enums/* DataType */.pe.UNSIGNED_INT,0),t.bindVAO()):i())}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js
var WGLBrushStencil = __webpack_require__(46419);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushTileDebugInfo.js
var WGLBrushTileDebugInfo = __webpack_require__(29588);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLBackground.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32/* fromValues */.fA)(1,0,0,1),this._patternMatrix=(0,mat3f32/* create */.vt)(),this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(e,r){const{context:s,painter:a,requestRender:f,allowDelayedRender:m}=e;this._loadWGLResources(e);const u=e.displayLevel,p=e.styleLayer,_=p.backgroundMaterial,d=a.vectorTilesMaterialManager,g=p.getPaintValue("background-color",u),h=p.getPaintValue("background-opacity",u),x=p.getPaintValue("background-pattern",u),M=void 0!==x,b=1|window.devicePixelRatio,v=e.spriteMosaic;let y,w;const j=b>definitions/* vtlHighResCutoff */.C_?2:1,A=this._programOptions;A.pattern=M;const L=d.getMaterialProgram(s,_,A);if(!m||null==f||L.compiled){if(s.bindVAO(this._vao),s.useProgram(L),M){const t=v.getMosaicItemPosition(x,!0);if(null!=t){const{tl:e,br:r,page:i}=t;y=r[0]-e[0],w=r[1]-e[1];const a=v.getPageSize(i);null!=a&&(v.bind(s,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),L.setUniform4f("u_tlbr",e[0],e[1],r[0],r[1]),L.setUniform2fv("u_mosaicSize",a),L.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}L.setUniform1f("u_opacity",h)}else{const t=g[3]*h;this._color[0]=t*g[0],this._color[1]=t*g[1],this._color[2]=t*g[2],this._color[3]=t,L.setUniform4fv("u_color",this._color)}L.setUniform1f("u_depth",p.z||0);for(const e of r){if(L.setUniform1f("u_coord_range",e.rangeX),L.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),M){const r=Math.max(2**(Math.round(u)-e.key.level),1),o=j*e.width*r,i=o/(0,mathUtils/* nextPowerOfTwo */.yR)(y),s=o/(0,mathUtils/* nextPowerOfTwo */.yR)(w);this._patternMatrix[0]=i,this._patternMatrix[4]=s,L.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}s.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,0,255),s.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4)}}else f()}_loadWGLResources(t){if(this._vao)return;const{context:e,styleLayer:r}=t,o=r.backgroundMaterial,i=new Int8Array([0,0,1,0,0,1,1,1]),s=BufferObject/* BufferObject */.g.createVertex(e,enums/* Usage */._U.STATIC_DRAW,i),n=new VertexArrayObject/* VertexArrayObject */.Z(e,o.getAttributeLocations(),o.getLayoutInfo(),new Map([["geometry",s]]));this._vao=n}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js
var StyleDefinition = __webpack_require__(31541);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLCircle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(t,n){const{context:l,displayLevel:s,requiredLevel:o,state:c,painter:u,spriteMosaic:d,styleLayerUID:f,requestRender:m,allowDelayedRender:p}=t;if(!n.some((e=>e.layerData.get(f)?.circleIndexCount??!1)))return;const y=t.styleLayer,g=y.circleMaterial,M=u.vectorTilesMaterialManager,v=1.2,E=y.getPaintValue("circle-translate",s),x=y.getPaintValue("circle-translate-anchor",s),I=this._programOptions,U=M.getMaterialProgram(l,g,I);if(p&&null!=m&&!U.compiled)return void m();l.useProgram(U),U.setUniformMatrix3fv("u_displayMat3",x===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?c.displayMat3:c.displayViewMat3),U.setUniform2fv("u_circleTranslation",E),U.setUniform1f("u_depth",y.z),U.setUniform1f("u_antialiasingWidth",v);let _=-1;for(const e of n){if(!e.layerData.has(f))continue;e.key.level!==_&&(_=e.key.level,g.setDataUniforms(U,s,y,_,d));const t=e.layerData.get(f);if(!t.circleIndexCount)continue;t.prepareForRendering(l);const n=t.vao;null!=n&&(l.bindVAO(n),U.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),o!==e.key.level?l.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255):l.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255),l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t.circleIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t.circleIndexStart),e.triangleCount+=t.circleIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLFill.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=1/65536;class f extends WGLBrush/* default */.A{constructor(){super(...arguments),this._fillProgramOptions={id:!1,pattern:!1},this._outlineProgramOptions={id:!1}}dispose(){}drawMany(t,e){const{displayLevel:i,renderPass:n,spriteMosaic:a,styleLayerUID:l}=t;let r=!1;for(const _ of e)if(_.layerData.has(l)){const t=_.layerData.get(l);if(t.fillIndexCount>0||t.outlineIndexCount>0){r=!0;break}}if(!r)return;const o=t.styleLayer,s=o.getPaintProperty("fill-pattern"),f=void 0!==s,u=f&&s.isDataDriven;let c;if(f&&!u){const t=s.getValue(i);c=a.getMosaicItemPosition(t,!0)}const d=!f&&o.getPaintValue("fill-antialias",i);let p=!0,m=1;if(!f){const t=o.getPaintProperty("fill-color"),e=o.getPaintProperty("fill-opacity");if(!t?.isDataDriven&&!e?.isDataDriven){const t=o.getPaintValue("fill-color",i);m=o.getPaintValue("fill-opacity",i)*t[3],m>=1&&(p=!1)}}if(p&&"opaque"===n)return;const y=o.getPaintValue("fill-translate",i),g=o.getPaintValue("fill-translate-anchor",i);(p||"translucent"!==n)&&this._drawFill(t,l,o,e,y,g,f,c,u);const M=!o.hasDataDrivenOutlineColor&&o.outlineUsesFillColor&&m<1;d&&"opaque"!==n&&!M&&this._drawOutline(t,l,o,e,y,g)}_drawFill(n,f,u,c,d,p,m,y,g){if(m&&!g&&null==y)return;const{context:M,displayLevel:_,state:E,painter:v,pixelRatio:P,spriteMosaic:U,requestRender:I,allowDelayedRender:x}=n,D=u.fillMaterial,R=v.vectorTilesMaterialManager,S=P>definitions/* vtlHighResCutoff */.C_?2:1,T=this._fillProgramOptions;T.pattern=m;const h=R.getMaterialProgram(M,D,T);if(x&&null!=I&&!h.compiled)return void I();if(M.useProgram(h),null!=y){const{page:t}=y,i=U.getPageSize(t);null!=i&&(U.bind(M,enums/* TextureSamplingMode */.Cj.LINEAR,t,definitions/* vtlTextureBindingUnitSprites */.$U),h.setUniform2fv("u_mosaicSize",i),h.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}h.setUniformMatrix3fv("u_displayMat3",p===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?E.displayMat3:E.displayViewMat3),h.setUniform2fv("u_fillTranslation",d),h.setUniform1f("u_depth",u.z+s);let w=-1;for(const t of c){if(!t.layerData.has(f))continue;t.key.level!==w&&(w=t.key.level,D.setDataUniforms(h,_,u,w,U));const i=t.layerData.get(f);if(!i.fillIndexCount)continue;i.prepareForRendering(M);const n=i.fillVAO;if(null!=n){if(M.bindVAO(n),h.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),M.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),m){const e=Math.max(2**(Math.round(_)-t.key.level),1),i=t.rangeX/(S*t.width*e);h.setUniform1f("u_patternFactor",i)}if(g){const t=i.patternMap;if(!t)continue;for(const[i,n]of t){const t=U.getPageSize(i);null!=t&&(U.bind(M,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),h.setUniform2fv("u_mosaicSize",t),h.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),M.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,n[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n[0]))}}else M.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i.fillIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i.fillIndexStart);t.triangleCount+=i.fillIndexCount/3}}}_drawOutline(e,i,n,a,f,u){const{context:c,displayLevel:d,state:p,painter:m,pixelRatio:y,spriteMosaic:g,requestRender:M,allowDelayedRender:_}=e,E=n.outlineMaterial,v=m.vectorTilesMaterialManager,P=.75/y,U=this._outlineProgramOptions,I=v.getMaterialProgram(c,E,U);if(_&&null!=M&&!I.compiled)return void M();c.useProgram(I),I.setUniformMatrix3fv("u_displayMat3",u===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?p.displayMat3:p.displayViewMat3),I.setUniform2fv("u_fillTranslation",f),I.setUniform1f("u_depth",n.z+s),I.setUniform1f("u_outline_width",P);let x=-1;for(const t of a){if(!t.layerData.has(i))continue;t.key.level!==x&&(x=t.key.level,E.setDataUniforms(I,d,n,x,g));const e=t.layerData.get(i);if(e.prepareForRendering(c),!e.outlineIndexCount)continue;const a=e.outlineVAO;null!=a&&(c.bindVAO(a),I.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),c.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),c.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,e.outlineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.outlineIndexStart),t.triangleCount+=e.outlineIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class WGLBrushVTLLine_s extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(i,s){const{context:l,displayLevel:f,state:u,painter:c,pixelRatio:d,spriteMosaic:m,styleLayerUID:p,requestRender:g,allowDelayedRender:y}=i;if(!s.some((e=>e.layerData.get(p)?.lineIndexCount??!1)))return;const M=i.styleLayer,E=M.lineMaterial,_=c.vectorTilesMaterialManager,v=M.getPaintValue("line-translate",f),U=M.getPaintValue("line-translate-anchor",f),I=M.getPaintProperty("line-pattern"),P=void 0!==I,x=P&&I.isDataDriven;let D,S;if(P&&!x){const e=I.getValue(f);D=m.getMosaicItemPosition(e)}let L=!1;if(!P){const e=M.getPaintProperty("line-dasharray");if(S=void 0!==e,L=S&&e.isDataDriven,S&&!L){const t=e.getValue(f),i=M.getDashKey(t,M.getLayoutValue("line-cap",f));D=m.getMosaicItemPosition(i)}}const N=1/d,R=this._programOptions;R.pattern=P,R.sdf=S;const T=_.getMaterialProgram(l,E,R);if(y&&null!=g&&!T.compiled)return void g();if(l.useProgram(T),T.setUniformMatrix3fv("u_displayViewMat3",u.displayViewMat3),T.setUniformMatrix3fv("u_displayMat3",U===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?u.displayMat3:u.displayViewMat3),T.setUniform2fv("u_lineTranslation",v),T.setUniform1f("u_depth",M.z),T.setUniform1f("u_antialiasing",N),D&&null!=D){const{page:e}=D,i=m.getPageSize(e);null!=i&&(m.bind(l,enums/* TextureSamplingMode */.Cj.LINEAR,e,definitions/* vtlTextureBindingUnitSprites */.$U),T.setUniform2fv("u_mosaicSize",i),T.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}let V=-1;for(const e of s){if(!e.layerData.has(p))continue;e.key.level!==V&&(V=e.key.level,E.setDataUniforms(T,f,M,V,m));const i=2**(f-V)/d;T.setUniform1f("u_zoomFactor",i);const s=e.layerData.get(p);if(!s.lineIndexCount)continue;s.prepareForRendering(l);const u=s.vao;if(null!=u){if(l.bindVAO(u),T.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),l.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255),x||L){const e=s.patternMap;if(!e)continue;for(const[i,a]of e){const e=m.getPageSize(i);null!=e&&(m.bind(l,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),T.setUniform2fv("u_mosaicSize",e),T.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,a[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*a[0]))}}else l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,s.lineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*s.lineIndexStart);e.triangleCount+=s.lineIndexCount/3}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f32.js
var vec2f32 = __webpack_require__(17845);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js
var config = __webpack_require__(59992);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js
var GeometryUtils = __webpack_require__(59339);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=1/65536;class d extends WGLBrush/* default */.A{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=(0,vec2f32/* create */.vt)()}dispose(){}drawMany(e,t){const i=e.styleLayer;this._drawIcons(e,i,t),this._drawText(e,i,t)}_drawIcons(e,t,o){const{context:f,displayLevel:c,painter:u,spriteMosaic:p,state:m,styleLayerUID:g,requestRender:d,allowDelayedRender:y}=e,_=t.iconMaterial,M=u.vectorTilesMaterialManager;let h,P=!1;for(const i of o)if(i.layerData.has(g)&&(h=i.layerData.get(g),h.iconPerPageElementsMap.size>0)){P=!0;break}if(!P)return;const U=t.getPaintValue("icon-translate",c),E=t.getPaintValue("icon-translate-anchor",c);let T=t.getLayoutValue("icon-rotation-alignment",c);T===StyleDefinition/* RotationAlignment */.I5.AUTO&&(T=t.getLayoutValue("symbol-placement",c)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const x=T===StyleDefinition/* RotationAlignment */.I5.MAP,S=t.getLayoutValue("icon-keep-upright",c)&&x,v=h.isIconSDF,D=this._iconProgramOptions;D.sdf=v;const V=M.getMaterialProgram(f,_,D);if(y&&null!=d&&!V.compiled)return void d();f.useProgram(V),V.setUniformMatrix3fv("u_displayViewMat3",T===StyleDefinition/* RotationAlignment */.I5.MAP?m.displayViewMat3:m.displayMat3),V.setUniformMatrix3fv("u_displayMat3",E===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?m.displayMat3:m.displayViewMat3),V.setUniform2fv("u_iconTranslation",U),V.setUniform1f("u_depth",t.z),V.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(m.rotation)),V.setUniform1f("u_keepUpright",S?1:0),V.setUniform1f("u_level",10*c),V.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),V.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3);let R=-1;for(const i of o){if(!i.layerData.has(g))continue;if(i.key.level!==R&&(R=i.key.level,_.setDataUniforms(V,c,t,R,p)),h=i.layerData.get(g),0===h.iconPerPageElementsMap.size)continue;h.prepareForRendering(f),h.updateOpacityInfo();const a=h.iconVAO;if(null!=a){f.bindVAO(a),V.setUniformMatrix3fv("u_dvsMat3",i.transforms.displayViewScreenMat3),V.setUniform1f("u_time",(performance.now()-h.lastOpacityUpdate)/1e3);for(const[t,a]of h.iconPerPageElementsMap)this._renderIconRange(e,V,a,t,i)}}}_renderIconRange(e,t,i,a,r){const{context:n,spriteMosaic:o}=e;this._spritesTextureSize[0]=o.getWidth(a)/4,this._spritesTextureSize[1]=o.getHeight(a)/4,t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),o.bind(n,enums/* TextureSamplingMode */.Cj.LINEAR,a,definitions/* vtlTextureBindingUnitSprites */.$U),this._setStencilState(e,r),n.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]),r.triangleCount+=i[1]/3}_drawText(e,s,f){const{context:c,displayLevel:u,glyphMosaic:p,painter:m,pixelRatio:d,spriteMosaic:y,state:_,styleLayerUID:M,requestRender:h,allowDelayedRender:P}=e,U=s.textMaterial,E=m.vectorTilesMaterialManager;let T,x=!1;for(const t of f)if(t.layerData.has(M)&&(T=t.layerData.get(M),T.glyphPerPageElementsMap.size>0)){x=!0;break}if(!x)return;const S=s.getPaintProperty("text-opacity");if(S&&!S.isDataDriven&&0===S.getValue(u))return;const v=s.getPaintProperty("text-color"),D=!v||v.isDataDriven||v.getValue(u)[3]>0,V=s.getPaintProperty("text-halo-width"),R=s.getPaintProperty("text-halo-color"),I=(!V||V.isDataDriven||V.getValue(u)>0)&&(!R||R.isDataDriven||R.getValue(u)[3]>0);if(!D&&!I)return;const A=24/8;let w=s.getLayoutValue("text-rotation-alignment",u);w===StyleDefinition/* RotationAlignment */.I5.AUTO&&(w=s.getLayoutValue("symbol-placement",u)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const L=w===StyleDefinition/* RotationAlignment */.I5.MAP,O=s.getLayoutValue("text-keep-upright",u)&&L,N=.8*A/d;this._glyphTextureSize||(this._glyphTextureSize=(0,vec2f32/* fromValues */.fA)(p.width/4,p.height/4));const z=s.getPaintValue("text-translate",u),b=s.getPaintValue("text-translate-anchor",u),k=this._sdfProgramOptions,G=E.getMaterialProgram(c,U,k);if(P&&null!=h&&!G.compiled)return void h();c.useProgram(G),G.setUniformMatrix3fv("u_displayViewMat3",w===StyleDefinition/* RotationAlignment */.I5.MAP?_.displayViewMat3:_.displayMat3),G.setUniformMatrix3fv("u_displayMat3",b===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?_.displayMat3:_.displayViewMat3),G.setUniform2fv("u_textTranslation",z),G.setUniform1f("u_depth",s.z+g),G.setUniform2fv("u_mosaicSize",this._glyphTextureSize),G.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(_.rotation)),G.setUniform1f("u_keepUpright",O?1:0),G.setUniform1f("u_level",10*u),G.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitGlyphs */.mg),G.setUniform1f("u_antialiasingWidth",N),G.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3);let W=-1;for(const t of f){if(!t.layerData.has(M))continue;if(t.key.level!==W&&(W=t.key.level,U.setDataUniforms(G,u,s,W,y)),T=t.layerData.get(M),0===T.glyphPerPageElementsMap.size)continue;T.prepareForRendering(c),T.updateOpacityInfo();const i=T.textVAO;if(null==i)continue;c.bindVAO(i),G.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._setStencilState(e,t);const a=(performance.now()-T.lastOpacityUpdate)/1e3;G.setUniform1f("u_time",a),T.glyphPerPageElementsMap.forEach(((e,i)=>{this._renderGlyphRange(c,e,i,p,G,I,D,t)}))}}_renderGlyphRange(e,t,i,a,r,n,s,l){a.bind(e,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitGlyphs */.mg),n&&(r.setUniform1f("u_halo",1),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3),s&&(r.setUniform1f("u_halo",0),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3)}_setStencilState(e,t){const{context:i,is3D:a,stencilSymbols:r}=e;if(i.setStencilTestEnabled(!0),r)return i.setStencilWriteMask(255),void i.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,t.stencilRef,255);i.setStencilWriteMask(0),a?i.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255):i.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255)}}

;// ../node_modules/@arcgis/core/views/2d/engine/brushes.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const brushes_m={clip:p,stencil:WGLBrushStencil/* default */.A,tileDebugInfo:WGLBrushTileDebugInfo/* default */.A,vtlBackground:u,vtlFill:f,vtlLine:WGLBrushVTLLine_s,vtlCircle:n,vtlSymbol:d};


/***/ }),

/***/ 87430:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40189);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let r=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(t){super(t),this.computedOpacity=1,this.computedVisible=!0,this.opacity=1,this.visible=!0,this._fadeOutResolver=null,this._fadeInResolver=null}get transitioning(){return(this._fadeOutResolver||!this.visible?0:this.opacity)!==this.computedOpacity}endTransition(){this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeInResolver=this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0}fadeIn(){return this._fadeInResolver||(this.opacity=1,this.computedOpacity=0,this._fadeOutResolver?.(),this._fadeOutResolver=null,this._fadeInResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createResolver */ .Tw)()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createResolver */ .Tw)()),this._fadeOutResolver.promise}transitionStep(t,e){const i=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("mapview-transitions-duration"),s=i?1/i:0;if(0===s)this.computedOpacity=this.opacity,this.computedVisible=this.visible;else{const e=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===e)this.computedVisible=this.visible;else{const o=t*s;this.computedOpacity=i>e?Math.max(e,i-o):Math.min(e,i+o),this.computedVisible=this.computedOpacity>0}}this.transitioning||(this._fadeInResolver?.(),this._fadeOutResolver?.(),this._fadeOutResolver=this._fadeInResolver=null)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"computedOpacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"computedVisible",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"opacity",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"visible",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"transitioning",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"_fadeOutResolver",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],r.prototype,"_fadeInResolver",void 0),r=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.views.2d.engine.transitions.FadeTransition")],r);


/***/ }),

/***/ 59992:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IT: () => (/* binding */ o),
/* harmony export */   av: () => (/* binding */ c),
/* harmony export */   o2: () => (/* binding */ t),
/* harmony export */   zk: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o=!0,t=32,c=1.5,e=200;


/***/ }),

/***/ 92947:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79190);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78835);
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(25423);
/* harmony import */ var _core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(99776);
/* harmony import */ var _chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(24121);
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3912);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(43556);
/* harmony import */ var _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(61409);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const x=(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),M=(0,_core_libs_gl_matrix_2_factories_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__/* .create */ .vt)();class g extends _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_7__/* .TiledDisplayObject */ .Y{constructor(t,s,i,r){super(t,s,i,r,_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .tileSize */ .CQ,_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .tileSize */ .CQ)}destroy(){super.destroy()}setTransform(m){const c=this.resolution/m.resolution,h=this.transforms.tileMat3,[f,p]=m.toScreenNoRotation([0,0],[this.x,this.y]),d=this.width/this.rangeX*c,u=this.height/this.rangeY*c;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .set */ .hZ)(h,d,0,0,0,u,0,f,p,1),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)(this.transforms.displayViewScreenMat3,m.displayViewMat3,h);const x=(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)((0,_core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),d,0,0,u,f,p);(0,_core_libs_gl_matrix_2_math_mat2d_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(this.transforms.labelMat2d,m.viewMat2d,x);const M=[0,0];m.toScreen(M,[this.x,this.y]);const g=this.transforms.tileUnitsToPixels;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .identity */ .D_)(g),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .translate */ .Tl)(g,g,M),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .rotate */ .e$)(g,g,Math.PI*m.rotation/180),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .scale */ .hs)(g,g,[d,u,1])}_createTransforms(){return{labelMat2d:(0,_core_libs_gl_matrix_2_factories_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)(),tileMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),displayViewScreenMat3:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)(),tileUnitsToPixels:(0,_core_libs_gl_matrix_2_factories_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__/* .create */ .vt)()}}containsScreenPoint(t,s,i){const r=(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .multiply */ .lw)(x,t.viewMat3,this.transforms.tileMat3),e=(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_2__/* .invert */ .B8)(x,r);if(null==e)return!0;(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.i)(M,...s,1);const a=(0,_chunks_vec32_js__WEBPACK_IMPORTED_MODULE_4__.o)(M,M,e),n=i*(this.resolution/t.resolution);return a[0]>=-n&&a[0]<this.width+n&&a[1]>=-n&&a[1]<this.height+n}}


/***/ }),

/***/ 7370:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Pd: () => (/* binding */ r),
/* harmony export */   VS: () => (/* binding */ n),
/* harmony export */   oI: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,2)]]]),t=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,4),new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_tex",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,2,4)]]]),n=new Map([["geometry",[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT,0,4)]]]);


/***/ }),

/***/ 18507:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20053);
/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1314);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{static{this.byteSizeHint=2*Uint32Array.BYTES_PER_ELEMENT+_DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.byteSizeHint}constructor(t,i){this.id=t,this.sortKey=i,this.records=[]}serialize(t){return t.push(this.id),t.writeF32(this.sortKey),(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .serializeList */ .j)(t,this.records),t}static deserialize(i){const e=i.readInt32(),o=i.readF32(),a=new s(e,o);return a.records=(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .deserializeList */ ._)(i,_DisplayRecord_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)??[],a}}


/***/ }),

/***/ 65065:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KQ: () => (/* binding */ n),
/* harmony export */   Q4: () => (/* binding */ f),
/* harmony export */   Ss: () => (/* binding */ s)
/* harmony export */ });
/* unused harmony exports aggregateValidFiltersMask, displayIdTypeAggregate, displayIdTypeFeature, displayIdTypeMask, getDisplayIdFilterMask, getDisplayIdType, isAggregateId, nonAggregateValidFiltersMask */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=8388607,t=8388608,r=254,o=255,u=0,c=1,e=n=>(n&t)>>>23,f=t=>t&n,i=n=>e(n)===c?r:o;function p(n){return e(n)===c}function s(n,r){return((r?t:0)|n)>>>0}


/***/ }),

/***/ 20053:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{static{this.byteSizeHint=7*Uint32Array.BYTES_PER_ELEMENT}constructor(t,e,s,i,r,h,n){this.instanceId=t,this.textureKey=e,this.indexStart=s,this.indexCount=i,this.vertexStart=r,this.vertexCount=h,this.overlaps=n}updateBaseOffsets(t){this.vertexStart+=t.vertexFrom,this.indexStart+=t.indexFrom}clone(){return new t(this.instanceId,this.textureKey,this.indexStart,this.indexCount,this.vertexStart,this.vertexCount,this.overlaps)}static write(t,e,s,i,r,h,n,a){t.push(e),t.push(s),t.push(i),t.push(r),t.push(h),t.push(n),t.push(a)}serialize(t){return t.push(this.instanceId),t.push(this.textureKey),t.push(this.indexStart),t.push(this.indexCount),t.push(this.vertexStart),t.push(this.vertexCount),t.push(this.overlaps),t}static deserialize(e){const s=e.readInt32(),i=e.readInt32(),r=e.readInt32(),h=e.readInt32(),n=e.readInt32(),a=e.readInt32(),u=e.readInt32();return new t(s,i,r,h,n,a,u)}}


/***/ }),

/***/ 90819:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  R: () => (/* binding */ I)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat2df32.js
var mat2df32 = __webpack_require__(78835);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/AFeatureTile.js
var AFeatureTile = __webpack_require__(92947);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayEntity.js
var DisplayEntity = __webpack_require__(18507);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js
var FreeList = __webpack_require__(93540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js
var featureTechniqueUtils = __webpack_require__(43901);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function r(t,e){return t<<16|255&e}function d(t){return 255&t}class h{constructor(t,e,n,i,a){this.instance=t,this.materialKey=e,this.target=n,this.start=i,this.count=a}get textureKey(){return d(this.materialKey)}get indexEnd(){return this.start+this.count}extend(t){this.count+=t}render(t){this.instance.techniqueRef.render(t,this)}get key(){return this.target.key}getStencilReference(){return this.target.stencilRef}getAttributePrecisionPackFactors(){const t=this.instance.instanceId;return this.target.getMesh(t).getAttributePrecisionPackFactors()}draw(t,e){(0,featureTechniqueUtils/* isHittest */.Eq)(t)?this.drawCompute(t.context,e):this.drawGeometry(t.context,e)}drawCompute(t,e){const n=this.instance.instanceId,i=this.target.getMesh(n).getComputeVAO(t,e),r=this.start*Uint32Array.BYTES_PER_ELEMENT/3;t.bindVAO(i),t.drawElements(webgl_enums/* PrimitiveType */.WR.POINTS,this.count/3,webgl_enums/* DataType */.pe.UNSIGNED_INT,r),t.bindVAO(null)}drawGeometry(t,e){const n=this.instance.instanceId,i=this.target.getMesh(n).getGeometryVAO(t,e),r=this.start*Uint32Array.BYTES_PER_ELEMENT;t.bindVAO(i),t.drawElements(webgl_enums/* PrimitiveType */.WR.TRIANGLES,this.count,webgl_enums/* DataType */.pe.UNSIGNED_INT,r),t.bindVAO(null)}}class l{constructor(){this._length=0,this._minOrderedLength=0,this._materialKeys=new Set}static fromDisplayEntities(t,e,n,i){const a=new l;for(const s of t.values())for(const t of s.records){const s=n.getInstance(t.instanceId),d=r(s.instanceId,t.textureKey);a.addRecord(s,d,t.indexStart,t.indexCount,t.vertexStart,t.vertexCount,e,i)}return a}get length(){return this._length}get minOrderedLength(){return this._minOrderedLength}get minUnorderedLength(){return this._materialKeys.size}render(t,e){const{drawPhase:n}=t;for(const i of this.infos()){const a=i.instance.techniqueRef;a.drawPhase&n&&(null==e||a.type===e)&&i.render(t)}}addRecord(i,a,s,r,d,l,o,c){let u=s,_=r;if(_||(u=d,_=l),!_)return;if(null==this._head){const t=new h(i,a,o,u,_);return this._head=new FreeList/* List */.B(t),this._tail=this._head,this._length++,void this._minOrderedLength++}if(c===enums/* FeatureBatchingStrategy */.ch.STRICT_ORDER)return this._insert(i,a,o,u,_,this._tail,null);let g=null,m=this._head;const f=i.instanceId,y=i.techniqueRef.symbologyPlane;if(c===enums/* FeatureBatchingStrategy */.ch.STRICT_MARKERS_AND_TEXT&&(y===enums/* FeatureSymbologyDrawOrder */.uC.MARKER||y===enums/* FeatureSymbologyDrawOrder */.uC.TEXT))return this._insert(i,a,o,u,_,this._tail,null);for(;m;){const t=m.data.instance,e=t.instanceId,n=t.techniqueRef.symbologyPlane,s=g?.data.instance.instanceId;if(y<n||f===s&&f!==e)return this._insert(i,a,o,u,_,g,m);g=m,m=m.next}this._insert(i,a,o,u,_,g,null)}*infos(){if(null!=this._head)for(const t of this._head.values())yield t}_insert(t,e,i,a,s,r,d){if(null==r&&null==d){const r=new h(t,e,i,a,s);return this._head=new FreeList/* List */.B(r),this._tail=this._head,this._length++,void this._minOrderedLength++}return e!==this._tail.data.materialKey&&this._minOrderedLength++,this._materialKeys.add(e),null==r&&null!=d?this._insertAtHead(t,e,i,a,s,d):null!=r&&null==d?this._insertAtEnd(t,e,i,a,s,r):null!=r&&null!=d?this._insertAtMiddle(t,e,i,a,s,r,d):void 0}_insertAtHead(t,e,i,a,s,r){const d=a+s;if(e===r.data.materialKey&&i===r.data.target&&d===r.data.start)r.data.start=a,r.data.count+=s;else{const d=new h(t,e,i,a,s);this._head=new FreeList/* List */.B(d),this._head.next=r,this._length++}}_insertAtEnd(t,e,i,a,s,r){if(r.data.materialKey===e&&r.data.indexEnd===a)r.data.count+=s;else{const d=new h(t,e,i,a,s);this._tail=new FreeList/* List */.B(d),r.next=this._tail,this._length++}}_insertAtMiddle(t,e,i,a,s,r,d){const l=a+s;if(r.data.materialKey===e&&r.data.target===i&&r.data.indexEnd===a)r.data.count+=s,r.data.materialKey===d.data.materialKey&&r.data.target===d.data.target&&r.data.indexEnd===d.data.start&&(r.data.count+=d.data.count,r.next=d.next,this._length--);else if(e===d.data.materialKey&&i===d.data.target&&l===d.data.start)d.data.start=a,d.data.count+=s;else{const l=new h(t,e,i,a,s),o=new FreeList/* List */.B(l);r.next=o,o.next=d,this._length++}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/ReshufflePlan.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ReshufflePlan_t{constructor(t){this._indexOnly=t,this.vertex={count:0,operations:[]},this.index={count:0,operations:[]}}copyRecord(t){let e=0;this._indexOnly||(e=this.vertex.count-t.vertexStart,this.vertex.operations.push({srcFrom:t.vertexStart,dstFrom:this.vertex.count,count:t.vertexCount,mutate:0}),t.vertexStart=this.vertex.count,this.vertex.count+=t.vertexCount);let n=!1;if(this._indexOnly&&this.index.operations.length>=1){const e=this.index.operations[this.index.operations.length-1];e.srcFrom+e.count===t.indexStart&&(e.count+=t.indexCount,n=!0)}n||this.index.operations.push({srcFrom:t.indexStart,dstFrom:this.index.count,count:t.indexCount,mutate:e}),t.indexStart=this.index.count,this.index.count+=t.indexCount}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/LabelMetric.js
var LabelMetric = __webpack_require__(51688);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/MappedMesh.js + 1 modules
var MappedMesh = __webpack_require__(56670);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/dataViewUtils.js
var dataViewUtils = __webpack_require__(17906);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Reader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class Reader_t{constructor(t){this._pos=0,this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js
var serializationUtils = __webpack_require__(1314);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/meshDebugUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function meshDebugUtils_s(e){if(!e)return null;return{entities:(0,serializationUtils/* deserializeList */._)(new Reader_t(e.entities),DisplayEntity/* default */.A),vertexData:e.data.map(a)}}function a(t){const s=t.layout.stride,a=new DataView(t.vertices),n=[],c=t.vertices.byteLength/s;let l=0;for(let e=0;e<c;e++){const e={};for(const r of t.layout.attributes){let t=`${r.offset} ${r.name}`,o=(0,dataViewUtils/* unpackDataView */.q)(a,r,l);if(r.packPrecisionFactor)if(t+=` (precision: ${r.packPrecisionFactor})`,"number"==typeof o)o/=r.packPrecisionFactor;else for(let e=0;e<o.length;e++)o[e]/=r.packPrecisionFactor;e[t]=o}l+=s,n.push(e)}const f=t.metrics?(0,serializationUtils/* deserializeList */._)(new Reader_t(t.metrics),LabelMetric/* LabelMetric */.f)??[]:[];return{vertices:n,layout:t.layout,metrics:f}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const b=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.FeatureTile");let g=0;class I extends AFeatureTile/* AFeatureTile */.u{constructor(e,i,r,o,d,n,h=!1){super(e,i,r,o),this._fader=d,this._labelInstanceId=n,this._meshes=new Map,this._entities=[],this._entityIndex=new Map,this._invalidated=!1,this._nextUploadAllowed=!1,this.tileAge=g++,this._metrics=[],this._metricsVisibility=new Set,this._entityIds=new Set,this._entityIdsFromBuffer=new Set,this._attributeEpoch=0,this._encounteredEnd=!1,this.neededForCoverage=!1,this.isCoverage=!1,this.rendering=!1,this._decluttered=!1,this._objectIdMap=null,this.visible=!0,this.transforms.labelMat2d=(0,mat2df32/* create */.vt)(),this.transforms.tileUnitsToPixels=(0,mat3f32/* create */.vt)(),this.enableDeferredUploads=h}destroy(){super.destroy(),this.clear()}clear(){for(const e of this._meshes.values())e.destroy();this._meshes.clear(),this._entities=[],this._fader?.removeFeatureTileMetrics(this,this._metrics),this._metrics=[],this._displayList=null,this._invalidated=!0,this._entityIds.clear(),this._nextUploadAllowed=!0}beforeRender(e){super.beforeRender(e),this._needsReshuffle&&e.reshuffleManager.schedule(this)}tryReady(e){const t=this._invalidated&&!this._uploadAllowed;return!(this.isReady||t||!this._encounteredEnd||!(e>=this._attributeEpoch))&&((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.ready [epoch=${e}]`),this.ready(),this.requestRender(),this.decluttered=!1,!0)}get symbols(){const e=new Map;for(const t of this._metrics)e.get(t.labelClassId)||e.set(t.labelClassId,[]),e.get(t.labelClassId).push(t);return e}get decluttered(){return this._decluttered}set decluttered(e){this._decluttered=e,this.requestRender()}get id(){return this.key.id}get hasData(){return!!this._meshes.size}get hasAnimations(){return!!this._objectIdMap}get needsUpload(){return this._invalidated}get _uploadAllowed(){return!this.enableDeferredUploads||this._nextUploadAllowed}get _hasMetrics(){return this._metrics.length>0}upload(){this._nextUploadAllowed=!0}getDisplayList(e,t){if(this._uploadAllowed&&this._invalidated){this._entities.sort(((e,t)=>{const s=t.sortKey,i=e.sortKey;return i===s?e.id-t.id:i-s})),t===enums/* FeatureBatchingStrategy */.ch.BATCHING&&this.reshuffle(!0),this._displayList=l.fromDisplayEntities(this._entities,this,e,t);for(const e of this._meshes.values())e.upload();this.debugInfo.display.length=this._displayList.length,this.debugInfo.display.minOrderedLength=this._displayList.minOrderedLength,this.debugInfo.display.minUnorderedLength=this._displayList.minUnorderedLength,this.requestRender(),this._invalidated=!1,this._nextUploadAllowed=!1}return this._displayList}getMesh(e){if(!this._meshes.has(e))throw new Error(`InternalError: Unable to find VAO for instance: ${e}`);return this._meshes.get(e)}getSortKeys(e){const t=new Map;for(const{id:s,sortKey:i}of this._entities)if(e.has(s)&&t.set(s,i),t.size===e.size)break;return t}onMessage(e){if(e.objectIdMap)for(const t in e.objectIdMap)this._objectIdMap||(this._objectIdMap={}),this._objectIdMap[t]=e.objectIdMap[t];switch(e.type){case"append":this._onAppendMessage(e);break;case"update":this._onUpdateMessage(e)}if(this._aggregateMemoryStats(),this.requestRender(),e.end){if((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.end [epoch=${e.attributeEpoch}]`),!e.attributeEpoch)throw new Error("InternalError: Attribute epoch not defined.");this._attributeEpoch=e.attributeEpoch,this._encounteredEnd=!0}this._writeLabelVisibilityToMesh()}_onAppendMessage(e){if((0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.append`,{append:meshDebugUtils_s(e?.append)}),e.clear&&this.clear(),!e.append)return;const t=(0,serializationUtils/* deserializeList */._)(new Reader_t(e.append.entities),DisplayEntity/* default */.A);this._insert(t,e.append.data,!1)}_onUpdateMessage(e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${this.key.id}] FeatureTile.update`,{isPixelBuffer:e.isPixelBuffer,modify:meshDebugUtils_s(e.modify),remove:e.remove});const t=(0,serializationUtils/* deserializeList */._)(new Reader_t(e.modify.entities),DisplayEntity/* default */.A),s=t.map((e=>e.id)),i=e.isPixelBuffer??!1,r=[...e.remove,...s];i?this._removeByIdsFromBuffer(r):this._removeByIds(r),this._insert(t,e.modify.data,i)}reshuffle(e=!1){if(this.destroyed)return;const t=new Map;for(const s of this._entities)for(const i of s.records){const s=this._meshes.get(i.instanceId);let r=t.get(s);r||(r=new ReshufflePlan_t(e),t.set(s,r)),r.copyRecord(i)}for(const[s,i]of t)s.reshuffle(i);this._invalidated=!0,this._aggregateMemoryStats(),(0,has/* default */.A)("esri-2d-update-debug")&&b().info(`Tile ${this.key.id} was reshuffled.`)}copyPixelBufferedEntitesFrom(e,t,s,i){const r=s*definitions/* tileSize */.CQ,o=i*definitions/* tileSize */.CQ;for(const d of e._entities){let s=null;for(const i of d.records)if(i.overlaps&t){const t=e.getMesh(i.instanceId),n=this._ensureMesh(i.instanceId,t.layout,t.useVisibility).copyRecordFrom(t,i,r,o);s||(s=new DisplayEntity/* default */.A(d.id,d.sortKey),this._entityIdsFromBuffer.add(d.id),this._entityIndex.set(s.id,s),this._entities.push(s)),s.records.push(n)}}this._invalidated=!0}get metricsVisibility(){return this._metricsVisibility}copyMetricsVisibility(e){for(const t of e)this._metricsVisibility.add(t);this._writeLabelVisibilityToMesh()}updateLabelVisibility(){this._metricsVisibility.clear();for(const e of this._metrics){e.uniqueSymbol.show&&e.selectedForRendering&&this._metricsVisibility.add(e.hash)}this._writeLabelVisibilityToMesh()}_writeLabelVisibilityToMesh(){const e=this._meshes.get(this._labelInstanceId);if(e&&this._hasMetrics){for(const t of this._metrics){const s=this._entityIndex.get(t.id);if(!s)continue;const i=this._metricsVisibility.has(t.hash);e.setEntityRecordRangeVisibility(s.records,t.recordStart,t.recordCount,i?0:255)}this._invalidated=!0}}_ensureMesh(e,t,s){return this._meshes.has(e)||this._meshes.set(e,new MappedMesh/* MappedMesh */.X(this._stage.bufferPool,t,s)),this._meshes.get(e)}_insert(e,t,s){if(!e.length)return;this._removeDuplicatedBufferedEntites(e);const i=this._insertVertexData(t);for(const r of e){for(const e of r.records)e.updateBaseOffsets(i.get(e.instanceId));s?this._tryInsertBufferedEntity(r):this._insertEntity(r)}this._invalidated=!0}_insertMetrics(e){for(const t of e)t.tile=this;this._metrics.push(...e),this._fader?.insertFeatureTileMetrics(this,e)}_insertVertexData(e){const t=new Map;for(const s of e){const{instanceId:e,layout:i}=s,r=i.attributes.some((e=>"visibility"===e.name)),o=this._ensureMesh(e,i,r).append(s);if(s.metrics){const e=(0,serializationUtils/* deserializeList */._)(new Reader_t(s.metrics),LabelMetric/* LabelMetric */.f)??[];this._insertMetrics(e)}t.set(e,o)}return t}_insertEntity(e){(0,has/* default */.A)("esri-2d-update-debug")&&this._entityIds.has(e.id)&&console.error(`Tile ${this.key.id} insertEntity: Already have entityId ${e.id}`),this._entityIds.add(e.id),this._entityIndex.set(e.id,e),this._entities.push(e)}_tryInsertBufferedEntity(e){this._entityIds.has(e.id)?this._removeRecordsFromMesh(e.records):(this._entityIdsFromBuffer.add(e.id),this._entityIndex.set(e.id,e),this._entities.push(e))}_removeDuplicatedBufferedEntites(e){if(!this._entityIdsFromBuffer.size)return;const t=[];for(const s of e)this._entityIdsFromBuffer.has(s.id)&&t.push(s.id);this._removeByIds(t)}_removeByIdsFromBuffer(e){this._removeByIds(e.filter((e=>this._entityIdsFromBuffer.has(e))))}_removeByIds(e){if(0===e.length)return;const t=new Set(e),s=[];for(const r of this._entities)t.has(r.id)?(this._remove(r),this._entityIndex.delete(r.id)):s.push(r);this._entities=s;const i=this._metrics.filter((e=>t.has(e.displayId)));this._metrics=this._metrics.filter((e=>!t.has(e.displayId))),this._fader?.removeFeatureTileMetrics(this,i),this._invalidated=!0}_remove(e){this._removeRecordsFromMesh(e.records),this._entityIds.delete(e.id),this._entityIdsFromBuffer.delete(e.id)}_removeRecordsFromMesh(e){for(const t of e){const{instanceId:e,indexStart:s,indexCount:i,vertexStart:r,vertexCount:o}=t;this._meshes.get(e)?.remove(s,i,r,o)}}_aggregateMemoryStats(){this.debugInfo.memory.bytesUsed=0,this.debugInfo.memory.bytesReserved=0;for(const e of this._meshes.values())this.debugInfo.memory.bytesUsed+=e.memoryStats.bytesUsed,this.debugInfo.memory.bytesReserved+=e.memoryStats.bytesReserved}get _needsReshuffle(){if(this.destroyed)return!1;const{bytesUsed:e,bytesReserved:t}=this.debugInfo.memory,s=e/t,{minOrderedLength:i,length:h}=this.debugInfo.display;return t>definitions/* RESHUFFLING_EXEMPT_MEMORY_BYTES */._x&&s<definitions/* RESHUFFLING_TARGET_MEMORY_EFFICIENCY */.eI||h>definitions/* RESHUFFLING_EXEMPT_DRAW_CALLS */.Xh&&i/h<definitions/* RESHUFFLING_TARGET_DRAW_EFFICIENCY */.Vl}get entityIds(){return this._objectIdMap?this._entities.map((({id:e})=>({objectId:this._objectIdMap[e],displayId:e}))):[]}}


/***/ }),

/***/ 59339:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p6: () => (/* binding */ e),
/* harmony export */   wV: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports between, interpolate, positiveMod, radToByte */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=128/Math.PI,t=256/360,r=1/Math.LN2;function u(n,t){return(n%=t)>=0?n:n+t}function o(t){return u(t*n,256)}function c(n){return u(n*t,256)}function e(n){return Math.log(n)*r}function f(n,t,r){return n*(1-r)+t*r}function i(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}


/***/ }),

/***/ 49357:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ s),
/* harmony export */   o: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6267);
/* harmony import */ var _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(93540);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-2d-log-allocations");class s{static create(t,e){const r=e.acquireUint32Array(t);return new s(r,e)}constructor(t,e){this._array=t,this._pool=e}get array(){return this._array}get length(){return this._array.length}getUint32View(t,e){return new Uint32Array(this._array.buffer,t+this._array.byteOffset,e)}expand(t){if(t<=this._array.byteLength)return;const e=this._pool.acquireUint32Array(t);e.set(this._array),this._pool.releaseUint32Array(this._array),this._array=e}destroy(){this._pool.releaseUint32Array(this._array)}}class a{constructor(){this._data=new ArrayBuffer(a.BYTE_LENGTH),this._freeList=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_1__/* .FreeList */ .P({start:0,end:this._data.byteLength})}static get BYTE_LENGTH(){return 16e6}get buffer(){return this._data}acquireUint32Array(t){const e=this._freeList.firstFit(t);return null==e?null:new Uint32Array(this._data,e,t/Uint32Array.BYTES_PER_ELEMENT)}releaseUint32Array(t){this._freeList.free(t.byteOffset,t.byteLength)}}class i{constructor(){this._pages=[],this._pagesByBuffer=new Map,this._bytesAllocated=0}destroy(){this._pages=[],this._pagesByBuffer=null}get _bytesTotal(){return this._pages.length*a.BYTE_LENGTH}acquireUint32Array(e){if(this._bytesAllocated+=e,r&&console.log(`Allocating ${e}, (${this._bytesAllocated} / ${this._bytesTotal})`),e>=a.BYTE_LENGTH)return new Uint32Array(e/Uint32Array.BYTES_PER_ELEMENT);for(const t of this._pages){const r=t.acquireUint32Array(e);if(null!=r)return r}const s=this._addPage().acquireUint32Array(e);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__/* .assertIsSome */ .Lw)(s,"Expected to allocate page"),s}releaseUint32Array(t){this._bytesAllocated-=t.byteLength,r&&console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);const e=this._pagesByBuffer.get(t.buffer);e&&e.releaseUint32Array(t)}_addPage(){const t=new a;return this._pages.push(t),this._pagesByBuffer.set(t.buffer,t),t}}


/***/ }),

/***/ 33613:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(49195);
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46419);
/* harmony import */ var _brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(29588);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!==0?e.key.level-r.key.level:e.key.row-r.key.row!==0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A{constructor(e){super(),this.tileInfoView=e,this.sortFunction=n}renderChildren(e){this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this.tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this.tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.LABEL,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushTileDebugInfo_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ 61409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25423);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(37353);
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42482);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__/* .DisplayObject */ .q{constructor(t,e,i,r,n,o,h=n,l=o){super(),this.tileDebugInfoTexture=null,this.debugInfo={display:{length:0,minOrderedLength:0,minUnorderedLength:0,triangleCount:0},memory:{bytesUsed:0,bytesReserved:0}},this._destroyed=!1,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(t),this.resolution=e,this.x=i,this.y=r,this.width=n,this.height=o,this.rangeX=h,this.rangeY=l}destroy(){this.tileDebugInfoTexture&&(this.tileDebugInfoTexture.dispose(),this.tileDebugInfoTexture=null),this._destroyed=!0}get debugSlot(){let t=this;for(;t.parent!==this._stage;){if(!t.parent)return 0;t=t.parent}return this._stage.children.indexOf(t)}setTransform(i){const s=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[n,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),h=this.width/this.rangeX*s,l=this.height/this.rangeY*s;(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__/* .set */ .hZ)(r,h,0,0,0,l,0,n,o,1),(0,_core_libs_gl_matrix_2_math_mat3_js__WEBPACK_IMPORTED_MODULE_0__/* .multiply */ .lw)(this.transforms.displayViewScreenMat3,i.displayViewMat3,r)}get destroyed(){return this._destroyed}}


/***/ }),

/***/ 38403:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $Y: () => (/* binding */ p),
/* harmony export */   AV: () => (/* binding */ o),
/* harmony export */   ES: () => (/* binding */ $),
/* harmony export */   Qz: () => (/* binding */ i),
/* harmony export */   UE: () => (/* binding */ f),
/* harmony export */   bX: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports createAttributeLayout, isValidSVG */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_getDataTypeBytes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(60501);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.Utils");function o(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_BYTE:return 1;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return 2;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.FLOAT:return 4;default:return void a().error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function i(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_BYTE:return Uint8Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PixelType */ .ld.FLOAT:return Float32Array;default:return void a().error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function c(e){const t=new Map;for(const r in e){const a=e[r];let o=0;t.set(r,a.map((e=>{const t=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_4__/* .VertexElementDescriptor */ ._(e.name,e.count,e.type,o,0,e.normalized||!1);return o+=e.count*(0,_webgl_getDataTypeBytes_js__WEBPACK_IMPORTED_MODULE_3__/* .getDataTypeBytes */ ._)(e.type),t}))),t.get(r).forEach((e=>e.stride=o))}return t}const l=e=>{const t=new Map;for(const r in e)for(const n of e[r])t.set(n.name,n.location);return t},u=e=>{const t={};return e.forEach(((e,r)=>t[r]=e?.length?e[0].stride:0)),t},m=new Map,$=(e,t)=>{if(!m.has(e)){const r=c(t),n={strides:u(r),bufferLayouts:r,attributes:l(t)};m.set(e,n)}return m.get(e)},f=e=>e.includes("data:image/svg+xml");function d(e){const t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t}const g=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4));function p(e){if(null==e)return"";const{type:t}=e;switch(t){case"CIMMarkerPlacementAlongLineRandomSize":return`${t}-${e.seed}-${e.randomization}`;case"CIMMarkerPlacementAlongLineVariableSize":return`${t}-${e.maxRandomOffset}-${e.numberOfSizes}-${e.seed}-${e.variationMethod}`;case"CIMMarkerPlacementAtExtremities":return`${t}-${e.extremityPlacement}-${e.offsetAlongLine}`;case"CIMMarkerPlacementAtRatioPositions":return`${t}-${e.beginPosition}-${e.endPosition}-${e.flipFirst}-${JSON.stringify(e.positionArray)}`;case"CIMMarkerPlacementAtMeasuredUnits":return`${t}-${e.interval}-${e.skipMarkerRate}-${e.placeAtExtremities}`;case"CIMMarkerPlacementInsidePolygon":return`${t}-${e.stepX}-${e.stepY}-${e.randomness}-${e.gridType}-${e.seed}-${e.shiftOddRows}`;case"CIMMarkerPlacementOnLine":return`${t}-${e.relativeTo}-${e.startPointOffset}`;case"CIMMarkerPlacementOnVertices":return`${t}-${e.placeOnControlPoints}-${e.placeOnEndPoints}-${e.placeOnRegularVertices}`;case"CIMMarkerPlacementPolygonCenter":return`${t}-${e.method}`;default:return`${t}`}}


/***/ }),

/***/ 49195:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/brushes.js + 6 modules
var brushes = __webpack_require__(54185);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/vec2.js
var vec2 = __webpack_require__(60704);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/vec2f64.js
var vec2f64 = __webpack_require__(59646);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l=(e,r,t,o)=>{let n=0;for(let s=1;s<t;s++){const t=e[2*(r+s-1)],o=e[2*(r+s-1)+1];n+=(e[2*(r+s)]-t)*(e[2*(r+s)+1]+o)}return o?n>0:n<0},u=({coords:e,lengths:r},o)=>{const n=[];for(let s=0,i=0;s<r.length;i+=r[s],s+=1){const c=i,a=[];for(;s<r.length-1&&l(e,i+r[s],r[s+1],o);s+=1,i+=r[s])a.push(i+r[s]-c);const f=e.slice(2*c,2*(i+r[s])),m=(0,earcut.e)(f,a,2);for(const e of m)n.push(e+c)}return n};class y{constructor(e,r,t,o=!1){this._cache={},this.vertices=e,this.indices=r,this.primitiveType=t,this.isMapSpace=o}static fromPath(e){const r=(0,featureConversionUtils/* convertFromNestedArray */.eU)(new OptimizedGeometry/* default */.A,e.path,!1,!1),t=r.coords,o=new Uint32Array(u(r,!0)),n=new Uint32Array(t.length/2);for(let s=0;s<n.length;s++)n[s]=(0,number/* i1616to32 */.M9)(Math.floor(t[2*s]),Math.floor(t[2*s+1]));return new y({geometry:n},o,enums/* PrimitiveType */.WR.TRIANGLES)}static fromGeometry(t,o){const n=o.geometry?.type;switch(n){case"polygon":return y.fromPolygon(t,o.geometry);case"extent":return y.fromMapExtent(t,o.geometry);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.Mesh2D").error(new Error/* default */.A("mapview-bad-type",`Unable to create a mesh from type ${n}`,o)),y.fromScreenExtent({xmin:0,ymin:0,xmax:1,ymax:1})}}static fromPolygon(e,r){const t=(0,featureConversionUtils/* convertFromPolygon */.Ye)(new OptimizedGeometry/* default */.A,r,!1,!1),s=t.coords,f=new Uint32Array(u(t,!1)),h=new Uint32Array(s.length/2),l=(0,vec2f64/* create */.vt)(),x=(0,vec2f64/* create */.vt)();for(let n=0;n<h.length;n++)(0,vec2/* set */.hZ)(l,s[2*n],s[2*n+1]),e.toScreen(x,l),h[n]=(0,number/* i1616to32 */.M9)(Math.floor(x[0]),Math.floor(x[1]));return new y({geometry:h},f,enums/* PrimitiveType */.WR.TRIANGLES,!0)}static fromScreenExtent({xmin:e,xmax:r,ymin:t,ymax:o}){const n={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(e,t),(0,number/* i1616to32 */.M9)(r,t),(0,number/* i1616to32 */.M9)(e,o),(0,number/* i1616to32 */.M9)(e,o),(0,number/* i1616to32 */.M9)(r,t),(0,number/* i1616to32 */.M9)(r,o)])},s=new Uint32Array([0,1,2,3,4,5]);return new y(n,s,enums/* PrimitiveType */.WR.TRIANGLES)}static fromMapExtent(e,r){const[t,o]=e.toScreen([0,0],[r.xmin,r.ymin]),[n,s]=e.toScreen([0,0],[r.xmax,r.ymax]),i={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(t,o),(0,number/* i1616to32 */.M9)(n,o),(0,number/* i1616to32 */.M9)(t,s),(0,number/* i1616to32 */.M9)(t,s),(0,number/* i1616to32 */.M9)(n,o),(0,number/* i1616to32 */.M9)(n,s)])},c=new Uint32Array([0,1,2,3,4,5]);return new y(i,c,enums/* PrimitiveType */.WR.TRIANGLES)}destroy(){null!=this._cache.indexBuffer&&this._cache.indexBuffer.dispose(),this._cache.vertexBuffers?.forEach((e=>e?.dispose())),this._cache.indexBuffer=this._cache.vertexBuffers=null}getIndexBuffer(e,r=enums/* Usage */._U.STATIC_DRAW){return this._cache.indexBuffer??=BufferObject/* BufferObject */.g.createIndex(e,r,this.indices),this._cache.indexBuffer}getVertexBuffers(e,r=enums/* Usage */._U.STATIC_DRAW){return this._cache.vertexBuffers??=new Map(Object.keys(this.vertices).reduce(((t,o)=>(t.push([o,BufferObject/* BufferObject */.g.createVertex(e,r,this.vertices[o])]),t)),new Array)),this._cache.vertexBuffers}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/support/clippingUtils.js
var clippingUtils = __webpack_require__(6166);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class c extends DisplayObject/* DisplayObject */.q{constructor(e,t){super(),this._clip=t,this._cache={},this.stage=e,this._handle=(0,reactiveUtils/* watch */.wB)((()=>t.version),(()=>this._invalidate())),this.ready()}static fromClipArea(e,t){return new c(e,t)}_destroyGL(){null!=this._cache.mesh&&(this._cache.mesh.destroy(),this._cache.mesh=null),null!=this._cache.vao&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(e,t,r,s){const[i,a]=t.size;if("geometry"!==this._clip.type&&this._lastWidth===i&&this._lastHeight===a||(this._lastWidth=i,this._lastHeight=a,this._destroyGL()),null==this._cache.vao){const i=this._createMesh(t,this._clip),a=i.getIndexBuffer(e),o=i.getVertexBuffers(e);this._cache.mesh=i,this._cache.vao=new VertexArrayObject/* VertexArrayObject */.Z(e,r,s,o,a)}return this._cache.vao}_createTransforms(){return{displayViewScreenMat3:(0,mat3f32/* create */.vt)()}}_invalidate(){this._destroyGL(),this.requestRender()}_createMesh(r,s){switch(s.type){case"rect":return y.fromScreenExtent((0,clippingUtils/* createScreenExtent */.p)(s,r.size[0],r.size[1]));case"path":return y.fromPath(s);case"geometry":return y.fromGeometry(r,s);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.ClippingInfo").error(new Error/* default */.A("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),y.fromScreenExtent({xmin:0,ymin:0,xmax:1,ymax:1})}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends Container/* Container */.m{set clips(s){super.clips=s,this._updateClippingInfo(s)}renderChildren(s){s.painter.setPipelineState(null),null==this._renderPasses&&(this._renderPasses=this.prepareRenderPasses(s.painter));for(const r of this._renderPasses)try{r.render(s)}catch(e){}}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[brushes/* brushes */.d.clip],target:()=>this._clippingInfos,drawPhase:webgl_enums/* WGLDrawPhase */.S5.MAP|webgl_enums/* WGLDrawPhase */.S5.LABEL|webgl_enums/* WGLDrawPhase */.S5.LABEL_ALPHA|webgl_enums/* WGLDrawPhase */.S5.DEBUG|webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT})]}_updateClippingInfo(s){null!=this._clippingInfos&&(this._clippingInfos.forEach((s=>s.destroy())),this._clippingInfos=null),null!=s&&s.length&&(this._clippingInfos=s.items.map((s=>c.fromClipArea(this.stage,s)))),this.requestRender()}}


/***/ }),

/***/ 45987:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DW: () => (/* binding */ g),
/* harmony export */   GA: () => (/* binding */ y),
/* harmony export */   mv: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony exports AAnimationInstruction, AnimatedColorInstruction, AnimatedShiftInstruction, AnimatedTransformInstruction, RetInstruction, ScalarInstruction, Vector3Instruction, Vector4Instruction, easingCodes, generateGetValueSource, getTweenFactor, repeatTypeCodes, timeOriginSelectorCodes */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var t;!function(t){t.Local="Local",t.Global="Global"}(t||(t={}));class o{generateSource(t){const o=[];for(let a=1;a<this.length;a++)o.push(`vec4 atom${a} = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;");for(let a=0;a<this.ins;a++)o.push("top--;"),o.push(`vec4 in${this.ins-a-1} = stack[top];`);for(let a=0;a<this.outs;a++)o.push(`vec4 out${a};`);const{microcode:e}=this;for(const a of e)o.push(a);for(let a=0;a<this.outs;a++)o.push(`stack[top] = out${a};`),o.push("top++;"),o.push(`if (top >= ${x}) { top = ${x-1}; }`);return o}}let e=128;class a extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=0,this.microcode=["break;"]}encode(){return[[this.opcode,0,0,0]]}}class i extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.y, atom0.y, atom0.y, atom0.y);"]}encode(t){return[[this.opcode,t,0,0]]}}class n extends o{constructor(){super(...arguments),this.opcode=++e,this.length=1,this.ins=0,this.outs=1,this.microcode=["out0 = vec4(atom0.yzw, 0.0);"]}encode(t){return[[this.opcode,t[0]||0,t[1]||0,t[2]||0]]}}class r extends o{constructor(){super(...arguments),this.opcode=++e,this.length=2,this.ins=0,this.outs=1,this.microcode=["out0 = atom1;"]}encode(t){return[[this.opcode,0,0,0],t]}}function s(t){return[`float duration = clamp(${t.duration}, 0.05, 3600.0);`,`float startTimeOffset = ${t.startTimeOffset};`,`float repeatDelay = ${t.repeatDelay};`,`float timeOriginSelector = ${t.timeOriginSelector};`,`float repeatType = ${t.repeatType};`,`float easing = ${t.easing};`,`float playAnimation = ${t.playAnimation} * (1.0 - step(0.0, -${t.duration}));`,`float reverseAnimation = ${t.reverseAnimation};`,"float time = globalTime - (timeOriginSelector == 1.0 ? localTimeOrigin : 0.0);","time *= playAnimation;","time *= 1.0 - reverseAnimation * 2.0;","float period = duration + repeatDelay;","time += reverseAnimation == 1.0 ? (period - startTimeOffset - 0.001) : startTimeOffset + 0.001;","float omega = time / period;","float oi = floor(omega);","omega = repeatType == 1.0 || repeatType == 3.0 ? omega - oi : omega;","float of = omega * period;","of = (clamp(of, reverseAnimation * repeatDelay, period - (1.0 - reverseAnimation) * repeatDelay) - reverseAnimation * repeatDelay) / duration;","of = easing == 2.0 ? pow(of, 3.0) : of;","of = easing == 3.0 ? 1.0 - pow(1.0 - of, 3.0) : of;","of = easing == 4.0 ? of < 0.5 ? 4.0 * pow(of, 3.0) : 1.0 - pow(-2.0 * of + 2.0, 3.0) / 2.0 : of;","bool oscillate = repeatType == 3.0 && mod(oi, 2.0) == 1.0;",`${t.out} = oscillate ? 1.0 - of : of;`]}const l={Linear:1,EaseIn:2,EaseOut:3,EaseInOut:4},m={Loop:1,None:2,Oscillate:3},c={Local:1,Global:2};function f(t){const o=l[t.easing],e=m[t.repeatType],a=c[t.timeOriginSelector];return[[t.duration,t.startTimeOffset,t.repeatDelay,a],[e,o,t.playAnimation,t.reverseAnimation]]}class p extends o{constructor(){super(...arguments),this.opcode=++e,this.length=10,this.ins=1,this.outs=1,this.microcode=["vec2 fromTranslation = atom1.xy;","vec2 toTranslation = atom1.zw;","float fromRotation = atom2.x;","float toRotation = atom2.y;","float fromScale = atom2.z;","float toScale = atom2.w;","bool relativeTranslation = atom9.x == 1.0;","bool absoluteScale = atom9.y == 1.0;","vec2 translationMultiplier = relativeTranslation ? pixelDimensions : vec2(1.0, 1.0);","float scaleDivisor = absoluteScale ? pixelDimensions.y : 1.0;","float fTranslation;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fTranslation"}),"}","float fRotation;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fRotation"}),"}","float fScale;","{",...s({duration:"atom7.x",startTimeOffset:"atom7.y",repeatDelay:"atom7.z",timeOriginSelector:"atom7.w",repeatType:"atom8.x",easing:"atom8.y",playAnimation:"atom8.z",reverseAnimation:"atom8.w",out:"fScale"}),"}","vec2 aTranslation = mix(fromTranslation, toTranslation, fTranslation);","float aRotation = mix(fromRotation, toRotation, fRotation);","float aScale = mix(fromScale, toScale, fScale);","vec2 pTranslation = in0.xy;","float pRotation = in0.z;","float pScale = in0.w;","aTranslation *= translationMultiplier;","aScale /= scaleDivisor;","float rotation = pRotation + aRotation;","float scale = pScale * aScale;","float sin1 = sin(pRotation);","float cos1 = cos(pRotation);","float s1 = pScale;","float x1 = pTranslation.x;","float y1 = pTranslation.y;","float x2 = aTranslation.x;","float y2 = aTranslation.y;","\n    vec2 translation = vec2(\n      cos1 * s1 * x2 - sin1 * s1 * y2 + x1,\n      sin1 * s1 * x2 + cos1 * s1 * y2 + y1\n    );\n    ","out0 = vec4(translation, rotation, scale);"]}encode(t){return[[this.opcode,0,0,0],[t.translation.from[0],t.translation.from[1],t.translation.to[0],t.translation.to[1]],[t.rotation.from,t.rotation.to,t.scale.from,t.scale.to],...f(t.translation.timing),...f(t.rotation.timing),...f(t.scale.timing),[t.relativeTranslation?1:0,t.absoluteScale?1:0,0,0]]}}class u extends o{constructor(){super(...arguments),this.opcode=++e,this.length=7,this.ins=1,this.outs=1,this.microcode=["float fromOpacity = atom0.y;","float toOpacity = atom0.z;","vec4 fromColor = atom1;","vec4 toColor = atom2;","float fColor;","{",...s({duration:"atom3.x",startTimeOffset:"atom3.y",repeatDelay:"atom3.z",timeOriginSelector:"atom3.w",repeatType:"atom4.x",easing:"atom4.y",playAnimation:"atom4.z",reverseAnimation:"atom4.w",out:"fColor"}),"}","float fOpacity;","{",...s({duration:"atom5.x",startTimeOffset:"atom5.y",repeatDelay:"atom5.z",timeOriginSelector:"atom5.w",repeatType:"atom6.x",easing:"atom6.y",playAnimation:"atom6.z",reverseAnimation:"atom6.w",out:"fOpacity"}),"}","vec4 aColor = mix(fromColor, toColor, fColor);","aColor.a *= mix(fromOpacity, toOpacity, fOpacity);","vec4 pColor = in0;","out0 = aColor * pColor;"]}encode(t){return[[this.opcode,t.opacity.from,t.opacity.to,0],[t.color.from[0],t.color.from[1],t.color.from[2],t.color.from[3]],[t.color.to[0],t.color.to[1],t.color.to[2],t.color.to[3]],...f(t.color.timing),...f(t.opacity.timing)]}}class h extends o{constructor(){super(...arguments),this.opcode=++e,this.length=4,this.ins=1,this.outs=1,this.microcode=["float fromShift = atom0.y;","float toShift = atom0.z;","float duration = atom1.x;","bool multiplyByLineLength = atom3.x == 1.0;","float fShift;","{",...s({duration:"duration",startTimeOffset:"atom1.y",repeatDelay:"atom1.z",timeOriginSelector:"atom1.w",repeatType:"atom2.x",easing:"atom2.y",playAnimation:"atom2.z",reverseAnimation:"atom2.w",out:"fShift"}),"}","toShift *= multiplyByLineLength ? lineLength : 1.0;","float aShift = mix(fromShift, toShift, fShift);","vec4 pShift = in0;","out0 = mod(aShift + pShift, lineLength);"]}encode(t){return[[this.opcode,t.shift.from,t.shift.to,0],...f(t.shift.timing),[t.multiplyByLineLength?1:0,0,0,0]]}}const y={scalar:new i,vector3:new n,vector4:new r,animatedTransform:new p,animatedColor:new u,animatedShift:new h,ret:new a},d=40,x=4;function g(t){const o=[];o.push(`float globalTime = ${t.globalTime};`),o.push(`float localTimeOrigin = ${t.localTimeOrigin};`),o.push(`float lineLength = ${t.lineLength};`),o.push(`vec2 pointer = ${t.animationPointer};`),o.push(`vec2 size = ${t.animationTextureSize};`),o.push("int top = 0;"),o.push(`vec4 stack[${x}];`),o.push(`for (int counter = 0; counter < ${d}; counter++) {`),o.push(`vec4 atom0 = texture(${t.animationTexture}, (pointer + 0.5) / size);`),o.push("pointer.x += 1.0;"),o.push(`vec2 pixelDimensions = ${t.pixelDimensions};`),o.push("if (false) {");for(const e in y){const a=y[e];o.push(`} else if (int(atom0.x) == ${a.opcode}) {`);for(const e of a.generateSource(t))o.push(e)}return o.push("} // End if-else."),o.push("} // End for."),o.push(`${t.out} = top > 0 ? stack[top - 1] : vec4(0.0);`),o.join("\n")}function v(t,o){return`\n    vec4 ${t}(int valueIndex) {\n      vec2 thePointer = ${o.animationPointer};\n      float jump = texture(${o.animationTexture}, (0.5 + vec2(thePointer.x + float(valueIndex), thePointer.y)) / ${o.animationTextureSize}).x;\n      thePointer = vec2(thePointer.x + jump, thePointer.y);\n      vec4 theResult;\n      ${g({...o,out:"theResult",animationPointer:"thePointer"})}\n      return theResult;\n    }\n  `}


/***/ }),

/***/ 95031:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}prepareState(t,r){}draw(t,r,s){}drawMany(t,r,s){for(const a of r)a.visible&&this.draw(t,a,s)}}


/***/ }),

/***/ 46419:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40275);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97394);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50122);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class _ extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(1,0,0,1),this._initialized=!1}dispose(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}prepareState({context:e}){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.REPLACE),e.setStencilWriteMask(255)}draw(e,r){const{context:t,requestRender:i,allowDelayedRender:s}=e;this._initialized||this._initialize(t),!s||null==i||this._solidProgram.compiled?(t.setStencilFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Face */ .Y7.FRONT_AND_BACK,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .CompareFunction */ .MT.GREATER,r.stencilRef,255),t.bindVAO(this._solidVertexArrayObject),t.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",r.transforms.displayViewScreenMat3),this._solidProgram.setUniform2fv("u_coord_range",[r.rangeX,r.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),t.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),t.bindVAO()):i()}_initialize(e){if(this._initialized)return!0;const t=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__/* .createProgram */ .r)(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T);if(!t)return!1;const o=new Int8Array([0,0,1,0,0,1,1,1]),a=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,o),l=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexArrayObject */ .Z(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",a]]));return this._solidProgram=t,this._solidVertexArrayObject=l,this._initialized=!0,!0}}


/***/ }),

/***/ 29588:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40275);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _FeatureTile_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(90819);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97394);
/* harmony import */ var _shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(13294);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(50122);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(8595);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(45758);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const _=512,x=512,b=16,p=8,T=(x-2*p)/5;class y extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_core_libs_gl_matrix_2_factories_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__/* .fromValues */ .fA)(1,0,0,1)}dispose(){this._outlineProgram?.dispose(),this._outlineProgram=null,this._tileInfoProgram?.dispose(),this._tileInfoProgram=null,this._outlineVertexArrayObject?.dispose(),this._outlineVertexArrayObject=null,this._tileInfoVertexArrayObject?.dispose(),this._tileInfoVertexArrayObject=null,this._ctx=null}prepareState({context:e}){e.setBlendingEnabled(!0),e.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1)}draw(e,t){const{context:o,requestRender:i,allowDelayedRender:s}=e;if(!t.isReady&&t instanceof _FeatureTile_js__WEBPACK_IMPORTED_MODULE_2__/* .FeatureTile */ .R&&t.hasData)return;if(this._loadWGLResources(o),s&&null!=i&&(!this._outlineProgram.compiled||!this._tileInfoProgram.compiled))return void i();o.bindVAO(this._outlineVertexArrayObject),o.useProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._outlineProgram.setUniform2f("u_coord_range",t.rangeX,t.rangeY),this._outlineProgram.setUniform1f("u_depth",0),this._outlineProgram.setUniform4fv("u_color",this._color),o.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .PrimitiveType */ .WR.LINE_STRIP,0,4);const n=this._getTexture(o,t);n?(o.bindVAO(this._tileInfoVertexArrayObject),o.useProgram(this._tileInfoProgram),o.bindTexture(n,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",t.transforms.displayViewScreenMat3),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform2f("u_coord_ratio",t.rangeX/t.width,t.rangeY/t.height),this._tileInfoProgram.setUniform2f("u_delta",0,0),this._tileInfoProgram.setUniform2f("u_dimensions",n.descriptor.width,n.descriptor.height),o.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),o.bindVAO()):o.bindVAO()}_loadWGLResources(e){if(this._outlineProgram&&this._tileInfoProgram)return;const r=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__/* .createProgram */ .r)(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .background */ .T),o=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_7__/* .createProgram */ .r)(e,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__/* .tileInfo */ .H),a=new Int8Array([0,0,1,0,1,1,0,1]),l=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .Usage */ ._U.STATIC_DRAW,a),m=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexArrayObject */ .Z(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",l]])),u=new Int8Array([0,0,1,0,0,1,1,1]),d=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .Usage */ ._U.STATIC_DRAW,u),h=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_10__/* .VertexArrayObject */ .Z(e,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_4__/* .tileInfo */ .H.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,new Map([["geometry",d]]));this._outlineProgram=r,this._tileInfoProgram=o,this._outlineVertexArrayObject=m,this._tileInfoVertexArrayObject=h}_getTexture(e,t){if(!this._ctx){const e=document.createElement("canvas");e.width=_,e.height=x,this._ctx=e.getContext("2d")}if(!t.tileDebugInfoTexture){const r=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureDescriptor */ .R;r.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,r.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureSamplingMode */ .Cj.LINEAR,r.isImmutable=!0,r.width=_,r.height=x,t.tileDebugInfoTexture=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(e,r)}const r=this._ctx;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.textAlign="left",r.textBaseline="top",r.font=b-2+"px sans-serif",r.lineWidth=2,r.fillStyle="white",r.strokeStyle="black";const{debugSlot:o}=t;let i=p+T*o;const s=`${o}) ${t.key.id} (${t.constructor.name})`;r.strokeText(s,p,i),r.fillText(s,p,i),i+=b;const{debugInfo:n}=t;if(n){const{length:e,minOrderedLength:t,minUnorderedLength:o,triangleCount:s}=n.display;if(e>0){const t=`Length: ${e}`;r.strokeText(t,p,i),r.fillText(t,p,i),i+=b}if(t){const e=`Min ordered length: ${t}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}if(o){const e=`Min unordered length: ${o}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}if(s>0){s>1e5&&(r.fillStyle="red",r.strokeStyle="white");const e=`Triangle count: ${s}`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}const{bytesUsed:a,bytesReserved:l}=n.memory;if(r.fillStyle="white",r.strokeStyle="black",a>0||l>0){const e=`Memory usage: ${a} of ${l} bytes`;r.strokeText(e,p,i),r.fillText(e,p,i),i+=b}}return t.tileDebugInfoTexture.setData(r.canvas),t.tileDebugInfoTexture}}


/***/ }),

/***/ 51688:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _BoundingBox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1339);
/* harmony import */ var _util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(1314);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=2;class n{constructor(e,i,t,s,r,h,n,a,o,l,d=[],c=0,u=0){this.displayId=e,this.labelClassId=i,this.hash=t,this.anchorX=s,this.anchorY=r,this.directionX=h,this.directionY=n,this.maxScale=a,this.minScale=o,this.referenceBounds=l,this.bounds=d,this.recordStart=c,this.recordCount=u,this.priority=0,this._colliders=null,this.uniqueSymbol=null,this.selectedForRendering=!1}get xTile(){return this.anchorX}get yTile(){return this.anchorY}colliders(t){if(!this._colliders){const s=t.attributeView,r=_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .labelPlacementOffsetPadding */ .C2;let n=this.referenceBounds?.size??0;const a=t.layerView.labelingCollisionInfos[0].vvEvaluators[0];if(null!=a){const e=a(s.getVisualVariableData(this.displayId,_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .VVBinding */ .Gn.SIZE));n=isNaN(e)||null==e||e===1/0?n:e}const o=this.minScale?t.layerView.view.featuresTilingScheme.scaleToZoom(this.minScale):0,l=this.maxScale?t.layerView.view.featuresTilingScheme.scaleToZoom(this.maxScale):25,d=this.directionX*(r+n/2),c=this.directionY*(r+n/2);this._colliders=this.bounds.map((e=>({xTile:this.anchorX,yTile:this.anchorY,dxPixels:e.x-e.halfWidth+d,dyPixels:e.y-e.halfHeight+c,hard:!0,partIndex:1,width:e.width+h,height:e.height+h,angle:0,xScreen:0,yScreen:0,dxScreen:0,dyScreen:0,enabled:!0,minLod:o,maxLod:l})))}return this._colliders}get id(){return this.displayId}serialize(e){e.push(this.displayId),e.push(this.labelClassId),e.push(this.hash),e.push(this.recordStart),e.push(this.recordCount),e.writeF32(this.anchorX),e.writeF32(this.anchorY),e.writeF32(this.directionX),e.writeF32(this.directionY),e.writeF32(this.maxScale),e.writeF32(this.minScale),this.referenceBounds?(e.writeF32(this.referenceBounds.size),e.writeF32(this.referenceBounds.offsetX),e.writeF32(this.referenceBounds.offsetY)):(e.writeF32(0),e.writeF32(0),e.writeF32(0)),(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .serializeList */ .j)(e,this.bounds)}static deserialize(e){const i=e.readInt32(),s=e.readInt32(),h=e.readInt32(),a=e.readInt32(),o=e.readInt32(),l=e.readF32(),d=e.readF32(),c=e.readF32(),u=e.readF32(),f=e.readF32(),m=e.readF32(),F=e.readF32(),w=e.readF32(),S=e.readF32(),p=(0,_util_serializationUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .deserializeList */ ._)(e,_BoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)??[];return new n(i,s,h,l,d,c,u,f,m,{size:F,offsetX:w,offsetY:S},p,a,o)}}


/***/ }),

/***/ 93540:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ t),
/* harmony export */   P: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(a){if(this.next=null,!Array.isArray(a))return void(this.data=a);this.data=a[0];let e=this;for(let n=1;n<a.length;n++)e.next=new t([a[n]]),e=e.next}*values(){let t=this;for(;t;)yield t.data,t=t.next}forEach(t){let a=this;for(;a;)t(a.data),a=a.next}get last(){return this.next?this.next.last:this}}class a{constructor(a){this._head=null,null!=a&&(this._head=new t(a))}get head(){return this._head}maxAvailableSpace(){if(null==this._head)return 0;let t=0;return this._head.forEach((a=>{const e=a.end-a.start;t=Math.max(t,e)})),t}firstFit(t){if(null==this._head)return null;let a=null,e=this._head;for(;e;){const n=e.data.end-e.data.start;if(n===t)return a?a.next=e.next:this._head=e.next,e.data.start;if(n>t){const a=e.data.start;return e.data.start+=t,a}a=e,e=e.next}return null}free(a,e){const n=a+e;if(null==this._head){const e=new t({start:a,end:n});return void(this._head=e)}if(n<=this._head.data.start){if(n===this._head.data.start)return void(this._head.data.start-=e);const r=new t({start:a,end:n});return r.next=this._head,void(this._head=r)}let r=this._head,d=r.next;for(;d;){if(d.data.start>=n){if(r.data.end===a){if(r.data.end+=e,r.data.end===d.data.start){const t=d.data.end-d.data.start;return r.data.end+=t,void(r.next=d.next)}return}if(d.data.start===n)return void(d.data.start-=e);const s=new t({start:a,end:n});return s.next=r.next,void(r.next=s)}r=d,d=d.next}if(a===r.data.end)return void(r.data.end+=e);const s=new t({start:a,end:n});r.next=s}clear(){this._head=null}}


/***/ }),

/***/ 56670:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  X: () => (/* binding */ y)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/PooledUint32Array.js
var PooledUint32Array = __webpack_require__(49357);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js
var FreeList = __webpack_require__(93540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Buffer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=1.25,d=32767,u=d<<16|d;class o{constructor(t,i,r,s){this._pool=s;const n=PooledUint32Array/* PooledUint32Array */.W.create(i*r*Uint32Array.BYTES_PER_ELEMENT,this._pool);this.size=i,this.strideInt=r,this.bufferType=t,this.dirty={start:1/0,end:0},this.memoryStats={bytesUsed:0,bytesReserved:i*r*Uint32Array.BYTES_PER_ELEMENT},this._gpu=null,this._cpu=n,this.clear()}get elementSize(){return this._cpu.length/this.strideInt}get intSize(){return this.fillPointer*this.strideInt}get byteSize(){return this.intSize*Uint32Array.BYTES_PER_ELEMENT}get invalidated(){return this.bufferSize>0&&!this._gpu}get invalidatedComputeBuffer(){return this.bufferSize>0&&!this._gpuComputeTriangles}invalidate(){this._invalidateTriangleBuffer(),this._gpu?.dispose(),this._gpu=null}_invalidateTriangleBuffer(){this._gpuComputeTriangles?.dispose(),this._gpuComputeTriangles=null}destroy(){this._gpu?.dispose(),this._gpuComputeTriangles?.dispose(),this._cpu?.destroy()}clear(){this.dirty.start=1/0,this.dirty.end=0,this.freeList=new FreeList/* FreeList */.P({start:0,end:this._cpu.length/this.strideInt}),this.fillPointer=0}ensure(t){if(this.maxAvailableSpace()>=t)return;if(t*this.strideInt>this._cpu.length-this.fillPointer){this.invalidate();const i=this._cpu.length/this.strideInt,r=Math.round((i+t)*a),e=r*this.strideInt;this._cpu.expand(e*Uint32Array.BYTES_PER_ELEMENT),this.freeList.free(i,r-i),this.memoryStats.bytesReserved+=(r-i)*this.strideInt*Uint32Array.BYTES_PER_ELEMENT}}setU32(t,i){this._cpu.array[t]!==i&&(this._cpu.array[t]=i,this.dirty.start=Math.min(t,this.dirty.start),this.dirty.end=Math.max(t+1,this.dirty.end))}setF32(t,r){this.setU32(t,(0,number/* toUint32 */.jT)(r))}setF32Range(t,r,e){const s=(0,number/* toUint32 */.jT)(e);this._cpu.array.fill(s,t,r),this.dirty.start=Math.min(t,this.dirty.start),this.dirty.end=Math.max(r,this.dirty.end)}getF32(t){return (0,number/* toFloat32 */.fG)(this._cpu.array[t])}getGPUBuffer(t,i=!1){if(!this.bufferSize)return null;if(i){if("index"!==this.bufferType)throw new Error("Tired to get triangle buffer, but target is not an index buffer");return null==this._gpuComputeTriangles&&(this._gpuComputeTriangles=this._createComputeBuffer(t)),this._gpuComputeTriangles}return null==this._gpu&&(this._gpu=this._createBuffer(t)),this._gpu}getView(t,i){return this._cpu.getUint32View(t,i/Uint32Array.BYTES_PER_ELEMENT)}get bufferSize(){return this._cpu.length/this.strideInt}maxAvailableSpace(){return this.freeList.maxAvailableSpace()}insert(i,r,e,s){const n=e*this.strideInt;if(!n)return 0;const h=r*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,a=new Uint32Array(i,h,n),d=this.freeList.firstFit(e);(0,maybe/* assertIsSome */.Lw)(d,"First fit region must be defined");const u=d*this.strideInt,o=n;if(this._cpu.array.set(a,u),0!==s)for(let t=0;t<a.length;t++)this._cpu.array[t+u]+=s;return this.dirty.start=Math.min(this.dirty.start,u),this.dirty.end=Math.max(this.dirty.end,u+o),this.fillPointer=Math.max(this.fillPointer,u+o),this.memoryStats.bytesUsed+=e*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,d}copyFrom(i,r,e,s,n){const h=e*this.strideInt;if(!h)return 0;const a=r*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,d=i._cpu.getUint32View(a,h),u=this.freeList.firstFit(e);(0,maybe/* assertIsSome */.Lw)(u,"First fit region must be defined");const o=u*this.strideInt,f=h;if(this._cpu.array.set(d,o),0!==s)for(let t=0;t<h;t++)this._cpu.array[o+t*this.strideInt+n]+=s;return this.dirty.start=Math.min(this.dirty.start,o),this.dirty.end=Math.max(this.dirty.end,o+f),this.fillPointer=Math.max(this.fillPointer,o+f),this.memoryStats.bytesUsed+=e*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,u}free(t,i,r){const e=t*this.strideInt,s=(t+i)*this.strideInt;if(!0===r)for(let n=t;n!==t+i;n++)this._cpu.array[n*this.strideInt]=u;this.dirty.start=Math.min(this.dirty.start,e),this.dirty.end=Math.max(this.dirty.end,s),this.freeList.free(t,i),this.memoryStats.bytesUsed-=i*this.strideInt*Uint32Array.BYTES_PER_ELEMENT}upload(){if(this.dirty.end){if(this._invalidateTriangleBuffer(),null==this._gpu)return this.dirty.start=1/0,void(this.dirty.end=0);this._gpu.setSubData(this._cpu.array,this.dirty.start,this.dirty.start,this.dirty.end),this.dirty.start=1/0,this.dirty.end=0}}reshuffle(t,i){if(0===i.length)return;const r=this.byteSize,s=t*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,n=r>s,h=this._cpu,a=PooledUint32Array/* PooledUint32Array */.W.create(s,this._pool);n||a.array.set(this._cpu.getUint32View(0,this.intSize));for(const e of i)if(n||e.srcFrom!==e.dstFrom||0!==e.mutate){this.dirty.start=Math.min(this.dirty.start,e.dstFrom*this.strideInt),this.dirty.end=Math.max(this.dirty.end,(e.dstFrom+e.count)*this.strideInt);for(let t=0;t<e.count;t++){const i=(e.dstFrom+t)*this.strideInt,r=(e.srcFrom+t)*this.strideInt;for(let t=0;t<this.strideInt;t++)a.array[i+t]=h.array[r+t]+e.mutate}}this._cpu.destroy(),this._cpu=a,n&&this.invalidate(),this.freeList.clear(),this.memoryStats.bytesUsed=this.memoryStats.bytesReserved=s}_createBuffer(t){const i=enums/* Usage */._U.DYNAMIC_DRAW;return"index"===this.bufferType?BufferObject/* BufferObject */.g.createIndex(t,i,this._cpu.array):BufferObject/* BufferObject */.g.createVertex(t,i,this._cpu.array)}_createComputeBuffer(t){const i=enums/* Usage */._U.DYNAMIC_DRAW,r=new Uint32Array(this.fillPointer/3);for(let e=0;e<this.fillPointer;e+=3)r[e/3]=this._cpu.array[e];return BufferObject/* BufferObject */.g.createIndex(t,i,r)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/dataViewUtils.js
var dataViewUtils = __webpack_require__(17906);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/utils.js
var utils = __webpack_require__(12453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/MappedMesh.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const MappedMesh_u=1e3,MappedMesh_a=4,h=[{name:"visibility",offset:0,type:enums/* DataType */.pe.FLOAT,count:1}],l={hash:(0,utils/* vertexLayoutHash */.hU)(h),attributes:h,stride:MappedMesh_a};function _(e,t){const i=e.attributes.filter((e=>t.locations.has(e.name))).map((t=>({name:t.name,type:t.type,count:t.count,divisor:0,normalized:t.normalized??!1,offset:t.offset,stride:e.stride})));return new Map([["geometry",i]])}function MappedMesh_d(e,t){const i=[],r=e.attributes.filter((e=>t.locations.has(e.name)));for(const s of r){i.push({name:s.name,type:s.type,count:s.count,divisor:0,normalized:s.normalized??!1,offset:s.offset,stride:e.stride});const r=t.computeAttributeMap[s.name];null!=r&&2===r.length&&(i.push({name:r[0],count:s.count,divisor:0,type:s.type,normalized:s.normalized??!1,offset:s.offset+e.stride,stride:e.stride}),i.push({name:r[1],count:s.count,divisor:0,type:s.type,normalized:s.normalized??!1,offset:s.offset+2*e.stride,stride:e.stride}))}return new Map([["geometry",i]])}class y{constructor(e,t,i){if(this._bufferPool=e,this._layout=t,this.useVisibility=i,this._invalidatedGeometry=!1,this._invalidatedCompute=!1,this._position=this._layout.attributes.find((e=>"pos"===e.name||"position"===e.name)),!this._position)throw new Error("InternalError: Unable to find position attribute")}destroy(){this._indexBuffer=(0,maybe/* destroyMaybe */.pR)(this._indexBuffer),this._vertexBuffer=(0,maybe/* destroyMaybe */.pR)(this._vertexBuffer),this._visibilityBuffer=(0,maybe/* destroyMaybe */.pR)(this._visibilityBuffer),this._computeVAO?.disposeVAOOnly(),this._geometryVAO?.disposeVAOOnly()}get layout(){return this._layout}getDrawArgs(e,t,i,r){return r?{primitive:enums/* PrimitiveType */.WR.POINTS,count:t/3,offset:i/3}:{primitive:e,count:t,offset:i}}getAttributePrecisionPackFactors(){const e={};for(const t of this.layout.attributes)t.packPrecisionFactor&&(e[t.name]=t.packPrecisionFactor);return e}getDebugVertexInfo(e=!1,t){if(!this._vertexBuffer)return null;const i=this._layout,s=i.stride,f=this._vertexBuffer.getView(0,this._vertexBuffer.byteSize),o=[];if(e)if(null==t)console.log("must provide location info to see compute attributes");else for(const r of i.attributes){const e=t.computeAttributeMap[r.name];null!=e&&2===e.length&&(o.push({...r,name:e[0],offset:r.offset+s}),o.push({...r,name:e[1],offset:r.offset+2*s}))}const n=new DataView(f.slice().buffer);let u=f.byteLength/s;e&&(u=this._indexBuffer.fillPointer/3);const a=this._indexBuffer.getView(0,this._indexBuffer.byteSize);let h=0;const l=[];for(let _=0;_<u;_++){if(e){h=a[3*_]*s}const t={};for(const e of[...i.attributes,...o]){let i=`${e.offset} ${e.name}`,s=(0,dataViewUtils/* unpackDataView */.q)(n,e,h);if(e.packPrecisionFactor)if(i+=` (precision: ${e.packPrecisionFactor})`,"number"==typeof s)s/=e.packPrecisionFactor;else for(let t=0;t<s.length;t++)s[t]/=e.packPrecisionFactor;t[i]=s}h+=s,l.push(t)}return{vertices:l,layout:i}}_ensure(e,t){if(this._vertexBuffer&&this._indexBuffer)this._indexBuffer.ensure(Math.max(e,MappedMesh_u)),this._vertexBuffer.ensure(Math.max(t,MappedMesh_u)),this._visibilityBuffer&&this._visibilityBuffer.ensure(Math.max(t,MappedMesh_u));else{const r=this._layout.stride/Uint32Array.BYTES_PER_ELEMENT;this._indexBuffer=new o("index",Math.max(e,MappedMesh_u),1,this._bufferPool),this._vertexBuffer=new o("vertex",Math.max(t,MappedMesh_u),r,this._bufferPool),this.useVisibility&&(this._visibilityBuffer=new o("vertex",Math.max(t,MappedMesh_u),MappedMesh_a/Uint32Array.BYTES_PER_ELEMENT,this._bufferPool))}}append(e){const t=e.layout.stride,i=e.indices.byteLength/Uint32Array.BYTES_PER_ELEMENT,r=e.vertices.byteLength/t;this._ensure(i,r);const{vertices:s,indices:f}=e,o=this._vertexBuffer.insert(s,0,s.byteLength/t,0),n=new Uint32Array(r);new Float32Array(n.buffer).fill(255),this._visibilityBuffer&&this._visibilityBuffer.insert(n,0,n.byteLength/MappedMesh_a,0);return{vertexFrom:o,indexFrom:this._indexBuffer.insert(f,0,f.byteLength/4,o)}}setEntityRecordRangeVisibility(e,t,i,r){for(let s=t;s<t+i;s++){const{vertexStart:t,vertexCount:i}=e[s];this._visibilityBuffer.setF32Range(t,t+i,r)}}getEntityRecordVisibility(e,t){const i=e.records[t];return this._visibilityBuffer.getF32(i.vertexStart)}copyRecordFrom(e,i,r,s){const{indexStart:f,indexCount:o,vertexStart:n,vertexCount:u}=i;this._ensure(o,u);const a=e._position,h=r*(a.packPrecisionFactor??1),l=s*(a.packPrecisionFactor??1),_=a.offset,d=(0,number/* i1616to32 */.M9)(h,l),y=this._vertexBuffer.copyFrom(e._vertexBuffer,n,u,d,_);this._visibilityBuffer&&e._visibilityBuffer&&this._visibilityBuffer.copyFrom(e._visibilityBuffer,n,u,0,0);const v=this._indexBuffer.copyFrom(e._indexBuffer,f,o,y-n,0),c=i.clone();return c.vertexStart=y,c.indexStart=v,c.overlaps=0,c}remove(e,t,i,r){this._indexBuffer.free(e,t),this._vertexBuffer.free(i,r),this._visibilityBuffer&&this._visibilityBuffer.free(i,r)}upload(){this._invalidatedGeometry=!0,this._invalidatedCompute=!0}getGeometryVAO(e,t){if(!this._vertexBuffer||!this._indexBuffer||!this._vertexBuffer.bufferSize)return null;if(this._invalidatedGeometry){(this._vertexBuffer.invalidated||this._indexBuffer.invalidated||this._visibilityBuffer?.invalidated)&&(this._vertexBuffer.invalidate(),this._indexBuffer.invalidate(),this._visibilityBuffer&&this._visibilityBuffer.invalidate(),this._geometryVAO?.disposeVAOOnly(),this._geometryVAO=null),this._vertexBuffer.upload(),this._indexBuffer.upload(),this._visibilityBuffer&&this._visibilityBuffer.upload();const i=this._indexBuffer.getGPUBuffer(e,!1),r=new Map([["geometry",this._vertexBuffer.getGPUBuffer(e)]]);if(this._visibilityBuffer&&r.set("visibility",this._visibilityBuffer.getGPUBuffer(e)),!this._geometryVAO){const s=_(this.layout,t);s.set("visibility",_(l,t).get("geometry")),this._geometryVAO=new VertexArrayObject/* VertexArrayObject */.Z(e,t.locations,s,r,i)}this._invalidatedGeometry=!1}return this._geometryVAO}getComputeVAO(e,t){if(!this._vertexBuffer||!this._indexBuffer||!this._vertexBuffer.bufferSize)return null;if(this._invalidatedCompute){(this._vertexBuffer.invalidated||this._indexBuffer.invalidatedComputeBuffer)&&(this._vertexBuffer.invalidate(),this._indexBuffer.invalidate(),this._visibilityBuffer&&this._visibilityBuffer.invalidate(),this._computeVAO?.disposeVAOOnly(),this._computeVAO=null),this._vertexBuffer.upload(),this._indexBuffer.upload(),this._visibilityBuffer&&this._visibilityBuffer.upload();const i=this._indexBuffer.getGPUBuffer(e,!0),r=new Map([["geometry",this._vertexBuffer.getGPUBuffer(e)]]);if(this._visibilityBuffer&&r.set("visibility",this._visibilityBuffer.getGPUBuffer(e)),!this._computeVAO){const s=MappedMesh_d(this.layout,t);s.set("visibility",_(l,t).get("geometry")),this._computeVAO=new VertexArrayObject/* VertexArrayObject */.Z(e,t.locations,s,r,i),this._invalidatedCompute=!1}}return this._computeVAO}get memoryStats(){return{bytesUsed:this._vertexBuffer.memoryStats.bytesUsed+this._indexBuffer.memoryStats.bytesUsed,bytesReserved:this._vertexBuffer.memoryStats.bytesReserved+this._indexBuffer.memoryStats.bytesReserved,vertex:this._vertexBuffer.memoryStats,index:this._indexBuffer.memoryStats}}reshuffle(e){this._vertexBuffer&&this._vertexBuffer.reshuffle(e.vertex.count,e.vertex.operations),this._indexBuffer&&this._indexBuffer.reshuffle(e.index.count,e.index.operations),this._visibilityBuffer&&this._visibilityBuffer.reshuffle(e.vertex.count,e.vertex.operations)}}


/***/ }),

/***/ 40317:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89423);
/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(84852);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _webgl_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35644);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(8595);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(80976);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(33056);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(t,s){this._boundPart=null,this.vertexBuffers=new Map,this.indexBuffers=new Map,this.groups=[];for(const o in s.vertex){const{data:i,attributes:n}=s.vertex[o],f=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferObject */ .g.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,i);this.vertexBuffers.set(o,{buffer:f,attributes:n})}for(const o in s.index){const{data:i}=s.index[o],n=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferObject */ .g.createIndex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,i);this.indexBuffers.set(o,{buffer:n})}for(const e of s.groups)this.groups.push({...e,vertexArrays:new Map});this.parts=s.parts}bind(e,r,s){this._boundPart=s;const{group:o}=this.parts[this._boundPart],i=this.groups[o];if(!i)throw new Error(`Missing group ${o}.`);let n=i.vertexArrays.get(r.stringHash);if(!n){const s=new Set(r.locations.keys()),o=i.index?this.indexBuffers.get(i.index)?.buffer:null,f=new Map,a=new Map;for(const[e,{buffer:r,attributes:t}]of this.vertexBuffers){const o=t.filter((e=>s.has(e.name)));o.length>0&&(f.set(e,o),a.set(e,r))}n=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_7__/* .VertexArrayObject */ .Z(e,r.locations,f,a,o),i.vertexArrays.set(r.stringHash,n)}e.bindVAO(n)}draw(e){if(null==this._boundPart)throw new Error("Mesh.bind() has not been called.");const{start:r,count:t}=this.parts[this._boundPart],{group:o}=this.parts[this._boundPart],{primitive:i,index:n}=this.groups[o];if(n){const o=this.indexBuffers.get(n);if(!o)throw new Error(`Missing index buffer "${n}".`);const{indexType:f}=o.buffer;if(!f)throw new Error("Buffer type error.");e.drawElements(i,t,f,r*_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .dataSizeInBytes */ .I[f])}else e.drawArrays(i,r,t)}unbind(e){this._boundPart=null,e.bindVAO(null)}destroy(){for(const{vertexArrays:e}of this.groups)for(const[r,t]of e)t.disposeVAOOnly();for(const{buffer:e}of this.vertexBuffers.values())e.dispose();for(const{buffer:e}of this.indexBuffers.values())e.dispose()}}


/***/ }),

/***/ 2019:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(33056);
/* harmony import */ var _Mesh_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40317);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o={position:{type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT,count:2}};class s extends _Mesh_js__WEBPACK_IMPORTED_MODULE_1__/* .Mesh */ .e{static create(e,r){const i=[];let{stride:o}=r;if(null==o){o=0;for(const[e,{count:i,type:n,offset:s}]of Object.entries(r.layout)){if(null!=s)throw new Error("Stride cannot be computed automatically when attribute offsets are supplied explicitly.");o+=i*_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .dataSizeInBytes */ .I[n]}}let a=0;for(const[s,{count:d,offset:f,type:m,normalized:x}]of Object.entries(r.layout)){null!=f&&(a=f);const e=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexElementDescriptor */ ._(s,d,m,a,o,null!=x&&x,0);i.push(e),a+=d*_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .dataSizeInBytes */ .I[m]}const l={primitive:r.primitive};null!=r.index&&(l.index="indexData");let{count:u}=r;if(null==u&&(u=r.index?r.index.length:r.vertex.byteLength/o,Math.floor(u)!==u))throw new Error(`The byte length of vertex data must be an exact multiple of the stride, which is ${o}.`);const c={start:0,count:u,group:0,primitive:r.primitive},p={vertex:{vertexData:{data:r.vertex,attributes:i}},parts:[c],groups:[l]};return null!=r.index&&(p.index={indexData:{data:r.index}}),new s(e,p,r.layout)}static fromVertexStream(t,e){return s.create(t,{primitive:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,vertex:new Uint16Array(e),layout:o})}constructor(t,e,r){super(t,e),this._spec=r}bind(t,e,r=0){super.bind(t,e,r)}}


/***/ }),

/***/ 33056:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I: () => (/* binding */ T)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const T={[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_BYTE]:1,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.HALF_FLOAT]:2,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_INT]:4,[_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.FLOAT]:4};


/***/ }),

/***/ 55429:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Kl: () => (/* binding */ b),
/* harmony export */   M9: () => (/* binding */ s),
/* harmony export */   fG: () => (/* binding */ h),
/* harmony export */   fw: () => (/* binding */ y),
/* harmony export */   jT: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony exports i16, i32, i8, i8816to32, i8888to32, numTo32, u16, u32, u32to4Xu8, u4u4to8, u8 */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=new Float32Array(1),t=new Uint32Array(n.buffer);function r(n,t,r){return Math.round(Math.max(Math.min(n,r),t))}function u(n){return r(n,-128,127)}function o(n){return r(n,-32768,32767)}function e(n){return r(n,-2147483648,2147483647)}function c(n){return r(n,0,255)}function f(n){return r(n,0,65535)}function i(n){return r(n,0,4294967295)}function a(r){return n[0]=r,t[0]}function h(r){return t[0]=r,n[0]}function l(n){return[255&n,(65280&n)>>>8,(16711680&n)>>>16,(4278190080&n)>>>24]}function M(n,t){return 15&n|(15&t)<<4}function s(n,t){return 65535&n|t<<16}function m(n,t,r,u){return 255&n|(255&t)<<8|(255&r)<<16|u<<24}function w(n,t,r){return 255&n|(255&t)<<8|r<<16}function x(n){return 0|n}function y(n){const t=a(n),r=t>>>31;let u=t>>>23&255,o=8388607&t;return u-=127,u>15?r<<15|31744:u<-25?0:(u<-14&&(o+=8388608,o/=2**(-14-u),u=-15),u+=15,o/=8192,o=A(o,1023),r<<15|u<<10|o)}function A(n,t){const r=Math.floor(n),u=n-r;return r<t&&(u>.5||.5===u&&r%2==1)?r+1:r}function b(n){let t=n>>>15,r=n>>10&31,u=1023&n;return t=t?-1:1,r-=15,u/=1024,r>-15?u+=1:r=-14,t*2**r*u}


/***/ }),

/***/ 47381:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Y7: () => (/* binding */ I),
  HS: () => (/* binding */ v),
  mm: () => (/* binding */ w),
  A: () => (/* binding */ j),
  k2: () => (/* binding */ P),
  ZA: () => (/* binding */ C),
  E8: () => (/* binding */ K),
  hF: () => (/* binding */ m),
  C5: () => (/* binding */ f),
  uK: () => (/* binding */ _),
  Pi: () => (/* binding */ g)
});

// UNUSED EXPORTS: builtin, transformFeedback

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js
var glsl = __webpack_require__(39689);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/GlslGraphWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=5;function t(e,t,r){const i=t.split("\n");for(const n of i)if(n.trim().length){{let t="";null!=r&&(t+=`/*id:${r??"000"}*/   `),e.body+=t.padEnd(14)}e.body+=" ".repeat(e.indent)+n+"\n"}}class GlslGraphWriter_r{write(e){for(const t of e.rootOutputNodes())e.shouldPruneOutputNode(t)||(t.variableName=this._write(e,t.node));return e}_createVarName(e,t){let r="";return"boolean"!=typeof t&&"number"!=typeof t&&t.debugInfo.name&&(r=`${t.debugInfo.name}_`),`${r}v${e.varCount++}`}_write(e,t,r=!1){if("number"==typeof t)return t.toString();if("boolean"==typeof t)return t.toString();let i=e.getEmit(t);if(i)return i;switch(t.shaderType){case"scope-node":i=this._writeScopeNode(e,t);break;case"primitive-node":i=this._writePrimitiveNode(e,t,r);break;case"function-node":i=this._writeFunctionNode(e,t);break;case"property-access-node":i=this._writePropertyAccessNode(e,t);break;case"property-access-2d-node":i=this._writePropertyAccess2DNode(e,t);break;case"text-node":i=t.text;break;case"block-node":i=this._writeBlockNode(e,t);break;case"condition-node":i=this._writeConditionNode(e,t)}return e.setEmit(t,i),i}_writeScopeNode(e,r){const i=new r.child.constructor;i.setDebugName(r.debugInfo.name);const n=this._write(e,i,!0);t(e,`{ /*ScopeStart: ${r.uid} ${r.debugInfo.name}*/`),e.indent+=2;return t(e,`${n} = ${this._write(e,r.child)};`),e.indent-=2,t(e,`} /*ScopeEnd: ${r.uid} ${r.debugInfo.name}*/`),n}_writeConditionNode(e,r){const i=new r.ifTrue.constructor,n=this._write(e,i,!0);t(e,`if (${this._write(e,r.condition)}) {`),e.indent+=2;const o=e.createSubgraphContext(),s=this._write(o,r.ifTrue);if(e.body+=o.body,s&&t(e,`${n} = ${s};`),e.indent-=2,t(e,"}"),r.ifFalse){t(e,"else {"),e.indent+=2;const i=e.createSubgraphContext(),o=this._write(i,r.ifFalse);e.body+=i.body,o&&t(e,`${n} = ${o};`),e.indent-=2,t(e,"}")}return n}_writeBlockNode(e,r){const{captureList:i,generator:n,returnType:o}=r,s={};for(const t in i){if(!i[t])continue;const r=this._write(e,i[t]);s[t]=r}const d=new o,c=this._write(e,d,!0);if(s.out=c,r.subgraph){const t=e.createSubgraphContext(),i=this._write(t,r.subgraph.child),n=t.body;s.subgraph={varName:i,body:n}}const a=n(s);return t(e,"{\n"),e.indent+=2,t(e,a),e.indent-=2,t(e,"}\n"),c}_writePropertyAccessNode(e,t){const r=this._write(e,t.target);if("string"==typeof t.property&&t.property.includes("["))return`${r}${t.property}`;if("string"!=typeof t.property){return`${r}[${this._write(e,t.property)}]`}return`${r}.${t.property}`}_writePropertyAccess2DNode(e,t){return`${this._write(e,t.target)}[${this._write(e,t.x)}][${this._write(e,t.y)}]`}_writeFunctionNode(r,i){const n=i.returnType.type;if(i.isInfix){const[o,s]=i.children.map((e=>this._write(r,e))),d=this._createVarName(r,i);return t(r,`${n.padEnd(e)} ${d} = ${o} ${i.token} ${s};`,i.uid),d}const o=i.children.map((e=>this._write(r,e))).join(", "),s=this._createVarName(r,i);return t(r,`${n.padEnd(e)} ${s} = ${i.token}(${o});`,i.uid),s}_writePrimitiveNode(r,i,n=!1){const o=r.getInput(i);if(o)return o.isUsed=!0,o.variableName;const s=1===i.children.length&&i.children[0]?.type===i.type;if(!i.isMutable&&(i.isImplicit||s))return this._write(r,i.children[0]);const d=this._createVarName(r,i);if(n)return t(r,`${i.type.padEnd(e)} ${d};`,i.uid),d;const c=!i.debugInfo.name&&!i.isMutable;if(c&&"float"===i.type&&"number"==typeof i.children[0])return Number.isInteger(i.children[0])?i.children[0].toFixed(1):i.children[0].toString();if(c&&"int"===i.type&&"number"==typeof i.children[0]&&Number.isInteger(i.children[0]))return i.children[0].toString();const a=i.children.map((e=>this._write(r,e))).join(", ");return"array"===i.type?(t(r,`${i.type.padEnd(e)} ${d} = [${a}];`,i.uid),d):c?`${i.type}(${a})`:(t(r,`${i.type.padEnd(e)} ${d} = ${i.type}(${a});`,i.uid),d)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphNode.js
var ShaderGraphNode = __webpack_require__(52954);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/ShaderGraphContext.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShaderGraphContext_t{constructor(e,t,d){this.variableName=e,this.variableInputType=t,this.node=d,this.type="shader-input",this.isUsed=!1}clone(){return new ShaderGraphContext_t(this.variableName,this.variableInputType,(0,ShaderGraphNode/* cloneShaderNode */.vA)(this.node))}}class d{constructor(e,t,d){this.outVariableName=e,this.outVariableType=t,this.node=d,this.type="shader-output"}clone(){const t=new d(this.outVariableName,this.outVariableType,(0,ShaderGraphNode/* cloneShaderNode */.vA)(this.node));return t.variableName=this.variableName,t}}class ShaderGraphContext_o{static createVertex(e,a,n,i,r,s){const u=[];for(const d in e){const o=e[d],a=n.get(d);a?u.push(new ShaderGraphContext_t(a,"builtin",o)):u.push(new ShaderGraphContext_t("a_"+d,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const p=[];for(const t in a){const e=a[t];"glPosition"===t?p.push(new d("gl_Position","builtin",e)):"glPointSize"===t?p.push(new d("gl_PointSize","builtin",e)):p.push(new d("v_"+t,"out",e))}return new ShaderGraphContext_o(u,p,r,s)}static createFragment(e,a,n,i,r,s){const u=[],p=Array.from(r.rootOutputNodes());for(const d in e){const o=e[d],a=n.get(d);if(a){u.push(new ShaderGraphContext_t(a,"builtin",o));continue}const i=p.find((e=>e.node===o));i&&u.push(new ShaderGraphContext_t(i.outVariableName,"in",o))}for(const d of i){const e=d.uniformHydrated;u.push(new ShaderGraphContext_t(d.uniformName,"uniform",e))}const h=[];for(const t in a){const e=a[t],o=n.get(t);"discard"===t?h.push(new d(null,"discard",e)):o?h.push(new d(o,"builtin",e)):h.push(new d(t,"out",e))}return new ShaderGraphContext_o(u,h,s)}constructor(e,t,d,o){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const a of e)this._inputShaderTypesByNodeUid.set(a.node.uid,a);this._outputShaderTypes=t,this._transformFeedbackBindings=d,this._transformFeedbackNames=new Set(d.map((e=>"v_"+e.propertyKey))),this._usedInFragmentShader=o}shouldPruneOutputNode(e){return!!this._usedInFragmentShader&&("builtin"!==e.outVariableType&&(!this._transformFeedbackNames.has(e.outVariableName)&&!this._usedInFragmentShader.has(e.node.uid)))}setEmit(e,t){this._nodeEmitMap.set(e.uid,t)}getEmit(e){return this._nodeEmitMap.get(e.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(e){return this._inputShaderTypesByNodeUid.get(e.uid)}*rootOutputNodes(){for(const e of this._outputShaderTypes)yield e}*nodes(){const e=[];for(const t of this._outputShaderTypes.values())e.push(t.node);for(;e.length;){const t=e.pop();"number"!=typeof t&&"boolean"!=typeof t&&e.push(...t.children.filter(Boolean)),yield t}}*nodesOfTypeOrFunction(){for(const e of this.nodes())"number"!=typeof e&&"boolean"!=typeof e&&(yield e)}createSubgraphContext(){const e=this.clone();return e.body="",e.indent=this.indent+2,e._nodeEmitMap=new Map(this._nodeEmitMap),e}clone(){const e=new ShaderGraphContext_o([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return e._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,e.indent=this.indent,e.body=this.body,e.varCount=this.varCount,e._nodeEmitMap=this._nodeEmitMap,e}insertVertexShader(e){e.vertex.code.add(""),this._insertInputs(e,"vertex"),e.vertex.code.add(""),e.vertex.code.add("// OUTPUTS: "),e.vertex.code.add("// --------------------------------------------------------- ");for(const t of this.rootOutputNodes()){const d="builtin"===t.outVariableType;this.shouldPruneOutputNode(t)||(d?e.vertex.code.add(`// ${t.outVariableType.padEnd(7)} ${t.node.type.padEnd(9)} ${t.outVariableName};`):e.vertex.code.add(`${t.outVariableType.padEnd(10)} ${t.node.type.padEnd(9)} ${t.outVariableName};`))}e.vertex.code.add(""),e.vertex.code.add("void main() {"),e.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const t of this.rootOutputNodes())this.shouldPruneOutputNode(t)||e.vertex.code.add(`  ${t.outVariableName} = ${t.variableName};`);e.vertex.code.add("}")}insertFragmentShader(e){this._insertInputs(e,"fragment"),e.fragment.code.add(""),e.fragment.code.add("// OUTPUTS: "),e.fragment.code.add("// --------------------------------------------------------- ");let t=0;for(const d of this.rootOutputNodes()){"builtin"===d.outVariableType?e.fragment.code.add(`// ${d.outVariableType.padEnd(7)} ${d.node.type.padEnd(9)} ${d.outVariableName};`):e.outputs.add(d.outVariableName,d.node.type,t++)}e.fragment.code.add(""),e.fragment.code.add("void main() {"),e.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const d of this.rootOutputNodes())"discard"===d.outVariableType?(e.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),e.fragment.code.add(`  if (${d.variableName}) {`),e.fragment.code.add("    discard;"),e.fragment.code.add("  }"),e.fragment.code.add("  ")):e.fragment.code.add(`  ${d.outVariableName} = ${d.variableName};`);e.fragment.code.add("}")}_insertInputs(e,t){e[t].code.add("// INPUTS: "),e[t].code.add("// --------------------------------------------------------- ");for(const d of this.inputs())d.isUsed&&"builtin"!==d.variableInputType&&("array"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}];`):"array-2d"===d.node.type?e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.elementType.type.padEnd(9)} ${d.variableName}[${d.node.size}]; // Emulated 2D Array. Not supported by ES3.0`):e[t].code.add(`${d.variableInputType.padEnd(10)} ${d.node.type.padEnd(9)} ${d.variableName};`))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js + 1 modules
var TypedShaderProgram = __webpack_require__(51487);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderBuilder.js
var ShaderBuilder = __webpack_require__(96028);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function GraphShaderModule_d(t){return new t}function h(t,e,r){const o=t.constructor[e]??[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:o.slice()}),t.constructor[e].push(r)}function f(t,e){return(r,o)=>{h(r,"locations",{typeCtor:e,propertyKey:o,parameterIndex:null,index:t})}}const l=t=>(e,r)=>{h(e,"builtins",{builtin:t,propertyKey:r})},m=t=>(e,r,o)=>{h(e,"inputs",{inputCtor:t,propertyKey:r,parameterIndex:o})},g=t=>(e,r)=>{h(e,"uniforms",{typeCtor:t,propertyKey:r})},_=t=>(e,r)=>{h(e,"options",{typeCtor:t,propertyKey:r})},K=(t,e)=>{h(t,"defines",{propertyKey:e})};function x(t){return(e,r)=>{h(e,"transformFeedbackBindings",{propertyKey:r,parameterIndex:null,index:t})}}const b=(t,e)=>(r,o)=>{r.constructor.builtins.push({builtin:t,propertyKey:o,typeCtor:e})};class C{static{this.builtins=[]}}(0,tslib_es6._)([b("gl_VertexID",glsl/* Int */.Ai)],C.prototype,"glVertexID",void 0);class I{}class v{static{this.builtins=[]}}(0,tslib_es6._)([b("gl_FragCoord",glsl/* Vec4 */.Zb)],v.prototype,"glFragCoord",void 0),(0,tslib_es6._)([b("gl_PointCoord",glsl/* Vec2 */.ZY)],v.prototype,"glPointCoord",void 0);class w{}(0,tslib_es6._)([l("gl_FragDepth")],w.prototype,"glFragDepth",void 0);class P{constructor(){this.type="uniform-group"}get _uniforms(){return this.constructor.uniforms??[]}}class j{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){return this.fragmentInput.inputCtor.transformFeedbackBindings??[]}get locations(){return[...this.vertexInput.inputCtor.locations,...this.computeInput?.inputCtor.locations??[]]}get locationsMap(){const t=new Map,r=new Set;for(const o of this.locations)r.has(o.index)?Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering",`Unable to assigned attribute ${o.propertyKey} to ${o.index}. Index already in use`,{locationsMap:t}):(t.set(o.propertyKey,o.index),r.add(o.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((([t,e])=>`${t}.${e}`)).join("."),o=(0,string/* numericHash */.Wm)(e),n=this.computeAttributes;this._locationInfo={hash:o,stringHash:e,locations:t,computeAttributeMap:n}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){return this._shaderModuleClass.defines??[]}get _options(){return this._shaderModuleClass.options??[]}get _uniforms(){return this._shaderModuleClass.uniforms??[]}getProgram(t,e,r,o){try{const{vertex:n,fragment:s,uniformBindings:i}=this._generateShaders(t,e,r,o);return new TypedShaderProgram/* TypedShaderProgram */.K(n,s,this.renamedLocationsMap,this.locationInfo,i,this.transformFeedbackBindings)}catch(n){return new TypedShaderProgram/* TypedShaderProgram */.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const r=this._uniforms.find((e=>e.propertyKey===t));if(!r)throw new Error(`Unable to find uniform class type for property: ${t}`);return{type:"required",className:r.typeCtor}}getShaderKey(t,e,r,o){const n=Object.keys(t).map((e=>`${e}.${t[e]}`)).join("."),s=Object.keys(r).map((t=>`${t}.${r[t]}`)).join("."),i=Object.keys(o).map((t=>`${t}.${o[t]}`)).join("."),p=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return`${this.type}.${n}.${s}.${i}.${p}`}_generateShaders(t,e,r,o){const n=[];this._setDefines(r),this._setOptionalUniforms(n,e),this._setRequiredUniforms(n);const s=this._hydrateVertexInput(o),i=this._injectPackPrecisionFactor(s,t),c=this._hydrateComputeInput(),y=c&&this._injectComputePackPrecisionFactor(c,t),d=this.vertex(i,y),h=this._hydrateFragmentInput(d),f=this.fragment(h),l=new Set;for(const p in f){const t=f[p];(0,ShaderGraphNode/* setReachableUids */.rz)(l,t)}const m=this._getVertexInputBuiltins(),g=ShaderGraphContext_o.createVertex({...s,...c},d,m,n,this.transformFeedbackBindings,l);(new GlslGraphWriter_r).write(g);const _=this._getFragmentInputBuiltins(f);_.set("glPointCoord","gl_PointCoord");const K=ShaderGraphContext_o.createFragment(h,f,_,n,g,this.transformFeedbackBindings);(new GlslGraphWriter_r).write(K);const x=this._createShaderBuilder(g,K),b=x.generate("vertex"),C=x.generate("fragment");return this.logShader&&(console.log(b),console.log(C)),{vertex:b,fragment:C,uniformBindings:n}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const r of this._options){e[r.propertyKey]?this[r.propertyKey]=this._hydrateUniformGroup(t,r):this[r.propertyKey]=null}}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const r=new(0,e.typeCtor);for(const o of r._uniforms??[]){const n=GraphShaderModule_d(o.typeCtor),s=`u_${e.propertyKey}_${o.propertyKey}`,i=n.type,p=[e.propertyKey,o.propertyKey].join(".");if("type"in o.typeCtor&&"array"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else if("type"in o.typeCtor&&"array-2d"===o.typeCtor.type){const e=n;t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:n})}else t.push({shaderModulePath:p,uniformName:s,uniformType:i,uniformHydrated:n});r[o.propertyKey]=n}return r}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,r=e.locations.reduce(((e,r)=>!1===t[r.propertyKey]?e:{...e,[r.propertyKey]:GraphShaderModule_d(r.typeCtor)}),{});for(const{propertyKey:o,typeCtor:n}of e.builtins){const t=GraphShaderModule_d(n);r[o]=t}return r}_hydrateComputeInput(){if(null==this.computeInput)return null;return this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:GraphShaderModule_d(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const r={};for(const n in t){const s=t[n],i=e[n];if(i){if("float"!==s.type&&"vec2"!==s.type&&"vec3"!==s.type&&"vec4"!==s.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${s.type}`);r[n]=s.divide(new glsl/* Float */.nt(i))}else r[n]=s}return r}_injectComputePackPrecisionFactor(t,e){const r={},n=new Map;for(const o in this.computeAttributes)for(const t of this.computeAttributes[o]??[])n.set(t,o);for(const s in t){const i=t[s],p=n.get(s);if(!p)continue;const a=e[p];if(a){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${i.type}`);r[s]=i.divide(new glsl/* Float */.nt(a))}else r[s]=i}return r}_hydrateFragmentInput(t){const e={};for(const r in t)e[r]=t[r];for(const{propertyKey:r,typeCtor:o}of v.builtins){const t=GraphShaderModule_d(o);e[r]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:r,propertyKey:o}of t.builtins)e.set(o,r);return e}_getFragmentInputBuiltins(t){const e=t.constructor,r=new Map;for(const o of e.builtins??[])r.set(o.propertyKey,o.builtin);return r}_createShaderBuilder(t,e){const r=new ShaderBuilder/* ShaderBuilder */.N5;return this._insertDebugInfo(r),t.insertVertexShader(r),e.insertFragmentShader(r),r}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`);t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`)}}


/***/ }),

/***/ 52954:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   XL: () => (/* binding */ u),
/* harmony export */   aw: () => (/* binding */ a),
/* harmony export */   ff: () => (/* binding */ o),
/* harmony export */   rR: () => (/* binding */ p),
/* harmony export */   rz: () => (/* binding */ e),
/* harmony export */   vA: () => (/* binding */ i),
/* harmony export */   vL: () => (/* binding */ r),
/* harmony export */   zg: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports ShaderNode, ShaderScopeNode, ShaderTextNode */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}function e(t,e){const s=[];for(s.push(e);s.length;){const e=s.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)s.push(t)}}}class s{constructor(){this.uid=s.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}static{this.NodeCount=0}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(e){return e=t(e),this._debugName=e,this.isImplicit&&this.children[0]instanceof s&&this.children[0].setDebugName(e),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function i(t){return"object"==typeof t?t.clone():t}class r extends s{constructor(){super(...arguments),this.shaderType="primitive-node"}}class n extends s{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new n(i(this.child));return this.cloneInto(t),t}}class h extends s{constructor(t){super(),this.text=t,this.shaderType="text-node"}get children(){return[]}clone(){const t=new h(this.text);return this.cloneInto(t),t}}class c extends s{constructor(t,e,s){super(),this.property=t,this.target=e,this.returnType=s,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new c(this.property,i(this.target),this.returnType);return this.cloneInto(t),t}}class o extends s{constructor(t,e,s,i){super(),this.x=t,this.y=e,this.target=s,this.returnType=i,this.shaderType="property-access-2d-node"}get children(){return[this.target,this.x,this.y]}clone(){const t=new o(this.x,this.y,i(this.target),this.returnType);return this.cloneInto(t),t}}class u extends s{constructor(t,e,s){super(),this.condition=t,this.ifTrue=e,this.ifFalse=s,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=i(this.ifTrue),e=this.ifFalse?i(this.ifFalse):null,s=new u(this.condition,t,e);return this.cloneInto(s),s}}class p extends s{constructor(t,e,s,i){super(),this.captureList=t,this.returnType=e,this.generator=i,this.shaderType="block-node",s&&(this.subgraph=new n(s))}get children(){return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(this.subgraph??[])}clone(){const t={};for(const s in this.captureList)t[s]=i(this.captureList[s]);const e=new p(t,this.returnType,this.subgraph?i(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class a extends s{constructor(t,e,s,i,r,n=!1){super(),this.token=t,this._children=e,this.isInfix=s,this.isPropertyAccess=i,this.returnType=r,this.isTernary=n,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new a(this.token,this._children.map(i),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}


/***/ }),

/***/ 39689:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $5: () => (/* binding */ Yt),
/* harmony export */   $I: () => (/* binding */ ct),
/* harmony export */   $T: () => (/* binding */ Rn),
/* harmony export */   AU: () => (/* binding */ Ve),
/* harmony export */   Ai: () => (/* binding */ W),
/* harmony export */   Bw: () => (/* binding */ Re),
/* harmony export */   Cq: () => (/* binding */ Z),
/* harmony export */   Ec: () => (/* binding */ Ct),
/* harmony export */   F8: () => (/* binding */ sn),
/* harmony export */   FM: () => (/* binding */ Ut),
/* harmony export */   Gb: () => (/* binding */ St),
/* harmony export */   HQ: () => (/* binding */ Wt),
/* harmony export */   I8: () => (/* binding */ Jt),
/* harmony export */   Io: () => (/* binding */ we),
/* harmony export */   L0: () => (/* binding */ un),
/* harmony export */   LC: () => (/* binding */ _t),
/* harmony export */   LI: () => (/* binding */ nn),
/* harmony export */   MM: () => (/* binding */ Gt),
/* harmony export */   Ml: () => (/* binding */ an),
/* harmony export */   My: () => (/* binding */ B),
/* harmony export */   Ny: () => (/* binding */ nt),
/* harmony export */   Om: () => (/* binding */ ye),
/* harmony export */   PM: () => (/* binding */ ln),
/* harmony export */   RI: () => (/* binding */ ze),
/* harmony export */   RZ: () => (/* binding */ hn),
/* harmony export */   Rm: () => (/* binding */ qe),
/* harmony export */   S8: () => (/* binding */ Ae),
/* harmony export */   Sj: () => (/* binding */ Rt),
/* harmony export */   T9: () => (/* binding */ Ce),
/* harmony export */   TF: () => (/* binding */ on),
/* harmony export */   Tk: () => (/* binding */ zt),
/* harmony export */   U: () => (/* binding */ rt),
/* harmony export */   US: () => (/* binding */ yn),
/* harmony export */   Uo: () => (/* binding */ Lt),
/* harmony export */   Wh: () => (/* binding */ st),
/* harmony export */   Xe: () => (/* binding */ Xt),
/* harmony export */   YN: () => (/* binding */ Zt),
/* harmony export */   ZY: () => (/* binding */ C),
/* harmony export */   Zb: () => (/* binding */ Y),
/* harmony export */   Zc: () => (/* binding */ ot),
/* harmony export */   _S: () => (/* binding */ cn),
/* harmony export */   _i: () => (/* binding */ q),
/* harmony export */   aX: () => (/* binding */ Ht),
/* harmony export */   eB: () => (/* binding */ X),
/* harmony export */   eR: () => (/* binding */ ht),
/* harmony export */   fV: () => (/* binding */ ut),
/* harmony export */   gn: () => (/* binding */ oe),
/* harmony export */   hC: () => (/* binding */ qt),
/* harmony export */   j1: () => (/* binding */ Tt),
/* harmony export */   jc: () => (/* binding */ Te),
/* harmony export */   jh: () => (/* binding */ Ye),
/* harmony export */   jk: () => (/* binding */ Xe),
/* harmony export */   ln: () => (/* binding */ lt),
/* harmony export */   lw: () => (/* binding */ Dt),
/* harmony export */   mk: () => (/* binding */ se),
/* harmony export */   n7: () => (/* binding */ We),
/* harmony export */   nP: () => (/* binding */ pn),
/* harmony export */   nf: () => (/* binding */ Pt),
/* harmony export */   nt: () => (/* binding */ _),
/* harmony export */   oN: () => (/* binding */ xe),
/* harmony export */   om: () => (/* binding */ It),
/* harmony export */   or: () => (/* binding */ At),
/* harmony export */   p6: () => (/* binding */ Ue),
/* harmony export */   pu: () => (/* binding */ Bt),
/* harmony export */   qE: () => (/* binding */ ue),
/* harmony export */   qR: () => (/* binding */ ne),
/* harmony export */   rY: () => (/* binding */ ce),
/* harmony export */   rf: () => (/* binding */ ie),
/* harmony export */   tn: () => (/* binding */ Qt),
/* harmony export */   w0: () => (/* binding */ ft),
/* harmony export */   wH: () => (/* binding */ jt),
/* harmony export */   x: () => (/* binding */ J),
/* harmony export */   yH: () => (/* binding */ re),
/* harmony export */   yI: () => (/* binding */ he),
/* harmony export */   ym: () => (/* binding */ fn),
/* harmony export */   z7: () => (/* binding */ U),
/* harmony export */   ze: () => (/* binding */ xt),
/* harmony export */   zi: () => (/* binding */ Ge)
/* harmony export */ });
/* unused harmony exports BVec2, BVec3, BVec4, IVec3, IVec4, UInt, UVec2, UVec3, UVec4, _or, _xor, add, all, any, cross, dFdx, dFdy, definePropertyAccess, definePropertyAccess2D, degrees, determinant, divide, equalComponent, exp2, faceforward, findIndex, floatBitsToInt, floatBitsToUint, fwidth, getTypeElementLengthForType, glslFindIndex, greaterThanComponent, greaterThanEqualComponent, intBitsToFloat, inverse, inversesqrt, isinf, isnan, lessThanComponent, lessThanEqualComponent, mat2, mat4, matrixCompMult, modf, namedScope, notEqualComponent, outerProduct, packHalf2x16, packSnorm2x16, packUnorm2x16, radians, reflect, refract, roundEven, subtract, texelFetchOffset, texture, textureGrad, textureGradOffset, textureLod, textureLodOffset, textureOffset, textureProj, textureProjGrad, textureProjGradOffset, textureProjLod, textureProjLodOffset, textureProjOffset, textureSize, transformFloatToInt, transformFloatToUInt, transformIntToFloat, transformTypeToBooleanType, transformUIntToFloat, transpose, trunc, uintBitsToFloat, unpackHalf2x16, unpackSnorm2x16, unpackUnorm2x16, when */
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52954);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var h,l,a,f,p,d,w,y,m,v,b,x,I,g;function E(t){switch(t.type){case"uint":return _;case"uvec2":return C;case"uvec3":return X;case"uvec4":return Y;default:throw new Error("Found unexpected type")}}function $(t){switch(t.type){case"float":return G;case"vec2":return H;case"vec3":return A;case"vec4":return V;default:throw new Error("Found unexpected type")}}function z(t){switch(t.type){case"int":return _;case"ivec2":return C;case"ivec3":return X;case"ivec4":return Y;default:throw new Error("Found unexpected type")}}function T(t){switch(t.type){case"float":return W;case"vec2":return Z;case"vec3":return tt;case"vec4":return et;default:throw new Error("Found unexpected type")}}function N(t){switch(t.type){case"bool":case"float":case"int":case"uint":return J;case"bvec2":case"vec2":case"ivec2":case"uvec2":return K;case"bvec3":case"vec3":case"ivec3":case"uvec3":return L;case"bvec4":case"vec4":case"ivec4":case"uvec4":return Q;default:throw new Error("Unable to handle type")}}function D(t){switch(t.type){case"bool":case"bvec2":case"bvec3":case"bvec4":return J;case"float":case"vec2":case"vec3":case"vec4":return _;case"int":case"ivec2":case"ivec3":case"ivec4":return W;case"uint":case"uvec2":case"uvec3":case"uvec4":return G;default:throw new Error("Unable to handle type")}}function F(t){switch(t.type){case"float":case"int":case"uint":case"bool":case"sampler2D":return 1;case"vec2":case"ivec2":case"uvec2":case"bvec2":return 2;case"vec3":case"ivec3":case"uvec3":case"bvec3":return 3;case"vec4":case"ivec4":case"uvec4":case"bvec4":case"mat2":return 4;case"mat3":return 9;case"mat4":return 16;case"array":case"array-2d":return t.size*F(t.elementType)}}function k(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>it[t]));throw new Error("Unable to find type family")}function M(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>M(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=k(t.type);return dt(t,n,e[n.length-1])}}})}function S(t){return new Proxy(t,{construct:(t,e,n)=>M(new t(...e))})}function j(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return dt(t,`[${e}]`,t.elementType.constructor)}}})}function R(t){return new Proxy(t,{construct:(t,e,n)=>j(new t(...e))})}class P extends Error{}let B=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{h=this}static{this.type="array"}constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new h(this.elementType,this.size);return super.cloneInto(t),t}get(t,e){const n=new W(t),r=null!=e?new W(e):null;if(null!=r){return wt(this,n,r,D(this.elementType.constructor))}return dt(this,n,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return Et(this,t,e,n)}glslFindIndex(t,e,n){return $t(this,t,e,n)}static ofType(t,e){const n={construct:(n,r)=>new h(new t,e)};return new Proxy(h,n)}};B=h=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([R],B);class q extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="array-2d"}constructor(t,e,n,r=!1){super(),this.elementType=t,this.xSize=e,this.ySize=n,this.isRowMajor=r,this.children=[],this.type="array-2d"}clone(){const t=new q(this.elementType,this.xSize,this.ySize,this.isRowMajor);return super.cloneInto(t),t}get size(){return this.xSize*this.ySize}get(t,e){return this.isRowMajor?this._getRowMajor(t,e):this._getColumnMajor(t,e)}_getColumnMajor(t,e){const n=new W(t);return dt(this,new W(e).add(n.multiply(this.xSize)),this.elementType.constructor)}_getRowMajor(t,e){const n=new W(t),r=new W(e);return dt(this,n.add(r.multiply(this.ySize)),this.elementType.constructor)}static ofType(t,e,n,r=!1){return new Proxy(B,{construct:(c,i)=>new q(new t,e,n,r)})}}class U extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}static{this.type="sampler2D"}clone(){const t=new U;return t.children=this.children.map(_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA),super.cloneInto(t),t}}class _ extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="float"}constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new _((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}}let C=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{l=this}static{this.type="vec2"}constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new l((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){throw new P}get 3(){throw new P}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};C=l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],C);let X=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{a=this}static{this.type="vec3"}constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){throw new P}clone(){const t=new a((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};X=a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],X);let Y=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{f=this}static{this.type="vec4"}constructor(t,e,n,r){super(),this.type="vec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new f((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}get 0(){return dt(this,"[0]",_)}get 1(){return dt(this,"[1]",_)}get 2(){return dt(this,"[2]",_)}get 3(){return dt(this,"[3]",_)}multiply(t){return Dt(this,"number"==typeof t?O(t,_):t)}divide(t){return Ft(this,"number"==typeof t?O(t,_):t)}add(t){return kt(this,"number"==typeof t?O(t,_):t)}subtract(t){return Mt(this,"number"==typeof t?O(t,_):t)}};Y=f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Y);let G=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{p=this}static{this.type="uint"}constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new p((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}};G=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],G);let H=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{d=this}static{this.type="uvec2"}constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new d((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};H=d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],H);let A=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{w=this}static{this.type="uvec3"}constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new w((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};A=w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],A);let V=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{y=this}static{this.type="uvec4"}constructor(t,e,n,r){super(),this.type="uvec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new y((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};V=y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],V);class J extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="bool"}constructor(t){super(),this.type="bool",this.children=[t]}and(t){return Lt(this,t)}or(t){return At(this,t)}xor(t){return Jt(this,t)}clone(){const t=new J((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}}let K=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{m=this}static{this.type="bvec2"}constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new m((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};K=m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],K);let L=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{v=this}static{this.type="bvec3"}constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new v((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};function O(t,e){if("number"==typeof t){return new e(t)}return t}L=v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],L);let Q=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{b=this}static{this.type="bvec4"}constructor(t,e,n,r){super(),this.type="bvec4",this.children=[t,e,n,r].filter((t=>null!=t))}all(){return te(this)}any(){return ee(this)}clone(){const t=new b((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};Q=b=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Q);class W extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="int"}constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return Dt(this,O(t,W))}add(t){return kt(this,O(t,W))}subtract(t){return Mt(this,O(t,W))}divide(t){return Ft(this,O(t,W))}clone(){const t=new W((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]));return super.cloneInto(t),t}}let Z=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{x=this}static{this.type="ivec2"}constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new x((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]));return super.cloneInto(t),t}};Z=x=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],Z);let tt=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{I=this}static{this.type="ivec3"}constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new I((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]));return super.cloneInto(t),t}};tt=I=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],tt);let et=class extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{g=this}static{this.type="ivec4"}constructor(t,e,n,r){super(),this.type="ivec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new g((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}};et=g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([S],et);class nt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat2"}constructor(t,e,n,r){super(),this.type="mat2",this.children=[t,e,n,r]}clone(){const t=new nt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]));return super.cloneInto(t),t}get(t,e){return wt(this,new W(t),new W(e),_)}multiply(t){return Dt(this,t)}}class rt extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat3"}static identity(){return new rt(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=sn(t),n=oe(t);return new rt(n,e,0,xt(e),n,0,0,0,1)}constructor(t,e,n,r,c,i,s,u,o){super(),this.type="mat3",this.children=[t,e,n,r,c,i,s,u,o]}add(t){return kt(this,t)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new rt((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[8]));return super.cloneInto(t),t}}class ct extends _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPrimitiveNode */ .vL{static{this.type="mat4"}static identity(){return new ct(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,r,c,i,s,u,o,h,l,a,f,p,d,w){super(),this.type="mat4",this.children=[t,e,n,r,c,i,s,u,o,h,l,a,f,p,d,w]}static fromColumns(t,e,n,r){return new ct(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(t){return Dt(this,t)}get(t,e){return wt(this,new W(t),new W(e),_)}clone(){const t=new ct((0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[0]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[1]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[2]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[3]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[4]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[5]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[6]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[7]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[8]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[9]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[10]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[11]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[12]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[13]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[14]),(0,_ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .cloneShaderNode */ .vA)(this.children[15]));return super.cloneInto(t),t}}const it={float:_,vec2:C,vec3:X,vec4:Y,int:W,ivec2:Z,ivec3:tt,ivec4:et,uint:G,uvec2:H,uvec3:A,uvec4:V,bool:J,bvec2:K,bvec3:L,bvec4:Q},st=(...t)=>new W(...t),ut=(...t)=>new _(...t),ot=(...t)=>new C(...t),ht=(...t)=>new X(...t),lt=(...t)=>new Y(...t),at=(...t)=>new nt(...t),ft=(...t)=>new rt(...t),pt=(...t)=>new ct(...t);function dt(t,e,n){const r=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPropertyAccessNode */ .zg(e,t,n));return r.isImplicit=!0,r}function wt(t,e,n,r){const c=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderPropertyAccess2DNode */ .ff(e,n,t,r));return c.isImplicit=!0,c}function yt(t,e,n,r=null){if(r){const c=new r,s=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,c));return s.isImplicit=!0,s}if("float"===e.type||"int"===e.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const r=new n.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}const c=new e.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!0,!1,e.constructor));return c.isImplicit=!0,c}function mt(t,e,n=e.constructor){const r=new n(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e],!1,!1,n));return r.isImplicit=!0,r}function vt(t,e,n,r=e.constructor){const c=new r(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n],!1,!1,r));return c.isImplicit=!0,c}function bt(t,e,n,r,c=e.constructor){const s=new c(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderFunctionNode */ .aw(t,[e,n,r],!1,!1,c));return s.isImplicit=!0,s}function xt(t){return Dt(t,ut(-1))}function It(t,e,n,r){return new e(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderBlockNode */ .rR(t,e,n,r))}function gt(t,e){const n="function"==typeof t?t():t,r=new n.constructor(new o(n).setDebugName(e));return r.isImplicit=!0,r}function Et(t,e,n=0,r=t.size){const c=new W(n).setMutable().setDebugName("FindIndexIterator"),i=e(t.get(c)).setDebugName("FindIndexPredicate"),s=It({iter:c},W,i,(({out:t,iter:e,subgraph:n})=>`\n${t} = -1;\n\nfor (; ${e} < ${r}; ${e}++) {\n\n${n.body}\n\n  if (${n.varName}) {\n    ${t} = ${e};\n    break;\n  }\n\n}\n`)).setDebugName("FindIndexBlock");return s}function $t(t,e,n=0,r=t.size){const c=It({array:t},W,null,(({out:t,array:c})=>`\n${t} = -1;\nfor (int i = ${n}; i < ${r}; i++) {\n  bool condition;\n  ${e({array:c,i:"i",out:"condition"})}\n  if (condition) {\n    ${t} = i;\n    break;\n  }\n}\n`)).setDebugName("GlslFindIndexBlock");return c}function zt(t,e,n){const c="function"==typeof e?e():e,i="function"==typeof n?n():n,s=new c.constructor(new _ShaderGraphNode_js__WEBPACK_IMPORTED_MODULE_1__/* .ShaderConditionNode */ .XL(t,c,i));return s.isImplicit=!0,s}function Tt(...t){const e=t.map((([t,e])=>"function"==typeof e?[t,e()]:[t,e])),n=e[0][1].constructor,r=e.findIndex((t=>!0===t[0]));if(-1===r)throw new Error("A cond must have a fallthrough case with `true`/; ");const c=e.slice(0,r),i=e[r][1],s=new n(c.reduceRight(((t,e)=>zt(e[0],e[1],t)),i));return s.isImplicit=!0,s}function Nt(t,e){const n=new e.constructor(new r(t,e,null));return n.isImplicit=!0,n}function Dt(t,e){return yt("*",t,e)}function Ft(t,e){return yt("/",t,e)}function kt(t,e){return yt("+",t,e)}function Mt(t,e){return yt("-",t,e)}function St(t,e){return yt("%",t,e)}function jt(t,e){return yt("<<",t,e)}function Rt(t,e){return yt(">>",t,e)}function Pt(t,e){return yt("&",t,e)}function Bt(t,e){return yt("|",t,e)}function qt(t,e){return yt("^",t,e)}function Ut(t){return mt("~",t)}function _t(t,e){return yt("==",t,e,J)}function Ct(t,e){return yt("!=",t,e,J)}function Xt(t,e){return yt("<",t,e,J)}function Yt(t,e){return yt("<=",t,e,J)}function Gt(t,e){return yt(">",t,e,J)}function Ht(t,e){return yt(">=",t,e,J)}function At(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Vt(t,e)),t[0])}function Vt(t,e){return yt("||",t,e,J)}function Jt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Kt(t,e)),t[0])}function Kt(t,e){return yt("^^",t,e,J)}function Lt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Ot(t,e)),t[0])}function Ot(t,e){return yt("&&",t,e,J)}function Qt(t){return mt("abs",t)}function Wt(t){return mt("acos",t)}function Zt(t){return mt("acosh",t)}function te(t){return mt("all",t,J)}function ee(t){return mt("any",t,J)}function ne(t){return mt("asin",t)}function re(t){return mt("asinh",t)}function ce(t,e){return null==e?mt("atan",t):vt("atan",t,e,t.constructor)}function ie(t){return mt("atanh",t)}function se(t){return mt("ceil",t)}function ue(t,e,n){return bt("clamp",t,e,n,t.constructor)}function oe(t){return mt("cos",t)}function he(t){return mt("cosh",t)}function le(t,e){return vt("cross",t,e,t.constructor)}function ae(t){return mt("dFdX",t)}function fe(t){return mt("dFdY",t)}function pe(t){return mt("degrees",t)}function de(t){return mt("determinant",t,_)}function we(t,e){return vt("distance",t,e,_)}function ye(t,e){return vt("dot",t,e,_)}function me(t,e){return vt("equal",t,e,N(t))}function ve(t,e){return vt("greaterThan",t,e,N(t))}function be(t,e){return vt("greaterThanEqual",t,e,N(t))}function xe(t){return mt("exp",t)}function Ie(t){return mt("exp2",t)}function ge(t,e,n){return bt("faceforward",t,e,n)}function Ee(t){return mt("floatBitsToInt",t,T(t))}function $e(t){return mt("floatBitsToUint",t,$(t))}function ze(t){return mt("floor",t)}function Te(t){return mt("fract",t)}function Ne(t){return mt("fwidth",t)}function De(t){return mt("intBitsToFloat",t,z(t))}function Fe(t){return mt("uintBitsToFloat",t,E(t))}function ke(t){return mt("inverse",t,_)}function Me(t){return mt("inversesqrt",t)}function Se(t){return mt("isinf",t,N(t))}function je(t){return mt("isnan",t,N(t))}function Re(t){return mt("length",t,_)}function Pe(t,e){return vt("lessThan",t,e,N(t))}function Be(t,e){return vt("lessThanEqual",t,e,N(t))}function qe(t){return mt("log",t)}function Ue(t){return mt("log2",t)}function _e(t,e){return vt("matrixCompMult",t,e)}function Ce(t,e){return vt("max",t,e)}function Xe(t,e){return vt("min",t,e)}function Ye(t,e,n){return bt("mix",t,e,n)}function Ge(t,e){return vt("mod",t,e)}function He(t,e){throw new Error("modf not implemented")}function Ae(t){return mt("normalize",t)}function Ve(t){return"bool"===t.type?mt("!",t):mt("not",t)}function Je(t,e){return vt("notEqual",t,e,N(t))}function Ke(t,e){throw new Error("Impl type?")}function Le(t){return mt("packHalf2x16",t,G)}function Oe(t){return mt("packUnorm2x16",t,G)}function Qe(t){return mt("packSnorm2x16",t,G)}function We(t,e){return vt("pow",t,e)}function Ze(t){return mt("radians",t)}function tn(t,e){return vt("reflect",t,e)}function en(t,e,n){return bt("refract",t,e,n)}function nn(t){return mt("round",t)}function rn(t){return mt("roundEven",t)}function cn(t){return mt("sign",t)}function sn(t){return mt("sin",t)}function un(t){return mt("sinh",t)}function on(t,e,n){return bt("smoothstep",t,e,n)}function hn(t){return mt("sqrt",t)}function ln(t,e){return vt("step",t,e,e.constructor)}function an(t){return mt("tan",t)}function fn(t){return mt("tanh",t)}function pn(t,e,n){return bt("texelFetch",t,e,n,Y)}function dn(t,e,n,r){throw new Error("Impl type")}function wn(t,e,n){throw new Error("Impl type")}function yn(t,e){return vt("texture",t,e,Y)}function mn(t,e,n,r){throw new Error("Impl type")}function vn(t,e,n,r,c){throw new Error("Impl type")}function bn(t,e,n){throw new Error("Impl type")}function xn(t,e,n,r){throw new Error("Impl type")}function In(t,e,n,r){throw new Error("Impl type")}function gn(t,e,n){throw new Error("Impl type")}function En(t,e,n,r){throw new Error("Impl type")}function $n(t,e,n,r,c){throw new Error("Impl type")}function zn(t,e,n){throw new Error("Impl type")}function Tn(t,e,n,r){throw new Error("Impl type")}function Nn(t,e,n,r){throw new Error("Impl type")}function Dn(t,e){throw new Error("Impl type")}function Fn(t){return mt("transpose",t)}function kn(t){return mt("trunc",t)}function Mn(t){return mt("unpackHalf2x16",t,C)}function Sn(t){return mt("unpackUnorm2x16",t,C)}function jn(t){return mt("unpackSnorm2x16",t,C)}function Rn(t,e){const{initialValue:n,xRange:r,yRange:c,callback:i}=e,[s,u]=r,[o,h]=c,l=new W(0).setMutable().setDebugName("iterX"),a=new W(0).setMutable().setDebugName("iterY"),f=n.setMutable().setDebugName("accumulator"),p=i(f,t.get(l,a),l,a).setDebugName("callback"),d=It({iterX:l,iterY:a,accumulator:f},n.constructor,p,(({out:t,iterX:e,iterY:n,accumulator:r,subgraph:c})=>`\nfor (${n} = ${o}; ${n} < ${h}; ${n}++) {\n  for (${e} = ${s}; ${e} < ${u}; ${e}++) {\n\n  ${c.body}\n\n  ${r} = ${c.varName};\n  }\n}\n${t} = ${r};\n`)).setDebugName("reduce2DBody");return d}


/***/ }),

/***/ 17730:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79432);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t{constructor(){this.drawPhase=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HITTEST|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HIGHLIGHT|_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.DEBUG}startup(){}shutdown(s){}}


/***/ }),

/***/ 28177:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98003);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(t,i,e){this._instanceId=t,this.techniqueRef=i,this._input=e}get instanceId(){return (0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .castStrictInstanceId */ .P)(this._instanceId)}createMeshInfo(i){return{id:(0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .castStrictInstanceId */ .P)(this._instanceId),techniqueType:this.techniqueRef.type,inputParams:i,optionalAttributes:this._input.optionalAttributes}}getInput(){return this._input}setInput(t){this._input=t}}


/***/ }),

/***/ 84022:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  YS: () => (/* binding */ TechniqueRegistry_F),
  n_: () => (/* binding */ TechniqueRegistry_k),
  Wn: () => (/* binding */ TechniqueRegistry_x)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js
var TechniqueType = __webpack_require__(98826);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GraphShaderModule.js + 2 modules
var GraphShaderModule = __webpack_require__(47381);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/graph/glsl.js
var glsl = __webpack_require__(39689);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/animationDebugFlags.js
var animationDebugFlags = __webpack_require__(4293);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/animations/instructions.js
var instructions = __webpack_require__(45987);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimationUniformInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class d extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"globalTime",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],d.prototype,"animationTextureSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],d.prototype,"animationTexture",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],d.prototype,"toScreen",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],d.prototype,"toNdc",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"mapRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],d.prototype,"pixelRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/enums.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var enums_o;!function(o){o[o.transform=0]="transform",o[o.fromColor=1]="fromColor",o[o.toColor=2]="toColor",o[o.colorMix=3]="colorMix",o[o.toOpacity=4]="toOpacity",o[o.opacityMix=5]="opacityMix",o[o.shift=6]="shift"}(enums_o||(enums_o={}));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/markerConstants.js
var markerConstants = __webpack_require__(64723);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/utils.js
var utils = __webpack_require__(43212);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/EntityStorage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class p extends GraphShaderModule/* UniformGroup */.k2{getVisualVariableData(t){if(!this._vvData){const a=this.getAttributeDataCoords(t);this._vvData=(0,glsl/* texture2D */.US)(this.visualVariableData,a).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const a=(0,utils/* unpackDisplayIdTexel */.Kt)(t),e=this.size,i=(0,glsl/* int */.Wh)(a.x),r=(0,glsl/* int */.Wh)(a.y).multiply((0,glsl/* int */.Wh)(256)),s=(0,glsl/* int */.Wh)(a.z).multiply((0,glsl/* int */.Wh)(256)).multiply((0,glsl/* int */.Wh)(256)),n=(0,glsl/* float */.fV)(i.add(r).add(s)),p=(0,glsl/* mod */.zi)(n,e),d=n.subtract(p).divide(e);this._uv=new glsl/* Vec2 */.ZY(p,d).add(.5).divide(e)}return this._uv}getFilterData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.filterFlags,a).setDebugName("storage0")}getAnimationData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.animation,a).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven0,a).setDebugName("storage30")}getDataDrivenData1(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven1,a).setDebugName("storage31")}getDataDrivenData2(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.dataDriven2,a).setDebugName("storage32")}getGPGPUData(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.gpgpu,a).setDebugName("storage4")}getLocalTimeOrigin(t){const a=this.getAttributeDataCoords(t);return (0,glsl/* texture2D */.US)(this.localTimeOrigin,a).x.setDebugName("storage5")}getFilterFlags(t){return (0,has/* default */.A)("webgl-ignores-sampler-precision")?(0,glsl/* ceil */.mk)(this.getFilterData(t).x.multiply((0,glsl/* float */.fV)(255))):this.getFilterData(t).x.multiply((0,glsl/* float */.fV)(255))}getLabelVisibility(t){const a=this.getFilterData(t).y.multiply(255);return new glsl/* Float */.nt(1).subtract(a)}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"filterFlags",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"animation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"gpgpu",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"localTimeOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"visualVariableData",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven0",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],p.prototype,"dataDriven2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],p.prototype,"size",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ShaderHighlight.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],e.prototype,"activeReasons",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],e.prototype,"highlightAll",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ShaderHittest.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ShaderHittest_e extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],ShaderHittest_e.prototype,"position",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"distance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"smallSymbolDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ShaderHittest_e.prototype,"smallSymbolSizeThreshold",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ViewInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ViewInfo_d extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayViewScreenMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayViewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"displayMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"viewMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Mat3 */.U)],ViewInfo_d.prototype,"tileMat3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"displayZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"requiredZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],ViewInfo_d.prototype,"tileOffset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"currentScale",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"currentZoom",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"metersPerSRUnit",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"rotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],ViewInfo_d.prototype,"pixelRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/AFeatureShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class S extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec3 */.eB)],S.prototype,"id",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(1,glsl/* Float */.nt)],S.prototype,"bitset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(2,glsl/* Vec2 */.ZY)],S.prototype,"pos",void 0);class q extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],q.prototype,"nextPos1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(15,glsl/* Vec2 */.ZY)],q.prototype,"nextPos2",void 0);class AFeatureShader_P extends GraphShaderModule/* FragmentInput */.HS{}class B extends GraphShaderModule/* GraphShaderModule */.A{clip(t,i){let e=new glsl/* Float */.nt(0);const o=this.storage.getFilterFlags(t);if(e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract((0,utils/* getFilterBit */.i6)(o,0)))),this.inside?e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract((0,utils/* getFilterBit */.i6)(o,1)))):this.outside?e=e.add((0,glsl/* float */.fV)(2).multiply((0,utils/* getFilterBit */.i6)(o,1))):this.highlight&&(e=e.add((0,glsl/* float */.fV)(2).multiply((0,glsl/* float */.fV)(1).subtract(this._checkHighlight(o))))),null!=i){const t=new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(i.x,this.view.currentZoom)),o=(0,glsl/* step */.PM)(i.y,this.view.currentZoom);e=e.add(new glsl/* Float */.nt(2).multiply(t.add(o)))}return e}getFragmentOutput(t,i,e=new glsl/* Float */.nt(1/255)){const s=new GraphShaderModule/* FragmentOutput */.mm;return s.fragColor=this._maybeWriteHittest(i)??this._maybeHighlight(t,e)??t,s}_maybeHighlight(t,i){return this.highlight?new glsl/* Vec4 */.Zb(t.rgb,(0,glsl/* step */.PM)(i,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let o=1;o<definitions/* maxHighlightReasons */.U5;o++)e=e.add(this._checkHighlightBit(t,o));return (0,glsl/* step */.PM)(new glsl/* Float */.nt(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,i){return (0,utils/* getHighlightBit */.yS)(t,i).multiply((0,utils/* getBit */.mh)(this.highlight.activeReasons,i))}maybeRunHittest(t,i,e){if(null==this.hittestRequest)return null;const o=this.hittest(t,i,e);let s=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(o,this.hittestRequest.distance),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0));const r=this.storage.getAttributeDataCoords(t.id),h=(0,utils/* uvToClip */.nb)(r);s=s.add(this.clip(t.id,t.zoomRange));const l=new glsl/* Vec4 */.Zb(new glsl/* Float */.nt(1/255),0,0,0);return{glPointSize:new glsl/* Float */.nt(1),glPosition:new glsl/* Vec4 */.Zb(h,s,1),color:l}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],B.prototype,"inside",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],B.prototype,"outside",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(e)],B.prototype,"highlight",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(p)],B.prototype,"storage",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(ViewInfo_d)],B.prototype,"view",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(ShaderHittest_e)],B.prototype,"hittestRequest",void 0);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/constants.js
var constants = __webpack_require__(32520);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/LocalTileOffset.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class n extends GraphShaderModule/* UniformGroup */.k2{getPatternOffsetAtTileOrigin(t,i=new glsl/* Float */.nt(0),l=new glsl/* Float */.nt(1)){const n=new glsl/* Vec2 */.ZY(constants/* maxRepresentableInt */.YV).divide(t);let p=t.multiply((0,glsl/* fract */.jc)(this.maxIntsToLocalOrigin.multiply(n))).add(this.tileOffsetFromLocalOrigin).subtract(new glsl/* Float */.nt(.5).multiply(t));return p=new glsl/* Vec2 */.ZY(p.x.multiply(l).subtract(p.y.multiply(i)),p.x.multiply(i).add(p.y.multiply(l))),(0,glsl/* mod */.zi)(p,t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],n.prototype,"tileOffsetFromLocalOrigin",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],n.prototype,"maxIntsToLocalOrigin",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/MosaicInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MosaicInfo_p extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],MosaicInfo_p.prototype,"size",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],MosaicInfo_p.prototype,"texture",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableColor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class f extends GraphShaderModule/* UniformGroup */.k2{getColor(s,t,o){return (0,glsl/* cond */.j1)([(0,glsl.or)((0,utils/* isNan */.M8)(s),o),t],[(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.colors.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.colors.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),o=this.values.get(t),r=t.subtract(1),e=this.values.get(r),i=s.subtract(e).divide(o.subtract(e));return (0,glsl/* mix */.jh)(this.colors.get(r),this.colors.get(t),i)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,8))],f.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],f.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableOpacity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class h extends GraphShaderModule/* UniformGroup */.k2{getOpacity(t){return (0,glsl/* cond */.j1)([(0,utils/* isNan */.M8)(t),new glsl/* Float */.nt(1)],[(0,glsl/* lessThanEqual */.$5)(t,this.opacityValues.first()),this.opacities.first()],[(0,glsl/* greaterThanEqual */.aX)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const s=this.opacityValues.findIndex((s=>(0,glsl/* greaterThan */.MM)(s,t))),i=this.opacityValues.get(s),e=s.subtract(1),o=this.opacityValues.get(e),a=t.subtract(o).divide(i.subtract(o));return (0,glsl/* mix */.jh)(this.opacities.get(e),this.opacities.get(s),a)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],h.prototype,"opacities",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],h.prototype,"opacityValues",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableRotation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableRotation_d extends GraphShaderModule/* UniformGroup */.k2{getVVRotationMat4(t){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),glsl/* Mat4 */.$I.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants/* cDegToRad */.os),r=(0,glsl/* sin */.F8)(e),i=(0,glsl/* cos */.gn)(e);return new glsl/* Mat4 */.$I(i,r,0,0,r.multiply(new glsl/* Float */.nt(-1)),i,0,0,0,0,1,0,0,0,0,1)}))}getVVRotationMat3(t){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),glsl/* Mat3 */.U.identity(),(()=>{const e=this.getNormalizedAngle(t).multiply(constants/* cDegToRad */.os),r=(0,glsl/* sin */.F8)(e),i=(0,glsl/* cos */.gn)(e);return new glsl/* Mat3 */.U(i,r,0,r.multiply(new glsl/* Float */.nt(-1)),i,0,0,0,1)}))}getNormalizedAngle(t){const e=(0,glsl/* equal */.LC)(this.rotationType,new glsl/* Float */.nt(constants/* RotationType */.H_.Arithmatic));return (0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(90).subtract(t),t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],VisualVariableRotation_d.prototype,"rotationType",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeMinMaxValue.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class m extends GraphShaderModule/* UniformGroup */.k2{getSize(t,e){const r=this.minMaxValueAndSize.xy,s=this.minMaxValueAndSize.zw;return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),e,(()=>{const e=t.subtract(r.x).divide(r.y.subtract(r.x)),i=(0,glsl/* clamp */.qE)(e,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return s.x.add(i.multiply(s.y.subtract(s.x)))}))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec4 */.Zb)],m.prototype,"minMaxValueAndSize",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeScaleStops.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableSizeScaleStops_p extends GraphShaderModule/* UniformGroup */.k2{getSizeForViewScale(s){return (0,glsl/* cond */.j1)([(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return (0,glsl/* mix */.jh)(this.sizes.get(i),this.sizes.get(t),o)}])}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeScaleStops_p.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeScaleStops_p.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeStops.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class VisualVariableSizeStops_f extends GraphShaderModule/* UniformGroup */.k2{getSize(s,t){const e=(0,glsl/* cond */.j1)([(0,utils/* isNan */.M8)(s),t],[(0,glsl/* lessThanEqual */.$5)(s,this.values.first()),this.sizes.first()],[(0,glsl/* greaterThanEqual */.aX)(s,this.values.last()),this.sizes.last()],[!0,()=>{const t=this.values.findIndex((t=>(0,glsl/* greaterThan */.MM)(t,s))),e=this.values.get(t),i=t.subtract(1),r=this.values.get(i),o=s.subtract(r).divide(e.subtract(r));return (0,glsl/* mix */.jh)(this.sizes.get(i),this.sizes.get(t),o)}]);return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(e),t,e)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeStops_f.prototype,"sizes",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8))],VisualVariableSizeStops_f.prototype,"values",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/VisualVariableSizeUnitValue.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class l extends GraphShaderModule/* UniformGroup */.k2{getSize(t,o){return (0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t),o,t.multiply(this.unitValueToPixelsRatio))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],l.prototype,"unitValueToPixelsRatio",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/vvUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function vvUtils_t(a){return null!=a.visualVariableSizeMinMaxValue||null!=a.visualVariableSizeScaleStops||null!=a.visualVariableSizeStops||null!=a.visualVariableSizeUnitValue}function vvUtils_l(a,e,i){if(vvUtils_t(a)){const t=a.storage.getSizeValue(e);return a.visualVariableSizeMinMaxValue?.getSize(t,i)??a.visualVariableSizeScaleStops?.getSizeForViewScale(a.view.currentScale)??a.visualVariableSizeStops?.getSize(t,i)??a.visualVariableSizeUnitValue?.getSize(t,i)}return i}function vvUtils_r(e,i,t,l=new glsl/* Bool */.x(!1)){if(null==e.visualVariableColor)return t;const r=e.storage.getColorValue(i);return e.visualVariableColor.getColor(r,t,l)}function vvUtils_n(a,i){if(null==a.visualVariableOpacity)return new glsl/* Float */.nt(1);const t=a.storage.getOpacityValue(i);return a.visualVariableOpacity.getOpacity(t)}function vvUtils_u(a,e){if(null==a.visualVariableRotation)return glsl/* Mat3 */.U.identity();const t=a.storage.getRotationValue(e);return a.visualVariableRotation.getVVRotationMat3(t)}function vvUtils_o(a,i){if(null==a.visualVariableRotation)return new glsl/* Float */.nt(0);const t=a.storage.getRotationValue(i);return a.visualVariableRotation.getNormalizedAngle(t)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AAnimatedShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AAnimatedShader_q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec2 */.ZY)],AAnimatedShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"value1Position2Value2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec4 */.Zb)],AAnimatedShader_q.prototype,"animationPointerAndBaseSizeAndReferenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec2 */.ZY)],AAnimatedShader_q.prototype,"zoomRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Float */.nt)],AAnimatedShader_q.prototype,"lineLength",void 0);class H extends AFeatureShader_P{}class J extends B{_vertexPreamble(i,t,e){const{id:o,offset:a,animationPointerAndBaseSizeAndReferenceSize:s,sizing:r}=i,l=s.xy,n=s.z,b=s.w,S=r.xy,h=this._getEvalParams(i,S,e);let w,g;if(i.value1Position2Value2){const t=K(l,enums_o.shift,h).a,e=i.pos,o=i.value1Position2Value2.yz,a=i.value1Position2Value2.x,s=i.value1Position2Value2.w,r=t.subtract(a).divide(s.subtract(a));g=e.add(o.subtract(e).multiply(r)),w=(0,glsl/* step */.PM)(new glsl/* Float */.nt(1),r).add((0,glsl/* step */.PM)(new glsl/* Float */.nt(0),(0,glsl/* negate */.ze)(r)))}else g=i.pos,w=new glsl/* Float */.nt(0);const V=r.z,x=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isStroke),z=r.w,T=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.scaleSymbolsProportionally),_=K(l,enums_o.transform,h),I=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)((0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isMapAligned),new glsl/* Float */.nt(1)),this.view.rotation.divide(180).multiply(Math.PI)],[!0,new glsl/* Float */.nt(0)]),C=new glsl/* Mat2 */.Ny((0,glsl/* cos */.gn)(I),(0,glsl/* sin */.F8)(I.multiply(-1)),(0,glsl/* sin */.F8)(I),(0,glsl/* cos */.gn)(I)).multiply(_.xy),M=_.z.subtract(I).subtract(t.multiply(constants/* c256ToRad */.rp)),D=_.w,F=(0,utils/* getBit */.mh)(i.bitset,markerConstants/* MarkerConstants */.c.bitset.isSDF),L=vvUtils_l(this,o,new glsl/* Float */.nt(b)).divide(new glsl/* Float */.nt(b));return{baseSize:n,animationPointer:l,strokeWidth:V,isOutline:x,unscaledDistanceToPx:z,scaleSymbolsProportionally:T,isSDF:F,position:this._getScreenPosition({id:o,pos:g,offset:a,referenceSize:b,translation:C,rotation:M,scale:D,vvScale:L}),evalParams:h,vvScale:L,scale:D,clip:w}}_getScreenPosition(i){const{pos:t,translation:e,rotation:o,scale:a,offset:s,id:r,vvScale:l}=i,n=vvUtils_o(this,r).multiply(Math.PI/180),p=e.x.multiply(4/3),d=e.y.multiply(-1).multiply(4/3),c=(0,glsl/* sin */.F8)(n),y=(0,glsl/* cos */.gn)(n),h=y.multiply(p).add((0,glsl/* negate */.ze)(c).multiply(d)),w=c.multiply(p).add(y.multiply(d)),g=(0,glsl/* sin */.F8)(o.subtract(n)),V=(0,glsl/* cos */.gn)(o.subtract(n)),x=new glsl/* Float */.nt(0),z=new glsl/* Float */.nt(1),{pixelRatio:j}=this.animationInfo,P=new glsl/* Mat3 */.U(z,x,x,x,z,x,h.multiply(j),w.multiply(j),z),T=new glsl/* Mat3 */.U(V,g.multiply(-1),x,g,V,x,0,0,z),_=a.multiply(l).multiply(j).multiply(4/3),I=T.multiply(_),O=this.animationInfo.toScreen.multiply(new glsl/* Vec3 */.eB(t,1)),C=P.multiply(O).xy,M=I.multiply(new glsl/* Vec3 */.eB(s,0)).xy;return C.add(M)}_clip(i,e){let o=super.clip(i,e);const a=(0,glsl/* lessThanEqual */.$5)(this._getLocalTimeOrigin(i),new glsl/* Float */.nt(0));return animationDebugFlags/* animationDebugFlags */.H.forceGlobalTimeOrigin||(o=o.add((0,glsl/* cond */.j1)([a,()=>new glsl/* Float */.nt(2)],[!0,()=>new glsl/* Float */.nt(0)]))),o}_getLocalTimeOrigin(i){return this.storage.getLocalTimeOrigin(i)}_toNdc(i){return this.animationInfo.toNdc.multiply(new glsl/* Vec3 */.eB(i,1)).xy}_getEvalParams(i,t,e){const{globalTime:o,animationTextureSize:a,animationTexture:s}=this.animationInfo;return{globalTime:o,localTimeOrigin:this._getLocalTimeOrigin(i.id),animationTextureSize:a,animationTexture:s,pixelDimensions:t,lineLength:e}}_getColor(i,t){return (0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(t.isSDF,new glsl/* Float */.nt(1)),this._getSDFColor(i,t),this._getSpriteColor(i,t))}_getSpriteColor(i,t){return (0,glsl/* texture2D */.US)(this.mosaicInfo.texture,i).multiply(t.color)}_getSDFColor(i,t){const e=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,i),o=new glsl/* Float */.nt(.5).subtract((0,utils/* rgba2float */.Rj)(e)).multiply(t.distanceToPx).multiply(constants/* softEdgeRatio */.V5),a=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(o),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),s=t.color.multiply(a),r=t.outlineSize.multiply(.5),n=(0,glsl/* abs */.tn)(o).subtract(r),p=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(n),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),u=t.outlineColor.multiply(p);return new glsl/* Float */.nt(1).subtract(u.a).multiply(s).add(u)}}function K(i,t,o){const a=i.add(new glsl/* Vec2 */.ZY(t,0)),s=(0,glsl/* texture2D */.US)(o.animationTexture,a.add(.5).divide(o.animationTextureSize)).xy;return i=i.add(s),(0,glsl/* block */.om)({animationPointer:i,...o},glsl/* Vec4 */.Zb,null,(i=>{const{out:t}=i;if(!t)throw new Error("out is null");return (0,instructions/* generateVirtualMachineSource */.DW)({...i,out:t})}))}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],J.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(d)],J.prototype,"animationInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],J.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],J.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],J.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],J.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],J.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],J.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],J.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],J.prototype,"visualVariableRotation",void 0);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AAnimatedPolyShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class v extends AAnimatedShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec4 */.Zb)],v.prototype,"tlbr",void 0);class AAnimatedPolyShader_S extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],AAnimatedPolyShader_S.prototype,"nextPos1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],AAnimatedPolyShader_S.prototype,"nextPos2",void 0);class AAnimatedPolyShader_f extends H{}class g extends J{_fragmentPoly(o){const t=(0,glsl/* mod */.zi)(o.uv,new glsl/* Float */.nt(1)),e=(0,glsl/* mix */.jh)(o.tlbr.xy,o.tlbr.zw,t);return this._getColor(e,{color:o.color,distanceToPx:o.distanceToPx,isSDF:o.isSDF,outlineColor:o.outlineColor,outlineSize:o.strokeWidth})}_vertexPoly(o){const{position:t,animationPointer:e,evalParams:s,isOutline:m,unscaledDistanceToPx:c,vvScale:d,strokeWidth:u,scaleSymbolsProportionally:v,scale:S,isSDF:f,baseSize:g,clip:j}=this._vertexPreamble(o,new glsl/* Float */.nt(0),o.lineLength||new glsl/* Float */.nt(0)),w=this._toNdc(t);let k=K(e,enums_o.fromColor,s);k=new glsl/* Vec4 */.Zb(k.rgb.multiply(k.a),k.a);let z=K(e,enums_o.toColor,s);z=new glsl/* Vec4 */.Zb(z.rgb.multiply(z.a),z.a);let C=K(e,enums_o.colorMix,s);C=new glsl/* Vec4 */.Zb(C.rgb.multiply(C.a),C.a);const D=K(e,enums_o.toOpacity,s).a,_=K(e,enums_o.opacityMix,s).a,T=vvUtils_r(this,o.id,k,(0,glsl.or)((0,utils/* getBitBool */.K5)(o.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),new glsl/* Bool */.x(m))),F=(0,glsl/* mix */.jh)(T,z,C),M=vvUtils_n(this,o.id),O=(0,glsl/* mix */.jh)(M,D,_),W=F.multiply(O),A=this.clip(o.id,o.zoomRange).add(j.multiply(2)),L=c.multiply(d);return{unscaledDistanceToPx:c,vvScale:d,strokeWidth:u,scaleSymbolsProportionally:v,scale:S,isSDF:f,baseSize:g,ndc:w,color:W,z:A,isOutline:m,evalParams:s,distanceToPx:L}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/hittestUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function hittestUtils_v(t,u){return (0,glsl/* dot */.Om)(t,(0,glsl/* normalize */.S8)(u))}function j(i,y,s){const l=s.subtract(y),c=hittestUtils_v(i.subtract(y),l),e=(0,glsl/* clamp */.qE)(c.divide((0,glsl/* length */.Bw)(l)),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return (0,glsl/* distance */.Io)(i,y.add(e.multiply(s.subtract(y))))}function hittestUtils_g(t){const n=(0,glsl/* abs */.tn)(t);return (0,glsl/* step */.PM)(n.x.add(n.y).add(n.z),new glsl/* Float */.nt(1.05))}function hittestUtils_h(t,n,r,y){const s=new glsl/* Mat3 */.U(r.x.multiply(y.y).subtract(y.x.multiply(r.y)),y.x.multiply(n.y).subtract(n.x.multiply(y.y)),n.x.multiply(r.y).subtract(r.x.multiply(n.y)),r.y.subtract(y.y),y.y.subtract(n.y),n.y.subtract(r.y),y.x.subtract(r.x),n.x.subtract(y.x),r.x.subtract(n.x)),l=n.x.multiply(r.y.subtract(y.y)),c=r.x.multiply(y.y.subtract(n.y)),e=y.x.multiply(n.y.subtract(r.y)),o=l.add(c).add(e);return new glsl/* Float */.nt(1).divide(o).multiply(s.multiply(new glsl/* Vec3 */.eB(1,t)))}function M(t,n,r,i){return (0,glsl/* equal */.LC)(hittestUtils_g(hittestUtils_h(t,n,r,i)),new glsl/* Float */.nt(1))}function P(t,n,r,i){const a=r.subtract(n),o=i.subtract(n),p=(0,utils/* cross2 */.tL)(a,o),x=(0,glsl/* and */.Uo)((0,glsl/* lessThan */.Xe)(p,new glsl/* Float */.nt(constants/* epsilonHitTest */.M)),(0,glsl/* greaterThan */.MM)(p,new glsl/* Float */.nt(-.05)));return (0,glsl/* cond */.j1)([(0,glsl/* and */.Uo)((0,glsl/* not */.AU)(x),M(t.xy,n,r,i)),new glsl/* Float */.nt(-1)],[!0,()=>{const u=j(t,n,r),y=j(t,r,i),s=j(t,i,n);return (0,glsl/* min */.jk)((0,glsl/* min */.jk)(u,y),s)}])}function hittestUtils_q(t){return t.distance.add(1)}function z(t,u,n){const{viewMat3:r,tileMat3:y}=t.view,s=r.multiply(y),l=s.multiply(new glsl/* Vec3 */.eB(u.pos,1)),c=s.multiply(new glsl/* Vec3 */.eB(n.nextPos1,1)),e=s.multiply(new glsl/* Vec3 */.eB(n.nextPos2,1));return P(t.hittestRequest.position,l.xy,c.xy,e.xy)}function R(t,u,n){return (0,glsl/* distance */.Io)(t,n).subtract(u)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/FillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FillShader_g extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],FillShader_g.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],FillShader_g.prototype,"zoomRange",void 0);class x extends B{constructor(){super(...arguments),this.type="FillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,o){const r=vvUtils_n(this,t.id),e=vvUtils_r(this,t.id,t.color).multiply(r),i=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.xy,1)),p=this.clip(t.id,t.zoomRange);return{glPosition:new glsl/* Vec4 */.Zb(i.xy,p,1),color:e,...this.maybeRunHittest(t,o,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new glsl/* Float */.nt(0))}hittest(t,o){return z(this,t,o)}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],x.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],x.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(FillShader_g)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AFeatureShader_P))],x.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ComplexFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexFillShader_q extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],ComplexFillShader_q.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"width",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"height",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],ComplexFillShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],ComplexFillShader_q.prototype,"scale",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],ComplexFillShader_q.prototype,"angle",void 0);class G extends AFeatureShader_P{}function ComplexFillShader_L(t,e,o,i,r){const l=(0,glsl/* equal */.LC)((0,utils/* getBit */.mh)(r,constants/* bitsetFillRandomPatternOffset */.Fz),(0,glsl/* float */.fV)(1)),f=(0,utils/* rgba2float */.Rj)(new glsl/* Vec4 */.Zb(t,0));return (0,glsl/* ifElse */.Tk)(l,(0,glsl/* mat3 */.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl/* negate */.ze)(o.divide(e.x)),i.divide(e.y),0,(0,utils/* rand */._9)((0,glsl/* vec2 */.Zc)(f,0)),(0,utils/* rand */._9)((0,glsl/* vec2 */.Zc)(0,f)),1),(0,glsl/* mat3 */.w0)(i.divide(e.x),o.divide(e.y),0,(0,glsl/* negate */.ze)(o.divide(e.x)),i.divide(e.y),0,0,0,1))}function ComplexFillShader_P(t,e){const o=t.view.requiredZoomFactor,i=new glsl/* Vec2 */.ZY(e.width,e.height),r=i.multiply(e.scale).multiply(o),s=e.angle.multiply(constants/* c256ToRad */.rp),p=(0,glsl/* sin */.F8)(s),a=(0,glsl/* cos */.gn)(s),d=ComplexFillShader_L(e.id,r,p,a,e.bitset),m=t.localTileOffset.getPatternOffsetAtTileOrigin(i,p,a),u=o.multiply(e.scale).multiply(e.offset.subtract(m)).divide(r),h=new glsl/* Vec3 */.eB(e.pos,1),x=d.multiply(h).xy.subtract(u),g=e.tlbr.divide(t.mosaicInfo.size.xyxy);let b=(0,utils/* getBit */.mh)(e.bitset,constants/* bitsetGenericConsiderAlphaOnly */.cn);return null!=t.visualVariableColor&&(b=(0,glsl/* ifElse */.Tk)((0,utils/* isNan */.M8)(t.storage.getColorValue(e.id)),new glsl/* Float */.nt(0),b)),{tileTextureCoord:x,tlbr:g,sampleAlphaOnly:b}}function Z(t,e){const o=(0,glsl/* mod */.zi)(e.tileTextureCoord,new glsl/* Float */.nt(1)),i=(0,glsl/* mix */.jh)(e.tlbr.xy,e.tlbr.zw,o);let r=(0,glsl/* texture2D */.US)(t.mosaicInfo.texture,i);return r=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(e.sampleAlphaOnly,new glsl/* Float */.nt(.5)),r.aaaa,r),e.color.multiply(r)}class _ extends x{constructor(){super(...arguments),this.type="ComplexFillShader"}vertex(t,e){return{...super.vertex(t,e),...ComplexFillShader_P(this,t)}}fragment(t){const e=Z(this,t);return this.getFragmentOutput(e,t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],_.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],_.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexFillShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(G))],_.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedFillShader_f extends g{constructor(){super(...arguments),this.type="AnimatedFillShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const{distanceToPx:i,ndc:p,z:u,color:c,isOutline:d,strokeWidth:y,isSDF:f,baseSize:x,scale:g,scaleSymbolsProportionally:b}=this._vertexPoly(t),w=this.view.requiredZoomFactor,P=t.sizing.xy,S=P.multiply(w),v=new glsl/* Float */.nt(0),z=(0,glsl/* sin */.F8)(v),F=(0,glsl/* cos */.gn)(v),j=ComplexFillShader_L(t.id,S,z,F,t.bitset),A=this.localTileOffset.getPatternOffsetAtTileOrigin(P,z,F),O=w.multiply(t.offset.subtract(A)).divide(S),T=new glsl/* Vec3 */.eB(t.pos,1),M=j.multiply(T).xy.subtract(O),k=t.tlbr.divide(this.mosaicInfo.size.xyxy);return{glPosition:new glsl/* Vec4 */.Zb(p,u,1),tlbr:k,uv:M,color:c.multiply(new glsl/* Float */.nt(1).subtract(d)),outlineColor:c.multiply(d),distanceToPx:i,strokeWidth:y.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),g,b)),isOutline:d,isSDF:f,...this.maybeRunHittest(t,e,{pos:t.pos,size:x,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:i,isSDF:f})}}fragment(t){const e=this._fragmentPoly(t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return z(this,t,e)}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(v)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_S))],AnimatedFillShader_f.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_f))],AnimatedFillShader_f.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/LineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LineShader_q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],LineShader_q.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],LineShader_q.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],LineShader_q.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],LineShader_q.prototype,"zoomRange",void 0);class LineShader_A extends AFeatureShader_P{}class F extends GraphShaderModule/* UniformGroup */.k2{}function k(t){return (0,glsl/* max */.T9)(new glsl/* Float */.nt(constants/* thinLineWidthFactor */.Fb).multiply((0,glsl/* step */.PM)(t,new glsl/* Float */.nt(constants/* thinLineHalfWidth */.J5))),new glsl/* Float */.nt(1))}function LineShader_D(t,i){const{halfWidth:e,normal:o}=t,l=k(e),a=(0,glsl/* length */.Bw)(o).multiply(e);return (0,glsl/* clamp */.qE)(l.multiply(e.subtract(a)).divide(i.add(l).subtract(new glsl/* Float */.nt(1))),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1))}function LineShader_G(t,i){const{id:e,halfWidth:o,referenceHalfWidth:l}=i;if(vvUtils_t(t)){const i=new glsl/* Float */.nt(2).multiply(l),a=vvUtils_l(t,e,i);return new glsl/* Float */.nt(.5).multiply(o.divide((0,glsl/* max */.T9)(l,new glsl/* Float */.nt(constants/* epsilon */.Ni)))).multiply(a)}return o}function LineShader_L(t,i){const{id:e,offset:o,pos:l,normal:a,zoomRange:r}=i,{displayViewScreenMat3:p,displayViewMat3:y}=t.view,c=vvUtils_r(t,e,i.color),f=vvUtils_n(t,e),h=LineShader_G(t,i),v=new glsl/* Float */.nt(.5).multiply(t.antialiasingControls.antialiasing),w=(0,glsl/* max */.T9)(h.add(v),new glsl/* Float */.nt(.45)).add(new glsl/* Float */.nt(.1).multiply(v)),V=k(w).multiply(w).multiply(o),b=y.multiply(new glsl/* Vec3 */.eB(V,new glsl/* Float */.nt(0))),S=p.multiply(new glsl/* Vec3 */.eB(l,new glsl/* Float */.nt(1))).add(b),x=new glsl/* Float */.nt(2).multiply((0,glsl/* step */.PM)(h,new glsl/* Float */.nt(0))).add(t.clip(e,r)),g=new glsl/* Vec4 */.Zb(S.xy,x,1);return{color:c,opacity:f,halfWidth:w,normal:a,scaledOffset:V,scaledHalfWidth:h,glPosition:new glsl/* Vec4 */.Zb(g.xy,x,1)}}function T(t,i){const{opacity:e,color:o}=t,l=LineShader_D(t,i);return e.multiply(o).multiply(l)}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],F.prototype,"antialiasing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],F.prototype,"blur",void 0);class LineShader_ extends B{constructor(){super(...arguments),this.type="LineShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,i){const e=LineShader_L(this,t);return{...e,...this.maybeRunHittest(t,i,e.halfWidth)}}fragment(t){const i=T(t,this.antialiasingControls.blur);return this.getFragmentOutput(i,t)}hittest(t,i,e){const{viewMat3:o,tileMat3:l}=this.view,a=o.multiply(l),r=a.multiply(new glsl/* Vec3 */.eB(t.pos,1)),u=a.multiply(new glsl/* Vec3 */.eB(i.nextPos1,1)),m=a.multiply(new glsl/* Vec3 */.eB(i.nextPos2,1)),{distance:d,smallSymbolDistance:y,smallSymbolSizeThreshold:c}=this.hittestRequest,f=(0,glsl/* step */.PM)(e,c.multiply(.5)).multiply(d.subtract(y)),h=this.hittestRequest.position;return (0,glsl/* min */.jk)(j(h,r.xy,u.xy),j(h,r.xy,m.xy)).subtract(e).add(f)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(F)],LineShader_.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],LineShader_.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],LineShader_.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],LineShader_.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],LineShader_.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],LineShader_.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],LineShader_.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(LineShader_q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],LineShader_.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(LineShader_A))],LineShader_.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedLineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedLineShader_g extends v{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],AnimatedLineShader_g.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],AnimatedLineShader_g.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],AnimatedLineShader_g.prototype,"segmentDirection",void 0);class AnimatedLineShader_z extends AAnimatedPolyShader_f{}class AnimatedLineShader_A extends g{constructor(){super(...arguments),this.type="AnimatedLineShader",this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const{animationPointerAndBaseSizeAndReferenceSize:i}=t,s=i.xy,{distanceToPx:d,ndc:p,z:u,color:c,isOutline:y,strokeWidth:h,isSDF:x,baseSize:v,scale:f,scaleSymbolsProportionally:b,evalParams:P}=this._vertexPoly(t),g=t.sizing.xy,z=g.x.multiply(v).divide(g.y),A=K(s,enums_o.shift,P).a,j=t.accumulatedDistance.subtract(A),{normal:D}=t,M=t.normal.y,F=j.divide(this.view.displayZoomFactor).add((0,glsl/* dot */.Om)(t.segmentDirection,t.offset)).divide(z),R=M.add(1).divide(2),T=new glsl/* Vec2 */.ZY(F,R),W=t.tlbr.divide(this.mosaicInfo.size.xyxy);return{glPosition:new glsl/* Vec4 */.Zb(p,u,1),tlbr:W,uv:T,color:c.multiply(new glsl/* Float */.nt(1).subtract(y)),outlineColor:c.multiply(y),distanceToPx:d,strokeWidth:h.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),f,b)),isOutline:y,isSDF:x,halfWidth:v.divide(2),normal:D,...this.maybeRunHittest(t,e,{pos:t.pos,size:v,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:d,isSDF:x})}}fragment(t){const e=this._fragmentPoly(t),{halfWidth:i,normal:s}=t,o=k(i),n=(0,glsl/* length */.Bw)(s).multiply(i),l=(0,glsl/* clamp */.qE)(o.multiply(i.subtract(n)).divide(o.subtract(new glsl/* Float */.nt(1))),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return this.getFragmentOutput(e.multiply(l),t)}hittest(t,e,i){const{viewMat3:s,tileMat3:o}=this.view,n=s.multiply(o),l=n.multiply(new glsl/* Vec3 */.eB(t.pos,1)),r=n.multiply(new glsl/* Vec3 */.eB(e.nextPos1,1)),a=n.multiply(new glsl/* Vec3 */.eB(e.nextPos2,1)),{distance:m,smallSymbolDistance:d,smallSymbolSizeThreshold:p}=this.hittestRequest,h=(0,glsl/* step */.PM)(i,p.multiply(.5)).multiply(m.subtract(d)),x=this.hittestRequest.position;return (0,glsl/* min */.jk)(j(x,l.xy,r.xy),j(x,l.xy,a.xy)).subtract(i).add(h)}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedLineShader_g)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AAnimatedPolyShader_S))],AnimatedLineShader_A.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedLineShader_z))],AnimatedLineShader_A.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedMarkerShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedMarkerShader_R extends AAnimatedShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_R.prototype,"uv",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],AnimatedMarkerShader_R.prototype,"angle",void 0);class AnimatedMarkerShader_F extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],AnimatedMarkerShader_F.prototype,"textureUVNextVertex2",void 0);class AnimatedMarkerShader_T extends H{}function U(t,e,i,s){return e.multiply(t.x).add(i.multiply(t.y)).add(s.multiply(t.z))}class AnimatedMarkerShader_q extends J{constructor(){super(...arguments),this.type="AnimatedMarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],uv:["textureUVNextVertex1","textureUVNextVertex2"]}}vertex(t,e){const i=t.uv.divide(this.mosaicInfo.size),{position:s,animationPointer:o,evalParams:l,isOutline:p,unscaledDistanceToPx:h,vvScale:x,strokeWidth:c,scaleSymbolsProportionally:y,scale:f,isSDF:w,baseSize:g,clip:v}=this._vertexPreamble(t,t.angle,t.lineLength||new glsl/* Float */.nt(0)),b=this._toNdc(s);let _=K(o,enums_o.fromColor,l);_=new glsl/* Vec4 */.Zb(_.rgb.multiply(_.a),_.a);let z=K(o,enums_o.toColor,l);z=new glsl/* Vec4 */.Zb(z.rgb.multiply(z.a),z.a);let P=K(o,enums_o.colorMix,l);P=new glsl/* Vec4 */.Zb(P.rgb.multiply(P.a),P.a);const M=K(o,enums_o.toOpacity,l).a,N=K(o,enums_o.opacityMix,l).a,R=vvUtils_r(this,t.id,_,(0,glsl.or)((0,utils/* getBitBool */.K5)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),new glsl/* Bool */.x(p))),F=(0,glsl/* mix */.jh)(R,z,P),T=vvUtils_n(this,t.id),U=(0,glsl/* mix */.jh)(T,M,N),q=F.multiply(U),A=this.clip(t.id,t.zoomRange).add(v.multiply(2)),I=h.multiply(x);return{glPosition:new glsl/* Vec4 */.Zb(b,A,1),uv:i,color:q.multiply(new glsl/* Float */.nt(1).subtract(p)),outlineColor:q.multiply(p),distanceToPx:I,strokeWidth:c.multiply((0,glsl/* mix */.jh)(new glsl/* Float */.nt(1),f,y)),isOutline:p,isSDF:w,...this.maybeRunHittest(t,e,{pos:t.pos,size:g,sizeCorrection:new glsl/* Float */.nt(1),isMapAligned:new glsl/* Float */.nt(1),vvRotationMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),placementMat3:new glsl/* Mat3 */.U(1,0,0,0,1,0,0,0,1),outlineSize:new glsl/* Float */.nt(1),distanceToPx:I,isSDF:w})}}fragment(t){let e=this._getColor(t.uv,{color:t.color,distanceToPx:t.distanceToPx,isSDF:t.isSDF,outlineColor:t.outlineColor,outlineSize:t.strokeWidth});return animationDebugFlags/* animationDebugFlags */.H.spotlightAnimatedSymbols&&(e=e.add(new glsl/* Vec4 */.Zb(0,.3,0,.3))),this.getFragmentOutput(e,t)}hittest(t,e,i){return (0,glsl/* ifElse */.Tk)((0,glsl/* lessThan */.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_hittestSmallMarker(t,e,i){const{position:s,distance:o,smallSymbolDistance:l}=this.hittestRequest,r=o.subtract(l),{viewMat3:a,tileMat3:n}=this.view,d=a.multiply(n).multiply(new glsl/* Vec3 */.eB(i.pos,1)).xy,m=i.size.multiply(.5);return (0,glsl/* distance */.Io)(d,s).subtract(m).add(r)}_hittestMarker(t,e,i){const s=this._vertexPreamble({...t},t.angle,new glsl/* Float */.nt(0)).position,o=this._vertexPreamble({...t,offset:e.offsetNextVertex1},t.angle,new glsl/* Float */.nt(0)).position,l=this._vertexPreamble({...t,offset:e.offsetNextVertex2},t.angle,new glsl/* Float */.nt(0)).position,a=this.hittestRequest.position,n=this.hittestRequest.distance,d=P(a,s,o,l);return (0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(d,n),d,this._hittestSamples(s,o,l,t,e,i))}_hittestSamples(t,e,i,s,o,l){const{outlineSize:n,isSDF:d,distanceToPx:m}=l,u=this.hittestRequest.position,p=this.hittestRequest.distance,h=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),(0,glsl/* negate */.ze)(p))),t,e,i),x=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(0,(0,glsl/* negate */.ze)(p))),t,e,i),c=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,(0,glsl/* negate */.ze)(p))),t,e,i),y=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),0)),t,e,i),v=hittestUtils_h(u,t,e,i),S=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,0)),t,e,i),b=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(p),p)),t,e,i),_=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(0,p)),t,e,i),C=hittestUtils_h(u.add(new glsl/* Vec2 */.ZY(p,p)),t,e,i),V=s.uv.divide(this.mosaicInfo.size),z=o.textureUVNextVertex1.divide(this.mosaicInfo.size),k=o.textureUVNextVertex2.divide(this.mosaicInfo.size),j={color:new glsl/* Vec4 */.Zb(1,1,1,1),outlineSize:n,outlineColor:new glsl/* Vec4 */.Zb(1,1,1,1),isSDF:d,distanceToPx:m};let D=new glsl/* Float */.nt(0);return D=D.add(hittestUtils_g(h).multiply(this._getColor(U(h,V,z,k),j).a)),D=D.add(hittestUtils_g(x).multiply(this._getColor(U(x,V,z,k),j).a)),D=D.add(hittestUtils_g(c).multiply(this._getColor(U(c,V,z,k),j).a)),D=D.add(hittestUtils_g(y).multiply(this._getColor(U(y,V,z,k),j).a)),D=D.add(hittestUtils_g(v).multiply(this._getColor(U(v,V,z,k),j).a)),D=D.add(hittestUtils_g(S).multiply(this._getColor(U(S,V,z,k),j).a)),D=D.add(hittestUtils_g(b).multiply(this._getColor(U(b,V,z,k),j).a)),D=D.add(hittestUtils_g(_).multiply(this._getColor(U(_,V,z,k),j).a)),D=D.add(hittestUtils_g(C).multiply(this._getColor(U(C,V,z,k),j).a)),(0,glsl/* step */.PM)(D,new glsl/* Float */.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_R)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_F))],AnimatedMarkerShader_q.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AnimatedMarkerShader_T))],AnimatedMarkerShader_q.prototype,"fragment",null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/math/mat3.js
var mat3 = __webpack_require__(25423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/libs/gl-matrix-2/factories/mat3f32.js
var mat3f32 = __webpack_require__(99776);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/Technique.js
var Technique = __webpack_require__(17730);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class t extends Technique/* Technique */.j{constructor(){super(...arguments),this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL,this._input=null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils.js
var featureTechniqueUtils = __webpack_require__(43901);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedTechnique_l extends t{render(r,l){const{context:c,painter:f}=r,{target:g}=l,{freezeGlobalTime:p}=animationDebugFlags/* animationDebugFlags */.H,d=0,x=f.textureManager.animationStore.getTexture(c,d),h=[2/r.state.size[0],0,0,0,-2/r.state.size[1],0,-1,1,1],b=Array.from((0,mat3/* invert */.B8)((0,mat3f32/* create */.vt)(),h)),D=Array.from((0,mat3/* multiply */.lw)((0,mat3f32/* create */.vt)(),b,g.transforms.displayViewScreenMat3)),T=l.instance.getInput(),y=f.textureManager.getMosaicInfo(c,l.textureKey,!1),{optionalAttributes:z}=T,R=z.zoomRange,S=z.value1Position2Value2,j="accumulatedDistance"in z&&z.accumulatedDistance,A="segmentDirection"in z&&z.segmentDirection,I="normal"in z&&z.normal;f.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(r,l.target,T.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(r,l.target),mosaicInfo:y,animationInfo:{globalTime:!1===p?r.time/1e3:p,animationTextureSize:[x.descriptor.width,x.descriptor.height],animationTexture:{unit:6,texture:x},toScreen:D,toNdc:h,mapRotation:r.state.rotation,pixelRatio:r.state.pixelRatio},localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(l.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(r)},optionalAttributes:{zoomRange:R,value1Position2Value2:S,accumulatedDistance:j,segmentDirection:A,normal:I},useComputeBuffer:!0}),f.setPipelineState({...(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(r)}),f.submitDraw(r,l),!1===p&&g.requestRender()}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/animated/AnimatedTechniques.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class AnimatedTechniques_m extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedMarker,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER,this.shaders={geometry:new AnimatedMarkerShader_q}}}class AnimatedTechniques_n extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedMarkerShift,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER,this.shaders={geometry:new AnimatedMarkerShader_q}}}class a extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedFill,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL,this.shaders={geometry:new AnimatedFillShader_f}}}class AnimatedTechniques_h extends AnimatedTechnique_l{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.AnimatedLine,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE,this.shaders={geometry:new AnimatedLineShader_A}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityPointShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DotDensityPointShader_z extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec2 */.ZY)],DotDensityPointShader_z.prototype,"pos",void 0);class DotDensityPointShader_P extends AFeatureShader_P{}class DotDensityPointShader_R extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPointShader_R.prototype,"dotSize",void 0);class b extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],b.prototype,"locations",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],b.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],b.prototype,"tileZoomFactor",void 0);const DotDensityPointShader_F=1e-6;class C extends GraphShaderModule/* GraphShaderModule */.A{constructor(){super(...arguments),this.type="DotDensityPointShader"}vertex(t){const o=new glsl/* Mat3 */.U(1,0,0,0,-1,0,0,1,1).multiply(new glsl/* Vec3 */.eB(t.pos.xy.divide(definitions/* tileSize */.CQ),1)),i=(0,glsl/* texture2D */.US)(this.draw.locations,o.xy),s=(0,glsl/* max */.T9)(this.instance.dotSize.divide(2),new glsl/* Float */.nt(1));let r=new glsl/* Float */.nt(0);r=r.add((0,glsl/* step */.PM)(i.a,new glsl/* Float */.nt(DotDensityPointShader_F)).multiply(2));let d=s.add(this.instance.dotSize);const n=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.add(.5),1)),a=new glsl/* Vec4 */.Zb(n.xy,r,1),p=this.instance.dotSize.divide(d),h=new glsl/* Float */.nt(-1).divide(s.divide(d));return d=d.multiply(this.draw.pixelRatio.multiply(this.draw.tileZoomFactor)),{glPosition:a,glPointSize:d,color:i,ratio:p,invEdgeRatio:h}}fragment(t){const o=(0,glsl/* length */.Bw)(t.glPointCoord.subtract(.5)).multiply(2),e=(0,glsl/* smoothstep */.TF)(new glsl/* Float */.nt(0),new glsl/* Float */.nt(1),t.invEdgeRatio.multiply(o.subtract(t.ratio)).add(1)),i=new GraphShaderModule/* FragmentOutput */.mm;return i.fragColor=t.color.multiply(e),i}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(DotDensityPointShader_R)],C.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(b)],C.prototype,"draw",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(ViewInfo_d)],C.prototype,"view",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPointShader_z))],C.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPointShader_P))],C.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityPolygonShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DotDensityPolygonShader_j extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Float */.nt)],DotDensityPolygonShader_j.prototype,"inverseArea",void 0);class DotDensityPolygonShader_C extends (/* unused pure expression or super */ null && (A)){}class V extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,2))],V.prototype,"isActive",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,8))],V.prototype,"colors",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],V.prototype,"dotValue",void 0);class DotDensityPolygonShader_ extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],DotDensityPolygonShader_.prototype,"dotTexture0",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],DotDensityPolygonShader_.prototype,"dotTexture1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"tileZoomFactor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"pixelRatio",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],DotDensityPolygonShader_.prototype,"tileDotsOverArea",void 0);class DotDensityPolygonShader_F extends B{constructor(){super(...arguments),this.type="DotDensityPolygonShader"}_dotThreshold(t,e,o){return t.divide(e).divide(o)}vertex(t){const e=new glsl/* Mat3 */.U(2/definitions/* tileSize */.CQ,0,0,0,-2/definitions/* tileSize */.CQ,0,-1,1,1).multiply(new glsl/* Vec3 */.eB(t.pos,1)),s=this.clip(t.id),i=new glsl/* Vec4 */.Zb(e.xy,s,1),r=this.storage.getVVData(t.id).multiply(this.instance.isActive.get(0)).multiply(t.inverseArea),l=this.storage.getDataDrivenData0(t.id).multiply(this.instance.isActive.get(1)).multiply(t.inverseArea),d=this.draw.tileZoomFactor.multiply(definitions/* tileSize */.CQ).divide(this.draw.pixelRatio),n=this._dotThreshold(r,this.instance.dotValue,this.draw.tileDotsOverArea),c=this._dotThreshold(l,this.instance.dotValue,this.draw.tileDotsOverArea),u=t.pos.add(.5).divide(d);return{glPosition:i,color:new glsl/* Vec4 */.Zb(0,0,0,0),textureCoords:u,thresholds0:n,thresholds1:c}}fragment(t){const e=new GraphShaderModule/* FragmentOutput */.mm,o=(0,glsl/* texture2D */.US)(this.draw.dotTexture0,t.textureCoords),i=(0,glsl/* texture2D */.US)(this.draw.dotTexture1,t.textureCoords),r=t.thresholds0.subtract(o),l=t.thresholds1.subtract(i);let d;const n=glsl/* Mat4 */.$I.fromColumns(this.instance.colors[0],this.instance.colors[1],this.instance.colors[2],this.instance.colors[3]),a=glsl/* Mat4 */.$I.fromColumns(this.instance.colors[4],this.instance.colors[5],this.instance.colors[6],this.instance.colors[7]);if(this.blending){const t=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),r),e=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),l),o=(0,glsl/* dot */.Om)(t,r).add((0,glsl/* dot */.Om)(e,l)),s=(0,glsl/* step */.PM)(o,new glsl/* Float */.nt(0)),i=new glsl/* Float */.nt(1).subtract(s),p=o.add(s),h=r.multiply(t).divide(p),c=l.multiply(e).divide(p),u=n.multiply(h).add(a.multiply(c));d=i.multiply(u)}else{const t=(0,glsl/* max */.T9)((0,utils/* max4 */.xf)(r),(0,utils/* max4 */.xf)(l)),e=(0,glsl/* step */.PM)(t,new glsl/* Float */.nt(0)),o=new glsl/* Float */.nt(1).subtract(e),s=(0,glsl/* step */.PM)(t,r),i=(0,glsl/* step */.PM)(t,l),p=n.multiply(s).add(a.multiply(i));d=o.multiply(p)}return e.fragColor=d,e}hittest(t){return hittestUtils_q(this.hittestRequest)}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],DotDensityPolygonShader_F.prototype,"blending",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(V)],DotDensityPolygonShader_F.prototype,"instance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(DotDensityPolygonShader_)],DotDensityPolygonShader_F.prototype,"draw",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(DotDensityPolygonShader_j))],DotDensityPolygonShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(AFeatureShader_P))],DotDensityPolygonShader_F.prototype,"fragment",null);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/meshing/SimpleMesh.js
var SimpleMesh = __webpack_require__(2019);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(17050);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const DotDensityResources_p={pos:{count:2,type:webgl_enums/* DataType */.pe.UNSIGNED_SHORT}};class DotDensityResources_f{constructor(){this._dotTextureSize=0,this._dotTextures=null,this._dotMesh=null}destroy(){this._disposeTextures(),this._dotFBO&&this._dotFBO.dispose(),this._dotMesh&&this._dotMesh.destroy()}getFBO(t){if(null==this._dotFBO){const s=definitions/* tileSize */.CQ,n=definitions/* tileSize */.CQ,h=new TextureDescriptor/* TextureDescriptor */.R(s,n);h.samplingMode=webgl_enums/* TextureSamplingMode */.Cj.NEAREST,h.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const d=new Renderbuffer/* Renderbuffer */.l(t,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,s,n));this._dotFBO=new FramebufferObject/* FramebufferObject */.H(t,h,d)}return this._dotFBO}getDotDensityMesh(t){if(null==this._dotMesh){const o=definitions/* tileSize */.CQ,r=o*o,i=2,n=new Int16Array(r*i);for(let t=0;t<o;t++)for(let e=0;e<o;e++)n[i*(e+t*o)]=e,n[i*(e+t*o)+1]=t;this._dotMesh=SimpleMesh/* SimpleMesh */.g.create(t,{primitive:webgl_enums/* PrimitiveType */.WR.POINTS,vertex:n,count:r,layout:DotDensityResources_p})}return this._dotMesh}getDotDensityTextures(e,s,o){if(this._dotTextureSize===s&&this._seed===o||(this._disposeTextures(),this._dotTextureSize=s,this._seed=o),null===this._dotTextures){const r=new RandomLCG/* default */.A(o);this._dotTextures=[this._allocDotDensityTexture(e,s,r),this._allocDotDensityTexture(e,s,r)]}return this._dotTextures}_disposeTextures(){if(this._dotTextures){for(let t=0;t<this._dotTextures.length;t++)this._dotTextures[t].dispose();this._dotTextures=null}}_allocDotDensityTexture(t,e,s){const r=new Float32Array(e*e*4);for(let o=0;o<r.length;o++)r[o]=s.getFloat();const i=new TextureDescriptor/* TextureDescriptor */.R;return i.dataType=webgl_enums/* PixelType */.ld.FLOAT,i.samplingMode=webgl_enums/* TextureSamplingMode */.Cj.NEAREST,i.width=e,i.height=e,new Texture/* Texture */.g(t,i,r)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/dotDensity/DotDensityTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class w extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.DotDensity,this.shaders={polygon:new DotDensityPolygonShader_F,point:new C,fill:new x},this._resources=new Map}render(e,t){(0,featureTechniqueUtils/* isHighlight */.dJ)(e)||(0,featureTechniqueUtils/* isHittest */.Eq)(e)?this._renderPolygons(e,t):this._renderDotDensity(e,t)}_renderPolygons(e,t){const{painter:i}=e;i.setShader({shader:this.shaders.fill,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),visualVariableColor:null,visualVariableOpacity:null},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:{zoomRange:!1},useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),i.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),i.submitDraw(e,t)}_renderDotDensity(o,r){const{context:s,painter:u,requiredLevel:c}=o,p=r.instance.getInput().uniforms,h=this._getOrCreateResourcesRecord(s),m=h.getDotDensityTextures(s,definitions/* tileSize */.CQ,p.seed),w=1/2**(c-r.target.key.level),g=definitions/* tileSize */.CQ,x=g*window.devicePixelRatio*g*window.devicePixelRatio,D=1/w*(1/w),y=p.dotScale?o.state.scale/p.dotScale:1,b=p.dotValue*y*D;u.setShader({shader:this.shaders.polygon,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(o,r.target),instance:{isActive:p.isActive,colors:p.colors,dotValue:Math.max(1,b)},draw:{dotTexture0:{unit:definitions/* textureBindingRenderer0 */.Cp,texture:m[0]},dotTexture1:{unit:definitions/* textureBindingRenderer1 */.vN,texture:m[1]},tileZoomFactor:w,pixelRatio:window.devicePixelRatio,tileDotsOverArea:x/(definitions/* tileSize */.CQ*window.devicePixelRatio*definitions/* tileSize */.CQ*window.devicePixelRatio)}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(o),blending:p.blending},optionalAttributes:{},useComputeBuffer:!1});const R=s.getViewport();s.setViewport(0,0,definitions/* tileSize */.CQ,definitions/* tileSize */.CQ);const v=s.getBoundFramebufferObject(),P=h.getFBO(s);s.bindFramebuffer(P),s.setClearColor(0,0,0,0),s.clear(webgl_enums/* FramebufferBit */.NV.COLOR),u.setPipelineState({color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1}),u.updatePipelineState(s),u.submitDraw(o,r),s.bindFramebuffer(v),s.setViewport(R.x,R.y,R.width,R.height);const S=h.getFBO(s).colorTexture,_={shader:this.shaders.point,uniforms:{view:(0,featureTechniqueUtils/* getViewUniforms */.L4)(o,r.target),instance:{dotSize:p.dotSize},draw:{locations:{unit:definitions/* textureBindingRenderer0 */.Cp,texture:S},tileZoomFactor:1,pixelRatio:window.devicePixelRatio}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(o)},optionalAttributes:{},useComputeBuffer:!1};u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(o)),u.submitDrawMesh(s,_,h.getDotDensityMesh(s))}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e)}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new DotDensityResources_f,this._resources.set(e,t)),t}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.ComplexFill,this.shaders={geometry:new _}}render(e,n){const{context:u,painter:m}=e,p=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(n.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/utils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function utils_n(n){const t=1/n;return{antialiasing:t,blur:0+t}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/OutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OutlineFillShader_R extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],OutlineFillShader_R.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"normal",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],OutlineFillShader_R.prototype,"halfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],OutlineFillShader_R.prototype,"referenceHalfWidth",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],OutlineFillShader_R.prototype,"zoomRange",void 0);class OutlineFillShader_A extends LineShader_A{}function OutlineFillShader_H(t,o,i){const{id:e,bitset:r}=o,s=(0,utils/* getBit */.mh)(r,constants/* bitsetTypeFillOutline */.Xx),m=(0,glsl/* greaterThan */.MM)(s,new glsl/* Float */.nt(.5)),d=LineShader_L(t,o),c=(0,glsl/* ifElse */.Tk)(m,d.halfWidth,new glsl/* Float */.nt(0)),f=vvUtils_n(t,e),v=vvUtils_r(t,e,o.color),V=(0,glsl/* ifElse */.Tk)(m,(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(r,constants/* bitsetOutlineUsesColorVV */.bB),v,o.color),v.multiply(f)),S=t.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(o.pos.xy,1)),j=t.clip(o.id),x=new glsl/* Vec4 */.Zb(S.xy,j,1),z=(0,glsl/* ifElse */.Tk)(m,d.glPosition,x),M=i&&t.maybeRunHittest(o,i,m);return{isOutline:s,color:V,opacity:new glsl/* Float */.nt(1),halfWidth:c,normal:d.normal,glPosition:z,...M}}class OutlineFillShader_k extends B{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(F)],OutlineFillShader_k.prototype,"antialiasingControls",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],OutlineFillShader_k.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],OutlineFillShader_k.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],OutlineFillShader_k.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],OutlineFillShader_k.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],OutlineFillShader_k.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],OutlineFillShader_k.prototype,"visualVariableSizeUnitValue",void 0);class OutlineFillShader_q extends OutlineFillShader_k{constructor(){super(...arguments),this.type="OutlineFillShader"}vertex(t,o){return OutlineFillShader_H(this,t,o)}fragment(t){const{color:o,isOutline:i}=t,e=(0,glsl/* greaterThan */.MM)(i,new glsl/* Float */.nt(.5)),r=T(t,this.antialiasingControls.blur),s=(0,glsl/* ifElse */.Tk)(e,r,o),n=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(s,t,n)}hittest(t,o,i){return (0,glsl/* ifElse */.Tk)(i,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(OutlineFillShader_R)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],OutlineFillShader_q.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(OutlineFillShader_A))],OutlineFillShader_q.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/PatternFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternFillShader_w extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],PatternFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],PatternFillShader_w.prototype,"inverseRasterizationScale",void 0);class PatternFillShader_g extends AFeatureShader_P{}function PatternFillShader_j(t){const e=new glsl/* Float */.nt(1),r=new glsl/* Float */.nt(0);return new glsl/* Mat3 */.U(e.divide(t.x),r.divide(t.y),0,(0,glsl/* negate */.ze)(r.divide(t.x)),e.divide(t.y),0,0,0,1)}function O(t,e){const r=e.tlbr.xy,o=e.tlbr.zw,i=o.x.subtract(r.x),s=r.y.subtract(o.y),a=new glsl/* Vec2 */.ZY(i,s).multiply(e.inverseRasterizationScale),p=a.multiply(t.view.requiredZoomFactor),u=PatternFillShader_j(p),c=t.localTileOffset.getPatternOffsetAtTileOrigin(a).divide(p),d=new glsl/* Vec3 */.eB(e.pos,1);return{tileTextureCoord:u.multiply(d).xy.subtract(c),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function PatternFillShader_S(t,e){const r=(0,glsl/* mod */.zi)(t.tileTextureCoord,new glsl/* Float */.nt(1)),o=(0,glsl/* mix */.jh)(t.tlbr.xy,t.tlbr.zw,r),i=(0,glsl/* texture2D */.US)(e.texture,o);return t.color.multiply(i)}class PatternFillShader_T extends x{constructor(){super(...arguments),this.type="PatternFillShader"}vertex(t,e){return{...super.vertex(t,e),...O(this,t)}}fragment(t){const e=PatternFillShader_S(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],PatternFillShader_T.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],PatternFillShader_T.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],PatternFillShader_T.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternFillShader_g))],PatternFillShader_T.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/PatternOutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class y extends OutlineFillShader_R{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec4 */.Zb)],y.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],y.prototype,"inverseRasterizationScale",void 0);class PatternOutlineFillShader_S extends OutlineFillShader_A{}class PatternOutlineFillShader_x extends OutlineFillShader_q{constructor(){super(...arguments),this.type="PatternOutlineFillShader"}vertex(t,r){return{...OutlineFillShader_H(this,t,r),...O(this,t)}}fragment(t){const{isOutline:r}=t,e=(0,glsl/* greaterThan */.MM)(r,new glsl/* Float */.nt(.5)),o=T(t,this.antialiasingControls.blur),s=PatternFillShader_S(t,this.mosaicInfo),n=(0,glsl/* ifElse */.Tk)(e,o,s),p=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(n,t,p)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],PatternOutlineFillShader_x.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],PatternOutlineFillShader_x.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(y)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],PatternOutlineFillShader_x.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(PatternOutlineFillShader_S))],PatternOutlineFillShader_x.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/ComplexOutlineFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const ComplexOutlineFillShader_b=1/constants/* packPrecision */.cZ;class ComplexOutlineFillShader_w extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],ComplexOutlineFillShader_w.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],ComplexOutlineFillShader_w.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"angle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"aux1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],ComplexOutlineFillShader_w.prototype,"aux2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"aux3",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"aux4",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],ComplexOutlineFillShader_w.prototype,"zoomRange",void 0);class ComplexOutlineFillShader_C extends PatternOutlineFillShader_S{}class ComplexOutlineFillShader_R extends OutlineFillShader_k{constructor(){super(...arguments),this.type="ComplexOutlineFillShader"}vertex(t,o){const{aux1:e,aux2:r,aux3:i,aux4:p}=t,a={...t,width:e,height:r,offset:i,scale:p.multiply(ComplexOutlineFillShader_b)},n={...t,halfWidth:e,referenceHalfWidth:r,offset:i,normal:p.subtract(constants/* signedToUnsignedByte */.v9).multiply(ComplexOutlineFillShader_b)},m=OutlineFillShader_H(this,n),u=ComplexFillShader_P(this,a),f=(0,glsl/* greaterThan */.MM)(m.isOutline,new glsl/* Float */.nt(.5));return{...m,...u,...this.maybeRunHittest(t,o,f)}}fragment(t){const{isOutline:o}=t,e=(0,glsl/* greaterThan */.MM)(o,new glsl/* Float */.nt(.5)),r=T(t,this.antialiasingControls.blur),i=Z(this,t),a=(0,glsl/* ifElse */.Tk)(e,r,i),n=(0,glsl/* ifElse */.Tk)(e,new glsl/* Float */.nt(1/255),new glsl/* Float */.nt(0));return this.getFragmentOutput(a,t,n)}hittest(t,o,e){return (0,glsl/* ifElse */.Tk)(e,hittestUtils_q(this.hittestRequest),z(this,t,o))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],ComplexOutlineFillShader_R.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(n)],ComplexOutlineFillShader_R.prototype,"localTileOffset",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexOutlineFillShader_w)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],ComplexOutlineFillShader_R.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(ComplexOutlineFillShader_C))],ComplexOutlineFillShader_R.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/ComplexOutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ComplexOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.ComplexOutlineFill,this.shaders={geometry:new ComplexOutlineFillShader_R}}render(e,a){const{context:u,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(u,a.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(a.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,a)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/FillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Fill,this.shaders={geometry:new x}}render(e,n){const{painter:a}=e,u=n.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target)},defines:(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),a.submitDraw(e,n)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/gradientFillConstants.js
var gradientFillConstants = __webpack_require__(5062);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GradientFillShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientFillShader_P extends FillShader_g{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec4 */.Zb)],GradientFillShader_P.prototype,"tlbr",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],GradientFillShader_P.prototype,"relativePosition",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Float */.nt)],GradientFillShader_P.prototype,"gradientMethod",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec2 */.ZY)],GradientFillShader_P.prototype,"relativeGradientSize",void 0);class D extends AFeatureShader_P{}class GradientFillShader_A extends x{constructor(){super(...arguments),this.type="GradientFillShader"}vertex(t,e){const{tlbr:i,relativePosition:r,gradientMethod:o,relativeGradientSize:n}=t,d=(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(t.bitset,gradientFillConstants/* bitset */.Q.isAbsolute),this.view.displayZoomFactor,new glsl/* Float */.nt(1));return{...super.vertex(t,e),tlbr:i,relativePosition:r,gradientMethod:o,gradientSize:n.multiply(d),isDiscrete:(0,utils/* getBit */.mh)(t.bitset,gradientFillConstants/* bitset */.Q.isDiscrete)}}fragment(t){const{tlbr:e,relativePosition:i,gradientMethod:r,gradientSize:o,isDiscrete:g}=t,w=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(g,new glsl/* Float */.nt(.5)),o.subtract(1),new glsl/* Vec2 */.ZY(0)),b=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)(r,new glsl/* Float */.nt(gradientFillConstants/* gradientFillMethods */.m.rectangular)),()=>{const t=(0,glsl/* abs */.tn)(i).add(w).divide(o);return (0,utils/* oneMinus */.zb)((0,glsl/* max */.T9)(t.x,t.y))}],[(0,glsl/* equal */.LC)(r,new glsl/* Float */.nt(gradientFillConstants/* gradientFillMethods */.m.circular)),(0,utils/* oneMinus */.zb)((0,glsl/* sqrt */.RZ)((0,glsl/* dot */.Om)(i,i)).add(w.x).divide(o.x))],[!0,(0,utils/* oneMinus */.zb)(i.x.add(w.x).divide(o.x))]),j=new glsl/* Vec2 */.ZY((0,glsl/* clamp */.qE)(b,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),.5),S=(0,glsl/* mix */.jh)(e.xy,e.zw,j).divide(this.mosaicInfo.size),z=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,S),F=t.color.a;return this.getFragmentOutput(z.multiply(F),t,new glsl/* Float */.nt(0))}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],GradientFillShader_A.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(GradientFillShader_P)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],GradientFillShader_A.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(D))],GradientFillShader_A.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/GradientFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientFillTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.GradientFill,this.shaders={geometry:new GradientFillShader_A},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.FILL}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/OutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OutlineFillTechnique_l extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.OutlineFill,this.shaders={geometry:new OutlineFillShader_q}}render(e,n){const{painter:u,pixelRatio:l}=e,m=n.instance.getInput();u.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,m.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),antialiasingControls:utils_n(l)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:m.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),u.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PatternFill,this.shaders={geometry:new PatternFillShader_T}}render(e,n){const{context:u,painter:m}=e,f=n.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,n.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n.target),mosaicInfo:m.textureManager.getMosaicInfo(u,n.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(n.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,n)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/fill/PatternOutlineFillTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PatternOutlineFillTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PatternOutlineFill,this.shaders={geometry:new PatternOutlineFillShader_x}}render(e,a){const{context:l,painter:m,pixelRatio:p}=e,f=a.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,a.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,a.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(l,a.textureKey),localTileOffset:(0,featureTechniqueUtils/* getLocalTileOffset */.Pr)(a.target)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,a)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
;// ../node_modules/@arcgis/core/views/webgl/heatmapTextureUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class heatmapTextureUtils_l{constructor(e,t,r,o){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=o}}function heatmapTextureUtils_n(n,i){const{textureFloatLinear:s,colorBufferFloat:f}=n.capabilities,u=f?.textureFloat,_=f?.textureHalfFloat,c=f?.floatBlend,m=n.driverTest.floatBufferBlend.result;if(!u&&!_)throw new core_Error/* default */.A("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(c&&m||_))throw new core_Error/* default */.A("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(m?"":" This device claims support for EXT_float_blend, but does not actually support it."));const p=u&&c&&m,d=_,R=s,h=!!f?.R32F,b=!!f?.R16F;if(p&&R)return R||i.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.FLOAT,R?webgl_enums/* TextureSamplingMode */.Cj.LINEAR:webgl_enums/* TextureSamplingMode */.Cj.NEAREST,h?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,h?webgl_enums/* SizedPixelFormat */.H0.R32F:webgl_enums/* PixelFormat */.Ab.RGBA);if(d)return new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.HALF_FLOAT,webgl_enums/* TextureSamplingMode */.Cj.LINEAR,b?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,b?webgl_enums/* SizedPixelFormat */.H0.R16F:webgl_enums/* PixelFormat */.Ab.RGBA);throw new core_Error/* default */.A("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}const i=new heatmapTextureUtils_l(webgl_enums/* PixelType */.ld.HALF_FLOAT,webgl_enums/* TextureSamplingMode */.Cj.NEAREST,webgl_enums/* PixelFormat */.Ab.RGBA,webgl_enums/* PixelFormat */.Ab.RGBA);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapResources.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const HeatmapResources_m=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.heatmap.HeatmapResources");class HeatmapResources_f{destroy(){this._accumulateFramebuffer=(0,maybe/* disposeMaybe */.WD)(this._accumulateFramebuffer),this._resolveGradientTexture=(0,maybe/* disposeMaybe */.WD)(this._resolveGradientTexture),this._prevGradientHash=null,this._qualityProfile=null}get initialized(){return null!=this._accumulateFramebuffer&&null!=this._resolveGradientTexture}get accumulateFramebuffer(){return this._accumulateFramebuffer}get resolveGradientTexture(){return this._resolveGradientTexture}loadQualityProfile(e){if(null==this._qualityProfile){const r=heatmapTextureUtils_n(e,HeatmapResources_m());this._qualityProfile={...r,defines:{usesHalfFloatPrecision:r.dataType!==webgl_enums/* PixelType */.ld.FLOAT}}}return this._qualityProfile}ensureAccumulateFBO(e,r,t){if(null==this._accumulateFramebuffer){const{dataType:u,samplingMode:o,pixelFormat:m,internalFormat:f}=this.loadQualityProfile(e),h=new TextureDescriptor/* TextureDescriptor */.R(r,t);h.pixelFormat=m,h.internalFormat=f,h.dataType=u,h.samplingMode=o,h.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const c=new RenderbufferDescriptor/* RenderbufferDescriptor */.q(webgl_enums/* SizedDepthStencilFormat */.iE.DEPTH24_STENCIL8,r,t);this._accumulateFramebuffer=new FramebufferObject/* FramebufferObject */.H(e,h,c)}else{const{width:e,height:a}=this._accumulateFramebuffer;e===r&&a===t||this._accumulateFramebuffer.resize(r,t)}return this._accumulateFramebuffer}ensureResolveGradientTexture(e,r,t){if(null==this._resolveGradientTexture){const r=new TextureDescriptor/* TextureDescriptor */.R;r.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._resolveGradientTexture=new Texture/* Texture */.g(e,r),this._prevGradientHash=null}return this._prevGradientHash!==r&&(this._resolveGradientTexture.resize(t.length/4,1),this._resolveGradientTexture.setData(t),this._prevGradientHash=r),this._resolveGradientTexture}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/heatmapUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function heatmapUtils_n(n){return n?.25:1}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/HeatmapAccumulateShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapAccumulateShader_v extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],HeatmapAccumulateShader_v.prototype,"offset",void 0);class HeatmapAccumulateShader_x extends AFeatureShader_P{}class HeatmapAccumulateShader_g extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapAccumulateShader_g.prototype,"radius",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapAccumulateShader_g.prototype,"isFieldActive",void 0);class HeatmapAccumulateShader_F extends B{constructor(){super(...arguments),this.type="HeatmapAccumulateShader",this.usesHalfFloatPrecision=!1}vertex(t){const{radius:e,isFieldActive:s}=this.kernelControls,i=t.offset,l=s.multiply(this.storage.getVVData(t.id).x).add(new glsl/* Float */.nt(1).subtract(s)),o=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos,1)).add(this.view.displayViewMat3.multiply(new glsl/* Vec3 */.eB(i,0)).multiply(e)),r=this.clip(t.id);return{glPosition:new glsl/* Vec4 */.Zb(o.xy,r,1),offset:i,fieldValue:l,color:new glsl/* Vec4 */.Zb(0),...this.maybeRunHittest(t,{},null)}}fragment(t){const{offset:e,fieldValue:s}=t,i=(0,glsl/* length */.Bw)(e),l=(0,glsl/* step */.PM)(i,new glsl/* Float */.nt(1)),o=new glsl/* Float */.nt(1).subtract(i.multiply(i)),r=o.multiply(o),p=l.multiply(r).multiply(s).multiply(new glsl/* Float */.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));return this.getFragmentOutput(new glsl/* Vec4 */.Zb(p),t)}hittest(t){const{viewMat3:e,tileMat3:s}=this.view,i=e.multiply(s).multiply(new glsl/* Vec3 */.eB(t.pos,1));return R(i.xy,this.kernelControls.radius,this.hittestRequest.position)}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],HeatmapAccumulateShader_F.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapAccumulateShader_g)],HeatmapAccumulateShader_F.prototype,"kernelControls",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapAccumulateShader_v))],HeatmapAccumulateShader_F.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapAccumulateShader_x))],HeatmapAccumulateShader_F.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/HeatmapResolveShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapResolveShader_g extends GraphShaderModule/* VertexInput */.ZA{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(0,glsl/* Vec2 */.ZY)],HeatmapResolveShader_g.prototype,"position",void 0);class HeatmapResolveShader_f extends GraphShaderModule/* FragmentInput */.HS{}class HeatmapResolveShader_h extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],HeatmapResolveShader_h.prototype,"texture",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Vec2 */.ZY)],HeatmapResolveShader_h.prototype,"minAndInvRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],HeatmapResolveShader_h.prototype,"normalization",void 0);class HeatmapResolveShader_w extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Sampler2D */.z7)],HeatmapResolveShader_w.prototype,"texture",void 0);class HeatmapResolveShader_b extends GraphShaderModule/* GraphShaderModule */.A{constructor(){super(...arguments),this.type="HeatmapResolveShader",this.usesHalfFloatPrecision=!1}vertex(t){return{glPosition:new glsl/* Vec4 */.Zb(t.position.multiply(2).subtract(1),1,1),uv:t.position}}fragment(t){const{accumulatedDensity:e,gradient:o}=this;let r=(0,glsl/* texture2D */.US)(e.texture,t.uv).r.divide(new glsl/* Float */.nt(heatmapUtils_n(this.usesHalfFloatPrecision)));r=r.multiply(e.normalization),r=r.subtract(e.minAndInvRange.x).multiply(e.minAndInvRange.y);const i=(0,glsl/* texture2D */.US)(o.texture,new glsl/* Vec2 */.ZY(r,.5)),n=new GraphShaderModule/* FragmentOutput */.mm;return n.fragColor=new glsl/* Vec4 */.Zb(i.rgb.multiply(i.a),i.a),n}}(0,tslib_es6._)([GraphShaderModule/* define */.E8],HeatmapResolveShader_b.prototype,"usesHalfFloatPrecision",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapResolveShader_h)],HeatmapResolveShader_b.prototype,"accumulatedDensity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(HeatmapResolveShader_w)],HeatmapResolveShader_b.prototype,"gradient",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapResolveShader_g))],HeatmapResolveShader_b.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(HeatmapResolveShader_f))],HeatmapResolveShader_b.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/heatmap/HeatmapTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class HeatmapTechnique_h extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Heatmap,this.drawPhase=enums/* WGLDrawPhase */.S5.MAP|enums/* WGLDrawPhase */.S5.HITTEST|enums/* WGLDrawPhase */.S5.DEBUG,this.shaders={accumulate:new HeatmapAccumulateShader_F,resolve:new HeatmapResolveShader_b},this._isBound=!1,this._resources=new Map}shutdown(e){super.shutdown(e),this._resources.get(e)?.destroy(),this._resources.delete(e),this._prevFBO=null,this._unbind()}render(e,t){const{context:n,painter:o,state:u}=e,a=t.instance.getInput(),{isFieldActive:l}=a.uniforms,d=this._getOrCreateResourcesRecord(n),c=d.loadQualityProfile(n);(0,featureTechniqueUtils/* isHittest */.Eq)(e)||this._bind(e,d,a),o.setShader({shader:this.shaders.accumulate,uniforms:{...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),kernelControls:{radius:HeatmapTechnique_b(a,u),isFieldActive:l?1:0}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),...c.defines},optionalAttributes:{},useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)});const h=(0,featureTechniqueUtils/* isHittest */.Eq)(e)?HeatmapTechnique_:HeatmapTechnique_f;o.setPipelineState(h),o.submitDraw(e,t)}getStencilReference(e){return HeatmapTechnique_m(e)}renderResolvePass(e,t){if((0,featureTechniqueUtils/* isHittest */.Eq)(e))return;const{context:s,painter:i}=e,n=this._resources.get(s);if(null==this._prevFBO||null==this._prevViewport||!n?.initialized)return;const{defines:o}=n.loadQualityProfile(s),{minDensity:u,maxDensity:a,radius:l}=t.getInput().uniforms,d=8,c=9,h=n.accumulateFramebuffer,p=n.resolveGradientTexture,m={shader:this.shaders.resolve,uniforms:{accumulatedDensity:{texture:{unit:d,texture:h.colorTexture},minAndInvRange:[u,1/(a-u)],normalization:3/(l*l*Math.PI)},gradient:{texture:{unit:c,texture:p}}},defines:o,optionalAttributes:{},useComputeBuffer:!1};s.bindFramebuffer(this._prevFBO),s.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),s.bindTexture(h.colorTexture,d),s.bindTexture(p,c),i.setPipelineState(HeatmapTechnique_w),i.submitDrawMesh(s,m,i.quadMesh),this._unbind()}_getOrCreateResourcesRecord(e){let t=this._resources.get(e);return null==t&&(t=new HeatmapResources_f,this._resources.set(e,t)),t}_unbind(){this._prevFBO=null,this._prevViewport=null,this._isBound=!1}_bind(e,t,r){if(this._isBound)return;const{context:s,state:i,pixelRatio:n}=e,o=s.getBoundFramebufferObject(),u=s.getViewport();this._prevFBO=o,this._prevViewport=u;const{gradient:a,gradientHash:l}=r.uniforms;t.ensureResolveGradientTexture(s,l,a);const{width:d,height:h}=u,m=HeatmapTechnique_p(HeatmapTechnique_b(r,i),n),f=d*m,_=h*m,w=t.ensureAccumulateFBO(s,f,_);s.blitFramebuffer(o,w,webgl_enums/* FramebufferBit */.NV.STENCIL),s.bindFramebuffer(w),s.setViewport(0,0,w.width,w.height),s.setColorMask(!0,!0,!0,!0),s.setClearColor(0,0,0,0),s.clear(webgl_enums/* FramebufferBit */.NV.COLOR),this._isBound=!0}}function HeatmapTechnique_p(e,t){const r=t>1.5?.25:.5;return e<1/(2*r)?1:r}function HeatmapTechnique_m(e){return e.key.level+1}const HeatmapTechnique_f={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:{write:!1,test:{ref:HeatmapTechnique_m,compare:webgl_enums/* CompareFunction */.MT.GEQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.REPLACE}}}},HeatmapTechnique_={...HeatmapTechnique_f,stencil:!1},HeatmapTechnique_w={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:!1};function HeatmapTechnique_b(e,t){const{referenceScale:r,radius:s}=e.uniforms;return s*(0!==r?r/t.scale:1)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TextShader_J=360/254;var TextShader_K;!function(t){t[t.Color=0]="Color",t[t.Outline=1]="Outline",t[t.Halo=2]="Halo"}(TextShader_K||(TextShader_K={}));class Q extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],Q.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec2 */.ZY)],Q.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],Q.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],Q.prototype,"fontAndReferenceSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec4 */.Zb)],Q.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Vec4 */.Zb)],Q.prototype,"haloColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Vec2 */.ZY)],Q.prototype,"outlineAndHaloSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],Q.prototype,"zoomRange",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],Q.prototype,"clipAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec4 */.Zb)],Q.prototype,"referenceSymbol",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(15,glsl/* Float */.nt)],Q.prototype,"visibility",void 0);class X extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],X.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],X.prototype,"offsetNextVertex2",void 0);class Y extends AFeatureShader_P{}class $ extends B{constructor(){super(...arguments),this.type="TextShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"]},this.textRenderPassType=TextShader_K.Color,this.isBackgroundPass=!1,this.isLabel=!1}clipLabel(t,e){const{clipAngle:o,zoomRange:s,visibility:l}=t,a=o.multiply(TextShader_J),r=(0,glsl/* abs */.tn)(this.view.rotation.subtract(a)),n=(0,glsl/* min */.jk)(new glsl/* Float */.nt(360).subtract(r),r);let d=new glsl/* Float */.nt(0);const f=(0,glsl/* floor */.RI)(this.view.currentZoom.multiply(definitions/* minMaxZoomPrecisionFactor */.fq)).divide(definitions/* minMaxZoomPrecisionFactor */.fq),h=s.x,v=s.y,w=new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(h,f)).multiply(2),x=(0,glsl/* step */.PM)(new glsl/* Float */.nt(90),n).multiply(2),b=new glsl/* Float */.nt(2).multiply(new glsl/* Float */.nt(1).subtract((0,glsl/* step */.PM)(f,v)));return d=d.add(e.multiply(w)),d=d.add(e.multiply(x)),d=d.add(b),l&&(d=d.add(l)),d}vertex(t,e){const i=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetTextIsBackground */.bg),s=new glsl/* Float */.nt(1).subtract(i);let l=t.fontAndReferenceSize[0];const a=t.fontAndReferenceSize[1];let r=l.divide(constants/* sdfFontSize */.au);const n=this.textRenderPassType===TextShader_K.Outline?t.outlineColor:this.textRenderPassType===TextShader_K.Halo?t.haloColor:this._getVertexColor(t),d=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos,1));let p=t.offset,u=new glsl/* Float */.nt(1),m=glsl/* Mat3 */.U.identity(),c=new glsl/* Vec2 */.ZY(0);if(this.isLabel){if(!t.referenceSymbol)throw new Error("InternalError: Optional attribute 'referenceSymbol' expected for labels");const e=t.referenceSymbol,i=e.xy,s=e.z,l=this._unpackDirection(e.w),a=vvUtils_l(this,t.id,s).divide(2),r=l.multiply(a.add(definitions/* labelPlacementOffsetPadding */.C2));c=i.add(r),p=p.add(c)}else{u=vvUtils_l(this,t.id,a).divide(a),l=l.multiply(u),r=r.multiply(u),p=p.multiply(u),m=vvUtils_u(this,t.id),p=m.multiply(new glsl/* Vec3 */.eB(p,0)).xy}const g=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetTextIsMapAligned */.ti),z=this._getViewRotationMatrix(g).multiply(new glsl/* Vec3 */.eB(p,0));let R=this.isLabel?this.clipLabel(t,g):this.clip(t.id,t.zoomRange);R=this.isBackgroundPass?R.add(s.multiply(2)):R.add(i.multiply(2));let j=new glsl/* Float */.nt(0);if(this.textRenderPassType===TextShader_K.Outline){R=R.add((0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(t.outlineAndHaloSize.x,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0)));j=new glsl/* Float */.nt(t.outlineAndHaloSize.x).divide(r).divide(constants/* maxSdfDistance */.$w)}if(this.textRenderPassType===TextShader_K.Halo){const e=t.outlineAndHaloSize.x,i=new glsl/* Float */.nt(t.outlineAndHaloSize.y);R=R.add((0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(i,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2),new glsl/* Float */.nt(0)));j=i.add(e).divide(r).divide(constants/* maxSdfDistance */.$w)}const C=this.isLabel?(0,glsl/* greaterThan */.MM)(R,new glsl/* Float */.nt(1)):new glsl/* Bool */.x(!1);return{glPosition:new glsl/* Vec4 */.Zb(d.xy.add(z.xy),R,1),color:n,size:r,textureUV:t.textureUV.divide(this.mosaicInfo.size),antialiasingWidth:new glsl/* Float */.nt(.105*constants/* sdfFontSize */.au).divide(l).divide(this.view.pixelRatio),outlineDistanceOffset:j,...this.maybeRunHittest(t,e,{vvSizeAdjustment:u,vvRotation:m,labelOffset:c,labelClipped:C})}}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}fragment(t){const e=new glsl/* Float */.nt(2/8),i=new glsl/* Float */.nt(1).subtract(e),o=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t.textureUV).a;let s=i.subtract(t.outlineDistanceOffset);this.highlight&&(s=s.divide(2));const l=t.antialiasingWidth,a=(0,glsl/* smoothstep */.TF)(s.subtract(l),s.add(l),o);return this.getFragmentOutput(t.color.multiply(a),t)}hittest(t,e,{vvSizeAdjustment:i,vvRotation:o,labelOffset:s,labelClipped:l}){let a,r,n;this.isLabel?(a=new glsl/* Vec3 */.eB(t.offset.add(s),0),r=new glsl/* Vec3 */.eB(e.offsetNextVertex1.add(s),0),n=new glsl/* Vec3 */.eB(e.offsetNextVertex2.add(s),0)):(a=o.multiply(new glsl/* Vec3 */.eB(t.offset.multiply(i),0)),r=o.multiply(new glsl/* Vec3 */.eB(e.offsetNextVertex1.multiply(i),0)),n=o.multiply(new glsl/* Vec3 */.eB(e.offsetNextVertex2.multiply(i),0)));const{viewMat3:d,tileMat3:p}=this.view,u=d.multiply(p).multiply(new glsl/* Vec3 */.eB(t.pos,1)),y=u.add(p.multiply(a)).xy,m=u.add(p.multiply(r)).xy,c=u.add(p.multiply(n)).xy,h=P(this.hittestRequest.position,y.xy,m.xy,c.xy);return this.isLabel?(0,glsl/* ifElse */.Tk)(l,hittestUtils_q(this.hittestRequest),h):h}_unpackDirection(t){const e=new glsl/* Int */.Ai(t),i=(0,glsl/* bitRShift */.Sj)(e,new glsl/* Int */.Ai(2)),o=(0,glsl/* bitAnd */.nf)(e,new glsl/* Int */.Ai(3));return new glsl/* Vec2 */.ZY(new glsl/* Float */.nt(i).subtract(1),new glsl/* Float */.nt(o).subtract(1))}_getVertexColor(t){let e=t.color;if(this.visualVariableColor){const i=this.storage.getColorValue(t.id);e=this.visualVariableColor.getColor(i,t.color,new glsl/* Bool */.x(!1))}if(this.visualVariableOpacity){const i=this.storage.getOpacityValue(t.id),o=this.visualVariableOpacity.getOpacity(i);e=e.multiply(o)}return e}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],$.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],$.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],$.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],$.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],$.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],$.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],$.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],$.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"textRenderPassType",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"isBackgroundPass",void 0),(0,tslib_es6._)([GraphShaderModule/* define */.E8],$.prototype,"isLabel",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(Q)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(X))],$.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(Y))],$.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/labels/LabelTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LabelTechnique_l extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Label,this.shaders={geometry:new $},this.drawPhase=enums/* WGLDrawPhase */.S5.LABEL|enums/* WGLDrawPhase */.S5.LABEL_ALPHA|enums/* WGLDrawPhase */.S5.HITTEST,this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.TEXT}render(e,s){const{context:t,painter:m}=e,u=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),l={...(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e),stencil:{write:!1,test:{ref:()=>255,compare:webgl_enums/* CompareFunction */.MT.GREATER,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}},c=s.instance.getInput(),h={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,s.target,c.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,s.target),mosaicInfo:m.textureManager.getMosaicInfo(t,s.textureKey)},defines:{...u,textRenderPassType:TextShader_K.Color,isBackgroundPass:!0,isLabel:!0},optionalAttributes:c.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)};m.setPipelineState(l),m.setShader(h),m.submitDraw(e,s),m.setShader({...h,defines:{...u,textRenderPassType:TextShader_K.Halo,isBackgroundPass:!1,isLabel:!0}}),m.submitDraw(e,s),m.setShader({...h,defines:{...u,textRenderPassType:TextShader_K.Color,isBackgroundPass:!1,isLabel:!0}}),m.submitDraw(e,s)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/gradientStrokeConstants.js
var gradientStrokeConstants = __webpack_require__(3322);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/GradientStrokeShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function GradientStrokeShader_F(t){return (0,glsl/* step */.PM)(new glsl/* Float */.nt(0),t).multiply(2).subtract(1)}class GradientStrokeShader_G extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"totalLength",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],GradientStrokeShader_G.prototype,"gradientSize",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],GradientStrokeShader_G.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec4 */.Zb)],GradientStrokeShader_G.prototype,"tlbr",void 0);class GradientStrokeShader_I extends (/* unused pure expression or super */ null && (L)){}class GradientStrokeShader_P extends GraphShaderModule/* UniformGroup */.k2{}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(glsl/* Float */.nt)],GradientStrokeShader_P.prototype,"isColorPass",void 0);class GradientStrokeShader_k extends LineShader_{constructor(){super(...arguments),this.type="GradientStrokeShader"}vertex(t,e){const{totalLength:i,gradientSize:o,segmentDirection:s,tlbr:r}=t,p=LineShader_L(this,t),m=(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAlongLine),c=i.divide(this.view.displayZoomFactor),u=(0,glsl/* ifElse */.Tk)((0,utils/* getBitBool */.K5)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAbsoluteSize),(()=>{const t=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(m,new glsl/* Float */.nt(.5)),c,p.halfWidth);return o.divide(t)}),o),h=t.accumulatedDistance.add((0,glsl/* dot */.Om)(s,p.scaledOffset).divide(c)),y=r.divide(this.mosaicInfo.size.xyxy);return{...p,tlbr:y,relativePositionAlongLine:h,relativeGradientSize:u,isAlongLine:(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isAlongLine),isDiscrete:(0,utils/* getBit */.mh)(t.bitset,gradientStrokeConstants/* bitset */.Q.isDiscrete),...this.maybeRunHittest(t,e,p.halfWidth)}}fragment(t){const{isAlongLine:e,isDiscrete:i,relativePositionAlongLine:o,relativeGradientSize:s,normal:r,tlbr:d}=t,v=LineShader_D(t,this.antialiasingControls.blur),f=GradientStrokeShader_F(r.y).multiply((0,glsl/* min */.jk)((0,glsl/* length */.Bw)(r),new glsl/* Float */.nt(1))),w=new glsl/* Float */.nt(.5).multiply(f).add(new glsl/* Float */.nt(.5)),b=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(e,new glsl/* Float */.nt(.5)),o,w),x=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(i,new glsl/* Float */.nt(.5)),s.subtract(1),new glsl/* Float */.nt(0)),j=(0,utils/* oneMinus */.zb)(b.add(x).divide(s)),L=(0,glsl/* mix */.jh)(d.xy,d.zw,new glsl/* Vec2 */.ZY((0,glsl/* clamp */.qE)(j,new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),.5)),A=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,L),D=t.opacity.multiply(v),z=this.getFragmentOutput(A.multiply(D),t),G=(0,glsl/* step */.PM)(new glsl/* Float */.nt(.5),this.technique.isColorPass).multiply((0,has/* default */.A)("gradient-depth-epsilon")),I=(0,glsl/* step */.PM)(new glsl/* Float */.nt(0),r.y).multiply(new glsl/* Float */.nt((0,has/* default */.A)("gradient-depth-bias")).subtract(G));return z.glFragDepth=(0,glsl/* clamp */.qE)((0,glsl/* length */.Bw)(r).add(I),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),z}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],GradientStrokeShader_k.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(GradientStrokeShader_P)],GradientStrokeShader_k.prototype,"technique",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(GradientStrokeShader_G)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],GradientStrokeShader_k.prototype,"vertex",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/GradientStrokeTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class GradientStrokeTechnique_d extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.GradientStroke,this.shaders={geometry:new GradientStrokeShader_k},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}_getShaderOptions(e,t,a){const{context:n,painter:p,pixelRatio:c}=e,l=t.instance.getInput();return{shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,l.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(c),mosaicInfo:p.textureManager.getMosaicInfo(n,t.textureKey),technique:{isColorPass:a}},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:l.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}}render(e,t){const{painter:r}=e;if((0,featureTechniqueUtils/* isHittest */.Eq)(e)||(0,featureTechniqueUtils/* isHighlight */.dJ)(e)){const s=(0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e);return r.setPipelineState(s),r.setShader(this._getShaderOptions(e,t,1)),void r.submitDraw(e,t)}e.context.setClearDepth(1),e.context.clear(webgl_enums/* FramebufferBit */.NV.DEPTH);const i={color:!1,depth:{write:{zNear:0,zFar:1},test:webgl_enums/* CompareFunction */.MT.LESS},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums/* CompareFunction */.MT.EQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}};r.setShader(this._getShaderOptions(e,t,0)),r.setPipelineState(i),r.submitDraw(e,t);const o={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:{write:!1,test:webgl_enums/* CompareFunction */.MT.LEQUAL},stencil:{write:!1,test:{ref:e=>e.stencilRef,compare:webgl_enums/* CompareFunction */.MT.EQUAL,mask:255,op:{fail:webgl_enums/* StencilOperation */.eA.KEEP,zFail:webgl_enums/* StencilOperation */.eA.KEEP,zPass:webgl_enums/* StencilOperation */.eA.KEEP}}}};r.setShader(this._getShaderOptions(e,t,1)),r.setPipelineState(o),r.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/LineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class LineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Line,this.shaders={geometry:new LineShader_},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}render(e,t){const{painter:a,pixelRatio:u}=e,p=t.instance.getInput();a.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(u)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),a.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),a.submitDraw(e,t)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/constants.js
var cim_constants = __webpack_require__(6276);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/TexturedLineShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class W extends LineShader_q{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],W.prototype,"accumulatedDistance",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],W.prototype,"segmentDirection",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Float */.nt)],W.prototype,"offsetAlongLine",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Float */.nt)],W.prototype,"capType",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec4 */.Zb)],W.prototype,"tlbr",void 0);class TexturedLineShader_R extends (/* unused pure expression or super */ null && (I)){}class TexturedLineShader_H extends LineShader_{constructor(){super(...arguments),this.type="TexturedLineShader"}_getDistanceRatio(t,e){const s=(0,utils/* getBit */.mh)(t.bitset,constants/* bitsetLineScaleDash */.kx);return s.multiply((0,glsl/* max */.T9)(e,new glsl/* Float */.nt(.25)).multiply(new glsl/* Float */.nt(2))).add(new glsl/* Float */.nt(1).subtract(s).multiply((0,screenUtils/* pt2px */.Lz)(1)))}_getSDFAlpha(t){const{halfWidth:e,normal:i,tlbr:a,patternSize:r,accumulatedDistance:l,offsetAlongLine:x,dashToPx:v,capType:D}=t,S=r.x.divide(cim_constants/* dashSdfRasterizationScale */.zA).multiply(v),j=(0,glsl/* fract */.jc)(l.add(x).divide(S)),A=(0,glsl/* mix */.jh)(a.xy,a.zw,new glsl/* Vec2 */.ZY(j,.5)),z=(0,utils/* rgba2float */.Rj)((0,glsl/* texture2D */.US)(this.mosaicInfo.texture,A)).multiply(2).subtract(1).multiply(cim_constants/* dashSdfDistanceNormalization */.gR).multiply(v),F=i.y.multiply(e),T=(0,glsl/* cond */.j1)([(0,glsl/* equal */.LC)(D,new glsl/* Float */.nt(1)),z.subtract(e)],[(0,glsl/* equal */.LC)(D,new glsl/* Float */.nt(2)),(0,glsl/* sqrt */.RZ)((0,glsl/* pow */.n7)((0,glsl/* max */.T9)(z,new glsl/* Float */.nt(0)),new glsl/* Float */.nt(2)).add(F.multiply(F))).subtract(e)],[!0,z]),_=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.25).subtract(T),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1));return new glsl/* Vec4 */.Zb(_)}_getPatternColor(t){const{halfWidth:e,normal:i,color:s,accumulatedDistance:o,patternSize:a,sampleAlphaOnly:r,tlbr:l}=t,n=a.y.multiply(new glsl/* Float */.nt(2).multiply(e).divide(a.x)),y=(0,glsl/* fract */.jc)(o.divide(n)),h=new glsl/* Float */.nt(.5).multiply(i.y).add(new glsl/* Float */.nt(.5)),f=(0,glsl/* mix */.jh)(l.xy,l.zw,new glsl/* Vec2 */.ZY(h,y));let w=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,f);return null!=this.visualVariableColor&&(w=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(r,new glsl/* Float */.nt(.5)),new glsl/* Vec4 */.Zb(s.a),s)),w}vertex(t,e){const{segmentDirection:i,tlbr:s,bitset:o}=t,a=LineShader_L(this,t),r=t.accumulatedDistance.divide(this.view.displayZoomFactor).add((0,glsl/* dot */.Om)(i,a.scaledOffset)),l=new glsl/* Vec2 */.ZY(s.z.subtract(s.x),s.w.subtract(s.y)),n=s.divide(this.mosaicInfo.size.xyxy),c=(0,utils/* getBit */.mh)(o,constants/* bitsetLineIsSdf */.b5),m=(0,utils/* getBit */.mh)(o,constants/* bitsetGenericConsiderAlphaOnly */.cn),d=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(c,new glsl/* Float */.nt(.5)),this._getDistanceRatio(t,a.scaledHalfWidth),new glsl/* Float */.nt(1));return{...a,tlbr:n,patternSize:l,accumulatedDistance:r,isSDF:c,sampleAlphaOnly:m,dashToPx:d,offsetAlongLine:t.offsetAlongLine,capType:t.capType,...this.maybeRunHittest(t,e,a.halfWidth)}}fragment(t){const{color:e,opacity:i,isSDF:s}=t,o=LineShader_D(t,this.antialiasingControls.blur),a=(0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(s,new glsl/* Float */.nt(.5)),this._getSDFAlpha(t),this._getPatternColor(t)),r=e.multiply(i).multiply(o).multiply(a);return this.getFragmentOutput(r,t)}}(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],TexturedLineShader_H.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(W)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(q))],TexturedLineShader_H.prototype,"vertex",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/line/TexturedLineTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TexturedLineTechnique_p extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.TexturedLine,this.shaders={geometry:new TexturedLineShader_H},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.LINE}render(e,t){const{context:a,painter:m,pixelRatio:p}=e,f=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,f.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),antialiasingControls:utils_n(p),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:f.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MarkerShader_X extends S{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(3,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"color",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(4,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"outlineColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(5,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"offset",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(6,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"textureUV",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(7,glsl/* Vec4 */.Zb)],MarkerShader_X.prototype,"sizing",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(8,glsl/* Float */.nt)],MarkerShader_X.prototype,"placementAngle",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(9,glsl/* Float */.nt)],MarkerShader_X.prototype,"sdfDecodeCoeff",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(10,glsl/* Vec2 */.ZY)],MarkerShader_X.prototype,"zoomRange",void 0);class MarkerShader_Y extends GraphShaderModule/* ComputeVertexInput */.Y7{}(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(11,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"offsetNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(12,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"offsetNextVertex2",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(13,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex1",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* location */.C5)(14,glsl/* Vec2 */.ZY)],MarkerShader_Y.prototype,"textureUVNextVertex2",void 0);class MarkerShader_Z extends AFeatureShader_P{}function MarkerShader_$(t,e,i,o){return e.multiply(t.x).add(i.multiply(t.y)).add(o.multiply(t.z))}function tt(t){return t.multiply(t).divide(128)}class et extends B{constructor(){super(...arguments),this.type="MarkerShader",this.computeAttributes={offset:["offsetNextVertex1","offsetNextVertex2"],textureUV:["textureUVNextVertex1","textureUVNextVertex2"]}}vertex(t,e){const i=tt(t.sizing.x),o=tt(t.sizing.y),s=tt(t.sizing.z),l=t.placementAngle,r=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.isSDF),y=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.isMapAligned),h=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.scaleSymbolsProportionally),c=(0,utils/* getBitBool */.K5)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.colorLocked),x=vvUtils_n(this,t.id),v=vvUtils_r(this,t.id,t.color,c).multiply(x),f=this.view.displayViewScreenMat3.multiply(new glsl/* Vec3 */.eB(t.pos.xy,1)),V=vvUtils_l(this,t.id,s).divide(s),w=i.multiply(V),S=t.offset.xy.multiply(V);let b=o.multiply(h.multiply(V.subtract(1)).add(1));b=(0,glsl/* min */.jk)(b,(0,glsl/* max */.T9)(w.subtract(.99),new glsl/* Float */.nt(0)));const g=(0,glsl/* max */.T9)(b,new glsl/* Float */.nt(1)),C=(0,glsl/* min */.jk)(b,new glsl/* Float */.nt(1)),z=glsl/* Mat3 */.U.fromRotation(l.multiply(constants/* c256ToRad */.rp)),_=vvUtils_u(this,t.id),j=this._getViewRotationMatrix(y).multiply(_).multiply(z).multiply(new glsl/* Vec3 */.eB(S.xy,0)),U=this.clip(t.id,t.zoomRange),N=new glsl/* Vec4 */.Zb(f.xy.add(j.xy),U,1),D=t.textureUV.divide(this.mosaicInfo.size),F=t.outlineColor.multiply(C),k=(0,utils/* getBit */.mh)(t.bitset,markerConstants/* MarkerConstants */.c.bitset.overrideOutlineColor),I=t.sdfDecodeCoeff.multiply(w);return{glPosition:N,color:v,textureUV:D,outlineColor:F,outlineSize:g,distanceToPx:I,isSDF:r,overrideOutlineColor:k,...this.maybeRunHittest(t,e,{pos:t.pos,size:w,sizeCorrection:V,isMapAligned:y,vvRotationMat3:_,placementMat3:z,outlineSize:g,distanceToPx:I,isSDF:r})}}fragment(t){const e=this._getColor(t.textureUV,t);return this.getFragmentOutput(e,t)}hittest(t,e,i){return (0,glsl/* ifElse */.Tk)((0,glsl/* lessThan */.Xe)(i.size,this.hittestRequest.smallSymbolSizeThreshold),this._hittestSmallMarker(t,e,i),this._hittestMarker(t,e,i))}_getViewRotationMatrix(t){const e=this.view.displayViewMat3,i=this.view.displayMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getViewScreenMatrix(t){const e=this.view.viewMat3.multiply(this.view.tileMat3),i=this.view.tileMat3,o=new glsl/* Float */.nt(1).subtract(t);return e.multiply(t).add(i.multiply(o))}_getColor(t,e){return (0,glsl/* ifElse */.Tk)((0,glsl/* equal */.LC)(e.isSDF,new glsl/* Float */.nt(1)),this._getSDFColor(t,e),this._getSpriteColor(t,e))}_getSpriteColor(t,e){return (0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t).multiply(e.color)}_getSDFColor(t,e){const i=(0,glsl/* texture2D */.US)(this.mosaicInfo.texture,t),o=new glsl/* Float */.nt(.5).subtract((0,utils/* rgba2float */.Rj)(i)).multiply(e.distanceToPx).multiply(constants/* softEdgeRatio */.V5),s=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(o),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),l=e.color.multiply(s);let r=e.outlineSize;this.highlight&&(r=(0,glsl/* max */.T9)(r,e.overrideOutlineColor.multiply(4)));const a=r.multiply(.5),p=(0,glsl/* abs */.tn)(o).subtract(a),d=(0,glsl/* clamp */.qE)(new glsl/* Float */.nt(.5).subtract(p),new glsl/* Float */.nt(0),new glsl/* Float */.nt(1)),m=(0,glsl/* mix */.jh)(e.outlineColor,e.color,e.overrideOutlineColor).multiply(d);return new glsl/* Float */.nt(1).subtract(m.a).multiply(l).add(m)}_hittestSmallMarker(t,e,i){const{position:o,distance:s,smallSymbolDistance:l}=this.hittestRequest,r=s.subtract(l),{viewMat3:p,tileMat3:n}=this.view,u=p.multiply(n).multiply(new glsl/* Vec3 */.eB(i.pos,1)).xy,d=i.size.multiply(.5);return (0,glsl/* distance */.Io)(u,o).subtract(d).add(r)}_hittestMarker(t,e,i){const{pos:o,sizeCorrection:s,isMapAligned:l}=i,r=new glsl/* Vec3 */.eB(t.offset.multiply(s),0),p=new glsl/* Vec3 */.eB(e.offsetNextVertex1.multiply(s),0),n=new glsl/* Vec3 */.eB(e.offsetNextVertex2.multiply(s),0),{viewMat3:u,tileMat3:d}=this.view,m=u.multiply(d).multiply(new glsl/* Vec3 */.eB(o,1)),h=this._getViewScreenMatrix(l).multiply(i.vvRotationMat3).multiply(i.placementMat3),c=m.add(h.multiply(r)).xy,x=m.add(h.multiply(p)).xy,v=m.add(h.multiply(n)).xy,f=this.hittestRequest.position,V=this.hittestRequest.distance,w=P(f,c,x,v);return (0,glsl/* ifElse */.Tk)((0,glsl/* greaterThan */.MM)(w,V),w,this._hittestSamples(c,x,v,t,e,i))}_hittestSamples(t,e,i,o,s,l){const{outlineSize:r,isSDF:a,distanceToPx:p}=l,n=this.hittestRequest.position,d=this.hittestRequest.distance,y=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),(0,glsl/* negate */.ze)(d))),t,e,i),h=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(0,(0,glsl/* negate */.ze)(d))),t,e,i),c=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,(0,glsl/* negate */.ze)(d))),t,e,i),x=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),0)),t,e,i),v=hittestUtils_h(n,t,e,i),f=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,0)),t,e,i),V=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY((0,glsl/* negate */.ze)(d),d)),t,e,i),w=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(0,d)),t,e,i),S=hittestUtils_h(n.add(new glsl/* Vec2 */.ZY(d,d)),t,e,i),M=o.textureUV.divide(this.mosaicInfo.size),z=s.textureUVNextVertex1.divide(this.mosaicInfo.size),_=s.textureUVNextVertex2.divide(this.mosaicInfo.size),j={color:new glsl/* Vec4 */.Zb(1),outlineColor:new glsl/* Vec4 */.Zb(1),overrideOutlineColor:new glsl/* Float */.nt(1),outlineSize:r,distanceToPx:p,isSDF:a};let R=new glsl/* Float */.nt(0);return R=R.add(hittestUtils_g(y).multiply(this._getColor(MarkerShader_$(y,M,z,_),j).a)),R=R.add(hittestUtils_g(h).multiply(this._getColor(MarkerShader_$(h,M,z,_),j).a)),R=R.add(hittestUtils_g(c).multiply(this._getColor(MarkerShader_$(c,M,z,_),j).a)),R=R.add(hittestUtils_g(x).multiply(this._getColor(MarkerShader_$(x,M,z,_),j).a)),R=R.add(hittestUtils_g(v).multiply(this._getColor(MarkerShader_$(v,M,z,_),j).a)),R=R.add(hittestUtils_g(f).multiply(this._getColor(MarkerShader_$(f,M,z,_),j).a)),R=R.add(hittestUtils_g(V).multiply(this._getColor(MarkerShader_$(V,M,z,_),j).a)),R=R.add(hittestUtils_g(w).multiply(this._getColor(MarkerShader_$(w,M,z,_),j).a)),R=R.add(hittestUtils_g(S).multiply(this._getColor(MarkerShader_$(S,M,z,_),j).a)),(0,glsl/* step */.PM)(R,new glsl/* Float */.nt(.05)).multiply(hittestUtils_q(this.hittestRequest))}}(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(f)],et.prototype,"visualVariableColor",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(h)],et.prototype,"visualVariableOpacity",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableRotation_d)],et.prototype,"visualVariableRotation",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(m)],et.prototype,"visualVariableSizeMinMaxValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeScaleStops_p)],et.prototype,"visualVariableSizeScaleStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(VisualVariableSizeStops_f)],et.prototype,"visualVariableSizeStops",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* option */.uK)(l)],et.prototype,"visualVariableSizeUnitValue",void 0),(0,tslib_es6._)([(0,GraphShaderModule/* uniform */.Pi)(MosaicInfo_p)],et.prototype,"mosaicInfo",void 0),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(MarkerShader_X)),(0,tslib_es6.a)(1,(0,GraphShaderModule/* input */.hF)(MarkerShader_Y))],et.prototype,"vertex",null),(0,tslib_es6._)([(0,tslib_es6.a)(0,(0,GraphShaderModule/* input */.hF)(MarkerShader_Z))],et.prototype,"fragment",null);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/markers/MarkerTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class MarkerTechnique_u extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Marker,this.shaders={geometry:new et},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER}render(e,t){const{context:a,painter:m}=e,u=t.instance.getInput();m.setShader({shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,u.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,t.target),mosaicInfo:m.textureManager.getMosaicInfo(a,t.textureKey,!0)},defines:{...(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e)},optionalAttributes:u.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)}),m.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),m.submitDraw(e,t)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js + 1 modules
var TypedShaderProgram = __webpack_require__(51487);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/GLSLShaderModule.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class o{constructor(){this.computeAttributes={}}get locationsMap(){const t=new Map;for(const e in this.locations)t.set(e,this.locations[e].index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set(Object.keys(this.options));this._optionPropertyKeys=t}return this._optionPropertyKeys}get _transformFeedbackBindings(){return[]}get locationInfo(){if(!this._locationInfo){const e=this.locationsMap,o=Array.from(e.entries()).map((([t,e])=>`${t}.${e}`)).join("."),n=(0,string/* numericHash */.Wm)(o);this._locationInfo={hash:n,stringHash:o,locations:e,computeAttributeMap:this.computeAttributes}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const[e,o]of this.locationsMap.entries())t.set("a_"+e,o);return t}getShaderKey(t,e,o){return`${Object.keys(t).map((e=>`${e}.${t[e]}`)).join(".")}.${Object.keys(o).filter((t=>o[t])).map((t=>`${t}_${o[t].toString()}`)).join(".")}.${Object.keys(e).filter((t=>this.optionPropertyKeys.has(t))).join(".")}`}getProgram(t,o,n,r){let i="",s="";for(const e in n)if(n[e]){const t="boolean"==typeof n[e]?`#define ${e}\n`:`#define ${e} ${n[e]}\n`;i+=t,s+=t}return i+=this.vertexShader,s+=this.fragmentShader,new TypedShaderProgram/* TypedShaderProgram */.K(i,s,this.renamedLocationsMap,this.locationInfo,this._getUniformBindings(o),this._transformFeedbackBindings)}_getUniformBindings(t){const e=[];for(const o in this.required){const t=this.required[o];e.push({uniformHydrated:null,shaderModulePath:o,uniformName:o,uniformType:t.type,uniformArrayElementType:GLSLShaderModule_n(t),uniformArrayLength:r(t)})}for(const o in t){const i=this.options[o];if(t[o])for(const t in i){const s=i[t];e.push({uniformHydrated:null,shaderModulePath:`${o}.${t}`,uniformName:t,uniformType:s.type,uniformArrayElementType:GLSLShaderModule_n(s),uniformArrayLength:r(s)})}}return e}}const GLSLShaderModule_n=t=>"array"===t.type?t.elementType?.type:void 0,r=t=>"array"===t.type?t.size:void 0;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js + 1 modules
var resolver = __webpack_require__(75472);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/pieChart/PieChartShader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const PieChartShader_p={hittestDist:glsl/* Float */.nt,hittestPos:glsl/* Vec2 */.ZY},PieChartShader_y={filterFlags:glsl/* Sampler2D */.z7,animation:glsl/* Sampler2D */.z7,visualVariableData:glsl/* Sampler2D */.z7,dataDriven0:glsl/* Sampler2D */.z7,dataDriven1:glsl/* Sampler2D */.z7,dataDriven2:glsl/* Sampler2D */.z7,gpgpu:glsl/* Sampler2D */.z7,size:glsl/* Float */.nt},PieChartShader_d={displayViewScreenMat3:glsl/* Mat3 */.U,displayViewMat3:glsl/* Mat3 */.U,displayMat3:glsl/* Mat3 */.U,viewMat3:glsl/* Mat3 */.U,tileMat3:glsl/* Mat3 */.U,displayZoomFactor:glsl/* Float */.nt,requiredZoomFactor:glsl/* Float */.nt,tileOffset:glsl/* Vec2 */.ZY,currentScale:glsl/* Float */.nt,currentZoom:glsl/* Float */.nt,metersPerSRUnit:glsl/* Float */.nt};class PieChartShader_u extends o{constructor(){super(...arguments),this.vertexShader=(0,resolver/* resolveIncludes */.Q)("materials/pie/pie.vert"),this.fragmentShader=(0,resolver/* resolveIncludes */.Q)("materials/pie/pie.frag"),this.required={...PieChartShader_y,...PieChartShader_d,outlineWidth:glsl/* Float */.nt,colors:glsl/* FixedArray */.My,defaultColor:glsl/* Vec4 */.Zb,othersColor:glsl/* Vec4 */.Zb,outlineColor:glsl/* Vec4 */.Zb,donutRatio:glsl/* Float */.nt,sectorThreshold:glsl/* Float */.nt},this.options={hittestUniforms:PieChartShader_p,visualVariableSizeMinMaxValue:{minMaxValueAndSize:glsl/* Vec4 */.Zb},visualVariableSizeScaleStops:{sizes:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},values:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},visualVariableSizeStops:{sizes:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},values:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},visualVariableSizeUnitValue:{unitValueToPixelsRatio:glsl/* Float */.nt},visualVariableOpacity:{opacities:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8},opacityValues:{...glsl/* FixedArray */.My.ofType(glsl/* Float */.nt,8),type:"array",elementType:glsl/* Float */.nt,size:8}},highlightUniforms:{highlightAll:glsl/* Float */.nt,activeReasons:glsl/* Float */.nt}},this.locations={pos:{index:0,type:glsl/* Vec2 */.ZY},id:{index:1,type:glsl/* Vec3 */.eB},bitset:{index:2,type:glsl/* Float */.nt},offset:{index:3,type:glsl/* Vec2 */.ZY},texCoords:{index:4,type:glsl/* Vec2 */.ZY},size:{index:5,type:glsl/* Vec2 */.ZY},referenceSize:{index:6,type:glsl/* Float */.nt},zoomRange:{index:7,type:glsl/* Vec2 */.ZY}},this.defines={VV_SIZE_MIN_MAX_VALUE:"boolean",VV_SIZE_SCALE_STOPS:"boolean",VV_SIZE_FIELD_STOPS:"boolean",VV_SIZE_UNIT_VALUE:"boolean",VV_OPACITY:"boolean",HITTEST:"boolean",numberOfFields:"number",highlight:"boolean",inside:"boolean",outside:"boolean"}}setNumberOfFields(e){this.required.colors={...glsl/* FixedArray */.My.ofType(glsl/* Vec4 */.Zb,e),type:"array",elementType:glsl/* Vec4 */.Zb,size:e}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/pieChart/PieChartTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class PieChartTechnique_n extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.PieChart,this.shaders={geometry:new PieChartShader_u},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.MARKER}render(e,t){const{painter:o}=e,{instance:u,target:n}=t,l=this.shaders.geometry,m=u.getInput(),f=m.uniforms.numberOfFields,S=(0,featureTechniqueUtils/* isHittest */.Eq)(e),V=(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,n),d=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e);l.setNumberOfFields(f),o.setShader({shader:l,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,t.target,m.uniforms.shader),...V.storage,...V.view,...V.highlight,highlightUniforms:V.highlight,hittestUniforms:V.hittestRequest?{hittestDist:V.hittestRequest?.distance,hittestPos:V.hittestRequest?.position}:null},defines:{VV_SIZE_MIN_MAX_VALUE:!!m.uniforms.shader.visualVariableSizeMinMaxValue,VV_SIZE_SCALE_STOPS:!!m.uniforms.shader.visualVariableSizeScaleStops,VV_SIZE_FIELD_STOPS:!!m.uniforms.shader.visualVariableSizeStops,VV_SIZE_UNIT_VALUE:!!m.uniforms.shader.visualVariableSizeUnitValue,VV_OPACITY:!!m.uniforms.shader.visualVariableOpacity,HITTEST:S,highlight:V.highlight?1:0,...d,numberOfFields:f},optionalAttributes:{},useComputeBuffer:S}),o.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),o.submitDraw(e,t)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/text/TextTechnique.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class TextTechnique_m extends t{constructor(){super(...arguments),this.type=TechniqueType/* TechniqueType */.N.Text,this.shaders={geometry:new $},this.symbologyPlane=enums/* FeatureSymbologyDrawOrder */.uC.TEXT}render(e,s){const{context:n,painter:u}=e,m=(0,featureTechniqueUtils/* getSelectionDefines */.vT)(e),p=s.instance.getInput(),f={shader:this.shaders.geometry,uniforms:{...(0,featureTechniqueUtils/* resolveDynamicUniforms */.r3)(e,s.target,p.uniforms),...(0,featureTechniqueUtils/* getFeatureUniforms */.QA)(e,s.target),mosaicInfo:u.textureManager.getMosaicInfo(n,s.textureKey)},defines:{...m,isBackgroundPass:!0,isLabel:!1,textRenderPassType:TextShader_K.Color},optionalAttributes:p.optionalAttributes,useComputeBuffer:(0,featureTechniqueUtils/* isHittest */.Eq)(e)};u.setShader(f),u.setPipelineState((0,featureTechniqueUtils/* getFeaturePipelineState */.Qu)(e)),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Halo}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Outline}}),u.submitDraw(e,s),u.setShader({...f,defines:{...m,isBackgroundPass:!1,isLabel:!1,textRenderPassType:TextShader_K.Color}}),u.submitDraw(e,s)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const TechniqueRegistry_F={fill:new u,patternFill:new PatternFillTechnique_m,complexFill:new ComplexFillTechnique_m,gradientFill:new GradientFillTechnique_u,outlineFill:new OutlineFillTechnique_l,patternOutlineFill:new PatternOutlineFillTechnique_m,complexOutlineFill:new ComplexOutlineFillTechnique_m,marker:new MarkerTechnique_u,pieChart:new PieChartTechnique_n,line:new LineTechnique_p,texturedLine:new TexturedLineTechnique_p,gradientStroke:new GradientStrokeTechnique_d,text:new TextTechnique_m,label:new LabelTechnique_l,heatmap:new HeatmapTechnique_h,dotDensity:new w,animatedMarker:new AnimatedTechniques_m,animatedMarkerShift:new AnimatedTechniques_n,animatedFill:new a,animatedLine:new AnimatedTechniques_h};function TechniqueRegistry_x(){for(const e in TechniqueRegistry_F){TechniqueRegistry_F[e].startup()}}function TechniqueRegistry_k(e){for(const i in TechniqueRegistry_F){TechniqueRegistry_F[i].shutdown(e)}}


/***/ }),

/***/ 98826:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ e),
/* harmony export */   Y: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var e,t;!function(e){e[e.AnimatedFill=0]="AnimatedFill",e[e.AnimatedLine=1]="AnimatedLine",e[e.AnimatedMarker=2]="AnimatedMarker",e[e.AnimatedMarkerShift=3]="AnimatedMarkerShift",e[e.Bitmap=4]="Bitmap",e[e.Blend=5]="Blend",e[e.ComplexFill=6]="ComplexFill",e[e.ComplexOutlineFill=7]="ComplexOutlineFill",e[e.DotDensity=8]="DotDensity",e[e.Fill=9]="Fill",e[e.GradientFill=10]="GradientFill",e[e.GradientStroke=11]="GradientStroke",e[e.Grid=12]="Grid",e[e.Heatmap=13]="Heatmap",e[e.Label=14]="Label",e[e.Line=15]="Line",e[e.Magnifier=16]="Magnifier",e[e.Marker=17]="Marker",e[e.OutlineFill=18]="OutlineFill",e[e.Overlay=19]="Overlay",e[e.PatternFill=20]="PatternFill",e[e.PatternOutlineFill=21]="PatternOutlineFill",e[e.PieChart=22]="PieChart",e[e.Test=23]="Test",e[e.Text=24]="Text",e[e.TexturedLine=25]="TexturedLine",e[e.VideoScreen=26]="VideoScreen"}(e||(e={})),function(e){e[e.RasterColorizer=0]="RasterColorizer",e[e.RasterProcessor=1]="RasterProcessor",e[e.Aspect=2]="Aspect",e[e.BandArithmetic=3]="BandArithmetic",e[e.ColormapToRGB=4]="ColormapToRGB",e[e.CompositeBand=5]="CompositeBand",e[e.ComputeChange=6]="ComputeChange",e[e.ContrastBrightness=7]="ContrastBrightness",e[e.Convolution=8]="Convolution",e[e.Curvature=9]="Curvature",e[e.ExtractBand=10]="ExtractBand",e[e.Grayscale=11]="Grayscale",e[e.Hillshade=12]="Hillshade",e[e.Local=13]="Local",e[e.Mask=14]="Mask",e[e.NDVI=15]="NDVI",e[e.Remap=16]="Remap",e[e.Reproject=17]="Reproject",e[e.ShadedRelief=18]="ShadedRelief",e[e.Slope=19]="Slope",e[e.Statistics=20]="Statistics",e[e.Stretch=21]="Stretch"}(t||(t={}));


/***/ }),

/***/ 5062:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ e),
/* harmony export */   m: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={linear:0,rectangular:1,circular:2},e={isAbsolute:0,isDiscrete:1};


/***/ }),

/***/ 3322:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Q: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={isAlongLine:0,isAbsoluteSize:1,isDiscrete:2};


/***/ }),

/***/ 64723:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const o={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4,isStroke:5}};


/***/ }),

/***/ 17906:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ o),
/* harmony export */   q: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55429);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(e,o,s,f){const r=s.packPrecisionFactor??1;switch(s.type){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.BYTE:if(1===s.count)e.setInt8(f+s.offset,o*r);else for(let t=0;t<s.count;t++){const n=t*Int8Array.BYTES_PER_ELEMENT;e.setInt8(f+s.offset+n,o[t]*r)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE:if(1===s.count)e.setUint8(f+s.offset,o*r);else for(let t=0;t<s.count;t++){const n=t*Uint8Array.BYTES_PER_ELEMENT;e.setUint8(f+s.offset+n,o[t]*r)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT:if(1===s.count)e.setInt16(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Int16Array.BYTES_PER_ELEMENT;e.setInt16(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_SHORT:if(1===s.count)e.setUint16(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Uint16Array.BYTES_PER_ELEMENT;e.setUint16(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.INT:if(1===s.count)e.setInt32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Int32Array.BYTES_PER_ELEMENT;e.setInt32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_INT:if(1===s.count)e.setUint32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Uint32Array.BYTES_PER_ELEMENT;e.setUint32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.FLOAT:if(1===s.count)e.setFloat32(f+s.offset,o*r,!0);else for(let t=0;t<s.count;t++){const n=t*Float32Array.BYTES_PER_ELEMENT;e.setFloat32(f+s.offset+n,o[t]*r,!0)}break;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.HALF_FLOAT:if(1===s.count)e.setUint16(f+s.offset,(0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint16 */ .fw)(o*r),!0);else for(let n=0;n<s.count;n++){const E=n*Uint16Array.BYTES_PER_ELEMENT;e.setUint16(f+s.offset+E,(0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .toUint16 */ .fw)(o[n]*r),!0)}}}function s(t,o,s){switch(o.type){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.BYTE:{if(1===o.count)return t.getInt8(s+o.offset);const e=[];for(let n=0;n<o.count;n++){const f=n*Int8Array.BYTES_PER_ELEMENT;e.push(t.getInt8(s+o.offset+f))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_BYTE:{if(1===o.count)return t.getUint8(s+o.offset);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint8Array.BYTES_PER_ELEMENT;e.push(t.getUint8(s+o.offset+f))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT:{if(1===o.count)return t.getInt16(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Int16Array.BYTES_PER_ELEMENT;e.push(t.getInt16(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_SHORT:{if(1===o.count)return t.getUint16(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint16Array.BYTES_PER_ELEMENT;e.push(t.getUint16(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.INT:{if(1===o.count)return t.getInt32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Int32Array.BYTES_PER_ELEMENT;e.push(t.getInt32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.UNSIGNED_INT:{if(1===o.count)return t.getUint32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Uint32Array.BYTES_PER_ELEMENT;e.push(t.getUint32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.FLOAT:{if(1===o.count)return t.getFloat32(s+o.offset,!0);const e=[];for(let n=0;n<o.count;n++){const f=n*Float32Array.BYTES_PER_ELEMENT;e.push(t.getFloat32(s+o.offset+f,!0))}return e}case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.HALF_FLOAT:{if(1===o.count)return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .fromUint16 */ .Kl)(t.getUint16(s+o.offset,!0));const n=[];for(let f=0;f<o.count;f++){const r=f*Uint16Array.BYTES_PER_ELEMENT;n.push((0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .fromUint16 */ .Kl)(t.getUint16(s+o.offset+r,!0)))}return n}}}


/***/ }),

/***/ 98003:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P: () => (/* binding */ n),
/* harmony export */   U: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n){return n}function r(n){return n}


/***/ }),

/***/ 12453:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ph: () => (/* binding */ r),
/* harmony export */   Z0: () => (/* binding */ a),
/* harmony export */   hU: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function t(t){const r=t.map((({name:e,count:t,type:r})=>`${e}.${t}.${r}`)).join(",");return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .numericHash */ .Wm)(r)}function r(e,t,o,a,c,n,s){if(e.primitiveName===t){let t=a?.readWithDefault(c,n,e[o]&&s);return"text"===e.type&&(t=t.toString()),void(e[o]=t)}if("type"in e&&null!=e.type){if(e.effects)for(const i of e.effects)r(i,t,o,a,c,n,s);switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.symbolLayers)for(const i of e.symbolLayers)r(i,t,o,a,c,n,s);break;case"CIMTextSymbol":e.symbol&&r(e.symbol,t,o,a,c,n,s);break;case"CIMHatchFill":e.lineSymbol&&r(e.lineSymbol,t,o,a,c,n,s);break;case"CIMPictureMarker":case"CIMCharacterMarker":case"CIMVectorMarker":if(e.markerPlacement&&r(e.markerPlacement,t,o,a,c,n,s),"CIMVectorMarker"===e.type&&e.markerGraphics)for(const i of e.markerGraphics)r(i,t,o,a,c,n,s),r(i.symbol,t,o,a,c,n,s)}}}const o=400;function a(e){const t=Math.max(1.25*e.width,20);return null!=e.effects&&e.effects.length>0?o:t}


/***/ }),

/***/ 32520:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $w: () => (/* binding */ G),
/* harmony export */   Fb: () => (/* binding */ h),
/* harmony export */   Fz: () => (/* binding */ C),
/* harmony export */   H_: () => (/* binding */ i),
/* harmony export */   J5: () => (/* binding */ n),
/* harmony export */   M: () => (/* binding */ u),
/* harmony export */   Ni: () => (/* binding */ s),
/* harmony export */   V5: () => (/* binding */ o),
/* harmony export */   Xx: () => (/* binding */ B),
/* harmony export */   YV: () => (/* binding */ I),
/* harmony export */   au: () => (/* binding */ A),
/* harmony export */   b5: () => (/* binding */ E),
/* harmony export */   bB: () => (/* binding */ M),
/* harmony export */   bg: () => (/* binding */ F),
/* harmony export */   cZ: () => (/* binding */ K),
/* harmony export */   cn: () => (/* binding */ q),
/* harmony export */   eo: () => (/* binding */ J),
/* harmony export */   kx: () => (/* binding */ D),
/* harmony export */   os: () => (/* binding */ t),
/* harmony export */   qM: () => (/* binding */ k),
/* harmony export */   rp: () => (/* binding */ c),
/* harmony export */   ti: () => (/* binding */ H),
/* harmony export */   v9: () => (/* binding */ L)
/* harmony export */ });
/* unused harmony exports attrVvColor, attrVvOpacity, attrVvRotation, attrVvSize, bitsetGenericLockColor, bitsetMarkerAlignmentMap, bitsetMarkerOutlineAllowColorOverride, bitsetMarkerScaleSymbolsProportionally, cRadToDeg, extrudeScalePlacementPadding, fillPositionPrecision, maxFilterCount, offsetPrecision, outlineScale, placementPadding, positionPrecision */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var i;!function(i){i[i.Geographic=0]="Geographic",i[i.Arithmatic=1]="Arithmatic"}(i||(i={}));const t=3.14159265359/180,c=3.14159265359/128,r=(/* unused pure expression or super */ null && (180/3.141592654)),a=(/* unused pure expression or super */ null && (1/8)),e=1,o=1,h=1.1,n=1,p=(/* unused pure expression or super */ null && (1/4)),g=(/* unused pure expression or super */ null && (1/8)),m=.2,A=24,G=8,f=8,s=1e-5,u=.05,v=2,x=0,b=1,d=2,j=3,k=1e-30,l=1,q=4,w=0,y=2,z=3,B=0,C=2,D=2,E=3,F=0,H=3,I=16777216,J=1.1,K=16,L=128,M=1;


/***/ }),

/***/ 43212:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K5: () => (/* binding */ h),
/* harmony export */   Kt: () => (/* binding */ A),
/* harmony export */   M8: () => (/* binding */ w),
/* harmony export */   Rj: () => (/* binding */ B),
/* harmony export */   _9: () => (/* binding */ b),
/* harmony export */   i6: () => (/* binding */ k),
/* harmony export */   mh: () => (/* binding */ v),
/* harmony export */   nb: () => (/* binding */ z),
/* harmony export */   p8: () => (/* binding */ E),
/* harmony export */   tL: () => (/* binding */ j),
/* harmony export */   xf: () => (/* binding */ C),
/* harmony export */   yS: () => (/* binding */ q),
/* harmony export */   zb: () => (/* binding */ D),
/* harmony export */   zy: () => (/* binding */ H)
/* harmony export */ });
/* unused harmony exports clipToUv, norm, oneOver, scalarMinus */
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39689);
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(32520);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function b(t){const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(12.9898),r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(78.233),i=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(43758.5453),o=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .dot */ .Om)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec2 */ .Zc)(n,r)),e=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .mod */ .zi)(o,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(3.14));return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .fract */ .jc)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .sin */ .F8)(e).multiply(i))}function w(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .equal */ .LC)(t,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(_constants_js__WEBPACK_IMPORTED_MODULE_2__/* .nanMagicNumber */ .qM))}function x(t){return y(t,u(255))}function j(t,n){return t.x.multiply(n.y).subtract(n.x.multiply(t.y))}function z(t){return t.multiply(2).subtract(1)}function g(t){return t.multiply(.5).add(.5)}function v(t,n){const r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(2**n);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .mod */ .zi)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .floor */ .RI)(t.divide(r)),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(2))}function h(t,n){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .greaterThan */ .MM)(v(t,n),(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(.5))}function k(n,r){return v(n,r+_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .maxHighlightReasons */ .U5)}function q(t,n){return v(t,n)}function A(t){const n=v(t.z,7),r=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(1).subtract(n),i=t.xyz.subtract((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec3 */ .eR)(0,0,(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .float */ .fV)(128)));return r.multiply(t).add(n.multiply(i))}function B(t){const n=(0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .vec4 */ .ln)(255/256,255/65536,255/16777216,255/4294967296);return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .dot */ .Om)(t,n)}function C(t){return (0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)((0,_graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .max */ .T9)(t.x,t.y),t.z),t.w)}function D(t){return new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(1).subtract(t)}function E(t){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(1))}function F(t){return new n(1).divide(t)}function G(t,r){return new n(t).subtract(r)}function H(t,r){return t.subtract(new _graph_glsl_js__WEBPACK_IMPORTED_MODULE_1__/* .Float */ .nt(r))}


/***/ }),

/***/ 51487:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ a)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/object.js
var object = __webpack_require__(76724);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Program.js + 3 modules
var Program = __webpack_require__(68449);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FBOAttachmentType.js
var FBOAttachmentType = __webpack_require__(35644);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js
var Texture = __webpack_require__(8595);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/textureUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function textureUtils_t(t,r,a){const i=new TextureDescriptor/* TextureDescriptor */.R(r.width,r.height);return i.dataType=r.dataType,r.depth&&(i.depth=r.depth),r.flipped&&(i.flipped=r.flipped),r.hasMipmap&&(i.hasMipmap=r.hasMipmap),i.internalFormat=r.internalFormat,r.isImmutable&&(i.isImmutable=r.isImmutable),r.isOpaque&&(i.isOpaque=r.isOpaque),r.maxAnisotropy&&(i.maxAnisotropy=r.maxAnisotropy),i.pixelFormat=r.pixelFormat,r.preMultiplyAlpha&&(i.preMultiplyAlpha=r.preMultiplyAlpha),r.samplingMode&&(i.samplingMode=r.samplingMode),r.target&&(i.target=r.target),i.uniform=r.uniform,r.unpackAlignment&&(i.unpackAlignment=r.unpackAlignment),r.wrapMode&&(i.wrapMode=r.wrapMode),new Texture/* Texture */.g(t,i,a)}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/typed/TypedShaderProgram.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const s=()=>Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram");function n(e,t,o){const i=t.length;if(i!==o){const n=new core_Error/* default */.A("Invalid Uniform",`Invalid length, expected ${o} but got ${i}`,{uniformName:e,values:t});s().errorOnce(n)}}class a{constructor(r,e,t,o,i,s){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=r,this.fragmentShader=e,this._locations=t,this._locationInfo=o,this._uniformBindings=i,this._transformFeedbackBindings=s}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(r){this._uniforms=r}cleanupTemporaryTextures(){for(const r of this._temporaryTextures)r.dispose();this._temporaryTextures=[]}bind(r){const e=this._uniforms;if(!this._program){const e=new Map;for(const[r,o]of this._locations)e.set(r,o);const t=[];for(const r of this._transformFeedbackBindings??[]){const{index:e,propertyKey:o}=r;t[e]=`v_${o}`}this._program=new Program/* Program */.B(r,this.vertexShader,this.fragmentShader,e,new Map,t)}const s=this._program;r.useProgram(s);for(const o of this._uniformBindings){const{shaderModulePath:a,uniformName:f,uniformType:m,uniformArrayLength:c}=o,u=(0,object/* getDeepValue */.wc)(a,e);if(null==u){if("sampler2D"===m)continue;throw new Error(`Failed to find uniform value for ${a}`)}switch("array"===m||"array-2d"===m?o.uniformArrayElementType:m){case"sampler2D":{const{unit:e,texture:t}=u;if(s.setUniform1i(f,e),"type"in t)r.bindTexture(t,e);else{const o=textureUtils_t(r,t.descriptor,t.data);r.bindTexture(o,e)}break}case"int":if(!c){s.setUniform1i(f,u);break}n(o.uniformName,u,c),s.setUniform1iv(f,u);break;case"float":if(!c){s.setUniform1f(f,u);break}n(o.uniformName,u,c),s.setUniform1fv(f,u);break;case"vec2":if(!c){s.setUniform2f(f,u[0],u[1]);break}n(o.uniformName,u,c),s.setUniform2fv(f,u.flat());break;case"vec3":if(!c){s.setUniform3f(f,u[0],u[1],u[2]);break}n(o.uniformName,u,c),s.setUniform3fv(f,u.flat());break;case"vec4":if(!c){s.setUniform4f(f,u[0],u[1],u[2],u[3]);break}n(o.uniformName,u,c),s.setUniform4fv(f,u.flat());break;case"mat3":s.setUniformMatrix3fv(f,u);break;case"mat4":s.setUniformMatrix4fv(f,u);break;default:throw new Error(`Unable to set uniform for type ${m}`)}}}}


/***/ }),

/***/ 97394:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 13294:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 75472:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Q: () => (/* binding */ n)
});

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/shaderRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e={background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\ngl_FragColor = u_color;\n}","background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\nvec3 v_pos = u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nlowp vec4 color = texture2D(u_tex, v_uv);\ngl_FragColor = color * u_opacity;\n}","bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_pos , 0.0, 1.0);\nv_uv = a_tex;\n}"},debug:{overlay:{"overlay.frag":"precision mediump float;\nvarying vec4 v_color;\nvoid main(void) {\ngl_FragColor = v_color;\n}","overlay.vert":"attribute vec3 a_PositionAndFlags;\nuniform mat3 u_dvsMat3;\nuniform vec4 u_colors[4];\nuniform float u_opacities[4];\nvarying vec4 v_color;\nvoid main(void) {\nvec2 position = a_PositionAndFlags.xy;\nfloat flags = a_PositionAndFlags.z;\nint colorIndex = int(mod(flags, 4.0));\nvec4 color;\nfor (int i = 0; i < 4; i++) {\ncolor = u_colors[i];\nif (i == colorIndex) {\nbreak;\n}\n}\nint opacityIndex = int(mod(floor(flags / 4.0), 4.0));\nfloat opacity;\nfor (int i = 0; i < 4; i++) {\nopacity = u_opacities[i];\nif (i == opacityIndex) {\nbreak;\n}\n}\nv_color = color * opacity;\ngl_Position = vec4((u_dvsMat3 * vec3(position, 1.0)).xy, 0.0, 1.0);\n}"}},dot:{dot:{"dot.frag":"precision mediump float;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nuniform highp float u_tileZoomFactor;\nvoid main()\n{\nfloat dist = length(gl_PointCoord - vec2(.5, .5)) * 2.;\nfloat alpha = smoothstep(0., 1., v_invEdgeRatio * (dist - v_dotRatio) + 1.);\ngl_FragColor = v_color * alpha;\n}","dot.vert":"precision highp float;\nattribute vec2 a_pos;\nuniform sampler2D u_texture;\nuniform highp mat3 u_dvsMat3;\nuniform highp float u_tileZoomFactor;\nuniform highp float u_dotSize;\nuniform highp float u_pixelRatio;\nvarying vec2 v_pos;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nconst float EPSILON = 0.000001;\nvoid main()\n{\nmat3 tileToTileTexture = mat3(  1., 0., 0.,\n0., -1., 0.,\n0., 1., 1.  );\nvec3 texCoords = tileToTileTexture * vec3(a_pos.xy / 512., 1.);\nv_color = texture2D(u_texture, texCoords.xy);\nfloat smoothEdgeWidth = max(u_dotSize / 2., 1.) ;\nfloat z = 0.;\nz += 2.0 * step(v_color.a, EPSILON);\ngl_PointSize = (smoothEdgeWidth + u_dotSize);\ngl_Position = vec4((u_dvsMat3 * vec3(a_pos + .5, 1.)).xy, z, 1.);\nv_dotRatio = u_dotSize / gl_PointSize;\nv_invEdgeRatio = -1. / ( smoothEdgeWidth / gl_PointSize );\ngl_PointSize  *= (u_pixelRatio * u_tileZoomFactor);\n}"}},filtering:{"bicubic.glsl":"vec4 computeWeights(float v) {\nfloat b = 1.0 / 6.0;\nfloat v2 = v * v;\nfloat v3 = v2 * v;\nfloat w0 = b * (-v3 + 3.0 * v2 - 3.0 * v + 1.0);\nfloat w1 = b * (3.0 * v3  - 6.0 * v2 + 4.0);\nfloat w2 = b * (-3.0 * v3 + 3.0 * v2 + 3.0 * v + 1.0);\nfloat w3 = b * v3;\nreturn vec4(w0, w1, w2, w3);\n}\nvec4 bicubicOffsetsAndWeights(float v) {\nvec4 w = computeWeights(v);\nfloat g0 = w.x + w.y;\nfloat g1 = w.z + w.w;\nfloat h0 = 1.0 - (w.y / g0) + v;\nfloat h1 = 1.0 + (w.w / g1) - v;\nreturn vec4(h0, h1, g0, g1);\n}\nvec4 sampleBicubicBSpline(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 eX = vec2(1.0 / texSize.x, 0.0);\nvec2 eY = vec2(0.0, 1.0 / texSize.y);\nvec2 texel = coords * texSize - 0.5;\nvec3 hgX = bicubicOffsetsAndWeights(fract(texel).x).xyz;\nvec3 hgY = bicubicOffsetsAndWeights(fract(texel).y).xyz;\nvec2 coords10 = coords + hgX.x * eX;\nvec2 coords00 = coords - hgX.y * eX;\nvec2 coords11 = coords10 + hgY.x * eY;\nvec2 coords01 = coords00 + hgY.x * eY;\ncoords10 = coords10 - hgY.y * eY;\ncoords00 = coords00 - hgY.y * eY;\nvec4 color00 = texture2D(sampler, coords00);\nvec4 color10 = texture2D(sampler, coords10);\nvec4 color01 = texture2D(sampler, coords01);\nvec4 color11 = texture2D(sampler, coords11);\ncolor00 = mix(color00, color01, hgY.z);\ncolor10 = mix(color10, color11, hgY.z);\ncolor00 = mix(color00, color10, hgX.z);\nreturn color00;\n}","bilinear.glsl":"vec4 sampleBilinear(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 texelStart = floor(coords * texSize);\nvec2 coord0 = texelStart / texSize;\nvec2 coord1 = (texelStart +  vec2(1.0, 0.0)) / texSize;\nvec2 coord2 = (texelStart +  vec2(0.0, 1.0)) / texSize;\nvec2 coord3 = (texelStart +  vec2(1.0, 1.0)) / texSize;\nvec4 color0 = texture2D(sampler, coord0);\nvec4 color1 = texture2D(sampler, coord1);\nvec4 color2 = texture2D(sampler, coord2);\nvec4 color3 = texture2D(sampler, coord3);\nvec2 blend = fract(coords * texSize);\nvec4 color01 = mix(color0, color1, blend.x);\nvec4 color23 = mix(color2, color3, blend.x);\nvec4 color = mix(color01, color23, blend.y);\n#ifdef NNEDGE\nfloat alpha = floor(color0.a * color1.a * color2.a * color3.a + 0.5);\ncolor = color * alpha + (1.0 - alpha) * texture2D(sampler, coords);\n#endif\nreturn color;\n}","epx.glsl":"vec4 sampleEPX(sampler2D sampler, float size, vec2 coords, vec2 texSize) {\nvec2 invSize = 1.0 / texSize;\nvec2 texel = coords * texSize;\nvec2 texel_i = floor(texel);\nvec2 texel_frac = fract(texel);\nvec4 colorP = texture2D(sampler, texel_i * invSize);\nvec4 colorP1 = vec4(colorP);\nvec4 colorP2 = vec4(colorP);\nvec4 colorP3 = vec4(colorP);\nvec4 colorP4 = vec4(colorP);\nvec4 colorA = texture2D(sampler, (texel_i - vec2(0.0, 1.0)) * invSize);\nvec4 colorB = texture2D(sampler, (texel_i + vec2(1.0, 0.0)) * invSize);\nvec4 colorC = texture2D(sampler, (texel_i - vec2(1.0, 0.0)) * invSize);\nvec4 colorD = texture2D(sampler, (texel_i + vec2(0.0, 1.0)) * invSize);\nif (colorC == colorA && colorC != colorD && colorA != colorB) {\ncolorP1 = colorA;\n}\nif (colorA == colorB && colorA != colorC && colorB != colorD) {\ncolorP2 = colorB;\n}\nif (colorD == colorC && colorD != colorB && colorC != colorA) {\ncolorP3 = colorC;\n}\nif (colorB == colorD && colorB != colorA && colorD != colorC) {\ncolorP4 = colorD;\n}\nvec4 colorP12 = mix(colorP1, colorP2, texel_frac.x);\nvec4 colorP34 = mix(colorP1, colorP2, texel_frac.x);\nreturn mix(colorP12, colorP34, texel_frac.y);\n}"},heatmap:{heatmapResolve:{"heatmapResolve.frag":"precision highp float;\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 4.0\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform sampler2D u_texture;\nuniform sampler2D u_gradient;\nuniform vec2 u_densityMinAndInvRange;\nuniform float u_densityNormalization;\nvarying vec2 v_uv;\nvoid main() {\nvec4 data = texture2D(u_texture, v_uv);\nfloat density = data.r * COMPRESSION_FACTOR;\ndensity *= u_densityNormalization;\ndensity = (density - u_densityMinAndInvRange.x) * u_densityMinAndInvRange.y;\nvec4 color = texture2D(u_gradient, vec2(density, 0.5));\ngl_FragColor = vec4(color.rgb * color.a, color.a);\n}","heatmapResolve.vert":"precision highp float;\nattribute vec2 a_pos;\nvarying vec2 v_uv;\nvoid main() {\nv_uv = a_pos;\ngl_Position = vec4(a_pos * 2.0 - 1.0, 1., 1.);\n}"}},highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump float u_sigma;\nuniform sampler2D u_texture;\nmediump float gauss1(mediump vec2 dir) {\nreturn exp(-dot(dir, dir) / (2.0 * u_sigma * u_sigma));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\nreturn u_channelSelector * sample;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\nmediump float w = gauss1(i * u_direction.xy);\ntot += selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\nweight += w;\n}\nvoid main(void) {\nmediump float tot = 0.0;\nmediump float weight = 0.0;\naccumGauss1(-5.0, tot, weight);\naccumGauss1(-4.0, tot, weight);\naccumGauss1(-3.0, tot, weight);\naccumGauss1(-2.0, tot, weight);\naccumGauss1(-1.0, tot, weight);\naccumGauss1(0.0, tot, weight);\naccumGauss1(1.0, tot, weight);\naccumGauss1(2.0, tot, weight);\naccumGauss1(3.0, tot, weight);\naccumGauss1(4.0, tot, weight);\naccumGauss1(5.0, tot, weight);\ngl_FragColor = vec4(0.0, 0.0, 0.0, tot / weight);\n}","highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump float u_sigma;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\nmediump float y = texture2D(u_texture, v_texcoord)[3];\nconst mediump float y0 = 0.5;\nmediump float m0 = 1.0 / (sqrt(2.0 * 3.1415) * u_sigma);\nmediump float d = (y - y0) / m0;\nreturn d;\n}\nmediump vec4 shade(mediump float d) {\nmediump float mappedDistance = (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\nmappedDistance = clamp(mappedDistance, 0.0, 1.0);\nreturn texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\nmediump float d = estimateDistance();\ngl_FragColor = shade(d);\n}","textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D filterFlags;\nuniform highp sampler2D animation;\nuniform highp sampler2D gpgpu;\nuniform highp sampler2D visualVariableData;\nuniform highp sampler2D dataDriven0;\nuniform highp sampler2D dataDriven1;\nuniform highp sampler2D dataDriven2;\nuniform float size;\nhighp vec2 getAttributeDataCoords(in highp vec3 id) {\nhighp vec3  texel = unpackDisplayIdTexel(id);\nhighp float u32 = float(int(texel.r) + int(texel.g) * 256 + int(texel.b) * 256 * 256);\nhighp float col = mod(u32, size);\nhighp float row = (u32 - col) / size;\nhighp float u = col / size;\nhighp float v = row / size;\nreturn vec2(u, v);\n}\nhighp vec2 getAttributeDataTextureCoords(in highp vec3 id) {\nreturn (getAttributeDataCoords(id) * 2.0) - 1.0 + (.5 / vec2(size));\n}\nhighp vec4 getFilterData(in highp vec3 id) {\nvec2 coords = getAttributeDataCoords(id);\nreturn texture2D(filterFlags, coords);\n}\nhighp vec4 getAnimation(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(animation, coords);\n}\nhighp vec4 getVisualVariableData(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(visualVariableData, coords);\n}\nhighp vec4 getDataDriven0(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven0, coords);\n}\nhighp vec4 getDataDriven1(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven1, coords);\n}\nhighp vec4 getGPGPU(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(gpgpu, coords);\n}\nhighp vec4 getDataDriven2(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(dataDriven2, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\nbool isMagic = v.x == 255.0 && v.y == 255.0;\nif (isMagic) {\nreturn NAN_MAGIC_NUMBER;\n}\nreturn (v.x + v.y * float(0x100)) - 32768.0;\n}","barycentric.glsl":"float inTriangle(vec3 bary) {\nvec3 absBary = abs(bary);\nreturn step((absBary.x + absBary.y + absBary.z), 1.05);\n}\nvec3 xyToBarycentric(in vec2 pos, in vec2 v0,  in vec2 v1, in vec2 v2) {\nmat3 xyToBarycentricMat3 = mat3(\nv1.x * v2.y - v2.x * v1.y, v2.x * v0.y - v0.x * v2.y, v0.x * v1.y - v1.x * v0.y,\nv1.y - v2.y, v2.y - v0.y, v0.y - v1.y,\nv2.x - v1.x, v0.x - v2.x, v1.x - v0.x\n);\nfloat A2 = v0.x * (v1.y - v2.y) + v1.x * (v2.y - v0.y) + v2.x * (v0.y - v1.y);\nreturn (1. / A2) * xyToBarycentricMat3 * vec3(1., pos);\n}","constants.glsl":"const float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_RAD_TO_DEG = 180.0 / 3.141592654;\nconst float POSITION_PRECISION = 1.0 / 8.0;\nconst float FILL_POSITION_PRECISION = 1.0 / 1.0;\nconst float SOFT_EDGE_RATIO = 1.0;\nconst float THIN_LINE_WIDTH_FACTOR = 1.1;\nconst float THIN_LINE_HALF_WIDTH = 1.0;\nconst float EXTRUDE_SCALE_PLACEMENT_PADDING = 1.0 / 4.0;\nconst float OFFSET_PRECISION = 1.0 / 8.0;\nconst float OUTLINE_SCALE = 1.0 / 5.0;\nconst float SDF_FONT_SIZE = 24.0;\nconst float MAX_SDF_DISTANCE = 8.0;\nconst float PLACEMENT_PADDING = 8.0;\nconst float EPSILON = 0.00001;\nconst float EPSILON_HITTEST = 0.05;\nconst int MAX_FILTER_COUNT = 2;\nconst int ATTR_VV_SIZE = 0;\nconst int ATTR_VV_COLOR = 1;\nconst int ATTR_VV_OPACITY = 2;\nconst int ATTR_VV_ROTATION = 3;\nconst highp float NAN_MAGIC_NUMBER = 1e-30;\nconst int BITSET_GENERIC_LOCK_COLOR = 1;\nconst int BITSET_GENERIC_CONSIDER_ALPHA_ONLY = 4;\nconst int BITSET_MARKER_ALIGNMENT_MAP = 0;\nconst int BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE = 2;\nconst int BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY = 3;\nconst int BITSET_TYPE_FILL_OUTLINE = 0;\nconst int BITSET_FILL_RANDOM_PATTERN_OFFSET = 2;\nconst int BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR = 3;\nconst int BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR = 5;\nconst int BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR = 6;\nconst int BITSET_LINE_SCALE_DASH = 2;",fill:{"common.glsl":"#include <materials/symbologyTypeUtils.glsl>\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform lowp vec4 u_isActive[ 2 ];\nuniform highp float u_dotValue;\nuniform highp float u_tileDotsOverArea;\nuniform highp float u_dotTextureDotCount;\nuniform mediump float u_tileZoomFactor;\n#endif\nvarying highp vec3 v_id;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying mediump vec4 v_aux1;\n#ifdef PATTERN\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvarying lowp float v_isOutline;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvarying highp vec2 v_dotTextureCoords;\nvarying highp vec4 v_dotThresholds[ 2 ];\n#endif","fill.frag":"precision highp float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/fill/common.glsl>\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\nlowp vec4 drawLine() {\nfloat v_lineWidth = v_aux1.x;\nvec2  v_normal    = v_aux1.yz;\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineWidth,\nv_opacity,\nv_id\n);\nreturn shadeLine(inputs);\n}\n#endif\nlowp vec4 drawFill() {\nlowp vec4 out_color = vec4(0.);\n#ifdef HITTEST\nout_color = v_color;\n#elif defined(PATTERN)\nmediump vec4 v_tlbr = v_aux1;\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\nout_color = v_opacity * v_color * color;\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY && !defined(HIGHLIGHT)\nvec4 textureThresholds0 = texture2D(u_dotTextures[0], v_dotTextureCoords);\nvec4 textureThresholds1 = texture2D(u_dotTextures[1], v_dotTextureCoords);\nvec4 difference0 = v_dotThresholds[0] - textureThresholds0;\nvec4 difference1 = v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\nvec4 isPositive0 = step(0.0, difference0);\nvec4 isPositive1 = step(0.0, difference1);\nfloat weightSum = dot(isPositive0, difference0) + dot(isPositive1, difference1);\nfloat lessThanEqZero = step(weightSum, 0.0);\nfloat greaterThanZero = 1.0 - lessThanEqZero ;\nfloat divisor = (weightSum + lessThanEqZero);\nvec4 weights0 = difference0 * isPositive0 / divisor;\nvec4 weights1 = difference1 * isPositive1 / divisor;\nvec4 dotColor = u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\nvec4 preEffectColor = greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\nfloat diffMax = max(max4(difference0), max4(difference1));\nfloat lessThanZero = step(diffMax, 0.0);\nfloat greaterOrEqZero = 1.0 - lessThanZero;\nvec4 isMax0 = step(diffMax, difference0);\nvec4 isMax1 = step(diffMax, difference1);\nvec4 dotColor = u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\nvec4 preEffectColor = greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\nout_color = preEffectColor;\n#else\nout_color = v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\nout_color.a = 1.0;\n#endif\nreturn out_color;\n}\nvoid main() {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (v_isOutline > 0.5) {\ngl_FragColor = drawLine();\n} else {\ngl_FragColor = drawFill();\n}\n#else\ngl_FragColor = drawFill();\n#endif\n}","fill.vert":"#include <materials/symbologyTypeUtils.glsl>\n#define PACKED_LINE\nprecision highp float;\nattribute float a_bitset;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color = vec4(0.0, 0.0, 0.0, 1.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_aux2;\nattribute vec4 a_aux3;\n#ifndef SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\nattribute vec4 a_aux1;\nattribute vec2 a_zoomRange;\n#else\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#endif\n#endif\nuniform vec2 u_tileOffset;\nuniform vec2 u_maxIntNumOfCrossing;\n#include <util/encoding.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/fill/common.glsl>\n#include <materials/fill/hittest.glsl>\nconst float INV_SCALE_COMPRESSION_FACTOR = 1.0 / 128.0;\nconst float MAX_REPRESENTABLE_INT = 16777216.0;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\nreturn featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\nvoid drawLine(out lowp vec4 out_color, out highp vec3 out_pos) {\nLineData outputs = buildLine(\nout_pos,\na_id,\na_pos,\na_color,\n(a_aux3.xy - 128.) / 16.,\n(a_aux3.zw - 128.) / 16.,\n0.,\na_aux2.z / 16.,\na_bitset,\nvec4(0.),\nvec2(0.),\na_aux2.w / 16.\n);\nv_id      = outputs.id;\nv_opacity = outputs.opacity;\nv_aux1    = vec4(outputs.lineHalfWidth, outputs.normal, 0.);\nout_color = outputs.color;\n}\n#endif\nvoid drawFill(out lowp vec4 out_color, out highp vec3 out_pos) {\nfloat a_bitSet = a_bitset;\nout_color = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity = getOpacity();\nv_id      = norm(a_id);\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nmat3 tileToTileNormalized = mat3(  2. / 512.,  0.,  0.,\n0., -2. / 512.,  0.,\n-1.,  1.,  1.  );\nout_pos   = tileToTileNormalized * vec3((a_pos * FILL_POSITION_PRECISION), 1.);\n#else\nout_pos   = u_dvsMat3 * vec3(a_pos * FILL_POSITION_PRECISION, 1.);\n#endif\n#ifdef PATTERN\nvec4  a_tlbr   = a_aux1;\nfloat a_width  = a_aux2.x;\nfloat a_height = a_aux2.y;\nvec2  a_offset = a_aux2.zw;\nvec2  a_scale  = a_aux3.xy;\nfloat a_angle  = a_aux3.z;\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR) > 0.5) {\na_width *= INV_SCALE_COMPRESSION_FACTOR;\n}\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR) > 0.5) {\na_height *= INV_SCALE_COMPRESSION_FACTOR;\n}\nvec2 scale = INV_SCALE_COMPRESSION_FACTOR * a_scale;\nfloat width = u_zoomFactor * a_width * scale.x;\nfloat height = u_zoomFactor * a_height * scale.y;\nfloat angle = C_256_TO_RAD * a_angle;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nfloat dx = 0.0;\nfloat dy = 0.0;\nif (getBit(a_bitset, BITSET_FILL_RANDOM_PATTERN_OFFSET) > 0.5) {\nfloat id = rgba2float(vec4(a_id, 0.0));\ndx = rand(vec2(id, 0.0));\ndy = rand(vec2(0.0, id));\n}\nmat3 patternMatrix = mat3(cosA / width, sinA / height, 0,\n-sinA / width, cosA / height, 0,\ndx,            dy,           1);\nvec2 patternSize = vec2(a_width, a_height);\nvec2 numPatternsPerMaxInt = vec2(MAX_REPRESENTABLE_INT) / patternSize;\nvec2 maxIntCrossingOffsetCorrection = patternSize * fract(u_maxIntNumOfCrossing * numPatternsPerMaxInt);\nvec2 tileOffset = u_tileOffset + maxIntCrossingOffsetCorrection - 0.5 * patternSize;\ntileOffset = vec2(tileOffset.x * cosA - tileOffset.y * sinA, tileOffset.x * sinA + tileOffset.y * cosA);\ntileOffset = mod(tileOffset, patternSize);\nvec2 symbolOffset = u_zoomFactor * scale * vec2(a_offset - tileOffset) / vec2(width, height);\nv_tileTextureCoord = (patternMatrix * vec3(a_pos * FILL_POSITION_PRECISION, 1.0)).xy - symbolOffset;\nv_aux1 = a_tlbr / u_mosaicSize.xyxy;\nv_sampleAlphaOnly = getBit(a_bitset, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\nif (getBit(a_bitSet, BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR) > 0.5) {\n#ifdef VV_COLOR\nv_sampleAlphaOnly *= (1.0 - float(isNan(VV_ADATA[ATTR_VV_COLOR]))) * (1.0 - getBit(a_bitSet, BITSET_GENERIC_LOCK_COLOR));\n#else\nv_sampleAlphaOnly = 0.0;\n#endif\n}\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 ddAttributeData0 = getAttributeData2(a_id) * u_isActive[0] * a_inverseArea;\nvec4 ddAttributeData1 = getAttributeData3(a_id) * u_isActive[1] * a_inverseArea;\nfloat size = u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\nv_dotThresholds[0] = dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\nv_dotThresholds[1] = dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\nv_dotTextureCoords = (a_pos * FILL_POSITION_PRECISION + 0.5) / size;\n#endif\n}\n#ifdef HITTEST\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE) > 0.5) {\nout_pos = vec3(0., 0., 2.);\nreturn;\n}\n#endif\nhittestFill(out_color, out_pos);\ngl_PointSize = 1.0;\n}\n#elif defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\nv_isOutline = getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE);\nif (v_isOutline > 0.5) {\ndrawLine(out_color, out_pos);\n} else {\ndrawFill(out_color, out_pos);\n}\n}\n#else\n#define draw drawFill\n#endif\nvoid main()\n{\nINIT;\nhighp vec3 pos  = vec3(0.);\nhighp vec4 color  = vec4(0.);\ndraw(color, pos);\nv_color = color;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}","hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestFill(\nout lowp vec4 out_color,\nout highp vec3 out_pos\n) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * FILL_POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * FILL_POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * FILL_POSITION_PRECISION, 1.);\nfloat hittestDist = u_hittestDist;\nfloat dist = distPointTriangle(u_hittestPos, pos.xy, pos1.xy, pos2.xy);\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist < 0. || dist >= hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist == 0. ? (1. / 255.) : 0.);\n}\n#endif"},hittest:{"common.glsl":"#ifdef HITTEST\nuniform float hittestDist;\nuniform highp vec2 hittestPos;\nfloat projectScalar(vec2 a, vec2 b) {\nreturn dot(a, normalize(b));\n}\nfloat distPointSegment(vec2 p0, vec2 p1, vec2 p2) {\nvec2 L = p2 - p1;\nvec2 A = p0 - p1;\nfloat projAL = projectScalar(A, L);\nfloat t = clamp(projAL / length(L), 0., 1.);\nreturn distance(p0, p1 + t * (p2 - p1));\n}\nvoid hittestMarker(out lowp vec4 out_color, out highp vec3 out_pos, in highp vec3 pos, float size) {\nfloat dist = distance(pos, vec3(hittestPos, 1.));\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif ((dist - size) > hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, (dist - size) < 0. ? (1. / 255.) : 0.);\n}\nfloat intersectPointTriangleBary(vec2 p, vec2 a, vec2 b, vec2 c) {\nreturn inTriangle(xyToBarycentric(p, a, b, c));\n}\nfloat distPointTriangle(vec2 p, vec2 a, vec2 b, vec2 c) {\nvec2 ba = b - a;\nvec2 ca = c - a;\nfloat crossProduct = ba.x * ca.y - ca.x * ba.y;\nbool isParallel = crossProduct < EPSILON_HITTEST && crossProduct > -EPSILON_HITTEST;\nif (isParallel) {\nreturn -1.;\n}\nif (intersectPointTriangleBary(p.xy, a, b, c) == 1.) {\nreturn 0.;\n}\nfloat distAB = distPointSegment(p, a, b);\nfloat distBC = distPointSegment(p, b, c);\nfloat distCA = distPointSegment(p, c, a);\nreturn min(min(distAB, distBC), distCA);\n}\n#endif"},icon:{"common.glsl":"#include <util/encoding.glsl>\nuniform lowp vec2 u_mosaicSize;\nvarying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying highp vec4 v_sizeTex;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\nvarying mediump float v_overridingOutlineColor;\nvarying mediump float v_isThin;\n#endif\n#ifdef SDF\nvec4 getColor(vec2 v_size, vec2 v_tex) {\n#ifdef HITTEST\nlowp vec4 fillPixelColor = vec4(1.0);\n#else\nlowp vec4 fillPixelColor = v_color;\n#endif\nfloat d = 0.5 - rgba2float(texture2D(u_texture, v_tex));\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * size * SOFT_EDGE_RATIO * v_distRatio;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nfloat outlineWidth = v_outlineWidth;\n#ifdef HIGHLIGHT\noutlineWidth = max(outlineWidth, 4.0 * v_isThin);\n#endif\nif (outlineWidth > 0.25) {\nlowp vec4 outlinePixelColor = v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\nfloat clampedOutlineSize = min(outlineWidth, size);\noutlinePixelColor *= clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\nreturn v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n}\nreturn v_opacity * fillPixelColor;\n}\n#else\nvec4 getColor(vec2 _v_size, vec2 v_tex) {\nlowp vec4 texColor = texture2D(u_texture, v_tex);\nreturn v_opacity * texColor * v_color;\n}\n#endif",heatmapAccumulate:{"common.glsl":"varying lowp vec4 v_hittestResult;\nvarying mediump vec2 v_offsetFromCenter;\nvarying highp float v_fieldValue;","heatmapAccumulate.frag":"precision mediump float;\n#include <materials/icon/heatmapAccumulate/common.glsl>\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 0.25\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform lowp sampler2D u_texture;\nvoid main() {\n#ifdef HITTEST\ngl_FragColor = v_hittestResult;\n#else\nfloat radius = length(v_offsetFromCenter);\nfloat shapeWeight = step(radius, 1.0);\nfloat oneMinusRadiusSquared = 1.0 - radius * radius;\nfloat kernelWeight = oneMinusRadiusSquared * oneMinusRadiusSquared;\ngl_FragColor = vec4(shapeWeight * kernelWeight * v_fieldValue * COMPRESSION_FACTOR);\n#endif\n}","heatmapAccumulate.vert":"precision highp float;\nattribute vec2 a_vertexOffset;\nvec4 a_color = vec4(0.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\nuniform float u_radius;\nuniform float u_isFieldActive;\n#include <materials/vcommon.glsl>\n#include <materials/hittest/common.glsl>\n#include <materials/icon/heatmapAccumulate/common.glsl>\nvoid main() {\nfloat filterFlags = getFilterFlags();\n#ifdef HITTEST\nhighp vec4 out_hittestResult = vec4(0.);\nhighp vec3 out_pos = vec3(0.);\nvec3 pos = u_viewMat3 * u_tileMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nhittestMarker(out_hittestResult, out_pos, pos, u_radius);\nv_hittestResult = out_hittestResult;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(a_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\nv_offsetFromCenter = sign(a_vertexOffset);\nv_fieldValue = getAttributeData2(a_id).x * u_isFieldActive + 1.0 - u_isFieldActive;\nvec3 centerPos = u_dvsMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nvec3 vertexPos = centerPos + u_displayViewMat3 * vec3(v_offsetFromCenter, 0.0) * u_radius;\ngl_Position = vec4(clip(a_color, vertexPos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},"hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_vertexOffset1;\nattribute vec2 a_vertexOffset2;\nattribute vec2 a_texCoords1;\nattribute vec2 a_texCoords2;\nvec2 getTextureCoords(in vec3 bary, in vec2 texCoords0, in vec2 texCoords1, in vec2 texCoords2) {\nreturn texCoords0 * bary.x + texCoords1 * bary.y + texCoords2 * bary.z;\n}\nvoid hittestIcon(\ninout lowp vec4 out_color,\nout highp vec3 out_pos,\nin vec3 pos,\nin vec3 offset,\nin vec2 size,\nin float scaleFactor,\nin float isMapAligned\n) {\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nvec3 posBase = u_viewMat3 * u_tileMat3  * pos;\nvec3 offset1 = scaleFactor * vec3(a_vertexOffset1 / 16.0, 0.);\nvec3 offset2 = scaleFactor * vec3(a_vertexOffset2 / 16.0, 0.);\nvec2 pos0    = (posBase + getMatrixNoDisplay(isMapAligned) * offset).xy;\nvec2 pos1    = (posBase + getMatrixNoDisplay(isMapAligned) * offset1).xy;\nvec2 pos2    = (posBase + getMatrixNoDisplay(isMapAligned) * offset2).xy;\nvec3 bary0 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary1 = xyToBarycentric(u_hittestPos + vec2(0., -u_hittestDist), pos0, pos1, pos2);\nvec3 bary2 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary3 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary4 = xyToBarycentric(u_hittestPos, pos0, pos1, pos2);\nvec3 bary5 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary6 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec3 bary7 = xyToBarycentric(u_hittestPos + vec2(0., u_hittestDist), pos0, pos1, pos2);\nvec3 bary8 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec2 tex0 = a_texCoords  / u_mosaicSize;\nvec2 tex1 = a_texCoords1 / u_mosaicSize;\nvec2 tex2 = a_texCoords2 / u_mosaicSize;\nfloat alphaSum = 0.;\nalphaSum += inTriangle(bary0) * getColor(size, getTextureCoords(bary0, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary1) * getColor(size, getTextureCoords(bary1, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary2) * getColor(size, getTextureCoords(bary2, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary3) * getColor(size, getTextureCoords(bary3, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary4) * getColor(size, getTextureCoords(bary4, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary5) * getColor(size, getTextureCoords(bary5, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary6) * getColor(size, getTextureCoords(bary6, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary7) * getColor(size, getTextureCoords(bary7, tex0, tex1, tex2)).a;\nout_pos.z += step(alphaSum, .05) * 2.0;\nout_color = vec4(1. / 255., 0., 0., alphaSum / 255.);\n}\n#endif","icon.frag":"precision mediump float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/icon/common.glsl>\nvoid main()\n{\n#ifdef HITTEST\nvec4 color = v_color;\n#else\nvec4 color = getColor(v_sizeTex.xy, v_sizeTex.zw);\n#endif\n#ifdef HIGHLIGHT\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","icon.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/icon/common.glsl>\n#include <materials/icon/hittest.glsl>\nfloat getMarkerScaleFactor(inout vec2 size, in float referenceSize) {\n#ifdef VV_SIZE\nfloat f = getSize(size.y) / size.y;\nfloat sizeFactor = size.y / referenceSize;\nreturn getSize(referenceSize) / referenceSize;\n#else\nreturn 1.;\n#endif\n}\nvoid main()\n{\nINIT;\nfloat a_bitSet = a_bitSetAndDistRatio.x;\nvec3  pos           = vec3(a_pos * POSITION_PRECISION, 1.0);\nvec2  size          = a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec3  offset        = vec3(a_vertexOffset / 16.0, 0.);\nfloat outlineSize   = a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 128.0;\nfloat isMapAligned  = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nfloat referenceSize = a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0;\nfloat scaleSymbolProportionally = getBit(a_bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\nfloat scaleFactor               = getMarkerScaleFactor(size, referenceSize);\nsize.xy     *= scaleFactor;\noffset.xy   *= scaleFactor;\noutlineSize *= scaleSymbolProportionally * (scaleFactor - 1.0) + 1.0;\nvec2 v_tex   = a_texCoords / u_mosaicSize;\nfloat filterFlags = getFilterFlags();\nv_color    = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity  = getOpacity();\nv_id       = norm(a_id);\nv_pos      = u_dvsMat3 * pos + getMatrix(isMapAligned) * getRotation()  * offset;\nv_sizeTex  = vec4(size.xy, v_tex.xy);\n#ifdef SDF\nv_isThin   = getBit(a_bitSet, BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE);\n#ifdef VV_COLOR\nv_overridingOutlineColor = v_isThin;\n#else\nv_overridingOutlineColor = 0.0;\n#endif\nv_outlineWidth = min(outlineSize, max(max(size.x, size.y) - 0.99, 0.0));\nv_outlineColor = a_outlineColor;\nv_distRatio = a_bitSetAndDistRatio.y / 128.0;\n#endif\n#ifdef HITTEST\nhighp vec4 out_color = vec4(0.);\nhighp vec3 out_pos   = vec3(0.);\nhittestIcon(out_color, out_pos, pos, offset, size, scaleFactor, isMapAligned);\nv_color = out_color;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform mediump float u_mapRotation;\nuniform mediump float u_mapAligned;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\nvarying lowp vec4 v_animation;","label.frag":"#include <materials/text/text.frag>","label.vert":"precision highp float;\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_glyphData;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\nfloat glyphAngle = angle * 360.0 / 254.0;\nfloat mapAngle = u_mapRotation * 360.0 / 254.0;\nfloat diffAngle = min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\nfloat z = 0.0;\nz += u_mapAligned * (2.0 * (1.0 - step(minZoom, u_currentZoom)));\nz += u_mapAligned * 2.0 * step(90.0, diffAngle);\nz += 2.0 * (1.0 - step(u_currentZoom, maxZoom));\nreturn z;\n}\nvoid main()\n{\nINIT;\nfloat groupMinZoom    = getMinZoom();\nfloat glyphMinZoom    = a_glyphData.x;\nfloat glyphMaxZoom    = a_glyphData.y;\nfloat glyphAngle      = a_glyphData.z;\nfloat a_isBackground  = a_glyphData.w;\nfloat a_minZoom          = max(groupMinZoom, glyphMinZoom);\nfloat a_placementPadding = a_refSymbolAndPlacementOffset.x * EXTRUDE_SCALE_PLACEMENT_PADDING;\nvec2  a_placementDir     = unpack_u8_nf32(a_refSymbolAndPlacementOffset.zw);\nfloat a_refSymbolSize    = a_refSymbolAndPlacementOffset.y;\nfloat fontSize           = a_texAndSize.z;\nfloat haloSize           = a_texAndSize.w * OUTLINE_SCALE;\nvec2  vertexOffset = a_vertexOffset * OFFSET_PRECISION;\nvec3  pos          = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat z            = getZ(a_minZoom, glyphMaxZoom, glyphAngle);\nfloat fontScale    = fontSize / SDF_FONT_SIZE;\nfloat halfSize     = getSize(a_refSymbolSize) / 2.0;\nfloat animation    = pow(getAnimationState(), vec4(2.0)).r;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor = (isBackground + isText) * a_color;\nv_color     = animation * ((1.0 - u_isHaloPass) * nonHaloColor + (u_isHaloPass * a_haloColor));\nv_opacity   = 1.0;\nv_tex       = a_texCoords / u_mosaicSize;\nv_edgeDistanceOffset = u_isHaloPass * haloSize / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\nvec2 placementOffset = a_placementDir * (halfSize + a_placementPadding);\nvec3 glyphOffset     = u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\nvec3 v_pos           = vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\ngl_Position = vec4(v_pos, 1.0);\n#ifdef DEBUG\nv_color = vec4(a_color.rgb, z == 0.0 ? 1.0 : 0.645);\n#endif\n}"},line:{"common.glsl":"varying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp float v_opacity;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif\n#ifdef SDF\nvarying mediump float v_lineWidthRatio;\n#endif","hittest.glsl":"#include <materials/hittest/common.glsl>\n#ifdef HITTEST\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestLine(out lowp vec4 out_color, out highp vec3 out_pos, float halfWidth) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * POSITION_PRECISION, 1.);\nvec3 outTextureCoords = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nfloat dist = min(distPointSegment(u_hittestPos, pos.xy, pos1.xy),\ndistPointSegment(u_hittestPos, pos.xy, pos2.xy)) - halfWidth;\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist >= u_hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist <= 0. ? (1. / 255.) : 0.);\n}\n#endif","line.frag":"precision lowp float;\n#include <util/encoding.glsl>\n#include <materials/constants.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\n#ifdef HITTEST\nvoid main() {\ngl_FragColor = v_color;\n}\n#else\nvoid main() {\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineHalfWidth,\nv_opacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr,\nv_patternSize,\n#endif\n#ifdef SDF\nv_lineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance,\n#endif\n#endif\nv_id\n);\ngl_FragColor = shadeLine(inputs);\n}\n#endif","line.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/line/hittest.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\n#ifdef HITTEST\nvoid draw() {\nfloat aa        = 0.5 * u_antialiasing;\nfloat a_halfWidth = a_accumulatedDistanceAndHalfWidth.y / 16.;\nfloat a_cimHalfWidth = a_aux.x / 16. ;\nvec2  a_offset = a_offsetAndNormal.xy / 16.;\nfloat baseWidth = getBaseLineHalfWidth(a_halfWidth, a_cimHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nhighp vec3 pos  = vec3(0.);\nv_color = vec4(0.);\nhittestLine(v_color, pos, halfWidth);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#else\nvoid draw()\n{\nhighp vec3 pos = vec3(0.);\nLineData outputs = buildLine(\npos,\na_id,\na_pos,\na_color,\na_offsetAndNormal.xy / 16.,\na_offsetAndNormal.zw / 16.,\na_accumulatedDistanceAndHalfWidth.x,\na_accumulatedDistanceAndHalfWidth.y / 16.,\na_segmentDirection.w,\na_tlbr,\na_segmentDirection.xy / 16.,\na_aux.x / 16.\n);\nv_id              = outputs.id;\nv_color           = outputs.color;\nv_normal          = outputs.normal;\nv_lineHalfWidth   = outputs.lineHalfWidth;\nv_opacity         = outputs.opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr          = outputs.tlbr;\nv_patternSize   = outputs.patternSize;\n#endif\n#ifdef SDF\nv_lineWidthRatio = outputs.lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance = outputs.accumulatedDistance;\n#endif\n#endif\ngl_Position = vec4(clip(outputs.color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#endif\nvoid main() {\nINIT;\ndraw();\n}"},pie:{"pie.common.glsl":"uniform float outlineWidth;\nuniform mediump float sectorThreshold;\nvarying vec3  v_id;\nvarying vec3  v_pos;\nvarying vec2  v_offset;\nvarying vec4  v_color;\nvarying float v_size;\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nvarying vec2  v_filteredSectorToColorId[numberOfFields];\nvarying vec2  v_texCoords;\nvarying float v_outlineWidth;\nvarying float v_opacity;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};","pie.frag":"precision highp float;\n#include <util/atan2.glsl>\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/pie/pie.common.glsl>\nuniform lowp vec4 colors[numberOfFields];\nuniform lowp vec4 defaultColor;\nuniform lowp vec4 othersColor;\nuniform lowp vec4 outlineColor;\nuniform float donutRatio;\nlowp vec4 getSectorColor(in int index, in vec2 filteredSectorToColorId[numberOfFields]) {\nmediump int colorIndex = int(filteredSectorToColorId[index].y);\nreturn colors[colorIndex];\n}\nconst int OTHER_SECTOR_ID = 255;\n#ifdef HITTEST\nvec4 getColor() {\nfloat distanceSize = length(v_offset) * v_size;\nfloat donutSize = donutRatio * v_size;\nfloat alpha = step(donutSize, distanceSize) * (1.0 - step(v_size, distanceSize));\nreturn v_color;\n}\n#else\nvec4 getColor() {\nfloat angle = 90.0 - C_RAD_TO_DEG * atan2(v_offset.y, v_offset.x);\nif (angle < 0.0) {\nangle += 360.0;\n} else if (angle > 360.0) {\nangle = mod(angle, 360.0);\n}\nint numOfEntries = int(v_numOfEntries);\nfloat maxSectorAngle = v_maxSectorAngle;\nlowp vec4 fillColor = (maxSectorAngle > 0.0 || sectorThreshold > 0.0) ? othersColor : defaultColor;\nlowp vec4 prevColor = vec4(0.0);\nlowp vec4 nextColor = vec4(0.0);\nfloat startSectorAngle = 0.0;\nfloat endSectorAngle = 0.0;\nif (angle < maxSectorAngle) {\nfor (int index = 0; index < numberOfFields; ++index) {\nstartSectorAngle = endSectorAngle;\nendSectorAngle = v_filteredSectorToColorId[index].x;\nif (endSectorAngle > angle) {\nfillColor = getSectorColor(index, v_filteredSectorToColorId);\nprevColor = sectorThreshold != 0.0 && index == 0 && abs(360.0 - maxSectorAngle) < EPSILON ? othersColor :\ngetSectorColor(index > 0 ? index - 1 : numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = sectorThreshold != 0.0 && abs(endSectorAngle - maxSectorAngle) < EPSILON ? othersColor :\ngetSectorColor(index < numOfEntries - 1 ? index + 1 : 0, v_filteredSectorToColorId);\nbreak;\n}\nif (index == numOfEntries - 1) {\nbreak;\n}\n}\n} else {\nprevColor = getSectorColor(numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = getSectorColor(0, v_filteredSectorToColorId);\nstartSectorAngle = maxSectorAngle;\nendSectorAngle = 360.0;\n}\nlowp vec4 outlineColor = outlineColor;\nfloat offset = length(v_offset);\nfloat distanceSize = offset * v_size;\nif (startSectorAngle != 0.0 || endSectorAngle != 360.0) {\nfloat distanceToStartSector = (angle - startSectorAngle);\nfloat distanceToEndSector = (endSectorAngle - angle);\nfloat sectorThreshold = 0.6;\nfloat beginSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToStartSector * offset);\nfloat endSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToEndSector * offset);\nif (endSectorAlpha > 0.0) {\nfillColor = mix(nextColor, fillColor, endSectorAlpha);\n} else if (beginSectorAlpha > 0.0) {\nfillColor = mix(prevColor, fillColor, beginSectorAlpha);\n}\n}\nfloat donutSize = donutRatio * (v_size - v_outlineWidth);\nfloat endOfDonut = donutSize - v_outlineWidth;\nfloat aaThreshold = 0.75;\nfloat innerCircleAlpha = endOfDonut - aaThreshold > 0.0 ? smoothstep(endOfDonut - aaThreshold, endOfDonut + aaThreshold, distanceSize) : 1.0;\nfloat outerCircleAlpha = 1.0 - smoothstep(v_size - aaThreshold, v_size + aaThreshold , distanceSize);\nfloat circleAlpha = innerCircleAlpha * outerCircleAlpha;\nfloat startOfOutline = v_size - v_outlineWidth;\nif (startOfOutline > 0.0 && v_outlineWidth > 0.25) {\nfloat outlineFactor = smoothstep(startOfOutline - aaThreshold, startOfOutline + aaThreshold, distanceSize);\nfloat innerLineFactor = donutSize - aaThreshold > 0.0 ? 1.0 - smoothstep(donutSize - aaThreshold, donutSize + aaThreshold , distanceSize) : 0.0;\nfillColor = mix(fillColor, outlineColor, innerLineFactor + outlineFactor);\n}\nreturn v_opacity * circleAlpha * fillColor;\n}\n#endif\nvoid main()\n{\nvec4 color = getColor();\n#ifdef highlight\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","pie.vert":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/barycentric.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/vv.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/pie/pie.common.glsl>\n#include <materials/hittest/common.glsl>\nattribute float a_bitSet;\nattribute vec2  a_offset;\nattribute vec2  a_texCoords;\nattribute vec2  a_size;\nattribute float a_referenceSize;\nattribute vec2  a_zoomRange;\nint filterValue(in float sectorAngle,\nin int currentIndex,\ninout FilteredChartInfo filteredInfo,\ninout vec2 filteredSectorToColorId[numberOfFields]) {\nif (sectorAngle > sectorThreshold * 360.0) {\nfilteredInfo.endSectorAngle += sectorAngle;\nfilteredSectorToColorId[filteredInfo.colorId] = vec2(filteredInfo.endSectorAngle, currentIndex);\n++filteredInfo.colorId;\n}\nreturn 0;\n}\nint filterValues(inout vec2 filteredSectorToColorId[numberOfFields],\ninout FilteredChartInfo filteredInfo,\nin float sectorAngles[numberOfFields]) {\nfor (int index = 0; index < numberOfFields; ++index) {\nfloat sectorValue = sectorAngles[index];\nfilterValue(sectorValue, index, filteredInfo, filteredSectorToColorId);\n}\nreturn filteredInfo.colorId;\n}\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float a_referenceSize, in float bitSet) {\nvec2 outSize = baseSize;\n#ifdef VV_SIZE\nfloat r = getSize(a_referenceSize, currentScale) / a_referenceSize;\noutSize.xy *= r;\noffset.xy *= r;\nfloat scaleSymbolProportionally = getBit(bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\noutlineSize *= scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\nreturn outSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\nfloat isMapAligned = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nvec3  offset       = vec3(in_offset, 0.0);\nreturn getMatrix(isMapAligned) * offset;\n}\nfloat filterNaNValues(in float value) {\nreturn value != NAN_MAGIC_NUMBER && value > 0.0 ? value : 0.0;\n}\nvoid main()\n{\nINIT;\nvec2  a_size   = a_size;\nvec2  a_offset = a_offset / 16.0;\nfloat outlineSize = outlineWidth;\nfloat a_bitSet = a_bitSet;\nfloat a_referenceSize = a_referenceSize;\nvec2 a_texCoords = a_texCoords / 4.0;\nvec2 markerSize = getMarkerSize(a_offset, a_size, outlineSize, a_referenceSize, a_bitSet);\nfloat filterFlags = getFilterFlags();\nvec3  pos         = vec3(a_pos / 10.0, 1.0);\nv_opacity      = getOpacity();\nv_id           = norm(a_id);\nv_pos          = displayViewScreenMat3 * pos + getOffset(a_offset, a_bitSet);\nv_offset       = sign(a_texCoords - 0.5);\nv_size         = max(markerSize.x, markerSize.y);\nv_outlineWidth = outlineSize;\nfloat attributeData[10];\nvec4 attributeData3 = getDataDriven0(a_id);\nattributeData[0] = filterNaNValues(attributeData3.x);\nattributeData[1] = filterNaNValues(attributeData3.y);\nattributeData[2] = filterNaNValues(attributeData3.z);\nattributeData[3] = filterNaNValues(attributeData3.w);\n#if (numberOfFields > 4)\nvec4 attributeData4 = getDataDriven1(a_id);\nattributeData[4] = filterNaNValues(attributeData4.x);\nattributeData[5] = filterNaNValues(attributeData4.y);\nattributeData[6] = filterNaNValues(attributeData4.z);\nattributeData[7] = filterNaNValues(attributeData4.w);\n#endif\n#if (numberOfFields > 8)\nvec4 attributeData5 = getDataDriven2(a_id);\nattributeData[8] = filterNaNValues(attributeData5.x);\nattributeData[9] = filterNaNValues(attributeData5.y);\n#endif\nfloat sum = 0.0;\nfor (int i = 0; i < numberOfFields; ++i) {\nsum += attributeData[i];\n}\nfloat sectorAngles[numberOfFields];\nfor (int i = 0; i < numberOfFields; ++i) {\nsectorAngles[i] = 360.0 * attributeData[i] / sum;\n}\nvec2 filteredSectorToColorId[numberOfFields];\nFilteredChartInfo filteredInfo = FilteredChartInfo(0.0, 0);\nint numOfEntries = filterValues(filteredSectorToColorId, filteredInfo, sectorAngles);\nv_numOfEntries = float(numOfEntries);\nv_maxSectorAngle = filteredInfo.endSectorAngle;\nv_filteredSectorToColorId = filteredSectorToColorId;\n#ifdef HITTEST\nhighp vec3 out_pos = vec3(0.0);\nv_color            = vec4(0.0);\nhittestMarker(v_color, out_pos, viewMat3 * tileMat3 *  pos, v_size);\ngl_PointSize = 1.0;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},shared:{line:{"common.glsl":"#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\nstruct LineData {\nlowp vec4 color;\nmediump vec2 normal;\nmediump float lineHalfWidth;\nlowp float opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nmediump vec4 tlbr;\nmediump vec2 patternSize;\n#endif\n#ifdef SDF\nmediump float lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nhighp float accumulatedDistance;\n#endif\n#endif\nhighp vec3 id;\n};","line.frag":"uniform lowp float u_blur;\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && !defined(HIGHLIGHT)\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\nuniform highp float u_pixelRatio;\n#endif\n#endif\n#if defined(SDF) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float adjustedPatternWidth = line.patternSize.x * 2.0 * line.lineWidthRatio;\nmediump float relativeTexX = fract(line.accumulatedDistance / adjustedPatternWidth);\nmediump float relativeTexY = 0.5 + 0.25 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * line.lineHalfWidth;\nreturn line.opacity * clamp(0.5 - dist, 0.0, 1.0) * line.color;\n}\n#elif defined(PATTERN) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float lineHalfWidth = line.lineHalfWidth;\nmediump float adjustedPatternHeight = line.patternSize.y * 2.0 * lineHalfWidth / line.patternSize.x;\nmediump float relativeTexY = fract(line.accumulatedDistance / adjustedPatternHeight);\nmediump float relativeTexX = 0.5 + 0.5 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color = texture2D(u_texture, texCoord);\n#ifdef VV_COLOR\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\n#endif\nreturn line.opacity * line.color * color;\n}\n#else\nlowp vec4 getLineColor(LineData line) {\nreturn line.opacity * line.color;\n}\n#endif\nvec4 shadeLine(LineData line)\n{\nmediump float thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(line.lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nmediump float fragDist = length(line.normal) * line.lineHalfWidth;\nlowp float alpha = clamp(thinLineFactor * (line.lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\nlowp vec4 out_color = getLineColor(line) * alpha;\n#ifdef HIGHLIGHT\nout_color.a = step(1.0 / 255.0, out_color.a);\n#endif\n#ifdef ID\nif (out_color.a < 1.0 / 255.0) {\ndiscard;\n}\nout_color = vec4(line.id, 0.0);\n#endif\nreturn out_color;\n}","line.vert":"float getBaseLineHalfWidth(in float lineHalfWidth, in float referenceHalfWidth) {\n#ifdef VV_SIZE\nfloat refLineWidth = 2.0 * referenceHalfWidth;\nreturn 0.5 * (lineHalfWidth / max(referenceHalfWidth, EPSILON)) * getSize(refLineWidth);\n#else\nreturn lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\nfloat halfWidth = max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\nhalfWidth = max(halfWidth, 2.0);\n#endif\nreturn halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\nfloat thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nreturn thinLineFactor * halfWidth * offset;\n}\nLineData buildLine(\nout vec3 out_pos,\nin vec3 in_id,\nin vec2 in_pos,\nin vec4 in_color,\nin vec2 in_offset,\nin vec2 in_normal,\nin float in_accumulatedDist,\nin float in_lineHalfWidth,\nin float in_bitSet,\nin vec4 in_tlbr,\nin vec2 in_segmentDirection,\nin float in_referenceHalfWidth\n)\n{\nfloat aa        = 0.5 * u_antialiasing;\nfloat baseWidth = getBaseLineHalfWidth(in_lineHalfWidth, in_referenceHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nfloat z         = 2.0 * step(baseWidth, 0.0);\nvec2  dist      = getDist(in_offset, halfWidth);\nvec3  offset    = u_displayViewMat3 * vec3(dist, 0.0);\nvec3  pos       = u_dvsMat3 * vec3(in_pos * POSITION_PRECISION, 1.0) + offset;\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvec4  color     = in_color;\nfloat opacity   = 1.0;\n#else\nvec4  color     = getColor(in_color, in_bitSet, BITSET_GENERIC_LOCK_COLOR);\nfloat opacity   = getOpacity();\n#ifdef SDF\nconst float SDF_PATTERN_HALF_WIDTH = 15.5;\nfloat scaleDash = getBit(in_bitSet, BITSET_LINE_SCALE_DASH);\nfloat lineWidthRatio = (scaleDash * max(halfWidth - 0.55 * u_antialiasing, 0.25) + (1.0 - scaleDash)) / SDF_PATTERN_HALF_WIDTH;\n#endif\n#endif\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nv_sampleAlphaOnly = getBit(in_bitSet, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\n#endif\nout_pos = vec3(pos.xy, z);\nreturn LineData(\ncolor,\nin_normal,\nhalfWidth,\nopacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nin_tlbr / u_mosaicSize.xyxy,\nvec2(in_tlbr.z - in_tlbr.x, in_tlbr.w - in_tlbr.y),\n#endif\n#ifdef SDF\nlineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nin_accumulatedDist * u_zoomFactor + dot(in_segmentDirection, dist),\n#endif\n#endif\nnorm(in_id)\n);\n}"}},"symbologyTypeUtils.glsl":"#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_SIMPLE || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\n#endif",text:{"common.glsl":"uniform highp vec2 u_mosaicSize;\nvarying highp vec3 v_id;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec2 v_tex;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying lowp float v_transparency;","hittest.glsl":"#include <materials/hittest/common.glsl>","text.frag":"precision mediump float;\n#include <materials/text/common.glsl>\nuniform lowp sampler2D u_texture;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor()\n{\nfloat SDF_CUTOFF = (2.0 / 8.0);\nfloat SDF_BASE_EDGE_DIST = 1.0 - SDF_CUTOFF;\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float edge = SDF_BASE_EDGE_DIST - v_edgeDistanceOffset;\n#ifdef HIGHLIGHT\nedge /= 2.0;\n#endif\nlowp float aa = v_antialiasingWidth;\nlowp float alpha = smoothstep(edge - aa, edge + aa, dist);\nreturn alpha * v_color * v_opacity;\n}\n#endif\nvoid main()\n{\ngl_FragColor = getColor();\n}","text.vert":"precision highp float;\n#include <materials/utils.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\n#include <materials/text/hittest.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nattribute vec2 a_zoomRange;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nfloat getTextSize(inout vec2 offset, inout float baseSize, in float referenceSize) {\n#ifdef VV_SIZE\nfloat r = getSize(referenceSize) / referenceSize;\nbaseSize *= r;\noffset.xy *= r;\nreturn baseSize;\n#endif\nreturn baseSize;\n}\nvoid main()\n{\nINIT;\nfloat a_isBackground  = a_aux.y;\nfloat a_referenceSize = a_aux.z * a_aux.z / 256.0;\nfloat a_bitSet        = a_aux.w;\nfloat a_fontSize      = a_texFontSize.z;\nvec2  a_offset        = a_vertexOffset * OFFSET_PRECISION;\nvec3  in_pos        = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat fontSize      = getTextSize(a_offset, a_fontSize, a_referenceSize);\nfloat fontScale     = fontSize / SDF_FONT_SIZE;\nvec3  offset        = getRotation() * vec3(a_offset, 0.0);\nmat3  extrudeMatrix = getBit(a_bitSet, 0) == 1.0 ? u_displayViewMat3 : u_displayMat3;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor  = (isBackground * a_color) + (isText * getColor(a_color, a_bitSet, 1));\nv_color   = u_isHaloPass * a_haloColor + (1.0 - u_isHaloPass) * nonHaloColor;\nv_opacity = getOpacity();\nv_id      = norm(a_id);\nv_tex     = a_texCoords / u_mosaicSize;\nv_pos     = u_dvsMat3 * in_pos + extrudeMatrix * offset;\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\nv_edgeDistanceOffset = u_isHaloPass * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n#ifdef HITTEST\nhighp vec3 out_pos  = vec3(0.);\nv_color = vec4(0.);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  vec3(a_pos * POSITION_PRECISION, 1.0)\n+ u_tileMat3 * offset, fontSize / 2.);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, getFilterFlags(), a_zoomRange), 1.0);\n#else\ngl_Position =  vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n#endif\n}"},"utils.glsl":"float rshift(in float u32, in int amount) {\nreturn floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\nfloat offset = pow(2.0, float(bitIndex));\nreturn mod(floor(bitset / offset), 2.0);\n}\nconst int maxHighlightReasons = 6;\nfloat getFilterBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex + maxHighlightReasons);\n}\nfloat getHighlightBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex);\n}\nhighp vec3 unpackDisplayIdTexel(in highp vec3 bitset) {\nfloat isAggregate = getBit(bitset.b, 7);\nreturn (1.0 - isAggregate) * bitset + isAggregate * (vec3(bitset.rgb) - vec3(0.0, 0.0, float(0x80)));\n}\nvec4 unpack(in float u32) {\nfloat r = mod(rshift(u32, 0), 255.0);\nfloat g = mod(rshift(u32, 8), 255.0);\nfloat b = mod(rshift(u32, 16), 255.0);\nfloat a = mod(rshift(u32, 24), 255.0);\nreturn vec4(r, g, b, a);\n}\nvec3 norm(in vec3 v) {\nreturn v /= 255.0;\n}\nvec4 norm(in vec4 v) {\nreturn v /= 255.0;\n}\nfloat max4(vec4 target) {\nreturn max(max(max(target.x, target.y), target.z), target.w);\n}\nvec2 unpack_u8_nf32(vec2 bytes) {\nreturn (bytes - 127.0) / 127.0;\n}\nhighp float rand(in vec2 co) {\nhighp float a = 12.9898;\nhighp float b = 78.233;\nhighp float c = 43758.5453;\nhighp float dt = dot(co, vec2(a,b));\nhighp float sn = mod(dt, 3.14);\nreturn fract(sin(sn) * c);\n}","vcommon.glsl":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/vv.glsl>\n#include <materials/barycentric.glsl>\nattribute vec2 a_pos;\nattribute highp vec3 a_id;\nuniform highp mat3 displayViewScreenMat3;\nuniform highp mat3 displayViewMat3;\nuniform highp mat3 displayMat3;\nuniform highp mat3 tileMat3;\nuniform highp mat3 viewMat3;\nuniform highp float pixelRatio;\nuniform mediump float zoomFactor;\nuniform mediump float antialiasing;\nuniform mediump float currentScale;\nuniform mediump float currentZoom;\nuniform mediump float metersPerSRUnit;\nuniform mediump float activeReasons;\nuniform mediump float highlightAll;\nvec4 VV_ADATA = vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target) {\ntarget.rgba = getVisualVariableData(a_id);\n}\n#ifdef VV\n#define INIT loadVisualVariableData(VV_ADATA)\n#else\n#define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\nfloat isColorLocked   = getBit(a_bitSet, index);\nreturn getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\nreturn a_color;\n#endif\n}\nfloat getOpacity() {\n#ifdef VV_OPACITY\nreturn getVVOpacity(VV_ADATA[ATTR_VV_OPACITY]);\n#else\nreturn 1.0;\n#endif\n}\nfloat getSize(in float in_size, in float currentScale) {\n#ifdef VV_SIZE\nreturn getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE], currentScale);\n#else\nreturn in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\nreturn getVVRotationMat3(mod(VV_ADATA[ATTR_VV_ROTATION], 360.0));\n#else\nreturn mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n#ifdef IGNORES_SAMPLER_PRECISION\nreturn ceil(getFilterData(a_id).x * 255.0);\n#else\nreturn getFilterData(a_id).x * 255.0;\n#endif\n}\nvec4 getAnimationState() {\nreturn getAnimation(a_id);\n}\nfloat getMinZoom() {\nvec4 data0 = getFilterData(a_id) * 255.0;\nreturn data0.g;\n}\nmat3 getMatrixNoDisplay(float isMapAligned) {\nreturn isMapAligned * viewMat3 * tileMat3 + (1.0 - isMapAligned) * tileMat3;\n}\nmat3 getMatrix(float isMapAligned) {\nreturn isMapAligned * displayViewMat3 + (1.0 - isMapAligned) * displayMat3;\n}\nfloat checkHighlightBit(float filterFlags, int index) {\nreturn getHighlightBit(filterFlags, index) * getBit(activeReasons, index);\n}\nfloat checkHighlight(float filterFlags) {\nfloat result = checkHighlightBit(filterFlags, 0);\nfor (int i = 1; i < maxHighlightReasons; i++) {\nresult = result + checkHighlightBit(filterFlags, i);\n}\nreturn step(0.1, result + highlightAll);\n}\nvec3 clip(inout vec4 color, inout vec3 pos, in float filterFlags, in vec2 minMaxZoom) {\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifdef inside\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#elif defined(outside)\npos.z += 2.0 * getFilterBit(filterFlags, 1);\n#elif defined(highlight)\npos.z += 2.0 * (1.0 - checkHighlight(filterFlags));\n#endif\npos.z += 2.0 * (step(minMaxZoom.y, currentZoom) + (1.0 - step(minMaxZoom.x, currentZoom)));\nreturn pos;\n}","vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n#define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n#define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float colorValues[8];\nuniform vec4 colors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 minMaxValueAndSize;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float values[8];\nuniform float sizes[8];\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float values[8];\nuniform float sizes[8];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float unitMeterRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float opacityValues[8];\nuniform float opacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float rotationType;\n#endif\nbool isNan(float val) {\nreturn (val == NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nfloat interpolationRatio = (sizeValue  - minMaxValueAndSize.x) / (minMaxValueAndSize.y - minMaxValueAndSize.x);\ninterpolationRatio = clamp(interpolationRatio, 0.0, 1.0);\nreturn minMaxValueAndSize.z + interpolationRatio * (minMaxValueAndSize.w - minMaxValueAndSize.z);\n}\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nfloat getVVScaleStopsSize(float currentScale) {\nfloat outSize;\nif (currentScale <= values[0]) {\noutSize = sizes[0];\n} else {\nif (currentScale >= values[7]) {\noutSize = sizes[7];\n} else {\nint index;\nindex = -1;\nfor (int i = 0; i < 8; i++) {\nif (values[i] > currentScale) {\nindex = i;\nbreak;\n}\n}\nint prevIndex = index - 1;\nfloat a = currentScale - values[prevIndex];\nfloat b = values[index] - values[prevIndex];\noutSize = mix(sizes[prevIndex], sizes[index], a / b);\n}\n}\nreturn outSize;\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N = 8;\nfloat getVVStopsSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nif (sizeValue <= values[0]) {\nreturn sizes[0];\n}\nif (sizeValue >= values[VV_SIZE_N - 1]) {\nreturn sizes[VV_SIZE_N - 1];\n}\nfor (int i = 1; i < VV_SIZE_N; ++i) {\nif (values[i] >= sizeValue) {\nfloat f = (sizeValue - values[i-1]) / (values[i] - values[i-1]);\nreturn mix(sizes[i-1], sizes[i], f);\n}\n}\nreturn sizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nreturn sizeValue * (metersPerSRUnit / unitMeterRatio);\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N = 8;\nfloat getVVOpacity(float opacityValue) {\nif (isNan(opacityValue)) {\nreturn 1.0;\n}\nif (opacityValue <= opacityValues[0]) {\nreturn opacities[0];\n}\nfor (int i = 1; i < VV_OPACITY_N; ++i) {\nif (opacityValues[i] >= opacityValue) {\nfloat f = (opacityValue - opacityValues[i-1]) / (opacityValues[i] - opacityValues[i-1]);\nreturn mix(opacities[i-1], opacities[i], f);\n}\n}\nreturn opacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat4(1, 0, 0, 0,\n0, 1, 0, 0,\n0, 0, 1, 0,\n0, 0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (rotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat4(cosA, sinA, 0, 0,\n-sinA,  cosA, 0, 0,\n0,     0, 1, 0,\n0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat3(1, 0, 0,\n0, 1, 0,\n0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (rotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * -rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat3(cosA, -sinA, 0,\nsinA, cosA, 0,\n0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N = 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\nif (isNan(colorValue) || isColorLocked == 1.0) {\nreturn fallback;\n}\nif (colorValue <= colorValues[0]) {\nreturn colors[0];\n}\nfor (int i = 1; i < VV_COLOR_N; ++i) {\nif (colorValues[i] >= colorValue) {\nfloat f = (colorValue - colorValues[i-1]) / (colorValues[i] - colorValues[i-1]);\nreturn mix(colors[i-1], colors[i], f);\n}\n}\nreturn colors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize, in float currentScale)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\nreturn getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\nfloat outSize = getVVScaleStopsSize(currentScale);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_FIELD_STOPS)\nfloat outSize = getVVStopsSize(vvSize, size);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_UNIT_VALUE)\nreturn getVVUnitValue(vvSize, size);\n#else\nreturn size;\n#endif\n}"},"post-processing":{blit:{"blit.frag":"precision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\ngl_FragColor = texture2D(u_texture, v_uv);\n}"},bloom:{composite:{"composite.frag":"precision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D u_blurTexture1;\nuniform sampler2D u_blurTexture2;\nuniform sampler2D u_blurTexture3;\nuniform sampler2D u_blurTexture4;\nuniform sampler2D u_blurTexture5;\nuniform float u_bloomStrength;\nuniform float u_bloomRadius;\nuniform float u_bloomFactors[NUMMIPS];\nuniform vec3 u_bloomTintColors[NUMMIPS];\nfloat lerpBloomFactor(const in float factor) {\nfloat mirrorFactor = 1.2 - factor;\nreturn mix(factor, mirrorFactor, u_bloomRadius);\n}\nvoid main() {\nvec4 color = u_bloomStrength * (\nlerpBloomFactor(u_bloomFactors[0]) * vec4(u_bloomTintColors[0], 1.0) * texture2D(u_blurTexture1, v_uv) +\nlerpBloomFactor(u_bloomFactors[1]) * vec4(u_bloomTintColors[1], 1.0) * texture2D(u_blurTexture2, v_uv) +\nlerpBloomFactor(u_bloomFactors[2]) * vec4(u_bloomTintColors[2], 1.0) * texture2D(u_blurTexture3, v_uv) +\nlerpBloomFactor(u_bloomFactors[3]) * vec4(u_bloomTintColors[3], 1.0) * texture2D(u_blurTexture4, v_uv) +\nlerpBloomFactor(u_bloomFactors[4]) * vec4(u_bloomTintColors[4], 1.0) * texture2D(u_blurTexture5, v_uv)\n);\ngl_FragColor = clamp(color, 0.0, 1.0);\n}"},gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\n#define SIGMA RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = float(SIGMA);\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},luminosityHighPass:{"luminosityHighPass.frag":"precision mediump float;\nuniform sampler2D u_texture;\nuniform vec3 u_defaultColor;\nuniform float u_defaultOpacity;\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\nvarying vec2 v_uv;\nvoid main() {\nvec4 texel = texture2D(u_texture, v_uv);\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat v = dot(texel.xyz, luma);\nvec4 outputColor = vec4(u_defaultColor.rgb, u_defaultOpacity);\nfloat alpha = smoothstep(u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v);\ngl_FragColor = mix(outputColor, texel, alpha);\n}"}},blur:{gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nuniform float u_sigma;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = u_sigma;\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},"radial-blur":{"radial-blur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nconst float sampleDist = 1.0;\nconst float sampleStrength = 2.2;\nvoid main(void) {\nfloat samples[10];\nsamples[0] = -0.08;\nsamples[1] = -0.05;\nsamples[2] = -0.03;\nsamples[3] = -0.02;\nsamples[4] = -0.01;\nsamples[5] =  0.01;\nsamples[6] =  0.02;\nsamples[7] =  0.03;\nsamples[8] =  0.05;\nsamples[9] =  0.08;\nvec2 dir = 0.5 - v_uv;\nfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\ndir = dir / dist;\nvec4 color = texture2D(u_colorTexture,v_uv);\nvec4 sum = color;\nfor (int i = 0; i < 10; i++) {\nsum += texture2D(u_colorTexture, v_uv + dir * samples[i] * sampleDist);\n}\nsum *= 1.0 / 11.0;\nfloat t = dist * sampleStrength;\nt = clamp(t, 0.0, 1.0);\ngl_FragColor = mix(color, sum, t);\n}"}},dra:{"dra.frag":"precision mediump float;\nuniform sampler2D u_minColor;\nuniform sampler2D u_maxColor;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\nvec4 minColor = texture2D(u_minColor, vec2(0.5));\nvec4 maxColor = texture2D(u_maxColor, vec2(0.5));\nvec4 color = texture2D(u_texture, v_uv);\nvec3 minColorUnpremultiply = minColor.rgb / minColor.a;\nvec3 maxColorUnpremultiply = maxColor.rgb / maxColor.a;\nvec3 colorUnpremultiply = color.rgb / color.a;\nvec3 range = maxColorUnpremultiply - minColorUnpremultiply;\ngl_FragColor = vec4(color.a * (colorUnpremultiply - minColorUnpremultiply) / range, color.a);\n}","min-max":{"min-max.frag":"#extension GL_EXT_draw_buffers : require\nprecision mediump float;\n#define CELL_SIZE 2\nuniform sampler2D u_minTexture;\nuniform sampler2D u_maxTexture;\nuniform vec2 u_srcResolution;\nuniform vec2 u_dstResolution;\nvarying vec2 v_uv;\nvoid main() {\nvec2 srcPixel = floor(gl_FragCoord.xy) * float(CELL_SIZE);\nvec2 onePixel = vec2(1.0) / u_srcResolution;\nvec2 uv = (srcPixel + 0.5) / u_srcResolution;\nvec4 minColor = vec4(1.0);\nvec4 maxColor = vec4(0.0);\nfor (int y = 0; y < CELL_SIZE; ++y) {\nfor (int x = 0; x < CELL_SIZE; ++x) {\nvec2 offset = uv + vec2(x, y) * onePixel;\nminColor = min(minColor, texture2D(u_minTexture, offset));\nmaxColor = max(maxColor, texture2D(u_maxTexture, offset));\n}\n}\ngl_FragData[0] = minColor;\ngl_FragData[1] = maxColor;\n}"}},"drop-shadow":{composite:{"composite.frag":"precision mediump float;\nuniform sampler2D u_layerFBOTexture;\nuniform sampler2D u_blurTexture;\nuniform vec4 u_shadowColor;\nuniform vec2 u_shadowOffset;\nuniform highp mat3 u_displayViewMat3;\nvarying vec2 v_uv;\nvoid main() {\nvec3 offset = u_displayViewMat3 * vec3(u_shadowOffset, 0.0);\nvec4 layerColor = texture2D(u_layerFBOTexture, v_uv);\nvec4 blurColor = texture2D(u_blurTexture, v_uv - offset.xy / 2.0);\ngl_FragColor = ((1.0 - layerColor.a) * blurColor.a * u_shadowColor + layerColor);\n}"}},"edge-detect":{"frei-chen":{"frei-chen.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nvarying vec2 v_uv;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[9];\nconst mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\nconst mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\nconst mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\nconst mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\nconst mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\nconst mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\nconst mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\nconst mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\nconst mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\nvoid main() {\nG[0] = g0,\nG[1] = g1,\nG[2] = g2,\nG[3] = g3,\nG[4] = g4,\nG[5] = g5,\nG[6] = g6,\nG[7] = g7,\nG[8] = g8;\nmat3 I;\nfloat cnv[9];\nvec3 sample;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D(u_colorTexture, v_uv + texel * vec2(i - 1.0,j - 1.0)).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 9; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\nfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\ngl_FragColor = vec4(vec3(sqrt(M / S)), texture2D(u_colorTexture, v_uv).a);\n}"},sobel:{"sobel.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\ngl_FragColor = vec4(vec3(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1])), texture2D(u_colorTexture, v_uv).a);\n}"}},"edge-enhance":{"edge-enhance.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 0.0, -1.0, 1.0, 0.0, -1.0, 1.0, 0.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nvec4 color = texture2D(u_colorTexture, v_uv);\ngl_FragColor = vec4(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1]) * color);\n}"},filterEffect:{"filterEffect.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform mat4 u_coefficients;\nvarying vec2 v_uv;\nvoid main() {\nvec4 color = texture2D(u_colorTexture, v_uv);\nvec4 rgbw = u_coefficients * vec4(color.a > 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\nfloat a = color.a;\ngl_FragColor = vec4(a * rgbw.rgb, a);\n}"},pp:{"pp.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying vec2 v_uv;\nvoid main() {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"}},raster:{common:{"common.glsl":"uniform sampler2D u_image;\nuniform int u_bandCount;\nuniform bool u_flipY;\nuniform float u_opacity;\nuniform int u_resampling;\nuniform vec2 u_srcImageSize;\n#ifdef APPLY_PROJECTION\n#include <raster/common/projection.glsl>\n#endif\n#ifdef BICUBIC\n#include <filtering/bicubic.glsl>\n#endif\n#ifdef BILINEAR\n#include <filtering/bilinear.glsl>\n#endif\nvec2 getPixelLocation(vec2 coords) {\nvec2 targetLocation = u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;\n#ifdef APPLY_PROJECTION\ntargetLocation = projectPixelLocation(targetLocation);\n#endif\nreturn targetLocation;\n}\nbool isOutside(vec2 coords){\nif (coords.t>1.00001 ||coords.t<-0.00001 || coords.s>1.00001 ||coords.s<-0.00001) {\nreturn true;\n} else {\nreturn false;\n}\n}\nvec4 getPixel(vec2 pixelLocation) {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_image, pixelLocation, u_srcImageSize);\n#elif defined(BILINEAR)\nvec4 color = sampleBilinear(u_image, pixelLocation, u_srcImageSize);\n#else\nvec4 color = texture2D(u_image, pixelLocation);\n#endif\nreturn color;\n}","projection.glsl":"uniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nvec2 projectPixelLocation(vec2 coords) {\n#ifdef LOOKUP_PROJECTION\nvec4 pv = texture2D(u_transformGrid, coords);\nreturn vec2(pv.r, pv.g);\n#endif\nvec2 index_image = floor(coords * u_targetImageSize);\nvec2 oneTransformPixel = vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform = floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos = fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location = index_transform + oneTransformPixel * 0.5;\nif (pos.s <= pos.t) {\nvec4 ll_abc = texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def = texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc = texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def = texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;\n}"},flow:{"getFadeOpacity.glsl":"uniform float u_decayRate;\nuniform float u_fadeToZero;\nfloat getFadeOpacity(float x) {\nfloat cutOff = mix(0.0, exp(-u_decayRate), u_fadeToZero);\nreturn (exp(-u_decayRate * x) - cutOff) / (1.0 - cutOff);\n}","getFragmentColor.glsl":"vec4 getFragmentColor(vec4 color, float dist, float size, float featheringSize) {\nfloat featheringStart = clamp(0.5 - featheringSize / size, 0.0, 0.5);\nif (dist > featheringStart) {\ncolor *= 1.0 - (dist - featheringStart) / (0.5 - featheringStart);\n}\nreturn color;\n}",imagery:{"imagery.frag":"precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform float u_Min;\nuniform float u_Max;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nfloat getIntensity(float v) {\nreturn u_Min + v * (u_Max - u_Min);\n}\nvoid main(void) {\nvec4 sampled = texture2D(u_texture, v_texcoord);\nfloat intensity = getIntensity(sampled.r);\ngl_FragColor = getColor(intensity);\ngl_FragColor.a *= getOpacity(sampled.r);\ngl_FragColor.a *= sampled.a;\ngl_FragColor.rgb *= gl_FragColor.a;\n}","imagery.vert":"attribute vec2 a_position;\nattribute vec2 a_texcoord;\nuniform mat3 u_dvsMat3;\nvarying vec2 v_texcoord;\nvoid main(void) {\nvec2 xy = (u_dvsMat3 * vec3(a_position, 1.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},particles:{"particles.frag":"precision highp float;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/getFragmentColor.glsl>\nvoid main(void) {\ngl_FragColor = getFragmentColor(v_color, length(v_texcoord - 0.5), v_size, u_featheringSize);\n}","particles.vert":"attribute vec4 a_xyts0;\nattribute vec4 a_xyts1;\nattribute vec4 a_typeIdDurationSeed;\nattribute vec4 a_extrudeInfo;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/vv.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nvec2 position0 = a_xyts0.xy;\nfloat t0 = a_xyts0.z;\nfloat speed0 = a_xyts0.w;\nvec2 position1 = a_xyts1.xy;\nfloat t1 = a_xyts1.z;\nfloat speed1 = a_xyts1.w;\nfloat type = a_typeIdDurationSeed.x;\nfloat id = a_typeIdDurationSeed.y;\nfloat duration = a_typeIdDurationSeed.z;\nfloat seed = a_typeIdDurationSeed.w;\nvec2 e0 = a_extrudeInfo.xy;\nvec2 e1 = a_extrudeInfo.zw;\nfloat animationPeriod = duration + u_trailLength;\nfloat scaledTime = u_time * u_flowSpeed;\nfloat randomizedTime = scaledTime + seed * animationPeriod;\nfloat t = mod(randomizedTime, animationPeriod);\nfloat fUnclamped = (t - t0) / (t1 - t0);\nfloat f = clamp(fUnclamped, 0.0, 1.0);\nfloat clampedTime = mix(t0, t1, f);\nfloat speed = mix(speed0, speed1, f);\nvec2 extrude;\nvec2 position;\nfloat fadeOpacity;\nfloat introOpacity;\nif (type == 2.0) {\nif (fUnclamped < 0.0 || (fUnclamped > 1.0 && t1 != duration)) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nvec2 ortho = mix(e0, e1, f);\nvec2 parallel;\nparallel = normalize(position1 - position0) * 0.5;\nif (id == 1.0) {\nextrude = ortho;\nv_texcoord = vec2(0.5, 0.0);\n} else if (id == 2.0) {\nextrude = -ortho;\nv_texcoord = vec2(0.5, 1.0);\n} else if (id == 3.0) {\nextrude = ortho + parallel;\nv_texcoord = vec2(1.0, 0.0);\n} else if (id == 4.0) {\nextrude = -ortho + parallel;\nv_texcoord = vec2(1.0, 1.0);\n}\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else {\nif (fUnclamped < 0.0) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nif (id == 1.0) {\nextrude = e0;\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 2.0) {\nextrude = -e0;\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 3.0) {\nextrude = mix(e0, e1, f);\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else if (id == 4.0) {\nextrude = -mix(e0, e1, f);\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n}\n}\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(extrude * v_size, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_color.a *= fadeOpacity;\nv_color.a *= mix(1.0, introOpacity, u_introFade);\nv_color.rgb *= v_color.a;\n}"},streamlines:{"streamlines.frag":"precision highp float;\nvarying float v_side;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_size;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/getFragmentColor.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nfloat t = mod(v_timeSeed * (v_totalTime + u_trailLength) + u_time * u_flowSpeed, v_totalTime + u_trailLength) - v_time;\nvec4 color = v_color * step(0.0, t) * getFadeOpacity(t / u_trailLength);\ncolor *= mix(1.0, 1.0 - exp(-v_time), u_introFade);\ngl_FragColor = getFragmentColor(color, length((v_side + 1.0) / 2.0 - 0.5), v_size, u_featheringSize);\n}","streamlines.vert":"attribute vec3 a_positionAndSide;\nattribute vec3 a_timeInfo;\nattribute vec2 a_extrude;\nattribute float a_speed;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_side;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nvoid main(void) {\nvec4 lineColor = getColor(a_speed);\nfloat lineOpacity = getOpacity(a_speed);\nfloat lineSize = getSize(a_speed);\nvec2 position = a_positionAndSide.xy;\nv_side = a_positionAndSide.z;\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(a_extrude * lineSize, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_time = a_timeInfo.x;\nv_totalTime = a_timeInfo.y;\nv_timeSeed = a_timeInfo.z;\nv_color = lineColor;\nv_color.a *= lineOpacity;\nv_color.rgb *= v_color.a;\nv_size = lineSize;\n}"},"vv.glsl":"#define MAX_STOPS 8\n#ifdef VV_COLOR\nuniform float u_color_stops[MAX_STOPS];\nuniform vec4 u_color_values[MAX_STOPS];\nuniform int u_color_count;\n#else\nuniform vec4 u_color;\n#endif\n#ifdef VV_OPACITY\nuniform float u_opacity_stops[MAX_STOPS];\nuniform float u_opacity_values[MAX_STOPS];\nuniform int u_opacity_count;\n#else\nuniform float u_opacity;\n#endif\n#ifdef VV_SIZE\nuniform float u_size_stops[MAX_STOPS];\nuniform float u_size_values[MAX_STOPS];\nuniform int u_size_count;\n#else\nuniform float u_size;\n#endif\nuniform float u_featheringOffset;\nvec4 getColor(float x) {\n#ifdef VV_COLOR\nvec4 color = u_color_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_color_count) {\nbreak;\n}\nfloat x1 = u_color_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_color_stops[i];\nvec4 y2 = u_color_values[i];\nif (x < x2) {\nvec4 y1 = u_color_values[i - 1];\ncolor = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\ncolor = y2;\n}\n}\n}\n#else\nvec4 color = u_color;\n#endif\nreturn color;\n}\nfloat getOpacity(float x) {\n#ifdef VV_OPACITY\nfloat opacity = u_opacity_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_opacity_count) {\nbreak;\n}\nfloat x1 = u_opacity_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_opacity_stops[i];\nfloat y2 = u_opacity_values[i];\nif (x < x2) {\nfloat y1 = u_opacity_values[i - 1];\nopacity = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nopacity = y2;\n}\n}\n}\n#else\nfloat opacity = u_opacity;\n#endif\nreturn opacity;\n}\nfloat getSize(float x) {\n#ifdef VV_SIZE\nfloat size = u_size_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_size_count) {\nbreak;\n}\nfloat x1 = u_size_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_size_stops[i];\nfloat y2 = u_size_values[i];\nif (x < x2) {\nfloat y1 = u_size_values[i - 1];\nsize = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nsize = y2;\n}\n}\n}\n#else\nfloat size = u_size;\n#endif\nreturn size + 2.0 * u_featheringSize * u_featheringOffset;\n}"},magdir:{"magdir.frag":"precision mediump float;\nvarying vec4 v_color;\nuniform lowp float u_opacity;\nvoid main() {\ngl_FragColor = v_color * u_opacity;\n}","magdir.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nuniform float u_rotation;\nuniform vec4 u_colors[12];\nvarying vec4 v_color;\nvoid main()\n{\nfloat angle = a_offset.y + u_rotation;\n#ifndef ROTATION_GEOGRAPHIC\nangle = 3.14159265359 * 2.0 - angle - 3.14159265359 / 2.0;\n#endif\nvec2 offset = vec2(cos(angle), sin(angle)) * a_offset.x;\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 pos = a_pos + offset * sizePercentage * u_symbolSize;\nv_color = u_colors[int(a_vv.x)];\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},reproject:{"reproject.frag":"precision mediump float;\nvarying vec2 v_texcoord;\n#include <raster/common/common.glsl>\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\ngl_FragColor = vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\n}","reproject.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_position;\ngl_Position = vec4(2.0 * (a_position - 0.5), 0.0, 1.0);\n}"},scalar:{"scalar.frag":"precision mediump float;\nuniform lowp float u_opacity;\nvarying vec2 v_pos;\nconst vec4 outlineColor = vec4(0.2, 0.2, 0.2, 1.0);\nconst float outlineSize = 0.02;\nconst float innerRadius = 0.25;\nconst float outerRadius = 0.42;\nconst float innerSquareLength = 0.15;\nvoid main() {\nmediump float dist = length(v_pos);\nmediump float fillalpha1 = smoothstep(outerRadius, outerRadius + outlineSize, dist);\nfillalpha1 *= (1.0-smoothstep(outerRadius + outlineSize, outerRadius + 0.1 + outlineSize, dist));\n#ifdef INNER_CIRCLE\nmediump float fillalpha2 = smoothstep(innerRadius, innerRadius + outlineSize, dist);\nfillalpha2 *= (1.0-smoothstep(innerRadius + outlineSize, innerRadius + 0.1 + outlineSize, dist));\n#else\nmediump float fillalpha2 = (abs(v_pos.x) < innerSquareLength ? 1.0 : 0.0) * (abs(v_pos.y) < innerSquareLength ? 1.0 : 0.0);\n#endif\ngl_FragColor = (fillalpha2 + fillalpha1) * outlineColor * u_opacity;\n}","scalar.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nvarying vec2 v_pos;\nvoid main()\n{\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 size = u_symbolSize * sizePercentage;\nvec2 pos = a_pos + a_offset * size;\nv_pos = a_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"}},stencil:{"stencil.frag":"void main() {\ngl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nuniform mat3 u_worldExtent;\nvoid main() {\ngl_Position = vec4(u_worldExtent * vec3(a_pos, 1.0), 1.0);\n}"},test:{"TestShader.common.glsl":"#ifndef RETURN_RED\nvarying    vec4      v_color;\n#endif\nvarying    vec2      v_offset;","TestShader.frag":"precision highp float;\n#include <test/TestShader.common.glsl>\nvoid main() {\nif (v_offset.x > -.5 && v_offset.y > -.5 && v_offset.x < .5 && v_offset.y < .5) {\ndiscard;\n}\n#ifdef RETURN_RED\ngl_FragColor = vec4(1., 0., 0., 1.);\n#else\ngl_FragColor = v_color;\n#endif\n}","TestShader.vert":"const float POS_PRECISION_FACTOR = 10.;\nconst float OFFSET_PRECISION_FACTOR = 10.;\nconst float SIZE_PRECISION_FACTOR = 10.;\nattribute  vec2      a_pos_packed;\nattribute  vec2      a_offset_packed;\nattribute  float     a_size_packed;\n#ifdef DATA_DRIVEN_COLOR\nconst float u_dataDrivenColor_validValues[4] = float[4](0., 0., 1., 0.);\nuniform    vec4      u_dataDrivenColor_colorFallback;\nuniform    vec4      u_dataDrivenColor_color;\n#endif\nuniform    float     u_view_zoomLevel;\n#include <test/TestShader.common.glsl>\n#ifdef DATA_DRIVEN_COLOR\nvec4 getColor(float value) {\nint index = -1;\nfor (int i = 0; i < 4; i++) {\nif (u_dataDrivenColor_validValues[i] == value) {\nindex = i;\nbreak;\n}\n}\nif (index == -1) {\nreturn u_dataDrivenColor_colorFallback;\n}\nreturn u_dataDrivenColor_color;\n}\n#endif\nvoid main() {\nvec2  a_pos = a_pos_packed / POS_PRECISION_FACTOR;\nvec2  a_offset = a_offset_packed / OFFSET_PRECISION_FACTOR;\nfloat a_size = a_size_packed / SIZE_PRECISION_FACTOR;\nvec4 color = vec4(1., 0., 0., 1.);\n#ifdef DATA_DRIVEN_COLOR\ncolor = getColor(1.);\n#endif\nvec2 offsetScaled = a_offset * a_size;\nvec4 pos = vec4(a_pos.xy + offsetScaled, 0., 1.);\ngl_Position = pos;\n#ifndef RETURN_RED\nv_color = color;\n#endif\nv_offset = a_offset;\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\nlowp vec4 color = texture2D(u_texture, v_tex);\ncolor.rgb *= color.a;\ngl_FragColor = color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\nmediump vec2 offset = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\nvec3 v_pos = u_dvsMat3 * vec3(offset, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\nv_tex = a_pos;\n}"},util:{"atan2.glsl":"float atan2(in float y, in float x) {\nfloat t0, t1, t2, t3, t4;\nt3 = abs(x);\nt1 = abs(y);\nt0 = max(t3, t1);\nt1 = min(t3, t1);\nt3 = 1.0 / t0;\nt3 = t1 * t3;\nt4 = t3 * t3;\nt0 =         - 0.013480470;\nt0 = t0 * t4 + 0.057477314;\nt0 = t0 * t4 - 0.121239071;\nt0 = t0 * t4 + 0.195635925;\nt0 = t0 * t4 - 0.332994597;\nt0 = t0 * t4 + 0.999995630;\nt3 = t0 * t3;\nt3 = (abs(y) > abs(x)) ? 1.570796327 - t3 : t3;\nt3 = x < 0.0 ?  3.141592654 - t3 : t3;\nt3 = y < 0.0 ? -t3 : t3;\nreturn t3;\n}","encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}"}};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js
var ShaderCompiler = __webpack_require__(29638);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function o(r){return function(e){let o=r;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}}const t=new ShaderCompiler/* ShaderCompiler */.Z(o(e));function n(r){return t.resolveIncludes(r)}


/***/ }),

/***/ 1314:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ n),
/* harmony export */   j: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let i=0;i<o.length;i++)o[i]=n.deserialize(e,r);return o}


/***/ }),

/***/ 4371:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ ce)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/Graphic.js
var Graphic = __webpack_require__(25707);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
;// ../node_modules/@arcgis/core/AggregateGraphic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let p=class extends Graphic/* default */.A{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.sourceLayer?.featureReduction;return t&&"popupTemplate"in t&&t.popupEnabled?t.popupTemplate:null}getObjectId(){return this.attributes.aggregateId}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean})],p.prototype,"isAggregate",void 0),p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.AggregateGraphic")],p);const AggregateGraphic_s=p;

;// ../node_modules/@arcgis/core/TrackGraphic.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let TrackGraphic_s=class extends Graphic/* default */.A{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer?.trackInfo;return r?.enabled&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.attributes.aggregateId}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean})],TrackGraphic_s.prototype,"isAggregate",void 0),TrackGraphic_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.TrackGraphic")],TrackGraphic_s);const TrackGraphic_p=TrackGraphic_s;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/compilerUtils.js
var compilerUtils = __webpack_require__(73345);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var core_Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/object.js
var object = __webpack_require__(76724);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/sql.js
var sql = __webpack_require__(76859);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/support/UpdatingHandles.js
var UpdatingHandles = __webpack_require__(4238);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Extent.js
var Extent = __webpack_require__(84698);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/effects/EffectView.js
var EffectView = __webpack_require__(57079);
;// ../node_modules/@arcgis/core/layers/effects/FeatureEffectView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let c=class extends Accessor/* default */.A{constructor(e){super(e),this._filter=null,this.duration=(0,has/* default */.A)("mapview-transitions-duration"),this._excludedEffectView=new EffectView/* EffectView */.$B(e),this._includedEffectView=new EffectView/* EffectView */.$B(e)}get excludedEffects(){return this._excludedEffectView.effects}set featureEffect(e){this._get("featureEffect")!==e&&this._transitionTo(e)}get filter(){return this._filter||this.featureEffect?.filter||null}get hasEffects(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}get includedEffects(){return this._includedEffectView.effects}set scale(e){this._set("scale",e),this._excludedEffectView.scale=e,this._includedEffectView.scale=e}get transitioning(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}get transitioningToEmpty(){return!this._excludedEffectView.final&&!this._includedEffectView.final}transitionStep(e,t){this._set("scale",t),this.transitioning?(this._includedEffectView.transitionStep(e,t),this._excludedEffectView.transitionStep(e,t),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=t,this._includedEffectView.scale=t)}endTransition(){this._includedEffectView.endTransition(),this._excludedEffectView.endTransition(),this._filter=null}_transitionTo(e){const t=this._get("featureEffect"),i=e,f=i?.includedEffect,s=i?.excludedEffect,c=this._includedEffectView.canTransitionTo(f)&&this._excludedEffectView.canTransitionTo(s);this._includedEffectView.effect=f,this._excludedEffectView.effect=s,this._set("featureEffect",i),this._filter=i?.filter||t?.filter||null,c||this.endTransition()}};(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"_filter",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"_excludedEffectView",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"_includedEffectView",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"duration",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"excludedEffects",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"featureEffect",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"filter",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"hasEffects",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"includedEffects",null),(0,tslib_es6._)([(0,property/* property */.MZ)({value:0})],c.prototype,"scale",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"transitioning",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],c.prototype,"transitioningToEmpty",null),c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.layers.effects.FeatureEffectView")],c);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/FeatureFilter.js
var FeatureFilter = __webpack_require__(3377);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/featureLayerUtils.js
var featureLayerUtils = __webpack_require__(52506);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/fieldUtils.js
var fieldUtils = __webpack_require__(42453);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/layerUtils.js
var layerUtils = __webpack_require__(40454);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/timeSupport.js + 2 modules
var timeSupport = __webpack_require__(87405);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js
var reader = __webpack_require__(75094);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/FeatureSet.js
var FeatureSet = __webpack_require__(57822);
;// ../node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let AggregateFeatureSet_c=class extends FeatureSet/* default */.A{constructor(){super(...arguments),this.features=[]}readFeatures(e,t){const o=SpatialReference/* default */.A.fromJSON(t.spatialReference),s=[];for(let a=0;a<e.length;a++){const t=e[a],p=AggregateGraphic_s.fromJSON(t),c=t.geometry?.spatialReference;null==p.geometry||c||(p.geometry.spatialReference=o);const i=t.aggregateGeometries,m=p.aggregateGeometries;if(i&&null!=m)for(const e in m){const r=m[e],t=i[e],s=t?.spatialReference;null==r||s||(r.spatialReference=o)}s.push(p)}return s}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[AggregateGraphic_s],json:{write:!0}})],AggregateFeatureSet_c.prototype,"features",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("features")],AggregateFeatureSet_c.prototype,"readFeatures",null),AggregateFeatureSet_c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.rest.support.AggregateFeatureSet")],AggregateFeatureSet_c);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/AttributeBinsFeatureSet.js + 1 modules
var AttributeBinsFeatureSet = __webpack_require__(36628);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/AttributeBinsQuery.js
var AttributeBinsQuery = __webpack_require__(45970);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/Query.js
var Query = __webpack_require__(14474);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js + 3 modules
var LayerView2D = __webpack_require__(24342);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js + 1 modules
var AFeatureContainer = __webpack_require__(31091);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueInstance.js
var TechniqueInstance = __webpack_require__(28177);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js
var instanceIdUtils = __webpack_require__(98003);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureInstanceStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FeatureInstanceStore_n{constructor(){this._instanceById=new Map}destroy(){this._instanceById.clear()}get size(){return this._instanceById.size}entries(){return this._instanceById.entries()}find(t){for(const e of this.values())if(e.techniqueRef.type===t)return e;return null}updateStart(t){t&&(this._instanceByIdNext=new Map,this._shaderCountByMesh=new Map,this._shaderIndices=new Map)}updateEnd(t){if(t){if(!this._instanceByIdNext)throw new Error("InternalError: Found updateEnd call without corresponding updateStart");for(const t of this._instanceById.keys())this._instanceByIdNext.has(t)||this._instanceById.delete(t);for(const[t,e]of this._instanceByIdNext.entries()){const s=this._instanceById.get(t);s?s.setInput(e.getInput()):this._instanceById.set(t,e)}this._instanceByIdNext=null,this._shaderCountByMesh=null,this._shaderIndices=null}}values(){return this._instanceById.values()}ensureInstance(n,i){let r;if("object"==typeof i&&"optionalAttributes"in i&&"uniforms"in i){const t=`${n.type}.${JSON.stringify(i.optionalAttributes)}`,e=t+`.${JSON.stringify(i.uniforms)}`;let s=0;null!=this._instanceByIdNext&&(this._shaderIndices.has(e)?s=this._shaderIndices.get(e):(s=this._shaderCountByMesh.get(t)??0,this._shaderCountByMesh.set(t,s+1),this._shaderIndices.set(e,s))),r=t+`.${s}`}else r=`${n.type}.${JSON.stringify(i)}`;const a=(0,string/* numericHash */.Wm)(r);if(this._instanceByIdNext){const t=new TechniqueInstance/* FeatureTechniqueInstance */.c((0,instanceIdUtils/* castInstanceId */.U)(a),n,i);return this._instanceByIdNext.set(a,t),t}if(!this._instanceById.has(a)){const t=new TechniqueInstance/* FeatureTechniqueInstance */.c((0,instanceIdUtils/* castInstanceId */.U)(a),n,i);this._instanceById.set(a,t)}return this._instanceById.get(a)}getInstance(t){const e=this._instanceById.get(t);if(null==e)throw new Error(`InternalError: Unable to get instance for ${t}`);return e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js + 65 modules
var TechniqueRegistry = __webpack_require__(84022);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js
var TechniqueType = __webpack_require__(98826);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/CircularArray.js
var CircularArray = __webpack_require__(38561);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js + 2 modules
var TileInfoView = __webpack_require__(75976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileKey.js
var TileKey = __webpack_require__(42482);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileQueue.js + 1 modules
var TileQueue = __webpack_require__(36791);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js + 1 modules
var TileStrategy = __webpack_require__(62540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js + 4 modules
var FeatureTile = __webpack_require__(90819);
;// ../node_modules/@arcgis/core/views/2d/layers/features/RenderState.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const d=1e3;class RenderState_l{constructor(t,i,s,o,n,r){this.getStage=t,this.getSubscriptionVersion=i,this.version=s,this._fader=o,this._container=n,this._tileInfoView=r,this._pendingUpdates=new CircularArray/* default */.A(d),this._locked=!1,this._tiles=new Map}destroy(){for(const e of this.tiles())e.destroy();this._pendingUpdates.clear(),this._tiles.clear()}tiles(){return this._tiles.values()}size(){return this._tiles.size}getTile(e){return this._tiles.get(e)}setTiles(e){this._tiles.clear();for(const t of e)this._tiles.set(t.key.id,t)}lockUploads(){this._locked=!0}unlockUploads(){this._locked=!1,this.flush()}enqueueUpdate(e){this._pendingUpdates.enqueue(e)}update(e){if(!this._locked)for(;this._pendingUpdates.size;){const t=this._pendingUpdates.peek();if(null==t||t.inner.attributeEpoch>e)break;this._updateTile(t),this._pendingUpdates.dequeue()}}removeTile(e){const t=this._tiles.get(e);(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Tile[${e}] RenderState.removeTile`),t&&(this._fader.unregisterFeatureTile(t),t.destroy()),this._tiles.delete(e)}isTileDone(e){const t=this._tiles.get(e.id);return!!t&&(t.isReady&&t.decluttered)}flush(){for(;this._pendingUpdates.size;){const e=this._pendingUpdates.dequeue();null!=e&&this._updateTile(e)}for(const e of this._tiles.values())e.upload()}_updateTile(e){const{inner:t,objectIdMap:i}=e,s=this.getSubscriptionVersion(t.id);if(s!==t.subscriptionVesrion){if((0,has/* default */.A)("esri-2d-update-debug")){const e=`${t.subscriptionVesrion} != ${s}`;console.debug(`Version[${e}] Tile[${t.id}] FeatureContainer - Dropping message, outdated version]`,t)}return}if((0,has/* default */.A)("esri-2d-update-debug")){const e=t.debugInfo?.chunkId??"<EnsureEnd>";console.debug(`Version[${t.version}] Tile[${t.id}] Chunk[${e}] RenderState.updateTile [${t.type}]`,t)}const o=this._ensureTile(t.id);if("update"===t.type){const[e,...s]=t.modify;o.onMessage({type:"update",modify:e,remove:t.remove,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});for(const o of s){const e=this._tiles.get(o.tileId);e&&e.onMessage({type:"update",modify:o,remove:t.remove,end:!1,isPixelBuffer:!0,attributeEpoch:null,objectIdMap:i})}return}if(null==t.append)return void o.onMessage({type:"append",clear:t.clear,debugInfo:t.debugInfo,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});const[n,...r]=t.append;o.onMessage({type:"append",clear:t.clear,append:n,debugInfo:t.debugInfo,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});for(const d of r){const e=this._tiles.get(d.tileId);e&&e.onMessage({type:"update",modify:d,remove:[],sort:!1,end:!1,isPixelBuffer:!0,attributeEpoch:null,objectIdMap:i})}}_ensureTile(e){if(!this._tiles.has(e)){const t=this._createTile(e);this._copyPixelBufferedEntitiesInto(t),this._tiles.set(e,t)}return this._tiles.get(e)}_createTile(e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this.version}] Tile[${e}] RenderState.createTile`);const d=new TileKey/* default */.A(e),l=this._tileInfoView.getTileBounds((0,aaBoundingRect/* create */.vt)(),d),a=l[0],u=l[3],p=this._tileInfoView.getTileResolution(d.level),c=this._container.instanceStore.find(TechniqueType/* TechniqueType */.N.Label)?.instanceId,h=new FeatureTile/* FeatureTile */.R(d,p,a,u,this._fader,c,!0);if(this._fader.registerFeatureTile(h),h.stage=this.getStage(),!h.stage){const e=new core_Error/* default */.A("featurelayerview:webgl","Cannot create tile with empty stage");Logger/* default */.A.getLogger("esri.views.2d.layers.features.RenderState").error(e)}return h}_copyPixelBufferedEntitiesInto(e){let t=7;const i=this._tileInfoView.getLODInfoAt(e.key);for(let s=-1;s<=1;s++)for(let o=-1;o<=1;o++){if(0===s&&0===o)continue;const n=e.key.getNormalizedNeighbor(o,s,i).id,r=this._tiles.get(n);if(null!=r){const i=1<<t;e.copyPixelBufferedEntitesFrom(r,i,o,s)}t--}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/util.js + 2 modules
var util = __webpack_require__(19257);
;// ../node_modules/@arcgis/core/views/2d/layers/features/FeatureContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FeatureContainer_c{constructor(e,s){this.id=e,this.version=s,this._resolver=(0,promiseUtils/* createResolver */.Tw)(),this._done=!1}get done(){return this._done}get promise(){return this._resolver.promise}end(){this._resolver.resolve(),this._done=!0}destroy(){this._resolver.reject()}}class _ extends AFeatureContainer/* AFeatureContainer */.j{constructor(e){super(e.view.featuresTilingScheme),this.updatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._hitTestsRequests=[],this._store=new FeatureInstanceStore_n,this._visibleTiles=new Set,this._subscriptions=new Map,this._updateStatisticsRequests=[],this._lockStatisticUpdates=!1,this._shouldUnlockAttributeView=!1,this._layerView=e,this.addTransitionable(this._layerView.featureEffectView)}renderChildren(e){if(this._updateAttributeView(),this._renderState?.update(this.attributeView.currentEpoch),this._layerView.requestUpdate(),this._renderState){const e=Array.from(this._renderState.tiles()).filter((e=>e.needsUpload));if(e.length){e[Math.floor(Math.random()*e.length)].upload(),e.length>=2&&this.requestRender()}for(const t of this._renderState.tiles())t.tryReady(this.attributeView.currentEpoch)&&(this._subscriptions.get(t.key.id)?.end(),this._layerView.requestUpdate(),this.hasLabels&&this._layerView.view.labelManager.requestUpdate(),this._layerView.view.labelManager.symbolFader.restartDeclutter(),this.requestRender())}const t=this._layerView.subscriptionManager.updateVisibility();this.setVisibleTiles(t);for(const s of this.children)s.setTransform(e.state);switch(super.renderChildren(e),e.drawPhase){case enums/* WGLDrawPhase */.S5.MAP:return this._renderMapPhase(e);case enums/* WGLDrawPhase */.S5.HIGHLIGHT:return this._renderHighlightPhase(e);case enums/* WGLDrawPhase */.S5.LABEL:return this._renderLabelPhase(e)}}subscriptions(){return this._subscriptions.values()}get _instanceStore(){return this._store}get instanceStore(){return this._store}get layerView(){return this._layerView}get hasLabels(){return this._layerView.labelingCollisionInfos.length>0}get hasHighlight(){return this._layerView.hasHighlight}get _layer(){return this._layerView.layer}_getHeatmapInstance(e){if(null==this._instanceStore||!(e.drawPhase&TechniqueRegistry/* Techniques */.YS.heatmap.drawPhase))return null;for(const t of this._instanceStore.values())if(FeatureContainer_p(t))return t;return null}get tiles(){return this._renderState?.tiles()}get children(){return this._renderState?Array.from(this._renderState.tiles()).filter((e=>this._visibleTiles.has(e.key.id))):[]}updateAttributeView(e){this.requestRender(),this.attributeView.requestUpdate(e),this.hasLabels&&(this._layerView.view.labelManager.requestUpdate(),this._layerView.view.labelManager.symbolFader.restartDeclutter())}updateSubscriptions(e){for(const{tileId:t,version:s}of e.subscribe)if(this._subscriptions.has(t))this._subscriptions.get(t).version=s;else{const e=new FeatureContainer_c(t,s);this._subscriptions.set(t,e),this.updatingHandles.addPromise(e.promise)}for(const t of e.unsubscribe){const e=this._subscriptions.get(t);e?.destroy(),this._subscriptions.delete(t),this.removeTile(t)}}isDone(e){return!!this._renderState&&this._renderState.isTileDone(e)}async updateRenderState(e){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${e}] FeatureContainer.updateRenderState`),this._renderStateNext=new RenderState_l((()=>this._stage),(e=>this._subscriptions.get(e)?.version),e,this.layerView.view.labelManager.symbolFader,this,this.tileInfoView)}getDisplayStatistics(e,t){const s=this._statisticsByLevel.get(e);return s?s.get(t):null}updateStatistics(e,t){if(this._lockStatisticUpdates)return void this._updateStatisticsRequests.push({level:e,statistics:t});let s=this._statisticsByLevel.get(e);s||(s=new Map,this._statisticsByLevel.set(e,s));for(const i of t)s.set(i.fieldName,{minValue:i.minValue,maxValue:i.maxValue})}lockForOverrides(){this._renderState?.lockUploads(),this._lockStatisticUpdates=!0,this.attributeView.locked||(this.attributeView.lockTextureUploads(),this._shouldUnlockAttributeView=!0)}unlockForOverrides(){this._renderState?.unlockUploads(),this._shouldUnlockAttributeView&&(this.attributeView.unlockTextureUploads(),this._shouldUnlockAttributeView=!1),this._lockStatisticUpdates=!1;for(const e of this._updateStatisticsRequests)this.updateStatistics(e.level,e.statistics);this._updateStatisticsRequests=[],this._renderState?.flush(),this.requestRender()}trySwapRenderState(){if(this._renderStateNext){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${this._renderStateNext.version}] FeatureContainer.update.swapRenderState`);const e=new Map;for(const t of this._renderState?.tiles()||[])e.set(t.id,t.metricsVisibility);this._renderState?.destroy(),this._renderState=this._renderStateNext,this._renderState.flush();for(const t of this._renderState.tiles())t.copyMetricsVisibility(e.get(t.id)||new Set);this._renderStateNext=null}this.requestRender()}setVisibleTiles(e){this._visibleTiles=e;for(const t of this.tiles??[])t.rendering=e.has(t.key.id)}async onMessage(t,s){(0,promiseUtils/* throwIfAborted */.Te)(s);const i=t.inner;if(!this._subscriptions.has(i.id))return;const r=this._subscriptions.get(i.id);if(r.version!==i.subscriptionVesrion){if((0,has/* default */.A)("esri-2d-update-debug")){const e=`${i.subscriptionVesrion} != ${r.version}`;console.debug(`Version[${e}] Tile[${i.id}] FeatureContainer - Dropping message, outdated version]`,i)}return}const n=this._renderStateNext??this._renderState;if(!n)throw new Error("InternalError: No renderState defined");n.version!==i.version&&console.error(`InternalError: Version mismatch. [renderState: ${n.version}, message: ${i.version}]`),n.enqueueUpdate(t),this.requestRender(),this._layerView.view.labelManager.requestUpdate(),this._layerView.requestUpdate()}removeTile(e){(this._renderState||this._renderStateNext)&&(this._renderState&&this._renderState.removeTile(e),this._renderStateNext&&this._renderStateNext.removeTile(e))}hitTest(e){let s=this._hitTestsRequests.find((({x:t,y:s})=>t===e.x&&s===e.y));const i=(0,promiseUtils/* createResolver */.Tw)();return s?s.resolvers.push(i):(s={x:e.x,y:e.y,resolvers:[i]},this._hitTestsRequests.push(s)),this.requestRender(),i.promise}getSortKeys(e){const t=new Set(e),s=new Map;for(const i of this.children)if(i.getSortKeys(t).forEach(((e,t)=>s.set(t,e))),s.size===t.size)break;return s}get hasAnimation(){return this.hasLabels}doRender(e){const{minScale:t,maxScale:s}=this._layer.effectiveScaleRange,i=e.state.scale;i<=(t||1/0)&&i>=s&&super.doRender(e)}afterRender(e){super.afterRender(e),this._hitTestsRequests.length&&this.requestRender()}setStencilReference(e){if(null==this._getHeatmapInstance(e))super.setStencilReference(e);else for(const t of this.children)t.stencilRef=TechniqueRegistry/* Techniques */.YS.heatmap.getStencilReference(t)}_renderMapPhase(e){this._layerView.featureEffectView.hasEffects?(this._renderOutsideEffect(e),this._renderInsideEffect(e)):this._renderFeatures(e,enums/* FeatureSelection */.RI.All),this._hitTestsRequests.length>0&&this._renderHittest(e)}_renderHighlightPhase(e){this.hasHighlight&&(0,util/* renderHighlight */.lB)(e,!1,(e=>{this._renderFeatures(e,enums/* FeatureSelection */.RI.Highlight)}))}_renderLabelPhase(e){this._renderFeatures(e,enums/* FeatureSelection */.RI.All)}_renderInsideEffect(e){const t=e.painter.effects.insideEffect;t.bind(e),this._renderFeatures(e,enums/* FeatureSelection */.RI.InsideEffect),t.draw(e,this._layerView.featureEffectView.includedEffects),t.unbind()}_renderOutsideEffect(e){const t=e.painter.effects.outsideEffect;t.bind(e),this._renderFeatures(e,enums/* FeatureSelection */.RI.OutsideEffect),t.draw(e,this._layerView.featureEffectView.excludedEffects),t.unbind()}_renderHittest(e){const{context:t}=e,s=e.painter.effects.hittest,i=t.getBoundFramebufferObject(),a=t.getViewport(),o=e.passOptions,h=e.drawPhase;s.bind(e),e.passOptions=s.createOptions(e,this._hitTestsRequests),e.drawPhase=enums/* WGLDrawPhase */.S5.HITTEST;const{distance:d,smallSymbolDistance:l}=e.passOptions,u=Math.max(d,l);for(const r of this.children)r.visible&&r.containsScreenPoint(e.state,e.passOptions.position,2*u)&&this._renderTile(r,e,enums/* FeatureSelection */.RI.All);s.draw(e),s.unbind(),t.bindFramebuffer(i),t.restoreViewport(a),e.passOptions=o,e.drawPhase=h}_renderFeatures(e,t){const s=this._getHeatmapInstance(e);null!=s?this._renderHeatmapFeatures(e,t,s):this._renderGeometryFeatures(e,t)}_renderGeometryFeatures(e,t){for(const s of this.children)s.visible&&this._renderTile(s,e,t)}_renderHeatmapFeatures(e,t,s){for(const i of this.children)i.visible&&this._renderTile(i,e,t,TechniqueType/* TechniqueType */.N.Heatmap);s.techniqueRef.renderResolvePass(e,s)}_renderTile(e,t,s,i){const r=(0,has/* default */.A)("featurelayer-strict-draw-order")?enums/* FeatureBatchingStrategy */.ch.STRICT_ORDER:(0,has/* default */.A)("featurelayer-force-marker-text-draw-order")?enums/* FeatureBatchingStrategy */.ch.STRICT_MARKERS_AND_TEXT:enums/* FeatureBatchingStrategy */.ch.BATCHING,n=e.getDisplayList(this._instanceStore,r);t.selection=s,n?.render(t,i)}}function FeatureContainer_p(e){return e.techniqueRef.type===TechniqueType/* TechniqueType */.N.Heatmap}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/workers/workers.js + 5 modules
var workers = __webpack_require__(90752);
;// ../node_modules/@arcgis/core/views/2d/layers/features/FeaturePipelineWorkerProxy.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function FeaturePipelineWorkerProxy_t(t){const o=await (0,workers/* open */.ho)("FeaturePipelineWorker",{client:t,strategy:"dedicated"});return new FeaturePipelineWorkerProxy_n(o)}class FeaturePipelineWorkerProxy_n{constructor(e){this._connection=e,this.pipeline=this._connection.createInvokeProxy(),this.features=this._connection.createInvokeProxy("features"),this.aggregates=this._connection.createInvokeProxy("aggregates"),this.streamMessenger=this._connection.createInvokeProxy("streamMessenger")}destroy(){this._connection.destroy()}get closed(){return this._connection.closed}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Evented.js
var Evented = __webpack_require__(17306);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/ReactiveMap.js
var ReactiveMap = __webpack_require__(71416);
;// ../node_modules/@arcgis/core/views/2d/layers/features/FeatureSourceEventLog.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const FeatureSourceEventLog_n=10;let FeatureSourceEventLog_l=class extends Accessor/* default */.A{constructor(){super(...arguments),this.events=new Evented/* default */.A,this._updatingStrategy=!0,this._tileToEvent=new ReactiveMap/* default */.A,this._fetchStatus={outstanding:0,done:0}}get hasAllData(){return!this._updatingStrategy&&this._hasAllTileData()}get willQueryAllFeatures(){return this._strategyInfo?.willQueryAllFeatures??!1}get willQueryFullResolutionGeometry(){return this._strategyInfo?.willQueryAllFeatures??!1}onEvent(t){switch(t.type){case"subscribe":case"unsubscribe":case"loaded":case"error":this._handleTileEvent(t);break;case"updateStrategyStart":this._updatingStrategy=!0,this._fetchStatus={done:0,outstanding:0},this._strategyInfo=t.about;break;case"updateStrategyEnd":this._updatingStrategy=!1;break;case"updateFieldsStart":this._fetchStatus={done:0,outstanding:0};break;case"updateFieldsEnd":break;case"updateFieldsError":this.events.emit("error",t);break;case"fetchStart":this._fetchStatus.outstanding+=1,this.events.emit("status",this._fetchStatus);break;case"fetchEnd":this._fetchStatus.done+=1,this.events.emit("status",this._fetchStatus),t.done&&(this._fetchStatus={done:0,outstanding:0})}}_hasAllTileData(){for(const t of this._tileToEvent.values()){const e=t.peekLast();if("loaded"!==e?.type)return!1}return!0}_handleTileEvent(t){switch(t.type){case"subscribe":{const e=new CircularArray/* default */.A(FeatureSourceEventLog_n);e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case"unsubscribe":this._tileToEvent.delete(t.tile);break;case"loaded":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case"error":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e),this.events.emit("error",t);break}}}};(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],FeatureSourceEventLog_l.prototype,"hasAllData",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],FeatureSourceEventLog_l.prototype,"willQueryAllFeatures",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],FeatureSourceEventLog_l.prototype,"willQueryFullResolutionGeometry",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],FeatureSourceEventLog_l.prototype,"_updatingStrategy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],FeatureSourceEventLog_l.prototype,"_strategyInfo",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],FeatureSourceEventLog_l.prototype,"_tileToEvent",void 0),FeatureSourceEventLog_l=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.features.FeatureSourceEventLog")],FeatureSourceEventLog_l);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js
var arcgisLayerUrl = __webpack_require__(16123);
;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function geometryUtils_e(e){switch(e.geometryType){case"point":return"esriGeometryPoint";case"polyline":return"esriGeometryPolyline";case"mesh":case"polygon":return"esriGeometryPolygon";case"multipatch":return"esriGeometryMultiPatch";case"multipoint":return"esriGeometryMultipoint";default:return null}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js
var featureReductionUtils = __webpack_require__(12712);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/lengthUtils.js
var lengthUtils = __webpack_require__(10301);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js
var sizeVariableUtils = __webpack_require__(99412);
;// ../node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const visualVariableSimpleUtils_r=Math.PI;function visualVariableSimpleUtils_i(e,t){switch(t.transformationType){case sizeVariableUtils/* TransformationType */._w.Additive:return visualVariableSimpleUtils_s(e,t);case sizeVariableUtils/* TransformationType */._w.Constant:return visualVariableSimpleUtils_o(t,e);case sizeVariableUtils/* TransformationType */._w.ClampedLinear:return u(e,t);case sizeVariableUtils/* TransformationType */._w.Proportional:return visualVariableSimpleUtils_l(e,t);case sizeVariableUtils/* TransformationType */._w.Stops:return visualVariableSimpleUtils_c(e,t);case sizeVariableUtils/* TransformationType */._w.RealWorldSize:return m(e,t);case sizeVariableUtils/* TransformationType */._w.Identity:return e;case sizeVariableUtils/* TransformationType */._w.Unknown:return null}}function visualVariableSimpleUtils_a(e,t){return"number"==typeof e?e:visualVariableSimpleUtils_i(t,e)}function visualVariableSimpleUtils_s(e,t){return e+(visualVariableSimpleUtils_a(t.minSize,e)||t.minDataValue)}function visualVariableSimpleUtils_o(e,t){const n=e.stops;let r=n?.length&&n[0].size;return null==r&&(r=e.minSize),visualVariableSimpleUtils_a(r,t)}function u(e,t){const n=t.minDataValue,r=t.maxDataValue,i=(e-n)/(r-n),s=visualVariableSimpleUtils_a(t.minSize,e),o=visualVariableSimpleUtils_a(t.maxSize,e);return e<=n?s:e>=r?o:s+i*(o-s)}function visualVariableSimpleUtils_l(t,n){const r=t/n.minDataValue,i=visualVariableSimpleUtils_a(n.minSize,t),s=visualVariableSimpleUtils_a(n.maxSize,t);let o=null;return o=r*i,(0,mathUtils/* clamp */.qE)(o,i,s)}function visualVariableSimpleUtils_c(e,t){const[n,r,i]=visualVariableSimpleUtils_p(e,t.cache.ipData);if(n===r)return visualVariableSimpleUtils_a(t.stops[n].size,e);{const s=visualVariableSimpleUtils_a(t.stops[n].size,e);return s+(visualVariableSimpleUtils_a(t.stops[r].size,e)-s)*i}}function m(n,i){const s=lengthUtils/* meterIn */.j[i.valueUnit],o=visualVariableSimpleUtils_a(i.minSize,n),u=visualVariableSimpleUtils_a(i.maxSize,n),{valueRepresentation:l}=i;let c=null;return c="area"===l?2*Math.sqrt(n/visualVariableSimpleUtils_r)/s:"radius"===l||"distance"===l?2*n/s:n/s,(0,mathUtils/* clamp */.qE)(c,o,u)}function visualVariableSimpleUtils_p(e,t){if(!t)return;let n=0,r=t.length-1;return t.some(((t,i)=>e<t?(r=i,!0):(n=i,!1))),[n,r,(e-t[n])/(t[r]-t[n])]}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function labelingUtils_l(n){return(n.labelsVisible&&n.labelingInfo?.every((n=>"none"!==n.deconflictionStrategy)))??!1}function labelingUtils_r(n,i){const l=(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(n,i);if(l?.labelsVisible&&l.labelingInfo?.length)return l.labelingInfo.every((n=>"none"!==n.deconflictionStrategy))}function labelingUtils_t(e){return l=>(0,screenUtils/* pt2px */.Lz)(visualVariableSimpleUtils_i(l,e))}function labelingUtils_o(n){const e=null!=n&&"visualVariables"in n&&n.visualVariables;if(!e)return null;for(const i of e)if("size"===i.type)return labelingUtils_t(i);return null}

;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function SourceSchema_t(t,i,s,o){const l=null!=t.subtypeCode?`${t.subtypeField} = ${t.subtypeCode}`:null,n=(0,sql/* sqlAnd */.mA)(t.definitionExpression,l),r=t.customParameters??{},a=i.displayFilterEnabled&&t.displayFilterInfo?t.displayFilterInfo.toJSON():null;return o&&(r.token=o),{type:"feature",mutable:{sourceRefreshVersion:s,availableFields:i.availableFields,displayFilterInfo:a,dataFilter:{definitionExpression:n,customParameters:r,gdbVersion:t.gdbVersion,historicMoment:t.historicMoment?.getTime(),queryScaleRanges:t.queryScaleRanges??[],timeExtent:t.timeExtent?.toJSON()}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/OrderByInfo.js
var OrderByInfo = __webpack_require__(3243);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/labelingInfo.js
var labelingInfo = __webpack_require__(79682);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/heatmapUtils.js
var heatmapUtils = __webpack_require__(27927);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleFillSymbol.js
var SimpleFillSymbol = __webpack_require__(68882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleLineSymbol.js + 2 modules
var SimpleLineSymbol = __webpack_require__(40241);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js
var SimpleMarkerSymbol = __webpack_require__(23369);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var cim_enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/SDFHelper.js
var SDFHelper = __webpack_require__(21422);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/color.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function color_r(n,r=0,t=!1){const o=n[r+3];return n[r]*=o,n[r+1]*=o,n[r+2]*=o,t||(n[r+3]*=255),n}function color_t(r){if(!r)return 0;const{r:t,g:o,b:u,a:i}=r;return n(t*i,o*i,u*i,255*i)}function color_o(r){if(!r)return 0;const[t,o,u,i]=r;return n(t*(i/255),o*(i/255),u*(i/255),i)}function color_u(n,r,t=0){if(null==r)return n[t]=0,n[t+1]=0,n[t+2]=0,void(n[t+3]=0);const{r:o,g:u,b:i,a:c}=r;n[t]=o*c/255,n[t+1]=u*c/255,n[t+2]=i*c/255,n[t+3]=c}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/schemaUtils.js
var schemaUtils = __webpack_require__(21059);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js
var VisualVariablesSchema = __webpack_require__(21857);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/ComplexSymbolSchema.js
var ComplexSymbolSchema = __webpack_require__(83810);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/utils.js
var utils = __webpack_require__(54232);
;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/SymbolSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function g(i,a){if(!i)return[];switch(i.type){case"simple-fill":return j(i,a);case"picture-fill":return F(i,a);case"simple-marker":return w(i,a);case"picture-marker":return A(i,a);case"simple-line":return P(i,a,!1);case"text":return L(i,a);case"label":return R(i,a);case"cim":return (0,ComplexSymbolSchema/* createComplexSymbolInstances */.Jk)(i.data,a);case"web-style":return g(await i.fetchSymbol({acceptedFormats:["cim","web"]}),a);case"line-3d":return Logger/* default */.A.getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-line`),P(new SimpleLineSymbol/* default */.A,a,!1);case"point-3d":return Logger/* default */.A.getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-marker`),w(new SimpleMarkerSymbol/* default */.A,a);case"polygon-3d":return Logger/* default */.A.getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-fill`),j(new SimpleFillSymbol/* default */.A,a);case"mesh-3d":case"label-3d":return Logger/* default */.A.getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Ignoring`),[];case"CIMSymbolReference":throw new Error("InternalError: CIMSymbolReference should already be resolved")}}async function M(e,i){const{schemaOptions:a}=i,{store:r}=a,t=new Array(definitions/* dotDensityMaxFields */.ju),o=new Array(definitions/* dotDensityMaxFields */.ju/4);for(let l=0;l<definitions/* dotDensityMaxFields */.ju;l++){const i=l<e.attributes.length?e.attributes[l].color:null;t[l]=[0,0,0,0],color_u(t[l],i)}for(let l=0;l<definitions/* dotDensityMaxFields */.ju/4;l++)o[l]=[0,0,0,0],o[l][0]=4*l<e.attributes.length?1:0,o[l][1]=4*l+1<e.attributes.length?1:0,o[l][2]=4*l+2<e.attributes.length?1:0,o[l][3]=4*l+3<e.attributes.length?1:0;const s={uniforms:{isActive:o,colors:t,dotValue:e.dotValue,dotScale:e.referenceScale,blending:e.dotBlendingEnabled,dotSize:e.dotSize,seed:e.seed},optionalAttributes:{}},n=r.ensureInstance(TechniqueRegistry/* Techniques */.YS.dotDensity,s).createMeshInfo({effects:null}),u=[],c=new SimpleFillSymbol/* default */.A({color:e.backgroundColor??[0,0,0,0],outline:null}),p=await g(c,i);if(u.push(...p),u.push(n),e.outline){const a=P(e.outline,i,!0);u.push(...a)}return u}async function C(e,l){const{store:r}=l,{radius:t,minDensity:o,maxDensity:s,referenceScale:n,field:u,valueExpression:c,colorStops:p}=e,f=(0,heatmapUtils/* generateGradient */.O3)(p);return[r.ensureInstance(TechniqueRegistry/* Techniques */.YS.heatmap,{uniforms:{radius:(0,screenUtils/* pt2px */.Lz)(t),minDensity:o,maxDensity:s,referenceScale:n,isFieldActive:!(!u&&!c),gradient:f,gradientHash:f.join(",")},optionalAttributes:{}}).createMeshInfo({effects:null})]}async function x(e,a){const{store:l}=a,r=e.outline?.width||0,t=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(e),o=l.ensureInstance(TechniqueRegistry/* Techniques */.YS.pieChart,{uniforms:{shader:{outlineWidth:Math.round((0,screenUtils/* pt2px */.Lz)(r)),defaultColor:(0,schemaUtils/* premultiplyColor */.p)(e.defaultColor),outlineColor:(0,schemaUtils/* premultiplyColor */.p)(e.outline?.color),othersColor:(0,schemaUtils/* premultiplyColor */.p)(e.othersCategory?.color),donutRatio:e.holePercentage,sectorThreshold:e.othersCategory?.threshold||0,colors:e.attributes.map((e=>(0,schemaUtils/* premultiplyColor */.p)(e.color))),visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue,hittestUniforms:null,highlightUniforms:null},numberOfFields:e.attributes.length},optionalAttributes:{}}).createMeshInfo({size:e.size,outlineWidth:r,effects:null,scaleInfo:null,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(t)});return[...e.backgroundFillSymbol?await j(e.backgroundFillSymbol,{schemaOptions:a,uniforms:VisualVariablesSchema/* noVisualVariables */.Dk}):[],o]}function I(e){if("path"===e.style){if(null==e.path)throw new Error("Symbol with a style of type path must define a path");return{type:"sprite-rasterization-param",overrides:[],resource:{type:"path",path:e.path,asFill:!0}}}const i=CIMSymbolHelper/* CIMSymbolHelper */.wp.fromSimpleMarker(e);if("outline"in e&&e.outline&&"none"!==e.outline.style){if("solid"!==e.outline.style){if(!i||!i.symbolLayers)throw new Error("Error handling marker! ");return{type:"sprite-rasterization-param",resource:i.symbolLayers[0],overrides:[]}}}return{type:"sprite-rasterization-param",resource:(0,SDFHelper/* getSDFInfo */.eR)(i),overrides:[]}}async function w(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l;if("path"===e.style||e.outline&&"solid"!==e.outline.style&&"none"!==e.outline.style){const l=CIMSymbolHelper/* CIMSymbolHelper */.wp.fromSimpleMarker(e);if(!l||!l.symbolLayers)throw new Error("Error handling marker! ");if(a.visualVariableRotation&&(l.angleAlignment="Map"),"path"!==e.style){const e=l.symbolLayers[0];if((0,utils/* hasSizeVVUniform */.IY)(i.uniforms)){const a=(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(i.uniforms,0,1);if(a>e.size){const i=a/e.size;e.size=a;const l=e.markerGraphics?.[0].symbol;(l.symbolLayers&&l.symbolLayers[0]).width*=i}}}return (0,ComplexSymbolSchema/* createComplexSymbolInstances */.Jk)({type:"CIMSymbolReference",symbol:l},i)}const t=r.ensureInstance(TechniqueRegistry/* Techniques */.YS.marker,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue,visualVariableRotation:a.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),s=I(e);let u=e.color?.toArray()??[0,0,0,0];"CIMVectorMarker"===s.resource.type&&(u=[255,255,255,255]);const c="triangle"===e.style?124/116:1,p=e.size,f=p*c,b=null!=a.visualVariableColor&&("cross"===e.style||"x"===e.style);return[t.createMeshInfo({type:"simple",color:u,height:p,width:f,offsetX:e.xoffset,offsetY:e.yoffset,angle:e.angle,alignment:(0,utils/* hasRotationVVUniform */.N7)(a)?cim_enums/* Alignment */.C1.MAP:cim_enums/* Alignment */.C1.SCREEN,outlineColor:e.outline?.color?.toArray()??[0,0,0,0],outlineSize:e.outline?.width??1,referenceSize:p,sprite:s,overrideOutlineColor:b,hasSizeVV:(0,utils/* hasSizeVVUniform */.IY)(a),placement:null,effects:null,transforms:null,scaleInfo:null,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(a)})]}function A(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l,t=r.ensureInstance(TechniqueRegistry/* Techniques */.YS.marker,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue,visualVariableRotation:a.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),s=CIMSymbolHelper/* CIMSymbolHelper */.wp.createPictureMarkerRasterizationParam(e);if(!s)return[];return[t.createMeshInfo({type:"picture",color:[255,255,255,255],height:e.height,width:e.width,offsetX:e.xoffset,offsetY:e.yoffset,angle:e.angle,alignment:(0,utils/* hasRotationVVUniform */.N7)(a)?cim_enums/* Alignment */.C1.MAP:cim_enums/* Alignment */.C1.SCREEN,outlineColor:null,outlineSize:0,referenceSize:e.height,sprite:s,overrideOutlineColor:!1,hasSizeVV:(0,utils/* hasSizeVVUniform */.IY)(a),placement:null,effects:null,transforms:null,scaleInfo:null,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(a)})]}function O(e,i,a){const{uniforms:l,schemaOptions:r}=a,{store:t}=r,o=t.ensureInstance(TechniqueRegistry/* Techniques */.YS.marker,{uniforms:{visualVariableColor:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity,visualVariableSizeMinMaxValue:l.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:l.visualVariableSizeScaleStops,visualVariableSizeStops:l.visualVariableSizeStops,visualVariableSizeUnitValue:l.visualVariableSizeUnitValue,visualVariableRotation:l.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),s=I(e),c=6,p=c*i.width,f=p,b=e.color?.toArray()??i.color?.toArray()??[0,0,0,0],S="cross"===e.style||"x"===e.style;let V;switch(e.placement){case"begin-end":V=cim_enums/* ExtremityPlacement */.$2.Both;break;case"begin":V=cim_enums/* ExtremityPlacement */.$2.JustBegin;break;case"end":V=cim_enums/* ExtremityPlacement */.$2.JustEnd;break;default:V=cim_enums/* ExtremityPlacement */.$2.None}const v={type:"cim-marker-placement-param",placement:{type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:V,offsetAlongLine:0},overrides:[]};return[o.createMeshInfo({type:"simple",color:b,height:f,width:p,offsetX:0,offsetY:0,angle:0,alignment:(0,utils/* hasRotationVVUniform */.N7)(l)?cim_enums/* Alignment */.C1.MAP:cim_enums/* Alignment */.C1.SCREEN,outlineColor:b,outlineSize:S?i.width:0,referenceSize:f/c,sprite:s,overrideOutlineColor:S&&null!=l.visualVariableColor,hasSizeVV:(0,utils/* hasSizeVVUniform */.IY)(l),placement:v,transforms:null,effects:null,scaleInfo:null,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(l)})]}function L(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l;return[r.ensureInstance(TechniqueRegistry/* Techniques */.YS.text,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableRotation:a.visualVariableRotation,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!1,clipAngle:!1,referenceSymbol:!1,visibility:!1}}).createMeshInfo({boxBackgroundColor:e.backgroundColor?.toArray(),boxBorderLineColor:e.borderLineColor?.toArray(),boxBorderLineSize:e.borderLineSize??0,color:e.color?.toArray()??[0,0,0,0],offsetX:e.xoffset,offsetY:e.yoffset,postAngle:e.angle,fontSize:e.font.size,decoration:e.font.decoration,haloColor:e.haloColor?.toArray()??[0,0,0,0],haloSize:e.haloSize??0,outlineColor:[0,0,0,0],outlineSize:0,lineWidth:e.lineWidth,lineHeightRatio:e.lineHeight,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,useCIMAngleBehavior:!1,glyphs:{type:"text-rasterization-param",resource:{type:"text",font:e.font.toJSON(),textString:e.text,symbol:CIMSymbolHelper/* CIMSymbolHelper */.wp.createCIMTextSymbolfromTextSymbol(e)},overrides:[]},referenceSize:null,effects:null,placement:null,scaleInfo:null,transforms:null,scaleFactor:1,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(a),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null,labelClassId:-1})]}function R(e,a){const{schemaOptions:l,uniforms:r}=a,{store:t}=l,s=e.symbol,{allowOverrun:n,repeatLabel:u,repeatLabelDistance:c}=e,f={maxScale:e.maxScale??0,minScale:e.minScale??0},b=t.ensureInstance(TechniqueRegistry/* Techniques */.YS.label,{uniforms:{visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:r.visualVariableRotation,visualVariableSizeMinMaxValue:r.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:r.visualVariableSizeScaleStops,visualVariableSizeStops:r.visualVariableSizeStops,visualVariableSizeUnitValue:r.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!0,clipAngle:!0,referenceSymbol:!0,visibility:!0}}),S=e.labelPlacement,[V,v]=(0,alignmentUtils/* getAlignmentFromPlacement */.fO)(S);return[b.createMeshInfo({boxBackgroundColor:s.backgroundColor?.toArray(),boxBorderLineColor:s.borderLineColor?.toArray(),boxBorderLineSize:s.borderLineSize??0,color:s.color?.toArray()??[0,0,0,0],offsetX:s.xoffset,offsetY:s.yoffset,postAngle:s.angle,fontSize:s.font.size,decoration:s.font.decoration,outlineColor:[0,0,0,0],outlineSize:0,haloColor:s.haloColor?.toArray()??[0,0,0,0],haloSize:s.haloSize??0,lineWidth:s.lineWidth,lineHeightRatio:s.lineHeight,horizontalAlignment:V,verticalAlignment:v,repeatLabel:u,repeatLabelDistance:(0,screenUtils/* pt2px */.Lz)(c),allowOverrun:n,labelPosition:e.labelPosition,scaleInfo:f,minPixelBuffer:(0,VisualVariablesSchema/* getMaxSizeVVSize */.j0)(r),useCIMAngleBehavior:!1,glyphs:{type:"text-rasterization-param",resource:{type:"text",font:s.font.toJSON(),textString:s.text,symbol:CIMSymbolHelper/* CIMSymbolHelper */.wp.createCIMTextSymbolfromTextSymbol(s),primitiveName:"label-override"},useLegacyLabelEvaluationRules:null==e.labelExpressionInfo?.expression,overrides:[{valueExpressionInfo:{type:"CIMExpressionInfo",expression:e.labelExpressionInfo?.expression??e.labelExpression,returnType:"String"},primitiveName:"label-override",propertyName:"textString",defaultValue:""}]},referenceSize:null,effects:null,placement:null,transforms:null,scaleFactor:1,labelClassId:a.labelClassId})]}function k(e,i){const a=e.width;return{outlineColor:e.color?.toArray()||[0,0,0,1],width:a,referenceWidth:a,capType:e.cap??"round",joinType:e.join??"round",miterLimit:e.miterLimit,hasSizeVV:i,outlineUsesColorVV:!1}}function U(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l,t=e.color?.toArray()??[0,0,0,0],o={type:"sprite-rasterization-param",resource:{type:"fill-style",style:e.style},overrides:[]};if("solid"===e.outline?.style){return[r.ensureInstance(TechniqueRegistry/* Techniques */.YS.patternOutlineFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeScaleStops:a.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,...k(e.outline,!!a.visualVariableSizeOutlineScaleStops),sprite:o,scaleInfo:null,effects:null})]}const s=[],n=r.ensureInstance(TechniqueRegistry/* Techniques */.YS.patternFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:e.color?.toArray()??[0,0,0,0],sprite:o,scaleInfo:null,effects:null});return s.push(n),e.outline&&s.push(...P(e.outline,i,!0)),s}function E(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l,t=e.color?.toArray()??[0,0,0,0];if("none"!==e.style&&"solid"===e.outline?.style){return[r.ensureInstance(TechniqueRegistry/* Techniques */.YS.outlineFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeScaleStops:a.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,...k(e.outline,!!a.visualVariableSizeOutlineScaleStops),scaleInfo:null,effects:null})]}const o=[];if("none"!==e.style){const e=r.ensureInstance(TechniqueRegistry/* Techniques */.YS.fill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,scaleInfo:null,effects:null});o.push(e)}return e.outline&&o.push(...P(e.outline,i,!0)),o}async function j(e,i){if("cim"===e.type)return (0,ComplexSymbolSchema/* createComplexSymbolInstances */.Jk)(e.data,i);const{style:a}=e;return a&&"none"!==a&&"solid"!==a?U(e,i):E(e,i)}function F(e,i){const{outline:a}=e,{uniforms:l,schemaOptions:r}=i,{store:t}=r,s=[],n=CIMSymbolHelper/* CIMSymbolHelper */.wp.createPictureFillRasterizationParam(e);if(!n)return[];const{width:u,height:c,xoffset:p,yoffset:f,xscale:b,yscale:S}=e,V={color:[255,255,255,255],sprite:n,height:c,aspectRatio:u/c,offsetX:p,offsetY:f,scaleX:b,scaleY:S,angle:0,applyRandomOffset:!1,sampleAlphaOnly:!1,scaleProportionally:!1,effects:null,scaleInfo:null};if("solid"===a?.style){return[t.ensureInstance(TechniqueRegistry/* Techniques */.YS.complexOutlineFill,{uniforms:{visualVariableColor:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity,visualVariableSizeScaleStops:l.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({...V,...k(a,!!l.visualVariableSizeOutlineScaleStops)})]}const y=t.ensureInstance(TechniqueRegistry/* Techniques */.YS.complexFill,{uniforms:{visualVariableColor:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity},optionalAttributes:{zoomRange:!1}});return s.push(y.createMeshInfo(V)),a&&s.push(...P(a,i,!0)),s}function P(e,i,a){const{color:l,style:r,width:t,cap:o,join:n}=e,{schemaOptions:u}=i,{store:c}=u,p=[],f=a?{...VisualVariablesSchema/* noVisualVariables */.Dk,visualVariableSizeScaleStops:i.uniforms.visualVariableSizeOutlineScaleStops}:i.uniforms,b={uniforms:{visualVariableColor:f.visualVariableColor,visualVariableOpacity:f.visualVariableOpacity,visualVariableSizeMinMaxValue:f.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:f.visualVariableSizeScaleStops,visualVariableSizeStops:f.visualVariableSizeStops,visualVariableSizeUnitValue:f.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!1}},S={color:l?.toArray()??[0,0,0,0],width:t,referenceWidth:t,capType:o,joinType:n,miterLimit:e.miterLimit,hasSizeVV:(0,utils/* hasSizeVVUniform */.IY)(f),effects:null,scaleInfo:null};if(null==r||"solid"===r){const e=c.ensureInstance(TechniqueRegistry/* Techniques */.YS.line,b).createMeshInfo(S);p.push(e)}else if("none"!==r){const e=c.ensureInstance(TechniqueRegistry/* Techniques */.YS.texturedLine,b).createMeshInfo({...S,offsetAlongLine:0,shouldScaleDash:!0,shouldSampleAlphaOnly:!1,isSDF:!0,sprite:{type:"sprite-rasterization-param",resource:{type:"dash",dashTemplate:(0,CIMSymbolHelper/* slsDashToTemplateArray */.BW)(r,o)},overrides:[]}});p.push(e)}return null!=e.marker&&p.push(...O(e.marker,e,i)),p}

;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/LabelMatcherSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function LabelMatcherSchema_o(e,a,o){const r=a.labelsVisible&&a.labelingInfo||[],i=geometryUtils_e(a),t=(0,labelingInfo/* validateLabelingInfo */.z)(r,i);return{type:"label",classes:await Promise.all(t.map(((s,l)=>LabelMatcherSchema_n(e,s,a.labelsVisible,a.layerId,l,i,o))))}}async function LabelMatcherSchema_n(s,l,o,n,r,i,t){const m=(0,string/* numericHash */.Wm)(`${n} ${r}`),c=await g(l,{schemaOptions:s,uniforms:t,labelClassId:m});return{maxScale:l.maxScale,minScale:l.minScale,deconflictionEnabled:"none"!==l.deconflictionStrategy&&o,expression:l.labelExpressionInfo?.expression??l.labelExpression,where:l.where,meshes:c,labelClassId:m,geometryType:i}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/MatcherSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function MatcherSchema_l(e,i){if(!i)return{type:"simple",meshes:[]};switch(i.type){case"simple":return MatcherSchema_o(e,i);case"dot-density":return MatcherSchema_r(e,i);case"class-breaks":return MatcherSchema_u(e,i);case"unique-value":return MatcherSchema_m(e,i);case"dictionary":return MatcherSchema_c(i);case"heatmap":return MatcherSchema_p(e,i);case"pie-chart":return f(e,i)}}async function MatcherSchema_o(i,a){const n=a.symbols,t=n.length?n[0]:null,l=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(a);return{type:"simple",meshes:await g(t,{schemaOptions:i,uniforms:l})}}async function MatcherSchema_r(i,a){const n=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(a);return{type:"dot-density",meshes:await M(a,{schemaOptions:i,uniforms:n})}}async function MatcherSchema_u(a,n){const t=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(n),l=n.backgroundFillSymbol,o=n.normalizationType,r="log"===o?"esriNormalizeByLog":"percent-of-total"===o?"esriNormalizeByPercentOfTotal":"field"===o?"esriNormalizeByField":null,u=n.classBreakInfos.map((async e=>({meshes:await g(e.symbol,{path:`renderer-stop-${e.minValue}-${e.maxValue}`,schemaOptions:a,uniforms:t}),min:e.minValue,max:e.maxValue}))),m=(await Promise.all(u)).sort(((e,i)=>e.min-i.min)),c=await g(l,{schemaOptions:a,uniforms:{...VisualVariablesSchema/* noVisualVariables */.Dk,visualVariableSizeOutlineScaleStops:t.visualVariableSizeOutlineScaleStops}}),p=await g(n.defaultSymbol,{schemaOptions:a,uniforms:t});return{type:"interval",field:n.field,expression:n.valueExpression,backgroundFill:c,defaultSymbol:p,intervals:m,normalizationField:n.normalizationField,normalizationTotal:n.normalizationTotal,normalizationType:r,isMaxInclusive:n.isMaxInclusive}}async function MatcherSchema_m(a,n){const t=[],l=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(n),o=await g(n.backgroundFillSymbol,{schemaOptions:a,uniforms:{...VisualVariablesSchema/* noVisualVariables */.Dk,visualVariableSizeOutlineScaleStops:l.visualVariableSizeOutlineScaleStops}}),r=await g(n.defaultSymbol,{schemaOptions:a,uniforms:l});for(const e of n.uniqueValueInfos??[]){const i=await g(e.symbol,{path:`renderer-unique-value-${e.value}`,schemaOptions:a,uniforms:l});t.push({value:""+e.value,symbol:i})}return{type:"map",field:n.field,expression:n.valueExpression,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,backgroundFill:o,defaultSymbol:r,map:t}}async function MatcherSchema_c(i){const a=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(i),n=await i.getDictionaryInfo(),s=i.scaleExpression,t=null!=s&&"1"!==s?{valueExpressionInfo:{type:"CIMExpressionInfo",expression:i.scaleExpression,returnType:"Numeric"},defaultValue:1}:void 0;return{type:"dictionary",dictionaryInfo:n,userConfig:i.config??{},fieldMap:i.fieldMap??{},scaleExpression:t,visualVariableUniforms:a}}async function MatcherSchema_p(e,i){return{type:"heatmap",meshes:await C(i,e)}}async function f(e,i){return{type:"pie-chart",meshes:await x(i,e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/StorageSchema.js
var StorageSchema = __webpack_require__(77013);
;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function SimpleProcessorSchema_o(e,r){const t=r.renderer,n=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(t);return{symbology:await MatcherSchema_l(e,t),labels:await LabelMatcherSchema_o(e,r,n)}}async function SimpleProcessorSchema_u(e,r,t,s){const i=t.featureReduction;if(i)switch(i.type){case"binning":return SimpleProcessorSchema_f(i,e,r,t,s);case"cluster":return SimpleProcessorSchema_p(i,e,r,t,s)}if(t.trackInfo?.enabled)return SimpleProcessorSchema_d(t.trackInfo,e,r,t,s);const a=b(t.orderBy,t.renderer,t.objectIdField),l=(0,StorageSchema/* createStorageSchema */.T9)(t.renderer,r.filters),u=await SimpleProcessorSchema_o(e,t),c=SimpleProcessorSchema_g(u.symbology);return{storage:l,mesh:{properties:{sortKey:a,timeZone:r.timeZone,returnMeshObjectId:c,displayRefreshVersion:s,currentUser:r.currentUser},strategy:{type:"feature"},factory:u},expressionProperties:{timeExtent:r.timeExtent?.toJSON()}}}function SimpleProcessorSchema_c(e,r){return e.fields.map((e=>({...e.toJSON(),type:y(e,r)})))}function y(e,r){const{onStatisticExpression:t,onStatisticField:s,statisticType:i}=e;switch(i){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":{if(t){const{returnType:e}=t;return e?"string"===e?"esriFieldTypeString":"esriFieldTypeDouble":"esriFieldTypeString"}const e=r.find((e=>e.name===s));return e?e.type:"esriFieldTypeString"}}}async function SimpleProcessorSchema_f(r,t,a,o,u){const y=SimpleProcessorSchema_c(r,o.fields),f=r.renderer,p=await MatcherSchema_l(t,f),d=(0,StorageSchema/* createStorageSchema */.T9)(f,[null,null]),b=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(f),m=await LabelMatcherSchema_o(t,{geometryType:"polygon",layerId:o.layerId,labelingInfo:r.labelingInfo,labelsVisible:r.labelsVisible},b),v=SimpleProcessorSchema_g(p),h="geohash"===r.binType?{type:"geohash",fixBinLevel:r.fixedBinLevel??3}:{type:"grid",size:(0,screenUtils/* pt2px */.Lz)(r.size),fixedBinLevel:r.fixedBinLevel};return{storage:d,mesh:{properties:{sortKey:null,timeZone:a.timeZone,returnMeshObjectId:v,displayRefreshVersion:u,currentUser:a.currentUser},strategy:{type:"binning",fields:y,index:h,featureFilter:a.filters[0]},factory:{labels:m,symbology:p}},expressionProperties:{timeExtent:a.timeExtent?.toJSON()}}}async function SimpleProcessorSchema_p(r,t,a,o,u){const y=SimpleProcessorSchema_c(r,o.fields),f={type:"cluster",feature:await MatcherSchema_l(t,r.effectiveFeatureRenderer),cluster:await MatcherSchema_l(t,r.effectiveClusterRenderer)},p=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(r.effectiveFeatureRenderer),d={type:"cluster",feature:await LabelMatcherSchema_o(t,o,p),cluster:await LabelMatcherSchema_o(t,{geometryType:"point",layerId:o.layerId,labelingInfo:r.labelingInfo,labelsVisible:r.labelsVisible},p)},b=(0,StorageSchema/* createStorageSchema */.T9)(r.effectiveFeatureRenderer,[null,null]),m=SimpleProcessorSchema_g(f);return{storage:b,mesh:{properties:{sortKey:null,timeZone:a.timeZone,displayRefreshVersion:u,returnMeshObjectId:m,currentUser:a.currentUser},strategy:{type:"cluster",fields:y,featureFilter:a.filters[0],clusterRadius:(0,screenUtils/* pt2px */.Lz)(r.clusterRadius/2)},factory:{labels:d,symbology:f}},expressionProperties:{timeExtent:a.timeExtent?.toJSON()}}}async function SimpleProcessorSchema_d(e,r,t,n,o){const u=SimpleProcessorSchema_c(e,n.fields),y={type:"track",previousObservation:await MatcherSchema_l(r,e.previousObservations.renderer),latestObservation:await MatcherSchema_l(r,e.latestObservations.renderer),trackLine:await MatcherSchema_l(r,e.trackLines.renderer)},f={type:"track",previousObservation:await LabelMatcherSchema_o(r,{geometryType:n.geometryType,layerId:n.layerId,labelingInfo:e.previousObservations.labelingInfo,labelsVisible:e.previousObservations.labelsVisible},(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(e.previousObservations.renderer)),latestObservation:await LabelMatcherSchema_o(r,{geometryType:n.geometryType,layerId:n.layerId,labelingInfo:e.latestObservations.labelingInfo,labelsVisible:e.latestObservations.labelsVisible},(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(e.latestObservations.renderer)),trackLine:await LabelMatcherSchema_o(r,{geometryType:"polyline",layerId:n.layerId,labelingInfo:e.trackLines.labelingInfo,labelsVisible:e.trackLines.labelsVisible},(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(e.trackLines.renderer))},p=(0,StorageSchema/* createTrackStorageSchema */.uH)(e,[null,null]),d=SimpleProcessorSchema_g(y);return{storage:p,mesh:{properties:{sortKey:null,timeZone:t.timeZone,returnMeshObjectId:d,displayRefreshVersion:o,currentUser:t.currentUser},strategy:{type:"track",featureFilter:t.filters[0],fields:u,maxDisplayDuration:e.maxDisplayDuration?.toMilliseconds()??0,maxDisplayObservationsPerTrack:e.maxDisplayObservationsPerTrack,showLatestObservation:e.latestObservations.visible,showPreviousObservations:e.previousObservations.visible,showTrackLine:e.trackLines.visible,timeField:e.timeField},factory:{labels:f,symbology:y}},expressionProperties:{timeExtent:t.timeExtent?.toJSON()}}}function b(e,t,s){const i=null!=t&&"unique-value"===t.type&&t.orderByClassesEnabled;if("default"!==e||i||(e=[new OrderByInfo/* default */.A({field:s,order:"descending"})]),"default"!==e&&e?.length){e.length;const r=e[0],t="ascending"===r.order?"asc":"desc";return r.field?{field:r.field,order:t}:r.valueExpression?{expression:r.valueExpression,order:t}:null}if(i){return{byRenderer:!0,order:"asc"}}return null}function SimpleProcessorSchema_m(e){return e.techniqueType===TechniqueType/* TechniqueType */.N.AnimatedMarker}function SimpleProcessorSchema_g(e){if("simple"===e.type&&e.meshes.some(SimpleProcessorSchema_m))return!0;if("interval"===e.type){if(e.intervals.some((e=>e.meshes.some(SimpleProcessorSchema_m))))return!0;if(e.backgroundFill.some(SimpleProcessorSchema_m))return!0}if("map"===e.type){if(e.map.some((e=>e.symbol.some(SimpleProcessorSchema_m))))return!0;if(e.backgroundFill.some(SimpleProcessorSchema_m))return!0}return!1}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js
var rendererUtils = __webpack_require__(63838);
;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/CatalogFootprintLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class CatalogFootprintLayerAdapter_n{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=labelingUtils_l(t);return[{vvEvaluators:{0:labelingUtils_o(t.renderer)},deconflictionEnabled:r}]}async createServiceOptions(o){const i=this.layer,{capabilities:s,editingInfo:a,objectIdField:l,globalIdField:n,datesInUnknownTimezone:p,dateFieldsTimeZone:d,orderBy:u,parsedUrl:c}=i,y=i.fieldsIndex.toJSON(),m=geometryUtils_e(i),f=i.timeInfo?.toJSON(),h=i.spatialReference.toJSON(),g=(0,lang/* clone */.o8)(c);let I=l;if(u?.length){const e=!u[0].valueExpression&&u[0].field;e&&(I=e)}const b=(0,arcgisLayerUrl/* isHostedAgolService */.Wo)(g.path),F=o.spatialReference.toJSON();return{type:"feature-service",source:g,isSourceHosted:b,orderByFields:I,outSpatialReference:F,metadata:{timeReferenceUnknownClient:p,dateFieldsTimeZone:d,globalIdField:n,fieldsIndex:y,geometryType:m,featureIdInfo:{type:"object-id",fieldName:l},timeInfo:f,spatialReference:h,outSpatialReference:F,subtypeField:null,subtypes:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:s.query.maxRecordCount,supportsCompactGeometry:s.query.supportsCompactGeometry,supportsDefaultSpatialReference:s.query.supportsDefaultSpatialReference,supportsFormatPBF:s.query.supportsFormatPBF,supportsMaxRecordCountFactor:s.query.supportsMaxRecordCountFactor,supportsQuantization:s.query.supportsQuantization,lastEditDate:a?.lastEditDate?.getTime(),snapshotInfo:null}}}createSourceSchema(e,t){const{definitionExpression:r,displayFilterInfo:o,customParameters:i,timeExtent:a,apiKey:l}=this.layer;return SourceSchema_t({definitionExpression:r,displayFilterInfo:o,customParameters:i,timeExtent:a},e,t,l)}createProcessorSchema(e,t,r){const{fields:o,geometryType:i,orderBy:s,objectIdField:l,renderer:n,labelingInfo:p,labelsVisible:d}=this.layer,u={featureReduction:null,layerId:this.layer.id,fields:o.map((e=>e.toJSON())),geometryType:i,labelingInfo:p,labelsVisible:d,objectIdField:l,orderBy:s??"default",renderer:n?.clone()};return SimpleProcessorSchema_u(e,t,u,r)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.apiKey,()=>this.layer.customParameters,()=>this.layer.definitionExpression,()=>this.layer.outFields,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>this.layer.orderBy]}setGraphicOrigin(e){e.origin={type:"catalog",layer:this.layer}}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function featureServiceUtils_e(e){const{objectIdField:t,uniqueIdFields:r}=e;return r?.length?r.length>=2?{type:"unique-id-composite",fieldNames:r}:{type:"unique-id-simple",fieldName:r[0]}:{type:"object-id",fieldName:t}}function featureServiceUtils_t(e,t,s,a,l,u){const m=featureServiceUtils_o(a);if(!(!!(0,has/* default */.A)("featurelayer-snapshot-enabled")&&s?.query.supportsPagination&&!s?.operations.supportsEditing&&!t))return null;const h=featureServiceUtils_i(l,u),{min:p,max:c}=m,y=h?c:p,d=featureServiceUtils_n(a);let f=(0,has/* default */.A)("featurelayer-snapshot-initial-tolerance");return"esriGeometryPoint"!==a&&"esriGeometryMultipoint"!==a||(f=null),{supportsExceedsLimit:featureServiceUtils_r(e,s),initialTolerance:f,maxFeatureCount:y,maxVertexCount:d}}function featureServiceUtils_r(e,t){return!(!e&&!(0,has/* default */.A)("featurelayer-snapshot-non-hosted-exceedslimit-enabled"))&&t?.operations.supportsExceedsLimitStatistics}function featureServiceUtils_n(e){switch(e){case"esriGeometryPoint":return null;case"esriGeometryPolyline":case"esriGeometryPolygon":case"esriGeometryMultiPatch":case"esriGeometryMultipoint":return (0,has/* default */.A)("featurelayer-snapshot-max-vertex-count")}}function featureServiceUtils_i(e,t){const r=t?.clone().intersection(e),n=null!=r?r.width*r.height:0,i=t?t.width*t.height:0,o=0===i?0:n/i,s=(0,has/* default */.A)("featurelayer-snapshot-coverage");return!isNaN(o)&&o>=s}function featureServiceUtils_o(e){switch(e){case"esriGeometryMultipoint":return{min:(0,has/* default */.A)("featurelayer-snapshot-multipoint-min-threshold"),max:(0,has/* default */.A)("featurelayer-snapshot-multipoint-max-threshold")};case"esriGeometryPoint":return{min:(0,has/* default */.A)("featurelayer-snapshot-point-min-threshold"),max:(0,has/* default */.A)("featurelayer-snapshot-point-max-threshold")};case"esriGeometryMultiPatch":case"esriGeometryPolygon":return{min:(0,has/* default */.A)("featurelayer-snapshot-polygon-min-threshold"),max:(0,has/* default */.A)("featurelayer-snapshot-polygon-max-threshold")};case"esriGeometryPolyline":return{min:(0,has/* default */.A)("featurelayer-snapshot-polyline-min-threshold"),max:(0,has/* default */.A)("featurelayer-snapshot-polyline-max-threshold")}}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function floorFilterUtils_o(e,l){return null!=e.floorInfo&&(e.floorInfo.viewAllLevelIds.length>0||l.floors.length>0)}function floorFilterUtils_r(e,o,r){const t=floorFilterUtils_n(e,o?.where,r);return t?(o??=new FeatureFilter/* default */.A,o.where=t,o):o}function floorFilterUtils_n(l,o,r){if(null==l.floorInfo||!r.floors?.length)return o;let n=r.floors;const{floorField:t,viewAllLevelIds:f}=l.floorInfo;f.length&&(n=f);const s=n.filter((e=>""!==e)).map((e=>"'"+e+"'"));if(s.push("''"),o?.includes(t)){let e=new RegExp("AND \\("+t+".*NULL\\)","g");o=o.replace(e,""),e=new RegExp("\\("+t+".*NULL\\)","g"),o=(o=o.replace(e,"")).replaceAll(/\s+/g," ").trim()}let i="("+t+" IN ({ids}) OR "+t+" IS NULL)";return i=i.replace("{ids}",s.join(", ")),(0,sql/* sqlAnd */.mA)(o,i)}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/FeatureLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class FeatureLayerAdapter_m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,i=labelingUtils_r(t,e)??labelingUtils_l(t),s=(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(t,e),o=[...t.labelingInfo||[],...s?.labelingInfo||[]];return[{vvEvaluators:{0:labelingUtils_o(t.renderer)},deconflictionEnabled:i,labelingInfo:o}]}async createServiceOptions(r){const o=this.layer,{capabilities:a,editingInfo:n,typeIdField:p,globalIdField:d,datesInUnknownTimezone:y,dateFieldsTimeZone:u,orderBy:c,subtypeField:m,refreshInterval:f}=o,h=o.fieldsIndex.toJSON(),b=geometryUtils_e(o),I=o.timeInfo?.toJSON(),g=o.spatialReference.toJSON(),F=o.types?.map((e=>e.toJSON())),S=(0,lang/* clone */.o8)(this.layer.parsedUrl);this.layer.dynamicDataSource&&(S.query={layer:JSON.stringify({source:this.layer.dynamicDataSource})});let x=this.layer.objectIdField;if(c?.length){const e=!c[0].valueExpression&&c[0].field;e&&(x=e)}const R=(0,arcgisLayerUrl/* isHostedAgolService */.Wo)(S.path),j=featureServiceUtils_t(R,!(null!=n?.lastEditDate)&&f>0,a,b,r.extent,o.fullExtent),E=r.spatialReference.toJSON();return{type:"feature-service",source:S,isSourceHosted:R,orderByFields:x,outSpatialReference:E,metadata:{typeIdField:p??void 0,types:F,timeReferenceUnknownClient:y,dateFieldsTimeZone:u,subtypeField:m,globalIdField:d,fieldsIndex:h,geometryType:b,featureIdInfo:featureServiceUtils_e(o),timeInfo:I,spatialReference:g,outSpatialReference:E,subtypes:this.layer.subtypes?.map((e=>e.toJSON()))},queryMetadata:{maxRecordCount:a.query.maxRecordCount,supportsCompactGeometry:a.query.supportsCompactGeometry,supportsDefaultSpatialReference:a.query.supportsDefaultSpatialReference,supportsFormatPBF:a.query.supportsFormatPBF,supportsMaxRecordCountFactor:a.query.supportsMaxRecordCountFactor,supportsQuantization:a.query.supportsQuantization,lastEditDate:n?.lastEditDate?.getTime(),snapshotInfo:j}}}createSourceSchema(e,t){const{apiKey:r,definitionExpression:i,displayFilterInfo:s,customParameters:o,gdbVersion:a,historicMoment:l,subtypeCode:n,subtypeField:p,timeExtent:d}=this.layer;return SourceSchema_t({definitionExpression:i,displayFilterInfo:s,customParameters:o,gdbVersion:a,historicMoment:l,subtypeCode:n,subtypeField:p,timeExtent:d},e,t,r)}createProcessorSchema(e,t,i){const{fields:s,renderer:o,geometryType:a,labelingInfo:l,labelsVisible:n,orderBy:p,objectIdField:d,trackInfo:y}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:o?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,t),geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:d,orderBy:p??"default",trackInfo:y};return SimpleProcessorSchema_u(e,t,c,i)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}addFilters(e,t){return floorFilterUtils_r(this.layer,e,t)}getUpdateHashProperties(e){return[()=>this.layer.apiKey,()=>this.layer.customParameters,()=>this.layer.definitionExpression,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>floorFilterUtils_o(this.layer,e)?e.floors:null,()=>this.layer.gdbVersion,()=>this.layer.historicMoment,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>this.layer.orderBy,()=>this.layer.outFields,()=>this.layer.renderer,()=>this.layer.subtypeCode,()=>this.layer.trackInfo]}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/InMemoryLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function InMemoryLayerAdapter_u(t){if(!("openPorts"in t))throw new core_Error/* default */.A("featurelayer:source-not-supported","source is not supported")}class InMemoryLayerAdapter_p{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,l=labelingUtils_r(r,e)??labelingUtils_l(r),s=(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(r,e),a=[...r.labelingInfo||[],...s?.labelingInfo||[]];return[{vvEvaluators:{0:labelingUtils_o(r.renderer)},deconflictionEnabled:l,labelingInfo:a}]}async createServiceOptions(e){const t=this.layer,{capabilities:o,objectIdField:i}=t,n=t.fieldsIndex.toJSON(),l=geometryUtils_e(t),s=t.timeInfo?.toJSON(),a=t.spatialReference.toJSON();InMemoryLayerAdapter_u(t.source);const p=await t.source.openPorts(),d=i,c=e.spatialReference.toJSON();return{type:"memory",source:p,orderByFields:d,outSpatialReference:c,metadata:{fieldsIndex:n,geometryType:l,featureIdInfo:{type:"object-id",fieldName:t.objectIdField},timeInfo:s,spatialReference:a,outSpatialReference:c,subtypes:null,subtypeField:null,globalIdField:null,typeIdField:null,types:null,timeReferenceUnknownClient:"datesInUnknownTimezone"in t?t.datesInUnknownTimezone:null,dateFieldsTimeZone:"dateFieldsTimeZone"in t?t.dateFieldsTimeZone:null},queryMetadata:{maxRecordCount:o.query.maxRecordCount,supportsCompactGeometry:o.query.supportsCompactGeometry,supportsDefaultSpatialReference:o.query.supportsDefaultSpatialReference,supportsFormatPBF:o.query.supportsFormatPBF,supportsMaxRecordCountFactor:o.query.supportsMaxRecordCountFactor,supportsQuantization:o.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,t){const{definitionExpression:r,timeExtent:o,displayFilterInfo:i}=this.layer;return SourceSchema_t({customParameters:null,definitionExpression:r,displayFilterInfo:i,timeExtent:o},e,t,null)}createProcessorSchema(e,r,o){const{fields:i,renderer:n,geometryType:l,labelingInfo:a,labelsVisible:u,orderBy:p,objectIdField:d}=this.layer,c="trackInfo"in this.layer?this.layer.trackInfo:null,y={fields:i.map((e=>e.toJSON())),renderer:n?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:l,labelingInfo:a,labelsVisible:u,objectIdField:d,orderBy:p??"default",trackInfo:c};return SimpleProcessorSchema_u(e,r,y,o)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.definitionExpression,()=>this.layer.displayFilterInfo,()=>this.layer.orderBy,()=>"outFields"in this.layer?this.layer.outFields:null,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>"trackInfo"in this.layer?this.layer.trackInfo:null]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/knowledgeGraph/constants.js
var constants = __webpack_require__(90670);
;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/KnowledgeGraphSublayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class KnowledgeGraphSublayerAdapter_c{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=labelingUtils_r(r,e)??labelingUtils_l(r);return[{vvEvaluators:{0:labelingUtils_o(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(e){const r=this.layer,{capabilities:t,objectIdField:o}=r,i=r.fieldsIndex.toJSON(),a=geometryUtils_e(r),l=r.spatialReference.toJSON(),n=await r.source.openPorts(),p=o,u=e.spatialReference.toJSON();return{type:"memory",source:n,orderByFields:p,outSpatialReference:u,metadata:{fieldsIndex:i,geometryType:a,featureIdInfo:{type:"object-id",fieldName:r.objectIdField},spatialReference:l,outSpatialReference:u,globalIdField:null,subtypeField:null,subtypes:null,timeInfo:r.timeInfo?.toJSON(),timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:t.query.maxRecordCount,supportsCompactGeometry:t.query.supportsCompactGeometry,supportsDefaultSpatialReference:t.query.supportsDefaultSpatialReference,supportsFormatPBF:t.query.supportsFormatPBF,supportsMaxRecordCountFactor:t.query.supportsMaxRecordCountFactor,supportsQuantization:t.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,r){const{definitionExpression:t,displayFilterInfo:o}=this.layer;return SourceSchema_t({definitionExpression:t,displayFilterInfo:o,customParameters:null},e,r,null)}createProcessorSchema(e,r,t){const{fields:s,renderer:i,geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u,orderBy:"default"};return SimpleProcessorSchema_u(e,r,c,t)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.definitionExpression,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>KnowledgeGraphSublayerAdapter_d(this.layer)]}hasFilters(e){return KnowledgeGraphSublayerAdapter_d(this.layer)}addFilters(o,s){if(KnowledgeGraphSublayerAdapter_d(this.layer)){const s=(0,sql/* sqlAnd */.mA)(o?.where,`${constants/* systemIsSpatialFieldName */.BL}=1`);if(!s)return o;o??=new FeatureFilter/* default */.A,o.where=s}return o}}function KnowledgeGraphSublayerAdapter_d(e){return"link-chart"===e.parentCompositeLayer.type&&"hidden"===e.parentCompositeLayer.linkChart?.linkChartProperties.nonspatialDataDisplay?.mode}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OGCFeatureLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OGCFeatureLayerAdapter_u{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=labelingUtils_r(t,e)??labelingUtils_l(t);return[{vvEvaluators:{0:labelingUtils_o(t.renderer)},deconflictionEnabled:r,labelingInfo:t.labelingInfo}]}async createServiceOptions(t){const o=this.layer,{capabilities:a}=o,s=o.fieldsIndex.toJSON(),l=geometryUtils_e(o),i=o.timeInfo?.toJSON(),n=o.spatialReference.toJSON(),u=o.source.getSource(),c=this.layer.objectIdField,p=(0,lang/* clone */.o8)(a);p.query.maxRecordCount=u.maxRecordCount;const d=t.spatialReference.toJSON();return{type:"ogc",source:u,orderByFields:c,outSpatialReference:d,metadata:{fieldsIndex:s,geometryType:l,featureIdInfo:{type:"object-id",fieldName:o.objectIdField},timeInfo:i,spatialReference:n,outSpatialReference:d,globalIdField:null,subtypeField:null,subtypes:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:p.query.maxRecordCount,supportsCompactGeometry:p.query.supportsCompactGeometry,supportsDefaultSpatialReference:p.query.supportsDefaultSpatialReference,supportsFormatPBF:p.query.supportsFormatPBF,supportsMaxRecordCountFactor:p.query.supportsMaxRecordCountFactor,supportsQuantization:p.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,t){const{customParameters:r,timeExtent:o,apiKey:a}=this.layer;return SourceSchema_t({customParameters:r,timeExtent:o},e,t,a)}createProcessorSchema(e,r,o){const{fields:a,renderer:s,geometryType:l,labelingInfo:n,labelsVisible:u,orderBy:c,objectIdField:p}=this.layer,d={fields:a.map((e=>e.toJSON())),renderer:s?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:l,labelingInfo:n,labelsVisible:u,objectIdField:p,orderBy:c??"default"};return SimpleProcessorSchema_u(e,r,d,o)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.apiKey,()=>this.layer.customParameters,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>this.layer.orderBy,()=>this.layer.renderer]}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OrientedImageryLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class OrientedImageryLayerAdapter_m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=labelingUtils_r(r,e)??labelingUtils_l(r);return[{vvEvaluators:{0:labelingUtils_o(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(t){const s=this.layer,{capabilities:i,globalIdField:a,orderBy:n,refreshInterval:p}=s,u=s.fieldsIndex.toJSON(),d=geometryUtils_e(s),c=s.timeInfo?.toJSON(),m=s.spatialReference.toJSON(),y=(0,lang/* clone */.o8)(this.layer.parsedUrl);let f=this.layer.objectIdField;if(n?.length){const e=!n[0].valueExpression&&n[0].field;e&&(f=e)}const h=p>0,I=(0,arcgisLayerUrl/* isHostedAgolService */.Wo)(y.path),b=t.spatialReference.toJSON(),F=featureServiceUtils_t(I,h,i,d,t.extent,s.fullExtent);return{type:"feature-service",source:y,isSourceHosted:I,orderByFields:f,outSpatialReference:b,metadata:{globalIdField:a,fieldsIndex:u,geometryType:d,featureIdInfo:{type:"object-id",fieldName:s.objectIdField},timeInfo:c,spatialReference:m,outSpatialReference:b,timeReferenceUnknownClient:s.datesInUnknownTimezone,dateFieldsTimeZone:s.dateFieldsTimeZone,subtypeField:null,subtypes:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:null,snapshotInfo:F}}}createSourceSchema(e,r){const{definitionExpression:t,displayFilterInfo:o,customParameters:s,timeExtent:i}=this.layer;return SourceSchema_t({definitionExpression:t,displayFilterInfo:o,customParameters:s,timeExtent:i},e,r,null)}createProcessorSchema(e,r,o){const{fields:s,renderer:i,geometryType:l,labelingInfo:a,labelsVisible:n,orderBy:p,objectIdField:u}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:l,labelingInfo:a,labelsVisible:n,objectIdField:u,orderBy:p??"default"};return SimpleProcessorSchema_u(e,r,c,o)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}addFilters(e,r){return floorFilterUtils_r(this.layer,e,r)}getUpdateHashProperties(e){return[()=>this.layer.outFields,()=>this.layer.orderBy,()=>this.layer.definitionExpression,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>this.layer.customParameters,()=>floorFilterUtils_o(this.layer,e)?e.floors:null]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/jsonMap.js
var jsonMap = __webpack_require__(59851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/Field.js
var Field = __webpack_require__(24738);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/locationUtils.js
var locationUtils = __webpack_require__(67262);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
;// ../node_modules/@arcgis/core/layers/support/ParquetEncodingLocation.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ParquetEncodingLocation_s=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="location",this.latitudeFieldName=null,this.longitudeFieldName=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:["location"],readOnly:!0,json:{write:!0}})],ParquetEncodingLocation_s.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0}})],ParquetEncodingLocation_s.prototype,"latitudeFieldName",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0}})],ParquetEncodingLocation_s.prototype,"longitudeFieldName",void 0),ParquetEncodingLocation_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.layers.support.ParquetEncodingLocation")],ParquetEncodingLocation_s);const ParquetEncodingLocation_i=(/* unused pure expression or super */ null && (ParquetEncodingLocation_s));

;// ../node_modules/@arcgis/core/layers/support/ParquetEncodingWkb.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let ParquetEncodingWkb_s=class extends JSONSupport/* default */.A{constructor(o){super(o),this.type="wkb",this.primaryFieldName=null}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:["wkb"],readOnly:!0,json:{write:!0}})],ParquetEncodingWkb_s.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0}})],ParquetEncodingWkb_s.prototype,"multiscale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0}})],ParquetEncodingWkb_s.prototype,"orientation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0}})],ParquetEncodingWkb_s.prototype,"primaryFieldName",void 0),ParquetEncodingWkb_s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.layers.support.ParquetEncodingWkb")],ParquetEncodingWkb_s);const ParquetEncodingWkb_p=(/* unused pure expression or super */ null && (ParquetEncodingWkb_s));

// EXTERNAL MODULE: ../node_modules/@arcgis/core/libs/parquet/parquet.js + 1 modules
var parquet = __webpack_require__(63952);
;// ../node_modules/@arcgis/core/layers/support/parquetUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const parquetUtils_u=new jsonMap/* JSONMap */.J({esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint"});function parquetUtils_m(e){return parquetUtils_u.toJSON(e)}function parquetUtils_c(t,n={}){return parquetUtils_p({urls:new e(t)},n)}async function parquetUtils_p(e,n={}){if(e.geometryType&&e.spatialReference&&e.encoding&&e.fields)return e;if(e.urls.length<1)throw new t("parquet:bad-input","At least one url must be specified",e);const i=e.metadata??await s.create(e.urls.getItemAt(0),(()=>n.customParameters)),a=i.tryReadGeoMetadata(),l={...e,metadata:i};if(null==l.fields&&(l.fields=i.fields.map((e=>r.fromJSON(e)))),null==l.encoding&&(l.encoding=parquetUtils_d(i,a)),!l.encoding)return l;switch(l.encoding.type){case"location":null==l.spatialReference&&(l.spatialReference=o.WGS84),null==l.geometryType&&(l.geometryType="point");break;case"wkb":{if(!a)return l;const e=a.primary_column,t=a.columns[e];l.geometryType||(l.geometryType=parquetUtils_y(t)),l.spatialReference||(l.spatialReference=parquetUtils_g(t))}}return l}function parquetUtils_d(e,t){if(null!=t){const n=t.primary_column,o=t.columns[n],r=e.tryReadEsriMetadata();return new l({primaryFieldName:n,orientation:o.orientation??null,multiscale:r?.multiscale})}const n=i(e.fields.map((e=>e.name)));return new a({latitudeFieldName:n.latitudeFieldName,longitudeFieldName:n.longitudeFieldName})}function parquetUtils_f(e){switch(e){case"Point":return"point";case"Polygon":case"MultiPolygon":return"polygon";case"LineString":return"polyline";case"MultiPoint":return"multipoint";default:return null}}function parquetUtils_y(e){const{geometry_types:n}=e,o=new Set;for(const t of n){const e=parquetUtils_f(t);e&&o.add(e)}if(o.size>1)throw new t("unsupported","Parquet mixed geometry types are not support",{geometryTypes:o});return 1===o.size?o.values().next().value:void 0}function parquetUtils_g(e){const t=e.crs?.id?.code;return t&&"number"==typeof t?new o({wkid:t}):void 0}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/ParquetLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class ParquetLayerAdapter_y{constructor(e){this.layer=e}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return null}getLabelingDeconflictionInfo(e){const r=this.layer,l=labelingUtils_r(r,e)??labelingUtils_l(r),o=(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(r,e),n=[...r.labelingInfo||[],...o?.labelingInfo||[]];return[{vvEvaluators:{0:labelingUtils_o(r.renderer)},deconflictionEnabled:l,labelingInfo:n}]}getUpdateHashProperties(e){return[()=>this.layer.outFields,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,e),()=>this.layer.customParameters,()=>this.layer.orderBy,()=>this.layer.renderer,()=>this.layer.popupTemplate]}async createServiceOptions(t){const a=geometryUtils_e(this.layer),i=t.spatialReference.toJSON(),s=this.layer.encoding;if(null==s)throw new core_Error/* default */.A("parquet-layer:unsupported","creating a parquet layer view requires an encoding",{layer:this.layer});return{type:"parquet",source:{urls:this.layer.urls.items},outSpatialReference:i,geometryInfo:{geometryType:parquetUtils_m(this.layer.geometryType),spatialReference:this.layer.spatialReference.toJSON(),encoding:s.toJSON()},metadata:{spatialReference:this.layer.spatialReference,outSpatialReference:i,fieldsIndex:this.layer.fieldsIndex.toJSON(),featureIdInfo:{type:"object-id",fieldName:this.layer.objectIdField},geometryType:a,types:null,subtypes:null,timeInfo:null,typeIdField:null,subtypeField:null,globalIdField:null,timeReferenceUnknownClient:null,dateFieldsTimeZone:null}}}createSourceSchema(e,r){return{type:"parquet",mutable:{sourceRefreshVersion:r,availableFields:e.availableFields.includes("*")?this.layer.fields.map((e=>e.name)):e.availableFields,dataFilter:{customParameters:this.layer.customParameters??null}}}}createProcessorSchema(e,r,l){const a={fields:this.layer.fields.map((e=>e.toJSON())),renderer:this.layer.renderer?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:this.layer.geometryType,labelingInfo:this.layer.labelingInfo,labelsVisible:this.layer.labelsVisible,objectIdField:this.layer.objectIdField,orderBy:this.layer.orderBy};return SimpleProcessorSchema_u(e,r,a,l)}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/StreamLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class StreamLayerAdapter_o{constructor(e){this.layer=e}getLabelingDeconflictionInfo(t){const n=this.layer,a=labelingUtils_r(n,t)??labelingUtils_l(n),o=(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(n,t),s=[...n.labelingInfo||[],...o?.labelingInfo||[]];return[{vvEvaluators:{0:labelingUtils_o(n.renderer)},deconflictionEnabled:a,labelingInfo:s}]}async createServiceOptions(e){const r=this.layer,i=geometryUtils_e(r),l=r.timeInfo?.toJSON()||null,n=r.spatialReference?r.spatialReference.toJSON():null,a=e.spatialReference.toJSON();return{type:"stream",source:this.layer.parsedUrl,outSpatialReference:a,metadata:{fieldsIndex:this.layer.fieldsIndex.toJSON(),geometryType:i,featureIdInfo:{type:"object-id",fieldName:this.layer.objectIdField},timeInfo:l,timeReferenceUnknownClient:null,dateFieldsTimeZone:null,spatialReference:n,outSpatialReference:a,subtypeField:null,subtypes:null,globalIdField:null,typeIdField:null,types:null}}}createSourceSchema(e,t){const{definitionExpression:r,geometryDefinition:i,customParameters:l}=this.layer;return{type:"stream",mutable:{sourceRefreshVersion:t,availableFields:e.availableFields,dataFilter:{geometryDefinition:i?.toJSON(),definitionExpression:r,customParameters:l??null,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,purgeOptions:this.layer.purgeOptions.toJSON()}}}}createProcessorSchema(t,r,i){const{fields:l,renderer:a,geometryType:o,labelingInfo:s,labelsVisible:c,objectIdField:d,trackInfo:m}=this.layer,f={fields:l.map((e=>e.toJSON())),renderer:a?.clone(),layerId:this.layer.id,featureReduction:(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,r),geometryType:o,labelingInfo:s,labelsVisible:c,objectIdField:d,orderBy:"default",trackInfo:m};return SimpleProcessorSchema_u(t,r,f,i)}get hasRequiredSupport(){return (0,rendererUtils/* isRendererSupported */.e)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(t){return[()=>this.layer.definitionExpression,()=>this.layer.renderer,()=>this.layer.labelsVisible?this.layer.labelingInfo:null,()=>(0,featureReductionUtils/* getEffectiveFeatureReduction */.n)(this.layer,t),()=>this.layer.customParameters,()=>this.layer.geometryDefinition,()=>this.layer.definitionExpression,()=>this.layer.trackInfo]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/capabilities.js
var capabilities = __webpack_require__(75228);
;// ../node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SubtypeProcessorSchema.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function SubtypeProcessorSchema_i(e,{subtypeField:t,sublayers:s}){const a=await Promise.all(s.map((({renderer:t})=>MatcherSchema_l(e,t))));return{type:"subtype",subtypeField:t,renderers:s.reduce(((e,{subtypeCode:r},t)=>({...e,[r]:a[t]})),{})}}function SubtypeProcessorSchema_n(e,r){const s=(0,capabilities/* getWebGLCapabilities */.C)();return{type:"multi",filters:e.filters,capabilities:{maxTextureSize:s.maxTextureSize},keyField:r.subtypeField,target:"feature",bindings:r.sublayers.reduce(((e,{renderer:r,subtypeCode:s})=>{const a=(0,StorageSchema/* createVVBindings */.Jz)(r);return{...e,[s]:a}}),{})}}async function SubtypeProcessorSchema_o(r,{subtypeField:t,sublayers:a,layerId:i}){const n=await Promise.all(a.map((t=>{const a=(0,VisualVariablesSchema/* createVisualVariableUniforms */.K4)(t.renderer),n={...t,geometryType:t.geometryType??null,layerId:i};return LabelMatcherSchema_o(r,n,a)})));return{type:"subtype",subtypeField:t,renderers:a.reduce(((e,{subtypeCode:r},t)=>({...e,[r]:n[t]})),{})}}async function SubtypeProcessorSchema_u(e,r,t,s){return{storage:SubtypeProcessorSchema_n(r,t),mesh:{properties:{timeZone:r.timeZone,displayRefreshVersion:s,returnMeshObjectId:!1,sortKey:null,currentUser:r.currentUser},strategy:{type:"feature"},factory:{symbology:await SubtypeProcessorSchema_i(e,t),labels:await SubtypeProcessorSchema_o(e,t)}},expressionProperties:{timeExtent:r.timeExtent?.toJSON()}}}

;// ../node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/SubtypeGroupLayerAdapter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class SubtypeGroupLayerAdapter_m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer;return[{vvEvaluators:{},deconflictionEnabled:t.sublayers.some((e=>labelingUtils_l(e))),labelingInfo:t.sublayers.toArray().filter((e=>!!e.labelingInfo)).flatMap((e=>e.labelingInfo))}]}async createServiceOptions(t){const r=this.layer,{capabilities:a,datesInUnknownTimezone:o,dateFieldsTimeZone:n,editingInfo:p,globalIdField:y,objectIdField:c,refreshInterval:m,subtypeField:d}=r,f=r.fieldsIndex.toJSON(),b=geometryUtils_e(r),h=r.timeInfo?.toJSON(),S=r.spatialReference.toJSON(),g=(0,lang/* clone */.o8)(this.layer.parsedUrl),F=c,I=!(null!=p?.lastEditDate)&&m>0,x=(0,arcgisLayerUrl/* isHostedAgolService */.Wo)(g.path),R=t.spatialReference.toJSON(),j=featureServiceUtils_t(x,I,a,b,t.extent,r.fullExtent);return{type:"feature-service",source:g,isSourceHosted:x,orderByFields:F,outSpatialReference:R,metadata:{timeReferenceUnknownClient:o,dateFieldsTimeZone:n,subtypeField:d,globalIdField:y,fieldsIndex:f,geometryType:b,featureIdInfo:featureServiceUtils_e(this.layer),timeInfo:h,spatialReference:S,outSpatialReference:R,subtypes:this.layer.subtypes?.map((e=>e.toJSON())),typeIdField:null,types:null},queryMetadata:{maxRecordCount:a.query.maxRecordCount,supportsCompactGeometry:a.query.supportsCompactGeometry,supportsDefaultSpatialReference:a.query.supportsDefaultSpatialReference,supportsFormatPBF:a.query.supportsFormatPBF,supportsMaxRecordCountFactor:a.query.supportsMaxRecordCountFactor,supportsQuantization:a.query.supportsQuantization,lastEditDate:p?.lastEditDate?.getTime(),snapshotInfo:j}}}createSourceSchema(e,t){const{definitionExpression:r,customParameters:s,gdbVersion:a,historicMoment:i,subtypeField:l,timeExtent:o,apiKey:n,displayFilterInfo:u}=this.layer,p={queryScaleRanges:this.layer.sublayers.items.map((e=>({subtypeCode:e.subtypeCode,minScale:e.minScale,maxScale:e.maxScale}))),definitionExpression:r,displayFilterInfo:u,customParameters:s,gdbVersion:a,historicMoment:i,subtypeField:l,timeExtent:o};return SourceSchema_t(p,e,t,n)}createProcessorSchema(e,t,r){const s={layerId:this.layer.id,subtypeField:this.layer.subtypeField,sublayers:Array.from(this.layer.sublayers,(e=>({featureReduction:null,geometryType:this.layer.geometryType,labelingInfo:e.labelingInfo,labelsVisible:e.labelsVisible,renderer:e.renderer,subtypeCode:e.subtypeCode,orderBy:null})))};return SubtypeProcessorSchema_u(e,t,s,r)}addFilters(e,t){e=floorFilterUtils_r(this.layer,e,t);const s=this.layer.sublayers.filter((e=>!SubtypeGroupLayerAdapter_d(e,t))).map((e=>e.subtypeCode));if(!s.length)return e;e??=new FeatureFilter/* default */.A;const i=`NOT ${this.layer.subtypeField} IN (${s.join(",")})`;return e.where=(0,sql/* sqlAnd */.mA)(e.where,i),e}get hasRequiredSupport(){return!0}get timeOptions(){return this.layer}getUpdateHashProperties(e){return[()=>this.layer.apiKey,()=>this.layer.customParameters,()=>this.layer.definitionExpression,()=>floorFilterUtils_o(this.layer,e)?e.floors:null,()=>this.layer.outFields,()=>this.layer.gdbVersion,()=>this.layer.historicMoment,()=>this.layer.sublayers.map((({renderer:e,labelsVisible:t,labelingInfo:r,visible:s,minScale:a,maxScale:i})=>({renderer:e,labelsVisible:t,labelingInfo:r,visible:s,minScale:a,maxScale:i})))]}setGraphicOrigin(e){const t=this.layer.fieldsIndex.get(this.layer.subtypeField),r=e.attributes[t.name],s=this.layer.sublayers.find((e=>e.subtypeCode===r));e.layer=e.sourceLayer=s}}function SubtypeGroupLayerAdapter_d(e,r){return e.visible&&(0===e.minScale||(0,mathUtils/* floatEqualAbsolute */.Sp)(r.scale,e.minScale)||r.scale<e.minScale)&&(0===e.maxScale||(0,mathUtils/* floatEqualAbsolute */.Sp)(r.scale,e.maxScale)||r.scale>e.maxScale)}

;// ../node_modules/@arcgis/core/views/2d/layers/support/DebouncedFeatureOverride.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class DebouncedFeatureOverride_e{constructor(){this._commands=new Map,this._historicMoment=null}add(e){switch(e.type){case"override":return this._addOverride(e);case"override-by-id":return this._addOverrideById(e)}}toMessage(){const e={historicMoment:this._historicMoment,commands:{updateByIdWeak:[],updateWeak:[],removeWeak:[],update:[],remove:[],release:[]}};for(const[s,r]of this._commands.entries())switch(r.type){case"override-update-by-id":e.commands.updateByIdWeak.push(s);break;case"override-update":r.isWeak?e.commands.updateWeak.push(r.feature):e.commands.update.push(r.feature);break;case"override-remove":r.isWeak?e.commands.removeWeak.push(s):e.commands.remove.push(s);break;case"override-release":e.commands.release.push(s)}return e}_addOverrideById(e){this._historicMoment=e.historicMoment;for(const s of e.updates)this._commands.set(s,{type:"override-update-by-id",isWeak:e.isWeak});for(const s of e.removed)this._commands.set(s,{type:"override-remove",isWeak:e.isWeak})}_addOverride(e){this._historicMoment=e.historicMoment;for(const s of e.updates)this._commands.set(s.objectId,{type:"override-update",feature:s,isWeak:e.isWeak});for(const s of e.removed)this._commands.set(s,{type:"override-remove",isWeak:e.isWeak});for(const s of e.release)this._commands.set(s,{type:"override-release"})}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js
var FeatureCommandQueue = __webpack_require__(46934);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/handleNoEngineError.js
var handleNoEngineError = __webpack_require__(7267);
;// ../node_modules/@arcgis/core/views/2d/tiling/FeatureTileSubscriptionManager.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function FeatureTileSubscriptionManager_e(s,e){const i=new Set;for(const t of s instanceof Set?s.values():s.keys())e.has(t)||i.add(t);return i}class FeatureTileSubscriptionManager_i{constructor(s,e,i){const t=i?s.getTileCoverage(i,0,!0,"closest"):null,n=s.getTileCoverage(e,0,!0,"closest");if(this._tileKeys=new Map,t)for(const o of t.keys())this._tileKeys.set(o.id,o);if(n)for(const o of n.keys())this._tileKeys.set(o.id,o)}get coverageSet(){return new Set(this._tileKeys.keys())}keys(){return this._tileKeys.values()}}class FeatureTileSubscriptionManager_t{constructor(s){this.version=s}}class FeatureTileSubscriptionManager_n{constructor(s){this._subscriptions=new Map,this._visible=new Set,this._paused=new Set,this._version=0,this._config=s}destroy(){}get coverageSet(){return this._coverage?.coverageSet??new Set}get subscriptions(){return new Set(this._subscriptions.keys())}suspend(){this._suspendedOverage=this._coverage,this._coverage=null,this._updateSubscriptions()}resume(){null==this._coverage&&(this._coverage=this._suspendedOverage,this._suspendedOverage=null,this._updateSubscriptions())}update(s,e){return this._version=(this._version+1)%Number.MAX_SAFE_INTEGER,this._updateCoverage(s,e),this._updateSubscriptions(),new Set(this._visible)}updateVisibility(){const s=this._updateVisibility();return this._visible=s,this._visible}_updateCoverage(s,e){this._coverage=new FeatureTileSubscriptionManager_i(this._config.tileInfoView,s,e)}_updateSubscriptions(){const s=this.coverageSet,i=this._updateVisibility(),n=FeatureTileSubscriptionManager_e(i,s),o=FeatureTileSubscriptionManager_e(this._subscriptions,i),r=FeatureTileSubscriptionManager_e(s,this._subscriptions),a=FeatureTileSubscriptionManager_e(o,s),u=FeatureTileSubscriptionManager_e(n,a),c=FeatureTileSubscriptionManager_e(u,this._paused);this._visible=i;for(const e of r.values())this._subscriptions.set(e,new FeatureTileSubscriptionManager_t(this._version));for(const e of c.values())this._paused.add(e);for(const e of a.values())this._subscriptions.delete(e),this._paused.delete(e);(r.size||a.size||c.size)&&this._sendUpdateSubscriptions(r,a,c)}_sendUpdateSubscriptions(s,e,i){const t=Array.from(s.values()).map((s=>({tileId:s,version:this._subscriptions.get(s).version})));this._config.updateSubscriptions({subscribe:t,unsubscribe:Array.from(e.values()),pause:Array.from(i.values())})}_updateVisibility(){const s=new Set,e=new Set;if(!this._coverage)return s;for(const i of this._coverage.keys()){if(this._config.isDone(i)){s.add(i.id);continue}if(this._addVisibleParent(s,e,i))continue;this._addVisibleChildren(s,i)||s.add(i.id)}return s}_addVisibleParent(e,i,t){let n=!1;for(const o of this._visible.values()){new TileKey/* default */.A(o).containsChild(t)&&(e.add(o),i.add(o),n=!0)}return n}_addVisibleChildren(e,i){let t=!1;for(const n of this._visible.values()){const o=new TileKey/* default */.A(n);i.containsChild(o)&&(e.add(n),t=!0)}return t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/FeatureIdInfo.js
var FeatureIdInfo = __webpack_require__(12244);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/displayFilterUtils.js
var displayFilterUtils = __webpack_require__(6117);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/FeatureEffect.js
var FeatureEffect = __webpack_require__(76137);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/featurePopupQueryUtils.js
var featurePopupQueryUtils = __webpack_require__(74677);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/floorFilterUtils.js
var floorFilterUtils = __webpack_require__(58921);
;// ../node_modules/@arcgis/core/networks/support/networkFieldUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function networkFieldUtils_e(e){const t=e?.fieldsIndex,o="fromnetworksourceid",n="fromglobalid",r="fromterminalid",i="tonetworksourceid",a="toglobalid",l="toterminalid",s="status",m="associationtype",d="iscontentvisible",g="percentalong",u="globalid";return{fromNetworkSourceId:t?.get(o)?.name??o,fromGlobalId:t?.get(n)?.name??n,fromTerminalId:t?.get(r)?.name??r,toNetworkSourceId:t?.get(i)?.name??i,toGlobalId:t?.get(a)?.name??a,toTerminalId:t?.get(l)?.name??l,status:t?.get(s)?.name??s,associationType:t?.get(m)?.name??m,isContentVisible:t?.get(d)?.name??d,percentAlong:t?.get(g)?.name??g,globalId:t?.get(e?.globalIdField??u)?.name??u}}function networkFieldUtils_t(e,t){if("feature"!==t.type&&"subtype-group"!==t.type)return[];if(!t.url)return[];const o="utilityNetworks"in e.map?e.map.utilityNetworks??[]:[];for(const n of o)if(n.isUtilityLayer(t)){const e=t.fieldsIndex.get("assetgroup"),o=t.fieldsIndex.get("assettype");return[e?.name,o?.name].filter((e=>null!=e))}return[]}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/support/popupUtils.js
var popupUtils = __webpack_require__(18846);
;// ../node_modules/@arcgis/core/views/layers/support/WhereClauseVisitor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class WhereClauseVisitor_s{constructor(i){this._fieldsIndex=i,this._clauses=[]}async finish(){return{requiresCurrentUser:(await Promise.all(this._clauses)).some((i=>i.currentUserRequired))}}visitClientWhereClause(s){s&&this._clauses.push((0,sql/* parseWhereClause */.GP)(s,this._fieldsIndex))}visitFeatureReduction(i){if(i)switch(i.type){case"binning":case"cluster":this.visitLabelingInfo(i.labelsVisible,i.labelingInfo)}}visitLabelingInfo(i,s){if(i&&null!=s)for(const e of s)this.visitClientWhereClause(e.where)}visitDisplayFilter(i,s){if(i)for(const e of s?.filters??[])this.visitClientWhereClause(e.where)}visitFilter(i){this.visitClientWhereClause(i?.where)}visitTrackInfo(i){null!=i&&(this.visitLabelingInfo(i?.latestObservations.labelsVisible,i?.latestObservations.labelingInfo),this.visitLabelingInfo(i?.previousObservations.labelsVisible,i?.previousObservations.labelingInfo),this.visitLabelingInfo(i?.trackLines.labelsVisible,i?.trackLines.labelingInfo))}}

;// ../node_modules/@arcgis/core/views/layers/FeatureLayerView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const S=S=>{let N=class extends S{constructor(...e){super(...e),this._updatingRequiredPromise=null,this.filter=null,this.layer=null,this.requiresCurrentUser=!1,this.requiredFields=[],this.view=null}initialize(){this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>{const e=this.layer,t=this.view;return[e&&"elevationInfo"in e?e.elevationInfo?.featureExpressionInfo:null,e&&"displayField"in e?e.displayField:null,e&&"timeInfo"in e&&e.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,t?.requiredFieldsOptions?.featureTitleFields&&e&&"featureTitleFields"in e&&e.featureTitleFields,t?.requiredFieldsOptions?.utilityNetworkFields&&networkFieldUtils_t(t,e),e.displayFilterInfo,this.displayFilterEnabled,this.filter,this.featureEffect,this.timeExtent,"knowledge-graph-sublayer"===e?.type&&"link-chart"===e.parentCompositeLayer.type&&e.parentCompositeLayer.linkChart?.linkChartProperties.nonspatialDataDisplay?.mode,"parquet"===e?.type&&e.popupTemplate]}),(()=>this._handleChange()),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils.on)((()=>this.view?.floors),"change",(()=>this._handleChange())),(0,reactiveUtils.on)((()=>this.layer.displayFilterInfo?.filters),"change",(()=>this._handleChange())),(0,reactiveUtils.on)((()=>this.layer&&"sublayers"in this.layer?this.layer.sublayers:null),"change",(()=>this._handleChange()))])}get availableFields(){if(!this.layer)return[];const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return"outFields"in e&&e.outFields?(0,fieldUtils/* fixFields */.DB)(t,[...(0,fieldUtils/* unpackFieldNames */.hL)(t,e.outFields),...r]):(0,fieldUtils/* fixFields */.DB)(t,r)}get displayFilterEnabled(){return(this.view?.displayFilterEnabled??!0)&&(!("displayFilterEnabled"in this.layer)||(this.layer?.displayFilterEnabled??!0))}get effectiveDisplayFilter(){const e=this.layer;return this.displayFilterEnabled&&e.displayFilterInfo?(0,displayFilterUtils/* getEffectiveDisplayFilter */.u2)(e.displayFilterInfo,this.view):null}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override("featureEffect",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){Logger/* default */.A.getLogger(this).error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}get signedInUser(){return this.layer?.url?(0,featureLayerUtils/* getSignedInUser */.fE)(this.layer.url):Promise.resolve(null)}highlight(e,t){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=null!=this.filter?this.filter.createQuery(e):new Query/* default */.A(e);return"floorInfo"in this.layer&&this.layer.floorInfo&&(t.where=(0,sql/* sqlAnd */.mA)(t.where,(0,floorFilterUtils/* getFloorFilterClause */.E)(this))),this.displayFilterEnabled&&(t.where=(0,sql/* sqlAnd */.mA)(t.where,this.effectiveDisplayFilter?.where)),null!=this.timeExtent&&(t.timeExtent=null!=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}createAggregateQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new Query/* default */.A(e)}queryFeatures(e,t){throw new Error("missing implementation")}queryObjectIds(e,t){throw new Error("missing implementation")}queryFeatureCount(e,t){throw new Error("missing implementation")}queryExtent(e,t){throw new Error("missing implementation")}async fetchPopupFeaturesFromGraphics(e,t){const r=await this._createPopupQuery(e.map((e=>e.origin?.layer??e.layer)),t);return await (0,featurePopupQueryUtils/* fetchFeaturePopupFeatures */.A)(this.layer,e,r,{getPopupTemplate:e=>e&&"popupEnabled"in e&&e.popupEnabled?(0,popupUtils/* getFetchPopupTemplate */.D8)(e,t):null,hasRequiredFields:(e,t)=>this._popupFeatureHasRequiredFields(e,t),...t})}_handleChange(){const e=Promise.all([this._updateRequiredFields(),this._updateClientWhereClauseRequirements()]).then((()=>{}));return this._set("_updatingRequiredPromise",e),e.then((()=>{this._updatingRequiredPromise===e&&this._set("_updatingRequiredPromise",null)})),e}async _updateClientWhereClauseRequirements(){if(!this.layer||!this.view)return;const{layer:e}=this,r=new WhereClauseVisitor_s(e.fieldsIndex);if(r.visitFilter(this.filter),"featureReduction"in e&&r.visitFeatureReduction(e.featureReduction),"labelingInfo"in e&&r.visitLabelingInfo(e.labelsVisible,e.labelingInfo),"trackInfo"in e&&r.visitTrackInfo(e.trackInfo),"2d"===this.view.type&&(r.visitFilter(this.featureEffect?.filter),r.visitDisplayFilter(this.displayFilterEnabled,e.displayFilterInfo),"featureReduction"in e&&r.visitFeatureReduction(e.featureReduction)),"subtype-group"===e.type)for(const t of e.sublayers)r.visitLabelingInfo(t.labelsVisible,t.labelingInfo);try{const e=await r.finish();this._set("requiresCurrentUser",e.requiresCurrentUser)}catch(i){Logger/* default */.A.getLogger(this).error(i)}}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e="3d"===this.view.type,{layer:r,layer:{fieldsIndex:i}}=this,l="renderer"in r&&r.renderer,s="orderBy"in r&&r.orderBy,o="featureReduction"in r?r.featureReduction:null,n=new Set,a=[l?l.collectRequiredFields(n,i):null,(0,fieldUtils/* collectLabelingFields */.Im)(n,r),e&&"elevationInfo"in r?(0,fieldUtils/* collectElevationFields */.NO)(n,r):null,null!=this.filter?(0,fieldUtils/* collectFilterFields */.o)(n,r,this.filter):null,e||null==this.featureEffect?null:(0,fieldUtils/* collectFilterFields */.o)(n,r,this.featureEffect.filter),!e&&o?(0,fieldUtils/* collectFeatureReductionFields */.RP)(n,r,o):null,!e&&s?(0,fieldUtils/* collectOrderByInfos */.f)(n,r,s):null];if("timeInfo"in r&&r.timeInfo&&this.timeExtent&&(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.timeInfo.startField,r.timeInfo.endField]),"timeInfo"in r&&r.timeInfo&&"trackInfo"in r&&r.trackInfo){const{trackInfo:e}=r;(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.timeInfo.trackIdField]),"feature"!==r.type&&"startTimeField"!==e.timeField||(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.timeInfo.startField]),"endTimeField"===e.timeField&&(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.timeInfo.endField]),await (0,fieldUtils/* collectTrackInfoFields */.d)(n,r)}if("floorInfo"in r&&r.floorInfo&&(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.floorInfo.floorField]),"featureTitleFields"in r&&this.view?.requiredFieldsOptions?.featureTitleFields&&r.featureTitleFields&&(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,r.featureTitleFields),"feature"===r.type&&r.globalIdField&&this.view?.requiredFieldsOptions?.globalIdField&&(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.globalIdField]),this.displayFilterEnabled&&a.push((0,fieldUtils/* collectDisplayFilterFields */.A6)(n,r,r.displayFilterInfo)),"feature"===r.type&&e&&null!=r.infoFor3D&&(null==r.globalIdField&&Logger/* default */.A.getLogger(this).error("globalIdField missing on 3DObjectFeatureLayer"),(0,fieldUtils/* collectFields */._w)(n,r.fieldsIndex,[r.globalIdField])),"subtype-group"===r.type){(0,fieldUtils/* collectField */.rq)(n,i,r.subtypeField);const e=r.sublayers.map((e=>Promise.all([e.renderer?.collectRequiredFields(n,i),(0,fieldUtils/* collectLabelingFields */.Im)(n,e)])));a.push(Promise.all(e))}if("catalog-footprint"===r.type&&r.parent){const e=r.parent;(0,fieldUtils/* collectFields */._w)(n,i,[e.itemNameField,e.itemSourceField,e.itemTypeField,e.maxScaleField,e.minScaleField])}"knowledge-graph-sublayer"===r.type&&"link-chart"===r.parentCompositeLayer.type&&(0,fieldUtils/* collectField */.rq)(n,i,constants/* systemIsSpatialFieldName */.BL),"parquet"===r.type&&a.push((0,popupUtils/* getRequiredFields */.TO)(r,r.popupTemplate).then((e=>{for(const t of e)n.add(t)})));const p=await Promise.allSettled(a);if(e)(0,fieldUtils/* collectField */.rq)(n,i,r.objectIdField);else for(const t of (0,FeatureIdInfo/* getFeatureIdInfoFieldNames */.Y)(featureServiceUtils_e(r)))(0,fieldUtils/* collectField */.rq)(n,i,t);e&&"displayField"in r&&r.displayField&&(0,fieldUtils/* collectField */.rq)(n,i,r.displayField);for(const u of p)"rejected"===u.status&&Logger/* default */.A.getLogger(this).error(u.reason);const f=Array.from(n).sort();this._set("requiredFields",f)}_popupFeatureHasRequiredFields(e,t){return (0,fieldUtils/* featureHasFields */.Kl)(e,t)}async _createPopupQuery(e,t){const i=this.layer.createQuery(),l=new Set;let s=!1;const n=e??[this.layer];for(const o of n){if(!("popupEnabled"in o))continue;const e=(0,popupUtils/* getFetchPopupTemplate */.D8)(o,t);if(null==e)continue;const i=await (0,featurePopupQueryUtils/* loadFeaturePopupArcadeModules */.Y)(e);(0,promiseUtils/* throwIfAborted */.Te)(t);const n=i&&i.arcadeUtils.hasGeometryOperations(e);s=!("point"!==this.layer.geometryType&&!n);const a=await (0,popupUtils/* getRequiredFields */.TO)(this.layer,e);(0,promiseUtils/* throwIfAborted */.Te)(t);for(const t of a)l.add(t)}return i.returnGeometry=s,i.returnZ=s,i.returnM=s,i.outFields=Array.from(l),i.outSpatialReference=this.view.spatialReference,"floorInfo"in this.layer&&this.layer.floorInfo&&(i.where=(0,sql/* sqlAnd */.mA)(i.where,(0,floorFilterUtils/* getFloorFilterClause */.E)(this))),i}canResume(){return!!super.canResume()&&(null==this.timeExtent||!this.timeExtent.isEmpty)}getTest(){}get test(){}};return (0,tslib_es6._)([(0,property/* property */.MZ)()],N.prototype,"_updatingRequiredPromise",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],N.prototype,"availableFields",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],N.prototype,"displayFilterEnabled",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],N.prototype,"effectiveDisplayFilter",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:FeatureEffect/* default */.A})],N.prototype,"featureEffect",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:FeatureFilter/* default */.A})],N.prototype,"filter",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],N.prototype,"layer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number})],N.prototype,"maximumNumberOfFeatures",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0,type:Boolean})],N.prototype,"maximumNumberOfFeaturesExceeded",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],N.prototype,"requiresCurrentUser",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],N.prototype,"requiredFields",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],N.prototype,"signedInUser",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],N.prototype,"suspended",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],N.prototype,"view",void 0),N=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.FeatureLayerView")],N),N};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/LayerView.js
var LayerView = __webpack_require__(9049);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js
var RefreshableLayerView = __webpack_require__(51660);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/HighlightDefaults.js
var HighlightDefaults = __webpack_require__(29736);
;// ../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function ue(e,t){const r=new Set;return e&&e.forEach((e=>r.add(e))),t&&t.forEach((e=>r.add(e))),r.has("*")?["*"]:Array.from(r)}const le=4294967294;function he(e,t){return (0,handleUtils/* handlesGroup */.vE)(e.map((e=>(0,reactiveUtils/* watch */.wB)((()=>{const t=e();return t&&"object"==typeof t?"getTime"in t&&"function"==typeof t.getTime?t.getTime():JSON.stringify(t):t}),t))))}let ce=class extends(S((0,RefreshableLayerView/* default */.A)((0,LayerView2D/* LayerView2DMixin */.e)(LayerView/* default */.A)))){constructor(){super(...arguments),this._commandsQueue=new FeatureCommandQueue/* FeatureCommandQueue */.j({process:e=>{switch(e.type){case"override-batch":return this._doOverride(e);case"update":return this._doUpdate();case"highlight":return this._updateHighlights()}}}),this._visibilityOverrides=new Set,this._lastAvailableFields=[],this._lastTargetState=null,this.eventLog=new FeatureSourceEventLog_l,this._sourceRefreshVersion=1,this._displayRefreshVersion=1,this._pipelineUpdating=!1,this._editUpdatingHandles=new UpdatingHandles/* UpdatingHandles */.U,this._fields=null,this._sourceUpdating=!1,this.featureEffectView=new c}destroy(){this._workerProxy?.destroy(),this._workerAttached.reject((0,promiseUtils/* createAbortError */.NK)()),this._commandsQueue.destroy()}initialize(){this._workerAttached=(0,promiseUtils/* createResolver */.Tw)(),(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._workerAttached.promise),this.addResolvingPromise(this._initProxy()),this.featureEffectView.featureEffect=this.featureEffect,this.featureEffectView.endTransition()}async _initProxy(){const e=this.layer;if("isTable"in e&&e.isTable)throw new core_Error/* default */.A("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:e});if(("feature"===e.type||"subtype-group"===e.type)&&!1===(0,layerUtils/* getEffectiveLayerCapabilities */.BR)(e)?.operations.supportsQuery)throw new core_Error/* default */.A("featurelayerview:query-not-supported","layer view requires a layer with query capability",{layer:e});this._workerProxy&&this._workerProxy.destroy();const t=this._createClientOptions();this._workerProxy=await FeaturePipelineWorkerProxy_t(t)}async _attachProxy(){const e={service:await this.layerAdapter.createServiceOptions(this.view),tileInfoJSON:this.view?.featuresTilingScheme?.tileInfo?.toJSON()};let t=[];Array.isArray(e.service.source)&&(t=e.service.source);try{await this._workerProxy.pipeline.onAttach(e,{transferList:t}),this._workerAttached.resolve()}catch(r){this._workerAttached.reject((0,promiseUtils/* createAbortError */.NK)()),(0,promiseUtils/* throwIfNotAbortError */.jH)(r)}}async _detachProxy(){return this._workerProxy.pipeline.onDetach()}async getWorker(){return await this._workerAttached.promise,this._workerProxy}get dataUpdating(){return this._sourceUpdating||this._editUpdatingHandles.updating}get effectiveDisplayFilterClause(){const e=this.effectiveDisplayFilter?.where??null;return e&&this.hasHighlight?(0,sql/* sqlOr */.IW)(e,(0,sql/* sqlIn */.Yp)(this.layer.objectIdField,this.highlightIds)):e}get hasAllFeatures(){return this.layer.visible&&!this.suspended&&this.eventLog.hasAllData&&this.eventLog.willQueryAllFeatures}get hasAllFeaturesInView(){const e=this.effectiveDisplayFilter?.where||null,t=!this.eventLog.willQueryAllFeatures&&null!=e&&"1=1"!==e;return this.layer.visible&&!this.suspended&&this.eventLog.hasAllData&&!t}get hasFullGeometries(){return this.layer.visible&&!this.suspended&&this.eventLog.hasAllData&&this.eventLog.willQueryFullResolutionGeometry}get labelingCollisionInfos(){const e=this.layerAdapter.getLabelingDeconflictionInfo(this.view),t=this.layer.geometryType,r=!this.suspended;return e.map((({vvEvaluators:e,deconflictionEnabled:s,labelingInfo:i})=>({labelingInfo:i,container:this.featureContainer,vvEvaluators:e,deconflictionEnabled:s,geometryType:t,visible:r})))}get layerAdapter(){switch(this.layer.type){case"feature":return"memory"===this.layer.source.type?new InMemoryLayerAdapter_p(this.layer):new FeatureLayerAdapter_m(this.layer);case"geojson":case"csv":case"wfs":return new InMemoryLayerAdapter_p(this.layer);case"parquet":return new ParquetLayerAdapter_y(this.layer);case"subtype-group":return new SubtypeGroupLayerAdapter_m(this.layer);case"ogc-feature":return new OGCFeatureLayerAdapter_u(this.layer);case"stream":return new StreamLayerAdapter_o(this.layer);case"oriented-imagery":return new OrientedImageryLayerAdapter_m(this.layer);case"knowledge-graph-sublayer":return new KnowledgeGraphSublayerAdapter_c(this.layer);case"catalog-footprint":return new CatalogFootprintLayerAdapter_n(this.layer);default:(0,compilerUtils/* neverReached */.Xb)(this.layer)}return null}get timeExtent(){return (0,timeSupport/* combineTimeExtent */.F)(this.layerAdapter.timeOptions,this.view?.timeExtent,this._get("timeExtent"))}getDisplayStatistics(e,t){return this.featureContainer?.getDisplayStatistics(e,t)}async queryHeatmapStatistics(e){return(await this.getWorker()).pipeline.queryHeatmapStatistics(e)}highlight(e,t){let s;e instanceof Graphic/* default */.A?s=[e.getObjectId()]:"number"==typeof e||"string"==typeof e?s=[e]:Collection/* default */.A.isCollection(e)&&e.length>0?s=e.map((e=>e?.getObjectId())).toArray():Array.isArray(e)&&e.length>0&&(s="number"==typeof e[0]||"string"==typeof e[0]?e:e.map((e=>e?.getObjectId())));const o=s?.filter(arrayUtils/* isSome */.Ru);if(!o?.length)return (0,handleUtils/* makeHandle */.hA)();const n=t?.name??HighlightDefaults/* defaultHighlightName */.Tv;return this._addHighlights(o,n),(0,handleUtils/* makeHandle */.hA)((()=>!this.destroyed&&this._removeHighlights(o,n)))}async hitTest(e,i){const a=await this.featureContainer.hitTest(i);if(0===a.length)return null;const o=await this.getWorker(),{features:n,aggregates:u,tracks:l}=await o.pipeline.getDisplayFeatures(a),h=this.featureContainer.getSortKeys(a),c=({displayId:e},{displayId:t})=>h.has(e)&&h.has(t)?h.get(e)-h.get(t):e-t;return n.sort(c).reverse(),u.sort(c).reverse(),[...u.map((r=>this._createGraphicHit(e,AggregateGraphic_s.fromJSON(r)))),...l.map((t=>this._createGraphicHit(e,TrackGraphic_p.fromJSON(t)))),...n.map((t=>this._createGraphicHit(e,Graphic/* default */.A.fromJSON(t))))]}async queryStatistics(){const e=await this.getWorker();return (0,handleNoEngineError/* handleNoEngineError */.E)(e.pipeline.queryStatistics(),{featureCount:0,ringCount:0,vertexCount:0})}async querySummaryStatistics(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.features.executeQueryForSummaryStatistics(this._cleanUpQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{})}async queryAggregateSummaryStatistics(e,t,r){const s={...t,scale:this.view.scale},i=(await this.getWorker()).aggregates.executeQueryForSummaryStatistics(this._cleanUpAggregateQuery(e),s,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(i,{})}async queryUniqueValues(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.features.executeQueryForUniqueValues(this._cleanUpQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{uniqueValueInfos:[]})}async queryAggregateUniqueValues(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.aggregates.executeQueryForUniqueValues(this._cleanUpAggregateQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{uniqueValueInfos:[]})}async queryClassBreaks(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.features.executeQueryForClassBreaks(this._cleanUpQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{classBreakInfos:[]})}async queryAggregateClassBreaks(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.aggregates.executeQueryForClassBreaks(this._cleanUpAggregateQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{classBreakInfos:[]})}async queryHistogram(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.features.executeQueryForHistogram(this._cleanUpQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{bins:[],maxValue:null,minValue:null,normalizationTotal:null})}async queryAggregateHistogram(e,t,r){const s=await this.getWorker(),i={...t,scale:this.view.scale},a=s.aggregates.executeQueryForHistogram(this._cleanUpAggregateQuery(e),i,r);return (0,handleNoEngineError/* handleNoEngineError */.E)(a,{bins:[],maxValue:null,minValue:null,normalizationTotal:null})}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=FeatureSet/* default */.A.fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}async queryVisibleFeatures(e,t){const r=(await this.getWorker()).pipeline.queryVisibleFeatures(this._cleanUpQuery(e),t),s=await (0,handleNoEngineError/* handleNoEngineError */.E)(r,{features:[]}),i=FeatureSet/* default */.A.fromJSON(s);return i.features.forEach((e=>this._setLayersForFeature(e))),i}async queryAggregates(e,t){const r=(await this.getWorker()).aggregates.executeQuery(this._cleanUpAggregateQuery(e),t),s=await (0,handleNoEngineError/* handleNoEngineError */.E)(r,{features:[]}),i=AggregateFeatureSet_c.fromJSON(s);return i.features.forEach((e=>this._setLayersForFeature(e))),i}async queryAggregateIds(e,t){const r=(await this.getWorker()).aggregates.executeQueryForIds(this._cleanUpAggregateQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,[])}async queryAggregateCount(e,t){const r=(await this.getWorker()).aggregates.executeQueryForCount(this._cleanUpAggregateQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,0)}async queryAggregateJSON(e,t){const r=(await this.getWorker()).aggregates.executeQuery(this._cleanUpAggregateQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,{features:[]})}async queryFeaturesJSON(e,t){const r=(await this.getWorker()).features.executeQuery(this._cleanUpQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,{features:[]})}async queryObjectIds(e,t){const r=(await this.getWorker()).features.executeQueryForIds(this._cleanUpQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,[])}async queryFeatureCount(e,t){const r=(await this.getWorker()).features.executeQueryForCount(this._cleanUpQuery(e),t);return (0,handleNoEngineError/* handleNoEngineError */.E)(r,0)}async queryExtent(e,t){const r=(await this.getWorker()).features.executeQueryForExtent(this._cleanUpQuery(e),t),s=await (0,handleNoEngineError/* handleNoEngineError */.E)(r,{count:0,extent:null});return{count:s.count,extent:Extent/* default */.A.fromJSON(s.extent)}}async queryAttributeBins(e,t){const r=(await this.getWorker()).features.executeAttributeBinsQuery(this._cleanUpAttributeBinsQuery(e),t),s=await (0,handleNoEngineError/* handleNoEngineError */.E)(r,{features:[]});return AttributeBinsFeatureSet/* default */.A.fromJSON(s)}async getSampleFeatures(e){return(await this.getWorker()).pipeline.getSampleFeatures(e)}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this.subscriptionManager)return;this.view.animation&&!this._lastTargetState&&(this._lastTargetState=e.state.clone()),!this.view.animation&&this._lastTargetState&&(this._lastTargetState=null);const t=this.subscriptionManager.update(e.targetState,this._lastTargetState),r=this.subscriptionManager.coverageSet;for(const s of this.featureContainer.tiles||[])s.isCoverage=r.has(s.id),s.neededForCoverage=t.has(s.id)||s.isCoverage;this.featureContainer.setVisibleTiles(t)}attach(){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug("FeatureLayerView2D.attach"),(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._updatingHandles.addPromise(this._workerAttached.promise)),(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._attachProxy()),this.featureContainer=new _(this),this.container.addChild(this.featureContainer),this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this.subscriptionManager=new FeatureTileSubscriptionManager_n({tileInfoView:this.view.featuresTilingScheme,updateSubscriptions:e=>{this.featureContainer.updateSubscriptions(e),(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._updatingHandles.addPromise(this.getWorker().then((t=>t.pipeline.updateSubscriptions(e)))))},isDone:e=>this.featureContainer.isDone(e)}),this.requestUpdate(),this.addAttachHandles([he([()=>this._displayRefreshVersion,()=>this.layer.displayFilterInfo,()=>this.timeExtent,()=>this.clips,()=>this.filter,()=>this.effectiveDisplayFilterClause,()=>this.featureEffect,()=>this._sourceRefreshVersion,()=>this.view.timeZone,()=>this.view.timeExtent,...this.layerAdapter.getUpdateHashProperties(this.view)],(()=>this._update())),(0,reactiveUtils/* watch */.wB)((()=>this.updateSuspended),(e=>{e||(this.subscriptionManager.resume(),this.view.labelManager.requestUpdate())})),(0,reactiveUtils/* watch */.wB)((()=>this.visible),(e=>{this.view.labelManager.requestUpdate()}))]),this._update(),"stream"!==this.layer.type&&"parquet"!==this.layer.type&&"catalog-footprint"!==this.layer.type&&this.addAttachHandles(this.layer.on("edits",(e=>this._editUpdatingHandles.addPromise(this._edit(e)))))}detach(){(0,has/* default */.A)("esri-2d-update-debug")&&console.debug("FeatureLayerView2D.detach"),this._detachProxy(),this._fields=null,this.featureContainer.destroy(),this.featureContainer=null,this._commandsQueue.clear(),this.container.removeAllChildren(),this.subscriptionManager=(0,maybe/* destroyMaybe */.pR)(this.subscriptionManager),this._workerProxy.pipeline.onDetach(),this._workerAttached=(0,promiseUtils/* createResolver */.Tw)(),(0,promiseUtils/* ignoreAbortErrors */.QZ)(this._workerAttached.promise),this._lastAvailableFields=[],this._lastSchema=null}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}addOverrides(e){return this._commandsQueue.push({type:"override",options:{...e,release:[]}})}removeOverrides(e){for(const r of e)if(null==r)throw new core_Error/* default */.A("featurelayerview:bad-override","Tried to remove an override for an invalid objectId",{objectId:r});const t={added:[],updated:[],removed:[],release:e,isWeak:!1,historicMoment:null};return this._commandsQueue.push({type:"override",options:t})}isUpdating(){const e="renderer"in this.layer&&null!=this.layer.renderer,t=this._commandsQueue.updateTracking.updating,r=null!=this._updatingRequiredPromise,s=this.featureContainer.updatingHandles.updating,i=this.updateRequested||e&&(t||r)||s||this._pipelineUpdating||this.dataUpdating;if((0,has/* default */.A)("esri-2d-log-updating")){console.log(`Updating FLV2D (${this.layer.id}): ${i}\n  -> updateRequested ${this.updateRequested}\n  -> hasRenderer ${e}\n  -> updatingRequiredFields ${r}\n  -> hasPendingCommand ${t}\n  -> dataUpdating ${this.dataUpdating}\n  -> processing ${this._pipelineUpdating}\n  -> updatingContainer ${s}\n`);for(const e of this.featureContainer.subscriptions())console.log(`    -> Tile[${e.id}] Done: ${e.done}`)}return i}_createClientOptions(){const e=this;return{get container(){return e.featureContainer},setUpdating:e=>{this._set("_pipelineUpdating",e.pipeline),this._set("_sourceUpdating",e.source)},emitEvent:e=>{this.emit(e.name,e.event)},get eventLog(){return e.eventLog},fetch:async t=>{if((0,has/* default */.A)("esri-2d-stabilize-glyphs")){const r=[];for(const s of t)r.push(await e.view.stage.painter.textureManager.rasterizeItem(s));return r}return Promise.all(t.map((t=>e.view.stage.painter.textureManager.rasterizeItem(t))))},fetchDictionary:e=>Promise.all(e.map((e=>this._fetchDictionaryRequest(e))))}}async _fetchDictionaryRequest(e){try{if("subtype-group"===this.layer.type)throw new Error("InternalError: SubtypeGroupLayer does not support dictionary renderer");const t=this.layer.renderer;if(!t||"dictionary"!==t.type)throw new Error("InternalError: Expected layer to have a DictionaryRenderer");const r=this._lastSchema.processor.mesh.factory.symbology;if("dictionary"!==r.type)throw new Error("InternalError: Expected schema to be of type 'dictionary'");const s={cimAnalyzer:this.view.stage.cimAnalyzer,cimResourceManager:this.view.stage.painter.textureManager.resourceManager,store:this.featureContainer.instanceStore,scaleExpression:r.scaleExpression};this._fields||(this._fields=this.layer.fields.map((e=>e.toJSON())));const i=r.visualVariableUniforms,a=(0,util/* toJSONGeometryType */.eh)(this.layer.geometryType),o=await t.getSymbolForControlString(e.controlString,a,!1);if(!o||!o.data)return{type:"dictionary-response",meshes:[]};return{type:"dictionary-response",meshes:await (0,ComplexSymbolSchema/* createComplexSymbolInstances */.Jk)({...o.data,hasTextStringTemplates:!0},{uniforms:i,path:"renderer",schemaOptions:s})}}catch(t){return{type:"dictionary-response",meshes:[]}}}_cleanUpQuery(e){const t=Query/* default */.A.from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t.toJSON()}_cleanUpAttributeBinsQuery(e){const t=AttributeBinsQuery["default"].from(e);return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t.toJSON()}_cleanUpAggregateQuery(e){const t=Query/* default */.A.from(e)||this.createAggregateQuery();t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference);const r=t.objectIds??[];for(const s of t.aggregateIds??[])r.push(s);return t.objectIds=r,t.aggregateIds=[],t.toJSON()}async _update(){return this._commandsQueue.push({type:"update"})}_edit(e){return this.updateSuspended?(this.subscriptionManager.suspend(),Promise.resolve()):this._commandsQueue.push({type:"edit",event:e})}async doRefresh(e){this.attached&&(this.updateSuspended&&e||(e?this.incrementSourceRefreshVersion():this.incrementDisplayRefreshVersion()))}incrementSourceRefreshVersion(){this._sourceRefreshVersion=(this._sourceRefreshVersion+1)%le+1}incrementDisplayRefreshVersion(){this._displayRefreshVersion=(this._displayRefreshVersion+1)%le+1}async _resolveIdenifiers(e){const t=[],r=[];for(const a of e)null==a.objectId||-1===a.objectId?null==a.globalId?Logger/* default */.A.getLogger(this).warn("mapview-apply-edits","A feature identifier must contain either a GlobalId or ObjectId. Ignoring",{identifier:a}):r.push(a.globalId):t.push(a.objectId);const s="globalIdField"in this.layer&&this.layer.globalIdField,i=s&&this.availableFields.includes(s);if(r.length&&!i)return Logger/* default */.A.getLogger(this).error(new core_Error/* default */.A("mapview-apply-edits",`Editing the specified service requires the layer's globalIdField, ${s} to be included the layer's outFields for updates to be reflected on the map`)),t;if(r.length){const e=await this._workerProxy.pipeline.getObjectIdsFromGlobalIds(r);for(const r of e)t.push(r)}return t}_resolveOverrides(e){const t=!1,r=!1,s=(0,util/* toJSONGeometryType */.eh)(this.layer.geometryType),i=featureServiceUtils_e(this.layer),a=[];for(const o of e.added){const e=(0,featureConversionUtils/* convertFromFeature */.E2)(o,s,t,r,i);if(null==e.objectId)throw new core_Error/* default */.A("featurelayerview:bad-override","Feature does not have an objectId",{feature:o});a.push(e)}for(const o of e.updated){const e=(0,featureConversionUtils/* convertFromFeature */.E2)(o,s,t,r,i);if(null==e.objectId)throw new core_Error/* default */.A("featurelayerview:bad-override","Feature does not have an objectId",{feature:o});a.push(e)}for(const o of e.removed)if(null==o)throw new core_Error/* default */.A("featurelayerview:bad-override","Tried to remove an invalid objectId",{objectId:o});return{type:"override",updates:a,removed:e.removed,release:e.release,isWeak:e.isWeak??!1,historicMoment:e.historicMoment??null}}async _resolveEdit(e){const t=this.layer,r=e.historicMoment?.getTime()??null,s="layerId"in t&&e.editedFeatures?.find((e=>e.layerId===t.layerId));if(s&&this._canEditByFeature(s)){const{adds:e,deletes:t,updates:i}=s.editedFeatures,a=this.layer.objectIdField,o=i.map((e=>e.current)),n=t.map((e=>"attributes"in e?{objectId:a?e.attributes[a]:null}:e)),u=await this._resolveIdenifiers(n);return this._resolveOverrides({added:e,updated:o,removed:u,historicMoment:r,isWeak:!0,release:[]})}const[i,a,o]=await Promise.all([this._resolveIdenifiers(e.addedFeatures),this._resolveIdenifiers(e.updatedFeatures),this._resolveIdenifiers(e.deletedFeatures)]);return{type:"override-by-id",updates:[...i,...a],removed:o,historicMoment:r,isWeak:!0}}_canEditByFeature(e){const{adds:t,updates:r}=e.editedFeatures;return t.every((e=>this.view.spatialReference.equals(e.geometry?.spatialReference)))&&r.every((e=>this.view.spatialReference.equals(e.current.geometry?.spatialReference)))}async _doUpdate(){"featureReduction"in this.layer&&this.layer.featureReduction&&this.layer.featureReduction!==this._lastFeatureReduction&&(this.layer.featureReduction=this.layer.featureReduction?.clone(),this._lastFeatureReduction=this.layer.featureReduction);try{if(await Promise.allSettled([this._handleChange(),(0,featureLayerUtils/* checkServiceCurrentUserSupport */.d$)(this.layer)]),this.destroyed||!this.layerAdapter?.hasRequiredSupport||!this.subscriptionManager)return;const e=this.featureContainer.instanceStore;this.featureContainer.attributeView.lockTextureUploads();const t=this._lastSchema?.processor.mesh.factory.symbology?.type;let r=!0;"subtype-group"!==this.layer.type&&"dictionary"===this.layer.renderer?.type&&"dictionary"===t&&(r=!1),e.updateStart(r);const s=this.featureEffect,i={store:e,cimAnalyzer:this.view.stage.cimAnalyzer,cimResourceManager:this.view.stage.painter.textureManager.resourceManager,scaleExpression:void 0},a=await this._createViewSchemaConfig(),o={source:this.layerAdapter.createSourceSchema(a,this._sourceRefreshVersion),processor:await this.layerAdapter.createProcessorSchema(i,a,this._displayRefreshVersion)},n=o.processor.mesh.factory.labels;n&&this.view.labelManager.setLabelSchemaStyles(n,this.featureContainer);const u=(0,object/* notDeepEqual */.i8)(this._lastSchema?.source.mutable,o.source.mutable)||(0,object/* notDeepEqual */.i8)(this._lastSchema?.processor,o.processor);if(!u)return this.featureContainer.requestRender(),this.featureContainer.attributeView.unlockTextureUploads(),e.updateEnd(r),void(this.featureEffectView.featureEffect=s);this._lastSchema=o,this._fields=null;const l=Math.round(performance.now());(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Id[${this.layer.uid}] Version[${l}] FeatureLayerView2D._doUpdate`,{changes:u});const h=await this.getWorker();await h.pipeline.updateSchema(o,l),e.updateEnd(r),this.featureEffectView.featureEffect=s,this.featureEffectView.endTransition(),this.featureContainer.restartAllAnimations(),this.featureContainer.attributeView.unlockTextureUploads(),this.featureContainer.trySwapRenderState(),this.featureContainer.requestRender(),(0,has/* default */.A)("esri-2d-update-debug")&&console.debug(`Version[${l}] FeatureLayerView2D.updateEnd`),this.requestUpdate()}catch(e){(0,has/* default */.A)("esri-2d-update-debug")&&console.error("Encountered an error during update",e)}}async _doOverride(e){const t=await this.getWorker();try{for(const r of e.messages)switch(r.type){case"edit":{const e=new DebouncedFeatureOverride_e;e.add(await this._resolveEdit(r.event)),await t.pipeline.onOverride(e.toMessage());break}case"override":{const e=new DebouncedFeatureOverride_e;e.add(this._resolveOverrides(r.options)),await t.pipeline.onOverride(e.toMessage());break}}}catch(r){(0,promiseUtils/* isAbortError */.zf)(r),0}}_getEffectiveAvailableFields(e){const t=ue(this._lastAvailableFields,e);return this._lastAvailableFields=t,(0,fieldUtils/* packFields */.hW)(this.layer.fieldsIndex,t)}async _createViewSchemaConfig(){const e=this.requiresCurrentUser?await this.signedInUser:null,t=[pe(this.view,this.layerAdapter,this.timeExtent,this._visibilityOverrides,this.filter,this.effectiveDisplayFilterClause),this.featureEffect?.filter?.toJSON()??null];return{availableFields:this._getEffectiveAvailableFields(this.availableFields),displayFilterEnabled:this.displayFilterEnabled,filters:t,scale:this.view.scale,timeZone:this.view.timeZone,timeExtent:this.view.timeExtent,currentUser:e}}_processHighlight(){this._commandsQueue.push({type:"highlight"})}async _updateHighlights(){const e=this._getHighlights(),t=await this.getWorker();if(this.destroyed)return;const r=t.pipeline.updateHighlight({highlights:e}).catch((e=>{(0,promiseUtils/* isAbortError */.zf)(e)||Logger/* default */.A.getLogger(this).error(e)}));this._updatingHandles.addPromise(r)}_setLayersForFeature(e){e.layer=e.sourceLayer=this.layer,this.layerAdapter.setGraphicOrigin&&this.layerAdapter.setGraphicOrigin(e)}_createGraphicHit(e,t){return this._setLayersForFeature(t),null!=t.geometry&&(t.geometry.spatialReference=this.view.spatialReference),{type:"graphic",graphic:t,layer:this.layer,mapPoint:e}}};function pe(e,t,r,s,i,a){i&&(i=i.clone());const o=null!=i?i.timeExtent:null,n=null!=r&&null!=o?r.intersection(o):r||o;n&&(i??=new FeatureFilter/* default */.A,i.timeExtent=n),i=t.addFilters?.(i,e)??i,a&&(i??=new FeatureFilter/* default */.A,i.where=(0,sql/* sqlAnd */.mA)(i.where,a));let u=i?.toJSON()??null;return s.size&&(u??=(new FeatureFilter/* default */.A).toJSON(),u.hiddenIds=Array.from(s)),u}(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"_commandsQueue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"_sourceRefreshVersion",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"_displayRefreshVersion",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"_pipelineUpdating",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"_sourceUpdating",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"dataUpdating",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"effectiveDisplayFilterClause",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"hasAllFeatures",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"hasAllFeaturesInView",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"hasFullGeometries",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"featureEffectView",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"labelingCollisionInfos",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"layerAdapter",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],ce.prototype,"timeExtent",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],ce.prototype,"updating",void 0),ce=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.FeatureLayerView2D")],ce);


/***/ }),

/***/ 24342:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  e: () => (/* binding */ S)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/collectionUtils.js
var collectionUtils = __webpack_require__(4194);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/linkChart/utils.js
var utils = __webpack_require__(47393);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MapUtils.js
var MapUtils = __webpack_require__(82256);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/ReactiveMap.js
var ReactiveMap = __webpack_require__(71416);
;// ../node_modules/@arcgis/core/views/2d/layers/support/HighlightCounter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let i=class extends Accessor/* default */.A{constructor(){super(...arguments),this._idToCounters=new ReactiveMap/* default */.A}get size(){return this._idToCounters.size}get objectIds(){return this._idToCounters.keys()}get highlightNamesByObjectId(){return n(this._idToCounters)}add(e,t){let s=!1;for(const r of e){const e=(0,MapUtils/* getOrCreateMapValue */.tE)(this._idToCounters,r,(()=>(s=!0,new Map))),i=e.get(t)??0;i||(s=!0),e.set(t,i+1)}return s}delete(e,t){let o=!1;for(const s of e){const e=this._idToCounters.get(s);if(!e)continue;let r=e.get(t);null!=r&&(r--,r>0?e.set(t,r):(e.delete(t),o=!0),0===e.size&&(this._idToCounters.delete(s),o=!0))}return o}};function*n(e){for(const[t,o]of e)yield[t,o.keys()]}i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.support.HighlightCounter")],i);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/util.js + 2 modules
var util = __webpack_require__(19257);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/support/highlightOptionsUtils.js
var highlightOptionsUtils = __webpack_require__(41010);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/support/ClipArea.js
var ClipArea = __webpack_require__(61226);
;// ../node_modules/@arcgis/core/views/layers/support/ClipRect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var s;let ClipRect_i=s=class extends ClipArea/* default */.A{constructor(t){super(t),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],ClipRect_i.prototype,"left",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],ClipRect_i.prototype,"right",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],ClipRect_i.prototype,"top",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],ClipRect_i.prototype,"bottom",void 0),ClipRect_i=s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.ClipRect")],ClipRect_i);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/layers/support/Geometry.js
var Geometry = __webpack_require__(8565);
;// ../node_modules/@arcgis/core/views/layers/support/Path.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let e=class extends ClipArea/* default */.A{constructor(r){super(r),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[[[Number]]],json:{write:!0}})],e.prototype,"path",void 0),e=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.Path")],e);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/HighlightOptions.js
var HighlightOptions = __webpack_require__(96058);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/support/layerViewUtils.js
var layerViewUtils = __webpack_require__(38201);
;// ../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const R=Collection/* default */.A.ofType({key:"type",base:null,typeMap:{rect:ClipRect_i,path:e,geometry:Geometry/* default */.A}}),_=new(Collection/* default */.A.ofType(HighlightOptions/* default */.A)),S=m=>{let f=class extends m{constructor(){super(...arguments),this._highlightCounter=new i,this.attached=!1,this.clips=new R,this.highlights=null,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this._visibleAtCurrentScale=!0}initialize(){const t=this.view?.spatialReferenceLocked??!0,e=this.view?.spatialReference;e&&t&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new Error/* default */.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new Container/* Container */.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.suspended),(t=>{this.container&&(this.container.visible=!t)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.updateSuspended),(t=>{this.view&&!t&&this.updateRequested&&this.view.requestUpdate()}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer?.opacity??1),(t=>{this.container&&(this.container.opacity=t)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(t=>{this.container&&(this.container.blendMode=t)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(t=>{this.container&&(this.container.effect=t)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this._mergedHighlights.items.map((t=>({name:t.name,options:{fillColor:t.color,haloColor:t.haloColor,fillOpacity:t.fillOpacity,haloOpacity:t.haloOpacity,haloWidth:t.haloWidth,haloBlur:t.haloBlur}})))),(()=>{this.container.highlightGradient=(0,util/* createOrReuseHighlightGradient */.u4)(this.container.highlightGradient,this._mergedHighlights.items)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this._mergedHighlights.items.map((t=>t.name))),(()=>{this._processHighlight()})),(0,reactiveUtils.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null})),(({scale:t,scaleRange:e})=>{const i=(0,layerViewUtils/* isInEffectiveScaleRange */.E5)(e,t);i!==this._visibleAtCurrentScale&&(this._visibleAtCurrentScale=i)}),reactiveUtils/* syncAndInitial */.pc)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then((t=>{t===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get highlightOptions(){return (0,highlightOptionsUtils/* getDefaultHighlightOptions */.a)(this)}set highlightOptions(t){(0,highlightOptionsUtils/* setDefaultHighlightOptions */.o)(this,t)}get hasHighlight(){return this._highlightCounter.size>0}get _mergedHighlights(){if(!this.view)return _;if(!this.highlights)return this.view.highlights;const t=this.view.highlights.clone();for(const e of this.highlights){const i=t.find((t=>t.name===e.name));i&&i.assignFrom(e)}return t}get highlightIds(){return Array.from(this._highlightCounter.objectIds)}get scheduler(){return this.view.scheduler}get spatialReferenceSupported(){const t=this.view?.spatialReference;return null==t||this.supportsSpatialReference(t)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating||this.container.transitioning)}get visibleAtCurrentScale(){return this._visibleAtCurrentScale}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",t),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}hitTest(t,e){return Promise.resolve(null)}supportsSpatialReference(t){return!0}canResume(){if(!this.spatialReferenceSupported)return!1;switch(this.layer?.type){case"link-chart":case"knowledge-graph-sublayer":case"graphics":break;default:if((0,utils/* isLinkChartView */.O)(this.view)&&!this.view.inGeographicLayout)return!1}return!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const t=super.getSuspendInfo(),e=!this.spatialReferenceSupported;return e&&(t.spatialReferenceNotSupported=e),t}addAttachHandles(t){this.addHandles(t,"attach")}_addHighlights(t,e){this._highlightCounter.add(t,e)&&this._processHighlight()}_removeHighlights(t,e){this._highlightCounter.delete(t,e)&&this._processHighlight()}_processHighlight(){}_getHighlights(){const t=[];for(const[e,i]of this._highlightCounter.highlightNamesByObjectId){const s=this._getHighlightBits(i);t.push({objectId:e,highlightFlags:s})}return t}_getHighlightBits(t){const e=new Set(t);let i=1,s=0;if(!this.view)return 0;const r=this._mergedHighlights;for(const{name:h}of r)e.delete(h)&&(s=i),i<<=1;return s}};return (0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"attached",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:R,set(t){const e=(0,collectionUtils/* referenceSetter */.V)(t,this._get("clips"),R);this._set("clips",e)}})],f.prototype,"clips",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:HighlightOptions/* default */.A})],f.prototype,"highlightOptions",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Collection/* default */.A.ofType(HighlightOptions/* default */.A)})],f.prototype,"highlights",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"_mergedHighlights",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"moving",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],f.prototype,"spatialReferenceSupported",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],f.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],f.prototype,"_visibleAtCurrentScale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],f.prototype,"visibleAtCurrentScale",null),f=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.LayerView2D")],f),f};


/***/ }),

/***/ 79705:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ d)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/handleUtils.js
var handleUtils = __webpack_require__(20464);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/FeatureSet.js
var FeatureSet = __webpack_require__(57822);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/guards.js
var guards = __webpack_require__(8701);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js + 38 modules
var FeatureLayerView2D = __webpack_require__(4371);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/handleNoEngineError.js
var handleNoEngineError = __webpack_require__(7267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/FeatureFilter.js
var FeatureFilter = __webpack_require__(3377);
;// ../node_modules/@arcgis/core/views/layers/StreamLayerView.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&"connected"===this._streamConnectionStatus?"paused":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return (0,tslib_es6._)([(0,property/* property */.MZ)()],i.prototype,"_isUserPaused",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],i.prototype,"connectionStatus",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:FeatureFilter/* default */.A})],i.prototype,"filter",void 0),i=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.StreamLayerView")],i),i};

;// ../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let p=class extends(r(FeatureLayerView2D["default"])){constructor(){super(...arguments),this.pipelineConnectionStatus="disconnected",this.pipelineErrorString=null}initialize(){this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on("send-message-to-socket",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on("send-message-to-client",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&"type"in e&&"clear"===e.type&&this.incrementSourceRefreshVersion()})),(0,reactiveUtils/* watch */.wB)((()=>this.layer.purgeOptions),(()=>this._update())),(0,reactiveUtils/* watch */.wB)((()=>this.suspended),this._onSuspendedChange.bind(this))],"constructor"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new Error/* default */.A("stream-controller",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return (0,handleUtils/* handlesGroup */.vE)(e.map((e=>this.on(e,r))));const n=["data-received","message-received"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return (0,handleUtils/* makeHandle */.hA)((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new Error/* default */.A("streamlayer-no-timeField","queryLatestObservation can only be used with services that define a TrackIdField");const s=await this.getWorker();return (0,handleNoEngineError/* handleNoEngineError */.E)(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=FeatureSet/* default */.A.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new FeatureSet/* default */.A({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus="disconnected"}async queryObjectIds(e,r){return(await super.queryObjectIds(e,r)).filter(guards/* isNumber */.Et)}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){null==this._refreshInterval&&(this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval))}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};(0,tslib_es6._)([(0,property/* property */.MZ)()],p.prototype,"pipelineConnectionStatus",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],p.prototype,"pipelineErrorString",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],p.prototype,"connectionError",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],p.prototype,"_streamConnectionStatus",null),p=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.StreamLayerView2D")],p);const d=p;


/***/ }),

/***/ 77013:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Jz: () => (/* binding */ d),
/* harmony export */   T9: () => (/* binding */ a),
/* harmony export */   uH: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports createDotDensityBindings, createHeatmapBindings, createPieChartBindings */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21822);
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79432);
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(63838);
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(75228);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function a(e,i){return{type:"simple",filters:i,capabilities:{maxTextureSize:(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__/* .getWebGLCapabilities */ .C)().maxTextureSize},bindings:u(e)}}function o(e,n){const t=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__/* .getWebGLCapabilities */ .C)();return{type:"multi",target:"feature",keyField:_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .internalTrackPartField */ .EA,filters:n,capabilities:{maxTextureSize:t.maxTextureSize},bindings:{[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.TrackLine]:u(e.trackLines.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.LatestObservation]:u(e.latestObservations.renderer),[_layers_support_streamLayerUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .TrackPart */ .t0.PreviousObservation]:u(e.previousObservations.renderer)}}}function l(e){switch(e){case"opacity":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.OPACITY;case"color":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.COLOR;case"rotation":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.ROTATION;case"size":return _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .VVBinding */ .Gn.SIZE;default:return null}}function u(e){if(!e)return[];switch(e.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":return d(e);case"dot-density":return c(e);case"pie-chart":return p(e);case"heatmap":return f(e)}}function c(e){const i=[];for(const r of e.attributes)i.push({binding:i.length,expression:r.valueExpression,field:r.field});return i}function p(e){const i=d(e);let r=4;for(const n of e.attributes)i.push({binding:r++,expression:n.valueExpression,field:n.field});return i}function f({valueExpression:e,field:i}){return e||i?[{binding:0,expression:e,field:i}]:[]}function d(i){if(!("visualVariables"in i)||!i.visualVariables?.length)return[];return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .simplifyVisualVariables */ .R)(i.visualVariables).map((e=>y(e))).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru)}function m(e){return"$view.scale"===e.valueExpression?null:{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression,valueRepresentation:e.valueRepresentation}}function b(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}function x(e){return{binding:l(e.type),field:e.field,normalizationField:e.normalizationField,expression:e.valueExpression}}function v(e){return{binding:l(e.type),expression:e.valueExpression,field:e.field}}function y(e){switch(e.type){case"size":return m(e);case"color":return b(e);case"opacity":return x(e);case"rotation":return v(e)}}


/***/ }),

/***/ 21857:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dk: () => (/* binding */ z),
/* harmony export */   K4: () => (/* binding */ y),
/* harmony export */   j0: () => (/* binding */ x)
/* harmony export */ });
/* unused harmony exports createVisualVariableColor, createVisualVariableOpacity, createVisualVariableRotation, createVisualVariableSizeMinMaxValue, createVisualVariableSizeStops, createVisualVariableSizeUnitValue */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92976);
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(10301);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(43556);
/* harmony import */ var _engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(32520);
/* harmony import */ var _schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21059);
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63838);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=1.25,o=128,c=128;function p(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(a,8),l=i.map((({value:e})=>e)),s=i.map((({color:e})=>(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .premultiplyColor */ .p)(e)));return{values:l,colors:s}}function v(e){if(!e.stops?.length)return null;const a=e.stops.sort(((e,a)=>e.value-a.value)),i=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(a,8);return{opacityValues:i.map((({value:e})=>e)),opacities:i.map((({opacity:e})=>e))}}function V(e){return{rotationType:"geographic"===e.rotationType?_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__/* .RotationType */ .H_.Geographic:_engine_webgl_shaderGraph_techniques_shaders_constants_js__WEBPACK_IMPORTED_MODULE_4__/* .RotationType */ .H_.Arithmatic}}function f(a){if(!a.stops?.length)return null;if(a.stops.some((e=>e.useMaxValue||e.useMinValue)))return(i,s)=>{const r=i.statisticsByLevel.get(s.key.level),u=a.stops.map((i=>({value:i.useMaxValue?r?.get(a.field)?.maxValue??0:i.useMinValue?r?.get(a.field)?.minValue??0:i.value,size:i.size?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(i.size):_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__/* .nanMagicNumber */ .qM}))).sort(((e,a)=>e.value-a.value)),n=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(u,8);return{values:n.map((({value:e})=>e)),sizes:n.map((({size:e})=>e))}};const i=a.stops.sort(((e,a)=>e.value-a.value)),s=(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .padStops */ .r)(i,8);return{values:s.map((({value:e})=>e)),sizes:s.map((({size:a})=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(a)))}}function m(e){return l=>{const{state:s}=l;return{unitValueToPixelsRatio:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerUnitForSR */ .GA)(s.spatialReference)/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .meterIn */ .j[e.valueUnit??"meters"]/s.resolution}}}function S(e,a){const i=a.length;if(e<a[0].value||1===i)return a[0].size;for(let l=1;l<i;l++)if(e<a[l].value){const i=(e-a[l-1].value)/(a[l].value-a[l-1].value);return a[l-1].size+i*(a[l].size-a[l-1].size)}return a[i-1].size}function b(a){const{minDataValue:i,maxDataValue:l,minSize:s,maxSize:t}=a;if("object"==typeof s&&"object"==typeof t)return(a,r)=>{const u=a.state.scale,n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(S(u,s.stops)),o=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(S(u,t.stops));return{minMaxValueAndSize:[i,l,n,o]}};if("object"==typeof s||"object"==typeof t)throw new Error("InternalError: Found a partial VisualVariableSizeMinMaxValue");return{minMaxValueAndSize:[i,l,(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(s),(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(t)]}}const z={visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:null,visualVariableSizeStops:null,visualVariableSizeScaleStops:null,visualVariableSizeOutlineScaleStops:null,visualVariableSizeUnitValue:null,visualVariableSizeMinMaxValue:null};function x(e,a=c,i=n){if(e.visualVariableSizeMinMaxValue)return"function"==typeof e.visualVariableSizeMinMaxValue?o:Math.max(e.visualVariableSizeMinMaxValue.minMaxValueAndSize[3]*i,a);if(e.visualVariableSizeScaleStops){if("function"==typeof e.visualVariableSizeScaleStops)return o;const l=e.visualVariableSizeScaleStops.sizes;return Math.max(l[l.length-1]*i,a)}if(e.visualVariableSizeStops){if("function"==typeof e.visualVariableSizeStops)return o;const l=e.visualVariableSizeStops.sizes;return Math.max(l[l.length-1]*i,a)}return e.visualVariableSizeUnitValue?2*o:0}function y(e){const a={...z};if(!e||!("visualVariables"in e)||!e.visualVariables)return a;for(const i of (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .simplifyVisualVariables */ .R)(e.visualVariables))switch(i.type){case"color":a.visualVariableColor=p(i);break;case"opacity":a.visualVariableOpacity=v(i);break;case"rotation":a.visualVariableRotation=V(i);break;case"size":switch(h(i)){case"field-stops":a.visualVariableSizeStops=f(i);break;case"scale-stops":"outline"===i.target?a.visualVariableSizeOutlineScaleStops=f(i):a.visualVariableSizeScaleStops=f(i);break;case"min-max":a.visualVariableSizeMinMaxValue=b(i);break;case"unit-value":a.visualVariableSizeUnitValue=m(i)}break}return a}function h(e){return"number"==typeof e.minDataValue&&"number"==typeof e.maxDataValue&&null!=e.minSize&&null!=e.maxSize?"min-max":"$view.scale"===e?.valueExpression&&Array.isArray(e.stops)?"scale-stops":null==e.field&&"$view.scale"===e?.valueExpression||!(Array.isArray(e.stops)||"levels"in e&&e.levels)?null!=e.field||"$view.scale"!==e?.valueExpression?"unit-value":null:"field-stops"}


/***/ }),

/***/ 21059:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ t),
/* harmony export */   r: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function n(n,t){const r=n.slice(0,t),e=t-r.length;for(let o=0;o<e;o++){const n=r[r.length-1];r.push(n)}return r}function t(n){if(!n)return[0,0,0,0];const{r:t,g:r,b:e,a:o}=n;return[t*(o/255),r*(o/255),e*(o/255),o]}


/***/ }),

/***/ 83810:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dr: () => (/* binding */ C),
/* harmony export */   EM: () => (/* binding */ R),
/* harmony export */   Gn: () => (/* binding */ h),
/* harmony export */   IQ: () => (/* binding */ L),
/* harmony export */   Jk: () => (/* binding */ u),
/* harmony export */   KK: () => (/* binding */ p),
/* harmony export */   NZ: () => (/* binding */ P),
/* harmony export */   TY: () => (/* binding */ s),
/* harmony export */   Yg: () => (/* binding */ z),
/* harmony export */   Zi: () => (/* binding */ S),
/* harmony export */   gF: () => (/* binding */ m),
/* harmony export */   mp: () => (/* binding */ g),
/* harmony export */   oF: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48002);
/* harmony import */ var _symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7591);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63643);
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(84022);
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21857);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54232);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function s(e){return e.minScale||e.maxScale?{minScale:e.minScale??0,maxScale:e.maxScale??0}:null}function c(e){if(null==e)return null;if(Array.isArray(e)){const[a,i,l,t]=e;return[a,i,l,255*t]}return"string"==typeof e?e:{...e,defaultValue:c(e?.defaultValue)}}async function u(a,i){const{cimResourceManager:l,cimAnalyzer:t,scaleExpression:n}=i.schemaOptions;await Promise.all(_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper */ .wp.fetchResources(a.symbol,l,[]));const o=t.analyzeSymbolReference(a,!1),r={scaleInfo:s(a),scaleExpression:n},c=[];for(const e of o)switch(e.type){case"marker":c.push(...f(e,i,r));break;case"fill":c.push(...v(e,i,r));break;case"outlineFill":c.push(...V(e,i,r));break;case"gradientFill":c.push(...y(e,i,r));break;case"line":c.push(...I(e,i,r));break;case"gradientStroke":c.push(...k(e,i,r));break;case"text":c.push(...A(e,i,r))}return c}function f(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue,visualVariableRotation:t.visualVariableRotation};if(e.animationParams){const{hasShiftAnimation:a}=e.animationParams.params,t=a?_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedMarkerShift:_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedMarker;return m(r.ensureInstance(t,{uniforms:s,optionalAttributes:{zoomRange:!0,value1Position2Value2:e.animationParams.params.hasShiftAnimation,lineLength:a}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return S(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.marker,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,t,i)}function m(e,a,l,t){if(!a.animationParams)return[];return[e.createMeshInfo({pixelDimensions:a.pixelDimensions,texelDimensions:a.texelDimensions,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,sprite:(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getAnimatedTechniqueSprite */ .xi)(a),animations:a.animationParams,scaleInfo:t.scaleInfo,scaleSymbolsProportionally:a.scaleSymbolsProportionally,strokeWidth:a.outlineWidth,isMapAligned:a.alignment===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.MAP,colorLocked:a.colorLocked,isStroke:a.isStroke,baseSize:a.baseSize,placement:a.markerPlacement,referenceSize:a.referenceSize,angleToLine:!!a.markerPlacement&&(a.markerPlacement.placement&&"angleToLine"in a.markerPlacement.placement&&a.markerPlacement.placement.angleToLine),sizeRatio:a.sizeRatio,patternHeight:null})]}function p(e,a,i,l){if(!a.animationParams)return[];return[e.createMeshInfo({effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,sprite:(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getAnimatedTechniqueSprite */ .xi)(a),animations:a.animationParams,scaleInfo:l.scaleInfo,scaleSymbolsProportionally:!1,strokeWidth:1,isMapAligned:!0,colorLocked:a.colorLocked||!1,isStroke:!1,baseSize:"width"in a?a.width:-1,placement:null,referenceSize:2,angleToLine:!1,sizeRatio:1,patternHeight:"fill"===a.type&&a.spriteRasterizationParam?a.height:null,joinType:"join"in a?a.join:"round",capType:"cap"in a?a.cap:"round",miterLimit:"miterLimit"in a&&a.miterLimit||2})]}function S(e,i,l,{scaleInfo:n,scaleExpression:o}){const s=(0,_utils_js__WEBPACK_IMPORTED_MODULE_5__/* .hasSizeVVUniform */ .IY)(l);return[e.createMeshInfo({size:i.size,scaleX:i.scaleX,anchorX:i.anchorPoint.x,anchorY:i.anchorPoint.y,angle:i.rotation,color:c(i.color)??[0,0,0,0],colorLocked:i.colorLocked,frameHeight:i.frameHeight,widthRatio:i.widthRatio,scaleInfo:n,offsetX:i.offsetX,offsetY:i.offsetY,outlineColor:c(i.outlineColor)??[0,0,0,0],outlineSize:i.outlineWidth,referenceSize:i.referenceSize||_symbols_cim_defaultCIMValues_js__WEBPACK_IMPORTED_MODULE_1__/* .defaultCIMValues */ .D.CIMVectorMarker.size,rotateClockwise:i.rotateClockwise,scaleFactor:o??1,sizeRatio:i.sizeRatio,alignment:i.alignment,isAbsoluteAnchorPoint:i.isAbsoluteAnchorPoint,scaleSymbolsProportionally:i.scaleSymbolsProportionally,sprite:i.spriteRasterizationParam,hasSizeVV:s,placement:i.markerPlacement,effects:i.effects?{type:"cim-effect-infos",effectInfos:i.effects}:null,transforms:i.transform,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .getMaxSizeVVSize */ .j0)(l)})]}function b(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s={visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity};if(e.animationParams){const a=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedFill;return p(r.ensureInstance(a,{uniforms:{...s,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableSizeScaleStops:null,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return h(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.fill,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function V(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return z(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.outlineFill,{uniforms:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function z(e,a,i){const l=c(a.color)??[0,0,0,0],t=c(a.outlineColor)??[0,0,0,0];return[e.createMeshInfo({color:l,outlineColor:t,width:a.outlineWidth,referenceWidth:a.referenceWidth,capType:a.cap,joinType:a.join,miterLimit:a.miterLimit,outlineUsesColorVV:!a.outlineColorLocked,hasSizeVV:!1,scaleInfo:i.scaleInfo,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,outlineEffects:a.outlineEffects?{type:"cim-effect-infos",effectInfos:a.outlineEffects}:null})]}function h(e,a,{scaleInfo:i}){return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function v(e,a,i){if(!e.spriteRasterizationParam)return b(e,a,i);const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s={visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity};if(e.animationParams){const a=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedFill;return p(r.ensureInstance(a,{uniforms:{...s,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableSizeScaleStops:null,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,lineLength:!1}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}return d(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.complexFill,{uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,null!=t.visualVariableColor,i)}function d(e,a,i,{scaleInfo:l}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const t=!!a.hasUnresolvedReplacementColor&&(!i||a.colorLocked),n=a.sampleAlphaOnly&&!t,o=a.spriteRasterizationParam;return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],height:a.height,aspectRatio:a.scaleX,offsetX:a.offsetX,offsetY:a.offsetY,scaleX:1,scaleY:1,angle:a.angle,applyRandomOffset:a.applyRandomOffset,sampleAlphaOnly:n,scaleProportionally:"CIMHatchFill"===o.resource.type,sprite:o,scaleInfo:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function y(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return g(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.gradientFill,{uniforms:{visualVariableColor:null,visualVariableOpacity:t.visualVariableOpacity},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function g(e,a,{scaleInfo:i}){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const l=a.spriteRasterizationParam;return[e.createMeshInfo({color:c(a.color)??[0,0,0,0],angle:a.angle,gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:l,scaleInfo:i,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function I(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o,s=e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue};if(e.animationParams){const{hasShiftAnimation:a}=e.animationParams.params,t=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.animatedLine;return p(r.ensureInstance(t,{uniforms:{...s,visualVariableRotation:null},optionalAttributes:{zoomRange:!0,value1Position2Value2:!1,accumulatedDistance:!0,segmentDirection:!0,normal:!0,lineLength:a}}),e,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,i)}const c={uniforms:s,optionalAttributes:{zoomRange:!!i.scaleInfo}},u=!!(s.visualVariableSizeMinMaxValue||s.visualVariableSizeScaleStops||s.visualVariableSizeStops||s.visualVariableSizeUnitValue);if(!e.spriteRasterizationParam){return P(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.line,c),e,u,i)}return R(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.texturedLine,c),e,u,i)}function M(e,a,{scaleInfo:i}){return{color:c(e.color)??[0,0,0,0],width:e.width,referenceWidth:e.referenceWidth,capType:e.cap,joinType:e.join,miterLimit:e.miterLimit,scaleInfo:i,hasSizeVV:a,effects:e.effects?{type:"cim-effect-infos",effectInfos:e.effects}:null}}function P(e,a,i,l){if(a.spriteRasterizationParam)throw new Error("InternalError: Sprite should not be defined");const t=M(a,i,l);return[e.createMeshInfo(t)]}function R(e,a,i,l){const{spriteRasterizationParam:t,scaleDash:n,sampleAlphaOnly:o}=a;if(!t)throw new Error("InternalError: Sprite should be defined");return[e.createMeshInfo({...M(a,i,l),offsetAlongLine:a.offsetAlongLine??0,shouldScaleDash:n??!1,shouldSampleAlphaOnly:o,isSDF:"CIMPictureStroke"!==t.resource.type&&"CIMGradientStroke"!==t.resource.type,sprite:t})]}function k(e,a,i){const{uniforms:t,schemaOptions:o}=a,{store:r}=o;return C(r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.gradientStroke,{uniforms:e.isOutline?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .noVisualVariables */ .Dk,visualVariableSizeScaleStops:t.visualVariableSizeOutlineScaleStops}:{visualVariableColor:null,visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo}}),e,i)}function C(e,a,i){if(!a.spriteRasterizationParam)throw new Error("InternalError: Sprite should always be defined");const l=a.spriteRasterizationParam;return[e.createMeshInfo({...M(a,!1,i),gradientMethod:a.gradientMethod,gradientSize:a.gradientSize,gradientSizeUnits:a.gradientSizeUnits,gradientType:a.gradientType,sprite:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null})]}function A(e,a,i){const{uniforms:t,schemaOptions:n}=a,{store:o}=n;return L(o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_3__/* .Techniques */ .YS.text,{uniforms:{visualVariableColor:e.colorLocked?null:t.visualVariableColor,visualVariableOpacity:t.visualVariableOpacity,visualVariableRotation:t.visualVariableRotation,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!!i.scaleInfo,referenceSymbol:!1,clipAngle:!1,visibility:!1}}),e,t,i)}function L(e,a,i,{scaleInfo:l,scaleExpression:n}){return[e.createMeshInfo({boxBackgroundColor:c(a.backgroundColor),boxBorderLineColor:c(a.borderLineColor),boxBorderLineSize:a.borderLineWidth??0,color:c(a.color)??[0,0,0,0],offsetX:a.offsetX,offsetY:a.offsetY,postAngle:a.angle,fontSize:a.size,referenceSize:a.referenceSize,decoration:a.decoration,haloColor:c(a.haloColor)??[0,0,0,0],haloSize:a.haloSize??0,outlineColor:c(a.outlineColor)??[0,0,0,0],outlineSize:a.outlineSize,lineWidth:a.lineWidth||512,lineHeightRatio:1,horizontalAlignment:a.horizontalAlignment??"center",verticalAlignment:a.verticalAlignment??"baseline",useCIMAngleBehavior:!1,glyphs:a.textRasterizationParam,scaleInfo:l,effects:a.effects?{type:"cim-effect-infos",effectInfos:a.effects}:null,placement:a.markerPlacement,transforms:a.transform,scaleFactor:n??1,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_4__/* .getMaxSizeVVSize */ .j0)(i),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null,labelClassId:-1})]}


/***/ }),

/***/ 54232:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IY: () => (/* binding */ e),
/* harmony export */   N7: () => (/* binding */ a),
/* harmony export */   xi: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63643);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(A){return!!(A.visualVariableSizeMinMaxValue||A.visualVariableSizeScaleStops||A.visualVariableSizeStops||A.visualVariableSizeUnitValue||A.visualVariableSizeOutlineScaleStops)}function a(A){return!!A.visualVariableRotation}function i(e){return e.spriteRasterizationParam?e.spriteRasterizationParam:{type:"sprite-rasterization-param",resource:{type:"CIMPictureMarker",url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAJOgAACToAYJjBRwAAAAsSURBVEhL7c0xAQAwDASh+jf9lcCU7TDA27ECKqACKqACKqACKqACKqDjYPuLVfSmMPfafQAAAABJRU5ErkJggg==",size:16,invertBackfaceTexture:!1,scaleX:1,textureFilter:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureFilter */ .O$.Picture},overrides:[]}}


/***/ }),

/***/ 63838:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ u),
/* harmony export */   e: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89882);
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75228);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const l=8,s=l-2,n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.layers.features.support.rendererUtils");function u(e){return e.map((e=>a(e)?i(e.clone()):e))}function a(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function i(e){return e.stops=b(e.type,e.stops??[]),e}function p(e,o,r){return(1-r)*e+r*o}function c(e,o){const[t,...l]=o,n=l.pop(),u=l[0].value,a=l[l.length-1].value,i=(a-u)/s,c=[];for(let s=u;s<a;s+=i){let t=0;for(;s>=l[t].value;)t++;const n=l[t],u=o[t-1],a=s-u.value,i=n.value===u.value?1:a/(n.value-u.value);if("color"===e){const e=l[t],r=o[t-1],n=e.color.clone();n.r=p(r.color.r,n.r,i),n.g=p(r.color.g,n.g,i),n.b=p(r.color.b,n.b,i),n.a=p(r.color.a,n.a,i),c.push({value:s,color:n,label:e.label})}else if("size"===e){const e=l[t],n=o[t-1],u=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toPt */ .cr)(e.size),a=p((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .toPt */ .cr)(n.size),u,i);c.push({value:s,size:a,label:e.label})}else{const e=l[t],r=p(o[t-1].opacity,e.opacity,i);c.push({value:s,opacity:r,label:e.label})}}return[t,...c,n]}function f(e){const[o,...r]=e,t=r.pop();for(;r.length>s;){let e=0,o=0;for(let t=1;t<r.length;t++){const l=r[t-1],s=r[t],n=Math.abs(s.value-l.value);n>o&&(o=n,e=t)}r.splice(e,1)}return[o,...r,t]}function b(e,o){return o.length<=l?o:(n().warn(`Found ${o.length} Visual Variable stops, but MapView only supports ${l}. Displayed stops will be simplified.`),o.length>2*l?c(e,o):f(o))}function g(){const{supportsColorBufferFloat:e,supportsColorBufferFloatBlend:o,supportsColorBufferHalfFloat:r}=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .C)();return e&&o||r}function m(o){if(!o)return!0;switch(o.type){case"dot-density":break;case"heatmap":if(!g()){const o=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .C)(),r=["supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((e=>!o[e])).join(", ");return n().errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-missing-extension",`Missing WebGL2 requirements for Heatmap: ${r}`)),!1}}return!0}


/***/ }),

/***/ 46934:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony export OverrideBatch */
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40189);
/* harmony import */ var _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92746);
/* harmony import */ var _UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(64496);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(){this.type="override-batch",this.messages=[],this._resovler=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .createResolver */ .Tw)()}get promise(){return this._resovler.promise}resolve(){this._resovler.resolve()}add(e){this.messages.push(e)}}class o{constructor(e){this.updateTracking=new _UpdateTracking2D_js__WEBPACK_IMPORTED_MODULE_2__/* .UpdateTracking2D */ .F({debugName:"FeatureCommandQueue"}),this.process=e.process,this._queueProcessor=new _core_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_1__.QueueProcessor({concurrency:1,process:async e=>{if("override-batch"===e.type){const e=this._nextOverrideBatch;if(null==e)throw new Error("InternalError: Override should be defined");return this._nextOverrideBatch=null,await this.process(e),void e.resolve()}return this.process(e)}})}destroy(){this.updateTracking.destroy(),this._queueProcessor.destroy(),this.clear()}clear(){this._queueProcessor.clear()}async push(r){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ignoreAbortErrors */ .QZ)(this.updateTracking.addPromise(this._doPush(r)))}async _doPush(e){const r=this._queueProcessor,s=r.last();switch(e.type){case"update":case"highlight":if(s?.type===e.type)return;return r.push(e);case"override":case"edit":return this._pushOverride(e)}}_pushOverride(e){return null==this._nextOverrideBatch&&(this._nextOverrideBatch=new i,this._queueProcessor.push(this._nextOverrideBatch)),this._nextOverrideBatch.add(e),this._nextOverrideBatch.promise}}


/***/ }),

/***/ 64496:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(71416);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21564);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4238);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(t){super(t),this.debugName="",this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__/* .UpdatingHandles */ .U,this._idToUpdatingState=new _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("esri-2d-log-updating")){const r=Array.from(this._idToUpdatingState.entries()).map((([t,r])=>`-> ${t}: ${r}`)).join("\n");console.log(`${this.debugName}: Updating: ${t}\n-> Handles: ${this._updatingHandles.updating}\n${r}`)}return t}addUpdateTracking(t,r){const s=(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .watch */ .wB)((()=>r.updating),(r=>this._idToUpdatingState.set(t,r)),{sync:!0});this.addHandles(s)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({readOnly:!0})],d.prototype,"updating",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.views.2d.layers.support.UpdateTracking2D")],d);


/***/ }),

/***/ 7267:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   E: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
async function n(n,r){try{return await n}catch(t){if("no-queryEngine"!==t.name)throw t;return r}}


/***/ }),

/***/ 9049:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17306);
/* harmony import */ var _core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65667);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(6267);
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84410);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(4238);
/* harmony import */ var _support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(38201);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let u=class extends(_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.IdentifiableMixin(_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.EsriPromiseMixin(_core_Evented_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_10__/* .UpdatingHandles */ .U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_12__/* .destroyMaybe */ .pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .validateScaleRange */ .g7)(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return (0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_11__/* .validateScaleRange */ .g7)(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"spatialReferenceSupported",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"suspendInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({type:Boolean,readOnly:!0})],u.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"updatingProgress",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"updateSuspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],u.prototype,"visible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"visibleAtCurrentScale",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],u.prototype,"visibleAtCurrentTimeExtent",null),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__/* .subclass */ .$)("esri.views.layers.LayerView")],u);


/***/ }),

/***/ 51660:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(40189);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85251);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(98849);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const i=i=>{let a=class extends i{initialize(){this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.on)((()=>this.layer),"refresh",(r=>{this.doRefresh(r.dataChanged).catch((r=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isAbortError */ .zf)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger(this).error(r)}))})),"RefreshableLayerView")}};return a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.views.layers.RefreshableLayerView")],a),a};


/***/ }),

/***/ 61226:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
let t=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({readOnly:!0})],t.prototype,"version",null),t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.views.layers.support.ClipArea")],t);


/***/ }),

/***/ 8565:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(84698);
/* harmony import */ var _geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(88266);
/* harmony import */ var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(62802);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1171);
/* harmony import */ var _ClipArea_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(61226);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
var y;const c={base:_geometry_Geometry_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A,key:"type",typeMap:{extent:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,polygon:_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A}};let n=y=class extends _ClipArea_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A{constructor(o){super(o),this.type="geometry",this.geometry=null}clone(){return new y({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)({types:c,json:{read:_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .fromJSON */ .rS,write:!0}})],n.prototype,"geometry",void 0),n=y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.views.layers.support.Geometry")],n);


/***/ }),

/***/ 89423:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony export tracer */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86942);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(16541);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const h=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.webgl.BufferObject"),c=null;class E{static createIndex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER,e,i)}static createVertex(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER,e,i)}static createUniform(t,e,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.UNIFORM_BUFFER,e,i)}static createPixelPack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER,e);return i&&s.setSize(i),s}static createPixelUnpack(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_DRAW,i){return new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_UNPACK_BUFFER,e,i)}static createTransformFeedback(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STATIC_DRAW,i){const s=new E(t,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e);return s.setSize(i),s}constructor(t,e,i,s){this._context=t,this.bufferType=e,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(this._context.gl),s&&this.setData(s)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get usedMemory(){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER){if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)return 4*this._size;if(this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT)return 2*this._size}return this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._context=null}else this._glName&&h().warn("Leaked WebGL buffer object")}setSize(t,e=null){if(this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&null!=e)switch(this._indexType=e,e){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT:t*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT:t*=4}this._setBufferData(t)}setData(t){if(!t)return;let e=t.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint8Array */ .mg)(t)?this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE:(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint16Array */ .jq)(t)?(e/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT):(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__/* .isUint32Array */ .XJ)(t)&&(e/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)),this._setBufferData(e,t)}_setBufferData(t,e=null){this._size=t;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;null!=e?s.bufferData(this.bufferType,e,this.usage):s.bufferData(this.bufferType,t,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(s),this._isVAOAware&&this._context.bindVAO(i)}setSubData(t,e,i,s){if(!t)return;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const{gl:_}=this._context;_.bufferSubData(this.bufferType,e*t.BYTES_PER_ELEMENT,t,i,s-i),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__/* .checkWebGLError */ .Y2)(_),this._isVAOAware&&this._context.bindVAO(r)}getSubData(t,e=0,i,s){if(i<0||s<0)return;const r=o(t)?t.BYTES_PER_ELEMENT:1;if(r*((i??0)+(s??0))>t.byteLength)return;e+r*(s??0)>this.usedMemory&&h().warn("Potential problem getting subdata: requested data exceeds buffer size!");const n=this._context.gl;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER?(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.TRANSFORM_FEEDBACK_BUFFER)):(this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER,e,t,i,s),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER))}async getSubDataAsync(t,e=0,i,s){await this._context.clientWaitAsync(),this.getSubData(t,e,i,s)}}function o(e){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isArrayLike */ .Xj)(e)}


/***/ }),

/***/ 84852:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ R)
/* harmony export */ });
/* unused harmony export ensureAttachmentMaxSize */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6267);
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89423);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(35644);
/* harmony import */ var _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(74416);
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(8595);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const g=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FramebufferObject");class R{constructor(t,e,r){if(this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceType */ .vt.FramebufferObject,this),null!=e){const r=S(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g(t,e);this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)}if(null!=r)if(A(r))this._depthStencilTexture=S(r)?r:new _Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g(t,r),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const e=F(r)?r:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_6__/* .Renderbuffer */ .l(t,r);this._depthStencilBuffer=e,this._validateRenderbufferDescriptor(e.descriptor)}}dispose(){const{_colorAttachments:t,_glName:e}=this;if(0===t.size&&!this._depthStencilBuffer&&!this._depthStencilTexture&&!e)return;const{_context:r}=this,i=r.getBoundFramebufferObject();t.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),r.gl.deleteFramebuffer(e),this._glName=null,r.bindFramebuffer(i===this?null:i),r.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ResourceType */ .vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)??this._depthStencilTexture??this._depthStencilBuffer;return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6)??this._depthStencilTexture??this._depthStencilBuffer;return t?.descriptor?.height??0}get usedMemory(){return[...this._colorAttachments].reduce(((t,[e,r])=>t+r.usedMemory),this.depthStencil?.usedMemory??0)}static{this._MAX_COLOR_ATTACHMENTS=-1}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&S(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6){if(!t)return;this._validateColorAttachmentPoint(e);const{descriptor:r}=t;this._validateTextureDescriptor(r),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6){const e=this._colorAttachments.get(t);if(e)return this._initialized&&this._context.temporaryBindFramebufferObject(this,(()=>{this._framebufferTexture2D(null,t)})),this._colorAttachments.delete(t),e}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=0){const i=this._colorAttachments.get(e);i&&(t===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?this._framebufferTextureLayer(i.glName,e,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,0,r):this._framebufferTexture2D(i.glName,e,t,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,0))}attachDepthStencil(t){if(t)switch(t.type){case _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Texture:return this._attachDepthStencilTexture(t);case _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Renderbuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const{descriptor:e}=t,{pixelFormat:r,dataType:i}=e;r===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_STENCIL||r===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT?r!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_STENCIL||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_INT_24_8?r!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_INT||i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_SHORT?(this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,O(r))),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t):console.error("Depth texture must have data type of UNSIGNED_INT or UNSIGNED_SHORT!"):console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"):console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!")}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&this._context.temporaryBindFramebufferObject(this,(()=>{this._framebufferTexture2D(null,O(t.descriptor.pixelFormat))})),this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderbufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const{gl:r}=this._context,i=this._getGLAttachmentPoint(e);r.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,i,r.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){const{_context:e}=this,r=e.getBoundFramebufferObject();e.bindFramebuffer(this);const{gl:i}=e,s=this._getGLAttachmentPoint(t.descriptor);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,s,i.RENDERBUFFER,null),e.bindFramebuffer(r)}return this._depthStencilBuffer=null,t}invalidateAttachments(t){const{_context:e}=this;e.temporaryBindFramebufferObject(this,(()=>e.gl.invalidateFramebuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,t)),!0)}copyToTexture(t,e,r,i,s,n,o){(t<0||e<0||s<0||n<0)&&console.error("Offsets cannot be negative!"),(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!");const c=o.descriptor;o.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==c?.width||null==c?.height||t+r>this.width||e+i>this.height||s+r>c.width||n+i>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const a=this._context,u=a.bindTexture(o,_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES);a.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES),a.bindFramebuffer(this),a.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D,0,s,n,t,e,r,i),a.bindTexture(u,_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,r,i,s,n,h){(r<=0||i<=0)&&console.error("Copy width and height must be greater than zero!"),h||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,r,i,s,n,h)}async readPixelsAsync(t,e,i,s,n,h,o){const{gl:c}=this._context,a=_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__/* .BufferObject */ .g.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STREAM_READ,o.byteLength);this._context.bindBuffer(a);const l=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),c.readPixels(t,e,i,s,n,h,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER),this._context.bindFramebuffer(l),await a.getSubDataAsync(o),a.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const r={width:t,height:e};B(r,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(r.width,r.height))),this._depthStencilTexture?.resize(r.width,r.height),this._initialized&&(B(r,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(r.width,r.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER){const{gl:e}=this._context;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const r=e.createFramebuffer();if(e.bindFramebuffer(t,r),this._colorAttachments.forEach(((e,r)=>{const i=U(e);i===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?this._framebufferTextureLayer(e.glName,r,t,0,0):this._framebufferTexture2D(e.glName,r,i,t)})),this._depthStencilBuffer){const r=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,r,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else if(this._depthStencilTexture){const e=O(this._depthStencilTexture.descriptor.pixelFormat);this._framebufferTexture2D(this._depthStencilTexture.glName,e,U(this._depthStencilTexture),t)}if((0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!")}this._glName=r,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D,i=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(i,e,r,t,s)}_framebufferTextureLayer(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6,r=_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,i=0,s=0){this._context.gl.framebufferTextureLayer(r,e,t,i,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .FramebufferTarget */ .R.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .disposeMaybe */ .WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,O(this._depthStencilTexture.descriptor.pixelFormat))),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .disposeMaybe */ .WD)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY&&console.error("Texture type must be TEXTURE_2D, TEXTURE_2D_ARRAY or TEXTURE_CUBE_MAP!"),B(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderbufferDescriptor(t){B(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthFormat */ .SB.DEPTH_COMPONENT32F:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthAttachment */ .xL;case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthStencilFormat */ .iE.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedDepthStencilFormat */ .iE.DEPTH32F_STENCIL8:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthStencilAttachment */ .nI;case _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .SizedStencilFormat */ .Xo.STENCIL_INDEX8:return _enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilAttachment */ .uH}}_validateColorAttachmentPoint(e){if(-1===R._MAX_COLOR_ATTACHMENTS){const{gl:t}=this._context;R._MAX_COLOR_ATTACHMENTS=t.getParameter(t.MAX_COLOR_ATTACHMENTS)}const r=e-_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .ColorAttachment0 */ .r6;r+1>R._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${r+1}. Implementation supports up to ${R._MAX_COLOR_ATTACHMENTS} color attachments`)}}function S(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Texture}function F(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.Renderbuffer}function A(t){return S(t)||D(t)}function D(t){return N(t)===_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_5__/* .FBOAttachmentType */ .d.TextureDescriptor}function N(t){return null!=t&&"type"in t?t.type:null}function B(t,e){const r=Math.max(t.width,t.height);if(r>e){g().warnOnce(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const i=e/r;return t.width=Math.round(t.width*i),t.height=Math.round(t.height*i),!1}return!0}function U(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP_POSITIVE_X:t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D_ARRAY:_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .TextureType */ .Ap.TEXTURE_2D}function O(t){return t===_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .UnsizedDepthFormat */ .j7.DEPTH_COMPONENT?_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthAttachment */ .xL:_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DepthStencilAttachment */ .nI}


/***/ }),

/***/ 68449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  B: () => (/* binding */ Program_a)
});

// UNUSED EXPORTS: test

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/webgl/reservedWordsGLSL3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const e=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"];

;// ../node_modules/@arcgis/core/views/webgl/testUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const testUtils_e={enableCache:!1};

;// ../node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const a=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","uvec2","uvec3","uvec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","usampler1D","usampler2D","usampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],o=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],n=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT","textureSize","texelFetch"];var i=999,l=9999,s=0,c=1,u=2,d=3,g=4,p=5,f=6,_=7,h=8,x=9,m=10,y=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function M(){var e,t,r,M=0,v=0,T=i,b=[],P=[],E=1,C=0,D=0,k=!1,j=!1,F="";return function(e){return P=[],null!==e?S(e.replace?e.replace(/\r\n/g,"\n"):e):R()};function L(e){e.length&&P.push({type:w[T],data:e,position:D,line:E,column:C})}function S(t){var a;for(M=0,r=(F+=t).length;e=F[M],M<r;){switch(a=M,T){case s:M=I();break;case c:M=G();break;case u:M=A();break;case d:M=O();break;case g:M=B();break;case y:M=q();break;case p:M=H();break;case l:M=N();break;case x:M=X();break;case i:M=V()}if(a!==M)if("\n"===F[a])C=0,++E;else++C}return v+=M,F=F.slice(M),P}function R(e){return b.length&&L(b.join("")),T=m,L("(eof)"),P}function V(){return b=b.length?[]:b,"/"===t&&"*"===e?(D=v+M-1,T=s,t=e,M+1):"/"===t&&"/"===e?(D=v+M-1,T=c,t=e,M+1):"#"===e?(T=u,D=v+M,M):/\s/.test(e)?(T=x,D=v+M,M):(k=/\d/.test(e),j=/[^\w_]/.test(e),D=v+M,T=k?g:j?d:l,M)}function X(){return/[^\s]/g.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function A(){return"\r"!==e&&"\n"!==e||"\\"===t?(b.push(e),t=e,M+1):(L(b.join("")),T=i,M)}function G(){return A()}function I(){return"/"===e&&"*"===t?(b.push(e),L(b.join("")),T=i,M+1):(b.push(e),t=e,M+1)}function O(){if("."===t&&/\d/.test(e))return T=p,M;if("/"===t&&"*"===e)return T=s,M;if("/"===t&&"/"===e)return T=c,M;if("."===e&&b.length){for(;U(b););return T=p,M}if(";"===e||")"===e||"("===e){if(b.length)for(;U(b););return L(e),T=i,M+1}var r=2===b.length&&"="!==e;if(/[\w_\d\s]/.test(e)||r){for(;U(b););return T=i,M}return b.push(e),t=e,M+1}function U(e){for(var t,r,a=0;;){if(t=o.indexOf(e.slice(0,e.length+a).join("")),r=o[t],-1===t){if(a--+e.length>0)continue;r=e.slice(0,1).join("")}return L(r),D+=r.length,(b=b.slice(r.length)).length}}function q(){return/[^a-fA-F0-9]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function B(){return"."===e||/[eE]/.test(e)?(b.push(e),T=p,t=e,M+1):"x"===e&&1===b.length&&"0"===b[0]?(T=y,b.push(e),t=e,M+1):/[^\d]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function H(){return"f"===e&&(b.push(e),t=e,M+=1),/[eE]/.test(e)||"-"===e&&/[eE]/.test(t)?(b.push(e),t=e,M+1):/[^\d]/.test(e)?(L(b.join("")),T=i,M):(b.push(e),t=e,M+1)}function N(){if(/[^\d\w_]/.test(e)){var r=b.join("");return T=a.indexOf(r)>-1?h:n.indexOf(r)>-1?_:f,L(b.join("")),T=i,M}return b.push(e),t=e,M+1}}function v(e){var t=M(),r=[];return r=(r=r.concat(t(e))).concat(t(null))}function T(e){return v(e)}function b(e){return e.map((e=>"eof"!==e.type?e.data:"")).join("")}const P=new Set(["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"]);function E(e,t="100",r="300 es"){const a=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const o of e)if("preprocessor"===o.type){const e=a.exec(o.data);if(e){const a=e[1].replaceAll(/\s{2,}/g," ");if(a===r)return a;if(a===t)return o.data="#version "+r,t;throw new Error("unknown glsl version: "+a)}}return e.splice(0,0,{type:"preprocessor",data:"#version "+r},{type:"whitespace",data:"\n"}),null}function C(e,t){for(let r=t-1;r>=0;r--){const t=e[r];if("whitespace"!==t.type&&"block-comment"!==t.type){if("keyword"!==t.type)break;if("attribute"===t.data||"in"===t.data)return!0}}return!1}function D(e,t,r,a){a=a||r;for(const o of e)if("ident"===o.type&&o.data===r){a in t?t[a]++:t[a]=0;return D(e,t,a+"_"+t[a],a)}return r}function k(e,t,r="afterVersion"){function a(e,t){for(let r=t;r<e.length;r++){const t=e[r];if("operator"===t.type&&";"===t.data)return r}return null}function o(e){let t=-1,o=0,n=-1;for(let i=0;i<e.length;i++){const l=e[i];if("preprocessor"===l.type&&(/#(if|ifdef|ifndef)\s+.+/.test(l.data)?++o:/#endif\s*.*/.test(l.data)&&--o),"afterVersion"!==r&&"afterPrecision"!==r||"preprocessor"===l.type&&l.data.startsWith("#version")&&(n=Math.max(n,i)),"afterPrecision"===r&&"keyword"===l.type&&"precision"===l.data){const t=a(e,i);if(null===t)throw new Error("precision statement not followed by any semicolons!");n=Math.max(n,t)}t<n&&0===o&&(t=i)}return t+1}const n={data:"\n",type:"whitespace"},i=t=>t<e.length&&/[^\r\n]$/.test(e[t].data);let l=o(e);i(l-1)&&e.splice(l++,0,n);for(const s of t)e.splice(l++,0,s);i(l-1)&&i(l)&&e.splice(l,0,n)}function j(e,t,r,a="lowp"){k(e,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:a},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function F(e,t,r,a,o="lowp"){k(e,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:a.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:o},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"ident",data:t},{type:"operator",data:";"}],"afterPrecision")}function L(e,t){let r,a,o=-1;for(let n=t;n<e.length;n++){const t=e[n];if("operator"===t.type&&("["===t.data&&(r=n),"]"===t.data)){a=n;break}"integer"===t.type&&(o=parseInt(t.data,10))}return r&&a&&e.splice(r,a-r+1),o}function S(r,a){if(r.startsWith("#version 300"))return r;const o=V(r);if(null!=o)return o;const n=T(r);if("300 es"===E(n,"100","300 es"))return r;let i=null,l=null;const s={},c={};for(let u=0;u<n.length;++u){const r=n[u];switch(r.type){case"keyword":a===enums/* ShaderType */.Co.VERTEX_SHADER&&"attribute"===r.data?r.data="in":"varying"===r.data&&(r.data=a===enums/* ShaderType */.Co.VERTEX_SHADER?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(r.data.trim())&&(r.data=r.data.replaceAll(/(2D|Cube|EXT)/g,"")),a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragColor"===r.data&&(i||(i=D(n,s,"fragColor"),j(n,i,"vec4")),r.data=i),a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragData"===r.data){const e=L(n,u+1),t=D(n,s,"fragData");F(n,t,"vec4",e,"mediump"),r.data=t}else a===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragDepthEXT"===r.data&&(l||(l=D(n,s,"gl_FragDepth")),r.data=l);break;case"ident":if(e.includes(r.data)){if(a===enums/* ShaderType */.Co.VERTEX_SHADER&&C(n,u))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");r.data in c||(c[r.data]=D(n,s,r.data)),r.data=c[r.data]}}}for(let e=n.length-1;e>=0;--e){const t=n[e];if("preprocessor"===t.type){const r=t.data.match(/#extension\s+(.*):/);if(r?.[1]&&P.has(r[1].trim())){const t=n[e+1];n.splice(e,t&&"whitespace"===t.type?2:1)}const a=t.data.match(/#ifdef\s+(.*)/);a?.[1]&&P.has(a[1].trim())&&(t.data="#if 1");const o=t.data.match(/#ifndef\s+(.*)/);o?.[1]&&P.has(o[1].trim())&&(t.data="#if 0")}}return X(r,b(n))}const R=new Map;function V(e){return testUtils_e.enableCache?R.get(e):null}function X(e,t){return testUtils_e.enableCache&&R.set(e,t),t}

;// ../node_modules/@arcgis/core/views/webgl/Program.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const Program_s=4294967295;class Program_a{constructor(e,n,a,m,f=new Map,c=[]){this._context=e,this._locations=m,this._uniformBlockBindings=f,this._transformFeedbackVaryings=c,this._refCount=1,this._compiled=!1,this._linesOfCode=0,this._nameToUniformLocation=new Map,this._nameToUniform1=new Map,this._nameToUniform1v=new Map,this._nameToUniform2=new Map,this._nameToUniform3=new Map,this._nameToUniform4=new Map,this._nameToUniformMatrix3=new Map,this._nameToUniformMatrix4=new Map,e||console.error("RenderingContext isn't initialized!"),0===n.length&&console.error("Shaders source should not be empty!"),n=S(n,enums/* ShaderType */.Co.VERTEX_SHADER),a=S(a,enums/* ShaderType */.Co.FRAGMENT_SHADER),this._vShader=Program_h(this._context,enums/* ShaderType */.Co.VERTEX_SHADER,n),this._fShader=Program_h(this._context,enums/* ShaderType */.Co.FRAGMENT_SHADER,a),Program_.enabled&&(this._linesOfCode=n.match(/\n/g).length+a.match(/\n/g).length+2,this._context.instanceCounter.increment(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode)),this._vShader&&this._fShader||console.error("Error loading shaders!"),this._context.instanceCounter.increment(enums/* ResourceType */.vt.Shader,this),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&(this.vertexShader=n,this.fragmentShader=a),this.usedMemory=n.length+a.length;const l=this._context.gl,g=l.createProgram();l.attachShader(g,this._vShader),l.attachShader(g,this._fShader),this._locations.forEach(((t,e)=>l.bindAttribLocation(g,t,e))),this._transformFeedbackVaryings?.length&&l.transformFeedbackVaryings(g,this._transformFeedbackVaryings,l.SEPARATE_ATTRIBS),l.linkProgram(g),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!l.getProgramParameter(g,l.LINK_STATUS)&&console.error(`Could not link shader\nvalidated: ${l.getProgramParameter(g,l.VALIDATE_STATUS)}, gl error ${l.getError()}, vertex: ${l.getShaderParameter(this._vShader,l.COMPILE_STATUS)}, fragment: ${l.getShaderParameter(this._fShader,l.COMPILE_STATUS)}, info log: ${l.getProgramInfoLog(g)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`);for(const[t,o]of this._uniformBlockBindings){const e=l.getUniformBlockIndex(g,t);e<Program_s&&l.uniformBlockBinding(g,e,o)}this._glName=g,this._context.instanceCounter.increment(enums/* ResourceType */.vt.Program,this)}get glName(){return this._glName}get hasGLName(){return null!=this._glName}get hasTransformFeedbackVaryings(){return!!this._transformFeedbackVaryings?.length}get compiled(){return!!this._compiled||(this._context.capabilities.parallelShaderCompile&&null!=this.glName?(this._compiled=!!this._context.gl.getProgramParameter(this.glName,enums/* Extension */.YY.COMPLETION_STATUS_KHR),this._compiled):(this._compiled=!0,!0))}dispose(){if(--this._refCount>0)return;const t=this._context.gl,e=this._context.instanceCounter;this._nameToUniformLocation.forEach((t=>t&&e.decrement(enums/* ResourceType */.vt.Uniform,t))),this._nameToUniformLocation.clear(),this._vShader&&(this._linesOfCode>0&&(e.decrement(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),t.deleteShader(this._vShader),this._vShader=null,e.decrement(enums/* ResourceType */.vt.Shader,this)),this._fShader&&(t.deleteShader(this._fShader),this._fShader=null),this._glName&&(t.deleteProgram(this._glName),this._glName=null,e.decrement(enums/* ResourceType */.vt.Program,this))}ref(){++this._refCount}_getUniformLocation(t){const e=this._nameToUniformLocation.get(t);if(void 0!==e)return e;if(this.glName){const e=this._context.gl.getUniformLocation(this.glName,t);return this._nameToUniformLocation.set(t,e),e&&this._context.instanceCounter.increment(enums/* ResourceType */.vt.Uniform,e),e}return null}hasUniform(t){return null!=this._getUniformLocation(t)}setUniform1i(t,e){Program_l(e);const o=this._nameToUniform1.get(t);void 0!==o&&e===o||(this._context.gl.uniform1i(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1iv(t,e){Program_g(e),Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1iv(this._getUniformLocation(t),e)}setUniform2iv(t,e){Program_g(e),Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2iv(this._getUniformLocation(t),e)}setUniform3iv(t,e){Program_g(e),Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3iv(this._getUniformLocation(t),e)}setUniform4iv(t,e){Program_g(e),Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4iv(this._getUniformLocation(t),e)}setUniform1f(t,e){Program_l(e);const o=this._nameToUniform1.get(t);void 0!==o&&e===o||(this._context.gl.uniform1f(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1fv(t,e){Program_g(e),Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1fv(this._getUniformLocation(t),e)}setUniform2f(t,e,o){Program_l(e,o);const i=this._nameToUniform2.get(t);void 0===i?(this._context.gl.uniform2f(this._getUniformLocation(t),e,o),this._nameToUniform2.set(t,[e,o])):e===i[0]&&o===i[1]||(this._context.gl.uniform2f(this._getUniformLocation(t),e,o),i[0]=e,i[1]=o)}setUniform2fv(t,e){Program_g(e),Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2fv(this._getUniformLocation(t),e)}setUniform3f(t,e,o,i){Program_l(e,o,i);const n=this._nameToUniform3.get(t);void 0===n?(this._context.gl.uniform3f(this._getUniformLocation(t),e,o,i),this._nameToUniform3.set(t,[e,o,i])):e===n[0]&&o===n[1]&&i===n[2]||(this._context.gl.uniform3f(this._getUniformLocation(t),e,o,i),n[0]=e,n[1]=o,n[2]=i)}setUniform3fv(t,e){Program_g(e);const o=this._getUniformLocation(t);null!=o&&Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3fv(o,e)}setUniform4f(t,e,o,i,n){Program_l(e,o,i,n);const r=this._nameToUniform4.get(t);void 0===r?(this._context.gl.uniform4f(this._getUniformLocation(t),e,o,i,n),this._nameToUniform4.set(t,[e,o,i,n])):void 0!==r&&e===r[0]&&o===r[1]&&i===r[2]&&n===r[3]||(this._context.gl.uniform4f(this._getUniformLocation(t),e,o,i,n),r[0]=e,r[1]=o,r[2]=i,r[3]=n)}setUniform4fv(t,e){Program_g(e);const o=this._getUniformLocation(t);null!=o&&Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4fv(o,e)}setUniformMatrix3fv(t,e,o=!1){Program_g(e);const i=this._getUniformLocation(t);null!=i&&Program_c(this._nameToUniformMatrix3,t,e)&&this._context.gl.uniformMatrix3fv(i,o,e)}setUniformMatrix4fv(t,e,o=!1){Program_g(e);const i=this._getUniformLocation(t);null!=i&&Program_c(this._nameToUniformMatrix4,t,e)&&this._context.gl.uniformMatrix4fv(i,o,e)}stop(){}}function Program_h(e,i,n){const r=e.gl,s=r.createShader(i);return r.shaderSource(s,n),r.compileShader(s),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!r.getShaderParameter(s,r.COMPILE_STATUS)&&(console.error("Compile error in ".concat(i===enums/* ShaderType */.Co.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(r.getShaderInfoLog(s)),console.error(Program_m(n))),s}function Program_m(t){let e=2;return t.replaceAll("\n",(()=>"\n"+Program_f(e++)+":"))}function Program_f(t){return t>=1e3?t.toString():("  "+t).slice(-3)}function Program_c(t,e,o){const i=t.get(e);if(!i)return t.set(e,Array.from(o)),!0;const n=o.length;if(i.length!==n)return t.set(e,Array.from(o)),!0;for(let r=0;r<n;++r){const t=o[r];if(i[r]!==t){for(i[r]=t;r<n;++r)i[r]=o[r];return!0}}return!1}const Program_={enabled:!1},Program_l=(0,checkWebGLError/* webglDebugEnabled */.en)()?(...t)=>Program_g(t):()=>{},Program_g=(0,checkWebGLError/* webglDebugEnabled */.en)()?t=>{const e=t.length;for(let o=0;o<e;++o){const e=t[o];Number.isNaN(e)&&console.error(`Got ${e} as uniform value from ${(new Error).stack}`)}}:()=>{};


/***/ }),

/***/ 50122:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Program_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function e(e,t,a=""){return new _Program_js__WEBPACK_IMPORTED_MODULE_0__/* .Program */ .B(e,a+t.shaders.vertexShader,a+t.shaders.fragmentShader,t.attributes)}


/***/ }),

/***/ 74416:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(35644);
/* harmony import */ var _RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17050);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class s{constructor(r,s){this._context=r,this._descriptor=s,this.type=_FBOAttachmentType_js__WEBPACK_IMPORTED_MODULE_1__/* .FBOAttachmentType */ .d.Renderbuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceType */ .vt.Renderbuffer,this);const i=this._context.gl;this.glName=i.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:n,height:o,internalFormat:h,multisampled:d}=s;d?i.renderbufferStorageMultisample(i.RENDERBUFFER,this.samples,h,n,o):i.renderbufferStorage(i.RENDERBUFFER,h,n,o),this._context.bindRenderbuffer(null)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get usedMemory(){return (0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_2__/* .estimateMemory */ .e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;this._context.bindRenderbuffer(this),r.multisampled?s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height):s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height),this._context.bindRenderbuffer(null)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .ResourceType */ .vt.Renderbuffer,this),this._context=null)}}


/***/ }),

/***/ 17050:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ h),
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class i{constructor(t,i=0,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__/* .getBytesPerElementFormat */ .IB)(i.internalFormat)}


/***/ }),

/***/ 96028:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N5: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports Code, Includes, Main, Stage, Uniforms */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _BindType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(11809);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class s{constructor(){this._includedModules=new Map}include(e,t){this._includedModules.has(e)?this._includedModules.get(e):(this._includedModules.set(e,t),e(this.builder,t))}}class i extends s{constructor(){super(...arguments),this.vertex=new c,this.fragment=new c,this.attributes=new h,this.varyings=new m,this.extensions=new _,this.outputs=new d}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(e,t=!1){const r=this.extensions.generateSource(e),n=this.attributes.generateSource(e),s=this.varyings.generateSource(e),i="vertex"===e?this.vertex:this.fragment,o=i.uniforms.generateSource(),a=i.code.generateSource(),u=i.main.generateSource(t),c="vertex"===e?g:p,h=i.constants.generateSource(),m=this.outputs.generateSource(e);return`#version 300 es\n${r.join("\n")}\n${c}\n${h.join("\n")}\n${o.join("\n")}\n${n.join("\n")}\n${s.join("\n")}\n${m.join("\n")}\n${a.join("\n")}\n${u.join("\n")}`}generateBind(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Bind];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return t=>{for(let r=0;r<s;++r)n[r](e,t)}}generateBindPass(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Pass];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r)=>{for(let i=0;i<s;++i)n[i](e,t,r)}}generateBindDraw(e){const t=new Map;this.vertex.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)})),this.fragment.uniforms.entries.forEach((e=>{const n=e.bind[_BindType_js__WEBPACK_IMPORTED_MODULE_3__/* .BindType */ .c.Draw];n&&t.set(e.name,n)}));const n=Array.from(t.values()),s=n.length;return(t,r,i)=>{for(let o=0;o<s;++o)n[o](e,i,t,r)}}}class o{constructor(e){this._stage=e,this._entries=new Map}add(...e){for(const t of e)this._add(t);return this._stage}get(e){return this._entries.get(e)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:duplicate-uniform",`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else n().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((({name:e,arraySize:t,type:r})=>null!=t?`uniform ${r} ${e}[${t}];`:`uniform ${r} ${e};`))}get entries(){return Array.from(this._entries.values())}}class a{constructor(e){this._stage=e,this._bodies=new Array}add(e){return this._bodies.push(e),this._stage}generateSource(t){if(this._bodies.length>0)return[`void main() {\n ${this._bodies.join("\n")||""} \n}`];if(t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("shaderbuilder:missing-main","Shader does not contain main function body.");return[]}}class u{constructor(e){this._stage=e,this._entries=new Array}add(e){return this._entries.push(e),this._stage}generateSource(){return this._entries}}class c extends s{constructor(){super(...arguments),this.uniforms=new o(this),this.main=new a(this),this.code=new u(this),this.constants=new l(this)}get builder(){return this}}class h{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`in ${e[1]} ${e[0]};`))}}class m{constructor(){this._entries=new Map}add(e,t,r){this._entries.has(e)?n().warn(`Ignoring duplicate varying ${t} ${e}`):this._entries.set(e,{type:t,invariant:r?.invariant??!1})}generateSource(e){const t=new Array;return this._entries.forEach(((r,n)=>t.push((r.invariant&&"vertex"===e?"invariant ":"")+("vertex"===e?"out":"in")+` ${r.type} ${n};`))),t}}class _{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?_.ALLOWLIST_VERTEX:_.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}static{this.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"]}static{this.ALLOWLIST_VERTEX=[]}}class d{constructor(){this._entries=new Map}add(e,t,r=0){const s=this._entries.get(r);s?.name!==e||s?.type!==t?this._entries.set(r,{name:e,type:t}):n().warn(`Fragment shader output location ${r} occupied`)}static{this.DEFAULT_TYPE="vec4"}static{this.DEFAULT_NAME="fragColor"}generateSource(e){if("vertex"===e)return[];0===this._entries.size&&this._entries.set(0,{name:d.DEFAULT_NAME,type:d.DEFAULT_TYPE});const t=new Array;return this._entries.forEach(((e,r)=>t.push(`layout(location = ${r}) out ${e.type} ${e.name};`))),t}}class l{constructor(e){this._stage=e,this._entries=new Set}add(e,t,r){let n="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":n=l._numberToFloatStr(r);break;case"int":n=l._numberToIntStr(r);break;case"bool":n=r.toString();break;case"vec2":n=`vec2(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])})`;break;case"vec3":n=`vec3(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])})`;break;case"vec4":n=`vec4(${l._numberToFloatStr(r[0])},                            ${l._numberToFloatStr(r[1])},                            ${l._numberToFloatStr(r[2])},                            ${l._numberToFloatStr(r[3])})`;break;case"ivec2":n=`ivec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"ivec3":n=`ivec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"ivec4":n=`ivec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"uvec2":n=`uvec2(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])})`;break;case"uvec3":n=`uvec3(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])})`;break;case"uvec4":n=`uvec4(${l._numberToIntStr(r[0])},                             ${l._numberToIntStr(r[1])},                             ${l._numberToIntStr(r[2])},                             ${l._numberToIntStr(r[3])})`;break;case"mat2":case"mat3":case"mat4":n=`${t}(${Array.prototype.map.call(r,(e=>l._numberToFloatStr(e))).join(", ")})`}return this._entries.add(`const ${t} ${e} = ${n};`),this._stage}static _numberToIntStr(e){return e.toFixed(0)}static _numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const p="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp int;\n  precision highp sampler2D;\n  precision highp usampler2D;\n  precision highp sampler2DArray;\n  precision highp sampler2DShadow;\n#else\n  precision mediump float;\n  precision mediump int;\n  precision mediump sampler2D;\n  precision mediump usampler2D;\n  precision mediump sampler2DArray;\n  precision mediump sampler2DShadow;\n#endif",g="precision highp float;\n precision highp sampler2D;\n precision highp usampler2D;\n precision highp sampler2DArray;\n precision highp sampler2DShadow;\n\n\n invariant gl_Position;\n ";


/***/ }),

/***/ 29638:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
class e{constructor(e){this._readFile=e}resolveIncludes(e){return this._resolve(e)}_resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this._read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h="";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?"":this._resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}_read(e){return this._readFile(e)}}


/***/ }),

/***/ 80976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4754);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
const n=()=>_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.webgl.VertexArrayObject");let o=class{constructor(e,t,i,r,s=null){this._context=e,this._locations=t,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}getByteLength(e){return this._buffers.get(e)?.usedMemory??0}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return Array.from(this._buffers.values()).reduce(((e,t)=>e+t.usedMemory),this._indexBuffer?.usedMemory??0+(this._buffers.size+(this._indexBuffer?1:0))*_core_memoryEstimations_js__WEBPACK_IMPORTED_MODULE_1__/* .baseTypedArrayMemory */ .i5)}get cachedMemory(){return this.usedMemory}dispose(){this._context?(this._context.getBoundVAO()===this&&this._context.bindVAO(null),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .disposeMaybe */ .WD)(this._indexBuffer),this.disposeVAOOnly()):(this._glName||this._buffers.size>0)&&n().warn("Leaked WebGL VAO")}disposeVAOOnly(){this._glName&&(this._context.gl.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)),this._context=null}initialize(){if(this._initialized)return;const{gl:e}=this._context,t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this),this._initialized=!0}bind(){this.initialize(),this._context.gl.bindVertexArray(this.glName)}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||n().error("Vertex buffer dictionary is empty!");const r=this._context.gl;this._buffers.forEach(((e,i)=>{const r=t.get(i);r?(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .bindVertexBufferLayout */ .yu)(this._context,this._locations,e,r):n().error("Vertex element descriptor is empty!")})),null!=i&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName)}unbind(){this.initialize(),this._context.gl.bindVertexArray(null)}};


/***/ })

};
;