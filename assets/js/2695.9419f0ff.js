"use strict";
exports.id = 2695;
exports.ids = [2695,1879];
exports.modules = {

/***/ 98918:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   lY: () => (/* binding */ m),
/* harmony export */   mT: () => (/* binding */ h)
/* harmony export */ });
/* unused harmony exports ArcadeDateError, ArcadeDateErrorCodes, ArcadeDateErrorMessages */
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/* harmony import */ var _core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(90709);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(34495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var o;!function(e){e.TimeZoneNotRecognized="TimeZoneNotRecognized"}(o||(o={}));const a={[o.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."};class d extends Error{constructor(t,n){super((0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .replace */ .HC)(a[t],n)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,d)}}function u(e,t,n){return e<t?e-t:e>n?e-n:0}function c(e,t,n){return e<t?t:e>n?n:e}class m{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,t=1,r=1,s=0,i=0,o=0,a=0,d){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(s)||isNaN(i)||isNaN(o)||isNaN(a))return null;const l=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.local(e,t).daysInMonth;let f=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromObject({day:c(r,1,l),year:e,month:c(t,1,12),hour:c(s,0,23),minute:c(i,0,59),second:c(o,0,59),millisecond:c(a,0,999)},{zone:h(d)});return f=f.plus({months:u(t,1,12),days:u(r,1,l),hours:u(s,0,23),minutes:u(i,0,59),seconds:u(o,0,59),milliseconds:u(a,0,999)}),new m(f)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,n){const r=h(n);return e.isUnknownTimeZone||r===_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance?m.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new m(e._date.setZone(r))}static dateJSToArcadeDate(e){return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,t="system"){const r=h(t);return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromMillis(e,{zone:_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance}))}static unknownDateJSToArcadeDate(e){return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromMillis(e.getTime(),{zone:_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance}))}static epochToArcadeDate(e,t="system"){const r=h(t);return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new m(e)}clone(){return new m(this._date)}changeTimeZone(e){const t=h(e);return m.dateTimeToArcadeDate(this._date.setZone(t))}static dateTimeAndZoneToArcadeDate(e,n){const r=h(n);return e.zone===_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance||r===_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance?m.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new m(e.setZone(r))}static nowToArcadeDate(e){const t=h(e);return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromJSDate(new Date,{zone:t}))}static nowUTCToArcadeDate(){return new m(luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===m.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const e=this.zone;return"fixed"===e.type?0===e.fixed?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new m(this._date.plus(e))}diff(e,t="milliseconds"){return this._date.diff(e._date,t)[t]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,t){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:t&&!this.isUnknownTimeZone})}toFormat(e,t){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,t)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new m(this._date.toUTC())}toLocal(){return new m(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;const t=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromISO(e,{setZone:!0});return new m(t)}}function h(e,n=!0){if(e instanceof luxon__WEBPACK_IMPORTED_MODULE_2__/* .Zone */ .bo)return e;if("system"===e.toLowerCase())return"system";if("utc"===e.toLowerCase())return"UTC";if("unknown"===e.toLowerCase())return _core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_1__/* .UnknownTimeZone */ .GB.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(e)){const t=luxon__WEBPACK_IMPORTED_MODULE_2__/* .FixedOffsetZone */ .mQ.parseSpecifier("UTC"+(e.startsWith("+")||e.startsWith("-")?"":"+")+e);if(t)return t}const a=luxon__WEBPACK_IMPORTED_MODULE_2__/* .IANAZone */ .oh.create(e);if(!a.isValid){if(n)throw new d(o.TimeZoneNotRecognized);return null}return a}


/***/ }),

/***/ 47303:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fq: () => (/* binding */ n),
/* harmony export */   SQ: () => (/* binding */ a),
/* harmony export */   Yc: () => (/* binding */ s),
/* harmony export */   Yq: () => (/* binding */ c),
/* harmony export */   uf: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony export sameGeomType */
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(84698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(e){if(null==e)return null;if("number"==typeof e)return e;let r=e.toLowerCase();switch(r=r.replaceAll(/\s/g,""),r=r.replaceAll("-",""),r){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":return 109439;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 109405;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 109409}return null}function s(r){if(null==r)return null;switch(r.type){case"polygon":case"multipoint":case"polyline":return r.extent;case"point":return new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference});case"extent":return r}return null}function a(e){if(null==e)return null;if("number"==typeof e)return e;let r=e.toLowerCase();switch(r=r.replaceAll(/\s/g,""),r=r.replaceAll("-",""),r){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":return 9093;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"squarefeet":case"squarefoot":return 9002;case"nmi":case"nauticalmile":case"nauticalmiles":case"squarenauticalmile":case"squarenauticalmiles":return 9030}return null}function t(e,r){return e===r||("point"===e&&"esriGeometryPoint"===r||("polyline"===e&&"esriGeometryPolyline"===r||("polygon"===e&&"esriGeometryPolygon"===r||("extent"===e&&"esriGeometryEnvelope"===r||("multipoint"===e&&"esriGeometryMultipoint"===r||("point"===r&&"esriGeometryPoint"===e||("polyline"===r&&"esriGeometryPolyline"===e||("polygon"===r&&"esriGeometryPolygon"===e||("extent"===r&&"esriGeometryEnvelope"===e||"multipoint"===r&&"esriGeometryMultipoint"===e)))))))))}function c(e){if(null==e)return null;const r=e.clone();return void 0!==e.cache._geVersion&&(r.cache._geVersion=e.cache._geVersion),r}function n(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}


/***/ }),

/***/ 30860:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ n),
/* harmony export */   l: () => (/* binding */ o),
/* harmony export */   o: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(42784);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var r,t={exports:{}};t.exports,void 0!==(r=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"])&&(t.exports=r);const o=(0,_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__.g)(t.exports);var l,a={exports:{}};a.exports,l=a,function(e){var r=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"];void 0!==r&&(l.exports=r)}();const g=(0,_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__.g)(a.exports);var i={exports:{}};i.exports,function(e){!function(r){var t=function(){return["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT","textureSize","texelFetch"]}();void 0!==t&&(e.exports=t)}()}(i);const n=(0,_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__.g)(i.exports);


/***/ }),

/***/ 16528:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(42784);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n,t,r,x={exports:{}};x.exports,n=x,t=function(){function e(e,t,x){x=x||2;var i,u,v,o,y,p,a,l=t&&t.length,h=l?t[0]*x:e.length,s=n(e,0,h,x,!0),c=[];if(!s||s.next===s.prev)return c;if(l&&(s=f(e,t,s,x)),e.length>80*x){i=v=e[0],u=o=e[1];for(var Z=x;Z<h;Z+=x)(y=e[Z])<i&&(i=y),(p=e[Z+1])<u&&(u=p),y>v&&(v=y),p>o&&(o=p);a=0!==(a=Math.max(v-i,o-u))?1/a:0}return r(s,c,x,i,u,a),c}function n(e,n,t,r,x){var i,u;if(x===C(e,n,t,r)>0)for(i=n;i<t;i+=r)u=q(i,e[i],e[i+1],u);else for(i=t-r;i>=n;i-=r)u=q(i,e[i],e[i+1],u);if(u&&m(u,u.next)){var v=u.next;A(u),u=v}return u}function t(e,n){if(!e)return e;n||(n=e);var t,r=e;do{if(t=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{var x=r.prev;if(A(r),(r=n=x)===r.next)break;t=!0}}while(t||r!==n);return n}function r(e,n,f,o,y,p,a){if(e){!a&&p&&h(e,o,y,p);for(var l,s,c=e;e.prev!==e.next;)if(l=e.prev,s=e.next,p?i(e,o,y,p):x(e))n.push(l.i/f),n.push(e.i/f),n.push(s.i/f),A(e),e=s.next,c=s.next;else if((e=s)===c){a?1===a?r(e=u(t(e),n,f),n,f,o,y,p,2):2===a&&v(e,n,f,o,y,p):r(t(e),n,f,o,y,p,1);break}}}function x(e){var n=e.prev,t=e,r=e.next;if(w(n,t,r)>=0)return!1;for(var x=e.next.next;x!==e.prev;){if(g(n.x,n.y,t.x,t.y,r.x,r.y,x.x,x.y)&&w(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function i(e,n,t,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var v=x.x<i.x?x.x<u.x?x.x:u.x:i.x<u.x?i.x:u.x,f=x.y<i.y?x.y<u.y?x.y:u.y:i.y<u.y?i.y:u.y,o=x.x>i.x?x.x>u.x?x.x:u.x:i.x>u.x?i.x:u.x,y=x.y>i.y?x.y>u.y?x.y:u.y:i.y>u.y?i.y:u.y,p=c(v,f,n,t,r),a=c(o,y,n,t,r),l=e.prevZ,h=e.nextZ;l&&l.z>=p&&h&&h.z<=a;){if(l!==e.prev&&l!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&w(l.prev,l,l.next)>=0)return!1;if(l=l.prevZ,h!==e.prev&&h!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;l&&l.z>=p;){if(l!==e.prev&&l!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,l.x,l.y)&&w(l.prev,l,l.next)>=0)return!1;l=l.prevZ}for(;h&&h.z<=a;){if(h!==e.prev&&h!==e.next&&g(x.x,x.y,i.x,i.y,u.x,u.y,h.x,h.y)&&w(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,r){var x=e;do{var i=x.prev,u=x.next.next;!m(i,u)&&M(i,x,x.next,u)&&j(i,u)&&j(u,i)&&(n.push(i.i/r),n.push(x.i/r),n.push(u.i/r),A(x),A(x.next),x=e=u),x=x.next}while(x!==e);return t(x)}function v(e,n,x,i,u,v){var f=e;do{for(var o=f.next.next;o!==f.prev;){if(f.i!==o.i&&d(f,o)){var y=_(f,o);return f=t(f,f.next),y=t(y,y.next),r(f,n,x,i,u,v),void r(y,n,x,i,u,v)}o=o.next}f=f.next}while(f!==e)}function f(e,r,x,i){var u,v,f,y=[];for(u=0,v=r.length;u<v;u++)(f=n(e,r[u]*i,u<v-1?r[u+1]*i:e.length,i,!1))===f.next&&(f.steiner=!0),y.push(Z(f));for(y.sort(o),u=0;u<y.length;u++)x=t(x=p(y[u],x),x.next);return x}function o(e,n){return e.x-n.x}function y(e){if(e.next.prev===e)return e;let n=e;for(;;){const t=n.next;if(t.prev===n||t===n||t===e)break;n=t}return n}function p(e,n){var r=a(e,n);if(!r)return n;var x=_(r,e),i=t(r,r.next);let u=y(x);return t(u,u.next),i=y(i),y(n===r?i:n)}function a(e,n){var t,r=n,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var v=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(v<=x&&v>u){if(u=v,v===x){if(i===r.y)return r;if(i===r.next.y)return r.next}t=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!t)return null;if(x===u)return t;var f,o=t,y=t.x,p=t.y,a=1/0;r=t;do{x>=r.x&&r.x>=y&&x!==r.x&&g(i<p?x:u,i,y,p,i<p?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),j(r,e)&&(f<a||f===a&&(r.x>t.x||r.x===t.x&&l(t,r)))&&(t=r,a=f)),r=r.next}while(r!==o);return t}function l(e,n){return w(e.prev,e,n.prev)<0&&w(n.next,e,e.next)<0}function h(e,n,t,r){var x=e;do{null===x.z&&(x.z=c(x.x,x.y,n,t,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,s(x)}function s(e){var n,t,r,x,i,u,v,f,o=1;do{for(t=e,e=null,i=null,u=0;t;){for(u++,r=t,v=0,n=0;n<o&&(v++,r=r.nextZ);n++);for(f=o;v>0||f>0&&r;)0!==v&&(0===f||!r||t.z<=r.z)?(x=t,t=t.nextZ,v--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;t=r}i.nextZ=null,o*=2}while(u>1);return e}function c(e,n,t,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*x)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*x)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Z(e){var n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function g(e,n,t,r,x,i,u,v){return(x-u)*(n-v)-(e-u)*(i-v)>=0&&(e-u)*(r-v)-(t-u)*(n-v)>=0&&(t-u)*(i-v)-(x-u)*(r-v)>=0}function d(e,n){return e.next.i!==n.i&&e.prev.i!==n.i&&!k(e,n)&&(j(e,n)&&j(n,e)&&H(e,n)&&(w(e.prev,e,n.prev)||w(e,n.prev,n))||m(e,n)&&w(e.prev,e,e.next)>0&&w(n.prev,n,n.next)>0)}function w(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function m(e,n){return e.x===n.x&&e.y===n.y}function M(e,n,t,r){var x=b(w(e,n,t)),i=b(w(e,n,r)),u=b(w(t,r,e)),v=b(w(t,r,n));return x!==i&&u!==v||!(0!==x||!z(e,t,n))||!(0!==i||!z(e,r,n))||!(0!==u||!z(t,e,r))||!(0!==v||!z(t,n,r))}function z(e,n,t){return n.x<=Math.max(e.x,t.x)&&n.x>=Math.min(e.x,t.x)&&n.y<=Math.max(e.y,t.y)&&n.y>=Math.min(e.y,t.y)}function b(e){return e>0?1:e<0?-1:0}function k(e,n){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==n.i&&t.next.i!==n.i&&M(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function j(e,n){return w(e.prev,e,e.next)<0?w(e,n,e.next)>=0&&w(e,e.prev,n)>=0:w(e,n,e.prev)<0||w(e,e.next,n)<0}function H(e,n){var t=e,r=!1,x=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&x<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next}while(t!==e);return r}function _(e,n){var t=new B(e.i,e.x,e.y),r=new B(n.i,n.x,n.y),x=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=x,x.prev=t,r.next=t,t.prev=r,i.next=r,r.prev=i,r}function q(e,n,t,r){var x=new B(e,n,t);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,n,t){this.i=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C(e,n,t,r){for(var x=0,i=n,u=t-r;i<t;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}return e.deviation=function(e,n,t,r){var x=n&&n.length,i=x?n[0]*t:e.length,u=Math.abs(C(e,0,i,t));if(x)for(var v=0,f=n.length;v<f;v++){var o=n[v]*t,y=v<f-1?n[v+1]*t:e.length;u-=Math.abs(C(e,o,y,t))}var p=0;for(v=0;v<r.length;v+=3){var a=r[v]*t,l=r[v+1]*t,h=r[v+2]*t;p+=Math.abs((e[a]-e[h])*(e[l+1]-e[a+1])-(e[a]-e[l])*(e[h+1]-e[a+1]))}return 0===u&&0===p?0:Math.abs((p-u)/u)},e.flatten=function(e){for(var n=e[0][0].length,t={vertices:[],holes:[],dimensions:n},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<n;u++)t.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,t.holes.push(r))}return t},e},void 0!==(r=t())&&(n.exports=r);const i=(0,_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_0__.g)(x.exports);


/***/ }),

/***/ 80952:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   c: () => (/* binding */ n),
/* harmony export */   f: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports O, U, Z, a, b, d, e, g, h, o, u, v, z */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(){return new Float32Array(3)}function t(n){const t=new Float32Array(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function r(n,t,r){const e=new Float32Array(3);return e[0]=n,e[1]=t,e[2]=r,e}function e(n,t){return new Float32Array(n,t,3)}function a(){return n()}function o(){return r(1,1,1)}function u(){return r(1,0,0)}function s(){return r(0,1,0)}function c(){return r(0,0,1)}const i=a(),f=o(),l=u(),_=s(),y=c(),w=Object.freeze(Object.defineProperty({__proto__:null,ONES:f,UNIT_X:l,UNIT_Y:_,UNIT_Z:y,ZEROS:i,clone:t,create:n,createView:e,fromValues:r,ones:o,unitX:u,unitY:s,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 20035:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   f: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports O, U, Z, a, b, c, d, e, g, h, i, j, o, u, v, z */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(){return new Float32Array(4)}function t(n){const t=new Float32Array(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function r(n,t,r,e){const a=new Float32Array(4);return a[0]=n,a[1]=t,a[2]=r,a[3]=e,a}function e(n,t){return new Float32Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function u(){return r(1,0,0,0)}function s(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function i(){return r(0,0,0,1)}const f=a(),l=o(),_=u(),y=s(),w=c(),N=i(),O=Object.freeze(Object.defineProperty({__proto__:null,ONES:l,UNIT_W:N,UNIT_X:_,UNIT_Y:y,UNIT_Z:w,ZEROS:f,clone:t,create:n,createView:e,fromValues:r,ones:o,unitW:i,unitX:u,unitY:s,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 52712:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ u),
/* harmony export */   c: () => (/* binding */ n),
/* harmony export */   f: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony exports O, U, Z, b, d, e, g, h, i, j, k, o, u, v, z */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(){return[0,0,0,0]}function t(n){return[n[0],n[1],n[2],n[3]]}function r(n,t,r,e){return[n,t,r,e]}function e(t,r=n()){const e=Math.min(4,t.length);for(let n=0;n<e;++n)r[n]=t[n];return r}function u(n,t){return new Float64Array(n,t,4)}function a(){return n()}function o(){return r(1,1,1,1)}function s(){return r(1,0,0,0)}function i(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}const l=a(),_=o(),N=s(),O=i(),T=c(),U=f(),b=Object.freeze(Object.defineProperty({__proto__:null,ONES:_,UNIT_W:U,UNIT_X:N,UNIT_Y:O,UNIT_Z:T,ZEROS:l,clone:t,create:n,createView:u,fromArray:e,fromValues:r,ones:o,unitW:f,unitX:s,unitY:i,unitZ:c,zeros:a},Symbol.toStringTag,{value:"Module"}));


/***/ }),

/***/ 87176:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ BidiEngine_C)
});

;// ../node_modules/@arcgis/core/core/bidiEngineTables.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const A=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["«","»"],["»","«"],["‹","›"],["›","‹"],["⁽","⁾"],["⁾","⁽"],["₍","₎"],["₎","₍"],["≤","≥"],["≥","≤"],["〈","〉"],["〉","〈"],["﹙","﹚"],["﹚","﹙"],["﹛","﹜"],["﹜","﹛"],["﹝","﹞"],["﹞","﹝"],["﹤","﹥"],["﹥","﹤"]],B=["آ","أ","إ","ا"],T=["ﻵ","ﻷ","ﻹ","ﻻ"],U=["ﻶ","ﻸ","ﻺ","ﻼ"],_=["ا","ب","ت","ث","ج","ح","خ","د","ذ","ر","ز","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ك","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ل","م","ن","ه","و","ي","إ","أ","آ","ة","ى","ی","ئ","ؤ"],L=["ﺍ","ﺏ","ﺕ","ﺙ","ﺝ","ﺡ","ﺥ","ﺩ","ﺫ","ﺭ","ﺯ","ﺱ","ﺵ","ﺹ","ﺽ","ﻁ","ﻅ","ﻉ","ﻍ","ﻑ","ﻕ","ﻙ","ﻝ","ﻡ","ﻥ","ﻩ","ﻭ","ﻱ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯼ","ﺉ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺉ","ﺅ"],E=["ﺎ","ﺐ","ﺖ","ﺚ","ﺞ","ﺢ","ﺦ","ﺪ","ﺬ","ﺮ","ﺰ","ﺲ","ﺶ","ﺺ","ﺾ","ﻂ","ﻆ","ﻊ","ﻎ","ﻒ","ﻖ","ﻚ","ﻞ","ﻢ","ﻦ","ﻪ","ﻮ","ﻲ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯽ","ﺊ","ﺆ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺊ","ﺆ"],N=["ﺎ","ﺒ","ﺘ","ﺜ","ﺠ","ﺤ","ﺨ","ﺪ","ﺬ","ﺮ","ﺰ","ﺴ","ﺸ","ﺼ","ﻀ","ﻄ","ﻈ","ﻌ","ﻐ","ﻔ","ﻘ","ﻜ","ﻠ","ﻤ","ﻨ","ﻬ","ﻮ","ﻴ","ﺈ","ﺄ","ﺂ","ﺔ","ﻰ","ﯿ","ﺌ","ﺆ","ﹱ","ﹲ","ﹴ","ﹷ","ﹹ","ﹻ","ﹽ","ﹿ","ﺀ","ﺌ","ﺆ"],R=["ﺍ","ﺑ","ﺗ","ﺛ","ﺟ","ﺣ","ﺧ","ﺩ","ﺫ","ﺭ","ﺯ","ﺳ","ﺷ","ﺻ","ﺿ","ﻃ","ﻇ","ﻋ","ﻏ","ﻓ","ﻗ","ﻛ","ﻟ","ﻣ","ﻧ","ﻫ","ﻭ","ﻳ","ﺇ","ﺃ","ﺁ","ﺓ","ﻯ","ﯾ","ﺋ","ﺅ","ﹰ","ﹲ","ﹴ","ﹶ","ﹸ","ﹺ","ﹼ","ﹾ","ﺀ","ﺋ","ﺅ"],S=["ء","آ","أ","ؤ","إ","ا","ة","د","ذ","ر","ز","و","ى"],O=["ً","ً","ٌ","؟","ٍ","؟","َ","َ","ُ","ُ","ِ","ِ","ّ","ّ","ْ","ْ","ء","آ","آ","أ","أ","ؤ","ؤ","إ","إ","ئ","ئ","ئ","ئ","ا","ا","ب","ب","ب","ب","ة","ة","ت","ت","ت","ت","ث","ث","ث","ث","ج","ج","ج","ج","ح","ح","ح","ح","خ","خ","خ","خ","د","د","ذ","ذ","ر","ر","ز","ز","س","س","س","س","ش","ش","ش","ش","ص","ص","ص","ص","ض","ض","ض","ض","ط","ط","ط","ط","ظ","ظ","ظ","ظ","ع","ع","ع","ع","غ","غ","غ","غ","ف","ف","ف","ف","ق","ق","ق","ق","ك","ك","ك","ك","ل","ل","ل","ل","م","م","م","م","ن","ن","ن","ن","ه","ه","ه","ه","و","و","ى","ى","ي","ي","ي","ي","ﻵ","ﻶ","ﻷ","ﻸ","ﻹ","ﻺ","ﻻ","ﻼ","؟","؟","؟"],o=["ء","ف"],bidiEngineTables_t=["غ","ي"],bidiEngineTables_c=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],e=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],bidiEngineTables_n=0,p=1,bidiEngineTables_r=2,s=3,x=4,C=5,D=6,F=7,M=8,P=9,W=10,a=11,b=12,d=13,f=14,g=15,h=16,i=17,j=18,k=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],l=100,m=[l+0,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,l+1,l+2,l+3,p,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,l+4,x,x,x,bidiEngineTables_n,x,bidiEngineTables_n,x,bidiEngineTables_n,x,x,x,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,l+5,F,F,l+6,l+7],q=[[j,j,j,j,j,j,j,j,j,D,C,D,M,C,j,j,j,j,j,j,j,j,j,j,j,j,j,j,C,C,C,D,M,x,x,a,a,a,x,x,x,x,x,W,P,W,P,P,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,P,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,j,j,j,j,j,j,C,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,j,P,x,a,a,a,a,x,x,x,x,bidiEngineTables_n,x,x,j,x,x,a,a,bidiEngineTables_r,bidiEngineTables_r,x,bidiEngineTables_n,x,x,x,bidiEngineTables_r,bidiEngineTables_n,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n],[bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,bidiEngineTables_n,x,x,x,x,x,x,x,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,p,b,p,b,b,p,b,b,p,b,x,x,x,x,x,x,x,x,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,x,x,x,x,x,p,p,p,p,p,x,x,x,x,x,x,x,x,x,x,x],[s,s,s,s,x,x,x,x,F,a,a,F,P,F,x,x,b,b,b,b,b,b,b,b,b,b,b,F,x,x,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,s,s,s,s,s,s,s,s,s,s,a,s,s,F,F,F,b,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,b,b,b,b,b,b,b,s,x,b,b,b,b,b,b,F,F,b,b,x,b,b,b,b,F,F,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,F,F,F,F,F,F],[F,F,F,F,F,F,F,F,F,F,F,F,F,F,x,F,F,b,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,x,x,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,b,b,b,b,b,b,b,b,b,b,b,F,x,x,x,x,x,x,x,x,x,x,x,x,x,x,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,b,b,b,b,b,b,b,b,b,p,p,x,x,x,x,p,x,x,x,x,x],[M,M,M,M,M,M,M,M,M,M,M,j,j,j,bidiEngineTables_n,p,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,M,C,d,f,g,h,i,P,a,a,a,a,a,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,P,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,M,j,j,j,j,j,x,x,x,x,x,j,j,j,j,j,j,bidiEngineTables_r,bidiEngineTables_n,x,x,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,W,W,x,x,x,bidiEngineTables_n,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,W,W,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x],[bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,p,b,p,p,p,p,p,p,p,p,p,p,W,p,p,p,p,p,p,p,p,p,p,p,p,p,x,p,p,p,p,p,x,p,x,p,p,x,p,p,x,p,p,p,p,p,p,p,p,p,p,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,b,b,b,b,b,b,b,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,P,x,P,x,x,P,x,x,x,x,x,x,x,x,x,a,x,x,W,W,x,x,x,x,x,a,a,x,x,x,x,x,F,F,F,F,F,x,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,F,x,x,j],[x,x,x,a,a,a,x,x,x,x,x,W,P,W,P,P,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,bidiEngineTables_r,P,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,x,x,x,x,x,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,bidiEngineTables_n,bidiEngineTables_n,bidiEngineTables_n,x,x,x,a,a,x,x,x,a,a,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x,x]];

;// ../node_modules/@arcgis/core/core/BidiEngine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BidiEngine_C{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(t,r,e){if(this.sourceToTarget=[],this.targetToSource=[],!t)return"";if(ot(this.sourceToTarget,this.targetToSource,t.length),!this.checkParameters(r,e))return t;r=this.inputFormat,e=this.outputFormat;let n=t;const o=ct,i=rt(r.charAt(1)),u=rt(e.charAt(1)),s=("I"===r.charAt(0)?"L":r.charAt(0))+i,a=("I"===e.charAt(0)?"L":e.charAt(0))+u,f=r.charAt(2)+e.charAt(2);o.defInFormat=s,o.defOutFormat=a,o.defSwap=f;const c=V(t,s,a,f,o);let l=!1;return"R"===e.charAt(1)?l=!0:"C"!==e.charAt(1)&&"D"!==e.charAt(1)||(l="rtl"===this.checkContextual(c)),this.sourceToTarget=st,this.targetToSource=it(this.sourceToTarget),at=this.targetToSource,n=r.charAt(3)===e.charAt(3)?c:"S"===e.charAt(3)?I(l,c,!0):BidiEngine_k(c,l,!0),this.sourceToTarget=st,this.targetToSource=at,this.levels=ft,n}_inputFormatSetter(t){if(!At.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=t}_outputFormatSetter(t){if(!At.test(t))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=t}checkParameters(t,r){return t?this._inputFormatSetter(t):t=this.inputFormat,r?this._outputFormatSetter(r):r=this.outputFormat,t!==r}checkContextual(t){let r=BidiEngine_x(t);if("ltr"!==r&&"rtl"!==r){try{r=document.dir.toLowerCase()}catch(e){}"ltr"!==r&&"rtl"!==r&&(r="ltr")}return r}hasBidiChar(t){return gt.test(t)}}function V(t,r,e,n,o){const i=BidiEngine_E(t,{inFormat:r,outFormat:e,swap:n},o);if(i.inFormat===i.outFormat)return t;r=i.inFormat,e=i.outFormat,n=i.swap;const u=r.substring(0,1),s=r.substring(1,4),a=e.substring(0,1),f=e.substring(1,4);if(o.inFormat=r,o.outFormat=e,o.swap=n,"L"===u&&"VLTR"===e){if("LTR"===s)return o.dir=Tt,y(t,o);if("RTL"===s)return o.dir=Lt,y(t,o)}if("V"===u&&"V"===a)return o.dir="RTL"===s?Lt:Tt,BidiEngine_M(t,o);if("L"===u&&"VRTL"===e)return"LTR"===s?(o.dir=Tt,t=y(t,o)):(o.dir=Lt,t=y(t,o)),BidiEngine_M(t);if("VLTR"===r&&"LLTR"===e)return o.dir=Tt,y(t,o);if("V"===u&&"L"===a&&s!==f)return t=BidiEngine_M(t),"RTL"===s?V(t,"LLTR","VLTR",n,o):V(t,"LRTL","VRTL",n,o);if("VRTL"===r&&"LRTL"===e)return V(t,"LRTL","VRTL",n,o);if("L"===u&&"L"===a){const r=o.swap;return o.swap=r.substr(0,1)+"N","RTL"===s?(o.dir=Lt,t=y(t,o),o.swap="N"+r.substr(1,2),o.dir=Tt,t=y(t,o)):(o.dir=Tt,t=y(t,o),o.swap="N"+r.substr(1,2),t=V(t,"VLTR","LRTL",o.swap,o)),t}return t}function BidiEngine_E(t,r,e){if(void 0===r.inFormat&&(r.inFormat=e.defInFormat),void 0===r.outFormat&&(r.outFormat=e.defOutFormat),void 0===r.swap&&(r.swap=e.defSwap),r.inFormat===r.outFormat)return r;const n=r.inFormat.substring(0,1),o=r.outFormat.substring(0,1);let i,u=r.inFormat.substring(1,4),s=r.outFormat.substring(1,4);return"C"===u.charAt(0)&&(i=BidiEngine_x(t),u="ltr"===i||"rtl"===i?i.toUpperCase():"L"===r.inFormat.charAt(2)?"LTR":"RTL",r.inFormat=n+u),"C"===s.charAt(0)&&(i=BidiEngine_x(t),"rtl"===i?s="RTL":"ltr"===i?(i=BidiEngine_O(t),s=i.toUpperCase()):s="L"===r.outFormat.charAt(2)?"LTR":"RTL",r.outFormat=o+s),r}function I(t,r,e){if(0===r.length)return"";void 0===t&&(t=!0),void 0===e&&(e=!0);const n=(r=String(r)).split("");let o=0,i=1,u=n.length;t||(o=n.length-1,i=-1,u=1);const s=BidiEngine_j(n,o,i,u,e);let a="";for(let f=0;f<n.length;f++)e&&BidiEngine_W(s,s.length,f)>-1?(ut(at,f,!t,-1),st.splice(f,1)):a+=n[f];return a}function BidiEngine_j(t,r,e,n,o){let i=0;const u=[];let s=0;for(let a=r;a*e<n;a+=e)if(Z(t[a])||tt(t[a])){if("ل"===t[a]&&BidiEngine_q(t,a+e,e,n)){t[a]=nt(t[a+e],0===i?T:U),a+=e,et(t,a,e,n),o&&(u[s]=a,s++),i=0;continue}const r=t[a];1===i?t[a]=$(t,a+e,e,n)?Q(t[a]):X(t[a],E):!0===$(t,a+e,e,n)?t[a]=X(t[a],R):t[a]=X(t[a],L),tt(r)||(i=1),!0===K(r)&&(i=0)}else i=0;return u}function BidiEngine_x(t){const r=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(t);return r?r[0]<="z"?"ltr":"rtl":""}function BidiEngine_O(t){const r=t.split("");return r.reverse(),BidiEngine_x(r.join(""))}function BidiEngine_k(e,n,o){if(0===e.length)return"";void 0===o&&(o=!0),void 0===n&&(n=!0);let i="";const u=(e=String(e)).split("");for(let s=0;s<e.length;s++){let a=!1;if(u[s]>="ﹰ"&&u[s]<"\ufeff"){const f=e.charCodeAt(s);u[s]>="ﻵ"&&u[s]<="ﻼ"?(n?(s>0&&o&&" "===u[s-1]?i=i.substring(0,i.length-1)+"ل":(i+="ل",a=!0),i+=B[(f-65269)/2]):(i+=B[(f-65269)/2],i+="ل",s+1<e.length&&o&&" "===u[s+1]?s++:a=!0),a&&(ut(at,s,!0,1),st.splice(s,0,st[s]))):i+=O[f-65136]}else i+=u[s]}return i}function y(t,r){const e=t.split(""),n=[];return BidiEngine_D(e,n,r),BidiEngine_P(e,n,r),G(2,e,n,r),G(1,e,n,r),ft=n,e.join("")}function BidiEngine_D(t,r,i){const u=t.length,s=i.dir?e:bidiEngineTables_c;let a=0,f=-1;const c=[],l=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let e=0;e<u;e++)c[e]=z(t[e]);for(let e=0;e<u;e++){const n=a,u=H(t,c,l,e,i);l[e]=u,a=s[n][u];const h=240&a;a&=15;const T=s[a][lt];if(r[e]=T,h>0)if(16===h){for(let t=f;t<e;t++)r[t]=1;f=-1}else f=-1;if(s[a][ht])-1===f&&(f=e);else if(f>-1){for(let t=f;t<e;t++)r[t]=T;f=-1}c[e]===C&&(r[e]=0),i.hiLevel|=T}i.hasUbatS&&Y(c,r,u,i)}function Y(t,r,e,n){for(let o=0;o<e;o++)if(t[o]===D){r[o]=n.dir;for(let e=o-1;e>=0&&t[e]===M;e--)r[e]=n.dir}}function BidiEngine_P(t,r,e){if(0!==e.hiLevel&&e.swap.substr(0,1)!==e.swap.substr(1,2))for(let n=0;n<t.length;n++)1===r[n]&&(t[n]=J(t[n]))}function z(t){const r=t.charCodeAt(0),e=m[r>>8];return e<l?e:q[e-l][255&r]}function BidiEngine_M(t,r){const e=t.split("");if(r){const t=[];BidiEngine_D(e,t,r),ft=t}return e.reverse(),st.reverse(),e.join("")}function BidiEngine_W(t,r,e){for(let n=0;n<r;n++)if(t[n]===e)return n;return-1}function Z(t){for(let r=0;r<o.length;r++)if(t>=o[r]&&t<=bidiEngineTables_t[r])return!0;return!1}function $(t,r,e,n){for(;r*e<n&&tt(t[r]);)r+=e;return!!(r*e<n&&Z(t[r]))}function BidiEngine_q(r,e,n,o){for(;e*n<o&&tt(r[e]);)e+=n;let i=" ";if(!(e*n<o))return!1;i=r[e];for(let u=0;u<B.length;u++)if(B[u]===i)return!0;return!1}function G(t,r,e,n){if(n.hiLevel<t)return;if(1===t&&n.dir===Lt&&!n.hasUbatB)return r.reverse(),void st.reverse();const o=r.length;let i,u,s,a,f,c=0;for(;c<o;){if(e[c]>=t){for(i=c+1;i<o&&e[i]>=t;)i++;for(u=c,s=i-1;u<s;u++,s--)a=r[u],r[u]=r[s],r[s]=a,f=st[u],st[u]=st[s],st[s]=f;c=i}c++}}function H(t,r,e,n,i){const u=r[n];return{UBAT_L:()=>(i.lastArabic=!1,bidiEngineTables_n),UBAT_R:()=>(i.lastArabic=!1,p),UBAT_ON:()=>x,UBAT_AN:()=>s,UBAT_EN:()=>i.lastArabic?s:bidiEngineTables_r,UBAT_AL:()=>(i.lastArabic=!0,i.hasUbatAl=!0,p),UBAT_WS:()=>x,UBAT_CS:()=>{let t,o;return n<1||n+1>=r.length||(t=e[n-1])!==bidiEngineTables_r&&t!==s||(o=r[n+1])!==bidiEngineTables_r&&o!==s?x:(i.lastArabic&&(o=s),o===t?o:x)},UBAT_ES:()=>(n>0?e[n-1]:C)===bidiEngineTables_r&&n+1<r.length&&r[n+1]===bidiEngineTables_r?bidiEngineTables_r:x,UBAT_ET:()=>{if(n>0&&e[n-1]===bidiEngineTables_r)return bidiEngineTables_r;if(i.lastArabic)return x;let t=n+1;const o=r.length;for(;t<o&&r[t]===a;)t++;return t<o&&r[t]===bidiEngineTables_r?bidiEngineTables_r:x},UBAT_NSM:()=>{if("VLTR"===i.inFormat){const e=r.length;let o=n+1;for(;o<e&&r[o]===b;)o++;if(o<e){const e=t[n].charCodeAt(0),i=e>=1425&&e<=2303||64286===e,u=r[o];if(i&&(u===p||u===F))return p}}return n<1||r[n-1]===C?x:e[n-1]},UBAT_B:()=>(i.lastArabic=!0,i.hasUbatB=!0,i.dir),UBAT_S:()=>(i.hasUbatS=!0,x),UBAT_LRE:()=>(i.lastArabic=!1,x),UBAT_RLE:()=>(i.lastArabic=!1,x),UBAT_LRO:()=>(i.lastArabic=!1,x),UBAT_RLO:()=>(i.lastArabic=!1,x),UBAT_PDF:()=>(i.lastArabic=!1,x),UBAT_BN:()=>x}[k[u]]()}function J(t){let r,e=0,n=A.length-1;for(;e<=n;)if(r=Math.floor((e+n)/2),t<A[r][0])n=r-1;else{if(!(t>A[r][0]))return A[r][1];e=r+1}return t}function K(t){for(let r=0;r<S.length;r++)if(S[r]===t)return!0;return!1}function Q(t){for(let r=0;r<_.length;r++)if(t===_[r])return N[r];return t}function X(t,r){for(let e=0;e<_.length;e++)if(t===_[e])return r[e];return t}function tt(t){return t>="ً"&&t<="ٕ"}function rt(t){return"L"===t?"LTR":"R"===t?"RTL":"C"===t?"CLR":"D"===t?"CRL":""}function et(t,r,e,n){for(;r*e<n&&tt(t[r]);)r+=e;return r*e<n&&(t[r]=" ",!0)}function nt(r,e){for(let n=0;n<B.length;n++)if(r===B[n])return e[n];return r}function ot(t,r,e){st=[],ft=[];for(let n=0;n<e;n++)t[n]=n,r[n]=n,st[n]=n}function it(t){const r=new Array(t.length);for(let e=0;e<t.length;e++)r[t[e]]=e;return r}function ut(t,r,e,n){for(let o=0;o<t.length;o++)(t[o]>r||!e&&t[o]===r)&&(t[o]+=n)}let st=[],at=[],ft=[];const ct={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},lt=5,ht=6,Tt=0,Lt=1,At=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,gt=/[\u0591-\u06ff\ufb1d-\ufefc]/;


/***/ }),

/***/ 21870:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _BidiEngine_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(87176);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=new _BidiEngine_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A;function i(r){if(null==r)return["",!1];if(!n.hasBidiChar(r))return[r,!1];let i;return i="rtl"===n.checkContextual(r)?"IDNNN":"ICNNN",[n.bidiTransform(r,i,"VLYSN"),!0]}


/***/ }),

/***/ 89926:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _MemCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(40210);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e,s){this._storage=new _MemCache_js__WEBPACK_IMPORTED_MODULE_0__/* .MemCacheStorage */ .F,this.id="",this.name="",this.size=0,this._storage.maxSize=e,this._storage.register(this),s&&this._storage.registerRemoveFunc("",s)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,e,s=1){this._storage.put(this,t,e,s,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}}


/***/ }),

/***/ 69075:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ n),
/* harmony export */   d: () => (/* binding */ x)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n={Base64:0,Hex:1,String:2,Raw:3},t=8,r=(1<<t)-1;function e(n,t){const r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function o(n){const e=[];for(let o=0,u=n.length*t;o<u;o+=t)e[o>>5]|=(n.charCodeAt(o/t)&r)<<o%32;return e}function u(n){const e=[];for(let o=0,u=32*n.length;o<u;o+=t)e.push(String.fromCharCode(n[o>>5]>>>o%32&r));return e.join("")}function c(n){const t="0123456789abcdef",r=[];for(let e=0,o=4*n.length;e<o;e++)r.push(t.charAt(n[e>>2]>>e%4*8+4&15)+t.charAt(n[e>>2]>>e%4*8&15));return r.join("")}function f(n){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=[];for(let o=0,u=4*n.length;o<u;o+=3){const u=(n[o>>2]>>o%4*8&255)<<16|(n[o+1>>2]>>(o+1)%4*8&255)<<8|n[o+2>>2]>>(o+2)%4*8&255;for(let c=0;c<4;c++)8*o+6*c>32*n.length?e.push(t):e.push(r.charAt(u>>6*(3-c)&63))}return e.join("")}function s(n,t){return n<<t|n>>>32-t}function i(n,t,r,o,u,c){return e(s(e(e(t,n),e(o,c)),u),r)}function h(n,t,r,e,o,u,c){return i(t&r|~t&e,n,t,o,u,c)}function a(n,t,r,e,o,u,c){return i(t&e|r&~e,n,t,o,u,c)}function l(n,t,r,e,o,u,c){return i(t^r^e,n,t,o,u,c)}function g(n,t,r,e,o,u,c){return i(r^(t|~e),n,t,o,u,c)}function p(n,t){n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;let r=1732584193,o=-271733879,u=-1732584194,c=271733878;for(let f=0;f<n.length;f+=16){const t=r,s=o,i=u,p=c;r=h(r,o,u,c,n[f],7,-680876936),c=h(c,r,o,u,n[f+1],12,-389564586),u=h(u,c,r,o,n[f+2],17,606105819),o=h(o,u,c,r,n[f+3],22,-1044525330),r=h(r,o,u,c,n[f+4],7,-176418897),c=h(c,r,o,u,n[f+5],12,1200080426),u=h(u,c,r,o,n[f+6],17,-1473231341),o=h(o,u,c,r,n[f+7],22,-45705983),r=h(r,o,u,c,n[f+8],7,1770035416),c=h(c,r,o,u,n[f+9],12,-1958414417),u=h(u,c,r,o,n[f+10],17,-42063),o=h(o,u,c,r,n[f+11],22,-1990404162),r=h(r,o,u,c,n[f+12],7,1804603682),c=h(c,r,o,u,n[f+13],12,-40341101),u=h(u,c,r,o,n[f+14],17,-1502002290),o=h(o,u,c,r,n[f+15],22,1236535329),r=a(r,o,u,c,n[f+1],5,-165796510),c=a(c,r,o,u,n[f+6],9,-1069501632),u=a(u,c,r,o,n[f+11],14,643717713),o=a(o,u,c,r,n[f],20,-373897302),r=a(r,o,u,c,n[f+5],5,-701558691),c=a(c,r,o,u,n[f+10],9,38016083),u=a(u,c,r,o,n[f+15],14,-660478335),o=a(o,u,c,r,n[f+4],20,-405537848),r=a(r,o,u,c,n[f+9],5,568446438),c=a(c,r,o,u,n[f+14],9,-1019803690),u=a(u,c,r,o,n[f+3],14,-187363961),o=a(o,u,c,r,n[f+8],20,1163531501),r=a(r,o,u,c,n[f+13],5,-1444681467),c=a(c,r,o,u,n[f+2],9,-51403784),u=a(u,c,r,o,n[f+7],14,1735328473),o=a(o,u,c,r,n[f+12],20,-1926607734),r=l(r,o,u,c,n[f+5],4,-378558),c=l(c,r,o,u,n[f+8],11,-2022574463),u=l(u,c,r,o,n[f+11],16,1839030562),o=l(o,u,c,r,n[f+14],23,-35309556),r=l(r,o,u,c,n[f+1],4,-1530992060),c=l(c,r,o,u,n[f+4],11,1272893353),u=l(u,c,r,o,n[f+7],16,-155497632),o=l(o,u,c,r,n[f+10],23,-1094730640),r=l(r,o,u,c,n[f+13],4,681279174),c=l(c,r,o,u,n[f],11,-358537222),u=l(u,c,r,o,n[f+3],16,-722521979),o=l(o,u,c,r,n[f+6],23,76029189),r=l(r,o,u,c,n[f+9],4,-640364487),c=l(c,r,o,u,n[f+12],11,-421815835),u=l(u,c,r,o,n[f+15],16,530742520),o=l(o,u,c,r,n[f+2],23,-995338651),r=g(r,o,u,c,n[f],6,-198630844),c=g(c,r,o,u,n[f+7],10,1126891415),u=g(u,c,r,o,n[f+14],15,-1416354905),o=g(o,u,c,r,n[f+5],21,-57434055),r=g(r,o,u,c,n[f+12],6,1700485571),c=g(c,r,o,u,n[f+3],10,-1894986606),u=g(u,c,r,o,n[f+10],15,-1051523),o=g(o,u,c,r,n[f+1],21,-2054922799),r=g(r,o,u,c,n[f+8],6,1873313359),c=g(c,r,o,u,n[f+15],10,-30611744),u=g(u,c,r,o,n[f+6],15,-1560198380),o=g(o,u,c,r,n[f+13],21,1309151649),r=g(r,o,u,c,n[f+4],6,-145523070),c=g(c,r,o,u,n[f+11],10,-1120210379),u=g(u,c,r,o,n[f+2],15,718787259),o=g(o,u,c,r,n[f+9],21,-343485551),r=e(r,t),o=e(o,s),u=e(u,i),c=e(c,p)}return[r,o,u,c]}function x(r,e=n.Hex){const s=e||n.Base64,i=p(o(r),r.length*t);switch(s){case n.Raw:return i;case n.Hex:return c(i);case n.String:return u(i);case n.Base64:return f(i)}}


/***/ }),

/***/ 40210:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ r),
/* harmony export */   Mn: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports RemoveMode, minPriority */
/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63678);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=-3;var s;!function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"}(s||(s={}));class i{constructor(t,e,s){this.name=t,this._storage=e,this.id=h+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),s&&(this._storage.registerRemoveFunc(this.id,s),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get sizeAll(){return this._storage.size}resetHitRate(){this._hit=this._miss=0}put(t,e,s,i=0){this._storage.put(this,t,e,s,i)}get(t){const e=this._storage.get(this,t);return void 0===e?++this._miss:++this._hit,e}peek(t){return this._storage.peek(this,t)}pop(t){const e=this._storage.pop(this,t);return void 0===e?++this._miss:++this._hit,e}updateSize(t,e,s){this._storage.updateSize(this,t,e,s)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}}class r{get size(){return this._size}constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A,this._users=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,e){this._removeFuncs.push([t,e])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace((e=>e[0]!==t))}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimits()}put(t,i,r,h,o){i=t.id+i;const n=this._db.get(i);if(n&&(this._size-=n.size,t.size-=n.size,this._db.delete(i),n.entry!==r&&this._notifyRemove(i,n.entry,s.ALL)),h>this._maxSize)return void this._notifyRemove(i,r,s.ALL);if(void 0===r)return void console.warn("Refusing to cache undefined entry ");if(!h||h<0)return console.warn(`Refusing to cache entry with size ${h} for key ${i}`),void this._notifyRemove(i,r,s.ALL);const _=1+Math.max(o,e)-e;this._db.set(i,{entry:r,size:h,lifetime:_,lives:_}),this._size+=h,t.size+=h,this._checkSizeLimits()}updateSize(t,e,i,r){e=t.id+e;const h=this._db.get(e);if(h&&h.entry===i){for(this._size-=h.size,t.size-=h.size;r>this._maxSize;){const t=this._notifyRemove(e,i,s.SOME);if(!(null!=t&&t>0))return void this._db.delete(e);r=t}h.size=r,this._size+=r,t.size+=r,this._checkSizeLimits()}}pop(t,e){e=t.id+e;const s=this._db.get(e);if(s)return this._size-=s.size,t.size-=s.size,this._db.delete(e),++this._hit,s.entry;++this._miss}get(t,e){e=t.id+e;const s=this._db.get(e);if(void 0!==s)return this._db.delete(e),s.lives=s.lifetime,this._db.set(e,s),++this._hit,s.entry;++this._miss}peek(t,e){const s=this._db.get(t.id+e);return s?++this._hit:++this._miss,s?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},s={},i=new Array;this._db.forEach(((t,e)=>{const r=t.lifetime;i[r]=(i[r]||0)+t.size,this._users.forAll((i=>{const{id:r,name:h}=i;if(e.startsWith(r)){const e=s[h]||0;s[h]=e+t.size}}))}));const r={};this._users.forAll((t=>{const e=t.name;if("hitRate"in t&&"number"==typeof t.hitRate&&!isNaN(t.hitRate)&&t.hitRate>0){const i=s[e]||0;s[e]=i,r[e]=Math.round(100*t.hitRate)+"%"}else r[e]="0%"}));const h=Object.keys(s);h.sort(((t,e)=>s[e]-s[t])),h.forEach((e=>t[e]=Math.round(s[e]/2**20)+"MB / "+r[e]));for(let o=i.length-1;o>=0;--o){const s=i[o];s&&(t["Priority "+(o+e-1)]=Math.round(s/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll((t=>t.resetHitRate()))}clear(t){const e=t.id;this._db.forEach(((t,i)=>{i.startsWith(e)&&(this._size-=t.size,this._db.delete(i),this._notifyRemove(i,t.entry,s.ALL))})),t.size=0}clearAll(){this._db.forEach(((t,e)=>this._notifyRemove(e,t.entry,s.ALL))),this._users.forEach((t=>t.size=0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,e,s){let i;return this._removeFuncs.some((r=>{if(t.startsWith(r[0])){const t=r[1](e,s);return"number"==typeof t&&(i=t),!0}return!1})),i}_checkSizeLimits(){if(this._size>this._maxSize)for(const[t,e]of this._db)if(this._purgeItem(t,e),this._size<=.9*this.maxSize)return;this._users.forEach((t=>{if(t.maxSize>0&&t.size>t.maxSize)for(const[e,s]of this._db)if(e.startsWith(t.id)&&(this._purgeItem(e,s,t),t.size<=.9*t.maxSize))return}))}_purgeItem(t,e,i=this._users.find((e=>t.startsWith(e.id)))){if(this._db.delete(t),e.lives<=1){this._size-=e.size,i&&(i.size-=e.size);const r=this._notifyRemove(t,e.entry,s.SOME);null!=r&&r>0&&(this._size+=r,i&&(i.size+=r),e.lives=e.lifetime,e.size=r,this._db.set(t,e))}else--e.lives,this._db.set(t,e)}}let h=0;


/***/ }),

/***/ 64442:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EB: () => (/* binding */ s),
/* harmony export */   Ui: () => (/* binding */ a),
/* harmony export */   ir: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export isEmpty */
/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(52495);
/* harmony import */ var _Collection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48982);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(55135);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function r(t){return t instanceof _Accessor_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A}function f(e){return e instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A?Object.keys(e.items):r(e)?(0,_utils_js__WEBPACK_IMPORTED_MODULE_2__/* .getProperties */ .oY)(e).keys():e?Object.keys(e):[]}function l(e,n){return e instanceof _Collection_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A?e.items[n]:e[n]}function i(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function u(e){return e?e.declaredClass:null}function c(e,t){const n=e.diff;if(n&&"function"==typeof n)return n(e,t);const s=f(e),p=f(t);if(0===s.length&&0===p.length)return;if(!s.length||!p.length||i(e,t))return{type:"complete",oldValue:e,newValue:t};const a=p.filter((e=>!s.includes(e))),y=s.filter((e=>!p.includes(e))),m=s.filter((n=>p.includes(n)&&l(e,n)!==l(t,n))).concat(a,y).sort(),d=u(e);if(d&&o.has(d)&&m.length)return{type:"complete",oldValue:e,newValue:t};let h;const b=r(e)&&r(t);for(const o of m){const r=l(e,o),f=l(t,o);let i;if((b||"function"!=typeof r&&"function"!=typeof f)&&(r!==f&&(null!=r||null!=f))){if(n&&n[o]&&"function"==typeof n[o])i=n[o]?.(r,f);else if(r instanceof Date&&f instanceof Date){if(r.getTime()===f.getTime())continue;i={type:"complete",oldValue:r,newValue:f}}else i="object"==typeof r&&"object"==typeof f&&u(r)===u(f)?c(r,f):{type:"complete",oldValue:r,newValue:f};null!=i&&(null!=h?h.diff[o]=i:h={type:"partial",diff:{[o]:i}})}}return h}function s(e,t){if(null==e)return!1;const n=t.split(".");let o=e;for(const r of n){if("complete"===o.type)return!0;if("partial"!==o.type)return!1;{const e=o.diff[r];if(!e)return!1;o=e}}return!0}function p(e,t){for(const n of t)if(s(e,n))return!0;return!1}function a(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)}function y(e){if(null==e)return!0;switch(e.type){case"complete":return!1;case"collection":{const t=e;for(const e of t.added)if(!y(e))return!1;for(const e of t.removed)if(!y(e))return!1;for(const e of t.changed)if(!y(e))return!1;return!0}case"partial":for(const t in e.diff){if(!y(e.diff[t]))return!1}return!0}}


/***/ }),

/***/ 51859:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ r),
/* harmony export */   U: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}


/***/ }),

/***/ 72777:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Al: () => (/* binding */ c),
/* harmony export */   Vb: () => (/* binding */ t),
/* harmony export */   af: () => (/* binding */ u),
/* harmony export */   rK: () => (/* binding */ f)
/* harmony export */ });
/* unused harmony exports clearFonts, isCachedFontFace */
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21121);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t="arial-unicode-ms",n="woff2",r=new Map,s=new Set;class o{constructor(e,t){this.fontFace=e,this.promise=t}}async function c(t){const c=f(t),a=r.get(c);if(a)return a.promise;const i=new FontFace(t.family,`url('${_config_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fontsUrl}/woff2/${c}.${n}') format('${n}')`,{style:t.style,weight:t.weight}),u=document.fonts;if(u.has(i)&&"loading"===i.status)return i.loaded;const l=i.load().then((()=>(u.add(i),i)));return r.set(c,new o(i,l)),s.add(i),l}function a(){const e=document.fonts;r.forEach((t=>{e.delete(t.fontFace)})),r.clear(),s.clear()}function i(e){return s.has(e)}function u(e){if(!e)return t;const n=e.toLowerCase().split(" ").join("-");switch(n){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return n}}function f(e){const t=l(e)+d(e);return u(e.family)+(t.length>0?t:"-regular")}function l(e){if(!e.weight)return"";switch(e.weight.toLowerCase()){case"bold":case"bolder":return"-bold"}return""}function d(e){if(!e.style)return"";switch(e.style.toLowerCase()){case"italic":case"oblique":return"-italic"}return""}


/***/ }),

/***/ 45132:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   n: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony export standardiseDateOnlyFormat */
/* harmony import */ var _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98918);
/* harmony import */ var _intl_locale_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91109);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(34495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(t){t=t.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let e="";const a=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const r of t.match(a)||[])switch(r){case"D":e+="d";break;case"DD":e+="dd";break;case"DDD":e+="o";break;case"d":e+="c";break;case"ddd":e+="ccc";break;case"dddd":e+="cccc";break;case"M":e+="L";break;case"MM":e+="LL";break;case"MMM":e+="LLL";break;case"MMMM":e+="LLLL";break;case"YY":e+="yy";break;case"Y":case"YYYY":e+="yyyy";break;case"Q":e+="q";break;case"X":case"x":e+=r;break;default:r.length>=2&&"["===r.slice(0,1)&&"]"===r.slice(-1)?e+=`'${r.slice(1,-1)}'`:e+=`'${r}'`}return e}class n{constructor(t,e,a){this._year=t,this._month=e,this._day=a,this.declaredRootClass="esri.core.sql.dateonly"}get month(){return this._month}get monthJS(){return this._month-1}get year(){return this._year}get day(){return this._day}get isValid(){return this.toDateTime("unknown").isValid}equals(t){return t instanceof n&&t.day===this.day&&t.month===this.month&&t.year===this.year}clone(){return new n(this._year,this._month,this._day)}toDateTime(e){return luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .createDateTimeZone */ .mT)(e)})}toDateTimeLuxon(e){return luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromObject({day:this.day,month:this.month,year:this.year},{zone:(0,_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .createDateTimeZone */ .mT)(e)})}toString(){return`${this.year.toString().padStart(4,"0")}-${this.month.toString().padStart(2,"0")}-${this.day.toString().padStart(2,"0")}`}toFormat(t=null){if(null===t||""===t)return this.toString();if(!(t=o(t)))return"";const r=this.toDateTime("unknown");return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.dateTimeToArcadeDate(r).toFormat(t,{locale:(0,_intl_locale_js__WEBPACK_IMPORTED_MODULE_1__/* .getLocale */ .JK)(),numberingSystem:"latn"})}toArcadeDate(){const t=this.toDateTime("unknown");return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .ArcadeDate */ .lY.dateTimeToArcadeDate(t)}toNumber(){return this.toDateTime("unknown").toMillis()}toJSDate(){return this.toDateTime("unknown").toJSDate()}toStorageFormat(){return this.toFormat("yyyy-LL-dd")}toSQLValue(){return this.toFormat("yyyy-LL-dd")}toSQLWithKeyword(){return"date '"+this.toFormat("yyyy-LL-dd")+"'"}plus(t,e){return n.fromDateTime(this.toUTCDateTime().plus({[t]:e}))}toUTCDateTime(){return luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.utc(this.year,this.month,this.day,0,0,0,0)}difference(t,e){switch(e.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===e?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}static fromMilliseconds(t){const e=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromMillis(t,{zone:luxon__WEBPACK_IMPORTED_MODULE_2__/* .FixedOffsetZone */ .mQ.utcInstance});return e.isValid?n.fromParts(e.year,e.month,e.day):null}static fromSeconds(t){const e=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromSeconds(t,{zone:luxon__WEBPACK_IMPORTED_MODULE_2__/* .FixedOffsetZone */ .mQ.utcInstance});return e.isValid?n.fromParts(e.year,e.month,e.day):null}static fromReader(t){if(!t)return null;const e=t.split("-");return 3!==e.length?null:new n(parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10))}static fromParts(t,e,a){const r=new n(t,e,a);return!1===r.isValid?null:r}static fromDateJS(t){return n.fromParts(t.getFullYear(),t.getMonth()+1,t.getDay())}static fromDateTime(t){return n.fromParts(t.year,t.month,t.day)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,e=null){if(""===t)return null;if(null===t)return null;const a=[];if(e)(e=o(e))&&a.push(e);else if(null===e||""===e){const e=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromISO(t,{setZone:!0});return e.isValid?n.fromParts(e.year,e.month,e.day):null}for(const s of a){const a=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromFormat(t,e??s);if(a.isValid)return new n(a.year,a.month,a.day)}return null}static fromNow(e="system"){const a=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromJSDate(new Date).setZone((0,_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__/* .createDateTimeZone */ .mT)(e));return new n(a.year,a.month,a.day)}}


/***/ }),

/***/ 40845:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ n)
/* harmony export */ });
/* unused harmony export standardiseTimeFormat */
/* harmony import */ var _arcade_kernel_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(47303);
/* harmony import */ var _intl_locale_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(91109);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(34495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(t){if(!t)return"";const s=/(a|A|hh?|HH?|mm?|ss?|SSS|S|.)/g;let e="";for(const i of t.match(s)||[])switch(i){case"SSS":case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":e+=i;break;case"A":case"a":e+="a";break;default:e+=`'${i}'`}return e}class n{constructor(t,s,e,i){this._hour=t,this._minute=s,this._second=e,this._millisecond=i,this.declaredRootClass="esri.core.sql.timeonly"}get hour(){return this._hour}get minute(){return this._minute}get second(){return this._second}get millisecond(){return this._millisecond}equals(t){return t instanceof n&&t.hour===this.hour&&t.minute===this.minute&&t.second===this.second&&t.millisecond===this.millisecond}clone(){return new n(this.hour,this.minute,this.second,this.millisecond)}isValid(){return (0,_arcade_kernel_js__WEBPACK_IMPORTED_MODULE_0__/* .isInteger */ .Fq)(this.hour)&&(0,_arcade_kernel_js__WEBPACK_IMPORTED_MODULE_0__/* .isInteger */ .Fq)(this.minute)&&(0,_arcade_kernel_js__WEBPACK_IMPORTED_MODULE_0__/* .isInteger */ .Fq)(this.second)&&(0,_arcade_kernel_js__WEBPACK_IMPORTED_MODULE_0__/* .isInteger */ .Fq)(this.millisecond)&&this.hour>=0&&this.hour<24&&this.minute>=0&&this.minute<60&&this.second>=0&&this.second<60&&this.millisecond>=0&&this.millisecond<1e3}toString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`+(this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):"")}toSQLValue(){return this.toString()}toSQLWithKeyword(){return`time '${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}${this.millisecond>0?"."+this.millisecond.toString().padStart(3,"0"):""}'`}toStorageString(){return`${this.hour.toString().padStart(2,"0")}:${this.minute.toString().padStart(2,"0")}:${this.second.toString().padStart(2,"0")}`}toFormat(t=null){if(null===t||""===t)return this.toString();if(!(t=i(t)))return"";return luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.local(1970,1,1,this._hour,this._minute,this._second,this._millisecond).toFormat(t,{locale:(0,_intl_locale_js__WEBPACK_IMPORTED_MODULE_1__/* .getLocale */ .JK)(),numberingSystem:"latn"})}toNumber(){return this.millisecond+1e3*this.second+1e3*this.minute*60+60*this.hour*60*1e3}static fromParts(t,s,e,i){const r=new n(t,s,e,i);return r.isValid()?r:null}static fromReader(t){if(!t)return null;const s=t.split(":");return 3!==s.length?null:new n(parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10),0)}static fromMilliseconds(t){if(t>864e5||t<0)return null;const s=Math.floor(t/1e3%60),e=Math.floor(t/6e4%60),i=Math.floor(t/36e5%24),r=Math.floor(t%1e3);return new n(i,e,s,r)}static fromDateJS(t){return new n(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}static fromDateTime(t){return new n(t.hour,t.minute,t.second,t.millisecond)}static fromSqlTimeStampOffset(t){return this.fromDateTime(t.toDateTime())}static fromString(t,s=null){if(""===t)return null;if(null===t)return null;const r=[];s?(s=i(s))&&r.push(s):null!==s&&""!==s||(r.push("HH:mm:ss"),r.push("HH:mm:ss.SSS"),r.push("hh:mm:ss a"),r.push("hh:mm:ss.SSS a"),r.push("HH:mm"),r.push("hh:mm a"),r.push("H:mm"),r.push("h:mm a"),r.push("H:mm:ss"),r.push("h:mm:ss a"),r.push("H:mm:ss.SSS"),r.push("h:mm:ss.SSS a"));for(const i of r){const s=luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.fromFormat(t,i);if(s.isValid)return new n(s.hour,s.minute,s.second,s.millisecond)}return null}plus(t,s){switch(t){case"days":case"years":case"months":return this.clone();case"hours":case"minutes":case"seconds":case"milliseconds":return n.fromDateTime(this.toUTCDateTime().plus({[t]:s}))}return null}toUTCDateTime(){return luxon__WEBPACK_IMPORTED_MODULE_2__/* .DateTime */ .c9.utc(1970,1,1,this.hour,this.minute,this.second,this.millisecond)}difference(t,s){switch(s.toLowerCase()){case"days":case"day":case"d":return this.toUTCDateTime().diff(t.toUTCDateTime(),"days").days;case"months":case"month":return this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months;case"minutes":case"minute":case"m":return"M"===s?this.toUTCDateTime().diff(t.toUTCDateTime(),"months").months:this.toUTCDateTime().diff(t.toUTCDateTime(),"minutes").minutes;case"seconds":case"second":case"s":return this.toUTCDateTime().diff(t.toUTCDateTime(),"seconds").seconds;case"milliseconds":case"millisecond":case"ms":default:return this.toUTCDateTime().diff(t.toUTCDateTime(),"milliseconds").milliseconds;case"hours":case"hour":case"h":return this.toUTCDateTime().diff(t.toUTCDateTime(),"hours").hours;case"years":case"year":case"y":return this.toUTCDateTime().diff(t.toUTCDateTime(),"years").years}}}


/***/ }),

/***/ 90709:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GB: () => (/* binding */ t),
/* harmony export */   Qo: () => (/* binding */ i),
/* harmony export */   Y4: () => (/* binding */ r)
/* harmony export */ });
/* unused harmony export adoptTimeZone */
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(34495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{}function r(n){return n instanceof luxon__WEBPACK_IMPORTED_MODULE_0__/* .Zone */ .bo?n===t.instance:"unknown"===n?.toString().toLowerCase()}function i(n){return r(n)?t.instance:n}function c(n,o){return e.fromObject({day:n.day,year:n.year,month:n.month,hour:n.hour,minute:n.minute,second:n.second,millisecond:n.millisecond},{zone:o})}t.instance=new luxon__WEBPACK_IMPORTED_MODULE_0__/* .IANAZone */ .oh("Etc/UTC");


/***/ }),

/***/ 14816:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   z: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19251);
/* harmony import */ var _geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(18159);
/* harmony import */ var _support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1171);
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(88443);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a{static fromOptimized(t,e,s=!1,i=!1){return(new p).initialize(t,e,s,i,1)}static fromJSON(t,e=!1,s=!1){const[i,h]=u(t);return(new d).initialize(i,h,e,s,1)}static fromOptimizedCIM(t,e,s=!1,i=!1){return(new m).initialize(t,e,s,i,1)}static fromJSONCIM(t,e=!1,s=!1){const[i,h]=u(t);return(new y).initialize(i,h,e,s,1)}static fromFeatureSetReader(t){const e=t.readGeometryForDisplay(),s=t.geometryType;return e&&s?this.fromOptimized(e,s):null}static fromFeatureSetReaderCIM(t){const e=t.readGeometryForDisplay(),s=t.geometryType;return e&&s?this.fromOptimizedCIM(e,s):null}static createEmptyOptimized(t,e=!1,s=!1){return(new p).initialize(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,t,e,s,1)}static createEmptyJSON(t,e=!1,s=!1){return(new d).initialize([],t,e,s,1)}static createEmptyOptimizedCIM(t,e=!1,s=!1){return(new m).initialize(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A,t,e,s,1)}static createEmptyJSONCIM(t,e=!1,s=!1){return(new y).initialize([],t,e,s,1)}asJSON(){const t=(0,_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .collectMultipath */ .x)(this);return"esriGeometryEnvelope"===this.geometryType?{xmin:t[0][0][0],ymin:t[0][0][1],xmax:t[0][2][0],ymax:t[0][2][1]}:"esriGeometryMultipoint"===this.geometryType?{points:t.flat()}:"esriGeometryPoint"===this.geometryType?{x:t[0][0][0],y:t[0][0][1]}:"esriGeometryPolygon"===this.geometryType?{rings:t}:{paths:t}}getCurrentRingArea(){if(!this||this.pathSize<3)return 0;let t,e,s=0;if(this.seekPathStart(),!this.nextPoint())return 0;t=this.x,e=this.y;const i=t,h=e;for(;this.nextPoint();)s+=(t-this.x)*(e+this.y),t=this.x,e=this.y;return s+=(t-i)*(e+h),-.5*s}invertY(){this.yFactor*=-1}}class p extends a{constructor(){super(...arguments),this._end=-1}initialize(t,e,s,i,h){return this.hasZ=s,this.hasM=i,this.geometryType=e,this._stride=2+Number(s)+Number(i),this._geometry=t,this._pathIndex=-1,this._pathOffset=0,this._pointOffset=-this._stride,this._end=-1,this.yFactor=h,this}reset(){this.initialize(this._geometry,this.geometryType,this.hasZ,this.hasM,this.yFactor)}seekPath(t){if(t>=0&&t<this.totalSize){if(this._pathIndex<t)for(;this._pathIndex<t&&this.nextPath(););else if(this._pathIndex>t)for(;this._pathIndex>t&&this.prevPath(););return!0}return!1}seekPathStart(){this._pointOffset=this._pathOffset-this._stride}seekPathEnd(){this._pointOffset=this._end}seekInPath(t){const e=this._pathOffset+t*this._stride;return e>=0&&e<this._end&&(this._pointOffset=e,!0)}nextPoint(){return(this._pointOffset+=this._stride)<this._end}prevPoint(){return(this._pointOffset-=this._stride)>=this._pathOffset}nextPath(){if(this._pathIndex>=0){const t=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex];this._pathOffset+=this._stride*t}this._pointOffset=this._pathOffset-this._stride;const t=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex+1];return this._end=this._pointOffset+this._stride+this._stride*t,++this._pathIndex<this.totalSize}prevPath(){this._end=this._pathOffset;const t=this._geometry.isPoint?1:this._geometry.lengths[this._pathIndex-1];return this._pathOffset-=this._stride*t,this._pointOffset=this._pathOffset-this._stride,--this._pathIndex>=0}pathLength(){const t=this._end,e=this._stride,s=this._geometry.coords;let i=0;for(let h=this._pathOffset+e;h<t;h+=e){const t=s[h-e],r=s[h-e+1],n=s[h]-t,o=s[h+1]-r;i+=Math.sqrt(n*n+o*o)}return i}startPath(){this._geometry.lengths.push(0)}pushPath(t){this.startPath(),this.pushPoints(t)}pushPoint(t){for(let e=0;e<this._stride;++e)this._geometry.coords.push(t[e]);this._geometry.lengths[this.totalSize-1]++}pushXY(t,e){this._geometry.coords.push(t,e),this._geometry.lengths[this.totalSize-1]++}pushPoints(t){for(const e of t)for(let t=0;t<this._stride;++t)this._geometry.coords.push(e[t]);this._geometry.lengths[this.totalSize-1]+=t.length}pushCursor(t){const e=t.asOptimized();this._geometry.coords.push(...e.coords),this._geometry.lengths.push(...e.lengths)}asOptimized(){const t=this._geometry.clone();if(1!==this.yFactor)for(let e=1;e<t.coords.length;e+=this._stride)t.coords[e]*=this.yFactor;return"esriGeometryPoint"===this.geometryType&&(t.lengths.length=0),t}isClosed(){const t=this._geometry.coords,e=this._pathOffset,s=this._end-this._stride;for(let i=0;i<this._stride;i++)if(t[e+i]!==t[s+i])return!1;return!0}clone(){return(new p).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._geometry.coords.length/this._stride}get pathSize(){const{lengths:t}=this._geometry;return this._pathIndex<0||this._pathIndex>t.length-1?0:t[this._pathIndex]}get totalSize(){return this._geometry.lengths.length}get x(){return this._geometry.coords[this._pointOffset]}set x(t){this._geometry.coords[this._pointOffset]=t}get y(){return this.yFactor*this._geometry.coords[this._pointOffset+1]}set y(t){this._geometry.coords[this._pointOffset+1]=this.yFactor*t}get z(){return this._geometry.coords[this._pointOffset+2]}set z(t){this._geometry.coords[this._pointOffset+2]=t}get m(){const t=this.hasZ?3:2;return this._geometry.coords[this._pointOffset+t]}set m(t){this._geometry.coords[this._pointOffset+3]=t}get pathIndex(){return this._pathIndex}get _coordIndex(){return this._pointOffset/this._stride}}function _(t){const e=[t.x,t.y];return t.z&&e.push(t.z),t.m&&e.push(t.m),e}function u(t){return (0,_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isPolygon */ .Bi)(t)?[t.rings,"esriGeometryPolygon"]:(0,_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isPolyline */ .Rg)(t)?[t.paths,"esriGeometryPolyline"]:(0,_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isMultipoint */ .U9)(t)?[[t.points],"esriGeometryMultipoint"]:(0,_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isExtent */ .ZC)(t)?[[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],"esriGeometryEnvelope"]:(0,_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isPoint */ .fT)(t)?[[[_(t)]],"esriGeometryPoint"]:[[],"esriGeometryPolyline"]}class d extends a{initialize(t,e,s,i,h){return this._paths=t,this.geometryType=e,this.hasZ=s,this.hasM=i,this._pathIndex=this._pointIndex=-1,this.yFactor=h,this._mIndex=this.hasZ?3:2,this}reset(){this._pathIndex=this._pointIndex=-1}seekPath(t){return t>=0&&t<this.totalSize&&(this._pathIndex=t,this._pointIndex=-1,this._currentPath=this._paths[t],!0)}seekPathStart(){this._pointIndex=-1}seekPathEnd(){this._pointIndex=this._currentPath.length}seekInPath(t){return t>=0&&t<this._currentPath.length&&(this._pointIndex=t,this._currentPoint=this._currentPath[this._pointIndex],!0)}nextPoint(){return this._currentPoint=this._currentPath[++this._pointIndex],this._pointIndex<this._currentPath.length}prevPoint(){return this._currentPoint=this._currentPath[--this._pointIndex],this._pointIndex>=0}nextPath(){return this._pointIndex=-1,this._currentPath=this._paths[++this._pathIndex],this._pathIndex<this.totalSize}prevPath(){return this._pointIndex=-1,this._currentPath=this._paths[--this._pathIndex],this._pathIndex>=0}pathLength(){const t=this._currentPath.length,e=this._currentPath;let s=0;for(let i=1;i<t;i++){const t=e[i-1],h=e[i],r=t[0],n=t[1],o=h[0]-r,a=h[1]-n;s+=Math.sqrt(o*o+a*a)}return s}startPath(){this._paths.push([])}pushPath(t){this._paths.push(t)}pushPoint(t){this._paths[this.totalSize-1].push(t)}pushXY(t,e){this._paths[this.totalSize-1].push([t,e])}pushPoints(t){this._paths[this.totalSize-1].push(...t)}pushCursor(t){const s=(0,_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .collectMultipath */ .x)(t);for(const e of s)this.pushPath(e)}asOptimized(){const t=new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A;if("esriGeometryPoint"===this.geometryType)t.coords.push(...this._paths[0][0]),t.lengths.length=0;else for(const e of this._paths){for(const s of e)t.coords.push(s[0]),t.coords.push(s[1]*this.yFactor),this.hasZ&&t.coords.push(s[2]),this.hasM&&t.coords.push(s[this._mIndex]);t.lengths.push(e.length)}return t}isClosed(){const t=this._currentPath[0],e=this._currentPath[this._currentPath.length-1];for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}clone(){return(new d).initialize((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__/* .clone */ .o8)(this._paths),this.geometryType,this.hasZ,this.hasM,this.yFactor)}get totalPoints(){return this._paths.map((t=>t.length)).reduce(((t,e)=>t+e))}get pathSize(){return this._pathIndex<0||this._pathIndex>this.totalSize-1?-1:this._paths[this._pathIndex].length}get totalSize(){return this._paths.length}get x(){return this._currentPoint[0]}set x(t){this._currentPoint[0]=t}get y(){return this.yFactor*this._currentPoint[1]}set y(t){this._currentPoint[1]=this.yFactor*t}get z(){return this._currentPoint[2]}set z(t){this._currentPoint[2]=t}get m(){return this._currentPoint[this._mIndex]}set m(t){this._currentPoint[this._mIndex]=t}get pathIndex(){return this._pathIndex}}const c=4,l=1;class m extends p{initialize(t,e,s,i,h){return super.initialize(t,e,s,i,h),this._controlPoints||(this._controlPoints=this._controlPoints=new Array(this.totalSize).fill(void 0).map((t=>new Set))),this}startPath(){super.startPath(),this._controlPoints.push(new Set)}clone(){const t=(new m).initialize(this._geometry.clone(),this.geometryType,this.hasZ,this.hasM,this.yFactor);return t._controlPoints=this._controlPoints,t}setControlPoint(){this._controlPoints[this.pathIndex].add(this._coordIndex)}getControlPoint(){return this._controlPoints[this.pathIndex].has(this._coordIndex)}setControlPointAt(t){this._controlPoints[this.pathIndex].add(t)}getControlPointAt(t){return this._controlPoints[this.pathIndex].has(t)}}class y extends d{initialize(t,e,s,i,h){return super.initialize(t,e,s,i,h)}clone(){return(new y).initialize((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__/* .clone */ .o8)(this._paths),this.geometryType,this.hasZ,this.hasM,1)}setControlPoint(){this._paths[this.pathIndex][this._pointIndex][c]=l}getControlPoint(){return this._paths[this.pathIndex][this._pointIndex][c]===l}setControlPointAt(t){this._paths[this.pathIndex][t][c]=l}getControlPointAt(t){return this._paths[this.pathIndex][t][c]===l}}


/***/ }),

/***/ 27243:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t={convertToGEGeometry:s,exportPoint:n,exportPolygon:o,exportPolyline:a,exportMultipoint:c,exportExtent:m};function s(t,s){return null==s?null:t.convertJSONToGeometry(s)}class i{constructor(t,s,i){this.x=t,this.y=s,this.spatialReference=i,this.z=void 0,this.m=void 0}}function n(t,s,n){const e=new i(t.getPointX(s),t.getPointY(s),n),o=t.hasZ(s),h=t.hasM(s);return o&&(e.z=t.getPointZ(s)),h&&(e.m=t.getPointM(s)),e}class e{constructor(t,s,i,n){this.rings=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function o(t,s,i){return new e(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class h{constructor(t,s,i,n){this.paths=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function a(t,s,i){return new h(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class r{constructor(t,s,i,n){this.points=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function c(t,s,i){return new r(t.exportPoints(s),i,t.hasZ(s),t.hasM(s))}class x{constructor(t,s,i,n,e){this.xmin=t,this.ymin=s,this.xmax=i,this.ymax=n,this.spatialReference=e,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function m(t,s,i){const n=t.hasZ(s),e=t.hasM(s),o=new x(t.getXMin(s),t.getYMin(s),t.getXMax(s),t.getYMax(s),i);if(n){const i=t.getZExtent(s);o.zmin=i.vmin,o.zmax=i.vmax}if(e){const i=t.getMExtent(s);o.mmin=i.vmin,o.mmax=i.vmax}return o}


/***/ }),

/***/ 1918:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   F: () => (/* binding */ i),
/* harmony export */   l: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(99050);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=128e3;let n=null,e=null;async function i(){return n||(n=o()),n}async function o(){const s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-csp-restrictions")?await __webpack_require__.e(/* import() */ 9022).then(__webpack_require__.bind(__webpack_require__, 19022)).then((t=>t.l)):await __webpack_require__.e(/* import() */ 2012).then(__webpack_require__.bind(__webpack_require__, 82012)).then((t=>t.l));e=await s.load({locateFile:s=>(0,_assets_js__WEBPACK_IMPORTED_MODULE_0__/* .getAssetUrl */ .s)(`esri/core/libs/libtess/${s}`)})}function r(t,n){const i=Math.max(t.length,s);return e.triangulate(t,n,i)}


/***/ }),

/***/ 87569:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O3: () => (/* binding */ e),
/* harmony export */   Ox: () => (/* binding */ _),
/* harmony export */   bR: () => (/* binding */ h),
/* harmony export */   dC: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=512;var t,s;!function(i){i[i.Unknown=0]="Unknown",i[i.Point=1]="Point",i[i.LineString=2]="LineString",i[i.Polygon=3]="Polygon"}(t||(t={}));class h{constructor(i,t){this.x=i,this.y=t}clone(){return new h(this.x,this.y)}equals(i,t){return i===this.x&&t===this.y}isEqual(i){return i.x===this.x&&i.y===this.y}setCoords(i,t){this.x=i,this.y=t}normalize(){const i=this.x,t=this.y,s=Math.sqrt(i*i+t*t);this.x/=s,this.y/=s}rightPerpendicular(){const i=this.x;this.x=this.y,this.y=-i}move(i,t){this.x+=i,this.y+=t}assign(i){this.x=i.x,this.y=i.y}assignAdd(i,t){this.x=i.x+t.x,this.y=i.y+t.y}assignSub(i,t){this.x=i.x-t.x,this.y=i.y-t.y}rotate(i,t){const s=this.x,h=this.y;this.x=s*i-h*t,this.y=s*t+h*i}scale(i){this.x*=i,this.y*=i}length(){const i=this.x,t=this.y;return Math.sqrt(i*i+t*t)}static distance(i,t){const s=t.x-i.x,h=t.y-i.y;return Math.sqrt(s*s+h*h)}static add(i,t){return new h(i.x+t.x,i.y+t.y)}static sub(i,t){return new h(i.x-t.x,i.y-t.y)}}class n{constructor(i,t,s){this.ratio=i,this.x=t,this.y=s}}class e{constructor(t,s,h,n=8,e=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=n,this._pixelMargin=e,this._tileSize=i*n,this._dz=t,this._yPos=s,this._xPos=h}setPixelMargin(i){i!==this._pixelMargin&&(this._pixelMargin=i,this.setExtent(this._extent))}setExtent(i){this._extent=i,this._finalRatio=this._tileSize/i*(1<<this._dz);let t=this._pixelRatio*this._pixelMargin;t/=this._finalRatio;const s=i>>this._dz;t>s&&(t=s),this._margin=t,this._xmin=s*this._xPos-t,this._ymin=s*this._yPos-t,this._xmax=this._xmin+s+2*t,this._ymax=this._ymin+s+2*t}reset(i){this._type=i,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(i,t){this._pushLine(),this._prevIsIn=this._isIn(i,t),this._moveTo(i,t,this._prevIsIn),this._prevPt=new h(i,t),this._firstPt=new h(i,t),this._dist=0}lineTo(i,t){const s=this._isIn(i,t),e=new h(i,t),_=h.distance(this._prevPt,e);let l,x,a,y,o,r,m,u;if(s)this._prevIsIn?this._lineTo(i,t,!0):(l=this._prevPt,x=e,a=this._intersect(x,l),this._start=this._dist+_*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(x.x,x.y,!0));else if(this._prevIsIn)x=this._prevPt,l=e,a=this._intersect(x,l),this._lineTo(a.x,a.y,!0),this._lineTo(l.x,l.y,!1);else{const i=this._prevPt,t=e;if(i.x<=this._xmin&&t.x<=this._xmin||i.x>=this._xmax&&t.x>=this._xmax||i.y<=this._ymin&&t.y<=this._ymin||i.y>=this._ymax&&t.y>=this._ymax)this._lineTo(t.x,t.y,!1);else{const s=[];if((i.x<this._xmin&&t.x>this._xmin||i.x>this._xmin&&t.x<this._xmin)&&(y=(this._xmin-i.x)/(t.x-i.x),u=i.y+y*(t.y-i.y),u<=this._ymin?r=!1:u>=this._ymax?r=!0:s.push(new n(y,this._xmin,u))),(i.x<this._xmax&&t.x>this._xmax||i.x>this._xmax&&t.x<this._xmax)&&(y=(this._xmax-i.x)/(t.x-i.x),u=i.y+y*(t.y-i.y),u<=this._ymin?r=!1:u>=this._ymax?r=!0:s.push(new n(y,this._xmax,u))),(i.y<this._ymin&&t.y>this._ymin||i.y>this._ymin&&t.y<this._ymin)&&(y=(this._ymin-i.y)/(t.y-i.y),m=i.x+y*(t.x-i.x),m<=this._xmin?o=!1:m>=this._xmax?o=!0:s.push(new n(y,m,this._ymin))),(i.y<this._ymax&&t.y>this._ymax||i.y>this._ymax&&t.y<this._ymax)&&(y=(this._ymax-i.y)/(t.y-i.y),m=i.x+y*(t.x-i.x),m<=this._xmin?o=!1:m>=this._xmax?o=!0:s.push(new n(y,m,this._ymax))),0===s.length)o?r?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):r?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(s.length>1&&s[0].ratio>s[1].ratio)this._start=this._dist+_*s[1].ratio,this._lineTo(s[1].x,s[1].y,!0),this._lineTo(s[0].x,s[0].y,!0);else{this._start=this._dist+_*s[0].ratio;for(let i=0;i<s.length;i++)this._lineTo(s[i].x,s[i].y,!0)}this._lineTo(t.x,t.y,!1)}}this._dist+=_,this._prevIsIn=s,this._prevPt=e}close(){if(this._line.length>2){const i=this._firstPt,t=this._prevPt;i.x===t.x&&i.y===t.y||this.lineTo(i.x,i.y);const s=this._line;let h=s.length;for(;h>=4&&(s[0].x===s[1].x&&s[0].x===s[h-2].x||s[0].y===s[1].y&&s[0].y===s[h-2].y);)s.pop(),s[0].x=s[h-2].x,s[0].y=s[h-2].y,--h}}result(i=!0){return this._pushLine(),0===this._lines.length?null:(this._type===t.Polygon&&i&&l.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==t.LineString)throw new Error("Only valid for lines");this._pushLine();const i=this._lines,s=i.length;if(0===s)return null;const h=[];for(let t=0;t<s;t++)h.push({line:i[t],start:this._starts[t]||0});return h}_isIn(i,t){return i>=this._xmin&&i<=this._xmax&&t>=this._ymin&&t<=this._ymax}_intersect(i,t){let s,n,e;if(t.x>=this._xmin&&t.x<=this._xmax)n=t.y<=this._ymin?this._ymin:this._ymax,e=(n-i.y)/(t.y-i.y),s=i.x+e*(t.x-i.x);else if(t.y>=this._ymin&&t.y<=this._ymax)s=t.x<=this._xmin?this._xmin:this._xmax,e=(s-i.x)/(t.x-i.x),n=i.y+e*(t.y-i.y);else{n=t.y<=this._ymin?this._ymin:this._ymax,s=t.x<=this._xmin?this._xmin:this._xmax;const h=(s-i.x)/(t.x-i.x),_=(n-i.y)/(t.y-i.y);h<_?(e=h,n=i.y+h*(t.y-i.y)):(e=_,s=i.x+_*(t.x-i.x))}return this._r=e,new h(s,n)}_pushLine(){this._line&&(this._type===t.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===t.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===t.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(i,s,n){this._type!==t.Polygon?n&&(i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),s=Math.round((s-(this._ymin+this._margin))*this._finalRatio),this._line.push(new h(i,s))):(n||(i<this._xmin&&(i=this._xmin),i>this._xmax&&(i=this._xmax),s<this._ymin&&(s=this._ymin),s>this._ymax&&(s=this._ymax)),i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),s=Math.round((s-(this._ymin+this._margin))*this._finalRatio),this._line.push(new h(i,s)),this._isH=!1,this._isV=!1)}_lineTo(i,s,n){let e,_;if(this._type!==t.Polygon)if(n){if(i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),s=Math.round((s-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(e=this._line[this._line.length-1],e.equals(i,s)))return;this._line.push(new h(i,s))}else this._line&&this._line.length>0&&this._pushLine();else if(n||(i<this._xmin&&(i=this._xmin),i>this._xmax&&(i=this._xmax),s<this._ymin&&(s=this._ymin),s>this._ymax&&(s=this._ymax)),i=Math.round((i-(this._xmin+this._margin))*this._finalRatio),s=Math.round((s-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){e=this._line[this._line.length-1];const t=e.x===i,n=e.y===s;if(t&&n)return;this._isH&&t||this._isV&&n?(e.x=i,e.y=s,_=this._line[this._line.length-2],_.x===i&&_.y===s?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(_=this._line[this._line.length-2],this._isH=_.x===i,this._isV=_.y===s)):(this._isH=_.x===i,this._isV=_.y===s)):(this._line.push(new h(i,s)),this._isH=t,this._isV=n)}else this._line.push(new h(i,s))}}class _{setExtent(i){this._ratio=4096===i?1:4096/i}get validateTessellation(){return this._ratio<1}reset(i){this._lines=[],this._line=null}moveTo(i,t){this._line&&this._lines.push(this._line),this._line=[];const s=this._ratio;this._line.push(new h(i*s,t*s))}lineTo(i,t){const s=this._ratio;this._line.push(new h(i*s,t*s))}close(){const i=this._line;i&&!i[0].isEqual(i[i.length-1])&&i.push(i[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(i){i[i.sideLeft=0]="sideLeft",i[i.sideRight=1]="sideRight",i[i.sideTop=2]="sideTop",i[i.sideBottom=3]="sideBottom"}(s||(s={}));class l{static simplify(i,t,h){if(!h)return;const n=-t,e=i+t,_=-t,x=i+t,a=[],y=[],o=h.length;for(let l=0;l<o;++l){const i=h[l];if(!i||i.length<2)continue;let t,o=i[0];const r=i.length;for(let h=1;h<r;++h)t=i[h],o.x===t.x&&(o.x<=n&&(o.y>t.y?(a.push(l),a.push(h),a.push(s.sideLeft),a.push(-1)):(y.push(l),y.push(h),y.push(s.sideLeft),y.push(-1))),o.x>=e&&(o.y<t.y?(a.push(l),a.push(h),a.push(s.sideRight),a.push(-1)):(y.push(l),y.push(h),y.push(s.sideRight),y.push(-1)))),o.y===t.y&&(o.y<=_&&(o.x<t.x?(a.push(l),a.push(h),a.push(s.sideTop),a.push(-1)):(y.push(l),y.push(h),y.push(s.sideTop),y.push(-1))),o.y>=x&&(o.x>t.x?(a.push(l),a.push(h),a.push(s.sideBottom),a.push(-1)):(y.push(l),y.push(h),y.push(s.sideBottom),y.push(-1)))),o=t}if(0===a.length||0===y.length)return;l.fillParent(h,y,a),l.fillParent(h,a,y);const r=[];l.calcDeltas(r,y,a),l.calcDeltas(r,a,y),l.addDeltas(r,h)}static fillParent(i,t,h){const n=h.length,e=t.length;for(let _=0;_<e;_+=4){const e=t[_],l=t[_+1],a=t[_+2],y=i[e][l-1],o=i[e][l];let r=8092,m=-1;for(let t=0;t<n;t+=4){if(h[t+2]!==a)continue;const n=h[t],e=h[t+1],_=i[n][e-1],l=i[n][e];switch(a){case s.sideLeft:case s.sideRight:if(x(y.y,_.y,l.y)&&x(o.y,_.y,l.y)){const i=Math.abs(l.y-_.y);i<r&&(r=i,m=t)}break;case s.sideTop:case s.sideBottom:if(x(y.x,_.x,l.x)&&x(o.x,_.x,l.x)){const i=Math.abs(l.x-_.x);i<r&&(r=i,m=t)}}}t[_+3]=m}}static calcDeltas(i,t,s){const h=t.length;for(let n=0;n<h;n+=4){const h=[],e=l.calcDelta(n,t,s,h);i.push(t[n]),i.push(t[n+1]),i.push(t[n+2]),i.push(e)}}static calcDelta(i,t,s,h){const n=t[i+3];if(-1===n)return 0;const e=h.length;return e>1&&h[e-2]===n?0:(h.push(n),l.calcDelta(n,s,t,h)+1)}static addDeltas(i,t){const h=i.length;let n=0;for(let s=0;s<h;s+=4){const t=i[s+3];t>n&&(n=t)}for(let e=0;e<h;e+=4){const h=t[i[e]],_=i[e+1],l=n-i[e+3];switch(i[e+2]){case s.sideLeft:h[_-1].x-=l,h[_].x-=l,1===_&&(h[h.length-1].x-=l),_===h.length-1&&(h[0].x-=l);break;case s.sideRight:h[_-1].x+=l,h[_].x+=l,1===_&&(h[h.length-1].x+=l),_===h.length-1&&(h[0].x+=l);break;case s.sideTop:h[_-1].y-=l,h[_].y-=l,1===_&&(h[h.length-1].y-=l),_===h.length-1&&(h[0].y-=l);break;case s.sideBottom:h[_-1].y+=l,h[_].y+=l,1===_&&(h[h.length-1].y+=l),_===h.length-1&&(h[0].y+=l)}}}}const x=(i,t,s)=>i>=t&&i<=s||i>=s&&i<=t;


/***/ }),

/***/ 73138:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   d: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony export getPolylabelPoint */
/* harmony import */ var _aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80510);
/* harmony import */ var _boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(36358);
/* harmony import */ var _centroid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(23806);
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65319);
/* harmony import */ var _intersectsBase_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(43525);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const N=100*222045e-21;function l(t){if(0===t.totalSize)return null;const a=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getCursorBoundsXY */ .z8)(t);if(!a)return null;const o=4*(Math.abs(a[0])+Math.abs(a[2])+Math.abs(a[1])+Math.abs(a[3])+1)*N;let s=0,c=0;t.reset();for(let e=0;t.nextPath();e++){const n=t.getCurrentRingArea();n>c&&(c=n,s=e)}if(t.seekPath(s),0===t.pathSize)return null;t.seekPathStart();const l=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getCursorPathBounds */ .B$)(t);if(Math.abs(c)<=2*o*o)return[(l[0]+l[2])/2,(l[1]+l[3])/2];t.seekPathStart();const x=(0,_centroid_js__WEBPACK_IMPORTED_MODULE_2__/* .ringCentroidCursorXY */ .w2)(t,(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)());if(null===x)return null;if(t.totalPoints<4)return x;const m=[[NaN,NaN],[NaN,NaN],[NaN,NaN],[NaN,NaN]],d=[NaN,NaN,NaN,NaN],P=[NaN,NaN,NaN,NaN];let y=!1,M=f(x,t,!0);0===M.distance&&(y=!0,m[0][0]=x[0],m[0][1]=x[1],M=f(x,t,!1)),d[0]=M.distance,P[0]=0;const b=[NaN,NaN];let S=!1,k=.25,z=-1,g=NaN;do{if(g=NaN,m[1]=h(t,w(l[0],l[2],k),o,a),isNaN(m[1][0])||isNaN(m[1][1])||(M=f(m[1],t,!1),g=M.distance),!isNaN(g)&&g>o&&u(m[1],t))S=!0,d[1]=g,P[1]=p(m[1],x);else if(!isNaN(g)&&g>z&&(z=g,b[0]=m[1][0],b[1]=m[1][1]),k-=.01,k<.1){if(!(z>=0))break;S=!0,d[1]=z,m[1][0]=b[0],m[1][1]=b[1],P[1]=p(m[1],x)}}while(!S);S=!1,k=.5,z=-1;let q=.01,j=1;do{if(g=NaN,m[2]=h(t,w(l[0],l[2],k),o,a),isNaN(m[2][0])||isNaN(m[2][1])||(M=f(m[2],t,!1),g=M.distance),!isNaN(g)&&g>o&&u(m[2],t))S=!0,d[2]=g,P[2]=p(m[2],x);else if(!isNaN(g)&&g>z)z=g,b[0]=m[2][0],b[1]=m[2][1];else if(g>z&&(z=g,b[0]=m[2][0],b[1]=m[2][1]),k=.5+q*j,q+=.01,j*=-1,k<.3||k>.7){if(!(z>=0))break;S=!0,d[2]=z,m[2][0]=b[0],m[2][1]=b[1],P[2]=p(m[2],x)}}while(!S);S=!1,k=.75,z=-1;do{if(g=NaN,m[3]=h(t,w(l[0],l[2],k),o,a),isNaN(m[3][0])||isNaN(m[3][1])||(M=f(m[3],t,!1),g=M.distance),!isNaN(g)&&g>o&&u(m[3],t))S=!0,d[3]=g,P[3]=p(m[3],x);else if(g>z&&(z=g,b[0]=m[3][0],b[1]=m[3][1]),k+=.01,k>.9){if(!(z>=0))break;S=!0,d[3]=z,m[3][0]=b[0],m[3][1]=b[1],P[3]=p(m[3],x)}}while(!S);const T=[0,1,2,3],D=y?0:1;let R;for(let e=D;e<4;e++)for(let t=D;t<3;t++){const e=P[t],n=P[t+1];C(e,n)>0&&(R=T[t],T[t]=T[t+1],T[t+1]=R,P[t]=n,P[t+1]=e)}let B=D,Q=0,U=0;for(let e=D;e<4;e++){switch(e){case 0:U=2*d[T[e]];break;case 1:U=1.66666666*d[T[e]];break;case 2:U=1.33333333*d[T[e]];break;case 3:U=d[T[e]]}U>Q&&(Q=U,B=T[e])}return m[B]}function u(t,e){let n,i,r,a,o=0;for(e.reset();e.nextPath()&&e.nextPoint();)for(n=e.x,i=e.y;e.nextPoint();n=r,i=a){if(r=e.x,a=e.y,i>t[1]==a>t[1])continue;(r-n)*(t[1]-i)-(a-i)*(t[0]-n)>0?o++:o--}return 0!==o}function f(t,e,n){if(n&&u(t,e))return{coord:t,distance:0};let i=1/0,r=0,a=0,s=[0,0],c=[0,0];const N=[0,0];for(e.reset();e.nextPath()&&e.nextPoint();)if(!(e.pathSize<2))for(s[0]=e.x,s[1]=e.y;e.nextPoint();s=c){c=[e.x,e.y],(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .projectPointOnLineSeg */ .gR)(N,t,s,c);const n=p(t,N);n<i&&(i=n,r=N[0],a=N[1])}return{coord:[r,a],distance:Math.sqrt(i)}}function h(t,n,i,r){const a=[n,0];let o=1/0,s=1/0,N=!1,l=!1;const u=[[n,r[1]-1],[n,r[3]+1]],f=[0,0],h=[0,0],m=[0,0],d=[[0,0],[0,0]],P=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)();for(t.reset();t.nextPath()&&t.nextPoint();)if(!(t.pathSize<2))for(d[0][0]=t.x,d[0][1]=t.y;t.nextPoint();d[0][0]=d[1][0],d[0][1]=d[1][1]){if(d[1][0]=t.x,d[1][1]=t.y,null===x(P,d))continue;if(h[0]=u[0][0],h[1]=u[0][1],m[0]=u[1][0],m[1]=u[1][1],0===M(P,h,m))continue;if(!(0,_intersectsBase_js__WEBPACK_IMPORTED_MODULE_4__/* .segmentIntersects */ .Ql)(u[0],u[1],d[0],d[1],f))continue;const e=f[1];o>s?e<o&&(o=e,N=!0):e<s&&(s=e,l=!0)}return N&&l?a[1]=(o+s)/2:a[0]=a[1]=NaN,a}function x(t,n){if(n.length<2)return null;t||(t=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__/* .create */ .vt)());const[i,r]=n[0],[a,o]=n[1];return t[0]=Math.min(i,a),t[1]=Math.min(r,o),t[2]=Math.max(i,a),t[3]=Math.max(r,o),t}const m=1,d=4,P=3,y=12;function M(t,e,n){let i=b(e,t),r=b(n,t);const a=t[0],o=t[1],s=t[2],c=t[3];if(i&r)return 0;if(!(i|r))return 4;const N=(i?1:0)|(r?2:0);do{const N=n[0]-e[0],l=n[1]-e[1];if(N>l)i&P?(i&m?(e[1]+=l*(a-e[0])/N,e[0]=a):(e[1]+=l*(s-e[0])/N,e[0]=s),i=b(e,t)):r&P?(r&m?(n[1]+=l*(a-n[0])/N,n[0]=a):(n[1]+=l*(s-n[0])/N,n[0]=s),r=b(n,t)):i?(i&d?(e[0]+=N*(o-e[1])/l,e[1]=o):(e[0]+=N*(c-e[1])/l,e[1]=c),i=b(e,t)):(r&d?(n[0]+=N*(o-n[1])/l,n[1]=o):(n[0]+=N*(c-n[1])/l,n[1]=c),r=b(n,t));else if(i&y?(i&d?(e[0]+=N*(o-e[1])/l,e[1]=o):(e[0]+=N*(c-e[1])/l,e[1]=c),i=b(e,t)):r&y?(r&d?(n[0]+=N*(o-n[1])/l,n[1]=o):(n[0]+=N*(c-n[1])/l,n[1]=c),r=b(n,t)):i?(i&m?(e[1]+=l*(a-e[0])/N,e[0]=a):(e[1]+=l*(s-e[0])/N,e[0]=s),i=b(e,t)):(r&m?(n[1]+=l*(a-n[0])/N,n[0]=a):(n[1]+=l*(s-n[0])/N,n[0]=s),r=b(n,t)),i&r)return 0}while(i|r);return N}function b(t,e){return(t[0]<e[0]?1:0)|(t[0]>e[2]?1:0)<<1|(t[1]<e[1]?1:0)<<2|(t[1]>e[3]?1:0)<<3}function w(t,e,n){return t+(e-t)*n}function p(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function C(t,e){if(t<e)return-1;if(t>e)return 1;if(t===e)return 0;const n=isNaN(t),i=isNaN(e);return n<i?-1:n>i?1:0}class S{constructor(t,e,n,i){this.x=t,this.y=e,this.cellSize=n,this.distancefromCellCenter=s(t,e,i),this.maxDistanceToPolygon=this.distancefromCellCenter+this.cellSize*Math.SQRT2}}const k=1,z=100;function g(e){if(!e.nextPath()||!e.pathSize)return null;const n=i(e),r=n[2]-n[0],o=n[3]-n[1];if(0===r||0===o)return[n[0]+r/2,n[1]+o/2];const s=Math.max(Math.min(r,o)/z,k),c=new t(((t,e)=>e.maxDistanceToPolygon-t.maxDistanceToPolygon)),N=Math.min(r,o);let l=N/2,u=0,f=0;for(u=n[0];u<n[2];u+=N)for(f=n[1];f<n[3];f+=N)c.enqueue(new S(u+l,f+l,l,e));e.reset(),e.nextPath();const h=a(e);if(null===h)return null;let x,m=new S(h[0],h[1],0,e);for(;c.size>0;)x=c.dequeue(),x.distancefromCellCenter>m.distancefromCellCenter&&(m=x),x.maxDistanceToPolygon-m.distancefromCellCenter<=s||(l=x.cellSize/2,c.enqueue(new S(x.x-l,x.y-l,l,e)),c.enqueue(new S(x.x+l,x.y-l,l,e)),c.enqueue(new S(x.x-l,x.y+l,l,e)),c.enqueue(new S(x.x+l,x.y+l,l,e)));return[m.x,m.y]}


/***/ }),

/***/ 14537:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b3: () => (/* binding */ a),
/* harmony export */   jZ: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export CutVertical */
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21877);
/* harmony import */ var _aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(80510);
/* harmony import */ var _boundsUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(36358);
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65319);
/* harmony import */ var _jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1171);
/* harmony import */ var _normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(54599);
/* harmony import */ var _spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87926);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function p(t){return f(t,!0)}function a(t){return f(t,!1)}function f(i,n){if(null==i)return null;const p=i.spatialReference,a=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .getInfo */ .Vp)(p),f=(0,_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__/* .isSerializable */ .Wj)(i)?i.toJSON():i;if(!a)return f;const I=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .isWebMercator */ .K8)(p)?102100:4326,g=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .cutParams */ .j7[I].maxX,v=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .cutParams */ .j7[I].minX;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPoint */ .fT)(f))return y(f,g,v);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isMultipoint */ .U9)(f))return f.points=f.points.map((t=>y(t,g,v))),f;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isExtent */ .ZC)(f))return d(f,a);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPolygon */ .Bi)(f)||(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPolyline */ .Rg)(f)){const t=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getBoundsXY */ .Rg)(S,f),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},e=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .offsetMagnitude */ .kd)(i.xmin,v)*(2*g),h=0===e?f:(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .updatePolyGeometry */ .kS)(f,e);return i.xmin+=e,i.xmax+=e,i.xmax>g?P(h,g,n):i.xmin<v?P(h,v,n):h}return f}function d(t,i){if(!i)return t;const s=I(t,i).map((t=>t.extent));return s.length<2?s[0]||t:s.length>2?(t.xmin=i.valid[0],t.xmax=i.valid[1],t):{rings:s.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function y(t,i,s){if(Array.isArray(t)){const n=t[0];if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .offsetMagnitude */ .kd)(n,i);t[0]=n+s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .offsetMagnitude */ .kd)(n,s);t[0]=n+i*(-2*s)}}else{const n=t.x;if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .offsetMagnitude */ .kd)(n,i);t.x+=s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__/* .offsetMagnitude */ .kd)(n,s);t.x+=i*(-2*s)}}return t}function I(t,i){const s=[],{ymin:n,ymax:e,xmin:h,xmax:o}=t,r=t.xmax-t.xmin,[u,m]=i.valid,{x,frameId:_}=g(t.xmin,i),{x:l,frameId:c}=g(t.xmax,i),p=x===l&&r>0;if(r>2*m){const t={xmin:h<o?x:l,ymin:n,xmax:m,ymax:e},i={xmin:u,ymin:n,xmax:h<o?l:x,ymax:e},r={xmin:0,ymin:n,xmax:m,ymax:e},p={xmin:u,ymin:n,xmax:0,ymax:e},a=[],f=[];v(t,r)&&a.push(_),v(t,p)&&f.push(_),v(i,r)&&a.push(c),v(i,p)&&f.push(c);for(let s=_+1;s<c;s++)a.push(s),f.push(s);s.push(new C(t,[_]),new C(i,[c]),new C(r,a),new C(p,f))}else x>l||p?s.push(new C({xmin:x,ymin:n,xmax:m,ymax:e},[_]),new C({xmin:u,ymin:n,xmax:l,ymax:e},[c])):s.push(new C({xmin:x,ymin:n,xmax:l,ymax:e},[_]));return s}function g(t,i){const[s,n]=i.valid,e=2*n;let h,o=0;return t>n?(h=Math.ceil(Math.abs(t-n)/e),t-=h*e,o=h):t<s&&(h=Math.ceil(Math.abs(t-s)/e),t+=h*e,o=-h),{x:t,frameId:o}}function v(t,i){const{xmin:s,ymin:n,xmax:e,ymax:h}=i;return O(t,s,n)&&O(t,s,h)&&O(t,e,h)&&O(t,e,n)}function O(t,i,s){return i>=t.xmin&&i<=t.xmax&&s>=t.ymin&&s<=t.ymax}function P(t,i,s=!0){const e=!(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPolyline */ .Rg)(t);if(e&&(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .closeRings */ .m3)(t),s){return(new T).cut(t,i)}const h=e?t.rings:t.paths,o=e?4:2,r=h.length,m=-2*i;for(let n=0;n<r;n++){const t=h[n];if(t&&t.length>=o){const i=[];for(const s of t)i.push([s[0]+m,s[1]]);h.push(i)}}return e?t.rings=h:t.paths=h,t}class C{constructor(t,i){this.extent=t,this.frameIds=i}}const S=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__/* .create */ .vt)();class T{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,i){let s;if(this._xCut=i,t.rings)this._closed=!0,s=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,s=t.paths,this._minPts=2}for(const e of s){if(!e||e.length<this._minPts)continue;let t=!0;for(const i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),s=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&s.push(e);const n=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=n;s.push(e)}return this._closed?t.rings=s:t.paths=s,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const i=this._side(t[0]);if(i*this._prevSide==-1){const s=this._intersect(this._prevPt,t);this._lineTo(this._xCut,s,0),this._prevSide=0,this._lineTo(t[0],t[1],i)}else this._lineTo(t[0],t[1],i);this._prevSide=i,this._prevPt=t}close(){const t=this._firstPt,i=this._prevPt;t[0]===i[0]&&t[1]===i[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,i,s){this._closed?(this._lineIn.push([s<=0?t:this._xCut,i]),this._lineOut.push([s>=0?t:this._xCut,i])):(s<=0&&this._lineIn.push([t,i]),s>=0&&this._lineOut.push([t,i]))}_lineTo(t,i,s){this._closed?(this._addPolyVertex(this._lineIn,s<=0?t:this._xCut,i),this._addPolyVertex(this._lineOut,s>=0?t:this._xCut,i)):s<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,i])):s>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,i])):this._prevSide<0?(this._lineIn.push([t,i]),this._lineOut.push([t,i])):this._prevSide>0&&(this._lineOut.push([t,i]),this._lineIn.push([t,i]))}_addPolyVertex(t,i,s){const n=t.length;n>1&&t[n-1][0]===i&&t[n-2][0]===i?t[n-1][1]=s:t.push([i,s])}_checkClosingPt(t){const i=t.length;i>3&&t[0][0]===this._xCut&&t[i-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[i-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,i){const s=(this._xCut-t[0])/(i[0]-t[0]);return t[1]+s*(i[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}


/***/ }),

/***/ 20698:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $X: () => (/* binding */ q),
/* harmony export */   Gy: () => (/* binding */ L),
/* harmony export */   P5: () => (/* binding */ v),
/* harmony export */   SW: () => (/* binding */ U),
/* harmony export */   Tr: () => (/* binding */ k),
/* harmony export */   VV: () => (/* binding */ m),
/* harmony export */   qj: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports equals, getQuantizedBoundsCoordsArray, getQuantizedBoundsCoordsArrayArray, getQuantizedBoundsPaths, getQuantizedBoundsPoints, getQuantizedBoundsRings, quantizeBounds, quantizeExtent, quantizeMultipoint, quantizePaths, quantizePoints, quantizePolygon, quantizePolyline, quantizeRings, quantizeX, quantizeY, unquantizeBounds, unquantizeCoordsArray, unquantizeCoordsArrayArray, unquantizeExtent, unquantizePaths, unquantizePoints, unquantizeRings, unquantizeX, unquantizeY */
/* harmony import */ var _jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1171);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(n){return n&&"upperLeft"===n.originPosition}const i=(n,t,e)=>[t,e],o=(n,t,e)=>[t,e,n[2]],a=(n,t,e)=>[t,e,n[2],n[3]];function m(n){if(!n)return null;return{originPosition:"upper-left"===n.originPosition?"upperLeft":"lower-left"===n.originPosition?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance]:[1,1],translate:null!=n.extent?[n.extent.xmin,n.extent.ymax]:[0,0]}}function c(n,t){if(n===t||null==n&&null==t)return!0;if(null==n||null==t)return!1;let e,r,u,i,o,a;return l(n)?(e=n.translate[0],r=n.translate[1],u=n.scale[0]):(e=null!=n.extent?n.extent.xmin:0,r=null!=n.extent?n.extent.ymax:0,u=n.tolerance),l(t)?(i=t.translate[0],o=t.translate[1],a=t.scale[0]):(i=null!=t.extent?t.extent.xmin:0,o=null!=t.extent?t.extent.ymax:0,a=t.tolerance),e===i&&r===o&&u===a}function s({scale:n,translate:t},e){return Math.round((e-t[0])/n[0])}function f({scale:n,translate:t},e){return Math.round((t[1]-e)/n[1])}function x(n,t,e){const r=[];let u,l,i,o;for(let a=0;a<e.length;a++){const m=e[a];a>0?(i=s(n,m[0]),o=f(n,m[1]),i===u&&o===l||(r.push(t(m,i-u,o-l)),u=i,l=o)):(u=s(n,m[0]),l=f(n,m[1]),r.push(t(m,u,l)))}return r.length>0?r:null}function h(n,t,e){return t[0]=s(n,e[0]),t[3]=f(n,e[1]),t[2]=s(n,e[2]),t[1]=f(n,e[3]),t}function I(n,t,e,r){return x(n,e?r?a:o:r?o:i,t)}function g(n,t,e,r){const u=[],l=e?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const e=x(n,l,t[i]);e&&e.length>=3&&u.push(e)}return u.length?u:null}function N(n,t,e,r){const u=[],l=e?r?a:o:r?o:i;for(let i=0;i<t.length;i++){const e=x(n,l,t[i]);e&&e.length>=2&&u.push(e)}return u.length?u:null}function p({scale:n,translate:t},e){return e*n[0]+t[0]}function y({scale:n,translate:t},e){return t[1]-e*n[1]}function z(n,t,e){const r=new Array(e.length);if(!e.length)return r;const[u,l]=n.scale;let i=p(n,e[0][0]),o=y(n,e[0][1]);r[0]=t(e[0],i,o);for(let a=1;a<e.length;a++){const n=e[a];i+=n[0]*u,o-=n[1]*l,r[a]=t(n,i,o)}return r}function T(n,t,e){const r=new Array(e.length);for(let u=0;u<e.length;u++)r[u]=z(n,t,e[u]);return r}function M(n,t,e){return e?(t[0]=p(n,e[0]),t[1]=y(n,e[3]),t[2]=p(n,e[2]),t[3]=y(n,e[1]),t):[p(n,t[0]),y(n,t[3]),p(n,t[2]),y(n,t[1])]}function E(n,t,e,r){return z(n,e?r?a:o:r?o:i,t)}function P(n,t,e,r){return T(n,e?r?a:o:r?o:i,t)}function b(n,t,e,r){return T(n,e?r?a:o:r?o:i,t)}function F(n,t,e){let[r,u]=e[0],l=Math.min(r,t[0]),i=Math.min(u,t[1]),o=Math.max(r,t[2]),a=Math.max(u,t[3]);for(let m=1;m<e.length;m++){const[n,t]=e[m];r+=n,u+=t,n<0&&(l=Math.min(l,r)),n>0&&(o=Math.max(o,r)),t<0?i=Math.min(i,u):t>0&&(a=Math.max(a,u))}return n[0]=l,n[1]=i,n[2]=o,n[3]=a,n}function V(n,t){if(!t.length)return null;n[0]=n[1]=Number.POSITIVE_INFINITY,n[2]=n[3]=Number.NEGATIVE_INFINITY;for(let e=0;e<t.length;e++)F(n,n,t[e]);return n}function Y(n){const t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return F(t,t,n)}function _(n){return V([0,0,0,0],n)}function A(n){return V([0,0,0,0],n)}function w(n,t,e,r,u){return t.xmin=s(n,e.xmin),t.ymin=f(n,e.ymin),t.xmax=s(n,e.xmax),t.ymax=f(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function G(n,t,e,r,u){return t.points=I(n,e.points,r,u)??[],t}function L(n,t,e,r,u){return t.x=s(n,e.x),t.y=f(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m)),t}function O(n,t,e,r,u){const l=g(n,e.rings,r,u);return l?(t.rings=l,t):null}function S(n,t,e,r,u){const l=N(n,e.paths,r,u);return l?(t.paths=l,t):null}function d(l,i){return l&&i?(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPoint */ .fT)(i)?L(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPolyline */ .Rg)(i)?S(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isPolygon */ .Bi)(i)?O(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isMultipoint */ .U9)(i)?G(l,{},i,!1,!1):(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isExtent */ .ZC)(i)?w(l,{},i,!1,!1):null:null}function j(n,t,e,r,u){return t.xmin=p(n,e.xmin),t.ymin=y(n,e.ymin),t.xmax=p(n,e.xmax),t.ymax=y(n,e.ymax),t!==e&&(r&&(t.zmin=e.zmin,t.zmax=e.zmax),u&&(t.mmin=e.mmin,t.mmax=e.mmax)),t}function U(n,t,e,r,u){return null!=e&&(t.points=E(n,e.points,r,u)),t}function k(n,t,e,r,u){return null==e||(t.x=p(n,e.x),t.y=y(n,e.y),t!==e&&(r&&(t.z=e.z),u&&(t.m=e.m))),t}function q(n,t,e,r,u){return null!=e&&(t.rings=b(n,e.rings,r,u)),t}function v(n,t,e,r,u){return null!=e&&(t.paths=P(n,e.paths,r,u)),t}


/***/ }),

/***/ 61781:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X_: () => (/* binding */ i),
/* harmony export */   i1: () => (/* binding */ o),
/* harmony export */   zx: () => (/* binding */ d)
/* harmony export */ });
/* unused harmony exports getExtentForScale, getResolutionInMetersForScale, getScaleForResolution */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(92976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r=96;function i(t,i){const o=i||t.extent,u=t.width,c=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerUnitForSR */ .GA)(o?.spatialReference);return o&&u?o.width/u*c*_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .inchesPerMeter */ .dy*r:0}function o(t,i){return t/((0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .getMetersPerUnitForSR */ .GA)(i)*_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .inchesPerMeter */ .dy*r)}function u(t){return t/(e*r)}function c(t,i){return t*(n(i)*e*r)}function f(t,n){const e=t.extent,r=t.width-(t.padding?t.padding.left+t.padding.right:0),i=o(n,e.spatialReference);return e.clone().expand(i*r/e.width)}function d(t,n,e){return a(t,n)&&p(t,e)}function a(n,e){return 0===e||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .floatEqualAbsolute */ .Sp)(n,e)||n<e}function p(n,e){return 0===e||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .floatEqualAbsolute */ .Sp)(n,e)||n>e}


/***/ }),

/***/ 57079:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $B: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony exports canInterpolateEffectStops, convertEffectToStops, normalizeEffectStops */
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(73446);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(81816);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(57922);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=-1;let a=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(h(t))}catch(e){this._transitionTo([]),_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger(this).warn("Invalid Effect",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&u(this._current,h(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}endTransitions(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&u(this._current,t,this.scale)?(this._final=t,this._to=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(t),_(this._current,this._to,this.scale),this._from=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=p(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set("effects",this._current[0]?(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};function h(t){const e=(0,_parser_js__WEBPACK_IMPORTED_MODULE_8__/* .parse */ .q)(t)||[];return m(e)?[{scale:l,effects:e}]:e}function u(t,e,s){if(!t[0]?.effects||!e[0]?.effects)return!0;return!((t[0]?.scale===l||e[0]?.scale===l)&&(t.length>1||e.length>1)&&s<=0)&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_9__/* .canInterpolateEffects */ .mj)(t[0].effects,e[0].effects)}function _(t,e,s){const r=t.length>e.length?t:e,i=t.length>e.length?e:t,n=i[i.length-1],c=n?.scale??s,o=n?.effects??[];for(let f=i.length;f<r.length;f++)i.push({scale:c,effects:[...o]});for(let a=0;a<r.length;a++)i[a].scale=i[a].scale===l?s:i[a].scale,r[a].scale=r[a].scale===l?s:r[a].scale,(0,_utils_js__WEBPACK_IMPORTED_MODULE_9__/* .normalizeEffects */ .O9)(i[a].effects,r[a].effects)}function p(t,e,s){return t+(e-t)*s}function m(t){const e=t[0];return!!e&&"type"in e}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)()],a.prototype,"_to",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)()],a.prototype,"duration",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({value:""})],a.prototype,"effect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({readOnly:!0})],a.prototype,"effects",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({readOnly:!0})],a.prototype,"hasEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({value:0})],a.prototype,"scale",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__/* .property */ .MZ)({readOnly:!0})],a.prototype,"transitioning",null),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.layers.effects.EffectView")],a);


/***/ }),

/***/ 81816:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _colorUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(31415);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98849);
/* harmony import */ var _effects_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(78138);
/* harmony import */ var _chunks_commonjsHelpers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(42784);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(57922);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var m,g,v={exports:{}};v.exports,g=function(){function t(t,e){function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r}function e(t,r,n,u){var a=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(a,e.prototype),a.expected=r,a.found=n,a.location=u,a.name="SyntaxError",a}function r(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,t+(r+=r.repeat(e)).slice(0,e))}function n(t,r){var n,u={},a=(r=void 0!==r?r:{}).grammarSource,o={start:Lt},c=Lt,i="none",s=")",f=",",l="(",p="%",h="px",m="cm",g="mm",v="in",d="pt",y="pc",A="deg",w="rad",x="grad",b="turn",C="#",F=".",E="e",j=/^[ \t\n\r]/,$=/^[a-z\-]/,O=/^[0-9a-fA-F]/,k=/^[+\-]/,q=/^[0-9]/,S=Bt("none"),z=Ut("none",!1),R=Ut(")",!1),I=Ut(",",!1),M=Bt("whitespace"),P=Ht([" ","\t","\n","\r"],!1,!1),N=Bt("function"),T=Ut("(",!1),U=Bt("identifier"),H=Ht([["a","z"],"-"],!1,!1),_=Bt("percentage"),B=Ut("%",!1),D=Bt("length"),G=Ut("px",!1),J=Ut("cm",!1),K=Ut("mm",!1),L=Ut("in",!1),Q=Ut("pt",!1),V=Ut("pc",!1),W=Bt("angle"),X=Ut("deg",!1),Y=Ut("rad",!1),Z=Ut("grad",!1),tt=Ut("turn",!1),et=Bt("number"),rt=Bt("color"),nt=Ut("#",!1),ut=Ht([["0","9"],["a","f"],["A","F"]],!1,!1),at=Ht(["+","-"],!1,!1),ot=Ht([["0","9"]],!1,!1),ct=Ut(".",!1),it=Ut("e",!1),st=function(){return[]},ft=function(t,e){return{type:"function",name:t,parameters:e||[]}},lt=function(t,e){return e.length>0?se(t,e,3):[t]},pt=function(t){return{type:"quantity",value:t.value,unit:t.unit}},ht=function(t){return{type:"color",colorType:t.type,value:t.value}},mt=function(t){return t},gt=function(){return Tt()},vt=function(t){return{value:t,unit:"%"}},dt=function(t){return{value:t,unit:"px"}},yt=function(t){return{value:t,unit:"cm"}},At=function(t){return{value:t,unit:"mm"}},wt=function(t){return{value:t,unit:"in"}},xt=function(t){return{value:t,unit:"pt"}},bt=function(t){return{value:t,unit:"pc"}},Ct=function(t){return{value:t,unit:"deg"}},Ft=function(t){return{value:t,unit:"rad"}},Et=function(t){return{value:t,unit:"grad"}},jt=function(t){return{value:t,unit:"turn"}},$t=function(t){return{value:t,unit:null}},Ot=function(){return{type:"hex",value:Tt()}},kt=function(t){return{type:"function",value:t}},qt=function(){return{type:"named",value:Tt()}},St=function(){return parseFloat(Tt())},zt=0,Rt=0,It=[{line:1,column:1}],Mt=0,Pt=[],Nt=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');c=o[r.startRule]}function Tt(){return t.substring(Rt,zt)}function Ut(t,e){return{type:"literal",text:t,ignoreCase:e}}function Ht(t,e,r){return{type:"class",parts:t,inverted:e,ignoreCase:r}}function _t(){return{type:"end"}}function Bt(t){return{type:"other",description:t}}function Dt(e){var r,n=It[e];if(n)return n;for(r=e-1;!It[r];)r--;for(n={line:(n=It[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return It[e]=n,n}function Gt(t,e,r){var n=Dt(t),u=Dt(e),o={source:a,start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:u.line,column:u.column}};return r&&a&&"function"==typeof a.offset&&(o.start=a.offset(o.start),o.end=a.offset(o.end)),o}function Jt(t){zt<Mt||(zt>Mt&&(Mt=zt,Pt=[]),Pt.push(t))}function Kt(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}function Lt(){var t;return(t=Qt())===u&&(t=Vt()),t}function Qt(){var e,r;return Nt++,e=zt,Zt(),t.substr(zt,4)===i?(r=i,zt+=4):(r=u,0===Nt&&Jt(z)),r!==u?(Zt(),Rt=e,e=st()):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(S),e}function Vt(){var t,e;if(t=[],(e=Wt())!==u)for(;e!==u;)t.push(e),e=Wt();else t=u;return t}function Wt(){var e,r,n,a;return e=zt,Zt(),(r=te())!==u?(Zt(),(n=Xt())===u&&(n=null),Zt(),41===t.charCodeAt(zt)?(a=s,zt++):(a=u,0===Nt&&Jt(R)),a!==u?(Zt(),Rt=e,e=ft(r,n)):(zt=e,e=u)):(zt=e,e=u),e}function Xt(){var e,r,n,a,o,c,i,s;if(e=zt,(r=Yt())!==u){for(n=[],a=zt,o=Zt(),44===t.charCodeAt(zt)?(c=f,zt++):(c=u,0===Nt&&Jt(I)),c===u&&(c=null),i=Zt(),(s=Yt())!==u?a=o=[o,c,i,s]:(zt=a,a=u);a!==u;)n.push(a),a=zt,o=Zt(),44===t.charCodeAt(zt)?(c=f,zt++):(c=u,0===Nt&&Jt(I)),c===u&&(c=null),i=Zt(),(s=Yt())!==u?a=o=[o,c,i,s]:(zt=a,a=u);Rt=e,e=lt(r,n)}else zt=e,e=u;return e}function Yt(){var t,e;return t=zt,(e=re())===u&&(e=ne())===u&&(e=ue())===u&&(e=ae()),e!==u&&(Rt=t,e=pt(e)),(t=e)===u&&(t=zt,(e=oe())!==u&&(Rt=t,e=ht(e)),t=e),t}function Zt(){var e,r;for(Nt++,e=[],j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));r!==u;)e.push(r),j.test(t.charAt(zt))?(r=t.charAt(zt),zt++):(r=u,0===Nt&&Jt(P));return Nt--,r=u,0===Nt&&Jt(M),e}function te(){var e,r,n;return Nt++,e=zt,(r=ee())!==u?(40===t.charCodeAt(zt)?(n=l,zt++):(n=u,0===Nt&&Jt(T)),n!==u?(Rt=e,e=mt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&(r=u,0===Nt&&Jt(N)),e}function ee(){var e,r,n;if(Nt++,e=zt,r=[],$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H)),n!==u)for(;n!==u;)r.push(n),$.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(H));else r=u;return r!==u&&(Rt=e,r=gt()),Nt--,(e=r)===u&&(r=u,0===Nt&&Jt(U)),e}function re(){var e,r,n;return Nt++,e=zt,Zt(),(r=ce())!==u?(37===t.charCodeAt(zt)?(n=p,zt++):(n=u,0===Nt&&Jt(B)),n!==u?(Rt=e,e=vt(r)):(zt=e,e=u)):(zt=e,e=u),Nt--,e===u&&0===Nt&&Jt(_),e}function ne(){var e,r,n;return Nt++,e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===h?(n=h,zt+=2):(n=u,0===Nt&&Jt(G)),n!==u?(Rt=e,e=dt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===m?(n=m,zt+=2):(n=u,0===Nt&&Jt(J)),n!==u?(Rt=e,e=yt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===g?(n=g,zt+=2):(n=u,0===Nt&&Jt(K)),n!==u?(Rt=e,e=At(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===v?(n=v,zt+=2):(n=u,0===Nt&&Jt(L)),n!==u?(Rt=e,e=wt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===d?(n=d,zt+=2):(n=u,0===Nt&&Jt(Q)),n!==u?(Rt=e,e=xt(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,Zt(),(r=ce())!==u?(t.substr(zt,2)===y?(n=y,zt+=2):(n=u,0===Nt&&Jt(V)),n!==u?(Rt=e,e=bt(r)):(zt=e,e=u)):(zt=e,e=u)))))),Nt--,e===u&&0===Nt&&Jt(D),e}function ue(){var e,r,n;return Nt++,e=zt,(r=ce())!==u?(t.substr(zt,3)===A?(n=A,zt+=3):(n=u,0===Nt&&Jt(X)),n!==u?(Rt=e,e=Ct(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=ce())!==u?(t.substr(zt,3)===w?(n=w,zt+=3):(n=u,0===Nt&&Jt(Y)),n!==u?(Rt=e,e=Ft(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=ce())!==u?(t.substr(zt,4)===x?(n=x,zt+=4):(n=u,0===Nt&&Jt(Z)),n!==u?(Rt=e,e=Et(r)):(zt=e,e=u)):(zt=e,e=u),e===u&&(e=zt,(r=ce())!==u?(t.substr(zt,4)===b?(n=b,zt+=4):(n=u,0===Nt&&Jt(tt)),n!==u?(Rt=e,e=jt(r)):(zt=e,e=u)):(zt=e,e=u)))),Nt--,e===u&&(r=u,0===Nt&&Jt(W)),e}function ae(){var t,e;return Nt++,t=zt,Zt(),(e=ce())!==u?(Rt=t,t=$t(e)):(zt=t,t=u),Nt--,t===u&&0===Nt&&Jt(et),t}function oe(){var e,r,n,a;if(Nt++,e=zt,35===t.charCodeAt(zt)?(r=C,zt++):(r=u,0===Nt&&Jt(nt)),r!==u){if(n=[],O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut)),a!==u)for(;a!==u;)n.push(a),O.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ut));else n=u;n!==u?(Rt=e,e=Ot()):(zt=e,e=u)}else zt=e,e=u;return e===u&&(e=zt,(r=Wt())!==u&&(Rt=e,r=kt(r)),(e=r)===u&&(e=zt,(r=ee())!==u&&(Rt=e,r=qt()),e=r)),Nt--,e===u&&(r=u,0===Nt&&Jt(rt)),e}function ce(){var e,r,n,a,o,c,i;for(e=zt,k.test(t.charAt(zt))?(t.charAt(zt),zt++):0===Nt&&Jt(at),r=zt,n=[],q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ot));a!==u;)n.push(a),q.test(t.charAt(zt))?(a=t.charAt(zt),zt++):(a=u,0===Nt&&Jt(ot));if(46===t.charCodeAt(zt)?(a=F,zt++):(a=u,0===Nt&&Jt(ct)),a!==u){if(o=[],q.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=u,0===Nt&&Jt(ot)),c!==u)for(;c!==u;)o.push(c),q.test(t.charAt(zt))?(c=t.charAt(zt),zt++):(c=u,0===Nt&&Jt(ot));else o=u;o!==u?r=n=[n,a,o]:(zt=r,r=u)}else zt=r,r=u;if(r===u)if(r=[],q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ot)),n!==u)for(;n!==u;)r.push(n),q.test(t.charAt(zt))?(n=t.charAt(zt),zt++):(n=u,0===Nt&&Jt(ot));else r=u;if(r!==u){if(n=zt,101===t.charCodeAt(zt)?(a=E,zt++):(a=u,0===Nt&&Jt(it)),a!==u){if(k.test(t.charAt(zt))?(o=t.charAt(zt),zt++):(o=u,0===Nt&&Jt(at)),o===u&&(o=null),c=[],q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ot)),i!==u)for(;i!==u;)c.push(i),q.test(t.charAt(zt))?(i=t.charAt(zt),zt++):(i=u,0===Nt&&Jt(ot));else c=u;c!==u?n=a=[a,o,c]:(zt=n,n=u)}else zt=n,n=u;n===u&&(n=null),Rt=e,e=St()}else zt=e,e=u;return e}function ie(t,e){return t.map((function(t){return t[e]}))}function se(t,e,r){return[t].concat(ie(e,r))}if((n=c())!==u&&zt===t.length)return n;throw n!==u&&zt<t.length&&Jt(_t()),Kt(Pt,Mt<t.length?t.charAt(Mt):null,Mt<t.length?Gt(Mt,Mt+1):Gt(Mt,Mt))}return t(e,Error),e.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n,u=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){u=t[n].text.split(/\r\n|\n|\r/g);break}var a=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(a):a,c=this.location.source+":"+o.line+":"+o.column;if(u){var i=this.location.end,s=r("",o.line.toString().length," "),f=u[a.line-1],l=(a.line===i.line?i.column:f.length+1)-a.column||1;e+="\n --\x3e "+c+"\n"+s+" |\n"+o.line+" | "+f+"\n"+s+" | "+r("",a.column-1," ")+r("",l,"^")}else e+="\n at "+c}return e},e.buildMessage=function(t,e){var r={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?a(t[0])+"-"+a(t[1]):a(t)}));return"["+(t.inverted?"^":"")+e.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description}};function n(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function a(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+n(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+n(t)}))}function o(t){return r[t.type](t)}function c(t){var e,r,n=t.map(o);if(n.sort(),n.length>0){for(e=1,r=1;e<n.length;e++)n[e-1]!==n[e]&&(n[r]=n[e],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}function i(t){return t?'"'+u(t)+'"':"end of input"}return"Expected "+c(t)+" but "+i(e)+" found."},{SyntaxError:e,parse:n}},(m=v).exports&&(m.exports=g());var d=v.exports;function y(t){if(!t||0===t.length)return null;if("string"==typeof t){const e=A(t);return e&&0!==e.length?e:null}const e=t.map((t=>{if(!Number.isFinite(t.scale)||t.scale<=0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:invalid-scale","scale must be finite and greater than 0",{stop:t});return{scale:t.scale,effects:A(t.value)}}));e.sort(((t,e)=>e.effects.length-t.effects.length));for(let r=0;r<e.length-1;r++){if(!(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__/* .canInterpolateEffects */ .mj)(e[r].effects,e[r+1].effects))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[r].effects,b:e[r+1].effects});(0,_utils_js__WEBPACK_IMPORTED_MODULE_4__/* .normalizeEffects */ .O9)(e[r].effects,e[r+1].effects)}return e.sort(((t,e)=>e.scale-t.scale)),e}function A(t){let e;if(!t)return[];try{e=d.parse(t)}catch(r){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:invalid-syntax","Invalid effect syntax",{value:t,error:r})}return e.map((t=>w(t)))}function w(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return x(t);case"opacity":return b(t);case"hue-rotate":return C(t);case"blur":return F(t);case"drop-shadow":return E(t);case"bloom":return j(t)}}catch(e){throw e.details.filter=t,e}throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function x(t){let e=1;return $(t.parameters,1),1===t.parameters.length&&(e=P(t.parameters[0])),new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .ColorMatrixEffect */ .yG(t.name,e)}function b(t){let e=1;return $(t.parameters,1),1===t.parameters.length&&(e=P(t.parameters[0])),new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .OpacityEffect */ .jm(e)}function C(t){let e=0;return $(t.parameters,1),1===t.parameters.length&&(e=T(t.parameters[0])),new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .HueRotateEffect */ .Nd(e)}function F(t){let e=0;return $(t.parameters,1),1===t.parameters.length&&(e=U(t.parameters[0]),k(e,t.parameters[0])),new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .BlurEffect */ .Fk(e)}function E(t){const e=[];let r=null;for(const n of t.parameters)if("color"===n.type){if(e.length&&Object.freeze(e),r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error","Accepts only one color",{});r=H(n)}else{const t=U(n);if(Object.isFrozen(e))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(t),3===e.length&&k(t,n)}if(e.length<2||e.length>3)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .DropShadowEffect */ .$b(e[0],e[1],e[2]||0,r||_("black"))}function j(t){let e=1,r=0,n=0;return $(t.parameters,3),t.parameters[0]&&(e=P(t.parameters[0])),t.parameters[1]&&(r=U(t.parameters[1]),k(r,t.parameters[1])),t.parameters[2]&&(n=P(t.parameters[2])),new _effects_js__WEBPACK_IMPORTED_MODULE_2__/* .BloomEffect */ .bv(e,r,n)}function $(t,e){if(t.length>e)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function O(t){if("color"===t.type)return"<color>";if(t.unit){if(t.unit in I)return"<length>";if(t.unit in z)return"<angle>";if("%"===t.unit)return"<percentage>"}return"<double>"}function k(t,e){if(t<0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function q(t){if("quantity"!==t.type||null!==t.unit)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Expected <double>, Actual: ${O(t)}`,{term:t})}function S(t){if("quantity"!==t.type||null!==t.unit&&"%"!==t.unit)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Expected <double> or <percentage>, Actual: ${O(t)}`,{term:t})}const z={deg:1,grad:.9,rad:180/Math.PI,turn:360};function R(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=z[t.unit]))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Expected <angle>, Actual: ${O(t)}`,{term:t})}const I={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function M(t){if("quantity"!==t.type||!(0===t.value&&null===t.unit||t.unit&&null!=I[t.unit]))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:type-error",`Expected <length>, Actual: ${O(t)}`,{term:t})}function P(t){S(t);const e=t.value;return k(e,t),"%"===t.unit?.01*e:e}function N(t){return q(t),k(t.value,t),t.value}function T(t){return R(t),t.value*z[t.unit]||0}function U(t){return M(t),t.value*I[t.unit]||0}function H(e){switch(e.colorType){case"hex":return (0,_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .hex2rgba */ .qh)(e.value);case"named":return _(e.value);case"function":return G(e.value)}}function _(t){if(!(0,_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isNamedColor */ .V6)(t))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return (0,_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getNamedColorCopy */ .c4)(t)}const B=/^rgba?/i,D=/^hsla?/i;function G(t){if($(t.parameters,4),B.test(t.name))return[P(t.parameters[0]),P(t.parameters[1]),P(t.parameters[2]),t.parameters[3]?P(t.parameters[3]):1];if(D.test(t.name))return (0,_colorUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .hsla2rgba */ .z$)(N(t.parameters[0]),P(t.parameters[1]),P(t.parameters[2]),t.parameters[3]?P(t.parameters[3]):1);throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}


/***/ }),

/***/ 32597:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ib: () => (/* binding */ e),
/* harmony export */   N3: () => (/* binding */ s),
/* harmony export */   Om: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=null,s={},e,h){this.geometry=t,this.attributes=s,this.centroid=e,this.objectId=h,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const s=new t(this.geometry,this.attributes,this.centroid,this.objectId);return s.displayId=this.displayId,s.geohashX=this.geohashX,s.geohashY=this.geohashY,s}}function s(t){return!!t.geometry?.coords?.length}class e extends t{}


/***/ }),

/***/ 46461:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new e;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}


/***/ }),

/***/ 88443:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=[],e=[],s=!1){this.lengths=t??[],this.coords=e??[],this.hasIndeterminateRingOrder=s}static fromRect(e){const[s,h,n,r]=e,i=n-s,o=r-h;return new t([5],[s,h,i,0,0,o,-i,0,0,-o])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let s=0;s<this.lengths.length;s++){const h=this.lengths[s];for(let s=0;s<h;s++){t(this.coords[2*(s+e)],this.coords[2*(s+e)+1])}e+=h}}clone(e){return e?(e.set(this.coords),new t(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new t(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}


/***/ }),

/***/ 23783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cv: () => (/* binding */ j),
/* harmony export */   Nk: () => (/* binding */ x),
/* harmony export */   lK: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(40189);
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(13484);
/* harmony import */ var _geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(27243);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(87926);
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(96082);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=[0,0];function h(s,t){if(!t)return null;if("x"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,c),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if("xmin"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,c),[e.xmax,e.ymax]=s(t.xmax,t.ymax,c),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return"rings"in t?{rings:l(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function l(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru):[t];await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.initializeProjection)(r.map((s=>({source:s,dest:n}))))}const y=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .lngLatToXY */ .je),g=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .xyToLngLat */ .tD);function j(s,t,e,m){if(!s)return s;if(e||(e=t,t=s.spatialReference),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(t)||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isValid */ .fn)(e)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(t,e))return s;if((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(t,e)){const t=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(e)?y(s):g(s);return t.spatialReference=e,t}return (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,[s],t,e,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .equals */ .aI)(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .createResolver */ .Tw)()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:m}=s;(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .canProject */ .y7)(e,i)?(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isWebMercator */ .K8)(i)?o(t.map(y)):o(t.map(g)):o((0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__/* .jsonAdapter */ .g,t,e,i,m,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}


/***/ }),

/***/ 21355:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ap: () => (/* binding */ C),
/* harmony export */   B2: () => (/* binding */ N),
/* harmony export */   BW: () => (/* binding */ $),
/* harmony export */   Ch: () => (/* binding */ It),
/* harmony export */   DF: () => (/* binding */ P),
/* harmony export */   Di: () => (/* binding */ et),
/* harmony export */   E2: () => (/* binding */ tt),
/* harmony export */   IE: () => (/* binding */ M),
/* harmony export */   Nl: () => (/* binding */ ht),
/* harmony export */   Q4: () => (/* binding */ bt),
/* harmony export */   Rk: () => (/* binding */ Nt),
/* harmony export */   Ux: () => (/* binding */ rt),
/* harmony export */   X9: () => (/* binding */ ot),
/* harmony export */   Ye: () => (/* binding */ K),
/* harmony export */   ZF: () => (/* binding */ ct),
/* harmony export */   eU: () => (/* binding */ Q),
/* harmony export */   eY: () => (/* binding */ ft),
/* harmony export */   jH: () => (/* binding */ at),
/* harmony export */   jQ: () => (/* binding */ yt),
/* harmony export */   kz: () => (/* binding */ dt),
/* harmony export */   oN: () => (/* binding */ nt),
/* harmony export */   q3: () => (/* binding */ it),
/* harmony export */   qK: () => (/* binding */ U),
/* harmony export */   qN: () => (/* binding */ L),
/* harmony export */   z5: () => (/* binding */ H),
/* harmony export */   zv: () => (/* binding */ st)
/* harmony export */ });
/* unused harmony exports convertFromMultipoint, convertFromMultipointFeatures, convertFromPointFeatures, convertFromPolylineFeatures, convertToFeatures, convertToMultipointFeatures, deltaDecodeGeometry, deltaEncodeGeometry, getQuantizedBoundsOptimizedGeometry, getSignedQuantizedRingArea, removeCollinearVectices, unquantizeValue, unquantizeX, unquantizeY */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6267);
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4675);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1171);
/* harmony import */ var _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(32597);
/* harmony import */ var _OptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(46461);
/* harmony import */ var _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(88443);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d(t,e){return t?e?4:3:e?3:2}const m=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.layers.graphics.featureConversionUtils"),g={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},y=(t,e,o,n,r,s)=>{t[o]=r,t[o+1]=s},p=(t,e,o,n,r,s)=>{t[o]=r,t[o+1]=s,t[o+2]=e[n+2]},I=(t,e,o,n,r,s)=>{t[o]=r,t[o+1]=s,t[o+2]=e[n+3]},b=(t,e,o,n,r,s)=>{t[o]=r,t[o+1]=s,t[o+2]=e[n+2],t[o+3]=e[n+3]};function w(t,e,o,n){if(t){if(o)return e&&n?b:p;if(e&&n)return I}else if(e&&n)return p;return y}function M({scale:t,translate:e},o){return Math.round((o-e[0])/t[0])}function N({scale:t,translate:e},o){return Math.round((e[1]-o)/t[1])}function G(t,e){return F(t,e,0)}function T(t,e){return F(t,-e,1)}function F({scale:t,translate:e},o,n){return o*t[n]+e[n]}function P(t,e,o){return t?e?o?z(t):Z(t):o?v(t):x(t):null}function x(t){const e=t.coords;return{x:e[0],y:e[1]}}function j(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function Z(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function k(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function v(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function E(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function z(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function S(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function V(t,e,o,n){let r=x;o&&n?r=z:o?r=Z:n&&(r=v);for(const s of e){const{geometry:e,attributes:o}=s,n=null!=e?r(e):null;t.push({attributes:o,geometry:n})}return t}function Y(t,e){return t&&e?S:t?k:e?E:j}function _(t,e,o,n,r){const s=Y(o,n);for(const{geometry:u,attributes:l}of e){const e=null!=u?s(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,u):null;t.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(e,l,null,r?l[r]:void 0))}return t}function L(t,e,o=Y(null!=e.z,null!=e.m)){return o(t,e)}function O(t,e,o,n){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:null!=r?U(r,o,n):null});return t}function U(t,e,o){if(null==t)return null;const n=d(e,o),r=[];for(let s=0;s<t.coords.length;s+=n){const e=[];for(let o=0;o<n;o++)e.push(t.coords[s+o]);r.push(e)}return e?o?{points:r,hasZ:e,hasM:o}:{points:r,hasZ:e}:o?{points:r,hasM:o}:{points:r}}function A(t,e,o,n,r){const s=d(o,n);for(const{geometry:u,attributes:l}of e){const e=null!=u?q(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,u,s):null;t.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(e,l,null,r?l[r]:void 0))}return t}function q(t,e,o=d(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const n=t.coords;let r=0;for(const s of e.points)for(let t=0;t<o;t++)n[r++]=s[t];return t}function R(t,e,o,n){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:null!=r?$(r,o,n):null});return t}function $(t,e,o){if(!t)return null;const n=d(e,o),{coords:r,lengths:s}=t,u=[];let l=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<n;t++)e.push(r[l++]);t.push(e)}u.push(t)}return e?o?{paths:u,hasZ:e,hasM:o}:{paths:u,hasZ:e}:o?{paths:u,hasM:o}:{paths:u}}function B(t,e,o,n,r){const s=d(o,n);for(const{geometry:u,attributes:l}of e){const e=null!=u?C(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,u,s):null;t.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(e,l,null,r?l[r]:void 0))}return t}function C(t,e,o=d(e.hasZ,e.hasM)){const{lengths:n,coords:r}=t;let s=0;for(const u of e.paths){for(const t of u)for(let e=0;e<o;e++)r[s++]=t[e];n.push(u.length)}return t}function D(t,e,o,n){for(const{geometry:r,attributes:s,centroid:u}of e){const e=null!=r?H(r,o,n):null;if(null!=u){const o=x(u);t.push({attributes:s,centroid:o,geometry:e})}else t.push({attributes:s,geometry:e})}return t}function H(t,e,o){if(!t)return null;const n=d(e,o),{coords:r,lengths:s}=t,u=[];let l=0;for(const c of s){const t=[];for(let e=0;e<c;e++){const e=[];for(let t=0;t<n;t++)e.push(r[l++]);t.push(e)}u.push(t)}return e?o?{rings:u,hasZ:e,hasM:o}:{rings:u,hasZ:e}:o?{rings:u,hasM:o}:{rings:u}}function J(t,e,o,n,r){for(const{geometry:s,centroid:u,attributes:l}of e){const e=null!=s?K(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,s,o,n):null,c=r?l[r]:void 0;null!=u?t.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(e,l,j(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,u),c)):t.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(e,l,null,c))}return t}function K(t,e,o=e.hasZ,n=e.hasM){return Q(t,e.rings,o,n)}function Q(t,e,o,n){const r=d(o,n),{lengths:s,coords:u}=t;let l=0;Ft(t);for(const c of e){for(const t of c)for(let e=0;e<r;e++)u[l++]=t[e];s.push(c.length)}return t}const W=[],X=[];function tt(t,e,o,n,r){W[0]=t;const[s]=et(X,W,e,o,n,r);return Pt(W),Pt(X),s}function et(e,o,n,r,s,u){if(Pt(e),!n){for(const t of o){const o=u?t.attributes[u]:void 0;e.push(new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_6__/* .OptimizedFeature */ .Om(null,t.attributes,null,o))}return e}switch(n){case"esriGeometryPoint":return _(e,o,r,s,u);case"esriGeometryMultipoint":return A(e,o,r,s,u);case"esriGeometryPolyline":return B(e,o,r,s,u);case"esriGeometryPolygon":return J(e,o,r,s,u);default:m.error("convertToFeatureSet:unknown-geometry",new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to parse unknown geometry type '${n}'`)),Pt(e)}return e}function ot(e,o,n,r,s,u){const l=e.length;switch(n){case"esriGeometryPoint":_(e,o,r,s,u);break;case"esriGeometryMultipoint":A(e,o,r,s,u);break;case"esriGeometryPolyline":B(e,o,r,s,u);break;case"esriGeometryPolygon":J(e,o,r,s,u);break;default:m.error("convertToFeatureSet:unknown-geometry",new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to parse unknown geometry type '${n}'`))}for(let t=0;t<o.length;t++)e[t+l].geometryType=n,e[t+l].insertAfter=o[t].insertAfter,e[t+l].groupId=o[t].groupId;return e}function nt(t,e,o,n){X[0]=t,lt(W,X,e,o,n);const r=W[0];return Pt(W),Pt(X),r}function rt(e,o,n){if(null==e)return null;const r=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A;if("hasZ"in e&&null==o&&(o=e.hasZ),"hasM"in e&&null==n&&(n=e.hasM),(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPoint */ .fT)(e)){return Y(null!=o?o:null!=e.z,null!=n?n:null!=e.m)(r,e)}return (0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPolygon */ .Bi)(e)?K(r,e,o,n):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isPolyline */ .Rg)(e)?C(r,e,d(o,n)):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isMultipoint */ .U9)(e)?q(r,e,d(o,n)):void m.error("convertFromGeometry:unknown-geometry",new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to parse unknown geometry type '${e}'`))}function st(e,o,n,r){const s=e&&("coords"in e?e:e.geometry);if(null==s)return null;switch(o){case"esriGeometryPoint":{let t=x;return n&&r?t=z:n?t=Z:r&&(t=v),t(s)}case"esriGeometryMultipoint":return U(s,n,r);case"esriGeometryPolyline":return $(s,n,r);case"esriGeometryPolygon":return H(s,n,r);default:return m.error("convertToGeometry:unknown-geometry",new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to parse unknown geometry type '${o}'`)),null}}function ut(t,e){for(const o of e)t.push({attributes:o.attributes});return t}function lt(e,o,n,r,s){if(Pt(e),null==n)return ut(e,o);switch(n){case"esriGeometryPoint":return V(e,o,r,s);case"esriGeometryMultipoint":return O(e,o,r,s);case"esriGeometryPolyline":return R(e,o,r,s);case"esriGeometryPolygon":return D(e,o,r,s);default:m.error("convertToFeatureSet:unknown-geometry",new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to parse unknown geometry type '${n}'`))}return e}function ct(t){const{objectIdFieldName:e,spatialReference:o,transform:n,fields:r,hasM:s,hasZ:u,features:l,geometryType:c,exceededTransferLimit:i,uniqueIdField:f,queryGeometry:a,queryGeometryType:h}=t,d={features:lt([],l,c,u,s),fields:r,geometryType:c,objectIdFieldName:e,spatialReference:o,uniqueIdField:f,queryGeometry:st(a,h,!1,!1)};return n&&(d.transform=n),i&&(d.exceededTransferLimit=i),s&&(d.hasM=s),u&&(d.hasZ=u),d}function it(e,o){const n=new _OptimizedFeatureSet_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A,{hasM:r,hasZ:s,features:u,objectIdFieldName:l,spatialReference:c,geometryType:i,exceededTransferLimit:f,transform:h,fields:d}=e;return d&&(n.fields=d),n.geometryType=i??null,n.objectIdFieldName=l??o??null,n.spatialReference=c??null,n.objectIdFieldName?(u&&et(n.features,u,i,s,r,n.objectIdFieldName),f&&(n.exceededTransferLimit=f),r&&(n.hasM=r),s&&(n.hasZ=s),h&&(n.transform=h),n):(m.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function ft(t){const{transform:e,features:o,hasM:n,hasZ:r}=t;if(!e)return t;for(const s of o)null!=s.geometry&&It(s.geometry,s.geometry,n,r,e),null!=s.centroid&&It(s.centroid,s.centroid,n,r,e);return t.transform=null,t}function at(t,e){const{geometryType:o,features:n,hasM:r,hasZ:s}=e;if(!t)return e;for(let u=0;u<n.length;u++){const e=n[u],l=e.weakClone();l.geometry=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,ht(l.geometry,e.geometry,r,s,o,t),e.centroid&&(l.centroid=new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A,ht(l.centroid,e.centroid,r,s,"esriGeometryPoint",t)),n[u]=l}return e.transform=t,e}function ht(t,e,o,n,r,s,u=o,l=n){if(Ft(t),!e?.coords.length)return null;const c=g[r],{coords:i,lengths:f}=e,a=d(o,n),h=d(o&&u,n&&l),m=w(o,n,u,l);if(!f.length)return m(t.coords,i,0,0,M(s,i[0]),N(s,i[1])),Ft(t,a,0),t;let y,p,I,b,G=0,T=0,F=T;for(const d of f){if(d<c)continue;let e=0;T=F,I=y=M(s,i[G]),b=p=N(s,i[G+1]),m(t.coords,i,T,G,I,b),e++,G+=a,T+=h;for(let o=1;o<d;o++,G+=a)I=M(s,i[G]),b=N(s,i[G+1]),I===y&&b===p||(m(t.coords,i,T,G,I-y,b-p),T+=h,e++,y=I,p=b);e>=c&&(t.lengths.push(e),F=T)}return Pt(t.coords,F),t.coords.length?t:null}function dt(t,e,o,n,r,s,u=o,l=n){if(Ft(t),!e?.coords.length)return null;const c=g[r],{coords:i,lengths:f}=e,a=d(o,n),h=d(o&&u,n&&l),m=w(o,n,u,l);if(!f.length)return m(t.coords,i,0,0,i[0],i[1]),Ft(t,a,0),t;let y=0;const p=s*s;for(const d of f){if(d<c){y+=d*a;continue}const e=t.coords.length/h,o=y,n=y+(d-1)*a;m(t.coords,i,t.coords.length,o,i[o],i[o+1]),gt(t.coords,i,a,p,m,o,n),m(t.coords,i,t.coords.length,n,i[n],i[n+1]);const r=t.coords.length/h-e;r>=c?t.lengths.push(r):Pt(t.coords,e*h),y+=d*a}return t.coords.length?t:null}function mt(t,e,o,n){const r=t[e],s=t[e+1],u=t[o],l=t[o+1],c=t[n],i=t[n+1];let f=u,a=l,h=c-f,d=i-a;if(0!==h||0!==d){const t=((r-f)*h+(s-a)*d)/(h*h+d*d);t>1?(f=c,a=i):t>0&&(f+=h*t,a+=d*t)}return h=r-f,d=s-a,h*h+d*d}function gt(t,e,o,n,r,s,u){let l,c=n,i=0;for(let f=s+o;f<u;f+=o)l=mt(e,f,s,u),l>c&&(i=f,c=l);c>n&&(i-s>o&&gt(t,e,o,n,r,s,i),r(t,e,t.length,i,e[i],e[i+1]),u-i>o&&gt(t,e,o,n,r,i,u))}function yt(t,e,o,u){if(!e?.coords?.length)return null;const l=d(o,u);let c=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=l){const o=t[e],n=t[e+1];c=Math.min(c,o),f=Math.max(f,o),i=Math.min(i,n),a=Math.max(a,n)}}return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__.is)(t)?(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__/* .fromRectValues */ .BI)(t,c,i,f,a):(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_3__/* .fromValues */ .fA)(c,i,f,a,t),t}function pt(t,e,o,n){const r=d(o,n),{lengths:s,coords:u}=e;let l=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY,a=0;for(const h of s){let t=u[a],e=u[a+1];l=Math.min(t,l),c=Math.min(e,c),i=Math.max(t,i),f=Math.max(e,f),a+=r;for(let o=1;o<h;o++,a+=r){const o=u[a],n=u[a+1];t+=o,e+=n,o<0&&(l=Math.min(l,t)),o>0&&(i=Math.max(i,t)),n<0?c=Math.min(c,e):n>0&&(f=Math.max(f,e))}}return t[0]=l,t[1]=c,t[2]=i,t[3]=f,t}function It(t,e,n,r,s){const{coords:u,lengths:l}=e,c=d(n,r);if(!u.length)return t!==e&&Ft(t),t;(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_8__/* .assertIsSome */ .Lw)(s);const{originPosition:i,scale:f,translate:a}=s,h=xt;h.originPosition=i;const m=h.scale;m[0]=f[0]??1,m[1]=-(f[1]??1),m[2]=f[2]??1,m[3]=f[3]??1;const g=h.translate;if(g[0]=a[0]??0,g[1]=a[1]??0,g[2]=a[2]??0,g[3]=a[3]??0,!l.length){for(let e=0;e<c;++e)t.coords[e]=F(h,u[e],e);return t!==e&&Ft(t,c,0),t}let y=0;for(let o=0;o<l.length;o++){const e=l[o];t.lengths[o]=e;for(let o=0;o<c;++o)t.coords[y+o]=F(h,u[y+o],o);let n=t.coords[y],r=t.coords[y+1];y+=c;for(let o=1;o<e;o++,y+=c){n+=u[y]*m[0],r+=u[y+1]*m[1],t.coords[y]=n,t.coords[y+1]=r;for(let e=2;e<c;++e)t.coords[y+e]=F(h,u[y+e],e)}}return t!==e&&Ft(t,u.length,l.length),t}function bt(t,e,o,n,r,s){if(Ft(t),t.lengths.push(...e.lengths),o===r&&n===s)for(let u=0;u<e.coords.length;u++)t.coords.push(e.coords[u]);else{const u=d(o,n),l=w(o,n,r,s),c=e.coords;for(let e=0;e<c.length;e+=u)l(t.coords,c,t.coords.length,e,c[e],c[e+1])}return t}function wt(t,e,o,n,r){if(!e?.coords?.length)return null;const s=g[o],{coords:u,lengths:l}=e,c=w(n,r,n,r),i=d(n,r);let f=0,a=0,h=0,m=0;for(const d of l){a=m,c(t.coords,u,a,f,u[f],u[f+1]),f+=i;let e=u[f],o=u[f+1],n=e,r=o,l=o/e;a+=i,c(t.coords,u,a,f,n,r),f+=i;for(let s=2;s<d;s++){e=u[f],o=u[f+1];const s=o/e,h=l===s||!isFinite(l)&&!isFinite(s),d=h&&isFinite(s)?l>=0&&s>=0||l<=0&&s<=0:r>=0&&o>=0||r<=0&&o<=0;h&&d?(n+=e,r+=o):(n=e,r=o,a+=i),c(t.coords,u,a,f,n,r),f+=i,l=s}a+=i;const g=(a-m)/i;g>=s&&(t.lengths[h]=g,m=a,h++)}return t.coords.length>m&&(t.coords.length=m),t.lengths.length>h&&(t.lengths.length=h),t.coords.length&&t.lengths.length?t:null}function Mt(t,e,o,n){let r=0,s=t[n*e],u=t[n*(e+1)];for(let l=1;l<o;l++){const o=s+t[n*(e+l)],c=u+t[n*(e+l)+1],i=(o-s)*(c+u);s=o,u=c,r+=i}return.5*r}function Nt(t,e){const{coords:o,lengths:n}=t;let r=0,s=0;for(let u=0;u<n.length;u++){const t=n[u];s+=Mt(o,r,t,e),r+=t}return Math.abs(s)}function Gt(t,e){const o=t.clone(),n=t.coords,r=t.lengths;let s=0;for(let u=0;u<r.length;u++){const t=r[u];let l=n[e*s],c=n[e*s+1];for(let r=1;r<t;r++){const t=n[e*(s+r)],u=n[e*(s+r)+1],i=t-l,f=u-c;o.coords[e*(s+r)]=i,o.coords[e*(s+r)+1]=f,l=t,c=u}s+=t}return o}function Tt(t,e){if(null==t)return null;const o=t.clone(),n=t.coords,r=t.lengths;let s=0;for(let u=0;u<r.length;u++){const t=r[u];let l=n[e*s],c=n[e*s+1];for(let r=1;r<t;r++){const t=l+n[e*(s+r)],u=c+n[e*(s+r)+1];o.coords[e*(s+r)]=t,o.coords[e*(s+r)+1]=u,l=t,c=u}s+=t}return o}function Ft(t,e=0,o=0){Pt(t.lengths,o),Pt(t.coords,e)}function Pt(t,e=0){t.length!==e&&(t.length=e)}const xt={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};


/***/ }),

/***/ 94301:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _ExpressionInfo_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(54746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var p;let n=p=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new p({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:Boolean,json:{write:!0}})],n.prototype,"isAutoGenerated",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],n.prototype,"name",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],n.prototype,"alias",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],n.prototype,"onStatisticField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_ExpressionInfo_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A,json:{write:!0}})],n.prototype,"onStatisticExpression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],n.prototype,"statisticType",void 0),n=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.layers.support.AggregateField")],n);const a=n;


/***/ }),

/***/ 54746:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(24793);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let p=class extends((0,_core_Clonable_js__WEBPACK_IMPORTED_MODULE_1__/* .ClonableMixin */ .O)(_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY)){constructor(r){super(r),this.expression=null,this.title=null,this.returnType=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],p.prototype,"expression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],p.prototype,"title",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:String,json:{write:!0}})],p.prototype,"returnType",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__/* .subclass */ .$)("esri.layers.support.ExpressionInfo")],p);const i=p;


/***/ }),

/***/ 79005:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ Z)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(82256);
/* harmony import */ var _core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(90709);
/* harmony import */ var _fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42453);
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(12129);
/* harmony import */ var luxon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(34495);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function y(e){return"timeZone"in e}function _(e){return"timeZone"in e}function g(e){return"dateFieldsTimeZone"in e}const T=new Map;class Z{static fromJSON(e){return new Z(e.fields,e.timeZoneByFieldName)}static fromLayer(e){return new Z(e.fields??[],S(e))}static fromLayerJSON(e){return new Z(e.fields??[],S(e))}constructor(e=[],i){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=e||[],this._timeZoneByFieldName=i?new Map(i):null;const t=[];for(const s of this.fields){const e=s?.name,i=M(e);if(e&&i){const n=w(e);this._fieldsMap.set(e,s),this._fieldsMap.set(n,s),this._normalizedFieldsMap.set(i,s),t.push(`${n}:${s.type}:${this._timeZoneByFieldName?.get(e)}`),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isDateField */ .vE)(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isNumericField */ .WA)(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isObjectIDField */ .te)(s)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isGlobalIDField */ .Xz)(s)||(s.editable=null==s.editable||!!s.editable,s.nullable=null==s.nullable||!!s.nullable)}}t.sort(),this.uid=t.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isObjectIDField */ .te)(e)||(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isGlobalIDField */ .Xz)(e)||e.nullable||void 0!==(0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .getFieldDefaultValue */ .lD)(e)||this._requiredFields.push(e)}return this._requiredFields}equals(e){return this.uid===e?.uid}has(e){return null!=this.get(e)}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(w(e))??this._normalizedFieldsMap.get(M(e)),i&&this._fieldsMap.set(e,i),i)}getTimeZone(i){const s=this.get(i&&"string"!=typeof i?i.name:i);return s?this._timeZoneByFieldName?this._timeZoneByFieldName.get(s.name):"date"===s.type||"esriFieldTypeDate"===s.type?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.layers.support.FieldsIndex").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("getTimeZone:no-timezone-information",`no time zone information for field '${s.name}'`)),_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .utc */ .n$):N.has(s.type)?_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .unknown */ .L5:null:null}getLuxonTimeZone(e){const i=this.getTimeZone(e);return i?i===_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .unknown */ .L5?_core_sql_UnknownTimeZone_js__WEBPACK_IMPORTED_MODULE_3__/* .UnknownTimeZone */ .GB.instance:i===_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .utc */ .n$?luxon__WEBPACK_IMPORTED_MODULE_6__/* .FixedOffsetZone */ .mQ.utcInstance:(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getOrCreateMapValue */ .tE)(T,i,(()=>luxon__WEBPACK_IMPORTED_MODULE_6__/* .IANAZone */ .oh.create(i))):null}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isTimeOnlyField(e){return (0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isTimeOnlyField */ .OH)(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){return this.get(e)?.name??void 0}toJSON(){return{fields:this.fields.map((e=>(0,_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .isSerializable */ .Wj)(e)?e.toJSON():e)),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}}function w(e){return e.trim().toLowerCase()}function M(e){return (0,_fieldUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .normalizeFieldName */ .rS)(e)?.toLowerCase()??""}const N=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function S(e){const i=new Map;if(!e.fields)return i;const t=!0===e.datesInUnknownTimezone,{timeInfo:s,editFieldsInfo:n}=e,r=(s?"startField"in s?s.startField:s.startTimeField:"")??"",l=(s?"endField"in s?s.endField:s.endTimeField:"")??"",o=g(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromTimeReference */ .ZS)(e.dateFieldsTimeReference):null,d=n?y(n)?n.timeZone??o:n.dateFieldsTimeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromTimeReference */ .ZS)(n.dateFieldsTimeReference):o??_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .utc */ .n$:null,a=s?_(s)?s.timeZone??o:s.timeReference?(0,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .fromTimeReference */ .ZS)(s.timeReference):o:null,m=new Map([[w(n?.creationDateField??""),d],[w(n?.editDateField??""),d],[w(r),a],[w(l),a]]);for(const{name:u,type:f}of e.fields)if(N.has(f))i.set(u,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .unknown */ .L5);else if("date"!==f&&"esriFieldTypeDate"!==f)i.set(u,null);else if(t)i.set(u,_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .unknown */ .L5);else{const e=m.get(w(u??""))??o;i.set(u,e)}return i}


/***/ }),

/***/ 86155:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ C)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols.js + 1 modules
var symbols = __webpack_require__(30822);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/jsonMap.js
var jsonMap = __webpack_require__(59851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js
var reader = __webpack_require__(75094);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js
var writer = __webpack_require__(77542);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/labelUtils.js
var labelUtils = __webpack_require__(74639);
;// ../node_modules/@arcgis/core/layers/support/LabelExpressionInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var l;let n=l=class extends JSONSupport/* JSONSupport */.oY{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(r,e){return e.value?(0,labelUtils/* convertTemplatedStringToArcade */.mX)(e.value):r}writeExpression(r,e,s){null!=this.value&&(r=(0,labelUtils/* convertTemplatedStringToArcade */.mX)(this.value)),null!=r&&(e[s]=r)}clone(){return new l({expression:this.expression,title:this.title,value:this.value})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:{writerEnsuresNonNull:!0}}})],n.prototype,"expression",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("expression",["expression","value"])],n.prototype,"readExpression",null),(0,tslib_es6._)([(0,writer/* writer */.K)("expression")],n.prototype,"writeExpression",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],n.prototype,"title",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{read:!1,write:!1}})],n.prototype,"value",void 0),n=l=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.layers.support.LabelExpressionInfo")],n);const a=n;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/layerUtils.js
var layerUtils = __webpack_require__(40454);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaults.js
var defaults = __webpack_require__(26207);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/jsonUtils.js + 1 modules
var jsonUtils = __webpack_require__(38463);
;// ../node_modules/@arcgis/core/layers/support/LabelClass.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var h;const P=new jsonMap/* JSONMap */.J({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function x(e,r,t){return{enabled:!(0,layerUtils/* isSceneServiceLayer */.TU)(t?.layer)}}function L(e){return!e||"service"!==e.origin&&!("map-image"===e.layer?.type)}function g(e){return"map-image"===e?.type}function E(e){return!!g(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function j(e){return L(e)||E(e?.layer)}let A=h=class extends JSONSupport/* JSONSupport */.oY{static evaluateWhere(e,r){const t=(e,r,t)=>{switch(r){case"=":return e==t;case"<>":return e!=t;case">":return e>t;case">=":return e>=t;case"<":return e<t;case"<=":return e<=t}return!1};try{if(null==e)return!0;const o=e.split(" ");if(3===o.length)return t(r[o[0]],o[1],o[2]);if(7===o.length){const e=t(r[o[0]],o[1],o[2]),i=o[3],n=t(r[o[4]],o[5],o[6]);switch(i){case"AND":return e&&n;case"OR":return e||n}}return!1}catch(o){console.log("Error.: can't parse = "+e)}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=defaults/* defaultTextSymbol2D */.Hk,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,r){const t=r.labelExpressionInfo;if(!t||!t.value&&!t.expression)return e}writeLabelExpression(e,r,t){if(this.labelExpressionInfo)if(null!=this.labelExpressionInfo.value)e=(0,labelUtils/* templateStringToSql */.D3)(this.labelExpressionInfo.value);else if(null!=this.labelExpressionInfo.expression){const r=(0,labelUtils/* getSingleFieldArcadeExpression */.tH)(this.labelExpressionInfo.expression);r&&(e="["+r+"]")}null!=e&&(r[t]=e)}writeLabelExpressionInfo(e,r,t,o){if(null==e&&null!=this.labelExpression&&L(o))e=new a({expression:this.getLabelExpressionArcade()});else if(!e)return;const i=e.toJSON(o);i.expression&&(r[t]=i)}writeMaxScale(e,r){(e||this.minScale)&&(r.maxScale=e)}writeMinScale(e,r){(e||this.maxScale)&&(r.minScale=e)}getLabelExpression(){return (0,labelUtils/* getLabelExpression */.XJ)(this)}getLabelExpressionArcade(){return (0,labelUtils/* getLabelExpressionArcade */.BI)(this)}getLabelExpressionSingleField(){return (0,labelUtils/* getLabelExpressionSingleField */.rU)(this)}hash(){return JSON.stringify(this)}clone(){return new h({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:(0,lang/* clone */.o8)(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:(0,lang/* clone */.o8)(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],A.prototype,"name",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:x}}}}})],A.prototype,"allowOverrun",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:x}}}}})],A.prototype,"deconflictionStrategy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:{overridePolicy(e,r,t){return this.labelExpressionInfo&&"service"===t?.origin&&E(t.layer)?{enabled:!1}:{allowNull:!0}}}}})],A.prototype,"labelExpression",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("labelExpression")],A.prototype,"readLabelExpression",null),(0,tslib_es6._)([(0,writer/* writer */.K)("labelExpression")],A.prototype,"writeLabelExpression",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:a,json:{write:{overridePolicy:(e,r,t)=>j(t)?{allowNull:!0}:{enabled:!1}}}})],A.prototype,"labelExpressionInfo",void 0),(0,tslib_es6._)([(0,writer/* writer */.K)("labelExpressionInfo")],A.prototype,"writeLabelExpressionInfo",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:P.apiValues,json:{type:P.jsonValues,read:P.read,write:P.write}})],A.prototype,"labelPlacement",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],A.prototype,"labelPosition",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number})],A.prototype,"maxScale",void 0),(0,tslib_es6._)([(0,writer/* writer */.K)("maxScale")],A.prototype,"writeMaxScale",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number})],A.prototype,"minScale",void 0),(0,tslib_es6._)([(0,writer/* writer */.K)("minScale")],A.prototype,"writeMinScale",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:x}}}}})],A.prototype,"repeatLabel",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,cast:screenUtils/* toPt */.cr,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:x}}}}})],A.prototype,"repeatLabelDistance",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({types:symbols/* symbolTypesLabel */.em,json:{origins:{"web-scene":{types:symbols/* symbolTypesLabel3D */.Rv,write:jsonUtils/* writeLabelSymbol */.oO,default:null}},write:jsonUtils/* writeLabelSymbol */.oO,default:null}})],A.prototype,"symbol",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{write:!0}})],A.prototype,"useCodedValues",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],A.prototype,"where",void 0),A=h=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.layers.support.LabelClass")],A);const C=A;


/***/ }),

/***/ 74639:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BI: () => (/* binding */ f),
/* harmony export */   D3: () => (/* binding */ u),
/* harmony export */   XJ: () => (/* binding */ x),
/* harmony export */   mX: () => (/* binding */ w),
/* harmony export */   rU: () => (/* binding */ g),
/* harmony export */   tH: () => (/* binding */ _)
/* harmony export */ });
/* unused harmony exports getSingleFieldTemplatedString, sqlToTemplateString */
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n="__begin__",r="__end__",s=new RegExp(n,"ig"),t=new RegExp(r,"ig"),l=new RegExp("^"+n,"i"),o=new RegExp(r+"$","i"),i='"',a=i+" + ",c=" + "+i;function p(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function u(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function x(e){const n={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(n.expression=e.labelExpressionInfo.value,n.type="conventional"):e.labelExpressionInfo.expression&&(n.expression=e.labelExpressionInfo.expression,n.type="arcade"):null!=e.labelExpression&&(n.expression=p(e.labelExpression),n.type="conventional"),n}function f(e){const n=x(e);if(!n)return null;switch(n.type){case"conventional":return w(n.expression);case"arcade":return n.expression}return null}function g(e){const n=x(e);if(!n)return null;switch(n.type){case"conventional":return $(n.expression);case"arcade":return _(n.expression)}return null}function w(p){let u;return p?(u=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .replace */ .HC)(p,(e=>n+'$feature["'+e+'"]'+r)),u=l.test(u)?u.replace(l,""):i+u,u=o.test(u)?u.replace(o,""):u+i,u=u.replaceAll(s,a).replaceAll(t,c)):u='""',u}const E=/^\s*\{([^}]+)\}\s*$/i;function $(e){const n=e?.match(E);return n?.[1].trim()||null}const b=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,m=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,R=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function _(e){if(!e)return null;let n=b.exec(e)||m.exec(e);return n?n[1]||n[3]:(n=R.exec(e),n?n[2]:null)}


/***/ }),

/***/ 79682:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   w: () => (/* binding */ i),
/* harmony export */   z: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _LabelClass_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(86155);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.layers.support.labelingInfo"),l=/\[([^\[\]]+)\]/gi;function i(e,r,o){return e?e.map((e=>{const n=new _LabelClass_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A;if(n.read(e,o),n.labelExpression){const e=r.fields||r.layerDefinition?.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(l,((r,o)=>`[${s(o,e)}]`))}return n})):null}function s(e,r){if(!r)return e;const o=e.toLowerCase();for(let t=0;t<r.length;t++){const e=r[t].name;if(e.toLowerCase()===o)return e}return e}const a={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function c(e,o){const t=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__/* .clone */ .o8)(e);return t.some((e=>f(e,o)))?[]:t}function f(r,o){const t=r.labelPlacement,l=a[o];if(!r.symbol)return n.warn("No ILabelClass symbol specified."),!0;if(!l)return n.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${o}' is not supported`)),!0;if(!l.includes(t)){const e=l[0];t&&n.warn(`Found invalid label placement type ${t} for ${o}. Defaulting to ${e}`),r.labelPlacement=e}return!1}


/***/ }),

/***/ 20699:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ j)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/jsonMap.js
var jsonMap = __webpack_require__(59851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js
var reader = __webpack_require__(75094);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
;// ../node_modules/@arcgis/core/renderers/support/AuthoringInfoClassBreakInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var t;let p=t=class extends JSONSupport/* JSONSupport */.oY{constructor(r){super(r),this.minValue=0,this.maxValue=0}clone(){return new t({minValue:this.minValue,maxValue:this.maxValue})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0}})],p.prototype,"minValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0}})],p.prototype,"maxValue",void 0),p=t=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderer.support.AuthoringInfoClassBreakInfo")],p);

;// ../node_modules/@arcgis/core/renderers/support/AuthoringInfoFieldInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n;let AuthoringInfoFieldInfo_p=n=class extends JSONSupport/* JSONSupport */.oY{constructor(o){super(o),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new n({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:(0,lang/* clone */.o8)(this.classBreakInfos)})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],AuthoringInfoFieldInfo_p.prototype,"field",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],AuthoringInfoFieldInfo_p.prototype,"normalizationField",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],AuthoringInfoFieldInfo_p.prototype,"label",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[p],json:{write:!0}})],AuthoringInfoFieldInfo_p.prototype,"classBreakInfos",void 0),AuthoringInfoFieldInfo_p=n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderers.support.AuthoringInfoFieldInfo")],AuthoringInfoFieldInfo_p);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js
var cast = __webpack_require__(4130);
;// ../node_modules/@arcgis/core/renderers/support/AuthoringInfoVisualVariable.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var AuthoringInfoVisualVariable_n;const l=new jsonMap/* JSONMap */.J({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),AuthoringInfoVisualVariable_p=new jsonMap/* JSONMap */.J({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),a={key:e=>"number"==typeof e?"number":"string",typeMap:{number:Number,string:String},base:null},u=["high-to-low","above-and-below","centered-on","extremes"],m=[...new Set([...["high-to-low","above-and-below","centered-on","extremes","90-10","above","below"],...["high-to-low","above-and-below","90-10","above","below"]])],y=["seconds","minutes","hours","days","months","years"];let d=AuthoringInfoVisualVariable_n=class extends JSONSupport/* JSONSupport */.oY{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return"string"==typeof e||"number"==typeof e?e:null}castStartTime(e){return"string"==typeof e||"number"==typeof e?e:null}get style(){return"color"===this.type?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new AuthoringInfoVisualVariable_n({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};(0,tslib_es6._)([(0,property/* property */.MZ)({types:a,json:{write:!0}})],d.prototype,"endTime",void 0),(0,tslib_es6._)([(0,cast/* cast */.w)("endTime")],d.prototype,"castEndTime",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],d.prototype,"field",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0}})],d.prototype,"maxSliderValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0}})],d.prototype,"minSliderValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({types:a,json:{write:!0}})],d.prototype,"startTime",void 0),(0,tslib_es6._)([(0,cast/* cast */.w)("startTime")],d.prototype,"castStartTime",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:l.apiValues,value:null,json:{type:l.jsonValues,read:l.read,write:l.write}})],d.prototype,"style",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:m,value:null,json:{type:m,origins:{"web-scene":{type:u,write:{writer:(e,t)=>{u.includes(e)&&(t.theme=e)}}}},write:!0}})],d.prototype,"theme",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:AuthoringInfoVisualVariable_p.apiValues,json:{type:AuthoringInfoVisualVariable_p.jsonValues,read:AuthoringInfoVisualVariable_p.read,write:AuthoringInfoVisualVariable_p.write}})],d.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:y,json:{type:y,write:!0}})],d.prototype,"units",void 0),d=AuthoringInfoVisualVariable_n=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderers.support.AuthoringInfoVisualVariable")],d);const h=d;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/rest/support/colorRamps.js
var colorRamps = __webpack_require__(59740);
;// ../node_modules/@arcgis/core/renderers/support/AuthoringInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var c;const AuthoringInfo_h=new jsonMap/* JSONMap */.J({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),AuthoringInfo_y=new jsonMap/* JSONMap */.J({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),AuthoringInfo_m=new jsonMap/* JSONMap */.J({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),f=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],v=["high-to-low","above-and-below","above","below","90-10"],w=["flow-line","wave-front"],b=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let g=c=class extends JSONSupport/* JSONSupport */.oY{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?(0,colorRamps/* fromJSON */.r)(e):void 0}get fields(){return this.type&&"predominance"!==this.type?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&"relationship"!==this.type?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&"relationship"!==this.type?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return"flow"===this.type?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&"relationship"!==this.type?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e||this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new c({classificationMethod:this.classificationMethod,colorRamp:(0,lang/* clone */.o8)(this.colorRamp),fadeRatio:(0,lang/* clone */.o8)(this.fadeRatio),fields:this.fields?.slice(0),field1:(0,lang/* clone */.o8)(this.field1),field2:(0,lang/* clone */.o8)(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map((e=>e.clone())),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:AuthoringInfo_h.apiValues,value:null,json:{type:AuthoringInfo_h.jsonValues,read:AuthoringInfo_h.read,write:AuthoringInfo_h.write,origins:{"web-document":{default:"manual",type:AuthoringInfo_h.jsonValues,read:AuthoringInfo_h.read,write:AuthoringInfo_h.write}}}})],g.prototype,"classificationMethod",null),(0,tslib_es6._)([(0,property/* property */.MZ)({types:colorRamps/* types */.g,json:{write:!0}})],g.prototype,"colorRamp",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("colorRamp")],g.prototype,"readColorRamp",null),(0,tslib_es6._)([(0,property/* property */.MZ)({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g.prototype,"fadeRatio",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[String],value:null,json:{write:!0}})],g.prototype,"fields",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:AuthoringInfoFieldInfo_p,value:null,json:{write:!0}})],g.prototype,"field1",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:AuthoringInfoFieldInfo_p,value:null,json:{write:!0}})],g.prototype,"field2",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:w,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g.prototype,"flowTheme",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],g.prototype,"focus",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],g.prototype,"isAutoGenerated",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,value:null,json:{type:ensureType/* Integer */.jz,write:!0}})],g.prototype,"numClasses",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:f,json:{type:f,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],g.prototype,"lengthUnit",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g.prototype,"maxSliderValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g.prototype,"minSliderValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],g.prototype,"statistics",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],g.prototype,"standardDeviationInterval",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:AuthoringInfo_y.apiValues,value:null,json:{type:AuthoringInfo_y.jsonValues,read:AuthoringInfo_y.read,write:AuthoringInfo_y.write,origins:{"web-scene":{type:AuthoringInfo_m.jsonValues,write:{writer:AuthoringInfo_m.write,overridePolicy:e=>({enabled:"flow"!==e})}}}}})],g.prototype,"type",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[h],json:{write:!0}})],g.prototype,"visualVariables",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:b,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g.prototype,"univariateSymbolStyle",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:v,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],g.prototype,"univariateTheme",null),g=c=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderers.support.AuthoringInfo")],g);const j=g;


/***/ }),

/***/ 38785:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var s;let p=s=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(){super(...arguments),this.title=null}clone(){return new s({title:this.title})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:String,json:{write:!0}})],p.prototype,"title",void 0),p=s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.renderers.support.LegendOptions")],p);


/***/ }),

/***/ 27927:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Lh: () => (/* binding */ l),
/* harmony export */   O3: () => (/* binding */ u),
/* harmony export */   PU: () => (/* binding */ c),
/* harmony export */   YW: () => (/* binding */ y),
/* harmony export */   ex: () => (/* binding */ a),
/* harmony export */   hv: () => (/* binding */ m),
/* harmony export */   oQ: () => (/* binding */ s),
/* harmony export */   zp: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports createHeatmapImageData, createValueFunctionCursor */
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92504);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89882);
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25102);
/* harmony import */ var _chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(52712);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=2.4;function i(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .px2pt */ .PN)(t*a)}function c(t){return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(t)/a}function f(r,n,e,a){let{color:i,ratio:c}=n,{color:f,ratio:u}=e;if(u===c){const t=1e-6;1===u?c-=t:u+=t}const s=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)((a-c)/(u-c),0,1);(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_1__.l)(r,i.toArray(),f.toArray(),s)}function u(t){const r=512,n=new Uint8ClampedArray(4*r);if(t=t.filter((({ratio:t})=>t>=0&&t<=1)).sort(((t,r)=>t.ratio-r.ratio)).map((({color:t,ratio:r})=>({color:t,ratio:Math.max(r,.001)}))),t.length<1)return n;let o=t[0],a=t[0],i=1;const c=(0,_chunks_vec4f64_js__WEBPACK_IMPORTED_MODULE_2__.c)();for(let e=0;e<r;e++){const u=(e+.5)/r;for(;u>a.ratio&&i<t.length;)o=a,a=t[i++];f(c,o,a,u),n.set(c,4*e)}return n}function s(t,r,o,e){const{radius:a,fieldOffset:i,field:c}=r,f=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(a)),u=new Float64Array(o*e);let s,l=Number.NEGATIVE_INFINITY;const h=d(c,i),y=new Set;for(const n of t){const t=n.getCursor();for(;t.next();){const r=t.getObjectId();if(y.has(r))continue;y.add(r);const n=t.readLegacyPointGeometry(),a=128;if(n.x<-a||n.x>=o+a||n.y<-a||n.y>e+a)continue;const i=+h(t),c=Math.max(0,Math.round(n.x)-f),d=Math.max(0,Math.round(n.y)-f),g=Math.min(e,Math.round(n.y)+f),A=Math.min(o,Math.round(n.x)+f);for(let t=d;t<g;t++)for(let r=c;r<A;r++){const e=t*o+r,a=m(n.x-r,n.y-t,f);s=u[e]+=a*i,s>l&&(l=s)}}}return{matrix:u.buffer,max:l}}function l(t,r,n,o,e,a){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);const i=t.getImageData(0,0,r,r);n&&o&&i.data.set(new Uint8ClampedArray(h(r,n,o,e,a))),t.putImageData(i,0,0)}function h(r,n,o,e,a){const i=new Uint32Array(r*r),c="buffer"in n?n:new Float64Array(n),f="buffer"in o?new Uint32Array(o.buffer):new Uint32Array(new Uint8Array(o).buffer),u=f.length/(a-e);for(let s=0;s<c.length;s++){const r=c[s],n=Math.floor((r-e)*u);i[s]=f[(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .clamp */ .qE)(n,0,f.length-1)]}return i.buffer}function m(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function y(t,r){return"function"==typeof t?t:t?"string"==typeof r?r=>-1*+r[t]:n=>+n[t]+r:()=>1}function d(t,r){return null!=t?"string"==typeof r?r=>-1*+r.readAttribute(t):n=>+n.readAttribute(t)+r:t=>1}


/***/ }),

/***/ 10301:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(92976);
/* harmony import */ var _geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(99817);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m={unknown:1,inches:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","inches"),feet:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","feet"),"us-feet":(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","us-feet"),yards:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","yards"),miles:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","miles"),"nautical-miles":(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","nautical-miles"),millimeters:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","millimeters"),centimeters:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","centimeters"),decimeters:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","decimeters"),meters:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","meters"),kilometers:(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertUnit */ .oU)(1,"meters","kilometers"),"decimal-degrees":1/(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .lengthToDegrees */ .vl)(1,"meters",_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_1__/* .earth */ .$O.radius)};


/***/ }),

/***/ 14977:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ b)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/jsonMap.js
var jsonMap = __webpack_require__(59851);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/cast.js
var cast = __webpack_require__(4130);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js
var reader = __webpack_require__(75094);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js
var writer = __webpack_require__(77542);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/VisualVariable.js
var VisualVariable = __webpack_require__(57860);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/SizeStop.js
var SizeStop = __webpack_require__(68745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/VisualVariableLegendOptions.js
var VisualVariableLegendOptions = __webpack_require__(45327);
;// ../node_modules/@arcgis/core/renderers/visualVariables/support/SizeVariableLegendOptions.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var t;let i=t=class extends VisualVariableLegendOptions/* default */.A{constructor(){super(...arguments),this.customValues=null}clone(){return new t({title:this.title,showLegend:this.showLegend,customValues:this.customValues?.slice(0)})}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number],json:{write:!0}})],i.prototype,"customValues",void 0),i=t=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],i);const a=i;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js
var sizeVariableUtils = __webpack_require__(99412);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/visualVariableUtils.js
var visualVariableUtils = __webpack_require__(28479);
;// ../node_modules/@arcgis/core/renderers/visualVariables/SizeVariable.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var z;const v=new jsonMap/* JSONMap */.J({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),w=new jsonMap/* JSONMap */.J({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function g(e){if(null!=e)return"string"==typeof e||"number"==typeof e?(0,screenUtils/* toPt */.cr)(e):"size"===e.type?(0,sizeVariableUtils/* isSizeVariable */.of)(e)?e:(delete(e={...e}).type,new V(e)):void 0}function f(e,t,i){if("object"!=typeof e)return e;const s=new V;return s.read(e,i),s}let V=z=class extends VisualVariable/* default */.A{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:null!=this.valueExpression&&visualVariableUtils.viewScaleRE.test(this.valueExpression)}}set expression(e){Logger/* default */.A.getLogger(this).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){(0,sizeVariableUtils/* isSizeVariable */.of)(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),(0,sizeVariableUtils/* isSizeVariable */.of)(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return (0,sizeVariableUtils/* getInputValueType */.eh)(this)}set maxDataValue(e){e&&this.stops&&(Logger/* default */.A.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Logger/* default */.A.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return g(e)}readMaxSize(e,t,i){return f(e,t,i)}set minDataValue(e){e&&this.stops&&(Logger/* default */.A.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Logger/* default */.A.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return g(e)}readMinSize(e,t,i){return f(e,t,i)}get arcadeRequired(){return!!this.valueExpression||(null!=this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||null!=this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired)}set stops(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter((e=>!!e))).sort(((e,t)=>e.value-t.value)):e&&(Logger/* default */.A.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return (0,sizeVariableUtils/* getTransformationType */.KZ)(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,i,s,r){if("$view.scale"===e){if(r?.messages){const e=this.index,i="string"==typeof e?e:`visualVariables[${e}]`;r.messages.push(new Error/* default */.A("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:i+".valueExpression",context:r}))}}else i[s]=e}readValueUnit(e){return e?w.read(e):null}clone(){return new z({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,sizeVariableUtils/* isSizeVariable */.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,sizeVariableUtils/* isSizeVariable */.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===sizeVariableUtils/* TransformationType */._w.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===sizeVariableUtils/* TransformationType */._w.Stops){const e=this.stops;if(!e)return this;const t=e.map((e=>e.size)).reverse(),i=e.length;for(let s=0;s<i;s++)e[s].size=t[s];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map((e=>e.value||0))}};(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],V.prototype,"cache",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:v.apiValues,json:{type:v.jsonValues,origins:{"web-map":{read:!1}},read:v.read,write:v.write}})],V.prototype,"axis",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,value:null,json:{read:!1}})],V.prototype,"expression",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],V.prototype,"index",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,readOnly:!0})],V.prototype,"inputValueType",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:a,json:{write:!0}})],V.prototype,"legendOptions",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"maxDataValue",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"maxSize",null),(0,tslib_es6._)([(0,cast/* cast */.w)("maxSize")],V.prototype,"castMaxSize",null),(0,tslib_es6._)([(0,reader/* reader */.w)("maxSize")],V.prototype,"readMaxSize",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"minDataValue",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Number,value:null,json:{write:!0}})],V.prototype,"minSize",null),(0,tslib_es6._)([(0,cast/* cast */.w)("minSize")],V.prototype,"castMinSize",null),(0,tslib_es6._)([(0,reader/* reader */.w)("minSize")],V.prototype,"readMinSize",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],V.prototype,"normalizationField",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],V.prototype,"arcadeRequired",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String})],V.prototype,"scaleBy",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[SizeStop/* default */.A],value:null,json:{write:!0}})],V.prototype,"stops",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["outline"],json:{write:!0}})],V.prototype,"target",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,readOnly:!0})],V.prototype,"transformationType",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["size"],json:{type:["sizeInfo"]}})],V.prototype,"type",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],V.prototype,"useSymbolValue",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:String,json:{write:!0}})],V.prototype,"valueExpression",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("valueExpression",["valueExpression","expression"])],V.prototype,"readValueExpression",null),(0,tslib_es6._)([(0,writer/* writer */.K)("web-scene","valueExpression")],V.prototype,"writeValueExpressionWebScene",null),(0,tslib_es6._)([(0,property/* property */.MZ)({type:["radius","diameter","area","width","distance"],json:{write:!0}})],V.prototype,"valueRepresentation",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:w.apiValues,json:{write:w.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],V.prototype,"valueUnit",void 0),(0,tslib_es6._)([(0,reader/* reader */.w)("valueUnit")],V.prototype,"readValueUnit",null),V=z=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.renderers.visualVariables.SizeVariable")],V);const b=V;


/***/ }),

/***/ 57860:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59851);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21877);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4130);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73446);
/* harmony import */ var _support_VisualVariableLegendOptions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(45327);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONMap */ .J({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let u=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__/* .JSONSupport */ .oY{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return null==e?e:"function"==typeof e?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.getLogger(this).error(".field: field must be a string value"),null):(0,_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__/* .ensureString */ .GX)(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],u.prototype,"index",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:a.apiValues,readOnly:!0,json:{read:a.read,write:a.write}})],u.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:String,json:{write:!0}})],u.prototype,"field",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_5__/* .cast */ .w)("field")],u.prototype,"castField",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:String,json:{write:!0}})],u.prototype,"valueExpression",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:String,json:{write:!0}})],u.prototype,"valueExpressionTitle",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({readOnly:!0})],u.prototype,"arcadeRequired",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({type:_support_VisualVariableLegendOptions_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A,json:{write:!0}})],u.prototype,"legendOptions",void 0),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.renderers.visualVariables.VisualVariable")],u);const c=u;


/***/ }),

/***/ 68745:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var p;let i=p=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(r){super(r),this.label=null,this.size=null,this.value=null}clone(){return new p({label:this.label,size:this.size,value:this.value})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:String,json:{write:!0}})],i.prototype,"label",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,cast:_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .toPt */ .cr,json:{write:!0}})],i.prototype,"size",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:Number,json:{write:!0}})],i.prototype,"value",void 0),i=p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.renderers.visualVariables.support.SizeStop")],i);const l=i;


/***/ }),

/***/ 45327:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(63863);
/* harmony import */ var _support_LegendOptions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(38785);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var t;let p=t=class extends _support_LegendOptions_js__WEBPACK_IMPORTED_MODULE_6__/* .LegendOptions */ .q{constructor(){super(...arguments),this.showLegend=null}clone(){return new t({title:this.title,showLegend:this.showLegend})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__/* .property */ .MZ)({type:Boolean,json:{write:!0}})],p.prototype,"showLegend",void 0),p=t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__/* .subclass */ .$)("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],p);const i=p;


/***/ }),

/***/ 99412:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KZ: () => (/* binding */ a),
/* harmony export */   Yf: () => (/* binding */ n),
/* harmony export */   _w: () => (/* binding */ i),
/* harmony export */   eh: () => (/* binding */ t),
/* harmony export */   gf: () => (/* binding */ l),
/* harmony export */   of: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var n,i;function e(n){return n&&"esri.renderers.visualVariables.SizeVariable"===n.declaredClass}function l(n){return null!=n&&!isNaN(n)&&isFinite(n)}function t(i){return i.valueExpression?n.Expression:i.field&&"string"==typeof i.field?n.Field:n.Unknown}function a(e,l){const a=l||t(e),o=e.valueUnit||"unknown";return a===n.Unknown?i.Constant:e.stops?i.Stops:null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?i.ClampedLinear:"unknown"===o?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?i.Proportional:i.Additive:i.Identity:i.RealWorldSize}!function(n){n.Unknown="unknown",n.Expression="expression",n.Field="field"}(n||(n={})),function(n){n.Unknown="unknown",n.Stops="stops",n.ClampedLinear="clamped-linear",n.Proportional="proportional",n.Additive="additive",n.Constant="constant",n.Identity="identity",n.RealWorldSize="real-world-size"}(i||(i={}));


/***/ }),

/***/ 28479:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAllSizes: () => (/* binding */ N),
/* harmony export */   getColor: () => (/* binding */ p),
/* harmony export */   getOpacity: () => (/* binding */ v),
/* harmony export */   getRotationAngle: () => (/* binding */ b),
/* harmony export */   getSize: () => (/* binding */ V),
/* harmony export */   getSizeForValue: () => (/* binding */ C),
/* harmony export */   getSizeFromNumberOrVariable: () => (/* binding */ x),
/* harmony export */   getSizeRangeAtScale: () => (/* binding */ D),
/* harmony export */   getVisualVariableValues: () => (/* binding */ M),
/* harmony export */   viewScaleRE: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96220);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25707);
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(73345);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(539);
/* harmony import */ var _support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(10301);
/* harmony import */ var _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(99412);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),u=new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,f=Math.PI,d=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function p(a,i,n){const r="visualVariables"in a&&a.visualVariables?a.visualVariables.find((e=>"color"===e.type)):a;if(!r)return;if("esri.renderers.visualVariables.ColorVariable"!==r.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const t="number"==typeof i,s=t?null:i,l=s?.attributes;let o=t?i:null;const u=r.field,{ipData:f,hasExpression:d}=r.cache;let p=r.cache.compiledFunc;if(!u&&!d){const e=r.stops;return e&&e[0]&&e[0].color}if("number"!=typeof o)if(d){if(null==n?.arcade)return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:n.viewingMode,scale:n.scale,spatialReference:n.spatialReference},a=n.arcade.arcadeUtils,i=a.getViewInfo(e),t=a.createExecContext(s,i,n.timeZone);if(!p){const e=a.createSyntaxTree(r.valueExpression);p=a.createFunction(e),r.cache.compiledFunc=p}o=a.executeFunction(p,t)}else l&&(o=l[u]);const v=r.normalizationField,b=null!=l&&null!=v?parseFloat(l[v]):void 0;if(null!=o&&(!v||t||!isNaN(b)&&0!==b)){isNaN(b)||t||(o/=b);const a=k(o,f);if(a){const i=a[0],t=a[1],s=i===t?r.stops[i].color:_Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.blendColors(r.stops[i].color,r.stops[t].color,a[2],null!=n?n.color:void 0);return new _Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(s)}}}function v(e,a,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"opacity"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.OpacityVariable"!==n.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const r="number"==typeof a,t=r?null:a,s=t?.attributes;let l=r?a:null;const o=n.field,{ipData:u,hasExpression:f}=n.cache;let d=n.cache.compiledFunc;if(!o&&!f){const e=n.stops;return e&&e[0]&&e[0].opacity}if("number"!=typeof l)if(f){if(null==i?.arcade)return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),s=a.createExecContext(t,r,i.timeZone);if(!d){const e=a.createSyntaxTree(n.valueExpression);d=a.createFunction(e),n.cache.compiledFunc=d}l=a.executeFunction(d,s)}else s&&(l=s[o]);const p=n.normalizationField,v=null!=s&&null!=p?parseFloat(s[p]):void 0;if(null!=l&&(!p||r||!isNaN(v)&&0!==v)){isNaN(v)||r||(l/=v);const e=k(l,u);if(e){const a=e[0],i=e[1];if(a===i)return n.stops[a].opacity;{const r=n.stops[a].opacity;return r+(n.stops[i].opacity-r)*e[2]}}}}function b(e,a,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"rotation"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.RotationVariable"!==n.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const r=n.axis||"heading",t="heading"===r&&"arithmetic"===n.rotationType?90:0,s="heading"===r&&"arithmetic"===n.rotationType?-1:1,l="number"==typeof a?null:a,o=l?.attributes,u=n.field,{hasExpression:f}=n.cache;let d=n.cache.compiledFunc,p=0;if(!u&&!f)return p;if(f){if(null==i?.arcade)return void c.error("Use of arcade expressions requires an arcade context");const e={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},a=i.arcade.arcadeUtils,r=a.getViewInfo(e),t=a.createExecContext(l,r,i.timeZone);if(!d){const e=a.createSyntaxTree(n.valueExpression);d=a.createFunction(e),n.cache.compiledFunc=d}p=a.executeFunction(d,t)}else o&&(p=o[u]||0);return p="number"!=typeof p||isNaN(p)?null:t+s*p,p}function m(e,a,i){const n="number"==typeof a,r=n?null:a,t=r?.attributes;let l=n?a:null;const{isScaleDriven:u}=e.cache;let f=e.cache.compiledFunc;if(u){const a=null!=i?i.scale:void 0,n=null!=i?i.view:void 0;l=null==a||"3d"===n?h(e):a}else if(!n)switch(e.inputValueType){case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .InputValueType */ .Yf.Expression:{if(null==i?.arcade)return void c.error("Use of arcade expressions requires an arcade context");const a={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},n=i.arcade.arcadeUtils,t=n.getViewInfo(a),s=n.createExecContext(r,t,i.timeZone);if(!f){const a=n.createSyntaxTree(e.valueExpression);f=n.createFunction(a),e.cache.compiledFunc=f}l=n.executeFunction(f,s);break}case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .InputValueType */ .Yf.Field:t&&(l=t[e.field]);break;case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .InputValueType */ .Yf.Unknown:l=null}if(!(0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isValidNumber */ .gf)(l))return null;if(n||!e.normalizationField)return l;const d=t?parseFloat(t[e.normalizationField]):null;return (0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isValidNumber */ .gf)(d)&&0!==d?l/d:null}function h(e){let a=null,i=null;const n=e.stops;return n?(a=n[0].value,i=n[n.length-1].value):(a=e.minDataValue||0,i=e.maxDataValue||0),(a+i)/2}function V(e,a,i){const n="visualVariables"in e&&e.visualVariables?e.visualVariables.find((e=>"size"===e.type)):e;if(!n)return;if("esri.renderers.visualVariables.SizeVariable"!==n.declaredClass)return void c.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const r=C(m(n,a,i),n,a,i,n.cache.ipData);return null==r||isNaN(r)?0:r}function x(e,a,i){return null==e?null:(0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isSizeVariable */ .of)(e)?V(e,a,i):(0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isValidNumber */ .gf)(e)?e:null}function y(e,a,i){return (0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isValidNumber */ .gf)(i)&&e>i?i:(0,_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .isValidNumber */ .gf)(a)&&e<a?a:e}function w(e,a,i,n){return e+((x(a.minSize,i,n)||a.minDataValue)??0)}function g(e,a,i){const n=e.stops;let r=n?.length&&n[0].size;return null==r&&(r=e.minSize),x(r,a,i)}function z(e,a,i,n){const r=(e-a.minDataValue)/(a.maxDataValue-a.minDataValue),t=x(a.minSize,i,n),s=x(a.maxSize,i,n),l=null!=n?n.shape:void 0;if(e<=a.minDataValue)return t;if(e>=a.maxDataValue)return s;if(null==t||null==s)return null;if("area"===a.scaleBy&&l){const e="circle"===l,a=e?f*(t/2)**2:t*t,i=a+r*((e?f*(s/2)**2:s*s)-a);return e?2*Math.sqrt(i/f):Math.sqrt(i)}return t+r*(s-t)}function F(e,a,i,n){const r=null!=n?n.shape:void 0,t=e/a.minDataValue,s=x(a.minSize,i,n),l=x(a.maxSize,i,n);let o=null;return o="circle"===r?2*Math.sqrt(t*(s/2)**2):"square"===r||"diamond"===r||"image"===r?Math.sqrt(t*s**2):t*s,y(o,s,l)}function S(e,a,i,n,r){const[t,s,l]=k(e,r);if(t===s)return x(a.stops?.[t].size,i,n);{const e=x(a.stops?.[t].size,i,n);return e+(x(a.stops?.[s].size,i,n)-e)*l}}function E(e,a,i,n){const t=(n?.resolution??1)*_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .meterIn */ .j[a.valueUnit],s=x(a.minSize,i,n),l=x(a.maxSize,i,n),{valueRepresentation:o}=a;let c=null;return c="area"===o?2*Math.sqrt(e/f)/t:"radius"===o||"distance"===o?2*e/t:e/t,y(c,s,l)}function U(e){return e}function C(e,a,i,n,r){switch(a.transformationType){case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Additive:return w(e,a,i,n);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Constant:return g(a,i,n);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.ClampedLinear:return z(e,a,i,n);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Proportional:return F(e,a,i,n);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Stops:return S(e,a,i,n,r);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.RealWorldSize:return E(e,a,i,n);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Identity:return U(e);case _sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .TransformationType */ ._w.Unknown:return null}}function D(e,a,i){const{isScaleDriven:n}=e.cache;if(!(n&&"3d"===i||a))return null;const r={scale:a,view:i};let t=x(e.minSize,u,r),s=x(e.maxSize,u,r);if(null!=t||null!=s){if(t>s){const e=s;s=t,t=e}return{minSize:t,maxSize:s}}}function M(e,a,i){if(!e.visualVariables)return;const n=[],r=[],t=[],s=[],l=[];for(const o of e.visualVariables)switch(o.type){case"color":r.push(o);break;case"opacity":t.push(o);break;case"rotation":l.push(o);break;case"size":s.push(o)}return r.forEach((e=>{const r=p(e,a,i);n.push({variable:e,value:r})})),t.forEach((e=>{const r=v(e,a,i);n.push({variable:e,value:r})})),l.forEach((e=>{const r=b(e,a,i);n.push({variable:e,value:r})})),s.forEach((e=>{const r=V(e,a,i);n.push({variable:e,value:r})})),n.filter((e=>null!=e.value))}function k(e,a){if(!a)return;let i=0,n=a.length-1;return a.some(((a,r)=>e<a?(n=r,!0):(i=r,!1))),[i,n,(e-a[i])/(a[n]-a[i])]}function N(e,a,n){const r=["proportional","proportional","proportional"];for(const t of e){const e=t.useSymbolValue?"symbol-value":V(t,a,n);switch(t.axis){case"width":r[0]=e;break;case"depth":r[1]=e;break;case"height":r[2]=e;break;case"width-and-depth":r[0]=e,r[1]=e;break;case"all":case void 0:case null:r[0]=e,r[1]=e,r[2]=e;break;default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .neverReached */ .Xb)(t.axis)}}return r}


/***/ }),

/***/ 80196:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(96220);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(19251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(73446);
/* harmony import */ var _core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(28902);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/* harmony import */ var _ColorRamp_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(87673);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var m;let c=m=class extends _ColorRamp_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A{constructor(o){super(o),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new m({fromColor:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.fromColor),toColor:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__/* .clone */ .o8)(this.toColor),algorithm:this.algorithm})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_enumeration_js__WEBPACK_IMPORTED_MODULE_5__/* .enumeration */ .e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],c.prototype,"algorithm",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,json:{type:[_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__/* .Integer */ .jz],write:!0}})],c.prototype,"fromColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:_Color_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,json:{type:[_core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__/* .Integer */ .jz],write:!0}})],c.prototype,"toColor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__/* .property */ .MZ)({type:["algorithmic"]})],c.prototype,"type",void 0),c=m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.rest.support.AlgorithmicColorRamp")],c);const a=c;


/***/ }),

/***/ 87673:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21877);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(63863);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let e=class extends _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_1__/* .JSONSupport */ .oY{constructor(r){super(r),this.type=null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({readOnly:!0,json:{read:!1,write:!0}})],e.prototype,"type",void 0),e=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__/* .subclass */ .$)("esri.rest.support.ColorRamp")],e);const p=e;


/***/ }),

/***/ 17771:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(73446);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(63863);
/* harmony import */ var _AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(80196);
/* harmony import */ var _ColorRamp_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(87673);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var c;let m=c=class extends _ColorRamp_js__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A{constructor(o){super(o),this.colorRamps=null,this.type="multipart"}clone(){return new c({colorRamps:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__/* .clone */ .o8)(this.colorRamps)})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:[_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A],json:{write:!0}})],m.prototype,"colorRamps",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__/* .property */ .MZ)({type:["multipart"]})],m.prototype,"type",void 0),m=c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_4__/* .subclass */ .$)("esri.rest.support.MultipartColorRamp")],m);const a=m;


/***/ }),

/***/ 59740:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ m),
/* harmony export */   r: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(80196);
/* harmony import */ var _ColorRamp_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87673);
/* harmony import */ var _MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17771);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m={key:"type",base:_ColorRamp_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A,typeMap:{algorithmic:_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A,multipart:_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A}};function p(o){return o?.type?"algorithmic"===o.type?_AlgorithmicColorRamp_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.fromJSON(o):"multipart"===o.type?_MultipartColorRamp_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.fromJSON(o):null:null}


/***/ }),

/***/ 13022:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   k: () => (/* binding */ s),
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _geometry_support_TileClipper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(87569);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r=512;let n;class s{constructor(t){this._geometry=t}next(){const t=this._geometry;return this._geometry=null,t}}function i(s,i){n||(n=new _geometry_support_TileClipper_js__WEBPACK_IMPORTED_MODULE_1__/* .TileClipper */ .O3(0,0,0,1));const y="esriGeometryPolygon"===s.geometryType,m=y?_geometry_support_TileClipper_js__WEBPACK_IMPORTED_MODULE_1__/* .GeometryType */ .dC.Polygon:_geometry_support_TileClipper_js__WEBPACK_IMPORTED_MODULE_1__/* .GeometryType */ .dC.LineString,l=y?3:2;let c,p;for(n.reset(m),n.setPixelMargin(i+1),n.setExtent(r);s.nextPath();)if(!(s.pathSize<l)){for(s.nextPoint(),c=s.x,p=-s.y,n.moveTo(c,p);s.nextPoint();)c=s.x,p=-s.y,n.lineTo(c,p);y&&n.close()}const f=n.result(!1);if(f){const e=_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.createEmptyOptimizedCIM(s.geometryType);for(const t of f){e.startPath();for(const o of t)e.pushXY(o.x,-o.y)}return e.reset(),e}return null}


/***/ }),

/***/ 29659:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ A),
  c: () => (/* binding */ g)
});

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectAddControlPoints.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{static local(){return null===e.instance&&(e.instance=new e),e.instance}execute(e,s,n,i,o){return new t(e,s,n)}}e.instance=null;class t{constructor(e,t,s){this._inputGeometries=e,this._angleTolerance=void 0!==t.angleTolerance?t.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}next(){let e=this._inputGeometries.next();for(;e;){if("esriGeometryPolygon"===e.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===e.geometryType)this._isClosed=!1;else{if("esriGeometryEnvelope"!==e.geometryType){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null}_processPath(e){if(e.nextPoint()){const t=e.x,s=e.y;let n=t,i=s,o=e.pathSize,l=0,r=0,a=0,h=0,c=0,_=0;this._isClosed&&++o;for(let u=1;e.nextPoint()||u<o;++u){let x,m;this._isClosed&&u===o-1?(x=t,m=s):(x=e.x,m=e.y);const y=x-n,g=m-i,C=Math.sqrt(y*y+g*g);if(u>1&&C>0&&a>0){(l*y+r*g)/C/a<=this._maxCosAngle&&e.setControlPointAt(u-1)}1===u&&(h=y,c=g,_=C),C>0&&(n=x,i=m,l=y,r=g,a=C)}if(this._isClosed&&a>0&&_>0){(l*h+r*c)/_/a<=this._maxCosAngle&&e.setControlPointAt(0)}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/geometryCursorCollectUtils.js
var geometryCursorCollectUtils = __webpack_require__(18159);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMPlacements.js
var CIMPlacements = __webpack_require__(82250);
;// ../node_modules/@arcgis/core/symbols/cim/CIMCursor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function CIMCursor_e(t){return t[4]}function CIMCursor_r(t,e){t[4]=e}class s{constructor(e,r=!0,s=!0,i=0){this.isClosed=!1,this.geometryCursor=null,this.geometryCursor=!r&&"esriGeometryPolygon"===e.geometryType||!s&&"esriGeometryPolyline"===e.geometryType?null:e,this.geomUnitsPerPoint=i,this.iteratePath=!1,this.internalPlacement=new CIMPlacements/* Placement */.W}next(){if(!this.geometryCursor)return null;for(;this.iteratePath||this.geometryCursor.nextPath();){this.geometryCursor.seekPathStart();const t=this.processPath(this.geometryCursor);if(t)return t}return this.geometryCursor=null,null}}class i{constructor(t,e,r,s=0){this.isClosed=!1,this.inputGeometries=t,this.acceptPolygon=e,this.acceptPolyline=r,this.geomUnitsPerPoint=s,this.iteratePath=!1,this.multiPathCursor=null}next(){for(;;){if(!this.multiPathCursor){let t=this.inputGeometries.next();for(;t&&(this.isClosed=this.acceptPolygon&&"esriGeometryPolygon"===t.geometryType||"esriGeometryEnvelope"===t.geometryType,this.multiPathCursor=t,!this.multiPathCursor);)t=this.inputGeometries.next();if(!this.multiPathCursor)return null}for(;this.iteratePath||this.multiPathCursor.nextPath();){this.multiPathCursor.seekPathStart();const t=this.processPath(this.multiPathCursor);if(t)return t}this.multiPathCursor=null}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
;// ../node_modules/@arcgis/core/symbols/cim/CurveHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const CurveHelper_n=.03;class CurveHelper_s{constructor(t=0,e=!1){}isEmpty(t){if(!t.nextPoint())return!0;let e,n,s,r;for(e=t.x,n=t.y;t.nextPoint();e=n,n=r)if(s=t.x,r=t.y,s!==e||r!==n)return t.seekPathStart(),!1;return t.seekPathStart(),!0}normalize(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);0!==e&&(t[0]/=e,t[1]/=e)}getLength(t,e,n,s){const r=n-t,o=s-e;return Math.sqrt(r*r+o*o)}getSegLength(t){const[[e,n],[s,r]]=t;return this.getLength(e,n,s,r)}getCoord2D(t,e,n,s,r){return[t+(n-t)*r,e+(s-e)*r]}getSegCoord2D(t,e){const[[n,s],[r,o]]=t;return this.getCoord2D(n,s,r,o,e)}getAngle(t,e,n,s,r){const o=n-t,i=s-e;return Math.atan2(i,o)}getAngleCS(t,e,n,s,r){const o=n-t,i=s-e,u=Math.sqrt(o*o+i*i);return u>0?[o/u,i/u]:[1,0]}getSegAngleCS(t,e){const[[n,s],[r,o]]=t;return this.getAngleCS(n,s,r,o,e)}cut(t,e,n,s,r,o){return[r<=0?[t,e]:this.getCoord2D(t,e,n,s,r),o>=1?[n,s]:this.getCoord2D(t,e,n,s,o)]}getSubCurve(e,n,s){const r=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM("esriGeometryPolyline");return this.appendSubCurve(r,e,n,s)?r:null}appendSubCurve(t,e,n,s){t.startPath(),e.seekPathStart();let r=0,o=!0;if(!e.nextPoint())return!1;let i=e.x,u=e.y;for(;e.nextPoint();){const h=this.getLength(i,u,e.x,e.y);if(0!==h){if(o){if(r+h>n){const l=(n-r)/h;let a=1,c=!1;r+h>=s&&(a=(s-r)/h,c=!0);const f=this.cut(i,u,e.x,e.y,l,a);if(f&&t.pushPoints(f),c)break;o=!1}}else{if(r+h>s){const n=this.cut(i,u,e.x,e.y,0,(s-r)/h);n&&t.pushPoint(n[1]);break}t.pushXY(e.x,e.y)}r+=h,i=e.x,u=e.y}else i=e.x,u=e.y}return!0}getCIMPointAlong(t,e){if(!t.nextPoint())return null;let n,s,r,o,i=0;for(n=t.x,s=t.y;t.nextPoint();n=r,s=o){r=t.x,o=t.y;const u=this.getLength(n,s,r,o);if(0!==u){if(i+u>e){const t=(e-i)/u;return this.getCoord2D(n,s,r,o,t)}i+=u}}return null}offset(t,n,s,r,o){if(!t||t.length<2)return null;let i=0,u=t[i++],h=i;for(;i<t.length;){const e=t[i];e[0]===u[0]&&e[1]===u[1]||(i!==h&&(t[h]=t[i]),u=t[h++]),i++}const l=t[0][0]===t[h-1][0]&&t[0][1]===t[h-1][1];if(l&&--h,h<(l?3:2))return null;const a=[];u=l?t[h-1]:null;let c=t[0];for(let f=0;f<h;f++){const o=f===h-1?l?t[0]:null:t[f+1];if(u)if(o){const t=[o[0]-c[0],o[1]-c[1]];this.normalize(t);const i=[c[0]-u[0],c[1]-u[1]];this.normalize(i);const h=i[0]*t[1]-i[1]*t[0],l=i[0]*t[0]+i[1]*t[1];if(0===h&&1===l){c=o;continue}if(h>=0==n<=0){if(l<1){const e=[t[0]-i[0],t[1]-i[1]];this.normalize(e);const s=Math.sqrt((1+l)/2);if(s>1/r){const t=-Math.abs(n)/s;a.push([c[0]-e[0]*t,c[1]-e[1]*t])}}}else switch(s){case enums/* GeometricEffectOffsetMethod */.xw.Mitered:{const e=Math.sqrt((1+l)/2);if(e>0&&1/e<r){const s=[t[0]-i[0],t[1]-i[1]];this.normalize(s);const r=Math.abs(n)/e;a.push([c[0]-s[0]*r,c[1]-s[1]*r]);break}}case enums/* GeometricEffectOffsetMethod */.xw.Bevelled:a.push([c[0]+i[1]*n,c[1]-i[0]*n]),a.push([c[0]+t[1]*n,c[1]-t[0]*n]);break;case enums/* GeometricEffectOffsetMethod */.xw.Rounded:if(l<1){a.push([c[0]+i[1]*n,c[1]-i[0]*n]);const e=Math.floor(2.5*(1-l));if(e>0){const s=1/e;let r=s;for(let o=1;o<e;o++,r+=s){const e=[i[1]*(1-r)+t[1]*r,-i[0]*(1-r)-t[0]*r];this.normalize(e),a.push([c[0]+e[0]*n,c[1]+e[1]*n])}}a.push([c[0]+t[1]*n,c[1]-t[0]*n])}break;case enums/* GeometricEffectOffsetMethod */.xw.Square:default:if(h<0)a.push([c[0]+(i[1]+i[0])*n,c[1]+(i[1]-i[0])*n]),a.push([c[0]+(t[1]-t[0])*n,c[1]-(t[0]+t[1])*n]);else{const e=Math.sqrt((1+Math.abs(l))/2),s=[t[0]-i[0],t[1]-i[1]];this.normalize(s);const r=n/e;a.push([c[0]-s[0]*r,c[1]-s[1]*r])}}}else{const t=[c[0]-u[0],c[1]-u[1]];this.normalize(t),a.push([c[0]+t[1]*n,c[1]-t[0]*n])}else{const t=[o[0]-c[0],o[1]-c[1]];this.normalize(t),a.push([c[0]+t[1]*n,c[1]-t[0]*n])}u=c,c=o}return a.length<(l?3:2)?null:(l&&a.push([a[0][0],a[0][1]]),a)}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectArrow.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=1.7320508075688772,u=5,h=enums/* GeometricEffectArrowType */.oF.OpenEnded;class EffectArrow_p{static local(){return null===EffectArrow_p.instance&&(EffectArrow_p.instance=new EffectArrow_p),EffectArrow_p.instance}execute(t,e,r,n,o){return new P(t,e,r)}}EffectArrow_p.instance=null;class P extends i{constructor(t,e,r){super(t,!1,!0),this._curveHelper=new CurveHelper_s,this._width=(void 0!==e.width?e.width:u)*r,this._arrowType=void 0!==e.geometricEffectArrowType?e.geometricEffectArrowType:void 0!==e.arrowType?e.arrowType:h,this._offsetFlattenError=CurveHelper_n*r}processPath(e){const r=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM(e.geometryType);switch(this._arrowType){case enums/* GeometricEffectArrowType */.oF.OpenEnded:default:this._constructSimpleArrow(r,e,!0);break;case enums/* GeometricEffectArrowType */.oF.Block:this._constructSimpleArrow(r,e,!1);break;case enums/* GeometricEffectArrowType */.oF.Crossed:this._constructCrossedArrow(r,e)}return r}_constructSimpleArrow(t,r,n){const o=r.pathLength();let s=this._width;o<2*s&&(s=o/2);const i=this._curveHelper.getSubCurve(r,0,o-s);if(!i||!i.nextPath())return;i.seekPathStart();const c=s/2;if(this._curveHelper.isEmpty(i))return;const u=(0,geometryCursorCollectUtils/* collectPath */.A)(i),h=this._constructOffset(u,-c);if(!h)return;const p=this._constructOffset(u,c);if(!p)return;const P=this._constructArrowBasePoint(h,-c/2);if(!P)return;const l=this._constructArrowBasePoint(p,c/2);if(!l)return;r.seekInPath(r.pathSize-1);const f=[r.x,r.y];t.pushPath(p),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(l),t.nextPoint(),t.setControlPoint(),t.pushPoint(f),t.nextPoint(),t.setControlPoint(),t.pushPoint(P),t.nextPoint(),t.setControlPoint(),t.pushPoints(h.reverse()),t.setControlPoint(),n||(t.setControlPointAt(0),t.setControlPointAt(t.pathSize-1),t.pushPoint(p[0])),t.reset()}_constructCrossedArrow(t,r){const n=r.pathLength();let o=this._width;n<o*(1+c+1)&&(o=n/(1+c+1)),r.seekPathStart();const s=this._curveHelper.getSubCurve(r,0,n-o*(1+c));if(!s)return;s.nextPath();const i=o/2;if(this._curveHelper.isEmpty(s))return;const u=(0,geometryCursorCollectUtils/* collectPath */.A)(s),h=this._constructOffset(u,i);if(!h)return;const p=this._constructOffset(u,-i);if(!p)return;const P=this._curveHelper.getSubCurve(r,0,n-o);if(!P)return;if(P.nextPath(),this._curveHelper.isEmpty(P))return;const l=(0,geometryCursorCollectUtils/* collectPath */.A)(P),f=this._constructOffset(l,i);if(!f)return;const a=this._constructOffset(l,-i);if(!a)return;const _=f[f.length-1],m=this._constructArrowBasePoint(f,i/2);if(!m)return;const C=a[a.length-1],w=this._constructArrowBasePoint(a,-i/2);if(!w)return;r.seekInPath(r.pathSize-1);const x=[r.x,r.y];t.pushPath(h),t.nextPath(),t.nextPoint(),t.setControlPoint(),t.pushPoint(C),t.nextPoint(),t.setControlPoint(),t.pushPoint(w),t.nextPoint(),t.setControlPoint(),t.pushPoint(x),t.nextPoint(),t.setControlPoint(),t.pushPoint(m),t.nextPoint(),t.setControlPoint(),t.pushPoint(_),t.nextPoint(),t.setControlPoint(),t.pushPoints(p.reverse()),t.nextPoint(),t.setControlPoint(),t.reset()}_constructOffset(t,e){return this._curveHelper.offset(t,e,enums/* GeometricEffectOffsetMethod */.xw.Rounded,4,this._offsetFlattenError)}_constructArrowBasePoint(t,e){if(!t||t.length<2)return null;const r=t[t.length-2],n=t[t.length-1],o=[n[0]-r[0],n[1]-r[1]];return this._curveHelper.normalize(o),[n[0]+o[1]*e,n[1]-o[0]*e]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry.js
var geometry = __webpack_require__(17639);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMEffects.js
var CIMEffects = __webpack_require__(13022);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectBuffer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class m{static local(){return null===m.instance&&(m.instance=new m),m.instance}execute(e,t,i,s,r,n){return new l(e,t,i,s,r,n)}}m.instance=null;class l{constructor(e,t,i,n,o,m){this._inputGeometries=e,this._tileKey=n,this._geometryEngine=o,this._curveHelper=new CurveHelper_s,this._size=(void 0!==t.size?t.size:1)*i,this._maxInflateSize=m*i,this._offsetFlattenError=CurveHelper_n*i}next(){let s;for(;s=this._inputGeometries.next();){if(0===this._size)return s;if("esriGeometryEnvelope"===s.geometryType)if(this._size>0){const i=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM(s.geometryType),r=(0,geometryCursorCollectUtils/* collectMultipath */.x)(s)[0],o=this._curveHelper.offset(r,this._size,enums/* GeometricEffectOffsetMethod */.xw.Rounded,4,this._offsetFlattenError);if(o)return i.pushPath(o),i}else if(this._size<0){const t=s.asJSON();if(Math.min(t.xmax-t.xmin,t.ymax-t.ymin)+2*this._size>0)return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({xmin:t.xmin-this._size,xmax:t.xmax+this._size,ymin:t.ymin-this._size,ymax:t.ymax+this._size})}const r=this._geometryEngine;if(null==r)return null;const m=this._tileKey?(0,CIMEffects/* clipCursorToTileExtent */.q)(s,this._maxInflateSize):s;if(!m)continue;const l=r.buffer(SpatialReference/* default */.A.WebMercator,m.asJSON(),this._size,1);return l?GeometryCursor/* GeometryCursor */.z.fromJSONCIM(l):null}return null}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectControlMeasureLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectControlMeasureLine_e{static local(){return null===EffectControlMeasureLine_e.instance&&(EffectControlMeasureLine_e.instance=new EffectControlMeasureLine_e),EffectControlMeasureLine_e.instance}execute(s,t,i,h,e){return new r(s,t,i)}}EffectControlMeasureLine_e.instance=null;class r{constructor(s,t,i){this._defaultPointSize=20,this._inputGeometries=s,this._geomUnitsPerPoint=i,this._rule=t.rule??enums/* GeometricEffectControlMeasureLineRule */.uQ.FullGeometry,this._defaultSize=this._defaultPointSize*i}next(){let i;for(;i=this._inputGeometries.next();){const h=this._processGeom((0,geometryCursorCollectUtils/* collectMultipath */.x)(i));if(h&&h.length)return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({paths:h})}return null}_clone(s){return[s[0],s[1]]}_mid(s,t){return[(s[0]+t[0])/2,(s[1]+t[1])/2]}_mix(s,t,i,h){return[s[0]*t+i[0]*h,s[1]*t+i[1]*h]}_add(s,t){return[s[0]+t[0],s[1]+t[1]]}_add2(s,t,i){return[s[0]+t,s[1]+i]}_sub(s,t){return[s[0]-t[0],s[1]-t[1]]}_dist(s,t){return Math.sqrt((s[0]-t[0])*(s[0]-t[0])+(s[1]-t[1])*(s[1]-t[1]))}_norm(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}_normalize(s,t=1){const i=t/this._norm(s);s[0]*=i,s[1]*=i}_leftPerpendicular(s){const t=-s[1],i=s[0];s[0]=t,s[1]=i}_leftPerp(s){return[-s[1],s[0]]}_rightPerpendicular(s){const t=s[1],i=-s[0];s[0]=t,s[1]=i}_rightPerp(s){return[s[1],-s[0]]}_dotProduct(s,t){return s[0]*t[0]+s[1]*t[1]}_crossProduct(s,t){return s[0]*t[1]-s[1]*t[0]}_rotateDirect(s,t,i){const h=s[0]*t-s[1]*i,e=s[0]*i+s[1]*t;s[0]=h,s[1]=e}_makeCtrlPt(s){const t=[s[0],s[1]];return CIMCursor_r(t,1),t}_addAngledTicks(s,t,i,h){const e=this._sub(i,t);this._normalize(e);const r=this._crossProduct(e,this._sub(h,t));let _;_=r>0?this._rightPerp(e):this._leftPerp(e);const c=Math.abs(r)/2,u=[];u.push([t[0]+(_[0]-e[0])*c,t[1]+(_[1]-e[1])*c]),u.push(t),u.push(i),u.push([i[0]+(_[0]+e[0])*c,i[1]+(_[1]+e[1])*c]),s.push(u)}_addBezier2(s,t,i,h,e){if(0==e--)return void s.push(h);const r=this._mid(t,i),_=this._mid(i,h),c=this._mid(r,_);this._addBezier2(s,t,r,c,e),this._addBezier2(s,c,_,h,e)}_addBezier3(s,t,i,h,e,r){if(0==r--)return void s.push(e);const _=this._mid(t,i),c=this._mid(i,h),u=this._mid(h,e),o=this._mid(_,c),n=this._mid(c,u),a=this._mid(o,n);this._addBezier3(s,t,_,o,a,r),this._addBezier3(s,a,n,u,e,r)}_add90DegArc(s,t,i,h,e){const r=e??this._crossProduct(this._sub(i,t),this._sub(h,t))>0,_=this._mid(t,i),c=this._sub(_,t);r?this._leftPerpendicular(c):this._rightPerpendicular(c),_[0]+=c[0],_[1]+=c[1],this._addBezier3(s,t,this._mix(t,.33333,_,.66667),this._mix(i,.33333,_,.66667),i,4)}_addArrow(s,t,i){const h=t[0],e=t[1],r=t[t.length-1],_=this._sub(h,e);this._normalize(_);const c=this._crossProduct(_,this._sub(r,e)),u=.5*c,o=this._leftPerp(_),n=[r[0]-o[0]*c,r[1]-o[1]*c],a=t.length-1,p=[];p.push(i?[-o[0],-o[1]]:o);let l=[-_[0],-_[1]];for(let d=1;d<a-1;d++){const s=this._sub(t[d+1],t[d]);this._normalize(s);const i=this._dotProduct(s,l),h=this._crossProduct(s,l),e=Math.sqrt((1+i)/2),r=this._sub(s,l);this._normalize(r),r[0]/=e,r[1]/=e,p.push(h<0?[-r[0],-r[1]]:r),l=s}p.push(this._rightPerp(l));for(let d=p.length-1;d>0;d--)s.push([t[d][0]+p[d][0]*u,t[d][1]+p[d][1]*u]);s.push([n[0]+p[0][0]*u,n[1]+p[0][1]*u]),s.push([n[0]+p[0][0]*c,n[1]+p[0][1]*c]),s.push(h),s.push([n[0]-p[0][0]*c,n[1]-p[0][1]*c]),s.push([n[0]-p[0][0]*u,n[1]-p[0][1]*u]);for(let d=1;d<p.length;d++)s.push([t[d][0]-p[d][0]*u,t[d][1]-p[d][1]*u])}_cp2(s,t,i){return s.length>=2?s[1]:this._add2(s[0],t*this._defaultSize,i*this._defaultSize)}_cp3(s,t,i,h){if(s.length>=3)return s[2];const e=this._mix(s[0],1-i,t,i),r=this._sub(t,s[0]);return this._normalize(r),this._rightPerpendicular(r),[e[0]+r[0]*h*this._defaultSize,e[1]+r[1]*h*this._defaultSize]}_arrowPath(s){if(s.length>2)return s;const t=s[0],i=this._cp2(s,-4,0),h=this._sub(t,i);this._normalize(h);const e=this._rightPerp(h);return[t,i,[t[0]+(e[0]-h[0])*this._defaultSize,t[1]+(e[1]-h[1])*this._defaultSize]]}_arrowLastSeg(s){const t=s[0],i=this._cp2(s,-4,0);let h;if(s.length>=3)h=s[s.length-1];else{const s=this._sub(t,i);this._normalize(s);const e=this._rightPerp(s);h=[t[0]+(e[0]-s[0])*this._defaultSize,t[1]+(e[1]-s[1])*this._defaultSize]}return[i,h]}_processGeom(s){if(!s)return null;const t=[];for(const e of s){if(!e||0===e.length)continue;const s=e.length;let r=e[0];switch(this._rule){case enums/* GeometricEffectControlMeasureLineRule */.uQ.PerpendicularFromFirstSegment:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,4),h=[];h.push(i),h.push(this._mid(r,s)),t.push(h);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ReversedFirstSegment:{const s=this._cp2(e,0,-1);t.push([s,r]);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.PerpendicularToSecondSegment:{const s=this._cp2(e,-4,1),i=this._cp3(e,s,.882353,-1.94),h=[];h.push(this._mid(s,i)),h.push(r),t.push(h);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.SecondSegmentWithTicks:{const s=this._cp2(e,-4,1),i=this._cp3(e,s,.882353,-1.94),h=this._sub(i,s);let _;_=this._crossProduct(h,this._sub(r,s))>0?this._rightPerp(_):this._leftPerp(h);const c=[];c.push([s[0]+(_[0]-h[0])/3,s[1]+(_[1]-h[1])/3]),c.push(s),c.push(i),c.push([i[0]+(_[0]+h[0])/3,i[1]+(_[1]+h[1])/3]),t.push(c);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.DoublePerpendicular:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,3),h=this._mid(r,s),_=this._sub(h,i);this._normalize(_);const c=this._crossProduct(_,this._sub(r,i));this._leftPerpendicular(_);const u=[];u.push(r),u.push([i[0]+_[0]*c,i[1]+_[1]*c]),t.push(u);const o=[];o.push([i[0]-_[0]*c,i[1]-_[1]*c]),o.push(s),t.push(o);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.OppositeToFirstSegment:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,3),h=this._mid(r,s),_=this._sub(h,i);this._normalize(_);const c=this._crossProduct(_,this._sub(r,i));this._leftPerpendicular(_);const u=[];u.push([i[0]+_[0]*c,i[1]+_[1]*c]),u.push([i[0]-_[0]*c,i[1]-_[1]*c]),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.TriplePerpendicular:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,4),h=this._mid(r,s),_=this._sub(h,i);this._normalize(_);const c=this._crossProduct(_,this._sub(r,i));this._leftPerpendicular(_);const u=[];u.push([i[0]+_[0]*c*.8,i[1]+_[1]*c*.8]),u.push([h[0]+.8*(r[0]-h[0]),h[1]+.8*(r[1]-h[1])]),t.push(u),t.push([i,h]);const o=[];o.push([i[0]-_[0]*c*.8,i[1]-_[1]*c*.8]),o.push([h[0]+.8*(s[0]-h[0]),h[1]+.8*(s[1]-h[1])]),t.push(o);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.HalfCircleFirstSegment:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,4),h=this._mid(r,s);let _=this._sub(s,r);const c=Math.cos(Math.PI/18),u=Math.sin(Math.PI/18),o=Math.sqrt((1+c)/2),n=Math.sqrt((1-c)/2),a=[];let p;this._crossProduct(_,this._sub(i,r))>0?(a.push(r),_=this._sub(r,h),p=s):(a.push(s),_=this._sub(s,h),p=r),this._rotateDirect(_,o,n),_[0]/=o,_[1]/=o;for(let t=1;t<=18;t++)a.push(this._add(h,_)),this._rotateDirect(_,c,u);a.push(p),t.push(a);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.HalfCircleSecondSegment:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,1,-1);let h=this._sub(r,s);this._normalize(h);const _=this._crossProduct(h,this._sub(i,s))/2;this._leftPerpendicular(h);const c=[s[0]+h[0]*_,s[1]+h[1]*_];h=this._sub(s,c);const u=Math.cos(Math.PI/18);let o=Math.sin(Math.PI/18);_>0&&(o=-o);const n=[s];for(let t=1;t<=18;t++)this._rotateDirect(h,u,o),n.push(this._add(c,h));t.push(n);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.HalfCircleExtended:{const i=this._cp2(e,0,-2),h=this._cp3(e,i,1,-1);let _;if(s>=4)_=e[3];else{const s=this._sub(r,i);_=this._add(h,s)}const c=this._dist(i,h)/2/.75,u=this._sub(i,r);this._normalize(u,c);const o=this._sub(h,_);this._normalize(o,c);const n=[_,h];t.push(n);const a=[this._clone(h)];this._addBezier3(a,h,this._add(h,o),this._add(i,u),i,4),a.push(r),t.push(a);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.OpenCircle:{const s=this._cp2(e,-2,0),i=this._sub(s,r),h=Math.cos(Math.PI/18),_=-Math.sin(Math.PI/18),c=[s];for(let t=1;t<=33;t++)this._rotateDirect(i,h,_),c.push(this._add(r,i));t.push(c);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.CoverageEdgesWithTicks:{const i=this._cp2(e,0,-1);let h,_;if(s>=3)h=e[2];else{const s=this._sub(i,r),t=this._leftPerp(s);h=[r[0]+t[0]-.25*s[0],r[1]+t[1]-.25*s[1]]}if(s>=4)_=e[3];else{const s=this._mid(r,i),t=this._sub(r,i);this._normalize(t),this._leftPerpendicular(t);const e=this._crossProduct(t,this._sub(h,s));this._rightPerpendicular(t),_=[h[0]+t[0]*e*2,h[1]+t[1]*e*2]}const c=this._sub(i,r);let u,o;u=this._crossProduct(c,this._sub(h,r))>0?this._rightPerp(c):this._leftPerp(c),o=[],o.push(h),o.push(r),o.push([r[0]+(u[0]-c[0])/3,r[1]+(u[1]-c[1])/3]),t.push(o),u=this._crossProduct(c,this._sub(_,i))>0?this._rightPerp(u):this._leftPerp(c),o=[],o.push([i[0]+(u[0]+c[0])/3,i[1]+(u[1]+c[1])/3]),o.push(i),o.push(_),t.push(o);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.GapExtentWithDoubleTicks:{const i=this._cp2(e,0,2),h=this._cp3(e,i,0,1);let _;if(s>=4)_=e[3];else{const s=this._sub(i,r);_=this._add(h,s)}this._addAngledTicks(t,r,i,this._mid(h,_)),this._addAngledTicks(t,h,_,this._mid(r,i));break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.GapExtentMidline:{const i=this._cp2(e,2,0),h=this._cp3(e,i,0,1);let _;if(s>=4)_=e[3];else{const s=this._sub(i,r);_=this._add(h,s)}const c=[];c.push(this._mid(r,h)),c.push(this._mid(i,_)),t.push(c);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.Chevron:{const i=this._cp2(e,-1,-1);let h;if(s>=3)h=e[2];else{const s=this._sub(i,r);this._leftPerpendicular(s),h=this._add(r,s)}t.push([i,this._makeCtrlPt(r),h]);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.PerpendicularWithArc:{const s=this._cp2(e,0,-2),i=this._cp3(e,s,.5,-1);let h=this._sub(s,r);const _=this._norm(h);h[0]/=_,h[1]/=_;const c=this._crossProduct(h,this._sub(i,r));let u=this._dotProduct(h,this._sub(i,r));u<.05*_?u=.05*_:u>.95*_&&(u=.95*_);const o=[r[0]+h[0]*u,r[1]+h[1]*u];this._leftPerpendicular(h);let n=[];n.push([o[0]-h[0]*c,o[1]-h[1]*c]),n.push([o[0]+h[0]*c,o[1]+h[1]*c]),t.push(n);const a=[s[0]+h[0]*c,s[1]+h[1]*c];h=this._sub(s,a);const p=Math.cos(Math.PI/18);let l=Math.sin(Math.PI/18);c<0&&(l=-l),n=[r,s];for(let t=1;t<=9;t++)this._rotateDirect(h,p,l),n.push(this._add(a,h));t.push(n);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ClosedHalfCircle:{const s=this._cp2(e,2,0),i=this._mid(r,s),h=this._sub(s,i),_=Math.cos(Math.PI/18),c=Math.sin(Math.PI/18),u=[r,s];for(let t=1;t<=18;t++)this._rotateDirect(h,_,c),u.push(this._add(i,h));t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.TripleParallelExtended:{const s=this._cp2(e,0,-2),h=this._cp3(e,s,1,-2),_=this._mid(r,s),c=this._sub(h,s);this._normalize(c);const u=Math.abs(this._crossProduct(c,this._sub(_,s)))/2,o=this._dist(s,h),n=[s,r];n.push([r[0]+c[0]*o*.5,r[1]+c[1]*o*.5]),t.push(n);const a=[];a.push([_[0]-c[0]*u,_[1]-c[1]*u]),a.push([_[0]+c[0]*o*.375,_[1]+c[1]*o*.375]),CIMCursor_r(a[a.length-1],1),a.push([_[0]+c[0]*o*.75,_[1]+c[1]*o*.75]),t.push(a);const p=[s,h];t.push(p);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ParallelWithTicks:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._sub(i,s);this._normalize(h);const _=this._crossProduct(h,this._sub(i,r));this._leftPerpendicular(h),this._addAngledTicks(t,r,s,i),this._addAngledTicks(t,this._mix(r,1,h,_),this._mix(s,1,h,_),this._mid(r,s));break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.Parallel:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._sub(s,r);this._normalize(h);const _=this._leftPerp(h),c=this._crossProduct(h,this._sub(i,r));let u=[r,s];t.push(u),u=[],u.push([r[0]+_[0]*c,r[1]+_[1]*c]),u.push([s[0]+_[0]*c,s[1]+_[1]*c]),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.PerpendicularToFirstSegment:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._mid(r,s),_=this._sub(s,r);this._normalize(_);const c=this._crossProduct(_,this._sub(i,r));this._leftPerpendicular(_);const u=[];u.push([h[0]-_[0]*c*.25,h[1]-_[1]*c*.25]),u.push([h[0]+_[0]*c*1.25,h[1]+_[1]*c*1.25]),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ParallelOffset:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._sub(s,r);this._normalize(h);const _=this._crossProduct(h,this._sub(i,r));this._leftPerpendicular(h);const c=[];c.push([r[0]-h[0]*_,r[1]-h[1]*_]),c.push([s[0]-h[0]*_,s[1]-h[1]*_]),t.push(c);const u=[];u.push([r[0]+h[0]*_,r[1]+h[1]*_]),u.push([s[0]+h[0]*_,s[1]+h[1]*_]),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.OffsetOpposite:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._sub(s,r);this._normalize(h);const _=this._crossProduct(h,this._sub(i,r));this._leftPerpendicular(h);const c=[];c.push([r[0]-h[0]*_,r[1]-h[1]*_]),c.push([s[0]-h[0]*_,s[1]-h[1]*_]),t.push(c);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.OffsetSame:{const s=this._cp2(e,3,0),i=this._cp3(e,s,.5,-1),h=this._sub(s,r);this._normalize(h);const _=this._crossProduct(h,this._sub(i,r));this._leftPerpendicular(h);const c=[];c.push([r[0]+h[0]*_,r[1]+h[1]*_]),c.push([s[0]+h[0]*_,s[1]+h[1]*_]),t.push(c);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.CircleWithArc:{let h=this._cp2(e,3,0);const _=this._cp3(e,h,.5,-1);let c,u;if(s>=4)c=e[3],u=this._crossProduct(this._sub(c,h),this._sub(_,h))>0;else{c=h,u=this._crossProduct(this._sub(c,r),this._sub(_,r))>0;const s=24*this._geomUnitsPerPoint,t=this._sub(c,r);this._normalize(t,s);const i=Math.sqrt(2)/2;this._rotateDirect(t,i,u?i:-i),h=this._add(r,t)}const o=this._sub(h,r),n=Math.cos(Math.PI/18),a=Math.sin(Math.PI/18),p=[h];for(let s=1;s<=36;s++)this._rotateDirect(o,n,a),p.push(this._add(r,o));this._add90DegArc(p,h,c,_,u),CIMCursor_r(p[p.length-8],1),t.push(p);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.DoubleJog:{let i,h,_=this._cp2(e,-3,1);if(i=s>=3?e[2]:this._add(r,this._sub(r,_)),s>=4)h=e[3];else{const s=r;r=_,h=i;const t=this._dist(r,s),e=this._dist(h,s);let c=30*this._geomUnitsPerPoint;.5*t<c&&(c=.5*t),.5*e<c&&(c=.5*e),_=this._mix(r,c/t,s,(t-c)/t),i=this._mix(h,c/e,s,(e-c)/e)}const c=this._mid(r,_),u=this._mid(h,i),o=this._dist(r,_),n=this._dist(i,h);let a=Math.min(o,n)/8;a=Math.min(a,24*this._geomUnitsPerPoint);const p=Math.cos(Math.PI/4);let l=this._sub(r,_);this._normalize(l,a),this._crossProduct(l,this._sub(h,_))>0?this._rotateDirect(l,p,-p):this._rotateDirect(l,p,p);let d=[];d.push(_),d.push(this._add(c,l)),d.push(this._sub(c,l)),d.push(r),t.push(d),l=this._sub(h,i),this._normalize(l,a),this._crossProduct(l,this._sub(r,i))<0?this._rotateDirect(l,p,p):this._rotateDirect(l,p,-p),d=[],d.push(i),d.push(this._add(u,l)),d.push(this._sub(u,l)),d.push(h),t.push(d);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.PerpendicularOffset:{const s=this._cp2(e,-4,1),i=this._cp3(e,s,.882353,-1.94),h=this._sub(i,s);this._crossProduct(h,this._sub(r,s))>0?this._rightPerpendicular(h):this._leftPerpendicular(h);const _=[h[0]/8,h[1]/8],c=this._sub(this._mid(s,i),_);t.push([c,r]);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.LineExcludingLastSegment:{const s=this._arrowPath(e),i=[];let h=s.length-2;for(;h--;)i.push(s[h]);t.push(i);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.MultivertexArrow:{const s=this._arrowPath(e),i=[];this._addArrow(i,s,!1),t.push(i);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.CrossedArrow:{const s=this._arrowPath(e),i=[];this._addArrow(i,s,!0),t.push(i);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ChevronArrow:{const[s,i]=this._arrowLastSeg(e),h=10*this._geomUnitsPerPoint,_=this._sub(r,s);this._normalize(_);const c=this._crossProduct(_,this._sub(i,s)),u=this._leftPerp(_),o=[i[0]-u[0]*c*2,i[1]-u[1]*c*2],n=[];n.push([i[0]+_[0]*h,i[1]+_[1]*h]),n.push(r),n.push([o[0]+_[0]*h,o[1]+_[1]*h]),t.push(n);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.ChevronArrowOffset:{const[s,i]=this._arrowLastSeg(e),h=this._sub(r,s);this._normalize(h);const _=this._crossProduct(h,this._sub(i,s));this._leftPerpendicular(h);const c=[i[0]-h[0]*_,i[1]-h[1]*_],u=[];u.push([c[0]+h[0]*_*.5,c[1]+h[1]*_*.5]),u.push(this._mid(c,r)),u.push([c[0]-h[0]*_*.5,c[1]-h[1]*_*.5]),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.PartialFirstSegment:{const[s,i]=this._arrowLastSeg(e),h=this._sub(r,s);this._normalize(h);const _=this._crossProduct(h,this._sub(i,s));this._leftPerpendicular(h);const c=[i[0]-h[0]*_,i[1]-h[1]*_];t.push([s,c]);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.Arch:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,1),h=this._sub(r,s),_=this._mix(i,1,h,.55),c=this._mix(i,1,h,-.55),u=[r];this._addBezier2(u,r,_,i,4),this._addBezier2(u,i,c,s,4),t.push(u);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.CurvedParallelTicks:{const s=this._cp2(e,-4,1),i=this._cp3(e,s,.882353,-1.94),h=this._sub(i,s);this._crossProduct(h,this._sub(r,s))>0?this._rightPerpendicular(h):this._leftPerpendicular(h);const _=[h[0]/8,h[1]/8],c=this._sub(this._mid(s,i),_),u=this._sub(this._mix(s,.75,i,.25),_),o=this._sub(this._mix(s,.25,i,.75),_),n=[s];this._addBezier2(n,s,u,c,3),this._addBezier2(n,c,o,i,3),t.push(n);for(let e=0;e<8;e++){const s=n[2*e+1],i=[this._clone(s)];i.push(this._add(s,[h[0]/4,h[1]/4])),t.push(i)}break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.Arc90Degrees:{const s=this._cp2(e,0,-1),i=this._cp3(e,s,.5,1),h=[s];this._add90DegArc(h,s,r,i),t.push(h);break}case enums/* GeometricEffectControlMeasureLineRule */.uQ.FullGeometry:default:t.push(e)}}return t}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectCut.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectCut_r{static local(){return null===EffectCut_r.instance&&(EffectCut_r.instance=new EffectCut_r),EffectCut_r.instance}execute(e,t,i,r,n){return new EffectCut_u(e,t,i)}}EffectCut_r.instance=null;class EffectCut_u extends i{constructor(e,t,r){super(e,!0,!0),this._curveHelper=new CurveHelper_s,this._beginCut=(void 0!==t.beginCut?t.beginCut:1)*r,this._endCut=(void 0!==t.endCut?t.endCut:1)*r,this._middleCut=(void 0!==t.middleCut?t.middleCut:0)*r,this._invert=void 0!==t.invert&&t.invert,this._beginCut<0&&(this._beginCut=0),this._endCut<0&&(this._endCut=0),this._middleCut<0&&(this._middleCut=0)}processPath(t){const{_beginCut:i,_endCut:r,_middleCut:u}=this,n=t.pathLength(),s=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._invert){if(0!==i||0!==r||0!==u)if(i+r+u>=n)for(s.startPath();t.nextPoint();)s.pushXY(t.x,t.y);else this._curveHelper.appendSubCurve(s,t,0,i),this._curveHelper.appendSubCurve(s,t,.5*(n-u),.5*(n+u)),this._curveHelper.appendSubCurve(s,t,n-r,r)}else if(0===i&&0===r&&0===u)for(s.startPath();t.nextPoint();)s.pushXY(t.x,t.y);else i+r+u<n&&(0===u?this._curveHelper.appendSubCurve(s,t,i,n-r):(this._curveHelper.appendSubCurve(s,t,i,.5*(n-u)),this._curveHelper.appendSubCurve(s,t,.5*(n+u),n-r)));return 0===s.totalSize?null:s}}

;// ../node_modules/@arcgis/core/symbols/cim/GeometryWalker.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=1e-7;class GeometryWalker_i{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return 0===this._values.length}size(){return this._values.length}init(t,e,s=!0){if(this._setEmpty(),!t||0===t.length)return!1;for(let i=0;i<t.length;i++){let e=Math.abs(t[i]);s&&e<n&&(e=n),this._values.push(e),this._length+=e}return e&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(t){const e=this._values?this._values.length:0;for(let s=0;s<e;++s)this._values[s]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}addValue(t){this._length+=t,this._values.push(t)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}class GeometryWalker_h{constructor(){this.pt=null,this.ca=0,this.sa=0}}var GeometryWalker_r;!function(t){t[t.FAIL=0]="FAIL",t[t.END=1]="END",t[t.CONTINUE=2]="CONTINUE"}(GeometryWalker_r||(GeometryWalker_r={}));class a{constructor(){this.reset()}reset(){this.segment=null,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return null!==this.segment}copyTo(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}class o extends CurveHelper_s{constructor(t=0,e=!1){super(t,e),this._tolerance=CurveHelper_n,this._currentPosition=new a}updateTolerance(t){this._tolerance=CurveHelper_n*t}init(t,e,s=!0){return s?(this._patternLength=e.length(),this._partExtPtGap=e.extPtGap,this._partCtrlPtGap=e.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._pathCursor=t,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(t,e=GeometryWalker_r.FAIL){const s=new a;return!!this._nextPosition(t,s,null,e)&&(s.copyTo(this._currentPosition),!0)}curPointAndAngle(t){t.pt=this._getPoint(this._currentPosition);const[e,s]=this._getAngleCS(this._currentPosition);t.ca=e,t.sa=s}nextPointAndAngle(t,e,s=GeometryWalker_r.FAIL){const n=new a;if(!this._nextPosition(t,n,null,s))return!1;n.copyTo(this._currentPosition),e.pt=this._getPoint(n);const[i,h]=this._getAngleCS(n);return e.ca=i,e.sa=h,!0}nextCurve(e){if(0===e)return null;const s=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM("esriGeometryPolyline");s.startPath(),s.nextPath();const n=new a;return this._nextPosition(e,n,s,GeometryWalker_r.END)?(n.copyTo(this._currentPosition),s):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){return this._currentPosition.segment[1]}getPt(t){return this._pathCursor.seekInPath(t),[this._pathCursor.x,this._pathCursor.y]}getSeg(t){return[this.getPt(t),this.getPt(t+1)]}_nextPosition(t,e,s,n){if(this._currentPosition.isPathEnd)return!1;let i=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(i/=this._currentPosition.segmentLength),this._currentPosition.copyTo(e);e.abscissa+t*this._partLengthRatio>e.segmentLength+this._tolerance;){if(s){if(0===s.pathSize)if(0===i){const t=e.segment[0];s.pushXY(t[0],t[1])}else s.pushPoint(this.getSegCoord2D(e.segment,i));const t=e.segment[1];s.pushXY(t[0],t[1])}if(i=0,t-=(e.segmentLength-e.abscissa)/this._partLengthRatio,this._partSegCount)e.segment=this._nextSegment(),e.segmentLength=this.getSegLength(e.segment),e.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return n!==GeometryWalker_r.FAIL&&(e.segmentLength=this.getSegLength(e.segment),e.isPartEnd=!0,n===GeometryWalker_r.END?(e.abscissa=e.segmentLength,e.isPathEnd=!0):e.abscissa=e.segmentLength+t,!0);this._currentPosition.copyTo(e)}}if(e.abscissa+=t*this._partLengthRatio,s){0===s.pathSize&&(0===i?s.pushPoint(e.segment[0]):s.pushPoint(this.getSegCoord2D(e.segment,i)));const t=e.abscissa/e.segmentLength;1===t?s.pushPoint(e.segment[1]):s.pushPoint(this.getSegCoord2D(e.segment,t))}return this._partSegCount||Math.abs(e.abscissa-e.segmentLength)<this._tolerance&&(e.isPathEnd=this._partIsLast,e.isPartEnd=!0),!0}_getPoint(t){const e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._currentPosition.segment,e)}_getAngleCS(t){const e=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._currentPosition.segment,e)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.getSegLength(this._nextSegment()),this._partSegCount++,this._pathCursor.getControlPointAt(this._getEndPointIndex())){this._partIsLast=!this._hasNextSegment();break}let t=this._partSegCount;for(;t;)this._previousSegment(),--t;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.getSegLength(this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const e=this._getStartPointIndex();this._ctrlPtBegin=this._pathCursor.getControlPointAt(e);let s=e+this._partSegCount+1;if(s>=this._pathCursor.pathSize&&(s=0),this._ctrlPtEnd=this._pathCursor.getControlPointAt(s),this._patternLength>0){const t=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,e=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let s=Math.round((this._partLength-(t+e))/this._patternLength);s<=0&&(s=t+e>0?0:1),this._partLengthRatio=this._partLength/(t+e+s*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._pathCursor.pathSize-2}_previousSegment(){return this.getSeg(--this._seg)}_nextSegment(){return this.getSeg(++this._seg)}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectDashes.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectDashes_n{static local(){return null===EffectDashes_n.instance&&(EffectDashes_n.instance=new EffectDashes_n),EffectDashes_n.instance}execute(t,e,s,i,r){return new EffectDashes_h(t,e,s)}}EffectDashes_n.instance=null;class EffectDashes_h extends i{constructor(t,e,s){super(t,!0,!0),this._firstCurve=null,this._walker=new o,this._walker.updateTolerance(s),this._endings=e.lineDashEnding,this._customDashPos=-(e.offsetAlongLine??0)*s,this._offsetAtEnd=(e.customEndingOffset??0)*s,this._pattern=new GeometryWalker_i,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(s)}processPath(s){if(0===this._pattern.length()){this.iteratePath=!1;const i=(0,geometryCursorCollectUtils/* collectPath */.A)(s);return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({paths:[i]})}if(!this.iteratePath){let r=!0;switch(this._endings){case enums/* LineDashEnding */.yS.HalfPattern:case enums/* LineDashEnding */.yS.HalfGap:default:this._pattern.extPtGap=0;break;case enums/* LineDashEnding */.yS.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case enums/* LineDashEnding */.yS.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case enums/* LineDashEnding */.yS.NoConstraint:this.isClosed||(r=!1);break;case enums/* LineDashEnding */.yS.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const a=s.pathLength();if(this._pattern.isEmpty()||a<.1*this._pattern.length()){const i=(0,geometryCursorCollectUtils/* collectPath */.A)(s);return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({paths:[i]})}if(!this._walker.init(s,this._pattern,r)){const i=(0,geometryCursorCollectUtils/* collectPath */.A)(s);return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({paths:[i]})}}let r;if(this.iteratePath)r=this._pattern.nextValue();else{let t;switch(this._endings){case enums/* LineDashEnding */.yS.HalfPattern:default:t=.5*this._pattern.firstValue();break;case enums/* LineDashEnding */.yS.HalfGap:t=.5*-this._pattern.lastValue();break;case enums/* LineDashEnding */.yS.FullGap:t=-this._pattern.lastValue();break;case enums/* LineDashEnding */.yS.FullPattern:t=0;break;case enums/* LineDashEnding */.yS.NoConstraint:case enums/* LineDashEnding */.yS.Custom:t=-this._customDashPos}let e=t/this._pattern.length();e-=Math.floor(e),t=e*this._pattern.length(),this._pattern.reset(),r=this._pattern.nextValue();let s=!1;for(;t>=r;)t-=r,r=this._pattern.nextValue(),s=!s;r-=t,s?(this._walker.nextPosition(r),r=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(r),r=this._pattern.nextValue(),this._walker.nextPosition(r),r=this._pattern.nextValue())}let a=this._walker.nextCurve(r);if(a)if(this._walker.isPathEnd()){if(this.iteratePath=!1,this._firstCurve){for(this._firstCurve.nextPath();this._firstCurve.nextPoint();)a.pushXY(this._firstCurve.x,this._firstCurve.y);this._firstCurve=null}}else r=this._pattern.nextValue(),!this._walker.nextPosition(r)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(a.pushCursor(this._firstCurve),this._firstCurve=null)):this.iteratePath=!0;else this.iteratePath=!1,a=this._firstCurve,this._firstCurve=null;return a?.reset(),a}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectDonut.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectDonut_s{static local(){return null===EffectDonut_s.instance&&(EffectDonut_s.instance=new EffectDonut_s),EffectDonut_s.instance}execute(t,e,i,n,s,m){return new EffectDonut_r(t,e,i,n,s,m)}}EffectDonut_s.instance=null;class EffectDonut_r{constructor(t,e,n,s,r,m){switch(this._inputGeometries=t,this._tileKey=s,this._geometryEngine=r,this._maxInflateSize=m*n,this._width=(void 0!==e.width?e.width:2)*n,e.method){case enums/* GeometricEffectDonutMethod */.M1.Mitered:case enums/* GeometricEffectDonutMethod */.M1.Bevelled:case enums/* GeometricEffectDonutMethod */.M1.Rounded:case enums/* GeometricEffectDonutMethod */.M1.TrueBuffer:case enums/* GeometricEffectDonutMethod */.M1.Square:}this._option=e.option}next(){let i;for(;i=this._inputGeometries.next();){if("esriGeometryEnvelope"===i.geometryType&&this._width>0){const e=i.asJSON();return Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width<0?i:GeometryCursor/* GeometryCursor */.z.fromJSONCIM({paths:[[[e.xmin+this._width,e.ymin+this._width],[e.xmax-this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]],[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}if("esriGeometryPolygon"===i.geometryType){if(0===this._width)return i.clone();const t=this._geometryEngine;if(null==t)return null;const s=this._tileKey?(0,CIMEffects/* clipCursorToTileExtent */.q)(i,this._maxInflateSize):i.clone();if(!s)continue;const r=t.buffer(SpatialReference/* default */.A.WebMercator,s.asJSON(),-this._width,1);if(r)for(const e of r.rings)e&&s.pushPath(e.reverse());return s}}return null}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectJog.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectJog_e{static local(){return null===EffectJog_e.instance&&(EffectJog_e.instance=new EffectJog_e),EffectJog_e.instance}execute(t,i,s,e,o){return new EffectJog_n(t,i,s)}}EffectJog_e.instance=null;class EffectJog_n extends i{constructor(t,i,e){super(t,!1,!0),this._curveHelper=new CurveHelper_s,this._length=(void 0!==i.length?i.length:20)*e,this._angle=void 0!==i.angle?i.angle:225,this._position=void 0!==i.position?i.position:50,this._length<0&&(this._length=-this._length),this._position<20&&(this._position=20),this._position>80&&(this._position=80),this._mirror=!1}processPath(i){const s=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM("esriGeometryPolyline");if(this._curveHelper.isEmpty(i))return null;i.seekInPath(0);const e=i.x,n=i.y;i.seekInPath(i.pathSize-1);const o=i.x,r=i.y,h=[o-e,r-n];this._curveHelper.normalize(h);const l=e+(o-e)*this._position/100,_=n+(r-n)*this._position/100,a=Math.cos((90-this._angle)/180*Math.PI);let p=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(p=-p),this._mirror=!this._mirror;const c=[l-this._length/2*a,_-this._length/2*p],m=[l+this._length/2*a,_+this._length/2*p];return s.pushPath([[e,n],c,m,[o,r]]),s}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectMove.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectMove_t{static local(){return null===EffectMove_t.instance&&(EffectMove_t.instance=new EffectMove_t),EffectMove_t.instance}execute(t,s,n,o,i){return new EffectMove_e(t,s,n)}}EffectMove_t.instance=null;class EffectMove_e{constructor(t,e,s){this._inputGeometries=t,this._offsetX=void 0!==e.offsetX?e.offsetX*s:0,this._offsetY=void 0!==e.offsetY?e.offsetY*s:0}next(){let t=this._inputGeometries.next();for(;t;){if(t.totalSize>0)return this._move(t.clone(),this._offsetX,this._offsetY);t=this._inputGeometries.next()}return null}_move(t,e,s){for(;t.nextPath();)for(;t.nextPoint();)t.x=t.x+e,t.y=t.y+s;return t.reset(),t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectOffset.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectOffset_m{static local(){return null===EffectOffset_m.instance&&(EffectOffset_m.instance=new EffectOffset_m),EffectOffset_m.instance}execute(t,e,o,s,r,i){return new EffectOffset_h(t,e,o,s,r,i)}}EffectOffset_m.instance=null;class EffectOffset_h{constructor(t,e,o,s,n,f){this._inputGeometries=t,this._tileKey=s,this._geometryEngine=n,this._curveHelper=new CurveHelper_s,this._offset=(e.offset??1)*o,this._method=e.method,this._maxInflateSize=f*o,this._option=e.option,this._offsetFlattenError=CurveHelper_n*o}next(){let r;for(;r=this._inputGeometries.next();){if(0===this._offset)return r.clone();if("esriGeometryEnvelope"===r.geometryType){if(this._method===enums/* GeometricEffectOffsetMethod */.xw.Rounded&&this._offset>0){const o=(0,geometryCursorCollectUtils/* collectPath */.A)(r),s=this._curveHelper.offset(o,-this._offset,this._method,4,this._offsetFlattenError);if(s){const e=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM(r.geometryType);return e.pushPath(s),e}return null}const s=r.asJSON();if((0,jsonUtils/* isExtent */.ZC)(s)&&Math.min(s.xmax-s.xmin,s.ymax-s.ymin)+2*this._offset>0)return GeometryCursor/* GeometryCursor */.z.fromJSONCIM({xmin:s.xmin-this._offset,xmax:s.xmax+this._offset,ymin:s.ymin-this._offset,ymax:s.ymax+this._offset})}const i=this._geometryEngine;if(null==i)continue;const m=this._tileKey?(0,CIMEffects/* clipCursorToTileExtent */.q)(r,this._maxInflateSize):r.clone();if(!m)continue;const h=i.offset(SpatialReference/* default */.A.WebMercator,m.asJSON(),-this._offset,1,this._method,4,this._offsetFlattenError);return h?GeometryCursor/* GeometryCursor */.z.fromJSONCIM(h):null}return null}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectReverse.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectReverse_e{static local(){return null===EffectReverse_e.instance&&(EffectReverse_e.instance=new EffectReverse_e),EffectReverse_e.instance}execute(e,n,r,s,i){return new EffectReverse_t(e,n,r)}}EffectReverse_e.instance=null;class EffectReverse_t{constructor(e,t,n){this._inputGeometries=e,this._reverse=void 0===t.reverse||t.reverse}next(){let e=this._inputGeometries.next();for(;e;){if(!this._reverse)return e;if("esriGeometryPolyline"===e.geometryType)return EffectReverse_n(e.clone());e=this._inputGeometries.next()}return null}}function EffectReverse_n(e){for(;e.nextPath();)for(let t=0;t<e.pathSize/2;t++){e.seekInPath(t);const n=e.x,r=e.y;e.seekInPath(e.pathSize-t-1);const s=e.x,i=e.y;e.x=n,e.y=r,e.seekInPath(t),e.x=s,e.y=i}return e.reset(),e}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/boundsUtils.js
var boundsUtils = __webpack_require__(36358);
;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectRotate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectRotate_e{static local(){return null===EffectRotate_e.instance&&(EffectRotate_e.instance=new EffectRotate_e),EffectRotate_e.instance}execute(t,e,r,s,o){return new EffectRotate_n(t,e,r)}}EffectRotate_e.instance=null;class EffectRotate_n{constructor(t,e,n){this._inputGeometries=t,this._rotateAngle=void 0!==e.angle?e.angle*Math.PI/180:0}next(){let e=this._inputGeometries.next();for(;e;){if(0===this._rotateAngle||"esriGeometryPoint"===e.geometryType)return e;if(e.totalSize>0){const n=(0,boundsUtils/* getCursorBoundsXY */.z8)(e),r=(n[2]+n[0])/2,s=(n[3]+n[1])/2;return e.reset(),this._rotate(e.clone(),r,s)}e=this._inputGeometries.next()}return null}_rotate(t,e,n){const r=Math.cos(this._rotateAngle),s=Math.sin(this._rotateAngle);for(;t.nextPath();)for(;t.nextPoint();){const o=t.x-e,i=t.y-n;t.x=e+o*r-i*s,t.y=n+o*s+i*r}return t.reset(),t}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectScale.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectScale_e{static local(){return null===EffectScale_e.instance&&(EffectScale_e.instance=new EffectScale_e),EffectScale_e.instance}execute(t,e,o,s,n){return new EffectScale_r(t,e,o)}}EffectScale_e.instance=null;class EffectScale_r{constructor(t,e,r){this._inputGeometries=t,this._xFactor=void 0!==e.XScaleFactor?e.XScaleFactor:1.15,this._yFactor=void 0!==e.YScaleFactor?e.YScaleFactor:1.15}next(){const e=this._inputGeometries.next();if(e){if(1===this._xFactor&&1===this._yFactor)return e;if("esriGeometryPoint"===e.geometryType)return e;if(e.totalSize>0){const r=(0,boundsUtils/* getCursorBoundsXY */.z8)(e),o=(r[2]+r[0])/2,s=(r[3]+r[1])/2;return e.reset(),this._scaleCursor(e.clone(),o,s)}}return null}_scaleCursor(t,e,r){for(;t.nextPath();)for(;t.nextPoint();)t.x=e+(t.x-e)*this._xFactor,t.y=r+(t.y-r)*this._yFactor;return t.reset(),t}}

;// ../node_modules/@arcgis/core/symbols/cim/effects/EffectWave.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class EffectWave_n{static local(){return null===EffectWave_n.instance&&(EffectWave_n.instance=new EffectWave_n),EffectWave_n.instance}execute(t,e,i,s,h){return new EffectWave_r(t,e,i)}}EffectWave_n.instance=null;class EffectWave_r{constructor(t,e,h){this._inputGeometries=t,this._height=(void 0!==e.amplitude?e.amplitude:2)*h,this._period=(void 0!==e.period?e.period:3)*h,this._style=e.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new GeometryWalker_i,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new o,this._walker.updateTolerance(h)}next(){let t=this._inputGeometries.next();for(;t;){if(0===this._height||0===this._period)return t;const e=this._processGeom(t);if(e)return e;t=this._inputGeometries.next()}return null}_processGeom(i){const s=GeometryCursor/* GeometryCursor */.z.createEmptyOptimizedCIM(i.geometryType);for(;i.nextPath();){s.startPath();const t=i.pathLength();if(this._walker.init(i,this._pattern))switch(this._style){case enums/* GeometricEffectWaveform */.WE.Sinus:default:this._constructCurve(s,t,!1);break;case enums/* GeometricEffectWaveform */.WE.Square:this._constructSquare(s,t);break;case enums/* GeometricEffectWaveform */.WE.Triangle:this._constructTriangle(s,t);break;case enums/* GeometricEffectWaveform */.WE.Random:this._constructCurve(s,t,!0)}else for(;i.nextPoint();)s.pushXY(i.x,i.y)}return s}_constructCurve(t,e,i){let s=Math.round(e/this._period);0===s&&(s=1);const n=s*16+1,r=e/s,a=this._period/16,o=1/n,p=2*Math.PI*e/r,_=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),l=2*Math.PI*Math.random(),c=.75-Math.random()/2,d=.75-Math.random()/2,g=new GeometryWalker_h;this._walker.curPointAndAngle(g),t.pushPoint(g.pt);let w=0;for(;;){if(!this._walker.nextPointAndAngle(a,g)){t.pushPoint(this._walker.getPathEnd());break}{const e=w;let s;if(w+=o,i){const t=this._height/2*(1+.3*Math.sin(c*p*e+_));s=t*Math.sin(p*e+u),s+=t*Math.sin(d*p*e+l),s/=2}else s=.5*this._height*Math.sin(.5*p*e);t.pushXY(g.pt[0]-s*g.sa,g.pt[1]+s*g.ca)}}}_constructSquare(t,e){Math.round(e/this._period);let i=!0;for(;;){let e=!1;if(this._walker.curPositionIsValid()){const s=new GeometryWalker_h;this._walker.curPointAndAngle(s);const n=new GeometryWalker_h;if(this._walker.nextPointAndAngle(this._period,n)){const r=new GeometryWalker_h;this._walker.nextPointAndAngle(this._period,r)&&(i?(t.pushPoint(s.pt),i=!1):t.pushPoint(s.pt),t.pushXY(s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca),t.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),t.pushXY(n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca),t.pushXY(r.pt[0]+this._height/2*r.sa,r.pt[1]-this._height/2*r.ca),e=!0)}}if(!e){t.pushPoint(this._walker.getPathEnd());break}}}_constructTriangle(t,e){Math.round(e/this._period);let i=!0;for(;;){let e=!1;if(this._walker.curPositionIsValid()){const s=new GeometryWalker_h;this._walker.curPointAndAngle(s);const n=new GeometryWalker_h;if(this._walker.nextPointAndAngle(this._period/2,n)){const r=new GeometryWalker_h;this._walker.nextPointAndAngle(this._period,r)&&(this._walker.nextPosition(this._period/2)&&(i?(t.pushPoint(s.pt),i=!1):t.pushPoint(s.pt),t.pushXY(n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca),t.pushXY(r.pt[0]+this._height/2*r.sa,r.pt[1]-this._height/2*r.ca)),e=!0)}}if(!e){t.pushPoint(this._walker.getPathEnd());break}}}}

;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementAlongLineSameSize.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PlacementAlongLineSameSize_a{static local(){return null===PlacementAlongLineSameSize_a.instance&&(PlacementAlongLineSameSize_a.instance=new PlacementAlongLineSameSize_a),PlacementAlongLineSameSize_a.instance}execute(t,e,s,i,n){return new PlacementAlongLineSameSize_r(t,e,s)}}PlacementAlongLineSameSize_a.instance=null;class PlacementAlongLineSameSize_r extends s{constructor(t,e,n){super(t),this._geometryWalker=new o,this._geometryWalker.updateTolerance(n),this._angleToLine=e.angleToLine??!0,this._offset=(e.offset?e.offset:0)*n,this._originalEndings=e.endings,this._offsetAtEnd=(e.customEndingOffset?e.customEndingOffset:0)*n,this._position=-(e.offsetAlongLine?e.offsetAlongLine:0)*n,this._pattern=new GeometryWalker_i,this._pattern.init(e.placementTemplate,!1),this._pattern.scale(n),this._endings=this._originalEndings}processPath(t){if(this._pattern.isEmpty())return null;let s;if(this.iteratePath)s=this._pattern.nextValue();else{this._originalEndings===enums/* PlacementEndings */.e_.WithFullGap&&this.isClosed?this._endings=enums/* PlacementEndings */.e_.WithMarkers:this._endings=this._originalEndings,this._pattern.extPtGap=0;let i,n=!0;switch(this._endings){case enums/* PlacementEndings */.e_.NoConstraint:i=-this._position,i=this._adjustPosition(i),n=!1;break;case enums/* PlacementEndings */.e_.WithHalfGap:default:i=-this._pattern.lastValue()/2;break;case enums/* PlacementEndings */.e_.WithFullGap:i=-this._pattern.lastValue(),this._pattern.extPtGap=this._pattern.lastValue();break;case enums/* PlacementEndings */.e_.WithMarkers:i=0;break;case enums/* PlacementEndings */.e_.Custom:i=-this._position,i=this._adjustPosition(i),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._geometryWalker.init(t,this._pattern,n))return null;this._pattern.reset();let a=0;for(;i>a;)i-=a,a=this._pattern.nextValue();a-=i,s=a,this.iteratePath=!0}const i=new GeometryWalker_h;return this._geometryWalker.nextPointAndAngle(s,i)?this._endings===enums/* PlacementEndings */.e_.WithFullGap&&this._geometryWalker.isPathEnd()?(this.iteratePath=!1,null):this._endings===enums/* PlacementEndings */.e_.WithMarkers&&this._geometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed)?null:(this.internalPlacement.setTranslate(i.pt[0]-this._offset*i.sa,i.pt[1]+this._offset*i.ca),this._angleToLine&&this.internalPlacement.setRotateCS(i.ca,i.sa),this.internalPlacement):(this.iteratePath=!1,null)}_adjustPosition(t){let e=t/this._pattern.length();return e-=Math.floor(e),e*this._pattern.length()}}

;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementAtExtremities.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PlacementAtExtremities_i{static local(){return null===PlacementAtExtremities_i.instance&&(PlacementAtExtremities_i.instance=new PlacementAtExtremities_i),PlacementAtExtremities_i.instance}execute(e,t,s,i,r){return new PlacementAtExtremities_n(e,t,s)}}PlacementAtExtremities_i.instance=null;class PlacementAtExtremities_n extends s{constructor(e,s,i){super(e,!1,!0),this._curveHelper=new CurveHelper_s,this._angleToLine=void 0===s.angleToLine||s.angleToLine,this._offset=void 0!==s.offset?s.offset*i:0,this._type=s.extremityPlacement,this._position=void 0!==s.offsetAlongLine?s.offsetAlongLine*i:0,this._beginProcessed=!1}processPath(e){let t;switch(this._type){case enums/* ExtremityPlacement */.$2.Both:default:this._beginProcessed?(t=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(t=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case enums/* ExtremityPlacement */.$2.JustBegin:t=this._atExtremities(e,this._position,!0);break;case enums/* ExtremityPlacement */.$2.JustEnd:t=this._atExtremities(e,this._position,!1);case enums/* ExtremityPlacement */.$2.None:}return t}_atExtremities(e,t,s){if(s||e.seekPathEnd(),s?e.nextPoint():e.prevPoint()){let i=0,[n,r]=[0,0],[o,a]=[e.x,e.y];for(;s?e.nextPoint():e.prevPoint();){n=o,r=a,o=e.x,a=e.y;const s=this._curveHelper.getLength(n,r,o,a);if(i+s>t){const e=(t-i)/s,[h,l]=this._curveHelper.getAngleCS(n,r,o,a,e),c=this._curveHelper.getCoord2D(n,r,o,a,e);return this.internalPlacement.setTranslate(c[0]-this._offset*l,c[1]+this._offset*h),this._angleToLine&&this.internalPlacement.setRotateCS(-h,-l),this.internalPlacement}i+=s}}return null}}

;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementAtRatioPositions.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PlacementAtRatioPositions_a{static local(){return null===PlacementAtRatioPositions_a.instance&&(PlacementAtRatioPositions_a.instance=new PlacementAtRatioPositions_a),PlacementAtRatioPositions_a.instance}execute(t,i,s,e,n){return new PlacementAtRatioPositions_r(t,i,s)}}PlacementAtRatioPositions_a.instance=null;class PlacementAtRatioPositions_r extends s{constructor(t,e,n){super(t),this._walker=new o,this._walker.updateTolerance(n),this._angleToLine=void 0===e.angleToLine||e.angleToLine,this._offset=void 0!==e.offset?e.offset*n:0,this._beginGap=void 0!==e.beginPosition?e.beginPosition*n:0,this._endGap=void 0!==e.endPosition?e.endPosition*n:0,this._flipFirst=void 0===e.flipFirst||e.flipFirst,this._pattern=new GeometryWalker_i,this._pattern.init(e.positionArray,!1,!1),this._subPathLen=0,this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0}processPath(t){if(this._pattern.isEmpty())return null;let i;if(this.iteratePath){const t=this._pattern.nextValue()*this._subPathLen,s=this._beginGap+t;i=s-this._prevPos,this._prevPos=s}else{if(this._posCount=this._pattern.size(),this._isFirst=!0,this._prevPos=0,this._subPathLen=t.pathLength()-this._beginGap-this._endGap,this._subPathLen<0)return this.iteratePath=!1,null;if(!this._walker.init(t,this._pattern,!1))return null;this._pattern.reset();const s=this._pattern.nextValue()*this._subPathLen,e=this._beginGap+s;i=e-this._prevPos,this._prevPos=e,this.iteratePath=!0}const s=new GeometryWalker_h;if(!this._walker.nextPointAndAngle(i,s,GeometryWalker_r.END))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(s.pt[0]-this._offset*s.sa,s.pt[1]+this._offset*s.ca);const a=this._isFirst&&this._flipFirst;let r,h;return this._angleToLine?(r=s.ca,h=s.sa):(r=1,h=0),a&&(r=-r,h=-h),this.internalPlacement.setRotateCS(r,h),this._isFirst=!1,this._posCount--,0===this._posCount&&(this.iteratePath=!1),this.internalPlacement}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementInsidePolygon.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const PlacementInsidePolygon_e=512,PlacementInsidePolygon_h=10,PlacementInsidePolygon_n=24,_=1e-6;class PlacementInsidePolygon_r{static local(){return null===PlacementInsidePolygon_r.instance&&(PlacementInsidePolygon_r.instance=new PlacementInsidePolygon_r),PlacementInsidePolygon_r.instance}execute(t,s,i,e,h){return new PlacementInsidePolygon_a(t,s,i,e,h)}}PlacementInsidePolygon_r.instance=null;class PlacementInsidePolygon_a{constructor(h,n,_,r,a){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._accelerationMap=null,this._testInsidePolygon=!1,this._verticalSubdivision=!0,this._stepX=Math.abs(n.stepX??16)*_,this._stepY=Math.abs(n.stepY??16)*_,this._stepX=Math.round(128*this._stepX)/128,this._stepY=Math.round(128*this._stepY)/128,0!==this._stepX&&0!==this._stepY){if(this._gridType=n.gridType??enums/* PlacementGridType */.Q1.Fixed,this._gridType===enums/* PlacementGridType */.Q1.Random){const s=n.seed??13,i=1;this._randomLCG=new RandomLCG/* default */.A(s*i),this._randomness=(n.randomness??100)/100,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0,this._buildRandomValues()}else{if(this._randomness=0,this._gridAngle=n.gridAngle??0,this._shiftOddRows=n.shiftOddRows??!1,this._offsetX=(n.offsetX??0)*_,this._offsetY=(n.offsetY??0)*_,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}if(this._graphicOriginX=0,this._graphicOriginY=0,null!=r){const[t,s,i,h]=r.split("/"),n=parseFloat(t),_=parseFloat(s),a=parseFloat(i),o=parseFloat(h);this._graphicOriginX=-(o*2**n+a)*PlacementInsidePolygon_e,this._graphicOriginY=_*PlacementInsidePolygon_e,this._testInsidePolygon=!0}this._internalPlacement=new CIMPlacements/* Placement */.W,this._calculateMinMax(h),this._geometryCursor=h}}next(){return this._geometryCursor?this._nextInside():null}_buildRandomValues(){if(!PlacementInsidePolygon_a._randValues){PlacementInsidePolygon_a._randValues=[];for(let t=0;t<PlacementInsidePolygon_n;t++)for(let s=0;s<PlacementInsidePolygon_n;s++)PlacementInsidePolygon_a._randValues.push(this._randomLCG.getFloat()),PlacementInsidePolygon_a._randValues.push(this._randomLCG.getFloat())}}_calculateMinMax(t){let s,i,h,n,_,r,a,o,l,f,c,u,p,M;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,a=o=p=c=Number.MAX_VALUE,l=f=M=u=-Number.MAX_VALUE;const g=1!==this._cosAngle;for(t.reset();t.nextPath();)for(;t.nextPoint();)r=t.x,_=t.y,s=r-this._graphicOriginX-this._offsetX,i=_-this._graphicOriginY-this._offsetY,g?(h=this._cosAngle*s-this._sinAngle*i,n=this._sinAngle*s+this._cosAngle*i):(h=s,n=i),a=Math.min(a,h),l=Math.max(l,h),o=Math.min(o,n),f=Math.max(f,n),c=Math.min(c,_),u=Math.max(u,_),p=Math.min(p,r),M=Math.max(M,r);c=c!==Number.MAX_VALUE?c:-PlacementInsidePolygon_e-this._stepY,u=u!==-Number.MAX_VALUE?u:this._stepY,p=p!==Number.MAX_VALUE?p:-this._stepX,M=M!==-Number.MAX_VALUE?M:PlacementInsidePolygon_e+this._stepX;const d=u-c,X=M-p;if(this._verticalSubdivision=d>=X,this._polygonMin=this._verticalSubdivision?c:p,this._testInsidePolygon){let t=0-this._graphicOriginX-this._offsetX-this._stepX,s=PlacementInsidePolygon_e-this._graphicOriginX-this._offsetX+this._stepX,i=-PlacementInsidePolygon_e-this._graphicOriginY-this._offsetY-this._stepY,h=0-this._graphicOriginY-this._offsetY+this._stepY;if(g){const e=[[t,i],[t,h],[s,i],[s,h]];t=i=Number.MAX_VALUE,s=h=-Number.MAX_VALUE;for(const n of e){const e=this._cosAngle*n[0]-this._sinAngle*n[1],_=this._sinAngle*n[0]+this._cosAngle*n[1];t=Math.min(t,e),s=Math.max(s,e),i=Math.min(i,_),h=Math.max(h,_)}}a=a!==Number.MAX_VALUE?Math.max(a,t):t,o=o!==Number.MAX_VALUE?Math.max(o,i):i,l=l!==-Number.MAX_VALUE?Math.min(l,s):s,f=f!==-Number.MAX_VALUE?Math.min(f,h):h}this._xMin=Math.round(a/this._stepX),this._xMax=Math.round(l/this._stepX),this._yMin=Math.round(o/this._stepY),this._yMax=Math.round(f/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1,this._buildAccelerationMap(t,p,M,c,u)}_buildAccelerationMap(t,s,i,n,_){t.reset();const r=new Map,a=this._verticalSubdivision,o=a?_-n:i-s;let f=Math.ceil(o/PlacementInsidePolygon_h);if(f<=1)return;const c=Math.floor(o/f);let u,p,M,g,d,X,m,x,A,Y,y;for(f++,this._delta=c,a?(A=-PlacementInsidePolygon_e-this._stepY,Y=this._stepY,y=n):(A=-this._stepX,Y=PlacementInsidePolygon_e+this._stepX,y=s);t.nextPath();)if(!(t.pathSize<2)&&t.nextPoint())for(u=t.x,p=t.y;t.nextPoint();u=M,p=g){if(M=t.x,g=t.y,a){if(p===g||p<A&&g<A||p>Y&&g>Y)continue;d=Math.min(p,g),X=Math.max(p,g)}else{if(u===M||u<A&&M<A||u>Y&&M>Y)continue;d=Math.min(u,M),X=Math.max(u,M)}for(;d<X;)m=Math.floor((d-y)/c),PlacementInsidePolygon_l(m,u,p,M,g,r),d+=c;x=Math.floor((X-y)/c),x>m&&PlacementInsidePolygon_l(x,u,p,M,g,r)}this._accelerationMap=r}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);const s=this._currentY*this._stepY+this._offsetY;let e,h;if(this._currentX++,this._gridType===enums/* PlacementGridType */.Q1.Random){const i=(this._currentX%PlacementInsidePolygon_n+PlacementInsidePolygon_n)%PlacementInsidePolygon_n,_=(this._currentY%PlacementInsidePolygon_n+PlacementInsidePolygon_n)%PlacementInsidePolygon_n;e=this._graphicOriginX+t+this._stepX*this._randomness*(.5-PlacementInsidePolygon_a._randValues[_*PlacementInsidePolygon_n+i])*2/3,h=this._graphicOriginY+s+this._stepY*this._randomness*(.5-PlacementInsidePolygon_a._randValues[_*PlacementInsidePolygon_n+i+1])*2/3}else e=this._graphicOriginX+this._cosAngle*t+this._sinAngle*s,h=this._graphicOriginY-this._sinAngle*t+this._cosAngle*s;if(!this._testInsidePolygon||this._isInsidePolygon(e,h,this._geometryCursor))return this._internalPlacement.setTranslate(e,h),this._internalPlacement}}_isInsidePolygon(t,s,i){if(null==this._accelerationMap)return PlacementInsidePolygon_o(t,s,i);t+=_,s+=_;const e=this._verticalSubdivision,h=e?s:t,n=Math.floor((h-this._polygonMin)/this._delta),r=this._accelerationMap.get(n);if(!r)return!1;let a,l,f,c=0;for(const _ of r){if(a=_[0],l=_[1],e){if(a[1]>s==l[1]>s)continue;f=(l[0]-a[0])*(s-a[1])-(l[1]-a[1])*(t-a[0])}else{if(a[0]>t==l[0]>t)continue;f=(l[1]-a[1])*(t-a[0])-(l[0]-a[0])*(s-a[1])}f>0?c++:c--}return 0!==c}}function PlacementInsidePolygon_o(t,s,i){let e,h,n,r,a=0;for(t+=_,s+=_,i.reset();i.nextPath();)if(i.nextPoint())for(e=i.x,h=i.y;i.nextPoint();e=n,h=r){if(n=i.x,r=i.y,h>s==r>s)continue;(n-e)*(s-h)-(r-h)*(t-e)>0?a++:a--}return 0!==a}function PlacementInsidePolygon_l(t,s,i,e,h,n){let _=n.get(t);_||(_=[],n.set(t,_)),_.push([[s,i],[e,h]])}

;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementOnLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const PlacementOnLine_i=.001;class PlacementOnLine_s{static local(){return null===PlacementOnLine_s.instance&&(PlacementOnLine_s.instance=new PlacementOnLine_s),PlacementOnLine_s.instance}execute(e,t,n,i,s){return new PlacementOnLine_r(e,t,n)}}PlacementOnLine_s.instance=null;class PlacementOnLine_r extends s{constructor(e,n,s){super(e),this._curveHelper=new CurveHelper_s,this._angleToLine=void 0===n.angleToLine||n.angleToLine,this._offset=void 0!==n.offset?n.offset*s:0,this._relativeTo=n.relativeTo,this._position=void 0!==n.startPointOffset?n.startPointOffset*s:0,this._epsilon=PlacementOnLine_i*s}processPath(e){const t=this._position;if(this._relativeTo===enums/* PlacementOnLineRelativeTo */.ip.SegmentMidpoint){if(this.iteratePath||(this.iteratePath=!0),e.nextPoint()){let[t,n]=[e.x,e.y],[i,s]=[0,0];for(;e.nextPoint();){i=e.x,s=e.y;const r=this._curveHelper.getLength(t,n,i,s);if(r<this._epsilon){t=i,n=s;continue}const o=.5+this._position/r,[a,l]=this._curveHelper.getAngleCS(t,n,i,s,o),h=this._curveHelper.getCoord2D(t,n,i,s,o);return this.internalPlacement.setTranslate(h[0]-this._offset*l,h[1]+this._offset*a),this._angleToLine&&this.internalPlacement.setRotateCS(a,l),this.internalPlacement}}return this.iteratePath=!1,null}const i=this._relativeTo===enums/* PlacementOnLineRelativeTo */.ip.LineEnd;return this.onLine(e,t,i)}onLine(e,t,i){let s,r=!1;switch(this._relativeTo){case enums/* PlacementOnLineRelativeTo */.ip.LineMiddle:default:e.seekPathStart(),s=e.pathLength()/2+t;break;case enums/* PlacementOnLineRelativeTo */.ip.LineBeginning:s=t;break;case enums/* PlacementOnLineRelativeTo */.ip.LineEnd:s=t,r=!0}i?e.seekPathEnd():e.seekPathStart();let o=0;if(i?e.prevPoint():e.nextPoint()){let[t,n]=[e.x,e.y],[a,l]=[0,0];for(;i?e.prevPoint():e.nextPoint();){a=e.x,l=e.y;const i=this._curveHelper.getLength(t,n,a,l);if(o+i>s){const e=(s-o)/i,[h,c]=this._curveHelper.getAngleCS(t,n,a,l,e),f=this._curveHelper.getCoord2D(t,n,a,l,e),u=r?-this._offset:this._offset;return this.internalPlacement.setTranslate(f[0]-u*c,f[1]+u*h),this._angleToLine&&(r?this.internalPlacement.setRotateCS(-h,-c):this.internalPlacement.setRotateCS(h,c)),this.internalPlacement}t=a,n=l,o+=i}}return null}}

;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementOnVertices.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const PlacementOnVertices_s=1e-15;class PlacementOnVertices_i{static local(){return null===PlacementOnVertices_i.instance&&(PlacementOnVertices_i.instance=new PlacementOnVertices_i),PlacementOnVertices_i.instance}execute(t,e,s,i,o){return new PlacementOnVertices_n(t,e,s)}}PlacementOnVertices_i.instance=null;class PlacementOnVertices_n extends s{constructor(t,s,i){super(t),this._curveHelper=new CurveHelper_s,this._angleToLine=void 0===s.angleToLine||s.angleToLine,this._offset=void 0!==s.offset?s.offset*i:0,this._endPoints=void 0===s.placeOnEndPoints||s.placeOnEndPoints,this._controlPoints=void 0===s.placeOnControlPoints||s.placeOnControlPoints,this._regularVertices=void 0===s.placeOnRegularVertices||s.placeOnRegularVertices,this._tags=[],this._tagIterator=0}processPath(t){if(this.iteratePath||(this._preparePath(t),this.iteratePath=!0),this._tagIterator>=this._tags.length)return this._tags.length=0,this._tagIterator=0,this.iteratePath=!1,null;const e=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(e[2]);let s=e[0],i=e[1];if(0!==this._offset){const t=Math.cos(e[2]),n=Math.sin(e[2]);s-=this._offset*n,i+=this._offset*t}return this.internalPlacement.setTranslate(s,i),this._tagIterator++,this.internalPlacement}_preparePath(t){this._tags.length=0,this._tagIterator=0,t.seekPathStart();const e=t.isClosed();let s=0,i=!1,n=0,r=0;if(t.seekPathStart(),t.nextPoint()){let a=t.x,h=t.y,l=t.getControlPoint(),_=!0,c=t.nextPoint();for(;c;){const g=t.x,P=t.y,u=t.getControlPoint();(this._angleToLine||0!==this._offset)&&(n=this._curveHelper.getAngle(a,h,g,P,0)),_?(_=!1,e?(s=n,i=l):(this._endPoints||this._controlPoints&&l)&&this._tags.push([a,h,n])):l?this._controlPoints&&this._tags.push([a,h,PlacementOnVertices_o(r,n)]):this._regularVertices&&this._tags.push([a,h,PlacementOnVertices_o(r,n)]),(this._angleToLine||0!==this._offset)&&(r=this._curveHelper.getAngle(a,h,g,P,1)),c=t.nextPoint(),c||(e?u||i?this._controlPoints&&this._tags.push([g,P,PlacementOnVertices_o(r,s)]):this._regularVertices&&this._tags.push([g,P,PlacementOnVertices_o(r,s)]):(this._endPoints||this._controlPoints&&u)&&this._tags.push([g,P,r])),a=g,h=P,l=u}}this._tagIterator=0}}function PlacementOnVertices_o(t,e){const i=Math.PI;for(;Math.abs(e-t)>i+2*PlacementOnVertices_s;)e-t>i?e-=2*i:e+=2*i;return(t+e)/2}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/centroid.js
var centroid = __webpack_require__(23806);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/labelPoint.js
var labelPoint = __webpack_require__(73138);
;// ../node_modules/@arcgis/core/symbols/cim/placements/PlacementPolygonCenter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class PlacementPolygonCenter_r{static local(){return null===PlacementPolygonCenter_r.instance&&(PlacementPolygonCenter_r.instance=new PlacementPolygonCenter_r),PlacementPolygonCenter_r.instance}execute(t,e,s,n,o){return new PlacementPolygonCenter_i(t,e,s)}}PlacementPolygonCenter_r.instance=null;class PlacementPolygonCenter_i{constructor(t,e,s){this._geometryCursor=t,this._offsetX=void 0!==e.offsetX?e.offsetX*s:0,this._offsetY=void 0!==e.offsetY?e.offsetY*s:0,this._method=void 0!==e.method?e.method:enums/* PlacementPolygonCenterMethod */.YI.OnPolygon,this._internalPlacement=new CIMPlacements/* Placement */.W}next(){const t=this._geometryCursor;return this._geometryCursor=null,t?this._polygonCenter(t):null}_polygonCenter(n){let r=!1;switch(this._method){case enums/* PlacementPolygonCenterMethod */.YI.CenterOfMass:{const t=(0,centroid/* weightedAreaCentroid */.TP)(n);t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),r=!0)}break;case enums/* PlacementPolygonCenterMethod */.YI.BoundingBoxCenter:{const e=(0,boundsUtils/* getCursorBoundsXY */.z8)(n);e&&(this._internalPlacement.setTranslate((e[2]+e[0])/2+this._offsetX,(e[3]+e[1])/2+this._offsetY),r=!0)}break;case enums/* PlacementPolygonCenterMethod */.YI.OnPolygon:default:{const t=(0,labelPoint/* getLabelPoint */.d)(n);null!==t&&(this._internalPlacement.setTranslate(t[0]+this._offsetX,t[1]+this._offsetY),r=!0)}}return r?this._internalPlacement:null}}

;// ../node_modules/@arcgis/core/symbols/cim/CIMOperators.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function A(p){if(!p)return null;switch(p.type){case"CIMGeometricEffectAddControlPoints":return e.local();case"CIMGeometricEffectArrow":return EffectArrow_p.local();case"CIMGeometricEffectBuffer":return m.local();case"CIMGeometricEffectControlMeasureLine":return EffectControlMeasureLine_e.local();case"CIMGeometricEffectCut":return EffectCut_r.local();case"CIMGeometricEffectDashes":return EffectDashes_n.local();case"CIMGeometricEffectDonut":return EffectDonut_s.local();case"CIMGeometricEffectJog":return EffectJog_e.local();case"CIMGeometricEffectMove":return EffectMove_t.local();case"CIMGeometricEffectOffset":return EffectOffset_m.local();case"CIMGeometricEffectReverse":return EffectReverse_e.local();case"CIMGeometricEffectRotate":return EffectRotate_e.local();case"CIMGeometricEffectScale":return EffectScale_e.local();case"CIMGeometricEffectWave":return EffectWave_n.local()}return null}function g(e){if(!e)return null;switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":return PlacementAlongLineSameSize_a.local();case"CIMMarkerPlacementAtExtremities":return PlacementAtExtremities_i.local();case"CIMMarkerPlacementAtRatioPositions":return PlacementAtRatioPositions_a.local();case"CIMMarkerPlacementInsidePolygon":return PlacementInsidePolygon_r.local();case"CIMMarkerPlacementOnLine":return PlacementOnLine_s.local();case"CIMMarkerPlacementOnVertices":return PlacementOnVertices_i.local();case"CIMMarkerPlacementPolygonCenter":return PlacementPolygonCenter_r.local()}return null}


/***/ }),

/***/ 82250:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   W: () => (/* binding */ t)
/* harmony export */ });
/* unused harmony export EmptyPlacementCursor */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(){this.setIdentity()}getAngle(){return(null==this.rz||0===this.rz&&1!==this.rzCos&&0!==this.rzSin)&&(this.rz=Math.atan2(this.rzSin,this.rzCos)),this.rz}setIdentity(){this.tx=0,this.ty=0,this.tz=0,this.s=1,this.rx=0,this.ry=0,this.rz=0,this.rzCos=1,this.rzSin=0}setTranslate(t,s){this.tx=t,this.ty=s}setTranslateZ(t){this.tz=t}setRotateCS(t,s){this.rz=void 0,this.rzCos=t,this.rzSin=s}setRotate(t){this.rz=t,this.rzCos=void 0,this.rzSin=void 0}setRotateY(t){this.ry=t}setScale(t){this.s=t}setMeasure(t){this.m=t}}class s{next(){return null}}


/***/ }),

/***/ 48655:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Rj: () => (/* binding */ et),
  mx: () => (/* binding */ $),
  CK: () => (/* binding */ tt),
  IT: () => (/* binding */ Q),
  Lh: () => (/* binding */ Y),
  Zg: () => (/* binding */ q),
  CR: () => (/* binding */ V),
  Kr: () => (/* binding */ O),
  sA: () => (/* binding */ W),
  vx: () => (/* binding */ st),
  QF: () => (/* binding */ nt),
  Jm: () => (/* binding */ ot)
});

// UNUSED EXPORTS: CIMSymbolDrawHelper, cDegToRad, defaultTextHaloSize

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/BidiText.js
var BidiText = __webpack_require__(21870);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/fontUtils.js
var fontUtils = __webpack_require__(72777);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/ObjectPool.js
var ObjectPool = __webpack_require__(90086);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/boundsUtils.js
var boundsUtils = __webpack_require__(36358);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/centroid.js
var centroid = __webpack_require__(23806);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMEffects.js
var CIMEffects = __webpack_require__(13022);
;// ../node_modules/@arcgis/core/symbols/cim/CIMImageColorSubstitutionHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class CIMImageColorSubstitutionHelper_t{applyColorSubstituition(t,a){if(!a)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,o=this._rasterizationCanvas,r=o.getContext("2d",{willReadFrequently:!0});t!==o&&(o.width=e,o.height=n,r.drawImage(t,0,0,e,n));const i=r.getImageData(0,0,e,n).data;if(a)for(const l of a)if(l&&l.oldColor&&4===l.oldColor.length&&l.newColor&&4===l.newColor.length){const[t,a,e,n]=l.oldColor,[o,r,s,h]=l.newColor;if(t===o&&a===r&&e===s&&n===h)continue;for(let l=0;l<i.length;l+=4)t===i[l]&&a===i[l+1]&&e===i[l+2]&&n===i[l+3]&&(i[l]=o,i[l+1]=r,i[l+2]=s,i[l+3]=h)}const s=new ImageData(i,e,n);return r.putImageData(s,0,0),o}tintImageData(t,a){if(!a||a.length<4)return t;this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas"));const{width:e,height:n}=t,o=this._rasterizationCanvas,r=o.getContext("2d",{willReadFrequently:!0});t!==o&&(o.width=e,o.height=n,r.drawImage(t,0,0,e,n));const i=r.getImageData(0,0,e,n),s=new Uint8Array(i.data),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255];for(let g=0;g<s.length;g+=4)s[g]*=l[0],s[g+1]*=l[1],s[g+2]*=l[2],s[g+3]*=l[3];const h=new ImageData(new Uint8ClampedArray(s.buffer),e,n);return r.putImageData(h,0,0),o}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMOperators.js + 24 modules
var CIMOperators = __webpack_require__(29659);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMPlacements.js
var CIMPlacements = __webpack_require__(82250);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
;// ../node_modules/@arcgis/core/symbols/cim/imageUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function imageUtils_t(t){const e=t.getFrame(0);if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement)return e;const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const a=n.getContext("2d");return e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0),n}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/Rect.js
var Rect = __webpack_require__(76715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/TextRasterizer.js
var TextRasterizer = __webpack_require__(95159);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/shapingUtils.js + 1 modules
var shapingUtils = __webpack_require__(97557);
;// ../node_modules/@arcgis/core/symbols/cim/CIMSymbolDrawHelper.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const J=Math.PI/180,N=Logger/* default */.A.getLogger("esri.symbols.cim.CIMSymbolDrawHelper"),O=4,q=10,V=10,Y=4,W=10,K=1;class Q{constructor(t){this._t=t}static createIdentity(){return new Q([1,0,0,0,1,0])}clone(){const t=this._t;return new Q(t.slice())}transform(t){const e=this._t;return[e[0]*t[0]+e[1]*t[1]+e[2],e[3]*t[0]+e[4]*t[1]+e[5]]}static createScale(t,e){return new Q([t,0,0,0,e,0])}scale(t,e){const r=this._t;return r[0]*=t,r[1]*=t,r[2]*=t,r[3]*=e,r[4]*=e,r[5]*=e,this}scaleRatio(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])}static createTranslate(t,e){return new Q([0,0,t,0,0,e])}translate(t,e){const r=this._t;return r[2]+=t,r[5]+=e,this}static createRotate(t){const e=Math.cos(t),r=Math.sin(t);return new Q([e,-r,0,r,e,0])}rotate(t){return Q.multiply(this,Q.createRotate(t),this)}angle(){const t=this._t[0],e=this._t[3],r=Math.sqrt(t*t+e*e);return[t/r,e/r]}static multiply(t,e,r){const i=t._t,s=e._t,o=i[0]*s[0]+i[3]*s[1],n=i[1]*s[0]+i[4]*s[1],a=i[2]*s[0]+i[5]*s[1]+s[2],l=i[0]*s[3]+i[3]*s[4],h=i[1]*s[3]+i[4]*s[4],c=i[2]*s[3]+i[5]*s[4]+s[5],m=r._t;return m[0]=o,m[1]=n,m[2]=a,m[3]=l,m[4]=h,m[5]=c,r}invert(){const t=this._t;let e=t[0]*t[4]-t[1]*t[3];if(0===e)return new Q([0,0,0,0,0,0]);e=1/e;const r=(t[1]*t[5]-t[2]*t[4])*e,i=(t[2]*t[3]-t[0]*t[5])*e,s=t[4]*e,o=-t[1]*e,n=-t[3]*e,a=t[0]*e;return new Q([s,o,r,n,a,i])}}class Z{constructor(t,e){this._resourceManager=t,this._transfos=[],this._sizeTransfos=[],this._geomUnitsPerPoint=1,this._placementPool=new ObjectPool/* default */.A(CIMPlacements/* Placement */.W,void 0,void 0,100),this._earlyReturn=!1,this._mapRotation=0,this._transfos.push(e||Q.createIdentity()),this._sizeTransfos.push(e?e.scaleRatio():1)}setTransform(t,e){this._transfos=[t||Q.createIdentity()],this._sizeTransfos=[e||(t?t.scaleRatio():1)]}setGeomUnitsPerPoint(t){this._geomUnitsPerPoint=t}transformPt(t){return this._transfos[this._transfos.length-1].transform(t)}transformSize(t){return t*this._sizeTransfos[this._sizeTransfos.length-1]}reverseTransformPt(t){return this._transfos[this._transfos.length-1].invert().transform(t)}reverseTransformSize(t){return t/this._sizeTransfos[this._sizeTransfos.length-1]}getTransformAngle(){return this._transfos[this._transfos.length-1].angle()}geomUnitsPerPoint(){return this.isEmbedded()?1:this._geomUnitsPerPoint}isEmbedded(){return this._transfos.length>1}back(){return this._transfos[this._transfos.length-1]}push(t,e){const r=e?t.scaleRatio():1;Q.multiply(t,this.back(),t),this._transfos.push(t),this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-1]*r)}pop(){this._transfos.splice(-1,1),this._sizeTransfos.splice(-1,1)}drawSymbol(t,e,r){if(t)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this.drawMultiLayerSymbol(t,e);break;case"CIMTextSymbol":this.drawTextSymbol(t,e,r)}}drawMultiLayerSymbol(t,e){if(!t||!e)return;const r=t.symbolLayers;if(!r)return;const i=t.effects;if(i&&i.length>0){const t=this.executeEffects(i,e);if(t){let e=t.next();for(;e;)this.drawSymbolLayers(r,e.asJSON()),e=t.next()}}else this.drawSymbolLayers(r,e)}executeEffects(t,e){const r=this._resourceManager.geometryEngine;let i=new CIMEffects/* SimpleEffectCursor */.k(GeometryCursor/* GeometryCursor */.z.fromJSONCIM(e));for(const s of t){const t=(0,CIMOperators/* getEffectOperator */.A)(s);t&&(i=t.execute(i,s,this.geomUnitsPerPoint(),null,r))}return i}drawSymbolLayers(t,e){let r=t.length;for(;r--;){const i=t[r];if(!i||!1===i.enable)continue;const s=i.effects;if(s&&s.length>0){const t=this.executeEffects(s,e);if(t){let e=null;for(;(e=t.next())&&(this.drawSymbolLayer(i,e.asJSON()),!this._earlyReturn););}}else this.drawSymbolLayer(i,e);if(this._earlyReturn)return}}drawSymbolLayer(t,e){switch(t.type){case"CIMSolidFill":this.drawSolidFill(e,t.color);break;case"CIMHatchFill":this.drawHatchFill(e,t);break;case"CIMPictureFill":this.drawPictureFill(e,t);break;case"CIMGradientFill":this.drawGradientFill(e,t);break;case"CIMSolidStroke":this.drawSolidStroke(e,t.color,t.width,t.capStyle,t.joinStyle,t.miterLimit);break;case"CIMPictureStroke":this.drawPictureStroke(e,t);break;case"CIMGradientStroke":this.drawGradientStroke(e,t);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":this.drawMarkerLayer(t,e)}}drawHatchFill(t,e){const r=this._buildHatchPolyline(e,t,this.geomUnitsPerPoint());r&&(this.pushClipPath(t),this.drawMultiLayerSymbol(e.lineSymbol,r),this.popClipPath())}drawPictureFill(t,e){}drawGradientFill(t,e){}drawPictureStroke(t,e){}drawGradientStroke(t,e){}drawMarkerLayer(t,e){const r=t.markerPlacement;if(r){const i=(0,CIMOperators/* getPlacementOperator */.c)(r);if(i){const s="CIMMarkerPlacementInsidePolygon"===r.type||"CIMMarkerPlacementPolygonCenter"===r.type&&r.clipAtBoundary;s&&this.pushClipPath(e);const o=i.execute(GeometryCursor/* GeometryCursor */.z.fromJSONCIM(e),r,this.geomUnitsPerPoint(),null,this._resourceManager.geometryEngine);if(o){let e=null;for(;(e=o.next())&&(this.drawMarker(t,e),!this._earlyReturn););}s&&this.popClipPath()}}else{const r=this._placementPool.acquire();if((0,jsonUtils/* isPoint */.fT)(e))r.tx=e.x,r.ty=e.y,this.drawMarker(t,r);else if((0,jsonUtils/* isPolygon */.Bi)(e)){const i=(0,centroid/* polygonCentroid */.l8)(e);i&&([r.tx,r.ty]=i,this.drawMarker(t,r))}else for(const i of e.points)if(r.tx=i[0],r.ty=i[1],this.drawMarker(t,r),this._earlyReturn)break;this._placementPool.release(r)}}drawMarker(t,e){switch(t.type){case"CIMCharacterMarker":case"CIMPictureMarker":this.drawPictureMarker(t,e);break;case"CIMVectorMarker":this.drawVectorMarker(t,e)}}drawPictureMarker(t,e){if(!t)return;const r=this._resourceManager.getResource(t.url),i=(0,utils/* getValue */._W)(t.size,q);if(null==r||i<=0)return;const s=r.width,o=r.height;if(!s||!o)return;const n=s/o,a=(0,utils/* getValue */._W)(t.scaleX,1),l=Q.createIdentity(),h=t.anchorPoint;if(h){let e=h.x,r=h.y;"Absolute"!==t.anchorPointUnits&&(e*=i*n*a,r*=i),l.translate(-e,-r)}let c=(0,utils/* getValue */._W)(t.rotation);t.rotateClockwise&&(c=-c),this._mapRotation&&(c+=this._mapRotation),c&&l.rotate(c*J);let m=(0,utils/* getValue */._W)(t.offsetX),f=(0,utils/* getValue */._W)(t.offsetY);if(m||f){if(this._mapRotation){const t=J*this._mapRotation,e=Math.cos(t),r=Math.sin(t),i=m*r+f*e;m=m*e-f*r,f=i}l.translate(m,f)}const u=this.geomUnitsPerPoint();1!==u&&l.scale(u,u);const d=e.getAngle();d&&l.rotate(d),l.translate(e.tx,e.ty),this.push(l,!1),this.drawImage(t,i),this.pop()}drawVectorMarker(t,e){if(!t)return;const r=t.markerGraphics;if(!r)return;const i=(0,utils/* getValue */._W)(t.size,q),s=t.frame,o=s?s.ymax-s.ymin:0,n=i&&o?i/o:1,a=Q.createIdentity();s&&a.translate(.5*-(s.xmax+s.xmin),.5*-(s.ymax+s.ymin));const l=t.anchorPoint;if(l){let e=l.x,r=l.y;"Absolute"!==t.anchorPointUnits?s&&(e*=s.xmax-s.xmin,r*=s.ymax-s.ymin):(e/=n,r/=n),a.translate(-e,-r)}1!==n&&a.scale(n,n);let h=(0,utils/* getValue */._W)(t.rotation);t.rotateClockwise&&(h=-h),this._mapRotation&&(h+=this._mapRotation),h&&a.rotate(h*J);let c=(0,utils/* getValue */._W)(t.offsetX),m=(0,utils/* getValue */._W)(t.offsetY);if(c||m){if(this._mapRotation){const t=J*this._mapRotation,e=Math.cos(t),r=Math.sin(t),i=c*r+m*e;c=c*e-m*r,m=i}a.translate(c,m)}const f=this.geomUnitsPerPoint();1!==f&&a.scale(f,f);const u=e.getAngle();u&&a.rotate(u),a.translate(e.tx,e.ty),this.push(a,t.scaleSymbolsProportionally);for(const d of r)if(d?.symbol&&d.geometry||N.error("Invalid marker graphic",d),this.drawSymbol(d.symbol,d.geometry,d.textString),this._earlyReturn)break;this.pop()}drawTextSymbol(t,e,r){if(!t)return;if(!(0,jsonUtils/* isPoint */.fT)(e))return;if((0,utils/* getValue */._W)(t.height,W)<=0)return;const i=Q.createIdentity();let s=(0,utils/* getValue */._W)(t.angle);s=-s,s&&i.rotate(s*J);const o=(0,utils/* getValue */._W)(t.offsetX),n=(0,utils/* getValue */._W)(t.offsetY);(o||n)&&i.translate(o,n);const a=this.geomUnitsPerPoint();1!==a&&i.scale(a,a),i.translate(e.x,e.y),this.push(i,!1),this.drawText(t,r),this.pop()}_buildHatchPolyline(t,e,r){let i=(0,utils/* getValue */._W)(t.separation,Y)*r,s=(0,utils/* getValue */._W)(t.rotation);if(0===i)return null;i<0&&(i=-i);let o=0;const n=.5*i;for(;o>n;)o-=i;for(;o<-n;)o+=i;const a=(0,aaBoundingRect/* create */.vt)();(0,boundsUtils/* getBoundsXY */.Rg)(a,e),a[0]-=n,a[1]-=n,a[2]+=n,a[3]+=n;const h=[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]]];for(;s>180;)s-=180;for(;s<0;)s+=180;const m=Math.cos(s*J),f=Math.sin(s*J),u=-i*f,d=i*m;let p,_,g,y;o=(0,utils/* getValue */._W)(t.offsetX)*r*f-(0,utils/* getValue */._W)(t.offsetY)*r*m,p=g=Number.MAX_VALUE,_=y=-Number.MAX_VALUE;for(const l of h){const t=l[0],e=l[1],r=m*t+f*e,i=-f*t+m*e;p=Math.min(p,r),g=Math.min(g,i),_=Math.max(_,r),y=Math.max(y,i)}g=Math.floor(g/i)*i;let P=m*p-f*g-u*o/i,w=f*p+m*g-d*o/i,x=m*_-f*g-u*o/i,S=f*_+m*g-d*o/i;const M=1+Math.round((y-g)/i),b=[];for(let l=0;l<M;l++)P+=u,w+=d,x+=u,S+=d,b.push([[P,w],[x,S]]);return{paths:b}}}class $ extends Z{constructor(t,e){super(t,e),this.reset()}reset(){this._xmin=this._ymin=1/0,this._xmax=this._ymax=-1/0,this._clipCount=0}envelope(){return new Rect/* default */.A(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)}bounds(){return (0,aaBoundingRect/* fromValues */.fA)(this._xmin,this._ymin,this._xmax,this._ymax)}drawSolidFill(t){if(t&&!(this._clipCount>0))if((0,jsonUtils/* isPolygon */.Bi)(t))this._processPath(t.rings,0);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._processPath(t.paths,0);else if((0,jsonUtils/* isExtent */.ZC)(t)){const e=it(t);e&&this._processPath(e.rings,0)}else console.error("drawSolidFill Unexpected geometry type!")}drawSolidStroke(t,e,r){if(!t||this._clipCount>0)return;const i=.5*this.transformSize((0,utils/* getValue */._W)(r,O));if((0,jsonUtils/* isPolygon */.Bi)(t))this._processPath(t.rings,i);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._processPath(t.paths,i);else if((0,jsonUtils/* isExtent */.ZC)(t)){const e=it(t);e&&this._processPath(e.rings,i)}else console.error("drawSolidStroke unexpected geometry type!")}drawMarkerLayer(t,e){(0,jsonUtils/* isPolygon */.Bi)(e)&&t.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===t.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._processPath(e.rings,0):super.drawMarkerLayer(t,e)}drawHatchFill(t,e){this.drawSolidFill(t)}drawPictureFill(t,e){this.drawSolidFill(t)}drawGradientFill(t,e){this.drawSolidFill(t)}drawPictureStroke(t,e){this.drawSolidStroke(t,null,e.width)}drawGradientStroke(t,e){this.drawSolidStroke(t,null,e.width)}pushClipPath(t){this.drawSolidFill(t),this._clipCount++}popClipPath(){this._clipCount--}drawImage(t,e){const{url:r}=t,i=(0,utils/* getValue */._W)(t.scaleX,1);let s=i*e,o=e;const n=this._resourceManager.getResource(r);e||null==n||(s=i*n.width,o=n.height),this._merge(this.transformPt([-s/2,-o/2]),0),this._merge(this.transformPt([-s/2,o/2]),0),this._merge(this.transformPt([s/2,-o/2]),0),this._merge(this.transformPt([s/2,o/2]),0)}drawText(t,e){if(!e||0===e.length)return;this._textRasterizer||(this._textRasterizer=new TextRasterizer/* default */.A);const r=at(t),[i,s]=this._textRasterizer.computeTextSize(e,r);let o=0;switch(t.horizontalAlignment){case"Left":o=i/2;break;case"Right":o=-i/2}let n=0;switch(t.verticalAlignment){case"Bottom":n=s/2;break;case"Top":n=-s/2;break;case"Baseline":n=s/6}this._merge(this.transformPt([-i/2+o,-s/2+n]),0),this._merge(this.transformPt([-i/2+o,s/2+n]),0),this._merge(this.transformPt([i/2+o,-s/2+n]),0),this._merge(this.transformPt([i/2+o,s/2+n]),0)}_processPath(t,e){if(t)for(const r of t){const t=r?r.length:0;if(t>1){this._merge(this.transformPt(r[0]),e);for(let i=1;i<t;i++)this._merge(this.transformPt(r[i]),e)}}}_merge(t,e){t[0]-e<this._xmin&&(this._xmin=t[0]-e),t[0]+e>this._xmax&&(this._xmax=t[0]+e),t[1]-e<this._ymin&&(this._ymin=t[1]-e),t[1]+e>this._ymax&&(this._ymax=t[1]+e)}}class tt extends Z{constructor(){super(...arguments),this._searchPoint=[0,0],this._searchDistPoint=0,this._textInfo=null}hitTest(t,e,r,i,s,o){const a=o*(0,screenUtils/* pt2px */.Lz)(1);this.setTransform(),this.setGeomUnitsPerPoint(a),this._searchPoint=[(t[0]+t[2])/2,(t[1]+t[3])/2],this._searchDistPoint=(t[2]-t[0])/2/a,this._textInfo=i;const l=e&&("CIMPointSymbol"===e.type&&"Map"!==e.angleAlignment||"CIMTextSymbol"===e.type);return this._mapRotation=l?s:0,this._earlyReturn=!1,this.drawSymbol(e,r),this._earlyReturn}drawSolidFill(t,e){this._hitTestFill(t)}drawHatchFill(t,e){this._hitTestFill(t)}drawPictureFill(t,e){this._hitTestFill(t)}drawGradientFill(t,e){this._hitTestFill(t)}drawSolidStroke(t,e,r,i,s,o){this._hitTestStroke(t,r)}drawPictureStroke(t,e){this._hitTestStroke(t,e.width)}drawGradientStroke(t,e){this._hitTestStroke(t,e.width)}drawMarkerLayer(t,e){t.markerPlacement&&("CIMMarkerPlacementInsidePolygon"===t.markerPlacement.type||"CIMMarkerPlacementPolygonCenter"===t.markerPlacement.type&&t.markerPlacement.clipAtBoundary)?this._hitTestFill(e):super.drawMarkerLayer(t,e)}pushClipPath(t){}popClipPath(){}drawImage(t,e){const{url:r}=t,i=(0,utils/* getValue */._W)(t.scaleX,1),s=this._resourceManager.getResource(r);if(null==s||0===s.height||0===e)return;const o=e*this.geomUnitsPerPoint(),n=o*i*(s.width/s.height),a=this.reverseTransformPt(this._searchPoint),l=this._searchDistPoint;Math.abs(a[0])<n/2+l&&Math.abs(a[1])<o/2+l&&(this._earlyReturn=!0)}drawText(e,r){const i=this._textInfo;if(!i)return;const s=i.get(e);if(!s)return;const{text:o,mosaicItem:n}=s;if(!n?.glyphMosaicItems?.length)return;const a=(0,utils/* getValue */._W)(e.height,W),{lineGapType:l,lineGap:h}=e,c=l?nt(l,(0,utils/* getValue */._W)(h),a):0,m=(0,BidiText/* bidiText */.y)(o)[1],f=n.glyphMosaicItems,u="CIMBackgroundCallout"===e.callout?.type,d=(0,shapingUtils/* shapeGlyphs */.Tl)(f,m,{scale:a/definitions/* glyphSize */.eG,angle:0,xOffset:0,yOffset:0,hAlign:st(e.horizontalAlignment),vAlign:ot(e.verticalAlignment),maxLineWidth:512,lineHeight:definitions/* magicLabelLineHeight */.DY*Math.max(.25,Math.min(c||1,4)),decoration:e.font.decoration||"none",isCIM:!0,hasBackground:u}),p=this.reverseTransformPt(this._searchPoint),_=p[0],g=p[1];for(const t of d.glyphs)if(_>t.xTopLeft&&_<t.xBottomRight&&g>-t.yBottomRight&&g<-t.yTopLeft){this._earlyReturn=!0;break}}_hitTestFill(t){let e=null;if((0,jsonUtils/* isExtent */.ZC)(t)){const r=t;e=[[[r.xmin,r.ymin],[r.xmin,r.ymax],[r.xmax,r.ymax],[r.xmax,r.ymin],[r.xmin,r.ymin]]]}else if((0,jsonUtils/* isPolygon */.Bi)(t))e=t.rings;else{if(!(0,jsonUtils/* isPolyline */.Rg)(t))return;e=t.paths}const r=this.reverseTransformPt(this._searchPoint);if(this._pointInPolygon(r,e)&&(this._earlyReturn=!0),!this._earlyReturn){const t=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(r,e,t)&&(this._earlyReturn=!0)}}_hitTestStroke(t,e){let r=null;if((0,jsonUtils/* isExtent */.ZC)(t)){const e=t;r=[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]}else if((0,jsonUtils/* isPolygon */.Bi)(t))r=t.rings;else{if(!(0,jsonUtils/* isPolyline */.Rg)(t))return;r=t.paths}const i=this.reverseTransformPt(this._searchPoint),s=(0,utils/* getValue */._W)(e,O)*this.geomUnitsPerPoint(),o=this.reverseTransformSize(this._searchDistPoint)*this.geomUnitsPerPoint();this._nearLine(i,r,s/2+o)&&(this._earlyReturn=!0)}_pointInPolygon(t,e){let r=0;for(const i of e){const e=i.length;for(let s=1;s<e;s++){const e=i[s-1],o=i[s];if(e[1]>t[1]==o[1]>t[1])continue;(o[0]-e[0])*(t[1]-e[1])-(o[1]-e[1])*(t[0]-e[0])>0?r++:r--}}return 0!==r}_nearLine(t,e,r){for(const i of e){const e=i.length;for(let s=1;s<e;s++){const e=i[s-1],o=i[s];let n=(o[0]-e[0])*(o[0]-e[0])+(o[1]-e[1])*(o[1]-e[1]);if(0===n)continue;n=Math.sqrt(n);const a=((o[0]-e[0])*(t[1]-e[1])-(o[1]-e[1])*(t[0]-e[0]))/n;if(Math.abs(a)<r){const i=((o[0]-e[0])*(t[0]-e[0])+(o[1]-e[1])*(t[1]-e[1]))/n;if(i>-r&&i<n+r)return!0}}}return!1}}class et extends Z{constructor(t,e,r,i){super(e,r),this._applyAdditionalRenderProps=i,this._colorSubstitutionHelper=new CIMImageColorSubstitutionHelper_t,this._ctx=t}drawSolidFill(t,e){if(!t)return;if((0,jsonUtils/* isPolygon */.Bi)(t))this._buildPath(t.rings,!0);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._buildPath(t.paths,!0);else if((0,jsonUtils/* isExtent */.ZC)(t))this._buildPath(it(t).rings,!0);else{if(!(0,jsonUtils/* isMultipoint */.U9)(t))return;console.log("CanvasDrawHelper.drawSolidFill - No implementation!")}const r=this._ctx;r.fillStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+(e[3]??255)/255+")",r.fill("evenodd")}drawSolidStroke(t,e,r,i,s,o){if(!t||!e||0===r)return;if((0,jsonUtils/* isPolygon */.Bi)(t))this._buildPath(t.rings,!0);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._buildPath(t.paths,!1);else{if(!(0,jsonUtils/* isExtent */.ZC)(t))return void console.log("CanvasDrawHelper.drawSolidStroke isn't implemented!");this._buildPath(it(t).rings,!0)}const n=this._ctx;n.strokeStyle="string"==typeof e?e:"rgba("+Math.round(e[0])+","+Math.round(e[1])+","+Math.round(e[2])+","+(e[3]??255)/255+")",n.lineWidth=Math.max(this.transformSize(r),.5),this._setCapStyle(i),this._setJoinStyle(s),n.miterLimit=o,n.stroke()}pushClipPath(t){if(this._ctx.save(),(0,jsonUtils/* isPolygon */.Bi)(t))this._buildPath(t.rings,!0);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._buildPath(t.paths,!0);else{if(!(0,jsonUtils/* isExtent */.ZC)(t))return;this._buildPath(it(t).rings,!0)}this._ctx.clip("evenodd")}popClipPath(){this._ctx.restore()}drawImage(t,e){const{colorSubstitutions:r,url:i,tintColor:s}=t,o=(0,utils/* getValue */._W)(t.scaleX,1),n=this._resourceManager.getResource(i);if(null==n)return;let a=e*(n.width/n.height),l=e;e||(a=n.width,l=n.height);const h=(0,utils/* isSVGImage */.UE)(i)||"src"in n&&(0,utils/* isSVGImage */.UE)(n.src);let c="getFrame"in n?imageUtils_t(n):n;r&&(c=this._colorSubstitutionHelper.applyColorSubstituition(c,r)),this._applyAdditionalRenderProps&&!h&&s&&(c=this._colorSubstitutionHelper.tintImageData(c,s));const m=this.transformPt([0,0]),[f,u]=this.getTransformAngle(),d=this.transformSize(1),p=this._ctx;p.save(),p.setTransform({m11:o*d*f,m12:o*d*u,m21:-d*u,m22:d*f,m41:m[0],m42:m[1]}),p.drawImage(c,-a/2,-l/2,a,l),p.restore()}drawText(t,e){if(!e||0===e.length)return;this._textRasterizer||(this._textRasterizer=new TextRasterizer/* default */.A);const r=at(t);r.size*=this.transformSize((0,screenUtils/* px2pt */.PN)(1));const i=this._textRasterizer.rasterizeText(e,r);if(!i)return;const{size:s,anchorX:n,anchorY:a,canvas:l}=i,h=s[0]*(n+.5),c=s[1]*(a-.5),m=this._ctx,f=this.transformPt([0,0]),[u,d]=this.getTransformAngle(),p=1;m.save(),m.setTransform({m11:p*u,m12:p*d,m21:-p*d,m22:p*u,m41:f[0]-p*h,m42:f[1]+p*c}),m.drawImage(l,0,0),m.restore()}drawPictureFill(t,e){if(!t)return;let{colorSubstitutions:r,height:i,offsetX:s,offsetY:o,rotation:n,scaleX:a,tintColor:l,url:h}=e;const c=this._resourceManager.getResource(h);if(null==c)return;if((0,jsonUtils/* isPolygon */.Bi)(t))this._buildPath(t.rings,!0);else if((0,jsonUtils/* isPolyline */.Rg)(t))this._buildPath(t.paths,!0);else if((0,jsonUtils/* isExtent */.ZC)(t))this._buildPath(it(t).rings,!0);else{if(!(0,jsonUtils/* isMultipoint */.U9)(t))return;console.log("CanvasDrawHelper.drawPictureFill - No implementation!")}const m=this._ctx,f=(0,utils/* isSVGImage */.UE)(h)||"src"in c&&(0,utils/* isSVGImage */.UE)(c.src);let g,y="getFrame"in c?imageUtils_t(c):c;if(r&&(y=this._colorSubstitutionHelper.applyColorSubstituition(y,r)),this._applyAdditionalRenderProps){f||l&&(y=this._colorSubstitutionHelper.tintImageData(y,l)),g=m.createPattern(y,"repeat");const t=this.transformSize(1);n||(n=0),s?s*=t:s=0,o?o*=t:o=0,i&&(i*=t);const e=i?i/c.height:1,r=a&&i?a*i/c.width:1;if(0!==n||1!==e||1!==r||0!==s||0!==o){const t=new DOMMatrix;t.rotateSelf(0,0,-n).translateSelf(s,o).scaleSelf(r,e,1),g.setTransform(t)}}else g=m.createPattern(y,"repeat");m.save(),m.fillStyle=g,m.fill("evenodd"),m.restore()}drawPictureStroke(t,e){if(!t)return;let{colorSubstitutions:i,capStyle:s,joinStyle:o,miterLimit:a,tintColor:l,url:h,width:c}=e;const m=this._resourceManager.getResource(h);if(null==m)return;let f;if((0,jsonUtils/* isPolygon */.Bi)(t))f=t.rings;else if((0,jsonUtils/* isPolyline */.Rg)(t))f=t.paths;else{if(!(0,jsonUtils/* isExtent */.ZC)(t))return (0,jsonUtils/* isMultipoint */.U9)(t)?void console.log("CanvasDrawHelper.drawPictureStroke - No implementation!"):void 0;f=it(t).rings}c||(c=m.width);const g=(0,utils/* isSVGImage */.UE)(h)||"src"in m&&(0,utils/* isSVGImage */.UE)(m.src);let y="getFrame"in m?imageUtils_t(m):m;i&&(y=this._colorSubstitutionHelper.applyColorSubstituition(y,i)),this._applyAdditionalRenderProps&&(g||l&&(y=this._colorSubstitutionHelper.tintImageData(y,l)));const P=Math.max(this.transformSize((0,screenUtils/* pt2px */.Lz)(c)),.5),w=P/y.width,x=this._ctx,S=x.createPattern(y,"repeat-y");let M,k;x.save(),this._setCapStyle(s),this._setJoinStyle(o),void 0!==a&&(x.miterLimit=a),x.lineWidth=P;for(let n of f)if(n=(0,lang/* clone */.o8)(n),ht(n),n&&!(n.length<=1)){M=this.transformPt(n[0]);for(let t=1;t<n.length;t++){k=this.transformPt(n[t]);const e=rt(M,k),r=new DOMMatrix;r.translateSelf(0,M[1]-P/2).scaleSelf(w,w,1).rotateSelf(0,0,90-e),S.setTransform(r),x.strokeStyle=S,x.beginPath(),x.moveTo(M[0],M[1]),x.lineTo(k[0],k[1]),x.stroke(),M=k}}x.restore()}_buildPath(t,e){const r=this._ctx;if(r.beginPath(),t)for(const i of t){const t=i?i.length:0;if(t>1){let s=this.transformPt(i[0]);r.moveTo(s[0],s[1]);for(let e=1;e<t;e++)s=this.transformPt(i[e]),r.lineTo(s[0],s[1]);e&&r.closePath()}}}_setCapStyle(t){switch(t){case enums/* LineCapStyle */.uT.Butt:this._ctx.lineCap="butt";break;case enums/* LineCapStyle */.uT.Round:this._ctx.lineCap="round";break;case enums/* LineCapStyle */.uT.Square:this._ctx.lineCap="square"}}_setJoinStyle(t){switch(t){case enums/* LineJoinStyle */.wd.Bevel:this._ctx.lineJoin="bevel";break;case enums/* LineJoinStyle */.wd.Round:this._ctx.lineJoin="round";break;case enums/* LineJoinStyle */.wd.Miter:this._ctx.lineJoin="miter"}}}function rt(t,e){const r=e[0]-t[0],i=e[1]-t[1];return 180/Math.PI*Math.atan2(i,r)}const it=t=>t?{spatialReference:t.spatialReference,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:null,st=t=>{switch(t){case"Left":return alignmentUtils/* HAlign */.oX.Left;case"Right":return alignmentUtils/* HAlign */.oX.Right;case"Center":return alignmentUtils/* HAlign */.oX.Center;case"Justify":return N.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),alignmentUtils/* HAlign */.oX.Center}},ot=t=>{switch(t){case"Top":return alignmentUtils/* VAlign */.gy.Top;case"Center":return alignmentUtils/* VAlign */.gy.Center;case"Bottom":return alignmentUtils/* VAlign */.gy.Bottom;case"Baseline":return alignmentUtils/* VAlign */.gy.Baseline}},nt=(t,e,r)=>{switch(t){case"ExtraLeading":return 1+e/r;case"Multiple":return e;case"Exact":return e/r}};function at(t,r=1){const i=(0,utils/* fromCIMFontDecoration */.DW)(t),s=(0,utils/* fromCIMFontStyle */._d)(t.fontStyleName),o=t.fontFamilyName??fontUtils/* defaultFontFamily */.Vb,{weight:n,style:a}=s,l=r*(t.height||5),h=(0,utils/* fromCIMHorizontalAlignment */.Bu)(t.horizontalAlignment),c=(0,utils/* fromCIMVerticalAlignment */.Nl)(t.verticalAlignment),m=(0,utils/* getFillColor */.pM)(t),f=(0,utils/* getFillColor */.pM)(t.haloSymbol),u=f?r*(0|t.haloSize):0,d="CIMBackgroundCallout"===t.callout?.type?t.callout.backgroundSymbol:null,p=(0,utils/* getFillColor */.pM)(d),_=(0,utils/* getStrokeWidth */.xo)(d),g=(0,utils/* getStrokeColor */._1)(d);return{color:m,size:l,horizontalAlignment:h,verticalAlignment:c,font:{family:o,style:(0,utils/* getFontStyle */.pV)(a),weight:(0,utils/* getFontWeight */.Kn)(n),decoration:i},halo:{size:u||0,color:f,style:a},backgroundColor:p,borderLine:null!=_&&null!=g?{size:_,color:g}:null,pixelRatio:1,premultiplyColors:!0}}const lt=1e-4;function ht(t){let e,r,i,s,o,n=t[0],a=1;for(;a<t.length;)e=t[a][0]-n[0],r=t[a][1]-n[1],s=0!==e?r/e:Math.PI/2,void 0!==i&&s-i<=lt?(t.splice(a-1,1),n=o):(o=n,n=t[a],a++),i=s}


/***/ }),

/***/ 48002:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $N: () => (/* binding */ le),
/* harmony export */   BW: () => (/* binding */ de),
/* harmony export */   Sc: () => (/* binding */ ie),
/* harmony export */   Vb: () => (/* binding */ te),
/* harmony export */   ll: () => (/* binding */ se),
/* harmony export */   wp: () => (/* binding */ ne)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96220);
/* harmony import */ var _core_BidiText_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(21870);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(9272);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(89882);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(36358);
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(28965);
/* harmony import */ var _Font_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(60340);
/* harmony import */ var _CIMPlacements_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(82250);
/* harmony import */ var _CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(48655);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(63643);
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(50072);
/* harmony import */ var _views_2d_arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(29986);
/* harmony import */ var _views_2d_engine_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(15946);
/* harmony import */ var _views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(43556);
/* harmony import */ var _views_2d_engine_webgl_mesh_templates_shapingUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(97557);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const W=Math.PI,J=W/2,K=Math.PI/180,Q=96/72,Z=4,ee=_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger("esri.symbols.cim.CIMSymbolHelper");function te(e){if(!e?.type)return null;let t;switch(e.type){case"cim":return e.data;case"web-style":return e;case"simple-marker":{const r=ne.fromSimpleMarker(e);if(!r)return null;t=r;break}case"picture-marker":t=ne.fromPictureMarker(e);break;case"simple-line":t=ne.fromSimpleLineSymbol(e);break;case"simple-fill":t=ne.fromSimpleFillSymbol(e);break;case"picture-fill":t=ne.fromPictureFillSymbol(e);break;case"text":t=ne.fromTextSymbol(e)}return{type:"CIMSymbolReference",symbol:t}}function re(e,t,r){switch(t.type){case"CIMSymbolReference":return re(e,t.symbol,r);case"CIMPointSymbol":null==r&&(r={x:0,y:0}),e.drawSymbol(t,r);break;case"CIMLineSymbol":null==r&&(r={paths:[[[0,0],[10,0]]]}),e.drawSymbol(t,r);break;case"CIMPolygonSymbol":null==r&&(r={rings:[[[0,0],[0,10],[10,10],[10,0],[0,0]]]}),e.drawSymbol(t,r);break;case"CIMTextSymbol":{const r={x:0,y:0};e.drawSymbol(t,r);break}case"CIMVectorMarker":{const r=new _CIMPlacements_js__WEBPACK_IMPORTED_MODULE_16__/* .Placement */ .W;e.drawMarker(t,r);break}}return e.envelope()}function oe(e){if(!e)return 0;switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAtExtremities":case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementAtRatioPositions":case"CIMMarkerPlacementOnLine":case"CIMMarkerPlacementOnVertices":return Math.abs(e.offset);default:return 0}}function ae(e){if(!e)return 0;switch(e.type){case"CIMGeometricEffectArrow":return Math.abs(.5*e.width);case"CIMGeometricEffectBuffer":return Math.abs(e.size);case"CIMGeometricEffectExtension":case"CIMGeometricEffectRadial":return Math.abs(e.length);case"CIMGeometricEffectJog":return Math.abs(.5*e.length);case"CIMGeometricEffectMove":return Math.max(Math.abs((0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.offsetX)),Math.abs((0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.offsetY)));case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":return Math.abs(e.offset);case"CIMGeometricEffectRegularPolygon":return Math.abs(e.radius);case"CIMGeometricEffectRotate":case"CIMGeometricEffectScale":default:return 0;case"CIMGeometricEffectTaperedPolygon":return.5*Math.max(Math.abs(e.fromWidth),Math.abs(e.toWidth));case"CIMGeometricEffectWave":return Math.abs(e.amplitude);case"CIMGeometricEffectDonut":return Math.abs(e.width)}}function se(e){if(!e)return 0;let t=0;for(const r of e)t+=ae(r);return t}class ie{getSymbolInflateSize(e,t,r,o,a){return e||(e=[0,0,0,0]),t?this._getInflateSize(e,t,r,o,a):e}static safeSize(e){const t=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(t*t+r*r)}_vectorMarkerBounds(e,t,r,o){let a=!0;const s=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)();if(t?.markerGraphics)for(const i of t.markerGraphics){const t=[0,0,0,0];i.geometry&&((0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .getBoundsXY */ .Rg)(s,i.geometry),t[0]=0,t[1]=0,t[2]=0,t[3]=0,this.getSymbolInflateSize(t,i.symbol,r,0,o),s[0]+=t[0],s[1]+=t[1],s[2]+=t[2],s[3]+=t[3],a?(e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],a=!1):(e[0]=Math.min(e[0],s[0]),e[1]=Math.min(e[1],s[1]),e[2]=Math.max(e[2],s[2]),e[3]=Math.max(e[3],s[3])))}return e}_getInflateSize(e,t,r,o,a){if(Se(t)){const s=this._getLayersInflateSize(e,t.symbolLayers,r,o,a),i=se(t.effects);return i>0&&(s[0]-=i,s[1]-=i,s[2]+=i,s[3]+=i),s}return this._getTextInflatedSize(e,t,a)}_getLayersInflateSize(e,t,r,o,a){let s=!0;if(!t)return e;for(const i of t){if(!i)continue;let t=[0,0,0,0];switch(i.type){case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=i;let r=e.width;null!=r&&(e.capStyle===_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Square||e.joinStyle===_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Miter?r/=1.4142135623730951:r/=2,t[0]=-r,t[1]=-r,t[2]=r,t[3]=r);break}case"CIMCharacterMarker":case"CIMVectorMarker":case"CIMPictureMarker":{const e=i;if("CIMVectorMarker"===i.type){const e=i;if(t=this._vectorMarkerBounds(t,e,r,a),e.frame){const r=(e.frame.xmin+e.frame.xmax)/2,o=(e.frame.ymin+e.frame.ymax)/2;if(t[0]-=r,t[1]-=o,t[2]-=r,t[3]-=o,null!=e.size){const r=e.size/(e.frame.ymax-e.frame.ymin);t[0]*=r,t[1]*=r,t[2]*=r,t[3]*=r}}}else if("CIMPictureMarker"===i.type){const o=i,a=r.getResource(o.url);let s=1;if(null!=a&&a.height&&(s=a.width/a.height),null!=e.size){const r=e.size/2,a=e.size*s*o.scaleX/2;t=[-a,-r,a,r]}}else if(null!=e.size){const r=e.size/2;t=[-r,-r,r,r]}if(e.anchorPoint){let r,o;"Absolute"===e.anchorPointUnits?(r=e.anchorPoint.x,o=e.anchorPoint.y):(r=e.anchorPoint.x*(t[2]-t[0]),o=e.anchorPoint.y*(t[3]-t[1])),t[0]-=r,t[1]-=o,t[2]-=r,t[3]-=o}let s=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.rotation);if(e.rotateClockwise&&(s=-s),o&&(s-=o),s){const e=K*s,r=Math.cos(e),o=Math.sin(e),a=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .create */ .vt)([_views_2d_engine_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .cInfinity */ .MG,_views_2d_engine_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .cInfinity */ .MG,-_views_2d_engine_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .cInfinity */ .MG,-_views_2d_engine_vectorTiles_GeometryUtils_js__WEBPACK_IMPORTED_MODULE_13__/* .cInfinity */ .MG]);(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .expandPointInPlace */ .tK)(a,[t[0]*r-t[1]*o,t[0]*o+t[1]*r]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .expandPointInPlace */ .tK)(a,[t[0]*r-t[3]*o,t[0]*o+t[3]*r]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .expandPointInPlace */ .tK)(a,[t[2]*r-t[1]*o,t[2]*o+t[1]*r]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_6__/* .expandPointInPlace */ .tK)(a,[t[2]*r-t[3]*o,t[2]*o+t[3]*r]),t=a}let c=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.offsetX),f=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.offsetY);if(o){const e=K*o,t=Math.cos(e),r=Math.sin(e),a=c*r+f*t;c=c*t-f*r,f=a}t[0]+=c,t[1]+=f,t[2]+=c,t[3]+=f;const m=oe(e.markerPlacement);m>0&&(t[0]-=m,t[1]-=m,t[2]+=m,t[3]+=m);break}}const c=se(i.effects);c>0&&(t[0]-=c,t[1]-=c,t[2]+=c,t[3]+=c),s?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],s=!1):(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))}return e}_getTextInflatedSize(e,r,o){const a=r.height??_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .defaultTextHeight */ .sA;if(e[0]=-a/2,e[1]=-a/2,e[2]=a/2,e[3]=a/2,!o)return e;const s=o.get(r);if(!s)return e;const{text:i,mosaicItem:n}=s;if(!n?.glyphMosaicItems?.length)return e;const{lineGapType:l,lineGap:c}=r,f=l?(0,_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .lineGapType2LineHeight */ .QF)(l,c??0,a):0,m=(0,_core_BidiText_js__WEBPACK_IMPORTED_MODULE_1__/* .bidiText */ .y)(i)[1],y=n.glyphMosaicItems,M="CIMBackgroundCallout"===r.callout?.type,d=(0,_views_2d_engine_webgl_mesh_templates_shapingUtils_js__WEBPACK_IMPORTED_MODULE_15__/* .shapeGlyphs */ .Tl)(y,m,{scale:a/_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__/* .glyphSize */ .eG,angle:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(r.angle),xOffset:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(r.offsetX),yOffset:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(r.offsetY),hAlign:(0,_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .horizontalAlignment2HAlign */ .vx)(r.horizontalAlignment),vAlign:(0,_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .verticalAlignment2VAlign */ .Jm)(r.verticalAlignment),maxLineWidth:512,lineHeight:_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__/* .magicLabelLineHeight */ .DY*Math.max(.25,Math.min(f||1,4)),decoration:r.font.decoration||"none",isCIM:!0,hasBackground:M}).boundsT;return e[0]=d.x-d.halfWidth,e[1]=-d.y-d.halfHeight,e[2]=d.x+d.halfWidth,e[3]=-d.y+d.halfHeight,e}}class ne{static getEnvelope(e,t,r){if(!e)return null;const o=new _CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .EnvDrawHelper */ .mx(r);if(Array.isArray(e)){let r;for(const a of e)r?r.union(re(o,a,t)):r=re(o,a,t);return r}return re(o,e,t)}static getTextureAnchor(e,t){const r=this.getEnvelope(e,null,t);if(!r)return[0,0,0];const o=(r.x+.5*r.width)*Q,a=(r.y+.5*r.height)*Q,s=r.width*Q+2,i=r.height*Q+2;return[-o/s,-a/i,i]}static rasterize(e,t,r,o,a=!0){const s=r||this.getEnvelope(t,null,o);if(!s)return[null,0,0,0,0];const i=(s.x+.5*s.width)*Q,n=(s.y+.5*s.height)*Q;e.width=s.width*Q,e.height=s.height*Q,r||(e.width+=2,e.height+=2);const l=e.getContext("2d"),c=_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .Transformation */ .IT.createScale(Q,-Q);c.translate(.5*e.width-i,.5*e.height+n);const f=new _CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .CanvasDrawHelper */ .Rj(l,o,c);switch(t.type){case"CIMPointSymbol":{const e={type:"point",x:0,y:0};f.drawSymbol(t,e);break}case"CIMVectorMarker":{const e=new _CIMPlacements_js__WEBPACK_IMPORTED_MODULE_16__/* .Placement */ .W;f.drawMarker(t,e);break}}const m=l.getImageData(0,0,e.width,e.height),u=new Uint8Array(m.data);if(a){let e;for(let t=0;t<u.length;t+=4)e=u[t+3]/255,u[t]=u[t]*e,u[t+1]=u[t+1]*e,u[t+2]=u[t+2]*e}return[u,e.width,e.height,-i/e.width,-n/e.height]}static fromTextSymbol(e){const{angle:r,color:o,font:a,haloColor:s,haloSize:i,horizontalAlignment:n,kerning:l,text:c,verticalAlignment:f,xoffset:m,yoffset:y,backgroundColor:u,borderLineColor:h,borderLineSize:p}=e;let M,d,S,b,C,g;a&&(M=a.family,d=a.style,S=a.weight,b=a.size,C=a.decoration);let I=!1;if(c){I=(0,_core_BidiText_js__WEBPACK_IMPORTED_MODULE_1__/* .bidiText */ .y)(c)[1]}return(u||p)&&(g={type:"CIMBackgroundCallout",margin:null,backgroundSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",color:ue(u)},{type:"CIMSolidStroke",color:ue(h),width:p}]},accentBarSymbol:null,gap:null,leaderLineSymbol:null,lineStyle:null}),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPointUnits:"Relative",dominantSizeAxis3D:"Y",size:10,billboardMode3D:"FaceNearPlane",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMTextSymbol",angle:r,blockProgression:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .BlockProgression */ .TZ.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .FontEffects */ .Y.Normal,fontEncoding:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .FontEncoding */ .bj.Unicode,fontFamilyName:M||"Arial",fontStyleName:he(d,S),fontType:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .FontType */ .g7.Unspecified,haloSize:i,height:b,hinting:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .GlyphHinting */ .mU.Default,horizontalAlignment:me(n??"center"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:"Multiple",offsetX:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(m),offsetY:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(y),strikethrough:"line-through"===C,underline:"underline"===C,symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:ue(o)}]},haloSymbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:ue(s)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:"Normal",textDirection:I?_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .TextReadingDirection */ .f0.RTL:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .TextReadingDirection */ .f0.LTR,verticalAlignment:ye(f??"baseline"),verticalGlyphOrientation:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .VerticalGlyphOrientation */ .vG.Right,wordSpacing:100,billboardMode3D:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .BillBoardMode */ .xn.FaceNearPlane,callout:g},textString:c}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:"Display"}}static fromPictureFillSymbol(e){const{height:t,outline:r,width:o,xoffset:a,xscale:s,yoffset:i,yscale:n}=e,l=[],c={type:"CIMPolygonSymbol",symbolLayers:l};if(r){const e=ke(r);e&&l.push(e)}let f=e.url;"esriPFS"===e.type&&e.imageData&&(f=e.imageData);const m="angle"in e?e.angle??0:0,y=(o??0)*(s||1),u=(t??0)*(n||1);return l.push({type:"CIMPictureFill",invertBackfaceTexture:!1,scaleX:1,textureFilter:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .TextureFilter */ .O$.Picture,tintColor:null,url:f,height:u,width:y,offsetX:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(a),offsetY:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(i),rotation:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(-m),colorSubstitutions:null}),c}static fromSimpleFillSymbol(e){const{color:t,style:o,outline:a}=e,s=[],n={type:"CIMPolygonSymbol",symbolLayers:s};if(a){const e=ke(a);e&&s.push(e)}if(o&&"solid"!==o&&"none"!==o&&"esriSFSSolid"!==o&&"esriSFSNull"!==o){const e={type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",color:ue(t),capStyle:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Butt,joinStyle:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Miter,width:.75}]};let a=0;const n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .px2pt */ .PN)(Ce(o)?8:10);switch(o){case"vertical":case"esriSFSVertical":a=90;break;case"forward-diagonal":case"esriSFSForwardDiagonal":case"diagonal-cross":case"esriSFSDiagonalCross":a=-45;break;case"backward-diagonal":case"esriSFSBackwardDiagonal":a=45;break;case"cross":case"esriSFSCross":a=0}s.push({type:"CIMHatchFill",lineSymbol:e,offsetX:0,offsetY:0,rotation:a,separation:n}),"cross"===o||"esriSFSCross"===o?s.push({type:"CIMHatchFill",lineSymbol:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(e),offsetX:0,offsetY:0,rotation:90,separation:n}):"diagonal-cross"!==o&&"esriSFSDiagonalCross"!==o||s.push({type:"CIMHatchFill",lineSymbol:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(e),offsetX:0,offsetY:0,rotation:45,separation:n})}else!o||"solid"!==o&&"esriSFSSolid"!==o||s.push({type:"CIMSolidFill",enable:!0,color:ue(t)});return n}static fromSimpleLineSymbol(e){const{cap:t,color:r,join:o,marker:a,miterLimit:s,style:i,width:n}=e;let l=null;"solid"!==i&&"none"!==i&&"esriSLSSolid"!==i&&"esriSLSNull"!==i&&(l=[{type:"CIMGeometricEffectDashes",dashTemplate:de(i,t),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]);const c=[];if(a){let e;switch(a.placement){case"begin-end":e=_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .ExtremityPlacement */ .$2.Both;break;case"begin":e=_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .ExtremityPlacement */ .$2.JustBegin;break;case"end":e=_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .ExtremityPlacement */ .$2.JustEnd;break;default:e=_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .ExtremityPlacement */ .$2.None}const t=ne.fromSimpleMarker(a,n,r).symbolLayers[0];t.markerPlacement={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:e,offsetAlongLine:0},c.push(t)}return c.push({type:"CIMSolidStroke",color:"none"!==i&&"esriSLSNull"!==i?ue(r):[0,0,0,0],capStyle:ce(t),joinStyle:fe(o),miterLimit:s,width:n,effects:l}),{type:"CIMLineSymbol",symbolLayers:c}}static fromPictureMarker(e){const{angle:t,height:r,width:o,xoffset:a,yoffset:s}=e;let i=e.url;return"esriPMS"===e.type&&e.imageData&&(i=e.imageData),{type:"CIMPointSymbol",symbolLayers:[{type:"CIMPictureMarker",invertBackfaceTexture:!1,scaleX:1,textureFilter:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .TextureFilter */ .O$.Picture,tintColor:null,url:i,size:r,width:o,offsetX:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(a),offsetY:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(s),rotation:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(-t)}]}}static fromSimpleMarker(e,t,r){const{style:o}=e,a=e.color??r;if("path"===o){const t=[];if("outline"in e&&e.outline){const r=e.outline;t.push({type:"CIMSolidStroke",enable:!0,width:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .pt2px */ .Lz)(Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .px2pt */ .PN)(r.width))),color:ue(r.color),path:e.path})}t.push({type:"CIMSolidFill",enable:!0,color:ue(a),path:e.path});const[r,o]=be("square");return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(-e.angle),size:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.size||6),offsetX:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.xoffset),offsetY:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.yoffset),frame:r,markerGraphics:[{type:"CIMMarkerGraphic",geometry:o,symbol:{type:"CIMPolygonSymbol",symbolLayers:t}}]}]}}const n=[];let l,c;if("outline"in e&&e.outline&&"none"!==e.outline.style&&"esriSLSNull"!==e.outline.style){const t=e.outline,r="solid"!==t.style&&"esriSLSSolid"!==t.style;[l,c]=r?be(o,e.size):be(o);const a="cross"!==e.style&&"x"!==e.style||"dot"===e?.outline.style||"short-dot"===e?.outline.style?_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineDashEnding */ .yS.HalfGap:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineDashEnding */ .yS.FullPattern,f=r?[{type:"CIMGeometricEffectAddControlPoints"},{type:"CIMGeometricEffectDashes",dashTemplate:de(t.style,null).map((e=>t.width&&t.width>0?e*t.width:e)),lineDashEnding:a,controlPointEnding:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineDashEnding */ .yS.FullPattern}]:void 0;n.push({type:"CIMSolidStroke",capStyle:r?_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Round:_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Butt,enable:!0,width:null!=t.width&&t.width>.667?(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .pt2px */ .Lz)(Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .px2pt */ .PN)(t.width))):t.width,color:ue(t.color),effects:f})}else!t||"line-marker"!==e.type||"cross"!==e.style&&"x"!==e.style?[l,c]=be(o):([l,c]=be(o),n.push({type:"CIMSolidStroke",enable:!0,width:t,color:ue(a)}));n.push({type:"CIMSolidFill",enable:!0,color:ue(a)});const f={type:"CIMPolygonSymbol",symbolLayers:n};return{type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(-e.angle),size:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.size||6*t),offsetX:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.xoffset),offsetY:(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .getValue */ ._W)(e.yoffset),frame:l,markerGraphics:[{type:"CIMMarkerGraphic",geometry:c,symbol:f}]}]}}static fromCIMHatchFill(e,t){const o=t*(e.separation??_CIMSymbolDrawHelper_js__WEBPACK_IMPORTED_MODULE_10__/* .defaultHatchFillSeparation */ .Lh),a=o/2,s=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(e.lineSymbol);s.symbolLayers?.forEach((e=>{switch(e.type){case"CIMSolidStroke":null!=e.width&&(e.width*=t),e.effects?.forEach((e=>{"CIMGeometricEffectDashes"===e.type&&(e.dashTemplate=e.dashTemplate.map((e=>e*t)))}));break;case"CIMVectorMarker":{null!=e.size&&(e.size*=t);const r=e.markerPlacement;null!=r&&"placementTemplate"in r&&(r.placementTemplate=r.placementTemplate.map((e=>e*t)));break}}}));let i=this._getLineSymbolPeriod(s)||Z;for(;i<Z;)i*=2;const n=i/2;return{type:"CIMVectorMarker",frame:{xmin:-n,xmax:n,ymin:-a,ymax:a},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-n,0],[n,0]]]},symbol:s}],size:o}}static fetchResources(e,t,r){if(e&&t)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const o=e.symbolLayers;if(!o)return;for(const e of o)switch(Ie(e,t,r),e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&r.push(t.fetchResource(e.url,null));break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)continue;for(const e of o)if(e){const o=e.symbol;o&&ne.fetchResources(o,t,r)}}}break}}}static fetchFonts(e,t,r){if(e&&t)if("symbolLayers"in e&&e.symbolLayers){for(const o of e.symbolLayers)if("CIMVectorMarker"===o.type&&o.markerGraphics)for(const e of o.markerGraphics)e?.symbol&&ne.fetchFonts(e.symbol,t,r)}else if("CIMTextSymbol"===e.type){const{fontFamilyName:o,fontStyleName:a}=e;if(!o||"calcitewebcoreicons"===o.toLowerCase())return;const{style:s,weight:i}=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .fromCIMFontStyle */ ._d)(a),n=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .fromCIMFontDecoration */ .DW)(e),l=new _Font_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A({family:o,style:s,weight:i,decoration:n});r.push(t.loadFont(l).catch((()=>{ee.error(`Unsupported font ${o} in CIM symbol`)})))}}static _getLineSymbolPeriod(e){if(e){const t=this._getEffectsRepeat(e.effects);if(t)return t;if(e.symbolLayers)for(const r of e.symbolLayers)if(r){const e=this._getEffectsRepeat(r.effects);if(e)return e;switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=this._getPlacementRepeat(r.markerPlacement);if(e)return e}}}}return 0}static _getEffectsRepeat(e){if(e)for(const t of e)if(t)switch(t.type){case"CIMGeometricEffectDashes":{const e=t.dashTemplate;if(e&&e.length){let t=0;for(const r of e)t+=r;return 1&e.length&&(t*=2),t}break}case"CIMGeometricEffectWave":return t.period;default:ee.error(`unsupported geometric effect type ${t.type}`)}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case"CIMMarkerPlacementAlongLineSameSize":case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineVariableSize":{const t=e.placementTemplate;if(t&&t.length){let e=0;for(const r of t)e+=+r;return 1&t.length&&(e*=2),e}break}}return 0}static fromCIMInsidePolygon(e){const t=e.markerPlacement,r={...e};r.markerPlacement=null,r.anchorPoint=null;const o=Math.abs(t.stepX),s=Math.abs(t.stepY),n=(t.randomness??100)/100;let l,c,f,m;if("Random"===t.gridType){const e=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_18__/* .px2pt */ .PN)(_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__/* .randomInsidePolygonTextureSize */ .yv),r=Math.max(Math.floor(e/o),1),y=Math.max(Math.floor(e/s),1);l=r*o/2,c=y*s/2,f=2*c;const u=new _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A(t.seed),h=n*o/1.5,p=n*s/1.5;m=[];for(let t=0;t<r;t++)for(let e=0;e<y;e++){const r=t*o-l+h*(.5-u.getFloat()),a=e*s-c+p*(.5-u.getFloat());m.push({x:r,y:a}),0===t&&m.push({x:r+2*l,y:a}),0===e&&m.push({x:r,y:a+2*c})}}else!0===t.shiftOddRows?(l=o/2,c=s,f=2*s,m=[{x:-l,y:0},{x:l,y:0},{x:0,y:c},{x:0,y:-c}]):(l=o/2,c=s/2,f=s,m=[{x:-o,y:0},{x:0,y:-s},{x:-o,y:-s},{x:0,y:0},{x:o,y:0},{x:0,y:s},{x:o,y:s},{x:-o,y:s},{x:o,y:-s}]);return{type:"CIMVectorMarker",frame:{xmin:-l,xmax:l,ymin:-c,ymax:c},markerGraphics:m.map((e=>({type:"CIMMarkerGraphic",geometry:e,symbol:{type:"CIMPointSymbol",symbolLayers:[r]}}))),size:f}}static getSize(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const e=r.size;null!=e&&e>t&&(t=e);break}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const e=r.width;null!=e&&e>t&&(t=e);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .isCIMMarkerStrokePlacement */ .zr)(r.markerPlacement)){const e=r.size;null!=e&&e>t&&(t=e)}}return t}}}static getMarkerScaleRatio(e){if(e&&"CIMVectorMarker"===e.type)if(!1!==e.scaleSymbolsProportionally&&e.frame&&null!=e.size){const t=e.frame.ymax-e.frame.ymin;return e.size/t}return 1}}class le{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let o=!1;for(const t of r)if(t.primitiveName===e.primitiveName){o=!0;break}if(!o)for(const a of t)a.primitiveName===e.primitiveName&&r.push(a)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const o of e.effects)le.findApplicableOverrides(o,t,r);if(e.symbolLayers)for(const o of e.symbolLayers)le.findApplicableOverrides(o,t,r);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(e.effects)for(const o of e.effects)le.findApplicableOverrides(o,t,r);if(e.markerPlacement&&le.findApplicableOverrides(e.markerPlacement,t,r),"CIMVectorMarker"===e.type){if(e.markerGraphics)for(const o of e.markerGraphics)le.findApplicableOverrides(o,t,r),le.findApplicableOverrides(o.symbol,t,r)}else"CIMCharacterMarker"===e.type?le.findApplicableOverrides(e.symbol,t,r):"CIMHatchFill"===e.type?le.findApplicableOverrides(e.lineSymbol,t,r):"CIMPictureMarker"===e.type&&le.findApplicableOverrides(e.animatedSymbolProperties,t,r)}}}static findEffectOverrides(e,t,r){if(!t||!e)return;const o=e.length;for(let a=0;a<o;a++){const o=e[a],s=o?.primitiveName;if(s){let e=!1;for(const t of r)if(t.primitiveName===s){e=!0;break}if(!e)for(const o of t)o.primitiveName===s&&r.push(o)}}}static async resolveSymbolOverrides(e,t,o,a,s,i,n){if(!e?.symbol)return null;let{symbol:l,primitiveOverrides:c}=e;const f=!!c;if(!f&&!a)return l;l=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__/* .clone */ .o8)(l);let m=!0;if(t||(t={attributes:{}},m=!1),f){if(m||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$feature")))),n||(c=c.filter((e=>!e.valueExpressionInfo?.expression.includes("$view")))),c.length>0){const e=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .attributesToFields */ .O2)(t.attributes);await le.evaluateOverrides(c,t,{spatialReference:o,fields:e,geometryType:s},i,n)}le.applyOverrides(l,c)}return a&&le.applyDictionaryTextOverrides(l,t,a),l}static async evaluateOverrides(e,t,r,o,a){if(!t)return;let s;for(const i of e){const e=i.valueExpressionInfo;if(e&&r?.geometryType){s||(s=[]),i.value=void 0;const n=(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_8__/* .createRendererExpression */ .Ad)(e.expression,r.spatialReference,r.fields).then((e=>{i.value=(0,_views_2d_arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)(e,t,{$view:a},r.geometryType,o)}));s.push(n)}}void 0!==s&&s.length>0&&await Promise.all(s)}static applyDictionaryTextOverrides(e,t,r,o="Normal"){if(e?.type)switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const a=e.symbolLayers;if(!a)return;for(const s of a)s&&"CIMVectorMarker"===s.type&&le.applyDictionaryTextOverrides(s,t,r,"CIMTextSymbol"===e.type?e.textCase:o)}break;case"CIMVectorMarker":{const o=e.markerGraphics;if(!o)return;for(const e of o)e&&le.applyDictionaryTextOverrides(e,t,r)}break;case"CIMMarkerGraphic":{const a=e.textString;if(a&&a.includes("[")){const s=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .analyzeTextParts */ .gQ)(a,r);e.textString=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .assignTextValuesFromFeature */ .FM)(t,s,o)}}}}static applyOverrides(e,t,r,o){if(e.primitiveName)for(const a of t)if(a.primitiveName===e.primitiveName){const t=ge(a.propertyName);if(o&&o.push({cim:e,nocapPropertyName:t,value:e[t]}),a.expression&&(a.value=le.toValue(a.propertyName,a.expression)),r){let t=!1;for(const o of r)o.primitiveName===e.primitiveName&&(t=!0);t||r.push(a)}null!=a.value&&(e[t]=a.value)}switch(e.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(e.effects)for(const a of e.effects)le.applyOverrides(a,t,r,o);if(e.symbolLayers)for(const a of e.symbolLayers)le.applyOverrides(a,t,r,o);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(e.effects)for(const a of e.effects)le.applyOverrides(a,t,r,o);if("CIMVectorMarker"===e.type&&e.markerGraphics)for(const a of e.markerGraphics)le.applyOverrides(a,t,r,o),le.applyOverrides(a.symbol,t,r,o)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t="";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(t,r){if("DashTemplate"===t)return r.split(" ").map((e=>Number(e)));if("Color"===t){const t=new _Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(r).toRgba();return t[3]*=255,t}return r}}const ce=e=>{if(!e)return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Butt;switch(e){case"butt":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Butt;case"square":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Square;case"round":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineCapStyle */ .uT.Round}},fe=e=>{if(!e)return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Miter;switch(e){case"miter":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Miter;case"round":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Round;case"bevel":return _enums_js__WEBPACK_IMPORTED_MODULE_11__/* .LineJoinStyle */ .wd.Bevel}},me=e=>{if(null==e)return"Center";switch(e){case"left":return"Left";case"right":return"Right";case"center":return"Center"}},ye=e=>{if(null==e)return"Center";switch(e){case"baseline":return"Baseline";case"top":return"Top";case"middle":return"Center";case"bottom":return"Bottom"}},ue=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:o,a}=e;return[t,r,o,255*a]},he=(e,t)=>{const r=pe(t),o=Me(e);return r&&o?`${r}-${o}`:`${r}${o}`},pe=e=>{if(!e)return"";switch(e.toLowerCase()){case"bold":case"bolder":return"bold"}return""},Me=e=>{if(!e)return"";switch(e.toLowerCase()){case"italic":case"oblique":return"italic"}return""},de=(e,t)=>{const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("safari")?.001:0,o="butt"===t;switch(e){case"dash":case"esriSLSDash":return o?[4,3]:[3,4];case"dash-dot":case"esriSLSDashDot":return o?[4,3,1,3]:[3,4,r,4];case"dot":case"esriSLSDot":return o?[1,3]:[r,4];case"long-dash":case"esriSLSLongDash":return o?[8,3]:[7,4];case"long-dash-dot":case"esriSLSLongDashDot":return o?[8,3,1,3]:[7,4,r,4];case"long-dash-dot-dot":case"esriSLSDashDotDot":return o?[8,3,1,3,1,3]:[7,4,r,4,r,4];case"short-dash":case"esriSLSShortDash":return o?[4,1]:[3,2];case"short-dash-dot":case"esriSLSShortDashDot":return o?[4,1,1,1]:[3,2,r,2];case"short-dash-dot-dot":case"esriSLSShortDashDotDot":return o?[4,1,1,1,1,1]:[3,2,r,2,r,2];case"short-dot":case"esriSLSShortDot":return o?[1,1]:[r,2];case"solid":case"esriSLSSolid":case"none":return ee.error("Unexpected: style does not require rasterization"),[0,0];default:return ee.error(`Tried to rasterize SLS, but found an unexpected style: ${e}!`),[0,0]}};function Se(e){return void 0!==e.symbolLayers}const be=(e,t=100)=>{const r=t/2;let o,a;const s=e;if("circle"===s||"esriSMSCircle"===s){const e=.25;let t=Math.acos(1-e/r),s=Math.ceil(W/t/4);0===s&&(s=1),t=J/s,s*=4;const i=[];i.push([r,0]);for(let o=1;o<s;o++)i.push([r*Math.cos(o*t),-r*Math.sin(o*t)]);i.push([r,0]),o={rings:[i]},a={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("cross"===s||"esriSMSCross"===s){const e=0;o={paths:[[[e,r],[e,-r]],[[r,e],[-r,e]]]},a={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if("diamond"===s||"esriSMSDiamond"===s)o={rings:[[[-r,0],[0,r],[r,0],[0,-r],[-r,0]]]},a={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("square"===s||"esriSMSSquare"===s)o={rings:[[[-r,-r],[-r,r],[r,r],[r,-r],[-r,-r]]]},a={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("x"===s||"esriSMSX"===s)o={paths:[[[r,r],[-r,-r]],[[r,-r],[-r,r]]]},a={xmin:-r,ymin:-r,xmax:r,ymax:r};else if("triangle"===s||"esriSMSTriangle"===s){const e=t*.5773502691896257,r=-e,s=2/3*t,i=s-t;o={rings:[[[r,i],[0,s],[e,i],[r,i]]]},a={xmin:r,ymin:i,xmax:e,ymax:s}}else"arrow"===s&&(o={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},a={xmin:-r,ymin:-r,xmax:r,ymax:r});return[a,o]},Ce=e=>"vertical"===e||"horizontal"===e||"cross"===e||"esriSFSCross"===e||"esriSFSVertical"===e||"esriSFSHorizontal"===e,ge=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;function Ie(e,t,r){if(!e.effects||null!=t.geometryEngine)return;if(t.geometryEnginePromise)return void r.push(t.geometryEnginePromise);(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .isGeometryEngineRequired */ .yH)(e.effects)&&(t.geometryEnginePromise=(0,_utils_js__WEBPACK_IMPORTED_MODULE_17__/* .importGeometryEngine */ ._H)(),r.push(t.geometryEnginePromise),t.geometryEnginePromise.then((e=>t.geometryEngine=e)))}function ke(e){if(!e)return null;let t=null;const{cap:r,color:o,join:a,miterLimit:s,style:i,width:n}=e;return"solid"!==i&&"none"!==i&&"esriSLSSolid"!==i&&"esriSLSNull"!==i&&(t=[{type:"CIMGeometricEffectDashes",dashTemplate:de(i,r),lineDashEnding:"NoConstraint",scaleDash:!0,offsetAlongLine:null}]),{type:"CIMSolidStroke",color:"esriSLSNull"!==i&&"none"!==i?ue(o):[0,0,0,0],capStyle:ce(r),joinStyle:fe(a),miterLimit:s,width:n,effects:t}}


/***/ }),

/***/ 76715:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=0,h=0,i=0,s=0){this.x=t,this.y=h,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}


/***/ }),

/***/ 21422:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Fj: () => (/* binding */ m),
/* harmony export */   Z7: () => (/* binding */ f),
/* harmony export */   ce: () => (/* binding */ a),
/* harmony export */   eR: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51859);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1171);
/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(76715);
/* harmony import */ var _views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":{const o=t.symbolLayers;return o&&1===o.length?l(o[0]):null}case"CIMVectorMarker":{const o=t.markerGraphics;if(!o||1!==o.length)return null;const n=o[0];if(!n)return null;const r=n.geometry;if(!r)return null;const l=n.symbol;return!l||"CIMPolygonSymbol"!==l.type&&"CIMLineSymbol"!==l.type||l.symbolLayers?.some((t=>!!t.effects))?null:{geom:r,asFill:"CIMPolygonSymbol"===l.type}}case"sdf":return{geom:t.geom,asFill:t.asFill}}return null}function e(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function i(t){let o=1/0,r=-1/0,l=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<l&&(l=t[1]),t[1]>e&&(e=t[1]);return new _Rect_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A(o,l,r-o,e-l)}function s(t){let o=1/0,n=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return[o,r,n,l]}function f(t){return t?t.rings?s(t.rings):t.paths?s(t.paths):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isExtent */ .ZC)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function m(t,o,n,l,e){const[i,s,f,m]=t;if(f<i||m<s)return[0,0,0];const a=f-i,u=m-s,c=128,h=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,y=Math.floor(.5*(.5*c-h)),x=(c-2*(y+h))/Math.max(a,u),M=Math.round(a*x)+2*y,g=Math.round(u*x)+2*y;let p=1;if(o){p=g/x/(o.ymax-o.ymin)}let d=0,b=0,w=1;l&&(e?o&&n&&o.ymax-o.ymin>0&&(w=(o.xmax-o.xmin)/(o.ymax-o.ymin),d=l.x/(n*w),b=l.y/n):(d=l.x,b=l.y)),o&&(d=.5*(o.xmax+o.xmin)+d*(o.xmax-o.xmin),b=.5*(o.ymax+o.ymin)+b*(o.ymax-o.ymin)),d-=i,b-=s,d*=x,b*=x,d+=y,b+=y;let F=d/M-.5,j=b/g-.5;return e&&n&&(F*=n*w,j*=n),[p,F,j]}function a(t){const o=e(t.geom),n=i(o),l=128,s=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .spritePadding */ .hM,f=Math.floor(.5*(.5*l-s)),m=(l-2*(f+s))/Math.max(n.width,n.height),a=Math.round(n.width*m)+2*f,y=Math.round(n.height*m)+2*f,x=[];for(const r of o)if(r&&r.length>1){const o=[];for(const l of r){let[r,e]=l;r-=n.x,e-=n.y,r*=m,e*=m,r+=f-.5,e+=f-.5,t.asFill?o.push([r,e]):o.push([Math.round(r),Math.round(e)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}x.push(o)}const M=u(x,a,y,f);return t.asFill&&c(x,a,y,f,M),[h(M,f),a,y]}function u(t,o,n,r){const l=o*n,e=new Array(l),i=r*r+1;for(let s=0;s<l;++s)e[s]=i;for(const s of t){const t=s.length;for(let l=1;l<t;++l){const t=s[l-1],i=s[l];let f,m,a,u;t[0]<i[0]?(f=t[0],m=i[0]):(f=i[0],m=t[0]),t[1]<i[1]?(a=t[1],u=i[1]):(a=i[1],u=t[1]);let c=Math.floor(f)-r,h=Math.floor(m)+r,y=Math.floor(a)-r,x=Math.floor(u)+r;c<0&&(c=0),h>o&&(h=o),y<0&&(y=0),x>n&&(x=n);const M=i[0]-t[0],g=i[1]-t[1],p=M*M+g*g;for(let r=c;r<h;r++)for(let l=y;l<x;l++){let s,f,m=(r-t[0])*M+(l-t[1])*g;m<0?(s=t[0],f=t[1]):m>p?(s=i[0],f=i[1]):(m/=p,s=t[0]+m*M,f=t[1]+m*g);const a=(r-s)*(r-s)+(l-f)*(l-f),u=(n-l-1)*o+r;a<e[u]&&(e[u]=a)}}}for(let s=0;s<l;++s)e[s]=Math.sqrt(e[s]);return e}function c(t,o,n,r,l){for(const e of t){const t=e.length;for(let i=1;i<t;++i){const t=e[i-1],s=e[i];let f,m,a,u;t[0]<s[0]?(f=t[0],m=s[0]):(f=s[0],m=t[0]),t[1]<s[1]?(a=t[1],u=s[1]):(a=s[1],u=t[1]);let c=Math.floor(f),h=Math.floor(m)+1,y=Math.floor(a),x=Math.floor(u)+1;c<r&&(c=r),h>o-r&&(h=o-r),y<r&&(y=r),x>n-r&&(x=n-r);for(let e=y;e<x;++e){if(t[1]>e==s[1]>e)continue;const i=(n-e-1)*o;for(let o=c;o<h;++o)o<(s[0]-t[0])*(e-t[1])/(s[1]-t[1])+t[0]&&(l[i+o]=-l[i+o]);for(let t=r;t<c;++t)l[i+t]=-l[i+t]}}}}function h(o,n){const r=2*n,l=o.length,e=new Uint8Array(4*l);for(let i=0;i<l;++i){const n=.5-o[i]/r;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__/* .packFloatRGBA */ .U)(n,e,4*i)}return e}


/***/ }),

/***/ 95159:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(89882);
/* harmony import */ var _support_textUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(51481);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(t){return`rgb(${t.slice(0,3).toString()})`}function s(t){return`rgba(${t.slice(0,3).toString()},${t[3]})`}class r{constructor(t){t&&(this._textRasterizationCanvas=t)}rasterizeText(r,o){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const h=this._textRasterizationCanvas,a=h.getContext("2d");this._setFontProperties(a,o),this._parameters=o,this._textLines=r.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const{decoration:l,weight:d}=o.font;this._lineThroughWidthOffset=l&&"line-through"===l?.1*this._lineHeight:0;const c=null!=o.backgroundColor||null!=o.borderLine,_=c?_support_textUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .backgroundPadding */ .y7:0,g=this._computeTextWidth(a,o)+2*_,f=this._lineHeight*this._textLines.length+2*_;if(h.width=g+2*this._lineThroughWidthOffset,h.height=f,0===h.width||0===h.height)return h.width=h.height=1,{size:[0,0],image:new Uint32Array(0),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0,canvas:h};this._renderedLineHeight=Math.round(this._lineHeight*o.pixelRatio),this._renderedHaloSize=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .pt2px */ .Lz)(o.halo.size)*o.pixelRatio,this._renderedWidth=g*o.pixelRatio,this._renderedHeight=f*o.pixelRatio,this._lineThroughWidthOffset*=o.pixelRatio;const u=o.color??[0,0,0,0],p=o.halo&&o.halo.color?o.halo.color:[0,0,0,0];this._fillStyle=s(u),this._haloStyle=i(p);const x=this._renderedLineHeight,m=this._renderedHaloSize;a.save(),a.clearRect(0,0,h.width,h.height),this._setFontProperties(a,o);const b=_*o.pixelRatio,w=n(a.textAlign,this._renderedWidth-2*b)+m+b,z=m+b,v=m>0;let y=this._lineThroughWidthOffset,R=0;if(c){a.save();const e=o.backgroundColor??[0,0,0,0],i=o.borderLine?.color??[0,0,0,0],r=2*(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .pt2px */ .Lz)(o.borderLine?.size??0);a.fillStyle=s(e),a.strokeStyle=s(i),a.lineWidth=r,a.fillRect(0,0,h.width,h.height),a.strokeRect(0,0,h.width,h.height),a.restore()}v&&this._renderHalo(a,w,z,y,R,o),R+=z,y+=w;for(const t of this._textLines)v?(a.globalCompositeOperation="destination-out",a.fillStyle="rgb(0, 0, 0)",a.fillText(t,y,R),a.globalCompositeOperation="source-over",a.fillStyle=this._fillStyle,a.fillText(t,y,R)):(a.fillStyle=this._fillStyle,a.fillText(t,y,R)),l&&"none"!==l&&this._renderDecoration(a,y,R,l,d),R+=x;a.restore();const H=this._renderedWidth+2*this._lineThroughWidthOffset,S=this._renderedHeight,C=a.getImageData(0,0,H,S),T=new Uint8Array(C.data);if(o.premultiplyColors){let t;for(let e=0;e<T.length;e+=4)t=T[e+3]/255,T[e]=T[e]*t,T[e+1]=T[e+1]*t,T[e+2]=T[e+2]*t}let W,k;switch(o.horizontalAlignment){case"left":W=-.5;break;case"right":W=.5;break;default:W=0}switch(o.verticalAlignment){case"bottom":k=-.5;break;case"top":k=.5;break;default:k=0}return{size:[H,S],image:new Uint32Array(T.buffer),sdf:!1,simplePattern:!1,anchorX:W,anchorY:k,canvas:h}}_renderHalo(t,e,i,s,r,n){const o=this._renderedWidth,h=this._renderedHeight;this._haloRasterizationCanvas||(this._haloRasterizationCanvas=document.createElement("canvas")),this._haloRasterizationCanvas.width=o,this._haloRasterizationCanvas.height=h;const a=this._haloRasterizationCanvas,l=a.getContext("2d");l.clearRect(0,0,o,h),this._setFontProperties(l,n);const{decoration:d,weight:c}=n.font;l.fillStyle=this._haloStyle,l.strokeStyle=this._haloStyle,l.lineJoin="round",this._renderHaloNative(l,e,i,d,c),t.globalAlpha=this._parameters.halo.color[3],t.drawImage(a,0,0,o,h,s,r,o,h),t.globalAlpha=1}_renderHaloNative(t,e,i,s,r){const n=this._renderedLineHeight,o=this._renderedHaloSize;for(const h of this._textLines){const a=2*o,l=5,d=.1;for(let n=0;n<l;n++){const o=(1-(l-1)*d+n*d)*a;t.lineWidth=o,t.strokeText(h,e,i),s&&"none"!==s&&this._renderDecoration(t,e,i,s,r,o)}i+=n}}_setFontProperties(e,i){const s=Math.max(i.size,.5),r=i.font,n=`${r.style} ${r.weight} ${(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .pt2px */ .Lz)(s*i.pixelRatio).toFixed(1)}px ${r.family}, sans-serif`;let o;switch(e.font=n,e.textBaseline="top",i.horizontalAlignment){case"left":default:o="left";break;case"right":o="right";break;case"center":o="center"}e.textAlign=o}computeTextSize(t,e){this._textRasterizationCanvas||(this._textRasterizationCanvas=document.createElement("canvas"));const i=this._textRasterizationCanvas,s=i.getContext("2d");this._setFontProperties(s,e),this._parameters=e,this._textLines=t.split(/\r?\n/),this._lineHeight=this._computeLineHeight();const r=this._computeTextWidth(s,e),n=this._lineHeight*this._textLines.length;return i.width=r,i.height=n,[r*e.pixelRatio,n*e.pixelRatio]}_computeTextWidth(e,i){let s=0;for(const t of this._textLines)s=Math.max(s,e.measureText(t).width);const r=i.font;return("italic"===r.style||"oblique"===r.style||"string"==typeof r.weight&&("bold"===r.weight||"bolder"===r.weight)||"number"==typeof r.weight&&r.weight>600)&&(s+=.3*e.measureText("w").width),s+=2*(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .pt2px */ .Lz)(this._parameters.halo.size),Math.round(s)}_computeLineHeight(){let e=1.275*this._parameters.size;const i=this._parameters.font.decoration;return i&&"underline"===i&&(e*=1.3),Math.round(e+2*(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .pt2px */ .Lz)(this._parameters.halo.size))}_renderDecoration(t,e,i,s,r,n){const o=.9*this._lineHeight,h="bold"===r?.06:"bolder"===r?.09:.04;switch(t.textAlign){case"center":e-=this._renderedWidth/2;break;case"right":e-=this._renderedWidth}const a=t.textBaseline;if("underline"===s)switch(a){case"top":i+=o;break;case"middle":i+=o/2}else if("line-through"===s)switch(a){case"top":i+=o/1.5;break;case"middle":i+=o/3}const l=n?1.5*n:Math.ceil(o*h);t.save(),t.beginPath(),t.strokeStyle=t.fillStyle,t.lineWidth=l,t.moveTo(e-this._lineThroughWidthOffset,i),t.lineTo(e+this._renderedWidth+2*this._lineThroughWidthOffset,i),t.stroke(),t.restore()}}function n(t,e){return"center"===t?.5*e:"right"===t?e:0}


/***/ }),

/***/ 80047:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  U: () => (/* binding */ j),
  G: () => (/* binding */ V)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/Color.js
var Color = __webpack_require__(96220);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/fontUtils.js
var fontUtils = __webpack_require__(72777);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/string.js
var string = __webpack_require__(96274);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/support/arcadeOnDemand.js
var arcadeOnDemand = __webpack_require__(28965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolDrawHelper.js + 2 modules
var CIMSymbolDrawHelper = __webpack_require__(48655);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
;// ../node_modules/@arcgis/core/symbols/cim/quantizeTime.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=.05;function n(n){return Math.max(Math.round(n/t),1)*t}const e=new Set(["StartTimeOffset","Duration","RepeatDelay"]);function quantizeTime_a(t,a){return e.has(a)?n(t):t}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/SDFHelper.js
var SDFHelper = __webpack_require__(21422);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/effects/CIMEffectHelper.js
var CIMEffectHelper = __webpack_require__(78006);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/arcade/callExpressionWithFeature.js
var callExpressionWithFeature = __webpack_require__(29986);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/grouping.js
var grouping = __webpack_require__(75625);
;// ../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const E=Logger/* default */.A.getLogger("esri.symbols.cim.cimAnalyzer");function T(e){switch(e){case"Butt":return enums/* CapType */.xR.BUTT;case"Square":return enums/* CapType */.xR.SQUARE;default:return enums/* CapType */.xR.ROUND}}function $(e){switch(e){case"Bevel":return enums/* JoinType */.JO.BEVEL;case"Miter":return enums/* JoinType */.JO.MITER;default:return enums/* JoinType */.JO.ROUND}}function G(e){const t=e.markerPlacement;return t&&t.angleToLine?enums/* Alignment */.C1.MAP:enums/* Alignment */.C1.SCREEN}class j{constructor(e,t){this._cimLayers=[],this._poMap={},this._primitiveOverrides=[],this._resourceManager=e,this._info=t}async analyzeSymbolReference(e,t,i){if(this._cimLayers=i??[],!e)return this._cimLayers;if(e.primitiveOverrides){this._primitiveOverrides=e.primitiveOverrides,this._poMap={};const t=[],i=this._info;for(const e of this._primitiveOverrides){const r=e.valueExpressionInfo;if(r&&i){const o=r.expression,n=(0,arcadeOnDemand/* createRendererExpression */.Ad)(o,i.spatialReference,i.fields).then((t=>{null!=t&&this._setPoMap(e.primitiveName,e.propertyName,t)}));t.push(n)}else null!=e.value&&this._setPoMap(e.primitiveName,e.propertyName,e.value);t.length>0&&await Promise.all(t)}}const r=e.symbol,o=[];return CIMSymbolHelper/* CIMSymbolHelper */.wp.fetchResources(r,this._resourceManager,o),o.length>0&&await Promise.all(o),this._analyzeSymbol(r,t),this._cimLayers}_analyzeSymbol(e,t){switch(e?.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":this._analyzeMultiLayerSymbol(e,t,1,0,0,0)}}_analyzeMultiLayerSymbol(e,t,i,r,o,n){const a=e?.symbolLayers;if(!a)return;const s=e.effects;let l=enums/* Alignment */.C1.SCREEN;const c=CIMSymbolHelper/* CIMSymbolHelper */.wp.getSize(e)??0;"CIMPointSymbol"===e.type&&"Map"===e.angleAlignment&&(l=enums/* Alignment */.C1.MAP);const m="CIMPolygonSymbol"===e.type;let f=a.length;for(;f--;){const h=a[f];if(!h||!1===h.enable)continue;let u;s?.length&&(u=[...s]);const p=h.effects;p?.length&&(s?u.push(...p):u=[...p]);const d=[];let v;CIMSymbolHelper/* OverrideHelper */.$N.findEffectOverrides(u,this._primitiveOverrides,d),v=d.length>0?this._createEffectsOverrideFunction(u,d):u;const _=[];switch(CIMSymbolHelper/* OverrideHelper */.$N.findApplicableOverrides(h,this._primitiveOverrides,_),h.type){case"CIMSolidFill":this._analyzeSolidFill(h,v);break;case"CIMPictureFill":this._analyzePictureFill(h,v);break;case"CIMHatchFill":this._analyzeHatchFill(h,v);break;case"CIMGradientFill":this._analyzeGradientFill(h,v);break;case"CIMSolidStroke":this._analyzeSolidStroke(h,v,m,c);break;case"CIMPictureStroke":this._analyzePictureStroke(h,v,m,c);break;case"CIMGradientStroke":this._analyzeGradientStroke(h,v,m,c);break;case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":{"CIMLineSymbol"===e.type&&(l=G(h));const a=[],s=h.primitiveName;s&&a.push(s),this._analyzeMarker(h,v,null,a,l,c,1,t,i,r,o,n);break}default:E.error("Cannot analyze CIM layer",h.type)}}}_analyzeSolidFill(e,t){const i=e.primitiveName,r=(0,utils/* fromCIMColor */.ZT)(e.color),[o,n]=this._analyzePrimitiveOverrides(i,t,null,null),s=(0,string/* numericHash */.Wm)(JSON.stringify(e)+n).toString();this._cimLayers.push({type:"fill",templateHash:s,materialHash:o?()=>s:s,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,color:this._createOverrideFunction(i,"Color",r,U),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t,applyRandomOffset:!1,sampleAlphaOnly:!0})}_analyzePictureFill(e,t){const i=e.primitiveName,r=(0,utils/* getTintColor */.Ny)(e),[o,n]=this._analyzePrimitiveOverrides(i,t,null,null),s=(0,string/* numericHash */.Wm)(JSON.stringify(e)+n).toString(),l=(0,string/* numericHash */.Wm)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),m=(0,utils/* getValue */._W)(e.height,CIMSymbolDrawHelper/* defaultPictureFillHeight */.CR);let f=(0,utils/* getValue */._W)(e.scaleX,1);if("width"in e&&"number"==typeof e.width){const t=e.width;let i=1;const r=this._resourceManager.getResource(e.url);null!=r&&(i=r.width/r.height),f/=i*(m/t)}this._cimLayers.push({type:"fill",templateHash:s,materialHash:o?()=>l:l,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(i,"TintColor",r,U),height:this._createOverrideFunction(i,"Height",m),scaleX:this._createOverrideFunction(i,"ScaleX",f),angle:this._createOverrideFunction(i,"Rotation",(0,utils/* getValue */._W)(e.rotation)),offsetX:this._createOverrideFunction(i,"OffsetX",(0,utils/* getValue */._W)(e.offsetX)),offsetY:this._createOverrideFunction(i,"OffsetY",(0,utils/* getValue */._W)(e.offsetY)),url:e.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}_analyzeHatchFill(e,t){const i=e.primitiveName,r=this._analyzeMaterialOverrides(i,["Rotation","OffsetX","OffsetY"]);let[o,n]=this._analyzePrimitiveOverrides(i,t,null,null);const s=(0,string/* numericHash */.Wm)(JSON.stringify(e)+n).toString(),l=(0,string/* numericHash */.Wm)(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();let c={r:255,g:255,b:255,a:1},f=!1;const h=e.lineSymbol?.symbolLayers?.find((e=>"CIMSolidStroke"===e.type&&null!=this._poMap[e.primitiveName]?.Color));if(h){c=(0,utils/* fromCIMColor */.ZT)(h.color),c=this._createOverrideFunction(h.primitiveName,"Color",c,U);const e="function"==typeof c;o=o||e,f=null!=h.color||e}this._cimLayers.push({type:"fill",templateHash:s,materialHash:o&&r?this._createMaterialHashFunction(l,r):l,cim:e,materialOverrides:r,colorLocked:!!e.colorLocked,effects:t,color:c,height:this._createOverrideFunction(i,"Separation",(0,utils/* getValue */._W)(e.separation,CIMSymbolDrawHelper/* defaultHatchFillSeparation */.Lh)),scaleX:1,angle:this._createOverrideFunction(i,"Rotation",(0,utils/* getValue */._W)(e.rotation)),offsetX:this._createOverrideFunction(i,"OffsetX",(0,utils/* getValue */._W)(e.offsetX)),offsetY:this._createOverrideFunction(i,"OffsetY",(0,utils/* getValue */._W)(e.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0,hasUnresolvedReplacementColor:!f})}_analyzeGradientFill(e,t){const i=e.primitiveName,[r,o]=this._analyzePrimitiveOverrides(i,t,null,null),n=(0,string/* numericHash */.Wm)(JSON.stringify(e)+o).toString();this._cimLayers.push({type:"fill",templateHash:n,materialHash:r?()=>n:n,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}_analyzeSolidStroke(e,t,i,r){const o=e.primitiveName,n=(0,utils/* fromCIMColor */.ZT)(e.color),s=(0,utils/* getValue */._W)(e.width,CIMSymbolDrawHelper/* defaultStrokeWidth */.Kr),l=T(e.capStyle),c=$(e.joinStyle),m=e.miterLimit,[h,u]=this._analyzePrimitiveOverrides(o,t,null,null),p=(0,string/* numericHash */.Wm)(JSON.stringify(e)+u).toString();let y,d;if(t&&t instanceof Array&&t.length>0){const e=t[t.length-1];if("CIMGeometricEffectDashes"===e.type&&"NoConstraint"===e.lineDashEnding&&null===e.offsetAlongLine){const e=(t=[...t]).pop();y=e.dashTemplate,d=e.scaleDash}}this._cimLayers.push({type:"line",templateHash:p,materialHash:h?()=>p:p,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(o,"Color",n,U),width:this._createOverrideFunction(o,"Width",s),cap:this._createOverrideFunction(o,"CapStyle",l),join:this._createOverrideFunction(o,"JoinStyle",c),miterLimit:m&&this._createOverrideFunction(o,"MiterLimit",m),referenceWidth:r,zOrder:D(e.name),dashTemplate:y,scaleDash:d,sampleAlphaOnly:!0})}_analyzePictureStroke(e,t,i,r){const o=(0,string/* numericHash */.Wm)(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),n=e.primitiveName,s=(0,utils/* getTintColor */.Ny)(e),l=(0,utils/* getValue */._W)(e.width,CIMSymbolDrawHelper/* defaultStrokeWidth */.Kr),c=T(e.capStyle),m=$(e.joinStyle),h=e.miterLimit,[u,p]=this._analyzePrimitiveOverrides(n,t,null,null),y=(0,string/* numericHash */.Wm)(JSON.stringify(e)+p).toString();this._cimLayers.push({type:"line",templateHash:y,materialHash:u?()=>o:o,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:this._createOverrideFunction(n,"TintColor",s,U),width:this._createOverrideFunction(n,"Width",l),cap:this._createOverrideFunction(n,"CapStyle",c),join:this._createOverrideFunction(n,"JoinStyle",m),miterLimit:h&&this._createOverrideFunction(n,"MiterLimit",h),referenceWidth:r,zOrder:D(e.name),dashTemplate:null,scaleDash:!1,url:e.url,sampleAlphaOnly:!1})}_analyzeGradientStroke(e,t,i,r){const o=e.primitiveName,n=(0,utils/* getValue */._W)(e.width,CIMSymbolDrawHelper/* defaultStrokeWidth */.Kr),s=T(e.capStyle),l=$(e.joinStyle),c=e.miterLimit,[m,h]=this._analyzePrimitiveOverrides(o,t,null,null),u=(0,string/* numericHash */.Wm)(JSON.stringify(e)+h).toString();this._cimLayers.push({type:"line",templateHash:u,materialHash:m?()=>u:u,cim:e,materialOverrides:null,isOutline:i,colorLocked:!!e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:this._createOverrideFunction(o,"Width",n),cap:this._createOverrideFunction(o,"CapStyle",s),join:this._createOverrideFunction(o,"JoinStyle",l),miterLimit:c&&this._createOverrideFunction(o,"MiterLimit",c),referenceWidth:r,zOrder:D(e.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}_analyzeMarker(e,t,i,r,o,n,a,s,l,c,m,f,u=!1){if(this._analyzeMarkerInsidePolygon(e,t))return;const p=(0,utils/* getValue */._W)(e.size,CIMSymbolDrawHelper/* defaultMarkerSize */.Zg),y=(0,utils/* getValue */._W)(e.rotation),d=(0,utils/* getValue */._W)(e.offsetX),v=(0,utils/* getValue */._W)(e.offsetY);let _=this._createOverrideFunction(e.primitiveName,"Size",p),O=this._createOverrideFunction(e.primitiveName,"Rotation",y),S=this._createOverrideFunction(e.primitiveName,"OffsetX",d),g=this._createOverrideFunction(e.primitiveName,"OffsetY",v);_=this._transformSize(_,a),O=this._transformRotation(O,!!e.rotateClockwise,c);const M=this._transformOffsetX(S,g,c,a,m),k=this._transformOffsetY(S,g,c,a,f);switch(S=M,g=k,e.type){case"CIMPictureMarker":this._analyzePictureMarker(e,t,i,r,o,n,_,O,S,g,e.colorLocked||u);break;case"CIMVectorMarker":this._analyzeVectorMarker(e,t,i,r,o,n,a,s,_,O,S,g,e.colorLocked||u)}}_analyzeMarkerInsidePolygon(e,t){const{markerPlacement:i,type:r}=e;if(!i||"CIMMarkerPlacementInsidePolygon"!==i.type)return!1;if("CIMVectorMarker"===r||"CIMPictureMarker"===r){const o=e.primitiveName;if(o){const[e,i]=this._analyzePrimitiveOverrides([o],t,null,null);if(e)return!1}const n=i.primitiveName;if(n){const[e,i]=this._analyzePrimitiveOverrides([n],t,null,null);if(e)return!1}if("CIMVectorMarker"===r){const{markerGraphics:t}=e;if(t)for(const e of t){const{symbol:t}=e;if("CIMPolygonSymbol"===t?.type&&t.symbolLayers){const{symbolLayers:e}=t;for(const t of e)if("CIMSolidStroke"===t.type)return!1}}}else{const{animatedSymbolProperties:t}=e;if(t)return!1}}const o=i,s=Math.abs(o.stepX),l=Math.abs(o.stepY);if(0===s||0===l)return!0;const c=new Set(["Rotation","OffsetX","OffsetY"]),m=this._primitiveOverrides.filter((t=>t.primitiveName!==e.primitiveName||!c.has(t.propertyName))),f="url"in e&&"string"==typeof e.url?e.url:void 0,h=(0,string/* numericHash */.Wm)(JSON.stringify(e)).toString();let u,p,y=null;if("Random"===i.gridType){const e=(0,screenUtils/* px2pt */.PN)(definitions/* randomInsidePolygonTextureSize */.yv),t=Math.max(Math.floor(e/s),1),i=Math.max(Math.floor(e/l),1);u=l*i,y=e=>e?e*i:0;p=t*s/u}else i.shiftOddRows?(u=2*l,y=e=>e?2*e:0,p=s/l*.5):(u=l,y=null,p=s/l);const d=(0,utils/* getTintColor */.Ny)(e);return this._cimLayers.push({type:"fill",templateHash:h,materialHash:h,cim:e,materialOverrides:m,colorLocked:!!e.colorLocked,effects:t,color:d,height:this._createOverrideFunction(o.primitiveName,"StepY",u,y),scaleX:p,angle:o.gridAngle,offsetX:(0,utils/* getValue */._W)(o.offsetX),offsetY:(0,utils/* getValue */._W)(o.offsetY),url:f,applyRandomOffset:"Random"===i.gridType,sampleAlphaOnly:!f,hasUnresolvedReplacementColor:!0}),!0}_analyzePictureMarker(e,t,i,r,o,n,s,l,c,m,f){let h=(0,utils/* getValue */._W)(e.scaleX,1);const u=(0,utils/* getTintColor */.Ny)(e),p=(0,string/* numericHash */.Wm)(`${e.url}${JSON.stringify(e.colorSubstitutions)}${JSON.stringify(e.animatedSymbolProperties)}`).toString();i||(i=this._createMarkerPlacementOverrideFunction(e.markerPlacement));const y=this._createAnimatedSymbolPropertiesOverrideFunction(e.animatedSymbolProperties),[d,v]=this._analyzePrimitiveOverrides(r,t,i,y),_=(0,string/* numericHash */.Wm)(JSON.stringify(e)+v).toString(),O=e.anchorPoint??{x:0,y:0};if("width"in e&&"number"==typeof e.width){const t=e.width;let i=1;const r=this._resourceManager.getResource(e.url);null!=r&&(i=r.width/r.height);h/=i*((0,utils/* getValue */._W)(e.size)/t)}function S(e,t){return null!=y?(0,utils/* evaluateValueOrFunction */.s4)(y,e,t):null}const g=e.animatedSymbolProperties&&!0===e.animatedSymbolProperties.randomizeStartTime?(e,t,i,r)=>{const o=(0,grouping/* getMaterialGroup */.p)(r??0),n=S(e,t);return p+`-MATERIALGROUP(${o})`+`-ASP(${JSON.stringify(n)})`}:d?(e,t)=>{const i=S(e,t);return p+`-ASP(${JSON.stringify(i)})`}:p;this._cimLayers.push({type:"marker",templateHash:_,materialHash:g,cim:e,materialOverrides:null,colorLocked:!!e.colorLocked||!!f,effects:t,scaleSymbolsProportionally:!1,alignment:o,size:s,scaleX:this._createOverrideFunction(e.primitiveName,"ScaleX",h),rotation:l,offsetX:c,offsetY:m,color:this._createOverrideFunction(e.primitiveName,"TintColor",u,U),anchorPoint:{x:O.x,y:O.y},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:!1,referenceSize:n,sizeRatio:1,markerPlacement:i,url:e.url,animatedSymbolProperties:y})}_analyzeVectorMarker(e,t,i,r,o,n,a,s,l,c,m,f,h){const u=e.markerGraphics;if(!u)return;const p=e.frame;let y=0,d=1;e.scaleSymbolsProportionally&&p&&(y=p.ymax-p.ymin,d=this._transformSize(l,1/y)),d=this._transformSize(d,a),i||(i=this._createMarkerPlacementOverrideFunction(e.markerPlacement));for(const v of u)if(v){const a=v.symbol;if(!a)continue;const u=v.primitiveName;u&&r.push(u);let _=m,O=f;if(("CIMPointSymbol"===a.type||"CIMTextSymbol"===a.type)&&p){let t=0,i=0;const r=v.geometry;"x"in r&&"y"in r&&(t+=r.x-.5*(p.xmin+p.xmax),i+=r.y-.5*(p.ymin+p.ymax));const o=e.anchorPoint;o&&("Absolute"===e.anchorPointUnits?(t-=o.x,i-=o.y):p&&(t-=(p.xmax-p.xmin)*o.x,i-=(p.ymax-p.ymin)*o.y)),_=this._transformOffsetX(t,i,c,d,m),O=this._transformOffsetY(t,i,c,d,f)}switch(a.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":s||q(a)?this._analyzeMultiLayerGraphicNonSDF(e,t,i,null,v,r,o,n,y,!!h||!!e.colorLocked):this._analyzeMultiLayerGraphic(e,t,i,null,v,r,o,n,y,d,l,c,_,O,!!h||!!e.colorLocked);break;case"CIMTextSymbol":this._analyzeTextGraphic(e,t,i,v,r,o,n,y,d,l,c,_,O,!!h||!!e.colorLocked)}u&&r.pop()}}_analyzeMultiLayerGraphic(e,t,i,r,o,n,s,l,c,m,f,h,u,p,y){const d=o.symbol,v=d.symbolLayers;if(!v)return;let _=v.length;if(B(v))return void this._analyzeCompositeMarkerGraphic(e,t,i,r,o,v,n,s,l,c,f,h,u,p,!!y||!!e.colorLocked);const O=this._resourceManager.geometryEngine,k=CIMEffectHelper/* CIMEffectHelper */.V.applyEffects(d.effects,o.geometry,O);if(k)for(;_--;){const d=v[_];if(!d||!1===d.enable)continue;const b=d.primitiveName;switch(b&&n.push(b),d.type){case"CIMSolidFill":case"CIMSolidStroke":{const m=CIMEffectHelper/* CIMEffectHelper */.V.applyEffects(d.effects,k,O),v=(0,SDFHelper/* getExtent */.Z7)(m);if(!v)continue;const _="Relative"!==e.anchorPointUnits,[C,F,I]=(0,SDFHelper/* getSDFMetrics */.Fj)(v,e.frame,e.size,e.anchorPoint,_),w="CIMSolidFill"===d.type,x={type:"sdf",geom:m,asFill:w},A=d.path,R=w?(0,utils/* fromCIMColor */.ZT)((0,utils/* getFillColor */.pM)(d)):null==A?(0,utils/* fromCIMColor */.ZT)((0,utils/* getStrokeColor */._1)(d)):{r:0,g:0,b:0,a:0},H=w?{r:0,g:0,b:0,a:0}:(0,utils/* fromCIMColor */.ZT)((0,utils/* getStrokeColor */._1)(d)),J=(0,utils/* getStrokeWidth */.xo)(d)??0;if(!w&&!J)break;const Y=o.primitiveName;let E=null;w&&!d.colorLocked&&(E=this._createOverrideFunction(Y,"FillColor",R,U));let T=null;w||d.colorLocked||(T=this._createOverrideFunction(Y,"StrokeColor",H,U));const $=this._createOverrideFunction(Y,"StrokeWidth",J);let G=!1,j="";for(const e of this._primitiveOverrides)n.includes(e.primitiveName)&&(null!=e.value?j+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(G=!0));(null!=t&&"function"==typeof t||null!=i&&"function"==typeof i)&&(G=!0),((0,utils/* isFeatureValueFn */.qJ)(f)||(0,utils/* isFeatureValueFn */.qJ)(h)||(0,utils/* isFeatureValueFn */.qJ)(u)||(0,utils/* isFeatureValueFn */.qJ)(p))&&(G=!0);const D=JSON.stringify({...e,markerGraphics:null}),W=(0,string/* numericHash */.Wm)(JSON.stringify(x)+A).toString(),V=(0,string/* numericHash */.Wm)(JSON.stringify(o)+JSON.stringify(d)+D+j).toString();this._cimLayers.push({type:"marker",templateHash:V,materialHash:G?()=>W:W,cim:x,materialOverrides:null,colorLocked:!!d.colorLocked||!!y,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:s,anchorPoint:{x:F,y:I},isAbsoluteAnchorPoint:_,size:f,rotation:h,offsetX:u,offsetY:p,scaleX:1,frameHeight:c,rotateClockwise:!1,referenceSize:l,sizeRatio:C,color:(0,utils/* isFeatureValueFn */.qJ)(E)?E:this._createOverrideFunction(b,"Color",R,U),outlineColor:(0,utils/* isFeatureValueFn */.qJ)(T)?T:this._createOverrideFunction(b,"Color",H,U),outlineWidth:(0,utils/* isFeatureValueFn */.qJ)($)?$:this._createOverrideFunction(b,"Width",J),markerPlacement:i,animatedSymbolProperties:r,path:A});break}case"CIMVectorMarker":d.markerPlacement?this._analyzeMultiLayerGraphicNonSDF(e,t,i,r,o,n,s,l,c,!!y||!!d.colorLocked):this._analyzeMarker(d,t,i,n,s,l,m,!1,f,h,u,p,!!y||!!e.colorLocked);break;default:this._analyzeMultiLayerGraphicNonSDF(e,t,i,r,o,n,s,l,c,!!y||!!e.colorLocked)}b&&n.pop()}}_analyzeTextGraphic(e,i,r,o,n,s,l,c,m,h,p,d,v,_){const O=[];CIMSymbolHelper/* OverrideHelper */.$N.findApplicableOverrides(o,this._primitiveOverrides,O);const S=o.geometry;if(!("x"in S)||!("y"in S))return;const g=o.symbol,k=(0,utils/* fromCIMFontDecoration */.DW)(g),X=(0,utils/* fromCIMFontStyle */._d)(g.fontStyleName),H=(0,fontUtils/* getFontFamily */.af)(g.fontFamilyName);g.font={family:H,decoration:k,...X};let J=(0,utils/* getValue */._W)(g.height,CIMSymbolDrawHelper/* defaultTextHeight */.sA),Y=(0,utils/* getValue */._W)(g.angle),E=(0,utils/* getValue */._W)(g.offsetX),T=(0,utils/* getValue */._W)(g.offsetY);J=this._transformSize(J,m),Y=this._transformRotation(Y,!1,p);const $=this._transformOffsetX(E,T,p,m,d),G=this._transformOffsetY(E,T,p,m,v);E=$,T=G;const j=(0,utils/* fromCIMColor */.ZT)((0,utils/* getFillColor */.pM)(g));let D=(0,utils/* fromCIMColor */.ZT)((0,utils/* getStrokeColor */._1)(g)),W=(0,utils/* getStrokeWidth */.xo)(g)??0;W||(D=(0,utils/* fromCIMColor */.ZT)((0,utils/* getFillColor */.pM)(g.haloSymbol)),W=(0,utils/* getValue */._W)(g.haloSize)),W=this._transformSize(W,m);let V=!1;if(g.symbol?.symbolLayers)for(const t of g.symbol.symbolLayers){null!=(0,utils/* getFillColor */.pM)(t)&&(V=!!t.colorLocked)}const B=o.primitiveName;let q=null;V||(q=this._createOverrideFunction(B,"Color",j,U));let K=null,Q=null,Z=0;if(g.callout&&"CIMBackgroundCallout"===g.callout.type){const e=g.callout;if(e.backgroundSymbol){const t=e.backgroundSymbol.symbolLayers;if(t)for(const e of t)"CIMSolidFill"===e.type?K=(0,utils/* fromCIMColor */.ZT)(e.color):"CIMSolidStroke"===e.type&&(Q=(0,utils/* fromCIMColor */.ZT)(e.color),Z=(0,utils/* getValue */._W)(e.width,CIMSymbolDrawHelper/* defaultStrokeWidth */.Kr))}}const[ee,te]=this._analyzePrimitiveOverrides(n,i,r,null),ie=JSON.stringify(e.effects)+Number(e.colorLocked||_).toString()+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement)+e.size.toString(),re=(0,string/* numericHash */.Wm)(JSON.stringify(o)+ie+te).toString();let oe=this._createOverrideFunction(o.primitiveName,"TextString",o.textString??"",utils/* adjustTextCase */.lO,g.textCase);if(null==oe)return;const{fontStyleName:ne}=g,ae=H+(ne?"-"+ne.toLowerCase():"-regular"),se=ae;"string"==typeof oe&&oe.includes("[")&&g.fieldMap&&(oe=(0,utils/* createLabelOverrideFunction */.P3)(g.fieldMap,oe,g.textCase)),this._cimLayers.push({type:"text",templateHash:re,materialHash:ee||"function"==typeof oe||/\[(.*?)\]/.test(oe)?(e,t,i)=>se+"-"+(0,utils/* evaluateValueOrFunction */.s4)(oe,e,t,i):se+"-"+(0,string/* numericHash */.Wm)(oe),cim:g,materialOverrides:null,colorLocked:!!_||!!V,effects:i,alignment:s,anchorPoint:{x:0,y:0},isAbsoluteAnchorPoint:"Relative"!==e.anchorPointUnits,fontName:ae,decoration:k,weight:X.weight,style:X.style,size:J,angle:Y,offsetX:E,offsetY:T,horizontalAlignment:(0,utils/* fromCIMHorizontalAlignment */.Bu)(g.horizontalAlignment),verticalAlignment:(0,utils/* fromCIMVerticalAlignment */.Nl)(g.verticalAlignment),text:oe,color:(0,utils/* isFeatureValueFn */.qJ)(q)?q:j,outlineColor:D,outlineSize:W,backgroundColor:K,borderLineColor:Q,borderLineWidth:Z,lineWidth:null,referenceSize:l,sizeRatio:1,markerPlacement:r})}_analyzeMultiLayerGraphicNonSDF(e,t,i,r,n,s,l,c,m,f){const u=this._buildSimpleMarker(e,n),y=e.primitiveName,d=this._analyzeMaterialOverrides(y,["Rotation","OffsetX","OffsetY"]),[v,_]=this._analyzePrimitiveOverrides(s,null,null,null),[O,S,g]=CIMSymbolHelper/* CIMSymbolHelper */.wp.getTextureAnchor(u,this._resourceManager),M=(0,utils/* getValue */._W)(e.rotation),k=(0,utils/* getValue */._W)(e.offsetX),N=(0,utils/* getValue */._W)(e.offsetY),P=(0,string/* numericHash */.Wm)(JSON.stringify(u)+_).toString(),z=d&&d.length>0||null!=t&&"function"==typeof t;this._cimLayers.push({type:"marker",templateHash:P,materialHash:z&&d?this._createMaterialHashFunction(P,d):P,cim:u,materialOverrides:d,colorLocked:!!e.colorLocked||!!f,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:O,y:S},isAbsoluteAnchorPoint:!1,size:(0,utils/* getValue */._W)(e.size,CIMSymbolDrawHelper/* defaultMarkerSize */.Zg),rotation:this._createOverrideFunction(y,"Rotation",M),offsetX:this._createOverrideFunction(y,"OffsetX",k),offsetY:this._createOverrideFunction(y,"OffsetY",N),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:!!e.rotateClockwise,referenceSize:c,sizeRatio:g/(0,screenUtils/* pt2px */.Lz)(e.size),markerPlacement:i,animatedSymbolProperties:r,avoidSDFRasterization:!0})}_buildSimpleMarker(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}_analyzeCompositeMarkerGraphic(e,t,i,r,o,n,s,l,c,m,h,u,p,y,d){const v=o.geometry,_=n[0],O=n[1],k=(0,SDFHelper/* getExtent */.Z7)(v);if(!k)return;const N="Relative"!==e.anchorPointUnits,[P,z,C]=(0,SDFHelper/* getSDFMetrics */.Fj)(k,e.frame,e.size,e.anchorPoint,N),F={type:"sdf",geom:v,asFill:!0},I=O.path,w=O.primitiveName,x=_.primitiveName,A=(0,utils/* fromCIMColor */.ZT)(O.color),R=(0,utils/* fromCIMColor */.ZT)(_.color),X=(0,utils/* getValue */._W)(_.width,CIMSymbolDrawHelper/* defaultStrokeWidth */.Kr),H=o.primitiveName;let J=null;O.colorLocked||d||(J=this._createOverrideFunction(H,"FillColor",A,U));let Y=null;_.colorLocked||d||(Y=this._createOverrideFunction(H,"StrokeColor",R,U));const E=this._createOverrideFunction(H,"StrokeWidth",X);let T=!1,$="";for(const a of this._primitiveOverrides)(a.primitiveName===w||a.primitiveName===x||s.includes(a.primitiveName))&&(null!=a.value?$+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`:a.valueExpressionInfo&&(T=!0));null!=i&&"function"==typeof i&&(T=!0),((0,utils/* isFeatureValueFn */.qJ)(h)||(0,utils/* isFeatureValueFn */.qJ)(u)||(0,utils/* isFeatureValueFn */.qJ)(p)||(0,utils/* isFeatureValueFn */.qJ)(y))&&(T=!0);const G=JSON.stringify({...e,markerGraphics:null}),j=(0,string/* numericHash */.Wm)(JSON.stringify(F)+I).toString(),D=(0,string/* numericHash */.Wm)(JSON.stringify(o)+JSON.stringify(O)+JSON.stringify(_)+G+$).toString();this._cimLayers.push({type:"marker",templateHash:D,materialHash:T?()=>j:j,cim:F,materialOverrides:null,colorLocked:!!d,effects:t,scaleSymbolsProportionally:!!e.scaleSymbolsProportionally,alignment:l,anchorPoint:{x:z,y:C},isAbsoluteAnchorPoint:N,size:h,rotation:u,offsetX:p,offsetY:y,scaleX:1,frameHeight:m,rotateClockwise:!1,referenceSize:c,sizeRatio:P,color:(0,utils/* isFeatureValueFn */.qJ)(J)?J:this._createOverrideFunction(w,"Color",A,U),outlineColor:(0,utils/* isFeatureValueFn */.qJ)(Y)?Y:this._createOverrideFunction(x,"Color",R,U),outlineWidth:(0,utils/* isFeatureValueFn */.qJ)(E)?E:this._createOverrideFunction(x,"Width",X),markerPlacement:i,path:I,animatedSymbolProperties:r})}_createMaterialHashFunction(e,t){const i=this._info?.geometryType;if(i){const e=this._poMap;for(const r of t){if(r.valueExpressionInfo){const t=e[r.primitiveName]&&e[r.primitiveName][r.propertyName];t instanceof arcadeOnDemand/* ArcadeExpression */.vi&&(r.fn=(e,r,o)=>(0,callExpressionWithFeature/* default */.A)(t,e,{$view:o},i,r))}}}return(i,r,o)=>{for(const e of t)e.fn&&(e.value=e.fn(i,r,o));return (0,string/* numericHash */.Wm)(e+CIMSymbolHelper/* OverrideHelper */.$N.buildOverrideKey(t)).toString()}}_setPoMap(e,t,i){let r;this._poMap[e]?r=this._poMap[e]:(r={},this._poMap[e]=r),r[t]=i}_createOverrideFunction(e,t,i,r,o){if(null==e)return i;const n=this._poMap[e];if(null==n)return i;const a=n[t];if("string"==typeof a||"number"==typeof a||a instanceof Array)return r?r.call(null,a,o):a;const s=this._info?.geometryType;return null!=a&&a instanceof arcadeOnDemand/* ArcadeExpression */.vi&&null!=s?(e,t,n)=>{let l=(0,callExpressionWithFeature/* default */.A)(a,e,{$view:n},s,t);return null!==l&&r&&(l=r.call(null,l,o)),null!==l?l:i}:i}_createEffectsOverrideFunction(e,t){const r=this._poMap,o=this._info?.geometryType;for(const i of t){if(i.valueExpressionInfo&&o){const e=r[i.primitiveName]&&r[i.primitiveName][i.propertyName];e instanceof arcadeOnDemand/* ArcadeExpression */.vi&&(i.fn=(t,i,r)=>(0,callExpressionWithFeature/* default */.A)(e,t,{$view:r},o,i))}}return(r,o,n)=>{for(const e of t)e.fn&&(e.value=e.fn(r,o,n));const a=[];for(let s of e){const e=s?.primitiveName;if(e){let r=!1;for(const o of t)if(o.primitiveName===e){const e=W(o.propertyName);null!=o.value&&o.value!==s[e]&&(r||(s=(0,lang/* clone */.o8)(s),r=!0),s[e]=o.value)}}a.push(s)}return a}}_createMarkerPlacementOverrideFunction(e){const t=[];if(CIMSymbolHelper/* OverrideHelper */.$N.findApplicableOverrides(e,this._primitiveOverrides,t),null==e||0===t.length)return e;const r=this._poMap,o=this._info?.geometryType;for(const i of t){if(i.valueExpressionInfo&&o){const e=r[i.primitiveName]&&r[i.primitiveName][i.propertyName];e instanceof arcadeOnDemand/* ArcadeExpression */.vi&&(i.fn=(t,i,r)=>(0,callExpressionWithFeature/* default */.A)(e,t,{$view:r},o,i))}}return(r,o,n)=>{for(const e of t)e.fn&&(e.value=e.fn(r,o,n));const a=(0,lang/* clone */.o8)(e),s=e.primitiveName;for(const e of t)if(e.primitiveName===s){const t=W(e.propertyName);null!=e.value&&e.value!==a[t]&&(a[t]=e.value)}return a}}_createAnimatedSymbolPropertiesOverrideFunction(e){const t=[];if(CIMSymbolHelper/* OverrideHelper */.$N.findApplicableOverrides(e,this._primitiveOverrides,t),null==e||0===t.length)return e;const r=this._info?.geometryType;if(r){const e=this._poMap;for(const i of t){if(i.valueExpressionInfo){const t=e[i.primitiveName]&&e[i.primitiveName][i.propertyName];t instanceof arcadeOnDemand/* ArcadeExpression */.vi&&(i.fn=(e,i,o)=>(0,callExpressionWithFeature/* default */.A)(t,e,{$view:o},r,i))}}}return(r,o,n)=>{for(const e of t)e.fn&&(e.value=e.fn(r,o,n));const a=(0,lang/* clone */.o8)(e),s=e.primitiveName;for(const e of t)if(e.primitiveName===s){const t=W(e.propertyName);if(null!=e.value){const i=quantizeTime_a(e.value,e.propertyName);i!==a[t]&&(a[t]=i)}}return a}}_analyzePrimitiveOverrides(e,t,i,r){let o=!1,n="";"string"==typeof e&&(e=[e]);for(const a of this._primitiveOverrides)e?.includes(a.primitiveName)&&(null!=a.value?n+=`-${a.primitiveName}-${a.propertyName}-${JSON.stringify(a.value)}`:a.valueExpressionInfo&&(o=!0));return null!=t&&"function"==typeof t&&(o=!0),null!=i&&"function"==typeof i&&(o=!0),null!=r&&"function"==typeof r&&(o=!0),[o,n]}_analyzeMaterialOverrides(e,t){return this._primitiveOverrides.filter((i=>i.primitiveName!==e||!t.includes(i.propertyName)))}_transformSize(e,t){return (0,utils/* isFeatureValueFn */.qJ)(e)||(0,utils/* isFeatureValueFn */.qJ)(t)?(i,r,o)=>((0,utils/* isFeatureValueFn */.qJ)(e)?e(i,r,o):e)*((0,utils/* isFeatureValueFn */.qJ)(t)?t(i,r,o):t):e*t}_transformRotation(e,t,i){return (0,utils/* isFeatureValueFn */.qJ)(e)||(0,utils/* isFeatureValueFn */.qJ)(i)?(r,o,n)=>{const a=(0,utils/* isFeatureValueFn */.qJ)(e)?e(r,o,n):e,s=(0,utils/* isFeatureValueFn */.qJ)(i)?i(r,o,n):i;return t?s-a:s+a}:t?i-e:i+e}_transformOffsetX(e,t,i,r,o){if(!((0,utils/* isFeatureValueFn */.qJ)(e)||(0,utils/* isFeatureValueFn */.qJ)(t)||(0,utils/* isFeatureValueFn */.qJ)(i)||(0,utils/* isFeatureValueFn */.qJ)(r)||(0,utils/* isFeatureValueFn */.qJ)(o))){const n=i*Math.PI/180;if(n){const i=Math.cos(n),a=Math.sin(n);return(i*e-a*t)*r+o}return e*r+o}return(n,a,s)=>{let l=(0,utils/* isFeatureValueFn */.qJ)(i)?i(n,a,s):i;const c=(0,utils/* isFeatureValueFn */.qJ)(r)?r(n,a,s):r,m=(0,utils/* isFeatureValueFn */.qJ)(e)?e(n,a,s):e,f=(0,utils/* isFeatureValueFn */.qJ)(o)?o(n,a,s):o;if(l){l*=Math.PI/180;return(Math.cos(l)*m-Math.sin(l)*((0,utils/* isFeatureValueFn */.qJ)(t)?t(n,a,s):t))*c+f}return m*c+f}}_transformOffsetY(e,t,i,r,o){if(!((0,utils/* isFeatureValueFn */.qJ)(e)||(0,utils/* isFeatureValueFn */.qJ)(t)||(0,utils/* isFeatureValueFn */.qJ)(i)||(0,utils/* isFeatureValueFn */.qJ)(r)||(0,utils/* isFeatureValueFn */.qJ)(o))){const n=i*Math.PI/180;if(n){const i=Math.cos(n);return(Math.sin(n)*e+i*t)*r+o}return t*r+o}return(n,a,s)=>{let l=(0,utils/* isFeatureValueFn */.qJ)(i)?i(n,a,s):i;const c=(0,utils/* isFeatureValueFn */.qJ)(r)?r(n,a,s):r,m=(0,utils/* isFeatureValueFn */.qJ)(t)?t(n,a,s):t,f=(0,utils/* isFeatureValueFn */.qJ)(o)?o(n,a,s):o;if(l){l*=Math.PI/180;const t=Math.cos(l);return(Math.sin(l)*((0,utils/* isFeatureValueFn */.qJ)(e)?e(n,a,s):e)+t*m)*c+f}return m*c+f}}}function D(e){if(e&&0===e.indexOf("Level_")){const t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function U(t){if(!t||0===t.length)return null;const i=new Color/* default */.A(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function W(e){return e?e.charAt(0).toLowerCase()+e.substr(1):e}function V(e,t){if(!t||0===t.length)return e;const r=(0,lang/* clone */.o8)(e);return CIMSymbolHelper/* OverrideHelper */.$N.applyOverrides(r,t),r}const B=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&"CIMSolidStroke"===e[0].type&&"CIMSolidFill"===e[1].type&&null==e[0].path&&null==e[1].path&&!e[0].effects&&!e[1].effects;function q(e){const t=e.symbolLayers;if(!t||2!==t.length)return!1;const i=t.find((e=>e.effects?.find((e=>"CIMGeometricEffectDashes"===e.type)))),r=t.find((e=>e.effects?.find((e=>"CIMGeometricEffectAddControlPoints"===e.type))));return!!i&&!!r}


/***/ }),

/***/ 78006:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _geometry_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(18159);
/* harmony import */ var _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(13022);
/* harmony import */ var _CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(29659);
/* harmony import */ var _CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48002);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=96/72;class l{static executeEffects(t,e,l,c){const f=n,m=(0,_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__/* .getEffectsInflateSize */ .ll)(t);let p=new _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleEffectCursor */ .k(e);for(const o of t){const t=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__/* .getEffectOperator */ .A)(o);t&&(p=t.execute(p,o,f,l,c,m))}return p}static applyEffects(n,l,c){if(!n)return l;const f=(0,_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_3__/* .getEffectsInflateSize */ .ll)(n);let m,p=new _CIMEffects_js__WEBPACK_IMPORTED_MODULE_1__/* .SimpleEffectCursor */ .k(_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromJSONCIM(l));for(const t of n){const e=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_2__/* .getEffectOperator */ .A)(t);e&&(p=e.execute(p,t,1,null,c,f))}const u=[];let i=null;for(;m=p.next();)u.push(...(0,_geometry_geometryCursorCollectUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .collectMultipath */ .x)(m)),i=m.geometryType;return 0===u.length||null===i?null:"esriGeometryPolygon"===i?{rings:u}:{paths:u}}}


/***/ }),

/***/ 63643:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $2: () => (/* binding */ o),
/* harmony export */   C1: () => (/* binding */ i),
/* harmony export */   JO: () => (/* binding */ n),
/* harmony export */   M1: () => (/* binding */ B),
/* harmony export */   O$: () => (/* binding */ ie),
/* harmony export */   Q1: () => (/* binding */ Y),
/* harmony export */   TZ: () => (/* binding */ C),
/* harmony export */   WE: () => (/* binding */ A),
/* harmony export */   Y: () => (/* binding */ l),
/* harmony export */   YI: () => (/* binding */ K),
/* harmony export */   bj: () => (/* binding */ a),
/* harmony export */   e_: () => (/* binding */ X),
/* harmony export */   f0: () => (/* binding */ ne),
/* harmony export */   fu: () => (/* binding */ d),
/* harmony export */   g7: () => (/* binding */ u),
/* harmony export */   ip: () => (/* binding */ Z),
/* harmony export */   mU: () => (/* binding */ y),
/* harmony export */   oF: () => (/* binding */ P),
/* harmony export */   uQ: () => (/* binding */ R),
/* harmony export */   uT: () => (/* binding */ U),
/* harmony export */   vG: () => (/* binding */ oe),
/* harmony export */   wd: () => (/* binding */ w),
/* harmony export */   xR: () => (/* binding */ e),
/* harmony export */   xn: () => (/* binding */ m),
/* harmony export */   xw: () => (/* binding */ O),
/* harmony export */   yS: () => (/* binding */ k)
/* harmony export */ });
/* unused harmony exports AngleAlignment, BalloonCalloutStyle, BlendingMode, CGAAttributeType, ClippingType, DominantSizeAxis, ExpressionReturnType, ExternalColorMixMode, FillMode, GeometricEffectEnclosingPolygonMethod, GeometricEffectExtensionOrigin, GeometricEffectOffsetOption, GeometricEffectOffsetTangentMethod, GradientAlignment, GradientFillMethod, GradientStrokeMethod, GradientStrokeType, HorizontalAlignment, LeaderLineStyle, LineDecorationStyle, LineGapType, MarkerPlacementType, MaterialMode, PlacementClip, PlacementRandomlyAlongLineRandomization, PlacementStepPosition, PointSymbolCalloutScale, RotationOrder, Simple3DLineStyle, SizeVariationMethod, SymbolUnits, TextCase, VerticalAlignment, WaterbodySize, WaveStrength */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,n,i,t,o,r,l,a,u,c,d,f,s,p,g,C,m,T,S,P,R,B,N,h,O,L,M,A,y,E,D,F,v,x,W,U,k,H,b,w,I,G,q,J,X,Y,Z,K,Q,V,j,z,$,_,ee,ne,ie,te,oe,re,le;!function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(e||(e={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(n||(n={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(i||(i={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(t||(t={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(o||(o={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(r||(r={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(l||(l={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(a||(a={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(u||(u={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(c||(c={})),function(e){e.None="None",e.Loop="Loop",e.Oscillate="Oscillate"}(d||(d={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(f||(f={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(s||(s={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(p||(p={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(g||(g={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(C||(C={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(m||(m={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(T||(T={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(S||(S={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(P||(P={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(R||(R={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(B||(B={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(N||(N={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(h||(h={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(O||(O={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(L||(L={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(M||(M={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(A||(A={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(y||(y={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(E||(E={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(D||(D={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(F||(F={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(v||(v={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(x||(x={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(W||(W={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(U||(U={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(k||(k={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(H||(H={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(b||(b={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(w||(w={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(I||(I={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(G||(G={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(q||(q={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(J||(J={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(X||(X={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(Y||(Y={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(Z||(Z={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(K||(K={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(Q||(Q={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(V||(V={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(j||(j={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(z||(z={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}($||($={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(_||(_={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ee||(ee={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ne||(ne={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ie||(ie={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(te||(te={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(oe||(oe={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(re||(re={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(le||(le={}));


/***/ }),

/***/ 73048:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _CIMOperators_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(29659);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{static getPlacement(e,r,n,s,c,o){const a=(0,_CIMOperators_js__WEBPACK_IMPORTED_MODULE_0__/* .getPlacementOperator */ .c)(n);if(!a)return null;-1===r&&e.invertY();return a.execute(e,n,s,c,o)}}


/***/ }),

/***/ 50072:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bu: () => (/* binding */ x),
/* harmony export */   DW: () => (/* binding */ k),
/* harmony export */   FM: () => (/* binding */ l),
/* harmony export */   G9: () => (/* binding */ r),
/* harmony export */   Go: () => (/* binding */ a),
/* harmony export */   Kn: () => (/* binding */ g),
/* harmony export */   MM: () => (/* binding */ y),
/* harmony export */   Nl: () => (/* binding */ G),
/* harmony export */   Ny: () => (/* binding */ p),
/* harmony export */   O2: () => (/* binding */ A),
/* harmony export */   P3: () => (/* binding */ c),
/* harmony export */   UE: () => (/* binding */ F),
/* harmony export */   ZT: () => (/* binding */ u),
/* harmony export */   _1: () => (/* binding */ w),
/* harmony export */   _H: () => (/* binding */ I),
/* harmony export */   _W: () => (/* binding */ b),
/* harmony export */   _d: () => (/* binding */ S),
/* harmony export */   gQ: () => (/* binding */ i),
/* harmony export */   lO: () => (/* binding */ s),
/* harmony export */   lW: () => (/* binding */ f),
/* harmony export */   mA: () => (/* binding */ M),
/* harmony export */   n5: () => (/* binding */ O),
/* harmony export */   pM: () => (/* binding */ P),
/* harmony export */   pV: () => (/* binding */ h),
/* harmony export */   qJ: () => (/* binding */ e),
/* harmony export */   s4: () => (/* binding */ t),
/* harmony export */   xo: () => (/* binding */ L),
/* harmony export */   yH: () => (/* binding */ d),
/* harmony export */   zr: () => (/* binding */ m)
/* harmony export */ });
/* unused harmony export isCIMFill */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){return"function"==typeof e}function t(t,r,n,o){return e(t)?t(r,n,o):t}function r(e){return[e.r,e.g,e.b,e.a]}const n=" /-,\n";function o(e){let t=e.length;for(;t--;)if(!n.includes(e.charAt(t)))return!1;return!0}function i(e,t){const r=[];let n=0,i=-1;do{if(i=e.indexOf("[",n),i>=n){if(i>n){const t=e.substr(n,i-n);r.push([t,null,o(t)])}if(n=i+1,i=e.indexOf("]",n),i>=n){if(i>n){const o=t[e.substr(n,i-n)];o&&r.push([null,o,!1])}n=i+1}}}while(-1!==i);if(n<e.length-1){const t=e.substr(n);r.push([t,null,o(t)])}return r}function l(e,t,r){let n="",o=null;for(const i of t){const[t,r,l]=i;if(t)l?o=t:(o&&(n+=o,o=null),n+=t);else{const t=e.attributes[r];t&&(o&&(n+=o,o=null),n+=t)}}return s(n,r)}function c(e,t,r){const n=i(t,e);return e=>l(e,n,r)}function s(e,t){switch("string"!=typeof e&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function a(e,t,r,n,o,i,l=!0){const c=t/o,s=r/i,a=Math.ceil(c/2),u=Math.ceil(s/2);for(let f=0;f<i;f++)for(let r=0;r<o;r++){const y=4*(r+(l?i-f-1:f)*o);let M=0,C=0,m=0,b=0,p=0,d=0,I=0;const h=(f+.5)*s;for(let n=Math.floor(f*s);n<(f+1)*s;n++){const o=Math.abs(h-(n+.5))/u,i=(r+.5)*c,l=o*o;for(let s=Math.floor(r*c);s<(r+1)*c;s++){let r=Math.abs(i-(s+.5))/a;const o=Math.sqrt(l+r*r);o>=-1&&o<=1&&(M=2*o*o*o-3*o*o+1,M>0&&(r=4*(s+n*t),I+=M*e[r+3],m+=M,e[r+3]<255&&(M=M*e[r+3]/250),b+=M*e[r],p+=M*e[r+1],d+=M*e[r+2],C+=M))}}n[y]=b/C,n[y+1]=p/C,n[y+2]=d/C,n[y+3]=I/m}}function u(e){return e?{r:e[0],g:e[1],b:e[2],a:e[3]/255}:{r:0,g:0,b:0,a:0}}function f(e){return e.data?.symbol??null}function y(e){return"CIMVectorMarker"===e.type||"CIMPictureMarker"===e.type||"CIMBarChartMarker"===e.type||"CIMCharacterMarker"===e.type||"CIMPieChartMarker"===e.type||"CIMStackedBarChartMarker"===e.type}function M(e){return"CIMGradientStroke"===e.type||"CIMPictureStroke"===e.type||"CIMSolidStroke"===e.type}function C(e){return null!=e&&("CIMGradientFill"===e.type||"CIMHatchFill"===e.type||"CIMPictureFill"===e.type||"CIMSolidFill"===e.type||"CIMWaterFill"===e.type)}function m(e){return null!=e&&("CIMMarkerPlacementAlongLineRandomSize"===e.type||"CIMMarkerPlacementAlongLineSameSize"===e.type||"CIMMarkerPlacementAlongLineVariableSize"===e.type||"CIMMarkerPlacementAtExtremities"===e.type||"CIMMarkerPlacementAtMeasuredUnits"===e.type||"CIMMarkerPlacementAtRatioPositions"===e.type||"CIMMarkerPlacementOnLine"===e.type||"CIMMarkerPlacementOnVertices"===e.type)}const b=(e,t=0)=>null==e||isNaN(e)?t:e,p=e=>e.tintColor?u(e.tintColor):{r:255,g:255,b:255,a:1},d=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function I(){return __webpack_require__.e(/* import() */ 3366).then(__webpack_require__.bind(__webpack_require__, 53366))}function h(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function g(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function S(e){let t="normal",r="normal";if(e){const n=e.toLowerCase();n.includes("italic")?t="italic":n.includes("oblique")&&(t="oblique"),n.includes("bold")?r="bold":n.includes("light")&&(r="lighter")}return{style:t,weight:r}}function k(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function P(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=P(t);if(null!=e)return e}break;case"CIMTextSymbol":return P(e.symbol);case"CIMSolidFill":return e.color}}function w(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const e of t){const t=w(e);if(null!=t)return t}break}case"CIMTextSymbol":return w(e.symbol);case"CIMSolidStroke":return e.color}}function L(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const e=L(t);if(void 0!==e)return e}break;case"CIMTextSymbol":return L(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function x(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function G(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function A(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=e=>e.includes("data:image/svg+xml");function O(e){if(!e)return null;switch(e.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}


/***/ }),

/***/ 26207:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A7: () => (/* binding */ u),
/* harmony export */   Cx: () => (/* binding */ c),
/* harmony export */   Hk: () => (/* binding */ a),
/* harmony export */   JJ: () => (/* binding */ y),
/* harmony export */   UK: () => (/* binding */ S),
/* harmony export */   jM: () => (/* binding */ N),
/* harmony export */   x3: () => (/* binding */ O)
/* harmony export */ });
/* unused harmony export getDefaultSymbol2D */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(68882);
/* harmony import */ var _SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(40241);
/* harmony import */ var _SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(23369);
/* harmony import */ var _TextSymbol_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(42602);
/* harmony import */ var _defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(23173);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const S=_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultPointSymbolJSON */ .Cb),u=_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultPolylineSymbolJSON */ .yM),c=_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultPolygonSymbolJSON */ .WR),a=_TextSymbol_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .defaultTextSymbolJSON */ .JZ);function J(r){if(null==r)return null;switch(r.type){case"mesh":return null;case"point":case"multipoint":return S;case"polyline":return u;case"polygon":case"extent":return c}return null}const N=_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .errorPointSymbolJSON */ .nC),O=_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .errorPolylineSymbolJSON */ .HW),y=_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.fromJSON(_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_5__/* .errorPolygonSymbolJSON */ .b6);


/***/ }),

/***/ 23173:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Cb: () => (/* binding */ l),
/* harmony export */   HW: () => (/* binding */ s),
/* harmony export */   JZ: () => (/* binding */ t),
/* harmony export */   WR: () => (/* binding */ S),
/* harmony export */   b6: () => (/* binding */ y),
/* harmony export */   nC: () => (/* binding */ r),
/* harmony export */   yM: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports defaultColor, defaultOutlineColor */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=[252,146,31,255],i=(/* unused pure expression or super */ null && ([153,153,153,255])),l={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e},S={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},t={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},r={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},s={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},y={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};


/***/ }),

/***/ 38463:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  rS: () => (/* binding */ b),
  M9: () => (/* binding */ l),
  oO: () => (/* binding */ i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols.js + 1 modules
var symbols = __webpack_require__(30822);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/layerUtils.js
var layerUtils = __webpack_require__(40454);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/Symbol3D.js
var Symbol3D = __webpack_require__(50626);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/WebStyleSymbol.js
var WebStyleSymbol = __webpack_require__(75162);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/PointSymbol3D.js
var PointSymbol3D = __webpack_require__(66960);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleLineSymbol.js + 2 modules
var SimpleLineSymbol = __webpack_require__(40241);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/LineSymbol3D.js
var LineSymbol3D = __webpack_require__(68324);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js
var SimpleMarkerSymbol = __webpack_require__(23369);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/PictureMarkerSymbol.js
var PictureMarkerSymbol = __webpack_require__(72001);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/SimpleFillSymbol.js
var SimpleFillSymbol = __webpack_require__(68882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/MeshSymbol3D.js
var MeshSymbol3D = __webpack_require__(50151);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/PolygonSymbol3D.js
var PolygonSymbol3D = __webpack_require__(65216);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/TextSymbol.js
var TextSymbol = __webpack_require__(42602);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/LabelSymbol3D.js
var LabelSymbol3D = __webpack_require__(27372);
;// ../node_modules/@arcgis/core/symbols/support/symbolConversion.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function S(S,c=a){if(!S)return{symbol:null};const{retainId:u=a.retainId,ignoreDrivers:d=a.ignoreDrivers,hasLabelingContext:j=a.hasLabelingContext,retainCIM:D=a.retainCIM}=c;let g=null;if((0,symbols/* isSymbol3D */.wk)(S)||S instanceof WebStyleSymbol/* default */.A)g=S.clone();else if("cim"===S.type){const o=S.data?.symbol?.type;if("CIMPointSymbol"!==o)return{error:new Error/* default */.A("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${o||"unknown"}' is unsupported in 3D`,{symbol:S})};g=D?S.clone():PointSymbol3D/* default */.A.fromCIMSymbol(S)}else if(S instanceof SimpleLineSymbol/* default */.A)g=LineSymbol3D/* default */.A.fromSimpleLineSymbol(S);else if(S instanceof SimpleMarkerSymbol/* default */.A)g=PointSymbol3D/* default */.A.fromSimpleMarkerSymbol(S);else if(S instanceof PictureMarkerSymbol/* default */.A)g=PointSymbol3D/* default */.A.fromPictureMarkerSymbol(S);else if(S instanceof SimpleFillSymbol/* default */.A)g=c.geometryType&&"mesh"===c.geometryType?MeshSymbol3D/* default */.A.fromSimpleFillSymbol(S):PolygonSymbol3D/* default */.A.fromSimpleFillSymbol(S);else{if(!(S instanceof TextSymbol/* default */.A))return{error:new Error/* default */.A("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${S.type||S.declaredClass}' is unsupported in 3D`,{symbol:S})};g=j?LabelSymbol3D/* default */.A.fromTextSymbol(S):PointSymbol3D/* default */.A.fromTextSymbol(S)}return u&&g&&"cim"!==g.type&&(g.id=S.id),d&&(0,symbols/* isSymbol3D */.wk)(g)&&g.symbolLayers.forEach((o=>o.ignoreDrivers=!0)),{symbol:g}}

;// ../node_modules/@arcgis/core/symbols/support/jsonUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(o,e,n,t){const s=jsonUtils_a(o,{},{context:t,isLabelSymbol:!1});null!=s&&(e[n]=s)}function i(o,e,n,t){const s=jsonUtils_a(o,{},{context:t,isLabelSymbol:!0});null!=s&&(e[n]=s)}function m(o){return o instanceof Symbol3D/* default */.A||o instanceof WebStyleSymbol/* default */.A}function jsonUtils_a(o,t,r){if(null==o)return null;const{context:l,isLabelSymbol:i}=r,a=l?.origin,b=l?.messages;if("web-scene"===a&&!m(o)){const n=S(o,{retainCIM:!0,hasLabelingContext:i});return null!=n.symbol?n.symbol.write(t,l):(b?.push(new Error/* default */.A("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:l,error:n.error})),null)}return("web-map"===a||"portal-item"===a&&!(0,layerUtils/* isSceneServiceLayer */.TU)(l?.layer))&&m(o)?(b?.push(new Error/* default */.A("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:l})),null):o.write(t,l)}function b(e,n){return (0,symbols/* readSymbol */.Bu)(e,null,n)}


/***/ }),

/***/ 29986:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20698);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(e,t,o,n,a){if(null==e)return null;const s=e.referencesGeometry()&&a?i(t,n,a):t,u=e.repurposeFeature(s);try{return e.evaluate({...o,$feature:u},e.services)}catch(c){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",c),null}}const u=new Map;function i(e,r,t){const{transform:o,hasZ:n,hasM:a}=t;u.has(r)||u.set(r,c(r));const s=u.get(r)(e.geometry,o,n,a);return{...e,geometry:s}}function c(s){const u={};switch(s){case"esriGeometryPoint":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePoint */ .Tr)(r,u,e,t,o);case"esriGeometryPolygon":return(e,r,t,o)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePolygon */ .$X)(r,u,e,t,o);case"esriGeometryPolyline":return(e,r,t,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizePolyline */ .P5)(r,u,e,t,n);case"esriGeometryMultipoint":return(e,r,o,n)=>(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .unquantizeMultipoint */ .SW)(r,u,e,o,n);default:return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.support.arcadeOnDemand").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-arcade",`Unable to handle geometryType: ${s}`)),e=>e}}


/***/ }),

/***/ 7715:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   m: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21360);
/* harmony import */ var _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57079);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(37353);
/* harmony import */ var _webgl_effects_highlight_HighlightGradient_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(25024);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class h extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_2__/* .DisplayObject */ .q{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null,this._highlightOptions=null,this._highlightGradient=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach((t=>t.clips=e))}get computedEffects(){return this._effectView?.effects??null}get effect(){return this._effectView?.effect??""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_1__/* .EffectView */ .$B),this._effectView.effect=e,this.requestRender())}get highlightOptions(){return this._highlightOptions}set highlightOptions(e){if(!e)return this._highlightOptions=null,void(this._highlightGradient&&(this._highlightGradient.destroy(),this._highlightGradient=null,this.requestRender()));this._highlightOptions&&this._highlightOptions.equals(e)||(this._highlightOptions=e,this._highlightGradient||(this._highlightGradient=new _webgl_effects_highlight_HighlightGradient_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A),this._highlightGradient.setHighlightOptions(e),this.requestRender())}get hasBlending(){return!!this.blendMode}get hasHighlight(){return this.children.some((e=>e.hasHighlight))}get hasLabels(){return this.children.some((e=>e.hasLabels))}get requiresDedicatedFBO(){return this.children.some((e=>"blendMode"in e&&e.blendMode&&"normal"!==e.blendMode))}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e),{painter:i}=t;i.beforeRenderLayer(t,this._clips?.length?255:0,this.computedOpacity),this.renderChildren(t),i.afterRenderLayer(t,this.computedOpacity)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const i=e.parent;return i&&i!==this&&i.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}endTransitions(){super.endTransitions(),this._effectView&&(this._effectView.endTransitions(),this.requestRender())}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}beforeRender(e){super.beforeRender(e);for(const t of this.children)t.beforeRender(e)}afterRender(e){super.afterRender(e);for(const t of this.children)t.afterRender(e)}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.processRender(e)}createRenderParams(e){return{...e,requireFBO:this.requiresDedicatedFBO,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition,highlightGradient:this._highlightGradient||e.highlightGradient}}}


/***/ }),

/***/ 37353:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17306);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(40189);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=1/(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("mapview-transitions-duration");class i extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this.parent=null,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage?.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t?.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return null==this._transforms&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}get hasLabels(){return!1}get hasHighlight(){return!1}get hasBlending(){return!1}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.opacity=1,this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createResolver */ .Tw)(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this.opacity=0,this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .createResolver */ .Tw)(),this.requestRender()),this._fadeOutResolver.promise}endTransitions(){this._fadeInResolver?.(),this._fadeInResolver=null,this._fadeOutResolver?.(),this._fadeOutResolver=null,this.computedOpacity=this.visible?this.opacity:0,this.requestRender()}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale),this.setTransform(e.state)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){this.parent?.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,i=this.computedOpacity;if(i===t)this.computedVisible=this.visible;else{const r=e*s;this.computedOpacity=i>t?Math.max(t,i-r):Math.min(t,i+r),this.computedVisible=this.computedOpacity>0;const a=t===this.computedOpacity;this.inFadeTransition=!a,a||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}


/***/ }),

/***/ 42766:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  i: () => (/* binding */ o)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Queue.js
var Queue = __webpack_require__(20748);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js
var AttributeStoreView = __webpack_require__(75928);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js
var TileContainer = __webpack_require__(33613);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/unitUtils.js
var unitUtils = __webpack_require__(92976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/lengthUtils.js
var lengthUtils = __webpack_require__(10301);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/techniques/Technique.js
var Technique = __webpack_require__(97066);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js
var utils = __webpack_require__(97025);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/capabilities.js
var capabilities = __webpack_require__(75228);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLRendererInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(e,t){const i=t.length;if(e<t[0].value||1===i)return t[0].size;for(let s=1;s<i;s++)if(e<t[s].value){const i=(e-t[s-1].value)/(t[s].value-t[s-1].value);return t[s-1].size+i*(t[s].size-t[s-1].size)}return t[i-1].size}class v{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.outsideLabelsVisible=!1,this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1},this._technique=Technique/* Technique */.j}getSizeVVFieldStops(e){const t=this._vvSizeFieldStops;if(t)switch(t.type){case"static":return t;case"level-dependent":return t.levels[e]??(()=>{let i=1/0,s=0;for(const o in t.levels){const t=parseFloat(o),a=Math.abs(e-t);a<i&&(i=a,s=t)}if(i===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const a=2**((e-s)/2),l=t.levels[s],r=new Float32Array(l.values);return r[2]*=a,r[3]*=a,{sizes:l.sizes,values:r}})();default:return}}get vvMaterialParameters(){return this._vvMaterialParameters}update(e){null!=this._vvInfo&&this._updateVisualVariables(this._vvInfo.vvRanges,e)}setInfo(e,t,i){this._updateEffects(i),this._vvInfo=t,this._technique=(0,utils/* getTechniqueFromRenderer */.SS)(e),this.rendererSchema=this._technique.createOrUpdateRendererSchema(this.rendererSchema,e)}getVariation(){return{...this._technique.getVariation(this.rendererSchema),outsideLabelsVisible:this.outsideLabelsVisible,supportsTextureFloat:(0,capabilities/* getWebGLCapabilities */.Cx)("2d").supportsTextureFloat}}getVariationHash(){return this._technique.getVariationHash(this.rendererSchema)<<1|(this.outsideLabelsVisible?1:0)}_updateEffects(e){this.outsideLabelsVisible=null!=e&&e.excludedLabelsVisible}_updateVisualVariables(l,r){const o=this._vvMaterialParameters;if(o.vvOpacityEnabled=!1,o.vvSizeEnabled=!1,o.vvColorEnabled=!1,o.vvRotationEnabled=!1,!l)return;const v=l.size;if(v){if(o.vvSizeEnabled=!0,v.minMaxValue){const t=v.minMaxValue;let i,l;if((0,Utils/* isDefined */.O9)(t.minSize)&&(0,Utils/* isDefined */.O9)(t.maxSize))if((0,Utils/* isNumber */.Et)(t.minSize)&&(0,Utils/* isNumber */.Et)(t.maxSize))i=(0,screenUtils/* pt2px */.Lz)(t.minSize),l=(0,screenUtils/* pt2px */.Lz)(t.maxSize);else{const s=r.scale;i=(0,screenUtils/* pt2px */.Lz)(n(s,t.minSize.stops)),l=(0,screenUtils/* pt2px */.Lz)(n(s,t.maxSize.stops))}this.vvSizeMinMaxValue.set([t.minDataValue,t.maxDataValue,i,l])}if(v.scaleStops&&(this.vvSizeScaleStopsValue=(0,screenUtils/* pt2px */.Lz)(n(r.scale,v.scaleStops.stops))),v.unitValue){const e=(0,unitUtils/* getMetersPerUnitForSR */.GA)(r.spatialReference)/lengthUtils/* meterIn */.j[v.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=e/r.resolution}v.fieldStops&&(this._vvSizeFieldStops=v.fieldStops)}const u=l.color;u&&(o.vvColorEnabled=!0,this.vvColorValues.set(u.values),this.vvColors.set(u.colors));const c=l.opacity;c&&(o.vvOpacityEnabled=!0,this.vvOpacityValues.set(c.values),this.vvOpacities.set(c.opacities));const h=l.rotation;h&&(o.vvRotationEnabled=!0,o.vvRotationType=h.type)}}

;// ../node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends TileContainer/* default */.A{constructor(e){super(e),this._rendererInfo=new v,this._materialItemsRequestQueue=new Queue/* default */.A,this.attributeView=new AttributeStoreView/* AttributeStoreView */.L((()=>this.onAttributeStoreUpdate()))}destroy(){this.children.forEach((e=>e.destroy())),this.removeAllChildren(),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(e,t,r){this._rendererInfo.setInfo(e,t,r),this.requestRender()}async getMaterialItems(t,r){if(!t||0===t.length)return[];const s=(0,promiseUtils/* createResolver */.Tw)();return this._materialItemsRequestQueue.push({items:t,abortOptions:r,resolver:s}),this.requestRender(),s.promise}doRender(e){if(e.context.capabilities.enable("textureFloat"),e.context.capabilities.enable("vao"),this._materialItemsRequestQueue.length>0){let t=this._materialItemsRequestQueue.pop();for(;t;)this._processMaterialItemRequest(e,t),t=this._materialItemsRequestQueue.pop()}super.doRender(e)}renderChildren(e){for(const t of this.children)t.commit(e);this._rendererInfo.update(e.state),super.renderChildren(e)}createRenderParams(e){const t=super.createRenderParams(e);return t.rendererInfo=this._rendererInfo,t.attributeView=this.attributeView,t}onAttributeStoreUpdate(){}_processMaterialItemRequest(e,{items:t,abortOptions:r,resolver:s}){const{painter:i,pixelRatio:o}=e,n=t.map((e=>i.textureManager.rasterizeItem(e.symbol,o,e.glyphIds,r)));Promise.all(n).then((e=>{if(!this.stage)return void s.reject();const r=e.map(((e,r)=>({id:t[r].id,mosaicItem:e})));s.resolve(r)}),s.reject)}}


/***/ }),

/***/ 98949:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  d: () => (/* binding */ w)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushBitmap.js
var BrushBitmap = __webpack_require__(18806);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec4f32.js
var vec4f32 = __webpack_require__(20035);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrush.js
var WGLBrush = __webpack_require__(95031);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/BackgroundPrograms.js
var BackgroundPrograms = __webpack_require__(97394);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ProgramTemplate.js
var ProgramTemplate = __webpack_require__(50122);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushClip.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=()=>(0,Utils/* createProgramDescriptor */.ES)("clip",{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT}]});class p extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32.f)(0,1,0,1)}dispose(){this._program&&this._program.dispose()}prepareState({context:e}){e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setFaceCullingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.KEEP,enums/* StencilOperation */.eA.REPLACE),e.setStencilWriteMask(255),e.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,0,255)}draw(e,r){const{context:t,state:o,requestRender:a,allowDelayedRender:p}=e,c=l(),d=r.getVAO(t,o,c.attributes,c.bufferLayouts);null!=d.indexBuffer&&(this._program||(this._program=(0,ProgramTemplate/* createProgram */.r)(t,BackgroundPrograms/* background */.T)),!p||null==a||this._program.compiled?(t.useProgram(this._program),this._program.setUniform2fv("u_coord_range",[1,1]),this._program.setUniform4fv("u_color",this._color),this._program.setUniformMatrix3fv("u_dvsMat3",o.displayMat3),t.bindVAO(d),t.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,d.indexBuffer.size,enums/* DataType */.pe.UNSIGNED_INT,0),t.bindVAO()):a())}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/BrushOverlay.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=()=>(0,Utils/* createProgramDescriptor */.ES)("overlay",{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.FLOAT}],tex:[{location:1,name:"a_uv",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT}]});class u extends WGLBrush/* default */.A{constructor(){super(...arguments),this._desc={vsPath:"overlay/overlay",fsPath:"overlay/overlay",attributes:new Map([["a_pos",0],["a_uv",1]])}}dispose(){}prepareState({context:e}){e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setBlendFunctionSeparate(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA,enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),e.setStencilWriteMask(0),e.setStencilTestEnabled(!0),e.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255)}draw(t,r){const{context:s,painter:n,requestRender:a,allowDelayedRender:u}=t;if(!r.isReady)return;const{computedOpacity:c,dvsMat3:l,isWrapAround:d,perspectiveTransform:m,texture:p}=r;t.timeline.begin(this.name);const f=n.materialManager.getProgram(this._desc);if(u&&null!=a&&!f.compiled)return void a();const _=i(),v=r.getVAO(s,_.bufferLayouts,_.attributes);if(!v)return;s.bindVAO(v),s.useProgram(f),s.bindTexture(p,definitions/* textureBindingBitmap */.YS),f.setUniformMatrix3fv("u_dvsMat3",l),f.setUniform1i("u_texture",definitions/* textureBindingBitmap */.YS),f.setUniform1f("u_opacity",c),f.setUniform2fv("u_perspective",m);const y=d?10:4;s.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,y),s.bindVAO(),t.timeline.end(this.name)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/RandomLCG.js
var RandomLCG = __webpack_require__(9272);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrush.js
var WGLGeometryBrush = __webpack_require__(67095);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js
var MaterialKey = __webpack_require__(59601);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js
var utils = __webpack_require__(97025);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushFill.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function WGLGeometryBrushFill_u(e){const t={geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT},{location:1,name:"a_id",count:3,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:3,name:"a_color",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_aux1",count:4,type:enums/* DataType */.pe.UNSIGNED_SHORT},{location:5,name:"a_aux2",count:4,type:enums/* DataType */.pe.SHORT},{location:6,name:"a_aux3",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:7,name:"a_zoomRange",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT}]};switch(e.symbologyType){case webgl_enums/* WGLSymbologyType */.w4.SIMPLE:case webgl_enums/* WGLSymbologyType */.w4.OUTLINE_FILL_SIMPLE:t.geometry.splice(7,1),t.geometry.splice(4,1)}return{shader:"materials/fill",vertexLayout:t}}class c extends WGLGeometryBrush/* default */.A{dispose(){}getGeometryType(){return webgl_enums/* WGLGeometryType */.ZG.FILL}supportsSymbology(e){return e!==webgl_enums/* WGLSymbologyType */.w4.DOT_DENSITY}drawGeometry(o,r,i,m){const{context:c,painter:f,rendererInfo:p,requiredLevel:y,passOptions:_,requestRender:d,allowDelayedRender:E}=o,g=MaterialKey/* FillMaterialKey */.K_.load(i.materialKey),N=(0,utils/* getTechniqueFromMaterialKey */.JW)(g.data),S=null!=_&&"hittest"===_.type,T=f.materialManager,{shader:I,vertexLayout:U,hittestAttributes:x}=N.programSpec??WGLGeometryBrushFill_u(g);let h=enums/* PrimitiveType */.WR.TRIANGLES,L=(0,Utils/* createProgramDescriptor */.ES)(g.data,U);S&&(L=this._getTriangleDesc(i.materialKey,L,x),h=enums/* PrimitiveType */.WR.POINTS);const{attributes:O,bufferLayouts:G}=L,D=T.getMaterialProgram(o,g,I,O,m);if(E&&null!=d&&!D.compiled)return void d();c.useProgram(D),this._setSharedUniforms(D,o,r);const{row:b,col:R}=r.key,M=R*definitions/* tileSize */.CQ,w=b*definitions/* tileSize */.CQ;if(D.setUniform2f("u_tileOffset",M%definitions/* maxRepresentableInt */.YV,w%definitions/* maxRepresentableInt */.YV),D.setUniform2f("u_maxIntNumOfCrossing",Math.floor(M/definitions/* maxRepresentableInt */.YV),Math.floor(w/definitions/* maxRepresentableInt */.YV)),g.textureBinding){f.textureManager.bindTextures(c,D,g);const e=1/2**(y-r.key.level);D.setUniform1f("u_zoomFactor",e)}const j=1/o.pixelRatio;D.setUniform1f("u_blur",j),D.setUniform1f("u_antialiasing",j),this._setSizeVVUniforms(g,D,p,r),this._setColorAndOpacityVVUniforms(g,D,p);const B=i.target.getVAO(c,G,O,S);let A=i.indexCount,F=i.indexFrom*Uint32Array.BYTES_PER_ELEMENT;S&&(A/=3,F/=3),c.bindVAO(B),this._drawFills(o,r,D,h,A,F)}_drawFills(e,t,o,r,a,i){e.context.drawElements(r,a,enums/* DataType */.pe.UNSIGNED_INT,i)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(94669);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushDotDensity.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class g extends c{constructor(){super(...arguments),this._dotTextureSize=0,this._dotTextures=null,this._dotSamplers=new Int32Array([definitions/* textureBindingRenderer0 */.Cp,definitions/* textureBindingRenderer1 */.vN]),this._dotVAO=null,this._dotDesc={vsPath:"dot/dot",fsPath:"dot/dot",attributes:new Map([["a_pos",0]])}}dispose(){super.dispose(),this._disposeTextures(),this._dotFBO=(0,maybe/* disposeMaybe */.WD)(this._dotFBO),this._dotVAO=(0,maybe/* disposeMaybe */.WD)(this._dotVAO)}getGeometryType(){return webgl_enums/* WGLGeometryType */.ZG.FILL}supportsSymbology(e){return e===webgl_enums/* WGLSymbologyType */.w4.DOT_DENSITY}_drawFills(e,t,o,r,s,i){const{passOptions:n}=e;if(null!=n&&"hittest"===n.type)super._drawFills(e,t,o,r,s,i);else{const r=this._drawDotLocations(e,t,o,s,i);this._drawDotDensity(e,t,r)}}_drawDotDensity(e,t,o){const{context:r,painter:s,rendererInfo:i,requestRender:n,allowDelayedRender:d}=e,l=s.materialManager.getProgram(this._dotDesc);if(d&&null!=n&&!l.compiled)return void n();const{rendererSchema:m}=i;(0,utils/* assertRendererSchema */.R7)(m,"dot-density");const c=this._createDotDensityMesh(r,this._dotDesc.attributes,{geometry:[{name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT,divisor:0,normalized:!1,offset:0,stride:4}]});r.setStencilTestEnabled(!0),r.useProgram(l),l.setUniform1f("u_tileZoomFactor",1),l.setUniform1i("u_texture",this._dotSamplers[0]),l.setUniform1f("u_dotSize",Math.max(m.dotSize,1)),l.setUniform1f("u_pixelRatio",window.devicePixelRatio),this._setSharedUniforms(l,e,t),r.bindTexture(o,this._dotSamplers[0]),r.bindVAO(c),r.drawArrays(enums/* PrimitiveType */.WR.POINTS,0,262144)}_drawDotLocations(e,t,o,r,i){const{context:n,rendererInfo:d,requiredLevel:l}=e,m=n.getViewport(),{rendererSchema:c}=d;(0,utils/* assertRendererSchema */.R7)(c,"dot-density");const{dotScale:f,colors:h,activeDots:p,backgroundColor:T,dotValue:x}=c;n.setViewport(0,0,512,512);const w=n.getBoundFramebufferObject(),D=this._createFBO(n);n.bindFramebuffer(D),n.setClearColor(0,0,0,0),n.clear(n.gl.COLOR_BUFFER_BIT|n.gl.STENCIL_BUFFER_BIT),n.setStencilTestEnabled(!1);const y=1/2**(l-t.key.level),b=definitions/* tileSize */.CQ,g=b*window.devicePixelRatio*b*window.devicePixelRatio,O=1/y*(1/y),S=f?e.state.scale/f:1;return o.setUniform1f("u_tileZoomFactor",y),o.setUniform1f("u_tileDotsOverArea",g/(definitions/* tileSize */.CQ*window.devicePixelRatio*definitions/* tileSize */.CQ*window.devicePixelRatio)),o.setUniformMatrix4fv("u_dotColors",h),o.setUniform4fv("u_isActive",p),o.setUniform4fv("u_dotBackgroundColor",T),o.setUniform1f("u_dotValue",Math.max(1,x*S*O)),this._bindDotDensityTextures(n,o,d,b),n.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,r,enums/* DataType */.pe.UNSIGNED_INT,i),n.setViewport(m.x,m.y,m.width,m.height),n.bindFramebuffer(w),D.colorTexture}_createFBO(e){if(null==this._dotFBO){const t=512,o=512,r=new TextureDescriptor/* TextureDescriptor */.R(t,o);r.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,r.wrapMode=enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE;const s=new Renderbuffer/* Renderbuffer */.l(e,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(enums/* RenderbufferFormat */.yQ.DEPTH_STENCIL,t,o));this._dotFBO=new FramebufferObject/* FramebufferObject */.H(e,r,s)}return this._dotFBO}_disposeTextures(){if(this._dotTextures){for(let e=0;e<this._dotTextures.length;e++)this._dotTextures[e].dispose();this._dotTextures=null}}_bindDotDensityTextures(e,t,o,r){const{rendererSchema:s}=o;(0,utils/* assertRendererSchema */.R7)(s,"dot-density");const i=this._createDotDensityTextures(e,r,s.seed);t.setUniform1iv("u_dotTextures",this._dotSamplers);for(let n=0;n<i.length;n++)e.bindTexture(i[n],this._dotSamplers[n])}_createDotDensityMesh(e,t,o){if(null==this._dotVAO){const r=2,s=new Int16Array(262144*r);for(let e=0;e<512;e++)for(let t=0;t<512;t++)s[r*(t+512*e)]=t,s[r*(t+512*e)+1]=e;const i=BufferObject/* BufferObject */.g.createVertex(e,enums/* Usage */._U.STATIC_DRAW,s);this._dotVAO=new VertexArrayObject/* VertexArrayObject */.Z(e,t,o,{geometry:i},null)}return this._dotVAO}_createDotDensityTextures(e,o,r){if(this._dotTextureSize===o&&this._seed===r||(this._disposeTextures(),this._dotTextureSize=o,this._seed=r),null===this._dotTextures){const s=new RandomLCG/* default */.A(r);this._dotTextures=[this._allocDotDensityTexture(e,o,s),this._allocDotDensityTexture(e,o,s)]}return this._dotTextures}_allocDotDensityTexture(e,t,o){const r=new Float32Array(t*t*4);for(let i=0;i<r.length;i++)r[i]=o.getFloat();const s=new TextureDescriptor/* TextureDescriptor */.R;return s.dataType=enums/* PixelType */.ld.FLOAT,s.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST,s.width=t,s.height=t,new Texture/* Texture */.g(e,s,r)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushHeatmap.js + 1 modules
var WGLBrushHeatmap = __webpack_require__(83739);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js
var WGLBrushInfo = __webpack_require__(10803);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker.js
var WGLGeometryBrushMarker = __webpack_require__(74373);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushPieChart.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends WGLGeometryBrushMarker/* default */.A{supportsSymbology(r){return r===webgl_enums/* WGLSymbologyType */.w4.PIE_CHART}_drawMarkers(o,r,s,n,l,f,u){const{context:i}=o,{rendererInfo:m}=o,{rendererSchema:a}=m;(0,utils/* assertRendererSchema */.R7)(a,"pie-chart"),s.setUniform4fv("u_colors",a.colors),s.setUniform4fv("u_defaultColor",a.defaultColor),s.setUniform4fv("u_othersColor",a.othersColor),s.setUniform4fv("u_outlineColor",a.outlineColor),s.setUniform1f("u_donutRatio",a.holePercentage),s.setUniform1f("u_sectorThreshold",a.sectorThreshold),s.setUniform1f("u_outlineWidth",a.outlineWidth),i.drawElements(n,l,enums/* DataType */.pe.UNSIGNED_INT,f)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js
var WGLBrushStencil = __webpack_require__(46419);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f32.js
var mat3f32 = __webpack_require__(21360);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLBackground.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class _ extends WGLBrush/* default */.A{constructor(){super(...arguments),this._color=(0,vec4f32.f)(1,0,0,1),this._patternMatrix=(0,mat3f32.c)(),this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(e,r){const{context:n,painter:c,styleLayerUID:u,requestRender:p,allowDelayedRender:_}=e;this._loadWGLResources(e);const d=e.displayLevel,h=e.styleLayer,g=h.backgroundMaterial,v=c.vectorTilesMaterialManager,y=h.getPaintValue("background-color",d),b=h.getPaintValue("background-opacity",d),x=h.getPaintValue("background-pattern",d),M=void 0!==x,j=y[3]*b,U=1|window.devicePixelRatio,w=e.spriteMosaic;let L,A;const P=U>definitions/* vtlHighResCutoff */.C_?2:1,I=e.drawPhase===webgl_enums/* WGLDrawPhase */.S5.HITTEST,R=this._programOptions;R.id=I,R.pattern=M;const k=v.getMaterialProgram(n,g,R);if(!_||null==p||k.compiled){if(n.bindVAO(this._vao),n.useProgram(k),M){const t=w.getMosaicItemPosition(x,!0);if(null!=t){const{tl:e,br:r,page:i}=t;L=r[0]-e[0],A=r[1]-e[1];const s=w.getPageSize(i);null!=s&&(w.bind(n,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),k.setUniform4f("u_tlbr",e[0],e[1],r[0],r[1]),k.setUniform2fv("u_mosaicSize",s),k.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}k.setUniform1f("u_opacity",b)}else this._color[0]=j*y[0],this._color[1]=j*y[1],this._color[2]=j*y[2],this._color[3]=j,k.setUniform4fv("u_color",this._color);if(k.setUniform1f("u_depth",h.z||0),I){const t=(0,number/* u32to4Xu8 */.Pl)(u+1);k.setUniform4fv("u_id",t)}for(const e of r){if(k.setUniform1f("u_coord_range",e.rangeX),k.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),M){const r=Math.max(2**(Math.round(d)-e.key.level),1),o=P*e.width*r,i=o/(0,mathUtils/* nextPowerOfTwo */.yR)(L),s=o/(0,mathUtils/* nextPowerOfTwo */.yR)(A);this._patternMatrix[0]=i,this._patternMatrix[4]=s,k.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}n.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,0,255),n.drawArrays(enums/* PrimitiveType */.WR.TRIANGLE_STRIP,0,4)}}else p()}_loadWGLResources(t){if(this._vao)return;const{context:e,styleLayer:r}=t,o=r.backgroundMaterial,i=new Int8Array([0,0,1,0,0,1,1,1]),s=BufferObject/* BufferObject */.g.createVertex(e,enums/* Usage */._U.STATIC_DRAW,i),a=new VertexArrayObject/* VertexArrayObject */.Z(e,o.getAttributeLocations(),o.getLayoutInfo(),{geometry:s});this._vao=a}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js
var StyleDefinition = __webpack_require__(31541);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLCircle.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(i,o){const{context:l,displayLevel:c,requiredLevel:u,state:d,drawPhase:f,painter:m,spriteMosaic:p,styleLayerUID:y,requestRender:v,allowDelayedRender:g}=i;if(!o.some((e=>e.layerData.get(y)?.circleIndexCount??!1)))return;const E=i.styleLayer,M=E.circleMaterial,T=m.vectorTilesMaterialManager,I=1.2,U=E.getPaintValue("circle-translate",c),_=E.getPaintValue("circle-translate-anchor",c),x=f===webgl_enums/* WGLDrawPhase */.S5.HITTEST,R=this._programOptions;R.id=x;const h=T.getMaterialProgram(l,M,R);if(g&&null!=v&&!h.compiled)return void v();l.useProgram(h),h.setUniformMatrix3fv("u_displayMat3",_===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?d.displayMat3:d.displayViewMat3),h.setUniform2fv("u_circleTranslation",U),h.setUniform1f("u_depth",E.z),h.setUniform1f("u_antialiasingWidth",I);let D=-1;if(x){const e=(0,number/* u32to4Xu8 */.Pl)(y+1);h.setUniform4fv("u_id",e)}for(const e of o){if(!e.layerData.has(y))continue;e.key.level!==D&&(D=e.key.level,M.setDataUniforms(h,c,E,D,p));const t=e.layerData.get(y);if(!t.circleIndexCount)continue;t.prepareForRendering(l);const r=t.vao;null!=r&&(l.bindVAO(r),h.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),u!==e.key.level?l.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255):l.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255),l.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t.circleIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t.circleIndexStart),e.triangleCount+=t.circleIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLFill.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLBrushVTLFill_u=1/65536;class d extends WGLBrush/* default */.A{constructor(){super(...arguments),this._fillProgramOptions={id:!1,pattern:!1},this._outlineProgramOptions={id:!1}}dispose(){}drawMany(t,e){const{displayLevel:i,drawPhase:r,renderPass:l,spriteMosaic:o,styleLayerUID:s}=t;let f=!1;for(const n of e)if(n.layerData.has(s)){const t=n.layerData.get(s);if(t.fillIndexCount>0||t.outlineIndexCount>0){f=!0;break}}if(!f)return;const u=t.styleLayer,d=u.getPaintProperty("fill-pattern"),c=void 0!==d,m=c&&d.isDataDriven;let p;if(c&&!m){const t=d.getValue(i);p=o.getMosaicItemPosition(t,!0)}const y=!c&&u.getPaintValue("fill-antialias",i);let g=!0,_=1;if(!c){const t=u.getPaintProperty("fill-color"),e=u.getPaintProperty("fill-opacity");if(!t?.isDataDriven&&!e?.isDataDriven){const t=u.getPaintValue("fill-color",i);_=u.getPaintValue("fill-opacity",i)*t[3],_>=1&&(g=!1)}}if(g&&"opaque"===l)return;let E;r===webgl_enums/* WGLDrawPhase */.S5.HITTEST&&(E=(0,number/* u32to4Xu8 */.Pl)(s+1));const v=u.getPaintValue("fill-translate",i),M=u.getPaintValue("fill-translate-anchor",i);(g||"translucent"!==l)&&this._drawFill(t,s,u,e,v,M,c,p,m,E);const P=!u.hasDataDrivenOutlineColor&&u.outlineUsesFillColor&&_<1;y&&"opaque"!==l&&!P&&this._drawOutline(t,s,u,e,v,M,E)}_drawFill(a,r,d,c,m,p,y,g,_,E){if(y&&!_&&null==g)return;const{context:v,displayLevel:M,state:P,drawPhase:I,painter:T,pixelRatio:U,spriteMosaic:x,requestRender:D,allowDelayedRender:h}=a,S=d.fillMaterial,R=T.vectorTilesMaterialManager,w=U>definitions/* vtlHighResCutoff */.C_?2:1,N=I===webgl_enums/* WGLDrawPhase */.S5.HITTEST,L=this._fillProgramOptions;L.id=N,L.pattern=y;const A=R.getMaterialProgram(v,S,L);if(h&&null!=D&&!A.compiled)return void D();if(v.useProgram(A),null!=g){const{page:t}=g,i=x.getPageSize(t);null!=i&&(x.bind(v,enums/* TextureSamplingMode */.Cj.LINEAR,t,definitions/* vtlTextureBindingUnitSprites */.$U),A.setUniform2fv("u_mosaicSize",i),A.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}A.setUniformMatrix3fv("u_displayMat3",p===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?P.displayMat3:P.displayViewMat3),A.setUniform2fv("u_fillTranslation",m),A.setUniform1f("u_depth",d.z+WGLBrushVTLFill_u),N&&A.setUniform4fv("u_id",E);let V=-1;for(const t of c){if(!t.layerData.has(r))continue;t.key.level!==V&&(V=t.key.level,S.setDataUniforms(A,M,d,V,x));const i=t.layerData.get(r);if(!i.fillIndexCount)continue;i.prepareForRendering(v);const n=i.fillVAO;if(null!=n){if(v.bindVAO(n),A.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),v.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),y){const e=Math.max(2**(Math.round(M)-t.key.level),1),i=t.rangeX/(w*t.width*e);A.setUniform1f("u_patternFactor",i)}if(_){const t=i.patternMap;if(!t)continue;for(const[i,n]of t){const t=x.getPageSize(i);null!=t&&(x.bind(v,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),A.setUniform2fv("u_mosaicSize",t),A.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),v.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,n[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n[0]))}}else v.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i.fillIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i.fillIndexStart);t.triangleCount+=i.fillIndexCount/3}}}_drawOutline(e,i,a,r,l,d,c){const{context:m,displayLevel:p,state:y,drawPhase:g,painter:_,pixelRatio:E,spriteMosaic:v,requestRender:M,allowDelayedRender:P}=e,I=a.outlineMaterial,T=_.vectorTilesMaterialManager,U=.75/E,x=g===webgl_enums/* WGLDrawPhase */.S5.HITTEST,D=this._outlineProgramOptions;D.id=x;const h=T.getMaterialProgram(m,I,D);if(P&&null!=M&&!h.compiled)return void M();m.useProgram(h),h.setUniformMatrix3fv("u_displayMat3",d===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?y.displayMat3:y.displayViewMat3),h.setUniform2fv("u_fillTranslation",l),h.setUniform1f("u_depth",a.z+WGLBrushVTLFill_u),h.setUniform1f("u_outline_width",U),x&&h.setUniform4fv("u_id",c);let S=-1;for(const t of r){if(!t.layerData.has(i))continue;t.key.level!==S&&(S=t.key.level,I.setDataUniforms(h,p,a,S,v));const e=t.layerData.get(i);if(e.prepareForRendering(m),!e.outlineIndexCount)continue;const n=e.outlineVAO;null!=n&&(m.bindVAO(n),h.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),m.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255),m.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,e.outlineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.outlineIndexStart),t.triangleCount+=e.outlineIndexCount/3)}}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class f extends WGLBrush/* default */.A{constructor(){super(...arguments),this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(a,f){const{context:u,displayLevel:m,state:d,drawPhase:c,painter:p,pixelRatio:g,spriteMosaic:y,styleLayerUID:E,requestRender:v,allowDelayedRender:M}=a;if(!f.some((e=>e.layerData.get(E)?.lineIndexCount??!1)))return;const _=a.styleLayer,U=_.lineMaterial,I=p.vectorTilesMaterialManager,P=_.getPaintValue("line-translate",m),T=_.getPaintValue("line-translate-anchor",m),x=_.getPaintProperty("line-pattern"),D=void 0!==x,S=D&&x.isDataDriven;let L,N;if(D&&!S){const e=x.getValue(m);L=y.getMosaicItemPosition(e)}let R=!1;if(!D){const e=_.getPaintProperty("line-dasharray");if(N=void 0!==e,R=N&&e.isDataDriven,N&&!R){const t=e.getValue(m),i=_.getDashKey(t,_.getLayoutValue("line-cap",m));L=y.getMosaicItemPosition(i)}}const V=1/g,h=c===webgl_enums/* WGLDrawPhase */.S5.HITTEST,w=this._programOptions;w.id=h,w.pattern=D,w.sdf=N;const A=I.getMaterialProgram(u,U,w);if(M&&null!=v&&!A.compiled)return void v();if(u.useProgram(A),A.setUniformMatrix3fv("u_displayViewMat3",d.displayViewMat3),A.setUniformMatrix3fv("u_displayMat3",T===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?d.displayMat3:d.displayViewMat3),A.setUniform2fv("u_lineTranslation",P),A.setUniform1f("u_depth",_.z),A.setUniform1f("u_antialiasing",V),h){const e=(0,number/* u32to4Xu8 */.Pl)(E+1);A.setUniform4fv("u_id",e)}if(L&&null!=L){const{page:e}=L,i=y.getPageSize(e);null!=i&&(y.bind(u,enums/* TextureSamplingMode */.Cj.LINEAR,e,definitions/* vtlTextureBindingUnitSprites */.$U),A.setUniform2fv("u_mosaicSize",i),A.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U))}let j=-1;for(const e of f){if(!e.layerData.has(E))continue;e.key.level!==j&&(j=e.key.level,U.setDataUniforms(A,m,_,j,y));const i=2**(m-j)/g;A.setUniform1f("u_zoomFactor",i);const n=e.layerData.get(E);if(!n.lineIndexCount)continue;n.prepareForRendering(u);const a=n.vao;if(null!=a){if(u.bindVAO(a),A.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),u.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,e.stencilRef,255),S||R){const e=n.patternMap;if(!e)continue;for(const[i,n]of e){const e=y.getPageSize(i);null!=e&&(y.bind(u,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitSprites */.$U),A.setUniform2fv("u_mosaicSize",e),A.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),u.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,n[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n[0]))}}else u.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,n.lineIndexCount,enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n.lineIndexStart);e.triangleCount+=n.lineIndexCount/3}}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f32.js
var vec2f32 = __webpack_require__(48325);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js
var config = __webpack_require__(59992);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js
var GeometryUtils = __webpack_require__(59339);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushVTLSymbol.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const y=1/65536;class WGLBrushVTLSymbol_ extends WGLBrush/* default */.A{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=(0,vec2f32.c)()}dispose(){}drawMany(e,t){const{drawPhase:i,styleLayerUID:a}=e,r=e.styleLayer;let n;i===webgl_enums/* WGLDrawPhase */.S5.HITTEST&&(n=(0,number/* u32to4Xu8 */.Pl)(a+1)),this._drawIcons(e,r,t,n),this._drawText(e,r,t,n)}_drawIcons(e,t,o,c){const{context:u,displayLevel:p,drawPhase:m,painter:d,spriteMosaic:g,state:y,styleLayerUID:_,requestRender:h,allowDelayedRender:M}=e,P=t.iconMaterial,U=d.vectorTilesMaterialManager;let T,E=!1;for(const i of o)if(i.layerData.has(_)&&(T=i.layerData.get(_),T.iconPerPageElementsMap.size>0)){E=!0;break}if(!E)return;const S=t.getPaintValue("icon-translate",p),v=t.getPaintValue("icon-translate-anchor",p);let x=t.getLayoutValue("icon-rotation-alignment",p);x===StyleDefinition/* RotationAlignment */.I5.AUTO&&(x=t.getLayoutValue("symbol-placement",p)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const D=x===StyleDefinition/* RotationAlignment */.I5.MAP,I=t.getLayoutValue("icon-keep-upright",p)&&D,R=T.isIconSDF,V=m===webgl_enums/* WGLDrawPhase */.S5.HITTEST,w=this._iconProgramOptions;w.id=V,w.sdf=R;const A=U.getMaterialProgram(u,P,w);if(M&&null!=h&&!A.compiled)return void h();u.useProgram(A),A.setUniformMatrix3fv("u_displayViewMat3",x===StyleDefinition/* RotationAlignment */.I5.MAP?y.displayViewMat3:y.displayMat3),A.setUniformMatrix3fv("u_displayMat3",v===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?y.displayMat3:y.displayViewMat3),A.setUniform2fv("u_iconTranslation",S),A.setUniform1f("u_depth",t.z),A.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(y.rotation)),A.setUniform1f("u_keepUpright",I?1:0),A.setUniform1f("u_level",10*p),A.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitSprites */.$U),A.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3),V&&A.setUniform4fv("u_id",c);let L=-1;for(const i of o){if(!i.layerData.has(_))continue;if(i.key.level!==L&&(L=i.key.level,P.setDataUniforms(A,p,t,L,g)),T=i.layerData.get(_),0===T.iconPerPageElementsMap.size)continue;T.prepareForRendering(u),T.updateOpacityInfo();const a=T.iconVAO;if(null!=a){u.bindVAO(a),A.setUniformMatrix3fv("u_dvsMat3",i.transforms.dvs),A.setUniform1f("u_time",(performance.now()-T.lastOpacityUpdate)/1e3);for(const[t,a]of T.iconPerPageElementsMap)this._renderIconRange(e,A,a,t,i)}}}_renderIconRange(e,t,i,a,r){const{context:n,spriteMosaic:o}=e;this._spritesTextureSize[0]=o.getWidth(a)/4,this._spritesTextureSize[1]=o.getHeight(a)/4,t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),o.bind(n,enums/* TextureSamplingMode */.Cj.LINEAR,a,definitions/* vtlTextureBindingUnitSprites */.$U),this._setStencilState(e,r),n.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,i[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]),r.triangleCount+=i[1]/3}_drawText(e,s,c,u){const{context:p,displayLevel:m,drawPhase:d,glyphMosaic:g,painter:_,pixelRatio:h,spriteMosaic:M,state:P,styleLayerUID:U,requestRender:T,allowDelayedRender:E}=e,S=s.textMaterial,v=_.vectorTilesMaterialManager;let x,D=!1;for(const t of c)if(t.layerData.has(U)&&(x=t.layerData.get(U),x.glyphPerPageElementsMap.size>0)){D=!0;break}if(!D)return;const I=s.getPaintProperty("text-opacity");if(I&&!I.isDataDriven&&0===I.getValue(m))return;const R=s.getPaintProperty("text-color"),V=!R||R.isDataDriven||R.getValue(m)[3]>0,w=s.getPaintProperty("text-halo-width"),A=s.getPaintProperty("text-halo-color"),L=(!w||w.isDataDriven||w.getValue(m)>0)&&(!A||A.isDataDriven||A.getValue(m)[3]>0);if(!V&&!L)return;const O=24/8;let N=s.getLayoutValue("text-rotation-alignment",m);N===StyleDefinition/* RotationAlignment */.I5.AUTO&&(N=s.getLayoutValue("symbol-placement",m)===StyleDefinition/* SymbolPlacement */.kt.POINT?StyleDefinition/* RotationAlignment */.I5.VIEWPORT:StyleDefinition/* RotationAlignment */.I5.MAP);const z=N===StyleDefinition/* RotationAlignment */.I5.MAP,k=s.getLayoutValue("text-keep-upright",m)&&z,b=d===webgl_enums/* WGLDrawPhase */.S5.HITTEST,G=.8*O/h;this._glyphTextureSize||(this._glyphTextureSize=(0,vec2f32.f)(g.width/4,g.height/4));const W=s.getPaintValue("text-translate",m),j=s.getPaintValue("text-translate-anchor",m),F=this._sdfProgramOptions;F.id=b;const B=v.getMaterialProgram(p,S,F);if(E&&null!=T&&!B.compiled)return void T();p.useProgram(B),B.setUniformMatrix3fv("u_displayViewMat3",N===StyleDefinition/* RotationAlignment */.I5.MAP?P.displayViewMat3:P.displayMat3),B.setUniformMatrix3fv("u_displayMat3",j===StyleDefinition/* TranslateAnchor */.Cq.VIEWPORT?P.displayMat3:P.displayViewMat3),B.setUniform2fv("u_textTranslation",W),B.setUniform1f("u_depth",s.z+y),B.setUniform2fv("u_mosaicSize",this._glyphTextureSize),B.setUniform1f("u_mapRotation",(0,GeometryUtils/* degToByte */.wV)(P.rotation)),B.setUniform1f("u_keepUpright",k?1:0),B.setUniform1f("u_level",10*m),B.setUniform1i("u_texture",definitions/* vtlTextureBindingUnitGlyphs */.mg),B.setUniform1f("u_antialiasingWidth",G),B.setUniform1f("u_fadeDuration",config/* fadeDuration */.zk/1e3),b&&B.setUniform4fv("u_id",u);let H=-1;for(const t of c){if(!t.layerData.has(U))continue;if(t.key.level!==H&&(H=t.key.level,S.setDataUniforms(B,m,s,H,M)),x=t.layerData.get(U),0===x.glyphPerPageElementsMap.size)continue;x.prepareForRendering(p),x.updateOpacityInfo();const i=x.textVAO;if(null==i)continue;p.bindVAO(i),B.setUniformMatrix3fv("u_dvsMat3",t.transforms.dvs),this._setStencilState(e,t);const a=(performance.now()-x.lastOpacityUpdate)/1e3;B.setUniform1f("u_time",a),x.glyphPerPageElementsMap.forEach(((e,i)=>{this._renderGlyphRange(p,e,i,g,B,L,V,t)}))}}_renderGlyphRange(e,t,i,a,r,n,s,l){a.bind(e,enums/* TextureSamplingMode */.Cj.LINEAR,i,definitions/* vtlTextureBindingUnitGlyphs */.mg),n&&(r.setUniform1f("u_halo",1),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3),s&&(r.setUniform1f("u_halo",0),e.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,t[1],enums/* DataType */.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3)}_setStencilState(e,t){const{context:i,is3D:a,stencilSymbols:r}=e;if(i.setStencilTestEnabled(!0),r)return i.setStencilWriteMask(255),void i.setStencilFunction(enums/* CompareFunction */.MT.ALWAYS,t.stencilRef,255);i.setStencilWriteMask(0),a?i.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,t.stencilRef,255):i.setStencilFunction(enums/* CompareFunction */.MT.GREATER,255,255)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushLabel.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLGeometryBrushLabel_i=e=>(0,Utils/* createProgramDescriptor */.ES)(e.data,{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT},{location:1,name:"a_id",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_haloColor",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_texAndSize",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:5,name:"a_refSymbolAndPlacementOffset",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:6,name:"a_glyphData",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:7,name:"a_vertexOffset",count:2,type:enums/* DataType */.pe.SHORT},{location:8,name:"a_texCoords",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT}]});class WGLGeometryBrushLabel_l extends WGLGeometryBrush/* default */.A{dispose(){}getGeometryType(){return webgl_enums/* WGLGeometryType */.ZG.LABEL}supportsSymbology(e){return!0}drawGeometry(e,t,a,l){const{context:m,painter:u,state:d,rendererInfo:f,requestRender:c,allowDelayedRender:_}=e,p=MaterialKey/* LabelMaterialKey */.dZ.load(a.materialKey),E=p.mapAligned?1:0;if(!E&&Math.abs(t.key.level-Math.round(100*e.displayLevel)/100)>=1)return;const{bufferLayouts:y,attributes:N}=WGLGeometryBrushLabel_i(p),U=u.materialManager.getMaterialProgram(e,p,"materials/label",N,l);if(_&&null!=c&&!U.compiled)return void c();e.context.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,0,255),m.useProgram(U),this._setSharedUniforms(U,e,t),u.textureManager.bindTextures(m,U,p);const S=1===E?d.displayViewMat3:d.displayMat3;this._setSizeVVUniforms(p,U,f,t),U.setUniform1f("u_mapRotation",Math.floor(d.rotation/360*254)),U.setUniform1f("u_mapAligned",E),U.setUniformMatrix3fv("u_displayMat3",S),U.setUniform1f("u_opacity",1),U.setUniform2fv("u_screenSize",e.state.size);const T=a.target.getVAO(m,y,N),g=a.indexFrom*Uint32Array.BYTES_PER_ELEMENT;m.bindVAO(T),U.setUniform1f("u_isHaloPass",0),U.setUniform1f("u_isBackgroundPass",1),m.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,a.indexCount,enums/* DataType */.pe.UNSIGNED_INT,g),U.setUniform1f("u_isHaloPass",1),U.setUniform1f("u_isBackgroundPass",0),m.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,a.indexCount,enums/* DataType */.pe.UNSIGNED_INT,g),U.setUniform1f("u_isHaloPass",0),U.setUniform1f("u_isBackgroundPass",0),m.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,a.indexCount,enums/* DataType */.pe.UNSIGNED_INT,g),m.setStencilTestEnabled(!0),m.setBlendingEnabled(!0)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushLine.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLGeometryBrushLine_i=e=>(0,Utils/* createProgramDescriptor */.ES)(e.data,{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT},{location:1,name:"a_id",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_offsetAndNormal",count:4,type:enums/* DataType */.pe.BYTE},{location:4,name:"a_accumulatedDistanceAndHalfWidth",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT},{location:5,name:"a_tlbr",count:4,type:enums/* DataType */.pe.UNSIGNED_SHORT},{location:6,name:"a_segmentDirection",count:4,type:enums/* DataType */.pe.BYTE},{location:7,name:"a_aux",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT},{location:8,name:"a_zoomRange",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT}]});class WGLGeometryBrushLine_s extends WGLGeometryBrush/* default */.A{dispose(){}getGeometryType(){return webgl_enums/* WGLGeometryType */.ZG.LINE}supportsSymbology(e){return!0}drawGeometry(e,t,o,s){const{context:l,painter:m,rendererInfo:c,displayLevel:u,passOptions:d,requestRender:p,allowDelayedRender:y}=e,_=MaterialKey/* LineMaterialKey */.r9.load(o.materialKey),f=null!=d&&"hittest"===d.type;let E=WGLGeometryBrushLine_i(_),N=enums/* PrimitiveType */.WR.TRIANGLES;f&&(E=this._getTriangleDesc(o.materialKey,E),N=enums/* PrimitiveType */.WR.POINTS);const{attributes:g,bufferLayouts:S}=E,T=m.materialManager.getMaterialProgram(e,_,"materials/line",g,s);if(y&&null!=p&&!T.compiled)return void p();const U=1/e.pixelRatio,G=0;l.useProgram(T),this._setSharedUniforms(T,e,t),_.textureBinding&&m.textureManager.bindTextures(l,T,_);const I=2**(u-t.key.level);T.setUniform1f("u_zoomFactor",I),T.setUniform1f("u_blur",G+U),T.setUniform1f("u_antialiasing",U),this._setSizeVVUniforms(_,T,c,t),this._setColorAndOpacityVVUniforms(_,T,c),l.setFaceCullingEnabled(!1);const D=o.target.getVAO(l,S,g,f);let R=o.indexCount,x=o.indexFrom*Uint32Array.BYTES_PER_ELEMENT;f&&(R/=3,x/=3),l.bindVAO(D),l.drawElements(N,R,enums/* DataType */.pe.UNSIGNED_INT,x)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushText.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLGeometryBrushText_s=t=>(0,Utils/* createProgramDescriptor */.ES)(t.data,{geometry:[{location:0,name:"a_pos",count:2,type:enums/* DataType */.pe.SHORT},{location:1,name:"a_id",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:2,name:"a_color",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:3,name:"a_haloColor",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE,normalized:!0},{location:4,name:"a_texFontSize",count:4,type:enums/* DataType */.pe.UNSIGNED_BYTE},{location:5,name:"a_aux",count:4,type:enums/* DataType */.pe.BYTE},{location:6,name:"a_zoomRange",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT},{location:7,name:"a_vertexOffset",count:2,type:enums/* DataType */.pe.SHORT},{location:8,name:"a_texCoords",count:2,type:enums/* DataType */.pe.UNSIGNED_SHORT}]});class WGLGeometryBrushText_i extends WGLGeometryBrush/* default */.A{dispose(){}getGeometryType(){return webgl_enums/* WGLGeometryType */.ZG.TEXT}supportsSymbology(t){return!0}drawGeometry(t,e,o,i){const{context:m,painter:l,rendererInfo:u,state:d,passOptions:f,requestRender:_,allowDelayedRender:p}=t,c=MaterialKey/* TextMaterialKey */.ir.load(o.materialKey),y=null!=f&&"hittest"===f.type,{bufferLayouts:E,attributes:N}=WGLGeometryBrushText_s(c),U=l.materialManager.getMaterialProgram(t,c,"materials/text",N,i);if(p&&null!=_&&!U.compiled)return void _();m.useProgram(U);let S=enums/* PrimitiveType */.WR.TRIANGLES;y&&(S=enums/* PrimitiveType */.WR.POINTS),this._setSharedUniforms(U,t,e),l.textureManager.bindTextures(m,U,c),U.setUniformMatrix3fv("u_displayMat3",d.displayMat3),U.setUniformMatrix3fv("u_displayViewMat3",d.displayViewMat3),this._setSizeVVUniforms(c,U,u,e),this._setColorAndOpacityVVUniforms(c,U,u),this._setRotationVVUniforms(c,U,u);const T=o.target.getVAO(m,E,N),x=o.indexFrom*Uint32Array.BYTES_PER_ELEMENT;m.bindVAO(T),U.setUniform1f("u_isHaloPass",0),U.setUniform1f("u_isBackgroundPass",1),m.drawElements(S,o.indexCount,enums/* DataType */.pe.UNSIGNED_INT,x),U.setUniform1f("u_isHaloPass",1),U.setUniform1f("u_isBackgroundPass",0),m.drawElements(enums/* PrimitiveType */.WR.TRIANGLES,o.indexCount,enums/* DataType */.pe.UNSIGNED_INT,x),U.setUniform1f("u_isHaloPass",0),U.setUniform1f("u_isBackgroundPass",0),m.drawElements(S,o.indexCount,enums/* DataType */.pe.UNSIGNED_INT,x)}}

;// ../node_modules/@arcgis/core/views/2d/engine/brushes.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const w={marker:WGLGeometryBrushMarker/* default */.A,line:WGLGeometryBrushLine_s,fill:c,text:WGLGeometryBrushText_i,label:WGLGeometryBrushLabel_l,clip:p,stencil:WGLBrushStencil/* default */.A,bitmap:BrushBitmap/* default */.A,overlay:u,tileInfo:WGLBrushInfo/* default */.A,vtlBackground:_,vtlFill:d,vtlLine:f,vtlCircle:o,vtlSymbol:WGLBrushVTLSymbol_,dotDensity:g,heatmap:WGLBrushHeatmap/* default */.A,pieChart:s};


/***/ }),

/***/ 15946:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GW: () => (/* binding */ h),
/* harmony export */   Jo: () => (/* binding */ t),
/* harmony export */   MG: () => (/* binding */ n),
/* harmony export */   Wh: () => (/* binding */ f),
/* harmony export */   os: () => (/* binding */ e),
/* harmony export */   p6: () => (/* binding */ N),
/* harmony export */   pJ: () => (/* binding */ r),
/* harmony export */   z0: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports between, cDegTo256, cRadTo256, degToByte, sqr */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=Number.POSITIVE_INFINITY,t=Math.PI,r=2*t,u=128/t,o=(/* unused pure expression or super */ null && (256/360)),e=t/180,c=1/Math.LN2;function f(n,t){return(n%=t)>=0?n:n+t}function i(n){return f(n*u,256)}function I(n){return f(n*o,256)}function N(n){return Math.log(n)*c}function a(n){return n*n}function h(n,t,r){return n*(1-r)+t*r}function M(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}


/***/ }),

/***/ 59992:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IT: () => (/* binding */ o),
/* harmony export */   av: () => (/* binding */ c),
/* harmony export */   o2: () => (/* binding */ t),
/* harmony export */   zk: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=!0,t=32,c=1.5,e=200;


/***/ }),

/***/ 31541:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $u: () => (/* binding */ f),
/* harmony export */   Cq: () => (/* binding */ r),
/* harmony export */   Dc: () => (/* binding */ a),
/* harmony export */   I5: () => (/* binding */ l),
/* harmony export */   KI: () => (/* binding */ m),
/* harmony export */   Ms: () => (/* binding */ o),
/* harmony export */   O6: () => (/* binding */ u),
/* harmony export */   bv: () => (/* binding */ i),
/* harmony export */   kt: () => (/* binding */ n),
/* harmony export */   v9: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63643);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var a,i,n,l,u,m,o,r,p;!function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.FILL=1]="FILL",e[e.LINE=2]="LINE",e[e.SYMBOL=3]="SYMBOL",e[e.CIRCLE=4]="CIRCLE"}(a||(a={})),function(e){e[e.VISIBLE=0]="VISIBLE",e[e.NONE=1]="NONE"}(i||(i={})),function(e){e[e.POINT=0]="POINT",e[e.LINE=1]="LINE",e[e.LINE_CENTER=2]="LINE_CENTER"}(n||(n={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT",e[e.AUTO=2]="AUTO"}(l||(l={})),function(e){e[e.AUTO=0]="AUTO",e[e.LEFT=1]="LEFT",e[e.CENTER=2]="CENTER",e[e.RIGHT=3]="RIGHT"}(u||(u={})),function(e){e[e.CENTER=0]="CENTER",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.TOP=3]="TOP",e[e.BOTTOM=4]="BOTTOM",e[e.TOP_LEFT=5]="TOP_LEFT",e[e.TOP_RIGHT=6]="TOP_RIGHT",e[e.BOTTOM_LEFT=7]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(m||(m={})),function(e){e[e.NONE=0]="NONE",e[e.UPPERCASE=1]="UPPERCASE",e[e.LOWERCASE=2]="LOWERCASE"}(o||(o={})),function(e){e[e.MAP=0]="MAP",e[e.VIEWPORT=1]="VIEWPORT"}(r||(r={})),function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"}(p||(p={}));class f{}f.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:i.VISIBLE}},f.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:i.VISIBLE}},f.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:i.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},f.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:i.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:n.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:m.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:l.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:m.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:u.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:l.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:o.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[p.HORIZONTAL]}},f.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:i.VISIBLE}},f.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},f.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:r.MAP}},f.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:r.MAP},"line-width":{type:"number",minimum:0,default:1}},f.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:r.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:r.MAP}},f.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},f.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:r.MAP}};


/***/ }),

/***/ 75928:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(40189);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(43556);
/* harmony import */ var _DisplayId_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(65065);
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(38403);
/* harmony import */ var _util_debug_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(81884);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41746);
/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(84852);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6940);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(45758);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const E=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.AttributeStoreView"),S=(0,_util_debug_js__WEBPACK_IMPORTED_MODULE_10__/* .createDebugLogger */ .m)(_util_debug_js__WEBPACK_IMPORTED_MODULE_10__/* .debugAttrUpdates */ .N,E);class A{constructor(t,e,i){this._texture=null,this._lastTexture=null,this._fbos={},this.texelSize=4;const{buffer:s,pixelType:r,textureOnly:a}=t,n=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getPixelArrayCtor */ .Qz)(r);this.shared=i,this.pixelType=r,this.size=e,this.textureOnly=a,a||(this.data=new n(s)),this._resetRange()}destroy(){this._texture?.dispose();for(const t in this._fbos){const e=this._fbos[t];e&&("0"===t&&e.detachColorTexture(),e.dispose()),this._fbos[t]=null}this._texture=null}get _textureDesc(){const t=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureDescriptor */ .R;return t.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,t.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureSamplingMode */ .Cj.NEAREST,t.dataType=this.pixelType,t.width=this.size,t.height=this.size,t}setData(t,e,i){const s=(0,_DisplayId_js__WEBPACK_IMPORTED_MODULE_11__/* .getDisplayIdTexel */ .Q4)(t),r=this.data,a=s*this.texelSize+e;!r||a>=r.length||(r[a]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s))}getData(t,e){if(null==this.data)return null;const i=(0,_DisplayId_js__WEBPACK_IMPORTED_MODULE_11__/* .getDisplayIdTexel */ .Q4)(t)*this.texelSize+e;return!this.data||i>=this.data.length?null:this.data[i]}getTexture(t){return this._texture??this._initTexture(t)}getFBO(t,e=0){if(!this._fbos[e]){const i=0===e?this.getTexture(t):this._textureDesc;this._fbos[e]=new _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_7__/* .FramebufferObject */ .H(t,i)}return this._fbos[e]}get locked(){return!(this.pixelType!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .PixelType */ .ld.UNSIGNED_BYTE||!this.shared||this.textureOnly||!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-atomics")||!this.data)&&1===Atomics.load(this.data,0)}get hasDirty(){const t=this.dirtyStart;return this.dirtyEnd>=t}updateTexture(e,i){if(!this.locked){try{const i=this.dirtyStart,s=this.dirtyEnd;if(!this.hasDirty)return;this._resetRange();const r=this.data.buffer,a=this.getTexture(e),n=4,d=(i-i%this.size)/this.size,h=(s-s%this.size)/this.size,u=d,o=this.size,l=h,p=d*this.size*n,x=(o+l*this.size)*n-p,_=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getPixelArrayCtor */ .Qz)(this.pixelType),c=new _(r,p*_.BYTES_PER_ELEMENT,x),f=this.size,T=l-u+1;if(T>this.size)return void E.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-webgl","Out-of-bounds index when updating AttributeData"));a.updateData(0,0,u,f,T,c)}catch(s){}i()}}update(t){const{data:e,start:i,end:s}=t;if(null!=e&&null!=this.data){const s=this.data,r=i*this.texelSize;for(let i=0;i<e.length;i++){const a=1<<i%this.texelSize;t.layout&a&&(s[r+i]=e[i])}}this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,s)}resize(t,e){const i=this.size;if(this.size=e,this.textureOnly)return void(i!==this.size&&(this._lastTexture=this._texture,this._texture=null));const s=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getPixelArrayCtor */ .Qz)(this.pixelType);this.destroy(),this.data=new s(t.buffer)}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}_initTexture(t){const e=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(t,this._textureDesc,this.data??void 0);if(null!=this._lastTexture&&this._fbos[0]){const i=this._lastTexture.descriptor.width,s=this._lastTexture.descriptor.height,r=this._lastTexture.descriptor.dataType,a=this._lastTexture.descriptor.pixelFormat,n=this.getFBO(t),d=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getPixelBytes */ .AV)(r),h=new((0,_Utils_js__WEBPACK_IMPORTED_MODULE_5__/* .getPixelArrayCtor */ .Qz)(r))(new ArrayBuffer(i*s*d*this.texelSize)),u=t.getBoundFramebufferObject(),{x:o,y:l,width:p,height:x}=t.getViewport();t.bindFramebuffer(n),n.readPixels(0,0,i,s,a,r,h),e.updateData(0,0,0,2*i,s/2,h),t.setViewport(o,l,p,x),t.bindFramebuffer(u)}return this.destroy(),this._texture=e,this._texture}}class j{constructor(t){this._onUpdate=t,this._initialized=!1,this._forceNextUpload=!1,this._locked=!1}initialize(t){const{blocks:e,shared:i,size:s}=t;if(this.shared=i,this.size=s,S("Initializing AttributeStoreView",t),null==this._data)this._data=e.map((t=>null!=t?new A(t,s,i):null));else for(let r=0;r<this._data.length;r++){const t=this._data[r],a=e[r];null!=a&&(null==t?this._data[r]=new A(a,s,i):t.resize(a,s))}this._initialized=!0}destroy(){for(const t of this._data??[])t?.destroy();this._defaultTexture?.dispose()}isEmpty(){return null==this._data}isUpdating(){const t=null!=this._pendingAttributeUpdate,e=t;return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-log-updating")&&console.log(`Updating AttributeStoreView ${e}\n  -> hasPendingUpdate ${t}`),e}getBlock(t){if(null==this._data)return null;return this._data[t]}setLabelMinZoom(t,e){this.setData(t,0,1,e)}getLabelMinZoom(t){return this.getData(t,0,1,255)}getFilterFlags(t){return this.getData(t,0,0,0)}getVVSize(t){return this.getData(t,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataVv */ .dx,0,0)}getData(t,e,i,s){if(!this._data)return 0;const r=this._data[e];if(null==r)return 0;const a=r.getData(t,i);return null!=a?a:s}setData(t,e,i,s){this._data[e].setData(t,i,s)}lockTextureUpload(){this._locked=!0}unlockTextureUpload(){this._locked=!1}forceTextureUpload(){this._forceNextUpload=!0}async requestUpdate(e){if(this._pendingAttributeUpdate)return void E.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-webgl","Tried to update attribute data with a pending update"));const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .createResolver */ .Tw)();return S("AttributeStoreView Update Requested",e),this._pendingAttributeUpdate={data:e,resolver:s},this._onUpdate(),s.promise}update(){if(this._initialized&&null!=this._pendingAttributeUpdate){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStoreView::update");const{data:t,resolver:e}=this._pendingAttributeUpdate,i=this._data;for(let s=0;s<t.blocks.length;s++){const e=t.blocks[s],r=i[s];null!=r&&null!=e&&(S(`Updating block ${s}`,e),r.update(e))}this._pendingAttributeUpdate=null,e(),this._onUpdate()}}bindTextures(t,e=!0){const i=this._getDefaultTexture(t);if(!this._initialized)return t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData0 */ ["do"]),void(e&&(t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData1 */ .k2),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData2 */ .rE),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData3 */ .yg),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData4 */ .rZ),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData5 */ .kW),t.bindTexture(i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingGpgpu */ .Oe)));const c=this._data;if(!this._locked||this._forceNextUpload){for(const e of c)e?.updateTexture(t,(()=>this._onUpdate()));this._forceNextUpload=!1}t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataFilterFlags */ .aS]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData0 */ ["do"]),e&&(t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataGpgpu */ .O7]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingGpgpu */ .Oe),t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataAnimation */ .Nb]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData1 */ .k2),t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataVv */ .dx]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData2 */ .rE),t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .attributeDataDd1 */ .Sh]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData3 */ .yg),t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData4 */ .rZ]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData4 */ .rZ),t.bindTexture(c[_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData5 */ .kW]?.getTexture(t)??i,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .textureBindingAttributeData5 */ .kW))}_getDefaultTexture(t){if(null==this._defaultTexture){const e=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__/* .TextureDescriptor */ .R;e.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,e.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_6__/* .TextureSamplingMode */ .Cj.NEAREST,e.width=1,e.height=1,this._defaultTexture=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(t,e,new Uint8Array(4))}return this._defaultTexture}}


/***/ }),

/***/ 7370:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Pd: () => (/* binding */ r),
/* harmony export */   VS: () => (/* binding */ m),
/* harmony export */   oI: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r={geometry:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,2)]},t={geometry:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,0,4),new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_tex",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.BYTE,2,4)]},m={geometry:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_1__/* .VertexElementDescriptor */ ._("a_pos",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .DataType */ .pe.UNSIGNED_SHORT,0,4)]};


/***/ }),

/***/ 65065:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gl: () => (/* binding */ u),
/* harmony export */   KG: () => (/* binding */ i),
/* harmony export */   KQ: () => (/* binding */ n),
/* harmony export */   Q4: () => (/* binding */ f),
/* harmony export */   Ss: () => (/* binding */ s),
/* harmony export */   h8: () => (/* binding */ p),
/* harmony export */   qP: () => (/* binding */ e),
/* harmony export */   ry: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports aggregateValidFiltersMask, displayIdTypeMask, nonAggregateValidFiltersMask */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=8388607,t=8388608,r=254,o=255,u=0,c=1,e=n=>(n&t)>>>23,f=t=>t&n,i=n=>e(n)===c?r:o;function p(n){return e(n)===c}function s(n,r){return((r?t:0)|n)>>>0}


/***/ }),

/***/ 66188:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ e),
/* harmony export */   V: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(93540);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(t,e,n,i,a){this.target=t,this.geometryType=e,this.materialKey=n,this.indexFrom=i,this.indexCount=a}get indexEnd(){return this.indexFrom+this.indexCount}extend(t){this.indexCount+=t}}class n{constructor(t,e){this.geometryType=0,this._target=t,this.geometryType=e}static from(t,e,i,a){const d=new n(t,e);if(null!=a)for(const n of a)i.seekIndex(n),d.addRecord(i);else for(;i.next();)d.addRecord(i);return d}addRecord(n){const i=this._target,a=this.geometryType,d=n.materialKey;let s=n.indexFrom,r=n.indexCount;const o=n.vertexFrom,l=n.vertexCount;if(r||(s=o,r=l),null==this._head){const n=new e(i,a,d,s,r);return void(this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__/* .List */ .B(n))}let h=null,x=this._head;for(;x;){if(s<x.data.indexFrom)return this._insert(d,s,r,h,x);h=x,x=x.next}this._insert(d,s,r,h,null)}forEach(t){null!=this._head&&this._head.forEach(t)}*infos(){if(null!=this._head)for(const t of this._head.values())yield t}_insert(n,i,a,d,s){if(null==d&&null==s){const d=new e(this._target,this.geometryType,n,i,a);this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__/* .List */ .B(d)}return null==d&&null!=s?this._insertAtHead(n,i,a,s):null!=d&&null==s?this._insertAtEnd(n,i,a,d):null!=d&&null!=s?this._insertAtMiddle(n,i,a,d,s):void 0}_insertAtHead(n,i,a,d){const s=i+a;if(n===d.data.materialKey&&s===d.data.indexFrom)d.data.indexFrom=i,d.data.indexCount+=a;else{const s=new e(this._target,this.geometryType,n,i,a);this._head=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__/* .List */ .B(s),this._head.next=d}}_insertAtEnd(n,i,a,d){if(d.data.materialKey===n&&d.data.indexEnd===i)d.data.indexCount+=a;else{const s=new e(this._target,this.geometryType,n,i,a),r=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__/* .List */ .B(s);d.next=r}}_insertAtMiddle(n,i,a,d,s){const r=i+a;if(d.data.materialKey===n&&d.data.indexEnd===i)d.data.indexCount+=a,d.data.materialKey===s.data.materialKey&&d.data.indexEnd===s.data.indexFrom&&(d.data.indexCount+=s.data.indexCount,d.next=s.next);else if(n===s.data.materialKey&&r===s.data.indexFrom)s.data.indexFrom=i,s.data.indexCount+=a;else{const r=new e(this._target,this.geometryType,n,i,a),o=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_0__/* .List */ .B(r);d.next=o,o.next=s}}}


/***/ }),

/***/ 59339:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p6: () => (/* binding */ e),
/* harmony export */   wV: () => (/* binding */ c)
/* harmony export */ });
/* unused harmony exports between, interpolate, positiveMod, radToByte */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=128/Math.PI,t=256/360,r=1/Math.LN2;function u(n,t){return(n%=t)>=0?n:n+t}function o(t){return u(t*n,256)}function c(n){return u(n*t,256)}function e(n){return Math.log(n)*r}function f(n,t,r){return n*(1-r)+t*r}function i(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}


/***/ }),

/***/ 60470:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=0,h=0,i=0,s=0){this.x=t,this.y=h,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}


/***/ }),

/***/ 33613:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(49195);
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(10803);
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(46419);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLDrawPhase */ .S5.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ 61409:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(46615);
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(37353);
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42482);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__/* .DisplayObject */ .q{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A(t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,n,0,0,0,a,0,h,o,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,i.displayViewMat3,r)}}


/***/ }),

/***/ 95200:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   i: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(63643);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function x(t,e){return t.x===e.x&&t.y===e.y}function r(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let r=1;r<e;r++)x(t[r],t[i])||++i===r||(t[i]=t[r]);t.length=i+1}function n(t,e){return t.x=e.y,t.y=-e.x,t}function s(t,e){return t.x=-e.y,t.y=e.x,t}function y(t,e){return t.x=e.x,t.y=e.y,t}function o(t,e){return t.x=-e.x,t.y=-e.y,t}function h(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function l(t,e){return t.x*e.y-t.y*e.x}function _(t,e){return t.x*e.x+t.y*e.y}function a(t,e,i,x){return t.x=e.x*i+e.y*x,t.y=e.x*x-e.y*i,t}class c{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e){r(t),this._canUseThinTessellation&&e.halfWidth<_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .thinLineHalfWidthThreshold */ .Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let x=e.initialDistance||0,r=!1,n=t[0].x,s=t[0].y;const y=t.length;for(let o=1;o<y;++o){r&&(r=!1,x=0);let e=t[o].x,y=t[o].y,h=e-n,l=y-s,_=Math.sqrt(h*h+l*l);if(h/=_,l/=_,x+_>i){r=!0;const t=(i-x)/_;_=i-x,e=(1-t)*n+t*e,y=(1-t)*s+t*y,--o}const a=this._writeVertex(n,s,0,0,h,l,l,-h,0,-1,x),c=this._writeVertex(n,s,0,0,h,l,-l,h,0,1,x);x+=_;const d=this._writeVertex(e,y,0,0,h,l,l,-h,0,-1,x),u=this._writeVertex(e,y,0,0,h,l,-l,h,0,1,x);this._writeTriangle(a,c,d),this._writeTriangle(c,d,u),n=e,s=y}}_tessellate(i,r){const c=i[0],d=i[i.length-1],u=x(c,d),v=u?3:2;if(i.length<v)return;const f=r.pixelCoordRatio,w=null!=r.capType?r.capType:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT,T=null!=r.joinType?r.joinType:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER,g=null!=r.miterLimit?Math.min(r.miterLimit,4):2,m=null!=r.roundLimit?Math.min(r.roundLimit,1.05):1.05,V=null!=r.halfWidth?r.halfWidth:2,N=!!r.textured;let E,b,R,U=null;const k=this._prevNormal,p=this._nextNormal;let M=-1,B=-1;const L=this._joinNormal;let D,S;const j=this._textureNormalLeft,A=this._textureNormalRight,O=this._textureNormal;let I=-1,P=-1;const W=r.wrapDistance||65535;let q=r.initialDistance||0;const Q=this._writeVertex,X=this._writeTriangle,C=(t,e,i,x,r,n)=>{const s=Q(b,R,D,S,i,x,t,e,r,n,q);return I>=0&&P>=0&&s>=0&&X(I,P,s),I=P,P=s,s};u&&(E=i[i.length-2],p.x=d.x-E.x,p.y=d.y-E.y,B=h(p),p.x/=B,p.y/=B);let z=!1;for(let x=0;x<i.length;++x){if(z&&(z=!1,q=0),E&&(k.x=-p.x,k.y=-p.y,M=B,q+M>W&&(z=!0)),z){const t=(W-q)/M;M=W-q,E={x:(1-t)*E.x+t*i[x].x,y:(1-t)*E.y+t*i[x].y},--x}else E=i[x];b=E.x,R=E.y;const r=x<=0&&!z,c=x===i.length-1;if(r||(q+=M),U=c?u?i[1]:null:i[x+1],U?(p.x=U.x-b,p.y=U.y-R,B=h(p),p.x/=B,p.y/=B):(p.x=void 0,p.y=void 0),!u){if(r){s(L,p),D=L.x,S=L.y,w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.SQUARE&&(C(-p.y-p.x,p.x-p.y,p.x,p.y,0,-1),C(p.y-p.x,-p.x-p.y,p.x,p.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&(C(-p.y-p.x,p.x-p.y,p.x,p.y,-1,-1),C(p.y-p.x,-p.x-p.y,p.x,p.y,-1,1)),w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT||(C(-p.y,p.x,p.x,p.y,0,-1),C(p.y,-p.x,p.x,p.y,0,1));continue}if(c){n(L,k),D=L.x,S=L.y,w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&w!==_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.BUTT||(C(k.y,-k.x,-k.x,-k.y,0,-1),C(-k.y,k.x,-k.x,-k.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.SQUARE&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,0,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,0,1)),w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .CapType */ .xR.ROUND&&(C(k.y-k.x,-k.x-k.y,-k.x,-k.y,1,-1),C(-k.y-k.x,k.x-k.y,-k.x,-k.y,1,1));continue}}let d,v,Q=-l(k,p);if(Math.abs(Q)<.01)_(k,p)>0?(L.x=k.x,L.y=k.y,Q=1,d=Number.MAX_VALUE,v=!0):(s(L,p),Q=1,d=1,v=!1);else{L.x=(k.x+p.x)/Q,L.y=(k.y+p.y)/Q,d=h(L);const t=(d-1)*V*f;v=d>4||t>M&&t>B}D=L.x,S=L.y;let X=T;switch(T){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL:d<1.05&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER);break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.ROUND:d<m&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER);break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER:d>g&&(X=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL)}switch(X){case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.MITER:if(C(L.x,L.y,-k.x,-k.y,0,-1),C(-L.x,-L.y,-k.x,-k.y,0,1),c)break;if(N){const t=z?0:q;I=this._writeVertex(b,R,D,S,p.x,p.y,L.x,L.y,0,-1,t),P=this._writeVertex(b,R,D,S,p.x,p.y,-L.x,-L.y,0,1,t)}break;case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.BEVEL:{const t=Q<0;let e,i,x,r;if(t){const t=I;I=P,P=t,e=j,i=A}else e=A,i=j;if(v)x=t?s(this._innerPrev,k):n(this._innerPrev,k),r=t?n(this._innerNext,p):s(this._innerNext,p);else{const e=t?o(this._inner,L):y(this._inner,L);x=e,r=e}const h=t?n(this._bevelStart,k):s(this._bevelStart,k);C(x.x,x.y,-k.x,-k.y,e.x,e.y);const l=C(h.x,h.y,-k.x,-k.y,i.x,i.y);if(c)break;const _=t?s(this._bevelEnd,p):n(this._bevelEnd,p);if(v){const t=this._writeVertex(b,R,D,S,-k.x,-k.y,0,0,0,0,q);I=this._writeVertex(b,R,D,S,p.x,p.y,r.x,r.y,e.x,e.y,q),P=this._writeVertex(b,R,D,S,p.x,p.y,_.x,_.y,i.x,i.y,q),this._writeTriangle(l,t,P)}else{if(N){const t=this._bevelMiddle;t.x=(h.x+_.x)/2,t.y=(h.y+_.y)/2,a(O,t,-k.x,-k.y),C(t.x,t.y,-k.x,-k.y,O.x,O.y),a(O,t,p.x,p.y),I=this._writeVertex(b,R,D,S,p.x,p.y,t.x,t.y,O.x,O.y,q),P=this._writeVertex(b,R,D,S,p.x,p.y,r.x,r.y,e.x,e.y,q)}else{const t=I;I=P,P=t}C(_.x,_.y,p.x,p.y,i.x,i.y)}if(t){const t=I;I=P,P=t}break}case _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .JoinType */ .JO.ROUND:{const t=Q<0;let e,i;if(t){const t=I;I=P,P=t,e=j,i=A}else e=A,i=j;const x=t?o(this._inner,L):y(this._inner,L);let r,h;v?(r=t?s(this._innerPrev,k):n(this._innerPrev,k),h=t?n(this._innerNext,p):s(this._innerNext,p)):(r=x,h=x);const l=t?n(this._roundStart,k):s(this._roundStart,k),u=t?s(this._roundEnd,p):n(this._roundEnd,p),f=C(r.x,r.y,-k.x,-k.y,e.x,e.y),w=C(l.x,l.y,-k.x,-k.y,i.x,i.y);if(c)break;const T=this._writeVertex(b,R,D,S,-k.x,-k.y,0,0,0,0,q);v||this._writeTriangle(I,P,T);const g=o(this._outer,x),m=this._writeVertex(b,R,D,S,p.x,p.y,u.x,u.y,i.x,i.y,q);let V,E;const U=d>2;if(U){let e;d!==Number.MAX_VALUE?(g.x/=d,g.y/=d,e=_(k,g),e=(d*(e*e-1)+1)/e):e=-1,V=t?n(this._startBreak,k):s(this._startBreak,k),V.x+=k.x*e,V.y+=k.y*e,E=t?s(this._endBreak,p):n(this._endBreak,p),E.x+=p.x*e,E.y+=p.y*e}a(O,g,-k.x,-k.y);const M=this._writeVertex(b,R,D,S,-k.x,-k.y,g.x,g.y,O.x,O.y,q);a(O,g,p.x,p.y);const B=N?this._writeVertex(b,R,D,S,p.x,p.y,g.x,g.y,O.x,O.y,q):M,W=T,X=N?this._writeVertex(b,R,D,S,p.x,p.y,0,0,0,0,q):T;let z=-1,F=-1;if(U&&(a(O,V,-k.x,-k.y),z=this._writeVertex(b,R,D,S,-k.x,-k.y,V.x,V.y,O.x,O.y,q),a(O,E,p.x,p.y),F=this._writeVertex(b,R,D,S,p.x,p.y,E.x,E.y,O.x,O.y,q)),N?U?(this._writeTriangle(W,w,z),this._writeTriangle(W,z,M),this._writeTriangle(X,B,F),this._writeTriangle(X,F,m)):(this._writeTriangle(W,w,M),this._writeTriangle(X,B,m)):U?(this._writeTriangle(T,w,z),this._writeTriangle(T,z,F),this._writeTriangle(T,F,m)):(this._writeTriangle(T,w,M),this._writeTriangle(T,B,m)),v?(I=this._writeVertex(b,R,D,S,p.x,p.y,h.x,h.y,e.x,e.y,q),P=m):(I=N?this._writeVertex(b,R,D,S,p.x,p.y,h.x,h.y,e.x,e.y,q):f,this._writeTriangle(I,X,m),P=m),t){const t=I;I=P,P=t}break}}}}}


/***/ }),

/***/ 38403:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AV: () => (/* binding */ K),
/* harmony export */   Bh: () => (/* binding */ V),
/* harmony export */   ES: () => (/* binding */ ee),
/* harmony export */   Ee: () => (/* binding */ re),
/* harmony export */   Et: () => (/* binding */ $),
/* harmony export */   Gb: () => (/* binding */ ue),
/* harmony export */   Hp: () => (/* binding */ j),
/* harmony export */   ID: () => (/* binding */ se),
/* harmony export */   JK: () => (/* binding */ H),
/* harmony export */   Jg: () => (/* binding */ x),
/* harmony export */   Mj: () => (/* binding */ ye),
/* harmony export */   NM: () => (/* binding */ P),
/* harmony export */   O9: () => (/* binding */ z),
/* harmony export */   Pg: () => (/* binding */ G),
/* harmony export */   Qz: () => (/* binding */ W),
/* harmony export */   Th: () => (/* binding */ te),
/* harmony export */   bX: () => (/* binding */ de),
/* harmony export */   ds: () => (/* binding */ fe),
/* harmony export */   hi: () => (/* binding */ k),
/* harmony export */   jG: () => (/* binding */ R),
/* harmony export */   p2: () => (/* binding */ ie),
/* harmony export */   pn: () => (/* binding */ le),
/* harmony export */   rO: () => (/* binding */ Y),
/* harmony export */   sJ: () => (/* binding */ oe),
/* harmony export */   uk: () => (/* binding */ me),
/* harmony export */   vq: () => (/* binding */ F),
/* harmony export */   z3: () => (/* binding */ ne)
/* harmony export */ });
/* unused harmony exports getBytes, getNamedBuffers, isGIFDataUri, isPNGDataUri, isValidSVG */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63643);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79432);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.Utils"),m="geometry",d=[{name:m,strideInBytes:12}],p=[{name:m,strideInBytes:36}],y=[{name:m,strideInBytes:24}],I=[{name:m,strideInBytes:12}],S=[{name:m,strideInBytes:40}],T=[{name:m,strideInBytes:36}],g=[{name:m,strideInBytes:36}];function w(e){const t={};for(const n of e)t[n.name]=n.strideInBytes;return t}const E=w([{name:m,strideInBytes:36}]),h=w(d),L=w(p),N=w(y),D=w(I),A=w(S),M=w(T),U=w(g);function R(e,t){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.MARKER:return t===_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLSymbologyType */ .w4.HEATMAP?h:E;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.FILL:switch(t){case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLSymbologyType */ .w4.DOT_DENSITY:return D;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLSymbologyType */ .w4.SIMPLE:case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLSymbologyType */ .w4.OUTLINE_FILL_SIMPLE:return N;default:return L}case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LINE:return A;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.TEXT:return M;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LABEL:return U}}const _=[m],B=[m],O=[m],v=[m],C=[m];function b(e){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.MARKER:return _;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.FILL:return B;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LINE:return O;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.TEXT:return v;case _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LABEL:return C}}function F(e){switch(e%4){case 0:case 2:return 4;case 1:case 3:return 1}}function P(e,t){switch(t%4){case 0:case 2:return new Uint32Array(Math.floor(e*t/4));case 1:case 3:return new Uint8Array(e*t)}}function x(e,t){switch(t%4){case 0:case 2:return new Uint32Array(e);case 1:case 3:return new Uint8Array(e)}}function z(e){return null!=e}function $(e){return"number"==typeof e}function k(t){switch(t){case"butt":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CapType */ .xR.BUTT;case"round":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CapType */ .xR.ROUND;case"square":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CapType */ .xR.SQUARE;default:return f.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-invalid-type",`Cap type ${t} is not a valid option. Defaulting to round`)),_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CapType */ .xR.ROUND}}function G(t){switch(t){case"miter":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .JoinType */ .JO.MITER;case"bevel":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .JoinType */ .JO.BEVEL;case"round":return _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .JoinType */ .JO.ROUND;default:return f.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-invalid-type",`Join type ${t} is not a valid option. Defaulting to round`)),_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .JoinType */ .JO.ROUND}}function V(e){switch(e){case"opacity":return _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .VVType */ .Js.OPACITY;case"color":return _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .VVType */ .Js.COLOR;case"rotation":return _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .VVType */ .Js.ROTATION;case"size":return _enums_js__WEBPACK_IMPORTED_MODULE_3__/* .VVType */ .Js.SIZE;default:return f.error(`Cannot interpret unknown vv: ${e}`),null}}function j(e,t,n,r,s,a,i){for(const c in a){const t=a[c].stride,r=F(t),i=a[c].data,o=n[c].data;if(null==i||null==o)continue;const u=t*s.vertexCount/r,l=t*e/r,f=t*s.vertexFrom/r;for(let e=0;e<u;++e)o[e+l]=i[e+f]}if(null!=i&&null!=r){const n=s.indexCount;for(let a=0;a<n;++a)r[a+t]=i[a+s.indexFrom]-s.vertexFrom+e}}const Y={[m]:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW};function H(e,t){const n=[];for(let r=0;r<5;++r){const s=b(r),a={};for(const e of s)a[e]={data:t(r,e)};n.push({data:e(r),buffers:a})}return n}function q(e){switch(e){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.BYTE:case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE:return 1;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT:case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT:return 2;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.FLOAT:case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.INT:case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_INT:return 4}}function K(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_BYTE:return 1;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return 2;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.FLOAT:return 4;default:return void f.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function W(t){switch(t){case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_BYTE:return Uint8Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PixelType */ .ld.FLOAT:return Float32Array;default:return void f.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-utils",`Unable to handle type ${t}`))}}function X(e){const t={};for(const n in e){const r=e[n];let s=0;t[n]=r.map((e=>{const t=new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_5__/* .VertexElementDescriptor */ ._(e.name,e.count,e.type,s,0,e.normalized||!1);return s+=e.count*q(e.type),t})),t[n]?.forEach((e=>e.stride=s))}return t}const J=e=>{const t=new Map;for(const n in e)for(const r of e[n])t.set(r.name,r.location);return t},Q=e=>{const t={};for(const n in e){const r=e[n];t[n]=r?.length?r[0].stride:0}return t},Z=new Map,ee=(e,t)=>{if(!Z.has(e)){const n=X(t),r={strides:Q(n),bufferLayouts:n,attributes:J(t)};Z.set(e,r)}return Z.get(e)};function te(e){e(_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.FILL),e(_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LINE),e(_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.MARKER),e(_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.TEXT),e(_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.LABEL)}const ne=e=>"path"in e&&pe(e.path),re=e=>!(!("url"in e)||!e.url)||!(!("imageData"in e)||!e.imageData),se=e=>"imageData"in e&&e.imageData&&"contentType"in e&&e.contentType?`data:${e.contentType};base64,${e.imageData}`:"url"in e?e.url:null,ae=e=>null!=e&&e.startsWith("data:image/gif"),ie=e=>"url"in e&&e.url&&(e.url.includes(".gif")||ae(e.url))||"contentType"in e&&"image/gif"===e.contentType||"imageData"in e&&ae(e.imageData),ce=e=>null!=e&&e.startsWith("data:image/png"),oe=e=>"url"in e&&e.url&&(e.url.includes(".png")||ce(e.url))||"contentType"in e&&"image/png"===e.contentType||"imageData"in e&&ce(e.imageData),ue=e=>e.type&&e.type.toLowerCase().includes("3d");function le(e){switch(e.type){case"line":{const t=e;return"CIMSolidStroke"===t.cim.type&&!t.dashTemplate}case"fill":return"CIMSolidFill"===e.cim.type;case"esriSFS":return"esriSFSSolid"===e.style||"esriSFSNull"===e.style;case"esriSLS":return"esriSLSSolid"===e.style||"esriSLSNull"===e.style;default:return!1}}function fe(e){switch("cim"in e?e.cim.type:e.type){case"esriSMS":case"esriPMS":case"CIMPointSymbol":return!1;case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":return ye(e);default:return!0}}function me(e){const t="maxVVSize"in e&&e.maxVVSize,n="width"in e&&e.width||"size"in e&&e.size||0;return t||n}function de(e){const t=[];for(let n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t}const pe=e=>!!e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)),ye=e=>"fill"===e.type&&"CIMMarkerPlacementInsidePolygon"===e?.cim?.markerPlacement?.type;


/***/ }),

/***/ 43438:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80976);
/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(69955);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n{constructor(s,n){this._rctx=s,this._vertexBuffer=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_0__/* .BufferObject */ .g.createVertex(s,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Usage */ ._U.STATIC_DRAW,new Uint16Array(n)),this._vao=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_2__/* .VertexArrayObject */ .Z(s,new Map([["a_position",0]]),{geometry:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* .VertexElementDescriptor */ ._("a_position",2,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .DataType */ .pe.SHORT,0,4)]},{geometry:this._vertexBuffer}),this._count=n.length/2}bind(){this._rctx.bindVAO(this._vao)}unbind(){this._rctx.bindVAO(null)}dispose(){this._vao.dispose()}draw(){this._rctx.bindVAO(this._vao),this._rctx.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,this._count)}}


/***/ }),

/***/ 49195:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ n)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/brushes.js + 13 modules
var brushes = __webpack_require__(98949);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f32.js
var mat3f32 = __webpack_require__(21360);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f64.js
var vec2f64 = __webpack_require__(78286);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/Mesh2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const y=t=>{switch(t.BYTES_PER_ELEMENT){case 1:return enums/* DataType */.pe.UNSIGNED_BYTE;case 2:return enums/* DataType */.pe.UNSIGNED_SHORT;case 4:return enums/* DataType */.pe.UNSIGNED_INT;default:throw new Error/* default */.A("Cannot get DataType of array")}},l=(e,t,r,n)=>{let s=0;for(let o=1;o<r;o++){const r=e[2*(t+o-1)],n=e[2*(t+o-1)+1];s+=(e[2*(t+o)]-r)*(e[2*(t+o)+1]+n)}return n?s>0:s<0},x=({coords:e,lengths:t},n)=>{const s=[];for(let o=0,i=0;o<t.length;i+=t[o],o+=1){const c=i,a=[];for(;o<t.length-1&&l(e,i+t[o],t[o+1],n);o+=1,i+=t[o])a.push(i+t[o]-c);const f=e.slice(2*c,2*(i+t[o])),h=(0,earcut.e)(f,a,2);for(const e of h)s.push(e+c)}return s};class g{constructor(e,t,r,n=!1){this._cache={},this.vertices=e,this.indices=t,this.primitiveType=r,this.isMapSpace=n}static fromRect({x:e,y:t,width:r,height:n}){const s=e,o=t,i=s+r,c=o+n;return g.fromScreenExtent({xmin:s,ymin:o,xmax:i,ymax:c})}static fromPath(e){const t=(0,featureConversionUtils/* convertFromNestedArray */.eU)(new OptimizedGeometry/* default */.A,e.path,!1,!1),r=t.coords,n=new Uint32Array(x(t,!0)),s=new Uint32Array(r.length/2);for(let o=0;o<s.length;o++)s[o]=(0,number/* i1616to32 */.M9)(Math.floor(r[2*o]),Math.floor(r[2*o+1]));return new g({geometry:s},n,enums/* PrimitiveType */.WR.TRIANGLES)}static fromGeometry(r,n){const s=n.geometry?.type;switch(s){case"polygon":return g.fromPolygon(r,n.geometry);case"extent":return g.fromMapExtent(r,n.geometry);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.Mesh2D").error(new Error/* default */.A("mapview-bad-type",`Unable to create a mesh from type ${s}`,n)),g.fromRect({x:0,y:0,width:1,height:1})}}static fromPolygon(e,t){const r=(0,featureConversionUtils/* convertFromPolygon */.Ye)(new OptimizedGeometry/* default */.A,t,!1,!1),o=r.coords,f=new Uint32Array(x(r,!1)),m=new Uint32Array(o.length/2),u=(0,vec2f64.a)(),y=(0,vec2f64.a)();for(let s=0;s<m.length;s++)(0,vec2.s)(u,o[2*s],o[2*s+1]),e.toScreen(y,u),m[s]=(0,number/* i1616to32 */.M9)(Math.floor(y[0]),Math.floor(y[1]));return new g({geometry:m},f,enums/* PrimitiveType */.WR.TRIANGLES,!0)}static fromScreenExtent({xmin:e,xmax:t,ymin:r,ymax:n}){const s={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(e,r),(0,number/* i1616to32 */.M9)(t,r),(0,number/* i1616to32 */.M9)(e,n),(0,number/* i1616to32 */.M9)(e,n),(0,number/* i1616to32 */.M9)(t,r),(0,number/* i1616to32 */.M9)(t,n)])},o=new Uint32Array([0,1,2,3,4,5]);return new g(s,o,enums/* PrimitiveType */.WR.TRIANGLES)}static fromMapExtent(e,t){const[r,n]=e.toScreen([0,0],[t.xmin,t.ymin]),[s,o]=e.toScreen([0,0],[t.xmax,t.ymax]),i={geometry:new Uint32Array([(0,number/* i1616to32 */.M9)(r,n),(0,number/* i1616to32 */.M9)(s,n),(0,number/* i1616to32 */.M9)(r,o),(0,number/* i1616to32 */.M9)(r,o),(0,number/* i1616to32 */.M9)(s,n),(0,number/* i1616to32 */.M9)(s,o)])},c=new Uint32Array([0,1,2,3,4,5]);return new g(i,c,enums/* PrimitiveType */.WR.TRIANGLES)}destroy(){null!=this._cache.indexBuffer&&this._cache.indexBuffer.dispose();for(const e in this._cache.vertexBuffers)null!=this._cache.vertexBuffers[e]&&this._cache.vertexBuffers[e].dispose()}get elementType(){return y(this.indices)}getIndexBuffer(e,t=enums/* Usage */._U.STATIC_DRAW){return this._cache.indexBuffer||(this._cache.indexBuffer=BufferObject/* BufferObject */.g.createIndex(e,t,this.indices)),this._cache.indexBuffer}getVertexBuffers(e,t=enums/* Usage */._U.STATIC_DRAW){return this._cache.vertexBuffers||(this._cache.vertexBuffers=Object.keys(this.vertices).reduce(((r,n)=>({...r,[n]:BufferObject/* BufferObject */.g.createVertex(e,t,this.vertices[n])})),{})),this._cache.vertexBuffers}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/ClippingInfo.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=t=>parseFloat(t)/100;class c extends DisplayObject/* DisplayObject */.q{constructor(t,e){super(),this._clip=e,this._cache={},this.stage=t,this._handle=(0,reactiveUtils/* watch */.wB)((()=>e.version),(()=>this._invalidate())),this.ready()}static fromClipArea(t,e){return new c(t,e)}_destroyGL(){null!=this._cache.mesh&&(this._cache.mesh.destroy(),this._cache.mesh=null),null!=this._cache.vao&&(this._cache.vao.dispose(),this._cache.vao=null)}destroy(){this._destroyGL(),this._handle.remove()}getVAO(t,e,r,s){const[i,o]=e.size;if("geometry"!==this._clip.type&&this._lastWidth===i&&this._lastHeight===o||(this._lastWidth=i,this._lastHeight=o,this._destroyGL()),null==this._cache.vao){const i=this._createMesh(e,this._clip),o=i.getIndexBuffer(t),a=i.getVertexBuffers(t);this._cache.mesh=i,this._cache.vao=new VertexArrayObject/* VertexArrayObject */.Z(t,r,s,a,o)}return this._cache.vao}_createTransforms(){return{dvs:(0,mat3f32.c)()}}_invalidate(){this._destroyGL(),this.requestRender()}_createScreenRect(t,e){const[r,s]=t.size,i="string"==typeof e.left?a(e.left)*r:e.left,o="string"==typeof e.right?a(e.right)*r:e.right,h="string"==typeof e.top?a(e.top)*s:e.top,c="string"==typeof e.bottom?a(e.bottom)*s:e.bottom,n=i,l=h;return{x:n,y:l,width:Math.max(r-o-n,0),height:Math.max(s-c-l,0)}}_createMesh(r,s){switch(s.type){case"rect":return g.fromRect(this._createScreenRect(r,s));case"path":return g.fromPath(s);case"geometry":return g.fromGeometry(r,s);default:return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.ClippingInfo").error(new Error/* default */.A("mapview-bad-type","Unable to create ClippingInfo mesh from clip of type: ${clip.type}")),g.fromRect({x:0,y:0,width:1,height:1})}}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n extends Container/* Container */.m{set clips(s){super.clips=s,this._updateClippingInfo(s)}renderChildren(s){null==this._renderPasses&&(this._renderPasses=this.prepareRenderPasses(s.painter));for(const r of this._renderPasses)try{r.render(s)}catch(e){}}prepareRenderPasses(e){return[e.registerRenderPass({name:"clip",brushes:[brushes/* brushes */.d.clip],target:()=>this._clippingInfos,drawPhase:webgl_enums/* WGLDrawPhase */.S5.MAP|webgl_enums/* WGLDrawPhase */.S5.LABEL|webgl_enums/* WGLDrawPhase */.S5.LABEL_ALPHA|webgl_enums/* WGLDrawPhase */.S5.DEBUG|webgl_enums/* WGLDrawPhase */.S5.HIGHLIGHT})]}_updateClippingInfo(s){null!=this._clippingInfos&&(this._clippingInfos.forEach((s=>s.destroy())),this._clippingInfos=null),null!=s&&s.length&&(this._clippingInfos=s.items.map((s=>c.fromClipArea(this.stage,s)))),this.requestRender()}}


/***/ }),

/***/ 20736:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(94734);
/* harmony import */ var _chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50499);
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46615);
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(21360);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(43556);
/* harmony import */ var _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(61409);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class h{acquire(s){return{refCount:1,version:-1,labelMat2d:(0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),tileMat3:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__.c)(),dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__.c)()}}release(s){}}class m extends _TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_5__/* .TiledDisplayObject */ .Y{constructor(s,t,r,e){super(s,t,r,e,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .tileSize */ .CQ,_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .tileSize */ .CQ)}destroy(){super.destroy(),this._transforms&&m.TransformCache.release(this.key.hash)}setTransform(i){const o=this.resolution/i.resolution,n=this.transforms.tileMat3,[h,m]=i.toScreenNoRotation([0,0],[this.x,this.y]),c=this.width/this.rangeX*o,f=this.height/this.rangeY*o;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.s)(n,c,0,0,0,f,0,h,m,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this.transforms.dvs,i.displayViewMat3,n);const d=this.transforms.labelMat2d,l=window.devicePixelRatio,u=(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.d)((0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),c*l,0,0,f*l,h*l,m*l);(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.m)(d,i.viewMat2d,u)}_createTransforms(){return m.TransformCache.acquire(this.key.hash)}}m.TransformCache=new h;


/***/ }),

/***/ 22610:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dy: () => (/* binding */ o),
/* harmony export */   UD: () => (/* binding */ n),
/* harmony export */   fO: () => (/* binding */ a),
/* harmony export */   gy: () => (/* binding */ t),
/* harmony export */   iT: () => (/* binding */ c),
/* harmony export */   nE: () => (/* binding */ i),
/* harmony export */   oX: () => (/* binding */ e),
/* harmony export */   p1: () => (/* binding */ s),
/* harmony export */   xy: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,t;function r(t){switch(t){case"left":return e.Left;case"right":return e.Right;case"center":return e.Center}}function n(e){switch(e){case"top":return t.Top;case"middle":return t.Center;case"baseline":return t.Baseline;case"bottom":return t.Bottom}}function a(r){switch(r){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[e.Right,t.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[e.Center,t.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[e.Left,t.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[e.Right,t.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[e.Center,t.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[e.Left,t.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[e.Right,t.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[e.Center,t.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[e.Left,t.Top];default:return console.debug(`Found invalid placement type ${r}`),[e.Center,t.Center]}}function c(t){switch(t){case e.Right:return-1;case e.Center:return 0;case e.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${t}`),0}}function o(e){switch(e){case t.Top:return 1;case t.Center:return 0;case t.Bottom:case t.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${e}`),0}}function s(t){switch(t){case"left":return e.Left;case"right":return e.Right;case"center":return e.Center}}function i(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}!function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(e||(e={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(t||(t={}));


/***/ }),

/***/ 18806:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _VertexStream_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43438);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95031);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a={nearest:{defines:[],samplingMode:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.NEAREST,mips:!1},bilinear:{defines:[],samplingMode:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.LINEAR,mips:!1},bicubic:{defines:["bicubic"],samplingMode:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.LINEAR,mips:!1},trilinear:{defines:[],samplingMode:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .TextureSamplingMode */ .Cj.LINEAR_MIPMAP_LINEAR,mips:!0}},o=(e,t,i)=>{if("dynamic"===i.samplingMode){const{state:i}=e,s=t.resolution/t.pixelRatio/i.resolution,n=Math.round(e.pixelRatio)!==e.pixelRatio,r=s>1.05||s<.95;return i.rotation||r||n||t.isSourceScaled||t.rotation?a.bilinear:a.nearest}return a[i.samplingMode]};class d extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A{constructor(){super(...arguments),this._desc={vsPath:"raster/bitmap",fsPath:"raster/bitmap",attributes:new Map([["a_pos",0]])}}dispose(){this._quad&&this._quad.dispose()}prepareState({context:e}){e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setStencilWriteMask(0),e.setStencilTestEnabled(!0)}draw(i,s){const{context:a,renderingOptions:d,painter:l,requestRender:m,allowDelayedRender:c}=i;if(!s.source||!s.isReady)return;const p=o(i,s,d),u=l.materialManager.getProgram(this._desc,p.defines);if(c&&null!=m&&!u.compiled)return void m();i.timeline.begin(this.name),"additive"===s.blendFunction?a.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE):a.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),a.setStencilFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CompareFunction */ .MT.EQUAL,s.stencilRef,255),this._quad||(this._quad=new _VertexStream_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A(a,[0,0,1,0,0,1,1,1]));const{coordScale:f,computedOpacity:_,transforms:E}=s;s.setSamplingProfile(p),s.bind(i.context,_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingBitmap */ .YS),a.useProgram(u),u.setUniformMatrix3fv("u_dvsMat3",E.dvs),u.setUniform1i("u_texture",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingBitmap */ .YS),u.setUniform2fv("u_coordScale",f),u.setUniform1f("u_opacity",_),this._quad.draw(),i.timeline.end(this.name)}}


/***/ }),

/***/ 95031:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(){this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}prepareState(t,r){}draw(t,r,s){}drawMany(t,r,s){for(const a of r)a.visible&&this.draw(t,a,s)}}


/***/ }),

/***/ 83739:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ E)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js
var VertexStream = __webpack_require__(43438);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker.js
var WGLGeometryBrushMarker = __webpack_require__(74373);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/effects/Effect.js
var Effect = __webpack_require__(25586);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js
var utils = __webpack_require__(97025);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/contextUtils.js
var contextUtils = __webpack_require__(21946);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/FramebufferObject.js
var FramebufferObject = __webpack_require__(84852);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
;// ../node_modules/@arcgis/core/views/webgl/heatmapTextureUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class l{constructor(e,t,r,a){this.dataType=e,this.samplingMode=t,this.pixelFormat=r,this.internalFormat=a}}function n(n,i){const{textureFloat:f,colorBufferFloat:s}=n.capabilities,u=f?.textureFloat,_=f?.textureFloatLinear,m=f?.textureHalfFloat,h=f?.textureHalfFloatLinear,p=s?.textureFloat,d=s?.textureHalfFloat,c=s?.floatBlend,x=n.driverTest.floatBufferBlend.result;if(!u&&!m)throw new Error/* default */.A("heatmap:missing-texture-float","HeatmapRenderer requires WebGL2 or the WebGL1 extension OES_texture_float or OES_texture_half_float.");if(!p&&!d)throw new Error/* default */.A("heatmap:missing-color-buffer-float","HeatmapRenderer requires the WebGL extension EXT_color_buffer_float or EXT_color_buffer_half_float or WEBGL_color_buffer_float.");if(!(c&&x||d))throw new Error/* default */.A("heatmap:missing-float-blend","HeatmapRenderer requires the WebGL extension EXT_float_blend or EXT_color_buffer_half_float."+(x?"":" This device claims support for EXT_float_blend, but does not actually support it."));const b=u&&p&&c&&x,E=m&&d,R=_,F=h,L=!!s?.R32F,w=!!s?.R16F;if(b&&(R||!F))return R||i.warnOnce("Missing WebGL extension OES_texture_float_linear. Heatmap quality may be reduced."),new l(webgl_enums/* PixelType */.ld.FLOAT,R?webgl_enums/* TextureSamplingMode */.Cj.LINEAR:webgl_enums/* TextureSamplingMode */.Cj.NEAREST,L?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,L?webgl_enums/* SizedPixelFormat */.H0.R32F:webgl_enums/* PixelFormat */.Ab.RGBA);if(E)return F||i.warnOnce("Missing WebGL extension OES_texture_half_float_linear. Heatmap quality may be reduced."),new l(webgl_enums/* PixelType */.ld.HALF_FLOAT,F?webgl_enums/* TextureSamplingMode */.Cj.LINEAR:webgl_enums/* TextureSamplingMode */.Cj.NEAREST,w?webgl_enums/* PixelFormat */.Ab.RED:webgl_enums/* PixelFormat */.Ab.RGBA,w?webgl_enums/* SizedPixelFormat */.H0.R16F:webgl_enums/* PixelFormat */.Ab.RGBA);throw new Error/* default */.A("heatmap:missing-hardware-support","HeatmapRenderer requires WebGL extensions that allow it to render and blend to float or half float textures.")}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Renderbuffer.js
var Renderbuffer = __webpack_require__(74416);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js
var RenderbufferDescriptor = __webpack_require__(94669);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/Texture.js + 1 modules
var Texture = __webpack_require__(6940);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushHeatmap.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const T=Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.brushes.WGLBrushHeatmap");function v(e){return"heatmap"===e.type}function B(e,t){const{referenceScale:r,radius:i}=e;return i*(0!==r?r/t.scale:1)}class E extends WGLGeometryBrushMarker/* default */.A{constructor(){super(...arguments),this.brushEffect=new G}supportsSymbology(e){return e===enums/* WGLSymbologyType */.w4.HEATMAP}dispose(){super.dispose(),this.brushEffect.dispose(),this.brushEffect=null}prepareState(){}drawGeometry(e,t,r,i){const{defines:s}=this.brushEffect.loadQualityProfile(e.context);super.drawGeometry(e,t,r,i?[...i,...s]:s)}_drawMarkers(e,t,r,i,s,a,n){const{context:f,rendererInfo:c,state:h}=e,{rendererSchema:m}=c;(0,utils/* assertRendererSchema */.R7)(m,"heatmap");const{isFieldActive:p}=m;r.setUniform1f("u_radius",B(m,h)),n||(r.setUniform1f("u_isFieldActive",p),f.setStencilFunction(webgl_enums/* CompareFunction */.MT.GEQUAL,t.stencilRef,255)),f.drawElements(i,s,webgl_enums/* DataType */.pe.UNSIGNED_INT,a)}}const O={vsPath:"heatmap/heatmapResolve",fsPath:"heatmap/heatmapResolve",attributes:new Map([["a_position",0]])},x=.25,y=1/(2*x);function P(e){return e<y?1:x}class G extends Effect/* Effect */.M{constructor(){super(...arguments),this.name=this.constructor.name}createOptions({passOptions:e}){return e}dispose(){this._prevFBO=null,null!=this._accumulateFramebuffer&&this._accumulateFramebuffer.detachDepthStencilBuffer(),this._accumulateOutputStencilBuffer=(0,maybe/* disposeMaybe */.WD)(this._accumulateOutputStencilBuffer),this._accumulateFramebuffer=(0,maybe/* disposeMaybe */.WD)(this._accumulateFramebuffer),this._resolveGradientTexture=(0,maybe/* disposeMaybe */.WD)(this._resolveGradientTexture),this._tileQuad=(0,maybe/* disposeMaybe */.WD)(this._tileQuad)}bind(e){const{context:t,rendererInfo:r,passOptions:i,state:s}=e,{rendererSchema:a}=r;!(null!=i&&"hittest"===i.type)&&v(a)&&(this._prevFBO=t.getBoundFramebufferObject(),this._prevViewport=t.getViewport(),(0,utils/* assertRendererSchema */.R7)(a,"heatmap"),this._loadResources(e),this._updateResources(t,a,s),t.bindFramebuffer(this._accumulateFramebuffer),t.setViewport(0,0,this._accumulateFramebuffer.width,this._accumulateFramebuffer.height),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0),t.setBlendFunction(webgl_enums/* BlendFactor */.dn.ONE,webgl_enums/* BlendFactor */.dn.ONE),t.setClearColor(0,0,0,0),t.clear(webgl_enums/* ClearBufferBit */.hn.COLOR_BUFFER_BIT))}unbind(){this._prevFBO=null,this._prevViewport=null}draw(e){const{context:t,painter:r,rendererInfo:i,passOptions:s}=e,{rendererSchema:a}=i;if(null!=s&&"hittest"===s.type||!v(a))return;const{defines:u}=this.loadQualityProfile(t),n=r.materialManager.getProgram(O,u);t.useProgram(n),t.bindFramebuffer(this._prevFBO),t.setViewport(0,0,this._prevViewport.width,this._prevViewport.height),t.setBlendFunction(webgl_enums/* BlendFactor */.dn.ONE,webgl_enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),t.setStencilTestEnabled(!1);const{radius:o,minDensity:l,densityRange:c}=a;t.bindTexture(this._accumulateFramebuffer.colorTexture,8),t.bindTexture(this._resolveGradientTexture,9),n.setUniform1i("u_texture",8),n.setUniform1i("u_gradient",9),n.setUniform2f("u_densityMinAndInvRange",l,1/c),n.setUniform1f("u_densityNormalization",3/(o*o*Math.PI)),this._tileQuad.draw()}_loadResources({context:e,painter:t}){const{dataType:r,samplingMode:s,pixelFormat:a,internalFormat:u,requiresSharedStencilBuffer:n}=this.loadQualityProfile(e),{width:o,height:l}=this._prevViewport,f=n?1:x,c=o*f,p=l*f;let d=new TextureDescriptor/* TextureDescriptor */.R(c,p);d.pixelFormat=a,d.internalFormat=u,d.dataType=r,d.samplingMode=s,d.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,n||(this._accumulateOutputStencilBuffer??=new Renderbuffer/* Renderbuffer */.l(e,new RenderbufferDescriptor/* RenderbufferDescriptor */.q(webgl_enums/* RenderbufferFormat */.yQ.DEPTH_STENCIL,c,p))),this._accumulateFramebuffer??=new FramebufferObject/* FramebufferObject */.H(e,d,n?t.getSharedStencilBuffer():this._accumulateOutputStencilBuffer),d=new TextureDescriptor/* TextureDescriptor */.R,d.wrapMode=webgl_enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE,this._resolveGradientTexture??=new Texture/* Texture */.g(e,d),this._tileQuad??=new VertexStream/* default */.A(e,[0,0,1,0,0,1,1,1])}_updateResources(e,t,r){const{gradientHash:i,gradient:s}=t;this._prevGradientHash!==i&&(this._resolveGradientTexture.resize(s.length/4,1),this._resolveGradientTexture.setData(s),this._prevGradientHash=i);const{requiresSharedStencilBuffer:a}=this.loadQualityProfile(e),u=a?1:P(B(t,r)),{width:n,height:o}=this._prevViewport,l=n*u,f=o*u,{width:h,height:m}=this._accumulateFramebuffer;if(h!==l||m!==f){const e=this._accumulateFramebuffer.depthStencil;if(a&&null!=e){const{width:t,height:r}=e.descriptor;t===l&&r===f||(T.errorOnce("Attempted to resize shared stencil buffer! Detaching instead."),this._accumulateFramebuffer.detachDepthStencilBuffer())}this._accumulateFramebuffer.resize(l,f)}a||e.blitFramebuffer(this._prevFBO,this._accumulateFramebuffer,0,0,this._prevFBO.width,this._prevFBO.height,0,0,this._accumulateFramebuffer.width,this._accumulateFramebuffer.height,webgl_enums/* ClearBufferBit */.hn.STENCIL_BUFFER_BIT,webgl_enums/* TextureSamplingMode */.Cj.NEAREST)}loadQualityProfile(e){if(null==this._qualityProfile){const t=n(e,T),r=e.type===contextUtils/* ContextType */.EL.WEBGL1;this._qualityProfile={...t,requiresSharedStencilBuffer:r,defines:t.dataType!==webgl_enums/* PixelType */.ld.FLOAT?["heatmapPrecisionHalfFloat"]:[]}}return this._qualityProfile}}


/***/ }),

/***/ 10803:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20035);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97394);
/* harmony import */ var _shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(13294);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(50122);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6940);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(45758);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(80976);
/* harmony import */ var _webgl_capabilities_isWebGL2Context_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(49251);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const h=300,b=32;class p extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,0,0,1)}dispose(){this._outlineProgram?.dispose(),this._outlineProgram=null,this._tileInfoProgram?.dispose(),this._tileInfoProgram=null,this._outlineVertexArrayObject?.dispose(),this._outlineVertexArrayObject=null,this._tileInfoVertexArrayObject?.dispose(),this._tileInfoVertexArrayObject=null,this._canvas=null}prepareState({context:t}){t.setBlendingEnabled(!0),t.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1)}draw(t,e){const{context:r,requestRender:i,allowDelayedRender:s}=t;if(!e.isReady)return;if(this._loadWGLResources(r),s&&null!=i&&(!this._outlineProgram.compiled||!this._tileInfoProgram.compiled))return void i();r.bindVAO(this._outlineVertexArrayObject),r.useProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._outlineProgram.setUniform2f("u_coord_range",e.rangeX,e.rangeY),this._outlineProgram.setUniform1f("u_depth",0),this._outlineProgram.setUniform4fv("u_color",this._color),r.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PrimitiveType */ .WR.LINE_STRIP,0,4);const o=this._getTexture(r,e);o?(r.bindVAO(this._tileInfoVertexArrayObject),r.useProgram(this._tileInfoProgram),r.bindTexture(o,0),this._tileInfoProgram.setUniformMatrix3fv("u_dvsMat3",e.transforms.dvs),this._tileInfoProgram.setUniform1f("u_depth",0),this._tileInfoProgram.setUniform2f("u_coord_ratio",e.rangeX/e.width,e.rangeY/e.height),this._tileInfoProgram.setUniform2f("u_delta",8,8),this._tileInfoProgram.setUniform2f("u_dimensions",o.descriptor.width,o.descriptor.height),r.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),r.bindVAO()):r.bindVAO()}_loadWGLResources(t){if(this._outlineProgram&&this._tileInfoProgram)return;const r=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_6__/* .createProgram */ .r)(t,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T),n=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_6__/* .createProgram */ .r)(t,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .tileInfo */ .H),a=new Int8Array([0,0,1,0,1,1,0,1]),u=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_4__/* .BufferObject */ .g.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STATIC_DRAW,a),m=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_9__/* .VertexArrayObject */ .Z(t,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,{geometry:u}),_=new Int8Array([0,0,1,0,0,1,1,1]),c=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_4__/* .BufferObject */ .g.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STATIC_DRAW,_),d=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_9__/* .VertexArrayObject */ .Z(t,_shaders_TileInfoPrograms_js__WEBPACK_IMPORTED_MODULE_3__/* .tileInfo */ .H.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,{geometry:c});this._outlineProgram=r,this._tileInfoProgram=n,this._outlineVertexArrayObject=m,this._tileInfoVertexArrayObject=d}_getTexture(t,e){if(e.texture&&e.triangleCountReportedInDebug===e.triangleCount)return e.texture;e.triangleCountReportedInDebug=e.triangleCount,this._canvas||(this._canvas=document.createElement("canvas"),this._canvas.setAttribute("id","tileCanvas2d"),this._canvas.setAttribute("width",`${h}`),this._canvas.setAttribute("height",`${b}`),this._canvas.setAttribute("style","display:none"));const r=e.triangleCount;let i=e.key.id;e.triangleCount>0&&(i+=`, ${r}`);const s=this._canvas,o=s.getContext("2d");o.font="24px sans-serif",o.textAlign="left",o.textBaseline="top",o.clearRect(0,0,h,b),r>1e5?(o.fillStyle="red",o.fillRect(0,0,h,b),o.fillStyle="black"):(o.clearRect(0,0,h,b),o.fillStyle="blue"),o.fillText(i,0,0);const n=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_8__/* .TextureDescriptor */ .R;return n.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,n.samplingMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureSamplingMode */ .Cj.NEAREST,n.isImmutable=(0,_webgl_capabilities_isWebGL2Context_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A)(t.gl),e.texture=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_7__/* .Texture */ .g(t,n,s),e.texture}}


/***/ }),

/***/ 46419:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(20035);
/* harmony import */ var _DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(7370);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(95031);
/* harmony import */ var _shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97394);
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89423);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/* harmony import */ var _webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(50122);
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(80976);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class c extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A{constructor(){super(...arguments),this._color=(0,_chunks_vec4f32_js__WEBPACK_IMPORTED_MODULE_0__.f)(1,0,0,1),this._initialized=!1}dispose(){this._solidProgram&&(this._solidProgram.dispose(),this._solidProgram=null),this._solidVertexArrayObject&&(this._solidVertexArrayObject.dispose(),this._solidVertexArrayObject=null)}prepareState({context:e}){e.setDepthWriteEnabled(!1),e.setDepthTestEnabled(!1),e.setStencilTestEnabled(!0),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!1),e.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .StencilOperation */ .eA.REPLACE),e.setStencilWriteMask(255)}draw(e,r){const{context:t,requestRender:s,allowDelayedRender:i}=e;this._initialized||this._initialize(t),!i||null==s||this._solidProgram.compiled?(t.setStencilFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Face */ .Y7.FRONT_AND_BACK,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .CompareFunction */ .MT.GREATER,r.stencilRef,255),t.bindVAO(this._solidVertexArrayObject),t.useProgram(this._solidProgram),this._solidProgram.setUniformMatrix3fv("u_dvsMat3",r.transforms.dvs),this._solidProgram.setUniform2fv("u_coord_range",[r.rangeX,r.rangeY]),this._solidProgram.setUniform1f("u_depth",0),this._solidProgram.setUniform4fv("u_color",this._color),t.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .PrimitiveType */ .WR.TRIANGLE_STRIP,0,4),t.bindVAO()):s()}_initialize(e){if(this._initialized)return!0;const t=(0,_webgl_ProgramTemplate_js__WEBPACK_IMPORTED_MODULE_5__/* .createProgram */ .r)(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T);if(!t)return!1;const o=new Int8Array([0,0,1,0,0,1,1,1]),a=_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__/* .BufferObject */ .g.createVertex(e,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .Usage */ ._U.STATIC_DRAW,o),l=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_6__/* .VertexArrayObject */ .Z(e,_shaders_BackgroundPrograms_js__WEBPACK_IMPORTED_MODULE_2__/* .background */ .T.attributes,_DefaultVertexAttributeLayouts_js__WEBPACK_IMPORTED_MODULE_1__/* .Pos2b */ .Pd,{geometry:a});return this._solidProgram=t,this._solidVertexArrayObject=l,this._initialized=!0,!0}}


/***/ }),

/***/ 67095:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _WGLBrush_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(95031);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(59601);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class v extends _WGLBrush_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A{constructor(){super(...arguments),this._computeDesc=new Map}prepareState({context:t},e){e&&e.includes("hittest")?t.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE):t.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .BlendFactor */ .dn.ONE_MINUS_SRC_ALPHA),t.setBlendingEnabled(!0),t.setColorMask(!0,!0,!0,!0),t.setStencilWriteMask(0),t.setStencilTestEnabled(!0)}draw(t,e,i){const s=this.getGeometryType();e.commit(t);const o=e.getGeometry(s);null!=o&&(t.timeline.begin(this.name),t.attributeView.bindTextures(t.context),t.context.setStencilFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .CompareFunction */ .MT.EQUAL,e.stencilRef,255),o.forEachCommand((s=>{const o=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_1__/* .MaterialKeyBase */ .ar.load(s.materialKey).symbologyType;this.supportsSymbology(o)&&this.drawGeometry(t,e,s,i)})))}_setSharedUniforms(n,u,l){const{displayLevel:m,pixelRatio:v,state:f,passOptions:p}=u;null!=p&&"hittest"===p.type&&(n.setUniform2fv("u_hittestPos",p.position),n.setUniform1f("u_hittestDist",p.distance)),n.setUniform1f("u_pixelRatio",v),n.setUniformMatrix3fv("u_tileMat3",l.transforms.tileMat3),n.setUniformMatrix3fv("u_viewMat3",f.viewMat3),n.setUniformMatrix3fv("u_dvsMat3",l.transforms.dvs),n.setUniformMatrix3fv("u_displayViewMat3",f.displayViewMat3),n.setUniform1f("u_currentZoom",Math.floor(m*_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .minMaxZoomPrecisionFactor */ .fq)),n.setUniform1i("u_attributeTextureSize",u.attributeView.size),n.setUniform1i("u_attributeData0",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData0 */ ["do"]),n.setUniform1i("u_attributeData1",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData1 */ .k2),n.setUniform1i("u_attributeData2",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData2 */ .rE),n.setUniform1i("u_attributeData3",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData3 */ .yg),n.setUniform1i("u_attributeData4",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData4 */ .rZ),n.setUniform1i("u_attributeData5",_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .textureBindingAttributeData5 */ .kW)}_setSizeVVUniforms(t,e,i,s){if(t.vvSizeMinMaxValue&&e.setUniform4fv("u_vvSizeMinMaxValue",i.vvSizeMinMaxValue),t.vvSizeScaleStops&&e.setUniform1f("u_vvSizeScaleStopsValue",i.vvSizeScaleStopsValue),t.vvSizeFieldStops){const t=i.getSizeVVFieldStops(s.key.level);null!=t&&(e.setUniform1fv("u_vvSizeFieldStopsValues",t.values),e.setUniform1fv("u_vvSizeFieldStopsSizes",t.sizes))}t.vvSizeUnitValue&&e.setUniform1f("u_vvSizeUnitValueWorldToPixelsRatio",i.vvSizeUnitValueToPixelsRatio)}_setColorAndOpacityVVUniforms(t,e,i){t.vvColor&&(e.setUniform1fv("u_vvColorValues",i.vvColorValues),e.setUniform4fv("u_vvColors",i.vvColors)),t.vvOpacity&&(e.setUniform1fv("u_vvOpacityValues",i.vvOpacityValues),e.setUniform1fv("u_vvOpacities",i.vvOpacities))}_setRotationVVUniforms(t,e,i){t.vvRotation&&e.setUniform1f("u_vvRotationType","geographic"===i.vvMaterialParameters.vvRotationType?0:1)}_getTriangleDesc(t,e,i=["a_pos"]){const s=e.bufferLayouts.geometry,o=i.map((t=>s.findIndex((e=>e.name===t)))),a=`${t}-${o.join("-")}`;let r=this._computeDesc.get(a);if(!r){const t=e.strides,i=e.strides.geometry,n=new Map(e.attributes),u=s.map((t=>({...t}))),l=Math.max(...e.attributes.values()),m={geometry:u};let v=0;for(const e of o){const t=s[e];m.geometry.push({count:t.count,name:t.name+"1",divisor:t.divisor,normalized:t.normalized,offset:i+t.offset,stride:i,type:t.type}),m.geometry.push({count:t.count,name:t.name+"2",divisor:t.divisor,normalized:t.normalized,offset:2*i+t.offset,stride:i,type:t.type}),n.set(t.name+"1",l+ ++v),n.set(t.name+"2",l+ ++v)}r={bufferLayouts:m,attributes:n,strides:t},this._computeDesc.set(a,r)}return r}}


/***/ }),

/***/ 74373:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79432);
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(38403);
/* harmony import */ var _WGLGeometryBrush_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(67095);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(59601);
/* harmony import */ var _techniques_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(97025);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l={shader:"materials/icon",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.SHORT},{location:1,name:"a_vertexOffset",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.SHORT},{location:2,name:"a_texCoords",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]};class m extends _WGLGeometryBrush_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A{dispose(){}getGeometryType(){return _enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLGeometryType */ .ZG.MARKER}supportsSymbology(t){return t!==_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLSymbologyType */ .w4.HEATMAP&&t!==_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLSymbologyType */ .w4.PIE_CHART}drawGeometry(t,e,a,i){const{context:m,painter:u,rendererInfo:d,state:c,passOptions:p,requestRender:y,allowDelayedRender:_}=t,E=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_3__/* .MarkerMaterialKey */ .PH.load(a.materialKey),f=(0,_techniques_utils_js__WEBPACK_IMPORTED_MODULE_4__/* .getTechniqueFromMaterialKey */ .JW)(E.data),S=null!=p&&"hittest"===p.type,{shader:N,vertexLayout:T,hittestAttributes:g}=f.programSpec??l;let x=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PrimitiveType */ .WR.TRIANGLES,R=(0,_Utils_js__WEBPACK_IMPORTED_MODULE_1__/* .createProgramDescriptor */ .ES)(E.data,T);S&&(R=this._getTriangleDesc(a.materialKey,R,g),x=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PrimitiveType */ .WR.POINTS);const{attributes:h,bufferLayouts:U}=R,A=u.materialManager.getMaterialProgram(t,E,N,h,i);if(_&&null!=y&&!A.compiled)return void y();m.useProgram(A),E.textureBinding&&u.textureManager.bindTextures(m,A,E,!0),this._setSharedUniforms(A,t,e);const O=E.vvRotation?c.displayViewMat3:c.displayMat3;A.setUniformMatrix3fv("u_displayMat3",O),this._setSizeVVUniforms(E,A,d,e),this._setColorAndOpacityVVUniforms(E,A,d),this._setRotationVVUniforms(E,A,d);const G=a.target.getVAO(m,U,h,S);let I=a.indexCount,M=a.indexFrom*Uint32Array.BYTES_PER_ELEMENT;S&&(I/=3,M/=3),m.bindVAO(G),this._drawMarkers(t,e,A,x,I,M,S),m.bindVAO(null)}_drawMarkers(t,e,o,a,r,n,s){t.context.drawElements(a,r,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT,n)}}


/***/ }),

/***/ 83253:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   IG: () => (/* binding */ r),
/* harmony export */   Nm: () => (/* binding */ o),
/* harmony export */   cz: () => (/* binding */ t),
/* harmony export */   tb: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(55429);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r(n,r=0,t=!1){const o=n[r+3];return n[r]*=o,n[r+1]*=o,n[r+2]*=o,t||(n[r+3]*=255),n}function t(r){if(!r)return 0;const{r:t,g:o,b:u,a:i}=r;return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .i8888to32 */ .Ss)(t*i,o*i,u*i,255*i)}function o(r){if(!r)return 0;const[t,o,u,i]=r;return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__/* .i8888to32 */ .Ss)(t*(i/255),o*(i/255),u*(i/255),i)}function u(n,r,t=0){if(null==r)return n[t]=0,n[t+1]=0,n[t+2]=0,void(n[t+3]=0);const{r:o,g:u,b:i,a:c}=r;n[t]=o*c/255,n[t+1]=u*c/255,n[t+2]=i*c/255,n[t+3]=c}


/***/ }),

/***/ 9072:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   z: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(43556);
/* harmony import */ var _FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(66188);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=2147483647;class r{constructor(t){this._head=t,this._cursor=t}static from(t,e=0,s=t.byteLength/i.BYTES_PER_RECORD-e){const _=new i(new Int32Array(t,e*i.BYTES_PER_RECORD,s*i.ELEMENTS_PER_RECORD));return new r(_)}size(){let t=this._cursor,e=0;for(;t;)e+=t.size(),t=t._link;return e}get id(){return this._cursor.id}set id(t){this._cursor.id=t}get materialKey(){return this._cursor.materialKey}set materialKey(t){this._cursor.materialKey=t}get insertAfter(){return this._cursor.insertAfter}get indexFrom(){return this._cursor.indexFrom}set indexFrom(t){this._cursor.indexFrom=t}get indexCount(){return this._cursor.indexCount}set indexCount(t){this._cursor.indexCount=t}get vertexFrom(){return this._cursor.vertexFrom}set vertexFrom(t){this._cursor.vertexFrom=t}get vertexCount(){return this._cursor.vertexCount}set vertexCount(t){this._cursor.vertexCount=t}get sortKey(){return this._cursor.sortKey}set sortKey(t){this._cursor.sortKey=t}get index(){return this._cursor._indexStart+this._cursor._index}seekIndex(t){let e=t;for(this._cursor=this._head;this._cursor;){const t=this._cursor.size();if(e<t)return this._cursor._index=e,!0;e-=t,this._cursor=this._cursor._link}return!1}forEach(t){const e=this.getCursor();for(;e.next();)t(e)}link(t){if(!this._head)return void(this._head=t._head);let e=this._head;for(;e._link;)e=e._link;e._link=t._head,e._link._indexStart=e._indexStart+e.size()}getCursor(){return this.copy()}getDrawInfo(t,s){return new _FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__/* .FeatureDisplayListInfo */ .L(t,s,this.materialKey,this.indexFrom,this.indexCount)}lookup(t){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(t);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor}copy(){const t=new r(this._head?.copy());if(!t._head)return t;let e=t._head,s=t._head._link;for(;s;)e._link=s.copy(),e=s,s=e._link;return t}next(){return!!this._cursor&&(!!this._cursor.next()||!!this._cursor._link&&(this._cursor=this._cursor._link,this.next()))}peekId(){return this._cursor.peekId()??this._cursor._link.peekId()}delete(t){let e=this._head,s=null;for(;e;){if(e.delete(t))return e.isEmpty()&&(null!=s&&(s._link=e._link),e===this._head&&(this._head=e._link),e===this._cursor&&(this._cursor=e._link)),!0;s=e,e=e._link}return!1}}r.ELEMENTS_PER_RECORD=_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .displayRecordIntPerElement */ .cR,r.BYTES_PER_RECORD=r.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;class i{constructor(t){this._link=null,this._index=-1,this._indexStart=0,this._packedRecordsF32=null,this._deletedCount=0,this._offsets={instance:null},this._packedRecords=t}static from(t,e=0,s=t.byteLength/this.BYTES_PER_RECORD-e){return new i(new Int32Array(t,e*this.BYTES_PER_RECORD,s*this.ELEMENTS_PER_RECORD))}delete(t){const e=this._index,r=this.lookup(t);if(r)for(this.id=s,++this._deletedCount;this.next()&&this.id===t;)this.id=s,++this._deletedCount;return this._index=e,r}isEmpty(){return this._deletedCount===this.size()}link(t){this._link?this._link.link(t):this._link=t}lookup(t){if(null==this._offsets.instance){this._offsets.instance=new Map;const t=this.copy();t._index=-1;let e=0;for(;t.next();)t.id!==e&&(this._offsets.instance.set(t.id,t._index),e=t.id)}if(!this._offsets.instance.has(t))return!1;const e=this._index;return this._index=this._offsets.instance.get(t),this.id!==s||(this._index=e,!1)}get id(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD]}set id(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD]=t}get materialKey(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+1]}set materialKey(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+1]=t}get insertAfter(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+2]}get indexFrom(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+3]}set indexFrom(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+3]=t}get indexCount(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+4]}set indexCount(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+4]=t}get vertexFrom(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+5]}set vertexFrom(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+5]=t}get vertexCount(){return this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+6]}set vertexCount(t){this._packedRecords[this._index*i.ELEMENTS_PER_RECORD+6]=t}get sortKey(){return this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*i.ELEMENTS_PER_RECORD+7]}set sortKey(t){this._packedRecordsF32||(this._packedRecordsF32=new Float32Array(this._packedRecords.buffer)),this._packedRecordsF32[this._index*i.ELEMENTS_PER_RECORD+7]=t}get index(){return this._index}size(){return this._packedRecords.length/i.ELEMENTS_PER_RECORD}next(){for(;++this._index<this.size()&&this.id===s;);return this._index<this.size()}peekId(){const t=(this._index+1)*i.ELEMENTS_PER_RECORD;return t>=this._packedRecords.length?0:this._packedRecords[t]}getCursor(){return this.copy()}copy(){const t=new i(this._packedRecords);return t._indexStart=this._indexStart,t._link=this._link,t._index=this._index,t._offsets=this._offsets,t._deletedCount=this._deletedCount,t}}i.ELEMENTS_PER_RECORD=_definitions_js__WEBPACK_IMPORTED_MODULE_0__/* .displayRecordIntPerElement */ .cR,i.BYTES_PER_RECORD=i.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;


/***/ }),

/***/ 93540:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   B: () => (/* binding */ t),
/* harmony export */   P: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(a){if(this.next=null,!Array.isArray(a))return void(this.data=a);this.data=a[0];let e=this;for(let n=1;n<a.length;n++)e.next=new t([a[n]]),e=e.next}*values(){let t=this;for(;t;)yield t.data,t=t.next}forEach(t){let a=this;for(;a;)t(a.data),a=a.next}find(t){return t(this.data)?this:this.next?.find(t)}max(t,a=this){const e=t(this.data)>t(a.data)?this:a;return this.next?this.next.max(t,e):e}remove(t,a=null){return this===t?a?(a.next=this.next,a):this.next:this.next?.remove(t,this)??null}get last(){return this.next?this.next.last:this}}class a{constructor(a){this._head=null,null!=a&&(this._head=new t(a))}get head(){return this._head}maxAvailableSpace(){if(null==this._head)return 0;const t=this._head.max((t=>t.end-t.start));return t.data.end-t.data.start}firstFit(t){if(null==this._head)return null;let a=null,e=this._head;for(;e;){const n=e.data.end-e.data.start;if(n===t)return a?a.next=e.next:this._head=e.next,e.data.start;if(n>t){const a=e.data.start;return e.data.start+=t,a}a=e,e=e.next}return null}free(a,e){const n=a+e;if(null==this._head){const e=new t({start:a,end:n});return void(this._head=e)}if(n<=this._head.data.start){if(n===this._head.data.start)return void(this._head.data.start-=e);const r=new t({start:a,end:n});return r.next=this._head,void(this._head=r)}let r=this._head,s=r.next;for(;s;){if(s.data.start>=n){if(r.data.end===a){if(r.data.end+=e,r.data.end===s.data.start){const t=s.data.end-s.data.start;return r.data.end+=t,void(r.next=s.next)}return}if(s.data.start===n)return void(s.data.start-=e);const d=new t({start:a,end:n});return d.next=r.next,void(r.next=d)}r=s,s=s.next}if(a===r.data.end)return void(r.data.end+=e);const d=new t({start:a,end:n});r.next=d}}


/***/ }),

/***/ 43556:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $U: () => (/* binding */ ee),
/* harmony export */   CQ: () => (/* binding */ c),
/* harmony export */   CR: () => (/* binding */ M),
/* harmony export */   C_: () => (/* binding */ te),
/* harmony export */   Cp: () => (/* binding */ N),
/* harmony export */   DY: () => (/* binding */ w),
/* harmony export */   Fz: () => (/* binding */ ue),
/* harmony export */   Gh: () => (/* binding */ $),
/* harmony export */   Hi: () => (/* binding */ a),
/* harmony export */   KM: () => (/* binding */ V),
/* harmony export */   LH: () => (/* binding */ z),
/* harmony export */   LY: () => (/* binding */ X),
/* harmony export */   MJ: () => (/* binding */ we),
/* harmony export */   Nb: () => (/* binding */ Q),
/* harmony export */   O7: () => (/* binding */ R),
/* harmony export */   Oe: () => (/* binding */ K),
/* harmony export */   PT: () => (/* binding */ pe),
/* harmony export */   Pq: () => (/* binding */ B),
/* harmony export */   Qb: () => (/* binding */ qe),
/* harmony export */   Sh: () => (/* binding */ U),
/* harmony export */   Tv: () => (/* binding */ i),
/* harmony export */   Vx: () => (/* binding */ le),
/* harmony export */   X3: () => (/* binding */ W),
/* harmony export */   Xx: () => (/* binding */ ke),
/* harmony export */   YS: () => (/* binding */ D),
/* harmony export */   YV: () => (/* binding */ m),
/* harmony export */   Yw: () => (/* binding */ q),
/* harmony export */   ZX: () => (/* binding */ fe),
/* harmony export */   _j: () => (/* binding */ ce),
/* harmony export */   aS: () => (/* binding */ P),
/* harmony export */   bg: () => (/* binding */ h),
/* harmony export */   c5: () => (/* binding */ _),
/* harmony export */   cR: () => (/* binding */ de),
/* harmony export */   cn: () => (/* binding */ ge),
/* harmony export */   "do": () => (/* binding */ E),
/* harmony export */   dx: () => (/* binding */ S),
/* harmony export */   eG: () => (/* binding */ b),
/* harmony export */   fq: () => (/* binding */ me),
/* harmony export */   g0: () => (/* binding */ Y),
/* harmony export */   hA: () => (/* binding */ xe),
/* harmony export */   hM: () => (/* binding */ ae),
/* harmony export */   ij: () => (/* binding */ n),
/* harmony export */   iw: () => (/* binding */ be),
/* harmony export */   jM: () => (/* binding */ ne),
/* harmony export */   ju: () => (/* binding */ l),
/* harmony export */   k2: () => (/* binding */ F),
/* harmony export */   kW: () => (/* binding */ J),
/* harmony export */   kx: () => (/* binding */ je),
/* harmony export */   mg: () => (/* binding */ re),
/* harmony export */   nW: () => (/* binding */ Ae),
/* harmony export */   ni: () => (/* binding */ ye),
/* harmony export */   qM: () => (/* binding */ t),
/* harmony export */   r1: () => (/* binding */ ze),
/* harmony export */   rE: () => (/* binding */ G),
/* harmony export */   rZ: () => (/* binding */ I),
/* harmony export */   ue: () => (/* binding */ C),
/* harmony export */   vN: () => (/* binding */ O),
/* harmony export */   vd: () => (/* binding */ L),
/* harmony export */   xB: () => (/* binding */ ve),
/* harmony export */   yg: () => (/* binding */ H),
/* harmony export */   yv: () => (/* binding */ se)
/* harmony export */ });
/* unused harmony exports angleFactor256, attributeDataDd0, attributeStoreTextureSize, bufferDataMinimumSize, bufferDataPoolSize, collisionBoxPadding, collisionBucketSize, collisionEarlyRejectBucketSize, collisionMaxZoomDelta, collisionPlacementPadding, collisionTileBoxSize, debugLabels, enableEarlyLabelDiscard, extrudeScale, heuristicGlyphsPerFeature, heuristicGlyphsPerLine, maxGpuUploadsPerFrame, rasterTileSize, webglMaxInnerStops, webglMaxStops */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=8,r=e-2,t=1e-30,o=64,a=4294967295,c=512,d=256,f=(/* unused pure expression or super */ null && (256/360)),h=128,i=511,m=16777216,s=(/* unused pure expression or super */ null && (!1)),p=128,l=8,n=10,w=29,x=1,g=16,j=16,k=c/p,u=8,v=50,y=10,b=24,q=8,z={metrics:{width:15,height:17,left:0,top:-7,advance:14}},A=1024,B=0,C=0,D=0,E=1,F=2,G=3,H=4,I=5,J=6,K=12,L=5,M=6,N=5,O=6,P=0,Q=1,R=2,S=3,T=3,U=4,V=2,W=1,X=2,Y=4,Z=(/* unused pure expression or super */ null && (!1)),$=1.05,_=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A)("featurelayer-force-marker-text-draw-order")?.5:3,ee=5,re=6,te=1.15,oe=2,ae=2,ce=128-2*ae,de=8,fe=500,he=4,ie=128,me=10,se=1024,pe=2,le=0,ne=1,we=4,xe=8,ge=16,je=4,ke=1,ue=4,ve=8,ye=32,be=64,qe=128,ze=4,Ae=2;


/***/ }),

/***/ 25586:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   M: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(){this.name=this.constructor.name}createOptions(t,r){return null}}


/***/ }),

/***/ 25024:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/* harmony import */ var _parameters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17746);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41746);
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6940);
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(45758);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient");function a(o,i){i.fillColor[0]=o.color.r/255,i.fillColor[1]=o.color.g/255,i.fillColor[2]=o.color.b/255,i.fillColor[3]=o.color.a,o.haloColor?(i.outlineColor[0]=o.haloColor.r/255,i.outlineColor[1]=o.haloColor.g/255,i.outlineColor[2]=o.haloColor.b/255,i.outlineColor[3]=o.haloColor.a):(i.outlineColor[0]=i.fillColor[0],i.outlineColor[1]=i.fillColor[1],i.outlineColor[2]=i.fillColor[2],i.outlineColor[3]=i.fillColor[3]),i.fillColor[3]*=o.fillOpacity,i.outlineColor[3]*=o.haloOpacity,i.fillColor[0]*=i.fillColor[3],i.fillColor[1]*=i.fillColor[3],i.fillColor[2]*=i.fillColor[3],i.outlineColor[0]*=i.outlineColor[3],i.outlineColor[1]*=i.outlineColor[3],i.outlineColor[2]*=i.outlineColor[3],i.outlineWidth=_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outlineWidth,i.outerHaloWidth=_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outerHaloWidth,i.innerHaloWidth=_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.innerHaloWidth,i.outlinePosition=_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outlinePosition}const u=[0,0,0,0];class d{constructor(){this._convertedHighlightOptions={fillColor:[.2*.75,.6*.75,.675,.75],outlineColor:[.2*.9,.54,.81,.9],outlinePosition:_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outlinePosition,outlineWidth:_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outlineWidth,innerHaloWidth:_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.innerHaloWidth,outerHaloWidth:_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .highlightSizing */ .No.outerHaloWidth},this._shadeTexChanged=!0,this._texelData=new Uint8Array(4*_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .shadeTextureSize */ .Ci),this._minMaxDistance=[0,0]}setHighlightOptions(o){const i=this._convertedHighlightOptions;a(o,i);const t=i.outlinePosition-i.outlineWidth/2-i.outerHaloWidth,r=i.outlinePosition-i.outlineWidth/2,n=i.outlinePosition+i.outlineWidth/2,h=i.outlinePosition+i.outlineWidth/2+i.innerHaloWidth,d=Math.sqrt(Math.PI/2)*_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .sigma */ .aY,C=Math.abs(t)>d?Math.round(10*(Math.abs(t)-d))/10:0,f=Math.abs(h)>d?Math.round(10*(Math.abs(h)-d))/10:0;let g;C&&!f?s.error("The outer rim of the highlight is "+C+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!C&&f?s.error("The inner rim of the highlight is "+f+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):C&&f&&s.error("The highlight is "+Math.max(C,f)+"px away from the edge of the feature; consider reducing some width values.");const c=[void 0,void 0,void 0,void 0];function m(o,i,t){c[0]=(1-t)*o[0]+t*i[0],c[1]=(1-t)*o[1]+t*i[1],c[2]=(1-t)*o[2]+t*i[2],c[3]=(1-t)*o[3]+t*i[3]}const{_texelData:p}=this;for(let l=0;l<_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .shadeTextureSize */ .Ci;++l)g=t+l/(_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .shadeTextureSize */ .Ci-1)*(h-t),g<t?(c[0]=0,c[1]=0,c[2]=0,c[3]=0):g<r?m(u,i.outlineColor,(g-t)/(r-t)):g<n?[c[0],c[1],c[2],c[3]]=i.outlineColor:g<h?m(i.outlineColor,i.fillColor,(g-n)/(h-n)):[c[0],c[1],c[2],c[3]]=i.fillColor,p[4*l]=255*c[0],p[4*l+1]=255*c[1],p[4*l+2]=255*c[2],p[4*l+3]=255*c[3];this._minMaxDistance[0]=t,this._minMaxDistance[1]=h,this._shadeTexChanged=!0}applyHighlightOptions(o,t){if(!this._shadeTex){const i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureDescriptor */ .R;i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .TextureWrapMode */ .pF.CLAMP_TO_EDGE,i.width=_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .shadeTextureSize */ .Ci,i.height=1,this._shadeTex=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__/* .Texture */ .g(o,i)}this._shadeTexChanged&&(this._shadeTex.updateData(0,0,0,_parameters_js__WEBPACK_IMPORTED_MODULE_2__/* .shadeTextureSize */ .Ci,1,this._texelData),this._shadeTexChanged=!1),o.bindTexture(this._shadeTex,_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .textureBindingHighlight1 */ .CR),t.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose(),this._shadeTex=null}}


/***/ }),

/***/ 17746:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ci: () => (/* binding */ n),
/* harmony export */   HQ: () => (/* binding */ t),
/* harmony export */   No: () => (/* binding */ e),
/* harmony export */   XK: () => (/* binding */ i),
/* harmony export */   aY: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=1,t=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1],i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n=256,e={outlineWidth:1.3,outerHaloWidth:.4,innerHaloWidth:.4,outlinePosition:0};


/***/ }),

/***/ 79432:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Be: () => (/* binding */ _),
/* harmony export */   Js: () => (/* binding */ I),
/* harmony export */   S5: () => (/* binding */ T),
/* harmony export */   ZG: () => (/* binding */ E),
/* harmony export */   q0: () => (/* binding */ A),
/* harmony export */   rU: () => (/* binding */ L),
/* harmony export */   w4: () => (/* binding */ S)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var E,T,I,L,A,_,S;!function(E){E[E.FILL=0]="FILL",E[E.LINE=1]="LINE",E[E.MARKER=2]="MARKER",E[E.TEXT=3]="TEXT",E[E.LABEL=4]="LABEL"}(E||(E={})),function(E){E[E.NONE=0]="NONE",E[E.MAP=1]="MAP",E[E.LABEL=2]="LABEL",E[E.LABEL_ALPHA=4]="LABEL_ALPHA",E[E.HITTEST=8]="HITTEST",E[E.HIGHLIGHT=16]="HIGHLIGHT",E[E.CLIP=32]="CLIP",E[E.DEBUG=64]="DEBUG",E[E.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(T||(T={})),function(E){E[E.SIZE=0]="SIZE",E[E.COLOR=1]="COLOR",E[E.OPACITY=2]="OPACITY",E[E.ROTATION=3]="ROTATION"}(I||(I={})),function(E){E[E.NONE=0]="NONE",E[E.OPACITY=1]="OPACITY",E[E.COLOR=2]="COLOR",E[E.ROTATION=4]="ROTATION",E[E.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",E[E.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",E[E.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",E[E.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(L||(L={})),function(E){E[E.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",E[E.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",E[E.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",E[E.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(A||(A={})),function(E){E[E.SPRITE=0]="SPRITE",E[E.GLYPH=1]="GLYPH"}(_||(_={})),function(E){E[E.DEFAULT=0]="DEFAULT",E[E.SIMPLE=1]="SIMPLE",E[E.DOT_DENSITY=2]="DOT_DENSITY",E[E.OUTLINE_FILL=3]="OUTLINE_FILL",E[E.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",E[E.HEATMAP=5]="HEATMAP",E[E.PIE_CHART=6]="PIE_CHART"}(S||(S={}));


/***/ }),

/***/ 75625:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   J: () => (/* binding */ e),
/* harmony export */   p: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96274);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,o){let r;if("string"==typeof e)r=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__/* .numericHash */ .Wm)(e+`-seed(${o})`);else{let t=12;r=e^o;do{r=107*(r>>8^r)+t|0}while(0!=--t)}return(1+r/(1<<31))/2}function o(t){return Math.floor(e(t,r)*n)}const r=53290320,n=10;


/***/ }),

/***/ 59601:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A1: () => (/* binding */ A),
/* harmony export */   Fb: () => (/* binding */ O),
/* harmony export */   K_: () => (/* binding */ w),
/* harmony export */   PH: () => (/* binding */ N),
/* harmony export */   Zl: () => (/* binding */ f),
/* harmony export */   ar: () => (/* binding */ U),
/* harmony export */   dZ: () => (/* binding */ Z),
/* harmony export */   ir: () => (/* binding */ P),
/* harmony export */   q7: () => (/* binding */ b),
/* harmony export */   r9: () => (/* binding */ C),
/* harmony export */   tq: () => (/* binding */ _)
/* harmony export */ });
/* unused harmony export isSimpleSymbology */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _alignmentUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(22610);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79432);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t,e,s){const n=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_FIELD_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_MINMAX_VALUE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_SCALE_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_UNIT_VALUE,o=(e&(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget */ .q0.FIELD_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget */ .q0.MINMAX_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget */ .q0.SCALE_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVTarget */ .q0.UNIT_TARGETS_OUTLINE))>>>4;return t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LINE&&s.isOutline||t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.FILL&&_(s.symbologyType)?n&o:n&~o}const o=0,v=8,l=7,h=8,S=11,u=11,p=12,c=13,y=14,V=15,d=16,g=17,T=18,m=19,z=20,E=21,L=26,M=Object.keys(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4).filter((t=>"number"==typeof _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4[t])).reduce(((t,e)=>({...t,[e]:_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4[e]})),{});function I(t){return t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.SIMPLE||t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.OUTLINE_FILL_SIMPLE}function _(t){return t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.OUTLINE_FILL||t===_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.OUTLINE_FILL_SIMPLE}function b(t){return I(t.symbologyType)}function O(t){return _(t.symbologyType)}function f(t,e){switch(t){case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.FILL:return w.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LINE:return C.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.MARKER:return N.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.TEXT:return P.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LABEL:return Z.from(e);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function A(t){switch(U.load(t).geometryType){case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.MARKER:return new N(t);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.FILL:return new w(t);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LINE:return new C(t);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.TEXT:return new P(t);case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LABEL:return new Z(t)}}class U{static load(t){const e=this.shared;return e.data=t,e}constructor(t){this._data=0,this._data=t}set data(t){this._data=t??0}get data(){return this._data}get geometryType(){return this.bits(h,S)}set geometryType(t){this.setBits(t,h,S)}get mapAligned(){return!!this.bit(z)}set mapAligned(t){this.setBit(z,t)}get sdf(){return!!this.bit(u)}set sdf(t){this.setBit(u,t??!1)}get pattern(){return!!this.bit(p)}set pattern(t){this.setBit(p,t)}get textureBinding(){return this.bits(o,v)}set textureBinding(t){this.setBits(t,o,v)}get symbologyType(){return this.bits(E,L)}set symbologyType(t){this.setBits(t,E,L)}get geometryTypeString(){switch(this.geometryType){case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.FILL:return"fill";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.MARKER:return"marker";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LINE:return"line";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.TEXT:return"text";case _enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LABEL:return"label";default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const s=1<<t;e?this._data|=s:this._data&=~s}bit(t){return(this._data&1<<t)>>t}setBits(t,e,s){for(let i=e,a=0;i<s;i++,a++)this.setBit(i,0!=(t&1<<a))}bits(t,e){let s=0;for(let i=t,a=0;i<e;i++,a++)s|=this.bit(i)<<a;return s}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4[this.symbologyType],options:M,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(l&this.textureBinding)}}U.shared=new U(0);const F=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(d)}set vvSizeMinMaxValue(t){this.setBit(d,t)}get vvSizeScaleStops(){return 0!==this.bit(g)}set vvSizeScaleStops(t){this.setBit(g,t)}get vvSizeFieldStops(){return 0!==this.bit(T)}set vvSizeFieldStops(t){this.setBit(T,t)}get vvSizeUnitValue(){return 0!==this.bit(m)}set vvSizeUnitValue(t){this.setBit(m,t)}hasSizeVV(){return this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}hasVV(){return super.hasVV()||this.hasSizeVV()}setVV(t,e){super.setVV(t,e);const s=n(this.geometryType,t,e)&t;this.vvSizeMinMaxValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_SCALE_STOPS)}},x=t=>class extends t{get vvRotation(){return 0!==this.bit(V)}set vvRotation(t){this.setBit(V,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,e){super.setVV(t,e),this.vvRotation=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.ROTATION)}},B=t=>class extends t{get vvColor(){return 0!==this.bit(c)}set vvColor(t){this.setBit(c,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,e){super.setVV(t,e),this.vvColor=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.COLOR)}},R=t=>class extends t{get vvOpacity(){return 0!==this.bit(y)}set vvOpacity(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,e){super.setVV(t,e),this.vvOpacity=!e.isOutline&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.OPACITY)}};class w extends(B(R(F(U)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const{symbologyType:e,vvFlags:a}=t,r=this.load(0);return r.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.FILL,r.symbologyType=e,e!==_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.DOT_DENSITY&&r.setVV(a,t),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}w.shared=new w(0);class N extends(B(R(x(F(U))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const{symbologyType:e,vvFlags:a}=t,r=this.load(0);return r.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.MARKER,r.symbologyType=e,e!==_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLSymbologyType */ .w4.HEATMAP&&r.setVV(a,t),r.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}N.shared=new N(0);class C extends(B(R(F(U)))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LINE,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}C.shared=new C(0);class P extends(B(R(x(F(U))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.TEXT,e.symbologyType=t.symbologyType,e.setVV(t.vvFlags,t),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}P.shared=new P(0);class Z extends(F(U)){static load(t){const e=this.shared;return e.data=t,e}static from(t){const s=this.load(0);return s.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLGeometryType */ .ZG.LABEL,s.symbologyType=t.symbologyType,s.setVV(t.vvFlags,t),s.mapAligned=(0,_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_1__/* .isMapAligned */ .nE)(t.placement),s.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}Z.shared=new Z(0);


/***/ }),

/***/ 82547:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  U: () => (/* binding */ E)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js + 2 modules
var TileInfoView = __webpack_require__(75976);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileKey.js
var TileKey = __webpack_require__(42482);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileQueue.js
var TileQueue = __webpack_require__(75758);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js + 1 modules
var TileStrategy = __webpack_require__(62540);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/heuristics.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=new Map;function t(r,t,c){const{indicesPerRecord:s,multiplier:o,verticesPerRecord:d}=i.get(r);return{recordBytes:c*definitions/* displayRecordIntPerElement */.cR*Uint32Array.BYTES_PER_ELEMENT,indexBytes:o*s*c*Uint32Array.BYTES_PER_ELEMENT,vertexBytes:o*d*c*t}}i.set(enums/* WGLGeometryType */.ZG.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4}),i.set(enums/* WGLGeometryType */.ZG.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8}),i.set(enums/* WGLGeometryType */.ZG.FILL,{multiplier:1,indicesPerRecord:10,verticesPerRecord:10}),i.set(enums/* WGLGeometryType */.ZG.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4}),i.set(enums/* WGLGeometryType */.ZG.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js
var Writer = __webpack_require__(38604);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexDataWriter.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class VertexDataWriter_r{constructor(e,r,i){this._start={index:0,vertex:0};const h=t(e,r,i),c=r/4;this.geometryType=e,this._records=new Writer/* default */.A(Int32Array,h.recordBytes),this._indices=new Writer/* default */.A(Uint32Array,h.indexBytes),this._vertices=new Writer/* default */.A(Uint32Array,h.vertexBytes),this._metrics=new Writer/* default */.A(Float32Array,0),this._strideInt=c}serialize(e){const t=this._records.buffer(),s=this._indices.buffer(),r=this._vertices.buffer(),i=this._metrics.length?this._metrics.buffer():null,h=4*this._strideInt;return e.push(t,s,r),{stride:h,records:t,indices:s,vertices:r,metrics:i}}get strideInt(){return this._strideInt}get recordCount(){return this._records.length/definitions/* displayRecordIntPerElement */.cR}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(e){this._vertices.ensureSize(e)}indexEnsureSize(e){this._indices.ensureSize(e)}recordStart(){this._start.index=this._indices.length,this._start.vertex=this._vertices.length}recordEnd(e,t,s,r,i,h,c,n){this._records.push(e),this._records.push(t??0),this._records.push(s),this._records.push(r),this._records.push(i),this._records.push(h),this._records.push(c),this._records.writeF32(n)}writeIndex(e){this._indices.push(e)}writeVertex(e){this._vertices.push(e)}writeVertexF32(e){this._vertices.writeF32(e)}copyLastFrom(t,s,r){const i=t._records.length-definitions/* displayRecordIntPerElement */.cR,h=t._records.getValue(i),c=t._records.getValue(i+1),n=t._records.getValue(i+2),_=t._records.getValue(i+4),d=t._records.getValue(i+6),o=t._records.getValue(i+7),u=this._vertices.length,l=(t._start.vertex-this._vertices.length)/this._strideInt,g=this._indices.length,p=this.vertexCount;for(let e=t._start.index;e!==t._indices.length;e++){const s=t._indices.getValue(e);this._indices.push(s-l)}for(let e=t._start.vertex;e!==t._vertices.length;e++){const s=t._vertices.getValue(e);this._vertices.push(s)}for(let e=u;e<=this._vertices.length;e+=this._strideInt)this._vertices.i1616Add(e,s,r);this._records.push(h),this._records.push(c),this._records.push(n),this._records.push(g),this._records.push(_),this._records.push(p),this._records.push(d),this._records.push(o)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js
var tileUtils = __webpack_require__(38955);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=1,c=2,o=4,_=8,l=16,d=32,p=64,g=128;function x(e){switch(e){case u:case _:case d:return-1;case c:case p:return 0;case o:case l:case g:return 1}}function f(e){switch(e){case u:case c:case o:return-1;case _:case l:return 0;case d:case p:case g:return 1}}const m=u|_|d,y=o|l|g,w=u|c|o,v=d|p|g;class E{constructor(e,t,r,i,s,n=0){this._hasAggregate=!1,this.hasRecords=!1,this._data={self:new Map,neighbors:new Array},this._version=0,this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,sortKey:0,id:0,materialKey:0,indexStart:0,vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0},this.hint=t,this.tileKey=e,this._hasAggregate=i,this._pixelBufferEnabled=s,this._version=n,this._symbologyType=r}get hasAggregates(){return this._hasAggregate}get hasPixelBufferEnabled(){return this._pixelBufferEnabled}serialize(t){const r=[];return r.push(this._serializeTileVertexData(this.tileKey,this.tileKey,this._data.self)),this._data.neighbors.forEach(((i,s)=>{const n=1<<s,a=x(n),u=f(n),c=(0,tileUtils/* getPow2NeighborKey */.K)(new TileKey/* default */.A(this.tileKey),a,u,t),o=this._serializeTileVertexData(this.tileKey,c.id,i.vertexData);o.message.bufferIds=i.displayIds,r.push(o)})),r}_serializeTileVertexData(e,t,r){const i=new Array;return{message:{tileKeyOrigin:e,tileKey:t,data:{[enums/* WGLGeometryType */.ZG.MARKER]:r.get(enums/* WGLGeometryType */.ZG.MARKER)?.serialize(i),[enums/* WGLGeometryType */.ZG.FILL]:r.get(enums/* WGLGeometryType */.ZG.FILL)?.serialize(i),[enums/* WGLGeometryType */.ZG.LINE]:r.get(enums/* WGLGeometryType */.ZG.LINE)?.serialize(i),[enums/* WGLGeometryType */.ZG.TEXT]:r.get(enums/* WGLGeometryType */.ZG.TEXT)?.serialize(i),[enums/* WGLGeometryType */.ZG.LABEL]:r.get(enums/* WGLGeometryType */.ZG.LABEL)?.serialize(i)},version:this._version},transferList:i}}featureStart(e,t){this._current.insertAfter=e,this._current.sortKey=t}featureEnd(){}recordStart(e,t,r,i){this._current.writer=this._getVertexWriter(r),this._current.overlaps=0,this._current.indexStart=this._current.writer.indexCount,this._current.vertStart=this._current.writer.vertexCount,this._current.bufferingEnabled=i,this._current.id=e,this._current.materialKey=t,this._current.geometryType=r,this._current.isDotDensity=!1,this._current.writer.recordStart()}recordCount(){return this._current.writer.recordCount}vertexCount(){return this._current.writer.vertexCount}indexCount(){return this._current.writer.indexCount}vertexEnsureSize(e){this._current.writer.vertexEnsureSize(e)}indexEnsureSize(e){this._current.writer.indexEnsureSize(e)}vertexBounds(e,t,r,i){this._current.bufferingEnabled&&this._addOverlap(e,t,r,i)}vertexWrite(e){this._current.writer.writeVertex(e)}vertexWriteF32(e){this._current.writer.writeVertexF32(e)}vertexEnd(){}vertexWriter(){return this._current.writer.vertexWriter}indexWrite(e){this._current.writer.writeIndex(e)}indexWriter(){return this._current.writer.indexWriter}metricWriter(){return this._current.writer.metricWriter}metricStart(e,t,r,n,a,h,u,c){this._current.writer=this._getVertexWriter(enums/* WGLGeometryType */.ZG.LABEL);const o=this._current.writer.metricWriter;o.push((0,DisplayId/* getDisplayIdTexel */.Q4)(e)),o.push(t),o.push(r),o.push(n),o.push(a),o.push(h),o.push(u),o.push(c),o.push(255),this._current.metricBoxLenPointer=o.push(0)}metricEnd(){const e=this._current.writer.metricWriter;0===e.getValue(this._current.metricBoxLenPointer)&&e.seek(e.length-10)}metricBoxWrite(e,t,r,i){const s=this._current.writer.metricWriter;s.incr(this._current.metricBoxLenPointer),s.push(0),s.push(0),s.push(e),s.push(t),s.push(r),s.push(i)}recordEnd(){const e=this._current.vertStart,r=this._current.writer.vertexCount-e;if(!r)return!1;this.hasRecords=!0;const i=this._current.indexStart,h=this._current.writer.indexCount-i;if(this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,i,h,e,r,this._current.sortKey),!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===enums/* WGLGeometryType */.ZG.LABEL)return!0;const u=this._current.writer;for(let s=0;s<8;s++){const e=1<<s;if(!!(this._current.overlaps&e)){this._data.neighbors[s]||(this._data.neighbors[s]={vertexData:new Map,displayIds:new Set});const r=this._data.neighbors[s],i=this._current.geometryType;if(!r.vertexData.has(i)){const e=(0,Utils/* getStrides */.jG)(i,this._symbologyType).geometry,s=new VertexDataWriter_r(i,e,definitions/* patchPixelBufferAllocSize */.ZX);r.vertexData.set(i,s)}const h=r.vertexData.get(this._current.geometryType),c=8,o=512*-x(e)*c,_=512*-f(e)*c;h?.copyLastFrom(u,o,_),r.displayIds.add(this._current.id)}}return!0}_addOverlap(e,t,i,s){const n=255^((e<0+i?y:e>=definitions/* tileSize */.CQ-i?m:y|m)|(t<0+s?v:t>=definitions/* tileSize */.CQ-s?w:v|w));this._current.overlaps|=n}_getVertexWriter(e){if(!this._data.self.has(e)){const t=this._data.self,r=(0,Utils/* getStrides */.jG)(e,this._symbologyType).geometry;t.set(e,new VertexDataWriter_r(e,r,this.hint.records))}return this._data.self.get(e)}}


/***/ }),

/***/ 23951:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  K: () => (/* binding */ WGLMeshFactory_a)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/libtess.js
var libtess = __webpack_require__(1918);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat2d.js
var mat2d = __webpack_require__(94734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat2df32.js
var mat2df32 = __webpack_require__(50499);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/color.js
var color = __webpack_require__(83253);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var webgl_enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js
var MaterialKey = __webpack_require__(59601);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/util.js
var util = __webpack_require__(53412);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/segmentUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t,e){return t[e+1]}function i(t){return t.length-1}function r(t){let e=0;for(let s=0;s<i(t);s++)e+=h(t,s);return e}function h(t,e,s=1){const[i,r]=n(t,e);return Math.sqrt(i*i+r*r)*s}class a{constructor(t,e,s,n,i){this._segments=t,this._index=e,this._distance=s,this._xStart=n,this._yStart=i,this._done=!1}static create(t){return new a(t,0,0,t[0][0],t[0][1])}clone(){return new a(this._segments,this._index,this._distance,this.xStart,this.yStart)}equals(t){return this._index===t._index||t._index===this._index-1&&(0===this._distance||1===t._distance)||t._index===this._index+1&&(1===this._distance||0===t._distance)}leq(t){return this._index<t._index||this._index===t._index&&this._distance<=t._distance}geq(t){return this._index>t._index||this._index===t._index&&this._distance>=t._distance}get _segment(){return this._segments[this._index+1]}get angle(){const t=this.dy,e=(0*t+-1*-this.dx)/(1*this.length);let s=Math.acos(e);return t>0&&(s=2*Math.PI-s),s}get xStart(){return this._xStart}get yStart(){return this._yStart}get x(){return this.xStart+this.distance*this.dx}get y(){return this.yStart+this.distance*this.dy}get dx(){return this._segment[0]}get dy(){return this._segment[1]}get xMidpoint(){return this.xStart+.5*this.dx}get yMidpoint(){return this.yStart+.5*this.dy}get xEnd(){return this.xStart+this.dx}get yEnd(){return this.yStart+this.dy}get length(){const{dx:t,dy:e}=this;return Math.sqrt(t*t+e*e)}get remainingLength(){return this.length*(1-this._distance)}get backwardLength(){return this.length*this._distance}get distance(){return this._distance}get done(){return this._done}hasPrev(){return this._index-1>=0}hasNext(){return this._index+1<i(this._segments)}next(){return this.hasNext()?(this._xStart+=this.dx,this._yStart+=this.dy,this._distance=0,this._index+=1,this):null}prev(){return this.hasPrev()?(this._index-=1,this._xStart-=this.dx,this._yStart-=this.dy,this._distance=1,this):(this._done=!0,null)}_seekBackwards(t,e){const s=this.backwardLength;if(t<=s)return this._distance=(s-t)/this.length,this;let n=this.backwardLength;for(;this.prev();){if(n+this.length>t)return this._seekBackwards(t-n);n+=this.length}return this._distance=0,e?this:null}seek(t,e=!1){if(t<0)return this._seekBackwards(Math.abs(t),e);if(t<=this.remainingLength)return this._distance=(this.backwardLength+t)/this.length,this;let s=this.remainingLength;for(;this.next();){if(s+this.length>t)return this.seek(t-s,e);s+=this.length}return this._distance=1,e?this:null}}function d(t,e,s,n=!0){const i=r(t),h=a.create(t),d=i/2;if(!n)return h.seek(d),void s(h.clone(),0,d+0*e,i);const c=Math.max((i-e)/2,0),u=Math.floor(c/e),o=d-u*e;h.seek(o);for(let r=-u;r<=u;r++)h.x<512&&h.x>=0&&h.y<512&&h.y>=0&&s(h.clone(),r,d+r*e,i),h.seek(e)}function c(t,e,s){u(s,e,r(t),a.create(t),0)}function u(t,e,s,n,i){if(s<e)return;const r=n.clone().seek(s/2);if(null==r)return;t(r.clone(),s,i),s=(s-e)/2;const h=r.seek(e/2);u(t,e,s,n,i+1),u(t,e,s,h,i+1)}function segmentUtils_o(t,e){const s=e;for(let n=0;n<t.length;n++){let e=t[n];_(e,s);const i=[];i.push(e[0]);for(let t=1;t<e.length;t++){const[s,n]=e[t-1],[r,h]=e[t],a=Math.round(r-s),d=Math.round(h-n);i.push([a,d])}t[n]=i,e=i}return t}function _(n,i){const r=1e-6;if(i<=0)return;const h=n.length;if(h<3)return;const a=[];let d=0;a.push(0);for(let e=1;e<h;e++)d+=(0,util/* dist */.xg)(n[e],n[e-1]),a.push(d);i=Math.min(i,.2*d);const c=[];c.push(n[0][0]),c.push(n[0][1]);const u=n[h-1][0],o=n[h-1][1],_=(0,util/* sub */.jb)([0,0],n[0],n[1]);(0,util/* normalize */.S8)(_),n[0][0]+=i*_[0],n[0][1]+=i*_[1],(0,util/* sub */.jb)(_,n[h-1],n[h-2]),(0,util/* normalize */.S8)(_),n[h-1][0]+=i*_[0],n[h-1][1]+=i*_[1];for(let t=1;t<h;t++)a[t]+=i;a[h-1]+=i;const l=.5*i;for(let t=1;t<h-1;t++){let e=0,s=0,d=0;for(let h=t-1;h>=0&&!(a[h+1]<a[t]-l);h--){const c=l+a[h+1]-a[t],u=a[h+1]-a[h],o=a[t]-a[h]<l?1:c/u;if(Math.abs(o)<r)break;const _=o*o,g=o*c-.5*_*u,x=o*u/i,f=n[h+1],y=n[h][0]-f[0],k=n[h][1]-f[1];e+=x/g*(f[0]*o*c+.5*_*(c*y-u*f[0])-_*o*u*y/3),s+=x/g*(f[1]*o*c+.5*_*(c*k-u*f[1])-_*o*u*k/3),d+=x}for(let c=t+1;c<h&&!(a[c-1]>a[t]+l);c++){const h=l-a[c-1]+a[t],u=a[c]-a[c-1],o=a[c]-a[t]<l?1:h/u;if(Math.abs(o)<r)break;const _=o*o,g=o*h-.5*_*u,x=o*u/i,f=n[c-1],y=n[c][0]-f[0],k=n[c][1]-f[1];e+=x/g*(f[0]*o*h+.5*_*(h*y-u*f[0])-_*o*u*y/3),s+=x/g*(f[1]*o*h+.5*_*(h*k-u*f[1])-_*o*u*k/3),d+=x}c.push(e/d),c.push(s/d)}c.push(u),c.push(o);for(let t=0,e=0;t<h;t++)n[t][0]=c[e++],n[t][1]=c[e++]}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTextTemplate.js
var WGLTextTemplate = __webpack_require__(109);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const x=Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),L=(t,i="mapview-labeling")=>x.error(new Error/* default */.A(i,t)),S=1,v=0,P=4,w=25;function M(e,t){const o=!!e.minScale&&t.scaleToZoom(e.minScale)||0;return (0,mathUtils/* clamp */.qE)(o,0,25.5)}function Z(e,t){const o=!!e.maxScale&&t.scaleToZoom(e.maxScale)||255;return (0,mathUtils/* clamp */.qE)(o,0,25.5)}function k(e){const t=new Map;return i=>(t.has(i)||t.set(i,e(i)),t.get(i))}const A=k((e=>{let t=0;if(0===e)return 1/0;for(;!(e%2);)t++,e/=2;return t})),B=e=>Math.floor(127*e+127),z=e=>Math.floor(e*definitions/* minMaxZoomPrecisionFactor */.fq),C=e=>Math.round(e*(254/360));class W extends WGLTextTemplate/* default */.A{constructor(e,t,i,r){super(e,i.font?.size,i.haloSize||0,i.font?.size,i.color&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(i.color)||0,i.haloColor&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(i.haloColor)||0,i.horizontalAlignment,i.verticalAlignment,(0,alignmentUtils/* isMapAligned */.nE)(t.labelPlacement)?enums/* Alignment */.C1.MAP:enums/* Alignment */.C1.SCREEN,i.font?.decoration,!1,i.angle||0,i.xoffset,i.yoffset,i.lineWidth,i.lineHeight,null,null,!1,null,null,i.backgroundColor&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(i.backgroundColor),i.borderLineColor&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(i.borderLineColor),i.borderLineSize),this._outLineLabelAngle=0,this._refPlacementPadding=0,this._refPlacementDirX=0,this._refPlacementDirY=0,this._refOffsetX=0,this._refOffsetY=0,this._zoomLevel=0,this.geometryType=webgl_enums/* WGLGeometryType */.ZG.LABEL,this._allowOverrun=t.allowOverrun??!1,this._repeatLabel=t.repeatLabel??!0,this._labelPosition=t.labelPosition??"curved";const n=M(t,r),h=Z(t,r),c=t.labelPlacement,[g,f]=(0,alignmentUtils/* getAlignmentFromPlacement */.fO)(c);this._xAlignD=g,this._yAlignD=f,this._minZoom=n,this._maxZoom=h,this._minBackgroundZoom=n,this._maxBackgroundZoom=h,this._refPlacementPadding=(0,screenUtils/* pt2px */.Lz)(i.haloSize)+definitions/* textPlacementPadding */.Yw,this._repeatLabelDistance=t.repeatLabelDistance?(0,screenUtils/* pt2px */.Lz)(t.repeatLabelDistance):128;const p=MaterialKey/* LabelMaterialKey */.dZ.load(e);p.sdf=!0,this._materialKey=p.data}static fromLabelClass(e,t){if("esriServerLinePlacementCenterAlong"===e.labelPlacement){const t=e.symbol;t.xoffset=0,t.yoffset=0,t.angle=0,t.font.decoration="none"}return new W(e.materialKey,e,e.symbol,t)}get _shapedBox(){return this._shapingInfo.bounds}setZoomLevel(e){this._zoomLevel=e}bindReferenceTemplate(e){let t=(0,alignmentUtils/* getXDirection */.iT)(this._xAlignD),i=(0,alignmentUtils/* getYDirection */.Dy)(this._yAlignD);if(this._refOffsetX=0,this._refOffsetY=0,null==e)return void(this._refSymbolAndPlacementOffset=(0,number/* i8888to32 */.Ss)(0,0,B(t),B(i)));if("circle"===e.boundsType&&(t||i)){const e=Math.sqrt(t*t+i*i);t/=e,i/=e}const o=Math.max(e.height,e.width),r=this._refPlacementPadding*P;this._refSymbolAndPlacementOffset=(0,number/* i8888to32 */.Ss)(r,o,B(t),B(i)),this._referenceSize=o,this._refPlacementDirX=t,this._refPlacementDirY=i,this._refOffsetX=e.xOffset,this._refOffsetY=e.yOffset}_write(e,t){if(null==this._shapingInfo)return;const i=this._shapingInfo,o=t.getDisplayId(),r="esriGeometryPolygon"===t.geometryType?t.readLegacyCentroid():t.readLegacyGeometry();if(r)switch(this._current={out:e,inId:o,inShaping:i,zoomLevel:this._zoomLevel},"esriGeometryPolyline"===t.geometryType&&"curved"===this._labelPosition&&(this._borderLineColor||this._backgroundColor)&&x.warnOnce("TextSymbol properties 'borderLineColor', 'borderLineSize', and 'backgroundColor' are not supported in curved labels"),t.geometryType){case"esriGeometryPolyline":this._placeLineLabels(r);break;case"esriGeometryPoint":case"esriGeometryPolygon":this._placePointLabels(r);break;default:L(`Geometry of type ${t.geometryType} is not supported`)}}_isVisible(e,t){const i=z(this._current.zoomLevel);return z(e)<=i&&i<=z(t)}_placePointLabels(e){const{out:t,inId:i,inShaping:o}=this._current;this._writeGlyphs(t,i,e,o)}_placeLineLabels(e){const t=segmentUtils_o(e.paths,this._current.inShaping.bounds.width),i=this._placeSubdivGlyphs.bind(this),o=(this._shapedBox.width+this._repeatLabelDistance)/(1<<S);for(const r of t)d(r,o,i,this._repeatLabel)}_placeSubdivGlyphs(e,t,i,o){const r=A(t),n=this._shapedBox.width/(1<<S),s=Math.sqrt(this._repeatLabelDistance)/(1<<S),a=Math.min(i,o-i),l=this._current.inShaping.isMultiline?w:Math.log2(a/(s+n/2)),h=0===t?l:Math.min(r,l),c=Math.max(this._minZoom,this._current.zoomLevel+S-h),m=this._current.zoomLevel-c,_=this._shapedBox.width/2*2**m;this._current.inShaping.isMultiline?0===t&&this._placeStraight(e,c):this._allowOverrun&&m<0?this._placeStraightAlong(e,this._minZoom):"parallel"===this._labelPosition?this._placeStraightAlong(e,c):"curved"===this._labelPosition&&this._placeCurved(e,c,_)}_placeStraight(e,t){const{out:i,inId:o,inShaping:r}=this._current,n=Math.ceil(e.angle*(180/Math.PI)%360),s=Math.ceil((e.angle*(180/Math.PI)+180)%360);this._outLineLabelAngle=C(n),this._writeGlyphs(i,o,e,r,t),this._outLineLabelAngle=C(s),this._writeGlyphs(i,o,e,r,t)}_placeCurved(e,t,i){const{out:o,inId:r}=this._current;o.metricStart(r,t,e.x,e.y,0,0,0,0);const n=e.clone(),s=e.angle*(180/Math.PI)%360,a=(e.angle*(180/Math.PI)+180)%360;this._outLineLabelAngle=C(s),this._placeFirst(n,t,1),this._placeBack(e,n,t,i,1),this._placeForward(e,n,t,i,1),this._outLineLabelAngle=C(a),this._placeFirst(n,t,0),this._placeBack(e,n,t,i,0),this._placeForward(e,n,t,i,0),o.metricEnd()}_placeStraightAlong(e,t){const{out:i,inId:o,inShaping:s}=this._current;i.metricStart(o,t,e.x,e.y,0,0,0,0);const a=e.clone(),l=e.angle*(180/Math.PI)%360,h=(e.angle*(180/Math.PI)+180)%360,c=s.glyphs.length>0&&(this._borderLineColor||this._backgroundColor);if(this._maxBackgroundZoom=w,this._minBackgroundZoom=Math.max(t,0),c){const t=MaterialKey/* LabelMaterialKey */.dZ.load(this._materialKey);t.textureBinding=s.glyphs[0].textureBinding;const a=(0,mat2d.b)((0,mat2df32.c)(),-e.angle),[c,m]=s.shapeBackground(a);this._outLineLabelAngle=C(l),i.recordStart(o,t.data,this.geometryType,!0),this._writeBackgroundGeometry(i,o,e,c,m),i.recordEnd(),this._outLineLabelAngle=C(h),i.recordStart(o,t.data,this.geometryType,!0),this._writeBackgroundGeometry(i,o,e,c,m),i.recordEnd()}this._outLineLabelAngle=C(l),this._placeFirst(a,t,1,!0),this._outLineLabelAngle=C(h),this._placeFirst(a,t,0,!0),i.metricEnd()}_placeBack(e,t,i,o,r){const n=e.clone();let s=e.backwardLength+v;for(;n.prev()&&!(s>=o);)this._placeOnSegment(n,t,s,i,-1,r),s+=n.length+v}_placeForward(e,t,i,o,r){const n=e.clone();let s=e.remainingLength+v;for(;n.next()&&!(s>=o);)this._placeOnSegment(n,t,s,i,1,r),s+=n.length+v}_placeFirst(e,t,i,o=!1){const r=e,n=this._current.inShaping,s=n.glyphs,a=this._current.zoomLevel,{out:l,inId:h}=this._current;for(const c of s){const s=c.x>n.bounds.x?i:1-i,m=s*e.remainingLength+(1-s)*e.backwardLength,_=Math.abs(c.x+c.width/2-n.bounds.x),g=Math.max(0,a+Math.log2(_/(m+v))),d=Math.max(t,o?0:g);if(c.maxZoom=w,c.angle=e.angle+(1-i)*Math.PI,c.minZoom=d,this._writeGlyph(l,h,r.x,r.y,c),i&&this._isVisible(c.minZoom,c.maxZoom)){const e=c.bounds;l.metricBoxWrite(e.center[0],e.center[1],e.width,e.height)}}}_placeOnSegment(e,t,i,o,r,n){const s=this._current.inShaping.glyphs,{out:a,inId:l}=this._current,h=this._current.inShaping,c=this._current.zoomLevel,m=e.dx/e.length,_=e.dy/e.length,g={x:e.x+i*-r*m,y:e.y+i*-r*_};for(const d of s){const s=d.x>h.bounds.x?n:1-n;if(!(s&&1===r||!s&&-1===r))continue;const m=Math.abs(d.x+d.width/2-h.bounds.x),_=Math.max(0,c+Math.log2(m/i)-.1),f=Math.max(o,c+Math.log2(m/(i+e.length+v)));if(0!==_&&(d.angle=e.angle+(1-n)*Math.PI,d.minZoom=f,d.maxZoom=_,this._writeGlyph(a,l,g.x,g.y,d),n&&this._isVisible(d.minZoom,d.maxZoom))){const i=d.bounds,o=e.x-t.x,r=e.y-t.y;a.metricBoxWrite(i.center[0]+o,i.center[1]+r,i.width,i.height)}}}_writeGlyphs(e,t,i,o,r=this._minZoom){if(i.x<0||i.x>=512||i.y<0||i.y>=512)return;if(o.glyphs.length>0&&(this._borderLineColor||this._backgroundColor)){const r=MaterialKey/* LabelMaterialKey */.dZ.load(this._materialKey);r.textureBinding=o.glyphs[0].textureBinding,e.recordStart(t,r.data,this.geometryType,!0),this._writeBackgroundGeometry(e,t,i,o.bounds,o.background),e.recordEnd()}const n=i.x+this._refOffsetX,s=i.y-this._refOffsetY;for(const c of o.glyphs)c.minZoom=r,c.maxZoom=this._maxZoom,this._writeGlyph(e,t,n,s,c);const a=this._refPlacementDirX,l=this._refPlacementDirY,h=o.boundsT;e.metricStart(t,r,n,s,a,l,this._referenceSize,this._materialKey),e.metricBoxWrite(h.center[0],h.center[1],h.width,h.height),e.metricEnd()}_writeVertexCommon(e,t,i,o){const r=this._color,n=this._haloColor,s=(0,number/* i8888to32 */.Ss)(0,0,this._size,this._haloSize),a=Math.max(o.minZoom,this._minZoom),l=Math.min(o.maxZoom,this._maxZoom),h=(0,number/* i8888to32 */.Ss)(z(a),z(l),this._outLineLabelAngle,0);e.vertexWrite(i),e.vertexWrite(t),e.vertexWrite(r),e.vertexWrite(n),e.vertexWrite(s),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(h)}_writeBackgroundVertex(e,t,i,o,r,n){const s=(0,number/* i8888to32 */.Ss)(0,0,this._size,this._haloSize),a=(0,number/* i8888to32 */.Ss)(0,0,0,0),l=(0,number/* i8888to32 */.Ss)(z(this._minBackgroundZoom),z(this._maxBackgroundZoom),this._outLineLabelAngle,1);e.vertexWrite(i),e.vertexWrite(t),e.vertexWrite(o),e.vertexWrite(a),e.vertexWrite(s),e.vertexWrite(this._refSymbolAndPlacementOffset),e.vertexWrite(l),e.vertexWrite(r),e.vertexWrite(n),e.vertexEnd()}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate.js
var WGLMarkerTemplate = __webpack_require__(11560);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTemplateStore.js + 12 modules
var WGLTemplateStore = __webpack_require__(32964);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/WGLMeshFactory.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLMeshFactory_a{constructor(e,t,r){this._geometryType=e,this._idField=t,this._templateStore=r}update(e,t){null!=e.mesh.labels&&(this._labelTemplates=this._createLabelTemplates(e.mesh.labels,t)),this._schema=e}_createLabelTemplates(e,t){const r=new Map;if("simple"===e.type){for(const s of e.classes){const e=W.fromLabelClass(s,t);r.set(s.index,e)}return r}for(const s in e.classes){const i=e.classes[s];for(const e of i){const s=W.fromLabelClass(e,t);r.set(e.index,s)}}return r}get templates(){return this._templateStore}async analyze(l,s,a,o,n,p,m){if((0,promiseUtils/* isAborted */.G4)(m))return;let f;"dictionary"===a?.type&&(f=await a.analyze(this._idField,l.copy(),s,n,p,m));let u=0;for(;l.next();){let e=null;if(e=f?f[u++]:null!=o&&(0,DisplayId/* isAggregateId */.h8)(l.getDisplayId())&&1!==l.readAttribute("cluster_count")?o.match(this._idField,l,this._geometryType,n,p):a.match(this._idField,l,this._geometryType,n,p),l.setGroupId(e),(0,WGLTemplateStore/* isDynamicId */.vU)(e)){const t=this._templateStore.getDynamicTemplateGroup(e).templates;for(const e of t)e&&e.analyze&&e.analyze(this._templateStore,l,n,p)}}return await (0,libtess/* loadLibtess */.F)(),this._templateStore.finalize(m)}async analyzeGraphics(r,l,s,a,o,n){if((0,promiseUtils/* isAborted */.G4)(n))return;const p=r.getCursor();for(s&&await s.analyze(this._idField,p.copy(),l,a,o,n);p.next();){let e=p.getGroupId();if(null!=e&&-1!==e||(e=s?.match(this._idField,p,p.geometryType,a,o),p.setGroupId(e)),(0,WGLTemplateStore/* isDynamicId */.vU)(e)){const t=this._templateStore.getDynamicTemplateGroup(e).templates;for(const e of t)e&&e.analyze&&e.analyze(this._templateStore,p,a,o)}p.setGroupId(e)}return await (0,libtess/* loadLibtess */.F)(),this._templateStore.finalize(n)}writeGraphic(e,t,r,l){const s=t.getGroupId(),a=t.getDisplayId(),o=this._templateStore.getTemplateGroup(s);if(e.featureStart(t.insertAfter,0),null!=a){if((0,WGLTemplateStore/* isDynamicId */.vU)(s))for(const e of o.templates)e&&e.bindFeature(t,null,null);if(o){for(const s of o.templates)s&&s.write(e,t,r,l);e.featureEnd()}}}writeCursor(e,t,r,l,s,a,o){const n=t.getGroupId(),p=t.getDisplayId(),m=this._templateStore.getTemplateGroup(n),f=m.templates,u=this._getSortKeyValue(t,m);if(e.featureStart(0,u),null==p)return;if(!f)return;if((0,WGLTemplateStore/* isDynamicId */.vU)(n))for(const i of f)i.bindFeature(t,r,l);for(const i of f)i.write(e,t,s,o);if(!!f.length&&null!=a){const r=a&&this._findLabelRef(f);this._writeLabels(e,t,a,r,s,o)}e.featureEnd()}_getSortKeyValue(e,t){const r=this._schema.mesh.sortKey;if(null==r)return 0;let l=0;return l=!0===r.byRenderer&&null!=t.sortKey?t.sortKey:null!=r.fieldIndex?e.getComputedNumericAtIndex(r.fieldIndex):null!=r.field?e.readAttribute(r.field):e.readAttribute(this._idField),l*="asc"===r.order?1:-1,null==l||isNaN(l)?0:l}_findLabelRef(e){for(const t of e)if(t instanceof WGLMarkerTemplate/* default */.A)return t;return null}_writeLabels(e,t,r,l,s,i){for(const a of r)if(null!=a&&a){const{glyphs:r,rtl:o,index:n}=a,p=this._labelTemplates.get(n);if(!p)continue;p.setZoomLevel(s),p.bindReferenceTemplate(l),p.bindTextInfo(r,o),p.write(e,t,null,i)}}}


/***/ }),

/***/ 4909:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89882);
/* harmony import */ var _chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(94734);
/* harmony import */ var _chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(50499);
/* harmony import */ var _chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58680);
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48325);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14816);
/* harmony import */ var _symbols_cim_placements_CIMMarkerPlacementHelper_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(73048);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(43556);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(79432);
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(55429);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(59601);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const g=3.14159265359/180,u=8,y=y=>class extends y{constructor(...t){super(...t),this.angle=0,this.xOffset=0,this.yOffset=0,this.width=0,this.height=0,this.boundsType="square",this._anchorX=0,this._anchorY=0,this._computedWidth=0,this._computedHeight=0,this._allowBorrowing=!0,this._vertexBoundsScaleX=1,this._vertexBoundsScaleY=1,this.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .WGLGeometryType */ .ZG.MARKER}_write(t,e,i,r){const s=e.getDisplayId();t.recordStart(s,this._materialKey,this.geometryType,!0),this._writeGeometry(t,e,s,i,r),t.recordEnd()}_writeGeometry(t,e,i,r,s){if(null!=this._markerPlacement)return this._writePlacedMarkers(t,e,r,s);if(this._allowBorrowing=!0,!s&&"esriGeometryPoint"===e.geometryType){const r=e.getX(),s=e.getY();if(!t.hasAggregates&&t.hasPixelBufferEnabled&&(r<0||r>=513||s<0||s>=513))return;return this._writeVertices(t,i,this._getPos(r,s),r,s)}const o=s?s.asOptimized():"esriGeometryPolygon"===e.geometryType?e.readCentroid():e.readGeometryForDisplay();if(null!=o){if(o.isPoint){const[e,r]=o.coords;if(!t.hasAggregates&&t.hasPixelBufferEnabled&&(e<0||e>=512||r<0||r>=512))return;return this._writeVertices(t,i,this._getPos(e,r),e,r)}o.forEachVertex(((e,r)=>{const s=2*_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .tileSize */ .CQ;e<-s||e>=s||r<-s||r>=s||this._writeVertices(t,i,this._getPos(e,r),e,r)}))}}_writePlacedMarkers(e,i,r,s){const h=s||_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_4__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(i);if(!h)return;const n=-1,a=_symbols_cim_placements_CIMMarkerPlacementHelper_js__WEBPACK_IMPORTED_MODULE_5__/* .CIMMarkerPlacementHelper */ .l.getPlacement(h,n,this._markerPlacement,(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(1),e.tileKey,r.geometryEngine);if(!a)return;this._allowBorrowing="esriGeometryPolygon"!==i.geometryType;const _=i.getDisplayId(),l=(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.c)(),c=(0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),d=-128,v=640;let W=a.next();for(;null!=W;){const t=W.tx,i=-W.ty;t>=d&&t<=v&&i>=d&&i<=v&&(this._applyTransformation(c,l,-W.getAngle()/g),this._writeVertices(e,_,this._getPos(t,i),t,i)),W=a.next()}}_writeVertices(t,e,i,r,s){const o=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_9__/* .MarkerMaterialKey */ .PH.load(this._materialKey);return o.symbologyType===_enums_js__WEBPACK_IMPORTED_MODULE_7__/* .WGLSymbologyType */ .w4.HEATMAP?this._writeHeatmapVertices(t,e,i):this._writeMarkerVertices(t,e,o,i,r,s)}_writeMarkerVertices(t,e,i,r,s,o){const h=i.vvRotation,n=t.vertexCount();let a=this._computedWidth*this._vertexBoundsScaleX,x=this._computedHeight*this._vertexBoundsScaleY;if(this.angle){const t=Math.max(a,x);a=t,x=t}if(h){const t=Math.max(this.xOffset,this.yOffset);a+=t,x+=t}this._allowBorrowing&&t.vertexBounds(s+this.xOffset,o-this.yOffset,a,x),t.vertexWrite(r),t.vertexWrite(this._offsetUpperLeft),t.vertexWrite(this._texUpperLeft),t.vertexWrite(this._bitestAndDistRatio),t.vertexWrite(e),t.vertexWrite(this._fillColor),t.vertexWrite(this._outlineColor),t.vertexWrite(this._sizeOutlineWidth),t.vertexWrite(this._minMaxZoom),t.vertexEnd(),t.vertexWrite(r),t.vertexWrite(this._offsetUpperRight),t.vertexWrite(this._texUpperRight),t.vertexWrite(this._bitestAndDistRatio),t.vertexWrite(e),t.vertexWrite(this._fillColor),t.vertexWrite(this._outlineColor),t.vertexWrite(this._sizeOutlineWidth),t.vertexWrite(this._minMaxZoom),t.vertexEnd(),t.vertexWrite(r),t.vertexWrite(this._offsetBottomLeft),t.vertexWrite(this._texBottomLeft),t.vertexWrite(this._bitestAndDistRatio),t.vertexWrite(e),t.vertexWrite(this._fillColor),t.vertexWrite(this._outlineColor),t.vertexWrite(this._sizeOutlineWidth),t.vertexWrite(this._minMaxZoom),t.vertexEnd(),t.vertexWrite(r),t.vertexWrite(this._offsetBottomRight),t.vertexWrite(this._texBottomRight),t.vertexWrite(this._bitestAndDistRatio),t.vertexWrite(e),t.vertexWrite(this._fillColor),t.vertexWrite(this._outlineColor),t.vertexWrite(this._sizeOutlineWidth),t.vertexWrite(this._minMaxZoom),t.vertexEnd(),this._writeIndices(t,n)}_writeHeatmapVertices(t,e,i){const r=t.vertexCount();t.vertexWrite(i),t.vertexWrite(this._offsetUpperLeft),t.vertexWrite(e),t.vertexEnd(),t.vertexWrite(i),t.vertexWrite(this._offsetUpperRight),t.vertexWrite(e),t.vertexEnd(),t.vertexWrite(i),t.vertexWrite(this._offsetBottomLeft),t.vertexWrite(e),t.vertexEnd(),t.vertexWrite(i),t.vertexWrite(this._offsetBottomRight),t.vertexWrite(e),t.vertexEnd(),this._writeIndices(t,r)}_writeIndices(t,e){t.indexWrite(e+0),t.indexWrite(e+1),t.indexWrite(e+2),t.indexWrite(e+1),t.indexWrite(e+3),t.indexWrite(e+2)}_applyTransformation(t,o,x=0){x?(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.b)(t,g*x):(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.c)(t),(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.t)(t,t,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(this.xOffset,-this.yOffset)),this.angle&&(0,_chunks_mat2d_js__WEBPACK_IMPORTED_MODULE_0__.r)(t,t,g*this.angle);const f=this._computedWidth,m=this._computedHeight,_=-(.5+this._anchorX)*f,l=-(.5-this._anchorY)*m;(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,_,l),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.t)(o,o,t),this._offsetUpperLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(16*o[0],16*o[1]),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,_+f,l),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.t)(o,o,t),this._offsetUpperRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(16*o[0],16*o[1]),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,_,l+m),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.t)(o,o,t),this._offsetBottomLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(16*o[0],16*o[1]),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.s)(o,_+f,l+m),(0,_chunks_vec2_js__WEBPACK_IMPORTED_MODULE_2__.t)(o,o,t),this._offsetBottomRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(16*o[0],16*o[1])}_computeSize(t,e,i,r,s,o,h,n){const a=t*i,x=e*i;if(!!o.sdf&&!h){const i=n&&t>e?a:t,s=e,o=r+2*1;t=Math.min(i+o,a),e=Math.min(s+o,x)}else t=a,e=x;const f=_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .sdfTextureSize */ ._j/Math.max(a,x),m=.5*(a-t)*f,l=.5*(x-e)*f,d=o.rect.x+_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .spritePadding */ .hM+m,v=o.rect.y+_definitions_js__WEBPACK_IMPORTED_MODULE_6__/* .spritePadding */ .hM+l,p=d+o.width-2*m,g=v+o.height-2*l,u=Math.floor(d),y=Math.floor(v),w=Math.ceil(p),M=Math.ceil(g);t*=(w-u)/(p-d),e*=(M-y)/(g-v),this._texUpperLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(u,y),this._texUpperRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(w,y),this._texBottomLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(u,M),this._texBottomRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(w,M),this._anchorX*=a/t,this._anchorY*=x/e,t*=s,e*=s,this._computedWidth=t,this._computedHeight=e}_getPos(t,e){return (0,_number_js__WEBPACK_IMPORTED_MODULE_8__/* .i1616to32 */ .M9)(Math.round(u*t),Math.round(u*e))}};


/***/ }),

/***/ 17884:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(89882);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _symbols_cim_placements_CIMMarkerPlacementHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(73048);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(79432);
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(55429);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(59601);
/* harmony import */ var _shapingUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97557);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=8,x=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(4,4),_=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(16,4),c=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(4,2),l=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(4,6),u=[c,c,l,l],g=[c,l,c,l],m=[l,l,x,x],f=[x,x,l,l],y=[l,x,l,x],p=[x,l,x,l],w=x=>class extends x{constructor(...e){super(...e),this._isCIM=!1,this._vertexBoundsScale=1,this.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .WGLGeometryType */ .ZG.TEXT,this._aux=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,0,this._referenceSize,this._bitset)}bindTextInfo(e,t){this._shapingInfo=e?.length?(0,_shapingUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .shapeGlyphs */ .Tl)(e,t,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,Math.min(this._lineWidth,512)),lineHeight:_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .magicLabelLineHeight */ .DY*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM,hasBackground:!!this._backgroundColor,borderLineSize:this._borderLineSize}):null}_write(e,t,r,i){const o=t.getDisplayId();this._writeGeometry(e,t,o,r,i)}_writeGeometry(e,t,r,i,o){const s=this._shapingInfo;if(null==s)return;if(this._textPlacement)return this._writePlacedText(e,r,s,i,t,o);const n=o?o.asOptimized():"esriGeometryPolygon"===t.geometryType?t.readCentroid():t.readGeometryForDisplay();if(null!=n){if(n.isPoint){const[t,i]=n.coords;if(!e.hasAggregates&&e.hasPixelBufferEnabled&&(t<0||t>=512||i<0||i>=512))return;return this._writeGlyphs(e,r,{x:t,y:i},s)}n.forEachVertex(((t,i)=>this._writeGlyphs(e,r,{x:t,y:i},s)))}}_writePlacedText(i,o,s,n,h,d){const a=this._textPlacement,x=d||_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(h);if(!x)return;const _=-1,c=_symbols_cim_placements_CIMMarkerPlacementHelper_js__WEBPACK_IMPORTED_MODULE_1__/* .CIMMarkerPlacementHelper */ .l.getPlacement(x,_,a,(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .pt2px */ .Lz)(1),i.tileKey,n.geometryEngine);if(!c)return;const l=s.bounds,u=Math.sqrt(l.height*l.height+l.width*l.width);let g,m,f;for(;g=c.next();)if(m=g.tx,f=-g.ty,m+u>=0&&m-u<512&&f+u>=0&&f-u<512){const e=-g.getAngle();s.setRotation(e),this._writeGlyphs(i,o,{x:m,y:f},s),s.setRotation(-e)}}_writeGlyphs(e,t,r,i){const o=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_5__/* .MaterialKeyBase */ .ar.load(this._materialKey),s=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(Math.round(a*r.x),Math.round(a*r.y)),d=this._vertexBoundsScale,{bounds:x,background:_,glyphs:c}=i;c.length>0&&(this._borderLineColor||this._backgroundColor)&&(o.textureBinding=c[0].textureBinding,e.recordStart(t,o.data,this.geometryType,!0),this._writeBackgroundGeometry(e,t,r,x,_),e.recordEnd());const l=2*Math.max(x.width,x.height);for(const n of i.glyphs)o.textureBinding=n.textureBinding,e.recordStart(t,o.data,this.geometryType,!0),e.vertexBounds(r.x+x.x+this._xOffset,r.y+x.y-this._yOffset,l*d,l*d),this._writeVertices(e,t,s,n),e.recordEnd()}_writeGlyph(e,t,r,i,o){const s=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_5__/* .MaterialKeyBase */ .ar.load(this._materialKey),d=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(Math.round(a*r),Math.round(a*i));s.textureBinding=o.textureBinding,e.recordStart(t,s.data,this.geometryType,!0);const x=o.bounds,_=this._vertexBoundsScale;e.vertexBounds(r+x.x*_,i+x.y*_,x.width*_,x.height*_),this._writeVertices(e,t,d,o),e.recordEnd()}_writeVertices(e,t,r,i){const o=e.vertexCount();this._writeVertexCommon(e,t,r,i),e.vertexWrite(i.offsets.upperLeft),e.vertexWrite(i.texcoords.upperLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,i),e.vertexWrite(i.offsets.upperRight),e.vertexWrite(i.texcoords.upperRight),e.vertexEnd(),this._writeVertexCommon(e,t,r,i),e.vertexWrite(i.offsets.lowerLeft),e.vertexWrite(i.texcoords.lowerLeft),e.vertexEnd(),this._writeVertexCommon(e,t,r,i),e.vertexWrite(i.offsets.lowerRight),e.vertexWrite(i.texcoords.lowerRight),e.vertexEnd(),e.indexWrite(o+0),e.indexWrite(o+1),e.indexWrite(o+2),e.indexWrite(o+1),e.indexWrite(o+3),e.indexWrite(o+2)}_writeVertexCommon(e,t,r,i){const o=this._color,n=this._haloColor,h=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,0,this._referenceSize,this._bitset),d=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,0,this._size,this._haloSize);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(o),e.vertexWrite(n),e.vertexWrite(d),e.vertexWrite(h),e.vertexWrite(this._minMaxZoom)}_writeBackgroundVertex(e,t,r,i,o,n){const h=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,1,this._referenceSize,this._bitset),d=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,0,this._size,this._haloSize),a=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i8888to32 */ .Ss)(0,0,0,0);e.vertexWrite(r),e.vertexWrite(t),e.vertexWrite(i),e.vertexWrite(a),e.vertexWrite(d),e.vertexWrite(h),e.vertexWrite(this._minMaxZoom),e.vertexWrite(o),e.vertexWrite(n),e.vertexEnd()}_writeBackgroundQuad(e,t,r,i,o,s){const n=e.vertexCount();this._writeBackgroundVertex(e,t,r,i,o.upperLeft,s[0]),this._writeBackgroundVertex(e,t,r,i,o.upperRight,s[1]),this._writeBackgroundVertex(e,t,r,i,o.lowerLeft,s[2]),this._writeBackgroundVertex(e,t,r,i,o.lowerRight,s[3]),e.indexWrite(n+0),e.indexWrite(n+1),e.indexWrite(n+2),e.indexWrite(n+1),e.indexWrite(n+3),e.indexWrite(n+2)}_writeBackgroundGeometry(e,t,r,i,o){const s=(0,_number_js__WEBPACK_IMPORTED_MODULE_4__/* .i1616to32 */ .M9)(Math.round(a*r.x),Math.round(a*r.y)),{x:h,y:d,width:x,height:c}=i,l=2*Math.max(x,c);if(e.vertexBounds(r.x+h+this._xOffset,r.y+d-this._yOffset,l*this._vertexBoundsScale,l*this._vertexBoundsScale),this._backgroundColor){const r=[_,_,_,_];this._writeBackgroundQuad(e,t,s,this._backgroundColor,o.main,r)}if(this._borderLineColor||this._backgroundColor){const r=!!this._borderLineColor&&!!this._borderLineSize&&this._borderLineSize>0,[i,n,h,d,a]=r?[u,u,g,g,this._borderLineColor]:[m,f,y,p,this._backgroundColor];this._writeBackgroundQuad(e,t,s,a,o.top,i),this._writeBackgroundQuad(e,t,s,a,o.bot,n),this._writeBackgroundQuad(e,t,s,a,o.left,h),this._writeBackgroundQuad(e,t,s,a,o.right,d)}}};


/***/ }),

/***/ 11560:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ z)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(89882);
/* harmony import */ var _chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(50499);
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(48325);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(63643);
/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(83253);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(43556);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(79432);
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(55429);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(59601);
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(53412);
/* harmony import */ var _WGLBaseMarkerTemplate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(4909);
/* harmony import */ var _WGLMeshTemplate_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(61771);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class z extends((0,_WGLBaseMarkerTemplate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A)(_WGLMeshTemplate_js__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A)){constructor(t,r,s,a,d,p,y,V,_,g,z,b,k,w,B,j,C,P,v,E,T,A,L,R){super(),this.angle=a,this.height=y,this.width=p,this.xOffset=r*v,this.yOffset=s*v,this._markerPlacement=E||void 0,this._effects=T||void 0,this._anchorX=j,this._anchorY=C,this._minMaxZoom=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(Math.round(A*_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .minMaxZoomPrecisionFactor */ .fq),Math.round(L*_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .minMaxZoomPrecisionFactor */ .fq));const K=(w===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.MAP?_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .bitsetMarkerAlignmentMap */ .jM:_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .bitsetMarkerAlignmentScreen */ .Vx)|(z?_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .bitsetGenericLockColor */ .PT:0)|(k?_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .bitsetMarkerOutlineAllowColorOverride */ .MJ:0)|(b?_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .bitsetMarkerScaleSymbolsProportionally */ .hA:0),W=B&&B.sdf,X=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_7__/* .MarkerMaterialKey */ .PH.load(t);X.sdf=W,X.pattern=!0,X.textureBinding=B.textureBinding,this._materialKey=X.data,this._fillColor=d,this._outlineColor=_,this._sizeOutlineWidth=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i8888to32 */ .Ss)(Math.round(Math.min(Math.sqrt(128*p),255)),Math.round(Math.min(Math.sqrt(128*y),255)),Math.round(Math.min(Math.sqrt(128*g),255)),Math.round(Math.min(Math.sqrt(128*V),255))),X.symbologyType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .WGLSymbologyType */ .w4.PIE_CHART?(p*=P*v,y*=P*v,this._computedWidth=p,this._computedHeight=y,this._texUpperLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(0,1),this._texUpperRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(1,1),this._texBottomLeft=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(0,0),this._texBottomRight=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(1,0)):this._computeSize(p,y,P,g,v,B,X.hasSizeVV(),R);const q=Math.round(64*P);this._bitestAndDistRatio=(0,_number_js__WEBPACK_IMPORTED_MODULE_6__/* .i1616to32 */ .M9)(K,q);const Y=(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_1__.c)(),H=(0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_0__.c)();this._applyTransformation(H,Y)}static fromCIMMarker(e,o,r){const a=o&&o.width||1,n=o&&o.height||1,l=e.size,h=a/n*e.scaleX,m=e.scaleSymbolsProportionally&&e.frameHeight?l/e.frameHeight:1,c=(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(e.color),u=(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(e.outlineColor),d=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(l),f=d*h,M=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.offsetX||0),S=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.offsetY||0),x=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.outlineWidth||0)*m,y=e.alignment||_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.SCREEN,V=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.referenceSize),[_,g]=(0,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .getMinMaxZoom */ .My)(e.scaleInfo,r);let b=e.rotation||0;e.rotateClockwise||(b=-b);let k=0,w=0;const B=e.anchorPoint;B&&(e.isAbsoluteAnchorPoint?l&&(k=B.x/(l*h),w=B.y/l):(k=B.x,w=B.y));const j=new z(e.materialKey,M,S,b,c,f,d,V,u,x,e.colorLocked,e.scaleSymbolsProportionally,!1,y,o,k,w,e.sizeRatio,e.scaleFactor??1,e.markerPlacement,e.effects,_,g,!0);return j._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/f:1,j._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/d:1,j}static fromPictureMarker(e,o){const r=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.width)),s=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.height)),a=_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .pictureFillColor */ .Hi,n=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.xoffset||0)),l=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.yoffset||0)),h=new z(e.materialKey,n,l,e.angle,a,r,s,s,0,0,!1,!1,!1,_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.SCREEN,o,0,0,1,1,null,null,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMinZoom */ .$T,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMaxZoom */ .dL,!1);return h._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.width:1,h._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.height:1,h}static fromSimpleMarker(e,o){const r=e.style,s=(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(e.color),n=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.size));let l=n;"esriSMSTriangle"===r&&(l*=o.height/o.width);const h=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.xoffset||0)),m=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.yoffset||0)),c=e.outline,u=0|(c?.color&&(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(c.color)),d=0|(c?.width&&Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(c.width))),f=new z(e.materialKey,h,m,e.angle??0,s,n,l,l,u,d,!1,!1,"esriSMSCross"===r||"esriSMSX"===r,_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.SCREEN,o,0,0,2,1,null,null,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMinZoom */ .$T,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMaxZoom */ .dL,!1);return f.boundsType="esriSMSCircle"===r?"circle":"square",f._vertexBoundsScaleX=e.maxVVSize?e.maxVVSize/e.size:1,f._vertexBoundsScaleY=e.maxVVSize?e.maxVVSize/e.size:1,f}static fromLineSymbolMarker(e,o){const s=(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(e.color),n=6,l=Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(n*e.lineWidth)),h=l,m="cross"===e.style||"x"===e.style;let c;switch(e.placement){case"begin-end":c=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ExtremityPlacement */ .$2.Both;break;case"begin":c=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ExtremityPlacement */ .$2.JustBegin;break;case"end":c=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ExtremityPlacement */ .$2.JustEnd;break;default:c=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ExtremityPlacement */ .$2.None}const u={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:c,offsetAlongLine:0},d=new z(e.materialKey,0,0,0,s,l,h,h/n,s,m?Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .pt2px */ .Lz)(e.lineWidth)):0,!1,!1,m,_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .Alignment */ .C1.MAP,o,0,0,2,1,u,null,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMinZoom */ .$T,_util_js__WEBPACK_IMPORTED_MODULE_11__/* .defaultMaxZoom */ .dL,!1);return d.boundsType="circle"===e.style?"circle":"square",d}}


/***/ }),

/***/ 61771:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(14816);
/* harmony import */ var _symbols_cim_effects_CIMEffectHelper_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(78006);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(){this._materialKey=null}bindFeature(e,t,r){}write(r,s,i,f){if(this._effects&&this._effects.length>0){let i=_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_0__/* .GeometryCursor */ .z.fromFeatureSetReaderCIM(s);if(i){i.invertY();const e=_symbols_cim_effects_CIMEffectHelper_js__WEBPACK_IMPORTED_MODULE_1__/* .CIMEffectHelper */ .V.executeEffects(this._effects,i,r.tileKey,f.geometryEngine);for(;i=e.next();)i.invertY(),this._write(r,s,f,i)}}else this._write(r,s,f)}_write(e,t,r,s){}}


/***/ }),

/***/ 32964:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  _y: () => (/* binding */ WGLTemplateStore_x),
  vU: () => (/* binding */ G)
});

// UNUSED EXPORTS: errorPointSchema2D, errorPolygonSchema2D, errorPolylineSchema2D

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaultsJSON.js
var defaultsJSON = __webpack_require__(23173);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js
var MaterialKey = __webpack_require__(59601);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/utils.js
var utils = __webpack_require__(50072);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/color.js
var color = __webpack_require__(83253);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js
var GeometryUtils = __webpack_require__(59339);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/util.js
var util = __webpack_require__(53412);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/earcut.js
var earcut = __webpack_require__(16528);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/libtess.js
var libtess = __webpack_require__(1918);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/TileClipper.js
var TileClipper = __webpack_require__(87569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/bufcut.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function bufcut_e(e,t,r,i,u,o,l){D=0;const f=(i-r)*o,p=u&&u.length,c=p?(u[0]-r)*o:f;let v,s,h,d,Z,a=n(t,r,i,0,c,o,!0);if(a&&a.next!==a.prev){if(p&&(a=y(t,r,i,u,a,o)),f>80*o){v=h=t[0+r*o],s=d=t[1+r*o];for(let e=o;e<c;e+=o){const n=t[e+r*o],x=t[e+1+r*o];v=Math.min(v,n),s=Math.min(s,x),h=Math.max(h,n),d=Math.max(d,x)}Z=Math.max(h-v,d-s),Z=0!==Z?1/Z:0}x(a,e,o,v,s,Z,l,0)}}function n(e,n,t,x,r,i,l){let y;if(l===Z(e,n,t,x,r,i)>0)for(let o=x;o<r;o+=i)y=u(o+n*i,e[o+n*i],e[o+1+n*i],y);else for(let o=r-i;o>=x;o-=i)y=u(o+n*i,e[o+n*i],e[o+1+n*i],y);return y&&M(y,y.next)&&(o(y),y=y.next),y}function bufcut_t(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!M(x,x.next)&&0!==s(x.prev,x,x.next))x=x.next;else{if(o(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function x(e,n,u,l,y,f,p,v){if(!e)return;!v&&f&&(e=c(e,l,y,f));let s=e;for(;e.prev!==e.next;){const c=e.prev,h=e.next;if(f?i(e,l,y,f):r(e))n.push(c.index/u+p),n.push(e.index/u+p),n.push(h.index/u+p),o(e),e=h.next,s=h.next;else if((e=h)===s){v?1===v?x(e=b(e,n,u,p),n,u,l,y,f,p,2):2===v&&g(e,n,u,l,y,f,p):x(bufcut_t(e),n,u,l,y,f,p,1);break}}}function r(e){const n=e.prev,t=e,x=e.next;if(s(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,a(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&s(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function i(e,n,t,x){const r=e.prev,i=e,u=e.next;if(s(r,i,u)>=0)return!1;const o=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,l=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,y=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,f=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=z(o,l,n,t,x),c=z(y,f,n,t,x);let v=e.prevZ,h=e.nextZ;for(;v&&v.z>=p&&h&&h.z<=c;){if(v!==e.prev&&v!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&s(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,h!==e.prev&&h!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&s(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;v&&v.z>=p;){if(v!==e.prev&&v!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&s(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;h&&h.z<=c;){if(h!==e.prev&&h!==e.next&&a(r.x,r.y,i.x,i.y,u.x,u.y,h.x,h.y)&&s(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function u(e,n,t,x){const r=q.create(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function l(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function y(e,t,x,r,i,u){const o=new Array;for(let y=0,f=r.length;y<f;y++){const i=n(e,t,x,r[y]*u,y<f-1?r[y+1]*u:x*u,u,!1);i===i.next&&(i.steiner=!0),o.push(l(i))}o.sort(m);for(const n of o)i=f(n,i);return i}function f(e,n){const x=p(e,n);if(!x)return n;const r=j(x,e);return bufcut_t(r,r.next),bufcut_t(x,x.next)}function p(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const o=i,l=i.x,y=i.y;let f,p=1/0;for(t=i.next;t!==o;)x>=t.x&&t.x>=l&&x!==t.x&&a(r<y?x:u,r,l,y,r<y?u:x,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(x-t.x),(f<p||f===p&&t.x>i.x)&&w(t,e)&&(i=t,p=f)),t=t.next;return i}function c(e,n,t,x){let r;for(;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=z(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,c(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,v(e)}function v(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let o=t;for(;u>0||o>0&&x;){let t;0===u?(t=x,x=x.nextZ,o--):0!==o&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,o--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}function s(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function h(e,n,t,x){return!!(M(e,n)&&M(t,x)||M(e,x)&&M(t,n))||s(e,n,t)>0!=s(e,n,x)>0&&s(t,x,e)>0!=s(t,x,n)>0}function d(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&h(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function Z(e,n,t,x,r,i){let u=0;for(let o=x,l=r-i;o<r;o+=i)u+=(e[l+n*i]-e[o+n*i])*(e[o+1+n*i]+e[l+1+n*i]),l=o;return u}function a(e,n,t,x,r,i,u,o){return(r-u)*(n-o)-(e-u)*(i-o)>=0&&(e-u)*(x-o)-(t-u)*(n-o)>=0&&(t-u)*(i-o)-(r-u)*(x-o)>=0}function w(e,n){return s(e.prev,e,e.next)<0?s(e,n,e.next)>=0&&s(e,e.prev,n)>=0:s(e,n,e.prev)<0||s(e,e.next,n)<0}function z(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function M(e,n){return e.x===n.x&&e.y===n.y}function m(e,n){return e.x-n.x}function b(e,n,t,x){let r=e;do{const i=r.prev,u=r.next.next;!M(i,u)&&h(i,r,r.next,u)&&w(i,u)&&w(u,i)&&(n.push(i.index/t+x),n.push(r.index/t+x),n.push(u.index/t+x),o(r),o(r.next),r=e=u),r=r.next}while(r!==e);return r}function g(e,n,r,i,u,o,l){let y=e;do{let e=y.next.next;for(;e!==y.prev;){if(y.index!==e.index&&k(y,e)){let f=j(y,e);return y=bufcut_t(y,y.next),f=bufcut_t(f,f.next),x(y,n,r,i,u,o,l,0),void x(f,n,r,i,u,o,l,0)}e=e.next}y=y.next}while(y!==e)}function k(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!d(e,n)&&w(e,n)&&w(n,e)&&A(e,n)}function A(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}function j(e,n){const t=q.create(e.index,e.x,e.y),x=q.create(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}class q{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(e,n,t){const x=D<B.length?B[D++]:new q;return x.index=e,x.x=n,x.y=t,x.prev=null,x.next=null,x.z=null,x.prevZ=null,x.nextZ=null,x.steiner=!1,x}}const B=new Array,C=8096;let D=0;for(let E=0;E<C;E++)B.push(new q);

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/templateUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const templateUtils_i=1e-5,templateUtils_f=new TileClipper/* TileClipper */.O3(0,0,0,1,0),templateUtils_c=new TileClipper/* TileClipper */.O3(0,0,0,1,0);function templateUtils_u(t,e,n){let o=0;for(let r=1;r<n;r++){const n=t[2*(e+r-1)],s=t[2*(e+r-1)+1];o+=(t[2*(e+r)]-n)*(t[2*(e+r)+1]+s)}return o}function templateUtils_h(t,e,n,o,r){let s=0;const l=2;for(let i=n;i<o;i+=3){const n=(t[i]-r)*l,o=(t[i+1]-r)*l,f=(t[i+2]-r)*l;s+=Math.abs((e[n]-e[f])*(e[o+1]-e[n+1])-(e[n]-e[o])*(e[f+1]-e[n+1]))}return s}function templateUtils_a(t,e){const{coords:n,lengths:o,hasIndeterminateRingOrder:r}=e,s=0,f=t;if(r)return!1;let c=0;for(let a=0;a<o.length;){let t=a,e=o[a],r=templateUtils_u(n,c,e);const g=[];for(;++t<o.length;){const s=o[t],l=templateUtils_u(n,c+e,s);if(!(l>0))break;r+=l,g.push(c+e),e+=s}const p=f.length;bufcut_e(f,n,c,c+e,g,2,s);const m=templateUtils_h(f,n,p,f.length,s),d=Math.abs(r);if(Math.abs((m-d)/Math.max(1e-7,d))>templateUtils_i)return f.length=0,!1;a=t,c+=e}return!0}function templateUtils_g(e,n,o){const{coords:r,lengths:s,hasIndeterminateRingOrder:l}=n;if(l)return!1;let i=0;for(let f=0;f<s.length;){let l=f,c=s[f];const h=[];for(;++l<s.length;){const t=s[l];if(!(templateUtils_u(r,i+c,t)>0))break;h.push(i+c-i),c+=t}const a=i+c,g=n.coords.slice(2*i,2*a),p=t(g,h,2);for(const t of p)e.push(t+o+i);f=l,i+=c}return!0}function templateUtils_p(t){const{coords:n,lengths:o}=t,{buffer:r}=(0,libtess/* triangulate */.l)(n,o);return r}function templateUtils_m(t,e,n){let o=0;for(let r=0;r<t.lengths.length;r++){const s=t.lengths[r];for(let r=0;r<s;r++){const s=t.coords[2*(r+o)],l=t.coords[2*(r+o)+1];if(s<e||s>n||l<e||l>n)return!0}o+=s}return!1}function templateUtils_d(t,e){if(null==t)return null;if(!templateUtils_m(t,-128,definitions/* tileSize */.CQ+128))return t;templateUtils_f.setPixelMargin(e),templateUtils_f.reset(TileClipper/* GeometryType */.dC.Polygon);let n=0;for(let o=0;o<t.lengths.length;o++){const e=t.lengths[o];let r=t.coords[2*(0+n)],s=t.coords[2*(0+n)+1];templateUtils_f.moveTo(r,s);for(let o=1;o<e;o++)r=t.coords[2*(o+n)],s=t.coords[2*(o+n)+1],templateUtils_f.lineTo(r,s);templateUtils_f.close(),n+=e}const l=templateUtils_f.result(!1);if(!l)return null;const i=[],c=[];for(const o of l){let t=0;for(const e of o)c.push(e.x),c.push(e.y),t++;i.push(t)}return new OptimizedGeometry/* default */.A(i,c)}function templateUtils_x(t,e){templateUtils_c.setPixelMargin(e);const n=templateUtils_c,r=-e,l=definitions/* tileSize */.CQ+e;let i=[],f=!1;if(!t.nextPath())return null;let u=!0;for(;u;){t.seekPathStart();const e=[];if(!t.pathSize)return null;n.reset(TileClipper/* GeometryType */.dC.LineString),t.nextPoint();let s=t.x,c=t.y;if(f)n.moveTo(s,c);else{if(s<r||s>l||c<r||c>l){f=!0;continue}e.push({x:s,y:c})}let h=!1;for(;t.nextPoint();)if(s=t.x,c=t.y,f)n.lineTo(s,c);else{if(s<r||s>l||c<r||c>l){h=!0;break}e.push({x:s,y:c})}if(h)f=!0;else{if(f){const t=n.resultWithStarts();if(t)for(const e of t)i.push(e)}else i.push({line:e,start:0});u=t.nextPath(),f=!1}}return i=i.filter((t=>t.line.length>1)),0===i.length?null:i}templateUtils_f.setExtent(definitions/* tileSize */.CQ),templateUtils_c.setExtent(definitions/* tileSize */.CQ);

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/enums.js
var cim_enums = __webpack_require__(63643);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/GeometryCursor.js
var GeometryCursor = __webpack_require__(14816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/TurboLine.js
var TurboLine = __webpack_require__(95200);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLBaseLineTemplate_d=8,WGLBaseLineTemplate_x=16,WGLBaseLineTemplate_f=65535,WGLBaseLineTemplate_p=r=>class extends r{constructor(...e){super(...e),this.tessellationProperties={},this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0},this.geometryType=enums/* WGLGeometryType */.ZG.LINE}writeGeometry(e,t,i,r){this._writeGeometry(e,t,i,r)}_initializeTessellator(e){const i=MaterialKey/* LineMaterialKey */.r9.load(this._materialKey),r=MaterialKey/* FillMaterialKey */.K_.load(this._materialKey),s=this._tessellationOptions,h=i.vvSizeFieldStops||i.vvSizeMinMaxValue||i.vvSizeScaleStops||i.vvSizeUnitValue,m=this.tessellationProperties._halfWidth<definitions/* thinLineHalfWidthThreshold */.Gh&&!e&&!h;this.tessellationProperties.minMaxZoom=this._minMaxZoom,s.wrapDistance=WGLBaseLineTemplate_f,s.textured=this._isDashed||this._hasPattern,s.offset=this.tessellationProperties.offset,s.halfWidth=this.tessellationProperties._halfWidth;const d=m?0:1,x=(0,MaterialKey/* hasOutlineFillSymbology */.Fb)(r)?WGLBaseLineTemplate_v:_;this._lineTessellator=new TurboLine/* LineTessellation */.i(x(this.tessellationProperties,d,d),WGLBaseLineTemplate_u(this.tessellationProperties),m)}_write(e,t,i,r){const s="esriGeometryPoint"===t.geometryType;e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,s),this._writeGeometry(e,t,r,s),e.recordEnd()}_writeGeometry(t,i,r,s){const o=r||GeometryCursor/* GeometryCursor */.z.fromFeatureSetReaderCIM(i);if(!o)return;const n=this._getLines(o,s);null!=n&&this._writeVertices(t,i,n)}_getLines(e,t){return templateUtils_x(e,t?256:16)}_writeVertices(e,t,i){const r=t.getDisplayId(),s=e.vertexCount(),o=this.tessellationProperties,h=this._tessellationOptions;o.out=e,o.id=r,o.indexCount=0,o.vertexCount=0,o.offset=s,h.capType=this._capType,h.joinType=this._joinType;const m=MaterialKey/* FillMaterialKey */.K_.load(this._materialKey);this.tessellationProperties.key=(0,MaterialKey/* hasOutlineFillSymbology */.Fb)(m)?m:MaterialKey/* LineMaterialKey */.r9.load(this._materialKey);for(const{line:n,start:l}of i)h.initialDistance=l%WGLBaseLineTemplate_f,this._lineTessellator.tessellate(n,h)}},_=(e,t,i)=>(o,n,l,a,h,m,f,p,_,v,u)=>{const W=(0,number/* i1616to32 */.M9)(u,Math.ceil(WGLBaseLineTemplate_x*e._halfWidth)),c=(0,number/* i8888to32 */.Ss)(Math.round(WGLBaseLineTemplate_x*f),Math.round(WGLBaseLineTemplate_x*p),Math.round(WGLBaseLineTemplate_x*_),Math.round(WGLBaseLineTemplate_x*v)),y=(0,number/* i8888to32 */.Ss)(WGLBaseLineTemplate_x*h,WGLBaseLineTemplate_x*m,0,e._bitset),M=e.out;return M.vertexBounds(o,n,t,i),M.vertexWrite((0,number/* i1616to32 */.M9)(WGLBaseLineTemplate_d*o,WGLBaseLineTemplate_d*n)),M.vertexWrite(e.id),M.vertexWrite(e._fillColor),M.vertexWrite(c),M.vertexWrite(W),M.vertexWrite(e._tl),M.vertexWrite(e._br),M.vertexWrite(y),M.vertexWrite((0,number/* i1616to32 */.M9)(Math.ceil(WGLBaseLineTemplate_x*e._halfReferenceWidth),0)),M.vertexWrite(e.minMaxZoom),M.vertexEnd(),e.offset+e.vertexCount++},WGLBaseLineTemplate_v=(e,t,i)=>(o,n,l,a,m,f,p,_,v,u,W)=>{const c=(0,number/* i1616to32 */.M9)(WGLBaseLineTemplate_x*e._halfWidth,WGLBaseLineTemplate_x*e._halfReferenceWidth),y=(0,number/* i8888to32 */.Ss)(WGLBaseLineTemplate_x*p+128,WGLBaseLineTemplate_x*_+128,WGLBaseLineTemplate_x*v+128,WGLBaseLineTemplate_x*u+128),M=e.out,C=e._bitset<<24|e.id;M.vertexBounds(o,n,t,i),M.vertexWrite((0,number/* i1616to32 */.M9)(WGLBaseLineTemplate_d*o,WGLBaseLineTemplate_d*n)),M.vertexWrite(C),M.vertexWrite(e._fillColor);const P=(0,MaterialKey/* hasSimpleSymbology */.q7)(e.key);return P||(M.vertexWrite(0),M.vertexWrite(0)),M.vertexWrite(0),M.vertexWrite(c),M.vertexWrite(y),P||M.vertexWrite(e.minMaxZoom),M.vertexEnd(),e.offset+e.vertexCount++},WGLBaseLineTemplate_u=e=>(t,i,r)=>{const s=e.out;s.indexWrite(t),s.indexWrite(i),s.indexWrite(r),e.indexCount+=3};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate.js
var WGLMeshTemplate = __webpack_require__(61771);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLLineTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class K extends(WGLBaseLineTemplate_p(WGLMeshTemplate/* default */.A)){constructor(e,t,i,r,s,o,p,f,d,y,S,_,j,g,w,K,P,x,b,O){super();const T=MaterialKey/* LineMaterialKey */.r9.load(e);t&&(T.sdf=t.sdf,T.pattern=!0,T.textureBinding=t.textureBinding),this._capType=r,this._joinType=s,this._miterLimitCosine=(0,util/* getLimitCosine */.b7)(o),this.tessellationProperties._fillColor=p,this.tessellationProperties._tl=f,this.tessellationProperties._br=d,this._hasPattern=y,this._isDashed=S,this._zOrder=P,this._effects=x||null,this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(b*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(O*definitions/* minMaxZoomPrecisionFactor */.fq)),this._materialKey=T.data;const M=(j?definitions/* bitsetGenericLockColor */.PT:0)|(g?definitions/* bitsetTypeFillOutline */.Xx:0)|(_?definitions/* bitsetLineScaleDash */.kx:0)|(w?definitions/* bitsetGenericConsiderAlphaOnly */.cn:0);this.tessellationProperties._bitset=M,this.tessellationProperties._halfWidth=.5*i,this.tessellationProperties._halfReferenceWidth=.5*K,this.tessellationProperties.offset=0,this._initializeTessellator(!1)}static fromCIMLine(e,r,l){const n=e.color,a=e.scaleFactor||1,m=!!e.dashTemplate;let c=e.cap;m&&c===cim_enums/* CapType */.xR.ROUND&&(c=cim_enums/* CapType */.xR.SQUARE);const p=e.join,f=(0,screenUtils/* pt2px */.Lz)(e.width)*a,u=(0,screenUtils/* pt2px */.Lz)(e.referenceWidth),d=(0,screenUtils/* pt2px */.Lz)(e.miterLimit),y=n&&(0,color/* premultiplyAlphaRGBA */.cz)(n)||0,[L,_]=(0,util/* getMinMaxZoom */.My)(e.scaleInfo,l),j=!1;if(!r)return new K(e.materialKey,r,f,c,p,d,y,0,0,!1,m,e.scaleDash??!1,e.colorLocked??!1,j,e.sampleAlphaOnly,u,e.zOrder,e.effects,L,_);const{rect:g,width:w,height:P}=r,x=g.x+definitions/* spritePadding */.hM,b=g.y+definitions/* spritePadding */.hM,O=x+w,T=b+P,M=(0,number/* i1616to32 */.M9)(x,b),W=(0,number/* i1616to32 */.M9)(O,T),z=!1;return new K(e.materialKey,r,f,c,p,d,y,M,W,!0,m,e.scaleDash??!1,e.colorLocked??!1,z,e.sampleAlphaOnly,u,e.zOrder,e.effects,L,_)}static fromFillOutline(e){const t=MaterialKey/* FillMaterialKey */.K_.load(e.materialKey);return (0,MaterialKey/* hasOutlineFillSymbology */.Fb)(t)&&e.outline&&"esriSLSSolid"===e.outline?.style?K.fromSimpleLine({hash:"",materialKey:e.materialKey,...e.outline},null,!0):null}static fromSimpleLine(e,i,s=!1){const{color:l}=e,n="esriSLSSolid"!==e.style&&"esriSLSNull"!==e.style,a=(0,Utils/* getCapType */.hi)(e.cap||"round"),m=(0,Utils/* getJoinType */.Pg)(e.join||"round");let c=l&&"esriSLSNull"!==e.style&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(l)||0;"esriSLSNull"===e.style&&(c=0);const u=(0,screenUtils/* pt2px */.Lz)(e.width),d=e.miterLimit;if(!i)return new K(e.materialKey,i,u,a,m,d,c,0,0,!1,n,!0,!1,s,!1,u,0,null,util/* defaultMinZoom */.$T,util/* defaultMaxZoom */.dL);const{rect:y,width:L,height:S}=i,g=y.x+definitions/* spritePadding */.hM,w=y.y+definitions/* spritePadding */.hM,P=g+L,x=w+S,b=(0,number/* i1616to32 */.M9)(g,w),O=(0,number/* i1616to32 */.M9)(P,x);return new K(e.materialKey,i,u,a,m,d,c,b,O,!0,n,!0,!1,s,!1,u,0,null,util/* defaultMinZoom */.$T,util/* defaultMaxZoom */.dL)}static fromPictureLineSymbol(t,i,r,s){return Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate").error("PictureLineSymbol support does not exist!"),null}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLBaseFillTemplate_y=100,WGLBaseFillTemplate_p=1,WGLBaseFillTemplate_x=x=>class extends x{constructor(...t){super(...t),this.forceLibtess=!1,this._bitset=0,this._lineTemplate=null,this.geometryType=enums/* WGLGeometryType */.ZG.FILL}_maybeAddLineTemplate(e){this._lineTemplate=K.fromFillOutline(e)}_write(e,t,r,i){const l="esriGeometryPoint"===t.geometryType,n=MaterialKey/* FillMaterialKey */.K_.load(this._materialKey);e.recordStart(t.getDisplayId(),this._materialKey,this.geometryType,l),this._writeGeometry(e,t,n,i,l),(0,MaterialKey/* hasOutlineFillSymbology */.Fb)(n)&&null!=this._lineTemplate&&this._lineTemplate.writeGeometry(e,t,i,l),e.recordEnd()}_writeGeometry(e,t,r,i,s){const o=this._getGeometry(t,i,s);if(null==o)return;const l=[];if(!(o.maxLength>WGLBaseFillTemplate_y)&&!this.forceLibtess&&templateUtils_a(l,o))return void(l.length&&this._writeVertices(e,t,o.coords,o.lengths,r,l));const a=templateUtils_p(o);this._writeVertices(e,t,a,[a.length/2],r)}_writeVertex(e,i,s,o,n,m){const a=(0,number/* i1616to32 */.M9)(WGLBaseFillTemplate_p*o,WGLBaseFillTemplate_p*n);if(e.vertexBounds(o,n,0,0),e.vertexWrite(a),e.vertexWrite(i),s.symbologyType===enums/* WGLSymbologyType */.w4.DOT_DENSITY)e.vertexWriteF32(1/Math.abs(m.readGeometryArea()));else{e.vertexWrite(this.fillColor);const t=(0,MaterialKey/* hasSimpleSymbology */.q7)(s);t||(e.vertexWrite(this.tl),e.vertexWrite(this.br)),e.vertexWrite(this.aux21),e.vertexWrite(this.aux22),e.vertexWrite(this.aux3),t||e.vertexWrite(this._minMaxZoom)}}_writeVertices(e,t,r,s,o,l){const n=t.getDisplayId(),m=this._bitset<<24|n,a=s.reduce(((e,t)=>e+t)),h=(0,Utils/* getStrides */.jG)(o.geometryType,o.symbologyType).geometry/4,y=e.vertexCount();e.vertexEnsureSize(h*a);let p=0;if(l)for(const i of l){const s=r[2*i],l=r[2*i+1];this._writeVertex(e,m,o,s,l,t),p++}else for(let i=0;i<r.length;i+=2){const s=Math.round(r[i]),l=Math.round(r[i+1]);this._writeVertex(e,m,o,s,l,t),p++}e.indexEnsureSize(p);for(let i=0;i<p;i++)e.indexWrite(i+y)}_getGeometry(e,t,r){const i=t?.asOptimized()||e.readGeometryForDisplay();if(!i)return null;return templateUtils_d(i,r?256:8)}};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js + 1 modules
var cimAnalyzer = __webpack_require__(80047);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLDynamicMeshTemplate_i=Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");class WGLDynamicMeshTemplate_r extends WGLMeshTemplate/* default */.A{constructor(e){super(),this._ongoingMaterialRequestMap=new Map,this._materialCache=new Map,this._dynamicPropertyMap=new Map,this._cimLayer=e}async analyze(e,s,r,n,l){if(l&&0===l.length)return null;const o=l&&l.length>0,m=s.readLegacyFeature(),c=s.getObjectId(),h=this._materialCache,u=this._cimLayer.materialHash;if(!u)return WGLDynamicMeshTemplate_i.error("A Dynamic mesh template must have a material hash value or function!"),null;const p="function"==typeof u?u(m,r,n,c):u,g=h.get(p);if(null!=g)return g;const y=this._ongoingMaterialRequestMap.get(p);if(y)return y;const M=this._cimLayer,d=(0,cimAnalyzer/* analyzeCIMResource */.G)(M.cim,this._cimLayer.materialOverrides);d.mosaicHash=p;const{type:f,url:_}=M,b={cim:d,type:f,mosaicHash:p,url:_,size:null,dashTemplate:null,text:null,fontName:null,objectId:c,animatedSymbolProperties:null};switch(f){case"marker":b.size=(0,utils/* evaluateValueOrFunction */.s4)(M.size,m,r,n),b.animatedSymbolProperties=(0,utils/* evaluateValueOrFunction */.s4)(M.animatedSymbolProperties,m,r,n);break;case"line":b.dashTemplate=M.dashTemplate;break;case"text":b.text=(0,utils/* evaluateValueOrFunction */.s4)(M.text,m,r,n),b.fontName=(0,utils/* evaluateValueOrFunction */.s4)(M.fontName,m,r,n)}const L=e.getMosaicItem(b,l).then((e=>(o||(this._ongoingMaterialRequestMap.delete(p),h.set(p,e)),e))).catch((e=>(this._ongoingMaterialRequestMap.delete(p),WGLDynamicMeshTemplate_i.error(".analyze()",e.message),null)));return o||this._ongoingMaterialRequestMap.set(p,L),L}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Result.js
var Result = __webpack_require__(11906);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLDynamicFillTemplate_j extends(WGLBaseFillTemplate_x(WGLDynamicMeshTemplate_r)){constructor(l,h,n){if(super(l),this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(h*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(n*definitions/* minMaxZoomPrecisionFactor */.fq)),(0,utils/* isFeatureValueFn */.qJ)(l.color)){const t=(t,e,i)=>{const o=l.color(t,e,i);return o&&(0,color/* premultiplyAlphaRGBA */.cz)(o)||0};this._dynamicPropertyMap.set("fillColor",t)}else{const t=l.color;this.fillColor=t&&(0,color/* premultiplyAlphaRGBA */.cz)(t)||0}const c="CIMMarkerPlacementInsidePolygon"===l.cim.placement?.type&&l.cim.placement.shiftOddRows?2:1,f=l.height;if((0,utils/* isFeatureValueFn */.qJ)(f)){const t=(t,e,s)=>f(t,e,s)*c;this._dynamicPropertyMap.set("_height",t)}else this._height=(f||0)*c;const y=l.offsetX;if((0,utils/* isFeatureValueFn */.qJ)(y)){const e=(e,s,i)=>(0,screenUtils/* pt2px */.Lz)(y(e,s,i));this._dynamicPropertyMap.set("_offsetX",e)}else this._offsetX=(0,screenUtils/* pt2px */.Lz)(y||0);const d=l.offsetY;if((0,utils/* isFeatureValueFn */.qJ)(d)){const e=(e,s,i)=>(0,screenUtils/* pt2px */.Lz)(-d(e,s,i));this._dynamicPropertyMap.set("_offsetY",e)}else this._offsetY=(0,screenUtils/* pt2px */.Lz)(-d||0);const u=l.scaleX;(0,utils/* isFeatureValueFn */.qJ)(u)?this._dynamicPropertyMap.set("_scaleX",u):this._scaleX=u||1;const M=l.angle;if((0,utils/* isFeatureValueFn */.qJ)(M)){const t=(t,e,s)=>(0,GeometryUtils/* degToByte */.wV)(M(t,e,s));this._dynamicPropertyMap.set("_angle",t)}else this._angle=(0,GeometryUtils/* degToByte */.wV)(M)||0;if(null!=l.effects){const t=l.effects;(0,utils/* isFeatureValueFn */.qJ)(t)?this._dynamicPropertyMap.set("_effects",t):this._effects=t}this._cimFillLayer=l,this._bitset=(l.colorLocked?definitions/* bitsetGenericLockColor */.PT:0)|(l.applyRandomOffset?definitions/* bitsetFillRandomPatternOffset */.Fz:0)|(l.sampleAlphaOnly?definitions/* bitsetGenericConsiderAlphaOnly */.cn:0)|(l.hasUnresolvedReplacementColor?definitions/* bitsetFillHasUnresolvedReplacementColor */.xB:0),this._fillMaterialKey=l.materialKey}static fromCIMFill(t,e){const[s,i]=(0,util/* getMinMaxZoom */.My)(t.scaleInfo,e);return new WGLDynamicFillTemplate_j(t,s,i)}bindFeature(e,s,i){const o=e.readLegacyFeature();this._dynamicPropertyMap.forEach(((t,e)=>{this[e]=t(o,s,i)}));const r=MaterialKey/* FillMaterialKey */.K_.load(this._fillMaterialKey),a=this._materialCache,m=(0,this._cimFillLayer.materialHash)(o,s,i),p=a.get(m);let u=null;if(p&&(0,Result.ok)(p.spriteMosaicItem)&&(u=p.spriteMosaicItem),u){const{rect:e,width:s,height:i}=u,o=e.x+definitions/* spritePadding */.hM,a=e.y+definitions/* spritePadding */.hM,m=o+s,p=a+i;let d=(0,screenUtils/* pt2px */.Lz)(this._height);d<=0&&(d=p-a),d<definitions/* maxSizeForU16Compression */.Tv&&(d*=definitions/* compressionFactorForU16 */.bg,this._bitset|=definitions/* bitsetFillHasPatternHeightPrecisionFactor */.ni),d=Math.round(d);let M=(0,screenUtils/* pt2px */.Lz)(this._height/i*s);M<=0&&(M=m-o),M<definitions/* maxSizeForU16Compression */.Tv&&(M*=definitions/* compressionFactorForU16 */.bg,this._bitset|=definitions/* bitsetFillHasPatternWidthPrecisionFactor */.iw),M=Math.round(M);const g=this._scaleX,x=1;this.tl=(0,number/* i1616to32 */.M9)(o,a),this.br=(0,number/* i1616to32 */.M9)(m,p),this.aux21=(0,number/* i1616to32 */.M9)(M,d),this.aux22=(0,number/* i1616to32 */.M9)(this._offsetX,this._offsetY),this.aux3=(0,number/* i8888to32 */.Ss)(g*definitions/* compressionFactorForU16 */.bg,x*definitions/* compressionFactorForU16 */.bg,this._angle,0),r.sdf=u.sdf,r.pattern=!0,r.textureBinding=u.textureBinding}else this.tl=0,this.br=0,this.aux21=0,this.aux22=0,this.aux3=0,r.sdf=!1,r.pattern=!1,r.textureBinding=0;this._materialKey=r.data}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLDynamicLineTemplate_d extends(WGLBaseLineTemplate_p(WGLDynamicMeshTemplate_r)){constructor(a,n,m){super(a),this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(n*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(m*definitions/* minMaxZoomPrecisionFactor */.fq)),this._cimLineLayer=a;let p=0;(0,utils/* isFeatureValueFn */.qJ)(a.width)||(p=.5*(0,screenUtils/* pt2px */.Lz)(a.width));const _=(i,s,r)=>(0,utils/* isFeatureValueFn */.qJ)(a.width)?.5*(0,screenUtils/* pt2px */.Lz)(a.width(i,s,r)):p;this._dynamicPropertyMap.set("_halfWidth",_),(0,utils/* isFeatureValueFn */.qJ)(a.cap)?this._dynamicPropertyMap.set("_capType",a.cap):this._capType=a.cap,(0,utils/* isFeatureValueFn */.qJ)(a.join)?this._dynamicPropertyMap.set("_joinType",a.join):this._joinType=a.join;const f=a.color;if((0,utils/* isFeatureValueFn */.qJ)(f)){const t=(t,e,s)=>(0,color/* premultiplyAlphaRGBA */.cz)(f(t,e,s));this._dynamicPropertyMap.set("_fillColor",t)}else this._fillColor=f&&(0,color/* premultiplyAlphaRGBA */.cz)(f)||0;const d=a.miterLimit;if((0,utils/* isFeatureValueFn */.qJ)(d)){const t=(t,e,i)=>(0,util/* getLimitCosine */.b7)(d(t,e,i));this._dynamicPropertyMap.set("_miterLimitCosine",t)}else this._miterLimitCosine=(0,util/* getLimitCosine */.b7)(d);if(null!=a.effects){const t=a.effects;(0,utils/* isFeatureValueFn */.qJ)(t)?this._dynamicPropertyMap.set("_effects",t):this._effects=t}this._scaleFactor=a.scaleFactor||1,this._isDashed=null!=a.dashTemplate;const y=a.colorLocked?definitions/* bitsetGenericLockColor */.PT:0,P=a.scaleDash?definitions/* bitsetLineScaleDash */.kx:0,u=a.sampleAlphaOnly?definitions/* bitsetGenericConsiderAlphaOnly */.cn:0;this.tessellationProperties._bitset=y|P|u,this._materialKey=a.materialKey,this._initializeTessellator(!0)}static fromCIMLine(t,e){const[i,s]=(0,util/* getMinMaxZoom */.My)(t.scaleInfo,e);return new WGLDynamicLineTemplate_d(t,i,s)}bindFeature(t,e,i){const s=t.readLegacyFeature();this._dynamicPropertyMap.forEach(((t,r)=>{this[r]=t(s,e,i)})),this._halfWidth*=this._scaleFactor;const r=this._materialCache,o=(0,this._cimLineLayer.materialHash)(s,e,i),l=r.get(o);let c=null;if(l&&(0,Result.ok)(l.spriteMosaicItem)&&(c=l.spriteMosaicItem),c){this._hasPattern=!0;const{rect:t,width:e,height:i}=c,s=t.x+definitions/* spritePadding */.hM,r=t.y+definitions/* spritePadding */.hM,o=s+e,l=r+i;this.tessellationProperties._tl=(0,number/* i1616to32 */.M9)(s,r),this.tessellationProperties._br=(0,number/* i1616to32 */.M9)(o,l)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor,this.tessellationProperties._halfWidth=this._halfWidth,this.tessellationProperties.offset=0,this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;const m=MaterialKey/* LineMaterialKey */.r9.load(this._materialKey);c&&(m.sdf=c.sdf,m.pattern=!0,m.textureBinding=c.textureBinding),this._materialKey=m.data}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat2df32.js
var mat2df32 = __webpack_require__(50499);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f32.js
var vec2f32 = __webpack_require__(48325);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate.js
var WGLBaseMarkerTemplate = __webpack_require__(4909);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLDynamicMarkerTemplate_k=(0,vec2f32.c)(),P=(0,mat2df32.c)();class L extends((0,WGLBaseMarkerTemplate/* default */.A)(WGLDynamicMeshTemplate_r)){constructor(t,e,i){super(t),this._cimMarkerLayer=t,this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(e*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(i*definitions/* minMaxZoomPrecisionFactor */.fq));const r=t.color;if((0,utils/* isFeatureValueFn */.qJ)(r)){const t=(t,e,s)=>(0,color/* premultiplyAlphaRGBA */.cz)(r(t,e,s));this._dynamicPropertyMap.set("_fillColor",t)}else this._fillColor=(0,color/* premultiplyAlphaRGBA */.cz)(r);const y=t.outlineColor;if((0,utils/* isFeatureValueFn */.qJ)(y)){const t=(t,e,s)=>(0,color/* premultiplyAlphaRGBA */.cz)(y(t,e,s));this._dynamicPropertyMap.set("_outlineColor",t)}else this._outlineColor=(0,color/* premultiplyAlphaRGBA */.cz)(y);const p=t.size;if((0,utils/* isFeatureValueFn */.qJ)(p)){const t=(t,e,i)=>(0,screenUtils/* pt2px */.Lz)(p(t,e,i));this._dynamicPropertyMap.set("_size",t)}else this._size=(0,screenUtils/* pt2px */.Lz)(p)||0;const M=t.scaleX;(0,utils/* isFeatureValueFn */.qJ)(M)?this._dynamicPropertyMap.set("_scaleX",M):this._scaleX=M;const d=t.offsetX;if((0,utils/* isFeatureValueFn */.qJ)(d)){const t=(t,e,i)=>(0,screenUtils/* pt2px */.Lz)(d(t,e,i));this._dynamicPropertyMap.set("xOffset",t)}else this.xOffset=(0,screenUtils/* pt2px */.Lz)(d)||0;const u=t.offsetY;if((0,utils/* isFeatureValueFn */.qJ)(u)){const t=(t,e,i)=>(0,screenUtils/* pt2px */.Lz)(u(t,e,i));this._dynamicPropertyMap.set("yOffset",t)}else this.yOffset=(0,screenUtils/* pt2px */.Lz)(u)||0;const g=t.outlineWidth;if((0,utils/* isFeatureValueFn */.qJ)(g)){const t=(t,e,i)=>(0,screenUtils/* pt2px */.Lz)(g(t,e,i));this._dynamicPropertyMap.set("_outlineWidth",t)}else this._outlineWidth=(0,screenUtils/* pt2px */.Lz)(g)||0;const k=t.rotation;if((0,utils/* isFeatureValueFn */.qJ)(k)?this._dynamicPropertyMap.set("_angle",k):this._angle=k||0,null!=t.effects){const e=t.effects;(0,utils/* isFeatureValueFn */.qJ)(e)?this._dynamicPropertyMap.set("_effects",e):this._effects=e}if(null!=t.markerPlacement){const e=t.markerPlacement;(0,utils/* isFeatureValueFn */.qJ)(e)?this._dynamicPropertyMap.set("_markerPlacement",e):this._markerPlacement=e}this._scaleFactor=t.scaleFactor??1,this._bitSet=(t.alignment===cim_enums/* Alignment */.C1.MAP?definitions/* bitsetMarkerAlignmentMap */.jM:definitions/* bitsetMarkerAlignmentScreen */.Vx)|(t.colorLocked?definitions/* bitsetGenericLockColor */.PT:0)|(t.scaleSymbolsProportionally?definitions/* bitsetMarkerScaleSymbolsProportionally */.hA:0),this._materialKey=t.materialKey}static fromCIMMarker(t,e){const[s,i]=(0,util/* getMinMaxZoom */.My)(t.scaleInfo,e);return new L(t,s,i)}bindFeature(i,r,o){const a=i.readLegacyFeature(),n=i.getObjectId();this._dynamicPropertyMap.forEach(((t,e)=>{this[e]=t(a,r,o)}));const c=this._cimMarkerLayer.materialHash,h="function"==typeof c?c(a,r,o,n):c,m=this._materialCache.get(h);if(!m||!(0,Result.ok)(m.spriteMosaicItem)||!m.spriteMosaicItem)return void Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate").error(new Error/* default */.A("mapview-cim","Encountered an error when binding feature"));const l=m.spriteMosaicItem,f=this._cimMarkerLayer.sizeRatio,M=l.width/l.height*this._scaleX,d=MaterialKey/* MarkerMaterialKey */.PH.load(this._materialKey);d.sdf=l.sdf,d.pattern=!0,d.textureBinding=l.textureBinding,this._materialKey=d.data;const u=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,L=this._size,j=L*M,b=this.xOffset,z=this.yOffset;this.xOffset*=this._scaleFactor,this.yOffset*=this._scaleFactor;const x=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/(0,screenUtils/* pt2px */.Lz)(this._cimMarkerLayer.frameHeight):1,O=this._outlineWidth*x,w=(0,screenUtils/* pt2px */.Lz)(this._cimMarkerLayer.referenceSize);let C=0,W=0;const F=this._cimMarkerLayer.anchorPoint;F&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(C=(0,screenUtils/* pt2px */.Lz)(F.x)/(this._size*M),W=(0,screenUtils/* pt2px */.Lz)(F.y)/this._size):(C=F.x,W=F.y)),this._anchorX=C,this._anchorY=W,this._sizeOutlineWidth=(0,number/* i8888to32 */.Ss)(Math.round(Math.min(Math.sqrt(128*j),255)),Math.round(Math.min(Math.sqrt(128*L),255)),Math.round(Math.min(Math.sqrt(128*O),255)),Math.round(Math.min(Math.sqrt(128*w),255))),this.angle=u;const S=Math.round(64*f);this._bitestAndDistRatio=(0,number/* i1616to32 */.M9)(this._bitSet,S),this._computeSize(j,L,f,O,this._scaleFactor,l,d.hasSizeVV(),!0),this._applyTransformation(P,WGLDynamicMarkerTemplate_k),this.xOffset=b,this.yOffset=z}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate.js
var WGLBaseTextTemplate = __webpack_require__(17884);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/textUtils.js
var textUtils = __webpack_require__(65126);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const WGLDynamicTextTemplate_y=5;function WGLDynamicTextTemplate_p(t,e,i,s){return"string"==typeof t.text?t.text:"function"==typeof t.text?t.text(e,i,s)??"":""}class WGLDynamicTextTemplate_d extends((0,WGLBaseTextTemplate/* default */.A)(WGLDynamicMeshTemplate_r)){constructor(s,o,n){super(s),this._horizontalAlignment="center",this._verticalAlignment="middle",this._textToGlyphs=new Map,this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(o*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(n*definitions/* minMaxZoomPrecisionFactor */.fq));const c=s.scaleFactor||1;this._cimTextLayer=s;const m=s.color;if((0,utils/* isFeatureValueFn */.qJ)(m)){const t=(t,e,i)=>(0,color/* premultiplyAlphaRGBA */.cz)(m(t,e,i));this._dynamicPropertyMap.set("_color",t)}else this._color=(0,color/* premultiplyAlphaRGBA */.cz)(m);const _=s.outlineColor;if((0,utils/* isFeatureValueFn */.qJ)(_)){const t=(t,e,i)=>(0,color/* premultiplyAlphaRGBA */.cz)(_(t,e,i));this._dynamicPropertyMap.set("_haloColor",t)}else this._haloColor=(0,color/* premultiplyAlphaRGBA */.cz)(_);let f;(0,utils/* isFeatureValueFn */.qJ)(s.size)||(f=Math.min(Math.round((0,screenUtils/* pt2px */.Lz)(s.size*s.sizeRatio)),127));const p=(e,o,r)=>(0,utils/* isFeatureValueFn */.qJ)(s.size)?Math.min(Math.round((0,screenUtils/* pt2px */.Lz)(s.size(e,o,r)*s.sizeRatio)),127):f;if(this._dynamicPropertyMap.set("_size",p),(0,utils/* isFeatureValueFn */.qJ)(s.outlineSize)){const e=(e,i,o)=>Math.min(Math.floor(WGLDynamicTextTemplate_y*(0,screenUtils/* pt2px */.Lz)(s.outlineSize(e,i,o)*s.sizeRatio)),127);this._dynamicPropertyMap.set("_haloSize",e)}else this._haloSize=Math.min(Math.floor(WGLDynamicTextTemplate_y*(0,screenUtils/* pt2px */.Lz)(s.outlineSize*s.sizeRatio)),127);let d;(0,utils/* isFeatureValueFn */.qJ)(s.offsetX)||(d=Math.round((0,screenUtils/* pt2px */.Lz)(s.offsetX*s.sizeRatio)));const M=(e,o,r)=>(0,utils/* isFeatureValueFn */.qJ)(s.offsetX)?Math.round((0,screenUtils/* pt2px */.Lz)(s.offsetX(e,o,r)*s.sizeRatio)):d;let u;this._dynamicPropertyMap.set("_xOffset",M),(0,utils/* isFeatureValueFn */.qJ)(s.offsetY)||(u=Math.round((0,screenUtils/* pt2px */.Lz)(s.offsetY*s.sizeRatio)));const g=(e,o,r)=>(0,utils/* isFeatureValueFn */.qJ)(s.offsetY)?Math.round((0,screenUtils/* pt2px */.Lz)(s.offsetY(e,o,r)*s.sizeRatio)):u;if(this._dynamicPropertyMap.set("_yOffset",g),(0,utils/* isFeatureValueFn */.qJ)(s.angle)?this._dynamicPropertyMap.set("_angle",s.angle):this._angle=s.angle,(0,utils/* isFeatureValueFn */.qJ)(s.horizontalAlignment)?this._dynamicPropertyMap.set("_horizontalAlignment",s.horizontalAlignment):this._horizontalAlignment=s.horizontalAlignment,(0,utils/* isFeatureValueFn */.qJ)(s.verticalAlignment)?this._dynamicPropertyMap.set("_verticalAlignment",s.verticalAlignment):this._verticalAlignment=s.verticalAlignment,null!=s.effects){const t=s.effects;(0,utils/* isFeatureValueFn */.qJ)(t)?this._dynamicPropertyMap.set("_effects",t):this._effects=t}if(null!=s.markerPlacement){const t=s.markerPlacement;(0,utils/* isFeatureValueFn */.qJ)(t)?this._dynamicPropertyMap.set("_markerPlacement",t):this._textPlacement=t}(0,utils/* isFeatureValueFn */.qJ)(s.text)?this._dynamicPropertyMap.set("_text",s.text):this._text=s.text,this._backgroundColor=s.backgroundColor&&(0,color/* premultiplyAlphaRGBA */.cz)(s.backgroundColor),this._borderLineColor=s.borderLineColor&&(0,color/* premultiplyAlphaRGBA */.cz)(s.borderLineColor),this._borderLineSize=s.borderLineWidth,this._scaleFactor=c;const z=Math.min(Math.round((0,screenUtils/* pt2px */.Lz)(s.referenceSize*s.sizeRatio)),127);this._referenceSize=Math.round(Math.sqrt(256*z)),this._materialKey=s.materialKey;const x=MaterialKey/* TextMaterialKey */.ir.load(this._materialKey);x.sdf=!0,this._bitset=(s.alignment===cim_enums/* Alignment */.C1.MAP?1:0)|(s.colorLocked?1:0)<<1,this._materialKey=x.data,this._decoration="none",this._lineHeight=1,this._lineWidth=512,this._isCIM=!0}static fromCIMText(t,e){const[i,s]=(0,util/* getMinMaxZoom */.My)(t.scaleInfo,e);return new WGLDynamicTextTemplate_d(t,i,s)}async analyze(t,e,i,s){const o=e.readLegacyFeature(),r=WGLDynamicTextTemplate_p(this._cimTextLayer,o,i,s),n=await super.analyze(t,e,i,s,(0,textUtils/* codepoints */.N)(r));return n?.glyphMosaicItems&&this._textToGlyphs.set(r,n.glyphMosaicItems),n}bindFeature(t,e,i){const r=t.readLegacyFeature();if(this._dynamicPropertyMap.forEach(((t,s)=>{this[s]=t(r,e,i)})),!this._text||0===this._text.length)return void(this._shapingInfo=null);this._size*=this._scaleFactor,this._scale=this._size/definitions/* glyphSize */.eG,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=(0,alignmentUtils/* getXAnchorDirection */.xy)(this._horizontalAlignment??"center"),this._yAlignD=(0,alignmentUtils/* getYAnchorDirection */.UD)(this._verticalAlignment??"baseline");const a=this._textToGlyphs.get(this._text)??[];this.bindTextInfo(a,!1)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLFillTemplate.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLFillTemplate_K extends(WGLBaseFillTemplate_x(WGLMeshTemplate/* default */.A)){constructor(t,e,l,o,r,i,s,a,n,m,c,f,d,u,M,j){super(),this._effects=u||void 0;const w=MaterialKey/* FillMaterialKey */.K_.load(t);e&&(w.sdf=e.sdf,w.pattern=!0,w.textureBinding=e.textureBinding),this.fillColor=l,this.tl=o,this.br=r,this.aux21=(0,number/* i1616to32 */.M9)(i,s),this.aux22=(0,number/* i1616to32 */.M9)(a,n),this.aux3=(0,number/* i8888to32 */.Ss)(m,c,f,0),this._bitset=d,this._minMaxZoom=(0,number/* i1616to32 */.M9)(Math.round(M*definitions/* minMaxZoomPrecisionFactor */.fq),Math.round(j*definitions/* minMaxZoomPrecisionFactor */.fq)),this._materialKey=w.data}static fromCIMFill(e,h,d){const y=e.color,x=y&&(0,color/* premultiplyAlphaRGBA */.cz)(y)||0,j=e.materialKey,[w,g]=(0,util/* getMinMaxZoom */.My)(e.scaleInfo,d);let F=(e.colorLocked?definitions/* bitsetGenericLockColor */.PT:0)|(e.applyRandomOffset?definitions/* bitsetFillRandomPatternOffset */.Fz:0)|(e.sampleAlphaOnly?definitions/* bitsetGenericConsiderAlphaOnly */.cn:0)|(e.hasUnresolvedReplacementColor?definitions/* bitsetFillHasUnresolvedReplacementColor */.xB:0);if(!h)return new WGLFillTemplate_K(j,null,x,0,0,0,0,0,0,0,0,0,F,e.effects,w,g);const{rect:_,width:b,height:L}=h,C=e.scaleX||1,T=_.x+definitions/* spritePadding */.hM,A=_.y+definitions/* spritePadding */.hM,B=T+b,G=A+L,I=(0,screenUtils/* pt2px */.Lz)(e.height);let R=C*I;"CIMHatchFill"===e.cim.type&&(R*=b/L);let S=I;S<=0&&(S=G-A),S<definitions/* maxSizeForU16Compression */.Tv&&(S*=definitions/* compressionFactorForU16 */.bg,F|=definitions/* bitsetFillHasPatternHeightPrecisionFactor */.ni),S=Math.round(S);let U=R;U<=0&&(U=B-T),U<definitions/* maxSizeForU16Compression */.Tv&&(U*=definitions/* compressionFactorForU16 */.bg,F|=definitions/* bitsetFillHasPatternWidthPrecisionFactor */.iw),U=Math.round(U);const v=(0,screenUtils/* pt2px */.Lz)(e.offsetX||0),O=(0,screenUtils/* pt2px */.Lz)(-e.offsetY||0),W=(0,number/* i1616to32 */.M9)(T,A),X=(0,number/* i1616to32 */.M9)(B,G);return new WGLFillTemplate_K(j,h,x,W,X,U,S,v,O,definitions/* compressionFactorForU16 */.bg,definitions/* compressionFactorForU16 */.bg,(0,GeometryUtils/* degToByte */.wV)(e.angle),F,e.effects,w,g)}static fromSimpleFill(t,l,r=!1){const{color:i}=t,s=i&&"esriSFSNull"!==t.style&&(0,color/* premultiplyAlphaRGBAArray */.Nm)(i)||0;let h=r?definitions/* bitsetGenericLockColor */.PT:0;const d=t.materialKey;let u;if(l){const{rect:t,width:e,height:o,pixelRatio:r}=l,i=t.x+definitions/* spritePadding */.hM,y=t.y+definitions/* spritePadding */.hM,x=i+e,M=y+o,g=(0,number/* i1616to32 */.M9)(i,y),F=(0,number/* i1616to32 */.M9)(x,M);let _=e/r;_<definitions/* maxSizeForU16Compression */.Tv&&(_*=definitions/* compressionFactorForU16 */.bg,h|=definitions/* bitsetFillHasPatternWidthPrecisionFactor */.iw),_=Math.round(_);let b=o/r;b<definitions/* maxSizeForU16Compression */.Tv&&(b*=definitions/* compressionFactorForU16 */.bg,h|=definitions/* bitsetFillHasPatternHeightPrecisionFactor */.ni),b=Math.round(b),u=new WGLFillTemplate_K(d,l,s,g,F,_,b,0,0,definitions/* compressionFactorForU16 */.bg,definitions/* compressionFactorForU16 */.bg,0,h,null,util/* defaultMinZoom */.$T,util/* defaultMaxZoom */.dL)}else u=new WGLFillTemplate_K(d,null,s,0,0,0,0,0,0,0,0,0,h,null,util/* defaultMinZoom */.$T,util/* defaultMaxZoom */.dL);return u._maybeAddLineTemplate(t),u}static fromPictureFill(e,l,r=!1){const i=definitions/* pictureFillColor */.Hi,{rect:s,width:h,height:u}=l,y=s.x+definitions/* spritePadding */.hM,x=s.y+definitions/* spritePadding */.hM,M=y+h,g=x+u,F=(0,number/* i1616to32 */.M9)(y,x),_=(0,number/* i1616to32 */.M9)(M,g);let b=r?definitions/* bitsetGenericLockColor */.PT:0,L=(0,screenUtils/* pt2px */.Lz)(e.width);L<definitions/* maxSizeForU16Compression */.Tv&&(L*=definitions/* compressionFactorForU16 */.bg,b|=definitions/* bitsetFillHasPatternWidthPrecisionFactor */.iw),L=Math.round(L);let C=(0,screenUtils/* pt2px */.Lz)(e.height);C<definitions/* maxSizeForU16Compression */.Tv&&(C*=definitions/* compressionFactorForU16 */.bg,b|=definitions/* bitsetFillHasPatternHeightPrecisionFactor */.ni),C=Math.round(C);const T=(0,screenUtils/* pt2px */.Lz)(e.xoffset),A=(0,screenUtils/* pt2px */.Lz)(-e.yoffset),B=e.materialKey,G=new WGLFillTemplate_K(B,l,i,F,_,L,C,T,A,definitions/* compressionFactorForU16 */.bg*e.xscale,definitions/* compressionFactorForU16 */.bg*e.yscale,0,b,null,util/* defaultMinZoom */.$T,util/* defaultMaxZoom */.dL);return G._maybeAddLineTemplate(e),G}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate.js
var WGLMarkerTemplate = __webpack_require__(11560);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTextTemplate.js
var WGLTextTemplate = __webpack_require__(109);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Lock.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class Lock_r{constructor(){this._resolver=null}isHeld(){return!!this._resolver}async acquire(){this._resolver?(await this._resolver.promise,await this.acquire()):this._resolver=(0,promiseUtils/* createResolver */.Tw)()}release(){const e=this._resolver;this._resolver=null,e?.resolve()}}async function Lock_s(e,r,s){try{await e.acquire(),await r(s),e.release()}catch(t){throw e.release(),t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js + 1 modules
var cimSymbolUtils = __webpack_require__(7965);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTemplateStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const S=Logger/* default */.A.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),WGLTemplateStore_w={sortKey:null,templates:new Array},WGLTemplateStore_k={isOutline:!1,placement:null,symbologyType:enums/* WGLSymbologyType */.w4.DEFAULT,vvFlags:0},WGLTemplateStore_C={...defaultsJSON/* errorPointSymbolJSON */.nC,hash:JSON.stringify(defaultsJSON/* errorPointSymbolJSON */.nC),materialKey:(0,MaterialKey/* createMaterialKey */.Zl)(enums/* WGLGeometryType */.ZG.MARKER,WGLTemplateStore_k)},WGLTemplateStore_L={...defaultsJSON/* errorPolylineSymbolJSON */.HW,hash:JSON.stringify(defaultsJSON/* errorPolylineSymbolJSON */.HW),materialKey:(0,MaterialKey/* createMaterialKey */.Zl)(enums/* WGLGeometryType */.ZG.LINE,WGLTemplateStore_k)},WGLTemplateStore_b={...defaultsJSON/* errorPolygonSymbolJSON */.b6,hash:JSON.stringify(defaultsJSON/* errorPolygonSymbolJSON */.b6),materialKey:(0,MaterialKey/* createMaterialKey */.Zl)(enums/* WGLGeometryType */.ZG.FILL,WGLTemplateStore_k)};function E(e,t){const r=e.length;return e.push(null),t.then((t=>e[r]=t)),e}function G(e){return null!=e&&!!(1&e)}function WGLTemplateStore_j(e){return"worker:port-closed"===e.name}class WGLTemplateStore_x{constructor(e,t){this._idCounter=1,this._templateIdCounter=1,this._idToTemplateGroup=new Map,this._symbolToTemplate=new Map,this._fetchQueue=[],this._idToResolver=new Map,this._cimTemplateCache=new Map,this._cimAnalyses=[],this._lock=new Lock_r,this._fetchResource=e,this._tileInfo=t}get _markerError(){return this._errorTemplates.marker[0]}get _fillError(){return this._errorTemplates.fill[0]}get _lineError(){return this._errorTemplates.line[0]}get _textError(){return this._errorTemplates.line[0]}createTemplateGroup(e,t,r=null){this._initErrorTemplates();const s=e.hash,i=this._symbolToTemplate.get(s);if(null!=i)return i;const a=new Array,o={sortKey:r,templates:a};t&&this._createMeshTemplates(a,t,!0),this._createMeshTemplates(a,e,!1);const l=this._createGroupId("expanded-cim"===e.type&&F(e));return this._idToTemplateGroup.set(l,o),this._symbolToTemplate.set(s,l),l}getTemplateGroup(e){return this._idToTemplateGroup.get(e)??WGLTemplateStore_w}getDynamicTemplateGroup(e){return this._idToTemplateGroup.has(e)?(G(e)||S.error("mapview-template-store",`Id ${e} does not refer to a dynamic template`),this._idToTemplateGroup.get(e)):WGLTemplateStore_w}getMosaicItem(e,t){const r=this._createTemplateId(),s=new Promise((e=>this._idToResolver.set(r,e)));return this._fetchQueue.push({symbol:e,id:r,glyphIds:t}),s}finalize(e){return this._fetchQueue.length||this._lock.isHeld()?Lock_s(this._lock,this._fetchAllQueuedResources.bind(this),e):Promise.resolve()}_initErrorTemplates(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],WGLTemplateStore_b,!1),marker:this._createMeshTemplates([],WGLTemplateStore_C,!1),line:this._createMeshTemplates([],WGLTemplateStore_L,!1)})}_fetchAllQueuedResources(t){if(!this._fetchQueue.length)return Promise.resolve();const s=this._fetchQueue,i=this._cimAnalyses;return this._fetchQueue=[],this._cimAnalyses=[],Promise.all(i).then((()=>this._fetchResource(s,t).then((e=>{for(const{id:t,mosaicItem:r}of e){this._idToResolver.get(t)(r),this._idToResolver.delete(t)}})))).catch((t=>{(0,promiseUtils/* isAbortError */.zf)(t)?this._fetchQueue=this._fetchQueue.concat(s):WGLTemplateStore_j(t)||S.error(new Error/* default */.A("mapview-template-store","Unable to fetch requested texture resources",t))}))}_createGroupId(e){return this._idCounter++<<1|(e?1:0)}_createTemplateId(){return this._templateIdCounter++}async _createSMS(e){const{spriteMosaicItem:t}=await this.getMosaicItem(e);return (0,Result.ok)(t,S)?WGLMarkerTemplate/* default */.A.fromSimpleMarker(e,t):this._markerError}async _createPMS(e){const{spriteMosaicItem:t}=await this.getMosaicItem(e);return (0,Result.ok)(t,S)?WGLMarkerTemplate/* default */.A.fromPictureMarker(e,t):this._markerError}async _createSFS(e,t){const{spriteMosaicItem:r}=await this.getMosaicItem(e);return (0,Result.ok)(r,S)?WGLFillTemplate_K.fromSimpleFill(e,r,t):this._fillError}async _createPFS(e,t){const{spriteMosaicItem:r}=await this.getMosaicItem(e);return (0,Result.ok)(r,S)?WGLFillTemplate_K.fromPictureFill(e,r,t):this._fillError}async _createSLS(e,t){const{spriteMosaicItem:r}=await this.getMosaicItem(e);return (0,Result.ok)(r,S)?K.fromSimpleLine(e,r):this._lineError}async _createLMS(e){const{spriteMosaicItem:t}=await this.getMosaicItem(e);return (0,Result.ok)(t,S)?WGLMarkerTemplate/* default */.A.fromLineSymbolMarker(e,t):this._markerError}async _createTS(e){const{glyphMosaicItems:t}=await this.getMosaicItem(e);return WGLTextTemplate/* default */.A.fromText(e,t??[])}async _createCIMText(e){const{glyphMosaicItems:t}=await this.getMosaicItem((0,cimSymbolUtils/* cimLayerToRasterizationInfo */.L)(e),(0,textUtils/* codepoints */.N)(e.text));return (0,Result.ok)(t,S)?WGLTextTemplate/* default */.A.fromCIMText(e,t,this._tileInfo):this._textError}async _createCIMFill(e){const{spriteMosaicItem:t}=await this.getMosaicItem((0,cimSymbolUtils/* cimLayerToRasterizationInfo */.L)(e));return (0,Result.ok)(t,S)?WGLFillTemplate_K.fromCIMFill(e,t,this._tileInfo):this._fillError}async _createCIMLine(e){const{spriteMosaicItem:t}=await this.getMosaicItem((0,cimSymbolUtils/* cimLayerToRasterizationInfo */.L)(e));return (0,Result.ok)(t,S)?K.fromCIMLine(e,t,this._tileInfo):this._lineError}async _createCIMMarker(e){const{spriteMosaicItem:t}=await this.getMosaicItem((0,cimSymbolUtils/* cimLayerToRasterizationInfo */.L)(e));return (0,Result.ok)(t,S)?WGLMarkerTemplate/* default */.A.fromCIMMarker(e,t,this._tileInfo):this._markerError}async _createCIM(e){const t=e.templateHash;let r=this._cimTemplateCache.get(t);if(null!=r)return r;switch(e.type){case"marker":r=await this._createCIMMarker(e);break;case"line":r=await this._createCIMLine(e);break;case"fill":r=await this._createCIMFill(e);break;case"text":r=await this._createCIMText(e)}return this._cimTemplateCache.set(t,r),r}async _createDynamicCIM(e){const t=e.templateHash;let r=this._cimTemplateCache.get(t);if(null!=r)return r;switch(e.type){case"marker":r=L.fromCIMMarker(e,this._tileInfo);break;case"line":r=WGLDynamicLineTemplate_d.fromCIMLine(e,this._tileInfo);break;case"fill":r=WGLDynamicFillTemplate_j.fromCIMFill(e,this._tileInfo);break;case"text":r=WGLDynamicTextTemplate_d.fromCIMText(e,this._tileInfo)}return this._cimTemplateCache.set(t,r),r}_createPrimitiveMeshTemplates(e,t,r){switch(t.type){case"esriSMS":return E(e,this._createSMS(t));case"esriPMS":return E(e,this._createPMS(t));case"esriSFS":return E(e,this._createSFS(t,r));case"line-marker":return E(e,this._createLMS(t));case"esriPFS":return E(e,this._createPFS(t,r));case"esriSLS":return E(e,this._createSLS(t,!1));case"esriTS":return E(e,this._createTS(t));default:return S.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),e}}_createMeshTemplates(e,t,r){if(t.type.includes("3d"))return S.error("3D symbols are not supported with MapView"),e;if("expanded-cim"===t.type){for(const r of t.layers)"function"==typeof r.materialHash?E(e,this._createDynamicCIM(r)):E(e,this._createCIM(r));return e}if("composite-symbol"===t.type){for(const s of t.layers)this._createPrimitiveMeshTemplates(e,s,r);return e}return"cim"===t.type||"label"===t.type||"web-style"===t.type?e:this._createPrimitiveMeshTemplates(e,t,r)}}const F=e=>{if(!e.layers)return!1;for(const t of e.layers)if("function"==typeof t.materialHash)return!0;return!1};


/***/ }),

/***/ 109:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_BidiText_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21870);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(89882);
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(63643);
/* harmony import */ var _alignmentUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(22610);
/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(83253);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(43556);
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(55429);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(59601);
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(53412);
/* harmony import */ var _WGLBaseTextTemplate_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(17884);
/* harmony import */ var _WGLMeshTemplate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(61771);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const z=5;class g extends((0,_WGLBaseTextTemplate_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A)(_WGLMeshTemplate_js__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A)){constructor(e,l,a,d,_,u,b,x,g,C,M,p,S,j,L,y,T,V,k,A,v,W,I,K){super(),this._xOffset=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)(S),this._yOffset=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)(j),this._decoration=C||"none",this._backgroundColor=W,this._borderLineColor=I,this._borderLineSize=K,this._color=_,this._haloColor=u,this._haloSize=Math.min(Math.floor(z*(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .toPt */ .cr)(a))),127),this._size=Math.min(Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)(l)),127);const R=Math.min(Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)(d||l)),127);this._referenceSize=Math.round(Math.sqrt(256*R)),this._scale=this._size/_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .glyphSize */ .eG,this._angle=p,this._justify=(0,_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getJustification */ .p1)(b||"center"),this._xAlignD=(0,_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getXAnchorDirection */ .xy)(b||"center"),this._yAlignD=(0,_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .getYAnchorDirection */ .UD)(x||"baseline"),this._baseline="baseline"===(x||"baseline"),this._bitset=(g===_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Alignment */ .C1.MAP?1:0)|(M?1:0)<<1;const B=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_6__/* .MaterialKeyBase */ .ar.load(e);B.sdf=!0,this._materialKey=B.data,this._lineWidth=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .pt2px */ .Lz)(L)||512,this._lineHeight=y||1,this._textPlacement=T,this._effects=V,this._isCIM=k??!1,this._minMaxZoom=(0,_number_js__WEBPACK_IMPORTED_MODULE_5__/* .i1616to32 */ .M9)(Math.round(A*_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .minMaxZoomPrecisionFactor */ .fq),Math.round(v*_definitions_js__WEBPACK_IMPORTED_MODULE_4__/* .minMaxZoomPrecisionFactor */ .fq))}static fromText(o,t){const r=o.font?.size,n=new g(o.materialKey,r,o.haloSize||0,r,o.color&&(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(o.color)||0,o.haloColor&&(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(o.haloColor)||0,o.horizontalAlignment,o.verticalAlignment,_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .Alignment */ .C1.SCREEN,o.font?.decoration,!1,o.angle||0,o.xoffset||0,o.yoffset||0,o.lineWidth||0,o.lineHeight||0,null,null,!1,_util_js__WEBPACK_IMPORTED_MODULE_10__/* .defaultMinZoom */ .$T,_util_js__WEBPACK_IMPORTED_MODULE_10__/* .defaultMaxZoom */ .dL,o.backgroundColor&&(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(o.backgroundColor),o.borderLineColor&&(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBAArray */ .Nm)(o.borderLineColor),o.borderLineSize),[,s]=(0,_core_BidiText_js__WEBPACK_IMPORTED_MODULE_0__/* .bidiText */ .y)(o.text);return n.bindTextInfo(t??[],s),n._vertexBoundsScale=o.maxVVSize&&r?o.maxVVSize/r:1,n}static fromCIMText(o,t,i){const r=o.scaleFactor||1,n=o.size*o.sizeRatio*r,[s,l]=(0,_util_js__WEBPACK_IMPORTED_MODULE_10__/* .getMinMaxZoom */ .My)(o.scaleInfo,i),m=new g(o.materialKey,n,o.outlineSize*o.sizeRatio,o.referenceSize,(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(o.color),(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(o.outlineColor),o.horizontalAlignment,o.verticalAlignment,o.alignment,o.decoration,o.colorLocked??!1,o.angle,o.offsetX*o.sizeRatio*r,o.offsetY*o.sizeRatio*r,o.lineWidth||512,1,o.markerPlacement,o.effects,!0,s,l,o.backgroundColor?(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(o.backgroundColor):void 0,o.borderLineColor?(0,_color_js__WEBPACK_IMPORTED_MODULE_3__/* .premultiplyAlphaRGBA */ .cz)(o.borderLineColor):void 0,o.borderLineWidth),[,h]=(0,_core_BidiText_js__WEBPACK_IMPORTED_MODULE_0__/* .bidiText */ .y)(o.text);return m.bindTextInfo(t,h),m._vertexBoundsScale=o.maxVVSize?o.maxVVSize/n:1,m}}


/***/ }),

/***/ 97557:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Tl: () => (/* binding */ S)
});

// UNUSED EXPORTS: ShapedGlyph, ShapingInfo

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat2d.js
var mat2d = __webpack_require__(94734);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat2df32.js
var mat2df32 = __webpack_require__(50499);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2.js
var vec2 = __webpack_require__(58680);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f32.js
var vec2f32 = __webpack_require__(48325);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js
var alignmentUtils = __webpack_require__(22610);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/number.js
var number = __webpack_require__(55429);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js
var Rect = __webpack_require__(60470);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/collisions/BoundingBox.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class BoundingBox_i{constructor(i,e,s,r){this.center=(0,vec2f32.f)(i,e),this.centerT=(0,vec2f32.c)(),this.halfWidth=s/2,this.halfHeight=r/2,this.width=s,this.height=r}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new BoundingBox_i(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,h=4){const i=Math.abs(t.centerT[0]-this.centerT[0]),e=Math.abs(t.centerT[1]-this.centerT[1]),s=(t.halfWidth+this.halfWidth+h)/i,r=(t.halfHeight+this.halfHeight+h)/e,n=Math.min(s,r);return Math.log2(n)}extend(t){const h=Math.min(this.xmin,t.xmin),i=Math.min(this.ymin,t.ymin),e=Math.max(this.xmax,t.xmax)-h,s=Math.max(this.ymax,t.ymax)-i,r=h+e/2,n=i+s/2;this.width=e,this.height=s,this.halfWidth=e/2,this.halfHeight=s/2,this.x=r,this.y=n}static deserialize(t){const h=t.readF32(),e=t.readF32(),s=t.readInt32(),r=t.readInt32();return new BoundingBox_i(h,e,s,r)}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/shapingUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=26,g=4,_=l+g,p=l-6,x=3,w=8,y=Math.PI/180,M=8,b=1.5;class B{constructor(t,s,e,i){this._rotationT=(0,mat2df32.c)(),this._xBounds=0,this._yBounds=0,this.minZoom=0,this.maxZoom=255,this._bounds=null;const n=e.rect,h=new Float32Array(8);t*=i,s*=i;const r=e.code?n.width*i:e.metrics.width,a=e.code?n.height*i:e.metrics.height;this.width=r,this.height=a,h[0]=t,h[1]=s,h[2]=t+r,h[3]=s,h[4]=t,h[5]=s+a,h[6]=t+r,h[7]=s+a,this._data=h,this._setTextureCoords(n),this._scale=i,this._mosaic=e,this.x=t,this.y=s,this.maxOffset=Math.max(t+r,s+a)}get mosaic(){return this._mosaic}set angle(t){this._angle=t,(0,mat2d.b)(this._rotationT,-t),this._setOffsets(this._data)}get angle(){return this._angle}get xTopLeft(){return this._data[0]}get yTopLeft(){return this._data[1]}get xBottomRight(){return this._data[6]}get yBottomRight(){return this._data[7]}get texcoords(){return this._texcoords}get textureBinding(){return this._mosaic.textureBinding}get offsets(){return this._offsets||this._setOffsets(this._data),this._offsets}get char(){return String.fromCharCode(this._mosaic.code)}get code(){return this._mosaic.code}get bounds(){if(!this._bounds){const{height:t,width:s}=this._mosaic.metrics,i=s*this._scale,n=Math.abs(t)*this._scale,r=new Float32Array(8);r[0]=this.x,r[1]=this.y,r[2]=this.x+i,r[3]=this.y,r[4]=this.x,r[5]=this.y+n,r[6]=this.x+i,r[7]=this.y+n;const a=(0,mat2d.m)((0,mat2df32.c)(),this._rotationT,this._transform);(0,mat2df32.t)(r,r,a);let c=1/0,d=1/0,f=0,m=0;for(let e=0;e<4;e++){const t=r[2*e],s=r[2*e+1];c=Math.min(c,t),d=Math.min(d,s),f=Math.max(f,t),m=Math.max(m,s)}const l=f-c,g=m-d,_=c+l/2,p=d+g/2;this._bounds=new BoundingBox_i(_,p,l,g)}return this._bounds}setTransform(t){this._transform=t,this._offsets=null}_setOffsets(t){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const s=this._offsets,i=new Float32Array(8),n=(0,mat2d.m)((0,mat2df32.c)(),this._rotationT,this._transform);(0,mat2df32.t)(i,t,n),s.upperLeft=(0,number/* i1616to32 */.M9)(i[0]*w,i[1]*w),s.upperRight=(0,number/* i1616to32 */.M9)(i[2]*w,i[3]*w),s.lowerLeft=(0,number/* i1616to32 */.M9)(i[4]*w,i[5]*w),s.lowerRight=(0,number/* i1616to32 */.M9)(i[6]*w,i[7]*w)}_setTextureCoords({x:t,y:s,width:e,height:i}){this._texcoords={upperLeft:(0,number/* i1616to32 */.M9)(t,s),upperRight:(0,number/* i1616to32 */.M9)(t+e,s),lowerLeft:(0,number/* i1616to32 */.M9)(t,s+i),lowerRight:(0,number/* i1616to32 */.M9)(t+e,s+i)}}}const L=(t,s)=>({code:0,page:0,sdf:!0,rect:new Rect/* default */.A(0,0,11,8),textureBinding:s,metrics:{advance:0,height:4,width:t,left:0,top:0}});function R(t,s){return t.forEach((t=>(0,vec2.t)(t,t,s))),{upperLeft:(0,number/* i1616to32 */.M9)(w*t[0][0],w*t[0][1]),upperRight:(0,number/* i1616to32 */.M9)(w*t[1][0],w*t[1][1]),lowerLeft:(0,number/* i1616to32 */.M9)(w*t[2][0],w*t[2][1]),lowerRight:(0,number/* i1616to32 */.M9)(w*t[3][0],w*t[3][1])}}class T{constructor(t,s,e){this._rotation=0,this._decorate(t,s,e),this.glyphs=t,this.bounds=this._createBounds(t),this.isMultiline=s.length>1,this._hasRotation=0!==e.angle,this._transform=this._createGlyphTransform(this.bounds,e),this._borderLineSize=e.borderLineSize,(e.borderLineSize||e.hasBackground)&&([this.bounds,this.background]=this.shapeBackground(this._transform));for(const i of t)i.setTransform(this._transform)}setRotation(t){if(0===t&&0===this._rotation)return;this._rotation=t;const i=this._transform,n=(0,mat2d.b)((0,mat2df32.c)(),t);(0,mat2d.m)(i,n,i);for(const s of this.glyphs)s.setTransform(this._transform)}_decorate(t,s,e){if(!e.decoration||"none"===e.decoration||!t.length)return;const i=e.scale,n="underline"===e.decoration?_:p,o=t[0].textureBinding;for(const h of s){const s=h.startX*i,e=h.startY*i,r=(h.width+h.glyphWidthEnd)*i;t.push(new B(s,e+n*i,L(r,o),1))}}shapeBackground(s){const e=M,{xmin:i,ymin:n,xmax:o,ymax:h,x:r,y:a,width:c,height:d}=this.bounds,f=Math.min(c,d)+2*e-b,m=Math.min((0,screenUtils/* pt2px */.Lz)(this._borderLineSize||0),f),l=(b+m)/2,g=this._borderLineSize?l:0,_=[i-e,n-e],p=[o+e,n-e],x=[i-e,h+e],w=[o+e,h+e],y=R([[_[0]-l,_[1]-l],[p[0]+l,p[1]-l],[_[0]+g,_[1]+g],[p[0]-g,p[1]+g]],s),B=R([[x[0]+g,x[1]-g],[w[0]-g,w[1]-g],[x[0]-l,x[1]+l],[w[0]+l,w[1]+l]],s),L=R([[_[0]-l,_[1]-l],[_[0]+g,_[1]+g],[x[0]-l,x[1]+l],[x[0]+g,x[1]-g]],s),T=R([[p[0]-g,p[1]+g],[p[0]+l,p[1]-l],[w[0]-g,w[1]-g],[w[0]+l,w[1]+l]],s),v={main:R([_,p,x,w],s),top:y,bot:B,left:L,right:T};return[new BoundingBox_i(r,a,c+2*l,d+2*l),v]}get boundsT(){const t=this.bounds,s=(0,vec2.s)((0,vec2f32.c)(),t.x,t.y);if((0,vec2.t)(s,s,this._transform),this._hasRotation){const e=Math.max(t.width,t.height);return new BoundingBox_i(s[0],s[1],e,e)}return new BoundingBox_i(s[0],s[1],t.width,t.height)}_createBounds(t){let s=1/0,e=1/0,i=0,n=0;for(const r of t)s=Math.min(s,r.xTopLeft),e=Math.min(e,r.yTopLeft),i=Math.max(i,r.xBottomRight),n=Math.max(n,r.yBottomRight);const o=i-s,h=n-e;return new BoundingBox_i(s+o/2,e+h/2,o,h)}_createGlyphTransform(t,s){const e=y*s.angle,h=(0,mat2df32.c)(),a=(0,vec2f32.c)();return (0,mat2d.t)(h,h,(0,vec2.s)(a,s.xOffset,-s.yOffset)),s.isCIM?(0,mat2d.r)(h,h,e):((0,mat2d.t)(h,h,(0,vec2.s)(a,t.x,t.y)),(0,mat2d.r)(h,h,e),(0,mat2d.t)(h,h,(0,vec2.s)(a,-t.x,-t.y))),h}}class v{constructor(t,s,e,i,n,o){this.glyphWidthEnd=0,this.startX=0,this.startY=0,this.start=Math.max(0,Math.min(s,e)),this.end=Math.max(0,Math.max(s,e)),this.end<t.length&&(this.glyphWidthEnd=t[this.end].metrics.width),this.width=i,this.yMin=n,this.yMax=o}}const j=t=>10===t,k=t=>32===t;function A(t,s,e){const i=new Array,n=1/e.scale,o=e.maxLineWidth*n,h=s?t.length-1:0,r=s?-1:t.length,a=s?-1:1;let c=h,d=0,f=0,m=c,u=m,l=0,g=1/0,_=0;for(;c!==r;){const{code:s,metrics:e}=t[c],n=Math.abs(e.top);if(j(s)||k(s)||(g=Math.min(g,n),_=Math.max(_,n+e.height)),j(s))c!==h&&(i.push(new v(t,m,c-a,d,g,_)),g=1/0,_=0),d=0,m=c+a,u=c+a,f=0;else if(k(s))u=c+a,f=0,l=e.advance,d+=e.advance;else if(d>o){if(u!==m){const s=u-2*a;d-=l,i.push(new v(t,m,s,d-f,g,_)),g=1/0,_=0,m=u,d=f}else i.push(new v(t,m,c-a,d,g,_)),g=1/0,_=0,m=c,u=c,d=0;d+=e.advance,f+=e.advance}else d+=e.advance,f+=e.advance;c+=a}const p=new v(t,m,c-a,d,g,_);return p.start>=0&&p.end<t.length&&i.push(p),i}function O(t,s){let e=0;for(let o=0;o<t.length;o++){const{width:s}=t[o];e=Math.max(s,e)}const i="underline"===s.decoration?g:0,n=t[0].yMin;return{x:0,y:n,height:t[t.length-1].yMax+s.lineHeight*(t.length-1)+i-n,width:e}}function S(t,s,e){const i=e.scale,n=new Array,o=A(t,s,e),h=O(o,e),{vAlign:r,hAlign:a}=e,c=r===alignmentUtils/* VAlign */.gy.Baseline?1:0,f=c?0:r-1,m=(1-c)*-h.y+f*(h.height/2)+(c?1:0)*-l;for(let d=0;d<o.length;d++){const{start:s,end:h,width:r}=o[d];let c=-1*(a+1)*(r/2)-x;const f=d*e.lineHeight+m-x;o[d].startX=c,o[d].startY=f;for(let e=s;e<=h;e++){const s=t[e];if(j(s.code))continue;const o=new B(c+s.metrics.left,f-s.metrics.top,s,i);c+=s.metrics.advance,n.push(o)}}return new T(n,o,e)}


/***/ }),

/***/ 53412:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $T: () => (/* binding */ n),
/* harmony export */   My: () => (/* binding */ v),
/* harmony export */   S8: () => (/* binding */ r),
/* harmony export */   b7: () => (/* binding */ c),
/* harmony export */   dL: () => (/* binding */ o),
/* harmony export */   jb: () => (/* binding */ t),
/* harmony export */   xg: () => (/* binding */ u)
/* harmony export */ });
/* unused harmony exports isExtent, isMultipoint, isPoint, isPolygon, isPolyline, len */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=0,o=100;function t(n,o,t){return n[0]=o[0]-t[0],n[1]=o[1]-t[1],n}function i(n,o){return Math.sqrt(n*n+o*o)}function r(n){const o=i(n[0],n[1]);n[0]/=o,n[1]/=o}function u(n,o){return i(n[0]-o[0],n[1]-o[1])}function c(n=2){return 1/Math.max(n,1)}function e(n){return void 0!==n.xmin&&void 0!==n.ymin&&void 0!==n.xmax&&void 0!==n.ymax}function a(n){return void 0!==n.points}function f(n){return void 0!==n.x&&void 0!==n.y}function m(n){return void 0!==n.paths}function d(n){return void 0!==n.rings}function v(t,i){return[!!t?.minScale&&i.scaleToZoom(t.minScale)||n,!!t?.maxScale&&i.scaleToZoom(t.maxScale)||o]}


/***/ }),

/***/ 55429:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   M9: () => (/* binding */ w),
/* harmony export */   Pl: () => (/* binding */ M),
/* harmony export */   Ss: () => (/* binding */ x)
/* harmony export */ });
/* unused harmony exports i16, i32, i8, i8816to32, numTo32, toFloat32, toUint32, u16, u32, u4u4to8, u8 */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=new Float32Array(1),r=new Uint32Array(n.buffer);function t(n,r,t){return Math.round(Math.max(Math.min(n,t),r))}function u(n){return t(n,-128,127)}function e(n){return t(n,-32768,32767)}function o(n){return t(n,-2147483648,2147483647)}function f(n){return t(n,0,255)}function i(n){return t(n,0,65535)}function c(n){return t(n,0,4294967295)}function a(t){return n[0]=t,r[0]}function h(t){return r[0]=t,n[0]}function M(n){return[255&n,(65280&n)>>>8,(16711680&n)>>>16,(4278190080&n)>>>24]}function m(n,r){return 15&n|(15&r)<<4}function w(n,r){return 65535&n|r<<16}function x(n,r,t,u){return 255&n|(255&r)<<8|(255&t)<<16|u<<24}function y(n,r,t){return 255&n|(255&r)<<8|t<<16}function A(n){return 0|n}


/***/ }),

/***/ 97394:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("background/background.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 13294:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(75472);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r={shaders:{vertexShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.vert"),fragmentShader:(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__/* .resolveIncludes */ .Q)("tileInfo/tileInfo.frag")},attributes:new Map([["a_pos",0]])};


/***/ }),

/***/ 75472:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Q: () => (/* binding */ n)
});

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/shaderRepository.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const shaderRepository_e={background:{"background.frag":"uniform lowp vec4 u_color;\nvoid main() {\ngl_FragColor = u_color;\n}","background.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_coord_range;\nuniform mediump float u_depth;\nvoid main() {\nvec3 v_pos = u_dvsMat3 * vec3(u_coord_range * a_pos, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\n}"},bitBlit:{"bitBlit.frag":"uniform lowp sampler2D u_tex;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nlowp vec4 color = texture2D(u_tex, v_uv);\ngl_FragColor = color * u_opacity;\n}","bitBlit.vert":"attribute vec2 a_pos;\nattribute vec2 a_tex;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_pos , 0.0, 1.0);\nv_uv = a_tex;\n}"},blend:{"blend.frag":"precision mediump float;\nuniform sampler2D u_layerTexture;\nuniform lowp float u_opacity;\nuniform lowp float u_inFadeOpacity;\n#ifndef NORMAL\nuniform sampler2D u_backbufferTexture;\n#endif\nvarying mediump vec2 v_uv;\nfloat rgb2v(in vec3 c) {\nreturn max(c.x, max(c.y, c.z));\n}\nvec3 rgb2hsv(in vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(in vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec3 tint(in vec3 Cb, in vec3 Cs) {\nfloat vIn = rgb2v(Cb);\nvec3 hsvTint = rgb2hsv(Cs);\nvec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\nreturn hsv2rgb(hsvOut);\n}\nfloat overlay(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (1.0 - 2.0 * (1.0 - Cs ) * (1.0 - Cb)) + step(0.5, Cs) * (2.0 * Cs * Cb);\n}\nfloat colorDodge(in float Cb, in float Cs) {\nreturn (Cb == 0.0) ? 0.0 : (Cs == 1.0) ? 1.0 : min(1.0, Cb / (1.0 - Cs));\n}\nfloat colorBurn(in float Cb, in float Cs) {\nreturn (Cb == 1.0) ? 1.0 : (Cs == 0.0) ? 0.0 : 1.0 - min(1.0, (1.0 - Cb) / Cs);\n}\nfloat hardLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * (2.0 * Cs * Cb) + step(0.5, Cs) * (1.0 - 2.0 * (1.0 - Cs) * (1.0 - Cb));\n}\nfloat reflectBlend(in float Cb, in float Cs) {\nreturn (Cs == 1.0) ? Cs : min(Cb * Cb / (1.0 - Cs), 1.0);\n}\nfloat softLight(in float Cb, in float Cs) {\nif (Cs <= 0.5) {\nreturn Cb - (1.0 - 2.0 * Cs) * Cb * (1.0 - Cb);\n}\nif (Cb <= 0.25) {\nreturn Cb + (2.0 * Cs - 1.0) * Cb * ((16.0 * Cb - 12.0) * Cb + 3.0);\n}\nreturn Cb + (2.0 * Cs - 1.0) * (sqrt(Cb) - Cb);\n}\nfloat vividLight(in float Cb, in float Cs) {\nreturn (1.0 - step(0.5, Cs)) * colorBurn(Cb, 2.0 * Cs) + step(0.5, Cs) * colorDodge(Cb, (2.0 * (Cs - 0.5)));\n}\nfloat minv3(in vec3 c) {\nreturn min(min(c.r, c.g), c.b);\n}\nfloat maxv3(in vec3 c) {\nreturn max(max(c.r, c.g), c.b);\n}\nfloat lumv3(in vec3 c) {\nreturn dot(c, vec3(0.3, 0.59, 0.11));\n}\nfloat satv3(vec3 c) {\nreturn maxv3(c) - minv3(c);\n}\nvec3 clipColor(vec3 color) {\nfloat lum = lumv3(color);\nfloat mincol = minv3(color);\nfloat maxcol = maxv3(color);\nif (mincol < 0.0) {\ncolor = lum + ((color - lum) * lum) / (lum - mincol);\n}\nif (maxcol > 1.0) {\ncolor = lum + ((color - lum) * (1.0 - lum)) / (maxcol - lum);\n}\nreturn color;\n}\nvec3 setLum(vec3 cbase, vec3 clum) {\nfloat lbase = lumv3(cbase);\nfloat llum = lumv3(clum);\nfloat ldiff = llum - lbase;\nvec3 color = cbase + vec3(ldiff);\nreturn clipColor(color);\n}\nvec3 setLumSat(vec3 cbase, vec3 csat, vec3 clum)\n{\nfloat minbase = minv3(cbase);\nfloat sbase = satv3(cbase);\nfloat ssat = satv3(csat);\nvec3 color;\nif (sbase > 0.0) {\ncolor = (cbase - minbase) * ssat / sbase;\n} else {\ncolor = vec3(0.0);\n}\nreturn setLum(color, clum);\n}\nvoid main() {\nvec4 src = texture2D(u_layerTexture, v_uv);\n#ifdef NORMAL\ngl_FragColor = src *  u_opacity;\n#else\nvec4 dst = texture2D(u_backbufferTexture, v_uv);\nvec3 Cs = src.a == 0.0 ? src.rgb : vec3(src.rgb / src.a);\nvec3 Cb = dst.a == 0.0 ? dst.rgb : vec3(dst.rgb / dst.a);\nfloat as = u_opacity * src.a;\nfloat ab = dst.a;\n#ifdef DESTINATION_OVER\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb, as + ab - as * ab);\n#endif\n#ifdef SOURCE_IN\nvec4 color = vec4(as * Cs * ab, as * ab);\nvec4 fadeColor = (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor = color + fadeColor;\n#endif\n#ifdef DESTINATION_IN\nvec4 color = vec4(ab * Cb * as, ab * as);\nvec4 fadeColor = (1.0 - u_opacity) * u_inFadeOpacity * vec4(ab * Cb, ab);\ngl_FragColor = color + fadeColor;\n#endif\n#ifdef SOURCE_OUT\ngl_FragColor = vec4(as * Cs * (1.0 - ab), as * (1.0 - ab));\n#endif\n#ifdef DESTINATION_OUT\ngl_FragColor = vec4(ab * Cb * (1.0 - as), ab * (1.0 - as));\n#endif\n#ifdef SOURCE_ATOP\ngl_FragColor = vec4(as * Cs * ab + ab * Cb * (1.0 - as), ab);\n#endif\n#ifdef DESTINATION_ATOP\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb * as, as);\n#endif\n#ifdef XOR\ngl_FragColor = vec4(as * Cs * (1.0 - ab) + ab * Cb * (1.0 - as),\nas * (1.0 - ab) + ab * (1.0 - as));\n#endif\n#ifdef MULTIPLY\ngl_FragColor = vec4(as * Cs * ab * Cb + (1.0 - ab) * as * Cs + (1.0 - as) * ab * Cb,\nas + ab * (1.0 - as));\n#endif\n#ifdef SCREEN\ngl_FragColor = vec4((Cs + Cb - Cs * Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef OVERLAY\nvec3 f = vec3(overlay(Cb.r, Cs.r), overlay(Cb.g, Cs.g), overlay(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DARKEN\ngl_FragColor = vec4(min(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LIGHTER\ngl_FragColor = vec4(as * Cs + ab * Cb, as + ab);\n#endif\n#ifdef LIGHTEN\ngl_FragColor = vec4(max(Cs, Cb) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_DODGE\nvec3 f = clamp(vec3(colorDodge(Cb.r, Cs.r), colorDodge(Cb.g, Cs.g), colorDodge(Cb.b, Cs.b)), vec3(0.0), vec3(1.0));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR_BURN\nvec3 f = vec3(colorBurn(Cb.r, Cs.r), colorBurn(Cb.g, Cs.g), colorBurn(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HARD_LIGHT\nvec3 f = vec3(hardLight(Cb.r, Cs.r), hardLight(Cb.g, Cs.g), hardLight(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SOFT_LIGHT\nvec3 f = vec3(softLight(Cb.r, Cs.r), softLight(Cb.g, Cs.g), softLight(Cb.b, Cs.b));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef DIFFERENCE\ngl_FragColor = vec4(abs(Cb - Cs) * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef EXCLUSION\nvec3 f = Cs + Cb - 2.0 * Cs * Cb;\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef INVERT\ngl_FragColor = vec4((1.0 - Cb) * as * ab + Cb * ab * (1.0 - as), ab);\n#endif\n#ifdef VIVID_LIGHT\nvec3 f = vec3(clamp(vividLight(Cb.r, Cs.r), 0.0, 1.0),\nclamp(vividLight(Cb.g, Cs.g), 0.0, 1.0),\nclamp(vividLight(Cb.b, Cs.b), 0.0, 1.0));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef HUE\nvec3 f = setLumSat(Cs,Cb,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef SATURATION\nvec3 f = setLumSat(Cb,Cs,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef COLOR\nvec3 f = setLum(Cs,Cb);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef LUMINOSITY\nvec3 f = setLum(Cb,Cs);\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef PLUS\ngl_FragColor = clamp(vec4(src.r + Cb.r, src.g + Cb.g, src.b + Cb.b, as + ab), 0.0, 1.0);\n#endif\n#ifdef MINUS\ngl_FragColor = vec4(clamp(vec3(Cb.r - src.r, Cb.g - src.g, Cb.b - src.b), 0.0, 1.0), ab * as);\n#endif\n#ifdef AVERAGE\nvec3 f = (Cb + Cs) / 2.0;\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#ifdef REFLECT\nvec3 f = clamp(vec3(reflectBlend(Cb.r, Cs.r),\nreflectBlend(Cb.g, Cs.g),\nreflectBlend(Cb.b, Cs.b)), vec3(0.0), vec3(1.0));\ngl_FragColor = vec4(f * as * ab + Cs * as * (1.0 - ab) + Cb * ab *(1.0 - as),\nas + ab * (1.0 - as));\n#endif\n#endif\n}","blend.vert":"attribute vec2 a_position;\nvarying mediump vec2 v_uv;\nvoid main(void) {\ngl_Position = vec4(a_position , 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"},debug:{overlay:{"overlay.frag":"precision mediump float;\nvarying vec4 v_color;\nvoid main(void) {\ngl_FragColor = v_color;\n}","overlay.vert":"attribute vec3 a_PositionAndFlags;\nuniform mat3 u_dvsMat3;\nuniform vec4 u_colors[4];\nuniform float u_opacities[4];\nvarying vec4 v_color;\nvoid main(void) {\nvec2 position = a_PositionAndFlags.xy;\nfloat flags = a_PositionAndFlags.z;\nint colorIndex = int(mod(flags, 4.0));\nvec4 color;\nfor (int i = 0; i < 4; i++) {\ncolor = u_colors[i];\nif (i == colorIndex) {\nbreak;\n}\n}\nint opacityIndex = int(mod(floor(flags / 4.0), 4.0));\nfloat opacity;\nfor (int i = 0; i < 4; i++) {\nopacity = u_opacities[i];\nif (i == opacityIndex) {\nbreak;\n}\n}\nv_color = color * opacity;\ngl_Position = vec4((u_dvsMat3 * vec3(position, 1.0)).xy, 0.0, 1.0);\n}"}},dot:{dot:{"dot.frag":"precision mediump float;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nuniform highp float u_tileZoomFactor;\nvoid main()\n{\nfloat dist = length(gl_PointCoord - vec2(.5, .5)) * 2.;\nfloat alpha = smoothstep(0., 1., v_invEdgeRatio * (dist - v_dotRatio) + 1.);\ngl_FragColor = v_color * alpha;\n}","dot.vert":"precision highp float;\nattribute vec2 a_pos;\nuniform sampler2D u_texture;\nuniform highp mat3 u_dvsMat3;\nuniform highp float u_tileZoomFactor;\nuniform highp float u_dotSize;\nuniform highp float u_pixelRatio;\nvarying vec2 v_pos;\nvarying vec4 v_color;\nvarying float v_dotRatio;\nvarying float v_invEdgeRatio;\nconst float EPSILON = 0.000001;\nvoid main()\n{\nmat3 tileToTileTexture = mat3(  1., 0., 0.,\n0., -1., 0.,\n0., 1., 1.  );\nvec3 texCoords = tileToTileTexture * vec3(a_pos.xy / 512., 1.);\nv_color = texture2D(u_texture, texCoords.xy);\nfloat smoothEdgeWidth = max(u_dotSize / 2., 1.) ;\nfloat z = 0.;\nz += 2.0 * step(v_color.a, EPSILON);\ngl_PointSize = (smoothEdgeWidth + u_dotSize);\ngl_Position = vec4((u_dvsMat3 * vec3(a_pos + .5, 1.)).xy, z, 1.);\nv_dotRatio = u_dotSize / gl_PointSize;\nv_invEdgeRatio = -1. / ( smoothEdgeWidth / gl_PointSize );\ngl_PointSize  *= (u_pixelRatio * u_tileZoomFactor);\n}"}},filtering:{"bicubic.glsl":"vec4 computeWeights(float v) {\nfloat b = 1.0 / 6.0;\nfloat v2 = v * v;\nfloat v3 = v2 * v;\nfloat w0 = b * (-v3 + 3.0 * v2 - 3.0 * v + 1.0);\nfloat w1 = b * (3.0 * v3  - 6.0 * v2 + 4.0);\nfloat w2 = b * (-3.0 * v3 + 3.0 * v2 + 3.0 * v + 1.0);\nfloat w3 = b * v3;\nreturn vec4(w0, w1, w2, w3);\n}\nvec4 bicubicOffsetsAndWeights(float v) {\nvec4 w = computeWeights(v);\nfloat g0 = w.x + w.y;\nfloat g1 = w.z + w.w;\nfloat h0 = 1.0 - (w.y / g0) + v;\nfloat h1 = 1.0 + (w.w / g1) - v;\nreturn vec4(h0, h1, g0, g1);\n}\nvec4 sampleBicubicBSpline(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 eX = vec2(1.0 / texSize.x, 0.0);\nvec2 eY = vec2(0.0, 1.0 / texSize.y);\nvec2 texel = coords * texSize - 0.5;\nvec3 hgX = bicubicOffsetsAndWeights(fract(texel).x).xyz;\nvec3 hgY = bicubicOffsetsAndWeights(fract(texel).y).xyz;\nvec2 coords10 = coords + hgX.x * eX;\nvec2 coords00 = coords - hgX.y * eX;\nvec2 coords11 = coords10 + hgY.x * eY;\nvec2 coords01 = coords00 + hgY.x * eY;\ncoords10 = coords10 - hgY.y * eY;\ncoords00 = coords00 - hgY.y * eY;\nvec4 color00 = texture2D(sampler, coords00);\nvec4 color10 = texture2D(sampler, coords10);\nvec4 color01 = texture2D(sampler, coords01);\nvec4 color11 = texture2D(sampler, coords11);\ncolor00 = mix(color00, color01, hgY.z);\ncolor10 = mix(color10, color11, hgY.z);\ncolor00 = mix(color00, color10, hgX.z);\nreturn color00;\n}","bilinear.glsl":"vec4 sampleBilinear(sampler2D sampler, vec2 coords, vec2 texSize) {\nvec2 texelStart = floor(coords * texSize);\nvec2 coord0 = texelStart / texSize;\nvec2 coord1 = (texelStart +  vec2(1.0, 0.0)) / texSize;\nvec2 coord2 = (texelStart +  vec2(0.0, 1.0)) / texSize;\nvec2 coord3 = (texelStart +  vec2(1.0, 1.0)) / texSize;\nvec4 color0 = texture2D(sampler, coord0);\nvec4 color1 = texture2D(sampler, coord1);\nvec4 color2 = texture2D(sampler, coord2);\nvec4 color3 = texture2D(sampler, coord3);\nvec2 blend = fract(coords * texSize);\nvec4 color01 = mix(color0, color1, blend.x);\nvec4 color23 = mix(color2, color3, blend.x);\nvec4 color = mix(color01, color23, blend.y);\n#ifdef NNEDGE\nfloat alpha = floor(color0.a * color1.a * color2.a * color3.a + 0.5);\ncolor = color * alpha + (1.0 - alpha) * texture2D(sampler, coords);\n#endif\nreturn color;\n}","epx.glsl":"vec4 sampleEPX(sampler2D sampler, float size, vec2 coords, vec2 texSize) {\nvec2 invSize = 1.0 / texSize;\nvec2 texel = coords * texSize;\nvec2 texel_i = floor(texel);\nvec2 texel_frac = fract(texel);\nvec4 colorP = texture2D(sampler, texel_i * invSize);\nvec4 colorP1 = vec4(colorP);\nvec4 colorP2 = vec4(colorP);\nvec4 colorP3 = vec4(colorP);\nvec4 colorP4 = vec4(colorP);\nvec4 colorA = texture2D(sampler, (texel_i - vec2(0.0, 1.0)) * invSize);\nvec4 colorB = texture2D(sampler, (texel_i + vec2(1.0, 0.0)) * invSize);\nvec4 colorC = texture2D(sampler, (texel_i - vec2(1.0, 0.0)) * invSize);\nvec4 colorD = texture2D(sampler, (texel_i + vec2(0.0, 1.0)) * invSize);\nif (colorC == colorA && colorC != colorD && colorA != colorB) {\ncolorP1 = colorA;\n}\nif (colorA == colorB && colorA != colorC && colorB != colorD) {\ncolorP2 = colorB;\n}\nif (colorD == colorC && colorD != colorB && colorC != colorA) {\ncolorP3 = colorC;\n}\nif (colorB == colorD && colorB != colorA && colorD != colorC) {\ncolorP4 = colorD;\n}\nvec4 colorP12 = mix(colorP1, colorP2, texel_frac.x);\nvec4 colorP34 = mix(colorP1, colorP2, texel_frac.x);\nreturn mix(colorP12, colorP34, texel_frac.y);\n}"},fx:{integrate:{"integrate.frag":"precision mediump float;\nuniform lowp sampler2D u_sourceTexture;\nuniform lowp sampler2D u_maskTexture;\nuniform mediump float u_zoomLevel;\nuniform highp float u_timeDelta;\nuniform highp float u_animationTime;\nvarying highp vec2 v_texcoord;\n#include <materials/utils.glsl>\nvoid main()\n{\n#ifdef DELTA\nvec4 texel = texture2D(u_sourceTexture, v_texcoord);\nvec4 data0 = texture2D(u_maskTexture, v_texcoord);\nfloat flags = data0.r * 255.0;\nfloat groupMinZoom = data0.g * 255.0;\nfloat isVisible = getFilterBit(flags, 0);\nfloat wouldClip = step(groupMinZoom, u_zoomLevel);\nfloat direction = wouldClip * 1.0 + (1.0 - wouldClip) * -1.0;\nfloat dt = u_timeDelta / max(u_animationTime, 0.0001);\nvec4 nextState = vec4(texel + direction * dt);\ngl_FragColor =  vec4(nextState);\n#elif defined(UPDATE)\nvec4 texel = texture2D(u_sourceTexture, v_texcoord);\ngl_FragColor = texel;\n#endif\n}","integrate.vert":"precision mediump float;\nattribute vec2 a_pos;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n}"}},heatmap:{heatmapResolve:{"heatmapResolve.frag":"precision highp float;\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 4.0\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform sampler2D u_texture;\nuniform sampler2D u_gradient;\nuniform vec2 u_densityMinAndInvRange;\nuniform float u_densityNormalization;\nvarying vec2 v_uv;\nvoid main() {\nvec4 data = texture2D(u_texture, v_uv);\nfloat density = data.r * COMPRESSION_FACTOR;\ndensity *= u_densityNormalization;\ndensity = (density - u_densityMinAndInvRange.x) * u_densityMinAndInvRange.y;\nvec4 color = texture2D(u_gradient, vec2(density, 0.5));\ngl_FragColor = vec4(color.rgb * color.a, color.a);\n}","heatmapResolve.vert":"precision highp float;\nattribute vec2 a_pos;\nvarying vec2 v_uv;\nvoid main() {\nv_uv = a_pos;\ngl_Position = vec4(a_pos * 2.0 - 1.0, 1., 1.);\n}"}},highlight:{"blur.frag":"varying mediump vec2 v_texcoord;\nuniform mediump vec4 u_direction;\nuniform mediump mat4 u_channelSelector;\nuniform mediump float u_sigma;\nuniform sampler2D u_texture;\nmediump float gauss1(mediump vec2 dir) {\nreturn exp(-dot(dir, dir) / (2.0 * u_sigma * u_sigma));\n}\nmediump vec4 selectChannel(mediump vec4 sample) {\nreturn u_channelSelector * sample;\n}\nvoid accumGauss1(mediump float i, inout mediump float tot, inout mediump float weight) {\nmediump float w = gauss1(i * u_direction.xy);\ntot += selectChannel(texture2D(u_texture, v_texcoord + i * u_direction.zw))[3] * w;\nweight += w;\n}\nvoid main(void) {\nmediump float tot = 0.0;\nmediump float weight = 0.0;\naccumGauss1(-5.0, tot, weight);\naccumGauss1(-4.0, tot, weight);\naccumGauss1(-3.0, tot, weight);\naccumGauss1(-2.0, tot, weight);\naccumGauss1(-1.0, tot, weight);\naccumGauss1(0.0, tot, weight);\naccumGauss1(1.0, tot, weight);\naccumGauss1(2.0, tot, weight);\naccumGauss1(3.0, tot, weight);\naccumGauss1(4.0, tot, weight);\naccumGauss1(5.0, tot, weight);\ngl_FragColor = vec4(0.0, 0.0, 0.0, tot / weight);\n}","highlight.frag":"varying mediump vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform mediump float u_sigma;\nuniform sampler2D u_shade;\nuniform mediump vec2 u_minMaxDistance;\nmediump float estimateDistance() {\nmediump float y = texture2D(u_texture, v_texcoord)[3];\nconst mediump float y0 = 0.5;\nmediump float m0 = 1.0 / (sqrt(2.0 * 3.1415) * u_sigma);\nmediump float d = (y - y0) / m0;\nreturn d;\n}\nmediump vec4 shade(mediump float d) {\nmediump float mappedDistance = (d - u_minMaxDistance.x) / (u_minMaxDistance.y - u_minMaxDistance.x);\nmappedDistance = clamp(mappedDistance, 0.0, 1.0);\nreturn texture2D(u_shade, vec2(mappedDistance, 0.5));\n}\nvoid main(void) {\nmediump float d = estimateDistance();\ngl_FragColor = shade(d);\n}","textured.vert":"attribute mediump vec2 a_position;\nattribute mediump vec2 a_texcoord;\nvarying mediump vec2 v_texcoord;\nvoid main(void) {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},magnifier:{"magnifier.frag":"uniform lowp vec4 u_background;\nuniform mediump sampler2D u_readbackTexture;\nuniform mediump sampler2D u_maskTexture;\nuniform mediump sampler2D u_overlayTexture;\nuniform bool u_maskEnabled;\nuniform bool u_overlayEnabled;\nvarying mediump vec2 v_texCoord;\nconst lowp float barrelFactor = 1.1;\nlowp vec2 barrel(lowp vec2 uv) {\nlowp vec2 uvn = uv * 2.0 - 1.0;\nif (uvn.x == 0.0 && uvn.y == 0.0) {\nreturn vec2(0.5, 0.5);\n}\nlowp float theta = atan(uvn.y, uvn.x);\nlowp float r = pow(length(uvn), barrelFactor);\nreturn r * vec2(cos(theta), sin(theta)) * 0.5 + 0.5;\n}\nvoid main(void)\n{\nlowp vec4 color = texture2D(u_readbackTexture, barrel(v_texCoord));\ncolor = (color + (1.0 - color.a) * u_background);\nlowp float mask = u_maskEnabled ? texture2D(u_maskTexture, v_texCoord).a : 1.0;\ncolor *= mask;\nlowp vec4 overlayColor = u_overlayEnabled ? texture2D(u_overlayTexture, v_texCoord) : vec4(0);\ngl_FragColor = overlayColor + (1.0 - overlayColor.a) * color;\n}","magnifier.vert":"precision mediump float;\nattribute mediump vec2 a_pos;\nuniform mediump vec4 u_drawPos;\nvarying mediump vec2 v_texCoord;\nvoid main(void)\n{\nv_texCoord = a_pos;\ngl_Position = vec4(u_drawPos.xy + vec2(a_pos - 0.5) * u_drawPos.zw, 0.0, 1.0);\n}"},materials:{"attributeData.glsl":"uniform highp sampler2D u_attributeData0;\nuniform highp sampler2D u_attributeData1;\nuniform highp sampler2D u_attributeData2;\nuniform highp sampler2D u_attributeData3;\nuniform highp sampler2D u_attributeData4;\nuniform highp sampler2D u_attributeData5;\nuniform highp int u_attributeTextureSize;\nhighp vec2 getAttributeDataCoords(in highp vec3 id) {\nhighp vec3  texel = unpackDisplayIdTexel(id);\nhighp float size = float(u_attributeTextureSize);\nhighp float u32 = float(int(texel.r) + int(texel.g) * 256 + int(texel.b) * 256 * 256);\nhighp float col = mod(u32, size);\nhighp float row = (u32 - col) / size;\nhighp float u = col / size;\nhighp float v = row / size;\nreturn vec2(u, v);\n}\nhighp vec2 getAttributeDataTextureCoords(in highp vec3 id) {\nreturn (getAttributeDataCoords(id) * 2.0) - 1.0 + (.5 / vec2(u_attributeTextureSize));\n}\nhighp vec4 getAttributeData0(in highp vec3 id) {\nvec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData0, coords);\n}\nhighp vec4 getAttributeData1(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData1, coords);\n}\nhighp vec4 getAttributeData2(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData2, coords);\n}\nhighp vec4 getAttributeData3(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData3, coords);\n}\nhighp vec4 getAttributeData4(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData4, coords);\n}\nhighp vec4 getAttributeData5(in highp vec3 id) {\nhighp vec2 coords = getAttributeDataCoords(id);\nreturn texture2D(u_attributeData5, coords);\n}\nfloat u88VVToFloat(in vec2 v) {\nbool isMagic = v.x == 255.0 && v.y == 255.0;\nif (isMagic) {\nreturn NAN_MAGIC_NUMBER;\n}\nreturn (v.x + v.y * float(0x100)) - 32768.0;\n}","barycentric.glsl":"float inTriangle(vec3 bary) {\nvec3 absBary = abs(bary);\nreturn step((absBary.x + absBary.y + absBary.z), 1.05);\n}\nvec3 xyToBarycentric(in vec2 pos, in vec2 v0,  in vec2 v1, in vec2 v2) {\nmat3 xyToBarycentricMat3 = mat3(\nv1.x * v2.y - v2.x * v1.y, v2.x * v0.y - v0.x * v2.y, v0.x * v1.y - v1.x * v0.y,\nv1.y - v2.y, v2.y - v0.y, v0.y - v1.y,\nv2.x - v1.x, v0.x - v2.x, v1.x - v0.x\n);\nfloat A2 = v0.x * (v1.y - v2.y) + v1.x * (v2.y - v0.y) + v2.x * (v0.y - v1.y);\nreturn (1. / A2) * xyToBarycentricMat3 * vec3(1., pos);\n}","constants.glsl":"const float C_DEG_TO_RAD = 3.14159265359 / 180.0;\nconst float C_256_TO_RAD = 3.14159265359 / 128.0;\nconst float C_RAD_TO_DEG = 180.0 / 3.141592654;\nconst float POSITION_PRECISION = 1.0 / 8.0;\nconst float FILL_POSITION_PRECISION = 1.0 / 1.0;\nconst float SOFT_EDGE_RATIO = 1.0;\nconst float THIN_LINE_WIDTH_FACTOR = 1.1;\nconst float THIN_LINE_HALF_WIDTH = 1.0;\nconst float EXTRUDE_SCALE_PLACEMENT_PADDING = 1.0 / 4.0;\nconst float OFFSET_PRECISION = 1.0 / 8.0;\nconst float OUTLINE_SCALE = 1.0 / 5.0;\nconst float SDF_FONT_SIZE = 24.0;\nconst float MAX_SDF_DISTANCE = 8.0;\nconst float PLACEMENT_PADDING = 8.0;\nconst float EPSILON = 0.00001;\nconst float EPSILON_HITTEST = 0.05;\nconst int MAX_FILTER_COUNT = 2;\nconst int ATTR_VV_SIZE = 0;\nconst int ATTR_VV_COLOR = 1;\nconst int ATTR_VV_OPACITY = 2;\nconst int ATTR_VV_ROTATION = 3;\nconst highp float NAN_MAGIC_NUMBER = 1e-30;\nconst int BITSET_GENERIC_LOCK_COLOR = 1;\nconst int BITSET_GENERIC_CONSIDER_ALPHA_ONLY = 4;\nconst int BITSET_MARKER_ALIGNMENT_MAP = 0;\nconst int BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE = 2;\nconst int BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY = 3;\nconst int BITSET_TYPE_FILL_OUTLINE = 0;\nconst int BITSET_FILL_RANDOM_PATTERN_OFFSET = 2;\nconst int BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR = 3;\nconst int BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR = 5;\nconst int BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR = 6;\nconst int BITSET_LINE_SCALE_DASH = 2;",fill:{"common.glsl":"#include <materials/symbologyTypeUtils.glsl>\n#ifdef PATTERN\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform lowp vec4 u_isActive[ 2 ];\nuniform highp float u_dotValue;\nuniform highp float u_tileDotsOverArea;\nuniform highp float u_dotTextureDotCount;\nuniform mediump float u_tileZoomFactor;\n#endif\nvarying highp vec3 v_id;\nvarying lowp vec4 v_color;\nvarying lowp float v_opacity;\nvarying mediump vec4 v_aux1;\n#ifdef PATTERN\nvarying mediump vec2 v_tileTextureCoord;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvarying lowp float v_isOutline;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvarying highp vec2 v_dotTextureCoords;\nvarying highp vec4 v_dotThresholds[ 2 ];\n#endif","fill.frag":"precision highp float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/fill/common.glsl>\n#ifdef PATTERN\nuniform lowp sampler2D u_texture;\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nuniform mediump mat4 u_dotColors[ 2 ];\nuniform sampler2D u_dotTextures[ 2 ];\nuniform vec4 u_dotBackgroundColor;\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\nlowp vec4 drawLine() {\nfloat v_lineWidth = v_aux1.x;\nvec2  v_normal    = v_aux1.yz;\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineWidth,\nv_opacity,\nv_id\n);\nreturn shadeLine(inputs);\n}\n#endif\nlowp vec4 drawFill() {\nlowp vec4 out_color = vec4(0.);\n#ifdef HITTEST\nout_color = v_color;\n#elif defined(PATTERN)\nmediump vec4 v_tlbr = v_aux1;\nmediump vec2 normalizedTextureCoord = mod(v_tileTextureCoord, 1.0);\nmediump vec2 samplePos = mix(v_tlbr.xy, v_tlbr.zw, normalizedTextureCoord);\nlowp vec4 color = texture2D(u_texture, samplePos);\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\nout_color = v_opacity * v_color * color;\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY && !defined(HIGHLIGHT)\nvec4 textureThresholds0 = texture2D(u_dotTextures[0], v_dotTextureCoords);\nvec4 textureThresholds1 = texture2D(u_dotTextures[1], v_dotTextureCoords);\nvec4 difference0 = v_dotThresholds[0] - textureThresholds0;\nvec4 difference1 = v_dotThresholds[1] - textureThresholds1;\n#ifdef DD_DOT_BLENDING\nvec4 isPositive0 = step(0.0, difference0);\nvec4 isPositive1 = step(0.0, difference1);\nfloat weightSum = dot(isPositive0, difference0) + dot(isPositive1, difference1);\nfloat lessThanEqZero = step(weightSum, 0.0);\nfloat greaterThanZero = 1.0 - lessThanEqZero ;\nfloat divisor = (weightSum + lessThanEqZero);\nvec4 weights0 = difference0 * isPositive0 / divisor;\nvec4 weights1 = difference1 * isPositive1 / divisor;\nvec4 dotColor = u_dotColors[0] * weights0 + u_dotColors[1] * weights1;\nvec4 preEffectColor = greaterThanZero * dotColor + lessThanEqZero * u_dotBackgroundColor;\n#else\nfloat diffMax = max(max4(difference0), max4(difference1));\nfloat lessThanZero = step(diffMax, 0.0);\nfloat greaterOrEqZero = 1.0 - lessThanZero;\nvec4 isMax0 = step(diffMax, difference0);\nvec4 isMax1 = step(diffMax, difference1);\nvec4 dotColor = u_dotColors[0] * isMax0 + u_dotColors[1] * isMax1;\nvec4 preEffectColor = greaterOrEqZero * dotColor + lessThanZero * u_dotBackgroundColor;\n#endif\nout_color = preEffectColor;\n#else\nout_color = v_opacity * v_color;\n#endif\n#ifdef HIGHLIGHT\nout_color.a = 1.0;\n#endif\nreturn out_color;\n}\nvoid main() {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (v_isOutline > 0.5) {\ngl_FragColor = drawLine();\n} else {\ngl_FragColor = drawFill();\n}\n#else\ngl_FragColor = drawFill();\n#endif\n}","fill.vert":"#include <materials/symbologyTypeUtils.glsl>\n#define PACKED_LINE\nprecision highp float;\nattribute float a_bitset;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nattribute float a_inverseArea;\nvec4 a_color = vec4(0.0, 0.0, 0.0, 1.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#else\nattribute vec4 a_color;\nattribute vec4 a_aux2;\nattribute vec4 a_aux3;\n#ifndef SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\nattribute vec4 a_aux1;\nattribute vec2 a_zoomRange;\n#else\nvec2 a_zoomRange = vec2(0.0, 10000.0);\n#endif\n#endif\nuniform vec2 u_tileOffset;\nuniform vec2 u_maxIntNumOfCrossing;\n#include <util/encoding.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/fill/common.glsl>\n#include <materials/fill/hittest.glsl>\nconst float INV_SCALE_COMPRESSION_FACTOR = 1.0 / 128.0;\nconst float MAX_REPRESENTABLE_INT = 16777216.0;\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 dotThreshold(vec4 featureAttrOverFeatureArea, float dotValue, float tileDotsOverArea) {\nreturn featureAttrOverFeatureArea * (1.0 / dotValue)  * (1.0 / tileDotsOverArea);\n}\n#endif\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\nvoid drawLine(out lowp vec4 out_color, out highp vec3 out_pos) {\nLineData outputs = buildLine(\nout_pos,\na_id,\na_pos,\na_color,\n(a_aux3.xy - 128.) / 16.,\n(a_aux3.zw - 128.) / 16.,\n0.,\na_aux2.z / 16.,\na_bitset,\nvec4(0.),\nvec2(0.),\na_aux2.w / 16.\n);\nv_id      = outputs.id;\nv_opacity = outputs.opacity;\nv_aux1    = vec4(outputs.lineHalfWidth, outputs.normal, 0.);\nout_color = outputs.color;\n}\n#endif\nvoid drawFill(out lowp vec4 out_color, out highp vec3 out_pos) {\nfloat a_bitSet = a_bitset;\nout_color = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity = getOpacity();\nv_id      = norm(a_id);\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nmat3 tileToTileNormalized = mat3(  2. / 512.,  0.,  0.,\n0., -2. / 512.,  0.,\n-1.,  1.,  1.  );\nout_pos   = tileToTileNormalized * vec3((a_pos * FILL_POSITION_PRECISION), 1.);\n#else\nout_pos   = u_dvsMat3 * vec3(a_pos * FILL_POSITION_PRECISION, 1.);\n#endif\n#ifdef PATTERN\nvec4  a_tlbr   = a_aux1;\nfloat a_width  = a_aux2.x;\nfloat a_height = a_aux2.y;\nvec2  a_offset = a_aux2.zw;\nvec2  a_scale  = a_aux3.xy;\nfloat a_angle  = a_aux3.z;\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_WIDTH_PRECISION_FACTOR) > 0.5) {\na_width *= INV_SCALE_COMPRESSION_FACTOR;\n}\nif (getBit(a_bitset, BITSET_FILL_HAS_PATTERN_HEIGHT_PRECISION_FACTOR) > 0.5) {\na_height *= INV_SCALE_COMPRESSION_FACTOR;\n}\nvec2 scale = INV_SCALE_COMPRESSION_FACTOR * a_scale;\nfloat width = u_zoomFactor * a_width * scale.x;\nfloat height = u_zoomFactor * a_height * scale.y;\nfloat angle = C_256_TO_RAD * a_angle;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nfloat dx = 0.0;\nfloat dy = 0.0;\nif (getBit(a_bitset, BITSET_FILL_RANDOM_PATTERN_OFFSET) > 0.5) {\nfloat id = rgba2float(vec4(a_id, 0.0));\ndx = rand(vec2(id, 0.0));\ndy = rand(vec2(0.0, id));\n}\nmat3 patternMatrix = mat3(cosA / width, sinA / height, 0,\n-sinA / width, cosA / height, 0,\ndx,            dy,           1);\nvec2 patternSize = vec2(a_width, a_height);\nvec2 numPatternsPerMaxInt = vec2(MAX_REPRESENTABLE_INT) / patternSize;\nvec2 maxIntCrossingOffsetCorrection = patternSize * fract(u_maxIntNumOfCrossing * numPatternsPerMaxInt);\nvec2 tileOffset = u_tileOffset + maxIntCrossingOffsetCorrection - 0.5 * patternSize;\ntileOffset = vec2(tileOffset.x * cosA - tileOffset.y * sinA, tileOffset.x * sinA + tileOffset.y * cosA);\ntileOffset = mod(tileOffset, patternSize);\nvec2 symbolOffset = u_zoomFactor * scale * vec2(a_offset - tileOffset) / vec2(width, height);\nv_tileTextureCoord = (patternMatrix * vec3(a_pos * FILL_POSITION_PRECISION, 1.0)).xy - symbolOffset;\nv_aux1 = a_tlbr / u_mosaicSize.xyxy;\nv_sampleAlphaOnly = getBit(a_bitset, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\nif (getBit(a_bitSet, BITSET_FILL_HAS_UNRESOLVED_REPLACEMENT_COLOR) > 0.5) {\n#ifdef VV_COLOR\nv_sampleAlphaOnly *= (1.0 - float(isNan(VV_ADATA[ATTR_VV_COLOR]))) * (1.0 - getBit(a_bitSet, BITSET_GENERIC_LOCK_COLOR));\n#else\nv_sampleAlphaOnly = 0.0;\n#endif\n}\n#elif SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_DOT_DENSITY\nvec4 ddAttributeData0 = getAttributeData2(a_id) * u_isActive[0] * a_inverseArea;\nvec4 ddAttributeData1 = getAttributeData3(a_id) * u_isActive[1] * a_inverseArea;\nfloat size = u_tileZoomFactor * 512.0 * 1.0 / u_pixelRatio;\nv_dotThresholds[0] = dotThreshold(ddAttributeData0, u_dotValue, u_tileDotsOverArea);\nv_dotThresholds[1] = dotThreshold(ddAttributeData1, u_dotValue, u_tileDotsOverArea);\nv_dotTextureCoords = (a_pos * FILL_POSITION_PRECISION + 0.5) / size;\n#endif\n}\n#ifdef HITTEST\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nif (getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE) > 0.5) {\nout_pos = vec3(0., 0., 2.);\nreturn;\n}\n#endif\nhittestFill(out_color, out_pos);\ngl_PointSize = 1.0;\n}\n#elif defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nvoid draw(out lowp vec4 out_color, out highp vec3 out_pos) {\nv_isOutline = getBit(a_bitset, BITSET_TYPE_FILL_OUTLINE);\nif (v_isOutline > 0.5) {\ndrawLine(out_color, out_pos);\n} else {\ndrawFill(out_color, out_pos);\n}\n}\n#else\n#define draw drawFill\n#endif\nvoid main()\n{\nINIT;\nhighp vec3 pos  = vec3(0.);\nhighp vec4 color  = vec4(0.);\ndraw(color, pos);\nv_color = color;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}","hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestFill(\nout lowp vec4 out_color,\nout highp vec3 out_pos\n) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * FILL_POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * FILL_POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * FILL_POSITION_PRECISION, 1.);\nfloat hittestDist = u_hittestDist;\nfloat dist = distPointTriangle(u_hittestPos, pos.xy, pos1.xy, pos2.xy);\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist < 0. || dist >= hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist == 0. ? (1. / 255.) : 0.);\n}\n#endif"},hittest:{"common.glsl":"#ifdef HITTEST\nuniform float u_hittestDist;\nuniform highp vec2 u_hittestPos;\nfloat projectScalar(vec2 a, vec2 b) {\nreturn dot(a, normalize(b));\n}\nfloat distPointSegment(vec2 p0, vec2 p1, vec2 p2) {\nvec2 L = p2 - p1;\nvec2 A = p0 - p1;\nfloat projAL = projectScalar(A, L);\nfloat t = clamp(projAL / length(L), 0., 1.);\nreturn distance(p0, p1 + t * (p2 - p1));\n}\nvoid hittestMarker(out lowp vec4 out_color, out highp vec3 out_pos, in highp vec3 pos, float size) {\nfloat dist = distance(pos, vec3(u_hittestPos, 1.));\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif ((dist - size) > u_hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, (dist - size) < 0. ? (1. / 255.) : 0.);\n}\nfloat intersectPointTriangleBary(vec2 p, vec2 a, vec2 b, vec2 c) {\nreturn inTriangle(xyToBarycentric(p, a, b, c));\n}\nfloat distPointTriangle(vec2 p, vec2 a, vec2 b, vec2 c) {\nvec2 ba = b - a;\nvec2 ca = c - a;\nfloat crossProduct = ba.x * ca.y - ca.x * ba.y;\nbool isParallel = crossProduct < EPSILON_HITTEST && crossProduct > -EPSILON_HITTEST;\nif (isParallel) {\nreturn -1.;\n}\nif (intersectPointTriangleBary(p.xy, a, b, c) == 1.) {\nreturn 0.;\n}\nfloat distAB = distPointSegment(p, a, b);\nfloat distBC = distPointSegment(p, b, c);\nfloat distCA = distPointSegment(p, c, a);\nreturn min(min(distAB, distBC), distCA);\n}\n#endif"},icon:{"common.glsl":"#include <util/encoding.glsl>\nuniform lowp vec2 u_mosaicSize;\nvarying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying highp vec4 v_sizeTex;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nuniform lowp sampler2D u_texture;\n#ifdef SDF\nvarying lowp vec4 v_outlineColor;\nvarying mediump float v_outlineWidth;\nvarying mediump float v_distRatio;\nvarying mediump float v_overridingOutlineColor;\nvarying mediump float v_isThin;\n#endif\n#ifdef SDF\nvec4 getColor(vec2 v_size, vec2 v_tex) {\n#ifdef HITTEST\nlowp vec4 fillPixelColor = vec4(1.0);\n#else\nlowp vec4 fillPixelColor = v_color;\n#endif\nfloat d = 0.5 - rgba2float(texture2D(u_texture, v_tex));\nfloat size = max(v_size.x, v_size.y);\nfloat dist = d * size * SOFT_EDGE_RATIO * v_distRatio;\nfillPixelColor *= clamp(0.5 - dist, 0.0, 1.0);\nfloat outlineWidth = v_outlineWidth;\n#ifdef HIGHLIGHT\noutlineWidth = max(outlineWidth, 4.0 * v_isThin);\n#endif\nif (outlineWidth > 0.25) {\nlowp vec4 outlinePixelColor = v_overridingOutlineColor * v_color + (1.0 - v_overridingOutlineColor) * v_outlineColor;\nfloat clampedOutlineSize = min(outlineWidth, size);\noutlinePixelColor *= clamp(0.5 - abs(dist) + clampedOutlineSize * 0.5, 0.0, 1.0);\nreturn v_opacity * ((1.0 - outlinePixelColor.a) * fillPixelColor + outlinePixelColor);\n}\nreturn v_opacity * fillPixelColor;\n}\n#else\nvec4 getColor(vec2 _v_size, vec2 v_tex) {\nlowp vec4 texColor = texture2D(u_texture, v_tex);\nreturn v_opacity * texColor * v_color;\n}\n#endif",heatmapAccumulate:{"common.glsl":"varying lowp vec4 v_hittestResult;\nvarying mediump vec2 v_offsetFromCenter;\nvarying highp float v_fieldValue;","heatmapAccumulate.frag":"precision mediump float;\n#include <materials/icon/heatmapAccumulate/common.glsl>\n#ifdef HEATMAP_PRECISION_HALF_FLOAT\n#define COMPRESSION_FACTOR 0.25\n#else\n#define COMPRESSION_FACTOR 1.0\n#endif\nuniform lowp sampler2D u_texture;\nvoid main() {\n#ifdef HITTEST\ngl_FragColor = v_hittestResult;\n#else\nfloat radius = length(v_offsetFromCenter);\nfloat shapeWeight = step(radius, 1.0);\nfloat oneMinusRadiusSquared = 1.0 - radius * radius;\nfloat kernelWeight = oneMinusRadiusSquared * oneMinusRadiusSquared;\ngl_FragColor = vec4(shapeWeight * kernelWeight * v_fieldValue * COMPRESSION_FACTOR);\n#endif\n}","heatmapAccumulate.vert":"precision highp float;\nattribute vec2 a_vertexOffset;\nvec4 a_color = vec4(0.0);\nvec2 a_zoomRange = vec2(0.0, 10000.0);\nuniform float u_radius;\nuniform float u_isFieldActive;\n#include <materials/vcommon.glsl>\n#include <materials/hittest/common.glsl>\n#include <materials/icon/heatmapAccumulate/common.glsl>\nvoid main() {\nfloat filterFlags = getFilterFlags();\n#ifdef HITTEST\nhighp vec4 out_hittestResult = vec4(0.);\nhighp vec3 out_pos = vec3(0.);\nvec3 pos = u_viewMat3 * u_tileMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nhittestMarker(out_hittestResult, out_pos, pos, u_radius);\nv_hittestResult = out_hittestResult;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(a_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\nv_offsetFromCenter = sign(a_vertexOffset);\nv_fieldValue = getAttributeData2(a_id).x * u_isFieldActive + 1.0 - u_isFieldActive;\nvec3 centerPos = u_dvsMat3 * vec3(a_pos * POSITION_PRECISION, 1.0);\nvec3 vertexPos = centerPos + u_displayViewMat3 * vec3(v_offsetFromCenter, 0.0) * u_radius;\ngl_Position = vec4(clip(a_color, vertexPos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},"hittest.glsl":"#ifdef HITTEST\n#include <materials/hittest/common.glsl>\nattribute vec2 a_vertexOffset1;\nattribute vec2 a_vertexOffset2;\nattribute vec2 a_texCoords1;\nattribute vec2 a_texCoords2;\nvec2 getTextureCoords(in vec3 bary, in vec2 texCoords0, in vec2 texCoords1, in vec2 texCoords2) {\nreturn texCoords0 * bary.x + texCoords1 * bary.y + texCoords2 * bary.z;\n}\nvoid hittestIcon(\ninout lowp vec4 out_color,\nout highp vec3 out_pos,\nin vec3 pos,\nin vec3 offset,\nin vec2 size,\nin float scaleFactor,\nin float isMapAligned\n) {\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nvec3 posBase = u_viewMat3 * u_tileMat3  * pos;\nvec3 offset1 = scaleFactor * vec3(a_vertexOffset1 / 16.0, 0.);\nvec3 offset2 = scaleFactor * vec3(a_vertexOffset2 / 16.0, 0.);\nvec2 pos0    = (posBase + getMatrixNoDisplay(isMapAligned) * offset).xy;\nvec2 pos1    = (posBase + getMatrixNoDisplay(isMapAligned) * offset1).xy;\nvec2 pos2    = (posBase + getMatrixNoDisplay(isMapAligned) * offset2).xy;\nvec3 bary0 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary1 = xyToBarycentric(u_hittestPos + vec2(0., -u_hittestDist), pos0, pos1, pos2);\nvec3 bary2 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, -u_hittestDist), pos0, pos1, pos2);\nvec3 bary3 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary4 = xyToBarycentric(u_hittestPos, pos0, pos1, pos2);\nvec3 bary5 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, 0.), pos0, pos1, pos2);\nvec3 bary6 = xyToBarycentric(u_hittestPos + vec2(-u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec3 bary7 = xyToBarycentric(u_hittestPos + vec2(0., u_hittestDist), pos0, pos1, pos2);\nvec3 bary8 = xyToBarycentric(u_hittestPos + vec2(u_hittestDist, u_hittestDist), pos0, pos1, pos2);\nvec2 tex0 = a_texCoords  / u_mosaicSize;\nvec2 tex1 = a_texCoords1 / u_mosaicSize;\nvec2 tex2 = a_texCoords2 / u_mosaicSize;\nfloat alphaSum = 0.;\nalphaSum += inTriangle(bary0) * getColor(size, getTextureCoords(bary0, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary1) * getColor(size, getTextureCoords(bary1, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary2) * getColor(size, getTextureCoords(bary2, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary3) * getColor(size, getTextureCoords(bary3, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary4) * getColor(size, getTextureCoords(bary4, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary5) * getColor(size, getTextureCoords(bary5, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary6) * getColor(size, getTextureCoords(bary6, tex0, tex1, tex2)).a;\nalphaSum += inTriangle(bary7) * getColor(size, getTextureCoords(bary7, tex0, tex1, tex2)).a;\nout_pos.z += step(alphaSum, .05) * 2.0;\nout_color = vec4(1. / 255., 0., 0., alphaSum / 255.);\n}\n#endif","icon.frag":"precision mediump float;\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/icon/common.glsl>\nvoid main()\n{\n#ifdef HITTEST\nvec4 color = v_color;\n#else\nvec4 color = getColor(v_sizeTex.xy, v_sizeTex.zw);\n#endif\n#ifdef HIGHLIGHT\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","icon.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/icon/common.glsl>\n#include <materials/icon/hittest.glsl>\nfloat getMarkerScaleFactor(inout vec2 size, in float referenceSize) {\n#ifdef VV_SIZE\nfloat f = getSize(size.y) / size.y;\nfloat sizeFactor = size.y / referenceSize;\nreturn getSize(referenceSize) / referenceSize;\n#else\nreturn 1.;\n#endif\n}\nvoid main()\n{\nINIT;\nfloat a_bitSet = a_bitSetAndDistRatio.x;\nvec3  pos           = vec3(a_pos * POSITION_PRECISION, 1.0);\nvec2  size          = a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec3  offset        = vec3(a_vertexOffset / 16.0, 0.);\nfloat outlineSize   = a_sizeAndOutlineWidth.z * a_sizeAndOutlineWidth.z / 128.0;\nfloat isMapAligned  = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nfloat referenceSize = a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0;\nfloat scaleSymbolProportionally = getBit(a_bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\nfloat scaleFactor               = getMarkerScaleFactor(size, referenceSize);\nsize.xy     *= scaleFactor;\noffset.xy   *= scaleFactor;\noutlineSize *= scaleSymbolProportionally * (scaleFactor - 1.0) + 1.0;\nvec2 v_tex   = a_texCoords / u_mosaicSize;\nfloat filterFlags = getFilterFlags();\nv_color    = getColor(a_color, a_bitSet, BITSET_GENERIC_LOCK_COLOR);\nv_opacity  = getOpacity();\nv_id       = norm(a_id);\nv_pos      = u_dvsMat3 * pos + getMatrix(isMapAligned) * getRotation()  * offset;\nv_sizeTex  = vec4(size.xy, v_tex.xy);\n#ifdef SDF\nv_isThin   = getBit(a_bitSet, BITSET_MARKER_OUTLINE_ALLOW_COLOR_OVERRIDE);\n#ifdef VV_COLOR\nv_overridingOutlineColor = v_isThin;\n#else\nv_overridingOutlineColor = 0.0;\n#endif\nv_outlineWidth = min(outlineSize, max(max(size.x, size.y) - 0.99, 0.0));\nv_outlineColor = a_outlineColor;\nv_distRatio = a_bitSetAndDistRatio.y / 128.0;\n#endif\n#ifdef HITTEST\nhighp vec4 out_color = vec4(0.);\nhighp vec3 out_pos   = vec3(0.);\nhittestIcon(out_color, out_pos, pos, offset, size, scaleFactor, isMapAligned);\nv_color = out_color;\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},label:{"common.glsl":"uniform mediump float u_zoomLevel;\nuniform mediump float u_mapRotation;\nuniform mediump float u_mapAligned;\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying mediump vec2 v_tex;\nvarying mediump vec4 v_color;\nvarying lowp vec4 v_animation;","label.frag":"#include <materials/text/text.frag>","label.vert":"precision highp float;\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texAndSize;\nattribute vec4 a_refSymbolAndPlacementOffset;\nattribute vec4 a_glyphData;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nuniform float u_mapRotation;\nuniform float u_mapAligned;\nfloat getZ(in float minZoom, in float maxZoom, in float angle) {\nfloat glyphAngle = angle * 360.0 / 254.0;\nfloat mapAngle = u_mapRotation * 360.0 / 254.0;\nfloat diffAngle = min(360.0 - abs(mapAngle - glyphAngle), abs(mapAngle - glyphAngle));\nfloat z = 0.0;\nz += u_mapAligned * (2.0 * (1.0 - step(minZoom, u_currentZoom)));\nz += u_mapAligned * 2.0 * step(90.0, diffAngle);\nz += 2.0 * (1.0 - step(u_currentZoom, maxZoom));\nreturn z;\n}\nvoid main()\n{\nINIT;\nfloat groupMinZoom    = getMinZoom();\nfloat glyphMinZoom    = a_glyphData.x;\nfloat glyphMaxZoom    = a_glyphData.y;\nfloat glyphAngle      = a_glyphData.z;\nfloat a_isBackground  = a_glyphData.w;\nfloat a_minZoom          = max(groupMinZoom, glyphMinZoom);\nfloat a_placementPadding = a_refSymbolAndPlacementOffset.x * EXTRUDE_SCALE_PLACEMENT_PADDING;\nvec2  a_placementDir     = unpack_u8_nf32(a_refSymbolAndPlacementOffset.zw);\nfloat a_refSymbolSize    = a_refSymbolAndPlacementOffset.y;\nfloat fontSize           = a_texAndSize.z;\nfloat haloSize           = a_texAndSize.w * OUTLINE_SCALE;\nvec2  vertexOffset = a_vertexOffset * OFFSET_PRECISION;\nvec3  pos          = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat z            = getZ(a_minZoom, glyphMaxZoom, glyphAngle);\nfloat fontScale    = fontSize / SDF_FONT_SIZE;\nfloat halfSize     = getSize(a_refSymbolSize) / 2.0;\nfloat animation    = pow(getAnimationState(), vec4(2.0)).r;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor = (isBackground + isText) * a_color;\nv_color     = animation * ((1.0 - u_isHaloPass) * nonHaloColor + (u_isHaloPass * a_haloColor));\nv_opacity   = 1.0;\nv_tex       = a_texCoords / u_mosaicSize;\nv_edgeDistanceOffset = u_isHaloPass * haloSize / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\nvec2 placementOffset = a_placementDir * (halfSize + a_placementPadding);\nvec3 glyphOffset     = u_displayMat3 * vec3(vertexOffset + placementOffset, 0.0);\nvec3 v_pos           = vec3((u_dvsMat3 * pos + glyphOffset).xy, z);\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\ngl_Position = vec4(v_pos, 1.0);\n#ifdef DEBUG\nv_color = vec4(a_color.rgb, z == 0.0 ? 1.0 : 0.645);\n#endif\n}"},line:{"common.glsl":"varying lowp vec4 v_color;\nvarying highp vec3 v_id;\nvarying mediump vec2 v_normal;\nvarying mediump float v_lineHalfWidth;\nvarying lowp float v_opacity;\n#ifdef PATTERN\nvarying mediump vec4 v_tlbr;\nvarying mediump vec2 v_patternSize;\n#endif\n#if defined(PATTERN) || defined(SDF)\nvarying highp float v_accumulatedDistance;\n#endif\n#ifdef SDF\nvarying mediump float v_lineWidthRatio;\n#endif","hittest.glsl":"#include <materials/hittest/common.glsl>\n#ifdef HITTEST\nattribute vec2 a_pos1;\nattribute vec2 a_pos2;\nvoid hittestLine(out lowp vec4 out_color, out highp vec3 out_pos, float halfWidth) {\nvec3 pos        = u_viewMat3 * u_tileMat3 * vec3(a_pos  * POSITION_PRECISION, 1.);\nvec3 pos1       = u_viewMat3 * u_tileMat3 * vec3(a_pos1 * POSITION_PRECISION, 1.);\nvec3 pos2       = u_viewMat3 * u_tileMat3 * vec3(a_pos2 * POSITION_PRECISION, 1.);\nvec3 outTextureCoords = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nfloat dist = min(distPointSegment(u_hittestPos, pos.xy, pos1.xy),\ndistPointSegment(u_hittestPos, pos.xy, pos2.xy)) - halfWidth;\nout_pos = vec3(getAttributeDataTextureCoords(a_id), 0.0);\nif (dist >= u_hittestDist) {\nout_pos.z += 2.0;\n}\nout_color = vec4(1. / 255., 0, 0, dist <= 0. ? (1. / 255.) : 0.);\n}\n#endif","line.frag":"precision lowp float;\n#include <util/encoding.glsl>\n#include <materials/constants.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.frag>\n#ifdef HITTEST\nvoid main() {\ngl_FragColor = v_color;\n}\n#else\nvoid main() {\nLineData inputs = LineData(\nv_color,\nv_normal,\nv_lineHalfWidth,\nv_opacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr,\nv_patternSize,\n#endif\n#ifdef SDF\nv_lineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance,\n#endif\n#endif\nv_id\n);\ngl_FragColor = shadeLine(inputs);\n}\n#endif","line.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_offsetAndNormal;\nattribute vec2 a_accumulatedDistanceAndHalfWidth;\nattribute vec4 a_tlbr;\nattribute vec4 a_segmentDirection;\nattribute vec2 a_aux;\nattribute vec2 a_zoomRange;\n#include <materials/vcommon.glsl>\n#include <materials/symbologyTypeUtils.glsl>\n#include <materials/line/common.glsl>\n#include <materials/line/hittest.glsl>\n#include <materials/shared/line/common.glsl>\n#include <materials/shared/line/line.vert>\n#ifdef HITTEST\nvoid draw() {\nfloat aa        = 0.5 * u_antialiasing;\nfloat a_halfWidth = a_accumulatedDistanceAndHalfWidth.y / 16.;\nfloat a_cimHalfWidth = a_aux.x / 16. ;\nvec2  a_offset = a_offsetAndNormal.xy / 16.;\nfloat baseWidth = getBaseLineHalfWidth(a_halfWidth, a_cimHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nhighp vec3 pos  = vec3(0.);\nv_color = vec4(0.);\nhittestLine(v_color, pos, halfWidth);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#else\nvoid draw()\n{\nhighp vec3 pos = vec3(0.);\nLineData outputs = buildLine(\npos,\na_id,\na_pos,\na_color,\na_offsetAndNormal.xy / 16.,\na_offsetAndNormal.zw / 16.,\na_accumulatedDistanceAndHalfWidth.x,\na_accumulatedDistanceAndHalfWidth.y / 16.,\na_segmentDirection.w,\na_tlbr,\na_segmentDirection.xy / 16.,\na_aux.x / 16.\n);\nv_id              = outputs.id;\nv_color           = outputs.color;\nv_normal          = outputs.normal;\nv_lineHalfWidth   = outputs.lineHalfWidth;\nv_opacity         = outputs.opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nv_tlbr          = outputs.tlbr;\nv_patternSize   = outputs.patternSize;\n#endif\n#ifdef SDF\nv_lineWidthRatio = outputs.lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nv_accumulatedDistance = outputs.accumulatedDistance;\n#endif\n#endif\ngl_Position = vec4(clip(outputs.color, pos, getFilterFlags(), a_zoomRange), 1.0);\n}\n#endif\nvoid main() {\nINIT;\ndraw();\n}"},pie:{"pie.frag":"precision mediump float;\n#include <util/atan2.glsl>\n#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/icon/common.glsl>\nvarying float v_size;\nvarying vec2 v_offset;\nvarying vec2 v_filteredSectorToColorId[NUMBER_OF_FIELDS];\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nuniform lowp vec4 u_colors[NUMBER_OF_FIELDS];\nuniform lowp vec4 u_defaultColor;\nuniform lowp vec4 u_othersColor;\nuniform lowp vec4 u_outlineColor;\nuniform float u_donutRatio;\nuniform float u_sectorThreshold;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};\nlowp vec4 getSectorColor(in int index, in vec2 filteredSectorToColorId[NUMBER_OF_FIELDS]) {\n#if __VERSION__ == 300\nmediump int colorIndex = int(filteredSectorToColorId[index].y);\nreturn u_colors[colorIndex];\n#else\nmediump int colorIndex;\nfor (int i = 0; i < NUMBER_OF_FIELDS; ++i) {\nif (i == index) {\ncolorIndex = int(filteredSectorToColorId[i].y);\n}\n}\nfor (int i = 0; i < NUMBER_OF_FIELDS; ++i) {\nif (i == colorIndex) {\nreturn u_colors[i];\n}\n}\nreturn u_colors[NUMBER_OF_FIELDS - 1];\n#endif\n}\nconst int OTHER_SECTOR_ID = 255;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor() {\nfloat angle = 90.0 - C_RAD_TO_DEG * atan2(v_offset.y, v_offset.x);\nif (angle < 0.0) {\nangle += 360.0;\n} else if (angle > 360.0) {\nangle = mod(angle, 360.0);\n}\nint numOfEntries = int(v_numOfEntries);\nfloat maxSectorAngle = v_maxSectorAngle;\nlowp vec4 fillColor = (maxSectorAngle > 0.0 || u_sectorThreshold > 0.0) ? u_othersColor : u_defaultColor;\nlowp vec4 prevColor = vec4(0.0);\nlowp vec4 nextColor = vec4(0.0);\nfloat startSectorAngle = 0.0;\nfloat endSectorAngle = 0.0;\nif (angle < maxSectorAngle) {\nfor (int index = 0; index < NUMBER_OF_FIELDS; ++index) {\nstartSectorAngle = endSectorAngle;\nendSectorAngle = v_filteredSectorToColorId[index].x;\nif (endSectorAngle > angle) {\nfillColor = getSectorColor(index, v_filteredSectorToColorId);\nprevColor = u_sectorThreshold != 0.0 && index == 0 && abs(360.0 - maxSectorAngle) < EPSILON ? u_othersColor :\ngetSectorColor(index > 0 ? index - 1 : numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = u_sectorThreshold != 0.0 && abs(endSectorAngle - maxSectorAngle) < EPSILON ? u_othersColor :\ngetSectorColor(index < numOfEntries - 1 ? index + 1 : 0, v_filteredSectorToColorId);\nbreak;\n}\nif (index == numOfEntries - 1) {\nbreak;\n}\n}\n} else {\nprevColor = getSectorColor(numOfEntries - 1, v_filteredSectorToColorId);\nnextColor = getSectorColor(0, v_filteredSectorToColorId);\nstartSectorAngle = maxSectorAngle;\nendSectorAngle = 360.0;\n}\nlowp vec4 outlineColor = u_outlineColor;\nfloat offset = length(v_offset);\nfloat distanceSize = offset * v_size;\nif (startSectorAngle != 0.0 || endSectorAngle != 360.0) {\nfloat distanceToStartSector = (angle - startSectorAngle);\nfloat distanceToEndSector = (endSectorAngle - angle);\nfloat sectorThreshold = 0.6;\nfloat beginSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToStartSector * offset);\nfloat endSectorAlpha = smoothstep(0.0, sectorThreshold, distanceToEndSector * offset);\nif (endSectorAlpha > 0.0) {\nfillColor = mix(nextColor, fillColor, endSectorAlpha);\n} else if (beginSectorAlpha > 0.0) {\nfillColor = mix(prevColor, fillColor, beginSectorAlpha);\n}\n}\nfloat donutSize = u_donutRatio * (v_size - v_outlineWidth);\nfloat endOfDonut = donutSize - v_outlineWidth;\nfloat aaThreshold = 0.75;\nfloat innerCircleAlpha = endOfDonut - aaThreshold > 0.0 ? smoothstep(endOfDonut - aaThreshold, endOfDonut + aaThreshold, distanceSize) : 1.0;\nfloat outerCircleAlpha = 1.0 - smoothstep(v_size - aaThreshold, v_size + aaThreshold , distanceSize);\nfloat circleAlpha = innerCircleAlpha * outerCircleAlpha;\nfloat startOfOutline = v_size - v_outlineWidth;\nif (startOfOutline > 0.0 && v_outlineWidth > 0.25) {\nfloat outlineFactor = smoothstep(startOfOutline - aaThreshold, startOfOutline + aaThreshold, distanceSize);\nfloat innerLineFactor = donutSize - aaThreshold > 0.0 ? 1.0 - smoothstep(donutSize - aaThreshold, donutSize + aaThreshold , distanceSize) : 0.0;\nfillColor = mix(fillColor, outlineColor, innerLineFactor + outlineFactor);\n}\nreturn v_opacity * circleAlpha * fillColor;\n}\n#endif\nvoid main()\n{\nvec4 color = getColor();\n#ifdef HIGHLIGHT\ncolor.a = step(1.0 / 255.0, color.a);\n#endif\ngl_FragColor = color;\n}","pie.vert":"precision highp float;\nattribute vec4 a_color;\nattribute vec4 a_outlineColor;\nattribute vec4 a_sizeAndOutlineWidth;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nattribute vec2 a_bitSetAndDistRatio;\nattribute vec2 a_zoomRange;\nuniform float u_outlineWidth;\nuniform mediump float u_sectorThreshold;\nvarying float v_size;\nvarying vec2 v_offset;\nvarying vec2 v_filteredSectorToColorId[NUMBER_OF_FIELDS];\nvarying float v_numOfEntries;\nvarying float v_maxSectorAngle;\nstruct FilteredChartInfo {\nfloat endSectorAngle;\nint colorId;\n};\nint filter(in float sectorAngle,\nin int currentIndex,\ninout FilteredChartInfo filteredInfo,\ninout vec2 filteredSectorToColorId[NUMBER_OF_FIELDS]) {\nif (sectorAngle > u_sectorThreshold * 360.0) {\nfilteredInfo.endSectorAngle += sectorAngle;\n#if __VERSION__ == 300\nfilteredSectorToColorId[filteredInfo.colorId] = vec2(filteredInfo.endSectorAngle, currentIndex);\n#else\nfor (int i = 0; i < NUMBER_OF_FIELDS; i++) {\nif (i == filteredInfo.colorId) {\nfilteredSectorToColorId[i] = vec2(filteredInfo.endSectorAngle, currentIndex);\n}\n}\n#endif\n++filteredInfo.colorId;\n}\nreturn 0;\n}\nint filterValues(inout vec2 filteredSectorToColorId[NUMBER_OF_FIELDS],\ninout FilteredChartInfo filteredInfo,\nin float sectorAngles[NUMBER_OF_FIELDS]) {\nfor (int index = 0; index < NUMBER_OF_FIELDS; ++index) {\nfloat sectorValue = sectorAngles[index];\nfilter(sectorValue, index, filteredInfo, filteredSectorToColorId);\n}\nreturn filteredInfo.colorId;\n}\n#include <materials/vcommon.glsl>\n#include <materials/icon/common.glsl>\n#include <materials/hittest/common.glsl>\nvec2 getMarkerSize(inout vec2 offset, inout vec2 baseSize, inout float outlineSize, in float referenceSize, in float bitSet) {\nvec2 outSize = baseSize;\n#ifdef VV_SIZE\nfloat r = 0.5 * getSize(referenceSize) / referenceSize;\noutSize.xy *= r;\noffset.xy *= r;\nfloat scaleSymbolProportionally = getBit(bitSet, BITSET_MARKER_SCALE_SYMBOLS_PROPORTIONALLY);\noutlineSize *= scaleSymbolProportionally * (r - 1.0) + 1.0;\n#endif\nreturn outSize;\n}\nvec3 getOffset(in vec2 in_offset, float a_bitSet) {\nfloat isMapAligned = getBit(a_bitSet, BITSET_MARKER_ALIGNMENT_MAP);\nvec3  offset       = vec3(in_offset, 0.0);\nreturn getMatrix(isMapAligned) * offset;\n}\nfloat filterNaNValues(in float value) {\nreturn value != NAN_MAGIC_NUMBER && value > 0.0 ? value : 0.0;\n}\nvoid main()\n{\nINIT;\nvec2  a_size   = a_sizeAndOutlineWidth.xy * a_sizeAndOutlineWidth.xy / 128.0;\nvec2  a_offset = a_vertexOffset / 16.0;\nfloat outlineSize = u_outlineWidth;\nfloat a_bitSet = a_bitSetAndDistRatio.x;\nvec2 size = getMarkerSize(a_offset, a_size, outlineSize, a_sizeAndOutlineWidth.w * a_sizeAndOutlineWidth.w / 128.0, a_bitSet);\nfloat filterFlags = getFilterFlags();\nvec3  pos         = vec3(a_pos * POSITION_PRECISION, 1.0);\nv_opacity      = getOpacity();\nv_id           = norm(a_id);\nv_pos          = u_dvsMat3 * pos + getOffset(a_offset, a_bitSet);\nv_offset       = sign(a_texCoords - 0.5);\nv_size         = max(size.x, size.y);\nv_outlineWidth = outlineSize;\nfloat attributeData[10];\nvec4 attributeData0 = getAttributeData3(a_id);\nattributeData[0] = filterNaNValues(attributeData0.x);\nattributeData[1] = filterNaNValues(attributeData0.y);\nattributeData[2] = filterNaNValues(attributeData0.z);\nattributeData[3] = filterNaNValues(attributeData0.w);\n#if (NUMBER_OF_FIELDS > 4)\nvec4 attributeData1 = getAttributeData4(a_id);\nattributeData[4] = filterNaNValues(attributeData1.x);\nattributeData[5] = filterNaNValues(attributeData1.y);\nattributeData[6] = filterNaNValues(attributeData1.z);\nattributeData[7] = filterNaNValues(attributeData1.w);\n#endif\n#if (NUMBER_OF_FIELDS > 8)\nvec4 attributeData2 = getAttributeData5(a_id);\nattributeData[8] = filterNaNValues(attributeData2.x);\nattributeData[9] = filterNaNValues(attributeData2.y);\n#endif\nfloat sum = 0.0;\nfor (int i = 0; i < NUMBER_OF_FIELDS; ++i) {\nsum += attributeData[i];\n}\nfloat sectorAngles[NUMBER_OF_FIELDS];\nfor (int i = 0; i < NUMBER_OF_FIELDS; ++i) {\nsectorAngles[i] = 360.0 * attributeData[i] / sum;\n}\nvec2 filteredSectorToColorId[NUMBER_OF_FIELDS];\nFilteredChartInfo filteredInfo = FilteredChartInfo(0.0, 0);\nint numOfEntries = filterValues(filteredSectorToColorId, filteredInfo, sectorAngles);\nv_numOfEntries = float(numOfEntries);\nv_maxSectorAngle = filteredInfo.endSectorAngle;\n#if __VERSION__ == 300\nv_filteredSectorToColorId = filteredSectorToColorId;\n#else\nfor (int i = 0; i < NUMBER_OF_FIELDS; ++i) {\nif (i == numOfEntries) {\nbreak;\n}\nv_filteredSectorToColorId[i] = filteredSectorToColorId[i];\n}\n#endif\n#ifdef HITTEST\nhighp vec3 out_pos = vec3(0.0);\nv_color            = vec4(0.0);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  pos, v_size);\ngl_PointSize = 1.0;\ngl_Position = vec4(clip(v_color, out_pos, filterFlags, a_zoomRange), 1.0);\n#else\ngl_Position = vec4(clip(v_color, v_pos, filterFlags, a_zoomRange), 1.0);\n#endif\n}"},shared:{line:{"common.glsl":"#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nuniform mediump vec2 u_mosaicSize;\nvarying mediump float v_sampleAlphaOnly;\n#endif\nstruct LineData {\nlowp vec4 color;\nmediump vec2 normal;\nmediump float lineHalfWidth;\nlowp float opacity;\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nmediump vec4 tlbr;\nmediump vec2 patternSize;\n#endif\n#ifdef SDF\nmediump float lineWidthRatio;\n#endif\n#if defined(PATTERN) || defined(SDF)\nhighp float accumulatedDistance;\n#endif\n#endif\nhighp vec3 id;\n};","line.frag":"uniform lowp float u_blur;\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && !defined(HIGHLIGHT)\n#if defined(PATTERN) || defined(SDF)\nuniform sampler2D u_texture;\nuniform highp float u_pixelRatio;\n#endif\n#endif\n#if defined(SDF) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float adjustedPatternWidth = line.patternSize.x * 2.0 * line.lineWidthRatio;\nmediump float relativeTexX = fract(line.accumulatedDistance / adjustedPatternWidth);\nmediump float relativeTexY = 0.5 + 0.25 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nmediump float d = rgba2float(texture2D(u_texture, texCoord)) - 0.5;\nfloat dist = d * line.lineHalfWidth;\nreturn line.opacity * clamp(0.5 - dist, 0.0, 1.0) * line.color;\n}\n#elif defined(PATTERN) && !defined(HIGHLIGHT) && !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE)\nlowp vec4 getLineColor(LineData line) {\nmediump float lineHalfWidth = line.lineHalfWidth;\nmediump float adjustedPatternHeight = line.patternSize.y * 2.0 * lineHalfWidth / line.patternSize.x;\nmediump float relativeTexY = fract(line.accumulatedDistance / adjustedPatternHeight);\nmediump float relativeTexX = 0.5 + 0.5 * line.normal.y;\nmediump vec2 texCoord = mix(line.tlbr.xy, line.tlbr.zw, vec2(relativeTexX, relativeTexY));\nlowp vec4 color = texture2D(u_texture, texCoord);\n#ifdef VV_COLOR\nif (v_sampleAlphaOnly > 0.5) {\ncolor.rgb = vec3(color.a);\n}\n#endif\nreturn line.opacity * line.color * color;\n}\n#else\nlowp vec4 getLineColor(LineData line) {\nreturn line.opacity * line.color;\n}\n#endif\nvec4 shadeLine(LineData line)\n{\nmediump float thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(line.lineHalfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nmediump float fragDist = length(line.normal) * line.lineHalfWidth;\nlowp float alpha = clamp(thinLineFactor * (line.lineHalfWidth - fragDist) / (u_blur + thinLineFactor - 1.0), 0.0, 1.0);\nlowp vec4 out_color = getLineColor(line) * alpha;\n#ifdef HIGHLIGHT\nout_color.a = step(1.0 / 255.0, out_color.a);\n#endif\n#ifdef ID\nif (out_color.a < 1.0 / 255.0) {\ndiscard;\n}\nout_color = vec4(line.id, 0.0);\n#endif\nreturn out_color;\n}","line.vert":"float getBaseLineHalfWidth(in float lineHalfWidth, in float referenceHalfWidth) {\n#ifdef VV_SIZE\nfloat refLineWidth = 2.0 * referenceHalfWidth;\nreturn 0.5 * (lineHalfWidth / max(referenceHalfWidth, EPSILON)) * getSize(refLineWidth);\n#else\nreturn lineHalfWidth;\n#endif\n}\nfloat getLineHalfWidth(in float baseWidth, in float aa) {\nfloat halfWidth = max(baseWidth + aa, 0.45) + 0.1 * aa;\n#ifdef HIGHLIGHT\nhalfWidth = max(halfWidth, 2.0);\n#endif\nreturn halfWidth;\n}\nvec2 getDist(in vec2 offset, in float halfWidth) {\nfloat thinLineFactor = max(THIN_LINE_WIDTH_FACTOR * step(halfWidth, THIN_LINE_HALF_WIDTH), 1.0);\nreturn thinLineFactor * halfWidth * offset;\n}\nLineData buildLine(\nout vec3 out_pos,\nin vec3 in_id,\nin vec2 in_pos,\nin vec4 in_color,\nin vec2 in_offset,\nin vec2 in_normal,\nin float in_accumulatedDist,\nin float in_lineHalfWidth,\nin float in_bitSet,\nin vec4 in_tlbr,\nin vec2 in_segmentDirection,\nin float in_referenceHalfWidth\n)\n{\nfloat aa        = 0.5 * u_antialiasing;\nfloat baseWidth = getBaseLineHalfWidth(in_lineHalfWidth, in_referenceHalfWidth);\nfloat halfWidth = getLineHalfWidth(baseWidth, aa);\nfloat z         = 2.0 * step(baseWidth, 0.0);\nvec2  dist      = getDist(in_offset, halfWidth);\nvec3  offset    = u_displayViewMat3 * vec3(dist, 0.0);\nvec3  pos       = u_dvsMat3 * vec3(in_pos * POSITION_PRECISION, 1.0) + offset;\n#ifdef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\nvec4  color     = in_color;\nfloat opacity   = 1.0;\n#else\nvec4  color     = getColor(in_color, in_bitSet, BITSET_GENERIC_LOCK_COLOR);\nfloat opacity   = getOpacity();\n#ifdef SDF\nconst float SDF_PATTERN_HALF_WIDTH = 15.5;\nfloat scaleDash = getBit(in_bitSet, BITSET_LINE_SCALE_DASH);\nfloat lineWidthRatio = (scaleDash * max(halfWidth - 0.55 * u_antialiasing, 0.25) + (1.0 - scaleDash)) / SDF_PATTERN_HALF_WIDTH;\n#endif\n#endif\n#if !defined(SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE) && defined(PATTERN)\nv_sampleAlphaOnly = getBit(in_bitSet, BITSET_GENERIC_CONSIDER_ALPHA_ONLY);\n#endif\nout_pos = vec3(pos.xy, z);\nreturn LineData(\ncolor,\nin_normal,\nhalfWidth,\nopacity,\n#ifndef SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#ifdef PATTERN\nin_tlbr / u_mosaicSize.xyxy,\nvec2(in_tlbr.z - in_tlbr.x, in_tlbr.w - in_tlbr.y),\n#endif\n#ifdef SDF\nlineWidthRatio,\n#endif\n#if defined(PATTERN) || defined(SDF)\nin_accumulatedDist * u_zoomFactor + dot(in_segmentDirection, dist),\n#endif\n#endif\nnorm(in_id)\n);\n}"}},"symbologyTypeUtils.glsl":"#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_OUTLINE_FILL_LIKE\n#endif\n#if SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_SIMPLE || SYMBOLOGY_TYPE == SYMBOLOGY_TYPE_OUTLINE_FILL_SIMPLE\n#define SYMBOLOGY_TYPE_IS_SIMPLE_LIKE\n#endif",text:{"common.glsl":"uniform highp vec2 u_mosaicSize;\nvarying highp vec3 v_id;\nvarying mediump vec3 v_pos;\nvarying lowp float v_opacity;\nvarying lowp vec4 v_color;\nvarying highp vec2 v_tex;\nvarying mediump float v_antialiasingWidth;\nvarying mediump float v_edgeDistanceOffset;\nvarying lowp float v_transparency;","hittest.glsl":"#include <materials/hittest/common.glsl>","text.frag":"precision mediump float;\n#include <materials/text/common.glsl>\nuniform lowp sampler2D u_texture;\n#ifdef HITTEST\nvec4 getColor() {\nreturn v_color;\n}\n#else\nvec4 getColor()\n{\nfloat SDF_CUTOFF = (2.0 / 8.0);\nfloat SDF_BASE_EDGE_DIST = 1.0 - SDF_CUTOFF;\nlowp float dist = texture2D(u_texture, v_tex).a;\nmediump float edge = SDF_BASE_EDGE_DIST - v_edgeDistanceOffset;\n#ifdef HIGHLIGHT\nedge /= 2.0;\n#endif\nlowp float aa = v_antialiasingWidth;\nlowp float alpha = smoothstep(edge - aa, edge + aa, dist);\nreturn alpha * v_color * v_opacity;\n}\n#endif\nvoid main()\n{\ngl_FragColor = getColor();\n}","text.vert":"precision highp float;\n#include <materials/utils.glsl>\n#include <materials/vcommon.glsl>\n#include <materials/text/common.glsl>\n#include <materials/text/hittest.glsl>\nattribute vec4 a_color;\nattribute vec4 a_haloColor;\nattribute vec4 a_texFontSize;\nattribute vec4 a_aux;\nattribute vec2 a_zoomRange;\nattribute vec2 a_vertexOffset;\nattribute vec2 a_texCoords;\nuniform float u_isHaloPass;\nuniform float u_isBackgroundPass;\nfloat getTextSize(inout vec2 offset, inout float baseSize, in float referenceSize) {\n#ifdef VV_SIZE\nfloat r = getSize(referenceSize) / referenceSize;\nbaseSize *= r;\noffset.xy *= r;\nreturn baseSize;\n#endif\nreturn baseSize;\n}\nvoid main()\n{\nINIT;\nfloat a_isBackground  = a_aux.y;\nfloat a_referenceSize = a_aux.z * a_aux.z / 256.0;\nfloat a_bitSet        = a_aux.w;\nfloat a_fontSize      = a_texFontSize.z;\nvec2  a_offset        = a_vertexOffset * OFFSET_PRECISION;\nvec3  in_pos        = vec3(a_pos * POSITION_PRECISION, 1.0);\nfloat fontSize      = getTextSize(a_offset, a_fontSize, a_referenceSize);\nfloat fontScale     = fontSize / SDF_FONT_SIZE;\nvec3  offset        = getRotation() * vec3(a_offset, 0.0);\nmat3  extrudeMatrix = getBit(a_bitSet, 0) == 1.0 ? u_displayViewMat3 : u_displayMat3;\nfloat isText = 1.0 - a_isBackground;\nfloat isBackground = u_isBackgroundPass * a_isBackground;\nvec4  nonHaloColor  = (isBackground * a_color) + (isText * getColor(a_color, a_bitSet, 1));\nv_color   = u_isHaloPass * a_haloColor + (1.0 - u_isHaloPass) * nonHaloColor;\nv_opacity = getOpacity();\nv_id      = norm(a_id);\nv_tex     = a_texCoords / u_mosaicSize;\nv_pos     = u_dvsMat3 * in_pos + extrudeMatrix * offset;\nfloat isHidden = u_isBackgroundPass * isText + (1.0 - u_isBackgroundPass) * a_isBackground;\nv_pos.z += 2.0 * isHidden;\nv_edgeDistanceOffset = u_isHaloPass * OUTLINE_SCALE * a_texFontSize.w / fontScale / MAX_SDF_DISTANCE;\nv_antialiasingWidth  = 0.105 * SDF_FONT_SIZE / fontSize / u_pixelRatio;\n#ifdef HITTEST\nhighp vec3 out_pos  = vec3(0.);\nv_color = vec4(0.);\nhittestMarker(v_color, out_pos, u_viewMat3 * u_tileMat3 *  vec3(a_pos * POSITION_PRECISION, 1.0)\n+ u_tileMat3 * offset, fontSize / 2.);\ngl_PointSize = 1.;\ngl_Position = vec4(clip(v_color, out_pos, getFilterFlags(), a_zoomRange), 1.0);\n#else\ngl_Position =  vec4(clip(v_color, v_pos, getFilterFlags(), a_zoomRange), 1.0);\n#endif\n}"},"utils.glsl":"float rshift(in float u32, in int amount) {\nreturn floor(u32 / pow(2.0, float(amount)));\n}\nfloat getBit(in float bitset, in int bitIndex) {\nfloat offset = pow(2.0, float(bitIndex));\nreturn mod(floor(bitset / offset), 2.0);\n}\nfloat getFilterBit(in float bitset, in int bitIndex) {\nreturn getBit(bitset, bitIndex + 1);\n}\nfloat getHighlightBit(in float bitset) {\nreturn getBit(bitset, 0);\n}\nhighp vec3 unpackDisplayIdTexel(in highp vec3 bitset) {\nfloat isAggregate = getBit(bitset.b, 7);\nreturn (1.0 - isAggregate) * bitset + isAggregate * (vec3(bitset.rgb) - vec3(0.0, 0.0, float(0x80)));\n}\nvec4 unpack(in float u32) {\nfloat r = mod(rshift(u32, 0), 255.0);\nfloat g = mod(rshift(u32, 8), 255.0);\nfloat b = mod(rshift(u32, 16), 255.0);\nfloat a = mod(rshift(u32, 24), 255.0);\nreturn vec4(r, g, b, a);\n}\nvec3 norm(in vec3 v) {\nreturn v /= 255.0;\n}\nvec4 norm(in vec4 v) {\nreturn v /= 255.0;\n}\nfloat max4(vec4 target) {\nreturn max(max(max(target.x, target.y), target.z), target.w);\n}\nvec2 unpack_u8_nf32(vec2 bytes) {\nreturn (bytes - 127.0) / 127.0;\n}\nhighp float rand(in vec2 co) {\nhighp float a = 12.9898;\nhighp float b = 78.233;\nhighp float c = 43758.5453;\nhighp float dt = dot(co, vec2(a,b));\nhighp float sn = mod(dt, 3.14);\nreturn fract(sin(sn) * c);\n}","vcommon.glsl":"#include <materials/constants.glsl>\n#include <materials/utils.glsl>\n#include <materials/attributeData.glsl>\n#include <materials/vv.glsl>\n#include <materials/barycentric.glsl>\nattribute vec2 a_pos;\nattribute highp vec3 a_id;\nuniform highp mat3 u_dvsMat3;\nuniform highp mat3 u_displayMat3;\nuniform highp mat3 u_displayViewMat3;\nuniform highp mat3 u_tileMat3;\nuniform highp mat3 u_viewMat3;\nuniform highp float u_pixelRatio;\nuniform mediump float u_zoomFactor;\nuniform mediump float u_antialiasing;\nuniform mediump float u_currentZoom;\nvec4 VV_ADATA = vec4(0.0);\nvoid loadVisualVariableData(inout vec4 target) {\n#ifdef SUPPORTS_TEXTURE_FLOAT\ntarget.rgba = getAttributeData2(a_id);\n#else\nvec4 data0 = getAttributeData2(a_id);\nvec4 data1 = getAttributeData3(a_id);\ntarget.r = u88VVToFloat(data0.rg * 255.0);\ntarget.g = u88VVToFloat(data0.ba * 255.0);\ntarget.b = u88VVToFloat(data1.rg * 255.0);\ntarget.a = u88VVToFloat(data1.ba * 255.0);\n#endif\n}\n#ifdef VV\n#define INIT loadVisualVariableData(VV_ADATA)\n#else\n#define INIT\n#endif\nvec4 getColor(in vec4 a_color, in float a_bitSet, int index) {\n#ifdef VV_COLOR\nfloat isColorLocked   = getBit(a_bitSet, index);\nreturn getVVColor(VV_ADATA[ATTR_VV_COLOR], a_color, isColorLocked);\n#else\nreturn a_color;\n#endif\n}\nfloat getOpacity() {\n#ifdef VV_OPACITY\nreturn getVVOpacity(VV_ADATA[ATTR_VV_OPACITY]);\n#else\nreturn 1.0;\n#endif\n}\nfloat getSize(in float in_size) {\n#ifdef VV_SIZE\nreturn getVVSize(in_size, VV_ADATA[ATTR_VV_SIZE]);\n#else\nreturn in_size;\n#endif\n}\nmat3 getRotation() {\n#ifdef VV_ROTATION\nreturn getVVRotationMat3(mod(VV_ADATA[ATTR_VV_ROTATION], 360.0));\n#else\nreturn mat3(1.0);\n#endif\n}\nfloat getFilterFlags() {\n#ifdef IGNORES_SAMPLER_PRECISION\nreturn ceil(getAttributeData0(a_id).x * 255.0);\n#else\nreturn getAttributeData0(a_id).x * 255.0;\n#endif\n}\nvec4 getAnimationState() {\nreturn getAttributeData1(a_id);\n}\nfloat getMinZoom() {\nvec4 data0 = getAttributeData0(a_id) * 255.0;\nreturn data0.g;\n}\nmat3 getMatrixNoDisplay(float isMapAligned) {\nreturn isMapAligned * u_viewMat3 * u_tileMat3 + (1.0 - isMapAligned) * u_tileMat3;\n}\nmat3 getMatrix(float isMapAligned) {\nreturn isMapAligned * u_displayViewMat3 + (1.0 - isMapAligned) * u_displayMat3;\n}\nvec3 clip(inout vec4 color, inout vec3 pos, in float filterFlags, in vec2 minMaxZoom) {\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 0));\n#ifdef INSIDE\npos.z += 2.0 * (1.0 - getFilterBit(filterFlags, 1));\n#elif defined(OUTSIDE)\npos.z += 2.0 * getFilterBit(filterFlags, 1);\n#elif defined(HIGHLIGHT)\n#if !defined(HIGHLIGHT_ALL)\npos.z += 2.0 * (1.0 - getHighlightBit(filterFlags));\n#endif\n#endif\npos.z += 2.0 * (step(minMaxZoom.y, u_currentZoom) + (1.0 - step(minMaxZoom.x, u_currentZoom)));\nreturn pos;\n}","vv.glsl":"#if defined(VV_SIZE_MIN_MAX_VALUE) || defined(VV_SIZE_SCALE_STOPS) || defined(VV_SIZE_FIELD_STOPS) || defined(VV_SIZE_UNIT_VALUE)\n#define VV_SIZE\n#endif\n#if defined(VV_COLOR) || defined(VV_SIZE) || defined(VV_OPACITY) || defined(VV_ROTATION)\n#define VV\n#endif\n#ifdef VV_COLOR\nuniform highp float u_vvColorValues[8];\nuniform vec4 u_vvColors[8];\n#endif\n#ifdef VV_SIZE_MIN_MAX_VALUE\nuniform highp vec4 u_vvSizeMinMaxValue;\n#endif\n#ifdef VV_SIZE_SCALE_STOPS\nuniform highp float u_vvSizeScaleStopsValue;\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nuniform highp float u_vvSizeFieldStopsValues[6];\nuniform float u_vvSizeFieldStopsSizes[6];\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nuniform highp float u_vvSizeUnitValueWorldToPixelsRatio;\n#endif\n#ifdef VV_OPACITY\nuniform highp float u_vvOpacityValues[8];\nuniform float u_vvOpacities[8];\n#endif\n#ifdef VV_ROTATION\nuniform lowp float u_vvRotationType;\n#endif\nbool isNan(float val) {\nreturn (val == NAN_MAGIC_NUMBER);\n}\n#ifdef VV_SIZE_MIN_MAX_VALUE\nfloat getVVMinMaxSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nfloat interpolationRatio = (sizeValue  - u_vvSizeMinMaxValue.x) / (u_vvSizeMinMaxValue.y - u_vvSizeMinMaxValue.x);\ninterpolationRatio = clamp(interpolationRatio, 0.0, 1.0);\nreturn u_vvSizeMinMaxValue.z + interpolationRatio * (u_vvSizeMinMaxValue.w - u_vvSizeMinMaxValue.z);\n}\n#endif\n#ifdef VV_SIZE_FIELD_STOPS\nconst int VV_SIZE_N = 6;\nfloat getVVStopsSize(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nif (sizeValue <= u_vvSizeFieldStopsValues[0]) {\nreturn u_vvSizeFieldStopsSizes[0];\n}\nfor (int i = 1; i < VV_SIZE_N; ++i) {\nif (u_vvSizeFieldStopsValues[i] >= sizeValue) {\nfloat f = (sizeValue - u_vvSizeFieldStopsValues[i-1]) / (u_vvSizeFieldStopsValues[i] - u_vvSizeFieldStopsValues[i-1]);\nreturn mix(u_vvSizeFieldStopsSizes[i-1], u_vvSizeFieldStopsSizes[i], f);\n}\n}\nreturn u_vvSizeFieldStopsSizes[VV_SIZE_N - 1];\n}\n#endif\n#ifdef VV_SIZE_UNIT_VALUE\nfloat getVVUnitValue(float sizeValue, float fallback) {\nif (isNan(sizeValue)) {\nreturn fallback;\n}\nreturn u_vvSizeUnitValueWorldToPixelsRatio * sizeValue;\n}\n#endif\n#ifdef VV_OPACITY\nconst int VV_OPACITY_N = 8;\nfloat getVVOpacity(float opacityValue) {\nif (isNan(opacityValue)) {\nreturn 1.0;\n}\nif (opacityValue <= u_vvOpacityValues[0]) {\nreturn u_vvOpacities[0];\n}\nfor (int i = 1; i < VV_OPACITY_N; ++i) {\nif (u_vvOpacityValues[i] >= opacityValue) {\nfloat f = (opacityValue - u_vvOpacityValues[i-1]) / (u_vvOpacityValues[i] - u_vvOpacityValues[i-1]);\nreturn mix(u_vvOpacities[i-1], u_vvOpacities[i], f);\n}\n}\nreturn u_vvOpacities[VV_OPACITY_N - 1];\n}\n#endif\n#ifdef VV_ROTATION\nmat4 getVVRotation(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat4(1, 0, 0, 0,\n0, 1, 0, 0,\n0, 0, 1, 0,\n0, 0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (u_vvRotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat4(cosA, sinA, 0, 0,\n-sinA,  cosA, 0, 0,\n0,     0, 1, 0,\n0,     0, 0, 1);\n}\nmat3 getVVRotationMat3(float rotationValue) {\nif (isNan(rotationValue)) {\nreturn mat3(1, 0, 0,\n0, 1, 0,\n0, 0, 1);\n}\nfloat rotation = rotationValue;\nif (u_vvRotationType == 1.0) {\nrotation = 90.0 - rotation;\n}\nfloat angle = C_DEG_TO_RAD * -rotation;\nfloat sinA = sin(angle);\nfloat cosA = cos(angle);\nreturn mat3(cosA, -sinA, 0,\nsinA, cosA, 0,\n0,    0,    1);\n}\n#endif\n#ifdef VV_COLOR\nconst int VV_COLOR_N = 8;\nvec4 getVVColor(float colorValue, vec4 fallback, float isColorLocked) {\nif (isNan(colorValue) || isColorLocked == 1.0) {\nreturn fallback;\n}\nif (colorValue <= u_vvColorValues[0]) {\nreturn u_vvColors[0];\n}\nfor (int i = 1; i < VV_COLOR_N; ++i) {\nif (u_vvColorValues[i] >= colorValue) {\nfloat f = (colorValue - u_vvColorValues[i-1]) / (u_vvColorValues[i] - u_vvColorValues[i-1]);\nreturn mix(u_vvColors[i-1], u_vvColors[i], f);\n}\n}\nreturn u_vvColors[VV_COLOR_N - 1];\n}\n#endif\nfloat getVVSize(in float size, in float vvSize)  {\n#ifdef VV_SIZE_MIN_MAX_VALUE\nreturn getVVMinMaxSize(vvSize, size);\n#elif defined(VV_SIZE_SCALE_STOPS)\nreturn u_vvSizeScaleStopsValue;\n#elif defined(VV_SIZE_FIELD_STOPS)\nfloat outSize = getVVStopsSize(vvSize, size);\nreturn isNan(outSize) ? size : outSize;\n#elif defined(VV_SIZE_UNIT_VALUE)\nreturn getVVUnitValue(vvSize, size);\n#else\nreturn size;\n#endif\n}"},overlay:{overlay:{"overlay.frag":"precision lowp float;\nuniform lowp sampler2D u_texture;\nuniform lowp float u_opacity;\nvarying mediump vec2 v_uv;\nvoid main() {\nvec4 color = texture2D(u_texture, v_uv);\ngl_FragColor = color *  u_opacity;\n}","overlay.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_uv;\nuniform highp mat3 u_dvsMat3;\nuniform mediump vec2 u_perspective;\nvarying mediump vec2 v_uv;\nvoid main(void) {\nv_uv = a_uv;\nfloat w = 1.0 + dot(a_uv, u_perspective);\nvec3 pos = u_dvsMat3 * vec3(a_pos, 1.0);\ngl_Position = vec4(w * pos.xy, 0.0, w);\n}"}},"post-processing":{blit:{"blit.frag":"precision mediump float;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\ngl_FragColor = texture2D(u_texture, v_uv);\n}"},bloom:{composite:{"composite.frag":"precision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D u_blurTexture1;\nuniform sampler2D u_blurTexture2;\nuniform sampler2D u_blurTexture3;\nuniform sampler2D u_blurTexture4;\nuniform sampler2D u_blurTexture5;\nuniform float u_bloomStrength;\nuniform float u_bloomRadius;\nuniform float u_bloomFactors[NUMMIPS];\nuniform vec3 u_bloomTintColors[NUMMIPS];\nfloat lerpBloomFactor(const in float factor) {\nfloat mirrorFactor = 1.2 - factor;\nreturn mix(factor, mirrorFactor, u_bloomRadius);\n}\nvoid main() {\nvec4 color = u_bloomStrength * (\nlerpBloomFactor(u_bloomFactors[0]) * vec4(u_bloomTintColors[0], 1.0) * texture2D(u_blurTexture1, v_uv) +\nlerpBloomFactor(u_bloomFactors[1]) * vec4(u_bloomTintColors[1], 1.0) * texture2D(u_blurTexture2, v_uv) +\nlerpBloomFactor(u_bloomFactors[2]) * vec4(u_bloomTintColors[2], 1.0) * texture2D(u_blurTexture3, v_uv) +\nlerpBloomFactor(u_bloomFactors[3]) * vec4(u_bloomTintColors[3], 1.0) * texture2D(u_blurTexture4, v_uv) +\nlerpBloomFactor(u_bloomFactors[4]) * vec4(u_bloomTintColors[4], 1.0) * texture2D(u_blurTexture5, v_uv)\n);\ngl_FragColor = clamp(color, 0.0, 1.0);\n}"},gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\n#define SIGMA RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = float(SIGMA);\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},luminosityHighPass:{"luminosityHighPass.frag":"precision mediump float;\nuniform sampler2D u_texture;\nuniform vec3 u_defaultColor;\nuniform float u_defaultOpacity;\nuniform float u_luminosityThreshold;\nuniform float u_smoothWidth;\nvarying vec2 v_uv;\nvoid main() {\nvec4 texel = texture2D(u_texture, v_uv);\nvec3 luma = vec3(0.299, 0.587, 0.114);\nfloat v = dot(texel.xyz, luma);\nvec4 outputColor = vec4(u_defaultColor.rgb, u_defaultOpacity);\nfloat alpha = smoothstep(u_luminosityThreshold, u_luminosityThreshold + u_smoothWidth, v);\ngl_FragColor = mix(outputColor, texel, alpha);\n}"}},blur:{gaussianBlur:{"gaussianBlur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nuniform vec2 u_direction;\nuniform float u_sigma;\nvarying vec2 v_uv;\n#define KERNEL_RADIUS RADIUS\nfloat gaussianPdf(in float x, in float sigma) {\nreturn 0.39894 * exp(-0.5 * x * x / ( sigma * sigma)) / sigma;\n}\nvoid main() {\nvec2 invSize = 1.0 / u_texSize;\nfloat fSigma = u_sigma;\nfloat weightSum = gaussianPdf(0.0, fSigma);\nvec4 pixelColorSum = texture2D(u_colorTexture, v_uv) * weightSum;\nfor (int i = 1; i < KERNEL_RADIUS; i ++) {\nfloat x = float(i);\nfloat w = gaussianPdf(x, fSigma);\nvec2 uvOffset = u_direction * invSize * x;\nvec4 sample1 = texture2D(u_colorTexture, v_uv + uvOffset);\nvec4 sample2 = texture2D(u_colorTexture, v_uv - uvOffset);\npixelColorSum += (sample1 + sample2) * w;\nweightSum += 2.0 * w;\n}\ngl_FragColor = pixelColorSum /weightSum;\n}"},"radial-blur":{"radial-blur.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nconst float sampleDist = 1.0;\nconst float sampleStrength = 2.2;\nvoid main(void) {\nfloat samples[10];\nsamples[0] = -0.08;\nsamples[1] = -0.05;\nsamples[2] = -0.03;\nsamples[3] = -0.02;\nsamples[4] = -0.01;\nsamples[5] =  0.01;\nsamples[6] =  0.02;\nsamples[7] =  0.03;\nsamples[8] =  0.05;\nsamples[9] =  0.08;\nvec2 dir = 0.5 - v_uv;\nfloat dist = sqrt(dir.x * dir.x + dir.y * dir.y);\ndir = dir / dist;\nvec4 color = texture2D(u_colorTexture,v_uv);\nvec4 sum = color;\nfor (int i = 0; i < 10; i++) {\nsum += texture2D(u_colorTexture, v_uv + dir * samples[i] * sampleDist);\n}\nsum *= 1.0 / 11.0;\nfloat t = dist * sampleStrength;\nt = clamp(t, 0.0, 1.0);\ngl_FragColor = mix(color, sum, t);\n}"}},dra:{"dra.frag":"precision mediump float;\nuniform sampler2D u_minColor;\nuniform sampler2D u_maxColor;\nuniform sampler2D u_texture;\nvarying vec2 v_uv;\nvoid main() {\nvec4 minColor = texture2D(u_minColor, vec2(0.5));\nvec4 maxColor = texture2D(u_maxColor, vec2(0.5));\nvec4 color = texture2D(u_texture, v_uv);\nvec3 minColorUnpremultiply = minColor.rgb / minColor.a;\nvec3 maxColorUnpremultiply = maxColor.rgb / maxColor.a;\nvec3 colorUnpremultiply = color.rgb / color.a;\nvec3 range = maxColorUnpremultiply - minColorUnpremultiply;\ngl_FragColor = vec4(color.a * (colorUnpremultiply - minColorUnpremultiply) / range, color.a);\n}","min-max":{"min-max.frag":"#extension GL_EXT_draw_buffers : require\nprecision mediump float;\n#define CELL_SIZE 2\nuniform sampler2D u_minTexture;\nuniform sampler2D u_maxTexture;\nuniform vec2 u_srcResolution;\nuniform vec2 u_dstResolution;\nvarying vec2 v_uv;\nvoid main() {\nvec2 srcPixel = floor(gl_FragCoord.xy) * float(CELL_SIZE);\nvec2 onePixel = vec2(1.0) / u_srcResolution;\nvec2 uv = (srcPixel + 0.5) / u_srcResolution;\nvec4 minColor = vec4(1.0);\nvec4 maxColor = vec4(0.0);\nfor (int y = 0; y < CELL_SIZE; ++y) {\nfor (int x = 0; x < CELL_SIZE; ++x) {\nvec2 offset = uv + vec2(x, y) * onePixel;\nminColor = min(minColor, texture2D(u_minTexture, offset));\nmaxColor = max(maxColor, texture2D(u_maxTexture, offset));\n}\n}\ngl_FragData[0] = minColor;\ngl_FragData[1] = maxColor;\n}"}},"drop-shadow":{composite:{"composite.frag":"precision mediump float;\nuniform sampler2D u_layerFBOTexture;\nuniform sampler2D u_blurTexture;\nuniform vec4 u_shadowColor;\nuniform vec2 u_shadowOffset;\nuniform highp mat3 u_displayViewMat3;\nvarying vec2 v_uv;\nvoid main() {\nvec3 offset = u_displayViewMat3 * vec3(u_shadowOffset, 0.0);\nvec4 layerColor = texture2D(u_layerFBOTexture, v_uv);\nvec4 blurColor = texture2D(u_blurTexture, v_uv - offset.xy / 2.0);\ngl_FragColor = ((1.0 - layerColor.a) * blurColor.a * u_shadowColor + layerColor);\n}"}},"edge-detect":{"frei-chen":{"frei-chen.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform vec2 u_texSize;\nvarying vec2 v_uv;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[9];\nconst mat3 g0 = mat3( 0.3535533845424652, 0, -0.3535533845424652, 0.5, 0, -0.5, 0.3535533845424652, 0, -0.3535533845424652 );\nconst mat3 g1 = mat3( 0.3535533845424652, 0.5, 0.3535533845424652, 0, 0, 0, -0.3535533845424652, -0.5, -0.3535533845424652 );\nconst mat3 g2 = mat3( 0, 0.3535533845424652, -0.5, -0.3535533845424652, 0, 0.3535533845424652, 0.5, -0.3535533845424652, 0 );\nconst mat3 g3 = mat3( 0.5, -0.3535533845424652, 0, -0.3535533845424652, 0, 0.3535533845424652, 0, 0.3535533845424652, -0.5 );\nconst mat3 g4 = mat3( 0, -0.5, 0, 0.5, 0, 0.5, 0, -0.5, 0 );\nconst mat3 g5 = mat3( -0.5, 0, 0.5, 0, 0, 0, 0.5, 0, -0.5 );\nconst mat3 g6 = mat3( 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.6666666865348816, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204 );\nconst mat3 g7 = mat3( -0.3333333432674408, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, 0.6666666865348816, 0.1666666716337204, -0.3333333432674408, 0.1666666716337204, -0.3333333432674408 );\nconst mat3 g8 = mat3( 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408, 0.3333333432674408 );\nvoid main() {\nG[0] = g0,\nG[1] = g1,\nG[2] = g2,\nG[3] = g3,\nG[4] = g4,\nG[5] = g5,\nG[6] = g6,\nG[7] = g7,\nG[8] = g8;\nmat3 I;\nfloat cnv[9];\nvec3 sample;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D(u_colorTexture, v_uv + texel * vec2(i - 1.0,j - 1.0)).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 9; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nfloat M = (cnv[0] + cnv[1]) + (cnv[2] + cnv[3]);\nfloat S = (cnv[4] + cnv[5]) + (cnv[6] + cnv[7]) + (cnv[8] + M);\ngl_FragColor = vec4(vec3(sqrt(M / S)), texture2D(u_colorTexture, v_uv).a);\n}"},sobel:{"sobel.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 2.0, 1.0, 0.0, 0.0, 0.0, -1.0, -2.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 0.0, -1.0, 2.0, 0.0, -2.0, 1.0, 0.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\ngl_FragColor = vec4(vec3(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1])), texture2D(u_colorTexture, v_uv).a);\n}"}},"edge-enhance":{"edge-enhance.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nvarying vec2 v_uv;\nuniform vec2 u_texSize;\nvec2 texel = vec2(1.0 / u_texSize.x, 1.0 / u_texSize.y);\nmat3 G[2];\nconst mat3 g0 = mat3( 1.0, 0.0, -1.0, 1.0, 0.0, -1.0, 1.0, 0.0, -1.0 );\nconst mat3 g1 = mat3( 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, -1.0, -1.0, -1.0 );\nvoid main() {\nmat3 I;\nfloat cnv[2];\nvec3 sample;\nG[0] = g0;\nG[1] = g1;\nfor (float i = 0.0; i < 3.0; i++) {\nfor (float j = 0.0; j < 3.0; j++) {\nsample = texture2D( u_colorTexture, v_uv + texel * vec2(i-1.0,j-1.0) ).rgb;\nI[int(i)][int(j)] = length(sample);\n}\n}\nfor (int i = 0; i < 2; i++) {\nfloat dp3 = dot(G[i][0], I[0]) + dot(G[i][1], I[1]) + dot(G[i][2], I[2]);\ncnv[i] = dp3 * dp3;\n}\nvec4 color = texture2D(u_colorTexture, v_uv);\ngl_FragColor = vec4(0.5 * sqrt(cnv[0] * cnv[0] + cnv[1] * cnv[1]) * color);\n}"},filterEffect:{"filterEffect.frag":"precision mediump float;\nuniform sampler2D u_colorTexture;\nuniform mat4 u_coefficients;\nvarying vec2 v_uv;\nvoid main() {\nvec4 color = texture2D(u_colorTexture, v_uv);\nvec4 rgbw = u_coefficients * vec4(color.a > 0.0 ? color.rgb / color.a : vec3(0.0), 1.0);\nfloat a = color.a;\ngl_FragColor = vec4(a * rgbw.rgb, a);\n}"},pp:{"pp.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying vec2 v_uv;\nvoid main() {\ngl_Position = vec4(a_position, 0.0, 1.0);\nv_uv = (a_position + 1.0) / 2.0;\n}"}},raster:{bitmap:{"bitmap.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform highp vec2 u_coordScale;\nuniform lowp float u_opacity;\n#include <filtering/bicubic.glsl>\nvoid main() {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_texture, v_texcoord, u_coordScale);\n#else\nvec4 color = texture2D(u_texture, v_texcoord);\n#endif\ngl_FragColor = vec4(color.rgb * u_opacity, color.a * u_opacity);\n}","bitmap.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"},common:{"common.glsl":"uniform sampler2D u_image;\nuniform int u_bandCount;\nuniform bool u_flipY;\nuniform float u_opacity;\nuniform int u_resampling;\nuniform vec2 u_srcImageSize;\n#ifdef APPLY_PROJECTION\n#include <raster/common/projection.glsl>\n#endif\n#ifdef BICUBIC\n#include <filtering/bicubic.glsl>\n#endif\n#ifdef BILINEAR\n#include <filtering/bilinear.glsl>\n#endif\nvec2 getPixelLocation(vec2 coords) {\nvec2 targetLocation = u_flipY ? vec2(coords.s, 1.0 - coords.t) : coords;\n#ifdef APPLY_PROJECTION\ntargetLocation = projectPixelLocation(targetLocation);\n#endif\nreturn targetLocation;\n}\nbool isOutside(vec2 coords){\nif (coords.t>1.00001 ||coords.t<-0.00001 || coords.s>1.00001 ||coords.s<-0.00001) {\nreturn true;\n} else {\nreturn false;\n}\n}\nvec4 getPixel(vec2 pixelLocation) {\n#ifdef BICUBIC\nvec4 color = sampleBicubicBSpline(u_image, pixelLocation, u_srcImageSize);\n#elif defined(BILINEAR)\nvec4 color = sampleBilinear(u_image, pixelLocation, u_srcImageSize);\n#else\nvec4 color = texture2D(u_image, pixelLocation);\n#endif\nreturn color;\n}","common.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform highp float u_scale;\nuniform highp vec2 u_offset;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos * u_scale + u_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}","contrastBrightness.glsl":"uniform float u_contrastOffset;\nuniform float u_brightnessOffset;\nvec4 adjustContrastBrightness(vec4 currentPixel, bool isFloat) {\nvec4 pixelValue = isFloat ? currentPixel * 255.0 : currentPixel;\nfloat maxI = 255.0;\nfloat mid = 128.0;\nfloat c = u_contrastOffset;\nfloat b = u_brightnessOffset;\nvec4 v;\nif (c > 0.0 && c < 100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) / (2.0 * (100.0 - c)) + mid;\n} else if (c <= 0.0 && c > -100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + 2.0 * maxI * b) * (100.0 + c) / 20000.0 + mid;\n} else if (c == 100.0) {\nv = (200.0 * pixelValue - 100.0 * maxI + (maxI + 1.0) * (100.0 - c) + 2.0 * maxI * b);\nv = (sign(v) + 1.0) / 2.0;\n} else if (c == -100.0) {\nv = vec4(mid, mid, mid, currentPixel.a);\n}\nvec3 rgb = clamp(v.rgb / 255.0, 0.0, 1.0);\nreturn vec4(rgb, currentPixel.a);\n}","getSurfaceValues.glsl":"#include <raster/common/mirror.glsl>\nvoid getSurfaceValues(sampler2D imageTexture, vec2 texCoord, vec2 srcImageSize, inout float values[10]) {\nvec2 onePixel = 1.0 / srcImageSize;\nvec4 va = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(-1.0, -1.0)));\nvec4 vb = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(0.0, -1.0)));\nvec4 vc = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(1.0, -1.0)));\nvec4 vd = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(-1.0, 0.0)));\nvec4 ve = texture2D(imageTexture, mirror(texCoord));\nvec4 vf = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(1.0, 0.0)));\nvec4 vg = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(-1.0, 1.0)));\nvec4 vh = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(0.0, 1.0)));\nvec4 vi = texture2D(imageTexture, mirror(texCoord + onePixel * vec2(1.0, 1.0)));\nfloat alpha = va.a * vb.a * vc.a * vd.a * ve.a * vf.a * vg.a * vh.a * vi.a;\nvalues[0] = va.r;\nvalues[1] = vb.r;\nvalues[2] = vc.r;\nvalues[3] = vd.r;\nvalues[4] = ve.r;\nvalues[5] = vf.r;\nvalues[6] = vg.r;\nvalues[7] = vh.r;\nvalues[8] = vi.r;\nvalues[9] = alpha;\n}","inverse.glsl":"float invertValue(float value) {\nfloat s = sign(value);\nreturn (s * s) / (value + abs(s) - 1.0);\n}","mirror.glsl":"vec2 mirror(vec2 pos) {\nvec2 pos1 = abs(pos);\nreturn step(pos1, vec2(1.0, 1.0)) * pos1 + step(1.0, pos1) * (2.0 - pos1);\n}","projection.glsl":"uniform sampler2D u_transformGrid;\nuniform vec2 u_transformSpacing;\nuniform vec2 u_transformGridSize;\nuniform vec2 u_targetImageSize;\nvec2 projectPixelLocation(vec2 coords) {\n#ifdef LOOKUP_PROJECTION\nvec4 pv = texture2D(u_transformGrid, coords);\nreturn vec2(pv.r, pv.g);\n#endif\nvec2 index_image = floor(coords * u_targetImageSize);\nvec2 oneTransformPixel = vec2(0.25 / u_transformGridSize.s, 1.0 / u_transformGridSize.t);\nvec2 index_transform = floor(index_image / u_transformSpacing) / u_transformGridSize;\nvec2 pos = fract((index_image + vec2(0.5, 0.5)) / u_transformSpacing);\nvec2 srcLocation;\nvec2 transform_location = index_transform + oneTransformPixel * 0.5;\nif (pos.s <= pos.t) {\nvec4 ll_abc = texture2D(u_transformGrid, vec2(transform_location.s, transform_location.t));\nvec4 ll_def = texture2D(u_transformGrid, vec2(transform_location.s + oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ll_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ll_def.rgb, vec3(pos, 1.0));\n} else {\nvec4 ur_abc = texture2D(u_transformGrid, vec2(transform_location.s + 2.0 * oneTransformPixel.s, transform_location.t));\nvec4 ur_def = texture2D(u_transformGrid, vec2(transform_location.s + 3.0 * oneTransformPixel.s, transform_location.t));\nsrcLocation.s = dot(ur_abc.rgb, vec3(pos, 1.0));\nsrcLocation.t = dot(ur_def.rgb, vec3(pos, 1.0));\n}\nreturn srcLocation;\n}"},flow:{"getFadeOpacity.glsl":"uniform float u_decayRate;\nuniform float u_fadeToZero;\nfloat getFadeOpacity(float x) {\nfloat cutOff = mix(0.0, exp(-u_decayRate), u_fadeToZero);\nreturn (exp(-u_decayRate * x) - cutOff) / (1.0 - cutOff);\n}","getFragmentColor.glsl":"vec4 getFragmentColor(vec4 color, float dist, float size, float featheringSize) {\nfloat featheringStart = clamp(0.5 - featheringSize / size, 0.0, 0.5);\nif (dist > featheringStart) {\ncolor *= 1.0 - (dist - featheringStart) / (0.5 - featheringStart);\n}\nreturn color;\n}",imagery:{"imagery.frag":"precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D u_texture;\nuniform float u_Min;\nuniform float u_Max;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nfloat getIntensity(float v) {\nreturn u_Min + v * (u_Max - u_Min);\n}\nvoid main(void) {\nvec4 sampled = texture2D(u_texture, v_texcoord);\nfloat intensity = getIntensity(sampled.r);\ngl_FragColor = getColor(intensity);\ngl_FragColor.a *= getOpacity(sampled.r);\ngl_FragColor.a *= sampled.a;\ngl_FragColor.rgb *= gl_FragColor.a;\n}","imagery.vert":"attribute vec2 a_position;\nattribute vec2 a_texcoord;\nuniform mat3 u_dvsMat3;\nvarying vec2 v_texcoord;\nvoid main(void) {\nvec2 xy = (u_dvsMat3 * vec3(a_position, 1.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_texcoord = a_texcoord;\n}"},particles:{"particles.frag":"precision highp float;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/getFragmentColor.glsl>\nvoid main(void) {\ngl_FragColor = getFragmentColor(v_color, length(v_texcoord - 0.5), v_size, u_featheringSize);\n}","particles.vert":"attribute vec4 a_xyts0;\nattribute vec4 a_xyts1;\nattribute vec4 a_typeIdDurationSeed;\nattribute vec4 a_extrudeInfo;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nvarying vec4 v_color;\nvarying vec2 v_texcoord;\nvarying float v_size;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/vv.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nvec2 position0 = a_xyts0.xy;\nfloat t0 = a_xyts0.z;\nfloat speed0 = a_xyts0.w;\nvec2 position1 = a_xyts1.xy;\nfloat t1 = a_xyts1.z;\nfloat speed1 = a_xyts1.w;\nfloat type = a_typeIdDurationSeed.x;\nfloat id = a_typeIdDurationSeed.y;\nfloat duration = a_typeIdDurationSeed.z;\nfloat seed = a_typeIdDurationSeed.w;\nvec2 e0 = a_extrudeInfo.xy;\nvec2 e1 = a_extrudeInfo.zw;\nfloat animationPeriod = duration + u_trailLength;\nfloat scaledTime = u_time * u_flowSpeed;\nfloat randomizedTime = scaledTime + seed * animationPeriod;\nfloat t = mod(randomizedTime, animationPeriod);\nfloat fUnclamped = (t - t0) / (t1 - t0);\nfloat f = clamp(fUnclamped, 0.0, 1.0);\nfloat clampedTime = mix(t0, t1, f);\nfloat speed = mix(speed0, speed1, f);\nvec2 extrude;\nvec2 position;\nfloat fadeOpacity;\nfloat introOpacity;\nif (type == 2.0) {\nif (fUnclamped < 0.0 || (fUnclamped > 1.0 && t1 != duration)) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nvec2 ortho = mix(e0, e1, f);\nvec2 parallel;\nparallel = normalize(position1 - position0) * 0.5;\nif (id == 1.0) {\nextrude = ortho;\nv_texcoord = vec2(0.5, 0.0);\n} else if (id == 2.0) {\nextrude = -ortho;\nv_texcoord = vec2(0.5, 1.0);\n} else if (id == 3.0) {\nextrude = ortho + parallel;\nv_texcoord = vec2(1.0, 0.0);\n} else if (id == 4.0) {\nextrude = -ortho + parallel;\nv_texcoord = vec2(1.0, 1.0);\n}\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else {\nif (fUnclamped < 0.0) {\ngl_Position = vec4(0.0, 0.0, -2.0, 1.0);\nreturn;\n}\nif (id == 1.0) {\nextrude = e0;\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 2.0) {\nextrude = -e0;\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - t0) / u_trailLength);\nintroOpacity = 1.0 - exp(-t0);\nv_size = getSize(speed0);\nv_color = getColor(speed0);\nv_color.a *= getOpacity(speed0);\nposition = position0;\n} else if (id == 3.0) {\nextrude = mix(e0, e1, f);\nv_texcoord = vec2(0.5, 0.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n} else if (id == 4.0) {\nextrude = -mix(e0, e1, f);\nv_texcoord = vec2(0.5, 1.0);\nfadeOpacity = getFadeOpacity((t - clampedTime) / u_trailLength);\nintroOpacity = 1.0 - exp(-clampedTime);\nv_size = getSize(speed);\nv_color = getColor(speed);\nv_color.a *= getOpacity(speed);\nposition = mix(position0, position1, f);\n}\n}\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(extrude * v_size, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_color.a *= fadeOpacity;\nv_color.a *= mix(1.0, introOpacity, u_introFade);\nv_color.rgb *= v_color.a;\n}"},streamlines:{"streamlines.frag":"precision highp float;\nvarying float v_side;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_size;\nuniform float u_time;\nuniform float u_trailLength;\nuniform float u_flowSpeed;\nuniform float u_featheringSize;\nuniform float u_introFade;\n#include <raster/flow/getFragmentColor.glsl>\n#include <raster/flow/getFadeOpacity.glsl>\nvoid main(void) {\nfloat t = mod(v_timeSeed * (v_totalTime + u_trailLength) + u_time * u_flowSpeed, v_totalTime + u_trailLength) - v_time;\nvec4 color = v_color * step(0.0, t) * getFadeOpacity(t / u_trailLength);\ncolor *= mix(1.0, 1.0 - exp(-v_time), u_introFade);\ngl_FragColor = getFragmentColor(color, length((v_side + 1.0) / 2.0 - 0.5), v_size, u_featheringSize);\n}","streamlines.vert":"attribute vec3 a_positionAndSide;\nattribute vec3 a_timeInfo;\nattribute vec2 a_extrude;\nattribute float a_speed;\nuniform mat3 u_dvsMat3;\nuniform mat3 u_displayViewMat3;\nvarying float v_time;\nvarying float v_totalTime;\nvarying float v_timeSeed;\nvarying vec4 v_color;\nvarying float v_side;\nvarying float v_size;\nuniform float u_featheringSize;\n#include <raster/flow/vv.glsl>\nvoid main(void) {\nvec4 lineColor = getColor(a_speed);\nfloat lineOpacity = getOpacity(a_speed);\nfloat lineSize = getSize(a_speed);\nvec2 position = a_positionAndSide.xy;\nv_side = a_positionAndSide.z;\nvec2 xy = (u_dvsMat3 * vec3(position, 1.0) + u_displayViewMat3 * vec3(a_extrude * lineSize, 0.0)).xy;\ngl_Position = vec4(xy, 0.0, 1.0);\nv_time = a_timeInfo.x;\nv_totalTime = a_timeInfo.y;\nv_timeSeed = a_timeInfo.z;\nv_color = lineColor;\nv_color.a *= lineOpacity;\nv_color.rgb *= v_color.a;\nv_size = lineSize;\n}"},"vv.glsl":"#define MAX_STOPS 8\n#ifdef VV_COLOR\nuniform float u_color_stops[MAX_STOPS];\nuniform vec4 u_color_values[MAX_STOPS];\nuniform int u_color_count;\n#else\nuniform vec4 u_color;\n#endif\n#ifdef VV_OPACITY\nuniform float u_opacity_stops[MAX_STOPS];\nuniform float u_opacity_values[MAX_STOPS];\nuniform int u_opacity_count;\n#else\nuniform float u_opacity;\n#endif\n#ifdef VV_SIZE\nuniform float u_size_stops[MAX_STOPS];\nuniform float u_size_values[MAX_STOPS];\nuniform int u_size_count;\n#else\nuniform float u_size;\n#endif\nuniform float u_featheringOffset;\nvec4 getColor(float x) {\n#ifdef VV_COLOR\nvec4 color = u_color_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_color_count) {\nbreak;\n}\nfloat x1 = u_color_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_color_stops[i];\nvec4 y2 = u_color_values[i];\nif (x < x2) {\nvec4 y1 = u_color_values[i - 1];\ncolor = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\ncolor = y2;\n}\n}\n}\n#else\nvec4 color = u_color;\n#endif\nreturn color;\n}\nfloat getOpacity(float x) {\n#ifdef VV_OPACITY\nfloat opacity = u_opacity_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_opacity_count) {\nbreak;\n}\nfloat x1 = u_opacity_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_opacity_stops[i];\nfloat y2 = u_opacity_values[i];\nif (x < x2) {\nfloat y1 = u_opacity_values[i - 1];\nopacity = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nopacity = y2;\n}\n}\n}\n#else\nfloat opacity = u_opacity;\n#endif\nreturn opacity;\n}\nfloat getSize(float x) {\n#ifdef VV_SIZE\nfloat size = u_size_values[0];\n{\nfor (int i = 1; i < MAX_STOPS; i++) {\nif (i >= u_size_count) {\nbreak;\n}\nfloat x1 = u_size_stops[i - 1];\nif (x < x1) {\nbreak;\n}\nfloat x2 = u_size_stops[i];\nfloat y2 = u_size_values[i];\nif (x < x2) {\nfloat y1 = u_size_values[i - 1];\nsize = y1 + (y2 - y1) * (x - x1) / (x2 - x1);\n} else {\nsize = y2;\n}\n}\n}\n#else\nfloat size = u_size;\n#endif\nreturn size + 2.0 * u_featheringSize * u_featheringOffset;\n}"},hillshade:{"hillshade.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\nuniform int u_hillshadeType;\nuniform float u_sinZcosAs[6];\nuniform float u_sinZsinAs[6];\nuniform float u_cosZs[6];\nuniform float u_weights[6];\nuniform vec2 u_factor;\nuniform float u_minValue;\nuniform float u_maxValue;\n#include <raster/lut/colorize.glsl>\n#include <raster/common/getSurfaceValues.glsl>\nvec3 rgb2hsv(vec3 c) {\nvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\nvec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\nvec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\nfloat d = q.x - min(q.w, q.y);\nfloat e = 1.0e-10;\nreturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);\n}\nvec3 hsv2rgb(vec3 c) {\nvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\nvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\nreturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\nvec4 overlay(float val, float minValue, float maxValue, float hillshade) {\nval = clamp((val - minValue) / (maxValue - minValue), 0.0, 1.0);\nvec4 rgb = colorize(vec4(val, val, val, 1.0), 255.0);\nvec3 hsv = rgb2hsv(rgb.xyz);\nhsv.z = hillshade;\nreturn vec4(hsv2rgb(hsv), 1.0) * rgb.a;\n}\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\nif (currentPixel.a == 0.0) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nfloat pv[10];\ngetSurfaceValues(u_image, pixelLocation, u_srcImageSize, pv);\nfloat alpha = pv[9];\nfloat dzx = (pv[2] + 2.0 * pv[5] + pv[8] - pv[0] - 2.0 * pv[3] - pv[6]) * u_factor.s;\nfloat dzy = (pv[6] + 2.0 * pv[7] + pv[8] - pv[0] - 2.0 * pv[1] - pv[2]) * u_factor.t;\nfloat dzd = sqrt(1.0 + dzx * dzx + dzy * dzy);\nfloat hillshade = 0.0;\nif (u_hillshadeType == 0){\nfloat cosDelta = u_sinZsinAs[0] * dzy - u_sinZcosAs[0] * dzx;\nfloat z = (u_cosZs[0] + cosDelta) / dzd;\nif (z < 0.0)  z = 0.0;\nhillshade = z;\n} else {\nfor (int k = 0; k < 6; k++) {\nfloat cosDelta = u_sinZsinAs[k] * dzy - u_sinZcosAs[k] * dzx;\nfloat z = (u_cosZs[k] + cosDelta) / dzd;\nif (z < 0.0) z = 0.0;\nhillshade = hillshade + z * u_weights[k];\nif (k == 5) break;\n}\n}\n#ifdef APPLY_COLORMAP\ngl_FragColor = overlay(pv[4], u_minValue, u_maxValue, hillshade) * alpha * u_opacity;\n#else\ngl_FragColor = vec4(hillshade, hillshade, hillshade, 1.0) * alpha * u_opacity;\n#endif\n}"},lut:{"colorize.glsl":"uniform sampler2D u_colormap;\nuniform float u_colormapOffset;\nuniform float u_colormapMaxIndex;\nvec4 colorize(vec4 currentPixel, float scaleFactor) {\nfloat clrIndex = clamp(currentPixel.r * scaleFactor - u_colormapOffset, 0.0, u_colormapMaxIndex);\nvec2 clrPosition = vec2((clrIndex + 0.5) / (u_colormapMaxIndex + 1.0), 0.0);\nvec4 color = texture2D(u_colormap, clrPosition);\nvec4 result = vec4(color.rgb, color.a * currentPixel.a);\nreturn result;\n}","lut.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\n#include <raster/lut/colorize.glsl>\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\nvec4 result = colorize(currentPixel, 1.0);\ngl_FragColor = vec4(result.xyz, 1.0) * result.a * u_opacity;\n}"},magdir:{"magdir.frag":"precision mediump float;\nvarying vec4 v_color;\nuniform lowp float u_opacity;\nvoid main() {\ngl_FragColor = v_color * u_opacity;\n}","magdir.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nuniform float u_rotation;\nuniform vec4 u_colors[12];\nvarying vec4 v_color;\nvoid main()\n{\nfloat angle = a_offset.y + u_rotation;\n#ifndef ROTATION_GEOGRAPHIC\nangle = 3.14159265359 * 2.0 - angle - 3.14159265359 / 2.0;\n#endif\nvec2 offset = vec2(cos(angle), sin(angle)) * a_offset.x;\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 pos = a_pos + offset * sizePercentage * u_symbolSize;\nv_color = u_colors[int(a_vv.x)];\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},reproject:{"reproject.frag":"precision mediump float;\nvarying vec2 v_texcoord;\n#include <raster/common/common.glsl>\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\ngl_FragColor = vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\n}","reproject.vert":"precision mediump float;\nattribute vec2 a_position;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_position;\ngl_Position = vec4(2.0 * (a_position - 0.5), 0.0, 1.0);\n}"},rfx:{aspect:{"aspect.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform vec2 u_cellSize;\nuniform vec2 u_srcImageSize;\n#include <raster/common/getSurfaceValues.glsl>\nconst float pi = 3.14159265359;\nvoid main() {\nfloat pv[10];\ngetSurfaceValues(u_image, v_texcoord, u_srcImageSize, pv);\nfloat alpha = pv[9];\nfloat dzx = (pv[2] + 2.0 * pv[5] + pv[8] - pv[0] - 2.0 * pv[3] - pv[6]) / (8.0 * u_cellSize[0]);\nfloat dzy = -(pv[6] + 2.0 * pv[7] + pv[8] - pv[0] - 2.0 * pv[1] - pv[2]) / (8.0 * u_cellSize[1]);\nalpha *= sign(abs(dzx) + abs(dzy));\nfloat aspect_rad = (dzx == 0.0) ? (step(0.0, dzy) * 0.5 * pi + step(dzy, 0.0) * 1.5 * pi) : mod((2.5 * pi + atan(dzy, -dzx)), 2.0 * pi);\nfloat aspect = aspect_rad * 180.0 / pi;\ngl_FragColor = vec4(aspect, aspect, aspect, 1.0) * alpha;\n}"},bandarithmetic:{"bandarithmetic.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform mediump mat3 u_bandIndexMat3;\nuniform float u_adjustments[3];\n#include <raster/common/inverse.glsl>\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nvec3 pv2 = u_bandIndexMat3 * pv.rgb;\nfloat nir = pv2.r;\nfloat red = pv2.g;\nfloat index;\n#ifdef NDXI\nindex = (nir - red) * invertValue(nir + red);\n#elif defined(SR)\nindex = nir * invertValue(red);\n#elif defined(CI)\nindex = nir * invertValue(red) - 1.0;\n#elif defined(SAVI)\nindex = (nir - red) * invertValue(nir + red + u_adjustments[0]) * (1.0 + u_adjustments[0]);\n#elif defined(TSAVI)\nfloat s = u_adjustments[0];\nfloat a = u_adjustments[1];\nfloat x = u_adjustments[2];\nfloat y = -a * s + x * (1.0 + s * s);\nindex = (s * (nir - s * red - a)) * invertValue(a * nir + red + y);\n#elif defined(MAVI)\nindex = 0.5 * (2.0 * (nir + 1.0) - sqrt(pow((2.0 * nir + 1.0), 2.0) - 8.0 * (nir - red)));\n#elif defined(GEMI)\nfloat eta = (2.0 * (nir * nir - red * red) + 1.5 * nir + 0.5 * red) * invertValue(nir + red + 0.5);\nindex = eta * (1.0 - 0.25 * eta) - (red - 0.125) * invertValue(1.0 - red);\n#elif defined(PVI)\nfloat a = u_adjustments[0];\nfloat b = u_adjustments[1];\nfloat y = sqrt(1.0 + a * a);\nindex = (nir - a * red - b) * invertValue(y);\n#elif defined(VARI)\nindex = (pv2.g - pv2.r) * invertValue(pv2.g + pv2.r - pv2.b);\n#elif defined(MTVI2)\nfloat green = pv2.b;\nfloat v = pow(sqrt((2.0 * nir + 1.0), 2.0) - 6.0 * nir - 5.0 * sqrt(red) - 0.5);\nindex = 1.5 * (1.2 * (nir - green) - 2.5 * (red - green)) * v;\n#elif defined(RTVICORE)\nfloat green = pv2.b;\nindex = 100.0 * (nir - red) - 10.0 * (nir - green);\n#elif defined(EVI)\nfloat blue = pv2.b;\nfloat denom = nir + 6.0 * red - 7.5 * blue + 1.0;\nindex =  (2.5 * (nir - red)) * invertValue(denom);\n#elif defined(WNDWI)\nfloat g = pv2.r;\nfloat n = pv2.g;\nfloat s = pv2.s;\nfloat a = u_adjustments[0];\nfloat denom = g + a * n + (1.0 - a) * s;\nindex = (g - a * n - (1 - a) * s) * invertValue(denom);\n#elif defined(BAI)\nindex = invertValue(pow((0.1 - red), 2.0) + pow((0.06 - nir), 2.0));\n#else\ngl_FragColor = pv;\nreturn;\n#endif\ngl_FragColor = vec4(index, index, index, pv.a);\n}"},compositeband:{"compositeband.frag":"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\nuniform sampler2D u_image2;\nvarying vec2 v_texcoord;\nvoid main() {\nvec4 p0 = texture2D(u_image, v_texcoord);\nvec4 p1 = texture2D(u_image1, v_texcoord);\nvec4 p2 = texture2D(u_image2, v_texcoord);\ngl_FragColor = vec4(p0.r, p1.r, p2.r, p0.a * p1.a * p2.a);\n}"},contrast:{"contrast.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\n#include <raster/common/contrastBrightness.glsl>\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nvec4 result = adjustContrastBrightness(pv, false) ;\ngl_FragColor = vec4(result.rgb * 255.0, result.a);\n}"},convolution:{"convolution.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform vec2 u_srcImageSize;\n#define KERNEL_SIZE_ROWS ROWS\n#define KERNEL_SIZE_COLS COLS\nuniform vec2 u_clampRange;\nuniform float u_kernel[25];\n#include <raster/common/mirror.glsl>\nvoid main() {\nvec3 rgb = vec3(0.0, 0.0, 0.0);\nvec2 resolution = 1.0 / u_srcImageSize;\nfloat rowOffset = -float(floor(float(KERNEL_SIZE_ROWS) / 2.0));\nfloat colOffset = -float(floor(float(KERNEL_SIZE_COLS) / 2.0));\nfloat alpha = 1.0;\nfor (int row = 0; row < KERNEL_SIZE_ROWS; row++) {\nfloat pos_row = rowOffset + float(row);\nfor (int col = 0; col < KERNEL_SIZE_COLS; col++) {\nvec2 pos = v_texcoord + vec2(colOffset + float(col), pos_row) * resolution;\nvec4 pv = texture2D(u_image, mirror(pos));\nrgb += pv.rgb * u_kernel[row * KERNEL_SIZE_COLS + col];\nalpha *= pv.a;\n}\n}\nrgb = clamp(rgb, u_clampRange.s, u_clampRange.t);\ngl_FragColor = vec4(rgb * alpha, alpha);\n}"},curvature:{"curvature.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform float u_zlFactor;\nuniform vec2 u_srcImageSize;\n#include <raster/common/getSurfaceValues.glsl>\nvoid main() {\nfloat pv[10];\ngetSurfaceValues(u_image, v_texcoord, u_srcImageSize, pv);\nfloat alpha = pv[9];\nfloat d = ((pv[3] + pv[5]) * 0.5 - pv[4]);\nfloat e = ((pv[1] + pv[7]) * 0.5 - pv[4]);\nfloat curvature = 0.0;\n#ifdef STANDARD\ncurvature = -u_zlFactor * (d + e);\ngl_FragColor = vec4(curvature, curvature, curvature, alpha);\n#else\nfloat f = (-pv[0] + pv[2] + pv[6] - pv[8]) / 4.0;\nfloat g = (-pv[3] + pv[5]) / 2.0;\nfloat h = (pv[1] - pv[7]) / 2.0;\nfloat g2 = g * g;\nfloat h2 = h * h;\n#ifdef PROFILE\ncurvature = (u_zlFactor * (d * g2 + e * h2 + f * g * h)) / (g2 + h2);\n#else\ncurvature = (-u_zlFactor * (d * h2 + e * g2 - f * g * h)) / (g2 + h2);\n#endif\n#endif\ngl_FragColor = vec4(curvature, curvature, curvature, alpha);\n}"},extractband:{"extractband.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform mediump mat3 u_bandIndexMat3;\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nvec3 pv2 = u_bandIndexMat3 * pv.rgb;\ngl_FragColor = vec4(pv2, pv.a);\n}"},focalstatistics:{"focalstatistics.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform vec2 u_srcImageSize;\n#define KERNEL_SIZE_ROWS ROWS\n#define KERNEL_SIZE_COLS COLS\nuniform vec2 u_clampRange;\n#include <raster/common/mirror.glsl>\n#include <raster/common/inverse.glsl>\nvoid main() {\nvec2 resolution = 1.0 / u_srcImageSize;\nfloat rowOffset = -float(floor(float(KERNEL_SIZE_ROWS) / 2.0));\nfloat colOffset = -float(floor(float(KERNEL_SIZE_COLS) / 2.0));\nfloat count = 0.0;\n#ifdef STDDEV\nvec3 sum = vec3(0.0, 0.0, 0.0);\nvec3 sum2 = vec3(0.0, 0.0, 0.0);\n#endif\nvec4 currentPixel = texture2D(u_image, v_texcoord);\nvec3 rgb = currentPixel.rgb;\nfor (int row = 0; row < KERNEL_SIZE_ROWS; row++) {\nfloat pos_row = rowOffset + float(row);\nfor (int col = 0; col < KERNEL_SIZE_COLS; col++) {\nvec2 pos = v_texcoord + vec2(colOffset + float(col), pos_row) * resolution;\nvec4 pv = texture2D(u_image, mirror(pos));\ncount += pv.a;\n#ifdef MIN\nrgb = min(rgb, pv.rgb);\n#elif defined(MAX)\nrgb = max(rgb, pv.rgb);\n#elif defined(MEAN)\nrgb += pv.rgb;\n#elif defined(STDDEV)\nsum += pv.rgb;\nsum2 += (pv.rgb * pv.rgb);\n#endif\n}\n}\n#ifdef MEAN\nrgb *= invertValue(count);\n#elif defined(STDDEV)\nrgb = sqrt((sum2 - sum * sum * invertValue(count)) * invertValue(count));\n#endif\nfloat alpha = step(0.9999, count);\nrgb = clamp(rgb, u_clampRange.s, u_clampRange.t);\n#ifdef FILL\nrgb = (1.0 - currentPixel.a) * rgb + currentPixel.a * currentPixel.rgb;\n#endif\ngl_FragColor = vec4(rgb * alpha, alpha);\n}"},local:{"local.frag":"precision mediump float;\nuniform sampler2D u_image;\nuniform sampler2D u_image1;\n#ifdef ONE_CONSTANT\nuniform float u_image1Const;\n#ifdef TWO_CONSTANT\nuniform float u_image2Const;\n#endif\nuniform mat3 u_imageSwap;\n#endif\nvarying vec2 v_texcoord;\nuniform vec2 u_domainRange;\n#include <raster/common/inverse.glsl>\nvoid main() {\nvec4 pv0 = texture2D(u_image, v_texcoord);\nfloat a = pv0.r;\n#ifdef TWO_IMAGES\n#ifdef ONE_CONSTANT\nfloat b = u_image1Const;\nvec3 abc = u_imageSwap * vec3(a, b, 0);\na = abc.s;\nb = abc.t;\n#else\nvec4 pv1 = texture2D(u_image1, v_texcoord);\nfloat b = pv1.r;\n#endif\n#elif defined(CONDITIONAL)\n#ifdef TWO_CONSTANT\nfloat b = u_image1Const;\nfloat c = u_image2Const;\nvec3 abc = u_imageSwap * vec3(a, b, c);\na = abc.s;\nb = abc.t;\nc = abc.p;\n#elif defined(ONE_CONSTANT)\nvec4 pv1 = texture2D(u_image1, v_texcoord);\nfloat b = pv1.r;\nfloat c = u_image1Const;\nvec3 abc = u_imageSwap * vec3(a, b, c);\na = abc.s;\nb = abc.t;\nc = abc.p;\n#else\nvec4 pv1 = texture2D(u_image1, v_texcoord);\nvec4 pv2 = texture2D(u_image2, v_texcoord);\nfloat b = pv1.r;\nfloat c = pv2.r;\n#endif\n#endif\nfloat result = a;\nfloat alpha = pv0.a;\n#ifdef PLUS\nresult = a + b;\n#elif defined(MINUS)\nresult = a - b;\n#elif defined(TIMES)\nresult = a * b;\n#elif defined(DIVIDE)\nresult = a * invertValue(b);\nalpha *= float(abs(sign(b)));\n#elif defined(FLOATDIVIDE)\nresult = a * invertValue(b);\nalpha *= float(abs(sign(b)));\n#elif defined(FLOORDIVIDE)\nresult = floor(a * invertValue(b));\nalpha *= float(abs(sign(b)));\n#elif defined(SQUARE)\nresult = a * a;\n#elif defined(SQRT)\nresult = sqrt(a);\n#elif defined(POWER)\nresult = pow(a, b);\n#elif defined(LN)\nresult = a <= 0.0 ? 0.0: log(a);\nalpha *= float(a > 0.0);\n#elif defined(LOG_1_0)\nresult = a <= 0.0 ? 0.0: log2(a) * invertValue(log2(10.0));\nalpha *= float(a > 0.0);\n#elif defined(LOG_2)\nresult = a <= 0.0 ? 0.0: log2(a);\nalpha *= float(a > 0.0);\n#elif defined(EXP)\nresult = exp(a);\n#elif defined(EXP_1_0)\nresult = pow(10.0, a);\n#elif defined(EXP_2)\nresult = pow(2.0, a);\n#elif defined(ROUNDDOWN)\nresult = floor(a);\n#elif defined(ROUNDUP)\nresult = ceil(a);\n#elif defined(INT)\nresult = float(sign(a)) * floor(abs(a));\n#elif defined(MOD)\nresult = mod(a, b);\n#elif defined(NEGATE)\nresult = -a;\n#elif defined(ABS)\nresult = abs(a);\n#elif defined(ACOS)\nresult = abs(a) > 1.0 ? 0.0: acos(a);\nalpha *= step(abs(a), 1.00001);\n#elif defined(ACOSH)\nresult = acosh(a);\n#elif defined(POLYFILLACOSH)\nresult = log(a + sqrt(a * a - 1.0));\n#elif defined(ASIN)\nresult = abs(a) > 1.0 ? 0.0: asin(a);\nalpha *= step(abs(a), 1.00001);\n#elif defined(ASINH)\nresult = asinh(a);\n#elif defined(POLYFILLASINH)\nresult = log(a + sqrt(a * a + 1.0));\n#elif defined(ATAN)\nresult = atan(a);\n#elif defined(ATANH)\nresult = abs(a) > 1.0 ? 0.0: atanh(a);\nalpha *= step(abs(a), 1.0);\n#elif defined(POLYFILLATANH)\nresult = a == 1.0 ? 0.0 : 0.5 * log((1.0 + a)/(1.0 -a));\n#elif defined(ATAN_2)\nresult = atan(a, b);\n#elif defined(COS)\nresult = cos(a);\n#elif defined(COSH)\nresult = cosh(a);\n#elif defined(POLYFILLCOSH)\nfloat halfexp = exp(a) / 2.0;\nresult = halfexp + 1.0 / halfexp;\n#elif defined(SIN)\nresult = sin(a);\n#elif defined(SINH)\nresult = sinh(a);\n#elif defined(POLYFILLSINH)\nfloat halfexp = exp(a) / 2.0;\nresult = halfexp - 1.0 / halfexp;\n#elif defined(TAN)\nresult = tan(a);\n#elif defined(TANH)\nresult = tanh(a);\n#elif defined(POLYFILLTANH)\nfloat expx = exp(a);\nresult = (expx - 1.0 / expx) / (expx + 1.0 / expx);\n#elif defined(BITWISEAND)\nresult = a & b;\n#elif defined(BITWISEOR)\nresult = a | b;\n#elif defined(BITWISELEFTSHIFT)\nresult = a << b;\n#elif defined(BITWISERIGHTSHIFT)\nresult = a >> b;\n#elif defined(BITWISENOT)\nresult = ~a;\n#elif defined(BITWISEXOR)\nresult = a ^ b;\n#elif defined(BOOLEANAND)\nresult = float((a != 0.0) && (b != 0.0));\n#elif defined(BOOLEANNOT)\nresult = float(a == 0.0);\n#elif defined(BOOLEANOR)\nresult = float((a != 0.0) || (b != 0.0));\n#elif defined(BOOLEANXOR)\nresult = float((a != 0.0) ^^ (b != 0.0));\n#elif defined(GREATERTHAN)\nresult = float(a > b);\n#elif defined(GREATERTHANEQUAL)\nresult = float(a >= b);\n#elif defined(LESSTHAN)\nresult = float(a < b);\n#elif defined(LESSTHANEQUAL)\nresult = float(a <= b);\n#elif defined(EQUALTO)\nresult = float(a == b);\n#elif defined(NOTEQUAL)\nresult = float(a != b);\n#elif defined(ISNULL)\nresult = float(alpha == 0.0);\nalpha = 1.0;\n#elif defined(SETNULL)\nfloat maskValue = float(a == 0.0);\nresult = maskValue * b;\nalpha *= maskValue;\n#elif defined(CONDITIONAL)\nfloat weight = float(abs(sign(a)));\nresult = weight * b + (1.0 - weight) * c;\n#endif\nbool isInvalid = result < u_domainRange.s || result > u_domainRange.t;\nresult = isInvalid ? 0.0 : result;\nalpha *= float(!isInvalid);\n#ifdef ROUND_OUTPUT\nresult = floor(result + 0.5);\n#endif\ngl_FragColor = vec4(result, result, result, alpha);\n}"},mask:{"mask.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\n#define LEN_INCLUDED_RANGES 6\n#define LEN_NODATA_VALUES 6\nuniform highp float u_includedRanges[6];\nuniform highp float u_noDataValues[6];\nfloat maskFactor(float bandValue, float fromValue, float to) {\nfloat factor = 1.0;\nfor (int i = 0; i < LEN_NODATA_VALUES; i++) {\nfactor *= float(u_noDataValues[i] != bandValue);\n}\nfactor *= step(fromValue, bandValue) * step(bandValue, to);\nreturn factor;\n}\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nfloat redFactor = maskFactor(pv.r, u_includedRanges[0], u_includedRanges[1]);\n#ifdef MULTI_BAND\nfloat greenFactor = maskFactor(pv.g, u_includedRanges[2], u_includedRanges[3]);\nfloat blueFactor = maskFactor(pv.b, u_includedRanges[4], u_includedRanges[5]);\nfloat maskFactor = redFactor * greenFactor * blueFactor;\ngl_FragColor = pv * maskFactor;\n#else\ngl_FragColor = pv * redFactor;\n#endif\n}"},ndvi:{"ndvi.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform mediump mat3 u_bandIndexMat3;\n#include <raster/common/inverse.glsl>\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nvec3 pv2 = u_bandIndexMat3 * pv.rgb;\nfloat nir = pv2.r;\nfloat red = pv2.g;\nfloat index = (nir - red) * invertValue(nir + red);\n#ifdef SCALED\nindex = floor((index + 1.0) * 100.0 + 0.5);\n#endif\ngl_FragColor = vec4(index, index, index, pv.a);\n}"},remap:{"remap.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\n#define LEN_REMAP_RANGES 18\n#define LEN_NODATA_RANGES 12\nuniform highp float u_rangeMaps[18];\nuniform highp float u_noDataRanges[12];\nuniform highp float u_unmatchMask;\nuniform vec2 u_clampRange;\nvoid main() {\nvec4 pv = texture2D(u_image, v_texcoord);\nfloat factor = 1.0;\nfloat bandValue = pv.r;\nfor (int i = 0; i < LEN_NODATA_RANGES; i+=2) {\nfloat inside = 1.0 - step(u_noDataRanges[i], bandValue) * step(bandValue, u_noDataRanges[i+1]);\nfactor *= inside;\n}\nfloat mapValue = 0.0;\nfloat includeMask = 0.0;\nfor (int i = 0; i < LEN_REMAP_RANGES; i+=3) {\nfloat stepMask = step(u_rangeMaps[i], bandValue) * step(bandValue, u_rangeMaps[i+1]);\nincludeMask = (1.0 - stepMask) * includeMask + stepMask;\nmapValue = (1.0 - stepMask) * mapValue + stepMask * u_rangeMaps[i+2];\n}\nbandValue = factor * (mapValue + (1.0 - includeMask) * u_unmatchMask * pv.r);\nfloat bandMask = factor * max(u_unmatchMask, includeMask);\nbandValue = clamp(bandValue, u_clampRange.s, u_clampRange.t);\ngl_FragColor = vec4(bandValue, bandValue, bandValue, bandMask * pv.a);\n}"},slope:{"slope.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying vec2 v_texcoord;\nuniform vec2 u_cellSize;\nuniform float u_zFactor;\nuniform vec2 u_srcImageSize;\nuniform float u_pixelSizePower;\nuniform float u_pixelSizeFactor;\n#include <raster/common/getSurfaceValues.glsl>\nvoid main() {\nfloat pv[10];\ngetSurfaceValues(u_image, v_texcoord, u_srcImageSize, pv);\nfloat alpha = pv[9];\nfloat xf = (u_zFactor + pow(u_cellSize[0], u_pixelSizePower) * u_pixelSizeFactor) / (8.0 * u_cellSize[0]);\nfloat yf = (u_zFactor + pow(u_cellSize[1], u_pixelSizePower) * u_pixelSizeFactor) / (8.0 * u_cellSize[1]);\nfloat dzx = (pv[2] + 2.0 * pv[5] + pv[8] - pv[0] - 2.0 * pv[3] - pv[6]) * xf;\nfloat dzy = -(pv[6] + 2.0 * pv[7] + pv[8] - pv[0] - 2.0 * pv[1] - pv[2]) * yf;\nfloat rise2run = sqrt(dzx * dzx + dzy * dzy);\n#ifdef PERCENT_RISE\nfloat percentRise = rise2run * 100.0;\ngl_FragColor = vec4(percentRise, percentRise, percentRise, alpha);\n#else\nfloat degree = atan(rise2run) * 57.2957795;\ngl_FragColor = vec4(degree, degree, degree, alpha);\n#endif\n}"},stretch:{"stretch.frag":"precision mediump float;\nuniform sampler2D u_image;\nvarying highp vec2 v_texcoord;\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput;\nuniform float u_maxOutput;\nuniform float u_factor[3];\nuniform float u_gamma[3];\nuniform float u_gammaCorrection[3];\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, float gamma, float gammaCorrection) {\nval = clamp(val, minCutOff, maxCutOff);\nfloat stretchedVal;\n#ifdef USE_GAMMA\nfloat tempf = 1.0;\nfloat outRange = maxOutput - minOutput;\nfloat relativeVal = (val - minCutOff) / (maxCutOff - minCutOff);\ntempf -= step(1.0, gamma) * sign(gamma - 1.0) * pow(1.0 / outRange, relativeVal * gammaCorrection);\nstretchedVal = tempf * outRange * pow(relativeVal, 1.0 / gamma) + minOutput;\nstretchedVal = clamp(stretchedVal, minOutput, maxOutput);\n#else\nstretchedVal = minOutput + (val - minCutOff) * factor;\n#endif\n#ifdef ROUND_OUTPUT\nstretchedVal = floor(stretchedVal + 0.5);\n#endif\nreturn stretchedVal;\n}\nvoid main() {\nvec4 currentPixel = texture2D(u_image, v_texcoord);\nfloat redVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_gamma[0], u_gammaCorrection[0]);\n#ifdef MULTI_BAND\nfloat greenVal = stretchOneValue(currentPixel.g, u_minCutOff[1], u_maxCutOff[1], u_minOutput, u_maxOutput, u_factor[1], u_gamma[1], u_gammaCorrection[1]);\nfloat blueVal = stretchOneValue(currentPixel.b, u_minCutOff[2], u_maxCutOff[2], u_minOutput, u_maxOutput, u_factor[2], u_gamma[2], u_gammaCorrection[2]);\ngl_FragColor = vec4(redVal, greenVal, blueVal, currentPixel.a);\n#else\ngl_FragColor = vec4(redVal, redVal, redVal, currentPixel.a);\n#endif\n}"},vs:{"vs.vert":"precision mediump float;\nattribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nvarying highp vec2 v_texcoord;\nvoid main()\n{\nv_texcoord = a_pos;\ngl_Position = vec4(u_dvsMat3 * vec3(a_pos * u_coordScale, 1.0), 1.0);\n}"}},scalar:{"scalar.frag":"precision mediump float;\nuniform lowp float u_opacity;\nvarying vec2 v_pos;\nconst vec4 outlineColor = vec4(0.2, 0.2, 0.2, 1.0);\nconst float outlineSize = 0.02;\nconst float innerRadius = 0.25;\nconst float outerRadius = 0.42;\nconst float innerSquareLength = 0.15;\nvoid main() {\nmediump float dist = length(v_pos);\nmediump float fillalpha1 = smoothstep(outerRadius, outerRadius + outlineSize, dist);\nfillalpha1 *= (1.0-smoothstep(outerRadius + outlineSize, outerRadius + 0.1 + outlineSize, dist));\n#ifdef INNER_CIRCLE\nmediump float fillalpha2 = smoothstep(innerRadius, innerRadius + outlineSize, dist);\nfillalpha2 *= (1.0-smoothstep(innerRadius + outlineSize, innerRadius + 0.1 + outlineSize, dist));\n#else\nmediump float fillalpha2 = (abs(v_pos.x) < innerSquareLength ? 1.0 : 0.0) * (abs(v_pos.y) < innerSquareLength ? 1.0 : 0.0);\n#endif\ngl_FragColor = (fillalpha2 + fillalpha1) * outlineColor * u_opacity;\n}","scalar.vert":"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_vv;\nuniform highp mat3 u_dvsMat3;\nuniform highp vec2 u_coordScale;\nuniform vec2 u_symbolSize;\nuniform vec2 u_symbolPercentRange;\nuniform vec2 u_dataRange;\nvarying vec2 v_pos;\nvoid main()\n{\n#ifdef DATA_RANGE\nfloat valuePercentage = clamp((a_vv.y - u_dataRange.x) / (u_dataRange.y - u_dataRange.x), 0.0, 1.0);\nfloat sizeRatio = u_symbolPercentRange.x + valuePercentage * (u_symbolPercentRange.y - u_symbolPercentRange.x);\nfloat sizePercentage = clamp(sizeRatio, u_symbolPercentRange.x, u_symbolPercentRange.y);\n#else\nfloat sizePercentage = (u_symbolPercentRange.x + u_symbolPercentRange.y) / 2.0;\n#endif\nvec2 size = u_symbolSize * sizePercentage;\nvec2 pos = a_pos + a_offset * size;\nv_pos = a_offset;\ngl_Position = vec4(u_dvsMat3 * vec3(pos * u_coordScale, 1.0), 1.0);\n}"},stretch:{"stretch.frag":"precision mediump float;\nvarying highp vec2 v_texcoord;\n#include <raster/common/common.glsl>\nuniform float u_minCutOff[3];\nuniform float u_maxCutOff[3];\nuniform float u_minOutput;\nuniform float u_maxOutput;\nuniform float u_factor[3];\nuniform bool u_useGamma;\nuniform float u_gamma[3];\nuniform float u_gammaCorrection[3];\n#include <raster/lut/colorize.glsl>\nfloat stretchOneValue(float val, float minCutOff, float maxCutOff, float minOutput, float maxOutput, float factor, bool useGamma, float gamma, float gammaCorrection) {\nif (val >= maxCutOff) {\nreturn maxOutput;\n} else if (val <= minCutOff) {\nreturn minOutput;\n}\nfloat stretchedVal;\nif (useGamma) {\nfloat tempf = 1.0;\nfloat outRange = maxOutput - minOutput;\nfloat relativeVal = (val - minCutOff) / (maxCutOff - minCutOff);\nif (gamma > 1.0) {\ntempf -= pow(1.0 / outRange, relativeVal * gammaCorrection);\n}\nstretchedVal = (tempf * outRange * pow(relativeVal, 1.0 / gamma) + minOutput) / 255.0;\n} else {\nstretchedVal = minOutput + (val - minCutOff) * factor;\n}\nreturn stretchedVal;\n}\nvoid main() {\nvec2 pixelLocation = getPixelLocation(v_texcoord);\nif (isOutside(pixelLocation)) {\ngl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\nreturn;\n}\nvec4 currentPixel = getPixel(pixelLocation);\n#ifdef NOOP\ngl_FragColor = vec4(currentPixel.rgb, 1.0) * currentPixel.a * u_opacity;\nreturn;\n#endif\nif (u_bandCount == 1) {\nfloat grayVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\n#ifdef APPLY_COLORMAP\nvec4 result = colorize(vec4(grayVal, grayVal, grayVal, 1.0), u_useGamma ? 255.0 : 1.0);\ngl_FragColor = vec4(result.xyz, 1.0) * result.a * currentPixel.a * u_opacity;\n#else\ngl_FragColor = vec4(grayVal, grayVal, grayVal, 1.0) * currentPixel.a * u_opacity;\n#endif\n} else {\nfloat redVal = stretchOneValue(currentPixel.r, u_minCutOff[0], u_maxCutOff[0], u_minOutput, u_maxOutput, u_factor[0], u_useGamma, u_gamma[0], u_gammaCorrection[0]);\nfloat greenVal = stretchOneValue(currentPixel.g, u_minCutOff[1], u_maxCutOff[1], u_minOutput, u_maxOutput, u_factor[1], u_useGamma, u_gamma[1], u_gammaCorrection[1]);\nfloat blueVal = stretchOneValue(currentPixel.b, u_minCutOff[2], u_maxCutOff[2], u_minOutput, u_maxOutput, u_factor[2], u_useGamma, u_gamma[2], u_gammaCorrection[2]);\ngl_FragColor = vec4(redVal, greenVal, blueVal, 1.0) * currentPixel.a * u_opacity;\n}\n}"}},stencil:{"stencil.frag":"void main() {\ngl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}","stencil.vert":"attribute vec2 a_pos;\nuniform mat3 u_worldExtent;\nvoid main() {\ngl_Position = vec4(u_worldExtent * vec3(a_pos, 1.0), 1.0);\n}"},tileInfo:{"tileInfo.frag":"uniform mediump sampler2D u_texture;\nvarying mediump vec2 v_tex;\nvoid main(void) {\nlowp vec4 color = texture2D(u_texture, v_tex);\ngl_FragColor = 0.75 * color;\n}","tileInfo.vert":"attribute vec2 a_pos;\nuniform highp mat3 u_dvsMat3;\nuniform mediump float u_depth;\nuniform mediump vec2 u_coord_ratio;\nuniform mediump vec2 u_delta;\nuniform mediump vec2 u_dimensions;\nvarying mediump vec2 v_tex;\nvoid main() {\nmediump vec2 offset = u_coord_ratio * vec2(u_delta + a_pos * u_dimensions);\nvec3 v_pos = u_dvsMat3 * vec3(offset, 1.0);\ngl_Position = vec4(v_pos.xy, 0.0, 1.0);\nv_tex = a_pos;\n}"},util:{"atan2.glsl":"float atan2(in float y, in float x) {\nfloat t0, t1, t2, t3, t4;\nt3 = abs(x);\nt1 = abs(y);\nt0 = max(t3, t1);\nt1 = min(t3, t1);\nt3 = 1.0 / t0;\nt3 = t1 * t3;\nt4 = t3 * t3;\nt0 =         - 0.013480470;\nt0 = t0 * t4 + 0.057477314;\nt0 = t0 * t4 - 0.121239071;\nt0 = t0 * t4 + 0.195635925;\nt0 = t0 * t4 - 0.332994597;\nt0 = t0 * t4 + 0.999995630;\nt3 = t0 * t3;\nt3 = (abs(y) > abs(x)) ? 1.570796327 - t3 : t3;\nt3 = x < 0.0 ?  3.141592654 - t3 : t3;\nt3 = y < 0.0 ? -t3 : t3;\nreturn t3;\n}","encoding.glsl":"const vec4 rgba2float_factors = vec4(\n255.0 / (256.0),\n255.0 / (256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0),\n255.0 / (256.0 * 256.0 * 256.0 * 256.0)\n);\nfloat rgba2float(vec4 rgba) {\nreturn dot(rgba, rgba2float_factors);\n}"}};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/ShaderCompiler.js
var ShaderCompiler = __webpack_require__(29638);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(e){let o=shaderRepository_e;return e.split("/").forEach((r=>{o&&(o=o[r])})),o}const t=new ShaderCompiler/* ShaderCompiler */.Z(o);function n(r){return t.resolveIncludes(r)}


/***/ }),

/***/ 97066:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{static getStorageSpec(t){return null}static createOrUpdateRendererSchema(t,e){return null!=t&&"default"===t.type?t:{type:"default"}}static getVariation(t){return{}}static getVariationHash(t){return 0}}t.type="default",t.programSpec=null;


/***/ }),

/***/ 37555:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   w: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83253);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/* harmony import */ var _Technique_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(97066);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends _Technique_js__WEBPACK_IMPORTED_MODULE_2__/* .Technique */ .j{static getStorageSpec({attributes:e}){return{visualVariables:!1,attributes:e??null}}static _createRendererSchema(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}}static createOrUpdateRendererSchema(o,r){const{attributes:a,dotValue:n,referenceScale:i,dotSize:l,dotBlendingEnabled:d,seed:s,backgroundColor:c}=r,u=null!=o&&"dot-density"===o.type?o:this._createRendererSchema();u.dotValue=n,u.dotSize=l,u.dotScale=i,u.dotBlending=d,u.seed=s;const{colors:m,activeDots:g,backgroundColor:p}=u;for(let y=0;y<_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .dotDensityMaxFields */ .ju;y++){const t=y>=a.length?null:a[y].color;(0,_color_js__WEBPACK_IMPORTED_MODULE_0__/* .writeColor */ .tb)(m,t,4*y)}for(let e=0;e<8;e++)g[e]=e<r.attributes.length?1:0;return (0,_color_js__WEBPACK_IMPORTED_MODULE_0__/* .writeColor */ .tb)(p,c),u}static getVariation(e){return{ddDotBlending:e.dotBlending}}static getVariationHash(e){return e.dotBlending?1:0}}a.type="dot-density",a.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.SHORT},{location:1,name:"a_id",count:3,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__/* .DataType */ .pe.FLOAT}]}};


/***/ }),

/***/ 33605:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   x: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89882);
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(27927);
/* harmony import */ var _Technique_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(97066);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _Technique_js__WEBPACK_IMPORTED_MODULE_1__/* .Technique */ .j{static getStorageSpec({field:e,valueExpression:t}){return{visualVariables:!1,attributes:e||t?[{field:e,valueExpression:t}]:null}}static _createRendererSchema(){return{type:"heatmap",radius:-1,referenceScale:-1,isFieldActive:0,minDensity:-1,densityRange:-1,kernel:null,gradient:null,gradientHash:"invalid"}}static createOrUpdateRendererSchema(a,r){const{radius:i,minDensity:n,maxDensity:s,referenceScale:o,field:c,valueExpression:l,colorStops:m}=r,p=s-n,d=c||l?1:0,u=m.map((({color:e,ratio:t})=>`${t}:${e.toString()}`)).join();let h,y=!0;return null!=a&&"heatmap"===a.type?(h=a,y=u!==a.gradientHash):h=this._createRendererSchema(),h.radius=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .pt2px */ .Lz)(i),h.minDensity=n,h.densityRange=p,h.referenceScale=o,h.isFieldActive=d,y&&(h.gradient=(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .generateGradient */ .O3)(m),h.gradientHash=u),h}}i.type="heatmap",i.programSpec={shader:"materials/icon/heatmapAccumulate",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT},{location:1,name:"a_vertexOffset",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.SHORT},{location:4,name:"a_id",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .DataType */ .pe.UNSIGNED_BYTE}]}};


/***/ }),

/***/ 41575:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(96220);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(89882);
/* harmony import */ var _color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(83253);
/* harmony import */ var _definitions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(43556);
/* harmony import */ var _Technique_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97066);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _Technique_js__WEBPACK_IMPORTED_MODULE_3__/* .Technique */ .j{static getStorageSpec({attributes:e}){return{visualVariables:!0,attributes:e??null}}static _createRendererSchema(){return{type:"pie-chart",colors:new Float32Array(4*_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .chartMaxFields */ .ij),defaultColor:new Float32Array(4),othersColor:new Float32Array(4),outlineColor:new Float32Array(4),holePercentage:0,sectorThreshold:0,outlineWidth:1,numberOfFields:10}}static createOrUpdateRendererSchema(a,n){const{attributes:i,defaultColor:l,holePercentage:s,othersCategory:c,outline:u}=n,m=null!=a&&"pie-chart"===a.type?a:this._createRendererSchema();for(let t=0;t<_definitions_js__WEBPACK_IMPORTED_MODULE_2__/* .chartMaxFields */ .ij;t++){const r=t>=i.length?new _Color_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A([0,0,0,0]):i[t].color;(0,_color_js__WEBPACK_IMPORTED_MODULE_1__/* .writeColor */ .tb)(m.colors,r,4*t)}return (0,_color_js__WEBPACK_IMPORTED_MODULE_1__/* .writeColor */ .tb)(m.defaultColor,l),(0,_color_js__WEBPACK_IMPORTED_MODULE_1__/* .writeColor */ .tb)(m.othersColor,c?.color),(0,_color_js__WEBPACK_IMPORTED_MODULE_1__/* .writeColor */ .tb)(m.outlineColor,u?.color),m.outlineWidth=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .pt2px */ .Lz)(u?.width||0),m.holePercentage=s,m.sectorThreshold=c?.threshold||0,m.numberOfFields=i.length,m}static getVariation(e){return{numberOfFields:e.numberOfFields}}static getVariationHash(e){return e.numberOfFields}}i.type="pie-chart",i.programSpec={shader:"materials/pie",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT},{location:1,name:"a_vertexOffset",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.SHORT},{location:2,name:"a_texCoords",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT},{location:3,name:"a_bitSetAndDistRatio",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT},{location:4,name:"a_id",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE},{location:5,name:"a_color",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,normalized:!0},{location:6,name:"a_outlineColor",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE,normalized:!0},{location:7,name:"a_sizeAndOutlineWidth",count:4,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_BYTE},{location:8,name:"a_zoomRange",count:2,type:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.UNSIGNED_SHORT}]},hittestAttributes:["a_vertexOffset","a_texCoords"]};


/***/ }),

/***/ 97025:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   JW: () => (/* binding */ p),
/* harmony export */   R7: () => (/* binding */ s),
/* harmony export */   SS: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59601);
/* harmony import */ var _Technique_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(97066);
/* harmony import */ var _dotDensity_TechniqueDotDensity_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(37555);
/* harmony import */ var _heatmap_TechniqueHeatmap_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(33605);
/* harmony import */ var _pieChart_TechniquePieChart_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(41575);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(r,t){if(r.type!==t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("material-view-model:unexpected-renderer-schema",`expected to find renderer schema of type "${t}" but found type "${r.type}"`)}function c(e){switch(e?.type){case"dot-density":return _dotDensity_TechniqueDotDensity_js__WEBPACK_IMPORTED_MODULE_4__/* .DotDensityTechnique */ .w;case"heatmap":return _heatmap_TechniqueHeatmap_js__WEBPACK_IMPORTED_MODULE_5__/* .HeatmapTechnique */ .x;case"pie-chart":return _pieChart_TechniquePieChart_js__WEBPACK_IMPORTED_MODULE_6__/* .PieChartTechnique */ .h;default:return _Technique_js__WEBPACK_IMPORTED_MODULE_3__/* .Technique */ .j}}function p(e){const{geometryType:s,symbologyType:c}=_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .MaterialKeyBase */ .ar.load(e);switch(s){case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.FILL:if(c===_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLSymbologyType */ .w4.DOT_DENSITY)return _dotDensity_TechniqueDotDensity_js__WEBPACK_IMPORTED_MODULE_4__/* .DotDensityTechnique */ .w;break;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.MARKER:switch(c){case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLSymbologyType */ .w4.HEATMAP:return _heatmap_TechniqueHeatmap_js__WEBPACK_IMPORTED_MODULE_5__/* .HeatmapTechnique */ .x;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLSymbologyType */ .w4.PIE_CHART:return _pieChart_TechniquePieChart_js__WEBPACK_IMPORTED_MODULE_6__/* .PieChartTechnique */ .h}}return _Technique_js__WEBPACK_IMPORTED_MODULE_3__/* .Technique */ .j}


/***/ }),

/***/ 9725:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   P7: () => (/* binding */ o)
/* harmony export */ });
/* unused harmony exports DictionaryMatcher, FeatureMatcher, IntervalMatcher, MapMatcher, SubtypeMatcher */
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(89926);
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(28965);
/* harmony import */ var _arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(29986);
/* harmony import */ var _layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7965);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri/views/2d/engine/webgl/util/Matcher");async function o(e,t,s,r){switch(e.type){case"simple":case"heatmap":return u.fromBasicRenderer(e,t,s,r);case"map":return d.fromUVRenderer(e,t,s,r);case"interval":return m.fromCBRenderer(e,t,s,r);case"dictionary":return y.fromDictionaryRenderer(e,t,s,r);case"pie-chart":return c.fromPieChartRenderer(e,t,s,r);case"subtype":return c.fromSubtypes(e,t,s,r)}}class u{constructor(){this.type="feature",this._defaultResult=null}static async fromBasicRenderer(e,t,s,r){const i=new u;if(e.symbol){const a=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.symbol,s,r),l=t.createTemplateGroup(a,null);i.setDefault(l)}return i}static async fromPieChartRenderer(e,t,s,r){const i=new u;if(e.markerSymbol){const a=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.markerSymbol,s,r);let l;e.fillSymbol&&(l=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.fillSymbol,s,r));const o=t.createTemplateGroup(a,l);i.setDefault(o)}return i}size(){return 1}getDefault(){return this._defaultResult}setDefault(e){this._defaultResult=e}match(e,t,s,r,i){return this.getDefault()}async analyze(e,t,s,r,i,a){return null}}class c extends u{constructor(e,t){super(),this._subMatchers=e,this._subtypeField=t}static async fromSubtypes(e,t,s,r){const i=new Map,a=[];for(const n in e.renderers){const l=parseInt(n,10),u=o(e.renderers[n],t,s,r).then((e=>i.set(l,e)));a.push(u)}return await Promise.all(a),new c(i,e.subtypeField)}match(e,t,s,r,i){const a=t.readAttribute(this._subtypeField),n=this._subMatchers.get(a);return n?n.match(e,t,s,r,i):null}}class m extends u{constructor(e,t,s,r){super(),this.type="interval",this._intervals=[],this._isMaxInclusive=t,this._fieldIndex=r,this._field=e,this._normalizationInfo=s}static async fromCBRenderer(e,t,s,r){const{isMaxInclusive:i,normalizationField:a,normalizationTotal:l,normalizationType:o}=e,u=e.field,c=new m(u,i,{normalizationField:a,normalizationTotal:l,normalizationType:o},e.fieldIndex),d=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.backgroundFillSymbol,s,r);await Promise.all(e.intervals.map((async e=>{const i=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.symbol,s,r),a=t.createTemplateGroup(i,d),l={min:e.min,max:e.max};c.add(l,a)})));const h=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.defaultSymbol,s,r);if(h){const e=t.createTemplateGroup(h,d);c.setDefault(e)}return c}add(e,t){this._intervals.push({interval:e,result:t}),this._intervals.sort(((e,t)=>e.interval.min-t.interval.min))}size(){return super.size()+this._intervals.length}match(e,t,s,r,i){if(null==this._fieldIndex&&!this._field)return this.getDefault();const a=null!=this._fieldIndex?t.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(t);if(null==a||isNaN(a)||a===1/0||a===-1/0)return this.getDefault();for(let n=0;n<this._intervals.length;n++){const{interval:e,result:t}=this._intervals[n],s=a>=e.min,r=this._isMaxInclusive?a<=e.max:a<e.max;if(s&&r)return t}return this.getDefault()}_needsNormalization(){const e=this._normalizationInfo;return e&&(e.normalizationField||e.normalizationTotal||e.normalizationType)}_getValueFromField(e){const t=e.readAttribute(this._field);if(!this._needsNormalization()||null==t)return t;const{normalizationField:s,normalizationTotal:r,normalizationType:i}=this._normalizationInfo,a=e.readAttribute(s)??1;if(i)switch(i){case"esriNormalizeByField":return a?t/a:void 0;case"esriNormalizeByLog":return Math.log(t)*Math.LOG10E;case"esriNormalizeByPercentOfTotal":return t/r*100;default:return void l.error(`Found unknown normalization type: ${i}`)}else l.error("Normalization is required, but no type was set!")}}class d extends u{constructor(e,t,s){super(),this.type="map",this._nullResult=null,this._resultsMap=new Map,this._fields=[],this._fieldsIndex=s,this._fields=e,this._seperator=t||""}static async fromUVRenderer(e,t,s,r){const i=e.fieldDelimiter,a=[e.field];e.field2&&a.push(e.field2),e.field3&&a.push(e.field3);const l=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.backgroundFillSymbol,s,r),o=new d(a,i,e.fieldIndex);await Promise.all(e.map.map((async(e,i)=>{const a=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.symbol,s,r),u=i+1,c=t.createTemplateGroup(a,l,u);"<Null>"===e.value?o.setNullResult(c):o.add(e.value,c)})));const u=await (0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(e.defaultSymbol,s,r);if(u){const e=Number.MAX_SAFE_INTEGER,s=t.createTemplateGroup(u,l,e);o.setDefault(s)}return o}setNullResult(e){this._nullResult=e}add(e,t){this._resultsMap.set(e.toString(),t)}size(){return super.size()+this._resultsMap.size}match(e,t,s,r,i){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();const a=null!=this._fieldsIndex?t.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(t);if(null!==this._nullResult&&(null==a||""===a||"<Null>"===a))return this._nullResult;if(null==a)return this.getDefault();const n=a.toString();return this._resultsMap.has(n)?this._resultsMap.get(n):this.getDefault()}_getValueFromFields(e){const t=[];for(const s of this._fields){const r=e.readAttribute(s);null==r||""===r?t.push("<Null>"):t.push(r)}return t.join(this._seperator)}}async function h(e,t){const s=e||1;if("number"==typeof s)return(e,t,r)=>s;const r=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_4__/* .createRendererExpression */ .Ad)(s,t.spatialReference,t.fields);return(e,s,i)=>(0,_arcade_callExpressionWithFeature_js__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A)(r,e,{$view:i},t.geometryType,s)||1}let f;async function p(){return f||(f=__webpack_require__.e(/* import() */ 1879).then(__webpack_require__.bind(__webpack_require__, 51879))),f}class y extends u{constructor(e,t,s,i,a,n){super(),this.type="dictionary",this._groupIdCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__/* .LRUCache */ .q(100),this._loader=e,this._fieldMap=e.fieldMap,this._symbolFields=e.getSymbolFields(),this._templates=t,this._info=s,this._scaleFn=i,this._schemaUtilsModule=a,this._symbolOptions=n}static async fromDictionaryRenderer(e,t,s,r){const[{DictionaryLoader:i},a]=await Promise.all([__webpack_require__.e(/* import() */ 7081).then(__webpack_require__.bind(__webpack_require__, 57081)),p()]),n=new i(e.url,e.config,e.fieldMap);await n.fetchResources({spatialReference:s.spatialReference,fields:s.fields});const l=await h(e.scaleExpression,s);return new y(n,t,s,l,a,e.symbolOptions)}async _analyzeFeature(e,s,r,i,a){const o=e.readLegacyFeature(),u=this._scaleFn(o,r,i),c=this._attributeHash(o)+"-"+u,m=this._groupIdCache.get(c);if(m)return m;const d={...i,spatialReference:this._info.spatialReference,abortOptions:a,fields:this._info.fields},h=await this._loader.getSymbolAsync(o,d),f=this._schemaUtilsModule.createSymbolSchema(h,this._symbolOptions),p=(0,_layers_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_6__/* .expandSymbol */ .Z)(f,this._info,s,a).then((e=>{if("expanded-cim"!==e?.type)return l.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A("mapview-bad-type",`Found unexpected type ${e?.type} in dictionary response`)),null;e.hash+="-"+u;for(const t of e.layers)t.scaleFactor=u,t.templateHash+="-"+u;return this._templates.createTemplateGroup(e,null)}));return this._groupIdCache.put(c,p,1),p}async analyze(t,s,r,i,a,n){const l=s.getCursor(),o=[];for(;l.next();)o.push(this._analyzeFeature(l,r,i,a,n));return Promise.all(o).then((t=>t.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isSome */ .Ru)))}match(e,t,s,r,i){return null}_attributeHash(e){let t="";for(const s of this._symbolFields){const r=this._fieldMap?.[s];r&&(t+=e.attributes[r]+"-")}return t}}


/***/ }),

/***/ 11906:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ok: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,n){if(e&&"name"in e){const o=e;return n&&n.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A(o.name,o.message,o.details)),!1}return!0}


/***/ }),

/***/ 38604:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=1.25;class e{get length(){return this._pos}constructor(t,e){this._pos=0;const r=e?this._roundToNearest(e,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new t(this._array),this._ctor=t,this._i16View=new Int16Array(this._array)}_roundToNearest(t,e){const r=Math.round(t);return 1===e?r:r+(e-r%e)}_ensureSize(e){if(this._pos+e>=this._buffer.length){const r=this._roundToNearest((this._array.byteLength+e*this._buffer.BYTES_PER_ELEMENT)*t,this._buffer.BYTES_PER_ELEMENT),s=new ArrayBuffer(r),i=new this._ctor(s);i.set(this._buffer,0),this._array=s,this._buffer=i,this._i16View=new Int16Array(this._array)}}ensureSize(t){this._ensureSize(t)}writeF32(t){this._ensureSize(1);const e=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=t,this._pos++,e}push(t){this._ensureSize(1);const e=this._pos;return this._buffer[this._pos++]=t,e}writeFixed(t){this._buffer[this._pos++]=t}setValue(t,e){this._buffer[t]=e}i1616Add(t,e,r){this._i16View[2*t]+=e,this._i16View[2*t+1]+=r}getValue(t){return this._buffer[t]}incr(t){if(this._buffer.length<t)throw new Error("Increment index overflows the target buffer");this._buffer[t]++}decr(t){this._buffer[t]--}writeRegion(t){this._ensureSize(t.length);const e=this._pos;return this._buffer.set(t,this._pos),this._pos+=t.length,e}writeManyFrom(t,e,r){this._ensureSize(r-e);for(let s=e;s!==r;s++)this.writeFixed(t._buffer[s])}buffer(){const t=this._array.slice(0,4*this._pos);return this.destroy(),t}toArray(){return[...this._buffer]}seek(t){this._pos=t}destroy(){this._array=null,this._buffer=null}}


/***/ }),

/***/ 81884:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ l),
/* harmony export */   m: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(n,l)=>n&&((...n)=>l.warn("DEBUG:",...n))||(()=>null),l=!1;


/***/ }),

/***/ 46790:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   h: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79432);
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(38403);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(l){return (0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__/* .isNumber */ .Et)(l.minDataValue)&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__/* .isNumber */ .Et)(l.maxDataValue)&&null!=l.minSize&&null!=l.maxSize?_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_MINMAX_VALUE:(l.expression&&"view.scale"===l.expression||l.valueExpression&&"$view.scale"===l.valueExpression)&&Array.isArray(l.stops)?_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_SCALE_STOPS:(null!=l.field||l.expression&&"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&(Array.isArray(l.stops)||"levels"in l&&l.levels)?_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_FIELD_STOPS:(null!=l.field||l.expression&&"view.scale"!==l.expression||l.valueExpression&&"$view.scale"!==l.valueExpression)&&null!=l.valueUnit?_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_UNIT_VALUE:(_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.2d.engine.webgl").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-bad-type","Found invalid size VisualVariable",l)),_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.NONE)}


/***/ }),

/***/ 40231:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  e: () => (/* binding */ m)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Collection.js + 1 modules
var Collection = __webpack_require__(48982);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/collectionUtils.js
var collectionUtils = __webpack_require__(4194);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/scaleUtils.js
var scaleUtils = __webpack_require__(61781);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/Container.js
var Container = __webpack_require__(7715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/support/HighlightOptions.js
var HighlightOptions = __webpack_require__(14931);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/JSONSupport.js + 1 modules
var JSONSupport = __webpack_require__(21877);
;// ../node_modules/@arcgis/core/views/layers/support/ClipArea.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let t=class extends JSONSupport/* JSONSupport */.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],t.prototype,"version",null),t=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.ClipArea")],t);const p=t;

;// ../node_modules/@arcgis/core/views/layers/support/ClipRect.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var s;let i=s=class extends p{constructor(t){super(t),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new s({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],i.prototype,"left",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],i.prototype,"right",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],i.prototype,"top",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:[Number,String],json:{write:!0}})],i.prototype,"bottom",void 0),i=s=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.ClipRect")],i);const ClipRect_p=i;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry.js
var geometry = __webpack_require__(17639);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Geometry.js
var Geometry = __webpack_require__(88266);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Extent.js
var Extent = __webpack_require__(84698);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/Polygon.js
var Polygon = __webpack_require__(62802);
;// ../node_modules/@arcgis/core/views/layers/support/Geometry.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var y;const c={base:Geometry/* default */.A,key:"type",typeMap:{extent:Extent/* default */.A,polygon:Polygon/* default */.A}};let a=y=class extends p{constructor(r){super(r),this.type="geometry",this.geometry=null}clone(){return new y({geometry:this.geometry?.clone()??null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,tslib_es6._)([(0,property/* property */.MZ)({types:c,json:{read:jsonUtils/* fromJSON */.rS,write:!0}})],a.prototype,"geometry",void 0),a=y=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.Geometry")],a);const n=a;

;// ../node_modules/@arcgis/core/views/layers/support/Path.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let e=class extends p{constructor(r){super(r),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,tslib_es6._)([(0,property/* property */.MZ)({type:[[[Number]]],json:{write:!0}})],e.prototype,"path",void 0),e=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.layers.support.Path")],e);const Path_p=e;

;// ../node_modules/@arcgis/core/views/2d/layers/LayerView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f=Collection/* default */.A.ofType({key:"type",base:null,typeMap:{rect:ClipRect_p,path:Path_p,geometry:n}}),m=t=>{let d=class extends t{constructor(){super(...arguments),this.attached=!1,this.clips=new f,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){const e=this.view?.spatialReferenceLocked??!0,t=this.view?.spatialReference;t&&e&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new Error/* default */.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new Container/* Container */.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this.suspended),(e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer?.opacity??1),(e=>{this.container&&(this.container.opacity=e)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(e=>{this.container&&(this.container.blendMode=e)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(e=>{this.container&&(this.container.effect=e)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>this.highlightOptions),(e=>this.container.highlightOptions=e),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),reactiveUtils/* syncAndInitial */.pc),(0,reactiveUtils/* watch */.wB)((()=>({scale:this.view?.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null})),(({scale:e})=>{const t=null!=e&&this.isVisibleAtScale(e);t!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",t)}),reactiveUtils/* syncAndInitial */.pc)],"constructor"),this.view?.whenLayerView?this.view.whenLayerView(this.layer).then((e=>{e===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){const e=this.view?.spatialReference;return null==e||this.supportsSpatialReference(e)}get updating(){return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!!this._updatingHandles?.updating)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(e){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;const{minScale:s,maxScale:i}=t;return (0,scaleUtils/* isInScaleRange */.zx)(e,s,i)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}supportsSpatialReference(e){return!0}canResume(){return!!this.spatialReferenceSupported&&(!!super.canResume()&&this.visibleAtCurrentScale)}getSuspendInfo(){const e=super.getSuspendInfo(),t=!this.spatialReferenceSupported,s=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),s&&(e.outsideScaleRange=s),e}addAttachHandles(e){this.addHandles(e,"attach")}};return (0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"attached",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:f,set(e){const t=(0,collectionUtils/* referenceSetter */.V)(e,this._get("clips"),f);this._set("clips",t)}})],d.prototype,"clips",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"moving",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],d.prototype,"spatialReferenceSupported",null),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],d.prototype,"updateParameters",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],d.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({readOnly:!0})],d.prototype,"visibleAtCurrentScale",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({type:HighlightOptions/* default */.A})],d.prototype,"highlightOptions",void 0),d=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.LayerView2D")],d),d};


/***/ }),

/***/ 72695:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25707);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(85569);
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(48982);
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(20464);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(85251);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(539);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73446);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(39831);
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(98849);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63863);
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(40231);
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(13737);
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(80734);
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(9049);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d="sublayers",u="layerView";let f=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__/* .LayerView2DMixin */ .e)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A)){constructor(){super(...arguments),this._highlightIds=new Map}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}async hitTest(e,i){return Array.from(this.graphicsViews(),(i=>{const s=i.hitTest(e);if(null!=this._graphicsViewsFeatureCollectionMap){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate),i.sourceLayer=i.layer=this.layer}return s})).flat().map((i=>({type:"graphic",graphic:i,layer:this.layer,mapPoint:e})))}highlight(e){let h;"number"==typeof e?h=[e]:e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A?h=[e.uid]:Array.isArray(e)&&e.length>0?h="number"==typeof e[0]?e:e.map((e=>e&&e.uid)):_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.isCollection(e)&&(h=e.map((e=>e&&e.uid)).toArray());const a=h?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .isSome */ .Ru);return a?.length?(this._addHighlight(a),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .makeHandle */ .hA)((()=>this._removeHighlight(a)))):(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .makeHandle */ .hA)()}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(null!=s&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A(this.view.featuresTilingScheme),r=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .watch */ .wB)((()=>t.visible),(e=>r.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .initial */ .Vh),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .watch */ .wB)((()=>r.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .initial */ .Vh)],u)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.on)((()=>this.layer.sublayers),"change",(()=>this._createGraphicsViews()),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),d)}detach(){this._destroyGraphicsViews(),this.removeHandles(d)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(u);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const a=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A({view:i,graphics:t.graphics,requestUpdateCallback:s,container:r});this.addHandles([t.on("graphic-update",a.graphicUpdateHandler),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .watch */ .wB)((()=>t.visible),(e=>a.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .initial */ .Vh),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .watch */ .wB)((()=>a.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .initial */ .Vh)],u),this.container.addChild(a.container),e.push(a)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};f=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__/* .subclass */ .$)("esri.views.2d.layers.MapNotesLayerView2D")],f);const m=f;


/***/ }),

/***/ 51879:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSymbolSchema: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(48002);
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79432);
/* harmony import */ var _engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(59601);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function s(e){if("line-marker"===e.type){return{type:"line-marker",color:e.color?.toJSON(),placement:e.placement,style:e.style}}return e.constructor.fromJSON(e.toJSON()).toJSON()}function o(e){return (0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .hydrateMaterialKey */ .A1)(e)}function i(e,t,r=!1){if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return c(e,t,r);case"simple-marker":case"picture-marker":return h(e,t,r);case"simple-line":return y(e,t,r);case"text":return u(e,t,r);case"label":return m(e,t,r);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return{...s(e),type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize};default:throw new Error(`symbol not supported ${e.type}`)}}function m(e,r,l){const n=e.toJSON(),s=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.LABEL,{...r,placement:n.labelPlacement});return{materialKey:l?o(s):s,hash:e.hash(),...n,labelPlacement:n.labelPlacement}}function c(e,r,n){const i=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.FILL,r),m=n?o(i):i,c=e.clone(),y=c.outline,h=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .isOutlineFillSymbology */ .tq)(r.symbologyType);h||(c.outline=null);const u={materialKey:m,hash:c.hash(),...s(c)};if(h)return u;const p=[];if(p.push(u),y){const e=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.LINE,{...r,isOutline:!0}),l={materialKey:n?o(e):e,hash:y.hash(),...s(y)};p.push(l)}return{type:"composite-symbol",layers:p,hash:p.reduce(((e,t)=>t.hash+e),"")}}function y(e,n,i){const m=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .isOutlineFillSymbology */ .tq)(n.symbologyType)?_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLSymbologyType */ .w4.DEFAULT:n.symbologyType,c=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.LINE,{...n,symbologyType:m}),y=i?o(c):c,h=e.clone(),u=h.marker;h.marker=null;const p=[];if(p.push({materialKey:y,hash:h.hash(),...s(h)}),u){const e=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.MARKER,n),r=i?o(e):e;u.color=u.color??h.color,p.push({materialKey:r,hash:u.hash(),lineWidth:h.width,...s(u)})}return{type:"composite-symbol",layers:p,hash:p.reduce(((e,t)=>t.hash+e),"")}}function h(r,l,n){if("simple-marker"===r.type&&("path"===r.style||r.outline&&"solid"!==r.outline.style&&"none"!==r.outline.style)){return i({type:"CIMSymbolReference",symbol:_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_0__/* .CIMSymbolHelper */ .wp.fromSimpleMarker(r)},l,n)}const m=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.MARKER,l),c=n?o(m):m,y=s(r);return{materialKey:c,hash:r.hash(),...y,angle:r.angle,maxVVSize:l.maxVVSize}}function u(e,r,l){const n=(0,_engine_webgl_materialKey_MaterialKey_js__WEBPACK_IMPORTED_MODULE_2__/* .createMaterialKey */ .Zl)(_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .WGLGeometryType */ .ZG.TEXT,r),i=l?o(n):n,m=s(e);return{materialKey:i,hash:e.hash(),...m,angle:e.angle,maxVVSize:r.maxVVSize}}


/***/ }),

/***/ 93421:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  wu: () => (/* binding */ _),
  oY: () => (/* binding */ w),
  um: () => (/* binding */ T)
});

// UNUSED EXPORTS: addAggregateFields, createRendererAttributeSchema, createSymbolSchema

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/sql.js
var sql = __webpack_require__(76859);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/diffUtils.js
var diffUtils = __webpack_require__(64442);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/labelingInfo.js
var labelingInfo = __webpack_require__(79682);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js
var utils = __webpack_require__(97025);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/visualVariablesUtils.js
var visualVariablesUtils = __webpack_require__(46790);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/vvFlagUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function vvFlagUtils_e(e){if(!e)return enums/* WGLVVFlag */.rU.NONE;let r=0;for(const i of e)if("size"===i.type){const t=(0,visualVariablesUtils/* getTypeOfSizeVisualVariable */.h)(i);r|=t,"outline"===i.target&&(r|=t<<4)}else"color"===i.type?r|=enums/* WGLVVFlag */.rU.COLOR:"opacity"===i.type?r|=enums/* WGLVVFlag */.rU.OPACITY:"rotation"===i.type&&(r|=enums/* WGLVVFlag */.rU.ROTATION);return r}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/createSymbolSchema.js
var createSymbolSchema = __webpack_require__(51879);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/Rect.js
var Rect = __webpack_require__(76715);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js
var graphicsUtils = __webpack_require__(98502);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js + 1 modules
var cimSymbolUtils = __webpack_require__(7965);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/pixelBuffering.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},o=.707;function m(t,e){if(!("visualVariables"in t))return 0;if(!t.hasVisualVariables("size"))return 0;const r=t.getVisualVariablesForType("size");if(!r[0])return 0;const i=r[0];if(e&&"cluster_count"===i.field&&"cluster"===e.type)return e.clusterMaxSize;if("outline"===i.target)return 0;if("stops"===i.transformationType)return i.stops.map((t=>t.size)).reduce(g,0);if("clamped-linear"===i.transformationType){let t=-1/0,e=-1/0;return t="number"==typeof i.maxSize?i.maxSize:i.maxSize.stops.map((t=>t.size)).reduce(g,0),e="number"==typeof i.minSize?i.minSize:i.minSize.stops.map((t=>t.size)).reduce(g,0),Math.max(t,e)}return"real-world-size"===i.transformationType?30:void 0}function u(t){return t.type in a}async function c(e,r,i,n,s,a){if(!e||a&&"cluster"===a.type)return 0;if("heatmap"===e.type)return Math.round(t(e.radius));if("dot-density"===e.type)return 0;if("dictionary"===e.type)return"esriGeometryPoint"===r||"esriGeometryMultipoint"===r?100:200;const o=e.getSymbols(),u=m(e),c=[];for(const t of o)c.push(x(t,u,i,r,n,s));const l=await Promise.all(c);return t(l.reduce(g,0))}const l=(/* unused pure expression or super */ null && ([0,0,0,0]));function p(t,e){return t??e}function f(t,e){return null==t.outline?e:p(t.outline.width,e)}const y={sdf:!0,code:99,metrics:definitions/* averageGlyphMosaicItem */.LH.metrics,rect:new Rect/* default */.A(0,0,24,24),page:0,textureBinding:2};function h(t){const e=t.text&&t.text.length;if(!e)return{glyphMosaicItems:[y]};const r=[];for(let i=0;i<e;i++)r.push({...y,code:t.text.charCodeAt(i)});return{glyphMosaicItems:r}}async function d(t,r,i,a,m,u){if("simple-marker"===t.type){const e=Math.max(p(t.size,12),r);return M(t)+e*o}if("picture-marker"===t.type){const e=Math.max(p(t.height,12),r),i=p(t.width,12)*(e/p(t.height,12))/2,n=e/2;return M(t)+Math.sqrt(i*i+n*n)}if("text"===t.type){const e=h(t);n(l,t.toJSON(),e);const r=Math.abs(l[0]),i=Math.abs(l[1]),s=l[2],a=l[3];return Math.max(r,i)+Math.max(s,a)}if("simple-line"===t.type){const e=t,i=Math.max(p(e.width,.75),r)/2;return e.marker?Math.max(6*e.width,2*r):i}if("simple-fill"===t.type||"picture-fill"===t.type)return Math.max(f(t,0),r)/2;if("cim"===t.type){const n={geometryType:a,fields:m,spatialReference:u},o={type:"cim",rendererKey:0,data:t.data,maxVVSize:r};await s(o,n,i);const c=e.getEnvelope(t.data,null,i);return c?Math.sqrt(c.width*c.width+c.height*c.height):0}return"web-style"===t.type?d(await t.fetchCIMSymbol(),r,i,a,m,u):0}async function x(t,e,r,i,n,s){return u(t)?Math.min(await d(t,e,r,i,n,s),75):0}function M(t){const e=p(t.xoffset,0),r=p(t.yoffset,0);return Math.sqrt(e*e+r*r)}function g(t,e){return Math.max(t,e)}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js
var rendererUtils = __webpack_require__(63838);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/clusterUtils.js + 1 modules
var clusterUtils = __webpack_require__(85205);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/util.js
var util = __webpack_require__(44778);
;// ../node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const schemaUtils_x=Logger/* default */.A.getLogger("esri.views.2d.layers.features.schemaUtils"),schemaUtils_h="ValidationError";function v(e){return e}function T(e,t){let r=0,i=0,n=enums/* WGLSymbologyType */.w4.DEFAULT;if(null!=e){if(i=m(e,t),"visualVariables"in e&&(r=vvFlagUtils_e(e.visualVariables||[]),"dot-density"===e.type&&(n=enums/* WGLSymbologyType */.w4.DOT_DENSITY)),"heatmap"===e.type&&(n=enums/* WGLSymbologyType */.w4.HEATMAP),"dictionary"===e.type)return{maxVVSize:i,vvFlags:r,symbologyType:enums/* WGLSymbologyType */.w4.DEFAULT};if("pie-chart"===e.type)return{maxVVSize:i,vvFlags:r,symbologyType:enums/* WGLSymbologyType */.w4.PIE_CHART};if(n!==enums/* WGLSymbologyType */.w4.DOT_DENSITY&&n!==enums/* WGLSymbologyType */.w4.HEATMAP){const t=e.getSymbols();"backgroundFillSymbol"in e&&e.backgroundFillSymbol&&t.push(e.backgroundFillSymbol);let r=!0,i=!0;for(const e of t)if("cim"!==e.type&&"web-style"!==e.type||(i=!1),"simple-fill"===e.type||"picture-fill"===e.type){const t=e.outline,n=t&&"none"!==t.style&&"solid"!==t.style,s="simple-fill"===e.type&&"none"!==e.style&&"solid"!==e.style;n&&(r=!1),("picture-fill"===e.type||s||n)&&(i=!1)}r?n=i?enums/* WGLSymbologyType */.w4.OUTLINE_FILL_SIMPLE:enums/* WGLSymbologyType */.w4.OUTLINE_FILL:i&&(n=enums/* WGLSymbologyType */.w4.SIMPLE)}}return{vvFlags:r,maxVVSize:i,symbologyType:n}}let S=null;function w(e){if((0,has/* default */.A)("esri-2d-update-debug")){const t=E(e,!0);console.debug("Created new schema",t),console.debug("Schema diff",(0,diffUtils/* diff */.Ui)(S,t)),S=t}return E(e)}function E(e,t=!1){try{const r=R(e,t),i=D(e),s={};r.map((t=>F(s,e,t)));const l=null!=e.subtypeCode?`${e.subtypeField} = ${e.subtypeCode}`:null,o=(0,sql/* sqlAnd */.m)(e.definitionExpression,l);return{source:{definitionExpression:o,fields:e.fields.map((e=>e.toJSON())),gdbVersion:e.gdbVersion,historicMoment:e.historicMoment?.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:e.timeExtent?.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:r,tileRenderer:i,targets:s}}catch(r){if(r.fieldName===schemaUtils_h)return schemaUtils_x.error(r),null;throw r}}function F(e,r,i){switch(i.target){case"feature":return void O(e,V(r),i);case"aggregate":{if(!("featureReduction"in r))return;const n=r.featureReduction;switch(n?.type){case"selection":throw new Error/* default */.A(schemaUtils_h,"Mapview does not support `selection` reduction type",n);case"binning":return O(e,V(r),i),void N(e,n,r.fields.map((e=>e.toJSON())),i);case"cluster":return O(e,V(r),i),void L(e,n,r.fields.map((e=>e.toJSON())),i)}}}}function I(e,t){for(const r in t){const i=t[r];if(i.target!==e.name)continue;const n=e.attributes[r];if(n?.context){const e=n.context;e.mesh=e.mesh||i.context?.mesh,e.storage=e.storage||i.context?.storage}else e.attributes[r]=i}return e}function V(e){return[e.filter?.toJSON()??null,e.featureEffect?.filter?.toJSON()??null]}function O(e,t,r){return e.feature||(e.feature={name:"feature",input:"source",filters:t,attributes:{}}),I(e.feature,r.attributes.fields),e}function z(e,r){const{onStatisticExpression:i,onStatisticField:n,statisticType:s}=e;switch(s){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":{if(i){const{returnType:r}=i;return r?"string"===r?"esriFieldTypeString":"esriFieldTypeDouble":(schemaUtils_x.error(new Error/* default */.A(schemaUtils_h,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}const s=r.find((e=>e.name===n));return s?s.type:(schemaUtils_x.error(new Error/* default */.A(schemaUtils_h,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}}}function N(e,t,r,i){return e.aggregate||(e.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:t.fixedBinLevel,fields:(t.fields??[]).map((e=>({...e.toJSON(),type:z(e,r)})))},attributes:{}}),I(e.aggregate,i.attributes.fields),e}function L(e,t,r,n){const s=n.aggregateFields??[],l=new Set;for(const i of s)l.add(i.name);for(const i of t?.fields??[])l.has(i.name)||s.push(i);return e.aggregate||(e.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,screenUtils/* pt2px */.Lz)(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,screenUtils/* pt2px */.Lz)(t.clusterMaxSize)/64),fields:s.map((e=>({...e.toJSON(),type:z(e,r)})))}}),I(e.aggregate,n.attributes.fields),e}function schemaUtils_M(e,t){return t.field?j(e,{...t,type:"field",field:t.field}):t.valueExpression?j(e,{...t,type:"expression",valueExpression:t.valueExpression}):{field:void 0,fieldIndex:void 0}}function j(e,t){switch(t.type){case"expression":{const r=v(t.valueExpression);if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case"label-expression":{const r=v(JSON.stringify(t.label));if(!e.fields[r]){const i=e.indexCount++;e.fields[r]={...t,name:r,fieldIndex:i}}return{fieldIndex:e.fields[r].fieldIndex}}case"field":{const r=t.field;return"aggregate"===t.target&&e.fields[r]||(e.fields[r]={...t,name:r}),{field:r}}case"statistic":return e.fields[t.name]={...t},{field:t.name}}}function R(e,t=!1){const r=new Array;let i=0;return r.push(A(e,i++,t)),r}function U(e,t,r,i,n,s=!1){const l=j(e,{type:"label-expression",target:r,context:{mesh:!0},resultType:"string",label:{labelExpression:t.labelExpression,labelExpressionInfo:t.labelExpressionInfo?{expression:t.labelExpressionInfo.expression}:null,symbol:!!t.symbol,where:t.where}}),{fieldIndex:o}=l;return{...(0,createSymbolSchema.createSymbolSchema)(t,n,s),fieldIndex:o,target:r,index:i}}function B(e,r,i){const n="featureReduction"in r&&r.featureReduction;if(!n)return{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};const s="aggregate",o=[];let a=null,u=(0,util/* toJSONGeometryType */.eh)(r.geometryType),d=[],p=null;if(n)switch(n.type){case"selection":return schemaUtils_x.error(new Error/* default */.A(schemaUtils_h,"Mapview does not support `selection` reduction type",n)),{fields:[],labels:[],matcher:void 0,rendererOverride:void 0};case"cluster":case"binning":if(o.push(...n.fields??[]),"cluster"===n.type?u="esriGeometryPoint":"binning"===n.type&&(u="esriGeometryPolygon"),n.renderer&&!n.renderer.authoringInfo?.isAutoGenerated){if("cluster"===n.type){const{renderer:e}=(0,clusterUtils/* injectDynamicLevelDependentSizeVisualVariable */.tc)(n.renderer,n,null);p=e}else p=n.renderer;const t=T(n.renderer,n);a=_(e,s,n.renderer,t,i),d=n&&n.labelsVisible&&n.labelingInfo||[]}else if("cluster"===n.type){if(p=(0,clusterUtils/* createClusterRenderer */.ur)(o,r.renderer,n,null,!0),n.symbol){const e=T(p,n);a={type:"simple",symbol:(0,createSymbolSchema.createSymbolSchema)(n.symbol,e,i),symbologyType:e.symbologyType}}d=n&&n.labelsVisible&&n.labelingInfo||[]}}k(e,o);return{labels:(0,labelingInfo/* validateLabelingInfo */.z)(d,"binning"===n.type?"esriGeometryPolygon":u),matcher:a,fields:o,rendererOverride:p}}function A(e,r,i=!1){const n={indexCount:0,fields:{}},s="featureReduction"in e?e.featureReduction??void 0:void 0,a=s?"aggregate":"feature";if("sublayers"in e){const r={type:"subtype",subtypeField:e.subtypeField,renderers:{},symbologyType:enums/* WGLSymbologyType */.w4.DEFAULT},s={type:"subtype",mapping:{},target:"feature",subtypeField:e.subtypeField},l={type:"subtype",classes:{}},u={type:"symbol",target:"feature",aggregateFields:[],attributes:n,storage:s,mesh:{matcher:r,aggregateMatcher:null,labels:l,sortKey:null}},f=new Set;let p=0;for(const{renderer:c,subtypeCode:y,labelingInfo:m,labelsVisible:g}of e.sublayers){let e=0;"visualVariables"in c&&c.visualVariables&&(c.visualVariables.some((e=>"rotation"!==e.type))&&schemaUtils_x.warnOnce("SubtypeGroupLayer currently only supports rotation visualVariables. All other visualVariable types will be ignored."),e=vvFlagUtils_e(c.visualVariables.filter((e=>"size"!==e.type))));const u={symbologyType:enums/* WGLSymbologyType */.w4.DEFAULT,vvFlags:e,maxVVSize:0},b=_(n,a,c,u,i),v=C(n,a,c),T=g&&m;if("dictionary"===b.type)throw new Error/* default */.A(schemaUtils_h,"Dictionary renderer is not supported in subtype layers");if("subtype"===b.type)throw new Error/* default */.A(schemaUtils_h,"Nested subtype renderers is not supported");if(null!=v&&"subtype"===v.type)throw new Error/* default */.A(schemaUtils_h,"Nested subtype storage is not supported");if(null!=v?.attributeMapping)throw new Error/* default */.A(schemaUtils_h,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===b.type)throw new Error/* default */.A(schemaUtils_h,"Heatmaps are not supported in subtype layers");if("pie-chart"===b.type)throw new Error/* default */.A(schemaUtils_h,"Pie-charts are not supported in subtype layers");if(f.has(y))throw new Error/* default */.A(schemaUtils_h,"Subtype codes for sublayers must be unique");f.add(y),r.renderers[y]=b,s.mapping[y]=v,T&&(l.classes[y]=T.map((e=>U(n,e,"feature",p++,u,i))))}return u}if("heatmap"===e.renderer?.type&&"raster"===(0,rendererUtils/* getSupportedHeatmapRenderer */.gg)()){const{radius:t,fieldOffset:r,field:i}=e.renderer;return{type:"heatmap",aggregateFields:[],attributes:n,target:a,storage:null,mesh:{radius:t,fieldOffset:r,field:schemaUtils_M(n,{target:a,field:i,resultType:"numeric"}).field}}}const u=B(n,e,i),f=(0,util/* toJSONGeometryType */.eh)(e.geometryType),p=u.rendererOverride??e.renderer,y=T(p,s),m=_(n,a,p,y,i),g=C(n,a,p),v=P(n,e.orderBy,e.renderer,s),S=e.labelsVisible&&e.labelingInfo||[],w=(0,labelingInfo/* validateLabelingInfo */.z)(S,f);let E=0;const F=[...w.map((e=>U(n,e,"feature",E++,y,i))),...u.labels.map((e=>U(n,e,"aggregate",E++,y,i)))];return{type:"symbol",target:a,attributes:n,aggregateFields:u.fields,storage:g,mesh:{matcher:m,labels:{type:"simple",classes:F},aggregateMatcher:u.matcher,sortKey:v}}}function D(e){return"heatmap"===e.renderer?.type&&"raster"===(0,rendererUtils/* getSupportedHeatmapRenderer */.gg)()?{type:"heatmap"}:{type:"symbol"}}function P(e,r,i,n){if(null!=n)return null;if(null!=r&&r.length){r.length>1&&schemaUtils_x.warn(`Layer rendering currently only supports ordering by 1 orderByInfo, but found ${r.length}. All but the first will be discarded`);const i=r[0],n="ascending"===i.order?"asc":"desc";if(i.field)return{field:i.field,order:n};if(i.valueExpression){return{fieldIndex:j(e,{type:"expression",target:"feature",valueExpression:i.valueExpression,resultType:"numeric"}).fieldIndex,order:n}}return schemaUtils_x.error(new Error/* default */.A(schemaUtils_h,"Expected to find a field or valueExpression for OrderByInfo",i)),null}if(null!=i&&"unique-value"===i.type&&i.orderByClassesEnabled){return{byRenderer:!0,order:"asc"}}return null}function k(e,t){const r={mesh:!0,storage:!0};for(const i of t){const{name:t,onStatisticField:n,onStatisticExpression:s,statisticType:l}=i;let o,a;const u="numeric",d="feature";if(s){a=j(e,{type:"expression",target:d,valueExpression:s.expression,resultType:u}).fieldIndex}else{o=j(e,{type:"field",target:d,field:n}).field}j(e,{type:"statistic",target:"aggregate",name:t,context:r,inField:o,inFieldIndex:a,statisticType:l})}}function C(e,t,r){let i;switch(r.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":i={visualVariables:!0,attributes:null};break;default:i=(0,utils/* getTechniqueFromRenderer */.SS)(r).getStorageSpec(r)}return J(e,t,i,r)}function J(e,t,r,i){if(null==r)return null;const{visualVariables:n,attributes:s}=r;let l=null;n&&"visualVariables"in i&&(l=q(e,t,i.visualVariables));const o=null!=l?4:0;let a=null;return null!=s&&(a=s.map(((r,i)=>{const{field:n,fieldIndex:s}=schemaUtils_M(e,{valueExpression:r.valueExpression,field:r.field,resultType:"numeric",target:t});return{binding:i+o,field:n,fieldIndex:s}}))),{type:"simple",target:t,attributeMapping:a,vvMapping:l}}function q(t,r,i){if(!i?.length)return[];const n={storage:!0},s="numeric";return (0,rendererUtils/* simplifyVisualVariables */.R9)(i).map((e=>{const i=(0,Utils/* getVVType */.Bh)(e.type),{field:l,fieldIndex:o}=schemaUtils_M(t,{target:r,valueExpression:e.valueExpression,field:e.field,context:n,resultType:s});switch(e.type){case"size":return"$view.scale"===e.valueExpression?null:{type:"size",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field,valueRepresentation:e.valueRepresentation??null};case"color":return{type:"color",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field};case"opacity":return{type:"opacity",binding:i,field:l,fieldIndex:o,normalizationField:schemaUtils_M(t,{target:r,field:e.normalizationField,context:n,resultType:s}).field};case"rotation":return{type:"rotation",binding:i,field:l,fieldIndex:o}}})).filter(arrayUtils/* isSome */.Ru)}function _(e,t,r,i,n=!1){const s=e??{indexCount:0,fields:{}};switch(r.type){case"simple":case"dot-density":return G(s,r,i,n);case"class-breaks":return $(s,t,r,i,n);case"unique-value":return K(s,t,r,i,n);case"dictionary":return Y(s,r,i,n);case"heatmap":return Q(s,r,i,n);case"pie-chart":return H(s,r,i,n)}}function G(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:"simple",symbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),symbologyType:r.symbologyType}}function H(e,t,r,i=!1){const n=t.getSymbols(),s=n[0],l=n.length>1?n[1]:null;return{type:"pie-chart",markerSymbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),fillSymbol:(0,createSymbolSchema.createSymbolSchema)(l,r,i),symbologyType:r.symbologyType}}function $(e,t,r,i,n=!1){const s={mesh:!0,use:"renderer.field"},l=r.backgroundFillSymbol,{field:o,fieldIndex:a}=schemaUtils_M(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:"numeric",context:s}),u=r.normalizationType,d="log"===u?"esriNormalizeByLog":"percent-of-total"===u?"esriNormalizeByPercentOfTotal":"field"===u?"esriNormalizeByField":null,p=r.classBreakInfos.map((e=>({symbol:(0,createSymbolSchema.createSymbolSchema)(e.symbol,i,n),min:e.minValue,max:e.maxValue}))).sort(((e,t)=>e.min-t.min));return{type:"interval",attributes:e.fields,field:o,fieldIndex:a,backgroundFillSymbol:(0,createSymbolSchema.createSymbolSchema)(l,i,n),defaultSymbol:(0,createSymbolSchema.createSymbolSchema)(r.defaultSymbol,i,n),intervals:p,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:d,isMaxInclusive:r.isMaxInclusive,symbologyType:i.symbologyType}}function K(e,r,i,n,s=!1){const l=[],o=i.backgroundFillSymbol,a={target:r,context:{mesh:!0},resultType:"string"};if(i.field&&"string"!=typeof i.field)throw new Error/* default */.A(schemaUtils_h,"Expected renderer.field to be a string",i);const{field:u,fieldIndex:d}=schemaUtils_M(e,{...a,field:i.field,valueExpression:i.valueExpression});for(const t of i.uniqueValueInfos??[])l.push({value:""+t.value,symbol:(0,createSymbolSchema.createSymbolSchema)(t.symbol,n,s)});return{type:"map",attributes:e.fields,field:u,fieldIndex:d,field2:schemaUtils_M(e,{...a,field:i.field2}).field,field3:schemaUtils_M(e,{...a,field:i.field3}).field,fieldDelimiter:i.fieldDelimiter??void 0,backgroundFillSymbol:(0,createSymbolSchema.createSymbolSchema)(o,n),defaultSymbol:(0,createSymbolSchema.createSymbolSchema)(i.defaultSymbol,n),map:l,symbologyType:n.symbologyType}}function Y(e,t,r,i=!1){return{type:"dictionary",config:t.config,fieldMap:t.fieldMap,scaleExpression:t.scaleExpression,url:t.url,symbolOptions:r,symbologyType:r.symbologyType}}function Q(e,t,r,i=!1){const n=t.getSymbols(),s=n.length?n[0]:null;return{type:"heatmap",symbol:(0,createSymbolSchema.createSymbolSchema)(s,r,i),symbologyType:r.symbologyType}}


/***/ }),

/***/ 66753:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(92504);
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40189);
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(64442);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4238);
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(79005);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(43556);
/* harmony import */ var _engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(65065);
/* harmony import */ var _engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(38403);
/* harmony import */ var _engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(81884);
/* harmony import */ var _tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(79783);
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const U=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.layers.2d.features.support.AttributeStore"),A=(0,_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_12__/* .createDebugLogger */ .m)(_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_12__/* .debugAttrUpdates */ .N,U),E={sharedArrayBuffer:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-shared-array-buffer"),atomics:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-atomics")};function w(t,e){return i=>e(t(i))}class D{constructor(t,e,i,s){this.size=0,this.texelSize=4,this.dirtyStart=0,this.dirtyEnd=0;const{pixelType:r,layout:a,textureOnly:n}=s;this.textureOnly=n||!1,this.pixelType=r,this._ctype=e,this.layout=a,this._resetRange(),this._shared=t,this.size=i,n||(this.data=this._initData(r,i,t,e))}get buffer(){return this.data?.buffer}unsetComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=this.data;for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){this.data[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){this.data[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t);return this.data[i*this.texelSize+e]}setData(t,e,i){const s=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t),r=1<<e;0!=(this.layout&r)?null!=this.data&&(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):U.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}lock(){this.pixelType===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE&&this._shared&&E.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)}unlock(){this.pixelType===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE&&this._shared&&E.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t,this._shared,this._ctype),i=this.data;e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!(this._shared||"local"===this._ctype),r=this.pixelType,a=this.layout,n=this.data;return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e,i,s){const r=i&&"local"!==s?SharedArrayBuffer:ArrayBuffer,a=(0,_engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_9__/* .getPixelArrayCtor */ .Qz)(t),n=new a(new r(e*e*4*a.BYTES_PER_ELEMENT));for(let o=0;o<n.length;o+=4)n[o+1]=255;return n}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}class k{constructor(t,e){this._client=t,this.config=e,this.updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_6__/* .UpdatingHandles */ .U,this._blocks=new Array,this._filters=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .maxFilters */ .KM),this._attributeComputeInfo=null,this._targetType=0,this._abortController=new AbortController,this._hasScaleExpr=!1,this._size=32,this._nextUpdate=null,this._currUpdate=null,this._idsToHighlight=new Set;const i=e.supportsTextureFloat?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.FLOAT:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE;A(`Creating AttributeStore ${E.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE,layout:1},{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_11__/* .PixelType */ .ld.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}destroy(){this._abortController.abort(),this.updatingHandles.destroy()}get hasScaleExpr(){return this._hasScaleExpr}get _signal(){return this._abortController.signal}get hasHighlight(){return this._idsToHighlight.size>0}isUpdating(){const t=this.updatingHandles.updating||!!this._nextUpdate;return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-log-updating")&&console.log(`Updating AttributeStore: ${t}\n  -> updatingHandles ${this.updatingHandles.updating} (currUpdate: ${!!this._currUpdate})\n  -> nextUpdate: ${!!this._nextUpdate}\n`),t}update(t,e){this.config=e;const i=e.schema.processors[0].storage,s=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_5__/* .diff */ .Ui)(this._schema,i);if((t.targets.feature||t.targets.aggregate)&&(t.storage.data=!0),s&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",s),t.storage.data=!0,this._schema=i,this._attributeComputeInfo=null,null!=i)){switch(i.target){case"feature":this._targetType=_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .displayIdTypeFeature */ .Gl;break;case"aggregate":this._targetType=_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .displayIdTypeAggregate */ .ry}if("subtype"===i.type){this._attributeComputeInfo={isSubtype:!0,subtypeField:i.subtypeField,map:new Map};for(const t in i.mapping){const e=i.mapping[t];if(null!=e?.vvMapping)for(const i of e.vvMapping)this._bindAttribute(i,parseInt(t,10))}}else{if(this._attributeComputeInfo={isSubtype:!1,map:new Map},null!=i.vvMapping)for(const t of i.vvMapping)this._bindAttribute(t);if(null!=i.attributeMapping)for(const t of i.attributeMapping)this._bindAttribute(t)}}}onTileData(t,e){if(null==e.addOrUpdate)return;const i=e.addOrUpdate.getCursor();for(;i.next();){const t=i.getDisplayId();this.setAttributeData(t,i)}}async setHighlight(t,e){const i=1,s=this._getBlock(0),r=e.map((t=>(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t)));s.lock(),s.unsetComponentAllTexels(0,i),s.setComponent(0,i,r),s.unlock(),this._idsToHighlight.clear();for(const a of t)this._idsToHighlight.add(a);await this.sendUpdates()}async updateFilters(t,e,i){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters");const{service:s,spatialReference:r}=i,{filters:a}=e,n=a.map(((t,e)=>this._updateFilter(t,e,s,r))),o=(await Promise.all(n)).some((t=>t));(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters - finsihed"),o&&(t.storage.filters=!0,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))}setData(t,e,i,s){const r=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlag(t){return this._idsToHighlight.has(t)?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .highlightFlag */ .X3:0}unsetAttributeData(t){const e=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e){const s=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdTexel */ .Q4)(t);if(this._ensureSizeForTexel(s),this._getBlock(0).setData(s,0,this.getFilterFlags(e)),this._targetType!==(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdType */ .qP)(t))return;const r=this._attributeComputeInfo,a=this.config.supportsTextureFloat?1:2,n=4;let o=null;r&&(o=r.isSubtype?r.map.get(e.readAttribute(r.subtypeField)):r.map,o?.size&&o.forEach(((t,r)=>{const o=r*a%n,l=Math.floor(r*a/n),h=this._getBlock(l+_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .attributeDataVv */ .dx),p=t(e);if(this.config.supportsTextureFloat)h.setData(s,o,p);else if(p===_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .nanMagicNumber */ .qM)h.setData(s,o,255),h.setData(s,o+1,255);else{const t=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .clamp */ .qE)(Math.round(p),-32767,32766)+32768,e=255&t,r=(65280&t)>>8;h.setData(s,o,e),h.setData(s,o+1,r)}})))}sendUpdates(){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate"),this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .createResolver */ .Tw)(),this.updatingHandles.addPromise(this._nextUpdate.promise),this._nextUpdate.promise;const e={blocks:this._blocks.map((t=>null!=t?t.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const t=()=>{if(this._currUpdate=null,this._nextUpdate){const t=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>t.resolve()))}else (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::No additional updates queued")};(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::client.update");const i=this.updatingHandles.addPromise(this._client.update(e,this._signal).then(t).catch(t));return this._client.render(this._signal),i})).catch((e=>{if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isAbortError */ .zf)(e))return this._createResourcesPromise=null,this._createResources();U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-attribute-store","Encountered an error during client update",e))})),this._currUpdate}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}_bindAttribute(t,e){function i(){const{normalizationField:e}=t;return e?i=>{const s=i.readAttribute(e);if(!s)return null;return i.readAttribute(t.field)/s}:e=>e.readAttribute(t.field)}function s(){return t.normalizationField&&U.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),e=>e.getComputedNumericAtIndex(t.fieldIndex)}let r;if(null!=t.fieldIndex)r=s();else{if(!t.field)return;r=i()}const{valueRepresentation:a}=t;if(a){r=w(r,(t=>(0,_tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_10__/* .getVisualVariableSizeValueRepresentationRatio */ .lS)(t,a)))}const n=t=>null===t||isNaN(t)||t===1/0||t===-1/0?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .nanMagicNumber */ .qM:t,o=this._attributeComputeInfo;if(o.isSubtype){const i=o.map.get(e)??new Map;i.set(t.binding,w(r,n)),o.map.set(e,i)}else o.map.set(t.binding,w(r,n))}_createResources(){if(null!=this._createResourcesPromise)return this._createResourcesPromise;this._getBlock(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .attributeDataAnimation */ .Nb),this._getBlock(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__/* .attributeDataGpgpu */ .O7),A("Initializing AttributeStore");const e={shared:E.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:this._blocks.map((t=>null!=t?{textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType}:null))},i=this._client.initialize(e,this._signal).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .isAbortError */ .zf)(e)?this._createResourcesPromise=null:U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-attribute-store","Encountered an error during client initialization",e))}));return this._createResourcesPromise=i,i.then((()=>null==this._createResourcesPromise?this._createResources():void 0)),i}_getBlock(t){const e=this._blocks[t];if(null!=e)return e;A(`Initializing AttributeBlock at index ${t}`);const i=E.sharedArrayBuffer,s=this._client.type,r=new D(i,s,this._size,this._blockDescriptors[t]);return this._blocks[t]=r,this._createResourcesPromise=null,r}_expand(){if(this._size<this.config.maxTextureSize){const t=this._size<<=1;A("Expanding block size to",t,this._blocks);for(const e of this._blocks)e?.expand(t);return this._createResourcesPromise=null,this._size=t,0}return U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}async _updateFilter(t,e,i,s){const r=this._filters[e],a=null!=r&&r.hash;if(!r&&!t)return!1;if(a===JSON.stringify(t))return!1;if(null==t){if(!r)return!1;const t=1<<e+1,i=this._getBlock(0);return this._filters[e]=null,i.setComponentAllTexels(0,t),this.sendUpdates(),!0}const n=await this._getFilter(e,i);return await n.update(t,s),!0}async _getFilter(t,e){const i=this._filters[t];if(null!=i)return i;const{default:s}=await __webpack_require__.e(/* import() */ 2213).then(__webpack_require__.bind(__webpack_require__, 92213)),r=new s({geometryType:e.geometryType,hasM:!1,hasZ:!1,timeInfo:e.timeInfo,fieldsIndex:_layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.fromJSON(e.fieldsIndex)});return this._filters[t]=r,r}isVisible(t){return!!(2&this._getBlock(0).getData(t,0))}getFilterFlags(t){let e=0;const i=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_13__/* .getDisplayIdFilterMask */ .KG)(t.getDisplayId());for(let r=0;r<this._filters.length;r++){const s=!!(i&1<<r),a=this._filters[r];e|=(!s||null==a||a.check(t)?1:0)<<r}let s=0;if(this._idsToHighlight.size){const e=t.getObjectId();s=this.getHighlightFlag(e)}return e<<1|s}}


/***/ }),

/***/ 16816:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  l: () => (/* binding */ r)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js
var DisplayId = __webpack_require__(65065);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/DisplayIdGenerator.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class DisplayIdGenerator_r{constructor(){this._freeIds=[],this._idCounter=1}createId(r=!1){return (0,DisplayId/* createDisplayId */.Ss)(this._getFreeId(),r)}releaseId(e){this._freeIds.push(e)}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js
var StaticBitSet = __webpack_require__(43871);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t,e,s){if(!(t.length>e))for(;t.length<=e;)t.push(s)}class r{constructor(){this._numerics=[],this._strings=[],this._idGenerator=new DisplayIdGenerator_r,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}createBitset(){const e=this._bitsets.length;return this._bitsets.push(StaticBitSet/* StaticBitSet */.y.create(this._allocatedSize,DisplayId/* displayIdTexelMask */.KQ)),e+1}getBitset(t){return this._bitsets[t-1]}_expand(){this._allocatedSize<<=1;for(const t of this._bitsets)t.resize(this._allocatedSize)}_ensureNumeric(t,e){this._numerics[t]||(this._numerics[t]=[]);n(this._numerics[t],e,0)}_ensureInstanceId(t){n(this._instanceIds,t,0)}_ensureString(t,e){this._strings[t]||(this._strings[t]=[]);n(this._strings[t],e,null)}createDisplayId(t=!1){const s=this._idGenerator.createId();return s>this._allocatedSize&&this._expand(),(0,DisplayId/* createDisplayId */.Ss)(s,t)}releaseDisplayId(e){for(const t of this._bitsets)t.unset(e);return this._idGenerator.releaseId(e&DisplayId/* displayIdTexelMask */.KQ)}getComputedNumeric(e,s){return this.getComputedNumericAtIndex(e&DisplayId/* displayIdTexelMask */.KQ,0)}setComputedNumeric(e,s,i){return this.setComputedNumericAtIndex(e&DisplayId/* displayIdTexelMask */.KQ,i,0)}getComputedString(e,s){return this.getComputedStringAtIndex(e&DisplayId/* displayIdTexelMask */.KQ,0)}setComputedString(e,s,i){return this.setComputedStringAtIndex(e&DisplayId/* displayIdTexelMask */.KQ,0,i)}getComputedNumericAtIndex(e,s){const i=e&DisplayId/* displayIdTexelMask */.KQ;return this._ensureNumeric(s,i),this._numerics[s][i]}setComputedNumericAtIndex(e,s,i){const n=e&DisplayId/* displayIdTexelMask */.KQ;this._ensureNumeric(s,n),this._numerics[s][n]=i}getInstanceId(e){const s=e&DisplayId/* displayIdTexelMask */.KQ;return this._ensureInstanceId(s),this._instanceIds[s]}setInstanceId(e,s){const i=e&DisplayId/* displayIdTexelMask */.KQ;this._ensureInstanceId(i),this._instanceIds[i]=s}getComputedStringAtIndex(e,s){const i=e&DisplayId/* displayIdTexelMask */.KQ;return this._ensureString(s,i),this._strings[s][i]}setComputedStringAtIndex(e,s,i){const n=e&DisplayId/* displayIdTexelMask */.KQ;this._ensureString(s,n),this._strings[s][n]=i}getXMin(e){return this._bounds[4*(e&DisplayId/* displayIdTexelMask */.KQ)]}getYMin(e){return this._bounds[4*(e&DisplayId/* displayIdTexelMask */.KQ)+1]}getXMax(e){return this._bounds[4*(e&DisplayId/* displayIdTexelMask */.KQ)+2]}getYMax(e){return this._bounds[4*(e&DisplayId/* displayIdTexelMask */.KQ)+3]}setBounds(e,s){const i=s.readHydratedGeometry();if(!i?.coords.length)return!1;let r=1/0,u=1/0,o=-1/0,h=-1/0;i.forEachVertex(((t,e)=>{r=Math.min(r,t),u=Math.min(u,e),o=Math.max(o,t),h=Math.max(h,e)}));const d=e&DisplayId/* displayIdTexelMask */.KQ;return n(this._bounds,4*d+4,0),this._bounds[4*d]=r,this._bounds[4*d+1]=u,this._bounds[4*d+2]=o,this._bounds[4*d+3]=h,!0}}


/***/ }),

/***/ 42549:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Y: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(17639);
/* harmony import */ var _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(98918);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(39831);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(6267);
/* harmony import */ var _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(45132);
/* harmony import */ var _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(40845);
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(14816);
/* harmony import */ var _geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(73138);
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(21355);
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(88443);
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(12129);
/* harmony import */ var _StaticBitSet_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(43871);
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1171);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=0;const h=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("featurelayer-simplify-thresholds")??[.5,.5,.5,.5],y=h[0],f=h[1],p=h[2],g=h[3],_=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("featurelayer-simplify-payload-size-factors")??[1,2,4],x=_[0],A=_[1],T=_[2],I=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("featurelayer-simplify-mobile-factor")??2,b=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A)("esri-mobile");class S{constructor(e,t){this.type="FeatureSetReader",this.arcadeDeclaredClass="esri.arcade.Feature",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._sx=1,this._sy=1,this._deleted=null,this._joined=[],this._objectIdToIndex=null,this._contextTimeZone=null,this._level=0,this.instance=e,this._layerSchema=t}static createInstance(){return c++,c=c>65535?0:c,c}get isEmpty(){return null!=this._deleted&&this._deleted.countSet()===this.getSize()}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}set level(e){this._level=e}getAreaSimplificationThreshold(e,t){let r=1;const s=b?I:1;t>4e6?r=T*s:t>1e6?r=A*s:t>5e5?r=x*s:t>1e5&&(r=s);let i=0;e>4e3?i=g*r:e>2e3?i=p*r:e>100?i=f:e>15&&(i=y);let n=8;return this._level<4?n=1:this._level<5?n=2:this._level<6&&(n=4),i*n}createQuantizedExtrudedGeometry(e,t){return"esriGeometryPolyline"===this.geometryType?this._createQuantizedExtrudedLine(e,t):this._createQuantizedExtrudedQuad(e,t)}_createQuantizedExtrudedQuad(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A([5],[e-1,t,1,-1,1,1,-1,1,-1,-1])}_createQuantizedExtrudedLine(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A([2],[e-1,t+1,1,-1])}parseTimestampOffset(e){return e}setArcadeSpatialReference(e){this._arcadeSpatialReference=e}attachStorage(e){this._storage=e}getQuantizationTransform(){throw new Error("Unable to find transform for featureSet")}getStorage(){return this._storage}getComputedNumeric(e){return this.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this.setComputedNumericAtIndex(t,0)}getComputedString(e){return this.getComputedStringAtIndex(0)}setComputedString(e,t){return this.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),e)}setComputedNumericAtIndex(e,t){this._storage.setComputedNumericAtIndex(this.getDisplayId(),e,t)}getComputedStringAtIndex(e){return this._storage.getComputedStringAtIndex(this.getDisplayId(),e)}setComputedStringAtIndex(e,t){return this._storage.setComputedStringAtIndex(this.getDisplayId(),e,t)}transform(e,t,r,s){const i=this.copy();return i._tx+=e,i._ty+=t,i._sx*=r,i._sy*=s,i}readAttributeAsTimestamp(e){const t=this.readAttribute(e);return"string"==typeof t?new Date(t).getTime():"number"==typeof t||null==t?t:null}readAttribute(e,t=!1){const r=this._readAttribute(e,t);if(void 0!==r)return r;for(const s of this._joined){s.setIndex(this.getIndex());const r=s._readAttribute(e,t);if(void 0!==r)return r}}readAttributes(){const e=this._readAttributes();for(const t of this._joined){t.setIndex(this.getIndex());const r=t._readAttributes();for(const t of Object.keys(r))e[t]=r[t]}return e}joinAttributes(e){this._joined.push(e)}readArcadeFeature(){return this}hasField(e){return this.fields.has(e)}geometry(){const e=this.readHydratedGeometry(),t=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_7__/* .convertToGeometry */ .zv)(e,this.geometryType,this.hasZ,this.hasM),r=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__/* .fromJSON */ .rS)(t);return r&&(r.spatialReference=this._arcadeSpatialReference),r}autocastArcadeDate(t,r){return r&&r instanceof Date?this.isUnknownDateTimeField(t)?_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__/* .ArcadeDate */ .lY.unknownDateJSToArcadeDate(r):_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__/* .ArcadeDate */ .lY.dateJSAndZoneToArcadeDate(r,this.contextTimeZone??_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .system */ .qU):r}isUnknownDateTimeField(e){return this._layerSchema.fieldsIndex.getTimeZone(e)===_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_8__/* .unknown */ .L5}field(t){let i=this.fields.get(t);if(i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_3__/* .DateOnly */ .n.fromReader(this.readAttribute(t,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_4__/* .TimeOnly */ .k.fromReader(this.readAttribute(t,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__/* .ArcadeDate */ .lY.fromReaderAsTimeStampOffset(this.readAttribute(t,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(t,this.readAttribute(t,!0));default:return this.readAttribute(t,!1)}for(const n of this._joined)if(n.setIndex(this.getIndex()),i=n.fields.get(t),i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_3__/* .DateOnly */ .n.fromReader(n._readAttribute(t,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_4__/* .TimeOnly */ .k.fromReader(n._readAttribute(t,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__/* .ArcadeDate */ .lY.fromReaderAsTimeStampOffset(n._readAttribute(t,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(t,n._readAttribute(t,!0));default:return this.readAttribute(t,!1)}throw new Error(`Field ${t} does not exist`)}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this.fields.fields.map((e=>e.name))}castToText(e=!1){if(!e)return JSON.stringify(this.readLegacyFeature());const t=this.readLegacyFeature();if(!t)return JSON.stringify(null);const r={geometry:t.geometry,attributes:{...t.attributes??{}}};for(const s in r.attributes){const e=r.attributes[s];e instanceof Date&&(r.attributes[s]=e.getTime())}return JSON.stringify(r)}gdbVersion(){return null}fullSchema(){return this._layerSchema}castAsJson(e=null){return{attributes:this._readAttributes(),geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}removeIds(e){if(null==this._objectIdToIndex){const e=new Map,r=this.getCursor();for(;r.next();){const s=r.getObjectId();(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__/* .assertIsSome */ .Lw)(s),e.set(s,r.getIndex())}this._objectIdToIndex=e}const r=this._objectIdToIndex;for(const t of e)r.has(t)&&this.removeAtIndex(r.get(t))}removeAtIndex(e){null==this._deleted&&(this._deleted=_StaticBitSet_js__WEBPACK_IMPORTED_MODULE_12__/* .StaticBitSet */ .y.create(this.getSize())),this._deleted.set(e)}readGeometryForDisplay(){return this.readUnquantizedGeometry(!0)}readLegacyGeometryForDisplay(){return this.readLegacyGeometry(!0)}*features(){const e=this.getCursor();for(;e.next();)yield e.readOptimizedFeature()}_getExists(){return null==this._deleted||!this._deleted.has(this.getIndex())}_computeCentroid(){if("esriGeometryPolygon"!==this.geometryType)return null;const e=this.readUnquantizedGeometry();if(!e||e.hasIndeterminateRingOrder)return null;const t=_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_5__/* .GeometryCursor */ .z.fromOptimized(e,this.geometryType);t.yFactor*=-1;const r=(0,_geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_6__/* .getLabelPoint */ .d)(t);return r?(r[1]*=-1,new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A([],r)):null}copyInto(e){e.seen=this.seen,e._storage=this._storage,e._arcadeSpatialReference=this._arcadeSpatialReference,e._joined=this._joined,e._tx=this._tx,e._ty=this._ty,e._sx=this._sx,e._sy=this._sy,e._deleted=this._deleted,e._objectIdToIndex=this._objectIdToIndex,e.contextTimeZone=this.contextTimeZone}}


/***/ }),

/***/ 51747:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21355);
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(32597);
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(79005);
/* harmony import */ var _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(42549);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d({coords:t,lengths:e}){let r=0;for(const s of e){for(let e=1;e<s;e++)t[2*(r+e)]+=t[2*(r+e)-2],t[2*(r+e)+1]+=t[2*(r+e)-1];r+=s}}class h extends _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_2__/* .FeatureSetReader */ .Y{static fromFeatures(e,r){const{objectIdField:s,geometryType:i}=r,n=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertFromFeatures */ .Di)([],e,i,!1,!1,s);for(let t=0;t<n.length;t++)n[t].displayId=e[t].displayId;return h.fromOptimizedFeatures(n,r)}static fromFeatureSet(t,r){const s=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertFromFeatureSet */ .q3)(t,r.objectIdField);return h.fromOptimizedFeatureSet(s,r)}static fromOptimizedFeatureSet(t,e){const{features:r}=t,s=h.fromOptimizedFeatures(r,e);return s._exceededTransferLimit=t.exceededTransferLimit,s._transform=t.transform,s._fieldsIndex=new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A(e.fields),s}static fromOptimizedFeatures(t,e,r){const s=_FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_2__/* .FeatureSetReader */ .Y.createInstance(),i=new h(s,t,e);return i._fieldsIndex=new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A(e.fields),i._transform=r,i}constructor(t,e,r){super(t,r),this._exceededTransferLimit=!1,this._featureIndex=-1,this._fieldsIndex=null,this._geometryType=r?.geometryType,this._features=e}get fields(){return this._fieldsIndex}get _current(){return this._features[this._featureIndex]}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}removeIds(t){const e=new Set(t);this._features=this._features.filter((t=>!(null!=t.objectId&&e.has(t.objectId))))}append(t){for(const e of t)this._features.push(e)}getSize(){return this._features.length}getCursor(){return this.copy()}getQuantizationTransform(){return this._transform}getAttributeHash(){let t="";for(const e in this._current.attributes)t+=this._current.attributes[e];return t}getIndex(){return this._featureIndex}setIndex(t){this._featureIndex=t}getObjectId(){return this._current?.objectId}getDisplayId(){return this._current.displayId}setDisplayId(t){this._current.displayId=t}getGroupId(){return this._current.groupId}setGroupId(t){this._current.groupId=t}copy(){const t=new h(this.instance,this._features,this.fullSchema());return this.copyInto(t),t}next(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length}readLegacyFeature(){return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToFeature */ .oN)(this._current,this.geometryType,this.hasZ,this.hasM)}readOptimizedFeature(){return this._current}readLegacyPointGeometry(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null}readLegacyGeometry(){const t=this.readUnquantizedGeometry();return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .convertToGeometry */ .zv)(t,this.geometryType,this.hasZ,this.hasM)}readLegacyCentroid(){const t=this.readCentroid();return null==t?null:{x:t.coords[0]*this._sx+this._tx,y:t.coords[1]*this._sy+this._ty}}readGeometryArea(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current)?(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .getQuantizedArea */ .Rk)(this._current.geometry,2):0}readUnquantizedGeometry(){const t=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!t)return t;const e=t.clone();return d(e),e}readHydratedGeometry(){const t=this._current.geometry;if(null==t)return null;const e=t.clone();return null!=this._transform&&(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .unquantizeOptimizedGeometry */ .Ch)(e,e,this.hasZ,this.hasM,this._transform),e}getXHydrated(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current))return 0;const t=this._current.geometry.coords[0],e=this.getQuantizationTransform();return null==e?t:t*e.scale[0]+e.translate[0]}getYHydrated(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current))return 0;const t=this._current.geometry.coords[1],e=this.getQuantizationTransform();return null==e?t:e.translate[1]-t*e.scale[1]}getX(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current)?this._current.geometry.coords[0]*this._sx+this._tx:0}getY(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current)?this._current.geometry.coords[1]*this._sy+this._ty:0}readGeometry(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current)){if(null!=this._current.centroid){const[t,e]=this._current.centroid.coords;return this.createQuantizedExtrudedGeometry(t,e)}return null}const t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]=t.coords[0]*this._sx+this._tx,t.coords[1]=t.coords[1]*this._sy+this._ty,t;let e=0;for(const r of t.lengths)t.coords[2*e]=t.coords[2*e]*this._sx+this._tx,t.coords[2*e+1]=t.coords[2*e+1]*this._sy+this._ty,e+=r;return t}readCentroid(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_3__/* .hasGeometry */ .N3)(this._current)?this._computeCentroid():this._current.centroid}_readAttribute(t,e){const r=this._fieldsIndex.get(t);if(!r)return;let s=this._current.attributes[r.name];return null==s?s:("esriFieldTypeTimestampOffset"===this.fields.get(t)?.type&&(s=this.parseTimestampOffset(s)),e&&this.fields.isDateField(t)?new Date(s):s)}copyInto(t){super.copyInto(t),t._featureIndex=this._featureIndex,t._transform=this._transform,t._fieldsIndex=this._fieldsIndex}_readAttributes(){return this._current.attributes}}


/***/ }),

/***/ 43871:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   y: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{static fromBuffer(e,s){return new t(e,s)}static create(e,s=4294967295){const r=new Uint32Array(Math.ceil(e/32));return new t(r,s)}constructor(t,e){this._mask=0,this._buf=t,this._mask=e}_getIndex(t){return Math.floor(t/32)}has(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}hasRange(t,e){let s=t,r=e;for(;s%32&&s!==r;){if(this.has(s))return!0;s++}for(;r%32&&s!==r;){if(this.has(s))return!0;r--}if(s===r)return!1;for(let h=s/32;h!==r/32;h++){if(this._buf[h])return!0}return!1}set(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]|=r}setRange(t,e){let s=t,r=e;for(;s%32&&s!==r;)this.set(s++);for(;r%32&&s!==r;)this.set(r--);if(s!==r)for(let h=s/32;h!==r/32;h++)this._buf[h]=4294967295}unset(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]&=4294967295^r}resize(t){const e=this._buf,s=new Uint32Array(Math.ceil(t/32));s.set(e),this._buf=s}or(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}and(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}xor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}ior(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}iand(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}ixor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}any(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}copy(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}clone(){return new t(this._buf.slice(),this._mask)}clear(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0}forEachSet(t){for(let e=0;e<this._buf.length;e++){let s=this._buf[e],r=32*e;if(s)for(;s;){1&s&&t(r),s>>>=1,r++}}}countSet(){let t=0;return this.forEachSet((e=>{t++})),t}}


/***/ }),

/***/ 63838:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R9: () => (/* binding */ i),
/* harmony export */   ZM: () => (/* binding */ n),
/* harmony export */   eu: () => (/* binding */ h),
/* harmony export */   gg: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89882);
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(75228);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=8,l=s-2,a=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.2d.layers.features.support.rendererUtils"),n=e=>{if(!("visualVariables"in e)||!e.visualVariables?.length)return e;const r=e.clone(),t=r.visualVariables.map((e=>u(e)?p(e):e));return r.visualVariables=t,r};function i(e){return e.map((e=>u(e)?p(e.clone()):e))}function u(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function p(e){return e.stops=m(e.type,e.stops??[]),e}function c(e,r,t){return(1-t)*e+t*r}function f(e,r){const[o,...s]=r,a=s.pop(),n=s[0].value,i=s[s.length-1].value,u=(i-n)/l,p=[];for(let l=n;l<i;l+=u){let o=0;for(;l>=s[o].value;)o++;const a=s[o],n=r[o-1],i=l-n.value,u=a.value===n.value?1:i/(a.value-n.value);if("color"===e){const e=s[o],t=r[o-1],a=e.color.clone();a.r=c(t.color.r,a.r,u),a.g=c(t.color.g,a.g,u),a.b=c(t.color.b,a.b,u),a.a=c(t.color.a,a.a,u),p.push({value:l,color:a,label:e.label})}else if("size"===e){const e=s[o],a=r[o-1],n=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .toPt */ .cr)(e.size),i=c((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .toPt */ .cr)(a.size),n,u);p.push({value:l,size:i,label:e.label})}else{const e=s[o],t=c(r[o-1].opacity,e.opacity,u);p.push({value:l,opacity:t,label:e.label})}}return[o,...p,a]}function b(e){const[r,...t]=e,o=t.pop();for(;t.length>l;){let e=0,r=0;for(let o=1;o<t.length;o++){const s=t[o-1],l=t[o],a=Math.abs(l.value-s.value);a>r&&(r=a,e=o)}t.splice(e,1)}return[r,...t,o]}function m(e,r){return r.length<=s?r:(a.warn(`Found ${r.length} Visual Variable stops, but MapView only supports ${s}. Displayed stops will be simplified.`),r.length>2*s?f(e,r):b(r))}function g(){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("heatmap-force-raster"))return"raster";const{supportsTextureFloat:e,supportsTextureHalfFloat:r,supportsColorBufferFloat:t,supportsColorBufferFloatBlend:s,supportsColorBufferHalfFloat:l}=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .Cx)("2d");return e&&t&&s||r&&l?"symbol":(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("heatmap-allow-raster-fallback")?"raster":"none"}function h(r){if(!r)return!0;switch(r.type){case"dot-density":if(!(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .Cx)("2d").supportsTextureFloat)return a.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":{const r=g();if("none"===r||"raster"===r&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("heatmap-force-raster")){const t=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_3__/* .getWebGLCapabilities */ .Cx)("2d"),s=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((e=>!t[e])).join(", ");if("none"===r)return a.errorOnce(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-missing-extension",`Missing WebGL${t.type} requirements for Heatmap: ${s}`)),!1;"raster"===r&&a.warnOnce(`Missing WebGL${t.type} requirements for accelerated Heatmap: ${s}. Feature support may be limited.`)}break}}return!0}


/***/ }),

/***/ 38955:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}


/***/ }),

/***/ 65126:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(n){if(null==n)return[];const r=new Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r}


/***/ }),

/***/ 79783:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   T3: () => (/* binding */ c),
/* harmony export */   lS: () => (/* binding */ l)
/* harmony export */ });
/* unused harmony exports convertColorVariable, normalizeSizeElement, normalizeSizeStops, stopToSizeStop */
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(89882);
/* harmony import */ var _engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(83253);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(43556);
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(79432);
/* harmony import */ var _engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(46790);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(e,t){if(!e||!t)return e;switch(t){case"radius":case"distance":return 2*e;case"diameter":case"width":return e;case"area":return Math.sqrt(e)}return e}function r(t){return{value:t.value,size:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .toPt */ .cr)(t.size)}}function a(e){return(e??[]).map((e=>r(e)))}function u(t){if("string"==typeof t||"number"==typeof t)return (0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .toPt */ .cr)(t);const s=t;return{type:"size",expression:s.expression,stops:a(s.stops)}}const p=e=>{const s=[],o=[],i=a(e),l=i.length;for(let r=0;r<6;r++){const e=i[Math.min(r,l-1)];s.push(e.value),o.push(null==e.size?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_1__/* .nanMagicNumber */ .qM:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .pt2px */ .Lz)(e.size))}return{values:new Float32Array(s),sizes:new Float32Array(o)}};function c(e){const t=e&&e.length>0?{}:null,s=t?{}:null;if(!t||!s)return{vvFields:t,vvRanges:s};for(const n of e)if(n.field&&(t[n.type]=n.field),"size"===n.type){s.size||(s.size={});const e=n;switch((0,_engine_webgl_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getTypeOfSizeVisualVariable */ .h)(e)){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_MINMAX_VALUE:s.size.minMaxValue={minDataValue:e.minDataValue,maxDataValue:e.maxDataValue,minSize:u(e.minSize),maxSize:u(e.maxSize)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_SCALE_STOPS:s.size.scaleStops={stops:a(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_FIELD_STOPS:if(e.levels){const t={};for(const s in e.levels)t[s]=p(e.levels[s]);s.size.fieldStops={type:"level-dependent",levels:t}}else s.size.fieldStops={type:"static",...p(e.stops)};break;case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .WGLVVFlag */ .rU.SIZE_UNIT_VALUE:s.size.unitValue={unit:e.valueUnit,valueRepresentation:e.valueRepresentation??void 0}}}else if("color"===n.type)s.color=m(n);else if("opacity"===n.type)s.opacity=f(n);else if("rotation"===n.type){const e=n;s.rotation={type:e.rotationType}}return{vvFields:t,vvRanges:s}}function f(e){const t={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,t.opacities[e]=n.opacity}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0?e.stops[0].opacity:0;for(let e=0;e<8;e++)t.values[e]=1/0,t.opacities[e]=s}}return t}function v(e,t,s){e[4*t]=s.r/255,e[4*t+1]=s.g/255,e[4*t+2]=s.b/255,e[4*t+3]=s.a}function m(e){if(null==e)return null;if(e.normalizationField)return null;const t={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"==typeof e.field){if(!e.stops)return null;{if(e.stops.length>8)return null;t.field=e.field;const s=e.stops;for(let e=0;e<8;++e){const n=s[Math.min(e,s.length-1)];t.values[e]=n.value,v(t.colors,e,n.color)}}}else{if(!(e.stops&&e.stops.length>=0))return null;{const s=e.stops&&e.stops.length>=0&&e.stops[0].color;for(let e=0;e<8;e++)t.values[e]=1/0,v(t.colors,e,s)}}for(let n=0;n<32;n+=4)(0,_engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_0__/* .premultiplyAlpha */ .IG)(t.colors,n,!0);return t}


/***/ }),

/***/ 95387:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js + 1 modules
var FeatureContainer = __webpack_require__(42766);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3.js
var mat3 = __webpack_require__(46615);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/mat3f32.js
var mat3f32 = __webpack_require__(21360);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec2f32.js
var vec2f32 = __webpack_require__(48325);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/vec3f32.js
var vec3f32 = __webpack_require__(80952);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules
var normalizeUtils = __webpack_require__(65231);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/DisplayObject.js
var DisplayObject = __webpack_require__(37353);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicBoundsRenderer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const v=Math.PI/180,x=4;class b extends DisplayObject/* DisplayObject */.q{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,mat3f32.c)(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,maybe/* disposeMaybe */.WD)(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(enums/* BlendFactor */.dn.ONE,enums/* BlendFactor */.dn.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const s=this._program;e.bindVAO(this._vao),e.useProgram(s),s.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(enums/* PrimitiveType */.WR.LINES,8*r.length,enums/* DataType */.pe.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{dvs:(0,mat3f32.c)()}}_createShaderProgram(t){if(this._program)return;const e="precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }",r="precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }";this._program=t.programCache.acquire(e,r,y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:u,size:c,resolution:_,pixelRatio:h,rotation:m,viewpoint:d}=a,p=v*m,{x:g,y:x}=d.targetGeometry,b=(0,normalizeUtils/* normalizeMapX */.mT)(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=h*c[0],B=h*c[1],M=_*y,j=_*B,A=(0,mat3.g)(this._dvsMat3);(0,mat3.m)(A,A,u),(0,mat3.h)(A,A,(0,vec2f32.f)(y/2,B/2)),(0,mat3.c)(A,A,(0,vec3f32.f)(c[0]/M,-B/j,1)),(0,mat3.r)(A,A,-p)}_updateBufferData(t,e){const{x:r,y:s}=this._localOrigin,i=2*x*e.length,o=new Float32Array(i),a=new Uint32Array(8*e.length);let n=0,f=0;for(const l of e)l&&(o[2*n]=l[0]-r,o[2*n+1]=l[1]-s,o[2*n+2]=l[0]-r,o[2*n+3]=l[3]-s,o[2*n+4]=l[2]-r,o[2*n+5]=l[3]-s,o[2*n+6]=l[2]-r,o[2*n+7]=l[1]-s,a[f]=n+0,a[f+1]=n+3,a[f+2]=n+3,a[f+3]=n+2,a[f+4]=n+2,a[f+5]=n+1,a[f+6]=n+1,a[f+7]=n+0,n+=4,f+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=BufferObject/* BufferObject */.g.createVertex(t,enums/* Usage */._U.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=BufferObject/* BufferObject */.g.createIndex(t,enums/* Usage */._U.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new VertexArrayObject/* VertexArrayObject */.Z(t,e.attributes,e.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}const y=()=>(0,Utils/* createProgramDescriptor */.ES)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:enums/* DataType */.pe.FLOAT}]});

;// ../node_modules/@arcgis/core/views/2d/layers/graphics/BaseGraphicContainer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let i=class extends FeatureContainer/* FeatureContainer */.i{constructor(e){super(e),this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,maybe/* destroyMaybe */.pR)(this._boundsRenderer)}enableRenderingBounds(e){this._boundsRenderer=new b(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.patch(t),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}_renderChildren(e,t){for(const r of this.children)r.isReady&&r.hasData&&(r.commit(e),e.context.setStencilFunction(enums/* CompareFunction */.MT.EQUAL,r.stencilRef,255),r.getDisplayList().replay(e,r,t))}};


/***/ }),

/***/ 13737:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79432);
/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(95387);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.MAP&&this._renderChildren(r),this.hasHighlight&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .WGLDrawPhase */ .S5.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}


/***/ }),

/***/ 80734:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ re)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Accessor.js + 4 modules
var Accessor = __webpack_require__(52495);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/BidiText.js
var BidiText = __webpack_require__(21870);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Identifiable.js
var Identifiable = __webpack_require__(65667);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/maybe.js
var maybe = __webpack_require__(6267);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/promiseUtils.js
var promiseUtils = __webpack_require__(40189);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/reactiveUtils.js
var reactiveUtils = __webpack_require__(85251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/SpatialReference.js
var SpatialReference = __webpack_require__(78983);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/aaBoundingRect.js
var aaBoundingRect = __webpack_require__(80510);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/coordsUtils.js
var coordsUtils = __webpack_require__(65319);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/jsonUtils.js
var jsonUtils = __webpack_require__(1171);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js
var normalizeUtilsSync = __webpack_require__(14537);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js
var spatialReferenceUtils = __webpack_require__(87926);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js
var projectionSupport = __webpack_require__(23783);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js
var CIMSymbolHelper = __webpack_require__(48002);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/support/defaults.js
var defaults = __webpack_require__(26207);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js
var definitions = __webpack_require__(43556);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/DirtyMap.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=-1;class DirtyMap_e{constructor(){this._dirties=[{vertexFrom:t,vertexCount:t,indexFrom:t,indexCount:t,allDirty:!1},{vertexFrom:t,vertexCount:t,indexFrom:t,indexCount:t,allDirty:!1},{vertexFrom:t,vertexCount:t,indexFrom:t,indexCount:t,allDirty:!1},{vertexFrom:t,vertexCount:t,indexFrom:t,indexCount:t,allDirty:!1},{vertexFrom:t,vertexCount:t,indexFrom:t,indexCount:t,allDirty:!1}]}hasDirty(){return this._dirties.some((e=>e.indexCount!==t||e.allDirty))}markAllClean(){for(const e of this._dirties)e.indexFrom=t,e.indexCount=t,e.vertexFrom=t,e.vertexCount=t,e.allDirty=!1}markAllDirty(){for(const t of this._dirties)t.allDirty=!0}forEach(e){for(let r=0;r<this._dirties.length;++r){const{indexCount:i,indexFrom:o,vertexCount:n,vertexFrom:x,allDirty:l}=this._dirties[r],s={};let d,m=!1;(l||x!==t&&n>0)&&(s.geometry={count:n,from:x,allDirty:l},m=!0),(l||o!==t&&i>0)&&(d={count:i,from:o,allDirty:l},m=!0),m&&e({indices:d,vertices:s},r)}}markDirtyIndices(e,r,i){const o=this._dirties[e],n=r,x=i;if(!o.allDirty)if(o.indexCount!==t){const t=Math.min(o.indexFrom,n),e=Math.max(o.indexFrom+o.indexCount,n+x)-t;o.indexFrom=t,o.indexCount=e}else o.indexFrom=n,o.indexCount=x}markDirtyVertices(e,r,i,o){const n=this._dirties[e],x=i,l=o;if(!n.allDirty)if(n.vertexCount!==t){const t=Math.min(n.vertexFrom,x),e=Math.max(n.vertexFrom+n.vertexCount,x+l)-t;n.vertexFrom=t,n.vertexCount=e}else n.vertexFrom=x,n.vertexCount=l}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/FreeList.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{get largestRange(){return this._largestRange}constructor(e){this._largestRange=null,this._parent=e,this._updateLargestRange()}rangeCreated(e){(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}rangeResized(e,t){e===this._largestRange?e.count<t&&this._updateLargestRange():(!this._largestRange||e.count>this._largestRange.count)&&(this._largestRange=e)}findBestRange(e){let t=this._parent._freeHead,n=null;for(;null!==t;)t.count>=e&&(!n||t.count-e<n.count-e)&&(n=t),t=t.next;return n}findAdjacentRanges(e,t){let n=!0,r=!1,s=null,o=this._parent._freeHead;for(;n&&!r;){const a=null!==s?s.from+s.count:0,l=null!==o?o.from:this._parent._size;e>=a&&e+t<=l?(n=!1,r=!0):null!==o?(s=o,o=o.next):n=!1}return[s,o]}_updateLargestRange(){let e=null,t=this._parent._freeHead;for(;null!==t;)(!e||t.count>e.count)&&(e=t),t=t.next;this._largestRange=e}}class FreeList_t{constructor(t,n){this._allocated=0,this._size=t,this._freeHead=t>0?{from:0,count:t,prev:null,next:null}:null,this._bookKeeper=n||new e(this),this._freeHead&&this._bookKeeper.rangeCreated(this._freeHead)}allocate(e){const n=this._bookKeeper.findBestRange(e);if(null==n)return-1;const r=n.from,s=n.count;if(n.from+=e,n.count-=e,this._bookKeeper.rangeResized(n,r,s),this._allocated+=e,0===n.count){const e=null!==n.prev?this._freeHead:n.next;FreeList_t._removeRange(n),this._freeHead=e}return r}free(e,n){const[r,s]=this._bookKeeper.findAdjacentRanges(e,n),o={from:e,count:n,prev:r??null,next:s??null};if(null!=r&&(r.next=o),null!=s&&(s.prev=o),this._bookKeeper.rangeCreated(o),this._allocated-=n,null!=s&&o.from+o.count===s.from){const e=o.from,n=o.count;FreeList_t._fuse(o,s),FreeList_t._removeRange(s),this._bookKeeper.rangeResized(o,e,n),this._bookKeeper.rangeResized(s,void 0,0)}if(null!=r&&r.from+r.count===o.from){const e=r.from,n=r.count;FreeList_t._fuse(r,o),FreeList_t._removeRange(o),this._bookKeeper.rangeResized(r,e,n),this._bookKeeper.rangeResized(o,void 0,0)}this._freeHead=null!==o.prev?this._freeHead:o}get fragmentation(){const e=this._size-this._allocated;if(0===e)return 0;return 1-this._bookKeeper.largestRange.count/e}static _removeRange(e){null!==e.prev?null!==e.next?(e.prev.next=e.next,e.next.prev=e.prev):e.prev.next=null:null!==e.next&&(e.next.prev=null)}static _fuse(e,t){e.count+=t.count,e.next=t.next,t.from+=t.count,t.count=0,null!==t.next&&(t.next.prev=e)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js
var Utils = __webpack_require__(38403);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/DisplayRecordStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=["FILL","LINE","MARKER","TEXT","LABEL"];function o(e){const t=e.getStrides(),r={};for(let i=0;i<t.length;i++)r[s[i]]=t[i];return r}const n=.5;class d{constructor(r,i,s,o){this._strides=r,this._displayList=i,this._freeListsAndStorage={},this._dirtyMap=null,this._dirtyMap=s;for(const n in r){this._freeListsAndStorage[n]={vtxFreeList:o?new FreeList_t(o):null,idxFreeList:o?new FreeList_t(o):null,vertexBuffers:{},indexBuffer:o?new Uint32Array(o):null};for(const e in r[n])this._freeListsAndStorage[n].vertexBuffers[e]={data:o?(0,Utils/* allocateTypedArrayBuffer */.NM)(o,r[n][e]):null,stride:r[n][e]}}}static fromTileData(t,i){const n=o(t),a=[0,0,0,0,0],x=[0,0,0,0,0];for(const e of t.tileDisplayData.displayObjects)for(const t of e.displayRecords)a[t.geometryType]=Math.max(a[t.geometryType],t.vertexFrom+t.vertexCount),x[t.geometryType]=Math.max(x[t.geometryType],t.indexFrom+t.indexCount);const u=new d(n,t.tileDisplayData.displayList,i,void 0),f=t.tileBufferData?.geometries??[];for(let o=0;o<f.length;++o){const t=a[o],i=x[o],n=f[o],d=s[o],c=u._storageFor(d),l=f[o].indexBuffer;c.indexBuffer=l,c.idxFreeList=new FreeList_t(l.length),c.idxFreeList.allocate(i);let m=0;for(const e in n.vertexBuffer){const t=f[o].vertexBuffer[e];c.vertexBuffers[e].data=t.data,c.vertexBuffers[e].stride=t.stride;const i=(0,Utils/* strideToPackingFactor */.vq)(t.stride),s=t.data.length*i/t.stride;m||(m=s)}c.vtxFreeList=new FreeList_t(m),c.vtxFreeList.allocate(t)}return u}delete(e){const t=s[e.geometryType];this._freeVertices(t,e.vertexFrom,e.vertexCount),this._freeIndices(t,e.indexFrom,e.indexCount),this._displayList.removeFromList(e),e.vertexFrom=void 0,e.indexFrom=void 0}setMeshData(e,t,r,o,n){const d=s[e.geometryType];let a,x;e.meshData=null,void 0===e.vertexFrom?(x=t.vertexCount,a=this._allocateVertices(d,x)):t.vertexCount>e.vertexCount?(this._freeVertices(d,e.vertexFrom,e.vertexCount),x=t.vertexCount,a=this._allocateVertices(d,x)):t.vertexCount===e.vertexCount?(a=e.vertexFrom,x=e.vertexCount):(this._freeVertices(d,e.vertexFrom+t.vertexCount,e.vertexCount-t.vertexCount),a=e.vertexFrom,x=t.vertexCount);let u,f,c,l=!0;if(void 0===e.indexFrom?(u=n,c=t.indexCount,f=this._allocateIndices(d,c)):t.indexCount>e.indexCount?(u=this._displayList.removeFromList(e),this._freeIndices(d,e.indexFrom,e.indexCount),c=t.indexCount,f=this._allocateIndices(d,c)):t.indexCount===e.indexCount?(l=!1,f=e.indexFrom,c=e.indexCount):(u=this._displayList.removeFromList(e),this._freeIndices(d,e.indexFrom+t.indexCount,e.indexCount-t.indexCount),f=e.indexFrom,c=t.indexCount),-1!==a&&-1!==f){const s=this._storageFor(d);if((0,Utils/* copyMeshData */.Hp)(a,f,s.vertexBuffers,s.indexBuffer,t,r,o),e.vertexFrom=a,e.indexFrom=f,e.vertexCount=t.vertexCount,e.indexCount=t.indexCount,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in r)this._dirtyMap.markDirtyVertices(e.geometryType,t,e.vertexFrom,e.vertexCount)}return l&&this._displayList.addToList(e,u),!0}return-1!==a&&this._freeVertices(d,a,x),-1!==f&&this._freeIndices(d,f,c),e.setMeshDataFromBuffers(t,r,o),e.vertexFrom=void 0,e.vertexCount=0,e.indexFrom=void 0,e.indexCount=0,!1}tryAddMeshData(e,t){const r=t.vertexBuffer,o=t.indexBuffer,n=s[e.geometryType],d=this._allocateVertices(n,e.vertexCount);if(-1===d)return this._freeVertices(n,d,e.vertexCount),!1;const a=this._allocateIndices(n,e.indexCount);if(-1===a)return this._freeVertices(n,d,e.vertexCount),this._freeIndices(n,a,e.indexCount),!1;const x=this._storageFor(n);if((0,Utils/* copyMeshData */.Hp)(d,a,x.vertexBuffers,x.indexBuffer,e,r,o),e.vertexFrom=d,e.indexFrom=a,this._dirtyMap){this._dirtyMap.markDirtyIndices(e.geometryType,e.indexFrom,e.indexCount);for(const t in r)this._dirtyMap.markDirtyVertices(e.geometryType,t,d,e.vertexCount)}return this._displayList.addToList(e),!0}_allocateVertices(e,t){const r=this._storageFor(e),i=r.vtxFreeList?.allocate(t);if(null==i||-1===i)return-1;const s=r.vtxFreeList?.fragmentation;return null==s||s>n?-1:i}_freeVertices(e,t,r){const i=this._storageFor(e);i.vtxFreeList?.free(t,r)}_freeIndices(e,t,r){const i=this._storageFor(e);i.idxFreeList?.free(t,r)}_allocateIndices(e,t){const r=this._storageFor(e),i=r.idxFreeList?.allocate(t);if(null==i||-1===i)return-1;const s=r.idxFreeList?.fragmentation;return null==s||s>n?-1:i}_storageFor(e){return this._freeListsAndStorage[e]}_stridesFor(e,t){return this._strides[e][t]}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/BufferObject.js
var BufferObject = __webpack_require__(89423);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var webgl_enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/VertexArrayObject.js
var VertexArrayObject = __webpack_require__(80976);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLBuffers.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLBuffers_o{constructor(a){this.geometryMap=(0,Utils/* createGeometryData */.JK)((()=>({indexBuffer:BufferObject/* BufferObject */.g.createIndex(a,webgl_enums/* Usage */._U.STATIC_DRAW),vao:null})),((e,s)=>({vertexBuffer:BufferObject/* BufferObject */.g.createVertex(a,Utils/* cVboInfo */.rO[s])})))}dispose(){for(let e=0;e<5;e++){const t=this.geometryMap[e];if(t){t.data.vao?.disposeVAOOnly(),t.data.indexBuffer?.dispose();for(const e in t.buffers)t.buffers[e]?.data.vertexBuffer.dispose()}}}get(e){const t=this.geometryMap[e];return{getVAO(e,r,s){if(!t.data.vao){const o={};for(const e in t.buffers)o[e]=t.buffers[e].data.vertexBuffer;t.data.vao=new VertexArrayObject/* VertexArrayObject */.Z(e,s,r,o,t.data.indexBuffer)}return t.data.vao}}}has(e){return null!=this.geometryMap[e]}upload(e,t){t.forEach(((t,r)=>{this._upload(t,r,e)}))}_upload(e,t,r){if(e.indices&&(e.indices.allDirty?this._uploadIndices(r,t):null!=e.indices.from&&null!=e.indices.count&&this._uploadIndices(r,t,e.indices.from,e.indices.count)),e.vertices){const s=e.vertices;for(const e in s){const a=s[e];a.allDirty?this._uploadVertices(r,t,e):null!=a.from&&null!=a.count&&this._uploadVertices(r,t,e,a.from,a.count)}}}_uploadVertices(e,t,r,s,a){const o=this.geometryMap[t];if(!o)return;const f=e.geometries[t].vertexBuffer[r];if(!f)return;const{data:i,stride:n}=f;if(o.buffers[r]&&i.length>0){const e=n/i.BYTES_PER_ELEMENT;null!=s&&null!=a?o.buffers[r].data.vertexBuffer.setSubData(i,s*e,s*e,(s+a)*e):o.buffers[r].data.vertexBuffer.setData(i)}}_uploadIndices(e,t,r,s){const a=this.geometryMap[t];if(!a)return;const o=e.geometries[t].indexBuffer;a.data.indexBuffer&&o.length>0&&(null!=r&&null!=s?a.data.indexBuffer.setSubData(o,r,r,r+s):a.data.indexBuffer.setData(o))}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js
var WGLTile = __webpack_require__(20736);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/GraphicTile.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends WGLTile/* WGLTile */.X{constructor(){super(...arguments),this._data=null,this._displayList=null,this._lastCommitTime=0,this._hasData=!1,this._invalidated=!1,this._wglBuffers=null,this._dirtyMap=new DirtyMap_e}destroy(){super.destroy(),this.clear()}get hasData(){return!!this._hasData}get displayObjects(){return this._displayObjects??[]}getGeometry(t){return this._wglBuffers&&this._wglBuffers.has(t)?this._wglBuffers.get(t):null}getDisplayList(){return this._displayList}patch(e){if(!0===e.clear)return this.clear(),void(this._hasData=!1);const i=e.addOrUpdate,a=e.remove;!this._data&&i?.tileDisplayData?.displayObjects.length?(i.tileDisplayData.computeDisplayList(),this._dirtyMap=new DirtyMap_e,this._dispRecStore=d.fromTileData(i,this._dirtyMap),this._data=i,this._dirtyMap.markAllDirty(),this._hasData=!0,e.end&&this.ready()):this._data&&(i?.tileDisplayData?.displayObjects.length||a.length)?this._doPatchData(e):e.end&&this.ready(),e.end&&!this._data&&this.clear(),this.requestRender(),this.emit("change")}commit(t){t.time&&t.time===this._lastCommitTime||(this._lastCommitTime=t.time,this.visible&&this._data&&(this._wglBuffers||(this._wglBuffers=new WGLBuffers_o(t.context)),(this._dirtyMap.hasDirty()||this._invalidated)&&(this._invalidated=!1,this._wglBuffers.upload(this._data.tileBufferData,this._dirtyMap),this._displayList=this._data.tileDisplayData.displayList.clone(),this._displayObjects=this._data.tileDisplayData.displayObjects.slice(),this._dirtyMap.markAllClean())))}clear(){this._data=null,this._displayList=null,this._dispRecStore=null,this._wglBuffers&&(this._wglBuffers.dispose(),this._wglBuffers=null)}_doPatchData(t){this._invalidated=!0,this._patchData(t)||(this._dirtyMap.markAllDirty(),this._data.reshuffle(),this._dispRecStore=d.fromTileData(this._data,this._dirtyMap)),this.requestRender()}_patchData(t){let s=!0;const e=t.addOrUpdate?.tileDisplayData?.displayObjects||[],i=(t.remove||[]).slice();for(const r of e)null!=r.insertAfter&&i.push(r.id);let a;i.length>0&&(a=new Set(i));const l=this._data.tileDisplayData;for(const r of i){const t=l.displayObjectRegistry.get(r);if(t){l.displayList.removeFromList(t.displayRecords);for(const s of t.displayRecords)this._dispRecStore.delete(s);l.displayObjectRegistry.delete(r)}}a?.size&&(l.displayObjects=l.displayObjects.filter((t=>!a.has(t.id))));for(const r of e){let e,i=l.displayObjectRegistry.get(r.id);if(i){const t=i.displayRecords;i.set(r),i.displayRecords=t;const s=i.displayRecords.length;for(let e=0;e<s;++e){const t=i.displayRecords[e],s=r.displayRecords[e];(e>=r.displayRecords.length||t.geometryType!==s.geometryType||t.symbolLevel!==s.symbolLevel||t.zOrder!==s.zOrder||t.materialKey!==s.materialKey)&&(this._dispRecStore.delete(i.displayRecords[e]),e<r.displayRecords.length&&(i.displayRecords[e]=void 0))}i.displayRecords.length=r.displayRecords.length}else{let t;i=r.copy(),i.displayRecords=[],l.displayObjectRegistry.set(r.id,i);const s=l.displayObjects;if(null!=i.insertAfter)if(e={},i.insertAfter>=0){const e=l.displayObjectRegistry.get(i.insertAfter);e?(t=s.indexOf(e)+1,t<s.length?s.splice(t,0,i):(s.push(i),t=s.length)):(s.push(i),t=s.length)}else s.unshift(i),t=0;else s.push(i),t=s.length;if(e){const i=r.displayRecords.length>0?1:0;let a=0;for(let r=t-1;r>=0&&a<i;--r)for(let t=s[r].displayRecords.length-1;t>=0&&a<i;--t){const i=s[r].displayRecords[t],d=l.displayList.getDPInfoType();e[d]||(e[d]=i,++a)}}}const a=r.displayRecords.length;for(let d=0;d<a;++d){const a=r.displayRecords[d];let o=i.displayRecords[d];o?(o.meshData=a.meshData,o.materialKey=a.materialKey):(o=a.copy(),o.vertexFrom=void 0,o.indexFrom=void 0,i.displayRecords[d]=o);const h=a.geometryType,p=l.displayList.getDPInfoType(),y=t.addOrUpdate.tileBufferData.geometries[h],c=y.vertexBuffer,n=y.indexBuffer;let f;e&&(f=e[p]?l.displayList.splitAfter(e[p]):-1),s=this._dispRecStore.setMeshData(o,a,c,n,f)&&s,e&&null!=o.indexFrom&&null!=o.indexFrom&&(e[p]=o)}}return s}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/MemoryRequirements.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class MemoryRequirements_e{constructor(){this._byGeometryType=null}get satisfied(){return!this._byGeometryType}reset(){this._byGeometryType=null}verticesFor(e){return this._byGeometryType?this._byGeometryType[e].vertices:0}indicesFor(e){return this._byGeometryType?this._byGeometryType[e].indices:0}needMore(e,t,i){if(!t&&!i)return;this._byGeometryType||(this._byGeometryType=[{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0},{vertices:0,indices:0}]);const s=this._byGeometryType[e];s.vertices+=t,s.indices+=i}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TileBufferData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r=5;class TileBufferData_f{constructor(){this.geometries=[{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}},{indexBuffer:void 0,vertexBuffer:{}}]}clone(){const e=new TileBufferData_f;for(let r=0;r<this.geometries.length;r++){const f=this.geometries[r],t=e.geometries[r];t.indexBuffer=f.indexBuffer.slice(),t.vertexBuffer={};for(const e in f.vertexBuffer){const{data:r,stride:i}=f.vertexBuffer[e];t.vertexBuffer[e]={data:r.slice(),stride:i}}}return e}static deserialize(t){const i=new TileBufferData_f;for(let f=0;f<r;++f){i.geometries[f].indexBuffer=new Uint32Array(t.geometries[f].indexBuffer),i.geometries[f].vertexBuffer={};for(const r in t.geometries[f].vertexBuffer)i.geometries[f].vertexBuffer[r]={data:(0,Utils/* allocateTypedArrayBufferwithData */.Jg)(t.geometries[f].vertexBuffer[r].data,t.geometries[f].vertexBuffer[r].stride),stride:t.geometries[f].vertexBuffer[r].stride}}return i}serialize(){const e={geometries:[{indexBuffer:this.geometries[0].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[1].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[2].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[3].indexBuffer.buffer,vertexBuffer:{}},{indexBuffer:this.geometries[4].indexBuffer.buffer,vertexBuffer:{}}]};for(let f=0;f<r;++f)for(const r in this.geometries[f].vertexBuffer)e.geometries[f].vertexBuffer[r]={data:this.geometries[f].vertexBuffer[r].data.buffer,stride:this.geometries[f].vertexBuffer[r].stride};return e}getBuffers(){const e=[];for(let f=0;f<r;++f){e.push(this.geometries[f].indexBuffer.buffer);for(const r in this.geometries[f].vertexBuffer)e.push(this.geometries[f].vertexBuffer[r].data.buffer)}return e}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js
var MaterialKey = __webpack_require__(59601);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/GraphicDisplayList.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function GraphicDisplayList_t(e,t,n,...o){t<e.length?e.splice(t,n,...o):e.push(...o)}class GraphicDisplayList_n{constructor(){this.symbolLevels=[]}replay(t,n,o){for(const i of this.symbolLevels)for(const r of i.zLevels){const i=r.geometryDPInfo.unified;if(i)for(const r of i){const{geometryType:i,materialKey:l,indexFrom:s,indexCount:m}=r,y=MaterialKey/* MaterialKeyBase */.ar.load(l).symbologyType,d=t.painter.getBrush(i,y),u={geometryType:i,materialKey:l,indexFrom:s,indexCount:m,target:n.getGeometry(i)};d.prepareState(t),d.drawGeometry(t,n,u,o)}}}get empty(){return!this.symbolLevels||0===this.symbolLevels.length}clear(){this.symbolLevels.length=0}addToList(e,t){if(Array.isArray(e))for(const n of e)this._addToList(n,t);else this._addToList(e,t)}removeFromList(e){Array.isArray(e)||(e=[e]);let t=null;for(const n of e)t=this._removeFromList(n);return t}clone(){const e=new GraphicDisplayList_n;for(const t of this.symbolLevels)e.symbolLevels.push(t.clone());return e}splitAfter(e){const t=this._getDisplayList(e.symbolLevel,e.zOrder),n=t.length,i=e.indexFrom+e.indexCount;for(let r=0;r<n;++r){const n=t[r];if(n.geometryType===e.geometryType&&i>n.indexFrom&&i<=n.indexFrom+n.indexCount){if(i<n.indexFrom+n.indexCount){const e=new GraphicDisplayList_o;e.geometryType=n.geometryType,e.materialKey=n.materialKey,e.indexFrom=i,e.indexCount=n.indexFrom+n.indexCount-i,t.splice(r+1,0,e),n.indexCount=i-n.indexFrom}return r}}}_addToList(e,n){const i=e.symbolLevel,r=e.zOrder,l=this._getDisplayList(i,r),s=null!=n?n:l.length-1,m=s>=0&&s<l.length?l[s]:null;if(null!==m&&m.materialKey===e.materialKey&&m.indexFrom+m.indexCount===e.indexFrom&&m.geometryType===e.geometryType)m.indexCount+=e.indexCount;else{const n=new GraphicDisplayList_o;n.indexFrom=e.indexFrom,n.indexCount=e.indexCount,n.materialKey=e.materialKey,n.geometryType=e.geometryType,GraphicDisplayList_t(l,s+1,0,n)}}_removeFromList(e){const n=e.symbolLevel,i=e.zOrder,r=this._getDisplayList(n,i),l=r.length;let s;for(let t=0;t<l;++t){const n=r[t];if(e.indexFrom+e.indexCount>n.indexFrom&&e.indexFrom<n.indexFrom+n.indexCount&&n.geometryType===e.geometryType){s=t;break}}if(void 0!==s){const n=r[s];if(e.indexFrom===n.indexFrom)return n.indexCount-=e.indexCount,n.indexFrom+=e.indexCount,0===n.indexCount&&GraphicDisplayList_t(r,s,1),s-1;if(e.indexFrom+e.indexCount===n.indexFrom+n.indexCount)return n.indexCount-=e.indexCount,0===n.indexCount?(GraphicDisplayList_t(r,s,1),s-1):s;{const i=n.indexFrom,l=e.indexFrom-n.indexFrom,m=e.indexCount,y=n.indexFrom+n.indexCount-(e.indexFrom+e.indexCount);n.indexCount=l;const d=new GraphicDisplayList_o;return d.geometryType=n.geometryType,d.materialKey=n.materialKey,d.indexFrom=i+l+m,d.indexCount=y,GraphicDisplayList_t(r,s+1,0,d),s}}return null}_getDisplayList(e,t){let n;const o=this.symbolLevels.length;for(let i=0;i<o;i++)if(this.symbolLevels[i].symbolLevel===e){n=this.symbolLevels[i];break}let s;n||(n=new l,n.symbolLevel=e,this.symbolLevels.push(n));const m=n.zLevels.length;for(let i=0;i<m;i++)if(n.zLevels[i].zLevel===t){s=n.zLevels[i];break}return s||(s=new GraphicDisplayList_r,s.geometryDPInfo=new i,s.zLevel=t,n.zLevels.push(s)),s.geometryDPInfo.unified||(s.geometryDPInfo.unified=[]),s.geometryDPInfo.unified}getDPInfoType(){return"unified"}}class GraphicDisplayList_o{constructor(){this.materialKey=null,this.indexFrom=0,this.indexCount=0}clone(){const e=new GraphicDisplayList_o;return e.geometryType=this.geometryType,e.materialKey=this.materialKey,e.indexFrom=this.indexFrom,e.indexCount=this.indexCount,e}}class i{constructor(){this.fill=null,this.line=null,this.marker=null,this.text=null,this.label=null,this.unified=null}clone(){const e=new i;return e.fill=this.fill&&this.fill.map((e=>e.clone())),e.line=this.line&&this.line.map((e=>e.clone())),e.marker=this.marker&&this.marker.map((e=>e.clone())),e.text=this.text&&this.text.map((e=>e.clone())),e.label=this.label&&this.label.map((e=>e.clone())),e.unified=this.unified&&this.unified.map((e=>e.clone())),e}}class GraphicDisplayList_r{constructor(){this.geometryDPInfo=new i}clone(){const e=new GraphicDisplayList_r;return e.zLevel=this.zLevel,e.geometryDPInfo=this.geometryDPInfo.clone(),e}}class l{constructor(){this.zLevels=[]}clone(){const e=new l;e.symbolLevel=this.symbolLevel;for(const t of this.zLevels)e.zLevels.push(t.clone());return e}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/MeshData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class MeshData_t{constructor(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}clear(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]}update(t,e,a){for(const s in t)this.vertexData.set(s,t[s]);for(const s in this.vertexData)null===t[s]&&this.vertexData.delete(s);this.vertexCount=e,this.indexData=a}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLDisplayRecord_s{constructor(t,e,s,i=0,r=0){this.id=t,this.geometryType=e,this.materialKey=s,this.minZoom=i,this.maxZoom=r,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0,this._sortKey=null}get sortKey(){return null==this._sortKey&&this._computeSortKey(),this._sortKey}clone(){return this.copy()}copy(){const t=new WGLDisplayRecord_s(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t}setMeshDataFromBuffers(s,i,r){const o=new MeshData_t;for(const t in i){const r=i[t].stride,a=i[t].data;if(!a)continue;const h=[],n=(0,Utils/* strideToPackingFactor */.vq)(r);for(let t=0;t<r*s.vertexCount/n;++t)h[t]=a[t+r*s.vertexFrom/n];o.vertexData.set(t,h)}o.indexData.length=0;for(let t=0;t<s.indexCount;++t)o.indexData[t]=r[t+s.indexFrom]-s.vertexFrom;o.vertexCount=s.vertexCount,this.meshData=o}readMeshDataFromBuffers(s,i){this.meshData?this.meshData.clear():this.meshData=new MeshData_t;for(const t in s){const i=s[t].stride,r=s[t].data,o=[],a=(0,Utils/* strideToPackingFactor */.vq)(i);for(let t=0;t<i*this.vertexCount/a;++t)o[t]=r[t+i*this.vertexFrom/a];this.meshData.vertexData.set(t,o)}this.meshData.indexData.length=0;for(let t=0;t<this.indexCount;++t)this.meshData.indexData[t]=i[t+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount}writeMeshDataToBuffers(t,s,i,r){if(this.meshData){for(const i in s){const r=s[i].stride,o=this.meshData.vertexData.get(i),a=s[i].data,h=(0,Utils/* strideToPackingFactor */.vq)(r);for(let e=0;e<r*this.meshData.vertexCount/h;++e)a[e+r*t/h]=o[e]}for(let e=0;e<this.meshData.indexData.length;++e)r[e+i]=this.meshData.indexData[e]+t;this.vertexFrom=t,this.vertexCount=this.meshData.vertexCount,this.indexFrom=i,this.indexCount=this.meshData.indexData.length}}static writeAllMeshDataToBuffers(t,e,s){let i=0,r=0;for(const o of t)o.writeMeshDataToBuffers(i,e,r,s),i+=o.vertexCount,r+=o.indexCount}_computeSortKey(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType}serialize(t){return t.push(this.geometryType),t.push(this.materialKey),t.push(this.vertexFrom),t.push(this.vertexCount),t.push(this.indexFrom),t.push(this.indexCount),t.push(this.minZoom),t.push(this.maxZoom),t}static deserialize(t,e){const i=t.readInt32(),r=t.readInt32(),o=new WGLDisplayRecord_s(e.id,i,r);return o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function serializationUtils_e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function serializationUtils_n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let i=0;i<o.length;i++)o[i]=n.deserialize(e,r);return o}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayObject.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class WGLDisplayObject_e{constructor(s){this.insertAfter=null,this.id=s,this.displayRecords=[]}copy(){const s=new WGLDisplayObject_e(this.id);return s.set(this),s}clone(){const s=new WGLDisplayObject_e(this.id);return s.displayRecords=this.displayRecords.map((s=>s.clone())),s.insertAfter=this.insertAfter,s}set(s){this.id=s.id,this.displayRecords=s.displayRecords,this.insertAfter=s.insertAfter}serialize(s){return s.push(this.id),serializationUtils_e(s,this.displayRecords),s}static deserialize(i){const r=i.readInt32(),d=new WGLDisplayObject_e(r),o={id:r};return d.displayRecords=serializationUtils_n(i,WGLDisplayRecord_s,o)??[],d}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TileDisplayData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class TileDisplayData_e{constructor(){this.displayObjects=[],this._displayList=null}get displayObjectRegistry(){if(!this._displayObjectRegistry){this._displayObjectRegistry=new Map;for(const s of this.displayObjects)this._displayObjectRegistry.set(s.id,s)}return this._displayObjectRegistry}get displayList(){return this._displayList}computeDisplayList(){this._displayList=new GraphicDisplayList_n;for(const s of this.displayObjects)for(const t of s.displayRecords)this._displayList.addToList(t)}clone(){const s=new TileDisplayData_e;return this.displayObjects&&(s.displayObjects=this.displayObjects.map((s=>s.clone()))),s}serialize(s){return serializationUtils_e(s,this.displayObjects),s}_deserializeObjects(s){const i=s.readInt32(),e=new Array(i),a=new Map;for(let l=0;l<e.length;++l){const i=WGLDisplayObject_e.deserialize(s);e[l]=i,a.set(i.id,i)}this.displayObjects=e,this._displayList=null,this._displayObjectRegistry=a}static deserialize(s){const t=new TileDisplayData_e;return t._deserializeObjects(s),t}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/DisplayRecordReader.js
var DisplayRecordReader = __webpack_require__(9072);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexBuffer.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class VertexBuffer_t{constructor(e,t){this.data=e,this.stride=t}static decode(r){const s=(0,Utils/* allocateTypedArrayBufferwithData */.Jg)(r.data,r.stride),n=r.stride;return new VertexBuffer_t(s,n)}static fromVertexVector(r){const s=(0,Utils/* allocateTypedArrayBufferwithData */.Jg)(r.data.buffer(),r.stride),n=r.stride;return new VertexBuffer_t(s,n)}}class VertexBuffer_r{constructor(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}static decode(e){const s=e.geometryType,n=e.indexBuffer,o={};for(const r in e.namedBuffers)o[r]=VertexBuffer_t.decode(e.namedBuffers[r]);return new VertexBuffer_r(s,n,o)}static fromVertexData(s,n){const o=s.indices,c=(0,Utils/* allocateTypedArrayBufferwithData */.Jg)(s.vertices,s.stride),i=s.stride,d={geometry:new VertexBuffer_t(c,i)};return new VertexBuffer_r(n,o,d)}static fromVertexVectors(e){const s=e.geometryType,n=e.indexVector.buffer(),o={};let c;for(c in e.namedVectors)o[c]=VertexBuffer_t.fromVertexVector(e.namedVectors[c]);return new VertexBuffer_r(s,n,o)}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js
var Writer = __webpack_require__(38604);
;// ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexVector.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class VertexVector_s{get vertexCount(){const t=this.stride/4,e=this.data.length/t;return e!==(0|e)&&console.debug("Corrupted stride"),e}constructor(t,e){this.data=t,this.stride=e}transfer(t,e){const r=this.data.buffer();t.vertexCount=this.vertexCount,t.data=r,t.stride=this.stride,e.push(r)}}class VertexVector_o{constructor(e,o,n){this.geometryType=e,this.indexVector=new Writer/* default */.A(Uint32Array,6*o),this.namedVectors={};const i=(0,Utils/* getStrides */.jG)(e,n);for(const t in i){const e=i[t];let n;switch(e%4){case 0:case 2:n=new Writer/* default */.A(Uint32Array,e*o);break;case 1:case 3:n=new Writer/* default */.A(Uint8Array,e*o)}this.namedVectors[t]=new VertexVector_s(n,e)}}get(t){return this.namedVectors[t].data}getVector(t){return this.namedVectors[t]}transfer(t,e){const r=this.indexVector.buffer(),s={};let o;for(o in e.push(r),this.namedVectors){const t=this.namedVectors[o];s[o]={},t.transfer(s[o],e)}t.geometryType=this.geometryType,t.indexBuffer=r,t.namedBuffers=s,this.destroy()}intoBuffers(){const t=VertexBuffer_r.fromVertexVectors(this);return this.destroy(),t}destroy(){this.indexVector=null,this.namedVectors=null}}

;// ../node_modules/@arcgis/core/views/2d/engine/webgl/TileData.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const TileData_d=new MemoryRequirements_e,p=new MemoryRequirements_e,D=5;function h(e,t){const r={};for(const s in e){const i={data:(0,Utils/* allocateTypedArrayBuffer */.NM)(t,e[s]),stride:e[s]};r[s]=i}return r}function x(e){return[e.fill||{},e.line||{},e.icon||{},e.text||{},e.label||{}]}function y(e){const t=[[],[],[],[],[]],r=e;for(const s of r)for(const e of s.displayRecords)t[e.geometryType].push(e);return t}class B{constructor(){this.tileDisplayData=null,this.tileBufferData=null}reshuffle(){if(TileData_d.reset(),!this.tileDisplayData)return;const t=y(this.tileDisplayData.displayObjects);for(const e of t)for(const t of e)t&&TileData_d.needMore(t.geometryType,t.meshData?t.meshData.vertexCount:t.vertexCount,t.meshData?t.meshData.indexData.length:t.indexCount);const r=t.length,i=new TileBufferData_f;for(let s=0;s<r;++s){i.geometries[s].indexBuffer=new Uint32Array(Math.round(arrayUtils/* ReallocGrowthFactor */.Hl*TileData_d.indicesFor(s)));const t=[],r=this.tileBufferData?.geometries[s].vertexBuffer;if(!r)continue;for(const e in r)t.push(r[e].stride);const a=B._computeVertexAlignment(t),n=Math.round(arrayUtils/* ReallocGrowthFactor */.Hl*TileData_d.verticesFor(s)),f=B._align(n,a);for(const e in r){const t=r[e].stride;i.geometries[s].vertexBuffer[e]={stride:t,data:(0,Utils/* allocateTypedArrayBuffer */.NM)(f,t)}}}p.reset(),this.tileDisplayData.displayList?.clear();for(let e=0;e<r;++e){const r=t[e];for(const t of r){if(t.meshData)t.writeMeshDataToBuffers(p.verticesFor(e),i.geometries[e].vertexBuffer,p.indicesFor(e),i.geometries[e].indexBuffer),t.meshData=null;else{const r=this.tileBufferData?.geometries[e];if(r){const s=r.vertexBuffer,o=r.indexBuffer,n=i.geometries[e].vertexBuffer,f=i.geometries[e].indexBuffer,l=p.verticesFor(e),u=p.indicesFor(e);(0,Utils/* copyMeshData */.Hp)(l,u,n,f,t,s,o),t.vertexFrom=l,t.indexFrom=u}}p.needMore(e,t.vertexCount,t.indexCount)}}const{displayList:n,displayObjects:f}=this.tileDisplayData;if(n)for(const e of f)n.addToList(e.displayRecords);this.tileBufferData=i}getStrides(){const e=[],t=this.tileBufferData?.geometries;if(!t)return e;for(let r=0;r<t.length;++r){const s=t[r];e[r]={};for(const t in s.vertexBuffer)e[r][t]=s.vertexBuffer[t].stride}return e}clone(){const e=new B;return e.tileBufferData=this.tileBufferData?.clone()??null,e.tileDisplayData=this.tileDisplayData?.clone()??null,e}_guessSize(){const e=this.tileDisplayData?.displayObjects??[],t=Math.min(e.length,4),r=12,s=40;let i=0;for(let o=0;o<t;o++)i=Math.max(i,e[o].displayRecords.length);return 2*(e.length*r+e.length*i*s)}serialize(){const e=this.tileBufferData.serialize(),t=this.tileBufferData.getBuffers(),r=this.tileDisplayData.serialize(new Writer/* default */.A(Int32Array,this._guessSize())).buffer();return t.push(r),{result:{displayData:r,bufferData:e},transferList:t}}static fromVertexData(e,r){const s={},i=new Map;for(const t of r)i.set(t.id,t);return (0,Utils/* forEachGeometryType */.Th)((r=>{const o=e.data[r];if(null!=o){const e=DisplayRecordReader/* DisplayRecordReader */.z.from(o.records).getCursor();for(;e.next();){const t=e.id,s=e.materialKey,o=e.indexFrom,a=e.indexCount,n=e.vertexFrom,l=e.vertexCount,u=i.get(t),c=new WGLDisplayRecord_s(t,r,s);c.indexFrom=o,c.indexCount=a,c.vertexFrom=n,c.vertexCount=l,u.displayRecords.push(c)}s[r]=VertexBuffer_r.fromVertexData(o,r)}else s[r]=new VertexVector_o(r,0,enums/* WGLSymbologyType */.w4.DEFAULT).intoBuffers()})),B.fromMeshData({displayObjects:r,vertexBuffersMap:s})}static fromMeshData(e){const t=new B,r=new TileDisplayData_e,o=new TileBufferData_f;r.displayObjects=e.displayObjects;for(const s in e.vertexBuffersMap){const t=s,r=e.vertexBuffersMap[t];o.geometries[t].indexBuffer=r.indexBuffer,o.geometries[t].vertexBuffer=r.namedBuffers}return t.tileDisplayData=r,t.tileBufferData=o,t}static bind(e,t){const r=new B;return r.tileDisplayData=e,r.tileBufferData=t,r}static create(e,t){const r=new B;r.tileDisplayData=new TileDisplayData_e,r.tileDisplayData.displayObjects=e;const o=[0,0,0,0,0],a=[0,0,0,0,0],n=[[],[],[],[],[]];for(const s of e)for(const e of s.displayRecords)n[e.geometryType].push(e),o[e.geometryType]+=e.meshData.vertexCount,a[e.geometryType]+=e.meshData.indexData.length;const l=new TileBufferData_f,u=x(t);for(let s=0;s<D;s++){const e=new Uint32Array(a[s]),t=h(u[s],o[s]);WGLDisplayRecord_s.writeAllMeshDataToBuffers(n[s],t,e),l.geometries[s]={indexBuffer:e,vertexBuffer:t}}return r.tileBufferData=l,r}static _align(e,t){const r=e%t;return 0===r?e:e+(t-r)}static _computeVertexAlignment(e){let t=!1,r=!1;for(const s of e)s%4==2?t=!0:s%4!=0&&(r=!0);return r?4:t?2:1}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js + 2 modules
var MeshData = __webpack_require__(82547);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/factories/WGLMeshFactory.js + 2 modules
var WGLMeshFactory = __webpack_require__(23951);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLTemplateStore.js + 12 modules
var WGLTemplateStore = __webpack_require__(32964);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/util/Matcher.js
var Matcher = __webpack_require__(9725);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js + 2 modules
var schemaUtils = __webpack_require__(93421);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js
var AttributeStore = __webpack_require__(66753);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js + 1 modules
var ComputedAttributeStorage = __webpack_require__(16816);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js
var featureConversionUtils = __webpack_require__(21355);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js
var FeatureSetReader = __webpack_require__(42549);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js
var FeatureSetReaderJSON = __webpack_require__(51747);
;// ../node_modules/@arcgis/core/views/2d/layers/features/support/GraphicsReader.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class GraphicsReader_o extends FeatureSetReaderJSON/* FeatureSetReaderJSON */.K{static from(s,n,i){const c=FeatureSetReader/* FeatureSetReader */.Y.createInstance(),u=[],a=s.filter((r=>!!r.geometry));for(const e of a){const s=(0,jsonUtils/* getJsonType */.$B)(e.geometry);(0,featureConversionUtils/* convertFromGraphics */.X9)(u,[e],s,!1,!1,n)}return new GraphicsReader_o(c,u,i)}constructor(r,t,e){super(r,t,null),this._transform=e}get geometryType(){const r=this._current;return r?r.geometryType:null}get insertAfter(){return this._current.insertAfter}readGraphic(){return this._current}getCursor(){return this.copy()}copy(){const r=new GraphicsReader_o(this.instance,this._features,this._transform);return this.copyInto(r),r}}

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/screenUtils.js
var screenUtils = __webpack_require__(89882);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/rbush.js
var rbush = __webpack_require__(73030);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/boundsUtils.js
var boundsUtils = __webpack_require__(36358);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/normalizeUtils.js + 2 modules
var normalizeUtils = __webpack_require__(65231);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/CIMSymbolDrawHelper.js + 2 modules
var CIMSymbolDrawHelper = __webpack_require__(48655);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/centroid.js
var centroid = __webpack_require__(23806);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/geometry/support/quantizationUtils.js
var quantizationUtils = __webpack_require__(20698);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js
var OptimizedGeometry = __webpack_require__(88443);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStoreItem.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const GraphicStoreItem_p=new OptimizedGeometry/* default */.A,GraphicStoreItem_y=new OptimizedGeometry/* default */.A,g="esriGeometryPolyline";function f(t){t.coords.length=0,t.lengths.length=0}class GraphicStoreItem_d{constructor(){this.bounds=(0,aaBoundingRect/* create */.vt)(),this.graphic=null}static acquire(t=null,e,s,r,i){let o;return 0===GraphicStoreItem_d._pool.length?o=new GraphicStoreItem_d:(o=GraphicStoreItem_d._pool.pop(),this._set.delete(o)),o.acquire(t,e,s,r,i),o}static release(t){t&&!this._set.has(t)&&(t.release(),this._pool.push(t),this._set.add(t))}static getCentroidQuantized(t,e){if((0,jsonUtils/* isPolygon */.Bi)(t.geometry)){const r=t.symbol;if(null==r)return null;if(r?.layers.length>0&&r.layers.some((t=>"text"===t.type||"marker"===t.type))){const r=(0,centroid/* polygonCentroid */.l8)(t.geometry);return null!==r?(0,quantizationUtils/* quantizePoint */.Gy)(e,{},{x:r[0],y:r[1]},!1,!1):null}}return null}acquire(t=null,e,s,r,i){t&&this.set(t,e,s,r,i)}release(){this.graphic=null,this.symbolResource=null,this.geometry=null}get symbol(){return this.symbolResource.symbol}set(t,e,s,r,i){this.graphic=t,this.geometry=s,this.symbolResource=e,this.bounds=r,i&&(this.size=i)}getGeometryQuantized(t,s,r,o){const c=this.geometry,d=(0,jsonUtils/* getJsonType */.$B)(c);if(null==d)return null;switch(d){case"esriGeometryPolygon":{const e=c,{rings:s}=e;if(!s||0===s.length)return null;let r;if(r=1===s.length&&2===s[0].length?(0,quantizationUtils/* quantizeGeometry */.qj)(t,{paths:[[s[0][0],s[0][1]]]}):(0,quantizationUtils/* quantizeGeometry */.qj)(t,this.geometry),!r){const e={x:s[0][0][0],y:s[0][0][1]};if(r=(0,quantizationUtils/* quantizeGeometry */.qj)(t,e),r){const{x:t,y:e}=r;return{rings:[[[t-1,e],[1,-1],[1,1],[-1,1],[-1,-1]]]}}}return r}case"esriGeometryPolyline":{const e=c;f(GraphicStoreItem_p),f(GraphicStoreItem_y);const s=e.hasZ??!1,r=e.hasM??!1;return (0,featureConversionUtils/* convertFromPolyline */.Ap)(GraphicStoreItem_p,e),(0,featureConversionUtils/* generalizeOptimizedGeometry */.kz)(GraphicStoreItem_y,GraphicStoreItem_p,s,r,g,t.scale[0]),(0,featureConversionUtils/* quantizeOptimizedGeometry */.Nl)(GraphicStoreItem_p,GraphicStoreItem_y,s,r,g,t),(0,featureConversionUtils/* convertToPolyline */.BW)(GraphicStoreItem_p,e.hasZ??!1,e.hasM??!1)}case"esriGeometryMultipoint":{const i=c,u=.5*o*Math.max(Math.abs(this.size[0])+this.size[2]-this.size[0],Math.abs(this.size[1])+this.size[3]-this.size[1]),h=(0,spatialReferenceUtils/* getInfo */.Vp)(r);let a=i.points;if(h){const[t,r]=h.valid,i=r-t;a=a.filter((o=>{if(o[0]+u>r||o[0]-u<t){const t=[...o];return o[0]+u>r?t[0]-=i:t[0]+=i,(0,aaBoundingRect/* containsPointWithMargin */.k$)(s,o,u)||(0,aaBoundingRect/* containsPointWithMargin */.k$)(s,t,u)}return (0,aaBoundingRect/* containsPointWithMargin */.k$)(s,o,u)}))}return 0===a.length?{points:a}:(0,quantizationUtils/* quantizeGeometry */.qj)(t,{points:a})}}return (0,quantizationUtils/* quantizeGeometry */.qj)(t,this.geometry)}}GraphicStoreItem_d._pool=[],GraphicStoreItem_d._set=new Set;

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/graphics/graphicsUtils.js
var graphicsUtils = __webpack_require__(98502);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicStore.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const m={minX:0,minY:0,maxX:0,maxY:0},GraphicStore_p=(0,aaBoundingRect/* create */.vt)(),GraphicStore_g=1e-5;function GraphicStore_f(e,t,i,r,s){return m.minX=t,m.minY=i,m.maxX=r,m.maxY=s,e.search(m)}function _(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}class b{constructor(e,i,r,s,o,n,l){this._graphics=s,this._onAdd=o,this._onRemove=n,this._hashToCIM=l,this._index=(0,rbush.r)(9,_),this._itemByGraphic=new Map,this._inflatedSizeHelper=new CIMSymbolHelper/* CIMSymbolInflatedSizeHelper */.Sc,this._tileInfoView=e,this._uidFieldName=r;const u=e.getClosestInfoForScale(i);u&&(this._resolution=this._tileInfoView.getTileResolution(u.level))}setResourceManager(e){this._cimResourceManager=e,this._hittestDrawHelper=new CIMSymbolDrawHelper/* HittestDrawHelper */.CK(e)}hitTest(e,t,s,o,l){e=(0,normalizeUtils/* normalizeMapX */.mT)(e,this._tileInfoView.spatialReference);const u=.5*o*window.devicePixelRatio*s;GraphicStore_p[0]=e-u,GraphicStore_p[1]=t-u,GraphicStore_p[2]=e+u,GraphicStore_p[3]=t+u;const h=.5*o*(s+graphicsUtils/* pixelBuffer */.RA),a=GraphicStore_f(this._index,e-h,t-h,e+h,t+h);if(!a||0===a.length)return[];const d=[],m=(0,aaBoundingRect/* create */.vt)(),g=(0,aaBoundingRect/* create */.vt)();for(const i of a){const{geometry:e,symbolResource:t}=i;this._getSymbolBounds(m,t,e,g,l),g[3]=g[2]=g[1]=g[0]=0,(0,aaBoundingRect/* intersects */.HY)(m,GraphicStore_p)&&i.graphic?.visible&&d.push(i)}if(0===d.length)return[];const _=this._hittestDrawHelper,b=[];for(const i of d){const{geometry:e,symbolResource:t}=i,{hash:r,textInfo:s}=t,n=this._hashToCIM.get(r);n&&(_.hitTest(GraphicStore_p,n.symbol,e,s,l,o)&&b.push(i))}return b.sort(GraphicStore_y),b.map((e=>e.graphic))}getGraphicsData(e,t,i){const r=this._searchForItems(t);if(0===r.length||0===i.length)return[];r.sort(((e,t)=>e.zorder-t.zorder)),r[0].insertAfter=-1;for(let a=1;a<r.length;a++)r[a].insertAfter=r[a-1].graphic.uid;r.sort(((e,t)=>e.graphic.uid-t.graphic.uid)),i.sort(((e,t)=>e.uid-t.uid));let s,o=0,n=0;const l=t.resolution,u=[],h={originPosition:"upperLeft",scale:[l,l],translate:[t.bounds[0],t.bounds[3]]};for(const c of i){for(n=-2;o<r.length;)if(s=r[o],o++,c.uid===s.graphic.uid){n=s.insertAfter;break}if(!s?.geometry||-2===n)continue;const i=s.getGeometryQuantized(h,t.bounds,this._tileInfoView.spatialReference,l),d={...s.graphic.attributes};d[this._uidFieldName]=c.uid,null==s.groupId&&(s.groupId=e.createTemplateGroup(s.symbol,null)),u.push({centroid:GraphicStoreItem_d.getCentroidQuantized(s,h),geometry:i,attributes:d,symbol:s.symbol,groupId:s.groupId,insertAfter:n,zorder:s.zorder})}return u.sort(((e,t)=>e.zorder-t.zorder)),u}queryTileData(e,t){if(0===this._graphics.length)return[];const{bounds:i,resolution:r}=t,s=this._searchForItems(t),o=[];return 0===s.length||this._createTileGraphics(o,e,s,{originPosition:"upperLeft",scale:[r,r],translate:[i[0],i[3]]},t),o}has(e){return this._itemByGraphic.has(e)}getBounds(e){const t=this._itemByGraphic.get(e);return t?t.bounds:null}getAllBounds(){return Array.from(this._itemByGraphic.values()).filter((e=>e.graphic.visible)).map((e=>e.bounds))}addOrModify(e,t,i){if(!e||null==t)return;this.has(e)&&this.remove(e),this._onAdd(e);const r=[0,0,0,0],s=this._getSymbolBounds(null,t,i,r,0),o=GraphicStoreItem_d.acquire(e,t,i,null!=s?s:null,r);return this._itemByGraphic.set(e,o),i&&this._index.insert(o),o.bounds}remove(e){if(!this._itemByGraphic.has(e))return;this._onRemove(e);const t=this._itemByGraphic.get(e);t?.bounds&&this._index.remove(t),this._itemByGraphic.delete(e)}updateZ(){const e=this._graphics.items;let t,i;for(let r=0;r<e.length;r++)i=e[r],t=this._itemByGraphic.get(i),t&&(t.zorder=r)}update(e,t,i){const r=this._itemByGraphic.get(e);r.groupId=null;const o=(0,aaBoundingRect/* clone */.o8)(r.bounds);this._index.remove(r);const n=this._getSymbolBounds(r.bounds,t,i,r.size,0);return null!=n&&r.set(e,t,i,n,r.size),i&&this._index.insert(r),{oldBounds:o,newBounds:r.bounds}}updateLevel(e){if(this._resolution===e)return;this._resolution=e,this._index.clear();const t=this._itemByGraphic,i=[];for(const[r,s]of t){const e=this._getSymbolBounds(s.bounds,s.symbolResource,s.geometry,s.size,0);s.geometry&&null!=e&&(s.bounds=e,i.push(s))}this._index.load(i)}clear(){this._itemByGraphic.clear(),this._index.clear()}_createTileGraphics(e,t,i,r,s){const o=this._uidFieldName,n=this._tileInfoView.spatialReference,{bounds:l,resolution:u}=s;let h,c,d,m;i.sort(((e,t)=>e.zorder-t.zorder));for(let p=0;p<i.length;p++){d=i[p],h=d.graphic,c=d.getGeometryQuantized(r,l,n,u),m=0===p?-1:i[p-1].graphic.uid;const s={...d.graphic.attributes};s[o]=h.uid,null==d.groupId&&(d.groupId=t.createTemplateGroup(d.symbol,null)),e.push({centroid:GraphicStoreItem_d.getCentroidQuantized(d,r),geometry:c,attributes:s,symbol:d.symbol,groupId:d.groupId,insertAfter:m,zorder:d.zorder})}}_searchForItems(e){const t=this._tileInfoView.spatialReference,r=e.bounds,s=(0,spatialReferenceUtils/* getInfo */.Vp)(t);if(s&&t.isWrappable){const[t,o]=s.valid,n=Math.abs(r[2]-o)<GraphicStore_g,l=Math.abs(r[0]-t)<GraphicStore_g;if((!n||!l)&&(n||l)){const s=e.resolution;let l;l=(0,aaBoundingRect/* create */.vt)(n?[t,r[1],t+s*graphicsUtils/* pixelBuffer */.RA,r[3]]:[o-s*graphicsUtils/* pixelBuffer */.RA,r[1],o,r[3]]);const u=GraphicStore_f(this._index,r[0],r[1],r[2],r[3]),h=GraphicStore_f(this._index,l[0],l[1],l[2],l[3]);return[...new Set([...u,...h])]}}return GraphicStore_f(this._index,r[0],r[1],r[2],r[3])}_getSymbolBounds(t,r,s,n,l){if(!r||!r.symbol||!s)return null;if(t||(t=(0,aaBoundingRect/* create */.vt)()),(0,boundsUtils/* getBoundsXY */.Rg)(t,s),!n||0===n[0]&&0===n[1]&&0===n[2]&&0===n[3]){const{hash:t,textInfo:i}=r,s=this._hashToCIM.get(t);if(!s)return null;n||(n=[0,0,0,0]);const o=this._inflatedSizeHelper.getSymbolInflateSize(n,s.symbol,this._cimResourceManager,l,i);n[0]=(0,screenUtils/* pt2px */.Lz)(o[0]),n[1]=(0,screenUtils/* pt2px */.Lz)(o[1]),n[2]=(0,screenUtils/* pt2px */.Lz)(o[2]),n[3]=(0,screenUtils/* pt2px */.Lz)(o[3])}const u=this._resolution,a=CIMSymbolHelper/* CIMSymbolInflatedSizeHelper */.Sc.safeSize(n);return t[0]-=a*u,t[1]-=a*u,t[2]+=a*u,t[3]+=a*u,t}}const GraphicStore_y=(e,t)=>{const i=(0,graphicsUtils/* graphicGeometryToNumber */.NF)(e.graphic),r=(0,graphicsUtils/* graphicGeometryToNumber */.NF)(t.graphic);return i===r?t.zorder-e.zorder:i-r};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js + 1 modules
var cimSymbolUtils = __webpack_require__(7965);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/capabilities.js
var capabilities = __webpack_require__(75228);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/layers/features/createSymbolSchema.js
var createSymbolSchema = __webpack_require__(51879);
;// ../node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const te=(0,has/* default */.A)("esri-2d-graphic-debug");function ie(e,t,i){let s=i.get(e);return s||(s={tile:t,addedOrModified:[],removed:[]},i.set(e,s)),s}let se=class extends((0,Identifiable/* IdentifiableMixin */.sA)(Accessor/* default */.A)){constructor(e){super(e),this._storage=new ComputedAttributeStorage/* ComputedAttributeStorage */.l,this._displayIds=new Map,this._controller=new AbortController,this._tiles=new Map,this._graphicStoreUpdate=!1,this._graphicsSet=new Set,this._matcher=Promise.resolve(null),this._tileUpdateSet=new Set,this._tilesToUpdate=new Map,this._graphicIdToAbortController=new Map,this._attached=!1,this._updatingGraphicsTimer=null,this._hashToExpandedSymbol=new Map,this._hashToExpandedSymbolPromise=new Map,this._hashToCIMSymbolPromise=new Map,this._hashToCIM=new Map,this._processing=!1,this._needsProcessing=!1,this._pendingUpdate={added:new Set,updated:new Set,removed:new Set},this.lastUpdateId=-1,this.renderer=null,this.updateRequested=!1,this.defaultPointSymbolEnabled=!0,this.graphicUpdateHandler=this.graphicUpdateHandler.bind(this)}destroy(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange("updating")),this._controller.abort(),this.container.destroy(),this._set("graphics",null),this._graphicStore.clear(),this._attributeStore=null,this._hashToExpandedSymbol.clear(),this.view=null,this.renderer=null,this._hashToCIM.clear(),this._hashToCIMSymbolPromise.clear(),this._hashToExpandedSymbolPromise.clear()}_createMatcher(e,t,i){if(e){const s=(0,schemaUtils/* createSymbolSchemaOptions */.um)(e),r=(0,schemaUtils/* createMatcherSchema */.wu)({indexCount:0,fields:{}},"feature",e,s);this._matcher=(0,Matcher/* createMatcher */.P7)(r,t,null,i)}}_createDisplayId(e){let t=this._displayIds.get(e);return t||(t=this._storage.createDisplayId(),this._displayIds.set(e,t)),t}initialize(){this._attributeStore=new AttributeStore/* default */.A({type:"local",initialize:e=>Promise.resolve(this.container.attributeView.initialize(e)),update:e=>this.container.attributeView.requestUpdate(e),render:()=>this.container.requestRender()},(0,capabilities/* getWebGLCapabilities */.Cx)("2d")),this.container.checkHighlight=()=>this._attributeStore.hasHighlight;const e=e=>{this._createDisplayId(e.uid),this._setFilterState(e.uid,e.visible)},t=e=>{const t=this._displayIds.get(e.uid);this._displayIds.delete(e.uid),this._storage.releaseDisplayId(t)},i=new WGLTemplateStore/* WGLTemplateStore */._y(this.container.getMaterialItems.bind(this.container),this.view.featuresTilingScheme.tileInfo);this._graphicStore=new b(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,e,t,this._hashToCIM),this._meshFactory=new WGLMeshFactory/* WGLMeshFactory */.K(null,this.uid,i),this._templateStore=i,this.addHandles([(0,reactiveUtils/* watch */.wB)((()=>this._effectiveRenderer),(e=>{this._createMatcher(e,i,this.container.stage.resourceManager);for(const t of this.graphics)this._pendingUpdate.updated.add(t);this.requestUpdate()})),this.view.graphicsTileStore.on("update",this._onTileUpdate.bind(this)),this.container.on("attach",(()=>{te&&this.container.enableRenderingBounds((()=>this._graphicStore.getAllBounds())),this.graphics.items.length>0&&this._graphicsChangeHandler({target:this.graphics,added:this.graphics.items,removed:[],moved:[]}),this.addHandles(this.graphics.on("change",(e=>this._graphicsChangeHandler(e))),"graphics");const e=this.container.stage.resourceManager;this._createMatcher(this._effectiveRenderer,i,e),this._graphicStore.setResourceManager(e),this._attached=!0,this.notifyChange("updating")}))]);const s=this.view.graphicsTileStore.tiles;this._onTileUpdate({added:s,removed:[]})}get _effectiveRenderer(){return"function"==typeof this.renderer?this.renderer():this.renderer}get updating(){return!this._attached||null!==this._updatingGraphicsTimer||this._pendingUpdate.added.size>0||this._pendingUpdate.removed.size>0||this._pendingUpdate.updated.size>0||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0||this._attributeStore?.updatingHandles.updating||this._processing}hitTest(e){if(!this.view||this.view.suspended)return[];const{resolution:t,rotation:i}=this.view.state;return this._graphicStore.hitTest(e.x,e.y,2,t,i)}update(e){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const t=e.state,{resolution:i}=t;if(this._graphicStore.updateLevel(i),this._graphicStoreUpdate=!0,this.updateRequested=!1,this._pendingUpdate.updated.size>0){if(!this._processing)return void this._updateGraphics();this._needsProcessing=!0}}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.requestUpdateCallback())}processUpdate(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))}graphicUpdateHandler(e){const{graphic:t,property:i}=e;switch(i){case"attributes":case"geometry":case"symbol":this._pendingUpdate.updated.add(t),this.requestUpdate();break;case"visible":this._setFilterState(t.uid,t.visible),this._attributeStore.sendUpdates()}}setHighlight(e){const t=e.map((e=>this._displayIds.get(e))).filter(arrayUtils/* isSome */.Ru);this._attributeStore.setHighlight(e,t)}_getIntersectingTiles(e){const t=this._graphicStore.getBounds(e);if(!t||0===(0,aaBoundingRect/* width */.VL)(t)||0===(0,aaBoundingRect/* height */.uJ)(t))return[];const i=(0,graphicsUtils/* intersectingInternationalDateline */.aW)(t,this.view.spatialReference);return null!=i?[...new Set([...this.view.graphicsTileStore.boundsIntersections(i[0]),...this.view.graphicsTileStore.boundsIntersections(i[1])])]:this.view.graphicsTileStore.boundsIntersections(t)}async _updateTile(e){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const t=e.tile,i=this._getGraphicsData(this._templateStore,t,e.addedOrModified),s=await this._processGraphics(t,i);return (0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),this._patchTile(t.key,{type:"update",addOrUpdate:s,remove:e.removed,end:!0,clear:!1,sort:!1}),s}_patchTile(e,t){const i=this._tiles.get(e);i&&(this.container.onTileData(i,t),this.container.requestRender())}_graphicsChangeHandler(e){const t=this._pendingUpdate;for(const i of e.added)t.added.add(i);for(const i of e.moved)t.updated.add(i);for(const i of e.removed)this._pendingUpdate.added.has(i)?t.added.delete(i):t.removed.add(i);this._processing?this._needsProcessing=!0:this._updateGraphics()}_getGraphicsToUpdate(){const e={added:[],removed:[],updated:[]};if(!this.graphics)return e;const t=this._pendingUpdate;for(const i of this.graphics.items)t.added.has(i)?e.added.push(i):t.updated.has(i)&&e.updated.push(i);for(const i of t.removed)this._graphicStore.has(i)&&e.removed.push(i);return t.added.clear(),t.removed.clear(),t.updated.clear(),e}async _updateGraphics(){this._processing=!0;const{added:e,removed:t,updated:i}=this._getGraphicsToUpdate(),s=this._tilesToUpdate;let r;try{if(!this._graphicStoreUpdate){const e=this.view.state,{resolution:t}=e;this._graphicStore.updateLevel(t)}const o=[],a=new Array(e.length+t.length);for(let e=0;e<i.length;e++){const t=i[e],n=this._getIntersectingTiles(t);for(const e of n){r=e.id;ie(r,e,s).removed.push(this._displayIds.get(t.uid))}o.push(this._updateGraphic(t,null)),a[e]=t}const n=i.length;for(let t=0;t<e.length;t++){const i=e[t];a[n+t]=i,this._graphicsSet.add(i),o.push(this._addGraphic(i))}for(const e of t){this._abortProcessingGraphic(e.uid);const t=this._getIntersectingTiles(e);for(const i of t){r=i.id;ie(r,i,s).removed.push(this._displayIds.get(e.uid))}this._graphicsSet.delete(e),this._graphicStore.remove(e)}let h;this._flipUpdatingGraphics(),await Promise.all(o);for(let e=0;e<a.length;e++){h=a[e];const t=this._getIntersectingTiles(h);for(const e of t){r=e.id;ie(r,e,s).addedOrModified.push(h)}}this._graphicStore.updateZ();const l=[];for(const[e,t]of s)l.push(this._updateTile(t));await Promise.all(l)}catch(o){(0,promiseUtils/* isAbortError */.zf)(o),0}for(const a of t)try{const e=await this._getSymbolForGraphic(a,null);if(e){const t=e.hash();this._hashToExpandedSymbol.delete(t)}}catch(o){(0,promiseUtils/* isAbortError */.zf)(o),0}s.clear(),this.notifyChange("updating"),this._processing=!1,this._needsProcessing&&(this._needsProcessing=!1,this._updateGraphics())}_getArcadeInfo(e){const t=(e.attributes?Object.keys(e.attributes):[]).map((t=>({name:t,alias:t,type:"string"==typeof e.attributes[t]?"esriFieldTypeString":"esriFieldTypeDouble"})));return null==e.geometry?null:{geometryType:(0,jsonUtils/* getJsonType */.$B)(e.geometry),spatialReference:SpatialReference/* default */.A.fromJSON(e.geometry.spatialReference),fields:t}}_getSymbolForGraphic(e,t){return (0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),null!=e.symbol?Promise.resolve(e.symbol):null!=this._effectiveRenderer?this._effectiveRenderer.getSymbolAsync(e,{scale:this.view.state.scale,signal:null!=t?t.signal:null}):Promise.resolve(this._getNullSymbol(e))}_getCIMSymbol(e,t,i){let s=this._hashToCIM.get(t);if(s)return Promise.resolve(s);const r=(0,CIMSymbolHelper/* symbolToCIM */.Vb)(e);if(null!=r){if("CIMSymbolReference"===r.type)return s=r,this._hashToCIM.set(t,s),Promise.resolve(s);let e=this._hashToCIMSymbolPromise.get(t);return e||(e=r.fetchCIMSymbol(i).then((e=>(this._hashToCIM.set(t,e.data),this._hashToCIMSymbolPromise.delete(t),e))).catch((e=>(this._hashToCIMSymbolPromise.delete(t),(0,promiseUtils/* throwIfAbortError */.QP)(e),null))),this._hashToCIMSymbolPromise.set(t,e),e)}return Promise.resolve(null)}_expandCIMSymbol(e,t,i,s){const r=this._hashToExpandedSymbol.get(i);if(r)return Promise.resolve(r);let o=this._hashToExpandedSymbolPromise.get(i);if(o)return o;const a=this.container.stage,n=this._getArcadeInfo(t),h=(0,schemaUtils/* createSymbolSchemaOptions */.um)(null),l=(0,createSymbolSchema.createSymbolSchema)(e,h);return o=(0,cimSymbolUtils/* expandSymbol */.Z)(l,n,a.resourceManager,s),this._hashToExpandedSymbolPromise.set(i,o),o.then((e=>(this._hashToExpandedSymbol.set(i,e),this._hashToExpandedSymbolPromise.delete(i),e))),o}async _getSymbolResources(e,t){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);return this.container.stage?this._getSymbolForGraphic(e,t).then((i=>{if(!i)return null;const r=i.hash();return this._getCIMSymbol(i,r,t).then((a=>null==a?null:this._expandCIMSymbol(a,e,r,t).then((e=>{const t=e.layers.filter((e=>"text"===e.type&&"string"==typeof e.text));if(t&&t.length>0){const a=new Array(t.length);for(let e=0;e<t.length;e++){const r=t[e],o=[],[n]=(0,BidiText/* bidiText */.y)(r.text);r.text=n,"text"===i.type&&(r.lineWidth=i.lineWidth);for(let e=0;e<n.length;e++)o.push(n.charCodeAt(e));a[e]={symbol:r,id:e,glyphIds:o}}const n=new Map;return this.container.getMaterialItems(a).then((i=>{(0,maybe/* assertIsSome */.Lw)(i);for(let e=0;e<t.length;e++){const s=t[e];n.set(s.cim,{text:s.text,mosaicItem:i[e].mosaicItem})}return{symbol:e,textInfo:n,hash:r}}))}return{symbol:e,hash:r}}))))})).catch((e=>((0,promiseUtils/* throwIfAbortError */.QP)(e),null))):null}async _projectAndNormalizeGeometry(e,t){if((0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),null==e.geometry||"mesh"===e.geometry.type)return null;let i=e.geometry;if((0,jsonUtils/* isPolygon */.Bi)(i)){const e=i.rings;i.rings=e}else if((0,jsonUtils/* isPolyline */.Rg)(i)){const e=i.paths;i.paths=e}else if((0,jsonUtils/* isExtent */.ZC)(i)){const s=await this._getSymbolForGraphic(e,t);if((0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),s&&((0,graphicsUtils/* isMarkerSymbol */.hH)(s.type)||(0,graphicsUtils/* isTextSymbol */.Sb)(s.type))){i=i.center}else i=(0,graphicsUtils/* polygonFromExtent */.DF)(i)}await (0,projectionSupport/* checkProjectionSupport */.Nk)(i.spatialReference,this.view.spatialReference);const s=(0,normalizeUtilsSync/* normalizeCentralMeridianForDisplay */.b3)(i),r=(0,projectionSupport/* project */.Cv)(s,i.spatialReference,this.view.spatialReference);return r&&(0,coordsUtils/* closeRingsAndFixWinding */.uC)(r),r}_onTileUpdate(e){const t=(0,spatialReferenceUtils/* getInfo */.Vp)(this.view.spatialReference);if(e.added&&e.added.length>0)for(const i of e.added)this._addNewTile(i,t);if(e.removed&&e.removed.length>0)for(const i of e.removed)this._removeTile(i.key)}async _addGraphic(e){this._abortProcessingGraphic(e.uid),(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const t=new AbortController;this._graphicIdToAbortController.set(e.uid,t);const i={signal:t.signal};try{await this._addOrUpdateGraphic(e,i),(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),this._graphicIdToAbortController.delete(e.uid)}catch(s){if(this._graphicIdToAbortController.delete(e.uid),!(0,promiseUtils/* isAbortError */.zf)(s))throw s}}_updateGraphic(e,t){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const i=this._projectAndNormalizeGeometry(e,t),s=this._getSymbolResources(e,t);return Promise.all([i,s]).then((([t,i])=>{(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),this._graphicStore.addOrModify(e,i,t)}))}_addOrUpdateGraphic(e,t){(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal);const i=this._projectAndNormalizeGeometry(e,t),s=this._getSymbolResources(e,t);return Promise.all([i,s]).then((([t,i])=>{(0,promiseUtils/* throwIfAborted */.Te)(this._controller.signal),this._graphicsSet.has(e)&&this._graphicStore.addOrModify(e,i,t)}))}_addTile(e){const t=this.view.featuresTilingScheme.getTileBounds((0,aaBoundingRect/* create */.vt)(),e),i=this.view.featuresTilingScheme.getTileResolution(e.level),s=new a(e,i,t[0],t[3]);return this._tiles.set(e,s),this.container.addChild(s),s}async _addNewTile(e,t){const i=this._addTile(e.key),s=this._graphicStore.queryTileData(this._templateStore,e);if(0===s.length)return;if(t){const i=Math.round((t.valid[1]-t.valid[0])/e.resolution);for(const e of s)e.geometry&&((0,jsonUtils/* isPoint */.fT)(e.geometry)||(0,jsonUtils/* isMultipoint */.U9)(e.geometry))&&this._wrapPoints(e,i)}const r=e.key;this._tileUpdateSet.add(e.key),this.notifyChange("updating");try{const t={type:"update",clear:!1,addOrUpdate:await this._processGraphics(e,s),remove:[],end:!0,sort:!1};i.patch(t),this._tileUpdateSet.delete(r),this.notifyChange("updating")}catch(o){if(this._tileUpdateSet.delete(r),this.notifyChange("updating"),!(0,promiseUtils/* isAbortError */.zf)(o))throw o}}_removeTile(e){if(!this._tiles.has(e))return;const t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}_setFilterState(e,t){const i=this._displayIds.get(e),s=this._attributeStore.getHighlightFlag(e);this._attributeStore.setData(i,0,0,s|(t?definitions/* filterFlag0 */.LY:0))}_getGraphicsData(e,t,i){const s=this.view,r=(0,spatialReferenceUtils/* getInfo */.Vp)(s.spatialReference),o=this._graphicStore.getGraphicsData(e,t,i);if(r){const e=Math.round((r.valid[1]-r.valid[0])/t.resolution);for(const t of o)t.geometry&&((0,jsonUtils/* isPoint */.fT)(t.geometry)||(0,jsonUtils/* isMultipoint */.U9)(t.geometry))&&this._wrapPoints(t,e)}return o}_wrapPoints(e,t){const i=e.geometry;(0,jsonUtils/* isMultipoint */.U9)(i)?this._wrapMultipoint(i,t):this._wrapPoint(e,t)}_wrapMultipoint(e,t){const i=e.points,s=[];let r=0,o=0;for(const[a,n]of i){if(s.push([a+r,n]),r=0,t===graphicsUtils/* tileSize */.CQ){const e=5*graphicsUtils/* pixelBuffer */.RA;a+o<e?(s.push([t,0]),r=-t):a+o>graphicsUtils/* tileSize */.CQ-e&&(s.push([-t,0]),r=t)}else a+o<-graphicsUtils/* pixelBuffer */.RA?(s.push([t,0]),r=-t):a+o>graphicsUtils/* tileSize */.CQ+graphicsUtils/* pixelBuffer */.RA&&(s.push([-t,0]),r=t);o+=a}e.points=s}_wrapPoint(e,t){const i=e.geometry;if(t===graphicsUtils/* tileSize */.CQ){const s=5*graphicsUtils/* pixelBuffer */.RA;i.x<s?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>graphicsUtils/* tileSize */.CQ-s&&(e.geometry={points:[[i.x,i.y],[-t,0]]})}else i.x<-graphicsUtils/* pixelBuffer */.RA?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>graphicsUtils/* tileSize */.CQ+graphicsUtils/* pixelBuffer */.RA&&(e.geometry={points:[[i.x,i.y],[-t,0]]})}_processGraphics(e,t,i){if(!(t&&t.length)||!this._meshFactory)return Promise.resolve(null);const s=GraphicsReader_o.from(t,this.uid,e.transform),r=this._meshFactory;return this._matcher.then((t=>r.analyzeGraphics(s,this.container.stage.resourceManager,t,null,null,i).then((()=>(this._attributeStore.sendUpdates(),this._processAnalyzedGraphics(e,s))))))}_processAnalyzedGraphics(e,t){const i=this._meshFactory,s=t.getSize(),r=t.getCursor(),o={features:s,records:s,metrics:0},a=new MeshData/* MeshData */.U(e.key.id,o,enums/* WGLSymbologyType */.w4.DEFAULT,!1,!1),n=[];for(;r.next();){const t=r.readGraphic();t.insertAfter=-1===t.insertAfter?-1:this._displayIds.get(t.insertAfter),t.displayId=this._displayIds.get(t.attributes[this.uid]);const s=new WGLDisplayObject_e(t.displayId);s.insertAfter=t.insertAfter,n.push(s),i.writeGraphic(a,r,e.level,this.container.stage.resourceManager)}const h=e.tileInfoView.tileInfo.isWrappable,l=a.serialize(h);if(1!==l.length)return new B;const d=l[0].message;return B.fromVertexData(d,n)}_abortProcessingGraphic(e){this._graphicIdToAbortController.get(e)?.abort()}_getNullSymbol(e){const t=e.geometry;return (0,jsonUtils/* isPolyline */.Rg)(t)?defaults/* errorPolylineSymbol2D */.x3:(0,jsonUtils/* isPolygon */.Bi)(t)||(0,jsonUtils/* isExtent */.ZC)(t)?defaults/* errorPolygonSymbol2D */.JJ:this.defaultPointSymbolEnabled?defaults/* errorPointSymbol2D */.jM:null}_flipUpdatingGraphics(){this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout((()=>{this._updatingGraphicsTimer=null,this.notifyChange("updating")}),160),this.notifyChange("updating")}};(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"_effectiveRenderer",null),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],se.prototype,"requestUpdateCallback",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"container",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)({constructOnly:!0})],se.prototype,"graphics",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"renderer",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"updating",null),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"view",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"updateRequested",void 0),(0,tslib_es6._)([(0,property/* property */.MZ)()],se.prototype,"defaultPointSymbolEnabled",void 0),se=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.layers.support.GraphicsView2D")],se);const re=se;


/***/ }),

/***/ 98502:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CQ: () => (/* binding */ c),
/* harmony export */   DF: () => (/* binding */ x),
/* harmony export */   NF: () => (/* binding */ h),
/* harmony export */   RA: () => (/* binding */ f),
/* harmony export */   Sb: () => (/* binding */ u),
/* harmony export */   aW: () => (/* binding */ g),
/* harmony export */   hH: () => (/* binding */ p)
/* harmony export */ });
/* unused harmony export getTextSymbolSize */
/* harmony import */ var _core_BidiText_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21870);
/* harmony import */ var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(62802);
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(80510);
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(87926);
/* harmony import */ var _engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(22610);
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(43556);
/* harmony import */ var _engine_webgl_mesh_templates_shapingUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(97557);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=512,f=50;function g(e,t){const n=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .getInfo */ .Vp)(t);if(!n)return null;const[o,s]=n.valid;return e[2]>s?[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)([e[0],e[1],s,e[3]]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)([o,e[1],o+e[2]-s,e[3]])]:e[0]<o?[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)([o,e[1],e[2],e[3]]),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__/* .create */ .vt)([s-(o-e[0]),e[1],s,e[3]])]:null}function u(e){return"text"===e||"esriTS"===e}function p(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function h(e){switch(e.geometry.type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function d(n,i,r){if(!r?.glyphMosaicItems?.length)return n;const c=e(i.text)[1],f=r.glyphMosaicItems,g=m(f,c,{scale:t(i.font.size)/l,angle:i.angle??0,xOffset:i.xoffset??0,yOffset:i.yoffset??0,hAlign:o(i.horizontalAlignment||"center"),vAlign:s(i.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(i.lineWidth||512,512)),lineHeight:a*Math.max(.25,Math.min(i.lineHeight||1,4)),decoration:i.font.decoration||"none",isCIM:!1,hasBackground:!!i.backgroundColor,borderLineSize:i.borderLineSize}).bounds;return n[0]=t(g.x-g.halfWidth),n[1]=t(g.y-g.halfHeight),n[2]=t(g.width),n[3]=t(g.height),n}function x(e){if(!e)return null;const{xmin:t,ymin:i,xmax:r,ymax:o,spatialReference:s}=e;return new _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A({rings:[[[t,i],[t,o],[r,o],[r,i],[t,i]]],spatialReference:s})}


/***/ }),

/***/ 7965:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  L: () => (/* binding */ r),
  Z: () => (/* binding */ cimSymbolUtils_i)
});

// EXTERNAL MODULE: ../node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js + 1 modules
var cimAnalyzer = __webpack_require__(80047);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/enums.js
var enums = __webpack_require__(79432);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js
var MaterialKey = __webpack_require__(59601);
;// ../node_modules/@arcgis/core/symbols/cim/ExpandedCIM.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s={marker:enums/* WGLGeometryType */.ZG.MARKER,fill:enums/* WGLGeometryType */.ZG.FILL,line:enums/* WGLGeometryType */.ZG.LINE,text:enums/* WGLGeometryType */.ZG.TEXT};class l{constructor(e,l,n,r){const c={minScale:l?.minScale,maxScale:l?.maxScale},m=i(c);this.layers=e,this.data=l,this.hash=this._createHash()+m,this.rendererKey=n;const o={isOutline:!1,placement:null,symbologyType:enums/* WGLSymbologyType */.w4.DEFAULT,vvFlags:n};for(const t of e){const e=s[t.type];o.isOutline="line"===t.type&&t.isOutline,t.materialKey=(0,MaterialKey/* createMaterialKey */.Zl)(e,o),t.maxVVSize=r,t.scaleInfo=c,t.templateHash+=m}}get type(){return"expanded-cim"}_createHash(){let e="";for(const t of this.layers)e+=t.templateHash;return e}}function i(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}

;// ../node_modules/@arcgis/core/views/2d/layers/support/cimSymbolUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=async(a,i,r)=>{const n=new cimAnalyzer/* CIMAnalyzer */.U(r,i);return new l(await n.analyzeSymbolReference(a.data,!1),a.data,a.rendererKey,a.maxVVSize)};async function cimSymbolUtils_i(e,t,i,r){if(!e)return null;if("cim"===e.type)return a(e,t,i);if("web-style"===e.type){const{fetchCIMSymbolReference:n}=await __webpack_require__.e(/* import() */ 5204).then(__webpack_require__.bind(__webpack_require__, 15204)),l={type:"cim",data:await n(e,null,r)??void 0,rendererKey:e.rendererKey,maxVVSize:e.maxVVSize};return a(l,t,i)}return e}function r(e){if(!e)return null;const{avoidSDFRasterization:t,type:a,cim:i,url:r,materialHash:n,maxVVSize:l}=e,m={cim:i,type:a,mosaicHash:n,url:r,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null,avoidSDFRasterization:t};switch(a){case"marker":l&&"size"in i&&(i.size=Math.max(l,i.size)),m.size=e.size,m.path=e.path,m.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":m.dashTemplate=e.dashTemplate;break;case"text":m.text=e.text,m.fontName=e.fontName}return m}


/***/ }),

/***/ 85205:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  zf: () => (/* binding */ v),
  ur: () => (/* binding */ c),
  Np: () => (/* binding */ d),
  tc: () => (/* binding */ f),
  kZ: () => (/* binding */ b)
});

// UNUSED EXPORTS: hasClusterCountVV

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Logger.js
var Logger = __webpack_require__(539);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/MD5.js
var MD5 = __webpack_require__(69075);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/AggregateField.js
var AggregateField = __webpack_require__(94301);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/layers/support/ExpressionInfo.js
var ExpressionInfo = __webpack_require__(54746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/support/AuthoringInfo.js + 3 modules
var AuthoringInfo = __webpack_require__(20699);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/SizeVariable.js + 1 modules
var SizeVariable = __webpack_require__(14977);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/SizeStop.js
var SizeStop = __webpack_require__(68745);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/tslib.es6.js
var tslib_es6 = __webpack_require__(66866);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/lang.js
var lang = __webpack_require__(19251);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/property.js
var property = __webpack_require__(21564);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/ensureType.js
var ensureType = __webpack_require__(73446);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js
var subclass = __webpack_require__(63863);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/accessorSupport/decorators/writer.js
var writer = __webpack_require__(77542);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js
var sizeVariableUtils = __webpack_require__(99412);
;// ../node_modules/@arcgis/core/views/2d/engine/LevelDependentSizeVariable.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var l;let n=l=class extends SizeVariable/* default */.A{writeLevels(e,s,i){for(const t in e){const e=this.levels[t];return void(s.stops=e)}}clone(){return new l({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:(0,sizeVariableUtils/* isSizeVariable */.of)(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:(0,sizeVariableUtils/* isSizeVariable */.of)(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map((e=>e.clone())),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone(),levels:(0,lang/* clone */.o8)(this.levels)})}};(0,tslib_es6._)([(0,property/* property */.MZ)()],n.prototype,"levels",void 0),(0,tslib_es6._)([(0,writer/* writer */.K)("levels")],n.prototype,"writeLevels",null),n=l=(0,tslib_es6._)([(0,subclass/* subclass */.$)("esri.views.2d.engine.LevelDependentSizeVariable")],n);

;// ../node_modules/@arcgis/core/views/2d/layers/support/clusterUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=Logger/* default */.A.getLogger("esri.views.2d.layers.support.clusterUtils");has/* default */.A.add("esri-cluster-arcade-enabled",!0);const p=(0,has/* default */.A)("esri-cluster-arcade-enabled"),c=(e,r,s,i,n)=>{const t=r.clone();if(!b(t))return t;if(t.authoringInfo||(t.authoringInfo=new AuthoringInfo/* default */.A),t.authoringInfo.isAutoGenerated=!0,"visualVariables"in t){const r=(t.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression)),a=d(r);r.forEach((r=>{"rotation"===r.type?r.field?r.field=E(e,r.field,"avg_angle","number"):r.valueExpression&&(r.field=x(e,r.valueExpression,"avg_angle","number"),r.valueExpression=null):r.normalizationField?(r.field=E(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=E(e,r.field,"avg","number"):r.valueExpression&&(r.field=x(e,r.valueExpression,"avg","number"),r.valueExpression=null)})),null==a&&!m(r)&&n&&(r.push(v(s,i)),t.dynamicClusterSize=!0),t.visualVariables=r}switch(t.type){case"simple":break;case"pie-chart":for(const r of t.attributes)r.field?r.field=E(e,r.field,"sum","number"):r.valueExpression&&(r.field=x(e,r.valueExpression,"sum","number"),r.valueExpression=null);break;case"unique-value":t.field?t.field=E(e,t.field,"mode","string"):t.valueExpression&&(t.field=x(e,t.valueExpression,"mode","string"),t.valueExpression=null);break;case"class-breaks":t.normalizationField?(t.field=E(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=E(e,t.field,"avg","number"):t.valueExpression&&(t.field=x(e,t.valueExpression,"avg","number"),t.valueExpression=null)}return t},d=e=>{for(const r of e)if("size"===r.type)return r;return null};function f(e,r,s){const i=e.clone();let n=!1;if("visualVariables"in i){const e=(i.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression));null==d(e)&&(i.visualVariables||(i.visualVariables=[]),i.visualVariables.push(v(r,s)),i.dynamicClusterSize=!0,n=!0)}return{renderer:i,didInject:n}}const m=e=>{for(const r of e)if("cluster_count"===r.field)return!0;return!1},v=(e,r)=>{const s=[new SizeStop/* default */.A({value:0,size:0}),new SizeStop/* default */.A({value:1})];if(null==r)return new SizeVariable/* default */.A({field:"cluster_count",stops:[...s,new SizeStop/* default */.A({value:2,size:0})]});const i=Object.keys(r).reduce(((i,n)=>({...i,[n]:[...s,new SizeStop/* default */.A({value:Math.max(2,r[n].minValue),size:e.clusterMinSize}),new SizeStop/* default */.A({value:Math.max(3,r[n].maxValue),size:e.clusterMaxSize})]})),{});return new n({field:"cluster_count",levels:i})},b=r=>{const s=s=>o.error(new Error/* default */.A("Unsupported-renderer",s,{renderer:r}));if(!r)return!1;switch(r.type){case"unique-value":if(r.field2||r.field3)return s("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(r.normalizationField){const e=r.normalizationType;if("field"!==e)return s(`FeatureReductionCluster does not support a normalizationType of ${e}`),!1}break;case"simple":case"pie-chart":break;default:return s(`FeatureReductionCluster does not support renderers of type ${r.type}`),!1}if(!p){if("valueExpression"in r&&r.valueExpression)return s("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in r&&r.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return s("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function g(e,r,i){switch(e){case"sum":return`cluster_sum_${r}`;case"avg":case"avg_angle":return`cluster_avg_${r}`;case"mode":return`cluster_type_${r}`;case"avg_norm":{const e=i,n="field",a=r.toLowerCase()+",norm:"+n+","+e.toLowerCase();return"cluster_avg_"+(0,MD5/* createMD5Hash */.d)(a)}}}function x(e,r,a,t){const l=(0,MD5/* createMD5Hash */.d)(r),u="mode"===a?`cluster_type_${l}`:"sum"===a?`cluster_sum_${l}`:`cluster_avg_${l}`;return e.some((e=>e.name===u))||e.push(new AggregateField/* default */.A({name:u,isAutoGenerated:!0,onStatisticExpression:new ExpressionInfo/* default */.A({expression:r,returnType:t}),statisticType:a})),u}function E(e,r,s,a,t){if("cluster_count"===r||e.some((e=>e.name===r)))return r;const l=g(s,r,t);return e.some((e=>e.name===l))||("avg_norm"===s?e.push(new AggregateField/* default */.A({name:l,isAutoGenerated:!0,onStatisticExpression:new ExpressionInfo/* default */.A({expression:`$feature.${r} / $feature.${t}`,returnType:a}),statisticType:"avg"})):e.push(new AggregateField/* default */.A({name:l,isAutoGenerated:!0,onStatisticField:r,statisticType:s}))),l}


/***/ }),

/***/ 44778:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H_: () => (/* binding */ r),
/* harmony export */   eh: () => (/* binding */ e)
/* harmony export */ });
/* unused harmony export analyzeRings */
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(59851);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_0__/* .JSONMap */ .J({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function e(t){return o.toJSON(t)}function n(t,o,e){const n=[],r=[];let l=0,i=0;for(const s of t){const t=i;let u=s[0][0],c=s[0][1];n[i++]=u,n[i++]=c;let p=0;for(let o=1;o<s.length;++o){const t=u,e=c;u=s[o][0],c=s[o][1],p+=c*t-u*e,n[i++]=u,n[i++]=c}o(p/2),p>0?(t-l>0&&(e(l,t,n,r),l=t),r.length=0):p<0&&t-l>0?r.push(.5*(t-l)):i=t}i-l>0&&e(l,i,n,r)}function r(t){const{bandCount:o,attributeTable:e,colormap:n,pixelType:r}=t.raster.rasterInfo;return 1===o&&(null!=e||null!=n||"u8"===r||"s8"===r)}


/***/ }),

/***/ 9049:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(17306);
/* harmony import */ var _core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(65667);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(6267);
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(84410);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(21564);
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(73446);
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(85569);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(39831);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(4238);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let d=class extends((0,_core_Identifiable_js__WEBPACK_IMPORTED_MODULE_3__/* .IdentifiableMixin */ .sA)((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__/* .EsriPromiseMixin */ .g)(_core_Evented_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)))){constructor(e){super(e),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__/* .UpdatingHandles */ .U,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",r=this.layer?.title||"no title";_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__/* ["default"] */ .A.getLogger(this).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_12__/* .destroyMaybe */ .pR)(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome("visible",e)}canResume(){return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;return t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"parent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"suspendInfo",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"legendEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({type:Boolean,readOnly:!0})],d.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)({readOnly:!0})],d.prototype,"updatingProgress",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"visible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__/* .property */ .MZ)()],d.prototype,"view",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__/* .subclass */ .$)("esri.views.layers.LayerView")],d);const u=d;


/***/ }),

/***/ 89423:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   g: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(85569);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(86942);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const _=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.BufferObject");class h{static createIndex(e,t,r){return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER,t,r)}static createVertex(e,t,r){return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER,t,r)}static createUniform(e,t,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Uniform buffers are supported in WebGL2 only!");return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.UNIFORM_BUFFER,t,r)}static createPixelPack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Pixel pack buffers are supported in WebGL2 only!");const i=new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER,t);return r&&i.setSize(r),i}static createPixelUnpack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_DRAW,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)throw new Error("Pixel unpack buffers are supported in WebGL2 only!");return new h(e,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_UNPACK_BUFFER,t,r)}constructor(e,t,r,i){this._context=e,this.bufferType=t,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(this._context.gl),i&&this.setData(i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteLength(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER?this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.BufferObject,this),this._context=null}else this._glName&&_.warn("Leaked WebGL buffer object")}setSize(e,t=null){if(e<=0&&_.error("Buffer size needs to be positive!"),this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT:e*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__/* .isUint16Array */ .jq)(e)&&(t/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_SHORT),(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__/* .isUint32Array */ .XJ)(e)&&(t/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DataType */ .pe.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e,t=null){this._size=e;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const i=this._context.gl;null!=t?i.bufferData(this.bufferType,t,this.usage):i.bufferData(this.bufferType,e,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(i),this._isVAOAware&&this._context.bindVAO(r)}setSubData(e,t,r,i){if(!e)return;(t<0||t*e.BYTES_PER_ELEMENT>=this.byteLength)&&_.error("offset is out of range!"),r>=i&&_.error("end must be bigger than start!"),(t+(i-r))*e.BYTES_PER_ELEMENT>this.byteLength&&_.error("An attempt to write beyond the end of the buffer!");const o=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const a=this._context.gl;if(this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,r,i-r);else{const s=0===r&&i===e.length?e:e.subarray(r,i);a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,s)}(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .checkWebGLError */ .Y2)(a),this._isVAOAware&&this._context.bindVAO(o)}getSubData(e,t=0,r,i){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)return void _.error("Get buffer subdata is supported in WebGL2 only!");if(r<0||i<0)return void _.error("Problem getting subdata: offset and length were less than zero!");const s=E(e)?e.BYTES_PER_ELEMENT:1;if(s*((r??0)+(i??0))>e.byteLength)return void _.error("Problem getting subdata: offset and length exceeded destination size!");t+s*(i??0)>this.byteLength&&_.warn("Potential problem getting subdata: requested data exceeds buffer size!");const a=this._context.gl;this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER),a.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER,t,e,r,i),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.COPY_READ_BUFFER)}async getSubDataAsync(e,t=0,r,i){this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2?(await this._context.clientWaitAsync(),this.getSubData(e,t,r,i)):_.error("Get buffer subdata is supported in WebGL2 only!")}}function E(t){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .isArrayLike */ .Xj)(t)}


/***/ }),

/***/ 84852:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   H: () => (/* binding */ E)
/* harmony export */ });
/* unused harmony export ensureAttachmentMaxSize */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6267);
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(89423);
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(16541);
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(41746);
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(12966);
/* harmony import */ var _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(74416);
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(6940);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const x=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FramebufferObject");class E{constructor(t,e,i=null){this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthStencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.FramebufferObject,this);const r=g(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(this._context,e);if(this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0),null!=i)if(b(i))this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),this._depthStencilTexture=g(i)?i:new _Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g(this._context,i),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const t=A(i)?i:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_7__/* .Renderbuffer */ .l(this._context,i);this._depthStencilBuffer=t,this._validateRenderBufferDescriptor(t.descriptor)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const t=this._context.getBoundFramebufferObject();if(this._colorAttachments.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ResourceType */ .vt.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0)}get depthStencil(){return this._depthStencilTexture||this._depthStencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0);return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0);return t?.descriptor?.height??0}get gpuMemoryUsage(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+i.gpuMemoryUsage),this.depthStencil?.gpuMemoryUsage??0)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&g(e)?e:null}get colorAttachments(){return[...this._colorAttachments.keys()]}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDescriptor(i),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(e){if(this._initialized){const e=this._context.getBoundFramebufferObject();this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t),this._context.bindFramebuffer(e)}return this._colorAttachments.delete(t),e}}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);i&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencil(t){if(t)switch(t.type){case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.Texture:return this._attachDepthStencilTexture(t);case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.RenderBuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const e=t.descriptor;e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelFormat */ .Ab.DEPTH_STENCIL&&e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelFormat */ .Ab.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),e.dataType!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .PixelType */ .ld.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DepthStencilAttachment */ .nI)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .DepthStencilAttachment */ .nI)),this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(this._validateRenderBufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(e);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,r,i.RENDERBUFFER,t.glName)}this._depthStencilBuffer=t}detachDepthStencilBuffer(){const t=this._depthStencilBuffer;if(t&&this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=this._getGLAttachmentPoint(t.descriptor);e.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,i,e.RENDERBUFFER,null)}return this._depthStencilBuffer=null,t}copyToTexture(t,e,i,r,s,h,n){(t<0||e<0||s<0||h<0)&&console.error("Offsets cannot be negative!"),(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");const o=n.descriptor;n.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==o?.width||null==o?.height||t+i>this.width||e+r>this.height||s+i>o.width||h+r>o.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const c=this._context,a=c.bindTexture(n,_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES);c.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D,0,s,h,t,e,i,r),c.bindTexture(a,_Texture_js__WEBPACK_IMPORTED_MODULE_8__/* .Texture */ .g.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,h,n){(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),n||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this),this._context.gl.readPixels(t,e,i,r,s,h,n)}async readPixelsAsync(t,e,h,n,o,c,a){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_4__/* .ContextType */ .EL.WEBGL2)return (0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),void this.readPixels(t,e,h,n,o,c,a);const u=this._context.gl,_=_BufferObject_js__WEBPACK_IMPORTED_MODULE_2__/* .BufferObject */ .g.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .Usage */ ._U.STREAM_READ,a.byteLength);this._context.bindBuffer(_),this._context.bindFramebuffer(this),u.readPixels(t,e,h,n,o,c,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .BufferType */ .NZ.PIXEL_PACK_BUFFER),await _.getSubDataAsync(a),_.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const i={width:t,height:e};S(i,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(i.width,i.height))),this._depthStencilTexture?.resize(i.width,i.height),this._initialized&&(S(i,this._context.parameters.maxRenderbufferSize),this._depthStencilBuffer?.resize(i.width,i.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=e.createFramebuffer();if(e.bindFramebuffer(t,i),this._colorAttachments.forEach(((e,i)=>this._framebufferTexture2D(e.glName,i,R(e),t))),this._depthStencilBuffer){const i=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);e.framebufferRenderbuffer(t,i,e.RENDERBUFFER,this._depthStencilBuffer.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,R(this._depthStencilTexture),t);if((0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_3__/* .webglDebugEnabled */ .en)()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!")}this._glName=i,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0,i=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D,r=_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(r,e,i,t,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthStencilBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthStencilBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .FramebufferTarget */ .R.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthStencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__/* .disposeMaybe */ .WD)(this._depthStencilBuffer)}this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__/* .disposeMaybe */ .WD)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),S(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderBufferDescriptor(t){S(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH32F_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_5__/* .RenderbufferFormat */ .yQ.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===E._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;E._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else E._MAX_COLOR_ATTACHMENTS=1}const i=e-_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .ColorAttachment */ .Nm.COLOR_ATTACHMENT0;i+1>E._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${E._MAX_COLOR_ATTACHMENTS} color attachments`)}}function g(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.Texture}function A(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_6__/* .GLObjectType */ .p.RenderBuffer}function b(t){return g(t)||null!=t&&"pixelFormat"in t}function S(t,e){const i=Math.max(t.width,t.height);if(i>e){x.warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const r=e/i;return t.width=Math.round(t.width*r),t.height=Math.round(t.height*r),!1}return!0}function R(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_CUBE_MAP_POSITIVE_X:_enums_js__WEBPACK_IMPORTED_MODULE_5__/* .TextureType */ .Ap.TEXTURE_2D}E._MAX_COLOR_ATTACHMENTS=-1;


/***/ }),

/***/ 12966:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   p: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e;!function(e){e[e.Texture=0]="Texture",e[e.RenderBuffer=1]="RenderBuffer"}(e||(e={}));


/***/ }),

/***/ 68449:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  B: () => (/* binding */ Program_m)
});

// UNUSED EXPORTS: test

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/arrayUtils.js
var arrayUtils = __webpack_require__(85569);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/contextUtils.js
var contextUtils = __webpack_require__(21946);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
;// ../node_modules/@arcgis/core/views/webgl/reservedWordsGLSL3.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"];

;// ../node_modules/@arcgis/core/views/webgl/testUtils.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const testUtils_e={enableCache:!1};

// EXTERNAL MODULE: ../node_modules/@arcgis/core/chunks/builtins.js
var builtins = __webpack_require__(30860);
;// ../node_modules/@arcgis/core/views/webgl/ShaderTranspiler.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var i=999,s=9999,c=0,p=1,u=2,f=3,d=4,l=5,h=6,y=7,w=8,g=9,m=10,k=11,b=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function E(){var t,e,a,E=0,_=0,v=i,j=[],A=[],x=1,D=0,R=0,T=!1,S=!1,G="";return function(t){return A=[],null!==t?F(t.replace?t.replace(/\r\n/g,"\n"):t):L()};function X(t){t.length&&A.push({type:b[v],data:t,position:R,line:x,column:D})}function F(e){var r;for(E=0,a=(G+=e).length;t=G[E],E<a;){switch(r=E,v){case c:E=V();break;case p:E=P();break;case u:E=M();break;case f:E=O();break;case d:E=$();break;case k:E=W();break;case l:E=z();break;case s:E=I();break;case g:E=H();break;case i:E=C()}if(r!==E)if("\n"===G[r])D=0,++x;else++D}return _+=E,G=G.slice(E),A}function L(t){return j.length&&X(j.join("")),v=m,X("(eof)"),A}function C(){return j=j.length?[]:j,"/"===e&&"*"===t?(R=_+E-1,v=c,e=t,E+1):"/"===e&&"/"===t?(R=_+E-1,v=p,e=t,E+1):"#"===t?(v=u,R=_+E,E):/\s/.test(t)?(v=g,R=_+E,E):(T=/\d/.test(t),S=/[^\w_]/.test(t),R=_+E,v=T?d:S?f:s,E)}function H(){return/[^\s]/g.test(t)?(X(j.join("")),v=i,E):(j.push(t),e=t,E+1)}function M(){return"\r"!==t&&"\n"!==t||"\\"===e?(j.push(t),e=t,E+1):(X(j.join("")),v=i,E)}function P(){return M()}function V(){return"/"===t&&"*"===e?(j.push(t),X(j.join("")),v=i,E+1):(j.push(t),e=t,E+1)}function O(){if("."===e&&/\d/.test(t))return v=l,E;if("/"===e&&"*"===t)return v=c,E;if("/"===e&&"/"===t)return v=p,E;if("."===t&&j.length){for(;N(j););return v=l,E}if(";"===t||")"===t||"("===t){if(j.length)for(;N(j););return X(t),v=i,E+1}var a=2===j.length&&"="!==t;if(/[\w_\d\s]/.test(t)||a){for(;N(j););return v=i,E}return j.push(t),e=t,E+1}function N(t){for(var e,a,n=0;;){if(e=builtins.o.indexOf(t.slice(0,t.length+n).join("")),a=builtins.o[e],-1===e){if(n--+t.length>0)continue;a=t.slice(0,1).join("")}return X(a),R+=a.length,(j=j.slice(a.length)).length}}function W(){return/[^a-fA-F0-9]/.test(t)?(X(j.join("")),v=i,E):(j.push(t),e=t,E+1)}function $(){return"."===t||/[eE]/.test(t)?(j.push(t),v=l,e=t,E+1):"x"===t&&1===j.length&&"0"===j[0]?(v=k,j.push(t),e=t,E+1):/[^\d]/.test(t)?(X(j.join("")),v=i,E):(j.push(t),e=t,E+1)}function z(){return"f"===t&&(j.push(t),e=t,E+=1),/[eE]/.test(t)||"-"===t&&/[eE]/.test(e)?(j.push(t),e=t,E+1):/[^\d]/.test(t)?(X(j.join("")),v=i,E):(j.push(t),e=t,E+1)}function I(){if(/[^\d\w_]/.test(t)){var a=j.join("");return v=builtins.l.indexOf(a)>-1?w:builtins.b.indexOf(a)>-1?y:h,X(j.join("")),v=i,E}return j.push(t),e=t,E+1}}function _(t){var e=E(),a=[];return a=(a=a.concat(e(t))).concat(e(null))}function v(t){return _(t)}function j(t){return t.map((t=>"eof"!==t.type?t.data:"")).join("")}const A=new Set(["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"]);function x(t,e="100",a="300 es"){const r=/^\s*\#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const n of t)if("preprocessor"===n.type){const t=r.exec(n.data);if(t){const r=t[1].replaceAll(/\s\s+/g," ");if(r===a)return r;if(r===e)return n.data="#version "+a,e;throw new Error("unknown glsl version: "+r)}}return t.splice(0,0,{type:"preprocessor",data:"#version "+a},{type:"whitespace",data:"\n"}),null}function D(t,e){for(let a=e-1;a>=0;a--){const e=t[a];if("whitespace"!==e.type&&"block-comment"!==e.type){if("keyword"!==e.type)break;if("attribute"===e.data||"in"===e.data)return!0}}return!1}function R(t,e,a,r){r=r||a;for(const n of t)if("ident"===n.type&&n.data===a){r in e?e[r]++:e[r]=0;return R(t,e,r+"_"+e[r],r)}return a}function T(t,e,a="afterVersion"){function r(t,e){for(let a=e;a<t.length;a++){const e=t[a];if("operator"===e.type&&";"===e.data)return a}return null}function n(t){let e=-1,n=0,o=-1;for(let i=0;i<t.length;i++){const s=t[i];if("preprocessor"===s.type&&(/\#(if|ifdef|ifndef)\s+.+/.test(s.data)?++n:/\#endif\s*.*/.test(s.data)&&--n),"afterVersion"!==a&&"afterPrecision"!==a||"preprocessor"===s.type&&s.data.startsWith("#version")&&(o=Math.max(o,i)),"afterPrecision"===a&&"keyword"===s.type&&"precision"===s.data){const e=r(t,i);if(null===e)throw new Error("precision statement not followed by any semicolons!");o=Math.max(o,e)}e<o&&0===n&&(e=i)}return e+1}const o={data:"\n",type:"whitespace"},i=e=>e<t.length&&/[^\r\n]$/.test(t[e].data);let s=n(t);i(s-1)&&t.splice(s++,0,o);for(const c of e)t.splice(s++,0,c);i(s-1)&&i(s)&&t.splice(s,0,o)}function S(t,e,a,r="lowp"){T(t,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:a},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function G(t,e,a,r,n="lowp"){T(t,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"="},{type:"whitespace",data:" "},{type:"integer",data:r.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:n},{type:"whitespace",data:" "},{type:"keyword",data:a},{type:"whitespace",data:" "},{type:"ident",data:e},{type:"operator",data:";"}],"afterPrecision")}function X(t,e){let a,r,n=-1;for(let o=e;o<t.length;o++){const e=t[o];if("operator"===e.type&&("["===e.data&&(a=o),"]"===e.data)){r=o;break}"integer"===e.type&&(n=parseInt(e.data,10))}return a&&r&&t.splice(a,r-a+1),n}function F(a,r){if(a.startsWith("#version 300"))return a;const n=C(a);if(null!=n)return n;const o=v(a);if("300 es"===x(o,"100","300 es"))return a;let i=null,s=null;const c={},p={};for(let u=0;u<o.length;++u){const a=o[u];switch(a.type){case"keyword":r===enums/* ShaderType */.Co.VERTEX_SHADER&&"attribute"===a.data?a.data="in":"varying"===a.data&&(a.data=r===enums/* ShaderType */.Co.VERTEX_SHADER?"out":"in");break;case"builtin":if(/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(a.data.trim())&&(a.data=a.data.replaceAll(/(2D|Cube|EXT)/g,"")),r===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragColor"===a.data&&(i||(i=R(o,c,"fragColor"),S(o,i,"vec4")),a.data=i),r===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragData"===a.data){const t=X(o,u+1),e=R(o,c,"fragData");G(o,e,"vec4",t,"mediump"),a.data=e}else r===enums/* ShaderType */.Co.FRAGMENT_SHADER&&"gl_FragDepthEXT"===a.data&&(s||(s=R(o,c,"gl_FragDepth")),a.data=s);break;case"ident":if(e.includes(a.data)){if(r===enums/* ShaderType */.Co.VERTEX_SHADER&&D(o,u))throw new Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");a.data in p||(p[a.data]=R(o,c,a.data)),a.data=p[a.data]}}}for(let t=o.length-1;t>=0;--t){const e=o[t];if("preprocessor"===e.type){const a=e.data.match(/\#extension\s+(.*)\:/);if(a&&a[1]&&A.has(a[1].trim())){const e=o[t+1];o.splice(t,e&&"whitespace"===e.type?2:1)}const r=e.data.match(/\#ifdef\s+(.*)/);r&&r[1]&&A.has(r[1].trim())&&(e.data="#if 1");const n=e.data.match(/\#ifndef\s+(.*)/);n&&n[1]&&A.has(n[1].trim())&&(e.data="#if 0")}}return H(a,j(o))}const L=new Map;function C(t){return testUtils_e.enableCache?L.get(t):null}function H(t,e){return testUtils_e.enableCache&&L.set(t,e),e}

;// ../node_modules/@arcgis/core/views/webgl/Program.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const Program_s=4294967295;class Program_m{constructor(t,m,h,f,c=new Map){this._context=t,this._locations=f,this._uniformBlockBindings=c,this._refCount=1,this._compiled=!1,this._linesOfCode=0,this._nameToUniformLocation=new Map,this._nameToUniform1=new Map,this._nameToUniform1v=new Map,this._nameToUniform2=new Map,this._nameToUniform3=new Map,this._nameToUniform4=new Map,this._nameToUniformMatrix3=new Map,this._nameToUniformMatrix4=new Map,t||console.error("RenderingContext isn't initialized!"),0===m.length&&console.error("Shaders source should not be empty!"),this._context.type===contextUtils/* ContextType */.EL.WEBGL2&&(m=F(m,enums/* ShaderType */.Co.VERTEX_SHADER),h=F(h,enums/* ShaderType */.Co.FRAGMENT_SHADER)),this._vShader=a(this._context,enums/* ShaderType */.Co.VERTEX_SHADER,m),this._fShader=a(this._context,enums/* ShaderType */.Co.FRAGMENT_SHADER,h),Program_.enabled&&(this._linesOfCode=m.match(/\n/g).length+h.match(/\n/g).length+2,this._context.instanceCounter.increment(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode)),this._vShader&&this._fShader||console.error("Error loading shaders!"),this._context.instanceCounter.increment(enums/* ResourceType */.vt.Shader,this),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&(this.vertexShader=m,this.fragmentShader=h);const l=this._context.gl,g=l.createProgram();if(l.attachShader(g,this._vShader),l.attachShader(g,this._fShader),this._locations.forEach(((t,e)=>l.bindAttribLocation(g,t,e))),l.linkProgram(g),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!l.getProgramParameter(g,l.LINK_STATUS)&&console.error(`Could not link shader\nvalidated: ${l.getProgramParameter(g,l.VALIDATE_STATUS)}, gl error ${l.getError()}, vertex: ${l.getShaderParameter(this._vShader,l.COMPILE_STATUS)}, fragment: ${l.getShaderParameter(this._fShader,l.COMPILE_STATUS)}, info log: ${l.getProgramInfoLog(g)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`),this._context.type===contextUtils/* ContextType */.EL.WEBGL2){const t=l;for(const[e,i]of this._uniformBlockBindings){const o=t.getUniformBlockIndex(g,e);o<Program_s&&t.uniformBlockBinding(g,o,i)}}this._glName=g,this._context.instanceCounter.increment(enums/* ResourceType */.vt.Program,this)}get glName(){return this._glName}get hasGLName(){return null!=this._glName}get compiled(){if(this._compiled)return!0;const t=this._context.gl.getExtension("KHR_parallel_shader_compile");return null==t||null==this.glName?(this._compiled=!0,!0):(this._compiled=!!this._context.gl.getProgramParameter(this.glName,t.COMPLETION_STATUS_KHR),this._compiled)}dispose(){if(--this._refCount>0)return;const t=this._context.gl,e=this._context.instanceCounter;this._nameToUniformLocation.forEach((t=>t&&e.decrement(enums/* ResourceType */.vt.Uniform,t))),this._nameToUniformLocation.clear(),this._vShader&&(this._linesOfCode>0&&(e.decrement(enums/* ResourceType */.vt.LinesOfCode,this._vShader,this._linesOfCode),this._linesOfCode=0),t.deleteShader(this._vShader),this._vShader=null,e.decrement(enums/* ResourceType */.vt.Shader,this)),this._fShader&&(t.deleteShader(this._fShader),this._fShader=null),this._glName&&(t.deleteProgram(this._glName),this._glName=null,e.decrement(enums/* ResourceType */.vt.Program,this))}ref(){++this._refCount}_getUniformLocation(t){const e=this._nameToUniformLocation.get(t);if(void 0!==e)return e;if(this.glName){const e=this._context.gl.getUniformLocation(this.glName,t);return this._nameToUniformLocation.set(t,e),e&&this._context.instanceCounter.increment(enums/* ResourceType */.vt.Uniform,e),e}return null}hasUniform(t){return null!=this._getUniformLocation(t)}setUniform1i(t,e){const i=this._nameToUniform1.get(t);void 0!==i&&e===i||(this._context.gl.uniform1i(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1iv(t,e){Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1iv(this._getUniformLocation(t),e)}setUniform2iv(t,e){Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2iv(this._getUniformLocation(t),e)}setUniform3iv(t,e){Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3iv(this._getUniformLocation(t),e)}setUniform4iv(t,e){Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4iv(this._getUniformLocation(t),e)}setUniform1f(t,e){const i=this._nameToUniform1.get(t);void 0!==i&&e===i||(this._context.gl.uniform1f(this._getUniformLocation(t),e),this._nameToUniform1.set(t,e))}setUniform1fv(t,e){Program_c(this._nameToUniform1v,t,e)&&this._context.gl.uniform1fv(this._getUniformLocation(t),e)}setUniform2f(t,e,i){const o=this._nameToUniform2.get(t);void 0===o?(this._context.gl.uniform2f(this._getUniformLocation(t),e,i),this._nameToUniform2.set(t,[e,i])):e===o[0]&&i===o[1]||(this._context.gl.uniform2f(this._getUniformLocation(t),e,i),o[0]=e,o[1]=i)}setUniform2fv(t,e){Program_c(this._nameToUniform2,t,e)&&this._context.gl.uniform2fv(this._getUniformLocation(t),e)}setUniform3f(t,e,i,o){const n=this._nameToUniform3.get(t);void 0===n?(this._context.gl.uniform3f(this._getUniformLocation(t),e,i,o),this._nameToUniform3.set(t,[e,i,o])):e===n[0]&&i===n[1]&&o===n[2]||(this._context.gl.uniform3f(this._getUniformLocation(t),e,i,o),n[0]=e,n[1]=i,n[2]=o)}setUniform3fv(t,e){Program_c(this._nameToUniform3,t,e)&&this._context.gl.uniform3fv(this._getUniformLocation(t),e)}setUniform4f(t,e,i,o,n){const r=this._nameToUniform4.get(t);void 0===r?(this._context.gl.uniform4f(this._getUniformLocation(t),e,i,o,n),this._nameToUniform4.set(t,[e,i,o,n])):void 0!==r&&e===r[0]&&i===r[1]&&o===r[2]&&n===r[3]||(this._context.gl.uniform4f(this._getUniformLocation(t),e,i,o,n),r[0]=e,r[1]=i,r[2]=o,r[3]=n)}setUniform4fv(t,e){Program_c(this._nameToUniform4,t,e)&&this._context.gl.uniform4fv(this._getUniformLocation(t),e)}setUniformMatrix3fv(t,e,i=!1){Program_c(this._nameToUniformMatrix3,t,e)&&this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),i,e)}setUniformMatrix4fv(t,e,i=!1){Program_c(this._nameToUniformMatrix4,t,e)&&this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),i,e)}stop(){}}function a(t,i,n){const r=t.gl,s=r.createShader(i);return r.shaderSource(s,n),r.compileShader(s),(0,checkWebGLError/* webglValidateShadersEnabled */.Xc)()&&!r.getShaderParameter(s,r.COMPILE_STATUS)&&(console.error("Compile error in ".concat(i===enums/* ShaderType */.Co.VERTEX_SHADER?"vertex":"fragment"," shader")),console.error(r.getShaderInfoLog(s)),console.error(Program_h(n))),s}function Program_h(t){let e=2;return t.replaceAll("\n",(()=>"\n"+Program_f(e++)+":"))}function Program_f(t){return t>=1e3?t.toString():("  "+t).slice(-3)}function Program_c(e,i,o){const n=e.get(i);return n?(0,arrayUtils/* update */.yo)(n,o):(e.set(i,Array.from(o)),!0)}const Program_={enabled:!1};


/***/ }),

/***/ 50122:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   r: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _Program_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(68449);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,t,a=""){return new _Program_js__WEBPACK_IMPORTED_MODULE_0__/* .Program */ .B(e,a+t.shaders.vertexShader,a+t.shaders.fragmentShader,t.attributes)}


/***/ }),

/***/ 74416:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   l: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(21946);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12966);
/* harmony import */ var _RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(94669);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(s,i){this._context=s,this._descriptor=i,this.type=_GLObjectType_js__WEBPACK_IMPORTED_MODULE_2__/* .GLObjectType */ .p.RenderBuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceType */ .vt.Renderbuffer,this);const n=this._context.gl;this.glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:o,height:h,internalFormat:c,multisampled:f}=i;if(f){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_0__/* .ContextType */ .EL.WEBGL2)throw new Error("Multisampled renderbuffers are not supported in WebGL1!");n.renderbufferStorageMultisample(n.RENDERBUFFER,this.samples,c,o,h)}else n.renderbufferStorage(n.RENDERBUFFER,c,o,h)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get gpuMemoryUsage(){return (0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_3__/* .estimateMemory */ .e)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;if(this._context.bindRenderbuffer(this),r.multisampled){s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height)}else s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .ResourceType */ .vt.Renderbuffer,this),this._context=null)}}


/***/ }),

/***/ 94669:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   e: () => (/* binding */ h),
/* harmony export */   q: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(t,i,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__/* .getBytesPerElementFormat */ .IB)(i.internalFormat)}


/***/ }),

/***/ 29638:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e){this._readFile=e}resolveIncludes(e){return this._resolve(e)}_resolve(e,t=new Map){if(t.has(e))return t.get(e);const r=this._read(e);if(!r)throw new Error(`cannot find shader file ${e}`);const s=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let n=s.exec(r);const l=[];for(;null!=n;)l.push({path:n[1],start:n.index,length:n[0].length}),n=s.exec(r);let a=0,h="";return l.forEach((e=>{h+=r.slice(a,e.start),h+=t.has(e.path)?"":this._resolve(e.path,t),a=e.start+e.length})),h+=r.slice(a),t.set(e,h),h}_read(e){return this._readFile(e)}}


/***/ }),

/***/ 6940:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {


// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  g: () => (/* binding */ T)
});

// UNUSED EXPORTS: clearUnestimatedTextures

// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/Error.js
var Error = __webpack_require__(98849);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/has.js
var has = __webpack_require__(39831);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/core/mathUtils.js
var mathUtils = __webpack_require__(92504);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/checkWebGLError.js
var checkWebGLError = __webpack_require__(16541);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/contextUtils.js
var contextUtils = __webpack_require__(21946);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/enums.js
var enums = __webpack_require__(41746);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/GLObjectType.js
var GLObjectType = __webpack_require__(12966);
// EXTERNAL MODULE: ../node_modules/@arcgis/core/views/webgl/TextureDescriptor.js
var TextureDescriptor = __webpack_require__(45758);
;// ../node_modules/@arcgis/core/views/webgl/ValidatedTextureDescriptor.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends TextureDescriptor/* TextureDescriptor */.R{constructor(t,a){switch(super(),this.context=t,Object.assign(this,a),this.internalFormat){case enums/* SizedPixelFormat */.H0.R16F:case enums/* SizedPixelFormat */.H0.R16I:case enums/* SizedPixelFormat */.H0.R16UI:case enums/* SizedPixelFormat */.H0.R32F:case enums/* SizedPixelFormat */.H0.R32I:case enums/* SizedPixelFormat */.H0.R32UI:case enums/* SizedPixelFormat */.H0.R8_SNORM:case enums/* SizedPixelFormat */.H0.R8:case enums/* SizedPixelFormat */.H0.R8I:case enums/* SizedPixelFormat */.H0.R8UI:this.pixelFormat=enums/* PixelFormat */.Ab.RED}}static validate(s,e){return new a(s,e)}}

;// ../node_modules/@arcgis/core/views/webgl/Texture.js
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=4;let T=class{constructor(e,i=null,o=null){if(this.type=GLObjectType/* GLObjectType */.p.Texture,this._glName=null,this._samplingModeDirty=!1,this._wrapModeDirty=!1,this._wasImmutablyAllocated=!1,"context"in e)this._descriptor=e,o=i;else{const r=a.validate(e,i);if(!r)throw new Error/* default */.A("Texture descriptor invalid");this._descriptor=r}if(this._descriptor.context.type!==contextUtils/* ContextType */.EL.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),R(this._descriptor.target)))throw new Error/* default */.A("3D and array textures are not supported in WebGL1");this._descriptor.target===enums/* TextureType */.Ap.TEXTURE_CUBE_MAP?this._setDataCubeMap(o):this.setData(o)}get glName(){return this._glName}get descriptor(){return this._descriptor}get gpuMemoryUsage(){return P.delete(this),(0,TextureDescriptor/* estimateMemory */.e)(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(enums/* ResourceType */.vt.Texture,this),this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(e,i){const r=this._descriptor;if(r.width!==e||r.height!==i){if(this._wasImmutablyAllocated)throw new Error/* default */.A("Immutable textures can't be resized!");r.width=e,r.height=i,this._descriptor.target===enums/* TextureType */.Ap.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(t=null){for(let e=enums/* TextureType */.Ap.TEXTURE_CUBE_MAP_POSITIVE_X;e<=enums/* TextureType */.Ap.TEXTURE_CUBE_MAP_NEGATIVE_Z;e++)this._setData(t,e)}setData(t){this._setData(t)}_setData(e,r){if(!this._descriptor.context?.gl)return;const s=this._descriptor.context.gl;(0,checkWebGLError/* checkWebGLError */.Y2)(s),this._glName||(this._glName=s.createTexture(),this._glName&&this._descriptor.context.instanceCounter.increment(enums/* ResourceType */.vt.Texture,this)),void 0===e&&(e=null);const a=this._descriptor,n=r??a.target,h=R(n);null===e&&(a.width=a.width||u,a.height=a.height||u,h&&(a.depth=a.depth??1));const p=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES),g(this._descriptor.context,a),this._configurePixelStorage(),(0,checkWebGLError/* checkWebGLError */.Y2)(s);const l=this._deriveInternalFormat();if(D(e)){let t="width"in e?e.width:e.codedWidth,r="height"in e?e.height:e.codedHeight;const o=1;e instanceof HTMLVideoElement&&(t=e.videoWidth,r=e.videoHeight),a.width&&a.height,h&&a.depth,a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,a.hasMipmap,t,r,o),this._texImage(n,0,l,t,r,o,e),(0,checkWebGLError/* checkWebGLError */.Y2)(s),a.hasMipmap&&this.generateMipmap(),a.width||(a.width=t),a.height||(a.height=r),h&&!a.depth&&(a.depth=o)}else{const{width:r,height:o,depth:p}=a;if(null==r||null==o)throw new Error/* default */.A("Width and height must be specified!");if(h&&null==p)throw new Error/* default */.A("Depth must be specified!");if(a.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(n,l,a.hasMipmap,r,o,p),A(e)){const i=e.levels,h=b(n,r,o,p),d=Math.min(h-1,i.length-1);null!=this._descriptor.context.gl2?s.texParameteri(a.target,this._descriptor.context.gl2.TEXTURE_MAX_LEVEL,d):a.hasMipmap=a.hasMipmap&&h===i.length;const c=l;if(!w(c))throw new Error/* default */.A("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel(((t,e,r,s)=>{const o=i[Math.min(t,i.length-1)];this._compressedTexImage(n,t,c,e,r,s,o)}),d)}else this._texImage(n,0,l,r,o,p,e),(0,checkWebGLError/* checkWebGLError */.Y2)(s),a.hasMipmap&&this.generateMipmap()}x(s,this._descriptor),E(s,this._descriptor),f(this._descriptor.context,this._descriptor),(0,checkWebGLError/* checkWebGLError */.Y2)(s),this._descriptor.context.bindTexture(p,T.TEXTURE_UNIT_FOR_UPDATES)}updateData(e,i,r,s,o,a,n=0){a||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const h=this._descriptor.context.gl,p=this._descriptor.context.gl2,l=this._descriptor,d=this._deriveInternalFormat(),{pixelFormat:c,dataType:_,target:m,isImmutable:u}=l;if(u&&!this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot update immutable texture before allocation!");const g=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES,!0);if((i<0||r<0||s>l.width||o>l.height||i+s>l.width||r+o>l.height)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),n){if(!p)return void console.error("Webgl2 must be enabled to use dataRowOffset!");h.pixelStorei(p.UNPACK_SKIP_ROWS,n)}if(D(a)?p?p.texSubImage2D(m,e,i,r,s,o,c,_,a):h.texSubImage2D(m,e,i,r,c,_,a):A(a)?h.compressedTexSubImage2D(m,e,i,r,s,o,d,a.levels[e]):h.texSubImage2D(m,e,i,r,s,o,c,_,a),n){if(!p)return void console.error("Webgl2 must be enabled to use dataRowOffset!");h.pixelStorei(p.UNPACK_SKIP_ROWS,0)}this._descriptor.context.bindTexture(g,T.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(e,i,r,s,o,a,n,h){h||console.error("An attempt to use uninitialized data!"),this._glName||console.error("An attempt to update uninitialized texture!");const p=this._descriptor.context.gl2;if(null==p)throw new Error/* default */.A("3D textures are not supported in WebGL1");const l=this._descriptor,d=this._deriveInternalFormat(),{pixelFormat:c,dataType:_,isImmutable:m,target:u}=l;if(m&&!this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot update immutable texture before allocation!");R(u)||console.warn("Attempting to set 3D texture data on a non-3D texture");const g=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);if(this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES),(i<0||r<0||s<0||o>l.width||a>l.height||n>l.depth||i+o>l.width||r+a>l.height||s+n>l.depth)&&console.error("An attempt to update out of bounds of the texture!"),this._configurePixelStorage(),A(h))h=h.levels[e],p.compressedTexSubImage3D(u,e,i,r,s,o,a,n,d,h);else{const t=h;p.texSubImage3D(u,e,i,r,s,o,a,n,c,_,t)}this._descriptor.context.bindTexture(g,T.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const e=this._descriptor;if(!e.hasMipmap){if(this._wasImmutablyAllocated)throw new Error/* default */.A("Cannot add mipmaps to immutable texture after allocation");e.hasMipmap=!0,this._samplingModeDirty=!0,g(this._descriptor.context,e)}e.samplingMode===enums/* TextureSamplingMode */.Cj.LINEAR?(this._samplingModeDirty=!0,e.samplingMode=enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_NEAREST):e.samplingMode===enums/* TextureSamplingMode */.Cj.NEAREST&&(this._samplingModeDirty=!0,e.samplingMode=enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_NEAREST);const i=this._descriptor.context.bindTexture(this,T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(T.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(e.target),this._descriptor.context.bindTexture(i,T.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(t){t!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=t,this._samplingModeDirty=!0)}setWrapMode(t){t!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=t,g(this._descriptor.context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const t=this._descriptor.context.gl,e=this._descriptor;this._samplingModeDirty&&(x(t,e),this._samplingModeDirty=!1),this._wrapModeDirty&&(E(t,e),this._wrapModeDirty=!1)}_deriveInternalFormat(){if(this._descriptor.context.type===contextUtils/* ContextType */.EL.WEBGL1)return this._descriptor.internalFormat=this._descriptor.pixelFormat;if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===enums/* PixelFormat */.Ab.DEPTH_STENCIL&&(this._descriptor.internalFormat=enums/* PixelFormat */.Ab.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case enums/* PixelType */.ld.FLOAT:switch(this._descriptor.pixelFormat){case enums/* PixelFormat */.Ab.RGBA:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGBA32F;case enums/* PixelFormat */.Ab.RGB:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGB32F;default:throw new Error/* default */.A("Unable to derive format")}case enums/* PixelType */.ld.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case enums/* PixelFormat */.Ab.RGBA:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGBA8;case enums/* PixelFormat */.Ab.RGB:return this._descriptor.internalFormat=enums/* SizedPixelFormat */.H0.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===enums/* PixelFormat */.Ab.DEPTH_STENCIL?enums/* PixelFormat */.Ab.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const t=this._descriptor.context.gl,{unpackAlignment:e,flipped:i,preMultiplyAlpha:r}=this._descriptor;t.pixelStorei(t.UNPACK_ALIGNMENT,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,i?1:0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r?1:0)}_texStorage(e,i,r,s,o,a){const n=this._descriptor.context.gl2;if(null==n)throw new Error/* default */.A("Immutable textures are not supported in WebGL1");if(!M(i))throw new Error/* default */.A("Immutable textures must have a sized internal format");if(!this._descriptor.isImmutable)return;const h=r?b(e,s,o,a):1;if(R(e)){if(null==a)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");n.texStorage3D(e,h,i,s,o,a)}else n.texStorage2D(e,h,i,s,o);this._wasImmutablyAllocated=!0}_texImage(e,i,s,o,a,n,h){const p=this._descriptor.context.gl,l=R(e),{isImmutable:d,pixelFormat:c,dataType:_}=this._descriptor,m=this._descriptor.context.type===contextUtils/* ContextType */.EL.WEBGL2,u=m?p:null;if(m||!D(h))if(d){if(null!=h){const r=h;if(l){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");u.texSubImage3D(e,i,0,0,0,o,a,n,c,_,r)}else p.texSubImage2D(e,i,0,0,o,a,c,_,r)}}else{const r=h;if(l){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");u.texImage3D(e,i,s,o,a,n,0,c,_,r)}else p.texImage2D(e,i,s,o,a,0,c,_,r)}else p.texImage2D(e,0,s,c,_,h)}_compressedTexImage(e,i,s,o,a,n,h){const p=this._descriptor.context.gl;let l=null;const d=R(e),c=this._descriptor.isImmutable;if(d){if(this._descriptor.context.type!==contextUtils/* ContextType */.EL.WEBGL2)throw new Error/* default */.A("3D textures are not supported in WebGL1");l=p}if(c){if(null!=h)if(d){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");l.compressedTexSubImage3D(e,i,0,0,0,o,a,n,s,h)}else p.compressedTexSubImage2D(e,i,0,0,o,a,s,h)}else if(d){if(null==n)throw new Error/* default */.A("Missing depth dimension for 3D texture upload");l.compressedTexImage3D(e,i,s,o,a,n,0,h)}else p.compressedTexImage2D(e,i,s,o,a,0,h)}_forEachMipmapLevel(e,i=1/0){let{width:r,height:o,depth:a,hasMipmap:n,target:h}=this._descriptor;const p=h===enums/* TextureType */.Ap.TEXTURE_3D;if(null==r||null==o||p&&null==a)throw new Error/* default */.A("Missing texture dimensions for mipmap calculation");for(let t=0;e(t,r,o,a),n&&(1!==r||1!==o||p&&1!==a)&&!(t>=i);++t)r=Math.max(1,r>>1),o=Math.max(1,o>>1),p&&(a=Math.max(1,a>>1))}};function g(t,i){(null!=i.width&&i.width<0||null!=i.height&&i.height<0||null!=i.depth&&i.depth<0)&&console.error("Negative dimension parameters are not allowed!");const s=t.type===contextUtils/* ContextType */.EL.WEBGL2;if(s||!i.isImmutable&&!R(i.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!"),s)return;null!=i.width&&(0,mathUtils/* isPowerOfTwo */.r6)(i.width)&&null!=i.height&&(0,mathUtils/* isPowerOfTwo */.r6)(i.height)||("number"==typeof i.wrapMode?i.wrapMode!==enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):i.wrapMode.s===enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE&&i.wrapMode.t===enums/* TextureWrapMode */.pF.CLAMP_TO_EDGE||console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),i.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}function x(t,e){let i=e.samplingMode,r=e.samplingMode;i===enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_NEAREST||i===enums/* TextureSamplingMode */.Cj.LINEAR_MIPMAP_LINEAR?(i=enums/* TextureSamplingMode */.Cj.LINEAR,e.hasMipmap||(r=enums/* TextureSamplingMode */.Cj.LINEAR)):i!==enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_NEAREST&&i!==enums/* TextureSamplingMode */.Cj.NEAREST_MIPMAP_LINEAR||(i=enums/* TextureSamplingMode */.Cj.NEAREST,e.hasMipmap||(r=enums/* TextureSamplingMode */.Cj.NEAREST)),t.texParameteri(e.target,t.TEXTURE_MAG_FILTER,i),t.texParameteri(e.target,t.TEXTURE_MIN_FILTER,r)}function E(t,e){"number"==typeof e.wrapMode?(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode)):(t.texParameteri(e.target,t.TEXTURE_WRAP_S,e.wrapMode.s),t.texParameteri(e.target,t.TEXTURE_WRAP_T,e.wrapMode.t))}function f(t,e){const i=t.capabilities.textureFilterAnisotropic;if(!i)return;t.gl.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY,e.maxAnisotropy??1)}function M(t){return t in enums/* SizedPixelFormat */.H0}function w(t){return t in enums/* CompressedTextureFormat */.CQ}function A(t){return null!=t&&"type"in t&&"compressed"===t.type}function I(t){return null!=t&&"byteLength"in t}function D(t){return null!=t&&!A(t)&&!I(t)}function R(t){return t===enums/* TextureType */.Ap.TEXTURE_3D||t===enums/* TextureType */.Ap.TEXTURE_2D_ARRAY}function b(t,e,i,r=1){let o=Math.max(e,i);return t===enums/* TextureType */.Ap.TEXTURE_3D&&(o=Math.max(o,r)),Math.round(Math.log(o)/Math.LN2)+1}function U(){if(0===P.size)return;const t=new Array;return P.forEach(((e,i)=>t.push([i.gpuMemoryUsage,e]))),P.clear(),t.sort(((t,e)=>e[0]-t[0])),t.reduce(((t,e)=>`${t}\n\n${Math.round(e[0]/1024)}KB: ${e[1]}`),`Total unestimated texture memory: ${Math.round(t.reduce(((t,e)=>t+e[0]),0)/1024)}KB`)}T.TEXTURE_UNIT_FOR_UPDATES=0;const P=new Map;


/***/ }),

/***/ 45758:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   R: () => (/* binding */ e),
/* harmony export */   e: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(p=0,e=p){this.width=p,this.height=e,this.target=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureType */ .Ap.TEXTURE_2D,this.pixelFormat=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelFormat */ .Ab.RGBA,this.dataType=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .PixelType */ .ld.UNSIGNED_BYTE,this.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureSamplingMode */ .Cj.LINEAR,this.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_0__/* .TextureWrapMode */ .pF.REPEAT,this.maxAnisotropy=1,this.flipped=!1,this.hasMipmap=!1,this.isOpaque=!1,this.unpackAlignment=4,this.preMultiplyAlpha=!1,this.depth=1,this.isImmutable=!1}}function r(t){return t.width<=0||t.height<=0?0:t.width*t.height*(t.hasMipmap?4/3:1)*(null==t.internalFormat?4:(0,_Util_js__WEBPACK_IMPORTED_MODULE_1__/* .getBytesPerElementFormat */ .IB)(t.internalFormat))}


/***/ }),

/***/ 19282:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hi: () => (/* binding */ o),
/* harmony export */   IB: () => (/* binding */ E),
/* harmony export */   WH: () => (/* binding */ a),
/* harmony export */   yu: () => (/* binding */ i)
/* harmony export */ });
/* unused harmony exports getStride, vertexCount */
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(39831);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(41746);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(e){const r=e.gl;switch(r.getError()){case r.NO_ERROR:return null;case r.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case r.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case r.INVALID_OPERATION:return"The specified command is not allowed for the current state";case r.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case r.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case r.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function n(e,r){return e.vertexBuffers[r].byteLength/R(e.layout[r])}function R(e){return e[0].stride}function i(e,r,t,s,c=0){const a=e.gl;e.bindBuffer(t);for(const n of s){const t=r.get(n.name);void 0===t&&console.error(`There is no location for vertex attribute '${n.name}' defined.`);const s=c*n.stride;if(n.count<=4)a.vertexAttribPointer(t,n.count,n.type,n.normalized,n.stride,n.offset+s),a.enableVertexAttribArray(t),n.divisor>0&&e.gl2?.vertexAttribDivisor(t,n.divisor);else if(9===n.count)for(let r=0;r<3;r++)a.vertexAttribPointer(t+r,3,n.type,n.normalized,n.stride,n.offset+12*r+s),a.enableVertexAttribArray(t+r),n.divisor>0&&e.gl2?.vertexAttribDivisor(t+r,n.divisor);else if(16===n.count)for(let r=0;r<4;r++)a.vertexAttribPointer(t+r,4,n.type,n.normalized,n.stride,n.offset+16*r+s),a.enableVertexAttribArray(t+r),n.divisor>0&&e.gl2?.vertexAttribDivisor(t+r,n.divisor);else console.error("Unsupported vertex attribute element count: "+n.count)}}function o(r,t,s,c){const a=r.gl;r.bindBuffer(s);for(const e of c){const s=t.get(e.name);if(e.count<=4)a.disableVertexAttribArray(s),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s,0);else if(9===e.count)for(let t=0;t<3;t++)a.disableVertexAttribArray(s+t),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s+t,0);else if(16===e.count)for(let t=0;t<4;t++)a.disableVertexAttribArray(s+t),e.divisor&&e.divisor>0&&r.gl2?.vertexAttribDivisor(s+t,0);else console.error("Unsupported vertex attribute element count: "+e.count)}r.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_1__/* .BufferType */ .NZ.ARRAY_BUFFER)}function E(e){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.ALPHA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.LUMINANCE:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RED:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RED_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.STENCIL_INDEX8:return 1;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.LUMINANCE_ALPHA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RG:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RG_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA4:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R16UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB565:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB5_A1:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT16:return 2;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH_COMPONENT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGB:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGB_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.SRGB8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT24:return 3;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH_STENCIL:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGBA:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .PixelFormat */ .Ab.RGBA_INTEGER:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R11F_G11F_B10F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.R32UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG16UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA8_SNORM:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.SRGB8_ALPHA8:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB9_E5:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB10_A2UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB10_A2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_STENCIL:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH_COMPONENT32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH24_STENCIL8:return 4;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .RenderbufferFormat */ .yQ.DEPTH32F_STENCIL8:return 5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB16UI:return 6;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RG32UI:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA16UI:return 8;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGB32UI:return 12;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32F:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32I:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .SizedPixelFormat */ .H0.RGBA32UI:return 16;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB_S3TC_DXT1_EXT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT3_EXT:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_R11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SIGNED_R11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB8_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RG11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SIGNED_RG11_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_RGBA8_ETC2_EAC:case _enums_js__WEBPACK_IMPORTED_MODULE_1__/* .CompressedTextureFormat */ .CQ.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}


/***/ }),

/***/ 80976:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(539);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6267);
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(86942);
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(41746);
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19282);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.getLogger("esri.views.webgl.VertexArrayObject");let f=class{constructor(t,e,i,r,s=null){this._context=t,this._locations=e,this._layout=i,this._buffers=r,this._indexBuffer=s,this._glName=null,this._initialized=!1}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].byteLength),null!=this._indexBuffer?this._indexBuffer.byteLength:0)}get layout(){return this._layout}get locations(){return this._locations}get usedMemory(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_1__/* .typedArrayStaticSize */ .zQ}dispose(){if(this._context){this._context.getBoundVAO()===this&&this._context.bindVAO(null);for(const t in this._buffers)this._buffers[t]?.dispose(),delete this._buffers[t];this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__/* .disposeMaybe */ .WD)(this._indexBuffer),this.disposeVAOOnly()}else(this._glName||Object.getOwnPropertyNames(this._buffers).length>0)&&o.warn("Leaked WebGL VAO")}disposeVAOOnly(){if(this._glName){const t=this._context?.capabilities?.vao;t.deleteVertexArray(this._glName),this._glName=null,this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)}this._context=null}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__/* .ResourceType */ .vt.VertexArrayObject,this)}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:t,_layout:e,_indexBuffer:i}=this;t||o.error("Vertex buffer dictionary is empty!");const r=this._context.gl;for(const n in t){const i=t[n];i||o.error("Vertex buffer is uninitialized!");const r=e[n];r||o.error("Vertex element descriptor is empty!"),(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .bindVertexBufferLayout */ .yu)(this._context,this._locations,i,r)}if(null!=i){!!this._context.capabilities.vao?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName):this._context.bindBuffer(i)}}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:t,_layout:e}=this;t||o.error("Vertex buffer dictionary is empty!");for(const i in t){const r=t[i];r||o.error("Vertex buffer is uninitialized!");const s=e[i];(0,_Util_js__WEBPACK_IMPORTED_MODULE_3__/* .unbindVertexBufferLayout */ .Hi)(this._context,this._locations,r,s)}null!=this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}};


/***/ }),

/***/ 69955:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   _: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t,s,i,h,o,e=!1,r=0){this.name=t,this.count=s,this.type=i,this.offset=h,this.stride=o,this.normalized=e,this.divisor=r}}


/***/ }),

/***/ 49251:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(n){return window.WebGL2RenderingContext&&n instanceof window.WebGL2RenderingContext}


/***/ }),

/***/ 16541:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Xc: () => (/* binding */ c),
/* harmony export */   Y2: () => (/* binding */ u),
/* harmony export */   en: () => (/* binding */ a)
/* harmony export */ });
/* unused harmony export hasFeatureFlagWebGLDebug */
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(98849);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(539);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.getLogger("esri.views.webgl.checkWebGLError");function t(e,r){switch(r){case e.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case e.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case e.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";case e.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case e.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case e.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const n=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A)("enable-feature:webgl-debug");function a(){return n}function c(){return n}function u(r){if(a()){const n=r.getError();if(n){const a=t(r,n),c=(new Error).stack;o.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A("webgl-error","WebGL error occurred",{message:a,stack:c}))}}}


/***/ }),

/***/ 41746:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ab: () => (/* binding */ G),
/* harmony export */   Ac: () => (/* binding */ S),
/* harmony export */   Ap: () => (/* binding */ M),
/* harmony export */   CQ: () => (/* binding */ c),
/* harmony export */   Cj: () => (/* binding */ L),
/* harmony export */   Co: () => (/* binding */ H),
/* harmony export */   H0: () => (/* binding */ P),
/* harmony export */   Hr: () => (/* binding */ f),
/* harmony export */   MT: () => (/* binding */ O),
/* harmony export */   NZ: () => (/* binding */ A),
/* harmony export */   Nm: () => (/* binding */ X),
/* harmony export */   R: () => (/* binding */ n),
/* harmony export */   Tb: () => (/* binding */ T),
/* harmony export */   WR: () => (/* binding */ E),
/* harmony export */   Y7: () => (/* binding */ N),
/* harmony export */   _U: () => (/* binding */ F),
/* harmony export */   dn: () => (/* binding */ R),
/* harmony export */   eA: () => (/* binding */ I),
/* harmony export */   hn: () => (/* binding */ _),
/* harmony export */   ld: () => (/* binding */ U),
/* harmony export */   nI: () => (/* binding */ t),
/* harmony export */   pF: () => (/* binding */ D),
/* harmony export */   pe: () => (/* binding */ C),
/* harmony export */   sS: () => (/* binding */ e),
/* harmony export */   tx: () => (/* binding */ r),
/* harmony export */   vt: () => (/* binding */ V),
/* harmony export */   xM: () => (/* binding */ Y),
/* harmony export */   xV: () => (/* binding */ o),
/* harmony export */   yQ: () => (/* binding */ B)
/* harmony export */ });
/* unused harmony exports SyncFlag, SyncParameter, SyncStatus */
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var _,E,R,T,A,N,S,C,O,I,L,D,M,G,P,U,B,F,H,n;!function(_){_[_.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",_[_.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",_[_.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(_||(_={})),function(_){_[_.POINTS=0]="POINTS",_[_.LINES=1]="LINES",_[_.LINE_LOOP=2]="LINE_LOOP",_[_.LINE_STRIP=3]="LINE_STRIP",_[_.TRIANGLES=4]="TRIANGLES",_[_.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",_[_.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(E||(E={})),function(_){_[_.ZERO=0]="ZERO",_[_.ONE=1]="ONE",_[_.SRC_COLOR=768]="SRC_COLOR",_[_.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",_[_.SRC_ALPHA=770]="SRC_ALPHA",_[_.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",_[_.DST_ALPHA=772]="DST_ALPHA",_[_.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",_[_.DST_COLOR=774]="DST_COLOR",_[_.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",_[_.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",_[_.CONSTANT_COLOR=32769]="CONSTANT_COLOR",_[_.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",_[_.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",_[_.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(R||(R={})),function(_){_[_.ADD=32774]="ADD",_[_.MIN=32775]="MIN",_[_.MAX=32776]="MAX",_[_.SUBTRACT=32778]="SUBTRACT",_[_.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(T||(T={})),function(_){_[_.ARRAY_BUFFER=34962]="ARRAY_BUFFER",_[_.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",_[_.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",_[_.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",_[_.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",_[_.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",_[_.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(A||(A={})),function(_){_[_.FRONT=1028]="FRONT",_[_.BACK=1029]="BACK",_[_.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(N||(N={})),function(_){_[_.CW=2304]="CW",_[_.CCW=2305]="CCW"}(S||(S={})),function(_){_[_.BYTE=5120]="BYTE",_[_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_[_.SHORT=5122]="SHORT",_[_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_[_.INT=5124]="INT",_[_.UNSIGNED_INT=5125]="UNSIGNED_INT",_[_.FLOAT=5126]="FLOAT"}(C||(C={})),function(_){_[_.NEVER=512]="NEVER",_[_.LESS=513]="LESS",_[_.EQUAL=514]="EQUAL",_[_.LEQUAL=515]="LEQUAL",_[_.GREATER=516]="GREATER",_[_.NOTEQUAL=517]="NOTEQUAL",_[_.GEQUAL=518]="GEQUAL",_[_.ALWAYS=519]="ALWAYS"}(O||(O={})),function(_){_[_.ZERO=0]="ZERO",_[_.KEEP=7680]="KEEP",_[_.REPLACE=7681]="REPLACE",_[_.INCR=7682]="INCR",_[_.DECR=7683]="DECR",_[_.INVERT=5386]="INVERT",_[_.INCR_WRAP=34055]="INCR_WRAP",_[_.DECR_WRAP=34056]="DECR_WRAP"}(I||(I={})),function(_){_[_.NEAREST=9728]="NEAREST",_[_.LINEAR=9729]="LINEAR",_[_.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",_[_.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",_[_.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",_[_.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(L||(L={})),function(_){_[_.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",_[_.REPEAT=10497]="REPEAT",_[_.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(D||(D={})),function(_){_[_.TEXTURE_2D=3553]="TEXTURE_2D",_[_.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",_[_.TEXTURE_3D=32879]="TEXTURE_3D",_[_.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",_[_.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",_[_.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",_[_.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",_[_.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",_[_.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(M||(M={})),function(_){_[_.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",_[_.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_[_.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",_[_.ALPHA=6406]="ALPHA",_[_.RGB=6407]="RGB",_[_.RGBA=6408]="RGBA",_[_.LUMINANCE=6409]="LUMINANCE",_[_.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",_[_.RED=6403]="RED",_[_.RG=33319]="RG",_[_.RED_INTEGER=36244]="RED_INTEGER",_[_.RG_INTEGER=33320]="RG_INTEGER",_[_.RGB_INTEGER=36248]="RGB_INTEGER",_[_.RGBA_INTEGER=36249]="RGBA_INTEGER"}(G||(G={})),function(_){_[_.RGBA4=32854]="RGBA4",_[_.R16F=33325]="R16F",_[_.RG16F=33327]="RG16F",_[_.RGB32F=34837]="RGB32F",_[_.RGBA16F=34842]="RGBA16F",_[_.R32F=33326]="R32F",_[_.RG32F=33328]="RG32F",_[_.RGBA32F=34836]="RGBA32F",_[_.R11F_G11F_B10F=35898]="R11F_G11F_B10F",_[_.RGB8=32849]="RGB8",_[_.RGBA8=32856]="RGBA8",_[_.RGB5_A1=32855]="RGB5_A1",_[_.R8=33321]="R8",_[_.RG8=33323]="RG8",_[_.R8I=33329]="R8I",_[_.R8UI=33330]="R8UI",_[_.R16I=33331]="R16I",_[_.R16UI=33332]="R16UI",_[_.R32I=33333]="R32I",_[_.R32UI=33334]="R32UI",_[_.RG8I=33335]="RG8I",_[_.RG8UI=33336]="RG8UI",_[_.RG16I=33337]="RG16I",_[_.RG16UI=33338]="RG16UI",_[_.RG32I=33339]="RG32I",_[_.RG32UI=33340]="RG32UI",_[_.RGB16F=34843]="RGB16F",_[_.RGB9_E5=35901]="RGB9_E5",_[_.SRGB8=35905]="SRGB8",_[_.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",_[_.RGB565=36194]="RGB565",_[_.RGBA32UI=36208]="RGBA32UI",_[_.RGB32UI=36209]="RGB32UI",_[_.RGBA16UI=36214]="RGBA16UI",_[_.RGB16UI=36215]="RGB16UI",_[_.RGBA8UI=36220]="RGBA8UI",_[_.RGB8UI=36221]="RGB8UI",_[_.RGBA32I=36226]="RGBA32I",_[_.RGB32I=36227]="RGB32I",_[_.RGBA16I=36232]="RGBA16I",_[_.RGB16I=36233]="RGB16I",_[_.RGBA8I=36238]="RGBA8I",_[_.RGB8I=36239]="RGB8I",_[_.R8_SNORM=36756]="R8_SNORM",_[_.RG8_SNORM=36757]="RG8_SNORM",_[_.RGB8_SNORM=36758]="RGB8_SNORM",_[_.RGBA8_SNORM=36759]="RGBA8_SNORM",_[_.RGB10_A2=32857]="RGB10_A2",_[_.RGB10_A2UI=36975]="RGB10_A2UI"}(P||(P={})),function(_){_[_.FLOAT=5126]="FLOAT",_[_.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",_[_.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",_[_.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",_[_.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",_[_.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",_[_.BYTE=5120]="BYTE",_[_.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",_[_.SHORT=5122]="SHORT",_[_.UNSIGNED_INT=5125]="UNSIGNED_INT",_[_.INT=5124]="INT",_[_.HALF_FLOAT=5131]="HALF_FLOAT",_[_.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",_[_.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",_[_.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",_[_.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(U||(U={})),function(_){_[_.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",_[_.STENCIL_INDEX8=36168]="STENCIL_INDEX8",_[_.DEPTH_STENCIL=34041]="DEPTH_STENCIL",_[_.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",_[_.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",_[_.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",_[_.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(B||(B={})),function(_){_[_.STATIC_DRAW=35044]="STATIC_DRAW",_[_.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",_[_.STREAM_DRAW=35040]="STREAM_DRAW",_[_.STATIC_READ=35045]="STATIC_READ",_[_.DYNAMIC_READ=35049]="DYNAMIC_READ",_[_.STREAM_READ=35041]="STREAM_READ",_[_.STATIC_COPY=35046]="STATIC_COPY",_[_.DYNAMIC_COPY=35050]="DYNAMIC_COPY",_[_.STREAM_COPY=35042]="STREAM_COPY"}(F||(F={})),function(_){_[_.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",_[_.VERTEX_SHADER=35633]="VERTEX_SHADER"}(H||(H={})),function(_){_[_.FRAMEBUFFER=36160]="FRAMEBUFFER",_[_.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",_[_.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(n||(n={}));const Y=33984;var V,X,f;!function(_){_[_.Texture=0]="Texture",_[_.BufferObject=1]="BufferObject",_[_.VertexArrayObject=2]="VertexArrayObject",_[_.Shader=3]="Shader",_[_.Program=4]="Program",_[_.FramebufferObject=5]="FramebufferObject",_[_.Renderbuffer=6]="Renderbuffer",_[_.Sync=7]="Sync",_[_.UNCOUNTED=8]="UNCOUNTED",_[_.LinesOfCode=8]="LinesOfCode",_[_.Uniform=9]="Uniform",_[_.COUNT=10]="COUNT"}(V||(V={})),function(_){_[_.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",_[_.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",_[_.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",_[_.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",_[_.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",_[_.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",_[_.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",_[_.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",_[_.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",_[_.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",_[_.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",_[_.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",_[_.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",_[_.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",_[_.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",_[_.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(X||(X={})),function(_){_[_.NONE=0]="NONE",_[_.BACK=1029]="BACK"}(f||(f={}));const t=33306;var c,o,u,i,e,r,W;!function(_){_[_.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",_[_.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",_[_.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",_[_.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",_[_.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",_[_.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",_[_.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",_[_.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",_[_.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",_[_.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",_[_.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",_[_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(c||(c={})),function(_){_[_.FLOAT=5126]="FLOAT",_[_.FLOAT_VEC2=35664]="FLOAT_VEC2",_[_.FLOAT_VEC3=35665]="FLOAT_VEC3",_[_.FLOAT_VEC4=35666]="FLOAT_VEC4",_[_.INT=5124]="INT",_[_.INT_VEC2=35667]="INT_VEC2",_[_.INT_VEC3=35668]="INT_VEC3",_[_.INT_VEC4=35669]="INT_VEC4",_[_.BOOL=35670]="BOOL",_[_.BOOL_VEC2=35671]="BOOL_VEC2",_[_.BOOL_VEC3=35672]="BOOL_VEC3",_[_.BOOL_VEC4=35673]="BOOL_VEC4",_[_.FLOAT_MAT2=35674]="FLOAT_MAT2",_[_.FLOAT_MAT3=35675]="FLOAT_MAT3",_[_.FLOAT_MAT4=35676]="FLOAT_MAT4",_[_.SAMPLER_2D=35678]="SAMPLER_2D",_[_.SAMPLER_CUBE=35680]="SAMPLER_CUBE",_[_.UNSIGNED_INT=5125]="UNSIGNED_INT",_[_.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",_[_.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",_[_.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",_[_.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",_[_.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",_[_.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",_[_.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",_[_.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",_[_.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",_[_.SAMPLER_3D=35679]="SAMPLER_3D",_[_.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",_[_.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",_[_.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",_[_.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",_[_.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",_[_.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",_[_.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",_[_.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",_[_.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",_[_.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",_[_.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",_[_.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(o||(o={})),function(_){_[_.OBJECT_TYPE=37138]="OBJECT_TYPE",_[_.SYNC_CONDITION=37139]="SYNC_CONDITION",_[_.SYNC_STATUS=37140]="SYNC_STATUS",_[_.SYNC_FLAGS=37141]="SYNC_FLAGS"}(u||(u={})),function(_){_[_.UNSIGNALED=37144]="UNSIGNALED",_[_.SIGNALED=37145]="SIGNALED"}(i||(i={})),function(_){_[_.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",_[_.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",_[_.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",_[_.WAIT_FAILED=37149]="WAIT_FAILED"}(e||(e={})),function(_){_[_.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(r||(r={})),function(_){_[_.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(W||(W={}));


/***/ })

};
;