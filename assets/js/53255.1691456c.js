"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[53255],{15053:(e,t,r)=>{r.d(t,{F:()=>a,Y:()=>l});var i=r(66866),s=r(21564),n=(r(39831),r(539),r(9272),r(63863));const o={write:{allowNull:!0}},l={type:r(76137).A,json:{origins:{"web-map":o,"portal-item":o}}},a=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return(0,i._)([(0,s.MZ)(l)],t.prototype,"featureEffect",void 0),t=(0,i._)([(0,n.$)("esri.layers.mixins.FeatureEffectLayer")],t),t}},94783:(e,t,r)=>{r.d(t,{J:()=>S});var i=r(66866),s=r(85251),n=r(21564),o=r(39831),l=r(539),a=(r(9272),r(63863)),p=r(94301),u=r(92568),d=r(47347),c=r(63926),y=r(68745),f=r(98849),v=r(69075),b=r(54746),m=r(18443),h=r(23369);o.A.add("esri-cluster-arcade-enabled",!0);const w=(0,o.A)("esri-cluster-arcade-enabled"),_=new Set(["simple-line","simple-fill","picture-fill"]);function g(e,t){let r=t.clone();if(!x(r))return r;if(t.symbols.some((e=>_.has(e.type)))&&(r=new d.A({symbol:new h.A})),r.authoringInfo||(r.authoringInfo=new m.A),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const t=(r.visualVariables||[]).filter((e=>"$view.scale"!==e.valueExpression));t.forEach((t=>{"rotation"===t.type?t.field?t.field=A(e,t.field,"avg_angle","number"):t.valueExpression&&(t.field=M(e,t.valueExpression,"avg_angle","number"),t.valueExpression=null):t.normalizationField?(t.field=A(e,t.field,"avg_norm","number",t.normalizationField),t.normalizationField=null):t.field?t.field=A(e,t.field,"avg","number"):t.valueExpression&&(t.field=M(e,t.valueExpression,"avg","number"),t.valueExpression=null)})),r.visualVariables=t}switch(r.type){case"simple":break;case"pie-chart":for(const t of r.attributes)t.field?t.field=A(e,t.field,"sum","number"):t.valueExpression&&(t.field=M(e,t.valueExpression,"sum","number"),t.valueExpression=null);break;case"unique-value":r.field?r.field=A(e,r.field,"mode","string"):r.valueExpression&&(r.field=M(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=A(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=A(e,r.field,"avg","number"):r.valueExpression&&(r.field=M(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const x=e=>{const t=t=>l.A.getLogger("esri.views.2d.layers.support.clusterUtils").error(new f.A("Unsupported-renderer",t,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if("field"!==r)return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!w){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some((e=>!(!("valueExpression"in e)||!e.valueExpression))))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function M(e,t,r,i){const s=(0,v.d)(t),n="mode"===r?`cluster_type_${s}`:"sum"===r?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some((e=>e.name===n))||e.push(new p.A({name:n,isAutoGenerated:!0,onStatisticExpression:new b.A({expression:t,returnType:i}),statisticType:r})),n}function A(e,t,r,i,s){if("cluster_count"===t||e.some((e=>e.name===t)))return t;const n=function(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const e=r,i="field",s=t.toLowerCase()+",norm:"+i+","+e.toLowerCase();return"cluster_avg_"+(0,v.d)(s)}}}(r,t,s);return e.some((e=>e.name===n))||("avg_norm"===r?e.push(new p.A({name:n,isAutoGenerated:!0,onStatisticExpression:new b.A({expression:`$feature.${t} / $feature.${s}`,returnType:i}),statisticType:"avg"})):e.push(new p.A({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),n}const S=e=>{let t=class extends e{constructor(...e){super(...e),this.addHandles((0,s.wB)((()=>this.renderer),(()=>{if(this.featureReduction){const e=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",e)}}),s.OH))}set featureReduction(e){const t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}set renderer(e){}_withClusterVariable(e,t,r){const i=e.clone();return"visualVariables"in i&&(i.visualVariables||(i.visualVariables=[]),i.visualVariables.some((e=>"size"===e.type))||i.visualVariables.push(new c.A({field:"cluster_count",stops:[new y.A({value:1}),new y.A({useMinValue:!0,size:t}),new y.A({useMaxValue:!0,size:r})]}))),i}_normalizeFeatureReduction(e){if("cluster"!==e?.type)return e;const t=e.clone(),r=[new p.A({name:"cluster_count",alias:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],i=(t.fields??[]).filter((e=>!e.isAutoGenerated)),s=e.renderer&&!e.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:n,clusterMaxSize:o}=t;if(s){t.fields=[...r,...i];const e=this._withClusterVariable(t.renderer,n,o);return t.effectiveFeatureRenderer=e,t.effectiveClusterRenderer=e,t}if(e.symbol){if(t.fields=[...r,...i],t.renderer=null,!this.renderer)return t.effectiveFeatureRenderer=null,t.effectiveClusterRenderer=null,t;const s=g(r,this.renderer),l=this._withClusterVariable(s,n,o),a="visualVariables"in l&&l.visualVariables?l.visualVariables:[],p=new d.A({symbol:e.symbol,visualVariables:a});return t.fields=[...r,...i],t.effectiveFeatureRenderer=l,t.effectiveClusterRenderer=p,t}if(!this.renderer)return e;const l=g(r,this.renderer);t.fields=[...r,...i],t.renderer=l;const a=this._withClusterVariable(l,n,o);return t.effectiveFeatureRenderer=a,t.effectiveClusterRenderer=a,t}};return(0,i._)([(0,n.MZ)(u.d)],t.prototype,"featureReduction",null),t=(0,i._)([(0,a.$)("esri.layers.mixins.FeatureReductionLayer")],t),t}},40021:(e,t,r)=>{r.d(t,{d:()=>_});var i=r(66866),s=r(21564),n=(r(39831),r(539),r(9272),r(63863)),o=r(56542),l=r(24793),a=r(21877),p=r(76724),u=r(77542),d=r(94301),c=r(76592),y=r(61826),f=r(53835);let v=class extends(l.A.ClonableMixin(a.A)){constructor(e){super(e),this.labelingInfo=null,this.labelsVisible=!0,this.renderer=null,this.visible=!0}};(0,i._)([(0,s.MZ)({type:[y.A],json:{write:!0}})],v.prototype,"labelingInfo",void 0),(0,i._)([(0,s.MZ)(c.kF)],v.prototype,"labelsVisible",void 0),(0,i._)([(0,s.MZ)({types:f.Hg,json:{write:!0}})],v.prototype,"renderer",void 0),(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"visible",void 0),v=(0,i._)([(0,n.$)("esri.layers.support.TrackPartInfo")],v);var b=r(47347),m=r(26207),h=r(16984);let w=class extends(l.A.ClonableMixin(a.A)){constructor(e){super(e),this.enabled=!0,this.fields=[],this.latestObservations=new v({renderer:new b.A({symbol:m.UK.clone()})}),this.maxDisplayDuration=null,this.maxDisplayObservationsPerTrack=0,this.popupEnabled=!0,this.popupTemplate=null,this.previousObservations=new v({renderer:new b.A({symbol:m.UK.clone()})}),this.trackLines=new v({renderer:new b.A({symbol:m.A7.clone()})}),this.timeField="startTimeField"}writeFields(e,t,r){const i=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,p.sM)(r,i,t)}};(0,i._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],w.prototype,"enabled",void 0),(0,i._)([(0,s.MZ)({type:[d.A],json:{write:!0}})],w.prototype,"fields",void 0),(0,i._)([(0,u.K)("fields")],w.prototype,"writeFields",null),(0,i._)([(0,s.MZ)({type:v,json:{write:!0}})],w.prototype,"latestObservations",void 0),(0,i._)([(0,s.MZ)({type:h.T,json:{write:!0}})],w.prototype,"maxDisplayDuration",void 0),(0,i._)([(0,s.MZ)({type:Number,json:{write:!0}})],w.prototype,"maxDisplayObservationsPerTrack",void 0),(0,i._)([(0,s.MZ)(c.M6)],w.prototype,"popupEnabled",void 0),(0,i._)([(0,s.MZ)({type:o.A,json:{name:"popupInfo",write:!0}})],w.prototype,"popupTemplate",void 0),(0,i._)([(0,s.MZ)({type:v,json:{write:!0}})],w.prototype,"previousObservations",void 0),(0,i._)([(0,s.MZ)({type:v,json:{write:!0}})],w.prototype,"trackLines",void 0),(0,i._)([(0,s.MZ)({type:["timeReceived","startTimeField","endTimeField"],json:{read:!0,write:!0}})],w.prototype,"timeField",void 0),w=(0,i._)([(0,n.$)("esri.layers.support.TrackInfo")],w);const _=e=>{let t=class extends e{constructor(){super(...arguments),this.trackInfo=null}};return(0,i._)([(0,s.MZ)({type:w})],t.prototype,"trackInfo",void 0),t=(0,i._)([(0,n.$)("esri.layers.mixins.TrackableLayer")],t),t}},94301:(e,t,r)=>{r.d(t,{A:()=>u});var i,s=r(66866),n=r(21877),o=r(19251),l=r(21564),a=(r(39831),r(539),r(63863)),p=r(54746);let u=class extends n.A{static{i=this}constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new i({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:(0,o.o8)(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};(0,s._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],u.prototype,"isAutoGenerated",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"name",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"alias",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"onStatisticField",void 0),(0,s._)([(0,l.MZ)({type:p.A,json:{write:!0}})],u.prototype,"onStatisticExpression",void 0),(0,s._)([(0,l.MZ)({type:String,json:{write:!0}})],u.prototype,"statisticType",void 0),u=i=(0,s._)([(0,a.$)("esri.layers.support.AggregateField")],u)},54746:(e,t,r)=>{r.d(t,{A:()=>a});var i=r(66866),s=r(24793),n=r(21877),o=r(21564),l=(r(39831),r(539),r(9272),r(63863));let a=class extends(s.A.ClonableMixin(n.A)){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"expression",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"title",void 0),(0,i._)([(0,o.MZ)({type:String,json:{write:!0}})],a.prototype,"returnType",void 0),a=(0,i._)([(0,l.$)("esri.layers.support.ExpressionInfo")],a)},18475:(e,t,r)=>{r.d(t,{c:()=>l});var i=r(66866),s=r(21877),n=r(21564),o=(r(39831),r(539),r(9272),r(63863));let l=class extends s.A{constructor(){super(...arguments),this.type=null}};(0,i._)([(0,n.MZ)({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],l.prototype,"type",void 0),l=(0,i._)([(0,o.$)("esri.layers.support.FeatureReduction")],l)},99989:(e,t,r)=>{r.d(t,{A:()=>a});var i,s=r(66866),n=r(21564),o=(r(39831),r(539),r(9272),r(63863)),l=r(18475);let a=i=class extends l.c{constructor(e){super(e),this.type="selection"}clone(){return new i}};(0,s._)([(0,n.MZ)({type:["selection"]})],a.prototype,"type",void 0),a=i=(0,s._)([(0,o.$)("esri.layers.support.FeatureReductionSelection")],a)},92568:(e,t,r)=>{r.d(t,{d:()=>R});var i,s=r(73324),n=r(18475),o=r(66866),l=r(56542),a=r(19251),p=r(76724),u=r(89882),d=r(21564),c=r(73446),y=r(28902),f=r(75094),v=r(63863),b=r(77542),m=r(94301),h=r(76592),w=r(52506),_=r(61826),g=r(48887),x=r(53835);let M=i=class extends n.c{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=(0,u.cr)("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,p.sM)(r,i,t)}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?(0,g.L)(i,t,r)??void 0:(0,w.PD)(t,r)}clone(){return new i({fields:(0,a.o8)(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:(0,a.o8)(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:(0,a.o8)(this.popupTemplate),renderer:(0,a.o8)(this.renderer),binType:(0,a.o8)(this.binType),size:this.size})}};(0,o._)([(0,y.e)({binning:"binning"})],M.prototype,"type",void 0),(0,o._)([(0,y.e)({geohash:"geohash",square:"square"}),(0,d.MZ)({type:["geohash","square"]})],M.prototype,"binType",void 0),(0,o._)([(0,d.MZ)({type:Number,json:{write:!0}})],M.prototype,"fixedBinLevel",void 0),(0,o._)([(0,d.MZ)({type:[_.A],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],M.prototype,"labelingInfo",void 0),(0,o._)([(0,d.MZ)(h.kF)],M.prototype,"labelsVisible",void 0),(0,o._)([(0,d.MZ)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],M.prototype,"maxScale",void 0),(0,o._)([(0,d.MZ)(h.M6)],M.prototype,"popupEnabled",void 0),(0,o._)([(0,d.MZ)({type:l.A,json:{name:"popupInfo",write:!0}})],M.prototype,"popupTemplate",void 0),(0,o._)([(0,d.MZ)({cast:e=>"auto"===e?e:(0,c.GB)((0,u.cr)(e))})],M.prototype,"size",void 0),(0,o._)([(0,d.MZ)({type:[m.A],json:{write:!0}})],M.prototype,"fields",void 0),(0,o._)([(0,b.K)("fields")],M.prototype,"writeFields",null),(0,o._)([(0,d.MZ)({types:x.Hg,json:{write:{target:"drawingInfo.renderer"}}})],M.prototype,"renderer",void 0),(0,o._)([(0,f.w)("renderer",["drawingInfo.renderer"])],M.prototype,"readRenderer",null),M=i=(0,o._)([(0,v.$)("esri.layers.support.FeatureReductionBinning")],M);var A,S=r(21877),Z=r(47347),F=r(66961);function I(e){return"simple"===e.type&&!e.visualVariables?.length}let E=A=class extends S.A{constructor(e){super(e),this.type="cluster",this.clusterRadius=(0,u.cr)("80px"),this.clusterMinSize=(0,u.cr)("12px"),this.clusterMaxSize=(0,u.cr)("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?I(i)?null:(0,g.L)(i,t,r)??void 0:(0,w.PD)(t,r)}readSymbol(e,t,r){const i=t.drawingInfo?.renderer;if(i?.authoringInfo?.isAutoGenerated)return null;if(i&&I(i)){const e=(0,g.L)(i,t,r);return e?.symbol}return null}writeSymbol(e,t,r,i){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const r=new Z.A({symbol:e});t.drawingInfo={renderer:r.write({},i)}}}writeFields(e,t,r){const i=e.filter((e=>"avg_angle"!==e.statisticType)).map((e=>e.toJSON()));(0,p.sM)(r,i,t)}readFields(e,t,r){return e.filter((e=>!e.isAutoGenerated)).map((e=>m.A.fromJSON(e)))}clone(){return new A({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:(0,a.o8)(this.labelingInfo),labelsVisible:this.labelsVisible,fields:(0,a.o8)(this.fields),maxScale:this.maxScale,renderer:(0,a.o8)(this.renderer),symbol:(0,a.o8)(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:(0,a.o8)(this.popupTemplate)})}};(0,o._)([(0,d.MZ)({type:["cluster"],readOnly:!0,json:{write:!0}})],E.prototype,"type",void 0),(0,o._)([(0,d.MZ)({cast:e=>"auto"===e?e:(0,c.GB)((0,u.cr)(e)),json:{write:!0}})],E.prototype,"clusterRadius",void 0),(0,o._)([(0,d.MZ)({type:Number,cast:u.cr,json:{write:!0}})],E.prototype,"clusterMinSize",void 0),(0,o._)([(0,d.MZ)({type:Number,cast:u.cr,json:{write:!0}})],E.prototype,"clusterMaxSize",void 0),(0,o._)([(0,d.MZ)({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],E.prototype,"maxScale",void 0),(0,o._)([(0,d.MZ)(h.M6)],E.prototype,"popupEnabled",void 0),(0,o._)([(0,d.MZ)({type:l.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],E.prototype,"popupTemplate",void 0),(0,o._)([(0,d.MZ)({types:x.Hg,json:{write:{target:"drawingInfo.renderer"}}})],E.prototype,"renderer",void 0),(0,o._)([(0,f.w)("renderer",["drawingInfo.renderer"])],E.prototype,"readRenderer",null),(0,o._)([(0,d.MZ)({types:F.q8})],E.prototype,"symbol",void 0),(0,o._)([(0,f.w)("symbol",["drawingInfo.renderer"])],E.prototype,"readSymbol",null),(0,o._)([(0,b.K)("symbol")],E.prototype,"writeSymbol",null),(0,o._)([(0,d.MZ)({type:[_.A],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],E.prototype,"labelingInfo",void 0),(0,o._)([(0,d.MZ)(h.kF)],E.prototype,"labelsVisible",void 0),(0,o._)([(0,d.MZ)({type:[m.A],json:{write:!0}})],E.prototype,"fields",void 0),(0,o._)([(0,b.K)("fields")],E.prototype,"writeFields",null),(0,o._)([(0,f.w)("fields")],E.prototype,"readFields",null),E=A=(0,o._)([(0,v.$)("esri.layers.support.FeatureReductionCluster")],E);var T=r(99989);const j={key:"type",base:n.c,typeMap:{cluster:E,binning:M}},R={types:{key:"type",base:n.c,typeMap:{selection:T.A,cluster:E,binning:M}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:j},"portal-item":{types:j},"web-scene":{types:{key:"type",base:n.c,typeMap:{selection:T.A}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:s.K}}}}}}}]);