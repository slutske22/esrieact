"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[24298],{31803:(t,e,n)=>{n.d(e,{N:()=>g,a:()=>b,c:()=>y,e:()=>m,f:()=>E,g:()=>I,k:()=>A,l:()=>M,m:()=>N,n:()=>v,o:()=>F,p:()=>C,s:()=>Z,w:()=>w});n(39831),n(539);var r=n(92504),i=n(21742),o=n(24121),s=n(58359),a=n(2662),c=n(28152),u=n(65257),l=n(58331),h=n(10151);function f(t,e){const n=(0,o.l)(t),i=(0,r.YN)(t[2]/n),s=Math.atan2(t[1]/n,t[0]/n);return(0,o.i)(e,n,i,s),e}var d=n(16597),p=n(45573);const g=y();function y(){return(0,c.vt)()}const v=a.e,_=a.e;function m(t,e){return(0,a.c)(e,t)}function M(t,e){return(0,c.fA)(t[0],t[1],t[2],e)}function w(t){return t}function I(t){return t[3]}function b(t){return t}function E(t,e,n,r){return(0,c.fA)(t,e,n,r)}function k(t,e,n){if(null==e)return!1;if(!T(t,e,S))return!1;let{t0:r,t1:i}=S;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(n){const{origin:t,direction:i}=e;n[0]=t[0]+i[0]*r,n[1]=t[1]+i[1]*r,n[2]=t[2]+i[2]*r}return!0}function N(t,e,n){const r=(0,h.Cr)(e,n);if(!T(t,r,S))return[];const{origin:i,direction:a}=r,{t0:c,t1:l}=S,f=e=>{const n=(0,s.vt)();return(0,o.b)(n,i,a,e),C(t,n,n)};return Math.abs(c-l)<(0,u.FD)()?[f(c)]:[f(c),f(l)]}const S={t0:0,t1:0};function T(t,e,n){const{origin:r,direction:i}=e,o=q;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const s=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===s)return!1;const a=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),c=a*a-4*s*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(c<0)return!1;const u=Math.sqrt(c);return n.t0=(-a-u)/(2*s),n.t1=(-a+u)/(2*s),!0}const q=(0,s.vt)();function A(t,e){return k(t,e,null)}function P(t,e,n){const r=p.rq.get(),s=p.Rc.get();(0,o.h)(r,e.origin,e.direction);const a=I(t);(0,o.h)(n,r,e.origin),(0,o.g)(n,n,1/(0,o.l)(n)*a);const c=R(t,e.origin),u=(0,d.g7)(e.origin,n);return(0,i.$0)(s,u+c,r),(0,o.t)(n,n,s),n}function C(t,e,n){const r=(0,o.d)(p.rq.get(),e,t),i=(0,o.g)(p.rq.get(),r,t[3]/(0,o.l)(r));return(0,o.f)(n,i,t)}function R(t,e){const n=(0,o.d)(p.rq.get(),e,t),i=(0,o.l)(n),s=I(t),a=s+Math.abs(s-i);return(0,r.XM)(s/a)}const x=(0,s.vt)();function V(t,e,n,r){const i=(0,o.d)(x,e,t);switch(n){case l._.X:{const t=f(i,x)[2];return(0,o.i)(r,-Math.sin(t),Math.cos(t),0)}case l._.Y:{const t=f(i,x),e=t[1],n=t[2],s=Math.sin(e);return(0,o.i)(r,-s*Math.cos(n),-s*Math.sin(n),Math.cos(e))}case l._.Z:return(0,o.n)(r,i);default:return}}function B(t,e){const n=(0,o.d)(L,e,t);return(0,o.l)(n)-t[3]}function F(t,e){const n=(0,o.s)(t,e),r=I(t);return n<=r*r}const L=(0,s.vt)(),O=y(),Z=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:g,altitudeAt:B,angleToSilhouette:R,axisAt:V,cameraFrustumCoverage:function(t,e,n,r){const i=I(t),o=i*i,s=e+.5*Math.PI,a=n*n+o-2*Math.cos(s)*n*i,c=Math.sqrt(a),u=a-o;if(u<=0)return.5;const l=Math.sqrt(u),h=Math.acos(l/c)-Math.asin(i/(c/Math.sin(s)));return Math.min(1,(h+.5*r)/r)},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,e,n){return k(t,e,n)?n:((0,h.oC)(e,t,n),C(t,n,n))},closestPointOnSilhouette:P,containsPoint:F,copy:m,create:y,distanceToSilhouette:function(t,e){const n=(0,o.d)(p.rq.get(),e,t),r=(0,o.k)(n),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,e,n){return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=t[3]+e,n},equals:_,exactEquals:v,fromCenterAndRadius:M,fromRadius:function(t,e){return t[0]=t[1]=t[2]=0,t[3]=e,t},fromValues:E,getCenter:b,getExtent:function(t,e){return e},getRadius:I,intersectLine:N,intersectRay:k,intersectRayClosestSilhouette:function(t,e,n){if(k(t,e,n))return n;const r=P(t,e,p.rq.get());return(0,o.f)(n,e.origin,(0,o.g)(p.rq.get(),e.direction,(0,o.j)(e.origin,r)/(0,o.l)(e.direction))),n},intersectsRay:A,projectPoint:C,setAltitudeAt:function(t,e,n,r){const i=B(t,e),s=V(t,e,l._.Z,L),a=(0,o.g)(L,s,n-i);return(0,o.f)(r,e,a)},setExtent:function(t,e,n){return t!==n&&m(t,n),n},tmpSphere:O,union:function(t,e,n=(0,c.vt)()){const r=(0,o.j)(t,e),i=t[3],s=e[3];return r+s<i?((0,a.c)(n,t),n):r+i<s?((0,a.c)(n,e),n):((0,o.m)(n,t,e,(r+s-i)/(2*r)),n[3]=(r+i+s)/2,n)},wrap:w},Symbol.toStringTag,{value:"Module"}))},92114:(t,e,n)=>{n.d(e,{I:()=>i});var r=n(37103);class i{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},42609:(t,e,n)=>{n.d(e,{W:()=>a,g:()=>s});var r=n(58359),i=n(68490),o=n(84119);function s(t,e,n,r){if((0,i.canProjectWithoutEngine)(t.spatialReference,n)){c[0]=t.x,c[1]=t.y;const i=t.z;return c[2]=i??r??0,(0,o.projectBuffer)(c,t.spatialReference,0,e,n,0)}const s=(0,i.tryProjectWithZConversion)(t,n);return!!s&&(e[0]=s?.x,e[1]=s?.y,e[2]=s?.z??r??0,!0)}async function a(t,e,n,r,o){return await(0,i.initializeProjection)(t.spatialReference,n,null,o),s(t,e,n,r)}const c=(0,r.vt)()},42120:(t,e,n)=>{n.d(e,{F:()=>o});n(68490);var r=n(78983),i=n(42609);function o(t,e,n,r,o){return!(null==e||null==r||t.length<2)&&(s.x=t[0],s.y=t[1],s.z=t[2],s.spatialReference=e,(0,i.g)(s,n,r,o))}const s=(0,n(29394).T)(0,0,0,r.A.WGS84)},32937:(t,e,n)=>{n.d(e,{Y0:()=>u,lO:()=>l});var r=n(47936),i=n(78983),o=n(87926);const s=new i.A(r.fv),a=new i.A(r.FY),c=new i.A(r.LJ),u=new i.A(r.Ro);function l(t){const e=h.get(t);if(e)return e;let n=s;if(t)if(t===a)n=a;else if(t===c)n=c;else{const e=t.wkid,r=t.latestWkid;if(null!=e||null!=r)(0,o.tl)(e)||(0,o.tl)(r)?n=a:((0,o.ZL)(e)||(0,o.ZL)(r))&&(n=c);else{const e=t.wkt2??t.wkt;if(e){const t=e.toUpperCase();t===f?n=a:t===d&&(n=c)}}}return h.set(t,n),n}const h=new Map,f=a.wkt.toUpperCase(),d=c.wkt.toUpperCase()},38774:(t,e,n)=>{n.d(e,{C:()=>h,Cr:()=>g,Io:()=>V,LV:()=>l,O_:()=>p,Qj:()=>f,T7:()=>q,Tj:()=>P,U5:()=>S,Ui:()=>T,Z1:()=>x,_I:()=>R,b6:()=>C,ci:()=>v,fA:()=>d,gv:()=>A,lU:()=>y,mN:()=>B,mP:()=>E,mR:()=>N,vt:()=>u,ze:()=>k});var r=n(92504),i=n(24121),o=n(58359),s=(n(2662),n(16597)),a=n(45573),c=n(72699);function u(t=Z){return[t[0],t[1],t[2],t[3]]}function l(t=Z[0],e=Z[1],n=Z[2],r=Z[3]){return d(t,e,n,r,a.Km.get())}function h(t,e){return d(e[0],e[1],e[2],e[3],t)}function f(t){return t}function d(t,e,n,r,i=u()){return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function p(t,e,n){const r=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function g(t,e,n,r=u()){const i=n[0]-e[0],o=n[1]-e[1],s=n[2]-e[2],a=t[0]-e[0],c=t[1]-e[1],l=t[2]-e[2],h=o*l-s*c,f=s*a-i*l,d=i*c-o*a,p=h*h+f*f+d*d,g=Math.abs(p-1)>1e-5&&p>1e-12?1/Math.sqrt(p):1;return r[0]=h*g,r[1]=f*g,r[2]=d*g,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function y(t,e,n,r=0,o=Math.floor(n*(1/3)),s=Math.floor(n*(2/3))){if(n<3)return!1;e(m,r);let a=o,c=!1;for(;a<n-1&&!c;)e(M,a),a++,c=!(0,i.q)(m,M);if(!c)return!1;for(a=Math.max(a,s),c=!1;a<n&&!c;)e(w,a),a++,(0,i.d)(I,m,M),(0,i.n)(I,I),(0,i.d)(b,M,w),(0,i.n)(b,b),c=!(0,i.q)(m,w)&&!(0,i.q)(M,w)&&Math.abs((0,i.e)(I,b))<_;return c?(g(m,M,w,t),!0):(0!==r||1!==o||2!==s)&&y(t,e,n,0,1,2)}function v(t,e,n=!0){const r=e.length/3;return y(t,((t,n)=>(0,i.i)(t,e[3*n+0],e[3*n+1],e[3*n+2])),n?r-1:r)}const _=.99619469809,m=(0,o.vt)(),M=(0,o.vt)(),w=(0,o.vt)(),I=(0,o.vt)(),b=(0,o.vt)();function E(t,e,n){return e!==t&&h(t,e),t[3]=-(0,i.e)(t,n),t}function k(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function N(t,e,n,r){return(0,i.h)(w,e,t),p(n,w,r)}function S(t,e,n,r){return L(O(t,e,(0,i.d)(a.rq.get(),n,e),D,r))}function T(t,e,n){return null!=e&&L(O(t,e.origin,e.direction,z,n))}function q(t,e,n){return L(O(t,e.origin,e.vector,U.NONE,n))}function A(t,e,n){return L(O(t,e.origin,e.vector,U.CLAMP,n))}function P(t,e){return B(t,e)>=0}function C(t,e){const n=(0,i.e)(t,e.ray.direction),r=-B(t,e.ray.origin);if(n>-1e-6&&n<1e-6)return r>0;const o=r/n;return n>0?o<e.c1&&(e.c1=o):o>e.c0&&(e.c0=o),e.c0<=e.c1}function R(t,e,n){const r=(0,i.g)(a.rq.get(),t,-t[3]),o=function(t,e,n){const r=(0,i.g)(a.rq.get(),t,(0,i.e)(t,e));return(0,i.d)(n,e,r),n}(t,(0,i.d)(a.rq.get(),e,r),a.rq.get());return(0,i.f)(n,o,r),n}function x(t,e,n,r){const o=t,u=a.rq.get(),l=a.rq.get();(0,c.VV)(o,u,l);const h=(0,i.d)(a.rq.get(),n,e),f=(0,s.gr)(u,h),d=(0,s.gr)(l,h),p=(0,s.gr)(o,h);return(0,i.i)(r,f,d,p)}function V(t,e){return Math.abs(B(t,e))}function B(t,e){return(0,i.e)(t,e)+t[3]}var F;function L(t){return t===F.INTERSECTS_INSIDE_OUT||t===F.INTERSECTS_OUTSIDE_IN}function O(t,e,n,o,s){const a=(0,i.e)(t,n),c=B(t,e);if(0===a)return c>=0?F.INSIDE:F.OUTSIDE;let u=-c/a;return o&U.CLAMP&&(u=(0,r.qE)(u,0,1)),!(o&U.INFINITE_MIN)&&u<0||!(o&U.INFINITE_MAX)&&u>1?c>=0?F.INSIDE:F.OUTSIDE:((0,i.f)(s,e,(0,i.g)(s,n,u)),c>=0?F.INTERSECTS_INSIDE_OUT:F.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"}(F||(F={}));const Z=[0,0,1,0];var U;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(U||(U={}));const D=U.INFINITE_MIN|U.INFINITE_MAX,z=U.INFINITE_MAX},10151:(t,e,n)=>{n.d(e,{C:()=>h,Cr:()=>f,LV:()=>l,kb:()=>d,oC:()=>p,vt:()=>c});n(85569);var r=n(92114),i=(n(25423),n(78607)),o=n(24121),s=n(58359),a=n(45573);function c(t){return t?u((0,s.o8)(t.origin),(0,s.o8)(t.direction)):u((0,s.vt)(),(0,s.vt)())}function u(t,e){return{origin:t,direction:e}}function l(t,e){const n=g.get();return n.origin=t,n.direction=e,n}function h(t,e=c()){return function(t,e,n=c()){return(0,o.c)(n.origin,t),(0,o.c)(n.direction,e),n}(t.origin,t.direction,e)}function f(t,e,n=c()){return(0,o.c)(n.origin,t),(0,o.d)(n.direction,e,t),n}function d(t,e){const n=(0,o.h)(a.rq.get(),(0,o.n)(a.rq.get(),t.direction),(0,o.d)(a.rq.get(),e,t.origin));return(0,o.e)(n,n)}function p(t,e,n){const r=(0,o.e)(t.direction,(0,o.d)(n,e,t.origin));return(0,o.f)(n,t.origin,(0,o.g)(n,t.direction,r)),n}const g=new r.I((()=>c()));(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,i.vt)()},16597:(t,e,n)=>{n.d(e,{EJ:()=>u,_I:()=>s,g7:()=>c,gr:()=>a});var r=n(92504),i=n(24121),o=n(58359);function s(t,e,n){const r=(0,i.e)(t,e)/(0,i.e)(t,t);return(0,i.g)(n,t,r)}function a(t,e){return(0,i.e)(t,e)/(0,i.l)(t)}function c(t,e){const n=(0,i.e)(t,e)/((0,i.l)(t)*(0,i.l)(e));return-(0,r.XM)(n)}function u(t,e,n){(0,i.n)(l,t),(0,i.n)(h,e);const o=(0,i.e)(l,h),s=(0,r.XM)(o),a=(0,i.h)(l,l,h);return(0,i.e)(a,n)<0?2*Math.PI-s:s}const l=(0,o.vt)(),h=(0,o.vt)()},45573:(t,e,n)=>{n.d(e,{Rc:()=>p,J8:()=>g,oG:()=>h,rq:()=>f,Km:()=>d});n(39831);var r=n(37103),i=n(78607),o=n(86128),s=n(38911),a=n(59646),c=n(58359),u=n(28152);class l{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new l(a.vt)}static createVec3f64(){return new l(c.vt)}static createVec4f64(){return new l(u.vt)}static createMat3f64(){return new l(i.vt)}static createMat4f64(){return new l(o.vt)}static createQuatf64(){return new l(s.vt)}get test(){}}const h=l.createVec2f64(),f=l.createVec3f64(),d=l.createVec4f64(),p=(l.createMat3f64(),l.createMat4f64()),g=l.createQuatf64()},29394:(t,e,n)=>{function r(t,e,n,r){return{x:t,y:e,z:n,hasZ:null!=n,hasM:!1,spatialReference:r,type:"point"}}function i(t,e,n,r,i){t.x=e,t.y=n,t.z=r,t.hasZ=null!=r,t.spatialReference=i}n.d(e,{J:()=>i,T:()=>r})},27451:(t,e,n)=>{n.d(e,{$7:()=>k,B:()=>E,Fo:()=>w,M7:()=>T,NN:()=>f,Q5:()=>I,Tq:()=>A,Up:()=>b,XF:()=>S,Ze:()=>v,bK:()=>a,bh:()=>h,id:()=>_,ky:()=>l,qt:()=>q,tW:()=>N,v9:()=>d,w7:()=>c,wF:()=>s,wS:()=>m,wz:()=>g,x:()=>p,xS:()=>M,ze:()=>u});var r=n(92976),i=n(97046);function o(t){return t?q:A}function s(t,e){return e?.mode?e.mode:o(t).mode}function a(t,e){return null!=e?e:o(t)}function c(t,e){return s(null==t||(t.hasZ??!1),e)}function u(t,e){return a(null==t||(t.hasZ??!1),e)}function l(t){const e=y(t);return c(t.geometry,e)}function h(t){const e=y(t),n=c(t.geometry,e),r=null!=e&&"on-the-ground"!==n?T(e):0,i=e?.featureExpressionInfo;return{mode:n,offset:r,featureExpressionInfo:i}}function f(t){return g(h(t))}function d(t){return g(t)||p(t)}function p(t){return"0"===t?.featureExpressionInfo?.expression}function g(t){if(!t)return!1;if("on-the-ground"===t.mode)return!1;const e=t?.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!e||"0"===e)}function y(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function v(t,e){if(!t?.offset)return 0;const{offset:n,unit:i}=t;if("decimal-degrees"===i)return 0;const o="unknown"!==i&&i?i:"meters",s=(0,r.mq)(e);return s?(0,r.oU)(n,o,s):0}function _(t,e,n){if(!n?.mode)return;const r=t.hasZ?t.z:0,i=v(n,t.spatialReference);switch(n.mode){case"absolute-height":return r-i;case"on-the-ground":return 0;case"relative-to-ground":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"ground")??0)+i);case"relative-to-scene":return r-((e.elevationProvider.getElevation(t.x,t.y,r,t.spatialReference,"scene")??0)+i)}}function m(t,e,n,r=null){return w(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,n,r)}function M(t,e,n,r,i=null){return w(t,e[0],e[1],e.length>2?e[2]:0,n,r,i)}function w(t,e,n,r,i,o,s=null){if(null==o)return;const a=null!=s?s.mode:"absolute-height";if("on-the-ground"===a)return 0;const{absoluteZ:c}=I(e,n,r,i,t,o);return function(t,e,n,r,i,o,s,a){const c=v(s,i);switch(a){case"absolute-height":return t-c;case"relative-to-ground":return t-((o.elevationProvider.getElevation(e,n,r,i,"ground")??0)+c);case"relative-to-scene":return t-((o.elevationProvider.getElevation(e,n,r,i,"scene")??0)+c)}}(c,e,n,r,i,t,s,a)}function I(t,e,n,r,i,o){const s=v(o,r);switch(o.mode){case"absolute-height":return{absoluteZ:n+s,elevation:0};case"on-the-ground":{const n=i.elevationProvider.getElevation(t,e,0,r,"ground")??0;return{absoluteZ:n,elevation:n}}case"relative-to-ground":{const o=i.elevationProvider.getElevation(t,e,n,r,"ground")??0;return{absoluteZ:n+o+s,elevation:o}}case"relative-to-scene":{const o=i.elevationProvider.getElevation(t,e,n,r,"scene")??0;return{absoluteZ:n+o+s,elevation:o}}}}function b(t,e){if(null==e)return!1;const{mode:n}=e;return null!=n&&("scene"===t&&"relative-to-scene"===n||"ground"===t&&"absolute-height"!==n)}function E(t,e,n){return n&&n.mode!==e?`${t} only support ${e} elevation mode`:null}function k(t,e,n){return n?.mode===e?`${t} do not support ${e} elevation mode`:null}function N(t,e){return null!=e?.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression?`${t} do not support featureExpressionInfo`:null}function S(t,e){e&&t.warn(".elevationInfo=",e)}function T(t){return(t?.offset??0)*(0,i.Ao)(t?.unit)}const q={mode:"absolute-height",offset:0},A={mode:"on-the-ground",offset:null}},96234:(t,e,n)=>{n.d(e,{RouteLayerInteraction:()=>M});var r=n(66866),i=n(52495),o=n(20464),s=n(6267),a=n(85251),c=n(21564),u=(n(39831),n(539),n(9272),n(63863)),l=n(4238),h=n(31828),f=n(79493),d=n(78397),p=n(57509),g=n(15704),y=n(10816);function v(t,e){t.networkFeature=e}function _(t){return t.networkFeature}function m(t){return"point"===t?.type||"polyline"===t?.type||"polygon"===t?.type}let M=class extends i.A{constructor(t){super(t),this._createMode=null,this._graphicsLayer=new h.A({internal:!0,listMode:"hide",title:"Banana"}),this._updatingHandles=new l.U,this.enabled=!0,this._handleSketchViewModelEvents=async t=>{switch(t.type){case"update":switch(t.state){case"active":case"complete":for(const e of t.graphics)_(e).geometry=m(e.geometry)?e.geometry.clone():null}break;case"undo":case"redo":break;case"delete":for(const e of t.graphics){const t=_(e);this._removeNetworkFeature(t)}break;case"create":if(t.graphic&&"complete"===t.state&&this._createMode){const e=t.graphic.geometry?.clone(),n=t.graphic.symbol?.clone();if(!e)break;switch(this._createMode){case"stop":{if("point"!==e.type)break;const{stops:n}=this.layer;if(n.length>0&&n.every((({geometry:t})=>!t))){n.at(0).geometry=e;break}if(n.length>1&&n.filter(((t,e)=>0!==e)).every((({geometry:t})=>!t))){n.at(1).geometry=e;break}const r=new g.A({geometry:e});n.add(r),v(t.graphic,r);break}case"point-barrier":{if("point"!==e.type)break;const r=new f.A({geometry:e,symbol:n});this.layer.pointBarriers.add(r),v(t.graphic,r);break}case"polyline-barrier":{if("polyline"!==e.type)break;const r=new p.A({geometry:e,symbol:n});this.layer.polylineBarriers.add(r),v(t.graphic,r);break}case"polygon-barrier":{if("polygon"!==e.type)break;const r=new d.A({geometry:e,symbol:n});this.layer.polygonBarriers.add(r),v(t.graphic,r);break}}}}(await this.view.whenLayerView(this.layer)).emit(t.type,"create"===t.type?function(t){const e=_(t.graphic);return{...t,networkFeature:e}}(t):function(t){const e=t.graphics.map((t=>_(t)));return{...t,networkFeatures:e}}(t))}}initialize(){this._sketchViewModel=new y.A({layer:this._graphicsLayer,view:this.view}),this.addHandles([(0,a.wB)((()=>this.enabled),(t=>{t?this._activate():this._deactivate()}),a.Vh),(0,a.wB)((()=>{const{stops:t,pointBarriers:e,polylineBarriers:n,polygonBarriers:r}=this.layer;return{stops:t,pointBarriers:e,polylineBarriers:n,polygonBarriers:r}}),(()=>{this.enabled&&this._loadClonedGraphics()})),this._sketchViewModel.on(["create","delete","redo","undo","update"],this._handleSketchViewModelEvents),(0,o.DQ)(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,s.pR)(this._graphicsLayer),this._sketchViewModel=(0,s.pR)(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map((t=>_(t)))}get updating(){return this._updatingHandles.updating}create(t){switch(this._createMode=t,t){case"stop":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case"point-barrier":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case"polyline-barrier":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case"polygon-barrier":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(t){case"stop":case"point-barrier":return this._sketchViewModel.create("point");case"polyline-barrier":return this._sketchViewModel.create("polyline");case"polygon-barrier":return this._sketchViewModel.create("polygon")}}remove(t){const e=this._graphicsLayer.graphics.find((e=>_(e)===t));e&&this._graphicsLayer.remove(e),this._removeNetworkFeature(t)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const t=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap((t=>t.toArray().map((t=>{const e=t.toGraphic();return e.networkFeature=t,e}))));this._graphicsLayer.removeAll().addMany(t)}_removeNetworkFeature(t){switch(t.type){case"stop":this.layer.stops.remove(t);break;case"point-barrier":this.layer.pointBarriers.remove(t);break;case"polyline-barrier":this.layer.polylineBarriers.remove(t);break;case"polygon-barrier":this.layer.polygonBarriers.remove(t)}}};(0,r._)([(0,c.MZ)()],M.prototype,"enabled",void 0),(0,r._)([(0,c.MZ)({constructOnly:!0})],M.prototype,"layer",void 0),(0,r._)([(0,c.MZ)({readOnly:!0})],M.prototype,"selectedNetworkFeatures",null),(0,r._)([(0,c.MZ)()],M.prototype,"updating",null),(0,r._)([(0,c.MZ)({constructOnly:!0})],M.prototype,"view",void 0),M=(0,r._)([(0,u.$)("esri.views.2d.layers.support.RouteLayerInteraction")],M)},72699:(t,e,n)=>{n.d(e,{VV:()=>a,hG:()=>o,wp:()=>s});n(92504);var r=n(24121),i=n(58359);function o(t){const e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],n=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}function s(t,e){const n=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),i=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),o=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return(0,r.i)(t,n,i,o),t}function a(t,e,n){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(e,0,1,0):(0,r.i)(e,1,0,0),(0,r.h)(n,t,e),(0,r.h)(e,n,t),(0,r.n)(n,n),(0,r.n)(e,e)}(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)(),(0,i.vt)()}}]);