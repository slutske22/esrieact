"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2886],{85470:(e,t,n)=>{n.d(t,{A:()=>c});var r,a=n(66866),s=n(21877),i=n(19251),l=n(21564),o=n(73446),u=n(63863);let c=r=class extends s.A{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new r({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,i.o8)(this.values),isSlice:this.isSlice})}};(0,a._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"variableName",void 0),(0,a._)([(0,l.MZ)({type:String,json:{write:!0}})],c.prototype,"dimensionName",void 0),(0,a._)([(0,l.MZ)({type:o.gK.array(o.gK.oneOf([o.gK.native(Number),o.gK.array(o.gK.native(Number))])),json:{write:!0}})],c.prototype,"values",void 0),(0,a._)([(0,l.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"isSlice",void 0),c=r=(0,a._)([(0,u.$)("esri.layers.support.DimensionalDefinition")],c)},52775:(e,t,n)=>{n.d(t,{C:()=>i,m:()=>s});var r=n(98849),a=n(40189);async function s(e,t,n){let s;try{s=await createImageBitmap(e)}catch(i){throw new r.A("request:server",`Unable to load ${t}`,{url:t,error:i})}return(0,a.Te)(n),s}async function i(e,t,n,s,i){let l;try{l=await createImageBitmap(e)}catch(o){throw new r.A("request:server",`Unable to load tile ${t}/${n}/${s}`,{error:o,level:t,row:n,col:s})}return(0,a.Te)(i),l}},28582:(e,t,n)=>{function r(e){return"Function"===e?.datasetFormat}function a(e){return r(e)?e.primaryRasters.rasters:[e]}n.d(t,{p:()=>a,q:()=>r})},75792:(e,t,n)=>{n.d(t,{$E:()=>T,DY:()=>h,NG:()=>k,QW:()=>i,Rp:()=>m,XU:()=>y,Xg:()=>w,ct:()=>g,fy:()=>p,sx:()=>f,xx:()=>l,z2:()=>b});var r=n(85569),a=n(85470);function s(e,t,n){const r=t.shift();if(0===n.length){const e=[];n.push({sliceId:-1,multidimensionalDefinition:e})}const a=n.length;for(let s=0;s<a;s++){const t=n.shift().multidimensionalDefinition;r.values?.forEach((a=>{n.push({sliceId:-1,multidimensionalDefinition:[...t,{variableName:e,dimensionName:r.name,values:[a]}]})}))}t.length&&s(e,t,n)}function i(e,t){const n=[];let r=0;return(t?e.variables.filter((e=>e.name.toLowerCase()===t.toLowerCase())):[...e.variables].sort(((e,t)=>e.name>t.name?1:-1))).forEach((e=>{const t=[],a=[...e.dimensions].sort(((e,t)=>e.name>t.name?-1:1));s(e.name,a,t),t.forEach((e=>{n.push({...e,sliceId:r++})}))})),n}function l(e,t,n){let r=e;if(t&&(t=[...t].sort(((e,t)=>e.dimensionName<t.dimensionName?-1:1))).forEach((({dimensionName:e,values:t,isSlice:n})=>{t.length&&(r=r.filter((r=>{const a=r.multidimensionalDefinition.find((t=>t.dimensionName===e));if(null==a)return!1;const s=a.values[0];return"number"==typeof s?"number"==typeof t[0]?t.includes(s):t.some((e=>e[0]<=s&&e[1]>=s)):"number"==typeof t[0]?t.some((e=>s[0]<=e&&s[1]>=e)):n?t.some((e=>e[0]===s[0]&&e[0]===s[1])):t.some((e=>e[0]>=s[0]&&e[0]<=s[1]||e[1]>=s[0]&&e[1]<=s[1]||e[0]<s[0]&&e[1]>s[1]))})))})),r.length&&null!=n?.start&&null!=n.end){const e=n.start.getTime(),t=n.end.getTime(),a=r[0].multidimensionalDefinition.findIndex((e=>"StdTime"===e.dimensionName));a>-1&&(r=r.filter((n=>{const r=n.multidimensionalDefinition[a].values[0];return e<=r&&t>=r})))}return r.map((e=>e.sliceId))}function o(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function u(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function c(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function d(e,t,n){if(!t?.subsetDefinitions?.length)return e;let r;if(n){const{variables:a}=t;if(a.length&&!a.includes(n))return null;const s=t.subsetDefinitions.find((t=>t.dimensionName===e.name&&t.variableName===n));if(!s?.values?.length)return e;r=c(s.values)}else{const n=t.dimensions.find((({name:t})=>t===e.name));r=n?.extent}const a=r;if(!a?.length)return e;const s=e.values.filter((e=>o(e,a)));return{...e,extent:[...a],values:s}}function f(e,t,n){if(!t?.subsetDefinitions?.length)return!1;const{variables:r}=t;if(r.length&&e.some((({variableName:e})=>e&&!r.includes(e))))return!0;for(let a=0;a<e.length;a++){const r=e[a],s=t.subsetDefinitions.find((e=>(""===r.variableName||e.variableName===r.variableName)&&e.dimensionName===r.dimensionName));if(s?.values.length){const e=c(s.values);if(r.isSlice||2!==r.values.length||Array.isArray(r.values[0])||r.values[0]===r.values[1]||!n){if(r.values.some((t=>!o(t,e))))return!0}else if(!u(r.values,e))return!0}}return!1}function m(e,t){if(null==e)return{isOutside:!1};const{geometry:n,timeExtent:r,multidimensionalDefinition:s}=t;let i=null;if(null!=r&&(i=function(e,t){const n=e.dimensions.find((({name:e})=>"StdTime"===e));if(null==n||null==t.start&&null==t.end)return t;t=t.clone();const{start:r,end:s}=t.toJSON(),i=r===s?[r]:null!=r&&null!=s?[r,s]:[r??s];return 2===i.length&&n?.extent.length&&(i[0]=Math.max(i[0],n.extent[0]),i[1]=Math.min(i[1],n.extent[1]??n.extent[0]),i[1]<i[0])||f([new a.A({variableName:"",dimensionName:"StdTime",isSlice:1===i.length,values:i})],e,!0)?null:(t.start=new Date(i[0]),t.end=new Date(i[1]??i[0]),t)}(e,r),null==i))return{isOutside:!0};const{areaOfInterest:l}=e;if(l&&n){const e="point"===n.type?n:"extent"===n.type?n.center:"polygon"===n.type?n.centroid:null;if(e&&!l.contains(e))return{isOutside:!0}}return null!=s&&s.length&&f(s,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:n,timeExtent:i,multidimensionalDefinition:s}}}function y(e){const{rasterInfo:t,multidimensionalSubset:n}=e,{multidimensionalInfo:r}=t;if(null==r)return null;let a=e.multidimensionalDefinition?.length?e.multidimensionalDefinition:p(t,{multidimensionalSubset:n});if(!a?.length)return null;if(a.some((e=>!e.dimensionName))){const{variableName:e}=a[0],r=p(t,{multidimensionalSubset:n,variableName:e});r?.forEach((e=>{const t=a?.find((({dimensionName:t})=>t===e.dimensionName));t?.values?.length&&(e.values=t.values,e.isSlice=t.isSlice)})),a=r}const{timeExtent:s}=e;if(null!=a&&null!=s&&(null!=s.start||null!=s.end)){a=a.map((e=>e.clone()));const e=r.variables.find((({name:e})=>e===a[0].variableName))?.dimensions?.find((({name:e})=>"StdTime"===e)),t=a.find((({dimensionName:e})=>"StdTime"===e));if(!e||!t)return null;const{start:n,end:i}=s,l=null==n?null:n.getTime(),o=null==i?null:i.getTime(),u=l??o,c=o??l;if(null!=e.values){const n=e.values.filter((e=>{if(Array.isArray(e)){if(u===c)return e[0]<=u&&e[1]>=u;const t=e[0]<=u&&e[1]>u||e[0]<c&&e[1]>=c,n=e[0]>=u&&e[1]<=c||e[0]<u&&e[1]>c;return t||n}return u===c?e===u:e>=u&&e<=c}));if(n.length){const e=n.sort(((e,t)=>{const n=Array.isArray(e)?e[0]:e,r=Array.isArray(e)?e[1]:e,a=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:t;return u===c?n-a:Math.abs(r-c)-Math.abs(s-c)}))[0];t.values=[e]}else a=null}else if(e.hasRegularIntervals&&e.extent){const[n,r]=e.extent;u>r||c<n?a=null:t.values=u===c?[u]:[Math.max(n,u),Math.min(r,c)]}}return null!=a&&f(a,n)?null:a}function g(e,t={}){const{multidimensionalInfo:n,keyProperties:r}=e;if(null==n)return null;const{variableName:a,multidimensionalSubset:s,multidimensionalDefinition:i}=t,l=null!=i?i[0]?.variableName:null,o=a||l||r?.DefaultVariable;let{variables:u}=n;return s?.variables?.length&&(u=u.filter((({name:e})=>s.variables.includes(e)))),o?u.find((({name:e})=>e===o))??u[0]:u[0]}function p(e,t={}){const n=g(e,t);if(!n)return null;const r=[],{dimensions:s,name:i}=n;if(0===s.length)return[new a.A({variableName:i,dimensionName:"",values:[],isSlice:!0})];for(let l=0;l<s.length;l++){const e=d(s[l],t.multidimensionalSubset,i);if(!e)return null;const{values:n,extent:o}=e;let u=n?.[0]??o?.[0];"stdz"===e.name.toLowerCase()&&!e.hasRanges&&o&&Math.abs(o[1])<=Math.abs(o[0])&&(u=n?.length?n[n.length-1]:o[1]),r.push(new a.A({variableName:i,dimensionName:e.name,values:[u],isSlice:!t.useRangeForRangedDimensionInfo||!!e.hasRanges}))}return r}function h(e){return!!e?.length&&e.some((e=>{if(null==e.values)return!0;const t=e.values.length;return 0===t||t>1||!e.isSlice&&Array.isArray(e.values[0])}))}function b(e,t){if(null==t||null==e)return null;let n=t.variables.map((e=>({...e})));return e?.variables?.length&&(n=n.filter((({name:t})=>e.variables.includes(t))),n.forEach((t=>{t.dimensions=t.dimensions.map((n=>d(n,e,t.name))).filter(r.Ru)}))),n}function v(e,t){const{values:n}=t;if(n?.length){const t=Array.isArray(n[0]),r=Array.isArray(e);return t!==r?-1:t&&r?n.findIndex((t=>t[0]===e[0]&&t[1]===e[1])):n.indexOf(e)}const{extent:r}=t;if(Array.isArray(e)||!r||e<r[0]||e>r[1])return-1;const a=t.interval||1;if("ISO8601"!==t.unit)return Math.round((e-r[0])/a);const s=r[0];let i=-1;switch(t.intervalUnit?.toLowerCase()||"days"){case"seconds":i=Math.round((e-s)/1e3/a);break;case"minutes":i=Math.round((e-s)/6e4/a);break;case"hours":i=Math.round((e-s)/36e5/a);break;case"days":i=Math.round((e-s)/864e5/a);break;case"months":{const t=new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear(),n=new Date(s).getUTCMonth(),r=new Date(e).getUTCMonth();i=0===t?r-n:r+11-n+12*(t-1)}break;case"years":i=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/a);break;case"decades":i=Math.round((new Date(e).getUTCFullYear()-new Date(s).getUTCFullYear())/10/a)}return i}function S(e){let t=e.values?.length;if(t)return t;const{extent:n,unit:r}=e,a=e.interval||1,s=n?n[1]-n[0]:0;if("ISO8601"!==r)return Math.round(s/a);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(s/1e3/a);break;case"minutes":t=Math.round(s/6e4/a);break;case"hours":t=Math.round(s/36e5/a);break;case"days":t=Math.round(s/864e5/a);break;case"months":if(n){const e=new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear(),r=new Date(n[0]).getUTCMonth(),a=new Date(n[1]).getUTCMonth();t=0===e?a-r+1:a+11-r+12*(e-1)+1}else t=0;break;case"years":t=n?Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/a):0;break;case"decades":t=n?Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/10/a):0;break;default:t=0}return t}function w(e){if(2!==e.extent?.length||!e.interval)return[];const{extent:[t,n],interval:r}=e;if("ISO8601"===e.unit){const a=e.intervalUnit?.toLowerCase()??"days";return["decades","years","months","days","hours","minutes","seconds"].includes(a)?function(e,t,n,r){const a=[];let s=e;const i=new Date(e);for(;s<=t;)switch(a.push(s),r){case"decades":i.setUTCFullYear(i.getUTCFullYear()+10*n),s=i.getTime();break;case"years":i.setUTCFullYear(i.getUTCFullYear()+n),s=i.getTime();break;case"months":i.setUTCMonth(i.getUTCMonth()+n),s=i.getTime();break;case"days":s+=864e5*n;break;case"hours":s+=36e5*n;break;case"minutes":s+=6e4*n;break;case"seconds":s+=1e3*n}return 1===a.length?a[1]=t:a[a.length-1]=t,a}(t,n,r,a):[]}const a=Math.round((n-t)/r);return Array.from({length:a},((e,s)=>s===a-1?n:t+s*r))}function k(e,t){let n=0;const r=e[0].variableName,a=[...t.variables].sort(((e,t)=>e.name>t.name?1:-1));for(let s=0;s<a.length;s++){const t=a[s],i=[...t.dimensions].sort(((e,t)=>e.name>t.name?-1:1));if(t.name!==r){n+=i.map((e=>S(e))).reduce(((e,t)=>e*t));continue}const l=i.map((e=>S(e))),o=i.length;for(let r=0;r<o;r++){const t=e.find((e=>e.dimensionName===i[r].name));if(null==t)return null;const a=v(t.values[0],i[r]);if(-1===a)return null;l.shift(),n+=r===o-1?a:a*l.reduce(((e,t)=>e*t))}break}return n}function T(e){return Math.round(24*(e-25569)*3600*1e3)}},49012:(e,t,n)=>{n.d(t,{AL:()=>b,DV:()=>g,ER:()=>a,F_:()=>l,Nd:()=>m,Oo:()=>s,dy:()=>f,eS:()=>k,h4:()=>T,jC:()=>h,nq:()=>y,rZ:()=>d,y6:()=>p});var r=n(24738);const a="Raster.",s="Raster.Dim.",i=".Max",l={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},o=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function u(e,t){return new r.A({name:e,alias:t,domain:null,editable:!1,length:50,type:"string"})}function c(e,t){return new r.A({name:e,alias:t,domain:null,editable:!1,type:"double"})}function d(e){return u(l.servicePixelValue,e??"Service Pixel Value")}function f(e){return u(l.rawServicePixelValue,e??"Raw Service Pixel Value")}function m(){return u(l.itemPixelValue,"Item Pixel Value")}function y(e){return u(`${l.servicePixelValue}.${e}`,e)}function g(e){return c(`${l.magnitude}`,"Magnitude"+(e?` (${e})`:""))}function p(){return c(`${l.direction}`,"Direction (\xb0)")}function h(e){return e.fields.filter((e=>"oid"!==e.type&&"value"!==e.name.toLowerCase())).map((e=>{const t=e.clone();return t.name=`${a}${e.name}`,t}))}function b(e){const t=new Set,n=new Set,a=new Map;return e.variables.forEach((({dimensions:e})=>{e.forEach((e=>{if(e.recurring)a.set(e.name,e.unit);else{const r="ISO8601"===e.unit?.trim()?t:n;r.add(e.name),e.hasRanges&&r.add(`${e.name}${i}`)}}))})),[u(l.variable,"Variable"),...[...t].map((e=>function(e,t){return new r.A({name:e,alias:t,domain:null,editable:!1,type:"date"})}(`${s}${e}`,S(e)))),...[...n].map((e=>c(`${s}${e}`,S(e)))),...[...a].map((([e,t])=>c(`${s}${e}`,v(e,t))))]}function v(e,t){return t=t?.toLowerCase(),t&&o.has(t)?o.get(t):S(e)}function S(e){const t=e.endsWith(i),n=t?e.slice(0,-4):e,r="StdTime"===n?"Standard Time":"StdZ"===n?"Standard Z":n;return t?`${r} Max`:r}function w(e,t){return t?new Date(e):e}function k(e,t,n){n?.length&&(t[l.variable]=n[0].variableName,n.forEach((({dimensionName:n,values:r})=>{if(n&&r?.length){const a=`${s}${n}`,l=e.find((({name:e})=>e===a));if(!l)return;const o="date"===l.type,u=r[0];if(Array.isArray(u)){if(t[`${s}${n}`]=w(u[0],o),null!=u[1]){const r=`${s}${n}${i}`;if(e.some((({name:e})=>e===r))){const e=w(u[1],o);t[r]=e}}}else t[`${s}${n}`]=w(u,o)}})))}function T(e,t){if(t.pixelType.startsWith("f")&&e.forEach((({format:e,fieldName:t})=>{e&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(e.places=2)})),t.multidimensionalInfo){const n=t.multidimensionalInfo.variables.flatMap((({dimensions:e})=>e));e.forEach((({format:e,fieldName:t})=>{if(e&&t?.startsWith(s)){const r=t.slice(s.length),a=`${r}${i}`,l=n.find((({name:e})=>e===r||e===a));l?.values?.every((e=>Number.isInteger(e)))&&(e.places=0)}}))}}},93797:(e,t,n)=>{n.d(t,{D:()=>s});var r=n(16123);const a=[];function s(e,t){if((0,r.Wo)(e.url??""))return!0;const{wkid:n}=t;for(const r of a){if((e.version??0)>=r[0])return!0;if("function"==typeof r[1]&&(r[1]=r[1]()),r[1].has(n))return!1}return!0}a.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),a.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),a.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),a.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),a.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}])},80323:(e,t,n)=>{function r(e){const t={};for(const n in e){if("declaredClass"===n)continue;const a=e[n];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){t[n]=[];for(let e=0;e<a.length;e++)t[n][e]=r(a[e])}else"object"==typeof a?a.toJSON&&(t[n]=JSON.stringify(a)):t[n]=a}return t}n.d(t,{z:()=>r})},60920:(e,t,n)=>{n.d(t,{I:()=>i});var r=n(11499),a=n(8132),s=n(14474);async function i(e,t,n,i){const l=(0,r.Dl)(e),{data:o}=await(0,a.gW)(l,s.A.from(t),n,i);return o.count}},1177:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(11499),a=n(8132),s=n(14474);async function i(e,t,n,i){const o=(0,r.Dl)(e),{data:u}=await(0,a.Pk)(o,s.A.from(t),n,i);return u.objectIds??l(u.uniqueIds)??[]}function l(e){if(e)return function(e){return!Array.isArray(e[0])}(e)?e:e.map((e=>JSON.stringify(e)))}},9190:(e,t,n)=>{n.d(t,{e:()=>o,s:()=>l});var r=n(11499),a=n(8132),s=n(57822),i=n(14474);async function l(e,t,n,r){const a=await o(e,t,n,r);return s.A.fromJSON(a)}async function o(e,t,n,s){const l=(0,r.Dl)(e),o={...n},u=i.A.from(t),{data:c}=await(0,a.eW)(l,u,u.sourceSpatialReference,o,s);return c}},37610:(e,t,n)=>{n.d(t,{SH:()=>N,ae:()=>T,cn:()=>b});var r=n(98849),a=n(66471),s=n(88443),i=n(38333);const l=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],o=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function c(e){return e>=l.length?null:l[e]}function d(e){return e>=o.length?null:o[e]}function f(e){return e>=u.length?null:u[e]}function m(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function y(e,t,n){const r=e.asUnsafe(),a=t.createPointGeometry(n);for(;r.next();)switch(r.tag()){case 3:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addCoordinatePoint(a,r.getSInt64(),s++);break}default:r.skip()}return a}function g(e,t,n){const r=e.asUnsafe(),a=t.createGeometry(n),s=2+(n.hasZ?1:0)+(n.hasM?1:0);for(;r.next();)switch(r.tag()){case 2:{const e=r.getUInt32(),n=r.pos()+e;let s=0;for(;r.pos()<n;)t.addLength(a,r.getUInt32(),s++);break}case 3:{const e=r.getUInt32(),n=r.pos()+e;let i=0;for(t.allocateCoordinates(a);r.pos()<n;)t.addCoordinate(a,r.getSInt64(),i),i++,i===s&&(i=0);break}default:r.skip()}return a}function p(e){const t=e.asUnsafe(),n=new s.A;let r="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.coords.push(t.getSInt64());break}case 1:r=i.z[t.getEnum()];break;default:t.skip()}return{queryGeometry:n,queryGeometryType:r}}function h(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function b(e){const t=e.asUnsafe(),n={type:c(0)};for(;t.next();)switch(t.tag()){case 1:n.name=t.getString();break;case 2:n.type=c(t.getEnum());break;case 3:n.alias=t.getString();break;case 4:n.sqlType=d(t.getEnum());break;case 5:default:t.skip();break;case 6:n.defaultValue=t.getString()}return n}function v(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.name=n.getString();break;case 2:t.isSystemMaintained=n.getBool();break;default:n.skip()}return t}function S(e,t,n,r){const a=t.createFeature(n);let s=0;for(;e.next();)switch(e.tag()){case 1:{const t=r[s++].name;a.attributes[t]=e.processMessage(h);break}case 2:a.geometry=e.processMessageWithArgs(g,t,n);break;case 4:a.centroid=e.processMessageWithArgs(y,t,n);break;default:e.skip()}return a}function w(e){const t=[1,1,1,1],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function k(e){const t=[0,0,0,0],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function T(e){const t={originPosition:f(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.originPosition=f(n.getEnum());break;case 2:t.scale=n.processMessage(w);break;case 3:t.translate=n.processMessage(k);break;default:n.skip()}return t}function x(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.shapeAreaFieldName=n.getString();break;case 2:t.shapeLengthFieldName=n.getString();break;case 3:t.units=n.getString();break;default:n.skip()}return t}function I(e,t){const n=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function D(e,t){const n=t.createFeatureResult(),r=e.asUnsafe();n.geometryType=m(t,0);let a=!1;for(;r.next();)switch(r.tag()){case 1:n.objectIdFieldName=r.getString();break;case 3:n.globalIdFieldName=r.getString();break;case 4:n.geohashFieldName=r.getString();break;case 5:n.geometryProperties=r.processMessage(x);break;case 7:n.geometryType=m(t,r.getEnum());break;case 8:n.spatialReference=r.processMessageWithArgs(I,t);break;case 10:n.hasZ=r.getBool();break;case 11:n.hasM=r.getBool();break;case 12:n.transform=r.processMessage(T);break;case 9:n.exceededTransferLimit=r.getBool();break;case 13:t.addField(n,r.processMessage(b));break;case 15:a||(t.prepareFeatures(n),a=!0),t.addFeature(n,r.processMessageWithArgs(S,t,n,n.fields));break;case 2:n.uniqueIdField=r.processMessage(v);break;default:r.skip()}return t.finishFeatureResult(n),n}function F(e,t){const n={};let r=null;for(;e.next();)switch(e.tag()){case 4:r=e.processMessageWithArgs(p);break;case 1:n.featureResult=e.processMessageWithArgs(D,t);break;default:e.skip()}return null!=r&&n.featureResult&&t.addQueryGeometry(n,r),n}function N(e,t){try{const n=2,r=new a.A(new Uint8Array(e),new DataView(e)),s={};for(;r.next();)r.tag()===n?s.queryResult=r.processMessageWithArgs(F,t):r.skip();return s}catch(l){throw new r.A("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:l})}}},38333:(e,t,n)=>{n.d(t,{S:()=>u,z:()=>o});var r=n(92976),a=n(87926),s=n(32597),i=n(46461),l=n(88443);const o=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class u{constructor(e){this._options=e,this.geometryTypes=o,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new i.A}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||(0,a.aI)(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,r.G9)(this._options.sourceSpatialReference)/(0,r.G9)(e.spatialReference);if(1!==t)for(const n of e.features){if(!(0,s.N3)(n))continue;const e=n.geometry.coords;for(let n=2;n<e.length;n+=3)e[n]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new s.Om(null,{},null,0)}createSpatialReference(){return{wkid:0}}createGeometry(){return new l.A}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new l.A}}},79305:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(37610);function a(e,t){const n=(0,r.SH)(e,t),a=n.queryResult.featureResult,s=n.queryResult.queryGeometry,i=n.queryResult.queryGeometryType;if(a&&a.features&&a.features.length&&a.objectIdFieldName){const e=a.objectIdFieldName;for(const t of a.features)t.attributes&&(t.objectId=t.attributes[e])}return a&&(a.queryGeometry=s,a.queryGeometryType=i),a}},8132:(e,t,n)=>{n.d(t,{IJ:()=>y,Jf:()=>b,Pk:()=>p,eW:()=>m,gW:()=>h,kS:()=>g});var r=n(86394),a=n(20909),s=n(1171),i=n(65231),l=n(87926),o=n(80323),u=n(79305),c=n(27604);const d="Layer does not support extent calculation.";function f(e,t,n){const r=e.geometry,a=e.toJSON();delete a.compactGeometryEnabled,delete a.defaultSpatialReferenceEnabled;const i=a;let o,u,c;if(r&&(u=r.spatialReference,c=(0,l.YX)(u),i.geometryType=(0,s.$B)(r),i.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const n=e.toJSON();return delete n.spatialReference,JSON.stringify(n)}(r,e.compactGeometryEnabled),i.inSR=c),a.groupByFieldsForStatistics&&(i.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(",")),a.objectIds)switch(n?.uniqueIdFields?.length){case void 0:i.objectIds=a.objectIds.join(",");break;case 1:i.uniqueIds=JSON.stringify(a.objectIds),delete i.objectIds;break;default:i.uniqueIds=JSON.stringify(a.objectIds.map((e=>JSON.parse(e)))),delete i.objectIds}if(a.orderByFields&&(i.orderByFields=a.orderByFields.join(",")),!a.outFields||!a.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete i.outFields:a.outFields.includes("*")?i.outFields="*":i.outFields=a.outFields.join(","),a.outSR?(i.outSR=(0,l.YX)(a.outSR),o=e.outSpatialReference):r&&(a.returnGeometry||a.returnCentroid)&&(i.outSR=i.inSR,o=u),a.returnGeometry&&delete a.returnGeometry,a.outStatistics&&(i.outStatistics=JSON.stringify(a.outStatistics)),a.fullText&&(i.fullText=JSON.stringify(a.fullText)),a.pixelSize&&(i.pixelSize=JSON.stringify(a.pixelSize)),a.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=u&&null!=e.quantizationParameters?.extent&&u.equals(e.quantizationParameters.extent.spatialReference)&&delete a.quantizationParameters.extent.spatialReference,i.quantizationParameters=JSON.stringify(a.quantizationParameters)),a.parameterValues&&(i.parameterValues=JSON.stringify(a.parameterValues)),a.rangeValues&&(i.rangeValues=JSON.stringify(a.rangeValues)),a.dynamicDataSource&&(i.layer=JSON.stringify({source:a.dynamicDataSource}),delete a.dynamicDataSource),a.timeExtent){const e=a.timeExtent,{start:t,end:n}=e;null==t&&null==n||(i.time=t===n?t:`${t??"null"},${n??"null"}`),delete a.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=u&&null!=o&&u.equals(o)&&(i.defaultSR=i.inSR,delete i.inSR,delete i.outSR),i}async function m(e,t,n,r,a){const s=t.timeExtent?.isEmpty?{data:{features:[]}}:await S(e,t,"json",r,void 0,a);return(0,c.q)(t,n,s.data),s}async function y(e,t,n,r,a){if(t.timeExtent?.isEmpty)return{data:n.createFeatureResult()};const s=await g(e,t,r,a),i=s;return i.data=(0,u.m)(s.data,n),i}function g(e,t,n,r){return S(e,t,"pbf",n,void 0,r)}function p(e,t,n,r){return t.timeExtent?.isEmpty?Promise.resolve({data:{objectIds:[]}}):S(e,t,"json",n,{returnIdsOnly:!0},r)}function h(e,t,n,r){return t.timeExtent?.isEmpty?Promise.resolve({data:{count:0}}):S(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0},r)}async function b(e,t,n){if(t.timeExtent?.isEmpty)return{data:{count:0,extent:null}};const r=await S(e,t,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),a=r.data;if(a.hasOwnProperty("extent"))return r;if(a.features)throw new Error(d);if(a.hasOwnProperty("count"))throw new Error(d);return r}function v(e,t){if(!e.returnIdsOnly||!t.uniqueIdFields)return e;const n={...e,returnUniqueIdsOnly:!0};return delete n.returnIdsOnly,n}async function S(e,t,n,s={},l={},u={}){const c="string"==typeof e?(0,a.An)(e):e,d=t.geometry?[t.geometry]:[],m=await(0,i.el)(d,null,{signal:s.signal}),y=m?.[0];null!=y&&((t=t.clone()).geometry=y);const g=(0,o.z)({...c.query,f:n,...v(l,u),...f(t,l,u)});return(0,r.A)((0,a.fj)(c.path,(p=l,null==t.formatOf3DObjects||p.returnCountOnly||p.returnExtentOnly||p.returnIdsOnly?"query":"query3d")),{...s,responseType:"pbf"===n?"array-buffer":"json",query:{...g,...s.query}});var p}}}]);