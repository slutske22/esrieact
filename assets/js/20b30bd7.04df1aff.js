"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[48877],{81604:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>i,toc:()=>p});var t=n(74848),a=n(28453);const s={},o="createLayerComponent",i={id:"core-apis/createLayerComponent",title:"createLayerComponent",description:"The createLayerComponent function can be used to create any type of component that extends from the ESRI Layer class. It takes in a function that creates the layer instance, a ref, and the layer properties, and returns a react-ready component that can be used as a child of the MapView.",source:"@site/docs/core-apis/createLayerComponent.mdx",sourceDirName:"core-apis",slug:"/core-apis/createLayerComponent",permalink:"/esrieact/core-apis/createLayerComponent",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"CORE APIs",permalink:"/esrieact/core-apis/"}},c={},p=[{value:"Function signature",id:"function-signature",level:2},{value:"Example Usage",id:"example-usage",level:2},{value:"Typescript",id:"typescript",level:3},{value:"Javascript",id:"javascript",level:3},{value:"Usage",id:"usage",level:3}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"createlayercomponent",children:(0,t.jsx)(r.code,{children:"createLayerComponent"})})}),"\n",(0,t.jsxs)(r.p,{children:["The ",(0,t.jsx)(r.code,{children:"createLayerComponent"})," function can be used to create any type of component that extends from the ",(0,t.jsxs)(r.a,{href:"https://developers.arcgis.com/javascript/latest/api-reference/esri-layers-Layer.html",children:["ESRI ",(0,t.jsx)(r.code,{children:"Layer"})," class"]}),". It takes in a function that creates the layer instance, a ref, and the layer properties, and returns a react-ready component that can be used as a child of the ",(0,t.jsx)(r.code,{children:"MapView"}),"."]}),"\n",(0,t.jsx)(r.h2,{id:"function-signature",children:"Function signature"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"/**\n * Factory function to create an esrieact layer component\n * @param createLayer Function that takes in the layer properties\n * (which must extend from __esri.LayerProperties)\n *  and returns the layer instance\n * @param ref The react ref to be passed from the parent\n * @param properties The layer properties\n * @returns A context provider whose context is the instance to be passed to children,\n * or if there are no children, returns null.\n */\ncreateLayerComponent: (\n  createLayer: CreateLayerFunction<LayerComponentProps>,\n  ref: Ref<__esri.Layer>,\n  { children, events, layerOrder, ...properties }: LayerComponentProps,\n) => JSX.Element | null;\n"})}),"\n",(0,t.jsx)(r.p,{children:"Where"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:"/**\n * Properties that can be applied to any ESRIEACT Layer component.  Extends from\n * esri's LayerProperties to include child components (i.e. in the case of GroupLayers)\n */\nexport type LayerComponentProps<\n  T extends __esri.LayerProperties = __esri.LayerProperties,\n  E extends Partial<LayerEventHandlerFnMap> = {},\n> = React.PropsWithChildren<T> & { events?: E; layerOrder?: number };\n\n/**\n * Function that takes in layer properties and returns an esri Layer instance. Properties must be\n * any esri properties that extend esri.LayerProperties, and optional children\n */\nexport type CreateLayerFunction<T extends LayerComponentProps> = (\n  properties: T,\n) => __esri.Layer;\n"})}),"\n",(0,t.jsx)(r.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,t.jsx)(r.h3,{id:"typescript",children:"Typescript"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-ts",children:'// GeoJSONLayer.ts\n\n/**\n * An event handler function map specific to a GeoJSONLayer\n */\nexport type GeoJSONLayerEventHandlerFnMap = Partial<{\n  refresh: __esri.GeoJSONLayerRefreshEventHandler;\n  edits: __esri.GeoJSONLayerEditsEventHandler;\n  "layerview-create": __esri.GeoJSONLayerLayerviewCreateEventHandler;\n  "layerview-create-error": __esri.GeoJSONLayerLayerviewCreateErrorEventHandler;\n  "layerview-destroy": __esri.GeoJSONLayerLayerviewDestroyEventHandler;\n}>;\n\n/**\n * Function that takes in properties of a GeoJSONLayer, and returns the GeoJSONLayer instance\n */\nconst createLayer = (\n  properties: LayerComponentProps<\n    __esri.GeoJSONLayerProperties,\n    GeoJSONLayerEventHandlerFnMap\n  >,\n): __esri.GeoJSONLayer => {\n  return new EsriGeoJSONLayer(properties);\n};\n\n/**\n * The GeoJSONLayer React component\n */\nexport const GeoJSONLayer = React.forwardRef<\n  __esri.GeoJSONLayer,\n  LayerComponentProps<\n    __esri.GeoJSONLayerProperties,\n    GeoJSONLayerEventHandlerFnMap\n  >\n>((properties, ref) => createLayerComponent(createLayer, ref, properties));\n'})}),"\n",(0,t.jsx)(r.h3,{id:"javascript",children:"Javascript"}),"\n",(0,t.jsx)(r.p,{children:"Most of the code above is typescript typings to ensure correct property typing, as well as event typing. If we look at this through the lens of pure Javascript, the code is quite simple:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-js",children:"const createLayer = (properties) => new EsriGeoJSONLayer(properties);\n\nexport const GeoJSONLayer = (properties, ref) =>\n  createLayerComponent(createLayer, ref, properties);\n"})}),"\n",(0,t.jsx)(r.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsxs)(r.p,{children:["Now you can use ",(0,t.jsx)(r.code,{children:"GeoJSONLayer"})," as a child of a ",(0,t.jsx)(r.code,{children:"MapView"}),":"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-tsx",metastring:"live",live:!0,children:'// Example.tsx\nfunction Example() {\n  return (\n    <MapView\n      ViewProperties={{ extent: OAHU_EXTENT_2 }}\n      MapProperties={{ basemap: "topo-vector" }}\n      style={{ height: "300px", width: "100%" }}\n    >\n      <GeoJSONLayer url={SAMPLE_GEOJSON_URL} />\n    </MapView>\n  );\n}\n'})}),"\n",(0,t.jsxs)(r.p,{children:["In this way, ",(0,t.jsx)(r.code,{children:"createLayerComponent"})," can be used to create most types of ArcGIS JS API layer components. If you see a layer component that you need, but it's not in ESRIEACT, you can create it using ",(0,t.jsx)(r.code,{children:"createLayerComponent"}),". Or better yet, open a PR to add it to ESRIEACT!"]})]})}function d(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);