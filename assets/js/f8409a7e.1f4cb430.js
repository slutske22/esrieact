"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[26903],{54784:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var r=n(74848),a=n(28453),s=n(78478);n(96540);const i={sidebar_position:1,slug:"/",title:"Introduction"},o="ESRIEACT",c={id:"intro",title:"Introduction",description:"A react component library for the ArcGIS Javascript API.",source:"@site/docs/intro.mdx",sourceDirName:".",slug:"/",permalink:"/esrieact/",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,slug:"/",title:"Introduction"},sidebar:"tutorialSidebar",next:{title:"A Note About Props",permalink:"/esrieact/props"}},p={},l=[{value:"Getting Started",id:"getting-started",level:2},{value:"Install / Get the Components",id:"install--get-the-components",level:3},{value:"Create a Map",id:"create-a-map",level:3},{value:"Use State",id:"use-state",level:3},{value:"Why ESRIEACT?",id:"why-esrieact",level:2},{value:"Pains of the Past",id:"pains-of-the-past",level:3},{value:"React + ArcGIS JS API = ESRIEACT",id:"react--arcgis-js-api--esrieact",level:3},{value:"What about ESRI&#39;s react library?",id:"what-about-esris-react-library",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"esrieact",children:"ESRIEACT"})}),"\n",(0,r.jsx)(t.p,{children:"A react component library for the ArcGIS Javascript API."}),"\n",(0,r.jsx)(s.A,{children:()=>{const e=n(85983).K4;return(0,r.jsx)(e,{style:{height:"200px",width:"100%"},MapProperties:{basemap:"topo"},ViewProperties:{ui:{components:[]},zoom:2,center:[-10,30],popup:{defaultPopupTemplateEnabled:!0}}})}}),"\n",(0,r.jsx)(t.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsx)(t.h3,{id:"install--get-the-components",children:"Install / Get the Components"}),"\n",(0,r.jsx)(t.p,{children:"This project is very much a work in progress.  A preliminary package is available via npm:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:"npm install esrieact\n"})}),"\n",(0,r.jsxs)(t.p,{children:["This package has not yet been tested in various environments.  In the meantime, simply copy the contents of the ",(0,r.jsx)(t.a,{href:"https://github.com/slutske22/esrieact/tree/main/lib",children:"/lib"})," folder into your codebase, and use the components directly."]}),"\n",(0,r.jsx)(t.h3,{id:"create-a-map",children:"Create a Map"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { MapView, FeatureLayer, LayerList } from '../lib';\n\nconst MyApp = () => {\n  return (\n    <MapView\n      style={{ width: '640px', height: '400px' }}\n      ViewProperties={{\n        extent: EXTENT_OBJECT,\n        events: {\n          click: e => console.log(e.mapPoint);\n        }\n      }}\n    >\n      <FeatureLayer url={FEATURELAYER_URL} />\n      <LayerList />\n    </MapView>\n  )\n}\n"})}),"\n",(0,r.jsx)(t.h3,{id:"use-state",children:"Use State"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"import { MapView, FeatureLayer, LayerList } from '../lib';\n\nconst MyApp = () => {\n  const [maxStorage, setMaxStorage] = useState(10000);\n\n  return (\n    <MapView>\n      <FeatureLayer url={FEATURELAYER_URL}>\n        <FeatureLayerView filter={{ where: `C_Storage < ${maxStorage}` }} />\n      </FeatureLayer>\n    </MapView>\n  )\n}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"why-esrieact",children:"Why ESRIEACT?"}),"\n",(0,r.jsx)(t.h3,{id:"pains-of-the-past",children:"Pains of the Past"}),"\n",(0,r.jsxs)(t.p,{children:["The goal of wrapping ArcGIS JS API components in react wrappers is to maintain a react-style flow of data, i.e. state and prop changes cause components to react and auto-update. For example, rendering a map, or map components, normally requires many ",(0,r.jsx)(t.code,{children:"useEffect"})," calls:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:'import React, { useEffect } from "react";\nimport Map from "@arcgis/core/Map";\nimport MapView from "@arcgis/core/views/MapView";\n\nexport const EffectBasedMap: React.FC = () => {\n  useEffect(() => {\n    const map = new Map({\n      basemap: "topo-vector",\n    });\n\n    new MapView({\n      container: "map-div",\n      map,\n    });\n  }, []);\n\n  return <div id="map-div" />;\n};\n'})}),"\n",(0,r.jsxs)(t.p,{children:["While the above is not terribly complex or ugly, mangaging map state with React is more complex as we add more ESRI components. For example, keeping the map up to date with a list of layers requires some confusing ",(0,r.jsx)(t.code,{children:"useEffect"}),"s:"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:'export const EffectBasedMap: React.FC = ({ layerList }) => {\n  const [map, setMap] = useState<__esri.Map>();\n\n  useEffect(() => {\n    const map = new Map({\n      basemap: "topo-vector",\n    });\n\n    new MapView({\n      container: "map-div",\n      map,\n    });\n\n    setMap(map);\n  }, []);\n\n  useEffect(() => {\n    if (map) {\n      layerList.forEach((layer) => {\n        if (!map.layers.map((l) => l.id).includes(layer.id)) {\n          map.add(layer);\n        }\n        // We would also need some ugly logic here to test if the map has\n        // layers that are not part of the new layer list prop\n      });\n    }\n  }, [map, layerList]);\n\n  return <div id="map-div" />;\n};\n'})}),"\n",(0,r.jsx)(t.h3,{id:"react--arcgis-js-api--esrieact",children:"React + ArcGIS JS API = ESRIEACT"}),"\n",(0,r.jsx)(t.p,{children:"Instead, wrapper components are available to make map presentation clear and declarative:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:'import React from "react";\nimport { FeatureLayer, MapView } from "./esri";\n\nexport const ReactMap: React.FC = ({ layerList }) => {\n  return (\n    <MapView>\n      {layerList.map((layer) => (\n        <FeatureLayer url={layer.url} />\n      ))}\n    </MapView>\n  );\n};\n'})}),"\n",(0,r.jsx)(t.p,{children:"The wrappers for ESRIEACT components often do not render anything, but rather simply use react lifecycle methods to manage the interaction of an ESRI component to the map. If children of a component are needed, ESRIEACT components render a context object that provides the ESRI instance to any children."}),"\n",(0,r.jsx)(t.h3,{id:"what-about-esris-react-library",children:"What about ESRI's react library?"}),"\n",(0,r.jsxs)(t.p,{children:["ESRI recently released ",(0,r.jsx)(t.a,{href:"https://www.npmjs.com/package/@arcgis/map-components-react",children:"@arcgis/map-components-react"}),", which offers some support for ArcGIS components in react.  Their ",(0,r.jsx)(t.a,{href:"https://developers.arcgis.com/javascript/latest/get-started-react/",children:"documentation"})," shows a basic example, but in the current early stage of this library, react components for map layers, renderers, graphics, etc, do not exist, and must still be added to a map using the classic imperative programming style."]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},78478:(e,t,n)=>{n.d(t,{A:()=>s});n(96540);var r=n(92303),a=n(74848);function s({children:e,fallback:t}){return(0,r.A)()?(0,a.jsx)(a.Fragment,{children:e?.()}):t??null}},85983:(e,t,n)=>{n.d(t,{wZ:()=>d,lo:()=>h,K4:()=>u,xF:()=>m});var r=n(96540),a=n(53174),s=n(7741),i=n(77842),o=n.n(i);function c(e){const t=(0,r.useRef)(void 0);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}const p=(e,t)=>{const n=c(t);!function(e,t){const n=(0,r.useRef)(!0);(0,r.useEffect)((()=>{if(!n.current)return e();n.current=!1}),t)}((()=>{if(n){const s=(r=t,a=n,Object.keys(r).reduce(((e,t)=>{if(a.hasOwnProperty(t)){if(o()(r[t],a[t])){const n=e.indexOf(t);e.splice(n,1)}}else e.push(t);return e}),Object.keys(a)));s.length&&s.forEach((n=>{e[n]=t[n]}))}var r,a}),[JSON.stringify(t)])};var l=n(74848);const d=r.createContext({}),h=({children:e})=>{const[t,n]=(0,r.useState)(void 0),[a,s]=(0,r.useState)(void 0);return(0,l.jsx)(d.Provider,{value:{map:t,setMap:n,view:a,setView:s},children:e})},m=r.forwardRef(((e,t)=>{const{MapProperties:n,ViewProperties:{events:i,...o}={},children:c,...h}=e,[m,u]=(0,r.useState)(),{map:f,setMap:x,view:y,setView:g}=(0,r.useContext)(d);return(0,r.useImperativeHandle)(t,(()=>({map:f,view:y,element:m}))),function(e,t){const n=(0,r.useRef)([]);(0,r.useEffect)((()=>(e&&t&&(n.current.forEach((e=>e.remove())),n.current=Object.keys(t).map((n=>{const r=t[n];if(r){if(r.modifiers){const{modifiers:t,handler:a}=r;return e.on(n,t,a)}return e.on(n,r)}}))),()=>{n.current.forEach((e=>e.remove())),n.current=[]})),[e,t])}(y,"function"==typeof i?i(y):i),(0,r.useEffect)((()=>{if(m){const e=new a.A(n),t=new s.A({map:e,container:m,...o});x(e),g(t)}}),[m]),p(f,n),p(y,o),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{ref:e=>{e&&u(e)},...h}),f&&y&&c]})})),u=r.forwardRef(((e,t)=>(0,l.jsx)(h,{children:(0,l.jsx)(m,{...e,ref:t})})))}}]);