"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[438,2775],{85470:(e,t,n)=>{n.d(t,{A:()=>f});var r,a=n(66866),o=n(21877),i=n(19251),s=n(21564),l=n(73446),u=n(63863);let c=r=class extends o.oY{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new r({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,i.o8)(this.values),isSlice:this.isSlice})}};(0,a._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"variableName",void 0),(0,a._)([(0,s.MZ)({type:String,json:{write:!0}})],c.prototype,"dimensionName",void 0),(0,a._)([(0,s.MZ)({type:l.gK.array(l.gK.oneOf([l.gK.native(Number),l.gK.array(l.gK.native(Number))])),json:{write:!0}})],c.prototype,"values",void 0),(0,a._)([(0,s.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"isSlice",void 0),c=r=(0,a._)([(0,u.$)("esri.layers.support.DimensionalDefinition")],c);const f=c},52775:(e,t,n)=>{n.d(t,{C:()=>i,m:()=>o});var r=n(98849),a=n(40189);async function o(e,t,n){let o;try{o=await createImageBitmap(e)}catch(i){throw new r.A("request:server",`Unable to load ${t}`,{url:t,error:i})}return(0,a.Te)(n),o}async function i(e,t,n,o,i){let s;try{s=await createImageBitmap(e)}catch(l){throw new r.A("request:server",`Unable to load tile ${t}/${n}/${o}`,{error:l,level:t,row:n,col:o})}return(0,a.Te)(i),s}},75792:(e,t,n)=>{n.d(t,{DY:()=>h,NG:()=>k,QW:()=>i,Rp:()=>p,fy:()=>y,j5:()=>m,sx:()=>d,xx:()=>s,z2:()=>g});var r=n(85569),a=n(85470);function o(e,t,n){const r=t.shift();if(0===n.length){const e=[];n.push({sliceId:-1,multidimensionalDefinition:e})}const a=n.length;for(let o=0;o<a;o++){const t=n.shift().multidimensionalDefinition;r.values?.forEach((a=>{n.push({sliceId:-1,multidimensionalDefinition:[...t,{variableName:e,dimensionName:r.name,values:[a]}]})}))}t.length&&o(e,t,n)}function i(e,t){const n=[];let r=0;return(t?e.variables.filter((e=>e.name.toLowerCase()===t.toLowerCase())):[...e.variables].sort(((e,t)=>e.name>t.name?1:-1))).forEach((e=>{const t=[],a=[...e.dimensions].sort(((e,t)=>e.name>t.name?-1:1));o(e.name,a,t),t.forEach((e=>{n.push({...e,sliceId:r++})}))})),n}function s(e,t,n){let r=e;if(t&&(t=[...t].sort(((e,t)=>e.dimensionName<t.dimensionName?-1:1))).forEach((({dimensionName:e,values:t,isSlice:n})=>{t.length&&(r=r.filter((r=>{const a=r.multidimensionalDefinition.find((t=>t.dimensionName===e));if(null==a)return!1;const o=a.values[0];return"number"==typeof o?"number"==typeof t[0]?t.includes(o):t.some((e=>e[0]<=o&&e[1]>=o)):"number"==typeof t[0]?t.some((e=>o[0]<=e&&o[1]>=e)):n?t.some((e=>e[0]===o[0]&&e[0]===o[1])):t.some((e=>e[0]>=o[0]&&e[0]<=o[1]||e[1]>=o[0]&&e[1]<=o[1]||e[0]<o[0]&&e[1]>o[1]))})))})),r.length&&null!=n?.start&&null!=n.end){const e=n.start.getTime(),t=n.end.getTime(),a=r[0].multidimensionalDefinition.findIndex((e=>"StdTime"===e.dimensionName));a>-1&&(r=r.filter((n=>{const r=n.multidimensionalDefinition[a].values[0];return e<=r&&t>=r})))}return r.map((e=>e.sliceId))}function l(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function u(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function c(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function f(e,t,n){if(!t?.subsetDefinitions?.length)return e;let r;if(n){const{variables:a}=t;if(a.length&&!a.includes(n))return null;const o=t.subsetDefinitions.find((t=>t.dimensionName===e.name&&t.variableName===n));if(!o?.values?.length)return e;r=c(o.values)}else{const n=t.dimensions.find((({name:t})=>t===e.name));r=n?.extent}const a=r;if(!a?.length)return e;const o=e.values.filter((e=>l(e,a)));return{...e,extent:[...a],values:o}}function d(e,t,n){if(!t?.subsetDefinitions?.length)return!1;const{variables:r}=t;if(r.length&&e.some((({variableName:e})=>e&&!r.includes(e))))return!0;for(let a=0;a<e.length;a++){const r=e[a],o=t.subsetDefinitions.find((e=>(""===r.variableName||e.variableName===r.variableName)&&e.dimensionName===r.dimensionName));if(o?.values.length){const e=c(o.values);if(r.isSlice||2!==r.values.length||Array.isArray(r.values[0])||r.values[0]===r.values[1]||!n){if(r.values.some((t=>!l(t,e))))return!0}else if(!u(r.values,e))return!0}}return!1}function p(e,t){if(null==e)return{isOutside:!1};const{geometry:n,timeExtent:r,multidimensionalDefinition:o}=t;let i=null;if(null!=r&&(i=function(e,t){const n=e.dimensions.find((({name:e})=>"StdTime"===e));if(null==n||null==t.start&&null==t.end)return t;t=t.clone();const{start:r,end:o}=t.toJSON(),i=r===o?[r]:null!=r&&null!=o?[r,o]:[r??o];return 2===i.length&&n?.extent.length&&(i[0]=Math.max(i[0],n.extent[0]),i[1]=Math.min(i[1],n.extent[1]??n.extent[0]),i[1]<i[0])||d([new a.A({variableName:"",dimensionName:"StdTime",isSlice:1===i.length,values:i})],e,!0)?null:(t.start=new Date(i[0]),t.end=new Date(i[1]??i[0]),t)}(e,r),null==i))return{isOutside:!0};const{areaOfInterest:s}=e;if(s&&n){const e="point"===n.type?n:"extent"===n.type?n.center:"polygon"===n.type?n.centroid:null;if(e&&!s.contains(e))return{isOutside:!0}}return null!=o&&o.length&&d(o,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:n,timeExtent:i,multidimensionalDefinition:o}}}function m(e,t={}){const{multidimensionalInfo:n,keyProperties:r}=e;if(null==n)return null;const{variableName:a,multidimensionalSubset:o,multidimensionalDefinition:i}=t,s=null!=i?i[0]?.variableName:null,l=a||s||r?.DefaultVariable;let{variables:u}=n;return o?.variables?.length&&(u=u.filter((({name:e})=>o.variables.includes(e)))),l?u.find((({name:e})=>e===l))??u[0]:u[0]}function y(e,t={}){const n=m(e,t);if(!n)return null;const r=[],{dimensions:o,name:i}=n;if(0===o.length)return[new a.A({variableName:i,dimensionName:"",values:[],isSlice:!0})];for(let s=0;s<o.length;s++){const e=f(o[s],t.multidimensionalSubset,i);if(!e)return null;const{values:n,extent:l}=e;let u=n?.[0]??l[0];"stdz"===e.name.toLowerCase()&&!e.hasRanges&&Math.abs(l[1])<=Math.abs(l[0])&&(u=n?.length?n[n.length-1]:l[1]),r.push(new a.A({variableName:i,dimensionName:e.name,values:[u],isSlice:!t.useRangeForRangedDimensionInfo||!!e.hasRanges}))}return r}function h(e){return!!e?.length&&e.some((e=>{if(null==e.values)return!0;const t=e.values.length;return 0===t||t>1||!e.isSlice&&Array.isArray(e.values[0])}))}function g(e,t){if(null==t||null==e)return null;let n=t.variables.map((e=>({...e})));return e?.variables?.length&&(n=n.filter((({name:t})=>e.variables.includes(t))),n.forEach((t=>{t.dimensions=t.dimensions.map((n=>f(n,e,t.name))).filter(r.Ru)}))),n}function b(e,t){const{values:n}=t;if(n?.length){const t=Array.isArray(n[0]),r=Array.isArray(e);return t!==r?-1:t&&r?n.findIndex((t=>t[0]===e[0]&&t[1]===e[1])):n.indexOf(e)}const{extent:r}=t;if(Array.isArray(e)||e<r[0]||e>r[1])return-1;const a=t.interval||1;if("ISO8601"!==t.unit)return Math.round((e-r[0])/a);const o=r[0];let i=-1;switch(t.intervalUnit?.toLowerCase()||"seconds"){case"seconds":i=Math.round((e-o)/1e3/a);break;case"minutes":i=Math.round((e-o)/6e4/a);break;case"hours":i=Math.round((e-o)/36e5/a);break;case"days":i=Math.round((e-o)/864e5/a);break;case"months":{const t=new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear(),n=new Date(o).getUTCMonth(),r=new Date(e).getUTCMonth();i=0===t?r-n:r+11-n+12*(t-1)}break;case"years":i=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/a);break;case"decades":i=Math.round((new Date(e).getUTCFullYear()-new Date(o).getUTCFullYear())/10/a)}return i}function w(e){let t=e.values?.length;if(t)return t;const{extent:n,unit:r}=e,a=e.interval||1,o=n?n[1]-n[0]:0;if("ISO8601"!==r)return Math.round(o/a);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(o/1e3/a);break;case"minutes":t=Math.round(o/6e4/a);break;case"hours":t=Math.round(o/36e5/a);break;case"days":t=Math.round(o/864e5/a);break;case"months":{const e=new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear(),r=new Date(n[0]).getUTCMonth(),a=new Date(n[1]).getUTCMonth();t=0===e?a-r+1:a+11-r+12*(e-1)+1}break;case"years":t=Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/a);break;case"decades":t=Math.round((new Date(n[1]).getUTCFullYear()-new Date(n[0]).getUTCFullYear())/10/a);break;default:t=0}return t}function k(e,t){let n=0;const r=e[0].variableName,a=[...t.variables].sort(((e,t)=>e.name>t.name?1:-1));for(let o=0;o<a.length;o++){const t=a[o],i=[...t.dimensions].sort(((e,t)=>e.name>t.name?-1:1));if(t.name!==r){n+=i.map((e=>w(e))).reduce(((e,t)=>e*t));continue}const s=i.map((e=>w(e))),l=i.length;for(let r=0;r<l;r++){const t=e.find((e=>e.dimensionName===i[r].name));if(null==t)return null;const a=b(t.values[0],i[r]);if(-1===a)return null;s.shift(),n+=r===l-1?a:a*s.reduce(((e,t)=>e*t))}break}return n}},93797:(e,t,n)=>{n.d(t,{D:()=>o});var r=n(16123);const a=[];function o(e,t){if((0,r.Wo)(e.url??""))return!0;const{wkid:n}=t;for(const r of a){if((e.version??0)>=r[0])return!0;if("function"==typeof r[1]&&(r[1]=r[1]()),r[1].has(n))return!1}return!0}a.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),a.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),a.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),a.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),a.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]),a.push([10.7,()=>{const e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let t=8065;t<=8068;t++)e.add(t);for(let t=8082;t<=8083;t++)e.add(t);for(let t=8379;t<=8385;t++)e.add(t);for(let t=8836;t<=8840;t++)e.add(t);for(let t=8857;t<=8860;t++)e.add(t);for(let t=53035;t<=53037;t++)e.add(t);for(let t=54090;t<=54091;t++)e.add(t);for(let t=102498;t<=102499;t++)e.add(t);return e}]),a.push([10.61,()=>new Set([102497])]),a.push([10.6,()=>{const e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let t=7755;t<=7787;t++)e.add(t);for(let t=7791;t<=7795;t++)e.add(t);for(let t=7799;t<=7801;t++)e.add(t);for(let t=7825;t<=7831;t++)e.add(t);for(let t=7877;t<=7878;t++)e.add(t);for(let t=7882;t<=7883;t++)e.add(t);for(let t=7991;t<=7992;t++)e.add(t);for(let t=8042;t<=8043;t++)e.add(t);for(let t=8058;t<=8059;t++)e.add(t);for(let t=8311;t<=8348;t++)e.add(t);for(let t=9060;t<=9067;t++)e.add(t);for(let t=102562;t<=102568;t++)e.add(t);for(let t=102799;t<=102900;t++)e.add(t);return e}])},80323:(e,t,n)=>{function r(e){const t={};for(const n in e){if("declaredClass"===n)continue;const a=e[n];if(null!=a&&"function"!=typeof a)if(Array.isArray(a)){t[n]=[];for(let e=0;e<a.length;e++)t[n][e]=r(a[e])}else"object"==typeof a?a.toJSON&&(t[n]=JSON.stringify(a)):t[n]=a}return t}n.d(t,{z:()=>r})},60920:(e,t,n)=>{n.d(t,{I:()=>i});var r=n(11499),a=n(8132),o=n(14474);async function i(e,t,n){const i=(0,r.Dl)(e);return(0,a.gW)(i,o.A.from(t),{...n}).then((e=>e.data.count))}},1177:(e,t,n)=>{n.d(t,{V:()=>i});var r=n(11499),a=n(8132),o=n(14474);async function i(e,t,n){const i=(0,r.Dl)(e);return(0,a.Pk)(i,o.A.from(t),{...n}).then((e=>e.data.objectIds))}},9190:(e,t,n)=>{n.d(t,{e:()=>l,s:()=>s});var r=n(11499),a=n(8132),o=n(57822),i=n(14474);async function s(e,t,n){const r=await l(e,t,n);return o.A.fromJSON(r)}async function l(e,t,n){const o=(0,r.Dl)(e),s={...n},l=i.A.from(t),{data:u}=await(0,a.eW)(o,l,l.sourceSpatialReference,s);return u}},37610:(e,t,n)=>{n.d(t,{SH:()=>F,ae:()=>S,cn:()=>b});var r=n(98849),a=n(66471),o=n(88443),i=n(38333);const s=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],l=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],u=["upperLeft","lowerLeft"];function c(e){return e>=s.length?null:s[e]}function f(e){return e>=l.length?null:l[e]}function d(e){return e>=u.length?null:u[e]}function p(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function m(e,t,n){const r=e.asUnsafe(),a=t.createPointGeometry(n);for(;r.next();)switch(r.tag()){case 3:{const e=r.getUInt32(),n=r.pos()+e;let o=0;for(;r.pos()<n;)t.addCoordinatePoint(a,r.getSInt64(),o++);break}default:r.skip()}return a}function y(e,t,n){const r=e.asUnsafe(),a=t.createGeometry(n),o=2+(n.hasZ?1:0)+(n.hasM?1:0);for(;r.next();)switch(r.tag()){case 2:{const e=r.getUInt32(),n=r.pos()+e;let o=0;for(;r.pos()<n;)t.addLength(a,r.getUInt32(),o++);break}case 3:{const e=r.getUInt32(),n=r.pos()+e;let i=0;for(t.allocateCoordinates(a);r.pos()<n;)t.addCoordinate(a,r.getSInt64(),i),i++,i===o&&(i=0);break}default:r.skip()}return a}function h(e){const t=e.asUnsafe(),n=new o.A;let r="esriGeometryPoint";for(;t.next();)switch(t.tag()){case 2:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.lengths.push(t.getUInt32());break}case 3:{const e=t.getUInt32(),r=t.pos()+e;for(;t.pos()<r;)n.coords.push(t.getSInt64());break}case 1:r=i.z[t.getEnum()];break;default:t.skip()}return{queryGeometry:n,queryGeometryType:r}}function g(e){const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:return t.getString();case 2:return t.getFloat();case 3:return t.getDouble();case 4:return t.getSInt32();case 5:return t.getUInt32();case 6:return t.getInt64();case 7:return t.getUInt64();case 8:return t.getSInt64();case 9:return t.getBool();default:return t.skip(),null}return null}function b(e){const t=e.asUnsafe(),n={type:c(0)};for(;t.next();)switch(t.tag()){case 1:n.name=t.getString();break;case 2:n.type=c(t.getEnum());break;case 3:n.alias=t.getString();break;case 4:n.sqlType=f(t.getEnum());break;case 5:default:t.skip();break;case 6:n.defaultValue=t.getString()}return n}function w(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.name=n.getString();break;case 2:t.isSystemMaintained=n.getBool();break;default:n.skip()}return t}function k(e,t,n,r){const a=t.createFeature(n);let o=0;for(;e.next();)switch(e.tag()){case 1:{const t=r[o++].name;a.attributes[t]=e.processMessage(g);break}case 2:a.geometry=e.processMessageWithArgs(y,t,n);break;case 4:a.centroid=e.processMessageWithArgs(m,t,n);break;default:e.skip()}return a}function v(e){const t=[1,1,1,1],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function M(e){const t=[0,0,0,0],n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t[0]=n.getDouble();break;case 2:t[1]=n.getDouble();break;case 4:t[2]=n.getDouble();break;case 3:t[3]=n.getDouble();break;default:n.skip()}return t}function S(e){const t={originPosition:d(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.originPosition=d(n.getEnum());break;case 2:t.scale=n.processMessage(v);break;case 3:t.translate=n.processMessage(M);break;default:n.skip()}return t}function I(e){const t={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:t.shapeAreaFieldName=n.getString();break;case 2:t.shapeLengthFieldName=n.getString();break;case 3:t.units=n.getString();break;default:n.skip()}return t}function x(e,t){const n=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:n.wkid=e.getUInt32();break;case 5:n.wkt=e.getString();break;case 2:n.latestWkid=e.getUInt32();break;case 3:n.vcsWkid=e.getUInt32();break;case 4:n.latestVcsWkid=e.getUInt32();break;default:e.skip()}return n}function T(e,t){const n=t.createFeatureResult(),r=e.asUnsafe();n.geometryType=p(t,0);let a=!1;for(;r.next();)switch(r.tag()){case 1:n.objectIdFieldName=r.getString();break;case 3:n.globalIdFieldName=r.getString();break;case 4:n.geohashFieldName=r.getString();break;case 5:n.geometryProperties=r.processMessage(I);break;case 7:n.geometryType=p(t,r.getEnum());break;case 8:n.spatialReference=r.processMessageWithArgs(x,t);break;case 10:n.hasZ=r.getBool();break;case 11:n.hasM=r.getBool();break;case 12:n.transform=r.processMessage(S);break;case 9:n.exceededTransferLimit=r.getBool();break;case 13:t.addField(n,r.processMessage(b));break;case 15:a||(t.prepareFeatures(n),a=!0),t.addFeature(n,r.processMessageWithArgs(k,t,n,n.fields));break;case 2:n.uniqueIdField=r.processMessage(w);break;default:r.skip()}return t.finishFeatureResult(n),n}function C(e,t){const n={};let r=null;for(;e.next();)switch(e.tag()){case 4:r=e.processMessageWithArgs(h);break;case 1:n.featureResult=e.processMessageWithArgs(T,t);break;default:e.skip()}return null!=r&&n.featureResult&&t.addQueryGeometry(n,r),n}function F(e,t){try{const n=2,r=new a.A(new Uint8Array(e),new DataView(e)),o={};for(;r.next();)r.tag()===n?o.queryResult=r.processMessageWithArgs(C,t):r.skip();return o}catch(s){throw new r.A("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:s})}}},38333:(e,t,n)=>{n.d(t,{S:()=>u,z:()=>l});var r=n(92976),a=n(87926),o=n(32597),i=n(46461),s=n(88443);const l=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class u{constructor(e){this._options=e,this.geometryTypes=l,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new i.A}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e?.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||(0,a.aI)(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=(0,r.G9)(this._options.sourceSpatialReference)/(0,r.G9)(e.spatialReference);if(1!==t)for(const n of e.features){if(!(0,o.N3)(n))continue;const e=n.geometry.coords;for(let n=2;n<e.length;n+=3)e[n]*=t}}addFeature(e,t){e.features.push(t)}createFeature(){return new o.Om}createSpatialReference(){return{wkid:0}}createGeometry(){return new s.A}addField(e,t){e.fields.push(t)}allocateCoordinates(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,t){e.coords[this._coordinatePtr++]=t}addCoordinatePoint(e,t){e.coords.push(t)}addLength(e,t){e.lengths.push(t)}addQueryGeometry(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType}createPointGeometry(){return new s.A}}},79305:(e,t,n)=>{n.d(t,{m:()=>a});var r=n(37610);function a(e,t){const n=(0,r.SH)(e,t),a=n.queryResult.featureResult,o=n.queryResult.queryGeometry,i=n.queryResult.queryGeometryType;if(a&&a.features&&a.features.length&&a.objectIdFieldName){const e=a.objectIdFieldName;for(const t of a.features)t.attributes&&(t.objectId=t.attributes[e])}return a&&(a.queryGeometry=o,a.queryGeometryType=i),a}},8132:(e,t,n)=>{n.d(t,{IJ:()=>m,Jf:()=>b,Pk:()=>h,eW:()=>p,gW:()=>g,kS:()=>y});var r=n(86394),a=n(20909),o=n(1171),i=n(65231),s=n(87926),l=n(80323),u=n(79305),c=n(27604);const f="Layer does not support extent calculation.";function d(e,t){const n=e.geometry,r=e.toJSON();delete r.compactGeometryEnabled,delete r.defaultSpatialReferenceEnabled;const a=r;let i,l,u;if(null!=n&&(l=n.spatialReference,u=(0,s.YX)(l),a.geometryType=(0,o.$B)(n),a.geometry=function(e,t){if(t&&"extent"===e.type)return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&"point"===e.type)return`${e.x},${e.y}`;const n=e.toJSON();return delete n.spatialReference,JSON.stringify(n)}(n,e.compactGeometryEnabled),a.inSR=u),r.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=r.groupByFieldsForStatistics.join(",")),r.objectIds&&(a.objectIds=r.objectIds.join(",")),r.orderByFields&&(a.orderByFields=r.orderByFields.join(",")),!r.outFields||!r.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete a.outFields:r.outFields.includes("*")?a.outFields="*":a.outFields=r.outFields.join(","),r.outSR?(a.outSR=(0,s.YX)(r.outSR),i=e.outSpatialReference):n&&(r.returnGeometry||r.returnCentroid)&&(a.outSR=a.inSR,i=l),r.returnGeometry&&delete r.returnGeometry,r.outStatistics&&(a.outStatistics=JSON.stringify(r.outStatistics)),r.fullText&&(a.fullText=JSON.stringify(r.fullText)),r.pixelSize&&(a.pixelSize=JSON.stringify(r.pixelSize)),r.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=l&&null!=e.quantizationParameters?.extent&&l.equals(e.quantizationParameters.extent.spatialReference)&&delete r.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(r.quantizationParameters)),r.parameterValues&&(a.parameterValues=JSON.stringify(r.parameterValues)),r.rangeValues&&(a.rangeValues=JSON.stringify(r.rangeValues)),r.dynamicDataSource&&(a.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r.timeExtent){const e=r.timeExtent,{start:t,end:n}=e;null==t&&null==n||(a.time=t===n?t:`${t??"null"},${n??"null"}`),delete r.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=l&&null!=i&&l.equals(i)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function p(e,t,n,r){const a=null!=t.timeExtent&&t.timeExtent.isEmpty?{data:{features:[]}}:await w(e,t,"json",r);return(0,c.q)(t,n,a.data),a}async function m(e,t,n,r){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:n.createFeatureResult()};const a=await y(e,t,r),o=a;return o.data=(0,u.m)(a.data,n),o}function y(e,t,n){return w(e,t,"pbf",n)}function h(e,t,n){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):w(e,t,"json",n,{returnIdsOnly:!0})}function g(e,t,n){return null!=t.timeExtent&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):w(e,t,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function b(e,t,n){if(null!=t.timeExtent&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await w(e,t,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),a=r.data;if(a.hasOwnProperty("extent"))return r;if(a.features)throw new Error(f);if(a.hasOwnProperty("count"))throw new Error(f);return r}async function w(e,t,n,o={},s={}){const u="string"==typeof e?(0,a.An)(e):e,c=t.geometry?[t.geometry]:[],f=await(0,i.el)(c,null,{signal:o.signal}),p=f?.[0];null!=p&&((t=t.clone()).geometry=p);const m=(0,l.z)({...u.query,f:n,...s,...d(t,s)});return(0,r.A)((0,a.fj)(u.path,function(e,t){return null!=e.formatOf3DObjects&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}(t,s)?"query3d":"query"),{...o,responseType:"pbf"===n?"array-buffer":"json",query:{...m,...o.query}})}},27604:(e,t,n)=>{n.d(t,{q:()=>a});var r=n(8034);function a(e,t,n){if(!n?.features||!n.hasZ)return;const a=(0,r.N)(n.geometryType,t,e.outSpatialReference);if(null!=a)for(const r of n.features)a(r.geometry)}},22531:(e,t,n)=>{n.d(t,{A:()=>d});var r,a=n(66866),o=n(21877),i=n(21564),s=n(73446),l=(n(85569),n(39831),n(63863));function u(e){const{exifInfo:t,exifName:n,tagName:r}=e;if(!t||!n||!r)return null;const a=t.find((e=>e.name===n));return a?function(e){const{tagName:t,tags:n}=e;if(!n||!t)return null;const r=n.find((e=>e.name===t));return r?.value||null}({tagName:r,tags:a.tags}):null}const c={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let f=r=class extends o.oY{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=u({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return c[t]||null}clone(){return new r({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};(0,a._)([(0,i.MZ)({type:String})],f.prototype,"contentType",void 0),(0,a._)([(0,i.MZ)()],f.prototype,"exifInfo",void 0),(0,a._)([(0,i.MZ)({readOnly:!0})],f.prototype,"orientationInfo",null),(0,a._)([(0,i.MZ)({type:s.jz})],f.prototype,"id",void 0),(0,a._)([(0,i.MZ)({type:String})],f.prototype,"globalId",void 0),(0,a._)([(0,i.MZ)({type:String})],f.prototype,"keywords",void 0),(0,a._)([(0,i.MZ)({type:String})],f.prototype,"name",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],f.prototype,"parentGlobalId",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],f.prototype,"parentObjectId",void 0),(0,a._)([(0,i.MZ)({type:s.jz})],f.prototype,"size",void 0),(0,a._)([(0,i.MZ)({json:{read:!1}})],f.prototype,"url",void 0),f=r=(0,a._)([(0,l.$)("esri.layers.support.AttachmentInfo")],f);const d=f},83763:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(66866),a=n(59851),o=n(21877),i=n(21564),s=(n(73446),n(85569),n(39831),n(28902)),l=n(63863);const u=new a.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),c=new a.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let f=class extends o.oY{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}};(0,r._)([(0,s.e)({classBreaksDef:"class-breaks-definition"})],f.prototype,"type",void 0),(0,r._)([(0,i.MZ)({json:{write:!0}})],f.prototype,"breakCount",void 0),(0,r._)([(0,i.MZ)({json:{write:!0}})],f.prototype,"classificationField",void 0),(0,r._)([(0,i.MZ)({type:String,json:{read:u.read,write:u.write}})],f.prototype,"classificationMethod",void 0),(0,r._)([(0,i.MZ)({json:{write:!0}})],f.prototype,"normalizationField",void 0),(0,r._)([(0,i.MZ)({json:{read:c.read,write:c.write}})],f.prototype,"normalizationType",void 0),(0,r._)([(0,i.MZ)({value:null,json:{write:!0}})],f.prototype,"standardDeviationInterval",null),(0,r._)([(0,i.MZ)({value:null,json:{write:!0}})],f.prototype,"definedInterval",null),f=(0,r._)([(0,l.$)("esri.rest.support.ClassBreaksDefinition")],f);const d=f},56051:(e,t,n)=>{n.d(t,{A:()=>M});var r,a=n(66866),o=n(17639),i=n(19790),s=n(59851),l=n(21877),u=n(19251),c=n(21564),f=n(73446),d=n(63863),p=n(77542),m=n(1171);n(85569),n(39831);let y=r=class extends l.oY{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new r({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};(0,a._)([(0,c.MZ)({type:[String],json:{write:!0}})],y.prototype,"groupByFields",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],y.prototype,"topCount",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{write:!0}})],y.prototype,"orderByFields",void 0),y=r=(0,a._)([(0,d.$)("esri.rest.support.TopFilter")],y);const h=y;var g,b=n(78983);const w=new s.J({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),k=new s.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let v=g=class extends l.oY{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new g((0,u.o8)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};(0,a._)([(0,c.MZ)({type:Boolean,json:{write:!0}})],v.prototype,"cacheHint",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],v.prototype,"distance",void 0),(0,a._)([(0,c.MZ)({types:o.yR,json:{read:m.rS,write:!0}})],v.prototype,"geometry",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],v.prototype,"geometryPrecision",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{write:!0}})],v.prototype,"maxAllowableOffset",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{read:{source:"resultRecordCount"}}})],v.prototype,"num",void 0),(0,a._)([(0,c.MZ)({json:{write:!0}})],v.prototype,"objectIds",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{write:!0}})],v.prototype,"orderByFields",void 0),(0,a._)([(0,c.MZ)({type:[String],json:{write:!0}})],v.prototype,"outFields",void 0),(0,a._)([(0,c.MZ)({type:b.A,json:{read:{source:"outSR"},write:{target:"outSR"}}})],v.prototype,"outSpatialReference",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],v.prototype,"resultType",void 0),(0,a._)([(0,c.MZ)({json:{write:!0}})],v.prototype,"returnGeometry",void 0),(0,a._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"returnM",void 0),(0,a._)([(0,c.MZ)({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],v.prototype,"returnZ",void 0),(0,a._)([(0,c.MZ)({type:Number,json:{read:{source:"resultOffset"}}})],v.prototype,"start",void 0),(0,a._)([(0,p.K)("start"),(0,p.K)("num")],v.prototype,"writeStart",null),(0,a._)([(0,c.MZ)({type:String,json:{read:{source:"spatialRel",reader:w.read},write:{target:"spatialRel",writer:w.write}}})],v.prototype,"spatialRelationship",void 0),(0,a._)([(0,c.MZ)({type:i.A,json:{write:!0}})],v.prototype,"timeExtent",void 0),(0,a._)([(0,c.MZ)({type:h,json:{write:!0}})],v.prototype,"topFilter",void 0),(0,a._)([(0,c.MZ)({type:String,json:{read:k.read,write:{writer:k.write,overridePolicy(e){return{enabled:null!=e&&null!=this.distance&&this.distance>0}}}}})],v.prototype,"units",void 0),(0,a._)([(0,c.MZ)({type:String,json:{write:!0}})],v.prototype,"where",void 0),v=g=(0,a._)([(0,d.$)("esri.rest.support.TopFeaturesQuery")],v),v.from=(0,f.dp)(v);const M=v},47003:(e,t,n)=>{n.d(t,{t:()=>o});const r=n(539).A.getLogger("esri.rest.support.generateRendererUtils");function a(e,t){return Number(e.toFixed(t))}function o(e){const{normalizationTotal:t}=e;return{classBreaks:i(e),normalizationTotal:t}}function i(e){const t=e.definition,{classificationMethod:n,normalizationType:r,definedInterval:o}=t,i=t.breakCount??1,c=[];let f=e.values;if(0===f.length)return[];f=f.sort(((e,t)=>e-t));const d=f[0],p=f[f.length-1];if("equal-interval"===n)if(f.length>=i){const e=(p-d)/i;let t=d;for(let n=1;n<i;n++){const o=a(d+n*e,6);c.push({minValue:t,maxValue:o,label:s(t,o,r)}),t=o}c.push({minValue:t,maxValue:p,label:s(t,p,r)})}else f.forEach((e=>{c.push({minValue:e,maxValue:e,label:s(e,e,r)})}));else if("natural-breaks"===n){const t=l(f),n=e.valueFrequency||t.valueFrequency,o=u(t.uniqueValues,n,i);let m=d;for(let e=1;e<i;e++)if(t.uniqueValues.length>e){const n=a(t.uniqueValues[o[e]],6);c.push({minValue:m,maxValue:n,label:s(m,n,r)}),m=n}c.push({minValue:m,maxValue:p,label:s(m,p,r)})}else if("quantile"===n)if(f.length>=i&&d!==p){let e=d,t=Math.ceil(f.length/i),n=0;for(let a=1;a<i;a++){let o=t+n-1;o>f.length&&(o=f.length-1),o<0&&(o=0),c.push({minValue:e,maxValue:f[o],label:s(e,f[o],r)}),e=f[o],n+=t,t=Math.ceil((f.length-n)/(i-a))}c.push({minValue:e,maxValue:p,label:s(e,p,r)})}else{let e=-1;for(let t=0;t<f.length;t++){const n=f[t];n!==e&&(e=n,c.push({minValue:e,maxValue:n,label:s(e,n,r)}),e=n)}}else if("standard-deviation"===n){const e=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/=e.length,t}(f),t=function(e,t){let n=0;for(let r=0;r<e.length;r++){const a=e[r];n+=(a-t)*(a-t)}return n/=e.length,Math.sqrt(n)}(f,e);if(0===t)c.push({minValue:f[0],maxValue:f[0],label:s(f[0],f[0],r)});else{const n=function(e,t,n,r,a){let o=Math.max(r-e,t-r)/a/n;return o=o>=1?1:o>=.5?.5:.25,o}(d,p,i,e,t)*t;let o=0,l=d;for(let t=i;t>=1;t--){const i=a(e-(t-.5)*n,6);c.push({minValue:l,maxValue:i,label:s(l,i,r)}),l=i,o++}let u=a(e+.5*n,6);c.push({minValue:l,maxValue:u,label:s(l,u,r)}),l=u,o++;for(let t=1;t<=i;t++)u=o===2*i?p:a(e+(t+.5)*n,6),c.push({minValue:l,maxValue:u,label:s(l,u,r)}),l=u,o++}}else if("defined-interval"===n){if(!o)return c;const e=f[0],t=f[f.length-1],n=Math.ceil((t-e)/o);let i=e;for(let l=1;l<n;l++){const t=a(e+l*o,6);c.push({minValue:i,maxValue:t,label:s(i,t,r)}),i=t}c.push({minValue:i,maxValue:t,label:s(i,t,r)})}return c}function s(e,t,n){let r=null;return r=e===t?n&&"percent-of-total"===n?e+"%":e.toString():n&&"percent-of-total"===n?e+"% - "+t+"%":e+" - "+t,r}function l(e){const t=[],n=[];let r=Number.MIN_VALUE,a=1,o=-1;for(let i=0;i<e.length;i++){const s=e[i];s===r?(a++,n[o]=a):null!==s&&(t.push(s),r=s,a=1,n.push(a),o++)}return{uniqueValues:t,valueFrequency:n}}function u(e,t,n){const r=e.length,a=[];n>r&&(n=r);for(let i=0;i<n;i++)a.push(Math.round(i*r/n-1));a.push(r-1);let o=c(a,e,t,n);return function(e,t,n,r,a,o){let i=0,s=0,l=0,u=0,c=!0;for(let d=0;d<2&&c;d++){0===d&&(c=!1);for(let d=0;d<o-1;d++)for(;n[d+1]+1!==n[d+2];){n[d+1]=n[d+1]+1;const o=f(d,n,r,a);l=o.sbMean,i=o.sbSdcm;const p=f(d+1,n,r,a);if(u=p.sbMean,s=p.sbSdcm,!(i+s<t[d]+t[d+1])){n[d+1]=n[d+1]-1;break}t[d]=i,t[d+1]=s,e[d]=l,e[d+1]=u,c=!0}for(let d=o-1;d>0;d--)for(;n[d]!==n[d-1]+1;){n[d]=n[d]-1;const o=f(d-1,n,r,a);l=o.sbMean,i=o.sbSdcm;const p=f(d,n,r,a);if(u=p.sbMean,s=p.sbSdcm,!(i+s<t[d-1]+t[d])){n[d]=n[d]+1;break}t[d-1]=i,t[d]=s,e[d-1]=l,e[d]=u,c=!0}}return c}(o.mean,o.sdcm,a,e,t,n)&&(o=c(a,e,t,n)),a}function c(e,t,n,r){let a=[],o=[],i=[],s=0;const l=[],u=[];for(let m=0;m<r;m++){const r=f(m,e,t,n);l.push(r.sbMean),u.push(r.sbSdcm),s+=u[m]}let c,d=s,p=!0;for(;p||s<d;){p=!1,a=[];for(let t=0;t<r;t++)a.push(e[t]);for(let n=0;n<r;n++)for(let a=e[n]+1;a<=e[n+1];a++)if(c=t[a],n>0&&a!==e[n+1]&&Math.abs(c-l[n])>Math.abs(c-l[n-1]))e[n]=a;else if(n<r-1&&e[n]!==a-1&&Math.abs(c-l[n])>Math.abs(c-l[n+1])){e[n+1]=a-1;break}d=s,s=0,o=[],i=[];for(let a=0;a<r;a++){o.push(l[a]),i.push(u[a]);const r=f(a,e,t,n);l[a]=r.sbMean,u[a]=r.sbSdcm,s+=u[a]}}if(s>d){for(let t=0;t<r;t++)e[t]=a[t],l[t]=o[t],u[t]=i[t];s=d}return{mean:l,sdcm:u}}function f(e,t,n,a){let o=0,i=0;for(let r=t[e]+1;r<=t[e+1];r++){const e=a[r];o+=n[r]*e,i+=e}i<=0&&r.warn("Exception in Natural Breaks calculation");const s=o/i;let l=0;for(let r=t[e]+1;r<=t[e+1];r++)l+=a[r]*(n[r]-s)**2;return{sbMean:s,sbSdcm:l}}},77573:(e,t,n)=>{n.d(t,{Fe:()=>f,Nk:()=>l,mR:()=>i});var r=n(96220),a=n(50072);function o(e,t,n,r){if(e)if("CIMTextSymbol"!==e.type){if(n&&e.effects)for(const n of e.effects)s(n,t);if(e.symbolLayers)for(const n of e.symbolLayers)switch(n.type){case"CIMPictureMarker":case"CIMVectorMarker":i(n,t,r);break;case"CIMPictureStroke":case"CIMSolidStroke":!r?.preserveOutlineWidth&&n.width&&(n.width*=t);break;case"CIMPictureFill":n.height&&(n.height*=t),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t);break;case"CIMHatchFill":o(n.lineSymbol,t,!0,{...r,preserveOutlineWidth:!1}),n.offsetX&&(n.offsetX*=t),n.offsetY&&(n.offsetY*=t),n.separation&&(n.separation*=t)}}else null!=e.height&&(e.height*=t)}function i(e,t,n){if(e&&(e.markerPlacement&&function(e,t){switch((0,a.zr)(e)&&e.offset&&(e.offset*=t),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const n=e.placementTemplate.map((e=>e*t));e.placementTemplate=n}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=t);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&"Absolute"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size=null!=e.size?e.size*t:0,"CIMVectorMarker"===e.type&&e.markerGraphics))for(const r of e.markerGraphics)e.scaleSymbolsProportionally||o(r.symbol,t,!0,n)}function s(e,t){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=t);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=t);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const n=e.dashTemplate.map((e=>e*t));e.dashTemplate=n}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=t);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=t);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=t);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function l(e){const t=[];return u((0,a.lW)(e),t),t.length?new r.A((0,a.ZT)(t[0])):null}function u(e,t){if(!e)return;let n;n="CIMTextSymbol"===e.type?e.symbol:e;const r="CIMPolygonSymbol"===e.type;if(n?.symbolLayers)for(const o of n.symbolLayers)if(!(o.colorLocked||r&&((0,a.mA)(o)||(0,a.MM)(o)&&o.markerPlacement&&(0,a.zr)(o.markerPlacement))))switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor&&c(t,o.tintColor);break;case"CIMVectorMarker":o.markerGraphics?.forEach((e=>{u(e.symbol,t)}));break;case"CIMSolidStroke":case"CIMSolidFill":c(t,o.color);break;case"CIMHatchFill":u(o.lineSymbol,t)}}function c(e,t){for(const n of e)if(n.join(".")===t.join("."))return;e.push(t)}function f(e,t,n){t instanceof r.A||(t=new r.A(t));const o=(0,a.lW)(e);o&&d(o,t,n)}function d(e,t,n){if(!e)return;let r;r="CIMTextSymbol"===e.type?e.symbol:e;const o="CIMPolygonSymbol"===r?.type;if(r?.symbolLayers)for(const i of r.symbolLayers){if(i.colorLocked)continue;if(o)if(n){const{layersToColor:e}=n;if(((0,a.mA)(i)||(0,a.MM)(i)&&i.markerPlacement&&(0,a.zr)(i.markerPlacement))&&"fill"===e||(0,a.jn)(i)&&"outline"===e)continue}else if((0,a.mA)(i)||(0,a.MM)(i)&&i.markerPlacement&&(0,a.zr)(i.markerPlacement))continue;const e=t.toArray();switch(i.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":i.tintColor=e;break;case"CIMVectorMarker":i.markerGraphics?.forEach((e=>{d(e.symbol,t,n)}));break;case"CIMSolidStroke":case"CIMSolidFill":i.color=e;break;case"CIMHatchFill":d(i.lineSymbol,t,n)}}}},41977:(e,t,n)=>{n.d(t,{$4:()=>b,O1:()=>w,Sw:()=>k,eH:()=>h,rc:()=>g});var r=n(99050),a=n(96220),o=n(86394),i=n(89926),s=n(89882),l=n(77573);const u="picture-fill",c="simple-fill",f="simple-line",d="simple-marker",p="text",m="cim",y=new i.q(1e3);function h(e){const t=e.style;let n=null;if(e)switch(e.type){case d:"cross"!==t&&"x"!==t&&(n=e.color);break;case c:"solid"===t?n=e.color:"none"!==t&&(n={type:"pattern",x:0,y:0,src:(0,r.s)(`esri/symbols/patterns/${t}.png`),width:5,height:5});break;case u:n={type:"pattern",src:e.url,width:(0,s.Lz)(e.width)*e.xscale,height:(0,s.Lz)(e.height)*e.yscale,x:(0,s.Lz)(e.xoffset),y:(0,s.Lz)(e.yoffset)};break;case p:n=e.color;break;case m:n=(0,l.Nk)(e)}return n}function g(e,t){const n=e+"-"+t;return void 0!==y.get(n)?Promise.resolve(y.get(n)):(0,o.A)(e,{responseType:"image"}).then((e=>{const r=e.data,a=r.naturalWidth,o=r.naturalHeight,i=document.createElement("canvas");i.width=a,i.height=o;const s=i.getContext("2d");s.fillStyle=t,s.fillRect(0,0,a,o),s.globalCompositeOperation="destination-in",s.drawImage(r,0,0);const l=i.toDataURL();return y.put(n,l),l}))}function b(e){if(!e)return null;let t=null;switch(e.type){case c:case u:case d:t=b(e.outline);break;case f:{const n=(0,s.Lz)(e.width);null!=e.style&&"none"!==e.style&&0!==n&&(t={color:e.color,style:w(e.style),width:n,cap:e.cap,join:"miter"===e.join?(0,s.Lz)(e.miterLimit):e.join});break}default:t=null}return t}const w=(()=>{const e={};return t=>{if(e[t])return e[t];const n=t.replaceAll("-","");return e[t]=n,n}})(),k=new a.A([128,128,128])},55056:(e,t,n)=>{n.d(t,{$d:()=>m,GG:()=>I,N7:()=>y,Sx:()=>h,UQ:()=>S,di:()=>x,dt:()=>b,f3:()=>T,k_:()=>p,yG:()=>C});var r=n(96220),a=n(30822),o=n(12690),i=(n(39831),n(89882)),s=n(22279),l=n(27664),u=n(77573),c=n(41977),f=n(63299);const d=new r.A("white");function p(e){if(!e)return 0;if((0,a.wk)(e)){const t=function(e){const t=e.symbolLayers?.at(-1);if(t&&"outline"in t)return t?.outline?.size}(e);return null!=t?t:0}return(0,i.PN)((0,c.$4)(e)?.width)}function m(e){if(null==e||!("symbolLayers"in e)||null==e.symbolLayers)return!1;switch(e.type){case"point-3d":return e.symbolLayers.some((e=>"object"===e.type));case"line-3d":return e.symbolLayers.some((e=>"path"===e.type));case"polygon-3d":return e.symbolLayers.some((e=>"object"===e.type||"extrude"===e.type));default:return!1}}function y(e){return e.resource?.href??""}function h(e,t){if(!e)return null;let n=null;return(0,a.wk)(e)?n=function(e){const t=e.symbolLayers;if(!t)return null;let n=null;return t.forEach((e=>{"object"===e.type&&e.resource?.href||(n="water"===e.type?e.color:e.material?e.material.color:null)})),n?new r.A(n):null}(e):(0,a.$y)(e)&&(n="cim"===e.type?(0,u.Nk)(e):e.color?new r.A(e.color):null),n?g(n,t):null}function g(e,t){if(null==t||null==e)return e;const n=e.toRgba();return n[3]=n[3]*t,new r.A(n)}function b(e,t,n){e&&(t||null!=n)&&(t&&(t=new r.A(t)),(0,a.wk)(e)?function(e,t,n){const r=e.symbolLayers;if(!r)return;const a=e=>g(t=t??e??(null!=n?d:null),n);r.forEach((e=>{if("object"!==e.type||!e.resource?.href||t)if("water"===e.type)e.color=a(e.color);else{const t=null!=e.material?e.material.color:null,r=a(t);null==e.material?e.material=new f.N({color:r}):e.material.color=r,null!=n&&"outline"in e&&null!=e.outline?.color&&(e.outline.color=g(e.outline.color,n))}}))}(e,t,n):(0,a.$y)(e)&&function(e,t,n){(t=t??e.color)&&(e.color=g(t,n)),null!=n&&"outline"in e&&e.outline?.color&&(e.outline.color=g(e.outline.color,n))}(e,t,n))}async function w(e,t){const r=e.symbolLayers;r&&await(0,o.jJ)(r,(async e=>async function(e,t){switch(e.type){case"extrude":!function(e,t){e.size="number"==typeof t[2]?t[2]:0}(e,t);break;case"icon":case"line":case"text":!function(e,t){const n=k(t);null!=n&&(e.size=n)}(e,t);break;case"path":!function(e,t){const n=v(t,s.O,[e.width,void 0,e.height]);e.width=M(t[0],e.width,1,n),e.height=M(t[2],e.height,1,n)}(e,t);break;case"object":await async function(e,t){const{resourceSize:r,symbolSize:a}=await async function(e){const{computeObjectLayerResourceSize:t}=await n.e(3867).then(n.bind(n,63867)),r=await t(e,10),{width:a,height:o,depth:i}=e,s=[a,i,o];let l=1;for(let n=0;n<3;n++){const e=s[n];if(null!=e){l=e/r[n];break}}for(let n=0;n<3;n++)null==s[n]&&(s[n]=r[n]*l);return{resourceSize:r,symbolSize:s}}(e),o=v(t,r,a);e.width=M(t[0],a[0],r[0],o),e.depth=M(t[1],a[1],r[1],o),e.height=M(t[2],a[2],r[2],o)}(e,t)}}(e,t)))}function k(e){for(const t of e)if("number"==typeof t)return t;return null}function v(e,t,n){for(let r=0;r<3;r++){const a=e[r];switch(a){case"symbol-value":{const e=n[r];return null!=e?e/t[r]:1}case"proportional":break;default:if(a&&t[r])return a/t[r]}}return 1}function M(e,t,n,r){switch(e){case"proportional":return n*r;case"symbol-value":return null!=t?t:n;default:return e}}async function S(e,t){if(e&&t)return(0,a.wk)(e)?w(e,t):void((0,a.$y)(e)&&function(e,t){const n=k(t);if(null!=n)switch(e.type){case"simple-marker":e.size=n;break;case"picture-marker":{const t=e.width/e.height;t>1?(e.width=n,e.height=n*t):(e.width=n*t,e.height=n);break}case"simple-line":e.width=n;break;case"text":e.font.size=n}}(e,t))}function I(e,t,n){if(e&&null!=t)if((0,a.wk)(e)){const r=e.symbolLayers;r&&r.forEach((e=>{if(e&&"object"===e.type)switch(n){case"tilt":e.tilt=t;break;case"roll":e.roll=t;break;default:e.heading=t}}))}else(0,a.$y)(e)&&("simple-marker"!==e.type&&"picture-marker"!==e.type&&"text"!==e.type||(e.angle=t))}function x(e){if(!e)return null;const t=e.effects.filter((e=>"bloom"!==e.type)).map((e=>e.toJSON()));return(0,l.zu)(t)}function T(e){return null!=e&&"polygon-3d"===e.type&&e.symbolLayers.some((e=>"extrude"===e.type))}async function C(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}},15954:(e,t,n)=>{var r;n.d(t,{X:()=>r}),function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"}(r||(r={}))}}]);