"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5527],{95527:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var s=i(66866),r=i(56542),n=i(48982),a=i(85251),o=(i(539),i(73446),i(85569),i(39831),i(98849),i(63863)),h=i(47347),l=i(48887),d=i(57822),c=i(40231),p=i(13737),u=i(80734),g=i(9049);let _=class extends((0,c.e)(g.A)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}async hitTest(e,t){if(!this.graphicsViews.length)return null;const i=this.layer;return this.graphicsViews.reverse().flatMap((t=>{const s=this._popupTemplates.get(t),r=t.hitTest(e);for(const e of r)e.layer=i,e.sourceLayer=i,e.popupTemplate=s;return r})).map((t=>({type:"graphic",graphic:t,layer:i,mapPoint:e})))}update(e){if(this.graphicsViews)for(const t of this.graphicsViews)t.processUpdate(e)}attach(){this.addAttachHandles([(0,a.wB)((()=>this.layer?.featureCollections),(e=>{this._clear();for(const{popupInfo:t,featureSet:i,layerDefinition:s}of e){const e=d.A.fromJSON(i),a=new n.A(e.features),o=s.drawingInfo,h=t?r.A.fromJSON(t):null,c=(0,l.r)(o.renderer),g=new u.A({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:a,renderer:c,container:new p.A(this.view.featuresTilingScheme)});this._graphicsViewMap[e.geometryType]=g,this._popupTemplates.set(g,h),"polygon"!==e.geometryType||this.layer.polygonSymbol?"polyline"!==e.geometryType||this.layer.lineSymbol?"point"!==e.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=c.symbol):this.layer.lineSymbol=c.symbol:this.layer.polygonSymbol=c.symbol,this.graphicsViews.push(g),this.container.addChild(g.container)}}),a.Vh),(0,a.wB)((()=>this.layer?.polygonSymbol),(e=>{this._graphicsViewMap.polygon.renderer=new h.A({symbol:e})}),a.Vh),(0,a.wB)((()=>this.layer?.lineSymbol),(e=>{this._graphicsViewMap.polyline.renderer=new h.A({symbol:e})}),a.Vh),(0,a.wB)((()=>this.layer?.pointSymbol),(e=>{this._graphicsViewMap.point.renderer=new h.A({symbol:e})}),a.Vh)])}detach(){this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}_clear(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};_=(0,s._)([(0,o.$)("esri.views.2d.layers.GeoRSSLayerView2D")],_);const f=_},95387:(e,t,i)=>{i.d(t,{A:()=>m});var s=i(6267),r=i(42766),n=i(46615),a=i(21360),o=i(48325),h=i(80952),l=i(65231),d=i(37353),c=i(38403),p=i(89423),u=i(41746),g=i(80976);const _=Math.PI/180;class f extends d.q{constructor(e){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=(0,a.c)(),this._localOrigin={x:0,y:0},this._getBounds=e}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=(0,s.WD)(this._program)}doRender(e){const{context:t}=e,i=this._getBounds();if(i.length<1)return;this._createShaderProgram(t),this._updateMatricesAndLocalOrigin(e),this._updateBufferData(t,i),t.setBlendingEnabled(!0),t.setDepthTestEnabled(!1),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1),t.setBlendFunction(u.dn.ONE,u.dn.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0);const s=this._program;t.bindVAO(this._vao),t.useProgram(s),s.setUniformMatrix3fv("u_dvsMat3",this._dvsMat3),t.gl.lineWidth(1),t.drawElements(u.WR.LINES,8*i.length,u.pe.UNSIGNED_INT,0),t.bindVAO()}_createTransforms(){return{dvs:(0,a.c)()}}_createShaderProgram(e){if(this._program)return;this._program=e.programCache.acquire("precision highp float;\n        uniform mat3 u_dvsMat3;\n\n        attribute vec2 a_position;\n\n        void main() {\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\n        }","precision mediump float;\n      void main() {\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\n      }",y().attributes)}_updateMatricesAndLocalOrigin(e){const{state:t}=e,{displayMat3:i,size:s,resolution:r,pixelRatio:a,rotation:d,viewpoint:c}=t,p=_*d,{x:u,y:g}=c.targetGeometry,f=(0,l.mT)(u,t.spatialReference);this._localOrigin.x=f,this._localOrigin.y=g;const y=a*s[0],m=a*s[1],w=r*y,v=r*m,b=(0,n.g)(this._dvsMat3);(0,n.m)(b,b,i),(0,n.h)(b,b,(0,o.f)(y/2,m/2)),(0,n.c)(b,b,(0,h.f)(s[0]/w,-m/v,1)),(0,n.r)(b,b,-p)}_updateBufferData(e,t){const{x:i,y:s}=this._localOrigin,r=8*t.length,n=new Float32Array(r),a=new Uint32Array(8*t.length);let o=0,h=0;for(const l of t)l&&(n[2*o]=l[0]-i,n[2*o+1]=l[1]-s,n[2*o+2]=l[0]-i,n[2*o+3]=l[3]-s,n[2*o+4]=l[2]-i,n[2*o+5]=l[3]-s,n[2*o+6]=l[2]-i,n[2*o+7]=l[1]-s,a[h]=o+0,a[h+1]=o+3,a[h+2]=o+3,a[h+3]=o+2,a[h+4]=o+2,a[h+5]=o+1,a[h+6]=o+1,a[h+7]=o+0,o+=4,h+=8);if(this._vertexBuffer?this._vertexBuffer.setData(n.buffer):this._vertexBuffer=p.g.createVertex(e,u._U.DYNAMIC_DRAW,n.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=p.g.createIndex(e,u._U.DYNAMIC_DRAW,a),!this._vao){const t=y();this._vao=new g.Z(e,t.attributes,t.bufferLayouts,{geometry:this._vertexBuffer},this._indexBuffer)}}}const y=()=>(0,c.ES)("bounds",{geometry:[{location:0,name:"a_position",count:2,type:u.pe.FLOAT}]});let m=class extends r.i{constructor(e){super(e),this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=(0,s.pR)(this._boundsRenderer)}enableRenderingBounds(e){this._boundsRenderer=new f(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.patch(t),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){e.clear(),this.contains(e)||this.addChild(e)}_renderChildren(e,t){for(const i of this.children)i.isReady&&i.hasData&&(i.commit(e),e.context.setStencilFunction(u.MT.EQUAL,i.stencilRef,255),i.getDisplayList().replay(e,i,t))}}},13737:(e,t,i)=>{i.d(t,{A:()=>n});var s=i(79432),r=i(95387);class n extends r.A{renderChildren(e){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(e.context,!1),super.renderChildren(e),e.drawPhase===s.S5.MAP&&this._renderChildren(e),this.hasHighlight&&e.drawPhase===s.S5.HIGHLIGHT&&this._renderHighlight(e),this._boundsRenderer&&this._boundsRenderer.doRender(e))}_renderHighlight(e){const{painter:t}=e,i=t.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}}}]);