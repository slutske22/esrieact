"use strict";
exports.id = 96234;
exports.ids = [96234];
exports.modules = {

/***/ 96234:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RouteLayerInteraction: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(66866);
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(52495);
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(20464);
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(6267);
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(85251);
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(21564);
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(39831);
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(539);
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9272);
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(63863);
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(4238);
/* harmony import */ var _layers_GraphicsLayer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(31828);
/* harmony import */ var _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(79493);
/* harmony import */ var _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(78397);
/* harmony import */ var _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(57509);
/* harmony import */ var _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(15704);
/* harmony import */ var _widgets_Sketch_SketchViewModel_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(10816);
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.33/esri/copyright.txt for details.
*/
function g(e,r){e.networkFeature=r}function u(e){const r=w(e.graphic);return{...e,networkFeature:r}}function b(e){const r=e.graphics.map((e=>w(e)));return{...e,networkFeatures:r}}function w(e){return e.networkFeature}function k(e){return"point"===e?.type||"polyline"===e?.type||"polygon"===e?.type}let _=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A{constructor(e){super(e),this._createMode=null,this._graphicsLayer=new _layers_GraphicsLayer_js__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A({internal:!0,listMode:"hide",title:"Banana"}),this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_9__/* .UpdatingHandles */ .U,this.enabled=!0,this._handleSketchViewModelEvents=async e=>{switch(e.type){case"update":switch(e.state){case"active":case"complete":for(const r of e.graphics){w(r).geometry=k(r.geometry)?r.geometry.clone():null}}break;case"undo":case"redo":break;case"delete":for(const r of e.graphics){const e=w(r);this._removeNetworkFeature(e)}break;case"create":if(e.graphic&&"complete"===e.state&&this._createMode){const r=e.graphic.geometry?.clone(),t=e.graphic.symbol?.clone();if(!r)break;switch(this._createMode){case"stop":{if("point"!==r.type)break;const{stops:t}=this.layer;if(t.length>0&&t.every((({geometry:e})=>!e))){t.at(0).geometry=r;break}if(t.length>1&&t.filter(((e,r)=>0!==r)).every((({geometry:e})=>!e))){t.at(1).geometry=r;break}const o=new _rest_support_Stop_js__WEBPACK_IMPORTED_MODULE_14__/* ["default"] */ .A({geometry:r});t.add(o),g(e.graphic,o);break}case"point-barrier":{if("point"!==r.type)break;const o=new _rest_support_PointBarrier_js__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .A({geometry:r,symbol:t});this.layer.pointBarriers.add(o),g(e.graphic,o);break}case"polyline-barrier":{if("polyline"!==r.type)break;const o=new _rest_support_PolylineBarrier_js__WEBPACK_IMPORTED_MODULE_13__/* ["default"] */ .A({geometry:r,symbol:t});this.layer.polylineBarriers.add(o),g(e.graphic,o);break}case"polygon-barrier":{if("polygon"!==r.type)break;const o=new _rest_support_PolygonBarrier_js__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A({geometry:r,symbol:t});this.layer.polygonBarriers.add(o),g(e.graphic,o);break}}}}(await this.view.whenLayerView(this.layer)).emit(e.type,"create"===e.type?u(e):b(e))}}initialize(){this._sketchViewModel=new _widgets_Sketch_SketchViewModel_js__WEBPACK_IMPORTED_MODULE_15__/* ["default"] */ .A({layer:this._graphicsLayer,view:this.view}),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .watch */ .wB)((()=>this.enabled),(e=>{e?this._activate():this._deactivate()}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .initial */ .Vh),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__/* .watch */ .wB)((()=>{const{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}=this.layer;return{stops:e,pointBarriers:r,polylineBarriers:t,polygonBarriers:o}}),(()=>{this.enabled&&this._loadClonedGraphics()})),this._sketchViewModel.on(["create","delete","redo","undo","update"],this._handleSketchViewModelEvents),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_2__/* .destroyHandle */ .DQ)(this._updatingHandles)])}destroy(){this.view.map.remove(this._graphicsLayer),this._graphicsLayer.removeAll(),this._graphicsLayer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__/* .destroyMaybe */ .pR)(this._graphicsLayer),this._sketchViewModel=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_16__/* .destroyMaybe */ .pR)(this._sketchViewModel)}get selectedNetworkFeatures(){return this._sketchViewModel.updateGraphics.map((e=>w(e)))}get updating(){return this._updatingHandles.updating}create(e){switch(this._createMode=e,e){case"stop":this.layer.defaultSymbols.stops?.unlocated&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.stops.unlocated.clone());break;case"point-barrier":this.layer.defaultSymbols.pointBarriers&&(this._sketchViewModel.pointSymbol=this.layer.defaultSymbols.pointBarriers.clone());break;case"polyline-barrier":this.layer.defaultSymbols.polylineBarriers&&(this._sketchViewModel.polylineSymbol=this.layer.defaultSymbols.polylineBarriers.clone());break;case"polygon-barrier":this.layer.defaultSymbols.polygonBarriers&&(this._sketchViewModel.polygonSymbol=this.layer.defaultSymbols.polygonBarriers.clone())}switch(e){case"stop":case"point-barrier":return this._sketchViewModel.create("point");case"polyline-barrier":return this._sketchViewModel.create("polyline");case"polygon-barrier":return this._sketchViewModel.create("polygon")}}remove(e){const r=this._graphicsLayer.graphics.find((r=>w(r)===e));r&&this._graphicsLayer.remove(r),this._removeNetworkFeature(e)}_activate(){this._loadClonedGraphics(),this.view.map.add(this._graphicsLayer)}_deactivate(){this._sketchViewModel.cancel(),this.view.map?.remove(this._graphicsLayer),this._graphicsLayer.removeAll()}_loadClonedGraphics(){const e=[this.layer.stops,this.layer.pointBarriers,this.layer.polylineBarriers,this.layer.polygonBarriers].flatMap((e=>e.toArray().map((e=>{const r=e.toGraphic();return r.networkFeature=e,r}))));this._graphicsLayer.removeAll().addMany(e)}_removeNetworkFeature(e){switch(e.type){case"stop":this.layer.stops.remove(e);break;case"point-barrier":this.layer.pointBarriers.remove(e);break;case"polyline-barrier":this.layer.polylineBarriers.remove(e);break;case"polygon-barrier":this.layer.polygonBarriers.remove(e)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],_.prototype,"enabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0})],_.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({readOnly:!0})],_.prototype,"selectedNetworkFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)()],_.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__/* .property */ .MZ)({constructOnly:!0})],_.prototype,"view",void 0),_=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__/* .subclass */ .$)("esri.views.2d.layers.support.RouteLayerInteraction")],_);


/***/ })

};
;