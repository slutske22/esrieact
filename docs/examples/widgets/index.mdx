# Widgets

## As map children

Widgets can be added to a `MapView` as children. They take all the same properties as their native ArcGIS JS API instance:

```tsx live
function Example() {
  return (
    <MapView
      ViewProperties={{ extent: OAHU_EXTENT }}
      MapProperties={{ basemap: "topo-vector" }}
      style={{ height: "400px", width: "100%" }}
    >
      <SearchBar position="top-right" />
      <Legend position="top-right" />

      <FeatureLayer
        url={BENTHIC_FEATURELAYER_URL}
        definitionExpression="zone = 'Back Reef'"
      />
    </MapView>
  );
}
```

## State managed props

Properties of a widget can be managed via react state:

```tsx live
function Example() {
  const [checked, setChecked] = useState(true);
  return (
    <div>
      <div>
        <label className="flex gap-2 mb-2 items-center">
          <input
            type="checkbox"
            checked={checked}
            onChange={(e) => setChecked(e.target.checked)}
          />
          Legend: Respect Definition Expression
        </label>
      </div>

      <MapView
        ViewProperties={{ extent: OAHU_EXTENT }}
        MapProperties={{ basemap: "topo-vector" }}
        style={{ height: "400px", width: "100%" }}
      >
        <FeatureLayer
          url={OAHU_HPMS_ROADS_FL_URL}
          definitionExpression="f_system_t = 'Interstate'"
        />

        <Legend
          position="top-right"
          key={`${checked}`}
          respectLayerDefinitionExpression={checked}
        />
      </MapView>
    </div>
  );
}
```

## Integration with web components

During development of this library, esri announced [their plan to transition away from classic widgets, to standard web components](https://developers.arcgis.com/javascript/latest/components-transition-plan/). These standard web components make development with react much more intuitive for UI elements like widgets. This library has not yet been brought up to date to be based on web-components. In the meantime, you can either use the class (but soon to be deprecated) widgets as shown above, or you can mix in the newer web-components. You can declare a web component widget in your map, but you must manually add the widget to the `view`:

```tsx live noInline
// import "@arcgis/map-components/components/arcgis-directional-pad";

function Provider({ children }) {
  return <MapContextProvider>{children}</MapContextProvider>;
}

function Example() {
  const { view } = useMap();

  useEffect(() => {
    if (view?.when) {
      view.when(() => {
        const pad = document.querySelector("arcgis-directional-pad");
        pad.view = view;

        view.ui.add(pad, "top-right");
      });
    }
  }, [view]);

  return (
    <MapViewCore
      ViewProperties={{ extent: HAWAII_EXTENT }}
      MapProperties={{ basemap: "topo-vector" }}
      style={{ height: "300px", width: "100%" }}
    >
      <arcgis-directional-pad></arcgis-directional-pad>
    </MapViewCore>
  );
}

render(
  <MapContextProvider>
    <Example />
  </MapContextProvider>,
);
```

Once this library has been brought up to date with the still-emerging web component standard, the `useEffect` in the above example will no longer be necessary.
