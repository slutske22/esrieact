# Layers

## Introduction

All layers types can be added to a `MapView` as children:

```tsx live
function Example() {
  return (
    <MapView
      ViewProperties={{ extent: OAHU_EXTENT }}
      MapProperties={{ basemap: "topo-vector" }}
      style={{ height: "300px", width: "100%" }}
    >
      <FeatureLayer url={BENTHIC_FEATURELAYER_URL} />
      <MapImageLayer url={LANDCOVER_IMAGELAYER_URL} />
    </MapView>
  );
}
```

## State managed layers

```tsx live
function Example() {
  const [visibleLayers, setVisibleLayers] = useState(["benthic", "landcover"]);

  const toggleLayer = (layerName, checked) => {
    if (checked) {
      setVisibleLayers([...visibleLayers, layerName]);
    } else {
      setVisibleLayers(visibleLayers.filter((l) => l !== layerName));
    }
  };

  return (
    <div>
      <div className="flex flex-col gap-2 mb-2">
        <label>
          <input
            type="checkbox"
            className="mr-2"
            checked={visibleLayers.includes("landcover")}
            onChange={(e) => toggleLayer("landcover", e.target.checked)}
          />
          Land Cover Status
        </label>
        <label>
          <input
            type="checkbox"
            className="mr-2"
            checked={visibleLayers.includes("benthic")}
            onChange={(e) => toggleLayer("benthic", e.target.checked)}
          />
          Benthic Habitat
        </label>
      </div>

      <MapView
        ViewProperties={{ extent: OAHU_EXTENT }}
        MapProperties={{ basemap: "topo-vector" }}
        style={{ height: "300px", width: "100%" }}
      >
        {visibleLayers.includes("benthic") && (
          <FeatureLayer url={BENTHIC_FEATURELAYER_URL} />
        )}
        {visibleLayers.includes("landcover") && (
          <MapImageLayer url={LANDCOVER_IMAGELAYER_URL} />
        )}
        <LayerList position="top-right" />
      </MapView>
    </div>
  );
}
```

## State managed visibility

The above scenario manages whether or not a layer is added to the map. Under the hood, esrieact calls the `.addTo` and `.remove` layers on the map instance for the child layers. If you wish for the layers to remain present on the map, but toggle their visibility, you can manage their `visible` prop with state:

```tsx live
function Example() {
  const [visibleLayers, setVisibleLayers] = useState(["benthic", "landcover"]);

  const toggleLayer = (layerName, checked) => {
    if (checked) {
      setVisibleLayers([...visibleLayers, layerName]);
    } else {
      setVisibleLayers(visibleLayers.filter((l) => l !== layerName));
    }
  };

  return (
    <div>
      <div className="flex flex-col gap-2 mb-2">
        <label>
          <input
            type="checkbox"
            className="mr-2"
            checked={visibleLayers.includes("landcover")}
            onChange={(e) => toggleLayer("landcover", e.target.checked)}
          />
          Land Cover Visible
        </label>
        <label>
          <input
            type="checkbox"
            className="mr-2"
            checked={visibleLayers.includes("benthic")}
            onChange={(e) => toggleLayer("benthic", e.target.checked)}
          />
          Benthic Habitat Visible
        </label>
      </div>

      <MapView
        ViewProperties={{ extent: OAHU_EXTENT }}
        MapProperties={{ basemap: "topo-vector" }}
        style={{ height: "300px", width: "100%" }}
      >
        <FeatureLayer
          url={BENTHIC_FEATURELAYER_URL}
          visible={visibleLayers.includes("benthic")}
        />
        <MapImageLayer
          url={LANDCOVER_IMAGELAYER_URL}
          visible={visibleLayers.includes("landcover")}
        />
        <LayerList position="top-right" />
      </MapView>
    </div>
  );
}
```

## Refs

Each layer can take a ref, which returns the underlying ArcGIS JS API layer instance:

```tsx live
function Example() {
  const featureLayerRef = useRef<__esri.FeatureLayer>();
  const mapImageLayerRef = useRef<__esri.MapImageLayer>();

  return (
    <div>
      <MapView
        ViewProperties={{ extent: OAHU_EXTENT }}
        MapProperties={{ basemap: "topo-vector" }}
        style={{ height: "300px", width: "100%" }}
      >
        <FeatureLayer ref={featureLayerRef} url={BENTHIC_FEATURELAYER_URL} />
        <MapImageLayer ref={mapImageLayerRef} url={LANDCOVER_IMAGELAYER_URL} />
      </MapView>

      <div className="flex gap-2 mt-2">
        <button onClick={() => console.log(featureLayerRef)}>
          Log FeatureLayer ref
        </button>
        <button onClick={() => console.log(mapImageLayerRef)}>
          Log MapImageLayer ref
        </button>
      </div>
    </div>
  );
}
```
